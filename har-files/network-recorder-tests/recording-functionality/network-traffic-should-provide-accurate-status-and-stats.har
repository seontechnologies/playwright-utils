{
  "log": {
    "version": "1.2",
    "creator": {
      "name": "playwright-utils-network-recorder",
      "version": "1.0.0"
    },
    "pages": [
      {
        "startedDateTime": "2025-09-19T13:56:55.247Z",
        "id": "f8a65b4f72335143de65-3557dc551a8265f11ac8",
        "title": "should provide accurate status and stats",
        "pageTimings": {
          "onContentLoad": -1,
          "onLoad": -1
        }
      }
    ],
    "entries": [
      {
        "startedDateTime": "2025-09-19T13:56:55.259Z",
        "time": 41,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "upgrade-insecure-requests",
              "value": "1"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/html"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"26b-oLztwZ7g59u1w59EFhgkBPUJhQI\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "619"
            }
          ],
          "content": {
            "size": 619,
            "mimeType": "text/html",
            "text": "PCFkb2N0eXBlIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KICA8aGVhZD4KICAgIDxzY3JpcHQgdHlwZT0ibW9kdWxlIj5pbXBvcnQgeyBpbmplY3RJbnRvR2xvYmFsSG9vayB9IGZyb20gIi9AcmVhY3QtcmVmcmVzaCI7CmluamVjdEludG9HbG9iYWxIb29rKHdpbmRvdyk7CndpbmRvdy4kUmVmcmVzaFJlZyQgPSAoKSA9PiB7fTsKd2luZG93LiRSZWZyZXNoU2lnJCA9ICgpID0+ICh0eXBlKSA9PiB0eXBlOzwvc2NyaXB0PgoKICAgIDxzY3JpcHQgdHlwZT0ibW9kdWxlIiBzcmM9Ii9Adml0ZS9jbGllbnQiPjwvc2NyaXB0PgoKICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04IiAvPgogICAgPGxpbmsgcmVsPSJpY29uIiB0eXBlPSJpbWFnZS9zdmcreG1sIiBocmVmPSIvc3JjL2Zhdmljb24uc3ZnIiAvPgogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiIC8+CiAgICA8dGl0bGU+Vml0ZSBBcHA8L3RpdGxlPgogIDwvaGVhZD4KICA8Ym9keT4KICAgIDxkaXYgaWQ9InJvb3QiPjwvZGl2PgogICAgPHNjcmlwdCB0eXBlPSJtb2R1bGUiIHNyYz0iL3NyYy9tYWluLnRzeCI+PC9zY3JpcHQ+CiAgPC9ib2R5Pgo8L2h0bWw+Cg==",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 619
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 41,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.326Z",
        "time": 9,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/@vite/client",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"7e8c-yVFNdgd71swEGfvuu0tbQH8Hax8\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "182739"
            }
          ],
          "content": {
            "size": 182739,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0ICIvQGZzL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9ub2RlX21vZHVsZXMvdml0ZS9kaXN0L2NsaWVudC9lbnYubWpzIjsKCmNsYXNzIEhNUkNvbnRleHQgewogIGNvbnN0cnVjdG9yKGhtckNsaWVudCwgb3duZXJQYXRoKSB7CiAgICB0aGlzLmhtckNsaWVudCA9IGhtckNsaWVudDsKICAgIHRoaXMub3duZXJQYXRoID0gb3duZXJQYXRoOwogICAgaWYgKCFobXJDbGllbnQuZGF0YU1hcC5oYXMob3duZXJQYXRoKSkgewogICAgICBobXJDbGllbnQuZGF0YU1hcC5zZXQob3duZXJQYXRoLCB7fSk7CiAgICB9CiAgICBjb25zdCBtb2QgPSBobXJDbGllbnQuaG90TW9kdWxlc01hcC5nZXQob3duZXJQYXRoKTsKICAgIGlmIChtb2QpIHsKICAgICAgbW9kLmNhbGxiYWNrcyA9IFtdOwogICAgfQogICAgY29uc3Qgc3RhbGVMaXN0ZW5lcnMgPSBobXJDbGllbnQuY3R4VG9MaXN0ZW5lcnNNYXAuZ2V0KG93bmVyUGF0aCk7CiAgICBpZiAoc3RhbGVMaXN0ZW5lcnMpIHsKICAgICAgZm9yIChjb25zdCBbZXZlbnQsIHN0YWxlRm5zXSBvZiBzdGFsZUxpc3RlbmVycykgewogICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IGhtckNsaWVudC5jdXN0b21MaXN0ZW5lcnNNYXAuZ2V0KGV2ZW50KTsKICAgICAgICBpZiAobGlzdGVuZXJzKSB7CiAgICAgICAgICBobXJDbGllbnQuY3VzdG9tTGlzdGVuZXJzTWFwLnNldCgKICAgICAgICAgICAgZXZlbnQsCiAgICAgICAgICAgIGxpc3RlbmVycy5maWx0ZXIoKGwpID0+ICFzdGFsZUZucy5pbmNsdWRlcyhsKSkKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICB0aGlzLm5ld0xpc3RlbmVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgICBobXJDbGllbnQuY3R4VG9MaXN0ZW5lcnNNYXAuc2V0KG93bmVyUGF0aCwgdGhpcy5uZXdMaXN0ZW5lcnMpOwogIH0KICBnZXQgZGF0YSgpIHsKICAgIHJldHVybiB0aGlzLmhtckNsaWVudC5kYXRhTWFwLmdldCh0aGlzLm93bmVyUGF0aCk7CiAgfQogIGFjY2VwdChkZXBzLCBjYWxsYmFjaykgewogICAgaWYgKHR5cGVvZiBkZXBzID09PSAiZnVuY3Rpb24iIHx8ICFkZXBzKSB7CiAgICAgIHRoaXMuYWNjZXB0RGVwcyhbdGhpcy5vd25lclBhdGhdLCAoW21vZF0pID0+IGRlcHM/Lihtb2QpKTsKICAgIH0gZWxzZSBpZiAodHlwZW9mIGRlcHMgPT09ICJzdHJpbmciKSB7CiAgICAgIHRoaXMuYWNjZXB0RGVwcyhbZGVwc10sIChbbW9kXSkgPT4gY2FsbGJhY2s/Lihtb2QpKTsKICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShkZXBzKSkgewogICAgICB0aGlzLmFjY2VwdERlcHMoZGVwcywgY2FsbGJhY2spOwogICAgfSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIGhvdC5hY2NlcHQoKSB1c2FnZS5gKTsKICAgIH0KICB9CiAgLy8gZXhwb3J0IG5hbWVzIChmaXJzdCBhcmcpIGFyZSBpcnJlbGV2YW50IG9uIHRoZSBjbGllbnQgc2lkZSwgdGhleSdyZQogIC8vIGV4dHJhY3RlZCBpbiB0aGUgc2VydmVyIGZvciBwcm9wYWdhdGlvbgogIGFjY2VwdEV4cG9ydHMoXywgY2FsbGJhY2spIHsKICAgIHRoaXMuYWNjZXB0RGVwcyhbdGhpcy5vd25lclBhdGhdLCAoW21vZF0pID0+IGNhbGxiYWNrPy4obW9kKSk7CiAgfQogIGRpc3Bvc2UoY2IpIHsKICAgIHRoaXMuaG1yQ2xpZW50LmRpc3Bvc2VNYXAuc2V0KHRoaXMub3duZXJQYXRoLCBjYik7CiAgfQogIHBydW5lKGNiKSB7CiAgICB0aGlzLmhtckNsaWVudC5wcnVuZU1hcC5zZXQodGhpcy5vd25lclBhdGgsIGNiKTsKICB9CiAgLy8gS2VwdCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSAoIzExMDM2KQogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb24KICBkZWNsaW5lKCkgewogIH0KICBpbnZhbGlkYXRlKG1lc3NhZ2UpIHsKICAgIGNvbnN0IGZpcnN0SW52YWxpZGF0ZWRCeSA9IHRoaXMuaG1yQ2xpZW50LmN1cnJlbnRGaXJzdEludmFsaWRhdGVkQnkgPz8gdGhpcy5vd25lclBhdGg7CiAgICB0aGlzLmhtckNsaWVudC5ub3RpZnlMaXN0ZW5lcnMoInZpdGU6aW52YWxpZGF0ZSIsIHsKICAgICAgcGF0aDogdGhpcy5vd25lclBhdGgsCiAgICAgIG1lc3NhZ2UsCiAgICAgIGZpcnN0SW52YWxpZGF0ZWRCeQogICAgfSk7CiAgICB0aGlzLnNlbmQoInZpdGU6aW52YWxpZGF0ZSIsIHsKICAgICAgcGF0aDogdGhpcy5vd25lclBhdGgsCiAgICAgIG1lc3NhZ2UsCiAgICAgIGZpcnN0SW52YWxpZGF0ZWRCeQogICAgfSk7CiAgICB0aGlzLmhtckNsaWVudC5sb2dnZXIuZGVidWcoCiAgICAgIGBpbnZhbGlkYXRlICR7dGhpcy5vd25lclBhdGh9JHttZXNzYWdlID8gYDogJHttZXNzYWdlfWAgOiAiIn1gCiAgICApOwogIH0KICBvbihldmVudCwgY2IpIHsKICAgIGNvbnN0IGFkZFRvTWFwID0gKG1hcCkgPT4gewogICAgICBjb25zdCBleGlzdGluZyA9IG1hcC5nZXQoZXZlbnQpIHx8IFtdOwogICAgICBleGlzdGluZy5wdXNoKGNiKTsKICAgICAgbWFwLnNldChldmVudCwgZXhpc3RpbmcpOwogICAgfTsKICAgIGFkZFRvTWFwKHRoaXMuaG1yQ2xpZW50LmN1c3RvbUxpc3RlbmVyc01hcCk7CiAgICBhZGRUb01hcCh0aGlzLm5ld0xpc3RlbmVycyk7CiAgfQogIG9mZihldmVudCwgY2IpIHsKICAgIGNvbnN0IHJlbW92ZUZyb21NYXAgPSAobWFwKSA9PiB7CiAgICAgIGNvbnN0IGV4aXN0aW5nID0gbWFwLmdldChldmVudCk7CiAgICAgIGlmIChleGlzdGluZyA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IHBydW5lZCA9IGV4aXN0aW5nLmZpbHRlcigobCkgPT4gbCAhPT0gY2IpOwogICAgICBpZiAocHJ1bmVkLmxlbmd0aCA9PT0gMCkgewogICAgICAgIG1hcC5kZWxldGUoZXZlbnQpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBtYXAuc2V0KGV2ZW50LCBwcnVuZWQpOwogICAgfTsKICAgIHJlbW92ZUZyb21NYXAodGhpcy5obXJDbGllbnQuY3VzdG9tTGlzdGVuZXJzTWFwKTsKICAgIHJlbW92ZUZyb21NYXAodGhpcy5uZXdMaXN0ZW5lcnMpOwogIH0KICBzZW5kKGV2ZW50LCBkYXRhKSB7CiAgICB0aGlzLmhtckNsaWVudC5zZW5kKHsgdHlwZTogImN1c3RvbSIsIGV2ZW50LCBkYXRhIH0pOwogIH0KICBhY2NlcHREZXBzKGRlcHMsIGNhbGxiYWNrID0gKCkgPT4gewogIH0pIHsKICAgIGNvbnN0IG1vZCA9IHRoaXMuaG1yQ2xpZW50LmhvdE1vZHVsZXNNYXAuZ2V0KHRoaXMub3duZXJQYXRoKSB8fCB7CiAgICAgIGlkOiB0aGlzLm93bmVyUGF0aCwKICAgICAgY2FsbGJhY2tzOiBbXQogICAgfTsKICAgIG1vZC5jYWxsYmFja3MucHVzaCh7CiAgICAgIGRlcHMsCiAgICAgIGZuOiBjYWxsYmFjawogICAgfSk7CiAgICB0aGlzLmhtckNsaWVudC5ob3RNb2R1bGVzTWFwLnNldCh0aGlzLm93bmVyUGF0aCwgbW9kKTsKICB9Cn0KY2xhc3MgSE1SQ2xpZW50IHsKICBjb25zdHJ1Y3Rvcihsb2dnZXIsIHRyYW5zcG9ydCwgaW1wb3J0VXBkYXRlZE1vZHVsZSkgewogICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7CiAgICB0aGlzLnRyYW5zcG9ydCA9IHRyYW5zcG9ydDsKICAgIHRoaXMuaW1wb3J0VXBkYXRlZE1vZHVsZSA9IGltcG9ydFVwZGF0ZWRNb2R1bGU7CiAgICB0aGlzLmhvdE1vZHVsZXNNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpOwogICAgdGhpcy5kaXNwb3NlTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICAgIHRoaXMucHJ1bmVNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpOwogICAgdGhpcy5kYXRhTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICAgIHRoaXMuY3VzdG9tTGlzdGVuZXJzTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICAgIHRoaXMuY3R4VG9MaXN0ZW5lcnNNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpOwogICAgdGhpcy51cGRhdGVRdWV1ZSA9IFtdOwogICAgdGhpcy5wZW5kaW5nVXBkYXRlUXVldWUgPSBmYWxzZTsKICB9CiAgYXN5bmMgbm90aWZ5TGlzdGVuZXJzKGV2ZW50LCBkYXRhKSB7CiAgICBjb25zdCBjYnMgPSB0aGlzLmN1c3RvbUxpc3RlbmVyc01hcC5nZXQoZXZlbnQpOwogICAgaWYgKGNicykgewogICAgICBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoY2JzLm1hcCgoY2IpID0+IGNiKGRhdGEpKSk7CiAgICB9CiAgfQogIHNlbmQocGF5bG9hZCkgewogICAgdGhpcy50cmFuc3BvcnQuc2VuZChwYXlsb2FkKS5jYXRjaCgoZXJyKSA9PiB7CiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGVycik7CiAgICB9KTsKICB9CiAgY2xlYXIoKSB7CiAgICB0aGlzLmhvdE1vZHVsZXNNYXAuY2xlYXIoKTsKICAgIHRoaXMuZGlzcG9zZU1hcC5jbGVhcigpOwogICAgdGhpcy5wcnVuZU1hcC5jbGVhcigpOwogICAgdGhpcy5kYXRhTWFwLmNsZWFyKCk7CiAgICB0aGlzLmN1c3RvbUxpc3RlbmVyc01hcC5jbGVhcigpOwogICAgdGhpcy5jdHhUb0xpc3RlbmVyc01hcC5jbGVhcigpOwogIH0KICAvLyBBZnRlciBhbiBITVIgdXBkYXRlLCBzb21lIG1vZHVsZXMgYXJlIG5vIGxvbmdlciBpbXBvcnRlZCBvbiB0aGUgcGFnZQogIC8vIGJ1dCB0aGV5IG1heSBoYXZlIGxlZnQgYmVoaW5kIHNpZGUgZWZmZWN0cyB0aGF0IG5lZWQgdG8gYmUgY2xlYW5lZCB1cAogIC8vIChlLmcuIHN0eWxlIGluamVjdGlvbnMpCiAgYXN5bmMgcHJ1bmVQYXRocyhwYXRocykgewogICAgYXdhaXQgUHJvbWlzZS5hbGwoCiAgICAgIHBhdGhzLm1hcCgocGF0aCkgPT4gewogICAgICAgIGNvbnN0IGRpc3Bvc2VyID0gdGhpcy5kaXNwb3NlTWFwLmdldChwYXRoKTsKICAgICAgICBpZiAoZGlzcG9zZXIpIHJldHVybiBkaXNwb3Nlcih0aGlzLmRhdGFNYXAuZ2V0KHBhdGgpKTsKICAgICAgfSkKICAgICk7CiAgICBwYXRocy5mb3JFYWNoKChwYXRoKSA9PiB7CiAgICAgIGNvbnN0IGZuID0gdGhpcy5wcnVuZU1hcC5nZXQocGF0aCk7CiAgICAgIGlmIChmbikgewogICAgICAgIGZuKHRoaXMuZGF0YU1hcC5nZXQocGF0aCkpOwogICAgICB9CiAgICB9KTsKICB9CiAgd2FybkZhaWxlZFVwZGF0ZShlcnIsIHBhdGgpIHsKICAgIGlmICghKGVyciBpbnN0YW5jZW9mIEVycm9yKSB8fCAhZXJyLm1lc3NhZ2UuaW5jbHVkZXMoImZldGNoIikpIHsKICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZXJyKTsKICAgIH0KICAgIHRoaXMubG9nZ2VyLmVycm9yKAogICAgICBgRmFpbGVkIHRvIHJlbG9hZCAke3BhdGh9LiBUaGlzIGNvdWxkIGJlIGR1ZSB0byBzeW50YXggZXJyb3JzIG9yIGltcG9ydGluZyBub24tZXhpc3RlbnQgbW9kdWxlcy4gKHNlZSBlcnJvcnMgYWJvdmUpYAogICAgKTsKICB9CiAgLyoqCiAgICogYnVmZmVyIG11bHRpcGxlIGhvdCB1cGRhdGVzIHRyaWdnZXJlZCBieSB0aGUgc2FtZSBzcmMgY2hhbmdlCiAgICogc28gdGhhdCB0aGV5IGFyZSBpbnZva2VkIGluIHRoZSBzYW1lIG9yZGVyIHRoZXkgd2VyZSBzZW50LgogICAqIChvdGhlcndpc2UgdGhlIG9yZGVyIG1heSBiZSBpbmNvbnNpc3RlbnQgYmVjYXVzZSBvZiB0aGUgaHR0cCByZXF1ZXN0IHJvdW5kIHRyaXApCiAgICovCiAgYXN5bmMgcXVldWVVcGRhdGUocGF5bG9hZCkgewogICAgdGhpcy51cGRhdGVRdWV1ZS5wdXNoKHRoaXMuZmV0Y2hVcGRhdGUocGF5bG9hZCkpOwogICAgaWYgKCF0aGlzLnBlbmRpbmdVcGRhdGVRdWV1ZSkgewogICAgICB0aGlzLnBlbmRpbmdVcGRhdGVRdWV1ZSA9IHRydWU7CiAgICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZSgpOwogICAgICB0aGlzLnBlbmRpbmdVcGRhdGVRdWV1ZSA9IGZhbHNlOwogICAgICBjb25zdCBsb2FkaW5nID0gWy4uLnRoaXMudXBkYXRlUXVldWVdOwogICAgICB0aGlzLnVwZGF0ZVF1ZXVlID0gW107CiAgICAgIChhd2FpdCBQcm9taXNlLmFsbChsb2FkaW5nKSkuZm9yRWFjaCgoZm4pID0+IGZuICYmIGZuKCkpOwogICAgfQogIH0KICBhc3luYyBmZXRjaFVwZGF0ZSh1cGRhdGUpIHsKICAgIGNvbnN0IHsgcGF0aCwgYWNjZXB0ZWRQYXRoLCBmaXJzdEludmFsaWRhdGVkQnkgfSA9IHVwZGF0ZTsKICAgIGNvbnN0IG1vZCA9IHRoaXMuaG90TW9kdWxlc01hcC5nZXQocGF0aCk7CiAgICBpZiAoIW1vZCkgewogICAgICByZXR1cm47CiAgICB9CiAgICBsZXQgZmV0Y2hlZE1vZHVsZTsKICAgIGNvbnN0IGlzU2VsZlVwZGF0ZSA9IHBhdGggPT09IGFjY2VwdGVkUGF0aDsKICAgIGNvbnN0IHF1YWxpZmllZENhbGxiYWNrcyA9IG1vZC5jYWxsYmFja3MuZmlsdGVyKAogICAgICAoeyBkZXBzIH0pID0+IGRlcHMuaW5jbHVkZXMoYWNjZXB0ZWRQYXRoKQogICAgKTsKICAgIGlmIChpc1NlbGZVcGRhdGUgfHwgcXVhbGlmaWVkQ2FsbGJhY2tzLmxlbmd0aCA+IDApIHsKICAgICAgY29uc3QgZGlzcG9zZXIgPSB0aGlzLmRpc3Bvc2VNYXAuZ2V0KGFjY2VwdGVkUGF0aCk7CiAgICAgIGlmIChkaXNwb3NlcikgYXdhaXQgZGlzcG9zZXIodGhpcy5kYXRhTWFwLmdldChhY2NlcHRlZFBhdGgpKTsKICAgICAgdHJ5IHsKICAgICAgICBmZXRjaGVkTW9kdWxlID0gYXdhaXQgdGhpcy5pbXBvcnRVcGRhdGVkTW9kdWxlKHVwZGF0ZSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0aGlzLndhcm5GYWlsZWRVcGRhdGUoZSwgYWNjZXB0ZWRQYXRoKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuICgpID0+IHsKICAgICAgdHJ5IHsKICAgICAgICB0aGlzLmN1cnJlbnRGaXJzdEludmFsaWRhdGVkQnkgPSBmaXJzdEludmFsaWRhdGVkQnk7CiAgICAgICAgZm9yIChjb25zdCB7IGRlcHMsIGZuIH0gb2YgcXVhbGlmaWVkQ2FsbGJhY2tzKSB7CiAgICAgICAgICBmbigKICAgICAgICAgICAgZGVwcy5tYXAoCiAgICAgICAgICAgICAgKGRlcCkgPT4gZGVwID09PSBhY2NlcHRlZFBhdGggPyBmZXRjaGVkTW9kdWxlIDogdm9pZCAwCiAgICAgICAgICAgICkKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IGxvZ2dlZFBhdGggPSBpc1NlbGZVcGRhdGUgPyBwYXRoIDogYCR7YWNjZXB0ZWRQYXRofSB2aWEgJHtwYXRofWA7CiAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYGhvdCB1cGRhdGVkOiAke2xvZ2dlZFBhdGh9YCk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5jdXJyZW50Rmlyc3RJbnZhbGlkYXRlZEJ5ID0gdm9pZCAwOwogICAgICB9CiAgICB9OwogIH0KfQoKLyogQHRzLXNlbGYtdHlwZXM9Ii4vaW5kZXguZC50cyIgKi8KbGV0IHVybEFscGhhYmV0ID0KICAndXNlYW5kb20tMjZUMTk4MzQwUFg3NXB4SkFDS1ZFUllNSU5EQlVTSFdPTEZfR1FaYmZnaGprbHF2d3l6cmljdCc7CmxldCBuYW5vaWQgPSAoc2l6ZSA9IDIxKSA9PiB7CiAgbGV0IGlkID0gJyc7CiAgbGV0IGkgPSBzaXplIHwgMDsKICB3aGlsZSAoaS0tKSB7CiAgICBpZCArPSB1cmxBbHBoYWJldFsoTWF0aC5yYW5kb20oKSAqIDY0KSB8IDBdOwogIH0KICByZXR1cm4gaWQKfTsKCnR5cGVvZiBwcm9jZXNzICE9PSAidW5kZWZpbmVkIiAmJiBwcm9jZXNzLnBsYXRmb3JtID09PSAid2luMzIiOwpmdW5jdGlvbiBwcm9taXNlV2l0aFJlc29sdmVycygpIHsKICBsZXQgcmVzb2x2ZTsKICBsZXQgcmVqZWN0OwogIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgoX3Jlc29sdmUsIF9yZWplY3QpID0+IHsKICAgIHJlc29sdmUgPSBfcmVzb2x2ZTsKICAgIHJlamVjdCA9IF9yZWplY3Q7CiAgfSk7CiAgcmV0dXJuIHsgcHJvbWlzZSwgcmVzb2x2ZSwgcmVqZWN0IH07Cn0KCmZ1bmN0aW9uIHJldml2ZUludm9rZUVycm9yKGUpIHsKICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihlLm1lc3NhZ2UgfHwgIlVua25vd24gaW52b2tlIGVycm9yIik7CiAgT2JqZWN0LmFzc2lnbihlcnJvciwgZSwgewogICAgLy8gcGFzcyB0aGUgd2hvbGUgZXJyb3IgaW5zdGVhZCBvZiBqdXN0IHRoZSBzdGFja3RyYWNlCiAgICAvLyBzbyB0aGF0IGl0IGdldHMgZm9ybWF0dGVkIG5pY2VseSB3aXRoIGNvbnNvbGUubG9nCiAgICBydW5uZXJFcnJvcjogbmV3IEVycm9yKCJSdW5uZXJFcnJvciIpCiAgfSk7CiAgcmV0dXJuIGVycm9yOwp9CmNvbnN0IGNyZWF0ZUludm9rZWFibGVUcmFuc3BvcnQgPSAodHJhbnNwb3J0KSA9PiB7CiAgaWYgKHRyYW5zcG9ydC5pbnZva2UpIHsKICAgIHJldHVybiB7CiAgICAgIC4uLnRyYW5zcG9ydCwKICAgICAgYXN5bmMgaW52b2tlKG5hbWUsIGRhdGEpIHsKICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0cmFuc3BvcnQuaW52b2tlKHsKICAgICAgICAgIHR5cGU6ICJjdXN0b20iLAogICAgICAgICAgZXZlbnQ6ICJ2aXRlOmludm9rZSIsCiAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgIGlkOiAic2VuZCIsCiAgICAgICAgICAgIG5hbWUsCiAgICAgICAgICAgIGRhdGEKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAoImVycm9yIiBpbiByZXN1bHQpIHsKICAgICAgICAgIHRocm93IHJldml2ZUludm9rZUVycm9yKHJlc3VsdC5lcnJvcik7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0OwogICAgICB9CiAgICB9OwogIH0KICBpZiAoIXRyYW5zcG9ydC5zZW5kIHx8ICF0cmFuc3BvcnQuY29ubmVjdCkgewogICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAidHJhbnNwb3J0IG11c3QgaW1wbGVtZW50IHNlbmQgYW5kIGNvbm5lY3Qgd2hlbiBpbnZva2UgaXMgbm90IGltcGxlbWVudGVkIgogICAgKTsKICB9CiAgY29uc3QgcnBjUHJvbWlzZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpOwogIHJldHVybiB7CiAgICAuLi50cmFuc3BvcnQsCiAgICBjb25uZWN0KHsgb25NZXNzYWdlLCBvbkRpc2Nvbm5lY3Rpb24gfSkgewogICAgICByZXR1cm4gdHJhbnNwb3J0LmNvbm5lY3QoewogICAgICAgIG9uTWVzc2FnZShwYXlsb2FkKSB7CiAgICAgICAgICBpZiAocGF5bG9hZC50eXBlID09PSAiY3VzdG9tIiAmJiBwYXlsb2FkLmV2ZW50ID09PSAidml0ZTppbnZva2UiKSB7CiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBwYXlsb2FkLmRhdGE7CiAgICAgICAgICAgIGlmIChkYXRhLmlkLnN0YXJ0c1dpdGgoInJlc3BvbnNlOiIpKSB7CiAgICAgICAgICAgICAgY29uc3QgaW52b2tlSWQgPSBkYXRhLmlkLnNsaWNlKCJyZXNwb25zZToiLmxlbmd0aCk7CiAgICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IHJwY1Byb21pc2VzLmdldChpbnZva2VJZCk7CiAgICAgICAgICAgICAgaWYgKCFwcm9taXNlKSByZXR1cm47CiAgICAgICAgICAgICAgaWYgKHByb21pc2UudGltZW91dElkKSBjbGVhclRpbWVvdXQocHJvbWlzZS50aW1lb3V0SWQpOwogICAgICAgICAgICAgIHJwY1Byb21pc2VzLmRlbGV0ZShpbnZva2VJZCk7CiAgICAgICAgICAgICAgY29uc3QgeyBlcnJvciwgcmVzdWx0IH0gPSBkYXRhLmRhdGE7CiAgICAgICAgICAgICAgaWYgKGVycm9yKSB7CiAgICAgICAgICAgICAgICBwcm9taXNlLnJlamVjdChlcnJvcik7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHByb21pc2UucmVzb2x2ZShyZXN1bHQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIG9uTWVzc2FnZShwYXlsb2FkKTsKICAgICAgICB9LAogICAgICAgIG9uRGlzY29ubmVjdGlvbgogICAgICB9KTsKICAgIH0sCiAgICBkaXNjb25uZWN0KCkgewogICAgICBycGNQcm9taXNlcy5mb3JFYWNoKChwcm9taXNlKSA9PiB7CiAgICAgICAgcHJvbWlzZS5yZWplY3QoCiAgICAgICAgICBuZXcgRXJyb3IoCiAgICAgICAgICAgIGB0cmFuc3BvcnQgd2FzIGRpc2Nvbm5lY3RlZCwgY2Fubm90IGNhbGwgJHtKU09OLnN0cmluZ2lmeShwcm9taXNlLm5hbWUpfWAKICAgICAgICAgICkKICAgICAgICApOwogICAgICB9KTsKICAgICAgcnBjUHJvbWlzZXMuY2xlYXIoKTsKICAgICAgcmV0dXJuIHRyYW5zcG9ydC5kaXNjb25uZWN0Py4oKTsKICAgIH0sCiAgICBzZW5kKGRhdGEpIHsKICAgICAgcmV0dXJuIHRyYW5zcG9ydC5zZW5kKGRhdGEpOwogICAgfSwKICAgIGFzeW5jIGludm9rZShuYW1lLCBkYXRhKSB7CiAgICAgIGNvbnN0IHByb21pc2VJZCA9IG5hbm9pZCgpOwogICAgICBjb25zdCB3cmFwcGVkRGF0YSA9IHsKICAgICAgICB0eXBlOiAiY3VzdG9tIiwKICAgICAgICBldmVudDogInZpdGU6aW52b2tlIiwKICAgICAgICBkYXRhOiB7CiAgICAgICAgICBuYW1lLAogICAgICAgICAgaWQ6IGBzZW5kOiR7cHJvbWlzZUlkfWAsCiAgICAgICAgICBkYXRhCiAgICAgICAgfQogICAgICB9OwogICAgICBjb25zdCBzZW5kUHJvbWlzZSA9IHRyYW5zcG9ydC5zZW5kKHdyYXBwZWREYXRhKTsKICAgICAgY29uc3QgeyBwcm9taXNlLCByZXNvbHZlLCByZWplY3QgfSA9IHByb21pc2VXaXRoUmVzb2x2ZXJzKCk7CiAgICAgIGNvbnN0IHRpbWVvdXQgPSB0cmFuc3BvcnQudGltZW91dCA/PyA2ZTQ7CiAgICAgIGxldCB0aW1lb3V0SWQ7CiAgICAgIGlmICh0aW1lb3V0ID4gMCkgewogICAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgcnBjUHJvbWlzZXMuZGVsZXRlKHByb21pc2VJZCk7CiAgICAgICAgICByZWplY3QoCiAgICAgICAgICAgIG5ldyBFcnJvcigKICAgICAgICAgICAgICBgdHJhbnNwb3J0IGludm9rZSB0aW1lZCBvdXQgYWZ0ZXIgJHt0aW1lb3V0fW1zIChkYXRhOiAke0pTT04uc3RyaW5naWZ5KHdyYXBwZWREYXRhKX0pYAogICAgICAgICAgICApCiAgICAgICAgICApOwogICAgICAgIH0sIHRpbWVvdXQpOwogICAgICAgIHRpbWVvdXRJZD8udW5yZWY/LigpOwogICAgICB9CiAgICAgIHJwY1Byb21pc2VzLnNldChwcm9taXNlSWQsIHsgcmVzb2x2ZSwgcmVqZWN0LCBuYW1lLCB0aW1lb3V0SWQgfSk7CiAgICAgIGlmIChzZW5kUHJvbWlzZSkgewogICAgICAgIHNlbmRQcm9taXNlLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpOwogICAgICAgICAgcnBjUHJvbWlzZXMuZGVsZXRlKHByb21pc2VJZCk7CiAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICB9KTsKICAgICAgfQogICAgICB0cnkgewogICAgICAgIHJldHVybiBhd2FpdCBwcm9taXNlOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICB0aHJvdyByZXZpdmVJbnZva2VFcnJvcihlcnIpOwogICAgICB9CiAgICB9CiAgfTsKfTsKY29uc3Qgbm9ybWFsaXplTW9kdWxlUnVubmVyVHJhbnNwb3J0ID0gKHRyYW5zcG9ydCkgPT4gewogIGNvbnN0IGludm9rZWFibGVUcmFuc3BvcnQgPSBjcmVhdGVJbnZva2VhYmxlVHJhbnNwb3J0KHRyYW5zcG9ydCk7CiAgbGV0IGlzQ29ubmVjdGVkID0gIWludm9rZWFibGVUcmFuc3BvcnQuY29ubmVjdDsKICBsZXQgY29ubmVjdGluZ1Byb21pc2U7CiAgcmV0dXJuIHsKICAgIC4uLnRyYW5zcG9ydCwKICAgIC4uLmludm9rZWFibGVUcmFuc3BvcnQuY29ubmVjdCA/IHsKICAgICAgYXN5bmMgY29ubmVjdChvbk1lc3NhZ2UpIHsKICAgICAgICBpZiAoaXNDb25uZWN0ZWQpIHJldHVybjsKICAgICAgICBpZiAoY29ubmVjdGluZ1Byb21pc2UpIHsKICAgICAgICAgIGF3YWl0IGNvbm5lY3RpbmdQcm9taXNlOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBjb25zdCBtYXliZVByb21pc2UgPSBpbnZva2VhYmxlVHJhbnNwb3J0LmNvbm5lY3QoewogICAgICAgICAgb25NZXNzYWdlOiBvbk1lc3NhZ2UgPz8gKCgpID0+IHsKICAgICAgICAgIH0pLAogICAgICAgICAgb25EaXNjb25uZWN0aW9uKCkgewogICAgICAgICAgICBpc0Nvbm5lY3RlZCA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGlmIChtYXliZVByb21pc2UpIHsKICAgICAgICAgIGNvbm5lY3RpbmdQcm9taXNlID0gbWF5YmVQcm9taXNlOwogICAgICAgICAgYXdhaXQgY29ubmVjdGluZ1Byb21pc2U7CiAgICAgICAgICBjb25uZWN0aW5nUHJvbWlzZSA9IHZvaWQgMDsKICAgICAgICB9CiAgICAgICAgaXNDb25uZWN0ZWQgPSB0cnVlOwogICAgICB9CiAgICB9IDoge30sCiAgICAuLi5pbnZva2VhYmxlVHJhbnNwb3J0LmRpc2Nvbm5lY3QgPyB7CiAgICAgIGFzeW5jIGRpc2Nvbm5lY3QoKSB7CiAgICAgICAgaWYgKCFpc0Nvbm5lY3RlZCkgcmV0dXJuOwogICAgICAgIGlmIChjb25uZWN0aW5nUHJvbWlzZSkgewogICAgICAgICAgYXdhaXQgY29ubmVjdGluZ1Byb21pc2U7CiAgICAgICAgfQogICAgICAgIGlzQ29ubmVjdGVkID0gZmFsc2U7CiAgICAgICAgYXdhaXQgaW52b2tlYWJsZVRyYW5zcG9ydC5kaXNjb25uZWN0KCk7CiAgICAgIH0KICAgIH0gOiB7fSwKICAgIGFzeW5jIHNlbmQoZGF0YSkgewogICAgICBpZiAoIWludm9rZWFibGVUcmFuc3BvcnQuc2VuZCkgcmV0dXJuOwogICAgICBpZiAoIWlzQ29ubmVjdGVkKSB7CiAgICAgICAgaWYgKGNvbm5lY3RpbmdQcm9taXNlKSB7CiAgICAgICAgICBhd2FpdCBjb25uZWN0aW5nUHJvbWlzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJzZW5kIHdhcyBjYWxsZWQgYmVmb3JlIGNvbm5lY3QiKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgYXdhaXQgaW52b2tlYWJsZVRyYW5zcG9ydC5zZW5kKGRhdGEpOwogICAgfSwKICAgIGFzeW5jIGludm9rZShuYW1lLCBkYXRhKSB7CiAgICAgIGlmICghaXNDb25uZWN0ZWQpIHsKICAgICAgICBpZiAoY29ubmVjdGluZ1Byb21pc2UpIHsKICAgICAgICAgIGF3YWl0IGNvbm5lY3RpbmdQcm9taXNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoImludm9rZSB3YXMgY2FsbGVkIGJlZm9yZSBjb25uZWN0Iik7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBpbnZva2VhYmxlVHJhbnNwb3J0Lmludm9rZShuYW1lLCBkYXRhKTsKICAgIH0KICB9Owp9Owpjb25zdCBjcmVhdGVXZWJTb2NrZXRNb2R1bGVSdW5uZXJUcmFuc3BvcnQgPSAob3B0aW9ucykgPT4gewogIGNvbnN0IHBpbmdJbnRlcnZhbCA9IG9wdGlvbnMucGluZ0ludGVydmFsID8/IDNlNDsKICBsZXQgd3M7CiAgbGV0IHBpbmdJbnRlcnZhbElkOwogIHJldHVybiB7CiAgICBhc3luYyBjb25uZWN0KHsgb25NZXNzYWdlLCBvbkRpc2Nvbm5lY3Rpb24gfSkgewogICAgICBjb25zdCBzb2NrZXQgPSBvcHRpb25zLmNyZWF0ZUNvbm5lY3Rpb24oKTsKICAgICAgc29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCBhc3luYyAoeyBkYXRhIH0pID0+IHsKICAgICAgICBvbk1lc3NhZ2UoSlNPTi5wYXJzZShkYXRhKSk7CiAgICAgIH0pOwogICAgICBsZXQgaXNPcGVuZWQgPSBzb2NrZXQucmVhZHlTdGF0ZSA9PT0gc29ja2V0Lk9QRU47CiAgICAgIGlmICghaXNPcGVuZWQpIHsKICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgICBzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcigKICAgICAgICAgICAgIm9wZW4iLAogICAgICAgICAgICAoKSA9PiB7CiAgICAgICAgICAgICAgaXNPcGVuZWQgPSB0cnVlOwogICAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgeyBvbmNlOiB0cnVlIH0KICAgICAgICAgICk7CiAgICAgICAgICBzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcigiY2xvc2UiLCBhc3luYyAoKSA9PiB7CiAgICAgICAgICAgIGlmICghaXNPcGVuZWQpIHsKICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCJXZWJTb2NrZXQgY2xvc2VkIHdpdGhvdXQgb3BlbmVkLiIpKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb25NZXNzYWdlKHsKICAgICAgICAgICAgICB0eXBlOiAiY3VzdG9tIiwKICAgICAgICAgICAgICBldmVudDogInZpdGU6d3M6ZGlzY29ubmVjdCIsCiAgICAgICAgICAgICAgZGF0YTogeyB3ZWJTb2NrZXQ6IHNvY2tldCB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBvbkRpc2Nvbm5lY3Rpb24oKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIG9uTWVzc2FnZSh7CiAgICAgICAgdHlwZTogImN1c3RvbSIsCiAgICAgICAgZXZlbnQ6ICJ2aXRlOndzOmNvbm5lY3QiLAogICAgICAgIGRhdGE6IHsgd2ViU29ja2V0OiBzb2NrZXQgfQogICAgICB9KTsKICAgICAgd3MgPSBzb2NrZXQ7CiAgICAgIHBpbmdJbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgIGlmIChzb2NrZXQucmVhZHlTdGF0ZSA9PT0gc29ja2V0Lk9QRU4pIHsKICAgICAgICAgIHNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogInBpbmciIH0pKTsKICAgICAgICB9CiAgICAgIH0sIHBpbmdJbnRlcnZhbCk7CiAgICB9LAogICAgZGlzY29ubmVjdCgpIHsKICAgICAgY2xlYXJJbnRlcnZhbChwaW5nSW50ZXJ2YWxJZCk7CiAgICAgIHdzPy5jbG9zZSgpOwogICAgfSwKICAgIHNlbmQoZGF0YSkgewogICAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KGRhdGEpKTsKICAgIH0KICB9Owp9OwoKZnVuY3Rpb24gY3JlYXRlSE1SSGFuZGxlcihoYW5kbGVyKSB7CiAgY29uc3QgcXVldWUgPSBuZXcgUXVldWUoKTsKICByZXR1cm4gKHBheWxvYWQpID0+IHF1ZXVlLmVucXVldWUoKCkgPT4gaGFuZGxlcihwYXlsb2FkKSk7Cn0KY2xhc3MgUXVldWUgewogIGNvbnN0cnVjdG9yKCkgewogICAgdGhpcy5xdWV1ZSA9IFtdOwogICAgdGhpcy5wZW5kaW5nID0gZmFsc2U7CiAgfQogIGVucXVldWUocHJvbWlzZSkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgdGhpcy5xdWV1ZS5wdXNoKHsKICAgICAgICBwcm9taXNlLAogICAgICAgIHJlc29sdmUsCiAgICAgICAgcmVqZWN0CiAgICAgIH0pOwogICAgICB0aGlzLmRlcXVldWUoKTsKICAgIH0pOwogIH0KICBkZXF1ZXVlKCkgewogICAgaWYgKHRoaXMucGVuZGluZykgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBjb25zdCBpdGVtID0gdGhpcy5xdWV1ZS5zaGlmdCgpOwogICAgaWYgKCFpdGVtKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHRoaXMucGVuZGluZyA9IHRydWU7CiAgICBpdGVtLnByb21pc2UoKS50aGVuKGl0ZW0ucmVzb2x2ZSkuY2F0Y2goaXRlbS5yZWplY3QpLmZpbmFsbHkoKCkgPT4gewogICAgICB0aGlzLnBlbmRpbmcgPSBmYWxzZTsKICAgICAgdGhpcy5kZXF1ZXVlKCk7CiAgICB9KTsKICAgIHJldHVybiB0cnVlOwogIH0KfQoKY29uc3QgaG1yQ29uZmlnTmFtZSA9ICJ2aXRlLmNvbmZpZy50cyI7CmNvbnN0IGJhc2UkMSA9ICIvIiB8fCAiLyI7CmZ1bmN0aW9uIGgoZSwgYXR0cnMgPSB7fSwgLi4uY2hpbGRyZW4pIHsKICBjb25zdCBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlKTsKICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhhdHRycykpIHsKICAgIGVsZW0uc2V0QXR0cmlidXRlKGssIHYpOwogIH0KICBlbGVtLmFwcGVuZCguLi5jaGlsZHJlbik7CiAgcmV0dXJuIGVsZW07Cn0KY29uc3QgdGVtcGxhdGVTdHlsZSA9ICgKICAvKmNzcyovCiAgYAo6aG9zdCB7CiAgcG9zaXRpb246IGZpeGVkOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICB6LWluZGV4OiA5OTk5OTsKICAtLW1vbm9zcGFjZTogJ1NGTW9uby1SZWd1bGFyJywgQ29uc29sYXMsCiAgJ0xpYmVyYXRpb24gTW9ubycsIE1lbmxvLCBDb3VyaWVyLCBtb25vc3BhY2U7CiAgLS1yZWQ6ICNmZjU1NTU7CiAgLS15ZWxsb3c6ICNlMmFhNTM7CiAgLS1wdXJwbGU6ICNjZmE0ZmY7CiAgLS1jeWFuOiAjMmRkOWRhOwogIC0tZGltOiAjYzljOWM5OwoKICAtLXdpbmRvdy1iYWNrZ3JvdW5kOiAjMTgxODE4OwogIC0td2luZG93LWNvbG9yOiAjZDhkOGQ4Owp9CgouYmFja2Ryb3AgewogIHBvc2l0aW9uOiBmaXhlZDsKICB6LWluZGV4OiA5OTk5OTsKICB0b3A6IDA7CiAgbGVmdDogMDsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7CiAgb3ZlcmZsb3cteTogc2Nyb2xsOwogIG1hcmdpbjogMDsKICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuNjYpOwp9Cgoud2luZG93IHsKICBmb250LWZhbWlseTogdmFyKC0tbW9ub3NwYWNlKTsKICBsaW5lLWhlaWdodDogMS41OwogIG1heC13aWR0aDogODB2dzsKICBjb2xvcjogdmFyKC0td2luZG93LWNvbG9yKTsKICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIG1hcmdpbjogMzBweCBhdXRvOwogIHBhZGRpbmc6IDIuNXZoIDR2dzsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgYmFja2dyb3VuZDogdmFyKC0td2luZG93LWJhY2tncm91bmQpOwogIGJvcmRlci1yYWRpdXM6IDZweCA2cHggOHB4IDhweDsKICBib3gtc2hhZG93OiAwIDE5cHggMzhweCByZ2JhKDAsMCwwLDAuMzApLCAwIDE1cHggMTJweCByZ2JhKDAsMCwwLDAuMjIpOwogIG92ZXJmbG93OiBoaWRkZW47CiAgYm9yZGVyLXRvcDogOHB4IHNvbGlkIHZhcigtLXJlZCk7CiAgZGlyZWN0aW9uOiBsdHI7CiAgdGV4dC1hbGlnbjogbGVmdDsKfQoKcHJlIHsKICBmb250LWZhbWlseTogdmFyKC0tbW9ub3NwYWNlKTsKICBmb250LXNpemU6IDE2cHg7CiAgbWFyZ2luLXRvcDogMDsKICBtYXJnaW4tYm90dG9tOiAxZW07CiAgb3ZlcmZsb3cteDogc2Nyb2xsOwogIHNjcm9sbGJhci13aWR0aDogbm9uZTsKfQoKcHJlOjotd2Via2l0LXNjcm9sbGJhciB7CiAgZGlzcGxheTogbm9uZTsKfQoKcHJlLmZyYW1lOjotd2Via2l0LXNjcm9sbGJhciB7CiAgZGlzcGxheTogYmxvY2s7CiAgaGVpZ2h0OiA1cHg7Cn0KCnByZS5mcmFtZTo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIgewogIGJhY2tncm91bmQ6ICM5OTk7CiAgYm9yZGVyLXJhZGl1czogNXB4Owp9CgpwcmUuZnJhbWUgewogIHNjcm9sbGJhci13aWR0aDogdGhpbjsKfQoKLm1lc3NhZ2UgewogIGxpbmUtaGVpZ2h0OiAxLjM7CiAgZm9udC13ZWlnaHQ6IDYwMDsKICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7Cn0KCi5tZXNzYWdlLWJvZHkgewogIGNvbG9yOiB2YXIoLS1yZWQpOwp9CgoucGx1Z2luIHsKICBjb2xvcjogdmFyKC0tcHVycGxlKTsKfQoKLmZpbGUgewogIGNvbG9yOiB2YXIoLS1jeWFuKTsKICBtYXJnaW4tYm90dG9tOiAwOwogIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsKICB3b3JkLWJyZWFrOiBicmVhay1hbGw7Cn0KCi5mcmFtZSB7CiAgY29sb3I6IHZhcigtLXllbGxvdyk7Cn0KCi5zdGFjayB7CiAgZm9udC1zaXplOiAxM3B4OwogIGNvbG9yOiB2YXIoLS1kaW0pOwp9CgoudGlwIHsKICBmb250LXNpemU6IDEzcHg7CiAgY29sb3I6ICM5OTk7CiAgYm9yZGVyLXRvcDogMXB4IGRvdHRlZCAjOTk5OwogIHBhZGRpbmctdG9wOiAxM3B4OwogIGxpbmUtaGVpZ2h0OiAxLjg7Cn0KCmNvZGUgewogIGZvbnQtc2l6ZTogMTNweDsKICBmb250LWZhbWlseTogdmFyKC0tbW9ub3NwYWNlKTsKICBjb2xvcjogdmFyKC0teWVsbG93KTsKfQoKLmZpbGUtbGluayB7CiAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7CiAgY3Vyc29yOiBwb2ludGVyOwp9CgprYmQgewogIGxpbmUtaGVpZ2h0OiAxLjU7CiAgZm9udC1mYW1pbHk6IHVpLW1vbm9zcGFjZSwgTWVubG8sIE1vbmFjbywgQ29uc29sYXMsICJMaWJlcmF0aW9uIE1vbm8iLCAiQ291cmllciBOZXciLCBtb25vc3BhY2U7CiAgZm9udC1zaXplOiAwLjc1cmVtOwogIGZvbnQtd2VpZ2h0OiA3MDA7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDM4LCA0MCwgNDQpOwogIGNvbG9yOiByZ2IoMTY2LCAxNjcsIDE3MSk7CiAgcGFkZGluZzogMC4xNXJlbSAwLjNyZW07CiAgYm9yZGVyLXJhZGl1czogMC4yNXJlbTsKICBib3JkZXItd2lkdGg6IDAuMDYyNXJlbSAwLjA2MjVyZW0gMC4xODc1cmVtOwogIGJvcmRlci1zdHlsZTogc29saWQ7CiAgYm9yZGVyLWNvbG9yOiByZ2IoNTQsIDU3LCA2NCk7CiAgYm9yZGVyLWltYWdlOiBpbml0aWFsOwp9CmAKKTsKY29uc3QgY3JlYXRlVGVtcGxhdGUgPSAoKSA9PiBoKAogICJkaXYiLAogIHsgY2xhc3M6ICJiYWNrZHJvcCIsIHBhcnQ6ICJiYWNrZHJvcCIgfSwKICBoKAogICAgImRpdiIsCiAgICB7IGNsYXNzOiAid2luZG93IiwgcGFydDogIndpbmRvdyIgfSwKICAgIGgoCiAgICAgICJwcmUiLAogICAgICB7IGNsYXNzOiAibWVzc2FnZSIsIHBhcnQ6ICJtZXNzYWdlIiB9LAogICAgICBoKCJzcGFuIiwgeyBjbGFzczogInBsdWdpbiIsIHBhcnQ6ICJwbHVnaW4iIH0pLAogICAgICBoKCJzcGFuIiwgeyBjbGFzczogIm1lc3NhZ2UtYm9keSIsIHBhcnQ6ICJtZXNzYWdlLWJvZHkiIH0pCiAgICApLAogICAgaCgicHJlIiwgeyBjbGFzczogImZpbGUiLCBwYXJ0OiAiZmlsZSIgfSksCiAgICBoKCJwcmUiLCB7IGNsYXNzOiAiZnJhbWUiLCBwYXJ0OiAiZnJhbWUiIH0pLAogICAgaCgicHJlIiwgeyBjbGFzczogInN0YWNrIiwgcGFydDogInN0YWNrIiB9KSwKICAgIGgoCiAgICAgICJkaXYiLAogICAgICB7IGNsYXNzOiAidGlwIiwgcGFydDogInRpcCIgfSwKICAgICAgIkNsaWNrIG91dHNpZGUsIHByZXNzICIsCiAgICAgIGgoImtiZCIsIHt9LCAiRXNjIiksCiAgICAgICIga2V5LCBvciBmaXggdGhlIGNvZGUgdG8gZGlzbWlzcy4iLAogICAgICBoKCJiciIpLAogICAgICAiWW91IGNhbiBhbHNvIGRpc2FibGUgdGhpcyBvdmVybGF5IGJ5IHNldHRpbmcgIiwKICAgICAgaCgiY29kZSIsIHsgcGFydDogImNvbmZpZy1vcHRpb24tbmFtZSIgfSwgInNlcnZlci5obXIub3ZlcmxheSIpLAogICAgICAiIHRvICIsCiAgICAgIGgoImNvZGUiLCB7IHBhcnQ6ICJjb25maWctb3B0aW9uLXZhbHVlIiB9LCAiZmFsc2UiKSwKICAgICAgIiBpbiAiLAogICAgICBoKCJjb2RlIiwgeyBwYXJ0OiAiY29uZmlnLWZpbGUtbmFtZSIgfSwgaG1yQ29uZmlnTmFtZSksCiAgICAgICIuIgogICAgKQogICksCiAgaCgic3R5bGUiLCB7fSwgdGVtcGxhdGVTdHlsZSkKKTsKY29uc3QgZmlsZVJFID0gLyg/OlthLXpBLVpdOlxcfFwvKS4qPzpcZCs6XGQrL2c7CmNvbnN0IGNvZGVmcmFtZVJFID0gL14oPzo+P1xzKlxkK1xzK1x8Lip8XHMrXHxccypcXi4qKVxyP1xuL2dtOwpjb25zdCB7IEhUTUxFbGVtZW50ID0gY2xhc3Mgewp9IH0gPSBnbG9iYWxUaGlzOwpjbGFzcyBFcnJvck92ZXJsYXkgZXh0ZW5kcyBIVE1MRWxlbWVudCB7CiAgY29uc3RydWN0b3IoZXJyLCBsaW5rcyA9IHRydWUpIHsKICAgIHN1cGVyKCk7CiAgICB0aGlzLnJvb3QgPSB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICJvcGVuIiB9KTsKICAgIHRoaXMucm9vdC5hcHBlbmRDaGlsZChjcmVhdGVUZW1wbGF0ZSgpKTsKICAgIGNvZGVmcmFtZVJFLmxhc3RJbmRleCA9IDA7CiAgICBjb25zdCBoYXNGcmFtZSA9IGVyci5mcmFtZSAmJiBjb2RlZnJhbWVSRS50ZXN0KGVyci5mcmFtZSk7CiAgICBjb25zdCBtZXNzYWdlID0gaGFzRnJhbWUgPyBlcnIubWVzc2FnZS5yZXBsYWNlKGNvZGVmcmFtZVJFLCAiIikgOiBlcnIubWVzc2FnZTsKICAgIGlmIChlcnIucGx1Z2luKSB7CiAgICAgIHRoaXMudGV4dCgiLnBsdWdpbiIsIGBbcGx1Z2luOiR7ZXJyLnBsdWdpbn1dIGApOwogICAgfQogICAgdGhpcy50ZXh0KCIubWVzc2FnZS1ib2R5IiwgbWVzc2FnZS50cmltKCkpOwogICAgY29uc3QgW2ZpbGVdID0gKGVyci5sb2M/LmZpbGUgfHwgZXJyLmlkIHx8ICJ1bmtub3duIGZpbGUiKS5zcGxpdChgP2ApOwogICAgaWYgKGVyci5sb2MpIHsKICAgICAgdGhpcy50ZXh0KCIuZmlsZSIsIGAke2ZpbGV9OiR7ZXJyLmxvYy5saW5lfToke2Vyci5sb2MuY29sdW1ufWAsIGxpbmtzKTsKICAgIH0gZWxzZSBpZiAoZXJyLmlkKSB7CiAgICAgIHRoaXMudGV4dCgiLmZpbGUiLCBmaWxlKTsKICAgIH0KICAgIGlmIChoYXNGcmFtZSkgewogICAgICB0aGlzLnRleHQoIi5mcmFtZSIsIGVyci5mcmFtZS50cmltKCkpOwogICAgfQogICAgdGhpcy50ZXh0KCIuc3RhY2siLCBlcnIuc3RhY2ssIGxpbmtzKTsKICAgIHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKCIud2luZG93IikuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoZSkgPT4gewogICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgfSk7CiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gewogICAgICB0aGlzLmNsb3NlKCk7CiAgICB9KTsKICAgIHRoaXMuY2xvc2VPbkVzYyA9IChlKSA9PiB7CiAgICAgIGlmIChlLmtleSA9PT0gIkVzY2FwZSIgfHwgZS5jb2RlID09PSAiRXNjYXBlIikgewogICAgICAgIHRoaXMuY2xvc2UoKTsKICAgICAgfQogICAgfTsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLCB0aGlzLmNsb3NlT25Fc2MpOwogIH0KICB0ZXh0KHNlbGVjdG9yLCB0ZXh0LCBsaW5rRmlsZXMgPSBmYWxzZSkgewogICAgY29uc3QgZWwgPSB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7CiAgICBpZiAoIWxpbmtGaWxlcykgewogICAgICBlbC50ZXh0Q29udGVudCA9IHRleHQ7CiAgICB9IGVsc2UgewogICAgICBsZXQgY3VySW5kZXggPSAwOwogICAgICBsZXQgbWF0Y2g7CiAgICAgIGZpbGVSRS5sYXN0SW5kZXggPSAwOwogICAgICB3aGlsZSAobWF0Y2ggPSBmaWxlUkUuZXhlYyh0ZXh0KSkgewogICAgICAgIGNvbnN0IHsgMDogZmlsZSwgaW5kZXggfSA9IG1hdGNoOwogICAgICAgIGNvbnN0IGZyYWcgPSB0ZXh0LnNsaWNlKGN1ckluZGV4LCBpbmRleCk7CiAgICAgICAgZWwuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZnJhZykpOwogICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgbGluay50ZXh0Q29udGVudCA9IGZpbGU7CiAgICAgICAgbGluay5jbGFzc05hbWUgPSAiZmlsZS1saW5rIjsKICAgICAgICBsaW5rLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgICAgICBmZXRjaCgKICAgICAgICAgICAgbmV3IFVSTCgKICAgICAgICAgICAgICBgJHtiYXNlJDF9X19vcGVuLWluLWVkaXRvcj9maWxlPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGZpbGUpfWAsCiAgICAgICAgICAgICAgaW1wb3J0Lm1ldGEudXJsCiAgICAgICAgICAgICkKICAgICAgICAgICk7CiAgICAgICAgfTsKICAgICAgICBlbC5hcHBlbmRDaGlsZChsaW5rKTsKICAgICAgICBjdXJJbmRleCArPSBmcmFnLmxlbmd0aCArIGZpbGUubGVuZ3RoOwogICAgICB9CiAgICB9CiAgfQogIGNsb3NlKCkgewogICAgdGhpcy5wYXJlbnROb2RlPy5yZW1vdmVDaGlsZCh0aGlzKTsKICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoImtleWRvd24iLCB0aGlzLmNsb3NlT25Fc2MpOwogIH0KfQpjb25zdCBvdmVybGF5SWQgPSAidml0ZS1lcnJvci1vdmVybGF5IjsKY29uc3QgeyBjdXN0b21FbGVtZW50cyB9ID0gZ2xvYmFsVGhpczsKaWYgKGN1c3RvbUVsZW1lbnRzICYmICFjdXN0b21FbGVtZW50cy5nZXQob3ZlcmxheUlkKSkgewogIGN1c3RvbUVsZW1lbnRzLmRlZmluZShvdmVybGF5SWQsIEVycm9yT3ZlcmxheSk7Cn0KCmNvbnNvbGUuZGVidWcoIlt2aXRlXSBjb25uZWN0aW5nLi4uIik7CmNvbnN0IGltcG9ydE1ldGFVcmwgPSBuZXcgVVJMKGltcG9ydC5tZXRhLnVybCk7CmNvbnN0IHNlcnZlckhvc3QgPSAibG9jYWxob3N0OjMwMDAvIjsKY29uc3Qgc29ja2V0UHJvdG9jb2wgPSBudWxsIHx8IChpbXBvcnRNZXRhVXJsLnByb3RvY29sID09PSAiaHR0cHM6IiA/ICJ3c3MiIDogIndzIik7CmNvbnN0IGhtclBvcnQgPSBudWxsOwpjb25zdCBzb2NrZXRIb3N0ID0gYCR7bnVsbCB8fCBpbXBvcnRNZXRhVXJsLmhvc3RuYW1lfToke2htclBvcnQgfHwgaW1wb3J0TWV0YVVybC5wb3J0fSR7Ii8ifWA7CmNvbnN0IGRpcmVjdFNvY2tldEhvc3QgPSAibG9jYWxob3N0OjMwMDAvIjsKY29uc3QgYmFzZSA9ICIvIiB8fCAiLyI7CmNvbnN0IGhtclRpbWVvdXQgPSAzMDAwMDsKY29uc3Qgd3NUb2tlbiA9ICJscm9ma2Y0NDlzdG8iOwpjb25zdCB0cmFuc3BvcnQgPSBub3JtYWxpemVNb2R1bGVSdW5uZXJUcmFuc3BvcnQoCiAgKCgpID0+IHsKICAgIGxldCB3c1RyYW5zcG9ydCA9IGNyZWF0ZVdlYlNvY2tldE1vZHVsZVJ1bm5lclRyYW5zcG9ydCh7CiAgICAgIGNyZWF0ZUNvbm5lY3Rpb246ICgpID0+IG5ldyBXZWJTb2NrZXQoCiAgICAgICAgYCR7c29ja2V0UHJvdG9jb2x9Oi8vJHtzb2NrZXRIb3N0fT90b2tlbj0ke3dzVG9rZW59YCwKICAgICAgICAidml0ZS1obXIiCiAgICAgICksCiAgICAgIHBpbmdJbnRlcnZhbDogaG1yVGltZW91dAogICAgfSk7CiAgICByZXR1cm4gewogICAgICBhc3luYyBjb25uZWN0KGhhbmRsZXJzKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGF3YWl0IHdzVHJhbnNwb3J0LmNvbm5lY3QoaGFuZGxlcnMpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGlmICghaG1yUG9ydCkgewogICAgICAgICAgICB3c1RyYW5zcG9ydCA9IGNyZWF0ZVdlYlNvY2tldE1vZHVsZVJ1bm5lclRyYW5zcG9ydCh7CiAgICAgICAgICAgICAgY3JlYXRlQ29ubmVjdGlvbjogKCkgPT4gbmV3IFdlYlNvY2tldCgKICAgICAgICAgICAgICAgIGAke3NvY2tldFByb3RvY29sfTovLyR7ZGlyZWN0U29ja2V0SG9zdH0/dG9rZW49JHt3c1Rva2VufWAsCiAgICAgICAgICAgICAgICAidml0ZS1obXIiCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBwaW5nSW50ZXJ2YWw6IGhtclRpbWVvdXQKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgYXdhaXQgd3NUcmFuc3BvcnQuY29ubmVjdChoYW5kbGVycyk7CiAgICAgICAgICAgICAgY29uc29sZS5pbmZvKAogICAgICAgICAgICAgICAgIlt2aXRlXSBEaXJlY3Qgd2Vic29ja2V0IGNvbm5lY3Rpb24gZmFsbGJhY2suIENoZWNrIG91dCBodHRwczovL3ZpdGUuZGV2L2NvbmZpZy9zZXJ2ZXItb3B0aW9ucy5odG1sI3NlcnZlci1obXIgdG8gcmVtb3ZlIHRoZSBwcmV2aW91cyBjb25uZWN0aW9uIGVycm9yLiIKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9IGNhdGNoIChlMikgewogICAgICAgICAgICAgIGlmIChlMiBpbnN0YW5jZW9mIEVycm9yICYmIGUyLm1lc3NhZ2UuaW5jbHVkZXMoIldlYlNvY2tldCBjbG9zZWQgd2l0aG91dCBvcGVuZWQuIikpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTY3JpcHRIb3N0VVJMID0gbmV3IFVSTChpbXBvcnQubWV0YS51cmwpOwogICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFNjcmlwdEhvc3QgPSBjdXJyZW50U2NyaXB0SG9zdFVSTC5ob3N0ICsgY3VycmVudFNjcmlwdEhvc3RVUkwucGF0aG5hbWUucmVwbGFjZSgvQHZpdGVcL2NsaWVudCQvLCAiIik7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICAgICBgW3ZpdGVdIGZhaWxlZCB0byBjb25uZWN0IHRvIHdlYnNvY2tldC4KeW91ciBjdXJyZW50IHNldHVwOgogIChicm93c2VyKSAke2N1cnJlbnRTY3JpcHRIb3N0fSA8LS1bSFRUUF0tLT4gJHtzZXJ2ZXJIb3N0fSAoc2VydmVyKQogIChicm93c2VyKSAke3NvY2tldEhvc3R9IDwtLVtXZWJTb2NrZXQgKGZhaWxpbmcpXS0tPiAke2RpcmVjdFNvY2tldEhvc3R9IChzZXJ2ZXIpCkNoZWNrIG91dCB5b3VyIFZpdGUgLyBuZXR3b3JrIGNvbmZpZ3VyYXRpb24gYW5kIGh0dHBzOi8vdml0ZS5kZXYvY29uZmlnL3NlcnZlci1vcHRpb25zLmh0bWwjc2VydmVyLWhtciAuYAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgY29uc29sZS5lcnJvcihgW3ZpdGVdIGZhaWxlZCB0byBjb25uZWN0IHRvIHdlYnNvY2tldCAoJHtlfSkuIGApOwogICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGFzeW5jIGRpc2Nvbm5lY3QoKSB7CiAgICAgICAgYXdhaXQgd3NUcmFuc3BvcnQuZGlzY29ubmVjdCgpOwogICAgICB9LAogICAgICBzZW5kKGRhdGEpIHsKICAgICAgICB3c1RyYW5zcG9ydC5zZW5kKGRhdGEpOwogICAgICB9CiAgICB9OwogIH0pKCkKKTsKbGV0IHdpbGxVbmxvYWQgPSBmYWxzZTsKaWYgKHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiKSB7CiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImJlZm9yZXVubG9hZCIsICgpID0+IHsKICAgIHdpbGxVbmxvYWQgPSB0cnVlOwogIH0pOwp9CmZ1bmN0aW9uIGNsZWFuVXJsKHBhdGhuYW1lKSB7CiAgY29uc3QgdXJsID0gbmV3IFVSTChwYXRobmFtZSwgImh0dHA6Ly92aXRlLmRldiIpOwogIHVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKCJkaXJlY3QiKTsKICByZXR1cm4gdXJsLnBhdGhuYW1lICsgdXJsLnNlYXJjaDsKfQpsZXQgaXNGaXJzdFVwZGF0ZSA9IHRydWU7CmNvbnN0IG91dGRhdGVkTGlua1RhZ3MgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtTZXQoKTsKY29uc3QgZGVib3VuY2VSZWxvYWQgPSAodGltZSkgPT4gewogIGxldCB0aW1lcjsKICByZXR1cm4gKCkgPT4gewogICAgaWYgKHRpbWVyKSB7CiAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7CiAgICAgIHRpbWVyID0gbnVsbDsKICAgIH0KICAgIHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgfSwgdGltZSk7CiAgfTsKfTsKY29uc3QgcGFnZVJlbG9hZCA9IGRlYm91bmNlUmVsb2FkKDUwKTsKY29uc3QgaG1yQ2xpZW50ID0gbmV3IEhNUkNsaWVudCgKICB7CiAgICBlcnJvcjogKGVycikgPT4gY29uc29sZS5lcnJvcigiW3ZpdGVdIiwgZXJyKSwKICAgIGRlYnVnOiAoLi4ubXNnKSA9PiBjb25zb2xlLmRlYnVnKCJbdml0ZV0iLCAuLi5tc2cpCiAgfSwKICB0cmFuc3BvcnQsCiAgYXN5bmMgZnVuY3Rpb24gaW1wb3J0VXBkYXRlZE1vZHVsZSh7CiAgICBhY2NlcHRlZFBhdGgsCiAgICB0aW1lc3RhbXAsCiAgICBleHBsaWNpdEltcG9ydFJlcXVpcmVkLAogICAgaXNXaXRoaW5DaXJjdWxhckltcG9ydAogIH0pIHsKICAgIGNvbnN0IFthY2NlcHRlZFBhdGhXaXRob3V0UXVlcnksIHF1ZXJ5XSA9IGFjY2VwdGVkUGF0aC5zcGxpdChgP2ApOwogICAgY29uc3QgaW1wb3J0UHJvbWlzZSA9IGltcG9ydCgKICAgICAgLyogQHZpdGUtaWdub3JlICovCiAgICAgIGJhc2UgKyBhY2NlcHRlZFBhdGhXaXRob3V0UXVlcnkuc2xpY2UoMSkgKyBgPyR7ZXhwbGljaXRJbXBvcnRSZXF1aXJlZCA/ICJpbXBvcnQmIiA6ICIifXQ9JHt0aW1lc3RhbXB9JHtxdWVyeSA/IGAmJHtxdWVyeX1gIDogIiJ9YAogICAgKTsKICAgIGlmIChpc1dpdGhpbkNpcmN1bGFySW1wb3J0KSB7CiAgICAgIGltcG9ydFByb21pc2UuY2F0Y2goKCkgPT4gewogICAgICAgIGNvbnNvbGUuaW5mbygKICAgICAgICAgIGBbaG1yXSAke2FjY2VwdGVkUGF0aH0gZmFpbGVkIHRvIGFwcGx5IEhNUiBhcyBpdCdzIHdpdGhpbiBhIGNpcmN1bGFyIGltcG9ydC4gUmVsb2FkaW5nIHBhZ2UgdG8gcmVzZXQgdGhlIGV4ZWN1dGlvbiBvcmRlci4gVG8gZGVidWcgYW5kIGJyZWFrIHRoZSBjaXJjdWxhciBpbXBvcnQsIHlvdSBjYW4gcnVuIFxgdml0ZSAtLWRlYnVnIGhtclxgIHRvIGxvZyB0aGUgY2lyY3VsYXIgZGVwZW5kZW5jeSBwYXRoIGlmIGEgZmlsZSBjaGFuZ2UgdHJpZ2dlcmVkIGl0LmAKICAgICAgICApOwogICAgICAgIHBhZ2VSZWxvYWQoKTsKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gYXdhaXQgaW1wb3J0UHJvbWlzZTsKICB9Cik7CnRyYW5zcG9ydC5jb25uZWN0KGNyZWF0ZUhNUkhhbmRsZXIoaGFuZGxlTWVzc2FnZSkpOwphc3luYyBmdW5jdGlvbiBoYW5kbGVNZXNzYWdlKHBheWxvYWQpIHsKICBzd2l0Y2ggKHBheWxvYWQudHlwZSkgewogICAgY2FzZSAiY29ubmVjdGVkIjoKICAgICAgY29uc29sZS5kZWJ1ZyhgW3ZpdGVdIGNvbm5lY3RlZC5gKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICJ1cGRhdGUiOgogICAgICBhd2FpdCBobXJDbGllbnQubm90aWZ5TGlzdGVuZXJzKCJ2aXRlOmJlZm9yZVVwZGF0ZSIsIHBheWxvYWQpOwogICAgICBpZiAoaGFzRG9jdW1lbnQpIHsKICAgICAgICBpZiAoaXNGaXJzdFVwZGF0ZSAmJiBoYXNFcnJvck92ZXJsYXkoKSkgewogICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChlbmFibGVPdmVybGF5KSB7CiAgICAgICAgICAgIGNsZWFyRXJyb3JPdmVybGF5KCk7CiAgICAgICAgICB9CiAgICAgICAgICBpc0ZpcnN0VXBkYXRlID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICAgIGF3YWl0IFByb21pc2UuYWxsKAogICAgICAgIHBheWxvYWQudXBkYXRlcy5tYXAoYXN5bmMgKHVwZGF0ZSkgPT4gewogICAgICAgICAgaWYgKHVwZGF0ZS50eXBlID09PSAianMtdXBkYXRlIikgewogICAgICAgICAgICByZXR1cm4gaG1yQ2xpZW50LnF1ZXVlVXBkYXRlKHVwZGF0ZSk7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCB7IHBhdGgsIHRpbWVzdGFtcCB9ID0gdXBkYXRlOwogICAgICAgICAgY29uc3Qgc2VhcmNoVXJsID0gY2xlYW5VcmwocGF0aCk7CiAgICAgICAgICBjb25zdCBlbCA9IEFycmF5LmZyb20oCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImxpbmsiKQogICAgICAgICAgKS5maW5kKAogICAgICAgICAgICAoZSkgPT4gIW91dGRhdGVkTGlua1RhZ3MuaGFzKGUpICYmIGNsZWFuVXJsKGUuaHJlZikuaW5jbHVkZXMoc2VhcmNoVXJsKQogICAgICAgICAgKTsKICAgICAgICAgIGlmICghZWwpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgbmV3UGF0aCA9IGAke2Jhc2V9JHtzZWFyY2hVcmwuc2xpY2UoMSl9JHtzZWFyY2hVcmwuaW5jbHVkZXMoIj8iKSA/ICImIiA6ICI/In10PSR7dGltZXN0YW1wfWA7CiAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgICAgICAgY29uc3QgbmV3TGlua1RhZyA9IGVsLmNsb25lTm9kZSgpOwogICAgICAgICAgICBuZXdMaW5rVGFnLmhyZWYgPSBuZXcgVVJMKG5ld1BhdGgsIGVsLmhyZWYpLmhyZWY7CiAgICAgICAgICAgIGNvbnN0IHJlbW92ZU9sZEVsID0gKCkgPT4gewogICAgICAgICAgICAgIGVsLnJlbW92ZSgpOwogICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoYFt2aXRlXSBjc3MgaG90IHVwZGF0ZWQ6ICR7c2VhcmNoVXJsfWApOwogICAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgbmV3TGlua1RhZy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwgcmVtb3ZlT2xkRWwpOwogICAgICAgICAgICBuZXdMaW5rVGFnLmFkZEV2ZW50TGlzdGVuZXIoImVycm9yIiwgcmVtb3ZlT2xkRWwpOwogICAgICAgICAgICBvdXRkYXRlZExpbmtUYWdzLmFkZChlbCk7CiAgICAgICAgICAgIGVsLmFmdGVyKG5ld0xpbmtUYWcpOwogICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgKTsKICAgICAgYXdhaXQgaG1yQ2xpZW50Lm5vdGlmeUxpc3RlbmVycygidml0ZTphZnRlclVwZGF0ZSIsIHBheWxvYWQpOwogICAgICBicmVhazsKICAgIGNhc2UgImN1c3RvbSI6IHsKICAgICAgYXdhaXQgaG1yQ2xpZW50Lm5vdGlmeUxpc3RlbmVycyhwYXlsb2FkLmV2ZW50LCBwYXlsb2FkLmRhdGEpOwogICAgICBpZiAocGF5bG9hZC5ldmVudCA9PT0gInZpdGU6d3M6ZGlzY29ubmVjdCIpIHsKICAgICAgICBpZiAoaGFzRG9jdW1lbnQgJiYgIXdpbGxVbmxvYWQpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBbdml0ZV0gc2VydmVyIGNvbm5lY3Rpb24gbG9zdC4gUG9sbGluZyBmb3IgcmVzdGFydC4uLmApOwogICAgICAgICAgY29uc3Qgc29ja2V0ID0gcGF5bG9hZC5kYXRhLndlYlNvY2tldDsKICAgICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoc29ja2V0LnVybCk7CiAgICAgICAgICB1cmwuc2VhcmNoID0gIiI7CiAgICAgICAgICBhd2FpdCB3YWl0Rm9yU3VjY2Vzc2Z1bFBpbmcodXJsLmhyZWYpOwogICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAiZnVsbC1yZWxvYWQiOgogICAgICBhd2FpdCBobXJDbGllbnQubm90aWZ5TGlzdGVuZXJzKCJ2aXRlOmJlZm9yZUZ1bGxSZWxvYWQiLCBwYXlsb2FkKTsKICAgICAgaWYgKGhhc0RvY3VtZW50KSB7CiAgICAgICAgaWYgKHBheWxvYWQucGF0aCAmJiBwYXlsb2FkLnBhdGguZW5kc1dpdGgoIi5odG1sIikpIHsKICAgICAgICAgIGNvbnN0IHBhZ2VQYXRoID0gZGVjb2RlVVJJKGxvY2F0aW9uLnBhdGhuYW1lKTsKICAgICAgICAgIGNvbnN0IHBheWxvYWRQYXRoID0gYmFzZSArIHBheWxvYWQucGF0aC5zbGljZSgxKTsKICAgICAgICAgIGlmIChwYWdlUGF0aCA9PT0gcGF5bG9hZFBhdGggfHwgcGF5bG9hZC5wYXRoID09PSAiL2luZGV4Lmh0bWwiIHx8IHBhZ2VQYXRoLmVuZHNXaXRoKCIvIikgJiYgcGFnZVBhdGggKyAiaW5kZXguaHRtbCIgPT09IHBheWxvYWRQYXRoKSB7CiAgICAgICAgICAgIHBhZ2VSZWxvYWQoKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcGFnZVJlbG9hZCgpOwogICAgICAgIH0KICAgICAgfQogICAgICBicmVhazsKICAgIGNhc2UgInBydW5lIjoKICAgICAgYXdhaXQgaG1yQ2xpZW50Lm5vdGlmeUxpc3RlbmVycygidml0ZTpiZWZvcmVQcnVuZSIsIHBheWxvYWQpOwogICAgICBhd2FpdCBobXJDbGllbnQucHJ1bmVQYXRocyhwYXlsb2FkLnBhdGhzKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICJlcnJvciI6IHsKICAgICAgYXdhaXQgaG1yQ2xpZW50Lm5vdGlmeUxpc3RlbmVycygidml0ZTplcnJvciIsIHBheWxvYWQpOwogICAgICBpZiAoaGFzRG9jdW1lbnQpIHsKICAgICAgICBjb25zdCBlcnIgPSBwYXlsb2FkLmVycjsKICAgICAgICBpZiAoZW5hYmxlT3ZlcmxheSkgewogICAgICAgICAgY3JlYXRlRXJyb3JPdmVybGF5KGVycik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgIGBbdml0ZV0gSW50ZXJuYWwgU2VydmVyIEVycm9yCiR7ZXJyLm1lc3NhZ2V9CiR7ZXJyLnN0YWNrfWAKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGJyZWFrOwogICAgfQogICAgY2FzZSAicGluZyI6CiAgICAgIGJyZWFrOwogICAgZGVmYXVsdDogewogICAgICBjb25zdCBjaGVjayA9IHBheWxvYWQ7CiAgICAgIHJldHVybiBjaGVjazsKICAgIH0KICB9Cn0KY29uc3QgZW5hYmxlT3ZlcmxheSA9IHRydWU7CmNvbnN0IGhhc0RvY3VtZW50ID0gImRvY3VtZW50IiBpbiBnbG9iYWxUaGlzOwpmdW5jdGlvbiBjcmVhdGVFcnJvck92ZXJsYXkoZXJyKSB7CiAgY2xlYXJFcnJvck92ZXJsYXkoKTsKICBjb25zdCB7IGN1c3RvbUVsZW1lbnRzIH0gPSBnbG9iYWxUaGlzOwogIGlmIChjdXN0b21FbGVtZW50cykgewogICAgY29uc3QgRXJyb3JPdmVybGF5Q29uc3RydWN0b3IgPSBjdXN0b21FbGVtZW50cy5nZXQob3ZlcmxheUlkKTsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobmV3IEVycm9yT3ZlcmxheUNvbnN0cnVjdG9yKGVycikpOwogIH0KfQpmdW5jdGlvbiBjbGVhckVycm9yT3ZlcmxheSgpIHsKICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKG92ZXJsYXlJZCkuZm9yRWFjaCgobikgPT4gbi5jbG9zZSgpKTsKfQpmdW5jdGlvbiBoYXNFcnJvck92ZXJsYXkoKSB7CiAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwob3ZlcmxheUlkKS5sZW5ndGg7Cn0KYXN5bmMgZnVuY3Rpb24gd2FpdEZvclN1Y2Nlc3NmdWxQaW5nKHNvY2tldFVybCwgbXMgPSAxZTMpIHsKICBhc3luYyBmdW5jdGlvbiBwaW5nKCkgewogICAgY29uc3Qgc29ja2V0ID0gbmV3IFdlYlNvY2tldChzb2NrZXRVcmwsICJ2aXRlLXBpbmciKTsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICBmdW5jdGlvbiBvbk9wZW4oKSB7CiAgICAgICAgcmVzb2x2ZSh0cnVlKTsKICAgICAgICBjbG9zZSgpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoKSB7CiAgICAgICAgcmVzb2x2ZShmYWxzZSk7CiAgICAgICAgY2xvc2UoKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgICBzb2NrZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcigib3BlbiIsIG9uT3Blbik7CiAgICAgICAgc29ja2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoImVycm9yIiwgb25FcnJvcik7CiAgICAgICAgc29ja2V0LmNsb3NlKCk7CiAgICAgIH0KICAgICAgc29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoIm9wZW4iLCBvbk9wZW4pOwogICAgICBzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLCBvbkVycm9yKTsKICAgIH0pOwogIH0KICBpZiAoYXdhaXQgcGluZygpKSB7CiAgICByZXR1cm47CiAgfQogIGF3YWl0IHdhaXQobXMpOwogIHdoaWxlICh0cnVlKSB7CiAgICBpZiAoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSAidmlzaWJsZSIpIHsKICAgICAgaWYgKGF3YWl0IHBpbmcoKSkgewogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGF3YWl0IHdhaXQobXMpOwogICAgfSBlbHNlIHsKICAgICAgYXdhaXQgd2FpdEZvcldpbmRvd1Nob3coKTsKICAgIH0KICB9Cn0KZnVuY3Rpb24gd2FpdChtcykgewogIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpOwp9CmZ1bmN0aW9uIHdhaXRGb3JXaW5kb3dTaG93KCkgewogIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgY29uc3Qgb25DaGFuZ2UgPSBhc3luYyAoKSA9PiB7CiAgICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09ICJ2aXNpYmxlIikgewogICAgICAgIHJlc29sdmUoKTsKICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJ2aXNpYmlsaXR5Y2hhbmdlIiwgb25DaGFuZ2UpOwogICAgICB9CiAgICB9OwogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigidmlzaWJpbGl0eWNoYW5nZSIsIG9uQ2hhbmdlKTsKICB9KTsKfQpjb25zdCBzaGVldHNNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpOwppZiAoImRvY3VtZW50IiBpbiBnbG9iYWxUaGlzKSB7CiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgic3R5bGVbZGF0YS12aXRlLWRldi1pZF0iKS5mb3JFYWNoKChlbCkgPT4gewogICAgc2hlZXRzTWFwLnNldChlbC5nZXRBdHRyaWJ1dGUoImRhdGEtdml0ZS1kZXYtaWQiKSwgZWwpOwogIH0pOwp9CmNvbnN0IGNzcE5vbmNlID0gImRvY3VtZW50IiBpbiBnbG9iYWxUaGlzID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigibWV0YVtwcm9wZXJ0eT1jc3Atbm9uY2VdIik/Lm5vbmNlIDogdm9pZCAwOwpsZXQgbGFzdEluc2VydGVkU3R5bGU7CmZ1bmN0aW9uIHVwZGF0ZVN0eWxlKGlkLCBjb250ZW50KSB7CiAgbGV0IHN0eWxlID0gc2hlZXRzTWFwLmdldChpZCk7CiAgaWYgKCFzdHlsZSkgewogICAgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpOwogICAgc3R5bGUuc2V0QXR0cmlidXRlKCJ0eXBlIiwgInRleHQvY3NzIik7CiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoImRhdGEtdml0ZS1kZXYtaWQiLCBpZCk7CiAgICBzdHlsZS50ZXh0Q29udGVudCA9IGNvbnRlbnQ7CiAgICBpZiAoY3NwTm9uY2UpIHsKICAgICAgc3R5bGUuc2V0QXR0cmlidXRlKCJub25jZSIsIGNzcE5vbmNlKTsKICAgIH0KICAgIGlmICghbGFzdEluc2VydGVkU3R5bGUpIHsKICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGxhc3RJbnNlcnRlZFN0eWxlID0gdm9pZCAwOwogICAgICB9LCAwKTsKICAgIH0gZWxzZSB7CiAgICAgIGxhc3RJbnNlcnRlZFN0eWxlLmluc2VydEFkamFjZW50RWxlbWVudCgiYWZ0ZXJlbmQiLCBzdHlsZSk7CiAgICB9CiAgICBsYXN0SW5zZXJ0ZWRTdHlsZSA9IHN0eWxlOwogIH0gZWxzZSB7CiAgICBzdHlsZS50ZXh0Q29udGVudCA9IGNvbnRlbnQ7CiAgfQogIHNoZWV0c01hcC5zZXQoaWQsIHN0eWxlKTsKfQpmdW5jdGlvbiByZW1vdmVTdHlsZShpZCkgewogIGNvbnN0IHN0eWxlID0gc2hlZXRzTWFwLmdldChpZCk7CiAgaWYgKHN0eWxlKSB7CiAgICBkb2N1bWVudC5oZWFkLnJlbW92ZUNoaWxkKHN0eWxlKTsKICAgIHNoZWV0c01hcC5kZWxldGUoaWQpOwogIH0KfQpmdW5jdGlvbiBjcmVhdGVIb3RDb250ZXh0KG93bmVyUGF0aCkgewogIHJldHVybiBuZXcgSE1SQ29udGV4dChobXJDbGllbnQsIG93bmVyUGF0aCk7Cn0KZnVuY3Rpb24gaW5qZWN0UXVlcnkodXJsLCBxdWVyeVRvSW5qZWN0KSB7CiAgaWYgKHVybFswXSAhPT0gIi4iICYmIHVybFswXSAhPT0gIi8iKSB7CiAgICByZXR1cm4gdXJsOwogIH0KICBjb25zdCBwYXRobmFtZSA9IHVybC5yZXBsYWNlKC9bPyNdLiokLywgIiIpOwogIGNvbnN0IHsgc2VhcmNoLCBoYXNoIH0gPSBuZXcgVVJMKHVybCwgImh0dHA6Ly92aXRlLmRldiIpOwogIHJldHVybiBgJHtwYXRobmFtZX0/JHtxdWVyeVRvSW5qZWN0fSR7c2VhcmNoID8gYCZgICsgc2VhcmNoLnNsaWNlKDEpIDogIiJ9JHtoYXNoIHx8ICIifWA7Cn0KCmV4cG9ydCB7IEVycm9yT3ZlcmxheSwgY3JlYXRlSG90Q29udGV4dCwgaW5qZWN0UXVlcnksIHJlbW92ZVN0eWxlLCB1cGRhdGVTdHlsZSB9OwoKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYkltTnNhV1Z1ZENKZExDSnpiM1Z5WTJWelEyOXVkR1Z1ZENJNld5SnBiWEJ2Y25RZ1hDSXZRR1p6TDFWelpYSnpMMjExY21GMExtOTZZMkZ1TDNObGIyNHZjR3hoZVhkeWFXZG9kQzExZEdsc2N5OXViMlJsWDIxdlpIVnNaWE12ZG1sMFpTOWthWE4wTDJOc2FXVnVkQzlsYm5ZdWJXcHpYQ0k3WEc1Y2JtTnNZWE56SUVoTlVrTnZiblJsZUhRZ2UxeHVJQ0JqYjI1emRISjFZM1J2Y2lob2JYSkRiR2xsYm5Rc0lHOTNibVZ5VUdGMGFDa2dlMXh1SUNBZ0lIUm9hWE11YUcxeVEyeHBaVzUwSUQwZ2FHMXlRMnhwWlc1ME8xeHVJQ0FnSUhSb2FYTXViM2R1WlhKUVlYUm9JRDBnYjNkdVpYSlFZWFJvTzF4dUlDQWdJR2xtSUNnaGFHMXlRMnhwWlc1MExtUmhkR0ZOWVhBdWFHRnpLRzkzYm1WeVVHRjBhQ2twSUh0Y2JpQWdJQ0FnSUdodGNrTnNhV1Z1ZEM1a1lYUmhUV0Z3TG5ObGRDaHZkMjVsY2xCaGRHZ3NJSHQ5S1R0Y2JpQWdJQ0I5WEc0Z0lDQWdZMjl1YzNRZ2JXOWtJRDBnYUcxeVEyeHBaVzUwTG1odmRFMXZaSFZzWlhOTllYQXVaMlYwS0c5M2JtVnlVR0YwYUNrN1hHNGdJQ0FnYVdZZ0tHMXZaQ2tnZTF4dUlDQWdJQ0FnYlc5a0xtTmhiR3hpWVdOcmN5QTlJRnRkTzF4dUlDQWdJSDFjYmlBZ0lDQmpiMjV6ZENCemRHRnNaVXhwYzNSbGJtVnljeUE5SUdodGNrTnNhV1Z1ZEM1amRIaFViMHhwYzNSbGJtVnljMDFoY0M1blpYUW9iM2R1WlhKUVlYUm9LVHRjYmlBZ0lDQnBaaUFvYzNSaGJHVk1hWE4wWlc1bGNuTXBJSHRjYmlBZ0lDQWdJR1p2Y2lBb1kyOXVjM1FnVzJWMlpXNTBMQ0J6ZEdGc1pVWnVjMTBnYjJZZ2MzUmhiR1ZNYVhOMFpXNWxjbk1wSUh0Y2JpQWdJQ0FnSUNBZ1kyOXVjM1FnYkdsemRHVnVaWEp6SUQwZ2FHMXlRMnhwWlc1MExtTjFjM1J2YlV4cGMzUmxibVZ5YzAxaGNDNW5aWFFvWlhabGJuUXBPMXh1SUNBZ0lDQWdJQ0JwWmlBb2JHbHpkR1Z1WlhKektTQjdYRzRnSUNBZ0lDQWdJQ0FnYUcxeVEyeHBaVzUwTG1OMWMzUnZiVXhwYzNSbGJtVnljMDFoY0M1elpYUW9YRzRnSUNBZ0lDQWdJQ0FnSUNCbGRtVnVkQ3hjYmlBZ0lDQWdJQ0FnSUNBZ0lHeHBjM1JsYm1WeWN5NW1hV3gwWlhJb0tHd3BJRDArSUNGemRHRnNaVVp1Y3k1cGJtTnNkV1JsY3loc0tTbGNiaUFnSUNBZ0lDQWdJQ0FwTzF4dUlDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNCOVhHNGdJQ0FnZlZ4dUlDQWdJSFJvYVhNdWJtVjNUR2x6ZEdWdVpYSnpJRDBnTHlvZ1FGOWZVRlZTUlY5ZklDb3ZJRzVsZHlCTllYQW9LVHRjYmlBZ0lDQm9iWEpEYkdsbGJuUXVZM1I0Vkc5TWFYTjBaVzVsY25OTllYQXVjMlYwS0c5M2JtVnlVR0YwYUN3Z2RHaHBjeTV1WlhkTWFYTjBaVzVsY25NcE8xeHVJQ0I5WEc0Z0lHZGxkQ0JrWVhSaEtDa2dlMXh1SUNBZ0lISmxkSFZ5YmlCMGFHbHpMbWh0Y2tOc2FXVnVkQzVrWVhSaFRXRndMbWRsZENoMGFHbHpMbTkzYm1WeVVHRjBhQ2s3WEc0Z0lIMWNiaUFnWVdOalpYQjBLR1JsY0hNc0lHTmhiR3hpWVdOcktTQjdYRzRnSUNBZ2FXWWdLSFI1Y0dWdlppQmtaWEJ6SUQwOVBTQmNJbVoxYm1OMGFXOXVYQ0lnZkh3Z0lXUmxjSE1wSUh0Y2JpQWdJQ0FnSUhSb2FYTXVZV05qWlhCMFJHVndjeWhiZEdocGN5NXZkMjVsY2xCaGRHaGRMQ0FvVzIxdlpGMHBJRDArSUdSbGNITS9MaWh0YjJRcEtUdGNiaUFnSUNCOUlHVnNjMlVnYVdZZ0tIUjVjR1Z2WmlCa1pYQnpJRDA5UFNCY0luTjBjbWx1WjF3aUtTQjdYRzRnSUNBZ0lDQjBhR2x6TG1GalkyVndkRVJsY0hNb1cyUmxjSE5kTENBb1cyMXZaRjBwSUQwK0lHTmhiR3hpWVdOclB5NG9iVzlrS1NrN1hHNGdJQ0FnZlNCbGJITmxJR2xtSUNoQmNuSmhlUzVwYzBGeWNtRjVLR1JsY0hNcEtTQjdYRzRnSUNBZ0lDQjBhR2x6TG1GalkyVndkRVJsY0hNb1pHVndjeXdnWTJGc2JHSmhZMnNwTzF4dUlDQWdJSDBnWld4elpTQjdYRzRnSUNBZ0lDQjBhSEp2ZHlCdVpYY2dSWEp5YjNJb1lHbHVkbUZzYVdRZ2FHOTBMbUZqWTJWd2RDZ3BJSFZ6WVdkbExtQXBPMXh1SUNBZ0lIMWNiaUFnZlZ4dUlDQXZMeUJsZUhCdmNuUWdibUZ0WlhNZ0tHWnBjbk4wSUdGeVp5a2dZWEpsSUdseWNtVnNaWFpoYm5RZ2IyNGdkR2hsSUdOc2FXVnVkQ0J6YVdSbExDQjBhR1Y1SjNKbFhHNGdJQzh2SUdWNGRISmhZM1JsWkNCcGJpQjBhR1VnYzJWeWRtVnlJR1p2Y2lCd2NtOXdZV2RoZEdsdmJseHVJQ0JoWTJObGNIUkZlSEJ2Y25SektGOHNJR05oYkd4aVlXTnJLU0I3WEc0Z0lDQWdkR2hwY3k1aFkyTmxjSFJFWlhCektGdDBhR2x6TG05M2JtVnlVR0YwYUYwc0lDaGJiVzlrWFNrZ1BUNGdZMkZzYkdKaFkycy9MaWh0YjJRcEtUdGNiaUFnZlZ4dUlDQmthWE53YjNObEtHTmlLU0I3WEc0Z0lDQWdkR2hwY3k1b2JYSkRiR2xsYm5RdVpHbHpjRzl6WlUxaGNDNXpaWFFvZEdocGN5NXZkMjVsY2xCaGRHZ3NJR05pS1R0Y2JpQWdmVnh1SUNCd2NuVnVaU2hqWWlrZ2UxeHVJQ0FnSUhSb2FYTXVhRzF5UTJ4cFpXNTBMbkJ5ZFc1bFRXRndMbk5sZENoMGFHbHpMbTkzYm1WeVVHRjBhQ3dnWTJJcE8xeHVJQ0I5WEc0Z0lDOHZJRXRsY0hRZ1ptOXlJR0poWTJ0M1lYSmtJR052YlhCaGRHbGlhV3hwZEhrZ0tDTXhNVEF6TmlsY2JpQWdMeThnWlhOc2FXNTBMV1JwYzJGaWJHVXRibVY0ZEMxc2FXNWxJRUIwZVhCbGMyTnlhWEIwTFdWemJHbHVkQzl1YnkxbGJYQjBlUzFtZFc1amRHbHZibHh1SUNCa1pXTnNhVzVsS0NrZ2UxeHVJQ0I5WEc0Z0lHbHVkbUZzYVdSaGRHVW9iV1Z6YzJGblpTa2dlMXh1SUNBZ0lHTnZibk4wSUdacGNuTjBTVzUyWVd4cFpHRjBaV1JDZVNBOUlIUm9hWE11YUcxeVEyeHBaVzUwTG1OMWNuSmxiblJHYVhKemRFbHVkbUZzYVdSaGRHVmtRbmtnUHo4Z2RHaHBjeTV2ZDI1bGNsQmhkR2c3WEc0Z0lDQWdkR2hwY3k1b2JYSkRiR2xsYm5RdWJtOTBhV1o1VEdsemRHVnVaWEp6S0Z3aWRtbDBaVHBwYm5aaGJHbGtZWFJsWENJc0lIdGNiaUFnSUNBZ0lIQmhkR2c2SUhSb2FYTXViM2R1WlhKUVlYUm9MRnh1SUNBZ0lDQWdiV1Z6YzJGblpTeGNiaUFnSUNBZ0lHWnBjbk4wU1c1MllXeHBaR0YwWldSQ2VWeHVJQ0FnSUgwcE8xeHVJQ0FnSUhSb2FYTXVjMlZ1WkNoY0luWnBkR1U2YVc1MllXeHBaR0YwWlZ3aUxDQjdYRzRnSUNBZ0lDQndZWFJvT2lCMGFHbHpMbTkzYm1WeVVHRjBhQ3hjYmlBZ0lDQWdJRzFsYzNOaFoyVXNYRzRnSUNBZ0lDQm1hWEp6ZEVsdWRtRnNhV1JoZEdWa1FubGNiaUFnSUNCOUtUdGNiaUFnSUNCMGFHbHpMbWh0Y2tOc2FXVnVkQzVzYjJkblpYSXVaR1ZpZFdjb1hHNGdJQ0FnSUNCZ2FXNTJZV3hwWkdGMFpTQWtlM1JvYVhNdWIzZHVaWEpRWVhSb2ZTUjdiV1Z6YzJGblpTQS9JR0E2SUNSN2JXVnpjMkZuWlgxZ0lEb2dYQ0pjSW4xZ1hHNGdJQ0FnS1R0Y2JpQWdmVnh1SUNCdmJpaGxkbVZ1ZEN3Z1kySXBJSHRjYmlBZ0lDQmpiMjV6ZENCaFpHUlViMDFoY0NBOUlDaHRZWEFwSUQwK0lIdGNiaUFnSUNBZ0lHTnZibk4wSUdWNGFYTjBhVzVuSUQwZ2JXRndMbWRsZENobGRtVnVkQ2tnZkh3Z1cxMDdYRzRnSUNBZ0lDQmxlR2x6ZEdsdVp5NXdkWE5vS0dOaUtUdGNiaUFnSUNBZ0lHMWhjQzV6WlhRb1pYWmxiblFzSUdWNGFYTjBhVzVuS1R0Y2JpQWdJQ0I5TzF4dUlDQWdJR0ZrWkZSdlRXRndLSFJvYVhNdWFHMXlRMnhwWlc1MExtTjFjM1J2YlV4cGMzUmxibVZ5YzAxaGNDazdYRzRnSUNBZ1lXUmtWRzlOWVhBb2RHaHBjeTV1WlhkTWFYTjBaVzVsY25NcE8xeHVJQ0I5WEc0Z0lHOW1aaWhsZG1WdWRDd2dZMklwSUh0Y2JpQWdJQ0JqYjI1emRDQnlaVzF2ZG1WR2NtOXRUV0Z3SUQwZ0tHMWhjQ2tnUFQ0Z2UxeHVJQ0FnSUNBZ1kyOXVjM1FnWlhocGMzUnBibWNnUFNCdFlYQXVaMlYwS0dWMlpXNTBLVHRjYmlBZ0lDQWdJR2xtSUNobGVHbHpkR2x1WnlBOVBUMGdkbTlwWkNBd0tTQjdYRzRnSUNBZ0lDQWdJSEpsZEhWeWJqdGNiaUFnSUNBZ0lIMWNiaUFnSUNBZ0lHTnZibk4wSUhCeWRXNWxaQ0E5SUdWNGFYTjBhVzVuTG1acGJIUmxjaWdvYkNrZ1BUNGdiQ0FoUFQwZ1kySXBPMXh1SUNBZ0lDQWdhV1lnS0hCeWRXNWxaQzVzWlc1bmRHZ2dQVDA5SURBcElIdGNiaUFnSUNBZ0lDQWdiV0Z3TG1SbGJHVjBaU2hsZG1WdWRDazdYRzRnSUNBZ0lDQWdJSEpsZEhWeWJqdGNiaUFnSUNBZ0lIMWNiaUFnSUNBZ0lHMWhjQzV6WlhRb1pYWmxiblFzSUhCeWRXNWxaQ2s3WEc0Z0lDQWdmVHRjYmlBZ0lDQnlaVzF2ZG1WR2NtOXRUV0Z3S0hSb2FYTXVhRzF5UTJ4cFpXNTBMbU4xYzNSdmJVeHBjM1JsYm1WeWMwMWhjQ2s3WEc0Z0lDQWdjbVZ0YjNabFJuSnZiVTFoY0NoMGFHbHpMbTVsZDB4cGMzUmxibVZ5Y3lrN1hHNGdJSDFjYmlBZ2MyVnVaQ2hsZG1WdWRDd2daR0YwWVNrZ2UxeHVJQ0FnSUhSb2FYTXVhRzF5UTJ4cFpXNTBMbk5sYm1Rb2V5QjBlWEJsT2lCY0ltTjFjM1J2YlZ3aUxDQmxkbVZ1ZEN3Z1pHRjBZU0I5S1R0Y2JpQWdmVnh1SUNCaFkyTmxjSFJFWlhCektHUmxjSE1zSUdOaGJHeGlZV05ySUQwZ0tDa2dQVDRnZTF4dUlDQjlLU0I3WEc0Z0lDQWdZMjl1YzNRZ2JXOWtJRDBnZEdocGN5NW9iWEpEYkdsbGJuUXVhRzkwVFc5a2RXeGxjMDFoY0M1blpYUW9kR2hwY3k1dmQyNWxjbEJoZEdncElIeDhJSHRjYmlBZ0lDQWdJR2xrT2lCMGFHbHpMbTkzYm1WeVVHRjBhQ3hjYmlBZ0lDQWdJR05oYkd4aVlXTnJjem9nVzExY2JpQWdJQ0I5TzF4dUlDQWdJRzF2WkM1allXeHNZbUZqYTNNdWNIVnphQ2g3WEc0Z0lDQWdJQ0JrWlhCekxGeHVJQ0FnSUNBZ1ptNDZJR05oYkd4aVlXTnJYRzRnSUNBZ2ZTazdYRzRnSUNBZ2RHaHBjeTVvYlhKRGJHbGxiblF1YUc5MFRXOWtkV3hsYzAxaGNDNXpaWFFvZEdocGN5NXZkMjVsY2xCaGRHZ3NJRzF2WkNrN1hHNGdJSDFjYm4xY2JtTnNZWE56SUVoTlVrTnNhV1Z1ZENCN1hHNGdJR052Ym5OMGNuVmpkRzl5S0d4dloyZGxjaXdnZEhKaGJuTndiM0owTENCcGJYQnZjblJWY0dSaGRHVmtUVzlrZFd4bEtTQjdYRzRnSUNBZ2RHaHBjeTVzYjJkblpYSWdQU0JzYjJkblpYSTdYRzRnSUNBZ2RHaHBjeTUwY21GdWMzQnZjblFnUFNCMGNtRnVjM0J2Y25RN1hHNGdJQ0FnZEdocGN5NXBiWEJ2Y25SVmNHUmhkR1ZrVFc5a2RXeGxJRDBnYVcxd2IzSjBWWEJrWVhSbFpFMXZaSFZzWlR0Y2JpQWdJQ0IwYUdsekxtaHZkRTF2WkhWc1pYTk5ZWEFnUFNBdktpQkFYMTlRVlZKRlgxOGdLaThnYm1WM0lFMWhjQ2dwTzF4dUlDQWdJSFJvYVhNdVpHbHpjRzl6WlUxaGNDQTlJQzhxSUVCZlgxQlZVa1ZmWHlBcUx5QnVaWGNnVFdGd0tDazdYRzRnSUNBZ2RHaHBjeTV3Y25WdVpVMWhjQ0E5SUM4cUlFQmZYMUJWVWtWZlh5QXFMeUJ1WlhjZ1RXRndLQ2s3WEc0Z0lDQWdkR2hwY3k1a1lYUmhUV0Z3SUQwZ0x5b2dRRjlmVUZWU1JWOWZJQ292SUc1bGR5Qk5ZWEFvS1R0Y2JpQWdJQ0IwYUdsekxtTjFjM1J2YlV4cGMzUmxibVZ5YzAxaGNDQTlJQzhxSUVCZlgxQlZVa1ZmWHlBcUx5QnVaWGNnVFdGd0tDazdYRzRnSUNBZ2RHaHBjeTVqZEhoVWIweHBjM1JsYm1WeWMwMWhjQ0E5SUM4cUlFQmZYMUJWVWtWZlh5QXFMeUJ1WlhjZ1RXRndLQ2s3WEc0Z0lDQWdkR2hwY3k1MWNHUmhkR1ZSZFdWMVpTQTlJRnRkTzF4dUlDQWdJSFJvYVhNdWNHVnVaR2x1WjFWd1pHRjBaVkYxWlhWbElEMGdabUZzYzJVN1hHNGdJSDFjYmlBZ1lYTjVibU1nYm05MGFXWjVUR2x6ZEdWdVpYSnpLR1YyWlc1MExDQmtZWFJoS1NCN1hHNGdJQ0FnWTI5dWMzUWdZMkp6SUQwZ2RHaHBjeTVqZFhOMGIyMU1hWE4wWlc1bGNuTk5ZWEF1WjJWMEtHVjJaVzUwS1R0Y2JpQWdJQ0JwWmlBb1kySnpLU0I3WEc0Z0lDQWdJQ0JoZDJGcGRDQlFjbTl0YVhObExtRnNiRk5sZEhSc1pXUW9ZMkp6TG0xaGNDZ29ZMklwSUQwK0lHTmlLR1JoZEdFcEtTazdYRzRnSUNBZ2ZWeHVJQ0I5WEc0Z0lITmxibVFvY0dGNWJHOWhaQ2tnZTF4dUlDQWdJSFJvYVhNdWRISmhibk53YjNKMExuTmxibVFvY0dGNWJHOWhaQ2t1WTJGMFkyZ29LR1Z5Y2lrZ1BUNGdlMXh1SUNBZ0lDQWdkR2hwY3k1c2IyZG5aWEl1WlhKeWIzSW9aWEp5S1R0Y2JpQWdJQ0I5S1R0Y2JpQWdmVnh1SUNCamJHVmhjaWdwSUh0Y2JpQWdJQ0IwYUdsekxtaHZkRTF2WkhWc1pYTk5ZWEF1WTJ4bFlYSW9LVHRjYmlBZ0lDQjBhR2x6TG1ScGMzQnZjMlZOWVhBdVkyeGxZWElvS1R0Y2JpQWdJQ0IwYUdsekxuQnlkVzVsVFdGd0xtTnNaV0Z5S0NrN1hHNGdJQ0FnZEdocGN5NWtZWFJoVFdGd0xtTnNaV0Z5S0NrN1hHNGdJQ0FnZEdocGN5NWpkWE4wYjIxTWFYTjBaVzVsY25OTllYQXVZMnhsWVhJb0tUdGNiaUFnSUNCMGFHbHpMbU4wZUZSdlRHbHpkR1Z1WlhKelRXRndMbU5zWldGeUtDazdYRzRnSUgxY2JpQWdMeThnUVdaMFpYSWdZVzRnU0UxU0lIVndaR0YwWlN3Z2MyOXRaU0J0YjJSMWJHVnpJR0Z5WlNCdWJ5QnNiMjVuWlhJZ2FXMXdiM0owWldRZ2IyNGdkR2hsSUhCaFoyVmNiaUFnTHk4Z1luVjBJSFJvWlhrZ2JXRjVJR2hoZG1VZ2JHVm1kQ0JpWldocGJtUWdjMmxrWlNCbFptWmxZM1J6SUhSb1lYUWdibVZsWkNCMGJ5QmlaU0JqYkdWaGJtVmtJSFZ3WEc0Z0lDOHZJQ2hsTG1jdUlITjBlV3hsSUdsdWFtVmpkR2x2Ym5NcFhHNGdJR0Z6ZVc1aklIQnlkVzVsVUdGMGFITW9jR0YwYUhNcElIdGNiaUFnSUNCaGQyRnBkQ0JRY205dGFYTmxMbUZzYkNoY2JpQWdJQ0FnSUhCaGRHaHpMbTFoY0Nnb2NHRjBhQ2tnUFQ0Z2UxeHVJQ0FnSUNBZ0lDQmpiMjV6ZENCa2FYTndiM05sY2lBOUlIUm9hWE11WkdsemNHOXpaVTFoY0M1blpYUW9jR0YwYUNrN1hHNGdJQ0FnSUNBZ0lHbG1JQ2hrYVhOd2IzTmxjaWtnY21WMGRYSnVJR1JwYzNCdmMyVnlLSFJvYVhNdVpHRjBZVTFoY0M1blpYUW9jR0YwYUNrcE8xeHVJQ0FnSUNBZ2ZTbGNiaUFnSUNBcE8xeHVJQ0FnSUhCaGRHaHpMbVp2Y2tWaFkyZ29LSEJoZEdncElEMCtJSHRjYmlBZ0lDQWdJR052Ym5OMElHWnVJRDBnZEdocGN5NXdjblZ1WlUxaGNDNW5aWFFvY0dGMGFDazdYRzRnSUNBZ0lDQnBaaUFvWm00cElIdGNiaUFnSUNBZ0lDQWdabTRvZEdocGN5NWtZWFJoVFdGd0xtZGxkQ2h3WVhSb0tTazdYRzRnSUNBZ0lDQjlYRzRnSUNBZ2ZTazdYRzRnSUgxY2JpQWdkMkZ5YmtaaGFXeGxaRlZ3WkdGMFpTaGxjbklzSUhCaGRHZ3BJSHRjYmlBZ0lDQnBaaUFvSVNobGNuSWdhVzV6ZEdGdVkyVnZaaUJGY25KdmNpa2dmSHdnSVdWeWNpNXRaWE56WVdkbExtbHVZMngxWkdWektGd2labVYwWTJoY0lpa3BJSHRjYmlBZ0lDQWdJSFJvYVhNdWJHOW5aMlZ5TG1WeWNtOXlLR1Z5Y2lrN1hHNGdJQ0FnZlZ4dUlDQWdJSFJvYVhNdWJHOW5aMlZ5TG1WeWNtOXlLRnh1SUNBZ0lDQWdZRVpoYVd4bFpDQjBieUJ5Wld4dllXUWdKSHR3WVhSb2ZTNGdWR2hwY3lCamIzVnNaQ0JpWlNCa2RXVWdkRzhnYzNsdWRHRjRJR1Z5Y205eWN5QnZjaUJwYlhCdmNuUnBibWNnYm05dUxXVjRhWE4wWlc1MElHMXZaSFZzWlhNdUlDaHpaV1VnWlhKeWIzSnpJR0ZpYjNabEtXQmNiaUFnSUNBcE8xeHVJQ0I5WEc0Z0lDOHFLbHh1SUNBZ0tpQmlkV1ptWlhJZ2JYVnNkR2x3YkdVZ2FHOTBJSFZ3WkdGMFpYTWdkSEpwWjJkbGNtVmtJR0o1SUhSb1pTQnpZVzFsSUhOeVl5QmphR0Z1WjJWY2JpQWdJQ29nYzI4Z2RHaGhkQ0IwYUdWNUlHRnlaU0JwYm5admEyVmtJR2x1SUhSb1pTQnpZVzFsSUc5eVpHVnlJSFJvWlhrZ2QyVnlaU0J6Wlc1MExseHVJQ0FnS2lBb2IzUm9aWEozYVhObElIUm9aU0J2Y21SbGNpQnRZWGtnWW1VZ2FXNWpiMjV6YVhOMFpXNTBJR0psWTJGMWMyVWdiMllnZEdobElHaDBkSEFnY21WeGRXVnpkQ0J5YjNWdVpDQjBjbWx3S1Z4dUlDQWdLaTljYmlBZ1lYTjVibU1nY1hWbGRXVlZjR1JoZEdVb2NHRjViRzloWkNrZ2UxeHVJQ0FnSUhSb2FYTXVkWEJrWVhSbFVYVmxkV1V1Y0hWemFDaDBhR2x6TG1abGRHTm9WWEJrWVhSbEtIQmhlV3h2WVdRcEtUdGNiaUFnSUNCcFppQW9JWFJvYVhNdWNHVnVaR2x1WjFWd1pHRjBaVkYxWlhWbEtTQjdYRzRnSUNBZ0lDQjBhR2x6TG5CbGJtUnBibWRWY0dSaGRHVlJkV1YxWlNBOUlIUnlkV1U3WEc0Z0lDQWdJQ0JoZDJGcGRDQlFjbTl0YVhObExuSmxjMjlzZG1Vb0tUdGNiaUFnSUNBZ0lIUm9hWE11Y0dWdVpHbHVaMVZ3WkdGMFpWRjFaWFZsSUQwZ1ptRnNjMlU3WEc0Z0lDQWdJQ0JqYjI1emRDQnNiMkZrYVc1bklEMGdXeTR1TG5Sb2FYTXVkWEJrWVhSbFVYVmxkV1ZkTzF4dUlDQWdJQ0FnZEdocGN5NTFjR1JoZEdWUmRXVjFaU0E5SUZ0ZE8xeHVJQ0FnSUNBZ0tHRjNZV2wwSUZCeWIyMXBjMlV1WVd4c0tHeHZZV1JwYm1jcEtTNW1iM0pGWVdOb0tDaG1iaWtnUFQ0Z1ptNGdKaVlnWm00b0tTazdYRzRnSUNBZ2ZWeHVJQ0I5WEc0Z0lHRnplVzVqSUdabGRHTm9WWEJrWVhSbEtIVndaR0YwWlNrZ2UxeHVJQ0FnSUdOdmJuTjBJSHNnY0dGMGFDd2dZV05qWlhCMFpXUlFZWFJvTENCbWFYSnpkRWx1ZG1Gc2FXUmhkR1ZrUW5rZ2ZTQTlJSFZ3WkdGMFpUdGNiaUFnSUNCamIyNXpkQ0J0YjJRZ1BTQjBhR2x6TG1odmRFMXZaSFZzWlhOTllYQXVaMlYwS0hCaGRHZ3BPMXh1SUNBZ0lHbG1JQ2doYlc5a0tTQjdYRzRnSUNBZ0lDQnlaWFIxY200N1hHNGdJQ0FnZlZ4dUlDQWdJR3hsZENCbVpYUmphR1ZrVFc5a2RXeGxPMXh1SUNBZ0lHTnZibk4wSUdselUyVnNabFZ3WkdGMFpTQTlJSEJoZEdnZ1BUMDlJR0ZqWTJWd2RHVmtVR0YwYUR0Y2JpQWdJQ0JqYjI1emRDQnhkV0ZzYVdacFpXUkRZV3hzWW1GamEzTWdQU0J0YjJRdVkyRnNiR0poWTJ0ekxtWnBiSFJsY2loY2JpQWdJQ0FnSUNoN0lHUmxjSE1nZlNrZ1BUNGdaR1Z3Y3k1cGJtTnNkV1JsY3loaFkyTmxjSFJsWkZCaGRHZ3BYRzRnSUNBZ0tUdGNiaUFnSUNCcFppQW9hWE5UWld4bVZYQmtZWFJsSUh4OElIRjFZV3hwWm1sbFpFTmhiR3hpWVdOcmN5NXNaVzVuZEdnZ1BpQXdLU0I3WEc0Z0lDQWdJQ0JqYjI1emRDQmthWE53YjNObGNpQTlJSFJvYVhNdVpHbHpjRzl6WlUxaGNDNW5aWFFvWVdOalpYQjBaV1JRWVhSb0tUdGNiaUFnSUNBZ0lHbG1JQ2hrYVhOd2IzTmxjaWtnWVhkaGFYUWdaR2x6Y0c5elpYSW9kR2hwY3k1a1lYUmhUV0Z3TG1kbGRDaGhZMk5sY0hSbFpGQmhkR2dwS1R0Y2JpQWdJQ0FnSUhSeWVTQjdYRzRnSUNBZ0lDQWdJR1psZEdOb1pXUk5iMlIxYkdVZ1BTQmhkMkZwZENCMGFHbHpMbWx0Y0c5eWRGVndaR0YwWldSTmIyUjFiR1VvZFhCa1lYUmxLVHRjYmlBZ0lDQWdJSDBnWTJGMFkyZ2dLR1VwSUh0Y2JpQWdJQ0FnSUNBZ2RHaHBjeTUzWVhKdVJtRnBiR1ZrVlhCa1lYUmxLR1VzSUdGalkyVndkR1ZrVUdGMGFDazdYRzRnSUNBZ0lDQjlYRzRnSUNBZ2ZWeHVJQ0FnSUhKbGRIVnliaUFvS1NBOVBpQjdYRzRnSUNBZ0lDQjBjbmtnZTF4dUlDQWdJQ0FnSUNCMGFHbHpMbU4xY25KbGJuUkdhWEp6ZEVsdWRtRnNhV1JoZEdWa1Fua2dQU0JtYVhKemRFbHVkbUZzYVdSaGRHVmtRbms3WEc0Z0lDQWdJQ0FnSUdadmNpQW9ZMjl1YzNRZ2V5QmtaWEJ6TENCbWJpQjlJRzltSUhGMVlXeHBabWxsWkVOaGJHeGlZV05yY3lrZ2UxeHVJQ0FnSUNBZ0lDQWdJR1p1S0Z4dUlDQWdJQ0FnSUNBZ0lDQWdaR1Z3Y3k1dFlYQW9YRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lDaGtaWEFwSUQwK0lHUmxjQ0E5UFQwZ1lXTmpaWEIwWldSUVlYUm9JRDhnWm1WMFkyaGxaRTF2WkhWc1pTQTZJSFp2YVdRZ01GeHVJQ0FnSUNBZ0lDQWdJQ0FnS1Z4dUlDQWdJQ0FnSUNBZ0lDazdYRzRnSUNBZ0lDQWdJSDFjYmlBZ0lDQWdJQ0FnWTI5dWMzUWdiRzluWjJWa1VHRjBhQ0E5SUdselUyVnNabFZ3WkdGMFpTQS9JSEJoZEdnZ09pQmdKSHRoWTJObGNIUmxaRkJoZEdoOUlIWnBZU0FrZTNCaGRHaDlZRHRjYmlBZ0lDQWdJQ0FnZEdocGN5NXNiMmRuWlhJdVpHVmlkV2NvWUdodmRDQjFjR1JoZEdWa09pQWtlMnh2WjJkbFpGQmhkR2g5WUNrN1hHNGdJQ0FnSUNCOUlHWnBibUZzYkhrZ2UxeHVJQ0FnSUNBZ0lDQjBhR2x6TG1OMWNuSmxiblJHYVhKemRFbHVkbUZzYVdSaGRHVmtRbmtnUFNCMmIybGtJREE3WEc0Z0lDQWdJQ0I5WEc0Z0lDQWdmVHRjYmlBZ2ZWeHVmVnh1WEc0dktpQkFkSE10YzJWc1ppMTBlWEJsY3oxY0lpNHZhVzVrWlhndVpDNTBjMXdpSUNvdlhHNXNaWFFnZFhKc1FXeHdhR0ZpWlhRZ1BWeHVJQ0FuZFhObFlXNWtiMjB0TWpaVU1UazRNelF3VUZnM05YQjRTa0ZEUzFaRlVsbE5TVTVFUWxWVFNGZFBURVpmUjFGYVltWm5hR3ByYkhGMmQzbDZjbWxqZENjN1hHNXNaWFFnYm1GdWIybGtJRDBnS0hOcGVtVWdQU0F5TVNrZ1BUNGdlMXh1SUNCc1pYUWdhV1FnUFNBbkp6dGNiaUFnYkdWMElHa2dQU0J6YVhwbElId2dNRHRjYmlBZ2QyaHBiR1VnS0drdExTa2dlMXh1SUNBZ0lHbGtJQ3M5SUhWeWJFRnNjR2hoWW1WMFd5aE5ZWFJvTG5KaGJtUnZiU2dwSUNvZ05qUXBJSHdnTUYwN1hHNGdJSDFjYmlBZ2NtVjBkWEp1SUdsa1hHNTlPMXh1WEc1MGVYQmxiMllnY0hKdlkyVnpjeUFoUFQwZ1hDSjFibVJsWm1sdVpXUmNJaUFtSmlCd2NtOWpaWE56TG5Cc1lYUm1iM0p0SUQwOVBTQmNJbmRwYmpNeVhDSTdYRzVtZFc1amRHbHZiaUJ3Y205dGFYTmxWMmwwYUZKbGMyOXNkbVZ5Y3lncElIdGNiaUFnYkdWMElISmxjMjlzZG1VN1hHNGdJR3hsZENCeVpXcGxZM1E3WEc0Z0lHTnZibk4wSUhCeWIyMXBjMlVnUFNCdVpYY2dVSEp2YldselpTZ29YM0psYzI5c2RtVXNJRjl5WldwbFkzUXBJRDArSUh0Y2JpQWdJQ0J5WlhOdmJIWmxJRDBnWDNKbGMyOXNkbVU3WEc0Z0lDQWdjbVZxWldOMElEMGdYM0psYW1WamREdGNiaUFnZlNrN1hHNGdJSEpsZEhWeWJpQjdJSEJ5YjIxcGMyVXNJSEpsYzI5c2RtVXNJSEpsYW1WamRDQjlPMXh1ZlZ4dVhHNW1kVzVqZEdsdmJpQnlaWFpwZG1WSmJuWnZhMlZGY25KdmNpaGxLU0I3WEc0Z0lHTnZibk4wSUdWeWNtOXlJRDBnYm1WM0lFVnljbTl5S0dVdWJXVnpjMkZuWlNCOGZDQmNJbFZ1YTI1dmQyNGdhVzUyYjJ0bElHVnljbTl5WENJcE8xeHVJQ0JQWW1wbFkzUXVZWE56YVdkdUtHVnljbTl5TENCbExDQjdYRzRnSUNBZ0x5OGdjR0Z6Y3lCMGFHVWdkMmh2YkdVZ1pYSnliM0lnYVc1emRHVmhaQ0J2WmlCcWRYTjBJSFJvWlNCemRHRmphM1J5WVdObFhHNGdJQ0FnTHk4Z2MyOGdkR2hoZENCcGRDQm5aWFJ6SUdadmNtMWhkSFJsWkNCdWFXTmxiSGtnZDJsMGFDQmpiMjV6YjJ4bExteHZaMXh1SUNBZ0lISjFibTVsY2tWeWNtOXlPaUJ1WlhjZ1JYSnliM0lvWENKU2RXNXVaWEpGY25KdmNsd2lLVnh1SUNCOUtUdGNiaUFnY21WMGRYSnVJR1Z5Y205eU8xeHVmVnh1WTI5dWMzUWdZM0psWVhSbFNXNTJiMnRsWVdKc1pWUnlZVzV6Y0c5eWRDQTlJQ2gwY21GdWMzQnZjblFwSUQwK0lIdGNiaUFnYVdZZ0tIUnlZVzV6Y0c5eWRDNXBiblp2YTJVcElIdGNiaUFnSUNCeVpYUjFjbTRnZTF4dUlDQWdJQ0FnTGk0dWRISmhibk53YjNKMExGeHVJQ0FnSUNBZ1lYTjVibU1nYVc1MmIydGxLRzVoYldVc0lHUmhkR0VwSUh0Y2JpQWdJQ0FnSUNBZ1kyOXVjM1FnY21WemRXeDBJRDBnWVhkaGFYUWdkSEpoYm5Od2IzSjBMbWx1ZG05clpTaDdYRzRnSUNBZ0lDQWdJQ0FnZEhsd1pUb2dYQ0pqZFhOMGIyMWNJaXhjYmlBZ0lDQWdJQ0FnSUNCbGRtVnVkRG9nWENKMmFYUmxPbWx1ZG05clpWd2lMRnh1SUNBZ0lDQWdJQ0FnSUdSaGRHRTZJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lHbGtPaUJjSW5ObGJtUmNJaXhjYmlBZ0lDQWdJQ0FnSUNBZ0lHNWhiV1VzWEc0Z0lDQWdJQ0FnSUNBZ0lDQmtZWFJoWEc0Z0lDQWdJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ0lDQjlLVHRjYmlBZ0lDQWdJQ0FnYVdZZ0tGd2laWEp5YjNKY0lpQnBiaUJ5WlhOMWJIUXBJSHRjYmlBZ0lDQWdJQ0FnSUNCMGFISnZkeUJ5WlhacGRtVkpiblp2YTJWRmNuSnZjaWh5WlhOMWJIUXVaWEp5YjNJcE8xeHVJQ0FnSUNBZ0lDQjlYRzRnSUNBZ0lDQWdJSEpsZEhWeWJpQnlaWE4xYkhRdWNtVnpkV3gwTzF4dUlDQWdJQ0FnZlZ4dUlDQWdJSDA3WEc0Z0lIMWNiaUFnYVdZZ0tDRjBjbUZ1YzNCdmNuUXVjMlZ1WkNCOGZDQWhkSEpoYm5Od2IzSjBMbU52Ym01bFkzUXBJSHRjYmlBZ0lDQjBhSEp2ZHlCdVpYY2dSWEp5YjNJb1hHNGdJQ0FnSUNCY0luUnlZVzV6Y0c5eWRDQnRkWE4wSUdsdGNHeGxiV1Z1ZENCelpXNWtJR0Z1WkNCamIyNXVaV04wSUhkb1pXNGdhVzUyYjJ0bElHbHpJRzV2ZENCcGJYQnNaVzFsYm5SbFpGd2lYRzRnSUNBZ0tUdGNiaUFnZlZ4dUlDQmpiMjV6ZENCeWNHTlFjbTl0YVhObGN5QTlJQzhxSUVCZlgxQlZVa1ZmWHlBcUx5QnVaWGNnVFdGd0tDazdYRzRnSUhKbGRIVnliaUI3WEc0Z0lDQWdMaTR1ZEhKaGJuTndiM0owTEZ4dUlDQWdJR052Ym01bFkzUW9leUJ2YmsxbGMzTmhaMlVzSUc5dVJHbHpZMjl1Ym1WamRHbHZiaUI5S1NCN1hHNGdJQ0FnSUNCeVpYUjFjbTRnZEhKaGJuTndiM0owTG1OdmJtNWxZM1FvZTF4dUlDQWdJQ0FnSUNCdmJrMWxjM05oWjJVb2NHRjViRzloWkNrZ2UxeHVJQ0FnSUNBZ0lDQWdJR2xtSUNod1lYbHNiMkZrTG5SNWNHVWdQVDA5SUZ3aVkzVnpkRzl0WENJZ0ppWWdjR0Y1Ykc5aFpDNWxkbVZ1ZENBOVBUMGdYQ0oyYVhSbE9tbHVkbTlyWlZ3aUtTQjdYRzRnSUNBZ0lDQWdJQ0FnSUNCamIyNXpkQ0JrWVhSaElEMGdjR0Y1Ykc5aFpDNWtZWFJoTzF4dUlDQWdJQ0FnSUNBZ0lDQWdhV1lnS0dSaGRHRXVhV1F1YzNSaGNuUnpWMmwwYUNoY0luSmxjM0J2Ym5ObE9sd2lLU2tnZTF4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0JqYjI1emRDQnBiblp2YTJWSlpDQTlJR1JoZEdFdWFXUXVjMnhwWTJVb1hDSnlaWE53YjI1elpUcGNJaTVzWlc1bmRHZ3BPMXh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQmpiMjV6ZENCd2NtOXRhWE5sSUQwZ2NuQmpVSEp2YldselpYTXVaMlYwS0dsdWRtOXJaVWxrS1R0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnYVdZZ0tDRndjbTl0YVhObEtTQnlaWFIxY200N1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUdsbUlDaHdjbTl0YVhObExuUnBiV1Z2ZFhSSlpDa2dZMnhsWVhKVWFXMWxiM1YwS0hCeWIyMXBjMlV1ZEdsdFpXOTFkRWxrS1R0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnY25CalVISnZiV2x6WlhNdVpHVnNaWFJsS0dsdWRtOXJaVWxrS1R0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnWTI5dWMzUWdleUJsY25KdmNpd2djbVZ6ZFd4MElIMGdQU0JrWVhSaExtUmhkR0U3WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJR2xtSUNobGNuSnZjaWtnZTF4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUhCeWIyMXBjMlV1Y21WcVpXTjBLR1Z5Y205eUtUdGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ2ZTQmxiSE5sSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCd2NtOXRhWE5sTG5KbGMyOXNkbVVvY21WemRXeDBLVHRjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdmVnh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQnlaWFIxY200N1hHNGdJQ0FnSUNBZ0lDQWdJQ0I5WEc0Z0lDQWdJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ0lDQWdJRzl1VFdWemMyRm5aU2h3WVhsc2IyRmtLVHRjYmlBZ0lDQWdJQ0FnZlN4Y2JpQWdJQ0FnSUNBZ2IyNUVhWE5qYjI1dVpXTjBhVzl1WEc0Z0lDQWdJQ0I5S1R0Y2JpQWdJQ0I5TEZ4dUlDQWdJR1JwYzJOdmJtNWxZM1FvS1NCN1hHNGdJQ0FnSUNCeWNHTlFjbTl0YVhObGN5NW1iM0pGWVdOb0tDaHdjbTl0YVhObEtTQTlQaUI3WEc0Z0lDQWdJQ0FnSUhCeWIyMXBjMlV1Y21WcVpXTjBLRnh1SUNBZ0lDQWdJQ0FnSUc1bGR5QkZjbkp2Y2loY2JpQWdJQ0FnSUNBZ0lDQWdJR0IwY21GdWMzQnZjblFnZDJGeklHUnBjMk52Ym01bFkzUmxaQ3dnWTJGdWJtOTBJR05oYkd3Z0pIdEtVMDlPTG5OMGNtbHVaMmxtZVNod2NtOXRhWE5sTG01aGJXVXBmV0JjYmlBZ0lDQWdJQ0FnSUNBcFhHNGdJQ0FnSUNBZ0lDazdYRzRnSUNBZ0lDQjlLVHRjYmlBZ0lDQWdJSEp3WTFCeWIyMXBjMlZ6TG1Oc1pXRnlLQ2s3WEc0Z0lDQWdJQ0J5WlhSMWNtNGdkSEpoYm5Od2IzSjBMbVJwYzJOdmJtNWxZM1EvTGlncE8xeHVJQ0FnSUgwc1hHNGdJQ0FnYzJWdVpDaGtZWFJoS1NCN1hHNGdJQ0FnSUNCeVpYUjFjbTRnZEhKaGJuTndiM0owTG5ObGJtUW9aR0YwWVNrN1hHNGdJQ0FnZlN4Y2JpQWdJQ0JoYzNsdVl5QnBiblp2YTJVb2JtRnRaU3dnWkdGMFlTa2dlMXh1SUNBZ0lDQWdZMjl1YzNRZ2NISnZiV2x6WlVsa0lEMGdibUZ1YjJsa0tDazdYRzRnSUNBZ0lDQmpiMjV6ZENCM2NtRndjR1ZrUkdGMFlTQTlJSHRjYmlBZ0lDQWdJQ0FnZEhsd1pUb2dYQ0pqZFhOMGIyMWNJaXhjYmlBZ0lDQWdJQ0FnWlhabGJuUTZJRndpZG1sMFpUcHBiblp2YTJWY0lpeGNiaUFnSUNBZ0lDQWdaR0YwWVRvZ2UxeHVJQ0FnSUNBZ0lDQWdJRzVoYldVc1hHNGdJQ0FnSUNBZ0lDQWdhV1E2SUdCelpXNWtPaVI3Y0hKdmJXbHpaVWxrZldBc1hHNGdJQ0FnSUNBZ0lDQWdaR0YwWVZ4dUlDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNCOU8xeHVJQ0FnSUNBZ1kyOXVjM1FnYzJWdVpGQnliMjFwYzJVZ1BTQjBjbUZ1YzNCdmNuUXVjMlZ1WkNoM2NtRndjR1ZrUkdGMFlTazdYRzRnSUNBZ0lDQmpiMjV6ZENCN0lIQnliMjFwYzJVc0lISmxjMjlzZG1Vc0lISmxhbVZqZENCOUlEMGdjSEp2YldselpWZHBkR2hTWlhOdmJIWmxjbk1vS1R0Y2JpQWdJQ0FnSUdOdmJuTjBJSFJwYldWdmRYUWdQU0IwY21GdWMzQnZjblF1ZEdsdFpXOTFkQ0EvUHlBMlpUUTdYRzRnSUNBZ0lDQnNaWFFnZEdsdFpXOTFkRWxrTzF4dUlDQWdJQ0FnYVdZZ0tIUnBiV1Z2ZFhRZ1BpQXdLU0I3WEc0Z0lDQWdJQ0FnSUhScGJXVnZkWFJKWkNBOUlITmxkRlJwYldWdmRYUW9LQ2tnUFQ0Z2UxeHVJQ0FnSUNBZ0lDQWdJSEp3WTFCeWIyMXBjMlZ6TG1SbGJHVjBaU2h3Y205dGFYTmxTV1FwTzF4dUlDQWdJQ0FnSUNBZ0lISmxhbVZqZENoY2JpQWdJQ0FnSUNBZ0lDQWdJRzVsZHlCRmNuSnZjaWhjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdZSFJ5WVc1emNHOXlkQ0JwYm5admEyVWdkR2x0WldRZ2IzVjBJR0ZtZEdWeUlDUjdkR2x0Wlc5MWRIMXRjeUFvWkdGMFlUb2dKSHRLVTA5T0xuTjBjbWx1WjJsbWVTaDNjbUZ3Y0dWa1JHRjBZU2w5S1dCY2JpQWdJQ0FnSUNBZ0lDQWdJQ2xjYmlBZ0lDQWdJQ0FnSUNBcE8xeHVJQ0FnSUNBZ0lDQjlMQ0IwYVcxbGIzVjBLVHRjYmlBZ0lDQWdJQ0FnZEdsdFpXOTFkRWxrUHk1MWJuSmxaajh1S0NrN1hHNGdJQ0FnSUNCOVhHNGdJQ0FnSUNCeWNHTlFjbTl0YVhObGN5NXpaWFFvY0hKdmJXbHpaVWxrTENCN0lISmxjMjlzZG1Vc0lISmxhbVZqZEN3Z2JtRnRaU3dnZEdsdFpXOTFkRWxrSUgwcE8xeHVJQ0FnSUNBZ2FXWWdLSE5sYm1SUWNtOXRhWE5sS1NCN1hHNGdJQ0FnSUNBZ0lITmxibVJRY205dGFYTmxMbU5oZEdOb0tDaGxjbklwSUQwK0lIdGNiaUFnSUNBZ0lDQWdJQ0JqYkdWaGNsUnBiV1Z2ZFhRb2RHbHRaVzkxZEVsa0tUdGNiaUFnSUNBZ0lDQWdJQ0J5Y0dOUWNtOXRhWE5sY3k1a1pXeGxkR1VvY0hKdmJXbHpaVWxrS1R0Y2JpQWdJQ0FnSUNBZ0lDQnlaV3BsWTNRb1pYSnlLVHRjYmlBZ0lDQWdJQ0FnZlNrN1hHNGdJQ0FnSUNCOVhHNGdJQ0FnSUNCMGNua2dlMXh1SUNBZ0lDQWdJQ0J5WlhSMWNtNGdZWGRoYVhRZ2NISnZiV2x6WlR0Y2JpQWdJQ0FnSUgwZ1kyRjBZMmdnS0dWeWNpa2dlMXh1SUNBZ0lDQWdJQ0IwYUhKdmR5QnlaWFpwZG1WSmJuWnZhMlZGY25KdmNpaGxjbklwTzF4dUlDQWdJQ0FnZlZ4dUlDQWdJSDFjYmlBZ2ZUdGNibjA3WEc1amIyNXpkQ0J1YjNKdFlXeHBlbVZOYjJSMWJHVlNkVzV1WlhKVWNtRnVjM0J2Y25RZ1BTQW9kSEpoYm5Od2IzSjBLU0E5UGlCN1hHNGdJR052Ym5OMElHbHVkbTlyWldGaWJHVlVjbUZ1YzNCdmNuUWdQU0JqY21WaGRHVkpiblp2YTJWaFlteGxWSEpoYm5Od2IzSjBLSFJ5WVc1emNHOXlkQ2s3WEc0Z0lHeGxkQ0JwYzBOdmJtNWxZM1JsWkNBOUlDRnBiblp2YTJWaFlteGxWSEpoYm5Od2IzSjBMbU52Ym01bFkzUTdYRzRnSUd4bGRDQmpiMjV1WldOMGFXNW5VSEp2YldselpUdGNiaUFnY21WMGRYSnVJSHRjYmlBZ0lDQXVMaTUwY21GdWMzQnZjblFzWEc0Z0lDQWdMaTR1YVc1MmIydGxZV0pzWlZSeVlXNXpjRzl5ZEM1amIyNXVaV04wSUQ4Z2UxeHVJQ0FnSUNBZ1lYTjVibU1nWTI5dWJtVmpkQ2h2YmsxbGMzTmhaMlVwSUh0Y2JpQWdJQ0FnSUNBZ2FXWWdLR2x6UTI5dWJtVmpkR1ZrS1NCeVpYUjFjbTQ3WEc0Z0lDQWdJQ0FnSUdsbUlDaGpiMjV1WldOMGFXNW5VSEp2YldselpTa2dlMXh1SUNBZ0lDQWdJQ0FnSUdGM1lXbDBJR052Ym01bFkzUnBibWRRY205dGFYTmxPMXh1SUNBZ0lDQWdJQ0FnSUhKbGRIVnlianRjYmlBZ0lDQWdJQ0FnZlZ4dUlDQWdJQ0FnSUNCamIyNXpkQ0J0WVhsaVpWQnliMjFwYzJVZ1BTQnBiblp2YTJWaFlteGxWSEpoYm5Od2IzSjBMbU52Ym01bFkzUW9lMXh1SUNBZ0lDQWdJQ0FnSUc5dVRXVnpjMkZuWlRvZ2IyNU5aWE56WVdkbElEOC9JQ2dvS1NBOVBpQjdYRzRnSUNBZ0lDQWdJQ0FnZlNrc1hHNGdJQ0FnSUNBZ0lDQWdiMjVFYVhOamIyNXVaV04wYVc5dUtDa2dlMXh1SUNBZ0lDQWdJQ0FnSUNBZ2FYTkRiMjV1WldOMFpXUWdQU0JtWVd4elpUdGNiaUFnSUNBZ0lDQWdJQ0I5WEc0Z0lDQWdJQ0FnSUgwcE8xeHVJQ0FnSUNBZ0lDQnBaaUFvYldGNVltVlFjbTl0YVhObEtTQjdYRzRnSUNBZ0lDQWdJQ0FnWTI5dWJtVmpkR2x1WjFCeWIyMXBjMlVnUFNCdFlYbGlaVkJ5YjIxcGMyVTdYRzRnSUNBZ0lDQWdJQ0FnWVhkaGFYUWdZMjl1Ym1WamRHbHVaMUJ5YjIxcGMyVTdYRzRnSUNBZ0lDQWdJQ0FnWTI5dWJtVmpkR2x1WjFCeWIyMXBjMlVnUFNCMmIybGtJREE3WEc0Z0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUNBZ2FYTkRiMjV1WldOMFpXUWdQU0IwY25WbE8xeHVJQ0FnSUNBZ2ZWeHVJQ0FnSUgwZ09pQjdmU3hjYmlBZ0lDQXVMaTVwYm5admEyVmhZbXhsVkhKaGJuTndiM0owTG1ScGMyTnZibTVsWTNRZ1B5QjdYRzRnSUNBZ0lDQmhjM2x1WXlCa2FYTmpiMjV1WldOMEtDa2dlMXh1SUNBZ0lDQWdJQ0JwWmlBb0lXbHpRMjl1Ym1WamRHVmtLU0J5WlhSMWNtNDdYRzRnSUNBZ0lDQWdJR2xtSUNoamIyNXVaV04wYVc1blVISnZiV2x6WlNrZ2UxeHVJQ0FnSUNBZ0lDQWdJR0YzWVdsMElHTnZibTVsWTNScGJtZFFjbTl0YVhObE8xeHVJQ0FnSUNBZ0lDQjlYRzRnSUNBZ0lDQWdJR2x6UTI5dWJtVmpkR1ZrSUQwZ1ptRnNjMlU3WEc0Z0lDQWdJQ0FnSUdGM1lXbDBJR2x1ZG05clpXRmliR1ZVY21GdWMzQnZjblF1WkdselkyOXVibVZqZENncE8xeHVJQ0FnSUNBZ2ZWeHVJQ0FnSUgwZ09pQjdmU3hjYmlBZ0lDQmhjM2x1WXlCelpXNWtLR1JoZEdFcElIdGNiaUFnSUNBZ0lHbG1JQ2doYVc1MmIydGxZV0pzWlZSeVlXNXpjRzl5ZEM1elpXNWtLU0J5WlhSMWNtNDdYRzRnSUNBZ0lDQnBaaUFvSVdselEyOXVibVZqZEdWa0tTQjdYRzRnSUNBZ0lDQWdJR2xtSUNoamIyNXVaV04wYVc1blVISnZiV2x6WlNrZ2UxeHVJQ0FnSUNBZ0lDQWdJR0YzWVdsMElHTnZibTVsWTNScGJtZFFjbTl0YVhObE8xeHVJQ0FnSUNBZ0lDQjlJR1ZzYzJVZ2UxeHVJQ0FnSUNBZ0lDQWdJSFJvY205M0lHNWxkeUJGY25KdmNpaGNJbk5sYm1RZ2QyRnpJR05oYkd4bFpDQmlaV1p2Y21VZ1kyOXVibVZqZEZ3aUtUdGNiaUFnSUNBZ0lDQWdmVnh1SUNBZ0lDQWdmVnh1SUNBZ0lDQWdZWGRoYVhRZ2FXNTJiMnRsWVdKc1pWUnlZVzV6Y0c5eWRDNXpaVzVrS0dSaGRHRXBPMXh1SUNBZ0lIMHNYRzRnSUNBZ1lYTjVibU1nYVc1MmIydGxLRzVoYldVc0lHUmhkR0VwSUh0Y2JpQWdJQ0FnSUdsbUlDZ2hhWE5EYjI1dVpXTjBaV1FwSUh0Y2JpQWdJQ0FnSUNBZ2FXWWdLR052Ym01bFkzUnBibWRRY205dGFYTmxLU0I3WEc0Z0lDQWdJQ0FnSUNBZ1lYZGhhWFFnWTI5dWJtVmpkR2x1WjFCeWIyMXBjMlU3WEc0Z0lDQWdJQ0FnSUgwZ1pXeHpaU0I3WEc0Z0lDQWdJQ0FnSUNBZ2RHaHliM2NnYm1WM0lFVnljbTl5S0Z3aWFXNTJiMnRsSUhkaGN5QmpZV3hzWldRZ1ltVm1iM0psSUdOdmJtNWxZM1JjSWlrN1hHNGdJQ0FnSUNBZ0lIMWNiaUFnSUNBZ0lIMWNiaUFnSUNBZ0lISmxkSFZ5YmlCcGJuWnZhMlZoWW14bFZISmhibk53YjNKMExtbHVkbTlyWlNodVlXMWxMQ0JrWVhSaEtUdGNiaUFnSUNCOVhHNGdJSDA3WEc1OU8xeHVZMjl1YzNRZ1kzSmxZWFJsVjJWaVUyOWphMlYwVFc5a2RXeGxVblZ1Ym1WeVZISmhibk53YjNKMElEMGdLRzl3ZEdsdmJuTXBJRDArSUh0Y2JpQWdZMjl1YzNRZ2NHbHVaMGx1ZEdWeWRtRnNJRDBnYjNCMGFXOXVjeTV3YVc1blNXNTBaWEoyWVd3Z1B6OGdNMlUwTzF4dUlDQnNaWFFnZDNNN1hHNGdJR3hsZENCd2FXNW5TVzUwWlhKMllXeEpaRHRjYmlBZ2NtVjBkWEp1SUh0Y2JpQWdJQ0JoYzNsdVl5QmpiMjV1WldOMEtIc2diMjVOWlhOellXZGxMQ0J2YmtScGMyTnZibTVsWTNScGIyNGdmU2tnZTF4dUlDQWdJQ0FnWTI5dWMzUWdjMjlqYTJWMElEMGdiM0IwYVc5dWN5NWpjbVZoZEdWRGIyNXVaV04wYVc5dUtDazdYRzRnSUNBZ0lDQnpiMk5yWlhRdVlXUmtSWFpsYm5STWFYTjBaVzVsY2loY0ltMWxjM05oWjJWY0lpd2dZWE41Ym1NZ0tIc2daR0YwWVNCOUtTQTlQaUI3WEc0Z0lDQWdJQ0FnSUc5dVRXVnpjMkZuWlNoS1UwOU9MbkJoY25ObEtHUmhkR0VwS1R0Y2JpQWdJQ0FnSUgwcE8xeHVJQ0FnSUNBZ2JHVjBJR2x6VDNCbGJtVmtJRDBnYzI5amEyVjBMbkpsWVdSNVUzUmhkR1VnUFQwOUlITnZZMnRsZEM1UFVFVk9PMXh1SUNBZ0lDQWdhV1lnS0NGcGMwOXdaVzVsWkNrZ2UxeHVJQ0FnSUNBZ0lDQmhkMkZwZENCdVpYY2dVSEp2YldselpTZ29jbVZ6YjJ4MlpTd2djbVZxWldOMEtTQTlQaUI3WEc0Z0lDQWdJQ0FnSUNBZ2MyOWphMlYwTG1Ga1pFVjJaVzUwVEdsemRHVnVaWElvWEc0Z0lDQWdJQ0FnSUNBZ0lDQmNJbTl3Wlc1Y0lpeGNiaUFnSUNBZ0lDQWdJQ0FnSUNncElEMCtJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdhWE5QY0dWdVpXUWdQU0IwY25WbE8xeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNCeVpYTnZiSFpsS0NrN1hHNGdJQ0FnSUNBZ0lDQWdJQ0I5TEZ4dUlDQWdJQ0FnSUNBZ0lDQWdleUJ2Ym1ObE9pQjBjblZsSUgxY2JpQWdJQ0FnSUNBZ0lDQXBPMXh1SUNBZ0lDQWdJQ0FnSUhOdlkydGxkQzVoWkdSRmRtVnVkRXhwYzNSbGJtVnlLRndpWTJ4dmMyVmNJaXdnWVhONWJtTWdLQ2tnUFQ0Z2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnYVdZZ0tDRnBjMDl3Wlc1bFpDa2dlMXh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQnlaV3BsWTNRb2JtVjNJRVZ5Y205eUtGd2lWMlZpVTI5amEyVjBJR05zYjNObFpDQjNhWFJvYjNWMElHOXdaVzVsWkM1Y0lpa3BPMXh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQnlaWFIxY200N1hHNGdJQ0FnSUNBZ0lDQWdJQ0I5WEc0Z0lDQWdJQ0FnSUNBZ0lDQnZiazFsYzNOaFoyVW9lMXh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQjBlWEJsT2lCY0ltTjFjM1J2YlZ3aUxGeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNCbGRtVnVkRG9nWENKMmFYUmxPbmR6T21ScGMyTnZibTVsWTNSY0lpeGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ1pHRjBZVG9nZXlCM1pXSlRiMk5yWlhRNklITnZZMnRsZENCOVhHNGdJQ0FnSUNBZ0lDQWdJQ0I5S1R0Y2JpQWdJQ0FnSUNBZ0lDQWdJRzl1UkdselkyOXVibVZqZEdsdmJpZ3BPMXh1SUNBZ0lDQWdJQ0FnSUgwcE8xeHVJQ0FnSUNBZ0lDQjlLVHRjYmlBZ0lDQWdJSDFjYmlBZ0lDQWdJRzl1VFdWemMyRm5aU2g3WEc0Z0lDQWdJQ0FnSUhSNWNHVTZJRndpWTNWemRHOXRYQ0lzWEc0Z0lDQWdJQ0FnSUdWMlpXNTBPaUJjSW5acGRHVTZkM002WTI5dWJtVmpkRndpTEZ4dUlDQWdJQ0FnSUNCa1lYUmhPaUI3SUhkbFlsTnZZMnRsZERvZ2MyOWphMlYwSUgxY2JpQWdJQ0FnSUgwcE8xeHVJQ0FnSUNBZ2QzTWdQU0J6YjJOclpYUTdYRzRnSUNBZ0lDQndhVzVuU1c1MFpYSjJZV3hKWkNBOUlITmxkRWx1ZEdWeWRtRnNLQ2dwSUQwK0lIdGNiaUFnSUNBZ0lDQWdhV1lnS0hOdlkydGxkQzV5WldGa2VWTjBZWFJsSUQwOVBTQnpiMk5yWlhRdVQxQkZUaWtnZTF4dUlDQWdJQ0FnSUNBZ0lITnZZMnRsZEM1elpXNWtLRXBUVDA0dWMzUnlhVzVuYVdaNUtIc2dkSGx3WlRvZ1hDSndhVzVuWENJZ2ZTa3BPMXh1SUNBZ0lDQWdJQ0I5WEc0Z0lDQWdJQ0I5TENCd2FXNW5TVzUwWlhKMllXd3BPMXh1SUNBZ0lIMHNYRzRnSUNBZ1pHbHpZMjl1Ym1WamRDZ3BJSHRjYmlBZ0lDQWdJR05zWldGeVNXNTBaWEoyWVd3b2NHbHVaMGx1ZEdWeWRtRnNTV1FwTzF4dUlDQWdJQ0FnZDNNL0xtTnNiM05sS0NrN1hHNGdJQ0FnZlN4Y2JpQWdJQ0J6Wlc1a0tHUmhkR0VwSUh0Y2JpQWdJQ0FnSUhkekxuTmxibVFvU2xOUFRpNXpkSEpwYm1kcFpua29aR0YwWVNrcE8xeHVJQ0FnSUgxY2JpQWdmVHRjYm4wN1hHNWNibVoxYm1OMGFXOXVJR055WldGMFpVaE5Va2hoYm1Sc1pYSW9hR0Z1Wkd4bGNpa2dlMXh1SUNCamIyNXpkQ0J4ZFdWMVpTQTlJRzVsZHlCUmRXVjFaU2dwTzF4dUlDQnlaWFIxY200Z0tIQmhlV3h2WVdRcElEMCtJSEYxWlhWbExtVnVjWFZsZFdVb0tDa2dQVDRnYUdGdVpHeGxjaWh3WVhsc2IyRmtLU2s3WEc1OVhHNWpiR0Z6Y3lCUmRXVjFaU0I3WEc0Z0lHTnZibk4wY25WamRHOXlLQ2tnZTF4dUlDQWdJSFJvYVhNdWNYVmxkV1VnUFNCYlhUdGNiaUFnSUNCMGFHbHpMbkJsYm1ScGJtY2dQU0JtWVd4elpUdGNiaUFnZlZ4dUlDQmxibkYxWlhWbEtIQnliMjFwYzJVcElIdGNiaUFnSUNCeVpYUjFjbTRnYm1WM0lGQnliMjFwYzJVb0tISmxjMjlzZG1Vc0lISmxhbVZqZENrZ1BUNGdlMXh1SUNBZ0lDQWdkR2hwY3k1eGRXVjFaUzV3ZFhOb0tIdGNiaUFnSUNBZ0lDQWdjSEp2YldselpTeGNiaUFnSUNBZ0lDQWdjbVZ6YjJ4MlpTeGNiaUFnSUNBZ0lDQWdjbVZxWldOMFhHNGdJQ0FnSUNCOUtUdGNiaUFnSUNBZ0lIUm9hWE11WkdWeGRXVjFaU2dwTzF4dUlDQWdJSDBwTzF4dUlDQjlYRzRnSUdSbGNYVmxkV1VvS1NCN1hHNGdJQ0FnYVdZZ0tIUm9hWE11Y0dWdVpHbHVaeWtnZTF4dUlDQWdJQ0FnY21WMGRYSnVJR1poYkhObE8xeHVJQ0FnSUgxY2JpQWdJQ0JqYjI1emRDQnBkR1Z0SUQwZ2RHaHBjeTV4ZFdWMVpTNXphR2xtZENncE8xeHVJQ0FnSUdsbUlDZ2hhWFJsYlNrZ2UxeHVJQ0FnSUNBZ2NtVjBkWEp1SUdaaGJITmxPMXh1SUNBZ0lIMWNiaUFnSUNCMGFHbHpMbkJsYm1ScGJtY2dQU0IwY25WbE8xeHVJQ0FnSUdsMFpXMHVjSEp2YldselpTZ3BMblJvWlc0b2FYUmxiUzV5WlhOdmJIWmxLUzVqWVhSamFDaHBkR1Z0TG5KbGFtVmpkQ2t1Wm1sdVlXeHNlU2dvS1NBOVBpQjdYRzRnSUNBZ0lDQjBhR2x6TG5CbGJtUnBibWNnUFNCbVlXeHpaVHRjYmlBZ0lDQWdJSFJvYVhNdVpHVnhkV1YxWlNncE8xeHVJQ0FnSUgwcE8xeHVJQ0FnSUhKbGRIVnliaUIwY25WbE8xeHVJQ0I5WEc1OVhHNWNibU52Ym5OMElHaHRja052Ym1acFowNWhiV1VnUFNCY0luWnBkR1V1WTI5dVptbG5MblJ6WENJN1hHNWpiMjV6ZENCaVlYTmxKREVnUFNCY0lpOWNJaUI4ZkNCY0lpOWNJanRjYm1aMWJtTjBhVzl1SUdnb1pTd2dZWFIwY25NZ1BTQjdmU3dnTGk0dVkyaHBiR1J5Wlc0cElIdGNiaUFnWTI5dWMzUWdaV3hsYlNBOUlHUnZZM1Z0Wlc1MExtTnlaV0YwWlVWc1pXMWxiblFvWlNrN1hHNGdJR1p2Y2lBb1kyOXVjM1FnVzJzc0lIWmRJRzltSUU5aWFtVmpkQzVsYm5SeWFXVnpLR0YwZEhKektTa2dlMXh1SUNBZ0lHVnNaVzB1YzJWMFFYUjBjbWxpZFhSbEtHc3NJSFlwTzF4dUlDQjlYRzRnSUdWc1pXMHVZWEJ3Wlc1a0tDNHVMbU5vYVd4a2NtVnVLVHRjYmlBZ2NtVjBkWEp1SUdWc1pXMDdYRzU5WEc1amIyNXpkQ0IwWlcxd2JHRjBaVk4wZVd4bElEMGdLRnh1SUNBdkttTnpjeW92WEc0Z0lHQmNianBvYjNOMElIdGNiaUFnY0c5emFYUnBiMjQ2SUdacGVHVmtPMXh1SUNCMGIzQTZJREE3WEc0Z0lHeGxablE2SURBN1hHNGdJSGRwWkhSb09pQXhNREFsTzF4dUlDQm9aV2xuYUhRNklERXdNQ1U3WEc0Z0lIb3RhVzVrWlhnNklEazVPVGs1TzF4dUlDQXRMVzF2Ym05emNHRmpaVG9nSjFOR1RXOXVieTFTWldkMWJHRnlKeXdnUTI5dWMyOXNZWE1zWEc0Z0lDZE1hV0psY21GMGFXOXVJRTF2Ym04bkxDQk5aVzVzYnl3Z1EyOTFjbWxsY2l3Z2JXOXViM053WVdObE8xeHVJQ0F0TFhKbFpEb2dJMlptTlRVMU5UdGNiaUFnTFMxNVpXeHNiM2M2SUNObE1tRmhOVE03WEc0Z0lDMHRjSFZ5Y0d4bE9pQWpZMlpoTkdabU8xeHVJQ0F0TFdONVlXNDZJQ015WkdRNVpHRTdYRzRnSUMwdFpHbHRPaUFqWXpsak9XTTVPMXh1WEc0Z0lDMHRkMmx1Wkc5M0xXSmhZMnRuY205MWJtUTZJQ014T0RFNE1UZzdYRzRnSUMwdGQybHVaRzkzTFdOdmJHOXlPaUFqWkRoa09HUTRPMXh1ZlZ4dVhHNHVZbUZqYTJSeWIzQWdlMXh1SUNCd2IzTnBkR2x2YmpvZ1ptbDRaV1E3WEc0Z0lIb3RhVzVrWlhnNklEazVPVGs1TzF4dUlDQjBiM0E2SURBN1hHNGdJR3hsWm5RNklEQTdYRzRnSUhkcFpIUm9PaUF4TURBbE8xeHVJQ0JvWldsbmFIUTZJREV3TUNVN1hHNGdJRzkyWlhKbWJHOTNMWGs2SUhOamNtOXNiRHRjYmlBZ2JXRnlaMmx1T2lBd08xeHVJQ0JpWVdOclozSnZkVzVrT2lCeVoySmhLREFzSURBc0lEQXNJREF1TmpZcE8xeHVmVnh1WEc0dWQybHVaRzkzSUh0Y2JpQWdabTl1ZEMxbVlXMXBiSGs2SUhaaGNpZ3RMVzF2Ym05emNHRmpaU2s3WEc0Z0lHeHBibVV0YUdWcFoyaDBPaUF4TGpVN1hHNGdJRzFoZUMxM2FXUjBhRG9nT0RCMmR6dGNiaUFnWTI5c2IzSTZJSFpoY2lndExYZHBibVJ2ZHkxamIyeHZjaWs3WEc0Z0lHSnZlQzF6YVhwcGJtYzZJR0p2Y21SbGNpMWliM2c3WEc0Z0lHMWhjbWRwYmpvZ016QndlQ0JoZFhSdk8xeHVJQ0J3WVdSa2FXNW5PaUF5TGpWMmFDQTBkbmM3WEc0Z0lIQnZjMmwwYVc5dU9pQnlaV3hoZEdsMlpUdGNiaUFnWW1GamEyZHliM1Z1WkRvZ2RtRnlLQzB0ZDJsdVpHOTNMV0poWTJ0bmNtOTFibVFwTzF4dUlDQmliM0prWlhJdGNtRmthWFZ6T2lBMmNIZ2dObkI0SURod2VDQTRjSGc3WEc0Z0lHSnZlQzF6YUdGa2IzYzZJREFnTVRsd2VDQXpPSEI0SUhKblltRW9NQ3d3TERBc01DNHpNQ2tzSURBZ01UVndlQ0F4TW5CNElISm5ZbUVvTUN3d0xEQXNNQzR5TWlrN1hHNGdJRzkyWlhKbWJHOTNPaUJvYVdSa1pXNDdYRzRnSUdKdmNtUmxjaTEwYjNBNklEaHdlQ0J6YjJ4cFpDQjJZWElvTFMxeVpXUXBPMXh1SUNCa2FYSmxZM1JwYjI0NklHeDBjanRjYmlBZ2RHVjRkQzFoYkdsbmJqb2diR1ZtZER0Y2JuMWNibHh1Y0hKbElIdGNiaUFnWm05dWRDMW1ZVzFwYkhrNklIWmhjaWd0TFcxdmJtOXpjR0ZqWlNrN1hHNGdJR1p2Ym5RdGMybDZaVG9nTVRad2VEdGNiaUFnYldGeVoybHVMWFJ2Y0RvZ01EdGNiaUFnYldGeVoybHVMV0p2ZEhSdmJUb2dNV1Z0TzF4dUlDQnZkbVZ5Wm14dmR5MTRPaUJ6WTNKdmJHdzdYRzRnSUhOamNtOXNiR0poY2kxM2FXUjBhRG9nYm05dVpUdGNibjFjYmx4dWNISmxPam90ZDJWaWEybDBMWE5qY205c2JHSmhjaUI3WEc0Z0lHUnBjM0JzWVhrNklHNXZibVU3WEc1OVhHNWNibkJ5WlM1bWNtRnRaVG82TFhkbFltdHBkQzF6WTNKdmJHeGlZWElnZTF4dUlDQmthWE53YkdGNU9pQmliRzlqYXp0Y2JpQWdhR1ZwWjJoME9pQTFjSGc3WEc1OVhHNWNibkJ5WlM1bWNtRnRaVG82TFhkbFltdHBkQzF6WTNKdmJHeGlZWEl0ZEdoMWJXSWdlMXh1SUNCaVlXTnJaM0p2ZFc1a09pQWpPVGs1TzF4dUlDQmliM0prWlhJdGNtRmthWFZ6T2lBMWNIZzdYRzU5WEc1Y2JuQnlaUzVtY21GdFpTQjdYRzRnSUhOamNtOXNiR0poY2kxM2FXUjBhRG9nZEdocGJqdGNibjFjYmx4dUxtMWxjM05oWjJVZ2UxeHVJQ0JzYVc1bExXaGxhV2RvZERvZ01TNHpPMXh1SUNCbWIyNTBMWGRsYVdkb2REb2dOakF3TzF4dUlDQjNhR2wwWlMxemNHRmpaVG9nY0hKbExYZHlZWEE3WEc1OVhHNWNiaTV0WlhOellXZGxMV0p2WkhrZ2UxeHVJQ0JqYjJ4dmNqb2dkbUZ5S0MwdGNtVmtLVHRjYm4xY2JseHVMbkJzZFdkcGJpQjdYRzRnSUdOdmJHOXlPaUIyWVhJb0xTMXdkWEp3YkdVcE8xeHVmVnh1WEc0dVptbHNaU0I3WEc0Z0lHTnZiRzl5T2lCMllYSW9MUzFqZVdGdUtUdGNiaUFnYldGeVoybHVMV0p2ZEhSdmJUb2dNRHRjYmlBZ2QyaHBkR1V0YzNCaFkyVTZJSEJ5WlMxM2NtRndPMXh1SUNCM2IzSmtMV0p5WldGck9pQmljbVZoYXkxaGJHdzdYRzU5WEc1Y2JpNW1jbUZ0WlNCN1hHNGdJR052Ykc5eU9pQjJZWElvTFMxNVpXeHNiM2NwTzF4dWZWeHVYRzR1YzNSaFkyc2dlMXh1SUNCbWIyNTBMWE5wZW1VNklERXpjSGc3WEc0Z0lHTnZiRzl5T2lCMllYSW9MUzFrYVcwcE8xeHVmVnh1WEc0dWRHbHdJSHRjYmlBZ1ptOXVkQzF6YVhwbE9pQXhNM0I0TzF4dUlDQmpiMnh2Y2pvZ0l6azVPVHRjYmlBZ1ltOXlaR1Z5TFhSdmNEb2dNWEI0SUdSdmRIUmxaQ0FqT1RrNU8xeHVJQ0J3WVdSa2FXNW5MWFJ2Y0RvZ01UTndlRHRjYmlBZ2JHbHVaUzFvWldsbmFIUTZJREV1T0R0Y2JuMWNibHh1WTI5a1pTQjdYRzRnSUdadmJuUXRjMmw2WlRvZ01UTndlRHRjYmlBZ1ptOXVkQzFtWVcxcGJIazZJSFpoY2lndExXMXZibTl6Y0dGalpTazdYRzRnSUdOdmJHOXlPaUIyWVhJb0xTMTVaV3hzYjNjcE8xeHVmVnh1WEc0dVptbHNaUzFzYVc1cklIdGNiaUFnZEdWNGRDMWtaV052Y21GMGFXOXVPaUIxYm1SbGNteHBibVU3WEc0Z0lHTjFjbk52Y2pvZ2NHOXBiblJsY2p0Y2JuMWNibHh1YTJKa0lIdGNiaUFnYkdsdVpTMW9aV2xuYUhRNklERXVOVHRjYmlBZ1ptOXVkQzFtWVcxcGJIazZJSFZwTFcxdmJtOXpjR0ZqWlN3Z1RXVnViRzhzSUUxdmJtRmpieXdnUTI5dWMyOXNZWE1zSUZ3aVRHbGlaWEpoZEdsdmJpQk5iMjV2WENJc0lGd2lRMjkxY21sbGNpQk9aWGRjSWl3Z2JXOXViM053WVdObE8xeHVJQ0JtYjI1MExYTnBlbVU2SURBdU56VnlaVzA3WEc0Z0lHWnZiblF0ZDJWcFoyaDBPaUEzTURBN1hHNGdJR0poWTJ0bmNtOTFibVF0WTI5c2IzSTZJSEpuWWlnek9Dd2dOREFzSURRMEtUdGNiaUFnWTI5c2IzSTZJSEpuWWlneE5qWXNJREUyTnl3Z01UY3hLVHRjYmlBZ2NHRmtaR2x1WnpvZ01DNHhOWEpsYlNBd0xqTnlaVzA3WEc0Z0lHSnZjbVJsY2kxeVlXUnBkWE02SURBdU1qVnlaVzA3WEc0Z0lHSnZjbVJsY2kxM2FXUjBhRG9nTUM0d05qSTFjbVZ0SURBdU1EWXlOWEpsYlNBd0xqRTROelZ5WlcwN1hHNGdJR0p2Y21SbGNpMXpkSGxzWlRvZ2MyOXNhV1E3WEc0Z0lHSnZjbVJsY2kxamIyeHZjam9nY21kaUtEVTBMQ0ExTnl3Z05qUXBPMXh1SUNCaWIzSmtaWEl0YVcxaFoyVTZJR2x1YVhScFlXdzdYRzU5WEc1Z1hHNHBPMXh1WTI5dWMzUWdZM0psWVhSbFZHVnRjR3hoZEdVZ1BTQW9LU0E5UGlCb0tGeHVJQ0JjSW1ScGRsd2lMRnh1SUNCN0lHTnNZWE56T2lCY0ltSmhZMnRrY205d1hDSXNJSEJoY25RNklGd2lZbUZqYTJSeWIzQmNJaUI5TEZ4dUlDQm9LRnh1SUNBZ0lGd2laR2wyWENJc1hHNGdJQ0FnZXlCamJHRnpjem9nWENKM2FXNWtiM2RjSWl3Z2NHRnlkRG9nWENKM2FXNWtiM2RjSWlCOUxGeHVJQ0FnSUdnb1hHNGdJQ0FnSUNCY0luQnlaVndpTEZ4dUlDQWdJQ0FnZXlCamJHRnpjem9nWENKdFpYTnpZV2RsWENJc0lIQmhjblE2SUZ3aWJXVnpjMkZuWlZ3aUlIMHNYRzRnSUNBZ0lDQm9LRndpYzNCaGJsd2lMQ0I3SUdOc1lYTnpPaUJjSW5Cc2RXZHBibHdpTENCd1lYSjBPaUJjSW5Cc2RXZHBibHdpSUgwcExGeHVJQ0FnSUNBZ2FDaGNJbk53WVc1Y0lpd2dleUJqYkdGemN6b2dYQ0p0WlhOellXZGxMV0p2WkhsY0lpd2djR0Z5ZERvZ1hDSnRaWE56WVdkbExXSnZaSGxjSWlCOUtWeHVJQ0FnSUNrc1hHNGdJQ0FnYUNoY0luQnlaVndpTENCN0lHTnNZWE56T2lCY0ltWnBiR1ZjSWl3Z2NHRnlkRG9nWENKbWFXeGxYQ0lnZlNrc1hHNGdJQ0FnYUNoY0luQnlaVndpTENCN0lHTnNZWE56T2lCY0ltWnlZVzFsWENJc0lIQmhjblE2SUZ3aVpuSmhiV1ZjSWlCOUtTeGNiaUFnSUNCb0tGd2ljSEpsWENJc0lIc2dZMnhoYzNNNklGd2ljM1JoWTJ0Y0lpd2djR0Z5ZERvZ1hDSnpkR0ZqYTF3aUlIMHBMRnh1SUNBZ0lHZ29YRzRnSUNBZ0lDQmNJbVJwZGx3aUxGeHVJQ0FnSUNBZ2V5QmpiR0Z6Y3pvZ1hDSjBhWEJjSWl3Z2NHRnlkRG9nWENKMGFYQmNJaUI5TEZ4dUlDQWdJQ0FnWENKRGJHbGpheUJ2ZFhSemFXUmxMQ0J3Y21WemN5QmNJaXhjYmlBZ0lDQWdJR2dvWENKclltUmNJaXdnZTMwc0lGd2lSWE5qWENJcExGeHVJQ0FnSUNBZ1hDSWdhMlY1TENCdmNpQm1hWGdnZEdobElHTnZaR1VnZEc4Z1pHbHpiV2x6Y3k1Y0lpeGNiaUFnSUNBZ0lHZ29YQ0ppY2x3aUtTeGNiaUFnSUNBZ0lGd2lXVzkxSUdOaGJpQmhiSE52SUdScGMyRmliR1VnZEdocGN5QnZkbVZ5YkdGNUlHSjVJSE5sZEhScGJtY2dYQ0lzWEc0Z0lDQWdJQ0JvS0Z3aVkyOWtaVndpTENCN0lIQmhjblE2SUZ3aVkyOXVabWxuTFc5d2RHbHZiaTF1WVcxbFhDSWdmU3dnWENKelpYSjJaWEl1YUcxeUxtOTJaWEpzWVhsY0lpa3NYRzRnSUNBZ0lDQmNJaUIwYnlCY0lpeGNiaUFnSUNBZ0lHZ29YQ0pqYjJSbFhDSXNJSHNnY0dGeWREb2dYQ0pqYjI1bWFXY3RiM0IwYVc5dUxYWmhiSFZsWENJZ2ZTd2dYQ0ptWVd4elpWd2lLU3hjYmlBZ0lDQWdJRndpSUdsdUlGd2lMRnh1SUNBZ0lDQWdhQ2hjSW1OdlpHVmNJaXdnZXlCd1lYSjBPaUJjSW1OdmJtWnBaeTFtYVd4bExXNWhiV1ZjSWlCOUxDQm9iWEpEYjI1bWFXZE9ZVzFsS1N4Y2JpQWdJQ0FnSUZ3aUxsd2lYRzRnSUNBZ0tWeHVJQ0FwTEZ4dUlDQm9LRndpYzNSNWJHVmNJaXdnZTMwc0lIUmxiWEJzWVhSbFUzUjViR1VwWEc0cE8xeHVZMjl1YzNRZ1ptbHNaVkpGSUQwZ0x5Zy9PbHRoTFhwQkxWcGRPbHhjWEZ4OFhGd3ZLUzRxUHpwY1hHUXJPbHhjWkNzdlp6dGNibU52Ym5OMElHTnZaR1ZtY21GdFpWSkZJRDBnTDE0b1B6bytQMXhjY3lwY1hHUXJYRnh6SzF4Y2ZDNHFmRnhjY3l0Y1hIeGNYSE1xWEZ4ZUxpb3BYRnh5UDF4Y2JpOW5iVHRjYm1OdmJuTjBJSHNnU0ZSTlRFVnNaVzFsYm5RZ1BTQmpiR0Z6Y3lCN1hHNTlJSDBnUFNCbmJHOWlZV3hVYUdsek8xeHVZMnhoYzNNZ1JYSnliM0pQZG1WeWJHRjVJR1Y0ZEdWdVpITWdTRlJOVEVWc1pXMWxiblFnZTF4dUlDQmpiMjV6ZEhKMVkzUnZjaWhsY25Jc0lHeHBibXR6SUQwZ2RISjFaU2tnZTF4dUlDQWdJSE4xY0dWeUtDazdYRzRnSUNBZ2RHaHBjeTV5YjI5MElEMGdkR2hwY3k1aGRIUmhZMmhUYUdGa2IzY29leUJ0YjJSbE9pQmNJbTl3Wlc1Y0lpQjlLVHRjYmlBZ0lDQjBhR2x6TG5KdmIzUXVZWEJ3Wlc1a1EyaHBiR1FvWTNKbFlYUmxWR1Z0Y0d4aGRHVW9LU2s3WEc0Z0lDQWdZMjlrWldaeVlXMWxVa1V1YkdGemRFbHVaR1Y0SUQwZ01EdGNiaUFnSUNCamIyNXpkQ0JvWVhOR2NtRnRaU0E5SUdWeWNpNW1jbUZ0WlNBbUppQmpiMlJsWm5KaGJXVlNSUzUwWlhOMEtHVnljaTVtY21GdFpTazdYRzRnSUNBZ1kyOXVjM1FnYldWemMyRm5aU0E5SUdoaGMwWnlZVzFsSUQ4Z1pYSnlMbTFsYzNOaFoyVXVjbVZ3YkdGalpTaGpiMlJsWm5KaGJXVlNSU3dnWENKY0lpa2dPaUJsY25JdWJXVnpjMkZuWlR0Y2JpQWdJQ0JwWmlBb1pYSnlMbkJzZFdkcGJpa2dlMXh1SUNBZ0lDQWdkR2hwY3k1MFpYaDBLRndpTG5Cc2RXZHBibHdpTENCZ1czQnNkV2RwYmpva2UyVnljaTV3YkhWbmFXNTlYU0JnS1R0Y2JpQWdJQ0I5WEc0Z0lDQWdkR2hwY3k1MFpYaDBLRndpTG0xbGMzTmhaMlV0WW05a2VWd2lMQ0J0WlhOellXZGxMblJ5YVcwb0tTazdYRzRnSUNBZ1kyOXVjM1FnVzJacGJHVmRJRDBnS0dWeWNpNXNiMk0vTG1acGJHVWdmSHdnWlhKeUxtbGtJSHg4SUZ3aWRXNXJibTkzYmlCbWFXeGxYQ0lwTG5Od2JHbDBLR0EvWUNrN1hHNGdJQ0FnYVdZZ0tHVnljaTVzYjJNcElIdGNiaUFnSUNBZ0lIUm9hWE11ZEdWNGRDaGNJaTVtYVd4bFhDSXNJR0FrZTJacGJHVjlPaVI3WlhKeUxteHZZeTVzYVc1bGZUb2tlMlZ5Y2k1c2IyTXVZMjlzZFcxdWZXQXNJR3hwYm10ektUdGNiaUFnSUNCOUlHVnNjMlVnYVdZZ0tHVnljaTVwWkNrZ2UxeHVJQ0FnSUNBZ2RHaHBjeTUwWlhoMEtGd2lMbVpwYkdWY0lpd2dabWxzWlNrN1hHNGdJQ0FnZlZ4dUlDQWdJR2xtSUNob1lYTkdjbUZ0WlNrZ2UxeHVJQ0FnSUNBZ2RHaHBjeTUwWlhoMEtGd2lMbVp5WVcxbFhDSXNJR1Z5Y2k1bWNtRnRaUzUwY21sdEtDa3BPMXh1SUNBZ0lIMWNiaUFnSUNCMGFHbHpMblJsZUhRb1hDSXVjM1JoWTJ0Y0lpd2daWEp5TG5OMFlXTnJMQ0JzYVc1cmN5azdYRzRnSUNBZ2RHaHBjeTV5YjI5MExuRjFaWEo1VTJWc1pXTjBiM0lvWENJdWQybHVaRzkzWENJcExtRmtaRVYyWlc1MFRHbHpkR1Z1WlhJb1hDSmpiR2xqYTF3aUxDQW9aU2tnUFQ0Z2UxeHVJQ0FnSUNBZ1pTNXpkRzl3VUhKdmNHRm5ZWFJwYjI0b0tUdGNiaUFnSUNCOUtUdGNiaUFnSUNCMGFHbHpMbUZrWkVWMlpXNTBUR2x6ZEdWdVpYSW9YQ0pqYkdsamExd2lMQ0FvS1NBOVBpQjdYRzRnSUNBZ0lDQjBhR2x6TG1Oc2IzTmxLQ2s3WEc0Z0lDQWdmU2s3WEc0Z0lDQWdkR2hwY3k1amJHOXpaVTl1UlhOaklEMGdLR1VwSUQwK0lIdGNiaUFnSUNBZ0lHbG1JQ2hsTG10bGVTQTlQVDBnWENKRmMyTmhjR1ZjSWlCOGZDQmxMbU52WkdVZ1BUMDlJRndpUlhOallYQmxYQ0lwSUh0Y2JpQWdJQ0FnSUNBZ2RHaHBjeTVqYkc5elpTZ3BPMXh1SUNBZ0lDQWdmVnh1SUNBZ0lIMDdYRzRnSUNBZ1pHOWpkVzFsYm5RdVlXUmtSWFpsYm5STWFYTjBaVzVsY2loY0ltdGxlV1J2ZDI1Y0lpd2dkR2hwY3k1amJHOXpaVTl1UlhOaktUdGNiaUFnZlZ4dUlDQjBaWGgwS0hObGJHVmpkRzl5TENCMFpYaDBMQ0JzYVc1clJtbHNaWE1nUFNCbVlXeHpaU2tnZTF4dUlDQWdJR052Ym5OMElHVnNJRDBnZEdocGN5NXliMjkwTG5GMVpYSjVVMlZzWldOMGIzSW9jMlZzWldOMGIzSXBPMXh1SUNBZ0lHbG1JQ2doYkdsdWEwWnBiR1Z6S1NCN1hHNGdJQ0FnSUNCbGJDNTBaWGgwUTI5dWRHVnVkQ0E5SUhSbGVIUTdYRzRnSUNBZ2ZTQmxiSE5sSUh0Y2JpQWdJQ0FnSUd4bGRDQmpkWEpKYm1SbGVDQTlJREE3WEc0Z0lDQWdJQ0JzWlhRZ2JXRjBZMmc3WEc0Z0lDQWdJQ0JtYVd4bFVrVXViR0Z6ZEVsdVpHVjRJRDBnTUR0Y2JpQWdJQ0FnSUhkb2FXeGxJQ2h0WVhSamFDQTlJR1pwYkdWU1JTNWxlR1ZqS0hSbGVIUXBLU0I3WEc0Z0lDQWdJQ0FnSUdOdmJuTjBJSHNnTURvZ1ptbHNaU3dnYVc1a1pYZ2dmU0E5SUcxaGRHTm9PMXh1SUNBZ0lDQWdJQ0JqYjI1emRDQm1jbUZuSUQwZ2RHVjRkQzV6YkdsalpTaGpkWEpKYm1SbGVDd2dhVzVrWlhncE8xeHVJQ0FnSUNBZ0lDQmxiQzVoY0hCbGJtUkRhR2xzWkNoa2IyTjFiV1Z1ZEM1amNtVmhkR1ZVWlhoMFRtOWtaU2htY21GbktTazdYRzRnSUNBZ0lDQWdJR052Ym5OMElHeHBibXNnUFNCa2IyTjFiV1Z1ZEM1amNtVmhkR1ZGYkdWdFpXNTBLRndpWVZ3aUtUdGNiaUFnSUNBZ0lDQWdiR2x1YXk1MFpYaDBRMjl1ZEdWdWRDQTlJR1pwYkdVN1hHNGdJQ0FnSUNBZ0lHeHBibXN1WTJ4aGMzTk9ZVzFsSUQwZ1hDSm1hV3hsTFd4cGJtdGNJanRjYmlBZ0lDQWdJQ0FnYkdsdWF5NXZibU5zYVdOcklEMGdLQ2tnUFQ0Z2UxeHVJQ0FnSUNBZ0lDQWdJR1psZEdOb0tGeHVJQ0FnSUNBZ0lDQWdJQ0FnYm1WM0lGVlNUQ2hjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdZQ1I3WW1GelpTUXhmVjlmYjNCbGJpMXBiaTFsWkdsMGIzSS9abWxzWlQwa2UyVnVZMjlrWlZWU1NVTnZiWEJ2Ym1WdWRDaG1hV3hsS1gxZ0xGeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNCcGJYQnZjblF1YldWMFlTNTFjbXhjYmlBZ0lDQWdJQ0FnSUNBZ0lDbGNiaUFnSUNBZ0lDQWdJQ0FwTzF4dUlDQWdJQ0FnSUNCOU8xeHVJQ0FnSUNBZ0lDQmxiQzVoY0hCbGJtUkRhR2xzWkNoc2FXNXJLVHRjYmlBZ0lDQWdJQ0FnWTNWeVNXNWtaWGdnS3owZ1puSmhaeTVzWlc1bmRHZ2dLeUJtYVd4bExteGxibWQwYUR0Y2JpQWdJQ0FnSUgxY2JpQWdJQ0I5WEc0Z0lIMWNiaUFnWTJ4dmMyVW9LU0I3WEc0Z0lDQWdkR2hwY3k1d1lYSmxiblJPYjJSbFB5NXlaVzF2ZG1WRGFHbHNaQ2gwYUdsektUdGNiaUFnSUNCa2IyTjFiV1Z1ZEM1eVpXMXZkbVZGZG1WdWRFeHBjM1JsYm1WeUtGd2lhMlY1Wkc5M2Jsd2lMQ0IwYUdsekxtTnNiM05sVDI1RmMyTXBPMXh1SUNCOVhHNTlYRzVqYjI1emRDQnZkbVZ5YkdGNVNXUWdQU0JjSW5acGRHVXRaWEp5YjNJdGIzWmxjbXhoZVZ3aU8xeHVZMjl1YzNRZ2V5QmpkWE4wYjIxRmJHVnRaVzUwY3lCOUlEMGdaMnh2WW1Gc1ZHaHBjenRjYm1sbUlDaGpkWE4wYjIxRmJHVnRaVzUwY3lBbUppQWhZM1Z6ZEc5dFJXeGxiV1Z1ZEhNdVoyVjBLRzkyWlhKc1lYbEpaQ2twSUh0Y2JpQWdZM1Z6ZEc5dFJXeGxiV1Z1ZEhNdVpHVm1hVzVsS0c5MlpYSnNZWGxKWkN3Z1JYSnliM0pQZG1WeWJHRjVLVHRjYm4xY2JseHVZMjl1YzI5c1pTNWtaV0oxWnloY0lsdDJhWFJsWFNCamIyNXVaV04wYVc1bkxpNHVYQ0lwTzF4dVkyOXVjM1FnYVcxd2IzSjBUV1YwWVZWeWJDQTlJRzVsZHlCVlVrd29hVzF3YjNKMExtMWxkR0V1ZFhKc0tUdGNibU52Ym5OMElITmxjblpsY2todmMzUWdQU0JjSW14dlkyRnNhRzl6ZERvek1EQXdMMXdpTzF4dVkyOXVjM1FnYzI5amEyVjBVSEp2ZEc5amIyd2dQU0J1ZFd4c0lIeDhJQ2hwYlhCdmNuUk5aWFJoVlhKc0xuQnliM1J2WTI5c0lEMDlQU0JjSW1oMGRIQnpPbHdpSUQ4Z1hDSjNjM05jSWlBNklGd2lkM05jSWlrN1hHNWpiMjV6ZENCb2JYSlFiM0owSUQwZ2JuVnNiRHRjYm1OdmJuTjBJSE52WTJ0bGRFaHZjM1FnUFNCZ0pIdHVkV3hzSUh4OElHbHRjRzl5ZEUxbGRHRlZjbXd1YUc5emRHNWhiV1Y5T2lSN2FHMXlVRzl5ZENCOGZDQnBiWEJ2Y25STlpYUmhWWEpzTG5CdmNuUjlKSHRjSWk5Y0luMWdPMXh1WTI5dWMzUWdaR2x5WldOMFUyOWphMlYwU0c5emRDQTlJRndpYkc5allXeG9iM04wT2pNd01EQXZYQ0k3WEc1amIyNXpkQ0JpWVhObElEMGdYQ0l2WENJZ2ZId2dYQ0l2WENJN1hHNWpiMjV6ZENCb2JYSlVhVzFsYjNWMElEMGdNekF3TURBN1hHNWpiMjV6ZENCM2MxUnZhMlZ1SUQwZ1hDSnNjbTltYTJZME5EbHpkRzljSWp0Y2JtTnZibk4wSUhSeVlXNXpjRzl5ZENBOUlHNXZjbTFoYkdsNlpVMXZaSFZzWlZKMWJtNWxjbFJ5WVc1emNHOXlkQ2hjYmlBZ0tDZ3BJRDArSUh0Y2JpQWdJQ0JzWlhRZ2QzTlVjbUZ1YzNCdmNuUWdQU0JqY21WaGRHVlhaV0pUYjJOclpYUk5iMlIxYkdWU2RXNXVaWEpVY21GdWMzQnZjblFvZTF4dUlDQWdJQ0FnWTNKbFlYUmxRMjl1Ym1WamRHbHZiam9nS0NrZ1BUNGdibVYzSUZkbFlsTnZZMnRsZENoY2JpQWdJQ0FnSUNBZ1lDUjdjMjlqYTJWMFVISnZkRzlqYjJ4OU9pOHZKSHR6YjJOclpYUkliM04wZlQ5MGIydGxiajBrZTNkelZHOXJaVzU5WUN4Y2JpQWdJQ0FnSUNBZ1hDSjJhWFJsTFdodGNsd2lYRzRnSUNBZ0lDQXBMRnh1SUNBZ0lDQWdjR2x1WjBsdWRHVnlkbUZzT2lCb2JYSlVhVzFsYjNWMFhHNGdJQ0FnZlNrN1hHNGdJQ0FnY21WMGRYSnVJSHRjYmlBZ0lDQWdJR0Z6ZVc1aklHTnZibTVsWTNRb2FHRnVaR3hsY25NcElIdGNiaUFnSUNBZ0lDQWdkSEo1SUh0Y2JpQWdJQ0FnSUNBZ0lDQmhkMkZwZENCM2MxUnlZVzV6Y0c5eWRDNWpiMjV1WldOMEtHaGhibVJzWlhKektUdGNiaUFnSUNBZ0lDQWdmU0JqWVhSamFDQW9aU2tnZTF4dUlDQWdJQ0FnSUNBZ0lHbG1JQ2doYUcxeVVHOXlkQ2tnZTF4dUlDQWdJQ0FnSUNBZ0lDQWdkM05VY21GdWMzQnZjblFnUFNCamNtVmhkR1ZYWldKVGIyTnJaWFJOYjJSMWJHVlNkVzV1WlhKVWNtRnVjM0J2Y25Rb2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNCamNtVmhkR1ZEYjI1dVpXTjBhVzl1T2lBb0tTQTlQaUJ1WlhjZ1YyVmlVMjlqYTJWMEtGeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lHQWtlM052WTJ0bGRGQnliM1J2WTI5c2ZUb3ZMeVI3WkdseVpXTjBVMjlqYTJWMFNHOXpkSDAvZEc5clpXNDlKSHQzYzFSdmEyVnVmV0FzWEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnWENKMmFYUmxMV2h0Y2x3aVhHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNrc1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUhCcGJtZEpiblJsY25aaGJEb2dhRzF5VkdsdFpXOTFkRnh1SUNBZ0lDQWdJQ0FnSUNBZ2ZTazdYRzRnSUNBZ0lDQWdJQ0FnSUNCMGNua2dlMXh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQmhkMkZwZENCM2MxUnlZVzV6Y0c5eWRDNWpiMjV1WldOMEtHaGhibVJzWlhKektUdGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ1kyOXVjMjlzWlM1cGJtWnZLRnh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJRndpVzNacGRHVmRJRVJwY21WamRDQjNaV0p6YjJOclpYUWdZMjl1Ym1WamRHbHZiaUJtWVd4c1ltRmpheTRnUTJobFkyc2diM1YwSUdoMGRIQnpPaTh2ZG1sMFpTNWtaWFl2WTI5dVptbG5MM05sY25abGNpMXZjSFJwYjI1ekxtaDBiV3dqYzJWeWRtVnlMV2h0Y2lCMGJ5QnlaVzF2ZG1VZ2RHaGxJSEJ5WlhacGIzVnpJR052Ym01bFkzUnBiMjRnWlhKeWIzSXVYQ0pjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdLVHRjYmlBZ0lDQWdJQ0FnSUNBZ0lIMGdZMkYwWTJnZ0tHVXlLU0I3WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJR2xtSUNobE1pQnBibk4wWVc1alpXOW1JRVZ5Y205eUlDWW1JR1V5TG0xbGMzTmhaMlV1YVc1amJIVmtaWE1vWENKWFpXSlRiMk5yWlhRZ1kyeHZjMlZrSUhkcGRHaHZkWFFnYjNCbGJtVmtMbHdpS1NrZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lHTnZibk4wSUdOMWNuSmxiblJUWTNKcGNIUkliM04wVlZKTUlEMGdibVYzSUZWU1RDaHBiWEJ2Y25RdWJXVjBZUzUxY213cE8xeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lHTnZibk4wSUdOMWNuSmxiblJUWTNKcGNIUkliM04wSUQwZ1kzVnljbVZ1ZEZOamNtbHdkRWh2YzNSVlVrd3VhRzl6ZENBcklHTjFjbkpsYm5SVFkzSnBjSFJJYjNOMFZWSk1MbkJoZEdodVlXMWxMbkpsY0d4aFkyVW9MMEIyYVhSbFhGd3ZZMnhwWlc1MEpDOHNJRndpWENJcE8xeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lHTnZibk52YkdVdVpYSnliM0lvWEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCZ1czWnBkR1ZkSUdaaGFXeGxaQ0IwYnlCamIyNXVaV04wSUhSdklIZGxZbk52WTJ0bGRDNWNibmx2ZFhJZ1kzVnljbVZ1ZENCelpYUjFjRHBjYmlBZ0tHSnliM2R6WlhJcElDUjdZM1Z5Y21WdWRGTmpjbWx3ZEVodmMzUjlJRHd0TFZ0SVZGUlFYUzB0UGlBa2UzTmxjblpsY2todmMzUjlJQ2h6WlhKMlpYSXBYRzRnSUNoaWNtOTNjMlZ5S1NBa2UzTnZZMnRsZEVodmMzUjlJRHd0TFZ0WFpXSlRiMk5yWlhRZ0tHWmhhV3hwYm1jcFhTMHRQaUFrZTJScGNtVmpkRk52WTJ0bGRFaHZjM1I5SUNoelpYSjJaWElwWEc1RGFHVmpheUJ2ZFhRZ2VXOTFjaUJXYVhSbElDOGdibVYwZDI5eWF5QmpiMjVtYVdkMWNtRjBhVzl1SUdGdVpDQm9kSFJ3Y3pvdkwzWnBkR1V1WkdWMkwyTnZibVpwWnk5elpYSjJaWEl0YjNCMGFXOXVjeTVvZEcxc0kzTmxjblpsY2kxb2JYSWdMbUJjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FwTzF4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0I5WEc0Z0lDQWdJQ0FnSUNBZ0lDQjlYRzRnSUNBZ0lDQWdJQ0FnSUNCeVpYUjFjbTQ3WEc0Z0lDQWdJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ0lDQWdJR052Ym5OdmJHVXVaWEp5YjNJb1lGdDJhWFJsWFNCbVlXbHNaV1FnZEc4Z1kyOXVibVZqZENCMGJ5QjNaV0p6YjJOclpYUWdLQ1I3WlgwcExpQmdLVHRjYmlBZ0lDQWdJQ0FnSUNCMGFISnZkeUJsTzF4dUlDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNCOUxGeHVJQ0FnSUNBZ1lYTjVibU1nWkdselkyOXVibVZqZENncElIdGNiaUFnSUNBZ0lDQWdZWGRoYVhRZ2QzTlVjbUZ1YzNCdmNuUXVaR2x6WTI5dWJtVmpkQ2dwTzF4dUlDQWdJQ0FnZlN4Y2JpQWdJQ0FnSUhObGJtUW9aR0YwWVNrZ2UxeHVJQ0FnSUNBZ0lDQjNjMVJ5WVc1emNHOXlkQzV6Wlc1a0tHUmhkR0VwTzF4dUlDQWdJQ0FnZlZ4dUlDQWdJSDA3WEc0Z0lIMHBLQ2xjYmlrN1hHNXNaWFFnZDJsc2JGVnViRzloWkNBOUlHWmhiSE5sTzF4dWFXWWdLSFI1Y0dWdlppQjNhVzVrYjNjZ0lUMDlJRndpZFc1a1pXWnBibVZrWENJcElIdGNiaUFnZDJsdVpHOTNMbUZrWkVWMlpXNTBUR2x6ZEdWdVpYSW9YQ0ppWldadmNtVjFibXh2WVdSY0lpd2dLQ2tnUFQ0Z2UxeHVJQ0FnSUhkcGJHeFZibXh2WVdRZ1BTQjBjblZsTzF4dUlDQjlLVHRjYm4xY2JtWjFibU4wYVc5dUlHTnNaV0Z1VlhKc0tIQmhkR2h1WVcxbEtTQjdYRzRnSUdOdmJuTjBJSFZ5YkNBOUlHNWxkeUJWVWt3b2NHRjBhRzVoYldVc0lGd2lhSFIwY0RvdkwzWnBkR1V1WkdWMlhDSXBPMXh1SUNCMWNtd3VjMlZoY21Ob1VHRnlZVzF6TG1SbGJHVjBaU2hjSW1ScGNtVmpkRndpS1R0Y2JpQWdjbVYwZFhKdUlIVnliQzV3WVhSb2JtRnRaU0FySUhWeWJDNXpaV0Z5WTJnN1hHNTlYRzVzWlhRZ2FYTkdhWEp6ZEZWd1pHRjBaU0E5SUhSeWRXVTdYRzVqYjI1emRDQnZkWFJrWVhSbFpFeHBibXRVWVdkeklEMGdMeW9nUUY5ZlVGVlNSVjlmSUNvdklHNWxkeUJYWldGclUyVjBLQ2s3WEc1amIyNXpkQ0JrWldKdmRXNWpaVkpsYkc5aFpDQTlJQ2gwYVcxbEtTQTlQaUI3WEc0Z0lHeGxkQ0IwYVcxbGNqdGNiaUFnY21WMGRYSnVJQ2dwSUQwK0lIdGNiaUFnSUNCcFppQW9kR2x0WlhJcElIdGNiaUFnSUNBZ0lHTnNaV0Z5VkdsdFpXOTFkQ2gwYVcxbGNpazdYRzRnSUNBZ0lDQjBhVzFsY2lBOUlHNTFiR3c3WEc0Z0lDQWdmVnh1SUNBZ0lIUnBiV1Z5SUQwZ2MyVjBWR2x0Wlc5MWRDZ29LU0E5UGlCN1hHNGdJQ0FnSUNCc2IyTmhkR2x2Ymk1eVpXeHZZV1FvS1R0Y2JpQWdJQ0I5TENCMGFXMWxLVHRjYmlBZ2ZUdGNibjA3WEc1amIyNXpkQ0J3WVdkbFVtVnNiMkZrSUQwZ1pHVmliM1Z1WTJWU1pXeHZZV1FvTlRBcE8xeHVZMjl1YzNRZ2FHMXlRMnhwWlc1MElEMGdibVYzSUVoTlVrTnNhV1Z1ZENoY2JpQWdlMXh1SUNBZ0lHVnljbTl5T2lBb1pYSnlLU0E5UGlCamIyNXpiMnhsTG1WeWNtOXlLRndpVzNacGRHVmRYQ0lzSUdWeWNpa3NYRzRnSUNBZ1pHVmlkV2M2SUNndUxpNXRjMmNwSUQwK0lHTnZibk52YkdVdVpHVmlkV2NvWENKYmRtbDBaVjFjSWl3Z0xpNHViWE5uS1Z4dUlDQjlMRnh1SUNCMGNtRnVjM0J2Y25Rc1hHNGdJR0Z6ZVc1aklHWjFibU4wYVc5dUlHbHRjRzl5ZEZWd1pHRjBaV1JOYjJSMWJHVW9lMXh1SUNBZ0lHRmpZMlZ3ZEdWa1VHRjBhQ3hjYmlBZ0lDQjBhVzFsYzNSaGJYQXNYRzRnSUNBZ1pYaHdiR2xqYVhSSmJYQnZjblJTWlhGMWFYSmxaQ3hjYmlBZ0lDQnBjMWRwZEdocGJrTnBjbU4xYkdGeVNXMXdiM0owWEc0Z0lIMHBJSHRjYmlBZ0lDQmpiMjV6ZENCYllXTmpaWEIwWldSUVlYUm9WMmwwYUc5MWRGRjFaWEo1TENCeGRXVnllVjBnUFNCaFkyTmxjSFJsWkZCaGRHZ3VjM0JzYVhRb1lEOWdLVHRjYmlBZ0lDQmpiMjV6ZENCcGJYQnZjblJRY205dGFYTmxJRDBnYVcxd2IzSjBLRnh1SUNBZ0lDQWdMeW9nUUhacGRHVXRhV2R1YjNKbElDb3ZYRzRnSUNBZ0lDQmlZWE5sSUNzZ1lXTmpaWEIwWldSUVlYUm9WMmwwYUc5MWRGRjFaWEo1TG5Oc2FXTmxLREVwSUNzZ1lEOGtlMlY0Y0d4cFkybDBTVzF3YjNKMFVtVnhkV2x5WldRZ1B5QmNJbWx0Y0c5eWRDWmNJaUE2SUZ3aVhDSjlkRDBrZTNScGJXVnpkR0Z0Y0gwa2UzRjFaWEo1SUQ4Z1lDWWtlM0YxWlhKNWZXQWdPaUJjSWx3aWZXQmNiaUFnSUNBcE8xeHVJQ0FnSUdsbUlDaHBjMWRwZEdocGJrTnBjbU4xYkdGeVNXMXdiM0owS1NCN1hHNGdJQ0FnSUNCcGJYQnZjblJRY205dGFYTmxMbU5oZEdOb0tDZ3BJRDArSUh0Y2JpQWdJQ0FnSUNBZ1kyOXVjMjlzWlM1cGJtWnZLRnh1SUNBZ0lDQWdJQ0FnSUdCYmFHMXlYU0FrZTJGalkyVndkR1ZrVUdGMGFIMGdabUZwYkdWa0lIUnZJR0Z3Y0d4NUlFaE5VaUJoY3lCcGRDZHpJSGRwZEdocGJpQmhJR05wY21OMWJHRnlJR2x0Y0c5eWRDNGdVbVZzYjJGa2FXNW5JSEJoWjJVZ2RHOGdjbVZ6WlhRZ2RHaGxJR1Y0WldOMWRHbHZiaUJ2Y21SbGNpNGdWRzhnWkdWaWRXY2dZVzVrSUdKeVpXRnJJSFJvWlNCamFYSmpkV3hoY2lCcGJYQnZjblFzSUhsdmRTQmpZVzRnY25WdUlGeGNZSFpwZEdVZ0xTMWtaV0oxWnlCb2JYSmNYR0FnZEc4Z2JHOW5JSFJvWlNCamFYSmpkV3hoY2lCa1pYQmxibVJsYm1ONUlIQmhkR2dnYVdZZ1lTQm1hV3hsSUdOb1lXNW5aU0IwY21sbloyVnlaV1FnYVhRdVlGeHVJQ0FnSUNBZ0lDQXBPMXh1SUNBZ0lDQWdJQ0J3WVdkbFVtVnNiMkZrS0NrN1hHNGdJQ0FnSUNCOUtUdGNiaUFnSUNCOVhHNGdJQ0FnY21WMGRYSnVJR0YzWVdsMElHbHRjRzl5ZEZCeWIyMXBjMlU3WEc0Z0lIMWNiaWs3WEc1MGNtRnVjM0J2Y25RdVkyOXVibVZqZENoamNtVmhkR1ZJVFZKSVlXNWtiR1Z5S0doaGJtUnNaVTFsYzNOaFoyVXBLVHRjYm1GemVXNWpJR1oxYm1OMGFXOXVJR2hoYm1Sc1pVMWxjM05oWjJVb2NHRjViRzloWkNrZ2UxeHVJQ0J6ZDJsMFkyZ2dLSEJoZVd4dllXUXVkSGx3WlNrZ2UxeHVJQ0FnSUdOaGMyVWdYQ0pqYjI1dVpXTjBaV1JjSWpwY2JpQWdJQ0FnSUdOdmJuTnZiR1V1WkdWaWRXY29ZRnQyYVhSbFhTQmpiMjV1WldOMFpXUXVZQ2s3WEc0Z0lDQWdJQ0JpY21WaGF6dGNiaUFnSUNCallYTmxJRndpZFhCa1lYUmxYQ0k2WEc0Z0lDQWdJQ0JoZDJGcGRDQm9iWEpEYkdsbGJuUXVibTkwYVdaNVRHbHpkR1Z1WlhKektGd2lkbWwwWlRwaVpXWnZjbVZWY0dSaGRHVmNJaXdnY0dGNWJHOWhaQ2s3WEc0Z0lDQWdJQ0JwWmlBb2FHRnpSRzlqZFcxbGJuUXBJSHRjYmlBZ0lDQWdJQ0FnYVdZZ0tHbHpSbWx5YzNSVmNHUmhkR1VnSmlZZ2FHRnpSWEp5YjNKUGRtVnliR0Y1S0NrcElIdGNiaUFnSUNBZ0lDQWdJQ0JzYjJOaGRHbHZiaTV5Wld4dllXUW9LVHRjYmlBZ0lDQWdJQ0FnSUNCeVpYUjFjbTQ3WEc0Z0lDQWdJQ0FnSUgwZ1pXeHpaU0I3WEc0Z0lDQWdJQ0FnSUNBZ2FXWWdLR1Z1WVdKc1pVOTJaWEpzWVhrcElIdGNiaUFnSUNBZ0lDQWdJQ0FnSUdOc1pXRnlSWEp5YjNKUGRtVnliR0Y1S0NrN1hHNGdJQ0FnSUNBZ0lDQWdmVnh1SUNBZ0lDQWdJQ0FnSUdselJtbHljM1JWY0dSaGRHVWdQU0JtWVd4elpUdGNiaUFnSUNBZ0lDQWdmVnh1SUNBZ0lDQWdmVnh1SUNBZ0lDQWdZWGRoYVhRZ1VISnZiV2x6WlM1aGJHd29YRzRnSUNBZ0lDQWdJSEJoZVd4dllXUXVkWEJrWVhSbGN5NXRZWEFvWVhONWJtTWdLSFZ3WkdGMFpTa2dQVDRnZTF4dUlDQWdJQ0FnSUNBZ0lHbG1JQ2gxY0dSaGRHVXVkSGx3WlNBOVBUMGdYQ0pxY3kxMWNHUmhkR1ZjSWlrZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnY21WMGRYSnVJR2h0Y2tOc2FXVnVkQzV4ZFdWMVpWVndaR0YwWlNoMWNHUmhkR1VwTzF4dUlDQWdJQ0FnSUNBZ0lIMWNiaUFnSUNBZ0lDQWdJQ0JqYjI1emRDQjdJSEJoZEdnc0lIUnBiV1Z6ZEdGdGNDQjlJRDBnZFhCa1lYUmxPMXh1SUNBZ0lDQWdJQ0FnSUdOdmJuTjBJSE5sWVhKamFGVnliQ0E5SUdOc1pXRnVWWEpzS0hCaGRHZ3BPMXh1SUNBZ0lDQWdJQ0FnSUdOdmJuTjBJR1ZzSUQwZ1FYSnlZWGt1Wm5KdmJTaGNiaUFnSUNBZ0lDQWdJQ0FnSUdSdlkzVnRaVzUwTG5GMVpYSjVVMlZzWldOMGIzSkJiR3dvWENKc2FXNXJYQ0lwWEc0Z0lDQWdJQ0FnSUNBZ0tTNW1hVzVrS0Z4dUlDQWdJQ0FnSUNBZ0lDQWdLR1VwSUQwK0lDRnZkWFJrWVhSbFpFeHBibXRVWVdkekxtaGhjeWhsS1NBbUppQmpiR1ZoYmxWeWJDaGxMbWh5WldZcExtbHVZMngxWkdWektITmxZWEpqYUZWeWJDbGNiaUFnSUNBZ0lDQWdJQ0FwTzF4dUlDQWdJQ0FnSUNBZ0lHbG1JQ2doWld3cElIdGNiaUFnSUNBZ0lDQWdJQ0FnSUhKbGRIVnlianRjYmlBZ0lDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNBZ0lDQWdZMjl1YzNRZ2JtVjNVR0YwYUNBOUlHQWtlMkpoYzJWOUpIdHpaV0Z5WTJoVmNtd3VjMnhwWTJVb01TbDlKSHR6WldGeVkyaFZjbXd1YVc1amJIVmtaWE1vWENJL1hDSXBJRDhnWENJbVhDSWdPaUJjSWo5Y0luMTBQU1I3ZEdsdFpYTjBZVzF3ZldBN1hHNGdJQ0FnSUNBZ0lDQWdjbVYwZFhKdUlHNWxkeUJRY205dGFYTmxLQ2h5WlhOdmJIWmxLU0E5UGlCN1hHNGdJQ0FnSUNBZ0lDQWdJQ0JqYjI1emRDQnVaWGRNYVc1clZHRm5JRDBnWld3dVkyeHZibVZPYjJSbEtDazdYRzRnSUNBZ0lDQWdJQ0FnSUNCdVpYZE1hVzVyVkdGbkxtaHlaV1lnUFNCdVpYY2dWVkpNS0c1bGQxQmhkR2dzSUdWc0xtaHlaV1lwTG1oeVpXWTdYRzRnSUNBZ0lDQWdJQ0FnSUNCamIyNXpkQ0J5WlcxdmRtVlBiR1JGYkNBOUlDZ3BJRDArSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnWld3dWNtVnRiM1psS0NrN1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUdOdmJuTnZiR1V1WkdWaWRXY29ZRnQyYVhSbFhTQmpjM01nYUc5MElIVndaR0YwWldRNklDUjdjMlZoY21Ob1ZYSnNmV0FwTzF4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0J5WlhOdmJIWmxLQ2s3WEc0Z0lDQWdJQ0FnSUNBZ0lDQjlPMXh1SUNBZ0lDQWdJQ0FnSUNBZ2JtVjNUR2x1YTFSaFp5NWhaR1JGZG1WdWRFeHBjM1JsYm1WeUtGd2liRzloWkZ3aUxDQnlaVzF2ZG1WUGJHUkZiQ2s3WEc0Z0lDQWdJQ0FnSUNBZ0lDQnVaWGRNYVc1clZHRm5MbUZrWkVWMlpXNTBUR2x6ZEdWdVpYSW9YQ0psY25KdmNsd2lMQ0J5WlcxdmRtVlBiR1JGYkNrN1hHNGdJQ0FnSUNBZ0lDQWdJQ0J2ZFhSa1lYUmxaRXhwYm10VVlXZHpMbUZrWkNobGJDazdYRzRnSUNBZ0lDQWdJQ0FnSUNCbGJDNWhablJsY2lodVpYZE1hVzVyVkdGbktUdGNiaUFnSUNBZ0lDQWdJQ0I5S1R0Y2JpQWdJQ0FnSUNBZ2ZTbGNiaUFnSUNBZ0lDazdYRzRnSUNBZ0lDQmhkMkZwZENCb2JYSkRiR2xsYm5RdWJtOTBhV1o1VEdsemRHVnVaWEp6S0Z3aWRtbDBaVHBoWm5SbGNsVndaR0YwWlZ3aUxDQndZWGxzYjJGa0tUdGNiaUFnSUNBZ0lHSnlaV0ZyTzF4dUlDQWdJR05oYzJVZ1hDSmpkWE4wYjIxY0lqb2dlMXh1SUNBZ0lDQWdZWGRoYVhRZ2FHMXlRMnhwWlc1MExtNXZkR2xtZVV4cGMzUmxibVZ5Y3lod1lYbHNiMkZrTG1WMlpXNTBMQ0J3WVhsc2IyRmtMbVJoZEdFcE8xeHVJQ0FnSUNBZ2FXWWdLSEJoZVd4dllXUXVaWFpsYm5RZ1BUMDlJRndpZG1sMFpUcDNjenBrYVhOamIyNXVaV04wWENJcElIdGNiaUFnSUNBZ0lDQWdhV1lnS0doaGMwUnZZM1Z0Wlc1MElDWW1JQ0YzYVd4c1ZXNXNiMkZrS1NCN1hHNGdJQ0FnSUNBZ0lDQWdZMjl1YzI5c1pTNXNiMmNvWUZ0MmFYUmxYU0J6WlhKMlpYSWdZMjl1Ym1WamRHbHZiaUJzYjNOMExpQlFiMnhzYVc1bklHWnZjaUJ5WlhOMFlYSjBMaTR1WUNrN1hHNGdJQ0FnSUNBZ0lDQWdZMjl1YzNRZ2MyOWphMlYwSUQwZ2NHRjViRzloWkM1a1lYUmhMbmRsWWxOdlkydGxkRHRjYmlBZ0lDQWdJQ0FnSUNCamIyNXpkQ0IxY213Z1BTQnVaWGNnVlZKTUtITnZZMnRsZEM1MWNtd3BPMXh1SUNBZ0lDQWdJQ0FnSUhWeWJDNXpaV0Z5WTJnZ1BTQmNJbHdpTzF4dUlDQWdJQ0FnSUNBZ0lHRjNZV2wwSUhkaGFYUkdiM0pUZFdOalpYTnpablZzVUdsdVp5aDFjbXd1YUhKbFppazdYRzRnSUNBZ0lDQWdJQ0FnYkc5allYUnBiMjR1Y21Wc2IyRmtLQ2s3WEc0Z0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUgxY2JpQWdJQ0FnSUdKeVpXRnJPMXh1SUNBZ0lIMWNiaUFnSUNCallYTmxJRndpWm5Wc2JDMXlaV3h2WVdSY0lqcGNiaUFnSUNBZ0lHRjNZV2wwSUdodGNrTnNhV1Z1ZEM1dWIzUnBabmxNYVhOMFpXNWxjbk1vWENKMmFYUmxPbUpsWm05eVpVWjFiR3hTWld4dllXUmNJaXdnY0dGNWJHOWhaQ2s3WEc0Z0lDQWdJQ0JwWmlBb2FHRnpSRzlqZFcxbGJuUXBJSHRjYmlBZ0lDQWdJQ0FnYVdZZ0tIQmhlV3h2WVdRdWNHRjBhQ0FtSmlCd1lYbHNiMkZrTG5CaGRHZ3VaVzVrYzFkcGRHZ29YQ0l1YUhSdGJGd2lLU2tnZTF4dUlDQWdJQ0FnSUNBZ0lHTnZibk4wSUhCaFoyVlFZWFJvSUQwZ1pHVmpiMlJsVlZKSktHeHZZMkYwYVc5dUxuQmhkR2h1WVcxbEtUdGNiaUFnSUNBZ0lDQWdJQ0JqYjI1emRDQndZWGxzYjJGa1VHRjBhQ0E5SUdKaGMyVWdLeUJ3WVhsc2IyRmtMbkJoZEdndWMyeHBZMlVvTVNrN1hHNGdJQ0FnSUNBZ0lDQWdhV1lnS0hCaFoyVlFZWFJvSUQwOVBTQndZWGxzYjJGa1VHRjBhQ0I4ZkNCd1lYbHNiMkZrTG5CaGRHZ2dQVDA5SUZ3aUwybHVaR1Y0TG1oMGJXeGNJaUI4ZkNCd1lXZGxVR0YwYUM1bGJtUnpWMmwwYUNoY0lpOWNJaWtnSmlZZ2NHRm5aVkJoZEdnZ0t5QmNJbWx1WkdWNExtaDBiV3hjSWlBOVBUMGdjR0Y1Ykc5aFpGQmhkR2dwSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJSEJoWjJWU1pXeHZZV1FvS1R0Y2JpQWdJQ0FnSUNBZ0lDQjlYRzRnSUNBZ0lDQWdJQ0FnY21WMGRYSnVPMXh1SUNBZ0lDQWdJQ0I5SUdWc2MyVWdlMXh1SUNBZ0lDQWdJQ0FnSUhCaFoyVlNaV3h2WVdRb0tUdGNiaUFnSUNBZ0lDQWdmVnh1SUNBZ0lDQWdmVnh1SUNBZ0lDQWdZbkpsWVdzN1hHNGdJQ0FnWTJGelpTQmNJbkJ5ZFc1bFhDSTZYRzRnSUNBZ0lDQmhkMkZwZENCb2JYSkRiR2xsYm5RdWJtOTBhV1o1VEdsemRHVnVaWEp6S0Z3aWRtbDBaVHBpWldadmNtVlFjblZ1WlZ3aUxDQndZWGxzYjJGa0tUdGNiaUFnSUNBZ0lHRjNZV2wwSUdodGNrTnNhV1Z1ZEM1d2NuVnVaVkJoZEdoektIQmhlV3h2WVdRdWNHRjBhSE1wTzF4dUlDQWdJQ0FnWW5KbFlXczdYRzRnSUNBZ1kyRnpaU0JjSW1WeWNtOXlYQ0k2SUh0Y2JpQWdJQ0FnSUdGM1lXbDBJR2h0Y2tOc2FXVnVkQzV1YjNScFpubE1hWE4wWlc1bGNuTW9YQ0oyYVhSbE9tVnljbTl5WENJc0lIQmhlV3h2WVdRcE8xeHVJQ0FnSUNBZ2FXWWdLR2hoYzBSdlkzVnRaVzUwS1NCN1hHNGdJQ0FnSUNBZ0lHTnZibk4wSUdWeWNpQTlJSEJoZVd4dllXUXVaWEp5TzF4dUlDQWdJQ0FnSUNCcFppQW9aVzVoWW14bFQzWmxjbXhoZVNrZ2UxeHVJQ0FnSUNBZ0lDQWdJR055WldGMFpVVnljbTl5VDNabGNteGhlU2hsY25JcE8xeHVJQ0FnSUNBZ0lDQjlJR1ZzYzJVZ2UxeHVJQ0FnSUNBZ0lDQWdJR052Ym5OdmJHVXVaWEp5YjNJb1hHNGdJQ0FnSUNBZ0lDQWdJQ0JnVzNacGRHVmRJRWx1ZEdWeWJtRnNJRk5sY25abGNpQkZjbkp2Y2x4dUpIdGxjbkl1YldWemMyRm5aWDFjYmlSN1pYSnlMbk4wWVdOcmZXQmNiaUFnSUNBZ0lDQWdJQ0FwTzF4dUlDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNCOVhHNGdJQ0FnSUNCaWNtVmhhenRjYmlBZ0lDQjlYRzRnSUNBZ1kyRnpaU0JjSW5CcGJtZGNJanBjYmlBZ0lDQWdJR0p5WldGck8xeHVJQ0FnSUdSbFptRjFiSFE2SUh0Y2JpQWdJQ0FnSUdOdmJuTjBJR05vWldOcklEMGdjR0Y1Ykc5aFpEdGNiaUFnSUNBZ0lISmxkSFZ5YmlCamFHVmphenRjYmlBZ0lDQjlYRzRnSUgxY2JuMWNibU52Ym5OMElHVnVZV0pzWlU5MlpYSnNZWGtnUFNCMGNuVmxPMXh1WTI5dWMzUWdhR0Z6Ukc5amRXMWxiblFnUFNCY0ltUnZZM1Z0Wlc1MFhDSWdhVzRnWjJ4dlltRnNWR2hwY3p0Y2JtWjFibU4wYVc5dUlHTnlaV0YwWlVWeWNtOXlUM1psY214aGVTaGxjbklwSUh0Y2JpQWdZMnhsWVhKRmNuSnZjazkyWlhKc1lYa29LVHRjYmlBZ1kyOXVjM1FnZXlCamRYTjBiMjFGYkdWdFpXNTBjeUI5SUQwZ1oyeHZZbUZzVkdocGN6dGNiaUFnYVdZZ0tHTjFjM1J2YlVWc1pXMWxiblJ6S1NCN1hHNGdJQ0FnWTI5dWMzUWdSWEp5YjNKUGRtVnliR0Y1UTI5dWMzUnlkV04wYjNJZ1BTQmpkWE4wYjIxRmJHVnRaVzUwY3k1blpYUW9iM1psY214aGVVbGtLVHRjYmlBZ0lDQmtiMk4xYldWdWRDNWliMlI1TG1Gd2NHVnVaRU5vYVd4a0tHNWxkeUJGY25KdmNrOTJaWEpzWVhsRGIyNXpkSEoxWTNSdmNpaGxjbklwS1R0Y2JpQWdmVnh1ZlZ4dVpuVnVZM1JwYjI0Z1kyeGxZWEpGY25KdmNrOTJaWEpzWVhrb0tTQjdYRzRnSUdSdlkzVnRaVzUwTG5GMVpYSjVVMlZzWldOMGIzSkJiR3dvYjNabGNteGhlVWxrS1M1bWIzSkZZV05vS0NodUtTQTlQaUJ1TG1Oc2IzTmxLQ2twTzF4dWZWeHVablZ1WTNScGIyNGdhR0Z6UlhKeWIzSlBkbVZ5YkdGNUtDa2dlMXh1SUNCeVpYUjFjbTRnWkc5amRXMWxiblF1Y1hWbGNubFRaV3hsWTNSdmNrRnNiQ2h2ZG1WeWJHRjVTV1FwTG14bGJtZDBhRHRjYm4xY2JtRnplVzVqSUdaMWJtTjBhVzl1SUhkaGFYUkdiM0pUZFdOalpYTnpablZzVUdsdVp5aHpiMk5yWlhSVmNtd3NJRzF6SUQwZ01XVXpLU0I3WEc0Z0lHRnplVzVqSUdaMWJtTjBhVzl1SUhCcGJtY29LU0I3WEc0Z0lDQWdZMjl1YzNRZ2MyOWphMlYwSUQwZ2JtVjNJRmRsWWxOdlkydGxkQ2h6YjJOclpYUlZjbXdzSUZ3aWRtbDBaUzF3YVc1blhDSXBPMXh1SUNBZ0lISmxkSFZ5YmlCdVpYY2dVSEp2YldselpTZ29jbVZ6YjJ4MlpTa2dQVDRnZTF4dUlDQWdJQ0FnWm5WdVkzUnBiMjRnYjI1UGNHVnVLQ2tnZTF4dUlDQWdJQ0FnSUNCeVpYTnZiSFpsS0hSeWRXVXBPMXh1SUNBZ0lDQWdJQ0JqYkc5elpTZ3BPMXh1SUNBZ0lDQWdmVnh1SUNBZ0lDQWdablZ1WTNScGIyNGdiMjVGY25KdmNpZ3BJSHRjYmlBZ0lDQWdJQ0FnY21WemIyeDJaU2htWVd4elpTazdYRzRnSUNBZ0lDQWdJR05zYjNObEtDazdYRzRnSUNBZ0lDQjlYRzRnSUNBZ0lDQm1kVzVqZEdsdmJpQmpiRzl6WlNncElIdGNiaUFnSUNBZ0lDQWdjMjlqYTJWMExuSmxiVzkyWlVWMlpXNTBUR2x6ZEdWdVpYSW9YQ0p2Y0dWdVhDSXNJRzl1VDNCbGJpazdYRzRnSUNBZ0lDQWdJSE52WTJ0bGRDNXlaVzF2ZG1WRmRtVnVkRXhwYzNSbGJtVnlLRndpWlhKeWIzSmNJaXdnYjI1RmNuSnZjaWs3WEc0Z0lDQWdJQ0FnSUhOdlkydGxkQzVqYkc5elpTZ3BPMXh1SUNBZ0lDQWdmVnh1SUNBZ0lDQWdjMjlqYTJWMExtRmtaRVYyWlc1MFRHbHpkR1Z1WlhJb1hDSnZjR1Z1WENJc0lHOXVUM0JsYmlrN1hHNGdJQ0FnSUNCemIyTnJaWFF1WVdSa1JYWmxiblJNYVhOMFpXNWxjaWhjSW1WeWNtOXlYQ0lzSUc5dVJYSnliM0lwTzF4dUlDQWdJSDBwTzF4dUlDQjlYRzRnSUdsbUlDaGhkMkZwZENCd2FXNW5LQ2twSUh0Y2JpQWdJQ0J5WlhSMWNtNDdYRzRnSUgxY2JpQWdZWGRoYVhRZ2QyRnBkQ2h0Y3lrN1hHNGdJSGRvYVd4bElDaDBjblZsS1NCN1hHNGdJQ0FnYVdZZ0tHUnZZM1Z0Wlc1MExuWnBjMmxpYVd4cGRIbFRkR0YwWlNBOVBUMGdYQ0oyYVhOcFlteGxYQ0lwSUh0Y2JpQWdJQ0FnSUdsbUlDaGhkMkZwZENCd2FXNW5LQ2twSUh0Y2JpQWdJQ0FnSUNBZ1luSmxZV3M3WEc0Z0lDQWdJQ0I5WEc0Z0lDQWdJQ0JoZDJGcGRDQjNZV2wwS0cxektUdGNiaUFnSUNCOUlHVnNjMlVnZTF4dUlDQWdJQ0FnWVhkaGFYUWdkMkZwZEVadmNsZHBibVJ2ZDFOb2IzY29LVHRjYmlBZ0lDQjlYRzRnSUgxY2JuMWNibVoxYm1OMGFXOXVJSGRoYVhRb2JYTXBJSHRjYmlBZ2NtVjBkWEp1SUc1bGR5QlFjbTl0YVhObEtDaHlaWE52YkhabEtTQTlQaUJ6WlhSVWFXMWxiM1YwS0hKbGMyOXNkbVVzSUcxektTazdYRzU5WEc1bWRXNWpkR2x2YmlCM1lXbDBSbTl5VjJsdVpHOTNVMmh2ZHlncElIdGNiaUFnY21WMGRYSnVJRzVsZHlCUWNtOXRhWE5sS0NoeVpYTnZiSFpsS1NBOVBpQjdYRzRnSUNBZ1kyOXVjM1FnYjI1RGFHRnVaMlVnUFNCaGMzbHVZeUFvS1NBOVBpQjdYRzRnSUNBZ0lDQnBaaUFvWkc5amRXMWxiblF1ZG1semFXSnBiR2wwZVZOMFlYUmxJRDA5UFNCY0luWnBjMmxpYkdWY0lpa2dlMXh1SUNBZ0lDQWdJQ0J5WlhOdmJIWmxLQ2s3WEc0Z0lDQWdJQ0FnSUdSdlkzVnRaVzUwTG5KbGJXOTJaVVYyWlc1MFRHbHpkR1Z1WlhJb1hDSjJhWE5wWW1sc2FYUjVZMmhoYm1kbFhDSXNJRzl1UTJoaGJtZGxLVHRjYmlBZ0lDQWdJSDFjYmlBZ0lDQjlPMXh1SUNBZ0lHUnZZM1Z0Wlc1MExtRmtaRVYyWlc1MFRHbHpkR1Z1WlhJb1hDSjJhWE5wWW1sc2FYUjVZMmhoYm1kbFhDSXNJRzl1UTJoaGJtZGxLVHRjYmlBZ2ZTazdYRzU5WEc1amIyNXpkQ0J6YUdWbGRITk5ZWEFnUFNBdktpQkFYMTlRVlZKRlgxOGdLaThnYm1WM0lFMWhjQ2dwTzF4dWFXWWdLRndpWkc5amRXMWxiblJjSWlCcGJpQm5iRzlpWVd4VWFHbHpLU0I3WEc0Z0lHUnZZM1Z0Wlc1MExuRjFaWEo1VTJWc1pXTjBiM0pCYkd3b1hDSnpkSGxzWlZ0a1lYUmhMWFpwZEdVdFpHVjJMV2xrWFZ3aUtTNW1iM0pGWVdOb0tDaGxiQ2tnUFQ0Z2UxeHVJQ0FnSUhOb1pXVjBjMDFoY0M1elpYUW9aV3d1WjJWMFFYUjBjbWxpZFhSbEtGd2laR0YwWVMxMmFYUmxMV1JsZGkxcFpGd2lLU3dnWld3cE8xeHVJQ0I5S1R0Y2JuMWNibU52Ym5OMElHTnpjRTV2Ym1ObElEMGdYQ0prYjJOMWJXVnVkRndpSUdsdUlHZHNiMkpoYkZSb2FYTWdQeUJrYjJOMWJXVnVkQzV4ZFdWeWVWTmxiR1ZqZEc5eUtGd2liV1YwWVZ0d2NtOXdaWEowZVQxamMzQXRibTl1WTJWZFhDSXBQeTV1YjI1alpTQTZJSFp2YVdRZ01EdGNibXhsZENCc1lYTjBTVzV6WlhKMFpXUlRkSGxzWlR0Y2JtWjFibU4wYVc5dUlIVndaR0YwWlZOMGVXeGxLR2xrTENCamIyNTBaVzUwS1NCN1hHNGdJR3hsZENCemRIbHNaU0E5SUhOb1pXVjBjMDFoY0M1blpYUW9hV1FwTzF4dUlDQnBaaUFvSVhOMGVXeGxLU0I3WEc0Z0lDQWdjM1I1YkdVZ1BTQmtiMk4xYldWdWRDNWpjbVZoZEdWRmJHVnRaVzUwS0Z3aWMzUjViR1ZjSWlrN1hHNGdJQ0FnYzNSNWJHVXVjMlYwUVhSMGNtbGlkWFJsS0Z3aWRIbHdaVndpTENCY0luUmxlSFF2WTNOelhDSXBPMXh1SUNBZ0lITjBlV3hsTG5ObGRFRjBkSEpwWW5WMFpTaGNJbVJoZEdFdGRtbDBaUzFrWlhZdGFXUmNJaXdnYVdRcE8xeHVJQ0FnSUhOMGVXeGxMblJsZUhSRGIyNTBaVzUwSUQwZ1kyOXVkR1Z1ZER0Y2JpQWdJQ0JwWmlBb1kzTndUbTl1WTJVcElIdGNiaUFnSUNBZ0lITjBlV3hsTG5ObGRFRjBkSEpwWW5WMFpTaGNJbTV2Ym1ObFhDSXNJR056Y0U1dmJtTmxLVHRjYmlBZ0lDQjlYRzRnSUNBZ2FXWWdLQ0ZzWVhOMFNXNXpaWEowWldSVGRIbHNaU2tnZTF4dUlDQWdJQ0FnWkc5amRXMWxiblF1YUdWaFpDNWhjSEJsYm1SRGFHbHNaQ2h6ZEhsc1pTazdYRzRnSUNBZ0lDQnpaWFJVYVcxbGIzVjBLQ2dwSUQwK0lIdGNiaUFnSUNBZ0lDQWdiR0Z6ZEVsdWMyVnlkR1ZrVTNSNWJHVWdQU0IyYjJsa0lEQTdYRzRnSUNBZ0lDQjlMQ0F3S1R0Y2JpQWdJQ0I5SUdWc2MyVWdlMXh1SUNBZ0lDQWdiR0Z6ZEVsdWMyVnlkR1ZrVTNSNWJHVXVhVzV6WlhKMFFXUnFZV05sYm5SRmJHVnRaVzUwS0Z3aVlXWjBaWEpsYm1SY0lpd2djM1I1YkdVcE8xeHVJQ0FnSUgxY2JpQWdJQ0JzWVhOMFNXNXpaWEowWldSVGRIbHNaU0E5SUhOMGVXeGxPMXh1SUNCOUlHVnNjMlVnZTF4dUlDQWdJSE4wZVd4bExuUmxlSFJEYjI1MFpXNTBJRDBnWTI5dWRHVnVkRHRjYmlBZ2ZWeHVJQ0J6YUdWbGRITk5ZWEF1YzJWMEtHbGtMQ0J6ZEhsc1pTazdYRzU5WEc1bWRXNWpkR2x2YmlCeVpXMXZkbVZUZEhsc1pTaHBaQ2tnZTF4dUlDQmpiMjV6ZENCemRIbHNaU0E5SUhOb1pXVjBjMDFoY0M1blpYUW9hV1FwTzF4dUlDQnBaaUFvYzNSNWJHVXBJSHRjYmlBZ0lDQmtiMk4xYldWdWRDNW9aV0ZrTG5KbGJXOTJaVU5vYVd4a0tITjBlV3hsS1R0Y2JpQWdJQ0J6YUdWbGRITk5ZWEF1WkdWc1pYUmxLR2xrS1R0Y2JpQWdmVnh1ZlZ4dVpuVnVZM1JwYjI0Z1kzSmxZWFJsU0c5MFEyOXVkR1Y0ZENodmQyNWxjbEJoZEdncElIdGNiaUFnY21WMGRYSnVJRzVsZHlCSVRWSkRiMjUwWlhoMEtHaHRja05zYVdWdWRDd2diM2R1WlhKUVlYUm9LVHRjYm4xY2JtWjFibU4wYVc5dUlHbHVhbVZqZEZGMVpYSjVLSFZ5YkN3Z2NYVmxjbmxVYjBsdWFtVmpkQ2tnZTF4dUlDQnBaaUFvZFhKc1d6QmRJQ0U5UFNCY0lpNWNJaUFtSmlCMWNteGJNRjBnSVQwOUlGd2lMMXdpS1NCN1hHNGdJQ0FnY21WMGRYSnVJSFZ5YkR0Y2JpQWdmVnh1SUNCamIyNXpkQ0J3WVhSb2JtRnRaU0E5SUhWeWJDNXlaWEJzWVdObEtDOWJQeU5kTGlva0x5d2dYQ0pjSWlrN1hHNGdJR052Ym5OMElIc2djMlZoY21Ob0xDQm9ZWE5vSUgwZ1BTQnVaWGNnVlZKTUtIVnliQ3dnWENKb2RIUndPaTh2ZG1sMFpTNWtaWFpjSWlrN1hHNGdJSEpsZEhWeWJpQmdKSHR3WVhSb2JtRnRaWDAvSkh0eGRXVnllVlJ2U1c1cVpXTjBmU1I3YzJWaGNtTm9JRDhnWUNaZ0lDc2djMlZoY21Ob0xuTnNhV05sS0RFcElEb2dYQ0pjSW4wa2UyaGhjMmdnZkh3Z1hDSmNJbjFnTzF4dWZWeHVYRzVsZUhCdmNuUWdleUJGY25KdmNrOTJaWEpzWVhrc0lHTnlaV0YwWlVodmRFTnZiblJsZUhRc0lHbHVhbVZqZEZGMVpYSjVMQ0J5WlcxdmRtVlRkSGxzWlN3Z2RYQmtZWFJsVTNSNWJHVWdmVHRjYmlKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTeE5RVUZOTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFdEJRVXNzUTBGQlF5eExRVUZMTEVOQlFVTXNTMEZCU3l4RFFVRkRMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zUzBGQlN5eERRVUZETEZsQlFWa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eEhRVUZITEVOQlFVTXNSMEZCUnl4RFFVRkRPenRCUVVVelJpeExRVUZMTEVOQlFVTXNWVUZCVlN4RFFVRkRPMEZCUTJwQ0xFTkJRVU1zUTBGQlF5eFhRVUZYTEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVNc1UwRkJVeXhEUVVGRExFTkJRVU03UVVGRGNFTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVTBGQlV5eERRVUZETEVOQlFVTXNRMEZCUXl4VFFVRlRPMEZCUXpsQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRk5CUVZNc1EwRkJReXhEUVVGRExFTkJRVU1zVTBGQlV6dEJRVU01UWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEVOQlFVTXNVMEZCVXl4RFFVRkRMRTlCUVU4c1EwRkJReXhIUVVGSExFTkJRVU1zVTBGQlV5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTXpReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4VFFVRlRMRU5CUVVNc1QwRkJUeXhEUVVGRExFZEJRVWNzUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVNeFF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTBvc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNc1EwRkJReXhUUVVGVExFTkJRVU1zWVVGQllTeERRVUZETEVkQlFVY3NRMEZCUXl4VFFVRlRMRU5CUVVNN1FVRkRkRVFzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF6dEJRVU5pTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVONFFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTBvc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNZMEZCWXl4RFFVRkRMRU5CUVVNc1EwRkJReXhUUVVGVExFTkJRVU1zYVVKQlFXbENMRU5CUVVNc1IwRkJSeXhEUVVGRExGTkJRVk1zUTBGQlF6dEJRVU55UlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEdOQlFXTXNRMEZCUXl4RFFVRkRPMEZCUTNoQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eGpRVUZqTEVOQlFVTXNRMEZCUXp0QlFVTjBSQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZETEVOQlFVTXNVMEZCVXl4RFFVRkRMR3RDUVVGclFpeERRVUZETEVkQlFVY3NRMEZCUXl4TFFVRkxMRU5CUVVNN1FVRkRha1VzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkRPMEZCUTNaQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVTBGQlV5eERRVUZETEd0Q1FVRnJRaXhEUVVGRExFZEJRVWM3UVVGRE1VTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTenRCUVVOcVFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4VFFVRlRMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhSUVVGUkxFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTjZSQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFdDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFVpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOT0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEU2l4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eFpRVUZaTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF6dEJRVU5xUkN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGTkJRVk1zUTBGQlF5eHBRa0ZCYVVJc1EwRkJReXhIUVVGSExFTkJRVU1zVTBGQlV5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRmxCUVZrc1EwRkJRenRCUVVOcVJTeERRVUZETEVOQlFVTTdRVUZEUml4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEWWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNVMEZCVXl4RFFVRkRMRTlCUVU4c1EwRkJReXhIUVVGSExFTkJRVU1zU1VGQlNTeERRVUZETEZOQlFWTXNRMEZCUXp0QlFVTnlSQ3hEUVVGRExFTkJRVU03UVVGRFJpeERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETzBGQlEzcENMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNVVUZCVVN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXp0QlFVTTNReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1ZVRkJWU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXp0QlFVTXZSQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTjZReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1ZVRkJWU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETzBGQlEzcEVMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zVDBGQlR5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRjRU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4UlFVRlJMRU5CUVVNN1FVRkRja01zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRE8wRkJRMWdzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFZEJRVWNzUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1IwRkJSeXhEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOd1JDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTBvc1EwRkJReXhEUVVGRE8wRkJRMFlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExGVkJRVlVzUTBGQlF5eEZRVUZGTEVOQlFVTXNSMEZCUnl4RFFVRkRMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTTdRVUZEZEVVc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZOQlFWTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1IwRkJSeXhEUVVGRExFMUJRVTBzUTBGQlF5eEhRVUZITEVOQlFVTTdRVUZEYWtNc1EwRkJReXhEUVVGRExHRkJRV0VzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJRenRCUVVNM1FpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRPMEZCUTJwRkxFTkJRVU1zUTBGQlF6dEJRVU5HTEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU03UVVGRFpDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhUUVVGVExFTkJRVU1zVlVGQlZTeERRVUZETEVkQlFVY3NRMEZCUXl4SlFVRkpMRU5CUVVNc1UwRkJVeXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETzBGQlEzSkVMRU5CUVVNc1EwRkJRenRCUVVOR0xFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNN1FVRkRXaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4VFFVRlRMRU5CUVVNc1VVRkJVU3hEUVVGRExFZEJRVWNzUTBGQlF5eEpRVUZKTEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRE8wRkJRMjVFTEVOQlFVTXNRMEZCUXp0QlFVTkdMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNSMEZCUnl4RFFVRkRMRkZCUVZFc1EwRkJReXhoUVVGaExFTkJRVU1zUTBGQlF5eERRVUZETEV0QlFVczdRVUZETlVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4UFFVRlBMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEZWQlFWVXNRMEZCUXl4TlFVRk5MRU5CUVVNc1JVRkJSU3hEUVVGRExFdEJRVXNzUTBGQlF6dEJRVU14UkN4RFFVRkRMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5hTEVOQlFVTXNRMEZCUXp0QlFVTkdMRU5CUVVNc1EwRkJReXhWUVVGVkxFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTTdRVUZEZEVJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNhMEpCUVd0Q0xFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4VFFVRlRMRU5CUVVNc2VVSkJRWGxDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExGTkJRVk03UVVGRGVrWXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVTBGQlV5eERRVUZETEdWQlFXVXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEzUkVMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhUUVVGVE8wRkJRekZDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFOUJRVTg3UVVGRFlpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOT0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTA0c1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEYWtNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExGTkJRVk03UVVGRE1VSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVDBGQlR6dEJRVU5pTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMDRzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRUaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4VFFVRlRMRU5CUVVNc1RVRkJUU3hEUVVGRExFdEJRVXM3UVVGREwwSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFZRVUZWTEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhUUVVGVExFTkJRVU1zUTBGQlF5eERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEyNUZMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5NTEVOQlFVTXNRMEZCUXp0QlFVTkdMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNN1FVRkRhRUlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1VVRkJVU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRemxDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhIUVVGSExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRek5ETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGRkJRVkVzUTBGQlF5eEpRVUZKTEVOQlFVTXNSVUZCUlN4RFFVRkRPMEZCUTNaQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhIUVVGSExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNVVUZCVVN4RFFVRkRPMEZCUXpsQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTk1MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVVVGQlVTeERRVUZETEVsQlFVa3NRMEZCUXl4VFFVRlRMRU5CUVVNc2EwSkJRV3RDTEVOQlFVTTdRVUZETDBNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFJRVUZSTEVOQlFVTXNTVUZCU1N4RFFVRkRMRmxCUVZrc1EwRkJRenRCUVVNdlFpeERRVUZETEVOQlFVTTdRVUZEUml4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRPMEZCUTJwQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMR0ZCUVdFc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOdVF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1IwRkJSeXhEUVVGRExFdEJRVXNzUTBGQlF6dEJRVU55UXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRMMElzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTA3UVVGRFpDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOT0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETEZGQlFWRXNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTTdRVUZEY2tRc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJReTlDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNUVUZCVFN4RFFVRkRMRXRCUVVzc1EwRkJRenRCUVVONlFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRUdEJRVU5rTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMDRzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFZEJRVWNzUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNN1FVRkROVUlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTB3c1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eGhRVUZoTEVOQlFVTXNTVUZCU1N4RFFVRkRMRk5CUVZNc1EwRkJReXhyUWtGQmEwSXNRMEZCUXp0QlFVTndSQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEdGQlFXRXNRMEZCUXl4SlFVRkpMRU5CUVVNc1dVRkJXU3hEUVVGRE8wRkJRM0JETEVOQlFVTXNRMEZCUXp0QlFVTkdMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNN1FVRkRjRUlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1UwRkJVeXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRGVFUXNRMEZCUXl4RFFVRkRPMEZCUTBZc1EwRkJReXhEUVVGRExGVkJRVlVzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTNCRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTk1MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExGTkJRVk1zUTBGQlF5eGhRVUZoTEVOQlFVTXNSMEZCUnl4RFFVRkRMRWxCUVVrc1EwRkJReXhUUVVGVExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTndSU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVTBGQlV6dEJRVU40UWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTJ4Q0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTk1MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEZOQlFWTXNRMEZCUXl4SlFVRkpMRU5CUVVNN1FVRkRka0lzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTVHRCUVVOV0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRE8wRkJRMVlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRUaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4VFFVRlRMRU5CUVVNc1lVRkJZU3hEUVVGRExFZEJRVWNzUTBGQlF5eEpRVUZKTEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRE8wRkJRM3BFTEVOQlFVTXNRMEZCUXp0QlFVTkdPMEZCUTBFc1MwRkJTeXhEUVVGRExGTkJRVk1zUTBGQlF6dEJRVU5vUWl4RFFVRkRMRU5CUVVNc1YwRkJWeXhEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkRMRzFDUVVGdFFpeERRVUZETEVOQlFVTTdRVUZEZEVRc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTk8wRkJRM2hDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZETEVOQlFVTXNVMEZCVXp0QlFVTTVRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4dFFrRkJiVUlzUTBGQlF5eERRVUZETEVOQlFVTXNiVUpCUVcxQ08wRkJRMnhFTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExHRkJRV0VzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRE8wRkJRMnhFTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRE8wRkJReTlETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRE8wRkJRemRETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRE8wRkJRelZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExHdENRVUZyUWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTTdRVUZEZGtRc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNhVUpCUVdsQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1VVRkJVU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJRenRCUVVOMFJDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhYUVVGWExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTjZRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4clFrRkJhMElzUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3p0QlFVTnVReXhEUVVGRExFTkJRVU03UVVGRFJpeERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMR1ZCUVdVc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXp0QlFVTnlReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eHJRa0ZCYTBJc1EwRkJReXhIUVVGSExFTkJRVU1zUzBGQlN5eERRVUZETzBGQlEyeEVMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNN1FVRkRZaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1QwRkJUeXhEUVVGRExGVkJRVlVzUTBGQlF5eEhRVUZITEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRGVrUXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOS0xFTkJRVU1zUTBGQlF6dEJRVU5HTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU03UVVGRGFFSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVTBGQlV5eERRVUZETEVsQlFVa3NRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOb1JDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEV0QlFVc3NRMEZCUXl4SFFVRkhMRU5CUVVNN1FVRkROVUlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRUaXhEUVVGRExFTkJRVU03UVVGRFJpeERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOV0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMR0ZCUVdFc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF6dEJRVU01UWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eFZRVUZWTEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNN1FVRkRNMElzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1VVRkJVU3hEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETzBGQlEzcENMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEU5QlFVOHNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJRenRCUVVONFFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhyUWtGQmEwSXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJRenRCUVVOdVF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhwUWtGQmFVSXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJRenRCUVVOc1F5eERRVUZETEVOQlFVTTdRVUZEUml4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEVWQlFVVXNRMEZCUXl4SFFVRkhMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEU5QlFVOHNRMEZCUXl4SFFVRkhMRU5CUVVNc1JVRkJSU3hEUVVGRExFMUJRVTBzUTBGQlF5eFJRVUZSTEVOQlFVTXNSVUZCUlN4RFFVRkRMRWRCUVVjc1EwRkJRenRCUVVOeVJTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFbEJRVWtzUTBGQlF5eEhRVUZITEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEU5QlFVOHNRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFVkJRVVVzUTBGQlF5eEZRVUZGTEVOQlFVTXNUMEZCVHl4RFFVRkRPMEZCUTNoRkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNWVUZCVlR0QlFVTXpRaXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEZWQlFWVXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJRenRCUVVNeFFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhQUVVGUExFTkJRVU1zUjBGQlJ6dEJRVU55UWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZETVVJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4VlFVRlZMRU5CUVVNc1IwRkJSeXhEUVVGRExFbEJRVWtzUTBGQlF6dEJRVU5zUkN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1VVRkJVU3hEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEZGQlFWRXNRMEZCUXl4SlFVRkpMRU5CUVVNc1QwRkJUeXhEUVVGRExFZEJRVWNzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXp0QlFVTTNSQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTFBc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwd3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRE5VSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eEhRVUZITEVOQlFVTXNTVUZCU1N4RFFVRkRPMEZCUTNoRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETzBGQlEyUXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4SlFVRkpMRU5CUVVNc1QwRkJUeXhEUVVGRExFZEJRVWNzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXp0QlFVTnNReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTk9MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwNHNRMEZCUXl4RFFVRkRPMEZCUTBZc1EwRkJReXhEUVVGRExHZENRVUZuUWl4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETzBGQlF6bENMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhWUVVGVkxFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zVDBGQlR5eERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU51UlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRXRCUVVzc1EwRkJReXhIUVVGSExFTkJRVU03UVVGRE5VSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOS0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhMUVVGTE8wRkJRM0pDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVWQlFVVXNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRXRCUVVzc1EwRkJReXhGUVVGRkxFTkJRVU1zUjBGQlJ5eERRVUZETEVWQlFVVXNRMEZCUXl4TlFVRk5MRU5CUVVNc1RVRkJUU3hEUVVGRExFVkJRVVVzUTBGQlF5eFRRVUZUTEVOQlFVTXNSMEZCUnl4RFFVRkRMRkZCUVZFc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4TlFVRk5MRU5CUVVNc1MwRkJTeXhEUVVGRE8wRkJRM3BJTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOTUxFTkJRVU1zUTBGQlF6dEJRVU5HTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRTaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRkZCUVZFc1EwRkJReXhIUVVGSExFTkJRVU1zVDBGQlR5eERRVUZETEZOQlFWTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1IwRkJSeXhEUVVGRExFbEJRVWtzUTBGQlF5eEhRVUZITEVOQlFVTTdRVUZETTBRc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFZEJRVWNzUTBGQlF5eFBRVUZQTEVOQlFVTXNSVUZCUlN4RFFVRkRMRWRCUVVjc1EwRkJReXhKUVVGSkxFTkJRVU1zUzBGQlN5eERRVUZETEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTVHRCUVVNNVJDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhUUVVGVExFTkJRVU1zUjBGQlJ5eERRVUZETEV0QlFVc3NRMEZCUXl4SFFVRkhMRU5CUVVNc1JVRkJSU3hEUVVGRExGbEJRVmtzUTBGQlF5eFBRVUZQTEVOQlFVTXNSVUZCUlN4RFFVRkRMRWRCUVVjc1EwRkJReXhKUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZETEV0QlFVc3NRMEZCUXl4SlFVRkpPMEZCUTNCR0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEU2l4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExGZEJRVmNzUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXp0QlFVTTNRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4WFFVRlhMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eFhRVUZYTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNN1FVRkRjRVFzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eHJRa0ZCYTBJc1EwRkJReXhEUVVGRE8wRkJRMnhETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eHJRa0ZCYTBJc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNUdEJRVU53UXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNUMEZCVHl4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRE8wRkJRemRDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eHJRa0ZCYTBJc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN6dEJRVU55UXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4WFFVRlhMRU5CUVVNN1FVRkRNME1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExGZEJRVmNzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUXpOQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFOUJRVThzUTBGQlF5eEhRVUZITEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVNNVJDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTBvc1EwRkJReXhEUVVGRE8wRkJRMFlzUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4WFFVRlhMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU03UVVGRE5VSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRmxCUVZrc1EwRkJReXhEUVVGRExHdENRVUZyUWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRUdEJRVU0zUkN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhoUVVGaExFTkJRVU1zUjBGQlJ5eERRVUZETEVsQlFVa3NRMEZCUXp0QlFVTTFReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU03UVVGRFpDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTk8wRkJRMW9zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTktMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEdGQlFXRTdRVUZEY2tJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNXVUZCV1N4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4WlFVRlpPMEZCUXpsRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMR3RDUVVGclFpeERRVUZETEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1UwRkJVeXhEUVVGRExFMUJRVTA3UVVGRGJrUXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNc1dVRkJXVHRCUVVNNVF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRUQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRmxCUVZrc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eHJRa0ZCYTBJc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTNaRUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4VlFVRlZMRU5CUVVNc1IwRkJSeXhEUVVGRExGbEJRVmtzUTBGQlF6dEJRVU40UkN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zVVVGQlVTeERRVUZETEVsQlFVa3NRMEZCUXl4UFFVRlBMRU5CUVVNc1IwRkJSeXhEUVVGRExGbEJRVmtzUTBGQlF5eERRVUZETzBGQlEyeEZMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXp0QlFVTldMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4aFFVRmhMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eEpRVUZKTEVOQlFVTXNiVUpCUVcxQ0xFTkJRVU1zVFVGQlRTeERRVUZETzBGQlF6bEVMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5zUWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMR2RDUVVGblFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRmxCUVZrc1EwRkJRenRCUVVNNVF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOT0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEU2l4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOcVFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU03UVVGRFZpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEhsQ1FVRjVRaXhEUVVGRExFTkJRVU1zUTBGQlF5eHJRa0ZCYTBJN1FVRkRNMFFzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc2EwSkJRV3RDTEVOQlFVTXNRMEZCUXp0QlFVTjJSQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVU3UVVGRFdpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1IwRkJSenRCUVVOd1FpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFpRVUZaTEVOQlFVTXNRMEZCUXl4RFFVRkRMR0ZCUVdFc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETzBGQlEyNUZMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMW9zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlExZ3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlExSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4VlFVRlZMRU5CUVVNc1EwRkJReXhEUVVGRExGbEJRVmtzUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFpRVUZaTEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETzBGQlF6bEZMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVlVGQlZTeERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTjJSQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1QwRkJUeXhEUVVGRE8wRkJRMmhDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNlVUpCUVhsQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMEZCUXk5RExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTA0c1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwd3NRMEZCUXl4RFFVRkRPMEZCUTBZN08wRkJSVUVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1NVRkJTU3hEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEYkVNc1IwRkJSeXhEUVVGRExGZEJRVmNzUTBGQlF6dEJRVU5vUWl4RFFVRkRMRU5CUVVNc1EwRkJReXhSUVVGUkxFTkJRVU1zZFVSQlFYVkVMRU5CUVVNN1FVRkRjRVVzUjBGQlJ5eERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRelZDTEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEWWl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMnhDTEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEWkN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4WFFVRlhMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTXZReXhEUVVGRExFTkJRVU03UVVGRFJpeERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRPMEZCUTFRc1EwRkJRenM3UVVGRlJDeE5RVUZOTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhQUVVGUExFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU03UVVGRE9VUXNVVUZCVVN4RFFVRkRMRzlDUVVGdlFpeERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTm9ReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEU5QlFVODdRVUZEWWl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFMUJRVTA3UVVGRFdpeERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTNKRUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1EwRkJReXhSUVVGUk8wRkJRM1JDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU1zUTBGQlF5eFBRVUZQTzBGQlEzQkNMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFNpeERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJRenRCUVVOeVF6czdRVUZGUVN4UlFVRlJMRU5CUVVNc2FVSkJRV2xDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRPVUlzUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEU5QlFVOHNRMEZCUXl4TlFVRk5MRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU03UVVGRE9VUXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhOUVVGTkxFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRNVUlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUjBGQlJ5eERRVUZETEV0QlFVc3NRMEZCUXl4TFFVRkxMRU5CUVVNc1QwRkJUeXhEUVVGRExFVkJRVVVzUTBGQlF5eEpRVUZKTEVOQlFVTXNSMEZCUnl4RFFVRkRPMEZCUTJoRUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVTXNTVUZCU1N4RFFVRkRMRk5CUVZNc1EwRkJReXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEU5QlFVOHNRMEZCUXp0QlFVTnlSQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZkQlFWY3NRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eFhRVUZYTEVOQlFVTTdRVUZEZUVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5LTEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1MwRkJTenRCUVVOa08wRkJRMEVzUzBGQlN5eERRVUZETEhsQ1FVRjVRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMnBFTEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhUUVVGVExFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTTdRVUZEZUVJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTTdRVUZEV0N4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4VFFVRlRPMEZCUTJ4Q0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNN1FVRkRMMElzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhUUVVGVExFTkJRVU1zVFVGQlRTeERRVUZETzBGQlF6bERMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTTdRVUZEZUVJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNN1FVRkRPVUlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXp0QlFVTm9RaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJRenRCUVVOMFFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpPMEZCUTJoQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlExb3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTldMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRWaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU03UVVGREwwSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc2FVSkJRV2xDTEVOQlFVTXNUVUZCVFN4RFFVRkRMRXRCUVVzc1EwRkJRenRCUVVNdlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFVpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEUxQlFVMHNRMEZCUXl4TlFVRk5PMEZCUXpWQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTA0c1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwd3NRMEZCUXl4RFFVRkRPMEZCUTBZc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEVOQlFVTXNVMEZCVXl4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZOQlFWTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJRenRCUVVNM1F5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhIUVVGSExFTkJRVU1zUzBGQlN6dEJRVU51UWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZOQlFWTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1UwRkJVeXhEUVVGRExFbEJRVWtzUTBGQlF5eEhRVUZITEVOQlFVTXNUMEZCVHl4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zUlVGQlJTeERRVUZETEVkQlFVY3NRMEZCUXl4WFFVRlhPMEZCUXk5RkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTk1MRU5CUVVNc1EwRkJRenRCUVVOR0xFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNWMEZCVnl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTTdRVUZETDBNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF6dEJRVU5VTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVTBGQlV6dEJRVU5vUWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVNc1pVRkJaU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlF6VkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4VFFVRlRMRU5CUVVNc1QwRkJUeXhEUVVGRE8wRkJReTlDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFRRVUZUTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNN1FVRkRNMElzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFBRVUZQTEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVNMVJTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF5eFBRVUZQTEVOQlFVTXNTVUZCU1R0QlFVTnlReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1JVRkJSU3hEUVVGRExGVkJRVlVzUTBGQlF5eERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMnBFTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1JVRkJSU3hEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRE8wRkJRMmhGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTXNRMEZCUXl4WFFVRlhMRU5CUVVNc1IwRkJSeXhEUVVGRExGRkJRVkVzUTBGQlF6dEJRVU4yUkN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhOUVVGTk8wRkJRMnhETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eFBRVUZQTEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVNc1dVRkJXU3hEUVVGRExFOUJRVThzUTBGQlF5eFRRVUZUTEVOQlFVTTdRVUZEY0VVc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZkQlFWY3NRMEZCUXl4TlFVRk5MRU5CUVVNc1VVRkJVU3hEUVVGRE8wRkJRekZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4SlFVRkpPMEZCUTJwRUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF6dEJRVU42UWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEU5QlFVOHNRMEZCUXl4TlFVRk5MRU5CUVVNc1MwRkJTeXhEUVVGRE8wRkJRM0pETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETzBGQlEzSkNMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUMEZCVHl4RFFVRkRMRTlCUVU4c1EwRkJReXhOUVVGTkxFTkJRVU03UVVGRGRrTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMlFzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwN1FVRkRjRUlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEV2l4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTFZc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhUUVVGVExFTkJRVU1zVDBGQlR5eERRVUZETzBGQlF6VkNMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTFRc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTFJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTFJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwd3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEycENMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZkQlFWY3NRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTjJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1QwRkJUeXhEUVVGRExFMUJRVTA3UVVGRGRFSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1MwRkJTenRCUVVOdVFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRk5CUVZNc1EwRkJReXhIUVVGSExFTkJRVU1zV1VGQldTeERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEZOQlFWTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU03UVVGRGNFWXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTldMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTFRc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTFJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNWMEZCVnl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRE8wRkJRM3BDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eFRRVUZUTEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRM0pETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOTUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRE8wRkJRMllzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExGTkJRVk1zUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRPMEZCUTJwRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTk1MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF6dEJRVU0zUWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF6dEJRVU5vUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNWMEZCVnl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVNeFFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNN1FVRkRkRUlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJRenRCUVVNMVFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdRVUZEWkN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrN1FVRkRaQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhUUVVGVExFTkJRVU1zUTBGQlF6dEJRVU5xUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTFZc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTFJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTlFMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4WFFVRlhMRU5CUVVNc1EwRkJReXhEUVVGRExGTkJRVk1zUTBGQlF5eEpRVUZKTEVOQlFVTXNWMEZCVnl4RFFVRkRPMEZCUTNKRUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNiMEpCUVc5Q0xFTkJRVU1zUTBGQlF6dEJRVU5xUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1EwRkJReXhUUVVGVExFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWRCUVVjN1FVRkRPVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExGTkJRVk03UVVGRGJrSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU4yUWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVNc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRja01zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFhRVUZYTEVOQlFVTXNUVUZCVFN4RFFVRkRMRk5CUVZNc1EwRkJRenRCUVVOMlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMDdRVUZEYUVJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEV0QlFVczdRVUZEY2tJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNVMEZCVXl4RFFVRkRMRTFCUVUwc1EwRkJReXhMUVVGTExFTkJRVU1zUjBGQlJ5eERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRU5CUVVNc1QwRkJUeXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVTBGQlV5eERRVUZETEZkQlFWY3NRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRia2NzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEV2l4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRXQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVDBGQlR5eERRVUZETzBGQlEyNUNMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4VFFVRlRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZETlVJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEVGl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFhRVUZYTEVOQlFVTXNSMEZCUnl4RFFVRkRMRk5CUVZNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTNSRkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExGZEJRVmNzUTBGQlF5eERRVUZETzBGQlEzWkNMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4WFFVRlhMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRia01zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFpRVUZaTEVOQlFVTXNVMEZCVXl4RFFVRkRPMEZCUTJwRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVjBGQlZ5eERRVUZETEUxQlFVMHNRMEZCUXl4VFFVRlRMRU5CUVVNN1FVRkRka01zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNSMEZCUnl4RFFVRkRPMEZCUTNKQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFZpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOT0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJRenRCUVVOV0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUzBGQlN5eERRVUZETEU5QlFVODdRVUZETlVJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETzBGQlEzQkNMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc2FVSkJRV2xDTEVOQlFVTXNSMEZCUnl4RFFVRkRPMEZCUTNCRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTA0c1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5LTEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTBnc1EwRkJRenRCUVVORUxFdEJRVXNzUTBGQlF5dzRRa0ZCT0VJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOMFJDeERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRzFDUVVGdFFpeERRVUZETEVOQlFVTXNRMEZCUXl4NVFrRkJlVUlzUTBGQlF5eFRRVUZUTEVOQlFVTTdRVUZEYkVVc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eFhRVUZYTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc2JVSkJRVzFDTEVOQlFVTXNUMEZCVHp0QlFVTm9SQ3hEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEdsQ1FVRnBRanRCUVVOMlFpeERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRPMEZCUTFRc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4VFFVRlRPMEZCUTJoQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc2JVSkJRVzFDTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOeVF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zVDBGQlR5eERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkRPMEZCUXk5Q0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eFhRVUZYTEVOQlFVTXNRMEZCUXl4TlFVRk5PMEZCUXk5Q0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eHBRa0ZCYVVJc1EwRkJReXhEUVVGRE8wRkJReTlDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMR2xDUVVGcFFqdEJRVU5xUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwN1FVRkRhRUlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMUlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eFpRVUZaTEVOQlFVTXNRMEZCUXl4RFFVRkRMRzFDUVVGdFFpeERRVUZETEU5QlFVOHNRMEZCUXp0QlFVTjZSQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTNwRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlExb3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4bFFVRmxMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRelZDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRmRCUVZjc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN6dEJRVU12UWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTFZc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOV0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eFpRVUZaTEVOQlFVTXNRMEZCUXp0QlFVTXhRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExHbENRVUZwUWl4RFFVRkRMRU5CUVVNc1EwRkJReXhaUVVGWk8wRkJRekZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMR2xDUVVGcFFqdEJRVU5xUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMR2xDUVVGcFFpeERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRenRCUVVOd1F5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFVpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVjBGQlZ5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpPMEZCUXpGQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTA0c1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOV0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc2JVSkJRVzFDTEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVONFF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zVlVGQlZTeERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTjZRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zUTBGQlF5eFhRVUZYTEVOQlFVTXNRMEZCUXl4TlFVRk5PMEZCUTJoRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eHBRa0ZCYVVJc1EwRkJReXhEUVVGRE8wRkJReTlDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMR2xDUVVGcFFqdEJRVU5xUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEVWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNWMEZCVnl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTE8wRkJRek5DTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNiVUpCUVcxQ0xFTkJRVU1zVlVGQlZTeERRVUZETEVOQlFVTTdRVUZET1VNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEVGl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTFZc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRE8wRkJRM0pDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEVOQlFVTXNiVUpCUVcxQ0xFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNUVUZCVFR0QlFVTXpReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRExGZEJRVmNzUTBGQlF5eERRVUZETzBGQlEzaENMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhwUWtGQmFVSXNRMEZCUXl4RFFVRkRPMEZCUXk5Q0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEdsQ1FVRnBRanRCUVVOcVF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXp0QlFVTm1MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFZEJRVWNzUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1IwRkJSeXhEUVVGRExFMUJRVTBzUTBGQlF5eE5RVUZOTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNN1FVRkRNMFFzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMUlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRUaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc2JVSkJRVzFDTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJRenRCUVVNeFF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRUQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdRVUZETjBJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhYUVVGWExFTkJRVU1zUTBGQlF6dEJRVU40UWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc2FVSkJRV2xDTEVOQlFVTXNRMEZCUXp0QlFVTXZRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eHBRa0ZCYVVJN1FVRkRha01zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTTdRVUZEWml4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhIUVVGSExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRWRCUVVjc1EwRkJReXhOUVVGTkxFTkJRVU1zVFVGQlRTeERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRPMEZCUXpkRUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOU0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTA0c1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRzFDUVVGdFFpeERRVUZETEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU03UVVGRGJrUXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOS0xFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwZ3NRMEZCUXp0QlFVTkVMRXRCUVVzc1EwRkJReXh2UTBGQmIwTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTXhSQ3hEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEZsQlFWa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1QwRkJUeXhEUVVGRExGbEJRVmtzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SFFVRkhPMEZCUTJ4RUxFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNSVUZCUlR0QlFVTlNMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zWTBGQll6dEJRVU53UWl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRE8wRkJRMVFzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU1zUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXl4bFFVRmxMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRGJFUXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRMRU5CUVVNc1QwRkJUeXhEUVVGRExHZENRVUZuUWl4RFFVRkRMRU5CUVVNN1FVRkRMME1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExHZENRVUZuUWl4RFFVRkRMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUXpkRUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhUUVVGVExFTkJRVU1zU1VGQlNTeERRVUZETEV0QlFVc3NRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRenRCUVVOdVF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFVpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1ZVRkJWU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRWxCUVVrN1FVRkRkRVFzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUXp0QlFVTnlRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFZEJRVWNzUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTXZReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eG5Ra0ZCWjBJN1FVRkRha01zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNN1FVRkRiRUlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRGJFSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1R0QlFVTTNRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNN1FVRkRka0lzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTmlMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNN1FVRkRla0lzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlExZ3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1owSkJRV2RDTEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOMlJDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETzBGQlF6TkNMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNSMEZCUnl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExGTkJRVk1zUTBGQlF5eE5RVUZOTEVOQlFVTXNUMEZCVHl4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU51UlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRUdEJRVU53UWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOYUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZOQlFWTXNRMEZCUXp0QlFVTjBRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU03UVVGRE5VSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRVZCUVVVc1EwRkJReXhWUVVGVkxFTkJRVU03UVVGRGVrTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4VFFVRlRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU03UVVGRGVFTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMlFzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNaVUZCWlN4RFFVRkRMRU5CUVVNN1FVRkROMElzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEV2l4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTFZc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEVGl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFRRVUZUTEVOQlFVTTdRVUZEYUVJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETzBGQlEzUkNMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVTXNUMEZCVHl4RFFVRkRPMEZCUTJoRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRE8wRkJRMnhETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5TTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFR0QlFVTnFRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4alFVRmpMRU5CUVVNc1EwRkJReXhEUVVGRExGZEJRVmNzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVONlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRlZCUVZVc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRenRCUVVNdlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTjJSQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRVaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhaUVVGWkxFTkJRVU03UVVGRGRFSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMHdzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4VlFVRlZMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMnBDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExHRkJRV0VzUTBGQlF5eGpRVUZqTEVOQlFVTTdRVUZEYmtNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU03UVVGRGFrSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMHdzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU03UVVGRFppeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4VFFVRlRMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU03UVVGRGJrTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOS0xFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwZ3NRMEZCUXpzN1FVRkZSQ3hSUVVGUkxFTkJRVU1zWjBKQlFXZENMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU03UVVGRGJrTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJRenRCUVVNelFpeERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU03UVVGRE0wUTdRVUZEUVN4TFFVRkxMRU5CUVVNc1MwRkJTeXhEUVVGRE8wRkJRMW9zUTBGQlF5eERRVUZETEZkQlFWY3NRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRhRUlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEYmtJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTE8wRkJRM2hDTEVOQlFVTXNRMEZCUXp0QlFVTkdMRU5CUVVNc1EwRkJReXhQUVVGUExFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTTdRVUZEYmtJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNSMEZCUnl4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRelZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eExRVUZMTEVOQlFVTXNTVUZCU1N4RFFVRkRPMEZCUTNSQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhQUVVGUE8wRkJRMllzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFOUJRVTg3UVVGRFppeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFVpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFVpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTTdRVUZEY0VJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEVGl4RFFVRkRMRU5CUVVNN1FVRkRSaXhEUVVGRExFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTmFMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRE8wRkJRM1JDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eExRVUZMTzBGQlEyeENMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFNpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4TFFVRkxMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU03UVVGRGJrTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMEZCUTJZc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRXRCUVVzN1FVRkRiRUlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTktMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTVHRCUVVOMlFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRka1VzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3p0QlFVTXhRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU03UVVGRGNFSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFRpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhKUVVGSk8wRkJRMllzUTBGQlF5eERRVUZETzBGQlEwWTdPMEZCUlVFc1MwRkJTeXhEUVVGRExHRkJRV0VzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExFVkJRVVVzUTBGQlF6dEJRVU4wUXl4TFFVRkxMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTjZRaXhSUVVGUkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF6dEJRVU4yUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNVVUZCVVN4RFFVRkRMR0ZCUVdFc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRGVFTXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eE5RVUZOTEVOQlFVTXNUMEZCVHl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRE9VTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zV1VGQldTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVNelFpeERRVUZETEVOQlFVTTdRVUZEUml4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UlFVRlJMRU5CUVVNN1FVRkRNVUlzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4SlFVRkpPMEZCUTJJN1FVRkRRU3hMUVVGTExFTkJRVU1zWVVGQllTeERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTjBRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXp0QlFVTlNMRU5CUVVNc1EwRkJRenRCUVVOR0xFTkJRVU1zU1VGQlNTeERRVUZETzBGQlEwNHNRMEZCUXl4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRExFdEJRVXM3UVVGRGFrSXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFVpeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOVUxFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNN1FVRkRZaXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRPMEZCUTJRc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4TFFVRkxPMEZCUTJoQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTXNRMEZCUXl4UlFVRlJPMEZCUTNwRExFTkJRVU1zUTBGQlF5eERRVUZETEZWQlFWVXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRMRk5CUVZNN1FVRkRPVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTA3UVVGRGFFSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMDdRVUZEYmtJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwN1FVRkRia0lzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTA3UVVGRGFrSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMDdPMEZCUldoQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRlZCUVZVc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRUdEJRVU01UWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwN1FVRkRla0k3TzBGQlJVRXNRMEZCUXl4UlFVRlJMRU5CUVVNN1FVRkRWaXhEUVVGRExFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNTMEZCU3p0QlFVTnFRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRXRCUVVzN1FVRkRhRUlzUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRVaXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTlVMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTTdRVUZEWWl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETzBGQlEyUXNRMEZCUXl4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTzBGQlEzQkNMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETzBGQlExZ3NRMEZCUXl4RFFVRkRMRlZCUVZVc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRPMEZCUTJwRE96dEJRVVZCTEVOQlFVTXNUVUZCVFN4RFFVRkRPMEZCUTFJc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhEUVVGRExGTkJRVk1zUTBGQlF6dEJRVU12UWl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTJ4Q0xFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNc1NVRkJTVHRCUVVOcVFpeERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNTMEZCU3l4RFFVRkRPMEZCUXpWQ0xFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFZEJRVWM3UVVGRGVFSXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTzBGQlEyNUNMRU5CUVVNc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRWRCUVVjN1FVRkRjRUlzUTBGQlF5eERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRkZCUVZFN1FVRkRjRUlzUTBGQlF5eERRVUZETEZWQlFWVXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEZWQlFWVXNRMEZCUXp0QlFVTjBReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhIUVVGSExFTkJRVU1zUjBGQlJ5eERRVUZETEVkQlFVYzdRVUZEYUVNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNN1FVRkRlRVVzUTBGQlF5eERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRTFCUVUwN1FVRkRiRUlzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUzBGQlN5eERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRE8wRkJRMnhETEVOQlFVTXNRMEZCUXl4VFFVRlRMRU5CUVVNc1EwRkJReXhIUVVGSE8wRkJRMmhDTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zU1VGQlNUdEJRVU5zUWpzN1FVRkZRU3hIUVVGSExFTkJRVU03UVVGRFNpeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEVOQlFVTXNVMEZCVXl4RFFVRkRPMEZCUXk5Q0xFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1NVRkJTVHRCUVVOcVFpeERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFppeERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFZEJRVWM3UVVGRGNFSXNRMEZCUXl4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTzBGQlEzQkNMRU5CUVVNc1EwRkJReXhUUVVGVExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNTVUZCU1R0QlFVTjJRanM3UVVGRlFTeEhRVUZITEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhUUVVGVExFTkJRVU03UVVGRGRrSXNRMEZCUXl4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRExFbEJRVWs3UVVGRFpqczdRVUZGUVN4SFFVRkhMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNVMEZCVXl4RFFVRkRPMEZCUXpkQ0xFTkJRVU1zUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXl4TFFVRkxPMEZCUTJoQ0xFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4SFFVRkhPMEZCUTJJN08wRkJSVUVzUjBGQlJ5eERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExGTkJRVk1zUTBGQlF5eExRVUZMTEVOQlFVTTdRVUZEYmtNc1EwRkJReXhEUVVGRExGVkJRVlVzUTBGQlF5eERRVUZETEVOQlFVTXNSMEZCUnp0QlFVTnNRaXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRMRWRCUVVjN1FVRkRjRUk3TzBGQlJVRXNSMEZCUnl4RFFVRkRMRXRCUVVzc1EwRkJRenRCUVVOV0xFTkJRVU1zUTBGQlF5eFRRVUZUTEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNc1NVRkJTVHRCUVVOMlFqczdRVUZGUVN4RFFVRkRMRTlCUVU4c1EwRkJRenRCUVVOVUxFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRGJFSXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eEhRVUZITzBGQlEyeENMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRWxCUVVrN1FVRkRka0k3TzBGQlJVRXNRMEZCUXl4UFFVRlBMRU5CUVVNc1NVRkJTU3hEUVVGRE8wRkJRMlFzUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETzBGQlEyNUNPenRCUVVWQkxFTkJRVU1zVFVGQlRTeERRVUZETzBGQlExSXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRPMEZCUTNSQ096dEJRVVZCTEVOQlFVTXNTVUZCU1N4RFFVRkRPMEZCUTA0c1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRE8wRkJRM0JDTEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5zUWl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4SlFVRkpPMEZCUTNaQ0xFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFZEJRVWM3UVVGRGRrSTdPMEZCUlVFc1EwRkJReXhMUVVGTExFTkJRVU03UVVGRFVDeERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTTdRVUZEZEVJN08wRkJSVUVzUTBGQlF5eExRVUZMTEVOQlFVTTdRVUZEVUN4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVsQlFVazdRVUZEYWtJc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRE8wRkJRMjVDT3p0QlFVVkJMRU5CUVVNc1IwRkJSeXhEUVVGRE8wRkJRMHdzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhKUVVGSk8wRkJRMnBDTEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRExFZEJRVWM3UVVGRFlpeERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4SFFVRkhPMEZCUXpkQ0xFTkJRVU1zUTBGQlF5eFBRVUZQTEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNc1NVRkJTVHRCUVVOdVFpeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEyeENPenRCUVVWQkxFbEJRVWtzUTBGQlF6dEJRVU5NTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zU1VGQlNUdEJRVU5xUWl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVNc1UwRkJVeXhEUVVGRE8wRkJReTlDTEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXp0QlFVTjBRanM3UVVGRlFTeERRVUZETEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNN1FVRkRXQ3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEZWQlFWVXNRMEZCUXl4RFFVRkRMRk5CUVZNN1FVRkROVUlzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRMRTlCUVU4N1FVRkRha0k3TzBGQlJVRXNSMEZCUnl4RFFVRkRPMEZCUTBvc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOc1FpeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUXl4RFFVRkRMRlZCUVZVc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUMEZCVHl4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRExFTkJRVU1zVTBGQlV6dEJRVU5xUnl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxPMEZCUTNCQ0xFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1IwRkJSenRCUVVOc1FpeERRVUZETEVOQlFVTXNWVUZCVlN4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU03UVVGRGJrTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU03UVVGRE0wSXNRMEZCUXl4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrN1FVRkRla0lzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN6dEJRVU40UWl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEVOQlFVTXNUMEZCVHp0QlFVTTNReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRXRCUVVzN1FVRkRja0lzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRE8wRkJReTlDTEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zVDBGQlR6dEJRVU4yUWp0QlFVTkJPMEZCUTBFc1EwRkJRenRCUVVORUxFdEJRVXNzUTBGQlF5eGpRVUZqTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZET1VJc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETzBGQlExQXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTNwRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwZ3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF6dEJRVU5VTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRka01zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTB3c1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNN1FVRkRXQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTXpReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEY0VRc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNc1EwRkJReXhQUVVGUExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRExFOUJRVThzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUXk5RUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTk1MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRemRETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUXk5RExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlF5OURMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5NTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETzBGQlExZ3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRGJrTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU03UVVGRE4wSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNN1FVRkRla0lzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4SFFVRkhMRU5CUVVNc1IwRkJSeXhEUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNN1FVRkRla01zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTTdRVUZEWWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4SFFVRkhMRU5CUVVNc1NVRkJTU3hEUVVGRExFOUJRVThzUTBGQlF5eEpRVUZKTEVOQlFVTXNUMEZCVHl4RFFVRkRMRVZCUVVVc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlF6dEJRVU55UkN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUjBGQlJ5eERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRPMEZCUTNKRkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF6dEJRVU5hTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRTFCUVUwc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRE8wRkJRM3BFTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXp0QlFVTmFMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhoUVVGaExFTkJRVU03UVVGRE5VUXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlExSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOS0xFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwZ3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhoUVVGaE8wRkJRemxDTEVOQlFVTTdRVUZEUkN4TFFVRkxMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUXk5RExFdEJRVXNzUTBGQlF5eFhRVUZYTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJUdEJRVU01UkN4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRExGZEJRVmNzUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRPMEZCUXpWQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRlZCUVZVN1FVRkRhRUlzUzBGQlN5eERRVUZETEZsQlFWa3NRMEZCUXl4UFFVRlBMRU5CUVVNc1YwRkJWeXhEUVVGRE8wRkJRM1pETEVOQlFVTXNRMEZCUXl4WFFVRlhMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRenRCUVVOcVF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRE8wRkJRMWdzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNXVUZCV1N4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOdVJDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zVjBGQlZ5eERRVUZETEdOQlFXTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRNME1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4WFFVRlhMRU5CUVVNc1UwRkJVeXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlF6ZENMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4WFFVRlhMRU5CUVVNc1NVRkJTU3hEUVVGRExFZEJRVWNzUTBGQlF5eExRVUZMTEVOQlFVTTdRVUZETjBRc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4UFFVRlBMRU5CUVVNc1QwRkJUeXhEUVVGRExGZEJRVmNzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eFBRVUZQTzBGQlEycEdMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRE8wRkJRM0JDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTNKRUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEU2l4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRMRTlCUVU4c1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEU5QlFVOHNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRemxETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1QwRkJUeXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRGVrVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNN1FVRkRha0lzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFZEJRVWNzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFZEJRVWNzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRE8wRkJRelZGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU03UVVGRGRrSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTTdRVUZET1VJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5LTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTTdRVUZEYkVJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1MwRkJTeXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTTdRVUZETTBNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5LTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRPMEZCUTNwRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhoUVVGaExFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRMRU5CUVVNc1owSkJRV2RDTEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRlRVVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExHVkJRV1VzUTBGQlF5eERRVUZETzBGQlEzcENMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwNHNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zWjBKQlFXZENMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRM3BETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXp0QlFVTnNRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTk9MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEZWQlFWVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTTNRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRM0pFTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNN1FVRkRjRUlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRUaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEVEN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGRkJRVkVzUTBGQlF5eG5Ra0ZCWjBJc1EwRkJReXhEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRlZCUVZVc1EwRkJRenRCUVVONlJDeERRVUZETEVOQlFVTTdRVUZEUml4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRk5CUVZNc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTTdRVUZETVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEdGQlFXRXNRMEZCUXl4UlFVRlJMRU5CUVVNN1FVRkRhRVFzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZETzBGQlEzQkNMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4WFFVRlhMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWs3UVVGRE0wSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETzBGQlExZ3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOMFFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUzBGQlN6dEJRVU5tTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRNVUlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEZUVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3p0QlFVTjRReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRXRCUVVzc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTTdRVUZEYUVRc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhYUVVGWExFTkJRVU1zVVVGQlVTeERRVUZETEdOQlFXTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRenRCUVVOeVJDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1VVRkJVU3hEUVVGRExHRkJRV0VzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTJoRUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVjBGQlZ5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpPMEZCUXk5Q0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVTBGQlV5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU03UVVGRGNFTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUXpkQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN6dEJRVU5tTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhIUVVGSE8wRkJRMjVDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhGUVVGRkxFTkJRVU1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc2EwSkJRV3RDTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVNeFJTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF6dEJRVU14UWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOYUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5ZTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlExUXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4WFFVRlhMRU5CUVVNc1NVRkJTU3hEUVVGRE8wRkJRelZDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwN1FVRkROME1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRUaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwb3NRMEZCUXl4RFFVRkRPMEZCUTBZc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEVml4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eFZRVUZWTEVOQlFVTXNRMEZCUXl4WFFVRlhMRU5CUVVNc1NVRkJTU3hEUVVGRE8wRkJRM1JETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1VVRkJVU3hEUVVGRExHMUNRVUZ0UWl4RFFVRkRMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNWVUZCVlN4RFFVRkRPMEZCUXpWRUxFTkJRVU1zUTBGQlF6dEJRVU5HTzBGQlEwRXNTMEZCU3l4RFFVRkRMRk5CUVZNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNTMEZCU3l4RFFVRkRMRTlCUVU4c1EwRkJRenRCUVVOMFF5eExRVUZMTEVOQlFVTXNRMEZCUXl4RFFVRkRMR05CUVdNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZWQlFWVTdRVUZEY2tNc1JVRkJSU3hEUVVGRExFTkJRVU1zWTBGQll5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1kwRkJZeXhEUVVGRExFZEJRVWNzUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTNSRUxFTkJRVU1zUTBGQlF5eGpRVUZqTEVOQlFVTXNUVUZCVFN4RFFVRkRMRk5CUVZNc1EwRkJReXhEUVVGRExGbEJRVmtzUTBGQlF6dEJRVU5vUkRzN1FVRkZRU3hQUVVGUExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTnlReXhMUVVGTExFTkJRVU1zWVVGQllTeERRVUZETEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1IwRkJSeXhEUVVGRExFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNSMEZCUnl4RFFVRkRPMEZCUXpsRExFdEJRVXNzUTBGQlF5eFZRVUZWTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1UwRkJVeXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETzBGQlEzQkRMRXRCUVVzc1EwRkJReXhqUVVGakxFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExHRkJRV0VzUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNN1FVRkRia1lzUzBGQlN5eERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTVHRCUVVOd1FpeExRVUZMTEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1lVRkJZU3hEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zWVVGQllTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlF6ZEdMRXRCUVVzc1EwRkJReXhuUWtGQlowSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhUUVVGVExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdRVUZETVVNc1MwRkJTeXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTjJRaXhMUVVGTExFTkJRVU1zVlVGQlZTeERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxPMEZCUTNoQ0xFdEJRVXNzUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1dVRkJXU3hEUVVGRE8wRkJRemxDTEV0QlFVc3NRMEZCUXl4VFFVRlRMRU5CUVVNc1EwRkJReXhEUVVGRExEaENRVUU0UWp0QlFVTm9SQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOVUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRmRCUVZjc1EwRkJReXhEUVVGRExFTkJRVU1zYjBOQlFXOURMRU5CUVVNN1FVRkRNMFFzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1owSkJRV2RDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNVMEZCVXp0QlFVTXpReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zWTBGQll5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRE8wRkJRelZFTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4SFFVRkhPMEZCUTJwQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRVQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4WlFVRlpMRU5CUVVNc1EwRkJRenRCUVVOd1FpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOT0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRPMEZCUTFnc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRTlCUVU4c1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF6dEJRVU01UWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRPMEZCUTFvc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zVjBGQlZ5eERRVUZETEU5QlFVOHNRMEZCUXl4UlFVRlJMRU5CUVVNN1FVRkROME1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOd1FpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU03UVVGRGVFSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1YwRkJWeXhEUVVGRExFTkJRVU1zUTBGQlF5eHZRMEZCYjBNc1EwRkJRenRCUVVNdlJDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1owSkJRV2RDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNVMEZCVXp0QlFVTnVSQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExHTkJRV01zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1owSkJRV2RDTEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETzBGQlF6RkZMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1IwRkJSenRCUVVONlFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVObUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4WlFVRlpMRU5CUVVNc1EwRkJRenRCUVVNMVFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRaQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTTdRVUZEYUVJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4WFFVRlhMRU5CUVVNc1QwRkJUeXhEUVVGRExGRkJRVkVzUTBGQlF6dEJRVU5xUkN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVDBGQlR5eERRVUZETEVsQlFVazdRVUZETVVJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEZOQlFWTXNRMEZCUXl4VlFVRlZMRU5CUVVNc1VVRkJVU3hEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEVkQlFVY3NRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eEhRVUZITEVOQlFVTXNUVUZCVFN4RFFVRkRMRTFCUVUwc1EwRkJReXhQUVVGUExFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4SFFVRkhMRU5CUVVNc1JVRkJSU3hEUVVGRExFMUJRVTBzUTBGQlF5eEhRVUZITEVOQlFVTXNVVUZCVVN4RFFVRkRMRlZCUVZVc1EwRkJReXhMUVVGTExFTkJRVU03UVVGRGRrc3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFppeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTTdRVUZEZWtJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhWUVVGVkxFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhQUVVGUExFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNVMEZCVXl4RFFVRkRMRTFCUVUwc1EwRkJReXhQUVVGUExFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRiRWNzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zYjBKQlFXOUNMRU5CUVVNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eEhRVUZITEVOQlFVTXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhIUVVGSExFTkJRVU03UVVGRGNrVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNhVUpCUVdsQ0xFTkJRVU1zUTBGQlF5eERRVUZETEc5Q1FVRnZRaXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNiMEpCUVc5Q0xFTkJRVU1zVVVGQlVTeERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMnBKTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVDBGQlR5eERRVUZETEV0QlFVczdRVUZETjBJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4RlFVRkZMRU5CUVVNc1QwRkJUeXhEUVVGRExFVkJRVVVzUTBGQlF5eFRRVUZUTzBGQlEzaEVMRWxCUVVrc1EwRkJReXhQUVVGUExFTkJRVU1zUzBGQlN6dEJRVU5zUWl4RFFVRkRMRU5CUVVNc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNhVUpCUVdsQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4VlFVRlZMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTA3UVVGRGJrVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZWQlFWVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVTBGQlV5eERRVUZETEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNaMEpCUVdkQ0xFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMDdRVUZEYWtZc1MwRkJTeXhEUVVGRExFZEJRVWNzUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhQUVVGUExFTkJRVU1zWVVGQllTeERRVUZETEVkQlFVY3NRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eEhRVUZITEVOQlFVTXNUVUZCVFN4RFFVRkRMRTFCUVUwc1EwRkJReXhQUVVGUExFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJRenRCUVVONFJ5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRGFrSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMlFzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEV2l4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTk8wRkJRMnhDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEVml4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRTlCUVU4c1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhGUVVGRkxFTkJRVU1zVDBGQlR5eERRVUZETEVWQlFVVXNRMEZCUXl4VFFVRlRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVONlJTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRPMEZCUTJwQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOU0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRVQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1ZVRkJWU3hEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU42UWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRmRCUVZjc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF6dEJRVU4wUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlExQXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMEZCUTJwQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhYUVVGWExFTkJRVU1zU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXp0QlFVTTVRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTk9MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5NTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOTUxFTkJRVU03UVVGRFJDeEhRVUZITEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTE8wRkJRM1JDTEVWQlFVVXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRk5CUVZNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRGJrTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhuUWtGQlowSXNRMEZCUXl4RFFVRkRMRmxCUVZrc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRhRVFzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4VlFVRlZMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWs3UVVGRGNrSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOS08wRkJRMEVzVVVGQlVTeERRVUZETEZGQlFWRXNRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJRenRCUVVNMVFpeERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEVkQlFVY3NRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRE8wRkJRMnhFTEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1dVRkJXU3hEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRPMEZCUTI1RExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNSMEZCUnl4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEUxQlFVMDdRVUZEYkVNN1FVRkRRU3hIUVVGSExFTkJRVU1zWVVGQllTeERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpPMEZCUTNoQ0xFdEJRVXNzUTBGQlF5eG5Ra0ZCWjBJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRPMEZCUTNSRUxFdEJRVXNzUTBGQlF5eGpRVUZqTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEYWtNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eExRVUZMTzBGQlExZ3NRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTm1MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNN1FVRkRaaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4WlFVRlpMRU5CUVVNc1MwRkJTeXhEUVVGRE8wRkJRM3BDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1R0QlFVTnNRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwb3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEZWQlFWVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU0zUWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFJRVUZSTEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNN1FVRkRka0lzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU03UVVGRFdpeERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTklMRU5CUVVNN1FVRkRSQ3hMUVVGTExFTkJRVU1zVlVGQlZTeERRVUZETEVOQlFVTXNRMEZCUXl4alFVRmpMRU5CUVVNc1JVRkJSU3hEUVVGRE8wRkJRM0pETEV0QlFVc3NRMEZCUXl4VFFVRlRMRU5CUVVNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eFRRVUZUTzBGQlF5OUNMRU5CUVVNc1EwRkJRenRCUVVOR0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRE8wRkJRMmhFTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFBRVUZQTEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSenRCUVVOeVJDeERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTklMRU5CUVVNc1EwRkJReXhUUVVGVE8wRkJRMWdzUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4UlFVRlJMRU5CUVVNc2JVSkJRVzFDTEVOQlFVTTdRVUZEY2tNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFpRVUZaTzBGQlEyaENMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVTBGQlV6dEJRVU5pTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc2MwSkJRWE5DTzBGQlF6RkNMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFNpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRUQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMSGRDUVVGM1FpeERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGbEJRVmtzUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOeVJTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhoUVVGaExFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMDdRVUZEYUVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTTdRVUZEZGtJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXgzUWtGQmQwSXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc2MwSkJRWE5DTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTjBTU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEVEN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEhOQ1FVRnpRaXhEUVVGRExFTkJRVU03UVVGRGFFTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zWVVGQllTeERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5vUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUMEZCVHl4RFFVRkRMRWxCUVVrN1FVRkRjRUlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGbEJRVmtzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4RlFVRkZMRU5CUVVNc1MwRkJTeXhEUVVGRExFZEJRVWNzUTBGQlF5eEZRVUZGTEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETEZGQlFWRXNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhUUVVGVExFTkJRVU1zU1VGQlNTeERRVUZETEVWQlFVVXNRMEZCUXl4TFFVRkxMRU5CUVVNc1IwRkJSeXhEUVVGRExGTkJRVk1zUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1MwRkJTeXhEUVVGRExFZEJRVWNzUTBGQlF5eExRVUZMTEVOQlFVTXNSMEZCUnl4RFFVRkRMRkZCUVZFc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNSMEZCUnl4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNSMEZCUnl4RFFVRkRMRWRCUVVjc1EwRkJReXhSUVVGUkxFTkJRVU1zVlVGQlZTeERRVUZETEVsQlFVa3NRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNVMEZCVXl4RFFVRkRMRVZCUVVVc1EwRkJRenRCUVVNdlVTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5VTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFZRVUZWTEVOQlFVTXNRMEZCUXp0QlFVTndRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRVaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwb3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUzBGQlN5eERRVUZETEdGQlFXRTdRVUZET1VJc1EwRkJReXhEUVVGRE8wRkJRMFlzUTBGQlF6dEJRVU5FTEZOQlFWTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1owSkJRV2RDTEVOQlFVTXNZVUZCWVN4RFFVRkRMRU5CUVVNN1FVRkRiRVFzUzBGQlN5eERRVUZETEZGQlFWRXNRMEZCUXl4aFFVRmhMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU03UVVGRGRFTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFOUJRVThzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXp0QlFVTjRRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRk5CUVZNc1EwRkJRenRCUVVOd1FpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhQUVVGUExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhUUVVGVExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEzaERMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEV0QlFVczdRVUZEV0N4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXp0QlFVTnFRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1UwRkJVeXhEUVVGRExHVkJRV1VzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4WlFVRlpMRU5CUVVNc1EwRkJReXhEUVVGRExFOUJRVThzUTBGQlF6dEJRVU51UlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4WFFVRlhMRU5CUVVNc1EwRkJRenRCUVVOMlFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNZVUZCWVN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExHVkJRV1VzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTm9SQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGRkJRVkVzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXp0QlFVTXpRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTA3UVVGRGFFSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNN1FVRkRaaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEdGQlFXRXNRMEZCUXl4RFFVRkRPMEZCUXpkQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEdsQ1FVRnBRaXhEUVVGRExFTkJRVU03UVVGREwwSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTldMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1lVRkJZU3hEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTzBGQlF5OUNMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTlNMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwNHNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEU5QlFVOHNRMEZCUXl4SFFVRkhPMEZCUTNaQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhQUVVGUExFTkJRVU1zVDBGQlR5eERRVUZETEVkQlFVY3NRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTTVReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRek5ETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhUUVVGVExFTkJRVU1zVjBGQlZ5eERRVUZETEUxQlFVMHNRMEZCUXp0QlFVTm9SQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMVlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwN1FVRkROVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVNc1EwRkJReXhSUVVGUkxFTkJRVU1zU1VGQlNTeERRVUZETzBGQlF6RkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRWxCUVVrN1FVRkRMMElzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNVVUZCVVN4RFFVRkRMR2RDUVVGblFpeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRPMEZCUXpWRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVazdRVUZEYUVJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExHZENRVUZuUWl4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEZGQlFWRXNRMEZCUXl4VFFVRlRPMEZCUTJ4R0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5ZTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF6dEJRVU51UWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTk8wRkJRMnhDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEVml4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU1zVTBGQlV5eERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVTBGQlV5eERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhUUVVGVExFTkJRVU1zUTBGQlF6dEJRVU0xUnl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhIUVVGSExFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRE1VTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExGVkJRVlVzUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRk5CUVZNc1EwRkJReXhEUVVGRE8wRkJRemRETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRlZCUVZVc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4SFFVRkhMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRWxCUVVrN1FVRkROVVFzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRmRCUVZjc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRkRU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF6dEJRVU42UWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVDBGQlR5eERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEVkQlFVY3NRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVTBGQlV5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTnVSU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNN1FVRkRka0lzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTmlMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGVkJRVlVzUTBGQlF5eG5Ra0ZCWjBJc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNWMEZCVnl4RFFVRkRPMEZCUXpWRUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZWQlFWVXNRMEZCUXl4blFrRkJaMElzUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRU5CUVVNc1YwRkJWeXhEUVVGRE8wRkJRemRFTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMR2RDUVVGblFpeERRVUZETEVkQlFVY3NRMEZCUXl4RlFVRkZMRU5CUVVNN1FVRkRjRU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRXRCUVVzc1EwRkJReXhWUVVGVkxFTkJRVU03UVVGRGFFTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRXaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOVUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRVQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1UwRkJVeXhEUVVGRExHVkJRV1VzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4WFFVRlhMRU5CUVVNc1EwRkJReXhEUVVGRExFOUJRVThzUTBGQlF6dEJRVU5zUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTzBGQlExZ3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTI1Q0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhUUVVGVExFTkJRVU1zWlVGQlpTeERRVUZETEU5QlFVOHNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhQUVVGUExFTkJRVU1zU1VGQlNTeERRVUZETzBGQlEyeEZMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRTlCUVU4c1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhGUVVGRkxFTkJRVU1zVlVGQlZTeERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTnNSQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zVjBGQlZ5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1ZVRkJWU3hEUVVGRExFTkJRVU03UVVGRGVFTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1ZVRkJWU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEU5QlFVOHNRMEZCUXl4SFFVRkhMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZET1VVc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1NVRkJTU3hEUVVGRExGTkJRVk03UVVGREwwTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNSMEZCUnl4RFFVRkRMRTFCUVUwc1EwRkJReXhIUVVGSExFTkJRVU03UVVGRGVrTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEZWtJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zY1VKQlFYRkNMRU5CUVVNc1IwRkJSeXhEUVVGRExFbEJRVWtzUTBGQlF6dEJRVU12UXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRkZCUVZFc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF6dEJRVU16UWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEVWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5PTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXM3UVVGRFdDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTBvc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRE8wRkJRM1JDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eFRRVUZUTEVOQlFVTXNaVUZCWlN4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExHZENRVUZuUWl4RFFVRkRMRU5CUVVNc1EwRkJReXhQUVVGUExFTkJRVU03UVVGRGRrVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNWMEZCVnl4RFFVRkRMRU5CUVVNN1FVRkRka0lzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEU5QlFVOHNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVDBGQlR5eERRVUZETEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTTFSQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUXl4RFFVRkRMRk5CUVZNc1EwRkJReXhSUVVGUkxFTkJRVU1zVVVGQlVTeERRVUZETzBGQlEzWkVMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExGZEJRVmNzUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhQUVVGUExFTkJRVU1zU1VGQlNTeERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRNVVFzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFhRVUZYTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1QwRkJUeXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1VVRkJVU3hEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRmRCUVZjc1EwRkJReXhEUVVGRE8wRkJReTlKTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRlZCUVZVc1EwRkJReXhEUVVGRE8wRkJRM2hDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEVml4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwN1FVRkRhRUlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTTdRVUZEWml4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRlZCUVZVc1EwRkJReXhEUVVGRE8wRkJRM1JDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5TTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMDRzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTenRCUVVOWUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRE8wRkJRMmhDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eFRRVUZUTEVOQlFVTXNaVUZCWlN4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExGZEJRVmNzUTBGQlF5eERRVUZETEVOQlFVTXNUMEZCVHl4RFFVRkRPMEZCUTJ4RkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhUUVVGVExFTkJRVU1zVlVGQlZTeERRVUZETEU5QlFVOHNRMEZCUXl4TFFVRkxMRU5CUVVNN1FVRkRMME1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTenRCUVVOWUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5zUWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNVMEZCVXl4RFFVRkRMR1ZCUVdVc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4RFFVRkRMRTlCUVU4c1EwRkJRenRCUVVNMVJDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eFhRVUZYTEVOQlFVTXNRMEZCUXp0QlFVTjJRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEVOQlFVTXNUMEZCVHl4RFFVRkRMRWRCUVVjN1FVRkRMMElzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEdGQlFXRXNRMEZCUXl4RFFVRkRPMEZCUXpOQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zYTBKQlFXdENMRU5CUVVNc1IwRkJSeXhEUVVGRE8wRkJRMnBETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRPMEZCUTJZc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhQUVVGUExFTkJRVU1zUzBGQlN6dEJRVU4yUWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNVVUZCVVN4RFFVRkRMRTFCUVUwc1EwRkJRenRCUVVOd1F5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRTlCUVU4N1FVRkRZaXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEV0QlFVc3NRMEZCUXp0QlFVTmFMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOWUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOU0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTA0c1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3p0QlFVTllMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFNpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF6dEJRVU5tTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXM3UVVGRFdDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRE8wRkJRMklzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEVOQlFVTXNUMEZCVHp0QlFVTXpRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1MwRkJTenRCUVVOc1FpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTBvc1EwRkJReXhEUVVGRE8wRkJRMFk3UVVGRFFTeExRVUZMTEVOQlFVTXNZVUZCWVN4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSk8wRkJRekZDTEV0QlFVc3NRMEZCUXl4WFFVRlhMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRlZCUVZVN1FVRkROVU1zVVVGQlVTeERRVUZETEd0Q1FVRnJRaXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETzBGQlEycERMRU5CUVVNc1EwRkJReXhwUWtGQmFVSXNRMEZCUXl4RFFVRkRPMEZCUTNKQ0xFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4RFFVRkRMR05CUVdNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZWQlFWVTdRVUZEZGtNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEdOQlFXTXNRMEZCUXl4RFFVRkRPMEZCUTNSQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMSFZDUVVGMVFpeERRVUZETEVOQlFVTXNRMEZCUXl4alFVRmpMRU5CUVVNc1IwRkJSeXhEUVVGRExGTkJRVk1zUTBGQlF6dEJRVU5xUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGRkJRVkVzUTBGQlF5eEpRVUZKTEVOQlFVTXNWMEZCVnl4RFFVRkRMRWRCUVVjc1EwRkJReXgxUWtGQmRVSXNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJRenRCUVVNdlJDeERRVUZETEVOQlFVTTdRVUZEUmp0QlFVTkJMRkZCUVZFc1EwRkJReXhwUWtGQmFVSXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkROMElzUTBGQlF5eERRVUZETEZGQlFWRXNRMEZCUXl4blFrRkJaMElzUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5vUlR0QlFVTkJMRkZCUVZFc1EwRkJReXhsUVVGbExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlF6TkNMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zVVVGQlVTeERRVUZETEdkQ1FVRm5RaXhEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZETEUxQlFVMDdRVUZEY0VRN1FVRkRRU3hMUVVGTExFTkJRVU1zVVVGQlVTeERRVUZETEhGQ1FVRnhRaXhEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU03UVVGRE1VUXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhSUVVGUkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTjRRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eFRRVUZUTEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdRVUZEZUVRc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNSMEZCUnl4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTNCRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRkZCUVZFc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEzaENMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1NVRkJTU3hEUVVGRE8wRkJRM0pDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXp0QlFVTm1MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwNHNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVVVGQlVTeERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRla0lzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFOUJRVThzUTBGQlF5eExRVUZMTEVOQlFVTTdRVUZEZEVJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRE8wRkJRMllzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRUaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UlFVRlJMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU4yUWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRzFDUVVGdFFpeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU03UVVGRGJFUXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4dFFrRkJiVUlzUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRU5CUVVNc1QwRkJUeXhEUVVGRE8wRkJRM0JFTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNN1FVRkRkRUlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRUaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1owSkJRV2RDTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF6dEJRVU0zUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNaMEpCUVdkQ0xFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4RFFVRkRMRTlCUVU4c1EwRkJRenRCUVVNdlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOT0xFTkJRVU1zUTBGQlF6dEJRVU5HTEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTNCQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFR0QlFVTldMRU5CUVVNc1EwRkJRenRCUVVOR0xFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNTVUZCU1N4RFFVRkRMRVZCUVVVc1EwRkJRenRCUVVOb1FpeERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU03UVVGRFppeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExGRkJRVkVzUTBGQlF5eGxRVUZsTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEYUVRc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTjRRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTenRCUVVOaUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTA0c1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRWxCUVVrc1EwRkJReXhGUVVGRkxFTkJRVU03UVVGRGNFSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETzBGQlExZ3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEdsQ1FVRnBRaXhEUVVGRExFTkJRVU03UVVGREwwSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOS0xFTkJRVU1zUTBGQlF6dEJRVU5HTzBGQlEwRXNVVUZCVVN4RFFVRkRMRWxCUVVrc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF6dEJRVU5zUWl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFZEJRVWNzUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFZRVUZWTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU03UVVGRE1VUTdRVUZEUVN4UlFVRlJMRU5CUVVNc2FVSkJRV2xDTEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUXpkQ0xFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNSMEZCUnl4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTJ4RExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMnBETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEZGQlFWRXNRMEZCUXl4bFFVRmxMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRiRVFzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETzBGQlEycENMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UlFVRlJMRU5CUVVNc2JVSkJRVzFDTEVOQlFVTXNRMEZCUXl4blFrRkJaMElzUTBGQlF5eERRVUZETEVOQlFVTXNVVUZCVVN4RFFVRkRPMEZCUTJ4RkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTA0c1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwd3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhSUVVGUkxFTkJRVU1zWjBKQlFXZENMRU5CUVVNc1EwRkJReXhuUWtGQlowSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1VVRkJVU3hEUVVGRE8wRkJRek5FTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRTanRCUVVOQkxFdEJRVXNzUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF6dEJRVU16UXl4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4VlFVRlZMRU5CUVVNc1EwRkJRenRCUVVNNVFpeERRVUZETEVOQlFVTXNVVUZCVVN4RFFVRkRMR2RDUVVGblFpeERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zUjBGQlJ5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOMlJTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRk5CUVZNc1EwRkJReXhIUVVGSExFTkJRVU1zUlVGQlJTeERRVUZETEZsQlFWa3NRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zUjBGQlJ5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU03UVVGRE1VUXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOS08wRkJRMEVzUzBGQlN5eERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNc1EwRkJReXhSUVVGUkxFTkJRVU1zWVVGQllTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRkZCUVZFc1EwRkJReXhIUVVGSExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXp0QlFVTTVSeXhIUVVGSExFTkJRVU1zYVVKQlFXbENPMEZCUTNKQ0xGRkJRVkVzUTBGQlF5eFhRVUZYTEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU03UVVGRGJFTXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEZOQlFWTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1JVRkJSU3hEUVVGRE8wRkJReTlDTEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETzBGQlEyUXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEZGQlFWRXNRMEZCUXl4aFFVRmhMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF6dEJRVU16UXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eFpRVUZaTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRPMEZCUXpGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRmxCUVZrc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNSMEZCUnl4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETzBGQlF6bERMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEZkQlFWY3NRMEZCUXl4RFFVRkRMRU5CUVVNc1QwRkJUenRCUVVNdlFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETzBGQlEyeENMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4WlFVRlpMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEZGQlFWRXNRMEZCUXp0QlFVTXpReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwb3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eERRVUZETEdsQ1FVRnBRaXhEUVVGRExFTkJRVU03UVVGRE5VSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVVVGQlVTeERRVUZETEVsQlFVa3NRMEZCUXl4WFFVRlhMRU5CUVVNc1MwRkJTeXhEUVVGRE8wRkJRM1JETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGVkJRVlVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOMlFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zYVVKQlFXbENMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETzBGQlEyeERMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOWUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJRenRCUVVOWUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMR2xDUVVGcFFpeERRVUZETEhGQ1FVRnhRaXhEUVVGRExFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNN1FVRkRhRVVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTktMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zYVVKQlFXbENMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXM3UVVGRE4wSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU03UVVGRFZDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhYUVVGWExFTkJRVU1zUTBGQlF5eERRVUZETEU5QlFVODdRVUZETDBJc1EwRkJReXhEUVVGRE8wRkJRMFlzUTBGQlF5eERRVUZETEZOQlFWTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETzBGQlF6RkNPMEZCUTBFc1VVRkJVU3hEUVVGRExGZEJRVmNzUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXp0QlFVTjZRaXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRU5CUVVNc1UwRkJVeXhEUVVGRExFZEJRVWNzUTBGQlF5eEZRVUZGTEVOQlFVTTdRVUZEYWtNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRPMEZCUTJJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFJRVUZSTEVOQlFVTXNTVUZCU1N4RFFVRkRMRmRCUVZjc1EwRkJReXhMUVVGTExFTkJRVU03UVVGRGNFTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhUUVVGVExFTkJRVU1zVFVGQlRTeERRVUZETEVWQlFVVXNRMEZCUXp0QlFVTjRRaXhEUVVGRExFTkJRVU03UVVGRFJqdEJRVU5CTEZGQlFWRXNRMEZCUXl4blFrRkJaMElzUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXp0QlFVTnlReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVkQlFVY3NRMEZCUXl4VlFVRlZMRU5CUVVNc1UwRkJVeXhEUVVGRExFTkJRVU1zVTBGQlV5eERRVUZETzBGQlF6ZERPMEZCUTBFc1VVRkJVU3hEUVVGRExGZEJRVmNzUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXl4aFFVRmhMRU5CUVVNc1EwRkJRenRCUVVONlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRGVFTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUjBGQlJ6dEJRVU5rTEVOQlFVTXNRMEZCUXp0QlFVTkdMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTTNReXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1IwRkJSeXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTTdRVUZETVVRc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zWVVGQllTeERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU14UmpzN1FVRkZRU3hOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETEZsQlFWa3NRMEZCUXl4RFFVRkRMR2RDUVVGblFpeERRVUZETEVOQlFVTXNWMEZCVnl4RFFVRkRMRU5CUVVNc1YwRkJWeXhEUVVGRExFTkJRVU1zVjBGQlZ5eERRVUZETEVOQlFVTTdJbjA9",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 182739
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 9,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.327Z",
        "time": 9,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/main.tsx",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"714-NySujEVXJXEnQujTGUGp36jD1gQ\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "3827"
            }
          ],
          "content": {
            "size": 3827,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0Lm1ldGEuZW52ID0geyJCQVNFX1VSTCI6ICIvIiwgIkRFViI6IHRydWUsICJNT0RFIjogImRldmVsb3BtZW50IiwgIlBST0QiOiBmYWxzZSwgIlNTUiI6IGZhbHNlLCAiVklURV9BUElfVVJMIjogImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMSIsICJWSVRFX1BPUlQiOiAiMzAwMCJ9O2ltcG9ydCBfX3ZpdGVfX2Nqc0ltcG9ydDBfcmVhY3RfanN4RGV2UnVudGltZSBmcm9tICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvcmVhY3RfanN4LWRldi1ydW50aW1lLmpzP3Y9MGJiNjlkNzMiOyBjb25zdCBqc3hERVYgPSBfX3ZpdGVfX2Nqc0ltcG9ydDBfcmVhY3RfanN4RGV2UnVudGltZVsianN4REVWIl07CmltcG9ydCBfX3ZpdGVfX2Nqc0ltcG9ydDFfcmVhY3QgZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL3JlYWN0LmpzP3Y9MGJiNjlkNzMiOyBjb25zdCBSZWFjdCA9IF9fdml0ZV9fY2pzSW1wb3J0MV9yZWFjdC5fX2VzTW9kdWxlID8gX192aXRlX19janNJbXBvcnQxX3JlYWN0LmRlZmF1bHQgOiBfX3ZpdGVfX2Nqc0ltcG9ydDFfcmVhY3Q7CmltcG9ydCBfX3ZpdGVfX2Nqc0ltcG9ydDJfcmVhY3REb21fY2xpZW50IGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9yZWFjdC1kb21fY2xpZW50LmpzP3Y9MGJiNjlkNzMiOyBjb25zdCBjcmVhdGVSb290ID0gX192aXRlX19janNJbXBvcnQyX3JlYWN0RG9tX2NsaWVudFsiY3JlYXRlUm9vdCJdOwppbXBvcnQgeyBRdWVyeUNsaWVudCwgUXVlcnlDbGllbnRQcm92aWRlciB9IGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9AdGFuc3RhY2tfcmVhY3QtcXVlcnkuanM/dj0wYmI2OWQ3MyI7CmltcG9ydCBBcHAgZnJvbSAiL3NyYy9BcHAudHN4IjsKY29uc3QgcG9ydCA9IGltcG9ydC5tZXRhLmVudi5WSVRFX1BPUlQ7CmNvbnN0IGFwaVVybCA9IGltcG9ydC5tZXRhLmVudi5WSVRFX0FQSV9VUkw7CmNvbnNvbGUubG9nKGBSZWFjdCBhcHAgaXMgcnVubmluZyBvbiBwb3J0OiAke3BvcnR9YCk7CmNvbnNvbGUubG9nKGBBUEkgc2hvdWxkIGJlIHJ1bm5pbmcgb246ICR7YXBpVXJsfWApOwpjb25zdCByb290ID0gY3JlYXRlUm9vdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicm9vdCIpKTsKY29uc3QgcXVlcnlDbGllbnQgPSBuZXcgUXVlcnlDbGllbnQoKTsKcm9vdC5yZW5kZXIoCiAgLyogQF9fUFVSRV9fICovIGpzeERFVihSZWFjdC5TdHJpY3RNb2RlLCB7IGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4REVWKFF1ZXJ5Q2xpZW50UHJvdmlkZXIsIHsgY2xpZW50OiBxdWVyeUNsaWVudCwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoQXBwLCB7fSwgdm9pZCAwLCBmYWxzZSwgewogICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL21haW4udHN4IiwKICAgIGxpbmVOdW1iZXI6IDE4LAogICAgY29sdW1uTnVtYmVyOiA3CiAgfSwgdGhpcykgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL21haW4udHN4IiwKICAgIGxpbmVOdW1iZXI6IDE3LAogICAgY29sdW1uTnVtYmVyOiA1CiAgfSwgdGhpcykgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL21haW4udHN4IiwKICAgIGxpbmVOdW1iZXI6IDE2LAogICAgY29sdW1uTnVtYmVyOiAzCiAgfSwgdGhpcykKKTsKCi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnRZWEJ3YVc1bmN5STZJa0ZCYVVKTk8wRkJha0pPTEU5QlFVOUJMRmRCUVZjN1FVRkRiRUlzVTBGQlUwTXNhMEpCUVd0Q08wRkJRek5DTEZOQlFWTkRMR0ZCUVdGRExESkNRVUV5UWp0QlFVTnFSQ3hQUVVGUFF5eFRRVUZUTzBGQlJXaENMRTFCUVUxRExFOUJRVTlETEZsQlFWbERMRWxCUVVsRE8wRkJRemRDTEUxQlFVMURMRk5CUVZOSUxGbEJRVmxETEVsQlFVbEhPMEZCUXk5Q1F5eFJRVUZSUXl4SlFVRkpMR2xEUVVGcFExQXNTVUZCU1N4RlFVRkZPMEZCUTI1RVRTeFJRVUZSUXl4SlFVRkpMRFpDUVVFMlFrZ3NUVUZCVFN4RlFVRkZPMEZCUldwRUxFMUJRVTFKTEU5QlFVOWFMRmRCUVZkaExGTkJRVk5ETEdWQlFXVXNUVUZCVFN4RFFVRm5RanRCUVVWMFJTeE5RVUZOUXl4alFVRmpMRWxCUVVsa0xGbEJRVms3UVVGRmNFTlhMRXRCUVV0Sk8wRkJRVUZCTEVWQlEwZ3NkVUpCUVVNc1RVRkJUU3haUVVGT0xFVkJRME1zYVVOQlFVTXNkVUpCUVc5Q0xGRkJRVkZFTEdGQlF6TkNMR2xEUVVGRExGTkJRVVE3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVN4VFFVRkpMRXRCUkU0N1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFTeFRRVVZCTEV0QlNFWTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRU3hUUVVsQk8wRkJRMFlpTENKdVlXMWxjeUk2V3lKU1pXRmpkQ0lzSW1OeVpXRjBaVkp2YjNRaUxDSlJkV1Z5ZVVOc2FXVnVkQ0lzSWxGMVpYSjVRMnhwWlc1MFVISnZkbWxrWlhJaUxDSkJjSEFpTENKd2IzSjBJaXdpYVcxd2IzSjBJaXdpWlc1Mklpd2lWa2xVUlY5UVQxSlVJaXdpWVhCcFZYSnNJaXdpVmtsVVJWOUJVRWxmVlZKTUlpd2lZMjl1YzI5c1pTSXNJbXh2WnlJc0luSnZiM1FpTENKa2IyTjFiV1Z1ZENJc0ltZGxkRVZzWlcxbGJuUkNlVWxrSWl3aWNYVmxjbmxEYkdsbGJuUWlMQ0p5Wlc1a1pYSWlYU3dpYVdkdWIzSmxUR2x6ZENJNlcxMHNJbk52ZFhKalpYTWlPbHNpYldGcGJpNTBjM2dpWFN3aWMyOTFjbU5sYzBOdmJuUmxiblFpT2xzaWFXMXdiM0owSUZKbFlXTjBJR1p5YjIwZ0ozSmxZV04wSjF4dWFXMXdiM0owSUhzZ1kzSmxZWFJsVW05dmRDQjlJR1p5YjIwZ0ozSmxZV04wTFdSdmJTOWpiR2xsYm5RblhHNXBiWEJ2Y25RZ2V5QlJkV1Z5ZVVOc2FXVnVkQ3dnVVhWbGNubERiR2xsYm5SUWNtOTJhV1JsY2lCOUlHWnliMjBnSjBCMFlXNXpkR0ZqYXk5eVpXRmpkQzF4ZFdWeWVTZGNibWx0Y0c5eWRDQkJjSEFnWm5KdmJTQW5MaTlCY0hBblhHNWNibU52Ym5OMElIQnZjblFnUFNCcGJYQnZjblF1YldWMFlTNWxibll1VmtsVVJWOVFUMUpVWEc1amIyNXpkQ0JoY0dsVmNtd2dQU0JwYlhCdmNuUXViV1YwWVM1bGJuWXVWa2xVUlY5QlVFbGZWVkpNWEc1amIyNXpiMnhsTG14dlp5aGdVbVZoWTNRZ1lYQndJR2x6SUhKMWJtNXBibWNnYjI0Z2NHOXlkRG9nSkh0d2IzSjBmV0FwWEc1amIyNXpiMnhsTG14dlp5aGdRVkJKSUhOb2IzVnNaQ0JpWlNCeWRXNXVhVzVuSUc5dU9pQWtlMkZ3YVZWeWJIMWdLVnh1WEc1amIyNXpkQ0J5YjI5MElEMGdZM0psWVhSbFVtOXZkQ2hrYjJOMWJXVnVkQzVuWlhSRmJHVnRaVzUwUW5sSlpDZ25jbTl2ZENjcElHRnpJRWhVVFV4RmJHVnRaVzUwS1Z4dVhHNWpiMjV6ZENCeGRXVnllVU5zYVdWdWRDQTlJRzVsZHlCUmRXVnllVU5zYVdWdWRDZ3BYRzVjYm5KdmIzUXVjbVZ1WkdWeUtGeHVJQ0E4VW1WaFkzUXVVM1J5YVdOMFRXOWtaVDVjYmlBZ0lDQThVWFZsY25sRGJHbGxiblJRY205MmFXUmxjaUJqYkdsbGJuUTllM0YxWlhKNVEyeHBaVzUwZlQ1Y2JpQWdJQ0FnSUR4QmNIQWdMejVjYmlBZ0lDQThMMUYxWlhKNVEyeHBaVzUwVUhKdmRtbGtaWEkrWEc0Z0lEd3ZVbVZoWTNRdVUzUnlhV04wVFc5a1pUNWNiaWxjYmlKZExDSm1hV3hsSWpvaUwxVnpaWEp6TDIxMWNtRjBMbTk2WTJGdUwzTmxiMjR2Y0d4aGVYZHlhV2RvZEMxMWRHbHNjeTl6WVcxd2JHVXRZWEJ3TDJaeWIyNTBaVzVrTDNOeVl5OXRZV2x1TG5SemVDSjk=",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 3827
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 9,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.330Z",
        "time": 11,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/@react-refresh",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"5459-W4xlIRvs7CzM1FW1IVU0Uw0TIxA\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "113132"
            }
          ],
          "content": {
            "size": 113132,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsgaW5qZWN0UXVlcnkgYXMgX192aXRlX19pbmplY3RRdWVyeSB9IGZyb20gIi9Adml0ZS9jbGllbnQiOy8qIGdsb2JhbCB3aW5kb3cgKi8KLyogZXNsaW50LWRpc2FibGUgZXFlcWVxLCBwcmVmZXItY29uc3QsIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvbiAqLwoKLyohIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuICoqLwovKioKICogVGhpcyBpcyBzaW1wbGlmaWVkIHB1cmUtanMgdmVyc2lvbiBvZiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvYmxvYi9tYWluL3BhY2thZ2VzL3JlYWN0LXJlZnJlc2gvc3JjL1JlYWN0RnJlc2hSdW50aW1lLmpzCiAqIHdpdGhvdXQgSUUxMSBjb21wYXRpYmlsaXR5IGFuZCB2ZXJib3NlIGlzRGV2IGNoZWNrcy4KICogU29tZSB1dGlscyBhcmUgYXBwZW5kZWQgYXQgdGhlIGJvdHRvbSBmb3IgSE1SIGludGVncmF0aW9uLgogKi8KCmNvbnN0IFJFQUNUX0ZPUldBUkRfUkVGX1RZUEUgPSBTeW1ib2wuZm9yKCdyZWFjdC5mb3J3YXJkX3JlZicpCmNvbnN0IFJFQUNUX01FTU9fVFlQRSA9IFN5bWJvbC5mb3IoJ3JlYWN0Lm1lbW8nKQoKLy8gV2UgbmV2ZXIgcmVtb3ZlIHRoZXNlIGFzc29jaWF0aW9ucy4KLy8gSXQncyBPSyB0byByZWZlcmVuY2UgZmFtaWxpZXMsIGJ1dCB1c2UgV2Vha01hcC9TZXQgZm9yIHR5cGVzLgpsZXQgYWxsRmFtaWxpZXNCeUlEID0gbmV3IE1hcCgpCmxldCBhbGxGYW1pbGllc0J5VHlwZSA9IG5ldyBXZWFrTWFwKCkKbGV0IGFsbFNpZ25hdHVyZXNCeVR5cGUgPSBuZXcgV2Vha01hcCgpCgovLyBUaGlzIFdlYWtNYXAgaXMgcmVhZCBieSBSZWFjdCwgc28gd2Ugb25seSBwdXQgZmFtaWxpZXMKLy8gdGhhdCBoYXZlIGFjdHVhbGx5IGJlZW4gZWRpdGVkIGhlcmUuIFRoaXMga2VlcHMgY2hlY2tzIGZhc3QuCmNvbnN0IHVwZGF0ZWRGYW1pbGllc0J5VHlwZSA9IG5ldyBXZWFrTWFwKCkKCi8vIFRoaXMgaXMgY2xlYXJlZCBvbiBldmVyeSBwZXJmb3JtUmVhY3RSZWZyZXNoKCkgY2FsbC4KLy8gSXQgaXMgYW4gYXJyYXkgb2YgW0ZhbWlseSwgTmV4dFR5cGVdIHR1cGxlcy4KbGV0IHBlbmRpbmdVcGRhdGVzID0gW10KCi8vIFRoaXMgaXMgaW5qZWN0ZWQgYnkgdGhlIHJlbmRlcmVyIHZpYSBEZXZUb29scyBnbG9iYWwgaG9vay4KY29uc3QgaGVscGVyc0J5UmVuZGVyZXJJRCA9IG5ldyBNYXAoKQoKY29uc3QgaGVscGVyc0J5Um9vdCA9IG5ldyBNYXAoKQoKLy8gV2Uga2VlcCB0cmFjayBvZiBtb3VudGVkIHJvb3RzIHNvIHdlIGNhbiBzY2hlZHVsZSB1cGRhdGVzLgpjb25zdCBtb3VudGVkUm9vdHMgPSBuZXcgU2V0KCkKLy8gSWYgYSByb290IGNhcHR1cmVzIGFuIGVycm9yLCB3ZSByZW1lbWJlciBpdCBzbyB3ZSBjYW4gcmV0cnkgb24gZWRpdC4KY29uc3QgZmFpbGVkUm9vdHMgPSBuZXcgU2V0KCkKCi8vIFdlIGFsc28gcmVtZW1iZXIgdGhlIGxhc3QgZWxlbWVudCBmb3IgZXZlcnkgcm9vdC4KLy8gSXQgbmVlZHMgdG8gYmUgd2VhayBiZWNhdXNlIHdlIGRvIHRoaXMgZXZlbiBmb3Igcm9vdHMgdGhhdCBmYWlsZWQgdG8gbW91bnQuCi8vIElmIHRoZXJlIGlzIG5vIFdlYWtNYXAsIHdlIHdvbid0IGF0dGVtcHQgdG8gZG8gcmV0cnlpbmcuCmxldCByb290RWxlbWVudHMgPSBuZXcgV2Vha01hcCgpCmxldCBpc1BlcmZvcm1pbmdSZWZyZXNoID0gZmFsc2UKCmZ1bmN0aW9uIGNvbXB1dGVGdWxsS2V5KHNpZ25hdHVyZSkgewogIGlmIChzaWduYXR1cmUuZnVsbEtleSAhPT0gbnVsbCkgewogICAgcmV0dXJuIHNpZ25hdHVyZS5mdWxsS2V5CiAgfQoKICBsZXQgZnVsbEtleSA9IHNpZ25hdHVyZS5vd25LZXkKICBsZXQgaG9va3MKICB0cnkgewogICAgaG9va3MgPSBzaWduYXR1cmUuZ2V0Q3VzdG9tSG9va3MoKQogIH0gY2F0Y2ggKGVycikgewogICAgLy8gVGhpcyBjYW4gaGFwcGVuIGluIGFuIGVkZ2UgY2FzZSwgZS5nLiBpZiBleHByZXNzaW9uIGxpa2UgRm9vLnVzZVNvbWV0aGluZwogICAgLy8gZGVwZW5kcyBvbiBGb28gd2hpY2ggaXMgbGF6aWx5IGluaXRpYWxpemVkIGR1cmluZyByZW5kZXJpbmcuCiAgICAvLyBJbiB0aGF0IGNhc2UganVzdCBhc3N1bWUgd2UnbGwgaGF2ZSB0byByZW1vdW50LgogICAgc2lnbmF0dXJlLmZvcmNlUmVzZXQgPSB0cnVlCiAgICBzaWduYXR1cmUuZnVsbEtleSA9IGZ1bGxLZXkKICAgIHJldHVybiBmdWxsS2V5CiAgfQoKICBmb3IgKGxldCBpID0gMDsgaSA8IGhvb2tzLmxlbmd0aDsgaSsrKSB7CiAgICBjb25zdCBob29rID0gaG9va3NbaV0KICAgIGlmICh0eXBlb2YgaG9vayAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAvLyBTb21ldGhpbmcncyB3cm9uZy4gQXNzdW1lIHdlIG5lZWQgdG8gcmVtb3VudC4KICAgICAgc2lnbmF0dXJlLmZvcmNlUmVzZXQgPSB0cnVlCiAgICAgIHNpZ25hdHVyZS5mdWxsS2V5ID0gZnVsbEtleQogICAgICByZXR1cm4gZnVsbEtleQogICAgfQogICAgY29uc3QgbmVzdGVkSG9va1NpZ25hdHVyZSA9IGFsbFNpZ25hdHVyZXNCeVR5cGUuZ2V0KGhvb2spCiAgICBpZiAobmVzdGVkSG9va1NpZ25hdHVyZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIC8vIE5vIHNpZ25hdHVyZSBtZWFucyBIb29rIHdhc24ndCBpbiB0aGUgc291cmNlIGNvZGUsIGUuZy4gaW4gYSBsaWJyYXJ5LgogICAgICAvLyBXZSdsbCBza2lwIGl0IGJlY2F1c2Ugd2UgY2FuIGFzc3VtZSBpdCB3b24ndCBjaGFuZ2UgZHVyaW5nIHRoaXMgc2Vzc2lvbi4KICAgICAgY29udGludWUKICAgIH0KICAgIGNvbnN0IG5lc3RlZEhvb2tLZXkgPSBjb21wdXRlRnVsbEtleShuZXN0ZWRIb29rU2lnbmF0dXJlKQogICAgaWYgKG5lc3RlZEhvb2tTaWduYXR1cmUuZm9yY2VSZXNldCkgewogICAgICBzaWduYXR1cmUuZm9yY2VSZXNldCA9IHRydWUKICAgIH0KICAgIGZ1bGxLZXkgKz0gJ1xuLS0tXG4nICsgbmVzdGVkSG9va0tleQogIH0KCiAgc2lnbmF0dXJlLmZ1bGxLZXkgPSBmdWxsS2V5CiAgcmV0dXJuIGZ1bGxLZXkKfQoKZnVuY3Rpb24gaGF2ZUVxdWFsU2lnbmF0dXJlcyhwcmV2VHlwZSwgbmV4dFR5cGUpIHsKICBjb25zdCBwcmV2U2lnbmF0dXJlID0gYWxsU2lnbmF0dXJlc0J5VHlwZS5nZXQocHJldlR5cGUpCiAgY29uc3QgbmV4dFNpZ25hdHVyZSA9IGFsbFNpZ25hdHVyZXNCeVR5cGUuZ2V0KG5leHRUeXBlKQoKICBpZiAocHJldlNpZ25hdHVyZSA9PT0gdW5kZWZpbmVkICYmIG5leHRTaWduYXR1cmUgPT09IHVuZGVmaW5lZCkgewogICAgcmV0dXJuIHRydWUKICB9CiAgaWYgKHByZXZTaWduYXR1cmUgPT09IHVuZGVmaW5lZCB8fCBuZXh0U2lnbmF0dXJlID09PSB1bmRlZmluZWQpIHsKICAgIHJldHVybiBmYWxzZQogIH0KICBpZiAoY29tcHV0ZUZ1bGxLZXkocHJldlNpZ25hdHVyZSkgIT09IGNvbXB1dGVGdWxsS2V5KG5leHRTaWduYXR1cmUpKSB7CiAgICByZXR1cm4gZmFsc2UKICB9CiAgaWYgKG5leHRTaWduYXR1cmUuZm9yY2VSZXNldCkgewogICAgcmV0dXJuIGZhbHNlCiAgfQoKICByZXR1cm4gdHJ1ZQp9CgpmdW5jdGlvbiBpc1JlYWN0Q2xhc3ModHlwZSkgewogIHJldHVybiB0eXBlLnByb3RvdHlwZSAmJiB0eXBlLnByb3RvdHlwZS5pc1JlYWN0Q29tcG9uZW50Cn0KCmZ1bmN0aW9uIGNhblByZXNlcnZlU3RhdGVCZXR3ZWVuKHByZXZUeXBlLCBuZXh0VHlwZSkgewogIGlmIChpc1JlYWN0Q2xhc3MocHJldlR5cGUpIHx8IGlzUmVhY3RDbGFzcyhuZXh0VHlwZSkpIHsKICAgIHJldHVybiBmYWxzZQogIH0KICBpZiAoaGF2ZUVxdWFsU2lnbmF0dXJlcyhwcmV2VHlwZSwgbmV4dFR5cGUpKSB7CiAgICByZXR1cm4gdHJ1ZQogIH0KICByZXR1cm4gZmFsc2UKfQoKZnVuY3Rpb24gcmVzb2x2ZUZhbWlseSh0eXBlKSB7CiAgLy8gT25seSBjaGVjayB1cGRhdGVkIHR5cGVzIHRvIGtlZXAgbG9va3VwcyBmYXN0LgogIHJldHVybiB1cGRhdGVkRmFtaWxpZXNCeVR5cGUuZ2V0KHR5cGUpCn0KCi8vIFRoaXMgaXMgYSBzYWZldHkgbWVjaGFuaXNtIHRvIHByb3RlY3QgYWdhaW5zdCByb2d1ZSBnZXR0ZXJzIGFuZCBQcm94aWVzLgpmdW5jdGlvbiBnZXRQcm9wZXJ0eShvYmplY3QsIHByb3BlcnR5KSB7CiAgdHJ5IHsKICAgIHJldHVybiBvYmplY3RbcHJvcGVydHldCiAgfSBjYXRjaCAoZXJyKSB7CiAgICAvLyBJbnRlbnRpb25hbGx5IGlnbm9yZS4KICAgIHJldHVybiB1bmRlZmluZWQKICB9Cn0KCmZ1bmN0aW9uIHBlcmZvcm1SZWFjdFJlZnJlc2goKSB7CiAgaWYgKHBlbmRpbmdVcGRhdGVzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIG51bGwKICB9CiAgaWYgKGlzUGVyZm9ybWluZ1JlZnJlc2gpIHsKICAgIHJldHVybiBudWxsCiAgfQoKICBpc1BlcmZvcm1pbmdSZWZyZXNoID0gdHJ1ZQogIHRyeSB7CiAgICBjb25zdCBzdGFsZUZhbWlsaWVzID0gbmV3IFNldCgpCiAgICBjb25zdCB1cGRhdGVkRmFtaWxpZXMgPSBuZXcgU2V0KCkKCiAgICBjb25zdCB1cGRhdGVzID0gcGVuZGluZ1VwZGF0ZXMKICAgIHBlbmRpbmdVcGRhdGVzID0gW10KICAgIHVwZGF0ZXMuZm9yRWFjaCgoW2ZhbWlseSwgbmV4dFR5cGVdKSA9PiB7CiAgICAgIC8vIE5vdyB0aGF0IHdlIGdvdCBhIHJlYWwgZWRpdCwgd2UgY2FuIGNyZWF0ZSBhc3NvY2lhdGlvbnMKICAgICAgLy8gdGhhdCB3aWxsIGJlIHJlYWQgYnkgdGhlIFJlYWN0IHJlY29uY2lsZXIuCiAgICAgIGNvbnN0IHByZXZUeXBlID0gZmFtaWx5LmN1cnJlbnQKICAgICAgdXBkYXRlZEZhbWlsaWVzQnlUeXBlLnNldChwcmV2VHlwZSwgZmFtaWx5KQogICAgICB1cGRhdGVkRmFtaWxpZXNCeVR5cGUuc2V0KG5leHRUeXBlLCBmYW1pbHkpCiAgICAgIGZhbWlseS5jdXJyZW50ID0gbmV4dFR5cGUKCiAgICAgIC8vIERldGVybWluZSB3aGV0aGVyIHRoaXMgc2hvdWxkIGJlIGEgcmUtcmVuZGVyIG9yIGEgcmUtbW91bnQuCiAgICAgIGlmIChjYW5QcmVzZXJ2ZVN0YXRlQmV0d2VlbihwcmV2VHlwZSwgbmV4dFR5cGUpKSB7CiAgICAgICAgdXBkYXRlZEZhbWlsaWVzLmFkZChmYW1pbHkpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhbGVGYW1pbGllcy5hZGQoZmFtaWx5KQogICAgICB9CiAgICB9KQoKICAgIC8vIFRPRE86IHJlbmFtZSB0aGVzZSBmaWVsZHMgdG8gc29tZXRoaW5nIG1vcmUgbWVhbmluZ2Z1bC4KICAgIGNvbnN0IHVwZGF0ZSA9IHsKICAgICAgdXBkYXRlZEZhbWlsaWVzLCAvLyBGYW1pbGllcyB0aGF0IHdpbGwgcmUtcmVuZGVyIHByZXNlcnZpbmcgc3RhdGUKICAgICAgc3RhbGVGYW1pbGllcywgLy8gRmFtaWxpZXMgdGhhdCB3aWxsIGJlIHJlbW91bnRlZAogICAgfQoKICAgIGhlbHBlcnNCeVJlbmRlcmVySUQuZm9yRWFjaCgoaGVscGVycykgPT4gewogICAgICAvLyBFdmVuIGlmIHRoZXJlIGFyZSBubyByb290cywgc2V0IHRoZSBoYW5kbGVyIG9uIGZpcnN0IHVwZGF0ZS4KICAgICAgLy8gVGhpcyBlbnN1cmVzIHRoYXQgaWYgKm5ldyogcm9vdHMgYXJlIG1vdW50ZWQsIHRoZXknbGwgdXNlIHRoZSByZXNvbHZlIGhhbmRsZXIuCiAgICAgIGhlbHBlcnMuc2V0UmVmcmVzaEhhbmRsZXIocmVzb2x2ZUZhbWlseSkKICAgIH0pCgogICAgbGV0IGRpZEVycm9yID0gZmFsc2UKICAgIGxldCBmaXJzdEVycm9yID0gbnVsbAoKICAgIC8vIFdlIHNuYXBzaG90IG1hcHMgYW5kIHNldHMgdGhhdCBhcmUgbXV0YXRlZCBkdXJpbmcgY29tbWl0cy4KICAgIC8vIElmIHdlIGRvbid0IGRvIHRoaXMsIHRoZXJlIGlzIGEgcmlzayB0aGV5IHdpbGwgYmUgbXV0YXRlZCB3aGlsZQogICAgLy8gd2UgaXRlcmF0ZSBvdmVyIHRoZW0uIEZvciBleGFtcGxlLCB0cnlpbmcgdG8gcmVjb3ZlciBhIGZhaWxlZCByb290CiAgICAvLyBtYXkgY2F1c2UgYW5vdGhlciByb290IHRvIGJlIGFkZGVkIHRvIHRoZSBmYWlsZWQgbGlzdCAtLSBhbiBpbmZpbml0ZSBsb29wLgogICAgY29uc3QgZmFpbGVkUm9vdHNTbmFwc2hvdCA9IG5ldyBTZXQoZmFpbGVkUm9vdHMpCiAgICBjb25zdCBtb3VudGVkUm9vdHNTbmFwc2hvdCA9IG5ldyBTZXQobW91bnRlZFJvb3RzKQogICAgY29uc3QgaGVscGVyc0J5Um9vdFNuYXBzaG90ID0gbmV3IE1hcChoZWxwZXJzQnlSb290KQoKICAgIGZhaWxlZFJvb3RzU25hcHNob3QuZm9yRWFjaCgocm9vdCkgPT4gewogICAgICBjb25zdCBoZWxwZXJzID0gaGVscGVyc0J5Um9vdFNuYXBzaG90LmdldChyb290KQogICAgICBpZiAoaGVscGVycyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgICAgJ0NvdWxkIG5vdCBmaW5kIGhlbHBlcnMgZm9yIGEgcm9vdC4gVGhpcyBpcyBhIGJ1ZyBpbiBSZWFjdCBSZWZyZXNoLicsCiAgICAgICAgKQogICAgICB9CiAgICAgIGlmICghZmFpbGVkUm9vdHMuaGFzKHJvb3QpKSB7CiAgICAgICAgLy8gTm8gbG9uZ2VyIGZhaWxlZC4KICAgICAgfQogICAgICBpZiAocm9vdEVsZW1lbnRzID09PSBudWxsKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgaWYgKCFyb290RWxlbWVudHMuaGFzKHJvb3QpKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgY29uc3QgZWxlbWVudCA9IHJvb3RFbGVtZW50cy5nZXQocm9vdCkKICAgICAgdHJ5IHsKICAgICAgICBoZWxwZXJzLnNjaGVkdWxlUm9vdChyb290LCBlbGVtZW50KQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBpZiAoIWRpZEVycm9yKSB7CiAgICAgICAgICBkaWRFcnJvciA9IHRydWUKICAgICAgICAgIGZpcnN0RXJyb3IgPSBlcnIKICAgICAgICB9CiAgICAgICAgLy8gS2VlcCB0cnlpbmcgb3RoZXIgcm9vdHMuCiAgICAgIH0KICAgIH0pCiAgICBtb3VudGVkUm9vdHNTbmFwc2hvdC5mb3JFYWNoKChyb290KSA9PiB7CiAgICAgIGNvbnN0IGhlbHBlcnMgPSBoZWxwZXJzQnlSb290U25hcHNob3QuZ2V0KHJvb3QpCiAgICAgIGlmIChoZWxwZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICAgICAnQ291bGQgbm90IGZpbmQgaGVscGVycyBmb3IgYSByb290LiBUaGlzIGlzIGEgYnVnIGluIFJlYWN0IFJlZnJlc2guJywKICAgICAgICApCiAgICAgIH0KICAgICAgaWYgKCFtb3VudGVkUm9vdHMuaGFzKHJvb3QpKSB7CiAgICAgICAgLy8gTm8gbG9uZ2VyIG1vdW50ZWQuCiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICBoZWxwZXJzLnNjaGVkdWxlUmVmcmVzaChyb290LCB1cGRhdGUpCiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGlmICghZGlkRXJyb3IpIHsKICAgICAgICAgIGRpZEVycm9yID0gdHJ1ZQogICAgICAgICAgZmlyc3RFcnJvciA9IGVycgogICAgICAgIH0KICAgICAgICAvLyBLZWVwIHRyeWluZyBvdGhlciByb290cy4KICAgICAgfQogICAgfSkKICAgIGlmIChkaWRFcnJvcikgewogICAgICB0aHJvdyBmaXJzdEVycm9yCiAgICB9CiAgICByZXR1cm4gdXBkYXRlCiAgfSBmaW5hbGx5IHsKICAgIGlzUGVyZm9ybWluZ1JlZnJlc2ggPSBmYWxzZQogIH0KfQoKZnVuY3Rpb24gcmVnaXN0ZXIodHlwZSwgaWQpIHsKICBpZiAodHlwZSA9PT0gbnVsbCkgewogICAgcmV0dXJuCiAgfQogIGlmICh0eXBlb2YgdHlwZSAhPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgdHlwZSAhPT0gJ29iamVjdCcpIHsKICAgIHJldHVybgogIH0KCiAgLy8gVGhpcyBjYW4gaGFwcGVuIGluIGFuIGVkZ2UgY2FzZSwgZS5nLiBpZiB3ZSByZWdpc3RlcgogIC8vIHJldHVybiB2YWx1ZSBvZiBhIEhPQyBidXQgaXQgcmV0dXJucyBhIGNhY2hlZCBjb21wb25lbnQuCiAgLy8gSWdub3JlIGFueXRoaW5nIGJ1dCB0aGUgZmlyc3QgcmVnaXN0cmF0aW9uIGZvciBlYWNoIHR5cGUuCiAgaWYgKGFsbEZhbWlsaWVzQnlUeXBlLmhhcyh0eXBlKSkgewogICAgcmV0dXJuCiAgfQogIC8vIENyZWF0ZSBmYW1pbHkgb3IgcmVtZW1iZXIgdG8gdXBkYXRlIGl0LgogIC8vIE5vbmUgb2YgdGhpcyBib29ra2VlcGluZyBhZmZlY3RzIHJlY29uY2lsaWF0aW9uCiAgLy8gdW50aWwgdGhlIGZpcnN0IHBlcmZvcm1SZWFjdFJlZnJlc2goKSBjYWxsIGFib3ZlLgogIGxldCBmYW1pbHkgPSBhbGxGYW1pbGllc0J5SUQuZ2V0KGlkKQogIGlmIChmYW1pbHkgPT09IHVuZGVmaW5lZCkgewogICAgZmFtaWx5ID0geyBjdXJyZW50OiB0eXBlIH0KICAgIGFsbEZhbWlsaWVzQnlJRC5zZXQoaWQsIGZhbWlseSkKICB9IGVsc2UgewogICAgcGVuZGluZ1VwZGF0ZXMucHVzaChbZmFtaWx5LCB0eXBlXSkKICB9CiAgYWxsRmFtaWxpZXNCeVR5cGUuc2V0KHR5cGUsIGZhbWlseSkKCiAgLy8gVmlzaXQgaW5uZXIgdHlwZXMgYmVjYXVzZSB3ZSBtaWdodCBub3QgaGF2ZSByZWdpc3RlcmVkIHRoZW0uCiAgaWYgKHR5cGVvZiB0eXBlID09PSAnb2JqZWN0JyAmJiB0eXBlICE9PSBudWxsKSB7CiAgICBzd2l0Y2ggKGdldFByb3BlcnR5KHR5cGUsICckJHR5cGVvZicpKSB7CiAgICAgIGNhc2UgUkVBQ1RfRk9SV0FSRF9SRUZfVFlQRToKICAgICAgICByZWdpc3Rlcih0eXBlLnJlbmRlciwgaWQgKyAnJHJlbmRlcicpCiAgICAgICAgYnJlYWsKICAgICAgY2FzZSBSRUFDVF9NRU1PX1RZUEU6CiAgICAgICAgcmVnaXN0ZXIodHlwZS50eXBlLCBpZCArICckdHlwZScpCiAgICAgICAgYnJlYWsKICAgIH0KICB9Cn0KCmZ1bmN0aW9uIHNldFNpZ25hdHVyZSh0eXBlLCBrZXksIGZvcmNlUmVzZXQsIGdldEN1c3RvbUhvb2tzKSB7CiAgaWYgKCFhbGxTaWduYXR1cmVzQnlUeXBlLmhhcyh0eXBlKSkgewogICAgYWxsU2lnbmF0dXJlc0J5VHlwZS5zZXQodHlwZSwgewogICAgICBmb3JjZVJlc2V0LAogICAgICBvd25LZXk6IGtleSwKICAgICAgZnVsbEtleTogbnVsbCwKICAgICAgZ2V0Q3VzdG9tSG9va3M6IGdldEN1c3RvbUhvb2tzIHx8ICgoKSA9PiBbXSksCiAgICB9KQogIH0KICAvLyBWaXNpdCBpbm5lciB0eXBlcyBiZWNhdXNlIHdlIG1pZ2h0IG5vdCBoYXZlIHNpZ25lZCB0aGVtLgogIGlmICh0eXBlb2YgdHlwZSA9PT0gJ29iamVjdCcgJiYgdHlwZSAhPT0gbnVsbCkgewogICAgc3dpdGNoIChnZXRQcm9wZXJ0eSh0eXBlLCAnJCR0eXBlb2YnKSkgewogICAgICBjYXNlIFJFQUNUX0ZPUldBUkRfUkVGX1RZUEU6CiAgICAgICAgc2V0U2lnbmF0dXJlKHR5cGUucmVuZGVyLCBrZXksIGZvcmNlUmVzZXQsIGdldEN1c3RvbUhvb2tzKQogICAgICAgIGJyZWFrCiAgICAgIGNhc2UgUkVBQ1RfTUVNT19UWVBFOgogICAgICAgIHNldFNpZ25hdHVyZSh0eXBlLnR5cGUsIGtleSwgZm9yY2VSZXNldCwgZ2V0Q3VzdG9tSG9va3MpCiAgICAgICAgYnJlYWsKICAgIH0KICB9Cn0KCi8vIFRoaXMgaXMgbGF6aWx5IGNhbGxlZCBkdXJpbmcgZmlyc3QgcmVuZGVyIGZvciBhIHR5cGUuCi8vIEl0IGNhcHR1cmVzIEhvb2sgbGlzdCBhdCB0aGF0IHRpbWUgc28gaW5saW5lIHJlcXVpcmVzIGRvbid0IGJyZWFrIGNvbXBhcmlzb25zLgpmdW5jdGlvbiBjb2xsZWN0Q3VzdG9tSG9va3NGb3JTaWduYXR1cmUodHlwZSkgewogIGNvbnN0IHNpZ25hdHVyZSA9IGFsbFNpZ25hdHVyZXNCeVR5cGUuZ2V0KHR5cGUpCiAgaWYgKHNpZ25hdHVyZSAhPT0gdW5kZWZpbmVkKSB7CiAgICBjb21wdXRlRnVsbEtleShzaWduYXR1cmUpCiAgfQp9CgpleHBvcnQgZnVuY3Rpb24gaW5qZWN0SW50b0dsb2JhbEhvb2soZ2xvYmFsT2JqZWN0KSB7CiAgLy8gRm9yIFJlYWN0IE5hdGl2ZSwgdGhlIGdsb2JhbCBob29rIHdpbGwgYmUgc2V0IHVwIGJ5IHJlcXVpcmUoJ3JlYWN0LWRldnRvb2xzLWNvcmUnKS4KICAvLyBUaGF0IGNvZGUgd2lsbCBydW4gYmVmb3JlIHVzLiBTbyB3ZSBuZWVkIHRvIG1vbmtleXBhdGNoIGZ1bmN0aW9ucyBvbiBleGlzdGluZyBob29rLgoKICAvLyBGb3IgUmVhY3QgV2ViLCB0aGUgZ2xvYmFsIGhvb2sgd2lsbCBiZSBzZXQgdXAgYnkgdGhlIGV4dGVuc2lvbi4KICAvLyBUaGlzIHdpbGwgYWxzbyBydW4gYmVmb3JlIHVzLgogIGxldCBob29rID0gZ2xvYmFsT2JqZWN0Ll9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXwogIGlmIChob29rID09PSB1bmRlZmluZWQpIHsKICAgIC8vIEhvd2V2ZXIsIGlmIHRoZXJlIGlzIG5vIERldlRvb2xzIGV4dGVuc2lvbiwgd2UnbGwgbmVlZCB0byBzZXQgdXAgdGhlIGdsb2JhbCBob29rIG91cnNlbHZlcy4KICAgIC8vIE5vdGUgdGhhdCBpbiB0aGlzIGNhc2UgaXQncyBpbXBvcnRhbnQgdGhhdCByZW5kZXJlciBjb2RlIHJ1bnMgKmFmdGVyKiB0aGlzIG1ldGhvZCBjYWxsLgogICAgLy8gT3RoZXJ3aXNlLCB0aGUgcmVuZGVyZXIgd2lsbCB0aGluayB0aGF0IHRoZXJlIGlzIG5vIGdsb2JhbCBob29rLCBhbmQgd29uJ3QgZG8gdGhlIGluamVjdGlvbi4KICAgIGxldCBuZXh0SUQgPSAwCiAgICBnbG9iYWxPYmplY3QuX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fID0gaG9vayA9IHsKICAgICAgcmVuZGVyZXJzOiBuZXcgTWFwKCksCiAgICAgIHN1cHBvcnRzRmliZXI6IHRydWUsCiAgICAgIGluamVjdDogKGluamVjdGVkKSA9PiBuZXh0SUQrKywKICAgICAgb25TY2hlZHVsZUZpYmVyUm9vdDogKGlkLCByb290LCBjaGlsZHJlbikgPT4ge30sCiAgICAgIG9uQ29tbWl0RmliZXJSb290OiAoaWQsIHJvb3QsIG1heWJlUHJpb3JpdHlMZXZlbCwgZGlkRXJyb3IpID0+IHt9LAogICAgICBvbkNvbW1pdEZpYmVyVW5tb3VudCgpIHt9LAogICAgfQogIH0KCiAgaWYgKGhvb2suaXNEaXNhYmxlZCkgewogICAgLy8gVGhpcyBpc24ndCBhIHJlYWwgcHJvcGVydHkgb24gdGhlIGhvb2ssIGJ1dCBpdCBjYW4gYmUgc2V0IHRvIG9wdCBvdXQKICAgIC8vIG9mIERldlRvb2xzIGludGVncmF0aW9uIGFuZCBhc3NvY2lhdGVkIHdhcm5pbmdzIGFuZCBsb2dzLgogICAgLy8gVXNpbmcgY29uc29sZVsnd2FybiddIHRvIGV2YWRlIEJhYmVsIGFuZCBFU0xpbnQKICAgIGNvbnNvbGVbJ3dhcm4nXSgKICAgICAgJ1NvbWV0aGluZyBoYXMgc2hpbW1lZCB0aGUgUmVhY3QgRGV2VG9vbHMgZ2xvYmFsIGhvb2sgKF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXykuICcgKwogICAgICAgICdGYXN0IFJlZnJlc2ggaXMgbm90IGNvbXBhdGlibGUgd2l0aCB0aGlzIHNoaW0gYW5kIHdpbGwgYmUgZGlzYWJsZWQuJywKICAgICkKICAgIHJldHVybgogIH0KCiAgLy8gSGVyZSwgd2UganVzdCB3YW50IHRvIGdldCBhIHJlZmVyZW5jZSB0byBzY2hlZHVsZVJlZnJlc2guCiAgY29uc3Qgb2xkSW5qZWN0ID0gaG9vay5pbmplY3QKICBob29rLmluamVjdCA9IGZ1bmN0aW9uIChpbmplY3RlZCkgewogICAgY29uc3QgaWQgPSBvbGRJbmplY3QuYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgaWYgKAogICAgICB0eXBlb2YgaW5qZWN0ZWQuc2NoZWR1bGVSZWZyZXNoID09PSAnZnVuY3Rpb24nICYmCiAgICAgIHR5cGVvZiBpbmplY3RlZC5zZXRSZWZyZXNoSGFuZGxlciA9PT0gJ2Z1bmN0aW9uJwogICAgKSB7CiAgICAgIC8vIFRoaXMgdmVyc2lvbiBzdXBwb3J0cyBSZWFjdCBSZWZyZXNoLgogICAgICBoZWxwZXJzQnlSZW5kZXJlcklELnNldChpZCwgaW5qZWN0ZWQpCiAgICB9CiAgICByZXR1cm4gaWQKICB9CgogIC8vIERvIHRoZSBzYW1lIGZvciBhbnkgYWxyZWFkeSBpbmplY3RlZCByb290cy4KICAvLyBUaGlzIGlzIHVzZWZ1bCBpZiBSZWFjdERPTSBoYXMgYWxyZWFkeSBiZWVuIGluaXRpYWxpemVkLgogIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9pc3N1ZXMvMTc2MjYKICBob29rLnJlbmRlcmVycy5mb3JFYWNoKChpbmplY3RlZCwgaWQpID0+IHsKICAgIGlmICgKICAgICAgdHlwZW9mIGluamVjdGVkLnNjaGVkdWxlUmVmcmVzaCA9PT0gJ2Z1bmN0aW9uJyAmJgogICAgICB0eXBlb2YgaW5qZWN0ZWQuc2V0UmVmcmVzaEhhbmRsZXIgPT09ICdmdW5jdGlvbicKICAgICkgewogICAgICAvLyBUaGlzIHZlcnNpb24gc3VwcG9ydHMgUmVhY3QgUmVmcmVzaC4KICAgICAgaGVscGVyc0J5UmVuZGVyZXJJRC5zZXQoaWQsIGluamVjdGVkKQogICAgfQogIH0pCgogIC8vIFdlIGFsc28gd2FudCB0byB0cmFjayBjdXJyZW50bHkgbW91bnRlZCByb290cy4KICBjb25zdCBvbGRPbkNvbW1pdEZpYmVyUm9vdCA9IGhvb2sub25Db21taXRGaWJlclJvb3QKICBjb25zdCBvbGRPblNjaGVkdWxlRmliZXJSb290ID0gaG9vay5vblNjaGVkdWxlRmliZXJSb290IHx8ICgoKSA9PiB7fSkKICBob29rLm9uU2NoZWR1bGVGaWJlclJvb3QgPSBmdW5jdGlvbiAoaWQsIHJvb3QsIGNoaWxkcmVuKSB7CiAgICBpZiAoIWlzUGVyZm9ybWluZ1JlZnJlc2gpIHsKICAgICAgLy8gSWYgaXQgd2FzIGludGVudGlvbmFsbHkgc2NoZWR1bGVkLCBkb24ndCBhdHRlbXB0IHRvIHJlc3RvcmUuCiAgICAgIC8vIFRoaXMgaW5jbHVkZXMgaW50ZW50aW9uYWxseSBzY2hlZHVsZWQgdW5tb3VudHMuCiAgICAgIGZhaWxlZFJvb3RzLmRlbGV0ZShyb290KQogICAgICBpZiAocm9vdEVsZW1lbnRzICE9PSBudWxsKSB7CiAgICAgICAgcm9vdEVsZW1lbnRzLnNldChyb290LCBjaGlsZHJlbikKICAgICAgfQogICAgfQogICAgcmV0dXJuIG9sZE9uU2NoZWR1bGVGaWJlclJvb3QuYXBwbHkodGhpcywgYXJndW1lbnRzKQogIH0KICBob29rLm9uQ29tbWl0RmliZXJSb290ID0gZnVuY3Rpb24gKGlkLCByb290LCBtYXliZVByaW9yaXR5TGV2ZWwsIGRpZEVycm9yKSB7CiAgICBjb25zdCBoZWxwZXJzID0gaGVscGVyc0J5UmVuZGVyZXJJRC5nZXQoaWQpCiAgICBpZiAoaGVscGVycyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGhlbHBlcnNCeVJvb3Quc2V0KHJvb3QsIGhlbHBlcnMpCgogICAgICBjb25zdCBjdXJyZW50ID0gcm9vdC5jdXJyZW50CiAgICAgIGNvbnN0IGFsdGVybmF0ZSA9IGN1cnJlbnQuYWx0ZXJuYXRlCgogICAgICAvLyBXZSBuZWVkIHRvIGRldGVybWluZSB3aGV0aGVyIHRoaXMgcm9vdCBoYXMganVzdCAodW4pbW91bnRlZC4KICAgICAgLy8gVGhpcyBsb2dpYyBpcyBjb3B5LXBhc3RlZCBmcm9tIHNpbWlsYXIgbG9naWMgaW4gdGhlIERldlRvb2xzIGJhY2tlbmQuCiAgICAgIC8vIElmIHRoaXMgYnJlYWtzIHdpdGggc29tZSByZWZhY3RvcmluZywgeW91J2xsIHdhbnQgdG8gdXBkYXRlIERldlRvb2xzIHRvby4KCiAgICAgIGlmIChhbHRlcm5hdGUgIT09IG51bGwpIHsKICAgICAgICBjb25zdCB3YXNNb3VudGVkID0KICAgICAgICAgIGFsdGVybmF0ZS5tZW1vaXplZFN0YXRlICE9IG51bGwgJiYKICAgICAgICAgIGFsdGVybmF0ZS5tZW1vaXplZFN0YXRlLmVsZW1lbnQgIT0gbnVsbCAmJgogICAgICAgICAgbW91bnRlZFJvb3RzLmhhcyhyb290KQoKICAgICAgICBjb25zdCBpc01vdW50ZWQgPQogICAgICAgICAgY3VycmVudC5tZW1vaXplZFN0YXRlICE9IG51bGwgJiYgY3VycmVudC5tZW1vaXplZFN0YXRlLmVsZW1lbnQgIT0gbnVsbAoKICAgICAgICBpZiAoIXdhc01vdW50ZWQgJiYgaXNNb3VudGVkKSB7CiAgICAgICAgICAvLyBNb3VudCBhIG5ldyByb290LgogICAgICAgICAgbW91bnRlZFJvb3RzLmFkZChyb290KQogICAgICAgICAgZmFpbGVkUm9vdHMuZGVsZXRlKHJvb3QpCiAgICAgICAgfSBlbHNlIGlmICh3YXNNb3VudGVkICYmIGlzTW91bnRlZCkgewogICAgICAgICAgLy8gVXBkYXRlIGFuIGV4aXN0aW5nIHJvb3QuCiAgICAgICAgICAvLyBUaGlzIGRvZXNuJ3QgYWZmZWN0IG91ciBtb3VudGVkIHJvb3QgU2V0LgogICAgICAgIH0gZWxzZSBpZiAod2FzTW91bnRlZCAmJiAhaXNNb3VudGVkKSB7CiAgICAgICAgICAvLyBVbm1vdW50IGFuIGV4aXN0aW5nIHJvb3QuCiAgICAgICAgICBtb3VudGVkUm9vdHMuZGVsZXRlKHJvb3QpCiAgICAgICAgICBpZiAoZGlkRXJyb3IpIHsKICAgICAgICAgICAgLy8gV2UnbGwgcmVtb3VudCBpdCBvbiBmdXR1cmUgZWRpdHMuCiAgICAgICAgICAgIGZhaWxlZFJvb3RzLmFkZChyb290KQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaGVscGVyc0J5Um9vdC5kZWxldGUocm9vdCkKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKCF3YXNNb3VudGVkICYmICFpc01vdW50ZWQpIHsKICAgICAgICAgIGlmIChkaWRFcnJvcikgewogICAgICAgICAgICAvLyBXZSdsbCByZW1vdW50IGl0IG9uIGZ1dHVyZSBlZGl0cy4KICAgICAgICAgICAgZmFpbGVkUm9vdHMuYWRkKHJvb3QpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIE1vdW50IGEgbmV3IHJvb3QuCiAgICAgICAgbW91bnRlZFJvb3RzLmFkZChyb290KQogICAgICB9CiAgICB9CgogICAgLy8gQWx3YXlzIGNhbGwgdGhlIGRlY29yYXRlZCBEZXZUb29scyBob29rLgogICAgcmV0dXJuIG9sZE9uQ29tbWl0RmliZXJSb290LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICB9Cn0KCi8vIFRoaXMgaXMgYSB3cmFwcGVyIG92ZXIgbW9yZSBwcmltaXRpdmUgZnVuY3Rpb25zIGZvciBzZXR0aW5nIHNpZ25hdHVyZS4KLy8gU2lnbmF0dXJlcyBsZXQgdXMgZGVjaWRlIHdoZXRoZXIgdGhlIEhvb2sgb3JkZXIgaGFzIGNoYW5nZWQgb24gcmVmcmVzaC4KLy8KLy8gVGhpcyBmdW5jdGlvbiBpcyBpbnRlbmRlZCB0byBiZSB1c2VkIGFzIGEgdHJhbnNmb3JtIHRhcmdldCwgZS5nLjoKLy8gdmFyIF9zID0gY3JlYXRlU2lnbmF0dXJlRnVuY3Rpb25Gb3JUcmFuc2Zvcm0oKQovLwovLyBmdW5jdGlvbiBIZWxsbygpIHsKLy8gICBjb25zdCBbZm9vLCBzZXRGb29dID0gdXNlU3RhdGUoMCk7Ci8vICAgY29uc3QgdmFsdWUgPSB1c2VDdXN0b21Ib29rKCk7Ci8vICAgX3MoKTsgLyogQ2FsbCB3aXRob3V0IGFyZ3VtZW50cyB0cmlnZ2VycyBjb2xsZWN0aW5nIHRoZSBjdXN0b20gSG9vayBsaXN0LgovLyAgICAgICAgICAqIFRoaXMgZG9lc24ndCBoYXBwZW4gZHVyaW5nIHRoZSBtb2R1bGUgZXZhbHVhdGlvbiBiZWNhdXNlIHdlCi8vICAgICAgICAgICogZG9uJ3Qgd2FudCB0byBjaGFuZ2UgdGhlIG1vZHVsZSBvcmRlciB3aXRoIGlubGluZSByZXF1aXJlcy4KLy8gICAgICAgICAgKiBOZXh0IGNhbGxzIGFyZSBub29wcy4gKi8KLy8gICByZXR1cm4gPGgxPkhpPC9oMT47Ci8vIH0KLy8KLy8gLyogQ2FsbCB3aXRoIGFyZ3VtZW50cyBhdHRhY2hlcyB0aGUgc2lnbmF0dXJlIHRvIHRoZSB0eXBlOiAqLwovLyBfcygKLy8gICBIZWxsbywKLy8gICAndXNlU3RhdGV7W2Zvbywgc2V0Rm9vXX0oMCknLAovLyAgICgpID0+IFt1c2VDdXN0b21Ib29rXSwgLyogTGF6eSB0byBhdm9pZCB0cmlnZ2VyaW5nIGlubGluZSByZXF1aXJlcyAqLwovLyApOwpleHBvcnQgZnVuY3Rpb24gY3JlYXRlU2lnbmF0dXJlRnVuY3Rpb25Gb3JUcmFuc2Zvcm0oKSB7CiAgbGV0IHNhdmVkVHlwZQogIGxldCBoYXNDdXN0b21Ib29rcwogIGxldCBkaWRDb2xsZWN0SG9va3MgPSBmYWxzZQogIHJldHVybiBmdW5jdGlvbiAodHlwZSwga2V5LCBmb3JjZVJlc2V0LCBnZXRDdXN0b21Ib29rcykgewogICAgaWYgKHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnKSB7CiAgICAgIC8vIFdlJ3JlIGluIHRoZSBpbml0aWFsIHBoYXNlIHRoYXQgYXNzb2NpYXRlcyBzaWduYXR1cmVzCiAgICAgIC8vIHdpdGggdGhlIGZ1bmN0aW9ucy4gTm90ZSB0aGlzIG1heSBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXMKICAgICAgLy8gaW4gSE9DIGNoYWlucyBsaWtlIF9zKGhvYzEoX3MoaG9jMihfcyhhY3R1YWxGdW5jdGlvbikpKSkpLgogICAgICBpZiAoIXNhdmVkVHlwZSkgewogICAgICAgIC8vIFdlJ3JlIGluIHRoZSBpbm5lcm1vc3QgY2FsbCwgc28gdGhpcyBpcyB0aGUgYWN0dWFsIHR5cGUuCiAgICAgICAgLy8gJEZsb3dGaXhNZVtlc2NhcGVkLWdlbmVyaWNdIGRpc2NvdmVyZWQgd2hlbiB1cGRhdGluZyBGbG93CiAgICAgICAgc2F2ZWRUeXBlID0gdHlwZQogICAgICAgIGhhc0N1c3RvbUhvb2tzID0gdHlwZW9mIGdldEN1c3RvbUhvb2tzID09PSAnZnVuY3Rpb24nCiAgICAgIH0KICAgICAgLy8gU2V0IHRoZSBzaWduYXR1cmUgZm9yIGFsbCB0eXBlcyAoZXZlbiB3cmFwcGVycyEpIGluIGNhc2UKICAgICAgLy8gdGhleSBoYXZlIG5vIHNpZ25hdHVyZXMgb2YgdGhlaXIgb3duLiBUaGlzIGlzIHRvIHByZXZlbnQKICAgICAgLy8gcHJvYmxlbXMgbGlrZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzIwNDE3LgogICAgICBpZiAoCiAgICAgICAgdHlwZSAhPSBudWxsICYmCiAgICAgICAgKHR5cGVvZiB0eXBlID09PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiB0eXBlID09PSAnb2JqZWN0JykKICAgICAgKSB7CiAgICAgICAgc2V0U2lnbmF0dXJlKHR5cGUsIGtleSwgZm9yY2VSZXNldCwgZ2V0Q3VzdG9tSG9va3MpCiAgICAgIH0KICAgICAgcmV0dXJuIHR5cGUKICAgIH0gZWxzZSB7CiAgICAgIC8vIFdlJ3JlIGluIHRoZSBfcygpIGNhbGwgd2l0aG91dCBhcmd1bWVudHMsIHdoaWNoIG1lYW5zCiAgICAgIC8vIHRoaXMgaXMgdGhlIHRpbWUgdG8gY29sbGVjdCBjdXN0b20gSG9vayBzaWduYXR1cmVzLgogICAgICAvLyBPbmx5IGRvIHRoaXMgb25jZS4gVGhpcyBwYXRoIGlzIGhvdCBhbmQgcnVucyAqaW5zaWRlKiBldmVyeSByZW5kZXIhCiAgICAgIGlmICghZGlkQ29sbGVjdEhvb2tzICYmIGhhc0N1c3RvbUhvb2tzKSB7CiAgICAgICAgZGlkQ29sbGVjdEhvb2tzID0gdHJ1ZQogICAgICAgIGNvbGxlY3RDdXN0b21Ib29rc0ZvclNpZ25hdHVyZShzYXZlZFR5cGUpCiAgICAgIH0KICAgIH0KICB9Cn0KCmZ1bmN0aW9uIGlzTGlrZWx5Q29tcG9uZW50VHlwZSh0eXBlKSB7CiAgc3dpdGNoICh0eXBlb2YgdHlwZSkgewogICAgY2FzZSAnZnVuY3Rpb24nOiB7CiAgICAgIC8vIEZpcnN0LCBkZWFsIHdpdGggY2xhc3Nlcy4KICAgICAgaWYgKHR5cGUucHJvdG90eXBlICE9IG51bGwpIHsKICAgICAgICBpZiAodHlwZS5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudCkgewogICAgICAgICAgLy8gUmVhY3QgY2xhc3MuCiAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgIH0KICAgICAgICBjb25zdCBvd25OYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHR5cGUucHJvdG90eXBlKQogICAgICAgIGlmIChvd25OYW1lcy5sZW5ndGggPiAxIHx8IG93bk5hbWVzWzBdICE9PSAnY29uc3RydWN0b3InKSB7CiAgICAgICAgICAvLyBUaGlzIGxvb2tzIGxpa2UgYSBjbGFzcy4KICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KCiAgICAgICAgaWYgKHR5cGUucHJvdG90eXBlLl9fcHJvdG9fXyAhPT0gT2JqZWN0LnByb3RvdHlwZSkgewogICAgICAgICAgLy8gSXQgaGFzIGEgc3VwZXJjbGFzcy4KICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgICAvLyBQYXNzIHRocm91Z2guCiAgICAgICAgLy8gVGhpcyBsb29rcyBsaWtlIGEgcmVndWxhciBmdW5jdGlvbiB3aXRoIGVtcHR5IHByb3RvdHlwZS4KICAgICAgfQogICAgICAvLyBGb3IgcGxhaW4gZnVuY3Rpb25zIGFuZCBhcnJvd3MsIHVzZSBuYW1lIGFzIGEgaGV1cmlzdGljLgogICAgICBjb25zdCBuYW1lID0gdHlwZS5uYW1lIHx8IHR5cGUuZGlzcGxheU5hbWUKICAgICAgcmV0dXJuIHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJyAmJiAvXltBLVpdLy50ZXN0KG5hbWUpCiAgICB9CiAgICBjYXNlICdvYmplY3QnOiB7CiAgICAgIGlmICh0eXBlICE9IG51bGwpIHsKICAgICAgICBzd2l0Y2ggKGdldFByb3BlcnR5KHR5cGUsICckJHR5cGVvZicpKSB7CiAgICAgICAgICBjYXNlIFJFQUNUX0ZPUldBUkRfUkVGX1RZUEU6CiAgICAgICAgICBjYXNlIFJFQUNUX01FTU9fVFlQRToKICAgICAgICAgICAgLy8gRGVmaW5pdGVseSBSZWFjdCBjb21wb25lbnRzLgogICAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBmYWxzZQogICAgfQogICAgZGVmYXVsdDogewogICAgICByZXR1cm4gZmFsc2UKICAgIH0KICB9Cn0KCmZ1bmN0aW9uIGlzQ29tcG91bmRDb21wb25lbnQodHlwZSkgewogIGlmICghaXNQbGFpbk9iamVjdCh0eXBlKSkgcmV0dXJuIGZhbHNlCiAgZm9yIChjb25zdCBrZXkgaW4gdHlwZSkgewogICAgaWYgKCFpc0xpa2VseUNvbXBvbmVudFR5cGUodHlwZVtrZXldKSkgcmV0dXJuIGZhbHNlCiAgfQogIHJldHVybiB0cnVlCn0KCmZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qob2JqKSB7CiAgcmV0dXJuICgKICAgIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBPYmplY3RdJyAmJgogICAgKG9iai5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0IHx8IG9iai5jb25zdHJ1Y3RvciA9PT0gdW5kZWZpbmVkKQogICkKfQoKLyoqCiAqIFBsdWdpbiB1dGlscwogKi8KCmV4cG9ydCBmdW5jdGlvbiBnZXRSZWZyZXNoUmVnKGZpbGVuYW1lKSB7CiAgcmV0dXJuICh0eXBlLCBpZCkgPT4gcmVnaXN0ZXIodHlwZSwgZmlsZW5hbWUgKyAnICcgKyBpZCkKfQoKLy8gVGFrZW4gZnJvbSBodHRwczovL2dpdGh1Yi5jb20vcG1tbXdoL3JlYWN0LXJlZnJlc2gtd2VicGFjay1wbHVnaW4vYmxvYi9tYWluL2xpYi9ydW50aW1lL1JlZnJlc2hVdGlscy5qcyNMMTQxCi8vIFRoaXMgYWxsb3dzIHRvIHJlc2lzdGVyIGNvbXBvbmVudHMgbm90IGRldGVjdGVkIGJ5IFNXQyBsaWtlIHN0eWxlZCBjb21wb25lbnQKZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyRXhwb3J0c0ZvclJlYWN0UmVmcmVzaChmaWxlbmFtZSwgbW9kdWxlRXhwb3J0cykgewogIGZvciAoY29uc3Qga2V5IGluIG1vZHVsZUV4cG9ydHMpIHsKICAgIGlmIChrZXkgPT09ICdfX2VzTW9kdWxlJykgY29udGludWUKICAgIGNvbnN0IGV4cG9ydFZhbHVlID0gbW9kdWxlRXhwb3J0c1trZXldCiAgICBpZiAoaXNMaWtlbHlDb21wb25lbnRUeXBlKGV4cG9ydFZhbHVlKSkgewogICAgICAvLyAnZXhwb3J0JyBpcyByZXF1aXJlZCB0byBhdm9pZCBrZXkgY29sbGlzaW9uIHdoZW4gcmVuYW1lZCBleHBvcnRzIHRoYXQKICAgICAgLy8gc2hhZG93IGEgbG9jYWwgY29tcG9uZW50IG5hbWU6IGh0dHBzOi8vZ2l0aHViLmNvbS92aXRlanMvdml0ZS1wbHVnaW4tcmVhY3QvaXNzdWVzLzExNgogICAgICAvLyBUaGUgcmVnaXN0ZXIgZnVuY3Rpb24gaGFzIGFuIGlkZW50aXR5IGNoZWNrIHRvIG5vdCByZWdpc3RlciB0d2ljZSB0aGUgc2FtZSBjb21wb25lbnQsCiAgICAgIC8vIHNvIHRoaXMgaXMgc2FmZSB0byBub3QgdXNlZCB0aGUgc2FtZSBrZXkgaGVyZS4KICAgICAgcmVnaXN0ZXIoZXhwb3J0VmFsdWUsIGZpbGVuYW1lICsgJyBleHBvcnQgJyArIGtleSkKICAgIH0gZWxzZSBpZiAoaXNDb21wb3VuZENvbXBvbmVudChleHBvcnRWYWx1ZSkpIHsKICAgICAgZm9yIChjb25zdCBzdWJLZXkgaW4gZXhwb3J0VmFsdWUpIHsKICAgICAgICByZWdpc3RlcigKICAgICAgICAgIGV4cG9ydFZhbHVlW3N1YktleV0sCiAgICAgICAgICBmaWxlbmFtZSArICcgZXhwb3J0ICcgKyBrZXkgKyAnLScgKyBzdWJLZXksCiAgICAgICAgKQogICAgICB9CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBkZWJvdW5jZShmbiwgZGVsYXkpIHsKICBsZXQgaGFuZGxlCiAgcmV0dXJuICgpID0+IHsKICAgIGNsZWFyVGltZW91dChoYW5kbGUpCiAgICBoYW5kbGUgPSBzZXRUaW1lb3V0KGZuLCBkZWxheSkKICB9Cn0KCmNvbnN0IGhvb2tzID0gW10Kd2luZG93Ll9fcmVnaXN0ZXJCZWZvcmVQZXJmb3JtUmVhY3RSZWZyZXNoID0gKGNiKSA9PiB7CiAgaG9va3MucHVzaChjYikKfQpjb25zdCBlbnF1ZXVlVXBkYXRlID0gZGVib3VuY2UoYXN5bmMgKCkgPT4gewogIGlmIChob29rcy5sZW5ndGgpIGF3YWl0IFByb21pc2UuYWxsKGhvb2tzLm1hcCgoY2IpID0+IGNiKCkpKQogIHBlcmZvcm1SZWFjdFJlZnJlc2goKQp9LCAxNikKCmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVJlZnJlc2hCb3VuZGFyeUFuZEVucXVldWVVcGRhdGUoCiAgaWQsCiAgcHJldkV4cG9ydHMsCiAgbmV4dEV4cG9ydHMsCikgewogIGNvbnN0IGlnbm9yZWRFeHBvcnRzID0gd2luZG93Ll9fZ2V0UmVhY3RSZWZyZXNoSWdub3JlZEV4cG9ydHM/Lih7IGlkIH0pID8/IFtdCiAgaWYgKAogICAgcHJlZGljYXRlT25FeHBvcnQoCiAgICAgIGlnbm9yZWRFeHBvcnRzLAogICAgICBwcmV2RXhwb3J0cywKICAgICAgKGtleSkgPT4ga2V5IGluIG5leHRFeHBvcnRzLAogICAgKSAhPT0gdHJ1ZQogICkgewogICAgcmV0dXJuICdDb3VsZCBub3QgRmFzdCBSZWZyZXNoIChleHBvcnQgcmVtb3ZlZCknCiAgfQogIGlmICgKICAgIHByZWRpY2F0ZU9uRXhwb3J0KAogICAgICBpZ25vcmVkRXhwb3J0cywKICAgICAgbmV4dEV4cG9ydHMsCiAgICAgIChrZXkpID0+IGtleSBpbiBwcmV2RXhwb3J0cywKICAgICkgIT09IHRydWUKICApIHsKICAgIHJldHVybiAnQ291bGQgbm90IEZhc3QgUmVmcmVzaCAobmV3IGV4cG9ydCknCiAgfQoKICBsZXQgaGFzRXhwb3J0cyA9IGZhbHNlCiAgY29uc3QgYWxsRXhwb3J0c0FyZUNvbXBvbmVudHNPclVuY2hhbmdlZCA9IHByZWRpY2F0ZU9uRXhwb3J0KAogICAgaWdub3JlZEV4cG9ydHMsCiAgICBuZXh0RXhwb3J0cywKICAgIChrZXksIHZhbHVlKSA9PiB7CiAgICAgIGhhc0V4cG9ydHMgPSB0cnVlCiAgICAgIGlmIChpc0xpa2VseUNvbXBvbmVudFR5cGUodmFsdWUpKSByZXR1cm4gdHJ1ZQogICAgICBpZiAoaXNDb21wb3VuZENvbXBvbmVudCh2YWx1ZSkpIHJldHVybiB0cnVlCiAgICAgIHJldHVybiBwcmV2RXhwb3J0c1trZXldID09PSBuZXh0RXhwb3J0c1trZXldCiAgICB9LAogICkKICBpZiAoaGFzRXhwb3J0cyAmJiBhbGxFeHBvcnRzQXJlQ29tcG9uZW50c09yVW5jaGFuZ2VkID09PSB0cnVlKSB7CiAgICBlbnF1ZXVlVXBkYXRlKCkKICB9IGVsc2UgewogICAgcmV0dXJuIGBDb3VsZCBub3QgRmFzdCBSZWZyZXNoICgiJHthbGxFeHBvcnRzQXJlQ29tcG9uZW50c09yVW5jaGFuZ2VkfSIgZXhwb3J0IGlzIGluY29tcGF0aWJsZSkuIExlYXJuIG1vcmUgYXQgaHR0cHM6Ly9naXRodWIuY29tL3ZpdGVqcy92aXRlLXBsdWdpbi1yZWFjdC90cmVlL21haW4vcGFja2FnZXMvcGx1Z2luLXJlYWN0I2NvbnNpc3RlbnQtY29tcG9uZW50cy1leHBvcnRzYAogIH0KfQoKZnVuY3Rpb24gcHJlZGljYXRlT25FeHBvcnQoaWdub3JlZEV4cG9ydHMsIG1vZHVsZUV4cG9ydHMsIHByZWRpY2F0ZSkgewogIGZvciAoY29uc3Qga2V5IGluIG1vZHVsZUV4cG9ydHMpIHsKICAgIGlmIChrZXkgPT09ICdfX2VzTW9kdWxlJykgY29udGludWUKICAgIGlmIChpZ25vcmVkRXhwb3J0cy5pbmNsdWRlcyhrZXkpKSBjb250aW51ZQogICAgY29uc3QgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobW9kdWxlRXhwb3J0cywga2V5KQogICAgaWYgKGRlc2MgJiYgZGVzYy5nZXQpIHJldHVybiBrZXkKICAgIGlmICghcHJlZGljYXRlKGtleSwgbW9kdWxlRXhwb3J0c1trZXldKSkgcmV0dXJuIGtleQogIH0KICByZXR1cm4gdHJ1ZQp9CgovLyBIaWRlcyB2aXRlLWlnbm9yZWQgZHluYW1pYyBpbXBvcnQgc28gdGhhdCBWaXRlIGNhbiBza2lwIGFuYWx5c2lzIGlmIG5vIG90aGVyCi8vIGR5bmFtaWMgaW1wb3J0IGlzIHByZXNlbnQgKGh0dHBzOi8vZ2l0aHViLmNvbS92aXRlanMvdml0ZS9wdWxsLzEyNzMyKQpleHBvcnQgY29uc3QgX19obXJfaW1wb3J0ID0gKG1vZHVsZSkgPT4gaW1wb3J0KC8qIEB2aXRlLWlnbm9yZSAqLyBfX3ZpdGVfX2luamVjdFF1ZXJ5KG1vZHVsZSwgJ2ltcG9ydCcpKQoKLy8gRm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGggQHZpdGVqcy9wbHVnaW4tcmVhY3QuCmV4cG9ydCBkZWZhdWx0IHsgaW5qZWN0SW50b0dsb2JhbEhvb2sgfQoKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYklrQnlaV0ZqZEMxeVpXWnlaWE5vSWwwc0luTnZkWEpqWlhORGIyNTBaVzUwSWpwYkltbHRjRzl5ZENCN0lHbHVhbVZqZEZGMVpYSjVJR0Z6SUY5ZmRtbDBaVjlmYVc1cVpXTjBVWFZsY25rZ2ZTQm1jbTl0SUZ3aUwwQjJhWFJsTDJOc2FXVnVkRndpT3k4cUlHZHNiMkpoYkNCM2FXNWtiM2NnS2k5Y2JpOHFJR1Z6YkdsdWRDMWthWE5oWW14bElHVnhaWEZsY1N3Z2NISmxabVZ5TFdOdmJuTjBMQ0JBZEhsd1pYTmpjbWx3ZEMxbGMyeHBiblF2Ym04dFpXMXdkSGt0Wm5WdVkzUnBiMjRnS2k5Y2JseHVMeW9oSUVOdmNIbHlhV2RvZENBb1l5a2dUV1YwWVNCUWJHRjBabTl5YlhNc0lFbHVZeTRnWVc1a0lHRm1abWxzYVdGMFpYTXVJQ29xTDF4dUx5b3FYRzRnS2lCVWFHbHpJR2x6SUhOcGJYQnNhV1pwWldRZ2NIVnlaUzFxY3lCMlpYSnphVzl1SUc5bUlHaDBkSEJ6T2k4dloybDBhSFZpTG1OdmJTOW1ZV05sWW05dmF5OXlaV0ZqZEM5aWJHOWlMMjFoYVc0dmNHRmphMkZuWlhNdmNtVmhZM1F0Y21WbWNtVnphQzl6Y21NdlVtVmhZM1JHY21WemFGSjFiblJwYldVdWFuTmNiaUFxSUhkcGRHaHZkWFFnU1VVeE1TQmpiMjF3WVhScFltbHNhWFI1SUdGdVpDQjJaWEppYjNObElHbHpSR1YySUdOb1pXTnJjeTVjYmlBcUlGTnZiV1VnZFhScGJITWdZWEpsSUdGd2NHVnVaR1ZrSUdGMElIUm9aU0JpYjNSMGIyMGdabTl5SUVoTlVpQnBiblJsWjNKaGRHbHZiaTVjYmlBcUwxeHVYRzVqYjI1emRDQlNSVUZEVkY5R1QxSlhRVkpFWDFKRlJsOVVXVkJGSUQwZ1UzbHRZbTlzTG1admNpZ25jbVZoWTNRdVptOXlkMkZ5WkY5eVpXWW5LVnh1WTI5dWMzUWdVa1ZCUTFSZlRVVk5UMTlVV1ZCRklEMGdVM2x0WW05c0xtWnZjaWduY21WaFkzUXViV1Z0YnljcFhHNWNiaTh2SUZkbElHNWxkbVZ5SUhKbGJXOTJaU0IwYUdWelpTQmhjM052WTJsaGRHbHZibk11WEc0dkx5QkpkQ2R6SUU5TElIUnZJSEpsWm1WeVpXNWpaU0JtWVcxcGJHbGxjeXdnWW5WMElIVnpaU0JYWldGclRXRndMMU5sZENCbWIzSWdkSGx3WlhNdVhHNXNaWFFnWVd4c1JtRnRhV3hwWlhOQ2VVbEVJRDBnYm1WM0lFMWhjQ2dwWEc1c1pYUWdZV3hzUm1GdGFXeHBaWE5DZVZSNWNHVWdQU0J1WlhjZ1YyVmhhMDFoY0NncFhHNXNaWFFnWVd4c1UybG5ibUYwZFhKbGMwSjVWSGx3WlNBOUlHNWxkeUJYWldGclRXRndLQ2xjYmx4dUx5OGdWR2hwY3lCWFpXRnJUV0Z3SUdseklISmxZV1FnWW5rZ1VtVmhZM1FzSUhOdklIZGxJRzl1YkhrZ2NIVjBJR1poYldsc2FXVnpYRzR2THlCMGFHRjBJR2hoZG1VZ1lXTjBkV0ZzYkhrZ1ltVmxiaUJsWkdsMFpXUWdhR1Z5WlM0Z1ZHaHBjeUJyWldWd2N5QmphR1ZqYTNNZ1ptRnpkQzVjYm1OdmJuTjBJSFZ3WkdGMFpXUkdZVzFwYkdsbGMwSjVWSGx3WlNBOUlHNWxkeUJYWldGclRXRndLQ2xjYmx4dUx5OGdWR2hwY3lCcGN5QmpiR1ZoY21Wa0lHOXVJR1YyWlhKNUlIQmxjbVp2Y20xU1pXRmpkRkpsWm5KbGMyZ29LU0JqWVd4c0xseHVMeThnU1hRZ2FYTWdZVzRnWVhKeVlYa2diMllnVzBaaGJXbHNlU3dnVG1WNGRGUjVjR1ZkSUhSMWNHeGxjeTVjYm14bGRDQndaVzVrYVc1blZYQmtZWFJsY3lBOUlGdGRYRzVjYmk4dklGUm9hWE1nYVhNZ2FXNXFaV04wWldRZ1lua2dkR2hsSUhKbGJtUmxjbVZ5SUhacFlTQkVaWFpVYjI5c2N5Qm5iRzlpWVd3Z2FHOXZheTVjYm1OdmJuTjBJR2hsYkhCbGNuTkNlVkpsYm1SbGNtVnlTVVFnUFNCdVpYY2dUV0Z3S0NsY2JseHVZMjl1YzNRZ2FHVnNjR1Z5YzBKNVVtOXZkQ0E5SUc1bGR5Qk5ZWEFvS1Z4dVhHNHZMeUJYWlNCclpXVndJSFJ5WVdOcklHOW1JRzF2ZFc1MFpXUWdjbTl2ZEhNZ2MyOGdkMlVnWTJGdUlITmphR1ZrZFd4bElIVndaR0YwWlhNdVhHNWpiMjV6ZENCdGIzVnVkR1ZrVW05dmRITWdQU0J1WlhjZ1UyVjBLQ2xjYmk4dklFbG1JR0VnY205dmRDQmpZWEIwZFhKbGN5QmhiaUJsY25KdmNpd2dkMlVnY21WdFpXMWlaWElnYVhRZ2MyOGdkMlVnWTJGdUlISmxkSEo1SUc5dUlHVmthWFF1WEc1amIyNXpkQ0JtWVdsc1pXUlNiMjkwY3lBOUlHNWxkeUJUWlhRb0tWeHVYRzR2THlCWFpTQmhiSE52SUhKbGJXVnRZbVZ5SUhSb1pTQnNZWE4wSUdWc1pXMWxiblFnWm05eUlHVjJaWEo1SUhKdmIzUXVYRzR2THlCSmRDQnVaV1ZrY3lCMGJ5QmlaU0IzWldGcklHSmxZMkYxYzJVZ2QyVWdaRzhnZEdocGN5QmxkbVZ1SUdadmNpQnliMjkwY3lCMGFHRjBJR1poYVd4bFpDQjBieUJ0YjNWdWRDNWNiaTh2SUVsbUlIUm9aWEpsSUdseklHNXZJRmRsWVd0TllYQXNJSGRsSUhkdmJpZDBJR0YwZEdWdGNIUWdkRzhnWkc4Z2NtVjBjbmxwYm1jdVhHNXNaWFFnY205dmRFVnNaVzFsYm5SeklEMGdibVYzSUZkbFlXdE5ZWEFvS1Z4dWJHVjBJR2x6VUdWeVptOXliV2x1WjFKbFpuSmxjMmdnUFNCbVlXeHpaVnh1WEc1bWRXNWpkR2x2YmlCamIyMXdkWFJsUm5Wc2JFdGxlU2h6YVdkdVlYUjFjbVVwSUh0Y2JpQWdhV1lnS0hOcFoyNWhkSFZ5WlM1bWRXeHNTMlY1SUNFOVBTQnVkV3hzS1NCN1hHNGdJQ0FnY21WMGRYSnVJSE5wWjI1aGRIVnlaUzVtZFd4c1MyVjVYRzRnSUgxY2JseHVJQ0JzWlhRZ1puVnNiRXRsZVNBOUlITnBaMjVoZEhWeVpTNXZkMjVMWlhsY2JpQWdiR1YwSUdodmIydHpYRzRnSUhSeWVTQjdYRzRnSUNBZ2FHOXZhM01nUFNCemFXZHVZWFIxY21VdVoyVjBRM1Z6ZEc5dFNHOXZhM01vS1Z4dUlDQjlJR05oZEdOb0lDaGxjbklwSUh0Y2JpQWdJQ0F2THlCVWFHbHpJR05oYmlCb1lYQndaVzRnYVc0Z1lXNGdaV1JuWlNCallYTmxMQ0JsTG1jdUlHbG1JR1Y0Y0hKbGMzTnBiMjRnYkdsclpTQkdiMjh1ZFhObFUyOXRaWFJvYVc1blhHNGdJQ0FnTHk4Z1pHVndaVzVrY3lCdmJpQkdiMjhnZDJocFkyZ2dhWE1nYkdGNmFXeDVJR2x1YVhScFlXeHBlbVZrSUdSMWNtbHVaeUJ5Wlc1a1pYSnBibWN1WEc0Z0lDQWdMeThnU1c0Z2RHaGhkQ0JqWVhObElHcDFjM1FnWVhOemRXMWxJSGRsSjJ4c0lHaGhkbVVnZEc4Z2NtVnRiM1Z1ZEM1Y2JpQWdJQ0J6YVdkdVlYUjFjbVV1Wm05eVkyVlNaWE5sZENBOUlIUnlkV1ZjYmlBZ0lDQnphV2R1WVhSMWNtVXVablZzYkV0bGVTQTlJR1oxYkd4TFpYbGNiaUFnSUNCeVpYUjFjbTRnWm5Wc2JFdGxlVnh1SUNCOVhHNWNiaUFnWm05eUlDaHNaWFFnYVNBOUlEQTdJR2tnUENCb2IyOXJjeTVzWlc1bmRHZzdJR2tyS3lrZ2UxeHVJQ0FnSUdOdmJuTjBJR2h2YjJzZ1BTQm9iMjlyYzF0cFhWeHVJQ0FnSUdsbUlDaDBlWEJsYjJZZ2FHOXZheUFoUFQwZ0oyWjFibU4wYVc5dUp5a2dlMXh1SUNBZ0lDQWdMeThnVTI5dFpYUm9hVzVuSjNNZ2QzSnZibWN1SUVGemMzVnRaU0IzWlNCdVpXVmtJSFJ2SUhKbGJXOTFiblF1WEc0Z0lDQWdJQ0J6YVdkdVlYUjFjbVV1Wm05eVkyVlNaWE5sZENBOUlIUnlkV1ZjYmlBZ0lDQWdJSE5wWjI1aGRIVnlaUzVtZFd4c1MyVjVJRDBnWm5Wc2JFdGxlVnh1SUNBZ0lDQWdjbVYwZFhKdUlHWjFiR3hMWlhsY2JpQWdJQ0I5WEc0Z0lDQWdZMjl1YzNRZ2JtVnpkR1ZrU0c5dmExTnBaMjVoZEhWeVpTQTlJR0ZzYkZOcFoyNWhkSFZ5WlhOQ2VWUjVjR1V1WjJWMEtHaHZiMnNwWEc0Z0lDQWdhV1lnS0c1bGMzUmxaRWh2YjJ0VGFXZHVZWFIxY21VZ1BUMDlJSFZ1WkdWbWFXNWxaQ2tnZTF4dUlDQWdJQ0FnTHk4Z1RtOGdjMmxuYm1GMGRYSmxJRzFsWVc1eklFaHZiMnNnZDJGemJpZDBJR2x1SUhSb1pTQnpiM1Z5WTJVZ1kyOWtaU3dnWlM1bkxpQnBiaUJoSUd4cFluSmhjbmt1WEc0Z0lDQWdJQ0F2THlCWFpTZHNiQ0J6YTJsd0lHbDBJR0psWTJGMWMyVWdkMlVnWTJGdUlHRnpjM1Z0WlNCcGRDQjNiMjRuZENCamFHRnVaMlVnWkhWeWFXNW5JSFJvYVhNZ2MyVnpjMmx2Ymk1Y2JpQWdJQ0FnSUdOdmJuUnBiblZsWEc0Z0lDQWdmVnh1SUNBZ0lHTnZibk4wSUc1bGMzUmxaRWh2YjJ0TFpYa2dQU0JqYjIxd2RYUmxSblZzYkV0bGVTaHVaWE4wWldSSWIyOXJVMmxuYm1GMGRYSmxLVnh1SUNBZ0lHbG1JQ2h1WlhOMFpXUkliMjlyVTJsbmJtRjBkWEpsTG1admNtTmxVbVZ6WlhRcElIdGNiaUFnSUNBZ0lITnBaMjVoZEhWeVpTNW1iM0pqWlZKbGMyVjBJRDBnZEhKMVpWeHVJQ0FnSUgxY2JpQWdJQ0JtZFd4c1MyVjVJQ3M5SUNkY1hHNHRMUzFjWEc0bklDc2dibVZ6ZEdWa1NHOXZhMHRsZVZ4dUlDQjlYRzVjYmlBZ2MybG5ibUYwZFhKbExtWjFiR3hMWlhrZ1BTQm1kV3hzUzJWNVhHNGdJSEpsZEhWeWJpQm1kV3hzUzJWNVhHNTlYRzVjYm1aMWJtTjBhVzl1SUdoaGRtVkZjWFZoYkZOcFoyNWhkSFZ5WlhNb2NISmxkbFI1Y0dVc0lHNWxlSFJVZVhCbEtTQjdYRzRnSUdOdmJuTjBJSEJ5WlhaVGFXZHVZWFIxY21VZ1BTQmhiR3hUYVdkdVlYUjFjbVZ6UW5sVWVYQmxMbWRsZENod2NtVjJWSGx3WlNsY2JpQWdZMjl1YzNRZ2JtVjRkRk5wWjI1aGRIVnlaU0E5SUdGc2JGTnBaMjVoZEhWeVpYTkNlVlI1Y0dVdVoyVjBLRzVsZUhSVWVYQmxLVnh1WEc0Z0lHbG1JQ2h3Y21WMlUybG5ibUYwZFhKbElEMDlQU0IxYm1SbFptbHVaV1FnSmlZZ2JtVjRkRk5wWjI1aGRIVnlaU0E5UFQwZ2RXNWtaV1pwYm1Wa0tTQjdYRzRnSUNBZ2NtVjBkWEp1SUhSeWRXVmNiaUFnZlZ4dUlDQnBaaUFvY0hKbGRsTnBaMjVoZEhWeVpTQTlQVDBnZFc1a1pXWnBibVZrSUh4OElHNWxlSFJUYVdkdVlYUjFjbVVnUFQwOUlIVnVaR1ZtYVc1bFpDa2dlMXh1SUNBZ0lISmxkSFZ5YmlCbVlXeHpaVnh1SUNCOVhHNGdJR2xtSUNoamIyMXdkWFJsUm5Wc2JFdGxlU2h3Y21WMlUybG5ibUYwZFhKbEtTQWhQVDBnWTI5dGNIVjBaVVoxYkd4TFpYa29ibVY0ZEZOcFoyNWhkSFZ5WlNrcElIdGNiaUFnSUNCeVpYUjFjbTRnWm1Gc2MyVmNiaUFnZlZ4dUlDQnBaaUFvYm1WNGRGTnBaMjVoZEhWeVpTNW1iM0pqWlZKbGMyVjBLU0I3WEc0Z0lDQWdjbVYwZFhKdUlHWmhiSE5sWEc0Z0lIMWNibHh1SUNCeVpYUjFjbTRnZEhKMVpWeHVmVnh1WEc1bWRXNWpkR2x2YmlCcGMxSmxZV04wUTJ4aGMzTW9kSGx3WlNrZ2UxeHVJQ0J5WlhSMWNtNGdkSGx3WlM1d2NtOTBiM1I1Y0dVZ0ppWWdkSGx3WlM1d2NtOTBiM1I1Y0dVdWFYTlNaV0ZqZEVOdmJYQnZibVZ1ZEZ4dWZWeHVYRzVtZFc1amRHbHZiaUJqWVc1UWNtVnpaWEoyWlZOMFlYUmxRbVYwZDJWbGJpaHdjbVYyVkhsd1pTd2dibVY0ZEZSNWNHVXBJSHRjYmlBZ2FXWWdLR2x6VW1WaFkzUkRiR0Z6Y3lod2NtVjJWSGx3WlNrZ2ZId2dhWE5TWldGamRFTnNZWE56S0c1bGVIUlVlWEJsS1NrZ2UxeHVJQ0FnSUhKbGRIVnliaUJtWVd4elpWeHVJQ0I5WEc0Z0lHbG1JQ2hvWVhabFJYRjFZV3hUYVdkdVlYUjFjbVZ6S0hCeVpYWlVlWEJsTENCdVpYaDBWSGx3WlNrcElIdGNiaUFnSUNCeVpYUjFjbTRnZEhKMVpWeHVJQ0I5WEc0Z0lISmxkSFZ5YmlCbVlXeHpaVnh1ZlZ4dVhHNW1kVzVqZEdsdmJpQnlaWE52YkhabFJtRnRhV3g1S0hSNWNHVXBJSHRjYmlBZ0x5OGdUMjVzZVNCamFHVmpheUIxY0dSaGRHVmtJSFI1Y0dWeklIUnZJR3RsWlhBZ2JHOXZhM1Z3Y3lCbVlYTjBMbHh1SUNCeVpYUjFjbTRnZFhCa1lYUmxaRVpoYldsc2FXVnpRbmxVZVhCbExtZGxkQ2gwZVhCbEtWeHVmVnh1WEc0dkx5QlVhR2x6SUdseklHRWdjMkZtWlhSNUlHMWxZMmhoYm1semJTQjBieUJ3Y205MFpXTjBJR0ZuWVdsdWMzUWdjbTluZFdVZ1oyVjBkR1Z5Y3lCaGJtUWdVSEp2ZUdsbGN5NWNibVoxYm1OMGFXOXVJR2RsZEZCeWIzQmxjblI1S0c5aWFtVmpkQ3dnY0hKdmNHVnlkSGtwSUh0Y2JpQWdkSEo1SUh0Y2JpQWdJQ0J5WlhSMWNtNGdiMkpxWldOMFczQnliM0JsY25SNVhWeHVJQ0I5SUdOaGRHTm9JQ2hsY25JcElIdGNiaUFnSUNBdkx5QkpiblJsYm5ScGIyNWhiR3g1SUdsbmJtOXlaUzVjYmlBZ0lDQnlaWFIxY200Z2RXNWtaV1pwYm1Wa1hHNGdJSDFjYm4xY2JseHVablZ1WTNScGIyNGdjR1Z5Wm05eWJWSmxZV04wVW1WbWNtVnphQ2dwSUh0Y2JpQWdhV1lnS0hCbGJtUnBibWRWY0dSaGRHVnpMbXhsYm1kMGFDQTlQVDBnTUNrZ2UxeHVJQ0FnSUhKbGRIVnliaUJ1ZFd4c1hHNGdJSDFjYmlBZ2FXWWdLR2x6VUdWeVptOXliV2x1WjFKbFpuSmxjMmdwSUh0Y2JpQWdJQ0J5WlhSMWNtNGdiblZzYkZ4dUlDQjlYRzVjYmlBZ2FYTlFaWEptYjNKdGFXNW5VbVZtY21WemFDQTlJSFJ5ZFdWY2JpQWdkSEo1SUh0Y2JpQWdJQ0JqYjI1emRDQnpkR0ZzWlVaaGJXbHNhV1Z6SUQwZ2JtVjNJRk5sZENncFhHNGdJQ0FnWTI5dWMzUWdkWEJrWVhSbFpFWmhiV2xzYVdWeklEMGdibVYzSUZObGRDZ3BYRzVjYmlBZ0lDQmpiMjV6ZENCMWNHUmhkR1Z6SUQwZ2NHVnVaR2x1WjFWd1pHRjBaWE5jYmlBZ0lDQndaVzVrYVc1blZYQmtZWFJsY3lBOUlGdGRYRzRnSUNBZ2RYQmtZWFJsY3k1bWIzSkZZV05vS0NoYlptRnRhV3g1TENCdVpYaDBWSGx3WlYwcElEMCtJSHRjYmlBZ0lDQWdJQzh2SUU1dmR5QjBhR0YwSUhkbElHZHZkQ0JoSUhKbFlXd2daV1JwZEN3Z2QyVWdZMkZ1SUdOeVpXRjBaU0JoYzNOdlkybGhkR2x2Ym5OY2JpQWdJQ0FnSUM4dklIUm9ZWFFnZDJsc2JDQmlaU0J5WldGa0lHSjVJSFJvWlNCU1pXRmpkQ0J5WldOdmJtTnBiR1Z5TGx4dUlDQWdJQ0FnWTI5dWMzUWdjSEpsZGxSNWNHVWdQU0JtWVcxcGJIa3VZM1Z5Y21WdWRGeHVJQ0FnSUNBZ2RYQmtZWFJsWkVaaGJXbHNhV1Z6UW5sVWVYQmxMbk5sZENod2NtVjJWSGx3WlN3Z1ptRnRhV3g1S1Z4dUlDQWdJQ0FnZFhCa1lYUmxaRVpoYldsc2FXVnpRbmxVZVhCbExuTmxkQ2h1WlhoMFZIbHdaU3dnWm1GdGFXeDVLVnh1SUNBZ0lDQWdabUZ0YVd4NUxtTjFjbkpsYm5RZ1BTQnVaWGgwVkhsd1pWeHVYRzRnSUNBZ0lDQXZMeUJFWlhSbGNtMXBibVVnZDJobGRHaGxjaUIwYUdseklITm9iM1ZzWkNCaVpTQmhJSEpsTFhKbGJtUmxjaUJ2Y2lCaElISmxMVzF2ZFc1MExseHVJQ0FnSUNBZ2FXWWdLR05oYmxCeVpYTmxjblpsVTNSaGRHVkNaWFIzWldWdUtIQnlaWFpVZVhCbExDQnVaWGgwVkhsd1pTa3BJSHRjYmlBZ0lDQWdJQ0FnZFhCa1lYUmxaRVpoYldsc2FXVnpMbUZrWkNobVlXMXBiSGtwWEc0Z0lDQWdJQ0I5SUdWc2MyVWdlMXh1SUNBZ0lDQWdJQ0J6ZEdGc1pVWmhiV2xzYVdWekxtRmtaQ2htWVcxcGJIa3BYRzRnSUNBZ0lDQjlYRzRnSUNBZ2ZTbGNibHh1SUNBZ0lDOHZJRlJQUkU4NklISmxibUZ0WlNCMGFHVnpaU0JtYVdWc1pITWdkRzhnYzI5dFpYUm9hVzVuSUcxdmNtVWdiV1ZoYm1sdVoyWjFiQzVjYmlBZ0lDQmpiMjV6ZENCMWNHUmhkR1VnUFNCN1hHNGdJQ0FnSUNCMWNHUmhkR1ZrUm1GdGFXeHBaWE1zSUM4dklFWmhiV2xzYVdWeklIUm9ZWFFnZDJsc2JDQnlaUzF5Wlc1a1pYSWdjSEpsYzJWeWRtbHVaeUJ6ZEdGMFpWeHVJQ0FnSUNBZ2MzUmhiR1ZHWVcxcGJHbGxjeXdnTHk4Z1JtRnRhV3hwWlhNZ2RHaGhkQ0IzYVd4c0lHSmxJSEpsYlc5MWJuUmxaRnh1SUNBZ0lIMWNibHh1SUNBZ0lHaGxiSEJsY25OQ2VWSmxibVJsY21WeVNVUXVabTl5UldGamFDZ29hR1ZzY0dWeWN5a2dQVDRnZTF4dUlDQWdJQ0FnTHk4Z1JYWmxiaUJwWmlCMGFHVnlaU0JoY21VZ2JtOGdjbTl2ZEhNc0lITmxkQ0IwYUdVZ2FHRnVaR3hsY2lCdmJpQm1hWEp6ZENCMWNHUmhkR1V1WEc0Z0lDQWdJQ0F2THlCVWFHbHpJR1Z1YzNWeVpYTWdkR2hoZENCcFppQXFibVYzS2lCeWIyOTBjeUJoY21VZ2JXOTFiblJsWkN3Z2RHaGxlU2RzYkNCMWMyVWdkR2hsSUhKbGMyOXNkbVVnYUdGdVpHeGxjaTVjYmlBZ0lDQWdJR2hsYkhCbGNuTXVjMlYwVW1WbWNtVnphRWhoYm1Sc1pYSW9jbVZ6YjJ4MlpVWmhiV2xzZVNsY2JpQWdJQ0I5S1Z4dVhHNGdJQ0FnYkdWMElHUnBaRVZ5Y205eUlEMGdabUZzYzJWY2JpQWdJQ0JzWlhRZ1ptbHljM1JGY25KdmNpQTlJRzUxYkd4Y2JseHVJQ0FnSUM4dklGZGxJSE51WVhCemFHOTBJRzFoY0hNZ1lXNWtJSE5sZEhNZ2RHaGhkQ0JoY21VZ2JYVjBZWFJsWkNCa2RYSnBibWNnWTI5dGJXbDBjeTVjYmlBZ0lDQXZMeUJKWmlCM1pTQmtiMjRuZENCa2J5QjBhR2x6TENCMGFHVnlaU0JwY3lCaElISnBjMnNnZEdobGVTQjNhV3hzSUdKbElHMTFkR0YwWldRZ2QyaHBiR1ZjYmlBZ0lDQXZMeUIzWlNCcGRHVnlZWFJsSUc5MlpYSWdkR2hsYlM0Z1JtOXlJR1Y0WVcxd2JHVXNJSFJ5ZVdsdVp5QjBieUJ5WldOdmRtVnlJR0VnWm1GcGJHVmtJSEp2YjNSY2JpQWdJQ0F2THlCdFlYa2dZMkYxYzJVZ1lXNXZkR2hsY2lCeWIyOTBJSFJ2SUdKbElHRmtaR1ZrSUhSdklIUm9aU0JtWVdsc1pXUWdiR2x6ZENBdExTQmhiaUJwYm1acGJtbDBaU0JzYjI5d0xseHVJQ0FnSUdOdmJuTjBJR1poYVd4bFpGSnZiM1J6VTI1aGNITm9iM1FnUFNCdVpYY2dVMlYwS0daaGFXeGxaRkp2YjNSektWeHVJQ0FnSUdOdmJuTjBJRzF2ZFc1MFpXUlNiMjkwYzFOdVlYQnphRzkwSUQwZ2JtVjNJRk5sZENodGIzVnVkR1ZrVW05dmRITXBYRzRnSUNBZ1kyOXVjM1FnYUdWc2NHVnljMEo1VW05dmRGTnVZWEJ6YUc5MElEMGdibVYzSUUxaGNDaG9aV3h3WlhKelFubFNiMjkwS1Z4dVhHNGdJQ0FnWm1GcGJHVmtVbTl2ZEhOVGJtRndjMmh2ZEM1bWIzSkZZV05vS0NoeWIyOTBLU0E5UGlCN1hHNGdJQ0FnSUNCamIyNXpkQ0JvWld4d1pYSnpJRDBnYUdWc2NHVnljMEo1VW05dmRGTnVZWEJ6YUc5MExtZGxkQ2h5YjI5MEtWeHVJQ0FnSUNBZ2FXWWdLR2hsYkhCbGNuTWdQVDA5SUhWdVpHVm1hVzVsWkNrZ2UxeHVJQ0FnSUNBZ0lDQjBhSEp2ZHlCdVpYY2dSWEp5YjNJb1hHNGdJQ0FnSUNBZ0lDQWdKME52ZFd4a0lHNXZkQ0JtYVc1a0lHaGxiSEJsY25NZ1ptOXlJR0VnY205dmRDNGdWR2hwY3lCcGN5QmhJR0oxWnlCcGJpQlNaV0ZqZENCU1pXWnlaWE5vTGljc1hHNGdJQ0FnSUNBZ0lDbGNiaUFnSUNBZ0lIMWNiaUFnSUNBZ0lHbG1JQ2doWm1GcGJHVmtVbTl2ZEhNdWFHRnpLSEp2YjNRcEtTQjdYRzRnSUNBZ0lDQWdJQzh2SUU1dklHeHZibWRsY2lCbVlXbHNaV1F1WEc0Z0lDQWdJQ0I5WEc0Z0lDQWdJQ0JwWmlBb2NtOXZkRVZzWlcxbGJuUnpJRDA5UFNCdWRXeHNLU0I3WEc0Z0lDQWdJQ0FnSUhKbGRIVnlibHh1SUNBZ0lDQWdmVnh1SUNBZ0lDQWdhV1lnS0NGeWIyOTBSV3hsYldWdWRITXVhR0Z6S0hKdmIzUXBLU0I3WEc0Z0lDQWdJQ0FnSUhKbGRIVnlibHh1SUNBZ0lDQWdmVnh1SUNBZ0lDQWdZMjl1YzNRZ1pXeGxiV1Z1ZENBOUlISnZiM1JGYkdWdFpXNTBjeTVuWlhRb2NtOXZkQ2xjYmlBZ0lDQWdJSFJ5ZVNCN1hHNGdJQ0FnSUNBZ0lHaGxiSEJsY25NdWMyTm9aV1IxYkdWU2IyOTBLSEp2YjNRc0lHVnNaVzFsYm5RcFhHNGdJQ0FnSUNCOUlHTmhkR05vSUNobGNuSXBJSHRjYmlBZ0lDQWdJQ0FnYVdZZ0tDRmthV1JGY25KdmNpa2dlMXh1SUNBZ0lDQWdJQ0FnSUdScFpFVnljbTl5SUQwZ2RISjFaVnh1SUNBZ0lDQWdJQ0FnSUdacGNuTjBSWEp5YjNJZ1BTQmxjbkpjYmlBZ0lDQWdJQ0FnZlZ4dUlDQWdJQ0FnSUNBdkx5QkxaV1Z3SUhSeWVXbHVaeUJ2ZEdobGNpQnliMjkwY3k1Y2JpQWdJQ0FnSUgxY2JpQWdJQ0I5S1Z4dUlDQWdJRzF2ZFc1MFpXUlNiMjkwYzFOdVlYQnphRzkwTG1admNrVmhZMmdvS0hKdmIzUXBJRDArSUh0Y2JpQWdJQ0FnSUdOdmJuTjBJR2hsYkhCbGNuTWdQU0JvWld4d1pYSnpRbmxTYjI5MFUyNWhjSE5vYjNRdVoyVjBLSEp2YjNRcFhHNGdJQ0FnSUNCcFppQW9hR1ZzY0dWeWN5QTlQVDBnZFc1a1pXWnBibVZrS1NCN1hHNGdJQ0FnSUNBZ0lIUm9jbTkzSUc1bGR5QkZjbkp2Y2loY2JpQWdJQ0FnSUNBZ0lDQW5RMjkxYkdRZ2JtOTBJR1pwYm1RZ2FHVnNjR1Z5Y3lCbWIzSWdZU0J5YjI5MExpQlVhR2x6SUdseklHRWdZblZuSUdsdUlGSmxZV04wSUZKbFpuSmxjMmd1Snl4Y2JpQWdJQ0FnSUNBZ0tWeHVJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ2FXWWdLQ0Z0YjNWdWRHVmtVbTl2ZEhNdWFHRnpLSEp2YjNRcEtTQjdYRzRnSUNBZ0lDQWdJQzh2SUU1dklHeHZibWRsY2lCdGIzVnVkR1ZrTGx4dUlDQWdJQ0FnZlZ4dUlDQWdJQ0FnZEhKNUlIdGNiaUFnSUNBZ0lDQWdhR1ZzY0dWeWN5NXpZMmhsWkhWc1pWSmxabkpsYzJnb2NtOXZkQ3dnZFhCa1lYUmxLVnh1SUNBZ0lDQWdmU0JqWVhSamFDQW9aWEp5S1NCN1hHNGdJQ0FnSUNBZ0lHbG1JQ2doWkdsa1JYSnliM0lwSUh0Y2JpQWdJQ0FnSUNBZ0lDQmthV1JGY25KdmNpQTlJSFJ5ZFdWY2JpQWdJQ0FnSUNBZ0lDQm1hWEp6ZEVWeWNtOXlJRDBnWlhKeVhHNGdJQ0FnSUNBZ0lIMWNiaUFnSUNBZ0lDQWdMeThnUzJWbGNDQjBjbmxwYm1jZ2IzUm9aWElnY205dmRITXVYRzRnSUNBZ0lDQjlYRzRnSUNBZ2ZTbGNiaUFnSUNCcFppQW9aR2xrUlhKeWIzSXBJSHRjYmlBZ0lDQWdJSFJvY205M0lHWnBjbk4wUlhKeWIzSmNiaUFnSUNCOVhHNGdJQ0FnY21WMGRYSnVJSFZ3WkdGMFpWeHVJQ0I5SUdacGJtRnNiSGtnZTF4dUlDQWdJR2x6VUdWeVptOXliV2x1WjFKbFpuSmxjMmdnUFNCbVlXeHpaVnh1SUNCOVhHNTlYRzVjYm1aMWJtTjBhVzl1SUhKbFoybHpkR1Z5S0hSNWNHVXNJR2xrS1NCN1hHNGdJR2xtSUNoMGVYQmxJRDA5UFNCdWRXeHNLU0I3WEc0Z0lDQWdjbVYwZFhKdVhHNGdJSDFjYmlBZ2FXWWdLSFI1Y0dWdlppQjBlWEJsSUNFOVBTQW5ablZ1WTNScGIyNG5JQ1ltSUhSNWNHVnZaaUIwZVhCbElDRTlQU0FuYjJKcVpXTjBKeWtnZTF4dUlDQWdJSEpsZEhWeWJseHVJQ0I5WEc1Y2JpQWdMeThnVkdocGN5QmpZVzRnYUdGd2NHVnVJR2x1SUdGdUlHVmtaMlVnWTJGelpTd2daUzVuTGlCcFppQjNaU0J5WldkcGMzUmxjbHh1SUNBdkx5QnlaWFIxY200Z2RtRnNkV1VnYjJZZ1lTQklUME1nWW5WMElHbDBJSEpsZEhWeWJuTWdZU0JqWVdOb1pXUWdZMjl0Y0c5dVpXNTBMbHh1SUNBdkx5QkpaMjV2Y21VZ1lXNTVkR2hwYm1jZ1luVjBJSFJvWlNCbWFYSnpkQ0J5WldkcGMzUnlZWFJwYjI0Z1ptOXlJR1ZoWTJnZ2RIbHdaUzVjYmlBZ2FXWWdLR0ZzYkVaaGJXbHNhV1Z6UW5sVWVYQmxMbWhoY3loMGVYQmxLU2tnZTF4dUlDQWdJSEpsZEhWeWJseHVJQ0I5WEc0Z0lDOHZJRU55WldGMFpTQm1ZVzFwYkhrZ2IzSWdjbVZ0WlcxaVpYSWdkRzhnZFhCa1lYUmxJR2wwTGx4dUlDQXZMeUJPYjI1bElHOW1JSFJvYVhNZ1ltOXZhMnRsWlhCcGJtY2dZV1ptWldOMGN5QnlaV052Ym1OcGJHbGhkR2x2Ymx4dUlDQXZMeUIxYm5ScGJDQjBhR1VnWm1seWMzUWdjR1Z5Wm05eWJWSmxZV04wVW1WbWNtVnphQ2dwSUdOaGJHd2dZV0p2ZG1VdVhHNGdJR3hsZENCbVlXMXBiSGtnUFNCaGJHeEdZVzFwYkdsbGMwSjVTVVF1WjJWMEtHbGtLVnh1SUNCcFppQW9abUZ0YVd4NUlEMDlQU0IxYm1SbFptbHVaV1FwSUh0Y2JpQWdJQ0JtWVcxcGJIa2dQU0I3SUdOMWNuSmxiblE2SUhSNWNHVWdmVnh1SUNBZ0lHRnNiRVpoYldsc2FXVnpRbmxKUkM1elpYUW9hV1FzSUdaaGJXbHNlU2xjYmlBZ2ZTQmxiSE5sSUh0Y2JpQWdJQ0J3Wlc1a2FXNW5WWEJrWVhSbGN5NXdkWE5vS0Z0bVlXMXBiSGtzSUhSNWNHVmRLVnh1SUNCOVhHNGdJR0ZzYkVaaGJXbHNhV1Z6UW5sVWVYQmxMbk5sZENoMGVYQmxMQ0JtWVcxcGJIa3BYRzVjYmlBZ0x5OGdWbWx6YVhRZ2FXNXVaWElnZEhsd1pYTWdZbVZqWVhWelpTQjNaU0J0YVdkb2RDQnViM1FnYUdGMlpTQnlaV2RwYzNSbGNtVmtJSFJvWlcwdVhHNGdJR2xtSUNoMGVYQmxiMllnZEhsd1pTQTlQVDBnSjI5aWFtVmpkQ2NnSmlZZ2RIbHdaU0FoUFQwZ2JuVnNiQ2tnZTF4dUlDQWdJSE4zYVhSamFDQW9aMlYwVUhKdmNHVnlkSGtvZEhsd1pTd2dKeVFrZEhsd1pXOW1KeWtwSUh0Y2JpQWdJQ0FnSUdOaGMyVWdVa1ZCUTFSZlJrOVNWMEZTUkY5U1JVWmZWRmxRUlRwY2JpQWdJQ0FnSUNBZ2NtVm5hWE4wWlhJb2RIbHdaUzV5Wlc1a1pYSXNJR2xrSUNzZ0p5UnlaVzVrWlhJbktWeHVJQ0FnSUNBZ0lDQmljbVZoYTF4dUlDQWdJQ0FnWTJGelpTQlNSVUZEVkY5TlJVMVBYMVJaVUVVNlhHNGdJQ0FnSUNBZ0lISmxaMmx6ZEdWeUtIUjVjR1V1ZEhsd1pTd2dhV1FnS3lBbkpIUjVjR1VuS1Z4dUlDQWdJQ0FnSUNCaWNtVmhhMXh1SUNBZ0lIMWNiaUFnZlZ4dWZWeHVYRzVtZFc1amRHbHZiaUJ6WlhSVGFXZHVZWFIxY21Vb2RIbHdaU3dnYTJWNUxDQm1iM0pqWlZKbGMyVjBMQ0JuWlhSRGRYTjBiMjFJYjI5cmN5a2dlMXh1SUNCcFppQW9JV0ZzYkZOcFoyNWhkSFZ5WlhOQ2VWUjVjR1V1YUdGektIUjVjR1VwS1NCN1hHNGdJQ0FnWVd4c1UybG5ibUYwZFhKbGMwSjVWSGx3WlM1elpYUW9kSGx3WlN3Z2UxeHVJQ0FnSUNBZ1ptOXlZMlZTWlhObGRDeGNiaUFnSUNBZ0lHOTNia3RsZVRvZ2EyVjVMRnh1SUNBZ0lDQWdablZzYkV0bGVUb2diblZzYkN4Y2JpQWdJQ0FnSUdkbGRFTjFjM1J2YlVodmIydHpPaUJuWlhSRGRYTjBiMjFJYjI5cmN5QjhmQ0FvS0NrZ1BUNGdXMTBwTEZ4dUlDQWdJSDBwWEc0Z0lIMWNiaUFnTHk4Z1ZtbHphWFFnYVc1dVpYSWdkSGx3WlhNZ1ltVmpZWFZ6WlNCM1pTQnRhV2RvZENCdWIzUWdhR0YyWlNCemFXZHVaV1FnZEdobGJTNWNiaUFnYVdZZ0tIUjVjR1Z2WmlCMGVYQmxJRDA5UFNBbmIySnFaV04wSnlBbUppQjBlWEJsSUNFOVBTQnVkV3hzS1NCN1hHNGdJQ0FnYzNkcGRHTm9JQ2huWlhSUWNtOXdaWEowZVNoMGVYQmxMQ0FuSkNSMGVYQmxiMlluS1NrZ2UxeHVJQ0FnSUNBZ1kyRnpaU0JTUlVGRFZGOUdUMUpYUVZKRVgxSkZSbDlVV1ZCRk9seHVJQ0FnSUNBZ0lDQnpaWFJUYVdkdVlYUjFjbVVvZEhsd1pTNXlaVzVrWlhJc0lHdGxlU3dnWm05eVkyVlNaWE5sZEN3Z1oyVjBRM1Z6ZEc5dFNHOXZhM01wWEc0Z0lDQWdJQ0FnSUdKeVpXRnJYRzRnSUNBZ0lDQmpZWE5sSUZKRlFVTlVYMDFGVFU5ZlZGbFFSVHBjYmlBZ0lDQWdJQ0FnYzJWMFUybG5ibUYwZFhKbEtIUjVjR1V1ZEhsd1pTd2dhMlY1TENCbWIzSmpaVkpsYzJWMExDQm5aWFJEZFhOMGIyMUliMjlyY3lsY2JpQWdJQ0FnSUNBZ1luSmxZV3RjYmlBZ0lDQjlYRzRnSUgxY2JuMWNibHh1THk4Z1ZHaHBjeUJwY3lCc1lYcHBiSGtnWTJGc2JHVmtJR1IxY21sdVp5Qm1hWEp6ZENCeVpXNWtaWElnWm05eUlHRWdkSGx3WlM1Y2JpOHZJRWwwSUdOaGNIUjFjbVZ6SUVodmIyc2diR2x6ZENCaGRDQjBhR0YwSUhScGJXVWdjMjhnYVc1c2FXNWxJSEpsY1hWcGNtVnpJR1J2YmlkMElHSnlaV0ZySUdOdmJYQmhjbWx6YjI1ekxseHVablZ1WTNScGIyNGdZMjlzYkdWamRFTjFjM1J2YlVodmIydHpSbTl5VTJsbmJtRjBkWEpsS0hSNWNHVXBJSHRjYmlBZ1kyOXVjM1FnYzJsbmJtRjBkWEpsSUQwZ1lXeHNVMmxuYm1GMGRYSmxjMEo1Vkhsd1pTNW5aWFFvZEhsd1pTbGNiaUFnYVdZZ0tITnBaMjVoZEhWeVpTQWhQVDBnZFc1a1pXWnBibVZrS1NCN1hHNGdJQ0FnWTI5dGNIVjBaVVoxYkd4TFpYa29jMmxuYm1GMGRYSmxLVnh1SUNCOVhHNTlYRzVjYm1WNGNHOXlkQ0JtZFc1amRHbHZiaUJwYm1wbFkzUkpiblJ2UjJ4dlltRnNTRzl2YXlobmJHOWlZV3hQWW1wbFkzUXBJSHRjYmlBZ0x5OGdSbTl5SUZKbFlXTjBJRTVoZEdsMlpTd2dkR2hsSUdkc2IySmhiQ0JvYjI5cklIZHBiR3dnWW1VZ2MyVjBJSFZ3SUdKNUlISmxjWFZwY21Vb0ozSmxZV04wTFdSbGRuUnZiMnh6TFdOdmNtVW5LUzVjYmlBZ0x5OGdWR2hoZENCamIyUmxJSGRwYkd3Z2NuVnVJR0psWm05eVpTQjFjeTRnVTI4Z2QyVWdibVZsWkNCMGJ5QnRiMjVyWlhsd1lYUmphQ0JtZFc1amRHbHZibk1nYjI0Z1pYaHBjM1JwYm1jZ2FHOXZheTVjYmx4dUlDQXZMeUJHYjNJZ1VtVmhZM1FnVjJWaUxDQjBhR1VnWjJ4dlltRnNJR2h2YjJzZ2QybHNiQ0JpWlNCelpYUWdkWEFnWW5rZ2RHaGxJR1Y0ZEdWdWMybHZiaTVjYmlBZ0x5OGdWR2hwY3lCM2FXeHNJR0ZzYzI4Z2NuVnVJR0psWm05eVpTQjFjeTVjYmlBZ2JHVjBJR2h2YjJzZ1BTQm5iRzlpWVd4UFltcGxZM1F1WDE5U1JVRkRWRjlFUlZaVVQwOU1VMTlIVEU5Q1FVeGZTRTlQUzE5ZlhHNGdJR2xtSUNob2IyOXJJRDA5UFNCMWJtUmxabWx1WldRcElIdGNiaUFnSUNBdkx5QkliM2RsZG1WeUxDQnBaaUIwYUdWeVpTQnBjeUJ1YnlCRVpYWlViMjlzY3lCbGVIUmxibk5wYjI0c0lIZGxKMnhzSUc1bFpXUWdkRzhnYzJWMElIVndJSFJvWlNCbmJHOWlZV3dnYUc5dmF5QnZkWEp6Wld4MlpYTXVYRzRnSUNBZ0x5OGdUbTkwWlNCMGFHRjBJR2x1SUhSb2FYTWdZMkZ6WlNCcGRDZHpJR2x0Y0c5eWRHRnVkQ0IwYUdGMElISmxibVJsY21WeUlHTnZaR1VnY25WdWN5QXFZV1owWlhJcUlIUm9hWE1nYldWMGFHOWtJR05oYkd3dVhHNGdJQ0FnTHk4Z1QzUm9aWEozYVhObExDQjBhR1VnY21WdVpHVnlaWElnZDJsc2JDQjBhR2x1YXlCMGFHRjBJSFJvWlhKbElHbHpJRzV2SUdkc2IySmhiQ0JvYjI5ckxDQmhibVFnZDI5dUozUWdaRzhnZEdobElHbHVhbVZqZEdsdmJpNWNiaUFnSUNCc1pYUWdibVY0ZEVsRUlEMGdNRnh1SUNBZ0lHZHNiMkpoYkU5aWFtVmpkQzVmWDFKRlFVTlVYMFJGVmxSUFQweFRYMGRNVDBKQlRGOUlUMDlMWDE4Z1BTQm9iMjlySUQwZ2UxeHVJQ0FnSUNBZ2NtVnVaR1Z5WlhKek9pQnVaWGNnVFdGd0tDa3NYRzRnSUNBZ0lDQnpkWEJ3YjNKMGMwWnBZbVZ5T2lCMGNuVmxMRnh1SUNBZ0lDQWdhVzVxWldOME9pQW9hVzVxWldOMFpXUXBJRDArSUc1bGVIUkpSQ3NyTEZ4dUlDQWdJQ0FnYjI1VFkyaGxaSFZzWlVacFltVnlVbTl2ZERvZ0tHbGtMQ0J5YjI5MExDQmphR2xzWkhKbGJpa2dQVDRnZTMwc1hHNGdJQ0FnSUNCdmJrTnZiVzFwZEVacFltVnlVbTl2ZERvZ0tHbGtMQ0J5YjI5MExDQnRZWGxpWlZCeWFXOXlhWFI1VEdWMlpXd3NJR1JwWkVWeWNtOXlLU0E5UGlCN2ZTeGNiaUFnSUNBZ0lHOXVRMjl0YldsMFJtbGlaWEpWYm0xdmRXNTBLQ2tnZTMwc1hHNGdJQ0FnZlZ4dUlDQjlYRzVjYmlBZ2FXWWdLR2h2YjJzdWFYTkVhWE5oWW14bFpDa2dlMXh1SUNBZ0lDOHZJRlJvYVhNZ2FYTnVKM1FnWVNCeVpXRnNJSEJ5YjNCbGNuUjVJRzl1SUhSb1pTQm9iMjlyTENCaWRYUWdhWFFnWTJGdUlHSmxJSE5sZENCMGJ5QnZjSFFnYjNWMFhHNGdJQ0FnTHk4Z2IyWWdSR1YyVkc5dmJITWdhVzUwWldkeVlYUnBiMjRnWVc1a0lHRnpjMjlqYVdGMFpXUWdkMkZ5Ym1sdVozTWdZVzVrSUd4dlozTXVYRzRnSUNBZ0x5OGdWWE5wYm1jZ1kyOXVjMjlzWlZzbmQyRnliaWRkSUhSdklHVjJZV1JsSUVKaFltVnNJR0Z1WkNCRlUweHBiblJjYmlBZ0lDQmpiMjV6YjJ4bFd5ZDNZWEp1SjEwb1hHNGdJQ0FnSUNBblUyOXRaWFJvYVc1bklHaGhjeUJ6YUdsdGJXVmtJSFJvWlNCU1pXRmpkQ0JFWlhaVWIyOXNjeUJuYkc5aVlXd2dhRzl2YXlBb1gxOVNSVUZEVkY5RVJWWlVUMDlNVTE5SFRFOUNRVXhmU0U5UFMxOWZLUzRnSnlBclhHNGdJQ0FnSUNBZ0lDZEdZWE4wSUZKbFpuSmxjMmdnYVhNZ2JtOTBJR052YlhCaGRHbGliR1VnZDJsMGFDQjBhR2x6SUhOb2FXMGdZVzVrSUhkcGJHd2dZbVVnWkdsellXSnNaV1F1Snl4Y2JpQWdJQ0FwWEc0Z0lDQWdjbVYwZFhKdVhHNGdJSDFjYmx4dUlDQXZMeUJJWlhKbExDQjNaU0JxZFhOMElIZGhiblFnZEc4Z1oyVjBJR0VnY21WbVpYSmxibU5sSUhSdklITmphR1ZrZFd4bFVtVm1jbVZ6YUM1Y2JpQWdZMjl1YzNRZ2IyeGtTVzVxWldOMElEMGdhRzl2YXk1cGJtcGxZM1JjYmlBZ2FHOXZheTVwYm1wbFkzUWdQU0JtZFc1amRHbHZiaUFvYVc1cVpXTjBaV1FwSUh0Y2JpQWdJQ0JqYjI1emRDQnBaQ0E5SUc5c1pFbHVhbVZqZEM1aGNIQnNlU2gwYUdsekxDQmhjbWQxYldWdWRITXBYRzRnSUNBZ2FXWWdLRnh1SUNBZ0lDQWdkSGx3Wlc5bUlHbHVhbVZqZEdWa0xuTmphR1ZrZFd4bFVtVm1jbVZ6YUNBOVBUMGdKMloxYm1OMGFXOXVKeUFtSmx4dUlDQWdJQ0FnZEhsd1pXOW1JR2x1YW1WamRHVmtMbk5sZEZKbFpuSmxjMmhJWVc1a2JHVnlJRDA5UFNBblpuVnVZM1JwYjI0blhHNGdJQ0FnS1NCN1hHNGdJQ0FnSUNBdkx5QlVhR2x6SUhabGNuTnBiMjRnYzNWd2NHOXlkSE1nVW1WaFkzUWdVbVZtY21WemFDNWNiaUFnSUNBZ0lHaGxiSEJsY25OQ2VWSmxibVJsY21WeVNVUXVjMlYwS0dsa0xDQnBibXBsWTNSbFpDbGNiaUFnSUNCOVhHNGdJQ0FnY21WMGRYSnVJR2xrWEc0Z0lIMWNibHh1SUNBdkx5QkVieUIwYUdVZ2MyRnRaU0JtYjNJZ1lXNTVJR0ZzY21WaFpIa2dhVzVxWldOMFpXUWdjbTl2ZEhNdVhHNGdJQzh2SUZSb2FYTWdhWE1nZFhObFpuVnNJR2xtSUZKbFlXTjBSRTlOSUdoaGN5QmhiSEpsWVdSNUlHSmxaVzRnYVc1cGRHbGhiR2w2WldRdVhHNGdJQzh2SUdoMGRIQnpPaTh2WjJsMGFIVmlMbU52YlM5bVlXTmxZbTl2YXk5eVpXRmpkQzlwYzNOMVpYTXZNVGMyTWpaY2JpQWdhRzl2YXk1eVpXNWtaWEpsY25NdVptOXlSV0ZqYUNnb2FXNXFaV04wWldRc0lHbGtLU0E5UGlCN1hHNGdJQ0FnYVdZZ0tGeHVJQ0FnSUNBZ2RIbHdaVzltSUdsdWFtVmpkR1ZrTG5OamFHVmtkV3hsVW1WbWNtVnphQ0E5UFQwZ0oyWjFibU4wYVc5dUp5QW1KbHh1SUNBZ0lDQWdkSGx3Wlc5bUlHbHVhbVZqZEdWa0xuTmxkRkpsWm5KbGMyaElZVzVrYkdWeUlEMDlQU0FuWm5WdVkzUnBiMjRuWEc0Z0lDQWdLU0I3WEc0Z0lDQWdJQ0F2THlCVWFHbHpJSFpsY25OcGIyNGdjM1Z3Y0c5eWRITWdVbVZoWTNRZ1VtVm1jbVZ6YUM1Y2JpQWdJQ0FnSUdobGJIQmxjbk5DZVZKbGJtUmxjbVZ5U1VRdWMyVjBLR2xrTENCcGJtcGxZM1JsWkNsY2JpQWdJQ0I5WEc0Z0lIMHBYRzVjYmlBZ0x5OGdWMlVnWVd4emJ5QjNZVzUwSUhSdklIUnlZV05ySUdOMWNuSmxiblJzZVNCdGIzVnVkR1ZrSUhKdmIzUnpMbHh1SUNCamIyNXpkQ0J2YkdSUGJrTnZiVzFwZEVacFltVnlVbTl2ZENBOUlHaHZiMnN1YjI1RGIyMXRhWFJHYVdKbGNsSnZiM1JjYmlBZ1kyOXVjM1FnYjJ4a1QyNVRZMmhsWkhWc1pVWnBZbVZ5VW05dmRDQTlJR2h2YjJzdWIyNVRZMmhsWkhWc1pVWnBZbVZ5VW05dmRDQjhmQ0FvS0NrZ1BUNGdlMzBwWEc0Z0lHaHZiMnN1YjI1VFkyaGxaSFZzWlVacFltVnlVbTl2ZENBOUlHWjFibU4wYVc5dUlDaHBaQ3dnY205dmRDd2dZMmhwYkdSeVpXNHBJSHRjYmlBZ0lDQnBaaUFvSVdselVHVnlabTl5YldsdVoxSmxabkpsYzJncElIdGNiaUFnSUNBZ0lDOHZJRWxtSUdsMElIZGhjeUJwYm5SbGJuUnBiMjVoYkd4NUlITmphR1ZrZFd4bFpDd2daRzl1SjNRZ1lYUjBaVzF3ZENCMGJ5QnlaWE4wYjNKbExseHVJQ0FnSUNBZ0x5OGdWR2hwY3lCcGJtTnNkV1JsY3lCcGJuUmxiblJwYjI1aGJHeDVJSE5qYUdWa2RXeGxaQ0IxYm0xdmRXNTBjeTVjYmlBZ0lDQWdJR1poYVd4bFpGSnZiM1J6TG1SbGJHVjBaU2h5YjI5MEtWeHVJQ0FnSUNBZ2FXWWdLSEp2YjNSRmJHVnRaVzUwY3lBaFBUMGdiblZzYkNrZ2UxeHVJQ0FnSUNBZ0lDQnliMjkwUld4bGJXVnVkSE11YzJWMEtISnZiM1FzSUdOb2FXeGtjbVZ1S1Z4dUlDQWdJQ0FnZlZ4dUlDQWdJSDFjYmlBZ0lDQnlaWFIxY200Z2IyeGtUMjVUWTJobFpIVnNaVVpwWW1WeVVtOXZkQzVoY0hCc2VTaDBhR2x6TENCaGNtZDFiV1Z1ZEhNcFhHNGdJSDFjYmlBZ2FHOXZheTV2YmtOdmJXMXBkRVpwWW1WeVVtOXZkQ0E5SUdaMWJtTjBhVzl1SUNocFpDd2djbTl2ZEN3Z2JXRjVZbVZRY21sdmNtbDBlVXhsZG1Wc0xDQmthV1JGY25KdmNpa2dlMXh1SUNBZ0lHTnZibk4wSUdobGJIQmxjbk1nUFNCb1pXeHdaWEp6UW5sU1pXNWtaWEpsY2tsRUxtZGxkQ2hwWkNsY2JpQWdJQ0JwWmlBb2FHVnNjR1Z5Y3lBaFBUMGdkVzVrWldacGJtVmtLU0I3WEc0Z0lDQWdJQ0JvWld4d1pYSnpRbmxTYjI5MExuTmxkQ2h5YjI5MExDQm9aV3h3WlhKektWeHVYRzRnSUNBZ0lDQmpiMjV6ZENCamRYSnlaVzUwSUQwZ2NtOXZkQzVqZFhKeVpXNTBYRzRnSUNBZ0lDQmpiMjV6ZENCaGJIUmxjbTVoZEdVZ1BTQmpkWEp5Wlc1MExtRnNkR1Z5Ym1GMFpWeHVYRzRnSUNBZ0lDQXZMeUJYWlNCdVpXVmtJSFJ2SUdSbGRHVnliV2x1WlNCM2FHVjBhR1Z5SUhSb2FYTWdjbTl2ZENCb1lYTWdhblZ6ZENBb2RXNHBiVzkxYm5SbFpDNWNiaUFnSUNBZ0lDOHZJRlJvYVhNZ2JHOW5hV01nYVhNZ1kyOXdlUzF3WVhOMFpXUWdabkp2YlNCemFXMXBiR0Z5SUd4dloybGpJR2x1SUhSb1pTQkVaWFpVYjI5c2N5QmlZV05yWlc1a0xseHVJQ0FnSUNBZ0x5OGdTV1lnZEdocGN5QmljbVZoYTNNZ2QybDBhQ0J6YjIxbElISmxabUZqZEc5eWFXNW5MQ0I1YjNVbmJHd2dkMkZ1ZENCMGJ5QjFjR1JoZEdVZ1JHVjJWRzl2YkhNZ2RHOXZMbHh1WEc0Z0lDQWdJQ0JwWmlBb1lXeDBaWEp1WVhSbElDRTlQU0J1ZFd4c0tTQjdYRzRnSUNBZ0lDQWdJR052Ym5OMElIZGhjMDF2ZFc1MFpXUWdQVnh1SUNBZ0lDQWdJQ0FnSUdGc2RHVnlibUYwWlM1dFpXMXZhWHBsWkZOMFlYUmxJQ0U5SUc1MWJHd2dKaVpjYmlBZ0lDQWdJQ0FnSUNCaGJIUmxjbTVoZEdVdWJXVnRiMmw2WldSVGRHRjBaUzVsYkdWdFpXNTBJQ0U5SUc1MWJHd2dKaVpjYmlBZ0lDQWdJQ0FnSUNCdGIzVnVkR1ZrVW05dmRITXVhR0Z6S0hKdmIzUXBYRzVjYmlBZ0lDQWdJQ0FnWTI5dWMzUWdhWE5OYjNWdWRHVmtJRDFjYmlBZ0lDQWdJQ0FnSUNCamRYSnlaVzUwTG0xbGJXOXBlbVZrVTNSaGRHVWdJVDBnYm5Wc2JDQW1KaUJqZFhKeVpXNTBMbTFsYlc5cGVtVmtVM1JoZEdVdVpXeGxiV1Z1ZENBaFBTQnVkV3hzWEc1Y2JpQWdJQ0FnSUNBZ2FXWWdLQ0YzWVhOTmIzVnVkR1ZrSUNZbUlHbHpUVzkxYm5SbFpDa2dlMXh1SUNBZ0lDQWdJQ0FnSUM4dklFMXZkVzUwSUdFZ2JtVjNJSEp2YjNRdVhHNGdJQ0FnSUNBZ0lDQWdiVzkxYm5SbFpGSnZiM1J6TG1Ga1pDaHliMjkwS1Z4dUlDQWdJQ0FnSUNBZ0lHWmhhV3hsWkZKdmIzUnpMbVJsYkdWMFpTaHliMjkwS1Z4dUlDQWdJQ0FnSUNCOUlHVnNjMlVnYVdZZ0tIZGhjMDF2ZFc1MFpXUWdKaVlnYVhOTmIzVnVkR1ZrS1NCN1hHNGdJQ0FnSUNBZ0lDQWdMeThnVlhCa1lYUmxJR0Z1SUdWNGFYTjBhVzVuSUhKdmIzUXVYRzRnSUNBZ0lDQWdJQ0FnTHk4Z1ZHaHBjeUJrYjJWemJpZDBJR0ZtWm1WamRDQnZkWElnYlc5MWJuUmxaQ0J5YjI5MElGTmxkQzVjYmlBZ0lDQWdJQ0FnZlNCbGJITmxJR2xtSUNoM1lYTk5iM1Z1ZEdWa0lDWW1JQ0ZwYzAxdmRXNTBaV1FwSUh0Y2JpQWdJQ0FnSUNBZ0lDQXZMeUJWYm0xdmRXNTBJR0Z1SUdWNGFYTjBhVzVuSUhKdmIzUXVYRzRnSUNBZ0lDQWdJQ0FnYlc5MWJuUmxaRkp2YjNSekxtUmxiR1YwWlNoeWIyOTBLVnh1SUNBZ0lDQWdJQ0FnSUdsbUlDaGthV1JGY25KdmNpa2dlMXh1SUNBZ0lDQWdJQ0FnSUNBZ0x5OGdWMlVuYkd3Z2NtVnRiM1Z1ZENCcGRDQnZiaUJtZFhSMWNtVWdaV1JwZEhNdVhHNGdJQ0FnSUNBZ0lDQWdJQ0JtWVdsc1pXUlNiMjkwY3k1aFpHUW9jbTl2ZENsY2JpQWdJQ0FnSUNBZ0lDQjlJR1ZzYzJVZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnYUdWc2NHVnljMEo1VW05dmRDNWtaV3hsZEdVb2NtOXZkQ2xjYmlBZ0lDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNBZ0lIMGdaV3h6WlNCcFppQW9JWGRoYzAxdmRXNTBaV1FnSmlZZ0lXbHpUVzkxYm5SbFpDa2dlMXh1SUNBZ0lDQWdJQ0FnSUdsbUlDaGthV1JGY25KdmNpa2dlMXh1SUNBZ0lDQWdJQ0FnSUNBZ0x5OGdWMlVuYkd3Z2NtVnRiM1Z1ZENCcGRDQnZiaUJtZFhSMWNtVWdaV1JwZEhNdVhHNGdJQ0FnSUNBZ0lDQWdJQ0JtWVdsc1pXUlNiMjkwY3k1aFpHUW9jbTl2ZENsY2JpQWdJQ0FnSUNBZ0lDQjlYRzRnSUNBZ0lDQWdJSDFjYmlBZ0lDQWdJSDBnWld4elpTQjdYRzRnSUNBZ0lDQWdJQzh2SUUxdmRXNTBJR0VnYm1WM0lISnZiM1F1WEc0Z0lDQWdJQ0FnSUcxdmRXNTBaV1JTYjI5MGN5NWhaR1FvY205dmRDbGNiaUFnSUNBZ0lIMWNiaUFnSUNCOVhHNWNiaUFnSUNBdkx5QkJiSGRoZVhNZ1kyRnNiQ0IwYUdVZ1pHVmpiM0poZEdWa0lFUmxkbFJ2YjJ4eklHaHZiMnN1WEc0Z0lDQWdjbVYwZFhKdUlHOXNaRTl1UTI5dGJXbDBSbWxpWlhKU2IyOTBMbUZ3Y0d4NUtIUm9hWE1zSUdGeVozVnRaVzUwY3lsY2JpQWdmVnh1ZlZ4dVhHNHZMeUJVYUdseklHbHpJR0VnZDNKaGNIQmxjaUJ2ZG1WeUlHMXZjbVVnY0hKcGJXbDBhWFpsSUdaMWJtTjBhVzl1Y3lCbWIzSWdjMlYwZEdsdVp5QnphV2R1WVhSMWNtVXVYRzR2THlCVGFXZHVZWFIxY21WeklHeGxkQ0IxY3lCa1pXTnBaR1VnZDJobGRHaGxjaUIwYUdVZ1NHOXZheUJ2Y21SbGNpQm9ZWE1nWTJoaGJtZGxaQ0J2YmlCeVpXWnlaWE5vTGx4dUx5OWNiaTh2SUZSb2FYTWdablZ1WTNScGIyNGdhWE1nYVc1MFpXNWtaV1FnZEc4Z1ltVWdkWE5sWkNCaGN5QmhJSFJ5WVc1elptOXliU0IwWVhKblpYUXNJR1V1Wnk0NlhHNHZMeUIyWVhJZ1gzTWdQU0JqY21WaGRHVlRhV2R1WVhSMWNtVkdkVzVqZEdsdmJrWnZjbFJ5WVc1elptOXliU2dwWEc0dkwxeHVMeThnWm5WdVkzUnBiMjRnU0dWc2JHOG9LU0I3WEc0dkx5QWdJR052Ym5OMElGdG1iMjhzSUhObGRFWnZiMTBnUFNCMWMyVlRkR0YwWlNnd0tUdGNiaTh2SUNBZ1kyOXVjM1FnZG1Gc2RXVWdQU0IxYzJWRGRYTjBiMjFJYjI5cktDazdYRzR2THlBZ0lGOXpLQ2s3SUM4cUlFTmhiR3dnZDJsMGFHOTFkQ0JoY21kMWJXVnVkSE1nZEhKcFoyZGxjbk1nWTI5c2JHVmpkR2x1WnlCMGFHVWdZM1Z6ZEc5dElFaHZiMnNnYkdsemRDNWNiaTh2SUNBZ0lDQWdJQ0FnSUNvZ1ZHaHBjeUJrYjJWemJpZDBJR2hoY0hCbGJpQmtkWEpwYm1jZ2RHaGxJRzF2WkhWc1pTQmxkbUZzZFdGMGFXOXVJR0psWTJGMWMyVWdkMlZjYmk4dklDQWdJQ0FnSUNBZ0lDb2daRzl1SjNRZ2QyRnVkQ0IwYnlCamFHRnVaMlVnZEdobElHMXZaSFZzWlNCdmNtUmxjaUIzYVhSb0lHbHViR2x1WlNCeVpYRjFhWEpsY3k1Y2JpOHZJQ0FnSUNBZ0lDQWdJQ29nVG1WNGRDQmpZV3hzY3lCaGNtVWdibTl2Y0hNdUlDb3ZYRzR2THlBZ0lISmxkSFZ5YmlBOGFERStTR2s4TDJneFBqdGNiaTh2SUgxY2JpOHZYRzR2THlBdktpQkRZV3hzSUhkcGRHZ2dZWEpuZFcxbGJuUnpJR0YwZEdGamFHVnpJSFJvWlNCemFXZHVZWFIxY21VZ2RHOGdkR2hsSUhSNWNHVTZJQ292WEc0dkx5QmZjeWhjYmk4dklDQWdTR1ZzYkc4c1hHNHZMeUFnSUNkMWMyVlRkR0YwWlh0YlptOXZMQ0J6WlhSR2IyOWRmU2d3S1Njc1hHNHZMeUFnSUNncElEMCtJRnQxYzJWRGRYTjBiMjFJYjI5clhTd2dMeW9nVEdGNmVTQjBieUJoZG05cFpDQjBjbWxuWjJWeWFXNW5JR2x1YkdsdVpTQnlaWEYxYVhKbGN5QXFMMXh1THk4Z0tUdGNibVY0Y0c5eWRDQm1kVzVqZEdsdmJpQmpjbVZoZEdWVGFXZHVZWFIxY21WR2RXNWpkR2x2YmtadmNsUnlZVzV6Wm05eWJTZ3BJSHRjYmlBZ2JHVjBJSE5oZG1Wa1ZIbHdaVnh1SUNCc1pYUWdhR0Z6UTNWemRHOXRTRzl2YTNOY2JpQWdiR1YwSUdScFpFTnZiR3hsWTNSSWIyOXJjeUE5SUdaaGJITmxYRzRnSUhKbGRIVnliaUJtZFc1amRHbHZiaUFvZEhsd1pTd2dhMlY1TENCbWIzSmpaVkpsYzJWMExDQm5aWFJEZFhOMGIyMUliMjlyY3lrZ2UxeHVJQ0FnSUdsbUlDaDBlWEJsYjJZZ2EyVjVJRDA5UFNBbmMzUnlhVzVuSnlrZ2UxeHVJQ0FnSUNBZ0x5OGdWMlVuY21VZ2FXNGdkR2hsSUdsdWFYUnBZV3dnY0doaGMyVWdkR2hoZENCaGMzTnZZMmxoZEdWeklITnBaMjVoZEhWeVpYTmNiaUFnSUNBZ0lDOHZJSGRwZEdnZ2RHaGxJR1oxYm1OMGFXOXVjeTRnVG05MFpTQjBhR2x6SUcxaGVTQmlaU0JqWVd4c1pXUWdiWFZzZEdsd2JHVWdkR2x0WlhOY2JpQWdJQ0FnSUM4dklHbHVJRWhQUXlCamFHRnBibk1nYkdsclpTQmZjeWhvYjJNeEtGOXpLR2h2WXpJb1gzTW9ZV04wZFdGc1JuVnVZM1JwYjI0cEtTa3BLUzVjYmlBZ0lDQWdJR2xtSUNnaGMyRjJaV1JVZVhCbEtTQjdYRzRnSUNBZ0lDQWdJQzh2SUZkbEozSmxJR2x1SUhSb1pTQnBibTVsY20xdmMzUWdZMkZzYkN3Z2MyOGdkR2hwY3lCcGN5QjBhR1VnWVdOMGRXRnNJSFI1Y0dVdVhHNGdJQ0FnSUNBZ0lDOHZJQ1JHYkc5M1JtbDRUV1ZiWlhOallYQmxaQzFuWlc1bGNtbGpYU0JrYVhOamIzWmxjbVZrSUhkb1pXNGdkWEJrWVhScGJtY2dSbXh2ZDF4dUlDQWdJQ0FnSUNCellYWmxaRlI1Y0dVZ1BTQjBlWEJsWEc0Z0lDQWdJQ0FnSUdoaGMwTjFjM1J2YlVodmIydHpJRDBnZEhsd1pXOW1JR2RsZEVOMWMzUnZiVWh2YjJ0eklEMDlQU0FuWm5WdVkzUnBiMjRuWEc0Z0lDQWdJQ0I5WEc0Z0lDQWdJQ0F2THlCVFpYUWdkR2hsSUhOcFoyNWhkSFZ5WlNCbWIzSWdZV3hzSUhSNWNHVnpJQ2hsZG1WdUlIZHlZWEJ3WlhKeklTa2dhVzRnWTJGelpWeHVJQ0FnSUNBZ0x5OGdkR2hsZVNCb1lYWmxJRzV2SUhOcFoyNWhkSFZ5WlhNZ2IyWWdkR2hsYVhJZ2IzZHVMaUJVYUdseklHbHpJSFJ2SUhCeVpYWmxiblJjYmlBZ0lDQWdJQzh2SUhCeWIySnNaVzF6SUd4cGEyVWdhSFIwY0hNNkx5OW5hWFJvZFdJdVkyOXRMMlpoWTJWaWIyOXJMM0psWVdOMEwybHpjM1ZsY3k4eU1EUXhOeTVjYmlBZ0lDQWdJR2xtSUNoY2JpQWdJQ0FnSUNBZ2RIbHdaU0FoUFNCdWRXeHNJQ1ltWEc0Z0lDQWdJQ0FnSUNoMGVYQmxiMllnZEhsd1pTQTlQVDBnSjJaMWJtTjBhVzl1SnlCOGZDQjBlWEJsYjJZZ2RIbHdaU0E5UFQwZ0oyOWlhbVZqZENjcFhHNGdJQ0FnSUNBcElIdGNiaUFnSUNBZ0lDQWdjMlYwVTJsbmJtRjBkWEpsS0hSNWNHVXNJR3RsZVN3Z1ptOXlZMlZTWlhObGRDd2daMlYwUTNWemRHOXRTRzl2YTNNcFhHNGdJQ0FnSUNCOVhHNGdJQ0FnSUNCeVpYUjFjbTRnZEhsd1pWeHVJQ0FnSUgwZ1pXeHpaU0I3WEc0Z0lDQWdJQ0F2THlCWFpTZHlaU0JwYmlCMGFHVWdYM01vS1NCallXeHNJSGRwZEdodmRYUWdZWEpuZFcxbGJuUnpMQ0IzYUdsamFDQnRaV0Z1YzF4dUlDQWdJQ0FnTHk4Z2RHaHBjeUJwY3lCMGFHVWdkR2x0WlNCMGJ5QmpiMnhzWldOMElHTjFjM1J2YlNCSWIyOXJJSE5wWjI1aGRIVnlaWE11WEc0Z0lDQWdJQ0F2THlCUGJteDVJR1J2SUhSb2FYTWdiMjVqWlM0Z1ZHaHBjeUJ3WVhSb0lHbHpJR2h2ZENCaGJtUWdjblZ1Y3lBcWFXNXphV1JsS2lCbGRtVnllU0J5Wlc1a1pYSWhYRzRnSUNBZ0lDQnBaaUFvSVdScFpFTnZiR3hsWTNSSWIyOXJjeUFtSmlCb1lYTkRkWE4wYjIxSWIyOXJjeWtnZTF4dUlDQWdJQ0FnSUNCa2FXUkRiMnhzWldOMFNHOXZhM01nUFNCMGNuVmxYRzRnSUNBZ0lDQWdJR052Ykd4bFkzUkRkWE4wYjIxSWIyOXJjMFp2Y2xOcFoyNWhkSFZ5WlNoellYWmxaRlI1Y0dVcFhHNGdJQ0FnSUNCOVhHNGdJQ0FnZlZ4dUlDQjlYRzU5WEc1Y2JtWjFibU4wYVc5dUlHbHpUR2xyWld4NVEyOXRjRzl1Wlc1MFZIbHdaU2gwZVhCbEtTQjdYRzRnSUhOM2FYUmphQ0FvZEhsd1pXOW1JSFI1Y0dVcElIdGNiaUFnSUNCallYTmxJQ2RtZFc1amRHbHZiaWM2SUh0Y2JpQWdJQ0FnSUM4dklFWnBjbk4wTENCa1pXRnNJSGRwZEdnZ1kyeGhjM05sY3k1Y2JpQWdJQ0FnSUdsbUlDaDBlWEJsTG5CeWIzUnZkSGx3WlNBaFBTQnVkV3hzS1NCN1hHNGdJQ0FnSUNBZ0lHbG1JQ2gwZVhCbExuQnliM1J2ZEhsd1pTNXBjMUpsWVdOMFEyOXRjRzl1Wlc1MEtTQjdYRzRnSUNBZ0lDQWdJQ0FnTHk4Z1VtVmhZM1FnWTJ4aGMzTXVYRzRnSUNBZ0lDQWdJQ0FnY21WMGRYSnVJSFJ5ZFdWY2JpQWdJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ0lDQmpiMjV6ZENCdmQyNU9ZVzFsY3lBOUlFOWlhbVZqZEM1blpYUlBkMjVRY205d1pYSjBlVTVoYldWektIUjVjR1V1Y0hKdmRHOTBlWEJsS1Z4dUlDQWdJQ0FnSUNCcFppQW9iM2R1VG1GdFpYTXViR1Z1WjNSb0lENGdNU0I4ZkNCdmQyNU9ZVzFsYzFzd1hTQWhQVDBnSjJOdmJuTjBjblZqZEc5eUp5a2dlMXh1SUNBZ0lDQWdJQ0FnSUM4dklGUm9hWE1nYkc5dmEzTWdiR2xyWlNCaElHTnNZWE56TGx4dUlDQWdJQ0FnSUNBZ0lISmxkSFZ5YmlCbVlXeHpaVnh1SUNBZ0lDQWdJQ0I5WEc1Y2JpQWdJQ0FnSUNBZ2FXWWdLSFI1Y0dVdWNISnZkRzkwZVhCbExsOWZjSEp2ZEc5Zlh5QWhQVDBnVDJKcVpXTjBMbkJ5YjNSdmRIbHdaU2tnZTF4dUlDQWdJQ0FnSUNBZ0lDOHZJRWwwSUdoaGN5QmhJSE4xY0dWeVkyeGhjM011WEc0Z0lDQWdJQ0FnSUNBZ2NtVjBkWEp1SUdaaGJITmxYRzRnSUNBZ0lDQWdJSDFjYmlBZ0lDQWdJQ0FnTHk4Z1VHRnpjeUIwYUhKdmRXZG9MbHh1SUNBZ0lDQWdJQ0F2THlCVWFHbHpJR3h2YjJ0eklHeHBhMlVnWVNCeVpXZDFiR0Z5SUdaMWJtTjBhVzl1SUhkcGRHZ2daVzF3ZEhrZ2NISnZkRzkwZVhCbExseHVJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ0x5OGdSbTl5SUhCc1lXbHVJR1oxYm1OMGFXOXVjeUJoYm1RZ1lYSnliM2R6TENCMWMyVWdibUZ0WlNCaGN5QmhJR2hsZFhKcGMzUnBZeTVjYmlBZ0lDQWdJR052Ym5OMElHNWhiV1VnUFNCMGVYQmxMbTVoYldVZ2ZId2dkSGx3WlM1a2FYTndiR0Y1VG1GdFpWeHVJQ0FnSUNBZ2NtVjBkWEp1SUhSNWNHVnZaaUJ1WVcxbElEMDlQU0FuYzNSeWFXNW5KeUFtSmlBdlhsdEJMVnBkTHk1MFpYTjBLRzVoYldVcFhHNGdJQ0FnZlZ4dUlDQWdJR05oYzJVZ0oyOWlhbVZqZENjNklIdGNiaUFnSUNBZ0lHbG1JQ2gwZVhCbElDRTlJRzUxYkd3cElIdGNiaUFnSUNBZ0lDQWdjM2RwZEdOb0lDaG5aWFJRY205d1pYSjBlU2gwZVhCbExDQW5KQ1IwZVhCbGIyWW5LU2tnZTF4dUlDQWdJQ0FnSUNBZ0lHTmhjMlVnVWtWQlExUmZSazlTVjBGU1JGOVNSVVpmVkZsUVJUcGNiaUFnSUNBZ0lDQWdJQ0JqWVhObElGSkZRVU5VWDAxRlRVOWZWRmxRUlRwY2JpQWdJQ0FnSUNBZ0lDQWdJQzh2SUVSbFptbHVhWFJsYkhrZ1VtVmhZM1FnWTI5dGNHOXVaVzUwY3k1Y2JpQWdJQ0FnSUNBZ0lDQWdJSEpsZEhWeWJpQjBjblZsWEc0Z0lDQWdJQ0FnSUNBZ1pHVm1ZWFZzZERwY2JpQWdJQ0FnSUNBZ0lDQWdJSEpsZEhWeWJpQm1ZV3h6WlZ4dUlDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNCOVhHNGdJQ0FnSUNCeVpYUjFjbTRnWm1Gc2MyVmNiaUFnSUNCOVhHNGdJQ0FnWkdWbVlYVnNkRG9nZTF4dUlDQWdJQ0FnY21WMGRYSnVJR1poYkhObFhHNGdJQ0FnZlZ4dUlDQjlYRzU5WEc1Y2JtWjFibU4wYVc5dUlHbHpRMjl0Y0c5MWJtUkRiMjF3YjI1bGJuUW9kSGx3WlNrZ2UxeHVJQ0JwWmlBb0lXbHpVR3hoYVc1UFltcGxZM1FvZEhsd1pTa3BJSEpsZEhWeWJpQm1ZV3h6WlZ4dUlDQm1iM0lnS0dOdmJuTjBJR3RsZVNCcGJpQjBlWEJsS1NCN1hHNGdJQ0FnYVdZZ0tDRnBjMHhwYTJWc2VVTnZiWEJ2Ym1WdWRGUjVjR1VvZEhsd1pWdHJaWGxkS1NrZ2NtVjBkWEp1SUdaaGJITmxYRzRnSUgxY2JpQWdjbVYwZFhKdUlIUnlkV1ZjYm4xY2JseHVablZ1WTNScGIyNGdhWE5RYkdGcGJrOWlhbVZqZENodlltb3BJSHRjYmlBZ2NtVjBkWEp1SUNoY2JpQWdJQ0JQWW1wbFkzUXVjSEp2ZEc5MGVYQmxMblJ2VTNSeWFXNW5MbU5oYkd3b2IySnFLU0E5UFQwZ0oxdHZZbXBsWTNRZ1QySnFaV04wWFNjZ0ppWmNiaUFnSUNBb2IySnFMbU52Ym5OMGNuVmpkRzl5SUQwOVBTQlBZbXBsWTNRZ2ZId2diMkpxTG1OdmJuTjBjblZqZEc5eUlEMDlQU0IxYm1SbFptbHVaV1FwWEc0Z0lDbGNibjFjYmx4dUx5b3FYRzRnS2lCUWJIVm5hVzRnZFhScGJITmNiaUFxTDF4dVhHNWxlSEJ2Y25RZ1puVnVZM1JwYjI0Z1oyVjBVbVZtY21WemFGSmxaeWhtYVd4bGJtRnRaU2tnZTF4dUlDQnlaWFIxY200Z0tIUjVjR1VzSUdsa0tTQTlQaUJ5WldkcGMzUmxjaWgwZVhCbExDQm1hV3hsYm1GdFpTQXJJQ2NnSnlBcklHbGtLVnh1ZlZ4dVhHNHZMeUJVWVd0bGJpQm1jbTl0SUdoMGRIQnpPaTh2WjJsMGFIVmlMbU52YlM5d2JXMXRkMmd2Y21WaFkzUXRjbVZtY21WemFDMTNaV0p3WVdOckxYQnNkV2RwYmk5aWJHOWlMMjFoYVc0dmJHbGlMM0oxYm5ScGJXVXZVbVZtY21WemFGVjBhV3h6TG1wekkwd3hOREZjYmk4dklGUm9hWE1nWVd4c2IzZHpJSFJ2SUhKbGMybHpkR1Z5SUdOdmJYQnZibVZ1ZEhNZ2JtOTBJR1JsZEdWamRHVmtJR0o1SUZOWFF5QnNhV3RsSUhOMGVXeGxaQ0JqYjIxd2IyNWxiblJjYm1WNGNHOXlkQ0JtZFc1amRHbHZiaUJ5WldkcGMzUmxja1Y0Y0c5eWRITkdiM0pTWldGamRGSmxabkpsYzJnb1ptbHNaVzVoYldVc0lHMXZaSFZzWlVWNGNHOXlkSE1wSUh0Y2JpQWdabTl5SUNoamIyNXpkQ0JyWlhrZ2FXNGdiVzlrZFd4bFJYaHdiM0owY3lrZ2UxeHVJQ0FnSUdsbUlDaHJaWGtnUFQwOUlDZGZYMlZ6VFc5a2RXeGxKeWtnWTI5dWRHbHVkV1ZjYmlBZ0lDQmpiMjV6ZENCbGVIQnZjblJXWVd4MVpTQTlJRzF2WkhWc1pVVjRjRzl5ZEhOYmEyVjVYVnh1SUNBZ0lHbG1JQ2hwYzB4cGEyVnNlVU52YlhCdmJtVnVkRlI1Y0dVb1pYaHdiM0owVm1Gc2RXVXBLU0I3WEc0Z0lDQWdJQ0F2THlBblpYaHdiM0owSnlCcGN5QnlaWEYxYVhKbFpDQjBieUJoZG05cFpDQnJaWGtnWTI5c2JHbHphVzl1SUhkb1pXNGdjbVZ1WVcxbFpDQmxlSEJ2Y25SeklIUm9ZWFJjYmlBZ0lDQWdJQzh2SUhOb1lXUnZkeUJoSUd4dlkyRnNJR052YlhCdmJtVnVkQ0J1WVcxbE9pQm9kSFJ3Y3pvdkwyZHBkR2gxWWk1amIyMHZkbWwwWldwekwzWnBkR1V0Y0d4MVoybHVMWEpsWVdOMEwybHpjM1ZsY3k4eE1UWmNiaUFnSUNBZ0lDOHZJRlJvWlNCeVpXZHBjM1JsY2lCbWRXNWpkR2x2YmlCb1lYTWdZVzRnYVdSbGJuUnBkSGtnWTJobFkyc2dkRzhnYm05MElISmxaMmx6ZEdWeUlIUjNhV05sSUhSb1pTQnpZVzFsSUdOdmJYQnZibVZ1ZEN4Y2JpQWdJQ0FnSUM4dklITnZJSFJvYVhNZ2FYTWdjMkZtWlNCMGJ5QnViM1FnZFhObFpDQjBhR1VnYzJGdFpTQnJaWGtnYUdWeVpTNWNiaUFnSUNBZ0lISmxaMmx6ZEdWeUtHVjRjRzl5ZEZaaGJIVmxMQ0JtYVd4bGJtRnRaU0FySUNjZ1pYaHdiM0owSUNjZ0t5QnJaWGtwWEc0Z0lDQWdmU0JsYkhObElHbG1JQ2hwYzBOdmJYQnZkVzVrUTI5dGNHOXVaVzUwS0dWNGNHOXlkRlpoYkhWbEtTa2dlMXh1SUNBZ0lDQWdabTl5SUNoamIyNXpkQ0J6ZFdKTFpYa2dhVzRnWlhod2IzSjBWbUZzZFdVcElIdGNiaUFnSUNBZ0lDQWdjbVZuYVhOMFpYSW9YRzRnSUNBZ0lDQWdJQ0FnWlhod2IzSjBWbUZzZFdWYmMzVmlTMlY1WFN4Y2JpQWdJQ0FnSUNBZ0lDQm1hV3hsYm1GdFpTQXJJQ2NnWlhod2IzSjBJQ2NnS3lCclpYa2dLeUFuTFNjZ0t5QnpkV0pMWlhrc1hHNGdJQ0FnSUNBZ0lDbGNiaUFnSUNBZ0lIMWNiaUFnSUNCOVhHNGdJSDFjYm4xY2JseHVablZ1WTNScGIyNGdaR1ZpYjNWdVkyVW9abTRzSUdSbGJHRjVLU0I3WEc0Z0lHeGxkQ0JvWVc1a2JHVmNiaUFnY21WMGRYSnVJQ2dwSUQwK0lIdGNiaUFnSUNCamJHVmhjbFJwYldWdmRYUW9hR0Z1Wkd4bEtWeHVJQ0FnSUdoaGJtUnNaU0E5SUhObGRGUnBiV1Z2ZFhRb1ptNHNJR1JsYkdGNUtWeHVJQ0I5WEc1OVhHNWNibU52Ym5OMElHaHZiMnR6SUQwZ1cxMWNibmRwYm1SdmR5NWZYM0psWjJsemRHVnlRbVZtYjNKbFVHVnlabTl5YlZKbFlXTjBVbVZtY21WemFDQTlJQ2hqWWlrZ1BUNGdlMXh1SUNCb2IyOXJjeTV3ZFhOb0tHTmlLVnh1ZlZ4dVkyOXVjM1FnWlc1eGRXVjFaVlZ3WkdGMFpTQTlJR1JsWW05MWJtTmxLR0Z6ZVc1aklDZ3BJRDArSUh0Y2JpQWdhV1lnS0dodmIydHpMbXhsYm1kMGFDa2dZWGRoYVhRZ1VISnZiV2x6WlM1aGJHd29hRzl2YTNNdWJXRndLQ2hqWWlrZ1BUNGdZMklvS1NrcFhHNGdJSEJsY21admNtMVNaV0ZqZEZKbFpuSmxjMmdvS1Z4dWZTd2dNVFlwWEc1Y2JtVjRjRzl5ZENCbWRXNWpkR2x2YmlCMllXeHBaR0YwWlZKbFpuSmxjMmhDYjNWdVpHRnllVUZ1WkVWdWNYVmxkV1ZWY0dSaGRHVW9YRzRnSUdsa0xGeHVJQ0J3Y21WMlJYaHdiM0owY3l4Y2JpQWdibVY0ZEVWNGNHOXlkSE1zWEc0cElIdGNiaUFnWTI5dWMzUWdhV2R1YjNKbFpFVjRjRzl5ZEhNZ1BTQjNhVzVrYjNjdVgxOW5aWFJTWldGamRGSmxabkpsYzJoSloyNXZjbVZrUlhod2IzSjBjejh1S0hzZ2FXUWdmU2tnUHo4Z1cxMWNiaUFnYVdZZ0tGeHVJQ0FnSUhCeVpXUnBZMkYwWlU5dVJYaHdiM0owS0Z4dUlDQWdJQ0FnYVdkdWIzSmxaRVY0Y0c5eWRITXNYRzRnSUNBZ0lDQndjbVYyUlhod2IzSjBjeXhjYmlBZ0lDQWdJQ2hyWlhrcElEMCtJR3RsZVNCcGJpQnVaWGgwUlhod2IzSjBjeXhjYmlBZ0lDQXBJQ0U5UFNCMGNuVmxYRzRnSUNrZ2UxeHVJQ0FnSUhKbGRIVnliaUFuUTI5MWJHUWdibTkwSUVaaGMzUWdVbVZtY21WemFDQW9aWGh3YjNKMElISmxiVzkyWldRcEoxeHVJQ0I5WEc0Z0lHbG1JQ2hjYmlBZ0lDQndjbVZrYVdOaGRHVlBia1Y0Y0c5eWRDaGNiaUFnSUNBZ0lHbG5ibTl5WldSRmVIQnZjblJ6TEZ4dUlDQWdJQ0FnYm1WNGRFVjRjRzl5ZEhNc1hHNGdJQ0FnSUNBb2EyVjVLU0E5UGlCclpYa2dhVzRnY0hKbGRrVjRjRzl5ZEhNc1hHNGdJQ0FnS1NBaFBUMGdkSEoxWlZ4dUlDQXBJSHRjYmlBZ0lDQnlaWFIxY200Z0owTnZkV3hrSUc1dmRDQkdZWE4wSUZKbFpuSmxjMmdnS0c1bGR5QmxlSEJ2Y25RcEoxeHVJQ0I5WEc1Y2JpQWdiR1YwSUdoaGMwVjRjRzl5ZEhNZ1BTQm1ZV3h6WlZ4dUlDQmpiMjV6ZENCaGJHeEZlSEJ2Y25SelFYSmxRMjl0Y0c5dVpXNTBjMDl5Vlc1amFHRnVaMlZrSUQwZ2NISmxaR2xqWVhSbFQyNUZlSEJ2Y25Rb1hHNGdJQ0FnYVdkdWIzSmxaRVY0Y0c5eWRITXNYRzRnSUNBZ2JtVjRkRVY0Y0c5eWRITXNYRzRnSUNBZ0tHdGxlU3dnZG1Gc2RXVXBJRDArSUh0Y2JpQWdJQ0FnSUdoaGMwVjRjRzl5ZEhNZ1BTQjBjblZsWEc0Z0lDQWdJQ0JwWmlBb2FYTk1hV3RsYkhsRGIyMXdiMjVsYm5SVWVYQmxLSFpoYkhWbEtTa2djbVYwZFhKdUlIUnlkV1ZjYmlBZ0lDQWdJR2xtSUNocGMwTnZiWEJ2ZFc1a1EyOXRjRzl1Wlc1MEtIWmhiSFZsS1NrZ2NtVjBkWEp1SUhSeWRXVmNiaUFnSUNBZ0lISmxkSFZ5YmlCd2NtVjJSWGh3YjNKMGMxdHJaWGxkSUQwOVBTQnVaWGgwUlhod2IzSjBjMXRyWlhsZFhHNGdJQ0FnZlN4Y2JpQWdLVnh1SUNCcFppQW9hR0Z6Ulhod2IzSjBjeUFtSmlCaGJHeEZlSEJ2Y25SelFYSmxRMjl0Y0c5dVpXNTBjMDl5Vlc1amFHRnVaMlZrSUQwOVBTQjBjblZsS1NCN1hHNGdJQ0FnWlc1eGRXVjFaVlZ3WkdGMFpTZ3BYRzRnSUgwZ1pXeHpaU0I3WEc0Z0lDQWdjbVYwZFhKdUlHQkRiM1ZzWkNCdWIzUWdSbUZ6ZENCU1pXWnlaWE5vSUNoY0lpUjdZV3hzUlhod2IzSjBjMEZ5WlVOdmJYQnZibVZ1ZEhOUGNsVnVZMmhoYm1kbFpIMWNJaUJsZUhCdmNuUWdhWE1nYVc1amIyMXdZWFJwWW14bEtTNGdUR1ZoY200Z2JXOXlaU0JoZENCb2RIUndjem92TDJkcGRHaDFZaTVqYjIwdmRtbDBaV3B6TDNacGRHVXRjR3gxWjJsdUxYSmxZV04wTDNSeVpXVXZiV0ZwYmk5d1lXTnJZV2RsY3k5d2JIVm5hVzR0Y21WaFkzUWpZMjl1YzJsemRHVnVkQzFqYjIxd2IyNWxiblJ6TFdWNGNHOXlkSE5nWEc0Z0lIMWNibjFjYmx4dVpuVnVZM1JwYjI0Z2NISmxaR2xqWVhSbFQyNUZlSEJ2Y25Rb2FXZHViM0psWkVWNGNHOXlkSE1zSUcxdlpIVnNaVVY0Y0c5eWRITXNJSEJ5WldScFkyRjBaU2tnZTF4dUlDQm1iM0lnS0dOdmJuTjBJR3RsZVNCcGJpQnRiMlIxYkdWRmVIQnZjblJ6S1NCN1hHNGdJQ0FnYVdZZ0tHdGxlU0E5UFQwZ0oxOWZaWE5OYjJSMWJHVW5LU0JqYjI1MGFXNTFaVnh1SUNBZ0lHbG1JQ2hwWjI1dmNtVmtSWGh3YjNKMGN5NXBibU5zZFdSbGN5aHJaWGtwS1NCamIyNTBhVzUxWlZ4dUlDQWdJR052Ym5OMElHUmxjMk1nUFNCUFltcGxZM1F1WjJWMFQzZHVVSEp2Y0dWeWRIbEVaWE5qY21sd2RHOXlLRzF2WkhWc1pVVjRjRzl5ZEhNc0lHdGxlU2xjYmlBZ0lDQnBaaUFvWkdWell5QW1KaUJrWlhOakxtZGxkQ2tnY21WMGRYSnVJR3RsZVZ4dUlDQWdJR2xtSUNnaGNISmxaR2xqWVhSbEtHdGxlU3dnYlc5a2RXeGxSWGh3YjNKMGMxdHJaWGxkS1NrZ2NtVjBkWEp1SUd0bGVWeHVJQ0I5WEc0Z0lISmxkSFZ5YmlCMGNuVmxYRzU5WEc1Y2JpOHZJRWhwWkdWeklIWnBkR1V0YVdkdWIzSmxaQ0JrZVc1aGJXbGpJR2x0Y0c5eWRDQnpieUIwYUdGMElGWnBkR1VnWTJGdUlITnJhWEFnWVc1aGJIbHphWE1nYVdZZ2JtOGdiM1JvWlhKY2JpOHZJR1I1Ym1GdGFXTWdhVzF3YjNKMElHbHpJSEJ5WlhObGJuUWdLR2gwZEhCek9pOHZaMmwwYUhWaUxtTnZiUzkyYVhSbGFuTXZkbWwwWlM5d2RXeHNMekV5TnpNeUtWeHVaWGh3YjNKMElHTnZibk4wSUY5ZmFHMXlYMmx0Y0c5eWRDQTlJQ2h0YjJSMWJHVXBJRDArSUdsdGNHOXlkQ2d2S2lCQWRtbDBaUzFwWjI1dmNtVWdLaThnWDE5MmFYUmxYMTlwYm1wbFkzUlJkV1Z5ZVNodGIyUjFiR1VzSUNkcGJYQnZjblFuS1NsY2JseHVMeThnUm05eUlHSmhZMnQzWVhKa2N5QmpiMjF3WVhScFltbHNhWFI1SUhkcGRHZ2dRSFpwZEdWcWN5OXdiSFZuYVc0dGNtVmhZM1F1WEc1bGVIQnZjblFnWkdWbVlYVnNkQ0I3SUdsdWFtVmpkRWx1ZEc5SGJHOWlZV3hJYjI5cklIMWNiaUpkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZCUVN4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRExGZEJRVmNzUTBGQlF5eEZRVUZGTEVOQlFVTXNiVUpCUVcxQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETzBGQlEzSkdMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eFBRVUZQTEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEVOQlFVTXNWVUZCVlN4RFFVRkRMRTFCUVUwc1EwRkJReXhGUVVGRkxFTkJRVU1zUzBGQlN5eERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRPenRCUVVVNVJTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRk5CUVZNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4VFFVRlRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRM3BFTEVOQlFVTXNRMEZCUXp0QlFVTkdMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVTXNWVUZCVlN4RFFVRkRMRWxCUVVrc1EwRkJReXhGUVVGRkxFTkJRVU1zVDBGQlR5eERRVUZETEVWQlFVVXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eEhRVUZITEVOQlFVTXNVVUZCVVN4RFFVRkRMRXRCUVVzc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEZGQlFWRXNRMEZCUXl4TFFVRkxMRU5CUVVNc1QwRkJUeXhEUVVGRExFZEJRVWNzUTBGQlF5eHBRa0ZCYVVJc1EwRkJRenRCUVVOc1NTeERRVUZETEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1NVRkJTU3hEUVVGRExHRkJRV0VzUTBGQlF5eEhRVUZITEVOQlFVTXNUMEZCVHl4RFFVRkRMRXRCUVVzc1EwRkJReXhOUVVGTk8wRkJRM1JFTEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhMUVVGTExFTkJRVU1zUjBGQlJ5eERRVUZETEZGQlFWRXNRMEZCUXl4RlFVRkZMRU5CUVVNc1IwRkJSeXhEUVVGRExFMUJRVTBzUTBGQlF5eEhRVUZITEVOQlFVTXNSMEZCUnl4RFFVRkRMRmRCUVZjN1FVRkROVVFzUTBGQlF5eERRVUZET3p0QlFVVkdMRXRCUVVzc1EwRkJReXh6UWtGQmMwSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4WFFVRlhMRU5CUVVNN1FVRkROMFFzUzBGQlN5eERRVUZETEdWQlFXVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4SlFVRkpMRU5CUVVNN08wRkJSUzlETEVOQlFVTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhMUVVGTExFTkJRVU1zVFVGQlRTeERRVUZETEV0QlFVc3NRMEZCUXl4WlFVRlpPMEZCUTNKRExFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFVkJRVVVzUTBGQlF5eFRRVUZUTEVOQlFVTXNVVUZCVVN4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFZEJRVWNzUTBGQlF5eFBRVUZQTEVOQlFVTXNSMEZCUnl4RFFVRkRMRWRCUVVjc1EwRkJReXhMUVVGTE8wRkJReTlFTEVkQlFVY3NRMEZCUXl4bFFVRmxMRU5CUVVNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eEhRVUZITEVOQlFVTTdRVUZET1VJc1IwRkJSeXhEUVVGRExHbENRVUZwUWl4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zVDBGQlR5eERRVUZETzBGQlEzQkRMRWRCUVVjc1EwRkJReXh0UWtGQmJVSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFOUJRVThzUTBGQlF6czdRVUZGZEVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEU5QlFVOHNRMEZCUXl4RlFVRkZMRU5CUVVNc1NVRkJTU3hEUVVGRExFVkJRVVVzUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1JVRkJSU3hEUVVGRExFbEJRVWtzUTBGQlF5eEhRVUZITEVOQlFVTTdRVUZEYWtRc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1MwRkJTeXhEUVVGRExFMUJRVTBzUTBGQlF5eEpRVUZKTzBGQlF6bEVMRXRCUVVzc1EwRkJReXh4UWtGQmNVSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFOUJRVThzUTBGQlF6czdRVUZGTVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVWQlFVVXNRMEZCUXl4UFFVRlBMRU5CUVVNc1JVRkJSU3hEUVVGRExFdEJRVXNzUTBGQlF5eHRRa0ZCYlVJc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNUdEJRVU4wUkN4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUlVGQlJTeERRVUZETEVWQlFVVXNRMEZCUXl4TFFVRkxMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNVVUZCVVN4RFFVRkRMRU5CUVVNc1RVRkJUVHRCUVVNNVF5eEhRVUZITEVOQlFVTXNZMEZCWXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE96dEJRVVYwUWl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUlVGQlJTeERRVUZETEZGQlFWRXNRMEZCUXl4RlFVRkZMRU5CUVVNc1IwRkJSeXhEUVVGRExGRkJRVkVzUTBGQlF5eEhRVUZITEVOQlFVTXNVVUZCVVN4RFFVRkRMRTFCUVUwc1EwRkJReXhKUVVGSk8wRkJRelZFTEV0QlFVc3NRMEZCUXl4dFFrRkJiVUlzUTBGQlF5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRWRCUVVjc1EwRkJRenM3UVVGRmNFTXNTMEZCU3l4RFFVRkRMR0ZCUVdFc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEVkQlFVY3NRMEZCUXpzN1FVRkZPVUlzUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRWxCUVVrc1EwRkJReXhMUVVGTExFTkJRVU1zUlVGQlJTeERRVUZETEU5QlFVOHNRMEZCUXl4TFFVRkxMRU5CUVVNc1JVRkJSU3hEUVVGRExFVkJRVVVzUTBGQlF5eEhRVUZITEVOQlFVTXNVVUZCVVN4RFFVRkRMRTlCUVU4N1FVRkROVVFzUzBGQlN5eERRVUZETEZsQlFWa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFZEJRVWNzUTBGQlF6dEJRVU0zUWl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNc1JVRkJSU3hEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4UlFVRlJMRU5CUVVNc1JVRkJSU3hEUVVGRExFVkJRVVVzUTBGQlF5eEZRVUZGTEVOQlFVTXNSMEZCUnl4RFFVRkRMRXRCUVVzc1EwRkJReXhGUVVGRkxFTkJRVU1zU1VGQlNUdEJRVU4wUlN4TFFVRkxMRU5CUVVNc1YwRkJWeXhEUVVGRExFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNSMEZCUnl4RFFVRkRPenRCUVVVMVFpeERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eEhRVUZITEVOQlFVTXNTVUZCU1N4RFFVRkRMRTlCUVU4c1EwRkJReXhIUVVGSExFTkJRVU1zUzBGQlN5eERRVUZETEVsQlFVazdRVUZEYmtRc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEV0QlFVc3NRMEZCUXl4RlFVRkZMRU5CUVVNc1JVRkJSU3hEUVVGRExFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTXNSVUZCUlN4RFFVRkRMRVZCUVVVc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVkQlFVY3NRMEZCUXl4TFFVRkxMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eEZRVUZGTEVOQlFVTXNTMEZCU3p0QlFVTTNSU3hEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNTMEZCU3l4RFFVRkRMRVZCUVVVc1EwRkJReXhGUVVGRkxFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRExFTkJRVU1zVDBGQlR5eERRVUZETEVWQlFVVXNRMEZCUXl4RlFVRkZMRU5CUVVNc1VVRkJVVHRCUVVNeFJDeEhRVUZITEVOQlFVTXNXVUZCV1N4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zVDBGQlR5eERRVUZETzBGQlF5OUNMRWRCUVVjc1EwRkJReXh0UWtGQmJVSXNRMEZCUXl4RFFVRkRMRU5CUVVNN08wRkJSVEZDTEZGQlFWRXNRMEZCUXl4alFVRmpMRU5CUVVNc1UwRkJVeXhEUVVGRExFTkJRVU03UVVGRGJrTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExGTkJRVk1zUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF6dEJRVU5zUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eFRRVUZUTEVOQlFVTTdRVUZEY2tJc1EwRkJReXhEUVVGRE96dEJRVVZHTEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU1zUTBGQlF5eFRRVUZUTEVOQlFVTTdRVUZETVVJc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF6dEJRVU5PTEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNN1FVRkRUaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRU5CUVVNc1UwRkJVeXhEUVVGRExHTkJRV01zUTBGQlF6dEJRVU55UXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRPMEZCUTJoQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFZEJRVWNzUTBGQlF5eE5RVUZOTEVOQlFVTXNSVUZCUlN4RFFVRkRMRVZCUVVVc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eFZRVUZWTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWRCUVVjc1EwRkJRenRCUVVOd1JTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFOUJRVThzUTBGQlF5eEZRVUZGTEVOQlFVTXNSMEZCUnl4RFFVRkRMRXRCUVVzc1EwRkJReXhGUVVGRkxFTkJRVU1zVFVGQlRTeERRVUZETEZkQlFWY3NRMEZCUXl4TlFVRk5MRU5CUVVNc1UwRkJVenRCUVVOc1JTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zUlVGQlJTeERRVUZETEVWQlFVVXNRMEZCUXl4SlFVRkpMRU5CUVVNc1JVRkJSU3hEUVVGRExFOUJRVTg3UVVGRGNrUXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhUUVVGVExFTkJRVU1zVlVGQlZTeERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTXpRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZOQlFWTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRM2hDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRE8wRkJRMWdzUTBGQlF5eERRVUZET3p0QlFVVkdMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRla01zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXp0QlFVTjRRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRGNFTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNSVUZCUlN4RFFVRkRMRWxCUVVrc1EwRkJReXhGUVVGRkxFTkJRVU1zVDBGQlR6dEJRVU55UkN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFRRVUZUTEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVNM1FpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhUUVVGVExFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTXhRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNN1FVRkRZaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwb3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zYlVKQlFXMUNMRU5CUVVNc1EwRkJReXhEUVVGRExHMUNRVUZ0UWl4RFFVRkRMRWRCUVVjc1EwRkJReXhKUVVGSk8wRkJRelZFTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zYlVKQlFXMUNMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXp0QlFVTXpReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zVTBGQlV5eERRVUZETEV0QlFVc3NRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNSMEZCUnl4RFFVRkRMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zUTBGQlF5eFBRVUZQTzBGQlF6ZEZMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhGUVVGRkxFTkJRVU1zU1VGQlNTeERRVUZETEVWQlFVVXNRMEZCUXl4UFFVRlBMRU5CUVVNc1JVRkJSU3hEUVVGRExFZEJRVWNzUTBGQlF5eE5RVUZOTEVOQlFVTXNSVUZCUlN4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1QwRkJUenRCUVVOb1JpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOT0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEU2l4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eGhRVUZoTEVOQlFVTXNRMEZCUXl4RFFVRkRMR05CUVdNc1EwRkJReXh0UWtGQmJVSTdRVUZETlVRc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4dFFrRkJiVUlzUTBGQlF5eFZRVUZWTEVOQlFVTXNRMEZCUXp0QlFVTjRReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4VFFVRlRMRU5CUVVNc1ZVRkJWU3hEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU0zUWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMG9zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZETTBJc1EwRkJReXhEUVVGRE96dEJRVVZHTEVOQlFVTXNRMEZCUXl4VFFVRlRMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU4wUWl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRE8wRkJRMVE3TzBGQlJVRXNVVUZCVVN4RFFVRkRMRzFDUVVGdFFpeERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRE8wRkJRMnBFTEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1lVRkJZU3hEUVVGRExFTkJRVU1zUTBGQlF5eHRRa0ZCYlVJc1EwRkJReXhIUVVGSExFTkJRVU1zVVVGQlVUdEJRVU40UkN4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExHRkJRV0VzUTBGQlF5eERRVUZETEVOQlFVTXNiVUpCUVcxQ0xFTkJRVU1zUjBGQlJ5eERRVUZETEZGQlFWRTdPMEZCUlhoRUxFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4aFFVRmhMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1lVRkJZU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVNN1FVRkRiRVVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNN1FVRkRXQ3hEUVVGRExFTkJRVU03UVVGRFJpeERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1lVRkJZU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExHRkJRV0VzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRk5CUVZNc1EwRkJReXhEUVVGRE8wRkJRMnhGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRE8wRkJRMWdzUTBGQlF5eERRVUZETzBGQlEwWXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExHTkJRV01zUTBGQlF5eGhRVUZoTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExHTkJRV01zUTBGQlF5eGhRVUZoTEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTNaRkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRPMEZCUTFnc1EwRkJReXhEUVVGRE8wRkJRMFlzUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMR0ZCUVdFc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF6dEJRVU5vUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF6dEJRVU5ZTEVOQlFVTXNRMEZCUXpzN1FVRkZSaXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETzBGQlExUTdPMEZCUlVFc1VVRkJVU3hEUVVGRExGbEJRVmtzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXp0QlFVTTFRaXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4VFFVRlRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEZOQlFWTXNRMEZCUXp0QlFVTXhRenM3UVVGRlFTeFJRVUZSTEVOQlFVTXNkVUpCUVhWQ0xFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNVVUZCVVN4RFFVRkRMRU5CUVVNN1FVRkRja1FzUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRmxCUVZrc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4WlFVRlpMRU5CUVVNc1VVRkJVU3hEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU40UkN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF6dEJRVU5ZTEVOQlFVTXNRMEZCUXp0QlFVTkdMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eHRRa0ZCYlVJc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUXk5RExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRPMEZCUTFnc1EwRkJReXhEUVVGRE8wRkJRMFlzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXp0QlFVTlVPenRCUVVWQkxGRkJRVkVzUTBGQlF5eGhRVUZoTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNN1FVRkROMElzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhMUVVGTExFTkJRVU1zVDBGQlR5eERRVUZETEV0QlFVc3NRMEZCUXl4RlFVRkZMRU5CUVVNc1NVRkJTU3hEUVVGRExFOUJRVThzUTBGQlF5eEpRVUZKTzBGQlEyeEVMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zY1VKQlFYRkNMRU5CUVVNc1IwRkJSeXhEUVVGRExFbEJRVWs3UVVGRGRrTTdPMEZCUlVFc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExGTkJRVk1zUTBGQlF5eEZRVUZGTEVOQlFVTXNUMEZCVHl4RFFVRkRMRTlCUVU4c1EwRkJReXhMUVVGTExFTkJRVU1zVDBGQlR5eERRVUZETEVkQlFVY3NRMEZCUXl4UFFVRlBPMEZCUXpGRkxGRkJRVkVzUTBGQlF5eFhRVUZYTEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1VVRkJVU3hEUVVGRExFTkJRVU03UVVGRGRrTXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJRenRCUVVOT0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRTFCUVUwc1EwRkJReXhSUVVGUk8wRkJRekZDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTTdRVUZEYUVJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4aFFVRmhMRU5CUVVNc1RVRkJUVHRCUVVNelFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJRenRCUVVOWUxFTkJRVU1zUTBGQlF6dEJRVU5HT3p0QlFVVkJMRkZCUVZFc1EwRkJReXh0UWtGQmJVSXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRMMElzUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMR05CUVdNc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOdVF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJRenRCUVVOWUxFTkJRVU1zUTBGQlF6dEJRVU5HTEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXh0UWtGQmJVSXNRMEZCUXl4RFFVRkRPMEZCUXpOQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRPMEZCUTFnc1EwRkJReXhEUVVGRE96dEJRVVZHTEVOQlFVTXNRMEZCUXl4dFFrRkJiVUlzUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEZUVJc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF6dEJRVU5PTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExHRkJRV0VzUTBGQlF5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRWRCUVVjc1EwRkJRenRCUVVOc1F5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhsUVVGbExFTkJRVU1zUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4SFFVRkhMRU5CUVVNN08wRkJSWEJETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEY0VJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eGpRVUZqTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRkRUlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlF6VkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhKUVVGSkxFTkJRVU1zUlVGQlJTeERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4SFFVRkhMRU5CUVVNc1RVRkJUU3hEUVVGRE8wRkJRM0JFTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1JVRkJSU3hEUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVTXNSMEZCUnl4RFFVRkRMRXRCUVVzc1EwRkJReXhWUVVGVk8wRkJRMnhFTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJRenRCUVVNNVFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXh4UWtGQmNVSXNRMEZCUXl4SFFVRkhMRU5CUVVNc1VVRkJVU3hEUVVGRExFTkJRVU1zVFVGQlRUdEJRVU5vUkN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eHhRa0ZCY1VJc1EwRkJReXhIUVVGSExFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNUVUZCVFR0QlFVTm9SQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU1zUTBGQlF6czdRVUZGZGtJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1UwRkJVeXhEUVVGRExFOUJRVThzUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEUxQlFVMHNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eExRVUZMTzBGQlEyNUZMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMSFZDUVVGMVFpeERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRGRrUXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEdWQlFXVXNRMEZCUXl4SFFVRkhMRU5CUVVNc1RVRkJUVHRCUVVOc1F5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETzBGQlEySXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEdGQlFXRXNRMEZCUXl4SFFVRkhMRU5CUVVNc1RVRkJUVHRCUVVOb1F5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOT0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXpzN1FVRkZUQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eExRVUZMTEVOQlFVTXNUVUZCVFN4RFFVRkRMRVZCUVVVc1EwRkJReXhUUVVGVExFTkJRVU1zU1VGQlNTeERRVUZETEZWQlFWVTdRVUZETjBRc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOdVFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhsUVVGbExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UlFVRlJMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVTXNUVUZCVFN4RFFVRkRMRlZCUVZVc1EwRkJRenRCUVVOc1JTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhoUVVGaExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UlFVRlJMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVTTdRVUZET1VNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6czdRVUZGU2l4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExHMUNRVUZ0UWl4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUXpkRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVTXNTMEZCU3l4RFFVRkRMRWRCUVVjc1EwRkJReXhGUVVGRkxFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRWRCUVVjc1EwRkJReXhQUVVGUExFTkJRVU1zUlVGQlJTeERRVUZETEV0QlFVc3NRMEZCUXl4TlFVRk5PMEZCUTNCRkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTXNTVUZCU1N4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4SFFVRkhMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVWQlFVVXNRMEZCUXl4SFFVRkhMRU5CUVVNc1IwRkJSeXhEUVVGRExFOUJRVThzUTBGQlF5eFBRVUZQTzBGQlEzUkdMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEU5QlFVOHNRMEZCUXl4cFFrRkJhVUlzUTBGQlF5eGhRVUZoTzBGQlF6ZERMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6czdRVUZGVEN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTI1Q0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRlZCUVZVc1EwRkJReXhEUVVGRExFTkJRVU03TzBGQlJYSkNMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRkZCUVZFc1EwRkJReXhKUVVGSkxFTkJRVU1zUjBGQlJ5eERRVUZETEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1IwRkJSeXhEUVVGRExFOUJRVThzUTBGQlF5eE5RVUZOTEVOQlFVTXNUMEZCVHp0QlFVTm9SU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhGUVVGRkxFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNSVUZCUlN4RFFVRkRMRTlCUVU4c1EwRkJRenRCUVVOcVJTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eFBRVUZQTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1JVRkJSU3hEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRPMEZCUTNKRkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFdEJRVXNzUTBGQlF5eFBRVUZQTEVOQlFVTXNTVUZCU1N4RFFVRkRMRVZCUVVVc1EwRkJReXhGUVVGRkxFTkJRVU1zUzBGQlN5eERRVUZETEVWQlFVVXNRMEZCUXl4SFFVRkhMRU5CUVVNc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1VVRkJVU3hEUVVGRExFbEJRVWs3UVVGRGFFWXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zYlVKQlFXMUNMRU5CUVVNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eEhRVUZITEVOQlFVTXNWMEZCVnp0QlFVTnVSQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4dlFrRkJiMElzUTBGQlF5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRWRCUVVjc1EwRkJReXhaUVVGWk8wRkJRM0pFTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExIRkNRVUZ4UWl4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUjBGQlJ5eERRVUZETEdGQlFXRTdPMEZCUlhaRUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNiVUpCUVcxQ0xFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRE1VTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRMRU5CUVVNc2NVSkJRWEZDTEVOQlFVTXNSMEZCUnl4RFFVRkRMRWxCUVVrN1FVRkRjRVFzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1UwRkJVeXhEUVVGRExFTkJRVU03UVVGRGFrTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4SFFVRkhMRU5CUVVNc1MwRkJTenRCUVVOMlFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRWRCUVVjc1EwRkJReXhKUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFVkJRVVVzUTBGQlF5eExRVUZMTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNN1FVRkRPVVVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMUlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRUaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRExGZEJRVmNzUTBGQlF5eEhRVUZITEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOc1F5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRTFCUVUwc1EwRkJReXhOUVVGTk8wRkJRek5DTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMDRzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zV1VGQldTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU03UVVGRGFrTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlExSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFRpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eERRVUZETEZsQlFWa3NRMEZCUXl4SFFVRkhMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU51UXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEVWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5PTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXl4RFFVRkRMRmxCUVZrc1EwRkJReXhIUVVGSExFTkJRVU1zU1VGQlNUdEJRVU16UXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTTdRVUZEVml4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUMEZCVHl4RFFVRkRMRmxCUVZrc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eFBRVUZQTzBGQlF6RkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF6dEJRVU53UWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF6dEJRVU4yUWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRGNrSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4VlFVRlZMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRM1pDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5TTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExFdEJRVXNzUTBGQlF5eExRVUZMTzBGQlEyeERMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwNHNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMHdzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4dlFrRkJiMElzUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU16UXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1EwRkJReXh4UWtGQmNVSXNRMEZCUXl4SFFVRkhMRU5CUVVNc1NVRkJTVHRCUVVOd1JDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhUUVVGVExFTkJRVU1zUTBGQlF6dEJRVU5xUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRWRCUVVjc1EwRkJReXhMUVVGTE8wRkJRM1pDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1IwRkJSeXhEUVVGRExFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUlVGQlJTeERRVUZETEV0QlFVc3NRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJRenRCUVVNNVJTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFVpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOT0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU1zV1VGQldTeERRVUZETEVkQlFVY3NRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMjVETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1RVRkJUU3hEUVVGRExFOUJRVTg3UVVGRE5VSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFRpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU03UVVGRFZpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVDBGQlR5eERRVUZETEdWQlFXVXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhOUVVGTk8wRkJRelZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJRenRCUVVOd1FpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJRenRCUVVOMlFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRja0lzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFZRVUZWTEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTNaQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOU0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRXRCUVVzc1EwRkJReXhMUVVGTE8wRkJRMnhETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMDRzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTB3c1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJRenRCUVVOc1FpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU03UVVGRFdpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTBvc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTTdRVUZEV0N4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFOUJRVThzUTBGQlF6dEJRVU5hTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc2JVSkJRVzFDTEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUXpGQ0xFTkJRVU1zUTBGQlF6dEJRVU5HT3p0QlFVVkJMRkZCUVZFc1EwRkJReXhSUVVGUkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNN1FVRkROVUlzUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMEZCUTNKQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEU2l4RFFVRkRMRU5CUVVNN1FVRkRSaXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNVVUZCVVN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTTVSQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwb3NRMEZCUXl4RFFVRkRPenRCUVVWR0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1IwRkJSeXhEUVVGRExFMUJRVTBzUTBGQlF5eEZRVUZGTEVOQlFVTXNSVUZCUlN4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFVkJRVVVzUTBGQlF6dEJRVU5xUkN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEV0QlFVc3NRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eEhRVUZITEVOQlFVTXNSVUZCUlN4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEZOQlFWTTdRVUZETlVRc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4UlFVRlJMRU5CUVVNc1IwRkJSeXhEUVVGRExFZEJRVWNzUTBGQlF5eExRVUZMTEVOQlFVTXNXVUZCV1N4RFFVRkRMRWRCUVVjc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNUdEJRVU0zUkN4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zYVVKQlFXbENMRU5CUVVNc1IwRkJSeXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEYmtNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5LTEVOQlFVTXNRMEZCUXp0QlFVTkdMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNUVUZCVFN4RFFVRkRMRVZCUVVVc1EwRkJReXhSUVVGUkxFTkJRVU1zUlVGQlJTeERRVUZETEUxQlFVMHNRMEZCUXl4RlFVRkZPMEZCUXpORExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1JVRkJSU3hEUVVGRExFbEJRVWtzUTBGQlF5eFhRVUZYTEVOQlFVTXNUMEZCVHl4RFFVRkRPMEZCUTNSRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1IwRkJSeXhEUVVGRExFdEJRVXNzUTBGQlF5eHRRa0ZCYlVJc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEV0QlFVczdRVUZEY2tRc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4RFFVRkRMR1ZCUVdVc1EwRkJReXhIUVVGSExFTkJRVU1zUlVGQlJUdEJRVU55UXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1UwRkJVeXhEUVVGRExFTkJRVU03UVVGRE5VSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU03UVVGRE4wSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhsUVVGbExFTkJRVU1zUjBGQlJ5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRTFCUVUwN1FVRkRiRU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNN1FVRkRWQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEdOQlFXTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTTdRVUZEZEVNc1EwRkJReXhEUVVGRE8wRkJRMFlzUTBGQlF5eERRVUZETEdsQ1FVRnBRaXhEUVVGRExFZEJRVWNzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4TlFVRk5PenRCUVVWd1F5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFdEJRVXNzUTBGQlF5eExRVUZMTEVOQlFVTXNUMEZCVHl4RFFVRkRMRVZCUVVVc1EwRkJReXhMUVVGTExFTkJRVU1zUjBGQlJ5eERRVUZETEVsQlFVa3NRMEZCUXl4VlFVRlZMRU5CUVVNc1NVRkJTVHRCUVVOb1JTeERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdRVUZEYWtRc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4WFFVRlhMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRek5ETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eHpRa0ZCYzBJN1FVRkRha01zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGRkJRVkVzUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRPMEZCUXpWRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOU0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhsUVVGbE8wRkJRekZDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFJRVUZSTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJRenRCUVVONFF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFVpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTBvc1EwRkJReXhEUVVGRE8wRkJRMFk3TzBGQlJVRXNVVUZCVVN4RFFVRkRMRmxCUVZrc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXl4VlFVRlZMRU5CUVVNc1EwRkJReXhqUVVGakxFTkJRVU1zUTBGQlF6dEJRVU0zUkN4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zUTBGQlF5eHRRa0ZCYlVJc1EwRkJReXhIUVVGSExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTjBReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEcxQ1FVRnRRaXhEUVVGRExFZEJRVWNzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXp0QlFVTnNReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4VlFVRlZPMEZCUTJoQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFZEJRVWM3UVVGRGFrSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTXNTVUZCU1R0QlFVTnVRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4alFVRmpMRU5CUVVNc1EwRkJReXhqUVVGakxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTnNSQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEVEN4RFFVRkRMRU5CUVVNN1FVRkRSaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRXRCUVVzc1EwRkJReXhMUVVGTExFTkJRVU1zVDBGQlR5eERRVUZETEVWQlFVVXNRMEZCUXl4TFFVRkxMRU5CUVVNc1IwRkJSeXhEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNTVUZCU1R0QlFVTTFSQ3hEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU03UVVGRGFrUXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eFhRVUZYTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUXpORExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXh6UWtGQmMwSTdRVUZEYWtNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRmxCUVZrc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNc1ZVRkJWU3hEUVVGRExFTkJRVU1zWTBGQll6dEJRVU5xUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEVWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNaVUZCWlR0QlFVTXhRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1dVRkJXU3hEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF5eGpRVUZqTzBGQlF5OUVMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTlNMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFNpeERRVUZETEVOQlFVTTdRVUZEUmpzN1FVRkZRU3hEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNSVUZCUlN4RFFVRkRMRTFCUVUwc1EwRkJReXhOUVVGTkxFTkJRVU1zVFVGQlRTeERRVUZETEV0QlFVc3NRMEZCUXl4TlFVRk5MRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTzBGQlEzWkVMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eFJRVUZSTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhGUVVGRkxFTkJRVU1zU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4RlFVRkZMRU5CUVVNc1RVRkJUU3hEUVVGRExGRkJRVkVzUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhYUVVGWE8wRkJRMmhHTEZGQlFWRXNRMEZCUXl3NFFrRkJPRUlzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXp0QlFVTTVReXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkRMRU5CUVVNc2JVSkJRVzFDTEVOQlFVTXNSMEZCUnl4RFFVRkRMRWxCUVVrN1FVRkRhRVFzUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRk5CUVZNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkRPMEZCUXk5Q0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNZMEZCWXl4RFFVRkRMRk5CUVZNN1FVRkROVUlzUTBGQlF5eERRVUZETzBGQlEwWTdPMEZCUlVFc1RVRkJUU3hEUVVGRExGRkJRVkVzUTBGQlF5eHZRa0ZCYjBJc1EwRkJReXhaUVVGWkxFTkJRVU1zUTBGQlF6dEJRVU51UkN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEV0QlFVc3NRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1JVRkJSU3hEUVVGRExFZEJRVWNzUTBGQlF5eEZRVUZGTEVOQlFVTXNSVUZCUlN4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eFJRVUZSTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNN1FVRkRka1lzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVkQlFVY3NRMEZCUXl4TlFVRk5MRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVWQlFVVXNRMEZCUXl4SlFVRkpMRU5CUVVNc1JVRkJSU3hEUVVGRExGZEJRVmNzUTBGQlF5eFRRVUZUTEVOQlFVTXNSVUZCUlN4RFFVRkRMRkZCUVZFc1EwRkJReXhKUVVGSk96dEJRVVYyUml4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEV0QlFVc3NRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1JVRkJSU3hEUVVGRExFZEJRVWNzUTBGQlF5eEZRVUZGTEVOQlFVTXNSVUZCUlN4RFFVRkRMRWRCUVVjc1EwRkJReXhUUVVGVE8wRkJRMjVGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4SFFVRkhMRU5CUVVNc1RVRkJUU3hEUVVGRExFVkJRVVU3UVVGRGFrTXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEZsQlFWa3NRMEZCUXp0QlFVTXhRaXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVTBGQlV5eERRVUZETEVOQlFVTTdRVUZETVVJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUzBGQlN5eERRVUZETEVWQlFVVXNRMEZCUXl4RlFVRkZMRU5CUVVNc1VVRkJVU3hEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RlFVRkZMRU5CUVVNc1NVRkJTU3hEUVVGRExFVkJRVVVzUTBGQlF5eEhRVUZITEVOQlFVTXNSVUZCUlN4RFFVRkRMRWRCUVVjc1EwRkJReXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEZOQlFWTTdRVUZEYWtjc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFVkJRVVVzUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU1zVTBGQlV5eERRVUZETEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zU1VGQlNUdEJRVU0zUml4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhSUVVGUkxFTkJRVU1zU1VGQlNTeERRVUZETEV0QlFVc3NRMEZCUXl4SlFVRkpMRU5CUVVNc1MwRkJTeXhEUVVGRExFVkJRVVVzUTBGQlF5eEZRVUZGTEVOQlFVTXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhIUVVGSExFTkJRVU1zVTBGQlV6dEJRVU5zUnl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTJwQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNXVUZCV1N4RFFVRkRMRGhDUVVFNFFpeERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRM3BFTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJRenRCUVVNeFFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhoUVVGaExFTkJRVU1zUTBGQlF5eEpRVUZKTzBGQlEzcENMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRMRU5CUVVNc1VVRkJVU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNN1FVRkRjRU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc2JVSkJRVzFDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU55UkN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eHBRa0ZCYVVJc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc2EwSkJRV3RDTEVOQlFVTXNRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEZGtVc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNiMEpCUVc5Q0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTXZRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwb3NRMEZCUXl4RFFVRkRPenRCUVVWR0xFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1ZVRkJWU3hEUVVGRExFTkJRVU03UVVGRGRrSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEZGQlFWRXNRMEZCUXl4RlFVRkZMRU5CUVVNc1IwRkJSeXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4RlFVRkZMRU5CUVVNc1IwRkJSeXhEUVVGRExFVkJRVVVzUTBGQlF5eEhRVUZITEVOQlFVTXNSVUZCUlN4RFFVRkRMRWRCUVVjc1EwRkJRenRCUVVONFJTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eFJRVUZSTEVOQlFVTXNWMEZCVnl4RFFVRkRMRWRCUVVjc1EwRkJReXhWUVVGVkxFTkJRVU1zVVVGQlVTeERRVUZETEVkQlFVY3NRMEZCUXl4SlFVRkpPMEZCUXk5RUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFdEJRVXNzUTBGQlF5eExRVUZMTEVOQlFVTXNSMEZCUnl4RFFVRkRPMEZCUTJoRUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU03UVVGRGJrSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFRRVUZUTEVOQlFVTXNSMEZCUnl4RFFVRkRMRTlCUVU4c1EwRkJReXhIUVVGSExFTkJRVU1zUzBGQlN5eERRVUZETEZGQlFWRXNRMEZCUXl4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zT0VKQlFUaENMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5vUnl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1QwRkJUeXhEUVVGRExFVkJRVVVzUTBGQlF5eEhRVUZITEVOQlFVTXNWVUZCVlN4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVkQlFVY3NRMEZCUXl4SlFVRkpMRU5CUVVNc1JVRkJSU3hEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETzBGQlF6ZEZMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFNpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTBvc1EwRkJReXhEUVVGRE96dEJRVVZHTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhGUVVGRkxFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTXNRMEZCUXl4VFFVRlRMRU5CUVVNc1JVRkJSU3hEUVVGRExHVkJRV1U3UVVGRE4wUXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhUUVVGVExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXp0QlFVTjZRaXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRMRU5CUVVNc1VVRkJVU3hEUVVGRExFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTTdRVUZEY0VNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhUUVVGVExFTkJRVU1zUzBGQlN5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRk5CUVZNN1FVRkRPVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNN1FVRkRVQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1VVRkJVU3hEUVVGRExHVkJRV1VzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1VVRkJVU3hEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU4wUkN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNVVUZCVVN4RFFVRkRMR2xDUVVGcFFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhSUVVGUk8wRkJRM0pFTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMDRzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEU5QlFVOHNRMEZCUXl4UlFVRlJMRU5CUVVNc1MwRkJTeXhEUVVGRExFOUJRVTg3UVVGRE5VTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zYlVKQlFXMUNMRU5CUVVNc1IwRkJSeXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEZGQlFWRTdRVUZETVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5LTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRE8wRkJRMWdzUTBGQlF5eERRVUZET3p0QlFVVkdMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNSMEZCUnl4RFFVRkRMRWxCUVVrc1EwRkJReXhIUVVGSExFTkJRVU1zUjBGQlJ5eERRVUZETEU5QlFVOHNRMEZCUXl4UlFVRlJMRU5CUVVNc1MwRkJTenRCUVVNdlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFVkJRVVVzUTBGQlF5eE5RVUZOTEVOQlFVTXNSVUZCUlN4RFFVRkRMRkZCUVZFc1EwRkJReXhIUVVGSExFTkJRVU1zVDBGQlR5eERRVUZETEVsQlFVa3NRMEZCUXl4WFFVRlhPMEZCUXpWRUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eEhRVUZITEVOQlFVTXNVVUZCVVN4RFFVRkRMRXRCUVVzc1EwRkJReXhOUVVGTkxFTkJRVU03UVVGRE9VTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhUUVVGVExFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTXNVVUZCVVN4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZETTBNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTTdRVUZEVUN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNVVUZCVVN4RFFVRkRMR1ZCUVdVc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNVVUZCVVN4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOMFJDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zVVVGQlVTeERRVUZETEdsQ1FVRnBRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UlFVRlJPMEZCUTNKRUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTA0c1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFOUJRVThzUTBGQlF5eFJRVUZSTEVOQlFVTXNTMEZCU3l4RFFVRkRMRTlCUVU4N1FVRkROVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc2JVSkJRVzFDTEVOQlFVTXNSMEZCUnl4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExGRkJRVkU3UVVGRE1VTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOS0xFTkJRVU1zUTBGQlF5eERRVUZET3p0QlFVVklMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhGUVVGRkxFTkJRVU1zUzBGQlN5eERRVUZETEZOQlFWTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1MwRkJTenRCUVVOc1JDeERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRzlDUVVGdlFpeERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNN1FVRkRjRU1zUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4elFrRkJjMElzUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRzFDUVVGdFFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTNSRkxFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNiVUpCUVcxQ0xFTkJRVU1zUTBGQlF5eERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRPMEZCUXpORUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXh0UWtGQmJVSXNRMEZCUXl4RFFVRkRPMEZCUXpsQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eEZRVUZGTEVOQlFVTXNSMEZCUnl4RFFVRkRMR0ZCUVdFc1EwRkJReXhUUVVGVExFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXl4RFFVRkRMRTlCUVU4c1EwRkJReXhGUVVGRkxFTkJRVU1zVDBGQlR6dEJRVU53UlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1VVRkJVU3hEUVVGRExHRkJRV0VzUTBGQlF5eFRRVUZUTEVOQlFVTXNVVUZCVVR0QlFVTjJSQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4WFFVRlhMRU5CUVVNc1RVRkJUU3hEUVVGRExFbEJRVWs3UVVGRE4wSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNXVUZCV1N4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdRVUZEYWtNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRmxCUVZrc1EwRkJReXhIUVVGSExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNVVUZCVVR0QlFVTjJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTk9MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFNpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXh6UWtGQmMwSXNRMEZCUXl4TFFVRkxMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zVTBGQlV6dEJRVU4yUkN4RFFVRkRMRU5CUVVNN1FVRkRSaXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEdsQ1FVRnBRaXhEUVVGRExFTkJRVU1zUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eHJRa0ZCYTBJc1EwRkJReXhEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETzBGQlF6ZEZMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRMRU5CUVVNc2JVSkJRVzFDTEVOQlFVTXNSMEZCUnl4RFFVRkRMRVZCUVVVN1FVRkRPVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4VFFVRlRMRU5CUVVNc1EwRkJRenRCUVVNdlFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhoUVVGaExFTkJRVU1zUjBGQlJ5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRTlCUVU4N08wRkJSWEpETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJRenRCUVVNelFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zVTBGQlV5eERRVUZETEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNN08wRkJSV2hETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4SlFVRkpMRU5CUVVNc1JVRkJSU3hEUVVGRExGTkJRVk1zUTBGQlF5eFBRVUZQTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhIUVVGSExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRTlCUVU4N1FVRkRjRVVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEV0QlFVc3NRMEZCUXl4RlFVRkZMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNUMEZCVHl4RFFVRkRMRXRCUVVzc1EwRkJReXhGUVVGRkxFTkJRVU1zUjBGQlJ5eERRVUZETEZGQlFWRXNRMEZCUXl4UFFVRlBPMEZCUXpkRkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zVjBGQlZ5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRVZCUVVVc1EwRkJReXhKUVVGSkxFTkJRVU1zUlVGQlJTeERRVUZETEUxQlFVMHNRMEZCUXl4UlFVRlJMRU5CUVVNc1IwRkJSenM3UVVGRmFrWXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdRVUZET1VJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhWUVVGVkxFTkJRVU03UVVGRGVrSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4VFFVRlRMRU5CUVVNc1lVRkJZU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMEZCUXpORExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVTBGQlV5eERRVUZETEdGQlFXRXNRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdRVUZEYmtRc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhaUVVGWkxFTkJRVU1zUjBGQlJ5eERRVUZETEVsQlFVazdPMEZCUlM5Q0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zVTBGQlV5eERRVUZETzBGQlEzaENMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1QwRkJUeXhEUVVGRExHRkJRV0VzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVDBGQlR5eERRVUZETEdGQlFXRXNRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03TzBGQlJUVkZMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRExGVkJRVlVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4VFFVRlRMRU5CUVVNc1EwRkJRenRCUVVOMFF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEVsQlFVazdRVUZETjBJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhaUVVGWkxFTkJRVU1zUjBGQlJ5eERRVUZETEVsQlFVazdRVUZETDBJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhYUVVGWExFTkJRVU1zVFVGQlRTeERRVUZETEVsQlFVazdRVUZEYWtNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZETzBGQlF6VkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVWQlFVVXNRMEZCUXl4UlFVRlJMRU5CUVVNc1NVRkJTVHRCUVVOd1F5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4SFFVRkhMRU5CUVVNc1QwRkJUeXhEUVVGRExFbEJRVWtzUTBGQlF5eEhRVUZITzBGQlEzSkVMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEZWQlFWVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZETzBGQlF6ZERMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVDBGQlR5eERRVUZETEVWQlFVVXNRMEZCUXl4UlFVRlJMRU5CUVVNc1NVRkJTVHRCUVVOeVF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZsQlFWa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1NVRkJTVHRCUVVOc1F5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRE8wRkJRM2hDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eEZRVUZGTEVOQlFVTXNUMEZCVHl4RFFVRkRMRVZCUVVVc1EwRkJReXhGUVVGRkxFTkJRVU1zVFVGQlRTeERRVUZETEV0QlFVczdRVUZETDBNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVjBGQlZ5eERRVUZETEVkQlFVY3NRMEZCUXl4SlFVRkpPMEZCUTJoRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXp0QlFVTnFRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eGhRVUZoTEVOQlFVTXNUVUZCVFN4RFFVRkRMRWxCUVVrN1FVRkRja01zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5XTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU1zVlVGQlZTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1UwRkJVeXhEUVVGRExFTkJRVU03UVVGRE9VTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF6dEJRVU40UWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNSVUZCUlN4RFFVRkRMRTlCUVU4c1EwRkJReXhGUVVGRkxFTkJRVU1zUlVGQlJTeERRVUZETEUxQlFVMHNRMEZCUXl4TFFVRkxPMEZCUXk5RExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZkQlFWY3NRMEZCUXl4SFFVRkhMRU5CUVVNc1NVRkJTVHRCUVVOb1F5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlExWXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlExSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXp0QlFVTmlMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4SlFVRkpPMEZCUXpOQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhaUVVGWkxFTkJRVU1zUjBGQlJ5eERRVUZETEVsQlFVazdRVUZETjBJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEVGl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE96dEJRVVZLTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4SFFVRkhMRU5CUVVNc1UwRkJVeXhEUVVGRExGRkJRVkVzUTBGQlF5eEpRVUZKTzBGQlF6bERMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEc5Q1FVRnZRaXhEUVVGRExFdEJRVXNzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4VFFVRlRPMEZCUTNKRUxFTkJRVU1zUTBGQlF6dEJRVU5HT3p0QlFVVkJMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRTlCUVU4c1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEZOQlFWTXNRMEZCUXl4VFFVRlRMRU5CUVVNc1IwRkJSeXhEUVVGRExFOUJRVThzUTBGQlF5eFRRVUZUTzBGQlEzaEZMRU5CUVVNc1EwRkJReXhEUVVGRExGVkJRVlVzUTBGQlF5eEhRVUZITEVOQlFVTXNSVUZCUlN4RFFVRkRMRTFCUVUwc1EwRkJReXhQUVVGUExFTkJRVU1zUjBGQlJ5eERRVUZETEVsQlFVa3NRMEZCUXl4TFFVRkxMRU5CUVVNc1IwRkJSeXhEUVVGRExFOUJRVThzUTBGQlF5eEZRVUZGTEVOQlFVTXNUMEZCVHp0QlFVTjZSU3hEUVVGRE8wRkJRMFFzUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRkZCUVZFc1EwRkJReXhGUVVGRkxFTkJRVU1zVVVGQlVTeERRVUZETEVWQlFVVXNRMEZCUXl4RlFVRkZMRU5CUVVNc1NVRkJTU3hEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEVOQlFVTXNVMEZCVXl4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEYmtVc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc2JVTkJRVzFETEVOQlFVTTdRVUZEYUVRc1EwRkJRenRCUVVORUxFTkJRVU1zUTBGQlF5eERRVUZETEZGQlFWRXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRM0JDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTjBReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExFTkJRVU1zWVVGQllTeERRVUZETEVOQlFVTTdRVUZEYkVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNUMEZCVHl4RFFVRkRMRk5CUVZNc1EwRkJReXhSUVVGUkxFTkJRVU1zVlVGQlZTeERRVUZETEVkQlFVY3NRMEZCUXl4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWs3UVVGRE4wVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhOUVVGTkxFTkJRVU1zUjBGQlJ5eERRVUZETEUxQlFVMHNRMEZCUXl4VlFVRlZMRU5CUVVNc1QwRkJUeXhEUVVGRE8wRkJRM1pGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RlFVRkZMRU5CUVVNc1RVRkJUU3hEUVVGRExFZEJRVWNzUTBGQlF5eE5RVUZOTEVOQlFVTXNTMEZCU3l4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zVVVGQlVUdEJRVU40UlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEV0QlFVc3NRMEZCUXl4SFFVRkhMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU55UXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF6dEJRVU4yUWl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOSUxFTkJRVU03UVVGRFJDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEZOQlFWTXNRMEZCUXl4UlFVRlJMRU5CUVVNc1IwRkJSeXhEUVVGRExGTkJRVk1zUTBGQlF5eEZRVUZGTEVOQlFVTXNSMEZCUnl4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU03UVVGREwwUXNRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSVHRCUVVOTUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxPMEZCUTFZc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNVVUZCVVN4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOcVF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4aFFVRmhMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RlFVRkZMRU5CUVVNc1MwRkJTeXhEUVVGRExGVkJRVlVzUTBGQlF5eE5RVUZOTEVOQlFVTXNVVUZCVVN4RFFVRkRMRU5CUVVNN1FVRkRla1VzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTktMRTFCUVUwc1EwRkJReXhSUVVGUkxFTkJRVU1zYlVOQlFXMURMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRM1JFTEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNN1FVRkRUaXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETzBGQlEwNHNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhsUVVGbExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEzaENMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU1zVlVGQlZTeERRVUZETEVOQlFVTXNZMEZCWXl4RFFVRkRMRU5CUVVNN1FVRkRNVVFzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEycERMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhGUVVGRkxFTkJRVU1zUlVGQlJTeERRVUZETEVkQlFVY3NRMEZCUXl4UFFVRlBMRU5CUVVNc1MwRkJTeXhEUVVGRExFbEJRVWtzUTBGQlF5eFZRVUZWTEVOQlFVTTdRVUZEY0VRc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFZEJRVWNzUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFZEJRVWNzUTBGQlF5eEZRVUZGTEVOQlFVTXNUVUZCVFN4RFFVRkRMRkZCUVZFc1EwRkJRenRCUVVNNVJDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNSMEZCUnl4RFFVRkRMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU1zUlVGQlJTeERRVUZETEVsQlFVa3NRMEZCUXl4RlFVRkZMRU5CUVVNc1NVRkJTU3hEUVVGRExFVkJRVVVzUTBGQlF5eGpRVUZqTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOc1JTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkRPMEZCUTNSQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNSVUZCUlN4RFFVRkRMRVZCUVVVc1EwRkJReXhIUVVGSExFTkJRVU1zVTBGQlV5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhKUVVGSkxFTkJRVU1zUlVGQlJTeERRVUZETEVkQlFVY3NRMEZCUXl4TlFVRk5MRU5CUVVNc1NVRkJTVHRCUVVOc1JTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4VFFVRlRMRU5CUVVNc1QwRkJUeXhEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEZWQlFWVXNRMEZCUXl4SlFVRkpMRU5CUVVNc1VVRkJVU3hEUVVGRE8wRkJRMmhGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTNCQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhqUVVGakxFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4alFVRmpMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZGQlFWRTdRVUZETlVRc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEVGl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1IwRkJSeXhEUVVGRExGTkJRVk1zUTBGQlF5eEhRVUZITEVOQlFVTXNSMEZCUnl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJRenRCUVVNM1JDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRVZCUVVVc1EwRkJReXhWUVVGVkxFTkJRVU1zUlVGQlJTeERRVUZETEV0QlFVc3NRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUlVGQlJTeERRVUZETEVWQlFVVXNRMEZCUXp0QlFVTXhSQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhSUVVGUkxFTkJRVU1zU1VGQlNTeERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFZEJRVWNzUTBGQlF5eFJRVUZSTEVOQlFVTXNTMEZCU3l4RFFVRkRMRTFCUVUwc1EwRkJReXhMUVVGTE8wRkJRM0pGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF6dEJRVU5VTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU03UVVGRGRFSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNVVUZCVVN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETzBGQlF5OUVMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTlNMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4WlFVRlpMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNc1kwRkJZenRCUVVNeFJDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOT0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJRenRCUVVOaUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJRenRCUVVOWUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eEZRVUZGTEVOQlFVTXNSVUZCUlN4RFFVRkRMRWRCUVVjc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4UFFVRlBMRU5CUVVNc1UwRkJVeXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETzBGQlEzcEVMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhGUVVGRkxFTkJRVU1zUjBGQlJ5eERRVUZETEVsQlFVa3NRMEZCUXl4RlFVRkZMRU5CUVVNc1QwRkJUeXhEUVVGRExFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNWVUZCVlR0QlFVTXpSQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUlVGQlJTeERRVUZETEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVWQlFVVXNRMEZCUXl4SFFVRkhMRU5CUVVNc1IwRkJSeXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhOUVVGTk8wRkJRek5GTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEVOQlFVTXNaVUZCWlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExHTkJRV01zUTBGQlF5eERRVUZETzBGQlF6bERMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4bFFVRmxMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRekZDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5dzRRa0ZCT0VJc1EwRkJReXhUUVVGVE8wRkJRMmhFTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMDRzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTktMRU5CUVVNc1EwRkJRenRCUVVOR096dEJRVVZCTEZGQlFWRXNRMEZCUXl4eFFrRkJjVUlzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXp0QlFVTnlReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRE8wRkJRM1pDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTnlRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTlCUVU4N1FVRkRha01zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF6dEJRVU5zUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExGTkJRVk1zUTBGQlF5eG5Ra0ZCWjBJc1EwRkJReXhEUVVGRE8wRkJRemRETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFdEJRVXM3UVVGRGVFSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNN1FVRkRha0lzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMUlzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXh0UWtGQmJVSXNRMEZCUXl4SlFVRkpMRU5CUVVNc1UwRkJVenRCUVVOc1JTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNVVUZCVVN4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1YwRkJWeXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU5zUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eExRVUZMTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTE8wRkJRM0JETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRPMEZCUTJwQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenM3UVVGRlVpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRk5CUVZNc1EwRkJReXhUUVVGVExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1UwRkJVeXhEUVVGRExFTkJRVU03UVVGRE0wUXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTXNRMEZCUXl4VlFVRlZPMEZCUTJoRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETzBGQlEycENMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTlNMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVDBGQlR6dEJRVU4yUWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFdEJRVXNzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRMRTlCUVU4c1EwRkJReXhSUVVGUkxFTkJRVU1zU1VGQlNTeERRVUZETEV0QlFVc3NRMEZCUXl4VFFVRlRPMEZCUTJ4RkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTA0c1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFdEJRVXNzUTBGQlF5eFRRVUZUTEVOQlFVTXNSMEZCUnl4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eEpRVUZKTEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhUUVVGVE8wRkJRMmhGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRPMEZCUTNKRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTVHRCUVVNelJDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTBvc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMjVDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF6dEJRVU40UWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1YwRkJWeXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU12UXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXh6UWtGQmMwSTdRVUZEY2tNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zWlVGQlpUdEJRVU01UWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFZRVUZWTEVOQlFVTXNTMEZCU3l4RFFVRkRMRlZCUVZVN1FVRkRNVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRPMEZCUTI1Q0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVDBGQlR6dEJRVU5xUWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU03UVVGRGJrSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlExSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFRpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU03UVVGRFlpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTBvc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXp0QlFVTmlMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXp0QlFVTmlMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFNpeERRVUZETEVOQlFVTTdRVUZEUmpzN1FVRkZRU3hSUVVGUkxFTkJRVU1zYlVKQlFXMUNMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU03UVVGRGJrTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU1zWVVGQllTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRE8wRkJRMjVETEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUjBGQlJ5eERRVUZETEVWQlFVVXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRenRCUVVNeFFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU1zY1VKQlFYRkNMRU5CUVVNc1NVRkJTU3hEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNN1FVRkRiRVFzUTBGQlF5eERRVUZETzBGQlEwWXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJRenRCUVVOVU96dEJRVVZCTEZGQlFWRXNRMEZCUXl4aFFVRmhMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU03UVVGRE5VSXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJRenRCUVVOVUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRk5CUVZNc1EwRkJReXhSUVVGUkxFTkJRVU1zU1VGQlNTeERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGREwwUXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eFhRVUZYTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRmRCUVZjc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZOQlFWTTdRVUZEYUVVc1EwRkJReXhEUVVGRE8wRkJRMFk3TzBGQlJVRXNRMEZCUXl4RFFVRkRPMEZCUTBZc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETzBGQlExWXNRMEZCUXl4RFFVRkRPenRCUVVWR0xFMUJRVTBzUTBGQlF5eFJRVUZSTEVOQlFVTXNZVUZCWVN4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRE8wRkJRM2hETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhSUVVGUkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNVVUZCVVN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZPMEZCUTNwRU96dEJRVVZCTEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhKUVVGSkxFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1IwRkJSeXhEUVVGRExFMUJRVTBzUTBGQlF5eExRVUZMTEVOQlFVTXNUMEZCVHl4RFFVRkRMRTlCUVU4c1EwRkJReXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4SFFVRkhMRU5CUVVNc1QwRkJUeXhEUVVGRExGbEJRVmtzUTBGQlF5eEZRVUZGTEVOQlFVTTdRVUZETTBjc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4RlFVRkZMRU5CUVVNc1VVRkJVU3hEUVVGRExGVkJRVlVzUTBGQlF5eEhRVUZITEVOQlFVTXNVVUZCVVN4RFFVRkRMRVZCUVVVc1EwRkJReXhIUVVGSExFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXp0QlFVTjBSU3hOUVVGTkxFTkJRVU1zVVVGQlVTeERRVUZETERoQ1FVRTRRaXhEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETEdGQlFXRXNRMEZCUXl4RFFVRkRPMEZCUTNoRkxFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1IwRkJSeXhEUVVGRExFVkJRVVVzUTBGQlF5eGhRVUZoTEVOQlFVTXNRMEZCUXp0QlFVTnVReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVNNVFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhYUVVGWExFTkJRVU1zUTBGQlF5eERRVUZETEdGQlFXRXNRMEZCUXl4SFFVRkhPMEZCUTNwRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc2NVSkJRWEZDTEVOQlFVTXNWMEZCVnl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVNMVF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhSUVVGUkxFTkJRVU1zUlVGQlJTeERRVUZETEV0QlFVc3NRMEZCUXl4SFFVRkhMRU5CUVVNc1UwRkJVeXhEUVVGRExFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTXNUMEZCVHl4RFFVRkRPMEZCUXpGRkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRk5CUVZNc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhIUVVGSExFTkJRVU1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1MwRkJTeXhEUVVGRExFMUJRVTBzUTBGQlF6dEJRVU16Uml4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1VVRkJVU3hEUVVGRExGRkJRVkVzUTBGQlF5eEhRVUZITEVOQlFVTXNSVUZCUlN4RFFVRkRMRkZCUVZFc1EwRkJReXhMUVVGTExFTkJRVU1zUlVGQlJTeERRVUZETEVkQlFVY3NRMEZCUXl4UlFVRlJMRU5CUVVNc1MwRkJTeXhEUVVGRExFZEJRVWNzUTBGQlF5eEpRVUZKTEVOQlFVTXNVMEZCVXp0QlFVTTNSaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zU1VGQlNTeERRVUZETEVWQlFVVXNRMEZCUXl4SlFVRkpMRU5CUVVNc1JVRkJSU3hEUVVGRExFZEJRVWNzUTBGQlF5eEpRVUZKTEVOQlFVTXNSMEZCUnl4RFFVRkRMRWxCUVVrc1EwRkJReXhIUVVGSExFTkJRVU1zU1VGQlNUdEJRVU4wUkN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFJRVUZSTEVOQlFVTXNWMEZCVnl4RFFVRkRMRU5CUVVNc1VVRkJVU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ6dEJRVU4yUkN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc2JVSkJRVzFDTEVOQlFVTXNWMEZCVnl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOcVJDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNUVUZCVFN4RFFVRkRMRVZCUVVVc1EwRkJReXhYUVVGWExFTkJRVU1zUTBGQlF6dEJRVU40UXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNVVUZCVVR0QlFVTm9RaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGZEJRVmNzUTBGQlF5eE5RVUZOTEVOQlFVTTdRVUZETjBJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMDdRVUZEY0VRc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTFJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEVGl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMG9zUTBGQlF5eERRVUZETzBGQlEwWTdPMEZCUlVFc1VVRkJVU3hEUVVGRExGRkJRVkVzUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJRenRCUVVNM1FpeERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRPMEZCUTA0c1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVObUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNXVUZCV1N4RFFVRkRMRTFCUVUwN1FVRkRka0lzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRExGVkJRVlVzUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4TFFVRkxPMEZCUTJwRExFTkJRVU1zUTBGQlF6dEJRVU5HT3p0QlFVVkJMRXRCUVVzc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEWml4TlFVRk5MRU5CUVVNc2JVTkJRVzFETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEY2tRc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eEpRVUZKTEVOQlFVTXNSVUZCUlR0QlFVTm1PMEZCUTBFc1MwRkJTeXhEUVVGRExHRkJRV0VzUTBGQlF5eERRVUZETEVOQlFVTXNVVUZCVVN4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTXpReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eFBRVUZQTEVOQlFVTXNSMEZCUnl4RFFVRkRMRXRCUVVzc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eERRVUZETzBGQlF6ZEVMRU5CUVVNc1EwRkJReXh0UWtGQmJVSXNRMEZCUXp0QlFVTjBRaXhEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGT3p0QlFVVk1MRTFCUVUwc1EwRkJReXhSUVVGUkxFTkJRVU1zZFVOQlFYVkRPMEZCUTNaRUxFTkJRVU1zUTBGQlF5eEZRVUZGTzBGQlEwb3NRMEZCUXl4RFFVRkRMRmRCUVZjN1FVRkRZaXhEUVVGRExFTkJRVU1zVjBGQlZ6dEJRVU5pTEVOQlFVTXNRMEZCUXp0QlFVTkdMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zWTBGQll5eERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc0swSkJRU3RDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVNNVJTeERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRPMEZCUTB3c1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eHBRa0ZCYVVJN1FVRkRja0lzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1kwRkJZenRCUVVOd1FpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhYUVVGWE8wRkJRMnBDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFVkJRVVVzUTBGQlF5eFhRVUZYTzBGQlEycERMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRWaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwb3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNSMEZCUnl4RFFVRkRMRWxCUVVrc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNUMEZCVHl4RFFVRkRPMEZCUTI1RUxFTkJRVU1zUTBGQlF6dEJRVU5HTEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNN1FVRkRUQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEdsQ1FVRnBRanRCUVVOeVFpeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhqUVVGak8wRkJRM0JDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGZEJRVmM3UVVGRGFrSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUlVGQlJTeERRVUZETEZkQlFWYzdRVUZEYWtNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOV0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEU2l4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4SFFVRkhMRU5CUVVNc1NVRkJTU3hEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4TlFVRk5MRU5CUVVNN1FVRkRMME1zUTBGQlF5eERRVUZET3p0QlFVVkdMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zVlVGQlZTeERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTnVRaXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEd0RFFVRnJReXhEUVVGRExFTkJRVU1zUTBGQlF5eHBRa0ZCYVVJN1FVRkRPVVFzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4alFVRmpPMEZCUTJ4Q0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNWMEZCVnp0QlFVTm1MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU53UWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFZRVUZWTEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTI1Q0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExIRkNRVUZ4UWl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETzBGQlF5OURMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRzFDUVVGdFFpeERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRE8wRkJRemRETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eFhRVUZYTEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFhRVUZYTEVOQlFVTXNSMEZCUnp0QlFVTnFSQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEVEN4RFFVRkRMRU5CUVVNN1FVRkRSaXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExHdERRVUZyUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdRVUZEYWtVc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eGhRVUZoTEVOQlFVTTdRVUZEYkVJc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTTdRVUZEVkN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4SFFVRkhMRU5CUVVNc1NVRkJTU3hEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMR3REUVVGclF5eERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1JVRkJSU3hEUVVGRExGbEJRVmtzUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRWxCUVVrc1EwRkJReXhGUVVGRkxFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1IwRkJSeXhEUVVGRExFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRXRCUVVzc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEZGQlFWRXNRMEZCUXl4TlFVRk5MRU5CUVVNc1MwRkJTeXhEUVVGRExGVkJRVlVzUTBGQlF5eFZRVUZWTEVOQlFVTXNUMEZCVHp0QlFVTTFUaXhEUVVGRExFTkJRVU03UVVGRFJqczdRVUZGUVN4UlFVRlJMRU5CUVVNc2FVSkJRV2xDTEVOQlFVTXNZMEZCWXl4RFFVRkRMRU5CUVVNc1lVRkJZU3hEUVVGRExFTkJRVU1zVTBGQlV5eERRVUZETEVOQlFVTTdRVUZEY2tVc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4SFFVRkhMRU5CUVVNc1JVRkJSU3hEUVVGRExHRkJRV0VzUTBGQlF5eERRVUZETzBGQlEyNURMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFZRVUZWTEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUXpsQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1kwRkJZeXhEUVVGRExGRkJRVkVzUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTNSRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEhkQ1FVRjNRaXhEUVVGRExHRkJRV0VzUTBGQlF5eERRVUZETEVkQlFVYzdRVUZEYmtVc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJRenRCUVVOcVF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU1zVTBGQlV5eERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRMR0ZCUVdFc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRPMEZCUTNCRUxFTkJRVU1zUTBGQlF6dEJRVU5HTEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNN1FVRkRWRHM3UVVGRlFTeERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1NVRkJTU3hEUVVGRExFOUJRVThzUTBGQlF5eFBRVUZQTEVOQlFVTXNUVUZCVFN4RFFVRkRMRVZCUVVVc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVkQlFVY3NRMEZCUXl4SlFVRkpMRU5CUVVNc1VVRkJVU3hEUVVGRExFVkJRVVVzUTBGQlF5eEZRVUZGTEVOQlFVTTdRVUZETVVVc1EwRkJReXhEUVVGRExFTkJRVU1zVDBGQlR5eERRVUZETEUxQlFVMHNRMEZCUXl4RlFVRkZMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1IwRkJSeXhEUVVGRExFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRXRCUVVzN1FVRkRka1VzVFVGQlRTeERRVUZETEV0QlFVc3NRMEZCUXl4WlFVRlpMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eHRRa0ZCYlVJc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRPenRCUVVWMlJ5eERRVUZETEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1UwRkJVeXhEUVVGRExHRkJRV0VzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1RVRkJUU3hEUVVGRExFdEJRVXM3UVVGRGVFUXNUVUZCVFN4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRExFTkJRVU1zYjBKQlFXOUNMRU5CUVVNN0luMD0=",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 113132
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 11,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.365Z",
        "time": 15,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=0bb69d73",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/main.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [
            {
              "name": "v",
              "value": "0bb69d73"
            }
          ],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "max-age=31536000,immutable"
            },
            {
              "name": "etag",
              "value": "W/\"301d-LJsdiY9wVTpWDQrnnS7jr8JPCEQ\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "12317"
            }
          ],
          "content": {
            "size": 12317,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsKICByZXF1aXJlX3JlYWN0Cn0gZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL2NodW5rLVFKWUtVS0FMLmpzP3Y9MGJiNjlkNzMiOwppbXBvcnQgewogIF9fY29tbW9uSlMKfSBmcm9tICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvY2h1bmstNE1CTVJJTEEuanM/dj0wYmI2OWQ3MyI7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QvY2pzL3JlYWN0LWpzeC1kZXYtcnVudGltZS5kZXZlbG9wbWVudC5qcwp2YXIgcmVxdWlyZV9yZWFjdF9qc3hfZGV2X3J1bnRpbWVfZGV2ZWxvcG1lbnQgPSBfX2NvbW1vbkpTKHsKICAiLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0L2Nqcy9yZWFjdC1qc3gtZGV2LXJ1bnRpbWUuZGV2ZWxvcG1lbnQuanMiKGV4cG9ydHMpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIChmdW5jdGlvbigpIHsKICAgICAgZnVuY3Rpb24gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUpIHsKICAgICAgICBpZiAobnVsbCA9PSB0eXBlKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHR5cGUpCiAgICAgICAgICByZXR1cm4gdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfQ0xJRU5UX1JFRkVSRU5DRSA/IG51bGwgOiB0eXBlLmRpc3BsYXlOYW1lIHx8IHR5cGUubmFtZSB8fCBudWxsOwogICAgICAgIGlmICgic3RyaW5nIiA9PT0gdHlwZW9mIHR5cGUpIHJldHVybiB0eXBlOwogICAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgY2FzZSBSRUFDVF9GUkFHTUVOVF9UWVBFOgogICAgICAgICAgICByZXR1cm4gIkZyYWdtZW50IjsKICAgICAgICAgIGNhc2UgUkVBQ1RfUFJPRklMRVJfVFlQRToKICAgICAgICAgICAgcmV0dXJuICJQcm9maWxlciI7CiAgICAgICAgICBjYXNlIFJFQUNUX1NUUklDVF9NT0RFX1RZUEU6CiAgICAgICAgICAgIHJldHVybiAiU3RyaWN0TW9kZSI7CiAgICAgICAgICBjYXNlIFJFQUNUX1NVU1BFTlNFX1RZUEU6CiAgICAgICAgICAgIHJldHVybiAiU3VzcGVuc2UiOwogICAgICAgICAgY2FzZSBSRUFDVF9TVVNQRU5TRV9MSVNUX1RZUEU6CiAgICAgICAgICAgIHJldHVybiAiU3VzcGVuc2VMaXN0IjsKICAgICAgICAgIGNhc2UgUkVBQ1RfQUNUSVZJVFlfVFlQRToKICAgICAgICAgICAgcmV0dXJuICJBY3Rpdml0eSI7CiAgICAgICAgfQogICAgICAgIGlmICgib2JqZWN0IiA9PT0gdHlwZW9mIHR5cGUpCiAgICAgICAgICBzd2l0Y2ggKCJudW1iZXIiID09PSB0eXBlb2YgdHlwZS50YWcgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIlJlY2VpdmVkIGFuIHVuZXhwZWN0ZWQgb2JqZWN0IGluIGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSgpLiBUaGlzIGlzIGxpa2VseSBhIGJ1ZyBpbiBSZWFjdC4gUGxlYXNlIGZpbGUgYW4gaXNzdWUuIgogICAgICAgICAgKSwgdHlwZS4kJHR5cGVvZikgewogICAgICAgICAgICBjYXNlIFJFQUNUX1BPUlRBTF9UWVBFOgogICAgICAgICAgICAgIHJldHVybiAiUG9ydGFsIjsKICAgICAgICAgICAgY2FzZSBSRUFDVF9DT05URVhUX1RZUEU6CiAgICAgICAgICAgICAgcmV0dXJuICh0eXBlLmRpc3BsYXlOYW1lIHx8ICJDb250ZXh0IikgKyAiLlByb3ZpZGVyIjsKICAgICAgICAgICAgY2FzZSBSRUFDVF9DT05TVU1FUl9UWVBFOgogICAgICAgICAgICAgIHJldHVybiAodHlwZS5fY29udGV4dC5kaXNwbGF5TmFtZSB8fCAiQ29udGV4dCIpICsgIi5Db25zdW1lciI7CiAgICAgICAgICAgIGNhc2UgUkVBQ1RfRk9SV0FSRF9SRUZfVFlQRToKICAgICAgICAgICAgICB2YXIgaW5uZXJUeXBlID0gdHlwZS5yZW5kZXI7CiAgICAgICAgICAgICAgdHlwZSA9IHR5cGUuZGlzcGxheU5hbWU7CiAgICAgICAgICAgICAgdHlwZSB8fCAodHlwZSA9IGlubmVyVHlwZS5kaXNwbGF5TmFtZSB8fCBpbm5lclR5cGUubmFtZSB8fCAiIiwgdHlwZSA9ICIiICE9PSB0eXBlID8gIkZvcndhcmRSZWYoIiArIHR5cGUgKyAiKSIgOiAiRm9yd2FyZFJlZiIpOwogICAgICAgICAgICAgIHJldHVybiB0eXBlOwogICAgICAgICAgICBjYXNlIFJFQUNUX01FTU9fVFlQRToKICAgICAgICAgICAgICByZXR1cm4gaW5uZXJUeXBlID0gdHlwZS5kaXNwbGF5TmFtZSB8fCBudWxsLCBudWxsICE9PSBpbm5lclR5cGUgPyBpbm5lclR5cGUgOiBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodHlwZS50eXBlKSB8fCAiTWVtbyI7CiAgICAgICAgICAgIGNhc2UgUkVBQ1RfTEFaWV9UWVBFOgogICAgICAgICAgICAgIGlubmVyVHlwZSA9IHR5cGUuX3BheWxvYWQ7CiAgICAgICAgICAgICAgdHlwZSA9IHR5cGUuX2luaXQ7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodHlwZShpbm5lclR5cGUpKTsKICAgICAgICAgICAgICB9IGNhdGNoICh4KSB7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHRlc3RTdHJpbmdDb2VyY2lvbih2YWx1ZSkgewogICAgICAgIHJldHVybiAiIiArIHZhbHVlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNoZWNrS2V5U3RyaW5nQ29lcmNpb24odmFsdWUpIHsKICAgICAgICB0cnkgewogICAgICAgICAgdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKTsKICAgICAgICAgIHZhciBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSBmYWxzZTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSB0cnVlOwogICAgICAgIH0KICAgICAgICBpZiAoSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0KSB7CiAgICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSBjb25zb2xlOwogICAgICAgICAgdmFyIEpTQ29tcGlsZXJfdGVtcF9jb25zdCA9IEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdC5lcnJvcjsKICAgICAgICAgIHZhciBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQkanNjb21wJDAgPSAiZnVuY3Rpb24iID09PSB0eXBlb2YgU3ltYm9sICYmIFN5bWJvbC50b1N0cmluZ1RhZyAmJiB2YWx1ZVtTeW1ib2wudG9TdHJpbmdUYWddIHx8IHZhbHVlLmNvbnN0cnVjdG9yLm5hbWUgfHwgIk9iamVjdCI7CiAgICAgICAgICBKU0NvbXBpbGVyX3RlbXBfY29uc3QuY2FsbCgKICAgICAgICAgICAgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0LAogICAgICAgICAgICAiVGhlIHByb3ZpZGVkIGtleSBpcyBhbiB1bnN1cHBvcnRlZCB0eXBlICVzLiBUaGlzIHZhbHVlIG11c3QgYmUgY29lcmNlZCB0byBhIHN0cmluZyBiZWZvcmUgdXNpbmcgaXQgaGVyZS4iLAogICAgICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQkanNjb21wJDAKICAgICAgICAgICk7CiAgICAgICAgICByZXR1cm4gdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0VGFza05hbWUodHlwZSkgewogICAgICAgIGlmICh0eXBlID09PSBSRUFDVF9GUkFHTUVOVF9UWVBFKSByZXR1cm4gIjw+IjsKICAgICAgICBpZiAoIm9iamVjdCIgPT09IHR5cGVvZiB0eXBlICYmIG51bGwgIT09IHR5cGUgJiYgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfTEFaWV9UWVBFKQogICAgICAgICAgcmV0dXJuICI8Li4uPiI7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUpOwogICAgICAgICAgcmV0dXJuIG5hbWUgPyAiPCIgKyBuYW1lICsgIj4iIDogIjwuLi4+IjsKICAgICAgICB9IGNhdGNoICh4KSB7CiAgICAgICAgICByZXR1cm4gIjwuLi4+IjsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0T3duZXIoKSB7CiAgICAgICAgdmFyIGRpc3BhdGNoZXIgPSBSZWFjdFNoYXJlZEludGVybmFscy5BOwogICAgICAgIHJldHVybiBudWxsID09PSBkaXNwYXRjaGVyID8gbnVsbCA6IGRpc3BhdGNoZXIuZ2V0T3duZXIoKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBVbmtub3duT3duZXIoKSB7CiAgICAgICAgcmV0dXJuIEVycm9yKCJyZWFjdC1zdGFjay10b3AtZnJhbWUiKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBoYXNWYWxpZEtleShjb25maWcpIHsKICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChjb25maWcsICJrZXkiKSkgewogICAgICAgICAgdmFyIGdldHRlciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoY29uZmlnLCAia2V5IikuZ2V0OwogICAgICAgICAgaWYgKGdldHRlciAmJiBnZXR0ZXIuaXNSZWFjdFdhcm5pbmcpIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gY29uZmlnLmtleTsKICAgICAgfQogICAgICBmdW5jdGlvbiBkZWZpbmVLZXlQcm9wV2FybmluZ0dldHRlcihwcm9wcywgZGlzcGxheU5hbWUpIHsKICAgICAgICBmdW5jdGlvbiB3YXJuQWJvdXRBY2Nlc3NpbmdLZXkoKSB7CiAgICAgICAgICBzcGVjaWFsUHJvcEtleVdhcm5pbmdTaG93biB8fCAoc3BlY2lhbFByb3BLZXlXYXJuaW5nU2hvd24gPSB0cnVlLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiJXM6IGBrZXlgIGlzIG5vdCBhIHByb3AuIFRyeWluZyB0byBhY2Nlc3MgaXQgd2lsbCByZXN1bHQgaW4gYHVuZGVmaW5lZGAgYmVpbmcgcmV0dXJuZWQuIElmIHlvdSBuZWVkIHRvIGFjY2VzcyB0aGUgc2FtZSB2YWx1ZSB3aXRoaW4gdGhlIGNoaWxkIGNvbXBvbmVudCwgeW91IHNob3VsZCBwYXNzIGl0IGFzIGEgZGlmZmVyZW50IHByb3AuIChodHRwczovL3JlYWN0LmRldi9saW5rL3NwZWNpYWwtcHJvcHMpIiwKICAgICAgICAgICAgZGlzcGxheU5hbWUKICAgICAgICAgICkpOwogICAgICAgIH0KICAgICAgICB3YXJuQWJvdXRBY2Nlc3NpbmdLZXkuaXNSZWFjdFdhcm5pbmcgPSB0cnVlOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm9wcywgImtleSIsIHsKICAgICAgICAgIGdldDogd2FybkFib3V0QWNjZXNzaW5nS2V5LAogICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZWxlbWVudFJlZkdldHRlcldpdGhEZXByZWNhdGlvbldhcm5pbmcoKSB7CiAgICAgICAgdmFyIGNvbXBvbmVudE5hbWUgPSBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodGhpcy50eXBlKTsKICAgICAgICBkaWRXYXJuQWJvdXRFbGVtZW50UmVmW2NvbXBvbmVudE5hbWVdIHx8IChkaWRXYXJuQWJvdXRFbGVtZW50UmVmW2NvbXBvbmVudE5hbWVdID0gdHJ1ZSwgY29uc29sZS5lcnJvcigKICAgICAgICAgICJBY2Nlc3NpbmcgZWxlbWVudC5yZWYgd2FzIHJlbW92ZWQgaW4gUmVhY3QgMTkuIHJlZiBpcyBub3cgYSByZWd1bGFyIHByb3AuIEl0IHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBKU1ggRWxlbWVudCB0eXBlIGluIGEgZnV0dXJlIHJlbGVhc2UuIgogICAgICAgICkpOwogICAgICAgIGNvbXBvbmVudE5hbWUgPSB0aGlzLnByb3BzLnJlZjsKICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBjb21wb25lbnROYW1lID8gY29tcG9uZW50TmFtZSA6IG51bGw7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gUmVhY3RFbGVtZW50KHR5cGUsIGtleSwgc2VsZiwgc291cmNlLCBvd25lciwgcHJvcHMsIGRlYnVnU3RhY2ssIGRlYnVnVGFzaykgewogICAgICAgIHNlbGYgPSBwcm9wcy5yZWY7CiAgICAgICAgdHlwZSA9IHsKICAgICAgICAgICQkdHlwZW9mOiBSRUFDVF9FTEVNRU5UX1RZUEUsCiAgICAgICAgICB0eXBlLAogICAgICAgICAga2V5LAogICAgICAgICAgcHJvcHMsCiAgICAgICAgICBfb3duZXI6IG93bmVyCiAgICAgICAgfTsKICAgICAgICBudWxsICE9PSAodm9pZCAwICE9PSBzZWxmID8gc2VsZiA6IG51bGwpID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsICJyZWYiLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgICAgIGdldDogZWxlbWVudFJlZkdldHRlcldpdGhEZXByZWNhdGlvbldhcm5pbmcKICAgICAgICB9KSA6IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCAicmVmIiwgeyBlbnVtZXJhYmxlOiBmYWxzZSwgdmFsdWU6IG51bGwgfSk7CiAgICAgICAgdHlwZS5fc3RvcmUgPSB7fTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZS5fc3RvcmUsICJ2YWxpZGF0ZWQiLCB7CiAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLAogICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICAgIHZhbHVlOiAwCiAgICAgICAgfSk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsICJfZGVidWdJbmZvIiwgewogICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSwKICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgICAgICB2YWx1ZTogbnVsbAogICAgICAgIH0pOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCAiX2RlYnVnU3RhY2siLCB7CiAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLAogICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICAgIHZhbHVlOiBkZWJ1Z1N0YWNrCiAgICAgICAgfSk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsICJfZGVidWdUYXNrIiwgewogICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSwKICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgICAgICB2YWx1ZTogZGVidWdUYXNrCiAgICAgICAgfSk7CiAgICAgICAgT2JqZWN0LmZyZWV6ZSAmJiAoT2JqZWN0LmZyZWV6ZSh0eXBlLnByb3BzKSwgT2JqZWN0LmZyZWV6ZSh0eXBlKSk7CiAgICAgICAgcmV0dXJuIHR5cGU7CiAgICAgIH0KICAgICAgZnVuY3Rpb24ganN4REVWSW1wbCh0eXBlLCBjb25maWcsIG1heWJlS2V5LCBpc1N0YXRpY0NoaWxkcmVuLCBzb3VyY2UsIHNlbGYsIGRlYnVnU3RhY2ssIGRlYnVnVGFzaykgewogICAgICAgIHZhciBjaGlsZHJlbiA9IGNvbmZpZy5jaGlsZHJlbjsKICAgICAgICBpZiAodm9pZCAwICE9PSBjaGlsZHJlbikKICAgICAgICAgIGlmIChpc1N0YXRpY0NoaWxkcmVuKQogICAgICAgICAgICBpZiAoaXNBcnJheUltcGwoY2hpbGRyZW4pKSB7CiAgICAgICAgICAgICAgZm9yIChpc1N0YXRpY0NoaWxkcmVuID0gMDsgaXNTdGF0aWNDaGlsZHJlbiA8IGNoaWxkcmVuLmxlbmd0aDsgaXNTdGF0aWNDaGlsZHJlbisrKQogICAgICAgICAgICAgICAgdmFsaWRhdGVDaGlsZEtleXMoY2hpbGRyZW5baXNTdGF0aWNDaGlsZHJlbl0pOwogICAgICAgICAgICAgIE9iamVjdC5mcmVlemUgJiYgT2JqZWN0LmZyZWV6ZShjaGlsZHJlbik7CiAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgICAiUmVhY3QuanN4OiBTdGF0aWMgY2hpbGRyZW4gc2hvdWxkIGFsd2F5cyBiZSBhbiBhcnJheS4gWW91IGFyZSBsaWtlbHkgZXhwbGljaXRseSBjYWxsaW5nIFJlYWN0LmpzeHMgb3IgUmVhY3QuanN4REVWLiBVc2UgdGhlIEJhYmVsIHRyYW5zZm9ybSBpbnN0ZWFkLiIKICAgICAgICAgICAgICApOwogICAgICAgICAgZWxzZSB2YWxpZGF0ZUNoaWxkS2V5cyhjaGlsZHJlbik7CiAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoY29uZmlnLCAia2V5IikpIHsKICAgICAgICAgIGNoaWxkcmVuID0gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUpOwogICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhjb25maWcpLmZpbHRlcihmdW5jdGlvbihrKSB7CiAgICAgICAgICAgIHJldHVybiAia2V5IiAhPT0gazsKICAgICAgICAgIH0pOwogICAgICAgICAgaXNTdGF0aWNDaGlsZHJlbiA9IDAgPCBrZXlzLmxlbmd0aCA/ICJ7a2V5OiBzb21lS2V5LCAiICsga2V5cy5qb2luKCI6IC4uLiwgIikgKyAiOiAuLi59IiA6ICJ7a2V5OiBzb21lS2V5fSI7CiAgICAgICAgICBkaWRXYXJuQWJvdXRLZXlTcHJlYWRbY2hpbGRyZW4gKyBpc1N0YXRpY0NoaWxkcmVuXSB8fCAoa2V5cyA9IDAgPCBrZXlzLmxlbmd0aCA/ICJ7IiArIGtleXMuam9pbigiOiAuLi4sICIpICsgIjogLi4ufSIgOiAie30iLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAnQSBwcm9wcyBvYmplY3QgY29udGFpbmluZyBhICJrZXkiIHByb3AgaXMgYmVpbmcgc3ByZWFkIGludG8gSlNYOlxuICBsZXQgcHJvcHMgPSAlcztcbiAgPCVzIHsuLi5wcm9wc30gLz5cblJlYWN0IGtleXMgbXVzdCBiZSBwYXNzZWQgZGlyZWN0bHkgdG8gSlNYIHdpdGhvdXQgdXNpbmcgc3ByZWFkOlxuICBsZXQgcHJvcHMgPSAlcztcbiAgPCVzIGtleT17c29tZUtleX0gey4uLnByb3BzfSAvPicsCiAgICAgICAgICAgIGlzU3RhdGljQ2hpbGRyZW4sCiAgICAgICAgICAgIGNoaWxkcmVuLAogICAgICAgICAgICBrZXlzLAogICAgICAgICAgICBjaGlsZHJlbgogICAgICAgICAgKSwgZGlkV2FybkFib3V0S2V5U3ByZWFkW2NoaWxkcmVuICsgaXNTdGF0aWNDaGlsZHJlbl0gPSB0cnVlKTsKICAgICAgICB9CiAgICAgICAgY2hpbGRyZW4gPSBudWxsOwogICAgICAgIHZvaWQgMCAhPT0gbWF5YmVLZXkgJiYgKGNoZWNrS2V5U3RyaW5nQ29lcmNpb24obWF5YmVLZXkpLCBjaGlsZHJlbiA9ICIiICsgbWF5YmVLZXkpOwogICAgICAgIGhhc1ZhbGlkS2V5KGNvbmZpZykgJiYgKGNoZWNrS2V5U3RyaW5nQ29lcmNpb24oY29uZmlnLmtleSksIGNoaWxkcmVuID0gIiIgKyBjb25maWcua2V5KTsKICAgICAgICBpZiAoImtleSIgaW4gY29uZmlnKSB7CiAgICAgICAgICBtYXliZUtleSA9IHt9OwogICAgICAgICAgZm9yICh2YXIgcHJvcE5hbWUgaW4gY29uZmlnKQogICAgICAgICAgICAia2V5IiAhPT0gcHJvcE5hbWUgJiYgKG1heWJlS2V5W3Byb3BOYW1lXSA9IGNvbmZpZ1twcm9wTmFtZV0pOwogICAgICAgIH0gZWxzZSBtYXliZUtleSA9IGNvbmZpZzsKICAgICAgICBjaGlsZHJlbiAmJiBkZWZpbmVLZXlQcm9wV2FybmluZ0dldHRlcigKICAgICAgICAgIG1heWJlS2V5LAogICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHR5cGUgPyB0eXBlLmRpc3BsYXlOYW1lIHx8IHR5cGUubmFtZSB8fCAiVW5rbm93biIgOiB0eXBlCiAgICAgICAgKTsKICAgICAgICByZXR1cm4gUmVhY3RFbGVtZW50KAogICAgICAgICAgdHlwZSwKICAgICAgICAgIGNoaWxkcmVuLAogICAgICAgICAgc2VsZiwKICAgICAgICAgIHNvdXJjZSwKICAgICAgICAgIGdldE93bmVyKCksCiAgICAgICAgICBtYXliZUtleSwKICAgICAgICAgIGRlYnVnU3RhY2ssCiAgICAgICAgICBkZWJ1Z1Rhc2sKICAgICAgICApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlQ2hpbGRLZXlzKG5vZGUpIHsKICAgICAgICAib2JqZWN0IiA9PT0gdHlwZW9mIG5vZGUgJiYgbnVsbCAhPT0gbm9kZSAmJiBub2RlLiQkdHlwZW9mID09PSBSRUFDVF9FTEVNRU5UX1RZUEUgJiYgbm9kZS5fc3RvcmUgJiYgKG5vZGUuX3N0b3JlLnZhbGlkYXRlZCA9IDEpOwogICAgICB9CiAgICAgIHZhciBSZWFjdCA9IHJlcXVpcmVfcmVhY3QoKSwgUkVBQ1RfRUxFTUVOVF9UWVBFID0gU3ltYm9sLmZvcigicmVhY3QudHJhbnNpdGlvbmFsLmVsZW1lbnQiKSwgUkVBQ1RfUE9SVEFMX1RZUEUgPSBTeW1ib2wuZm9yKCJyZWFjdC5wb3J0YWwiKSwgUkVBQ1RfRlJBR01FTlRfVFlQRSA9IFN5bWJvbC5mb3IoInJlYWN0LmZyYWdtZW50IiksIFJFQUNUX1NUUklDVF9NT0RFX1RZUEUgPSBTeW1ib2wuZm9yKCJyZWFjdC5zdHJpY3RfbW9kZSIpLCBSRUFDVF9QUk9GSUxFUl9UWVBFID0gU3ltYm9sLmZvcigicmVhY3QucHJvZmlsZXIiKTsKICAgICAgU3ltYm9sLmZvcigicmVhY3QucHJvdmlkZXIiKTsKICAgICAgdmFyIFJFQUNUX0NPTlNVTUVSX1RZUEUgPSBTeW1ib2wuZm9yKCJyZWFjdC5jb25zdW1lciIpLCBSRUFDVF9DT05URVhUX1RZUEUgPSBTeW1ib2wuZm9yKCJyZWFjdC5jb250ZXh0IiksIFJFQUNUX0ZPUldBUkRfUkVGX1RZUEUgPSBTeW1ib2wuZm9yKCJyZWFjdC5mb3J3YXJkX3JlZiIpLCBSRUFDVF9TVVNQRU5TRV9UWVBFID0gU3ltYm9sLmZvcigicmVhY3Quc3VzcGVuc2UiKSwgUkVBQ1RfU1VTUEVOU0VfTElTVF9UWVBFID0gU3ltYm9sLmZvcigicmVhY3Quc3VzcGVuc2VfbGlzdCIpLCBSRUFDVF9NRU1PX1RZUEUgPSBTeW1ib2wuZm9yKCJyZWFjdC5tZW1vIiksIFJFQUNUX0xBWllfVFlQRSA9IFN5bWJvbC5mb3IoInJlYWN0LmxhenkiKSwgUkVBQ1RfQUNUSVZJVFlfVFlQRSA9IFN5bWJvbC5mb3IoInJlYWN0LmFjdGl2aXR5IiksIFJFQUNUX0NMSUVOVF9SRUZFUkVOQ0UgPSBTeW1ib2wuZm9yKCJyZWFjdC5jbGllbnQucmVmZXJlbmNlIiksIFJlYWN0U2hhcmVkSW50ZXJuYWxzID0gUmVhY3QuX19DTElFTlRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfV0FSTl9VU0VSU19USEVZX0NBTk5PVF9VUEdSQURFLCBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksIGlzQXJyYXlJbXBsID0gQXJyYXkuaXNBcnJheSwgY3JlYXRlVGFzayA9IGNvbnNvbGUuY3JlYXRlVGFzayA/IGNvbnNvbGUuY3JlYXRlVGFzayA6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9OwogICAgICBSZWFjdCA9IHsKICAgICAgICByZWFjdF9zdGFja19ib3R0b21fZnJhbWU6IGZ1bmN0aW9uKGNhbGxTdGFja0ZvckVycm9yKSB7CiAgICAgICAgICByZXR1cm4gY2FsbFN0YWNrRm9yRXJyb3IoKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHZhciBzcGVjaWFsUHJvcEtleVdhcm5pbmdTaG93bjsKICAgICAgdmFyIGRpZFdhcm5BYm91dEVsZW1lbnRSZWYgPSB7fTsKICAgICAgdmFyIHVua25vd25Pd25lckRlYnVnU3RhY2sgPSBSZWFjdC5yZWFjdF9zdGFja19ib3R0b21fZnJhbWUuYmluZCgKICAgICAgICBSZWFjdCwKICAgICAgICBVbmtub3duT3duZXIKICAgICAgKSgpOwogICAgICB2YXIgdW5rbm93bk93bmVyRGVidWdUYXNrID0gY3JlYXRlVGFzayhnZXRUYXNrTmFtZShVbmtub3duT3duZXIpKTsKICAgICAgdmFyIGRpZFdhcm5BYm91dEtleVNwcmVhZCA9IHt9OwogICAgICBleHBvcnRzLkZyYWdtZW50ID0gUkVBQ1RfRlJBR01FTlRfVFlQRTsKICAgICAgZXhwb3J0cy5qc3hERVYgPSBmdW5jdGlvbih0eXBlLCBjb25maWcsIG1heWJlS2V5LCBpc1N0YXRpY0NoaWxkcmVuLCBzb3VyY2UsIHNlbGYpIHsKICAgICAgICB2YXIgdHJhY2tBY3R1YWxPd25lciA9IDFlNCA+IFJlYWN0U2hhcmVkSW50ZXJuYWxzLnJlY2VudGx5Q3JlYXRlZE93bmVyU3RhY2tzKys7CiAgICAgICAgcmV0dXJuIGpzeERFVkltcGwoCiAgICAgICAgICB0eXBlLAogICAgICAgICAgY29uZmlnLAogICAgICAgICAgbWF5YmVLZXksCiAgICAgICAgICBpc1N0YXRpY0NoaWxkcmVuLAogICAgICAgICAgc291cmNlLAogICAgICAgICAgc2VsZiwKICAgICAgICAgIHRyYWNrQWN0dWFsT3duZXIgPyBFcnJvcigicmVhY3Qtc3RhY2stdG9wLWZyYW1lIikgOiB1bmtub3duT3duZXJEZWJ1Z1N0YWNrLAogICAgICAgICAgdHJhY2tBY3R1YWxPd25lciA/IGNyZWF0ZVRhc2soZ2V0VGFza05hbWUodHlwZSkpIDogdW5rbm93bk93bmVyRGVidWdUYXNrCiAgICAgICAgKTsKICAgICAgfTsKICAgIH0pKCk7CiAgfQp9KTsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC9qc3gtZGV2LXJ1bnRpbWUuanMKdmFyIHJlcXVpcmVfanN4X2Rldl9ydW50aW1lID0gX19jb21tb25KUyh7CiAgIi4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC9qc3gtZGV2LXJ1bnRpbWUuanMiKGV4cG9ydHMsIG1vZHVsZSkgewogICAgaWYgKGZhbHNlKSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gbnVsbDsKICAgIH0gZWxzZSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZV9yZWFjdF9qc3hfZGV2X3J1bnRpbWVfZGV2ZWxvcG1lbnQoKTsKICAgIH0KICB9Cn0pOwpleHBvcnQgZGVmYXVsdCByZXF1aXJlX2pzeF9kZXZfcnVudGltZSgpOwovKiEgQnVuZGxlZCBsaWNlbnNlIGluZm9ybWF0aW9uOgoKcmVhY3QvY2pzL3JlYWN0LWpzeC1kZXYtcnVudGltZS5kZXZlbG9wbWVudC5qczoKICAoKioKICAgKiBAbGljZW5zZSBSZWFjdAogICAqIHJlYWN0LWpzeC1kZXYtcnVudGltZS5kZXZlbG9wbWVudC5qcwogICAqCiAgICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy4KICAgKgogICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZQogICAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4KICAgKikKKi8KLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhY3RfanN4LWRldi1ydW50aW1lLmpzLm1hcAo=",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 12317
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 15,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.366Z",
        "time": 14,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/node_modules/.vite/deps/react.js?v=0bb69d73",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/main.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [
            {
              "name": "v",
              "value": "0bb69d73"
            }
          ],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "max-age=31536000,immutable"
            },
            {
              "name": "etag",
              "value": "W/\"b9-RK7lkW7oHAuooYAXUMA8zD/acGg\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "1024"
            }
          ],
          "content": {
            "size": 1024,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsKICByZXF1aXJlX3JlYWN0Cn0gZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL2NodW5rLVFKWUtVS0FMLmpzP3Y9MGJiNjlkNzMiOwppbXBvcnQgIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9jaHVuay00TUJNUklMQS5qcz92PTBiYjY5ZDczIjsKZXhwb3J0IGRlZmF1bHQgcmVxdWlyZV9yZWFjdCgpOwoKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYkluSmxZV04wTG1welAzWTlNR0ppTmpsa056TWlYU3dpYzI5MWNtTmxjME52Ym5SbGJuUWlPbHNpYVcxd2IzSjBJSHRjYmlBZ2NtVnhkV2x5WlY5eVpXRmpkRnh1ZlNCbWNtOXRJRndpTDI1dlpHVmZiVzlrZFd4bGN5OHVkbWwwWlM5a1pYQnpMMk5vZFc1ckxWRktXVXRWUzBGTUxtcHpQM1k5TUdKaU5qbGtOek5jSWp0Y2JtbHRjRzl5ZENCY0lpOXViMlJsWDIxdlpIVnNaWE12TG5acGRHVXZaR1Z3Y3k5amFIVnVheTAwVFVKTlVrbE1RUzVxY3o5MlBUQmlZalk1WkRjelhDSTdYRzVsZUhCdmNuUWdaR1ZtWVhWc2RDQnlaWEYxYVhKbFgzSmxZV04wS0NrN1hHNGlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzVFVGQlRTeERRVUZETzBGQlExQXNRMEZCUXl4RFFVRkRPMEZCUTBZc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNXVUZCV1N4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eExRVUZMTEVOQlFVTXNVVUZCVVN4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU1zVVVGQlVTeERRVUZETzBGQlF6bEVMRTFCUVUwc1EwRkJReXhEUVVGRExFTkJRVU1zV1VGQldTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhMUVVGTExFTkJRVU1zVVVGQlVTeERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1VVRkJVU3hEUVVGRE8wRkJRemxFTEUxQlFVMHNRMEZCUXl4UFFVRlBMRU5CUVVNc1lVRkJZU3hEUVVGRExFTkJRVU03SW4wPQ==",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 1024
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 14,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.367Z",
        "time": 20,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/node_modules/.vite/deps/react-dom_client.js?v=0bb69d73",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/main.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [
            {
              "name": "v",
              "value": "0bb69d73"
            }
          ],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "max-age=31536000,immutable"
            },
            {
              "name": "etag",
              "value": "W/\"dc3ce-/GZgtEoQaLNxWljgg7Kxwu8/0GI\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "902094"
            }
          ],
          "content": {
            "size": 902094,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsKICByZXF1aXJlX3JlYWN0X2RvbQp9IGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9jaHVuay1NSDRNVzNPSy5qcz92PTBiYjY5ZDczIjsKaW1wb3J0IHsKICByZXF1aXJlX3JlYWN0Cn0gZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL2NodW5rLVFKWUtVS0FMLmpzP3Y9MGJiNjlkNzMiOwppbXBvcnQgewogIF9fY29tbW9uSlMKfSBmcm9tICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvY2h1bmstNE1CTVJJTEEuanM/dj0wYmI2OWQ3MyI7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvc2NoZWR1bGVyL2Nqcy9zY2hlZHVsZXIuZGV2ZWxvcG1lbnQuanMKdmFyIHJlcXVpcmVfc2NoZWR1bGVyX2RldmVsb3BtZW50ID0gX19jb21tb25KUyh7CiAgIi4uLy4uL25vZGVfbW9kdWxlcy9zY2hlZHVsZXIvY2pzL3NjaGVkdWxlci5kZXZlbG9wbWVudC5qcyIoZXhwb3J0cykgewogICAgInVzZSBzdHJpY3QiOwogICAgKGZ1bmN0aW9uKCkgewogICAgICBmdW5jdGlvbiBwZXJmb3JtV29ya1VudGlsRGVhZGxpbmUoKSB7CiAgICAgICAgbmVlZHNQYWludCA9IGZhbHNlOwogICAgICAgIGlmIChpc01lc3NhZ2VMb29wUnVubmluZykgewogICAgICAgICAgdmFyIGN1cnJlbnRUaW1lID0gZXhwb3J0cy51bnN0YWJsZV9ub3coKTsKICAgICAgICAgIHN0YXJ0VGltZSA9IGN1cnJlbnRUaW1lOwogICAgICAgICAgdmFyIGhhc01vcmVXb3JrID0gdHJ1ZTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGE6IHsKICAgICAgICAgICAgICBpc0hvc3RDYWxsYmFja1NjaGVkdWxlZCA9IGZhbHNlOwogICAgICAgICAgICAgIGlzSG9zdFRpbWVvdXRTY2hlZHVsZWQgJiYgKGlzSG9zdFRpbWVvdXRTY2hlZHVsZWQgPSBmYWxzZSwgbG9jYWxDbGVhclRpbWVvdXQodGFza1RpbWVvdXRJRCksIHRhc2tUaW1lb3V0SUQgPSAtMSk7CiAgICAgICAgICAgICAgaXNQZXJmb3JtaW5nV29yayA9IHRydWU7CiAgICAgICAgICAgICAgdmFyIHByZXZpb3VzUHJpb3JpdHlMZXZlbCA9IGN1cnJlbnRQcmlvcml0eUxldmVsOwogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBiOiB7CiAgICAgICAgICAgICAgICAgIGFkdmFuY2VUaW1lcnMoY3VycmVudFRpbWUpOwogICAgICAgICAgICAgICAgICBmb3IgKGN1cnJlbnRUYXNrID0gcGVlayh0YXNrUXVldWUpOyBudWxsICE9PSBjdXJyZW50VGFzayAmJiAhKGN1cnJlbnRUYXNrLmV4cGlyYXRpb25UaW1lID4gY3VycmVudFRpbWUgJiYgc2hvdWxkWWllbGRUb0hvc3QoKSk7ICkgewogICAgICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGN1cnJlbnRUYXNrLmNhbGxiYWNrOwogICAgICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09PSB0eXBlb2YgY2FsbGJhY2spIHsKICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUYXNrLmNhbGxiYWNrID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQcmlvcml0eUxldmVsID0gY3VycmVudFRhc2sucHJpb3JpdHlMZXZlbDsKICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250aW51YXRpb25DYWxsYmFjayA9IGNhbGxiYWNrKAogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFzay5leHBpcmF0aW9uVGltZSA8PSBjdXJyZW50VGltZQogICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lID0gZXhwb3J0cy51bnN0YWJsZV9ub3coKTsKICAgICAgICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09PSB0eXBlb2YgY29udGludWF0aW9uQ2FsbGJhY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFRhc2suY2FsbGJhY2sgPSBjb250aW51YXRpb25DYWxsYmFjazsKICAgICAgICAgICAgICAgICAgICAgICAgYWR2YW5jZVRpbWVycyhjdXJyZW50VGltZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGhhc01vcmVXb3JrID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgYjsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUYXNrID09PSBwZWVrKHRhc2tRdWV1ZSkgJiYgcG9wKHRhc2tRdWV1ZSk7CiAgICAgICAgICAgICAgICAgICAgICBhZHZhbmNlVGltZXJzKGN1cnJlbnRUaW1lKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgcG9wKHRhc2tRdWV1ZSk7CiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRhc2sgPSBwZWVrKHRhc2tRdWV1ZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGN1cnJlbnRUYXNrKSBoYXNNb3JlV29yayA9IHRydWU7CiAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHZhciBmaXJzdFRpbWVyID0gcGVlayh0aW1lclF1ZXVlKTsKICAgICAgICAgICAgICAgICAgICBudWxsICE9PSBmaXJzdFRpbWVyICYmIHJlcXVlc3RIb3N0VGltZW91dCgKICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZVRpbWVvdXQsCiAgICAgICAgICAgICAgICAgICAgICBmaXJzdFRpbWVyLnN0YXJ0VGltZSAtIGN1cnJlbnRUaW1lCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICBoYXNNb3JlV29yayA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICBjdXJyZW50VGFzayA9IG51bGwsIGN1cnJlbnRQcmlvcml0eUxldmVsID0gcHJldmlvdXNQcmlvcml0eUxldmVsLCBpc1BlcmZvcm1pbmdXb3JrID0gZmFsc2U7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGhhc01vcmVXb3JrID0gdm9pZCAwOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBoYXNNb3JlV29yayA/IHNjaGVkdWxlUGVyZm9ybVdvcmtVbnRpbERlYWRsaW5lKCkgOiBpc01lc3NhZ2VMb29wUnVubmluZyA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBwdXNoKGhlYXAsIG5vZGUpIHsKICAgICAgICB2YXIgaW5kZXggPSBoZWFwLmxlbmd0aDsKICAgICAgICBoZWFwLnB1c2gobm9kZSk7CiAgICAgICAgYTogZm9yICg7IDAgPCBpbmRleDsgKSB7CiAgICAgICAgICB2YXIgcGFyZW50SW5kZXggPSBpbmRleCAtIDEgPj4+IDEsIHBhcmVudCA9IGhlYXBbcGFyZW50SW5kZXhdOwogICAgICAgICAgaWYgKDAgPCBjb21wYXJlKHBhcmVudCwgbm9kZSkpCiAgICAgICAgICAgIGhlYXBbcGFyZW50SW5kZXhdID0gbm9kZSwgaGVhcFtpbmRleF0gPSBwYXJlbnQsIGluZGV4ID0gcGFyZW50SW5kZXg7CiAgICAgICAgICBlbHNlIGJyZWFrIGE7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIHBlZWsoaGVhcCkgewogICAgICAgIHJldHVybiAwID09PSBoZWFwLmxlbmd0aCA/IG51bGwgOiBoZWFwWzBdOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHBvcChoZWFwKSB7CiAgICAgICAgaWYgKDAgPT09IGhlYXAubGVuZ3RoKSByZXR1cm4gbnVsbDsKICAgICAgICB2YXIgZmlyc3QgPSBoZWFwWzBdLCBsYXN0ID0gaGVhcC5wb3AoKTsKICAgICAgICBpZiAobGFzdCAhPT0gZmlyc3QpIHsKICAgICAgICAgIGhlYXBbMF0gPSBsYXN0OwogICAgICAgICAgYTogZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGggPSBoZWFwLmxlbmd0aCwgaGFsZkxlbmd0aCA9IGxlbmd0aCA+Pj4gMTsgaW5kZXggPCBoYWxmTGVuZ3RoOyApIHsKICAgICAgICAgICAgdmFyIGxlZnRJbmRleCA9IDIgKiAoaW5kZXggKyAxKSAtIDEsIGxlZnQgPSBoZWFwW2xlZnRJbmRleF0sIHJpZ2h0SW5kZXggPSBsZWZ0SW5kZXggKyAxLCByaWdodCA9IGhlYXBbcmlnaHRJbmRleF07CiAgICAgICAgICAgIGlmICgwID4gY29tcGFyZShsZWZ0LCBsYXN0KSkKICAgICAgICAgICAgICByaWdodEluZGV4IDwgbGVuZ3RoICYmIDAgPiBjb21wYXJlKHJpZ2h0LCBsZWZ0KSA/IChoZWFwW2luZGV4XSA9IHJpZ2h0LCBoZWFwW3JpZ2h0SW5kZXhdID0gbGFzdCwgaW5kZXggPSByaWdodEluZGV4KSA6IChoZWFwW2luZGV4XSA9IGxlZnQsIGhlYXBbbGVmdEluZGV4XSA9IGxhc3QsIGluZGV4ID0gbGVmdEluZGV4KTsKICAgICAgICAgICAgZWxzZSBpZiAocmlnaHRJbmRleCA8IGxlbmd0aCAmJiAwID4gY29tcGFyZShyaWdodCwgbGFzdCkpCiAgICAgICAgICAgICAgaGVhcFtpbmRleF0gPSByaWdodCwgaGVhcFtyaWdodEluZGV4XSA9IGxhc3QsIGluZGV4ID0gcmlnaHRJbmRleDsKICAgICAgICAgICAgZWxzZSBicmVhayBhOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gZmlyc3Q7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY29tcGFyZShhLCBiKSB7CiAgICAgICAgdmFyIGRpZmYgPSBhLnNvcnRJbmRleCAtIGIuc29ydEluZGV4OwogICAgICAgIHJldHVybiAwICE9PSBkaWZmID8gZGlmZiA6IGEuaWQgLSBiLmlkOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGFkdmFuY2VUaW1lcnMoY3VycmVudFRpbWUpIHsKICAgICAgICBmb3IgKHZhciB0aW1lciA9IHBlZWsodGltZXJRdWV1ZSk7IG51bGwgIT09IHRpbWVyOyApIHsKICAgICAgICAgIGlmIChudWxsID09PSB0aW1lci5jYWxsYmFjaykgcG9wKHRpbWVyUXVldWUpOwogICAgICAgICAgZWxzZSBpZiAodGltZXIuc3RhcnRUaW1lIDw9IGN1cnJlbnRUaW1lKQogICAgICAgICAgICBwb3AodGltZXJRdWV1ZSksIHRpbWVyLnNvcnRJbmRleCA9IHRpbWVyLmV4cGlyYXRpb25UaW1lLCBwdXNoKHRhc2tRdWV1ZSwgdGltZXIpOwogICAgICAgICAgZWxzZSBicmVhazsKICAgICAgICAgIHRpbWVyID0gcGVlayh0aW1lclF1ZXVlKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gaGFuZGxlVGltZW91dChjdXJyZW50VGltZSkgewogICAgICAgIGlzSG9zdFRpbWVvdXRTY2hlZHVsZWQgPSBmYWxzZTsKICAgICAgICBhZHZhbmNlVGltZXJzKGN1cnJlbnRUaW1lKTsKICAgICAgICBpZiAoIWlzSG9zdENhbGxiYWNrU2NoZWR1bGVkKQogICAgICAgICAgaWYgKG51bGwgIT09IHBlZWsodGFza1F1ZXVlKSkKICAgICAgICAgICAgaXNIb3N0Q2FsbGJhY2tTY2hlZHVsZWQgPSB0cnVlLCBpc01lc3NhZ2VMb29wUnVubmluZyB8fCAoaXNNZXNzYWdlTG9vcFJ1bm5pbmcgPSB0cnVlLCBzY2hlZHVsZVBlcmZvcm1Xb3JrVW50aWxEZWFkbGluZSgpKTsKICAgICAgICAgIGVsc2UgewogICAgICAgICAgICB2YXIgZmlyc3RUaW1lciA9IHBlZWsodGltZXJRdWV1ZSk7CiAgICAgICAgICAgIG51bGwgIT09IGZpcnN0VGltZXIgJiYgcmVxdWVzdEhvc3RUaW1lb3V0KAogICAgICAgICAgICAgIGhhbmRsZVRpbWVvdXQsCiAgICAgICAgICAgICAgZmlyc3RUaW1lci5zdGFydFRpbWUgLSBjdXJyZW50VGltZQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIHNob3VsZFlpZWxkVG9Ib3N0KCkgewogICAgICAgIHJldHVybiBuZWVkc1BhaW50ID8gdHJ1ZSA6IGV4cG9ydHMudW5zdGFibGVfbm93KCkgLSBzdGFydFRpbWUgPCBmcmFtZUludGVydmFsID8gZmFsc2UgOiB0cnVlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlcXVlc3RIb3N0VGltZW91dChjYWxsYmFjaywgbXMpIHsKICAgICAgICB0YXNrVGltZW91dElEID0gbG9jYWxTZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgY2FsbGJhY2soZXhwb3J0cy51bnN0YWJsZV9ub3coKSk7CiAgICAgICAgfSwgbXMpOwogICAgICB9CiAgICAgICJ1bmRlZmluZWQiICE9PSB0eXBlb2YgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18ucmVnaXN0ZXJJbnRlcm5hbE1vZHVsZVN0YXJ0ICYmIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5yZWdpc3RlckludGVybmFsTW9kdWxlU3RhcnQoRXJyb3IoKSk7CiAgICAgIGV4cG9ydHMudW5zdGFibGVfbm93ID0gdm9pZCAwOwogICAgICBpZiAoIm9iamVjdCIgPT09IHR5cGVvZiBwZXJmb3JtYW5jZSAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgcGVyZm9ybWFuY2Uubm93KSB7CiAgICAgICAgdmFyIGxvY2FsUGVyZm9ybWFuY2UgPSBwZXJmb3JtYW5jZTsKICAgICAgICBleHBvcnRzLnVuc3RhYmxlX25vdyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgcmV0dXJuIGxvY2FsUGVyZm9ybWFuY2Uubm93KCk7CiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgbG9jYWxEYXRlID0gRGF0ZSwgaW5pdGlhbFRpbWUgPSBsb2NhbERhdGUubm93KCk7CiAgICAgICAgZXhwb3J0cy51bnN0YWJsZV9ub3cgPSBmdW5jdGlvbigpIHsKICAgICAgICAgIHJldHVybiBsb2NhbERhdGUubm93KCkgLSBpbml0aWFsVGltZTsKICAgICAgICB9OwogICAgICB9CiAgICAgIHZhciB0YXNrUXVldWUgPSBbXSwgdGltZXJRdWV1ZSA9IFtdLCB0YXNrSWRDb3VudGVyID0gMSwgY3VycmVudFRhc2sgPSBudWxsLCBjdXJyZW50UHJpb3JpdHlMZXZlbCA9IDMsIGlzUGVyZm9ybWluZ1dvcmsgPSBmYWxzZSwgaXNIb3N0Q2FsbGJhY2tTY2hlZHVsZWQgPSBmYWxzZSwgaXNIb3N0VGltZW91dFNjaGVkdWxlZCA9IGZhbHNlLCBuZWVkc1BhaW50ID0gZmFsc2UsIGxvY2FsU2V0VGltZW91dCA9ICJmdW5jdGlvbiIgPT09IHR5cGVvZiBzZXRUaW1lb3V0ID8gc2V0VGltZW91dCA6IG51bGwsIGxvY2FsQ2xlYXJUaW1lb3V0ID0gImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGNsZWFyVGltZW91dCA/IGNsZWFyVGltZW91dCA6IG51bGwsIGxvY2FsU2V0SW1tZWRpYXRlID0gInVuZGVmaW5lZCIgIT09IHR5cGVvZiBzZXRJbW1lZGlhdGUgPyBzZXRJbW1lZGlhdGUgOiBudWxsLCBpc01lc3NhZ2VMb29wUnVubmluZyA9IGZhbHNlLCB0YXNrVGltZW91dElEID0gLTEsIGZyYW1lSW50ZXJ2YWwgPSA1LCBzdGFydFRpbWUgPSAtMTsKICAgICAgaWYgKCJmdW5jdGlvbiIgPT09IHR5cGVvZiBsb2NhbFNldEltbWVkaWF0ZSkKICAgICAgICB2YXIgc2NoZWR1bGVQZXJmb3JtV29ya1VudGlsRGVhZGxpbmUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgIGxvY2FsU2V0SW1tZWRpYXRlKHBlcmZvcm1Xb3JrVW50aWxEZWFkbGluZSk7CiAgICAgICAgfTsKICAgICAgZWxzZSBpZiAoInVuZGVmaW5lZCIgIT09IHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCkgewogICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCksIHBvcnQgPSBjaGFubmVsLnBvcnQyOwogICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gcGVyZm9ybVdvcmtVbnRpbERlYWRsaW5lOwogICAgICAgIHNjaGVkdWxlUGVyZm9ybVdvcmtVbnRpbERlYWRsaW5lID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICBwb3J0LnBvc3RNZXNzYWdlKG51bGwpOwogICAgICAgIH07CiAgICAgIH0gZWxzZQogICAgICAgIHNjaGVkdWxlUGVyZm9ybVdvcmtVbnRpbERlYWRsaW5lID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICBsb2NhbFNldFRpbWVvdXQocGVyZm9ybVdvcmtVbnRpbERlYWRsaW5lLCAwKTsKICAgICAgICB9OwogICAgICBleHBvcnRzLnVuc3RhYmxlX0lkbGVQcmlvcml0eSA9IDU7CiAgICAgIGV4cG9ydHMudW5zdGFibGVfSW1tZWRpYXRlUHJpb3JpdHkgPSAxOwogICAgICBleHBvcnRzLnVuc3RhYmxlX0xvd1ByaW9yaXR5ID0gNDsKICAgICAgZXhwb3J0cy51bnN0YWJsZV9Ob3JtYWxQcmlvcml0eSA9IDM7CiAgICAgIGV4cG9ydHMudW5zdGFibGVfUHJvZmlsaW5nID0gbnVsbDsKICAgICAgZXhwb3J0cy51bnN0YWJsZV9Vc2VyQmxvY2tpbmdQcmlvcml0eSA9IDI7CiAgICAgIGV4cG9ydHMudW5zdGFibGVfY2FuY2VsQ2FsbGJhY2sgPSBmdW5jdGlvbih0YXNrKSB7CiAgICAgICAgdGFzay5jYWxsYmFjayA9IG51bGw7CiAgICAgIH07CiAgICAgIGV4cG9ydHMudW5zdGFibGVfZm9yY2VGcmFtZVJhdGUgPSBmdW5jdGlvbihmcHMpIHsKICAgICAgICAwID4gZnBzIHx8IDEyNSA8IGZwcyA/IGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiZm9yY2VGcmFtZVJhdGUgdGFrZXMgYSBwb3NpdGl2ZSBpbnQgYmV0d2VlbiAwIGFuZCAxMjUsIGZvcmNpbmcgZnJhbWUgcmF0ZXMgaGlnaGVyIHRoYW4gMTI1IGZwcyBpcyBub3Qgc3VwcG9ydGVkIgogICAgICAgICkgOiBmcmFtZUludGVydmFsID0gMCA8IGZwcyA/IE1hdGguZmxvb3IoMWUzIC8gZnBzKSA6IDU7CiAgICAgIH07CiAgICAgIGV4cG9ydHMudW5zdGFibGVfZ2V0Q3VycmVudFByaW9yaXR5TGV2ZWwgPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gY3VycmVudFByaW9yaXR5TGV2ZWw7CiAgICAgIH07CiAgICAgIGV4cG9ydHMudW5zdGFibGVfbmV4dCA9IGZ1bmN0aW9uKGV2ZW50SGFuZGxlcikgewogICAgICAgIHN3aXRjaCAoY3VycmVudFByaW9yaXR5TGV2ZWwpIHsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgdmFyIHByaW9yaXR5TGV2ZWwgPSAzOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHByaW9yaXR5TGV2ZWwgPSBjdXJyZW50UHJpb3JpdHlMZXZlbDsKICAgICAgICB9CiAgICAgICAgdmFyIHByZXZpb3VzUHJpb3JpdHlMZXZlbCA9IGN1cnJlbnRQcmlvcml0eUxldmVsOwogICAgICAgIGN1cnJlbnRQcmlvcml0eUxldmVsID0gcHJpb3JpdHlMZXZlbDsKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuIGV2ZW50SGFuZGxlcigpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBjdXJyZW50UHJpb3JpdHlMZXZlbCA9IHByZXZpb3VzUHJpb3JpdHlMZXZlbDsKICAgICAgICB9CiAgICAgIH07CiAgICAgIGV4cG9ydHMudW5zdGFibGVfcmVxdWVzdFBhaW50ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgbmVlZHNQYWludCA9IHRydWU7CiAgICAgIH07CiAgICAgIGV4cG9ydHMudW5zdGFibGVfcnVuV2l0aFByaW9yaXR5ID0gZnVuY3Rpb24ocHJpb3JpdHlMZXZlbCwgZXZlbnRIYW5kbGVyKSB7CiAgICAgICAgc3dpdGNoIChwcmlvcml0eUxldmVsKSB7CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcHJpb3JpdHlMZXZlbCA9IDM7CiAgICAgICAgfQogICAgICAgIHZhciBwcmV2aW91c1ByaW9yaXR5TGV2ZWwgPSBjdXJyZW50UHJpb3JpdHlMZXZlbDsKICAgICAgICBjdXJyZW50UHJpb3JpdHlMZXZlbCA9IHByaW9yaXR5TGV2ZWw7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiBldmVudEhhbmRsZXIoKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgY3VycmVudFByaW9yaXR5TGV2ZWwgPSBwcmV2aW91c1ByaW9yaXR5TGV2ZWw7CiAgICAgICAgfQogICAgICB9OwogICAgICBleHBvcnRzLnVuc3RhYmxlX3NjaGVkdWxlQ2FsbGJhY2sgPSBmdW5jdGlvbihwcmlvcml0eUxldmVsLCBjYWxsYmFjaywgb3B0aW9ucykgewogICAgICAgIHZhciBjdXJyZW50VGltZSA9IGV4cG9ydHMudW5zdGFibGVfbm93KCk7CiAgICAgICAgIm9iamVjdCIgPT09IHR5cGVvZiBvcHRpb25zICYmIG51bGwgIT09IG9wdGlvbnMgPyAob3B0aW9ucyA9IG9wdGlvbnMuZGVsYXksIG9wdGlvbnMgPSAibnVtYmVyIiA9PT0gdHlwZW9mIG9wdGlvbnMgJiYgMCA8IG9wdGlvbnMgPyBjdXJyZW50VGltZSArIG9wdGlvbnMgOiBjdXJyZW50VGltZSkgOiBvcHRpb25zID0gY3VycmVudFRpbWU7CiAgICAgICAgc3dpdGNoIChwcmlvcml0eUxldmVsKSB7CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIHZhciB0aW1lb3V0ID0gLTE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICB0aW1lb3V0ID0gMjUwOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgdGltZW91dCA9IDEwNzM3NDE4MjM7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICB0aW1lb3V0ID0gMWU0OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHRpbWVvdXQgPSA1ZTM7CiAgICAgICAgfQogICAgICAgIHRpbWVvdXQgPSBvcHRpb25zICsgdGltZW91dDsKICAgICAgICBwcmlvcml0eUxldmVsID0gewogICAgICAgICAgaWQ6IHRhc2tJZENvdW50ZXIrKywKICAgICAgICAgIGNhbGxiYWNrLAogICAgICAgICAgcHJpb3JpdHlMZXZlbCwKICAgICAgICAgIHN0YXJ0VGltZTogb3B0aW9ucywKICAgICAgICAgIGV4cGlyYXRpb25UaW1lOiB0aW1lb3V0LAogICAgICAgICAgc29ydEluZGV4OiAtMQogICAgICAgIH07CiAgICAgICAgb3B0aW9ucyA+IGN1cnJlbnRUaW1lID8gKHByaW9yaXR5TGV2ZWwuc29ydEluZGV4ID0gb3B0aW9ucywgcHVzaCh0aW1lclF1ZXVlLCBwcmlvcml0eUxldmVsKSwgbnVsbCA9PT0gcGVlayh0YXNrUXVldWUpICYmIHByaW9yaXR5TGV2ZWwgPT09IHBlZWsodGltZXJRdWV1ZSkgJiYgKGlzSG9zdFRpbWVvdXRTY2hlZHVsZWQgPyAobG9jYWxDbGVhclRpbWVvdXQodGFza1RpbWVvdXRJRCksIHRhc2tUaW1lb3V0SUQgPSAtMSkgOiBpc0hvc3RUaW1lb3V0U2NoZWR1bGVkID0gdHJ1ZSwgcmVxdWVzdEhvc3RUaW1lb3V0KGhhbmRsZVRpbWVvdXQsIG9wdGlvbnMgLSBjdXJyZW50VGltZSkpKSA6IChwcmlvcml0eUxldmVsLnNvcnRJbmRleCA9IHRpbWVvdXQsIHB1c2godGFza1F1ZXVlLCBwcmlvcml0eUxldmVsKSwgaXNIb3N0Q2FsbGJhY2tTY2hlZHVsZWQgfHwgaXNQZXJmb3JtaW5nV29yayB8fCAoaXNIb3N0Q2FsbGJhY2tTY2hlZHVsZWQgPSB0cnVlLCBpc01lc3NhZ2VMb29wUnVubmluZyB8fCAoaXNNZXNzYWdlTG9vcFJ1bm5pbmcgPSB0cnVlLCBzY2hlZHVsZVBlcmZvcm1Xb3JrVW50aWxEZWFkbGluZSgpKSkpOwogICAgICAgIHJldHVybiBwcmlvcml0eUxldmVsOwogICAgICB9OwogICAgICBleHBvcnRzLnVuc3RhYmxlX3Nob3VsZFlpZWxkID0gc2hvdWxkWWllbGRUb0hvc3Q7CiAgICAgIGV4cG9ydHMudW5zdGFibGVfd3JhcENhbGxiYWNrID0gZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgICAgICB2YXIgcGFyZW50UHJpb3JpdHlMZXZlbCA9IGN1cnJlbnRQcmlvcml0eUxldmVsOwogICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgIHZhciBwcmV2aW91c1ByaW9yaXR5TGV2ZWwgPSBjdXJyZW50UHJpb3JpdHlMZXZlbDsKICAgICAgICAgIGN1cnJlbnRQcmlvcml0eUxldmVsID0gcGFyZW50UHJpb3JpdHlMZXZlbDsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgY3VycmVudFByaW9yaXR5TGV2ZWwgPSBwcmV2aW91c1ByaW9yaXR5TGV2ZWw7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfTsKICAgICAgInVuZGVmaW5lZCIgIT09IHR5cGVvZiBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18gJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5yZWdpc3RlckludGVybmFsTW9kdWxlU3RvcCAmJiBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18ucmVnaXN0ZXJJbnRlcm5hbE1vZHVsZVN0b3AoRXJyb3IoKSk7CiAgICB9KSgpOwogIH0KfSk7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvc2NoZWR1bGVyL2luZGV4LmpzCnZhciByZXF1aXJlX3NjaGVkdWxlciA9IF9fY29tbW9uSlMoewogICIuLi8uLi9ub2RlX21vZHVsZXMvc2NoZWR1bGVyL2luZGV4LmpzIihleHBvcnRzLCBtb2R1bGUpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIGlmIChmYWxzZSkgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IG51bGw7CiAgICB9IGVsc2UgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmVfc2NoZWR1bGVyX2RldmVsb3BtZW50KCk7CiAgICB9CiAgfQp9KTsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1kb20vY2pzL3JlYWN0LWRvbS1jbGllbnQuZGV2ZWxvcG1lbnQuanMKdmFyIHJlcXVpcmVfcmVhY3RfZG9tX2NsaWVudF9kZXZlbG9wbWVudCA9IF9fY29tbW9uSlMoewogICIuLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtZG9tL2Nqcy9yZWFjdC1kb20tY2xpZW50LmRldmVsb3BtZW50LmpzIihleHBvcnRzKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICAoZnVuY3Rpb24oKSB7CiAgICAgIGZ1bmN0aW9uIGZpbmRIb29rKGZpYmVyLCBpZCkgewogICAgICAgIGZvciAoZmliZXIgPSBmaWJlci5tZW1vaXplZFN0YXRlOyBudWxsICE9PSBmaWJlciAmJiAwIDwgaWQ7ICkKICAgICAgICAgIGZpYmVyID0gZmliZXIubmV4dCwgaWQtLTsKICAgICAgICByZXR1cm4gZmliZXI7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY29weVdpdGhTZXRJbXBsKG9iaiwgcGF0aCwgaW5kZXgsIHZhbHVlKSB7CiAgICAgICAgaWYgKGluZGV4ID49IHBhdGgubGVuZ3RoKSByZXR1cm4gdmFsdWU7CiAgICAgICAgdmFyIGtleSA9IHBhdGhbaW5kZXhdLCB1cGRhdGVkID0gaXNBcnJheUltcGwob2JqKSA/IG9iai5zbGljZSgpIDogYXNzaWduKHt9LCBvYmopOwogICAgICAgIHVwZGF0ZWRba2V5XSA9IGNvcHlXaXRoU2V0SW1wbChvYmpba2V5XSwgcGF0aCwgaW5kZXggKyAxLCB2YWx1ZSk7CiAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY29weVdpdGhSZW5hbWUob2JqLCBvbGRQYXRoLCBuZXdQYXRoKSB7CiAgICAgICAgaWYgKG9sZFBhdGgubGVuZ3RoICE9PSBuZXdQYXRoLmxlbmd0aCkKICAgICAgICAgIGNvbnNvbGUud2FybigiY29weVdpdGhSZW5hbWUoKSBleHBlY3RzIHBhdGhzIG9mIHRoZSBzYW1lIGxlbmd0aCIpOwogICAgICAgIGVsc2UgewogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXdQYXRoLmxlbmd0aCAtIDE7IGkrKykKICAgICAgICAgICAgaWYgKG9sZFBhdGhbaV0gIT09IG5ld1BhdGhbaV0pIHsKICAgICAgICAgICAgICBjb25zb2xlLndhcm4oCiAgICAgICAgICAgICAgICAiY29weVdpdGhSZW5hbWUoKSBleHBlY3RzIHBhdGhzIHRvIGJlIHRoZSBzYW1lIGV4Y2VwdCBmb3IgdGhlIGRlZXBlc3Qga2V5IgogICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gY29weVdpdGhSZW5hbWVJbXBsKG9iaiwgb2xkUGF0aCwgbmV3UGF0aCwgMCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNvcHlXaXRoUmVuYW1lSW1wbChvYmosIG9sZFBhdGgsIG5ld1BhdGgsIGluZGV4KSB7CiAgICAgICAgdmFyIG9sZEtleSA9IG9sZFBhdGhbaW5kZXhdLCB1cGRhdGVkID0gaXNBcnJheUltcGwob2JqKSA/IG9iai5zbGljZSgpIDogYXNzaWduKHt9LCBvYmopOwogICAgICAgIGluZGV4ICsgMSA9PT0gb2xkUGF0aC5sZW5ndGggPyAodXBkYXRlZFtuZXdQYXRoW2luZGV4XV0gPSB1cGRhdGVkW29sZEtleV0sIGlzQXJyYXlJbXBsKHVwZGF0ZWQpID8gdXBkYXRlZC5zcGxpY2Uob2xkS2V5LCAxKSA6IGRlbGV0ZSB1cGRhdGVkW29sZEtleV0pIDogdXBkYXRlZFtvbGRLZXldID0gY29weVdpdGhSZW5hbWVJbXBsKAogICAgICAgICAgb2JqW29sZEtleV0sCiAgICAgICAgICBvbGRQYXRoLAogICAgICAgICAgbmV3UGF0aCwKICAgICAgICAgIGluZGV4ICsgMQogICAgICAgICk7CiAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY29weVdpdGhEZWxldGVJbXBsKG9iaiwgcGF0aCwgaW5kZXgpIHsKICAgICAgICB2YXIga2V5ID0gcGF0aFtpbmRleF0sIHVwZGF0ZWQgPSBpc0FycmF5SW1wbChvYmopID8gb2JqLnNsaWNlKCkgOiBhc3NpZ24oe30sIG9iaik7CiAgICAgICAgaWYgKGluZGV4ICsgMSA9PT0gcGF0aC5sZW5ndGgpCiAgICAgICAgICByZXR1cm4gaXNBcnJheUltcGwodXBkYXRlZCkgPyB1cGRhdGVkLnNwbGljZShrZXksIDEpIDogZGVsZXRlIHVwZGF0ZWRba2V5XSwgdXBkYXRlZDsKICAgICAgICB1cGRhdGVkW2tleV0gPSBjb3B5V2l0aERlbGV0ZUltcGwob2JqW2tleV0sIHBhdGgsIGluZGV4ICsgMSk7CiAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gc2hvdWxkU3VzcGVuZEltcGwoKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHNob3VsZEVycm9ySW1wbCgpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICBmdW5jdGlvbiB3YXJuRm9yTWlzc2luZ0tleSgpIHsKICAgICAgfQogICAgICBmdW5jdGlvbiB3YXJuSW52YWxpZEhvb2tBY2Nlc3MoKSB7CiAgICAgICAgY29uc29sZS5lcnJvcigKICAgICAgICAgICJEbyBub3QgY2FsbCBIb29rcyBpbnNpZGUgdXNlRWZmZWN0KC4uLiksIHVzZU1lbW8oLi4uKSwgb3Igb3RoZXIgYnVpbHQtaW4gSG9va3MuIFlvdSBjYW4gb25seSBjYWxsIEhvb2tzIGF0IHRoZSB0b3AgbGV2ZWwgb2YgeW91ciBSZWFjdCBmdW5jdGlvbi4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZSBodHRwczovL3JlYWN0LmRldi9saW5rL3J1bGVzLW9mLWhvb2tzIgogICAgICAgICk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gd2FybkludmFsaWRDb250ZXh0QWNjZXNzKCkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiQ29udGV4dCBjYW4gb25seSBiZSByZWFkIHdoaWxlIFJlYWN0IGlzIHJlbmRlcmluZy4gSW4gY2xhc3NlcywgeW91IGNhbiByZWFkIGl0IGluIHRoZSByZW5kZXIgbWV0aG9kIG9yIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcy4gSW4gZnVuY3Rpb24gY29tcG9uZW50cywgeW91IGNhbiByZWFkIGl0IGRpcmVjdGx5IGluIHRoZSBmdW5jdGlvbiBib2R5LCBidXQgbm90IGluc2lkZSBIb29rcyBsaWtlIHVzZVJlZHVjZXIoKSBvciB1c2VNZW1vKCkuIgogICAgICAgICk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbm9vcCQyKCkgewogICAgICB9CiAgICAgIGZ1bmN0aW9uIHNldFRvU29ydGVkU3RyaW5nKHNldCkgewogICAgICAgIHZhciBhcnJheSA9IFtdOwogICAgICAgIHNldC5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgICBhcnJheS5wdXNoKHZhbHVlKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gYXJyYXkuc29ydCgpLmpvaW4oIiwgIik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY3JlYXRlRmliZXIodGFnLCBwZW5kaW5nUHJvcHMsIGtleSwgbW9kZSkgewogICAgICAgIHJldHVybiBuZXcgRmliZXJOb2RlKHRhZywgcGVuZGluZ1Byb3BzLCBrZXksIG1vZGUpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHNjaGVkdWxlUm9vdChyb290MiwgZWxlbWVudCkgewogICAgICAgIHJvb3QyLmNvbnRleHQgPT09IGVtcHR5Q29udGV4dE9iamVjdCAmJiAodXBkYXRlQ29udGFpbmVySW1wbChyb290Mi5jdXJyZW50LCAyLCBlbGVtZW50LCByb290MiwgbnVsbCwgbnVsbCksIGZsdXNoU3luY1dvcmskMSgpKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBzY2hlZHVsZVJlZnJlc2gocm9vdDIsIHVwZGF0ZSkgewogICAgICAgIGlmIChudWxsICE9PSByZXNvbHZlRmFtaWx5KSB7CiAgICAgICAgICB2YXIgc3RhbGVGYW1pbGllcyA9IHVwZGF0ZS5zdGFsZUZhbWlsaWVzOwogICAgICAgICAgdXBkYXRlID0gdXBkYXRlLnVwZGF0ZWRGYW1pbGllczsKICAgICAgICAgIGZsdXNoUGVuZGluZ0VmZmVjdHMoKTsKICAgICAgICAgIHNjaGVkdWxlRmliZXJzV2l0aEZhbWlsaWVzUmVjdXJzaXZlbHkoCiAgICAgICAgICAgIHJvb3QyLmN1cnJlbnQsCiAgICAgICAgICAgIHVwZGF0ZSwKICAgICAgICAgICAgc3RhbGVGYW1pbGllcwogICAgICAgICAgKTsKICAgICAgICAgIGZsdXNoU3luY1dvcmskMSgpOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBzZXRSZWZyZXNoSGFuZGxlcihoYW5kbGVyKSB7CiAgICAgICAgcmVzb2x2ZUZhbWlseSA9IGhhbmRsZXI7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gaXNWYWxpZENvbnRhaW5lcihub2RlKSB7CiAgICAgICAgcmV0dXJuICEoIW5vZGUgfHwgMSAhPT0gbm9kZS5ub2RlVHlwZSAmJiA5ICE9PSBub2RlLm5vZGVUeXBlICYmIDExICE9PSBub2RlLm5vZGVUeXBlKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBnZXROZWFyZXN0TW91bnRlZEZpYmVyKGZpYmVyKSB7CiAgICAgICAgdmFyIG5vZGUgPSBmaWJlciwgbmVhcmVzdE1vdW50ZWQgPSBmaWJlcjsKICAgICAgICBpZiAoZmliZXIuYWx0ZXJuYXRlKSBmb3IgKDsgbm9kZS5yZXR1cm47ICkgbm9kZSA9IG5vZGUucmV0dXJuOwogICAgICAgIGVsc2UgewogICAgICAgICAgZmliZXIgPSBub2RlOwogICAgICAgICAgZG8KICAgICAgICAgICAgbm9kZSA9IGZpYmVyLCAwICE9PSAobm9kZS5mbGFncyAmIDQwOTgpICYmIChuZWFyZXN0TW91bnRlZCA9IG5vZGUucmV0dXJuKSwgZmliZXIgPSBub2RlLnJldHVybjsKICAgICAgICAgIHdoaWxlIChmaWJlcik7CiAgICAgICAgfQogICAgICAgIHJldHVybiAzID09PSBub2RlLnRhZyA/IG5lYXJlc3RNb3VudGVkIDogbnVsbDsKICAgICAgfQogICAgICBmdW5jdGlvbiBnZXRTdXNwZW5zZUluc3RhbmNlRnJvbUZpYmVyKGZpYmVyKSB7CiAgICAgICAgaWYgKDEzID09PSBmaWJlci50YWcpIHsKICAgICAgICAgIHZhciBzdXNwZW5zZVN0YXRlID0gZmliZXIubWVtb2l6ZWRTdGF0ZTsKICAgICAgICAgIG51bGwgPT09IHN1c3BlbnNlU3RhdGUgJiYgKGZpYmVyID0gZmliZXIuYWx0ZXJuYXRlLCBudWxsICE9PSBmaWJlciAmJiAoc3VzcGVuc2VTdGF0ZSA9IGZpYmVyLm1lbW9pemVkU3RhdGUpKTsKICAgICAgICAgIGlmIChudWxsICE9PSBzdXNwZW5zZVN0YXRlKSByZXR1cm4gc3VzcGVuc2VTdGF0ZS5kZWh5ZHJhdGVkOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICBmdW5jdGlvbiBhc3NlcnRJc01vdW50ZWQoZmliZXIpIHsKICAgICAgICBpZiAoZ2V0TmVhcmVzdE1vdW50ZWRGaWJlcihmaWJlcikgIT09IGZpYmVyKQogICAgICAgICAgdGhyb3cgRXJyb3IoIlVuYWJsZSB0byBmaW5kIG5vZGUgb24gYW4gdW5tb3VudGVkIGNvbXBvbmVudC4iKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBmaW5kQ3VycmVudEZpYmVyVXNpbmdTbG93UGF0aChmaWJlcikgewogICAgICAgIHZhciBhbHRlcm5hdGUgPSBmaWJlci5hbHRlcm5hdGU7CiAgICAgICAgaWYgKCFhbHRlcm5hdGUpIHsKICAgICAgICAgIGFsdGVybmF0ZSA9IGdldE5lYXJlc3RNb3VudGVkRmliZXIoZmliZXIpOwogICAgICAgICAgaWYgKG51bGwgPT09IGFsdGVybmF0ZSkKICAgICAgICAgICAgdGhyb3cgRXJyb3IoIlVuYWJsZSB0byBmaW5kIG5vZGUgb24gYW4gdW5tb3VudGVkIGNvbXBvbmVudC4iKTsKICAgICAgICAgIHJldHVybiBhbHRlcm5hdGUgIT09IGZpYmVyID8gbnVsbCA6IGZpYmVyOwogICAgICAgIH0KICAgICAgICBmb3IgKHZhciBhID0gZmliZXIsIGIgPSBhbHRlcm5hdGU7IDsgKSB7CiAgICAgICAgICB2YXIgcGFyZW50QSA9IGEucmV0dXJuOwogICAgICAgICAgaWYgKG51bGwgPT09IHBhcmVudEEpIGJyZWFrOwogICAgICAgICAgdmFyIHBhcmVudEIgPSBwYXJlbnRBLmFsdGVybmF0ZTsKICAgICAgICAgIGlmIChudWxsID09PSBwYXJlbnRCKSB7CiAgICAgICAgICAgIGIgPSBwYXJlbnRBLnJldHVybjsKICAgICAgICAgICAgaWYgKG51bGwgIT09IGIpIHsKICAgICAgICAgICAgICBhID0gYjsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChwYXJlbnRBLmNoaWxkID09PSBwYXJlbnRCLmNoaWxkKSB7CiAgICAgICAgICAgIGZvciAocGFyZW50QiA9IHBhcmVudEEuY2hpbGQ7IHBhcmVudEI7ICkgewogICAgICAgICAgICAgIGlmIChwYXJlbnRCID09PSBhKSByZXR1cm4gYXNzZXJ0SXNNb3VudGVkKHBhcmVudEEpLCBmaWJlcjsKICAgICAgICAgICAgICBpZiAocGFyZW50QiA9PT0gYikgcmV0dXJuIGFzc2VydElzTW91bnRlZChwYXJlbnRBKSwgYWx0ZXJuYXRlOwogICAgICAgICAgICAgIHBhcmVudEIgPSBwYXJlbnRCLnNpYmxpbmc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhyb3cgRXJyb3IoIlVuYWJsZSB0byBmaW5kIG5vZGUgb24gYW4gdW5tb3VudGVkIGNvbXBvbmVudC4iKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChhLnJldHVybiAhPT0gYi5yZXR1cm4pIGEgPSBwYXJlbnRBLCBiID0gcGFyZW50QjsKICAgICAgICAgIGVsc2UgewogICAgICAgICAgICBmb3IgKHZhciBkaWRGaW5kQ2hpbGQgPSBmYWxzZSwgX2NoaWxkID0gcGFyZW50QS5jaGlsZDsgX2NoaWxkOyApIHsKICAgICAgICAgICAgICBpZiAoX2NoaWxkID09PSBhKSB7CiAgICAgICAgICAgICAgICBkaWRGaW5kQ2hpbGQgPSB0cnVlOwogICAgICAgICAgICAgICAgYSA9IHBhcmVudEE7CiAgICAgICAgICAgICAgICBiID0gcGFyZW50QjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoX2NoaWxkID09PSBiKSB7CiAgICAgICAgICAgICAgICBkaWRGaW5kQ2hpbGQgPSB0cnVlOwogICAgICAgICAgICAgICAgYiA9IHBhcmVudEE7CiAgICAgICAgICAgICAgICBhID0gcGFyZW50QjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY2hpbGQgPSBfY2hpbGQuc2libGluZzsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWRpZEZpbmRDaGlsZCkgewogICAgICAgICAgICAgIGZvciAoX2NoaWxkID0gcGFyZW50Qi5jaGlsZDsgX2NoaWxkOyApIHsKICAgICAgICAgICAgICAgIGlmIChfY2hpbGQgPT09IGEpIHsKICAgICAgICAgICAgICAgICAgZGlkRmluZENoaWxkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgYSA9IHBhcmVudEI7CiAgICAgICAgICAgICAgICAgIGIgPSBwYXJlbnRBOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChfY2hpbGQgPT09IGIpIHsKICAgICAgICAgICAgICAgICAgZGlkRmluZENoaWxkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgYiA9IHBhcmVudEI7CiAgICAgICAgICAgICAgICAgIGEgPSBwYXJlbnRBOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF9jaGlsZCA9IF9jaGlsZC5zaWJsaW5nOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoIWRpZEZpbmRDaGlsZCkKICAgICAgICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAgICAgICAiQ2hpbGQgd2FzIG5vdCBmb3VuZCBpbiBlaXRoZXIgcGFyZW50IHNldC4gVGhpcyBpbmRpY2F0ZXMgYSBidWcgaW4gUmVhY3QgcmVsYXRlZCB0byB0aGUgcmV0dXJuIHBvaW50ZXIuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLiIKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChhLmFsdGVybmF0ZSAhPT0gYikKICAgICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICAgIlJldHVybiBmaWJlcnMgc2hvdWxkIGFsd2F5cyBiZSBlYWNoIG90aGVycycgYWx0ZXJuYXRlcy4gVGhpcyBlcnJvciBpcyBsaWtlbHkgY2F1c2VkIGJ5IGEgYnVnIGluIFJlYWN0LiBQbGVhc2UgZmlsZSBhbiBpc3N1ZS4iCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGlmICgzICE9PSBhLnRhZykKICAgICAgICAgIHRocm93IEVycm9yKCJVbmFibGUgdG8gZmluZCBub2RlIG9uIGFuIHVubW91bnRlZCBjb21wb25lbnQuIik7CiAgICAgICAgcmV0dXJuIGEuc3RhdGVOb2RlLmN1cnJlbnQgPT09IGEgPyBmaWJlciA6IGFsdGVybmF0ZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBmaW5kQ3VycmVudEhvc3RGaWJlckltcGwobm9kZSkgewogICAgICAgIHZhciB0YWcgPSBub2RlLnRhZzsKICAgICAgICBpZiAoNSA9PT0gdGFnIHx8IDI2ID09PSB0YWcgfHwgMjcgPT09IHRhZyB8fCA2ID09PSB0YWcpIHJldHVybiBub2RlOwogICAgICAgIGZvciAobm9kZSA9IG5vZGUuY2hpbGQ7IG51bGwgIT09IG5vZGU7ICkgewogICAgICAgICAgdGFnID0gZmluZEN1cnJlbnRIb3N0RmliZXJJbXBsKG5vZGUpOwogICAgICAgICAgaWYgKG51bGwgIT09IHRhZykgcmV0dXJuIHRhZzsKICAgICAgICAgIG5vZGUgPSBub2RlLnNpYmxpbmc7CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldEl0ZXJhdG9yRm4obWF5YmVJdGVyYWJsZSkgewogICAgICAgIGlmIChudWxsID09PSBtYXliZUl0ZXJhYmxlIHx8ICJvYmplY3QiICE9PSB0eXBlb2YgbWF5YmVJdGVyYWJsZSkKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIG1heWJlSXRlcmFibGUgPSBNQVlCRV9JVEVSQVRPUl9TWU1CT0wgJiYgbWF5YmVJdGVyYWJsZVtNQVlCRV9JVEVSQVRPUl9TWU1CT0xdIHx8IG1heWJlSXRlcmFibGVbIkBAaXRlcmF0b3IiXTsKICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PT0gdHlwZW9mIG1heWJlSXRlcmFibGUgPyBtYXliZUl0ZXJhYmxlIDogbnVsbDsKICAgICAgfQogICAgICBmdW5jdGlvbiBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodHlwZSkgewogICAgICAgIGlmIChudWxsID09IHR5cGUpIHJldHVybiBudWxsOwogICAgICAgIGlmICgiZnVuY3Rpb24iID09PSB0eXBlb2YgdHlwZSkKICAgICAgICAgIHJldHVybiB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9DTElFTlRfUkVGRVJFTkNFID8gbnVsbCA6IHR5cGUuZGlzcGxheU5hbWUgfHwgdHlwZS5uYW1lIHx8IG51bGw7CiAgICAgICAgaWYgKCJzdHJpbmciID09PSB0eXBlb2YgdHlwZSkgcmV0dXJuIHR5cGU7CiAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICBjYXNlIFJFQUNUX0ZSQUdNRU5UX1RZUEU6CiAgICAgICAgICAgIHJldHVybiAiRnJhZ21lbnQiOwogICAgICAgICAgY2FzZSBSRUFDVF9QUk9GSUxFUl9UWVBFOgogICAgICAgICAgICByZXR1cm4gIlByb2ZpbGVyIjsKICAgICAgICAgIGNhc2UgUkVBQ1RfU1RSSUNUX01PREVfVFlQRToKICAgICAgICAgICAgcmV0dXJuICJTdHJpY3RNb2RlIjsKICAgICAgICAgIGNhc2UgUkVBQ1RfU1VTUEVOU0VfVFlQRToKICAgICAgICAgICAgcmV0dXJuICJTdXNwZW5zZSI7CiAgICAgICAgICBjYXNlIFJFQUNUX1NVU1BFTlNFX0xJU1RfVFlQRToKICAgICAgICAgICAgcmV0dXJuICJTdXNwZW5zZUxpc3QiOwogICAgICAgICAgY2FzZSBSRUFDVF9BQ1RJVklUWV9UWVBFOgogICAgICAgICAgICByZXR1cm4gIkFjdGl2aXR5IjsKICAgICAgICB9CiAgICAgICAgaWYgKCJvYmplY3QiID09PSB0eXBlb2YgdHlwZSkKICAgICAgICAgIHN3aXRjaCAoIm51bWJlciIgPT09IHR5cGVvZiB0eXBlLnRhZyAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiUmVjZWl2ZWQgYW4gdW5leHBlY3RlZCBvYmplY3QgaW4gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKCkuIFRoaXMgaXMgbGlrZWx5IGEgYnVnIGluIFJlYWN0LiBQbGVhc2UgZmlsZSBhbiBpc3N1ZS4iCiAgICAgICAgICApLCB0eXBlLiQkdHlwZW9mKSB7CiAgICAgICAgICAgIGNhc2UgUkVBQ1RfUE9SVEFMX1RZUEU6CiAgICAgICAgICAgICAgcmV0dXJuICJQb3J0YWwiOwogICAgICAgICAgICBjYXNlIFJFQUNUX0NPTlRFWFRfVFlQRToKICAgICAgICAgICAgICByZXR1cm4gKHR5cGUuZGlzcGxheU5hbWUgfHwgIkNvbnRleHQiKSArICIuUHJvdmlkZXIiOwogICAgICAgICAgICBjYXNlIFJFQUNUX0NPTlNVTUVSX1RZUEU6CiAgICAgICAgICAgICAgcmV0dXJuICh0eXBlLl9jb250ZXh0LmRpc3BsYXlOYW1lIHx8ICJDb250ZXh0IikgKyAiLkNvbnN1bWVyIjsKICAgICAgICAgICAgY2FzZSBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFOgogICAgICAgICAgICAgIHZhciBpbm5lclR5cGUgPSB0eXBlLnJlbmRlcjsKICAgICAgICAgICAgICB0eXBlID0gdHlwZS5kaXNwbGF5TmFtZTsKICAgICAgICAgICAgICB0eXBlIHx8ICh0eXBlID0gaW5uZXJUeXBlLmRpc3BsYXlOYW1lIHx8IGlubmVyVHlwZS5uYW1lIHx8ICIiLCB0eXBlID0gIiIgIT09IHR5cGUgPyAiRm9yd2FyZFJlZigiICsgdHlwZSArICIpIiA6ICJGb3J3YXJkUmVmIik7CiAgICAgICAgICAgICAgcmV0dXJuIHR5cGU7CiAgICAgICAgICAgIGNhc2UgUkVBQ1RfTUVNT19UWVBFOgogICAgICAgICAgICAgIHJldHVybiBpbm5lclR5cGUgPSB0eXBlLmRpc3BsYXlOYW1lIHx8IG51bGwsIG51bGwgIT09IGlubmVyVHlwZSA/IGlubmVyVHlwZSA6IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlLnR5cGUpIHx8ICJNZW1vIjsKICAgICAgICAgICAgY2FzZSBSRUFDVF9MQVpZX1RZUEU6CiAgICAgICAgICAgICAgaW5uZXJUeXBlID0gdHlwZS5fcGF5bG9hZDsKICAgICAgICAgICAgICB0eXBlID0gdHlwZS5faW5pdDsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJuIGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlKGlubmVyVHlwZSkpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKHgpIHsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0Q29tcG9uZW50TmFtZUZyb21Pd25lcihvd25lcikgewogICAgICAgIHJldHVybiAibnVtYmVyIiA9PT0gdHlwZW9mIG93bmVyLnRhZyA/IGdldENvbXBvbmVudE5hbWVGcm9tRmliZXIob3duZXIpIDogInN0cmluZyIgPT09IHR5cGVvZiBvd25lci5uYW1lID8gb3duZXIubmFtZSA6IG51bGw7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0Q29tcG9uZW50TmFtZUZyb21GaWJlcihmaWJlcikgewogICAgICAgIHZhciB0eXBlID0gZmliZXIudHlwZTsKICAgICAgICBzd2l0Y2ggKGZpYmVyLnRhZykgewogICAgICAgICAgY2FzZSAzMToKICAgICAgICAgICAgcmV0dXJuICJBY3Rpdml0eSI7CiAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICByZXR1cm4gIkNhY2hlIjsKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgcmV0dXJuICh0eXBlLl9jb250ZXh0LmRpc3BsYXlOYW1lIHx8ICJDb250ZXh0IikgKyAiLkNvbnN1bWVyIjsKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIHJldHVybiAodHlwZS5kaXNwbGF5TmFtZSB8fCAiQ29udGV4dCIpICsgIi5Qcm92aWRlciI7CiAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICByZXR1cm4gIkRlaHlkcmF0ZWRGcmFnbWVudCI7CiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICByZXR1cm4gZmliZXIgPSB0eXBlLnJlbmRlciwgZmliZXIgPSBmaWJlci5kaXNwbGF5TmFtZSB8fCBmaWJlci5uYW1lIHx8ICIiLCB0eXBlLmRpc3BsYXlOYW1lIHx8ICgiIiAhPT0gZmliZXIgPyAiRm9yd2FyZFJlZigiICsgZmliZXIgKyAiKSIgOiAiRm9yd2FyZFJlZiIpOwogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICByZXR1cm4gIkZyYWdtZW50IjsKICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICByZXR1cm4gdHlwZTsKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgcmV0dXJuICJQb3J0YWwiOwogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICByZXR1cm4gIlJvb3QiOwogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICByZXR1cm4gIlRleHQiOwogICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgcmV0dXJuIGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlKTsKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgcmV0dXJuIHR5cGUgPT09IFJFQUNUX1NUUklDVF9NT0RFX1RZUEUgPyAiU3RyaWN0TW9kZSIgOiAiTW9kZSI7CiAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICByZXR1cm4gIk9mZnNjcmVlbiI7CiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICByZXR1cm4gIlByb2ZpbGVyIjsKICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgIHJldHVybiAiU2NvcGUiOwogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgcmV0dXJuICJTdXNwZW5zZSI7CiAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICByZXR1cm4gIlN1c3BlbnNlTGlzdCI7CiAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICByZXR1cm4gIlRyYWNpbmdNYXJrZXIiOwogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09PSB0eXBlb2YgdHlwZSkKICAgICAgICAgICAgICByZXR1cm4gdHlwZS5kaXNwbGF5TmFtZSB8fCB0eXBlLm5hbWUgfHwgbnVsbDsKICAgICAgICAgICAgaWYgKCJzdHJpbmciID09PSB0eXBlb2YgdHlwZSkgcmV0dXJuIHR5cGU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAyOToKICAgICAgICAgICAgdHlwZSA9IGZpYmVyLl9kZWJ1Z0luZm87CiAgICAgICAgICAgIGlmIChudWxsICE9IHR5cGUpIHsKICAgICAgICAgICAgICBmb3IgKHZhciBpID0gdHlwZS5sZW5ndGggLSAxOyAwIDw9IGk7IGktLSkKICAgICAgICAgICAgICAgIGlmICgic3RyaW5nIiA9PT0gdHlwZW9mIHR5cGVbaV0ubmFtZSkgcmV0dXJuIHR5cGVbaV0ubmFtZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobnVsbCAhPT0gZmliZXIucmV0dXJuKQogICAgICAgICAgICAgIHJldHVybiBnZXRDb21wb25lbnROYW1lRnJvbUZpYmVyKGZpYmVyLnJldHVybik7CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNyZWF0ZUN1cnNvcihkZWZhdWx0VmFsdWUpIHsKICAgICAgICByZXR1cm4geyBjdXJyZW50OiBkZWZhdWx0VmFsdWUgfTsKICAgICAgfQogICAgICBmdW5jdGlvbiBwb3AoY3Vyc29yLCBmaWJlcikgewogICAgICAgIDAgPiBpbmRleCRqc2NvbXAkMCA/IGNvbnNvbGUuZXJyb3IoIlVuZXhwZWN0ZWQgcG9wLiIpIDogKGZpYmVyICE9PSBmaWJlclN0YWNrW2luZGV4JGpzY29tcCQwXSAmJiBjb25zb2xlLmVycm9yKCJVbmV4cGVjdGVkIEZpYmVyIHBvcHBlZC4iKSwgY3Vyc29yLmN1cnJlbnQgPSB2YWx1ZVN0YWNrW2luZGV4JGpzY29tcCQwXSwgdmFsdWVTdGFja1tpbmRleCRqc2NvbXAkMF0gPSBudWxsLCBmaWJlclN0YWNrW2luZGV4JGpzY29tcCQwXSA9IG51bGwsIGluZGV4JGpzY29tcCQwLS0pOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHB1c2goY3Vyc29yLCB2YWx1ZSwgZmliZXIpIHsKICAgICAgICBpbmRleCRqc2NvbXAkMCsrOwogICAgICAgIHZhbHVlU3RhY2tbaW5kZXgkanNjb21wJDBdID0gY3Vyc29yLmN1cnJlbnQ7CiAgICAgICAgZmliZXJTdGFja1tpbmRleCRqc2NvbXAkMF0gPSBmaWJlcjsKICAgICAgICBjdXJzb3IuY3VycmVudCA9IHZhbHVlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlcXVpcmVkQ29udGV4dChjKSB7CiAgICAgICAgbnVsbCA9PT0gYyAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgIkV4cGVjdGVkIGhvc3QgY29udGV4dCB0byBleGlzdC4gVGhpcyBlcnJvciBpcyBsaWtlbHkgY2F1c2VkIGJ5IGEgYnVnIGluIFJlYWN0LiBQbGVhc2UgZmlsZSBhbiBpc3N1ZS4iCiAgICAgICAgKTsKICAgICAgICByZXR1cm4gYzsKICAgICAgfQogICAgICBmdW5jdGlvbiBwdXNoSG9zdENvbnRhaW5lcihmaWJlciwgbmV4dFJvb3RJbnN0YW5jZSkgewogICAgICAgIHB1c2gocm9vdEluc3RhbmNlU3RhY2tDdXJzb3IsIG5leHRSb290SW5zdGFuY2UsIGZpYmVyKTsKICAgICAgICBwdXNoKGNvbnRleHRGaWJlclN0YWNrQ3Vyc29yLCBmaWJlciwgZmliZXIpOwogICAgICAgIHB1c2goY29udGV4dFN0YWNrQ3Vyc29yLCBudWxsLCBmaWJlcik7CiAgICAgICAgdmFyIG5leHRSb290Q29udGV4dCA9IG5leHRSb290SW5zdGFuY2Uubm9kZVR5cGU7CiAgICAgICAgc3dpdGNoIChuZXh0Um9vdENvbnRleHQpIHsKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIG5leHRSb290Q29udGV4dCA9IDkgPT09IG5leHRSb290Q29udGV4dCA/ICIjZG9jdW1lbnQiIDogIiNmcmFnbWVudCI7CiAgICAgICAgICAgIG5leHRSb290SW5zdGFuY2UgPSAobmV4dFJvb3RJbnN0YW5jZSA9IG5leHRSb290SW5zdGFuY2UuZG9jdW1lbnRFbGVtZW50KSA/IChuZXh0Um9vdEluc3RhbmNlID0gbmV4dFJvb3RJbnN0YW5jZS5uYW1lc3BhY2VVUkkpID8gZ2V0T3duSG9zdENvbnRleHQobmV4dFJvb3RJbnN0YW5jZSkgOiBIb3N0Q29udGV4dE5hbWVzcGFjZU5vbmUgOiBIb3N0Q29udGV4dE5hbWVzcGFjZU5vbmU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgaWYgKG5leHRSb290Q29udGV4dCA9IG5leHRSb290SW5zdGFuY2UudGFnTmFtZSwgbmV4dFJvb3RJbnN0YW5jZSA9IG5leHRSb290SW5zdGFuY2UubmFtZXNwYWNlVVJJKQogICAgICAgICAgICAgIG5leHRSb290SW5zdGFuY2UgPSBnZXRPd25Ib3N0Q29udGV4dChuZXh0Um9vdEluc3RhbmNlKSwgbmV4dFJvb3RJbnN0YW5jZSA9IGdldENoaWxkSG9zdENvbnRleHRQcm9kKAogICAgICAgICAgICAgICAgbmV4dFJvb3RJbnN0YW5jZSwKICAgICAgICAgICAgICAgIG5leHRSb290Q29udGV4dAogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICBzd2l0Y2ggKG5leHRSb290Q29udGV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAic3ZnIjoKICAgICAgICAgICAgICAgICAgbmV4dFJvb3RJbnN0YW5jZSA9IEhvc3RDb250ZXh0TmFtZXNwYWNlU3ZnOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgIm1hdGgiOgogICAgICAgICAgICAgICAgICBuZXh0Um9vdEluc3RhbmNlID0gSG9zdENvbnRleHROYW1lc3BhY2VNYXRoOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgIG5leHRSb290SW5zdGFuY2UgPSBIb3N0Q29udGV4dE5hbWVzcGFjZU5vbmU7CiAgICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBuZXh0Um9vdENvbnRleHQgPSBuZXh0Um9vdENvbnRleHQudG9Mb3dlckNhc2UoKTsKICAgICAgICBuZXh0Um9vdENvbnRleHQgPSB1cGRhdGVkQW5jZXN0b3JJbmZvRGV2KG51bGwsIG5leHRSb290Q29udGV4dCk7CiAgICAgICAgbmV4dFJvb3RDb250ZXh0ID0gewogICAgICAgICAgY29udGV4dDogbmV4dFJvb3RJbnN0YW5jZSwKICAgICAgICAgIGFuY2VzdG9ySW5mbzogbmV4dFJvb3RDb250ZXh0CiAgICAgICAgfTsKICAgICAgICBwb3AoY29udGV4dFN0YWNrQ3Vyc29yLCBmaWJlcik7CiAgICAgICAgcHVzaChjb250ZXh0U3RhY2tDdXJzb3IsIG5leHRSb290Q29udGV4dCwgZmliZXIpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHBvcEhvc3RDb250YWluZXIoZmliZXIpIHsKICAgICAgICBwb3AoY29udGV4dFN0YWNrQ3Vyc29yLCBmaWJlcik7CiAgICAgICAgcG9wKGNvbnRleHRGaWJlclN0YWNrQ3Vyc29yLCBmaWJlcik7CiAgICAgICAgcG9wKHJvb3RJbnN0YW5jZVN0YWNrQ3Vyc29yLCBmaWJlcik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0SG9zdENvbnRleHQoKSB7CiAgICAgICAgcmV0dXJuIHJlcXVpcmVkQ29udGV4dChjb250ZXh0U3RhY2tDdXJzb3IuY3VycmVudCk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcHVzaEhvc3RDb250ZXh0KGZpYmVyKSB7CiAgICAgICAgbnVsbCAhPT0gZmliZXIubWVtb2l6ZWRTdGF0ZSAmJiBwdXNoKGhvc3RUcmFuc2l0aW9uUHJvdmlkZXJDdXJzb3IsIGZpYmVyLCBmaWJlcik7CiAgICAgICAgdmFyIGNvbnRleHQgPSByZXF1aXJlZENvbnRleHQoY29udGV4dFN0YWNrQ3Vyc29yLmN1cnJlbnQpOwogICAgICAgIHZhciB0eXBlID0gZmliZXIudHlwZTsKICAgICAgICB2YXIgbmV4dENvbnRleHQgPSBnZXRDaGlsZEhvc3RDb250ZXh0UHJvZChjb250ZXh0LmNvbnRleHQsIHR5cGUpOwogICAgICAgIHR5cGUgPSB1cGRhdGVkQW5jZXN0b3JJbmZvRGV2KGNvbnRleHQuYW5jZXN0b3JJbmZvLCB0eXBlKTsKICAgICAgICBuZXh0Q29udGV4dCA9IHsgY29udGV4dDogbmV4dENvbnRleHQsIGFuY2VzdG9ySW5mbzogdHlwZSB9OwogICAgICAgIGNvbnRleHQgIT09IG5leHRDb250ZXh0ICYmIChwdXNoKGNvbnRleHRGaWJlclN0YWNrQ3Vyc29yLCBmaWJlciwgZmliZXIpLCBwdXNoKGNvbnRleHRTdGFja0N1cnNvciwgbmV4dENvbnRleHQsIGZpYmVyKSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcG9wSG9zdENvbnRleHQoZmliZXIpIHsKICAgICAgICBjb250ZXh0RmliZXJTdGFja0N1cnNvci5jdXJyZW50ID09PSBmaWJlciAmJiAocG9wKGNvbnRleHRTdGFja0N1cnNvciwgZmliZXIpLCBwb3AoY29udGV4dEZpYmVyU3RhY2tDdXJzb3IsIGZpYmVyKSk7CiAgICAgICAgaG9zdFRyYW5zaXRpb25Qcm92aWRlckN1cnNvci5jdXJyZW50ID09PSBmaWJlciAmJiAocG9wKGhvc3RUcmFuc2l0aW9uUHJvdmlkZXJDdXJzb3IsIGZpYmVyKSwgSG9zdFRyYW5zaXRpb25Db250ZXh0Ll9jdXJyZW50VmFsdWUgPSBOb3RQZW5kaW5nVHJhbnNpdGlvbik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdHlwZU5hbWUodmFsdWUpIHsKICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PT0gdHlwZW9mIFN5bWJvbCAmJiBTeW1ib2wudG9TdHJpbmdUYWcgJiYgdmFsdWVbU3ltYm9sLnRvU3RyaW5nVGFnXSB8fCB2YWx1ZS5jb25zdHJ1Y3Rvci5uYW1lIHx8ICJPYmplY3QiOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHdpbGxDb2VyY2lvblRocm93KHZhbHVlKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiB0ZXN0U3RyaW5nQ29lcmNpb24odmFsdWUpLCBmYWxzZTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKSB7CiAgICAgICAgcmV0dXJuICIiICsgdmFsdWU7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY2hlY2tBdHRyaWJ1dGVTdHJpbmdDb2VyY2lvbih2YWx1ZSwgYXR0cmlidXRlTmFtZSkgewogICAgICAgIGlmICh3aWxsQ29lcmNpb25UaHJvdyh2YWx1ZSkpCiAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIlRoZSBwcm92aWRlZCBgJXNgIGF0dHJpYnV0ZSBpcyBhbiB1bnN1cHBvcnRlZCB0eXBlICVzLiBUaGlzIHZhbHVlIG11c3QgYmUgY29lcmNlZCB0byBhIHN0cmluZyBiZWZvcmUgdXNpbmcgaXQgaGVyZS4iLAogICAgICAgICAgICBhdHRyaWJ1dGVOYW1lLAogICAgICAgICAgICB0eXBlTmFtZSh2YWx1ZSkKICAgICAgICAgICksIHRlc3RTdHJpbmdDb2VyY2lvbih2YWx1ZSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY2hlY2tDU1NQcm9wZXJ0eVN0cmluZ0NvZXJjaW9uKHZhbHVlLCBwcm9wTmFtZSkgewogICAgICAgIGlmICh3aWxsQ29lcmNpb25UaHJvdyh2YWx1ZSkpCiAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIlRoZSBwcm92aWRlZCBgJXNgIENTUyBwcm9wZXJ0eSBpcyBhbiB1bnN1cHBvcnRlZCB0eXBlICVzLiBUaGlzIHZhbHVlIG11c3QgYmUgY29lcmNlZCB0byBhIHN0cmluZyBiZWZvcmUgdXNpbmcgaXQgaGVyZS4iLAogICAgICAgICAgICBwcm9wTmFtZSwKICAgICAgICAgICAgdHlwZU5hbWUodmFsdWUpCiAgICAgICAgICApLCB0ZXN0U3RyaW5nQ29lcmNpb24odmFsdWUpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNoZWNrRm9ybUZpZWxkVmFsdWVTdHJpbmdDb2VyY2lvbih2YWx1ZSkgewogICAgICAgIGlmICh3aWxsQ29lcmNpb25UaHJvdyh2YWx1ZSkpCiAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIkZvcm0gZmllbGQgdmFsdWVzICh2YWx1ZSwgY2hlY2tlZCwgZGVmYXVsdFZhbHVlLCBvciBkZWZhdWx0Q2hlY2tlZCBwcm9wcykgbXVzdCBiZSBzdHJpbmdzLCBub3QgJXMuIFRoaXMgdmFsdWUgbXVzdCBiZSBjb2VyY2VkIHRvIGEgc3RyaW5nIGJlZm9yZSB1c2luZyBpdCBoZXJlLiIsCiAgICAgICAgICAgIHR5cGVOYW1lKHZhbHVlKQogICAgICAgICAgKSwgdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBpbmplY3RJbnRlcm5hbHMoaW50ZXJuYWxzKSB7CiAgICAgICAgaWYgKCJ1bmRlZmluZWQiID09PSB0eXBlb2YgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fKSByZXR1cm4gZmFsc2U7CiAgICAgICAgdmFyIGhvb2sgPSBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX187CiAgICAgICAgaWYgKGhvb2suaXNEaXNhYmxlZCkgcmV0dXJuIHRydWU7CiAgICAgICAgaWYgKCFob29rLnN1cHBvcnRzRmliZXIpCiAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIlRoZSBpbnN0YWxsZWQgdmVyc2lvbiBvZiBSZWFjdCBEZXZUb29scyBpcyB0b28gb2xkIGFuZCB3aWxsIG5vdCB3b3JrIHdpdGggdGhlIGN1cnJlbnQgdmVyc2lvbiBvZiBSZWFjdC4gUGxlYXNlIHVwZGF0ZSBSZWFjdCBEZXZUb29scy4gaHR0cHM6Ly9yZWFjdC5kZXYvbGluay9yZWFjdC1kZXZ0b29scyIKICAgICAgICAgICksIHRydWU7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJlbmRlcmVySUQgPSBob29rLmluamVjdChpbnRlcm5hbHMpLCBpbmplY3RlZEhvb2sgPSBob29rOwogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgY29uc29sZS5lcnJvcigiUmVhY3QgaW5zdHJ1bWVudGF0aW9uIGVuY291bnRlcmVkIGFuIGVycm9yOiAlcy4iLCBlcnIpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gaG9vay5jaGVja0RDRSA/IHRydWUgOiBmYWxzZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBzZXRJc1N0cmljdE1vZGVGb3JEZXZ0b29scyhuZXdJc1N0cmljdE1vZGUpIHsKICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgbG9nJDEgJiYgdW5zdGFibGVfc2V0RGlzYWJsZVlpZWxkVmFsdWUobmV3SXNTdHJpY3RNb2RlKTsKICAgICAgICBpZiAoaW5qZWN0ZWRIb29rICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBpbmplY3RlZEhvb2suc2V0U3RyaWN0TW9kZSkKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGluamVjdGVkSG9vay5zZXRTdHJpY3RNb2RlKHJlbmRlcmVySUQsIG5ld0lzU3RyaWN0TW9kZSk7CiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgaGFzTG9nZ2VkRXJyb3IgfHwgKGhhc0xvZ2dlZEVycm9yID0gdHJ1ZSwgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAiUmVhY3QgaW5zdHJ1bWVudGF0aW9uIGVuY291bnRlcmVkIGFuIGVycm9yOiAlcyIsCiAgICAgICAgICAgICAgZXJyCiAgICAgICAgICAgICkpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGluamVjdFByb2ZpbGluZ0hvb2tzKHByb2ZpbGluZ0hvb2tzKSB7CiAgICAgICAgaW5qZWN0ZWRQcm9maWxpbmdIb29rcyA9IHByb2ZpbGluZ0hvb2tzOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1hcmtDb21taXRTdG9wcGVkKCkgewogICAgICAgIG51bGwgIT09IGluamVjdGVkUHJvZmlsaW5nSG9va3MgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGluamVjdGVkUHJvZmlsaW5nSG9va3MubWFya0NvbW1pdFN0b3BwZWQgJiYgaW5qZWN0ZWRQcm9maWxpbmdIb29rcy5tYXJrQ29tbWl0U3RvcHBlZCgpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1hcmtDb21wb25lbnRSZW5kZXJTdGFydGVkKGZpYmVyKSB7CiAgICAgICAgbnVsbCAhPT0gaW5qZWN0ZWRQcm9maWxpbmdIb29rcyAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgaW5qZWN0ZWRQcm9maWxpbmdIb29rcy5tYXJrQ29tcG9uZW50UmVuZGVyU3RhcnRlZCAmJiBpbmplY3RlZFByb2ZpbGluZ0hvb2tzLm1hcmtDb21wb25lbnRSZW5kZXJTdGFydGVkKGZpYmVyKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBtYXJrQ29tcG9uZW50UmVuZGVyU3RvcHBlZCgpIHsKICAgICAgICBudWxsICE9PSBpbmplY3RlZFByb2ZpbGluZ0hvb2tzICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBpbmplY3RlZFByb2ZpbGluZ0hvb2tzLm1hcmtDb21wb25lbnRSZW5kZXJTdG9wcGVkICYmIGluamVjdGVkUHJvZmlsaW5nSG9va3MubWFya0NvbXBvbmVudFJlbmRlclN0b3BwZWQoKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBtYXJrUmVuZGVyU3RhcnRlZChsYW5lcykgewogICAgICAgIG51bGwgIT09IGluamVjdGVkUHJvZmlsaW5nSG9va3MgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGluamVjdGVkUHJvZmlsaW5nSG9va3MubWFya1JlbmRlclN0YXJ0ZWQgJiYgaW5qZWN0ZWRQcm9maWxpbmdIb29rcy5tYXJrUmVuZGVyU3RhcnRlZChsYW5lcyk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbWFya1JlbmRlclN0b3BwZWQoKSB7CiAgICAgICAgbnVsbCAhPT0gaW5qZWN0ZWRQcm9maWxpbmdIb29rcyAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgaW5qZWN0ZWRQcm9maWxpbmdIb29rcy5tYXJrUmVuZGVyU3RvcHBlZCAmJiBpbmplY3RlZFByb2ZpbGluZ0hvb2tzLm1hcmtSZW5kZXJTdG9wcGVkKCk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbWFya1N0YXRlVXBkYXRlU2NoZWR1bGVkKGZpYmVyLCBsYW5lKSB7CiAgICAgICAgbnVsbCAhPT0gaW5qZWN0ZWRQcm9maWxpbmdIb29rcyAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgaW5qZWN0ZWRQcm9maWxpbmdIb29rcy5tYXJrU3RhdGVVcGRhdGVTY2hlZHVsZWQgJiYgaW5qZWN0ZWRQcm9maWxpbmdIb29rcy5tYXJrU3RhdGVVcGRhdGVTY2hlZHVsZWQoZmliZXIsIGxhbmUpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNsejMyRmFsbGJhY2soeCkgewogICAgICAgIHggPj4+PSAwOwogICAgICAgIHJldHVybiAwID09PSB4ID8gMzIgOiAzMSAtIChsb2coeCkgLyBMTjIgfCAwKSB8IDA7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0TGFiZWxGb3JMYW5lKGxhbmUpIHsKICAgICAgICBpZiAobGFuZSAmIDEpIHJldHVybiAiU3luY0h5ZHJhdGlvbkxhbmUiOwogICAgICAgIGlmIChsYW5lICYgMikgcmV0dXJuICJTeW5jIjsKICAgICAgICBpZiAobGFuZSAmIDQpIHJldHVybiAiSW5wdXRDb250aW51b3VzSHlkcmF0aW9uIjsKICAgICAgICBpZiAobGFuZSAmIDgpIHJldHVybiAiSW5wdXRDb250aW51b3VzIjsKICAgICAgICBpZiAobGFuZSAmIDE2KSByZXR1cm4gIkRlZmF1bHRIeWRyYXRpb24iOwogICAgICAgIGlmIChsYW5lICYgMzIpIHJldHVybiAiRGVmYXVsdCI7CiAgICAgICAgaWYgKGxhbmUgJiAxMjgpIHJldHVybiAiVHJhbnNpdGlvbkh5ZHJhdGlvbiI7CiAgICAgICAgaWYgKGxhbmUgJiA0MTk0MDQ4KSByZXR1cm4gIlRyYW5zaXRpb24iOwogICAgICAgIGlmIChsYW5lICYgNjI5MTQ1NjApIHJldHVybiAiUmV0cnkiOwogICAgICAgIGlmIChsYW5lICYgNjcxMDg4NjQpIHJldHVybiAiU2VsZWN0aXZlSHlkcmF0aW9uIjsKICAgICAgICBpZiAobGFuZSAmIDEzNDIxNzcyOCkgcmV0dXJuICJJZGxlSHlkcmF0aW9uIjsKICAgICAgICBpZiAobGFuZSAmIDI2ODQzNTQ1NikgcmV0dXJuICJJZGxlIjsKICAgICAgICBpZiAobGFuZSAmIDUzNjg3MDkxMikgcmV0dXJuICJPZmZzY3JlZW4iOwogICAgICAgIGlmIChsYW5lICYgMTA3Mzc0MTgyNCkgcmV0dXJuICJEZWZlcnJlZCI7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0SGlnaGVzdFByaW9yaXR5TGFuZXMobGFuZXMpIHsKICAgICAgICB2YXIgcGVuZGluZ1N5bmNMYW5lcyA9IGxhbmVzICYgNDI7CiAgICAgICAgaWYgKDAgIT09IHBlbmRpbmdTeW5jTGFuZXMpIHJldHVybiBwZW5kaW5nU3luY0xhbmVzOwogICAgICAgIHN3aXRjaCAobGFuZXMgJiAtbGFuZXMpIHsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiAyOwogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICByZXR1cm4gNDsKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgcmV0dXJuIDg7CiAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICByZXR1cm4gMTY7CiAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICByZXR1cm4gMzI7CiAgICAgICAgICBjYXNlIDY0OgogICAgICAgICAgICByZXR1cm4gNjQ7CiAgICAgICAgICBjYXNlIDEyODoKICAgICAgICAgICAgcmV0dXJuIDEyODsKICAgICAgICAgIGNhc2UgMjU2OgogICAgICAgICAgY2FzZSA1MTI6CiAgICAgICAgICBjYXNlIDEwMjQ6CiAgICAgICAgICBjYXNlIDIwNDg6CiAgICAgICAgICBjYXNlIDQwOTY6CiAgICAgICAgICBjYXNlIDgxOTI6CiAgICAgICAgICBjYXNlIDE2Mzg0OgogICAgICAgICAgY2FzZSAzMjc2ODoKICAgICAgICAgIGNhc2UgNjU1MzY6CiAgICAgICAgICBjYXNlIDEzMTA3MjoKICAgICAgICAgIGNhc2UgMjYyMTQ0OgogICAgICAgICAgY2FzZSA1MjQyODg6CiAgICAgICAgICBjYXNlIDEwNDg1NzY6CiAgICAgICAgICBjYXNlIDIwOTcxNTI6CiAgICAgICAgICAgIHJldHVybiBsYW5lcyAmIDQxOTQwNDg7CiAgICAgICAgICBjYXNlIDQxOTQzMDQ6CiAgICAgICAgICBjYXNlIDgzODg2MDg6CiAgICAgICAgICBjYXNlIDE2Nzc3MjE2OgogICAgICAgICAgY2FzZSAzMzU1NDQzMjoKICAgICAgICAgICAgcmV0dXJuIGxhbmVzICYgNjI5MTQ1NjA7CiAgICAgICAgICBjYXNlIDY3MTA4ODY0OgogICAgICAgICAgICByZXR1cm4gNjcxMDg4NjQ7CiAgICAgICAgICBjYXNlIDEzNDIxNzcyODoKICAgICAgICAgICAgcmV0dXJuIDEzNDIxNzcyODsKICAgICAgICAgIGNhc2UgMjY4NDM1NDU2OgogICAgICAgICAgICByZXR1cm4gMjY4NDM1NDU2OwogICAgICAgICAgY2FzZSA1MzY4NzA5MTI6CiAgICAgICAgICAgIHJldHVybiA1MzY4NzA5MTI7CiAgICAgICAgICBjYXNlIDEwNzM3NDE4MjQ6CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgIlNob3VsZCBoYXZlIGZvdW5kIG1hdGNoaW5nIGxhbmVzLiBUaGlzIGlzIGEgYnVnIGluIFJlYWN0LiIKICAgICAgICAgICAgKSwgbGFuZXM7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldE5leHRMYW5lcyhyb290Miwgd2lwTGFuZXMsIHJvb3RIYXNQZW5kaW5nQ29tbWl0KSB7CiAgICAgICAgdmFyIHBlbmRpbmdMYW5lcyA9IHJvb3QyLnBlbmRpbmdMYW5lczsKICAgICAgICBpZiAoMCA9PT0gcGVuZGluZ0xhbmVzKSByZXR1cm4gMDsKICAgICAgICB2YXIgbmV4dExhbmVzID0gMCwgc3VzcGVuZGVkTGFuZXMgPSByb290Mi5zdXNwZW5kZWRMYW5lcywgcGluZ2VkTGFuZXMgPSByb290Mi5waW5nZWRMYW5lczsKICAgICAgICByb290MiA9IHJvb3QyLndhcm1MYW5lczsKICAgICAgICB2YXIgbm9uSWRsZVBlbmRpbmdMYW5lcyA9IHBlbmRpbmdMYW5lcyAmIDEzNDIxNzcyNzsKICAgICAgICAwICE9PSBub25JZGxlUGVuZGluZ0xhbmVzID8gKHBlbmRpbmdMYW5lcyA9IG5vbklkbGVQZW5kaW5nTGFuZXMgJiB+c3VzcGVuZGVkTGFuZXMsIDAgIT09IHBlbmRpbmdMYW5lcyA/IG5leHRMYW5lcyA9IGdldEhpZ2hlc3RQcmlvcml0eUxhbmVzKHBlbmRpbmdMYW5lcykgOiAocGluZ2VkTGFuZXMgJj0gbm9uSWRsZVBlbmRpbmdMYW5lcywgMCAhPT0gcGluZ2VkTGFuZXMgPyBuZXh0TGFuZXMgPSBnZXRIaWdoZXN0UHJpb3JpdHlMYW5lcyhwaW5nZWRMYW5lcykgOiByb290SGFzUGVuZGluZ0NvbW1pdCB8fCAocm9vdEhhc1BlbmRpbmdDb21taXQgPSBub25JZGxlUGVuZGluZ0xhbmVzICYgfnJvb3QyLCAwICE9PSByb290SGFzUGVuZGluZ0NvbW1pdCAmJiAobmV4dExhbmVzID0gZ2V0SGlnaGVzdFByaW9yaXR5TGFuZXMocm9vdEhhc1BlbmRpbmdDb21taXQpKSkpKSA6IChub25JZGxlUGVuZGluZ0xhbmVzID0gcGVuZGluZ0xhbmVzICYgfnN1c3BlbmRlZExhbmVzLCAwICE9PSBub25JZGxlUGVuZGluZ0xhbmVzID8gbmV4dExhbmVzID0gZ2V0SGlnaGVzdFByaW9yaXR5TGFuZXMobm9uSWRsZVBlbmRpbmdMYW5lcykgOiAwICE9PSBwaW5nZWRMYW5lcyA/IG5leHRMYW5lcyA9IGdldEhpZ2hlc3RQcmlvcml0eUxhbmVzKHBpbmdlZExhbmVzKSA6IHJvb3RIYXNQZW5kaW5nQ29tbWl0IHx8IChyb290SGFzUGVuZGluZ0NvbW1pdCA9IHBlbmRpbmdMYW5lcyAmIH5yb290MiwgMCAhPT0gcm9vdEhhc1BlbmRpbmdDb21taXQgJiYgKG5leHRMYW5lcyA9IGdldEhpZ2hlc3RQcmlvcml0eUxhbmVzKHJvb3RIYXNQZW5kaW5nQ29tbWl0KSkpKTsKICAgICAgICByZXR1cm4gMCA9PT0gbmV4dExhbmVzID8gMCA6IDAgIT09IHdpcExhbmVzICYmIHdpcExhbmVzICE9PSBuZXh0TGFuZXMgJiYgMCA9PT0gKHdpcExhbmVzICYgc3VzcGVuZGVkTGFuZXMpICYmIChzdXNwZW5kZWRMYW5lcyA9IG5leHRMYW5lcyAmIC1uZXh0TGFuZXMsIHJvb3RIYXNQZW5kaW5nQ29tbWl0ID0gd2lwTGFuZXMgJiAtd2lwTGFuZXMsIHN1c3BlbmRlZExhbmVzID49IHJvb3RIYXNQZW5kaW5nQ29tbWl0IHx8IDMyID09PSBzdXNwZW5kZWRMYW5lcyAmJiAwICE9PSAocm9vdEhhc1BlbmRpbmdDb21taXQgJiA0MTk0MDQ4KSkgPyB3aXBMYW5lcyA6IG5leHRMYW5lczsKICAgICAgfQogICAgICBmdW5jdGlvbiBjaGVja0lmUm9vdElzUHJlcmVuZGVyaW5nKHJvb3QyLCByZW5kZXJMYW5lczIpIHsKICAgICAgICByZXR1cm4gMCA9PT0gKHJvb3QyLnBlbmRpbmdMYW5lcyAmIH4ocm9vdDIuc3VzcGVuZGVkTGFuZXMgJiB+cm9vdDIucGluZ2VkTGFuZXMpICYgcmVuZGVyTGFuZXMyKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjb21wdXRlRXhwaXJhdGlvblRpbWUobGFuZSwgY3VycmVudFRpbWUpIHsKICAgICAgICBzd2l0Y2ggKGxhbmUpIHsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgIGNhc2UgNjQ6CiAgICAgICAgICAgIHJldHVybiBjdXJyZW50VGltZSArIDI1MDsKICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgY2FzZSAxMjg6CiAgICAgICAgICBjYXNlIDI1NjoKICAgICAgICAgIGNhc2UgNTEyOgogICAgICAgICAgY2FzZSAxMDI0OgogICAgICAgICAgY2FzZSAyMDQ4OgogICAgICAgICAgY2FzZSA0MDk2OgogICAgICAgICAgY2FzZSA4MTkyOgogICAgICAgICAgY2FzZSAxNjM4NDoKICAgICAgICAgIGNhc2UgMzI3Njg6CiAgICAgICAgICBjYXNlIDY1NTM2OgogICAgICAgICAgY2FzZSAxMzEwNzI6CiAgICAgICAgICBjYXNlIDI2MjE0NDoKICAgICAgICAgIGNhc2UgNTI0Mjg4OgogICAgICAgICAgY2FzZSAxMDQ4NTc2OgogICAgICAgICAgY2FzZSAyMDk3MTUyOgogICAgICAgICAgICByZXR1cm4gY3VycmVudFRpbWUgKyA1ZTM7CiAgICAgICAgICBjYXNlIDQxOTQzMDQ6CiAgICAgICAgICBjYXNlIDgzODg2MDg6CiAgICAgICAgICBjYXNlIDE2Nzc3MjE2OgogICAgICAgICAgY2FzZSAzMzU1NDQzMjoKICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgY2FzZSA2NzEwODg2NDoKICAgICAgICAgIGNhc2UgMTM0MjE3NzI4OgogICAgICAgICAgY2FzZSAyNjg0MzU0NTY6CiAgICAgICAgICBjYXNlIDUzNjg3MDkxMjoKICAgICAgICAgIGNhc2UgMTA3Mzc0MTgyNDoKICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgIlNob3VsZCBoYXZlIGZvdW5kIG1hdGNoaW5nIGxhbmVzLiBUaGlzIGlzIGEgYnVnIGluIFJlYWN0LiIKICAgICAgICAgICAgKSwgLTE7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNsYWltTmV4dFRyYW5zaXRpb25MYW5lKCkgewogICAgICAgIHZhciBsYW5lID0gbmV4dFRyYW5zaXRpb25MYW5lOwogICAgICAgIG5leHRUcmFuc2l0aW9uTGFuZSA8PD0gMTsKICAgICAgICAwID09PSAobmV4dFRyYW5zaXRpb25MYW5lICYgNDE5NDA0OCkgJiYgKG5leHRUcmFuc2l0aW9uTGFuZSA9IDI1Nik7CiAgICAgICAgcmV0dXJuIGxhbmU7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY2xhaW1OZXh0UmV0cnlMYW5lKCkgewogICAgICAgIHZhciBsYW5lID0gbmV4dFJldHJ5TGFuZTsKICAgICAgICBuZXh0UmV0cnlMYW5lIDw8PSAxOwogICAgICAgIDAgPT09IChuZXh0UmV0cnlMYW5lICYgNjI5MTQ1NjApICYmIChuZXh0UmV0cnlMYW5lID0gNDE5NDMwNCk7CiAgICAgICAgcmV0dXJuIGxhbmU7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY3JlYXRlTGFuZU1hcChpbml0aWFsKSB7CiAgICAgICAgZm9yICh2YXIgbGFuZU1hcCA9IFtdLCBpID0gMDsgMzEgPiBpOyBpKyspIGxhbmVNYXAucHVzaChpbml0aWFsKTsKICAgICAgICByZXR1cm4gbGFuZU1hcDsKICAgICAgfQogICAgICBmdW5jdGlvbiBtYXJrUm9vdFVwZGF0ZWQkMShyb290MiwgdXBkYXRlTGFuZSkgewogICAgICAgIHJvb3QyLnBlbmRpbmdMYW5lcyB8PSB1cGRhdGVMYW5lOwogICAgICAgIDI2ODQzNTQ1NiAhPT0gdXBkYXRlTGFuZSAmJiAocm9vdDIuc3VzcGVuZGVkTGFuZXMgPSAwLCByb290Mi5waW5nZWRMYW5lcyA9IDAsIHJvb3QyLndhcm1MYW5lcyA9IDApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1hcmtSb290RmluaXNoZWQocm9vdDIsIGZpbmlzaGVkTGFuZXMsIHJlbWFpbmluZ0xhbmVzLCBzcGF3bmVkTGFuZSwgdXBkYXRlZExhbmVzLCBzdXNwZW5kZWRSZXRyeUxhbmVzKSB7CiAgICAgICAgdmFyIHByZXZpb3VzbHlQZW5kaW5nTGFuZXMgPSByb290Mi5wZW5kaW5nTGFuZXM7CiAgICAgICAgcm9vdDIucGVuZGluZ0xhbmVzID0gcmVtYWluaW5nTGFuZXM7CiAgICAgICAgcm9vdDIuc3VzcGVuZGVkTGFuZXMgPSAwOwogICAgICAgIHJvb3QyLnBpbmdlZExhbmVzID0gMDsKICAgICAgICByb290Mi53YXJtTGFuZXMgPSAwOwogICAgICAgIHJvb3QyLmV4cGlyZWRMYW5lcyAmPSByZW1haW5pbmdMYW5lczsKICAgICAgICByb290Mi5lbnRhbmdsZWRMYW5lcyAmPSByZW1haW5pbmdMYW5lczsKICAgICAgICByb290Mi5lcnJvclJlY292ZXJ5RGlzYWJsZWRMYW5lcyAmPSByZW1haW5pbmdMYW5lczsKICAgICAgICByb290Mi5zaGVsbFN1c3BlbmRDb3VudGVyID0gMDsKICAgICAgICB2YXIgZW50YW5nbGVtZW50cyA9IHJvb3QyLmVudGFuZ2xlbWVudHMsIGV4cGlyYXRpb25UaW1lcyA9IHJvb3QyLmV4cGlyYXRpb25UaW1lcywgaGlkZGVuVXBkYXRlcyA9IHJvb3QyLmhpZGRlblVwZGF0ZXM7CiAgICAgICAgZm9yIChyZW1haW5pbmdMYW5lcyA9IHByZXZpb3VzbHlQZW5kaW5nTGFuZXMgJiB+cmVtYWluaW5nTGFuZXM7IDAgPCByZW1haW5pbmdMYW5lczsgKSB7CiAgICAgICAgICB2YXIgaW5kZXggPSAzMSAtIGNsejMyKHJlbWFpbmluZ0xhbmVzKSwgbGFuZSA9IDEgPDwgaW5kZXg7CiAgICAgICAgICBlbnRhbmdsZW1lbnRzW2luZGV4XSA9IDA7CiAgICAgICAgICBleHBpcmF0aW9uVGltZXNbaW5kZXhdID0gLTE7CiAgICAgICAgICB2YXIgaGlkZGVuVXBkYXRlc0ZvckxhbmUgPSBoaWRkZW5VcGRhdGVzW2luZGV4XTsKICAgICAgICAgIGlmIChudWxsICE9PSBoaWRkZW5VcGRhdGVzRm9yTGFuZSkKICAgICAgICAgICAgZm9yIChoaWRkZW5VcGRhdGVzW2luZGV4XSA9IG51bGwsIGluZGV4ID0gMDsgaW5kZXggPCBoaWRkZW5VcGRhdGVzRm9yTGFuZS5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgICB2YXIgdXBkYXRlID0gaGlkZGVuVXBkYXRlc0ZvckxhbmVbaW5kZXhdOwogICAgICAgICAgICAgIG51bGwgIT09IHVwZGF0ZSAmJiAodXBkYXRlLmxhbmUgJj0gLTUzNjg3MDkxMyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIHJlbWFpbmluZ0xhbmVzICY9IH5sYW5lOwogICAgICAgIH0KICAgICAgICAwICE9PSBzcGF3bmVkTGFuZSAmJiBtYXJrU3Bhd25lZERlZmVycmVkTGFuZShyb290Miwgc3Bhd25lZExhbmUsIDApOwogICAgICAgIDAgIT09IHN1c3BlbmRlZFJldHJ5TGFuZXMgJiYgMCA9PT0gdXBkYXRlZExhbmVzICYmIDAgIT09IHJvb3QyLnRhZyAmJiAocm9vdDIuc3VzcGVuZGVkTGFuZXMgfD0gc3VzcGVuZGVkUmV0cnlMYW5lcyAmIH4ocHJldmlvdXNseVBlbmRpbmdMYW5lcyAmIH5maW5pc2hlZExhbmVzKSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbWFya1NwYXduZWREZWZlcnJlZExhbmUocm9vdDIsIHNwYXduZWRMYW5lLCBlbnRhbmdsZWRMYW5lcykgewogICAgICAgIHJvb3QyLnBlbmRpbmdMYW5lcyB8PSBzcGF3bmVkTGFuZTsKICAgICAgICByb290Mi5zdXNwZW5kZWRMYW5lcyAmPSB+c3Bhd25lZExhbmU7CiAgICAgICAgdmFyIHNwYXduZWRMYW5lSW5kZXggPSAzMSAtIGNsejMyKHNwYXduZWRMYW5lKTsKICAgICAgICByb290Mi5lbnRhbmdsZWRMYW5lcyB8PSBzcGF3bmVkTGFuZTsKICAgICAgICByb290Mi5lbnRhbmdsZW1lbnRzW3NwYXduZWRMYW5lSW5kZXhdID0gcm9vdDIuZW50YW5nbGVtZW50c1tzcGF3bmVkTGFuZUluZGV4XSB8IDEwNzM3NDE4MjQgfCBlbnRhbmdsZWRMYW5lcyAmIDQxOTQwOTA7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbWFya1Jvb3RFbnRhbmdsZWQocm9vdDIsIGVudGFuZ2xlZExhbmVzKSB7CiAgICAgICAgdmFyIHJvb3RFbnRhbmdsZWRMYW5lcyA9IHJvb3QyLmVudGFuZ2xlZExhbmVzIHw9IGVudGFuZ2xlZExhbmVzOwogICAgICAgIGZvciAocm9vdDIgPSByb290Mi5lbnRhbmdsZW1lbnRzOyByb290RW50YW5nbGVkTGFuZXM7ICkgewogICAgICAgICAgdmFyIGluZGV4ID0gMzEgLSBjbHozMihyb290RW50YW5nbGVkTGFuZXMpLCBsYW5lID0gMSA8PCBpbmRleDsKICAgICAgICAgIGxhbmUgJiBlbnRhbmdsZWRMYW5lcyB8IHJvb3QyW2luZGV4XSAmIGVudGFuZ2xlZExhbmVzICYmIChyb290MltpbmRleF0gfD0gZW50YW5nbGVkTGFuZXMpOwogICAgICAgICAgcm9vdEVudGFuZ2xlZExhbmVzICY9IH5sYW5lOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBnZXRCdW1wZWRMYW5lRm9ySHlkcmF0aW9uQnlMYW5lKGxhbmUpIHsKICAgICAgICBzd2l0Y2ggKGxhbmUpIHsKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgbGFuZSA9IDE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBsYW5lID0gNDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICBsYW5lID0gMTY7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAyNTY6CiAgICAgICAgICBjYXNlIDUxMjoKICAgICAgICAgIGNhc2UgMTAyNDoKICAgICAgICAgIGNhc2UgMjA0ODoKICAgICAgICAgIGNhc2UgNDA5NjoKICAgICAgICAgIGNhc2UgODE5MjoKICAgICAgICAgIGNhc2UgMTYzODQ6CiAgICAgICAgICBjYXNlIDMyNzY4OgogICAgICAgICAgY2FzZSA2NTUzNjoKICAgICAgICAgIGNhc2UgMTMxMDcyOgogICAgICAgICAgY2FzZSAyNjIxNDQ6CiAgICAgICAgICBjYXNlIDUyNDI4ODoKICAgICAgICAgIGNhc2UgMTA0ODU3NjoKICAgICAgICAgIGNhc2UgMjA5NzE1MjoKICAgICAgICAgIGNhc2UgNDE5NDMwNDoKICAgICAgICAgIGNhc2UgODM4ODYwODoKICAgICAgICAgIGNhc2UgMTY3NzcyMTY6CiAgICAgICAgICBjYXNlIDMzNTU0NDMyOgogICAgICAgICAgICBsYW5lID0gMTI4OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMjY4NDM1NDU2OgogICAgICAgICAgICBsYW5lID0gMTM0MjE3NzI4OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIGxhbmUgPSAwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbGFuZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBhZGRGaWJlclRvTGFuZXNNYXAocm9vdDIsIGZpYmVyLCBsYW5lcykgewogICAgICAgIGlmIChpc0RldlRvb2xzUHJlc2VudCkKICAgICAgICAgIGZvciAocm9vdDIgPSByb290Mi5wZW5kaW5nVXBkYXRlcnNMYW5lTWFwOyAwIDwgbGFuZXM7ICkgewogICAgICAgICAgICB2YXIgaW5kZXggPSAzMSAtIGNsejMyKGxhbmVzKSwgbGFuZSA9IDEgPDwgaW5kZXg7CiAgICAgICAgICAgIHJvb3QyW2luZGV4XS5hZGQoZmliZXIpOwogICAgICAgICAgICBsYW5lcyAmPSB+bGFuZTsKICAgICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBtb3ZlUGVuZGluZ0ZpYmVyc1RvTWVtb2l6ZWQocm9vdDIsIGxhbmVzKSB7CiAgICAgICAgaWYgKGlzRGV2VG9vbHNQcmVzZW50KQogICAgICAgICAgZm9yICh2YXIgcGVuZGluZ1VwZGF0ZXJzTGFuZU1hcCA9IHJvb3QyLnBlbmRpbmdVcGRhdGVyc0xhbmVNYXAsIG1lbW9pemVkVXBkYXRlcnMgPSByb290Mi5tZW1vaXplZFVwZGF0ZXJzOyAwIDwgbGFuZXM7ICkgewogICAgICAgICAgICB2YXIgaW5kZXggPSAzMSAtIGNsejMyKGxhbmVzKTsKICAgICAgICAgICAgcm9vdDIgPSAxIDw8IGluZGV4OwogICAgICAgICAgICBpbmRleCA9IHBlbmRpbmdVcGRhdGVyc0xhbmVNYXBbaW5kZXhdOwogICAgICAgICAgICAwIDwgaW5kZXguc2l6ZSAmJiAoaW5kZXguZm9yRWFjaChmdW5jdGlvbihmaWJlcikgewogICAgICAgICAgICAgIHZhciBhbHRlcm5hdGUgPSBmaWJlci5hbHRlcm5hdGU7CiAgICAgICAgICAgICAgbnVsbCAhPT0gYWx0ZXJuYXRlICYmIG1lbW9pemVkVXBkYXRlcnMuaGFzKGFsdGVybmF0ZSkgfHwgbWVtb2l6ZWRVcGRhdGVycy5hZGQoZmliZXIpOwogICAgICAgICAgICB9KSwgaW5kZXguY2xlYXIoKSk7CiAgICAgICAgICAgIGxhbmVzICY9IH5yb290MjsKICAgICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBsYW5lc1RvRXZlbnRQcmlvcml0eShsYW5lcykgewogICAgICAgIGxhbmVzICY9IC1sYW5lczsKICAgICAgICByZXR1cm4gMCAhPT0gRGlzY3JldGVFdmVudFByaW9yaXR5ICYmIERpc2NyZXRlRXZlbnRQcmlvcml0eSA8IGxhbmVzID8gMCAhPT0gQ29udGludW91c0V2ZW50UHJpb3JpdHkgJiYgQ29udGludW91c0V2ZW50UHJpb3JpdHkgPCBsYW5lcyA/IDAgIT09IChsYW5lcyAmIDEzNDIxNzcyNykgPyBEZWZhdWx0RXZlbnRQcmlvcml0eSA6IElkbGVFdmVudFByaW9yaXR5IDogQ29udGludW91c0V2ZW50UHJpb3JpdHkgOiBEaXNjcmV0ZUV2ZW50UHJpb3JpdHk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmVzb2x2ZVVwZGF0ZVByaW9yaXR5KCkgewogICAgICAgIHZhciB1cGRhdGVQcmlvcml0eSA9IFJlYWN0RE9NU2hhcmVkSW50ZXJuYWxzLnA7CiAgICAgICAgaWYgKDAgIT09IHVwZGF0ZVByaW9yaXR5KSByZXR1cm4gdXBkYXRlUHJpb3JpdHk7CiAgICAgICAgdXBkYXRlUHJpb3JpdHkgPSB3aW5kb3cuZXZlbnQ7CiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdXBkYXRlUHJpb3JpdHkgPyBEZWZhdWx0RXZlbnRQcmlvcml0eSA6IGdldEV2ZW50UHJpb3JpdHkodXBkYXRlUHJpb3JpdHkudHlwZSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcnVuV2l0aFByaW9yaXR5KHByaW9yaXR5LCBmbikgewogICAgICAgIHZhciBwcmV2aW91c1ByaW9yaXR5ID0gUmVhY3RET01TaGFyZWRJbnRlcm5hbHMucDsKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuIFJlYWN0RE9NU2hhcmVkSW50ZXJuYWxzLnAgPSBwcmlvcml0eSwgZm4oKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgUmVhY3RET01TaGFyZWRJbnRlcm5hbHMucCA9IHByZXZpb3VzUHJpb3JpdHk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGRldGFjaERlbGV0ZWRJbnN0YW5jZShub2RlKSB7CiAgICAgICAgZGVsZXRlIG5vZGVbaW50ZXJuYWxJbnN0YW5jZUtleV07CiAgICAgICAgZGVsZXRlIG5vZGVbaW50ZXJuYWxQcm9wc0tleV07CiAgICAgICAgZGVsZXRlIG5vZGVbaW50ZXJuYWxFdmVudEhhbmRsZXJzS2V5XTsKICAgICAgICBkZWxldGUgbm9kZVtpbnRlcm5hbEV2ZW50SGFuZGxlckxpc3RlbmVyc0tleV07CiAgICAgICAgZGVsZXRlIG5vZGVbaW50ZXJuYWxFdmVudEhhbmRsZXNTZXRLZXldOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldENsb3Nlc3RJbnN0YW5jZUZyb21Ob2RlKHRhcmdldE5vZGUpIHsKICAgICAgICB2YXIgdGFyZ2V0SW5zdCA9IHRhcmdldE5vZGVbaW50ZXJuYWxJbnN0YW5jZUtleV07CiAgICAgICAgaWYgKHRhcmdldEluc3QpIHJldHVybiB0YXJnZXRJbnN0OwogICAgICAgIGZvciAodmFyIHBhcmVudE5vZGUgPSB0YXJnZXROb2RlLnBhcmVudE5vZGU7IHBhcmVudE5vZGU7ICkgewogICAgICAgICAgaWYgKHRhcmdldEluc3QgPSBwYXJlbnROb2RlW2ludGVybmFsQ29udGFpbmVySW5zdGFuY2VLZXldIHx8IHBhcmVudE5vZGVbaW50ZXJuYWxJbnN0YW5jZUtleV0pIHsKICAgICAgICAgICAgcGFyZW50Tm9kZSA9IHRhcmdldEluc3QuYWx0ZXJuYXRlOwogICAgICAgICAgICBpZiAobnVsbCAhPT0gdGFyZ2V0SW5zdC5jaGlsZCB8fCBudWxsICE9PSBwYXJlbnROb2RlICYmIG51bGwgIT09IHBhcmVudE5vZGUuY2hpbGQpCiAgICAgICAgICAgICAgZm9yICh0YXJnZXROb2RlID0gZ2V0UGFyZW50U3VzcGVuc2VJbnN0YW5jZSh0YXJnZXROb2RlKTsgbnVsbCAhPT0gdGFyZ2V0Tm9kZTsgKSB7CiAgICAgICAgICAgICAgICBpZiAocGFyZW50Tm9kZSA9IHRhcmdldE5vZGVbaW50ZXJuYWxJbnN0YW5jZUtleV0pCiAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJlbnROb2RlOwogICAgICAgICAgICAgICAgdGFyZ2V0Tm9kZSA9IGdldFBhcmVudFN1c3BlbnNlSW5zdGFuY2UodGFyZ2V0Tm9kZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGFyZ2V0SW5zdDsKICAgICAgICAgIH0KICAgICAgICAgIHRhcmdldE5vZGUgPSBwYXJlbnROb2RlOwogICAgICAgICAgcGFyZW50Tm9kZSA9IHRhcmdldE5vZGUucGFyZW50Tm9kZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0SW5zdGFuY2VGcm9tTm9kZShub2RlKSB7CiAgICAgICAgaWYgKG5vZGUgPSBub2RlW2ludGVybmFsSW5zdGFuY2VLZXldIHx8IG5vZGVbaW50ZXJuYWxDb250YWluZXJJbnN0YW5jZUtleV0pIHsKICAgICAgICAgIHZhciB0YWcgPSBub2RlLnRhZzsKICAgICAgICAgIGlmICg1ID09PSB0YWcgfHwgNiA9PT0gdGFnIHx8IDEzID09PSB0YWcgfHwgMjYgPT09IHRhZyB8fCAyNyA9PT0gdGFnIHx8IDMgPT09IHRhZykKICAgICAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldE5vZGVGcm9tSW5zdGFuY2UoaW5zdCkgewogICAgICAgIHZhciB0YWcgPSBpbnN0LnRhZzsKICAgICAgICBpZiAoNSA9PT0gdGFnIHx8IDI2ID09PSB0YWcgfHwgMjcgPT09IHRhZyB8fCA2ID09PSB0YWcpCiAgICAgICAgICByZXR1cm4gaW5zdC5zdGF0ZU5vZGU7CiAgICAgICAgdGhyb3cgRXJyb3IoImdldE5vZGVGcm9tSW5zdGFuY2U6IEludmFsaWQgYXJndW1lbnQuIik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0UmVzb3VyY2VzRnJvbVJvb3Qocm9vdDIpIHsKICAgICAgICB2YXIgcmVzb3VyY2VzID0gcm9vdDJbaW50ZXJuYWxSb290Tm9kZVJlc291cmNlc0tleV07CiAgICAgICAgcmVzb3VyY2VzIHx8IChyZXNvdXJjZXMgPSByb290MltpbnRlcm5hbFJvb3ROb2RlUmVzb3VyY2VzS2V5XSA9IHsgaG9pc3RhYmxlU3R5bGVzOiAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpLCBob2lzdGFibGVTY3JpcHRzOiAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpIH0pOwogICAgICAgIHJldHVybiByZXNvdXJjZXM7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbWFya05vZGVBc0hvaXN0YWJsZShub2RlKSB7CiAgICAgICAgbm9kZVtpbnRlcm5hbEhvaXN0YWJsZU1hcmtlcl0gPSB0cnVlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyVHdvUGhhc2VFdmVudChyZWdpc3RyYXRpb25OYW1lLCBkZXBlbmRlbmNpZXMpIHsKICAgICAgICByZWdpc3RlckRpcmVjdEV2ZW50KHJlZ2lzdHJhdGlvbk5hbWUsIGRlcGVuZGVuY2llcyk7CiAgICAgICAgcmVnaXN0ZXJEaXJlY3RFdmVudChyZWdpc3RyYXRpb25OYW1lICsgIkNhcHR1cmUiLCBkZXBlbmRlbmNpZXMpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyRGlyZWN0RXZlbnQocmVnaXN0cmF0aW9uTmFtZSwgZGVwZW5kZW5jaWVzKSB7CiAgICAgICAgcmVnaXN0cmF0aW9uTmFtZURlcGVuZGVuY2llc1tyZWdpc3RyYXRpb25OYW1lXSAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgIkV2ZW50UmVnaXN0cnk6IE1vcmUgdGhhbiBvbmUgcGx1Z2luIGF0dGVtcHRlZCB0byBwdWJsaXNoIHRoZSBzYW1lIHJlZ2lzdHJhdGlvbiBuYW1lLCBgJXNgLiIsCiAgICAgICAgICByZWdpc3RyYXRpb25OYW1lCiAgICAgICAgKTsKICAgICAgICByZWdpc3RyYXRpb25OYW1lRGVwZW5kZW5jaWVzW3JlZ2lzdHJhdGlvbk5hbWVdID0gZGVwZW5kZW5jaWVzOwogICAgICAgIHZhciBsb3dlckNhc2VkTmFtZSA9IHJlZ2lzdHJhdGlvbk5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgICBwb3NzaWJsZVJlZ2lzdHJhdGlvbk5hbWVzW2xvd2VyQ2FzZWROYW1lXSA9IHJlZ2lzdHJhdGlvbk5hbWU7CiAgICAgICAgIm9uRG91YmxlQ2xpY2siID09PSByZWdpc3RyYXRpb25OYW1lICYmIChwb3NzaWJsZVJlZ2lzdHJhdGlvbk5hbWVzLm9uZGJsY2xpY2sgPSByZWdpc3RyYXRpb25OYW1lKTsKICAgICAgICBmb3IgKHJlZ2lzdHJhdGlvbk5hbWUgPSAwOyByZWdpc3RyYXRpb25OYW1lIDwgZGVwZW5kZW5jaWVzLmxlbmd0aDsgcmVnaXN0cmF0aW9uTmFtZSsrKQogICAgICAgICAgYWxsTmF0aXZlRXZlbnRzLmFkZChkZXBlbmRlbmNpZXNbcmVnaXN0cmF0aW9uTmFtZV0pOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNoZWNrQ29udHJvbGxlZFZhbHVlUHJvcHModGFnTmFtZSwgcHJvcHMpIHsKICAgICAgICBoYXNSZWFkT25seVZhbHVlW3Byb3BzLnR5cGVdIHx8IHByb3BzLm9uQ2hhbmdlIHx8IHByb3BzLm9uSW5wdXQgfHwgcHJvcHMucmVhZE9ubHkgfHwgcHJvcHMuZGlzYWJsZWQgfHwgbnVsbCA9PSBwcm9wcy52YWx1ZSB8fCAoInNlbGVjdCIgPT09IHRhZ05hbWUgPyBjb25zb2xlLmVycm9yKAogICAgICAgICAgIllvdSBwcm92aWRlZCBhIGB2YWx1ZWAgcHJvcCB0byBhIGZvcm0gZmllbGQgd2l0aG91dCBhbiBgb25DaGFuZ2VgIGhhbmRsZXIuIFRoaXMgd2lsbCByZW5kZXIgYSByZWFkLW9ubHkgZmllbGQuIElmIHRoZSBmaWVsZCBzaG91bGQgYmUgbXV0YWJsZSB1c2UgYGRlZmF1bHRWYWx1ZWAuIE90aGVyd2lzZSwgc2V0IGBvbkNoYW5nZWAuIgogICAgICAgICkgOiBjb25zb2xlLmVycm9yKAogICAgICAgICAgIllvdSBwcm92aWRlZCBhIGB2YWx1ZWAgcHJvcCB0byBhIGZvcm0gZmllbGQgd2l0aG91dCBhbiBgb25DaGFuZ2VgIGhhbmRsZXIuIFRoaXMgd2lsbCByZW5kZXIgYSByZWFkLW9ubHkgZmllbGQuIElmIHRoZSBmaWVsZCBzaG91bGQgYmUgbXV0YWJsZSB1c2UgYGRlZmF1bHRWYWx1ZWAuIE90aGVyd2lzZSwgc2V0IGVpdGhlciBgb25DaGFuZ2VgIG9yIGByZWFkT25seWAuIgogICAgICAgICkpOwogICAgICAgIHByb3BzLm9uQ2hhbmdlIHx8IHByb3BzLnJlYWRPbmx5IHx8IHByb3BzLmRpc2FibGVkIHx8IG51bGwgPT0gcHJvcHMuY2hlY2tlZCB8fCBjb25zb2xlLmVycm9yKAogICAgICAgICAgIllvdSBwcm92aWRlZCBhIGBjaGVja2VkYCBwcm9wIHRvIGEgZm9ybSBmaWVsZCB3aXRob3V0IGFuIGBvbkNoYW5nZWAgaGFuZGxlci4gVGhpcyB3aWxsIHJlbmRlciBhIHJlYWQtb25seSBmaWVsZC4gSWYgdGhlIGZpZWxkIHNob3VsZCBiZSBtdXRhYmxlIHVzZSBgZGVmYXVsdENoZWNrZWRgLiBPdGhlcndpc2UsIHNldCBlaXRoZXIgYG9uQ2hhbmdlYCBvciBgcmVhZE9ubHlgLiIKICAgICAgICApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGlzQXR0cmlidXRlTmFtZVNhZmUoYXR0cmlidXRlTmFtZSkgewogICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbGlkYXRlZEF0dHJpYnV0ZU5hbWVDYWNoZSwgYXR0cmlidXRlTmFtZSkpCiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChpbGxlZ2FsQXR0cmlidXRlTmFtZUNhY2hlLCBhdHRyaWJ1dGVOYW1lKSkKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAoVkFMSURfQVRUUklCVVRFX05BTUVfUkVHRVgudGVzdChhdHRyaWJ1dGVOYW1lKSkKICAgICAgICAgIHJldHVybiB2YWxpZGF0ZWRBdHRyaWJ1dGVOYW1lQ2FjaGVbYXR0cmlidXRlTmFtZV0gPSB0cnVlOwogICAgICAgIGlsbGVnYWxBdHRyaWJ1dGVOYW1lQ2FjaGVbYXR0cmlidXRlTmFtZV0gPSB0cnVlOwogICAgICAgIGNvbnNvbGUuZXJyb3IoIkludmFsaWQgYXR0cmlidXRlIG5hbWU6IGAlc2AiLCBhdHRyaWJ1dGVOYW1lKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0VmFsdWVGb3JBdHRyaWJ1dGVPbkN1c3RvbUNvbXBvbmVudChub2RlLCBuYW1lLCBleHBlY3RlZCkgewogICAgICAgIGlmIChpc0F0dHJpYnV0ZU5hbWVTYWZlKG5hbWUpKSB7CiAgICAgICAgICBpZiAoIW5vZGUuaGFzQXR0cmlidXRlKG5hbWUpKSB7CiAgICAgICAgICAgIHN3aXRjaCAodHlwZW9mIGV4cGVjdGVkKSB7CiAgICAgICAgICAgICAgY2FzZSAic3ltYm9sIjoKICAgICAgICAgICAgICBjYXNlICJvYmplY3QiOgogICAgICAgICAgICAgICAgcmV0dXJuIGV4cGVjdGVkOwogICAgICAgICAgICAgIGNhc2UgImZ1bmN0aW9uIjoKICAgICAgICAgICAgICAgIHJldHVybiBleHBlY3RlZDsKICAgICAgICAgICAgICBjYXNlICJib29sZWFuIjoKICAgICAgICAgICAgICAgIGlmIChmYWxzZSA9PT0gZXhwZWN0ZWQpIHJldHVybiBleHBlY3RlZDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSBleHBlY3RlZCA/IHZvaWQgMCA6IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICBub2RlID0gbm9kZS5nZXRBdHRyaWJ1dGUobmFtZSk7CiAgICAgICAgICBpZiAoIiIgPT09IG5vZGUgJiYgdHJ1ZSA9PT0gZXhwZWN0ZWQpIHJldHVybiB0cnVlOwogICAgICAgICAgY2hlY2tBdHRyaWJ1dGVTdHJpbmdDb2VyY2lvbihleHBlY3RlZCwgbmFtZSk7CiAgICAgICAgICByZXR1cm4gbm9kZSA9PT0gIiIgKyBleHBlY3RlZCA/IGV4cGVjdGVkIDogbm9kZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gc2V0VmFsdWVGb3JBdHRyaWJ1dGUobm9kZSwgbmFtZSwgdmFsdWUpIHsKICAgICAgICBpZiAoaXNBdHRyaWJ1dGVOYW1lU2FmZShuYW1lKSkKICAgICAgICAgIGlmIChudWxsID09PSB2YWx1ZSkgbm9kZS5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHsKICAgICAgICAgICAgICBjYXNlICJ1bmRlZmluZWQiOgogICAgICAgICAgICAgIGNhc2UgImZ1bmN0aW9uIjoKICAgICAgICAgICAgICBjYXNlICJzeW1ib2wiOgogICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgY2FzZSAiYm9vbGVhbiI6CiAgICAgICAgICAgICAgICB2YXIgcHJlZml4MiA9IG5hbWUudG9Mb3dlckNhc2UoKS5zbGljZSgwLCA1KTsKICAgICAgICAgICAgICAgIGlmICgiZGF0YS0iICE9PSBwcmVmaXgyICYmICJhcmlhLSIgIT09IHByZWZpeDIpIHsKICAgICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7CiAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjaGVja0F0dHJpYnV0ZVN0cmluZ0NvZXJjaW9uKHZhbHVlLCBuYW1lKTsKICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUobmFtZSwgIiIgKyB2YWx1ZSk7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gc2V0VmFsdWVGb3JLbm93bkF0dHJpYnV0ZShub2RlLCBuYW1lLCB2YWx1ZSkgewogICAgICAgIGlmIChudWxsID09PSB2YWx1ZSkgbm9kZS5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7CiAgICAgICAgZWxzZSB7CiAgICAgICAgICBzd2l0Y2ggKHR5cGVvZiB2YWx1ZSkgewogICAgICAgICAgICBjYXNlICJ1bmRlZmluZWQiOgogICAgICAgICAgICBjYXNlICJmdW5jdGlvbiI6CiAgICAgICAgICAgIGNhc2UgInN5bWJvbCI6CiAgICAgICAgICAgIGNhc2UgImJvb2xlYW4iOgogICAgICAgICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKG5hbWUpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGNoZWNrQXR0cmlidXRlU3RyaW5nQ29lcmNpb24odmFsdWUsIG5hbWUpOwogICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUobmFtZSwgIiIgKyB2YWx1ZSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIHNldFZhbHVlRm9yTmFtZXNwYWNlZEF0dHJpYnV0ZShub2RlLCBuYW1lc3BhY2UsIG5hbWUsIHZhbHVlKSB7CiAgICAgICAgaWYgKG51bGwgPT09IHZhbHVlKSBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTsKICAgICAgICBlbHNlIHsKICAgICAgICAgIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7CiAgICAgICAgICAgIGNhc2UgInVuZGVmaW5lZCI6CiAgICAgICAgICAgIGNhc2UgImZ1bmN0aW9uIjoKICAgICAgICAgICAgY2FzZSAic3ltYm9sIjoKICAgICAgICAgICAgY2FzZSAiYm9vbGVhbiI6CiAgICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgY2hlY2tBdHRyaWJ1dGVTdHJpbmdDb2VyY2lvbih2YWx1ZSwgbmFtZSk7CiAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZU5TKG5hbWVzcGFjZSwgbmFtZSwgIiIgKyB2YWx1ZSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGRpc2FibGVkTG9nKCkgewogICAgICB9CiAgICAgIGZ1bmN0aW9uIGRpc2FibGVMb2dzKCkgewogICAgICAgIGlmICgwID09PSBkaXNhYmxlZERlcHRoKSB7CiAgICAgICAgICBwcmV2TG9nID0gY29uc29sZS5sb2c7CiAgICAgICAgICBwcmV2SW5mbyA9IGNvbnNvbGUuaW5mbzsKICAgICAgICAgIHByZXZXYXJuID0gY29uc29sZS53YXJuOwogICAgICAgICAgcHJldkVycm9yID0gY29uc29sZS5lcnJvcjsKICAgICAgICAgIHByZXZHcm91cCA9IGNvbnNvbGUuZ3JvdXA7CiAgICAgICAgICBwcmV2R3JvdXBDb2xsYXBzZWQgPSBjb25zb2xlLmdyb3VwQ29sbGFwc2VkOwogICAgICAgICAgcHJldkdyb3VwRW5kID0gY29uc29sZS5ncm91cEVuZDsKICAgICAgICAgIHZhciBwcm9wcyA9IHsKICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgICAgICB2YWx1ZTogZGlzYWJsZWRMb2csCiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICAgICAgICB9OwogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoY29uc29sZSwgewogICAgICAgICAgICBpbmZvOiBwcm9wcywKICAgICAgICAgICAgbG9nOiBwcm9wcywKICAgICAgICAgICAgd2FybjogcHJvcHMsCiAgICAgICAgICAgIGVycm9yOiBwcm9wcywKICAgICAgICAgICAgZ3JvdXA6IHByb3BzLAogICAgICAgICAgICBncm91cENvbGxhcHNlZDogcHJvcHMsCiAgICAgICAgICAgIGdyb3VwRW5kOiBwcm9wcwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGRpc2FibGVkRGVwdGgrKzsKICAgICAgfQogICAgICBmdW5jdGlvbiByZWVuYWJsZUxvZ3MoKSB7CiAgICAgICAgZGlzYWJsZWREZXB0aC0tOwogICAgICAgIGlmICgwID09PSBkaXNhYmxlZERlcHRoKSB7CiAgICAgICAgICB2YXIgcHJvcHMgPSB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfTsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGNvbnNvbGUsIHsKICAgICAgICAgICAgbG9nOiBhc3NpZ24oe30sIHByb3BzLCB7IHZhbHVlOiBwcmV2TG9nIH0pLAogICAgICAgICAgICBpbmZvOiBhc3NpZ24oe30sIHByb3BzLCB7IHZhbHVlOiBwcmV2SW5mbyB9KSwKICAgICAgICAgICAgd2FybjogYXNzaWduKHt9LCBwcm9wcywgeyB2YWx1ZTogcHJldldhcm4gfSksCiAgICAgICAgICAgIGVycm9yOiBhc3NpZ24oe30sIHByb3BzLCB7IHZhbHVlOiBwcmV2RXJyb3IgfSksCiAgICAgICAgICAgIGdyb3VwOiBhc3NpZ24oe30sIHByb3BzLCB7IHZhbHVlOiBwcmV2R3JvdXAgfSksCiAgICAgICAgICAgIGdyb3VwQ29sbGFwc2VkOiBhc3NpZ24oe30sIHByb3BzLCB7IHZhbHVlOiBwcmV2R3JvdXBDb2xsYXBzZWQgfSksCiAgICAgICAgICAgIGdyb3VwRW5kOiBhc3NpZ24oe30sIHByb3BzLCB7IHZhbHVlOiBwcmV2R3JvdXBFbmQgfSkKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICAwID4gZGlzYWJsZWREZXB0aCAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgImRpc2FibGVkRGVwdGggZmVsbCBiZWxvdyB6ZXJvLiBUaGlzIGlzIGEgYnVnIGluIFJlYWN0LiBQbGVhc2UgZmlsZSBhbiBpc3N1ZS4iCiAgICAgICAgKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBkZXNjcmliZUJ1aWx0SW5Db21wb25lbnRGcmFtZShuYW1lKSB7CiAgICAgICAgaWYgKHZvaWQgMCA9PT0gcHJlZml4KQogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdGhyb3cgRXJyb3IoKTsKICAgICAgICAgIH0gY2F0Y2ggKHgpIHsKICAgICAgICAgICAgdmFyIG1hdGNoID0geC5zdGFjay50cmltKCkubWF0Y2goL1xuKCAqKGF0ICk/KS8pOwogICAgICAgICAgICBwcmVmaXggPSBtYXRjaCAmJiBtYXRjaFsxXSB8fCAiIjsKICAgICAgICAgICAgc3VmZml4ID0gLTEgPCB4LnN0YWNrLmluZGV4T2YoIlxuICAgIGF0IikgPyAiICg8YW5vbnltb3VzPikiIDogLTEgPCB4LnN0YWNrLmluZGV4T2YoIkAiKSA/ICJAdW5rbm93bjowOjAiIDogIiI7CiAgICAgICAgICB9CiAgICAgICAgcmV0dXJuICJcbiIgKyBwcmVmaXggKyBuYW1lICsgc3VmZml4OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGRlc2NyaWJlTmF0aXZlQ29tcG9uZW50RnJhbWUoZm4sIGNvbnN0cnVjdCkgewogICAgICAgIGlmICghZm4gfHwgcmVlbnRyeSkgcmV0dXJuICIiOwogICAgICAgIHZhciBmcmFtZSA9IGNvbXBvbmVudEZyYW1lQ2FjaGUuZ2V0KGZuKTsKICAgICAgICBpZiAodm9pZCAwICE9PSBmcmFtZSkgcmV0dXJuIGZyYW1lOwogICAgICAgIHJlZW50cnkgPSB0cnVlOwogICAgICAgIGZyYW1lID0gRXJyb3IucHJlcGFyZVN0YWNrVHJhY2U7CiAgICAgICAgRXJyb3IucHJlcGFyZVN0YWNrVHJhY2UgPSB2b2lkIDA7CiAgICAgICAgdmFyIHByZXZpb3VzRGlzcGF0Y2hlcjIgPSBudWxsOwogICAgICAgIHByZXZpb3VzRGlzcGF0Y2hlcjIgPSBSZWFjdFNoYXJlZEludGVybmFscy5IOwogICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLkggPSBudWxsOwogICAgICAgIGRpc2FibGVMb2dzKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciBSdW5JblJvb3RGcmFtZSA9IHsKICAgICAgICAgICAgRGV0ZXJtaW5lQ29tcG9uZW50RnJhbWVSb290OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYgKGNvbnN0cnVjdCkgewogICAgICAgICAgICAgICAgICB2YXIgRmFrZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGYWtlLnByb3RvdHlwZSwgInByb3BzIiwgewogICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIGlmICgib2JqZWN0IiA9PT0gdHlwZW9mIFJlZmxlY3QgJiYgUmVmbGVjdC5jb25zdHJ1Y3QpIHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgUmVmbGVjdC5jb25zdHJ1Y3QoRmFrZSwgW10pOwogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHgpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250cm9sID0geDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgUmVmbGVjdC5jb25zdHJ1Y3QoZm4sIFtdLCBGYWtlKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgRmFrZS5jYWxsKCk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoeCQwKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb250cm9sID0geCQwOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBmbi5jYWxsKEZha2UucHJvdG90eXBlKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigpOwogICAgICAgICAgICAgICAgICB9IGNhdGNoICh4JDEpIHsKICAgICAgICAgICAgICAgICAgICBjb250cm9sID0geCQxOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIChGYWtlID0gZm4oKSkgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIEZha2UuY2F0Y2ggJiYgRmFrZS5jYXRjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBjYXRjaCAoc2FtcGxlKSB7CiAgICAgICAgICAgICAgICBpZiAoc2FtcGxlICYmIGNvbnRyb2wgJiYgInN0cmluZyIgPT09IHR5cGVvZiBzYW1wbGUuc3RhY2spCiAgICAgICAgICAgICAgICAgIHJldHVybiBbc2FtcGxlLnN0YWNrLCBjb250cm9sLnN0YWNrXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIFtudWxsLCBudWxsXTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICAgIFJ1bkluUm9vdEZyYW1lLkRldGVybWluZUNvbXBvbmVudEZyYW1lUm9vdC5kaXNwbGF5TmFtZSA9ICJEZXRlcm1pbmVDb21wb25lbnRGcmFtZVJvb3QiOwogICAgICAgICAgdmFyIG5hbWVQcm9wRGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoCiAgICAgICAgICAgIFJ1bkluUm9vdEZyYW1lLkRldGVybWluZUNvbXBvbmVudEZyYW1lUm9vdCwKICAgICAgICAgICAgIm5hbWUiCiAgICAgICAgICApOwogICAgICAgICAgbmFtZVByb3BEZXNjcmlwdG9yICYmIG5hbWVQcm9wRGVzY3JpcHRvci5jb25maWd1cmFibGUgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KAogICAgICAgICAgICBSdW5JblJvb3RGcmFtZS5EZXRlcm1pbmVDb21wb25lbnRGcmFtZVJvb3QsCiAgICAgICAgICAgICJuYW1lIiwKICAgICAgICAgICAgeyB2YWx1ZTogIkRldGVybWluZUNvbXBvbmVudEZyYW1lUm9vdCIgfQogICAgICAgICAgKTsKICAgICAgICAgIHZhciBfUnVuSW5Sb290RnJhbWUkRGV0ZXIgPSBSdW5JblJvb3RGcmFtZS5EZXRlcm1pbmVDb21wb25lbnRGcmFtZVJvb3QoKSwgc2FtcGxlU3RhY2sgPSBfUnVuSW5Sb290RnJhbWUkRGV0ZXJbMF0sIGNvbnRyb2xTdGFjayA9IF9SdW5JblJvb3RGcmFtZSREZXRlclsxXTsKICAgICAgICAgIGlmIChzYW1wbGVTdGFjayAmJiBjb250cm9sU3RhY2spIHsKICAgICAgICAgICAgdmFyIHNhbXBsZUxpbmVzID0gc2FtcGxlU3RhY2suc3BsaXQoIlxuIiksIGNvbnRyb2xMaW5lcyA9IGNvbnRyb2xTdGFjay5zcGxpdCgiXG4iKTsKICAgICAgICAgICAgZm9yIChfUnVuSW5Sb290RnJhbWUkRGV0ZXIgPSBuYW1lUHJvcERlc2NyaXB0b3IgPSAwOyBuYW1lUHJvcERlc2NyaXB0b3IgPCBzYW1wbGVMaW5lcy5sZW5ndGggJiYgIXNhbXBsZUxpbmVzW25hbWVQcm9wRGVzY3JpcHRvcl0uaW5jbHVkZXMoCiAgICAgICAgICAgICAgIkRldGVybWluZUNvbXBvbmVudEZyYW1lUm9vdCIKICAgICAgICAgICAgKTsgKQogICAgICAgICAgICAgIG5hbWVQcm9wRGVzY3JpcHRvcisrOwogICAgICAgICAgICBmb3IgKDsgX1J1bkluUm9vdEZyYW1lJERldGVyIDwgY29udHJvbExpbmVzLmxlbmd0aCAmJiAhY29udHJvbExpbmVzW19SdW5JblJvb3RGcmFtZSREZXRlcl0uaW5jbHVkZXMoCiAgICAgICAgICAgICAgIkRldGVybWluZUNvbXBvbmVudEZyYW1lUm9vdCIKICAgICAgICAgICAgKTsgKQogICAgICAgICAgICAgIF9SdW5JblJvb3RGcmFtZSREZXRlcisrOwogICAgICAgICAgICBpZiAobmFtZVByb3BEZXNjcmlwdG9yID09PSBzYW1wbGVMaW5lcy5sZW5ndGggfHwgX1J1bkluUm9vdEZyYW1lJERldGVyID09PSBjb250cm9sTGluZXMubGVuZ3RoKQogICAgICAgICAgICAgIGZvciAobmFtZVByb3BEZXNjcmlwdG9yID0gc2FtcGxlTGluZXMubGVuZ3RoIC0gMSwgX1J1bkluUm9vdEZyYW1lJERldGVyID0gY29udHJvbExpbmVzLmxlbmd0aCAtIDE7IDEgPD0gbmFtZVByb3BEZXNjcmlwdG9yICYmIDAgPD0gX1J1bkluUm9vdEZyYW1lJERldGVyICYmIHNhbXBsZUxpbmVzW25hbWVQcm9wRGVzY3JpcHRvcl0gIT09IGNvbnRyb2xMaW5lc1tfUnVuSW5Sb290RnJhbWUkRGV0ZXJdOyApCiAgICAgICAgICAgICAgICBfUnVuSW5Sb290RnJhbWUkRGV0ZXItLTsKICAgICAgICAgICAgZm9yICg7IDEgPD0gbmFtZVByb3BEZXNjcmlwdG9yICYmIDAgPD0gX1J1bkluUm9vdEZyYW1lJERldGVyOyBuYW1lUHJvcERlc2NyaXB0b3ItLSwgX1J1bkluUm9vdEZyYW1lJERldGVyLS0pCiAgICAgICAgICAgICAgaWYgKHNhbXBsZUxpbmVzW25hbWVQcm9wRGVzY3JpcHRvcl0gIT09IGNvbnRyb2xMaW5lc1tfUnVuSW5Sb290RnJhbWUkRGV0ZXJdKSB7CiAgICAgICAgICAgICAgICBpZiAoMSAhPT0gbmFtZVByb3BEZXNjcmlwdG9yIHx8IDEgIT09IF9SdW5JblJvb3RGcmFtZSREZXRlcikgewogICAgICAgICAgICAgICAgICBkbwogICAgICAgICAgICAgICAgICAgIGlmIChuYW1lUHJvcERlc2NyaXB0b3ItLSwgX1J1bkluUm9vdEZyYW1lJERldGVyLS0sIDAgPiBfUnVuSW5Sb290RnJhbWUkRGV0ZXIgfHwgc2FtcGxlTGluZXNbbmFtZVByb3BEZXNjcmlwdG9yXSAhPT0gY29udHJvbExpbmVzW19SdW5JblJvb3RGcmFtZSREZXRlcl0pIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBfZnJhbWUgPSAiXG4iICsgc2FtcGxlTGluZXNbbmFtZVByb3BEZXNjcmlwdG9yXS5yZXBsYWNlKAogICAgICAgICAgICAgICAgICAgICAgICAiIGF0IG5ldyAiLAogICAgICAgICAgICAgICAgICAgICAgICAiIGF0ICIKICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICBmbi5kaXNwbGF5TmFtZSAmJiBfZnJhbWUuaW5jbHVkZXMoIjxhbm9ueW1vdXM+IikgJiYgKF9mcmFtZSA9IF9mcmFtZS5yZXBsYWNlKCI8YW5vbnltb3VzPiIsIGZuLmRpc3BsYXlOYW1lKSk7CiAgICAgICAgICAgICAgICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgZm4gJiYgY29tcG9uZW50RnJhbWVDYWNoZS5zZXQoZm4sIF9mcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2ZyYW1lOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgd2hpbGUgKDEgPD0gbmFtZVByb3BEZXNjcmlwdG9yICYmIDAgPD0gX1J1bkluUm9vdEZyYW1lJERldGVyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgcmVlbnRyeSA9IGZhbHNlLCBSZWFjdFNoYXJlZEludGVybmFscy5IID0gcHJldmlvdXNEaXNwYXRjaGVyMiwgcmVlbmFibGVMb2dzKCksIEVycm9yLnByZXBhcmVTdGFja1RyYWNlID0gZnJhbWU7CiAgICAgICAgfQogICAgICAgIHNhbXBsZUxpbmVzID0gKHNhbXBsZUxpbmVzID0gZm4gPyBmbi5kaXNwbGF5TmFtZSB8fCBmbi5uYW1lIDogIiIpID8gZGVzY3JpYmVCdWlsdEluQ29tcG9uZW50RnJhbWUoc2FtcGxlTGluZXMpIDogIiI7CiAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGZuICYmIGNvbXBvbmVudEZyYW1lQ2FjaGUuc2V0KGZuLCBzYW1wbGVMaW5lcyk7CiAgICAgICAgcmV0dXJuIHNhbXBsZUxpbmVzOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGZvcm1hdE93bmVyU3RhY2soZXJyb3IpIHsKICAgICAgICB2YXIgcHJldlByZXBhcmVTdGFja1RyYWNlID0gRXJyb3IucHJlcGFyZVN0YWNrVHJhY2U7CiAgICAgICAgRXJyb3IucHJlcGFyZVN0YWNrVHJhY2UgPSB2b2lkIDA7CiAgICAgICAgZXJyb3IgPSBlcnJvci5zdGFjazsKICAgICAgICBFcnJvci5wcmVwYXJlU3RhY2tUcmFjZSA9IHByZXZQcmVwYXJlU3RhY2tUcmFjZTsKICAgICAgICBlcnJvci5zdGFydHNXaXRoKCJFcnJvcjogcmVhY3Qtc3RhY2stdG9wLWZyYW1lXG4iKSAmJiAoZXJyb3IgPSBlcnJvci5zbGljZSgyOSkpOwogICAgICAgIHByZXZQcmVwYXJlU3RhY2tUcmFjZSA9IGVycm9yLmluZGV4T2YoIlxuIik7CiAgICAgICAgLTEgIT09IHByZXZQcmVwYXJlU3RhY2tUcmFjZSAmJiAoZXJyb3IgPSBlcnJvci5zbGljZShwcmV2UHJlcGFyZVN0YWNrVHJhY2UgKyAxKSk7CiAgICAgICAgcHJldlByZXBhcmVTdGFja1RyYWNlID0gZXJyb3IuaW5kZXhPZigicmVhY3Rfc3RhY2tfYm90dG9tX2ZyYW1lIik7CiAgICAgICAgLTEgIT09IHByZXZQcmVwYXJlU3RhY2tUcmFjZSAmJiAocHJldlByZXBhcmVTdGFja1RyYWNlID0gZXJyb3IubGFzdEluZGV4T2YoCiAgICAgICAgICAiXG4iLAogICAgICAgICAgcHJldlByZXBhcmVTdGFja1RyYWNlCiAgICAgICAgKSk7CiAgICAgICAgaWYgKC0xICE9PSBwcmV2UHJlcGFyZVN0YWNrVHJhY2UpCiAgICAgICAgICBlcnJvciA9IGVycm9yLnNsaWNlKDAsIHByZXZQcmVwYXJlU3RhY2tUcmFjZSk7CiAgICAgICAgZWxzZSByZXR1cm4gIiI7CiAgICAgICAgcmV0dXJuIGVycm9yOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGRlc2NyaWJlRmliZXIoZmliZXIpIHsKICAgICAgICBzd2l0Y2ggKGZpYmVyLnRhZykgewogICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIHJldHVybiBkZXNjcmliZUJ1aWx0SW5Db21wb25lbnRGcmFtZShmaWJlci50eXBlKTsKICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgIHJldHVybiBkZXNjcmliZUJ1aWx0SW5Db21wb25lbnRGcmFtZSgiTGF6eSIpOwogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgcmV0dXJuIGRlc2NyaWJlQnVpbHRJbkNvbXBvbmVudEZyYW1lKCJTdXNwZW5zZSIpOwogICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgcmV0dXJuIGRlc2NyaWJlQnVpbHRJbkNvbXBvbmVudEZyYW1lKCJTdXNwZW5zZUxpc3QiKTsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIHJldHVybiBkZXNjcmliZU5hdGl2ZUNvbXBvbmVudEZyYW1lKGZpYmVyLnR5cGUsIGZhbHNlKTsKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIHJldHVybiBkZXNjcmliZU5hdGl2ZUNvbXBvbmVudEZyYW1lKGZpYmVyLnR5cGUucmVuZGVyLCBmYWxzZSk7CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIHJldHVybiBkZXNjcmliZU5hdGl2ZUNvbXBvbmVudEZyYW1lKGZpYmVyLnR5cGUsIHRydWUpOwogICAgICAgICAgY2FzZSAzMToKICAgICAgICAgICAgcmV0dXJuIGRlc2NyaWJlQnVpbHRJbkNvbXBvbmVudEZyYW1lKCJBY3Rpdml0eSIpOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBnZXRTdGFja0J5RmliZXJJbkRldkFuZFByb2Qod29ya0luUHJvZ3Jlc3MyKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciBpbmZvID0gIiI7CiAgICAgICAgICBkbyB7CiAgICAgICAgICAgIGluZm8gKz0gZGVzY3JpYmVGaWJlcih3b3JrSW5Qcm9ncmVzczIpOwogICAgICAgICAgICB2YXIgZGVidWdJbmZvID0gd29ya0luUHJvZ3Jlc3MyLl9kZWJ1Z0luZm87CiAgICAgICAgICAgIGlmIChkZWJ1Z0luZm8pCiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGRlYnVnSW5mby5sZW5ndGggLSAxOyAwIDw9IGk7IGktLSkgewogICAgICAgICAgICAgICAgdmFyIGVudHJ5ID0gZGVidWdJbmZvW2ldOwogICAgICAgICAgICAgICAgaWYgKCJzdHJpbmciID09PSB0eXBlb2YgZW50cnkubmFtZSkgewogICAgICAgICAgICAgICAgICB2YXIgSlNDb21waWxlcl90ZW1wX2NvbnN0ID0gaW5mbywgZW52ID0gZW50cnkuZW52OwogICAgICAgICAgICAgICAgICB2YXIgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0ID0gZGVzY3JpYmVCdWlsdEluQ29tcG9uZW50RnJhbWUoCiAgICAgICAgICAgICAgICAgICAgZW50cnkubmFtZSArIChlbnYgPyAiIFsiICsgZW52ICsgIl0iIDogIiIpCiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIGluZm8gPSBKU0NvbXBpbGVyX3RlbXBfY29uc3QgKyBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIgPSB3b3JrSW5Qcm9ncmVzczIucmV0dXJuOwogICAgICAgICAgfSB3aGlsZSAod29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICAgIHJldHVybiBpbmZvOwogICAgICAgIH0gY2F0Y2ggKHgpIHsKICAgICAgICAgIHJldHVybiAiXG5FcnJvciBnZW5lcmF0aW5nIHN0YWNrOiAiICsgeC5tZXNzYWdlICsgIlxuIiArIHguc3RhY2s7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGRlc2NyaWJlRnVuY3Rpb25Db21wb25lbnRGcmFtZVdpdGhvdXRMaW5lTnVtYmVyKGZuKSB7CiAgICAgICAgcmV0dXJuIChmbiA9IGZuID8gZm4uZGlzcGxheU5hbWUgfHwgZm4ubmFtZSA6ICIiKSA/IGRlc2NyaWJlQnVpbHRJbkNvbXBvbmVudEZyYW1lKGZuKSA6ICIiOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRGaWJlck93bmVyTmFtZUluRGV2T3JOdWxsKCkgewogICAgICAgIGlmIChudWxsID09PSBjdXJyZW50KSByZXR1cm4gbnVsbDsKICAgICAgICB2YXIgb3duZXIgPSBjdXJyZW50Ll9kZWJ1Z093bmVyOwogICAgICAgIHJldHVybiBudWxsICE9IG93bmVyID8gZ2V0Q29tcG9uZW50TmFtZUZyb21Pd25lcihvd25lcikgOiBudWxsOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRGaWJlclN0YWNrSW5EZXYoKSB7CiAgICAgICAgaWYgKG51bGwgPT09IGN1cnJlbnQpIHJldHVybiAiIjsKICAgICAgICB2YXIgd29ya0luUHJvZ3Jlc3MyID0gY3VycmVudDsKICAgICAgICB0cnkgewogICAgICAgICAgdmFyIGluZm8gPSAiIjsKICAgICAgICAgIDYgPT09IHdvcmtJblByb2dyZXNzMi50YWcgJiYgKHdvcmtJblByb2dyZXNzMiA9IHdvcmtJblByb2dyZXNzMi5yZXR1cm4pOwogICAgICAgICAgc3dpdGNoICh3b3JrSW5Qcm9ncmVzczIudGFnKSB7CiAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBpbmZvICs9IGRlc2NyaWJlQnVpbHRJbkNvbXBvbmVudEZyYW1lKHdvcmtJblByb2dyZXNzMi50eXBlKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBpbmZvICs9IGRlc2NyaWJlQnVpbHRJbkNvbXBvbmVudEZyYW1lKCJTdXNwZW5zZSIpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgIGluZm8gKz0gZGVzY3JpYmVCdWlsdEluQ29tcG9uZW50RnJhbWUoIlN1c3BlbnNlTGlzdCIpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDMxOgogICAgICAgICAgICAgIGluZm8gKz0gZGVzY3JpYmVCdWlsdEluQ29tcG9uZW50RnJhbWUoIkFjdGl2aXR5Iik7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMi5fZGVidWdPd25lciB8fCAiIiAhPT0gaW5mbyB8fCAoaW5mbyArPSBkZXNjcmliZUZ1bmN0aW9uQ29tcG9uZW50RnJhbWVXaXRob3V0TGluZU51bWJlcigKICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMi50eXBlCiAgICAgICAgICAgICAgKSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLl9kZWJ1Z093bmVyIHx8ICIiICE9PSBpbmZvIHx8IChpbmZvICs9IGRlc2NyaWJlRnVuY3Rpb25Db21wb25lbnRGcmFtZVdpdGhvdXRMaW5lTnVtYmVyKAogICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLnR5cGUucmVuZGVyCiAgICAgICAgICAgICAgKSk7CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKDsgd29ya0luUHJvZ3Jlc3MyOyApCiAgICAgICAgICAgIGlmICgibnVtYmVyIiA9PT0gdHlwZW9mIHdvcmtJblByb2dyZXNzMi50YWcpIHsKICAgICAgICAgICAgICB2YXIgZmliZXIgPSB3b3JrSW5Qcm9ncmVzczI7CiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyID0gZmliZXIuX2RlYnVnT3duZXI7CiAgICAgICAgICAgICAgdmFyIGRlYnVnU3RhY2sgPSBmaWJlci5fZGVidWdTdGFjazsKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIgJiYgZGVidWdTdGFjayAmJiAoInN0cmluZyIgIT09IHR5cGVvZiBkZWJ1Z1N0YWNrICYmIChmaWJlci5fZGVidWdTdGFjayA9IGRlYnVnU3RhY2sgPSBmb3JtYXRPd25lclN0YWNrKGRlYnVnU3RhY2spKSwgIiIgIT09IGRlYnVnU3RhY2sgJiYgKGluZm8gKz0gIlxuIiArIGRlYnVnU3RhY2spKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChudWxsICE9IHdvcmtJblByb2dyZXNzMi5kZWJ1Z1N0YWNrKSB7CiAgICAgICAgICAgICAgdmFyIG93bmVyU3RhY2sgPSB3b3JrSW5Qcm9ncmVzczIuZGVidWdTdGFjazsKICAgICAgICAgICAgICAod29ya0luUHJvZ3Jlc3MyID0gd29ya0luUHJvZ3Jlc3MyLm93bmVyKSAmJiBvd25lclN0YWNrICYmIChpbmZvICs9ICJcbiIgKyBmb3JtYXRPd25lclN0YWNrKG93bmVyU3RhY2spKTsKICAgICAgICAgICAgfSBlbHNlIGJyZWFrOwogICAgICAgICAgdmFyIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9IGluZm87CiAgICAgICAgfSBjYXRjaCAoeCkgewogICAgICAgICAgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0ID0gIlxuRXJyb3IgZ2VuZXJhdGluZyBzdGFjazogIiArIHgubWVzc2FnZSArICJcbiIgKyB4LnN0YWNrOwogICAgICAgIH0KICAgICAgICByZXR1cm4gSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJ1bldpdGhGaWJlckluREVWKGZpYmVyLCBjYWxsYmFjaywgYXJnMCwgYXJnMSwgYXJnMiwgYXJnMywgYXJnNCkgewogICAgICAgIHZhciBwcmV2aW91c0ZpYmVyID0gY3VycmVudDsKICAgICAgICBzZXRDdXJyZW50RmliZXIoZmliZXIpOwogICAgICAgIHRyeSB7CiAgICAgICAgICByZXR1cm4gbnVsbCAhPT0gZmliZXIgJiYgZmliZXIuX2RlYnVnVGFzayA/IGZpYmVyLl9kZWJ1Z1Rhc2sucnVuKAogICAgICAgICAgICBjYWxsYmFjay5iaW5kKG51bGwsIGFyZzAsIGFyZzEsIGFyZzIsIGFyZzMsIGFyZzQpCiAgICAgICAgICApIDogY2FsbGJhY2soYXJnMCwgYXJnMSwgYXJnMiwgYXJnMywgYXJnNCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIHNldEN1cnJlbnRGaWJlcihwcmV2aW91c0ZpYmVyKTsKICAgICAgICB9CiAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAicnVuV2l0aEZpYmVySW5ERVYgc2hvdWxkIG5ldmVyIGJlIGNhbGxlZCBpbiBwcm9kdWN0aW9uLiBUaGlzIGlzIGEgYnVnIGluIFJlYWN0LiIKICAgICAgICApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHNldEN1cnJlbnRGaWJlcihmaWJlcikgewogICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLmdldEN1cnJlbnRTdGFjayA9IG51bGwgPT09IGZpYmVyID8gbnVsbCA6IGdldEN1cnJlbnRGaWJlclN0YWNrSW5EZXY7CiAgICAgICAgaXNSZW5kZXJpbmcgPSBmYWxzZTsKICAgICAgICBjdXJyZW50ID0gZmliZXI7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0VG9TdHJpbmdWYWx1ZSh2YWx1ZSkgewogICAgICAgIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7CiAgICAgICAgICBjYXNlICJiaWdpbnQiOgogICAgICAgICAgY2FzZSAiYm9vbGVhbiI6CiAgICAgICAgICBjYXNlICJudW1iZXIiOgogICAgICAgICAgY2FzZSAic3RyaW5nIjoKICAgICAgICAgIGNhc2UgInVuZGVmaW5lZCI6CiAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICAgIGNhc2UgIm9iamVjdCI6CiAgICAgICAgICAgIHJldHVybiBjaGVja0Zvcm1GaWVsZFZhbHVlU3RyaW5nQ29lcmNpb24odmFsdWUpLCB2YWx1ZTsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJldHVybiAiIjsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gaXNDaGVja2FibGUoZWxlbSkgewogICAgICAgIHZhciB0eXBlID0gZWxlbS50eXBlOwogICAgICAgIHJldHVybiAoZWxlbSA9IGVsZW0ubm9kZU5hbWUpICYmICJpbnB1dCIgPT09IGVsZW0udG9Mb3dlckNhc2UoKSAmJiAoImNoZWNrYm94IiA9PT0gdHlwZSB8fCAicmFkaW8iID09PSB0eXBlKTsKICAgICAgfQogICAgICBmdW5jdGlvbiB0cmFja1ZhbHVlT25Ob2RlKG5vZGUpIHsKICAgICAgICB2YXIgdmFsdWVGaWVsZCA9IGlzQ2hlY2thYmxlKG5vZGUpID8gImNoZWNrZWQiIDogInZhbHVlIiwgZGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoCiAgICAgICAgICBub2RlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwKICAgICAgICAgIHZhbHVlRmllbGQKICAgICAgICApOwogICAgICAgIGNoZWNrRm9ybUZpZWxkVmFsdWVTdHJpbmdDb2VyY2lvbihub2RlW3ZhbHVlRmllbGRdKTsKICAgICAgICB2YXIgY3VycmVudFZhbHVlID0gIiIgKyBub2RlW3ZhbHVlRmllbGRdOwogICAgICAgIGlmICghbm9kZS5oYXNPd25Qcm9wZXJ0eSh2YWx1ZUZpZWxkKSAmJiAidW5kZWZpbmVkIiAhPT0gdHlwZW9mIGRlc2NyaXB0b3IgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGRlc2NyaXB0b3IuZ2V0ICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBkZXNjcmlwdG9yLnNldCkgewogICAgICAgICAgdmFyIGdldCA9IGRlc2NyaXB0b3IuZ2V0LCBzZXQgPSBkZXNjcmlwdG9yLnNldDsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShub2RlLCB2YWx1ZUZpZWxkLCB7CiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICByZXR1cm4gZ2V0LmNhbGwodGhpcyk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICAgICAgICBjaGVja0Zvcm1GaWVsZFZhbHVlU3RyaW5nQ29lcmNpb24odmFsdWUpOwogICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9ICIiICsgdmFsdWU7CiAgICAgICAgICAgICAgc2V0LmNhbGwodGhpcywgdmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShub2RlLCB2YWx1ZUZpZWxkLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6IGRlc2NyaXB0b3IuZW51bWVyYWJsZQogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBnZXRWYWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRWYWx1ZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2V0VmFsdWU6IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgICAgICAgY2hlY2tGb3JtRmllbGRWYWx1ZVN0cmluZ0NvZXJjaW9uKHZhbHVlKTsKICAgICAgICAgICAgICBjdXJyZW50VmFsdWUgPSAiIiArIHZhbHVlOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzdG9wVHJhY2tpbmc6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIG5vZGUuX3ZhbHVlVHJhY2tlciA9IG51bGw7CiAgICAgICAgICAgICAgZGVsZXRlIG5vZGVbdmFsdWVGaWVsZF07CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIHRyYWNrKG5vZGUpIHsKICAgICAgICBub2RlLl92YWx1ZVRyYWNrZXIgfHwgKG5vZGUuX3ZhbHVlVHJhY2tlciA9IHRyYWNrVmFsdWVPbk5vZGUobm9kZSkpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVZhbHVlSWZDaGFuZ2VkKG5vZGUpIHsKICAgICAgICBpZiAoIW5vZGUpIHJldHVybiBmYWxzZTsKICAgICAgICB2YXIgdHJhY2tlciA9IG5vZGUuX3ZhbHVlVHJhY2tlcjsKICAgICAgICBpZiAoIXRyYWNrZXIpIHJldHVybiB0cnVlOwogICAgICAgIHZhciBsYXN0VmFsdWUgPSB0cmFja2VyLmdldFZhbHVlKCk7CiAgICAgICAgdmFyIHZhbHVlID0gIiI7CiAgICAgICAgbm9kZSAmJiAodmFsdWUgPSBpc0NoZWNrYWJsZShub2RlKSA/IG5vZGUuY2hlY2tlZCA/ICJ0cnVlIiA6ICJmYWxzZSIgOiBub2RlLnZhbHVlKTsKICAgICAgICBub2RlID0gdmFsdWU7CiAgICAgICAgcmV0dXJuIG5vZGUgIT09IGxhc3RWYWx1ZSA/ICh0cmFja2VyLnNldFZhbHVlKG5vZGUpLCB0cnVlKSA6IGZhbHNlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldEFjdGl2ZUVsZW1lbnQoZG9jKSB7CiAgICAgICAgZG9jID0gZG9jIHx8ICgidW5kZWZpbmVkIiAhPT0gdHlwZW9mIGRvY3VtZW50ID8gZG9jdW1lbnQgOiB2b2lkIDApOwogICAgICAgIGlmICgidW5kZWZpbmVkIiA9PT0gdHlwZW9mIGRvYykgcmV0dXJuIG51bGw7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiBkb2MuYWN0aXZlRWxlbWVudCB8fCBkb2MuYm9keTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICByZXR1cm4gZG9jLmJvZHk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGVzY2FwZVNlbGVjdG9yQXR0cmlidXRlVmFsdWVJbnNpZGVEb3VibGVRdW90ZXModmFsdWUpIHsKICAgICAgICByZXR1cm4gdmFsdWUucmVwbGFjZSgKICAgICAgICAgIGVzY2FwZVNlbGVjdG9yQXR0cmlidXRlVmFsdWVJbnNpZGVEb3VibGVRdW90ZXNSZWdleCwKICAgICAgICAgIGZ1bmN0aW9uKGNoKSB7CiAgICAgICAgICAgIHJldHVybiAiXFwiICsgY2guY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikgKyAiICI7CiAgICAgICAgICB9CiAgICAgICAgKTsKICAgICAgfQogICAgICBmdW5jdGlvbiB2YWxpZGF0ZUlucHV0UHJvcHMoZWxlbWVudCwgcHJvcHMpIHsKICAgICAgICB2b2lkIDAgPT09IHByb3BzLmNoZWNrZWQgfHwgdm9pZCAwID09PSBwcm9wcy5kZWZhdWx0Q2hlY2tlZCB8fCBkaWRXYXJuQ2hlY2tlZERlZmF1bHRDaGVja2VkIHx8IChjb25zb2xlLmVycm9yKAogICAgICAgICAgIiVzIGNvbnRhaW5zIGFuIGlucHV0IG9mIHR5cGUgJXMgd2l0aCBib3RoIGNoZWNrZWQgYW5kIGRlZmF1bHRDaGVja2VkIHByb3BzLiBJbnB1dCBlbGVtZW50cyBtdXN0IGJlIGVpdGhlciBjb250cm9sbGVkIG9yIHVuY29udHJvbGxlZCAoc3BlY2lmeSBlaXRoZXIgdGhlIGNoZWNrZWQgcHJvcCwgb3IgdGhlIGRlZmF1bHRDaGVja2VkIHByb3AsIGJ1dCBub3QgYm90aCkuIERlY2lkZSBiZXR3ZWVuIHVzaW5nIGEgY29udHJvbGxlZCBvciB1bmNvbnRyb2xsZWQgaW5wdXQgZWxlbWVudCBhbmQgcmVtb3ZlIG9uZSBvZiB0aGVzZSBwcm9wcy4gTW9yZSBpbmZvOiBodHRwczovL3JlYWN0LmRldi9saW5rL2NvbnRyb2xsZWQtY29tcG9uZW50cyIsCiAgICAgICAgICBnZXRDdXJyZW50RmliZXJPd25lck5hbWVJbkRldk9yTnVsbCgpIHx8ICJBIGNvbXBvbmVudCIsCiAgICAgICAgICBwcm9wcy50eXBlCiAgICAgICAgKSwgZGlkV2FybkNoZWNrZWREZWZhdWx0Q2hlY2tlZCA9IHRydWUpOwogICAgICAgIHZvaWQgMCA9PT0gcHJvcHMudmFsdWUgfHwgdm9pZCAwID09PSBwcm9wcy5kZWZhdWx0VmFsdWUgfHwgZGlkV2FyblZhbHVlRGVmYXVsdFZhbHVlJDEgfHwgKGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiJXMgY29udGFpbnMgYW4gaW5wdXQgb2YgdHlwZSAlcyB3aXRoIGJvdGggdmFsdWUgYW5kIGRlZmF1bHRWYWx1ZSBwcm9wcy4gSW5wdXQgZWxlbWVudHMgbXVzdCBiZSBlaXRoZXIgY29udHJvbGxlZCBvciB1bmNvbnRyb2xsZWQgKHNwZWNpZnkgZWl0aGVyIHRoZSB2YWx1ZSBwcm9wLCBvciB0aGUgZGVmYXVsdFZhbHVlIHByb3AsIGJ1dCBub3QgYm90aCkuIERlY2lkZSBiZXR3ZWVuIHVzaW5nIGEgY29udHJvbGxlZCBvciB1bmNvbnRyb2xsZWQgaW5wdXQgZWxlbWVudCBhbmQgcmVtb3ZlIG9uZSBvZiB0aGVzZSBwcm9wcy4gTW9yZSBpbmZvOiBodHRwczovL3JlYWN0LmRldi9saW5rL2NvbnRyb2xsZWQtY29tcG9uZW50cyIsCiAgICAgICAgICBnZXRDdXJyZW50RmliZXJPd25lck5hbWVJbkRldk9yTnVsbCgpIHx8ICJBIGNvbXBvbmVudCIsCiAgICAgICAgICBwcm9wcy50eXBlCiAgICAgICAgKSwgZGlkV2FyblZhbHVlRGVmYXVsdFZhbHVlJDEgPSB0cnVlKTsKICAgICAgfQogICAgICBmdW5jdGlvbiB1cGRhdGVJbnB1dChlbGVtZW50LCB2YWx1ZSwgZGVmYXVsdFZhbHVlLCBsYXN0RGVmYXVsdFZhbHVlLCBjaGVja2VkLCBkZWZhdWx0Q2hlY2tlZCwgdHlwZSwgbmFtZSkgewogICAgICAgIGVsZW1lbnQubmFtZSA9ICIiOwogICAgICAgIG51bGwgIT0gdHlwZSAmJiAiZnVuY3Rpb24iICE9PSB0eXBlb2YgdHlwZSAmJiAic3ltYm9sIiAhPT0gdHlwZW9mIHR5cGUgJiYgImJvb2xlYW4iICE9PSB0eXBlb2YgdHlwZSA/IChjaGVja0F0dHJpYnV0ZVN0cmluZ0NvZXJjaW9uKHR5cGUsICJ0eXBlIiksIGVsZW1lbnQudHlwZSA9IHR5cGUpIDogZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoInR5cGUiKTsKICAgICAgICBpZiAobnVsbCAhPSB2YWx1ZSkKICAgICAgICAgIGlmICgibnVtYmVyIiA9PT0gdHlwZSkgewogICAgICAgICAgICBpZiAoMCA9PT0gdmFsdWUgJiYgIiIgPT09IGVsZW1lbnQudmFsdWUgfHwgZWxlbWVudC52YWx1ZSAhPSB2YWx1ZSkKICAgICAgICAgICAgICBlbGVtZW50LnZhbHVlID0gIiIgKyBnZXRUb1N0cmluZ1ZhbHVlKHZhbHVlKTsKICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICBlbGVtZW50LnZhbHVlICE9PSAiIiArIGdldFRvU3RyaW5nVmFsdWUodmFsdWUpICYmIChlbGVtZW50LnZhbHVlID0gIiIgKyBnZXRUb1N0cmluZ1ZhbHVlKHZhbHVlKSk7CiAgICAgICAgZWxzZQogICAgICAgICAgInN1Ym1pdCIgIT09IHR5cGUgJiYgInJlc2V0IiAhPT0gdHlwZSB8fCBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgidmFsdWUiKTsKICAgICAgICBudWxsICE9IHZhbHVlID8gc2V0RGVmYXVsdFZhbHVlKGVsZW1lbnQsIHR5cGUsIGdldFRvU3RyaW5nVmFsdWUodmFsdWUpKSA6IG51bGwgIT0gZGVmYXVsdFZhbHVlID8gc2V0RGVmYXVsdFZhbHVlKGVsZW1lbnQsIHR5cGUsIGdldFRvU3RyaW5nVmFsdWUoZGVmYXVsdFZhbHVlKSkgOiBudWxsICE9IGxhc3REZWZhdWx0VmFsdWUgJiYgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoInZhbHVlIik7CiAgICAgICAgbnVsbCA9PSBjaGVja2VkICYmIG51bGwgIT0gZGVmYXVsdENoZWNrZWQgJiYgKGVsZW1lbnQuZGVmYXVsdENoZWNrZWQgPSAhIWRlZmF1bHRDaGVja2VkKTsKICAgICAgICBudWxsICE9IGNoZWNrZWQgJiYgKGVsZW1lbnQuY2hlY2tlZCA9IGNoZWNrZWQgJiYgImZ1bmN0aW9uIiAhPT0gdHlwZW9mIGNoZWNrZWQgJiYgInN5bWJvbCIgIT09IHR5cGVvZiBjaGVja2VkKTsKICAgICAgICBudWxsICE9IG5hbWUgJiYgImZ1bmN0aW9uIiAhPT0gdHlwZW9mIG5hbWUgJiYgInN5bWJvbCIgIT09IHR5cGVvZiBuYW1lICYmICJib29sZWFuIiAhPT0gdHlwZW9mIG5hbWUgPyAoY2hlY2tBdHRyaWJ1dGVTdHJpbmdDb2VyY2lvbihuYW1lLCAibmFtZSIpLCBlbGVtZW50Lm5hbWUgPSAiIiArIGdldFRvU3RyaW5nVmFsdWUobmFtZSkpIDogZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoIm5hbWUiKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBpbml0SW5wdXQoZWxlbWVudCwgdmFsdWUsIGRlZmF1bHRWYWx1ZSwgY2hlY2tlZCwgZGVmYXVsdENoZWNrZWQsIHR5cGUsIG5hbWUsIGlzSHlkcmF0aW5nMikgewogICAgICAgIG51bGwgIT0gdHlwZSAmJiAiZnVuY3Rpb24iICE9PSB0eXBlb2YgdHlwZSAmJiAic3ltYm9sIiAhPT0gdHlwZW9mIHR5cGUgJiYgImJvb2xlYW4iICE9PSB0eXBlb2YgdHlwZSAmJiAoY2hlY2tBdHRyaWJ1dGVTdHJpbmdDb2VyY2lvbih0eXBlLCAidHlwZSIpLCBlbGVtZW50LnR5cGUgPSB0eXBlKTsKICAgICAgICBpZiAobnVsbCAhPSB2YWx1ZSB8fCBudWxsICE9IGRlZmF1bHRWYWx1ZSkgewogICAgICAgICAgaWYgKCEoInN1Ym1pdCIgIT09IHR5cGUgJiYgInJlc2V0IiAhPT0gdHlwZSB8fCB2b2lkIDAgIT09IHZhbHVlICYmIG51bGwgIT09IHZhbHVlKSkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgZGVmYXVsdFZhbHVlID0gbnVsbCAhPSBkZWZhdWx0VmFsdWUgPyAiIiArIGdldFRvU3RyaW5nVmFsdWUoZGVmYXVsdFZhbHVlKSA6ICIiOwogICAgICAgICAgdmFsdWUgPSBudWxsICE9IHZhbHVlID8gIiIgKyBnZXRUb1N0cmluZ1ZhbHVlKHZhbHVlKSA6IGRlZmF1bHRWYWx1ZTsKICAgICAgICAgIGlzSHlkcmF0aW5nMiB8fCB2YWx1ZSA9PT0gZWxlbWVudC52YWx1ZSB8fCAoZWxlbWVudC52YWx1ZSA9IHZhbHVlKTsKICAgICAgICAgIGVsZW1lbnQuZGVmYXVsdFZhbHVlID0gdmFsdWU7CiAgICAgICAgfQogICAgICAgIGNoZWNrZWQgPSBudWxsICE9IGNoZWNrZWQgPyBjaGVja2VkIDogZGVmYXVsdENoZWNrZWQ7CiAgICAgICAgY2hlY2tlZCA9ICJmdW5jdGlvbiIgIT09IHR5cGVvZiBjaGVja2VkICYmICJzeW1ib2wiICE9PSB0eXBlb2YgY2hlY2tlZCAmJiAhIWNoZWNrZWQ7CiAgICAgICAgZWxlbWVudC5jaGVja2VkID0gaXNIeWRyYXRpbmcyID8gZWxlbWVudC5jaGVja2VkIDogISFjaGVja2VkOwogICAgICAgIGVsZW1lbnQuZGVmYXVsdENoZWNrZWQgPSAhIWNoZWNrZWQ7CiAgICAgICAgbnVsbCAhPSBuYW1lICYmICJmdW5jdGlvbiIgIT09IHR5cGVvZiBuYW1lICYmICJzeW1ib2wiICE9PSB0eXBlb2YgbmFtZSAmJiAiYm9vbGVhbiIgIT09IHR5cGVvZiBuYW1lICYmIChjaGVja0F0dHJpYnV0ZVN0cmluZ0NvZXJjaW9uKG5hbWUsICJuYW1lIiksIGVsZW1lbnQubmFtZSA9IG5hbWUpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHNldERlZmF1bHRWYWx1ZShub2RlLCB0eXBlLCB2YWx1ZSkgewogICAgICAgICJudW1iZXIiID09PSB0eXBlICYmIGdldEFjdGl2ZUVsZW1lbnQobm9kZS5vd25lckRvY3VtZW50KSA9PT0gbm9kZSB8fCBub2RlLmRlZmF1bHRWYWx1ZSA9PT0gIiIgKyB2YWx1ZSB8fCAobm9kZS5kZWZhdWx0VmFsdWUgPSAiIiArIHZhbHVlKTsKICAgICAgfQogICAgICBmdW5jdGlvbiB2YWxpZGF0ZU9wdGlvblByb3BzKGVsZW1lbnQsIHByb3BzKSB7CiAgICAgICAgbnVsbCA9PSBwcm9wcy52YWx1ZSAmJiAoIm9iamVjdCIgPT09IHR5cGVvZiBwcm9wcy5jaGlsZHJlbiAmJiBudWxsICE9PSBwcm9wcy5jaGlsZHJlbiA/IFJlYWN0LkNoaWxkcmVuLmZvckVhY2gocHJvcHMuY2hpbGRyZW4sIGZ1bmN0aW9uKGNoaWxkKSB7CiAgICAgICAgICBudWxsID09IGNoaWxkIHx8ICJzdHJpbmciID09PSB0eXBlb2YgY2hpbGQgfHwgIm51bWJlciIgPT09IHR5cGVvZiBjaGlsZCB8fCAiYmlnaW50IiA9PT0gdHlwZW9mIGNoaWxkIHx8IGRpZFdhcm5JbnZhbGlkQ2hpbGQgfHwgKGRpZFdhcm5JbnZhbGlkQ2hpbGQgPSB0cnVlLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiQ2Fubm90IGluZmVyIHRoZSBvcHRpb24gdmFsdWUgb2YgY29tcGxleCBjaGlsZHJlbi4gUGFzcyBhIGB2YWx1ZWAgcHJvcCBvciB1c2UgYSBwbGFpbiBzdHJpbmcgYXMgY2hpbGRyZW4gdG8gPG9wdGlvbj4uIgogICAgICAgICAgKSk7CiAgICAgICAgfSkgOiBudWxsID09IHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIHx8IGRpZFdhcm5JbnZhbGlkSW5uZXJIVE1MIHx8IChkaWRXYXJuSW52YWxpZElubmVySFRNTCA9IHRydWUsIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiUGFzcyBhIGB2YWx1ZWAgcHJvcCBpZiB5b3Ugc2V0IGRhbmdlcm91c2x5SW5uZXJIVE1MIHNvIFJlYWN0IGtub3dzIHdoaWNoIHZhbHVlIHNob3VsZCBiZSBzZWxlY3RlZC4iCiAgICAgICAgKSkpOwogICAgICAgIG51bGwgPT0gcHJvcHMuc2VsZWN0ZWQgfHwgZGlkV2FyblNlbGVjdGVkU2V0T25PcHRpb24gfHwgKGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiVXNlIHRoZSBgZGVmYXVsdFZhbHVlYCBvciBgdmFsdWVgIHByb3BzIG9uIDxzZWxlY3Q+IGluc3RlYWQgb2Ygc2V0dGluZyBgc2VsZWN0ZWRgIG9uIDxvcHRpb24+LiIKICAgICAgICApLCBkaWRXYXJuU2VsZWN0ZWRTZXRPbk9wdGlvbiA9IHRydWUpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bSgpIHsKICAgICAgICB2YXIgb3duZXJOYW1lID0gZ2V0Q3VycmVudEZpYmVyT3duZXJOYW1lSW5EZXZPck51bGwoKTsKICAgICAgICByZXR1cm4gb3duZXJOYW1lID8gIlxuXG5DaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgIiArIG93bmVyTmFtZSArICJgLiIgOiAiIjsKICAgICAgfQogICAgICBmdW5jdGlvbiB1cGRhdGVPcHRpb25zKG5vZGUsIG11bHRpcGxlLCBwcm9wVmFsdWUsIHNldERlZmF1bHRTZWxlY3RlZCkgewogICAgICAgIG5vZGUgPSBub2RlLm9wdGlvbnM7CiAgICAgICAgaWYgKG11bHRpcGxlKSB7CiAgICAgICAgICBtdWx0aXBsZSA9IHt9OwogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wVmFsdWUubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIG11bHRpcGxlWyIkIiArIHByb3BWYWx1ZVtpXV0gPSB0cnVlOwogICAgICAgICAgZm9yIChwcm9wVmFsdWUgPSAwOyBwcm9wVmFsdWUgPCBub2RlLmxlbmd0aDsgcHJvcFZhbHVlKyspCiAgICAgICAgICAgIGkgPSBtdWx0aXBsZS5oYXNPd25Qcm9wZXJ0eSgiJCIgKyBub2RlW3Byb3BWYWx1ZV0udmFsdWUpLCBub2RlW3Byb3BWYWx1ZV0uc2VsZWN0ZWQgIT09IGkgJiYgKG5vZGVbcHJvcFZhbHVlXS5zZWxlY3RlZCA9IGkpLCBpICYmIHNldERlZmF1bHRTZWxlY3RlZCAmJiAobm9kZVtwcm9wVmFsdWVdLmRlZmF1bHRTZWxlY3RlZCA9IHRydWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwcm9wVmFsdWUgPSAiIiArIGdldFRvU3RyaW5nVmFsdWUocHJvcFZhbHVlKTsKICAgICAgICAgIG11bHRpcGxlID0gbnVsbDsKICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBub2RlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChub2RlW2ldLnZhbHVlID09PSBwcm9wVmFsdWUpIHsKICAgICAgICAgICAgICBub2RlW2ldLnNlbGVjdGVkID0gdHJ1ZTsKICAgICAgICAgICAgICBzZXREZWZhdWx0U2VsZWN0ZWQgJiYgKG5vZGVbaV0uZGVmYXVsdFNlbGVjdGVkID0gdHJ1ZSk7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG51bGwgIT09IG11bHRpcGxlIHx8IG5vZGVbaV0uZGlzYWJsZWQgfHwgKG11bHRpcGxlID0gbm9kZVtpXSk7CiAgICAgICAgICB9CiAgICAgICAgICBudWxsICE9PSBtdWx0aXBsZSAmJiAobXVsdGlwbGUuc2VsZWN0ZWQgPSB0cnVlKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdmFsaWRhdGVTZWxlY3RQcm9wcyhlbGVtZW50LCBwcm9wcykgewogICAgICAgIGZvciAoZWxlbWVudCA9IDA7IGVsZW1lbnQgPCB2YWx1ZVByb3BOYW1lcy5sZW5ndGg7IGVsZW1lbnQrKykgewogICAgICAgICAgdmFyIHByb3BOYW1lID0gdmFsdWVQcm9wTmFtZXNbZWxlbWVudF07CiAgICAgICAgICBpZiAobnVsbCAhPSBwcm9wc1twcm9wTmFtZV0pIHsKICAgICAgICAgICAgdmFyIHByb3BOYW1lSXNBcnJheSA9IGlzQXJyYXlJbXBsKHByb3BzW3Byb3BOYW1lXSk7CiAgICAgICAgICAgIHByb3BzLm11bHRpcGxlICYmICFwcm9wTmFtZUlzQXJyYXkgPyBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICJUaGUgYCVzYCBwcm9wIHN1cHBsaWVkIHRvIDxzZWxlY3Q+IG11c3QgYmUgYW4gYXJyYXkgaWYgYG11bHRpcGxlYCBpcyB0cnVlLiVzIiwKICAgICAgICAgICAgICBwcm9wTmFtZSwKICAgICAgICAgICAgICBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oKQogICAgICAgICAgICApIDogIXByb3BzLm11bHRpcGxlICYmIHByb3BOYW1lSXNBcnJheSAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICJUaGUgYCVzYCBwcm9wIHN1cHBsaWVkIHRvIDxzZWxlY3Q+IG11c3QgYmUgYSBzY2FsYXIgdmFsdWUgaWYgYG11bHRpcGxlYCBpcyBmYWxzZS4lcyIsCiAgICAgICAgICAgICAgcHJvcE5hbWUsCiAgICAgICAgICAgICAgZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKCkKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdm9pZCAwID09PSBwcm9wcy52YWx1ZSB8fCB2b2lkIDAgPT09IHByb3BzLmRlZmF1bHRWYWx1ZSB8fCBkaWRXYXJuVmFsdWVEZWZhdWx0VmFsdWUgfHwgKGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiU2VsZWN0IGVsZW1lbnRzIG11c3QgYmUgZWl0aGVyIGNvbnRyb2xsZWQgb3IgdW5jb250cm9sbGVkIChzcGVjaWZ5IGVpdGhlciB0aGUgdmFsdWUgcHJvcCwgb3IgdGhlIGRlZmF1bHRWYWx1ZSBwcm9wLCBidXQgbm90IGJvdGgpLiBEZWNpZGUgYmV0d2VlbiB1c2luZyBhIGNvbnRyb2xsZWQgb3IgdW5jb250cm9sbGVkIHNlbGVjdCBlbGVtZW50IGFuZCByZW1vdmUgb25lIG9mIHRoZXNlIHByb3BzLiBNb3JlIGluZm86IGh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvY29udHJvbGxlZC1jb21wb25lbnRzIgogICAgICAgICksIGRpZFdhcm5WYWx1ZURlZmF1bHRWYWx1ZSA9IHRydWUpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlVGV4dGFyZWFQcm9wcyhlbGVtZW50LCBwcm9wcykgewogICAgICAgIHZvaWQgMCA9PT0gcHJvcHMudmFsdWUgfHwgdm9pZCAwID09PSBwcm9wcy5kZWZhdWx0VmFsdWUgfHwgZGlkV2FyblZhbERlZmF1bHRWYWwgfHwgKGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiJXMgY29udGFpbnMgYSB0ZXh0YXJlYSB3aXRoIGJvdGggdmFsdWUgYW5kIGRlZmF1bHRWYWx1ZSBwcm9wcy4gVGV4dGFyZWEgZWxlbWVudHMgbXVzdCBiZSBlaXRoZXIgY29udHJvbGxlZCBvciB1bmNvbnRyb2xsZWQgKHNwZWNpZnkgZWl0aGVyIHRoZSB2YWx1ZSBwcm9wLCBvciB0aGUgZGVmYXVsdFZhbHVlIHByb3AsIGJ1dCBub3QgYm90aCkuIERlY2lkZSBiZXR3ZWVuIHVzaW5nIGEgY29udHJvbGxlZCBvciB1bmNvbnRyb2xsZWQgdGV4dGFyZWEgYW5kIHJlbW92ZSBvbmUgb2YgdGhlc2UgcHJvcHMuIE1vcmUgaW5mbzogaHR0cHM6Ly9yZWFjdC5kZXYvbGluay9jb250cm9sbGVkLWNvbXBvbmVudHMiLAogICAgICAgICAgZ2V0Q3VycmVudEZpYmVyT3duZXJOYW1lSW5EZXZPck51bGwoKSB8fCAiQSBjb21wb25lbnQiCiAgICAgICAgKSwgZGlkV2FyblZhbERlZmF1bHRWYWwgPSB0cnVlKTsKICAgICAgICBudWxsICE9IHByb3BzLmNoaWxkcmVuICYmIG51bGwgPT0gcHJvcHMudmFsdWUgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICJVc2UgdGhlIGBkZWZhdWx0VmFsdWVgIG9yIGB2YWx1ZWAgcHJvcHMgaW5zdGVhZCBvZiBzZXR0aW5nIGNoaWxkcmVuIG9uIDx0ZXh0YXJlYT4uIgogICAgICAgICk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdXBkYXRlVGV4dGFyZWEoZWxlbWVudCwgdmFsdWUsIGRlZmF1bHRWYWx1ZSkgewogICAgICAgIGlmIChudWxsICE9IHZhbHVlICYmICh2YWx1ZSA9ICIiICsgZ2V0VG9TdHJpbmdWYWx1ZSh2YWx1ZSksIHZhbHVlICE9PSBlbGVtZW50LnZhbHVlICYmIChlbGVtZW50LnZhbHVlID0gdmFsdWUpLCBudWxsID09IGRlZmF1bHRWYWx1ZSkpIHsKICAgICAgICAgIGVsZW1lbnQuZGVmYXVsdFZhbHVlICE9PSB2YWx1ZSAmJiAoZWxlbWVudC5kZWZhdWx0VmFsdWUgPSB2YWx1ZSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGVsZW1lbnQuZGVmYXVsdFZhbHVlID0gbnVsbCAhPSBkZWZhdWx0VmFsdWUgPyAiIiArIGdldFRvU3RyaW5nVmFsdWUoZGVmYXVsdFZhbHVlKSA6ICIiOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGluaXRUZXh0YXJlYShlbGVtZW50LCB2YWx1ZSwgZGVmYXVsdFZhbHVlLCBjaGlsZHJlbikgewogICAgICAgIGlmIChudWxsID09IHZhbHVlKSB7CiAgICAgICAgICBpZiAobnVsbCAhPSBjaGlsZHJlbikgewogICAgICAgICAgICBpZiAobnVsbCAhPSBkZWZhdWx0VmFsdWUpCiAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICAgICAiSWYgeW91IHN1cHBseSBgZGVmYXVsdFZhbHVlYCBvbiBhIDx0ZXh0YXJlYT4sIGRvIG5vdCBwYXNzIGNoaWxkcmVuLiIKICAgICAgICAgICAgICApOwogICAgICAgICAgICBpZiAoaXNBcnJheUltcGwoY2hpbGRyZW4pKSB7CiAgICAgICAgICAgICAgaWYgKDEgPCBjaGlsZHJlbi5sZW5ndGgpCiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigiPHRleHRhcmVhPiBjYW4gb25seSBoYXZlIGF0IG1vc3Qgb25lIGNoaWxkLiIpOwogICAgICAgICAgICAgIGNoaWxkcmVuID0gY2hpbGRyZW5bMF07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGVmYXVsdFZhbHVlID0gY2hpbGRyZW47CiAgICAgICAgICB9CiAgICAgICAgICBudWxsID09IGRlZmF1bHRWYWx1ZSAmJiAoZGVmYXVsdFZhbHVlID0gIiIpOwogICAgICAgICAgdmFsdWUgPSBkZWZhdWx0VmFsdWU7CiAgICAgICAgfQogICAgICAgIGRlZmF1bHRWYWx1ZSA9IGdldFRvU3RyaW5nVmFsdWUodmFsdWUpOwogICAgICAgIGVsZW1lbnQuZGVmYXVsdFZhbHVlID0gZGVmYXVsdFZhbHVlOwogICAgICAgIGNoaWxkcmVuID0gZWxlbWVudC50ZXh0Q29udGVudDsKICAgICAgICBjaGlsZHJlbiA9PT0gZGVmYXVsdFZhbHVlICYmICIiICE9PSBjaGlsZHJlbiAmJiBudWxsICE9PSBjaGlsZHJlbiAmJiAoZWxlbWVudC52YWx1ZSA9IGNoaWxkcmVuKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBmaW5kTm90YWJsZU5vZGUobm9kZSwgaW5kZW50KSB7CiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gbm9kZS5zZXJ2ZXJQcm9wcyAmJiAwID09PSBub2RlLnNlcnZlclRhaWwubGVuZ3RoICYmIDEgPT09IG5vZGUuY2hpbGRyZW4ubGVuZ3RoICYmIDMgPCBub2RlLmRpc3RhbmNlRnJvbUxlYWYgJiYgbm9kZS5kaXN0YW5jZUZyb21MZWFmID4gMTUgLSBpbmRlbnQgPyBmaW5kTm90YWJsZU5vZGUobm9kZS5jaGlsZHJlblswXSwgaW5kZW50KSA6IG5vZGU7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gaW5kZW50YXRpb24oaW5kZW50KSB7CiAgICAgICAgcmV0dXJuICIgICIgKyAiICAiLnJlcGVhdChpbmRlbnQpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGFkZGVkKGluZGVudCkgewogICAgICAgIHJldHVybiAiKyAiICsgIiAgIi5yZXBlYXQoaW5kZW50KTsKICAgICAgfQogICAgICBmdW5jdGlvbiByZW1vdmVkKGluZGVudCkgewogICAgICAgIHJldHVybiAiLSAiICsgIiAgIi5yZXBlYXQoaW5kZW50KTsKICAgICAgfQogICAgICBmdW5jdGlvbiBkZXNjcmliZUZpYmVyVHlwZShmaWJlcikgewogICAgICAgIHN3aXRjaCAoZmliZXIudGFnKSB7CiAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgcmV0dXJuIGZpYmVyLnR5cGU7CiAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICByZXR1cm4gIkxhenkiOwogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgcmV0dXJuICJTdXNwZW5zZSI7CiAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICByZXR1cm4gIlN1c3BlbnNlTGlzdCI7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICByZXR1cm4gZmliZXIgPSBmaWJlci50eXBlLCBmaWJlci5kaXNwbGF5TmFtZSB8fCBmaWJlci5uYW1lIHx8IG51bGw7CiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICByZXR1cm4gZmliZXIgPSBmaWJlci50eXBlLnJlbmRlciwgZmliZXIuZGlzcGxheU5hbWUgfHwgZmliZXIubmFtZSB8fCBudWxsOwogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICByZXR1cm4gZmliZXIgPSBmaWJlci50eXBlLCBmaWJlci5kaXNwbGF5TmFtZSB8fCBmaWJlci5uYW1lIHx8IG51bGw7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZGVzY3JpYmVUZXh0Tm9kZShjb250ZW50LCBtYXhMZW5ndGgpIHsKICAgICAgICByZXR1cm4gbmVlZHNFc2NhcGluZy50ZXN0KGNvbnRlbnQpID8gKGNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShjb250ZW50KSwgY29udGVudC5sZW5ndGggPiBtYXhMZW5ndGggLSAyID8gOCA+IG1heExlbmd0aCA/ICd7Ii4uLiJ9JyA6ICJ7IiArIGNvbnRlbnQuc2xpY2UoMCwgbWF4TGVuZ3RoIC0gNykgKyAnLi4uIn0nIDogInsiICsgY29udGVudCArICJ9IikgOiBjb250ZW50Lmxlbmd0aCA+IG1heExlbmd0aCA/IDUgPiBtYXhMZW5ndGggPyAneyIuLi4ifScgOiBjb250ZW50LnNsaWNlKDAsIG1heExlbmd0aCAtIDMpICsgIi4uLiIgOiBjb250ZW50OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGRlc2NyaWJlVGV4dERpZmYoY2xpZW50VGV4dCwgc2VydmVyUHJvcHMsIGluZGVudCkgewogICAgICAgIHZhciBtYXhMZW5ndGggPSAxMjAgLSAyICogaW5kZW50OwogICAgICAgIGlmIChudWxsID09PSBzZXJ2ZXJQcm9wcykKICAgICAgICAgIHJldHVybiBhZGRlZChpbmRlbnQpICsgZGVzY3JpYmVUZXh0Tm9kZShjbGllbnRUZXh0LCBtYXhMZW5ndGgpICsgIlxuIjsKICAgICAgICBpZiAoInN0cmluZyIgPT09IHR5cGVvZiBzZXJ2ZXJQcm9wcykgewogICAgICAgICAgZm9yICh2YXIgZmlyc3REaWZmID0gMDsgZmlyc3REaWZmIDwgc2VydmVyUHJvcHMubGVuZ3RoICYmIGZpcnN0RGlmZiA8IGNsaWVudFRleHQubGVuZ3RoICYmIHNlcnZlclByb3BzLmNoYXJDb2RlQXQoZmlyc3REaWZmKSA9PT0gY2xpZW50VGV4dC5jaGFyQ29kZUF0KGZpcnN0RGlmZik7IGZpcnN0RGlmZisrKSA7CiAgICAgICAgICBmaXJzdERpZmYgPiBtYXhMZW5ndGggLSA4ICYmIDEwIDwgZmlyc3REaWZmICYmIChjbGllbnRUZXh0ID0gIi4uLiIgKyBjbGllbnRUZXh0LnNsaWNlKGZpcnN0RGlmZiAtIDgpLCBzZXJ2ZXJQcm9wcyA9ICIuLi4iICsgc2VydmVyUHJvcHMuc2xpY2UoZmlyc3REaWZmIC0gOCkpOwogICAgICAgICAgcmV0dXJuIGFkZGVkKGluZGVudCkgKyBkZXNjcmliZVRleHROb2RlKGNsaWVudFRleHQsIG1heExlbmd0aCkgKyAiXG4iICsgcmVtb3ZlZChpbmRlbnQpICsgZGVzY3JpYmVUZXh0Tm9kZShzZXJ2ZXJQcm9wcywgbWF4TGVuZ3RoKSArICJcbiI7CiAgICAgICAgfQogICAgICAgIHJldHVybiBpbmRlbnRhdGlvbihpbmRlbnQpICsgZGVzY3JpYmVUZXh0Tm9kZShjbGllbnRUZXh0LCBtYXhMZW5ndGgpICsgIlxuIjsKICAgICAgfQogICAgICBmdW5jdGlvbiBvYmplY3ROYW1lKG9iamVjdCkgewogICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqZWN0KS5yZXBsYWNlKC9eXFtvYmplY3QgKC4qKVxdJC8sIGZ1bmN0aW9uKG0sIHAwKSB7CiAgICAgICAgICByZXR1cm4gcDA7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZGVzY3JpYmVWYWx1ZSh2YWx1ZSwgbWF4TGVuZ3RoKSB7CiAgICAgICAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHsKICAgICAgICAgIGNhc2UgInN0cmluZyI6CiAgICAgICAgICAgIHJldHVybiB2YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKSwgdmFsdWUubGVuZ3RoID4gbWF4TGVuZ3RoID8gNSA+IG1heExlbmd0aCA/ICciLi4uIicgOiB2YWx1ZS5zbGljZSgwLCBtYXhMZW5ndGggLSA0KSArICcuLi4iJyA6IHZhbHVlOwogICAgICAgICAgY2FzZSAib2JqZWN0IjoKICAgICAgICAgICAgaWYgKG51bGwgPT09IHZhbHVlKSByZXR1cm4gIm51bGwiOwogICAgICAgICAgICBpZiAoaXNBcnJheUltcGwodmFsdWUpKSByZXR1cm4gIlsuLi5dIjsKICAgICAgICAgICAgaWYgKHZhbHVlLiQkdHlwZW9mID09PSBSRUFDVF9FTEVNRU5UX1RZUEUpCiAgICAgICAgICAgICAgcmV0dXJuIChtYXhMZW5ndGggPSBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodmFsdWUudHlwZSkpID8gIjwiICsgbWF4TGVuZ3RoICsgIj4iIDogIjwuLi4+IjsKICAgICAgICAgICAgdmFyIG5hbWUgPSBvYmplY3ROYW1lKHZhbHVlKTsKICAgICAgICAgICAgaWYgKCJPYmplY3QiID09PSBuYW1lKSB7CiAgICAgICAgICAgICAgbmFtZSA9ICIiOwogICAgICAgICAgICAgIG1heExlbmd0aCAtPSAyOwogICAgICAgICAgICAgIGZvciAodmFyIHByb3BOYW1lIGluIHZhbHVlKQogICAgICAgICAgICAgICAgaWYgKHZhbHVlLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkgewogICAgICAgICAgICAgICAgICB2YXIganNvblByb3BOYW1lID0gSlNPTi5zdHJpbmdpZnkocHJvcE5hbWUpOwogICAgICAgICAgICAgICAgICBqc29uUHJvcE5hbWUgIT09ICciJyArIHByb3BOYW1lICsgJyInICYmIChwcm9wTmFtZSA9IGpzb25Qcm9wTmFtZSk7CiAgICAgICAgICAgICAgICAgIG1heExlbmd0aCAtPSBwcm9wTmFtZS5sZW5ndGggLSAyOwogICAgICAgICAgICAgICAgICBqc29uUHJvcE5hbWUgPSBkZXNjcmliZVZhbHVlKAogICAgICAgICAgICAgICAgICAgIHZhbHVlW3Byb3BOYW1lXSwKICAgICAgICAgICAgICAgICAgICAxNSA+IG1heExlbmd0aCA/IG1heExlbmd0aCA6IDE1CiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIG1heExlbmd0aCAtPSBqc29uUHJvcE5hbWUubGVuZ3RoOwogICAgICAgICAgICAgICAgICBpZiAoMCA+IG1heExlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIG5hbWUgKz0gIiIgPT09IG5hbWUgPyAiLi4uIiA6ICIsIC4uLiI7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgbmFtZSArPSAoIiIgPT09IG5hbWUgPyAiIiA6ICIsIikgKyBwcm9wTmFtZSArICI6IiArIGpzb25Qcm9wTmFtZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gInsiICsgbmFtZSArICJ9IjsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbmFtZTsKICAgICAgICAgIGNhc2UgImZ1bmN0aW9uIjoKICAgICAgICAgICAgcmV0dXJuIChtYXhMZW5ndGggPSB2YWx1ZS5kaXNwbGF5TmFtZSB8fCB2YWx1ZS5uYW1lKSA/ICJmdW5jdGlvbiAiICsgbWF4TGVuZ3RoIDogImZ1bmN0aW9uIjsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJldHVybiBTdHJpbmcodmFsdWUpOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBkZXNjcmliZVByb3BWYWx1ZSh2YWx1ZSwgbWF4TGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuICJzdHJpbmciICE9PSB0eXBlb2YgdmFsdWUgfHwgbmVlZHNFc2NhcGluZy50ZXN0KHZhbHVlKSA/ICJ7IiArIGRlc2NyaWJlVmFsdWUodmFsdWUsIG1heExlbmd0aCAtIDIpICsgIn0iIDogdmFsdWUubGVuZ3RoID4gbWF4TGVuZ3RoIC0gMiA/IDUgPiBtYXhMZW5ndGggPyAnIi4uLiInIDogJyInICsgdmFsdWUuc2xpY2UoMCwgbWF4TGVuZ3RoIC0gNSkgKyAnLi4uIicgOiAnIicgKyB2YWx1ZSArICciJzsKICAgICAgfQogICAgICBmdW5jdGlvbiBkZXNjcmliZUV4cGFuZGVkRWxlbWVudCh0eXBlLCBwcm9wcywgcm93UHJlZml4KSB7CiAgICAgICAgdmFyIHJlbWFpbmluZ1Jvd0xlbmd0aCA9IDEyMCAtIHJvd1ByZWZpeC5sZW5ndGggLSB0eXBlLmxlbmd0aCwgcHJvcGVydGllcyA9IFtdLCBwcm9wTmFtZTsKICAgICAgICBmb3IgKHByb3BOYW1lIGluIHByb3BzKQogICAgICAgICAgaWYgKHByb3BzLmhhc093blByb3BlcnR5KHByb3BOYW1lKSAmJiAiY2hpbGRyZW4iICE9PSBwcm9wTmFtZSkgewogICAgICAgICAgICB2YXIgcHJvcFZhbHVlID0gZGVzY3JpYmVQcm9wVmFsdWUoCiAgICAgICAgICAgICAgcHJvcHNbcHJvcE5hbWVdLAogICAgICAgICAgICAgIDEyMCAtIHJvd1ByZWZpeC5sZW5ndGggLSBwcm9wTmFtZS5sZW5ndGggLSAxCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHJlbWFpbmluZ1Jvd0xlbmd0aCAtPSBwcm9wTmFtZS5sZW5ndGggKyBwcm9wVmFsdWUubGVuZ3RoICsgMjsKICAgICAgICAgICAgcHJvcGVydGllcy5wdXNoKHByb3BOYW1lICsgIj0iICsgcHJvcFZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICByZXR1cm4gMCA9PT0gcHJvcGVydGllcy5sZW5ndGggPyByb3dQcmVmaXggKyAiPCIgKyB0eXBlICsgIj5cbiIgOiAwIDwgcmVtYWluaW5nUm93TGVuZ3RoID8gcm93UHJlZml4ICsgIjwiICsgdHlwZSArICIgIiArIHByb3BlcnRpZXMuam9pbigiICIpICsgIj5cbiIgOiByb3dQcmVmaXggKyAiPCIgKyB0eXBlICsgIlxuIiArIHJvd1ByZWZpeCArICIgICIgKyBwcm9wZXJ0aWVzLmpvaW4oIlxuIiArIHJvd1ByZWZpeCArICIgICIpICsgIlxuIiArIHJvd1ByZWZpeCArICI+XG4iOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGRlc2NyaWJlUHJvcGVydGllc0RpZmYoY2xpZW50T2JqZWN0LCBzZXJ2ZXJPYmplY3QsIGluZGVudCkgewogICAgICAgIHZhciBwcm9wZXJ0aWVzID0gIiIsIHJlbWFpbmluZ1NlcnZlclByb3BlcnRpZXMgPSBhc3NpZ24oe30sIHNlcnZlck9iamVjdCksIHByb3BOYW1lOwogICAgICAgIGZvciAocHJvcE5hbWUgaW4gY2xpZW50T2JqZWN0KQogICAgICAgICAgaWYgKGNsaWVudE9iamVjdC5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHsKICAgICAgICAgICAgZGVsZXRlIHJlbWFpbmluZ1NlcnZlclByb3BlcnRpZXNbcHJvcE5hbWVdOwogICAgICAgICAgICB2YXIgbWF4TGVuZ3RoID0gMTIwIC0gMiAqIGluZGVudCAtIHByb3BOYW1lLmxlbmd0aCAtIDIsIGNsaWVudFByb3BWYWx1ZSA9IGRlc2NyaWJlVmFsdWUoY2xpZW50T2JqZWN0W3Byb3BOYW1lXSwgbWF4TGVuZ3RoKTsKICAgICAgICAgICAgc2VydmVyT2JqZWN0Lmhhc093blByb3BlcnR5KHByb3BOYW1lKSA/IChtYXhMZW5ndGggPSBkZXNjcmliZVZhbHVlKHNlcnZlck9iamVjdFtwcm9wTmFtZV0sIG1heExlbmd0aCksIHByb3BlcnRpZXMgKz0gYWRkZWQoaW5kZW50KSArIHByb3BOYW1lICsgIjogIiArIGNsaWVudFByb3BWYWx1ZSArICJcbiIsIHByb3BlcnRpZXMgKz0gcmVtb3ZlZChpbmRlbnQpICsgcHJvcE5hbWUgKyAiOiAiICsgbWF4TGVuZ3RoICsgIlxuIikgOiBwcm9wZXJ0aWVzICs9IGFkZGVkKGluZGVudCkgKyBwcm9wTmFtZSArICI6ICIgKyBjbGllbnRQcm9wVmFsdWUgKyAiXG4iOwogICAgICAgICAgfQogICAgICAgIGZvciAodmFyIF9wcm9wTmFtZSBpbiByZW1haW5pbmdTZXJ2ZXJQcm9wZXJ0aWVzKQogICAgICAgICAgcmVtYWluaW5nU2VydmVyUHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShfcHJvcE5hbWUpICYmIChjbGllbnRPYmplY3QgPSBkZXNjcmliZVZhbHVlKAogICAgICAgICAgICByZW1haW5pbmdTZXJ2ZXJQcm9wZXJ0aWVzW19wcm9wTmFtZV0sCiAgICAgICAgICAgIDEyMCAtIDIgKiBpbmRlbnQgLSBfcHJvcE5hbWUubGVuZ3RoIC0gMgogICAgICAgICAgKSwgcHJvcGVydGllcyArPSByZW1vdmVkKGluZGVudCkgKyBfcHJvcE5hbWUgKyAiOiAiICsgY2xpZW50T2JqZWN0ICsgIlxuIik7CiAgICAgICAgcmV0dXJuIHByb3BlcnRpZXM7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZGVzY3JpYmVFbGVtZW50RGlmZih0eXBlLCBjbGllbnRQcm9wcywgc2VydmVyUHJvcHMsIGluZGVudCkgewogICAgICAgIHZhciBjb250ZW50ID0gIiIsIHNlcnZlclByb3BOYW1lcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgICAgICAgZm9yIChwcm9wTmFtZSRqc2NvbXAkMCBpbiBzZXJ2ZXJQcm9wcykKICAgICAgICAgIHNlcnZlclByb3BzLmhhc093blByb3BlcnR5KHByb3BOYW1lJGpzY29tcCQwKSAmJiBzZXJ2ZXJQcm9wTmFtZXMuc2V0KAogICAgICAgICAgICBwcm9wTmFtZSRqc2NvbXAkMC50b0xvd2VyQ2FzZSgpLAogICAgICAgICAgICBwcm9wTmFtZSRqc2NvbXAkMAogICAgICAgICAgKTsKICAgICAgICBpZiAoMSA9PT0gc2VydmVyUHJvcE5hbWVzLnNpemUgJiYgc2VydmVyUHJvcE5hbWVzLmhhcygiY2hpbGRyZW4iKSkKICAgICAgICAgIGNvbnRlbnQgKz0gZGVzY3JpYmVFeHBhbmRlZEVsZW1lbnQoCiAgICAgICAgICAgIHR5cGUsCiAgICAgICAgICAgIGNsaWVudFByb3BzLAogICAgICAgICAgICBpbmRlbnRhdGlvbihpbmRlbnQpCiAgICAgICAgICApOwogICAgICAgIGVsc2UgewogICAgICAgICAgZm9yICh2YXIgX3Byb3BOYW1lMiBpbiBjbGllbnRQcm9wcykKICAgICAgICAgICAgaWYgKGNsaWVudFByb3BzLmhhc093blByb3BlcnR5KF9wcm9wTmFtZTIpICYmICJjaGlsZHJlbiIgIT09IF9wcm9wTmFtZTIpIHsKICAgICAgICAgICAgICB2YXIgbWF4TGVuZ3RoJGpzY29tcCQwID0gMTIwIC0gMiAqIChpbmRlbnQgKyAxKSAtIF9wcm9wTmFtZTIubGVuZ3RoIC0gMSwgc2VydmVyUHJvcE5hbWUgPSBzZXJ2ZXJQcm9wTmFtZXMuZ2V0KF9wcm9wTmFtZTIudG9Mb3dlckNhc2UoKSk7CiAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gc2VydmVyUHJvcE5hbWUpIHsKICAgICAgICAgICAgICAgIHNlcnZlclByb3BOYW1lcy5kZWxldGUoX3Byb3BOYW1lMi50b0xvd2VyQ2FzZSgpKTsKICAgICAgICAgICAgICAgIHZhciBwcm9wTmFtZSRqc2NvbXAkMCA9IGNsaWVudFByb3BzW19wcm9wTmFtZTJdOwogICAgICAgICAgICAgICAgc2VydmVyUHJvcE5hbWUgPSBzZXJ2ZXJQcm9wc1tzZXJ2ZXJQcm9wTmFtZV07CiAgICAgICAgICAgICAgICB2YXIgY2xpZW50UHJvcFZhbHVlID0gZGVzY3JpYmVQcm9wVmFsdWUoCiAgICAgICAgICAgICAgICAgIHByb3BOYW1lJGpzY29tcCQwLAogICAgICAgICAgICAgICAgICBtYXhMZW5ndGgkanNjb21wJDAKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICBtYXhMZW5ndGgkanNjb21wJDAgPSBkZXNjcmliZVByb3BWYWx1ZSgKICAgICAgICAgICAgICAgICAgc2VydmVyUHJvcE5hbWUsCiAgICAgICAgICAgICAgICAgIG1heExlbmd0aCRqc2NvbXAkMAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICJvYmplY3QiID09PSB0eXBlb2YgcHJvcE5hbWUkanNjb21wJDAgJiYgbnVsbCAhPT0gcHJvcE5hbWUkanNjb21wJDAgJiYgIm9iamVjdCIgPT09IHR5cGVvZiBzZXJ2ZXJQcm9wTmFtZSAmJiBudWxsICE9PSBzZXJ2ZXJQcm9wTmFtZSAmJiAiT2JqZWN0IiA9PT0gb2JqZWN0TmFtZShwcm9wTmFtZSRqc2NvbXAkMCkgJiYgIk9iamVjdCIgPT09IG9iamVjdE5hbWUoc2VydmVyUHJvcE5hbWUpICYmICgyIDwgT2JqZWN0LmtleXMocHJvcE5hbWUkanNjb21wJDApLmxlbmd0aCB8fCAyIDwgT2JqZWN0LmtleXMoc2VydmVyUHJvcE5hbWUpLmxlbmd0aCB8fCAtMSA8IGNsaWVudFByb3BWYWx1ZS5pbmRleE9mKCIuLi4iKSB8fCAtMSA8IG1heExlbmd0aCRqc2NvbXAkMC5pbmRleE9mKCIuLi4iKSkgPyBjb250ZW50ICs9IGluZGVudGF0aW9uKGluZGVudCArIDEpICsgX3Byb3BOYW1lMiArICI9e3tcbiIgKyBkZXNjcmliZVByb3BlcnRpZXNEaWZmKAogICAgICAgICAgICAgICAgICBwcm9wTmFtZSRqc2NvbXAkMCwKICAgICAgICAgICAgICAgICAgc2VydmVyUHJvcE5hbWUsCiAgICAgICAgICAgICAgICAgIGluZGVudCArIDIKICAgICAgICAgICAgICAgICkgKyBpbmRlbnRhdGlvbihpbmRlbnQgKyAxKSArICJ9fVxuIiA6IChjb250ZW50ICs9IGFkZGVkKGluZGVudCArIDEpICsgX3Byb3BOYW1lMiArICI9IiArIGNsaWVudFByb3BWYWx1ZSArICJcbiIsIGNvbnRlbnQgKz0gcmVtb3ZlZChpbmRlbnQgKyAxKSArIF9wcm9wTmFtZTIgKyAiPSIgKyBtYXhMZW5ndGgkanNjb21wJDAgKyAiXG4iKTsKICAgICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gaW5kZW50YXRpb24oaW5kZW50ICsgMSkgKyBfcHJvcE5hbWUyICsgIj0iICsgZGVzY3JpYmVQcm9wVmFsdWUoY2xpZW50UHJvcHNbX3Byb3BOYW1lMl0sIG1heExlbmd0aCRqc2NvbXAkMCkgKyAiXG4iOwogICAgICAgICAgICB9CiAgICAgICAgICBzZXJ2ZXJQcm9wTmFtZXMuZm9yRWFjaChmdW5jdGlvbihwcm9wTmFtZSkgewogICAgICAgICAgICBpZiAoImNoaWxkcmVuIiAhPT0gcHJvcE5hbWUpIHsKICAgICAgICAgICAgICB2YXIgbWF4TGVuZ3RoID0gMTIwIC0gMiAqIChpbmRlbnQgKyAxKSAtIHByb3BOYW1lLmxlbmd0aCAtIDE7CiAgICAgICAgICAgICAgY29udGVudCArPSByZW1vdmVkKGluZGVudCArIDEpICsgcHJvcE5hbWUgKyAiPSIgKyBkZXNjcmliZVByb3BWYWx1ZShzZXJ2ZXJQcm9wc1twcm9wTmFtZV0sIG1heExlbmd0aCkgKyAiXG4iOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIGNvbnRlbnQgPSAiIiA9PT0gY29udGVudCA/IGluZGVudGF0aW9uKGluZGVudCkgKyAiPCIgKyB0eXBlICsgIj5cbiIgOiBpbmRlbnRhdGlvbihpbmRlbnQpICsgIjwiICsgdHlwZSArICJcbiIgKyBjb250ZW50ICsgaW5kZW50YXRpb24oaW5kZW50KSArICI+XG4iOwogICAgICAgIH0KICAgICAgICB0eXBlID0gc2VydmVyUHJvcHMuY2hpbGRyZW47CiAgICAgICAgY2xpZW50UHJvcHMgPSBjbGllbnRQcm9wcy5jaGlsZHJlbjsKICAgICAgICBpZiAoInN0cmluZyIgPT09IHR5cGVvZiB0eXBlIHx8ICJudW1iZXIiID09PSB0eXBlb2YgdHlwZSB8fCAiYmlnaW50IiA9PT0gdHlwZW9mIHR5cGUpIHsKICAgICAgICAgIHNlcnZlclByb3BOYW1lcyA9ICIiOwogICAgICAgICAgaWYgKCJzdHJpbmciID09PSB0eXBlb2YgY2xpZW50UHJvcHMgfHwgIm51bWJlciIgPT09IHR5cGVvZiBjbGllbnRQcm9wcyB8fCAiYmlnaW50IiA9PT0gdHlwZW9mIGNsaWVudFByb3BzKQogICAgICAgICAgICBzZXJ2ZXJQcm9wTmFtZXMgPSAiIiArIGNsaWVudFByb3BzOwogICAgICAgICAgY29udGVudCArPSBkZXNjcmliZVRleHREaWZmKHNlcnZlclByb3BOYW1lcywgIiIgKyB0eXBlLCBpbmRlbnQgKyAxKTsKICAgICAgICB9IGVsc2UgaWYgKCJzdHJpbmciID09PSB0eXBlb2YgY2xpZW50UHJvcHMgfHwgIm51bWJlciIgPT09IHR5cGVvZiBjbGllbnRQcm9wcyB8fCAiYmlnaW50IiA9PT0gdHlwZW9mIGNsaWVudFByb3BzKQogICAgICAgICAgY29udGVudCA9IG51bGwgPT0gdHlwZSA/IGNvbnRlbnQgKyBkZXNjcmliZVRleHREaWZmKCIiICsgY2xpZW50UHJvcHMsIG51bGwsIGluZGVudCArIDEpIDogY29udGVudCArIGRlc2NyaWJlVGV4dERpZmYoIiIgKyBjbGllbnRQcm9wcywgdm9pZCAwLCBpbmRlbnQgKyAxKTsKICAgICAgICByZXR1cm4gY29udGVudDsKICAgICAgfQogICAgICBmdW5jdGlvbiBkZXNjcmliZVNpYmxpbmdGaWJlcihmaWJlciwgaW5kZW50KSB7CiAgICAgICAgdmFyIHR5cGUgPSBkZXNjcmliZUZpYmVyVHlwZShmaWJlcik7CiAgICAgICAgaWYgKG51bGwgPT09IHR5cGUpIHsKICAgICAgICAgIHR5cGUgPSAiIjsKICAgICAgICAgIGZvciAoZmliZXIgPSBmaWJlci5jaGlsZDsgZmliZXI7ICkKICAgICAgICAgICAgdHlwZSArPSBkZXNjcmliZVNpYmxpbmdGaWJlcihmaWJlciwgaW5kZW50KSwgZmliZXIgPSBmaWJlci5zaWJsaW5nOwogICAgICAgICAgcmV0dXJuIHR5cGU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBpbmRlbnRhdGlvbihpbmRlbnQpICsgIjwiICsgdHlwZSArICI+XG4iOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGRlc2NyaWJlTm9kZShub2RlLCBpbmRlbnQpIHsKICAgICAgICB2YXIgc2tpcFRvTm9kZSA9IGZpbmROb3RhYmxlTm9kZShub2RlLCBpbmRlbnQpOwogICAgICAgIGlmIChza2lwVG9Ob2RlICE9PSBub2RlICYmICgxICE9PSBub2RlLmNoaWxkcmVuLmxlbmd0aCB8fCBub2RlLmNoaWxkcmVuWzBdICE9PSBza2lwVG9Ob2RlKSkKICAgICAgICAgIHJldHVybiBpbmRlbnRhdGlvbihpbmRlbnQpICsgIi4uLlxuIiArIGRlc2NyaWJlTm9kZShza2lwVG9Ob2RlLCBpbmRlbnQgKyAxKTsKICAgICAgICBza2lwVG9Ob2RlID0gIiI7CiAgICAgICAgdmFyIGRlYnVnSW5mbyA9IG5vZGUuZmliZXIuX2RlYnVnSW5mbzsKICAgICAgICBpZiAoZGVidWdJbmZvKQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkZWJ1Z0luZm8ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIHNlcnZlckNvbXBvbmVudE5hbWUgPSBkZWJ1Z0luZm9baV0ubmFtZTsKICAgICAgICAgICAgInN0cmluZyIgPT09IHR5cGVvZiBzZXJ2ZXJDb21wb25lbnROYW1lICYmIChza2lwVG9Ob2RlICs9IGluZGVudGF0aW9uKGluZGVudCkgKyAiPCIgKyBzZXJ2ZXJDb21wb25lbnROYW1lICsgIj5cbiIsIGluZGVudCsrKTsKICAgICAgICAgIH0KICAgICAgICBkZWJ1Z0luZm8gPSAiIjsKICAgICAgICBpID0gbm9kZS5maWJlci5wZW5kaW5nUHJvcHM7CiAgICAgICAgaWYgKDYgPT09IG5vZGUuZmliZXIudGFnKQogICAgICAgICAgZGVidWdJbmZvID0gZGVzY3JpYmVUZXh0RGlmZihpLCBub2RlLnNlcnZlclByb3BzLCBpbmRlbnQpLCBpbmRlbnQrKzsKICAgICAgICBlbHNlIGlmIChzZXJ2ZXJDb21wb25lbnROYW1lID0gZGVzY3JpYmVGaWJlclR5cGUobm9kZS5maWJlciksIG51bGwgIT09IHNlcnZlckNvbXBvbmVudE5hbWUpCiAgICAgICAgICBpZiAodm9pZCAwID09PSBub2RlLnNlcnZlclByb3BzKSB7CiAgICAgICAgICAgIGRlYnVnSW5mbyA9IGluZGVudDsKICAgICAgICAgICAgdmFyIG1heExlbmd0aCA9IDEyMCAtIDIgKiBkZWJ1Z0luZm8gLSBzZXJ2ZXJDb21wb25lbnROYW1lLmxlbmd0aCAtIDIsIGNvbnRlbnQgPSAiIjsKICAgICAgICAgICAgZm9yIChwcm9wTmFtZSBpbiBpKQogICAgICAgICAgICAgIGlmIChpLmhhc093blByb3BlcnR5KHByb3BOYW1lKSAmJiAiY2hpbGRyZW4iICE9PSBwcm9wTmFtZSkgewogICAgICAgICAgICAgICAgdmFyIHByb3BWYWx1ZSA9IGRlc2NyaWJlUHJvcFZhbHVlKGlbcHJvcE5hbWVdLCAxNSk7CiAgICAgICAgICAgICAgICBtYXhMZW5ndGggLT0gcHJvcE5hbWUubGVuZ3RoICsgcHJvcFZhbHVlLmxlbmd0aCArIDI7CiAgICAgICAgICAgICAgICBpZiAoMCA+IG1heExlbmd0aCkgewogICAgICAgICAgICAgICAgICBjb250ZW50ICs9ICIgLi4uIjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb250ZW50ICs9ICIgIiArIHByb3BOYW1lICsgIj0iICsgcHJvcFZhbHVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgZGVidWdJbmZvID0gaW5kZW50YXRpb24oZGVidWdJbmZvKSArICI8IiArIHNlcnZlckNvbXBvbmVudE5hbWUgKyBjb250ZW50ICsgIj5cbiI7CiAgICAgICAgICAgIGluZGVudCsrOwogICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgIG51bGwgPT09IG5vZGUuc2VydmVyUHJvcHMgPyAoZGVidWdJbmZvID0gZGVzY3JpYmVFeHBhbmRlZEVsZW1lbnQoCiAgICAgICAgICAgICAgc2VydmVyQ29tcG9uZW50TmFtZSwKICAgICAgICAgICAgICBpLAogICAgICAgICAgICAgIGFkZGVkKGluZGVudCkKICAgICAgICAgICAgKSwgaW5kZW50KyspIDogInN0cmluZyIgPT09IHR5cGVvZiBub2RlLnNlcnZlclByb3BzID8gY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAiU2hvdWxkIG5vdCBoYXZlIG1hdGNoZWQgYSBub24gSG9zdFRleHQgZmliZXIgdG8gYSBUZXh0IG5vZGUuIFRoaXMgaXMgYSBidWcgaW4gUmVhY3QuIgogICAgICAgICAgICApIDogKGRlYnVnSW5mbyA9IGRlc2NyaWJlRWxlbWVudERpZmYoCiAgICAgICAgICAgICAgc2VydmVyQ29tcG9uZW50TmFtZSwKICAgICAgICAgICAgICBpLAogICAgICAgICAgICAgIG5vZGUuc2VydmVyUHJvcHMsCiAgICAgICAgICAgICAgaW5kZW50CiAgICAgICAgICAgICksIGluZGVudCsrKTsKICAgICAgICB2YXIgcHJvcE5hbWUgPSAiIjsKICAgICAgICBpID0gbm9kZS5maWJlci5jaGlsZDsKICAgICAgICBmb3IgKHNlcnZlckNvbXBvbmVudE5hbWUgPSAwOyBpICYmIHNlcnZlckNvbXBvbmVudE5hbWUgPCBub2RlLmNoaWxkcmVuLmxlbmd0aDsgKQogICAgICAgICAgbWF4TGVuZ3RoID0gbm9kZS5jaGlsZHJlbltzZXJ2ZXJDb21wb25lbnROYW1lXSwgbWF4TGVuZ3RoLmZpYmVyID09PSBpID8gKHByb3BOYW1lICs9IGRlc2NyaWJlTm9kZShtYXhMZW5ndGgsIGluZGVudCksIHNlcnZlckNvbXBvbmVudE5hbWUrKykgOiBwcm9wTmFtZSArPSBkZXNjcmliZVNpYmxpbmdGaWJlcihpLCBpbmRlbnQpLCBpID0gaS5zaWJsaW5nOwogICAgICAgIGkgJiYgMCA8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoICYmIChwcm9wTmFtZSArPSBpbmRlbnRhdGlvbihpbmRlbnQpICsgIi4uLlxuIik7CiAgICAgICAgaSA9IG5vZGUuc2VydmVyVGFpbDsKICAgICAgICBudWxsID09PSBub2RlLnNlcnZlclByb3BzICYmIGluZGVudC0tOwogICAgICAgIGZvciAobm9kZSA9IDA7IG5vZGUgPCBpLmxlbmd0aDsgbm9kZSsrKQogICAgICAgICAgc2VydmVyQ29tcG9uZW50TmFtZSA9IGlbbm9kZV0sIHByb3BOYW1lID0gInN0cmluZyIgPT09IHR5cGVvZiBzZXJ2ZXJDb21wb25lbnROYW1lID8gcHJvcE5hbWUgKyAocmVtb3ZlZChpbmRlbnQpICsgZGVzY3JpYmVUZXh0Tm9kZShzZXJ2ZXJDb21wb25lbnROYW1lLCAxMjAgLSAyICogaW5kZW50KSArICJcbiIpIDogcHJvcE5hbWUgKyBkZXNjcmliZUV4cGFuZGVkRWxlbWVudCgKICAgICAgICAgICAgc2VydmVyQ29tcG9uZW50TmFtZS50eXBlLAogICAgICAgICAgICBzZXJ2ZXJDb21wb25lbnROYW1lLnByb3BzLAogICAgICAgICAgICByZW1vdmVkKGluZGVudCkKICAgICAgICAgICk7CiAgICAgICAgcmV0dXJuIHNraXBUb05vZGUgKyBkZWJ1Z0luZm8gKyBwcm9wTmFtZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBkZXNjcmliZURpZmYocm9vdE5vZGUpIHsKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuICJcblxuIiArIGRlc2NyaWJlTm9kZShyb290Tm9kZSwgMCk7CiAgICAgICAgfSBjYXRjaCAoeCkgewogICAgICAgICAgcmV0dXJuICIiOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBkZXNjcmliZUFuY2VzdG9ycyhhbmNlc3RvciwgY2hpbGQsIHByb3BzKSB7CiAgICAgICAgZm9yICh2YXIgZmliZXIgPSBjaGlsZCwgbm9kZSA9IG51bGwsIGRpc3RhbmNlRnJvbUxlYWYgPSAwOyBmaWJlcjsgKQogICAgICAgICAgZmliZXIgPT09IGFuY2VzdG9yICYmIChkaXN0YW5jZUZyb21MZWFmID0gMCksIG5vZGUgPSB7CiAgICAgICAgICAgIGZpYmVyLAogICAgICAgICAgICBjaGlsZHJlbjogbnVsbCAhPT0gbm9kZSA/IFtub2RlXSA6IFtdLAogICAgICAgICAgICBzZXJ2ZXJQcm9wczogZmliZXIgPT09IGNoaWxkID8gcHJvcHMgOiBmaWJlciA9PT0gYW5jZXN0b3IgPyBudWxsIDogdm9pZCAwLAogICAgICAgICAgICBzZXJ2ZXJUYWlsOiBbXSwKICAgICAgICAgICAgZGlzdGFuY2VGcm9tTGVhZgogICAgICAgICAgfSwgZGlzdGFuY2VGcm9tTGVhZisrLCBmaWJlciA9IGZpYmVyLnJldHVybjsKICAgICAgICByZXR1cm4gbnVsbCAhPT0gbm9kZSA/IGRlc2NyaWJlRGlmZihub2RlKS5yZXBsYWNlQWxsKC9eWystXS9nbSwgIj4iKSA6ICIiOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHVwZGF0ZWRBbmNlc3RvckluZm9EZXYob2xkSW5mbywgdGFnKSB7CiAgICAgICAgdmFyIGFuY2VzdG9ySW5mbyA9IGFzc2lnbih7fSwgb2xkSW5mbyB8fCBlbXB0eUFuY2VzdG9ySW5mb0RldiksIGluZm8gPSB7IHRhZyB9OwogICAgICAgIC0xICE9PSBpblNjb3BlVGFncy5pbmRleE9mKHRhZykgJiYgKGFuY2VzdG9ySW5mby5hVGFnSW5TY29wZSA9IG51bGwsIGFuY2VzdG9ySW5mby5idXR0b25UYWdJblNjb3BlID0gbnVsbCwgYW5jZXN0b3JJbmZvLm5vYnJUYWdJblNjb3BlID0gbnVsbCk7CiAgICAgICAgLTEgIT09IGJ1dHRvblNjb3BlVGFncy5pbmRleE9mKHRhZykgJiYgKGFuY2VzdG9ySW5mby5wVGFnSW5CdXR0b25TY29wZSA9IG51bGwpOwogICAgICAgIC0xICE9PSBzcGVjaWFsVGFncy5pbmRleE9mKHRhZykgJiYgImFkZHJlc3MiICE9PSB0YWcgJiYgImRpdiIgIT09IHRhZyAmJiAicCIgIT09IHRhZyAmJiAoYW5jZXN0b3JJbmZvLmxpc3RJdGVtVGFnQXV0b2Nsb3NpbmcgPSBudWxsLCBhbmNlc3RvckluZm8uZGxJdGVtVGFnQXV0b2Nsb3NpbmcgPSBudWxsKTsKICAgICAgICBhbmNlc3RvckluZm8uY3VycmVudCA9IGluZm87CiAgICAgICAgImZvcm0iID09PSB0YWcgJiYgKGFuY2VzdG9ySW5mby5mb3JtVGFnID0gaW5mbyk7CiAgICAgICAgImEiID09PSB0YWcgJiYgKGFuY2VzdG9ySW5mby5hVGFnSW5TY29wZSA9IGluZm8pOwogICAgICAgICJidXR0b24iID09PSB0YWcgJiYgKGFuY2VzdG9ySW5mby5idXR0b25UYWdJblNjb3BlID0gaW5mbyk7CiAgICAgICAgIm5vYnIiID09PSB0YWcgJiYgKGFuY2VzdG9ySW5mby5ub2JyVGFnSW5TY29wZSA9IGluZm8pOwogICAgICAgICJwIiA9PT0gdGFnICYmIChhbmNlc3RvckluZm8ucFRhZ0luQnV0dG9uU2NvcGUgPSBpbmZvKTsKICAgICAgICAibGkiID09PSB0YWcgJiYgKGFuY2VzdG9ySW5mby5saXN0SXRlbVRhZ0F1dG9jbG9zaW5nID0gaW5mbyk7CiAgICAgICAgaWYgKCJkZCIgPT09IHRhZyB8fCAiZHQiID09PSB0YWcpCiAgICAgICAgICBhbmNlc3RvckluZm8uZGxJdGVtVGFnQXV0b2Nsb3NpbmcgPSBpbmZvOwogICAgICAgICIjZG9jdW1lbnQiID09PSB0YWcgfHwgImh0bWwiID09PSB0YWcgPyBhbmNlc3RvckluZm8uY29udGFpbmVyVGFnSW5TY29wZSA9IG51bGwgOiBhbmNlc3RvckluZm8uY29udGFpbmVyVGFnSW5TY29wZSB8fCAoYW5jZXN0b3JJbmZvLmNvbnRhaW5lclRhZ0luU2NvcGUgPSBpbmZvKTsKICAgICAgICBudWxsICE9PSBvbGRJbmZvIHx8ICIjZG9jdW1lbnQiICE9PSB0YWcgJiYgImh0bWwiICE9PSB0YWcgJiYgImJvZHkiICE9PSB0YWcgPyB0cnVlID09PSBhbmNlc3RvckluZm8uaW1wbGljaXRSb290U2NvcGUgJiYgKGFuY2VzdG9ySW5mby5pbXBsaWNpdFJvb3RTY29wZSA9IGZhbHNlKSA6IGFuY2VzdG9ySW5mby5pbXBsaWNpdFJvb3RTY29wZSA9IHRydWU7CiAgICAgICAgcmV0dXJuIGFuY2VzdG9ySW5mbzsKICAgICAgfQogICAgICBmdW5jdGlvbiBpc1RhZ1ZhbGlkV2l0aFBhcmVudCh0YWcsIHBhcmVudFRhZywgaW1wbGljaXRSb290U2NvcGUpIHsKICAgICAgICBzd2l0Y2ggKHBhcmVudFRhZykgewogICAgICAgICAgY2FzZSAic2VsZWN0IjoKICAgICAgICAgICAgcmV0dXJuICJociIgPT09IHRhZyB8fCAib3B0aW9uIiA9PT0gdGFnIHx8ICJvcHRncm91cCIgPT09IHRhZyB8fCAic2NyaXB0IiA9PT0gdGFnIHx8ICJ0ZW1wbGF0ZSIgPT09IHRhZyB8fCAiI3RleHQiID09PSB0YWc7CiAgICAgICAgICBjYXNlICJvcHRncm91cCI6CiAgICAgICAgICAgIHJldHVybiAib3B0aW9uIiA9PT0gdGFnIHx8ICIjdGV4dCIgPT09IHRhZzsKICAgICAgICAgIGNhc2UgIm9wdGlvbiI6CiAgICAgICAgICAgIHJldHVybiAiI3RleHQiID09PSB0YWc7CiAgICAgICAgICBjYXNlICJ0ciI6CiAgICAgICAgICAgIHJldHVybiAidGgiID09PSB0YWcgfHwgInRkIiA9PT0gdGFnIHx8ICJzdHlsZSIgPT09IHRhZyB8fCAic2NyaXB0IiA9PT0gdGFnIHx8ICJ0ZW1wbGF0ZSIgPT09IHRhZzsKICAgICAgICAgIGNhc2UgInRib2R5IjoKICAgICAgICAgIGNhc2UgInRoZWFkIjoKICAgICAgICAgIGNhc2UgInRmb290IjoKICAgICAgICAgICAgcmV0dXJuICJ0ciIgPT09IHRhZyB8fCAic3R5bGUiID09PSB0YWcgfHwgInNjcmlwdCIgPT09IHRhZyB8fCAidGVtcGxhdGUiID09PSB0YWc7CiAgICAgICAgICBjYXNlICJjb2xncm91cCI6CiAgICAgICAgICAgIHJldHVybiAiY29sIiA9PT0gdGFnIHx8ICJ0ZW1wbGF0ZSIgPT09IHRhZzsKICAgICAgICAgIGNhc2UgInRhYmxlIjoKICAgICAgICAgICAgcmV0dXJuICJjYXB0aW9uIiA9PT0gdGFnIHx8ICJjb2xncm91cCIgPT09IHRhZyB8fCAidGJvZHkiID09PSB0YWcgfHwgInRmb290IiA9PT0gdGFnIHx8ICJ0aGVhZCIgPT09IHRhZyB8fCAic3R5bGUiID09PSB0YWcgfHwgInNjcmlwdCIgPT09IHRhZyB8fCAidGVtcGxhdGUiID09PSB0YWc7CiAgICAgICAgICBjYXNlICJoZWFkIjoKICAgICAgICAgICAgcmV0dXJuICJiYXNlIiA9PT0gdGFnIHx8ICJiYXNlZm9udCIgPT09IHRhZyB8fCAiYmdzb3VuZCIgPT09IHRhZyB8fCAibGluayIgPT09IHRhZyB8fCAibWV0YSIgPT09IHRhZyB8fCAidGl0bGUiID09PSB0YWcgfHwgIm5vc2NyaXB0IiA9PT0gdGFnIHx8ICJub2ZyYW1lcyIgPT09IHRhZyB8fCAic3R5bGUiID09PSB0YWcgfHwgInNjcmlwdCIgPT09IHRhZyB8fCAidGVtcGxhdGUiID09PSB0YWc7CiAgICAgICAgICBjYXNlICJodG1sIjoKICAgICAgICAgICAgaWYgKGltcGxpY2l0Um9vdFNjb3BlKSBicmVhazsKICAgICAgICAgICAgcmV0dXJuICJoZWFkIiA9PT0gdGFnIHx8ICJib2R5IiA9PT0gdGFnIHx8ICJmcmFtZXNldCIgPT09IHRhZzsKICAgICAgICAgIGNhc2UgImZyYW1lc2V0IjoKICAgICAgICAgICAgcmV0dXJuICJmcmFtZSIgPT09IHRhZzsKICAgICAgICAgIGNhc2UgIiNkb2N1bWVudCI6CiAgICAgICAgICAgIGlmICghaW1wbGljaXRSb290U2NvcGUpIHJldHVybiAiaHRtbCIgPT09IHRhZzsKICAgICAgICB9CiAgICAgICAgc3dpdGNoICh0YWcpIHsKICAgICAgICAgIGNhc2UgImgxIjoKICAgICAgICAgIGNhc2UgImgyIjoKICAgICAgICAgIGNhc2UgImgzIjoKICAgICAgICAgIGNhc2UgImg0IjoKICAgICAgICAgIGNhc2UgImg1IjoKICAgICAgICAgIGNhc2UgImg2IjoKICAgICAgICAgICAgcmV0dXJuICJoMSIgIT09IHBhcmVudFRhZyAmJiAiaDIiICE9PSBwYXJlbnRUYWcgJiYgImgzIiAhPT0gcGFyZW50VGFnICYmICJoNCIgIT09IHBhcmVudFRhZyAmJiAiaDUiICE9PSBwYXJlbnRUYWcgJiYgImg2IiAhPT0gcGFyZW50VGFnOwogICAgICAgICAgY2FzZSAicnAiOgogICAgICAgICAgY2FzZSAicnQiOgogICAgICAgICAgICByZXR1cm4gLTEgPT09IGltcGxpZWRFbmRUYWdzLmluZGV4T2YocGFyZW50VGFnKTsKICAgICAgICAgIGNhc2UgImNhcHRpb24iOgogICAgICAgICAgY2FzZSAiY29sIjoKICAgICAgICAgIGNhc2UgImNvbGdyb3VwIjoKICAgICAgICAgIGNhc2UgImZyYW1lc2V0IjoKICAgICAgICAgIGNhc2UgImZyYW1lIjoKICAgICAgICAgIGNhc2UgInRib2R5IjoKICAgICAgICAgIGNhc2UgInRkIjoKICAgICAgICAgIGNhc2UgInRmb290IjoKICAgICAgICAgIGNhc2UgInRoIjoKICAgICAgICAgIGNhc2UgInRoZWFkIjoKICAgICAgICAgIGNhc2UgInRyIjoKICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gcGFyZW50VGFnOwogICAgICAgICAgY2FzZSAiaGVhZCI6CiAgICAgICAgICAgIHJldHVybiBpbXBsaWNpdFJvb3RTY29wZSB8fCBudWxsID09PSBwYXJlbnRUYWc7CiAgICAgICAgICBjYXNlICJodG1sIjoKICAgICAgICAgICAgcmV0dXJuIGltcGxpY2l0Um9vdFNjb3BlICYmICIjZG9jdW1lbnQiID09PSBwYXJlbnRUYWcgfHwgbnVsbCA9PT0gcGFyZW50VGFnOwogICAgICAgICAgY2FzZSAiYm9keSI6CiAgICAgICAgICAgIHJldHVybiBpbXBsaWNpdFJvb3RTY29wZSAmJiAoIiNkb2N1bWVudCIgPT09IHBhcmVudFRhZyB8fCAiaHRtbCIgPT09IHBhcmVudFRhZykgfHwgbnVsbCA9PT0gcGFyZW50VGFnOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBmaW5kSW52YWxpZEFuY2VzdG9yRm9yVGFnKHRhZywgYW5jZXN0b3JJbmZvKSB7CiAgICAgICAgc3dpdGNoICh0YWcpIHsKICAgICAgICAgIGNhc2UgImFkZHJlc3MiOgogICAgICAgICAgY2FzZSAiYXJ0aWNsZSI6CiAgICAgICAgICBjYXNlICJhc2lkZSI6CiAgICAgICAgICBjYXNlICJibG9ja3F1b3RlIjoKICAgICAgICAgIGNhc2UgImNlbnRlciI6CiAgICAgICAgICBjYXNlICJkZXRhaWxzIjoKICAgICAgICAgIGNhc2UgImRpYWxvZyI6CiAgICAgICAgICBjYXNlICJkaXIiOgogICAgICAgICAgY2FzZSAiZGl2IjoKICAgICAgICAgIGNhc2UgImRsIjoKICAgICAgICAgIGNhc2UgImZpZWxkc2V0IjoKICAgICAgICAgIGNhc2UgImZpZ2NhcHRpb24iOgogICAgICAgICAgY2FzZSAiZmlndXJlIjoKICAgICAgICAgIGNhc2UgImZvb3RlciI6CiAgICAgICAgICBjYXNlICJoZWFkZXIiOgogICAgICAgICAgY2FzZSAiaGdyb3VwIjoKICAgICAgICAgIGNhc2UgIm1haW4iOgogICAgICAgICAgY2FzZSAibWVudSI6CiAgICAgICAgICBjYXNlICJuYXYiOgogICAgICAgICAgY2FzZSAib2wiOgogICAgICAgICAgY2FzZSAicCI6CiAgICAgICAgICBjYXNlICJzZWN0aW9uIjoKICAgICAgICAgIGNhc2UgInN1bW1hcnkiOgogICAgICAgICAgY2FzZSAidWwiOgogICAgICAgICAgY2FzZSAicHJlIjoKICAgICAgICAgIGNhc2UgImxpc3RpbmciOgogICAgICAgICAgY2FzZSAidGFibGUiOgogICAgICAgICAgY2FzZSAiaHIiOgogICAgICAgICAgY2FzZSAieG1wIjoKICAgICAgICAgIGNhc2UgImgxIjoKICAgICAgICAgIGNhc2UgImgyIjoKICAgICAgICAgIGNhc2UgImgzIjoKICAgICAgICAgIGNhc2UgImg0IjoKICAgICAgICAgIGNhc2UgImg1IjoKICAgICAgICAgIGNhc2UgImg2IjoKICAgICAgICAgICAgcmV0dXJuIGFuY2VzdG9ySW5mby5wVGFnSW5CdXR0b25TY29wZTsKICAgICAgICAgIGNhc2UgImZvcm0iOgogICAgICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLmZvcm1UYWcgfHwgYW5jZXN0b3JJbmZvLnBUYWdJbkJ1dHRvblNjb3BlOwogICAgICAgICAgY2FzZSAibGkiOgogICAgICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLmxpc3RJdGVtVGFnQXV0b2Nsb3Npbmc7CiAgICAgICAgICBjYXNlICJkZCI6CiAgICAgICAgICBjYXNlICJkdCI6CiAgICAgICAgICAgIHJldHVybiBhbmNlc3RvckluZm8uZGxJdGVtVGFnQXV0b2Nsb3Npbmc7CiAgICAgICAgICBjYXNlICJidXR0b24iOgogICAgICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLmJ1dHRvblRhZ0luU2NvcGU7CiAgICAgICAgICBjYXNlICJhIjoKICAgICAgICAgICAgcmV0dXJuIGFuY2VzdG9ySW5mby5hVGFnSW5TY29wZTsKICAgICAgICAgIGNhc2UgIm5vYnIiOgogICAgICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLm5vYnJUYWdJblNjb3BlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICBmdW5jdGlvbiBmaW5kQW5jZXN0b3IocGFyZW50LCB0YWdOYW1lKSB7CiAgICAgICAgZm9yICg7IHBhcmVudDsgKSB7CiAgICAgICAgICBzd2l0Y2ggKHBhcmVudC50YWcpIHsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgIGlmIChwYXJlbnQudHlwZSA9PT0gdGFnTmFtZSkgcmV0dXJuIHBhcmVudDsKICAgICAgICAgIH0KICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5yZXR1cm47CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlRE9NTmVzdGluZyhjaGlsZFRhZywgYW5jZXN0b3JJbmZvKSB7CiAgICAgICAgYW5jZXN0b3JJbmZvID0gYW5jZXN0b3JJbmZvIHx8IGVtcHR5QW5jZXN0b3JJbmZvRGV2OwogICAgICAgIHZhciBwYXJlbnRJbmZvID0gYW5jZXN0b3JJbmZvLmN1cnJlbnQ7CiAgICAgICAgYW5jZXN0b3JJbmZvID0gKHBhcmVudEluZm8gPSBpc1RhZ1ZhbGlkV2l0aFBhcmVudCgKICAgICAgICAgIGNoaWxkVGFnLAogICAgICAgICAgcGFyZW50SW5mbyAmJiBwYXJlbnRJbmZvLnRhZywKICAgICAgICAgIGFuY2VzdG9ySW5mby5pbXBsaWNpdFJvb3RTY29wZQogICAgICAgICkgPyBudWxsIDogcGFyZW50SW5mbykgPyBudWxsIDogZmluZEludmFsaWRBbmNlc3RvckZvclRhZyhjaGlsZFRhZywgYW5jZXN0b3JJbmZvKTsKICAgICAgICBhbmNlc3RvckluZm8gPSBwYXJlbnRJbmZvIHx8IGFuY2VzdG9ySW5mbzsKICAgICAgICBpZiAoIWFuY2VzdG9ySW5mbykgcmV0dXJuIHRydWU7CiAgICAgICAgdmFyIGFuY2VzdG9yVGFnID0gYW5jZXN0b3JJbmZvLnRhZzsKICAgICAgICBhbmNlc3RvckluZm8gPSBTdHJpbmcoISFwYXJlbnRJbmZvKSArICJ8IiArIGNoaWxkVGFnICsgInwiICsgYW5jZXN0b3JUYWc7CiAgICAgICAgaWYgKGRpZFdhcm5bYW5jZXN0b3JJbmZvXSkgcmV0dXJuIGZhbHNlOwogICAgICAgIGRpZFdhcm5bYW5jZXN0b3JJbmZvXSA9IHRydWU7CiAgICAgICAgdmFyIGFuY2VzdG9yID0gKGFuY2VzdG9ySW5mbyA9IGN1cnJlbnQpID8gZmluZEFuY2VzdG9yKGFuY2VzdG9ySW5mby5yZXR1cm4sIGFuY2VzdG9yVGFnKSA6IG51bGwsIGFuY2VzdG9yRGVzY3JpcHRpb24gPSBudWxsICE9PSBhbmNlc3RvckluZm8gJiYgbnVsbCAhPT0gYW5jZXN0b3IgPyBkZXNjcmliZUFuY2VzdG9ycyhhbmNlc3RvciwgYW5jZXN0b3JJbmZvLCBudWxsKSA6ICIiLCB0YWdEaXNwbGF5TmFtZSA9ICI8IiArIGNoaWxkVGFnICsgIj4iOwogICAgICAgIHBhcmVudEluZm8gPyAocGFyZW50SW5mbyA9ICIiLCAidGFibGUiID09PSBhbmNlc3RvclRhZyAmJiAidHIiID09PSBjaGlsZFRhZyAmJiAocGFyZW50SW5mbyArPSAiIEFkZCBhIDx0Ym9keT4sIDx0aGVhZD4gb3IgPHRmb290PiB0byB5b3VyIGNvZGUgdG8gbWF0Y2ggdGhlIERPTSB0cmVlIGdlbmVyYXRlZCBieSB0aGUgYnJvd3Nlci4iKSwgY29uc29sZS5lcnJvcigKICAgICAgICAgICJJbiBIVE1MLCAlcyBjYW5ub3QgYmUgYSBjaGlsZCBvZiA8JXM+LiVzXG5UaGlzIHdpbGwgY2F1c2UgYSBoeWRyYXRpb24gZXJyb3IuJXMiLAogICAgICAgICAgdGFnRGlzcGxheU5hbWUsCiAgICAgICAgICBhbmNlc3RvclRhZywKICAgICAgICAgIHBhcmVudEluZm8sCiAgICAgICAgICBhbmNlc3RvckRlc2NyaXB0aW9uCiAgICAgICAgKSkgOiBjb25zb2xlLmVycm9yKAogICAgICAgICAgIkluIEhUTUwsICVzIGNhbm5vdCBiZSBhIGRlc2NlbmRhbnQgb2YgPCVzPi5cblRoaXMgd2lsbCBjYXVzZSBhIGh5ZHJhdGlvbiBlcnJvci4lcyIsCiAgICAgICAgICB0YWdEaXNwbGF5TmFtZSwKICAgICAgICAgIGFuY2VzdG9yVGFnLAogICAgICAgICAgYW5jZXN0b3JEZXNjcmlwdGlvbgogICAgICAgICk7CiAgICAgICAgYW5jZXN0b3JJbmZvICYmIChjaGlsZFRhZyA9IGFuY2VzdG9ySW5mby5yZXR1cm4sIG51bGwgPT09IGFuY2VzdG9yIHx8IG51bGwgPT09IGNoaWxkVGFnIHx8IGFuY2VzdG9yID09PSBjaGlsZFRhZyAmJiBjaGlsZFRhZy5fZGVidWdPd25lciA9PT0gYW5jZXN0b3JJbmZvLl9kZWJ1Z093bmVyIHx8IHJ1bldpdGhGaWJlckluREVWKGFuY2VzdG9yLCBmdW5jdGlvbigpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICI8JXM+IGNhbm5vdCBjb250YWluIGEgbmVzdGVkICVzLlxuU2VlIHRoaXMgbG9nIGZvciB0aGUgYW5jZXN0b3Igc3RhY2sgdHJhY2UuIiwKICAgICAgICAgICAgYW5jZXN0b3JUYWcsCiAgICAgICAgICAgIHRhZ0Rpc3BsYXlOYW1lCiAgICAgICAgICApOwogICAgICAgIH0pKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdmFsaWRhdGVUZXh0TmVzdGluZyhjaGlsZFRleHQsIHBhcmVudFRhZywgaW1wbGljaXRSb290U2NvcGUpIHsKICAgICAgICBpZiAoaW1wbGljaXRSb290U2NvcGUgfHwgaXNUYWdWYWxpZFdpdGhQYXJlbnQoIiN0ZXh0IiwgcGFyZW50VGFnLCBmYWxzZSkpCiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBpbXBsaWNpdFJvb3RTY29wZSA9ICIjdGV4dHwiICsgcGFyZW50VGFnOwogICAgICAgIGlmIChkaWRXYXJuW2ltcGxpY2l0Um9vdFNjb3BlXSkgcmV0dXJuIGZhbHNlOwogICAgICAgIGRpZFdhcm5baW1wbGljaXRSb290U2NvcGVdID0gdHJ1ZTsKICAgICAgICB2YXIgYW5jZXN0b3IgPSAoaW1wbGljaXRSb290U2NvcGUgPSBjdXJyZW50KSA/IGZpbmRBbmNlc3RvcihpbXBsaWNpdFJvb3RTY29wZSwgcGFyZW50VGFnKSA6IG51bGw7CiAgICAgICAgaW1wbGljaXRSb290U2NvcGUgPSBudWxsICE9PSBpbXBsaWNpdFJvb3RTY29wZSAmJiBudWxsICE9PSBhbmNlc3RvciA/IGRlc2NyaWJlQW5jZXN0b3JzKAogICAgICAgICAgYW5jZXN0b3IsCiAgICAgICAgICBpbXBsaWNpdFJvb3RTY29wZSwKICAgICAgICAgIDYgIT09IGltcGxpY2l0Um9vdFNjb3BlLnRhZyA/IHsgY2hpbGRyZW46IG51bGwgfSA6IG51bGwKICAgICAgICApIDogIiI7CiAgICAgICAgL1xTLy50ZXN0KGNoaWxkVGV4dCkgPyBjb25zb2xlLmVycm9yKAogICAgICAgICAgIkluIEhUTUwsIHRleHQgbm9kZXMgY2Fubm90IGJlIGEgY2hpbGQgb2YgPCVzPi5cblRoaXMgd2lsbCBjYXVzZSBhIGh5ZHJhdGlvbiBlcnJvci4lcyIsCiAgICAgICAgICBwYXJlbnRUYWcsCiAgICAgICAgICBpbXBsaWNpdFJvb3RTY29wZQogICAgICAgICkgOiBjb25zb2xlLmVycm9yKAogICAgICAgICAgIkluIEhUTUwsIHdoaXRlc3BhY2UgdGV4dCBub2RlcyBjYW5ub3QgYmUgYSBjaGlsZCBvZiA8JXM+LiBNYWtlIHN1cmUgeW91IGRvbid0IGhhdmUgYW55IGV4dHJhIHdoaXRlc3BhY2UgYmV0d2VlbiB0YWdzIG9uIGVhY2ggbGluZSBvZiB5b3VyIHNvdXJjZSBjb2RlLlxuVGhpcyB3aWxsIGNhdXNlIGEgaHlkcmF0aW9uIGVycm9yLiVzIiwKICAgICAgICAgIHBhcmVudFRhZywKICAgICAgICAgIGltcGxpY2l0Um9vdFNjb3BlCiAgICAgICAgKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gc2V0VGV4dENvbnRlbnQobm9kZSwgdGV4dCkgewogICAgICAgIGlmICh0ZXh0KSB7CiAgICAgICAgICB2YXIgZmlyc3RDaGlsZCA9IG5vZGUuZmlyc3RDaGlsZDsKICAgICAgICAgIGlmIChmaXJzdENoaWxkICYmIGZpcnN0Q2hpbGQgPT09IG5vZGUubGFzdENoaWxkICYmIDMgPT09IGZpcnN0Q2hpbGQubm9kZVR5cGUpIHsKICAgICAgICAgICAgZmlyc3RDaGlsZC5ub2RlVmFsdWUgPSB0ZXh0OwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIG5vZGUudGV4dENvbnRlbnQgPSB0ZXh0OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNhbWVsaXplKHN0cmluZykgewogICAgICAgIHJldHVybiBzdHJpbmcucmVwbGFjZShoeXBoZW5QYXR0ZXJuLCBmdW5jdGlvbihfLCBjaGFyYWN0ZXIpIHsKICAgICAgICAgIHJldHVybiBjaGFyYWN0ZXIudG9VcHBlckNhc2UoKTsKICAgICAgICB9KTsKICAgICAgfQogICAgICBmdW5jdGlvbiBzZXRWYWx1ZUZvclN0eWxlKHN0eWxlMiwgc3R5bGVOYW1lLCB2YWx1ZSkgewogICAgICAgIHZhciBpc0N1c3RvbVByb3BlcnR5ID0gMCA9PT0gc3R5bGVOYW1lLmluZGV4T2YoIi0tIik7CiAgICAgICAgaXNDdXN0b21Qcm9wZXJ0eSB8fCAoLTEgPCBzdHlsZU5hbWUuaW5kZXhPZigiLSIpID8gd2FybmVkU3R5bGVOYW1lcy5oYXNPd25Qcm9wZXJ0eShzdHlsZU5hbWUpICYmIHdhcm5lZFN0eWxlTmFtZXNbc3R5bGVOYW1lXSB8fCAod2FybmVkU3R5bGVOYW1lc1tzdHlsZU5hbWVdID0gdHJ1ZSwgY29uc29sZS5lcnJvcigKICAgICAgICAgICJVbnN1cHBvcnRlZCBzdHlsZSBwcm9wZXJ0eSAlcy4gRGlkIHlvdSBtZWFuICVzPyIsCiAgICAgICAgICBzdHlsZU5hbWUsCiAgICAgICAgICBjYW1lbGl6ZShzdHlsZU5hbWUucmVwbGFjZShtc1BhdHRlcm4sICJtcy0iKSkKICAgICAgICApKSA6IGJhZFZlbmRvcmVkU3R5bGVOYW1lUGF0dGVybi50ZXN0KHN0eWxlTmFtZSkgPyB3YXJuZWRTdHlsZU5hbWVzLmhhc093blByb3BlcnR5KHN0eWxlTmFtZSkgJiYgd2FybmVkU3R5bGVOYW1lc1tzdHlsZU5hbWVdIHx8ICh3YXJuZWRTdHlsZU5hbWVzW3N0eWxlTmFtZV0gPSB0cnVlLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgIlVuc3VwcG9ydGVkIHZlbmRvci1wcmVmaXhlZCBzdHlsZSBwcm9wZXJ0eSAlcy4gRGlkIHlvdSBtZWFuICVzPyIsCiAgICAgICAgICBzdHlsZU5hbWUsCiAgICAgICAgICBzdHlsZU5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHlsZU5hbWUuc2xpY2UoMSkKICAgICAgICApKSA6ICFiYWRTdHlsZVZhbHVlV2l0aFNlbWljb2xvblBhdHRlcm4udGVzdCh2YWx1ZSkgfHwgd2FybmVkU3R5bGVWYWx1ZXMuaGFzT3duUHJvcGVydHkodmFsdWUpICYmIHdhcm5lZFN0eWxlVmFsdWVzW3ZhbHVlXSB8fCAod2FybmVkU3R5bGVWYWx1ZXNbdmFsdWVdID0gdHJ1ZSwgY29uc29sZS5lcnJvcigKICAgICAgICAgIGBTdHlsZSBwcm9wZXJ0eSB2YWx1ZXMgc2hvdWxkbid0IGNvbnRhaW4gYSBzZW1pY29sb24uIFRyeSAiJXM6ICVzIiBpbnN0ZWFkLmAsCiAgICAgICAgICBzdHlsZU5hbWUsCiAgICAgICAgICB2YWx1ZS5yZXBsYWNlKGJhZFN0eWxlVmFsdWVXaXRoU2VtaWNvbG9uUGF0dGVybiwgIiIpCiAgICAgICAgKSksICJudW1iZXIiID09PSB0eXBlb2YgdmFsdWUgJiYgKGlzTmFOKHZhbHVlKSA/IHdhcm5lZEZvck5hTlZhbHVlIHx8ICh3YXJuZWRGb3JOYU5WYWx1ZSA9IHRydWUsIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiYE5hTmAgaXMgYW4gaW52YWxpZCB2YWx1ZSBmb3IgdGhlIGAlc2AgY3NzIHN0eWxlIHByb3BlcnR5LiIsCiAgICAgICAgICBzdHlsZU5hbWUKICAgICAgICApKSA6IGlzRmluaXRlKHZhbHVlKSB8fCB3YXJuZWRGb3JJbmZpbml0eVZhbHVlIHx8ICh3YXJuZWRGb3JJbmZpbml0eVZhbHVlID0gdHJ1ZSwgY29uc29sZS5lcnJvcigKICAgICAgICAgICJgSW5maW5pdHlgIGlzIGFuIGludmFsaWQgdmFsdWUgZm9yIHRoZSBgJXNgIGNzcyBzdHlsZSBwcm9wZXJ0eS4iLAogICAgICAgICAgc3R5bGVOYW1lCiAgICAgICAgKSkpKTsKICAgICAgICBudWxsID09IHZhbHVlIHx8ICJib29sZWFuIiA9PT0gdHlwZW9mIHZhbHVlIHx8ICIiID09PSB2YWx1ZSA/IGlzQ3VzdG9tUHJvcGVydHkgPyBzdHlsZTIuc2V0UHJvcGVydHkoc3R5bGVOYW1lLCAiIikgOiAiZmxvYXQiID09PSBzdHlsZU5hbWUgPyBzdHlsZTIuY3NzRmxvYXQgPSAiIiA6IHN0eWxlMltzdHlsZU5hbWVdID0gIiIgOiBpc0N1c3RvbVByb3BlcnR5ID8gc3R5bGUyLnNldFByb3BlcnR5KHN0eWxlTmFtZSwgdmFsdWUpIDogIm51bWJlciIgIT09IHR5cGVvZiB2YWx1ZSB8fCAwID09PSB2YWx1ZSB8fCB1bml0bGVzc051bWJlcnMuaGFzKHN0eWxlTmFtZSkgPyAiZmxvYXQiID09PSBzdHlsZU5hbWUgPyBzdHlsZTIuY3NzRmxvYXQgPSB2YWx1ZSA6IChjaGVja0NTU1Byb3BlcnR5U3RyaW5nQ29lcmNpb24odmFsdWUsIHN0eWxlTmFtZSksIHN0eWxlMltzdHlsZU5hbWVdID0gKCIiICsgdmFsdWUpLnRyaW0oKSkgOiBzdHlsZTJbc3R5bGVOYW1lXSA9IHZhbHVlICsgInB4IjsKICAgICAgfQogICAgICBmdW5jdGlvbiBzZXRWYWx1ZUZvclN0eWxlcyhub2RlLCBzdHlsZXMsIHByZXZTdHlsZXMpIHsKICAgICAgICBpZiAobnVsbCAhPSBzdHlsZXMgJiYgIm9iamVjdCIgIT09IHR5cGVvZiBzdHlsZXMpCiAgICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICAgIlRoZSBgc3R5bGVgIHByb3AgZXhwZWN0cyBhIG1hcHBpbmcgZnJvbSBzdHlsZSBwcm9wZXJ0aWVzIHRvIHZhbHVlcywgbm90IGEgc3RyaW5nLiBGb3IgZXhhbXBsZSwgc3R5bGU9e3ttYXJnaW5SaWdodDogc3BhY2luZyArICdlbSd9fSB3aGVuIHVzaW5nIEpTWC4iCiAgICAgICAgICApOwogICAgICAgIHN0eWxlcyAmJiBPYmplY3QuZnJlZXplKHN0eWxlcyk7CiAgICAgICAgbm9kZSA9IG5vZGUuc3R5bGU7CiAgICAgICAgaWYgKG51bGwgIT0gcHJldlN0eWxlcykgewogICAgICAgICAgaWYgKHN0eWxlcykgewogICAgICAgICAgICB2YXIgZXhwYW5kZWRVcGRhdGVzID0ge307CiAgICAgICAgICAgIGlmIChwcmV2U3R5bGVzKSB7CiAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHByZXZTdHlsZXMpCiAgICAgICAgICAgICAgICBpZiAocHJldlN0eWxlcy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmICFzdHlsZXMuaGFzT3duUHJvcGVydHkoa2V5KSkKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbG9uZ2hhbmRzID0gc2hvcnRoYW5kVG9Mb25naGFuZFtrZXldIHx8IFtrZXldLCBpID0gMDsgaSA8IGxvbmdoYW5kcy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgICAgICAgICBleHBhbmRlZFVwZGF0ZXNbbG9uZ2hhbmRzW2ldXSA9IGtleTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKHZhciBfa2V5IGluIHN0eWxlcykKICAgICAgICAgICAgICBpZiAoc3R5bGVzLmhhc093blByb3BlcnR5KF9rZXkpICYmICghcHJldlN0eWxlcyB8fCBwcmV2U3R5bGVzW19rZXldICE9PSBzdHlsZXNbX2tleV0pKQogICAgICAgICAgICAgICAgZm9yIChrZXkgPSBzaG9ydGhhbmRUb0xvbmdoYW5kW19rZXldIHx8IFtfa2V5XSwgbG9uZ2hhbmRzID0gMDsgbG9uZ2hhbmRzIDwga2V5Lmxlbmd0aDsgbG9uZ2hhbmRzKyspCiAgICAgICAgICAgICAgICAgIGV4cGFuZGVkVXBkYXRlc1trZXlbbG9uZ2hhbmRzXV0gPSBfa2V5OwogICAgICAgICAgICBfa2V5ID0ge307CiAgICAgICAgICAgIGZvciAodmFyIGtleSRqc2NvbXAkMCBpbiBzdHlsZXMpCiAgICAgICAgICAgICAgZm9yIChrZXkgPSBzaG9ydGhhbmRUb0xvbmdoYW5kW2tleSRqc2NvbXAkMF0gfHwgW2tleSRqc2NvbXAkMF0sIGxvbmdoYW5kcyA9IDA7IGxvbmdoYW5kcyA8IGtleS5sZW5ndGg7IGxvbmdoYW5kcysrKQogICAgICAgICAgICAgICAgX2tleVtrZXlbbG9uZ2hhbmRzXV0gPSBrZXkkanNjb21wJDA7CiAgICAgICAgICAgIGtleSRqc2NvbXAkMCA9IHt9OwogICAgICAgICAgICBmb3IgKHZhciBfa2V5MiBpbiBleHBhbmRlZFVwZGF0ZXMpCiAgICAgICAgICAgICAgaWYgKGtleSA9IGV4cGFuZGVkVXBkYXRlc1tfa2V5Ml0sIChsb25naGFuZHMgPSBfa2V5W19rZXkyXSkgJiYga2V5ICE9PSBsb25naGFuZHMgJiYgKGkgPSBrZXkgKyAiLCIgKyBsb25naGFuZHMsICFrZXkkanNjb21wJDBbaV0pKSB7CiAgICAgICAgICAgICAgICBrZXkkanNjb21wJDBbaV0gPSB0cnVlOwogICAgICAgICAgICAgICAgaSA9IGNvbnNvbGU7CiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBzdHlsZXNba2V5XTsKICAgICAgICAgICAgICAgIGkuZXJyb3IuY2FsbCgKICAgICAgICAgICAgICAgICAgaSwKICAgICAgICAgICAgICAgICAgIiVzIGEgc3R5bGUgcHJvcGVydHkgZHVyaW5nIHJlcmVuZGVyICglcykgd2hlbiBhIGNvbmZsaWN0aW5nIHByb3BlcnR5IGlzIHNldCAoJXMpIGNhbiBsZWFkIHRvIHN0eWxpbmcgYnVncy4gVG8gYXZvaWQgdGhpcywgZG9uJ3QgbWl4IHNob3J0aGFuZCBhbmQgbm9uLXNob3J0aGFuZCBwcm9wZXJ0aWVzIGZvciB0aGUgc2FtZSB2YWx1ZTsgaW5zdGVhZCwgcmVwbGFjZSB0aGUgc2hvcnRoYW5kIHdpdGggc2VwYXJhdGUgdmFsdWVzLiIsCiAgICAgICAgICAgICAgICAgIG51bGwgPT0gdmFsdWUgfHwgImJvb2xlYW4iID09PSB0eXBlb2YgdmFsdWUgfHwgIiIgPT09IHZhbHVlID8gIlJlbW92aW5nIiA6ICJVcGRhdGluZyIsCiAgICAgICAgICAgICAgICAgIGtleSwKICAgICAgICAgICAgICAgICAgbG9uZ2hhbmRzCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGZvciAodmFyIHN0eWxlTmFtZSBpbiBwcmV2U3R5bGVzKQogICAgICAgICAgICAhcHJldlN0eWxlcy5oYXNPd25Qcm9wZXJ0eShzdHlsZU5hbWUpIHx8IG51bGwgIT0gc3R5bGVzICYmIHN0eWxlcy5oYXNPd25Qcm9wZXJ0eShzdHlsZU5hbWUpIHx8ICgwID09PSBzdHlsZU5hbWUuaW5kZXhPZigiLS0iKSA/IG5vZGUuc2V0UHJvcGVydHkoc3R5bGVOYW1lLCAiIikgOiAiZmxvYXQiID09PSBzdHlsZU5hbWUgPyBub2RlLmNzc0Zsb2F0ID0gIiIgOiBub2RlW3N0eWxlTmFtZV0gPSAiIik7CiAgICAgICAgICBmb3IgKHZhciBfc3R5bGVOYW1lIGluIHN0eWxlcykKICAgICAgICAgICAgX2tleTIgPSBzdHlsZXNbX3N0eWxlTmFtZV0sIHN0eWxlcy5oYXNPd25Qcm9wZXJ0eShfc3R5bGVOYW1lKSAmJiBwcmV2U3R5bGVzW19zdHlsZU5hbWVdICE9PSBfa2V5MiAmJiBzZXRWYWx1ZUZvclN0eWxlKG5vZGUsIF9zdHlsZU5hbWUsIF9rZXkyKTsKICAgICAgICB9IGVsc2UKICAgICAgICAgIGZvciAoZXhwYW5kZWRVcGRhdGVzIGluIHN0eWxlcykKICAgICAgICAgICAgc3R5bGVzLmhhc093blByb3BlcnR5KGV4cGFuZGVkVXBkYXRlcykgJiYgc2V0VmFsdWVGb3JTdHlsZShub2RlLCBleHBhbmRlZFVwZGF0ZXMsIHN0eWxlc1tleHBhbmRlZFVwZGF0ZXNdKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBpc0N1c3RvbUVsZW1lbnQodGFnTmFtZSkgewogICAgICAgIGlmICgtMSA9PT0gdGFnTmFtZS5pbmRleE9mKCItIikpIHJldHVybiBmYWxzZTsKICAgICAgICBzd2l0Y2ggKHRhZ05hbWUpIHsKICAgICAgICAgIGNhc2UgImFubm90YXRpb24teG1sIjoKICAgICAgICAgIGNhc2UgImNvbG9yLXByb2ZpbGUiOgogICAgICAgICAgY2FzZSAiZm9udC1mYWNlIjoKICAgICAgICAgIGNhc2UgImZvbnQtZmFjZS1zcmMiOgogICAgICAgICAgY2FzZSAiZm9udC1mYWNlLXVyaSI6CiAgICAgICAgICBjYXNlICJmb250LWZhY2UtZm9ybWF0IjoKICAgICAgICAgIGNhc2UgImZvbnQtZmFjZS1uYW1lIjoKICAgICAgICAgIGNhc2UgIm1pc3NpbmctZ2x5cGgiOgogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0QXR0cmlidXRlQWxpYXMobmFtZSkgewogICAgICAgIHJldHVybiBhbGlhc2VzLmdldChuYW1lKSB8fCBuYW1lOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlUHJvcGVydHkkMSh0YWdOYW1lLCBuYW1lKSB7CiAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwod2FybmVkUHJvcGVydGllcyQxLCBuYW1lKSAmJiB3YXJuZWRQcm9wZXJ0aWVzJDFbbmFtZV0pCiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBpZiAockFSSUFDYW1lbCQxLnRlc3QobmFtZSkpIHsKICAgICAgICAgIHRhZ05hbWUgPSAiYXJpYS0iICsgbmFtZS5zbGljZSg0KS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgdGFnTmFtZSA9IGFyaWFQcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KHRhZ05hbWUpID8gdGFnTmFtZSA6IG51bGw7CiAgICAgICAgICBpZiAobnVsbCA9PSB0YWdOYW1lKQogICAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAiSW52YWxpZCBBUklBIGF0dHJpYnV0ZSBgJXNgLiBBUklBIGF0dHJpYnV0ZXMgZm9sbG93IHRoZSBwYXR0ZXJuIGFyaWEtKiBhbmQgbXVzdCBiZSBsb3dlcmNhc2UuIiwKICAgICAgICAgICAgICBuYW1lCiAgICAgICAgICAgICksIHdhcm5lZFByb3BlcnRpZXMkMVtuYW1lXSA9IHRydWU7CiAgICAgICAgICBpZiAobmFtZSAhPT0gdGFnTmFtZSkKICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgIkludmFsaWQgQVJJQSBhdHRyaWJ1dGUgYCVzYC4gRGlkIHlvdSBtZWFuIGAlc2A/IiwKICAgICAgICAgICAgICBuYW1lLAogICAgICAgICAgICAgIHRhZ05hbWUKICAgICAgICAgICAgKSwgd2FybmVkUHJvcGVydGllcyQxW25hbWVdID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgaWYgKHJBUklBJDEudGVzdChuYW1lKSkgewogICAgICAgICAgdGFnTmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgICAgIHRhZ05hbWUgPSBhcmlhUHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eSh0YWdOYW1lKSA/IHRhZ05hbWUgOiBudWxsOwogICAgICAgICAgaWYgKG51bGwgPT0gdGFnTmFtZSkgcmV0dXJuIHdhcm5lZFByb3BlcnRpZXMkMVtuYW1lXSA9IHRydWUsIGZhbHNlOwogICAgICAgICAgbmFtZSAhPT0gdGFnTmFtZSAmJiAoY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIlVua25vd24gQVJJQSBhdHRyaWJ1dGUgYCVzYC4gRGlkIHlvdSBtZWFuIGAlc2A/IiwKICAgICAgICAgICAgbmFtZSwKICAgICAgICAgICAgdGFnTmFtZQogICAgICAgICAgKSwgd2FybmVkUHJvcGVydGllcyQxW25hbWVdID0gdHJ1ZSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlUHJvcGVydGllcyQyKHR5cGUsIHByb3BzKSB7CiAgICAgICAgdmFyIGludmFsaWRQcm9wcyA9IFtdLCBrZXk7CiAgICAgICAgZm9yIChrZXkgaW4gcHJvcHMpCiAgICAgICAgICB2YWxpZGF0ZVByb3BlcnR5JDEodHlwZSwga2V5KSB8fCBpbnZhbGlkUHJvcHMucHVzaChrZXkpOwogICAgICAgIHByb3BzID0gaW52YWxpZFByb3BzLm1hcChmdW5jdGlvbihwcm9wKSB7CiAgICAgICAgICByZXR1cm4gImAiICsgcHJvcCArICJgIjsKICAgICAgICB9KS5qb2luKCIsICIpOwogICAgICAgIDEgPT09IGludmFsaWRQcm9wcy5sZW5ndGggPyBjb25zb2xlLmVycm9yKAogICAgICAgICAgIkludmFsaWQgYXJpYSBwcm9wICVzIG9uIDwlcz4gdGFnLiBGb3IgZGV0YWlscywgc2VlIGh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvaW52YWxpZC1hcmlhLXByb3BzIiwKICAgICAgICAgIHByb3BzLAogICAgICAgICAgdHlwZQogICAgICAgICkgOiAxIDwgaW52YWxpZFByb3BzLmxlbmd0aCAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgIkludmFsaWQgYXJpYSBwcm9wcyAlcyBvbiA8JXM+IHRhZy4gRm9yIGRldGFpbHMsIHNlZSBodHRwczovL3JlYWN0LmRldi9saW5rL2ludmFsaWQtYXJpYS1wcm9wcyIsCiAgICAgICAgICBwcm9wcywKICAgICAgICAgIHR5cGUKICAgICAgICApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlUHJvcGVydHkodGFnTmFtZSwgbmFtZSwgdmFsdWUsIGV2ZW50UmVnaXN0cnkpIHsKICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbCh3YXJuZWRQcm9wZXJ0aWVzLCBuYW1lKSAmJiB3YXJuZWRQcm9wZXJ0aWVzW25hbWVdKQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgdmFyIGxvd2VyQ2FzZWROYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpOwogICAgICAgIGlmICgib25mb2N1c2luIiA9PT0gbG93ZXJDYXNlZE5hbWUgfHwgIm9uZm9jdXNvdXQiID09PSBsb3dlckNhc2VkTmFtZSkKICAgICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiUmVhY3QgdXNlcyBvbkZvY3VzIGFuZCBvbkJsdXIgaW5zdGVhZCBvZiBvbkZvY3VzSW4gYW5kIG9uRm9jdXNPdXQuIEFsbCBSZWFjdCBldmVudHMgYXJlIG5vcm1hbGl6ZWQgdG8gYnViYmxlLCBzbyBvbkZvY3VzSW4gYW5kIG9uRm9jdXNPdXQgYXJlIG5vdCBuZWVkZWQvc3VwcG9ydGVkIGJ5IFJlYWN0LiIKICAgICAgICAgICksIHdhcm5lZFByb3BlcnRpZXNbbmFtZV0gPSB0cnVlOwogICAgICAgIGlmICgiZnVuY3Rpb24iID09PSB0eXBlb2YgdmFsdWUgJiYgKCJmb3JtIiA9PT0gdGFnTmFtZSAmJiAiYWN0aW9uIiA9PT0gbmFtZSB8fCAiaW5wdXQiID09PSB0YWdOYW1lICYmICJmb3JtQWN0aW9uIiA9PT0gbmFtZSB8fCAiYnV0dG9uIiA9PT0gdGFnTmFtZSAmJiAiZm9ybUFjdGlvbiIgPT09IG5hbWUpKQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgaWYgKG51bGwgIT0gZXZlbnRSZWdpc3RyeSkgewogICAgICAgICAgdGFnTmFtZSA9IGV2ZW50UmVnaXN0cnkucG9zc2libGVSZWdpc3RyYXRpb25OYW1lczsKICAgICAgICAgIGlmIChldmVudFJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVEZXBlbmRlbmNpZXMuaGFzT3duUHJvcGVydHkobmFtZSkpCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgZXZlbnRSZWdpc3RyeSA9IHRhZ05hbWUuaGFzT3duUHJvcGVydHkobG93ZXJDYXNlZE5hbWUpID8gdGFnTmFtZVtsb3dlckNhc2VkTmFtZV0gOiBudWxsOwogICAgICAgICAgaWYgKG51bGwgIT0gZXZlbnRSZWdpc3RyeSkKICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgIkludmFsaWQgZXZlbnQgaGFuZGxlciBwcm9wZXJ0eSBgJXNgLiBEaWQgeW91IG1lYW4gYCVzYD8iLAogICAgICAgICAgICAgIG5hbWUsCiAgICAgICAgICAgICAgZXZlbnRSZWdpc3RyeQogICAgICAgICAgICApLCB3YXJuZWRQcm9wZXJ0aWVzW25hbWVdID0gdHJ1ZTsKICAgICAgICAgIGlmIChFVkVOVF9OQU1FX1JFR0VYLnRlc3QobmFtZSkpCiAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICJVbmtub3duIGV2ZW50IGhhbmRsZXIgcHJvcGVydHkgYCVzYC4gSXQgd2lsbCBiZSBpZ25vcmVkLiIsCiAgICAgICAgICAgICAgbmFtZQogICAgICAgICAgICApLCB3YXJuZWRQcm9wZXJ0aWVzW25hbWVdID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKEVWRU5UX05BTUVfUkVHRVgudGVzdChuYW1lKSkKICAgICAgICAgIHJldHVybiBJTlZBTElEX0VWRU5UX05BTUVfUkVHRVgudGVzdChuYW1lKSAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiSW52YWxpZCBldmVudCBoYW5kbGVyIHByb3BlcnR5IGAlc2AuIFJlYWN0IGV2ZW50cyB1c2UgdGhlIGNhbWVsQ2FzZSBuYW1pbmcgY29udmVudGlvbiwgZm9yIGV4YW1wbGUgYG9uQ2xpY2tgLiIsCiAgICAgICAgICAgIG5hbWUKICAgICAgICAgICksIHdhcm5lZFByb3BlcnRpZXNbbmFtZV0gPSB0cnVlOwogICAgICAgIGlmIChyQVJJQS50ZXN0KG5hbWUpIHx8IHJBUklBQ2FtZWwudGVzdChuYW1lKSkgcmV0dXJuIHRydWU7CiAgICAgICAgaWYgKCJpbm5lcmh0bWwiID09PSBsb3dlckNhc2VkTmFtZSkKICAgICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiRGlyZWN0bHkgc2V0dGluZyBwcm9wZXJ0eSBgaW5uZXJIVE1MYCBpcyBub3QgcGVybWl0dGVkLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgbG9va3VwIGRvY3VtZW50YXRpb24gb24gYGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYC4iCiAgICAgICAgICApLCB3YXJuZWRQcm9wZXJ0aWVzW25hbWVdID0gdHJ1ZTsKICAgICAgICBpZiAoImFyaWEiID09PSBsb3dlckNhc2VkTmFtZSkKICAgICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiVGhlIGBhcmlhYCBhdHRyaWJ1dGUgaXMgcmVzZXJ2ZWQgZm9yIGZ1dHVyZSB1c2UgaW4gUmVhY3QuIFBhc3MgaW5kaXZpZHVhbCBgYXJpYS1gIGF0dHJpYnV0ZXMgaW5zdGVhZC4iCiAgICAgICAgICApLCB3YXJuZWRQcm9wZXJ0aWVzW25hbWVdID0gdHJ1ZTsKICAgICAgICBpZiAoImlzIiA9PT0gbG93ZXJDYXNlZE5hbWUgJiYgbnVsbCAhPT0gdmFsdWUgJiYgdm9pZCAwICE9PSB2YWx1ZSAmJiAic3RyaW5nIiAhPT0gdHlwZW9mIHZhbHVlKQogICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICJSZWNlaXZlZCBhIGAlc2AgZm9yIGEgc3RyaW5nIGF0dHJpYnV0ZSBgaXNgLiBJZiB0aGlzIGlzIGV4cGVjdGVkLCBjYXN0IHRoZSB2YWx1ZSB0byBhIHN0cmluZy4iLAogICAgICAgICAgICB0eXBlb2YgdmFsdWUKICAgICAgICAgICksIHdhcm5lZFByb3BlcnRpZXNbbmFtZV0gPSB0cnVlOwogICAgICAgIGlmICgibnVtYmVyIiA9PT0gdHlwZW9mIHZhbHVlICYmIGlzTmFOKHZhbHVlKSkKICAgICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiUmVjZWl2ZWQgTmFOIGZvciB0aGUgYCVzYCBhdHRyaWJ1dGUuIElmIHRoaXMgaXMgZXhwZWN0ZWQsIGNhc3QgdGhlIHZhbHVlIHRvIGEgc3RyaW5nLiIsCiAgICAgICAgICAgIG5hbWUKICAgICAgICAgICksIHdhcm5lZFByb3BlcnRpZXNbbmFtZV0gPSB0cnVlOwogICAgICAgIGlmIChwb3NzaWJsZVN0YW5kYXJkTmFtZXMuaGFzT3duUHJvcGVydHkobG93ZXJDYXNlZE5hbWUpKSB7CiAgICAgICAgICBpZiAobG93ZXJDYXNlZE5hbWUgPSBwb3NzaWJsZVN0YW5kYXJkTmFtZXNbbG93ZXJDYXNlZE5hbWVdLCBsb3dlckNhc2VkTmFtZSAhPT0gbmFtZSkKICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgIkludmFsaWQgRE9NIHByb3BlcnR5IGAlc2AuIERpZCB5b3UgbWVhbiBgJXNgPyIsCiAgICAgICAgICAgICAgbmFtZSwKICAgICAgICAgICAgICBsb3dlckNhc2VkTmFtZQogICAgICAgICAgICApLCB3YXJuZWRQcm9wZXJ0aWVzW25hbWVdID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKG5hbWUgIT09IGxvd2VyQ2FzZWROYW1lKQogICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICJSZWFjdCBkb2VzIG5vdCByZWNvZ25pemUgdGhlIGAlc2AgcHJvcCBvbiBhIERPTSBlbGVtZW50LiBJZiB5b3UgaW50ZW50aW9uYWxseSB3YW50IGl0IHRvIGFwcGVhciBpbiB0aGUgRE9NIGFzIGEgY3VzdG9tIGF0dHJpYnV0ZSwgc3BlbGwgaXQgYXMgbG93ZXJjYXNlIGAlc2AgaW5zdGVhZC4gSWYgeW91IGFjY2lkZW50YWxseSBwYXNzZWQgaXQgZnJvbSBhIHBhcmVudCBjb21wb25lbnQsIHJlbW92ZSBpdCBmcm9tIHRoZSBET00gZWxlbWVudC4iLAogICAgICAgICAgICBuYW1lLAogICAgICAgICAgICBsb3dlckNhc2VkTmFtZQogICAgICAgICAgKSwgd2FybmVkUHJvcGVydGllc1tuYW1lXSA9IHRydWU7CiAgICAgICAgc3dpdGNoIChuYW1lKSB7CiAgICAgICAgICBjYXNlICJkYW5nZXJvdXNseVNldElubmVySFRNTCI6CiAgICAgICAgICBjYXNlICJjaGlsZHJlbiI6CiAgICAgICAgICBjYXNlICJzdHlsZSI6CiAgICAgICAgICBjYXNlICJzdXBwcmVzc0NvbnRlbnRFZGl0YWJsZVdhcm5pbmciOgogICAgICAgICAgY2FzZSAic3VwcHJlc3NIeWRyYXRpb25XYXJuaW5nIjoKICAgICAgICAgIGNhc2UgImRlZmF1bHRWYWx1ZSI6CiAgICAgICAgICBjYXNlICJkZWZhdWx0Q2hlY2tlZCI6CiAgICAgICAgICBjYXNlICJpbm5lckhUTUwiOgogICAgICAgICAgY2FzZSAicmVmIjoKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICBjYXNlICJpbm5lclRleHQiOgogICAgICAgICAgY2FzZSAidGV4dENvbnRlbnQiOgogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHsKICAgICAgICAgIGNhc2UgImJvb2xlYW4iOgogICAgICAgICAgICBzd2l0Y2ggKG5hbWUpIHsKICAgICAgICAgICAgICBjYXNlICJhdXRvRm9jdXMiOgogICAgICAgICAgICAgIGNhc2UgImNoZWNrZWQiOgogICAgICAgICAgICAgIGNhc2UgIm11bHRpcGxlIjoKICAgICAgICAgICAgICBjYXNlICJtdXRlZCI6CiAgICAgICAgICAgICAgY2FzZSAic2VsZWN0ZWQiOgogICAgICAgICAgICAgIGNhc2UgImNvbnRlbnRFZGl0YWJsZSI6CiAgICAgICAgICAgICAgY2FzZSAic3BlbGxDaGVjayI6CiAgICAgICAgICAgICAgY2FzZSAiZHJhZ2dhYmxlIjoKICAgICAgICAgICAgICBjYXNlICJ2YWx1ZSI6CiAgICAgICAgICAgICAgY2FzZSAiYXV0b1JldmVyc2UiOgogICAgICAgICAgICAgIGNhc2UgImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWQiOgogICAgICAgICAgICAgIGNhc2UgImZvY3VzYWJsZSI6CiAgICAgICAgICAgICAgY2FzZSAicHJlc2VydmVBbHBoYSI6CiAgICAgICAgICAgICAgY2FzZSAiYWxsb3dGdWxsU2NyZWVuIjoKICAgICAgICAgICAgICBjYXNlICJhc3luYyI6CiAgICAgICAgICAgICAgY2FzZSAiYXV0b1BsYXkiOgogICAgICAgICAgICAgIGNhc2UgImNvbnRyb2xzIjoKICAgICAgICAgICAgICBjYXNlICJkZWZhdWx0IjoKICAgICAgICAgICAgICBjYXNlICJkZWZlciI6CiAgICAgICAgICAgICAgY2FzZSAiZGlzYWJsZWQiOgogICAgICAgICAgICAgIGNhc2UgImRpc2FibGVQaWN0dXJlSW5QaWN0dXJlIjoKICAgICAgICAgICAgICBjYXNlICJkaXNhYmxlUmVtb3RlUGxheWJhY2siOgogICAgICAgICAgICAgIGNhc2UgImZvcm1Ob1ZhbGlkYXRlIjoKICAgICAgICAgICAgICBjYXNlICJoaWRkZW4iOgogICAgICAgICAgICAgIGNhc2UgImxvb3AiOgogICAgICAgICAgICAgIGNhc2UgIm5vTW9kdWxlIjoKICAgICAgICAgICAgICBjYXNlICJub1ZhbGlkYXRlIjoKICAgICAgICAgICAgICBjYXNlICJvcGVuIjoKICAgICAgICAgICAgICBjYXNlICJwbGF5c0lubGluZSI6CiAgICAgICAgICAgICAgY2FzZSAicmVhZE9ubHkiOgogICAgICAgICAgICAgIGNhc2UgInJlcXVpcmVkIjoKICAgICAgICAgICAgICBjYXNlICJyZXZlcnNlZCI6CiAgICAgICAgICAgICAgY2FzZSAic2NvcGVkIjoKICAgICAgICAgICAgICBjYXNlICJzZWFtbGVzcyI6CiAgICAgICAgICAgICAgY2FzZSAiaXRlbVNjb3BlIjoKICAgICAgICAgICAgICBjYXNlICJjYXB0dXJlIjoKICAgICAgICAgICAgICBjYXNlICJkb3dubG9hZCI6CiAgICAgICAgICAgICAgY2FzZSAiaW5lcnQiOgogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIGxvd2VyQ2FzZWROYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpLnNsaWNlKDAsIDUpOwogICAgICAgICAgICAgICAgaWYgKCJkYXRhLSIgPT09IGxvd2VyQ2FzZWROYW1lIHx8ICJhcmlhLSIgPT09IGxvd2VyQ2FzZWROYW1lKQogICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIHZhbHVlID8gY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAgICAgJ1JlY2VpdmVkIGAlc2AgZm9yIGEgbm9uLWJvb2xlYW4gYXR0cmlidXRlIGAlc2AuXG5cbklmIHlvdSB3YW50IHRvIHdyaXRlIGl0IHRvIHRoZSBET00sIHBhc3MgYSBzdHJpbmcgaW5zdGVhZDogJXM9IiVzIiBvciAlcz17dmFsdWUudG9TdHJpbmcoKX0uJywKICAgICAgICAgICAgICAgICAgdmFsdWUsCiAgICAgICAgICAgICAgICAgIG5hbWUsCiAgICAgICAgICAgICAgICAgIG5hbWUsCiAgICAgICAgICAgICAgICAgIHZhbHVlLAogICAgICAgICAgICAgICAgICBuYW1lCiAgICAgICAgICAgICAgICApIDogY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAgICAgJ1JlY2VpdmVkIGAlc2AgZm9yIGEgbm9uLWJvb2xlYW4gYXR0cmlidXRlIGAlc2AuXG5cbklmIHlvdSB3YW50IHRvIHdyaXRlIGl0IHRvIHRoZSBET00sIHBhc3MgYSBzdHJpbmcgaW5zdGVhZDogJXM9IiVzIiBvciAlcz17dmFsdWUudG9TdHJpbmcoKX0uXG5cbklmIHlvdSB1c2VkIHRvIGNvbmRpdGlvbmFsbHkgb21pdCBpdCB3aXRoICVzPXtjb25kaXRpb24gJiYgdmFsdWV9LCBwYXNzICVzPXtjb25kaXRpb24gPyB2YWx1ZSA6IHVuZGVmaW5lZH0gaW5zdGVhZC4nLAogICAgICAgICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgICAgICAgbmFtZSwKICAgICAgICAgICAgICAgICAgbmFtZSwKICAgICAgICAgICAgICAgICAgdmFsdWUsCiAgICAgICAgICAgICAgICAgIG5hbWUsCiAgICAgICAgICAgICAgICAgIG5hbWUsCiAgICAgICAgICAgICAgICAgIG5hbWUKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICByZXR1cm4gd2FybmVkUHJvcGVydGllc1tuYW1lXSA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgImZ1bmN0aW9uIjoKICAgICAgICAgIGNhc2UgInN5bWJvbCI6CiAgICAgICAgICAgIHJldHVybiB3YXJuZWRQcm9wZXJ0aWVzW25hbWVdID0gdHJ1ZSwgZmFsc2U7CiAgICAgICAgICBjYXNlICJzdHJpbmciOgogICAgICAgICAgICBpZiAoImZhbHNlIiA9PT0gdmFsdWUgfHwgInRydWUiID09PSB2YWx1ZSkgewogICAgICAgICAgICAgIHN3aXRjaCAobmFtZSkgewogICAgICAgICAgICAgICAgY2FzZSAiY2hlY2tlZCI6CiAgICAgICAgICAgICAgICBjYXNlICJzZWxlY3RlZCI6CiAgICAgICAgICAgICAgICBjYXNlICJtdWx0aXBsZSI6CiAgICAgICAgICAgICAgICBjYXNlICJtdXRlZCI6CiAgICAgICAgICAgICAgICBjYXNlICJhbGxvd0Z1bGxTY3JlZW4iOgogICAgICAgICAgICAgICAgY2FzZSAiYXN5bmMiOgogICAgICAgICAgICAgICAgY2FzZSAiYXV0b1BsYXkiOgogICAgICAgICAgICAgICAgY2FzZSAiY29udHJvbHMiOgogICAgICAgICAgICAgICAgY2FzZSAiZGVmYXVsdCI6CiAgICAgICAgICAgICAgICBjYXNlICJkZWZlciI6CiAgICAgICAgICAgICAgICBjYXNlICJkaXNhYmxlZCI6CiAgICAgICAgICAgICAgICBjYXNlICJkaXNhYmxlUGljdHVyZUluUGljdHVyZSI6CiAgICAgICAgICAgICAgICBjYXNlICJkaXNhYmxlUmVtb3RlUGxheWJhY2siOgogICAgICAgICAgICAgICAgY2FzZSAiZm9ybU5vVmFsaWRhdGUiOgogICAgICAgICAgICAgICAgY2FzZSAiaGlkZGVuIjoKICAgICAgICAgICAgICAgIGNhc2UgImxvb3AiOgogICAgICAgICAgICAgICAgY2FzZSAibm9Nb2R1bGUiOgogICAgICAgICAgICAgICAgY2FzZSAibm9WYWxpZGF0ZSI6CiAgICAgICAgICAgICAgICBjYXNlICJvcGVuIjoKICAgICAgICAgICAgICAgIGNhc2UgInBsYXlzSW5saW5lIjoKICAgICAgICAgICAgICAgIGNhc2UgInJlYWRPbmx5IjoKICAgICAgICAgICAgICAgIGNhc2UgInJlcXVpcmVkIjoKICAgICAgICAgICAgICAgIGNhc2UgInJldmVyc2VkIjoKICAgICAgICAgICAgICAgIGNhc2UgInNjb3BlZCI6CiAgICAgICAgICAgICAgICBjYXNlICJzZWFtbGVzcyI6CiAgICAgICAgICAgICAgICBjYXNlICJpdGVtU2NvcGUiOgogICAgICAgICAgICAgICAgY2FzZSAiaW5lcnQiOgogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICAgIlJlY2VpdmVkIHRoZSBzdHJpbmcgYCVzYCBmb3IgdGhlIGJvb2xlYW4gYXR0cmlidXRlIGAlc2AuICVzIERpZCB5b3UgbWVhbiAlcz17JXN9PyIsCiAgICAgICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgICAgIG5hbWUsCiAgICAgICAgICAgICAgICAiZmFsc2UiID09PSB2YWx1ZSA/ICJUaGUgYnJvd3NlciB3aWxsIGludGVycHJldCBpdCBhcyBhIHRydXRoeSB2YWx1ZS4iIDogJ0FsdGhvdWdoIHRoaXMgd29ya3MsIGl0IHdpbGwgbm90IHdvcmsgYXMgZXhwZWN0ZWQgaWYgeW91IHBhc3MgdGhlIHN0cmluZyAiZmFsc2UiLicsCiAgICAgICAgICAgICAgICBuYW1lLAogICAgICAgICAgICAgICAgdmFsdWUKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIHdhcm5lZFByb3BlcnRpZXNbbmFtZV0gPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHdhcm5Vbmtub3duUHJvcGVydGllcyh0eXBlLCBwcm9wcywgZXZlbnRSZWdpc3RyeSkgewogICAgICAgIHZhciB1bmtub3duUHJvcHMgPSBbXSwga2V5OwogICAgICAgIGZvciAoa2V5IGluIHByb3BzKQogICAgICAgICAgdmFsaWRhdGVQcm9wZXJ0eSh0eXBlLCBrZXksIHByb3BzW2tleV0sIGV2ZW50UmVnaXN0cnkpIHx8IHVua25vd25Qcm9wcy5wdXNoKGtleSk7CiAgICAgICAgcHJvcHMgPSB1bmtub3duUHJvcHMubWFwKGZ1bmN0aW9uKHByb3ApIHsKICAgICAgICAgIHJldHVybiAiYCIgKyBwcm9wICsgImAiOwogICAgICAgIH0pLmpvaW4oIiwgIik7CiAgICAgICAgMSA9PT0gdW5rbm93blByb3BzLmxlbmd0aCA/IGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiSW52YWxpZCB2YWx1ZSBmb3IgcHJvcCAlcyBvbiA8JXM+IHRhZy4gRWl0aGVyIHJlbW92ZSBpdCBmcm9tIHRoZSBlbGVtZW50LCBvciBwYXNzIGEgc3RyaW5nIG9yIG51bWJlciB2YWx1ZSB0byBrZWVwIGl0IGluIHRoZSBET00uIEZvciBkZXRhaWxzLCBzZWUgaHR0cHM6Ly9yZWFjdC5kZXYvbGluay9hdHRyaWJ1dGUtYmVoYXZpb3IgIiwKICAgICAgICAgIHByb3BzLAogICAgICAgICAgdHlwZQogICAgICAgICkgOiAxIDwgdW5rbm93blByb3BzLmxlbmd0aCAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgIkludmFsaWQgdmFsdWVzIGZvciBwcm9wcyAlcyBvbiA8JXM+IHRhZy4gRWl0aGVyIHJlbW92ZSB0aGVtIGZyb20gdGhlIGVsZW1lbnQsIG9yIHBhc3MgYSBzdHJpbmcgb3IgbnVtYmVyIHZhbHVlIHRvIGtlZXAgdGhlbSBpbiB0aGUgRE9NLiBGb3IgZGV0YWlscywgc2VlIGh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvYXR0cmlidXRlLWJlaGF2aW9yICIsCiAgICAgICAgICBwcm9wcywKICAgICAgICAgIHR5cGUKICAgICAgICApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHNhbml0aXplVVJMKHVybCkgewogICAgICAgIHJldHVybiBpc0phdmFTY3JpcHRQcm90b2NvbC50ZXN0KCIiICsgdXJsKSA/ICJqYXZhc2NyaXB0OnRocm93IG5ldyBFcnJvcignUmVhY3QgaGFzIGJsb2NrZWQgYSBqYXZhc2NyaXB0OiBVUkwgYXMgYSBzZWN1cml0eSBwcmVjYXV0aW9uLicpIiA6IHVybDsKICAgICAgfQogICAgICBmdW5jdGlvbiBnZXRFdmVudFRhcmdldChuYXRpdmVFdmVudCkgewogICAgICAgIG5hdGl2ZUV2ZW50ID0gbmF0aXZlRXZlbnQudGFyZ2V0IHx8IG5hdGl2ZUV2ZW50LnNyY0VsZW1lbnQgfHwgd2luZG93OwogICAgICAgIG5hdGl2ZUV2ZW50LmNvcnJlc3BvbmRpbmdVc2VFbGVtZW50ICYmIChuYXRpdmVFdmVudCA9IG5hdGl2ZUV2ZW50LmNvcnJlc3BvbmRpbmdVc2VFbGVtZW50KTsKICAgICAgICByZXR1cm4gMyA9PT0gbmF0aXZlRXZlbnQubm9kZVR5cGUgPyBuYXRpdmVFdmVudC5wYXJlbnROb2RlIDogbmF0aXZlRXZlbnQ7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmVzdG9yZVN0YXRlT2ZUYXJnZXQodGFyZ2V0KSB7CiAgICAgICAgdmFyIGludGVybmFsSW5zdGFuY2UgPSBnZXRJbnN0YW5jZUZyb21Ob2RlKHRhcmdldCk7CiAgICAgICAgaWYgKGludGVybmFsSW5zdGFuY2UgJiYgKHRhcmdldCA9IGludGVybmFsSW5zdGFuY2Uuc3RhdGVOb2RlKSkgewogICAgICAgICAgdmFyIHByb3BzID0gdGFyZ2V0W2ludGVybmFsUHJvcHNLZXldIHx8IG51bGw7CiAgICAgICAgICBhOiBzd2l0Y2ggKHRhcmdldCA9IGludGVybmFsSW5zdGFuY2Uuc3RhdGVOb2RlLCBpbnRlcm5hbEluc3RhbmNlLnR5cGUpIHsKICAgICAgICAgICAgY2FzZSAiaW5wdXQiOgogICAgICAgICAgICAgIHVwZGF0ZUlucHV0KAogICAgICAgICAgICAgICAgdGFyZ2V0LAogICAgICAgICAgICAgICAgcHJvcHMudmFsdWUsCiAgICAgICAgICAgICAgICBwcm9wcy5kZWZhdWx0VmFsdWUsCiAgICAgICAgICAgICAgICBwcm9wcy5kZWZhdWx0VmFsdWUsCiAgICAgICAgICAgICAgICBwcm9wcy5jaGVja2VkLAogICAgICAgICAgICAgICAgcHJvcHMuZGVmYXVsdENoZWNrZWQsCiAgICAgICAgICAgICAgICBwcm9wcy50eXBlLAogICAgICAgICAgICAgICAgcHJvcHMubmFtZQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgaW50ZXJuYWxJbnN0YW5jZSA9IHByb3BzLm5hbWU7CiAgICAgICAgICAgICAgaWYgKCJyYWRpbyIgPT09IHByb3BzLnR5cGUgJiYgbnVsbCAhPSBpbnRlcm5hbEluc3RhbmNlKSB7CiAgICAgICAgICAgICAgICBmb3IgKHByb3BzID0gdGFyZ2V0OyBwcm9wcy5wYXJlbnROb2RlOyApIHByb3BzID0gcHJvcHMucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgIGNoZWNrQXR0cmlidXRlU3RyaW5nQ29lcmNpb24oaW50ZXJuYWxJbnN0YW5jZSwgIm5hbWUiKTsKICAgICAgICAgICAgICAgIHByb3BzID0gcHJvcHMucXVlcnlTZWxlY3RvckFsbCgKICAgICAgICAgICAgICAgICAgJ2lucHV0W25hbWU9IicgKyBlc2NhcGVTZWxlY3RvckF0dHJpYnV0ZVZhbHVlSW5zaWRlRG91YmxlUXVvdGVzKAogICAgICAgICAgICAgICAgICAgICIiICsgaW50ZXJuYWxJbnN0YW5jZQogICAgICAgICAgICAgICAgICApICsgJyJdW3R5cGU9InJhZGlvIl0nCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgZm9yIChpbnRlcm5hbEluc3RhbmNlID0gMDsgaW50ZXJuYWxJbnN0YW5jZSA8IHByb3BzLmxlbmd0aDsgaW50ZXJuYWxJbnN0YW5jZSsrKSB7CiAgICAgICAgICAgICAgICAgIHZhciBvdGhlck5vZGUgPSBwcm9wc1tpbnRlcm5hbEluc3RhbmNlXTsKICAgICAgICAgICAgICAgICAgaWYgKG90aGVyTm9kZSAhPT0gdGFyZ2V0ICYmIG90aGVyTm9kZS5mb3JtID09PSB0YXJnZXQuZm9ybSkgewogICAgICAgICAgICAgICAgICAgIHZhciBvdGhlclByb3BzID0gb3RoZXJOb2RlW2ludGVybmFsUHJvcHNLZXldIHx8IG51bGw7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFvdGhlclByb3BzKQogICAgICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAgICJSZWFjdERPTUlucHV0OiBNaXhpbmcgUmVhY3QgYW5kIG5vbi1SZWFjdCByYWRpbyBpbnB1dHMgd2l0aCB0aGUgc2FtZSBgbmFtZWAgaXMgbm90IHN1cHBvcnRlZC4iCiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIHVwZGF0ZUlucHV0KAogICAgICAgICAgICAgICAgICAgICAgb3RoZXJOb2RlLAogICAgICAgICAgICAgICAgICAgICAgb3RoZXJQcm9wcy52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgIG90aGVyUHJvcHMuZGVmYXVsdFZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgb3RoZXJQcm9wcy5kZWZhdWx0VmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICBvdGhlclByb3BzLmNoZWNrZWQsCiAgICAgICAgICAgICAgICAgICAgICBvdGhlclByb3BzLmRlZmF1bHRDaGVja2VkLAogICAgICAgICAgICAgICAgICAgICAgb3RoZXJQcm9wcy50eXBlLAogICAgICAgICAgICAgICAgICAgICAgb3RoZXJQcm9wcy5uYW1lCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZm9yIChpbnRlcm5hbEluc3RhbmNlID0gMDsgaW50ZXJuYWxJbnN0YW5jZSA8IHByb3BzLmxlbmd0aDsgaW50ZXJuYWxJbnN0YW5jZSsrKQogICAgICAgICAgICAgICAgICBvdGhlck5vZGUgPSBwcm9wc1tpbnRlcm5hbEluc3RhbmNlXSwgb3RoZXJOb2RlLmZvcm0gPT09IHRhcmdldC5mb3JtICYmIHVwZGF0ZVZhbHVlSWZDaGFuZ2VkKG90aGVyTm9kZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJyZWFrIGE7CiAgICAgICAgICAgIGNhc2UgInRleHRhcmVhIjoKICAgICAgICAgICAgICB1cGRhdGVUZXh0YXJlYSh0YXJnZXQsIHByb3BzLnZhbHVlLCBwcm9wcy5kZWZhdWx0VmFsdWUpOwogICAgICAgICAgICAgIGJyZWFrIGE7CiAgICAgICAgICAgIGNhc2UgInNlbGVjdCI6CiAgICAgICAgICAgICAgaW50ZXJuYWxJbnN0YW5jZSA9IHByb3BzLnZhbHVlLCBudWxsICE9IGludGVybmFsSW5zdGFuY2UgJiYgdXBkYXRlT3B0aW9ucyh0YXJnZXQsICEhcHJvcHMubXVsdGlwbGUsIGludGVybmFsSW5zdGFuY2UsIGZhbHNlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gYmF0Y2hlZFVwZGF0ZXMkMShmbiwgYSwgYikgewogICAgICAgIGlmIChpc0luc2lkZUV2ZW50SGFuZGxlcikgcmV0dXJuIGZuKGEsIGIpOwogICAgICAgIGlzSW5zaWRlRXZlbnRIYW5kbGVyID0gdHJ1ZTsKICAgICAgICB0cnkgewogICAgICAgICAgdmFyIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9IGZuKGEpOwogICAgICAgICAgcmV0dXJuIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdDsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgaWYgKGlzSW5zaWRlRXZlbnRIYW5kbGVyID0gZmFsc2UsIG51bGwgIT09IHJlc3RvcmVUYXJnZXQgfHwgbnVsbCAhPT0gcmVzdG9yZVF1ZXVlKSB7CiAgICAgICAgICAgIGlmIChmbHVzaFN5bmNXb3JrJDEoKSwgcmVzdG9yZVRhcmdldCAmJiAoYSA9IHJlc3RvcmVUYXJnZXQsIGZuID0gcmVzdG9yZVF1ZXVlLCByZXN0b3JlUXVldWUgPSByZXN0b3JlVGFyZ2V0ID0gbnVsbCwgcmVzdG9yZVN0YXRlT2ZUYXJnZXQoYSksIGZuKSkKICAgICAgICAgICAgICBmb3IgKGEgPSAwOyBhIDwgZm4ubGVuZ3RoOyBhKyspIHJlc3RvcmVTdGF0ZU9mVGFyZ2V0KGZuW2FdKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0TGlzdGVuZXIoaW5zdCwgcmVnaXN0cmF0aW9uTmFtZSkgewogICAgICAgIHZhciBzdGF0ZU5vZGUgPSBpbnN0LnN0YXRlTm9kZTsKICAgICAgICBpZiAobnVsbCA9PT0gc3RhdGVOb2RlKSByZXR1cm4gbnVsbDsKICAgICAgICB2YXIgcHJvcHMgPSBzdGF0ZU5vZGVbaW50ZXJuYWxQcm9wc0tleV0gfHwgbnVsbDsKICAgICAgICBpZiAobnVsbCA9PT0gcHJvcHMpIHJldHVybiBudWxsOwogICAgICAgIHN0YXRlTm9kZSA9IHByb3BzW3JlZ2lzdHJhdGlvbk5hbWVdOwogICAgICAgIGE6IHN3aXRjaCAocmVnaXN0cmF0aW9uTmFtZSkgewogICAgICAgICAgY2FzZSAib25DbGljayI6CiAgICAgICAgICBjYXNlICJvbkNsaWNrQ2FwdHVyZSI6CiAgICAgICAgICBjYXNlICJvbkRvdWJsZUNsaWNrIjoKICAgICAgICAgIGNhc2UgIm9uRG91YmxlQ2xpY2tDYXB0dXJlIjoKICAgICAgICAgIGNhc2UgIm9uTW91c2VEb3duIjoKICAgICAgICAgIGNhc2UgIm9uTW91c2VEb3duQ2FwdHVyZSI6CiAgICAgICAgICBjYXNlICJvbk1vdXNlTW92ZSI6CiAgICAgICAgICBjYXNlICJvbk1vdXNlTW92ZUNhcHR1cmUiOgogICAgICAgICAgY2FzZSAib25Nb3VzZVVwIjoKICAgICAgICAgIGNhc2UgIm9uTW91c2VVcENhcHR1cmUiOgogICAgICAgICAgY2FzZSAib25Nb3VzZUVudGVyIjoKICAgICAgICAgICAgKHByb3BzID0gIXByb3BzLmRpc2FibGVkKSB8fCAoaW5zdCA9IGluc3QudHlwZSwgcHJvcHMgPSAhKCJidXR0b24iID09PSBpbnN0IHx8ICJpbnB1dCIgPT09IGluc3QgfHwgInNlbGVjdCIgPT09IGluc3QgfHwgInRleHRhcmVhIiA9PT0gaW5zdCkpOwogICAgICAgICAgICBpbnN0ID0gIXByb3BzOwogICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgaW5zdCA9IGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZiAoaW5zdCkgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKHN0YXRlTm9kZSAmJiAiZnVuY3Rpb24iICE9PSB0eXBlb2Ygc3RhdGVOb2RlKQogICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICJFeHBlY3RlZCBgIiArIHJlZ2lzdHJhdGlvbk5hbWUgKyAiYCBsaXN0ZW5lciB0byBiZSBhIGZ1bmN0aW9uLCBpbnN0ZWFkIGdvdCBhIHZhbHVlIG9mIGAiICsgdHlwZW9mIHN0YXRlTm9kZSArICJgIHR5cGUuIgogICAgICAgICAgKTsKICAgICAgICByZXR1cm4gc3RhdGVOb2RlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldERhdGEoKSB7CiAgICAgICAgaWYgKGZhbGxiYWNrVGV4dCkgcmV0dXJuIGZhbGxiYWNrVGV4dDsKICAgICAgICB2YXIgc3RhcnQsIHN0YXJ0VmFsdWUgPSBzdGFydFRleHQsIHN0YXJ0TGVuZ3RoID0gc3RhcnRWYWx1ZS5sZW5ndGgsIGVuZCwgZW5kVmFsdWUgPSAidmFsdWUiIGluIHJvb3QgPyByb290LnZhbHVlIDogcm9vdC50ZXh0Q29udGVudCwgZW5kTGVuZ3RoID0gZW5kVmFsdWUubGVuZ3RoOwogICAgICAgIGZvciAoc3RhcnQgPSAwOyBzdGFydCA8IHN0YXJ0TGVuZ3RoICYmIHN0YXJ0VmFsdWVbc3RhcnRdID09PSBlbmRWYWx1ZVtzdGFydF07IHN0YXJ0KyspIDsKICAgICAgICB2YXIgbWluRW5kID0gc3RhcnRMZW5ndGggLSBzdGFydDsKICAgICAgICBmb3IgKGVuZCA9IDE7IGVuZCA8PSBtaW5FbmQgJiYgc3RhcnRWYWx1ZVtzdGFydExlbmd0aCAtIGVuZF0gPT09IGVuZFZhbHVlW2VuZExlbmd0aCAtIGVuZF07IGVuZCsrKSA7CiAgICAgICAgcmV0dXJuIGZhbGxiYWNrVGV4dCA9IGVuZFZhbHVlLnNsaWNlKHN0YXJ0LCAxIDwgZW5kID8gMSAtIGVuZCA6IHZvaWQgMCk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0RXZlbnRDaGFyQ29kZShuYXRpdmVFdmVudCkgewogICAgICAgIHZhciBrZXlDb2RlID0gbmF0aXZlRXZlbnQua2V5Q29kZTsKICAgICAgICAiY2hhckNvZGUiIGluIG5hdGl2ZUV2ZW50ID8gKG5hdGl2ZUV2ZW50ID0gbmF0aXZlRXZlbnQuY2hhckNvZGUsIDAgPT09IG5hdGl2ZUV2ZW50ICYmIDEzID09PSBrZXlDb2RlICYmIChuYXRpdmVFdmVudCA9IDEzKSkgOiBuYXRpdmVFdmVudCA9IGtleUNvZGU7CiAgICAgICAgMTAgPT09IG5hdGl2ZUV2ZW50ICYmIChuYXRpdmVFdmVudCA9IDEzKTsKICAgICAgICByZXR1cm4gMzIgPD0gbmF0aXZlRXZlbnQgfHwgMTMgPT09IG5hdGl2ZUV2ZW50ID8gbmF0aXZlRXZlbnQgOiAwOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGZ1bmN0aW9uVGhhdFJldHVybnNUcnVlKCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGZ1bmN0aW9uVGhhdFJldHVybnNGYWxzZSgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY3JlYXRlU3ludGhldGljRXZlbnQoSW50ZXJmYWNlKSB7CiAgICAgICAgZnVuY3Rpb24gU3ludGhldGljQmFzZUV2ZW50KHJlYWN0TmFtZSwgcmVhY3RFdmVudFR5cGUsIHRhcmdldEluc3QsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkgewogICAgICAgICAgdGhpcy5fcmVhY3ROYW1lID0gcmVhY3ROYW1lOwogICAgICAgICAgdGhpcy5fdGFyZ2V0SW5zdCA9IHRhcmdldEluc3Q7CiAgICAgICAgICB0aGlzLnR5cGUgPSByZWFjdEV2ZW50VHlwZTsKICAgICAgICAgIHRoaXMubmF0aXZlRXZlbnQgPSBuYXRpdmVFdmVudDsKICAgICAgICAgIHRoaXMudGFyZ2V0ID0gbmF0aXZlRXZlbnRUYXJnZXQ7CiAgICAgICAgICB0aGlzLmN1cnJlbnRUYXJnZXQgPSBudWxsOwogICAgICAgICAgZm9yICh2YXIgcHJvcE5hbWUgaW4gSW50ZXJmYWNlKQogICAgICAgICAgICBJbnRlcmZhY2UuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpICYmIChyZWFjdE5hbWUgPSBJbnRlcmZhY2VbcHJvcE5hbWVdLCB0aGlzW3Byb3BOYW1lXSA9IHJlYWN0TmFtZSA/IHJlYWN0TmFtZShuYXRpdmVFdmVudCkgOiBuYXRpdmVFdmVudFtwcm9wTmFtZV0pOwogICAgICAgICAgdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSAobnVsbCAhPSBuYXRpdmVFdmVudC5kZWZhdWx0UHJldmVudGVkID8gbmF0aXZlRXZlbnQuZGVmYXVsdFByZXZlbnRlZCA6IGZhbHNlID09PSBuYXRpdmVFdmVudC5yZXR1cm5WYWx1ZSkgPyBmdW5jdGlvblRoYXRSZXR1cm5zVHJ1ZSA6IGZ1bmN0aW9uVGhhdFJldHVybnNGYWxzZTsKICAgICAgICAgIHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSBmdW5jdGlvblRoYXRSZXR1cm5zRmFsc2U7CiAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CiAgICAgICAgYXNzaWduKFN5bnRoZXRpY0Jhc2VFdmVudC5wcm90b3R5cGUsIHsKICAgICAgICAgIHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdGhpcy5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTsKICAgICAgICAgICAgdmFyIGV2ZW50ID0gdGhpcy5uYXRpdmVFdmVudDsKICAgICAgICAgICAgZXZlbnQgJiYgKGV2ZW50LnByZXZlbnREZWZhdWx0ID8gZXZlbnQucHJldmVudERlZmF1bHQoKSA6ICJ1bmtub3duIiAhPT0gdHlwZW9mIGV2ZW50LnJldHVyblZhbHVlICYmIChldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlKSwgdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSBmdW5jdGlvblRoYXRSZXR1cm5zVHJ1ZSk7CiAgICAgICAgICB9LAogICAgICAgICAgc3RvcFByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIGV2ZW50ID0gdGhpcy5uYXRpdmVFdmVudDsKICAgICAgICAgICAgZXZlbnQgJiYgKGV2ZW50LnN0b3BQcm9wYWdhdGlvbiA/IGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpIDogInVua25vd24iICE9PSB0eXBlb2YgZXZlbnQuY2FuY2VsQnViYmxlICYmIChldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlKSwgdGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZCA9IGZ1bmN0aW9uVGhhdFJldHVybnNUcnVlKTsKICAgICAgICAgIH0sCiAgICAgICAgICBwZXJzaXN0OiBmdW5jdGlvbigpIHsKICAgICAgICAgIH0sCiAgICAgICAgICBpc1BlcnNpc3RlbnQ6IGZ1bmN0aW9uVGhhdFJldHVybnNUcnVlCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIFN5bnRoZXRpY0Jhc2VFdmVudDsKICAgICAgfQogICAgICBmdW5jdGlvbiBtb2RpZmllclN0YXRlR2V0dGVyKGtleUFyZykgewogICAgICAgIHZhciBuYXRpdmVFdmVudCA9IHRoaXMubmF0aXZlRXZlbnQ7CiAgICAgICAgcmV0dXJuIG5hdGl2ZUV2ZW50LmdldE1vZGlmaWVyU3RhdGUgPyBuYXRpdmVFdmVudC5nZXRNb2RpZmllclN0YXRlKGtleUFyZykgOiAoa2V5QXJnID0gbW9kaWZpZXJLZXlUb1Byb3Bba2V5QXJnXSkgPyAhIW5hdGl2ZUV2ZW50W2tleUFyZ10gOiBmYWxzZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBnZXRFdmVudE1vZGlmaWVyU3RhdGUoKSB7CiAgICAgICAgcmV0dXJuIG1vZGlmaWVyU3RhdGVHZXR0ZXI7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gaXNGYWxsYmFja0NvbXBvc2l0aW9uRW5kKGRvbUV2ZW50TmFtZSwgbmF0aXZlRXZlbnQpIHsKICAgICAgICBzd2l0Y2ggKGRvbUV2ZW50TmFtZSkgewogICAgICAgICAgY2FzZSAia2V5dXAiOgogICAgICAgICAgICByZXR1cm4gLTEgIT09IEVORF9LRVlDT0RFUy5pbmRleE9mKG5hdGl2ZUV2ZW50LmtleUNvZGUpOwogICAgICAgICAgY2FzZSAia2V5ZG93biI6CiAgICAgICAgICAgIHJldHVybiBuYXRpdmVFdmVudC5rZXlDb2RlICE9PSBTVEFSVF9LRVlDT0RFOwogICAgICAgICAgY2FzZSAia2V5cHJlc3MiOgogICAgICAgICAgY2FzZSAibW91c2Vkb3duIjoKICAgICAgICAgIGNhc2UgImZvY3Vzb3V0IjoKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldERhdGFGcm9tQ3VzdG9tRXZlbnQobmF0aXZlRXZlbnQpIHsKICAgICAgICBuYXRpdmVFdmVudCA9IG5hdGl2ZUV2ZW50LmRldGFpbDsKICAgICAgICByZXR1cm4gIm9iamVjdCIgPT09IHR5cGVvZiBuYXRpdmVFdmVudCAmJiAiZGF0YSIgaW4gbmF0aXZlRXZlbnQgPyBuYXRpdmVFdmVudC5kYXRhIDogbnVsbDsKICAgICAgfQogICAgICBmdW5jdGlvbiBnZXROYXRpdmVCZWZvcmVJbnB1dENoYXJzKGRvbUV2ZW50TmFtZSwgbmF0aXZlRXZlbnQpIHsKICAgICAgICBzd2l0Y2ggKGRvbUV2ZW50TmFtZSkgewogICAgICAgICAgY2FzZSAiY29tcG9zaXRpb25lbmQiOgogICAgICAgICAgICByZXR1cm4gZ2V0RGF0YUZyb21DdXN0b21FdmVudChuYXRpdmVFdmVudCk7CiAgICAgICAgICBjYXNlICJrZXlwcmVzcyI6CiAgICAgICAgICAgIGlmIChuYXRpdmVFdmVudC53aGljaCAhPT0gU1BBQ0VCQVJfQ09ERSkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIGhhc1NwYWNlS2V5cHJlc3MgPSB0cnVlOwogICAgICAgICAgICByZXR1cm4gU1BBQ0VCQVJfQ0hBUjsKICAgICAgICAgIGNhc2UgInRleHRJbnB1dCI6CiAgICAgICAgICAgIHJldHVybiBkb21FdmVudE5hbWUgPSBuYXRpdmVFdmVudC5kYXRhLCBkb21FdmVudE5hbWUgPT09IFNQQUNFQkFSX0NIQVIgJiYgaGFzU3BhY2VLZXlwcmVzcyA/IG51bGwgOiBkb21FdmVudE5hbWU7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0RmFsbGJhY2tCZWZvcmVJbnB1dENoYXJzKGRvbUV2ZW50TmFtZSwgbmF0aXZlRXZlbnQpIHsKICAgICAgICBpZiAoaXNDb21wb3NpbmcpCiAgICAgICAgICByZXR1cm4gImNvbXBvc2l0aW9uZW5kIiA9PT0gZG9tRXZlbnROYW1lIHx8ICFjYW5Vc2VDb21wb3NpdGlvbkV2ZW50ICYmIGlzRmFsbGJhY2tDb21wb3NpdGlvbkVuZChkb21FdmVudE5hbWUsIG5hdGl2ZUV2ZW50KSA/IChkb21FdmVudE5hbWUgPSBnZXREYXRhKCksIGZhbGxiYWNrVGV4dCA9IHN0YXJ0VGV4dCA9IHJvb3QgPSBudWxsLCBpc0NvbXBvc2luZyA9IGZhbHNlLCBkb21FdmVudE5hbWUpIDogbnVsbDsKICAgICAgICBzd2l0Y2ggKGRvbUV2ZW50TmFtZSkgewogICAgICAgICAgY2FzZSAicGFzdGUiOgogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIGNhc2UgImtleXByZXNzIjoKICAgICAgICAgICAgaWYgKCEobmF0aXZlRXZlbnQuY3RybEtleSB8fCBuYXRpdmVFdmVudC5hbHRLZXkgfHwgbmF0aXZlRXZlbnQubWV0YUtleSkgfHwgbmF0aXZlRXZlbnQuY3RybEtleSAmJiBuYXRpdmVFdmVudC5hbHRLZXkpIHsKICAgICAgICAgICAgICBpZiAobmF0aXZlRXZlbnQuY2hhciAmJiAxIDwgbmF0aXZlRXZlbnQuY2hhci5sZW5ndGgpCiAgICAgICAgICAgICAgICByZXR1cm4gbmF0aXZlRXZlbnQuY2hhcjsKICAgICAgICAgICAgICBpZiAobmF0aXZlRXZlbnQud2hpY2gpCiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShuYXRpdmVFdmVudC53aGljaCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICBjYXNlICJjb21wb3NpdGlvbmVuZCI6CiAgICAgICAgICAgIHJldHVybiB1c2VGYWxsYmFja0NvbXBvc2l0aW9uRGF0YSAmJiAia28iICE9PSBuYXRpdmVFdmVudC5sb2NhbGUgPyBudWxsIDogbmF0aXZlRXZlbnQuZGF0YTsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBpc1RleHRJbnB1dEVsZW1lbnQoZWxlbSkgewogICAgICAgIHZhciBub2RlTmFtZSA9IGVsZW0gJiYgZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgcmV0dXJuICJpbnB1dCIgPT09IG5vZGVOYW1lID8gISFzdXBwb3J0ZWRJbnB1dFR5cGVzW2VsZW0udHlwZV0gOiAidGV4dGFyZWEiID09PSBub2RlTmFtZSA/IHRydWUgOiBmYWxzZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBpc0V2ZW50U3VwcG9ydGVkKGV2ZW50TmFtZVN1ZmZpeCkgewogICAgICAgIGlmICghY2FuVXNlRE9NKSByZXR1cm4gZmFsc2U7CiAgICAgICAgZXZlbnROYW1lU3VmZml4ID0gIm9uIiArIGV2ZW50TmFtZVN1ZmZpeDsKICAgICAgICB2YXIgaXNTdXBwb3J0ZWQgPSBldmVudE5hbWVTdWZmaXggaW4gZG9jdW1lbnQ7CiAgICAgICAgaXNTdXBwb3J0ZWQgfHwgKGlzU3VwcG9ydGVkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksIGlzU3VwcG9ydGVkLnNldEF0dHJpYnV0ZShldmVudE5hbWVTdWZmaXgsICJyZXR1cm47IiksIGlzU3VwcG9ydGVkID0gImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGlzU3VwcG9ydGVkW2V2ZW50TmFtZVN1ZmZpeF0pOwogICAgICAgIHJldHVybiBpc1N1cHBvcnRlZDsKICAgICAgfQogICAgICBmdW5jdGlvbiBjcmVhdGVBbmRBY2N1bXVsYXRlQ2hhbmdlRXZlbnQoZGlzcGF0Y2hRdWV1ZSwgaW5zdCwgbmF0aXZlRXZlbnQsIHRhcmdldCkgewogICAgICAgIHJlc3RvcmVUYXJnZXQgPyByZXN0b3JlUXVldWUgPyByZXN0b3JlUXVldWUucHVzaCh0YXJnZXQpIDogcmVzdG9yZVF1ZXVlID0gW3RhcmdldF0gOiByZXN0b3JlVGFyZ2V0ID0gdGFyZ2V0OwogICAgICAgIGluc3QgPSBhY2N1bXVsYXRlVHdvUGhhc2VMaXN0ZW5lcnMoaW5zdCwgIm9uQ2hhbmdlIik7CiAgICAgICAgMCA8IGluc3QubGVuZ3RoICYmIChuYXRpdmVFdmVudCA9IG5ldyBTeW50aGV0aWNFdmVudCgKICAgICAgICAgICJvbkNoYW5nZSIsCiAgICAgICAgICAiY2hhbmdlIiwKICAgICAgICAgIG51bGwsCiAgICAgICAgICBuYXRpdmVFdmVudCwKICAgICAgICAgIHRhcmdldAogICAgICAgICksIGRpc3BhdGNoUXVldWUucHVzaCh7IGV2ZW50OiBuYXRpdmVFdmVudCwgbGlzdGVuZXJzOiBpbnN0IH0pKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBydW5FdmVudEluQmF0Y2goZGlzcGF0Y2hRdWV1ZSkgewogICAgICAgIHByb2Nlc3NEaXNwYXRjaFF1ZXVlKGRpc3BhdGNoUXVldWUsIDApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldEluc3RJZlZhbHVlQ2hhbmdlZCh0YXJnZXRJbnN0KSB7CiAgICAgICAgdmFyIHRhcmdldE5vZGUgPSBnZXROb2RlRnJvbUluc3RhbmNlKHRhcmdldEluc3QpOwogICAgICAgIGlmICh1cGRhdGVWYWx1ZUlmQ2hhbmdlZCh0YXJnZXROb2RlKSkgcmV0dXJuIHRhcmdldEluc3Q7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0VGFyZ2V0SW5zdEZvckNoYW5nZUV2ZW50KGRvbUV2ZW50TmFtZSwgdGFyZ2V0SW5zdCkgewogICAgICAgIGlmICgiY2hhbmdlIiA9PT0gZG9tRXZlbnROYW1lKSByZXR1cm4gdGFyZ2V0SW5zdDsKICAgICAgfQogICAgICBmdW5jdGlvbiBzdG9wV2F0Y2hpbmdGb3JWYWx1ZUNoYW5nZSgpIHsKICAgICAgICBhY3RpdmVFbGVtZW50JDEgJiYgKGFjdGl2ZUVsZW1lbnQkMS5kZXRhY2hFdmVudCgib25wcm9wZXJ0eWNoYW5nZSIsIGhhbmRsZVByb3BlcnR5Q2hhbmdlKSwgYWN0aXZlRWxlbWVudEluc3QkMSA9IGFjdGl2ZUVsZW1lbnQkMSA9IG51bGwpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGhhbmRsZVByb3BlcnR5Q2hhbmdlKG5hdGl2ZUV2ZW50KSB7CiAgICAgICAgaWYgKCJ2YWx1ZSIgPT09IG5hdGl2ZUV2ZW50LnByb3BlcnR5TmFtZSAmJiBnZXRJbnN0SWZWYWx1ZUNoYW5nZWQoYWN0aXZlRWxlbWVudEluc3QkMSkpIHsKICAgICAgICAgIHZhciBkaXNwYXRjaFF1ZXVlID0gW107CiAgICAgICAgICBjcmVhdGVBbmRBY2N1bXVsYXRlQ2hhbmdlRXZlbnQoCiAgICAgICAgICAgIGRpc3BhdGNoUXVldWUsCiAgICAgICAgICAgIGFjdGl2ZUVsZW1lbnRJbnN0JDEsCiAgICAgICAgICAgIG5hdGl2ZUV2ZW50LAogICAgICAgICAgICBnZXRFdmVudFRhcmdldChuYXRpdmVFdmVudCkKICAgICAgICAgICk7CiAgICAgICAgICBiYXRjaGVkVXBkYXRlcyQxKHJ1bkV2ZW50SW5CYXRjaCwgZGlzcGF0Y2hRdWV1ZSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGhhbmRsZUV2ZW50c0ZvcklucHV0RXZlbnRQb2x5ZmlsbChkb21FdmVudE5hbWUsIHRhcmdldCwgdGFyZ2V0SW5zdCkgewogICAgICAgICJmb2N1c2luIiA9PT0gZG9tRXZlbnROYW1lID8gKHN0b3BXYXRjaGluZ0ZvclZhbHVlQ2hhbmdlKCksIGFjdGl2ZUVsZW1lbnQkMSA9IHRhcmdldCwgYWN0aXZlRWxlbWVudEluc3QkMSA9IHRhcmdldEluc3QsIGFjdGl2ZUVsZW1lbnQkMS5hdHRhY2hFdmVudCgib25wcm9wZXJ0eWNoYW5nZSIsIGhhbmRsZVByb3BlcnR5Q2hhbmdlKSkgOiAiZm9jdXNvdXQiID09PSBkb21FdmVudE5hbWUgJiYgc3RvcFdhdGNoaW5nRm9yVmFsdWVDaGFuZ2UoKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBnZXRUYXJnZXRJbnN0Rm9ySW5wdXRFdmVudFBvbHlmaWxsKGRvbUV2ZW50TmFtZSkgewogICAgICAgIGlmICgic2VsZWN0aW9uY2hhbmdlIiA9PT0gZG9tRXZlbnROYW1lIHx8ICJrZXl1cCIgPT09IGRvbUV2ZW50TmFtZSB8fCAia2V5ZG93biIgPT09IGRvbUV2ZW50TmFtZSkKICAgICAgICAgIHJldHVybiBnZXRJbnN0SWZWYWx1ZUNoYW5nZWQoYWN0aXZlRWxlbWVudEluc3QkMSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0VGFyZ2V0SW5zdEZvckNsaWNrRXZlbnQoZG9tRXZlbnROYW1lLCB0YXJnZXRJbnN0KSB7CiAgICAgICAgaWYgKCJjbGljayIgPT09IGRvbUV2ZW50TmFtZSkgcmV0dXJuIGdldEluc3RJZlZhbHVlQ2hhbmdlZCh0YXJnZXRJbnN0KTsKICAgICAgfQogICAgICBmdW5jdGlvbiBnZXRUYXJnZXRJbnN0Rm9ySW5wdXRPckNoYW5nZUV2ZW50KGRvbUV2ZW50TmFtZSwgdGFyZ2V0SW5zdCkgewogICAgICAgIGlmICgiaW5wdXQiID09PSBkb21FdmVudE5hbWUgfHwgImNoYW5nZSIgPT09IGRvbUV2ZW50TmFtZSkKICAgICAgICAgIHJldHVybiBnZXRJbnN0SWZWYWx1ZUNoYW5nZWQodGFyZ2V0SW5zdCk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gaXMoeCwgeSkgewogICAgICAgIHJldHVybiB4ID09PSB5ICYmICgwICE9PSB4IHx8IDEgLyB4ID09PSAxIC8geSkgfHwgeCAhPT0geCAmJiB5ICE9PSB5OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHNoYWxsb3dFcXVhbChvYmpBLCBvYmpCKSB7CiAgICAgICAgaWYgKG9iamVjdElzKG9iakEsIG9iakIpKSByZXR1cm4gdHJ1ZTsKICAgICAgICBpZiAoIm9iamVjdCIgIT09IHR5cGVvZiBvYmpBIHx8IG51bGwgPT09IG9iakEgfHwgIm9iamVjdCIgIT09IHR5cGVvZiBvYmpCIHx8IG51bGwgPT09IG9iakIpCiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgdmFyIGtleXNBID0gT2JqZWN0LmtleXMob2JqQSksIGtleXNCID0gT2JqZWN0LmtleXMob2JqQik7CiAgICAgICAgaWYgKGtleXNBLmxlbmd0aCAhPT0ga2V5c0IubGVuZ3RoKSByZXR1cm4gZmFsc2U7CiAgICAgICAgZm9yIChrZXlzQiA9IDA7IGtleXNCIDwga2V5c0EubGVuZ3RoOyBrZXlzQisrKSB7CiAgICAgICAgICB2YXIgY3VycmVudEtleSA9IGtleXNBW2tleXNCXTsKICAgICAgICAgIGlmICghaGFzT3duUHJvcGVydHkuY2FsbChvYmpCLCBjdXJyZW50S2V5KSB8fCAhb2JqZWN0SXMob2JqQVtjdXJyZW50S2V5XSwgb2JqQltjdXJyZW50S2V5XSkpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0TGVhZk5vZGUobm9kZSkgewogICAgICAgIGZvciAoOyBub2RlICYmIG5vZGUuZmlyc3RDaGlsZDsgKSBub2RlID0gbm9kZS5maXJzdENoaWxkOwogICAgICAgIHJldHVybiBub2RlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldE5vZGVGb3JDaGFyYWN0ZXJPZmZzZXQocm9vdDIsIG9mZnNldCkgewogICAgICAgIHZhciBub2RlID0gZ2V0TGVhZk5vZGUocm9vdDIpOwogICAgICAgIHJvb3QyID0gMDsKICAgICAgICBmb3IgKHZhciBub2RlRW5kOyBub2RlOyApIHsKICAgICAgICAgIGlmICgzID09PSBub2RlLm5vZGVUeXBlKSB7CiAgICAgICAgICAgIG5vZGVFbmQgPSByb290MiArIG5vZGUudGV4dENvbnRlbnQubGVuZ3RoOwogICAgICAgICAgICBpZiAocm9vdDIgPD0gb2Zmc2V0ICYmIG5vZGVFbmQgPj0gb2Zmc2V0KQogICAgICAgICAgICAgIHJldHVybiB7IG5vZGUsIG9mZnNldDogb2Zmc2V0IC0gcm9vdDIgfTsKICAgICAgICAgICAgcm9vdDIgPSBub2RlRW5kOwogICAgICAgICAgfQogICAgICAgICAgYTogewogICAgICAgICAgICBmb3IgKDsgbm9kZTsgKSB7CiAgICAgICAgICAgICAgaWYgKG5vZGUubmV4dFNpYmxpbmcpIHsKICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nOwogICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBub2RlID0gdm9pZCAwOwogICAgICAgICAgfQogICAgICAgICAgbm9kZSA9IGdldExlYWZOb2RlKG5vZGUpOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBjb250YWluc05vZGUob3V0ZXJOb2RlLCBpbm5lck5vZGUpIHsKICAgICAgICByZXR1cm4gb3V0ZXJOb2RlICYmIGlubmVyTm9kZSA/IG91dGVyTm9kZSA9PT0gaW5uZXJOb2RlID8gdHJ1ZSA6IG91dGVyTm9kZSAmJiAzID09PSBvdXRlck5vZGUubm9kZVR5cGUgPyBmYWxzZSA6IGlubmVyTm9kZSAmJiAzID09PSBpbm5lck5vZGUubm9kZVR5cGUgPyBjb250YWluc05vZGUob3V0ZXJOb2RlLCBpbm5lck5vZGUucGFyZW50Tm9kZSkgOiAiY29udGFpbnMiIGluIG91dGVyTm9kZSA/IG91dGVyTm9kZS5jb250YWlucyhpbm5lck5vZGUpIDogb3V0ZXJOb2RlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uID8gISEob3V0ZXJOb2RlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGlubmVyTm9kZSkgJiAxNikgOiBmYWxzZSA6IGZhbHNlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldEFjdGl2ZUVsZW1lbnREZWVwKGNvbnRhaW5lckluZm8pIHsKICAgICAgICBjb250YWluZXJJbmZvID0gbnVsbCAhPSBjb250YWluZXJJbmZvICYmIG51bGwgIT0gY29udGFpbmVySW5mby5vd25lckRvY3VtZW50ICYmIG51bGwgIT0gY29udGFpbmVySW5mby5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3ID8gY29udGFpbmVySW5mby5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3IDogd2luZG93OwogICAgICAgIGZvciAodmFyIGVsZW1lbnQgPSBnZXRBY3RpdmVFbGVtZW50KGNvbnRhaW5lckluZm8uZG9jdW1lbnQpOyBlbGVtZW50IGluc3RhbmNlb2YgY29udGFpbmVySW5mby5IVE1MSUZyYW1lRWxlbWVudDsgKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0ID0gInN0cmluZyIgPT09IHR5cGVvZiBlbGVtZW50LmNvbnRlbnRXaW5kb3cubG9jYXRpb24uaHJlZjsKICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQpIGNvbnRhaW5lckluZm8gPSBlbGVtZW50LmNvbnRlbnRXaW5kb3c7CiAgICAgICAgICBlbHNlIGJyZWFrOwogICAgICAgICAgZWxlbWVudCA9IGdldEFjdGl2ZUVsZW1lbnQoY29udGFpbmVySW5mby5kb2N1bWVudCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBlbGVtZW50OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGhhc1NlbGVjdGlvbkNhcGFiaWxpdGllcyhlbGVtKSB7CiAgICAgICAgdmFyIG5vZGVOYW1lID0gZWxlbSAmJiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgICByZXR1cm4gbm9kZU5hbWUgJiYgKCJpbnB1dCIgPT09IG5vZGVOYW1lICYmICgidGV4dCIgPT09IGVsZW0udHlwZSB8fCAic2VhcmNoIiA9PT0gZWxlbS50eXBlIHx8ICJ0ZWwiID09PSBlbGVtLnR5cGUgfHwgInVybCIgPT09IGVsZW0udHlwZSB8fCAicGFzc3dvcmQiID09PSBlbGVtLnR5cGUpIHx8ICJ0ZXh0YXJlYSIgPT09IG5vZGVOYW1lIHx8ICJ0cnVlIiA9PT0gZWxlbS5jb250ZW50RWRpdGFibGUpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNvbnN0cnVjdFNlbGVjdEV2ZW50KGRpc3BhdGNoUXVldWUsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkgewogICAgICAgIHZhciBkb2MgPSBuYXRpdmVFdmVudFRhcmdldC53aW5kb3cgPT09IG5hdGl2ZUV2ZW50VGFyZ2V0ID8gbmF0aXZlRXZlbnRUYXJnZXQuZG9jdW1lbnQgOiA5ID09PSBuYXRpdmVFdmVudFRhcmdldC5ub2RlVHlwZSA/IG5hdGl2ZUV2ZW50VGFyZ2V0IDogbmF0aXZlRXZlbnRUYXJnZXQub3duZXJEb2N1bWVudDsKICAgICAgICBtb3VzZURvd24gfHwgbnVsbCA9PSBhY3RpdmVFbGVtZW50IHx8IGFjdGl2ZUVsZW1lbnQgIT09IGdldEFjdGl2ZUVsZW1lbnQoZG9jKSB8fCAoZG9jID0gYWN0aXZlRWxlbWVudCwgInNlbGVjdGlvblN0YXJ0IiBpbiBkb2MgJiYgaGFzU2VsZWN0aW9uQ2FwYWJpbGl0aWVzKGRvYykgPyBkb2MgPSB7IHN0YXJ0OiBkb2Muc2VsZWN0aW9uU3RhcnQsIGVuZDogZG9jLnNlbGVjdGlvbkVuZCB9IDogKGRvYyA9IChkb2Mub3duZXJEb2N1bWVudCAmJiBkb2Mub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyB8fCB3aW5kb3cpLmdldFNlbGVjdGlvbigpLCBkb2MgPSB7CiAgICAgICAgICBhbmNob3JOb2RlOiBkb2MuYW5jaG9yTm9kZSwKICAgICAgICAgIGFuY2hvck9mZnNldDogZG9jLmFuY2hvck9mZnNldCwKICAgICAgICAgIGZvY3VzTm9kZTogZG9jLmZvY3VzTm9kZSwKICAgICAgICAgIGZvY3VzT2Zmc2V0OiBkb2MuZm9jdXNPZmZzZXQKICAgICAgICB9KSwgbGFzdFNlbGVjdGlvbiAmJiBzaGFsbG93RXF1YWwobGFzdFNlbGVjdGlvbiwgZG9jKSB8fCAobGFzdFNlbGVjdGlvbiA9IGRvYywgZG9jID0gYWNjdW11bGF0ZVR3b1BoYXNlTGlzdGVuZXJzKGFjdGl2ZUVsZW1lbnRJbnN0LCAib25TZWxlY3QiKSwgMCA8IGRvYy5sZW5ndGggJiYgKG5hdGl2ZUV2ZW50ID0gbmV3IFN5bnRoZXRpY0V2ZW50KAogICAgICAgICAgIm9uU2VsZWN0IiwKICAgICAgICAgICJzZWxlY3QiLAogICAgICAgICAgbnVsbCwKICAgICAgICAgIG5hdGl2ZUV2ZW50LAogICAgICAgICAgbmF0aXZlRXZlbnRUYXJnZXQKICAgICAgICApLCBkaXNwYXRjaFF1ZXVlLnB1c2goeyBldmVudDogbmF0aXZlRXZlbnQsIGxpc3RlbmVyczogZG9jIH0pLCBuYXRpdmVFdmVudC50YXJnZXQgPSBhY3RpdmVFbGVtZW50KSkpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1ha2VQcmVmaXhNYXAoc3R5bGVQcm9wLCBldmVudE5hbWUpIHsKICAgICAgICB2YXIgcHJlZml4ZXMgPSB7fTsKICAgICAgICBwcmVmaXhlc1tzdHlsZVByb3AudG9Mb3dlckNhc2UoKV0gPSBldmVudE5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgICBwcmVmaXhlc1siV2Via2l0IiArIHN0eWxlUHJvcF0gPSAid2Via2l0IiArIGV2ZW50TmFtZTsKICAgICAgICBwcmVmaXhlc1siTW96IiArIHN0eWxlUHJvcF0gPSAibW96IiArIGV2ZW50TmFtZTsKICAgICAgICByZXR1cm4gcHJlZml4ZXM7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0VmVuZG9yUHJlZml4ZWRFdmVudE5hbWUoZXZlbnROYW1lKSB7CiAgICAgICAgaWYgKHByZWZpeGVkRXZlbnROYW1lc1tldmVudE5hbWVdKSByZXR1cm4gcHJlZml4ZWRFdmVudE5hbWVzW2V2ZW50TmFtZV07CiAgICAgICAgaWYgKCF2ZW5kb3JQcmVmaXhlc1tldmVudE5hbWVdKSByZXR1cm4gZXZlbnROYW1lOwogICAgICAgIHZhciBwcmVmaXhNYXAgPSB2ZW5kb3JQcmVmaXhlc1tldmVudE5hbWVdLCBzdHlsZVByb3A7CiAgICAgICAgZm9yIChzdHlsZVByb3AgaW4gcHJlZml4TWFwKQogICAgICAgICAgaWYgKHByZWZpeE1hcC5oYXNPd25Qcm9wZXJ0eShzdHlsZVByb3ApICYmIHN0eWxlUHJvcCBpbiBzdHlsZSkKICAgICAgICAgICAgcmV0dXJuIHByZWZpeGVkRXZlbnROYW1lc1tldmVudE5hbWVdID0gcHJlZml4TWFwW3N0eWxlUHJvcF07CiAgICAgICAgcmV0dXJuIGV2ZW50TmFtZTsKICAgICAgfQogICAgICBmdW5jdGlvbiByZWdpc3RlclNpbXBsZUV2ZW50KGRvbUV2ZW50TmFtZSwgcmVhY3ROYW1lKSB7CiAgICAgICAgdG9wTGV2ZWxFdmVudHNUb1JlYWN0TmFtZXMuc2V0KGRvbUV2ZW50TmFtZSwgcmVhY3ROYW1lKTsKICAgICAgICByZWdpc3RlclR3b1BoYXNlRXZlbnQocmVhY3ROYW1lLCBbZG9tRXZlbnROYW1lXSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY3JlYXRlQ2FwdHVyZWRWYWx1ZUF0RmliZXIodmFsdWUsIHNvdXJjZSkgewogICAgICAgIGlmICgib2JqZWN0IiA9PT0gdHlwZW9mIHZhbHVlICYmIG51bGwgIT09IHZhbHVlKSB7CiAgICAgICAgICB2YXIgZXhpc3RpbmcgPSBDYXB0dXJlZFN0YWNrcy5nZXQodmFsdWUpOwogICAgICAgICAgaWYgKHZvaWQgMCAhPT0gZXhpc3RpbmcpIHJldHVybiBleGlzdGluZzsKICAgICAgICAgIHNvdXJjZSA9IHsKICAgICAgICAgICAgdmFsdWUsCiAgICAgICAgICAgIHNvdXJjZSwKICAgICAgICAgICAgc3RhY2s6IGdldFN0YWNrQnlGaWJlckluRGV2QW5kUHJvZChzb3VyY2UpCiAgICAgICAgICB9OwogICAgICAgICAgQ2FwdHVyZWRTdGFja3Muc2V0KHZhbHVlLCBzb3VyY2UpOwogICAgICAgICAgcmV0dXJuIHNvdXJjZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHZhbHVlLAogICAgICAgICAgc291cmNlLAogICAgICAgICAgc3RhY2s6IGdldFN0YWNrQnlGaWJlckluRGV2QW5kUHJvZChzb3VyY2UpCiAgICAgICAgfTsKICAgICAgfQogICAgICBmdW5jdGlvbiBmaW5pc2hRdWV1ZWluZ0NvbmN1cnJlbnRVcGRhdGVzKCkgewogICAgICAgIGZvciAodmFyIGVuZEluZGV4ID0gY29uY3VycmVudFF1ZXVlc0luZGV4LCBpID0gY29uY3VycmVudGx5VXBkYXRlZExhbmVzID0gY29uY3VycmVudFF1ZXVlc0luZGV4ID0gMDsgaSA8IGVuZEluZGV4OyApIHsKICAgICAgICAgIHZhciBmaWJlciA9IGNvbmN1cnJlbnRRdWV1ZXNbaV07CiAgICAgICAgICBjb25jdXJyZW50UXVldWVzW2krK10gPSBudWxsOwogICAgICAgICAgdmFyIHF1ZXVlID0gY29uY3VycmVudFF1ZXVlc1tpXTsKICAgICAgICAgIGNvbmN1cnJlbnRRdWV1ZXNbaSsrXSA9IG51bGw7CiAgICAgICAgICB2YXIgdXBkYXRlID0gY29uY3VycmVudFF1ZXVlc1tpXTsKICAgICAgICAgIGNvbmN1cnJlbnRRdWV1ZXNbaSsrXSA9IG51bGw7CiAgICAgICAgICB2YXIgbGFuZSA9IGNvbmN1cnJlbnRRdWV1ZXNbaV07CiAgICAgICAgICBjb25jdXJyZW50UXVldWVzW2krK10gPSBudWxsOwogICAgICAgICAgaWYgKG51bGwgIT09IHF1ZXVlICYmIG51bGwgIT09IHVwZGF0ZSkgewogICAgICAgICAgICB2YXIgcGVuZGluZyA9IHF1ZXVlLnBlbmRpbmc7CiAgICAgICAgICAgIG51bGwgPT09IHBlbmRpbmcgPyB1cGRhdGUubmV4dCA9IHVwZGF0ZSA6ICh1cGRhdGUubmV4dCA9IHBlbmRpbmcubmV4dCwgcGVuZGluZy5uZXh0ID0gdXBkYXRlKTsKICAgICAgICAgICAgcXVldWUucGVuZGluZyA9IHVwZGF0ZTsKICAgICAgICAgIH0KICAgICAgICAgIDAgIT09IGxhbmUgJiYgbWFya1VwZGF0ZUxhbmVGcm9tRmliZXJUb1Jvb3QoZmliZXIsIHVwZGF0ZSwgbGFuZSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGVucXVldWVVcGRhdGUkMShmaWJlciwgcXVldWUsIHVwZGF0ZSwgbGFuZSkgewogICAgICAgIGNvbmN1cnJlbnRRdWV1ZXNbY29uY3VycmVudFF1ZXVlc0luZGV4KytdID0gZmliZXI7CiAgICAgICAgY29uY3VycmVudFF1ZXVlc1tjb25jdXJyZW50UXVldWVzSW5kZXgrK10gPSBxdWV1ZTsKICAgICAgICBjb25jdXJyZW50UXVldWVzW2NvbmN1cnJlbnRRdWV1ZXNJbmRleCsrXSA9IHVwZGF0ZTsKICAgICAgICBjb25jdXJyZW50UXVldWVzW2NvbmN1cnJlbnRRdWV1ZXNJbmRleCsrXSA9IGxhbmU7CiAgICAgICAgY29uY3VycmVudGx5VXBkYXRlZExhbmVzIHw9IGxhbmU7CiAgICAgICAgZmliZXIubGFuZXMgfD0gbGFuZTsKICAgICAgICBmaWJlciA9IGZpYmVyLmFsdGVybmF0ZTsKICAgICAgICBudWxsICE9PSBmaWJlciAmJiAoZmliZXIubGFuZXMgfD0gbGFuZSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZW5xdWV1ZUNvbmN1cnJlbnRIb29rVXBkYXRlKGZpYmVyLCBxdWV1ZSwgdXBkYXRlLCBsYW5lKSB7CiAgICAgICAgZW5xdWV1ZVVwZGF0ZSQxKGZpYmVyLCBxdWV1ZSwgdXBkYXRlLCBsYW5lKTsKICAgICAgICByZXR1cm4gZ2V0Um9vdEZvclVwZGF0ZWRGaWJlcihmaWJlcik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZW5xdWV1ZUNvbmN1cnJlbnRSZW5kZXJGb3JMYW5lKGZpYmVyLCBsYW5lKSB7CiAgICAgICAgZW5xdWV1ZVVwZGF0ZSQxKGZpYmVyLCBudWxsLCBudWxsLCBsYW5lKTsKICAgICAgICByZXR1cm4gZ2V0Um9vdEZvclVwZGF0ZWRGaWJlcihmaWJlcik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbWFya1VwZGF0ZUxhbmVGcm9tRmliZXJUb1Jvb3Qoc291cmNlRmliZXIsIHVwZGF0ZSwgbGFuZSkgewogICAgICAgIHNvdXJjZUZpYmVyLmxhbmVzIHw9IGxhbmU7CiAgICAgICAgdmFyIGFsdGVybmF0ZSA9IHNvdXJjZUZpYmVyLmFsdGVybmF0ZTsKICAgICAgICBudWxsICE9PSBhbHRlcm5hdGUgJiYgKGFsdGVybmF0ZS5sYW5lcyB8PSBsYW5lKTsKICAgICAgICBmb3IgKHZhciBpc0hpZGRlbiA9IGZhbHNlLCBwYXJlbnQgPSBzb3VyY2VGaWJlci5yZXR1cm47IG51bGwgIT09IHBhcmVudDsgKQogICAgICAgICAgcGFyZW50LmNoaWxkTGFuZXMgfD0gbGFuZSwgYWx0ZXJuYXRlID0gcGFyZW50LmFsdGVybmF0ZSwgbnVsbCAhPT0gYWx0ZXJuYXRlICYmIChhbHRlcm5hdGUuY2hpbGRMYW5lcyB8PSBsYW5lKSwgMjIgPT09IHBhcmVudC50YWcgJiYgKHNvdXJjZUZpYmVyID0gcGFyZW50LnN0YXRlTm9kZSwgbnVsbCA9PT0gc291cmNlRmliZXIgfHwgc291cmNlRmliZXIuX3Zpc2liaWxpdHkgJiBPZmZzY3JlZW5WaXNpYmxlIHx8IChpc0hpZGRlbiA9IHRydWUpKSwgc291cmNlRmliZXIgPSBwYXJlbnQsIHBhcmVudCA9IHBhcmVudC5yZXR1cm47CiAgICAgICAgcmV0dXJuIDMgPT09IHNvdXJjZUZpYmVyLnRhZyA/IChwYXJlbnQgPSBzb3VyY2VGaWJlci5zdGF0ZU5vZGUsIGlzSGlkZGVuICYmIG51bGwgIT09IHVwZGF0ZSAmJiAoaXNIaWRkZW4gPSAzMSAtIGNsejMyKGxhbmUpLCBzb3VyY2VGaWJlciA9IHBhcmVudC5oaWRkZW5VcGRhdGVzLCBhbHRlcm5hdGUgPSBzb3VyY2VGaWJlcltpc0hpZGRlbl0sIG51bGwgPT09IGFsdGVybmF0ZSA/IHNvdXJjZUZpYmVyW2lzSGlkZGVuXSA9IFt1cGRhdGVdIDogYWx0ZXJuYXRlLnB1c2godXBkYXRlKSwgdXBkYXRlLmxhbmUgPSBsYW5lIHwgNTM2ODcwOTEyKSwgcGFyZW50KSA6IG51bGw7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0Um9vdEZvclVwZGF0ZWRGaWJlcihzb3VyY2VGaWJlcikgewogICAgICAgIGlmIChuZXN0ZWRVcGRhdGVDb3VudCA+IE5FU1RFRF9VUERBVEVfTElNSVQpCiAgICAgICAgICB0aHJvdyBuZXN0ZWRQYXNzaXZlVXBkYXRlQ291bnQgPSBuZXN0ZWRVcGRhdGVDb3VudCA9IDAsIHJvb3RXaXRoUGFzc2l2ZU5lc3RlZFVwZGF0ZXMgPSByb290V2l0aE5lc3RlZFVwZGF0ZXMgPSBudWxsLCBFcnJvcigKICAgICAgICAgICAgIk1heGltdW0gdXBkYXRlIGRlcHRoIGV4Y2VlZGVkLiBUaGlzIGNhbiBoYXBwZW4gd2hlbiBhIGNvbXBvbmVudCByZXBlYXRlZGx5IGNhbGxzIHNldFN0YXRlIGluc2lkZSBjb21wb25lbnRXaWxsVXBkYXRlIG9yIGNvbXBvbmVudERpZFVwZGF0ZS4gUmVhY3QgbGltaXRzIHRoZSBudW1iZXIgb2YgbmVzdGVkIHVwZGF0ZXMgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wcy4iCiAgICAgICAgICApOwogICAgICAgIG5lc3RlZFBhc3NpdmVVcGRhdGVDb3VudCA+IE5FU1RFRF9QQVNTSVZFX1VQREFURV9MSU1JVCAmJiAobmVzdGVkUGFzc2l2ZVVwZGF0ZUNvdW50ID0gMCwgcm9vdFdpdGhQYXNzaXZlTmVzdGVkVXBkYXRlcyA9IG51bGwsIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiTWF4aW11bSB1cGRhdGUgZGVwdGggZXhjZWVkZWQuIFRoaXMgY2FuIGhhcHBlbiB3aGVuIGEgY29tcG9uZW50IGNhbGxzIHNldFN0YXRlIGluc2lkZSB1c2VFZmZlY3QsIGJ1dCB1c2VFZmZlY3QgZWl0aGVyIGRvZXNuJ3QgaGF2ZSBhIGRlcGVuZGVuY3kgYXJyYXksIG9yIG9uZSBvZiB0aGUgZGVwZW5kZW5jaWVzIGNoYW5nZXMgb24gZXZlcnkgcmVuZGVyLiIKICAgICAgICApKTsKICAgICAgICBudWxsID09PSBzb3VyY2VGaWJlci5hbHRlcm5hdGUgJiYgMCAhPT0gKHNvdXJjZUZpYmVyLmZsYWdzICYgNDA5OCkgJiYgd2FybkFib3V0VXBkYXRlT25Ob3RZZXRNb3VudGVkRmliZXJJbkRFVihzb3VyY2VGaWJlcik7CiAgICAgICAgZm9yICh2YXIgbm9kZSA9IHNvdXJjZUZpYmVyLCBwYXJlbnQgPSBub2RlLnJldHVybjsgbnVsbCAhPT0gcGFyZW50OyApCiAgICAgICAgICBudWxsID09PSBub2RlLmFsdGVybmF0ZSAmJiAwICE9PSAobm9kZS5mbGFncyAmIDQwOTgpICYmIHdhcm5BYm91dFVwZGF0ZU9uTm90WWV0TW91bnRlZEZpYmVySW5ERVYoc291cmNlRmliZXIpLCBub2RlID0gcGFyZW50LCBwYXJlbnQgPSBub2RlLnJldHVybjsKICAgICAgICByZXR1cm4gMyA9PT0gbm9kZS50YWcgPyBub2RlLnN0YXRlTm9kZSA6IG51bGw7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmVzb2x2ZUZ1bmN0aW9uRm9ySG90UmVsb2FkaW5nKHR5cGUpIHsKICAgICAgICBpZiAobnVsbCA9PT0gcmVzb2x2ZUZhbWlseSkgcmV0dXJuIHR5cGU7CiAgICAgICAgdmFyIGZhbWlseSA9IHJlc29sdmVGYW1pbHkodHlwZSk7CiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gZmFtaWx5ID8gdHlwZSA6IGZhbWlseS5jdXJyZW50OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlc29sdmVGb3J3YXJkUmVmRm9ySG90UmVsb2FkaW5nKHR5cGUpIHsKICAgICAgICBpZiAobnVsbCA9PT0gcmVzb2x2ZUZhbWlseSkgcmV0dXJuIHR5cGU7CiAgICAgICAgdmFyIGZhbWlseSA9IHJlc29sdmVGYW1pbHkodHlwZSk7CiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gZmFtaWx5ID8gbnVsbCAhPT0gdHlwZSAmJiB2b2lkIDAgIT09IHR5cGUgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHR5cGUucmVuZGVyICYmIChmYW1pbHkgPSByZXNvbHZlRnVuY3Rpb25Gb3JIb3RSZWxvYWRpbmcodHlwZS5yZW5kZXIpLCB0eXBlLnJlbmRlciAhPT0gZmFtaWx5KSA/IChmYW1pbHkgPSB7ICQkdHlwZW9mOiBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFLCByZW5kZXI6IGZhbWlseSB9LCB2b2lkIDAgIT09IHR5cGUuZGlzcGxheU5hbWUgJiYgKGZhbWlseS5kaXNwbGF5TmFtZSA9IHR5cGUuZGlzcGxheU5hbWUpLCBmYW1pbHkpIDogdHlwZSA6IGZhbWlseS5jdXJyZW50OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGlzQ29tcGF0aWJsZUZhbWlseUZvckhvdFJlbG9hZGluZyhmaWJlciwgZWxlbWVudCkgewogICAgICAgIGlmIChudWxsID09PSByZXNvbHZlRmFtaWx5KSByZXR1cm4gZmFsc2U7CiAgICAgICAgdmFyIHByZXZUeXBlID0gZmliZXIuZWxlbWVudFR5cGU7CiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQudHlwZTsKICAgICAgICB2YXIgbmVlZHNDb21wYXJlRmFtaWxpZXMgPSBmYWxzZSwgJCR0eXBlb2ZOZXh0VHlwZSA9ICJvYmplY3QiID09PSB0eXBlb2YgZWxlbWVudCAmJiBudWxsICE9PSBlbGVtZW50ID8gZWxlbWVudC4kJHR5cGVvZiA6IG51bGw7CiAgICAgICAgc3dpdGNoIChmaWJlci50YWcpIHsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGVsZW1lbnQgJiYgKG5lZWRzQ29tcGFyZUZhbWlsaWVzID0gdHJ1ZSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgZWxlbWVudCA/IG5lZWRzQ29tcGFyZUZhbWlsaWVzID0gdHJ1ZSA6ICQkdHlwZW9mTmV4dFR5cGUgPT09IFJFQUNUX0xBWllfVFlQRSAmJiAobmVlZHNDb21wYXJlRmFtaWxpZXMgPSB0cnVlKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAkJHR5cGVvZk5leHRUeXBlID09PSBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFID8gbmVlZHNDb21wYXJlRmFtaWxpZXMgPSB0cnVlIDogJCR0eXBlb2ZOZXh0VHlwZSA9PT0gUkVBQ1RfTEFaWV9UWVBFICYmIChuZWVkc0NvbXBhcmVGYW1pbGllcyA9IHRydWUpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAkJHR5cGVvZk5leHRUeXBlID09PSBSRUFDVF9NRU1PX1RZUEUgPyBuZWVkc0NvbXBhcmVGYW1pbGllcyA9IHRydWUgOiAkJHR5cGVvZk5leHRUeXBlID09PSBSRUFDVF9MQVpZX1RZUEUgJiYgKG5lZWRzQ29tcGFyZUZhbWlsaWVzID0gdHJ1ZSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbmVlZHNDb21wYXJlRmFtaWxpZXMgJiYgKGZpYmVyID0gcmVzb2x2ZUZhbWlseShwcmV2VHlwZSksIHZvaWQgMCAhPT0gZmliZXIgJiYgZmliZXIgPT09IHJlc29sdmVGYW1pbHkoZWxlbWVudCkpID8gdHJ1ZSA6IGZhbHNlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1hcmtGYWlsZWRFcnJvckJvdW5kYXJ5Rm9ySG90UmVsb2FkaW5nKGZpYmVyKSB7CiAgICAgICAgbnVsbCAhPT0gcmVzb2x2ZUZhbWlseSAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgV2Vha1NldCAmJiAobnVsbCA9PT0gZmFpbGVkQm91bmRhcmllcyAmJiAoZmFpbGVkQm91bmRhcmllcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha1NldCgpKSwgZmFpbGVkQm91bmRhcmllcy5hZGQoZmliZXIpKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBzY2hlZHVsZUZpYmVyc1dpdGhGYW1pbGllc1JlY3Vyc2l2ZWx5KGZpYmVyLCB1cGRhdGVkRmFtaWxpZXMsIHN0YWxlRmFtaWxpZXMpIHsKICAgICAgICB2YXIgYWx0ZXJuYXRlID0gZmliZXIuYWx0ZXJuYXRlLCBjaGlsZCA9IGZpYmVyLmNoaWxkLCBzaWJsaW5nID0gZmliZXIuc2libGluZywgdGFnID0gZmliZXIudGFnLCB0eXBlID0gZmliZXIudHlwZSwgY2FuZGlkYXRlVHlwZSA9IG51bGw7CiAgICAgICAgc3dpdGNoICh0YWcpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhbmRpZGF0ZVR5cGUgPSB0eXBlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIGNhbmRpZGF0ZVR5cGUgPSB0eXBlLnJlbmRlcjsKICAgICAgICB9CiAgICAgICAgaWYgKG51bGwgPT09IHJlc29sdmVGYW1pbHkpCiAgICAgICAgICB0aHJvdyBFcnJvcigiRXhwZWN0ZWQgcmVzb2x2ZUZhbWlseSB0byBiZSBzZXQgZHVyaW5nIGhvdCByZWxvYWQuIik7CiAgICAgICAgdmFyIG5lZWRzUmVuZGVyID0gZmFsc2U7CiAgICAgICAgdHlwZSA9IGZhbHNlOwogICAgICAgIG51bGwgIT09IGNhbmRpZGF0ZVR5cGUgJiYgKGNhbmRpZGF0ZVR5cGUgPSByZXNvbHZlRmFtaWx5KGNhbmRpZGF0ZVR5cGUpLCB2b2lkIDAgIT09IGNhbmRpZGF0ZVR5cGUgJiYgKHN0YWxlRmFtaWxpZXMuaGFzKGNhbmRpZGF0ZVR5cGUpID8gdHlwZSA9IHRydWUgOiB1cGRhdGVkRmFtaWxpZXMuaGFzKGNhbmRpZGF0ZVR5cGUpICYmICgxID09PSB0YWcgPyB0eXBlID0gdHJ1ZSA6IG5lZWRzUmVuZGVyID0gdHJ1ZSkpKTsKICAgICAgICBudWxsICE9PSBmYWlsZWRCb3VuZGFyaWVzICYmIChmYWlsZWRCb3VuZGFyaWVzLmhhcyhmaWJlcikgfHwgbnVsbCAhPT0gYWx0ZXJuYXRlICYmIGZhaWxlZEJvdW5kYXJpZXMuaGFzKGFsdGVybmF0ZSkpICYmICh0eXBlID0gdHJ1ZSk7CiAgICAgICAgdHlwZSAmJiAoZmliZXIuX2RlYnVnTmVlZHNSZW1vdW50ID0gdHJ1ZSk7CiAgICAgICAgaWYgKHR5cGUgfHwgbmVlZHNSZW5kZXIpCiAgICAgICAgICBhbHRlcm5hdGUgPSBlbnF1ZXVlQ29uY3VycmVudFJlbmRlckZvckxhbmUoZmliZXIsIDIpLCBudWxsICE9PSBhbHRlcm5hdGUgJiYgc2NoZWR1bGVVcGRhdGVPbkZpYmVyKGFsdGVybmF0ZSwgZmliZXIsIDIpOwogICAgICAgIG51bGwgPT09IGNoaWxkIHx8IHR5cGUgfHwgc2NoZWR1bGVGaWJlcnNXaXRoRmFtaWxpZXNSZWN1cnNpdmVseSgKICAgICAgICAgIGNoaWxkLAogICAgICAgICAgdXBkYXRlZEZhbWlsaWVzLAogICAgICAgICAgc3RhbGVGYW1pbGllcwogICAgICAgICk7CiAgICAgICAgbnVsbCAhPT0gc2libGluZyAmJiBzY2hlZHVsZUZpYmVyc1dpdGhGYW1pbGllc1JlY3Vyc2l2ZWx5KAogICAgICAgICAgc2libGluZywKICAgICAgICAgIHVwZGF0ZWRGYW1pbGllcywKICAgICAgICAgIHN0YWxlRmFtaWxpZXMKICAgICAgICApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIEZpYmVyTm9kZSh0YWcsIHBlbmRpbmdQcm9wcywga2V5LCBtb2RlKSB7CiAgICAgICAgdGhpcy50YWcgPSB0YWc7CiAgICAgICAgdGhpcy5rZXkgPSBrZXk7CiAgICAgICAgdGhpcy5zaWJsaW5nID0gdGhpcy5jaGlsZCA9IHRoaXMucmV0dXJuID0gdGhpcy5zdGF0ZU5vZGUgPSB0aGlzLnR5cGUgPSB0aGlzLmVsZW1lbnRUeXBlID0gbnVsbDsKICAgICAgICB0aGlzLmluZGV4ID0gMDsKICAgICAgICB0aGlzLnJlZkNsZWFudXAgPSB0aGlzLnJlZiA9IG51bGw7CiAgICAgICAgdGhpcy5wZW5kaW5nUHJvcHMgPSBwZW5kaW5nUHJvcHM7CiAgICAgICAgdGhpcy5kZXBlbmRlbmNpZXMgPSB0aGlzLm1lbW9pemVkU3RhdGUgPSB0aGlzLnVwZGF0ZVF1ZXVlID0gdGhpcy5tZW1vaXplZFByb3BzID0gbnVsbDsKICAgICAgICB0aGlzLm1vZGUgPSBtb2RlOwogICAgICAgIHRoaXMuc3VidHJlZUZsYWdzID0gdGhpcy5mbGFncyA9IDA7CiAgICAgICAgdGhpcy5kZWxldGlvbnMgPSBudWxsOwogICAgICAgIHRoaXMuY2hpbGRMYW5lcyA9IHRoaXMubGFuZXMgPSAwOwogICAgICAgIHRoaXMuYWx0ZXJuYXRlID0gbnVsbDsKICAgICAgICB0aGlzLmFjdHVhbER1cmF0aW9uID0gLTA7CiAgICAgICAgdGhpcy5hY3R1YWxTdGFydFRpbWUgPSAtMS4xOwogICAgICAgIHRoaXMudHJlZUJhc2VEdXJhdGlvbiA9IHRoaXMuc2VsZkJhc2VEdXJhdGlvbiA9IC0wOwogICAgICAgIHRoaXMuX2RlYnVnVGFzayA9IHRoaXMuX2RlYnVnU3RhY2sgPSB0aGlzLl9kZWJ1Z093bmVyID0gdGhpcy5fZGVidWdJbmZvID0gbnVsbDsKICAgICAgICB0aGlzLl9kZWJ1Z05lZWRzUmVtb3VudCA9IGZhbHNlOwogICAgICAgIHRoaXMuX2RlYnVnSG9va1R5cGVzID0gbnVsbDsKICAgICAgICBoYXNCYWRNYXBQb2x5ZmlsbCB8fCAiZnVuY3Rpb24iICE9PSB0eXBlb2YgT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zIHx8IE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh0aGlzKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBzaG91bGRDb25zdHJ1Y3QoQ29tcG9uZW50KSB7CiAgICAgICAgQ29tcG9uZW50ID0gQ29tcG9uZW50LnByb3RvdHlwZTsKICAgICAgICByZXR1cm4gISghQ29tcG9uZW50IHx8ICFDb21wb25lbnQuaXNSZWFjdENvbXBvbmVudCk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY3JlYXRlV29ya0luUHJvZ3Jlc3MoY3VycmVudDIsIHBlbmRpbmdQcm9wcykgewogICAgICAgIHZhciB3b3JrSW5Qcm9ncmVzczIgPSBjdXJyZW50Mi5hbHRlcm5hdGU7CiAgICAgICAgbnVsbCA9PT0gd29ya0luUHJvZ3Jlc3MyID8gKHdvcmtJblByb2dyZXNzMiA9IGNyZWF0ZUZpYmVyKAogICAgICAgICAgY3VycmVudDIudGFnLAogICAgICAgICAgcGVuZGluZ1Byb3BzLAogICAgICAgICAgY3VycmVudDIua2V5LAogICAgICAgICAgY3VycmVudDIubW9kZQogICAgICAgICksIHdvcmtJblByb2dyZXNzMi5lbGVtZW50VHlwZSA9IGN1cnJlbnQyLmVsZW1lbnRUeXBlLCB3b3JrSW5Qcm9ncmVzczIudHlwZSA9IGN1cnJlbnQyLnR5cGUsIHdvcmtJblByb2dyZXNzMi5zdGF0ZU5vZGUgPSBjdXJyZW50Mi5zdGF0ZU5vZGUsIHdvcmtJblByb2dyZXNzMi5fZGVidWdPd25lciA9IGN1cnJlbnQyLl9kZWJ1Z093bmVyLCB3b3JrSW5Qcm9ncmVzczIuX2RlYnVnU3RhY2sgPSBjdXJyZW50Mi5fZGVidWdTdGFjaywgd29ya0luUHJvZ3Jlc3MyLl9kZWJ1Z1Rhc2sgPSBjdXJyZW50Mi5fZGVidWdUYXNrLCB3b3JrSW5Qcm9ncmVzczIuX2RlYnVnSG9va1R5cGVzID0gY3VycmVudDIuX2RlYnVnSG9va1R5cGVzLCB3b3JrSW5Qcm9ncmVzczIuYWx0ZXJuYXRlID0gY3VycmVudDIsIGN1cnJlbnQyLmFsdGVybmF0ZSA9IHdvcmtJblByb2dyZXNzMikgOiAod29ya0luUHJvZ3Jlc3MyLnBlbmRpbmdQcm9wcyA9IHBlbmRpbmdQcm9wcywgd29ya0luUHJvZ3Jlc3MyLnR5cGUgPSBjdXJyZW50Mi50eXBlLCB3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgPSAwLCB3b3JrSW5Qcm9ncmVzczIuc3VidHJlZUZsYWdzID0gMCwgd29ya0luUHJvZ3Jlc3MyLmRlbGV0aW9ucyA9IG51bGwsIHdvcmtJblByb2dyZXNzMi5hY3R1YWxEdXJhdGlvbiA9IC0wLCB3b3JrSW5Qcm9ncmVzczIuYWN0dWFsU3RhcnRUaW1lID0gLTEuMSk7CiAgICAgICAgd29ya0luUHJvZ3Jlc3MyLmZsYWdzID0gY3VycmVudDIuZmxhZ3MgJiA2NTAxMTcxMjsKICAgICAgICB3b3JrSW5Qcm9ncmVzczIuY2hpbGRMYW5lcyA9IGN1cnJlbnQyLmNoaWxkTGFuZXM7CiAgICAgICAgd29ya0luUHJvZ3Jlc3MyLmxhbmVzID0gY3VycmVudDIubGFuZXM7CiAgICAgICAgd29ya0luUHJvZ3Jlc3MyLmNoaWxkID0gY3VycmVudDIuY2hpbGQ7CiAgICAgICAgd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkUHJvcHMgPSBjdXJyZW50Mi5tZW1vaXplZFByb3BzOwogICAgICAgIHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlID0gY3VycmVudDIubWVtb2l6ZWRTdGF0ZTsKICAgICAgICB3b3JrSW5Qcm9ncmVzczIudXBkYXRlUXVldWUgPSBjdXJyZW50Mi51cGRhdGVRdWV1ZTsKICAgICAgICBwZW5kaW5nUHJvcHMgPSBjdXJyZW50Mi5kZXBlbmRlbmNpZXM7CiAgICAgICAgd29ya0luUHJvZ3Jlc3MyLmRlcGVuZGVuY2llcyA9IG51bGwgPT09IHBlbmRpbmdQcm9wcyA/IG51bGwgOiB7CiAgICAgICAgICBsYW5lczogcGVuZGluZ1Byb3BzLmxhbmVzLAogICAgICAgICAgZmlyc3RDb250ZXh0OiBwZW5kaW5nUHJvcHMuZmlyc3RDb250ZXh0LAogICAgICAgICAgX2RlYnVnVGhlbmFibGVTdGF0ZTogcGVuZGluZ1Byb3BzLl9kZWJ1Z1RoZW5hYmxlU3RhdGUKICAgICAgICB9OwogICAgICAgIHdvcmtJblByb2dyZXNzMi5zaWJsaW5nID0gY3VycmVudDIuc2libGluZzsKICAgICAgICB3b3JrSW5Qcm9ncmVzczIuaW5kZXggPSBjdXJyZW50Mi5pbmRleDsKICAgICAgICB3b3JrSW5Qcm9ncmVzczIucmVmID0gY3VycmVudDIucmVmOwogICAgICAgIHdvcmtJblByb2dyZXNzMi5yZWZDbGVhbnVwID0gY3VycmVudDIucmVmQ2xlYW51cDsKICAgICAgICB3b3JrSW5Qcm9ncmVzczIuc2VsZkJhc2VEdXJhdGlvbiA9IGN1cnJlbnQyLnNlbGZCYXNlRHVyYXRpb247CiAgICAgICAgd29ya0luUHJvZ3Jlc3MyLnRyZWVCYXNlRHVyYXRpb24gPSBjdXJyZW50Mi50cmVlQmFzZUR1cmF0aW9uOwogICAgICAgIHdvcmtJblByb2dyZXNzMi5fZGVidWdJbmZvID0gY3VycmVudDIuX2RlYnVnSW5mbzsKICAgICAgICB3b3JrSW5Qcm9ncmVzczIuX2RlYnVnTmVlZHNSZW1vdW50ID0gY3VycmVudDIuX2RlYnVnTmVlZHNSZW1vdW50OwogICAgICAgIHN3aXRjaCAod29ya0luUHJvZ3Jlc3MyLnRhZykgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLnR5cGUgPSByZXNvbHZlRnVuY3Rpb25Gb3JIb3RSZWxvYWRpbmcoY3VycmVudDIudHlwZSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIudHlwZSA9IHJlc29sdmVGdW5jdGlvbkZvckhvdFJlbG9hZGluZyhjdXJyZW50Mi50eXBlKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIudHlwZSA9IHJlc29sdmVGb3J3YXJkUmVmRm9ySG90UmVsb2FkaW5nKGN1cnJlbnQyLnR5cGUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gd29ya0luUHJvZ3Jlc3MyOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlc2V0V29ya0luUHJvZ3Jlc3Mod29ya0luUHJvZ3Jlc3MyLCByZW5kZXJMYW5lczIpIHsKICAgICAgICB3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgJj0gNjUwMTE3MTQ7CiAgICAgICAgdmFyIGN1cnJlbnQyID0gd29ya0luUHJvZ3Jlc3MyLmFsdGVybmF0ZTsKICAgICAgICBudWxsID09PSBjdXJyZW50MiA/ICh3b3JrSW5Qcm9ncmVzczIuY2hpbGRMYW5lcyA9IDAsIHdvcmtJblByb2dyZXNzMi5sYW5lcyA9IHJlbmRlckxhbmVzMiwgd29ya0luUHJvZ3Jlc3MyLmNoaWxkID0gbnVsbCwgd29ya0luUHJvZ3Jlc3MyLnN1YnRyZWVGbGFncyA9IDAsIHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFByb3BzID0gbnVsbCwgd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkU3RhdGUgPSBudWxsLCB3b3JrSW5Qcm9ncmVzczIudXBkYXRlUXVldWUgPSBudWxsLCB3b3JrSW5Qcm9ncmVzczIuZGVwZW5kZW5jaWVzID0gbnVsbCwgd29ya0luUHJvZ3Jlc3MyLnN0YXRlTm9kZSA9IG51bGwsIHdvcmtJblByb2dyZXNzMi5zZWxmQmFzZUR1cmF0aW9uID0gMCwgd29ya0luUHJvZ3Jlc3MyLnRyZWVCYXNlRHVyYXRpb24gPSAwKSA6ICh3b3JrSW5Qcm9ncmVzczIuY2hpbGRMYW5lcyA9IGN1cnJlbnQyLmNoaWxkTGFuZXMsIHdvcmtJblByb2dyZXNzMi5sYW5lcyA9IGN1cnJlbnQyLmxhbmVzLCB3b3JrSW5Qcm9ncmVzczIuY2hpbGQgPSBjdXJyZW50Mi5jaGlsZCwgd29ya0luUHJvZ3Jlc3MyLnN1YnRyZWVGbGFncyA9IDAsIHdvcmtJblByb2dyZXNzMi5kZWxldGlvbnMgPSBudWxsLCB3b3JrSW5Qcm9ncmVzczIubWVtb2l6ZWRQcm9wcyA9IGN1cnJlbnQyLm1lbW9pemVkUHJvcHMsIHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlID0gY3VycmVudDIubWVtb2l6ZWRTdGF0ZSwgd29ya0luUHJvZ3Jlc3MyLnVwZGF0ZVF1ZXVlID0gY3VycmVudDIudXBkYXRlUXVldWUsIHdvcmtJblByb2dyZXNzMi50eXBlID0gY3VycmVudDIudHlwZSwgcmVuZGVyTGFuZXMyID0gY3VycmVudDIuZGVwZW5kZW5jaWVzLCB3b3JrSW5Qcm9ncmVzczIuZGVwZW5kZW5jaWVzID0gbnVsbCA9PT0gcmVuZGVyTGFuZXMyID8gbnVsbCA6IHsKICAgICAgICAgIGxhbmVzOiByZW5kZXJMYW5lczIubGFuZXMsCiAgICAgICAgICBmaXJzdENvbnRleHQ6IHJlbmRlckxhbmVzMi5maXJzdENvbnRleHQsCiAgICAgICAgICBfZGVidWdUaGVuYWJsZVN0YXRlOiByZW5kZXJMYW5lczIuX2RlYnVnVGhlbmFibGVTdGF0ZQogICAgICAgIH0sIHdvcmtJblByb2dyZXNzMi5zZWxmQmFzZUR1cmF0aW9uID0gY3VycmVudDIuc2VsZkJhc2VEdXJhdGlvbiwgd29ya0luUHJvZ3Jlc3MyLnRyZWVCYXNlRHVyYXRpb24gPSBjdXJyZW50Mi50cmVlQmFzZUR1cmF0aW9uKTsKICAgICAgICByZXR1cm4gd29ya0luUHJvZ3Jlc3MyOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNyZWF0ZUZpYmVyRnJvbVR5cGVBbmRQcm9wcyh0eXBlLCBrZXksIHBlbmRpbmdQcm9wcywgb3duZXIsIG1vZGUsIGxhbmVzKSB7CiAgICAgICAgdmFyIGZpYmVyVGFnID0gMCwgcmVzb2x2ZWRUeXBlID0gdHlwZTsKICAgICAgICBpZiAoImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHR5cGUpCiAgICAgICAgICBzaG91bGRDb25zdHJ1Y3QodHlwZSkgJiYgKGZpYmVyVGFnID0gMSksIHJlc29sdmVkVHlwZSA9IHJlc29sdmVGdW5jdGlvbkZvckhvdFJlbG9hZGluZyhyZXNvbHZlZFR5cGUpOwogICAgICAgIGVsc2UgaWYgKCJzdHJpbmciID09PSB0eXBlb2YgdHlwZSkKICAgICAgICAgIGZpYmVyVGFnID0gZ2V0SG9zdENvbnRleHQoKSwgZmliZXJUYWcgPSBpc0hvc3RIb2lzdGFibGVUeXBlKHR5cGUsIHBlbmRpbmdQcm9wcywgZmliZXJUYWcpID8gMjYgOiAiaHRtbCIgPT09IHR5cGUgfHwgImhlYWQiID09PSB0eXBlIHx8ICJib2R5IiA9PT0gdHlwZSA/IDI3IDogNTsKICAgICAgICBlbHNlCiAgICAgICAgICBhOiBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgY2FzZSBSRUFDVF9BQ1RJVklUWV9UWVBFOgogICAgICAgICAgICAgIHJldHVybiBrZXkgPSBjcmVhdGVGaWJlcigzMSwgcGVuZGluZ1Byb3BzLCBrZXksIG1vZGUpLCBrZXkuZWxlbWVudFR5cGUgPSBSRUFDVF9BQ1RJVklUWV9UWVBFLCBrZXkubGFuZXMgPSBsYW5lcywga2V5OwogICAgICAgICAgICBjYXNlIFJFQUNUX0ZSQUdNRU5UX1RZUEU6CiAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUZpYmVyRnJvbUZyYWdtZW50KAogICAgICAgICAgICAgICAgcGVuZGluZ1Byb3BzLmNoaWxkcmVuLAogICAgICAgICAgICAgICAgbW9kZSwKICAgICAgICAgICAgICAgIGxhbmVzLAogICAgICAgICAgICAgICAga2V5CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgY2FzZSBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFOgogICAgICAgICAgICAgIGZpYmVyVGFnID0gODsKICAgICAgICAgICAgICBtb2RlIHw9IFN0cmljdExlZ2FjeU1vZGU7CiAgICAgICAgICAgICAgbW9kZSB8PSBTdHJpY3RFZmZlY3RzTW9kZTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBSRUFDVF9QUk9GSUxFUl9UWVBFOgogICAgICAgICAgICAgIHJldHVybiB0eXBlID0gcGVuZGluZ1Byb3BzLCBvd25lciA9IG1vZGUsICJzdHJpbmciICE9PSB0eXBlb2YgdHlwZS5pZCAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICAgJ1Byb2ZpbGVyIG11c3Qgc3BlY2lmeSBhbiAiaWQiIG9mIHR5cGUgYHN0cmluZ2AgYXMgYSBwcm9wLiBSZWNlaXZlZCB0aGUgdHlwZSBgJXNgIGluc3RlYWQuJywKICAgICAgICAgICAgICAgIHR5cGVvZiB0eXBlLmlkCiAgICAgICAgICAgICAgKSwga2V5ID0gY3JlYXRlRmliZXIoMTIsIHR5cGUsIGtleSwgb3duZXIgfCBQcm9maWxlTW9kZSksIGtleS5lbGVtZW50VHlwZSA9IFJFQUNUX1BST0ZJTEVSX1RZUEUsIGtleS5sYW5lcyA9IGxhbmVzLCBrZXkuc3RhdGVOb2RlID0geyBlZmZlY3REdXJhdGlvbjogMCwgcGFzc2l2ZUVmZmVjdER1cmF0aW9uOiAwIH0sIGtleTsKICAgICAgICAgICAgY2FzZSBSRUFDVF9TVVNQRU5TRV9UWVBFOgogICAgICAgICAgICAgIHJldHVybiBrZXkgPSBjcmVhdGVGaWJlcigxMywgcGVuZGluZ1Byb3BzLCBrZXksIG1vZGUpLCBrZXkuZWxlbWVudFR5cGUgPSBSRUFDVF9TVVNQRU5TRV9UWVBFLCBrZXkubGFuZXMgPSBsYW5lcywga2V5OwogICAgICAgICAgICBjYXNlIFJFQUNUX1NVU1BFTlNFX0xJU1RfVFlQRToKICAgICAgICAgICAgICByZXR1cm4ga2V5ID0gY3JlYXRlRmliZXIoMTksIHBlbmRpbmdQcm9wcywga2V5LCBtb2RlKSwga2V5LmVsZW1lbnRUeXBlID0gUkVBQ1RfU1VTUEVOU0VfTElTVF9UWVBFLCBrZXkubGFuZXMgPSBsYW5lcywga2V5OwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIGlmICgib2JqZWN0IiA9PT0gdHlwZW9mIHR5cGUgJiYgbnVsbCAhPT0gdHlwZSkKICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZS4kJHR5cGVvZikgewogICAgICAgICAgICAgICAgICBjYXNlIFJFQUNUX1BST1ZJREVSX1RZUEU6CiAgICAgICAgICAgICAgICAgIGNhc2UgUkVBQ1RfQ09OVEVYVF9UWVBFOgogICAgICAgICAgICAgICAgICAgIGZpYmVyVGFnID0gMTA7CiAgICAgICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICAgICAgY2FzZSBSRUFDVF9DT05TVU1FUl9UWVBFOgogICAgICAgICAgICAgICAgICAgIGZpYmVyVGFnID0gOTsKICAgICAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgICAgICBjYXNlIFJFQUNUX0ZPUldBUkRfUkVGX1RZUEU6CiAgICAgICAgICAgICAgICAgICAgZmliZXJUYWcgPSAxMTsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlZFR5cGUgPSByZXNvbHZlRm9yd2FyZFJlZkZvckhvdFJlbG9hZGluZyhyZXNvbHZlZFR5cGUpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrIGE7CiAgICAgICAgICAgICAgICAgIGNhc2UgUkVBQ1RfTUVNT19UWVBFOgogICAgICAgICAgICAgICAgICAgIGZpYmVyVGFnID0gMTQ7CiAgICAgICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICAgICAgY2FzZSBSRUFDVF9MQVpZX1RZUEU6CiAgICAgICAgICAgICAgICAgICAgZmliZXJUYWcgPSAxNjsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlZFR5cGUgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIGJyZWFrIGE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmVzb2x2ZWRUeXBlID0gIiI7CiAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gdHlwZSB8fCAib2JqZWN0IiA9PT0gdHlwZW9mIHR5cGUgJiYgbnVsbCAhPT0gdHlwZSAmJiAwID09PSBPYmplY3Qua2V5cyh0eXBlKS5sZW5ndGgpCiAgICAgICAgICAgICAgICByZXNvbHZlZFR5cGUgKz0gIiBZb3UgbGlrZWx5IGZvcmdvdCB0byBleHBvcnQgeW91ciBjb21wb25lbnQgZnJvbSB0aGUgZmlsZSBpdCdzIGRlZmluZWQgaW4sIG9yIHlvdSBtaWdodCBoYXZlIG1peGVkIHVwIGRlZmF1bHQgYW5kIG5hbWVkIGltcG9ydHMuIjsKICAgICAgICAgICAgICBudWxsID09PSB0eXBlID8gcGVuZGluZ1Byb3BzID0gIm51bGwiIDogaXNBcnJheUltcGwodHlwZSkgPyBwZW5kaW5nUHJvcHMgPSAiYXJyYXkiIDogdm9pZCAwICE9PSB0eXBlICYmIHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX0VMRU1FTlRfVFlQRSA/IChwZW5kaW5nUHJvcHMgPSAiPCIgKyAoZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUudHlwZSkgfHwgIlVua25vd24iKSArICIgLz4iLCByZXNvbHZlZFR5cGUgPSAiIERpZCB5b3UgYWNjaWRlbnRhbGx5IGV4cG9ydCBhIEpTWCBsaXRlcmFsIGluc3RlYWQgb2YgYSBjb21wb25lbnQ/IikgOiBwZW5kaW5nUHJvcHMgPSB0eXBlb2YgdHlwZTsKICAgICAgICAgICAgICAoZmliZXJUYWcgPSBvd25lciA/IGdldENvbXBvbmVudE5hbWVGcm9tT3duZXIob3duZXIpIDogbnVsbCkgJiYgKHJlc29sdmVkVHlwZSArPSAiXG5cbkNoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mIGAiICsgZmliZXJUYWcgKyAiYC4iKTsKICAgICAgICAgICAgICBmaWJlclRhZyA9IDI5OwogICAgICAgICAgICAgIHBlbmRpbmdQcm9wcyA9IEVycm9yKAogICAgICAgICAgICAgICAgIkVsZW1lbnQgdHlwZSBpcyBpbnZhbGlkOiBleHBlY3RlZCBhIHN0cmluZyAoZm9yIGJ1aWx0LWluIGNvbXBvbmVudHMpIG9yIGEgY2xhc3MvZnVuY3Rpb24gKGZvciBjb21wb3NpdGUgY29tcG9uZW50cykgYnV0IGdvdDogIiArIChwZW5kaW5nUHJvcHMgKyAiLiIgKyByZXNvbHZlZFR5cGUpCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICByZXNvbHZlZFR5cGUgPSBudWxsOwogICAgICAgICAgfQogICAgICAgIGtleSA9IGNyZWF0ZUZpYmVyKGZpYmVyVGFnLCBwZW5kaW5nUHJvcHMsIGtleSwgbW9kZSk7CiAgICAgICAga2V5LmVsZW1lbnRUeXBlID0gdHlwZTsKICAgICAgICBrZXkudHlwZSA9IHJlc29sdmVkVHlwZTsKICAgICAgICBrZXkubGFuZXMgPSBsYW5lczsKICAgICAgICBrZXkuX2RlYnVnT3duZXIgPSBvd25lcjsKICAgICAgICByZXR1cm4ga2V5OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNyZWF0ZUZpYmVyRnJvbUVsZW1lbnQoZWxlbWVudCwgbW9kZSwgbGFuZXMpIHsKICAgICAgICBtb2RlID0gY3JlYXRlRmliZXJGcm9tVHlwZUFuZFByb3BzKAogICAgICAgICAgZWxlbWVudC50eXBlLAogICAgICAgICAgZWxlbWVudC5rZXksCiAgICAgICAgICBlbGVtZW50LnByb3BzLAogICAgICAgICAgZWxlbWVudC5fb3duZXIsCiAgICAgICAgICBtb2RlLAogICAgICAgICAgbGFuZXMKICAgICAgICApOwogICAgICAgIG1vZGUuX2RlYnVnT3duZXIgPSBlbGVtZW50Ll9vd25lcjsKICAgICAgICBtb2RlLl9kZWJ1Z1N0YWNrID0gZWxlbWVudC5fZGVidWdTdGFjazsKICAgICAgICBtb2RlLl9kZWJ1Z1Rhc2sgPSBlbGVtZW50Ll9kZWJ1Z1Rhc2s7CiAgICAgICAgcmV0dXJuIG1vZGU7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY3JlYXRlRmliZXJGcm9tRnJhZ21lbnQoZWxlbWVudHMsIG1vZGUsIGxhbmVzLCBrZXkpIHsKICAgICAgICBlbGVtZW50cyA9IGNyZWF0ZUZpYmVyKDcsIGVsZW1lbnRzLCBrZXksIG1vZGUpOwogICAgICAgIGVsZW1lbnRzLmxhbmVzID0gbGFuZXM7CiAgICAgICAgcmV0dXJuIGVsZW1lbnRzOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNyZWF0ZUZpYmVyRnJvbVRleHQoY29udGVudCwgbW9kZSwgbGFuZXMpIHsKICAgICAgICBjb250ZW50ID0gY3JlYXRlRmliZXIoNiwgY29udGVudCwgbnVsbCwgbW9kZSk7CiAgICAgICAgY29udGVudC5sYW5lcyA9IGxhbmVzOwogICAgICAgIHJldHVybiBjb250ZW50OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNyZWF0ZUZpYmVyRnJvbVBvcnRhbChwb3J0YWwsIG1vZGUsIGxhbmVzKSB7CiAgICAgICAgbW9kZSA9IGNyZWF0ZUZpYmVyKAogICAgICAgICAgNCwKICAgICAgICAgIG51bGwgIT09IHBvcnRhbC5jaGlsZHJlbiA/IHBvcnRhbC5jaGlsZHJlbiA6IFtdLAogICAgICAgICAgcG9ydGFsLmtleSwKICAgICAgICAgIG1vZGUKICAgICAgICApOwogICAgICAgIG1vZGUubGFuZXMgPSBsYW5lczsKICAgICAgICBtb2RlLnN0YXRlTm9kZSA9IHsKICAgICAgICAgIGNvbnRhaW5lckluZm86IHBvcnRhbC5jb250YWluZXJJbmZvLAogICAgICAgICAgcGVuZGluZ0NoaWxkcmVuOiBudWxsLAogICAgICAgICAgaW1wbGVtZW50YXRpb246IHBvcnRhbC5pbXBsZW1lbnRhdGlvbgogICAgICAgIH07CiAgICAgICAgcmV0dXJuIG1vZGU7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcHVzaFRyZWVGb3JrKHdvcmtJblByb2dyZXNzMiwgdG90YWxDaGlsZHJlbikgewogICAgICAgIHdhcm5JZk5vdEh5ZHJhdGluZygpOwogICAgICAgIGZvcmtTdGFja1tmb3JrU3RhY2tJbmRleCsrXSA9IHRyZWVGb3JrQ291bnQ7CiAgICAgICAgZm9ya1N0YWNrW2ZvcmtTdGFja0luZGV4KytdID0gdHJlZUZvcmtQcm92aWRlcjsKICAgICAgICB0cmVlRm9ya1Byb3ZpZGVyID0gd29ya0luUHJvZ3Jlc3MyOwogICAgICAgIHRyZWVGb3JrQ291bnQgPSB0b3RhbENoaWxkcmVuOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHB1c2hUcmVlSWQod29ya0luUHJvZ3Jlc3MyLCB0b3RhbENoaWxkcmVuLCBpbmRleCkgewogICAgICAgIHdhcm5JZk5vdEh5ZHJhdGluZygpOwogICAgICAgIGlkU3RhY2tbaWRTdGFja0luZGV4KytdID0gdHJlZUNvbnRleHRJZDsKICAgICAgICBpZFN0YWNrW2lkU3RhY2tJbmRleCsrXSA9IHRyZWVDb250ZXh0T3ZlcmZsb3c7CiAgICAgICAgaWRTdGFja1tpZFN0YWNrSW5kZXgrK10gPSB0cmVlQ29udGV4dFByb3ZpZGVyOwogICAgICAgIHRyZWVDb250ZXh0UHJvdmlkZXIgPSB3b3JrSW5Qcm9ncmVzczI7CiAgICAgICAgdmFyIGJhc2VJZFdpdGhMZWFkaW5nQml0ID0gdHJlZUNvbnRleHRJZDsKICAgICAgICB3b3JrSW5Qcm9ncmVzczIgPSB0cmVlQ29udGV4dE92ZXJmbG93OwogICAgICAgIHZhciBiYXNlTGVuZ3RoID0gMzIgLSBjbHozMihiYXNlSWRXaXRoTGVhZGluZ0JpdCkgLSAxOwogICAgICAgIGJhc2VJZFdpdGhMZWFkaW5nQml0ICY9IH4oMSA8PCBiYXNlTGVuZ3RoKTsKICAgICAgICBpbmRleCArPSAxOwogICAgICAgIHZhciBsZW5ndGggPSAzMiAtIGNsejMyKHRvdGFsQ2hpbGRyZW4pICsgYmFzZUxlbmd0aDsKICAgICAgICBpZiAoMzAgPCBsZW5ndGgpIHsKICAgICAgICAgIHZhciBudW1iZXJPZk92ZXJmbG93Qml0cyA9IGJhc2VMZW5ndGggLSBiYXNlTGVuZ3RoICUgNTsKICAgICAgICAgIGxlbmd0aCA9IChiYXNlSWRXaXRoTGVhZGluZ0JpdCAmICgxIDw8IG51bWJlck9mT3ZlcmZsb3dCaXRzKSAtIDEpLnRvU3RyaW5nKDMyKTsKICAgICAgICAgIGJhc2VJZFdpdGhMZWFkaW5nQml0ID4+PSBudW1iZXJPZk92ZXJmbG93Qml0czsKICAgICAgICAgIGJhc2VMZW5ndGggLT0gbnVtYmVyT2ZPdmVyZmxvd0JpdHM7CiAgICAgICAgICB0cmVlQ29udGV4dElkID0gMSA8PCAzMiAtIGNsejMyKHRvdGFsQ2hpbGRyZW4pICsgYmFzZUxlbmd0aCB8IGluZGV4IDw8IGJhc2VMZW5ndGggfCBiYXNlSWRXaXRoTGVhZGluZ0JpdDsKICAgICAgICAgIHRyZWVDb250ZXh0T3ZlcmZsb3cgPSBsZW5ndGggKyB3b3JrSW5Qcm9ncmVzczI7CiAgICAgICAgfSBlbHNlCiAgICAgICAgICB0cmVlQ29udGV4dElkID0gMSA8PCBsZW5ndGggfCBpbmRleCA8PCBiYXNlTGVuZ3RoIHwgYmFzZUlkV2l0aExlYWRpbmdCaXQsIHRyZWVDb250ZXh0T3ZlcmZsb3cgPSB3b3JrSW5Qcm9ncmVzczI7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcHVzaE1hdGVyaWFsaXplZFRyZWVJZCh3b3JrSW5Qcm9ncmVzczIpIHsKICAgICAgICB3YXJuSWZOb3RIeWRyYXRpbmcoKTsKICAgICAgICBudWxsICE9PSB3b3JrSW5Qcm9ncmVzczIucmV0dXJuICYmIChwdXNoVHJlZUZvcmsod29ya0luUHJvZ3Jlc3MyLCAxKSwgcHVzaFRyZWVJZCh3b3JrSW5Qcm9ncmVzczIsIDEsIDApKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBwb3BUcmVlQ29udGV4dCh3b3JrSW5Qcm9ncmVzczIpIHsKICAgICAgICBmb3IgKDsgd29ya0luUHJvZ3Jlc3MyID09PSB0cmVlRm9ya1Byb3ZpZGVyOyApCiAgICAgICAgICB0cmVlRm9ya1Byb3ZpZGVyID0gZm9ya1N0YWNrWy0tZm9ya1N0YWNrSW5kZXhdLCBmb3JrU3RhY2tbZm9ya1N0YWNrSW5kZXhdID0gbnVsbCwgdHJlZUZvcmtDb3VudCA9IGZvcmtTdGFja1stLWZvcmtTdGFja0luZGV4XSwgZm9ya1N0YWNrW2ZvcmtTdGFja0luZGV4XSA9IG51bGw7CiAgICAgICAgZm9yICg7IHdvcmtJblByb2dyZXNzMiA9PT0gdHJlZUNvbnRleHRQcm92aWRlcjsgKQogICAgICAgICAgdHJlZUNvbnRleHRQcm92aWRlciA9IGlkU3RhY2tbLS1pZFN0YWNrSW5kZXhdLCBpZFN0YWNrW2lkU3RhY2tJbmRleF0gPSBudWxsLCB0cmVlQ29udGV4dE92ZXJmbG93ID0gaWRTdGFja1stLWlkU3RhY2tJbmRleF0sIGlkU3RhY2tbaWRTdGFja0luZGV4XSA9IG51bGwsIHRyZWVDb250ZXh0SWQgPSBpZFN0YWNrWy0taWRTdGFja0luZGV4XSwgaWRTdGFja1tpZFN0YWNrSW5kZXhdID0gbnVsbDsKICAgICAgfQogICAgICBmdW5jdGlvbiB3YXJuSWZOb3RIeWRyYXRpbmcoKSB7CiAgICAgICAgaXNIeWRyYXRpbmcgfHwgY29uc29sZS5lcnJvcigKICAgICAgICAgICJFeHBlY3RlZCB0byBiZSBoeWRyYXRpbmcuIFRoaXMgaXMgYSBidWcgaW4gUmVhY3QuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLiIKICAgICAgICApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGJ1aWxkSHlkcmF0aW9uRGlmZk5vZGUoZmliZXIsIGRpc3RhbmNlRnJvbUxlYWYpIHsKICAgICAgICBpZiAobnVsbCA9PT0gZmliZXIucmV0dXJuKSB7CiAgICAgICAgICBpZiAobnVsbCA9PT0gaHlkcmF0aW9uRGlmZlJvb3RERVYpCiAgICAgICAgICAgIGh5ZHJhdGlvbkRpZmZSb290REVWID0gewogICAgICAgICAgICAgIGZpYmVyLAogICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSwKICAgICAgICAgICAgICBzZXJ2ZXJQcm9wczogdm9pZCAwLAogICAgICAgICAgICAgIHNlcnZlclRhaWw6IFtdLAogICAgICAgICAgICAgIGRpc3RhbmNlRnJvbUxlYWYKICAgICAgICAgICAgfTsKICAgICAgICAgIGVsc2UgewogICAgICAgICAgICBpZiAoaHlkcmF0aW9uRGlmZlJvb3RERVYuZmliZXIgIT09IGZpYmVyKQogICAgICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAgICAgIlNhdyBtdWx0aXBsZSBoeWRyYXRpb24gZGlmZiByb290cyBpbiBhIHBhc3MuIFRoaXMgaXMgYSBidWcgaW4gUmVhY3QuIgogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIGh5ZHJhdGlvbkRpZmZSb290REVWLmRpc3RhbmNlRnJvbUxlYWYgPiBkaXN0YW5jZUZyb21MZWFmICYmIChoeWRyYXRpb25EaWZmUm9vdERFVi5kaXN0YW5jZUZyb21MZWFmID0gZGlzdGFuY2VGcm9tTGVhZik7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gaHlkcmF0aW9uRGlmZlJvb3RERVY7CiAgICAgICAgfQogICAgICAgIHZhciBzaWJsaW5ncyA9IGJ1aWxkSHlkcmF0aW9uRGlmZk5vZGUoCiAgICAgICAgICBmaWJlci5yZXR1cm4sCiAgICAgICAgICBkaXN0YW5jZUZyb21MZWFmICsgMQogICAgICAgICkuY2hpbGRyZW47CiAgICAgICAgaWYgKDAgPCBzaWJsaW5ncy5sZW5ndGggJiYgc2libGluZ3Nbc2libGluZ3MubGVuZ3RoIC0gMV0uZmliZXIgPT09IGZpYmVyKQogICAgICAgICAgcmV0dXJuIHNpYmxpbmdzID0gc2libGluZ3Nbc2libGluZ3MubGVuZ3RoIC0gMV0sIHNpYmxpbmdzLmRpc3RhbmNlRnJvbUxlYWYgPiBkaXN0YW5jZUZyb21MZWFmICYmIChzaWJsaW5ncy5kaXN0YW5jZUZyb21MZWFmID0gZGlzdGFuY2VGcm9tTGVhZiksIHNpYmxpbmdzOwogICAgICAgIGRpc3RhbmNlRnJvbUxlYWYgPSB7CiAgICAgICAgICBmaWJlciwKICAgICAgICAgIGNoaWxkcmVuOiBbXSwKICAgICAgICAgIHNlcnZlclByb3BzOiB2b2lkIDAsCiAgICAgICAgICBzZXJ2ZXJUYWlsOiBbXSwKICAgICAgICAgIGRpc3RhbmNlRnJvbUxlYWYKICAgICAgICB9OwogICAgICAgIHNpYmxpbmdzLnB1c2goZGlzdGFuY2VGcm9tTGVhZik7CiAgICAgICAgcmV0dXJuIGRpc3RhbmNlRnJvbUxlYWY7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gd2Fybk5vbkh5ZHJhdGVkSW5zdGFuY2UoZmliZXIsIHJlamVjdGVkQ2FuZGlkYXRlKSB7CiAgICAgICAgZGlkU3VzcGVuZE9yRXJyb3JERVYgfHwgKGZpYmVyID0gYnVpbGRIeWRyYXRpb25EaWZmTm9kZShmaWJlciwgMCksIGZpYmVyLnNlcnZlclByb3BzID0gbnVsbCwgbnVsbCAhPT0gcmVqZWN0ZWRDYW5kaWRhdGUgJiYgKHJlamVjdGVkQ2FuZGlkYXRlID0gZGVzY3JpYmVIeWRyYXRhYmxlSW5zdGFuY2VGb3JEZXZXYXJuaW5ncyhyZWplY3RlZENhbmRpZGF0ZSksIGZpYmVyLnNlcnZlclRhaWwucHVzaChyZWplY3RlZENhbmRpZGF0ZSkpKTsKICAgICAgfQogICAgICBmdW5jdGlvbiB0aHJvd09uSHlkcmF0aW9uTWlzbWF0Y2goZmliZXIpIHsKICAgICAgICB2YXIgZGlmZiA9ICIiLCBkaWZmUm9vdCA9IGh5ZHJhdGlvbkRpZmZSb290REVWOwogICAgICAgIG51bGwgIT09IGRpZmZSb290ICYmIChoeWRyYXRpb25EaWZmUm9vdERFViA9IG51bGwsIGRpZmYgPSBkZXNjcmliZURpZmYoZGlmZlJvb3QpKTsKICAgICAgICBxdWV1ZUh5ZHJhdGlvbkVycm9yKAogICAgICAgICAgY3JlYXRlQ2FwdHVyZWRWYWx1ZUF0RmliZXIoCiAgICAgICAgICAgIEVycm9yKAogICAgICAgICAgICAgICJIeWRyYXRpb24gZmFpbGVkIGJlY2F1c2UgdGhlIHNlcnZlciByZW5kZXJlZCBIVE1MIGRpZG4ndCBtYXRjaCB0aGUgY2xpZW50LiBBcyBhIHJlc3VsdCB0aGlzIHRyZWUgd2lsbCBiZSByZWdlbmVyYXRlZCBvbiB0aGUgY2xpZW50LiBUaGlzIGNhbiBoYXBwZW4gaWYgYSBTU1ItZWQgQ2xpZW50IENvbXBvbmVudCB1c2VkOlxuXG4tIEEgc2VydmVyL2NsaWVudCBicmFuY2ggYGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJylgLlxuLSBWYXJpYWJsZSBpbnB1dCBzdWNoIGFzIGBEYXRlLm5vdygpYCBvciBgTWF0aC5yYW5kb20oKWAgd2hpY2ggY2hhbmdlcyBlYWNoIHRpbWUgaXQncyBjYWxsZWQuXG4tIERhdGUgZm9ybWF0dGluZyBpbiBhIHVzZXIncyBsb2NhbGUgd2hpY2ggZG9lc24ndCBtYXRjaCB0aGUgc2VydmVyLlxuLSBFeHRlcm5hbCBjaGFuZ2luZyBkYXRhIHdpdGhvdXQgc2VuZGluZyBhIHNuYXBzaG90IG9mIGl0IGFsb25nIHdpdGggdGhlIEhUTUwuXG4tIEludmFsaWQgSFRNTCB0YWcgbmVzdGluZy5cblxuSXQgY2FuIGFsc28gaGFwcGVuIGlmIHRoZSBjbGllbnQgaGFzIGEgYnJvd3NlciBleHRlbnNpb24gaW5zdGFsbGVkIHdoaWNoIG1lc3NlcyB3aXRoIHRoZSBIVE1MIGJlZm9yZSBSZWFjdCBsb2FkZWQuXG5cbmh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvaHlkcmF0aW9uLW1pc21hdGNoIiArIGRpZmYKICAgICAgICAgICAgKSwKICAgICAgICAgICAgZmliZXIKICAgICAgICAgICkKICAgICAgICApOwogICAgICAgIHRocm93IEh5ZHJhdGlvbk1pc21hdGNoRXhjZXB0aW9uOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHByZXBhcmVUb0h5ZHJhdGVIb3N0SW5zdGFuY2UoZmliZXIpIHsKICAgICAgICB2YXIgZGlkSHlkcmF0ZSA9IGZpYmVyLnN0YXRlTm9kZTsKICAgICAgICB2YXIgdHlwZSA9IGZpYmVyLnR5cGUsIHByb3BzID0gZmliZXIubWVtb2l6ZWRQcm9wczsKICAgICAgICBkaWRIeWRyYXRlW2ludGVybmFsSW5zdGFuY2VLZXldID0gZmliZXI7CiAgICAgICAgZGlkSHlkcmF0ZVtpbnRlcm5hbFByb3BzS2V5XSA9IHByb3BzOwogICAgICAgIHZhbGlkYXRlUHJvcGVydGllc0luRGV2ZWxvcG1lbnQodHlwZSwgcHJvcHMpOwogICAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgY2FzZSAiZGlhbG9nIjoKICAgICAgICAgICAgbGlzdGVuVG9Ob25EZWxlZ2F0ZWRFdmVudCgiY2FuY2VsIiwgZGlkSHlkcmF0ZSk7CiAgICAgICAgICAgIGxpc3RlblRvTm9uRGVsZWdhdGVkRXZlbnQoImNsb3NlIiwgZGlkSHlkcmF0ZSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiaWZyYW1lIjoKICAgICAgICAgIGNhc2UgIm9iamVjdCI6CiAgICAgICAgICBjYXNlICJlbWJlZCI6CiAgICAgICAgICAgIGxpc3RlblRvTm9uRGVsZWdhdGVkRXZlbnQoImxvYWQiLCBkaWRIeWRyYXRlKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJ2aWRlbyI6CiAgICAgICAgICBjYXNlICJhdWRpbyI6CiAgICAgICAgICAgIGZvciAodHlwZSA9IDA7IHR5cGUgPCBtZWRpYUV2ZW50VHlwZXMubGVuZ3RoOyB0eXBlKyspCiAgICAgICAgICAgICAgbGlzdGVuVG9Ob25EZWxlZ2F0ZWRFdmVudChtZWRpYUV2ZW50VHlwZXNbdHlwZV0sIGRpZEh5ZHJhdGUpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgInNvdXJjZSI6CiAgICAgICAgICAgIGxpc3RlblRvTm9uRGVsZWdhdGVkRXZlbnQoImVycm9yIiwgZGlkSHlkcmF0ZSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiaW1nIjoKICAgICAgICAgIGNhc2UgImltYWdlIjoKICAgICAgICAgIGNhc2UgImxpbmsiOgogICAgICAgICAgICBsaXN0ZW5Ub05vbkRlbGVnYXRlZEV2ZW50KCJlcnJvciIsIGRpZEh5ZHJhdGUpOwogICAgICAgICAgICBsaXN0ZW5Ub05vbkRlbGVnYXRlZEV2ZW50KCJsb2FkIiwgZGlkSHlkcmF0ZSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiZGV0YWlscyI6CiAgICAgICAgICAgIGxpc3RlblRvTm9uRGVsZWdhdGVkRXZlbnQoInRvZ2dsZSIsIGRpZEh5ZHJhdGUpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImlucHV0IjoKICAgICAgICAgICAgY2hlY2tDb250cm9sbGVkVmFsdWVQcm9wcygiaW5wdXQiLCBwcm9wcyk7CiAgICAgICAgICAgIGxpc3RlblRvTm9uRGVsZWdhdGVkRXZlbnQoImludmFsaWQiLCBkaWRIeWRyYXRlKTsKICAgICAgICAgICAgdmFsaWRhdGVJbnB1dFByb3BzKGRpZEh5ZHJhdGUsIHByb3BzKTsKICAgICAgICAgICAgaW5pdElucHV0KAogICAgICAgICAgICAgIGRpZEh5ZHJhdGUsCiAgICAgICAgICAgICAgcHJvcHMudmFsdWUsCiAgICAgICAgICAgICAgcHJvcHMuZGVmYXVsdFZhbHVlLAogICAgICAgICAgICAgIHByb3BzLmNoZWNrZWQsCiAgICAgICAgICAgICAgcHJvcHMuZGVmYXVsdENoZWNrZWQsCiAgICAgICAgICAgICAgcHJvcHMudHlwZSwKICAgICAgICAgICAgICBwcm9wcy5uYW1lLAogICAgICAgICAgICAgIHRydWUKICAgICAgICAgICAgKTsKICAgICAgICAgICAgdHJhY2soZGlkSHlkcmF0ZSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAib3B0aW9uIjoKICAgICAgICAgICAgdmFsaWRhdGVPcHRpb25Qcm9wcyhkaWRIeWRyYXRlLCBwcm9wcyk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAic2VsZWN0IjoKICAgICAgICAgICAgY2hlY2tDb250cm9sbGVkVmFsdWVQcm9wcygic2VsZWN0IiwgcHJvcHMpOwogICAgICAgICAgICBsaXN0ZW5Ub05vbkRlbGVnYXRlZEV2ZW50KCJpbnZhbGlkIiwgZGlkSHlkcmF0ZSk7CiAgICAgICAgICAgIHZhbGlkYXRlU2VsZWN0UHJvcHMoZGlkSHlkcmF0ZSwgcHJvcHMpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgInRleHRhcmVhIjoKICAgICAgICAgICAgY2hlY2tDb250cm9sbGVkVmFsdWVQcm9wcygidGV4dGFyZWEiLCBwcm9wcyksIGxpc3RlblRvTm9uRGVsZWdhdGVkRXZlbnQoImludmFsaWQiLCBkaWRIeWRyYXRlKSwgdmFsaWRhdGVUZXh0YXJlYVByb3BzKGRpZEh5ZHJhdGUsIHByb3BzKSwgaW5pdFRleHRhcmVhKAogICAgICAgICAgICAgIGRpZEh5ZHJhdGUsCiAgICAgICAgICAgICAgcHJvcHMudmFsdWUsCiAgICAgICAgICAgICAgcHJvcHMuZGVmYXVsdFZhbHVlLAogICAgICAgICAgICAgIHByb3BzLmNoaWxkcmVuCiAgICAgICAgICAgICksIHRyYWNrKGRpZEh5ZHJhdGUpOwogICAgICAgIH0KICAgICAgICB0eXBlID0gcHJvcHMuY2hpbGRyZW47CiAgICAgICAgInN0cmluZyIgIT09IHR5cGVvZiB0eXBlICYmICJudW1iZXIiICE9PSB0eXBlb2YgdHlwZSAmJiAiYmlnaW50IiAhPT0gdHlwZW9mIHR5cGUgfHwgZGlkSHlkcmF0ZS50ZXh0Q29udGVudCA9PT0gIiIgKyB0eXBlIHx8IHRydWUgPT09IHByb3BzLnN1cHByZXNzSHlkcmF0aW9uV2FybmluZyB8fCBjaGVja0ZvclVubWF0Y2hlZFRleHQoZGlkSHlkcmF0ZS50ZXh0Q29udGVudCwgdHlwZSkgPyAobnVsbCAhPSBwcm9wcy5wb3BvdmVyICYmIChsaXN0ZW5Ub05vbkRlbGVnYXRlZEV2ZW50KCJiZWZvcmV0b2dnbGUiLCBkaWRIeWRyYXRlKSwgbGlzdGVuVG9Ob25EZWxlZ2F0ZWRFdmVudCgidG9nZ2xlIiwgZGlkSHlkcmF0ZSkpLCBudWxsICE9IHByb3BzLm9uU2Nyb2xsICYmIGxpc3RlblRvTm9uRGVsZWdhdGVkRXZlbnQoInNjcm9sbCIsIGRpZEh5ZHJhdGUpLCBudWxsICE9IHByb3BzLm9uU2Nyb2xsRW5kICYmIGxpc3RlblRvTm9uRGVsZWdhdGVkRXZlbnQoInNjcm9sbGVuZCIsIGRpZEh5ZHJhdGUpLCBudWxsICE9IHByb3BzLm9uQ2xpY2sgJiYgKGRpZEh5ZHJhdGUub25jbGljayA9IG5vb3AkMSksIGRpZEh5ZHJhdGUgPSB0cnVlKSA6IGRpZEh5ZHJhdGUgPSBmYWxzZTsKICAgICAgICBkaWRIeWRyYXRlIHx8IHRocm93T25IeWRyYXRpb25NaXNtYXRjaChmaWJlcik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcG9wVG9OZXh0SG9zdFBhcmVudChmaWJlcikgewogICAgICAgIGZvciAoaHlkcmF0aW9uUGFyZW50RmliZXIgPSBmaWJlci5yZXR1cm47IGh5ZHJhdGlvblBhcmVudEZpYmVyOyApCiAgICAgICAgICBzd2l0Y2ggKGh5ZHJhdGlvblBhcmVudEZpYmVyLnRhZykgewogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgcm9vdE9yU2luZ2xldG9uQ29udGV4dCA9IGZhbHNlOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJvb3RPclNpbmdsZXRvbkNvbnRleHQgPSB0cnVlOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICBoeWRyYXRpb25QYXJlbnRGaWJlciA9IGh5ZHJhdGlvblBhcmVudEZpYmVyLnJldHVybjsKICAgICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBwb3BIeWRyYXRpb25TdGF0ZShmaWJlcikgewogICAgICAgIGlmIChmaWJlciAhPT0gaHlkcmF0aW9uUGFyZW50RmliZXIpIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAoIWlzSHlkcmF0aW5nKQogICAgICAgICAgcmV0dXJuIHBvcFRvTmV4dEhvc3RQYXJlbnQoZmliZXIpLCBpc0h5ZHJhdGluZyA9IHRydWUsIGZhbHNlOwogICAgICAgIHZhciB0YWcgPSBmaWJlci50YWcsIEpTQ29tcGlsZXJfdGVtcDsKICAgICAgICBpZiAoSlNDb21waWxlcl90ZW1wID0gMyAhPT0gdGFnICYmIDI3ICE9PSB0YWcpIHsKICAgICAgICAgIGlmIChKU0NvbXBpbGVyX3RlbXAgPSA1ID09PSB0YWcpCiAgICAgICAgICAgIEpTQ29tcGlsZXJfdGVtcCA9IGZpYmVyLnR5cGUsIEpTQ29tcGlsZXJfdGVtcCA9ICEoImZvcm0iICE9PSBKU0NvbXBpbGVyX3RlbXAgJiYgImJ1dHRvbiIgIT09IEpTQ29tcGlsZXJfdGVtcCkgfHwgc2hvdWxkU2V0VGV4dENvbnRlbnQoZmliZXIudHlwZSwgZmliZXIubWVtb2l6ZWRQcm9wcyk7CiAgICAgICAgICBKU0NvbXBpbGVyX3RlbXAgPSAhSlNDb21waWxlcl90ZW1wOwogICAgICAgIH0KICAgICAgICBpZiAoSlNDb21waWxlcl90ZW1wICYmIG5leHRIeWRyYXRhYmxlSW5zdGFuY2UpIHsKICAgICAgICAgIGZvciAoSlNDb21waWxlcl90ZW1wID0gbmV4dEh5ZHJhdGFibGVJbnN0YW5jZTsgSlNDb21waWxlcl90ZW1wOyApIHsKICAgICAgICAgICAgdmFyIGRpZmZOb2RlID0gYnVpbGRIeWRyYXRpb25EaWZmTm9kZShmaWJlciwgMCksIGRlc2NyaXB0aW9uID0gZGVzY3JpYmVIeWRyYXRhYmxlSW5zdGFuY2VGb3JEZXZXYXJuaW5ncyhKU0NvbXBpbGVyX3RlbXApOwogICAgICAgICAgICBkaWZmTm9kZS5zZXJ2ZXJUYWlsLnB1c2goZGVzY3JpcHRpb24pOwogICAgICAgICAgICBKU0NvbXBpbGVyX3RlbXAgPSAiU3VzcGVuc2UiID09PSBkZXNjcmlwdGlvbi50eXBlID8gZ2V0TmV4dEh5ZHJhdGFibGVJbnN0YW5jZUFmdGVyU3VzcGVuc2VJbnN0YW5jZShKU0NvbXBpbGVyX3RlbXApIDogZ2V0TmV4dEh5ZHJhdGFibGUoSlNDb21waWxlcl90ZW1wLm5leHRTaWJsaW5nKTsKICAgICAgICAgIH0KICAgICAgICAgIHRocm93T25IeWRyYXRpb25NaXNtYXRjaChmaWJlcik7CiAgICAgICAgfQogICAgICAgIHBvcFRvTmV4dEhvc3RQYXJlbnQoZmliZXIpOwogICAgICAgIGlmICgxMyA9PT0gdGFnKSB7CiAgICAgICAgICBmaWJlciA9IGZpYmVyLm1lbW9pemVkU3RhdGU7CiAgICAgICAgICBmaWJlciA9IG51bGwgIT09IGZpYmVyID8gZmliZXIuZGVoeWRyYXRlZCA6IG51bGw7CiAgICAgICAgICBpZiAoIWZpYmVyKQogICAgICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICAgICAiRXhwZWN0ZWQgdG8gaGF2ZSBhIGh5ZHJhdGVkIHN1c3BlbnNlIGluc3RhbmNlLiBUaGlzIGVycm9yIGlzIGxpa2VseSBjYXVzZWQgYnkgYSBidWcgaW4gUmVhY3QuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLiIKICAgICAgICAgICAgKTsKICAgICAgICAgIG5leHRIeWRyYXRhYmxlSW5zdGFuY2UgPSBnZXROZXh0SHlkcmF0YWJsZUluc3RhbmNlQWZ0ZXJTdXNwZW5zZUluc3RhbmNlKGZpYmVyKTsKICAgICAgICB9IGVsc2UKICAgICAgICAgIDI3ID09PSB0YWcgPyAodGFnID0gbmV4dEh5ZHJhdGFibGVJbnN0YW5jZSwgaXNTaW5nbGV0b25TY29wZShmaWJlci50eXBlKSA/IChmaWJlciA9IHByZXZpb3VzSHlkcmF0YWJsZU9uRW50ZXJpbmdTY29wZWRTaW5nbGV0b24sIHByZXZpb3VzSHlkcmF0YWJsZU9uRW50ZXJpbmdTY29wZWRTaW5nbGV0b24gPSBudWxsLCBuZXh0SHlkcmF0YWJsZUluc3RhbmNlID0gZmliZXIpIDogbmV4dEh5ZHJhdGFibGVJbnN0YW5jZSA9IHRhZykgOiBuZXh0SHlkcmF0YWJsZUluc3RhbmNlID0gaHlkcmF0aW9uUGFyZW50RmliZXIgPyBnZXROZXh0SHlkcmF0YWJsZShmaWJlci5zdGF0ZU5vZGUubmV4dFNpYmxpbmcpIDogbnVsbDsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICBmdW5jdGlvbiByZXNldEh5ZHJhdGlvblN0YXRlKCkgewogICAgICAgIG5leHRIeWRyYXRhYmxlSW5zdGFuY2UgPSBoeWRyYXRpb25QYXJlbnRGaWJlciA9IG51bGw7CiAgICAgICAgZGlkU3VzcGVuZE9yRXJyb3JERVYgPSBpc0h5ZHJhdGluZyA9IGZhbHNlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHVwZ3JhZGVIeWRyYXRpb25FcnJvcnNUb1JlY292ZXJhYmxlKCkgewogICAgICAgIHZhciBxdWV1ZWRFcnJvcnMgPSBoeWRyYXRpb25FcnJvcnM7CiAgICAgICAgbnVsbCAhPT0gcXVldWVkRXJyb3JzICYmIChudWxsID09PSB3b3JrSW5Qcm9ncmVzc1Jvb3RSZWNvdmVyYWJsZUVycm9ycyA/IHdvcmtJblByb2dyZXNzUm9vdFJlY292ZXJhYmxlRXJyb3JzID0gcXVldWVkRXJyb3JzIDogd29ya0luUHJvZ3Jlc3NSb290UmVjb3ZlcmFibGVFcnJvcnMucHVzaC5hcHBseSgKICAgICAgICAgIHdvcmtJblByb2dyZXNzUm9vdFJlY292ZXJhYmxlRXJyb3JzLAogICAgICAgICAgcXVldWVkRXJyb3JzCiAgICAgICAgKSwgaHlkcmF0aW9uRXJyb3JzID0gbnVsbCk7CiAgICAgICAgcmV0dXJuIHF1ZXVlZEVycm9yczsKICAgICAgfQogICAgICBmdW5jdGlvbiBxdWV1ZUh5ZHJhdGlvbkVycm9yKGVycm9yKSB7CiAgICAgICAgbnVsbCA9PT0gaHlkcmF0aW9uRXJyb3JzID8gaHlkcmF0aW9uRXJyb3JzID0gW2Vycm9yXSA6IGh5ZHJhdGlvbkVycm9ycy5wdXNoKGVycm9yKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBlbWl0UGVuZGluZ0h5ZHJhdGlvbldhcm5pbmdzKCkgewogICAgICAgIHZhciBkaWZmUm9vdCA9IGh5ZHJhdGlvbkRpZmZSb290REVWOwogICAgICAgIGlmIChudWxsICE9PSBkaWZmUm9vdCkgewogICAgICAgICAgaHlkcmF0aW9uRGlmZlJvb3RERVYgPSBudWxsOwogICAgICAgICAgZm9yICh2YXIgZGlmZiA9IGRlc2NyaWJlRGlmZihkaWZmUm9vdCk7IDAgPCBkaWZmUm9vdC5jaGlsZHJlbi5sZW5ndGg7ICkKICAgICAgICAgICAgZGlmZlJvb3QgPSBkaWZmUm9vdC5jaGlsZHJlblswXTsKICAgICAgICAgIHJ1bldpdGhGaWJlckluREVWKGRpZmZSb290LmZpYmVyLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAiQSB0cmVlIGh5ZHJhdGVkIGJ1dCBzb21lIGF0dHJpYnV0ZXMgb2YgdGhlIHNlcnZlciByZW5kZXJlZCBIVE1MIGRpZG4ndCBtYXRjaCB0aGUgY2xpZW50IHByb3BlcnRpZXMuIFRoaXMgd29uJ3QgYmUgcGF0Y2hlZCB1cC4gVGhpcyBjYW4gaGFwcGVuIGlmIGEgU1NSLWVkIENsaWVudCBDb21wb25lbnQgdXNlZDpcblxuLSBBIHNlcnZlci9jbGllbnQgYnJhbmNoIGBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpYC5cbi0gVmFyaWFibGUgaW5wdXQgc3VjaCBhcyBgRGF0ZS5ub3coKWAgb3IgYE1hdGgucmFuZG9tKClgIHdoaWNoIGNoYW5nZXMgZWFjaCB0aW1lIGl0J3MgY2FsbGVkLlxuLSBEYXRlIGZvcm1hdHRpbmcgaW4gYSB1c2VyJ3MgbG9jYWxlIHdoaWNoIGRvZXNuJ3QgbWF0Y2ggdGhlIHNlcnZlci5cbi0gRXh0ZXJuYWwgY2hhbmdpbmcgZGF0YSB3aXRob3V0IHNlbmRpbmcgYSBzbmFwc2hvdCBvZiBpdCBhbG9uZyB3aXRoIHRoZSBIVE1MLlxuLSBJbnZhbGlkIEhUTUwgdGFnIG5lc3RpbmcuXG5cbkl0IGNhbiBhbHNvIGhhcHBlbiBpZiB0aGUgY2xpZW50IGhhcyBhIGJyb3dzZXIgZXh0ZW5zaW9uIGluc3RhbGxlZCB3aGljaCBtZXNzZXMgd2l0aCB0aGUgSFRNTCBiZWZvcmUgUmVhY3QgbG9hZGVkLlxuXG4lcyVzIiwKICAgICAgICAgICAgICAiaHR0cHM6Ly9yZWFjdC5kZXYvbGluay9oeWRyYXRpb24tbWlzbWF0Y2giLAogICAgICAgICAgICAgIGRpZmYKICAgICAgICAgICAgKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiByZXNldENvbnRleHREZXBlbmRlbmNpZXMoKSB7CiAgICAgICAgbGFzdENvbnRleHREZXBlbmRlbmN5ID0gY3VycmVudGx5UmVuZGVyaW5nRmliZXIkMSA9IG51bGw7CiAgICAgICAgaXNEaXNhbGxvd2VkQ29udGV4dFJlYWRJbkRFViA9IGZhbHNlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHB1c2hQcm92aWRlcihwcm92aWRlckZpYmVyLCBjb250ZXh0LCBuZXh0VmFsdWUpIHsKICAgICAgICBwdXNoKHZhbHVlQ3Vyc29yLCBjb250ZXh0Ll9jdXJyZW50VmFsdWUsIHByb3ZpZGVyRmliZXIpOwogICAgICAgIGNvbnRleHQuX2N1cnJlbnRWYWx1ZSA9IG5leHRWYWx1ZTsKICAgICAgICBwdXNoKHJlbmRlcmVyQ3Vyc29yREVWLCBjb250ZXh0Ll9jdXJyZW50UmVuZGVyZXIsIHByb3ZpZGVyRmliZXIpOwogICAgICAgIHZvaWQgMCAhPT0gY29udGV4dC5fY3VycmVudFJlbmRlcmVyICYmIG51bGwgIT09IGNvbnRleHQuX2N1cnJlbnRSZW5kZXJlciAmJiBjb250ZXh0Ll9jdXJyZW50UmVuZGVyZXIgIT09IHJlbmRlcmVyU2lnaWwgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICJEZXRlY3RlZCBtdWx0aXBsZSByZW5kZXJlcnMgY29uY3VycmVudGx5IHJlbmRlcmluZyB0aGUgc2FtZSBjb250ZXh0IHByb3ZpZGVyLiBUaGlzIGlzIGN1cnJlbnRseSB1bnN1cHBvcnRlZC4iCiAgICAgICAgKTsKICAgICAgICBjb250ZXh0Ll9jdXJyZW50UmVuZGVyZXIgPSByZW5kZXJlclNpZ2lsOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHBvcFByb3ZpZGVyKGNvbnRleHQsIHByb3ZpZGVyRmliZXIpIHsKICAgICAgICBjb250ZXh0Ll9jdXJyZW50VmFsdWUgPSB2YWx1ZUN1cnNvci5jdXJyZW50OwogICAgICAgIHZhciBjdXJyZW50UmVuZGVyZXIgPSByZW5kZXJlckN1cnNvckRFVi5jdXJyZW50OwogICAgICAgIHBvcChyZW5kZXJlckN1cnNvckRFViwgcHJvdmlkZXJGaWJlcik7CiAgICAgICAgY29udGV4dC5fY3VycmVudFJlbmRlcmVyID0gY3VycmVudFJlbmRlcmVyOwogICAgICAgIHBvcCh2YWx1ZUN1cnNvciwgcHJvdmlkZXJGaWJlcik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gc2NoZWR1bGVDb250ZXh0V29ya09uUGFyZW50UGF0aChwYXJlbnQsIHJlbmRlckxhbmVzMiwgcHJvcGFnYXRpb25Sb290KSB7CiAgICAgICAgZm9yICg7IG51bGwgIT09IHBhcmVudDsgKSB7CiAgICAgICAgICB2YXIgYWx0ZXJuYXRlID0gcGFyZW50LmFsdGVybmF0ZTsKICAgICAgICAgIChwYXJlbnQuY2hpbGRMYW5lcyAmIHJlbmRlckxhbmVzMikgIT09IHJlbmRlckxhbmVzMiA/IChwYXJlbnQuY2hpbGRMYW5lcyB8PSByZW5kZXJMYW5lczIsIG51bGwgIT09IGFsdGVybmF0ZSAmJiAoYWx0ZXJuYXRlLmNoaWxkTGFuZXMgfD0gcmVuZGVyTGFuZXMyKSkgOiBudWxsICE9PSBhbHRlcm5hdGUgJiYgKGFsdGVybmF0ZS5jaGlsZExhbmVzICYgcmVuZGVyTGFuZXMyKSAhPT0gcmVuZGVyTGFuZXMyICYmIChhbHRlcm5hdGUuY2hpbGRMYW5lcyB8PSByZW5kZXJMYW5lczIpOwogICAgICAgICAgaWYgKHBhcmVudCA9PT0gcHJvcGFnYXRpb25Sb290KSBicmVhazsKICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5yZXR1cm47CiAgICAgICAgfQogICAgICAgIHBhcmVudCAhPT0gcHJvcGFnYXRpb25Sb290ICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiRXhwZWN0ZWQgdG8gZmluZCB0aGUgcHJvcGFnYXRpb24gcm9vdCB3aGVuIHNjaGVkdWxpbmcgY29udGV4dCB3b3JrLiBUaGlzIGVycm9yIGlzIGxpa2VseSBjYXVzZWQgYnkgYSBidWcgaW4gUmVhY3QuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLiIKICAgICAgICApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHByb3BhZ2F0ZUNvbnRleHRDaGFuZ2VzKHdvcmtJblByb2dyZXNzMiwgY29udGV4dHMsIHJlbmRlckxhbmVzMiwgZm9yY2VQcm9wYWdhdGVFbnRpcmVUcmVlKSB7CiAgICAgICAgdmFyIGZpYmVyID0gd29ya0luUHJvZ3Jlc3MyLmNoaWxkOwogICAgICAgIG51bGwgIT09IGZpYmVyICYmIChmaWJlci5yZXR1cm4gPSB3b3JrSW5Qcm9ncmVzczIpOwogICAgICAgIGZvciAoOyBudWxsICE9PSBmaWJlcjsgKSB7CiAgICAgICAgICB2YXIgbGlzdCA9IGZpYmVyLmRlcGVuZGVuY2llczsKICAgICAgICAgIGlmIChudWxsICE9PSBsaXN0KSB7CiAgICAgICAgICAgIHZhciBuZXh0RmliZXIgPSBmaWJlci5jaGlsZDsKICAgICAgICAgICAgbGlzdCA9IGxpc3QuZmlyc3RDb250ZXh0OwogICAgICAgICAgICBhOiBmb3IgKDsgbnVsbCAhPT0gbGlzdDsgKSB7CiAgICAgICAgICAgICAgdmFyIGRlcGVuZGVuY3kgPSBsaXN0OwogICAgICAgICAgICAgIGxpc3QgPSBmaWJlcjsKICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRleHRzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgaWYgKGRlcGVuZGVuY3kuY29udGV4dCA9PT0gY29udGV4dHNbaV0pIHsKICAgICAgICAgICAgICAgICAgbGlzdC5sYW5lcyB8PSByZW5kZXJMYW5lczI7CiAgICAgICAgICAgICAgICAgIGRlcGVuZGVuY3kgPSBsaXN0LmFsdGVybmF0ZTsKICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gZGVwZW5kZW5jeSAmJiAoZGVwZW5kZW5jeS5sYW5lcyB8PSByZW5kZXJMYW5lczIpOwogICAgICAgICAgICAgICAgICBzY2hlZHVsZUNvbnRleHRXb3JrT25QYXJlbnRQYXRoKAogICAgICAgICAgICAgICAgICAgIGxpc3QucmV0dXJuLAogICAgICAgICAgICAgICAgICAgIHJlbmRlckxhbmVzMiwKICAgICAgICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgZm9yY2VQcm9wYWdhdGVFbnRpcmVUcmVlIHx8IChuZXh0RmliZXIgPSBudWxsKTsKICAgICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBsaXN0ID0gZGVwZW5kZW5jeS5uZXh0OwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKDE4ID09PSBmaWJlci50YWcpIHsKICAgICAgICAgICAgbmV4dEZpYmVyID0gZmliZXIucmV0dXJuOwogICAgICAgICAgICBpZiAobnVsbCA9PT0gbmV4dEZpYmVyKQogICAgICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAgICAgIldlIGp1c3QgY2FtZSBmcm9tIGEgcGFyZW50IHNvIHdlIG11c3QgaGF2ZSBoYWQgYSBwYXJlbnQuIFRoaXMgaXMgYSBidWcgaW4gUmVhY3QuIgogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIG5leHRGaWJlci5sYW5lcyB8PSByZW5kZXJMYW5lczI7CiAgICAgICAgICAgIGxpc3QgPSBuZXh0RmliZXIuYWx0ZXJuYXRlOwogICAgICAgICAgICBudWxsICE9PSBsaXN0ICYmIChsaXN0LmxhbmVzIHw9IHJlbmRlckxhbmVzMik7CiAgICAgICAgICAgIHNjaGVkdWxlQ29udGV4dFdvcmtPblBhcmVudFBhdGgoCiAgICAgICAgICAgICAgbmV4dEZpYmVyLAogICAgICAgICAgICAgIHJlbmRlckxhbmVzMiwKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgbmV4dEZpYmVyID0gbnVsbDsKICAgICAgICAgIH0gZWxzZSBuZXh0RmliZXIgPSBmaWJlci5jaGlsZDsKICAgICAgICAgIGlmIChudWxsICE9PSBuZXh0RmliZXIpIG5leHRGaWJlci5yZXR1cm4gPSBmaWJlcjsKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgZm9yIChuZXh0RmliZXIgPSBmaWJlcjsgbnVsbCAhPT0gbmV4dEZpYmVyOyApIHsKICAgICAgICAgICAgICBpZiAobmV4dEZpYmVyID09PSB3b3JrSW5Qcm9ncmVzczIpIHsKICAgICAgICAgICAgICAgIG5leHRGaWJlciA9IG51bGw7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZmliZXIgPSBuZXh0RmliZXIuc2libGluZzsKICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZmliZXIpIHsKICAgICAgICAgICAgICAgIGZpYmVyLnJldHVybiA9IG5leHRGaWJlci5yZXR1cm47CiAgICAgICAgICAgICAgICBuZXh0RmliZXIgPSBmaWJlcjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBuZXh0RmliZXIgPSBuZXh0RmliZXIucmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICBmaWJlciA9IG5leHRGaWJlcjsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcHJvcGFnYXRlUGFyZW50Q29udGV4dENoYW5nZXMoY3VycmVudDIsIHdvcmtJblByb2dyZXNzMiwgcmVuZGVyTGFuZXMyLCBmb3JjZVByb3BhZ2F0ZUVudGlyZVRyZWUpIHsKICAgICAgICBjdXJyZW50MiA9IG51bGw7CiAgICAgICAgZm9yICh2YXIgcGFyZW50ID0gd29ya0luUHJvZ3Jlc3MyLCBpc0luc2lkZVByb3BhZ2F0aW9uQmFpbG91dCA9IGZhbHNlOyBudWxsICE9PSBwYXJlbnQ7ICkgewogICAgICAgICAgaWYgKCFpc0luc2lkZVByb3BhZ2F0aW9uQmFpbG91dCkgewogICAgICAgICAgICBpZiAoMCAhPT0gKHBhcmVudC5mbGFncyAmIDUyNDI4OCkpIGlzSW5zaWRlUHJvcGFnYXRpb25CYWlsb3V0ID0gdHJ1ZTsKICAgICAgICAgICAgZWxzZSBpZiAoMCAhPT0gKHBhcmVudC5mbGFncyAmIDI2MjE0NCkpIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgaWYgKDEwID09PSBwYXJlbnQudGFnKSB7CiAgICAgICAgICAgIHZhciBjdXJyZW50UGFyZW50ID0gcGFyZW50LmFsdGVybmF0ZTsKICAgICAgICAgICAgaWYgKG51bGwgPT09IGN1cnJlbnRQYXJlbnQpCiAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoIlNob3VsZCBoYXZlIGEgY3VycmVudCBmaWJlci4gVGhpcyBpcyBhIGJ1ZyBpbiBSZWFjdC4iKTsKICAgICAgICAgICAgY3VycmVudFBhcmVudCA9IGN1cnJlbnRQYXJlbnQubWVtb2l6ZWRQcm9wczsKICAgICAgICAgICAgaWYgKG51bGwgIT09IGN1cnJlbnRQYXJlbnQpIHsKICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IHBhcmVudC50eXBlOwogICAgICAgICAgICAgIG9iamVjdElzKHBhcmVudC5wZW5kaW5nUHJvcHMudmFsdWUsIGN1cnJlbnRQYXJlbnQudmFsdWUpIHx8IChudWxsICE9PSBjdXJyZW50MiA/IGN1cnJlbnQyLnB1c2goY29udGV4dCkgOiBjdXJyZW50MiA9IFtjb250ZXh0XSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAocGFyZW50ID09PSBob3N0VHJhbnNpdGlvblByb3ZpZGVyQ3Vyc29yLmN1cnJlbnQpIHsKICAgICAgICAgICAgY3VycmVudFBhcmVudCA9IHBhcmVudC5hbHRlcm5hdGU7CiAgICAgICAgICAgIGlmIChudWxsID09PSBjdXJyZW50UGFyZW50KQogICAgICAgICAgICAgIHRocm93IEVycm9yKCJTaG91bGQgaGF2ZSBhIGN1cnJlbnQgZmliZXIuIFRoaXMgaXMgYSBidWcgaW4gUmVhY3QuIik7CiAgICAgICAgICAgIGN1cnJlbnRQYXJlbnQubWVtb2l6ZWRTdGF0ZS5tZW1vaXplZFN0YXRlICE9PSBwYXJlbnQubWVtb2l6ZWRTdGF0ZS5tZW1vaXplZFN0YXRlICYmIChudWxsICE9PSBjdXJyZW50MiA/IGN1cnJlbnQyLnB1c2goSG9zdFRyYW5zaXRpb25Db250ZXh0KSA6IGN1cnJlbnQyID0gW0hvc3RUcmFuc2l0aW9uQ29udGV4dF0pOwogICAgICAgICAgfQogICAgICAgICAgcGFyZW50ID0gcGFyZW50LnJldHVybjsKICAgICAgICB9CiAgICAgICAgbnVsbCAhPT0gY3VycmVudDIgJiYgcHJvcGFnYXRlQ29udGV4dENoYW5nZXMoCiAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgIHJlbmRlckxhbmVzMiwKICAgICAgICAgIGZvcmNlUHJvcGFnYXRlRW50aXJlVHJlZQogICAgICAgICk7CiAgICAgICAgd29ya0luUHJvZ3Jlc3MyLmZsYWdzIHw9IDI2MjE0NDsKICAgICAgfQogICAgICBmdW5jdGlvbiBjaGVja0lmQ29udGV4dENoYW5nZWQoY3VycmVudERlcGVuZGVuY2llcykgewogICAgICAgIGZvciAoY3VycmVudERlcGVuZGVuY2llcyA9IGN1cnJlbnREZXBlbmRlbmNpZXMuZmlyc3RDb250ZXh0OyBudWxsICE9PSBjdXJyZW50RGVwZW5kZW5jaWVzOyApIHsKICAgICAgICAgIGlmICghb2JqZWN0SXMoCiAgICAgICAgICAgIGN1cnJlbnREZXBlbmRlbmNpZXMuY29udGV4dC5fY3VycmVudFZhbHVlLAogICAgICAgICAgICBjdXJyZW50RGVwZW5kZW5jaWVzLm1lbW9pemVkVmFsdWUKICAgICAgICAgICkpCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgY3VycmVudERlcGVuZGVuY2llcyA9IGN1cnJlbnREZXBlbmRlbmNpZXMubmV4dDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHByZXBhcmVUb1JlYWRDb250ZXh0KHdvcmtJblByb2dyZXNzMikgewogICAgICAgIGN1cnJlbnRseVJlbmRlcmluZ0ZpYmVyJDEgPSB3b3JrSW5Qcm9ncmVzczI7CiAgICAgICAgbGFzdENvbnRleHREZXBlbmRlbmN5ID0gbnVsbDsKICAgICAgICB3b3JrSW5Qcm9ncmVzczIgPSB3b3JrSW5Qcm9ncmVzczIuZGVwZW5kZW5jaWVzOwogICAgICAgIG51bGwgIT09IHdvcmtJblByb2dyZXNzMiAmJiAod29ya0luUHJvZ3Jlc3MyLmZpcnN0Q29udGV4dCA9IG51bGwpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlYWRDb250ZXh0KGNvbnRleHQpIHsKICAgICAgICBpc0Rpc2FsbG93ZWRDb250ZXh0UmVhZEluREVWICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiQ29udGV4dCBjYW4gb25seSBiZSByZWFkIHdoaWxlIFJlYWN0IGlzIHJlbmRlcmluZy4gSW4gY2xhc3NlcywgeW91IGNhbiByZWFkIGl0IGluIHRoZSByZW5kZXIgbWV0aG9kIG9yIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcy4gSW4gZnVuY3Rpb24gY29tcG9uZW50cywgeW91IGNhbiByZWFkIGl0IGRpcmVjdGx5IGluIHRoZSBmdW5jdGlvbiBib2R5LCBidXQgbm90IGluc2lkZSBIb29rcyBsaWtlIHVzZVJlZHVjZXIoKSBvciB1c2VNZW1vKCkuIgogICAgICAgICk7CiAgICAgICAgcmV0dXJuIHJlYWRDb250ZXh0Rm9yQ29uc3VtZXIoY3VycmVudGx5UmVuZGVyaW5nRmliZXIkMSwgY29udGV4dCk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmVhZENvbnRleHREdXJpbmdSZWNvbmNpbGlhdGlvbihjb25zdW1lciwgY29udGV4dCkgewogICAgICAgIG51bGwgPT09IGN1cnJlbnRseVJlbmRlcmluZ0ZpYmVyJDEgJiYgcHJlcGFyZVRvUmVhZENvbnRleHQoY29uc3VtZXIpOwogICAgICAgIHJldHVybiByZWFkQ29udGV4dEZvckNvbnN1bWVyKGNvbnN1bWVyLCBjb250ZXh0KTsKICAgICAgfQogICAgICBmdW5jdGlvbiByZWFkQ29udGV4dEZvckNvbnN1bWVyKGNvbnN1bWVyLCBjb250ZXh0KSB7CiAgICAgICAgdmFyIHZhbHVlID0gY29udGV4dC5fY3VycmVudFZhbHVlOwogICAgICAgIGNvbnRleHQgPSB7IGNvbnRleHQsIG1lbW9pemVkVmFsdWU6IHZhbHVlLCBuZXh0OiBudWxsIH07CiAgICAgICAgaWYgKG51bGwgPT09IGxhc3RDb250ZXh0RGVwZW5kZW5jeSkgewogICAgICAgICAgaWYgKG51bGwgPT09IGNvbnN1bWVyKQogICAgICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICAgICAiQ29udGV4dCBjYW4gb25seSBiZSByZWFkIHdoaWxlIFJlYWN0IGlzIHJlbmRlcmluZy4gSW4gY2xhc3NlcywgeW91IGNhbiByZWFkIGl0IGluIHRoZSByZW5kZXIgbWV0aG9kIG9yIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcy4gSW4gZnVuY3Rpb24gY29tcG9uZW50cywgeW91IGNhbiByZWFkIGl0IGRpcmVjdGx5IGluIHRoZSBmdW5jdGlvbiBib2R5LCBidXQgbm90IGluc2lkZSBIb29rcyBsaWtlIHVzZVJlZHVjZXIoKSBvciB1c2VNZW1vKCkuIgogICAgICAgICAgICApOwogICAgICAgICAgbGFzdENvbnRleHREZXBlbmRlbmN5ID0gY29udGV4dDsKICAgICAgICAgIGNvbnN1bWVyLmRlcGVuZGVuY2llcyA9IHsKICAgICAgICAgICAgbGFuZXM6IDAsCiAgICAgICAgICAgIGZpcnN0Q29udGV4dDogY29udGV4dCwKICAgICAgICAgICAgX2RlYnVnVGhlbmFibGVTdGF0ZTogbnVsbAogICAgICAgICAgfTsKICAgICAgICAgIGNvbnN1bWVyLmZsYWdzIHw9IDUyNDI4ODsKICAgICAgICB9IGVsc2UgbGFzdENvbnRleHREZXBlbmRlbmN5ID0gbGFzdENvbnRleHREZXBlbmRlbmN5Lm5leHQgPSBjb250ZXh0OwogICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjcmVhdGVDYWNoZSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgY29udHJvbGxlcjogbmV3IEFib3J0Q29udHJvbGxlckxvY2FsKCksCiAgICAgICAgICBkYXRhOiAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpLAogICAgICAgICAgcmVmQ291bnQ6IDAKICAgICAgICB9OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJldGFpbkNhY2hlKGNhY2hlKSB7CiAgICAgICAgY2FjaGUuY29udHJvbGxlci5zaWduYWwuYWJvcnRlZCAmJiBjb25zb2xlLndhcm4oCiAgICAgICAgICAiQSBjYWNoZSBpbnN0YW5jZSB3YXMgcmV0YWluZWQgYWZ0ZXIgaXQgd2FzIGFscmVhZHkgZnJlZWQuIFRoaXMgbGlrZWx5IGluZGljYXRlcyBhIGJ1ZyBpbiBSZWFjdC4iCiAgICAgICAgKTsKICAgICAgICBjYWNoZS5yZWZDb3VudCsrOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlbGVhc2VDYWNoZShjYWNoZSkgewogICAgICAgIGNhY2hlLnJlZkNvdW50LS07CiAgICAgICAgMCA+IGNhY2hlLnJlZkNvdW50ICYmIGNvbnNvbGUud2FybigKICAgICAgICAgICJBIGNhY2hlIGluc3RhbmNlIHdhcyByZWxlYXNlZCBhZnRlciBpdCB3YXMgYWxyZWFkeSBmcmVlZC4gVGhpcyBsaWtlbHkgaW5kaWNhdGVzIGEgYnVnIGluIFJlYWN0LiIKICAgICAgICApOwogICAgICAgIDAgPT09IGNhY2hlLnJlZkNvdW50ICYmIHNjaGVkdWxlQ2FsbGJhY2skMihOb3JtYWxQcmlvcml0eSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICBjYWNoZS5jb250cm9sbGVyLmFib3J0KCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcHVzaE5lc3RlZEVmZmVjdER1cmF0aW9ucygpIHsKICAgICAgICB2YXIgcHJldkVmZmVjdER1cmF0aW9uID0gcHJvZmlsZXJFZmZlY3REdXJhdGlvbjsKICAgICAgICBwcm9maWxlckVmZmVjdER1cmF0aW9uID0gMDsKICAgICAgICByZXR1cm4gcHJldkVmZmVjdER1cmF0aW9uOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHBvcE5lc3RlZEVmZmVjdER1cmF0aW9ucyhwcmV2RWZmZWN0RHVyYXRpb24pIHsKICAgICAgICB2YXIgZWxhcHNlZFRpbWUgPSBwcm9maWxlckVmZmVjdER1cmF0aW9uOwogICAgICAgIHByb2ZpbGVyRWZmZWN0RHVyYXRpb24gPSBwcmV2RWZmZWN0RHVyYXRpb247CiAgICAgICAgcmV0dXJuIGVsYXBzZWRUaW1lOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGJ1YmJsZU5lc3RlZEVmZmVjdER1cmF0aW9ucyhwcmV2RWZmZWN0RHVyYXRpb24pIHsKICAgICAgICB2YXIgZWxhcHNlZFRpbWUgPSBwcm9maWxlckVmZmVjdER1cmF0aW9uOwogICAgICAgIHByb2ZpbGVyRWZmZWN0RHVyYXRpb24gKz0gcHJldkVmZmVjdER1cmF0aW9uOwogICAgICAgIHJldHVybiBlbGFwc2VkVGltZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBzdGFydFByb2ZpbGVyVGltZXIoZmliZXIpIHsKICAgICAgICBwcm9maWxlclN0YXJ0VGltZSA9IG5vdygpOwogICAgICAgIDAgPiBmaWJlci5hY3R1YWxTdGFydFRpbWUgJiYgKGZpYmVyLmFjdHVhbFN0YXJ0VGltZSA9IHByb2ZpbGVyU3RhcnRUaW1lKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBzdG9wUHJvZmlsZXJUaW1lcklmUnVubmluZ0FuZFJlY29yZER1cmF0aW9uKGZpYmVyKSB7CiAgICAgICAgaWYgKDAgPD0gcHJvZmlsZXJTdGFydFRpbWUpIHsKICAgICAgICAgIHZhciBlbGFwc2VkVGltZSA9IG5vdygpIC0gcHJvZmlsZXJTdGFydFRpbWU7CiAgICAgICAgICBmaWJlci5hY3R1YWxEdXJhdGlvbiArPSBlbGFwc2VkVGltZTsKICAgICAgICAgIGZpYmVyLnNlbGZCYXNlRHVyYXRpb24gPSBlbGFwc2VkVGltZTsKICAgICAgICAgIHByb2ZpbGVyU3RhcnRUaW1lID0gLTE7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIHN0b3BQcm9maWxlclRpbWVySWZSdW5uaW5nQW5kUmVjb3JkSW5jb21wbGV0ZUR1cmF0aW9uKGZpYmVyKSB7CiAgICAgICAgaWYgKDAgPD0gcHJvZmlsZXJTdGFydFRpbWUpIHsKICAgICAgICAgIHZhciBlbGFwc2VkVGltZSA9IG5vdygpIC0gcHJvZmlsZXJTdGFydFRpbWU7CiAgICAgICAgICBmaWJlci5hY3R1YWxEdXJhdGlvbiArPSBlbGFwc2VkVGltZTsKICAgICAgICAgIHByb2ZpbGVyU3RhcnRUaW1lID0gLTE7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlY29yZEVmZmVjdER1cmF0aW9uKCkgewogICAgICAgIGlmICgwIDw9IHByb2ZpbGVyU3RhcnRUaW1lKSB7CiAgICAgICAgICB2YXIgZWxhcHNlZFRpbWUgPSBub3coKSAtIHByb2ZpbGVyU3RhcnRUaW1lOwogICAgICAgICAgcHJvZmlsZXJTdGFydFRpbWUgPSAtMTsKICAgICAgICAgIHByb2ZpbGVyRWZmZWN0RHVyYXRpb24gKz0gZWxhcHNlZFRpbWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIHN0YXJ0RWZmZWN0VGltZXIoKSB7CiAgICAgICAgcHJvZmlsZXJTdGFydFRpbWUgPSBub3coKTsKICAgICAgfQogICAgICBmdW5jdGlvbiB0cmFuc2ZlckFjdHVhbER1cmF0aW9uKGZpYmVyKSB7CiAgICAgICAgZm9yICh2YXIgY2hpbGQgPSBmaWJlci5jaGlsZDsgY2hpbGQ7ICkKICAgICAgICAgIGZpYmVyLmFjdHVhbER1cmF0aW9uICs9IGNoaWxkLmFjdHVhbER1cmF0aW9uLCBjaGlsZCA9IGNoaWxkLnNpYmxpbmc7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZW50YW5nbGVBc3luY0FjdGlvbih0cmFuc2l0aW9uLCB0aGVuYWJsZSkgewogICAgICAgIGlmIChudWxsID09PSBjdXJyZW50RW50YW5nbGVkTGlzdGVuZXJzKSB7CiAgICAgICAgICB2YXIgZW50YW5nbGVkTGlzdGVuZXJzID0gY3VycmVudEVudGFuZ2xlZExpc3RlbmVycyA9IFtdOwogICAgICAgICAgY3VycmVudEVudGFuZ2xlZFBlbmRpbmdDb3VudCA9IDA7CiAgICAgICAgICBjdXJyZW50RW50YW5nbGVkTGFuZSA9IHJlcXVlc3RUcmFuc2l0aW9uTGFuZSgpOwogICAgICAgICAgY3VycmVudEVudGFuZ2xlZEFjdGlvblRoZW5hYmxlID0gewogICAgICAgICAgICBzdGF0dXM6ICJwZW5kaW5nIiwKICAgICAgICAgICAgdmFsdWU6IHZvaWQgMCwKICAgICAgICAgICAgdGhlbjogZnVuY3Rpb24ocmVzb2x2ZSkgewogICAgICAgICAgICAgIGVudGFuZ2xlZExpc3RlbmVycy5wdXNoKHJlc29sdmUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICBjdXJyZW50RW50YW5nbGVkUGVuZGluZ0NvdW50Kys7CiAgICAgICAgdGhlbmFibGUudGhlbihwaW5nRW5ndGFuZ2xlZEFjdGlvblNjb3BlLCBwaW5nRW5ndGFuZ2xlZEFjdGlvblNjb3BlKTsKICAgICAgICByZXR1cm4gdGhlbmFibGU7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcGluZ0VuZ3RhbmdsZWRBY3Rpb25TY29wZSgpIHsKICAgICAgICBpZiAoMCA9PT0gLS1jdXJyZW50RW50YW5nbGVkUGVuZGluZ0NvdW50ICYmIG51bGwgIT09IGN1cnJlbnRFbnRhbmdsZWRMaXN0ZW5lcnMpIHsKICAgICAgICAgIG51bGwgIT09IGN1cnJlbnRFbnRhbmdsZWRBY3Rpb25UaGVuYWJsZSAmJiAoY3VycmVudEVudGFuZ2xlZEFjdGlvblRoZW5hYmxlLnN0YXR1cyA9ICJmdWxmaWxsZWQiKTsKICAgICAgICAgIHZhciBsaXN0ZW5lcnMgPSBjdXJyZW50RW50YW5nbGVkTGlzdGVuZXJzOwogICAgICAgICAgY3VycmVudEVudGFuZ2xlZExpc3RlbmVycyA9IG51bGw7CiAgICAgICAgICBjdXJyZW50RW50YW5nbGVkTGFuZSA9IDA7CiAgICAgICAgICBjdXJyZW50RW50YW5nbGVkQWN0aW9uVGhlbmFibGUgPSBudWxsOwogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspICgwLCBsaXN0ZW5lcnNbaV0pKCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNoYWluVGhlbmFibGVWYWx1ZSh0aGVuYWJsZSwgcmVzdWx0KSB7CiAgICAgICAgdmFyIGxpc3RlbmVycyA9IFtdLCB0aGVuYWJsZVdpdGhPdmVycmlkZSA9IHsKICAgICAgICAgIHN0YXR1czogInBlbmRpbmciLAogICAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgICByZWFzb246IG51bGwsCiAgICAgICAgICB0aGVuOiBmdW5jdGlvbihyZXNvbHZlKSB7CiAgICAgICAgICAgIGxpc3RlbmVycy5wdXNoKHJlc29sdmUpOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgdGhlbmFibGUudGhlbigKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICB0aGVuYWJsZVdpdGhPdmVycmlkZS5zdGF0dXMgPSAiZnVsZmlsbGVkIjsKICAgICAgICAgICAgdGhlbmFibGVXaXRoT3ZlcnJpZGUudmFsdWUgPSByZXN1bHQ7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSAoMCwgbGlzdGVuZXJzW2ldKShyZXN1bHQpOwogICAgICAgICAgfSwKICAgICAgICAgIGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICAgIHRoZW5hYmxlV2l0aE92ZXJyaWRlLnN0YXR1cyA9ICJyZWplY3RlZCI7CiAgICAgICAgICAgIHRoZW5hYmxlV2l0aE92ZXJyaWRlLnJlYXNvbiA9IGVycm9yOwogICAgICAgICAgICBmb3IgKGVycm9yID0gMDsgZXJyb3IgPCBsaXN0ZW5lcnMubGVuZ3RoOyBlcnJvcisrKQogICAgICAgICAgICAgICgwLCBsaXN0ZW5lcnNbZXJyb3JdKSh2b2lkIDApOwogICAgICAgICAgfQogICAgICAgICk7CiAgICAgICAgcmV0dXJuIHRoZW5hYmxlV2l0aE92ZXJyaWRlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHBlZWtDYWNoZUZyb21Qb29sKCkgewogICAgICAgIHZhciBjYWNoZVJlc3VtZWRGcm9tUHJldmlvdXNSZW5kZXIgPSByZXN1bWVkQ2FjaGUuY3VycmVudDsKICAgICAgICByZXR1cm4gbnVsbCAhPT0gY2FjaGVSZXN1bWVkRnJvbVByZXZpb3VzUmVuZGVyID8gY2FjaGVSZXN1bWVkRnJvbVByZXZpb3VzUmVuZGVyIDogd29ya0luUHJvZ3Jlc3NSb290LnBvb2xlZENhY2hlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHB1c2hUcmFuc2l0aW9uKG9mZnNjcmVlbldvcmtJblByb2dyZXNzLCBwcmV2Q2FjaGVQb29sKSB7CiAgICAgICAgbnVsbCA9PT0gcHJldkNhY2hlUG9vbCA/IHB1c2gocmVzdW1lZENhY2hlLCByZXN1bWVkQ2FjaGUuY3VycmVudCwgb2Zmc2NyZWVuV29ya0luUHJvZ3Jlc3MpIDogcHVzaChyZXN1bWVkQ2FjaGUsIHByZXZDYWNoZVBvb2wucG9vbCwgb2Zmc2NyZWVuV29ya0luUHJvZ3Jlc3MpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldFN1c3BlbmRlZENhY2hlKCkgewogICAgICAgIHZhciBjYWNoZUZyb21Qb29sID0gcGVla0NhY2hlRnJvbVBvb2woKTsKICAgICAgICByZXR1cm4gbnVsbCA9PT0gY2FjaGVGcm9tUG9vbCA/IG51bGwgOiB7IHBhcmVudDogQ2FjaGVDb250ZXh0Ll9jdXJyZW50VmFsdWUsIHBvb2w6IGNhY2hlRnJvbVBvb2wgfTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjcmVhdGVUaGVuYWJsZVN0YXRlKCkgewogICAgICAgIHJldHVybiB7IGRpZFdhcm5BYm91dFVuY2FjaGVkUHJvbWlzZTogZmFsc2UsIHRoZW5hYmxlczogW10gfTsKICAgICAgfQogICAgICBmdW5jdGlvbiBpc1RoZW5hYmxlUmVzb2x2ZWQodGhlbmFibGUpIHsKICAgICAgICB0aGVuYWJsZSA9IHRoZW5hYmxlLnN0YXR1czsKICAgICAgICByZXR1cm4gImZ1bGZpbGxlZCIgPT09IHRoZW5hYmxlIHx8ICJyZWplY3RlZCIgPT09IHRoZW5hYmxlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG5vb3AkMygpIHsKICAgICAgfQogICAgICBmdW5jdGlvbiB0cmFja1VzZWRUaGVuYWJsZSh0aGVuYWJsZVN0YXRlMiwgdGhlbmFibGUsIGluZGV4KSB7CiAgICAgICAgbnVsbCAhPT0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuYWN0UXVldWUgJiYgKFJlYWN0U2hhcmVkSW50ZXJuYWxzLmRpZFVzZVByb21pc2UgPSB0cnVlKTsKICAgICAgICB2YXIgdHJhY2tlZFRoZW5hYmxlcyA9IHRoZW5hYmxlU3RhdGUyLnRoZW5hYmxlczsKICAgICAgICBpbmRleCA9IHRyYWNrZWRUaGVuYWJsZXNbaW5kZXhdOwogICAgICAgIHZvaWQgMCA9PT0gaW5kZXggPyB0cmFja2VkVGhlbmFibGVzLnB1c2godGhlbmFibGUpIDogaW5kZXggIT09IHRoZW5hYmxlICYmICh0aGVuYWJsZVN0YXRlMi5kaWRXYXJuQWJvdXRVbmNhY2hlZFByb21pc2UgfHwgKHRoZW5hYmxlU3RhdGUyLmRpZFdhcm5BYm91dFVuY2FjaGVkUHJvbWlzZSA9IHRydWUsIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiQSBjb21wb25lbnQgd2FzIHN1c3BlbmRlZCBieSBhbiB1bmNhY2hlZCBwcm9taXNlLiBDcmVhdGluZyBwcm9taXNlcyBpbnNpZGUgYSBDbGllbnQgQ29tcG9uZW50IG9yIGhvb2sgaXMgbm90IHlldCBzdXBwb3J0ZWQsIGV4Y2VwdCB2aWEgYSBTdXNwZW5zZS1jb21wYXRpYmxlIGxpYnJhcnkgb3IgZnJhbWV3b3JrLiIKICAgICAgICApKSwgdGhlbmFibGUudGhlbihub29wJDMsIG5vb3AkMyksIHRoZW5hYmxlID0gaW5kZXgpOwogICAgICAgIHN3aXRjaCAodGhlbmFibGUuc3RhdHVzKSB7CiAgICAgICAgICBjYXNlICJmdWxmaWxsZWQiOgogICAgICAgICAgICByZXR1cm4gdGhlbmFibGUudmFsdWU7CiAgICAgICAgICBjYXNlICJyZWplY3RlZCI6CiAgICAgICAgICAgIHRocm93IHRoZW5hYmxlU3RhdGUyID0gdGhlbmFibGUucmVhc29uLCBjaGVja0lmVXNlV3JhcHBlZEluQXN5bmNDYXRjaCh0aGVuYWJsZVN0YXRlMiksIHRoZW5hYmxlU3RhdGUyOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgaWYgKCJzdHJpbmciID09PSB0eXBlb2YgdGhlbmFibGUuc3RhdHVzKQogICAgICAgICAgICAgIHRoZW5hYmxlLnRoZW4obm9vcCQzLCBub29wJDMpOwogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICB0aGVuYWJsZVN0YXRlMiA9IHdvcmtJblByb2dyZXNzUm9vdDsKICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gdGhlbmFibGVTdGF0ZTIgJiYgMTAwIDwgdGhlbmFibGVTdGF0ZTIuc2hlbGxTdXNwZW5kQ291bnRlcikKICAgICAgICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAgICAgICAiQW4gdW5rbm93biBDb21wb25lbnQgaXMgYW4gYXN5bmMgQ2xpZW50IENvbXBvbmVudC4gT25seSBTZXJ2ZXIgQ29tcG9uZW50cyBjYW4gYmUgYXN5bmMgYXQgdGhlIG1vbWVudC4gVGhpcyBlcnJvciBpcyBvZnRlbiBjYXVzZWQgYnkgYWNjaWRlbnRhbGx5IGFkZGluZyBgJ3VzZSBjbGllbnQnYCB0byBhIG1vZHVsZSB0aGF0IHdhcyBvcmlnaW5hbGx5IHdyaXR0ZW4gZm9yIHRoZSBzZXJ2ZXIuIgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB0aGVuYWJsZVN0YXRlMiA9IHRoZW5hYmxlOwogICAgICAgICAgICAgIHRoZW5hYmxlU3RhdGUyLnN0YXR1cyA9ICJwZW5kaW5nIjsKICAgICAgICAgICAgICB0aGVuYWJsZVN0YXRlMi50aGVuKAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZnVsZmlsbGVkVmFsdWUpIHsKICAgICAgICAgICAgICAgICAgaWYgKCJwZW5kaW5nIiA9PT0gdGhlbmFibGUuc3RhdHVzKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZ1bGZpbGxlZFRoZW5hYmxlID0gdGhlbmFibGU7CiAgICAgICAgICAgICAgICAgICAgZnVsZmlsbGVkVGhlbmFibGUuc3RhdHVzID0gImZ1bGZpbGxlZCI7CiAgICAgICAgICAgICAgICAgICAgZnVsZmlsbGVkVGhlbmFibGUudmFsdWUgPSBmdWxmaWxsZWRWYWx1ZTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGlmICgicGVuZGluZyIgPT09IHRoZW5hYmxlLnN0YXR1cykgewogICAgICAgICAgICAgICAgICAgIHZhciByZWplY3RlZFRoZW5hYmxlID0gdGhlbmFibGU7CiAgICAgICAgICAgICAgICAgICAgcmVqZWN0ZWRUaGVuYWJsZS5zdGF0dXMgPSAicmVqZWN0ZWQiOwogICAgICAgICAgICAgICAgICAgIHJlamVjdGVkVGhlbmFibGUucmVhc29uID0gZXJyb3I7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN3aXRjaCAodGhlbmFibGUuc3RhdHVzKSB7CiAgICAgICAgICAgICAgY2FzZSAiZnVsZmlsbGVkIjoKICAgICAgICAgICAgICAgIHJldHVybiB0aGVuYWJsZS52YWx1ZTsKICAgICAgICAgICAgICBjYXNlICJyZWplY3RlZCI6CiAgICAgICAgICAgICAgICB0aHJvdyB0aGVuYWJsZVN0YXRlMiA9IHRoZW5hYmxlLnJlYXNvbiwgY2hlY2tJZlVzZVdyYXBwZWRJbkFzeW5jQ2F0Y2godGhlbmFibGVTdGF0ZTIpLCB0aGVuYWJsZVN0YXRlMjsKICAgICAgICAgICAgfQogICAgICAgICAgICBzdXNwZW5kZWRUaGVuYWJsZSA9IHRoZW5hYmxlOwogICAgICAgICAgICBuZWVkc1RvUmVzZXRTdXNwZW5kZWRUaGVuYWJsZURFViA9IHRydWU7CiAgICAgICAgICAgIHRocm93IFN1c3BlbnNlRXhjZXB0aW9uOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBnZXRTdXNwZW5kZWRUaGVuYWJsZSgpIHsKICAgICAgICBpZiAobnVsbCA9PT0gc3VzcGVuZGVkVGhlbmFibGUpCiAgICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICAgIkV4cGVjdGVkIGEgc3VzcGVuZGVkIHRoZW5hYmxlLiBUaGlzIGlzIGEgYnVnIGluIFJlYWN0LiBQbGVhc2UgZmlsZSBhbiBpc3N1ZS4iCiAgICAgICAgICApOwogICAgICAgIHZhciB0aGVuYWJsZSA9IHN1c3BlbmRlZFRoZW5hYmxlOwogICAgICAgIHN1c3BlbmRlZFRoZW5hYmxlID0gbnVsbDsKICAgICAgICBuZWVkc1RvUmVzZXRTdXNwZW5kZWRUaGVuYWJsZURFViA9IGZhbHNlOwogICAgICAgIHJldHVybiB0aGVuYWJsZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjaGVja0lmVXNlV3JhcHBlZEluQXN5bmNDYXRjaChyZWplY3RlZFJlYXNvbikgewogICAgICAgIGlmIChyZWplY3RlZFJlYXNvbiA9PT0gU3VzcGVuc2VFeGNlcHRpb24gfHwgcmVqZWN0ZWRSZWFzb24gPT09IFN1c3BlbnNlQWN0aW9uRXhjZXB0aW9uKQogICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICJIb29rcyBhcmUgbm90IHN1cHBvcnRlZCBpbnNpZGUgYW4gYXN5bmMgY29tcG9uZW50LiBUaGlzIGVycm9yIGlzIG9mdGVuIGNhdXNlZCBieSBhY2NpZGVudGFsbHkgYWRkaW5nIGAndXNlIGNsaWVudCdgIHRvIGEgbW9kdWxlIHRoYXQgd2FzIG9yaWdpbmFsbHkgd3JpdHRlbiBmb3IgdGhlIHNlcnZlci4iCiAgICAgICAgICApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemVVcGRhdGVRdWV1ZShmaWJlcikgewogICAgICAgIGZpYmVyLnVwZGF0ZVF1ZXVlID0gewogICAgICAgICAgYmFzZVN0YXRlOiBmaWJlci5tZW1vaXplZFN0YXRlLAogICAgICAgICAgZmlyc3RCYXNlVXBkYXRlOiBudWxsLAogICAgICAgICAgbGFzdEJhc2VVcGRhdGU6IG51bGwsCiAgICAgICAgICBzaGFyZWQ6IHsgcGVuZGluZzogbnVsbCwgbGFuZXM6IDAsIGhpZGRlbkNhbGxiYWNrczogbnVsbCB9LAogICAgICAgICAgY2FsbGJhY2tzOiBudWxsCiAgICAgICAgfTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjbG9uZVVwZGF0ZVF1ZXVlKGN1cnJlbnQyLCB3b3JrSW5Qcm9ncmVzczIpIHsKICAgICAgICBjdXJyZW50MiA9IGN1cnJlbnQyLnVwZGF0ZVF1ZXVlOwogICAgICAgIHdvcmtJblByb2dyZXNzMi51cGRhdGVRdWV1ZSA9PT0gY3VycmVudDIgJiYgKHdvcmtJblByb2dyZXNzMi51cGRhdGVRdWV1ZSA9IHsKICAgICAgICAgIGJhc2VTdGF0ZTogY3VycmVudDIuYmFzZVN0YXRlLAogICAgICAgICAgZmlyc3RCYXNlVXBkYXRlOiBjdXJyZW50Mi5maXJzdEJhc2VVcGRhdGUsCiAgICAgICAgICBsYXN0QmFzZVVwZGF0ZTogY3VycmVudDIubGFzdEJhc2VVcGRhdGUsCiAgICAgICAgICBzaGFyZWQ6IGN1cnJlbnQyLnNoYXJlZCwKICAgICAgICAgIGNhbGxiYWNrczogbnVsbAogICAgICAgIH0pOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNyZWF0ZVVwZGF0ZShsYW5lKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGxhbmUsCiAgICAgICAgICB0YWc6IFVwZGF0ZVN0YXRlLAogICAgICAgICAgcGF5bG9hZDogbnVsbCwKICAgICAgICAgIGNhbGxiYWNrOiBudWxsLAogICAgICAgICAgbmV4dDogbnVsbAogICAgICAgIH07CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZW5xdWV1ZVVwZGF0ZShmaWJlciwgdXBkYXRlLCBsYW5lKSB7CiAgICAgICAgdmFyIHVwZGF0ZVF1ZXVlID0gZmliZXIudXBkYXRlUXVldWU7CiAgICAgICAgaWYgKG51bGwgPT09IHVwZGF0ZVF1ZXVlKSByZXR1cm4gbnVsbDsKICAgICAgICB1cGRhdGVRdWV1ZSA9IHVwZGF0ZVF1ZXVlLnNoYXJlZDsKICAgICAgICBpZiAoY3VycmVudGx5UHJvY2Vzc2luZ1F1ZXVlID09PSB1cGRhdGVRdWV1ZSAmJiAhZGlkV2FyblVwZGF0ZUluc2lkZVVwZGF0ZSkgewogICAgICAgICAgdmFyIGNvbXBvbmVudE5hbWUyID0gZ2V0Q29tcG9uZW50TmFtZUZyb21GaWJlcihmaWJlcik7CiAgICAgICAgICBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiQW4gdXBkYXRlIChzZXRTdGF0ZSwgcmVwbGFjZVN0YXRlLCBvciBmb3JjZVVwZGF0ZSkgd2FzIHNjaGVkdWxlZCBmcm9tIGluc2lkZSBhbiB1cGRhdGUgZnVuY3Rpb24uIFVwZGF0ZSBmdW5jdGlvbnMgc2hvdWxkIGJlIHB1cmUsIHdpdGggemVybyBzaWRlLWVmZmVjdHMuIENvbnNpZGVyIHVzaW5nIGNvbXBvbmVudERpZFVwZGF0ZSBvciBhIGNhbGxiYWNrLlxuXG5QbGVhc2UgdXBkYXRlIHRoZSBmb2xsb3dpbmcgY29tcG9uZW50OiAlcyIsCiAgICAgICAgICAgIGNvbXBvbmVudE5hbWUyCiAgICAgICAgICApOwogICAgICAgICAgZGlkV2FyblVwZGF0ZUluc2lkZVVwZGF0ZSA9IHRydWU7CiAgICAgICAgfQogICAgICAgIGlmICgoZXhlY3V0aW9uQ29udGV4dCAmIFJlbmRlckNvbnRleHQpICE9PSBOb0NvbnRleHQpCiAgICAgICAgICByZXR1cm4gY29tcG9uZW50TmFtZTIgPSB1cGRhdGVRdWV1ZS5wZW5kaW5nLCBudWxsID09PSBjb21wb25lbnROYW1lMiA/IHVwZGF0ZS5uZXh0ID0gdXBkYXRlIDogKHVwZGF0ZS5uZXh0ID0gY29tcG9uZW50TmFtZTIubmV4dCwgY29tcG9uZW50TmFtZTIubmV4dCA9IHVwZGF0ZSksIHVwZGF0ZVF1ZXVlLnBlbmRpbmcgPSB1cGRhdGUsIHVwZGF0ZSA9IGdldFJvb3RGb3JVcGRhdGVkRmliZXIoZmliZXIpLCBtYXJrVXBkYXRlTGFuZUZyb21GaWJlclRvUm9vdChmaWJlciwgbnVsbCwgbGFuZSksIHVwZGF0ZTsKICAgICAgICBlbnF1ZXVlVXBkYXRlJDEoZmliZXIsIHVwZGF0ZVF1ZXVlLCB1cGRhdGUsIGxhbmUpOwogICAgICAgIHJldHVybiBnZXRSb290Rm9yVXBkYXRlZEZpYmVyKGZpYmVyKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBlbnRhbmdsZVRyYW5zaXRpb25zKHJvb3QyLCBmaWJlciwgbGFuZSkgewogICAgICAgIGZpYmVyID0gZmliZXIudXBkYXRlUXVldWU7CiAgICAgICAgaWYgKG51bGwgIT09IGZpYmVyICYmIChmaWJlciA9IGZpYmVyLnNoYXJlZCwgMCAhPT0gKGxhbmUgJiA0MTk0MDQ4KSkpIHsKICAgICAgICAgIHZhciBxdWV1ZUxhbmVzID0gZmliZXIubGFuZXM7CiAgICAgICAgICBxdWV1ZUxhbmVzICY9IHJvb3QyLnBlbmRpbmdMYW5lczsKICAgICAgICAgIGxhbmUgfD0gcXVldWVMYW5lczsKICAgICAgICAgIGZpYmVyLmxhbmVzID0gbGFuZTsKICAgICAgICAgIG1hcmtSb290RW50YW5nbGVkKHJvb3QyLCBsYW5lKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZW5xdWV1ZUNhcHR1cmVkVXBkYXRlKHdvcmtJblByb2dyZXNzMiwgY2FwdHVyZWRVcGRhdGUpIHsKICAgICAgICB2YXIgcXVldWUgPSB3b3JrSW5Qcm9ncmVzczIudXBkYXRlUXVldWUsIGN1cnJlbnQyID0gd29ya0luUHJvZ3Jlc3MyLmFsdGVybmF0ZTsKICAgICAgICBpZiAobnVsbCAhPT0gY3VycmVudDIgJiYgKGN1cnJlbnQyID0gY3VycmVudDIudXBkYXRlUXVldWUsIHF1ZXVlID09PSBjdXJyZW50MikpIHsKICAgICAgICAgIHZhciBuZXdGaXJzdCA9IG51bGwsIG5ld0xhc3QgPSBudWxsOwogICAgICAgICAgcXVldWUgPSBxdWV1ZS5maXJzdEJhc2VVcGRhdGU7CiAgICAgICAgICBpZiAobnVsbCAhPT0gcXVldWUpIHsKICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgIHZhciBjbG9uZSA9IHsKICAgICAgICAgICAgICAgIGxhbmU6IHF1ZXVlLmxhbmUsCiAgICAgICAgICAgICAgICB0YWc6IHF1ZXVlLnRhZywKICAgICAgICAgICAgICAgIHBheWxvYWQ6IHF1ZXVlLnBheWxvYWQsCiAgICAgICAgICAgICAgICBjYWxsYmFjazogbnVsbCwKICAgICAgICAgICAgICAgIG5leHQ6IG51bGwKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIG51bGwgPT09IG5ld0xhc3QgPyBuZXdGaXJzdCA9IG5ld0xhc3QgPSBjbG9uZSA6IG5ld0xhc3QgPSBuZXdMYXN0Lm5leHQgPSBjbG9uZTsKICAgICAgICAgICAgICBxdWV1ZSA9IHF1ZXVlLm5leHQ7CiAgICAgICAgICAgIH0gd2hpbGUgKG51bGwgIT09IHF1ZXVlKTsKICAgICAgICAgICAgbnVsbCA9PT0gbmV3TGFzdCA/IG5ld0ZpcnN0ID0gbmV3TGFzdCA9IGNhcHR1cmVkVXBkYXRlIDogbmV3TGFzdCA9IG5ld0xhc3QubmV4dCA9IGNhcHR1cmVkVXBkYXRlOwogICAgICAgICAgfSBlbHNlIG5ld0ZpcnN0ID0gbmV3TGFzdCA9IGNhcHR1cmVkVXBkYXRlOwogICAgICAgICAgcXVldWUgPSB7CiAgICAgICAgICAgIGJhc2VTdGF0ZTogY3VycmVudDIuYmFzZVN0YXRlLAogICAgICAgICAgICBmaXJzdEJhc2VVcGRhdGU6IG5ld0ZpcnN0LAogICAgICAgICAgICBsYXN0QmFzZVVwZGF0ZTogbmV3TGFzdCwKICAgICAgICAgICAgc2hhcmVkOiBjdXJyZW50Mi5zaGFyZWQsCiAgICAgICAgICAgIGNhbGxiYWNrczogY3VycmVudDIuY2FsbGJhY2tzCiAgICAgICAgICB9OwogICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLnVwZGF0ZVF1ZXVlID0gcXVldWU7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHdvcmtJblByb2dyZXNzMiA9IHF1ZXVlLmxhc3RCYXNlVXBkYXRlOwogICAgICAgIG51bGwgPT09IHdvcmtJblByb2dyZXNzMiA/IHF1ZXVlLmZpcnN0QmFzZVVwZGF0ZSA9IGNhcHR1cmVkVXBkYXRlIDogd29ya0luUHJvZ3Jlc3MyLm5leHQgPSBjYXB0dXJlZFVwZGF0ZTsKICAgICAgICBxdWV1ZS5sYXN0QmFzZVVwZGF0ZSA9IGNhcHR1cmVkVXBkYXRlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHN1c3BlbmRJZlVwZGF0ZVJlYWRGcm9tRW50YW5nbGVkQXN5bmNBY3Rpb24oKSB7CiAgICAgICAgaWYgKGRpZFJlYWRGcm9tRW50YW5nbGVkQXN5bmNBY3Rpb24pIHsKICAgICAgICAgIHZhciBlbnRhbmdsZWRBY3Rpb25UaGVuYWJsZSA9IGN1cnJlbnRFbnRhbmdsZWRBY3Rpb25UaGVuYWJsZTsKICAgICAgICAgIGlmIChudWxsICE9PSBlbnRhbmdsZWRBY3Rpb25UaGVuYWJsZSkgdGhyb3cgZW50YW5nbGVkQWN0aW9uVGhlbmFibGU7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIHByb2Nlc3NVcGRhdGVRdWV1ZSh3b3JrSW5Qcm9ncmVzczIsIHByb3BzLCBpbnN0YW5jZSRqc2NvbXAkMCwgcmVuZGVyTGFuZXMyKSB7CiAgICAgICAgZGlkUmVhZEZyb21FbnRhbmdsZWRBc3luY0FjdGlvbiA9IGZhbHNlOwogICAgICAgIHZhciBxdWV1ZSA9IHdvcmtJblByb2dyZXNzMi51cGRhdGVRdWV1ZTsKICAgICAgICBoYXNGb3JjZVVwZGF0ZSA9IGZhbHNlOwogICAgICAgIGN1cnJlbnRseVByb2Nlc3NpbmdRdWV1ZSA9IHF1ZXVlLnNoYXJlZDsKICAgICAgICB2YXIgZmlyc3RCYXNlVXBkYXRlID0gcXVldWUuZmlyc3RCYXNlVXBkYXRlLCBsYXN0QmFzZVVwZGF0ZSA9IHF1ZXVlLmxhc3RCYXNlVXBkYXRlLCBwZW5kaW5nUXVldWUgPSBxdWV1ZS5zaGFyZWQucGVuZGluZzsKICAgICAgICBpZiAobnVsbCAhPT0gcGVuZGluZ1F1ZXVlKSB7CiAgICAgICAgICBxdWV1ZS5zaGFyZWQucGVuZGluZyA9IG51bGw7CiAgICAgICAgICB2YXIgbGFzdFBlbmRpbmdVcGRhdGUgPSBwZW5kaW5nUXVldWUsIGZpcnN0UGVuZGluZ1VwZGF0ZSA9IGxhc3RQZW5kaW5nVXBkYXRlLm5leHQ7CiAgICAgICAgICBsYXN0UGVuZGluZ1VwZGF0ZS5uZXh0ID0gbnVsbDsKICAgICAgICAgIG51bGwgPT09IGxhc3RCYXNlVXBkYXRlID8gZmlyc3RCYXNlVXBkYXRlID0gZmlyc3RQZW5kaW5nVXBkYXRlIDogbGFzdEJhc2VVcGRhdGUubmV4dCA9IGZpcnN0UGVuZGluZ1VwZGF0ZTsKICAgICAgICAgIGxhc3RCYXNlVXBkYXRlID0gbGFzdFBlbmRpbmdVcGRhdGU7CiAgICAgICAgICB2YXIgY3VycmVudDIgPSB3b3JrSW5Qcm9ncmVzczIuYWx0ZXJuYXRlOwogICAgICAgICAgbnVsbCAhPT0gY3VycmVudDIgJiYgKGN1cnJlbnQyID0gY3VycmVudDIudXBkYXRlUXVldWUsIHBlbmRpbmdRdWV1ZSA9IGN1cnJlbnQyLmxhc3RCYXNlVXBkYXRlLCBwZW5kaW5nUXVldWUgIT09IGxhc3RCYXNlVXBkYXRlICYmIChudWxsID09PSBwZW5kaW5nUXVldWUgPyBjdXJyZW50Mi5maXJzdEJhc2VVcGRhdGUgPSBmaXJzdFBlbmRpbmdVcGRhdGUgOiBwZW5kaW5nUXVldWUubmV4dCA9IGZpcnN0UGVuZGluZ1VwZGF0ZSwgY3VycmVudDIubGFzdEJhc2VVcGRhdGUgPSBsYXN0UGVuZGluZ1VwZGF0ZSkpOwogICAgICAgIH0KICAgICAgICBpZiAobnVsbCAhPT0gZmlyc3RCYXNlVXBkYXRlKSB7CiAgICAgICAgICB2YXIgbmV3U3RhdGUgPSBxdWV1ZS5iYXNlU3RhdGU7CiAgICAgICAgICBsYXN0QmFzZVVwZGF0ZSA9IDA7CiAgICAgICAgICBjdXJyZW50MiA9IGZpcnN0UGVuZGluZ1VwZGF0ZSA9IGxhc3RQZW5kaW5nVXBkYXRlID0gbnVsbDsKICAgICAgICAgIHBlbmRpbmdRdWV1ZSA9IGZpcnN0QmFzZVVwZGF0ZTsKICAgICAgICAgIGRvIHsKICAgICAgICAgICAgdmFyIHVwZGF0ZUxhbmUgPSBwZW5kaW5nUXVldWUubGFuZSAmIC01MzY4NzA5MTMsIGlzSGlkZGVuVXBkYXRlID0gdXBkYXRlTGFuZSAhPT0gcGVuZGluZ1F1ZXVlLmxhbmU7CiAgICAgICAgICAgIGlmIChpc0hpZGRlblVwZGF0ZSA/ICh3b3JrSW5Qcm9ncmVzc1Jvb3RSZW5kZXJMYW5lcyAmIHVwZGF0ZUxhbmUpID09PSB1cGRhdGVMYW5lIDogKHJlbmRlckxhbmVzMiAmIHVwZGF0ZUxhbmUpID09PSB1cGRhdGVMYW5lKSB7CiAgICAgICAgICAgICAgMCAhPT0gdXBkYXRlTGFuZSAmJiB1cGRhdGVMYW5lID09PSBjdXJyZW50RW50YW5nbGVkTGFuZSAmJiAoZGlkUmVhZEZyb21FbnRhbmdsZWRBc3luY0FjdGlvbiA9IHRydWUpOwogICAgICAgICAgICAgIG51bGwgIT09IGN1cnJlbnQyICYmIChjdXJyZW50MiA9IGN1cnJlbnQyLm5leHQgPSB7CiAgICAgICAgICAgICAgICBsYW5lOiAwLAogICAgICAgICAgICAgICAgdGFnOiBwZW5kaW5nUXVldWUudGFnLAogICAgICAgICAgICAgICAgcGF5bG9hZDogcGVuZGluZ1F1ZXVlLnBheWxvYWQsCiAgICAgICAgICAgICAgICBjYWxsYmFjazogbnVsbCwKICAgICAgICAgICAgICAgIG5leHQ6IG51bGwKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBhOiB7CiAgICAgICAgICAgICAgICB1cGRhdGVMYW5lID0gd29ya0luUHJvZ3Jlc3MyOwogICAgICAgICAgICAgICAgdmFyIHBhcnRpYWxTdGF0ZSA9IHBlbmRpbmdRdWV1ZTsKICAgICAgICAgICAgICAgIHZhciBuZXh0UHJvcHMgPSBwcm9wcywgaW5zdGFuY2UgPSBpbnN0YW5jZSRqc2NvbXAkMDsKICAgICAgICAgICAgICAgIHN3aXRjaCAocGFydGlhbFN0YXRlLnRhZykgewogICAgICAgICAgICAgICAgICBjYXNlIFJlcGxhY2VTdGF0ZToKICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsU3RhdGUgPSBwYXJ0aWFsU3RhdGUucGF5bG9hZDsKICAgICAgICAgICAgICAgICAgICBpZiAoImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHBhcnRpYWxTdGF0ZSkgewogICAgICAgICAgICAgICAgICAgICAgaXNEaXNhbGxvd2VkQ29udGV4dFJlYWRJbkRFViA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dFN0YXRlID0gcGFydGlhbFN0YXRlLmNhbGwoCiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLAogICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFByb3BzCiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZUxhbmUubW9kZSAmIFN0cmljdExlZ2FjeU1vZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0SXNTdHJpY3RNb2RlRm9yRGV2dG9vbHModHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydGlhbFN0YXRlLmNhbGwoaW5zdGFuY2UsIG5ld1N0YXRlLCBuZXh0UHJvcHMpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHNldElzU3RyaWN0TW9kZUZvckRldnRvb2xzKGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgaXNEaXNhbGxvd2VkQ29udGV4dFJlYWRJbkRFViA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgbmV3U3RhdGUgPSBuZXh0U3RhdGU7CiAgICAgICAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZSA9IHBhcnRpYWxTdGF0ZTsKICAgICAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgICAgICBjYXNlIENhcHR1cmVVcGRhdGU6CiAgICAgICAgICAgICAgICAgICAgdXBkYXRlTGFuZS5mbGFncyA9IHVwZGF0ZUxhbmUuZmxhZ3MgJiAtNjU1MzcgfCAxMjg7CiAgICAgICAgICAgICAgICAgIGNhc2UgVXBkYXRlU3RhdGU6CiAgICAgICAgICAgICAgICAgICAgbmV4dFN0YXRlID0gcGFydGlhbFN0YXRlLnBheWxvYWQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgPT09IHR5cGVvZiBuZXh0U3RhdGUpIHsKICAgICAgICAgICAgICAgICAgICAgIGlzRGlzYWxsb3dlZENvbnRleHRSZWFkSW5ERVYgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgcGFydGlhbFN0YXRlID0gbmV4dFN0YXRlLmNhbGwoCiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLAogICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFByb3BzCiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZUxhbmUubW9kZSAmIFN0cmljdExlZ2FjeU1vZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0SXNTdHJpY3RNb2RlRm9yRGV2dG9vbHModHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFN0YXRlLmNhbGwoaW5zdGFuY2UsIG5ld1N0YXRlLCBuZXh0UHJvcHMpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHNldElzU3RyaWN0TW9kZUZvckRldnRvb2xzKGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgaXNEaXNhbGxvd2VkQ29udGV4dFJlYWRJbkRFViA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBwYXJ0aWFsU3RhdGUgPSBuZXh0U3RhdGU7CiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IHBhcnRpYWxTdGF0ZSB8fCB2b2lkIDAgPT09IHBhcnRpYWxTdGF0ZSkgYnJlYWsgYTsKICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZSA9IGFzc2lnbih7fSwgbmV3U3RhdGUsIHBhcnRpYWxTdGF0ZSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICAgICAgY2FzZSBGb3JjZVVwZGF0ZToKICAgICAgICAgICAgICAgICAgICBoYXNGb3JjZVVwZGF0ZSA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHVwZGF0ZUxhbmUgPSBwZW5kaW5nUXVldWUuY2FsbGJhY2s7CiAgICAgICAgICAgICAgbnVsbCAhPT0gdXBkYXRlTGFuZSAmJiAod29ya0luUHJvZ3Jlc3MyLmZsYWdzIHw9IDY0LCBpc0hpZGRlblVwZGF0ZSAmJiAod29ya0luUHJvZ3Jlc3MyLmZsYWdzIHw9IDgxOTIpLCBpc0hpZGRlblVwZGF0ZSA9IHF1ZXVlLmNhbGxiYWNrcywgbnVsbCA9PT0gaXNIaWRkZW5VcGRhdGUgPyBxdWV1ZS5jYWxsYmFja3MgPSBbdXBkYXRlTGFuZV0gOiBpc0hpZGRlblVwZGF0ZS5wdXNoKHVwZGF0ZUxhbmUpKTsKICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgaXNIaWRkZW5VcGRhdGUgPSB7CiAgICAgICAgICAgICAgICBsYW5lOiB1cGRhdGVMYW5lLAogICAgICAgICAgICAgICAgdGFnOiBwZW5kaW5nUXVldWUudGFnLAogICAgICAgICAgICAgICAgcGF5bG9hZDogcGVuZGluZ1F1ZXVlLnBheWxvYWQsCiAgICAgICAgICAgICAgICBjYWxsYmFjazogcGVuZGluZ1F1ZXVlLmNhbGxiYWNrLAogICAgICAgICAgICAgICAgbmV4dDogbnVsbAogICAgICAgICAgICAgIH0sIG51bGwgPT09IGN1cnJlbnQyID8gKGZpcnN0UGVuZGluZ1VwZGF0ZSA9IGN1cnJlbnQyID0gaXNIaWRkZW5VcGRhdGUsIGxhc3RQZW5kaW5nVXBkYXRlID0gbmV3U3RhdGUpIDogY3VycmVudDIgPSBjdXJyZW50Mi5uZXh0ID0gaXNIaWRkZW5VcGRhdGUsIGxhc3RCYXNlVXBkYXRlIHw9IHVwZGF0ZUxhbmU7CiAgICAgICAgICAgIHBlbmRpbmdRdWV1ZSA9IHBlbmRpbmdRdWV1ZS5uZXh0OwogICAgICAgICAgICBpZiAobnVsbCA9PT0gcGVuZGluZ1F1ZXVlKQogICAgICAgICAgICAgIGlmIChwZW5kaW5nUXVldWUgPSBxdWV1ZS5zaGFyZWQucGVuZGluZywgbnVsbCA9PT0gcGVuZGluZ1F1ZXVlKQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgaXNIaWRkZW5VcGRhdGUgPSBwZW5kaW5nUXVldWUsIHBlbmRpbmdRdWV1ZSA9IGlzSGlkZGVuVXBkYXRlLm5leHQsIGlzSGlkZGVuVXBkYXRlLm5leHQgPSBudWxsLCBxdWV1ZS5sYXN0QmFzZVVwZGF0ZSA9IGlzSGlkZGVuVXBkYXRlLCBxdWV1ZS5zaGFyZWQucGVuZGluZyA9IG51bGw7CiAgICAgICAgICB9IHdoaWxlICgxKTsKICAgICAgICAgIG51bGwgPT09IGN1cnJlbnQyICYmIChsYXN0UGVuZGluZ1VwZGF0ZSA9IG5ld1N0YXRlKTsKICAgICAgICAgIHF1ZXVlLmJhc2VTdGF0ZSA9IGxhc3RQZW5kaW5nVXBkYXRlOwogICAgICAgICAgcXVldWUuZmlyc3RCYXNlVXBkYXRlID0gZmlyc3RQZW5kaW5nVXBkYXRlOwogICAgICAgICAgcXVldWUubGFzdEJhc2VVcGRhdGUgPSBjdXJyZW50MjsKICAgICAgICAgIG51bGwgPT09IGZpcnN0QmFzZVVwZGF0ZSAmJiAocXVldWUuc2hhcmVkLmxhbmVzID0gMCk7CiAgICAgICAgICB3b3JrSW5Qcm9ncmVzc1Jvb3RTa2lwcGVkTGFuZXMgfD0gbGFzdEJhc2VVcGRhdGU7CiAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIubGFuZXMgPSBsYXN0QmFzZVVwZGF0ZTsKICAgICAgICAgIHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlID0gbmV3U3RhdGU7CiAgICAgICAgfQogICAgICAgIGN1cnJlbnRseVByb2Nlc3NpbmdRdWV1ZSA9IG51bGw7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY2FsbENhbGxiYWNrKGNhbGxiYWNrLCBjb250ZXh0KSB7CiAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT09IHR5cGVvZiBjYWxsYmFjaykKICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAiSW52YWxpZCBhcmd1bWVudCBwYXNzZWQgYXMgY2FsbGJhY2suIEV4cGVjdGVkIGEgZnVuY3Rpb24uIEluc3RlYWQgcmVjZWl2ZWQ6ICIgKyBjYWxsYmFjawogICAgICAgICAgKTsKICAgICAgICBjYWxsYmFjay5jYWxsKGNvbnRleHQpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNvbW1pdEhpZGRlbkNhbGxiYWNrcyh1cGRhdGVRdWV1ZSwgY29udGV4dCkgewogICAgICAgIHZhciBoaWRkZW5DYWxsYmFja3MgPSB1cGRhdGVRdWV1ZS5zaGFyZWQuaGlkZGVuQ2FsbGJhY2tzOwogICAgICAgIGlmIChudWxsICE9PSBoaWRkZW5DYWxsYmFja3MpCiAgICAgICAgICBmb3IgKHVwZGF0ZVF1ZXVlLnNoYXJlZC5oaWRkZW5DYWxsYmFja3MgPSBudWxsLCB1cGRhdGVRdWV1ZSA9IDA7IHVwZGF0ZVF1ZXVlIDwgaGlkZGVuQ2FsbGJhY2tzLmxlbmd0aDsgdXBkYXRlUXVldWUrKykKICAgICAgICAgICAgY2FsbENhbGxiYWNrKGhpZGRlbkNhbGxiYWNrc1t1cGRhdGVRdWV1ZV0sIGNvbnRleHQpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNvbW1pdENhbGxiYWNrcyh1cGRhdGVRdWV1ZSwgY29udGV4dCkgewogICAgICAgIHZhciBjYWxsYmFja3MgPSB1cGRhdGVRdWV1ZS5jYWxsYmFja3M7CiAgICAgICAgaWYgKG51bGwgIT09IGNhbGxiYWNrcykKICAgICAgICAgIGZvciAodXBkYXRlUXVldWUuY2FsbGJhY2tzID0gbnVsbCwgdXBkYXRlUXVldWUgPSAwOyB1cGRhdGVRdWV1ZSA8IGNhbGxiYWNrcy5sZW5ndGg7IHVwZGF0ZVF1ZXVlKyspCiAgICAgICAgICAgIGNhbGxDYWxsYmFjayhjYWxsYmFja3NbdXBkYXRlUXVldWVdLCBjb250ZXh0KTsKICAgICAgfQogICAgICBmdW5jdGlvbiBwdXNoSGlkZGVuQ29udGV4dChmaWJlciwgY29udGV4dCkgewogICAgICAgIHZhciBwcmV2RW50YW5nbGVkUmVuZGVyTGFuZXMgPSBlbnRhbmdsZWRSZW5kZXJMYW5lczsKICAgICAgICBwdXNoKHByZXZFbnRhbmdsZWRSZW5kZXJMYW5lc0N1cnNvciwgcHJldkVudGFuZ2xlZFJlbmRlckxhbmVzLCBmaWJlcik7CiAgICAgICAgcHVzaChjdXJyZW50VHJlZUhpZGRlblN0YWNrQ3Vyc29yLCBjb250ZXh0LCBmaWJlcik7CiAgICAgICAgZW50YW5nbGVkUmVuZGVyTGFuZXMgPSBwcmV2RW50YW5nbGVkUmVuZGVyTGFuZXMgfCBjb250ZXh0LmJhc2VMYW5lczsKICAgICAgfQogICAgICBmdW5jdGlvbiByZXVzZUhpZGRlbkNvbnRleHRPblN0YWNrKGZpYmVyKSB7CiAgICAgICAgcHVzaChwcmV2RW50YW5nbGVkUmVuZGVyTGFuZXNDdXJzb3IsIGVudGFuZ2xlZFJlbmRlckxhbmVzLCBmaWJlcik7CiAgICAgICAgcHVzaCgKICAgICAgICAgIGN1cnJlbnRUcmVlSGlkZGVuU3RhY2tDdXJzb3IsCiAgICAgICAgICBjdXJyZW50VHJlZUhpZGRlblN0YWNrQ3Vyc29yLmN1cnJlbnQsCiAgICAgICAgICBmaWJlcgogICAgICAgICk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcG9wSGlkZGVuQ29udGV4dChmaWJlcikgewogICAgICAgIGVudGFuZ2xlZFJlbmRlckxhbmVzID0gcHJldkVudGFuZ2xlZFJlbmRlckxhbmVzQ3Vyc29yLmN1cnJlbnQ7CiAgICAgICAgcG9wKGN1cnJlbnRUcmVlSGlkZGVuU3RhY2tDdXJzb3IsIGZpYmVyKTsKICAgICAgICBwb3AocHJldkVudGFuZ2xlZFJlbmRlckxhbmVzQ3Vyc29yLCBmaWJlcik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbW91bnRIb29rVHlwZXNEZXYoKSB7CiAgICAgICAgdmFyIGhvb2tOYW1lID0gY3VycmVudEhvb2tOYW1lSW5EZXY7CiAgICAgICAgbnVsbCA9PT0gaG9va1R5cGVzRGV2ID8gaG9va1R5cGVzRGV2ID0gW2hvb2tOYW1lXSA6IGhvb2tUeXBlc0Rldi5wdXNoKGhvb2tOYW1lKTsKICAgICAgfQogICAgICBmdW5jdGlvbiB1cGRhdGVIb29rVHlwZXNEZXYoKSB7CiAgICAgICAgdmFyIGhvb2tOYW1lID0gY3VycmVudEhvb2tOYW1lSW5EZXY7CiAgICAgICAgaWYgKG51bGwgIT09IGhvb2tUeXBlc0RldiAmJiAoaG9va1R5cGVzVXBkYXRlSW5kZXhEZXYrKywgaG9va1R5cGVzRGV2W2hvb2tUeXBlc1VwZGF0ZUluZGV4RGV2XSAhPT0gaG9va05hbWUpKSB7CiAgICAgICAgICB2YXIgY29tcG9uZW50TmFtZTIgPSBnZXRDb21wb25lbnROYW1lRnJvbUZpYmVyKGN1cnJlbnRseVJlbmRlcmluZ0ZpYmVyKTsKICAgICAgICAgIGlmICghZGlkV2FybkFib3V0TWlzbWF0Y2hlZEhvb2tzRm9yQ29tcG9uZW50Lmhhcyhjb21wb25lbnROYW1lMikgJiYgKGRpZFdhcm5BYm91dE1pc21hdGNoZWRIb29rc0ZvckNvbXBvbmVudC5hZGQoY29tcG9uZW50TmFtZTIpLCBudWxsICE9PSBob29rVHlwZXNEZXYpKSB7CiAgICAgICAgICAgIGZvciAodmFyIHRhYmxlID0gIiIsIGkgPSAwOyBpIDw9IGhvb2tUeXBlc1VwZGF0ZUluZGV4RGV2OyBpKyspIHsKICAgICAgICAgICAgICB2YXIgb2xkSG9va05hbWUgPSBob29rVHlwZXNEZXZbaV0sIG5ld0hvb2tOYW1lID0gaSA9PT0gaG9va1R5cGVzVXBkYXRlSW5kZXhEZXYgPyBob29rTmFtZSA6IG9sZEhvb2tOYW1lOwogICAgICAgICAgICAgIGZvciAob2xkSG9va05hbWUgPSBpICsgMSArICIuICIgKyBvbGRIb29rTmFtZTsgMzAgPiBvbGRIb29rTmFtZS5sZW5ndGg7ICkKICAgICAgICAgICAgICAgIG9sZEhvb2tOYW1lICs9ICIgIjsKICAgICAgICAgICAgICBvbGRIb29rTmFtZSArPSBuZXdIb29rTmFtZSArICJcbiI7CiAgICAgICAgICAgICAgdGFibGUgKz0gb2xkSG9va05hbWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAiUmVhY3QgaGFzIGRldGVjdGVkIGEgY2hhbmdlIGluIHRoZSBvcmRlciBvZiBIb29rcyBjYWxsZWQgYnkgJXMuIFRoaXMgd2lsbCBsZWFkIHRvIGJ1Z3MgYW5kIGVycm9ycyBpZiBub3QgZml4ZWQuIEZvciBtb3JlIGluZm9ybWF0aW9uLCByZWFkIHRoZSBSdWxlcyBvZiBIb29rczogaHR0cHM6Ly9yZWFjdC5kZXYvbGluay9ydWxlcy1vZi1ob29rc1xuXG4gICBQcmV2aW91cyByZW5kZXIgICAgICAgICAgICBOZXh0IHJlbmRlclxuICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4lcyAgIF5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXlxuIiwKICAgICAgICAgICAgICBjb21wb25lbnROYW1lMiwKICAgICAgICAgICAgICB0YWJsZQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBjaGVja0RlcHNBcmVBcnJheURldihkZXBzKSB7CiAgICAgICAgdm9pZCAwID09PSBkZXBzIHx8IG51bGwgPT09IGRlcHMgfHwgaXNBcnJheUltcGwoZGVwcykgfHwgY29uc29sZS5lcnJvcigKICAgICAgICAgICIlcyByZWNlaXZlZCBhIGZpbmFsIGFyZ3VtZW50IHRoYXQgaXMgbm90IGFuIGFycmF5IChpbnN0ZWFkLCByZWNlaXZlZCBgJXNgKS4gV2hlbiBzcGVjaWZpZWQsIHRoZSBmaW5hbCBhcmd1bWVudCBtdXN0IGJlIGFuIGFycmF5LiIsCiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiwKICAgICAgICAgIHR5cGVvZiBkZXBzCiAgICAgICAgKTsKICAgICAgfQogICAgICBmdW5jdGlvbiB3YXJuT25Vc2VGb3JtU3RhdGVJbkRldigpIHsKICAgICAgICB2YXIgY29tcG9uZW50TmFtZTIgPSBnZXRDb21wb25lbnROYW1lRnJvbUZpYmVyKGN1cnJlbnRseVJlbmRlcmluZ0ZpYmVyKTsKICAgICAgICBkaWRXYXJuQWJvdXRVc2VGb3JtU3RhdGUuaGFzKGNvbXBvbmVudE5hbWUyKSB8fCAoZGlkV2FybkFib3V0VXNlRm9ybVN0YXRlLmFkZChjb21wb25lbnROYW1lMiksIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiUmVhY3RET00udXNlRm9ybVN0YXRlIGhhcyBiZWVuIHJlbmFtZWQgdG8gUmVhY3QudXNlQWN0aW9uU3RhdGUuIFBsZWFzZSB1cGRhdGUgJXMgdG8gdXNlIFJlYWN0LnVzZUFjdGlvblN0YXRlLiIsCiAgICAgICAgICBjb21wb25lbnROYW1lMgogICAgICAgICkpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHRocm93SW52YWxpZEhvb2tFcnJvcigpIHsKICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICJJbnZhbGlkIGhvb2sgY2FsbC4gSG9va3MgY2FuIG9ubHkgYmUgY2FsbGVkIGluc2lkZSBvZiB0aGUgYm9keSBvZiBhIGZ1bmN0aW9uIGNvbXBvbmVudC4gVGhpcyBjb3VsZCBoYXBwZW4gZm9yIG9uZSBvZiB0aGUgZm9sbG93aW5nIHJlYXNvbnM6XG4xLiBZb3UgbWlnaHQgaGF2ZSBtaXNtYXRjaGluZyB2ZXJzaW9ucyBvZiBSZWFjdCBhbmQgdGhlIHJlbmRlcmVyIChzdWNoIGFzIFJlYWN0IERPTSlcbjIuIFlvdSBtaWdodCBiZSBicmVha2luZyB0aGUgUnVsZXMgb2YgSG9va3NcbjMuIFlvdSBtaWdodCBoYXZlIG1vcmUgdGhhbiBvbmUgY29weSBvZiBSZWFjdCBpbiB0aGUgc2FtZSBhcHBcblNlZSBodHRwczovL3JlYWN0LmRldi9saW5rL2ludmFsaWQtaG9vay1jYWxsIGZvciB0aXBzIGFib3V0IGhvdyB0byBkZWJ1ZyBhbmQgZml4IHRoaXMgcHJvYmxlbS4iCiAgICAgICAgKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBhcmVIb29rSW5wdXRzRXF1YWwobmV4dERlcHMsIHByZXZEZXBzKSB7CiAgICAgICAgaWYgKGlnbm9yZVByZXZpb3VzRGVwZW5kZW5jaWVzKSByZXR1cm4gZmFsc2U7CiAgICAgICAgaWYgKG51bGwgPT09IHByZXZEZXBzKQogICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICIlcyByZWNlaXZlZCBhIGZpbmFsIGFyZ3VtZW50IGR1cmluZyB0aGlzIHJlbmRlciwgYnV0IG5vdCBkdXJpbmcgdGhlIHByZXZpb3VzIHJlbmRlci4gRXZlbiB0aG91Z2ggdGhlIGZpbmFsIGFyZ3VtZW50IGlzIG9wdGlvbmFsLCBpdHMgdHlwZSBjYW5ub3QgY2hhbmdlIGJldHdlZW4gcmVuZGVycy4iLAogICAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldgogICAgICAgICAgKSwgZmFsc2U7CiAgICAgICAgbmV4dERlcHMubGVuZ3RoICE9PSBwcmV2RGVwcy5sZW5ndGggJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICJUaGUgZmluYWwgYXJndW1lbnQgcGFzc2VkIHRvICVzIGNoYW5nZWQgc2l6ZSBiZXR3ZWVuIHJlbmRlcnMuIFRoZSBvcmRlciBhbmQgc2l6ZSBvZiB0aGlzIGFycmF5IG11c3QgcmVtYWluIGNvbnN0YW50LlxuXG5QcmV2aW91czogJXNcbkluY29taW5nOiAlcyIsCiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiwKICAgICAgICAgICJbIiArIHByZXZEZXBzLmpvaW4oIiwgIikgKyAiXSIsCiAgICAgICAgICAiWyIgKyBuZXh0RGVwcy5qb2luKCIsICIpICsgIl0iCiAgICAgICAgKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByZXZEZXBzLmxlbmd0aCAmJiBpIDwgbmV4dERlcHMubGVuZ3RoOyBpKyspCiAgICAgICAgICBpZiAoIW9iamVjdElzKG5leHREZXBzW2ldLCBwcmV2RGVwc1tpXSkpIHJldHVybiBmYWxzZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICBmdW5jdGlvbiByZW5kZXJXaXRoSG9va3MoY3VycmVudDIsIHdvcmtJblByb2dyZXNzMiwgQ29tcG9uZW50LCBwcm9wcywgc2Vjb25kQXJnLCBuZXh0UmVuZGVyTGFuZXMpIHsKICAgICAgICByZW5kZXJMYW5lcyA9IG5leHRSZW5kZXJMYW5lczsKICAgICAgICBjdXJyZW50bHlSZW5kZXJpbmdGaWJlciA9IHdvcmtJblByb2dyZXNzMjsKICAgICAgICBob29rVHlwZXNEZXYgPSBudWxsICE9PSBjdXJyZW50MiA/IGN1cnJlbnQyLl9kZWJ1Z0hvb2tUeXBlcyA6IG51bGw7CiAgICAgICAgaG9va1R5cGVzVXBkYXRlSW5kZXhEZXYgPSAtMTsKICAgICAgICBpZ25vcmVQcmV2aW91c0RlcGVuZGVuY2llcyA9IG51bGwgIT09IGN1cnJlbnQyICYmIGN1cnJlbnQyLnR5cGUgIT09IHdvcmtJblByb2dyZXNzMi50eXBlOwogICAgICAgIGlmICgiW29iamVjdCBBc3luY0Z1bmN0aW9uXSIgPT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChDb21wb25lbnQpIHx8ICJbb2JqZWN0IEFzeW5jR2VuZXJhdG9yRnVuY3Rpb25dIiA9PT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKENvbXBvbmVudCkpCiAgICAgICAgICBuZXh0UmVuZGVyTGFuZXMgPSBnZXRDb21wb25lbnROYW1lRnJvbUZpYmVyKGN1cnJlbnRseVJlbmRlcmluZ0ZpYmVyKSwgZGlkV2FybkFib3V0QXN5bmNDbGllbnRDb21wb25lbnQuaGFzKG5leHRSZW5kZXJMYW5lcykgfHwgKGRpZFdhcm5BYm91dEFzeW5jQ2xpZW50Q29tcG9uZW50LmFkZChuZXh0UmVuZGVyTGFuZXMpLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiJXMgaXMgYW4gYXN5bmMgQ2xpZW50IENvbXBvbmVudC4gT25seSBTZXJ2ZXIgQ29tcG9uZW50cyBjYW4gYmUgYXN5bmMgYXQgdGhlIG1vbWVudC4gVGhpcyBlcnJvciBpcyBvZnRlbiBjYXVzZWQgYnkgYWNjaWRlbnRhbGx5IGFkZGluZyBgJ3VzZSBjbGllbnQnYCB0byBhIG1vZHVsZSB0aGF0IHdhcyBvcmlnaW5hbGx5IHdyaXR0ZW4gZm9yIHRoZSBzZXJ2ZXIuIiwKICAgICAgICAgICAgbnVsbCA9PT0gbmV4dFJlbmRlckxhbmVzID8gIkFuIHVua25vd24gQ29tcG9uZW50IiA6ICI8IiArIG5leHRSZW5kZXJMYW5lcyArICI+IgogICAgICAgICAgKSk7CiAgICAgICAgd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkU3RhdGUgPSBudWxsOwogICAgICAgIHdvcmtJblByb2dyZXNzMi51cGRhdGVRdWV1ZSA9IG51bGw7CiAgICAgICAgd29ya0luUHJvZ3Jlc3MyLmxhbmVzID0gMDsKICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gbnVsbCAhPT0gY3VycmVudDIgJiYgbnVsbCAhPT0gY3VycmVudDIubWVtb2l6ZWRTdGF0ZSA/IEhvb2tzRGlzcGF0Y2hlck9uVXBkYXRlSW5ERVYgOiBudWxsICE9PSBob29rVHlwZXNEZXYgPyBIb29rc0Rpc3BhdGNoZXJPbk1vdW50V2l0aEhvb2tUeXBlc0luREVWIDogSG9va3NEaXNwYXRjaGVyT25Nb3VudEluREVWOwogICAgICAgIHNob3VsZERvdWJsZUludm9rZVVzZXJGbnNJbkhvb2tzREVWID0gbmV4dFJlbmRlckxhbmVzID0gKHdvcmtJblByb2dyZXNzMi5tb2RlICYgU3RyaWN0TGVnYWN5TW9kZSkgIT09IE5vTW9kZTsKICAgICAgICB2YXIgY2hpbGRyZW4gPSBjYWxsQ29tcG9uZW50SW5ERVYoQ29tcG9uZW50LCBwcm9wcywgc2Vjb25kQXJnKTsKICAgICAgICBzaG91bGREb3VibGVJbnZva2VVc2VyRm5zSW5Ib29rc0RFViA9IGZhbHNlOwogICAgICAgIGRpZFNjaGVkdWxlUmVuZGVyUGhhc2VVcGRhdGVEdXJpbmdUaGlzUGFzcyAmJiAoY2hpbGRyZW4gPSByZW5kZXJXaXRoSG9va3NBZ2FpbigKICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgIENvbXBvbmVudCwKICAgICAgICAgIHByb3BzLAogICAgICAgICAgc2Vjb25kQXJnCiAgICAgICAgKSk7CiAgICAgICAgaWYgKG5leHRSZW5kZXJMYW5lcykgewogICAgICAgICAgc2V0SXNTdHJpY3RNb2RlRm9yRGV2dG9vbHModHJ1ZSk7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBjaGlsZHJlbiA9IHJlbmRlcldpdGhIb29rc0FnYWluKAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICBDb21wb25lbnQsCiAgICAgICAgICAgICAgcHJvcHMsCiAgICAgICAgICAgICAgc2Vjb25kQXJnCiAgICAgICAgICAgICk7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBzZXRJc1N0cmljdE1vZGVGb3JEZXZ0b29scyhmYWxzZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZpbmlzaFJlbmRlcmluZ0hvb2tzKGN1cnJlbnQyLCB3b3JrSW5Qcm9ncmVzczIpOwogICAgICAgIHJldHVybiBjaGlsZHJlbjsKICAgICAgfQogICAgICBmdW5jdGlvbiBmaW5pc2hSZW5kZXJpbmdIb29rcyhjdXJyZW50Miwgd29ya0luUHJvZ3Jlc3MyKSB7CiAgICAgICAgd29ya0luUHJvZ3Jlc3MyLl9kZWJ1Z0hvb2tUeXBlcyA9IGhvb2tUeXBlc0RldjsKICAgICAgICBudWxsID09PSB3b3JrSW5Qcm9ncmVzczIuZGVwZW5kZW5jaWVzID8gbnVsbCAhPT0gdGhlbmFibGVTdGF0ZSQxICYmICh3b3JrSW5Qcm9ncmVzczIuZGVwZW5kZW5jaWVzID0gewogICAgICAgICAgbGFuZXM6IDAsCiAgICAgICAgICBmaXJzdENvbnRleHQ6IG51bGwsCiAgICAgICAgICBfZGVidWdUaGVuYWJsZVN0YXRlOiB0aGVuYWJsZVN0YXRlJDEKICAgICAgICB9KSA6IHdvcmtJblByb2dyZXNzMi5kZXBlbmRlbmNpZXMuX2RlYnVnVGhlbmFibGVTdGF0ZSA9IHRoZW5hYmxlU3RhdGUkMTsKICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gQ29udGV4dE9ubHlEaXNwYXRjaGVyOwogICAgICAgIHZhciBkaWRSZW5kZXJUb29GZXdIb29rcyA9IG51bGwgIT09IGN1cnJlbnRIb29rICYmIG51bGwgIT09IGN1cnJlbnRIb29rLm5leHQ7CiAgICAgICAgcmVuZGVyTGFuZXMgPSAwOwogICAgICAgIGhvb2tUeXBlc0RldiA9IGN1cnJlbnRIb29rTmFtZUluRGV2ID0gd29ya0luUHJvZ3Jlc3NIb29rID0gY3VycmVudEhvb2sgPSBjdXJyZW50bHlSZW5kZXJpbmdGaWJlciA9IG51bGw7CiAgICAgICAgaG9va1R5cGVzVXBkYXRlSW5kZXhEZXYgPSAtMTsKICAgICAgICBudWxsICE9PSBjdXJyZW50MiAmJiAoY3VycmVudDIuZmxhZ3MgJiA2NTAxMTcxMikgIT09ICh3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgJiA2NTAxMTcxMikgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICJJbnRlcm5hbCBSZWFjdCBlcnJvcjogRXhwZWN0ZWQgc3RhdGljIGZsYWcgd2FzIG1pc3NpbmcuIFBsZWFzZSBub3RpZnkgdGhlIFJlYWN0IHRlYW0uIgogICAgICAgICk7CiAgICAgICAgZGlkU2NoZWR1bGVSZW5kZXJQaGFzZVVwZGF0ZSA9IGZhbHNlOwogICAgICAgIHRoZW5hYmxlSW5kZXhDb3VudGVyJDEgPSAwOwogICAgICAgIHRoZW5hYmxlU3RhdGUkMSA9IG51bGw7CiAgICAgICAgaWYgKGRpZFJlbmRlclRvb0Zld0hvb2tzKQogICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICJSZW5kZXJlZCBmZXdlciBob29rcyB0aGFuIGV4cGVjdGVkLiBUaGlzIG1heSBiZSBjYXVzZWQgYnkgYW4gYWNjaWRlbnRhbCBlYXJseSByZXR1cm4gc3RhdGVtZW50LiIKICAgICAgICAgICk7CiAgICAgICAgbnVsbCA9PT0gY3VycmVudDIgfHwgZGlkUmVjZWl2ZVVwZGF0ZSB8fCAoY3VycmVudDIgPSBjdXJyZW50Mi5kZXBlbmRlbmNpZXMsIG51bGwgIT09IGN1cnJlbnQyICYmIGNoZWNrSWZDb250ZXh0Q2hhbmdlZChjdXJyZW50MikgJiYgKGRpZFJlY2VpdmVVcGRhdGUgPSB0cnVlKSk7CiAgICAgICAgbmVlZHNUb1Jlc2V0U3VzcGVuZGVkVGhlbmFibGVERVYgPyAobmVlZHNUb1Jlc2V0U3VzcGVuZGVkVGhlbmFibGVERVYgPSBmYWxzZSwgY3VycmVudDIgPSB0cnVlKSA6IGN1cnJlbnQyID0gZmFsc2U7CiAgICAgICAgY3VycmVudDIgJiYgKHdvcmtJblByb2dyZXNzMiA9IGdldENvbXBvbmVudE5hbWVGcm9tRmliZXIod29ya0luUHJvZ3Jlc3MyKSB8fCAiVW5rbm93biIsIGRpZFdhcm5BYm91dFVzZVdyYXBwZWRJblRyeUNhdGNoLmhhcyh3b3JrSW5Qcm9ncmVzczIpIHx8IGRpZFdhcm5BYm91dEFzeW5jQ2xpZW50Q29tcG9uZW50Lmhhcyh3b3JrSW5Qcm9ncmVzczIpIHx8IChkaWRXYXJuQWJvdXRVc2VXcmFwcGVkSW5UcnlDYXRjaC5hZGQod29ya0luUHJvZ3Jlc3MyKSwgY29uc29sZS5lcnJvcigKICAgICAgICAgICJgdXNlYCB3YXMgY2FsbGVkIGZyb20gaW5zaWRlIGEgdHJ5L2NhdGNoIGJsb2NrLiBUaGlzIGlzIG5vdCBhbGxvd2VkIGFuZCBjYW4gbGVhZCB0byB1bmV4cGVjdGVkIGJlaGF2aW9yLiBUbyBoYW5kbGUgZXJyb3JzIHRyaWdnZXJlZCBieSBgdXNlYCwgd3JhcCB5b3VyIGNvbXBvbmVudCBpbiBhIGVycm9yIGJvdW5kYXJ5LiIKICAgICAgICApKSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmVuZGVyV2l0aEhvb2tzQWdhaW4od29ya0luUHJvZ3Jlc3MyLCBDb21wb25lbnQsIHByb3BzLCBzZWNvbmRBcmcpIHsKICAgICAgICBjdXJyZW50bHlSZW5kZXJpbmdGaWJlciA9IHdvcmtJblByb2dyZXNzMjsKICAgICAgICB2YXIgbnVtYmVyT2ZSZVJlbmRlcnMgPSAwOwogICAgICAgIGRvIHsKICAgICAgICAgIGRpZFNjaGVkdWxlUmVuZGVyUGhhc2VVcGRhdGVEdXJpbmdUaGlzUGFzcyAmJiAodGhlbmFibGVTdGF0ZSQxID0gbnVsbCk7CiAgICAgICAgICB0aGVuYWJsZUluZGV4Q291bnRlciQxID0gMDsKICAgICAgICAgIGRpZFNjaGVkdWxlUmVuZGVyUGhhc2VVcGRhdGVEdXJpbmdUaGlzUGFzcyA9IGZhbHNlOwogICAgICAgICAgaWYgKG51bWJlck9mUmVSZW5kZXJzID49IFJFX1JFTkRFUl9MSU1JVCkKICAgICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICAgIlRvbyBtYW55IHJlLXJlbmRlcnMuIFJlYWN0IGxpbWl0cyB0aGUgbnVtYmVyIG9mIHJlbmRlcnMgdG8gcHJldmVudCBhbiBpbmZpbml0ZSBsb29wLiIKICAgICAgICAgICAgKTsKICAgICAgICAgIG51bWJlck9mUmVSZW5kZXJzICs9IDE7CiAgICAgICAgICBpZ25vcmVQcmV2aW91c0RlcGVuZGVuY2llcyA9IGZhbHNlOwogICAgICAgICAgd29ya0luUHJvZ3Jlc3NIb29rID0gY3VycmVudEhvb2sgPSBudWxsOwogICAgICAgICAgaWYgKG51bGwgIT0gd29ya0luUHJvZ3Jlc3MyLnVwZGF0ZVF1ZXVlKSB7CiAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IHdvcmtJblByb2dyZXNzMi51cGRhdGVRdWV1ZTsKICAgICAgICAgICAgY2hpbGRyZW4ubGFzdEVmZmVjdCA9IG51bGw7CiAgICAgICAgICAgIGNoaWxkcmVuLmV2ZW50cyA9IG51bGw7CiAgICAgICAgICAgIGNoaWxkcmVuLnN0b3JlcyA9IG51bGw7CiAgICAgICAgICAgIG51bGwgIT0gY2hpbGRyZW4ubWVtb0NhY2hlICYmIChjaGlsZHJlbi5tZW1vQ2FjaGUuaW5kZXggPSAwKTsKICAgICAgICAgIH0KICAgICAgICAgIGhvb2tUeXBlc1VwZGF0ZUluZGV4RGV2ID0gLTE7CiAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gSG9va3NEaXNwYXRjaGVyT25SZXJlbmRlckluREVWOwogICAgICAgICAgY2hpbGRyZW4gPSBjYWxsQ29tcG9uZW50SW5ERVYoQ29tcG9uZW50LCBwcm9wcywgc2Vjb25kQXJnKTsKICAgICAgICB9IHdoaWxlIChkaWRTY2hlZHVsZVJlbmRlclBoYXNlVXBkYXRlRHVyaW5nVGhpc1Bhc3MpOwogICAgICAgIHJldHVybiBjaGlsZHJlbjsKICAgICAgfQogICAgICBmdW5jdGlvbiBUcmFuc2l0aW9uQXdhcmVIb3N0Q29tcG9uZW50KCkgewogICAgICAgIHZhciBkaXNwYXRjaGVyID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuSCwgbWF5YmVUaGVuYWJsZSA9IGRpc3BhdGNoZXIudXNlU3RhdGUoKVswXTsKICAgICAgICBtYXliZVRoZW5hYmxlID0gImZ1bmN0aW9uIiA9PT0gdHlwZW9mIG1heWJlVGhlbmFibGUudGhlbiA/IHVzZVRoZW5hYmxlKG1heWJlVGhlbmFibGUpIDogbWF5YmVUaGVuYWJsZTsKICAgICAgICBkaXNwYXRjaGVyID0gZGlzcGF0Y2hlci51c2VTdGF0ZSgpWzBdOwogICAgICAgIChudWxsICE9PSBjdXJyZW50SG9vayA/IGN1cnJlbnRIb29rLm1lbW9pemVkU3RhdGUgOiBudWxsKSAhPT0gZGlzcGF0Y2hlciAmJiAoY3VycmVudGx5UmVuZGVyaW5nRmliZXIuZmxhZ3MgfD0gMTAyNCk7CiAgICAgICAgcmV0dXJuIG1heWJlVGhlbmFibGU7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY2hlY2tEaWRSZW5kZXJJZEhvb2soKSB7CiAgICAgICAgdmFyIGRpZFJlbmRlcklkSG9vayA9IDAgIT09IGxvY2FsSWRDb3VudGVyOwogICAgICAgIGxvY2FsSWRDb3VudGVyID0gMDsKICAgICAgICByZXR1cm4gZGlkUmVuZGVySWRIb29rOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGJhaWxvdXRIb29rcyhjdXJyZW50Miwgd29ya0luUHJvZ3Jlc3MyLCBsYW5lcykgewogICAgICAgIHdvcmtJblByb2dyZXNzMi51cGRhdGVRdWV1ZSA9IGN1cnJlbnQyLnVwZGF0ZVF1ZXVlOwogICAgICAgIHdvcmtJblByb2dyZXNzMi5mbGFncyA9ICh3b3JrSW5Qcm9ncmVzczIubW9kZSAmIFN0cmljdEVmZmVjdHNNb2RlKSAhPT0gTm9Nb2RlID8gd29ya0luUHJvZ3Jlc3MyLmZsYWdzICYgLTQwMjY1NTIzNyA6IHdvcmtJblByb2dyZXNzMi5mbGFncyAmIC0yMDUzOwogICAgICAgIGN1cnJlbnQyLmxhbmVzICY9IH5sYW5lczsKICAgICAgfQogICAgICBmdW5jdGlvbiByZXNldEhvb2tzT25VbndpbmQod29ya0luUHJvZ3Jlc3MyKSB7CiAgICAgICAgaWYgKGRpZFNjaGVkdWxlUmVuZGVyUGhhc2VVcGRhdGUpIHsKICAgICAgICAgIGZvciAod29ya0luUHJvZ3Jlc3MyID0gd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkU3RhdGU7IG51bGwgIT09IHdvcmtJblByb2dyZXNzMjsgKSB7CiAgICAgICAgICAgIHZhciBxdWV1ZSA9IHdvcmtJblByb2dyZXNzMi5xdWV1ZTsKICAgICAgICAgICAgbnVsbCAhPT0gcXVldWUgJiYgKHF1ZXVlLnBlbmRpbmcgPSBudWxsKTsKICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyID0gd29ya0luUHJvZ3Jlc3MyLm5leHQ7CiAgICAgICAgICB9CiAgICAgICAgICBkaWRTY2hlZHVsZVJlbmRlclBoYXNlVXBkYXRlID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHJlbmRlckxhbmVzID0gMDsKICAgICAgICBob29rVHlwZXNEZXYgPSB3b3JrSW5Qcm9ncmVzc0hvb2sgPSBjdXJyZW50SG9vayA9IGN1cnJlbnRseVJlbmRlcmluZ0ZpYmVyID0gbnVsbDsKICAgICAgICBob29rVHlwZXNVcGRhdGVJbmRleERldiA9IC0xOwogICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gbnVsbDsKICAgICAgICBkaWRTY2hlZHVsZVJlbmRlclBoYXNlVXBkYXRlRHVyaW5nVGhpc1Bhc3MgPSBmYWxzZTsKICAgICAgICB0aGVuYWJsZUluZGV4Q291bnRlciQxID0gbG9jYWxJZENvdW50ZXIgPSAwOwogICAgICAgIHRoZW5hYmxlU3RhdGUkMSA9IG51bGw7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbW91bnRXb3JrSW5Qcm9ncmVzc0hvb2soKSB7CiAgICAgICAgdmFyIGhvb2sgPSB7CiAgICAgICAgICBtZW1vaXplZFN0YXRlOiBudWxsLAogICAgICAgICAgYmFzZVN0YXRlOiBudWxsLAogICAgICAgICAgYmFzZVF1ZXVlOiBudWxsLAogICAgICAgICAgcXVldWU6IG51bGwsCiAgICAgICAgICBuZXh0OiBudWxsCiAgICAgICAgfTsKICAgICAgICBudWxsID09PSB3b3JrSW5Qcm9ncmVzc0hvb2sgPyBjdXJyZW50bHlSZW5kZXJpbmdGaWJlci5tZW1vaXplZFN0YXRlID0gd29ya0luUHJvZ3Jlc3NIb29rID0gaG9vayA6IHdvcmtJblByb2dyZXNzSG9vayA9IHdvcmtJblByb2dyZXNzSG9vay5uZXh0ID0gaG9vazsKICAgICAgICByZXR1cm4gd29ya0luUHJvZ3Jlc3NIb29rOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVdvcmtJblByb2dyZXNzSG9vaygpIHsKICAgICAgICBpZiAobnVsbCA9PT0gY3VycmVudEhvb2spIHsKICAgICAgICAgIHZhciBuZXh0Q3VycmVudEhvb2sgPSBjdXJyZW50bHlSZW5kZXJpbmdGaWJlci5hbHRlcm5hdGU7CiAgICAgICAgICBuZXh0Q3VycmVudEhvb2sgPSBudWxsICE9PSBuZXh0Q3VycmVudEhvb2sgPyBuZXh0Q3VycmVudEhvb2subWVtb2l6ZWRTdGF0ZSA6IG51bGw7CiAgICAgICAgfSBlbHNlIG5leHRDdXJyZW50SG9vayA9IGN1cnJlbnRIb29rLm5leHQ7CiAgICAgICAgdmFyIG5leHRXb3JrSW5Qcm9ncmVzc0hvb2sgPSBudWxsID09PSB3b3JrSW5Qcm9ncmVzc0hvb2sgPyBjdXJyZW50bHlSZW5kZXJpbmdGaWJlci5tZW1vaXplZFN0YXRlIDogd29ya0luUHJvZ3Jlc3NIb29rLm5leHQ7CiAgICAgICAgaWYgKG51bGwgIT09IG5leHRXb3JrSW5Qcm9ncmVzc0hvb2spCiAgICAgICAgICB3b3JrSW5Qcm9ncmVzc0hvb2sgPSBuZXh0V29ya0luUHJvZ3Jlc3NIb29rLCBjdXJyZW50SG9vayA9IG5leHRDdXJyZW50SG9vazsKICAgICAgICBlbHNlIHsKICAgICAgICAgIGlmIChudWxsID09PSBuZXh0Q3VycmVudEhvb2spIHsKICAgICAgICAgICAgaWYgKG51bGwgPT09IGN1cnJlbnRseVJlbmRlcmluZ0ZpYmVyLmFsdGVybmF0ZSkKICAgICAgICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICAgICAgICJVcGRhdGUgaG9vayBjYWxsZWQgb24gaW5pdGlhbCByZW5kZXIuIFRoaXMgaXMgbGlrZWx5IGEgYnVnIGluIFJlYWN0LiBQbGVhc2UgZmlsZSBhbiBpc3N1ZS4iCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgdGhyb3cgRXJyb3IoIlJlbmRlcmVkIG1vcmUgaG9va3MgdGhhbiBkdXJpbmcgdGhlIHByZXZpb3VzIHJlbmRlci4iKTsKICAgICAgICAgIH0KICAgICAgICAgIGN1cnJlbnRIb29rID0gbmV4dEN1cnJlbnRIb29rOwogICAgICAgICAgbmV4dEN1cnJlbnRIb29rID0gewogICAgICAgICAgICBtZW1vaXplZFN0YXRlOiBjdXJyZW50SG9vay5tZW1vaXplZFN0YXRlLAogICAgICAgICAgICBiYXNlU3RhdGU6IGN1cnJlbnRIb29rLmJhc2VTdGF0ZSwKICAgICAgICAgICAgYmFzZVF1ZXVlOiBjdXJyZW50SG9vay5iYXNlUXVldWUsCiAgICAgICAgICAgIHF1ZXVlOiBjdXJyZW50SG9vay5xdWV1ZSwKICAgICAgICAgICAgbmV4dDogbnVsbAogICAgICAgICAgfTsKICAgICAgICAgIG51bGwgPT09IHdvcmtJblByb2dyZXNzSG9vayA/IGN1cnJlbnRseVJlbmRlcmluZ0ZpYmVyLm1lbW9pemVkU3RhdGUgPSB3b3JrSW5Qcm9ncmVzc0hvb2sgPSBuZXh0Q3VycmVudEhvb2sgOiB3b3JrSW5Qcm9ncmVzc0hvb2sgPSB3b3JrSW5Qcm9ncmVzc0hvb2submV4dCA9IG5leHRDdXJyZW50SG9vazsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHdvcmtJblByb2dyZXNzSG9vazsKICAgICAgfQogICAgICBmdW5jdGlvbiBjcmVhdGVGdW5jdGlvbkNvbXBvbmVudFVwZGF0ZVF1ZXVlKCkgewogICAgICAgIHJldHVybiB7IGxhc3RFZmZlY3Q6IG51bGwsIGV2ZW50czogbnVsbCwgc3RvcmVzOiBudWxsLCBtZW1vQ2FjaGU6IG51bGwgfTsKICAgICAgfQogICAgICBmdW5jdGlvbiB1c2VUaGVuYWJsZSh0aGVuYWJsZSkgewogICAgICAgIHZhciBpbmRleCA9IHRoZW5hYmxlSW5kZXhDb3VudGVyJDE7CiAgICAgICAgdGhlbmFibGVJbmRleENvdW50ZXIkMSArPSAxOwogICAgICAgIG51bGwgPT09IHRoZW5hYmxlU3RhdGUkMSAmJiAodGhlbmFibGVTdGF0ZSQxID0gY3JlYXRlVGhlbmFibGVTdGF0ZSgpKTsKICAgICAgICB0aGVuYWJsZSA9IHRyYWNrVXNlZFRoZW5hYmxlKHRoZW5hYmxlU3RhdGUkMSwgdGhlbmFibGUsIGluZGV4KTsKICAgICAgICBpbmRleCA9IGN1cnJlbnRseVJlbmRlcmluZ0ZpYmVyOwogICAgICAgIG51bGwgPT09IChudWxsID09PSB3b3JrSW5Qcm9ncmVzc0hvb2sgPyBpbmRleC5tZW1vaXplZFN0YXRlIDogd29ya0luUHJvZ3Jlc3NIb29rLm5leHQpICYmIChpbmRleCA9IGluZGV4LmFsdGVybmF0ZSwgUmVhY3RTaGFyZWRJbnRlcm5hbHMuSCA9IG51bGwgIT09IGluZGV4ICYmIG51bGwgIT09IGluZGV4Lm1lbW9pemVkU3RhdGUgPyBIb29rc0Rpc3BhdGNoZXJPblVwZGF0ZUluREVWIDogSG9va3NEaXNwYXRjaGVyT25Nb3VudEluREVWKTsKICAgICAgICByZXR1cm4gdGhlbmFibGU7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdXNlKHVzYWJsZSkgewogICAgICAgIGlmIChudWxsICE9PSB1c2FibGUgJiYgIm9iamVjdCIgPT09IHR5cGVvZiB1c2FibGUpIHsKICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09PSB0eXBlb2YgdXNhYmxlLnRoZW4pIHJldHVybiB1c2VUaGVuYWJsZSh1c2FibGUpOwogICAgICAgICAgaWYgKHVzYWJsZS4kJHR5cGVvZiA9PT0gUkVBQ1RfQ09OVEVYVF9UWVBFKSByZXR1cm4gcmVhZENvbnRleHQodXNhYmxlKTsKICAgICAgICB9CiAgICAgICAgdGhyb3cgRXJyb3IoIkFuIHVuc3VwcG9ydGVkIHR5cGUgd2FzIHBhc3NlZCB0byB1c2UoKTogIiArIFN0cmluZyh1c2FibGUpKTsKICAgICAgfQogICAgICBmdW5jdGlvbiB1c2VNZW1vQ2FjaGUoc2l6ZSkgewogICAgICAgIHZhciBtZW1vQ2FjaGUgPSBudWxsLCB1cGRhdGVRdWV1ZSA9IGN1cnJlbnRseVJlbmRlcmluZ0ZpYmVyLnVwZGF0ZVF1ZXVlOwogICAgICAgIG51bGwgIT09IHVwZGF0ZVF1ZXVlICYmIChtZW1vQ2FjaGUgPSB1cGRhdGVRdWV1ZS5tZW1vQ2FjaGUpOwogICAgICAgIGlmIChudWxsID09IG1lbW9DYWNoZSkgewogICAgICAgICAgdmFyIGN1cnJlbnQyID0gY3VycmVudGx5UmVuZGVyaW5nRmliZXIuYWx0ZXJuYXRlOwogICAgICAgICAgbnVsbCAhPT0gY3VycmVudDIgJiYgKGN1cnJlbnQyID0gY3VycmVudDIudXBkYXRlUXVldWUsIG51bGwgIT09IGN1cnJlbnQyICYmIChjdXJyZW50MiA9IGN1cnJlbnQyLm1lbW9DYWNoZSwgbnVsbCAhPSBjdXJyZW50MiAmJiAobWVtb0NhY2hlID0gewogICAgICAgICAgICBkYXRhOiBjdXJyZW50Mi5kYXRhLm1hcChmdW5jdGlvbihhcnJheSkgewogICAgICAgICAgICAgIHJldHVybiBhcnJheS5zbGljZSgpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgaW5kZXg6IDAKICAgICAgICAgIH0pKSk7CiAgICAgICAgfQogICAgICAgIG51bGwgPT0gbWVtb0NhY2hlICYmIChtZW1vQ2FjaGUgPSB7IGRhdGE6IFtdLCBpbmRleDogMCB9KTsKICAgICAgICBudWxsID09PSB1cGRhdGVRdWV1ZSAmJiAodXBkYXRlUXVldWUgPSBjcmVhdGVGdW5jdGlvbkNvbXBvbmVudFVwZGF0ZVF1ZXVlKCksIGN1cnJlbnRseVJlbmRlcmluZ0ZpYmVyLnVwZGF0ZVF1ZXVlID0gdXBkYXRlUXVldWUpOwogICAgICAgIHVwZGF0ZVF1ZXVlLm1lbW9DYWNoZSA9IG1lbW9DYWNoZTsKICAgICAgICB1cGRhdGVRdWV1ZSA9IG1lbW9DYWNoZS5kYXRhW21lbW9DYWNoZS5pbmRleF07CiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdXBkYXRlUXVldWUgfHwgaWdub3JlUHJldmlvdXNEZXBlbmRlbmNpZXMpCiAgICAgICAgICBmb3IgKHVwZGF0ZVF1ZXVlID0gbWVtb0NhY2hlLmRhdGFbbWVtb0NhY2hlLmluZGV4XSA9IEFycmF5KHNpemUpLCBjdXJyZW50MiA9IDA7IGN1cnJlbnQyIDwgc2l6ZTsgY3VycmVudDIrKykKICAgICAgICAgICAgdXBkYXRlUXVldWVbY3VycmVudDJdID0gUkVBQ1RfTUVNT19DQUNIRV9TRU5USU5FTDsKICAgICAgICBlbHNlCiAgICAgICAgICB1cGRhdGVRdWV1ZS5sZW5ndGggIT09IHNpemUgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIkV4cGVjdGVkIGEgY29uc3RhbnQgc2l6ZSBhcmd1bWVudCBmb3IgZWFjaCBpbnZvY2F0aW9uIG9mIHVzZU1lbW9DYWNoZS4gVGhlIHByZXZpb3VzIGNhY2hlIHdhcyBhbGxvY2F0ZWQgd2l0aCBzaXplICVzIGJ1dCBzaXplICVzIHdhcyByZXF1ZXN0ZWQuIiwKICAgICAgICAgICAgdXBkYXRlUXVldWUubGVuZ3RoLAogICAgICAgICAgICBzaXplCiAgICAgICAgICApOwogICAgICAgIG1lbW9DYWNoZS5pbmRleCsrOwogICAgICAgIHJldHVybiB1cGRhdGVRdWV1ZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBiYXNpY1N0YXRlUmVkdWNlcihzdGF0ZSwgYWN0aW9uKSB7CiAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT09IHR5cGVvZiBhY3Rpb24gPyBhY3Rpb24oc3RhdGUpIDogYWN0aW9uOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1vdW50UmVkdWNlcihyZWR1Y2VyLCBpbml0aWFsQXJnLCBpbml0KSB7CiAgICAgICAgdmFyIGhvb2sgPSBtb3VudFdvcmtJblByb2dyZXNzSG9vaygpOwogICAgICAgIGlmICh2b2lkIDAgIT09IGluaXQpIHsKICAgICAgICAgIHZhciBpbml0aWFsU3RhdGUgPSBpbml0KGluaXRpYWxBcmcpOwogICAgICAgICAgaWYgKHNob3VsZERvdWJsZUludm9rZVVzZXJGbnNJbkhvb2tzREVWKSB7CiAgICAgICAgICAgIHNldElzU3RyaWN0TW9kZUZvckRldnRvb2xzKHRydWUpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGluaXQoaW5pdGlhbEFyZyk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgc2V0SXNTdHJpY3RNb2RlRm9yRGV2dG9vbHMoZmFsc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGluaXRpYWxTdGF0ZSA9IGluaXRpYWxBcmc7CiAgICAgICAgaG9vay5tZW1vaXplZFN0YXRlID0gaG9vay5iYXNlU3RhdGUgPSBpbml0aWFsU3RhdGU7CiAgICAgICAgcmVkdWNlciA9IHsKICAgICAgICAgIHBlbmRpbmc6IG51bGwsCiAgICAgICAgICBsYW5lczogMCwKICAgICAgICAgIGRpc3BhdGNoOiBudWxsLAogICAgICAgICAgbGFzdFJlbmRlcmVkUmVkdWNlcjogcmVkdWNlciwKICAgICAgICAgIGxhc3RSZW5kZXJlZFN0YXRlOiBpbml0aWFsU3RhdGUKICAgICAgICB9OwogICAgICAgIGhvb2sucXVldWUgPSByZWR1Y2VyOwogICAgICAgIHJlZHVjZXIgPSByZWR1Y2VyLmRpc3BhdGNoID0gZGlzcGF0Y2hSZWR1Y2VyQWN0aW9uLmJpbmQoCiAgICAgICAgICBudWxsLAogICAgICAgICAgY3VycmVudGx5UmVuZGVyaW5nRmliZXIsCiAgICAgICAgICByZWR1Y2VyCiAgICAgICAgKTsKICAgICAgICByZXR1cm4gW2hvb2subWVtb2l6ZWRTdGF0ZSwgcmVkdWNlcl07CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdXBkYXRlUmVkdWNlcihyZWR1Y2VyKSB7CiAgICAgICAgdmFyIGhvb2sgPSB1cGRhdGVXb3JrSW5Qcm9ncmVzc0hvb2soKTsKICAgICAgICByZXR1cm4gdXBkYXRlUmVkdWNlckltcGwoaG9vaywgY3VycmVudEhvb2ssIHJlZHVjZXIpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVJlZHVjZXJJbXBsKGhvb2ssIGN1cnJlbnQyLCByZWR1Y2VyKSB7CiAgICAgICAgdmFyIHF1ZXVlID0gaG9vay5xdWV1ZTsKICAgICAgICBpZiAobnVsbCA9PT0gcXVldWUpCiAgICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICAgIlNob3VsZCBoYXZlIGEgcXVldWUuIFlvdSBhcmUgbGlrZWx5IGNhbGxpbmcgSG9va3MgY29uZGl0aW9uYWxseSwgd2hpY2ggaXMgbm90IGFsbG93ZWQuIChodHRwczovL3JlYWN0LmRldi9saW5rL2ludmFsaWQtaG9vay1jYWxsKSIKICAgICAgICAgICk7CiAgICAgICAgcXVldWUubGFzdFJlbmRlcmVkUmVkdWNlciA9IHJlZHVjZXI7CiAgICAgICAgdmFyIGJhc2VRdWV1ZSA9IGhvb2suYmFzZVF1ZXVlLCBwZW5kaW5nUXVldWUgPSBxdWV1ZS5wZW5kaW5nOwogICAgICAgIGlmIChudWxsICE9PSBwZW5kaW5nUXVldWUpIHsKICAgICAgICAgIGlmIChudWxsICE9PSBiYXNlUXVldWUpIHsKICAgICAgICAgICAgdmFyIGJhc2VGaXJzdCA9IGJhc2VRdWV1ZS5uZXh0OwogICAgICAgICAgICBiYXNlUXVldWUubmV4dCA9IHBlbmRpbmdRdWV1ZS5uZXh0OwogICAgICAgICAgICBwZW5kaW5nUXVldWUubmV4dCA9IGJhc2VGaXJzdDsKICAgICAgICAgIH0KICAgICAgICAgIGN1cnJlbnQyLmJhc2VRdWV1ZSAhPT0gYmFzZVF1ZXVlICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICJJbnRlcm5hbCBlcnJvcjogRXhwZWN0ZWQgd29yay1pbi1wcm9ncmVzcyBxdWV1ZSB0byBiZSBhIGNsb25lLiBUaGlzIGlzIGEgYnVnIGluIFJlYWN0LiIKICAgICAgICAgICk7CiAgICAgICAgICBjdXJyZW50Mi5iYXNlUXVldWUgPSBiYXNlUXVldWUgPSBwZW5kaW5nUXVldWU7CiAgICAgICAgICBxdWV1ZS5wZW5kaW5nID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgcGVuZGluZ1F1ZXVlID0gaG9vay5iYXNlU3RhdGU7CiAgICAgICAgaWYgKG51bGwgPT09IGJhc2VRdWV1ZSkgaG9vay5tZW1vaXplZFN0YXRlID0gcGVuZGluZ1F1ZXVlOwogICAgICAgIGVsc2UgewogICAgICAgICAgY3VycmVudDIgPSBiYXNlUXVldWUubmV4dDsKICAgICAgICAgIHZhciBuZXdCYXNlUXVldWVGaXJzdCA9IGJhc2VGaXJzdCA9IG51bGwsIG5ld0Jhc2VRdWV1ZUxhc3QgPSBudWxsLCB1cGRhdGUgPSBjdXJyZW50MiwgZGlkUmVhZEZyb21FbnRhbmdsZWRBc3luY0FjdGlvbjIgPSBmYWxzZTsKICAgICAgICAgIGRvIHsKICAgICAgICAgICAgdmFyIHVwZGF0ZUxhbmUgPSB1cGRhdGUubGFuZSAmIC01MzY4NzA5MTM7CiAgICAgICAgICAgIGlmICh1cGRhdGVMYW5lICE9PSB1cGRhdGUubGFuZSA/ICh3b3JrSW5Qcm9ncmVzc1Jvb3RSZW5kZXJMYW5lcyAmIHVwZGF0ZUxhbmUpID09PSB1cGRhdGVMYW5lIDogKHJlbmRlckxhbmVzICYgdXBkYXRlTGFuZSkgPT09IHVwZGF0ZUxhbmUpIHsKICAgICAgICAgICAgICB2YXIgcmV2ZXJ0TGFuZSA9IHVwZGF0ZS5yZXZlcnRMYW5lOwogICAgICAgICAgICAgIGlmICgwID09PSByZXZlcnRMYW5lKQogICAgICAgICAgICAgICAgbnVsbCAhPT0gbmV3QmFzZVF1ZXVlTGFzdCAmJiAobmV3QmFzZVF1ZXVlTGFzdCA9IG5ld0Jhc2VRdWV1ZUxhc3QubmV4dCA9IHsKICAgICAgICAgICAgICAgICAgbGFuZTogMCwKICAgICAgICAgICAgICAgICAgcmV2ZXJ0TGFuZTogMCwKICAgICAgICAgICAgICAgICAgYWN0aW9uOiB1cGRhdGUuYWN0aW9uLAogICAgICAgICAgICAgICAgICBoYXNFYWdlclN0YXRlOiB1cGRhdGUuaGFzRWFnZXJTdGF0ZSwKICAgICAgICAgICAgICAgICAgZWFnZXJTdGF0ZTogdXBkYXRlLmVhZ2VyU3RhdGUsCiAgICAgICAgICAgICAgICAgIG5leHQ6IG51bGwKICAgICAgICAgICAgICAgIH0pLCB1cGRhdGVMYW5lID09PSBjdXJyZW50RW50YW5nbGVkTGFuZSAmJiAoZGlkUmVhZEZyb21FbnRhbmdsZWRBc3luY0FjdGlvbjIgPSB0cnVlKTsKICAgICAgICAgICAgICBlbHNlIGlmICgocmVuZGVyTGFuZXMgJiByZXZlcnRMYW5lKSA9PT0gcmV2ZXJ0TGFuZSkgewogICAgICAgICAgICAgICAgdXBkYXRlID0gdXBkYXRlLm5leHQ7CiAgICAgICAgICAgICAgICByZXZlcnRMYW5lID09PSBjdXJyZW50RW50YW5nbGVkTGFuZSAmJiAoZGlkUmVhZEZyb21FbnRhbmdsZWRBc3luY0FjdGlvbjIgPSB0cnVlKTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgdXBkYXRlTGFuZSA9IHsKICAgICAgICAgICAgICAgICAgbGFuZTogMCwKICAgICAgICAgICAgICAgICAgcmV2ZXJ0TGFuZTogdXBkYXRlLnJldmVydExhbmUsCiAgICAgICAgICAgICAgICAgIGFjdGlvbjogdXBkYXRlLmFjdGlvbiwKICAgICAgICAgICAgICAgICAgaGFzRWFnZXJTdGF0ZTogdXBkYXRlLmhhc0VhZ2VyU3RhdGUsCiAgICAgICAgICAgICAgICAgIGVhZ2VyU3RhdGU6IHVwZGF0ZS5lYWdlclN0YXRlLAogICAgICAgICAgICAgICAgICBuZXh0OiBudWxsCiAgICAgICAgICAgICAgICB9LCBudWxsID09PSBuZXdCYXNlUXVldWVMYXN0ID8gKG5ld0Jhc2VRdWV1ZUZpcnN0ID0gbmV3QmFzZVF1ZXVlTGFzdCA9IHVwZGF0ZUxhbmUsIGJhc2VGaXJzdCA9IHBlbmRpbmdRdWV1ZSkgOiBuZXdCYXNlUXVldWVMYXN0ID0gbmV3QmFzZVF1ZXVlTGFzdC5uZXh0ID0gdXBkYXRlTGFuZSwgY3VycmVudGx5UmVuZGVyaW5nRmliZXIubGFuZXMgfD0gcmV2ZXJ0TGFuZSwgd29ya0luUHJvZ3Jlc3NSb290U2tpcHBlZExhbmVzIHw9IHJldmVydExhbmU7CiAgICAgICAgICAgICAgdXBkYXRlTGFuZSA9IHVwZGF0ZS5hY3Rpb247CiAgICAgICAgICAgICAgc2hvdWxkRG91YmxlSW52b2tlVXNlckZuc0luSG9va3NERVYgJiYgcmVkdWNlcihwZW5kaW5nUXVldWUsIHVwZGF0ZUxhbmUpOwogICAgICAgICAgICAgIHBlbmRpbmdRdWV1ZSA9IHVwZGF0ZS5oYXNFYWdlclN0YXRlID8gdXBkYXRlLmVhZ2VyU3RhdGUgOiByZWR1Y2VyKHBlbmRpbmdRdWV1ZSwgdXBkYXRlTGFuZSk7CiAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgIHJldmVydExhbmUgPSB7CiAgICAgICAgICAgICAgICBsYW5lOiB1cGRhdGVMYW5lLAogICAgICAgICAgICAgICAgcmV2ZXJ0TGFuZTogdXBkYXRlLnJldmVydExhbmUsCiAgICAgICAgICAgICAgICBhY3Rpb246IHVwZGF0ZS5hY3Rpb24sCiAgICAgICAgICAgICAgICBoYXNFYWdlclN0YXRlOiB1cGRhdGUuaGFzRWFnZXJTdGF0ZSwKICAgICAgICAgICAgICAgIGVhZ2VyU3RhdGU6IHVwZGF0ZS5lYWdlclN0YXRlLAogICAgICAgICAgICAgICAgbmV4dDogbnVsbAogICAgICAgICAgICAgIH0sIG51bGwgPT09IG5ld0Jhc2VRdWV1ZUxhc3QgPyAobmV3QmFzZVF1ZXVlRmlyc3QgPSBuZXdCYXNlUXVldWVMYXN0ID0gcmV2ZXJ0TGFuZSwgYmFzZUZpcnN0ID0gcGVuZGluZ1F1ZXVlKSA6IG5ld0Jhc2VRdWV1ZUxhc3QgPSBuZXdCYXNlUXVldWVMYXN0Lm5leHQgPSByZXZlcnRMYW5lLCBjdXJyZW50bHlSZW5kZXJpbmdGaWJlci5sYW5lcyB8PSB1cGRhdGVMYW5lLCB3b3JrSW5Qcm9ncmVzc1Jvb3RTa2lwcGVkTGFuZXMgfD0gdXBkYXRlTGFuZTsKICAgICAgICAgICAgdXBkYXRlID0gdXBkYXRlLm5leHQ7CiAgICAgICAgICB9IHdoaWxlIChudWxsICE9PSB1cGRhdGUgJiYgdXBkYXRlICE9PSBjdXJyZW50Mik7CiAgICAgICAgICBudWxsID09PSBuZXdCYXNlUXVldWVMYXN0ID8gYmFzZUZpcnN0ID0gcGVuZGluZ1F1ZXVlIDogbmV3QmFzZVF1ZXVlTGFzdC5uZXh0ID0gbmV3QmFzZVF1ZXVlRmlyc3Q7CiAgICAgICAgICBpZiAoIW9iamVjdElzKHBlbmRpbmdRdWV1ZSwgaG9vay5tZW1vaXplZFN0YXRlKSAmJiAoZGlkUmVjZWl2ZVVwZGF0ZSA9IHRydWUsIGRpZFJlYWRGcm9tRW50YW5nbGVkQXN5bmNBY3Rpb24yICYmIChyZWR1Y2VyID0gY3VycmVudEVudGFuZ2xlZEFjdGlvblRoZW5hYmxlLCBudWxsICE9PSByZWR1Y2VyKSkpCiAgICAgICAgICAgIHRocm93IHJlZHVjZXI7CiAgICAgICAgICBob29rLm1lbW9pemVkU3RhdGUgPSBwZW5kaW5nUXVldWU7CiAgICAgICAgICBob29rLmJhc2VTdGF0ZSA9IGJhc2VGaXJzdDsKICAgICAgICAgIGhvb2suYmFzZVF1ZXVlID0gbmV3QmFzZVF1ZXVlTGFzdDsKICAgICAgICAgIHF1ZXVlLmxhc3RSZW5kZXJlZFN0YXRlID0gcGVuZGluZ1F1ZXVlOwogICAgICAgIH0KICAgICAgICBudWxsID09PSBiYXNlUXVldWUgJiYgKHF1ZXVlLmxhbmVzID0gMCk7CiAgICAgICAgcmV0dXJuIFtob29rLm1lbW9pemVkU3RhdGUsIHF1ZXVlLmRpc3BhdGNoXTsKICAgICAgfQogICAgICBmdW5jdGlvbiByZXJlbmRlclJlZHVjZXIocmVkdWNlcikgewogICAgICAgIHZhciBob29rID0gdXBkYXRlV29ya0luUHJvZ3Jlc3NIb29rKCksIHF1ZXVlID0gaG9vay5xdWV1ZTsKICAgICAgICBpZiAobnVsbCA9PT0gcXVldWUpCiAgICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICAgIlNob3VsZCBoYXZlIGEgcXVldWUuIFlvdSBhcmUgbGlrZWx5IGNhbGxpbmcgSG9va3MgY29uZGl0aW9uYWxseSwgd2hpY2ggaXMgbm90IGFsbG93ZWQuIChodHRwczovL3JlYWN0LmRldi9saW5rL2ludmFsaWQtaG9vay1jYWxsKSIKICAgICAgICAgICk7CiAgICAgICAgcXVldWUubGFzdFJlbmRlcmVkUmVkdWNlciA9IHJlZHVjZXI7CiAgICAgICAgdmFyIGRpc3BhdGNoID0gcXVldWUuZGlzcGF0Y2gsIGxhc3RSZW5kZXJQaGFzZVVwZGF0ZSA9IHF1ZXVlLnBlbmRpbmcsIG5ld1N0YXRlID0gaG9vay5tZW1vaXplZFN0YXRlOwogICAgICAgIGlmIChudWxsICE9PSBsYXN0UmVuZGVyUGhhc2VVcGRhdGUpIHsKICAgICAgICAgIHF1ZXVlLnBlbmRpbmcgPSBudWxsOwogICAgICAgICAgdmFyIHVwZGF0ZSA9IGxhc3RSZW5kZXJQaGFzZVVwZGF0ZSA9IGxhc3RSZW5kZXJQaGFzZVVwZGF0ZS5uZXh0OwogICAgICAgICAgZG8KICAgICAgICAgICAgbmV3U3RhdGUgPSByZWR1Y2VyKG5ld1N0YXRlLCB1cGRhdGUuYWN0aW9uKSwgdXBkYXRlID0gdXBkYXRlLm5leHQ7CiAgICAgICAgICB3aGlsZSAodXBkYXRlICE9PSBsYXN0UmVuZGVyUGhhc2VVcGRhdGUpOwogICAgICAgICAgb2JqZWN0SXMobmV3U3RhdGUsIGhvb2subWVtb2l6ZWRTdGF0ZSkgfHwgKGRpZFJlY2VpdmVVcGRhdGUgPSB0cnVlKTsKICAgICAgICAgIGhvb2subWVtb2l6ZWRTdGF0ZSA9IG5ld1N0YXRlOwogICAgICAgICAgbnVsbCA9PT0gaG9vay5iYXNlUXVldWUgJiYgKGhvb2suYmFzZVN0YXRlID0gbmV3U3RhdGUpOwogICAgICAgICAgcXVldWUubGFzdFJlbmRlcmVkU3RhdGUgPSBuZXdTdGF0ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIFtuZXdTdGF0ZSwgZGlzcGF0Y2hdOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1vdW50U3luY0V4dGVybmFsU3RvcmUoc3Vic2NyaWJlLCBnZXRTbmFwc2hvdCwgZ2V0U2VydmVyU25hcHNob3QpIHsKICAgICAgICB2YXIgZmliZXIgPSBjdXJyZW50bHlSZW5kZXJpbmdGaWJlciwgaG9vayA9IG1vdW50V29ya0luUHJvZ3Jlc3NIb29rKCk7CiAgICAgICAgaWYgKGlzSHlkcmF0aW5nKSB7CiAgICAgICAgICBpZiAodm9pZCAwID09PSBnZXRTZXJ2ZXJTbmFwc2hvdCkKICAgICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICAgIk1pc3NpbmcgZ2V0U2VydmVyU25hcHNob3QsIHdoaWNoIGlzIHJlcXVpcmVkIGZvciBzZXJ2ZXItcmVuZGVyZWQgY29udGVudC4gV2lsbCByZXZlcnQgdG8gY2xpZW50IHJlbmRlcmluZy4iCiAgICAgICAgICAgICk7CiAgICAgICAgICB2YXIgbmV4dFNuYXBzaG90ID0gZ2V0U2VydmVyU25hcHNob3QoKTsKICAgICAgICAgIGRpZFdhcm5VbmNhY2hlZEdldFNuYXBzaG90IHx8IG5leHRTbmFwc2hvdCA9PT0gZ2V0U2VydmVyU25hcHNob3QoKSB8fCAoY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIlRoZSByZXN1bHQgb2YgZ2V0U2VydmVyU25hcHNob3Qgc2hvdWxkIGJlIGNhY2hlZCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wIgogICAgICAgICAgKSwgZGlkV2FyblVuY2FjaGVkR2V0U25hcHNob3QgPSB0cnVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbmV4dFNuYXBzaG90ID0gZ2V0U25hcHNob3QoKTsKICAgICAgICAgIGRpZFdhcm5VbmNhY2hlZEdldFNuYXBzaG90IHx8IChnZXRTZXJ2ZXJTbmFwc2hvdCA9IGdldFNuYXBzaG90KCksIG9iamVjdElzKG5leHRTbmFwc2hvdCwgZ2V0U2VydmVyU25hcHNob3QpIHx8IChjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiVGhlIHJlc3VsdCBvZiBnZXRTbmFwc2hvdCBzaG91bGQgYmUgY2FjaGVkIHRvIGF2b2lkIGFuIGluZmluaXRlIGxvb3AiCiAgICAgICAgICApLCBkaWRXYXJuVW5jYWNoZWRHZXRTbmFwc2hvdCA9IHRydWUpKTsKICAgICAgICAgIGlmIChudWxsID09PSB3b3JrSW5Qcm9ncmVzc1Jvb3QpCiAgICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAgICJFeHBlY3RlZCBhIHdvcmstaW4tcHJvZ3Jlc3Mgcm9vdC4gVGhpcyBpcyBhIGJ1ZyBpbiBSZWFjdC4gUGxlYXNlIGZpbGUgYW4gaXNzdWUuIgogICAgICAgICAgICApOwogICAgICAgICAgMCAhPT0gKHdvcmtJblByb2dyZXNzUm9vdFJlbmRlckxhbmVzICYgMTI0KSB8fCBwdXNoU3RvcmVDb25zaXN0ZW5jeUNoZWNrKGZpYmVyLCBnZXRTbmFwc2hvdCwgbmV4dFNuYXBzaG90KTsKICAgICAgICB9CiAgICAgICAgaG9vay5tZW1vaXplZFN0YXRlID0gbmV4dFNuYXBzaG90OwogICAgICAgIGdldFNlcnZlclNuYXBzaG90ID0geyB2YWx1ZTogbmV4dFNuYXBzaG90LCBnZXRTbmFwc2hvdCB9OwogICAgICAgIGhvb2sucXVldWUgPSBnZXRTZXJ2ZXJTbmFwc2hvdDsKICAgICAgICBtb3VudEVmZmVjdCgKICAgICAgICAgIHN1YnNjcmliZVRvU3RvcmUuYmluZChudWxsLCBmaWJlciwgZ2V0U2VydmVyU25hcHNob3QsIHN1YnNjcmliZSksCiAgICAgICAgICBbc3Vic2NyaWJlXQogICAgICAgICk7CiAgICAgICAgZmliZXIuZmxhZ3MgfD0gMjA0ODsKICAgICAgICBwdXNoU2ltcGxlRWZmZWN0KAogICAgICAgICAgSGFzRWZmZWN0IHwgUGFzc2l2ZSwKICAgICAgICAgIGNyZWF0ZUVmZmVjdEluc3RhbmNlKCksCiAgICAgICAgICB1cGRhdGVTdG9yZUluc3RhbmNlLmJpbmQoCiAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgIGZpYmVyLAogICAgICAgICAgICBnZXRTZXJ2ZXJTbmFwc2hvdCwKICAgICAgICAgICAgbmV4dFNuYXBzaG90LAogICAgICAgICAgICBnZXRTbmFwc2hvdAogICAgICAgICAgKSwKICAgICAgICAgIG51bGwKICAgICAgICApOwogICAgICAgIHJldHVybiBuZXh0U25hcHNob3Q7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdXBkYXRlU3luY0V4dGVybmFsU3RvcmUoc3Vic2NyaWJlLCBnZXRTbmFwc2hvdCwgZ2V0U2VydmVyU25hcHNob3QpIHsKICAgICAgICB2YXIgZmliZXIgPSBjdXJyZW50bHlSZW5kZXJpbmdGaWJlciwgaG9vayA9IHVwZGF0ZVdvcmtJblByb2dyZXNzSG9vaygpLCBpc0h5ZHJhdGluZyRqc2NvbXAkMCA9IGlzSHlkcmF0aW5nOwogICAgICAgIGlmIChpc0h5ZHJhdGluZyRqc2NvbXAkMCkgewogICAgICAgICAgaWYgKHZvaWQgMCA9PT0gZ2V0U2VydmVyU25hcHNob3QpCiAgICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAgICJNaXNzaW5nIGdldFNlcnZlclNuYXBzaG90LCB3aGljaCBpcyByZXF1aXJlZCBmb3Igc2VydmVyLXJlbmRlcmVkIGNvbnRlbnQuIFdpbGwgcmV2ZXJ0IHRvIGNsaWVudCByZW5kZXJpbmcuIgogICAgICAgICAgICApOwogICAgICAgICAgZ2V0U2VydmVyU25hcHNob3QgPSBnZXRTZXJ2ZXJTbmFwc2hvdCgpOwogICAgICAgIH0gZWxzZSBpZiAoZ2V0U2VydmVyU25hcHNob3QgPSBnZXRTbmFwc2hvdCgpLCAhZGlkV2FyblVuY2FjaGVkR2V0U25hcHNob3QpIHsKICAgICAgICAgIHZhciBjYWNoZWRTbmFwc2hvdCA9IGdldFNuYXBzaG90KCk7CiAgICAgICAgICBvYmplY3RJcyhnZXRTZXJ2ZXJTbmFwc2hvdCwgY2FjaGVkU25hcHNob3QpIHx8IChjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiVGhlIHJlc3VsdCBvZiBnZXRTbmFwc2hvdCBzaG91bGQgYmUgY2FjaGVkIHRvIGF2b2lkIGFuIGluZmluaXRlIGxvb3AiCiAgICAgICAgICApLCBkaWRXYXJuVW5jYWNoZWRHZXRTbmFwc2hvdCA9IHRydWUpOwogICAgICAgIH0KICAgICAgICBpZiAoY2FjaGVkU25hcHNob3QgPSAhb2JqZWN0SXMoCiAgICAgICAgICAoY3VycmVudEhvb2sgfHwgaG9vaykubWVtb2l6ZWRTdGF0ZSwKICAgICAgICAgIGdldFNlcnZlclNuYXBzaG90CiAgICAgICAgKSkKICAgICAgICAgIGhvb2subWVtb2l6ZWRTdGF0ZSA9IGdldFNlcnZlclNuYXBzaG90LCBkaWRSZWNlaXZlVXBkYXRlID0gdHJ1ZTsKICAgICAgICBob29rID0gaG9vay5xdWV1ZTsKICAgICAgICB2YXIgY3JlYXRlID0gc3Vic2NyaWJlVG9TdG9yZS5iaW5kKG51bGwsIGZpYmVyLCBob29rLCBzdWJzY3JpYmUpOwogICAgICAgIHVwZGF0ZUVmZmVjdEltcGwoMjA0OCwgUGFzc2l2ZSwgY3JlYXRlLCBbc3Vic2NyaWJlXSk7CiAgICAgICAgaWYgKGhvb2suZ2V0U25hcHNob3QgIT09IGdldFNuYXBzaG90IHx8IGNhY2hlZFNuYXBzaG90IHx8IG51bGwgIT09IHdvcmtJblByb2dyZXNzSG9vayAmJiB3b3JrSW5Qcm9ncmVzc0hvb2subWVtb2l6ZWRTdGF0ZS50YWcgJiBIYXNFZmZlY3QpIHsKICAgICAgICAgIGZpYmVyLmZsYWdzIHw9IDIwNDg7CiAgICAgICAgICBwdXNoU2ltcGxlRWZmZWN0KAogICAgICAgICAgICBIYXNFZmZlY3QgfCBQYXNzaXZlLAogICAgICAgICAgICBjcmVhdGVFZmZlY3RJbnN0YW5jZSgpLAogICAgICAgICAgICB1cGRhdGVTdG9yZUluc3RhbmNlLmJpbmQoCiAgICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgICBmaWJlciwKICAgICAgICAgICAgICBob29rLAogICAgICAgICAgICAgIGdldFNlcnZlclNuYXBzaG90LAogICAgICAgICAgICAgIGdldFNuYXBzaG90CiAgICAgICAgICAgICksCiAgICAgICAgICAgIG51bGwKICAgICAgICAgICk7CiAgICAgICAgICBpZiAobnVsbCA9PT0gd29ya0luUHJvZ3Jlc3NSb290KQogICAgICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICAgICAiRXhwZWN0ZWQgYSB3b3JrLWluLXByb2dyZXNzIHJvb3QuIFRoaXMgaXMgYSBidWcgaW4gUmVhY3QuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLiIKICAgICAgICAgICAgKTsKICAgICAgICAgIGlzSHlkcmF0aW5nJGpzY29tcCQwIHx8IDAgIT09IChyZW5kZXJMYW5lcyAmIDEyNCkgfHwgcHVzaFN0b3JlQ29uc2lzdGVuY3lDaGVjayhmaWJlciwgZ2V0U25hcHNob3QsIGdldFNlcnZlclNuYXBzaG90KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGdldFNlcnZlclNuYXBzaG90OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHB1c2hTdG9yZUNvbnNpc3RlbmN5Q2hlY2soZmliZXIsIGdldFNuYXBzaG90LCByZW5kZXJlZFNuYXBzaG90KSB7CiAgICAgICAgZmliZXIuZmxhZ3MgfD0gMTYzODQ7CiAgICAgICAgZmliZXIgPSB7IGdldFNuYXBzaG90LCB2YWx1ZTogcmVuZGVyZWRTbmFwc2hvdCB9OwogICAgICAgIGdldFNuYXBzaG90ID0gY3VycmVudGx5UmVuZGVyaW5nRmliZXIudXBkYXRlUXVldWU7CiAgICAgICAgbnVsbCA9PT0gZ2V0U25hcHNob3QgPyAoZ2V0U25hcHNob3QgPSBjcmVhdGVGdW5jdGlvbkNvbXBvbmVudFVwZGF0ZVF1ZXVlKCksIGN1cnJlbnRseVJlbmRlcmluZ0ZpYmVyLnVwZGF0ZVF1ZXVlID0gZ2V0U25hcHNob3QsIGdldFNuYXBzaG90LnN0b3JlcyA9IFtmaWJlcl0pIDogKHJlbmRlcmVkU25hcHNob3QgPSBnZXRTbmFwc2hvdC5zdG9yZXMsIG51bGwgPT09IHJlbmRlcmVkU25hcHNob3QgPyBnZXRTbmFwc2hvdC5zdG9yZXMgPSBbZmliZXJdIDogcmVuZGVyZWRTbmFwc2hvdC5wdXNoKGZpYmVyKSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdXBkYXRlU3RvcmVJbnN0YW5jZShmaWJlciwgaW5zdCwgbmV4dFNuYXBzaG90LCBnZXRTbmFwc2hvdCkgewogICAgICAgIGluc3QudmFsdWUgPSBuZXh0U25hcHNob3Q7CiAgICAgICAgaW5zdC5nZXRTbmFwc2hvdCA9IGdldFNuYXBzaG90OwogICAgICAgIGNoZWNrSWZTbmFwc2hvdENoYW5nZWQoaW5zdCkgJiYgZm9yY2VTdG9yZVJlcmVuZGVyKGZpYmVyKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBzdWJzY3JpYmVUb1N0b3JlKGZpYmVyLCBpbnN0LCBzdWJzY3JpYmUpIHsKICAgICAgICByZXR1cm4gc3Vic2NyaWJlKGZ1bmN0aW9uKCkgewogICAgICAgICAgY2hlY2tJZlNuYXBzaG90Q2hhbmdlZChpbnN0KSAmJiBmb3JjZVN0b3JlUmVyZW5kZXIoZmliZXIpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNoZWNrSWZTbmFwc2hvdENoYW5nZWQoaW5zdCkgewogICAgICAgIHZhciBsYXRlc3RHZXRTbmFwc2hvdCA9IGluc3QuZ2V0U25hcHNob3Q7CiAgICAgICAgaW5zdCA9IGluc3QudmFsdWU7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciBuZXh0VmFsdWUgPSBsYXRlc3RHZXRTbmFwc2hvdCgpOwogICAgICAgICAgcmV0dXJuICFvYmplY3RJcyhpbnN0LCBuZXh0VmFsdWUpOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZm9yY2VTdG9yZVJlcmVuZGVyKGZpYmVyKSB7CiAgICAgICAgdmFyIHJvb3QyID0gZW5xdWV1ZUNvbmN1cnJlbnRSZW5kZXJGb3JMYW5lKGZpYmVyLCAyKTsKICAgICAgICBudWxsICE9PSByb290MiAmJiBzY2hlZHVsZVVwZGF0ZU9uRmliZXIocm9vdDIsIGZpYmVyLCAyKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBtb3VudFN0YXRlSW1wbChpbml0aWFsU3RhdGUpIHsKICAgICAgICB2YXIgaG9vayA9IG1vdW50V29ya0luUHJvZ3Jlc3NIb29rKCk7CiAgICAgICAgaWYgKCJmdW5jdGlvbiIgPT09IHR5cGVvZiBpbml0aWFsU3RhdGUpIHsKICAgICAgICAgIHZhciBpbml0aWFsU3RhdGVJbml0aWFsaXplciA9IGluaXRpYWxTdGF0ZTsKICAgICAgICAgIGluaXRpYWxTdGF0ZSA9IGluaXRpYWxTdGF0ZUluaXRpYWxpemVyKCk7CiAgICAgICAgICBpZiAoc2hvdWxkRG91YmxlSW52b2tlVXNlckZuc0luSG9va3NERVYpIHsKICAgICAgICAgICAgc2V0SXNTdHJpY3RNb2RlRm9yRGV2dG9vbHModHJ1ZSk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgaW5pdGlhbFN0YXRlSW5pdGlhbGl6ZXIoKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBzZXRJc1N0cmljdE1vZGVGb3JEZXZ0b29scyhmYWxzZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaG9vay5tZW1vaXplZFN0YXRlID0gaG9vay5iYXNlU3RhdGUgPSBpbml0aWFsU3RhdGU7CiAgICAgICAgaG9vay5xdWV1ZSA9IHsKICAgICAgICAgIHBlbmRpbmc6IG51bGwsCiAgICAgICAgICBsYW5lczogMCwKICAgICAgICAgIGRpc3BhdGNoOiBudWxsLAogICAgICAgICAgbGFzdFJlbmRlcmVkUmVkdWNlcjogYmFzaWNTdGF0ZVJlZHVjZXIsCiAgICAgICAgICBsYXN0UmVuZGVyZWRTdGF0ZTogaW5pdGlhbFN0YXRlCiAgICAgICAgfTsKICAgICAgICByZXR1cm4gaG9vazsKICAgICAgfQogICAgICBmdW5jdGlvbiBtb3VudFN0YXRlKGluaXRpYWxTdGF0ZSkgewogICAgICAgIGluaXRpYWxTdGF0ZSA9IG1vdW50U3RhdGVJbXBsKGluaXRpYWxTdGF0ZSk7CiAgICAgICAgdmFyIHF1ZXVlID0gaW5pdGlhbFN0YXRlLnF1ZXVlLCBkaXNwYXRjaCA9IGRpc3BhdGNoU2V0U3RhdGUuYmluZChudWxsLCBjdXJyZW50bHlSZW5kZXJpbmdGaWJlciwgcXVldWUpOwogICAgICAgIHF1ZXVlLmRpc3BhdGNoID0gZGlzcGF0Y2g7CiAgICAgICAgcmV0dXJuIFtpbml0aWFsU3RhdGUubWVtb2l6ZWRTdGF0ZSwgZGlzcGF0Y2hdOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1vdW50T3B0aW1pc3RpYyhwYXNzdGhyb3VnaCkgewogICAgICAgIHZhciBob29rID0gbW91bnRXb3JrSW5Qcm9ncmVzc0hvb2soKTsKICAgICAgICBob29rLm1lbW9pemVkU3RhdGUgPSBob29rLmJhc2VTdGF0ZSA9IHBhc3N0aHJvdWdoOwogICAgICAgIHZhciBxdWV1ZSA9IHsKICAgICAgICAgIHBlbmRpbmc6IG51bGwsCiAgICAgICAgICBsYW5lczogMCwKICAgICAgICAgIGRpc3BhdGNoOiBudWxsLAogICAgICAgICAgbGFzdFJlbmRlcmVkUmVkdWNlcjogbnVsbCwKICAgICAgICAgIGxhc3RSZW5kZXJlZFN0YXRlOiBudWxsCiAgICAgICAgfTsKICAgICAgICBob29rLnF1ZXVlID0gcXVldWU7CiAgICAgICAgaG9vayA9IGRpc3BhdGNoT3B0aW1pc3RpY1NldFN0YXRlLmJpbmQoCiAgICAgICAgICBudWxsLAogICAgICAgICAgY3VycmVudGx5UmVuZGVyaW5nRmliZXIsCiAgICAgICAgICB0cnVlLAogICAgICAgICAgcXVldWUKICAgICAgICApOwogICAgICAgIHF1ZXVlLmRpc3BhdGNoID0gaG9vazsKICAgICAgICByZXR1cm4gW3Bhc3N0aHJvdWdoLCBob29rXTsKICAgICAgfQogICAgICBmdW5jdGlvbiB1cGRhdGVPcHRpbWlzdGljKHBhc3N0aHJvdWdoLCByZWR1Y2VyKSB7CiAgICAgICAgdmFyIGhvb2sgPSB1cGRhdGVXb3JrSW5Qcm9ncmVzc0hvb2soKTsKICAgICAgICByZXR1cm4gdXBkYXRlT3B0aW1pc3RpY0ltcGwoaG9vaywgY3VycmVudEhvb2ssIHBhc3N0aHJvdWdoLCByZWR1Y2VyKTsKICAgICAgfQogICAgICBmdW5jdGlvbiB1cGRhdGVPcHRpbWlzdGljSW1wbChob29rLCBjdXJyZW50MiwgcGFzc3Rocm91Z2gsIHJlZHVjZXIpIHsKICAgICAgICBob29rLmJhc2VTdGF0ZSA9IHBhc3N0aHJvdWdoOwogICAgICAgIHJldHVybiB1cGRhdGVSZWR1Y2VySW1wbCgKICAgICAgICAgIGhvb2ssCiAgICAgICAgICBjdXJyZW50SG9vaywKICAgICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiByZWR1Y2VyID8gcmVkdWNlciA6IGJhc2ljU3RhdGVSZWR1Y2VyCiAgICAgICAgKTsKICAgICAgfQogICAgICBmdW5jdGlvbiByZXJlbmRlck9wdGltaXN0aWMocGFzc3Rocm91Z2gsIHJlZHVjZXIpIHsKICAgICAgICB2YXIgaG9vayA9IHVwZGF0ZVdvcmtJblByb2dyZXNzSG9vaygpOwogICAgICAgIGlmIChudWxsICE9PSBjdXJyZW50SG9vaykKICAgICAgICAgIHJldHVybiB1cGRhdGVPcHRpbWlzdGljSW1wbChob29rLCBjdXJyZW50SG9vaywgcGFzc3Rocm91Z2gsIHJlZHVjZXIpOwogICAgICAgIGhvb2suYmFzZVN0YXRlID0gcGFzc3Rocm91Z2g7CiAgICAgICAgcmV0dXJuIFtwYXNzdGhyb3VnaCwgaG9vay5xdWV1ZS5kaXNwYXRjaF07CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZGlzcGF0Y2hBY3Rpb25TdGF0ZShmaWJlciwgYWN0aW9uUXVldWUsIHNldFBlbmRpbmdTdGF0ZSwgc2V0U3RhdGUsIHBheWxvYWQpIHsKICAgICAgICBpZiAoaXNSZW5kZXJQaGFzZVVwZGF0ZShmaWJlcikpCiAgICAgICAgICB0aHJvdyBFcnJvcigiQ2Fubm90IHVwZGF0ZSBmb3JtIHN0YXRlIHdoaWxlIHJlbmRlcmluZy4iKTsKICAgICAgICBmaWJlciA9IGFjdGlvblF1ZXVlLmFjdGlvbjsKICAgICAgICBpZiAobnVsbCAhPT0gZmliZXIpIHsKICAgICAgICAgIHZhciBhY3Rpb25Ob2RlID0gewogICAgICAgICAgICBwYXlsb2FkLAogICAgICAgICAgICBhY3Rpb246IGZpYmVyLAogICAgICAgICAgICBuZXh0OiBudWxsLAogICAgICAgICAgICBpc1RyYW5zaXRpb246IHRydWUsCiAgICAgICAgICAgIHN0YXR1czogInBlbmRpbmciLAogICAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICAgICAgcmVhc29uOiBudWxsLAogICAgICAgICAgICBsaXN0ZW5lcnM6IFtdLAogICAgICAgICAgICB0aGVuOiBmdW5jdGlvbihsaXN0ZW5lcikgewogICAgICAgICAgICAgIGFjdGlvbk5vZGUubGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgbnVsbCAhPT0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuVCA/IHNldFBlbmRpbmdTdGF0ZSh0cnVlKSA6IGFjdGlvbk5vZGUuaXNUcmFuc2l0aW9uID0gZmFsc2U7CiAgICAgICAgICBzZXRTdGF0ZShhY3Rpb25Ob2RlKTsKICAgICAgICAgIHNldFBlbmRpbmdTdGF0ZSA9IGFjdGlvblF1ZXVlLnBlbmRpbmc7CiAgICAgICAgICBudWxsID09PSBzZXRQZW5kaW5nU3RhdGUgPyAoYWN0aW9uTm9kZS5uZXh0ID0gYWN0aW9uUXVldWUucGVuZGluZyA9IGFjdGlvbk5vZGUsIHJ1bkFjdGlvblN0YXRlQWN0aW9uKGFjdGlvblF1ZXVlLCBhY3Rpb25Ob2RlKSkgOiAoYWN0aW9uTm9kZS5uZXh0ID0gc2V0UGVuZGluZ1N0YXRlLm5leHQsIGFjdGlvblF1ZXVlLnBlbmRpbmcgPSBzZXRQZW5kaW5nU3RhdGUubmV4dCA9IGFjdGlvbk5vZGUpOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBydW5BY3Rpb25TdGF0ZUFjdGlvbihhY3Rpb25RdWV1ZSwgbm9kZSkgewogICAgICAgIHZhciBhY3Rpb24gPSBub2RlLmFjdGlvbiwgcGF5bG9hZCA9IG5vZGUucGF5bG9hZCwgcHJldlN0YXRlID0gYWN0aW9uUXVldWUuc3RhdGU7CiAgICAgICAgaWYgKG5vZGUuaXNUcmFuc2l0aW9uKSB7CiAgICAgICAgICB2YXIgcHJldlRyYW5zaXRpb24gPSBSZWFjdFNoYXJlZEludGVybmFscy5ULCBjdXJyZW50VHJhbnNpdGlvbiA9IHt9OwogICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuVCA9IGN1cnJlbnRUcmFuc2l0aW9uOwogICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuVC5fdXBkYXRlZEZpYmVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgcmV0dXJuVmFsdWUgPSBhY3Rpb24ocHJldlN0YXRlLCBwYXlsb2FkKSwgb25TdGFydFRyYW5zaXRpb25GaW5pc2ggPSBSZWFjdFNoYXJlZEludGVybmFscy5TOwogICAgICAgICAgICBudWxsICE9PSBvblN0YXJ0VHJhbnNpdGlvbkZpbmlzaCAmJiBvblN0YXJ0VHJhbnNpdGlvbkZpbmlzaChjdXJyZW50VHJhbnNpdGlvbiwgcmV0dXJuVmFsdWUpOwogICAgICAgICAgICBoYW5kbGVBY3Rpb25SZXR1cm5WYWx1ZShhY3Rpb25RdWV1ZSwgbm9kZSwgcmV0dXJuVmFsdWUpOwogICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgb25BY3Rpb25FcnJvcihhY3Rpb25RdWV1ZSwgbm9kZSwgZXJyb3IpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuVCA9IHByZXZUcmFuc2l0aW9uLCBudWxsID09PSBwcmV2VHJhbnNpdGlvbiAmJiBjdXJyZW50VHJhbnNpdGlvbi5fdXBkYXRlZEZpYmVycyAmJiAoYWN0aW9uUXVldWUgPSBjdXJyZW50VHJhbnNpdGlvbi5fdXBkYXRlZEZpYmVycy5zaXplLCBjdXJyZW50VHJhbnNpdGlvbi5fdXBkYXRlZEZpYmVycy5jbGVhcigpLCAxMCA8IGFjdGlvblF1ZXVlICYmIGNvbnNvbGUud2FybigKICAgICAgICAgICAgICAiRGV0ZWN0ZWQgYSBsYXJnZSBudW1iZXIgb2YgdXBkYXRlcyBpbnNpZGUgc3RhcnRUcmFuc2l0aW9uLiBJZiB0aGlzIGlzIGR1ZSB0byBhIHN1YnNjcmlwdGlvbiBwbGVhc2UgcmUtd3JpdGUgaXQgdG8gdXNlIFJlYWN0IHByb3ZpZGVkIGhvb2tzLiBPdGhlcndpc2UgY29uY3VycmVudCBtb2RlIGd1YXJhbnRlZXMgYXJlIG9mZiB0aGUgdGFibGUuIgogICAgICAgICAgICApKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uID0gYWN0aW9uKHByZXZTdGF0ZSwgcGF5bG9hZCksIGhhbmRsZUFjdGlvblJldHVyblZhbHVlKGFjdGlvblF1ZXVlLCBub2RlLCBjdXJyZW50VHJhbnNpdGlvbik7CiAgICAgICAgICB9IGNhdGNoIChlcnJvciQ0KSB7CiAgICAgICAgICAgIG9uQWN0aW9uRXJyb3IoYWN0aW9uUXVldWUsIG5vZGUsIGVycm9yJDQpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGhhbmRsZUFjdGlvblJldHVyblZhbHVlKGFjdGlvblF1ZXVlLCBub2RlLCByZXR1cm5WYWx1ZSkgewogICAgICAgIG51bGwgIT09IHJldHVyblZhbHVlICYmICJvYmplY3QiID09PSB0eXBlb2YgcmV0dXJuVmFsdWUgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHJldHVyblZhbHVlLnRoZW4gPyAocmV0dXJuVmFsdWUudGhlbigKICAgICAgICAgIGZ1bmN0aW9uKG5leHRTdGF0ZSkgewogICAgICAgICAgICBvbkFjdGlvblN1Y2Nlc3MoYWN0aW9uUXVldWUsIG5vZGUsIG5leHRTdGF0ZSk7CiAgICAgICAgICB9LAogICAgICAgICAgZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICAgICAgcmV0dXJuIG9uQWN0aW9uRXJyb3IoYWN0aW9uUXVldWUsIG5vZGUsIGVycm9yKTsKICAgICAgICAgIH0KICAgICAgICApLCBub2RlLmlzVHJhbnNpdGlvbiB8fCBjb25zb2xlLmVycm9yKAogICAgICAgICAgIkFuIGFzeW5jIGZ1bmN0aW9uIHdpdGggdXNlQWN0aW9uU3RhdGUgd2FzIGNhbGxlZCBvdXRzaWRlIG9mIGEgdHJhbnNpdGlvbi4gVGhpcyBpcyBsaWtlbHkgbm90IHdoYXQgeW91IGludGVuZGVkIChmb3IgZXhhbXBsZSwgaXNQZW5kaW5nIHdpbGwgbm90IHVwZGF0ZSBjb3JyZWN0bHkpLiBFaXRoZXIgY2FsbCB0aGUgcmV0dXJuZWQgZnVuY3Rpb24gaW5zaWRlIHN0YXJ0VHJhbnNpdGlvbiwgb3IgcGFzcyBpdCB0byBhbiBgYWN0aW9uYCBvciBgZm9ybUFjdGlvbmAgcHJvcC4iCiAgICAgICAgKSkgOiBvbkFjdGlvblN1Y2Nlc3MoYWN0aW9uUXVldWUsIG5vZGUsIHJldHVyblZhbHVlKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBvbkFjdGlvblN1Y2Nlc3MoYWN0aW9uUXVldWUsIGFjdGlvbk5vZGUsIG5leHRTdGF0ZSkgewogICAgICAgIGFjdGlvbk5vZGUuc3RhdHVzID0gImZ1bGZpbGxlZCI7CiAgICAgICAgYWN0aW9uTm9kZS52YWx1ZSA9IG5leHRTdGF0ZTsKICAgICAgICBub3RpZnlBY3Rpb25MaXN0ZW5lcnMoYWN0aW9uTm9kZSk7CiAgICAgICAgYWN0aW9uUXVldWUuc3RhdGUgPSBuZXh0U3RhdGU7CiAgICAgICAgYWN0aW9uTm9kZSA9IGFjdGlvblF1ZXVlLnBlbmRpbmc7CiAgICAgICAgbnVsbCAhPT0gYWN0aW9uTm9kZSAmJiAobmV4dFN0YXRlID0gYWN0aW9uTm9kZS5uZXh0LCBuZXh0U3RhdGUgPT09IGFjdGlvbk5vZGUgPyBhY3Rpb25RdWV1ZS5wZW5kaW5nID0gbnVsbCA6IChuZXh0U3RhdGUgPSBuZXh0U3RhdGUubmV4dCwgYWN0aW9uTm9kZS5uZXh0ID0gbmV4dFN0YXRlLCBydW5BY3Rpb25TdGF0ZUFjdGlvbihhY3Rpb25RdWV1ZSwgbmV4dFN0YXRlKSkpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG9uQWN0aW9uRXJyb3IoYWN0aW9uUXVldWUsIGFjdGlvbk5vZGUsIGVycm9yKSB7CiAgICAgICAgdmFyIGxhc3QgPSBhY3Rpb25RdWV1ZS5wZW5kaW5nOwogICAgICAgIGFjdGlvblF1ZXVlLnBlbmRpbmcgPSBudWxsOwogICAgICAgIGlmIChudWxsICE9PSBsYXN0KSB7CiAgICAgICAgICBsYXN0ID0gbGFzdC5uZXh0OwogICAgICAgICAgZG8KICAgICAgICAgICAgYWN0aW9uTm9kZS5zdGF0dXMgPSAicmVqZWN0ZWQiLCBhY3Rpb25Ob2RlLnJlYXNvbiA9IGVycm9yLCBub3RpZnlBY3Rpb25MaXN0ZW5lcnMoYWN0aW9uTm9kZSksIGFjdGlvbk5vZGUgPSBhY3Rpb25Ob2RlLm5leHQ7CiAgICAgICAgICB3aGlsZSAoYWN0aW9uTm9kZSAhPT0gbGFzdCk7CiAgICAgICAgfQogICAgICAgIGFjdGlvblF1ZXVlLmFjdGlvbiA9IG51bGw7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbm90aWZ5QWN0aW9uTGlzdGVuZXJzKGFjdGlvbk5vZGUpIHsKICAgICAgICBhY3Rpb25Ob2RlID0gYWN0aW9uTm9kZS5saXN0ZW5lcnM7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhY3Rpb25Ob2RlLmxlbmd0aDsgaSsrKSAoMCwgYWN0aW9uTm9kZVtpXSkoKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBhY3Rpb25TdGF0ZVJlZHVjZXIob2xkU3RhdGUsIG5ld1N0YXRlKSB7CiAgICAgICAgcmV0dXJuIG5ld1N0YXRlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1vdW50QWN0aW9uU3RhdGUoYWN0aW9uLCBpbml0aWFsU3RhdGVQcm9wKSB7CiAgICAgICAgaWYgKGlzSHlkcmF0aW5nKSB7CiAgICAgICAgICB2YXIgc3NyRm9ybVN0YXRlID0gd29ya0luUHJvZ3Jlc3NSb290LmZvcm1TdGF0ZTsKICAgICAgICAgIGlmIChudWxsICE9PSBzc3JGb3JtU3RhdGUpIHsKICAgICAgICAgICAgYTogewogICAgICAgICAgICAgIHZhciBpc01hdGNoaW5nID0gY3VycmVudGx5UmVuZGVyaW5nRmliZXI7CiAgICAgICAgICAgICAgaWYgKGlzSHlkcmF0aW5nKSB7CiAgICAgICAgICAgICAgICBpZiAobmV4dEh5ZHJhdGFibGVJbnN0YW5jZSkgewogICAgICAgICAgICAgICAgICBiOiB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlckluc3RhbmNlID0gbmV4dEh5ZHJhdGFibGVJbnN0YW5jZTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpblJvb3RPclNpbmdsZXRvbiA9IHJvb3RPclNpbmdsZXRvbkNvbnRleHQ7IDggIT09IG1hcmtlckluc3RhbmNlLm5vZGVUeXBlOyApIHsKICAgICAgICAgICAgICAgICAgICAgIGlmICghaW5Sb290T3JTaW5nbGV0b24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VySW5zdGFuY2UgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhayBiOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgbWFya2VySW5zdGFuY2UgPSBnZXROZXh0SHlkcmF0YWJsZSgKICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VySW5zdGFuY2UubmV4dFNpYmxpbmcKICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gbWFya2VySW5zdGFuY2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VySW5zdGFuY2UgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhayBiOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpblJvb3RPclNpbmdsZXRvbiA9IG1hcmtlckluc3RhbmNlLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgbWFya2VySW5zdGFuY2UgPSBpblJvb3RPclNpbmdsZXRvbiA9PT0gRk9STV9TVEFURV9JU19NQVRDSElORyB8fCBpblJvb3RPclNpbmdsZXRvbiA9PT0gRk9STV9TVEFURV9JU19OT1RfTUFUQ0hJTkcgPyBtYXJrZXJJbnN0YW5jZSA6IG51bGw7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaWYgKG1hcmtlckluc3RhbmNlKSB7CiAgICAgICAgICAgICAgICAgICAgbmV4dEh5ZHJhdGFibGVJbnN0YW5jZSA9IGdldE5leHRIeWRyYXRhYmxlKAogICAgICAgICAgICAgICAgICAgICAgbWFya2VySW5zdGFuY2UubmV4dFNpYmxpbmcKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIGlzTWF0Y2hpbmcgPSBtYXJrZXJJbnN0YW5jZS5kYXRhID09PSBGT1JNX1NUQVRFX0lTX01BVENISU5HOwogICAgICAgICAgICAgICAgICAgIGJyZWFrIGE7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRocm93T25IeWRyYXRpb25NaXNtYXRjaChpc01hdGNoaW5nKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaXNNYXRjaGluZyA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlzTWF0Y2hpbmcgJiYgKGluaXRpYWxTdGF0ZVByb3AgPSBzc3JGb3JtU3RhdGVbMF0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBzc3JGb3JtU3RhdGUgPSBtb3VudFdvcmtJblByb2dyZXNzSG9vaygpOwogICAgICAgIHNzckZvcm1TdGF0ZS5tZW1vaXplZFN0YXRlID0gc3NyRm9ybVN0YXRlLmJhc2VTdGF0ZSA9IGluaXRpYWxTdGF0ZVByb3A7CiAgICAgICAgaXNNYXRjaGluZyA9IHsKICAgICAgICAgIHBlbmRpbmc6IG51bGwsCiAgICAgICAgICBsYW5lczogMCwKICAgICAgICAgIGRpc3BhdGNoOiBudWxsLAogICAgICAgICAgbGFzdFJlbmRlcmVkUmVkdWNlcjogYWN0aW9uU3RhdGVSZWR1Y2VyLAogICAgICAgICAgbGFzdFJlbmRlcmVkU3RhdGU6IGluaXRpYWxTdGF0ZVByb3AKICAgICAgICB9OwogICAgICAgIHNzckZvcm1TdGF0ZS5xdWV1ZSA9IGlzTWF0Y2hpbmc7CiAgICAgICAgc3NyRm9ybVN0YXRlID0gZGlzcGF0Y2hTZXRTdGF0ZS5iaW5kKAogICAgICAgICAgbnVsbCwKICAgICAgICAgIGN1cnJlbnRseVJlbmRlcmluZ0ZpYmVyLAogICAgICAgICAgaXNNYXRjaGluZwogICAgICAgICk7CiAgICAgICAgaXNNYXRjaGluZy5kaXNwYXRjaCA9IHNzckZvcm1TdGF0ZTsKICAgICAgICBpc01hdGNoaW5nID0gbW91bnRTdGF0ZUltcGwoZmFsc2UpOwogICAgICAgIGluUm9vdE9yU2luZ2xldG9uID0gZGlzcGF0Y2hPcHRpbWlzdGljU2V0U3RhdGUuYmluZCgKICAgICAgICAgIG51bGwsCiAgICAgICAgICBjdXJyZW50bHlSZW5kZXJpbmdGaWJlciwKICAgICAgICAgIGZhbHNlLAogICAgICAgICAgaXNNYXRjaGluZy5xdWV1ZQogICAgICAgICk7CiAgICAgICAgaXNNYXRjaGluZyA9IG1vdW50V29ya0luUHJvZ3Jlc3NIb29rKCk7CiAgICAgICAgbWFya2VySW5zdGFuY2UgPSB7CiAgICAgICAgICBzdGF0ZTogaW5pdGlhbFN0YXRlUHJvcCwKICAgICAgICAgIGRpc3BhdGNoOiBudWxsLAogICAgICAgICAgYWN0aW9uLAogICAgICAgICAgcGVuZGluZzogbnVsbAogICAgICAgIH07CiAgICAgICAgaXNNYXRjaGluZy5xdWV1ZSA9IG1hcmtlckluc3RhbmNlOwogICAgICAgIHNzckZvcm1TdGF0ZSA9IGRpc3BhdGNoQWN0aW9uU3RhdGUuYmluZCgKICAgICAgICAgIG51bGwsCiAgICAgICAgICBjdXJyZW50bHlSZW5kZXJpbmdGaWJlciwKICAgICAgICAgIG1hcmtlckluc3RhbmNlLAogICAgICAgICAgaW5Sb290T3JTaW5nbGV0b24sCiAgICAgICAgICBzc3JGb3JtU3RhdGUKICAgICAgICApOwogICAgICAgIG1hcmtlckluc3RhbmNlLmRpc3BhdGNoID0gc3NyRm9ybVN0YXRlOwogICAgICAgIGlzTWF0Y2hpbmcubWVtb2l6ZWRTdGF0ZSA9IGFjdGlvbjsKICAgICAgICByZXR1cm4gW2luaXRpYWxTdGF0ZVByb3AsIHNzckZvcm1TdGF0ZSwgZmFsc2VdOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHVwZGF0ZUFjdGlvblN0YXRlKGFjdGlvbikgewogICAgICAgIHZhciBzdGF0ZUhvb2sgPSB1cGRhdGVXb3JrSW5Qcm9ncmVzc0hvb2soKTsKICAgICAgICByZXR1cm4gdXBkYXRlQWN0aW9uU3RhdGVJbXBsKHN0YXRlSG9vaywgY3VycmVudEhvb2ssIGFjdGlvbik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdXBkYXRlQWN0aW9uU3RhdGVJbXBsKHN0YXRlSG9vaywgY3VycmVudFN0YXRlSG9vaywgYWN0aW9uKSB7CiAgICAgICAgY3VycmVudFN0YXRlSG9vayA9IHVwZGF0ZVJlZHVjZXJJbXBsKAogICAgICAgICAgc3RhdGVIb29rLAogICAgICAgICAgY3VycmVudFN0YXRlSG9vaywKICAgICAgICAgIGFjdGlvblN0YXRlUmVkdWNlcgogICAgICAgIClbMF07CiAgICAgICAgc3RhdGVIb29rID0gdXBkYXRlUmVkdWNlcihiYXNpY1N0YXRlUmVkdWNlcilbMF07CiAgICAgICAgaWYgKCJvYmplY3QiID09PSB0eXBlb2YgY3VycmVudFN0YXRlSG9vayAmJiBudWxsICE9PSBjdXJyZW50U3RhdGVIb29rICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBjdXJyZW50U3RhdGVIb29rLnRoZW4pCiAgICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgc3RhdGUgPSB1c2VUaGVuYWJsZShjdXJyZW50U3RhdGVIb29rKTsKICAgICAgICAgIH0gY2F0Y2ggKHgpIHsKICAgICAgICAgICAgaWYgKHggPT09IFN1c3BlbnNlRXhjZXB0aW9uKSB0aHJvdyBTdXNwZW5zZUFjdGlvbkV4Y2VwdGlvbjsKICAgICAgICAgICAgdGhyb3cgeDsKICAgICAgICAgIH0KICAgICAgICBlbHNlIHN0YXRlID0gY3VycmVudFN0YXRlSG9vazsKICAgICAgICBjdXJyZW50U3RhdGVIb29rID0gdXBkYXRlV29ya0luUHJvZ3Jlc3NIb29rKCk7CiAgICAgICAgdmFyIGFjdGlvblF1ZXVlID0gY3VycmVudFN0YXRlSG9vay5xdWV1ZSwgZGlzcGF0Y2ggPSBhY3Rpb25RdWV1ZS5kaXNwYXRjaDsKICAgICAgICBhY3Rpb24gIT09IGN1cnJlbnRTdGF0ZUhvb2subWVtb2l6ZWRTdGF0ZSAmJiAoY3VycmVudGx5UmVuZGVyaW5nRmliZXIuZmxhZ3MgfD0gMjA0OCwgcHVzaFNpbXBsZUVmZmVjdCgKICAgICAgICAgIEhhc0VmZmVjdCB8IFBhc3NpdmUsCiAgICAgICAgICBjcmVhdGVFZmZlY3RJbnN0YW5jZSgpLAogICAgICAgICAgYWN0aW9uU3RhdGVBY3Rpb25FZmZlY3QuYmluZChudWxsLCBhY3Rpb25RdWV1ZSwgYWN0aW9uKSwKICAgICAgICAgIG51bGwKICAgICAgICApKTsKICAgICAgICByZXR1cm4gW3N0YXRlLCBkaXNwYXRjaCwgc3RhdGVIb29rXTsKICAgICAgfQogICAgICBmdW5jdGlvbiBhY3Rpb25TdGF0ZUFjdGlvbkVmZmVjdChhY3Rpb25RdWV1ZSwgYWN0aW9uKSB7CiAgICAgICAgYWN0aW9uUXVldWUuYWN0aW9uID0gYWN0aW9uOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlcmVuZGVyQWN0aW9uU3RhdGUoYWN0aW9uKSB7CiAgICAgICAgdmFyIHN0YXRlSG9vayA9IHVwZGF0ZVdvcmtJblByb2dyZXNzSG9vaygpLCBjdXJyZW50U3RhdGVIb29rID0gY3VycmVudEhvb2s7CiAgICAgICAgaWYgKG51bGwgIT09IGN1cnJlbnRTdGF0ZUhvb2spCiAgICAgICAgICByZXR1cm4gdXBkYXRlQWN0aW9uU3RhdGVJbXBsKHN0YXRlSG9vaywgY3VycmVudFN0YXRlSG9vaywgYWN0aW9uKTsKICAgICAgICB1cGRhdGVXb3JrSW5Qcm9ncmVzc0hvb2soKTsKICAgICAgICBzdGF0ZUhvb2sgPSBzdGF0ZUhvb2subWVtb2l6ZWRTdGF0ZTsKICAgICAgICBjdXJyZW50U3RhdGVIb29rID0gdXBkYXRlV29ya0luUHJvZ3Jlc3NIb29rKCk7CiAgICAgICAgdmFyIGRpc3BhdGNoID0gY3VycmVudFN0YXRlSG9vay5xdWV1ZS5kaXNwYXRjaDsKICAgICAgICBjdXJyZW50U3RhdGVIb29rLm1lbW9pemVkU3RhdGUgPSBhY3Rpb247CiAgICAgICAgcmV0dXJuIFtzdGF0ZUhvb2ssIGRpc3BhdGNoLCBmYWxzZV07CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcHVzaFNpbXBsZUVmZmVjdCh0YWcsIGluc3QsIGNyZWF0ZSwgY3JlYXRlRGVwcykgewogICAgICAgIHRhZyA9IHsKICAgICAgICAgIHRhZywKICAgICAgICAgIGNyZWF0ZSwKICAgICAgICAgIGRlcHM6IGNyZWF0ZURlcHMsCiAgICAgICAgICBpbnN0LAogICAgICAgICAgbmV4dDogbnVsbAogICAgICAgIH07CiAgICAgICAgaW5zdCA9IGN1cnJlbnRseVJlbmRlcmluZ0ZpYmVyLnVwZGF0ZVF1ZXVlOwogICAgICAgIG51bGwgPT09IGluc3QgJiYgKGluc3QgPSBjcmVhdGVGdW5jdGlvbkNvbXBvbmVudFVwZGF0ZVF1ZXVlKCksIGN1cnJlbnRseVJlbmRlcmluZ0ZpYmVyLnVwZGF0ZVF1ZXVlID0gaW5zdCk7CiAgICAgICAgY3JlYXRlID0gaW5zdC5sYXN0RWZmZWN0OwogICAgICAgIG51bGwgPT09IGNyZWF0ZSA/IGluc3QubGFzdEVmZmVjdCA9IHRhZy5uZXh0ID0gdGFnIDogKGNyZWF0ZURlcHMgPSBjcmVhdGUubmV4dCwgY3JlYXRlLm5leHQgPSB0YWcsIHRhZy5uZXh0ID0gY3JlYXRlRGVwcywgaW5zdC5sYXN0RWZmZWN0ID0gdGFnKTsKICAgICAgICByZXR1cm4gdGFnOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNyZWF0ZUVmZmVjdEluc3RhbmNlKCkgewogICAgICAgIHJldHVybiB7IGRlc3Ryb3k6IHZvaWQgMCwgcmVzb3VyY2U6IHZvaWQgMCB9OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1vdW50UmVmKGluaXRpYWxWYWx1ZSkgewogICAgICAgIHZhciBob29rID0gbW91bnRXb3JrSW5Qcm9ncmVzc0hvb2soKTsKICAgICAgICBpbml0aWFsVmFsdWUgPSB7IGN1cnJlbnQ6IGluaXRpYWxWYWx1ZSB9OwogICAgICAgIHJldHVybiBob29rLm1lbW9pemVkU3RhdGUgPSBpbml0aWFsVmFsdWU7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbW91bnRFZmZlY3RJbXBsKGZpYmVyRmxhZ3MsIGhvb2tGbGFncywgY3JlYXRlLCBjcmVhdGVEZXBzKSB7CiAgICAgICAgdmFyIGhvb2sgPSBtb3VudFdvcmtJblByb2dyZXNzSG9vaygpOwogICAgICAgIGNyZWF0ZURlcHMgPSB2b2lkIDAgPT09IGNyZWF0ZURlcHMgPyBudWxsIDogY3JlYXRlRGVwczsKICAgICAgICBjdXJyZW50bHlSZW5kZXJpbmdGaWJlci5mbGFncyB8PSBmaWJlckZsYWdzOwogICAgICAgIGhvb2subWVtb2l6ZWRTdGF0ZSA9IHB1c2hTaW1wbGVFZmZlY3QoCiAgICAgICAgICBIYXNFZmZlY3QgfCBob29rRmxhZ3MsCiAgICAgICAgICBjcmVhdGVFZmZlY3RJbnN0YW5jZSgpLAogICAgICAgICAgY3JlYXRlLAogICAgICAgICAgY3JlYXRlRGVwcwogICAgICAgICk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdXBkYXRlRWZmZWN0SW1wbChmaWJlckZsYWdzLCBob29rRmxhZ3MsIGNyZWF0ZSwgZGVwcykgewogICAgICAgIHZhciBob29rID0gdXBkYXRlV29ya0luUHJvZ3Jlc3NIb29rKCk7CiAgICAgICAgZGVwcyA9IHZvaWQgMCA9PT0gZGVwcyA/IG51bGwgOiBkZXBzOwogICAgICAgIHZhciBpbnN0ID0gaG9vay5tZW1vaXplZFN0YXRlLmluc3Q7CiAgICAgICAgbnVsbCAhPT0gY3VycmVudEhvb2sgJiYgbnVsbCAhPT0gZGVwcyAmJiBhcmVIb29rSW5wdXRzRXF1YWwoZGVwcywgY3VycmVudEhvb2subWVtb2l6ZWRTdGF0ZS5kZXBzKSA/IGhvb2subWVtb2l6ZWRTdGF0ZSA9IHB1c2hTaW1wbGVFZmZlY3QoaG9va0ZsYWdzLCBpbnN0LCBjcmVhdGUsIGRlcHMpIDogKGN1cnJlbnRseVJlbmRlcmluZ0ZpYmVyLmZsYWdzIHw9IGZpYmVyRmxhZ3MsIGhvb2subWVtb2l6ZWRTdGF0ZSA9IHB1c2hTaW1wbGVFZmZlY3QoCiAgICAgICAgICBIYXNFZmZlY3QgfCBob29rRmxhZ3MsCiAgICAgICAgICBpbnN0LAogICAgICAgICAgY3JlYXRlLAogICAgICAgICAgZGVwcwogICAgICAgICkpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1vdW50RWZmZWN0KGNyZWF0ZSwgY3JlYXRlRGVwcykgewogICAgICAgIChjdXJyZW50bHlSZW5kZXJpbmdGaWJlci5tb2RlICYgU3RyaWN0RWZmZWN0c01vZGUpICE9PSBOb01vZGUgJiYgKGN1cnJlbnRseVJlbmRlcmluZ0ZpYmVyLm1vZGUgJiBOb1N0cmljdFBhc3NpdmVFZmZlY3RzTW9kZSkgPT09IE5vTW9kZSA/IG1vdW50RWZmZWN0SW1wbCgyNzY4MjYxMTIsIFBhc3NpdmUsIGNyZWF0ZSwgY3JlYXRlRGVwcykgOiBtb3VudEVmZmVjdEltcGwoODM5MDY1NiwgUGFzc2l2ZSwgY3JlYXRlLCBjcmVhdGVEZXBzKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBtb3VudExheW91dEVmZmVjdChjcmVhdGUsIGRlcHMpIHsKICAgICAgICB2YXIgZmliZXJGbGFncyA9IDQxOTQzMDg7CiAgICAgICAgKGN1cnJlbnRseVJlbmRlcmluZ0ZpYmVyLm1vZGUgJiBTdHJpY3RFZmZlY3RzTW9kZSkgIT09IE5vTW9kZSAmJiAoZmliZXJGbGFncyB8PSAxMzQyMTc3MjgpOwogICAgICAgIHJldHVybiBtb3VudEVmZmVjdEltcGwoZmliZXJGbGFncywgTGF5b3V0LCBjcmVhdGUsIGRlcHMpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGltcGVyYXRpdmVIYW5kbGVFZmZlY3QoY3JlYXRlLCByZWYpIHsKICAgICAgICBpZiAoImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHJlZikgewogICAgICAgICAgY3JlYXRlID0gY3JlYXRlKCk7CiAgICAgICAgICB2YXIgcmVmQ2xlYW51cCA9IHJlZihjcmVhdGUpOwogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgcmVmQ2xlYW51cCA/IHJlZkNsZWFudXAoKSA6IHJlZihudWxsKTsKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIGlmIChudWxsICE9PSByZWYgJiYgdm9pZCAwICE9PSByZWYpCiAgICAgICAgICByZXR1cm4gcmVmLmhhc093blByb3BlcnR5KCJjdXJyZW50IikgfHwgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIkV4cGVjdGVkIHVzZUltcGVyYXRpdmVIYW5kbGUoKSBmaXJzdCBhcmd1bWVudCB0byBlaXRoZXIgYmUgYSByZWYgY2FsbGJhY2sgb3IgUmVhY3QuY3JlYXRlUmVmKCkgb2JqZWN0LiBJbnN0ZWFkIHJlY2VpdmVkOiAlcy4iLAogICAgICAgICAgICAiYW4gb2JqZWN0IHdpdGgga2V5cyB7IiArIE9iamVjdC5rZXlzKHJlZikuam9pbigiLCAiKSArICJ9IgogICAgICAgICAgKSwgY3JlYXRlID0gY3JlYXRlKCksIHJlZi5jdXJyZW50ID0gY3JlYXRlLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmVmLmN1cnJlbnQgPSBudWxsOwogICAgICAgICAgfTsKICAgICAgfQogICAgICBmdW5jdGlvbiBtb3VudEltcGVyYXRpdmVIYW5kbGUocmVmLCBjcmVhdGUsIGRlcHMpIHsKICAgICAgICAiZnVuY3Rpb24iICE9PSB0eXBlb2YgY3JlYXRlICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiRXhwZWN0ZWQgdXNlSW1wZXJhdGl2ZUhhbmRsZSgpIHNlY29uZCBhcmd1bWVudCB0byBiZSBhIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhIGhhbmRsZS4gSW5zdGVhZCByZWNlaXZlZDogJXMuIiwKICAgICAgICAgIG51bGwgIT09IGNyZWF0ZSA/IHR5cGVvZiBjcmVhdGUgOiAibnVsbCIKICAgICAgICApOwogICAgICAgIGRlcHMgPSBudWxsICE9PSBkZXBzICYmIHZvaWQgMCAhPT0gZGVwcyA/IGRlcHMuY29uY2F0KFtyZWZdKSA6IG51bGw7CiAgICAgICAgdmFyIGZpYmVyRmxhZ3MgPSA0MTk0MzA4OwogICAgICAgIChjdXJyZW50bHlSZW5kZXJpbmdGaWJlci5tb2RlICYgU3RyaWN0RWZmZWN0c01vZGUpICE9PSBOb01vZGUgJiYgKGZpYmVyRmxhZ3MgfD0gMTM0MjE3NzI4KTsKICAgICAgICBtb3VudEVmZmVjdEltcGwoCiAgICAgICAgICBmaWJlckZsYWdzLAogICAgICAgICAgTGF5b3V0LAogICAgICAgICAgaW1wZXJhdGl2ZUhhbmRsZUVmZmVjdC5iaW5kKG51bGwsIGNyZWF0ZSwgcmVmKSwKICAgICAgICAgIGRlcHMKICAgICAgICApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHVwZGF0ZUltcGVyYXRpdmVIYW5kbGUocmVmLCBjcmVhdGUsIGRlcHMpIHsKICAgICAgICAiZnVuY3Rpb24iICE9PSB0eXBlb2YgY3JlYXRlICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiRXhwZWN0ZWQgdXNlSW1wZXJhdGl2ZUhhbmRsZSgpIHNlY29uZCBhcmd1bWVudCB0byBiZSBhIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhIGhhbmRsZS4gSW5zdGVhZCByZWNlaXZlZDogJXMuIiwKICAgICAgICAgIG51bGwgIT09IGNyZWF0ZSA/IHR5cGVvZiBjcmVhdGUgOiAibnVsbCIKICAgICAgICApOwogICAgICAgIGRlcHMgPSBudWxsICE9PSBkZXBzICYmIHZvaWQgMCAhPT0gZGVwcyA/IGRlcHMuY29uY2F0KFtyZWZdKSA6IG51bGw7CiAgICAgICAgdXBkYXRlRWZmZWN0SW1wbCgKICAgICAgICAgIDQsCiAgICAgICAgICBMYXlvdXQsCiAgICAgICAgICBpbXBlcmF0aXZlSGFuZGxlRWZmZWN0LmJpbmQobnVsbCwgY3JlYXRlLCByZWYpLAogICAgICAgICAgZGVwcwogICAgICAgICk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbW91bnRDYWxsYmFjayhjYWxsYmFjaywgZGVwcykgewogICAgICAgIG1vdW50V29ya0luUHJvZ3Jlc3NIb29rKCkubWVtb2l6ZWRTdGF0ZSA9IFsKICAgICAgICAgIGNhbGxiYWNrLAogICAgICAgICAgdm9pZCAwID09PSBkZXBzID8gbnVsbCA6IGRlcHMKICAgICAgICBdOwogICAgICAgIHJldHVybiBjYWxsYmFjazsKICAgICAgfQogICAgICBmdW5jdGlvbiB1cGRhdGVDYWxsYmFjayhjYWxsYmFjaywgZGVwcykgewogICAgICAgIHZhciBob29rID0gdXBkYXRlV29ya0luUHJvZ3Jlc3NIb29rKCk7CiAgICAgICAgZGVwcyA9IHZvaWQgMCA9PT0gZGVwcyA/IG51bGwgOiBkZXBzOwogICAgICAgIHZhciBwcmV2U3RhdGUgPSBob29rLm1lbW9pemVkU3RhdGU7CiAgICAgICAgaWYgKG51bGwgIT09IGRlcHMgJiYgYXJlSG9va0lucHV0c0VxdWFsKGRlcHMsIHByZXZTdGF0ZVsxXSkpCiAgICAgICAgICByZXR1cm4gcHJldlN0YXRlWzBdOwogICAgICAgIGhvb2subWVtb2l6ZWRTdGF0ZSA9IFtjYWxsYmFjaywgZGVwc107CiAgICAgICAgcmV0dXJuIGNhbGxiYWNrOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1vdW50TWVtbyhuZXh0Q3JlYXRlLCBkZXBzKSB7CiAgICAgICAgdmFyIGhvb2sgPSBtb3VudFdvcmtJblByb2dyZXNzSG9vaygpOwogICAgICAgIGRlcHMgPSB2b2lkIDAgPT09IGRlcHMgPyBudWxsIDogZGVwczsKICAgICAgICB2YXIgbmV4dFZhbHVlID0gbmV4dENyZWF0ZSgpOwogICAgICAgIGlmIChzaG91bGREb3VibGVJbnZva2VVc2VyRm5zSW5Ib29rc0RFVikgewogICAgICAgICAgc2V0SXNTdHJpY3RNb2RlRm9yRGV2dG9vbHModHJ1ZSk7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBuZXh0Q3JlYXRlKCk7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBzZXRJc1N0cmljdE1vZGVGb3JEZXZ0b29scyhmYWxzZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGhvb2subWVtb2l6ZWRTdGF0ZSA9IFtuZXh0VmFsdWUsIGRlcHNdOwogICAgICAgIHJldHVybiBuZXh0VmFsdWU7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdXBkYXRlTWVtbyhuZXh0Q3JlYXRlLCBkZXBzKSB7CiAgICAgICAgdmFyIGhvb2sgPSB1cGRhdGVXb3JrSW5Qcm9ncmVzc0hvb2soKTsKICAgICAgICBkZXBzID0gdm9pZCAwID09PSBkZXBzID8gbnVsbCA6IGRlcHM7CiAgICAgICAgdmFyIHByZXZTdGF0ZSA9IGhvb2subWVtb2l6ZWRTdGF0ZTsKICAgICAgICBpZiAobnVsbCAhPT0gZGVwcyAmJiBhcmVIb29rSW5wdXRzRXF1YWwoZGVwcywgcHJldlN0YXRlWzFdKSkKICAgICAgICAgIHJldHVybiBwcmV2U3RhdGVbMF07CiAgICAgICAgcHJldlN0YXRlID0gbmV4dENyZWF0ZSgpOwogICAgICAgIGlmIChzaG91bGREb3VibGVJbnZva2VVc2VyRm5zSW5Ib29rc0RFVikgewogICAgICAgICAgc2V0SXNTdHJpY3RNb2RlRm9yRGV2dG9vbHModHJ1ZSk7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBuZXh0Q3JlYXRlKCk7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBzZXRJc1N0cmljdE1vZGVGb3JEZXZ0b29scyhmYWxzZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGhvb2subWVtb2l6ZWRTdGF0ZSA9IFtwcmV2U3RhdGUsIGRlcHNdOwogICAgICAgIHJldHVybiBwcmV2U3RhdGU7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbW91bnREZWZlcnJlZFZhbHVlKHZhbHVlLCBpbml0aWFsVmFsdWUpIHsKICAgICAgICB2YXIgaG9vayA9IG1vdW50V29ya0luUHJvZ3Jlc3NIb29rKCk7CiAgICAgICAgcmV0dXJuIG1vdW50RGVmZXJyZWRWYWx1ZUltcGwoaG9vaywgdmFsdWUsIGluaXRpYWxWYWx1ZSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdXBkYXRlRGVmZXJyZWRWYWx1ZSh2YWx1ZSwgaW5pdGlhbFZhbHVlKSB7CiAgICAgICAgdmFyIGhvb2sgPSB1cGRhdGVXb3JrSW5Qcm9ncmVzc0hvb2soKTsKICAgICAgICByZXR1cm4gdXBkYXRlRGVmZXJyZWRWYWx1ZUltcGwoCiAgICAgICAgICBob29rLAogICAgICAgICAgY3VycmVudEhvb2subWVtb2l6ZWRTdGF0ZSwKICAgICAgICAgIHZhbHVlLAogICAgICAgICAgaW5pdGlhbFZhbHVlCiAgICAgICAgKTsKICAgICAgfQogICAgICBmdW5jdGlvbiByZXJlbmRlckRlZmVycmVkVmFsdWUodmFsdWUsIGluaXRpYWxWYWx1ZSkgewogICAgICAgIHZhciBob29rID0gdXBkYXRlV29ya0luUHJvZ3Jlc3NIb29rKCk7CiAgICAgICAgcmV0dXJuIG51bGwgPT09IGN1cnJlbnRIb29rID8gbW91bnREZWZlcnJlZFZhbHVlSW1wbChob29rLCB2YWx1ZSwgaW5pdGlhbFZhbHVlKSA6IHVwZGF0ZURlZmVycmVkVmFsdWVJbXBsKAogICAgICAgICAgaG9vaywKICAgICAgICAgIGN1cnJlbnRIb29rLm1lbW9pemVkU3RhdGUsCiAgICAgICAgICB2YWx1ZSwKICAgICAgICAgIGluaXRpYWxWYWx1ZQogICAgICAgICk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbW91bnREZWZlcnJlZFZhbHVlSW1wbChob29rLCB2YWx1ZSwgaW5pdGlhbFZhbHVlKSB7CiAgICAgICAgaWYgKHZvaWQgMCA9PT0gaW5pdGlhbFZhbHVlIHx8IDAgIT09IChyZW5kZXJMYW5lcyAmIDEwNzM3NDE4MjQpKQogICAgICAgICAgcmV0dXJuIGhvb2subWVtb2l6ZWRTdGF0ZSA9IHZhbHVlOwogICAgICAgIGhvb2subWVtb2l6ZWRTdGF0ZSA9IGluaXRpYWxWYWx1ZTsKICAgICAgICBob29rID0gcmVxdWVzdERlZmVycmVkTGFuZSgpOwogICAgICAgIGN1cnJlbnRseVJlbmRlcmluZ0ZpYmVyLmxhbmVzIHw9IGhvb2s7CiAgICAgICAgd29ya0luUHJvZ3Jlc3NSb290U2tpcHBlZExhbmVzIHw9IGhvb2s7CiAgICAgICAgcmV0dXJuIGluaXRpYWxWYWx1ZTsKICAgICAgfQogICAgICBmdW5jdGlvbiB1cGRhdGVEZWZlcnJlZFZhbHVlSW1wbChob29rLCBwcmV2VmFsdWUsIHZhbHVlLCBpbml0aWFsVmFsdWUpIHsKICAgICAgICBpZiAob2JqZWN0SXModmFsdWUsIHByZXZWYWx1ZSkpIHJldHVybiB2YWx1ZTsKICAgICAgICBpZiAobnVsbCAhPT0gY3VycmVudFRyZWVIaWRkZW5TdGFja0N1cnNvci5jdXJyZW50KQogICAgICAgICAgcmV0dXJuIGhvb2sgPSBtb3VudERlZmVycmVkVmFsdWVJbXBsKGhvb2ssIHZhbHVlLCBpbml0aWFsVmFsdWUpLCBvYmplY3RJcyhob29rLCBwcmV2VmFsdWUpIHx8IChkaWRSZWNlaXZlVXBkYXRlID0gdHJ1ZSksIGhvb2s7CiAgICAgICAgaWYgKDAgPT09IChyZW5kZXJMYW5lcyAmIDQyKSkKICAgICAgICAgIHJldHVybiBkaWRSZWNlaXZlVXBkYXRlID0gdHJ1ZSwgaG9vay5tZW1vaXplZFN0YXRlID0gdmFsdWU7CiAgICAgICAgaG9vayA9IHJlcXVlc3REZWZlcnJlZExhbmUoKTsKICAgICAgICBjdXJyZW50bHlSZW5kZXJpbmdGaWJlci5sYW5lcyB8PSBob29rOwogICAgICAgIHdvcmtJblByb2dyZXNzUm9vdFNraXBwZWRMYW5lcyB8PSBob29rOwogICAgICAgIHJldHVybiBwcmV2VmFsdWU7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gc3RhcnRUcmFuc2l0aW9uKGZpYmVyLCBxdWV1ZSwgcGVuZGluZ1N0YXRlLCBmaW5pc2hlZFN0YXRlLCBjYWxsYmFjaykgewogICAgICAgIHZhciBwcmV2aW91c1ByaW9yaXR5ID0gUmVhY3RET01TaGFyZWRJbnRlcm5hbHMucDsKICAgICAgICBSZWFjdERPTVNoYXJlZEludGVybmFscy5wID0gMCAhPT0gcHJldmlvdXNQcmlvcml0eSAmJiBwcmV2aW91c1ByaW9yaXR5IDwgQ29udGludW91c0V2ZW50UHJpb3JpdHkgPyBwcmV2aW91c1ByaW9yaXR5IDogQ29udGludW91c0V2ZW50UHJpb3JpdHk7CiAgICAgICAgdmFyIHByZXZUcmFuc2l0aW9uID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuVCwgY3VycmVudFRyYW5zaXRpb24gPSB7fTsKICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5UID0gY3VycmVudFRyYW5zaXRpb247CiAgICAgICAgZGlzcGF0Y2hPcHRpbWlzdGljU2V0U3RhdGUoZmliZXIsIGZhbHNlLCBxdWV1ZSwgcGVuZGluZ1N0YXRlKTsKICAgICAgICBjdXJyZW50VHJhbnNpdGlvbi5fdXBkYXRlZEZpYmVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciByZXR1cm5WYWx1ZSA9IGNhbGxiYWNrKCksIG9uU3RhcnRUcmFuc2l0aW9uRmluaXNoID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuUzsKICAgICAgICAgIG51bGwgIT09IG9uU3RhcnRUcmFuc2l0aW9uRmluaXNoICYmIG9uU3RhcnRUcmFuc2l0aW9uRmluaXNoKGN1cnJlbnRUcmFuc2l0aW9uLCByZXR1cm5WYWx1ZSk7CiAgICAgICAgICBpZiAobnVsbCAhPT0gcmV0dXJuVmFsdWUgJiYgIm9iamVjdCIgPT09IHR5cGVvZiByZXR1cm5WYWx1ZSAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgcmV0dXJuVmFsdWUudGhlbikgewogICAgICAgICAgICB2YXIgdGhlbmFibGVGb3JGaW5pc2hlZFN0YXRlID0gY2hhaW5UaGVuYWJsZVZhbHVlKAogICAgICAgICAgICAgIHJldHVyblZhbHVlLAogICAgICAgICAgICAgIGZpbmlzaGVkU3RhdGUKICAgICAgICAgICAgKTsKICAgICAgICAgICAgZGlzcGF0Y2hTZXRTdGF0ZUludGVybmFsKAogICAgICAgICAgICAgIGZpYmVyLAogICAgICAgICAgICAgIHF1ZXVlLAogICAgICAgICAgICAgIHRoZW5hYmxlRm9yRmluaXNoZWRTdGF0ZSwKICAgICAgICAgICAgICByZXF1ZXN0VXBkYXRlTGFuZShmaWJlcikKICAgICAgICAgICAgKTsKICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICBkaXNwYXRjaFNldFN0YXRlSW50ZXJuYWwoCiAgICAgICAgICAgICAgZmliZXIsCiAgICAgICAgICAgICAgcXVldWUsCiAgICAgICAgICAgICAgZmluaXNoZWRTdGF0ZSwKICAgICAgICAgICAgICByZXF1ZXN0VXBkYXRlTGFuZShmaWJlcikKICAgICAgICAgICAgKTsKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgZGlzcGF0Y2hTZXRTdGF0ZUludGVybmFsKAogICAgICAgICAgICBmaWJlciwKICAgICAgICAgICAgcXVldWUsCiAgICAgICAgICAgIHsgdGhlbjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIH0sIHN0YXR1czogInJlamVjdGVkIiwgcmVhc29uOiBlcnJvciB9LAogICAgICAgICAgICByZXF1ZXN0VXBkYXRlTGFuZShmaWJlcikKICAgICAgICAgICk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIFJlYWN0RE9NU2hhcmVkSW50ZXJuYWxzLnAgPSBwcmV2aW91c1ByaW9yaXR5LCBSZWFjdFNoYXJlZEludGVybmFscy5UID0gcHJldlRyYW5zaXRpb24sIG51bGwgPT09IHByZXZUcmFuc2l0aW9uICYmIGN1cnJlbnRUcmFuc2l0aW9uLl91cGRhdGVkRmliZXJzICYmIChmaWJlciA9IGN1cnJlbnRUcmFuc2l0aW9uLl91cGRhdGVkRmliZXJzLnNpemUsIGN1cnJlbnRUcmFuc2l0aW9uLl91cGRhdGVkRmliZXJzLmNsZWFyKCksIDEwIDwgZmliZXIgJiYgY29uc29sZS53YXJuKAogICAgICAgICAgICAiRGV0ZWN0ZWQgYSBsYXJnZSBudW1iZXIgb2YgdXBkYXRlcyBpbnNpZGUgc3RhcnRUcmFuc2l0aW9uLiBJZiB0aGlzIGlzIGR1ZSB0byBhIHN1YnNjcmlwdGlvbiBwbGVhc2UgcmUtd3JpdGUgaXQgdG8gdXNlIFJlYWN0IHByb3ZpZGVkIGhvb2tzLiBPdGhlcndpc2UgY29uY3VycmVudCBtb2RlIGd1YXJhbnRlZXMgYXJlIG9mZiB0aGUgdGFibGUuIgogICAgICAgICAgKSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIHN0YXJ0SG9zdFRyYW5zaXRpb24oZm9ybUZpYmVyLCBwZW5kaW5nU3RhdGUsIGFjdGlvbiwgZm9ybURhdGEpIHsKICAgICAgICBpZiAoNSAhPT0gZm9ybUZpYmVyLnRhZykKICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAiRXhwZWN0ZWQgdGhlIGZvcm0gaW5zdGFuY2UgdG8gYmUgYSBIb3N0Q29tcG9uZW50LiBUaGlzIGlzIGEgYnVnIGluIFJlYWN0LiIKICAgICAgICAgICk7CiAgICAgICAgdmFyIHF1ZXVlID0gZW5zdXJlRm9ybUNvbXBvbmVudElzU3RhdGVmdWwoZm9ybUZpYmVyKS5xdWV1ZTsKICAgICAgICBzdGFydFRyYW5zaXRpb24oCiAgICAgICAgICBmb3JtRmliZXIsCiAgICAgICAgICBxdWV1ZSwKICAgICAgICAgIHBlbmRpbmdTdGF0ZSwKICAgICAgICAgIE5vdFBlbmRpbmdUcmFuc2l0aW9uLAogICAgICAgICAgbnVsbCA9PT0gYWN0aW9uID8gbm9vcCQyIDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJlcXVlc3RGb3JtUmVzZXQkMShmb3JtRmliZXIpOwogICAgICAgICAgICByZXR1cm4gYWN0aW9uKGZvcm1EYXRhKTsKICAgICAgICAgIH0KICAgICAgICApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGVuc3VyZUZvcm1Db21wb25lbnRJc1N0YXRlZnVsKGZvcm1GaWJlcikgewogICAgICAgIHZhciBleGlzdGluZ1N0YXRlSG9vayA9IGZvcm1GaWJlci5tZW1vaXplZFN0YXRlOwogICAgICAgIGlmIChudWxsICE9PSBleGlzdGluZ1N0YXRlSG9vaykgcmV0dXJuIGV4aXN0aW5nU3RhdGVIb29rOwogICAgICAgIGV4aXN0aW5nU3RhdGVIb29rID0gewogICAgICAgICAgbWVtb2l6ZWRTdGF0ZTogTm90UGVuZGluZ1RyYW5zaXRpb24sCiAgICAgICAgICBiYXNlU3RhdGU6IE5vdFBlbmRpbmdUcmFuc2l0aW9uLAogICAgICAgICAgYmFzZVF1ZXVlOiBudWxsLAogICAgICAgICAgcXVldWU6IHsKICAgICAgICAgICAgcGVuZGluZzogbnVsbCwKICAgICAgICAgICAgbGFuZXM6IDAsCiAgICAgICAgICAgIGRpc3BhdGNoOiBudWxsLAogICAgICAgICAgICBsYXN0UmVuZGVyZWRSZWR1Y2VyOiBiYXNpY1N0YXRlUmVkdWNlciwKICAgICAgICAgICAgbGFzdFJlbmRlcmVkU3RhdGU6IE5vdFBlbmRpbmdUcmFuc2l0aW9uCiAgICAgICAgICB9LAogICAgICAgICAgbmV4dDogbnVsbAogICAgICAgIH07CiAgICAgICAgdmFyIGluaXRpYWxSZXNldFN0YXRlID0ge307CiAgICAgICAgZXhpc3RpbmdTdGF0ZUhvb2submV4dCA9IHsKICAgICAgICAgIG1lbW9pemVkU3RhdGU6IGluaXRpYWxSZXNldFN0YXRlLAogICAgICAgICAgYmFzZVN0YXRlOiBpbml0aWFsUmVzZXRTdGF0ZSwKICAgICAgICAgIGJhc2VRdWV1ZTogbnVsbCwKICAgICAgICAgIHF1ZXVlOiB7CiAgICAgICAgICAgIHBlbmRpbmc6IG51bGwsCiAgICAgICAgICAgIGxhbmVzOiAwLAogICAgICAgICAgICBkaXNwYXRjaDogbnVsbCwKICAgICAgICAgICAgbGFzdFJlbmRlcmVkUmVkdWNlcjogYmFzaWNTdGF0ZVJlZHVjZXIsCiAgICAgICAgICAgIGxhc3RSZW5kZXJlZFN0YXRlOiBpbml0aWFsUmVzZXRTdGF0ZQogICAgICAgICAgfSwKICAgICAgICAgIG5leHQ6IG51bGwKICAgICAgICB9OwogICAgICAgIGZvcm1GaWJlci5tZW1vaXplZFN0YXRlID0gZXhpc3RpbmdTdGF0ZUhvb2s7CiAgICAgICAgZm9ybUZpYmVyID0gZm9ybUZpYmVyLmFsdGVybmF0ZTsKICAgICAgICBudWxsICE9PSBmb3JtRmliZXIgJiYgKGZvcm1GaWJlci5tZW1vaXplZFN0YXRlID0gZXhpc3RpbmdTdGF0ZUhvb2spOwogICAgICAgIHJldHVybiBleGlzdGluZ1N0YXRlSG9vazsKICAgICAgfQogICAgICBmdW5jdGlvbiByZXF1ZXN0Rm9ybVJlc2V0JDEoZm9ybUZpYmVyKSB7CiAgICAgICAgbnVsbCA9PT0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuVCAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgInJlcXVlc3RGb3JtUmVzZXQgd2FzIGNhbGxlZCBvdXRzaWRlIGEgdHJhbnNpdGlvbiBvciBhY3Rpb24uIFRvIGZpeCwgbW92ZSB0byBhbiBhY3Rpb24sIG9yIHdyYXAgd2l0aCBzdGFydFRyYW5zaXRpb24uIgogICAgICAgICk7CiAgICAgICAgdmFyIHJlc2V0U3RhdGVRdWV1ZSA9IGVuc3VyZUZvcm1Db21wb25lbnRJc1N0YXRlZnVsKGZvcm1GaWJlcikubmV4dC5xdWV1ZTsKICAgICAgICBkaXNwYXRjaFNldFN0YXRlSW50ZXJuYWwoCiAgICAgICAgICBmb3JtRmliZXIsCiAgICAgICAgICByZXNldFN0YXRlUXVldWUsCiAgICAgICAgICB7fSwKICAgICAgICAgIHJlcXVlc3RVcGRhdGVMYW5lKGZvcm1GaWJlcikKICAgICAgICApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1vdW50VHJhbnNpdGlvbigpIHsKICAgICAgICB2YXIgc3RhdGVIb29rID0gbW91bnRTdGF0ZUltcGwoZmFsc2UpOwogICAgICAgIHN0YXRlSG9vayA9IHN0YXJ0VHJhbnNpdGlvbi5iaW5kKAogICAgICAgICAgbnVsbCwKICAgICAgICAgIGN1cnJlbnRseVJlbmRlcmluZ0ZpYmVyLAogICAgICAgICAgc3RhdGVIb29rLnF1ZXVlLAogICAgICAgICAgdHJ1ZSwKICAgICAgICAgIGZhbHNlCiAgICAgICAgKTsKICAgICAgICBtb3VudFdvcmtJblByb2dyZXNzSG9vaygpLm1lbW9pemVkU3RhdGUgPSBzdGF0ZUhvb2s7CiAgICAgICAgcmV0dXJuIFtmYWxzZSwgc3RhdGVIb29rXTsKICAgICAgfQogICAgICBmdW5jdGlvbiB1cGRhdGVUcmFuc2l0aW9uKCkgewogICAgICAgIHZhciBib29sZWFuT3JUaGVuYWJsZSA9IHVwZGF0ZVJlZHVjZXIoYmFzaWNTdGF0ZVJlZHVjZXIpWzBdLCBzdGFydCA9IHVwZGF0ZVdvcmtJblByb2dyZXNzSG9vaygpLm1lbW9pemVkU3RhdGU7CiAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICJib29sZWFuIiA9PT0gdHlwZW9mIGJvb2xlYW5PclRoZW5hYmxlID8gYm9vbGVhbk9yVGhlbmFibGUgOiB1c2VUaGVuYWJsZShib29sZWFuT3JUaGVuYWJsZSksCiAgICAgICAgICBzdGFydAogICAgICAgIF07CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmVyZW5kZXJUcmFuc2l0aW9uKCkgewogICAgICAgIHZhciBib29sZWFuT3JUaGVuYWJsZSA9IHJlcmVuZGVyUmVkdWNlcihiYXNpY1N0YXRlUmVkdWNlcilbMF0sIHN0YXJ0ID0gdXBkYXRlV29ya0luUHJvZ3Jlc3NIb29rKCkubWVtb2l6ZWRTdGF0ZTsKICAgICAgICByZXR1cm4gWwogICAgICAgICAgImJvb2xlYW4iID09PSB0eXBlb2YgYm9vbGVhbk9yVGhlbmFibGUgPyBib29sZWFuT3JUaGVuYWJsZSA6IHVzZVRoZW5hYmxlKGJvb2xlYW5PclRoZW5hYmxlKSwKICAgICAgICAgIHN0YXJ0CiAgICAgICAgXTsKICAgICAgfQogICAgICBmdW5jdGlvbiB1c2VIb3N0VHJhbnNpdGlvblN0YXR1cygpIHsKICAgICAgICByZXR1cm4gcmVhZENvbnRleHQoSG9zdFRyYW5zaXRpb25Db250ZXh0KTsKICAgICAgfQogICAgICBmdW5jdGlvbiBtb3VudElkKCkgewogICAgICAgIHZhciBob29rID0gbW91bnRXb3JrSW5Qcm9ncmVzc0hvb2soKSwgaWRlbnRpZmllclByZWZpeCA9IHdvcmtJblByb2dyZXNzUm9vdC5pZGVudGlmaWVyUHJlZml4OwogICAgICAgIGlmIChpc0h5ZHJhdGluZykgewogICAgICAgICAgdmFyIHRyZWVJZCA9IHRyZWVDb250ZXh0T3ZlcmZsb3c7CiAgICAgICAgICB2YXIgaWRXaXRoTGVhZGluZ0JpdCA9IHRyZWVDb250ZXh0SWQ7CiAgICAgICAgICB0cmVlSWQgPSAoaWRXaXRoTGVhZGluZ0JpdCAmIH4oMSA8PCAzMiAtIGNsejMyKGlkV2l0aExlYWRpbmdCaXQpIC0gMSkpLnRvU3RyaW5nKDMyKSArIHRyZWVJZDsKICAgICAgICAgIGlkZW50aWZpZXJQcmVmaXggPSAiwqsiICsgaWRlbnRpZmllclByZWZpeCArICJSIiArIHRyZWVJZDsKICAgICAgICAgIHRyZWVJZCA9IGxvY2FsSWRDb3VudGVyKys7CiAgICAgICAgICAwIDwgdHJlZUlkICYmIChpZGVudGlmaWVyUHJlZml4ICs9ICJIIiArIHRyZWVJZC50b1N0cmluZygzMikpOwogICAgICAgICAgaWRlbnRpZmllclByZWZpeCArPSAiwrsiOwogICAgICAgIH0gZWxzZQogICAgICAgICAgdHJlZUlkID0gZ2xvYmFsQ2xpZW50SWRDb3VudGVyKyssIGlkZW50aWZpZXJQcmVmaXggPSAiwqsiICsgaWRlbnRpZmllclByZWZpeCArICJyIiArIHRyZWVJZC50b1N0cmluZygzMikgKyAiwrsiOwogICAgICAgIHJldHVybiBob29rLm1lbW9pemVkU3RhdGUgPSBpZGVudGlmaWVyUHJlZml4OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1vdW50UmVmcmVzaCgpIHsKICAgICAgICByZXR1cm4gbW91bnRXb3JrSW5Qcm9ncmVzc0hvb2soKS5tZW1vaXplZFN0YXRlID0gcmVmcmVzaENhY2hlLmJpbmQoCiAgICAgICAgICBudWxsLAogICAgICAgICAgY3VycmVudGx5UmVuZGVyaW5nRmliZXIKICAgICAgICApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlZnJlc2hDYWNoZShmaWJlciwgc2VlZEtleSkgewogICAgICAgIGZvciAodmFyIHByb3ZpZGVyID0gZmliZXIucmV0dXJuOyBudWxsICE9PSBwcm92aWRlcjsgKSB7CiAgICAgICAgICBzd2l0Y2ggKHByb3ZpZGVyLnRhZykgewogICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgdmFyIGxhbmUgPSByZXF1ZXN0VXBkYXRlTGFuZShwcm92aWRlcik7CiAgICAgICAgICAgICAgZmliZXIgPSBjcmVhdGVVcGRhdGUobGFuZSk7CiAgICAgICAgICAgICAgdmFyIHJvb3QyID0gZW5xdWV1ZVVwZGF0ZShwcm92aWRlciwgZmliZXIsIGxhbmUpOwogICAgICAgICAgICAgIG51bGwgIT09IHJvb3QyICYmIChzY2hlZHVsZVVwZGF0ZU9uRmliZXIocm9vdDIsIHByb3ZpZGVyLCBsYW5lKSwgZW50YW5nbGVUcmFuc2l0aW9ucyhyb290MiwgcHJvdmlkZXIsIGxhbmUpKTsKICAgICAgICAgICAgICBwcm92aWRlciA9IGNyZWF0ZUNhY2hlKCk7CiAgICAgICAgICAgICAgbnVsbCAhPT0gc2VlZEtleSAmJiB2b2lkIDAgIT09IHNlZWRLZXkgJiYgbnVsbCAhPT0gcm9vdDIgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAgICJUaGUgc2VlZCBhcmd1bWVudCBpcyBub3QgZW5hYmxlZCBvdXRzaWRlIGV4cGVyaW1lbnRhbCBjaGFubmVscy4iCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICBmaWJlci5wYXlsb2FkID0geyBjYWNoZTogcHJvdmlkZXIgfTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBwcm92aWRlciA9IHByb3ZpZGVyLnJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZGlzcGF0Y2hSZWR1Y2VyQWN0aW9uKGZpYmVyLCBxdWV1ZSwgYWN0aW9uKSB7CiAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7CiAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGFyZ3NbM10gJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICJTdGF0ZSB1cGRhdGVzIGZyb20gdGhlIHVzZVN0YXRlKCkgYW5kIHVzZVJlZHVjZXIoKSBIb29rcyBkb24ndCBzdXBwb3J0IHRoZSBzZWNvbmQgY2FsbGJhY2sgYXJndW1lbnQuIFRvIGV4ZWN1dGUgYSBzaWRlIGVmZmVjdCBhZnRlciByZW5kZXJpbmcsIGRlY2xhcmUgaXQgaW4gdGhlIGNvbXBvbmVudCBib2R5IHdpdGggdXNlRWZmZWN0KCkuIgogICAgICAgICk7CiAgICAgICAgYXJncyA9IHJlcXVlc3RVcGRhdGVMYW5lKGZpYmVyKTsKICAgICAgICB2YXIgdXBkYXRlID0gewogICAgICAgICAgbGFuZTogYXJncywKICAgICAgICAgIHJldmVydExhbmU6IDAsCiAgICAgICAgICBhY3Rpb24sCiAgICAgICAgICBoYXNFYWdlclN0YXRlOiBmYWxzZSwKICAgICAgICAgIGVhZ2VyU3RhdGU6IG51bGwsCiAgICAgICAgICBuZXh0OiBudWxsCiAgICAgICAgfTsKICAgICAgICBpc1JlbmRlclBoYXNlVXBkYXRlKGZpYmVyKSA/IGVucXVldWVSZW5kZXJQaGFzZVVwZGF0ZShxdWV1ZSwgdXBkYXRlKSA6ICh1cGRhdGUgPSBlbnF1ZXVlQ29uY3VycmVudEhvb2tVcGRhdGUoZmliZXIsIHF1ZXVlLCB1cGRhdGUsIGFyZ3MpLCBudWxsICE9PSB1cGRhdGUgJiYgKHNjaGVkdWxlVXBkYXRlT25GaWJlcih1cGRhdGUsIGZpYmVyLCBhcmdzKSwgZW50YW5nbGVUcmFuc2l0aW9uVXBkYXRlKHVwZGF0ZSwgcXVldWUsIGFyZ3MpKSk7CiAgICAgICAgbWFya1N0YXRlVXBkYXRlU2NoZWR1bGVkKGZpYmVyLCBhcmdzKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBkaXNwYXRjaFNldFN0YXRlKGZpYmVyLCBxdWV1ZSwgYWN0aW9uKSB7CiAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7CiAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGFyZ3NbM10gJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICJTdGF0ZSB1cGRhdGVzIGZyb20gdGhlIHVzZVN0YXRlKCkgYW5kIHVzZVJlZHVjZXIoKSBIb29rcyBkb24ndCBzdXBwb3J0IHRoZSBzZWNvbmQgY2FsbGJhY2sgYXJndW1lbnQuIFRvIGV4ZWN1dGUgYSBzaWRlIGVmZmVjdCBhZnRlciByZW5kZXJpbmcsIGRlY2xhcmUgaXQgaW4gdGhlIGNvbXBvbmVudCBib2R5IHdpdGggdXNlRWZmZWN0KCkuIgogICAgICAgICk7CiAgICAgICAgYXJncyA9IHJlcXVlc3RVcGRhdGVMYW5lKGZpYmVyKTsKICAgICAgICBkaXNwYXRjaFNldFN0YXRlSW50ZXJuYWwoZmliZXIsIHF1ZXVlLCBhY3Rpb24sIGFyZ3MpOwogICAgICAgIG1hcmtTdGF0ZVVwZGF0ZVNjaGVkdWxlZChmaWJlciwgYXJncyk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZGlzcGF0Y2hTZXRTdGF0ZUludGVybmFsKGZpYmVyLCBxdWV1ZSwgYWN0aW9uLCBsYW5lKSB7CiAgICAgICAgdmFyIHVwZGF0ZSA9IHsKICAgICAgICAgIGxhbmUsCiAgICAgICAgICByZXZlcnRMYW5lOiAwLAogICAgICAgICAgYWN0aW9uLAogICAgICAgICAgaGFzRWFnZXJTdGF0ZTogZmFsc2UsCiAgICAgICAgICBlYWdlclN0YXRlOiBudWxsLAogICAgICAgICAgbmV4dDogbnVsbAogICAgICAgIH07CiAgICAgICAgaWYgKGlzUmVuZGVyUGhhc2VVcGRhdGUoZmliZXIpKSBlbnF1ZXVlUmVuZGVyUGhhc2VVcGRhdGUocXVldWUsIHVwZGF0ZSk7CiAgICAgICAgZWxzZSB7CiAgICAgICAgICB2YXIgYWx0ZXJuYXRlID0gZmliZXIuYWx0ZXJuYXRlOwogICAgICAgICAgaWYgKDAgPT09IGZpYmVyLmxhbmVzICYmIChudWxsID09PSBhbHRlcm5hdGUgfHwgMCA9PT0gYWx0ZXJuYXRlLmxhbmVzKSAmJiAoYWx0ZXJuYXRlID0gcXVldWUubGFzdFJlbmRlcmVkUmVkdWNlciwgbnVsbCAhPT0gYWx0ZXJuYXRlKSkgewogICAgICAgICAgICB2YXIgcHJldkRpc3BhdGNoZXIgPSBSZWFjdFNoYXJlZEludGVybmFscy5IOwogICAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gSW52YWxpZE5lc3RlZEhvb2tzRGlzcGF0Y2hlck9uVXBkYXRlSW5ERVY7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IHF1ZXVlLmxhc3RSZW5kZXJlZFN0YXRlLCBlYWdlclN0YXRlID0gYWx0ZXJuYXRlKGN1cnJlbnRTdGF0ZSwgYWN0aW9uKTsKICAgICAgICAgICAgICB1cGRhdGUuaGFzRWFnZXJTdGF0ZSA9IHRydWU7CiAgICAgICAgICAgICAgdXBkYXRlLmVhZ2VyU3RhdGUgPSBlYWdlclN0YXRlOwogICAgICAgICAgICAgIGlmIChvYmplY3RJcyhlYWdlclN0YXRlLCBjdXJyZW50U3RhdGUpKQogICAgICAgICAgICAgICAgcmV0dXJuIGVucXVldWVVcGRhdGUkMShmaWJlciwgcXVldWUsIHVwZGF0ZSwgMCksIG51bGwgPT09IHdvcmtJblByb2dyZXNzUm9vdCAmJiBmaW5pc2hRdWV1ZWluZ0NvbmN1cnJlbnRVcGRhdGVzKCksIGZhbHNlOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLkggPSBwcmV2RGlzcGF0Y2hlcjsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgYWN0aW9uID0gZW5xdWV1ZUNvbmN1cnJlbnRIb29rVXBkYXRlKGZpYmVyLCBxdWV1ZSwgdXBkYXRlLCBsYW5lKTsKICAgICAgICAgIGlmIChudWxsICE9PSBhY3Rpb24pCiAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZVVwZGF0ZU9uRmliZXIoYWN0aW9uLCBmaWJlciwgbGFuZSksIGVudGFuZ2xlVHJhbnNpdGlvblVwZGF0ZShhY3Rpb24sIHF1ZXVlLCBsYW5lKSwgdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGRpc3BhdGNoT3B0aW1pc3RpY1NldFN0YXRlKGZpYmVyLCB0aHJvd0lmRHVyaW5nUmVuZGVyLCBxdWV1ZSwgYWN0aW9uKSB7CiAgICAgICAgbnVsbCA9PT0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuVCAmJiAwID09PSBjdXJyZW50RW50YW5nbGVkTGFuZSAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgIkFuIG9wdGltaXN0aWMgc3RhdGUgdXBkYXRlIG9jY3VycmVkIG91dHNpZGUgYSB0cmFuc2l0aW9uIG9yIGFjdGlvbi4gVG8gZml4LCBtb3ZlIHRoZSB1cGRhdGUgdG8gYW4gYWN0aW9uLCBvciB3cmFwIHdpdGggc3RhcnRUcmFuc2l0aW9uLiIKICAgICAgICApOwogICAgICAgIGFjdGlvbiA9IHsKICAgICAgICAgIGxhbmU6IDIsCiAgICAgICAgICByZXZlcnRMYW5lOiByZXF1ZXN0VHJhbnNpdGlvbkxhbmUoKSwKICAgICAgICAgIGFjdGlvbiwKICAgICAgICAgIGhhc0VhZ2VyU3RhdGU6IGZhbHNlLAogICAgICAgICAgZWFnZXJTdGF0ZTogbnVsbCwKICAgICAgICAgIG5leHQ6IG51bGwKICAgICAgICB9OwogICAgICAgIGlmIChpc1JlbmRlclBoYXNlVXBkYXRlKGZpYmVyKSkgewogICAgICAgICAgaWYgKHRocm93SWZEdXJpbmdSZW5kZXIpCiAgICAgICAgICAgIHRocm93IEVycm9yKCJDYW5ub3QgdXBkYXRlIG9wdGltaXN0aWMgc3RhdGUgd2hpbGUgcmVuZGVyaW5nLiIpOwogICAgICAgICAgY29uc29sZS5lcnJvcigiQ2Fubm90IGNhbGwgc3RhcnRUcmFuc2l0aW9uIHdoaWxlIHJlbmRlcmluZy4iKTsKICAgICAgICB9IGVsc2UKICAgICAgICAgIHRocm93SWZEdXJpbmdSZW5kZXIgPSBlbnF1ZXVlQ29uY3VycmVudEhvb2tVcGRhdGUoCiAgICAgICAgICAgIGZpYmVyLAogICAgICAgICAgICBxdWV1ZSwKICAgICAgICAgICAgYWN0aW9uLAogICAgICAgICAgICAyCiAgICAgICAgICApLCBudWxsICE9PSB0aHJvd0lmRHVyaW5nUmVuZGVyICYmIHNjaGVkdWxlVXBkYXRlT25GaWJlcih0aHJvd0lmRHVyaW5nUmVuZGVyLCBmaWJlciwgMik7CiAgICAgICAgbWFya1N0YXRlVXBkYXRlU2NoZWR1bGVkKGZpYmVyLCAyKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBpc1JlbmRlclBoYXNlVXBkYXRlKGZpYmVyKSB7CiAgICAgICAgdmFyIGFsdGVybmF0ZSA9IGZpYmVyLmFsdGVybmF0ZTsKICAgICAgICByZXR1cm4gZmliZXIgPT09IGN1cnJlbnRseVJlbmRlcmluZ0ZpYmVyIHx8IG51bGwgIT09IGFsdGVybmF0ZSAmJiBhbHRlcm5hdGUgPT09IGN1cnJlbnRseVJlbmRlcmluZ0ZpYmVyOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGVucXVldWVSZW5kZXJQaGFzZVVwZGF0ZShxdWV1ZSwgdXBkYXRlKSB7CiAgICAgICAgZGlkU2NoZWR1bGVSZW5kZXJQaGFzZVVwZGF0ZUR1cmluZ1RoaXNQYXNzID0gZGlkU2NoZWR1bGVSZW5kZXJQaGFzZVVwZGF0ZSA9IHRydWU7CiAgICAgICAgdmFyIHBlbmRpbmcgPSBxdWV1ZS5wZW5kaW5nOwogICAgICAgIG51bGwgPT09IHBlbmRpbmcgPyB1cGRhdGUubmV4dCA9IHVwZGF0ZSA6ICh1cGRhdGUubmV4dCA9IHBlbmRpbmcubmV4dCwgcGVuZGluZy5uZXh0ID0gdXBkYXRlKTsKICAgICAgICBxdWV1ZS5wZW5kaW5nID0gdXBkYXRlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGVudGFuZ2xlVHJhbnNpdGlvblVwZGF0ZShyb290MiwgcXVldWUsIGxhbmUpIHsKICAgICAgICBpZiAoMCAhPT0gKGxhbmUgJiA0MTk0MDQ4KSkgewogICAgICAgICAgdmFyIHF1ZXVlTGFuZXMgPSBxdWV1ZS5sYW5lczsKICAgICAgICAgIHF1ZXVlTGFuZXMgJj0gcm9vdDIucGVuZGluZ0xhbmVzOwogICAgICAgICAgbGFuZSB8PSBxdWV1ZUxhbmVzOwogICAgICAgICAgcXVldWUubGFuZXMgPSBsYW5lOwogICAgICAgICAgbWFya1Jvb3RFbnRhbmdsZWQocm9vdDIsIGxhbmUpOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBwdXNoRGVidWdJbmZvKGRlYnVnSW5mbykgewogICAgICAgIHZhciBwcmV2aW91c0RlYnVnSW5mbyA9IGN1cnJlbnREZWJ1Z0luZm87CiAgICAgICAgbnVsbCAhPSBkZWJ1Z0luZm8gJiYgKGN1cnJlbnREZWJ1Z0luZm8gPSBudWxsID09PSBwcmV2aW91c0RlYnVnSW5mbyA/IGRlYnVnSW5mbyA6IHByZXZpb3VzRGVidWdJbmZvLmNvbmNhdChkZWJ1Z0luZm8pKTsKICAgICAgICByZXR1cm4gcHJldmlvdXNEZWJ1Z0luZm87CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdmFsaWRhdGVGcmFnbWVudFByb3BzKGVsZW1lbnQsIGZpYmVyLCByZXR1cm5GaWJlcikgewogICAgICAgIGZvciAodmFyIGtleXMgPSBPYmplY3Qua2V5cyhlbGVtZW50LnByb3BzKSwgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTsKICAgICAgICAgIGlmICgiY2hpbGRyZW4iICE9PSBrZXkgJiYgImtleSIgIT09IGtleSkgewogICAgICAgICAgICBudWxsID09PSBmaWJlciAmJiAoZmliZXIgPSBjcmVhdGVGaWJlckZyb21FbGVtZW50KGVsZW1lbnQsIHJldHVybkZpYmVyLm1vZGUsIDApLCBmaWJlci5fZGVidWdJbmZvID0gY3VycmVudERlYnVnSW5mbywgZmliZXIucmV0dXJuID0gcmV0dXJuRmliZXIpOwogICAgICAgICAgICBydW5XaXRoRmliZXJJbkRFVigKICAgICAgICAgICAgICBmaWJlciwKICAgICAgICAgICAgICBmdW5jdGlvbihlcnJvcmVkS2V5KSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICAgICAiSW52YWxpZCBwcm9wIGAlc2Agc3VwcGxpZWQgdG8gYFJlYWN0LkZyYWdtZW50YC4gUmVhY3QuRnJhZ21lbnQgY2FuIG9ubHkgaGF2ZSBga2V5YCBhbmQgYGNoaWxkcmVuYCBwcm9wcy4iLAogICAgICAgICAgICAgICAgICBlcnJvcmVkS2V5CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAga2V5CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiB1bndyYXBUaGVuYWJsZSh0aGVuYWJsZSkgewogICAgICAgIHZhciBpbmRleCA9IHRoZW5hYmxlSW5kZXhDb3VudGVyOwogICAgICAgIHRoZW5hYmxlSW5kZXhDb3VudGVyICs9IDE7CiAgICAgICAgbnVsbCA9PT0gdGhlbmFibGVTdGF0ZSAmJiAodGhlbmFibGVTdGF0ZSA9IGNyZWF0ZVRoZW5hYmxlU3RhdGUoKSk7CiAgICAgICAgcmV0dXJuIHRyYWNrVXNlZFRoZW5hYmxlKHRoZW5hYmxlU3RhdGUsIHRoZW5hYmxlLCBpbmRleCk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY29lcmNlUmVmKHdvcmtJblByb2dyZXNzMiwgZWxlbWVudCkgewogICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnByb3BzLnJlZjsKICAgICAgICB3b3JrSW5Qcm9ncmVzczIucmVmID0gdm9pZCAwICE9PSBlbGVtZW50ID8gZWxlbWVudCA6IG51bGw7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdGhyb3dPbkludmFsaWRPYmplY3RUeXBlKHJldHVybkZpYmVyLCBuZXdDaGlsZCkgewogICAgICAgIGlmIChuZXdDaGlsZC4kJHR5cGVvZiA9PT0gUkVBQ1RfTEVHQUNZX0VMRU1FTlRfVFlQRSkKICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAnQSBSZWFjdCBFbGVtZW50IGZyb20gYW4gb2xkZXIgdmVyc2lvbiBvZiBSZWFjdCB3YXMgcmVuZGVyZWQuIFRoaXMgaXMgbm90IHN1cHBvcnRlZC4gSXQgY2FuIGhhcHBlbiBpZjpcbi0gTXVsdGlwbGUgY29waWVzIG9mIHRoZSAicmVhY3QiIHBhY2thZ2UgaXMgdXNlZC5cbi0gQSBsaWJyYXJ5IHByZS1idW5kbGVkIGFuIG9sZCBjb3B5IG9mICJyZWFjdCIgb3IgInJlYWN0L2pzeC1ydW50aW1lIi5cbi0gQSBjb21waWxlciB0cmllcyB0byAiaW5saW5lIiBKU1ggaW5zdGVhZCBvZiB1c2luZyB0aGUgcnVudGltZS4nCiAgICAgICAgICApOwogICAgICAgIHJldHVybkZpYmVyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG5ld0NoaWxkKTsKICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICJPYmplY3RzIGFyZSBub3QgdmFsaWQgYXMgYSBSZWFjdCBjaGlsZCAoZm91bmQ6ICIgKyAoIltvYmplY3QgT2JqZWN0XSIgPT09IHJldHVybkZpYmVyID8gIm9iamVjdCB3aXRoIGtleXMgeyIgKyBPYmplY3Qua2V5cyhuZXdDaGlsZCkuam9pbigiLCAiKSArICJ9IiA6IHJldHVybkZpYmVyKSArICIpLiBJZiB5b3UgbWVhbnQgdG8gcmVuZGVyIGEgY29sbGVjdGlvbiBvZiBjaGlsZHJlbiwgdXNlIGFuIGFycmF5IGluc3RlYWQuIgogICAgICAgICk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gd2Fybk9uRnVuY3Rpb25UeXBlKHJldHVybkZpYmVyLCBpbnZhbGlkQ2hpbGQpIHsKICAgICAgICB2YXIgcGFyZW50TmFtZSA9IGdldENvbXBvbmVudE5hbWVGcm9tRmliZXIocmV0dXJuRmliZXIpIHx8ICJDb21wb25lbnQiOwogICAgICAgIG93bmVySGFzRnVuY3Rpb25UeXBlV2FybmluZ1twYXJlbnROYW1lXSB8fCAob3duZXJIYXNGdW5jdGlvblR5cGVXYXJuaW5nW3BhcmVudE5hbWVdID0gdHJ1ZSwgaW52YWxpZENoaWxkID0gaW52YWxpZENoaWxkLmRpc3BsYXlOYW1lIHx8IGludmFsaWRDaGlsZC5uYW1lIHx8ICJDb21wb25lbnQiLCAzID09PSByZXR1cm5GaWJlci50YWcgPyBjb25zb2xlLmVycm9yKAogICAgICAgICAgIkZ1bmN0aW9ucyBhcmUgbm90IHZhbGlkIGFzIGEgUmVhY3QgY2hpbGQuIFRoaXMgbWF5IGhhcHBlbiBpZiB5b3UgcmV0dXJuICVzIGluc3RlYWQgb2YgPCVzIC8+IGZyb20gcmVuZGVyLiBPciBtYXliZSB5b3UgbWVhbnQgdG8gY2FsbCB0aGlzIGZ1bmN0aW9uIHJhdGhlciB0aGFuIHJldHVybiBpdC5cbiAgcm9vdC5yZW5kZXIoJXMpIiwKICAgICAgICAgIGludmFsaWRDaGlsZCwKICAgICAgICAgIGludmFsaWRDaGlsZCwKICAgICAgICAgIGludmFsaWRDaGlsZAogICAgICAgICkgOiBjb25zb2xlLmVycm9yKAogICAgICAgICAgIkZ1bmN0aW9ucyBhcmUgbm90IHZhbGlkIGFzIGEgUmVhY3QgY2hpbGQuIFRoaXMgbWF5IGhhcHBlbiBpZiB5b3UgcmV0dXJuICVzIGluc3RlYWQgb2YgPCVzIC8+IGZyb20gcmVuZGVyLiBPciBtYXliZSB5b3UgbWVhbnQgdG8gY2FsbCB0aGlzIGZ1bmN0aW9uIHJhdGhlciB0aGFuIHJldHVybiBpdC5cbiAgPCVzPnslc308LyVzPiIsCiAgICAgICAgICBpbnZhbGlkQ2hpbGQsCiAgICAgICAgICBpbnZhbGlkQ2hpbGQsCiAgICAgICAgICBwYXJlbnROYW1lLAogICAgICAgICAgaW52YWxpZENoaWxkLAogICAgICAgICAgcGFyZW50TmFtZQogICAgICAgICkpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHdhcm5PblN5bWJvbFR5cGUocmV0dXJuRmliZXIsIGludmFsaWRDaGlsZCkgewogICAgICAgIHZhciBwYXJlbnROYW1lID0gZ2V0Q29tcG9uZW50TmFtZUZyb21GaWJlcihyZXR1cm5GaWJlcikgfHwgIkNvbXBvbmVudCI7CiAgICAgICAgb3duZXJIYXNTeW1ib2xUeXBlV2FybmluZ1twYXJlbnROYW1lXSB8fCAob3duZXJIYXNTeW1ib2xUeXBlV2FybmluZ1twYXJlbnROYW1lXSA9IHRydWUsIGludmFsaWRDaGlsZCA9IFN0cmluZyhpbnZhbGlkQ2hpbGQpLCAzID09PSByZXR1cm5GaWJlci50YWcgPyBjb25zb2xlLmVycm9yKAogICAgICAgICAgIlN5bWJvbHMgYXJlIG5vdCB2YWxpZCBhcyBhIFJlYWN0IGNoaWxkLlxuICByb290LnJlbmRlciglcykiLAogICAgICAgICAgaW52YWxpZENoaWxkCiAgICAgICAgKSA6IGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiU3ltYm9scyBhcmUgbm90IHZhbGlkIGFzIGEgUmVhY3QgY2hpbGQuXG4gIDwlcz4lczwvJXM+IiwKICAgICAgICAgIHBhcmVudE5hbWUsCiAgICAgICAgICBpbnZhbGlkQ2hpbGQsCiAgICAgICAgICBwYXJlbnROYW1lCiAgICAgICAgKSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY3JlYXRlQ2hpbGRSZWNvbmNpbGVyKHNob3VsZFRyYWNrU2lkZUVmZmVjdHMpIHsKICAgICAgICBmdW5jdGlvbiBkZWxldGVDaGlsZChyZXR1cm5GaWJlciwgY2hpbGRUb0RlbGV0ZSkgewogICAgICAgICAgaWYgKHNob3VsZFRyYWNrU2lkZUVmZmVjdHMpIHsKICAgICAgICAgICAgdmFyIGRlbGV0aW9ucyA9IHJldHVybkZpYmVyLmRlbGV0aW9uczsKICAgICAgICAgICAgbnVsbCA9PT0gZGVsZXRpb25zID8gKHJldHVybkZpYmVyLmRlbGV0aW9ucyA9IFtjaGlsZFRvRGVsZXRlXSwgcmV0dXJuRmliZXIuZmxhZ3MgfD0gMTYpIDogZGVsZXRpb25zLnB1c2goY2hpbGRUb0RlbGV0ZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGRlbGV0ZVJlbWFpbmluZ0NoaWxkcmVuKHJldHVybkZpYmVyLCBjdXJyZW50Rmlyc3RDaGlsZCkgewogICAgICAgICAgaWYgKCFzaG91bGRUcmFja1NpZGVFZmZlY3RzKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGZvciAoOyBudWxsICE9PSBjdXJyZW50Rmlyc3RDaGlsZDsgKQogICAgICAgICAgICBkZWxldGVDaGlsZChyZXR1cm5GaWJlciwgY3VycmVudEZpcnN0Q2hpbGQpLCBjdXJyZW50Rmlyc3RDaGlsZCA9IGN1cnJlbnRGaXJzdENoaWxkLnNpYmxpbmc7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gbWFwUmVtYWluaW5nQ2hpbGRyZW4oY3VycmVudEZpcnN0Q2hpbGQpIHsKICAgICAgICAgIGZvciAodmFyIGV4aXN0aW5nQ2hpbGRyZW4gPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpOyBudWxsICE9PSBjdXJyZW50Rmlyc3RDaGlsZDsgKQogICAgICAgICAgICBudWxsICE9PSBjdXJyZW50Rmlyc3RDaGlsZC5rZXkgPyBleGlzdGluZ0NoaWxkcmVuLnNldChjdXJyZW50Rmlyc3RDaGlsZC5rZXksIGN1cnJlbnRGaXJzdENoaWxkKSA6IGV4aXN0aW5nQ2hpbGRyZW4uc2V0KGN1cnJlbnRGaXJzdENoaWxkLmluZGV4LCBjdXJyZW50Rmlyc3RDaGlsZCksIGN1cnJlbnRGaXJzdENoaWxkID0gY3VycmVudEZpcnN0Q2hpbGQuc2libGluZzsKICAgICAgICAgIHJldHVybiBleGlzdGluZ0NoaWxkcmVuOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB1c2VGaWJlcihmaWJlciwgcGVuZGluZ1Byb3BzKSB7CiAgICAgICAgICBmaWJlciA9IGNyZWF0ZVdvcmtJblByb2dyZXNzKGZpYmVyLCBwZW5kaW5nUHJvcHMpOwogICAgICAgICAgZmliZXIuaW5kZXggPSAwOwogICAgICAgICAgZmliZXIuc2libGluZyA9IG51bGw7CiAgICAgICAgICByZXR1cm4gZmliZXI7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHBsYWNlQ2hpbGQobmV3RmliZXIsIGxhc3RQbGFjZWRJbmRleCwgbmV3SW5kZXgpIHsKICAgICAgICAgIG5ld0ZpYmVyLmluZGV4ID0gbmV3SW5kZXg7CiAgICAgICAgICBpZiAoIXNob3VsZFRyYWNrU2lkZUVmZmVjdHMpCiAgICAgICAgICAgIHJldHVybiBuZXdGaWJlci5mbGFncyB8PSAxMDQ4NTc2LCBsYXN0UGxhY2VkSW5kZXg7CiAgICAgICAgICBuZXdJbmRleCA9IG5ld0ZpYmVyLmFsdGVybmF0ZTsKICAgICAgICAgIGlmIChudWxsICE9PSBuZXdJbmRleCkKICAgICAgICAgICAgcmV0dXJuIG5ld0luZGV4ID0gbmV3SW5kZXguaW5kZXgsIG5ld0luZGV4IDwgbGFzdFBsYWNlZEluZGV4ID8gKG5ld0ZpYmVyLmZsYWdzIHw9IDY3MTA4ODY2LCBsYXN0UGxhY2VkSW5kZXgpIDogbmV3SW5kZXg7CiAgICAgICAgICBuZXdGaWJlci5mbGFncyB8PSA2NzEwODg2NjsKICAgICAgICAgIHJldHVybiBsYXN0UGxhY2VkSW5kZXg7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHBsYWNlU2luZ2xlQ2hpbGQobmV3RmliZXIpIHsKICAgICAgICAgIHNob3VsZFRyYWNrU2lkZUVmZmVjdHMgJiYgbnVsbCA9PT0gbmV3RmliZXIuYWx0ZXJuYXRlICYmIChuZXdGaWJlci5mbGFncyB8PSA2NzEwODg2Nik7CiAgICAgICAgICByZXR1cm4gbmV3RmliZXI7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVRleHROb2RlKHJldHVybkZpYmVyLCBjdXJyZW50MiwgdGV4dENvbnRlbnQsIGxhbmVzKSB7CiAgICAgICAgICBpZiAobnVsbCA9PT0gY3VycmVudDIgfHwgNiAhPT0gY3VycmVudDIudGFnKQogICAgICAgICAgICByZXR1cm4gY3VycmVudDIgPSBjcmVhdGVGaWJlckZyb21UZXh0KAogICAgICAgICAgICAgIHRleHRDb250ZW50LAogICAgICAgICAgICAgIHJldHVybkZpYmVyLm1vZGUsCiAgICAgICAgICAgICAgbGFuZXMKICAgICAgICAgICAgKSwgY3VycmVudDIucmV0dXJuID0gcmV0dXJuRmliZXIsIGN1cnJlbnQyLl9kZWJ1Z093bmVyID0gcmV0dXJuRmliZXIsIGN1cnJlbnQyLl9kZWJ1Z1Rhc2sgPSByZXR1cm5GaWJlci5fZGVidWdUYXNrLCBjdXJyZW50Mi5fZGVidWdJbmZvID0gY3VycmVudERlYnVnSW5mbywgY3VycmVudDI7CiAgICAgICAgICBjdXJyZW50MiA9IHVzZUZpYmVyKGN1cnJlbnQyLCB0ZXh0Q29udGVudCk7CiAgICAgICAgICBjdXJyZW50Mi5yZXR1cm4gPSByZXR1cm5GaWJlcjsKICAgICAgICAgIGN1cnJlbnQyLl9kZWJ1Z0luZm8gPSBjdXJyZW50RGVidWdJbmZvOwogICAgICAgICAgcmV0dXJuIGN1cnJlbnQyOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB1cGRhdGVFbGVtZW50KHJldHVybkZpYmVyLCBjdXJyZW50MiwgZWxlbWVudCwgbGFuZXMpIHsKICAgICAgICAgIHZhciBlbGVtZW50VHlwZSA9IGVsZW1lbnQudHlwZTsKICAgICAgICAgIGlmIChlbGVtZW50VHlwZSA9PT0gUkVBQ1RfRlJBR01FTlRfVFlQRSkKICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQyID0gdXBkYXRlRnJhZ21lbnQoCiAgICAgICAgICAgICAgcmV0dXJuRmliZXIsCiAgICAgICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICAgICAgZWxlbWVudC5wcm9wcy5jaGlsZHJlbiwKICAgICAgICAgICAgICBsYW5lcywKICAgICAgICAgICAgICBlbGVtZW50LmtleQogICAgICAgICAgICApLCB2YWxpZGF0ZUZyYWdtZW50UHJvcHMoZWxlbWVudCwgY3VycmVudDIsIHJldHVybkZpYmVyKSwgY3VycmVudDI7CiAgICAgICAgICBpZiAobnVsbCAhPT0gY3VycmVudDIgJiYgKGN1cnJlbnQyLmVsZW1lbnRUeXBlID09PSBlbGVtZW50VHlwZSB8fCBpc0NvbXBhdGlibGVGYW1pbHlGb3JIb3RSZWxvYWRpbmcoY3VycmVudDIsIGVsZW1lbnQpIHx8ICJvYmplY3QiID09PSB0eXBlb2YgZWxlbWVudFR5cGUgJiYgbnVsbCAhPT0gZWxlbWVudFR5cGUgJiYgZWxlbWVudFR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX0xBWllfVFlQRSAmJiBjYWxsTGF6eUluaXRJbkRFVihlbGVtZW50VHlwZSkgPT09IGN1cnJlbnQyLnR5cGUpKQogICAgICAgICAgICByZXR1cm4gY3VycmVudDIgPSB1c2VGaWJlcihjdXJyZW50MiwgZWxlbWVudC5wcm9wcyksIGNvZXJjZVJlZihjdXJyZW50MiwgZWxlbWVudCksIGN1cnJlbnQyLnJldHVybiA9IHJldHVybkZpYmVyLCBjdXJyZW50Mi5fZGVidWdPd25lciA9IGVsZW1lbnQuX293bmVyLCBjdXJyZW50Mi5fZGVidWdJbmZvID0gY3VycmVudERlYnVnSW5mbywgY3VycmVudDI7CiAgICAgICAgICBjdXJyZW50MiA9IGNyZWF0ZUZpYmVyRnJvbUVsZW1lbnQoZWxlbWVudCwgcmV0dXJuRmliZXIubW9kZSwgbGFuZXMpOwogICAgICAgICAgY29lcmNlUmVmKGN1cnJlbnQyLCBlbGVtZW50KTsKICAgICAgICAgIGN1cnJlbnQyLnJldHVybiA9IHJldHVybkZpYmVyOwogICAgICAgICAgY3VycmVudDIuX2RlYnVnSW5mbyA9IGN1cnJlbnREZWJ1Z0luZm87CiAgICAgICAgICByZXR1cm4gY3VycmVudDI7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVBvcnRhbChyZXR1cm5GaWJlciwgY3VycmVudDIsIHBvcnRhbCwgbGFuZXMpIHsKICAgICAgICAgIGlmIChudWxsID09PSBjdXJyZW50MiB8fCA0ICE9PSBjdXJyZW50Mi50YWcgfHwgY3VycmVudDIuc3RhdGVOb2RlLmNvbnRhaW5lckluZm8gIT09IHBvcnRhbC5jb250YWluZXJJbmZvIHx8IGN1cnJlbnQyLnN0YXRlTm9kZS5pbXBsZW1lbnRhdGlvbiAhPT0gcG9ydGFsLmltcGxlbWVudGF0aW9uKQogICAgICAgICAgICByZXR1cm4gY3VycmVudDIgPSBjcmVhdGVGaWJlckZyb21Qb3J0YWwocG9ydGFsLCByZXR1cm5GaWJlci5tb2RlLCBsYW5lcyksIGN1cnJlbnQyLnJldHVybiA9IHJldHVybkZpYmVyLCBjdXJyZW50Mi5fZGVidWdJbmZvID0gY3VycmVudERlYnVnSW5mbywgY3VycmVudDI7CiAgICAgICAgICBjdXJyZW50MiA9IHVzZUZpYmVyKGN1cnJlbnQyLCBwb3J0YWwuY2hpbGRyZW4gfHwgW10pOwogICAgICAgICAgY3VycmVudDIucmV0dXJuID0gcmV0dXJuRmliZXI7CiAgICAgICAgICBjdXJyZW50Mi5fZGVidWdJbmZvID0gY3VycmVudERlYnVnSW5mbzsKICAgICAgICAgIHJldHVybiBjdXJyZW50MjsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gdXBkYXRlRnJhZ21lbnQocmV0dXJuRmliZXIsIGN1cnJlbnQyLCBmcmFnbWVudCwgbGFuZXMsIGtleSkgewogICAgICAgICAgaWYgKG51bGwgPT09IGN1cnJlbnQyIHx8IDcgIT09IGN1cnJlbnQyLnRhZykKICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQyID0gY3JlYXRlRmliZXJGcm9tRnJhZ21lbnQoCiAgICAgICAgICAgICAgZnJhZ21lbnQsCiAgICAgICAgICAgICAgcmV0dXJuRmliZXIubW9kZSwKICAgICAgICAgICAgICBsYW5lcywKICAgICAgICAgICAgICBrZXkKICAgICAgICAgICAgKSwgY3VycmVudDIucmV0dXJuID0gcmV0dXJuRmliZXIsIGN1cnJlbnQyLl9kZWJ1Z093bmVyID0gcmV0dXJuRmliZXIsIGN1cnJlbnQyLl9kZWJ1Z1Rhc2sgPSByZXR1cm5GaWJlci5fZGVidWdUYXNrLCBjdXJyZW50Mi5fZGVidWdJbmZvID0gY3VycmVudERlYnVnSW5mbywgY3VycmVudDI7CiAgICAgICAgICBjdXJyZW50MiA9IHVzZUZpYmVyKGN1cnJlbnQyLCBmcmFnbWVudCk7CiAgICAgICAgICBjdXJyZW50Mi5yZXR1cm4gPSByZXR1cm5GaWJlcjsKICAgICAgICAgIGN1cnJlbnQyLl9kZWJ1Z0luZm8gPSBjdXJyZW50RGVidWdJbmZvOwogICAgICAgICAgcmV0dXJuIGN1cnJlbnQyOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBjcmVhdGVDaGlsZChyZXR1cm5GaWJlciwgbmV3Q2hpbGQsIGxhbmVzKSB7CiAgICAgICAgICBpZiAoInN0cmluZyIgPT09IHR5cGVvZiBuZXdDaGlsZCAmJiAiIiAhPT0gbmV3Q2hpbGQgfHwgIm51bWJlciIgPT09IHR5cGVvZiBuZXdDaGlsZCB8fCAiYmlnaW50IiA9PT0gdHlwZW9mIG5ld0NoaWxkKQogICAgICAgICAgICByZXR1cm4gbmV3Q2hpbGQgPSBjcmVhdGVGaWJlckZyb21UZXh0KAogICAgICAgICAgICAgICIiICsgbmV3Q2hpbGQsCiAgICAgICAgICAgICAgcmV0dXJuRmliZXIubW9kZSwKICAgICAgICAgICAgICBsYW5lcwogICAgICAgICAgICApLCBuZXdDaGlsZC5yZXR1cm4gPSByZXR1cm5GaWJlciwgbmV3Q2hpbGQuX2RlYnVnT3duZXIgPSByZXR1cm5GaWJlciwgbmV3Q2hpbGQuX2RlYnVnVGFzayA9IHJldHVybkZpYmVyLl9kZWJ1Z1Rhc2ssIG5ld0NoaWxkLl9kZWJ1Z0luZm8gPSBjdXJyZW50RGVidWdJbmZvLCBuZXdDaGlsZDsKICAgICAgICAgIGlmICgib2JqZWN0IiA9PT0gdHlwZW9mIG5ld0NoaWxkICYmIG51bGwgIT09IG5ld0NoaWxkKSB7CiAgICAgICAgICAgIHN3aXRjaCAobmV3Q2hpbGQuJCR0eXBlb2YpIHsKICAgICAgICAgICAgICBjYXNlIFJFQUNUX0VMRU1FTlRfVFlQRToKICAgICAgICAgICAgICAgIHJldHVybiBsYW5lcyA9IGNyZWF0ZUZpYmVyRnJvbUVsZW1lbnQoCiAgICAgICAgICAgICAgICAgIG5ld0NoaWxkLAogICAgICAgICAgICAgICAgICByZXR1cm5GaWJlci5tb2RlLAogICAgICAgICAgICAgICAgICBsYW5lcwogICAgICAgICAgICAgICAgKSwgY29lcmNlUmVmKGxhbmVzLCBuZXdDaGlsZCksIGxhbmVzLnJldHVybiA9IHJldHVybkZpYmVyLCByZXR1cm5GaWJlciA9IHB1c2hEZWJ1Z0luZm8obmV3Q2hpbGQuX2RlYnVnSW5mbyksIGxhbmVzLl9kZWJ1Z0luZm8gPSBjdXJyZW50RGVidWdJbmZvLCBjdXJyZW50RGVidWdJbmZvID0gcmV0dXJuRmliZXIsIGxhbmVzOwogICAgICAgICAgICAgIGNhc2UgUkVBQ1RfUE9SVEFMX1RZUEU6CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3Q2hpbGQgPSBjcmVhdGVGaWJlckZyb21Qb3J0YWwoCiAgICAgICAgICAgICAgICAgIG5ld0NoaWxkLAogICAgICAgICAgICAgICAgICByZXR1cm5GaWJlci5tb2RlLAogICAgICAgICAgICAgICAgICBsYW5lcwogICAgICAgICAgICAgICAgKSwgbmV3Q2hpbGQucmV0dXJuID0gcmV0dXJuRmliZXIsIG5ld0NoaWxkLl9kZWJ1Z0luZm8gPSBjdXJyZW50RGVidWdJbmZvLCBuZXdDaGlsZDsKICAgICAgICAgICAgICBjYXNlIFJFQUNUX0xBWllfVFlQRToKICAgICAgICAgICAgICAgIHZhciBfcHJldkRlYnVnSW5mbyA9IHB1c2hEZWJ1Z0luZm8obmV3Q2hpbGQuX2RlYnVnSW5mbyk7CiAgICAgICAgICAgICAgICBuZXdDaGlsZCA9IGNhbGxMYXp5SW5pdEluREVWKG5ld0NoaWxkKTsKICAgICAgICAgICAgICAgIHJldHVybkZpYmVyID0gY3JlYXRlQ2hpbGQocmV0dXJuRmliZXIsIG5ld0NoaWxkLCBsYW5lcyk7CiAgICAgICAgICAgICAgICBjdXJyZW50RGVidWdJbmZvID0gX3ByZXZEZWJ1Z0luZm87CiAgICAgICAgICAgICAgICByZXR1cm4gcmV0dXJuRmliZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGlzQXJyYXlJbXBsKG5ld0NoaWxkKSB8fCBnZXRJdGVyYXRvckZuKG5ld0NoaWxkKSkKICAgICAgICAgICAgICByZXR1cm4gbGFuZXMgPSBjcmVhdGVGaWJlckZyb21GcmFnbWVudCgKICAgICAgICAgICAgICAgIG5ld0NoaWxkLAogICAgICAgICAgICAgICAgcmV0dXJuRmliZXIubW9kZSwKICAgICAgICAgICAgICAgIGxhbmVzLAogICAgICAgICAgICAgICAgbnVsbAogICAgICAgICAgICAgICksIGxhbmVzLnJldHVybiA9IHJldHVybkZpYmVyLCBsYW5lcy5fZGVidWdPd25lciA9IHJldHVybkZpYmVyLCBsYW5lcy5fZGVidWdUYXNrID0gcmV0dXJuRmliZXIuX2RlYnVnVGFzaywgcmV0dXJuRmliZXIgPSBwdXNoRGVidWdJbmZvKG5ld0NoaWxkLl9kZWJ1Z0luZm8pLCBsYW5lcy5fZGVidWdJbmZvID0gY3VycmVudERlYnVnSW5mbywgY3VycmVudERlYnVnSW5mbyA9IHJldHVybkZpYmVyLCBsYW5lczsKICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgPT09IHR5cGVvZiBuZXdDaGlsZC50aGVuKQogICAgICAgICAgICAgIHJldHVybiBfcHJldkRlYnVnSW5mbyA9IHB1c2hEZWJ1Z0luZm8obmV3Q2hpbGQuX2RlYnVnSW5mbyksIHJldHVybkZpYmVyID0gY3JlYXRlQ2hpbGQoCiAgICAgICAgICAgICAgICByZXR1cm5GaWJlciwKICAgICAgICAgICAgICAgIHVud3JhcFRoZW5hYmxlKG5ld0NoaWxkKSwKICAgICAgICAgICAgICAgIGxhbmVzCiAgICAgICAgICAgICAgKSwgY3VycmVudERlYnVnSW5mbyA9IF9wcmV2RGVidWdJbmZvLCByZXR1cm5GaWJlcjsKICAgICAgICAgICAgaWYgKG5ld0NoaWxkLiQkdHlwZW9mID09PSBSRUFDVF9DT05URVhUX1RZUEUpCiAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNoaWxkKAogICAgICAgICAgICAgICAgcmV0dXJuRmliZXIsCiAgICAgICAgICAgICAgICByZWFkQ29udGV4dER1cmluZ1JlY29uY2lsaWF0aW9uKHJldHVybkZpYmVyLCBuZXdDaGlsZCksCiAgICAgICAgICAgICAgICBsYW5lcwogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIHRocm93T25JbnZhbGlkT2JqZWN0VHlwZShyZXR1cm5GaWJlciwgbmV3Q2hpbGQpOwogICAgICAgICAgfQogICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIG5ld0NoaWxkICYmIHdhcm5PbkZ1bmN0aW9uVHlwZShyZXR1cm5GaWJlciwgbmV3Q2hpbGQpOwogICAgICAgICAgInN5bWJvbCIgPT09IHR5cGVvZiBuZXdDaGlsZCAmJiB3YXJuT25TeW1ib2xUeXBlKHJldHVybkZpYmVyLCBuZXdDaGlsZCk7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gdXBkYXRlU2xvdChyZXR1cm5GaWJlciwgb2xkRmliZXIsIG5ld0NoaWxkLCBsYW5lcykgewogICAgICAgICAgdmFyIGtleSA9IG51bGwgIT09IG9sZEZpYmVyID8gb2xkRmliZXIua2V5IDogbnVsbDsKICAgICAgICAgIGlmICgic3RyaW5nIiA9PT0gdHlwZW9mIG5ld0NoaWxkICYmICIiICE9PSBuZXdDaGlsZCB8fCAibnVtYmVyIiA9PT0gdHlwZW9mIG5ld0NoaWxkIHx8ICJiaWdpbnQiID09PSB0eXBlb2YgbmV3Q2hpbGQpCiAgICAgICAgICAgIHJldHVybiBudWxsICE9PSBrZXkgPyBudWxsIDogdXBkYXRlVGV4dE5vZGUocmV0dXJuRmliZXIsIG9sZEZpYmVyLCAiIiArIG5ld0NoaWxkLCBsYW5lcyk7CiAgICAgICAgICBpZiAoIm9iamVjdCIgPT09IHR5cGVvZiBuZXdDaGlsZCAmJiBudWxsICE9PSBuZXdDaGlsZCkgewogICAgICAgICAgICBzd2l0Y2ggKG5ld0NoaWxkLiQkdHlwZW9mKSB7CiAgICAgICAgICAgICAgY2FzZSBSRUFDVF9FTEVNRU5UX1RZUEU6CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3Q2hpbGQua2V5ID09PSBrZXkgPyAoa2V5ID0gcHVzaERlYnVnSW5mbyhuZXdDaGlsZC5fZGVidWdJbmZvKSwgcmV0dXJuRmliZXIgPSB1cGRhdGVFbGVtZW50KAogICAgICAgICAgICAgICAgICByZXR1cm5GaWJlciwKICAgICAgICAgICAgICAgICAgb2xkRmliZXIsCiAgICAgICAgICAgICAgICAgIG5ld0NoaWxkLAogICAgICAgICAgICAgICAgICBsYW5lcwogICAgICAgICAgICAgICAgKSwgY3VycmVudERlYnVnSW5mbyA9IGtleSwgcmV0dXJuRmliZXIpIDogbnVsbDsKICAgICAgICAgICAgICBjYXNlIFJFQUNUX1BPUlRBTF9UWVBFOgogICAgICAgICAgICAgICAgcmV0dXJuIG5ld0NoaWxkLmtleSA9PT0ga2V5ID8gdXBkYXRlUG9ydGFsKHJldHVybkZpYmVyLCBvbGRGaWJlciwgbmV3Q2hpbGQsIGxhbmVzKSA6IG51bGw7CiAgICAgICAgICAgICAgY2FzZSBSRUFDVF9MQVpZX1RZUEU6CiAgICAgICAgICAgICAgICByZXR1cm4ga2V5ID0gcHVzaERlYnVnSW5mbyhuZXdDaGlsZC5fZGVidWdJbmZvKSwgbmV3Q2hpbGQgPSBjYWxsTGF6eUluaXRJbkRFVihuZXdDaGlsZCksIHJldHVybkZpYmVyID0gdXBkYXRlU2xvdCgKICAgICAgICAgICAgICAgICAgcmV0dXJuRmliZXIsCiAgICAgICAgICAgICAgICAgIG9sZEZpYmVyLAogICAgICAgICAgICAgICAgICBuZXdDaGlsZCwKICAgICAgICAgICAgICAgICAgbGFuZXMKICAgICAgICAgICAgICAgICksIGN1cnJlbnREZWJ1Z0luZm8gPSBrZXksIHJldHVybkZpYmVyOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChpc0FycmF5SW1wbChuZXdDaGlsZCkgfHwgZ2V0SXRlcmF0b3JGbihuZXdDaGlsZCkpIHsKICAgICAgICAgICAgICBpZiAobnVsbCAhPT0ga2V5KSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICBrZXkgPSBwdXNoRGVidWdJbmZvKG5ld0NoaWxkLl9kZWJ1Z0luZm8pOwogICAgICAgICAgICAgIHJldHVybkZpYmVyID0gdXBkYXRlRnJhZ21lbnQoCiAgICAgICAgICAgICAgICByZXR1cm5GaWJlciwKICAgICAgICAgICAgICAgIG9sZEZpYmVyLAogICAgICAgICAgICAgICAgbmV3Q2hpbGQsCiAgICAgICAgICAgICAgICBsYW5lcywKICAgICAgICAgICAgICAgIG51bGwKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGN1cnJlbnREZWJ1Z0luZm8gPSBrZXk7CiAgICAgICAgICAgICAgcmV0dXJuIHJldHVybkZpYmVyOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09PSB0eXBlb2YgbmV3Q2hpbGQudGhlbikKICAgICAgICAgICAgICByZXR1cm4ga2V5ID0gcHVzaERlYnVnSW5mbyhuZXdDaGlsZC5fZGVidWdJbmZvKSwgcmV0dXJuRmliZXIgPSB1cGRhdGVTbG90KAogICAgICAgICAgICAgICAgcmV0dXJuRmliZXIsCiAgICAgICAgICAgICAgICBvbGRGaWJlciwKICAgICAgICAgICAgICAgIHVud3JhcFRoZW5hYmxlKG5ld0NoaWxkKSwKICAgICAgICAgICAgICAgIGxhbmVzCiAgICAgICAgICAgICAgKSwgY3VycmVudERlYnVnSW5mbyA9IGtleSwgcmV0dXJuRmliZXI7CiAgICAgICAgICAgIGlmIChuZXdDaGlsZC4kJHR5cGVvZiA9PT0gUkVBQ1RfQ09OVEVYVF9UWVBFKQogICAgICAgICAgICAgIHJldHVybiB1cGRhdGVTbG90KAogICAgICAgICAgICAgICAgcmV0dXJuRmliZXIsCiAgICAgICAgICAgICAgICBvbGRGaWJlciwKICAgICAgICAgICAgICAgIHJlYWRDb250ZXh0RHVyaW5nUmVjb25jaWxpYXRpb24ocmV0dXJuRmliZXIsIG5ld0NoaWxkKSwKICAgICAgICAgICAgICAgIGxhbmVzCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgdGhyb3dPbkludmFsaWRPYmplY3RUeXBlKHJldHVybkZpYmVyLCBuZXdDaGlsZCk7CiAgICAgICAgICB9CiAgICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgbmV3Q2hpbGQgJiYgd2Fybk9uRnVuY3Rpb25UeXBlKHJldHVybkZpYmVyLCBuZXdDaGlsZCk7CiAgICAgICAgICAic3ltYm9sIiA9PT0gdHlwZW9mIG5ld0NoaWxkICYmIHdhcm5PblN5bWJvbFR5cGUocmV0dXJuRmliZXIsIG5ld0NoaWxkKTsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB1cGRhdGVGcm9tTWFwKGV4aXN0aW5nQ2hpbGRyZW4sIHJldHVybkZpYmVyLCBuZXdJZHgsIG5ld0NoaWxkLCBsYW5lcykgewogICAgICAgICAgaWYgKCJzdHJpbmciID09PSB0eXBlb2YgbmV3Q2hpbGQgJiYgIiIgIT09IG5ld0NoaWxkIHx8ICJudW1iZXIiID09PSB0eXBlb2YgbmV3Q2hpbGQgfHwgImJpZ2ludCIgPT09IHR5cGVvZiBuZXdDaGlsZCkKICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nQ2hpbGRyZW4gPSBleGlzdGluZ0NoaWxkcmVuLmdldChuZXdJZHgpIHx8IG51bGwsIHVwZGF0ZVRleHROb2RlKHJldHVybkZpYmVyLCBleGlzdGluZ0NoaWxkcmVuLCAiIiArIG5ld0NoaWxkLCBsYW5lcyk7CiAgICAgICAgICBpZiAoIm9iamVjdCIgPT09IHR5cGVvZiBuZXdDaGlsZCAmJiBudWxsICE9PSBuZXdDaGlsZCkgewogICAgICAgICAgICBzd2l0Y2ggKG5ld0NoaWxkLiQkdHlwZW9mKSB7CiAgICAgICAgICAgICAgY2FzZSBSRUFDVF9FTEVNRU5UX1RZUEU6CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3SWR4ID0gZXhpc3RpbmdDaGlsZHJlbi5nZXQoCiAgICAgICAgICAgICAgICAgIG51bGwgPT09IG5ld0NoaWxkLmtleSA/IG5ld0lkeCA6IG5ld0NoaWxkLmtleQogICAgICAgICAgICAgICAgKSB8fCBudWxsLCBleGlzdGluZ0NoaWxkcmVuID0gcHVzaERlYnVnSW5mbyhuZXdDaGlsZC5fZGVidWdJbmZvKSwgcmV0dXJuRmliZXIgPSB1cGRhdGVFbGVtZW50KAogICAgICAgICAgICAgICAgICByZXR1cm5GaWJlciwKICAgICAgICAgICAgICAgICAgbmV3SWR4LAogICAgICAgICAgICAgICAgICBuZXdDaGlsZCwKICAgICAgICAgICAgICAgICAgbGFuZXMKICAgICAgICAgICAgICAgICksIGN1cnJlbnREZWJ1Z0luZm8gPSBleGlzdGluZ0NoaWxkcmVuLCByZXR1cm5GaWJlcjsKICAgICAgICAgICAgICBjYXNlIFJFQUNUX1BPUlRBTF9UWVBFOgogICAgICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nQ2hpbGRyZW4gPSBleGlzdGluZ0NoaWxkcmVuLmdldCgKICAgICAgICAgICAgICAgICAgbnVsbCA9PT0gbmV3Q2hpbGQua2V5ID8gbmV3SWR4IDogbmV3Q2hpbGQua2V5CiAgICAgICAgICAgICAgICApIHx8IG51bGwsIHVwZGF0ZVBvcnRhbChyZXR1cm5GaWJlciwgZXhpc3RpbmdDaGlsZHJlbiwgbmV3Q2hpbGQsIGxhbmVzKTsKICAgICAgICAgICAgICBjYXNlIFJFQUNUX0xBWllfVFlQRToKICAgICAgICAgICAgICAgIHZhciBfcHJldkRlYnVnSW5mbzcgPSBwdXNoRGVidWdJbmZvKG5ld0NoaWxkLl9kZWJ1Z0luZm8pOwogICAgICAgICAgICAgICAgbmV3Q2hpbGQgPSBjYWxsTGF6eUluaXRJbkRFVihuZXdDaGlsZCk7CiAgICAgICAgICAgICAgICByZXR1cm5GaWJlciA9IHVwZGF0ZUZyb21NYXAoCiAgICAgICAgICAgICAgICAgIGV4aXN0aW5nQ2hpbGRyZW4sCiAgICAgICAgICAgICAgICAgIHJldHVybkZpYmVyLAogICAgICAgICAgICAgICAgICBuZXdJZHgsCiAgICAgICAgICAgICAgICAgIG5ld0NoaWxkLAogICAgICAgICAgICAgICAgICBsYW5lcwogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGN1cnJlbnREZWJ1Z0luZm8gPSBfcHJldkRlYnVnSW5mbzc7CiAgICAgICAgICAgICAgICByZXR1cm4gcmV0dXJuRmliZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGlzQXJyYXlJbXBsKG5ld0NoaWxkKSB8fCBnZXRJdGVyYXRvckZuKG5ld0NoaWxkKSkKICAgICAgICAgICAgICByZXR1cm4gbmV3SWR4ID0gZXhpc3RpbmdDaGlsZHJlbi5nZXQobmV3SWR4KSB8fCBudWxsLCBleGlzdGluZ0NoaWxkcmVuID0gcHVzaERlYnVnSW5mbyhuZXdDaGlsZC5fZGVidWdJbmZvKSwgcmV0dXJuRmliZXIgPSB1cGRhdGVGcmFnbWVudCgKICAgICAgICAgICAgICAgIHJldHVybkZpYmVyLAogICAgICAgICAgICAgICAgbmV3SWR4LAogICAgICAgICAgICAgICAgbmV3Q2hpbGQsCiAgICAgICAgICAgICAgICBsYW5lcywKICAgICAgICAgICAgICAgIG51bGwKICAgICAgICAgICAgICApLCBjdXJyZW50RGVidWdJbmZvID0gZXhpc3RpbmdDaGlsZHJlbiwgcmV0dXJuRmliZXI7CiAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09PSB0eXBlb2YgbmV3Q2hpbGQudGhlbikKICAgICAgICAgICAgICByZXR1cm4gX3ByZXZEZWJ1Z0luZm83ID0gcHVzaERlYnVnSW5mbyhuZXdDaGlsZC5fZGVidWdJbmZvKSwgcmV0dXJuRmliZXIgPSB1cGRhdGVGcm9tTWFwKAogICAgICAgICAgICAgICAgZXhpc3RpbmdDaGlsZHJlbiwKICAgICAgICAgICAgICAgIHJldHVybkZpYmVyLAogICAgICAgICAgICAgICAgbmV3SWR4LAogICAgICAgICAgICAgICAgdW53cmFwVGhlbmFibGUobmV3Q2hpbGQpLAogICAgICAgICAgICAgICAgbGFuZXMKICAgICAgICAgICAgICApLCBjdXJyZW50RGVidWdJbmZvID0gX3ByZXZEZWJ1Z0luZm83LCByZXR1cm5GaWJlcjsKICAgICAgICAgICAgaWYgKG5ld0NoaWxkLiQkdHlwZW9mID09PSBSRUFDVF9DT05URVhUX1RZUEUpCiAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUZyb21NYXAoCiAgICAgICAgICAgICAgICBleGlzdGluZ0NoaWxkcmVuLAogICAgICAgICAgICAgICAgcmV0dXJuRmliZXIsCiAgICAgICAgICAgICAgICBuZXdJZHgsCiAgICAgICAgICAgICAgICByZWFkQ29udGV4dER1cmluZ1JlY29uY2lsaWF0aW9uKHJldHVybkZpYmVyLCBuZXdDaGlsZCksCiAgICAgICAgICAgICAgICBsYW5lcwogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIHRocm93T25JbnZhbGlkT2JqZWN0VHlwZShyZXR1cm5GaWJlciwgbmV3Q2hpbGQpOwogICAgICAgICAgfQogICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIG5ld0NoaWxkICYmIHdhcm5PbkZ1bmN0aW9uVHlwZShyZXR1cm5GaWJlciwgbmV3Q2hpbGQpOwogICAgICAgICAgInN5bWJvbCIgPT09IHR5cGVvZiBuZXdDaGlsZCAmJiB3YXJuT25TeW1ib2xUeXBlKHJldHVybkZpYmVyLCBuZXdDaGlsZCk7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gd2Fybk9uSW52YWxpZEtleShyZXR1cm5GaWJlciwgd29ya0luUHJvZ3Jlc3MyLCBjaGlsZCwga25vd25LZXlzKSB7CiAgICAgICAgICBpZiAoIm9iamVjdCIgIT09IHR5cGVvZiBjaGlsZCB8fCBudWxsID09PSBjaGlsZCkgcmV0dXJuIGtub3duS2V5czsKICAgICAgICAgIHN3aXRjaCAoY2hpbGQuJCR0eXBlb2YpIHsKICAgICAgICAgICAgY2FzZSBSRUFDVF9FTEVNRU5UX1RZUEU6CiAgICAgICAgICAgIGNhc2UgUkVBQ1RfUE9SVEFMX1RZUEU6CiAgICAgICAgICAgICAgd2FybkZvck1pc3NpbmdLZXkocmV0dXJuRmliZXIsIHdvcmtJblByb2dyZXNzMiwgY2hpbGQpOwogICAgICAgICAgICAgIHZhciBrZXkgPSBjaGlsZC5rZXk7CiAgICAgICAgICAgICAgaWYgKCJzdHJpbmciICE9PSB0eXBlb2Yga2V5KSBicmVhazsKICAgICAgICAgICAgICBpZiAobnVsbCA9PT0ga25vd25LZXlzKSB7CiAgICAgICAgICAgICAgICBrbm93bktleXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogICAgICAgICAgICAgICAga25vd25LZXlzLmFkZChrZXkpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICgha25vd25LZXlzLmhhcyhrZXkpKSB7CiAgICAgICAgICAgICAgICBrbm93bktleXMuYWRkKGtleSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcnVuV2l0aEZpYmVySW5ERVYod29ya0luUHJvZ3Jlc3MyLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgICAgICJFbmNvdW50ZXJlZCB0d28gY2hpbGRyZW4gd2l0aCB0aGUgc2FtZSBrZXksIGAlc2AuIEtleXMgc2hvdWxkIGJlIHVuaXF1ZSBzbyB0aGF0IGNvbXBvbmVudHMgbWFpbnRhaW4gdGhlaXIgaWRlbnRpdHkgYWNyb3NzIHVwZGF0ZXMuIE5vbi11bmlxdWUga2V5cyBtYXkgY2F1c2UgY2hpbGRyZW4gdG8gYmUgZHVwbGljYXRlZCBhbmQvb3Igb21pdHRlZCDigJQgdGhlIGJlaGF2aW9yIGlzIHVuc3VwcG9ydGVkIGFuZCBjb3VsZCBjaGFuZ2UgaW4gYSBmdXR1cmUgdmVyc2lvbi4iLAogICAgICAgICAgICAgICAgICBrZXkKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgUkVBQ1RfTEFaWV9UWVBFOgogICAgICAgICAgICAgIGNoaWxkID0gY2FsbExhenlJbml0SW5ERVYoY2hpbGQpLCB3YXJuT25JbnZhbGlkS2V5KHJldHVybkZpYmVyLCB3b3JrSW5Qcm9ncmVzczIsIGNoaWxkLCBrbm93bktleXMpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGtub3duS2V5czsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gcmVjb25jaWxlQ2hpbGRyZW5BcnJheShyZXR1cm5GaWJlciwgY3VycmVudEZpcnN0Q2hpbGQsIG5ld0NoaWxkcmVuLCBsYW5lcykgewogICAgICAgICAgZm9yICh2YXIga25vd25LZXlzID0gbnVsbCwgcmVzdWx0aW5nRmlyc3RDaGlsZCA9IG51bGwsIHByZXZpb3VzTmV3RmliZXIgPSBudWxsLCBvbGRGaWJlciA9IGN1cnJlbnRGaXJzdENoaWxkLCBuZXdJZHggPSBjdXJyZW50Rmlyc3RDaGlsZCA9IDAsIG5leHRPbGRGaWJlciA9IG51bGw7IG51bGwgIT09IG9sZEZpYmVyICYmIG5ld0lkeCA8IG5ld0NoaWxkcmVuLmxlbmd0aDsgbmV3SWR4KyspIHsKICAgICAgICAgICAgb2xkRmliZXIuaW5kZXggPiBuZXdJZHggPyAobmV4dE9sZEZpYmVyID0gb2xkRmliZXIsIG9sZEZpYmVyID0gbnVsbCkgOiBuZXh0T2xkRmliZXIgPSBvbGRGaWJlci5zaWJsaW5nOwogICAgICAgICAgICB2YXIgbmV3RmliZXIgPSB1cGRhdGVTbG90KAogICAgICAgICAgICAgIHJldHVybkZpYmVyLAogICAgICAgICAgICAgIG9sZEZpYmVyLAogICAgICAgICAgICAgIG5ld0NoaWxkcmVuW25ld0lkeF0sCiAgICAgICAgICAgICAgbGFuZXMKICAgICAgICAgICAgKTsKICAgICAgICAgICAgaWYgKG51bGwgPT09IG5ld0ZpYmVyKSB7CiAgICAgICAgICAgICAgbnVsbCA9PT0gb2xkRmliZXIgJiYgKG9sZEZpYmVyID0gbmV4dE9sZEZpYmVyKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBrbm93bktleXMgPSB3YXJuT25JbnZhbGlkS2V5KAogICAgICAgICAgICAgIHJldHVybkZpYmVyLAogICAgICAgICAgICAgIG5ld0ZpYmVyLAogICAgICAgICAgICAgIG5ld0NoaWxkcmVuW25ld0lkeF0sCiAgICAgICAgICAgICAga25vd25LZXlzCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHNob3VsZFRyYWNrU2lkZUVmZmVjdHMgJiYgb2xkRmliZXIgJiYgbnVsbCA9PT0gbmV3RmliZXIuYWx0ZXJuYXRlICYmIGRlbGV0ZUNoaWxkKHJldHVybkZpYmVyLCBvbGRGaWJlcik7CiAgICAgICAgICAgIGN1cnJlbnRGaXJzdENoaWxkID0gcGxhY2VDaGlsZChuZXdGaWJlciwgY3VycmVudEZpcnN0Q2hpbGQsIG5ld0lkeCk7CiAgICAgICAgICAgIG51bGwgPT09IHByZXZpb3VzTmV3RmliZXIgPyByZXN1bHRpbmdGaXJzdENoaWxkID0gbmV3RmliZXIgOiBwcmV2aW91c05ld0ZpYmVyLnNpYmxpbmcgPSBuZXdGaWJlcjsKICAgICAgICAgICAgcHJldmlvdXNOZXdGaWJlciA9IG5ld0ZpYmVyOwogICAgICAgICAgICBvbGRGaWJlciA9IG5leHRPbGRGaWJlcjsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChuZXdJZHggPT09IG5ld0NoaWxkcmVuLmxlbmd0aCkKICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZVJlbWFpbmluZ0NoaWxkcmVuKHJldHVybkZpYmVyLCBvbGRGaWJlciksIGlzSHlkcmF0aW5nICYmIHB1c2hUcmVlRm9yayhyZXR1cm5GaWJlciwgbmV3SWR4KSwgcmVzdWx0aW5nRmlyc3RDaGlsZDsKICAgICAgICAgIGlmIChudWxsID09PSBvbGRGaWJlcikgewogICAgICAgICAgICBmb3IgKDsgbmV3SWR4IDwgbmV3Q2hpbGRyZW4ubGVuZ3RoOyBuZXdJZHgrKykKICAgICAgICAgICAgICBvbGRGaWJlciA9IGNyZWF0ZUNoaWxkKHJldHVybkZpYmVyLCBuZXdDaGlsZHJlbltuZXdJZHhdLCBsYW5lcyksIG51bGwgIT09IG9sZEZpYmVyICYmIChrbm93bktleXMgPSB3YXJuT25JbnZhbGlkS2V5KAogICAgICAgICAgICAgICAgcmV0dXJuRmliZXIsCiAgICAgICAgICAgICAgICBvbGRGaWJlciwKICAgICAgICAgICAgICAgIG5ld0NoaWxkcmVuW25ld0lkeF0sCiAgICAgICAgICAgICAgICBrbm93bktleXMKICAgICAgICAgICAgICApLCBjdXJyZW50Rmlyc3RDaGlsZCA9IHBsYWNlQ2hpbGQoCiAgICAgICAgICAgICAgICBvbGRGaWJlciwKICAgICAgICAgICAgICAgIGN1cnJlbnRGaXJzdENoaWxkLAogICAgICAgICAgICAgICAgbmV3SWR4CiAgICAgICAgICAgICAgKSwgbnVsbCA9PT0gcHJldmlvdXNOZXdGaWJlciA/IHJlc3VsdGluZ0ZpcnN0Q2hpbGQgPSBvbGRGaWJlciA6IHByZXZpb3VzTmV3RmliZXIuc2libGluZyA9IG9sZEZpYmVyLCBwcmV2aW91c05ld0ZpYmVyID0gb2xkRmliZXIpOwogICAgICAgICAgICBpc0h5ZHJhdGluZyAmJiBwdXNoVHJlZUZvcmsocmV0dXJuRmliZXIsIG5ld0lkeCk7CiAgICAgICAgICAgIHJldHVybiByZXN1bHRpbmdGaXJzdENoaWxkOwogICAgICAgICAgfQogICAgICAgICAgZm9yIChvbGRGaWJlciA9IG1hcFJlbWFpbmluZ0NoaWxkcmVuKG9sZEZpYmVyKTsgbmV3SWR4IDwgbmV3Q2hpbGRyZW4ubGVuZ3RoOyBuZXdJZHgrKykKICAgICAgICAgICAgbmV4dE9sZEZpYmVyID0gdXBkYXRlRnJvbU1hcCgKICAgICAgICAgICAgICBvbGRGaWJlciwKICAgICAgICAgICAgICByZXR1cm5GaWJlciwKICAgICAgICAgICAgICBuZXdJZHgsCiAgICAgICAgICAgICAgbmV3Q2hpbGRyZW5bbmV3SWR4XSwKICAgICAgICAgICAgICBsYW5lcwogICAgICAgICAgICApLCBudWxsICE9PSBuZXh0T2xkRmliZXIgJiYgKGtub3duS2V5cyA9IHdhcm5PbkludmFsaWRLZXkoCiAgICAgICAgICAgICAgcmV0dXJuRmliZXIsCiAgICAgICAgICAgICAgbmV4dE9sZEZpYmVyLAogICAgICAgICAgICAgIG5ld0NoaWxkcmVuW25ld0lkeF0sCiAgICAgICAgICAgICAga25vd25LZXlzCiAgICAgICAgICAgICksIHNob3VsZFRyYWNrU2lkZUVmZmVjdHMgJiYgbnVsbCAhPT0gbmV4dE9sZEZpYmVyLmFsdGVybmF0ZSAmJiBvbGRGaWJlci5kZWxldGUoCiAgICAgICAgICAgICAgbnVsbCA9PT0gbmV4dE9sZEZpYmVyLmtleSA/IG5ld0lkeCA6IG5leHRPbGRGaWJlci5rZXkKICAgICAgICAgICAgKSwgY3VycmVudEZpcnN0Q2hpbGQgPSBwbGFjZUNoaWxkKAogICAgICAgICAgICAgIG5leHRPbGRGaWJlciwKICAgICAgICAgICAgICBjdXJyZW50Rmlyc3RDaGlsZCwKICAgICAgICAgICAgICBuZXdJZHgKICAgICAgICAgICAgKSwgbnVsbCA9PT0gcHJldmlvdXNOZXdGaWJlciA/IHJlc3VsdGluZ0ZpcnN0Q2hpbGQgPSBuZXh0T2xkRmliZXIgOiBwcmV2aW91c05ld0ZpYmVyLnNpYmxpbmcgPSBuZXh0T2xkRmliZXIsIHByZXZpb3VzTmV3RmliZXIgPSBuZXh0T2xkRmliZXIpOwogICAgICAgICAgc2hvdWxkVHJhY2tTaWRlRWZmZWN0cyAmJiBvbGRGaWJlci5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSB7CiAgICAgICAgICAgIHJldHVybiBkZWxldGVDaGlsZChyZXR1cm5GaWJlciwgY2hpbGQpOwogICAgICAgICAgfSk7CiAgICAgICAgICBpc0h5ZHJhdGluZyAmJiBwdXNoVHJlZUZvcmsocmV0dXJuRmliZXIsIG5ld0lkeCk7CiAgICAgICAgICByZXR1cm4gcmVzdWx0aW5nRmlyc3RDaGlsZDsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gcmVjb25jaWxlQ2hpbGRyZW5JdGVyYXRvcihyZXR1cm5GaWJlciwgY3VycmVudEZpcnN0Q2hpbGQsIG5ld0NoaWxkcmVuLCBsYW5lcykgewogICAgICAgICAgaWYgKG51bGwgPT0gbmV3Q2hpbGRyZW4pCiAgICAgICAgICAgIHRocm93IEVycm9yKCJBbiBpdGVyYWJsZSBvYmplY3QgcHJvdmlkZWQgbm8gaXRlcmF0b3IuIik7CiAgICAgICAgICBmb3IgKHZhciByZXN1bHRpbmdGaXJzdENoaWxkID0gbnVsbCwgcHJldmlvdXNOZXdGaWJlciA9IG51bGwsIG9sZEZpYmVyID0gY3VycmVudEZpcnN0Q2hpbGQsIG5ld0lkeCA9IGN1cnJlbnRGaXJzdENoaWxkID0gMCwgbmV4dE9sZEZpYmVyID0gbnVsbCwga25vd25LZXlzID0gbnVsbCwgc3RlcCA9IG5ld0NoaWxkcmVuLm5leHQoKTsgbnVsbCAhPT0gb2xkRmliZXIgJiYgIXN0ZXAuZG9uZTsgbmV3SWR4KyssIHN0ZXAgPSBuZXdDaGlsZHJlbi5uZXh0KCkpIHsKICAgICAgICAgICAgb2xkRmliZXIuaW5kZXggPiBuZXdJZHggPyAobmV4dE9sZEZpYmVyID0gb2xkRmliZXIsIG9sZEZpYmVyID0gbnVsbCkgOiBuZXh0T2xkRmliZXIgPSBvbGRGaWJlci5zaWJsaW5nOwogICAgICAgICAgICB2YXIgbmV3RmliZXIgPSB1cGRhdGVTbG90KHJldHVybkZpYmVyLCBvbGRGaWJlciwgc3RlcC52YWx1ZSwgbGFuZXMpOwogICAgICAgICAgICBpZiAobnVsbCA9PT0gbmV3RmliZXIpIHsKICAgICAgICAgICAgICBudWxsID09PSBvbGRGaWJlciAmJiAob2xkRmliZXIgPSBuZXh0T2xkRmliZXIpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGtub3duS2V5cyA9IHdhcm5PbkludmFsaWRLZXkoCiAgICAgICAgICAgICAgcmV0dXJuRmliZXIsCiAgICAgICAgICAgICAgbmV3RmliZXIsCiAgICAgICAgICAgICAgc3RlcC52YWx1ZSwKICAgICAgICAgICAgICBrbm93bktleXMKICAgICAgICAgICAgKTsKICAgICAgICAgICAgc2hvdWxkVHJhY2tTaWRlRWZmZWN0cyAmJiBvbGRGaWJlciAmJiBudWxsID09PSBuZXdGaWJlci5hbHRlcm5hdGUgJiYgZGVsZXRlQ2hpbGQocmV0dXJuRmliZXIsIG9sZEZpYmVyKTsKICAgICAgICAgICAgY3VycmVudEZpcnN0Q2hpbGQgPSBwbGFjZUNoaWxkKG5ld0ZpYmVyLCBjdXJyZW50Rmlyc3RDaGlsZCwgbmV3SWR4KTsKICAgICAgICAgICAgbnVsbCA9PT0gcHJldmlvdXNOZXdGaWJlciA/IHJlc3VsdGluZ0ZpcnN0Q2hpbGQgPSBuZXdGaWJlciA6IHByZXZpb3VzTmV3RmliZXIuc2libGluZyA9IG5ld0ZpYmVyOwogICAgICAgICAgICBwcmV2aW91c05ld0ZpYmVyID0gbmV3RmliZXI7CiAgICAgICAgICAgIG9sZEZpYmVyID0gbmV4dE9sZEZpYmVyOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHN0ZXAuZG9uZSkKICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZVJlbWFpbmluZ0NoaWxkcmVuKHJldHVybkZpYmVyLCBvbGRGaWJlciksIGlzSHlkcmF0aW5nICYmIHB1c2hUcmVlRm9yayhyZXR1cm5GaWJlciwgbmV3SWR4KSwgcmVzdWx0aW5nRmlyc3RDaGlsZDsKICAgICAgICAgIGlmIChudWxsID09PSBvbGRGaWJlcikgewogICAgICAgICAgICBmb3IgKDsgIXN0ZXAuZG9uZTsgbmV3SWR4KyssIHN0ZXAgPSBuZXdDaGlsZHJlbi5uZXh0KCkpCiAgICAgICAgICAgICAgb2xkRmliZXIgPSBjcmVhdGVDaGlsZChyZXR1cm5GaWJlciwgc3RlcC52YWx1ZSwgbGFuZXMpLCBudWxsICE9PSBvbGRGaWJlciAmJiAoa25vd25LZXlzID0gd2Fybk9uSW52YWxpZEtleSgKICAgICAgICAgICAgICAgIHJldHVybkZpYmVyLAogICAgICAgICAgICAgICAgb2xkRmliZXIsCiAgICAgICAgICAgICAgICBzdGVwLnZhbHVlLAogICAgICAgICAgICAgICAga25vd25LZXlzCiAgICAgICAgICAgICAgKSwgY3VycmVudEZpcnN0Q2hpbGQgPSBwbGFjZUNoaWxkKAogICAgICAgICAgICAgICAgb2xkRmliZXIsCiAgICAgICAgICAgICAgICBjdXJyZW50Rmlyc3RDaGlsZCwKICAgICAgICAgICAgICAgIG5ld0lkeAogICAgICAgICAgICAgICksIG51bGwgPT09IHByZXZpb3VzTmV3RmliZXIgPyByZXN1bHRpbmdGaXJzdENoaWxkID0gb2xkRmliZXIgOiBwcmV2aW91c05ld0ZpYmVyLnNpYmxpbmcgPSBvbGRGaWJlciwgcHJldmlvdXNOZXdGaWJlciA9IG9sZEZpYmVyKTsKICAgICAgICAgICAgaXNIeWRyYXRpbmcgJiYgcHVzaFRyZWVGb3JrKHJldHVybkZpYmVyLCBuZXdJZHgpOwogICAgICAgICAgICByZXR1cm4gcmVzdWx0aW5nRmlyc3RDaGlsZDsKICAgICAgICAgIH0KICAgICAgICAgIGZvciAob2xkRmliZXIgPSBtYXBSZW1haW5pbmdDaGlsZHJlbihvbGRGaWJlcik7ICFzdGVwLmRvbmU7IG5ld0lkeCsrLCBzdGVwID0gbmV3Q2hpbGRyZW4ubmV4dCgpKQogICAgICAgICAgICBuZXh0T2xkRmliZXIgPSB1cGRhdGVGcm9tTWFwKAogICAgICAgICAgICAgIG9sZEZpYmVyLAogICAgICAgICAgICAgIHJldHVybkZpYmVyLAogICAgICAgICAgICAgIG5ld0lkeCwKICAgICAgICAgICAgICBzdGVwLnZhbHVlLAogICAgICAgICAgICAgIGxhbmVzCiAgICAgICAgICAgICksIG51bGwgIT09IG5leHRPbGRGaWJlciAmJiAoa25vd25LZXlzID0gd2Fybk9uSW52YWxpZEtleSgKICAgICAgICAgICAgICByZXR1cm5GaWJlciwKICAgICAgICAgICAgICBuZXh0T2xkRmliZXIsCiAgICAgICAgICAgICAgc3RlcC52YWx1ZSwKICAgICAgICAgICAgICBrbm93bktleXMKICAgICAgICAgICAgKSwgc2hvdWxkVHJhY2tTaWRlRWZmZWN0cyAmJiBudWxsICE9PSBuZXh0T2xkRmliZXIuYWx0ZXJuYXRlICYmIG9sZEZpYmVyLmRlbGV0ZSgKICAgICAgICAgICAgICBudWxsID09PSBuZXh0T2xkRmliZXIua2V5ID8gbmV3SWR4IDogbmV4dE9sZEZpYmVyLmtleQogICAgICAgICAgICApLCBjdXJyZW50Rmlyc3RDaGlsZCA9IHBsYWNlQ2hpbGQoCiAgICAgICAgICAgICAgbmV4dE9sZEZpYmVyLAogICAgICAgICAgICAgIGN1cnJlbnRGaXJzdENoaWxkLAogICAgICAgICAgICAgIG5ld0lkeAogICAgICAgICAgICApLCBudWxsID09PSBwcmV2aW91c05ld0ZpYmVyID8gcmVzdWx0aW5nRmlyc3RDaGlsZCA9IG5leHRPbGRGaWJlciA6IHByZXZpb3VzTmV3RmliZXIuc2libGluZyA9IG5leHRPbGRGaWJlciwgcHJldmlvdXNOZXdGaWJlciA9IG5leHRPbGRGaWJlcik7CiAgICAgICAgICBzaG91bGRUcmFja1NpZGVFZmZlY3RzICYmIG9sZEZpYmVyLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIHsKICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZUNoaWxkKHJldHVybkZpYmVyLCBjaGlsZCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIGlzSHlkcmF0aW5nICYmIHB1c2hUcmVlRm9yayhyZXR1cm5GaWJlciwgbmV3SWR4KTsKICAgICAgICAgIHJldHVybiByZXN1bHRpbmdGaXJzdENoaWxkOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiByZWNvbmNpbGVDaGlsZEZpYmVyc0ltcGwocmV0dXJuRmliZXIsIGN1cnJlbnRGaXJzdENoaWxkLCBuZXdDaGlsZCwgbGFuZXMpIHsKICAgICAgICAgICJvYmplY3QiID09PSB0eXBlb2YgbmV3Q2hpbGQgJiYgbnVsbCAhPT0gbmV3Q2hpbGQgJiYgbmV3Q2hpbGQudHlwZSA9PT0gUkVBQ1RfRlJBR01FTlRfVFlQRSAmJiBudWxsID09PSBuZXdDaGlsZC5rZXkgJiYgKHZhbGlkYXRlRnJhZ21lbnRQcm9wcyhuZXdDaGlsZCwgbnVsbCwgcmV0dXJuRmliZXIpLCBuZXdDaGlsZCA9IG5ld0NoaWxkLnByb3BzLmNoaWxkcmVuKTsKICAgICAgICAgIGlmICgib2JqZWN0IiA9PT0gdHlwZW9mIG5ld0NoaWxkICYmIG51bGwgIT09IG5ld0NoaWxkKSB7CiAgICAgICAgICAgIHN3aXRjaCAobmV3Q2hpbGQuJCR0eXBlb2YpIHsKICAgICAgICAgICAgICBjYXNlIFJFQUNUX0VMRU1FTlRfVFlQRToKICAgICAgICAgICAgICAgIHZhciBwcmV2RGVidWdJbmZvID0gcHVzaERlYnVnSW5mbyhuZXdDaGlsZC5fZGVidWdJbmZvKTsKICAgICAgICAgICAgICAgIGE6IHsKICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5ID0gbmV3Q2hpbGQua2V5OyBudWxsICE9PSBjdXJyZW50Rmlyc3RDaGlsZDsgKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRGaXJzdENoaWxkLmtleSA9PT0ga2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICBrZXkgPSBuZXdDaGlsZC50eXBlOwogICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gUkVBQ1RfRlJBR01FTlRfVFlQRSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoNyA9PT0gY3VycmVudEZpcnN0Q2hpbGQudGFnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlUmVtYWluaW5nQ2hpbGRyZW4oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5GaWJlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRGaXJzdENoaWxkLnNpYmxpbmcKICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgIGxhbmVzID0gdXNlRmliZXIoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Rmlyc3RDaGlsZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NoaWxkLnByb3BzLmNoaWxkcmVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5lcy5yZXR1cm4gPSByZXR1cm5GaWJlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5lcy5fZGVidWdPd25lciA9IG5ld0NoaWxkLl9vd25lcjsKICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5lcy5fZGVidWdJbmZvID0gY3VycmVudERlYnVnSW5mbzsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZUZyYWdtZW50UHJvcHMobmV3Q2hpbGQsIGxhbmVzLCByZXR1cm5GaWJlcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuRmliZXIgPSBsYW5lczsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRGaXJzdENoaWxkLmVsZW1lbnRUeXBlID09PSBrZXkgfHwgaXNDb21wYXRpYmxlRmFtaWx5Rm9ySG90UmVsb2FkaW5nKAogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Rmlyc3RDaGlsZCwKICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q2hpbGQKICAgICAgICAgICAgICAgICAgICAgICkgfHwgIm9iamVjdCIgPT09IHR5cGVvZiBrZXkgJiYgbnVsbCAhPT0ga2V5ICYmIGtleS4kJHR5cGVvZiA9PT0gUkVBQ1RfTEFaWV9UWVBFICYmIGNhbGxMYXp5SW5pdEluREVWKGtleSkgPT09IGN1cnJlbnRGaXJzdENoaWxkLnR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlUmVtYWluaW5nQ2hpbGRyZW4oCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuRmliZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEZpcnN0Q2hpbGQuc2libGluZwogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICBsYW5lcyA9IHVzZUZpYmVyKGN1cnJlbnRGaXJzdENoaWxkLCBuZXdDaGlsZC5wcm9wcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvZXJjZVJlZihsYW5lcywgbmV3Q2hpbGQpOwogICAgICAgICAgICAgICAgICAgICAgICBsYW5lcy5yZXR1cm4gPSByZXR1cm5GaWJlcjsKICAgICAgICAgICAgICAgICAgICAgICAgbGFuZXMuX2RlYnVnT3duZXIgPSBuZXdDaGlsZC5fb3duZXI7CiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmVzLl9kZWJ1Z0luZm8gPSBjdXJyZW50RGVidWdJbmZvOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5GaWJlciA9IGxhbmVzOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgZGVsZXRlUmVtYWluaW5nQ2hpbGRyZW4ocmV0dXJuRmliZXIsIGN1cnJlbnRGaXJzdENoaWxkKTsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBkZWxldGVDaGlsZChyZXR1cm5GaWJlciwgY3VycmVudEZpcnN0Q2hpbGQpOwogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRGaXJzdENoaWxkID0gY3VycmVudEZpcnN0Q2hpbGQuc2libGluZzsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBuZXdDaGlsZC50eXBlID09PSBSRUFDVF9GUkFHTUVOVF9UWVBFID8gKGxhbmVzID0gY3JlYXRlRmliZXJGcm9tRnJhZ21lbnQoCiAgICAgICAgICAgICAgICAgICAgbmV3Q2hpbGQucHJvcHMuY2hpbGRyZW4sCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuRmliZXIubW9kZSwKICAgICAgICAgICAgICAgICAgICBsYW5lcywKICAgICAgICAgICAgICAgICAgICBuZXdDaGlsZC5rZXkKICAgICAgICAgICAgICAgICAgKSwgbGFuZXMucmV0dXJuID0gcmV0dXJuRmliZXIsIGxhbmVzLl9kZWJ1Z093bmVyID0gcmV0dXJuRmliZXIsIGxhbmVzLl9kZWJ1Z1Rhc2sgPSByZXR1cm5GaWJlci5fZGVidWdUYXNrLCBsYW5lcy5fZGVidWdJbmZvID0gY3VycmVudERlYnVnSW5mbywgdmFsaWRhdGVGcmFnbWVudFByb3BzKG5ld0NoaWxkLCBsYW5lcywgcmV0dXJuRmliZXIpLCByZXR1cm5GaWJlciA9IGxhbmVzKSA6IChsYW5lcyA9IGNyZWF0ZUZpYmVyRnJvbUVsZW1lbnQoCiAgICAgICAgICAgICAgICAgICAgbmV3Q2hpbGQsCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuRmliZXIubW9kZSwKICAgICAgICAgICAgICAgICAgICBsYW5lcwogICAgICAgICAgICAgICAgICApLCBjb2VyY2VSZWYobGFuZXMsIG5ld0NoaWxkKSwgbGFuZXMucmV0dXJuID0gcmV0dXJuRmliZXIsIGxhbmVzLl9kZWJ1Z0luZm8gPSBjdXJyZW50RGVidWdJbmZvLCByZXR1cm5GaWJlciA9IGxhbmVzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybkZpYmVyID0gcGxhY2VTaW5nbGVDaGlsZChyZXR1cm5GaWJlcik7CiAgICAgICAgICAgICAgICBjdXJyZW50RGVidWdJbmZvID0gcHJldkRlYnVnSW5mbzsKICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5GaWJlcjsKICAgICAgICAgICAgICBjYXNlIFJFQUNUX1BPUlRBTF9UWVBFOgogICAgICAgICAgICAgICAgYTogewogICAgICAgICAgICAgICAgICBwcmV2RGVidWdJbmZvID0gbmV3Q2hpbGQ7CiAgICAgICAgICAgICAgICAgIGZvciAobmV3Q2hpbGQgPSBwcmV2RGVidWdJbmZvLmtleTsgbnVsbCAhPT0gY3VycmVudEZpcnN0Q2hpbGQ7ICkgewogICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Rmlyc3RDaGlsZC5rZXkgPT09IG5ld0NoaWxkKQogICAgICAgICAgICAgICAgICAgICAgaWYgKDQgPT09IGN1cnJlbnRGaXJzdENoaWxkLnRhZyAmJiBjdXJyZW50Rmlyc3RDaGlsZC5zdGF0ZU5vZGUuY29udGFpbmVySW5mbyA9PT0gcHJldkRlYnVnSW5mby5jb250YWluZXJJbmZvICYmIGN1cnJlbnRGaXJzdENoaWxkLnN0YXRlTm9kZS5pbXBsZW1lbnRhdGlvbiA9PT0gcHJldkRlYnVnSW5mby5pbXBsZW1lbnRhdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVSZW1haW5pbmdDaGlsZHJlbigKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5GaWJlciwKICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Rmlyc3RDaGlsZC5zaWJsaW5nCiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmVzID0gdXNlRmliZXIoCiAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEZpcnN0Q2hpbGQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldkRlYnVnSW5mby5jaGlsZHJlbiB8fCBbXQogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICBsYW5lcy5yZXR1cm4gPSByZXR1cm5GaWJlcjsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuRmliZXIgPSBsYW5lczsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZVJlbWFpbmluZ0NoaWxkcmVuKHJldHVybkZpYmVyLCBjdXJyZW50Rmlyc3RDaGlsZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgZGVsZXRlQ2hpbGQocmV0dXJuRmliZXIsIGN1cnJlbnRGaXJzdENoaWxkKTsKICAgICAgICAgICAgICAgICAgICBjdXJyZW50Rmlyc3RDaGlsZCA9IGN1cnJlbnRGaXJzdENoaWxkLnNpYmxpbmc7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgbGFuZXMgPSBjcmVhdGVGaWJlckZyb21Qb3J0YWwoCiAgICAgICAgICAgICAgICAgICAgcHJldkRlYnVnSW5mbywKICAgICAgICAgICAgICAgICAgICByZXR1cm5GaWJlci5tb2RlLAogICAgICAgICAgICAgICAgICAgIGxhbmVzCiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIGxhbmVzLnJldHVybiA9IHJldHVybkZpYmVyOwogICAgICAgICAgICAgICAgICByZXR1cm5GaWJlciA9IGxhbmVzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHBsYWNlU2luZ2xlQ2hpbGQocmV0dXJuRmliZXIpOwogICAgICAgICAgICAgIGNhc2UgUkVBQ1RfTEFaWV9UWVBFOgogICAgICAgICAgICAgICAgcmV0dXJuIHByZXZEZWJ1Z0luZm8gPSBwdXNoRGVidWdJbmZvKG5ld0NoaWxkLl9kZWJ1Z0luZm8pLCBuZXdDaGlsZCA9IGNhbGxMYXp5SW5pdEluREVWKG5ld0NoaWxkKSwgcmV0dXJuRmliZXIgPSByZWNvbmNpbGVDaGlsZEZpYmVyc0ltcGwoCiAgICAgICAgICAgICAgICAgIHJldHVybkZpYmVyLAogICAgICAgICAgICAgICAgICBjdXJyZW50Rmlyc3RDaGlsZCwKICAgICAgICAgICAgICAgICAgbmV3Q2hpbGQsCiAgICAgICAgICAgICAgICAgIGxhbmVzCiAgICAgICAgICAgICAgICApLCBjdXJyZW50RGVidWdJbmZvID0gcHJldkRlYnVnSW5mbywgcmV0dXJuRmliZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGlzQXJyYXlJbXBsKG5ld0NoaWxkKSkKICAgICAgICAgICAgICByZXR1cm4gcHJldkRlYnVnSW5mbyA9IHB1c2hEZWJ1Z0luZm8obmV3Q2hpbGQuX2RlYnVnSW5mbyksIHJldHVybkZpYmVyID0gcmVjb25jaWxlQ2hpbGRyZW5BcnJheSgKICAgICAgICAgICAgICAgIHJldHVybkZpYmVyLAogICAgICAgICAgICAgICAgY3VycmVudEZpcnN0Q2hpbGQsCiAgICAgICAgICAgICAgICBuZXdDaGlsZCwKICAgICAgICAgICAgICAgIGxhbmVzCiAgICAgICAgICAgICAgKSwgY3VycmVudERlYnVnSW5mbyA9IHByZXZEZWJ1Z0luZm8sIHJldHVybkZpYmVyOwogICAgICAgICAgICBpZiAoZ2V0SXRlcmF0b3JGbihuZXdDaGlsZCkpIHsKICAgICAgICAgICAgICBwcmV2RGVidWdJbmZvID0gcHVzaERlYnVnSW5mbyhuZXdDaGlsZC5fZGVidWdJbmZvKTsKICAgICAgICAgICAgICBrZXkgPSBnZXRJdGVyYXRvckZuKG5ld0NoaWxkKTsKICAgICAgICAgICAgICBpZiAoImZ1bmN0aW9uIiAhPT0gdHlwZW9mIGtleSkKICAgICAgICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAgICAgICAiQW4gb2JqZWN0IGlzIG5vdCBhbiBpdGVyYWJsZS4gVGhpcyBlcnJvciBpcyBsaWtlbHkgY2F1c2VkIGJ5IGEgYnVnIGluIFJlYWN0LiBQbGVhc2UgZmlsZSBhbiBpc3N1ZS4iCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIHZhciBuZXdDaGlsZHJlbiA9IGtleS5jYWxsKG5ld0NoaWxkKTsKICAgICAgICAgICAgICBpZiAobmV3Q2hpbGRyZW4gPT09IG5ld0NoaWxkKSB7CiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gcmV0dXJuRmliZXIudGFnIHx8ICJbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXSIgIT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChyZXR1cm5GaWJlci50eXBlKSB8fCAiW29iamVjdCBHZW5lcmF0b3JdIiAhPT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG5ld0NoaWxkcmVuKSkKICAgICAgICAgICAgICAgICAgZGlkV2FybkFib3V0R2VuZXJhdG9ycyB8fCBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICAgICAgICJVc2luZyBJdGVyYXRvcnMgYXMgY2hpbGRyZW4gaXMgdW5zdXBwb3J0ZWQgYW5kIHdpbGwgbGlrZWx5IHlpZWxkIHVuZXhwZWN0ZWQgcmVzdWx0cyBiZWNhdXNlIGVudW1lcmF0aW5nIGEgZ2VuZXJhdG9yIG11dGF0ZXMgaXQuIFlvdSBtYXkgY29udmVydCBpdCB0byBhbiBhcnJheSB3aXRoIGBBcnJheS5mcm9tKClgIG9yIHRoZSBgWy4uLnNwcmVhZF1gIG9wZXJhdG9yIGJlZm9yZSByZW5kZXJpbmcuIFlvdSBjYW4gYWxzbyB1c2UgYW4gSXRlcmFibGUgdGhhdCBjYW4gaXRlcmF0ZSBtdWx0aXBsZSB0aW1lcyBvdmVyIHRoZSBzYW1lIGl0ZW1zLiIKICAgICAgICAgICAgICAgICAgKSwgZGlkV2FybkFib3V0R2VuZXJhdG9ycyA9IHRydWU7CiAgICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgICBuZXdDaGlsZC5lbnRyaWVzICE9PSBrZXkgfHwgZGlkV2FybkFib3V0TWFwcyB8fCAoY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAgICAgIlVzaW5nIE1hcHMgYXMgY2hpbGRyZW4gaXMgbm90IHN1cHBvcnRlZC4gVXNlIGFuIGFycmF5IG9mIGtleWVkIFJlYWN0RWxlbWVudHMgaW5zdGVhZC4iCiAgICAgICAgICAgICAgICApLCBkaWRXYXJuQWJvdXRNYXBzID0gdHJ1ZSk7CiAgICAgICAgICAgICAgcmV0dXJuRmliZXIgPSByZWNvbmNpbGVDaGlsZHJlbkl0ZXJhdG9yKAogICAgICAgICAgICAgICAgcmV0dXJuRmliZXIsCiAgICAgICAgICAgICAgICBjdXJyZW50Rmlyc3RDaGlsZCwKICAgICAgICAgICAgICAgIG5ld0NoaWxkcmVuLAogICAgICAgICAgICAgICAgbGFuZXMKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGN1cnJlbnREZWJ1Z0luZm8gPSBwcmV2RGVidWdJbmZvOwogICAgICAgICAgICAgIHJldHVybiByZXR1cm5GaWJlcjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoImZ1bmN0aW9uIiA9PT0gdHlwZW9mIG5ld0NoaWxkLnRoZW4pCiAgICAgICAgICAgICAgcmV0dXJuIHByZXZEZWJ1Z0luZm8gPSBwdXNoRGVidWdJbmZvKG5ld0NoaWxkLl9kZWJ1Z0luZm8pLCByZXR1cm5GaWJlciA9IHJlY29uY2lsZUNoaWxkRmliZXJzSW1wbCgKICAgICAgICAgICAgICAgIHJldHVybkZpYmVyLAogICAgICAgICAgICAgICAgY3VycmVudEZpcnN0Q2hpbGQsCiAgICAgICAgICAgICAgICB1bndyYXBUaGVuYWJsZShuZXdDaGlsZCksCiAgICAgICAgICAgICAgICBsYW5lcwogICAgICAgICAgICAgICksIGN1cnJlbnREZWJ1Z0luZm8gPSBwcmV2RGVidWdJbmZvLCByZXR1cm5GaWJlcjsKICAgICAgICAgICAgaWYgKG5ld0NoaWxkLiQkdHlwZW9mID09PSBSRUFDVF9DT05URVhUX1RZUEUpCiAgICAgICAgICAgICAgcmV0dXJuIHJlY29uY2lsZUNoaWxkRmliZXJzSW1wbCgKICAgICAgICAgICAgICAgIHJldHVybkZpYmVyLAogICAgICAgICAgICAgICAgY3VycmVudEZpcnN0Q2hpbGQsCiAgICAgICAgICAgICAgICByZWFkQ29udGV4dER1cmluZ1JlY29uY2lsaWF0aW9uKHJldHVybkZpYmVyLCBuZXdDaGlsZCksCiAgICAgICAgICAgICAgICBsYW5lcwogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIHRocm93T25JbnZhbGlkT2JqZWN0VHlwZShyZXR1cm5GaWJlciwgbmV3Q2hpbGQpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCJzdHJpbmciID09PSB0eXBlb2YgbmV3Q2hpbGQgJiYgIiIgIT09IG5ld0NoaWxkIHx8ICJudW1iZXIiID09PSB0eXBlb2YgbmV3Q2hpbGQgfHwgImJpZ2ludCIgPT09IHR5cGVvZiBuZXdDaGlsZCkKICAgICAgICAgICAgcmV0dXJuIHByZXZEZWJ1Z0luZm8gPSAiIiArIG5ld0NoaWxkLCBudWxsICE9PSBjdXJyZW50Rmlyc3RDaGlsZCAmJiA2ID09PSBjdXJyZW50Rmlyc3RDaGlsZC50YWcgPyAoZGVsZXRlUmVtYWluaW5nQ2hpbGRyZW4oCiAgICAgICAgICAgICAgcmV0dXJuRmliZXIsCiAgICAgICAgICAgICAgY3VycmVudEZpcnN0Q2hpbGQuc2libGluZwogICAgICAgICAgICApLCBsYW5lcyA9IHVzZUZpYmVyKGN1cnJlbnRGaXJzdENoaWxkLCBwcmV2RGVidWdJbmZvKSwgbGFuZXMucmV0dXJuID0gcmV0dXJuRmliZXIsIHJldHVybkZpYmVyID0gbGFuZXMpIDogKGRlbGV0ZVJlbWFpbmluZ0NoaWxkcmVuKHJldHVybkZpYmVyLCBjdXJyZW50Rmlyc3RDaGlsZCksIGxhbmVzID0gY3JlYXRlRmliZXJGcm9tVGV4dCgKICAgICAgICAgICAgICBwcmV2RGVidWdJbmZvLAogICAgICAgICAgICAgIHJldHVybkZpYmVyLm1vZGUsCiAgICAgICAgICAgICAgbGFuZXMKICAgICAgICAgICAgKSwgbGFuZXMucmV0dXJuID0gcmV0dXJuRmliZXIsIGxhbmVzLl9kZWJ1Z093bmVyID0gcmV0dXJuRmliZXIsIGxhbmVzLl9kZWJ1Z1Rhc2sgPSByZXR1cm5GaWJlci5fZGVidWdUYXNrLCBsYW5lcy5fZGVidWdJbmZvID0gY3VycmVudERlYnVnSW5mbywgcmV0dXJuRmliZXIgPSBsYW5lcyksIHBsYWNlU2luZ2xlQ2hpbGQocmV0dXJuRmliZXIpOwogICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIG5ld0NoaWxkICYmIHdhcm5PbkZ1bmN0aW9uVHlwZShyZXR1cm5GaWJlciwgbmV3Q2hpbGQpOwogICAgICAgICAgInN5bWJvbCIgPT09IHR5cGVvZiBuZXdDaGlsZCAmJiB3YXJuT25TeW1ib2xUeXBlKHJldHVybkZpYmVyLCBuZXdDaGlsZCk7CiAgICAgICAgICByZXR1cm4gZGVsZXRlUmVtYWluaW5nQ2hpbGRyZW4ocmV0dXJuRmliZXIsIGN1cnJlbnRGaXJzdENoaWxkKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJldHVybkZpYmVyLCBjdXJyZW50Rmlyc3RDaGlsZCwgbmV3Q2hpbGQsIGxhbmVzKSB7CiAgICAgICAgICB2YXIgcHJldkRlYnVnSW5mbyA9IGN1cnJlbnREZWJ1Z0luZm87CiAgICAgICAgICBjdXJyZW50RGVidWdJbmZvID0gbnVsbDsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHRoZW5hYmxlSW5kZXhDb3VudGVyID0gMDsKICAgICAgICAgICAgdmFyIGZpcnN0Q2hpbGRGaWJlciA9IHJlY29uY2lsZUNoaWxkRmliZXJzSW1wbCgKICAgICAgICAgICAgICByZXR1cm5GaWJlciwKICAgICAgICAgICAgICBjdXJyZW50Rmlyc3RDaGlsZCwKICAgICAgICAgICAgICBuZXdDaGlsZCwKICAgICAgICAgICAgICBsYW5lcwogICAgICAgICAgICApOwogICAgICAgICAgICB0aGVuYWJsZVN0YXRlID0gbnVsbDsKICAgICAgICAgICAgcmV0dXJuIGZpcnN0Q2hpbGRGaWJlcjsKICAgICAgICAgIH0gY2F0Y2ggKHgpIHsKICAgICAgICAgICAgaWYgKHggPT09IFN1c3BlbnNlRXhjZXB0aW9uIHx8IHggPT09IFN1c3BlbnNlQWN0aW9uRXhjZXB0aW9uKSB0aHJvdyB4OwogICAgICAgICAgICB2YXIgZmliZXIgPSBjcmVhdGVGaWJlcigyOSwgeCwgbnVsbCwgcmV0dXJuRmliZXIubW9kZSk7CiAgICAgICAgICAgIGZpYmVyLmxhbmVzID0gbGFuZXM7CiAgICAgICAgICAgIGZpYmVyLnJldHVybiA9IHJldHVybkZpYmVyOwogICAgICAgICAgICB2YXIgZGVidWdJbmZvID0gZmliZXIuX2RlYnVnSW5mbyA9IGN1cnJlbnREZWJ1Z0luZm87CiAgICAgICAgICAgIGZpYmVyLl9kZWJ1Z093bmVyID0gcmV0dXJuRmliZXIuX2RlYnVnT3duZXI7CiAgICAgICAgICAgIGZpYmVyLl9kZWJ1Z1Rhc2sgPSByZXR1cm5GaWJlci5fZGVidWdUYXNrOwogICAgICAgICAgICBpZiAobnVsbCAhPSBkZWJ1Z0luZm8pIHsKICAgICAgICAgICAgICBmb3IgKHZhciBpID0gZGVidWdJbmZvLmxlbmd0aCAtIDE7IDAgPD0gaTsgaS0tKQogICAgICAgICAgICAgICAgaWYgKCJzdHJpbmciID09PSB0eXBlb2YgZGVidWdJbmZvW2ldLnN0YWNrKSB7CiAgICAgICAgICAgICAgICAgIGZpYmVyLl9kZWJ1Z093bmVyID0gZGVidWdJbmZvW2ldOwogICAgICAgICAgICAgICAgICBmaWJlci5fZGVidWdUYXNrID0gZGVidWdJbmZvW2ldLmRlYnVnVGFzazsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGZpYmVyOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgY3VycmVudERlYnVnSW5mbyA9IHByZXZEZWJ1Z0luZm87CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQogICAgICBmdW5jdGlvbiBwdXNoUHJpbWFyeVRyZWVTdXNwZW5zZUhhbmRsZXIoaGFuZGxlcikgewogICAgICAgIHZhciBjdXJyZW50MiA9IGhhbmRsZXIuYWx0ZXJuYXRlOwogICAgICAgIHB1c2goCiAgICAgICAgICBzdXNwZW5zZVN0YWNrQ3Vyc29yLAogICAgICAgICAgc3VzcGVuc2VTdGFja0N1cnNvci5jdXJyZW50ICYgU3VidHJlZVN1c3BlbnNlQ29udGV4dE1hc2ssCiAgICAgICAgICBoYW5kbGVyCiAgICAgICAgKTsKICAgICAgICBwdXNoKHN1c3BlbnNlSGFuZGxlclN0YWNrQ3Vyc29yLCBoYW5kbGVyLCBoYW5kbGVyKTsKICAgICAgICBudWxsID09PSBzaGVsbEJvdW5kYXJ5ICYmIChudWxsID09PSBjdXJyZW50MiB8fCBudWxsICE9PSBjdXJyZW50VHJlZUhpZGRlblN0YWNrQ3Vyc29yLmN1cnJlbnQgPyBzaGVsbEJvdW5kYXJ5ID0gaGFuZGxlciA6IG51bGwgIT09IGN1cnJlbnQyLm1lbW9pemVkU3RhdGUgJiYgKHNoZWxsQm91bmRhcnkgPSBoYW5kbGVyKSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcHVzaE9mZnNjcmVlblN1c3BlbnNlSGFuZGxlcihmaWJlcikgewogICAgICAgIGlmICgyMiA9PT0gZmliZXIudGFnKSB7CiAgICAgICAgICBpZiAocHVzaChzdXNwZW5zZVN0YWNrQ3Vyc29yLCBzdXNwZW5zZVN0YWNrQ3Vyc29yLmN1cnJlbnQsIGZpYmVyKSwgcHVzaChzdXNwZW5zZUhhbmRsZXJTdGFja0N1cnNvciwgZmliZXIsIGZpYmVyKSwgbnVsbCA9PT0gc2hlbGxCb3VuZGFyeSkgewogICAgICAgICAgICB2YXIgY3VycmVudDIgPSBmaWJlci5hbHRlcm5hdGU7CiAgICAgICAgICAgIG51bGwgIT09IGN1cnJlbnQyICYmIG51bGwgIT09IGN1cnJlbnQyLm1lbW9pemVkU3RhdGUgJiYgKHNoZWxsQm91bmRhcnkgPSBmaWJlcik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHJldXNlU3VzcGVuc2VIYW5kbGVyT25TdGFjayhmaWJlcik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmV1c2VTdXNwZW5zZUhhbmRsZXJPblN0YWNrKGZpYmVyKSB7CiAgICAgICAgcHVzaChzdXNwZW5zZVN0YWNrQ3Vyc29yLCBzdXNwZW5zZVN0YWNrQ3Vyc29yLmN1cnJlbnQsIGZpYmVyKTsKICAgICAgICBwdXNoKAogICAgICAgICAgc3VzcGVuc2VIYW5kbGVyU3RhY2tDdXJzb3IsCiAgICAgICAgICBzdXNwZW5zZUhhbmRsZXJTdGFja0N1cnNvci5jdXJyZW50LAogICAgICAgICAgZmliZXIKICAgICAgICApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHBvcFN1c3BlbnNlSGFuZGxlcihmaWJlcikgewogICAgICAgIHBvcChzdXNwZW5zZUhhbmRsZXJTdGFja0N1cnNvciwgZmliZXIpOwogICAgICAgIHNoZWxsQm91bmRhcnkgPT09IGZpYmVyICYmIChzaGVsbEJvdW5kYXJ5ID0gbnVsbCk7CiAgICAgICAgcG9wKHN1c3BlbnNlU3RhY2tDdXJzb3IsIGZpYmVyKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBmaW5kRmlyc3RTdXNwZW5kZWQocm93KSB7CiAgICAgICAgZm9yICh2YXIgbm9kZSA9IHJvdzsgbnVsbCAhPT0gbm9kZTsgKSB7CiAgICAgICAgICBpZiAoMTMgPT09IG5vZGUudGFnKSB7CiAgICAgICAgICAgIHZhciBzdGF0ZSA9IG5vZGUubWVtb2l6ZWRTdGF0ZTsKICAgICAgICAgICAgaWYgKG51bGwgIT09IHN0YXRlICYmIChzdGF0ZSA9IHN0YXRlLmRlaHlkcmF0ZWQsIG51bGwgPT09IHN0YXRlIHx8IHN0YXRlLmRhdGEgPT09IFNVU1BFTlNFX1BFTkRJTkdfU1RBUlRfREFUQSB8fCBpc1N1c3BlbnNlSW5zdGFuY2VGYWxsYmFjayhzdGF0ZSkpKQogICAgICAgICAgICAgIHJldHVybiBub2RlOwogICAgICAgICAgfSBlbHNlIGlmICgxOSA9PT0gbm9kZS50YWcgJiYgdm9pZCAwICE9PSBub2RlLm1lbW9pemVkUHJvcHMucmV2ZWFsT3JkZXIpIHsKICAgICAgICAgICAgaWYgKDAgIT09IChub2RlLmZsYWdzICYgMTI4KSkgcmV0dXJuIG5vZGU7CiAgICAgICAgICB9IGVsc2UgaWYgKG51bGwgIT09IG5vZGUuY2hpbGQpIHsKICAgICAgICAgICAgbm9kZS5jaGlsZC5yZXR1cm4gPSBub2RlOwogICAgICAgICAgICBub2RlID0gbm9kZS5jaGlsZDsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAobm9kZSA9PT0gcm93KSBicmVhazsKICAgICAgICAgIGZvciAoOyBudWxsID09PSBub2RlLnNpYmxpbmc7ICkgewogICAgICAgICAgICBpZiAobnVsbCA9PT0gbm9kZS5yZXR1cm4gfHwgbm9kZS5yZXR1cm4gPT09IHJvdykgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIG5vZGUgPSBub2RlLnJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIG5vZGUuc2libGluZy5yZXR1cm4gPSBub2RlLnJldHVybjsKICAgICAgICAgIG5vZGUgPSBub2RlLnNpYmxpbmc7CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHdhcm5PbkludmFsaWRDYWxsYmFjayhjYWxsYmFjaykgewogICAgICAgIGlmIChudWxsICE9PSBjYWxsYmFjayAmJiAiZnVuY3Rpb24iICE9PSB0eXBlb2YgY2FsbGJhY2spIHsKICAgICAgICAgIHZhciBrZXkgPSBTdHJpbmcoY2FsbGJhY2spOwogICAgICAgICAgZGlkV2Fybk9uSW52YWxpZENhbGxiYWNrLmhhcyhrZXkpIHx8IChkaWRXYXJuT25JbnZhbGlkQ2FsbGJhY2suYWRkKGtleSksIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICJFeHBlY3RlZCB0aGUgbGFzdCBvcHRpb25hbCBgY2FsbGJhY2tgIGFyZ3VtZW50IHRvIGJlIGEgZnVuY3Rpb24uIEluc3RlYWQgcmVjZWl2ZWQ6ICVzLiIsCiAgICAgICAgICAgIGNhbGxiYWNrCiAgICAgICAgICApKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gYXBwbHlEZXJpdmVkU3RhdGVGcm9tUHJvcHMod29ya0luUHJvZ3Jlc3MyLCBjdG9yLCBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMsIG5leHRQcm9wcykgewogICAgICAgIHZhciBwcmV2U3RhdGUgPSB3b3JrSW5Qcm9ncmVzczIubWVtb2l6ZWRTdGF0ZSwgcGFydGlhbFN0YXRlID0gZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKG5leHRQcm9wcywgcHJldlN0YXRlKTsKICAgICAgICBpZiAod29ya0luUHJvZ3Jlc3MyLm1vZGUgJiBTdHJpY3RMZWdhY3lNb2RlKSB7CiAgICAgICAgICBzZXRJc1N0cmljdE1vZGVGb3JEZXZ0b29scyh0cnVlKTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHBhcnRpYWxTdGF0ZSA9IGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhuZXh0UHJvcHMsIHByZXZTdGF0ZSk7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBzZXRJc1N0cmljdE1vZGVGb3JEZXZ0b29scyhmYWxzZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHZvaWQgMCA9PT0gcGFydGlhbFN0YXRlICYmIChjdG9yID0gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKGN0b3IpIHx8ICJDb21wb25lbnQiLCBkaWRXYXJuQWJvdXRVbmRlZmluZWREZXJpdmVkU3RhdGUuaGFzKGN0b3IpIHx8IChkaWRXYXJuQWJvdXRVbmRlZmluZWREZXJpdmVkU3RhdGUuYWRkKGN0b3IpLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgIiVzLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcygpOiBBIHZhbGlkIHN0YXRlIG9iamVjdCAob3IgbnVsbCkgbXVzdCBiZSByZXR1cm5lZC4gWW91IGhhdmUgcmV0dXJuZWQgdW5kZWZpbmVkLiIsCiAgICAgICAgICBjdG9yCiAgICAgICAgKSkpOwogICAgICAgIHByZXZTdGF0ZSA9IG51bGwgPT09IHBhcnRpYWxTdGF0ZSB8fCB2b2lkIDAgPT09IHBhcnRpYWxTdGF0ZSA/IHByZXZTdGF0ZSA6IGFzc2lnbih7fSwgcHJldlN0YXRlLCBwYXJ0aWFsU3RhdGUpOwogICAgICAgIHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlID0gcHJldlN0YXRlOwogICAgICAgIDAgPT09IHdvcmtJblByb2dyZXNzMi5sYW5lcyAmJiAod29ya0luUHJvZ3Jlc3MyLnVwZGF0ZVF1ZXVlLmJhc2VTdGF0ZSA9IHByZXZTdGF0ZSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY2hlY2tTaG91bGRDb21wb25lbnRVcGRhdGUod29ya0luUHJvZ3Jlc3MyLCBjdG9yLCBvbGRQcm9wcywgbmV3UHJvcHMsIG9sZFN0YXRlLCBuZXdTdGF0ZSwgbmV4dENvbnRleHQpIHsKICAgICAgICB2YXIgaW5zdGFuY2UgPSB3b3JrSW5Qcm9ncmVzczIuc3RhdGVOb2RlOwogICAgICAgIGlmICgiZnVuY3Rpb24iID09PSB0eXBlb2YgaW5zdGFuY2Uuc2hvdWxkQ29tcG9uZW50VXBkYXRlKSB7CiAgICAgICAgICBvbGRQcm9wcyA9IGluc3RhbmNlLnNob3VsZENvbXBvbmVudFVwZGF0ZSgKICAgICAgICAgICAgbmV3UHJvcHMsCiAgICAgICAgICAgIG5ld1N0YXRlLAogICAgICAgICAgICBuZXh0Q29udGV4dAogICAgICAgICAgKTsKICAgICAgICAgIGlmICh3b3JrSW5Qcm9ncmVzczIubW9kZSAmIFN0cmljdExlZ2FjeU1vZGUpIHsKICAgICAgICAgICAgc2V0SXNTdHJpY3RNb2RlRm9yRGV2dG9vbHModHJ1ZSk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgb2xkUHJvcHMgPSBpbnN0YW5jZS5zaG91bGRDb21wb25lbnRVcGRhdGUoCiAgICAgICAgICAgICAgICBuZXdQcm9wcywKICAgICAgICAgICAgICAgIG5ld1N0YXRlLAogICAgICAgICAgICAgICAgbmV4dENvbnRleHQKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIHNldElzU3RyaWN0TW9kZUZvckRldnRvb2xzKGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgdm9pZCAwID09PSBvbGRQcm9wcyAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiJXMuc2hvdWxkQ29tcG9uZW50VXBkYXRlKCk6IFJldHVybmVkIHVuZGVmaW5lZCBpbnN0ZWFkIG9mIGEgYm9vbGVhbiB2YWx1ZS4gTWFrZSBzdXJlIHRvIHJldHVybiB0cnVlIG9yIGZhbHNlLiIsCiAgICAgICAgICAgIGdldENvbXBvbmVudE5hbWVGcm9tVHlwZShjdG9yKSB8fCAiQ29tcG9uZW50IgogICAgICAgICAgKTsKICAgICAgICAgIHJldHVybiBvbGRQcm9wczsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGN0b3IucHJvdG90eXBlICYmIGN0b3IucHJvdG90eXBlLmlzUHVyZVJlYWN0Q29tcG9uZW50ID8gIXNoYWxsb3dFcXVhbChvbGRQcm9wcywgbmV3UHJvcHMpIHx8ICFzaGFsbG93RXF1YWwob2xkU3RhdGUsIG5ld1N0YXRlKSA6IHRydWU7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY2FsbENvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMod29ya0luUHJvZ3Jlc3MyLCBpbnN0YW5jZSwgbmV3UHJvcHMsIG5leHRDb250ZXh0KSB7CiAgICAgICAgdmFyIG9sZFN0YXRlID0gaW5zdGFuY2Uuc3RhdGU7CiAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGluc3RhbmNlLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgJiYgaW5zdGFuY2UuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXdQcm9wcywgbmV4dENvbnRleHQpOwogICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBpbnN0YW5jZS5VTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyAmJiBpbnN0YW5jZS5VTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXdQcm9wcywgbmV4dENvbnRleHQpOwogICAgICAgIGluc3RhbmNlLnN0YXRlICE9PSBvbGRTdGF0ZSAmJiAod29ya0luUHJvZ3Jlc3MyID0gZ2V0Q29tcG9uZW50TmFtZUZyb21GaWJlcih3b3JrSW5Qcm9ncmVzczIpIHx8ICJDb21wb25lbnQiLCBkaWRXYXJuQWJvdXRTdGF0ZUFzc2lnbm1lbnRGb3JDb21wb25lbnQuaGFzKHdvcmtJblByb2dyZXNzMikgfHwgKGRpZFdhcm5BYm91dFN0YXRlQXNzaWdubWVudEZvckNvbXBvbmVudC5hZGQod29ya0luUHJvZ3Jlc3MyKSwgY29uc29sZS5lcnJvcigKICAgICAgICAgICIlcy5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKCk6IEFzc2lnbmluZyBkaXJlY3RseSB0byB0aGlzLnN0YXRlIGlzIGRlcHJlY2F0ZWQgKGV4Y2VwdCBpbnNpZGUgYSBjb21wb25lbnQncyBjb25zdHJ1Y3RvcikuIFVzZSBzZXRTdGF0ZSBpbnN0ZWFkLiIsCiAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIKICAgICAgICApKSwgY2xhc3NDb21wb25lbnRVcGRhdGVyLmVucXVldWVSZXBsYWNlU3RhdGUoCiAgICAgICAgICBpbnN0YW5jZSwKICAgICAgICAgIGluc3RhbmNlLnN0YXRlLAogICAgICAgICAgbnVsbAogICAgICAgICkpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlc29sdmVDbGFzc0NvbXBvbmVudFByb3BzKENvbXBvbmVudCwgYmFzZVByb3BzKSB7CiAgICAgICAgdmFyIG5ld1Byb3BzID0gYmFzZVByb3BzOwogICAgICAgIGlmICgicmVmIiBpbiBiYXNlUHJvcHMpIHsKICAgICAgICAgIG5ld1Byb3BzID0ge307CiAgICAgICAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBiYXNlUHJvcHMpCiAgICAgICAgICAgICJyZWYiICE9PSBwcm9wTmFtZSAmJiAobmV3UHJvcHNbcHJvcE5hbWVdID0gYmFzZVByb3BzW3Byb3BOYW1lXSk7CiAgICAgICAgfQogICAgICAgIGlmIChDb21wb25lbnQgPSBDb21wb25lbnQuZGVmYXVsdFByb3BzKSB7CiAgICAgICAgICBuZXdQcm9wcyA9PT0gYmFzZVByb3BzICYmIChuZXdQcm9wcyA9IGFzc2lnbih7fSwgbmV3UHJvcHMpKTsKICAgICAgICAgIGZvciAodmFyIF9wcm9wTmFtZSBpbiBDb21wb25lbnQpCiAgICAgICAgICAgIHZvaWQgMCA9PT0gbmV3UHJvcHNbX3Byb3BOYW1lXSAmJiAobmV3UHJvcHNbX3Byb3BOYW1lXSA9IENvbXBvbmVudFtfcHJvcE5hbWVdKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG5ld1Byb3BzOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGRlZmF1bHRPblVuY2F1Z2h0RXJyb3IoZXJyb3IpIHsKICAgICAgICByZXBvcnRHbG9iYWxFcnJvcihlcnJvcik7CiAgICAgICAgY29uc29sZS53YXJuKAogICAgICAgICAgIiVzXG5cbiVzXG4iLAogICAgICAgICAgY29tcG9uZW50TmFtZSA/ICJBbiBlcnJvciBvY2N1cnJlZCBpbiB0aGUgPCIgKyBjb21wb25lbnROYW1lICsgIj4gY29tcG9uZW50LiIgOiAiQW4gZXJyb3Igb2NjdXJyZWQgaW4gb25lIG9mIHlvdXIgUmVhY3QgY29tcG9uZW50cy4iLAogICAgICAgICAgIkNvbnNpZGVyIGFkZGluZyBhbiBlcnJvciBib3VuZGFyeSB0byB5b3VyIHRyZWUgdG8gY3VzdG9taXplIGVycm9yIGhhbmRsaW5nIGJlaGF2aW9yLlxuVmlzaXQgaHR0cHM6Ly9yZWFjdC5kZXYvbGluay9lcnJvci1ib3VuZGFyaWVzIHRvIGxlYXJuIG1vcmUgYWJvdXQgZXJyb3IgYm91bmRhcmllcy4iCiAgICAgICAgKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBkZWZhdWx0T25DYXVnaHRFcnJvcihlcnJvcikgewogICAgICAgIHZhciBjb21wb25lbnROYW1lTWVzc2FnZSA9IGNvbXBvbmVudE5hbWUgPyAiVGhlIGFib3ZlIGVycm9yIG9jY3VycmVkIGluIHRoZSA8IiArIGNvbXBvbmVudE5hbWUgKyAiPiBjb21wb25lbnQuIiA6ICJUaGUgYWJvdmUgZXJyb3Igb2NjdXJyZWQgaW4gb25lIG9mIHlvdXIgUmVhY3QgY29tcG9uZW50cy4iLCByZWNyZWF0ZU1lc3NhZ2UgPSAiUmVhY3Qgd2lsbCB0cnkgdG8gcmVjcmVhdGUgdGhpcyBjb21wb25lbnQgdHJlZSBmcm9tIHNjcmF0Y2ggdXNpbmcgdGhlIGVycm9yIGJvdW5kYXJ5IHlvdSBwcm92aWRlZCwgIiArICgoZXJyb3JCb3VuZGFyeU5hbWUgfHwgIkFub255bW91cyIpICsgIi4iKTsKICAgICAgICBpZiAoIm9iamVjdCIgPT09IHR5cGVvZiBlcnJvciAmJiBudWxsICE9PSBlcnJvciAmJiAic3RyaW5nIiA9PT0gdHlwZW9mIGVycm9yLmVudmlyb25tZW50TmFtZSkgewogICAgICAgICAgdmFyIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9IGVycm9yLmVudmlyb25tZW50TmFtZTsKICAgICAgICAgIGVycm9yID0gWwogICAgICAgICAgICAiJW9cblxuJXNcblxuJXNcbiIsCiAgICAgICAgICAgIGVycm9yLAogICAgICAgICAgICBjb21wb25lbnROYW1lTWVzc2FnZSwKICAgICAgICAgICAgcmVjcmVhdGVNZXNzYWdlCiAgICAgICAgICBdLnNsaWNlKDApOwogICAgICAgICAgInN0cmluZyIgPT09IHR5cGVvZiBlcnJvclswXSA/IGVycm9yLnNwbGljZSgKICAgICAgICAgICAgMCwKICAgICAgICAgICAgMSwKICAgICAgICAgICAgYmFkZ2VGb3JtYXQgKyBlcnJvclswXSwKICAgICAgICAgICAgYmFkZ2VTdHlsZSwKICAgICAgICAgICAgcGFkICsgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0ICsgcGFkLAogICAgICAgICAgICByZXNldFN0eWxlCiAgICAgICAgICApIDogZXJyb3Iuc3BsaWNlKAogICAgICAgICAgICAwLAogICAgICAgICAgICAwLAogICAgICAgICAgICBiYWRnZUZvcm1hdCwKICAgICAgICAgICAgYmFkZ2VTdHlsZSwKICAgICAgICAgICAgcGFkICsgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0ICsgcGFkLAogICAgICAgICAgICByZXNldFN0eWxlCiAgICAgICAgICApOwogICAgICAgICAgZXJyb3IudW5zaGlmdChjb25zb2xlKTsKICAgICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9IGJpbmQuYXBwbHkoY29uc29sZS5lcnJvciwgZXJyb3IpOwogICAgICAgICAgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0KCk7CiAgICAgICAgfSBlbHNlCiAgICAgICAgICBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiJW9cblxuJXNcblxuJXNcbiIsCiAgICAgICAgICAgIGVycm9yLAogICAgICAgICAgICBjb21wb25lbnROYW1lTWVzc2FnZSwKICAgICAgICAgICAgcmVjcmVhdGVNZXNzYWdlCiAgICAgICAgICApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGRlZmF1bHRPblJlY292ZXJhYmxlRXJyb3IoZXJyb3IpIHsKICAgICAgICByZXBvcnRHbG9iYWxFcnJvcihlcnJvcik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbG9nVW5jYXVnaHRFcnJvcihyb290MiwgZXJyb3JJbmZvKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGNvbXBvbmVudE5hbWUgPSBlcnJvckluZm8uc291cmNlID8gZ2V0Q29tcG9uZW50TmFtZUZyb21GaWJlcihlcnJvckluZm8uc291cmNlKSA6IG51bGw7CiAgICAgICAgICBlcnJvckJvdW5kYXJ5TmFtZSA9IG51bGw7CiAgICAgICAgICB2YXIgZXJyb3IgPSBlcnJvckluZm8udmFsdWU7CiAgICAgICAgICBpZiAobnVsbCAhPT0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuYWN0UXVldWUpCiAgICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5wdXNoKGVycm9yKTsKICAgICAgICAgIGVsc2UgewogICAgICAgICAgICB2YXIgb25VbmNhdWdodEVycm9yID0gcm9vdDIub25VbmNhdWdodEVycm9yOwogICAgICAgICAgICBvblVuY2F1Z2h0RXJyb3IoZXJyb3IsIHsgY29tcG9uZW50U3RhY2s6IGVycm9ySW5mby5zdGFjayB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlJDUpIHsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHRocm93IGUkNTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBsb2dDYXVnaHRFcnJvcihyb290MiwgYm91bmRhcnksIGVycm9ySW5mbykgewogICAgICAgIHRyeSB7CiAgICAgICAgICBjb21wb25lbnROYW1lID0gZXJyb3JJbmZvLnNvdXJjZSA/IGdldENvbXBvbmVudE5hbWVGcm9tRmliZXIoZXJyb3JJbmZvLnNvdXJjZSkgOiBudWxsOwogICAgICAgICAgZXJyb3JCb3VuZGFyeU5hbWUgPSBnZXRDb21wb25lbnROYW1lRnJvbUZpYmVyKGJvdW5kYXJ5KTsKICAgICAgICAgIHZhciBvbkNhdWdodEVycm9yID0gcm9vdDIub25DYXVnaHRFcnJvcjsKICAgICAgICAgIG9uQ2F1Z2h0RXJyb3IoZXJyb3JJbmZvLnZhbHVlLCB7CiAgICAgICAgICAgIGNvbXBvbmVudFN0YWNrOiBlcnJvckluZm8uc3RhY2ssCiAgICAgICAgICAgIGVycm9yQm91bmRhcnk6IDEgPT09IGJvdW5kYXJ5LnRhZyA/IGJvdW5kYXJ5LnN0YXRlTm9kZSA6IG51bGwKICAgICAgICAgIH0pOwogICAgICAgIH0gY2F0Y2ggKGUkNikgewogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgdGhyb3cgZSQ2OwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNyZWF0ZVJvb3RFcnJvclVwZGF0ZShyb290MiwgZXJyb3JJbmZvLCBsYW5lKSB7CiAgICAgICAgbGFuZSA9IGNyZWF0ZVVwZGF0ZShsYW5lKTsKICAgICAgICBsYW5lLnRhZyA9IENhcHR1cmVVcGRhdGU7CiAgICAgICAgbGFuZS5wYXlsb2FkID0geyBlbGVtZW50OiBudWxsIH07CiAgICAgICAgbGFuZS5jYWxsYmFjayA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgcnVuV2l0aEZpYmVySW5ERVYoZXJyb3JJbmZvLnNvdXJjZSwgbG9nVW5jYXVnaHRFcnJvciwgcm9vdDIsIGVycm9ySW5mbyk7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gbGFuZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjcmVhdGVDbGFzc0Vycm9yVXBkYXRlKGxhbmUpIHsKICAgICAgICBsYW5lID0gY3JlYXRlVXBkYXRlKGxhbmUpOwogICAgICAgIGxhbmUudGFnID0gQ2FwdHVyZVVwZGF0ZTsKICAgICAgICByZXR1cm4gbGFuZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBpbml0aWFsaXplQ2xhc3NFcnJvclVwZGF0ZSh1cGRhdGUsIHJvb3QyLCBmaWJlciwgZXJyb3JJbmZvKSB7CiAgICAgICAgdmFyIGdldERlcml2ZWRTdGF0ZUZyb21FcnJvciA9IGZpYmVyLnR5cGUuZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yOwogICAgICAgIGlmICgiZnVuY3Rpb24iID09PSB0eXBlb2YgZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yKSB7CiAgICAgICAgICB2YXIgZXJyb3IgPSBlcnJvckluZm8udmFsdWU7CiAgICAgICAgICB1cGRhdGUucGF5bG9hZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yKGVycm9yKTsKICAgICAgICAgIH07CiAgICAgICAgICB1cGRhdGUuY2FsbGJhY2sgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgbWFya0ZhaWxlZEVycm9yQm91bmRhcnlGb3JIb3RSZWxvYWRpbmcoZmliZXIpOwogICAgICAgICAgICBydW5XaXRoRmliZXJJbkRFVigKICAgICAgICAgICAgICBlcnJvckluZm8uc291cmNlLAogICAgICAgICAgICAgIGxvZ0NhdWdodEVycm9yLAogICAgICAgICAgICAgIHJvb3QyLAogICAgICAgICAgICAgIGZpYmVyLAogICAgICAgICAgICAgIGVycm9ySW5mbwogICAgICAgICAgICApOwogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgdmFyIGluc3QgPSBmaWJlci5zdGF0ZU5vZGU7CiAgICAgICAgbnVsbCAhPT0gaW5zdCAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgaW5zdC5jb21wb25lbnREaWRDYXRjaCAmJiAodXBkYXRlLmNhbGxiYWNrID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICBtYXJrRmFpbGVkRXJyb3JCb3VuZGFyeUZvckhvdFJlbG9hZGluZyhmaWJlcik7CiAgICAgICAgICBydW5XaXRoRmliZXJJbkRFVigKICAgICAgICAgICAgZXJyb3JJbmZvLnNvdXJjZSwKICAgICAgICAgICAgbG9nQ2F1Z2h0RXJyb3IsCiAgICAgICAgICAgIHJvb3QyLAogICAgICAgICAgICBmaWJlciwKICAgICAgICAgICAgZXJyb3JJbmZvCiAgICAgICAgICApOwogICAgICAgICAgImZ1bmN0aW9uIiAhPT0gdHlwZW9mIGdldERlcml2ZWRTdGF0ZUZyb21FcnJvciAmJiAobnVsbCA9PT0gbGVnYWN5RXJyb3JCb3VuZGFyaWVzVGhhdEFscmVhZHlGYWlsZWQgPyBsZWdhY3lFcnJvckJvdW5kYXJpZXNUaGF0QWxyZWFkeUZhaWxlZCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFt0aGlzXSkgOiBsZWdhY3lFcnJvckJvdW5kYXJpZXNUaGF0QWxyZWFkeUZhaWxlZC5hZGQodGhpcykpOwogICAgICAgICAgY2FsbENvbXBvbmVudERpZENhdGNoSW5ERVYodGhpcywgZXJyb3JJbmZvKTsKICAgICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IgfHwgMCA9PT0gKGZpYmVyLmxhbmVzICYgMikgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIiVzOiBFcnJvciBib3VuZGFyaWVzIHNob3VsZCBpbXBsZW1lbnQgZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yKCkuIEluIHRoYXQgbWV0aG9kLCByZXR1cm4gYSBzdGF0ZSB1cGRhdGUgdG8gZGlzcGxheSBhbiBlcnJvciBtZXNzYWdlIG9yIGZhbGxiYWNrIFVJLiIsCiAgICAgICAgICAgIGdldENvbXBvbmVudE5hbWVGcm9tRmliZXIoZmliZXIpIHx8ICJVbmtub3duIgogICAgICAgICAgKTsKICAgICAgICB9KTsKICAgICAgfQogICAgICBmdW5jdGlvbiB0aHJvd0V4Y2VwdGlvbihyb290MiwgcmV0dXJuRmliZXIsIHNvdXJjZUZpYmVyLCB2YWx1ZSwgcm9vdFJlbmRlckxhbmVzKSB7CiAgICAgICAgc291cmNlRmliZXIuZmxhZ3MgfD0gMzI3Njg7CiAgICAgICAgaXNEZXZUb29sc1ByZXNlbnQgJiYgcmVzdG9yZVBlbmRpbmdVcGRhdGVycyhyb290Miwgcm9vdFJlbmRlckxhbmVzKTsKICAgICAgICBpZiAobnVsbCAhPT0gdmFsdWUgJiYgIm9iamVjdCIgPT09IHR5cGVvZiB2YWx1ZSAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgdmFsdWUudGhlbikgewogICAgICAgICAgcmV0dXJuRmliZXIgPSBzb3VyY2VGaWJlci5hbHRlcm5hdGU7CiAgICAgICAgICBudWxsICE9PSByZXR1cm5GaWJlciAmJiBwcm9wYWdhdGVQYXJlbnRDb250ZXh0Q2hhbmdlcygKICAgICAgICAgICAgcmV0dXJuRmliZXIsCiAgICAgICAgICAgIHNvdXJjZUZpYmVyLAogICAgICAgICAgICByb290UmVuZGVyTGFuZXMsCiAgICAgICAgICAgIHRydWUKICAgICAgICAgICk7CiAgICAgICAgICBpc0h5ZHJhdGluZyAmJiAoZGlkU3VzcGVuZE9yRXJyb3JERVYgPSB0cnVlKTsKICAgICAgICAgIHNvdXJjZUZpYmVyID0gc3VzcGVuc2VIYW5kbGVyU3RhY2tDdXJzb3IuY3VycmVudDsKICAgICAgICAgIGlmIChudWxsICE9PSBzb3VyY2VGaWJlcikgewogICAgICAgICAgICBzd2l0Y2ggKHNvdXJjZUZpYmVyLnRhZykgewogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PT0gc2hlbGxCb3VuZGFyeSA/IHJlbmRlckRpZFN1c3BlbmREZWxheUlmUG9zc2libGUoKSA6IG51bGwgPT09IHNvdXJjZUZpYmVyLmFsdGVybmF0ZSAmJiB3b3JrSW5Qcm9ncmVzc1Jvb3RFeGl0U3RhdHVzID09PSBSb290SW5Qcm9ncmVzcyAmJiAod29ya0luUHJvZ3Jlc3NSb290RXhpdFN0YXR1cyA9IFJvb3RTdXNwZW5kZWQpLCBzb3VyY2VGaWJlci5mbGFncyAmPSAtMjU3LCBzb3VyY2VGaWJlci5mbGFncyB8PSA2NTUzNiwgc291cmNlRmliZXIubGFuZXMgPSByb290UmVuZGVyTGFuZXMsIHZhbHVlID09PSBub29wU3VzcGVuc2V5Q29tbWl0VGhlbmFibGUgPyBzb3VyY2VGaWJlci5mbGFncyB8PSAxNjM4NCA6IChyZXR1cm5GaWJlciA9IHNvdXJjZUZpYmVyLnVwZGF0ZVF1ZXVlLCBudWxsID09PSByZXR1cm5GaWJlciA/IHNvdXJjZUZpYmVyLnVwZGF0ZVF1ZXVlID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoW3ZhbHVlXSkgOiByZXR1cm5GaWJlci5hZGQodmFsdWUpLCBhdHRhY2hQaW5nTGlzdGVuZXIocm9vdDIsIHZhbHVlLCByb290UmVuZGVyTGFuZXMpKSwgZmFsc2U7CiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgIHJldHVybiBzb3VyY2VGaWJlci5mbGFncyB8PSA2NTUzNiwgdmFsdWUgPT09IG5vb3BTdXNwZW5zZXlDb21taXRUaGVuYWJsZSA/IHNvdXJjZUZpYmVyLmZsYWdzIHw9IDE2Mzg0IDogKHJldHVybkZpYmVyID0gc291cmNlRmliZXIudXBkYXRlUXVldWUsIG51bGwgPT09IHJldHVybkZpYmVyID8gKHJldHVybkZpYmVyID0gewogICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uczogbnVsbCwKICAgICAgICAgICAgICAgICAgbWFya2VySW5zdGFuY2VzOiBudWxsLAogICAgICAgICAgICAgICAgICByZXRyeVF1ZXVlOiAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbdmFsdWVdKQogICAgICAgICAgICAgICAgfSwgc291cmNlRmliZXIudXBkYXRlUXVldWUgPSByZXR1cm5GaWJlcikgOiAoc291cmNlRmliZXIgPSByZXR1cm5GaWJlci5yZXRyeVF1ZXVlLCBudWxsID09PSBzb3VyY2VGaWJlciA/IHJldHVybkZpYmVyLnJldHJ5UXVldWUgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbdmFsdWVdKSA6IHNvdXJjZUZpYmVyLmFkZCh2YWx1ZSkpLCBhdHRhY2hQaW5nTGlzdGVuZXIocm9vdDIsIHZhbHVlLCByb290UmVuZGVyTGFuZXMpKSwgZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICAgIlVuZXhwZWN0ZWQgU3VzcGVuc2UgaGFuZGxlciB0YWcgKCIgKyBzb3VyY2VGaWJlci50YWcgKyAiKS4gVGhpcyBpcyBhIGJ1ZyBpbiBSZWFjdC4iCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBhdHRhY2hQaW5nTGlzdGVuZXIocm9vdDIsIHZhbHVlLCByb290UmVuZGVyTGFuZXMpOwogICAgICAgICAgcmVuZGVyRGlkU3VzcGVuZERlbGF5SWZQb3NzaWJsZSgpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZiAoaXNIeWRyYXRpbmcpCiAgICAgICAgICByZXR1cm4gZGlkU3VzcGVuZE9yRXJyb3JERVYgPSB0cnVlLCByZXR1cm5GaWJlciA9IHN1c3BlbnNlSGFuZGxlclN0YWNrQ3Vyc29yLmN1cnJlbnQsIG51bGwgIT09IHJldHVybkZpYmVyID8gKDAgPT09IChyZXR1cm5GaWJlci5mbGFncyAmIDY1NTM2KSAmJiAocmV0dXJuRmliZXIuZmxhZ3MgfD0gMjU2KSwgcmV0dXJuRmliZXIuZmxhZ3MgfD0gNjU1MzYsIHJldHVybkZpYmVyLmxhbmVzID0gcm9vdFJlbmRlckxhbmVzLCB2YWx1ZSAhPT0gSHlkcmF0aW9uTWlzbWF0Y2hFeGNlcHRpb24gJiYgcXVldWVIeWRyYXRpb25FcnJvcigKICAgICAgICAgICAgY3JlYXRlQ2FwdHVyZWRWYWx1ZUF0RmliZXIoCiAgICAgICAgICAgICAgRXJyb3IoCiAgICAgICAgICAgICAgICAiVGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIGh5ZHJhdGluZyBidXQgUmVhY3Qgd2FzIGFibGUgdG8gcmVjb3ZlciBieSBpbnN0ZWFkIGNsaWVudCByZW5kZXJpbmcgZnJvbSB0aGUgbmVhcmVzdCBTdXNwZW5zZSBib3VuZGFyeS4iLAogICAgICAgICAgICAgICAgeyBjYXVzZTogdmFsdWUgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgc291cmNlRmliZXIKICAgICAgICAgICAgKQogICAgICAgICAgKSkgOiAodmFsdWUgIT09IEh5ZHJhdGlvbk1pc21hdGNoRXhjZXB0aW9uICYmIHF1ZXVlSHlkcmF0aW9uRXJyb3IoCiAgICAgICAgICAgIGNyZWF0ZUNhcHR1cmVkVmFsdWVBdEZpYmVyKAogICAgICAgICAgICAgIEVycm9yKAogICAgICAgICAgICAgICAgIlRoZXJlIHdhcyBhbiBlcnJvciB3aGlsZSBoeWRyYXRpbmcgYnV0IFJlYWN0IHdhcyBhYmxlIHRvIHJlY292ZXIgYnkgaW5zdGVhZCBjbGllbnQgcmVuZGVyaW5nIHRoZSBlbnRpcmUgcm9vdC4iLAogICAgICAgICAgICAgICAgeyBjYXVzZTogdmFsdWUgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgc291cmNlRmliZXIKICAgICAgICAgICAgKQogICAgICAgICAgKSwgcm9vdDIgPSByb290Mi5jdXJyZW50LmFsdGVybmF0ZSwgcm9vdDIuZmxhZ3MgfD0gNjU1MzYsIHJvb3RSZW5kZXJMYW5lcyAmPSAtcm9vdFJlbmRlckxhbmVzLCByb290Mi5sYW5lcyB8PSByb290UmVuZGVyTGFuZXMsIHZhbHVlID0gY3JlYXRlQ2FwdHVyZWRWYWx1ZUF0RmliZXIodmFsdWUsIHNvdXJjZUZpYmVyKSwgcm9vdFJlbmRlckxhbmVzID0gY3JlYXRlUm9vdEVycm9yVXBkYXRlKAogICAgICAgICAgICByb290Mi5zdGF0ZU5vZGUsCiAgICAgICAgICAgIHZhbHVlLAogICAgICAgICAgICByb290UmVuZGVyTGFuZXMKICAgICAgICAgICksIGVucXVldWVDYXB0dXJlZFVwZGF0ZShyb290Miwgcm9vdFJlbmRlckxhbmVzKSwgd29ya0luUHJvZ3Jlc3NSb290RXhpdFN0YXR1cyAhPT0gUm9vdFN1c3BlbmRlZFdpdGhEZWxheSAmJiAod29ya0luUHJvZ3Jlc3NSb290RXhpdFN0YXR1cyA9IFJvb3RFcnJvcmVkKSksIGZhbHNlOwogICAgICAgIHZhciBlcnJvciA9IGNyZWF0ZUNhcHR1cmVkVmFsdWVBdEZpYmVyKAogICAgICAgICAgRXJyb3IoCiAgICAgICAgICAgICJUaGVyZSB3YXMgYW4gZXJyb3IgZHVyaW5nIGNvbmN1cnJlbnQgcmVuZGVyaW5nIGJ1dCBSZWFjdCB3YXMgYWJsZSB0byByZWNvdmVyIGJ5IGluc3RlYWQgc3luY2hyb25vdXNseSByZW5kZXJpbmcgdGhlIGVudGlyZSByb290LiIsCiAgICAgICAgICAgIHsgY2F1c2U6IHZhbHVlIH0KICAgICAgICAgICksCiAgICAgICAgICBzb3VyY2VGaWJlcgogICAgICAgICk7CiAgICAgICAgbnVsbCA9PT0gd29ya0luUHJvZ3Jlc3NSb290Q29uY3VycmVudEVycm9ycyA/IHdvcmtJblByb2dyZXNzUm9vdENvbmN1cnJlbnRFcnJvcnMgPSBbZXJyb3JdIDogd29ya0luUHJvZ3Jlc3NSb290Q29uY3VycmVudEVycm9ycy5wdXNoKGVycm9yKTsKICAgICAgICB3b3JrSW5Qcm9ncmVzc1Jvb3RFeGl0U3RhdHVzICE9PSBSb290U3VzcGVuZGVkV2l0aERlbGF5ICYmICh3b3JrSW5Qcm9ncmVzc1Jvb3RFeGl0U3RhdHVzID0gUm9vdEVycm9yZWQpOwogICAgICAgIGlmIChudWxsID09PSByZXR1cm5GaWJlcikgcmV0dXJuIHRydWU7CiAgICAgICAgdmFsdWUgPSBjcmVhdGVDYXB0dXJlZFZhbHVlQXRGaWJlcih2YWx1ZSwgc291cmNlRmliZXIpOwogICAgICAgIHNvdXJjZUZpYmVyID0gcmV0dXJuRmliZXI7CiAgICAgICAgZG8gewogICAgICAgICAgc3dpdGNoIChzb3VyY2VGaWJlci50YWcpIHsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJldHVybiBzb3VyY2VGaWJlci5mbGFncyB8PSA2NTUzNiwgcm9vdDIgPSByb290UmVuZGVyTGFuZXMgJiAtcm9vdFJlbmRlckxhbmVzLCBzb3VyY2VGaWJlci5sYW5lcyB8PSByb290Miwgcm9vdDIgPSBjcmVhdGVSb290RXJyb3JVcGRhdGUoCiAgICAgICAgICAgICAgICBzb3VyY2VGaWJlci5zdGF0ZU5vZGUsCiAgICAgICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgICAgIHJvb3QyCiAgICAgICAgICAgICAgKSwgZW5xdWV1ZUNhcHR1cmVkVXBkYXRlKHNvdXJjZUZpYmVyLCByb290MiksIGZhbHNlOwogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgaWYgKHJldHVybkZpYmVyID0gc291cmNlRmliZXIudHlwZSwgZXJyb3IgPSBzb3VyY2VGaWJlci5zdGF0ZU5vZGUsIDAgPT09IChzb3VyY2VGaWJlci5mbGFncyAmIDEyOCkgJiYgKCJmdW5jdGlvbiIgPT09IHR5cGVvZiByZXR1cm5GaWJlci5nZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IgfHwgbnVsbCAhPT0gZXJyb3IgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGVycm9yLmNvbXBvbmVudERpZENhdGNoICYmIChudWxsID09PSBsZWdhY3lFcnJvckJvdW5kYXJpZXNUaGF0QWxyZWFkeUZhaWxlZCB8fCAhbGVnYWN5RXJyb3JCb3VuZGFyaWVzVGhhdEFscmVhZHlGYWlsZWQuaGFzKGVycm9yKSkpKQogICAgICAgICAgICAgICAgcmV0dXJuIHNvdXJjZUZpYmVyLmZsYWdzIHw9IDY1NTM2LCByb290UmVuZGVyTGFuZXMgJj0gLXJvb3RSZW5kZXJMYW5lcywgc291cmNlRmliZXIubGFuZXMgfD0gcm9vdFJlbmRlckxhbmVzLCByb290UmVuZGVyTGFuZXMgPSBjcmVhdGVDbGFzc0Vycm9yVXBkYXRlKHJvb3RSZW5kZXJMYW5lcyksIGluaXRpYWxpemVDbGFzc0Vycm9yVXBkYXRlKAogICAgICAgICAgICAgICAgICByb290UmVuZGVyTGFuZXMsCiAgICAgICAgICAgICAgICAgIHJvb3QyLAogICAgICAgICAgICAgICAgICBzb3VyY2VGaWJlciwKICAgICAgICAgICAgICAgICAgdmFsdWUKICAgICAgICAgICAgICAgICksIGVucXVldWVDYXB0dXJlZFVwZGF0ZShzb3VyY2VGaWJlciwgcm9vdFJlbmRlckxhbmVzKSwgZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgICBzb3VyY2VGaWJlciA9IHNvdXJjZUZpYmVyLnJldHVybjsKICAgICAgICB9IHdoaWxlIChudWxsICE9PSBzb3VyY2VGaWJlcik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlY29uY2lsZUNoaWxkcmVuKGN1cnJlbnQyLCB3b3JrSW5Qcm9ncmVzczIsIG5leHRDaGlsZHJlbiwgcmVuZGVyTGFuZXMyKSB7CiAgICAgICAgd29ya0luUHJvZ3Jlc3MyLmNoaWxkID0gbnVsbCA9PT0gY3VycmVudDIgPyBtb3VudENoaWxkRmliZXJzKHdvcmtJblByb2dyZXNzMiwgbnVsbCwgbmV4dENoaWxkcmVuLCByZW5kZXJMYW5lczIpIDogcmVjb25jaWxlQ2hpbGRGaWJlcnMoCiAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICBjdXJyZW50Mi5jaGlsZCwKICAgICAgICAgIG5leHRDaGlsZHJlbiwKICAgICAgICAgIHJlbmRlckxhbmVzMgogICAgICAgICk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdXBkYXRlRm9yd2FyZFJlZihjdXJyZW50Miwgd29ya0luUHJvZ3Jlc3MyLCBDb21wb25lbnQsIG5leHRQcm9wcywgcmVuZGVyTGFuZXMyKSB7CiAgICAgICAgQ29tcG9uZW50ID0gQ29tcG9uZW50LnJlbmRlcjsKICAgICAgICB2YXIgcmVmID0gd29ya0luUHJvZ3Jlc3MyLnJlZjsKICAgICAgICBpZiAoInJlZiIgaW4gbmV4dFByb3BzKSB7CiAgICAgICAgICB2YXIgcHJvcHNXaXRob3V0UmVmID0ge307CiAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gbmV4dFByb3BzKQogICAgICAgICAgICAicmVmIiAhPT0ga2V5ICYmIChwcm9wc1dpdGhvdXRSZWZba2V5XSA9IG5leHRQcm9wc1trZXldKTsKICAgICAgICB9IGVsc2UgcHJvcHNXaXRob3V0UmVmID0gbmV4dFByb3BzOwogICAgICAgIHByZXBhcmVUb1JlYWRDb250ZXh0KHdvcmtJblByb2dyZXNzMik7CiAgICAgICAgbWFya0NvbXBvbmVudFJlbmRlclN0YXJ0ZWQod29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICBuZXh0UHJvcHMgPSByZW5kZXJXaXRoSG9va3MoCiAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgIENvbXBvbmVudCwKICAgICAgICAgIHByb3BzV2l0aG91dFJlZiwKICAgICAgICAgIHJlZiwKICAgICAgICAgIHJlbmRlckxhbmVzMgogICAgICAgICk7CiAgICAgICAga2V5ID0gY2hlY2tEaWRSZW5kZXJJZEhvb2soKTsKICAgICAgICBtYXJrQ29tcG9uZW50UmVuZGVyU3RvcHBlZCgpOwogICAgICAgIGlmIChudWxsICE9PSBjdXJyZW50MiAmJiAhZGlkUmVjZWl2ZVVwZGF0ZSkKICAgICAgICAgIHJldHVybiBiYWlsb3V0SG9va3MoY3VycmVudDIsIHdvcmtJblByb2dyZXNzMiwgcmVuZGVyTGFuZXMyKSwgYmFpbG91dE9uQWxyZWFkeUZpbmlzaGVkV29yayhjdXJyZW50Miwgd29ya0luUHJvZ3Jlc3MyLCByZW5kZXJMYW5lczIpOwogICAgICAgIGlzSHlkcmF0aW5nICYmIGtleSAmJiBwdXNoTWF0ZXJpYWxpemVkVHJlZUlkKHdvcmtJblByb2dyZXNzMik7CiAgICAgICAgd29ya0luUHJvZ3Jlc3MyLmZsYWdzIHw9IDE7CiAgICAgICAgcmVjb25jaWxlQ2hpbGRyZW4oY3VycmVudDIsIHdvcmtJblByb2dyZXNzMiwgbmV4dFByb3BzLCByZW5kZXJMYW5lczIpOwogICAgICAgIHJldHVybiB3b3JrSW5Qcm9ncmVzczIuY2hpbGQ7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdXBkYXRlTWVtb0NvbXBvbmVudChjdXJyZW50Miwgd29ya0luUHJvZ3Jlc3MyLCBDb21wb25lbnQsIG5leHRQcm9wcywgcmVuZGVyTGFuZXMyKSB7CiAgICAgICAgaWYgKG51bGwgPT09IGN1cnJlbnQyKSB7CiAgICAgICAgICB2YXIgdHlwZSA9IENvbXBvbmVudC50eXBlOwogICAgICAgICAgaWYgKCJmdW5jdGlvbiIgPT09IHR5cGVvZiB0eXBlICYmICFzaG91bGRDb25zdHJ1Y3QodHlwZSkgJiYgdm9pZCAwID09PSB0eXBlLmRlZmF1bHRQcm9wcyAmJiBudWxsID09PSBDb21wb25lbnQuY29tcGFyZSkKICAgICAgICAgICAgcmV0dXJuIENvbXBvbmVudCA9IHJlc29sdmVGdW5jdGlvbkZvckhvdFJlbG9hZGluZyh0eXBlKSwgd29ya0luUHJvZ3Jlc3MyLnRhZyA9IDE1LCB3b3JrSW5Qcm9ncmVzczIudHlwZSA9IENvbXBvbmVudCwgdmFsaWRhdGVGdW5jdGlvbkNvbXBvbmVudEluRGV2KHdvcmtJblByb2dyZXNzMiwgdHlwZSksIHVwZGF0ZVNpbXBsZU1lbW9Db21wb25lbnQoCiAgICAgICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICAgIENvbXBvbmVudCwKICAgICAgICAgICAgICBuZXh0UHJvcHMsCiAgICAgICAgICAgICAgcmVuZGVyTGFuZXMyCiAgICAgICAgICAgICk7CiAgICAgICAgICBjdXJyZW50MiA9IGNyZWF0ZUZpYmVyRnJvbVR5cGVBbmRQcm9wcygKICAgICAgICAgICAgQ29tcG9uZW50LnR5cGUsCiAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgIG5leHRQcm9wcywKICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIubW9kZSwKICAgICAgICAgICAgcmVuZGVyTGFuZXMyCiAgICAgICAgICApOwogICAgICAgICAgY3VycmVudDIucmVmID0gd29ya0luUHJvZ3Jlc3MyLnJlZjsKICAgICAgICAgIGN1cnJlbnQyLnJldHVybiA9IHdvcmtJblByb2dyZXNzMjsKICAgICAgICAgIHJldHVybiB3b3JrSW5Qcm9ncmVzczIuY2hpbGQgPSBjdXJyZW50MjsKICAgICAgICB9CiAgICAgICAgdHlwZSA9IGN1cnJlbnQyLmNoaWxkOwogICAgICAgIGlmICghY2hlY2tTY2hlZHVsZWRVcGRhdGVPckNvbnRleHQoY3VycmVudDIsIHJlbmRlckxhbmVzMikpIHsKICAgICAgICAgIHZhciBwcmV2UHJvcHMgPSB0eXBlLm1lbW9pemVkUHJvcHM7CiAgICAgICAgICBDb21wb25lbnQgPSBDb21wb25lbnQuY29tcGFyZTsKICAgICAgICAgIENvbXBvbmVudCA9IG51bGwgIT09IENvbXBvbmVudCA/IENvbXBvbmVudCA6IHNoYWxsb3dFcXVhbDsKICAgICAgICAgIGlmIChDb21wb25lbnQocHJldlByb3BzLCBuZXh0UHJvcHMpICYmIGN1cnJlbnQyLnJlZiA9PT0gd29ya0luUHJvZ3Jlc3MyLnJlZikKICAgICAgICAgICAgcmV0dXJuIGJhaWxvdXRPbkFscmVhZHlGaW5pc2hlZFdvcmsoCiAgICAgICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICAgIHJlbmRlckxhbmVzMgogICAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICB3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgfD0gMTsKICAgICAgICBjdXJyZW50MiA9IGNyZWF0ZVdvcmtJblByb2dyZXNzKHR5cGUsIG5leHRQcm9wcyk7CiAgICAgICAgY3VycmVudDIucmVmID0gd29ya0luUHJvZ3Jlc3MyLnJlZjsKICAgICAgICBjdXJyZW50Mi5yZXR1cm4gPSB3b3JrSW5Qcm9ncmVzczI7CiAgICAgICAgcmV0dXJuIHdvcmtJblByb2dyZXNzMi5jaGlsZCA9IGN1cnJlbnQyOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVNpbXBsZU1lbW9Db21wb25lbnQoY3VycmVudDIsIHdvcmtJblByb2dyZXNzMiwgQ29tcG9uZW50LCBuZXh0UHJvcHMsIHJlbmRlckxhbmVzMikgewogICAgICAgIGlmIChudWxsICE9PSBjdXJyZW50MikgewogICAgICAgICAgdmFyIHByZXZQcm9wcyA9IGN1cnJlbnQyLm1lbW9pemVkUHJvcHM7CiAgICAgICAgICBpZiAoc2hhbGxvd0VxdWFsKHByZXZQcm9wcywgbmV4dFByb3BzKSAmJiBjdXJyZW50Mi5yZWYgPT09IHdvcmtJblByb2dyZXNzMi5yZWYgJiYgd29ya0luUHJvZ3Jlc3MyLnR5cGUgPT09IGN1cnJlbnQyLnR5cGUpCiAgICAgICAgICAgIGlmIChkaWRSZWNlaXZlVXBkYXRlID0gZmFsc2UsIHdvcmtJblByb2dyZXNzMi5wZW5kaW5nUHJvcHMgPSBuZXh0UHJvcHMgPSBwcmV2UHJvcHMsIGNoZWNrU2NoZWR1bGVkVXBkYXRlT3JDb250ZXh0KGN1cnJlbnQyLCByZW5kZXJMYW5lczIpKQogICAgICAgICAgICAgIDAgIT09IChjdXJyZW50Mi5mbGFncyAmIDEzMTA3MikgJiYgKGRpZFJlY2VpdmVVcGRhdGUgPSB0cnVlKTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgIHJldHVybiB3b3JrSW5Qcm9ncmVzczIubGFuZXMgPSBjdXJyZW50Mi5sYW5lcywgYmFpbG91dE9uQWxyZWFkeUZpbmlzaGVkV29yayhjdXJyZW50Miwgd29ya0luUHJvZ3Jlc3MyLCByZW5kZXJMYW5lczIpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdXBkYXRlRnVuY3Rpb25Db21wb25lbnQoCiAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgIENvbXBvbmVudCwKICAgICAgICAgIG5leHRQcm9wcywKICAgICAgICAgIHJlbmRlckxhbmVzMgogICAgICAgICk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdXBkYXRlT2Zmc2NyZWVuQ29tcG9uZW50KGN1cnJlbnQyLCB3b3JrSW5Qcm9ncmVzczIsIHJlbmRlckxhbmVzMikgewogICAgICAgIHZhciBuZXh0UHJvcHMgPSB3b3JrSW5Qcm9ncmVzczIucGVuZGluZ1Byb3BzLCBuZXh0Q2hpbGRyZW4gPSBuZXh0UHJvcHMuY2hpbGRyZW4sIHByZXZTdGF0ZSA9IG51bGwgIT09IGN1cnJlbnQyID8gY3VycmVudDIubWVtb2l6ZWRTdGF0ZSA6IG51bGw7CiAgICAgICAgaWYgKCJoaWRkZW4iID09PSBuZXh0UHJvcHMubW9kZSkgewogICAgICAgICAgaWYgKDAgIT09ICh3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgJiAxMjgpKSB7CiAgICAgICAgICAgIG5leHRQcm9wcyA9IG51bGwgIT09IHByZXZTdGF0ZSA/IHByZXZTdGF0ZS5iYXNlTGFuZXMgfCByZW5kZXJMYW5lczIgOiByZW5kZXJMYW5lczI7CiAgICAgICAgICAgIGlmIChudWxsICE9PSBjdXJyZW50MikgewogICAgICAgICAgICAgIG5leHRDaGlsZHJlbiA9IHdvcmtJblByb2dyZXNzMi5jaGlsZCA9IGN1cnJlbnQyLmNoaWxkOwogICAgICAgICAgICAgIGZvciAocHJldlN0YXRlID0gMDsgbnVsbCAhPT0gbmV4dENoaWxkcmVuOyApCiAgICAgICAgICAgICAgICBwcmV2U3RhdGUgPSBwcmV2U3RhdGUgfCBuZXh0Q2hpbGRyZW4ubGFuZXMgfCBuZXh0Q2hpbGRyZW4uY2hpbGRMYW5lcywgbmV4dENoaWxkcmVuID0gbmV4dENoaWxkcmVuLnNpYmxpbmc7CiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLmNoaWxkTGFuZXMgPSBwcmV2U3RhdGUgJiB+bmV4dFByb3BzOwogICAgICAgICAgICB9IGVsc2Ugd29ya0luUHJvZ3Jlc3MyLmNoaWxkTGFuZXMgPSAwLCB3b3JrSW5Qcm9ncmVzczIuY2hpbGQgPSBudWxsOwogICAgICAgICAgICByZXR1cm4gZGVmZXJIaWRkZW5PZmZzY3JlZW5Db21wb25lbnQoCiAgICAgICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICAgIG5leHRQcm9wcywKICAgICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICgwICE9PSAocmVuZGVyTGFuZXMyICYgNTM2ODcwOTEyKSkKICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkU3RhdGUgPSB7IGJhc2VMYW5lczogMCwgY2FjaGVQb29sOiBudWxsIH0sIG51bGwgIT09IGN1cnJlbnQyICYmIHB1c2hUcmFuc2l0aW9uKAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICBudWxsICE9PSBwcmV2U3RhdGUgPyBwcmV2U3RhdGUuY2FjaGVQb29sIDogbnVsbAogICAgICAgICAgICApLCBudWxsICE9PSBwcmV2U3RhdGUgPyBwdXNoSGlkZGVuQ29udGV4dCh3b3JrSW5Qcm9ncmVzczIsIHByZXZTdGF0ZSkgOiByZXVzZUhpZGRlbkNvbnRleHRPblN0YWNrKHdvcmtJblByb2dyZXNzMiksIHB1c2hPZmZzY3JlZW5TdXNwZW5zZUhhbmRsZXIod29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgcmV0dXJuIHdvcmtJblByb2dyZXNzMi5sYW5lcyA9IHdvcmtJblByb2dyZXNzMi5jaGlsZExhbmVzID0gNTM2ODcwOTEyLCBkZWZlckhpZGRlbk9mZnNjcmVlbkNvbXBvbmVudCgKICAgICAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICAgICAgbnVsbCAhPT0gcHJldlN0YXRlID8gcHJldlN0YXRlLmJhc2VMYW5lcyB8IHJlbmRlckxhbmVzMiA6IHJlbmRlckxhbmVzMiwKICAgICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICAgKTsKICAgICAgICB9IGVsc2UKICAgICAgICAgIG51bGwgIT09IHByZXZTdGF0ZSA/IChwdXNoVHJhbnNpdGlvbih3b3JrSW5Qcm9ncmVzczIsIHByZXZTdGF0ZS5jYWNoZVBvb2wpLCBwdXNoSGlkZGVuQ29udGV4dCh3b3JrSW5Qcm9ncmVzczIsIHByZXZTdGF0ZSksIHJldXNlU3VzcGVuc2VIYW5kbGVyT25TdGFjayh3b3JrSW5Qcm9ncmVzczIpLCB3b3JrSW5Qcm9ncmVzczIubWVtb2l6ZWRTdGF0ZSA9IG51bGwpIDogKG51bGwgIT09IGN1cnJlbnQyICYmIHB1c2hUcmFuc2l0aW9uKHdvcmtJblByb2dyZXNzMiwgbnVsbCksIHJldXNlSGlkZGVuQ29udGV4dE9uU3RhY2sod29ya0luUHJvZ3Jlc3MyKSwgcmV1c2VTdXNwZW5zZUhhbmRsZXJPblN0YWNrKHdvcmtJblByb2dyZXNzMikpOwogICAgICAgIHJlY29uY2lsZUNoaWxkcmVuKGN1cnJlbnQyLCB3b3JrSW5Qcm9ncmVzczIsIG5leHRDaGlsZHJlbiwgcmVuZGVyTGFuZXMyKTsKICAgICAgICByZXR1cm4gd29ya0luUHJvZ3Jlc3MyLmNoaWxkOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGRlZmVySGlkZGVuT2Zmc2NyZWVuQ29tcG9uZW50KGN1cnJlbnQyLCB3b3JrSW5Qcm9ncmVzczIsIG5leHRCYXNlTGFuZXMsIHJlbmRlckxhbmVzMikgewogICAgICAgIHZhciBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSBwZWVrQ2FjaGVGcm9tUG9vbCgpOwogICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9IG51bGwgPT09IEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA/IG51bGwgOiB7CiAgICAgICAgICBwYXJlbnQ6IENhY2hlQ29udGV4dC5fY3VycmVudFZhbHVlLAogICAgICAgICAgcG9vbDogSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0CiAgICAgICAgfTsKICAgICAgICB3b3JrSW5Qcm9ncmVzczIubWVtb2l6ZWRTdGF0ZSA9IHsKICAgICAgICAgIGJhc2VMYW5lczogbmV4dEJhc2VMYW5lcywKICAgICAgICAgIGNhY2hlUG9vbDogSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0CiAgICAgICAgfTsKICAgICAgICBudWxsICE9PSBjdXJyZW50MiAmJiBwdXNoVHJhbnNpdGlvbih3b3JrSW5Qcm9ncmVzczIsIG51bGwpOwogICAgICAgIHJldXNlSGlkZGVuQ29udGV4dE9uU3RhY2sod29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICBwdXNoT2Zmc2NyZWVuU3VzcGVuc2VIYW5kbGVyKHdvcmtJblByb2dyZXNzMik7CiAgICAgICAgbnVsbCAhPT0gY3VycmVudDIgJiYgcHJvcGFnYXRlUGFyZW50Q29udGV4dENoYW5nZXMoY3VycmVudDIsIHdvcmtJblByb2dyZXNzMiwgcmVuZGVyTGFuZXMyLCB0cnVlKTsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICBmdW5jdGlvbiBtYXJrUmVmKGN1cnJlbnQyLCB3b3JrSW5Qcm9ncmVzczIpIHsKICAgICAgICB2YXIgcmVmID0gd29ya0luUHJvZ3Jlc3MyLnJlZjsKICAgICAgICBpZiAobnVsbCA9PT0gcmVmKQogICAgICAgICAgbnVsbCAhPT0gY3VycmVudDIgJiYgbnVsbCAhPT0gY3VycmVudDIucmVmICYmICh3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgfD0gNDE5NDgxNik7CiAgICAgICAgZWxzZSB7CiAgICAgICAgICBpZiAoImZ1bmN0aW9uIiAhPT0gdHlwZW9mIHJlZiAmJiAib2JqZWN0IiAhPT0gdHlwZW9mIHJlZikKICAgICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICAgIkV4cGVjdGVkIHJlZiB0byBiZSBhIGZ1bmN0aW9uLCBhbiBvYmplY3QgcmV0dXJuZWQgYnkgUmVhY3QuY3JlYXRlUmVmKCksIG9yIHVuZGVmaW5lZC9udWxsLiIKICAgICAgICAgICAgKTsKICAgICAgICAgIGlmIChudWxsID09PSBjdXJyZW50MiB8fCBjdXJyZW50Mi5yZWYgIT09IHJlZikKICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLmZsYWdzIHw9IDQxOTQ4MTY7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIHVwZGF0ZUZ1bmN0aW9uQ29tcG9uZW50KGN1cnJlbnQyLCB3b3JrSW5Qcm9ncmVzczIsIENvbXBvbmVudCwgbmV4dFByb3BzLCByZW5kZXJMYW5lczIpIHsKICAgICAgICBpZiAoQ29tcG9uZW50LnByb3RvdHlwZSAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgQ29tcG9uZW50LnByb3RvdHlwZS5yZW5kZXIpIHsKICAgICAgICAgIHZhciBjb21wb25lbnROYW1lMiA9IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZShDb21wb25lbnQpIHx8ICJVbmtub3duIjsKICAgICAgICAgIGRpZFdhcm5BYm91dEJhZENsYXNzW2NvbXBvbmVudE5hbWUyXSB8fCAoY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIlRoZSA8JXMgLz4gY29tcG9uZW50IGFwcGVhcnMgdG8gaGF2ZSBhIHJlbmRlciBtZXRob2QsIGJ1dCBkb2Vzbid0IGV4dGVuZCBSZWFjdC5Db21wb25lbnQuIFRoaXMgaXMgbGlrZWx5IHRvIGNhdXNlIGVycm9ycy4gQ2hhbmdlICVzIHRvIGV4dGVuZCBSZWFjdC5Db21wb25lbnQgaW5zdGVhZC4iLAogICAgICAgICAgICBjb21wb25lbnROYW1lMiwKICAgICAgICAgICAgY29tcG9uZW50TmFtZTIKICAgICAgICAgICksIGRpZFdhcm5BYm91dEJhZENsYXNzW2NvbXBvbmVudE5hbWUyXSA9IHRydWUpOwogICAgICAgIH0KICAgICAgICB3b3JrSW5Qcm9ncmVzczIubW9kZSAmIFN0cmljdExlZ2FjeU1vZGUgJiYgUmVhY3RTdHJpY3RNb2RlV2FybmluZ3MucmVjb3JkTGVnYWN5Q29udGV4dFdhcm5pbmcoCiAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICBudWxsCiAgICAgICAgKTsKICAgICAgICBudWxsID09PSBjdXJyZW50MiAmJiAodmFsaWRhdGVGdW5jdGlvbkNvbXBvbmVudEluRGV2KHdvcmtJblByb2dyZXNzMiwgd29ya0luUHJvZ3Jlc3MyLnR5cGUpLCBDb21wb25lbnQuY29udGV4dFR5cGVzICYmIChjb21wb25lbnROYW1lMiA9IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZShDb21wb25lbnQpIHx8ICJVbmtub3duIiwgZGlkV2FybkFib3V0Q29udGV4dFR5cGVzW2NvbXBvbmVudE5hbWUyXSB8fCAoZGlkV2FybkFib3V0Q29udGV4dFR5cGVzW2NvbXBvbmVudE5hbWUyXSA9IHRydWUsIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiJXMgdXNlcyB0aGUgbGVnYWN5IGNvbnRleHRUeXBlcyBBUEkgd2hpY2ggd2FzIHJlbW92ZWQgaW4gUmVhY3QgMTkuIFVzZSBSZWFjdC5jcmVhdGVDb250ZXh0KCkgd2l0aCBSZWFjdC51c2VDb250ZXh0KCkgaW5zdGVhZC4gKGh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvbGVnYWN5LWNvbnRleHQpIiwKICAgICAgICAgIGNvbXBvbmVudE5hbWUyCiAgICAgICAgKSkpKTsKICAgICAgICBwcmVwYXJlVG9SZWFkQ29udGV4dCh3b3JrSW5Qcm9ncmVzczIpOwogICAgICAgIG1hcmtDb21wb25lbnRSZW5kZXJTdGFydGVkKHdvcmtJblByb2dyZXNzMik7CiAgICAgICAgQ29tcG9uZW50ID0gcmVuZGVyV2l0aEhvb2tzKAogICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICBDb21wb25lbnQsCiAgICAgICAgICBuZXh0UHJvcHMsCiAgICAgICAgICB2b2lkIDAsCiAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICApOwogICAgICAgIG5leHRQcm9wcyA9IGNoZWNrRGlkUmVuZGVySWRIb29rKCk7CiAgICAgICAgbWFya0NvbXBvbmVudFJlbmRlclN0b3BwZWQoKTsKICAgICAgICBpZiAobnVsbCAhPT0gY3VycmVudDIgJiYgIWRpZFJlY2VpdmVVcGRhdGUpCiAgICAgICAgICByZXR1cm4gYmFpbG91dEhvb2tzKGN1cnJlbnQyLCB3b3JrSW5Qcm9ncmVzczIsIHJlbmRlckxhbmVzMiksIGJhaWxvdXRPbkFscmVhZHlGaW5pc2hlZFdvcmsoY3VycmVudDIsIHdvcmtJblByb2dyZXNzMiwgcmVuZGVyTGFuZXMyKTsKICAgICAgICBpc0h5ZHJhdGluZyAmJiBuZXh0UHJvcHMgJiYgcHVzaE1hdGVyaWFsaXplZFRyZWVJZCh3b3JrSW5Qcm9ncmVzczIpOwogICAgICAgIHdvcmtJblByb2dyZXNzMi5mbGFncyB8PSAxOwogICAgICAgIHJlY29uY2lsZUNoaWxkcmVuKGN1cnJlbnQyLCB3b3JrSW5Qcm9ncmVzczIsIENvbXBvbmVudCwgcmVuZGVyTGFuZXMyKTsKICAgICAgICByZXR1cm4gd29ya0luUHJvZ3Jlc3MyLmNoaWxkOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlcGxheUZ1bmN0aW9uQ29tcG9uZW50KGN1cnJlbnQyLCB3b3JrSW5Qcm9ncmVzczIsIG5leHRQcm9wcywgQ29tcG9uZW50LCBzZWNvbmRBcmcsIHJlbmRlckxhbmVzMikgewogICAgICAgIHByZXBhcmVUb1JlYWRDb250ZXh0KHdvcmtJblByb2dyZXNzMik7CiAgICAgICAgbWFya0NvbXBvbmVudFJlbmRlclN0YXJ0ZWQod29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICBob29rVHlwZXNVcGRhdGVJbmRleERldiA9IC0xOwogICAgICAgIGlnbm9yZVByZXZpb3VzRGVwZW5kZW5jaWVzID0gbnVsbCAhPT0gY3VycmVudDIgJiYgY3VycmVudDIudHlwZSAhPT0gd29ya0luUHJvZ3Jlc3MyLnR5cGU7CiAgICAgICAgd29ya0luUHJvZ3Jlc3MyLnVwZGF0ZVF1ZXVlID0gbnVsbDsKICAgICAgICBuZXh0UHJvcHMgPSByZW5kZXJXaXRoSG9va3NBZ2FpbigKICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgIENvbXBvbmVudCwKICAgICAgICAgIG5leHRQcm9wcywKICAgICAgICAgIHNlY29uZEFyZwogICAgICAgICk7CiAgICAgICAgZmluaXNoUmVuZGVyaW5nSG9va3MoY3VycmVudDIsIHdvcmtJblByb2dyZXNzMik7CiAgICAgICAgQ29tcG9uZW50ID0gY2hlY2tEaWRSZW5kZXJJZEhvb2soKTsKICAgICAgICBtYXJrQ29tcG9uZW50UmVuZGVyU3RvcHBlZCgpOwogICAgICAgIGlmIChudWxsICE9PSBjdXJyZW50MiAmJiAhZGlkUmVjZWl2ZVVwZGF0ZSkKICAgICAgICAgIHJldHVybiBiYWlsb3V0SG9va3MoY3VycmVudDIsIHdvcmtJblByb2dyZXNzMiwgcmVuZGVyTGFuZXMyKSwgYmFpbG91dE9uQWxyZWFkeUZpbmlzaGVkV29yayhjdXJyZW50Miwgd29ya0luUHJvZ3Jlc3MyLCByZW5kZXJMYW5lczIpOwogICAgICAgIGlzSHlkcmF0aW5nICYmIENvbXBvbmVudCAmJiBwdXNoTWF0ZXJpYWxpemVkVHJlZUlkKHdvcmtJblByb2dyZXNzMik7CiAgICAgICAgd29ya0luUHJvZ3Jlc3MyLmZsYWdzIHw9IDE7CiAgICAgICAgcmVjb25jaWxlQ2hpbGRyZW4oY3VycmVudDIsIHdvcmtJblByb2dyZXNzMiwgbmV4dFByb3BzLCByZW5kZXJMYW5lczIpOwogICAgICAgIHJldHVybiB3b3JrSW5Qcm9ncmVzczIuY2hpbGQ7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdXBkYXRlQ2xhc3NDb21wb25lbnQoY3VycmVudDIsIHdvcmtJblByb2dyZXNzMiwgQ29tcG9uZW50LCBuZXh0UHJvcHMsIHJlbmRlckxhbmVzMikgewogICAgICAgIHN3aXRjaCAoc2hvdWxkRXJyb3JJbXBsKHdvcmtJblByb2dyZXNzMikpIHsKICAgICAgICAgIGNhc2UgZmFsc2U6CiAgICAgICAgICAgIHZhciBfaW5zdGFuY2UgPSB3b3JrSW5Qcm9ncmVzczIuc3RhdGVOb2RlLCBzdGF0ZSA9IG5ldyB3b3JrSW5Qcm9ncmVzczIudHlwZSgKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIubWVtb2l6ZWRQcm9wcywKICAgICAgICAgICAgICBfaW5zdGFuY2UuY29udGV4dAogICAgICAgICAgICApLnN0YXRlOwogICAgICAgICAgICBfaW5zdGFuY2UudXBkYXRlci5lbnF1ZXVlU2V0U3RhdGUoX2luc3RhbmNlLCBzdGF0ZSwgbnVsbCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSB0cnVlOgogICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgfD0gMTI4OwogICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgfD0gNjU1MzY7CiAgICAgICAgICAgIF9pbnN0YW5jZSA9IEVycm9yKCJTaW11bGF0ZWQgZXJyb3IgY29taW5nIGZyb20gRGV2VG9vbHMiKTsKICAgICAgICAgICAgdmFyIGxhbmUgPSByZW5kZXJMYW5lczIgJiAtcmVuZGVyTGFuZXMyOwogICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIubGFuZXMgfD0gbGFuZTsKICAgICAgICAgICAgc3RhdGUgPSB3b3JrSW5Qcm9ncmVzc1Jvb3Q7CiAgICAgICAgICAgIGlmIChudWxsID09PSBzdGF0ZSkKICAgICAgICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICAgICAgICJFeHBlY3RlZCBhIHdvcmstaW4tcHJvZ3Jlc3Mgcm9vdC4gVGhpcyBpcyBhIGJ1ZyBpbiBSZWFjdC4gUGxlYXNlIGZpbGUgYW4gaXNzdWUuIgogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIGxhbmUgPSBjcmVhdGVDbGFzc0Vycm9yVXBkYXRlKGxhbmUpOwogICAgICAgICAgICBpbml0aWFsaXplQ2xhc3NFcnJvclVwZGF0ZSgKICAgICAgICAgICAgICBsYW5lLAogICAgICAgICAgICAgIHN0YXRlLAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICBjcmVhdGVDYXB0dXJlZFZhbHVlQXRGaWJlcihfaW5zdGFuY2UsIHdvcmtJblByb2dyZXNzMikKICAgICAgICAgICAgKTsKICAgICAgICAgICAgZW5xdWV1ZUNhcHR1cmVkVXBkYXRlKHdvcmtJblByb2dyZXNzMiwgbGFuZSk7CiAgICAgICAgfQogICAgICAgIHByZXBhcmVUb1JlYWRDb250ZXh0KHdvcmtJblByb2dyZXNzMik7CiAgICAgICAgaWYgKG51bGwgPT09IHdvcmtJblByb2dyZXNzMi5zdGF0ZU5vZGUpIHsKICAgICAgICAgIHN0YXRlID0gZW1wdHlDb250ZXh0T2JqZWN0OwogICAgICAgICAgX2luc3RhbmNlID0gQ29tcG9uZW50LmNvbnRleHRUeXBlOwogICAgICAgICAgImNvbnRleHRUeXBlIiBpbiBDb21wb25lbnQgJiYgbnVsbCAhPT0gX2luc3RhbmNlICYmICh2b2lkIDAgPT09IF9pbnN0YW5jZSB8fCBfaW5zdGFuY2UuJCR0eXBlb2YgIT09IFJFQUNUX0NPTlRFWFRfVFlQRSkgJiYgIWRpZFdhcm5BYm91dEludmFsaWRhdGVDb250ZXh0VHlwZS5oYXMoQ29tcG9uZW50KSAmJiAoZGlkV2FybkFib3V0SW52YWxpZGF0ZUNvbnRleHRUeXBlLmFkZChDb21wb25lbnQpLCBsYW5lID0gdm9pZCAwID09PSBfaW5zdGFuY2UgPyAiIEhvd2V2ZXIsIGl0IGlzIHNldCB0byB1bmRlZmluZWQuIFRoaXMgY2FuIGJlIGNhdXNlZCBieSBhIHR5cG8gb3IgYnkgbWl4aW5nIHVwIG5hbWVkIGFuZCBkZWZhdWx0IGltcG9ydHMuIFRoaXMgY2FuIGFsc28gaGFwcGVuIGR1ZSB0byBhIGNpcmN1bGFyIGRlcGVuZGVuY3ksIHNvIHRyeSBtb3ZpbmcgdGhlIGNyZWF0ZUNvbnRleHQoKSBjYWxsIHRvIGEgc2VwYXJhdGUgZmlsZS4iIDogIm9iamVjdCIgIT09IHR5cGVvZiBfaW5zdGFuY2UgPyAiIEhvd2V2ZXIsIGl0IGlzIHNldCB0byBhICIgKyB0eXBlb2YgX2luc3RhbmNlICsgIi4iIDogX2luc3RhbmNlLiQkdHlwZW9mID09PSBSRUFDVF9DT05TVU1FUl9UWVBFID8gIiBEaWQgeW91IGFjY2lkZW50YWxseSBwYXNzIHRoZSBDb250ZXh0LkNvbnN1bWVyIGluc3RlYWQ/IiA6ICIgSG93ZXZlciwgaXQgaXMgc2V0IHRvIGFuIG9iamVjdCB3aXRoIGtleXMgeyIgKyBPYmplY3Qua2V5cyhfaW5zdGFuY2UpLmpvaW4oIiwgIikgKyAifS4iLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiJXMgZGVmaW5lcyBhbiBpbnZhbGlkIGNvbnRleHRUeXBlLiBjb250ZXh0VHlwZSBzaG91bGQgcG9pbnQgdG8gdGhlIENvbnRleHQgb2JqZWN0IHJldHVybmVkIGJ5IFJlYWN0LmNyZWF0ZUNvbnRleHQoKS4lcyIsCiAgICAgICAgICAgIGdldENvbXBvbmVudE5hbWVGcm9tVHlwZShDb21wb25lbnQpIHx8ICJDb21wb25lbnQiLAogICAgICAgICAgICBsYW5lCiAgICAgICAgICApKTsKICAgICAgICAgICJvYmplY3QiID09PSB0eXBlb2YgX2luc3RhbmNlICYmIG51bGwgIT09IF9pbnN0YW5jZSAmJiAoc3RhdGUgPSByZWFkQ29udGV4dChfaW5zdGFuY2UpKTsKICAgICAgICAgIF9pbnN0YW5jZSA9IG5ldyBDb21wb25lbnQobmV4dFByb3BzLCBzdGF0ZSk7CiAgICAgICAgICBpZiAod29ya0luUHJvZ3Jlc3MyLm1vZGUgJiBTdHJpY3RMZWdhY3lNb2RlKSB7CiAgICAgICAgICAgIHNldElzU3RyaWN0TW9kZUZvckRldnRvb2xzKHRydWUpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIF9pbnN0YW5jZSA9IG5ldyBDb21wb25lbnQobmV4dFByb3BzLCBzdGF0ZSk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgc2V0SXNTdHJpY3RNb2RlRm9yRGV2dG9vbHMoZmFsc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0ZSA9IHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlID0gbnVsbCAhPT0gX2luc3RhbmNlLnN0YXRlICYmIHZvaWQgMCAhPT0gX2luc3RhbmNlLnN0YXRlID8gX2luc3RhbmNlLnN0YXRlIDogbnVsbDsKICAgICAgICAgIF9pbnN0YW5jZS51cGRhdGVyID0gY2xhc3NDb21wb25lbnRVcGRhdGVyOwogICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLnN0YXRlTm9kZSA9IF9pbnN0YW5jZTsKICAgICAgICAgIF9pbnN0YW5jZS5fcmVhY3RJbnRlcm5hbHMgPSB3b3JrSW5Qcm9ncmVzczI7CiAgICAgICAgICBfaW5zdGFuY2UuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZSA9IGZha2VJbnRlcm5hbEluc3RhbmNlOwogICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIENvbXBvbmVudC5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMgJiYgbnVsbCA9PT0gc3RhdGUgJiYgKHN0YXRlID0gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKENvbXBvbmVudCkgfHwgIkNvbXBvbmVudCIsIGRpZFdhcm5BYm91dFVuaW5pdGlhbGl6ZWRTdGF0ZS5oYXMoc3RhdGUpIHx8IChkaWRXYXJuQWJvdXRVbmluaXRpYWxpemVkU3RhdGUuYWRkKHN0YXRlKSwgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgImAlc2AgdXNlcyBgZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzYCBidXQgaXRzIGluaXRpYWwgc3RhdGUgaXMgJXMuIFRoaXMgaXMgbm90IHJlY29tbWVuZGVkLiBJbnN0ZWFkLCBkZWZpbmUgdGhlIGluaXRpYWwgc3RhdGUgYnkgYXNzaWduaW5nIGFuIG9iamVjdCB0byBgdGhpcy5zdGF0ZWAgaW4gdGhlIGNvbnN0cnVjdG9yIG9mIGAlc2AuIFRoaXMgZW5zdXJlcyB0aGF0IGBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHNgIGFyZ3VtZW50cyBoYXZlIGEgY29uc2lzdGVudCBzaGFwZS4iLAogICAgICAgICAgICBzdGF0ZSwKICAgICAgICAgICAgbnVsbCA9PT0gX2luc3RhbmNlLnN0YXRlID8gIm51bGwiIDogInVuZGVmaW5lZCIsCiAgICAgICAgICAgIHN0YXRlCiAgICAgICAgICApKSk7CiAgICAgICAgICBpZiAoImZ1bmN0aW9uIiA9PT0gdHlwZW9mIENvbXBvbmVudC5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMgfHwgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIF9pbnN0YW5jZS5nZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZSkgewogICAgICAgICAgICB2YXIgZm91bmRXaWxsVXBkYXRlTmFtZSA9IGxhbmUgPSBzdGF0ZSA9IG51bGw7CiAgICAgICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBfaW5zdGFuY2UuY29tcG9uZW50V2lsbE1vdW50ICYmIHRydWUgIT09IF9pbnN0YW5jZS5jb21wb25lbnRXaWxsTW91bnQuX19zdXBwcmVzc0RlcHJlY2F0aW9uV2FybmluZyA/IHN0YXRlID0gImNvbXBvbmVudFdpbGxNb3VudCIgOiAiZnVuY3Rpb24iID09PSB0eXBlb2YgX2luc3RhbmNlLlVOU0FGRV9jb21wb25lbnRXaWxsTW91bnQgJiYgKHN0YXRlID0gIlVOU0FGRV9jb21wb25lbnRXaWxsTW91bnQiKTsKICAgICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIF9pbnN0YW5jZS5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzICYmIHRydWUgIT09IF9pbnN0YW5jZS5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzLl9fc3VwcHJlc3NEZXByZWNhdGlvbldhcm5pbmcgPyBsYW5lID0gImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiIDogImZ1bmN0aW9uIiA9PT0gdHlwZW9mIF9pbnN0YW5jZS5VTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyAmJiAobGFuZSA9ICJVTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyIpOwogICAgICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgX2luc3RhbmNlLmNvbXBvbmVudFdpbGxVcGRhdGUgJiYgdHJ1ZSAhPT0gX2luc3RhbmNlLmNvbXBvbmVudFdpbGxVcGRhdGUuX19zdXBwcmVzc0RlcHJlY2F0aW9uV2FybmluZyA/IGZvdW5kV2lsbFVwZGF0ZU5hbWUgPSAiY29tcG9uZW50V2lsbFVwZGF0ZSIgOiAiZnVuY3Rpb24iID09PSB0eXBlb2YgX2luc3RhbmNlLlVOU0FGRV9jb21wb25lbnRXaWxsVXBkYXRlICYmIChmb3VuZFdpbGxVcGRhdGVOYW1lID0gIlVOU0FGRV9jb21wb25lbnRXaWxsVXBkYXRlIik7CiAgICAgICAgICAgIGlmIChudWxsICE9PSBzdGF0ZSB8fCBudWxsICE9PSBsYW5lIHx8IG51bGwgIT09IGZvdW5kV2lsbFVwZGF0ZU5hbWUpIHsKICAgICAgICAgICAgICBfaW5zdGFuY2UgPSBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUoQ29tcG9uZW50KSB8fCAiQ29tcG9uZW50IjsKICAgICAgICAgICAgICB2YXIgbmV3QXBpTmFtZSA9ICJmdW5jdGlvbiIgPT09IHR5cGVvZiBDb21wb25lbnQuZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzID8gImdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcygpIiA6ICJnZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZSgpIjsKICAgICAgICAgICAgICBkaWRXYXJuQWJvdXRMZWdhY3lMaWZlY3ljbGVzQW5kRGVyaXZlZFN0YXRlLmhhcyhfaW5zdGFuY2UpIHx8IChkaWRXYXJuQWJvdXRMZWdhY3lMaWZlY3ljbGVzQW5kRGVyaXZlZFN0YXRlLmFkZChfaW5zdGFuY2UpLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICAgIlVuc2FmZSBsZWdhY3kgbGlmZWN5Y2xlcyB3aWxsIG5vdCBiZSBjYWxsZWQgZm9yIGNvbXBvbmVudHMgdXNpbmcgbmV3IGNvbXBvbmVudCBBUElzLlxuXG4lcyB1c2VzICVzIGJ1dCBhbHNvIGNvbnRhaW5zIHRoZSBmb2xsb3dpbmcgbGVnYWN5IGxpZmVjeWNsZXM6JXMlcyVzXG5cblRoZSBhYm92ZSBsaWZlY3ljbGVzIHNob3VsZCBiZSByZW1vdmVkLiBMZWFybiBtb3JlIGFib3V0IHRoaXMgd2FybmluZyBoZXJlOlxuaHR0cHM6Ly9yZWFjdC5kZXYvbGluay91bnNhZmUtY29tcG9uZW50LWxpZmVjeWNsZXMiLAogICAgICAgICAgICAgICAgX2luc3RhbmNlLAogICAgICAgICAgICAgICAgbmV3QXBpTmFtZSwKICAgICAgICAgICAgICAgIG51bGwgIT09IHN0YXRlID8gIlxuICAiICsgc3RhdGUgOiAiIiwKICAgICAgICAgICAgICAgIG51bGwgIT09IGxhbmUgPyAiXG4gICIgKyBsYW5lIDogIiIsCiAgICAgICAgICAgICAgICBudWxsICE9PSBmb3VuZFdpbGxVcGRhdGVOYW1lID8gIlxuICAiICsgZm91bmRXaWxsVXBkYXRlTmFtZSA6ICIiCiAgICAgICAgICAgICAgKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIF9pbnN0YW5jZSA9IHdvcmtJblByb2dyZXNzMi5zdGF0ZU5vZGU7CiAgICAgICAgICBzdGF0ZSA9IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZShDb21wb25lbnQpIHx8ICJDb21wb25lbnQiOwogICAgICAgICAgX2luc3RhbmNlLnJlbmRlciB8fCAoQ29tcG9uZW50LnByb3RvdHlwZSAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgQ29tcG9uZW50LnByb3RvdHlwZS5yZW5kZXIgPyBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiTm8gYHJlbmRlcmAgbWV0aG9kIGZvdW5kIG9uIHRoZSAlcyBpbnN0YW5jZTogZGlkIHlvdSBhY2NpZGVudGFsbHkgcmV0dXJuIGFuIG9iamVjdCBmcm9tIHRoZSBjb25zdHJ1Y3Rvcj8iLAogICAgICAgICAgICBzdGF0ZQogICAgICAgICAgKSA6IGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICJObyBgcmVuZGVyYCBtZXRob2QgZm91bmQgb24gdGhlICVzIGluc3RhbmNlOiB5b3UgbWF5IGhhdmUgZm9yZ290dGVuIHRvIGRlZmluZSBgcmVuZGVyYC4iLAogICAgICAgICAgICBzdGF0ZQogICAgICAgICAgKSk7CiAgICAgICAgICAhX2luc3RhbmNlLmdldEluaXRpYWxTdGF0ZSB8fCBfaW5zdGFuY2UuZ2V0SW5pdGlhbFN0YXRlLmlzUmVhY3RDbGFzc0FwcHJvdmVkIHx8IF9pbnN0YW5jZS5zdGF0ZSB8fCBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiZ2V0SW5pdGlhbFN0YXRlIHdhcyBkZWZpbmVkIG9uICVzLCBhIHBsYWluIEphdmFTY3JpcHQgY2xhc3MuIFRoaXMgaXMgb25seSBzdXBwb3J0ZWQgZm9yIGNsYXNzZXMgY3JlYXRlZCB1c2luZyBSZWFjdC5jcmVhdGVDbGFzcy4gRGlkIHlvdSBtZWFuIHRvIGRlZmluZSBhIHN0YXRlIHByb3BlcnR5IGluc3RlYWQ/IiwKICAgICAgICAgICAgc3RhdGUKICAgICAgICAgICk7CiAgICAgICAgICBfaW5zdGFuY2UuZ2V0RGVmYXVsdFByb3BzICYmICFfaW5zdGFuY2UuZ2V0RGVmYXVsdFByb3BzLmlzUmVhY3RDbGFzc0FwcHJvdmVkICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICJnZXREZWZhdWx0UHJvcHMgd2FzIGRlZmluZWQgb24gJXMsIGEgcGxhaW4gSmF2YVNjcmlwdCBjbGFzcy4gVGhpcyBpcyBvbmx5IHN1cHBvcnRlZCBmb3IgY2xhc3NlcyBjcmVhdGVkIHVzaW5nIFJlYWN0LmNyZWF0ZUNsYXNzLiBVc2UgYSBzdGF0aWMgcHJvcGVydHkgdG8gZGVmaW5lIGRlZmF1bHRQcm9wcyBpbnN0ZWFkLiIsCiAgICAgICAgICAgIHN0YXRlCiAgICAgICAgICApOwogICAgICAgICAgX2luc3RhbmNlLmNvbnRleHRUeXBlICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICJjb250ZXh0VHlwZSB3YXMgZGVmaW5lZCBhcyBhbiBpbnN0YW5jZSBwcm9wZXJ0eSBvbiAlcy4gVXNlIGEgc3RhdGljIHByb3BlcnR5IHRvIGRlZmluZSBjb250ZXh0VHlwZSBpbnN0ZWFkLiIsCiAgICAgICAgICAgIHN0YXRlCiAgICAgICAgICApOwogICAgICAgICAgQ29tcG9uZW50LmNoaWxkQ29udGV4dFR5cGVzICYmICFkaWRXYXJuQWJvdXRDaGlsZENvbnRleHRUeXBlcy5oYXMoQ29tcG9uZW50KSAmJiAoZGlkV2FybkFib3V0Q2hpbGRDb250ZXh0VHlwZXMuYWRkKENvbXBvbmVudCksIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICIlcyB1c2VzIHRoZSBsZWdhY3kgY2hpbGRDb250ZXh0VHlwZXMgQVBJIHdoaWNoIHdhcyByZW1vdmVkIGluIFJlYWN0IDE5LiBVc2UgUmVhY3QuY3JlYXRlQ29udGV4dCgpIGluc3RlYWQuIChodHRwczovL3JlYWN0LmRldi9saW5rL2xlZ2FjeS1jb250ZXh0KSIsCiAgICAgICAgICAgIHN0YXRlCiAgICAgICAgICApKTsKICAgICAgICAgIENvbXBvbmVudC5jb250ZXh0VHlwZXMgJiYgIWRpZFdhcm5BYm91dENvbnRleHRUeXBlcyQxLmhhcyhDb21wb25lbnQpICYmIChkaWRXYXJuQWJvdXRDb250ZXh0VHlwZXMkMS5hZGQoQ29tcG9uZW50KSwgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIiVzIHVzZXMgdGhlIGxlZ2FjeSBjb250ZXh0VHlwZXMgQVBJIHdoaWNoIHdhcyByZW1vdmVkIGluIFJlYWN0IDE5LiBVc2UgUmVhY3QuY3JlYXRlQ29udGV4dCgpIHdpdGggc3RhdGljIGNvbnRleHRUeXBlIGluc3RlYWQuIChodHRwczovL3JlYWN0LmRldi9saW5rL2xlZ2FjeS1jb250ZXh0KSIsCiAgICAgICAgICAgIHN0YXRlCiAgICAgICAgICApKTsKICAgICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBfaW5zdGFuY2UuY29tcG9uZW50U2hvdWxkVXBkYXRlICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICIlcyBoYXMgYSBtZXRob2QgY2FsbGVkIGNvbXBvbmVudFNob3VsZFVwZGF0ZSgpLiBEaWQgeW91IG1lYW4gc2hvdWxkQ29tcG9uZW50VXBkYXRlKCk/IFRoZSBuYW1lIGlzIHBocmFzZWQgYXMgYSBxdWVzdGlvbiBiZWNhdXNlIHRoZSBmdW5jdGlvbiBpcyBleHBlY3RlZCB0byByZXR1cm4gYSB2YWx1ZS4iLAogICAgICAgICAgICBzdGF0ZQogICAgICAgICAgKTsKICAgICAgICAgIENvbXBvbmVudC5wcm90b3R5cGUgJiYgQ29tcG9uZW50LnByb3RvdHlwZS5pc1B1cmVSZWFjdENvbXBvbmVudCAmJiAidW5kZWZpbmVkIiAhPT0gdHlwZW9mIF9pbnN0YW5jZS5zaG91bGRDb21wb25lbnRVcGRhdGUgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIiVzIGhhcyBhIG1ldGhvZCBjYWxsZWQgc2hvdWxkQ29tcG9uZW50VXBkYXRlKCkuIHNob3VsZENvbXBvbmVudFVwZGF0ZSBzaG91bGQgbm90IGJlIHVzZWQgd2hlbiBleHRlbmRpbmcgUmVhY3QuUHVyZUNvbXBvbmVudC4gUGxlYXNlIGV4dGVuZCBSZWFjdC5Db21wb25lbnQgaWYgc2hvdWxkQ29tcG9uZW50VXBkYXRlIGlzIHVzZWQuIiwKICAgICAgICAgICAgZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKENvbXBvbmVudCkgfHwgIkEgcHVyZSBjb21wb25lbnQiCiAgICAgICAgICApOwogICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIF9pbnN0YW5jZS5jb21wb25lbnREaWRVbm1vdW50ICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICIlcyBoYXMgYSBtZXRob2QgY2FsbGVkIGNvbXBvbmVudERpZFVubW91bnQoKS4gQnV0IHRoZXJlIGlzIG5vIHN1Y2ggbGlmZWN5Y2xlIG1ldGhvZC4gRGlkIHlvdSBtZWFuIGNvbXBvbmVudFdpbGxVbm1vdW50KCk/IiwKICAgICAgICAgICAgc3RhdGUKICAgICAgICAgICk7CiAgICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgX2luc3RhbmNlLmNvbXBvbmVudERpZFJlY2VpdmVQcm9wcyAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiJXMgaGFzIGEgbWV0aG9kIGNhbGxlZCBjb21wb25lbnREaWRSZWNlaXZlUHJvcHMoKS4gQnV0IHRoZXJlIGlzIG5vIHN1Y2ggbGlmZWN5Y2xlIG1ldGhvZC4gSWYgeW91IG1lYW50IHRvIHVwZGF0ZSB0aGUgc3RhdGUgaW4gcmVzcG9uc2UgdG8gY2hhbmdpbmcgcHJvcHMsIHVzZSBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKCkuIElmIHlvdSBtZWFudCB0byBmZXRjaCBkYXRhIG9yIHJ1biBzaWRlLWVmZmVjdHMgb3IgbXV0YXRpb25zIGFmdGVyIFJlYWN0IGhhcyB1cGRhdGVkIHRoZSBVSSwgdXNlIGNvbXBvbmVudERpZFVwZGF0ZSgpLiIsCiAgICAgICAgICAgIHN0YXRlCiAgICAgICAgICApOwogICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIF9pbnN0YW5jZS5jb21wb25lbnRXaWxsUmVjaWV2ZVByb3BzICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICIlcyBoYXMgYSBtZXRob2QgY2FsbGVkIGNvbXBvbmVudFdpbGxSZWNpZXZlUHJvcHMoKS4gRGlkIHlvdSBtZWFuIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMoKT8iLAogICAgICAgICAgICBzdGF0ZQogICAgICAgICAgKTsKICAgICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBfaW5zdGFuY2UuVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNpZXZlUHJvcHMgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIiVzIGhhcyBhIG1ldGhvZCBjYWxsZWQgVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNpZXZlUHJvcHMoKS4gRGlkIHlvdSBtZWFuIFVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKCk/IiwKICAgICAgICAgICAgc3RhdGUKICAgICAgICAgICk7CiAgICAgICAgICBsYW5lID0gX2luc3RhbmNlLnByb3BzICE9PSBuZXh0UHJvcHM7CiAgICAgICAgICB2b2lkIDAgIT09IF9pbnN0YW5jZS5wcm9wcyAmJiBsYW5lICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICJXaGVuIGNhbGxpbmcgc3VwZXIoKSBpbiBgJXNgLCBtYWtlIHN1cmUgdG8gcGFzcyB1cCB0aGUgc2FtZSBwcm9wcyB0aGF0IHlvdXIgY29tcG9uZW50J3MgY29uc3RydWN0b3Igd2FzIHBhc3NlZC4iLAogICAgICAgICAgICBzdGF0ZQogICAgICAgICAgKTsKICAgICAgICAgIF9pbnN0YW5jZS5kZWZhdWx0UHJvcHMgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIlNldHRpbmcgZGVmYXVsdFByb3BzIGFzIGFuIGluc3RhbmNlIHByb3BlcnR5IG9uICVzIGlzIG5vdCBzdXBwb3J0ZWQgYW5kIHdpbGwgYmUgaWdub3JlZC4gSW5zdGVhZCwgZGVmaW5lIGRlZmF1bHRQcm9wcyBhcyBhIHN0YXRpYyBwcm9wZXJ0eSBvbiAlcy4iLAogICAgICAgICAgICBzdGF0ZSwKICAgICAgICAgICAgc3RhdGUKICAgICAgICAgICk7CiAgICAgICAgICAiZnVuY3Rpb24iICE9PSB0eXBlb2YgX2luc3RhbmNlLmdldFNuYXBzaG90QmVmb3JlVXBkYXRlIHx8ICJmdW5jdGlvbiIgPT09IHR5cGVvZiBfaW5zdGFuY2UuY29tcG9uZW50RGlkVXBkYXRlIHx8IGRpZFdhcm5BYm91dEdldFNuYXBzaG90QmVmb3JlVXBkYXRlV2l0aG91dERpZFVwZGF0ZS5oYXMoQ29tcG9uZW50KSB8fCAoZGlkV2FybkFib3V0R2V0U25hcHNob3RCZWZvcmVVcGRhdGVXaXRob3V0RGlkVXBkYXRlLmFkZChDb21wb25lbnQpLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiJXM6IGdldFNuYXBzaG90QmVmb3JlVXBkYXRlKCkgc2hvdWxkIGJlIHVzZWQgd2l0aCBjb21wb25lbnREaWRVcGRhdGUoKS4gVGhpcyBjb21wb25lbnQgZGVmaW5lcyBnZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZSgpIG9ubHkuIiwKICAgICAgICAgICAgZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKENvbXBvbmVudCkKICAgICAgICAgICkpOwogICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIF9pbnN0YW5jZS5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIiVzOiBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMoKSBpcyBkZWZpbmVkIGFzIGFuIGluc3RhbmNlIG1ldGhvZCBhbmQgd2lsbCBiZSBpZ25vcmVkLiBJbnN0ZWFkLCBkZWNsYXJlIGl0IGFzIGEgc3RhdGljIG1ldGhvZC4iLAogICAgICAgICAgICBzdGF0ZQogICAgICAgICAgKTsKICAgICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBfaW5zdGFuY2UuZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICIlczogZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yKCkgaXMgZGVmaW5lZCBhcyBhbiBpbnN0YW5jZSBtZXRob2QgYW5kIHdpbGwgYmUgaWdub3JlZC4gSW5zdGVhZCwgZGVjbGFyZSBpdCBhcyBhIHN0YXRpYyBtZXRob2QuIiwKICAgICAgICAgICAgc3RhdGUKICAgICAgICAgICk7CiAgICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgQ29tcG9uZW50LmdldFNuYXBzaG90QmVmb3JlVXBkYXRlICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICIlczogZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUoKSBpcyBkZWZpbmVkIGFzIGEgc3RhdGljIG1ldGhvZCBhbmQgd2lsbCBiZSBpZ25vcmVkLiBJbnN0ZWFkLCBkZWNsYXJlIGl0IGFzIGFuIGluc3RhbmNlIG1ldGhvZC4iLAogICAgICAgICAgICBzdGF0ZQogICAgICAgICAgKTsKICAgICAgICAgIChsYW5lID0gX2luc3RhbmNlLnN0YXRlKSAmJiAoIm9iamVjdCIgIT09IHR5cGVvZiBsYW5lIHx8IGlzQXJyYXlJbXBsKGxhbmUpKSAmJiBjb25zb2xlLmVycm9yKCIlcy5zdGF0ZTogbXVzdCBiZSBzZXQgdG8gYW4gb2JqZWN0IG9yIG51bGwiLCBzdGF0ZSk7CiAgICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgX2luc3RhbmNlLmdldENoaWxkQ29udGV4dCAmJiAib2JqZWN0IiAhPT0gdHlwZW9mIENvbXBvbmVudC5jaGlsZENvbnRleHRUeXBlcyAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiJXMuZ2V0Q2hpbGRDb250ZXh0KCk6IGNoaWxkQ29udGV4dFR5cGVzIG11c3QgYmUgZGVmaW5lZCBpbiBvcmRlciB0byB1c2UgZ2V0Q2hpbGRDb250ZXh0KCkuIiwKICAgICAgICAgICAgc3RhdGUKICAgICAgICAgICk7CiAgICAgICAgICBfaW5zdGFuY2UgPSB3b3JrSW5Qcm9ncmVzczIuc3RhdGVOb2RlOwogICAgICAgICAgX2luc3RhbmNlLnByb3BzID0gbmV4dFByb3BzOwogICAgICAgICAgX2luc3RhbmNlLnN0YXRlID0gd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkU3RhdGU7CiAgICAgICAgICBfaW5zdGFuY2UucmVmcyA9IHt9OwogICAgICAgICAgaW5pdGlhbGl6ZVVwZGF0ZVF1ZXVlKHdvcmtJblByb2dyZXNzMik7CiAgICAgICAgICBzdGF0ZSA9IENvbXBvbmVudC5jb250ZXh0VHlwZTsKICAgICAgICAgIF9pbnN0YW5jZS5jb250ZXh0ID0gIm9iamVjdCIgPT09IHR5cGVvZiBzdGF0ZSAmJiBudWxsICE9PSBzdGF0ZSA/IHJlYWRDb250ZXh0KHN0YXRlKSA6IGVtcHR5Q29udGV4dE9iamVjdDsKICAgICAgICAgIF9pbnN0YW5jZS5zdGF0ZSA9PT0gbmV4dFByb3BzICYmIChzdGF0ZSA9IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZShDb21wb25lbnQpIHx8ICJDb21wb25lbnQiLCBkaWRXYXJuQWJvdXREaXJlY3RseUFzc2lnbmluZ1Byb3BzVG9TdGF0ZS5oYXMoc3RhdGUpIHx8IChkaWRXYXJuQWJvdXREaXJlY3RseUFzc2lnbmluZ1Byb3BzVG9TdGF0ZS5hZGQoc3RhdGUpLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiJXM6IEl0IGlzIG5vdCByZWNvbW1lbmRlZCB0byBhc3NpZ24gcHJvcHMgZGlyZWN0bHkgdG8gc3RhdGUgYmVjYXVzZSB1cGRhdGVzIHRvIHByb3BzIHdvbid0IGJlIHJlZmxlY3RlZCBpbiBzdGF0ZS4gSW4gbW9zdCBjYXNlcywgaXQgaXMgYmV0dGVyIHRvIHVzZSBwcm9wcyBkaXJlY3RseS4iLAogICAgICAgICAgICBzdGF0ZQogICAgICAgICAgKSkpOwogICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLm1vZGUgJiBTdHJpY3RMZWdhY3lNb2RlICYmIFJlYWN0U3RyaWN0TW9kZVdhcm5pbmdzLnJlY29yZExlZ2FjeUNvbnRleHRXYXJuaW5nKAogICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICAgIF9pbnN0YW5jZQogICAgICAgICAgKTsKICAgICAgICAgIFJlYWN0U3RyaWN0TW9kZVdhcm5pbmdzLnJlY29yZFVuc2FmZUxpZmVjeWNsZVdhcm5pbmdzKAogICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICAgIF9pbnN0YW5jZQogICAgICAgICAgKTsKICAgICAgICAgIF9pbnN0YW5jZS5zdGF0ZSA9IHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlOwogICAgICAgICAgc3RhdGUgPSBDb21wb25lbnQuZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzOwogICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHN0YXRlICYmIChhcHBseURlcml2ZWRTdGF0ZUZyb21Qcm9wcygKICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICBDb21wb25lbnQsCiAgICAgICAgICAgIHN0YXRlLAogICAgICAgICAgICBuZXh0UHJvcHMKICAgICAgICAgICksIF9pbnN0YW5jZS5zdGF0ZSA9IHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlKTsKICAgICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBDb21wb25lbnQuZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzIHx8ICJmdW5jdGlvbiIgPT09IHR5cGVvZiBfaW5zdGFuY2UuZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUgfHwgImZ1bmN0aW9uIiAhPT0gdHlwZW9mIF9pbnN0YW5jZS5VTlNBRkVfY29tcG9uZW50V2lsbE1vdW50ICYmICJmdW5jdGlvbiIgIT09IHR5cGVvZiBfaW5zdGFuY2UuY29tcG9uZW50V2lsbE1vdW50IHx8IChzdGF0ZSA9IF9pbnN0YW5jZS5zdGF0ZSwgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIF9pbnN0YW5jZS5jb21wb25lbnRXaWxsTW91bnQgJiYgX2luc3RhbmNlLmNvbXBvbmVudFdpbGxNb3VudCgpLCAiZnVuY3Rpb24iID09PSB0eXBlb2YgX2luc3RhbmNlLlVOU0FGRV9jb21wb25lbnRXaWxsTW91bnQgJiYgX2luc3RhbmNlLlVOU0FGRV9jb21wb25lbnRXaWxsTW91bnQoKSwgc3RhdGUgIT09IF9pbnN0YW5jZS5zdGF0ZSAmJiAoY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIiVzLmNvbXBvbmVudFdpbGxNb3VudCgpOiBBc3NpZ25pbmcgZGlyZWN0bHkgdG8gdGhpcy5zdGF0ZSBpcyBkZXByZWNhdGVkIChleGNlcHQgaW5zaWRlIGEgY29tcG9uZW50J3MgY29uc3RydWN0b3IpLiBVc2Ugc2V0U3RhdGUgaW5zdGVhZC4iLAogICAgICAgICAgICBnZXRDb21wb25lbnROYW1lRnJvbUZpYmVyKHdvcmtJblByb2dyZXNzMikgfHwgIkNvbXBvbmVudCIKICAgICAgICAgICksIGNsYXNzQ29tcG9uZW50VXBkYXRlci5lbnF1ZXVlUmVwbGFjZVN0YXRlKAogICAgICAgICAgICBfaW5zdGFuY2UsCiAgICAgICAgICAgIF9pbnN0YW5jZS5zdGF0ZSwKICAgICAgICAgICAgbnVsbAogICAgICAgICAgKSksIHByb2Nlc3NVcGRhdGVRdWV1ZSh3b3JrSW5Qcm9ncmVzczIsIG5leHRQcm9wcywgX2luc3RhbmNlLCByZW5kZXJMYW5lczIpLCBzdXNwZW5kSWZVcGRhdGVSZWFkRnJvbUVudGFuZ2xlZEFzeW5jQWN0aW9uKCksIF9pbnN0YW5jZS5zdGF0ZSA9IHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlKTsKICAgICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBfaW5zdGFuY2UuY29tcG9uZW50RGlkTW91bnQgJiYgKHdvcmtJblByb2dyZXNzMi5mbGFncyB8PSA0MTk0MzA4KTsKICAgICAgICAgICh3b3JrSW5Qcm9ncmVzczIubW9kZSAmIFN0cmljdEVmZmVjdHNNb2RlKSAhPT0gTm9Nb2RlICYmICh3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgfD0gMTM0MjE3NzI4KTsKICAgICAgICAgIF9pbnN0YW5jZSA9IHRydWU7CiAgICAgICAgfSBlbHNlIGlmIChudWxsID09PSBjdXJyZW50MikgewogICAgICAgICAgX2luc3RhbmNlID0gd29ya0luUHJvZ3Jlc3MyLnN0YXRlTm9kZTsKICAgICAgICAgIHZhciB1bnJlc29sdmVkT2xkUHJvcHMgPSB3b3JrSW5Qcm9ncmVzczIubWVtb2l6ZWRQcm9wczsKICAgICAgICAgIGxhbmUgPSByZXNvbHZlQ2xhc3NDb21wb25lbnRQcm9wcyhDb21wb25lbnQsIHVucmVzb2x2ZWRPbGRQcm9wcyk7CiAgICAgICAgICBfaW5zdGFuY2UucHJvcHMgPSBsYW5lOwogICAgICAgICAgdmFyIG9sZENvbnRleHQgPSBfaW5zdGFuY2UuY29udGV4dDsKICAgICAgICAgIGZvdW5kV2lsbFVwZGF0ZU5hbWUgPSBDb21wb25lbnQuY29udGV4dFR5cGU7CiAgICAgICAgICBzdGF0ZSA9IGVtcHR5Q29udGV4dE9iamVjdDsKICAgICAgICAgICJvYmplY3QiID09PSB0eXBlb2YgZm91bmRXaWxsVXBkYXRlTmFtZSAmJiBudWxsICE9PSBmb3VuZFdpbGxVcGRhdGVOYW1lICYmIChzdGF0ZSA9IHJlYWRDb250ZXh0KGZvdW5kV2lsbFVwZGF0ZU5hbWUpKTsKICAgICAgICAgIG5ld0FwaU5hbWUgPSBDb21wb25lbnQuZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzOwogICAgICAgICAgZm91bmRXaWxsVXBkYXRlTmFtZSA9ICJmdW5jdGlvbiIgPT09IHR5cGVvZiBuZXdBcGlOYW1lIHx8ICJmdW5jdGlvbiIgPT09IHR5cGVvZiBfaW5zdGFuY2UuZ2V0U25hcHNob3RCZWZvcmVVcGRhdGU7CiAgICAgICAgICB1bnJlc29sdmVkT2xkUHJvcHMgPSB3b3JrSW5Qcm9ncmVzczIucGVuZGluZ1Byb3BzICE9PSB1bnJlc29sdmVkT2xkUHJvcHM7CiAgICAgICAgICBmb3VuZFdpbGxVcGRhdGVOYW1lIHx8ICJmdW5jdGlvbiIgIT09IHR5cGVvZiBfaW5zdGFuY2UuVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgJiYgImZ1bmN0aW9uIiAhPT0gdHlwZW9mIF9pbnN0YW5jZS5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzIHx8ICh1bnJlc29sdmVkT2xkUHJvcHMgfHwgb2xkQ29udGV4dCAhPT0gc3RhdGUpICYmIGNhbGxDb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKAogICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICAgIF9pbnN0YW5jZSwKICAgICAgICAgICAgbmV4dFByb3BzLAogICAgICAgICAgICBzdGF0ZQogICAgICAgICAgKTsKICAgICAgICAgIGhhc0ZvcmNlVXBkYXRlID0gZmFsc2U7CiAgICAgICAgICB2YXIgb2xkU3RhdGUgPSB3b3JrSW5Qcm9ncmVzczIubWVtb2l6ZWRTdGF0ZTsKICAgICAgICAgIF9pbnN0YW5jZS5zdGF0ZSA9IG9sZFN0YXRlOwogICAgICAgICAgcHJvY2Vzc1VwZGF0ZVF1ZXVlKHdvcmtJblByb2dyZXNzMiwgbmV4dFByb3BzLCBfaW5zdGFuY2UsIHJlbmRlckxhbmVzMik7CiAgICAgICAgICBzdXNwZW5kSWZVcGRhdGVSZWFkRnJvbUVudGFuZ2xlZEFzeW5jQWN0aW9uKCk7CiAgICAgICAgICBvbGRDb250ZXh0ID0gd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkU3RhdGU7CiAgICAgICAgICB1bnJlc29sdmVkT2xkUHJvcHMgfHwgb2xkU3RhdGUgIT09IG9sZENvbnRleHQgfHwgaGFzRm9yY2VVcGRhdGUgPyAoImZ1bmN0aW9uIiA9PT0gdHlwZW9mIG5ld0FwaU5hbWUgJiYgKGFwcGx5RGVyaXZlZFN0YXRlRnJvbVByb3BzKAogICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICAgIENvbXBvbmVudCwKICAgICAgICAgICAgbmV3QXBpTmFtZSwKICAgICAgICAgICAgbmV4dFByb3BzCiAgICAgICAgICApLCBvbGRDb250ZXh0ID0gd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkU3RhdGUpLCAobGFuZSA9IGhhc0ZvcmNlVXBkYXRlIHx8IGNoZWNrU2hvdWxkQ29tcG9uZW50VXBkYXRlKAogICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICAgIENvbXBvbmVudCwKICAgICAgICAgICAgbGFuZSwKICAgICAgICAgICAgbmV4dFByb3BzLAogICAgICAgICAgICBvbGRTdGF0ZSwKICAgICAgICAgICAgb2xkQ29udGV4dCwKICAgICAgICAgICAgc3RhdGUKICAgICAgICAgICkpID8gKGZvdW5kV2lsbFVwZGF0ZU5hbWUgfHwgImZ1bmN0aW9uIiAhPT0gdHlwZW9mIF9pbnN0YW5jZS5VTlNBRkVfY29tcG9uZW50V2lsbE1vdW50ICYmICJmdW5jdGlvbiIgIT09IHR5cGVvZiBfaW5zdGFuY2UuY29tcG9uZW50V2lsbE1vdW50IHx8ICgiZnVuY3Rpb24iID09PSB0eXBlb2YgX2luc3RhbmNlLmNvbXBvbmVudFdpbGxNb3VudCAmJiBfaW5zdGFuY2UuY29tcG9uZW50V2lsbE1vdW50KCksICJmdW5jdGlvbiIgPT09IHR5cGVvZiBfaW5zdGFuY2UuVU5TQUZFX2NvbXBvbmVudFdpbGxNb3VudCAmJiBfaW5zdGFuY2UuVU5TQUZFX2NvbXBvbmVudFdpbGxNb3VudCgpKSwgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIF9pbnN0YW5jZS5jb21wb25lbnREaWRNb3VudCAmJiAod29ya0luUHJvZ3Jlc3MyLmZsYWdzIHw9IDQxOTQzMDgpLCAod29ya0luUHJvZ3Jlc3MyLm1vZGUgJiBTdHJpY3RFZmZlY3RzTW9kZSkgIT09IE5vTW9kZSAmJiAod29ya0luUHJvZ3Jlc3MyLmZsYWdzIHw9IDEzNDIxNzcyOCkpIDogKCJmdW5jdGlvbiIgPT09IHR5cGVvZiBfaW5zdGFuY2UuY29tcG9uZW50RGlkTW91bnQgJiYgKHdvcmtJblByb2dyZXNzMi5mbGFncyB8PSA0MTk0MzA4KSwgKHdvcmtJblByb2dyZXNzMi5tb2RlICYgU3RyaWN0RWZmZWN0c01vZGUpICE9PSBOb01vZGUgJiYgKHdvcmtJblByb2dyZXNzMi5mbGFncyB8PSAxMzQyMTc3MjgpLCB3b3JrSW5Qcm9ncmVzczIubWVtb2l6ZWRQcm9wcyA9IG5leHRQcm9wcywgd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkU3RhdGUgPSBvbGRDb250ZXh0KSwgX2luc3RhbmNlLnByb3BzID0gbmV4dFByb3BzLCBfaW5zdGFuY2Uuc3RhdGUgPSBvbGRDb250ZXh0LCBfaW5zdGFuY2UuY29udGV4dCA9IHN0YXRlLCBfaW5zdGFuY2UgPSBsYW5lKSA6ICgiZnVuY3Rpb24iID09PSB0eXBlb2YgX2luc3RhbmNlLmNvbXBvbmVudERpZE1vdW50ICYmICh3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgfD0gNDE5NDMwOCksICh3b3JrSW5Qcm9ncmVzczIubW9kZSAmIFN0cmljdEVmZmVjdHNNb2RlKSAhPT0gTm9Nb2RlICYmICh3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgfD0gMTM0MjE3NzI4KSwgX2luc3RhbmNlID0gZmFsc2UpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfaW5zdGFuY2UgPSB3b3JrSW5Qcm9ncmVzczIuc3RhdGVOb2RlOwogICAgICAgICAgY2xvbmVVcGRhdGVRdWV1ZShjdXJyZW50Miwgd29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICAgIHN0YXRlID0gd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkUHJvcHM7CiAgICAgICAgICBmb3VuZFdpbGxVcGRhdGVOYW1lID0gcmVzb2x2ZUNsYXNzQ29tcG9uZW50UHJvcHMoQ29tcG9uZW50LCBzdGF0ZSk7CiAgICAgICAgICBfaW5zdGFuY2UucHJvcHMgPSBmb3VuZFdpbGxVcGRhdGVOYW1lOwogICAgICAgICAgbmV3QXBpTmFtZSA9IHdvcmtJblByb2dyZXNzMi5wZW5kaW5nUHJvcHM7CiAgICAgICAgICBvbGRTdGF0ZSA9IF9pbnN0YW5jZS5jb250ZXh0OwogICAgICAgICAgb2xkQ29udGV4dCA9IENvbXBvbmVudC5jb250ZXh0VHlwZTsKICAgICAgICAgIGxhbmUgPSBlbXB0eUNvbnRleHRPYmplY3Q7CiAgICAgICAgICAib2JqZWN0IiA9PT0gdHlwZW9mIG9sZENvbnRleHQgJiYgbnVsbCAhPT0gb2xkQ29udGV4dCAmJiAobGFuZSA9IHJlYWRDb250ZXh0KG9sZENvbnRleHQpKTsKICAgICAgICAgIHVucmVzb2x2ZWRPbGRQcm9wcyA9IENvbXBvbmVudC5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHM7CiAgICAgICAgICAob2xkQ29udGV4dCA9ICJmdW5jdGlvbiIgPT09IHR5cGVvZiB1bnJlc29sdmVkT2xkUHJvcHMgfHwgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIF9pbnN0YW5jZS5nZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZSkgfHwgImZ1bmN0aW9uIiAhPT0gdHlwZW9mIF9pbnN0YW5jZS5VTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyAmJiAiZnVuY3Rpb24iICE9PSB0eXBlb2YgX2luc3RhbmNlLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgfHwgKHN0YXRlICE9PSBuZXdBcGlOYW1lIHx8IG9sZFN0YXRlICE9PSBsYW5lKSAmJiBjYWxsQ29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcygKICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICBfaW5zdGFuY2UsCiAgICAgICAgICAgIG5leHRQcm9wcywKICAgICAgICAgICAgbGFuZQogICAgICAgICAgKTsKICAgICAgICAgIGhhc0ZvcmNlVXBkYXRlID0gZmFsc2U7CiAgICAgICAgICBvbGRTdGF0ZSA9IHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlOwogICAgICAgICAgX2luc3RhbmNlLnN0YXRlID0gb2xkU3RhdGU7CiAgICAgICAgICBwcm9jZXNzVXBkYXRlUXVldWUod29ya0luUHJvZ3Jlc3MyLCBuZXh0UHJvcHMsIF9pbnN0YW5jZSwgcmVuZGVyTGFuZXMyKTsKICAgICAgICAgIHN1c3BlbmRJZlVwZGF0ZVJlYWRGcm9tRW50YW5nbGVkQXN5bmNBY3Rpb24oKTsKICAgICAgICAgIHZhciBuZXdTdGF0ZSA9IHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlOwogICAgICAgICAgc3RhdGUgIT09IG5ld0FwaU5hbWUgfHwgb2xkU3RhdGUgIT09IG5ld1N0YXRlIHx8IGhhc0ZvcmNlVXBkYXRlIHx8IG51bGwgIT09IGN1cnJlbnQyICYmIG51bGwgIT09IGN1cnJlbnQyLmRlcGVuZGVuY2llcyAmJiBjaGVja0lmQ29udGV4dENoYW5nZWQoY3VycmVudDIuZGVwZW5kZW5jaWVzKSA/ICgiZnVuY3Rpb24iID09PSB0eXBlb2YgdW5yZXNvbHZlZE9sZFByb3BzICYmIChhcHBseURlcml2ZWRTdGF0ZUZyb21Qcm9wcygKICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICBDb21wb25lbnQsCiAgICAgICAgICAgIHVucmVzb2x2ZWRPbGRQcm9wcywKICAgICAgICAgICAgbmV4dFByb3BzCiAgICAgICAgICApLCBuZXdTdGF0ZSA9IHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlKSwgKGZvdW5kV2lsbFVwZGF0ZU5hbWUgPSBoYXNGb3JjZVVwZGF0ZSB8fCBjaGVja1Nob3VsZENvbXBvbmVudFVwZGF0ZSgKICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICBDb21wb25lbnQsCiAgICAgICAgICAgIGZvdW5kV2lsbFVwZGF0ZU5hbWUsCiAgICAgICAgICAgIG5leHRQcm9wcywKICAgICAgICAgICAgb2xkU3RhdGUsCiAgICAgICAgICAgIG5ld1N0YXRlLAogICAgICAgICAgICBsYW5lCiAgICAgICAgICApIHx8IG51bGwgIT09IGN1cnJlbnQyICYmIG51bGwgIT09IGN1cnJlbnQyLmRlcGVuZGVuY2llcyAmJiBjaGVja0lmQ29udGV4dENoYW5nZWQoY3VycmVudDIuZGVwZW5kZW5jaWVzKSkgPyAob2xkQ29udGV4dCB8fCAiZnVuY3Rpb24iICE9PSB0eXBlb2YgX2luc3RhbmNlLlVOU0FGRV9jb21wb25lbnRXaWxsVXBkYXRlICYmICJmdW5jdGlvbiIgIT09IHR5cGVvZiBfaW5zdGFuY2UuY29tcG9uZW50V2lsbFVwZGF0ZSB8fCAoImZ1bmN0aW9uIiA9PT0gdHlwZW9mIF9pbnN0YW5jZS5jb21wb25lbnRXaWxsVXBkYXRlICYmIF9pbnN0YW5jZS5jb21wb25lbnRXaWxsVXBkYXRlKG5leHRQcm9wcywgbmV3U3RhdGUsIGxhbmUpLCAiZnVuY3Rpb24iID09PSB0eXBlb2YgX2luc3RhbmNlLlVOU0FGRV9jb21wb25lbnRXaWxsVXBkYXRlICYmIF9pbnN0YW5jZS5VTlNBRkVfY29tcG9uZW50V2lsbFVwZGF0ZSgKICAgICAgICAgICAgbmV4dFByb3BzLAogICAgICAgICAgICBuZXdTdGF0ZSwKICAgICAgICAgICAgbGFuZQogICAgICAgICAgKSksICJmdW5jdGlvbiIgPT09IHR5cGVvZiBfaW5zdGFuY2UuY29tcG9uZW50RGlkVXBkYXRlICYmICh3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgfD0gNCksICJmdW5jdGlvbiIgPT09IHR5cGVvZiBfaW5zdGFuY2UuZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUgJiYgKHdvcmtJblByb2dyZXNzMi5mbGFncyB8PSAxMDI0KSkgOiAoImZ1bmN0aW9uIiAhPT0gdHlwZW9mIF9pbnN0YW5jZS5jb21wb25lbnREaWRVcGRhdGUgfHwgc3RhdGUgPT09IGN1cnJlbnQyLm1lbW9pemVkUHJvcHMgJiYgb2xkU3RhdGUgPT09IGN1cnJlbnQyLm1lbW9pemVkU3RhdGUgfHwgKHdvcmtJblByb2dyZXNzMi5mbGFncyB8PSA0KSwgImZ1bmN0aW9uIiAhPT0gdHlwZW9mIF9pbnN0YW5jZS5nZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZSB8fCBzdGF0ZSA9PT0gY3VycmVudDIubWVtb2l6ZWRQcm9wcyAmJiBvbGRTdGF0ZSA9PT0gY3VycmVudDIubWVtb2l6ZWRTdGF0ZSB8fCAod29ya0luUHJvZ3Jlc3MyLmZsYWdzIHw9IDEwMjQpLCB3b3JrSW5Qcm9ncmVzczIubWVtb2l6ZWRQcm9wcyA9IG5leHRQcm9wcywgd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkU3RhdGUgPSBuZXdTdGF0ZSksIF9pbnN0YW5jZS5wcm9wcyA9IG5leHRQcm9wcywgX2luc3RhbmNlLnN0YXRlID0gbmV3U3RhdGUsIF9pbnN0YW5jZS5jb250ZXh0ID0gbGFuZSwgX2luc3RhbmNlID0gZm91bmRXaWxsVXBkYXRlTmFtZSkgOiAoImZ1bmN0aW9uIiAhPT0gdHlwZW9mIF9pbnN0YW5jZS5jb21wb25lbnREaWRVcGRhdGUgfHwgc3RhdGUgPT09IGN1cnJlbnQyLm1lbW9pemVkUHJvcHMgJiYgb2xkU3RhdGUgPT09IGN1cnJlbnQyLm1lbW9pemVkU3RhdGUgfHwgKHdvcmtJblByb2dyZXNzMi5mbGFncyB8PSA0KSwgImZ1bmN0aW9uIiAhPT0gdHlwZW9mIF9pbnN0YW5jZS5nZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZSB8fCBzdGF0ZSA9PT0gY3VycmVudDIubWVtb2l6ZWRQcm9wcyAmJiBvbGRTdGF0ZSA9PT0gY3VycmVudDIubWVtb2l6ZWRTdGF0ZSB8fCAod29ya0luUHJvZ3Jlc3MyLmZsYWdzIHw9IDEwMjQpLCBfaW5zdGFuY2UgPSBmYWxzZSk7CiAgICAgICAgfQogICAgICAgIGxhbmUgPSBfaW5zdGFuY2U7CiAgICAgICAgbWFya1JlZihjdXJyZW50Miwgd29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICBzdGF0ZSA9IDAgIT09ICh3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgJiAxMjgpOwogICAgICAgIGlmIChsYW5lIHx8IHN0YXRlKSB7CiAgICAgICAgICBsYW5lID0gd29ya0luUHJvZ3Jlc3MyLnN0YXRlTm9kZTsKICAgICAgICAgIHNldEN1cnJlbnRGaWJlcih3b3JrSW5Qcm9ncmVzczIpOwogICAgICAgICAgaWYgKHN0YXRlICYmICJmdW5jdGlvbiIgIT09IHR5cGVvZiBDb21wb25lbnQuZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yKQogICAgICAgICAgICBDb21wb25lbnQgPSBudWxsLCBwcm9maWxlclN0YXJ0VGltZSA9IC0xOwogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIG1hcmtDb21wb25lbnRSZW5kZXJTdGFydGVkKHdvcmtJblByb2dyZXNzMik7CiAgICAgICAgICAgIENvbXBvbmVudCA9IGNhbGxSZW5kZXJJbkRFVihsYW5lKTsKICAgICAgICAgICAgaWYgKHdvcmtJblByb2dyZXNzMi5tb2RlICYgU3RyaWN0TGVnYWN5TW9kZSkgewogICAgICAgICAgICAgIHNldElzU3RyaWN0TW9kZUZvckRldnRvb2xzKHRydWUpOwogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjYWxsUmVuZGVySW5ERVYobGFuZSk7CiAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgIHNldElzU3RyaWN0TW9kZUZvckRldnRvb2xzKGZhbHNlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbWFya0NvbXBvbmVudFJlbmRlclN0b3BwZWQoKTsKICAgICAgICAgIH0KICAgICAgICAgIHdvcmtJblByb2dyZXNzMi5mbGFncyB8PSAxOwogICAgICAgICAgbnVsbCAhPT0gY3VycmVudDIgJiYgc3RhdGUgPyAod29ya0luUHJvZ3Jlc3MyLmNoaWxkID0gcmVjb25jaWxlQ2hpbGRGaWJlcnMoCiAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgY3VycmVudDIuY2hpbGQsCiAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgIHJlbmRlckxhbmVzMgogICAgICAgICAgKSwgd29ya0luUHJvZ3Jlc3MyLmNoaWxkID0gcmVjb25jaWxlQ2hpbGRGaWJlcnMoCiAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgQ29tcG9uZW50LAogICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICkpIDogcmVjb25jaWxlQ2hpbGRyZW4oY3VycmVudDIsIHdvcmtJblByb2dyZXNzMiwgQ29tcG9uZW50LCByZW5kZXJMYW5lczIpOwogICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkU3RhdGUgPSBsYW5lLnN0YXRlOwogICAgICAgICAgY3VycmVudDIgPSB3b3JrSW5Qcm9ncmVzczIuY2hpbGQ7CiAgICAgICAgfSBlbHNlCiAgICAgICAgICBjdXJyZW50MiA9IGJhaWxvdXRPbkFscmVhZHlGaW5pc2hlZFdvcmsoCiAgICAgICAgICAgIGN1cnJlbnQyLAogICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICAgIHJlbmRlckxhbmVzMgogICAgICAgICAgKTsKICAgICAgICByZW5kZXJMYW5lczIgPSB3b3JrSW5Qcm9ncmVzczIuc3RhdGVOb2RlOwogICAgICAgIF9pbnN0YW5jZSAmJiByZW5kZXJMYW5lczIucHJvcHMgIT09IG5leHRQcm9wcyAmJiAoZGlkV2FybkFib3V0UmVhc3NpZ25pbmdQcm9wcyB8fCBjb25zb2xlLmVycm9yKAogICAgICAgICAgIkl0IGxvb2tzIGxpa2UgJXMgaXMgcmVhc3NpZ25pbmcgaXRzIG93biBgdGhpcy5wcm9wc2Agd2hpbGUgcmVuZGVyaW5nLiBUaGlzIGlzIG5vdCBzdXBwb3J0ZWQgYW5kIGNhbiBsZWFkIHRvIGNvbmZ1c2luZyBidWdzLiIsCiAgICAgICAgICBnZXRDb21wb25lbnROYW1lRnJvbUZpYmVyKHdvcmtJblByb2dyZXNzMikgfHwgImEgY29tcG9uZW50IgogICAgICAgICksIGRpZFdhcm5BYm91dFJlYXNzaWduaW5nUHJvcHMgPSB0cnVlKTsKICAgICAgICByZXR1cm4gY3VycmVudDI7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbW91bnRIb3N0Um9vdFdpdGhvdXRIeWRyYXRpbmcoY3VycmVudDIsIHdvcmtJblByb2dyZXNzMiwgbmV4dENoaWxkcmVuLCByZW5kZXJMYW5lczIpIHsKICAgICAgICByZXNldEh5ZHJhdGlvblN0YXRlKCk7CiAgICAgICAgd29ya0luUHJvZ3Jlc3MyLmZsYWdzIHw9IDI1NjsKICAgICAgICByZWNvbmNpbGVDaGlsZHJlbihjdXJyZW50Miwgd29ya0luUHJvZ3Jlc3MyLCBuZXh0Q2hpbGRyZW4sIHJlbmRlckxhbmVzMik7CiAgICAgICAgcmV0dXJuIHdvcmtJblByb2dyZXNzMi5jaGlsZDsKICAgICAgfQogICAgICBmdW5jdGlvbiB2YWxpZGF0ZUZ1bmN0aW9uQ29tcG9uZW50SW5EZXYod29ya0luUHJvZ3Jlc3MyLCBDb21wb25lbnQpIHsKICAgICAgICBDb21wb25lbnQgJiYgQ29tcG9uZW50LmNoaWxkQ29udGV4dFR5cGVzICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiY2hpbGRDb250ZXh0VHlwZXMgY2Fubm90IGJlIGRlZmluZWQgb24gYSBmdW5jdGlvbiBjb21wb25lbnQuXG4gICVzLmNoaWxkQ29udGV4dFR5cGVzID0gLi4uIiwKICAgICAgICAgIENvbXBvbmVudC5kaXNwbGF5TmFtZSB8fCBDb21wb25lbnQubmFtZSB8fCAiQ29tcG9uZW50IgogICAgICAgICk7CiAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIENvbXBvbmVudC5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMgJiYgKHdvcmtJblByb2dyZXNzMiA9IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZShDb21wb25lbnQpIHx8ICJVbmtub3duIiwgZGlkV2FybkFib3V0R2V0RGVyaXZlZFN0YXRlT25GdW5jdGlvbkNvbXBvbmVudFt3b3JrSW5Qcm9ncmVzczJdIHx8IChjb25zb2xlLmVycm9yKAogICAgICAgICAgIiVzOiBGdW5jdGlvbiBjb21wb25lbnRzIGRvIG5vdCBzdXBwb3J0IGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcy4iLAogICAgICAgICAgd29ya0luUHJvZ3Jlc3MyCiAgICAgICAgKSwgZGlkV2FybkFib3V0R2V0RGVyaXZlZFN0YXRlT25GdW5jdGlvbkNvbXBvbmVudFt3b3JrSW5Qcm9ncmVzczJdID0gdHJ1ZSkpOwogICAgICAgICJvYmplY3QiID09PSB0eXBlb2YgQ29tcG9uZW50LmNvbnRleHRUeXBlICYmIG51bGwgIT09IENvbXBvbmVudC5jb250ZXh0VHlwZSAmJiAoQ29tcG9uZW50ID0gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKENvbXBvbmVudCkgfHwgIlVua25vd24iLCBkaWRXYXJuQWJvdXRDb250ZXh0VHlwZU9uRnVuY3Rpb25Db21wb25lbnRbQ29tcG9uZW50XSB8fCAoY29uc29sZS5lcnJvcigKICAgICAgICAgICIlczogRnVuY3Rpb24gY29tcG9uZW50cyBkbyBub3Qgc3VwcG9ydCBjb250ZXh0VHlwZS4iLAogICAgICAgICAgQ29tcG9uZW50CiAgICAgICAgKSwgZGlkV2FybkFib3V0Q29udGV4dFR5cGVPbkZ1bmN0aW9uQ29tcG9uZW50W0NvbXBvbmVudF0gPSB0cnVlKSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbW91bnRTdXNwZW5zZU9mZnNjcmVlblN0YXRlKHJlbmRlckxhbmVzMikgewogICAgICAgIHJldHVybiB7IGJhc2VMYW5lczogcmVuZGVyTGFuZXMyLCBjYWNoZVBvb2w6IGdldFN1c3BlbmRlZENhY2hlKCkgfTsKICAgICAgfQogICAgICBmdW5jdGlvbiBnZXRSZW1haW5pbmdXb3JrSW5QcmltYXJ5VHJlZShjdXJyZW50MiwgcHJpbWFyeVRyZWVEaWREZWZlciwgcmVuZGVyTGFuZXMyKSB7CiAgICAgICAgY3VycmVudDIgPSBudWxsICE9PSBjdXJyZW50MiA/IGN1cnJlbnQyLmNoaWxkTGFuZXMgJiB+cmVuZGVyTGFuZXMyIDogMDsKICAgICAgICBwcmltYXJ5VHJlZURpZERlZmVyICYmIChjdXJyZW50MiB8PSB3b3JrSW5Qcm9ncmVzc0RlZmVycmVkTGFuZSk7CiAgICAgICAgcmV0dXJuIGN1cnJlbnQyOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVN1c3BlbnNlQ29tcG9uZW50KGN1cnJlbnQyLCB3b3JrSW5Qcm9ncmVzczIsIHJlbmRlckxhbmVzMikgewogICAgICAgIHZhciBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfZGlnZXN0XzI0NTE7CiAgICAgICAgdmFyIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9zdGFja18yNDUyID0gd29ya0luUHJvZ3Jlc3MyLnBlbmRpbmdQcm9wczsKICAgICAgICBzaG91bGRTdXNwZW5kSW1wbCh3b3JrSW5Qcm9ncmVzczIpICYmICh3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgfD0gMTI4KTsKICAgICAgICB2YXIgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2NvbXBvbmVudFN0YWNrXzI0NTMgPSBmYWxzZTsKICAgICAgICB2YXIgZGlkU3VzcGVuZCA9IDAgIT09ICh3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgJiAxMjgpOwogICAgICAgIChKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfZGlnZXN0XzI0NTEgPSBkaWRTdXNwZW5kKSB8fCAoSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2RpZ2VzdF8yNDUxID0gbnVsbCAhPT0gY3VycmVudDIgJiYgbnVsbCA9PT0gY3VycmVudDIubWVtb2l6ZWRTdGF0ZSA/IGZhbHNlIDogMCAhPT0gKHN1c3BlbnNlU3RhY2tDdXJzb3IuY3VycmVudCAmIEZvcmNlU3VzcGVuc2VGYWxsYmFjaykpOwogICAgICAgIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9kaWdlc3RfMjQ1MSAmJiAoSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2NvbXBvbmVudFN0YWNrXzI0NTMgPSB0cnVlLCB3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgJj0gLTEyOSk7CiAgICAgICAgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2RpZ2VzdF8yNDUxID0gMCAhPT0gKHdvcmtJblByb2dyZXNzMi5mbGFncyAmIDMyKTsKICAgICAgICB3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgJj0gLTMzOwogICAgICAgIGlmIChudWxsID09PSBjdXJyZW50MikgewogICAgICAgICAgaWYgKGlzSHlkcmF0aW5nKSB7CiAgICAgICAgICAgIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9jb21wb25lbnRTdGFja18yNDUzID8gcHVzaFByaW1hcnlUcmVlU3VzcGVuc2VIYW5kbGVyKHdvcmtJblByb2dyZXNzMikgOiByZXVzZVN1c3BlbnNlSGFuZGxlck9uU3RhY2sod29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICAgICAgaWYgKGlzSHlkcmF0aW5nKSB7CiAgICAgICAgICAgICAgdmFyIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9tZXNzYWdlXzI0NTAgPSBuZXh0SHlkcmF0YWJsZUluc3RhbmNlOwogICAgICAgICAgICAgIHZhciBKU0NvbXBpbGVyX3RlbXA7CiAgICAgICAgICAgICAgaWYgKCEoSlNDb21waWxlcl90ZW1wID0gIUpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9tZXNzYWdlXzI0NTApKSB7CiAgICAgICAgICAgICAgICBjOiB7CiAgICAgICAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9tZXNzYWdlXzI0NTA7CiAgICAgICAgICAgICAgICAgIGZvciAoSlNDb21waWxlcl90ZW1wID0gcm9vdE9yU2luZ2xldG9uQ29udGV4dDsgOCAhPT0gaW5zdGFuY2Uubm9kZVR5cGU7ICkgewogICAgICAgICAgICAgICAgICAgIGlmICghSlNDb21waWxlcl90ZW1wKSB7CiAgICAgICAgICAgICAgICAgICAgICBKU0NvbXBpbGVyX3RlbXAgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWsgYzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBnZXROZXh0SHlkcmF0YWJsZShpbnN0YW5jZS5uZXh0U2libGluZyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGluc3RhbmNlKSB7CiAgICAgICAgICAgICAgICAgICAgICBKU0NvbXBpbGVyX3RlbXAgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWsgYzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgSlNDb21waWxlcl90ZW1wID0gaW5zdGFuY2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBudWxsICE9PSBKU0NvbXBpbGVyX3RlbXAgPyAod2FybklmTm90SHlkcmF0aW5nKCksIHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlID0gewogICAgICAgICAgICAgICAgICBkZWh5ZHJhdGVkOiBKU0NvbXBpbGVyX3RlbXAsCiAgICAgICAgICAgICAgICAgIHRyZWVDb250ZXh0OiBudWxsICE9PSB0cmVlQ29udGV4dFByb3ZpZGVyID8geyBpZDogdHJlZUNvbnRleHRJZCwgb3ZlcmZsb3c6IHRyZWVDb250ZXh0T3ZlcmZsb3cgfSA6IG51bGwsCiAgICAgICAgICAgICAgICAgIHJldHJ5TGFuZTogNTM2ODcwOTEyLAogICAgICAgICAgICAgICAgICBoeWRyYXRpb25FcnJvcnM6IG51bGwKICAgICAgICAgICAgICAgIH0sIGluc3RhbmNlID0gY3JlYXRlRmliZXIoMTgsIG51bGwsIG51bGwsIE5vTW9kZSksIGluc3RhbmNlLnN0YXRlTm9kZSA9IEpTQ29tcGlsZXJfdGVtcCwgaW5zdGFuY2UucmV0dXJuID0gd29ya0luUHJvZ3Jlc3MyLCB3b3JrSW5Qcm9ncmVzczIuY2hpbGQgPSBpbnN0YW5jZSwgaHlkcmF0aW9uUGFyZW50RmliZXIgPSB3b3JrSW5Qcm9ncmVzczIsIG5leHRIeWRyYXRhYmxlSW5zdGFuY2UgPSBudWxsLCBKU0NvbXBpbGVyX3RlbXAgPSB0cnVlKSA6IEpTQ29tcGlsZXJfdGVtcCA9IGZhbHNlOwogICAgICAgICAgICAgICAgSlNDb21waWxlcl90ZW1wID0gIUpTQ29tcGlsZXJfdGVtcDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgSlNDb21waWxlcl90ZW1wICYmICh3YXJuTm9uSHlkcmF0ZWRJbnN0YW5jZSgKICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICAgIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9tZXNzYWdlXzI0NTAKICAgICAgICAgICAgICApLCB0aHJvd09uSHlkcmF0aW9uTWlzbWF0Y2god29ya0luUHJvZ3Jlc3MyKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX21lc3NhZ2VfMjQ1MCA9IHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlOwogICAgICAgICAgICBpZiAobnVsbCAhPT0gSlNDb21waWxlcl9vYmplY3RfaW5saW5lX21lc3NhZ2VfMjQ1MCAmJiAoSlNDb21waWxlcl9vYmplY3RfaW5saW5lX21lc3NhZ2VfMjQ1MCA9IEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9tZXNzYWdlXzI0NTAuZGVoeWRyYXRlZCwgbnVsbCAhPT0gSlNDb21waWxlcl9vYmplY3RfaW5saW5lX21lc3NhZ2VfMjQ1MCkpCiAgICAgICAgICAgICAgcmV0dXJuIGlzU3VzcGVuc2VJbnN0YW5jZUZhbGxiYWNrKEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9tZXNzYWdlXzI0NTApID8gd29ya0luUHJvZ3Jlc3MyLmxhbmVzID0gMzIgOiB3b3JrSW5Qcm9ncmVzczIubGFuZXMgPSA1MzY4NzA5MTIsIG51bGw7CiAgICAgICAgICAgIHBvcFN1c3BlbnNlSGFuZGxlcih3b3JrSW5Qcm9ncmVzczIpOwogICAgICAgICAgfQogICAgICAgICAgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX21lc3NhZ2VfMjQ1MCA9IEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9zdGFja18yNDUyLmNoaWxkcmVuOwogICAgICAgICAgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX3N0YWNrXzI0NTIgPSBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfc3RhY2tfMjQ1Mi5mYWxsYmFjazsKICAgICAgICAgIGlmIChKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfY29tcG9uZW50U3RhY2tfMjQ1MykKICAgICAgICAgICAgcmV0dXJuIHJldXNlU3VzcGVuc2VIYW5kbGVyT25TdGFjayh3b3JrSW5Qcm9ncmVzczIpLCBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfY29tcG9uZW50U3RhY2tfMjQ1MyA9IHdvcmtJblByb2dyZXNzMi5tb2RlLCBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfbWVzc2FnZV8yNDUwID0gbW91bnRXb3JrSW5Qcm9ncmVzc09mZnNjcmVlbkZpYmVyKAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG1vZGU6ICJoaWRkZW4iLAogICAgICAgICAgICAgICAgY2hpbGRyZW46IEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9tZXNzYWdlXzI0NTAKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9jb21wb25lbnRTdGFja18yNDUzCiAgICAgICAgICAgICksIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9zdGFja18yNDUyID0gY3JlYXRlRmliZXJGcm9tRnJhZ21lbnQoCiAgICAgICAgICAgICAgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX3N0YWNrXzI0NTIsCiAgICAgICAgICAgICAgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2NvbXBvbmVudFN0YWNrXzI0NTMsCiAgICAgICAgICAgICAgcmVuZGVyTGFuZXMyLAogICAgICAgICAgICAgIG51bGwKICAgICAgICAgICAgKSwgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX21lc3NhZ2VfMjQ1MC5yZXR1cm4gPSB3b3JrSW5Qcm9ncmVzczIsIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9zdGFja18yNDUyLnJldHVybiA9IHdvcmtJblByb2dyZXNzMiwgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX21lc3NhZ2VfMjQ1MC5zaWJsaW5nID0gSlNDb21waWxlcl9vYmplY3RfaW5saW5lX3N0YWNrXzI0NTIsIHdvcmtJblByb2dyZXNzMi5jaGlsZCA9IEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9tZXNzYWdlXzI0NTAsIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9jb21wb25lbnRTdGFja18yNDUzID0gd29ya0luUHJvZ3Jlc3MyLmNoaWxkLCBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfY29tcG9uZW50U3RhY2tfMjQ1My5tZW1vaXplZFN0YXRlID0gbW91bnRTdXNwZW5zZU9mZnNjcmVlblN0YXRlKHJlbmRlckxhbmVzMiksIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9jb21wb25lbnRTdGFja18yNDUzLmNoaWxkTGFuZXMgPSBnZXRSZW1haW5pbmdXb3JrSW5QcmltYXJ5VHJlZSgKICAgICAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgICAgICBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfZGlnZXN0XzI0NTEsCiAgICAgICAgICAgICAgcmVuZGVyTGFuZXMyCiAgICAgICAgICAgICksIHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlID0gU1VTUEVOREVEX01BUktFUiwgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX3N0YWNrXzI0NTI7CiAgICAgICAgICBwdXNoUHJpbWFyeVRyZWVTdXNwZW5zZUhhbmRsZXIod29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICAgIHJldHVybiBtb3VudFN1c3BlbnNlUHJpbWFyeUNoaWxkcmVuKAogICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICAgIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9tZXNzYWdlXzI0NTAKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIHZhciBwcmV2U3RhdGUgPSBjdXJyZW50Mi5tZW1vaXplZFN0YXRlOwogICAgICAgIGlmIChudWxsICE9PSBwcmV2U3RhdGUgJiYgKEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9tZXNzYWdlXzI0NTAgPSBwcmV2U3RhdGUuZGVoeWRyYXRlZCwgbnVsbCAhPT0gSlNDb21waWxlcl9vYmplY3RfaW5saW5lX21lc3NhZ2VfMjQ1MCkpIHsKICAgICAgICAgIGlmIChkaWRTdXNwZW5kKQogICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgJiAyNTYgPyAocHVzaFByaW1hcnlUcmVlU3VzcGVuc2VIYW5kbGVyKHdvcmtJblByb2dyZXNzMiksIHdvcmtJblByb2dyZXNzMi5mbGFncyAmPSAtMjU3LCB3b3JrSW5Qcm9ncmVzczIgPSByZXRyeVN1c3BlbnNlQ29tcG9uZW50V2l0aG91dEh5ZHJhdGluZygKICAgICAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICAgICAgcmVuZGVyTGFuZXMyCiAgICAgICAgICAgICkpIDogbnVsbCAhPT0gd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkU3RhdGUgPyAocmV1c2VTdXNwZW5zZUhhbmRsZXJPblN0YWNrKHdvcmtJblByb2dyZXNzMiksIHdvcmtJblByb2dyZXNzMi5jaGlsZCA9IGN1cnJlbnQyLmNoaWxkLCB3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgfD0gMTI4LCB3b3JrSW5Qcm9ncmVzczIgPSBudWxsKSA6IChyZXVzZVN1c3BlbnNlSGFuZGxlck9uU3RhY2sod29ya0luUHJvZ3Jlc3MyKSwgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2NvbXBvbmVudFN0YWNrXzI0NTMgPSBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfc3RhY2tfMjQ1Mi5mYWxsYmFjaywgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX21lc3NhZ2VfMjQ1MCA9IHdvcmtJblByb2dyZXNzMi5tb2RlLCBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfc3RhY2tfMjQ1MiA9IG1vdW50V29ya0luUHJvZ3Jlc3NPZmZzY3JlZW5GaWJlcigKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBtb2RlOiAidmlzaWJsZSIsCiAgICAgICAgICAgICAgICBjaGlsZHJlbjogSlNDb21waWxlcl9vYmplY3RfaW5saW5lX3N0YWNrXzI0NTIuY2hpbGRyZW4KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9tZXNzYWdlXzI0NTAKICAgICAgICAgICAgKSwgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2NvbXBvbmVudFN0YWNrXzI0NTMgPSBjcmVhdGVGaWJlckZyb21GcmFnbWVudCgKICAgICAgICAgICAgICBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfY29tcG9uZW50U3RhY2tfMjQ1MywKICAgICAgICAgICAgICBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfbWVzc2FnZV8yNDUwLAogICAgICAgICAgICAgIHJlbmRlckxhbmVzMiwKICAgICAgICAgICAgICBudWxsCiAgICAgICAgICAgICksIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9jb21wb25lbnRTdGFja18yNDUzLmZsYWdzIHw9IDIsIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9zdGFja18yNDUyLnJldHVybiA9IHdvcmtJblByb2dyZXNzMiwgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2NvbXBvbmVudFN0YWNrXzI0NTMucmV0dXJuID0gd29ya0luUHJvZ3Jlc3MyLCBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfc3RhY2tfMjQ1Mi5zaWJsaW5nID0gSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2NvbXBvbmVudFN0YWNrXzI0NTMsIHdvcmtJblByb2dyZXNzMi5jaGlsZCA9IEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9zdGFja18yNDUyLCByZWNvbmNpbGVDaGlsZEZpYmVycygKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICAgICAgY3VycmVudDIuY2hpbGQsCiAgICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICAgKSwgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX3N0YWNrXzI0NTIgPSB3b3JrSW5Qcm9ncmVzczIuY2hpbGQsIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9zdGFja18yNDUyLm1lbW9pemVkU3RhdGUgPSBtb3VudFN1c3BlbnNlT2Zmc2NyZWVuU3RhdGUocmVuZGVyTGFuZXMyKSwgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX3N0YWNrXzI0NTIuY2hpbGRMYW5lcyA9IGdldFJlbWFpbmluZ1dvcmtJblByaW1hcnlUcmVlKAogICAgICAgICAgICAgIGN1cnJlbnQyLAogICAgICAgICAgICAgIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9kaWdlc3RfMjQ1MSwKICAgICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICAgKSwgd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkU3RhdGUgPSBTVVNQRU5ERURfTUFSS0VSLCB3b3JrSW5Qcm9ncmVzczIgPSBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfY29tcG9uZW50U3RhY2tfMjQ1Myk7CiAgICAgICAgICBlbHNlIGlmIChwdXNoUHJpbWFyeVRyZWVTdXNwZW5zZUhhbmRsZXIod29ya0luUHJvZ3Jlc3MyKSwgaXNIeWRyYXRpbmcgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIldlIHNob3VsZCBub3QgYmUgaHlkcmF0aW5nIGhlcmUuIFRoaXMgaXMgYSBidWcgaW4gUmVhY3QuIFBsZWFzZSBmaWxlIGEgYnVnLiIKICAgICAgICAgICksIGlzU3VzcGVuc2VJbnN0YW5jZUZhbGxiYWNrKEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9tZXNzYWdlXzI0NTApKSB7CiAgICAgICAgICAgIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9kaWdlc3RfMjQ1MSA9IEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9tZXNzYWdlXzI0NTAubmV4dFNpYmxpbmcgJiYgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX21lc3NhZ2VfMjQ1MC5uZXh0U2libGluZy5kYXRhc2V0OwogICAgICAgICAgICBpZiAoSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2RpZ2VzdF8yNDUxKSB7CiAgICAgICAgICAgICAgSlNDb21waWxlcl90ZW1wID0gSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2RpZ2VzdF8yNDUxLmRnc3Q7CiAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfZGlnZXN0XzI0NTEubXNnOwogICAgICAgICAgICAgIGluc3RhbmNlID0gSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2RpZ2VzdF8yNDUxLnN0Y2s7CiAgICAgICAgICAgICAgdmFyIGNvbXBvbmVudFN0YWNrID0gSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2RpZ2VzdF8yNDUxLmNzdGNrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9tZXNzYWdlXzI0NTAgPSBtZXNzYWdlOwogICAgICAgICAgICBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfZGlnZXN0XzI0NTEgPSBKU0NvbXBpbGVyX3RlbXA7CiAgICAgICAgICAgIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9zdGFja18yNDUyID0gaW5zdGFuY2U7CiAgICAgICAgICAgIEpTQ29tcGlsZXJfdGVtcCA9IEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9jb21wb25lbnRTdGFja18yNDUzID0gY29tcG9uZW50U3RhY2s7CiAgICAgICAgICAgIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9jb21wb25lbnRTdGFja18yNDUzID0gSlNDb21waWxlcl9vYmplY3RfaW5saW5lX21lc3NhZ2VfMjQ1MCA/IEVycm9yKEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9tZXNzYWdlXzI0NTApIDogRXJyb3IoCiAgICAgICAgICAgICAgIlRoZSBzZXJ2ZXIgY291bGQgbm90IGZpbmlzaCB0aGlzIFN1c3BlbnNlIGJvdW5kYXJ5LCBsaWtlbHkgZHVlIHRvIGFuIGVycm9yIGR1cmluZyBzZXJ2ZXIgcmVuZGVyaW5nLiBTd2l0Y2hlZCB0byBjbGllbnQgcmVuZGVyaW5nLiIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2NvbXBvbmVudFN0YWNrXzI0NTMuc3RhY2sgPSBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfc3RhY2tfMjQ1MiB8fCAiIjsKICAgICAgICAgICAgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2NvbXBvbmVudFN0YWNrXzI0NTMuZGlnZXN0ID0gSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2RpZ2VzdF8yNDUxOwogICAgICAgICAgICBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfZGlnZXN0XzI0NTEgPSB2b2lkIDAgPT09IEpTQ29tcGlsZXJfdGVtcCA/IG51bGwgOiBKU0NvbXBpbGVyX3RlbXA7CiAgICAgICAgICAgIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9zdGFja18yNDUyID0gewogICAgICAgICAgICAgIHZhbHVlOiBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfY29tcG9uZW50U3RhY2tfMjQ1MywKICAgICAgICAgICAgICBzb3VyY2U6IG51bGwsCiAgICAgICAgICAgICAgc3RhY2s6IEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9kaWdlc3RfMjQ1MQogICAgICAgICAgICB9OwogICAgICAgICAgICAic3RyaW5nIiA9PT0gdHlwZW9mIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9kaWdlc3RfMjQ1MSAmJiBDYXB0dXJlZFN0YWNrcy5zZXQoCiAgICAgICAgICAgICAgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2NvbXBvbmVudFN0YWNrXzI0NTMsCiAgICAgICAgICAgICAgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX3N0YWNrXzI0NTIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgcXVldWVIeWRyYXRpb25FcnJvcihKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfc3RhY2tfMjQ1Mik7CiAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiA9IHJldHJ5U3VzcGVuc2VDb21wb25lbnRXaXRob3V0SHlkcmF0aW5nKAogICAgICAgICAgICAgIGN1cnJlbnQyLAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICAgKTsKICAgICAgICAgIH0gZWxzZSBpZiAoZGlkUmVjZWl2ZVVwZGF0ZSB8fCBwcm9wYWdhdGVQYXJlbnRDb250ZXh0Q2hhbmdlcygKICAgICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgcmVuZGVyTGFuZXMyLAogICAgICAgICAgICBmYWxzZQogICAgICAgICAgKSwgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2RpZ2VzdF8yNDUxID0gMCAhPT0gKHJlbmRlckxhbmVzMiAmIGN1cnJlbnQyLmNoaWxkTGFuZXMpLCBkaWRSZWNlaXZlVXBkYXRlIHx8IEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9kaWdlc3RfMjQ1MSkgewogICAgICAgICAgICBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfZGlnZXN0XzI0NTEgPSB3b3JrSW5Qcm9ncmVzc1Jvb3Q7CiAgICAgICAgICAgIGlmIChudWxsICE9PSBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfZGlnZXN0XzI0NTEgJiYgKEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9zdGFja18yNDUyID0gcmVuZGVyTGFuZXMyICYgLXJlbmRlckxhbmVzMiwgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX3N0YWNrXzI0NTIgPSAwICE9PSAoSlNDb21waWxlcl9vYmplY3RfaW5saW5lX3N0YWNrXzI0NTIgJiA0MikgPyAxIDogZ2V0QnVtcGVkTGFuZUZvckh5ZHJhdGlvbkJ5TGFuZSgKICAgICAgICAgICAgICBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfc3RhY2tfMjQ1MgogICAgICAgICAgICApLCBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfc3RhY2tfMjQ1MiA9IDAgIT09IChKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfc3RhY2tfMjQ1MiAmIChKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfZGlnZXN0XzI0NTEuc3VzcGVuZGVkTGFuZXMgfCByZW5kZXJMYW5lczIpKSA/IDAgOiBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfc3RhY2tfMjQ1MiwgMCAhPT0gSlNDb21waWxlcl9vYmplY3RfaW5saW5lX3N0YWNrXzI0NTIgJiYgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX3N0YWNrXzI0NTIgIT09IHByZXZTdGF0ZS5yZXRyeUxhbmUpKQogICAgICAgICAgICAgIHRocm93IHByZXZTdGF0ZS5yZXRyeUxhbmUgPSBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfc3RhY2tfMjQ1MiwgZW5xdWV1ZUNvbmN1cnJlbnRSZW5kZXJGb3JMYW5lKAogICAgICAgICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICAgICAgICBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfc3RhY2tfMjQ1MgogICAgICAgICAgICAgICksIHNjaGVkdWxlVXBkYXRlT25GaWJlcigKICAgICAgICAgICAgICAgIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9kaWdlc3RfMjQ1MSwKICAgICAgICAgICAgICAgIGN1cnJlbnQyLAogICAgICAgICAgICAgICAgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX3N0YWNrXzI0NTIKICAgICAgICAgICAgICApLCBTZWxlY3RpdmVIeWRyYXRpb25FeGNlcHRpb247CiAgICAgICAgICAgIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9tZXNzYWdlXzI0NTAuZGF0YSA9PT0gU1VTUEVOU0VfUEVORElOR19TVEFSVF9EQVRBIHx8IHJlbmRlckRpZFN1c3BlbmREZWxheUlmUG9zc2libGUoKTsKICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyID0gcmV0cnlTdXNwZW5zZUNvbXBvbmVudFdpdGhvdXRIeWRyYXRpbmcoCiAgICAgICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICAgIHJlbmRlckxhbmVzMgogICAgICAgICAgICApOwogICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9tZXNzYWdlXzI0NTAuZGF0YSA9PT0gU1VTUEVOU0VfUEVORElOR19TVEFSVF9EQVRBID8gKHdvcmtJblByb2dyZXNzMi5mbGFncyB8PSAxOTIsIHdvcmtJblByb2dyZXNzMi5jaGlsZCA9IGN1cnJlbnQyLmNoaWxkLCB3b3JrSW5Qcm9ncmVzczIgPSBudWxsKSA6IChjdXJyZW50MiA9IHByZXZTdGF0ZS50cmVlQ29udGV4dCwgbmV4dEh5ZHJhdGFibGVJbnN0YW5jZSA9IGdldE5leHRIeWRyYXRhYmxlKAogICAgICAgICAgICAgIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9tZXNzYWdlXzI0NTAubmV4dFNpYmxpbmcKICAgICAgICAgICAgKSwgaHlkcmF0aW9uUGFyZW50RmliZXIgPSB3b3JrSW5Qcm9ncmVzczIsIGlzSHlkcmF0aW5nID0gdHJ1ZSwgaHlkcmF0aW9uRXJyb3JzID0gbnVsbCwgZGlkU3VzcGVuZE9yRXJyb3JERVYgPSBmYWxzZSwgaHlkcmF0aW9uRGlmZlJvb3RERVYgPSBudWxsLCByb290T3JTaW5nbGV0b25Db250ZXh0ID0gZmFsc2UsIG51bGwgIT09IGN1cnJlbnQyICYmICh3YXJuSWZOb3RIeWRyYXRpbmcoKSwgaWRTdGFja1tpZFN0YWNrSW5kZXgrK10gPSB0cmVlQ29udGV4dElkLCBpZFN0YWNrW2lkU3RhY2tJbmRleCsrXSA9IHRyZWVDb250ZXh0T3ZlcmZsb3csIGlkU3RhY2tbaWRTdGFja0luZGV4KytdID0gdHJlZUNvbnRleHRQcm92aWRlciwgdHJlZUNvbnRleHRJZCA9IGN1cnJlbnQyLmlkLCB0cmVlQ29udGV4dE92ZXJmbG93ID0gY3VycmVudDIub3ZlcmZsb3csIHRyZWVDb250ZXh0UHJvdmlkZXIgPSB3b3JrSW5Qcm9ncmVzczIpLCB3b3JrSW5Qcm9ncmVzczIgPSBtb3VudFN1c3BlbnNlUHJpbWFyeUNoaWxkcmVuKAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfc3RhY2tfMjQ1Mi5jaGlsZHJlbgogICAgICAgICAgICApLCB3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgfD0gNDA5Nik7CiAgICAgICAgICByZXR1cm4gd29ya0luUHJvZ3Jlc3MyOwogICAgICAgIH0KICAgICAgICBpZiAoSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2NvbXBvbmVudFN0YWNrXzI0NTMpCiAgICAgICAgICByZXR1cm4gcmV1c2VTdXNwZW5zZUhhbmRsZXJPblN0YWNrKHdvcmtJblByb2dyZXNzMiksIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9jb21wb25lbnRTdGFja18yNDUzID0gSlNDb21waWxlcl9vYmplY3RfaW5saW5lX3N0YWNrXzI0NTIuZmFsbGJhY2ssIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9tZXNzYWdlXzI0NTAgPSB3b3JrSW5Qcm9ncmVzczIubW9kZSwgSlNDb21waWxlcl90ZW1wID0gY3VycmVudDIuY2hpbGQsIGluc3RhbmNlID0gSlNDb21waWxlcl90ZW1wLnNpYmxpbmcsIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9zdGFja18yNDUyID0gY3JlYXRlV29ya0luUHJvZ3Jlc3MoCiAgICAgICAgICAgIEpTQ29tcGlsZXJfdGVtcCwKICAgICAgICAgICAgewogICAgICAgICAgICAgIG1vZGU6ICJoaWRkZW4iLAogICAgICAgICAgICAgIGNoaWxkcmVuOiBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfc3RhY2tfMjQ1Mi5jaGlsZHJlbgogICAgICAgICAgICB9CiAgICAgICAgICApLCBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfc3RhY2tfMjQ1Mi5zdWJ0cmVlRmxhZ3MgPSBKU0NvbXBpbGVyX3RlbXAuc3VidHJlZUZsYWdzICYgNjUwMTE3MTIsIG51bGwgIT09IGluc3RhbmNlID8gSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2NvbXBvbmVudFN0YWNrXzI0NTMgPSBjcmVhdGVXb3JrSW5Qcm9ncmVzcygKICAgICAgICAgICAgaW5zdGFuY2UsCiAgICAgICAgICAgIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9jb21wb25lbnRTdGFja18yNDUzCiAgICAgICAgICApIDogKEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9jb21wb25lbnRTdGFja18yNDUzID0gY3JlYXRlRmliZXJGcm9tRnJhZ21lbnQoCiAgICAgICAgICAgIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9jb21wb25lbnRTdGFja18yNDUzLAogICAgICAgICAgICBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfbWVzc2FnZV8yNDUwLAogICAgICAgICAgICByZW5kZXJMYW5lczIsCiAgICAgICAgICAgIG51bGwKICAgICAgICAgICksIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9jb21wb25lbnRTdGFja18yNDUzLmZsYWdzIHw9IDIpLCBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfY29tcG9uZW50U3RhY2tfMjQ1My5yZXR1cm4gPSB3b3JrSW5Qcm9ncmVzczIsIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9zdGFja18yNDUyLnJldHVybiA9IHdvcmtJblByb2dyZXNzMiwgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX3N0YWNrXzI0NTIuc2libGluZyA9IEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9jb21wb25lbnRTdGFja18yNDUzLCB3b3JrSW5Qcm9ncmVzczIuY2hpbGQgPSBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfc3RhY2tfMjQ1MiwgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX3N0YWNrXzI0NTIgPSBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfY29tcG9uZW50U3RhY2tfMjQ1MywgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2NvbXBvbmVudFN0YWNrXzI0NTMgPSB3b3JrSW5Qcm9ncmVzczIuY2hpbGQsIEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9tZXNzYWdlXzI0NTAgPSBjdXJyZW50Mi5jaGlsZC5tZW1vaXplZFN0YXRlLCBudWxsID09PSBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfbWVzc2FnZV8yNDUwID8gSlNDb21waWxlcl9vYmplY3RfaW5saW5lX21lc3NhZ2VfMjQ1MCA9IG1vdW50U3VzcGVuc2VPZmZzY3JlZW5TdGF0ZShyZW5kZXJMYW5lczIpIDogKEpTQ29tcGlsZXJfdGVtcCA9IEpTQ29tcGlsZXJfb2JqZWN0X2lubGluZV9tZXNzYWdlXzI0NTAuY2FjaGVQb29sLCBudWxsICE9PSBKU0NvbXBpbGVyX3RlbXAgPyAoaW5zdGFuY2UgPSBDYWNoZUNvbnRleHQuX2N1cnJlbnRWYWx1ZSwgSlNDb21waWxlcl90ZW1wID0gSlNDb21waWxlcl90ZW1wLnBhcmVudCAhPT0gaW5zdGFuY2UgPyB7IHBhcmVudDogaW5zdGFuY2UsIHBvb2w6IGluc3RhbmNlIH0gOiBKU0NvbXBpbGVyX3RlbXApIDogSlNDb21waWxlcl90ZW1wID0gZ2V0U3VzcGVuZGVkQ2FjaGUoKSwgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX21lc3NhZ2VfMjQ1MCA9IHsKICAgICAgICAgICAgYmFzZUxhbmVzOiBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfbWVzc2FnZV8yNDUwLmJhc2VMYW5lcyB8IHJlbmRlckxhbmVzMiwKICAgICAgICAgICAgY2FjaGVQb29sOiBKU0NvbXBpbGVyX3RlbXAKICAgICAgICAgIH0pLCBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfY29tcG9uZW50U3RhY2tfMjQ1My5tZW1vaXplZFN0YXRlID0gSlNDb21waWxlcl9vYmplY3RfaW5saW5lX21lc3NhZ2VfMjQ1MCwgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2NvbXBvbmVudFN0YWNrXzI0NTMuY2hpbGRMYW5lcyA9IGdldFJlbWFpbmluZ1dvcmtJblByaW1hcnlUcmVlKAogICAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgICAgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX2RpZ2VzdF8yNDUxLAogICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICksIHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlID0gU1VTUEVOREVEX01BUktFUiwgSlNDb21waWxlcl9vYmplY3RfaW5saW5lX3N0YWNrXzI0NTI7CiAgICAgICAgcHVzaFByaW1hcnlUcmVlU3VzcGVuc2VIYW5kbGVyKHdvcmtJblByb2dyZXNzMik7CiAgICAgICAgcmVuZGVyTGFuZXMyID0gY3VycmVudDIuY2hpbGQ7CiAgICAgICAgY3VycmVudDIgPSByZW5kZXJMYW5lczIuc2libGluZzsKICAgICAgICByZW5kZXJMYW5lczIgPSBjcmVhdGVXb3JrSW5Qcm9ncmVzcyhyZW5kZXJMYW5lczIsIHsKICAgICAgICAgIG1vZGU6ICJ2aXNpYmxlIiwKICAgICAgICAgIGNoaWxkcmVuOiBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfc3RhY2tfMjQ1Mi5jaGlsZHJlbgogICAgICAgIH0pOwogICAgICAgIHJlbmRlckxhbmVzMi5yZXR1cm4gPSB3b3JrSW5Qcm9ncmVzczI7CiAgICAgICAgcmVuZGVyTGFuZXMyLnNpYmxpbmcgPSBudWxsOwogICAgICAgIG51bGwgIT09IGN1cnJlbnQyICYmIChKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfZGlnZXN0XzI0NTEgPSB3b3JrSW5Qcm9ncmVzczIuZGVsZXRpb25zLCBudWxsID09PSBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfZGlnZXN0XzI0NTEgPyAod29ya0luUHJvZ3Jlc3MyLmRlbGV0aW9ucyA9IFtjdXJyZW50Ml0sIHdvcmtJblByb2dyZXNzMi5mbGFncyB8PSAxNikgOiBKU0NvbXBpbGVyX29iamVjdF9pbmxpbmVfZGlnZXN0XzI0NTEucHVzaChjdXJyZW50MikpOwogICAgICAgIHdvcmtJblByb2dyZXNzMi5jaGlsZCA9IHJlbmRlckxhbmVzMjsKICAgICAgICB3b3JrSW5Qcm9ncmVzczIubWVtb2l6ZWRTdGF0ZSA9IG51bGw7CiAgICAgICAgcmV0dXJuIHJlbmRlckxhbmVzMjsKICAgICAgfQogICAgICBmdW5jdGlvbiBtb3VudFN1c3BlbnNlUHJpbWFyeUNoaWxkcmVuKHdvcmtJblByb2dyZXNzMiwgcHJpbWFyeUNoaWxkcmVuKSB7CiAgICAgICAgcHJpbWFyeUNoaWxkcmVuID0gbW91bnRXb3JrSW5Qcm9ncmVzc09mZnNjcmVlbkZpYmVyKAogICAgICAgICAgeyBtb2RlOiAidmlzaWJsZSIsIGNoaWxkcmVuOiBwcmltYXJ5Q2hpbGRyZW4gfSwKICAgICAgICAgIHdvcmtJblByb2dyZXNzMi5tb2RlCiAgICAgICAgKTsKICAgICAgICBwcmltYXJ5Q2hpbGRyZW4ucmV0dXJuID0gd29ya0luUHJvZ3Jlc3MyOwogICAgICAgIHJldHVybiB3b3JrSW5Qcm9ncmVzczIuY2hpbGQgPSBwcmltYXJ5Q2hpbGRyZW47CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbW91bnRXb3JrSW5Qcm9ncmVzc09mZnNjcmVlbkZpYmVyKG9mZnNjcmVlblByb3BzLCBtb2RlKSB7CiAgICAgICAgb2Zmc2NyZWVuUHJvcHMgPSBjcmVhdGVGaWJlcigyMiwgb2Zmc2NyZWVuUHJvcHMsIG51bGwsIG1vZGUpOwogICAgICAgIG9mZnNjcmVlblByb3BzLmxhbmVzID0gMDsKICAgICAgICBvZmZzY3JlZW5Qcm9wcy5zdGF0ZU5vZGUgPSB7CiAgICAgICAgICBfdmlzaWJpbGl0eTogT2Zmc2NyZWVuVmlzaWJsZSwKICAgICAgICAgIF9wZW5kaW5nTWFya2VyczogbnVsbCwKICAgICAgICAgIF9yZXRyeUNhY2hlOiBudWxsLAogICAgICAgICAgX3RyYW5zaXRpb25zOiBudWxsCiAgICAgICAgfTsKICAgICAgICByZXR1cm4gb2Zmc2NyZWVuUHJvcHM7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmV0cnlTdXNwZW5zZUNvbXBvbmVudFdpdGhvdXRIeWRyYXRpbmcoY3VycmVudDIsIHdvcmtJblByb2dyZXNzMiwgcmVuZGVyTGFuZXMyKSB7CiAgICAgICAgcmVjb25jaWxlQ2hpbGRGaWJlcnMod29ya0luUHJvZ3Jlc3MyLCBjdXJyZW50Mi5jaGlsZCwgbnVsbCwgcmVuZGVyTGFuZXMyKTsKICAgICAgICBjdXJyZW50MiA9IG1vdW50U3VzcGVuc2VQcmltYXJ5Q2hpbGRyZW4oCiAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIucGVuZGluZ1Byb3BzLmNoaWxkcmVuCiAgICAgICAgKTsKICAgICAgICBjdXJyZW50Mi5mbGFncyB8PSAyOwogICAgICAgIHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlID0gbnVsbDsKICAgICAgICByZXR1cm4gY3VycmVudDI7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gc2NoZWR1bGVTdXNwZW5zZVdvcmtPbkZpYmVyKGZpYmVyLCByZW5kZXJMYW5lczIsIHByb3BhZ2F0aW9uUm9vdCkgewogICAgICAgIGZpYmVyLmxhbmVzIHw9IHJlbmRlckxhbmVzMjsKICAgICAgICB2YXIgYWx0ZXJuYXRlID0gZmliZXIuYWx0ZXJuYXRlOwogICAgICAgIG51bGwgIT09IGFsdGVybmF0ZSAmJiAoYWx0ZXJuYXRlLmxhbmVzIHw9IHJlbmRlckxhbmVzMik7CiAgICAgICAgc2NoZWR1bGVDb250ZXh0V29ya09uUGFyZW50UGF0aCgKICAgICAgICAgIGZpYmVyLnJldHVybiwKICAgICAgICAgIHJlbmRlckxhbmVzMiwKICAgICAgICAgIHByb3BhZ2F0aW9uUm9vdAogICAgICAgICk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdmFsaWRhdGVTdXNwZW5zZUxpc3ROZXN0ZWRDaGlsZChjaGlsZFNsb3QsIGluZGV4KSB7CiAgICAgICAgdmFyIGlzQW5BcnJheSA9IGlzQXJyYXlJbXBsKGNoaWxkU2xvdCk7CiAgICAgICAgY2hpbGRTbG90ID0gIWlzQW5BcnJheSAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgZ2V0SXRlcmF0b3JGbihjaGlsZFNsb3QpOwogICAgICAgIHJldHVybiBpc0FuQXJyYXkgfHwgY2hpbGRTbG90ID8gKGlzQW5BcnJheSA9IGlzQW5BcnJheSA/ICJhcnJheSIgOiAiaXRlcmFibGUiLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgIkEgbmVzdGVkICVzIHdhcyBwYXNzZWQgdG8gcm93ICMlcyBpbiA8U3VzcGVuc2VMaXN0IC8+LiBXcmFwIGl0IGluIGFuIGFkZGl0aW9uYWwgU3VzcGVuc2VMaXN0IHRvIGNvbmZpZ3VyZSBpdHMgcmV2ZWFsT3JkZXI6IDxTdXNwZW5zZUxpc3QgcmV2ZWFsT3JkZXI9Li4uPiAuLi4gPFN1c3BlbnNlTGlzdCByZXZlYWxPcmRlcj0uLi4+eyVzfTwvU3VzcGVuc2VMaXN0PiAuLi4gPC9TdXNwZW5zZUxpc3Q+IiwKICAgICAgICAgIGlzQW5BcnJheSwKICAgICAgICAgIGluZGV4LAogICAgICAgICAgaXNBbkFycmF5CiAgICAgICAgKSwgZmFsc2UpIDogdHJ1ZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBpbml0U3VzcGVuc2VMaXN0UmVuZGVyU3RhdGUod29ya0luUHJvZ3Jlc3MyLCBpc0JhY2t3YXJkcywgdGFpbCwgbGFzdENvbnRlbnRSb3csIHRhaWxNb2RlKSB7CiAgICAgICAgdmFyIHJlbmRlclN0YXRlID0gd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkU3RhdGU7CiAgICAgICAgbnVsbCA9PT0gcmVuZGVyU3RhdGUgPyB3b3JrSW5Qcm9ncmVzczIubWVtb2l6ZWRTdGF0ZSA9IHsKICAgICAgICAgIGlzQmFja3dhcmRzLAogICAgICAgICAgcmVuZGVyaW5nOiBudWxsLAogICAgICAgICAgcmVuZGVyaW5nU3RhcnRUaW1lOiAwLAogICAgICAgICAgbGFzdDogbGFzdENvbnRlbnRSb3csCiAgICAgICAgICB0YWlsLAogICAgICAgICAgdGFpbE1vZGUKICAgICAgICB9IDogKHJlbmRlclN0YXRlLmlzQmFja3dhcmRzID0gaXNCYWNrd2FyZHMsIHJlbmRlclN0YXRlLnJlbmRlcmluZyA9IG51bGwsIHJlbmRlclN0YXRlLnJlbmRlcmluZ1N0YXJ0VGltZSA9IDAsIHJlbmRlclN0YXRlLmxhc3QgPSBsYXN0Q29udGVudFJvdywgcmVuZGVyU3RhdGUudGFpbCA9IHRhaWwsIHJlbmRlclN0YXRlLnRhaWxNb2RlID0gdGFpbE1vZGUpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVN1c3BlbnNlTGlzdENvbXBvbmVudChjdXJyZW50Miwgd29ya0luUHJvZ3Jlc3MyLCByZW5kZXJMYW5lczIpIHsKICAgICAgICB2YXIgbmV4dFByb3BzID0gd29ya0luUHJvZ3Jlc3MyLnBlbmRpbmdQcm9wcywgcmV2ZWFsT3JkZXIgPSBuZXh0UHJvcHMucmV2ZWFsT3JkZXIsIHRhaWxNb2RlID0gbmV4dFByb3BzLnRhaWw7CiAgICAgICAgbmV4dFByb3BzID0gbmV4dFByb3BzLmNoaWxkcmVuOwogICAgICAgIGlmICh2b2lkIDAgIT09IHJldmVhbE9yZGVyICYmICJmb3J3YXJkcyIgIT09IHJldmVhbE9yZGVyICYmICJiYWNrd2FyZHMiICE9PSByZXZlYWxPcmRlciAmJiAidG9nZXRoZXIiICE9PSByZXZlYWxPcmRlciAmJiAhZGlkV2FybkFib3V0UmV2ZWFsT3JkZXJbcmV2ZWFsT3JkZXJdKQogICAgICAgICAgaWYgKGRpZFdhcm5BYm91dFJldmVhbE9yZGVyW3JldmVhbE9yZGVyXSA9IHRydWUsICJzdHJpbmciID09PSB0eXBlb2YgcmV2ZWFsT3JkZXIpCiAgICAgICAgICAgIHN3aXRjaCAocmV2ZWFsT3JkZXIudG9Mb3dlckNhc2UoKSkgewogICAgICAgICAgICAgIGNhc2UgInRvZ2V0aGVyIjoKICAgICAgICAgICAgICBjYXNlICJmb3J3YXJkcyI6CiAgICAgICAgICAgICAgY2FzZSAiYmFja3dhcmRzIjoKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgICAgICciJXMiIGlzIG5vdCBhIHZhbGlkIHZhbHVlIGZvciByZXZlYWxPcmRlciBvbiA8U3VzcGVuc2VMaXN0IC8+LiBVc2UgbG93ZXJjYXNlICIlcyIgaW5zdGVhZC4nLAogICAgICAgICAgICAgICAgICByZXZlYWxPcmRlciwKICAgICAgICAgICAgICAgICAgcmV2ZWFsT3JkZXIudG9Mb3dlckNhc2UoKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgImZvcndhcmQiOgogICAgICAgICAgICAgIGNhc2UgImJhY2t3YXJkIjoKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgICAgICciJXMiIGlzIG5vdCBhIHZhbGlkIHZhbHVlIGZvciByZXZlYWxPcmRlciBvbiA8U3VzcGVuc2VMaXN0IC8+LiBSZWFjdCB1c2VzIHRoZSAtcyBzdWZmaXggaW4gdGhlIHNwZWxsaW5nLiBVc2UgIiVzcyIgaW5zdGVhZC4nLAogICAgICAgICAgICAgICAgICByZXZlYWxPcmRlciwKICAgICAgICAgICAgICAgICAgcmV2ZWFsT3JkZXIudG9Mb3dlckNhc2UoKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICAgICAnIiVzIiBpcyBub3QgYSBzdXBwb3J0ZWQgcmV2ZWFsT3JkZXIgb24gPFN1c3BlbnNlTGlzdCAvPi4gRGlkIHlvdSBtZWFuICJ0b2dldGhlciIsICJmb3J3YXJkcyIgb3IgImJhY2t3YXJkcyI/JywKICAgICAgICAgICAgICAgICAgcmV2ZWFsT3JkZXIKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgIGVsc2UKICAgICAgICAgICAgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAnJXMgaXMgbm90IGEgc3VwcG9ydGVkIHZhbHVlIGZvciByZXZlYWxPcmRlciBvbiA8U3VzcGVuc2VMaXN0IC8+LiBEaWQgeW91IG1lYW4gInRvZ2V0aGVyIiwgImZvcndhcmRzIiBvciAiYmFja3dhcmRzIj8nLAogICAgICAgICAgICAgIHJldmVhbE9yZGVyCiAgICAgICAgICAgICk7CiAgICAgICAgdm9pZCAwID09PSB0YWlsTW9kZSB8fCBkaWRXYXJuQWJvdXRUYWlsT3B0aW9uc1t0YWlsTW9kZV0gfHwgKCJjb2xsYXBzZWQiICE9PSB0YWlsTW9kZSAmJiAiaGlkZGVuIiAhPT0gdGFpbE1vZGUgPyAoZGlkV2FybkFib3V0VGFpbE9wdGlvbnNbdGFpbE1vZGVdID0gdHJ1ZSwgY29uc29sZS5lcnJvcigKICAgICAgICAgICciJXMiIGlzIG5vdCBhIHN1cHBvcnRlZCB2YWx1ZSBmb3IgdGFpbCBvbiA8U3VzcGVuc2VMaXN0IC8+LiBEaWQgeW91IG1lYW4gImNvbGxhcHNlZCIgb3IgImhpZGRlbiI/JywKICAgICAgICAgIHRhaWxNb2RlCiAgICAgICAgKSkgOiAiZm9yd2FyZHMiICE9PSByZXZlYWxPcmRlciAmJiAiYmFja3dhcmRzIiAhPT0gcmV2ZWFsT3JkZXIgJiYgKGRpZFdhcm5BYm91dFRhaWxPcHRpb25zW3RhaWxNb2RlXSA9IHRydWUsIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAnPFN1c3BlbnNlTGlzdCB0YWlsPSIlcyIgLz4gaXMgb25seSB2YWxpZCBpZiByZXZlYWxPcmRlciBpcyAiZm9yd2FyZHMiIG9yICJiYWNrd2FyZHMiLiBEaWQgeW91IG1lYW4gdG8gc3BlY2lmeSByZXZlYWxPcmRlcj0iZm9yd2FyZHMiPycsCiAgICAgICAgICB0YWlsTW9kZQogICAgICAgICkpKTsKICAgICAgICBhOiBpZiAoKCJmb3J3YXJkcyIgPT09IHJldmVhbE9yZGVyIHx8ICJiYWNrd2FyZHMiID09PSByZXZlYWxPcmRlcikgJiYgdm9pZCAwICE9PSBuZXh0UHJvcHMgJiYgbnVsbCAhPT0gbmV4dFByb3BzICYmIGZhbHNlICE9PSBuZXh0UHJvcHMpCiAgICAgICAgICBpZiAoaXNBcnJheUltcGwobmV4dFByb3BzKSkKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXh0UHJvcHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBpZiAoIXZhbGlkYXRlU3VzcGVuc2VMaXN0TmVzdGVkQ2hpbGQobmV4dFByb3BzW2ldLCBpKSkgYnJlYWsgYTsKICAgICAgICAgICAgfQogICAgICAgICAgZWxzZSBpZiAoaSA9IGdldEl0ZXJhdG9yRm4obmV4dFByb3BzKSwgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGkpIHsKICAgICAgICAgICAgaWYgKGkgPSBpLmNhbGwobmV4dFByb3BzKSkKICAgICAgICAgICAgICBmb3IgKHZhciBzdGVwID0gaS5uZXh0KCksIF9pID0gMDsgIXN0ZXAuZG9uZTsgc3RlcCA9IGkubmV4dCgpKSB7CiAgICAgICAgICAgICAgICBpZiAoIXZhbGlkYXRlU3VzcGVuc2VMaXN0TmVzdGVkQ2hpbGQoc3RlcC52YWx1ZSwgX2kpKSBicmVhayBhOwogICAgICAgICAgICAgICAgX2krKzsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAnQSBzaW5nbGUgcm93IHdhcyBwYXNzZWQgdG8gYSA8U3VzcGVuc2VMaXN0IHJldmVhbE9yZGVyPSIlcyIgLz4uIFRoaXMgaXMgbm90IHVzZWZ1bCBzaW5jZSBpdCBuZWVkcyBtdWx0aXBsZSByb3dzLiBEaWQgeW91IG1lYW4gdG8gcGFzcyBtdWx0aXBsZSBjaGlsZHJlbiBvciBhbiBhcnJheT8nLAogICAgICAgICAgICAgIHJldmVhbE9yZGVyCiAgICAgICAgICAgICk7CiAgICAgICAgcmVjb25jaWxlQ2hpbGRyZW4oY3VycmVudDIsIHdvcmtJblByb2dyZXNzMiwgbmV4dFByb3BzLCByZW5kZXJMYW5lczIpOwogICAgICAgIG5leHRQcm9wcyA9IHN1c3BlbnNlU3RhY2tDdXJzb3IuY3VycmVudDsKICAgICAgICBpZiAoMCAhPT0gKG5leHRQcm9wcyAmIEZvcmNlU3VzcGVuc2VGYWxsYmFjaykpCiAgICAgICAgICBuZXh0UHJvcHMgPSBuZXh0UHJvcHMgJiBTdWJ0cmVlU3VzcGVuc2VDb250ZXh0TWFzayB8IEZvcmNlU3VzcGVuc2VGYWxsYmFjaywgd29ya0luUHJvZ3Jlc3MyLmZsYWdzIHw9IDEyODsKICAgICAgICBlbHNlIHsKICAgICAgICAgIGlmIChudWxsICE9PSBjdXJyZW50MiAmJiAwICE9PSAoY3VycmVudDIuZmxhZ3MgJiAxMjgpKQogICAgICAgICAgICBhOiBmb3IgKGN1cnJlbnQyID0gd29ya0luUHJvZ3Jlc3MyLmNoaWxkOyBudWxsICE9PSBjdXJyZW50MjsgKSB7CiAgICAgICAgICAgICAgaWYgKDEzID09PSBjdXJyZW50Mi50YWcpCiAgICAgICAgICAgICAgICBudWxsICE9PSBjdXJyZW50Mi5tZW1vaXplZFN0YXRlICYmIHNjaGVkdWxlU3VzcGVuc2VXb3JrT25GaWJlcigKICAgICAgICAgICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICAgICAgICAgIHJlbmRlckxhbmVzMiwKICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGVsc2UgaWYgKDE5ID09PSBjdXJyZW50Mi50YWcpCiAgICAgICAgICAgICAgICBzY2hlZHVsZVN1c3BlbnNlV29ya09uRmliZXIoY3VycmVudDIsIHJlbmRlckxhbmVzMiwgd29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICAgICAgICBlbHNlIGlmIChudWxsICE9PSBjdXJyZW50Mi5jaGlsZCkgewogICAgICAgICAgICAgICAgY3VycmVudDIuY2hpbGQucmV0dXJuID0gY3VycmVudDI7CiAgICAgICAgICAgICAgICBjdXJyZW50MiA9IGN1cnJlbnQyLmNoaWxkOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChjdXJyZW50MiA9PT0gd29ya0luUHJvZ3Jlc3MyKSBicmVhayBhOwogICAgICAgICAgICAgIGZvciAoOyBudWxsID09PSBjdXJyZW50Mi5zaWJsaW5nOyApIHsKICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBjdXJyZW50Mi5yZXR1cm4gfHwgY3VycmVudDIucmV0dXJuID09PSB3b3JrSW5Qcm9ncmVzczIpCiAgICAgICAgICAgICAgICAgIGJyZWFrIGE7CiAgICAgICAgICAgICAgICBjdXJyZW50MiA9IGN1cnJlbnQyLnJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY3VycmVudDIuc2libGluZy5yZXR1cm4gPSBjdXJyZW50Mi5yZXR1cm47CiAgICAgICAgICAgICAgY3VycmVudDIgPSBjdXJyZW50Mi5zaWJsaW5nOwogICAgICAgICAgICB9CiAgICAgICAgICBuZXh0UHJvcHMgJj0gU3VidHJlZVN1c3BlbnNlQ29udGV4dE1hc2s7CiAgICAgICAgfQogICAgICAgIHB1c2goc3VzcGVuc2VTdGFja0N1cnNvciwgbmV4dFByb3BzLCB3b3JrSW5Qcm9ncmVzczIpOwogICAgICAgIHN3aXRjaCAocmV2ZWFsT3JkZXIpIHsKICAgICAgICAgIGNhc2UgImZvcndhcmRzIjoKICAgICAgICAgICAgcmVuZGVyTGFuZXMyID0gd29ya0luUHJvZ3Jlc3MyLmNoaWxkOwogICAgICAgICAgICBmb3IgKHJldmVhbE9yZGVyID0gbnVsbDsgbnVsbCAhPT0gcmVuZGVyTGFuZXMyOyApCiAgICAgICAgICAgICAgY3VycmVudDIgPSByZW5kZXJMYW5lczIuYWx0ZXJuYXRlLCBudWxsICE9PSBjdXJyZW50MiAmJiBudWxsID09PSBmaW5kRmlyc3RTdXNwZW5kZWQoY3VycmVudDIpICYmIChyZXZlYWxPcmRlciA9IHJlbmRlckxhbmVzMiksIHJlbmRlckxhbmVzMiA9IHJlbmRlckxhbmVzMi5zaWJsaW5nOwogICAgICAgICAgICByZW5kZXJMYW5lczIgPSByZXZlYWxPcmRlcjsKICAgICAgICAgICAgbnVsbCA9PT0gcmVuZGVyTGFuZXMyID8gKHJldmVhbE9yZGVyID0gd29ya0luUHJvZ3Jlc3MyLmNoaWxkLCB3b3JrSW5Qcm9ncmVzczIuY2hpbGQgPSBudWxsKSA6IChyZXZlYWxPcmRlciA9IHJlbmRlckxhbmVzMi5zaWJsaW5nLCByZW5kZXJMYW5lczIuc2libGluZyA9IG51bGwpOwogICAgICAgICAgICBpbml0U3VzcGVuc2VMaXN0UmVuZGVyU3RhdGUoCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICAgIGZhbHNlLAogICAgICAgICAgICAgIHJldmVhbE9yZGVyLAogICAgICAgICAgICAgIHJlbmRlckxhbmVzMiwKICAgICAgICAgICAgICB0YWlsTW9kZQogICAgICAgICAgICApOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImJhY2t3YXJkcyI6CiAgICAgICAgICAgIHJlbmRlckxhbmVzMiA9IG51bGw7CiAgICAgICAgICAgIHJldmVhbE9yZGVyID0gd29ya0luUHJvZ3Jlc3MyLmNoaWxkOwogICAgICAgICAgICBmb3IgKHdvcmtJblByb2dyZXNzMi5jaGlsZCA9IG51bGw7IG51bGwgIT09IHJldmVhbE9yZGVyOyApIHsKICAgICAgICAgICAgICBjdXJyZW50MiA9IHJldmVhbE9yZGVyLmFsdGVybmF0ZTsKICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gY3VycmVudDIgJiYgbnVsbCA9PT0gZmluZEZpcnN0U3VzcGVuZGVkKGN1cnJlbnQyKSkgewogICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLmNoaWxkID0gcmV2ZWFsT3JkZXI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY3VycmVudDIgPSByZXZlYWxPcmRlci5zaWJsaW5nOwogICAgICAgICAgICAgIHJldmVhbE9yZGVyLnNpYmxpbmcgPSByZW5kZXJMYW5lczI7CiAgICAgICAgICAgICAgcmVuZGVyTGFuZXMyID0gcmV2ZWFsT3JkZXI7CiAgICAgICAgICAgICAgcmV2ZWFsT3JkZXIgPSBjdXJyZW50MjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpbml0U3VzcGVuc2VMaXN0UmVuZGVyU3RhdGUoCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICAgIHRydWUsCiAgICAgICAgICAgICAgcmVuZGVyTGFuZXMyLAogICAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgICAgdGFpbE1vZGUKICAgICAgICAgICAgKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJ0b2dldGhlciI6CiAgICAgICAgICAgIGluaXRTdXNwZW5zZUxpc3RSZW5kZXJTdGF0ZSh3b3JrSW5Qcm9ncmVzczIsIGZhbHNlLCBudWxsLCBudWxsLCB2b2lkIDApOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHdvcmtJblByb2dyZXNzMi5jaGlsZDsKICAgICAgfQogICAgICBmdW5jdGlvbiBiYWlsb3V0T25BbHJlYWR5RmluaXNoZWRXb3JrKGN1cnJlbnQyLCB3b3JrSW5Qcm9ncmVzczIsIHJlbmRlckxhbmVzMikgewogICAgICAgIG51bGwgIT09IGN1cnJlbnQyICYmICh3b3JrSW5Qcm9ncmVzczIuZGVwZW5kZW5jaWVzID0gY3VycmVudDIuZGVwZW5kZW5jaWVzKTsKICAgICAgICBwcm9maWxlclN0YXJ0VGltZSA9IC0xOwogICAgICAgIHdvcmtJblByb2dyZXNzUm9vdFNraXBwZWRMYW5lcyB8PSB3b3JrSW5Qcm9ncmVzczIubGFuZXM7CiAgICAgICAgaWYgKDAgPT09IChyZW5kZXJMYW5lczIgJiB3b3JrSW5Qcm9ncmVzczIuY2hpbGRMYW5lcykpCiAgICAgICAgICBpZiAobnVsbCAhPT0gY3VycmVudDIpIHsKICAgICAgICAgICAgaWYgKHByb3BhZ2F0ZVBhcmVudENvbnRleHRDaGFuZ2VzKAogICAgICAgICAgICAgIGN1cnJlbnQyLAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICByZW5kZXJMYW5lczIsCiAgICAgICAgICAgICAgZmFsc2UKICAgICAgICAgICAgKSwgMCA9PT0gKHJlbmRlckxhbmVzMiAmIHdvcmtJblByb2dyZXNzMi5jaGlsZExhbmVzKSkKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0gZWxzZSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAobnVsbCAhPT0gY3VycmVudDIgJiYgd29ya0luUHJvZ3Jlc3MyLmNoaWxkICE9PSBjdXJyZW50Mi5jaGlsZCkKICAgICAgICAgIHRocm93IEVycm9yKCJSZXN1bWluZyB3b3JrIG5vdCB5ZXQgaW1wbGVtZW50ZWQuIik7CiAgICAgICAgaWYgKG51bGwgIT09IHdvcmtJblByb2dyZXNzMi5jaGlsZCkgewogICAgICAgICAgY3VycmVudDIgPSB3b3JrSW5Qcm9ncmVzczIuY2hpbGQ7CiAgICAgICAgICByZW5kZXJMYW5lczIgPSBjcmVhdGVXb3JrSW5Qcm9ncmVzcyhjdXJyZW50MiwgY3VycmVudDIucGVuZGluZ1Byb3BzKTsKICAgICAgICAgIHdvcmtJblByb2dyZXNzMi5jaGlsZCA9IHJlbmRlckxhbmVzMjsKICAgICAgICAgIGZvciAocmVuZGVyTGFuZXMyLnJldHVybiA9IHdvcmtJblByb2dyZXNzMjsgbnVsbCAhPT0gY3VycmVudDIuc2libGluZzsgKQogICAgICAgICAgICBjdXJyZW50MiA9IGN1cnJlbnQyLnNpYmxpbmcsIHJlbmRlckxhbmVzMiA9IHJlbmRlckxhbmVzMi5zaWJsaW5nID0gY3JlYXRlV29ya0luUHJvZ3Jlc3MoY3VycmVudDIsIGN1cnJlbnQyLnBlbmRpbmdQcm9wcyksIHJlbmRlckxhbmVzMi5yZXR1cm4gPSB3b3JrSW5Qcm9ncmVzczI7CiAgICAgICAgICByZW5kZXJMYW5lczIuc2libGluZyA9IG51bGw7CiAgICAgICAgfQogICAgICAgIHJldHVybiB3b3JrSW5Qcm9ncmVzczIuY2hpbGQ7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY2hlY2tTY2hlZHVsZWRVcGRhdGVPckNvbnRleHQoY3VycmVudDIsIHJlbmRlckxhbmVzMikgewogICAgICAgIGlmICgwICE9PSAoY3VycmVudDIubGFuZXMgJiByZW5kZXJMYW5lczIpKSByZXR1cm4gdHJ1ZTsKICAgICAgICBjdXJyZW50MiA9IGN1cnJlbnQyLmRlcGVuZGVuY2llczsKICAgICAgICByZXR1cm4gbnVsbCAhPT0gY3VycmVudDIgJiYgY2hlY2tJZkNvbnRleHRDaGFuZ2VkKGN1cnJlbnQyKSA/IHRydWUgOiBmYWxzZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBhdHRlbXB0RWFybHlCYWlsb3V0SWZOb1NjaGVkdWxlZFVwZGF0ZShjdXJyZW50Miwgd29ya0luUHJvZ3Jlc3MyLCByZW5kZXJMYW5lczIpIHsKICAgICAgICBzd2l0Y2ggKHdvcmtJblByb2dyZXNzMi50YWcpIHsKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcHVzaEhvc3RDb250YWluZXIoCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMi5zdGF0ZU5vZGUuY29udGFpbmVySW5mbwogICAgICAgICAgICApOwogICAgICAgICAgICBwdXNoUHJvdmlkZXIoCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICAgIENhY2hlQ29udGV4dCwKICAgICAgICAgICAgICBjdXJyZW50Mi5tZW1vaXplZFN0YXRlLmNhY2hlCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHJlc2V0SHlkcmF0aW9uU3RhdGUoKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBwdXNoSG9zdENvbnRleHQod29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHB1c2hIb3N0Q29udGFpbmVyKAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIuc3RhdGVOb2RlLmNvbnRhaW5lckluZm8KICAgICAgICAgICAgKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBwdXNoUHJvdmlkZXIoCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMi50eXBlLAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFByb3BzLnZhbHVlCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgMCAhPT0gKHJlbmRlckxhbmVzMiAmIHdvcmtJblByb2dyZXNzMi5jaGlsZExhbmVzKSAmJiAod29ya0luUHJvZ3Jlc3MyLmZsYWdzIHw9IDQpOwogICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgfD0gMjA0ODsKICAgICAgICAgICAgdmFyIHN0YXRlTm9kZSA9IHdvcmtJblByb2dyZXNzMi5zdGF0ZU5vZGU7CiAgICAgICAgICAgIHN0YXRlTm9kZS5lZmZlY3REdXJhdGlvbiA9IC0wOwogICAgICAgICAgICBzdGF0ZU5vZGUucGFzc2l2ZUVmZmVjdER1cmF0aW9uID0gLTA7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgc3RhdGVOb2RlID0gd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkU3RhdGU7CiAgICAgICAgICAgIGlmIChudWxsICE9PSBzdGF0ZU5vZGUpIHsKICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gc3RhdGVOb2RlLmRlaHlkcmF0ZWQpCiAgICAgICAgICAgICAgICByZXR1cm4gcHVzaFByaW1hcnlUcmVlU3VzcGVuc2VIYW5kbGVyKHdvcmtJblByb2dyZXNzMiksIHdvcmtJblByb2dyZXNzMi5mbGFncyB8PSAxMjgsIG51bGw7CiAgICAgICAgICAgICAgaWYgKDAgIT09IChyZW5kZXJMYW5lczIgJiB3b3JrSW5Qcm9ncmVzczIuY2hpbGQuY2hpbGRMYW5lcykpCiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlU3VzcGVuc2VDb21wb25lbnQoCiAgICAgICAgICAgICAgICAgIGN1cnJlbnQyLAogICAgICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICAgICAgICAgIHJlbmRlckxhbmVzMgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICBwdXNoUHJpbWFyeVRyZWVTdXNwZW5zZUhhbmRsZXIod29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICAgICAgICBjdXJyZW50MiA9IGJhaWxvdXRPbkFscmVhZHlGaW5pc2hlZFdvcmsoCiAgICAgICAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICAgIHJlbmRlckxhbmVzMgogICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT09IGN1cnJlbnQyID8gY3VycmVudDIuc2libGluZyA6IG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcHVzaFByaW1hcnlUcmVlU3VzcGVuc2VIYW5kbGVyKHdvcmtJblByb2dyZXNzMik7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgdmFyIGRpZFN1c3BlbmRCZWZvcmUgPSAwICE9PSAoY3VycmVudDIuZmxhZ3MgJiAxMjgpOwogICAgICAgICAgICBzdGF0ZU5vZGUgPSAwICE9PSAocmVuZGVyTGFuZXMyICYgd29ya0luUHJvZ3Jlc3MyLmNoaWxkTGFuZXMpOwogICAgICAgICAgICBzdGF0ZU5vZGUgfHwgKHByb3BhZ2F0ZVBhcmVudENvbnRleHRDaGFuZ2VzKAogICAgICAgICAgICAgIGN1cnJlbnQyLAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICByZW5kZXJMYW5lczIsCiAgICAgICAgICAgICAgZmFsc2UKICAgICAgICAgICAgKSwgc3RhdGVOb2RlID0gMCAhPT0gKHJlbmRlckxhbmVzMiAmIHdvcmtJblByb2dyZXNzMi5jaGlsZExhbmVzKSk7CiAgICAgICAgICAgIGlmIChkaWRTdXNwZW5kQmVmb3JlKSB7CiAgICAgICAgICAgICAgaWYgKHN0YXRlTm9kZSkKICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVTdXNwZW5zZUxpc3RDb21wb25lbnQoCiAgICAgICAgICAgICAgICAgIGN1cnJlbnQyLAogICAgICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICAgICAgICAgIHJlbmRlckxhbmVzMgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgfD0gMTI4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGRpZFN1c3BlbmRCZWZvcmUgPSB3b3JrSW5Qcm9ncmVzczIubWVtb2l6ZWRTdGF0ZTsKICAgICAgICAgICAgbnVsbCAhPT0gZGlkU3VzcGVuZEJlZm9yZSAmJiAoZGlkU3VzcGVuZEJlZm9yZS5yZW5kZXJpbmcgPSBudWxsLCBkaWRTdXNwZW5kQmVmb3JlLnRhaWwgPSBudWxsLCBkaWRTdXNwZW5kQmVmb3JlLmxhc3RFZmZlY3QgPSBudWxsKTsKICAgICAgICAgICAgcHVzaCgKICAgICAgICAgICAgICBzdXNwZW5zZVN0YWNrQ3Vyc29yLAogICAgICAgICAgICAgIHN1c3BlbnNlU3RhY2tDdXJzb3IuY3VycmVudCwKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgaWYgKHN0YXRlTm9kZSkgYnJlYWs7CiAgICAgICAgICAgIGVsc2UgcmV0dXJuIG51bGw7CiAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgcmV0dXJuIHdvcmtJblByb2dyZXNzMi5sYW5lcyA9IDAsIHVwZGF0ZU9mZnNjcmVlbkNvbXBvbmVudChjdXJyZW50Miwgd29ya0luUHJvZ3Jlc3MyLCByZW5kZXJMYW5lczIpOwogICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgcHVzaFByb3ZpZGVyKAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICBDYWNoZUNvbnRleHQsCiAgICAgICAgICAgICAgY3VycmVudDIubWVtb2l6ZWRTdGF0ZS5jYWNoZQogICAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYmFpbG91dE9uQWxyZWFkeUZpbmlzaGVkV29yayhjdXJyZW50Miwgd29ya0luUHJvZ3Jlc3MyLCByZW5kZXJMYW5lczIpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGJlZ2luV29yayhjdXJyZW50Miwgd29ya0luUHJvZ3Jlc3MyLCByZW5kZXJMYW5lczIpIHsKICAgICAgICBpZiAod29ya0luUHJvZ3Jlc3MyLl9kZWJ1Z05lZWRzUmVtb3VudCAmJiBudWxsICE9PSBjdXJyZW50MikgewogICAgICAgICAgcmVuZGVyTGFuZXMyID0gY3JlYXRlRmliZXJGcm9tVHlwZUFuZFByb3BzKAogICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIudHlwZSwKICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLmtleSwKICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLnBlbmRpbmdQcm9wcywKICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLl9kZWJ1Z093bmVyIHx8IG51bGwsCiAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMi5tb2RlLAogICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIubGFuZXMKICAgICAgICAgICk7CiAgICAgICAgICByZW5kZXJMYW5lczIuX2RlYnVnU3RhY2sgPSB3b3JrSW5Qcm9ncmVzczIuX2RlYnVnU3RhY2s7CiAgICAgICAgICByZW5kZXJMYW5lczIuX2RlYnVnVGFzayA9IHdvcmtJblByb2dyZXNzMi5fZGVidWdUYXNrOwogICAgICAgICAgdmFyIHJldHVybkZpYmVyID0gd29ya0luUHJvZ3Jlc3MyLnJldHVybjsKICAgICAgICAgIGlmIChudWxsID09PSByZXR1cm5GaWJlcikgdGhyb3cgRXJyb3IoIkNhbm5vdCBzd2FwIHRoZSByb290IGZpYmVyLiIpOwogICAgICAgICAgY3VycmVudDIuYWx0ZXJuYXRlID0gbnVsbDsKICAgICAgICAgIHdvcmtJblByb2dyZXNzMi5hbHRlcm5hdGUgPSBudWxsOwogICAgICAgICAgcmVuZGVyTGFuZXMyLmluZGV4ID0gd29ya0luUHJvZ3Jlc3MyLmluZGV4OwogICAgICAgICAgcmVuZGVyTGFuZXMyLnNpYmxpbmcgPSB3b3JrSW5Qcm9ncmVzczIuc2libGluZzsKICAgICAgICAgIHJlbmRlckxhbmVzMi5yZXR1cm4gPSB3b3JrSW5Qcm9ncmVzczIucmV0dXJuOwogICAgICAgICAgcmVuZGVyTGFuZXMyLnJlZiA9IHdvcmtJblByb2dyZXNzMi5yZWY7CiAgICAgICAgICByZW5kZXJMYW5lczIuX2RlYnVnSW5mbyA9IHdvcmtJblByb2dyZXNzMi5fZGVidWdJbmZvOwogICAgICAgICAgaWYgKHdvcmtJblByb2dyZXNzMiA9PT0gcmV0dXJuRmliZXIuY2hpbGQpCiAgICAgICAgICAgIHJldHVybkZpYmVyLmNoaWxkID0gcmVuZGVyTGFuZXMyOwogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHZhciBwcmV2U2libGluZyA9IHJldHVybkZpYmVyLmNoaWxkOwogICAgICAgICAgICBpZiAobnVsbCA9PT0gcHJldlNpYmxpbmcpCiAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoIkV4cGVjdGVkIHBhcmVudCB0byBoYXZlIGEgY2hpbGQuIik7CiAgICAgICAgICAgIGZvciAoOyBwcmV2U2libGluZy5zaWJsaW5nICE9PSB3b3JrSW5Qcm9ncmVzczI7ICkKICAgICAgICAgICAgICBpZiAocHJldlNpYmxpbmcgPSBwcmV2U2libGluZy5zaWJsaW5nLCBudWxsID09PSBwcmV2U2libGluZykKICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCJFeHBlY3RlZCB0byBmaW5kIHRoZSBwcmV2aW91cyBzaWJsaW5nLiIpOwogICAgICAgICAgICBwcmV2U2libGluZy5zaWJsaW5nID0gcmVuZGVyTGFuZXMyOwogICAgICAgICAgfQogICAgICAgICAgd29ya0luUHJvZ3Jlc3MyID0gcmV0dXJuRmliZXIuZGVsZXRpb25zOwogICAgICAgICAgbnVsbCA9PT0gd29ya0luUHJvZ3Jlc3MyID8gKHJldHVybkZpYmVyLmRlbGV0aW9ucyA9IFtjdXJyZW50Ml0sIHJldHVybkZpYmVyLmZsYWdzIHw9IDE2KSA6IHdvcmtJblByb2dyZXNzMi5wdXNoKGN1cnJlbnQyKTsKICAgICAgICAgIHJlbmRlckxhbmVzMi5mbGFncyB8PSAyOwogICAgICAgICAgcmV0dXJuIHJlbmRlckxhbmVzMjsKICAgICAgICB9CiAgICAgICAgaWYgKG51bGwgIT09IGN1cnJlbnQyKQogICAgICAgICAgaWYgKGN1cnJlbnQyLm1lbW9pemVkUHJvcHMgIT09IHdvcmtJblByb2dyZXNzMi5wZW5kaW5nUHJvcHMgfHwgd29ya0luUHJvZ3Jlc3MyLnR5cGUgIT09IGN1cnJlbnQyLnR5cGUpCiAgICAgICAgICAgIGRpZFJlY2VpdmVVcGRhdGUgPSB0cnVlOwogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGlmICghY2hlY2tTY2hlZHVsZWRVcGRhdGVPckNvbnRleHQoY3VycmVudDIsIHJlbmRlckxhbmVzMikgJiYgMCA9PT0gKHdvcmtJblByb2dyZXNzMi5mbGFncyAmIDEyOCkpCiAgICAgICAgICAgICAgcmV0dXJuIGRpZFJlY2VpdmVVcGRhdGUgPSBmYWxzZSwgYXR0ZW1wdEVhcmx5QmFpbG91dElmTm9TY2hlZHVsZWRVcGRhdGUoCiAgICAgICAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICAgIHJlbmRlckxhbmVzMgogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIGRpZFJlY2VpdmVVcGRhdGUgPSAwICE9PSAoY3VycmVudDIuZmxhZ3MgJiAxMzEwNzIpID8gdHJ1ZSA6IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgZGlkUmVjZWl2ZVVwZGF0ZSA9IGZhbHNlOwogICAgICAgICAgaWYgKHJldHVybkZpYmVyID0gaXNIeWRyYXRpbmcpCiAgICAgICAgICAgIHdhcm5JZk5vdEh5ZHJhdGluZygpLCByZXR1cm5GaWJlciA9IDAgIT09ICh3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgJiAxMDQ4NTc2KTsKICAgICAgICAgIHJldHVybkZpYmVyICYmIChyZXR1cm5GaWJlciA9IHdvcmtJblByb2dyZXNzMi5pbmRleCwgd2FybklmTm90SHlkcmF0aW5nKCksIHB1c2hUcmVlSWQod29ya0luUHJvZ3Jlc3MyLCB0cmVlRm9ya0NvdW50LCByZXR1cm5GaWJlcikpOwogICAgICAgIH0KICAgICAgICB3b3JrSW5Qcm9ncmVzczIubGFuZXMgPSAwOwogICAgICAgIHN3aXRjaCAod29ya0luUHJvZ3Jlc3MyLnRhZykgewogICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgYTogaWYgKHJldHVybkZpYmVyID0gd29ya0luUHJvZ3Jlc3MyLnBlbmRpbmdQcm9wcywgY3VycmVudDIgPSBjYWxsTGF6eUluaXRJbkRFVih3b3JrSW5Qcm9ncmVzczIuZWxlbWVudFR5cGUpLCB3b3JrSW5Qcm9ncmVzczIudHlwZSA9IGN1cnJlbnQyLCAiZnVuY3Rpb24iID09PSB0eXBlb2YgY3VycmVudDIpCiAgICAgICAgICAgICAgc2hvdWxkQ29uc3RydWN0KGN1cnJlbnQyKSA/IChyZXR1cm5GaWJlciA9IHJlc29sdmVDbGFzc0NvbXBvbmVudFByb3BzKAogICAgICAgICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICAgICAgICByZXR1cm5GaWJlcgogICAgICAgICAgICAgICksIHdvcmtJblByb2dyZXNzMi50YWcgPSAxLCB3b3JrSW5Qcm9ncmVzczIudHlwZSA9IGN1cnJlbnQyID0gcmVzb2x2ZUZ1bmN0aW9uRm9ySG90UmVsb2FkaW5nKGN1cnJlbnQyKSwgd29ya0luUHJvZ3Jlc3MyID0gdXBkYXRlQ2xhc3NDb21wb25lbnQoCiAgICAgICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICAgICAgICByZXR1cm5GaWJlciwKICAgICAgICAgICAgICAgIHJlbmRlckxhbmVzMgogICAgICAgICAgICAgICkpIDogKHdvcmtJblByb2dyZXNzMi50YWcgPSAwLCB2YWxpZGF0ZUZ1bmN0aW9uQ29tcG9uZW50SW5EZXYod29ya0luUHJvZ3Jlc3MyLCBjdXJyZW50MiksIHdvcmtJblByb2dyZXNzMi50eXBlID0gY3VycmVudDIgPSByZXNvbHZlRnVuY3Rpb25Gb3JIb3RSZWxvYWRpbmcoY3VycmVudDIpLCB3b3JrSW5Qcm9ncmVzczIgPSB1cGRhdGVGdW5jdGlvbkNvbXBvbmVudCgKICAgICAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgICAgICAgIHJldHVybkZpYmVyLAogICAgICAgICAgICAgICAgcmVuZGVyTGFuZXMyCiAgICAgICAgICAgICAgKSk7CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGN1cnJlbnQyICYmIG51bGwgIT09IGN1cnJlbnQyKSB7CiAgICAgICAgICAgICAgICBpZiAocHJldlNpYmxpbmcgPSBjdXJyZW50Mi4kJHR5cGVvZiwgcHJldlNpYmxpbmcgPT09IFJFQUNUX0ZPUldBUkRfUkVGX1RZUEUpIHsKICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLnRhZyA9IDExOwogICAgICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIudHlwZSA9IGN1cnJlbnQyID0gcmVzb2x2ZUZvcndhcmRSZWZGb3JIb3RSZWxvYWRpbmcoY3VycmVudDIpOwogICAgICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIgPSB1cGRhdGVGb3J3YXJkUmVmKAogICAgICAgICAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICAgICAgICAgIGN1cnJlbnQyLAogICAgICAgICAgICAgICAgICAgIHJldHVybkZpYmVyLAogICAgICAgICAgICAgICAgICAgIHJlbmRlckxhbmVzMgogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcmV2U2libGluZyA9PT0gUkVBQ1RfTUVNT19UWVBFKSB7CiAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMi50YWcgPSAxNDsKICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyID0gdXBkYXRlTWVtb0NvbXBvbmVudCgKICAgICAgICAgICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgICAgICAgICAgICByZXR1cm5GaWJlciwKICAgICAgICAgICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyID0gIiI7CiAgICAgICAgICAgICAgbnVsbCAhPT0gY3VycmVudDIgJiYgIm9iamVjdCIgPT09IHR5cGVvZiBjdXJyZW50MiAmJiBjdXJyZW50Mi4kJHR5cGVvZiA9PT0gUkVBQ1RfTEFaWV9UWVBFICYmICh3b3JrSW5Qcm9ncmVzczIgPSAiIERpZCB5b3Ugd3JhcCBhIGNvbXBvbmVudCBpbiBSZWFjdC5sYXp5KCkgbW9yZSB0aGFuIG9uY2U/Iik7CiAgICAgICAgICAgICAgY3VycmVudDIgPSBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUoY3VycmVudDIpIHx8IGN1cnJlbnQyOwogICAgICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAgICAgIkVsZW1lbnQgdHlwZSBpcyBpbnZhbGlkLiBSZWNlaXZlZCBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0bzogIiArIGN1cnJlbnQyICsgIi4gTGF6eSBlbGVtZW50IHR5cGUgbXVzdCByZXNvbHZlIHRvIGEgY2xhc3Mgb3IgZnVuY3Rpb24uIiArIHdvcmtJblByb2dyZXNzMgogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHdvcmtJblByb2dyZXNzMjsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUZ1bmN0aW9uQ29tcG9uZW50KAogICAgICAgICAgICAgIGN1cnJlbnQyLAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIudHlwZSwKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIucGVuZGluZ1Byb3BzLAogICAgICAgICAgICAgIHJlbmRlckxhbmVzMgogICAgICAgICAgICApOwogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICByZXR1cm4gcmV0dXJuRmliZXIgPSB3b3JrSW5Qcm9ncmVzczIudHlwZSwgcHJldlNpYmxpbmcgPSByZXNvbHZlQ2xhc3NDb21wb25lbnRQcm9wcygKICAgICAgICAgICAgICByZXR1cm5GaWJlciwKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIucGVuZGluZ1Byb3BzCiAgICAgICAgICAgICksIHVwZGF0ZUNsYXNzQ29tcG9uZW50KAogICAgICAgICAgICAgIGN1cnJlbnQyLAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICByZXR1cm5GaWJlciwKICAgICAgICAgICAgICBwcmV2U2libGluZywKICAgICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICAgKTsKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgYTogewogICAgICAgICAgICAgIHB1c2hIb3N0Q29udGFpbmVyKAogICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLnN0YXRlTm9kZS5jb250YWluZXJJbmZvCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gY3VycmVudDIpCiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICAgICAgICAgIlNob3VsZCBoYXZlIGEgY3VycmVudCBmaWJlci4gVGhpcyBpcyBhIGJ1ZyBpbiBSZWFjdC4iCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIHJldHVybkZpYmVyID0gd29ya0luUHJvZ3Jlc3MyLnBlbmRpbmdQcm9wczsKICAgICAgICAgICAgICB2YXIgcHJldlN0YXRlID0gd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkU3RhdGU7CiAgICAgICAgICAgICAgcHJldlNpYmxpbmcgPSBwcmV2U3RhdGUuZWxlbWVudDsKICAgICAgICAgICAgICBjbG9uZVVwZGF0ZVF1ZXVlKGN1cnJlbnQyLCB3b3JrSW5Qcm9ncmVzczIpOwogICAgICAgICAgICAgIHByb2Nlc3NVcGRhdGVRdWV1ZSh3b3JrSW5Qcm9ncmVzczIsIHJldHVybkZpYmVyLCBudWxsLCByZW5kZXJMYW5lczIpOwogICAgICAgICAgICAgIHZhciBuZXh0U3RhdGUgPSB3b3JrSW5Qcm9ncmVzczIubWVtb2l6ZWRTdGF0ZTsKICAgICAgICAgICAgICByZXR1cm5GaWJlciA9IG5leHRTdGF0ZS5jYWNoZTsKICAgICAgICAgICAgICBwdXNoUHJvdmlkZXIod29ya0luUHJvZ3Jlc3MyLCBDYWNoZUNvbnRleHQsIHJldHVybkZpYmVyKTsKICAgICAgICAgICAgICByZXR1cm5GaWJlciAhPT0gcHJldlN0YXRlLmNhY2hlICYmIHByb3BhZ2F0ZUNvbnRleHRDaGFuZ2VzKAogICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICAgICAgW0NhY2hlQ29udGV4dF0sCiAgICAgICAgICAgICAgICByZW5kZXJMYW5lczIsCiAgICAgICAgICAgICAgICB0cnVlCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICBzdXNwZW5kSWZVcGRhdGVSZWFkRnJvbUVudGFuZ2xlZEFzeW5jQWN0aW9uKCk7CiAgICAgICAgICAgICAgcmV0dXJuRmliZXIgPSBuZXh0U3RhdGUuZWxlbWVudDsKICAgICAgICAgICAgICBpZiAocHJldlN0YXRlLmlzRGVoeWRyYXRlZCkKICAgICAgICAgICAgICAgIGlmIChwcmV2U3RhdGUgPSB7CiAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IHJldHVybkZpYmVyLAogICAgICAgICAgICAgICAgICBpc0RlaHlkcmF0ZWQ6IGZhbHNlLAogICAgICAgICAgICAgICAgICBjYWNoZTogbmV4dFN0YXRlLmNhY2hlCiAgICAgICAgICAgICAgICB9LCB3b3JrSW5Qcm9ncmVzczIudXBkYXRlUXVldWUuYmFzZVN0YXRlID0gcHJldlN0YXRlLCB3b3JrSW5Qcm9ncmVzczIubWVtb2l6ZWRTdGF0ZSA9IHByZXZTdGF0ZSwgd29ya0luUHJvZ3Jlc3MyLmZsYWdzICYgMjU2KSB7CiAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiA9IG1vdW50SG9zdFJvb3RXaXRob3V0SHlkcmF0aW5nKAogICAgICAgICAgICAgICAgICAgIGN1cnJlbnQyLAogICAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICAgICAgICByZXR1cm5GaWJlciwKICAgICAgICAgICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmV0dXJuRmliZXIgIT09IHByZXZTaWJsaW5nKSB7CiAgICAgICAgICAgICAgICAgIHByZXZTaWJsaW5nID0gY3JlYXRlQ2FwdHVyZWRWYWx1ZUF0RmliZXIoCiAgICAgICAgICAgICAgICAgICAgRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAiVGhpcyByb290IHJlY2VpdmVkIGFuIGVhcmx5IHVwZGF0ZSwgYmVmb3JlIGFueXRoaW5nIHdhcyBhYmxlIGh5ZHJhdGUuIFN3aXRjaGVkIHRoZSBlbnRpcmUgcm9vdCB0byBjbGllbnQgcmVuZGVyaW5nLiIKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMgogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICBxdWV1ZUh5ZHJhdGlvbkVycm9yKHByZXZTaWJsaW5nKTsKICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyID0gbW91bnRIb3N0Um9vdFdpdGhvdXRIeWRyYXRpbmcoCiAgICAgICAgICAgICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICAgICAgICAgIHJldHVybkZpYmVyLAogICAgICAgICAgICAgICAgICAgIHJlbmRlckxhbmVzMgogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgY3VycmVudDIgPSB3b3JrSW5Qcm9ncmVzczIuc3RhdGVOb2RlLmNvbnRhaW5lckluZm87CiAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY3VycmVudDIubm9kZVR5cGUpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50MiA9IGN1cnJlbnQyLmJvZHk7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgY3VycmVudDIgPSAiSFRNTCIgPT09IGN1cnJlbnQyLm5vZGVOYW1lID8gY3VycmVudDIub3duZXJEb2N1bWVudC5ib2R5IDogY3VycmVudDI7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgbmV4dEh5ZHJhdGFibGVJbnN0YW5jZSA9IGdldE5leHRIeWRyYXRhYmxlKGN1cnJlbnQyLmZpcnN0Q2hpbGQpOwogICAgICAgICAgICAgICAgICBoeWRyYXRpb25QYXJlbnRGaWJlciA9IHdvcmtJblByb2dyZXNzMjsKICAgICAgICAgICAgICAgICAgaXNIeWRyYXRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICBoeWRyYXRpb25FcnJvcnMgPSBudWxsOwogICAgICAgICAgICAgICAgICBkaWRTdXNwZW5kT3JFcnJvckRFViA9IGZhbHNlOwogICAgICAgICAgICAgICAgICBoeWRyYXRpb25EaWZmUm9vdERFViA9IG51bGw7CiAgICAgICAgICAgICAgICAgIHJvb3RPclNpbmdsZXRvbkNvbnRleHQgPSB0cnVlOwogICAgICAgICAgICAgICAgICBjdXJyZW50MiA9IG1vdW50Q2hpbGRGaWJlcnMoCiAgICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuRmliZXIsCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyTGFuZXMyCiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIGZvciAod29ya0luUHJvZ3Jlc3MyLmNoaWxkID0gY3VycmVudDI7IGN1cnJlbnQyOyApCiAgICAgICAgICAgICAgICAgICAgY3VycmVudDIuZmxhZ3MgPSBjdXJyZW50Mi5mbGFncyAmIC0zIHwgNDA5NiwgY3VycmVudDIgPSBjdXJyZW50Mi5zaWJsaW5nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmVzZXRIeWRyYXRpb25TdGF0ZSgpOwogICAgICAgICAgICAgICAgaWYgKHJldHVybkZpYmVyID09PSBwcmV2U2libGluZykgewogICAgICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIgPSBiYWlsb3V0T25BbHJlYWR5RmluaXNoZWRXb3JrKAogICAgICAgICAgICAgICAgICAgIGN1cnJlbnQyLAogICAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJlY29uY2lsZUNoaWxkcmVuKAogICAgICAgICAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICAgICAgICByZXR1cm5GaWJlciwKICAgICAgICAgICAgICAgICAgcmVuZGVyTGFuZXMyCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIgPSB3b3JrSW5Qcm9ncmVzczIuY2hpbGQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHdvcmtJblByb2dyZXNzMjsKICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgIHJldHVybiBtYXJrUmVmKGN1cnJlbnQyLCB3b3JrSW5Qcm9ncmVzczIpLCBudWxsID09PSBjdXJyZW50MiA/IChjdXJyZW50MiA9IGdldFJlc291cmNlKAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMi50eXBlLAogICAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLnBlbmRpbmdQcm9wcywKICAgICAgICAgICAgICBudWxsCiAgICAgICAgICAgICkpID8gd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkU3RhdGUgPSBjdXJyZW50MiA6IGlzSHlkcmF0aW5nIHx8IChjdXJyZW50MiA9IHdvcmtJblByb2dyZXNzMi50eXBlLCByZW5kZXJMYW5lczIgPSB3b3JrSW5Qcm9ncmVzczIucGVuZGluZ1Byb3BzLCByZXR1cm5GaWJlciA9IHJlcXVpcmVkQ29udGV4dCgKICAgICAgICAgICAgICByb290SW5zdGFuY2VTdGFja0N1cnNvci5jdXJyZW50CiAgICAgICAgICAgICksIHJldHVybkZpYmVyID0gZ2V0T3duZXJEb2N1bWVudEZyb21Sb290Q29udGFpbmVyKAogICAgICAgICAgICAgIHJldHVybkZpYmVyCiAgICAgICAgICAgICkuY3JlYXRlRWxlbWVudChjdXJyZW50MiksIHJldHVybkZpYmVyW2ludGVybmFsSW5zdGFuY2VLZXldID0gd29ya0luUHJvZ3Jlc3MyLCByZXR1cm5GaWJlcltpbnRlcm5hbFByb3BzS2V5XSA9IHJlbmRlckxhbmVzMiwgc2V0SW5pdGlhbFByb3BlcnRpZXMocmV0dXJuRmliZXIsIGN1cnJlbnQyLCByZW5kZXJMYW5lczIpLCBtYXJrTm9kZUFzSG9pc3RhYmxlKHJldHVybkZpYmVyKSwgd29ya0luUHJvZ3Jlc3MyLnN0YXRlTm9kZSA9IHJldHVybkZpYmVyKSA6IHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlID0gZ2V0UmVzb3VyY2UoCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLnR5cGUsCiAgICAgICAgICAgICAgY3VycmVudDIubWVtb2l6ZWRQcm9wcywKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIucGVuZGluZ1Byb3BzLAogICAgICAgICAgICAgIGN1cnJlbnQyLm1lbW9pemVkU3RhdGUKICAgICAgICAgICAgKSwgbnVsbDsKICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgIHJldHVybiBwdXNoSG9zdENvbnRleHQod29ya0luUHJvZ3Jlc3MyKSwgbnVsbCA9PT0gY3VycmVudDIgJiYgaXNIeWRyYXRpbmcgJiYgKHJldHVybkZpYmVyID0gcmVxdWlyZWRDb250ZXh0KHJvb3RJbnN0YW5jZVN0YWNrQ3Vyc29yLmN1cnJlbnQpLCBwcmV2U2libGluZyA9IGdldEhvc3RDb250ZXh0KCksIHJldHVybkZpYmVyID0gd29ya0luUHJvZ3Jlc3MyLnN0YXRlTm9kZSA9IHJlc29sdmVTaW5nbGV0b25JbnN0YW5jZSgKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIudHlwZSwKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIucGVuZGluZ1Byb3BzLAogICAgICAgICAgICAgIHJldHVybkZpYmVyLAogICAgICAgICAgICAgIHByZXZTaWJsaW5nLAogICAgICAgICAgICAgIGZhbHNlCiAgICAgICAgICAgICksIGRpZFN1c3BlbmRPckVycm9yREVWIHx8IChwcmV2U2libGluZyA9IGRpZmZIeWRyYXRlZFByb3BlcnRpZXMoCiAgICAgICAgICAgICAgcmV0dXJuRmliZXIsCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLnR5cGUsCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLnBlbmRpbmdQcm9wcywKICAgICAgICAgICAgICBwcmV2U2libGluZwogICAgICAgICAgICApLCBudWxsICE9PSBwcmV2U2libGluZyAmJiAoYnVpbGRIeWRyYXRpb25EaWZmTm9kZSh3b3JrSW5Qcm9ncmVzczIsIDApLnNlcnZlclByb3BzID0gcHJldlNpYmxpbmcpKSwgaHlkcmF0aW9uUGFyZW50RmliZXIgPSB3b3JrSW5Qcm9ncmVzczIsIHJvb3RPclNpbmdsZXRvbkNvbnRleHQgPSB0cnVlLCBwcmV2U2libGluZyA9IG5leHRIeWRyYXRhYmxlSW5zdGFuY2UsIGlzU2luZ2xldG9uU2NvcGUod29ya0luUHJvZ3Jlc3MyLnR5cGUpID8gKHByZXZpb3VzSHlkcmF0YWJsZU9uRW50ZXJpbmdTY29wZWRTaW5nbGV0b24gPSBwcmV2U2libGluZywgbmV4dEh5ZHJhdGFibGVJbnN0YW5jZSA9IGdldE5leHRIeWRyYXRhYmxlKAogICAgICAgICAgICAgIHJldHVybkZpYmVyLmZpcnN0Q2hpbGQKICAgICAgICAgICAgKSkgOiBuZXh0SHlkcmF0YWJsZUluc3RhbmNlID0gcHJldlNpYmxpbmcpLCByZWNvbmNpbGVDaGlsZHJlbigKICAgICAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLnBlbmRpbmdQcm9wcy5jaGlsZHJlbiwKICAgICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICAgKSwgbWFya1JlZihjdXJyZW50Miwgd29ya0luUHJvZ3Jlc3MyKSwgbnVsbCA9PT0gY3VycmVudDIgJiYgKHdvcmtJblByb2dyZXNzMi5mbGFncyB8PSA0MTk0MzA0KSwgd29ya0luUHJvZ3Jlc3MyLmNoaWxkOwogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICByZXR1cm4gbnVsbCA9PT0gY3VycmVudDIgJiYgaXNIeWRyYXRpbmcgJiYgKHByZXZTdGF0ZSA9IGdldEhvc3RDb250ZXh0KCksIHJldHVybkZpYmVyID0gdmFsaWRhdGVET01OZXN0aW5nKAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMi50eXBlLAogICAgICAgICAgICAgIHByZXZTdGF0ZS5hbmNlc3RvckluZm8KICAgICAgICAgICAgKSwgcHJldlNpYmxpbmcgPSBuZXh0SHlkcmF0YWJsZUluc3RhbmNlLCAobmV4dFN0YXRlID0gIXByZXZTaWJsaW5nKSB8fCAobmV4dFN0YXRlID0gY2FuSHlkcmF0ZUluc3RhbmNlKAogICAgICAgICAgICAgIHByZXZTaWJsaW5nLAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMi50eXBlLAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMi5wZW5kaW5nUHJvcHMsCiAgICAgICAgICAgICAgcm9vdE9yU2luZ2xldG9uQ29udGV4dAogICAgICAgICAgICApLCBudWxsICE9PSBuZXh0U3RhdGUgPyAod29ya0luUHJvZ3Jlc3MyLnN0YXRlTm9kZSA9IG5leHRTdGF0ZSwgZGlkU3VzcGVuZE9yRXJyb3JERVYgfHwgKHByZXZTdGF0ZSA9IGRpZmZIeWRyYXRlZFByb3BlcnRpZXMoCiAgICAgICAgICAgICAgbmV4dFN0YXRlLAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMi50eXBlLAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMi5wZW5kaW5nUHJvcHMsCiAgICAgICAgICAgICAgcHJldlN0YXRlCiAgICAgICAgICAgICksIG51bGwgIT09IHByZXZTdGF0ZSAmJiAoYnVpbGRIeWRyYXRpb25EaWZmTm9kZSh3b3JrSW5Qcm9ncmVzczIsIDApLnNlcnZlclByb3BzID0gcHJldlN0YXRlKSksIGh5ZHJhdGlvblBhcmVudEZpYmVyID0gd29ya0luUHJvZ3Jlc3MyLCBuZXh0SHlkcmF0YWJsZUluc3RhbmNlID0gZ2V0TmV4dEh5ZHJhdGFibGUoCiAgICAgICAgICAgICAgbmV4dFN0YXRlLmZpcnN0Q2hpbGQKICAgICAgICAgICAgKSwgcm9vdE9yU2luZ2xldG9uQ29udGV4dCA9IGZhbHNlLCBwcmV2U3RhdGUgPSB0cnVlKSA6IHByZXZTdGF0ZSA9IGZhbHNlLCBuZXh0U3RhdGUgPSAhcHJldlN0YXRlKSwgbmV4dFN0YXRlICYmIChyZXR1cm5GaWJlciAmJiB3YXJuTm9uSHlkcmF0ZWRJbnN0YW5jZSh3b3JrSW5Qcm9ncmVzczIsIHByZXZTaWJsaW5nKSwgdGhyb3dPbkh5ZHJhdGlvbk1pc21hdGNoKHdvcmtJblByb2dyZXNzMikpKSwgcHVzaEhvc3RDb250ZXh0KHdvcmtJblByb2dyZXNzMiksIHByZXZTaWJsaW5nID0gd29ya0luUHJvZ3Jlc3MyLnR5cGUsIHByZXZTdGF0ZSA9IHdvcmtJblByb2dyZXNzMi5wZW5kaW5nUHJvcHMsIG5leHRTdGF0ZSA9IG51bGwgIT09IGN1cnJlbnQyID8gY3VycmVudDIubWVtb2l6ZWRQcm9wcyA6IG51bGwsIHJldHVybkZpYmVyID0gcHJldlN0YXRlLmNoaWxkcmVuLCBzaG91bGRTZXRUZXh0Q29udGVudChwcmV2U2libGluZywgcHJldlN0YXRlKSA/IHJldHVybkZpYmVyID0gbnVsbCA6IG51bGwgIT09IG5leHRTdGF0ZSAmJiBzaG91bGRTZXRUZXh0Q29udGVudChwcmV2U2libGluZywgbmV4dFN0YXRlKSAmJiAod29ya0luUHJvZ3Jlc3MyLmZsYWdzIHw9IDMyKSwgbnVsbCAhPT0gd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkU3RhdGUgJiYgKHByZXZTaWJsaW5nID0gcmVuZGVyV2l0aEhvb2tzKAogICAgICAgICAgICAgIGN1cnJlbnQyLAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICBUcmFuc2l0aW9uQXdhcmVIb3N0Q29tcG9uZW50LAogICAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICAgKSwgSG9zdFRyYW5zaXRpb25Db250ZXh0Ll9jdXJyZW50VmFsdWUgPSBwcmV2U2libGluZyksIG1hcmtSZWYoY3VycmVudDIsIHdvcmtJblByb2dyZXNzMiksIHJlY29uY2lsZUNoaWxkcmVuKAogICAgICAgICAgICAgIGN1cnJlbnQyLAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICByZXR1cm5GaWJlciwKICAgICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICAgKSwgd29ya0luUHJvZ3Jlc3MyLmNoaWxkOwogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICByZXR1cm4gbnVsbCA9PT0gY3VycmVudDIgJiYgaXNIeWRyYXRpbmcgJiYgKGN1cnJlbnQyID0gd29ya0luUHJvZ3Jlc3MyLnBlbmRpbmdQcm9wcywgcmVuZGVyTGFuZXMyID0gZ2V0SG9zdENvbnRleHQoKSwgcmV0dXJuRmliZXIgPSByZW5kZXJMYW5lczIuYW5jZXN0b3JJbmZvLmN1cnJlbnQsIGN1cnJlbnQyID0gbnVsbCAhPSByZXR1cm5GaWJlciA/IHZhbGlkYXRlVGV4dE5lc3RpbmcoCiAgICAgICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICAgICAgcmV0dXJuRmliZXIudGFnLAogICAgICAgICAgICAgIHJlbmRlckxhbmVzMi5hbmNlc3RvckluZm8uaW1wbGljaXRSb290U2NvcGUKICAgICAgICAgICAgKSA6IHRydWUsIHJlbmRlckxhbmVzMiA9IG5leHRIeWRyYXRhYmxlSW5zdGFuY2UsIChyZXR1cm5GaWJlciA9ICFyZW5kZXJMYW5lczIpIHx8IChyZXR1cm5GaWJlciA9IGNhbkh5ZHJhdGVUZXh0SW5zdGFuY2UoCiAgICAgICAgICAgICAgcmVuZGVyTGFuZXMyLAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMi5wZW5kaW5nUHJvcHMsCiAgICAgICAgICAgICAgcm9vdE9yU2luZ2xldG9uQ29udGV4dAogICAgICAgICAgICApLCBudWxsICE9PSByZXR1cm5GaWJlciA/ICh3b3JrSW5Qcm9ncmVzczIuc3RhdGVOb2RlID0gcmV0dXJuRmliZXIsIGh5ZHJhdGlvblBhcmVudEZpYmVyID0gd29ya0luUHJvZ3Jlc3MyLCBuZXh0SHlkcmF0YWJsZUluc3RhbmNlID0gbnVsbCwgcmV0dXJuRmliZXIgPSB0cnVlKSA6IHJldHVybkZpYmVyID0gZmFsc2UsIHJldHVybkZpYmVyID0gIXJldHVybkZpYmVyKSwgcmV0dXJuRmliZXIgJiYgKGN1cnJlbnQyICYmIHdhcm5Ob25IeWRyYXRlZEluc3RhbmNlKHdvcmtJblByb2dyZXNzMiwgcmVuZGVyTGFuZXMyKSwgdGhyb3dPbkh5ZHJhdGlvbk1pc21hdGNoKHdvcmtJblByb2dyZXNzMikpKSwgbnVsbDsKICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgIHJldHVybiB1cGRhdGVTdXNwZW5zZUNvbXBvbmVudChjdXJyZW50Miwgd29ya0luUHJvZ3Jlc3MyLCByZW5kZXJMYW5lczIpOwogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICByZXR1cm4gcHVzaEhvc3RDb250YWluZXIoCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMi5zdGF0ZU5vZGUuY29udGFpbmVySW5mbwogICAgICAgICAgICApLCByZXR1cm5GaWJlciA9IHdvcmtJblByb2dyZXNzMi5wZW5kaW5nUHJvcHMsIG51bGwgPT09IGN1cnJlbnQyID8gd29ya0luUHJvZ3Jlc3MyLmNoaWxkID0gcmVjb25jaWxlQ2hpbGRGaWJlcnMoCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgICAgcmV0dXJuRmliZXIsCiAgICAgICAgICAgICAgcmVuZGVyTGFuZXMyCiAgICAgICAgICAgICkgOiByZWNvbmNpbGVDaGlsZHJlbigKICAgICAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICAgICAgcmV0dXJuRmliZXIsCiAgICAgICAgICAgICAgcmVuZGVyTGFuZXMyCiAgICAgICAgICAgICksIHdvcmtJblByb2dyZXNzMi5jaGlsZDsKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIHJldHVybiB1cGRhdGVGb3J3YXJkUmVmKAogICAgICAgICAgICAgIGN1cnJlbnQyLAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIudHlwZSwKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIucGVuZGluZ1Byb3BzLAogICAgICAgICAgICAgIHJlbmRlckxhbmVzMgogICAgICAgICAgICApOwogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICByZXR1cm4gcmVjb25jaWxlQ2hpbGRyZW4oCiAgICAgICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMi5wZW5kaW5nUHJvcHMsCiAgICAgICAgICAgICAgcmVuZGVyTGFuZXMyCiAgICAgICAgICAgICksIHdvcmtJblByb2dyZXNzMi5jaGlsZDsKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgcmV0dXJuIHJlY29uY2lsZUNoaWxkcmVuKAogICAgICAgICAgICAgIGN1cnJlbnQyLAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIucGVuZGluZ1Byb3BzLmNoaWxkcmVuLAogICAgICAgICAgICAgIHJlbmRlckxhbmVzMgogICAgICAgICAgICApLCB3b3JrSW5Qcm9ncmVzczIuY2hpbGQ7CiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICByZXR1cm4gd29ya0luUHJvZ3Jlc3MyLmZsYWdzIHw9IDQsIHdvcmtJblByb2dyZXNzMi5mbGFncyB8PSAyMDQ4LCByZXR1cm5GaWJlciA9IHdvcmtJblByb2dyZXNzMi5zdGF0ZU5vZGUsIHJldHVybkZpYmVyLmVmZmVjdER1cmF0aW9uID0gLTAsIHJldHVybkZpYmVyLnBhc3NpdmVFZmZlY3REdXJhdGlvbiA9IC0wLCByZWNvbmNpbGVDaGlsZHJlbigKICAgICAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLnBlbmRpbmdQcm9wcy5jaGlsZHJlbiwKICAgICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICAgKSwgd29ya0luUHJvZ3Jlc3MyLmNoaWxkOwogICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgcmV0dXJuIHJldHVybkZpYmVyID0gd29ya0luUHJvZ3Jlc3MyLnR5cGUsIHByZXZTaWJsaW5nID0gd29ya0luUHJvZ3Jlc3MyLnBlbmRpbmdQcm9wcywgcHJldlN0YXRlID0gcHJldlNpYmxpbmcudmFsdWUsICJ2YWx1ZSIgaW4gcHJldlNpYmxpbmcgfHwgaGFzV2FybmVkQWJvdXRVc2luZ05vVmFsdWVQcm9wT25Db250ZXh0UHJvdmlkZXIgfHwgKGhhc1dhcm5lZEFib3V0VXNpbmdOb1ZhbHVlUHJvcE9uQ29udGV4dFByb3ZpZGVyID0gdHJ1ZSwgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAiVGhlIGB2YWx1ZWAgcHJvcCBpcyByZXF1aXJlZCBmb3IgdGhlIGA8Q29udGV4dC5Qcm92aWRlcj5gLiBEaWQgeW91IG1pc3NwZWxsIGl0IG9yIGZvcmdldCB0byBwYXNzIGl0PyIKICAgICAgICAgICAgKSksIHB1c2hQcm92aWRlcih3b3JrSW5Qcm9ncmVzczIsIHJldHVybkZpYmVyLCBwcmV2U3RhdGUpLCByZWNvbmNpbGVDaGlsZHJlbigKICAgICAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICAgICAgcHJldlNpYmxpbmcuY2hpbGRyZW4sCiAgICAgICAgICAgICAgcmVuZGVyTGFuZXMyCiAgICAgICAgICAgICksIHdvcmtJblByb2dyZXNzMi5jaGlsZDsKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgcmV0dXJuIHByZXZTaWJsaW5nID0gd29ya0luUHJvZ3Jlc3MyLnR5cGUuX2NvbnRleHQsIHJldHVybkZpYmVyID0gd29ya0luUHJvZ3Jlc3MyLnBlbmRpbmdQcm9wcy5jaGlsZHJlbiwgImZ1bmN0aW9uIiAhPT0gdHlwZW9mIHJldHVybkZpYmVyICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgIkEgY29udGV4dCBjb25zdW1lciB3YXMgcmVuZGVyZWQgd2l0aCBtdWx0aXBsZSBjaGlsZHJlbiwgb3IgYSBjaGlsZCB0aGF0IGlzbid0IGEgZnVuY3Rpb24uIEEgY29udGV4dCBjb25zdW1lciBleHBlY3RzIGEgc2luZ2xlIGNoaWxkIHRoYXQgaXMgYSBmdW5jdGlvbi4gSWYgeW91IGRpZCBwYXNzIGEgZnVuY3Rpb24sIG1ha2Ugc3VyZSB0aGVyZSBpcyBubyB0cmFpbGluZyBvciBsZWFkaW5nIHdoaXRlc3BhY2UgYXJvdW5kIGl0LiIKICAgICAgICAgICAgKSwgcHJlcGFyZVRvUmVhZENvbnRleHQod29ya0luUHJvZ3Jlc3MyKSwgcHJldlNpYmxpbmcgPSByZWFkQ29udGV4dChwcmV2U2libGluZyksIG1hcmtDb21wb25lbnRSZW5kZXJTdGFydGVkKHdvcmtJblByb2dyZXNzMiksIHJldHVybkZpYmVyID0gY2FsbENvbXBvbmVudEluREVWKAogICAgICAgICAgICAgIHJldHVybkZpYmVyLAogICAgICAgICAgICAgIHByZXZTaWJsaW5nLAogICAgICAgICAgICAgIHZvaWQgMAogICAgICAgICAgICApLCBtYXJrQ29tcG9uZW50UmVuZGVyU3RvcHBlZCgpLCB3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgfD0gMSwgcmVjb25jaWxlQ2hpbGRyZW4oCiAgICAgICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICAgIHJldHVybkZpYmVyLAogICAgICAgICAgICAgIHJlbmRlckxhbmVzMgogICAgICAgICAgICApLCB3b3JrSW5Qcm9ncmVzczIuY2hpbGQ7CiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICByZXR1cm4gdXBkYXRlTWVtb0NvbXBvbmVudCgKICAgICAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLnR5cGUsCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLnBlbmRpbmdQcm9wcywKICAgICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICAgKTsKICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIHJldHVybiB1cGRhdGVTaW1wbGVNZW1vQ29tcG9uZW50KAogICAgICAgICAgICAgIGN1cnJlbnQyLAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIudHlwZSwKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIucGVuZGluZ1Byb3BzLAogICAgICAgICAgICAgIHJlbmRlckxhbmVzMgogICAgICAgICAgICApOwogICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZVN1c3BlbnNlTGlzdENvbXBvbmVudCgKICAgICAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICAgICAgcmVuZGVyTGFuZXMyCiAgICAgICAgICAgICk7CiAgICAgICAgICBjYXNlIDMxOgogICAgICAgICAgICByZXR1cm4gcmV0dXJuRmliZXIgPSB3b3JrSW5Qcm9ncmVzczIucGVuZGluZ1Byb3BzLCByZW5kZXJMYW5lczIgPSB3b3JrSW5Qcm9ncmVzczIubW9kZSwgcmV0dXJuRmliZXIgPSB7CiAgICAgICAgICAgICAgbW9kZTogcmV0dXJuRmliZXIubW9kZSwKICAgICAgICAgICAgICBjaGlsZHJlbjogcmV0dXJuRmliZXIuY2hpbGRyZW4KICAgICAgICAgICAgfSwgbnVsbCA9PT0gY3VycmVudDIgPyAoY3VycmVudDIgPSBtb3VudFdvcmtJblByb2dyZXNzT2Zmc2NyZWVuRmliZXIoCiAgICAgICAgICAgICAgcmV0dXJuRmliZXIsCiAgICAgICAgICAgICAgcmVuZGVyTGFuZXMyCiAgICAgICAgICAgICksIGN1cnJlbnQyLnJlZiA9IHdvcmtJblByb2dyZXNzMi5yZWYsIHdvcmtJblByb2dyZXNzMi5jaGlsZCA9IGN1cnJlbnQyLCBjdXJyZW50Mi5yZXR1cm4gPSB3b3JrSW5Qcm9ncmVzczIsIHdvcmtJblByb2dyZXNzMiA9IGN1cnJlbnQyKSA6IChjdXJyZW50MiA9IGNyZWF0ZVdvcmtJblByb2dyZXNzKGN1cnJlbnQyLmNoaWxkLCByZXR1cm5GaWJlciksIGN1cnJlbnQyLnJlZiA9IHdvcmtJblByb2dyZXNzMi5yZWYsIHdvcmtJblByb2dyZXNzMi5jaGlsZCA9IGN1cnJlbnQyLCBjdXJyZW50Mi5yZXR1cm4gPSB3b3JrSW5Qcm9ncmVzczIsIHdvcmtJblByb2dyZXNzMiA9IGN1cnJlbnQyKSwgd29ya0luUHJvZ3Jlc3MyOwogICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZU9mZnNjcmVlbkNvbXBvbmVudChjdXJyZW50Miwgd29ya0luUHJvZ3Jlc3MyLCByZW5kZXJMYW5lczIpOwogICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgcmV0dXJuIHByZXBhcmVUb1JlYWRDb250ZXh0KHdvcmtJblByb2dyZXNzMiksIHJldHVybkZpYmVyID0gcmVhZENvbnRleHQoQ2FjaGVDb250ZXh0KSwgbnVsbCA9PT0gY3VycmVudDIgPyAocHJldlNpYmxpbmcgPSBwZWVrQ2FjaGVGcm9tUG9vbCgpLCBudWxsID09PSBwcmV2U2libGluZyAmJiAocHJldlNpYmxpbmcgPSB3b3JrSW5Qcm9ncmVzc1Jvb3QsIHByZXZTdGF0ZSA9IGNyZWF0ZUNhY2hlKCksIHByZXZTaWJsaW5nLnBvb2xlZENhY2hlID0gcHJldlN0YXRlLCByZXRhaW5DYWNoZShwcmV2U3RhdGUpLCBudWxsICE9PSBwcmV2U3RhdGUgJiYgKHByZXZTaWJsaW5nLnBvb2xlZENhY2hlTGFuZXMgfD0gcmVuZGVyTGFuZXMyKSwgcHJldlNpYmxpbmcgPSBwcmV2U3RhdGUpLCB3b3JrSW5Qcm9ncmVzczIubWVtb2l6ZWRTdGF0ZSA9IHsKICAgICAgICAgICAgICBwYXJlbnQ6IHJldHVybkZpYmVyLAogICAgICAgICAgICAgIGNhY2hlOiBwcmV2U2libGluZwogICAgICAgICAgICB9LCBpbml0aWFsaXplVXBkYXRlUXVldWUod29ya0luUHJvZ3Jlc3MyKSwgcHVzaFByb3ZpZGVyKHdvcmtJblByb2dyZXNzMiwgQ2FjaGVDb250ZXh0LCBwcmV2U2libGluZykpIDogKDAgIT09IChjdXJyZW50Mi5sYW5lcyAmIHJlbmRlckxhbmVzMikgJiYgKGNsb25lVXBkYXRlUXVldWUoY3VycmVudDIsIHdvcmtJblByb2dyZXNzMiksIHByb2Nlc3NVcGRhdGVRdWV1ZSh3b3JrSW5Qcm9ncmVzczIsIG51bGwsIG51bGwsIHJlbmRlckxhbmVzMiksIHN1c3BlbmRJZlVwZGF0ZVJlYWRGcm9tRW50YW5nbGVkQXN5bmNBY3Rpb24oKSksIHByZXZTaWJsaW5nID0gY3VycmVudDIubWVtb2l6ZWRTdGF0ZSwgcHJldlN0YXRlID0gd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkU3RhdGUsIHByZXZTaWJsaW5nLnBhcmVudCAhPT0gcmV0dXJuRmliZXIgPyAocHJldlNpYmxpbmcgPSB7CiAgICAgICAgICAgICAgcGFyZW50OiByZXR1cm5GaWJlciwKICAgICAgICAgICAgICBjYWNoZTogcmV0dXJuRmliZXIKICAgICAgICAgICAgfSwgd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkU3RhdGUgPSBwcmV2U2libGluZywgMCA9PT0gd29ya0luUHJvZ3Jlc3MyLmxhbmVzICYmICh3b3JrSW5Qcm9ncmVzczIubWVtb2l6ZWRTdGF0ZSA9IHdvcmtJblByb2dyZXNzMi51cGRhdGVRdWV1ZS5iYXNlU3RhdGUgPSBwcmV2U2libGluZyksIHB1c2hQcm92aWRlcih3b3JrSW5Qcm9ncmVzczIsIENhY2hlQ29udGV4dCwgcmV0dXJuRmliZXIpKSA6IChyZXR1cm5GaWJlciA9IHByZXZTdGF0ZS5jYWNoZSwgcHVzaFByb3ZpZGVyKHdvcmtJblByb2dyZXNzMiwgQ2FjaGVDb250ZXh0LCByZXR1cm5GaWJlciksIHJldHVybkZpYmVyICE9PSBwcmV2U2libGluZy5jYWNoZSAmJiBwcm9wYWdhdGVDb250ZXh0Q2hhbmdlcygKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICAgICAgW0NhY2hlQ29udGV4dF0sCiAgICAgICAgICAgICAgcmVuZGVyTGFuZXMyLAogICAgICAgICAgICAgIHRydWUKICAgICAgICAgICAgKSkpLCByZWNvbmNpbGVDaGlsZHJlbigKICAgICAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLnBlbmRpbmdQcm9wcy5jaGlsZHJlbiwKICAgICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICAgKSwgd29ya0luUHJvZ3Jlc3MyLmNoaWxkOwogICAgICAgICAgY2FzZSAyOToKICAgICAgICAgICAgdGhyb3cgd29ya0luUHJvZ3Jlc3MyLnBlbmRpbmdQcm9wczsKICAgICAgICB9CiAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAiVW5rbm93biB1bml0IG9mIHdvcmsgdGFnICgiICsgd29ya0luUHJvZ3Jlc3MyLnRhZyArICIpLiBUaGlzIGVycm9yIGlzIGxpa2VseSBjYXVzZWQgYnkgYSBidWcgaW4gUmVhY3QuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLiIKICAgICAgICApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1hcmtVcGRhdGUod29ya0luUHJvZ3Jlc3MyKSB7CiAgICAgICAgd29ya0luUHJvZ3Jlc3MyLmZsYWdzIHw9IDQ7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcHJlbG9hZFJlc291cmNlQW5kU3VzcGVuZElmTmVlZGVkKHdvcmtJblByb2dyZXNzMiwgcmVzb3VyY2UpIHsKICAgICAgICBpZiAoInN0eWxlc2hlZXQiICE9PSByZXNvdXJjZS50eXBlIHx8IChyZXNvdXJjZS5zdGF0ZS5sb2FkaW5nICYgSW5zZXJ0ZWQpICE9PSBOb3RMb2FkZWQpCiAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgJj0gLTE2Nzc3MjE3OwogICAgICAgIGVsc2UgaWYgKHdvcmtJblByb2dyZXNzMi5mbGFncyB8PSAxNjc3NzIxNiwgIXByZWxvYWRSZXNvdXJjZShyZXNvdXJjZSkpIHsKICAgICAgICAgIHJlc291cmNlID0gc3VzcGVuc2VIYW5kbGVyU3RhY2tDdXJzb3IuY3VycmVudDsKICAgICAgICAgIGlmIChudWxsICE9PSByZXNvdXJjZSAmJiAoKHdvcmtJblByb2dyZXNzUm9vdFJlbmRlckxhbmVzICYgNDE5NDA0OCkgPT09IHdvcmtJblByb2dyZXNzUm9vdFJlbmRlckxhbmVzID8gbnVsbCAhPT0gc2hlbGxCb3VuZGFyeSA6ICh3b3JrSW5Qcm9ncmVzc1Jvb3RSZW5kZXJMYW5lcyAmIDYyOTE0NTYwKSAhPT0gd29ya0luUHJvZ3Jlc3NSb290UmVuZGVyTGFuZXMgJiYgMCA9PT0gKHdvcmtJblByb2dyZXNzUm9vdFJlbmRlckxhbmVzICYgNTM2ODcwOTEyKSB8fCByZXNvdXJjZSAhPT0gc2hlbGxCb3VuZGFyeSkpCiAgICAgICAgICAgIHRocm93IHN1c3BlbmRlZFRoZW5hYmxlID0gbm9vcFN1c3BlbnNleUNvbW1pdFRoZW5hYmxlLCBTdXNwZW5zZXlDb21taXRFeGNlcHRpb247CiAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgfD0gODE5MjsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gc2NoZWR1bGVSZXRyeUVmZmVjdCh3b3JrSW5Qcm9ncmVzczIsIHJldHJ5UXVldWUpIHsKICAgICAgICBudWxsICE9PSByZXRyeVF1ZXVlICYmICh3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgfD0gNCk7CiAgICAgICAgd29ya0luUHJvZ3Jlc3MyLmZsYWdzICYgMTYzODQgJiYgKHJldHJ5UXVldWUgPSAyMiAhPT0gd29ya0luUHJvZ3Jlc3MyLnRhZyA/IGNsYWltTmV4dFJldHJ5TGFuZSgpIDogNTM2ODcwOTEyLCB3b3JrSW5Qcm9ncmVzczIubGFuZXMgfD0gcmV0cnlRdWV1ZSwgd29ya0luUHJvZ3Jlc3NTdXNwZW5kZWRSZXRyeUxhbmVzIHw9IHJldHJ5UXVldWUpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGN1dE9mZlRhaWxJZk5lZWRlZChyZW5kZXJTdGF0ZSwgaGFzUmVuZGVyZWRBVGFpbEZhbGxiYWNrKSB7CiAgICAgICAgaWYgKCFpc0h5ZHJhdGluZykKICAgICAgICAgIHN3aXRjaCAocmVuZGVyU3RhdGUudGFpbE1vZGUpIHsKICAgICAgICAgICAgY2FzZSAiaGlkZGVuIjoKICAgICAgICAgICAgICBoYXNSZW5kZXJlZEFUYWlsRmFsbGJhY2sgPSByZW5kZXJTdGF0ZS50YWlsOwogICAgICAgICAgICAgIGZvciAodmFyIGxhc3RUYWlsTm9kZSA9IG51bGw7IG51bGwgIT09IGhhc1JlbmRlcmVkQVRhaWxGYWxsYmFjazsgKQogICAgICAgICAgICAgICAgbnVsbCAhPT0gaGFzUmVuZGVyZWRBVGFpbEZhbGxiYWNrLmFsdGVybmF0ZSAmJiAobGFzdFRhaWxOb2RlID0gaGFzUmVuZGVyZWRBVGFpbEZhbGxiYWNrKSwgaGFzUmVuZGVyZWRBVGFpbEZhbGxiYWNrID0gaGFzUmVuZGVyZWRBVGFpbEZhbGxiYWNrLnNpYmxpbmc7CiAgICAgICAgICAgICAgbnVsbCA9PT0gbGFzdFRhaWxOb2RlID8gcmVuZGVyU3RhdGUudGFpbCA9IG51bGwgOiBsYXN0VGFpbE5vZGUuc2libGluZyA9IG51bGw7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgImNvbGxhcHNlZCI6CiAgICAgICAgICAgICAgbGFzdFRhaWxOb2RlID0gcmVuZGVyU3RhdGUudGFpbDsKICAgICAgICAgICAgICBmb3IgKHZhciBfbGFzdFRhaWxOb2RlID0gbnVsbDsgbnVsbCAhPT0gbGFzdFRhaWxOb2RlOyApCiAgICAgICAgICAgICAgICBudWxsICE9PSBsYXN0VGFpbE5vZGUuYWx0ZXJuYXRlICYmIChfbGFzdFRhaWxOb2RlID0gbGFzdFRhaWxOb2RlKSwgbGFzdFRhaWxOb2RlID0gbGFzdFRhaWxOb2RlLnNpYmxpbmc7CiAgICAgICAgICAgICAgbnVsbCA9PT0gX2xhc3RUYWlsTm9kZSA/IGhhc1JlbmRlcmVkQVRhaWxGYWxsYmFjayB8fCBudWxsID09PSByZW5kZXJTdGF0ZS50YWlsID8gcmVuZGVyU3RhdGUudGFpbCA9IG51bGwgOiByZW5kZXJTdGF0ZS50YWlsLnNpYmxpbmcgPSBudWxsIDogX2xhc3RUYWlsTm9kZS5zaWJsaW5nID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBidWJibGVQcm9wZXJ0aWVzKGNvbXBsZXRlZFdvcmspIHsKICAgICAgICB2YXIgZGlkQmFpbG91dCA9IG51bGwgIT09IGNvbXBsZXRlZFdvcmsuYWx0ZXJuYXRlICYmIGNvbXBsZXRlZFdvcmsuYWx0ZXJuYXRlLmNoaWxkID09PSBjb21wbGV0ZWRXb3JrLmNoaWxkLCBuZXdDaGlsZExhbmVzID0gMCwgc3VidHJlZUZsYWdzID0gMDsKICAgICAgICBpZiAoZGlkQmFpbG91dCkKICAgICAgICAgIGlmICgoY29tcGxldGVkV29yay5tb2RlICYgUHJvZmlsZU1vZGUpICE9PSBOb01vZGUpIHsKICAgICAgICAgICAgZm9yICh2YXIgX3RyZWVCYXNlRHVyYXRpb24gPSBjb21wbGV0ZWRXb3JrLnNlbGZCYXNlRHVyYXRpb24sIF9jaGlsZDIgPSBjb21wbGV0ZWRXb3JrLmNoaWxkOyBudWxsICE9PSBfY2hpbGQyOyApCiAgICAgICAgICAgICAgbmV3Q2hpbGRMYW5lcyB8PSBfY2hpbGQyLmxhbmVzIHwgX2NoaWxkMi5jaGlsZExhbmVzLCBzdWJ0cmVlRmxhZ3MgfD0gX2NoaWxkMi5zdWJ0cmVlRmxhZ3MgJiA2NTAxMTcxMiwgc3VidHJlZUZsYWdzIHw9IF9jaGlsZDIuZmxhZ3MgJiA2NTAxMTcxMiwgX3RyZWVCYXNlRHVyYXRpb24gKz0gX2NoaWxkMi50cmVlQmFzZUR1cmF0aW9uLCBfY2hpbGQyID0gX2NoaWxkMi5zaWJsaW5nOwogICAgICAgICAgICBjb21wbGV0ZWRXb3JrLnRyZWVCYXNlRHVyYXRpb24gPSBfdHJlZUJhc2VEdXJhdGlvbjsKICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICBmb3IgKF90cmVlQmFzZUR1cmF0aW9uID0gY29tcGxldGVkV29yay5jaGlsZDsgbnVsbCAhPT0gX3RyZWVCYXNlRHVyYXRpb247ICkKICAgICAgICAgICAgICBuZXdDaGlsZExhbmVzIHw9IF90cmVlQmFzZUR1cmF0aW9uLmxhbmVzIHwgX3RyZWVCYXNlRHVyYXRpb24uY2hpbGRMYW5lcywgc3VidHJlZUZsYWdzIHw9IF90cmVlQmFzZUR1cmF0aW9uLnN1YnRyZWVGbGFncyAmIDY1MDExNzEyLCBzdWJ0cmVlRmxhZ3MgfD0gX3RyZWVCYXNlRHVyYXRpb24uZmxhZ3MgJiA2NTAxMTcxMiwgX3RyZWVCYXNlRHVyYXRpb24ucmV0dXJuID0gY29tcGxldGVkV29yaywgX3RyZWVCYXNlRHVyYXRpb24gPSBfdHJlZUJhc2VEdXJhdGlvbi5zaWJsaW5nOwogICAgICAgIGVsc2UgaWYgKChjb21wbGV0ZWRXb3JrLm1vZGUgJiBQcm9maWxlTW9kZSkgIT09IE5vTW9kZSkgewogICAgICAgICAgX3RyZWVCYXNlRHVyYXRpb24gPSBjb21wbGV0ZWRXb3JrLmFjdHVhbER1cmF0aW9uOwogICAgICAgICAgX2NoaWxkMiA9IGNvbXBsZXRlZFdvcmsuc2VsZkJhc2VEdXJhdGlvbjsKICAgICAgICAgIGZvciAodmFyIGNoaWxkID0gY29tcGxldGVkV29yay5jaGlsZDsgbnVsbCAhPT0gY2hpbGQ7ICkKICAgICAgICAgICAgbmV3Q2hpbGRMYW5lcyB8PSBjaGlsZC5sYW5lcyB8IGNoaWxkLmNoaWxkTGFuZXMsIHN1YnRyZWVGbGFncyB8PSBjaGlsZC5zdWJ0cmVlRmxhZ3MsIHN1YnRyZWVGbGFncyB8PSBjaGlsZC5mbGFncywgX3RyZWVCYXNlRHVyYXRpb24gKz0gY2hpbGQuYWN0dWFsRHVyYXRpb24sIF9jaGlsZDIgKz0gY2hpbGQudHJlZUJhc2VEdXJhdGlvbiwgY2hpbGQgPSBjaGlsZC5zaWJsaW5nOwogICAgICAgICAgY29tcGxldGVkV29yay5hY3R1YWxEdXJhdGlvbiA9IF90cmVlQmFzZUR1cmF0aW9uOwogICAgICAgICAgY29tcGxldGVkV29yay50cmVlQmFzZUR1cmF0aW9uID0gX2NoaWxkMjsKICAgICAgICB9IGVsc2UKICAgICAgICAgIGZvciAoX3RyZWVCYXNlRHVyYXRpb24gPSBjb21wbGV0ZWRXb3JrLmNoaWxkOyBudWxsICE9PSBfdHJlZUJhc2VEdXJhdGlvbjsgKQogICAgICAgICAgICBuZXdDaGlsZExhbmVzIHw9IF90cmVlQmFzZUR1cmF0aW9uLmxhbmVzIHwgX3RyZWVCYXNlRHVyYXRpb24uY2hpbGRMYW5lcywgc3VidHJlZUZsYWdzIHw9IF90cmVlQmFzZUR1cmF0aW9uLnN1YnRyZWVGbGFncywgc3VidHJlZUZsYWdzIHw9IF90cmVlQmFzZUR1cmF0aW9uLmZsYWdzLCBfdHJlZUJhc2VEdXJhdGlvbi5yZXR1cm4gPSBjb21wbGV0ZWRXb3JrLCBfdHJlZUJhc2VEdXJhdGlvbiA9IF90cmVlQmFzZUR1cmF0aW9uLnNpYmxpbmc7CiAgICAgICAgY29tcGxldGVkV29yay5zdWJ0cmVlRmxhZ3MgfD0gc3VidHJlZUZsYWdzOwogICAgICAgIGNvbXBsZXRlZFdvcmsuY2hpbGRMYW5lcyA9IG5ld0NoaWxkTGFuZXM7CiAgICAgICAgcmV0dXJuIGRpZEJhaWxvdXQ7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY29tcGxldGVXb3JrKGN1cnJlbnQyLCB3b3JrSW5Qcm9ncmVzczIsIHJlbmRlckxhbmVzMikgewogICAgICAgIHZhciBuZXdQcm9wcyA9IHdvcmtJblByb2dyZXNzMi5wZW5kaW5nUHJvcHM7CiAgICAgICAgcG9wVHJlZUNvbnRleHQod29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICBzd2l0Y2ggKHdvcmtJblByb2dyZXNzMi50YWcpIHsKICAgICAgICAgIGNhc2UgMzE6CiAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgY2FzZSAxNToKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgcmV0dXJuIGJ1YmJsZVByb3BlcnRpZXMod29ya0luUHJvZ3Jlc3MyKSwgbnVsbDsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgcmV0dXJuIGJ1YmJsZVByb3BlcnRpZXMod29ya0luUHJvZ3Jlc3MyKSwgbnVsbDsKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcmVuZGVyTGFuZXMyID0gd29ya0luUHJvZ3Jlc3MyLnN0YXRlTm9kZTsKICAgICAgICAgICAgbmV3UHJvcHMgPSBudWxsOwogICAgICAgICAgICBudWxsICE9PSBjdXJyZW50MiAmJiAobmV3UHJvcHMgPSBjdXJyZW50Mi5tZW1vaXplZFN0YXRlLmNhY2hlKTsKICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkU3RhdGUuY2FjaGUgIT09IG5ld1Byb3BzICYmICh3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgfD0gMjA0OCk7CiAgICAgICAgICAgIHBvcFByb3ZpZGVyKENhY2hlQ29udGV4dCwgd29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICAgICAgcG9wSG9zdENvbnRhaW5lcih3b3JrSW5Qcm9ncmVzczIpOwogICAgICAgICAgICByZW5kZXJMYW5lczIucGVuZGluZ0NvbnRleHQgJiYgKHJlbmRlckxhbmVzMi5jb250ZXh0ID0gcmVuZGVyTGFuZXMyLnBlbmRpbmdDb250ZXh0LCByZW5kZXJMYW5lczIucGVuZGluZ0NvbnRleHQgPSBudWxsKTsKICAgICAgICAgICAgaWYgKG51bGwgPT09IGN1cnJlbnQyIHx8IG51bGwgPT09IGN1cnJlbnQyLmNoaWxkKQogICAgICAgICAgICAgIHBvcEh5ZHJhdGlvblN0YXRlKHdvcmtJblByb2dyZXNzMikgPyAoZW1pdFBlbmRpbmdIeWRyYXRpb25XYXJuaW5ncygpLCBtYXJrVXBkYXRlKHdvcmtJblByb2dyZXNzMikpIDogbnVsbCA9PT0gY3VycmVudDIgfHwgY3VycmVudDIubWVtb2l6ZWRTdGF0ZS5pc0RlaHlkcmF0ZWQgJiYgMCA9PT0gKHdvcmtJblByb2dyZXNzMi5mbGFncyAmIDI1NikgfHwgKHdvcmtJblByb2dyZXNzMi5mbGFncyB8PSAxMDI0LCB1cGdyYWRlSHlkcmF0aW9uRXJyb3JzVG9SZWNvdmVyYWJsZSgpKTsKICAgICAgICAgICAgYnViYmxlUHJvcGVydGllcyh3b3JrSW5Qcm9ncmVzczIpOwogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgIHJldHVybiByZW5kZXJMYW5lczIgPSB3b3JrSW5Qcm9ncmVzczIubWVtb2l6ZWRTdGF0ZSwgbnVsbCA9PT0gY3VycmVudDIgPyAobWFya1VwZGF0ZSh3b3JrSW5Qcm9ncmVzczIpLCBudWxsICE9PSByZW5kZXJMYW5lczIgPyAoYnViYmxlUHJvcGVydGllcyh3b3JrSW5Qcm9ncmVzczIpLCBwcmVsb2FkUmVzb3VyY2VBbmRTdXNwZW5kSWZOZWVkZWQoCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLAogICAgICAgICAgICAgIHJlbmRlckxhbmVzMgogICAgICAgICAgICApKSA6IChidWJibGVQcm9wZXJ0aWVzKHdvcmtJblByb2dyZXNzMiksIHdvcmtJblByb2dyZXNzMi5mbGFncyAmPSAtMTY3NzcyMTcpKSA6IHJlbmRlckxhbmVzMiA/IHJlbmRlckxhbmVzMiAhPT0gY3VycmVudDIubWVtb2l6ZWRTdGF0ZSA/IChtYXJrVXBkYXRlKHdvcmtJblByb2dyZXNzMiksIGJ1YmJsZVByb3BlcnRpZXMod29ya0luUHJvZ3Jlc3MyKSwgcHJlbG9hZFJlc291cmNlQW5kU3VzcGVuZElmTmVlZGVkKAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMiwKICAgICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICAgKSkgOiAoYnViYmxlUHJvcGVydGllcyh3b3JrSW5Qcm9ncmVzczIpLCB3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgJj0gLTE2Nzc3MjE3KSA6IChjdXJyZW50Mi5tZW1vaXplZFByb3BzICE9PSBuZXdQcm9wcyAmJiBtYXJrVXBkYXRlKHdvcmtJblByb2dyZXNzMiksIGJ1YmJsZVByb3BlcnRpZXMod29ya0luUHJvZ3Jlc3MyKSwgd29ya0luUHJvZ3Jlc3MyLmZsYWdzICY9IC0xNjc3NzIxNyksIG51bGw7CiAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICBwb3BIb3N0Q29udGV4dCh3b3JrSW5Qcm9ncmVzczIpOwogICAgICAgICAgICByZW5kZXJMYW5lczIgPSByZXF1aXJlZENvbnRleHQocm9vdEluc3RhbmNlU3RhY2tDdXJzb3IuY3VycmVudCk7CiAgICAgICAgICAgIHZhciBfdHlwZSA9IHdvcmtJblByb2dyZXNzMi50eXBlOwogICAgICAgICAgICBpZiAobnVsbCAhPT0gY3VycmVudDIgJiYgbnVsbCAhPSB3b3JrSW5Qcm9ncmVzczIuc3RhdGVOb2RlKQogICAgICAgICAgICAgIGN1cnJlbnQyLm1lbW9pemVkUHJvcHMgIT09IG5ld1Byb3BzICYmIG1hcmtVcGRhdGUod29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgaWYgKCFuZXdQcm9wcykgewogICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IHdvcmtJblByb2dyZXNzMi5zdGF0ZU5vZGUpCiAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAgICAgICAgICJXZSBtdXN0IGhhdmUgbmV3IHByb3BzIGZvciBuZXcgbW91bnRzLiBUaGlzIGVycm9yIGlzIGxpa2VseSBjYXVzZWQgYnkgYSBidWcgaW4gUmVhY3QuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLiIKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGJ1YmJsZVByb3BlcnRpZXMod29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjdXJyZW50MiA9IGdldEhvc3RDb250ZXh0KCk7CiAgICAgICAgICAgICAgcG9wSHlkcmF0aW9uU3RhdGUod29ya0luUHJvZ3Jlc3MyKSA/IHByZXBhcmVUb0h5ZHJhdGVIb3N0SW5zdGFuY2Uod29ya0luUHJvZ3Jlc3MyLCBjdXJyZW50MikgOiAoY3VycmVudDIgPSByZXNvbHZlU2luZ2xldG9uSW5zdGFuY2UoCiAgICAgICAgICAgICAgICBfdHlwZSwKICAgICAgICAgICAgICAgIG5ld1Byb3BzLAogICAgICAgICAgICAgICAgcmVuZGVyTGFuZXMyLAogICAgICAgICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICAgICAgICB0cnVlCiAgICAgICAgICAgICAgKSwgd29ya0luUHJvZ3Jlc3MyLnN0YXRlTm9kZSA9IGN1cnJlbnQyLCBtYXJrVXBkYXRlKHdvcmtJblByb2dyZXNzMikpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJ1YmJsZVByb3BlcnRpZXMod29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIHBvcEhvc3RDb250ZXh0KHdvcmtJblByb2dyZXNzMik7CiAgICAgICAgICAgIHJlbmRlckxhbmVzMiA9IHdvcmtJblByb2dyZXNzMi50eXBlOwogICAgICAgICAgICBpZiAobnVsbCAhPT0gY3VycmVudDIgJiYgbnVsbCAhPSB3b3JrSW5Qcm9ncmVzczIuc3RhdGVOb2RlKQogICAgICAgICAgICAgIGN1cnJlbnQyLm1lbW9pemVkUHJvcHMgIT09IG5ld1Byb3BzICYmIG1hcmtVcGRhdGUod29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgaWYgKCFuZXdQcm9wcykgewogICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IHdvcmtJblByb2dyZXNzMi5zdGF0ZU5vZGUpCiAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAgICAgICAgICJXZSBtdXN0IGhhdmUgbmV3IHByb3BzIGZvciBuZXcgbW91bnRzLiBUaGlzIGVycm9yIGlzIGxpa2VseSBjYXVzZWQgYnkgYSBidWcgaW4gUmVhY3QuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLiIKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGJ1YmJsZVByb3BlcnRpZXMod29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfdHlwZSA9IGdldEhvc3RDb250ZXh0KCk7CiAgICAgICAgICAgICAgaWYgKHBvcEh5ZHJhdGlvblN0YXRlKHdvcmtJblByb2dyZXNzMikpCiAgICAgICAgICAgICAgICBwcmVwYXJlVG9IeWRyYXRlSG9zdEluc3RhbmNlKHdvcmtJblByb2dyZXNzMiwgX3R5cGUpOwogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgY3VycmVudDIgPSByZXF1aXJlZENvbnRleHQocm9vdEluc3RhbmNlU3RhY2tDdXJzb3IuY3VycmVudCk7CiAgICAgICAgICAgICAgICB2YWxpZGF0ZURPTU5lc3RpbmcocmVuZGVyTGFuZXMyLCBfdHlwZS5hbmNlc3RvckluZm8pOwogICAgICAgICAgICAgICAgX3R5cGUgPSBfdHlwZS5jb250ZXh0OwogICAgICAgICAgICAgICAgY3VycmVudDIgPSBnZXRPd25lckRvY3VtZW50RnJvbVJvb3RDb250YWluZXIoY3VycmVudDIpOwogICAgICAgICAgICAgICAgc3dpdGNoIChfdHlwZSkgewogICAgICAgICAgICAgICAgICBjYXNlIEhvc3RDb250ZXh0TmFtZXNwYWNlU3ZnOgogICAgICAgICAgICAgICAgICAgIGN1cnJlbnQyID0gY3VycmVudDIuY3JlYXRlRWxlbWVudE5TKFNWR19OQU1FU1BBQ0UsIHJlbmRlckxhbmVzMik7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGNhc2UgSG9zdENvbnRleHROYW1lc3BhY2VNYXRoOgogICAgICAgICAgICAgICAgICAgIGN1cnJlbnQyID0gY3VycmVudDIuY3JlYXRlRWxlbWVudE5TKAogICAgICAgICAgICAgICAgICAgICAgTUFUSF9OQU1FU1BBQ0UsCiAgICAgICAgICAgICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocmVuZGVyTGFuZXMyKSB7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJzdmciOgogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50MiA9IGN1cnJlbnQyLmNyZWF0ZUVsZW1lbnROUygKICAgICAgICAgICAgICAgICAgICAgICAgICBTVkdfTkFNRVNQQUNFLAogICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckxhbmVzMgogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIm1hdGgiOgogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50MiA9IGN1cnJlbnQyLmNyZWF0ZUVsZW1lbnROUygKICAgICAgICAgICAgICAgICAgICAgICAgICBNQVRIX05BTUVTUEFDRSwKICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJzY3JpcHQiOgogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50MiA9IGN1cnJlbnQyLmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Mi5pbm5lckhUTUwgPSAiPHNjcmlwdD48XC9zY3JpcHQ+IjsKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudDIgPSBjdXJyZW50Mi5yZW1vdmVDaGlsZChjdXJyZW50Mi5maXJzdENoaWxkKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJzZWxlY3QiOgogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50MiA9ICJzdHJpbmciID09PSB0eXBlb2YgbmV3UHJvcHMuaXMgPyBjdXJyZW50Mi5jcmVhdGVFbGVtZW50KCJzZWxlY3QiLCB7IGlzOiBuZXdQcm9wcy5pcyB9KSA6IGN1cnJlbnQyLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpOwogICAgICAgICAgICAgICAgICAgICAgICBuZXdQcm9wcy5tdWx0aXBsZSA/IGN1cnJlbnQyLm11bHRpcGxlID0gdHJ1ZSA6IG5ld1Byb3BzLnNpemUgJiYgKGN1cnJlbnQyLnNpemUgPSBuZXdQcm9wcy5zaXplKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50MiA9ICJzdHJpbmciID09PSB0eXBlb2YgbmV3UHJvcHMuaXMgPyBjdXJyZW50Mi5jcmVhdGVFbGVtZW50KHJlbmRlckxhbmVzMiwgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlzOiBuZXdQcm9wcy5pcwogICAgICAgICAgICAgICAgICAgICAgICB9KSA6IGN1cnJlbnQyLmNyZWF0ZUVsZW1lbnQocmVuZGVyTGFuZXMyKSwgLTEgPT09IHJlbmRlckxhbmVzMi5pbmRleE9mKCItIikgJiYgKHJlbmRlckxhbmVzMiAhPT0gcmVuZGVyTGFuZXMyLnRvTG93ZXJDYXNlKCkgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAgICAgICAgICAgICAiPCVzIC8+IGlzIHVzaW5nIGluY29ycmVjdCBjYXNpbmcuIFVzZSBQYXNjYWxDYXNlIGZvciBSZWFjdCBjb21wb25lbnRzLCBvciBsb3dlcmNhc2UgZm9yIEhUTUwgZWxlbWVudHMuIiwKICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICAgICAgICAgICAgICAgKSwgIltvYmplY3QgSFRNTFVua25vd25FbGVtZW50XSIgIT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjdXJyZW50MikgfHwgaGFzT3duUHJvcGVydHkuY2FsbCgKICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuZWRVbmtub3duVGFncywKICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICAgICAgICAgICAgICAgKSB8fCAod2FybmVkVW5rbm93blRhZ3NbcmVuZGVyTGFuZXMyXSA9IHRydWUsIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAgICAgIlRoZSB0YWcgPCVzPiBpcyB1bnJlY29nbml6ZWQgaW4gdGhpcyBicm93c2VyLiBJZiB5b3UgbWVhbnQgdG8gcmVuZGVyIGEgUmVhY3QgY29tcG9uZW50LCBzdGFydCBpdHMgbmFtZSB3aXRoIGFuIHVwcGVyY2FzZSBsZXR0ZXIuIiwKICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJMYW5lczIKICAgICAgICAgICAgICAgICAgICAgICAgKSkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGN1cnJlbnQyW2ludGVybmFsSW5zdGFuY2VLZXldID0gd29ya0luUHJvZ3Jlc3MyOwogICAgICAgICAgICAgICAgY3VycmVudDJbaW50ZXJuYWxQcm9wc0tleV0gPSBuZXdQcm9wczsKICAgICAgICAgICAgICAgIGE6IGZvciAoX3R5cGUgPSB3b3JrSW5Qcm9ncmVzczIuY2hpbGQ7IG51bGwgIT09IF90eXBlOyApIHsKICAgICAgICAgICAgICAgICAgaWYgKDUgPT09IF90eXBlLnRhZyB8fCA2ID09PSBfdHlwZS50YWcpCiAgICAgICAgICAgICAgICAgICAgY3VycmVudDIuYXBwZW5kQ2hpbGQoX3R5cGUuc3RhdGVOb2RlKTsKICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoNCAhPT0gX3R5cGUudGFnICYmIDI3ICE9PSBfdHlwZS50YWcgJiYgbnVsbCAhPT0gX3R5cGUuY2hpbGQpIHsKICAgICAgICAgICAgICAgICAgICBfdHlwZS5jaGlsZC5yZXR1cm4gPSBfdHlwZTsKICAgICAgICAgICAgICAgICAgICBfdHlwZSA9IF90eXBlLmNoaWxkOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmIChfdHlwZSA9PT0gd29ya0luUHJvZ3Jlc3MyKSBicmVhayBhOwogICAgICAgICAgICAgICAgICBmb3IgKDsgbnVsbCA9PT0gX3R5cGUuc2libGluZzsgKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IF90eXBlLnJldHVybiB8fCBfdHlwZS5yZXR1cm4gPT09IHdvcmtJblByb2dyZXNzMikKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGE7CiAgICAgICAgICAgICAgICAgICAgX3R5cGUgPSBfdHlwZS5yZXR1cm47CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgX3R5cGUuc2libGluZy5yZXR1cm4gPSBfdHlwZS5yZXR1cm47CiAgICAgICAgICAgICAgICAgIF90eXBlID0gX3R5cGUuc2libGluZzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMi5zdGF0ZU5vZGUgPSBjdXJyZW50MjsKICAgICAgICAgICAgICAgIGE6IHN3aXRjaCAoc2V0SW5pdGlhbFByb3BlcnRpZXMoY3VycmVudDIsIHJlbmRlckxhbmVzMiwgbmV3UHJvcHMpLCByZW5kZXJMYW5lczIpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAiYnV0dG9uIjoKICAgICAgICAgICAgICAgICAgY2FzZSAiaW5wdXQiOgogICAgICAgICAgICAgICAgICBjYXNlICJzZWxlY3QiOgogICAgICAgICAgICAgICAgICBjYXNlICJ0ZXh0YXJlYSI6CiAgICAgICAgICAgICAgICAgICAgY3VycmVudDIgPSAhIW5ld1Byb3BzLmF1dG9Gb2N1czsKICAgICAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgICAgICBjYXNlICJpbWciOgogICAgICAgICAgICAgICAgICAgIGN1cnJlbnQyID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIGN1cnJlbnQyID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjdXJyZW50MiAmJiBtYXJrVXBkYXRlKHdvcmtJblByb2dyZXNzMik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGJ1YmJsZVByb3BlcnRpZXMod29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLmZsYWdzICY9IC0xNjc3NzIxNzsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGlmIChjdXJyZW50MiAmJiBudWxsICE9IHdvcmtJblByb2dyZXNzMi5zdGF0ZU5vZGUpCiAgICAgICAgICAgICAgY3VycmVudDIubWVtb2l6ZWRQcm9wcyAhPT0gbmV3UHJvcHMgJiYgbWFya1VwZGF0ZSh3b3JrSW5Qcm9ncmVzczIpOwogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBpZiAoInN0cmluZyIgIT09IHR5cGVvZiBuZXdQcm9wcyAmJiBudWxsID09PSB3b3JrSW5Qcm9ncmVzczIuc3RhdGVOb2RlKQogICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICAgICAgICJXZSBtdXN0IGhhdmUgbmV3IHByb3BzIGZvciBuZXcgbW91bnRzLiBUaGlzIGVycm9yIGlzIGxpa2VseSBjYXVzZWQgYnkgYSBidWcgaW4gUmVhY3QuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLiIKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgY3VycmVudDIgPSByZXF1aXJlZENvbnRleHQocm9vdEluc3RhbmNlU3RhY2tDdXJzb3IuY3VycmVudCk7CiAgICAgICAgICAgICAgcmVuZGVyTGFuZXMyID0gZ2V0SG9zdENvbnRleHQoKTsKICAgICAgICAgICAgICBpZiAocG9wSHlkcmF0aW9uU3RhdGUod29ya0luUHJvZ3Jlc3MyKSkgewogICAgICAgICAgICAgICAgY3VycmVudDIgPSB3b3JrSW5Qcm9ncmVzczIuc3RhdGVOb2RlOwogICAgICAgICAgICAgICAgcmVuZGVyTGFuZXMyID0gd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkUHJvcHM7CiAgICAgICAgICAgICAgICBfdHlwZSA9ICFkaWRTdXNwZW5kT3JFcnJvckRFVjsKICAgICAgICAgICAgICAgIG5ld1Byb3BzID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciByZXR1cm5GaWJlciA9IGh5ZHJhdGlvblBhcmVudEZpYmVyOwogICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHJldHVybkZpYmVyKQogICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJldHVybkZpYmVyLnRhZykgewogICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgIF90eXBlICYmIChfdHlwZSA9IGRpZmZIeWRyYXRlZFRleHRGb3JEZXZXYXJuaW5ncygKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckxhbmVzMiwKICAgICAgICAgICAgICAgICAgICAgICAgbmV3UHJvcHMKICAgICAgICAgICAgICAgICAgICAgICksIG51bGwgIT09IF90eXBlICYmIChidWlsZEh5ZHJhdGlvbkRpZmZOb2RlKHdvcmtJblByb2dyZXNzMiwgMCkuc2VydmVyUHJvcHMgPSBfdHlwZSkpOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICBuZXdQcm9wcyA9IHJldHVybkZpYmVyLm1lbW9pemVkUHJvcHMsIF90eXBlICYmIChfdHlwZSA9IGRpZmZIeWRyYXRlZFRleHRGb3JEZXZXYXJuaW5ncygKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckxhbmVzMiwKICAgICAgICAgICAgICAgICAgICAgICAgbmV3UHJvcHMKICAgICAgICAgICAgICAgICAgICAgICksIG51bGwgIT09IF90eXBlICYmIChidWlsZEh5ZHJhdGlvbkRpZmZOb2RlKAogICAgICAgICAgICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzczIsCiAgICAgICAgICAgICAgICAgICAgICAgIDAKICAgICAgICAgICAgICAgICAgICAgICkuc2VydmVyUHJvcHMgPSBfdHlwZSkpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjdXJyZW50MltpbnRlcm5hbEluc3RhbmNlS2V5XSA9IHdvcmtJblByb2dyZXNzMjsKICAgICAgICAgICAgICAgIGN1cnJlbnQyID0gY3VycmVudDIubm9kZVZhbHVlID09PSByZW5kZXJMYW5lczIgfHwgbnVsbCAhPT0gbmV3UHJvcHMgJiYgdHJ1ZSA9PT0gbmV3UHJvcHMuc3VwcHJlc3NIeWRyYXRpb25XYXJuaW5nIHx8IGNoZWNrRm9yVW5tYXRjaGVkVGV4dChjdXJyZW50Mi5ub2RlVmFsdWUsIHJlbmRlckxhbmVzMikgPyB0cnVlIDogZmFsc2U7CiAgICAgICAgICAgICAgICBjdXJyZW50MiB8fCB0aHJvd09uSHlkcmF0aW9uTWlzbWF0Y2god29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAgIF90eXBlID0gcmVuZGVyTGFuZXMyLmFuY2VzdG9ySW5mby5jdXJyZW50LCBudWxsICE9IF90eXBlICYmIHZhbGlkYXRlVGV4dE5lc3RpbmcoCiAgICAgICAgICAgICAgICAgIG5ld1Byb3BzLAogICAgICAgICAgICAgICAgICBfdHlwZS50YWcsCiAgICAgICAgICAgICAgICAgIHJlbmRlckxhbmVzMi5hbmNlc3RvckluZm8uaW1wbGljaXRSb290U2NvcGUKICAgICAgICAgICAgICAgICksIGN1cnJlbnQyID0gZ2V0T3duZXJEb2N1bWVudEZyb21Sb290Q29udGFpbmVyKGN1cnJlbnQyKS5jcmVhdGVUZXh0Tm9kZSgKICAgICAgICAgICAgICAgICAgbmV3UHJvcHMKICAgICAgICAgICAgICAgICksIGN1cnJlbnQyW2ludGVybmFsSW5zdGFuY2VLZXldID0gd29ya0luUHJvZ3Jlc3MyLCB3b3JrSW5Qcm9ncmVzczIuc3RhdGVOb2RlID0gY3VycmVudDI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnViYmxlUHJvcGVydGllcyh3b3JrSW5Qcm9ncmVzczIpOwogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgIG5ld1Byb3BzID0gd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkU3RhdGU7CiAgICAgICAgICAgIGlmIChudWxsID09PSBjdXJyZW50MiB8fCBudWxsICE9PSBjdXJyZW50Mi5tZW1vaXplZFN0YXRlICYmIG51bGwgIT09IGN1cnJlbnQyLm1lbW9pemVkU3RhdGUuZGVoeWRyYXRlZCkgewogICAgICAgICAgICAgIF90eXBlID0gcG9wSHlkcmF0aW9uU3RhdGUod29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gbmV3UHJvcHMgJiYgbnVsbCAhPT0gbmV3UHJvcHMuZGVoeWRyYXRlZCkgewogICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGN1cnJlbnQyKSB7CiAgICAgICAgICAgICAgICAgIGlmICghX3R5cGUpCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAiQSBkZWh5ZHJhdGVkIHN1c3BlbnNlIGNvbXBvbmVudCB3YXMgY29tcGxldGVkIHdpdGhvdXQgYSBoeWRyYXRlZCBub2RlLiBUaGlzIGlzIHByb2JhYmx5IGEgYnVnIGluIFJlYWN0LiIKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICBfdHlwZSA9IHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlOwogICAgICAgICAgICAgICAgICBfdHlwZSA9IG51bGwgIT09IF90eXBlID8gX3R5cGUuZGVoeWRyYXRlZCA6IG51bGw7CiAgICAgICAgICAgICAgICAgIGlmICghX3R5cGUpCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAiRXhwZWN0ZWQgdG8gaGF2ZSBhIGh5ZHJhdGVkIHN1c3BlbnNlIGluc3RhbmNlLiBUaGlzIGVycm9yIGlzIGxpa2VseSBjYXVzZWQgYnkgYSBidWcgaW4gUmVhY3QuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLiIKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICBfdHlwZVtpbnRlcm5hbEluc3RhbmNlS2V5XSA9IHdvcmtJblByb2dyZXNzMjsKICAgICAgICAgICAgICAgICAgYnViYmxlUHJvcGVydGllcyh3b3JrSW5Qcm9ncmVzczIpOwogICAgICAgICAgICAgICAgICAod29ya0luUHJvZ3Jlc3MyLm1vZGUgJiBQcm9maWxlTW9kZSkgIT09IE5vTW9kZSAmJiBudWxsICE9PSBuZXdQcm9wcyAmJiAoX3R5cGUgPSB3b3JrSW5Qcm9ncmVzczIuY2hpbGQsIG51bGwgIT09IF90eXBlICYmICh3b3JrSW5Qcm9ncmVzczIudHJlZUJhc2VEdXJhdGlvbiAtPSBfdHlwZS50cmVlQmFzZUR1cmF0aW9uKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAgICAgZW1pdFBlbmRpbmdIeWRyYXRpb25XYXJuaW5ncygpLCByZXNldEh5ZHJhdGlvblN0YXRlKCksIDAgPT09ICh3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgJiAxMjgpICYmICh3b3JrSW5Qcm9ncmVzczIubWVtb2l6ZWRTdGF0ZSA9IG51bGwpLCB3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgfD0gNCwgYnViYmxlUHJvcGVydGllcyh3b3JrSW5Qcm9ncmVzczIpLCAod29ya0luUHJvZ3Jlc3MyLm1vZGUgJiBQcm9maWxlTW9kZSkgIT09IE5vTW9kZSAmJiBudWxsICE9PSBuZXdQcm9wcyAmJiAoX3R5cGUgPSB3b3JrSW5Qcm9ncmVzczIuY2hpbGQsIG51bGwgIT09IF90eXBlICYmICh3b3JrSW5Qcm9ncmVzczIudHJlZUJhc2VEdXJhdGlvbiAtPSBfdHlwZS50cmVlQmFzZUR1cmF0aW9uKSk7CiAgICAgICAgICAgICAgICBfdHlwZSA9IGZhbHNlOwogICAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgX3R5cGUgPSB1cGdyYWRlSHlkcmF0aW9uRXJyb3JzVG9SZWNvdmVyYWJsZSgpLCBudWxsICE9PSBjdXJyZW50MiAmJiBudWxsICE9PSBjdXJyZW50Mi5tZW1vaXplZFN0YXRlICYmIChjdXJyZW50Mi5tZW1vaXplZFN0YXRlLmh5ZHJhdGlvbkVycm9ycyA9IF90eXBlKSwgX3R5cGUgPSB0cnVlOwogICAgICAgICAgICAgIGlmICghX3R5cGUpIHsKICAgICAgICAgICAgICAgIGlmICh3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgJiAyNTYpCiAgICAgICAgICAgICAgICAgIHJldHVybiBwb3BTdXNwZW5zZUhhbmRsZXIod29ya0luUHJvZ3Jlc3MyKSwgd29ya0luUHJvZ3Jlc3MyOwogICAgICAgICAgICAgICAgcG9wU3VzcGVuc2VIYW5kbGVyKHdvcmtJblByb2dyZXNzMik7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcG9wU3VzcGVuc2VIYW5kbGVyKHdvcmtJblByb2dyZXNzMik7CiAgICAgICAgICAgIGlmICgwICE9PSAod29ya0luUHJvZ3Jlc3MyLmZsYWdzICYgMTI4KSkKICAgICAgICAgICAgICByZXR1cm4gd29ya0luUHJvZ3Jlc3MyLmxhbmVzID0gcmVuZGVyTGFuZXMyLCAod29ya0luUHJvZ3Jlc3MyLm1vZGUgJiBQcm9maWxlTW9kZSkgIT09IE5vTW9kZSAmJiB0cmFuc2ZlckFjdHVhbER1cmF0aW9uKHdvcmtJblByb2dyZXNzMiksIHdvcmtJblByb2dyZXNzMjsKICAgICAgICAgICAgcmVuZGVyTGFuZXMyID0gbnVsbCAhPT0gbmV3UHJvcHM7CiAgICAgICAgICAgIGN1cnJlbnQyID0gbnVsbCAhPT0gY3VycmVudDIgJiYgbnVsbCAhPT0gY3VycmVudDIubWVtb2l6ZWRTdGF0ZTsKICAgICAgICAgICAgcmVuZGVyTGFuZXMyICYmIChuZXdQcm9wcyA9IHdvcmtJblByb2dyZXNzMi5jaGlsZCwgX3R5cGUgPSBudWxsLCBudWxsICE9PSBuZXdQcm9wcy5hbHRlcm5hdGUgJiYgbnVsbCAhPT0gbmV3UHJvcHMuYWx0ZXJuYXRlLm1lbW9pemVkU3RhdGUgJiYgbnVsbCAhPT0gbmV3UHJvcHMuYWx0ZXJuYXRlLm1lbW9pemVkU3RhdGUuY2FjaGVQb29sICYmIChfdHlwZSA9IG5ld1Byb3BzLmFsdGVybmF0ZS5tZW1vaXplZFN0YXRlLmNhY2hlUG9vbC5wb29sKSwgcmV0dXJuRmliZXIgPSBudWxsLCBudWxsICE9PSBuZXdQcm9wcy5tZW1vaXplZFN0YXRlICYmIG51bGwgIT09IG5ld1Byb3BzLm1lbW9pemVkU3RhdGUuY2FjaGVQb29sICYmIChyZXR1cm5GaWJlciA9IG5ld1Byb3BzLm1lbW9pemVkU3RhdGUuY2FjaGVQb29sLnBvb2wpLCByZXR1cm5GaWJlciAhPT0gX3R5cGUgJiYgKG5ld1Byb3BzLmZsYWdzIHw9IDIwNDgpKTsKICAgICAgICAgICAgcmVuZGVyTGFuZXMyICE9PSBjdXJyZW50MiAmJiByZW5kZXJMYW5lczIgJiYgKHdvcmtJblByb2dyZXNzMi5jaGlsZC5mbGFncyB8PSA4MTkyKTsKICAgICAgICAgICAgc2NoZWR1bGVSZXRyeUVmZmVjdCh3b3JrSW5Qcm9ncmVzczIsIHdvcmtJblByb2dyZXNzMi51cGRhdGVRdWV1ZSk7CiAgICAgICAgICAgIGJ1YmJsZVByb3BlcnRpZXMod29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICAgICAgKHdvcmtJblByb2dyZXNzMi5tb2RlICYgUHJvZmlsZU1vZGUpICE9PSBOb01vZGUgJiYgcmVuZGVyTGFuZXMyICYmIChjdXJyZW50MiA9IHdvcmtJblByb2dyZXNzMi5jaGlsZCwgbnVsbCAhPT0gY3VycmVudDIgJiYgKHdvcmtJblByb2dyZXNzMi50cmVlQmFzZUR1cmF0aW9uIC09IGN1cnJlbnQyLnRyZWVCYXNlRHVyYXRpb24pKTsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHJldHVybiBwb3BIb3N0Q29udGFpbmVyKHdvcmtJblByb2dyZXNzMiksIG51bGwgPT09IGN1cnJlbnQyICYmIGxpc3RlblRvQWxsU3VwcG9ydGVkRXZlbnRzKAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMi5zdGF0ZU5vZGUuY29udGFpbmVySW5mbwogICAgICAgICAgICApLCBidWJibGVQcm9wZXJ0aWVzKHdvcmtJblByb2dyZXNzMiksIG51bGw7CiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICByZXR1cm4gcG9wUHJvdmlkZXIod29ya0luUHJvZ3Jlc3MyLnR5cGUsIHdvcmtJblByb2dyZXNzMiksIGJ1YmJsZVByb3BlcnRpZXMod29ya0luUHJvZ3Jlc3MyKSwgbnVsbDsKICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgIHBvcChzdXNwZW5zZVN0YWNrQ3Vyc29yLCB3b3JrSW5Qcm9ncmVzczIpOwogICAgICAgICAgICBfdHlwZSA9IHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlOwogICAgICAgICAgICBpZiAobnVsbCA9PT0gX3R5cGUpIHJldHVybiBidWJibGVQcm9wZXJ0aWVzKHdvcmtJblByb2dyZXNzMiksIG51bGw7CiAgICAgICAgICAgIG5ld1Byb3BzID0gMCAhPT0gKHdvcmtJblByb2dyZXNzMi5mbGFncyAmIDEyOCk7CiAgICAgICAgICAgIHJldHVybkZpYmVyID0gX3R5cGUucmVuZGVyaW5nOwogICAgICAgICAgICBpZiAobnVsbCA9PT0gcmV0dXJuRmliZXIpCiAgICAgICAgICAgICAgaWYgKG5ld1Byb3BzKSBjdXRPZmZUYWlsSWZOZWVkZWQoX3R5cGUsIGZhbHNlKTsKICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICh3b3JrSW5Qcm9ncmVzc1Jvb3RFeGl0U3RhdHVzICE9PSBSb290SW5Qcm9ncmVzcyB8fCBudWxsICE9PSBjdXJyZW50MiAmJiAwICE9PSAoY3VycmVudDIuZmxhZ3MgJiAxMjgpKQogICAgICAgICAgICAgICAgICBmb3IgKGN1cnJlbnQyID0gd29ya0luUHJvZ3Jlc3MyLmNoaWxkOyBudWxsICE9PSBjdXJyZW50MjsgKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuRmliZXIgPSBmaW5kRmlyc3RTdXNwZW5kZWQoY3VycmVudDIpOwogICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSByZXR1cm5GaWJlcikgewogICAgICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MyLmZsYWdzIHw9IDEyODsKICAgICAgICAgICAgICAgICAgICAgIGN1dE9mZlRhaWxJZk5lZWRlZChfdHlwZSwgZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgY3VycmVudDIgPSByZXR1cm5GaWJlci51cGRhdGVRdWV1ZTsKICAgICAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMi51cGRhdGVRdWV1ZSA9IGN1cnJlbnQyOwogICAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVSZXRyeUVmZmVjdCh3b3JrSW5Qcm9ncmVzczIsIGN1cnJlbnQyKTsKICAgICAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMi5zdWJ0cmVlRmxhZ3MgPSAwOwogICAgICAgICAgICAgICAgICAgICAgY3VycmVudDIgPSByZW5kZXJMYW5lczI7CiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHJlbmRlckxhbmVzMiA9IHdvcmtJblByb2dyZXNzMi5jaGlsZDsgbnVsbCAhPT0gcmVuZGVyTGFuZXMyOyApCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0V29ya0luUHJvZ3Jlc3MocmVuZGVyTGFuZXMyLCBjdXJyZW50MiksIHJlbmRlckxhbmVzMiA9IHJlbmRlckxhbmVzMi5zaWJsaW5nOwogICAgICAgICAgICAgICAgICAgICAgcHVzaCgKICAgICAgICAgICAgICAgICAgICAgICAgc3VzcGVuc2VTdGFja0N1cnNvciwKICAgICAgICAgICAgICAgICAgICAgICAgc3VzcGVuc2VTdGFja0N1cnNvci5jdXJyZW50ICYgU3VidHJlZVN1c3BlbnNlQ29udGV4dE1hc2sgfCBGb3JjZVN1c3BlbnNlRmFsbGJhY2ssCiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzMgogICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3b3JrSW5Qcm9ncmVzczIuY2hpbGQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGN1cnJlbnQyID0gY3VycmVudDIuc2libGluZzsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbnVsbCAhPT0gX3R5cGUudGFpbCAmJiBub3ckMSgpID4gd29ya0luUHJvZ3Jlc3NSb290UmVuZGVyVGFyZ2V0VGltZSAmJiAod29ya0luUHJvZ3Jlc3MyLmZsYWdzIHw9IDEyOCwgbmV3UHJvcHMgPSB0cnVlLCBjdXRPZmZUYWlsSWZOZWVkZWQoX3R5cGUsIGZhbHNlKSwgd29ya0luUHJvZ3Jlc3MyLmxhbmVzID0gNDE5NDMwNCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBpZiAoIW5ld1Byb3BzKQogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQyID0gZmluZEZpcnN0U3VzcGVuZGVkKHJldHVybkZpYmVyKSwgbnVsbCAhPT0gY3VycmVudDIpIHsKICAgICAgICAgICAgICAgICAgaWYgKHdvcmtJblByb2dyZXNzMi5mbGFncyB8PSAxMjgsIG5ld1Byb3BzID0gdHJ1ZSwgY3VycmVudDIgPSBjdXJyZW50Mi51cGRhdGVRdWV1ZSwgd29ya0luUHJvZ3Jlc3MyLnVwZGF0ZVF1ZXVlID0gY3VycmVudDIsIHNjaGVkdWxlUmV0cnlFZmZlY3Qod29ya0luUHJvZ3Jlc3MyLCBjdXJyZW50MiksIGN1dE9mZlRhaWxJZk5lZWRlZChfdHlwZSwgdHJ1ZSksIG51bGwgPT09IF90eXBlLnRhaWwgJiYgImhpZGRlbiIgPT09IF90eXBlLnRhaWxNb2RlICYmICFyZXR1cm5GaWJlci5hbHRlcm5hdGUgJiYgIWlzSHlkcmF0aW5nKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBidWJibGVQcm9wZXJ0aWVzKHdvcmtJblByb2dyZXNzMiksIG51bGw7CiAgICAgICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAgICAgMiAqIG5vdyQxKCkgLSBfdHlwZS5yZW5kZXJpbmdTdGFydFRpbWUgPiB3b3JrSW5Qcm9ncmVzc1Jvb3RSZW5kZXJUYXJnZXRUaW1lICYmIDUzNjg3MDkxMiAhPT0gcmVuZGVyTGFuZXMyICYmICh3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgfD0gMTI4LCBuZXdQcm9wcyA9IHRydWUsIGN1dE9mZlRhaWxJZk5lZWRlZChfdHlwZSwgZmFsc2UpLCB3b3JrSW5Qcm9ncmVzczIubGFuZXMgPSA0MTk0MzA0KTsKICAgICAgICAgICAgICBfdHlwZS5pc0JhY2t3YXJkcyA/IChyZXR1cm5GaWJlci5zaWJsaW5nID0gd29ya0luUHJvZ3Jlc3MyLmNoaWxkLCB3b3JrSW5Qcm9ncmVzczIuY2hpbGQgPSByZXR1cm5GaWJlcikgOiAoY3VycmVudDIgPSBfdHlwZS5sYXN0LCBudWxsICE9PSBjdXJyZW50MiA/IGN1cnJlbnQyLnNpYmxpbmcgPSByZXR1cm5GaWJlciA6IHdvcmtJblByb2dyZXNzMi5jaGlsZCA9IHJldHVybkZpYmVyLCBfdHlwZS5sYXN0ID0gcmV0dXJuRmliZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChudWxsICE9PSBfdHlwZS50YWlsKQogICAgICAgICAgICAgIHJldHVybiBjdXJyZW50MiA9IF90eXBlLnRhaWwsIF90eXBlLnJlbmRlcmluZyA9IGN1cnJlbnQyLCBfdHlwZS50YWlsID0gY3VycmVudDIuc2libGluZywgX3R5cGUucmVuZGVyaW5nU3RhcnRUaW1lID0gbm93JDEoKSwgY3VycmVudDIuc2libGluZyA9IG51bGwsIHJlbmRlckxhbmVzMiA9IHN1c3BlbnNlU3RhY2tDdXJzb3IuY3VycmVudCwgcmVuZGVyTGFuZXMyID0gbmV3UHJvcHMgPyByZW5kZXJMYW5lczIgJiBTdWJ0cmVlU3VzcGVuc2VDb250ZXh0TWFzayB8IEZvcmNlU3VzcGVuc2VGYWxsYmFjayA6IHJlbmRlckxhbmVzMiAmIFN1YnRyZWVTdXNwZW5zZUNvbnRleHRNYXNrLCBwdXNoKHN1c3BlbnNlU3RhY2tDdXJzb3IsIHJlbmRlckxhbmVzMiwgd29ya0luUHJvZ3Jlc3MyKSwgY3VycmVudDI7CiAgICAgICAgICAgIGJ1YmJsZVByb3BlcnRpZXMod29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgcmV0dXJuIHBvcFN1c3BlbnNlSGFuZGxlcih3b3JrSW5Qcm9ncmVzczIpLCBwb3BIaWRkZW5Db250ZXh0KHdvcmtJblByb2dyZXNzMiksIG5ld1Byb3BzID0gbnVsbCAhPT0gd29ya0luUHJvZ3Jlc3MyLm1lbW9pemVkU3RhdGUsIG51bGwgIT09IGN1cnJlbnQyID8gbnVsbCAhPT0gY3VycmVudDIubWVtb2l6ZWRTdGF0ZSAhPT0gbmV3UHJvcHMgJiYgKHdvcmtJblByb2dyZXNzMi5mbGFncyB8PSA4MTkyKSA6IG5ld1Byb3BzICYmICh3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgfD0gODE5MiksIG5ld1Byb3BzID8gMCAhPT0gKHJlbmRlckxhbmVzMiAmIDUzNjg3MDkxMikgJiYgMCA9PT0gKHdvcmtJblByb2dyZXNzMi5mbGFncyAmIDEyOCkgJiYgKGJ1YmJsZVByb3BlcnRpZXMod29ya0luUHJvZ3Jlc3MyKSwgd29ya0luUHJvZ3Jlc3MyLnN1YnRyZWVGbGFncyAmIDYgJiYgKHdvcmtJblByb2dyZXNzMi5mbGFncyB8PSA4MTkyKSkgOiBidWJibGVQcm9wZXJ0aWVzKHdvcmtJblByb2dyZXNzMiksIHJlbmRlckxhbmVzMiA9IHdvcmtJblByb2dyZXNzMi51cGRhdGVRdWV1ZSwgbnVsbCAhPT0gcmVuZGVyTGFuZXMyICYmIHNjaGVkdWxlUmV0cnlFZmZlY3Qod29ya0luUHJvZ3Jlc3MyLCByZW5kZXJMYW5lczIucmV0cnlRdWV1ZSksIHJlbmRlckxhbmVzMiA9IG51bGwsIG51bGwgIT09IGN1cnJlbnQyICYmIG51bGwgIT09IGN1cnJlbnQyLm1lbW9pemVkU3RhdGUgJiYgbnVsbCAhPT0gY3VycmVudDIubWVtb2l6ZWRTdGF0ZS5jYWNoZVBvb2wgJiYgKHJlbmRlckxhbmVzMiA9IGN1cnJlbnQyLm1lbW9pemVkU3RhdGUuY2FjaGVQb29sLnBvb2wpLCBuZXdQcm9wcyA9IG51bGwsIG51bGwgIT09IHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlICYmIG51bGwgIT09IHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlLmNhY2hlUG9vbCAmJiAobmV3UHJvcHMgPSB3b3JrSW5Qcm9ncmVzczIubWVtb2l6ZWRTdGF0ZS5jYWNoZVBvb2wucG9vbCksIG5ld1Byb3BzICE9PSByZW5kZXJMYW5lczIgJiYgKHdvcmtJblByb2dyZXNzMi5mbGFncyB8PSAyMDQ4KSwgbnVsbCAhPT0gY3VycmVudDIgJiYgcG9wKHJlc3VtZWRDYWNoZSwgd29ya0luUHJvZ3Jlc3MyKSwgbnVsbDsKICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgIHJldHVybiByZW5kZXJMYW5lczIgPSBudWxsLCBudWxsICE9PSBjdXJyZW50MiAmJiAocmVuZGVyTGFuZXMyID0gY3VycmVudDIubWVtb2l6ZWRTdGF0ZS5jYWNoZSksIHdvcmtJblByb2dyZXNzMi5tZW1vaXplZFN0YXRlLmNhY2hlICE9PSByZW5kZXJMYW5lczIgJiYgKHdvcmtJblByb2dyZXNzMi5mbGFncyB8PSAyMDQ4KSwgcG9wUHJvdmlkZXIoQ2FjaGVDb250ZXh0LCB3b3JrSW5Qcm9ncmVzczIpLCBidWJibGVQcm9wZXJ0aWVzKHdvcmtJblByb2dyZXNzMiksIG51bGw7CiAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICJVbmtub3duIHVuaXQgb2Ygd29yayB0YWcgKCIgKyB3b3JrSW5Qcm9ncmVzczIudGFnICsgIikuIFRoaXMgZXJyb3IgaXMgbGlrZWx5IGNhdXNlZCBieSBhIGJ1ZyBpbiBSZWFjdC4gUGxlYXNlIGZpbGUgYW4gaXNzdWUuIgogICAgICAgICk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdW53aW5kV29yayhjdXJyZW50Miwgd29ya0luUHJvZ3Jlc3MyKSB7CiAgICAgICAgcG9wVHJlZUNvbnRleHQod29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICBzd2l0Y2ggKHdvcmtJblByb2dyZXNzMi50YWcpIHsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQyID0gd29ya0luUHJvZ3Jlc3MyLmZsYWdzLCBjdXJyZW50MiAmIDY1NTM2ID8gKHdvcmtJblByb2dyZXNzMi5mbGFncyA9IGN1cnJlbnQyICYgLTY1NTM3IHwgMTI4LCAod29ya0luUHJvZ3Jlc3MyLm1vZGUgJiBQcm9maWxlTW9kZSkgIT09IE5vTW9kZSAmJiB0cmFuc2ZlckFjdHVhbER1cmF0aW9uKHdvcmtJblByb2dyZXNzMiksIHdvcmtJblByb2dyZXNzMikgOiBudWxsOwogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICByZXR1cm4gcG9wUHJvdmlkZXIoQ2FjaGVDb250ZXh0LCB3b3JrSW5Qcm9ncmVzczIpLCBwb3BIb3N0Q29udGFpbmVyKHdvcmtJblByb2dyZXNzMiksIGN1cnJlbnQyID0gd29ya0luUHJvZ3Jlc3MyLmZsYWdzLCAwICE9PSAoY3VycmVudDIgJiA2NTUzNikgJiYgMCA9PT0gKGN1cnJlbnQyICYgMTI4KSA/ICh3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgPSBjdXJyZW50MiAmIC02NTUzNyB8IDEyOCwgd29ya0luUHJvZ3Jlc3MyKSA6IG51bGw7CiAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgcmV0dXJuIHBvcEhvc3RDb250ZXh0KHdvcmtJblByb2dyZXNzMiksIG51bGw7CiAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICBwb3BTdXNwZW5zZUhhbmRsZXIod29ya0luUHJvZ3Jlc3MyKTsKICAgICAgICAgICAgY3VycmVudDIgPSB3b3JrSW5Qcm9ncmVzczIubWVtb2l6ZWRTdGF0ZTsKICAgICAgICAgICAgaWYgKG51bGwgIT09IGN1cnJlbnQyICYmIG51bGwgIT09IGN1cnJlbnQyLmRlaHlkcmF0ZWQpIHsKICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gd29ya0luUHJvZ3Jlc3MyLmFsdGVybmF0ZSkKICAgICAgICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAgICAgICAiVGhyZXcgaW4gbmV3bHkgbW91bnRlZCBkZWh5ZHJhdGVkIGNvbXBvbmVudC4gVGhpcyBpcyBsaWtlbHkgYSBidWcgaW4gUmVhY3QuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLiIKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgcmVzZXRIeWRyYXRpb25TdGF0ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGN1cnJlbnQyID0gd29ya0luUHJvZ3Jlc3MyLmZsYWdzOwogICAgICAgICAgICByZXR1cm4gY3VycmVudDIgJiA2NTUzNiA/ICh3b3JrSW5Qcm9ncmVzczIuZmxhZ3MgPSBjdXJyZW50MiAmIC02NTUzNyB8IDEyOCwgKHdvcmtJblByb2dyZXNzMi5tb2RlICYgUHJvZmlsZU1vZGUpICE9PSBOb01vZGUgJiYgdHJhbnNmZXJBY3R1YWxEdXJhdGlvbih3b3JrSW5Qcm9ncmVzczIpLCB3b3JrSW5Qcm9ncmVzczIpIDogbnVsbDsKICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgIHJldHVybiBwb3Aoc3VzcGVuc2VTdGFja0N1cnNvciwgd29ya0luUHJvZ3Jlc3MyKSwgbnVsbDsKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgcmV0dXJuIHBvcEhvc3RDb250YWluZXIod29ya0luUHJvZ3Jlc3MyKSwgbnVsbDsKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIHJldHVybiBwb3BQcm92aWRlcih3b3JrSW5Qcm9ncmVzczIudHlwZSwgd29ya0luUHJvZ3Jlc3MyKSwgbnVsbDsKICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICByZXR1cm4gcG9wU3VzcGVuc2VIYW5kbGVyKHdvcmtJblByb2dyZXNzMiksIHBvcEhpZGRlbkNvbnRleHQod29ya0luUHJvZ3Jlc3MyKSwgbnVsbCAhPT0gY3VycmVudDIgJiYgcG9wKHJlc3VtZWRDYWNoZSwgd29ya0luUHJvZ3Jlc3MyKSwgY3VycmVudDIgPSB3b3JrSW5Qcm9ncmVzczIuZmxhZ3MsIGN1cnJlbnQyICYgNjU1MzYgPyAod29ya0luUHJvZ3Jlc3MyLmZsYWdzID0gY3VycmVudDIgJiAtNjU1MzcgfCAxMjgsICh3b3JrSW5Qcm9ncmVzczIubW9kZSAmIFByb2ZpbGVNb2RlKSAhPT0gTm9Nb2RlICYmIHRyYW5zZmVyQWN0dWFsRHVyYXRpb24od29ya0luUHJvZ3Jlc3MyKSwgd29ya0luUHJvZ3Jlc3MyKSA6IG51bGw7CiAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICByZXR1cm4gcG9wUHJvdmlkZXIoQ2FjaGVDb250ZXh0LCB3b3JrSW5Qcm9ncmVzczIpLCBudWxsOwogICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdW53aW5kSW50ZXJydXB0ZWRXb3JrKGN1cnJlbnQyLCBpbnRlcnJ1cHRlZFdvcmspIHsKICAgICAgICBwb3BUcmVlQ29udGV4dChpbnRlcnJ1cHRlZFdvcmspOwogICAgICAgIHN3aXRjaCAoaW50ZXJydXB0ZWRXb3JrLnRhZykgewogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBwb3BQcm92aWRlcihDYWNoZUNvbnRleHQsIGludGVycnVwdGVkV29yayk7CiAgICAgICAgICAgIHBvcEhvc3RDb250YWluZXIoaW50ZXJydXB0ZWRXb3JrKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgcG9wSG9zdENvbnRleHQoaW50ZXJydXB0ZWRXb3JrKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHBvcEhvc3RDb250YWluZXIoaW50ZXJydXB0ZWRXb3JrKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICBwb3BTdXNwZW5zZUhhbmRsZXIoaW50ZXJydXB0ZWRXb3JrKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICBwb3Aoc3VzcGVuc2VTdGFja0N1cnNvciwgaW50ZXJydXB0ZWRXb3JrKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBwb3BQcm92aWRlcihpbnRlcnJ1cHRlZFdvcmsudHlwZSwgaW50ZXJydXB0ZWRXb3JrKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgcG9wU3VzcGVuc2VIYW5kbGVyKGludGVycnVwdGVkV29yayk7CiAgICAgICAgICAgIHBvcEhpZGRlbkNvbnRleHQoaW50ZXJydXB0ZWRXb3JrKTsKICAgICAgICAgICAgbnVsbCAhPT0gY3VycmVudDIgJiYgcG9wKHJlc3VtZWRDYWNoZSwgaW50ZXJydXB0ZWRXb3JrKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICBwb3BQcm92aWRlcihDYWNoZUNvbnRleHQsIGludGVycnVwdGVkV29yayk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIHNob3VsZFByb2ZpbGUoY3VycmVudDIpIHsKICAgICAgICByZXR1cm4gKGN1cnJlbnQyLm1vZGUgJiBQcm9maWxlTW9kZSkgIT09IE5vTW9kZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjb21taXRIb29rTGF5b3V0RWZmZWN0cyhmaW5pc2hlZFdvcmssIGhvb2tGbGFncykgewogICAgICAgIHNob3VsZFByb2ZpbGUoZmluaXNoZWRXb3JrKSA/IChzdGFydEVmZmVjdFRpbWVyKCksIGNvbW1pdEhvb2tFZmZlY3RMaXN0TW91bnQoaG9va0ZsYWdzLCBmaW5pc2hlZFdvcmspLCByZWNvcmRFZmZlY3REdXJhdGlvbigpKSA6IGNvbW1pdEhvb2tFZmZlY3RMaXN0TW91bnQoaG9va0ZsYWdzLCBmaW5pc2hlZFdvcmspOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNvbW1pdEhvb2tMYXlvdXRVbm1vdW50RWZmZWN0cyhmaW5pc2hlZFdvcmssIG5lYXJlc3RNb3VudGVkQW5jZXN0b3IsIGhvb2tGbGFncykgewogICAgICAgIHNob3VsZFByb2ZpbGUoZmluaXNoZWRXb3JrKSA/IChzdGFydEVmZmVjdFRpbWVyKCksIGNvbW1pdEhvb2tFZmZlY3RMaXN0VW5tb3VudCgKICAgICAgICAgIGhvb2tGbGFncywKICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgIG5lYXJlc3RNb3VudGVkQW5jZXN0b3IKICAgICAgICApLCByZWNvcmRFZmZlY3REdXJhdGlvbigpKSA6IGNvbW1pdEhvb2tFZmZlY3RMaXN0VW5tb3VudCgKICAgICAgICAgIGhvb2tGbGFncywKICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgIG5lYXJlc3RNb3VudGVkQW5jZXN0b3IKICAgICAgICApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNvbW1pdEhvb2tFZmZlY3RMaXN0TW91bnQoZmxhZ3MsIGZpbmlzaGVkV29yaykgewogICAgICAgIHRyeSB7CiAgICAgICAgICB2YXIgdXBkYXRlUXVldWUgPSBmaW5pc2hlZFdvcmsudXBkYXRlUXVldWUsIGxhc3RFZmZlY3QgPSBudWxsICE9PSB1cGRhdGVRdWV1ZSA/IHVwZGF0ZVF1ZXVlLmxhc3RFZmZlY3QgOiBudWxsOwogICAgICAgICAgaWYgKG51bGwgIT09IGxhc3RFZmZlY3QpIHsKICAgICAgICAgICAgdmFyIGZpcnN0RWZmZWN0ID0gbGFzdEVmZmVjdC5uZXh0OwogICAgICAgICAgICB1cGRhdGVRdWV1ZSA9IGZpcnN0RWZmZWN0OwogICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgaWYgKCh1cGRhdGVRdWV1ZS50YWcgJiBmbGFncykgPT09IGZsYWdzICYmICgoZmxhZ3MgJiBQYXNzaXZlKSAhPT0gTm9GbGFncyA/IG51bGwgIT09IGluamVjdGVkUHJvZmlsaW5nSG9va3MgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGluamVjdGVkUHJvZmlsaW5nSG9va3MubWFya0NvbXBvbmVudFBhc3NpdmVFZmZlY3RNb3VudFN0YXJ0ZWQgJiYgaW5qZWN0ZWRQcm9maWxpbmdIb29rcy5tYXJrQ29tcG9uZW50UGFzc2l2ZUVmZmVjdE1vdW50U3RhcnRlZCgKICAgICAgICAgICAgICAgIGZpbmlzaGVkV29yawogICAgICAgICAgICAgICkgOiAoZmxhZ3MgJiBMYXlvdXQpICE9PSBOb0ZsYWdzICYmIG51bGwgIT09IGluamVjdGVkUHJvZmlsaW5nSG9va3MgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGluamVjdGVkUHJvZmlsaW5nSG9va3MubWFya0NvbXBvbmVudExheW91dEVmZmVjdE1vdW50U3RhcnRlZCAmJiBpbmplY3RlZFByb2ZpbGluZ0hvb2tzLm1hcmtDb21wb25lbnRMYXlvdXRFZmZlY3RNb3VudFN0YXJ0ZWQoCiAgICAgICAgICAgICAgICBmaW5pc2hlZFdvcmsKICAgICAgICAgICAgICApLCBsYXN0RWZmZWN0ID0gdm9pZCAwLCAoZmxhZ3MgJiBJbnNlcnRpb24pICE9PSBOb0ZsYWdzICYmIChpc1J1bm5pbmdJbnNlcnRpb25FZmZlY3QgPSB0cnVlKSwgbGFzdEVmZmVjdCA9IHJ1bldpdGhGaWJlckluREVWKAogICAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLAogICAgICAgICAgICAgICAgY2FsbENyZWF0ZUluREVWLAogICAgICAgICAgICAgICAgdXBkYXRlUXVldWUKICAgICAgICAgICAgICApLCAoZmxhZ3MgJiBJbnNlcnRpb24pICE9PSBOb0ZsYWdzICYmIChpc1J1bm5pbmdJbnNlcnRpb25FZmZlY3QgPSBmYWxzZSksIChmbGFncyAmIFBhc3NpdmUpICE9PSBOb0ZsYWdzID8gbnVsbCAhPT0gaW5qZWN0ZWRQcm9maWxpbmdIb29rcyAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgaW5qZWN0ZWRQcm9maWxpbmdIb29rcy5tYXJrQ29tcG9uZW50UGFzc2l2ZUVmZmVjdE1vdW50U3RvcHBlZCAmJiBpbmplY3RlZFByb2ZpbGluZ0hvb2tzLm1hcmtDb21wb25lbnRQYXNzaXZlRWZmZWN0TW91bnRTdG9wcGVkKCkgOiAoZmxhZ3MgJiBMYXlvdXQpICE9PSBOb0ZsYWdzICYmIG51bGwgIT09IGluamVjdGVkUHJvZmlsaW5nSG9va3MgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGluamVjdGVkUHJvZmlsaW5nSG9va3MubWFya0NvbXBvbmVudExheW91dEVmZmVjdE1vdW50U3RvcHBlZCAmJiBpbmplY3RlZFByb2ZpbGluZ0hvb2tzLm1hcmtDb21wb25lbnRMYXlvdXRFZmZlY3RNb3VudFN0b3BwZWQoKSwgdm9pZCAwICE9PSBsYXN0RWZmZWN0ICYmICJmdW5jdGlvbiIgIT09IHR5cGVvZiBsYXN0RWZmZWN0KSkgewogICAgICAgICAgICAgICAgdmFyIGhvb2tOYW1lID0gdm9pZCAwOwogICAgICAgICAgICAgICAgaG9va05hbWUgPSAwICE9PSAodXBkYXRlUXVldWUudGFnICYgTGF5b3V0KSA/ICJ1c2VMYXlvdXRFZmZlY3QiIDogMCAhPT0gKHVwZGF0ZVF1ZXVlLnRhZyAmIEluc2VydGlvbikgPyAidXNlSW5zZXJ0aW9uRWZmZWN0IiA6ICJ1c2VFZmZlY3QiOwogICAgICAgICAgICAgICAgdmFyIGFkZGVuZHVtID0gdm9pZCAwOwogICAgICAgICAgICAgICAgYWRkZW5kdW0gPSBudWxsID09PSBsYXN0RWZmZWN0ID8gIiBZb3UgcmV0dXJuZWQgbnVsbC4gSWYgeW91ciBlZmZlY3QgZG9lcyBub3QgcmVxdWlyZSBjbGVhbiB1cCwgcmV0dXJuIHVuZGVmaW5lZCAob3Igbm90aGluZykuIiA6ICJmdW5jdGlvbiIgPT09IHR5cGVvZiBsYXN0RWZmZWN0LnRoZW4gPyAiXG5cbkl0IGxvb2tzIGxpa2UgeW91IHdyb3RlICIgKyBob29rTmFtZSArICIoYXN5bmMgKCkgPT4gLi4uKSBvciByZXR1cm5lZCBhIFByb21pc2UuIEluc3RlYWQsIHdyaXRlIHRoZSBhc3luYyBmdW5jdGlvbiBpbnNpZGUgeW91ciBlZmZlY3QgYW5kIGNhbGwgaXQgaW1tZWRpYXRlbHk6XG5cbiIgKyBob29rTmFtZSArICIoKCkgPT4ge1xuICBhc3luYyBmdW5jdGlvbiBmZXRjaERhdGEoKSB7XG4gICAgLy8gWW91IGNhbiBhd2FpdCBoZXJlXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBNeUFQSS5nZXREYXRhKHNvbWVJZCk7XG4gICAgLy8gLi4uXG4gIH1cbiAgZmV0Y2hEYXRhKCk7XG59LCBbc29tZUlkXSk7IC8vIE9yIFtdIGlmIGVmZmVjdCBkb2Vzbid0IG5lZWQgcHJvcHMgb3Igc3RhdGVcblxuTGVhcm4gbW9yZSBhYm91dCBkYXRhIGZldGNoaW5nIHdpdGggSG9va3M6IGh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvaG9va3MtZGF0YS1mZXRjaGluZyIgOiAiIFlvdSByZXR1cm5lZDogIiArIGxhc3RFZmZlY3Q7CiAgICAgICAgICAgICAgICBydW5XaXRoRmliZXJJbkRFVigKICAgICAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLAogICAgICAgICAgICAgICAgICBmdW5jdGlvbihuLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAgICAgICAgICIlcyBtdXN0IG5vdCByZXR1cm4gYW55dGhpbmcgYmVzaWRlcyBhIGZ1bmN0aW9uLCB3aGljaCBpcyB1c2VkIGZvciBjbGVhbi11cC4lcyIsCiAgICAgICAgICAgICAgICAgICAgICBuLAogICAgICAgICAgICAgICAgICAgICAgYQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGhvb2tOYW1lLAogICAgICAgICAgICAgICAgICBhZGRlbmR1bQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdXBkYXRlUXVldWUgPSB1cGRhdGVRdWV1ZS5uZXh0OwogICAgICAgICAgICB9IHdoaWxlICh1cGRhdGVRdWV1ZSAhPT0gZmlyc3RFZmZlY3QpOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBjYXB0dXJlQ29tbWl0UGhhc2VFcnJvcihmaW5pc2hlZFdvcmssIGZpbmlzaGVkV29yay5yZXR1cm4sIGVycm9yKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY29tbWl0SG9va0VmZmVjdExpc3RVbm1vdW50KGZsYWdzLCBmaW5pc2hlZFdvcmssIG5lYXJlc3RNb3VudGVkQW5jZXN0b3IpIHsKICAgICAgICB0cnkgewogICAgICAgICAgdmFyIHVwZGF0ZVF1ZXVlID0gZmluaXNoZWRXb3JrLnVwZGF0ZVF1ZXVlLCBsYXN0RWZmZWN0ID0gbnVsbCAhPT0gdXBkYXRlUXVldWUgPyB1cGRhdGVRdWV1ZS5sYXN0RWZmZWN0IDogbnVsbDsKICAgICAgICAgIGlmIChudWxsICE9PSBsYXN0RWZmZWN0KSB7CiAgICAgICAgICAgIHZhciBmaXJzdEVmZmVjdCA9IGxhc3RFZmZlY3QubmV4dDsKICAgICAgICAgICAgdXBkYXRlUXVldWUgPSBmaXJzdEVmZmVjdDsKICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgIGlmICgodXBkYXRlUXVldWUudGFnICYgZmxhZ3MpID09PSBmbGFncykgewogICAgICAgICAgICAgICAgdmFyIGluc3QgPSB1cGRhdGVRdWV1ZS5pbnN0LCBkZXN0cm95ID0gaW5zdC5kZXN0cm95OwogICAgICAgICAgICAgICAgdm9pZCAwICE9PSBkZXN0cm95ICYmIChpbnN0LmRlc3Ryb3kgPSB2b2lkIDAsIChmbGFncyAmIFBhc3NpdmUpICE9PSBOb0ZsYWdzID8gbnVsbCAhPT0gaW5qZWN0ZWRQcm9maWxpbmdIb29rcyAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgaW5qZWN0ZWRQcm9maWxpbmdIb29rcy5tYXJrQ29tcG9uZW50UGFzc2l2ZUVmZmVjdFVubW91bnRTdGFydGVkICYmIGluamVjdGVkUHJvZmlsaW5nSG9va3MubWFya0NvbXBvbmVudFBhc3NpdmVFZmZlY3RVbm1vdW50U3RhcnRlZCgKICAgICAgICAgICAgICAgICAgZmluaXNoZWRXb3JrCiAgICAgICAgICAgICAgICApIDogKGZsYWdzICYgTGF5b3V0KSAhPT0gTm9GbGFncyAmJiBudWxsICE9PSBpbmplY3RlZFByb2ZpbGluZ0hvb2tzICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBpbmplY3RlZFByb2ZpbGluZ0hvb2tzLm1hcmtDb21wb25lbnRMYXlvdXRFZmZlY3RVbm1vdW50U3RhcnRlZCAmJiBpbmplY3RlZFByb2ZpbGluZ0hvb2tzLm1hcmtDb21wb25lbnRMYXlvdXRFZmZlY3RVbm1vdW50U3RhcnRlZCgKICAgICAgICAgICAgICAgICAgZmluaXNoZWRXb3JrCiAgICAgICAgICAgICAgICApLCAoZmxhZ3MgJiBJbnNlcnRpb24pICE9PSBOb0ZsYWdzICYmIChpc1J1bm5pbmdJbnNlcnRpb25FZmZlY3QgPSB0cnVlKSwgbGFzdEVmZmVjdCA9IGZpbmlzaGVkV29yaywgcnVuV2l0aEZpYmVySW5ERVYoCiAgICAgICAgICAgICAgICAgIGxhc3RFZmZlY3QsCiAgICAgICAgICAgICAgICAgIGNhbGxEZXN0cm95SW5ERVYsCiAgICAgICAgICAgICAgICAgIGxhc3RFZmZlY3QsCiAgICAgICAgICAgICAgICAgIG5lYXJlc3RNb3VudGVkQW5jZXN0b3IsCiAgICAgICAgICAgICAgICAgIGRlc3Ryb3kKICAgICAgICAgICAgICAgICksIChmbGFncyAmIEluc2VydGlvbikgIT09IE5vRmxhZ3MgJiYgKGlzUnVubmluZ0luc2VydGlvbkVmZmVjdCA9IGZhbHNlKSwgKGZsYWdzICYgUGFzc2l2ZSkgIT09IE5vRmxhZ3MgPyBudWxsICE9PSBpbmplY3RlZFByb2ZpbGluZ0hvb2tzICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBpbmplY3RlZFByb2ZpbGluZ0hvb2tzLm1hcmtDb21wb25lbnRQYXNzaXZlRWZmZWN0VW5tb3VudFN0b3BwZWQgJiYgaW5qZWN0ZWRQcm9maWxpbmdIb29rcy5tYXJrQ29tcG9uZW50UGFzc2l2ZUVmZmVjdFVubW91bnRTdG9wcGVkKCkgOiAoZmxhZ3MgJiBMYXlvdXQpICE9PSBOb0ZsYWdzICYmIG51bGwgIT09IGluamVjdGVkUHJvZmlsaW5nSG9va3MgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGluamVjdGVkUHJvZmlsaW5nSG9va3MubWFya0NvbXBvbmVudExheW91dEVmZmVjdFVubW91bnRTdG9wcGVkICYmIGluamVjdGVkUHJvZmlsaW5nSG9va3MubWFya0NvbXBvbmVudExheW91dEVmZmVjdFVubW91bnRTdG9wcGVkKCkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB1cGRhdGVRdWV1ZSA9IHVwZGF0ZVF1ZXVlLm5leHQ7CiAgICAgICAgICAgIH0gd2hpbGUgKHVwZGF0ZVF1ZXVlICE9PSBmaXJzdEVmZmVjdCk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIGNhcHR1cmVDb21taXRQaGFzZUVycm9yKGZpbmlzaGVkV29yaywgZmluaXNoZWRXb3JrLnJldHVybiwgZXJyb3IpOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBjb21taXRIb29rUGFzc2l2ZU1vdW50RWZmZWN0cyhmaW5pc2hlZFdvcmssIGhvb2tGbGFncykgewogICAgICAgIHNob3VsZFByb2ZpbGUoZmluaXNoZWRXb3JrKSA/IChzdGFydEVmZmVjdFRpbWVyKCksIGNvbW1pdEhvb2tFZmZlY3RMaXN0TW91bnQoaG9va0ZsYWdzLCBmaW5pc2hlZFdvcmspLCByZWNvcmRFZmZlY3REdXJhdGlvbigpKSA6IGNvbW1pdEhvb2tFZmZlY3RMaXN0TW91bnQoaG9va0ZsYWdzLCBmaW5pc2hlZFdvcmspOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNvbW1pdEhvb2tQYXNzaXZlVW5tb3VudEVmZmVjdHMoZmluaXNoZWRXb3JrLCBuZWFyZXN0TW91bnRlZEFuY2VzdG9yLCBob29rRmxhZ3MpIHsKICAgICAgICBzaG91bGRQcm9maWxlKGZpbmlzaGVkV29yaykgPyAoc3RhcnRFZmZlY3RUaW1lcigpLCBjb21taXRIb29rRWZmZWN0TGlzdFVubW91bnQoCiAgICAgICAgICBob29rRmxhZ3MsCiAgICAgICAgICBmaW5pc2hlZFdvcmssCiAgICAgICAgICBuZWFyZXN0TW91bnRlZEFuY2VzdG9yCiAgICAgICAgKSwgcmVjb3JkRWZmZWN0RHVyYXRpb24oKSkgOiBjb21taXRIb29rRWZmZWN0TGlzdFVubW91bnQoCiAgICAgICAgICBob29rRmxhZ3MsCiAgICAgICAgICBmaW5pc2hlZFdvcmssCiAgICAgICAgICBuZWFyZXN0TW91bnRlZEFuY2VzdG9yCiAgICAgICAgKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjb21taXRDbGFzc0NhbGxiYWNrcyhmaW5pc2hlZFdvcmspIHsKICAgICAgICB2YXIgdXBkYXRlUXVldWUgPSBmaW5pc2hlZFdvcmsudXBkYXRlUXVldWU7CiAgICAgICAgaWYgKG51bGwgIT09IHVwZGF0ZVF1ZXVlKSB7CiAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBmaW5pc2hlZFdvcmsuc3RhdGVOb2RlOwogICAgICAgICAgZmluaXNoZWRXb3JrLnR5cGUuZGVmYXVsdFByb3BzIHx8ICJyZWYiIGluIGZpbmlzaGVkV29yay5tZW1vaXplZFByb3BzIHx8IGRpZFdhcm5BYm91dFJlYXNzaWduaW5nUHJvcHMgfHwgKGluc3RhbmNlLnByb3BzICE9PSBmaW5pc2hlZFdvcmsubWVtb2l6ZWRQcm9wcyAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiRXhwZWN0ZWQgJXMgcHJvcHMgdG8gbWF0Y2ggbWVtb2l6ZWQgcHJvcHMgYmVmb3JlIHByb2Nlc3NpbmcgdGhlIHVwZGF0ZSBxdWV1ZS4gVGhpcyBtaWdodCBlaXRoZXIgYmUgYmVjYXVzZSBvZiBhIGJ1ZyBpbiBSZWFjdCwgb3IgYmVjYXVzZSBhIGNvbXBvbmVudCByZWFzc2lnbnMgaXRzIG93biBgdGhpcy5wcm9wc2AuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLiIsCiAgICAgICAgICAgIGdldENvbXBvbmVudE5hbWVGcm9tRmliZXIoZmluaXNoZWRXb3JrKSB8fCAiaW5zdGFuY2UiCiAgICAgICAgICApLCBpbnN0YW5jZS5zdGF0ZSAhPT0gZmluaXNoZWRXb3JrLm1lbW9pemVkU3RhdGUgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIkV4cGVjdGVkICVzIHN0YXRlIHRvIG1hdGNoIG1lbW9pemVkIHN0YXRlIGJlZm9yZSBwcm9jZXNzaW5nIHRoZSB1cGRhdGUgcXVldWUuIFRoaXMgbWlnaHQgZWl0aGVyIGJlIGJlY2F1c2Ugb2YgYSBidWcgaW4gUmVhY3QsIG9yIGJlY2F1c2UgYSBjb21wb25lbnQgcmVhc3NpZ25zIGl0cyBvd24gYHRoaXMuc3RhdGVgLiBQbGVhc2UgZmlsZSBhbiBpc3N1ZS4iLAogICAgICAgICAgICBnZXRDb21wb25lbnROYW1lRnJvbUZpYmVyKGZpbmlzaGVkV29yaykgfHwgImluc3RhbmNlIgogICAgICAgICAgKSk7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBydW5XaXRoRmliZXJJbkRFVigKICAgICAgICAgICAgICBmaW5pc2hlZFdvcmssCiAgICAgICAgICAgICAgY29tbWl0Q2FsbGJhY2tzLAogICAgICAgICAgICAgIHVwZGF0ZVF1ZXVlLAogICAgICAgICAgICAgIGluc3RhbmNlCiAgICAgICAgICAgICk7CiAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICBjYXB0dXJlQ29tbWl0UGhhc2VFcnJvcihmaW5pc2hlZFdvcmssIGZpbmlzaGVkV29yay5yZXR1cm4sIGVycm9yKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY2FsbEdldFNuYXBzaG90QmVmb3JlVXBkYXRlcyhpbnN0YW5jZSwgcHJldlByb3BzLCBwcmV2U3RhdGUpIHsKICAgICAgICByZXR1cm4gaW5zdGFuY2UuZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNvbW1pdENsYXNzU25hcHNob3QoZmluaXNoZWRXb3JrLCBjdXJyZW50MikgewogICAgICAgIHZhciBwcmV2UHJvcHMgPSBjdXJyZW50Mi5tZW1vaXplZFByb3BzLCBwcmV2U3RhdGUgPSBjdXJyZW50Mi5tZW1vaXplZFN0YXRlOwogICAgICAgIGN1cnJlbnQyID0gZmluaXNoZWRXb3JrLnN0YXRlTm9kZTsKICAgICAgICBmaW5pc2hlZFdvcmsudHlwZS5kZWZhdWx0UHJvcHMgfHwgInJlZiIgaW4gZmluaXNoZWRXb3JrLm1lbW9pemVkUHJvcHMgfHwgZGlkV2FybkFib3V0UmVhc3NpZ25pbmdQcm9wcyB8fCAoY3VycmVudDIucHJvcHMgIT09IGZpbmlzaGVkV29yay5tZW1vaXplZFByb3BzICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiRXhwZWN0ZWQgJXMgcHJvcHMgdG8gbWF0Y2ggbWVtb2l6ZWQgcHJvcHMgYmVmb3JlIGdldFNuYXBzaG90QmVmb3JlVXBkYXRlLiBUaGlzIG1pZ2h0IGVpdGhlciBiZSBiZWNhdXNlIG9mIGEgYnVnIGluIFJlYWN0LCBvciBiZWNhdXNlIGEgY29tcG9uZW50IHJlYXNzaWducyBpdHMgb3duIGB0aGlzLnByb3BzYC4gUGxlYXNlIGZpbGUgYW4gaXNzdWUuIiwKICAgICAgICAgIGdldENvbXBvbmVudE5hbWVGcm9tRmliZXIoZmluaXNoZWRXb3JrKSB8fCAiaW5zdGFuY2UiCiAgICAgICAgKSwgY3VycmVudDIuc3RhdGUgIT09IGZpbmlzaGVkV29yay5tZW1vaXplZFN0YXRlICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiRXhwZWN0ZWQgJXMgc3RhdGUgdG8gbWF0Y2ggbWVtb2l6ZWQgc3RhdGUgYmVmb3JlIGdldFNuYXBzaG90QmVmb3JlVXBkYXRlLiBUaGlzIG1pZ2h0IGVpdGhlciBiZSBiZWNhdXNlIG9mIGEgYnVnIGluIFJlYWN0LCBvciBiZWNhdXNlIGEgY29tcG9uZW50IHJlYXNzaWducyBpdHMgb3duIGB0aGlzLnN0YXRlYC4gUGxlYXNlIGZpbGUgYW4gaXNzdWUuIiwKICAgICAgICAgIGdldENvbXBvbmVudE5hbWVGcm9tRmliZXIoZmluaXNoZWRXb3JrKSB8fCAiaW5zdGFuY2UiCiAgICAgICAgKSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciByZXNvbHZlZFByZXZQcm9wcyA9IHJlc29sdmVDbGFzc0NvbXBvbmVudFByb3BzKAogICAgICAgICAgICBmaW5pc2hlZFdvcmsudHlwZSwKICAgICAgICAgICAgcHJldlByb3BzLAogICAgICAgICAgICBmaW5pc2hlZFdvcmsuZWxlbWVudFR5cGUgPT09IGZpbmlzaGVkV29yay50eXBlCiAgICAgICAgICApOwogICAgICAgICAgdmFyIHNuYXBzaG90ID0gcnVuV2l0aEZpYmVySW5ERVYoCiAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgY2FsbEdldFNuYXBzaG90QmVmb3JlVXBkYXRlcywKICAgICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICAgIHJlc29sdmVkUHJldlByb3BzLAogICAgICAgICAgICBwcmV2U3RhdGUKICAgICAgICAgICk7CiAgICAgICAgICBwcmV2UHJvcHMgPSBkaWRXYXJuQWJvdXRVbmRlZmluZWRTbmFwc2hvdEJlZm9yZVVwZGF0ZTsKICAgICAgICAgIHZvaWQgMCAhPT0gc25hcHNob3QgfHwgcHJldlByb3BzLmhhcyhmaW5pc2hlZFdvcmsudHlwZSkgfHwgKHByZXZQcm9wcy5hZGQoZmluaXNoZWRXb3JrLnR5cGUpLCBydW5XaXRoRmliZXJJbkRFVihmaW5pc2hlZFdvcmssIGZ1bmN0aW9uKCkgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICIlcy5nZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZSgpOiBBIHNuYXBzaG90IHZhbHVlIChvciBudWxsKSBtdXN0IGJlIHJldHVybmVkLiBZb3UgaGF2ZSByZXR1cm5lZCB1bmRlZmluZWQuIiwKICAgICAgICAgICAgICBnZXRDb21wb25lbnROYW1lRnJvbUZpYmVyKGZpbmlzaGVkV29yaykKICAgICAgICAgICAgKTsKICAgICAgICAgIH0pKTsKICAgICAgICAgIGN1cnJlbnQyLl9fcmVhY3RJbnRlcm5hbFNuYXBzaG90QmVmb3JlVXBkYXRlID0gc25hcHNob3Q7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIGNhcHR1cmVDb21taXRQaGFzZUVycm9yKGZpbmlzaGVkV29yaywgZmluaXNoZWRXb3JrLnJldHVybiwgZXJyb3IpOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBzYWZlbHlDYWxsQ29tcG9uZW50V2lsbFVubW91bnQoY3VycmVudDIsIG5lYXJlc3RNb3VudGVkQW5jZXN0b3IsIGluc3RhbmNlKSB7CiAgICAgICAgaW5zdGFuY2UucHJvcHMgPSByZXNvbHZlQ2xhc3NDb21wb25lbnRQcm9wcygKICAgICAgICAgIGN1cnJlbnQyLnR5cGUsCiAgICAgICAgICBjdXJyZW50Mi5tZW1vaXplZFByb3BzCiAgICAgICAgKTsKICAgICAgICBpbnN0YW5jZS5zdGF0ZSA9IGN1cnJlbnQyLm1lbW9pemVkU3RhdGU7CiAgICAgICAgc2hvdWxkUHJvZmlsZShjdXJyZW50MikgPyAoc3RhcnRFZmZlY3RUaW1lcigpLCBydW5XaXRoRmliZXJJbkRFVigKICAgICAgICAgIGN1cnJlbnQyLAogICAgICAgICAgY2FsbENvbXBvbmVudFdpbGxVbm1vdW50SW5ERVYsCiAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgIG5lYXJlc3RNb3VudGVkQW5jZXN0b3IsCiAgICAgICAgICBpbnN0YW5jZQogICAgICAgICksIHJlY29yZEVmZmVjdER1cmF0aW9uKCkpIDogcnVuV2l0aEZpYmVySW5ERVYoCiAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgIGNhbGxDb21wb25lbnRXaWxsVW5tb3VudEluREVWLAogICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICBuZWFyZXN0TW91bnRlZEFuY2VzdG9yLAogICAgICAgICAgaW5zdGFuY2UKICAgICAgICApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNvbW1pdEF0dGFjaFJlZihmaW5pc2hlZFdvcmspIHsKICAgICAgICB2YXIgcmVmID0gZmluaXNoZWRXb3JrLnJlZjsKICAgICAgICBpZiAobnVsbCAhPT0gcmVmKSB7CiAgICAgICAgICBzd2l0Y2ggKGZpbmlzaGVkV29yay50YWcpIHsKICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIHZhciBpbnN0YW5jZVRvVXNlID0gZmluaXNoZWRXb3JrLnN0YXRlTm9kZTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAzMDoKICAgICAgICAgICAgICBpbnN0YW5jZVRvVXNlID0gZmluaXNoZWRXb3JrLnN0YXRlTm9kZTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICBpbnN0YW5jZVRvVXNlID0gZmluaXNoZWRXb3JrLnN0YXRlTm9kZTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09PSB0eXBlb2YgcmVmKQogICAgICAgICAgICBpZiAoc2hvdWxkUHJvZmlsZShmaW5pc2hlZFdvcmspKQogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBzdGFydEVmZmVjdFRpbWVyKCksIGZpbmlzaGVkV29yay5yZWZDbGVhbnVwID0gcmVmKGluc3RhbmNlVG9Vc2UpOwogICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICByZWNvcmRFZmZlY3REdXJhdGlvbigpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBmaW5pc2hlZFdvcmsucmVmQ2xlYW51cCA9IHJlZihpbnN0YW5jZVRvVXNlKTsKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgInN0cmluZyIgPT09IHR5cGVvZiByZWYgPyBjb25zb2xlLmVycm9yKCJTdHJpbmcgcmVmcyBhcmUgbm8gbG9uZ2VyIHN1cHBvcnRlZC4iKSA6IHJlZi5oYXNPd25Qcm9wZXJ0eSgiY3VycmVudCIpIHx8IGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgIlVuZXhwZWN0ZWQgcmVmIG9iamVjdCBwcm92aWRlZCBmb3IgJXMuIFVzZSBlaXRoZXIgYSByZWYtc2V0dGVyIGZ1bmN0aW9uIG9yIFJlYWN0LmNyZWF0ZVJlZigpLiIsCiAgICAgICAgICAgICAgZ2V0Q29tcG9uZW50TmFtZUZyb21GaWJlcihmaW5pc2hlZFdvcmspCiAgICAgICAgICAgICksIHJlZi5jdXJyZW50ID0gaW5zdGFuY2VUb1VzZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gc2FmZWx5QXR0YWNoUmVmKGN1cnJlbnQyLCBuZWFyZXN0TW91bnRlZEFuY2VzdG9yKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJ1bldpdGhGaWJlckluREVWKGN1cnJlbnQyLCBjb21taXRBdHRhY2hSZWYsIGN1cnJlbnQyKTsKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgY2FwdHVyZUNvbW1pdFBoYXNlRXJyb3IoY3VycmVudDIsIG5lYXJlc3RNb3VudGVkQW5jZXN0b3IsIGVycm9yKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gc2FmZWx5RGV0YWNoUmVmKGN1cnJlbnQyLCBuZWFyZXN0TW91bnRlZEFuY2VzdG9yKSB7CiAgICAgICAgdmFyIHJlZiA9IGN1cnJlbnQyLnJlZiwgcmVmQ2xlYW51cCA9IGN1cnJlbnQyLnJlZkNsZWFudXA7CiAgICAgICAgaWYgKG51bGwgIT09IHJlZikKICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09PSB0eXBlb2YgcmVmQ2xlYW51cCkKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBpZiAoc2hvdWxkUHJvZmlsZShjdXJyZW50MikpCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBzdGFydEVmZmVjdFRpbWVyKCksIHJ1bldpdGhGaWJlckluREVWKGN1cnJlbnQyLCByZWZDbGVhbnVwKTsKICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgIHJlY29yZEVmZmVjdER1cmF0aW9uKGN1cnJlbnQyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIHJ1bldpdGhGaWJlckluREVWKGN1cnJlbnQyLCByZWZDbGVhbnVwKTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICBjYXB0dXJlQ29tbWl0UGhhc2VFcnJvcihjdXJyZW50MiwgbmVhcmVzdE1vdW50ZWRBbmNlc3RvciwgZXJyb3IpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIGN1cnJlbnQyLnJlZkNsZWFudXAgPSBudWxsLCBjdXJyZW50MiA9IGN1cnJlbnQyLmFsdGVybmF0ZSwgbnVsbCAhPSBjdXJyZW50MiAmJiAoY3VycmVudDIucmVmQ2xlYW51cCA9IG51bGwpOwogICAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmICgiZnVuY3Rpb24iID09PSB0eXBlb2YgcmVmKQogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGlmIChzaG91bGRQcm9maWxlKGN1cnJlbnQyKSkKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIHN0YXJ0RWZmZWN0VGltZXIoKSwgcnVuV2l0aEZpYmVySW5ERVYoY3VycmVudDIsIHJlZiwgbnVsbCk7CiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICByZWNvcmRFZmZlY3REdXJhdGlvbihjdXJyZW50Mik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSBydW5XaXRoRmliZXJJbkRFVihjdXJyZW50MiwgcmVmLCBudWxsKTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IkNykgewogICAgICAgICAgICAgIGNhcHR1cmVDb21taXRQaGFzZUVycm9yKGN1cnJlbnQyLCBuZWFyZXN0TW91bnRlZEFuY2VzdG9yLCBlcnJvciQ3KTsKICAgICAgICAgICAgfQogICAgICAgICAgZWxzZSByZWYuY3VycmVudCA9IG51bGw7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY29tbWl0UHJvZmlsZXIoZmluaXNoZWRXb3JrLCBjdXJyZW50MiwgY29tbWl0U3RhcnRUaW1lMiwgZWZmZWN0RHVyYXRpb24pIHsKICAgICAgICB2YXIgX2ZpbmlzaGVkV29yayRtZW1vaXplID0gZmluaXNoZWRXb3JrLm1lbW9pemVkUHJvcHMsIGlkID0gX2ZpbmlzaGVkV29yayRtZW1vaXplLmlkLCBvbkNvbW1pdCA9IF9maW5pc2hlZFdvcmskbWVtb2l6ZS5vbkNvbW1pdDsKICAgICAgICBfZmluaXNoZWRXb3JrJG1lbW9pemUgPSBfZmluaXNoZWRXb3JrJG1lbW9pemUub25SZW5kZXI7CiAgICAgICAgY3VycmVudDIgPSBudWxsID09PSBjdXJyZW50MiA/ICJtb3VudCIgOiAidXBkYXRlIjsKICAgICAgICBjdXJyZW50VXBkYXRlSXNOZXN0ZWQgJiYgKGN1cnJlbnQyID0gIm5lc3RlZC11cGRhdGUiKTsKICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgX2ZpbmlzaGVkV29yayRtZW1vaXplICYmIF9maW5pc2hlZFdvcmskbWVtb2l6ZSgKICAgICAgICAgIGlkLAogICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICBmaW5pc2hlZFdvcmsuYWN0dWFsRHVyYXRpb24sCiAgICAgICAgICBmaW5pc2hlZFdvcmsudHJlZUJhc2VEdXJhdGlvbiwKICAgICAgICAgIGZpbmlzaGVkV29yay5hY3R1YWxTdGFydFRpbWUsCiAgICAgICAgICBjb21taXRTdGFydFRpbWUyCiAgICAgICAgKTsKICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2Ygb25Db21taXQgJiYgb25Db21taXQoCiAgICAgICAgICBmaW5pc2hlZFdvcmsubWVtb2l6ZWRQcm9wcy5pZCwKICAgICAgICAgIGN1cnJlbnQyLAogICAgICAgICAgZWZmZWN0RHVyYXRpb24sCiAgICAgICAgICBjb21taXRTdGFydFRpbWUyCiAgICAgICAgKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjb21taXRQcm9maWxlclBvc3RDb21taXRJbXBsKGZpbmlzaGVkV29yaywgY3VycmVudDIsIGNvbW1pdFN0YXJ0VGltZTIsIHBhc3NpdmVFZmZlY3REdXJhdGlvbikgewogICAgICAgIHZhciBfZmluaXNoZWRXb3JrJG1lbW9pemUyID0gZmluaXNoZWRXb3JrLm1lbW9pemVkUHJvcHM7CiAgICAgICAgZmluaXNoZWRXb3JrID0gX2ZpbmlzaGVkV29yayRtZW1vaXplMi5pZDsKICAgICAgICBfZmluaXNoZWRXb3JrJG1lbW9pemUyID0gX2ZpbmlzaGVkV29yayRtZW1vaXplMi5vblBvc3RDb21taXQ7CiAgICAgICAgY3VycmVudDIgPSBudWxsID09PSBjdXJyZW50MiA/ICJtb3VudCIgOiAidXBkYXRlIjsKICAgICAgICBjdXJyZW50VXBkYXRlSXNOZXN0ZWQgJiYgKGN1cnJlbnQyID0gIm5lc3RlZC11cGRhdGUiKTsKICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgX2ZpbmlzaGVkV29yayRtZW1vaXplMiAmJiBfZmluaXNoZWRXb3JrJG1lbW9pemUyKAogICAgICAgICAgZmluaXNoZWRXb3JrLAogICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICBwYXNzaXZlRWZmZWN0RHVyYXRpb24sCiAgICAgICAgICBjb21taXRTdGFydFRpbWUyCiAgICAgICAgKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjb21taXRIb3N0TW91bnQoZmluaXNoZWRXb3JrKSB7CiAgICAgICAgdmFyIHR5cGUgPSBmaW5pc2hlZFdvcmsudHlwZSwgcHJvcHMgPSBmaW5pc2hlZFdvcmsubWVtb2l6ZWRQcm9wcywgaW5zdGFuY2UgPSBmaW5pc2hlZFdvcmsuc3RhdGVOb2RlOwogICAgICAgIHRyeSB7CiAgICAgICAgICBydW5XaXRoRmliZXJJbkRFVigKICAgICAgICAgICAgZmluaXNoZWRXb3JrLAogICAgICAgICAgICBjb21taXRNb3VudCwKICAgICAgICAgICAgaW5zdGFuY2UsCiAgICAgICAgICAgIHR5cGUsCiAgICAgICAgICAgIHByb3BzLAogICAgICAgICAgICBmaW5pc2hlZFdvcmsKICAgICAgICAgICk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIGNhcHR1cmVDb21taXRQaGFzZUVycm9yKGZpbmlzaGVkV29yaywgZmluaXNoZWRXb3JrLnJldHVybiwgZXJyb3IpOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBjb21taXRIb3N0VXBkYXRlKGZpbmlzaGVkV29yaywgbmV3UHJvcHMsIG9sZFByb3BzKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJ1bldpdGhGaWJlckluREVWKAogICAgICAgICAgICBmaW5pc2hlZFdvcmssCiAgICAgICAgICAgIGNvbW1pdFVwZGF0ZSwKICAgICAgICAgICAgZmluaXNoZWRXb3JrLnN0YXRlTm9kZSwKICAgICAgICAgICAgZmluaXNoZWRXb3JrLnR5cGUsCiAgICAgICAgICAgIG9sZFByb3BzLAogICAgICAgICAgICBuZXdQcm9wcywKICAgICAgICAgICAgZmluaXNoZWRXb3JrCiAgICAgICAgICApOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBjYXB0dXJlQ29tbWl0UGhhc2VFcnJvcihmaW5pc2hlZFdvcmssIGZpbmlzaGVkV29yay5yZXR1cm4sIGVycm9yKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gaXNIb3N0UGFyZW50KGZpYmVyKSB7CiAgICAgICAgcmV0dXJuIDUgPT09IGZpYmVyLnRhZyB8fCAzID09PSBmaWJlci50YWcgfHwgMjYgPT09IGZpYmVyLnRhZyB8fCAyNyA9PT0gZmliZXIudGFnICYmIGlzU2luZ2xldG9uU2NvcGUoZmliZXIudHlwZSkgfHwgNCA9PT0gZmliZXIudGFnOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldEhvc3RTaWJsaW5nKGZpYmVyKSB7CiAgICAgICAgYTogZm9yICg7IDsgKSB7CiAgICAgICAgICBmb3IgKDsgbnVsbCA9PT0gZmliZXIuc2libGluZzsgKSB7CiAgICAgICAgICAgIGlmIChudWxsID09PSBmaWJlci5yZXR1cm4gfHwgaXNIb3N0UGFyZW50KGZpYmVyLnJldHVybikpIHJldHVybiBudWxsOwogICAgICAgICAgICBmaWJlciA9IGZpYmVyLnJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGZpYmVyLnNpYmxpbmcucmV0dXJuID0gZmliZXIucmV0dXJuOwogICAgICAgICAgZm9yIChmaWJlciA9IGZpYmVyLnNpYmxpbmc7IDUgIT09IGZpYmVyLnRhZyAmJiA2ICE9PSBmaWJlci50YWcgJiYgMTggIT09IGZpYmVyLnRhZzsgKSB7CiAgICAgICAgICAgIGlmICgyNyA9PT0gZmliZXIudGFnICYmIGlzU2luZ2xldG9uU2NvcGUoZmliZXIudHlwZSkpIGNvbnRpbnVlIGE7CiAgICAgICAgICAgIGlmIChmaWJlci5mbGFncyAmIDIpIGNvbnRpbnVlIGE7CiAgICAgICAgICAgIGlmIChudWxsID09PSBmaWJlci5jaGlsZCB8fCA0ID09PSBmaWJlci50YWcpIGNvbnRpbnVlIGE7CiAgICAgICAgICAgIGVsc2UgZmliZXIuY2hpbGQucmV0dXJuID0gZmliZXIsIGZpYmVyID0gZmliZXIuY2hpbGQ7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIShmaWJlci5mbGFncyAmIDIpKSByZXR1cm4gZmliZXIuc3RhdGVOb2RlOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBpbnNlcnRPckFwcGVuZFBsYWNlbWVudE5vZGVJbnRvQ29udGFpbmVyKG5vZGUsIGJlZm9yZSwgcGFyZW50KSB7CiAgICAgICAgdmFyIHRhZyA9IG5vZGUudGFnOwogICAgICAgIGlmICg1ID09PSB0YWcgfHwgNiA9PT0gdGFnKQogICAgICAgICAgbm9kZSA9IG5vZGUuc3RhdGVOb2RlLCBiZWZvcmUgPyAoOSA9PT0gcGFyZW50Lm5vZGVUeXBlID8gcGFyZW50LmJvZHkgOiAiSFRNTCIgPT09IHBhcmVudC5ub2RlTmFtZSA/IHBhcmVudC5vd25lckRvY3VtZW50LmJvZHkgOiBwYXJlbnQpLmluc2VydEJlZm9yZShub2RlLCBiZWZvcmUpIDogKGJlZm9yZSA9IDkgPT09IHBhcmVudC5ub2RlVHlwZSA/IHBhcmVudC5ib2R5IDogIkhUTUwiID09PSBwYXJlbnQubm9kZU5hbWUgPyBwYXJlbnQub3duZXJEb2N1bWVudC5ib2R5IDogcGFyZW50LCBiZWZvcmUuYXBwZW5kQ2hpbGQobm9kZSksIHBhcmVudCA9IHBhcmVudC5fcmVhY3RSb290Q29udGFpbmVyLCBudWxsICE9PSBwYXJlbnQgJiYgdm9pZCAwICE9PSBwYXJlbnQgfHwgbnVsbCAhPT0gYmVmb3JlLm9uY2xpY2sgfHwgKGJlZm9yZS5vbmNsaWNrID0gbm9vcCQxKSk7CiAgICAgICAgZWxzZSBpZiAoNCAhPT0gdGFnICYmICgyNyA9PT0gdGFnICYmIGlzU2luZ2xldG9uU2NvcGUobm9kZS50eXBlKSAmJiAocGFyZW50ID0gbm9kZS5zdGF0ZU5vZGUsIGJlZm9yZSA9IG51bGwpLCBub2RlID0gbm9kZS5jaGlsZCwgbnVsbCAhPT0gbm9kZSkpCiAgICAgICAgICBmb3IgKGluc2VydE9yQXBwZW5kUGxhY2VtZW50Tm9kZUludG9Db250YWluZXIobm9kZSwgYmVmb3JlLCBwYXJlbnQpLCBub2RlID0gbm9kZS5zaWJsaW5nOyBudWxsICE9PSBub2RlOyApCiAgICAgICAgICAgIGluc2VydE9yQXBwZW5kUGxhY2VtZW50Tm9kZUludG9Db250YWluZXIobm9kZSwgYmVmb3JlLCBwYXJlbnQpLCBub2RlID0gbm9kZS5zaWJsaW5nOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGluc2VydE9yQXBwZW5kUGxhY2VtZW50Tm9kZShub2RlLCBiZWZvcmUsIHBhcmVudCkgewogICAgICAgIHZhciB0YWcgPSBub2RlLnRhZzsKICAgICAgICBpZiAoNSA9PT0gdGFnIHx8IDYgPT09IHRhZykKICAgICAgICAgIG5vZGUgPSBub2RlLnN0YXRlTm9kZSwgYmVmb3JlID8gcGFyZW50Lmluc2VydEJlZm9yZShub2RlLCBiZWZvcmUpIDogcGFyZW50LmFwcGVuZENoaWxkKG5vZGUpOwogICAgICAgIGVsc2UgaWYgKDQgIT09IHRhZyAmJiAoMjcgPT09IHRhZyAmJiBpc1NpbmdsZXRvblNjb3BlKG5vZGUudHlwZSkgJiYgKHBhcmVudCA9IG5vZGUuc3RhdGVOb2RlKSwgbm9kZSA9IG5vZGUuY2hpbGQsIG51bGwgIT09IG5vZGUpKQogICAgICAgICAgZm9yIChpbnNlcnRPckFwcGVuZFBsYWNlbWVudE5vZGUobm9kZSwgYmVmb3JlLCBwYXJlbnQpLCBub2RlID0gbm9kZS5zaWJsaW5nOyBudWxsICE9PSBub2RlOyApCiAgICAgICAgICAgIGluc2VydE9yQXBwZW5kUGxhY2VtZW50Tm9kZShub2RlLCBiZWZvcmUsIHBhcmVudCksIG5vZGUgPSBub2RlLnNpYmxpbmc7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY29tbWl0UGxhY2VtZW50KGZpbmlzaGVkV29yaykgewogICAgICAgIGZvciAodmFyIGhvc3RQYXJlbnRGaWJlciwgcGFyZW50RmliZXIgPSBmaW5pc2hlZFdvcmsucmV0dXJuOyBudWxsICE9PSBwYXJlbnRGaWJlcjsgKSB7CiAgICAgICAgICBpZiAoaXNIb3N0UGFyZW50KHBhcmVudEZpYmVyKSkgewogICAgICAgICAgICBob3N0UGFyZW50RmliZXIgPSBwYXJlbnRGaWJlcjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBwYXJlbnRGaWJlciA9IHBhcmVudEZpYmVyLnJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKG51bGwgPT0gaG9zdFBhcmVudEZpYmVyKQogICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICJFeHBlY3RlZCB0byBmaW5kIGEgaG9zdCBwYXJlbnQuIFRoaXMgZXJyb3IgaXMgbGlrZWx5IGNhdXNlZCBieSBhIGJ1ZyBpbiBSZWFjdC4gUGxlYXNlIGZpbGUgYW4gaXNzdWUuIgogICAgICAgICAgKTsKICAgICAgICBzd2l0Y2ggKGhvc3RQYXJlbnRGaWJlci50YWcpIHsKICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgIGhvc3RQYXJlbnRGaWJlciA9IGhvc3RQYXJlbnRGaWJlci5zdGF0ZU5vZGU7CiAgICAgICAgICAgIHBhcmVudEZpYmVyID0gZ2V0SG9zdFNpYmxpbmcoZmluaXNoZWRXb3JrKTsKICAgICAgICAgICAgaW5zZXJ0T3JBcHBlbmRQbGFjZW1lbnROb2RlKAogICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICBwYXJlbnRGaWJlciwKICAgICAgICAgICAgICBob3N0UGFyZW50RmliZXIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIHBhcmVudEZpYmVyID0gaG9zdFBhcmVudEZpYmVyLnN0YXRlTm9kZTsKICAgICAgICAgICAgaG9zdFBhcmVudEZpYmVyLmZsYWdzICYgMzIgJiYgKHJlc2V0VGV4dENvbnRlbnQocGFyZW50RmliZXIpLCBob3N0UGFyZW50RmliZXIuZmxhZ3MgJj0gLTMzKTsKICAgICAgICAgICAgaG9zdFBhcmVudEZpYmVyID0gZ2V0SG9zdFNpYmxpbmcoZmluaXNoZWRXb3JrKTsKICAgICAgICAgICAgaW5zZXJ0T3JBcHBlbmRQbGFjZW1lbnROb2RlKAogICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICBob3N0UGFyZW50RmliZXIsCiAgICAgICAgICAgICAgcGFyZW50RmliZXIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGhvc3RQYXJlbnRGaWJlciA9IGhvc3RQYXJlbnRGaWJlci5zdGF0ZU5vZGUuY29udGFpbmVySW5mbzsKICAgICAgICAgICAgcGFyZW50RmliZXIgPSBnZXRIb3N0U2libGluZyhmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBpbnNlcnRPckFwcGVuZFBsYWNlbWVudE5vZGVJbnRvQ29udGFpbmVyKAogICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICBwYXJlbnRGaWJlciwKICAgICAgICAgICAgICBob3N0UGFyZW50RmliZXIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICAgICAiSW52YWxpZCBob3N0IHBhcmVudCBmaWJlci4gVGhpcyBlcnJvciBpcyBsaWtlbHkgY2F1c2VkIGJ5IGEgYnVnIGluIFJlYWN0LiBQbGVhc2UgZmlsZSBhbiBpc3N1ZS4iCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNvbW1pdEhvc3RTaW5nbGV0b25BY3F1aXNpdGlvbihmaW5pc2hlZFdvcmspIHsKICAgICAgICB2YXIgc2luZ2xldG9uID0gZmluaXNoZWRXb3JrLnN0YXRlTm9kZSwgcHJvcHMgPSBmaW5pc2hlZFdvcmsubWVtb2l6ZWRQcm9wczsKICAgICAgICB0cnkgewogICAgICAgICAgcnVuV2l0aEZpYmVySW5ERVYoCiAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgYWNxdWlyZVNpbmdsZXRvbkluc3RhbmNlLAogICAgICAgICAgICBmaW5pc2hlZFdvcmsudHlwZSwKICAgICAgICAgICAgcHJvcHMsCiAgICAgICAgICAgIHNpbmdsZXRvbiwKICAgICAgICAgICAgZmluaXNoZWRXb3JrCiAgICAgICAgICApOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBjYXB0dXJlQ29tbWl0UGhhc2VFcnJvcihmaW5pc2hlZFdvcmssIGZpbmlzaGVkV29yay5yZXR1cm4sIGVycm9yKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY29tbWl0QmVmb3JlTXV0YXRpb25FZmZlY3RzKHJvb3QyLCBmaXJzdENoaWxkKSB7CiAgICAgICAgcm9vdDIgPSByb290Mi5jb250YWluZXJJbmZvOwogICAgICAgIGV2ZW50c0VuYWJsZWQgPSBfZW5hYmxlZDsKICAgICAgICByb290MiA9IGdldEFjdGl2ZUVsZW1lbnREZWVwKHJvb3QyKTsKICAgICAgICBpZiAoaGFzU2VsZWN0aW9uQ2FwYWJpbGl0aWVzKHJvb3QyKSkgewogICAgICAgICAgaWYgKCJzZWxlY3Rpb25TdGFydCIgaW4gcm9vdDIpCiAgICAgICAgICAgIHZhciBKU0NvbXBpbGVyX3RlbXAgPSB7CiAgICAgICAgICAgICAgc3RhcnQ6IHJvb3QyLnNlbGVjdGlvblN0YXJ0LAogICAgICAgICAgICAgIGVuZDogcm9vdDIuc2VsZWN0aW9uRW5kCiAgICAgICAgICAgIH07CiAgICAgICAgICBlbHNlCiAgICAgICAgICAgIGE6IHsKICAgICAgICAgICAgICBKU0NvbXBpbGVyX3RlbXAgPSAoSlNDb21waWxlcl90ZW1wID0gcm9vdDIub3duZXJEb2N1bWVudCkgJiYgSlNDb21waWxlcl90ZW1wLmRlZmF1bHRWaWV3IHx8IHdpbmRvdzsKICAgICAgICAgICAgICB2YXIgc2VsZWN0aW9uID0gSlNDb21waWxlcl90ZW1wLmdldFNlbGVjdGlvbiAmJiBKU0NvbXBpbGVyX3RlbXAuZ2V0U2VsZWN0aW9uKCk7CiAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbiAmJiAwICE9PSBzZWxlY3Rpb24ucmFuZ2VDb3VudCkgewogICAgICAgICAgICAgICAgSlNDb21waWxlcl90ZW1wID0gc2VsZWN0aW9uLmFuY2hvck5vZGU7CiAgICAgICAgICAgICAgICB2YXIgYW5jaG9yT2Zmc2V0ID0gc2VsZWN0aW9uLmFuY2hvck9mZnNldCwgZm9jdXNOb2RlID0gc2VsZWN0aW9uLmZvY3VzTm9kZTsKICAgICAgICAgICAgICAgIHNlbGVjdGlvbiA9IHNlbGVjdGlvbi5mb2N1c09mZnNldDsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIEpTQ29tcGlsZXJfdGVtcC5ub2RlVHlwZSwgZm9jdXNOb2RlLm5vZGVUeXBlOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSQyKSB7CiAgICAgICAgICAgICAgICAgIEpTQ29tcGlsZXJfdGVtcCA9IG51bGw7CiAgICAgICAgICAgICAgICAgIGJyZWFrIGE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gMCwgc3RhcnQgPSAtMSwgZW5kID0gLTEsIGluZGV4V2l0aGluQW5jaG9yID0gMCwgaW5kZXhXaXRoaW5Gb2N1cyA9IDAsIG5vZGUgPSByb290MiwgcGFyZW50Tm9kZSA9IG51bGw7CiAgICAgICAgICAgICAgICBiOiBmb3IgKDsgOyApIHsKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbmV4dDsgOyApIHsKICAgICAgICAgICAgICAgICAgICBub2RlICE9PSBKU0NvbXBpbGVyX3RlbXAgfHwgMCAhPT0gYW5jaG9yT2Zmc2V0ICYmIDMgIT09IG5vZGUubm9kZVR5cGUgfHwgKHN0YXJ0ID0gbGVuZ3RoICsgYW5jaG9yT2Zmc2V0KTsKICAgICAgICAgICAgICAgICAgICBub2RlICE9PSBmb2N1c05vZGUgfHwgMCAhPT0gc2VsZWN0aW9uICYmIDMgIT09IG5vZGUubm9kZVR5cGUgfHwgKGVuZCA9IGxlbmd0aCArIHNlbGVjdGlvbik7CiAgICAgICAgICAgICAgICAgICAgMyA9PT0gbm9kZS5ub2RlVHlwZSAmJiAobGVuZ3RoICs9IG5vZGUubm9kZVZhbHVlLmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IChuZXh0ID0gbm9kZS5maXJzdENoaWxkKSkgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgcGFyZW50Tm9kZSA9IG5vZGU7CiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5leHQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZm9yICg7IDsgKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUgPT09IHJvb3QyKSBicmVhayBiOwogICAgICAgICAgICAgICAgICAgIHBhcmVudE5vZGUgPT09IEpTQ29tcGlsZXJfdGVtcCAmJiArK2luZGV4V2l0aGluQW5jaG9yID09PSBhbmNob3JPZmZzZXQgJiYgKHN0YXJ0ID0gbGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICBwYXJlbnROb2RlID09PSBmb2N1c05vZGUgJiYgKytpbmRleFdpdGhpbkZvY3VzID09PSBzZWxlY3Rpb24gJiYgKGVuZCA9IGxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IChuZXh0ID0gbm9kZS5uZXh0U2libGluZykpIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIG5vZGUgPSBwYXJlbnROb2RlOwogICAgICAgICAgICAgICAgICAgIHBhcmVudE5vZGUgPSBub2RlLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgbm9kZSA9IG5leHQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBKU0NvbXBpbGVyX3RlbXAgPSAtMSA9PT0gc3RhcnQgfHwgLTEgPT09IGVuZCA/IG51bGwgOiB7IHN0YXJ0LCBlbmQgfTsKICAgICAgICAgICAgICB9IGVsc2UgSlNDb21waWxlcl90ZW1wID0gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgSlNDb21waWxlcl90ZW1wID0gSlNDb21waWxlcl90ZW1wIHx8IHsgc3RhcnQ6IDAsIGVuZDogMCB9OwogICAgICAgIH0gZWxzZSBKU0NvbXBpbGVyX3RlbXAgPSBudWxsOwogICAgICAgIHNlbGVjdGlvbkluZm9ybWF0aW9uID0gewogICAgICAgICAgZm9jdXNlZEVsZW06IHJvb3QyLAogICAgICAgICAgc2VsZWN0aW9uUmFuZ2U6IEpTQ29tcGlsZXJfdGVtcAogICAgICAgIH07CiAgICAgICAgX2VuYWJsZWQgPSBmYWxzZTsKICAgICAgICBmb3IgKG5leHRFZmZlY3QgPSBmaXJzdENoaWxkOyBudWxsICE9PSBuZXh0RWZmZWN0OyApCiAgICAgICAgICBpZiAoZmlyc3RDaGlsZCA9IG5leHRFZmZlY3QsIHJvb3QyID0gZmlyc3RDaGlsZC5jaGlsZCwgMCAhPT0gKGZpcnN0Q2hpbGQuc3VidHJlZUZsYWdzICYgMTAyNCkgJiYgbnVsbCAhPT0gcm9vdDIpCiAgICAgICAgICAgIHJvb3QyLnJldHVybiA9IGZpcnN0Q2hpbGQsIG5leHRFZmZlY3QgPSByb290MjsKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgZm9yICg7IG51bGwgIT09IG5leHRFZmZlY3Q7ICkgewogICAgICAgICAgICAgIHJvb3QyID0gZmlyc3RDaGlsZCA9IG5leHRFZmZlY3Q7CiAgICAgICAgICAgICAgSlNDb21waWxlcl90ZW1wID0gcm9vdDIuYWx0ZXJuYXRlOwogICAgICAgICAgICAgIGFuY2hvck9mZnNldCA9IHJvb3QyLmZsYWdzOwogICAgICAgICAgICAgIHN3aXRjaCAocm9vdDIudGFnKSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAwICE9PSAoYW5jaG9yT2Zmc2V0ICYgMTAyNCkgJiYgbnVsbCAhPT0gSlNDb21waWxlcl90ZW1wICYmIGNvbW1pdENsYXNzU25hcHNob3Qocm9vdDIsIEpTQ29tcGlsZXJfdGVtcCk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICBpZiAoMCAhPT0gKGFuY2hvck9mZnNldCAmIDEwMjQpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJvb3QyID0gcm9vdDIuc3RhdGVOb2RlLmNvbnRhaW5lckluZm8sIEpTQ29tcGlsZXJfdGVtcCA9IHJvb3QyLm5vZGVUeXBlLCA5ID09PSBKU0NvbXBpbGVyX3RlbXApCiAgICAgICAgICAgICAgICAgICAgICBjbGVhckNvbnRhaW5lclNwYXJpbmdseShyb290Mik7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoMSA9PT0gSlNDb21waWxlcl90ZW1wKQogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChyb290Mi5ub2RlTmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJIRUFEIjoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiSFRNTCI6CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkJPRFkiOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyQ29udGFpbmVyU3BhcmluZ2x5KHJvb3QyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICByb290Mi50ZXh0Q29udGVudCA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgIGlmICgwICE9PSAoYW5jaG9yT2Zmc2V0ICYgMTAyNCkpCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAiVGhpcyB1bml0IG9mIHdvcmsgdGFnIHNob3VsZCBub3QgaGF2ZSBzaWRlLWVmZmVjdHMuIFRoaXMgZXJyb3IgaXMgbGlrZWx5IGNhdXNlZCBieSBhIGJ1ZyBpbiBSZWFjdC4gUGxlYXNlIGZpbGUgYW4gaXNzdWUuIgogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJvb3QyID0gZmlyc3RDaGlsZC5zaWJsaW5nOwogICAgICAgICAgICAgIGlmIChudWxsICE9PSByb290MikgewogICAgICAgICAgICAgICAgcm9vdDIucmV0dXJuID0gZmlyc3RDaGlsZC5yZXR1cm47CiAgICAgICAgICAgICAgICBuZXh0RWZmZWN0ID0gcm9vdDI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbmV4dEVmZmVjdCA9IGZpcnN0Q2hpbGQucmV0dXJuOwogICAgICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY29tbWl0TGF5b3V0RWZmZWN0T25GaWJlcihmaW5pc2hlZFJvb3QsIGN1cnJlbnQyLCBmaW5pc2hlZFdvcmspIHsKICAgICAgICB2YXIgZmxhZ3MgPSBmaW5pc2hlZFdvcmsuZmxhZ3M7CiAgICAgICAgc3dpdGNoIChmaW5pc2hlZFdvcmsudGFnKSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgcmVjdXJzaXZlbHlUcmF2ZXJzZUxheW91dEVmZmVjdHMoZmluaXNoZWRSb290LCBmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBmbGFncyAmIDQgJiYgY29tbWl0SG9va0xheW91dEVmZmVjdHMoZmluaXNoZWRXb3JrLCBMYXlvdXQgfCBIYXNFZmZlY3QpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgcmVjdXJzaXZlbHlUcmF2ZXJzZUxheW91dEVmZmVjdHMoZmluaXNoZWRSb290LCBmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBpZiAoZmxhZ3MgJiA0KQogICAgICAgICAgICAgIGlmIChmaW5pc2hlZFJvb3QgPSBmaW5pc2hlZFdvcmsuc3RhdGVOb2RlLCBudWxsID09PSBjdXJyZW50MikKICAgICAgICAgICAgICAgIGZpbmlzaGVkV29yay50eXBlLmRlZmF1bHRQcm9wcyB8fCAicmVmIiBpbiBmaW5pc2hlZFdvcmsubWVtb2l6ZWRQcm9wcyB8fCBkaWRXYXJuQWJvdXRSZWFzc2lnbmluZ1Byb3BzIHx8IChmaW5pc2hlZFJvb3QucHJvcHMgIT09IGZpbmlzaGVkV29yay5tZW1vaXplZFByb3BzICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgICAgICJFeHBlY3RlZCAlcyBwcm9wcyB0byBtYXRjaCBtZW1vaXplZCBwcm9wcyBiZWZvcmUgY29tcG9uZW50RGlkTW91bnQuIFRoaXMgbWlnaHQgZWl0aGVyIGJlIGJlY2F1c2Ugb2YgYSBidWcgaW4gUmVhY3QsIG9yIGJlY2F1c2UgYSBjb21wb25lbnQgcmVhc3NpZ25zIGl0cyBvd24gYHRoaXMucHJvcHNgLiBQbGVhc2UgZmlsZSBhbiBpc3N1ZS4iLAogICAgICAgICAgICAgICAgICBnZXRDb21wb25lbnROYW1lRnJvbUZpYmVyKGZpbmlzaGVkV29yaykgfHwgImluc3RhbmNlIgogICAgICAgICAgICAgICAgKSwgZmluaXNoZWRSb290LnN0YXRlICE9PSBmaW5pc2hlZFdvcmsubWVtb2l6ZWRTdGF0ZSAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICAgICAiRXhwZWN0ZWQgJXMgc3RhdGUgdG8gbWF0Y2ggbWVtb2l6ZWQgc3RhdGUgYmVmb3JlIGNvbXBvbmVudERpZE1vdW50LiBUaGlzIG1pZ2h0IGVpdGhlciBiZSBiZWNhdXNlIG9mIGEgYnVnIGluIFJlYWN0LCBvciBiZWNhdXNlIGEgY29tcG9uZW50IHJlYXNzaWducyBpdHMgb3duIGB0aGlzLnN0YXRlYC4gUGxlYXNlIGZpbGUgYW4gaXNzdWUuIiwKICAgICAgICAgICAgICAgICAgZ2V0Q29tcG9uZW50TmFtZUZyb21GaWJlcihmaW5pc2hlZFdvcmspIHx8ICJpbnN0YW5jZSIKICAgICAgICAgICAgICAgICkpLCBzaG91bGRQcm9maWxlKGZpbmlzaGVkV29yaykgPyAoc3RhcnRFZmZlY3RUaW1lcigpLCBydW5XaXRoRmliZXJJbkRFVigKICAgICAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLAogICAgICAgICAgICAgICAgICBjYWxsQ29tcG9uZW50RGlkTW91bnRJbkRFViwKICAgICAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLAogICAgICAgICAgICAgICAgICBmaW5pc2hlZFJvb3QKICAgICAgICAgICAgICAgICksIHJlY29yZEVmZmVjdER1cmF0aW9uKCkpIDogcnVuV2l0aEZpYmVySW5ERVYoCiAgICAgICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICAgICAgY2FsbENvbXBvbmVudERpZE1vdW50SW5ERVYsCiAgICAgICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICAgICAgZmluaXNoZWRSb290CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdmFyIHByZXZQcm9wcyA9IHJlc29sdmVDbGFzc0NvbXBvbmVudFByb3BzKAogICAgICAgICAgICAgICAgICBmaW5pc2hlZFdvcmsudHlwZSwKICAgICAgICAgICAgICAgICAgY3VycmVudDIubWVtb2l6ZWRQcm9wcwogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGN1cnJlbnQyID0gY3VycmVudDIubWVtb2l6ZWRTdGF0ZTsKICAgICAgICAgICAgICAgIGZpbmlzaGVkV29yay50eXBlLmRlZmF1bHRQcm9wcyB8fCAicmVmIiBpbiBmaW5pc2hlZFdvcmsubWVtb2l6ZWRQcm9wcyB8fCBkaWRXYXJuQWJvdXRSZWFzc2lnbmluZ1Byb3BzIHx8IChmaW5pc2hlZFJvb3QucHJvcHMgIT09IGZpbmlzaGVkV29yay5tZW1vaXplZFByb3BzICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgICAgICJFeHBlY3RlZCAlcyBwcm9wcyB0byBtYXRjaCBtZW1vaXplZCBwcm9wcyBiZWZvcmUgY29tcG9uZW50RGlkVXBkYXRlLiBUaGlzIG1pZ2h0IGVpdGhlciBiZSBiZWNhdXNlIG9mIGEgYnVnIGluIFJlYWN0LCBvciBiZWNhdXNlIGEgY29tcG9uZW50IHJlYXNzaWducyBpdHMgb3duIGB0aGlzLnByb3BzYC4gUGxlYXNlIGZpbGUgYW4gaXNzdWUuIiwKICAgICAgICAgICAgICAgICAgZ2V0Q29tcG9uZW50TmFtZUZyb21GaWJlcihmaW5pc2hlZFdvcmspIHx8ICJpbnN0YW5jZSIKICAgICAgICAgICAgICAgICksIGZpbmlzaGVkUm9vdC5zdGF0ZSAhPT0gZmluaXNoZWRXb3JrLm1lbW9pemVkU3RhdGUgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAgICAgIkV4cGVjdGVkICVzIHN0YXRlIHRvIG1hdGNoIG1lbW9pemVkIHN0YXRlIGJlZm9yZSBjb21wb25lbnREaWRVcGRhdGUuIFRoaXMgbWlnaHQgZWl0aGVyIGJlIGJlY2F1c2Ugb2YgYSBidWcgaW4gUmVhY3QsIG9yIGJlY2F1c2UgYSBjb21wb25lbnQgcmVhc3NpZ25zIGl0cyBvd24gYHRoaXMuc3RhdGVgLiBQbGVhc2UgZmlsZSBhbiBpc3N1ZS4iLAogICAgICAgICAgICAgICAgICBnZXRDb21wb25lbnROYW1lRnJvbUZpYmVyKGZpbmlzaGVkV29yaykgfHwgImluc3RhbmNlIgogICAgICAgICAgICAgICAgKSk7CiAgICAgICAgICAgICAgICBzaG91bGRQcm9maWxlKGZpbmlzaGVkV29yaykgPyAoc3RhcnRFZmZlY3RUaW1lcigpLCBydW5XaXRoRmliZXJJbkRFVigKICAgICAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLAogICAgICAgICAgICAgICAgICBjYWxsQ29tcG9uZW50RGlkVXBkYXRlSW5ERVYsCiAgICAgICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICAgICAgZmluaXNoZWRSb290LAogICAgICAgICAgICAgICAgICBwcmV2UHJvcHMsCiAgICAgICAgICAgICAgICAgIGN1cnJlbnQyLAogICAgICAgICAgICAgICAgICBmaW5pc2hlZFJvb3QuX19yZWFjdEludGVybmFsU25hcHNob3RCZWZvcmVVcGRhdGUKICAgICAgICAgICAgICAgICksIHJlY29yZEVmZmVjdER1cmF0aW9uKCkpIDogcnVuV2l0aEZpYmVySW5ERVYoCiAgICAgICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICAgICAgY2FsbENvbXBvbmVudERpZFVwZGF0ZUluREVWLAogICAgICAgICAgICAgICAgICBmaW5pc2hlZFdvcmssCiAgICAgICAgICAgICAgICAgIGZpbmlzaGVkUm9vdCwKICAgICAgICAgICAgICAgICAgcHJldlByb3BzLAogICAgICAgICAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgICAgICAgICAgZmluaXNoZWRSb290Ll9fcmVhY3RJbnRlcm5hbFNuYXBzaG90QmVmb3JlVXBkYXRlCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgZmxhZ3MgJiA2NCAmJiBjb21taXRDbGFzc0NhbGxiYWNrcyhmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBmbGFncyAmIDUxMiAmJiBzYWZlbHlBdHRhY2hSZWYoZmluaXNoZWRXb3JrLCBmaW5pc2hlZFdvcmsucmV0dXJuKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGN1cnJlbnQyID0gcHVzaE5lc3RlZEVmZmVjdER1cmF0aW9ucygpOwogICAgICAgICAgICByZWN1cnNpdmVseVRyYXZlcnNlTGF5b3V0RWZmZWN0cyhmaW5pc2hlZFJvb3QsIGZpbmlzaGVkV29yayk7CiAgICAgICAgICAgIGlmIChmbGFncyAmIDY0ICYmIChmbGFncyA9IGZpbmlzaGVkV29yay51cGRhdGVRdWV1ZSwgbnVsbCAhPT0gZmxhZ3MpKSB7CiAgICAgICAgICAgICAgcHJldlByb3BzID0gbnVsbDsKICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZmluaXNoZWRXb3JrLmNoaWxkKQogICAgICAgICAgICAgICAgc3dpdGNoIChmaW5pc2hlZFdvcmsuY2hpbGQudGFnKSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICBwcmV2UHJvcHMgPSBmaW5pc2hlZFdvcmsuY2hpbGQuc3RhdGVOb2RlOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgcHJldlByb3BzID0gZmluaXNoZWRXb3JrLmNoaWxkLnN0YXRlTm9kZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcnVuV2l0aEZpYmVySW5ERVYoCiAgICAgICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICAgICAgY29tbWl0Q2FsbGJhY2tzLAogICAgICAgICAgICAgICAgICBmbGFncywKICAgICAgICAgICAgICAgICAgcHJldlByb3BzCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjYXB0dXJlQ29tbWl0UGhhc2VFcnJvcihmaW5pc2hlZFdvcmssIGZpbmlzaGVkV29yay5yZXR1cm4sIGVycm9yKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZmluaXNoZWRSb290LmVmZmVjdER1cmF0aW9uICs9IHBvcE5lc3RlZEVmZmVjdER1cmF0aW9ucyhjdXJyZW50Mik7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgbnVsbCA9PT0gY3VycmVudDIgJiYgZmxhZ3MgJiA0ICYmIGNvbW1pdEhvc3RTaW5nbGV0b25BY3F1aXNpdGlvbihmaW5pc2hlZFdvcmspOwogICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgcmVjdXJzaXZlbHlUcmF2ZXJzZUxheW91dEVmZmVjdHMoZmluaXNoZWRSb290LCBmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBudWxsID09PSBjdXJyZW50MiAmJiBmbGFncyAmIDQgJiYgY29tbWl0SG9zdE1vdW50KGZpbmlzaGVkV29yayk7CiAgICAgICAgICAgIGZsYWdzICYgNTEyICYmIHNhZmVseUF0dGFjaFJlZihmaW5pc2hlZFdvcmssIGZpbmlzaGVkV29yay5yZXR1cm4pOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIGlmIChmbGFncyAmIDQpIHsKICAgICAgICAgICAgICBmbGFncyA9IHB1c2hOZXN0ZWRFZmZlY3REdXJhdGlvbnMoKTsKICAgICAgICAgICAgICByZWN1cnNpdmVseVRyYXZlcnNlTGF5b3V0RWZmZWN0cyhmaW5pc2hlZFJvb3QsIGZpbmlzaGVkV29yayk7CiAgICAgICAgICAgICAgZmluaXNoZWRSb290ID0gZmluaXNoZWRXb3JrLnN0YXRlTm9kZTsKICAgICAgICAgICAgICBmaW5pc2hlZFJvb3QuZWZmZWN0RHVyYXRpb24gKz0gYnViYmxlTmVzdGVkRWZmZWN0RHVyYXRpb25zKGZsYWdzKTsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcnVuV2l0aEZpYmVySW5ERVYoCiAgICAgICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICAgICAgY29tbWl0UHJvZmlsZXIsCiAgICAgICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICAgICAgICAgIGNvbW1pdFN0YXJ0VGltZSwKICAgICAgICAgICAgICAgICAgZmluaXNoZWRSb290LmVmZmVjdER1cmF0aW9uCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjYXB0dXJlQ29tbWl0UGhhc2VFcnJvcihmaW5pc2hlZFdvcmssIGZpbmlzaGVkV29yay5yZXR1cm4sIGVycm9yKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSByZWN1cnNpdmVseVRyYXZlcnNlTGF5b3V0RWZmZWN0cyhmaW5pc2hlZFJvb3QsIGZpbmlzaGVkV29yayk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgcmVjdXJzaXZlbHlUcmF2ZXJzZUxheW91dEVmZmVjdHMoZmluaXNoZWRSb290LCBmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBmbGFncyAmIDQgJiYgY29tbWl0U3VzcGVuc2VIeWRyYXRpb25DYWxsYmFja3MoZmluaXNoZWRSb290LCBmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBmbGFncyAmIDY0ICYmIChmaW5pc2hlZFJvb3QgPSBmaW5pc2hlZFdvcmsubWVtb2l6ZWRTdGF0ZSwgbnVsbCAhPT0gZmluaXNoZWRSb290ICYmIChmaW5pc2hlZFJvb3QgPSBmaW5pc2hlZFJvb3QuZGVoeWRyYXRlZCwgbnVsbCAhPT0gZmluaXNoZWRSb290ICYmIChmaW5pc2hlZFdvcmsgPSByZXRyeURlaHlkcmF0ZWRTdXNwZW5zZUJvdW5kYXJ5LmJpbmQoCiAgICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgICBmaW5pc2hlZFdvcmsKICAgICAgICAgICAgKSwgcmVnaXN0ZXJTdXNwZW5zZUluc3RhbmNlUmV0cnkoZmluaXNoZWRSb290LCBmaW5pc2hlZFdvcmspKSkpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgIGZsYWdzID0gbnVsbCAhPT0gZmluaXNoZWRXb3JrLm1lbW9pemVkU3RhdGUgfHwgb2Zmc2NyZWVuU3VidHJlZUlzSGlkZGVuOwogICAgICAgICAgICBpZiAoIWZsYWdzKSB7CiAgICAgICAgICAgICAgY3VycmVudDIgPSBudWxsICE9PSBjdXJyZW50MiAmJiBudWxsICE9PSBjdXJyZW50Mi5tZW1vaXplZFN0YXRlIHx8IG9mZnNjcmVlblN1YnRyZWVXYXNIaWRkZW47CiAgICAgICAgICAgICAgcHJldlByb3BzID0gb2Zmc2NyZWVuU3VidHJlZUlzSGlkZGVuOwogICAgICAgICAgICAgIHZhciBwcmV2T2Zmc2NyZWVuU3VidHJlZVdhc0hpZGRlbiA9IG9mZnNjcmVlblN1YnRyZWVXYXNIaWRkZW47CiAgICAgICAgICAgICAgb2Zmc2NyZWVuU3VidHJlZUlzSGlkZGVuID0gZmxhZ3M7CiAgICAgICAgICAgICAgKG9mZnNjcmVlblN1YnRyZWVXYXNIaWRkZW4gPSBjdXJyZW50MikgJiYgIXByZXZPZmZzY3JlZW5TdWJ0cmVlV2FzSGlkZGVuID8gcmVjdXJzaXZlbHlUcmF2ZXJzZVJlYXBwZWFyTGF5b3V0RWZmZWN0cygKICAgICAgICAgICAgICAgIGZpbmlzaGVkUm9vdCwKICAgICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICAgIDAgIT09IChmaW5pc2hlZFdvcmsuc3VidHJlZUZsYWdzICYgODc3MikKICAgICAgICAgICAgICApIDogcmVjdXJzaXZlbHlUcmF2ZXJzZUxheW91dEVmZmVjdHMoZmluaXNoZWRSb290LCBmaW5pc2hlZFdvcmspOwogICAgICAgICAgICAgIG9mZnNjcmVlblN1YnRyZWVJc0hpZGRlbiA9IHByZXZQcm9wczsKICAgICAgICAgICAgICBvZmZzY3JlZW5TdWJ0cmVlV2FzSGlkZGVuID0gcHJldk9mZnNjcmVlblN1YnRyZWVXYXNIaWRkZW47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDMwOgogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJlY3Vyc2l2ZWx5VHJhdmVyc2VMYXlvdXRFZmZlY3RzKGZpbmlzaGVkUm9vdCwgZmluaXNoZWRXb3JrKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZGV0YWNoRmliZXJBZnRlckVmZmVjdHMoZmliZXIpIHsKICAgICAgICB2YXIgYWx0ZXJuYXRlID0gZmliZXIuYWx0ZXJuYXRlOwogICAgICAgIG51bGwgIT09IGFsdGVybmF0ZSAmJiAoZmliZXIuYWx0ZXJuYXRlID0gbnVsbCwgZGV0YWNoRmliZXJBZnRlckVmZmVjdHMoYWx0ZXJuYXRlKSk7CiAgICAgICAgZmliZXIuY2hpbGQgPSBudWxsOwogICAgICAgIGZpYmVyLmRlbGV0aW9ucyA9IG51bGw7CiAgICAgICAgZmliZXIuc2libGluZyA9IG51bGw7CiAgICAgICAgNSA9PT0gZmliZXIudGFnICYmIChhbHRlcm5hdGUgPSBmaWJlci5zdGF0ZU5vZGUsIG51bGwgIT09IGFsdGVybmF0ZSAmJiBkZXRhY2hEZWxldGVkSW5zdGFuY2UoYWx0ZXJuYXRlKSk7CiAgICAgICAgZmliZXIuc3RhdGVOb2RlID0gbnVsbDsKICAgICAgICBmaWJlci5fZGVidWdPd25lciA9IG51bGw7CiAgICAgICAgZmliZXIucmV0dXJuID0gbnVsbDsKICAgICAgICBmaWJlci5kZXBlbmRlbmNpZXMgPSBudWxsOwogICAgICAgIGZpYmVyLm1lbW9pemVkUHJvcHMgPSBudWxsOwogICAgICAgIGZpYmVyLm1lbW9pemVkU3RhdGUgPSBudWxsOwogICAgICAgIGZpYmVyLnBlbmRpbmdQcm9wcyA9IG51bGw7CiAgICAgICAgZmliZXIuc3RhdGVOb2RlID0gbnVsbDsKICAgICAgICBmaWJlci51cGRhdGVRdWV1ZSA9IG51bGw7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmVjdXJzaXZlbHlUcmF2ZXJzZURlbGV0aW9uRWZmZWN0cyhmaW5pc2hlZFJvb3QsIG5lYXJlc3RNb3VudGVkQW5jZXN0b3IsIHBhcmVudCkgewogICAgICAgIGZvciAocGFyZW50ID0gcGFyZW50LmNoaWxkOyBudWxsICE9PSBwYXJlbnQ7ICkKICAgICAgICAgIGNvbW1pdERlbGV0aW9uRWZmZWN0c09uRmliZXIoCiAgICAgICAgICAgIGZpbmlzaGVkUm9vdCwKICAgICAgICAgICAgbmVhcmVzdE1vdW50ZWRBbmNlc3RvciwKICAgICAgICAgICAgcGFyZW50CiAgICAgICAgICApLCBwYXJlbnQgPSBwYXJlbnQuc2libGluZzsKICAgICAgfQogICAgICBmdW5jdGlvbiBjb21taXREZWxldGlvbkVmZmVjdHNPbkZpYmVyKGZpbmlzaGVkUm9vdCwgbmVhcmVzdE1vdW50ZWRBbmNlc3RvciwgZGVsZXRlZEZpYmVyKSB7CiAgICAgICAgaWYgKGluamVjdGVkSG9vayAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgaW5qZWN0ZWRIb29rLm9uQ29tbWl0RmliZXJVbm1vdW50KQogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaW5qZWN0ZWRIb29rLm9uQ29tbWl0RmliZXJVbm1vdW50KHJlbmRlcmVySUQsIGRlbGV0ZWRGaWJlcik7CiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgaGFzTG9nZ2VkRXJyb3IgfHwgKGhhc0xvZ2dlZEVycm9yID0gdHJ1ZSwgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAiUmVhY3QgaW5zdHJ1bWVudGF0aW9uIGVuY291bnRlcmVkIGFuIGVycm9yOiAlcyIsCiAgICAgICAgICAgICAgZXJyCiAgICAgICAgICAgICkpOwogICAgICAgICAgfQogICAgICAgIHN3aXRjaCAoZGVsZXRlZEZpYmVyLnRhZykgewogICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgb2Zmc2NyZWVuU3VidHJlZVdhc0hpZGRlbiB8fCBzYWZlbHlEZXRhY2hSZWYoZGVsZXRlZEZpYmVyLCBuZWFyZXN0TW91bnRlZEFuY2VzdG9yKTsKICAgICAgICAgICAgcmVjdXJzaXZlbHlUcmF2ZXJzZURlbGV0aW9uRWZmZWN0cygKICAgICAgICAgICAgICBmaW5pc2hlZFJvb3QsCiAgICAgICAgICAgICAgbmVhcmVzdE1vdW50ZWRBbmNlc3RvciwKICAgICAgICAgICAgICBkZWxldGVkRmliZXIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgZGVsZXRlZEZpYmVyLm1lbW9pemVkU3RhdGUgPyBkZWxldGVkRmliZXIubWVtb2l6ZWRTdGF0ZS5jb3VudC0tIDogZGVsZXRlZEZpYmVyLnN0YXRlTm9kZSAmJiAoZGVsZXRlZEZpYmVyID0gZGVsZXRlZEZpYmVyLnN0YXRlTm9kZSwgZGVsZXRlZEZpYmVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZGVsZXRlZEZpYmVyKSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgb2Zmc2NyZWVuU3VidHJlZVdhc0hpZGRlbiB8fCBzYWZlbHlEZXRhY2hSZWYoZGVsZXRlZEZpYmVyLCBuZWFyZXN0TW91bnRlZEFuY2VzdG9yKTsKICAgICAgICAgICAgdmFyIHByZXZIb3N0UGFyZW50ID0gaG9zdFBhcmVudCwgcHJldkhvc3RQYXJlbnRJc0NvbnRhaW5lciA9IGhvc3RQYXJlbnRJc0NvbnRhaW5lcjsKICAgICAgICAgICAgaXNTaW5nbGV0b25TY29wZShkZWxldGVkRmliZXIudHlwZSkgJiYgKGhvc3RQYXJlbnQgPSBkZWxldGVkRmliZXIuc3RhdGVOb2RlLCBob3N0UGFyZW50SXNDb250YWluZXIgPSBmYWxzZSk7CiAgICAgICAgICAgIHJlY3Vyc2l2ZWx5VHJhdmVyc2VEZWxldGlvbkVmZmVjdHMoCiAgICAgICAgICAgICAgZmluaXNoZWRSb290LAogICAgICAgICAgICAgIG5lYXJlc3RNb3VudGVkQW5jZXN0b3IsCiAgICAgICAgICAgICAgZGVsZXRlZEZpYmVyCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHJ1bldpdGhGaWJlckluREVWKAogICAgICAgICAgICAgIGRlbGV0ZWRGaWJlciwKICAgICAgICAgICAgICByZWxlYXNlU2luZ2xldG9uSW5zdGFuY2UsCiAgICAgICAgICAgICAgZGVsZXRlZEZpYmVyLnN0YXRlTm9kZQogICAgICAgICAgICApOwogICAgICAgICAgICBob3N0UGFyZW50ID0gcHJldkhvc3RQYXJlbnQ7CiAgICAgICAgICAgIGhvc3RQYXJlbnRJc0NvbnRhaW5lciA9IHByZXZIb3N0UGFyZW50SXNDb250YWluZXI7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBvZmZzY3JlZW5TdWJ0cmVlV2FzSGlkZGVuIHx8IHNhZmVseURldGFjaFJlZihkZWxldGVkRmliZXIsIG5lYXJlc3RNb3VudGVkQW5jZXN0b3IpOwogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBwcmV2SG9zdFBhcmVudCA9IGhvc3RQYXJlbnQ7CiAgICAgICAgICAgIHByZXZIb3N0UGFyZW50SXNDb250YWluZXIgPSBob3N0UGFyZW50SXNDb250YWluZXI7CiAgICAgICAgICAgIGhvc3RQYXJlbnQgPSBudWxsOwogICAgICAgICAgICByZWN1cnNpdmVseVRyYXZlcnNlRGVsZXRpb25FZmZlY3RzKAogICAgICAgICAgICAgIGZpbmlzaGVkUm9vdCwKICAgICAgICAgICAgICBuZWFyZXN0TW91bnRlZEFuY2VzdG9yLAogICAgICAgICAgICAgIGRlbGV0ZWRGaWJlcgogICAgICAgICAgICApOwogICAgICAgICAgICBob3N0UGFyZW50ID0gcHJldkhvc3RQYXJlbnQ7CiAgICAgICAgICAgIGhvc3RQYXJlbnRJc0NvbnRhaW5lciA9IHByZXZIb3N0UGFyZW50SXNDb250YWluZXI7CiAgICAgICAgICAgIGlmIChudWxsICE9PSBob3N0UGFyZW50KQogICAgICAgICAgICAgIGlmIChob3N0UGFyZW50SXNDb250YWluZXIpCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBydW5XaXRoRmliZXJJbkRFVigKICAgICAgICAgICAgICAgICAgICBkZWxldGVkRmliZXIsCiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2hpbGRGcm9tQ29udGFpbmVyLAogICAgICAgICAgICAgICAgICAgIGhvc3RQYXJlbnQsCiAgICAgICAgICAgICAgICAgICAgZGVsZXRlZEZpYmVyLnN0YXRlTm9kZQogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgY2FwdHVyZUNvbW1pdFBoYXNlRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgZGVsZXRlZEZpYmVyLAogICAgICAgICAgICAgICAgICAgIG5lYXJlc3RNb3VudGVkQW5jZXN0b3IsCiAgICAgICAgICAgICAgICAgICAgZXJyb3IKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBydW5XaXRoRmliZXJJbkRFVigKICAgICAgICAgICAgICAgICAgICBkZWxldGVkRmliZXIsCiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2hpbGQsCiAgICAgICAgICAgICAgICAgICAgaG9zdFBhcmVudCwKICAgICAgICAgICAgICAgICAgICBkZWxldGVkRmliZXIuc3RhdGVOb2RlCiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgICBjYXB0dXJlQ29tbWl0UGhhc2VFcnJvcigKICAgICAgICAgICAgICAgICAgICBkZWxldGVkRmliZXIsCiAgICAgICAgICAgICAgICAgICAgbmVhcmVzdE1vdW50ZWRBbmNlc3RvciwKICAgICAgICAgICAgICAgICAgICBlcnJvcgogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgIG51bGwgIT09IGhvc3RQYXJlbnQgJiYgKGhvc3RQYXJlbnRJc0NvbnRhaW5lciA/IChmaW5pc2hlZFJvb3QgPSBob3N0UGFyZW50LCBjbGVhclN1c3BlbnNlQm91bmRhcnkoCiAgICAgICAgICAgICAgOSA9PT0gZmluaXNoZWRSb290Lm5vZGVUeXBlID8gZmluaXNoZWRSb290LmJvZHkgOiAiSFRNTCIgPT09IGZpbmlzaGVkUm9vdC5ub2RlTmFtZSA/IGZpbmlzaGVkUm9vdC5vd25lckRvY3VtZW50LmJvZHkgOiBmaW5pc2hlZFJvb3QsCiAgICAgICAgICAgICAgZGVsZXRlZEZpYmVyLnN0YXRlTm9kZQogICAgICAgICAgICApLCByZXRyeUlmQmxvY2tlZE9uKGZpbmlzaGVkUm9vdCkpIDogY2xlYXJTdXNwZW5zZUJvdW5kYXJ5KGhvc3RQYXJlbnQsIGRlbGV0ZWRGaWJlci5zdGF0ZU5vZGUpKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHByZXZIb3N0UGFyZW50ID0gaG9zdFBhcmVudDsKICAgICAgICAgICAgcHJldkhvc3RQYXJlbnRJc0NvbnRhaW5lciA9IGhvc3RQYXJlbnRJc0NvbnRhaW5lcjsKICAgICAgICAgICAgaG9zdFBhcmVudCA9IGRlbGV0ZWRGaWJlci5zdGF0ZU5vZGUuY29udGFpbmVySW5mbzsKICAgICAgICAgICAgaG9zdFBhcmVudElzQ29udGFpbmVyID0gdHJ1ZTsKICAgICAgICAgICAgcmVjdXJzaXZlbHlUcmF2ZXJzZURlbGV0aW9uRWZmZWN0cygKICAgICAgICAgICAgICBmaW5pc2hlZFJvb3QsCiAgICAgICAgICAgICAgbmVhcmVzdE1vdW50ZWRBbmNlc3RvciwKICAgICAgICAgICAgICBkZWxldGVkRmliZXIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgaG9zdFBhcmVudCA9IHByZXZIb3N0UGFyZW50OwogICAgICAgICAgICBob3N0UGFyZW50SXNDb250YWluZXIgPSBwcmV2SG9zdFBhcmVudElzQ29udGFpbmVyOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgb2Zmc2NyZWVuU3VidHJlZVdhc0hpZGRlbiB8fCBjb21taXRIb29rRWZmZWN0TGlzdFVubW91bnQoCiAgICAgICAgICAgICAgSW5zZXJ0aW9uLAogICAgICAgICAgICAgIGRlbGV0ZWRGaWJlciwKICAgICAgICAgICAgICBuZWFyZXN0TW91bnRlZEFuY2VzdG9yCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG9mZnNjcmVlblN1YnRyZWVXYXNIaWRkZW4gfHwgY29tbWl0SG9va0xheW91dFVubW91bnRFZmZlY3RzKAogICAgICAgICAgICAgIGRlbGV0ZWRGaWJlciwKICAgICAgICAgICAgICBuZWFyZXN0TW91bnRlZEFuY2VzdG9yLAogICAgICAgICAgICAgIExheW91dAogICAgICAgICAgICApOwogICAgICAgICAgICByZWN1cnNpdmVseVRyYXZlcnNlRGVsZXRpb25FZmZlY3RzKAogICAgICAgICAgICAgIGZpbmlzaGVkUm9vdCwKICAgICAgICAgICAgICBuZWFyZXN0TW91bnRlZEFuY2VzdG9yLAogICAgICAgICAgICAgIGRlbGV0ZWRGaWJlcgogICAgICAgICAgICApOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgb2Zmc2NyZWVuU3VidHJlZVdhc0hpZGRlbiB8fCAoc2FmZWx5RGV0YWNoUmVmKGRlbGV0ZWRGaWJlciwgbmVhcmVzdE1vdW50ZWRBbmNlc3RvciksIHByZXZIb3N0UGFyZW50ID0gZGVsZXRlZEZpYmVyLnN0YXRlTm9kZSwgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHByZXZIb3N0UGFyZW50LmNvbXBvbmVudFdpbGxVbm1vdW50ICYmIHNhZmVseUNhbGxDb21wb25lbnRXaWxsVW5tb3VudCgKICAgICAgICAgICAgICBkZWxldGVkRmliZXIsCiAgICAgICAgICAgICAgbmVhcmVzdE1vdW50ZWRBbmNlc3RvciwKICAgICAgICAgICAgICBwcmV2SG9zdFBhcmVudAogICAgICAgICAgICApKTsKICAgICAgICAgICAgcmVjdXJzaXZlbHlUcmF2ZXJzZURlbGV0aW9uRWZmZWN0cygKICAgICAgICAgICAgICBmaW5pc2hlZFJvb3QsCiAgICAgICAgICAgICAgbmVhcmVzdE1vdW50ZWRBbmNlc3RvciwKICAgICAgICAgICAgICBkZWxldGVkRmliZXIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICByZWN1cnNpdmVseVRyYXZlcnNlRGVsZXRpb25FZmZlY3RzKAogICAgICAgICAgICAgIGZpbmlzaGVkUm9vdCwKICAgICAgICAgICAgICBuZWFyZXN0TW91bnRlZEFuY2VzdG9yLAogICAgICAgICAgICAgIGRlbGV0ZWRGaWJlcgogICAgICAgICAgICApOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgIG9mZnNjcmVlblN1YnRyZWVXYXNIaWRkZW4gPSAocHJldkhvc3RQYXJlbnQgPSBvZmZzY3JlZW5TdWJ0cmVlV2FzSGlkZGVuKSB8fCBudWxsICE9PSBkZWxldGVkRmliZXIubWVtb2l6ZWRTdGF0ZTsKICAgICAgICAgICAgcmVjdXJzaXZlbHlUcmF2ZXJzZURlbGV0aW9uRWZmZWN0cygKICAgICAgICAgICAgICBmaW5pc2hlZFJvb3QsCiAgICAgICAgICAgICAgbmVhcmVzdE1vdW50ZWRBbmNlc3RvciwKICAgICAgICAgICAgICBkZWxldGVkRmliZXIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgb2Zmc2NyZWVuU3VidHJlZVdhc0hpZGRlbiA9IHByZXZIb3N0UGFyZW50OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJlY3Vyc2l2ZWx5VHJhdmVyc2VEZWxldGlvbkVmZmVjdHMoCiAgICAgICAgICAgICAgZmluaXNoZWRSb290LAogICAgICAgICAgICAgIG5lYXJlc3RNb3VudGVkQW5jZXN0b3IsCiAgICAgICAgICAgICAgZGVsZXRlZEZpYmVyCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNvbW1pdFN1c3BlbnNlSHlkcmF0aW9uQ2FsbGJhY2tzKGZpbmlzaGVkUm9vdCwgZmluaXNoZWRXb3JrKSB7CiAgICAgICAgaWYgKG51bGwgPT09IGZpbmlzaGVkV29yay5tZW1vaXplZFN0YXRlICYmIChmaW5pc2hlZFJvb3QgPSBmaW5pc2hlZFdvcmsuYWx0ZXJuYXRlLCBudWxsICE9PSBmaW5pc2hlZFJvb3QgJiYgKGZpbmlzaGVkUm9vdCA9IGZpbmlzaGVkUm9vdC5tZW1vaXplZFN0YXRlLCBudWxsICE9PSBmaW5pc2hlZFJvb3QgJiYgKGZpbmlzaGVkUm9vdCA9IGZpbmlzaGVkUm9vdC5kZWh5ZHJhdGVkLCBudWxsICE9PSBmaW5pc2hlZFJvb3QpKSkpCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBydW5XaXRoRmliZXJJbkRFVigKICAgICAgICAgICAgICBmaW5pc2hlZFdvcmssCiAgICAgICAgICAgICAgY29tbWl0SHlkcmF0ZWRTdXNwZW5zZUluc3RhbmNlLAogICAgICAgICAgICAgIGZpbmlzaGVkUm9vdAogICAgICAgICAgICApOwogICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgY2FwdHVyZUNvbW1pdFBoYXNlRXJyb3IoZmluaXNoZWRXb3JrLCBmaW5pc2hlZFdvcmsucmV0dXJuLCBlcnJvcik7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0UmV0cnlDYWNoZShmaW5pc2hlZFdvcmspIHsKICAgICAgICBzd2l0Y2ggKGZpbmlzaGVkV29yay50YWcpIHsKICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICB2YXIgcmV0cnlDYWNoZSA9IGZpbmlzaGVkV29yay5zdGF0ZU5vZGU7CiAgICAgICAgICAgIG51bGwgPT09IHJldHJ5Q2FjaGUgJiYgKHJldHJ5Q2FjaGUgPSBmaW5pc2hlZFdvcmsuc3RhdGVOb2RlID0gbmV3IFBvc3NpYmx5V2Vha1NldCgpKTsKICAgICAgICAgICAgcmV0dXJuIHJldHJ5Q2FjaGU7CiAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICByZXR1cm4gZmluaXNoZWRXb3JrID0gZmluaXNoZWRXb3JrLnN0YXRlTm9kZSwgcmV0cnlDYWNoZSA9IGZpbmlzaGVkV29yay5fcmV0cnlDYWNoZSwgbnVsbCA9PT0gcmV0cnlDYWNoZSAmJiAocmV0cnlDYWNoZSA9IGZpbmlzaGVkV29yay5fcmV0cnlDYWNoZSA9IG5ldyBQb3NzaWJseVdlYWtTZXQoKSksIHJldHJ5Q2FjaGU7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICAgICAiVW5leHBlY3RlZCBTdXNwZW5zZSBoYW5kbGVyIHRhZyAoIiArIGZpbmlzaGVkV29yay50YWcgKyAiKS4gVGhpcyBpcyBhIGJ1ZyBpbiBSZWFjdC4iCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGF0dGFjaFN1c3BlbnNlUmV0cnlMaXN0ZW5lcnMoZmluaXNoZWRXb3JrLCB3YWtlYWJsZXMpIHsKICAgICAgICB2YXIgcmV0cnlDYWNoZSA9IGdldFJldHJ5Q2FjaGUoZmluaXNoZWRXb3JrKTsKICAgICAgICB3YWtlYWJsZXMuZm9yRWFjaChmdW5jdGlvbih3YWtlYWJsZSkgewogICAgICAgICAgdmFyIHJldHJ5ID0gcmVzb2x2ZVJldHJ5V2FrZWFibGUuYmluZChudWxsLCBmaW5pc2hlZFdvcmssIHdha2VhYmxlKTsKICAgICAgICAgIGlmICghcmV0cnlDYWNoZS5oYXMod2FrZWFibGUpKSB7CiAgICAgICAgICAgIHJldHJ5Q2FjaGUuYWRkKHdha2VhYmxlKTsKICAgICAgICAgICAgaWYgKGlzRGV2VG9vbHNQcmVzZW50KQogICAgICAgICAgICAgIGlmIChudWxsICE9PSBpblByb2dyZXNzTGFuZXMgJiYgbnVsbCAhPT0gaW5Qcm9ncmVzc1Jvb3QpCiAgICAgICAgICAgICAgICByZXN0b3JlUGVuZGluZ1VwZGF0ZXJzKGluUHJvZ3Jlc3NSb290LCBpblByb2dyZXNzTGFuZXMpOwogICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAgICAgICAiRXhwZWN0ZWQgZmluaXNoZWQgcm9vdCBhbmQgbGFuZXMgdG8gYmUgc2V0LiBUaGlzIGlzIGEgYnVnIGluIFJlYWN0LiIKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIHdha2VhYmxlLnRoZW4ocmV0cnksIHJldHJ5KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICBmdW5jdGlvbiByZWN1cnNpdmVseVRyYXZlcnNlTXV0YXRpb25FZmZlY3RzKHJvb3QkanNjb21wJDAsIHBhcmVudEZpYmVyKSB7CiAgICAgICAgdmFyIGRlbGV0aW9ucyA9IHBhcmVudEZpYmVyLmRlbGV0aW9uczsKICAgICAgICBpZiAobnVsbCAhPT0gZGVsZXRpb25zKQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkZWxldGlvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIHJvb3QyID0gcm9vdCRqc2NvbXAkMCwgcmV0dXJuRmliZXIgPSBwYXJlbnRGaWJlciwgZGVsZXRlZEZpYmVyID0gZGVsZXRpb25zW2ldLCBwYXJlbnQgPSByZXR1cm5GaWJlcjsKICAgICAgICAgICAgYTogZm9yICg7IG51bGwgIT09IHBhcmVudDsgKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChwYXJlbnQudGFnKSB7CiAgICAgICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgICAgICBpZiAoaXNTaW5nbGV0b25TY29wZShwYXJlbnQudHlwZSkpIHsKICAgICAgICAgICAgICAgICAgICBob3N0UGFyZW50ID0gcGFyZW50LnN0YXRlTm9kZTsKICAgICAgICAgICAgICAgICAgICBob3N0UGFyZW50SXNDb250YWluZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICBob3N0UGFyZW50ID0gcGFyZW50LnN0YXRlTm9kZTsKICAgICAgICAgICAgICAgICAgaG9zdFBhcmVudElzQ29udGFpbmVyID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIGJyZWFrIGE7CiAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgIGhvc3RQYXJlbnQgPSBwYXJlbnQuc3RhdGVOb2RlLmNvbnRhaW5lckluZm87CiAgICAgICAgICAgICAgICAgIGhvc3RQYXJlbnRJc0NvbnRhaW5lciA9IHRydWU7CiAgICAgICAgICAgICAgICAgIGJyZWFrIGE7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5yZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG51bGwgPT09IGhvc3RQYXJlbnQpCiAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICAgICAiRXhwZWN0ZWQgdG8gZmluZCBhIGhvc3QgcGFyZW50LiBUaGlzIGVycm9yIGlzIGxpa2VseSBjYXVzZWQgYnkgYSBidWcgaW4gUmVhY3QuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLiIKICAgICAgICAgICAgICApOwogICAgICAgICAgICBjb21taXREZWxldGlvbkVmZmVjdHNPbkZpYmVyKHJvb3QyLCByZXR1cm5GaWJlciwgZGVsZXRlZEZpYmVyKTsKICAgICAgICAgICAgaG9zdFBhcmVudCA9IG51bGw7CiAgICAgICAgICAgIGhvc3RQYXJlbnRJc0NvbnRhaW5lciA9IGZhbHNlOwogICAgICAgICAgICByb290MiA9IGRlbGV0ZWRGaWJlcjsKICAgICAgICAgICAgcmV0dXJuRmliZXIgPSByb290Mi5hbHRlcm5hdGU7CiAgICAgICAgICAgIG51bGwgIT09IHJldHVybkZpYmVyICYmIChyZXR1cm5GaWJlci5yZXR1cm4gPSBudWxsKTsKICAgICAgICAgICAgcm9vdDIucmV0dXJuID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICBpZiAocGFyZW50RmliZXIuc3VidHJlZUZsYWdzICYgMTM4NzgpCiAgICAgICAgICBmb3IgKHBhcmVudEZpYmVyID0gcGFyZW50RmliZXIuY2hpbGQ7IG51bGwgIT09IHBhcmVudEZpYmVyOyApCiAgICAgICAgICAgIGNvbW1pdE11dGF0aW9uRWZmZWN0c09uRmliZXIocGFyZW50RmliZXIsIHJvb3QkanNjb21wJDApLCBwYXJlbnRGaWJlciA9IHBhcmVudEZpYmVyLnNpYmxpbmc7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY29tbWl0TXV0YXRpb25FZmZlY3RzT25GaWJlcihmaW5pc2hlZFdvcmssIHJvb3QyKSB7CiAgICAgICAgdmFyIGN1cnJlbnQyID0gZmluaXNoZWRXb3JrLmFsdGVybmF0ZSwgZmxhZ3MgPSBmaW5pc2hlZFdvcmsuZmxhZ3M7CiAgICAgICAgc3dpdGNoIChmaW5pc2hlZFdvcmsudGFnKSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIHJlY3Vyc2l2ZWx5VHJhdmVyc2VNdXRhdGlvbkVmZmVjdHMocm9vdDIsIGZpbmlzaGVkV29yayk7CiAgICAgICAgICAgIGNvbW1pdFJlY29uY2lsaWF0aW9uRWZmZWN0cyhmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBmbGFncyAmIDQgJiYgKGNvbW1pdEhvb2tFZmZlY3RMaXN0VW5tb3VudCgKICAgICAgICAgICAgICBJbnNlcnRpb24gfCBIYXNFZmZlY3QsCiAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLAogICAgICAgICAgICAgIGZpbmlzaGVkV29yay5yZXR1cm4KICAgICAgICAgICAgKSwgY29tbWl0SG9va0VmZmVjdExpc3RNb3VudChJbnNlcnRpb24gfCBIYXNFZmZlY3QsIGZpbmlzaGVkV29yayksIGNvbW1pdEhvb2tMYXlvdXRVbm1vdW50RWZmZWN0cygKICAgICAgICAgICAgICBmaW5pc2hlZFdvcmssCiAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLnJldHVybiwKICAgICAgICAgICAgICBMYXlvdXQgfCBIYXNFZmZlY3QKICAgICAgICAgICAgKSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICByZWN1cnNpdmVseVRyYXZlcnNlTXV0YXRpb25FZmZlY3RzKHJvb3QyLCBmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBjb21taXRSZWNvbmNpbGlhdGlvbkVmZmVjdHMoZmluaXNoZWRXb3JrKTsKICAgICAgICAgICAgZmxhZ3MgJiA1MTIgJiYgKG9mZnNjcmVlblN1YnRyZWVXYXNIaWRkZW4gfHwgbnVsbCA9PT0gY3VycmVudDIgfHwgc2FmZWx5RGV0YWNoUmVmKGN1cnJlbnQyLCBjdXJyZW50Mi5yZXR1cm4pKTsKICAgICAgICAgICAgZmxhZ3MgJiA2NCAmJiBvZmZzY3JlZW5TdWJ0cmVlSXNIaWRkZW4gJiYgKGZpbmlzaGVkV29yayA9IGZpbmlzaGVkV29yay51cGRhdGVRdWV1ZSwgbnVsbCAhPT0gZmluaXNoZWRXb3JrICYmIChmbGFncyA9IGZpbmlzaGVkV29yay5jYWxsYmFja3MsIG51bGwgIT09IGZsYWdzICYmIChjdXJyZW50MiA9IGZpbmlzaGVkV29yay5zaGFyZWQuaGlkZGVuQ2FsbGJhY2tzLCBmaW5pc2hlZFdvcmsuc2hhcmVkLmhpZGRlbkNhbGxiYWNrcyA9IG51bGwgPT09IGN1cnJlbnQyID8gZmxhZ3MgOiBjdXJyZW50Mi5jb25jYXQoZmxhZ3MpKSkpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgIHZhciBob2lzdGFibGVSb290ID0gY3VycmVudEhvaXN0YWJsZVJvb3Q7CiAgICAgICAgICAgIHJlY3Vyc2l2ZWx5VHJhdmVyc2VNdXRhdGlvbkVmZmVjdHMocm9vdDIsIGZpbmlzaGVkV29yayk7CiAgICAgICAgICAgIGNvbW1pdFJlY29uY2lsaWF0aW9uRWZmZWN0cyhmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBmbGFncyAmIDUxMiAmJiAob2Zmc2NyZWVuU3VidHJlZVdhc0hpZGRlbiB8fCBudWxsID09PSBjdXJyZW50MiB8fCBzYWZlbHlEZXRhY2hSZWYoY3VycmVudDIsIGN1cnJlbnQyLnJldHVybikpOwogICAgICAgICAgICBpZiAoZmxhZ3MgJiA0KQogICAgICAgICAgICAgIGlmIChyb290MiA9IG51bGwgIT09IGN1cnJlbnQyID8gY3VycmVudDIubWVtb2l6ZWRTdGF0ZSA6IG51bGwsIGZsYWdzID0gZmluaXNoZWRXb3JrLm1lbW9pemVkU3RhdGUsIG51bGwgPT09IGN1cnJlbnQyKQogICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGZsYWdzKQogICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gZmluaXNoZWRXb3JrLnN0YXRlTm9kZSkgewogICAgICAgICAgICAgICAgICAgIGE6IHsKICAgICAgICAgICAgICAgICAgICAgIGZsYWdzID0gZmluaXNoZWRXb3JrLnR5cGU7CiAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50MiA9IGZpbmlzaGVkV29yay5tZW1vaXplZFByb3BzOwogICAgICAgICAgICAgICAgICAgICAgcm9vdDIgPSBob2lzdGFibGVSb290Lm93bmVyRG9jdW1lbnQgfHwgaG9pc3RhYmxlUm9vdDsKICAgICAgICAgICAgICAgICAgICAgIGI6IHN3aXRjaCAoZmxhZ3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAidGl0bGUiOgogICAgICAgICAgICAgICAgICAgICAgICAgIGhvaXN0YWJsZVJvb3QgPSByb290Mi5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGl0bGUiKVswXTsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhvaXN0YWJsZVJvb3QgfHwgaG9pc3RhYmxlUm9vdFtpbnRlcm5hbEhvaXN0YWJsZU1hcmtlcl0gfHwgaG9pc3RhYmxlUm9vdFtpbnRlcm5hbEluc3RhbmNlS2V5XSB8fCBob2lzdGFibGVSb290Lm5hbWVzcGFjZVVSSSA9PT0gU1ZHX05BTUVTUEFDRSB8fCBob2lzdGFibGVSb290Lmhhc0F0dHJpYnV0ZSgiaXRlbXByb3AiKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvaXN0YWJsZVJvb3QgPSByb290Mi5jcmVhdGVFbGVtZW50KGZsYWdzKSwgcm9vdDIuaGVhZC5pbnNlcnRCZWZvcmUoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvaXN0YWJsZVJvb3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QyLnF1ZXJ5U2VsZWN0b3IoImhlYWQgPiB0aXRsZSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgIHNldEluaXRpYWxQcm9wZXJ0aWVzKGhvaXN0YWJsZVJvb3QsIGZsYWdzLCBjdXJyZW50Mik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaG9pc3RhYmxlUm9vdFtpbnRlcm5hbEluc3RhbmNlS2V5XSA9IGZpbmlzaGVkV29yazsKICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrTm9kZUFzSG9pc3RhYmxlKGhvaXN0YWJsZVJvb3QpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWdzID0gaG9pc3RhYmxlUm9vdDsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJsaW5rIjoKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF5YmVOb2RlcyA9IGdldEh5ZHJhdGFibGVIb2lzdGFibGVDYWNoZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJsaW5rIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJocmVmIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QyCiAgICAgICAgICAgICAgICAgICAgICAgICAgKS5nZXQoZmxhZ3MgKyAoY3VycmVudDIuaHJlZiB8fCAiIikpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXliZU5vZGVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1heWJlTm9kZXMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChob2lzdGFibGVSb290ID0gbWF5YmVOb2Rlc1tpXSwgaG9pc3RhYmxlUm9vdC5nZXRBdHRyaWJ1dGUoImhyZWYiKSA9PT0gKG51bGwgPT0gY3VycmVudDIuaHJlZiB8fCAiIiA9PT0gY3VycmVudDIuaHJlZiA/IG51bGwgOiBjdXJyZW50Mi5ocmVmKSAmJiBob2lzdGFibGVSb290LmdldEF0dHJpYnV0ZSgicmVsIikgPT09IChudWxsID09IGN1cnJlbnQyLnJlbCA/IG51bGwgOiBjdXJyZW50Mi5yZWwpICYmIGhvaXN0YWJsZVJvb3QuZ2V0QXR0cmlidXRlKCJ0aXRsZSIpID09PSAobnVsbCA9PSBjdXJyZW50Mi50aXRsZSA/IG51bGwgOiBjdXJyZW50Mi50aXRsZSkgJiYgaG9pc3RhYmxlUm9vdC5nZXRBdHRyaWJ1dGUoImNyb3Nzb3JpZ2luIikgPT09IChudWxsID09IGN1cnJlbnQyLmNyb3NzT3JpZ2luID8gbnVsbCA6IGN1cnJlbnQyLmNyb3NzT3JpZ2luKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heWJlTm9kZXMuc3BsaWNlKGksIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgaG9pc3RhYmxlUm9vdCA9IHJvb3QyLmNyZWF0ZUVsZW1lbnQoZmxhZ3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHNldEluaXRpYWxQcm9wZXJ0aWVzKGhvaXN0YWJsZVJvb3QsIGZsYWdzLCBjdXJyZW50Mik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdDIuaGVhZC5hcHBlbmRDaGlsZChob2lzdGFibGVSb290KTsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAibWV0YSI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1heWJlTm9kZXMgPSBnZXRIeWRyYXRhYmxlSG9pc3RhYmxlQ2FjaGUoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWV0YSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY29udGVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290MgogICAgICAgICAgICAgICAgICAgICAgICAgICkuZ2V0KGZsYWdzICsgKGN1cnJlbnQyLmNvbnRlbnQgfHwgIiIpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IG1heWJlTm9kZXMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChob2lzdGFibGVSb290ID0gbWF5YmVOb2Rlc1tpXSwgY2hlY2tBdHRyaWJ1dGVTdHJpbmdDb2VyY2lvbigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Mi5jb250ZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJjb250ZW50IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCBob2lzdGFibGVSb290LmdldEF0dHJpYnV0ZSgiY29udGVudCIpID09PSAobnVsbCA9PSBjdXJyZW50Mi5jb250ZW50ID8gbnVsbCA6ICIiICsgY3VycmVudDIuY29udGVudCkgJiYgaG9pc3RhYmxlUm9vdC5nZXRBdHRyaWJ1dGUoIm5hbWUiKSA9PT0gKG51bGwgPT0gY3VycmVudDIubmFtZSA/IG51bGwgOiBjdXJyZW50Mi5uYW1lKSAmJiBob2lzdGFibGVSb290LmdldEF0dHJpYnV0ZSgicHJvcGVydHkiKSA9PT0gKG51bGwgPT0gY3VycmVudDIucHJvcGVydHkgPyBudWxsIDogY3VycmVudDIucHJvcGVydHkpICYmIGhvaXN0YWJsZVJvb3QuZ2V0QXR0cmlidXRlKCJodHRwLWVxdWl2IikgPT09IChudWxsID09IGN1cnJlbnQyLmh0dHBFcXVpdiA/IG51bGwgOiBjdXJyZW50Mi5odHRwRXF1aXYpICYmIGhvaXN0YWJsZVJvb3QuZ2V0QXR0cmlidXRlKCJjaGFyc2V0IikgPT09IChudWxsID09IGN1cnJlbnQyLmNoYXJTZXQgPyBudWxsIDogY3VycmVudDIuY2hhclNldCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXliZU5vZGVzLnNwbGljZShpLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayBiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIGhvaXN0YWJsZVJvb3QgPSByb290Mi5jcmVhdGVFbGVtZW50KGZsYWdzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJbml0aWFsUHJvcGVydGllcyhob2lzdGFibGVSb290LCBmbGFncywgY3VycmVudDIpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QyLmhlYWQuYXBwZW5kQ2hpbGQoaG9pc3RhYmxlUm9vdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZ2V0Tm9kZXNGb3JUeXBlIGVuY291bnRlcmVkIGEgdHlwZSBpdCBkaWQgbm90IGV4cGVjdDogIicgKyBmbGFncyArICciLiBUaGlzIGlzIGEgYnVnIGluIFJlYWN0LicKICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgaG9pc3RhYmxlUm9vdFtpbnRlcm5hbEluc3RhbmNlS2V5XSA9IGZpbmlzaGVkV29yazsKICAgICAgICAgICAgICAgICAgICAgIG1hcmtOb2RlQXNIb2lzdGFibGUoaG9pc3RhYmxlUm9vdCk7CiAgICAgICAgICAgICAgICAgICAgICBmbGFncyA9IGhvaXN0YWJsZVJvb3Q7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGZpbmlzaGVkV29yay5zdGF0ZU5vZGUgPSBmbGFnczsKICAgICAgICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgICAgICAgbW91bnRIb2lzdGFibGUoCiAgICAgICAgICAgICAgICAgICAgICBob2lzdGFibGVSb290LAogICAgICAgICAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLnR5cGUsCiAgICAgICAgICAgICAgICAgICAgICBmaW5pc2hlZFdvcmsuc3RhdGVOb2RlCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLnN0YXRlTm9kZSA9IGFjcXVpcmVSZXNvdXJjZSgKICAgICAgICAgICAgICAgICAgICBob2lzdGFibGVSb290LAogICAgICAgICAgICAgICAgICAgIGZsYWdzLAogICAgICAgICAgICAgICAgICAgIGZpbmlzaGVkV29yay5tZW1vaXplZFByb3BzCiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgcm9vdDIgIT09IGZsYWdzID8gKG51bGwgPT09IHJvb3QyID8gbnVsbCAhPT0gY3VycmVudDIuc3RhdGVOb2RlICYmIChjdXJyZW50MiA9IGN1cnJlbnQyLnN0YXRlTm9kZSwgY3VycmVudDIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjdXJyZW50MikpIDogcm9vdDIuY291bnQtLSwgbnVsbCA9PT0gZmxhZ3MgPyBtb3VudEhvaXN0YWJsZSgKICAgICAgICAgICAgICAgICAgaG9pc3RhYmxlUm9vdCwKICAgICAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLnR5cGUsCiAgICAgICAgICAgICAgICAgIGZpbmlzaGVkV29yay5zdGF0ZU5vZGUKICAgICAgICAgICAgICAgICkgOiBhY3F1aXJlUmVzb3VyY2UoCiAgICAgICAgICAgICAgICAgIGhvaXN0YWJsZVJvb3QsCiAgICAgICAgICAgICAgICAgIGZsYWdzLAogICAgICAgICAgICAgICAgICBmaW5pc2hlZFdvcmsubWVtb2l6ZWRQcm9wcwogICAgICAgICAgICAgICAgKSkgOiBudWxsID09PSBmbGFncyAmJiBudWxsICE9PSBmaW5pc2hlZFdvcmsuc3RhdGVOb2RlICYmIGNvbW1pdEhvc3RVcGRhdGUoCiAgICAgICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLm1lbW9pemVkUHJvcHMsCiAgICAgICAgICAgICAgICAgIGN1cnJlbnQyLm1lbW9pemVkUHJvcHMKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgcmVjdXJzaXZlbHlUcmF2ZXJzZU11dGF0aW9uRWZmZWN0cyhyb290MiwgZmluaXNoZWRXb3JrKTsKICAgICAgICAgICAgY29tbWl0UmVjb25jaWxpYXRpb25FZmZlY3RzKGZpbmlzaGVkV29yayk7CiAgICAgICAgICAgIGZsYWdzICYgNTEyICYmIChvZmZzY3JlZW5TdWJ0cmVlV2FzSGlkZGVuIHx8IG51bGwgPT09IGN1cnJlbnQyIHx8IHNhZmVseURldGFjaFJlZihjdXJyZW50MiwgY3VycmVudDIucmV0dXJuKSk7CiAgICAgICAgICAgIG51bGwgIT09IGN1cnJlbnQyICYmIGZsYWdzICYgNCAmJiBjb21taXRIb3N0VXBkYXRlKAogICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICBmaW5pc2hlZFdvcmsubWVtb2l6ZWRQcm9wcywKICAgICAgICAgICAgICBjdXJyZW50Mi5tZW1vaXplZFByb3BzCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICByZWN1cnNpdmVseVRyYXZlcnNlTXV0YXRpb25FZmZlY3RzKHJvb3QyLCBmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBjb21taXRSZWNvbmNpbGlhdGlvbkVmZmVjdHMoZmluaXNoZWRXb3JrKTsKICAgICAgICAgICAgZmxhZ3MgJiA1MTIgJiYgKG9mZnNjcmVlblN1YnRyZWVXYXNIaWRkZW4gfHwgbnVsbCA9PT0gY3VycmVudDIgfHwgc2FmZWx5RGV0YWNoUmVmKGN1cnJlbnQyLCBjdXJyZW50Mi5yZXR1cm4pKTsKICAgICAgICAgICAgaWYgKGZpbmlzaGVkV29yay5mbGFncyAmIDMyKSB7CiAgICAgICAgICAgICAgcm9vdDIgPSBmaW5pc2hlZFdvcmsuc3RhdGVOb2RlOwogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBydW5XaXRoRmliZXJJbkRFVihmaW5pc2hlZFdvcmssIHJlc2V0VGV4dENvbnRlbnQsIHJvb3QyKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgY2FwdHVyZUNvbW1pdFBoYXNlRXJyb3IoZmluaXNoZWRXb3JrLCBmaW5pc2hlZFdvcmsucmV0dXJuLCBlcnJvcik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZsYWdzICYgNCAmJiBudWxsICE9IGZpbmlzaGVkV29yay5zdGF0ZU5vZGUgJiYgKHJvb3QyID0gZmluaXNoZWRXb3JrLm1lbW9pemVkUHJvcHMsIGNvbW1pdEhvc3RVcGRhdGUoCiAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLAogICAgICAgICAgICAgIHJvb3QyLAogICAgICAgICAgICAgIG51bGwgIT09IGN1cnJlbnQyID8gY3VycmVudDIubWVtb2l6ZWRQcm9wcyA6IHJvb3QyCiAgICAgICAgICAgICkpOwogICAgICAgICAgICBmbGFncyAmIDEwMjQgJiYgKG5lZWRzRm9ybVJlc2V0ID0gdHJ1ZSwgImZvcm0iICE9PSBmaW5pc2hlZFdvcmsudHlwZSAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICJVbmV4cGVjdGVkIGhvc3QgY29tcG9uZW50IHR5cGUuIEV4cGVjdGVkIGEgZm9ybS4gVGhpcyBpcyBhIGJ1ZyBpbiBSZWFjdC4iCiAgICAgICAgICAgICkpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgcmVjdXJzaXZlbHlUcmF2ZXJzZU11dGF0aW9uRWZmZWN0cyhyb290MiwgZmluaXNoZWRXb3JrKTsKICAgICAgICAgICAgY29tbWl0UmVjb25jaWxpYXRpb25FZmZlY3RzKGZpbmlzaGVkV29yayk7CiAgICAgICAgICAgIGlmIChmbGFncyAmIDQpIHsKICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gZmluaXNoZWRXb3JrLnN0YXRlTm9kZSkKICAgICAgICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAgICAgICAiVGhpcyBzaG91bGQgaGF2ZSBhIHRleHQgbm9kZSBpbml0aWFsaXplZC4gVGhpcyBlcnJvciBpcyBsaWtlbHkgY2F1c2VkIGJ5IGEgYnVnIGluIFJlYWN0LiBQbGVhc2UgZmlsZSBhbiBpc3N1ZS4iCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGZsYWdzID0gZmluaXNoZWRXb3JrLm1lbW9pemVkUHJvcHM7CiAgICAgICAgICAgICAgY3VycmVudDIgPSBudWxsICE9PSBjdXJyZW50MiA/IGN1cnJlbnQyLm1lbW9pemVkUHJvcHMgOiBmbGFnczsKICAgICAgICAgICAgICByb290MiA9IGZpbmlzaGVkV29yay5zdGF0ZU5vZGU7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJ1bldpdGhGaWJlckluREVWKAogICAgICAgICAgICAgICAgICBmaW5pc2hlZFdvcmssCiAgICAgICAgICAgICAgICAgIGNvbW1pdFRleHRVcGRhdGUsCiAgICAgICAgICAgICAgICAgIHJvb3QyLAogICAgICAgICAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgICAgICAgICAgZmxhZ3MKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNhcHR1cmVDb21taXRQaGFzZUVycm9yKGZpbmlzaGVkV29yaywgZmluaXNoZWRXb3JrLnJldHVybiwgZXJyb3IpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgaG9pc3RhYmxlUm9vdCA9IHB1c2hOZXN0ZWRFZmZlY3REdXJhdGlvbnMoKTsKICAgICAgICAgICAgdGFnQ2FjaGVzID0gbnVsbDsKICAgICAgICAgICAgbWF5YmVOb2RlcyA9IGN1cnJlbnRIb2lzdGFibGVSb290OwogICAgICAgICAgICBjdXJyZW50SG9pc3RhYmxlUm9vdCA9IGdldEhvaXN0YWJsZVJvb3Qocm9vdDIuY29udGFpbmVySW5mbyk7CiAgICAgICAgICAgIHJlY3Vyc2l2ZWx5VHJhdmVyc2VNdXRhdGlvbkVmZmVjdHMocm9vdDIsIGZpbmlzaGVkV29yayk7CiAgICAgICAgICAgIGN1cnJlbnRIb2lzdGFibGVSb290ID0gbWF5YmVOb2RlczsKICAgICAgICAgICAgY29tbWl0UmVjb25jaWxpYXRpb25FZmZlY3RzKGZpbmlzaGVkV29yayk7CiAgICAgICAgICAgIGlmIChmbGFncyAmIDQgJiYgbnVsbCAhPT0gY3VycmVudDIgJiYgY3VycmVudDIubWVtb2l6ZWRTdGF0ZS5pc0RlaHlkcmF0ZWQpCiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJ1bldpdGhGaWJlckluREVWKAogICAgICAgICAgICAgICAgICBmaW5pc2hlZFdvcmssCiAgICAgICAgICAgICAgICAgIGNvbW1pdEh5ZHJhdGVkQ29udGFpbmVyLAogICAgICAgICAgICAgICAgICByb290Mi5jb250YWluZXJJbmZvCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjYXB0dXJlQ29tbWl0UGhhc2VFcnJvcihmaW5pc2hlZFdvcmssIGZpbmlzaGVkV29yay5yZXR1cm4sIGVycm9yKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIG5lZWRzRm9ybVJlc2V0ICYmIChuZWVkc0Zvcm1SZXNldCA9IGZhbHNlLCByZWN1cnNpdmVseVJlc2V0Rm9ybXMoZmluaXNoZWRXb3JrKSk7CiAgICAgICAgICAgIHJvb3QyLmVmZmVjdER1cmF0aW9uICs9IHBvcE5lc3RlZEVmZmVjdER1cmF0aW9ucyhob2lzdGFibGVSb290KTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGZsYWdzID0gY3VycmVudEhvaXN0YWJsZVJvb3Q7CiAgICAgICAgICAgIGN1cnJlbnRIb2lzdGFibGVSb290ID0gZ2V0SG9pc3RhYmxlUm9vdCgKICAgICAgICAgICAgICBmaW5pc2hlZFdvcmsuc3RhdGVOb2RlLmNvbnRhaW5lckluZm8KICAgICAgICAgICAgKTsKICAgICAgICAgICAgcmVjdXJzaXZlbHlUcmF2ZXJzZU11dGF0aW9uRWZmZWN0cyhyb290MiwgZmluaXNoZWRXb3JrKTsKICAgICAgICAgICAgY29tbWl0UmVjb25jaWxpYXRpb25FZmZlY3RzKGZpbmlzaGVkV29yayk7CiAgICAgICAgICAgIGN1cnJlbnRIb2lzdGFibGVSb290ID0gZmxhZ3M7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgZmxhZ3MgPSBwdXNoTmVzdGVkRWZmZWN0RHVyYXRpb25zKCk7CiAgICAgICAgICAgIHJlY3Vyc2l2ZWx5VHJhdmVyc2VNdXRhdGlvbkVmZmVjdHMocm9vdDIsIGZpbmlzaGVkV29yayk7CiAgICAgICAgICAgIGNvbW1pdFJlY29uY2lsaWF0aW9uRWZmZWN0cyhmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBmaW5pc2hlZFdvcmsuc3RhdGVOb2RlLmVmZmVjdER1cmF0aW9uICs9IGJ1YmJsZU5lc3RlZEVmZmVjdER1cmF0aW9ucyhmbGFncyk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgcmVjdXJzaXZlbHlUcmF2ZXJzZU11dGF0aW9uRWZmZWN0cyhyb290MiwgZmluaXNoZWRXb3JrKTsKICAgICAgICAgICAgY29tbWl0UmVjb25jaWxpYXRpb25FZmZlY3RzKGZpbmlzaGVkV29yayk7CiAgICAgICAgICAgIGZpbmlzaGVkV29yay5jaGlsZC5mbGFncyAmIDgxOTIgJiYgbnVsbCAhPT0gZmluaXNoZWRXb3JrLm1lbW9pemVkU3RhdGUgIT09IChudWxsICE9PSBjdXJyZW50MiAmJiBudWxsICE9PSBjdXJyZW50Mi5tZW1vaXplZFN0YXRlKSAmJiAoZ2xvYmFsTW9zdFJlY2VudEZhbGxiYWNrVGltZSA9IG5vdyQxKCkpOwogICAgICAgICAgICBmbGFncyAmIDQgJiYgKGZsYWdzID0gZmluaXNoZWRXb3JrLnVwZGF0ZVF1ZXVlLCBudWxsICE9PSBmbGFncyAmJiAoZmluaXNoZWRXb3JrLnVwZGF0ZVF1ZXVlID0gbnVsbCwgYXR0YWNoU3VzcGVuc2VSZXRyeUxpc3RlbmVycyhmaW5pc2hlZFdvcmssIGZsYWdzKSkpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgIGhvaXN0YWJsZVJvb3QgPSBudWxsICE9PSBmaW5pc2hlZFdvcmsubWVtb2l6ZWRTdGF0ZTsKICAgICAgICAgICAgdmFyIHdhc0hpZGRlbiA9IG51bGwgIT09IGN1cnJlbnQyICYmIG51bGwgIT09IGN1cnJlbnQyLm1lbW9pemVkU3RhdGUsIHByZXZPZmZzY3JlZW5TdWJ0cmVlSXNIaWRkZW4gPSBvZmZzY3JlZW5TdWJ0cmVlSXNIaWRkZW4sIHByZXZPZmZzY3JlZW5TdWJ0cmVlV2FzSGlkZGVuID0gb2Zmc2NyZWVuU3VidHJlZVdhc0hpZGRlbjsKICAgICAgICAgICAgb2Zmc2NyZWVuU3VidHJlZUlzSGlkZGVuID0gcHJldk9mZnNjcmVlblN1YnRyZWVJc0hpZGRlbiB8fCBob2lzdGFibGVSb290OwogICAgICAgICAgICBvZmZzY3JlZW5TdWJ0cmVlV2FzSGlkZGVuID0gcHJldk9mZnNjcmVlblN1YnRyZWVXYXNIaWRkZW4gfHwgd2FzSGlkZGVuOwogICAgICAgICAgICByZWN1cnNpdmVseVRyYXZlcnNlTXV0YXRpb25FZmZlY3RzKHJvb3QyLCBmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBvZmZzY3JlZW5TdWJ0cmVlV2FzSGlkZGVuID0gcHJldk9mZnNjcmVlblN1YnRyZWVXYXNIaWRkZW47CiAgICAgICAgICAgIG9mZnNjcmVlblN1YnRyZWVJc0hpZGRlbiA9IHByZXZPZmZzY3JlZW5TdWJ0cmVlSXNIaWRkZW47CiAgICAgICAgICAgIGNvbW1pdFJlY29uY2lsaWF0aW9uRWZmZWN0cyhmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBpZiAoZmxhZ3MgJiA4MTkyKQogICAgICAgICAgICAgIGE6IGZvciAocm9vdDIgPSBmaW5pc2hlZFdvcmsuc3RhdGVOb2RlLCByb290Mi5fdmlzaWJpbGl0eSA9IGhvaXN0YWJsZVJvb3QgPyByb290Mi5fdmlzaWJpbGl0eSAmIH5PZmZzY3JlZW5WaXNpYmxlIDogcm9vdDIuX3Zpc2liaWxpdHkgfCBPZmZzY3JlZW5WaXNpYmxlLCBob2lzdGFibGVSb290ICYmIChudWxsID09PSBjdXJyZW50MiB8fCB3YXNIaWRkZW4gfHwgb2Zmc2NyZWVuU3VidHJlZUlzSGlkZGVuIHx8IG9mZnNjcmVlblN1YnRyZWVXYXNIaWRkZW4gfHwgcmVjdXJzaXZlbHlUcmF2ZXJzZURpc2FwcGVhckxheW91dEVmZmVjdHMoZmluaXNoZWRXb3JrKSksIGN1cnJlbnQyID0gbnVsbCwgcm9vdDIgPSBmaW5pc2hlZFdvcms7IDsgKSB7CiAgICAgICAgICAgICAgICBpZiAoNSA9PT0gcm9vdDIudGFnIHx8IDI2ID09PSByb290Mi50YWcpIHsKICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGN1cnJlbnQyKSB7CiAgICAgICAgICAgICAgICAgICAgd2FzSGlkZGVuID0gY3VycmVudDIgPSByb290MjsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgbWF5YmVOb2RlcyA9IHdhc0hpZGRlbi5zdGF0ZU5vZGUsIGhvaXN0YWJsZVJvb3QgPyBydW5XaXRoRmliZXJJbkRFVih3YXNIaWRkZW4sIGhpZGVJbnN0YW5jZSwgbWF5YmVOb2RlcykgOiBydW5XaXRoRmliZXJJbkRFVigKICAgICAgICAgICAgICAgICAgICAgICAgd2FzSGlkZGVuLAogICAgICAgICAgICAgICAgICAgICAgICB1bmhpZGVJbnN0YW5jZSwKICAgICAgICAgICAgICAgICAgICAgICAgd2FzSGlkZGVuLnN0YXRlTm9kZSwKICAgICAgICAgICAgICAgICAgICAgICAgd2FzSGlkZGVuLm1lbW9pemVkUHJvcHMKICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVDb21taXRQaGFzZUVycm9yKHdhc0hpZGRlbiwgd2FzSGlkZGVuLnJldHVybiwgZXJyb3IpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmICg2ID09PSByb290Mi50YWcpIHsKICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGN1cnJlbnQyKSB7CiAgICAgICAgICAgICAgICAgICAgd2FzSGlkZGVuID0gcm9vdDI7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgIGkgPSB3YXNIaWRkZW4uc3RhdGVOb2RlLCBob2lzdGFibGVSb290ID8gcnVuV2l0aEZpYmVySW5ERVYod2FzSGlkZGVuLCBoaWRlVGV4dEluc3RhbmNlLCBpKSA6IHJ1bldpdGhGaWJlckluREVWKAogICAgICAgICAgICAgICAgICAgICAgICB3YXNIaWRkZW4sCiAgICAgICAgICAgICAgICAgICAgICAgIHVuaGlkZVRleHRJbnN0YW5jZSwKICAgICAgICAgICAgICAgICAgICAgICAgaSwKICAgICAgICAgICAgICAgICAgICAgICAgd2FzSGlkZGVuLm1lbW9pemVkUHJvcHMKICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVDb21taXRQaGFzZUVycm9yKHdhc0hpZGRlbiwgd2FzSGlkZGVuLnJldHVybiwgZXJyb3IpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmICgoMjIgIT09IHJvb3QyLnRhZyAmJiAyMyAhPT0gcm9vdDIudGFnIHx8IG51bGwgPT09IHJvb3QyLm1lbW9pemVkU3RhdGUgfHwgcm9vdDIgPT09IGZpbmlzaGVkV29yaykgJiYgbnVsbCAhPT0gcm9vdDIuY2hpbGQpIHsKICAgICAgICAgICAgICAgICAgcm9vdDIuY2hpbGQucmV0dXJuID0gcm9vdDI7CiAgICAgICAgICAgICAgICAgIHJvb3QyID0gcm9vdDIuY2hpbGQ7CiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHJvb3QyID09PSBmaW5pc2hlZFdvcmspIGJyZWFrIGE7CiAgICAgICAgICAgICAgICBmb3IgKDsgbnVsbCA9PT0gcm9vdDIuc2libGluZzsgKSB7CiAgICAgICAgICAgICAgICAgIGlmIChudWxsID09PSByb290Mi5yZXR1cm4gfHwgcm9vdDIucmV0dXJuID09PSBmaW5pc2hlZFdvcmspCiAgICAgICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICAgICAgY3VycmVudDIgPT09IHJvb3QyICYmIChjdXJyZW50MiA9IG51bGwpOwogICAgICAgICAgICAgICAgICByb290MiA9IHJvb3QyLnJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGN1cnJlbnQyID09PSByb290MiAmJiAoY3VycmVudDIgPSBudWxsKTsKICAgICAgICAgICAgICAgIHJvb3QyLnNpYmxpbmcucmV0dXJuID0gcm9vdDIucmV0dXJuOwogICAgICAgICAgICAgICAgcm9vdDIgPSByb290Mi5zaWJsaW5nOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgZmxhZ3MgJiA0ICYmIChmbGFncyA9IGZpbmlzaGVkV29yay51cGRhdGVRdWV1ZSwgbnVsbCAhPT0gZmxhZ3MgJiYgKGN1cnJlbnQyID0gZmxhZ3MucmV0cnlRdWV1ZSwgbnVsbCAhPT0gY3VycmVudDIgJiYgKGZsYWdzLnJldHJ5UXVldWUgPSBudWxsLCBhdHRhY2hTdXNwZW5zZVJldHJ5TGlzdGVuZXJzKGZpbmlzaGVkV29yaywgY3VycmVudDIpKSkpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgIHJlY3Vyc2l2ZWx5VHJhdmVyc2VNdXRhdGlvbkVmZmVjdHMocm9vdDIsIGZpbmlzaGVkV29yayk7CiAgICAgICAgICAgIGNvbW1pdFJlY29uY2lsaWF0aW9uRWZmZWN0cyhmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBmbGFncyAmIDQgJiYgKGZsYWdzID0gZmluaXNoZWRXb3JrLnVwZGF0ZVF1ZXVlLCBudWxsICE9PSBmbGFncyAmJiAoZmluaXNoZWRXb3JrLnVwZGF0ZVF1ZXVlID0gbnVsbCwgYXR0YWNoU3VzcGVuc2VSZXRyeUxpc3RlbmVycyhmaW5pc2hlZFdvcmssIGZsYWdzKSkpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICByZWN1cnNpdmVseVRyYXZlcnNlTXV0YXRpb25FZmZlY3RzKHJvb3QyLCBmaW5pc2hlZFdvcmspLCBjb21taXRSZWNvbmNpbGlhdGlvbkVmZmVjdHMoZmluaXNoZWRXb3JrKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY29tbWl0UmVjb25jaWxpYXRpb25FZmZlY3RzKGZpbmlzaGVkV29yaykgewogICAgICAgIHZhciBmbGFncyA9IGZpbmlzaGVkV29yay5mbGFnczsKICAgICAgICBpZiAoZmxhZ3MgJiAyKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBydW5XaXRoRmliZXJJbkRFVihmaW5pc2hlZFdvcmssIGNvbW1pdFBsYWNlbWVudCwgZmluaXNoZWRXb3JrKTsKICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIGNhcHR1cmVDb21taXRQaGFzZUVycm9yKGZpbmlzaGVkV29yaywgZmluaXNoZWRXb3JrLnJldHVybiwgZXJyb3IpOwogICAgICAgICAgfQogICAgICAgICAgZmluaXNoZWRXb3JrLmZsYWdzICY9IC0zOwogICAgICAgIH0KICAgICAgICBmbGFncyAmIDQwOTYgJiYgKGZpbmlzaGVkV29yay5mbGFncyAmPSAtNDA5Nyk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmVjdXJzaXZlbHlSZXNldEZvcm1zKHBhcmVudEZpYmVyKSB7CiAgICAgICAgaWYgKHBhcmVudEZpYmVyLnN1YnRyZWVGbGFncyAmIDEwMjQpCiAgICAgICAgICBmb3IgKHBhcmVudEZpYmVyID0gcGFyZW50RmliZXIuY2hpbGQ7IG51bGwgIT09IHBhcmVudEZpYmVyOyApIHsKICAgICAgICAgICAgdmFyIGZpYmVyID0gcGFyZW50RmliZXI7CiAgICAgICAgICAgIHJlY3Vyc2l2ZWx5UmVzZXRGb3JtcyhmaWJlcik7CiAgICAgICAgICAgIDUgPT09IGZpYmVyLnRhZyAmJiBmaWJlci5mbGFncyAmIDEwMjQgJiYgZmliZXIuc3RhdGVOb2RlLnJlc2V0KCk7CiAgICAgICAgICAgIHBhcmVudEZpYmVyID0gcGFyZW50RmliZXIuc2libGluZzsKICAgICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiByZWN1cnNpdmVseVRyYXZlcnNlTGF5b3V0RWZmZWN0cyhyb290MiwgcGFyZW50RmliZXIpIHsKICAgICAgICBpZiAocGFyZW50RmliZXIuc3VidHJlZUZsYWdzICYgODc3MikKICAgICAgICAgIGZvciAocGFyZW50RmliZXIgPSBwYXJlbnRGaWJlci5jaGlsZDsgbnVsbCAhPT0gcGFyZW50RmliZXI7ICkKICAgICAgICAgICAgY29tbWl0TGF5b3V0RWZmZWN0T25GaWJlcihyb290MiwgcGFyZW50RmliZXIuYWx0ZXJuYXRlLCBwYXJlbnRGaWJlciksIHBhcmVudEZpYmVyID0gcGFyZW50RmliZXIuc2libGluZzsKICAgICAgfQogICAgICBmdW5jdGlvbiBkaXNhcHBlYXJMYXlvdXRFZmZlY3RzKGZpbmlzaGVkV29yaykgewogICAgICAgIHN3aXRjaCAoZmluaXNoZWRXb3JrLnRhZykgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgY2FzZSAxMToKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICBjb21taXRIb29rTGF5b3V0VW5tb3VudEVmZmVjdHMoCiAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLAogICAgICAgICAgICAgIGZpbmlzaGVkV29yay5yZXR1cm4sCiAgICAgICAgICAgICAgTGF5b3V0CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHJlY3Vyc2l2ZWx5VHJhdmVyc2VEaXNhcHBlYXJMYXlvdXRFZmZlY3RzKGZpbmlzaGVkV29yayk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBzYWZlbHlEZXRhY2hSZWYoZmluaXNoZWRXb3JrLCBmaW5pc2hlZFdvcmsucmV0dXJuKTsKICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gZmluaXNoZWRXb3JrLnN0YXRlTm9kZTsKICAgICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGluc3RhbmNlLmNvbXBvbmVudFdpbGxVbm1vdW50ICYmIHNhZmVseUNhbGxDb21wb25lbnRXaWxsVW5tb3VudCgKICAgICAgICAgICAgICBmaW5pc2hlZFdvcmssCiAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLnJldHVybiwKICAgICAgICAgICAgICBpbnN0YW5jZQogICAgICAgICAgICApOwogICAgICAgICAgICByZWN1cnNpdmVseVRyYXZlcnNlRGlzYXBwZWFyTGF5b3V0RWZmZWN0cyhmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgIHJ1bldpdGhGaWJlckluREVWKAogICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICByZWxlYXNlU2luZ2xldG9uSW5zdGFuY2UsCiAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLnN0YXRlTm9kZQogICAgICAgICAgICApOwogICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgc2FmZWx5RGV0YWNoUmVmKGZpbmlzaGVkV29yaywgZmluaXNoZWRXb3JrLnJldHVybik7CiAgICAgICAgICAgIHJlY3Vyc2l2ZWx5VHJhdmVyc2VEaXNhcHBlYXJMYXlvdXRFZmZlY3RzKGZpbmlzaGVkV29yayk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgbnVsbCA9PT0gZmluaXNoZWRXb3JrLm1lbW9pemVkU3RhdGUgJiYgcmVjdXJzaXZlbHlUcmF2ZXJzZURpc2FwcGVhckxheW91dEVmZmVjdHMoZmluaXNoZWRXb3JrKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDMwOgogICAgICAgICAgICByZWN1cnNpdmVseVRyYXZlcnNlRGlzYXBwZWFyTGF5b3V0RWZmZWN0cyhmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJlY3Vyc2l2ZWx5VHJhdmVyc2VEaXNhcHBlYXJMYXlvdXRFZmZlY3RzKGZpbmlzaGVkV29yayk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlY3Vyc2l2ZWx5VHJhdmVyc2VEaXNhcHBlYXJMYXlvdXRFZmZlY3RzKHBhcmVudEZpYmVyKSB7CiAgICAgICAgZm9yIChwYXJlbnRGaWJlciA9IHBhcmVudEZpYmVyLmNoaWxkOyBudWxsICE9PSBwYXJlbnRGaWJlcjsgKQogICAgICAgICAgZGlzYXBwZWFyTGF5b3V0RWZmZWN0cyhwYXJlbnRGaWJlciksIHBhcmVudEZpYmVyID0gcGFyZW50RmliZXIuc2libGluZzsKICAgICAgfQogICAgICBmdW5jdGlvbiByZWFwcGVhckxheW91dEVmZmVjdHMoZmluaXNoZWRSb290LCBjdXJyZW50MiwgZmluaXNoZWRXb3JrLCBpbmNsdWRlV29ya0luUHJvZ3Jlc3NFZmZlY3RzKSB7CiAgICAgICAgdmFyIGZsYWdzID0gZmluaXNoZWRXb3JrLmZsYWdzOwogICAgICAgIHN3aXRjaCAoZmluaXNoZWRXb3JrLnRhZykgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgY2FzZSAxMToKICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIHJlY3Vyc2l2ZWx5VHJhdmVyc2VSZWFwcGVhckxheW91dEVmZmVjdHMoCiAgICAgICAgICAgICAgZmluaXNoZWRSb290LAogICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICBpbmNsdWRlV29ya0luUHJvZ3Jlc3NFZmZlY3RzCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGNvbW1pdEhvb2tMYXlvdXRFZmZlY3RzKGZpbmlzaGVkV29yaywgTGF5b3V0KTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIHJlY3Vyc2l2ZWx5VHJhdmVyc2VSZWFwcGVhckxheW91dEVmZmVjdHMoCiAgICAgICAgICAgICAgZmluaXNoZWRSb290LAogICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICBpbmNsdWRlV29ya0luUHJvZ3Jlc3NFZmZlY3RzCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGN1cnJlbnQyID0gZmluaXNoZWRXb3JrLnN0YXRlTm9kZTsKICAgICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGN1cnJlbnQyLmNvbXBvbmVudERpZE1vdW50ICYmIHJ1bldpdGhGaWJlckluREVWKAogICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICBjYWxsQ29tcG9uZW50RGlkTW91bnRJbkRFViwKICAgICAgICAgICAgICBmaW5pc2hlZFdvcmssCiAgICAgICAgICAgICAgY3VycmVudDIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgY3VycmVudDIgPSBmaW5pc2hlZFdvcmsudXBkYXRlUXVldWU7CiAgICAgICAgICAgIGlmIChudWxsICE9PSBjdXJyZW50MikgewogICAgICAgICAgICAgIGZpbmlzaGVkUm9vdCA9IGZpbmlzaGVkV29yay5zdGF0ZU5vZGU7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJ1bldpdGhGaWJlckluREVWKAogICAgICAgICAgICAgICAgICBmaW5pc2hlZFdvcmssCiAgICAgICAgICAgICAgICAgIGNvbW1pdEhpZGRlbkNhbGxiYWNrcywKICAgICAgICAgICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICAgICAgICAgIGZpbmlzaGVkUm9vdAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgY2FwdHVyZUNvbW1pdFBoYXNlRXJyb3IoZmluaXNoZWRXb3JrLCBmaW5pc2hlZFdvcmsucmV0dXJuLCBlcnJvcik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGluY2x1ZGVXb3JrSW5Qcm9ncmVzc0VmZmVjdHMgJiYgZmxhZ3MgJiA2NCAmJiBjb21taXRDbGFzc0NhbGxiYWNrcyhmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBzYWZlbHlBdHRhY2hSZWYoZmluaXNoZWRXb3JrLCBmaW5pc2hlZFdvcmsucmV0dXJuKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICBjb21taXRIb3N0U2luZ2xldG9uQWNxdWlzaXRpb24oZmluaXNoZWRXb3JrKTsKICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIHJlY3Vyc2l2ZWx5VHJhdmVyc2VSZWFwcGVhckxheW91dEVmZmVjdHMoCiAgICAgICAgICAgICAgZmluaXNoZWRSb290LAogICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICBpbmNsdWRlV29ya0luUHJvZ3Jlc3NFZmZlY3RzCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGluY2x1ZGVXb3JrSW5Qcm9ncmVzc0VmZmVjdHMgJiYgbnVsbCA9PT0gY3VycmVudDIgJiYgZmxhZ3MgJiA0ICYmIGNvbW1pdEhvc3RNb3VudChmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBzYWZlbHlBdHRhY2hSZWYoZmluaXNoZWRXb3JrLCBmaW5pc2hlZFdvcmsucmV0dXJuKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBpZiAoaW5jbHVkZVdvcmtJblByb2dyZXNzRWZmZWN0cyAmJiBmbGFncyAmIDQpIHsKICAgICAgICAgICAgICBmbGFncyA9IHB1c2hOZXN0ZWRFZmZlY3REdXJhdGlvbnMoKTsKICAgICAgICAgICAgICByZWN1cnNpdmVseVRyYXZlcnNlUmVhcHBlYXJMYXlvdXRFZmZlY3RzKAogICAgICAgICAgICAgICAgZmluaXNoZWRSb290LAogICAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLAogICAgICAgICAgICAgICAgaW5jbHVkZVdvcmtJblByb2dyZXNzRWZmZWN0cwogICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgaW5jbHVkZVdvcmtJblByb2dyZXNzRWZmZWN0cyA9IGZpbmlzaGVkV29yay5zdGF0ZU5vZGU7CiAgICAgICAgICAgICAgaW5jbHVkZVdvcmtJblByb2dyZXNzRWZmZWN0cy5lZmZlY3REdXJhdGlvbiArPSBidWJibGVOZXN0ZWRFZmZlY3REdXJhdGlvbnMoZmxhZ3MpOwogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBydW5XaXRoRmliZXJJbkRFVigKICAgICAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLAogICAgICAgICAgICAgICAgICBjb21taXRQcm9maWxlciwKICAgICAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLAogICAgICAgICAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgICAgICAgICAgY29tbWl0U3RhcnRUaW1lLAogICAgICAgICAgICAgICAgICBpbmNsdWRlV29ya0luUHJvZ3Jlc3NFZmZlY3RzLmVmZmVjdER1cmF0aW9uCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjYXB0dXJlQ29tbWl0UGhhc2VFcnJvcihmaW5pc2hlZFdvcmssIGZpbmlzaGVkV29yay5yZXR1cm4sIGVycm9yKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgIHJlY3Vyc2l2ZWx5VHJhdmVyc2VSZWFwcGVhckxheW91dEVmZmVjdHMoCiAgICAgICAgICAgICAgICBmaW5pc2hlZFJvb3QsCiAgICAgICAgICAgICAgICBmaW5pc2hlZFdvcmssCiAgICAgICAgICAgICAgICBpbmNsdWRlV29ya0luUHJvZ3Jlc3NFZmZlY3RzCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICByZWN1cnNpdmVseVRyYXZlcnNlUmVhcHBlYXJMYXlvdXRFZmZlY3RzKAogICAgICAgICAgICAgIGZpbmlzaGVkUm9vdCwKICAgICAgICAgICAgICBmaW5pc2hlZFdvcmssCiAgICAgICAgICAgICAgaW5jbHVkZVdvcmtJblByb2dyZXNzRWZmZWN0cwogICAgICAgICAgICApOwogICAgICAgICAgICBpbmNsdWRlV29ya0luUHJvZ3Jlc3NFZmZlY3RzICYmIGZsYWdzICYgNCAmJiBjb21taXRTdXNwZW5zZUh5ZHJhdGlvbkNhbGxiYWNrcyhmaW5pc2hlZFJvb3QsIGZpbmlzaGVkV29yayk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgbnVsbCA9PT0gZmluaXNoZWRXb3JrLm1lbW9pemVkU3RhdGUgJiYgcmVjdXJzaXZlbHlUcmF2ZXJzZVJlYXBwZWFyTGF5b3V0RWZmZWN0cygKICAgICAgICAgICAgICBmaW5pc2hlZFJvb3QsCiAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLAogICAgICAgICAgICAgIGluY2x1ZGVXb3JrSW5Qcm9ncmVzc0VmZmVjdHMKICAgICAgICAgICAgKTsKICAgICAgICAgICAgc2FmZWx5QXR0YWNoUmVmKGZpbmlzaGVkV29yaywgZmluaXNoZWRXb3JrLnJldHVybik7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAzMDoKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICByZWN1cnNpdmVseVRyYXZlcnNlUmVhcHBlYXJMYXlvdXRFZmZlY3RzKAogICAgICAgICAgICAgIGZpbmlzaGVkUm9vdCwKICAgICAgICAgICAgICBmaW5pc2hlZFdvcmssCiAgICAgICAgICAgICAgaW5jbHVkZVdvcmtJblByb2dyZXNzRWZmZWN0cwogICAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiByZWN1cnNpdmVseVRyYXZlcnNlUmVhcHBlYXJMYXlvdXRFZmZlY3RzKGZpbmlzaGVkUm9vdCwgcGFyZW50RmliZXIsIGluY2x1ZGVXb3JrSW5Qcm9ncmVzc0VmZmVjdHMpIHsKICAgICAgICBpbmNsdWRlV29ya0luUHJvZ3Jlc3NFZmZlY3RzID0gaW5jbHVkZVdvcmtJblByb2dyZXNzRWZmZWN0cyAmJiAwICE9PSAocGFyZW50RmliZXIuc3VidHJlZUZsYWdzICYgODc3Mik7CiAgICAgICAgZm9yIChwYXJlbnRGaWJlciA9IHBhcmVudEZpYmVyLmNoaWxkOyBudWxsICE9PSBwYXJlbnRGaWJlcjsgKQogICAgICAgICAgcmVhcHBlYXJMYXlvdXRFZmZlY3RzKAogICAgICAgICAgICBmaW5pc2hlZFJvb3QsCiAgICAgICAgICAgIHBhcmVudEZpYmVyLmFsdGVybmF0ZSwKICAgICAgICAgICAgcGFyZW50RmliZXIsCiAgICAgICAgICAgIGluY2x1ZGVXb3JrSW5Qcm9ncmVzc0VmZmVjdHMKICAgICAgICAgICksIHBhcmVudEZpYmVyID0gcGFyZW50RmliZXIuc2libGluZzsKICAgICAgfQogICAgICBmdW5jdGlvbiBjb21taXRPZmZzY3JlZW5QYXNzaXZlTW91bnRFZmZlY3RzKGN1cnJlbnQyLCBmaW5pc2hlZFdvcmspIHsKICAgICAgICB2YXIgcHJldmlvdXNDYWNoZSA9IG51bGw7CiAgICAgICAgbnVsbCAhPT0gY3VycmVudDIgJiYgbnVsbCAhPT0gY3VycmVudDIubWVtb2l6ZWRTdGF0ZSAmJiBudWxsICE9PSBjdXJyZW50Mi5tZW1vaXplZFN0YXRlLmNhY2hlUG9vbCAmJiAocHJldmlvdXNDYWNoZSA9IGN1cnJlbnQyLm1lbW9pemVkU3RhdGUuY2FjaGVQb29sLnBvb2wpOwogICAgICAgIGN1cnJlbnQyID0gbnVsbDsKICAgICAgICBudWxsICE9PSBmaW5pc2hlZFdvcmsubWVtb2l6ZWRTdGF0ZSAmJiBudWxsICE9PSBmaW5pc2hlZFdvcmsubWVtb2l6ZWRTdGF0ZS5jYWNoZVBvb2wgJiYgKGN1cnJlbnQyID0gZmluaXNoZWRXb3JrLm1lbW9pemVkU3RhdGUuY2FjaGVQb29sLnBvb2wpOwogICAgICAgIGN1cnJlbnQyICE9PSBwcmV2aW91c0NhY2hlICYmIChudWxsICE9IGN1cnJlbnQyICYmIHJldGFpbkNhY2hlKGN1cnJlbnQyKSwgbnVsbCAhPSBwcmV2aW91c0NhY2hlICYmIHJlbGVhc2VDYWNoZShwcmV2aW91c0NhY2hlKSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY29tbWl0Q2FjaGVQYXNzaXZlTW91bnRFZmZlY3QoY3VycmVudDIsIGZpbmlzaGVkV29yaykgewogICAgICAgIGN1cnJlbnQyID0gbnVsbDsKICAgICAgICBudWxsICE9PSBmaW5pc2hlZFdvcmsuYWx0ZXJuYXRlICYmIChjdXJyZW50MiA9IGZpbmlzaGVkV29yay5hbHRlcm5hdGUubWVtb2l6ZWRTdGF0ZS5jYWNoZSk7CiAgICAgICAgZmluaXNoZWRXb3JrID0gZmluaXNoZWRXb3JrLm1lbW9pemVkU3RhdGUuY2FjaGU7CiAgICAgICAgZmluaXNoZWRXb3JrICE9PSBjdXJyZW50MiAmJiAocmV0YWluQ2FjaGUoZmluaXNoZWRXb3JrKSwgbnVsbCAhPSBjdXJyZW50MiAmJiByZWxlYXNlQ2FjaGUoY3VycmVudDIpKTsKICAgICAgfQogICAgICBmdW5jdGlvbiByZWN1cnNpdmVseVRyYXZlcnNlUGFzc2l2ZU1vdW50RWZmZWN0cyhyb290MiwgcGFyZW50RmliZXIsIGNvbW1pdHRlZExhbmVzLCBjb21taXR0ZWRUcmFuc2l0aW9ucykgewogICAgICAgIGlmIChwYXJlbnRGaWJlci5zdWJ0cmVlRmxhZ3MgJiAxMDI1NikKICAgICAgICAgIGZvciAocGFyZW50RmliZXIgPSBwYXJlbnRGaWJlci5jaGlsZDsgbnVsbCAhPT0gcGFyZW50RmliZXI7ICkKICAgICAgICAgICAgY29tbWl0UGFzc2l2ZU1vdW50T25GaWJlcigKICAgICAgICAgICAgICByb290MiwKICAgICAgICAgICAgICBwYXJlbnRGaWJlciwKICAgICAgICAgICAgICBjb21taXR0ZWRMYW5lcywKICAgICAgICAgICAgICBjb21taXR0ZWRUcmFuc2l0aW9ucwogICAgICAgICAgICApLCBwYXJlbnRGaWJlciA9IHBhcmVudEZpYmVyLnNpYmxpbmc7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY29tbWl0UGFzc2l2ZU1vdW50T25GaWJlcihmaW5pc2hlZFJvb3QsIGZpbmlzaGVkV29yaywgY29tbWl0dGVkTGFuZXMsIGNvbW1pdHRlZFRyYW5zaXRpb25zKSB7CiAgICAgICAgdmFyIGZsYWdzID0gZmluaXNoZWRXb3JrLmZsYWdzOwogICAgICAgIHN3aXRjaCAoZmluaXNoZWRXb3JrLnRhZykgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgY2FzZSAxMToKICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIHJlY3Vyc2l2ZWx5VHJhdmVyc2VQYXNzaXZlTW91bnRFZmZlY3RzKAogICAgICAgICAgICAgIGZpbmlzaGVkUm9vdCwKICAgICAgICAgICAgICBmaW5pc2hlZFdvcmssCiAgICAgICAgICAgICAgY29tbWl0dGVkTGFuZXMsCiAgICAgICAgICAgICAgY29tbWl0dGVkVHJhbnNpdGlvbnMKICAgICAgICAgICAgKTsKICAgICAgICAgICAgZmxhZ3MgJiAyMDQ4ICYmIGNvbW1pdEhvb2tQYXNzaXZlTW91bnRFZmZlY3RzKGZpbmlzaGVkV29yaywgUGFzc2l2ZSB8IEhhc0VmZmVjdCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICByZWN1cnNpdmVseVRyYXZlcnNlUGFzc2l2ZU1vdW50RWZmZWN0cygKICAgICAgICAgICAgICBmaW5pc2hlZFJvb3QsCiAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLAogICAgICAgICAgICAgIGNvbW1pdHRlZExhbmVzLAogICAgICAgICAgICAgIGNvbW1pdHRlZFRyYW5zaXRpb25zCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICB2YXIgcHJldkVmZmVjdER1cmF0aW9uID0gcHVzaE5lc3RlZEVmZmVjdER1cmF0aW9ucygpOwogICAgICAgICAgICByZWN1cnNpdmVseVRyYXZlcnNlUGFzc2l2ZU1vdW50RWZmZWN0cygKICAgICAgICAgICAgICBmaW5pc2hlZFJvb3QsCiAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLAogICAgICAgICAgICAgIGNvbW1pdHRlZExhbmVzLAogICAgICAgICAgICAgIGNvbW1pdHRlZFRyYW5zaXRpb25zCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGZsYWdzICYgMjA0OCAmJiAoY29tbWl0dGVkTGFuZXMgPSBudWxsLCBudWxsICE9PSBmaW5pc2hlZFdvcmsuYWx0ZXJuYXRlICYmIChjb21taXR0ZWRMYW5lcyA9IGZpbmlzaGVkV29yay5hbHRlcm5hdGUubWVtb2l6ZWRTdGF0ZS5jYWNoZSksIGZpbmlzaGVkV29yayA9IGZpbmlzaGVkV29yay5tZW1vaXplZFN0YXRlLmNhY2hlLCBmaW5pc2hlZFdvcmsgIT09IGNvbW1pdHRlZExhbmVzICYmIChyZXRhaW5DYWNoZShmaW5pc2hlZFdvcmspLCBudWxsICE9IGNvbW1pdHRlZExhbmVzICYmIHJlbGVhc2VDYWNoZShjb21taXR0ZWRMYW5lcykpKTsKICAgICAgICAgICAgZmluaXNoZWRSb290LnBhc3NpdmVFZmZlY3REdXJhdGlvbiArPSBwb3BOZXN0ZWRFZmZlY3REdXJhdGlvbnMocHJldkVmZmVjdER1cmF0aW9uKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBpZiAoZmxhZ3MgJiAyMDQ4KSB7CiAgICAgICAgICAgICAgZmxhZ3MgPSBwdXNoTmVzdGVkRWZmZWN0RHVyYXRpb25zKCk7CiAgICAgICAgICAgICAgcmVjdXJzaXZlbHlUcmF2ZXJzZVBhc3NpdmVNb3VudEVmZmVjdHMoCiAgICAgICAgICAgICAgICBmaW5pc2hlZFJvb3QsCiAgICAgICAgICAgICAgICBmaW5pc2hlZFdvcmssCiAgICAgICAgICAgICAgICBjb21taXR0ZWRMYW5lcywKICAgICAgICAgICAgICAgIGNvbW1pdHRlZFRyYW5zaXRpb25zCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICBmaW5pc2hlZFJvb3QgPSBmaW5pc2hlZFdvcmsuc3RhdGVOb2RlOwogICAgICAgICAgICAgIGZpbmlzaGVkUm9vdC5wYXNzaXZlRWZmZWN0RHVyYXRpb24gKz0gYnViYmxlTmVzdGVkRWZmZWN0RHVyYXRpb25zKGZsYWdzKTsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcnVuV2l0aEZpYmVySW5ERVYoCiAgICAgICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICAgICAgY29tbWl0UHJvZmlsZXJQb3N0Q29tbWl0SW1wbCwKICAgICAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLAogICAgICAgICAgICAgICAgICBmaW5pc2hlZFdvcmsuYWx0ZXJuYXRlLAogICAgICAgICAgICAgICAgICBjb21taXRTdGFydFRpbWUsCiAgICAgICAgICAgICAgICAgIGZpbmlzaGVkUm9vdC5wYXNzaXZlRWZmZWN0RHVyYXRpb24KICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNhcHR1cmVDb21taXRQaGFzZUVycm9yKGZpbmlzaGVkV29yaywgZmluaXNoZWRXb3JrLnJldHVybiwgZXJyb3IpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgcmVjdXJzaXZlbHlUcmF2ZXJzZVBhc3NpdmVNb3VudEVmZmVjdHMoCiAgICAgICAgICAgICAgICBmaW5pc2hlZFJvb3QsCiAgICAgICAgICAgICAgICBmaW5pc2hlZFdvcmssCiAgICAgICAgICAgICAgICBjb21taXR0ZWRMYW5lcywKICAgICAgICAgICAgICAgIGNvbW1pdHRlZFRyYW5zaXRpb25zCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICByZWN1cnNpdmVseVRyYXZlcnNlUGFzc2l2ZU1vdW50RWZmZWN0cygKICAgICAgICAgICAgICBmaW5pc2hlZFJvb3QsCiAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLAogICAgICAgICAgICAgIGNvbW1pdHRlZExhbmVzLAogICAgICAgICAgICAgIGNvbW1pdHRlZFRyYW5zaXRpb25zCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICBwcmV2RWZmZWN0RHVyYXRpb24gPSBmaW5pc2hlZFdvcmsuc3RhdGVOb2RlOwogICAgICAgICAgICB2YXIgX2N1cnJlbnQgPSBmaW5pc2hlZFdvcmsuYWx0ZXJuYXRlOwogICAgICAgICAgICBudWxsICE9PSBmaW5pc2hlZFdvcmsubWVtb2l6ZWRTdGF0ZSA/IHByZXZFZmZlY3REdXJhdGlvbi5fdmlzaWJpbGl0eSAmIE9mZnNjcmVlblBhc3NpdmVFZmZlY3RzQ29ubmVjdGVkID8gcmVjdXJzaXZlbHlUcmF2ZXJzZVBhc3NpdmVNb3VudEVmZmVjdHMoCiAgICAgICAgICAgICAgZmluaXNoZWRSb290LAogICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICBjb21taXR0ZWRMYW5lcywKICAgICAgICAgICAgICBjb21taXR0ZWRUcmFuc2l0aW9ucwogICAgICAgICAgICApIDogcmVjdXJzaXZlbHlUcmF2ZXJzZUF0b21pY1Bhc3NpdmVFZmZlY3RzKAogICAgICAgICAgICAgIGZpbmlzaGVkUm9vdCwKICAgICAgICAgICAgICBmaW5pc2hlZFdvcmsKICAgICAgICAgICAgKSA6IHByZXZFZmZlY3REdXJhdGlvbi5fdmlzaWJpbGl0eSAmIE9mZnNjcmVlblBhc3NpdmVFZmZlY3RzQ29ubmVjdGVkID8gcmVjdXJzaXZlbHlUcmF2ZXJzZVBhc3NpdmVNb3VudEVmZmVjdHMoCiAgICAgICAgICAgICAgZmluaXNoZWRSb290LAogICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICBjb21taXR0ZWRMYW5lcywKICAgICAgICAgICAgICBjb21taXR0ZWRUcmFuc2l0aW9ucwogICAgICAgICAgICApIDogKHByZXZFZmZlY3REdXJhdGlvbi5fdmlzaWJpbGl0eSB8PSBPZmZzY3JlZW5QYXNzaXZlRWZmZWN0c0Nvbm5lY3RlZCwgcmVjdXJzaXZlbHlUcmF2ZXJzZVJlY29ubmVjdFBhc3NpdmVFZmZlY3RzKAogICAgICAgICAgICAgIGZpbmlzaGVkUm9vdCwKICAgICAgICAgICAgICBmaW5pc2hlZFdvcmssCiAgICAgICAgICAgICAgY29tbWl0dGVkTGFuZXMsCiAgICAgICAgICAgICAgY29tbWl0dGVkVHJhbnNpdGlvbnMsCiAgICAgICAgICAgICAgMCAhPT0gKGZpbmlzaGVkV29yay5zdWJ0cmVlRmxhZ3MgJiAxMDI1NikKICAgICAgICAgICAgKSk7CiAgICAgICAgICAgIGZsYWdzICYgMjA0OCAmJiBjb21taXRPZmZzY3JlZW5QYXNzaXZlTW91bnRFZmZlY3RzKF9jdXJyZW50LCBmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgIHJlY3Vyc2l2ZWx5VHJhdmVyc2VQYXNzaXZlTW91bnRFZmZlY3RzKAogICAgICAgICAgICAgIGZpbmlzaGVkUm9vdCwKICAgICAgICAgICAgICBmaW5pc2hlZFdvcmssCiAgICAgICAgICAgICAgY29tbWl0dGVkTGFuZXMsCiAgICAgICAgICAgICAgY29tbWl0dGVkVHJhbnNpdGlvbnMKICAgICAgICAgICAgKTsKICAgICAgICAgICAgZmxhZ3MgJiAyMDQ4ICYmIGNvbW1pdENhY2hlUGFzc2l2ZU1vdW50RWZmZWN0KGZpbmlzaGVkV29yay5hbHRlcm5hdGUsIGZpbmlzaGVkV29yayk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcmVjdXJzaXZlbHlUcmF2ZXJzZVBhc3NpdmVNb3VudEVmZmVjdHMoCiAgICAgICAgICAgICAgZmluaXNoZWRSb290LAogICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICBjb21taXR0ZWRMYW5lcywKICAgICAgICAgICAgICBjb21taXR0ZWRUcmFuc2l0aW9ucwogICAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiByZWN1cnNpdmVseVRyYXZlcnNlUmVjb25uZWN0UGFzc2l2ZUVmZmVjdHMoZmluaXNoZWRSb290LCBwYXJlbnRGaWJlciwgY29tbWl0dGVkTGFuZXMsIGNvbW1pdHRlZFRyYW5zaXRpb25zLCBpbmNsdWRlV29ya0luUHJvZ3Jlc3NFZmZlY3RzKSB7CiAgICAgICAgaW5jbHVkZVdvcmtJblByb2dyZXNzRWZmZWN0cyA9IGluY2x1ZGVXb3JrSW5Qcm9ncmVzc0VmZmVjdHMgJiYgMCAhPT0gKHBhcmVudEZpYmVyLnN1YnRyZWVGbGFncyAmIDEwMjU2KTsKICAgICAgICBmb3IgKHBhcmVudEZpYmVyID0gcGFyZW50RmliZXIuY2hpbGQ7IG51bGwgIT09IHBhcmVudEZpYmVyOyApCiAgICAgICAgICByZWNvbm5lY3RQYXNzaXZlRWZmZWN0cygKICAgICAgICAgICAgZmluaXNoZWRSb290LAogICAgICAgICAgICBwYXJlbnRGaWJlciwKICAgICAgICAgICAgY29tbWl0dGVkTGFuZXMsCiAgICAgICAgICAgIGNvbW1pdHRlZFRyYW5zaXRpb25zLAogICAgICAgICAgICBpbmNsdWRlV29ya0luUHJvZ3Jlc3NFZmZlY3RzCiAgICAgICAgICApLCBwYXJlbnRGaWJlciA9IHBhcmVudEZpYmVyLnNpYmxpbmc7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmVjb25uZWN0UGFzc2l2ZUVmZmVjdHMoZmluaXNoZWRSb290LCBmaW5pc2hlZFdvcmssIGNvbW1pdHRlZExhbmVzLCBjb21taXR0ZWRUcmFuc2l0aW9ucywgaW5jbHVkZVdvcmtJblByb2dyZXNzRWZmZWN0cykgewogICAgICAgIHZhciBmbGFncyA9IGZpbmlzaGVkV29yay5mbGFnczsKICAgICAgICBzd2l0Y2ggKGZpbmlzaGVkV29yay50YWcpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICByZWN1cnNpdmVseVRyYXZlcnNlUmVjb25uZWN0UGFzc2l2ZUVmZmVjdHMoCiAgICAgICAgICAgICAgZmluaXNoZWRSb290LAogICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICBjb21taXR0ZWRMYW5lcywKICAgICAgICAgICAgICBjb21taXR0ZWRUcmFuc2l0aW9ucywKICAgICAgICAgICAgICBpbmNsdWRlV29ya0luUHJvZ3Jlc3NFZmZlY3RzCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGNvbW1pdEhvb2tQYXNzaXZlTW91bnRFZmZlY3RzKGZpbmlzaGVkV29yaywgUGFzc2l2ZSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICB2YXIgX2luc3RhbmNlMiA9IGZpbmlzaGVkV29yay5zdGF0ZU5vZGU7CiAgICAgICAgICAgIG51bGwgIT09IGZpbmlzaGVkV29yay5tZW1vaXplZFN0YXRlID8gX2luc3RhbmNlMi5fdmlzaWJpbGl0eSAmIE9mZnNjcmVlblBhc3NpdmVFZmZlY3RzQ29ubmVjdGVkID8gcmVjdXJzaXZlbHlUcmF2ZXJzZVJlY29ubmVjdFBhc3NpdmVFZmZlY3RzKAogICAgICAgICAgICAgIGZpbmlzaGVkUm9vdCwKICAgICAgICAgICAgICBmaW5pc2hlZFdvcmssCiAgICAgICAgICAgICAgY29tbWl0dGVkTGFuZXMsCiAgICAgICAgICAgICAgY29tbWl0dGVkVHJhbnNpdGlvbnMsCiAgICAgICAgICAgICAgaW5jbHVkZVdvcmtJblByb2dyZXNzRWZmZWN0cwogICAgICAgICAgICApIDogcmVjdXJzaXZlbHlUcmF2ZXJzZUF0b21pY1Bhc3NpdmVFZmZlY3RzKAogICAgICAgICAgICAgIGZpbmlzaGVkUm9vdCwKICAgICAgICAgICAgICBmaW5pc2hlZFdvcmsKICAgICAgICAgICAgKSA6IChfaW5zdGFuY2UyLl92aXNpYmlsaXR5IHw9IE9mZnNjcmVlblBhc3NpdmVFZmZlY3RzQ29ubmVjdGVkLCByZWN1cnNpdmVseVRyYXZlcnNlUmVjb25uZWN0UGFzc2l2ZUVmZmVjdHMoCiAgICAgICAgICAgICAgZmluaXNoZWRSb290LAogICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICBjb21taXR0ZWRMYW5lcywKICAgICAgICAgICAgICBjb21taXR0ZWRUcmFuc2l0aW9ucywKICAgICAgICAgICAgICBpbmNsdWRlV29ya0luUHJvZ3Jlc3NFZmZlY3RzCiAgICAgICAgICAgICkpOwogICAgICAgICAgICBpbmNsdWRlV29ya0luUHJvZ3Jlc3NFZmZlY3RzICYmIGZsYWdzICYgMjA0OCAmJiBjb21taXRPZmZzY3JlZW5QYXNzaXZlTW91bnRFZmZlY3RzKAogICAgICAgICAgICAgIGZpbmlzaGVkV29yay5hbHRlcm5hdGUsCiAgICAgICAgICAgICAgZmluaXNoZWRXb3JrCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgcmVjdXJzaXZlbHlUcmF2ZXJzZVJlY29ubmVjdFBhc3NpdmVFZmZlY3RzKAogICAgICAgICAgICAgIGZpbmlzaGVkUm9vdCwKICAgICAgICAgICAgICBmaW5pc2hlZFdvcmssCiAgICAgICAgICAgICAgY29tbWl0dGVkTGFuZXMsCiAgICAgICAgICAgICAgY29tbWl0dGVkVHJhbnNpdGlvbnMsCiAgICAgICAgICAgICAgaW5jbHVkZVdvcmtJblByb2dyZXNzRWZmZWN0cwogICAgICAgICAgICApOwogICAgICAgICAgICBpbmNsdWRlV29ya0luUHJvZ3Jlc3NFZmZlY3RzICYmIGZsYWdzICYgMjA0OCAmJiBjb21taXRDYWNoZVBhc3NpdmVNb3VudEVmZmVjdChmaW5pc2hlZFdvcmsuYWx0ZXJuYXRlLCBmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJlY3Vyc2l2ZWx5VHJhdmVyc2VSZWNvbm5lY3RQYXNzaXZlRWZmZWN0cygKICAgICAgICAgICAgICBmaW5pc2hlZFJvb3QsCiAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLAogICAgICAgICAgICAgIGNvbW1pdHRlZExhbmVzLAogICAgICAgICAgICAgIGNvbW1pdHRlZFRyYW5zaXRpb25zLAogICAgICAgICAgICAgIGluY2x1ZGVXb3JrSW5Qcm9ncmVzc0VmZmVjdHMKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmVjdXJzaXZlbHlUcmF2ZXJzZUF0b21pY1Bhc3NpdmVFZmZlY3RzKGZpbmlzaGVkUm9vdCRqc2NvbXAkMCwgcGFyZW50RmliZXIpIHsKICAgICAgICBpZiAocGFyZW50RmliZXIuc3VidHJlZUZsYWdzICYgMTAyNTYpCiAgICAgICAgICBmb3IgKHBhcmVudEZpYmVyID0gcGFyZW50RmliZXIuY2hpbGQ7IG51bGwgIT09IHBhcmVudEZpYmVyOyApIHsKICAgICAgICAgICAgdmFyIGZpbmlzaGVkUm9vdCA9IGZpbmlzaGVkUm9vdCRqc2NvbXAkMCwgZmluaXNoZWRXb3JrID0gcGFyZW50RmliZXIsIGZsYWdzID0gZmluaXNoZWRXb3JrLmZsYWdzOwogICAgICAgICAgICBzd2l0Y2ggKGZpbmlzaGVkV29yay50YWcpIHsKICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgICAgcmVjdXJzaXZlbHlUcmF2ZXJzZUF0b21pY1Bhc3NpdmVFZmZlY3RzKAogICAgICAgICAgICAgICAgICBmaW5pc2hlZFJvb3QsCiAgICAgICAgICAgICAgICAgIGZpbmlzaGVkV29yawogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGZsYWdzICYgMjA0OCAmJiBjb21taXRPZmZzY3JlZW5QYXNzaXZlTW91bnRFZmZlY3RzKAogICAgICAgICAgICAgICAgICBmaW5pc2hlZFdvcmsuYWx0ZXJuYXRlLAogICAgICAgICAgICAgICAgICBmaW5pc2hlZFdvcmsKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgICAgcmVjdXJzaXZlbHlUcmF2ZXJzZUF0b21pY1Bhc3NpdmVFZmZlY3RzKAogICAgICAgICAgICAgICAgICBmaW5pc2hlZFJvb3QsCiAgICAgICAgICAgICAgICAgIGZpbmlzaGVkV29yawogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGZsYWdzICYgMjA0OCAmJiBjb21taXRDYWNoZVBhc3NpdmVNb3VudEVmZmVjdCgKICAgICAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLmFsdGVybmF0ZSwKICAgICAgICAgICAgICAgICAgZmluaXNoZWRXb3JrCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZWx5VHJhdmVyc2VBdG9taWNQYXNzaXZlRWZmZWN0cygKICAgICAgICAgICAgICAgICAgZmluaXNoZWRSb290LAogICAgICAgICAgICAgICAgICBmaW5pc2hlZFdvcmsKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcGFyZW50RmliZXIgPSBwYXJlbnRGaWJlci5zaWJsaW5nOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlY3Vyc2l2ZWx5QWNjdW11bGF0ZVN1c3BlbnNleUNvbW1pdChwYXJlbnRGaWJlcikgewogICAgICAgIGlmIChwYXJlbnRGaWJlci5zdWJ0cmVlRmxhZ3MgJiBzdXNwZW5zZXlDb21taXRGbGFnKQogICAgICAgICAgZm9yIChwYXJlbnRGaWJlciA9IHBhcmVudEZpYmVyLmNoaWxkOyBudWxsICE9PSBwYXJlbnRGaWJlcjsgKQogICAgICAgICAgICBhY2N1bXVsYXRlU3VzcGVuc2V5Q29tbWl0T25GaWJlcihwYXJlbnRGaWJlciksIHBhcmVudEZpYmVyID0gcGFyZW50RmliZXIuc2libGluZzsKICAgICAgfQogICAgICBmdW5jdGlvbiBhY2N1bXVsYXRlU3VzcGVuc2V5Q29tbWl0T25GaWJlcihmaWJlcikgewogICAgICAgIHN3aXRjaCAoZmliZXIudGFnKSB7CiAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICByZWN1cnNpdmVseUFjY3VtdWxhdGVTdXNwZW5zZXlDb21taXQoZmliZXIpOwogICAgICAgICAgICBmaWJlci5mbGFncyAmIHN1c3BlbnNleUNvbW1pdEZsYWcgJiYgbnVsbCAhPT0gZmliZXIubWVtb2l6ZWRTdGF0ZSAmJiBzdXNwZW5kUmVzb3VyY2UoCiAgICAgICAgICAgICAgY3VycmVudEhvaXN0YWJsZVJvb3QsCiAgICAgICAgICAgICAgZmliZXIubWVtb2l6ZWRTdGF0ZSwKICAgICAgICAgICAgICBmaWJlci5tZW1vaXplZFByb3BzCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICByZWN1cnNpdmVseUFjY3VtdWxhdGVTdXNwZW5zZXlDb21taXQoZmliZXIpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgdmFyIHByZXZpb3VzSG9pc3RhYmxlUm9vdCA9IGN1cnJlbnRIb2lzdGFibGVSb290OwogICAgICAgICAgICBjdXJyZW50SG9pc3RhYmxlUm9vdCA9IGdldEhvaXN0YWJsZVJvb3QoCiAgICAgICAgICAgICAgZmliZXIuc3RhdGVOb2RlLmNvbnRhaW5lckluZm8KICAgICAgICAgICAgKTsKICAgICAgICAgICAgcmVjdXJzaXZlbHlBY2N1bXVsYXRlU3VzcGVuc2V5Q29tbWl0KGZpYmVyKTsKICAgICAgICAgICAgY3VycmVudEhvaXN0YWJsZVJvb3QgPSBwcmV2aW91c0hvaXN0YWJsZVJvb3Q7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgbnVsbCA9PT0gZmliZXIubWVtb2l6ZWRTdGF0ZSAmJiAocHJldmlvdXNIb2lzdGFibGVSb290ID0gZmliZXIuYWx0ZXJuYXRlLCBudWxsICE9PSBwcmV2aW91c0hvaXN0YWJsZVJvb3QgJiYgbnVsbCAhPT0gcHJldmlvdXNIb2lzdGFibGVSb290Lm1lbW9pemVkU3RhdGUgPyAocHJldmlvdXNIb2lzdGFibGVSb290ID0gc3VzcGVuc2V5Q29tbWl0RmxhZywgc3VzcGVuc2V5Q29tbWl0RmxhZyA9IDE2Nzc3MjE2LCByZWN1cnNpdmVseUFjY3VtdWxhdGVTdXNwZW5zZXlDb21taXQoZmliZXIpLCBzdXNwZW5zZXlDb21taXRGbGFnID0gcHJldmlvdXNIb2lzdGFibGVSb290KSA6IHJlY3Vyc2l2ZWx5QWNjdW11bGF0ZVN1c3BlbnNleUNvbW1pdChmaWJlcikpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJlY3Vyc2l2ZWx5QWNjdW11bGF0ZVN1c3BlbnNleUNvbW1pdChmaWJlcik7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGRldGFjaEFsdGVybmF0ZVNpYmxpbmdzKHBhcmVudEZpYmVyKSB7CiAgICAgICAgdmFyIHByZXZpb3VzRmliZXIgPSBwYXJlbnRGaWJlci5hbHRlcm5hdGU7CiAgICAgICAgaWYgKG51bGwgIT09IHByZXZpb3VzRmliZXIgJiYgKHBhcmVudEZpYmVyID0gcHJldmlvdXNGaWJlci5jaGlsZCwgbnVsbCAhPT0gcGFyZW50RmliZXIpKSB7CiAgICAgICAgICBwcmV2aW91c0ZpYmVyLmNoaWxkID0gbnVsbDsKICAgICAgICAgIGRvCiAgICAgICAgICAgIHByZXZpb3VzRmliZXIgPSBwYXJlbnRGaWJlci5zaWJsaW5nLCBwYXJlbnRGaWJlci5zaWJsaW5nID0gbnVsbCwgcGFyZW50RmliZXIgPSBwcmV2aW91c0ZpYmVyOwogICAgICAgICAgd2hpbGUgKG51bGwgIT09IHBhcmVudEZpYmVyKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmVjdXJzaXZlbHlUcmF2ZXJzZVBhc3NpdmVVbm1vdW50RWZmZWN0cyhwYXJlbnRGaWJlcikgewogICAgICAgIHZhciBkZWxldGlvbnMgPSBwYXJlbnRGaWJlci5kZWxldGlvbnM7CiAgICAgICAgaWYgKDAgIT09IChwYXJlbnRGaWJlci5mbGFncyAmIDE2KSkgewogICAgICAgICAgaWYgKG51bGwgIT09IGRlbGV0aW9ucykKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkZWxldGlvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB2YXIgY2hpbGRUb0RlbGV0ZSA9IGRlbGV0aW9uc1tpXTsKICAgICAgICAgICAgICBuZXh0RWZmZWN0ID0gY2hpbGRUb0RlbGV0ZTsKICAgICAgICAgICAgICBjb21taXRQYXNzaXZlVW5tb3VudEVmZmVjdHNJbnNpZGVPZkRlbGV0ZWRUcmVlX2JlZ2luKAogICAgICAgICAgICAgICAgY2hpbGRUb0RlbGV0ZSwKICAgICAgICAgICAgICAgIHBhcmVudEZpYmVyCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgZGV0YWNoQWx0ZXJuYXRlU2libGluZ3MocGFyZW50RmliZXIpOwogICAgICAgIH0KICAgICAgICBpZiAocGFyZW50RmliZXIuc3VidHJlZUZsYWdzICYgMTAyNTYpCiAgICAgICAgICBmb3IgKHBhcmVudEZpYmVyID0gcGFyZW50RmliZXIuY2hpbGQ7IG51bGwgIT09IHBhcmVudEZpYmVyOyApCiAgICAgICAgICAgIGNvbW1pdFBhc3NpdmVVbm1vdW50T25GaWJlcihwYXJlbnRGaWJlciksIHBhcmVudEZpYmVyID0gcGFyZW50RmliZXIuc2libGluZzsKICAgICAgfQogICAgICBmdW5jdGlvbiBjb21taXRQYXNzaXZlVW5tb3VudE9uRmliZXIoZmluaXNoZWRXb3JrKSB7CiAgICAgICAgc3dpdGNoIChmaW5pc2hlZFdvcmsudGFnKSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgcmVjdXJzaXZlbHlUcmF2ZXJzZVBhc3NpdmVVbm1vdW50RWZmZWN0cyhmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBmaW5pc2hlZFdvcmsuZmxhZ3MgJiAyMDQ4ICYmIGNvbW1pdEhvb2tQYXNzaXZlVW5tb3VudEVmZmVjdHMoCiAgICAgICAgICAgICAgZmluaXNoZWRXb3JrLAogICAgICAgICAgICAgIGZpbmlzaGVkV29yay5yZXR1cm4sCiAgICAgICAgICAgICAgUGFzc2l2ZSB8IEhhc0VmZmVjdAogICAgICAgICAgICApOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgdmFyIHByZXZFZmZlY3REdXJhdGlvbiA9IHB1c2hOZXN0ZWRFZmZlY3REdXJhdGlvbnMoKTsKICAgICAgICAgICAgcmVjdXJzaXZlbHlUcmF2ZXJzZVBhc3NpdmVVbm1vdW50RWZmZWN0cyhmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBmaW5pc2hlZFdvcmsuc3RhdGVOb2RlLnBhc3NpdmVFZmZlY3REdXJhdGlvbiArPSBwb3BOZXN0ZWRFZmZlY3REdXJhdGlvbnMocHJldkVmZmVjdER1cmF0aW9uKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBwcmV2RWZmZWN0RHVyYXRpb24gPSBwdXNoTmVzdGVkRWZmZWN0RHVyYXRpb25zKCk7CiAgICAgICAgICAgIHJlY3Vyc2l2ZWx5VHJhdmVyc2VQYXNzaXZlVW5tb3VudEVmZmVjdHMoZmluaXNoZWRXb3JrKTsKICAgICAgICAgICAgZmluaXNoZWRXb3JrLnN0YXRlTm9kZS5wYXNzaXZlRWZmZWN0RHVyYXRpb24gKz0gYnViYmxlTmVzdGVkRWZmZWN0RHVyYXRpb25zKHByZXZFZmZlY3REdXJhdGlvbik7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgcHJldkVmZmVjdER1cmF0aW9uID0gZmluaXNoZWRXb3JrLnN0YXRlTm9kZTsKICAgICAgICAgICAgbnVsbCAhPT0gZmluaXNoZWRXb3JrLm1lbW9pemVkU3RhdGUgJiYgcHJldkVmZmVjdER1cmF0aW9uLl92aXNpYmlsaXR5ICYgT2Zmc2NyZWVuUGFzc2l2ZUVmZmVjdHNDb25uZWN0ZWQgJiYgKG51bGwgPT09IGZpbmlzaGVkV29yay5yZXR1cm4gfHwgMTMgIT09IGZpbmlzaGVkV29yay5yZXR1cm4udGFnKSA/IChwcmV2RWZmZWN0RHVyYXRpb24uX3Zpc2liaWxpdHkgJj0gfk9mZnNjcmVlblBhc3NpdmVFZmZlY3RzQ29ubmVjdGVkLCByZWN1cnNpdmVseVRyYXZlcnNlRGlzY29ubmVjdFBhc3NpdmVFZmZlY3RzKGZpbmlzaGVkV29yaykpIDogcmVjdXJzaXZlbHlUcmF2ZXJzZVBhc3NpdmVVbm1vdW50RWZmZWN0cyhmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJlY3Vyc2l2ZWx5VHJhdmVyc2VQYXNzaXZlVW5tb3VudEVmZmVjdHMoZmluaXNoZWRXb3JrKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmVjdXJzaXZlbHlUcmF2ZXJzZURpc2Nvbm5lY3RQYXNzaXZlRWZmZWN0cyhwYXJlbnRGaWJlcikgewogICAgICAgIHZhciBkZWxldGlvbnMgPSBwYXJlbnRGaWJlci5kZWxldGlvbnM7CiAgICAgICAgaWYgKDAgIT09IChwYXJlbnRGaWJlci5mbGFncyAmIDE2KSkgewogICAgICAgICAgaWYgKG51bGwgIT09IGRlbGV0aW9ucykKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkZWxldGlvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB2YXIgY2hpbGRUb0RlbGV0ZSA9IGRlbGV0aW9uc1tpXTsKICAgICAgICAgICAgICBuZXh0RWZmZWN0ID0gY2hpbGRUb0RlbGV0ZTsKICAgICAgICAgICAgICBjb21taXRQYXNzaXZlVW5tb3VudEVmZmVjdHNJbnNpZGVPZkRlbGV0ZWRUcmVlX2JlZ2luKAogICAgICAgICAgICAgICAgY2hpbGRUb0RlbGV0ZSwKICAgICAgICAgICAgICAgIHBhcmVudEZpYmVyCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgZGV0YWNoQWx0ZXJuYXRlU2libGluZ3MocGFyZW50RmliZXIpOwogICAgICAgIH0KICAgICAgICBmb3IgKHBhcmVudEZpYmVyID0gcGFyZW50RmliZXIuY2hpbGQ7IG51bGwgIT09IHBhcmVudEZpYmVyOyApCiAgICAgICAgICBkaXNjb25uZWN0UGFzc2l2ZUVmZmVjdChwYXJlbnRGaWJlciksIHBhcmVudEZpYmVyID0gcGFyZW50RmliZXIuc2libGluZzsKICAgICAgfQogICAgICBmdW5jdGlvbiBkaXNjb25uZWN0UGFzc2l2ZUVmZmVjdChmaW5pc2hlZFdvcmspIHsKICAgICAgICBzd2l0Y2ggKGZpbmlzaGVkV29yay50YWcpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICBjb21taXRIb29rUGFzc2l2ZVVubW91bnRFZmZlY3RzKAogICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICBmaW5pc2hlZFdvcmsucmV0dXJuLAogICAgICAgICAgICAgIFBhc3NpdmUKICAgICAgICAgICAgKTsKICAgICAgICAgICAgcmVjdXJzaXZlbHlUcmF2ZXJzZURpc2Nvbm5lY3RQYXNzaXZlRWZmZWN0cyhmaW5pc2hlZFdvcmspOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IGZpbmlzaGVkV29yay5zdGF0ZU5vZGU7CiAgICAgICAgICAgIGluc3RhbmNlLl92aXNpYmlsaXR5ICYgT2Zmc2NyZWVuUGFzc2l2ZUVmZmVjdHNDb25uZWN0ZWQgJiYgKGluc3RhbmNlLl92aXNpYmlsaXR5ICY9IH5PZmZzY3JlZW5QYXNzaXZlRWZmZWN0c0Nvbm5lY3RlZCwgcmVjdXJzaXZlbHlUcmF2ZXJzZURpc2Nvbm5lY3RQYXNzaXZlRWZmZWN0cyhmaW5pc2hlZFdvcmspKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICByZWN1cnNpdmVseVRyYXZlcnNlRGlzY29ubmVjdFBhc3NpdmVFZmZlY3RzKGZpbmlzaGVkV29yayk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNvbW1pdFBhc3NpdmVVbm1vdW50RWZmZWN0c0luc2lkZU9mRGVsZXRlZFRyZWVfYmVnaW4oZGVsZXRlZFN1YnRyZWVSb290LCBuZWFyZXN0TW91bnRlZEFuY2VzdG9yKSB7CiAgICAgICAgZm9yICg7IG51bGwgIT09IG5leHRFZmZlY3Q7ICkgewogICAgICAgICAgdmFyIGZpYmVyID0gbmV4dEVmZmVjdCwgY3VycmVudDIgPSBmaWJlcjsKICAgICAgICAgIHN3aXRjaCAoY3VycmVudDIudGFnKSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjb21taXRIb29rUGFzc2l2ZVVubW91bnRFZmZlY3RzKAogICAgICAgICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICAgICAgICBuZWFyZXN0TW91bnRlZEFuY2VzdG9yLAogICAgICAgICAgICAgICAgUGFzc2l2ZQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgbnVsbCAhPT0gY3VycmVudDIubWVtb2l6ZWRTdGF0ZSAmJiBudWxsICE9PSBjdXJyZW50Mi5tZW1vaXplZFN0YXRlLmNhY2hlUG9vbCAmJiAoY3VycmVudDIgPSBjdXJyZW50Mi5tZW1vaXplZFN0YXRlLmNhY2hlUG9vbC5wb29sLCBudWxsICE9IGN1cnJlbnQyICYmIHJldGFpbkNhY2hlKGN1cnJlbnQyKSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgcmVsZWFzZUNhY2hlKGN1cnJlbnQyLm1lbW9pemVkU3RhdGUuY2FjaGUpOwogICAgICAgICAgfQogICAgICAgICAgY3VycmVudDIgPSBmaWJlci5jaGlsZDsKICAgICAgICAgIGlmIChudWxsICE9PSBjdXJyZW50MikgY3VycmVudDIucmV0dXJuID0gZmliZXIsIG5leHRFZmZlY3QgPSBjdXJyZW50MjsKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgYTogZm9yIChmaWJlciA9IGRlbGV0ZWRTdWJ0cmVlUm9vdDsgbnVsbCAhPT0gbmV4dEVmZmVjdDsgKSB7CiAgICAgICAgICAgICAgY3VycmVudDIgPSBuZXh0RWZmZWN0OwogICAgICAgICAgICAgIHZhciBzaWJsaW5nID0gY3VycmVudDIuc2libGluZywgcmV0dXJuRmliZXIgPSBjdXJyZW50Mi5yZXR1cm47CiAgICAgICAgICAgICAgZGV0YWNoRmliZXJBZnRlckVmZmVjdHMoY3VycmVudDIpOwogICAgICAgICAgICAgIGlmIChjdXJyZW50MiA9PT0gZmliZXIpIHsKICAgICAgICAgICAgICAgIG5leHRFZmZlY3QgPSBudWxsOwogICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHNpYmxpbmcpIHsKICAgICAgICAgICAgICAgIHNpYmxpbmcucmV0dXJuID0gcmV0dXJuRmliZXI7CiAgICAgICAgICAgICAgICBuZXh0RWZmZWN0ID0gc2libGluZzsKICAgICAgICAgICAgICAgIGJyZWFrIGE7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIG5leHRFZmZlY3QgPSByZXR1cm5GaWJlcjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBvbkNvbW1pdFJvb3QoKSB7CiAgICAgICAgY29tbWl0SG9va3MuZm9yRWFjaChmdW5jdGlvbihjb21taXRIb29rKSB7CiAgICAgICAgICByZXR1cm4gY29tbWl0SG9vaygpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGlzQ29uY3VycmVudEFjdEVudmlyb25tZW50KCkgewogICAgICAgIHZhciBpc1JlYWN0QWN0RW52aXJvbm1lbnRHbG9iYWwgPSAidW5kZWZpbmVkIiAhPT0gdHlwZW9mIElTX1JFQUNUX0FDVF9FTlZJUk9OTUVOVCA/IElTX1JFQUNUX0FDVF9FTlZJUk9OTUVOVCA6IHZvaWQgMDsKICAgICAgICBpc1JlYWN0QWN0RW52aXJvbm1lbnRHbG9iYWwgfHwgbnVsbCA9PT0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuYWN0UXVldWUgfHwgY29uc29sZS5lcnJvcigKICAgICAgICAgICJUaGUgY3VycmVudCB0ZXN0aW5nIGVudmlyb25tZW50IGlzIG5vdCBjb25maWd1cmVkIHRvIHN1cHBvcnQgYWN0KC4uLikiCiAgICAgICAgKTsKICAgICAgICByZXR1cm4gaXNSZWFjdEFjdEVudmlyb25tZW50R2xvYmFsOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlcXVlc3RVcGRhdGVMYW5lKGZpYmVyKSB7CiAgICAgICAgaWYgKChleGVjdXRpb25Db250ZXh0ICYgUmVuZGVyQ29udGV4dCkgIT09IE5vQ29udGV4dCAmJiAwICE9PSB3b3JrSW5Qcm9ncmVzc1Jvb3RSZW5kZXJMYW5lcykKICAgICAgICAgIHJldHVybiB3b3JrSW5Qcm9ncmVzc1Jvb3RSZW5kZXJMYW5lcyAmIC13b3JrSW5Qcm9ncmVzc1Jvb3RSZW5kZXJMYW5lczsKICAgICAgICB2YXIgdHJhbnNpdGlvbiA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLlQ7CiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRyYW5zaXRpb24gPyAodHJhbnNpdGlvbi5fdXBkYXRlZEZpYmVycyB8fCAodHJhbnNpdGlvbi5fdXBkYXRlZEZpYmVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCkpLCB0cmFuc2l0aW9uLl91cGRhdGVkRmliZXJzLmFkZChmaWJlciksIGZpYmVyID0gY3VycmVudEVudGFuZ2xlZExhbmUsIDAgIT09IGZpYmVyID8gZmliZXIgOiByZXF1ZXN0VHJhbnNpdGlvbkxhbmUoKSkgOiByZXNvbHZlVXBkYXRlUHJpb3JpdHkoKTsKICAgICAgfQogICAgICBmdW5jdGlvbiByZXF1ZXN0RGVmZXJyZWRMYW5lKCkgewogICAgICAgIDAgPT09IHdvcmtJblByb2dyZXNzRGVmZXJyZWRMYW5lICYmICh3b3JrSW5Qcm9ncmVzc0RlZmVycmVkTGFuZSA9IDAgPT09ICh3b3JrSW5Qcm9ncmVzc1Jvb3RSZW5kZXJMYW5lcyAmIDUzNjg3MDkxMikgfHwgaXNIeWRyYXRpbmcgPyBjbGFpbU5leHRUcmFuc2l0aW9uTGFuZSgpIDogNTM2ODcwOTEyKTsKICAgICAgICB2YXIgc3VzcGVuc2VIYW5kbGVyID0gc3VzcGVuc2VIYW5kbGVyU3RhY2tDdXJzb3IuY3VycmVudDsKICAgICAgICBudWxsICE9PSBzdXNwZW5zZUhhbmRsZXIgJiYgKHN1c3BlbnNlSGFuZGxlci5mbGFncyB8PSAzMik7CiAgICAgICAgcmV0dXJuIHdvcmtJblByb2dyZXNzRGVmZXJyZWRMYW5lOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHNjaGVkdWxlVXBkYXRlT25GaWJlcihyb290MiwgZmliZXIsIGxhbmUpIHsKICAgICAgICBpc1J1bm5pbmdJbnNlcnRpb25FZmZlY3QgJiYgY29uc29sZS5lcnJvcigidXNlSW5zZXJ0aW9uRWZmZWN0IG11c3Qgbm90IHNjaGVkdWxlIHVwZGF0ZXMuIik7CiAgICAgICAgaXNGbHVzaGluZ1Bhc3NpdmVFZmZlY3RzICYmIChkaWRTY2hlZHVsZVVwZGF0ZUR1cmluZ1Bhc3NpdmVFZmZlY3RzID0gdHJ1ZSk7CiAgICAgICAgaWYgKHJvb3QyID09PSB3b3JrSW5Qcm9ncmVzc1Jvb3QgJiYgKHdvcmtJblByb2dyZXNzU3VzcGVuZGVkUmVhc29uID09PSBTdXNwZW5kZWRPbkRhdGEgfHwgd29ya0luUHJvZ3Jlc3NTdXNwZW5kZWRSZWFzb24gPT09IFN1c3BlbmRlZE9uQWN0aW9uKSB8fCBudWxsICE9PSByb290Mi5jYW5jZWxQZW5kaW5nQ29tbWl0KQogICAgICAgICAgcHJlcGFyZUZyZXNoU3RhY2socm9vdDIsIDApLCBtYXJrUm9vdFN1c3BlbmRlZCgKICAgICAgICAgICAgcm9vdDIsCiAgICAgICAgICAgIHdvcmtJblByb2dyZXNzUm9vdFJlbmRlckxhbmVzLAogICAgICAgICAgICB3b3JrSW5Qcm9ncmVzc0RlZmVycmVkTGFuZSwKICAgICAgICAgICAgZmFsc2UKICAgICAgICAgICk7CiAgICAgICAgbWFya1Jvb3RVcGRhdGVkJDEocm9vdDIsIGxhbmUpOwogICAgICAgIGlmICgwICE9PSAoZXhlY3V0aW9uQ29udGV4dCAmIFJlbmRlckNvbnRleHQpICYmIHJvb3QyID09PSB3b3JrSW5Qcm9ncmVzc1Jvb3QpIHsKICAgICAgICAgIGlmIChpc1JlbmRlcmluZykKICAgICAgICAgICAgc3dpdGNoIChmaWJlci50YWcpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgcm9vdDIgPSB3b3JrSW5Qcm9ncmVzcyAmJiBnZXRDb21wb25lbnROYW1lRnJvbUZpYmVyKHdvcmtJblByb2dyZXNzKSB8fCAiVW5rbm93biI7CiAgICAgICAgICAgICAgICBkaWRXYXJuQWJvdXRVcGRhdGVJblJlbmRlckZvckFub3RoZXJDb21wb25lbnQuaGFzKHJvb3QyKSB8fCAoZGlkV2FybkFib3V0VXBkYXRlSW5SZW5kZXJGb3JBbm90aGVyQ29tcG9uZW50LmFkZChyb290MiksIGZpYmVyID0gZ2V0Q29tcG9uZW50TmFtZUZyb21GaWJlcihmaWJlcikgfHwgIlVua25vd24iLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICAgICAiQ2Fubm90IHVwZGF0ZSBhIGNvbXBvbmVudCAoYCVzYCkgd2hpbGUgcmVuZGVyaW5nIGEgZGlmZmVyZW50IGNvbXBvbmVudCAoYCVzYCkuIFRvIGxvY2F0ZSB0aGUgYmFkIHNldFN0YXRlKCkgY2FsbCBpbnNpZGUgYCVzYCwgZm9sbG93IHRoZSBzdGFjayB0cmFjZSBhcyBkZXNjcmliZWQgaW4gaHR0cHM6Ly9yZWFjdC5kZXYvbGluay9zZXRzdGF0ZS1pbi1yZW5kZXIiLAogICAgICAgICAgICAgICAgICBmaWJlciwKICAgICAgICAgICAgICAgICAgcm9vdDIsCiAgICAgICAgICAgICAgICAgIHJvb3QyCiAgICAgICAgICAgICAgICApKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgIGRpZFdhcm5BYm91dFVwZGF0ZUluUmVuZGVyIHx8IChjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICAgICAiQ2Fubm90IHVwZGF0ZSBkdXJpbmcgYW4gZXhpc3Rpbmcgc3RhdGUgdHJhbnNpdGlvbiAoc3VjaCBhcyB3aXRoaW4gYHJlbmRlcmApLiBSZW5kZXIgbWV0aG9kcyBzaG91bGQgYmUgYSBwdXJlIGZ1bmN0aW9uIG9mIHByb3BzIGFuZCBzdGF0ZS4iCiAgICAgICAgICAgICAgICApLCBkaWRXYXJuQWJvdXRVcGRhdGVJblJlbmRlciA9IHRydWUpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlCiAgICAgICAgICBpc0RldlRvb2xzUHJlc2VudCAmJiBhZGRGaWJlclRvTGFuZXNNYXAocm9vdDIsIGZpYmVyLCBsYW5lKSwgd2FybklmVXBkYXRlc05vdFdyYXBwZWRXaXRoQWN0REVWKGZpYmVyKSwgcm9vdDIgPT09IHdvcmtJblByb2dyZXNzUm9vdCAmJiAoKGV4ZWN1dGlvbkNvbnRleHQgJiBSZW5kZXJDb250ZXh0KSA9PT0gTm9Db250ZXh0ICYmICh3b3JrSW5Qcm9ncmVzc1Jvb3RJbnRlcmxlYXZlZFVwZGF0ZWRMYW5lcyB8PSBsYW5lKSwgd29ya0luUHJvZ3Jlc3NSb290RXhpdFN0YXR1cyA9PT0gUm9vdFN1c3BlbmRlZFdpdGhEZWxheSAmJiBtYXJrUm9vdFN1c3BlbmRlZCgKICAgICAgICAgICAgcm9vdDIsCiAgICAgICAgICAgIHdvcmtJblByb2dyZXNzUm9vdFJlbmRlckxhbmVzLAogICAgICAgICAgICB3b3JrSW5Qcm9ncmVzc0RlZmVycmVkTGFuZSwKICAgICAgICAgICAgZmFsc2UKICAgICAgICAgICkpLCBlbnN1cmVSb290SXNTY2hlZHVsZWQocm9vdDIpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHBlcmZvcm1Xb3JrT25Sb290KHJvb3QyLCBsYW5lcywgZm9yY2VTeW5jKSB7CiAgICAgICAgaWYgKChleGVjdXRpb25Db250ZXh0ICYgKFJlbmRlckNvbnRleHQgfCBDb21taXRDb250ZXh0KSkgIT09IE5vQ29udGV4dCkKICAgICAgICAgIHRocm93IEVycm9yKCJTaG91bGQgbm90IGFscmVhZHkgYmUgd29ya2luZy4iKTsKICAgICAgICB2YXIgc2hvdWxkVGltZVNsaWNlID0gIWZvcmNlU3luYyAmJiAwID09PSAobGFuZXMgJiAxMjQpICYmIDAgPT09IChsYW5lcyAmIHJvb3QyLmV4cGlyZWRMYW5lcykgfHwgY2hlY2tJZlJvb3RJc1ByZXJlbmRlcmluZyhyb290MiwgbGFuZXMpLCBleGl0U3RhdHVzID0gc2hvdWxkVGltZVNsaWNlID8gcmVuZGVyUm9vdENvbmN1cnJlbnQocm9vdDIsIGxhbmVzKSA6IHJlbmRlclJvb3RTeW5jKHJvb3QyLCBsYW5lcywgdHJ1ZSksIHJlbmRlcldhc0NvbmN1cnJlbnQgPSBzaG91bGRUaW1lU2xpY2U7CiAgICAgICAgZG8gewogICAgICAgICAgaWYgKGV4aXRTdGF0dXMgPT09IFJvb3RJblByb2dyZXNzKSB7CiAgICAgICAgICAgIHdvcmtJblByb2dyZXNzUm9vdElzUHJlcmVuZGVyaW5nICYmICFzaG91bGRUaW1lU2xpY2UgJiYgbWFya1Jvb3RTdXNwZW5kZWQocm9vdDIsIGxhbmVzLCAwLCBmYWxzZSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yY2VTeW5jID0gcm9vdDIuY3VycmVudC5hbHRlcm5hdGU7CiAgICAgICAgICAgIGlmIChyZW5kZXJXYXNDb25jdXJyZW50ICYmICFpc1JlbmRlckNvbnNpc3RlbnRXaXRoRXh0ZXJuYWxTdG9yZXMoZm9yY2VTeW5jKSkgewogICAgICAgICAgICAgIGV4aXRTdGF0dXMgPSByZW5kZXJSb290U3luYyhyb290MiwgbGFuZXMsIGZhbHNlKTsKICAgICAgICAgICAgICByZW5kZXJXYXNDb25jdXJyZW50ID0gZmFsc2U7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGV4aXRTdGF0dXMgPT09IFJvb3RFcnJvcmVkKSB7CiAgICAgICAgICAgICAgcmVuZGVyV2FzQ29uY3VycmVudCA9IGxhbmVzOwogICAgICAgICAgICAgIGlmIChyb290Mi5lcnJvclJlY292ZXJ5RGlzYWJsZWRMYW5lcyAmIHJlbmRlcldhc0NvbmN1cnJlbnQpCiAgICAgICAgICAgICAgICB2YXIgZXJyb3JSZXRyeUxhbmVzID0gMDsKICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBlcnJvclJldHJ5TGFuZXMgPSByb290Mi5wZW5kaW5nTGFuZXMgJiAtNTM2ODcwOTEzLCBlcnJvclJldHJ5TGFuZXMgPSAwICE9PSBlcnJvclJldHJ5TGFuZXMgPyBlcnJvclJldHJ5TGFuZXMgOiBlcnJvclJldHJ5TGFuZXMgJiA1MzY4NzA5MTIgPyA1MzY4NzA5MTIgOiAwOwogICAgICAgICAgICAgIGlmICgwICE9PSBlcnJvclJldHJ5TGFuZXMpIHsKICAgICAgICAgICAgICAgIGxhbmVzID0gZXJyb3JSZXRyeUxhbmVzOwogICAgICAgICAgICAgICAgYTogewogICAgICAgICAgICAgICAgICBleGl0U3RhdHVzID0gcm9vdDI7CiAgICAgICAgICAgICAgICAgIHZhciBlcnJvclJldHJ5TGFuZXMkanNjb21wJDAgPSBlcnJvclJldHJ5TGFuZXM7CiAgICAgICAgICAgICAgICAgIGVycm9yUmV0cnlMYW5lcyA9IHdvcmtJblByb2dyZXNzUm9vdENvbmN1cnJlbnRFcnJvcnM7CiAgICAgICAgICAgICAgICAgIHZhciB3YXNSb290RGVoeWRyYXRlZCA9IGV4aXRTdGF0dXMuY3VycmVudC5tZW1vaXplZFN0YXRlLmlzRGVoeWRyYXRlZDsKICAgICAgICAgICAgICAgICAgd2FzUm9vdERlaHlkcmF0ZWQgJiYgKHByZXBhcmVGcmVzaFN0YWNrKAogICAgICAgICAgICAgICAgICAgIGV4aXRTdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgZXJyb3JSZXRyeUxhbmVzJGpzY29tcCQwCiAgICAgICAgICAgICAgICAgICkuZmxhZ3MgfD0gMjU2KTsKICAgICAgICAgICAgICAgICAgZXJyb3JSZXRyeUxhbmVzJGpzY29tcCQwID0gcmVuZGVyUm9vdFN5bmMoCiAgICAgICAgICAgICAgICAgICAgZXhpdFN0YXR1cywKICAgICAgICAgICAgICAgICAgICBlcnJvclJldHJ5TGFuZXMkanNjb21wJDAsCiAgICAgICAgICAgICAgICAgICAgZmFsc2UKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgaWYgKGVycm9yUmV0cnlMYW5lcyRqc2NvbXAkMCAhPT0gUm9vdEVycm9yZWQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAod29ya0luUHJvZ3Jlc3NSb290RGlkQXR0YWNoUGluZ0xpc3RlbmVyICYmICF3YXNSb290RGVoeWRyYXRlZCkgewogICAgICAgICAgICAgICAgICAgICAgZXhpdFN0YXR1cy5lcnJvclJlY292ZXJ5RGlzYWJsZWRMYW5lcyB8PSByZW5kZXJXYXNDb25jdXJyZW50OwogICAgICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3NSb290SW50ZXJsZWF2ZWRVcGRhdGVkTGFuZXMgfD0gcmVuZGVyV2FzQ29uY3VycmVudDsKICAgICAgICAgICAgICAgICAgICAgIGV4aXRTdGF0dXMgPSBSb290U3VzcGVuZGVkV2l0aERlbGF5OwogICAgICAgICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZXhpdFN0YXR1cyA9IHdvcmtJblByb2dyZXNzUm9vdFJlY292ZXJhYmxlRXJyb3JzOwogICAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzUm9vdFJlY292ZXJhYmxlRXJyb3JzID0gZXJyb3JSZXRyeUxhbmVzOwogICAgICAgICAgICAgICAgICAgIG51bGwgIT09IGV4aXRTdGF0dXMgJiYgKG51bGwgPT09IHdvcmtJblByb2dyZXNzUm9vdFJlY292ZXJhYmxlRXJyb3JzID8gd29ya0luUHJvZ3Jlc3NSb290UmVjb3ZlcmFibGVFcnJvcnMgPSBleGl0U3RhdHVzIDogd29ya0luUHJvZ3Jlc3NSb290UmVjb3ZlcmFibGVFcnJvcnMucHVzaC5hcHBseSgKICAgICAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzUm9vdFJlY292ZXJhYmxlRXJyb3JzLAogICAgICAgICAgICAgICAgICAgICAgZXhpdFN0YXR1cwogICAgICAgICAgICAgICAgICAgICkpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGV4aXRTdGF0dXMgPSBlcnJvclJldHJ5TGFuZXMkanNjb21wJDA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZW5kZXJXYXNDb25jdXJyZW50ID0gZmFsc2U7CiAgICAgICAgICAgICAgICBpZiAoZXhpdFN0YXR1cyAhPT0gUm9vdEVycm9yZWQpIGNvbnRpbnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoZXhpdFN0YXR1cyA9PT0gUm9vdEZhdGFsRXJyb3JlZCkgewogICAgICAgICAgICAgIHByZXBhcmVGcmVzaFN0YWNrKHJvb3QyLCAwKTsKICAgICAgICAgICAgICBtYXJrUm9vdFN1c3BlbmRlZChyb290MiwgbGFuZXMsIDAsIHRydWUpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGE6IHsKICAgICAgICAgICAgICBzaG91bGRUaW1lU2xpY2UgPSByb290MjsKICAgICAgICAgICAgICBzd2l0Y2ggKGV4aXRTdGF0dXMpIHsKICAgICAgICAgICAgICAgIGNhc2UgUm9vdEluUHJvZ3Jlc3M6CiAgICAgICAgICAgICAgICBjYXNlIFJvb3RGYXRhbEVycm9yZWQ6CiAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCJSb290IGRpZCBub3QgY29tcGxldGUuIFRoaXMgaXMgYSBidWcgaW4gUmVhY3QuIik7CiAgICAgICAgICAgICAgICBjYXNlIFJvb3RTdXNwZW5kZWRXaXRoRGVsYXk6CiAgICAgICAgICAgICAgICAgIGlmICgobGFuZXMgJiA0MTk0MDQ4KSAhPT0gbGFuZXMpIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBSb290U3VzcGVuZGVkQXRUaGVTaGVsbDoKICAgICAgICAgICAgICAgICAgbWFya1Jvb3RTdXNwZW5kZWQoCiAgICAgICAgICAgICAgICAgICAgc2hvdWxkVGltZVNsaWNlLAogICAgICAgICAgICAgICAgICAgIGxhbmVzLAogICAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzRGVmZXJyZWRMYW5lLAogICAgICAgICAgICAgICAgICAgICF3b3JrSW5Qcm9ncmVzc1Jvb3REaWRTa2lwU3VzcGVuZGVkU2libGluZ3MKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICAgIGNhc2UgUm9vdEVycm9yZWQ6CiAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzUm9vdFJlY292ZXJhYmxlRXJyb3JzID0gbnVsbDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIFJvb3RTdXNwZW5kZWQ6CiAgICAgICAgICAgICAgICBjYXNlIFJvb3RDb21wbGV0ZWQ6CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoIlVua25vd24gcm9vdCBleGl0IHN0YXR1cy4iKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKG51bGwgIT09IFJlYWN0U2hhcmVkSW50ZXJuYWxzLmFjdFF1ZXVlKQogICAgICAgICAgICAgICAgY29tbWl0Um9vdCgKICAgICAgICAgICAgICAgICAgc2hvdWxkVGltZVNsaWNlLAogICAgICAgICAgICAgICAgICBmb3JjZVN5bmMsCiAgICAgICAgICAgICAgICAgIGxhbmVzLAogICAgICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzc1Jvb3RSZWNvdmVyYWJsZUVycm9ycywKICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3NUcmFuc2l0aW9ucywKICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3NSb290RGlkSW5jbHVkZVJlY3Vyc2l2ZVJlbmRlclVwZGF0ZSwKICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3NEZWZlcnJlZExhbmUsCiAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzUm9vdEludGVybGVhdmVkVXBkYXRlZExhbmVzLAogICAgICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzc1N1c3BlbmRlZFJldHJ5TGFuZXMKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAoKGxhbmVzICYgNjI5MTQ1NjApID09PSBsYW5lcyAmJiAocmVuZGVyV2FzQ29uY3VycmVudCA9IGdsb2JhbE1vc3RSZWNlbnRGYWxsYmFja1RpbWUgKyBGQUxMQkFDS19USFJPVFRMRV9NUyAtIG5vdyQxKCksIDEwIDwgcmVuZGVyV2FzQ29uY3VycmVudCkpIHsKICAgICAgICAgICAgICAgICAgbWFya1Jvb3RTdXNwZW5kZWQoCiAgICAgICAgICAgICAgICAgICAgc2hvdWxkVGltZVNsaWNlLAogICAgICAgICAgICAgICAgICAgIGxhbmVzLAogICAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzRGVmZXJyZWRMYW5lLAogICAgICAgICAgICAgICAgICAgICF3b3JrSW5Qcm9ncmVzc1Jvb3REaWRTa2lwU3VzcGVuZGVkU2libGluZ3MKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgaWYgKDAgIT09IGdldE5leHRMYW5lcyhzaG91bGRUaW1lU2xpY2UsIDAsIHRydWUpKSBicmVhayBhOwogICAgICAgICAgICAgICAgICBzaG91bGRUaW1lU2xpY2UudGltZW91dEhhbmRsZSA9IHNjaGVkdWxlVGltZW91dCgKICAgICAgICAgICAgICAgICAgICBjb21taXRSb290V2hlblJlYWR5LmJpbmQoCiAgICAgICAgICAgICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgICAgICAgICAgc2hvdWxkVGltZVNsaWNlLAogICAgICAgICAgICAgICAgICAgICAgZm9yY2VTeW5jLAogICAgICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3NSb290UmVjb3ZlcmFibGVFcnJvcnMsCiAgICAgICAgICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzc1RyYW5zaXRpb25zLAogICAgICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3NSb290RGlkSW5jbHVkZVJlY3Vyc2l2ZVJlbmRlclVwZGF0ZSwKICAgICAgICAgICAgICAgICAgICAgIGxhbmVzLAogICAgICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3NEZWZlcnJlZExhbmUsCiAgICAgICAgICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzc1Jvb3RJbnRlcmxlYXZlZFVwZGF0ZWRMYW5lcywKICAgICAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzU3VzcGVuZGVkUmV0cnlMYW5lcywKICAgICAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzUm9vdERpZFNraXBTdXNwZW5kZWRTaWJsaW5ncywKICAgICAgICAgICAgICAgICAgICAgIGV4aXRTdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICBUSFJPVFRMRURfQ09NTUlULAogICAgICAgICAgICAgICAgICAgICAgcmVuZGVyU3RhcnRUaW1lLAogICAgICAgICAgICAgICAgICAgICAgMAogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyV2FzQ29uY3VycmVudAogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29tbWl0Um9vdFdoZW5SZWFkeSgKICAgICAgICAgICAgICAgICAgc2hvdWxkVGltZVNsaWNlLAogICAgICAgICAgICAgICAgICBmb3JjZVN5bmMsCiAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzUm9vdFJlY292ZXJhYmxlRXJyb3JzLAogICAgICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzc1RyYW5zaXRpb25zLAogICAgICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzc1Jvb3REaWRJbmNsdWRlUmVjdXJzaXZlUmVuZGVyVXBkYXRlLAogICAgICAgICAgICAgICAgICBsYW5lcywKICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3NEZWZlcnJlZExhbmUsCiAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzUm9vdEludGVybGVhdmVkVXBkYXRlZExhbmVzLAogICAgICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzc1N1c3BlbmRlZFJldHJ5TGFuZXMsCiAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzUm9vdERpZFNraXBTdXNwZW5kZWRTaWJsaW5ncywKICAgICAgICAgICAgICAgICAgZXhpdFN0YXR1cywKICAgICAgICAgICAgICAgICAgSU1NRURJQVRFX0NPTU1JVCwKICAgICAgICAgICAgICAgICAgcmVuZGVyU3RhcnRUaW1lLAogICAgICAgICAgICAgICAgICAwCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgICAgfSB3aGlsZSAoMSk7CiAgICAgICAgZW5zdXJlUm9vdElzU2NoZWR1bGVkKHJvb3QyKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjb21taXRSb290V2hlblJlYWR5KHJvb3QyLCBmaW5pc2hlZFdvcmssIHJlY292ZXJhYmxlRXJyb3JzLCB0cmFuc2l0aW9ucywgZGlkSW5jbHVkZVJlbmRlclBoYXNlVXBkYXRlLCBsYW5lcywgc3Bhd25lZExhbmUsIHVwZGF0ZWRMYW5lcywgc3VzcGVuZGVkUmV0cnlMYW5lcywgZGlkU2tpcFN1c3BlbmRlZFNpYmxpbmdzLCBleGl0U3RhdHVzLCBzdXNwZW5kZWRDb21taXRSZWFzb24sIGNvbXBsZXRlZFJlbmRlclN0YXJ0VGltZSwgY29tcGxldGVkUmVuZGVyRW5kVGltZSkgewogICAgICAgIHJvb3QyLnRpbWVvdXRIYW5kbGUgPSBub1RpbWVvdXQ7CiAgICAgICAgc3VzcGVuZGVkQ29tbWl0UmVhc29uID0gZmluaXNoZWRXb3JrLnN1YnRyZWVGbGFnczsKICAgICAgICBpZiAoc3VzcGVuZGVkQ29tbWl0UmVhc29uICYgODE5MiB8fCAxNjc4NTQwOCA9PT0gKHN1c3BlbmRlZENvbW1pdFJlYXNvbiAmIDE2Nzg1NDA4KSkgewogICAgICAgICAgaWYgKHN1c3BlbmRlZFN0YXRlID0geyBzdHlsZXNoZWV0czogbnVsbCwgY291bnQ6IDAsIHVuc3VzcGVuZDogbm9vcCB9LCBhY2N1bXVsYXRlU3VzcGVuc2V5Q29tbWl0T25GaWJlcihmaW5pc2hlZFdvcmspLCBzdXNwZW5kZWRDb21taXRSZWFzb24gPSB3YWl0Rm9yQ29tbWl0VG9CZVJlYWR5KCksIG51bGwgIT09IHN1c3BlbmRlZENvbW1pdFJlYXNvbikgewogICAgICAgICAgICByb290Mi5jYW5jZWxQZW5kaW5nQ29tbWl0ID0gc3VzcGVuZGVkQ29tbWl0UmVhc29uKAogICAgICAgICAgICAgIGNvbW1pdFJvb3QuYmluZCgKICAgICAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgICAgICByb290MiwKICAgICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICAgIGxhbmVzLAogICAgICAgICAgICAgICAgcmVjb3ZlcmFibGVFcnJvcnMsCiAgICAgICAgICAgICAgICB0cmFuc2l0aW9ucywKICAgICAgICAgICAgICAgIGRpZEluY2x1ZGVSZW5kZXJQaGFzZVVwZGF0ZSwKICAgICAgICAgICAgICAgIHNwYXduZWRMYW5lLAogICAgICAgICAgICAgICAgdXBkYXRlZExhbmVzLAogICAgICAgICAgICAgICAgc3VzcGVuZGVkUmV0cnlMYW5lcywKICAgICAgICAgICAgICAgIGV4aXRTdGF0dXMsCiAgICAgICAgICAgICAgICBTVVNQRU5ERURfQ09NTUlULAogICAgICAgICAgICAgICAgY29tcGxldGVkUmVuZGVyU3RhcnRUaW1lLAogICAgICAgICAgICAgICAgY29tcGxldGVkUmVuZGVyRW5kVGltZQogICAgICAgICAgICAgICkKICAgICAgICAgICAgKTsKICAgICAgICAgICAgbWFya1Jvb3RTdXNwZW5kZWQoCiAgICAgICAgICAgICAgcm9vdDIsCiAgICAgICAgICAgICAgbGFuZXMsCiAgICAgICAgICAgICAgc3Bhd25lZExhbmUsCiAgICAgICAgICAgICAgIWRpZFNraXBTdXNwZW5kZWRTaWJsaW5ncwogICAgICAgICAgICApOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNvbW1pdFJvb3QoCiAgICAgICAgICByb290MiwKICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgIGxhbmVzLAogICAgICAgICAgcmVjb3ZlcmFibGVFcnJvcnMsCiAgICAgICAgICB0cmFuc2l0aW9ucywKICAgICAgICAgIGRpZEluY2x1ZGVSZW5kZXJQaGFzZVVwZGF0ZSwKICAgICAgICAgIHNwYXduZWRMYW5lLAogICAgICAgICAgdXBkYXRlZExhbmVzLAogICAgICAgICAgc3VzcGVuZGVkUmV0cnlMYW5lcwogICAgICAgICk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gaXNSZW5kZXJDb25zaXN0ZW50V2l0aEV4dGVybmFsU3RvcmVzKGZpbmlzaGVkV29yaykgewogICAgICAgIGZvciAodmFyIG5vZGUgPSBmaW5pc2hlZFdvcms7IDsgKSB7CiAgICAgICAgICB2YXIgdGFnID0gbm9kZS50YWc7CiAgICAgICAgICBpZiAoKDAgPT09IHRhZyB8fCAxMSA9PT0gdGFnIHx8IDE1ID09PSB0YWcpICYmIG5vZGUuZmxhZ3MgJiAxNjM4NCAmJiAodGFnID0gbm9kZS51cGRhdGVRdWV1ZSwgbnVsbCAhPT0gdGFnICYmICh0YWcgPSB0YWcuc3RvcmVzLCBudWxsICE9PSB0YWcpKSkKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YWcubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB2YXIgY2hlY2sgPSB0YWdbaV0sIGdldFNuYXBzaG90ID0gY2hlY2suZ2V0U25hcHNob3Q7CiAgICAgICAgICAgICAgY2hlY2sgPSBjaGVjay52YWx1ZTsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYgKCFvYmplY3RJcyhnZXRTbmFwc2hvdCgpLCBjaGVjaykpIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgdGFnID0gbm9kZS5jaGlsZDsKICAgICAgICAgIGlmIChub2RlLnN1YnRyZWVGbGFncyAmIDE2Mzg0ICYmIG51bGwgIT09IHRhZykKICAgICAgICAgICAgdGFnLnJldHVybiA9IG5vZGUsIG5vZGUgPSB0YWc7CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgaWYgKG5vZGUgPT09IGZpbmlzaGVkV29yaykgYnJlYWs7CiAgICAgICAgICAgIGZvciAoOyBudWxsID09PSBub2RlLnNpYmxpbmc7ICkgewogICAgICAgICAgICAgIGlmIChudWxsID09PSBub2RlLnJldHVybiB8fCBub2RlLnJldHVybiA9PT0gZmluaXNoZWRXb3JrKSByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICBub2RlID0gbm9kZS5yZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbm9kZS5zaWJsaW5nLnJldHVybiA9IG5vZGUucmV0dXJuOwogICAgICAgICAgICBub2RlID0gbm9kZS5zaWJsaW5nOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBtYXJrUm9vdFN1c3BlbmRlZChyb290Miwgc3VzcGVuZGVkTGFuZXMsIHNwYXduZWRMYW5lLCBkaWRBdHRlbXB0RW50aXJlVHJlZSkgewogICAgICAgIHN1c3BlbmRlZExhbmVzICY9IH53b3JrSW5Qcm9ncmVzc1Jvb3RQaW5nZWRMYW5lczsKICAgICAgICBzdXNwZW5kZWRMYW5lcyAmPSB+d29ya0luUHJvZ3Jlc3NSb290SW50ZXJsZWF2ZWRVcGRhdGVkTGFuZXM7CiAgICAgICAgcm9vdDIuc3VzcGVuZGVkTGFuZXMgfD0gc3VzcGVuZGVkTGFuZXM7CiAgICAgICAgcm9vdDIucGluZ2VkTGFuZXMgJj0gfnN1c3BlbmRlZExhbmVzOwogICAgICAgIGRpZEF0dGVtcHRFbnRpcmVUcmVlICYmIChyb290Mi53YXJtTGFuZXMgfD0gc3VzcGVuZGVkTGFuZXMpOwogICAgICAgIGRpZEF0dGVtcHRFbnRpcmVUcmVlID0gcm9vdDIuZXhwaXJhdGlvblRpbWVzOwogICAgICAgIGZvciAodmFyIGxhbmVzID0gc3VzcGVuZGVkTGFuZXM7IDAgPCBsYW5lczsgKSB7CiAgICAgICAgICB2YXIgaW5kZXggPSAzMSAtIGNsejMyKGxhbmVzKSwgbGFuZSA9IDEgPDwgaW5kZXg7CiAgICAgICAgICBkaWRBdHRlbXB0RW50aXJlVHJlZVtpbmRleF0gPSAtMTsKICAgICAgICAgIGxhbmVzICY9IH5sYW5lOwogICAgICAgIH0KICAgICAgICAwICE9PSBzcGF3bmVkTGFuZSAmJiBtYXJrU3Bhd25lZERlZmVycmVkTGFuZShyb290Miwgc3Bhd25lZExhbmUsIHN1c3BlbmRlZExhbmVzKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBmbHVzaFN5bmNXb3JrJDEoKSB7CiAgICAgICAgcmV0dXJuIChleGVjdXRpb25Db250ZXh0ICYgKFJlbmRlckNvbnRleHQgfCBDb21taXRDb250ZXh0KSkgPT09IE5vQ29udGV4dCA/IChmbHVzaFN5bmNXb3JrQWNyb3NzUm9vdHNfaW1wbCgwLCBmYWxzZSksIGZhbHNlKSA6IHRydWU7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmVzZXRXb3JrSW5Qcm9ncmVzc1N0YWNrKCkgewogICAgICAgIGlmIChudWxsICE9PSB3b3JrSW5Qcm9ncmVzcykgewogICAgICAgICAgaWYgKHdvcmtJblByb2dyZXNzU3VzcGVuZGVkUmVhc29uID09PSBOb3RTdXNwZW5kZWQpCiAgICAgICAgICAgIHZhciBpbnRlcnJ1cHRlZFdvcmsgPSB3b3JrSW5Qcm9ncmVzcy5yZXR1cm47CiAgICAgICAgICBlbHNlCiAgICAgICAgICAgIGludGVycnVwdGVkV29yayA9IHdvcmtJblByb2dyZXNzLCByZXNldENvbnRleHREZXBlbmRlbmNpZXMoKSwgcmVzZXRIb29rc09uVW53aW5kKGludGVycnVwdGVkV29yayksIHRoZW5hYmxlU3RhdGUgPSBudWxsLCB0aGVuYWJsZUluZGV4Q291bnRlciA9IDAsIGludGVycnVwdGVkV29yayA9IHdvcmtJblByb2dyZXNzOwogICAgICAgICAgZm9yICg7IG51bGwgIT09IGludGVycnVwdGVkV29yazsgKQogICAgICAgICAgICB1bndpbmRJbnRlcnJ1cHRlZFdvcmsoaW50ZXJydXB0ZWRXb3JrLmFsdGVybmF0ZSwgaW50ZXJydXB0ZWRXb3JrKSwgaW50ZXJydXB0ZWRXb3JrID0gaW50ZXJydXB0ZWRXb3JrLnJldHVybjsKICAgICAgICAgIHdvcmtJblByb2dyZXNzID0gbnVsbDsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcHJlcGFyZUZyZXNoU3RhY2socm9vdDIsIGxhbmVzKSB7CiAgICAgICAgdmFyIHRpbWVvdXRIYW5kbGUgPSByb290Mi50aW1lb3V0SGFuZGxlOwogICAgICAgIHRpbWVvdXRIYW5kbGUgIT09IG5vVGltZW91dCAmJiAocm9vdDIudGltZW91dEhhbmRsZSA9IG5vVGltZW91dCwgY2FuY2VsVGltZW91dCh0aW1lb3V0SGFuZGxlKSk7CiAgICAgICAgdGltZW91dEhhbmRsZSA9IHJvb3QyLmNhbmNlbFBlbmRpbmdDb21taXQ7CiAgICAgICAgbnVsbCAhPT0gdGltZW91dEhhbmRsZSAmJiAocm9vdDIuY2FuY2VsUGVuZGluZ0NvbW1pdCA9IG51bGwsIHRpbWVvdXRIYW5kbGUoKSk7CiAgICAgICAgcmVzZXRXb3JrSW5Qcm9ncmVzc1N0YWNrKCk7CiAgICAgICAgd29ya0luUHJvZ3Jlc3NSb290ID0gcm9vdDI7CiAgICAgICAgd29ya0luUHJvZ3Jlc3MgPSB0aW1lb3V0SGFuZGxlID0gY3JlYXRlV29ya0luUHJvZ3Jlc3Mocm9vdDIuY3VycmVudCwgbnVsbCk7CiAgICAgICAgd29ya0luUHJvZ3Jlc3NSb290UmVuZGVyTGFuZXMgPSBsYW5lczsKICAgICAgICB3b3JrSW5Qcm9ncmVzc1N1c3BlbmRlZFJlYXNvbiA9IE5vdFN1c3BlbmRlZDsKICAgICAgICB3b3JrSW5Qcm9ncmVzc1Rocm93blZhbHVlID0gbnVsbDsKICAgICAgICB3b3JrSW5Qcm9ncmVzc1Jvb3REaWRTa2lwU3VzcGVuZGVkU2libGluZ3MgPSBmYWxzZTsKICAgICAgICB3b3JrSW5Qcm9ncmVzc1Jvb3RJc1ByZXJlbmRlcmluZyA9IGNoZWNrSWZSb290SXNQcmVyZW5kZXJpbmcocm9vdDIsIGxhbmVzKTsKICAgICAgICB3b3JrSW5Qcm9ncmVzc1Jvb3REaWRBdHRhY2hQaW5nTGlzdGVuZXIgPSBmYWxzZTsKICAgICAgICB3b3JrSW5Qcm9ncmVzc1Jvb3RFeGl0U3RhdHVzID0gUm9vdEluUHJvZ3Jlc3M7CiAgICAgICAgd29ya0luUHJvZ3Jlc3NTdXNwZW5kZWRSZXRyeUxhbmVzID0gd29ya0luUHJvZ3Jlc3NEZWZlcnJlZExhbmUgPSB3b3JrSW5Qcm9ncmVzc1Jvb3RQaW5nZWRMYW5lcyA9IHdvcmtJblByb2dyZXNzUm9vdEludGVybGVhdmVkVXBkYXRlZExhbmVzID0gd29ya0luUHJvZ3Jlc3NSb290U2tpcHBlZExhbmVzID0gMDsKICAgICAgICB3b3JrSW5Qcm9ncmVzc1Jvb3RSZWNvdmVyYWJsZUVycm9ycyA9IHdvcmtJblByb2dyZXNzUm9vdENvbmN1cnJlbnRFcnJvcnMgPSBudWxsOwogICAgICAgIHdvcmtJblByb2dyZXNzUm9vdERpZEluY2x1ZGVSZWN1cnNpdmVSZW5kZXJVcGRhdGUgPSBmYWxzZTsKICAgICAgICAwICE9PSAobGFuZXMgJiA4KSAmJiAobGFuZXMgfD0gbGFuZXMgJiAzMik7CiAgICAgICAgdmFyIGFsbEVudGFuZ2xlZExhbmVzID0gcm9vdDIuZW50YW5nbGVkTGFuZXM7CiAgICAgICAgaWYgKDAgIT09IGFsbEVudGFuZ2xlZExhbmVzKQogICAgICAgICAgZm9yIChyb290MiA9IHJvb3QyLmVudGFuZ2xlbWVudHMsIGFsbEVudGFuZ2xlZExhbmVzICY9IGxhbmVzOyAwIDwgYWxsRW50YW5nbGVkTGFuZXM7ICkgewogICAgICAgICAgICB2YXIgaW5kZXggPSAzMSAtIGNsejMyKGFsbEVudGFuZ2xlZExhbmVzKSwgbGFuZSA9IDEgPDwgaW5kZXg7CiAgICAgICAgICAgIGxhbmVzIHw9IHJvb3QyW2luZGV4XTsKICAgICAgICAgICAgYWxsRW50YW5nbGVkTGFuZXMgJj0gfmxhbmU7CiAgICAgICAgICB9CiAgICAgICAgZW50YW5nbGVkUmVuZGVyTGFuZXMgPSBsYW5lczsKICAgICAgICBmaW5pc2hRdWV1ZWluZ0NvbmN1cnJlbnRVcGRhdGVzKCk7CiAgICAgICAgbGFuZXMgPSBnZXRDdXJyZW50VGltZSgpOwogICAgICAgIDFlMyA8IGxhbmVzIC0gbGFzdFJlc2V0VGltZSAmJiAoUmVhY3RTaGFyZWRJbnRlcm5hbHMucmVjZW50bHlDcmVhdGVkT3duZXJTdGFja3MgPSAwLCBsYXN0UmVzZXRUaW1lID0gbGFuZXMpOwogICAgICAgIFJlYWN0U3RyaWN0TW9kZVdhcm5pbmdzLmRpc2NhcmRQZW5kaW5nV2FybmluZ3MoKTsKICAgICAgICByZXR1cm4gdGltZW91dEhhbmRsZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBoYW5kbGVUaHJvdyhyb290MiwgdGhyb3duVmFsdWUpIHsKICAgICAgICBjdXJyZW50bHlSZW5kZXJpbmdGaWJlciA9IG51bGw7CiAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuSCA9IENvbnRleHRPbmx5RGlzcGF0Y2hlcjsKICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5nZXRDdXJyZW50U3RhY2sgPSBudWxsOwogICAgICAgIGlzUmVuZGVyaW5nID0gZmFsc2U7CiAgICAgICAgY3VycmVudCA9IG51bGw7CiAgICAgICAgdGhyb3duVmFsdWUgPT09IFN1c3BlbnNlRXhjZXB0aW9uIHx8IHRocm93blZhbHVlID09PSBTdXNwZW5zZUFjdGlvbkV4Y2VwdGlvbiA/ICh0aHJvd25WYWx1ZSA9IGdldFN1c3BlbmRlZFRoZW5hYmxlKCksIHdvcmtJblByb2dyZXNzU3VzcGVuZGVkUmVhc29uID0gU3VzcGVuZGVkT25JbW1lZGlhdGUpIDogdGhyb3duVmFsdWUgPT09IFN1c3BlbnNleUNvbW1pdEV4Y2VwdGlvbiA/ICh0aHJvd25WYWx1ZSA9IGdldFN1c3BlbmRlZFRoZW5hYmxlKCksIHdvcmtJblByb2dyZXNzU3VzcGVuZGVkUmVhc29uID0gU3VzcGVuZGVkT25JbnN0YW5jZSkgOiB3b3JrSW5Qcm9ncmVzc1N1c3BlbmRlZFJlYXNvbiA9IHRocm93blZhbHVlID09PSBTZWxlY3RpdmVIeWRyYXRpb25FeGNlcHRpb24gPyBTdXNwZW5kZWRPbkh5ZHJhdGlvbiA6IG51bGwgIT09IHRocm93blZhbHVlICYmICJvYmplY3QiID09PSB0eXBlb2YgdGhyb3duVmFsdWUgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHRocm93blZhbHVlLnRoZW4gPyBTdXNwZW5kZWRPbkRlcHJlY2F0ZWRUaHJvd1Byb21pc2UgOiBTdXNwZW5kZWRPbkVycm9yOwogICAgICAgIHdvcmtJblByb2dyZXNzVGhyb3duVmFsdWUgPSB0aHJvd25WYWx1ZTsKICAgICAgICB2YXIgZXJyb3JlZFdvcmsgPSB3b3JrSW5Qcm9ncmVzczsKICAgICAgICBpZiAobnVsbCA9PT0gZXJyb3JlZFdvcmspCiAgICAgICAgICB3b3JrSW5Qcm9ncmVzc1Jvb3RFeGl0U3RhdHVzID0gUm9vdEZhdGFsRXJyb3JlZCwgbG9nVW5jYXVnaHRFcnJvcigKICAgICAgICAgICAgcm9vdDIsCiAgICAgICAgICAgIGNyZWF0ZUNhcHR1cmVkVmFsdWVBdEZpYmVyKHRocm93blZhbHVlLCByb290Mi5jdXJyZW50KQogICAgICAgICAgKTsKICAgICAgICBlbHNlCiAgICAgICAgICBzd2l0Y2ggKGVycm9yZWRXb3JrLm1vZGUgJiBQcm9maWxlTW9kZSAmJiBzdG9wUHJvZmlsZXJUaW1lcklmUnVubmluZ0FuZFJlY29yZER1cmF0aW9uKGVycm9yZWRXb3JrKSwgbWFya0NvbXBvbmVudFJlbmRlclN0b3BwZWQoKSwgd29ya0luUHJvZ3Jlc3NTdXNwZW5kZWRSZWFzb24pIHsKICAgICAgICAgICAgY2FzZSBTdXNwZW5kZWRPbkVycm9yOgogICAgICAgICAgICAgIG51bGwgIT09IGluamVjdGVkUHJvZmlsaW5nSG9va3MgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGluamVjdGVkUHJvZmlsaW5nSG9va3MubWFya0NvbXBvbmVudEVycm9yZWQgJiYgaW5qZWN0ZWRQcm9maWxpbmdIb29rcy5tYXJrQ29tcG9uZW50RXJyb3JlZCgKICAgICAgICAgICAgICAgIGVycm9yZWRXb3JrLAogICAgICAgICAgICAgICAgdGhyb3duVmFsdWUsCiAgICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzc1Jvb3RSZW5kZXJMYW5lcwogICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgU3VzcGVuZGVkT25EYXRhOgogICAgICAgICAgICBjYXNlIFN1c3BlbmRlZE9uQWN0aW9uOgogICAgICAgICAgICBjYXNlIFN1c3BlbmRlZE9uSW1tZWRpYXRlOgogICAgICAgICAgICBjYXNlIFN1c3BlbmRlZE9uRGVwcmVjYXRlZFRocm93UHJvbWlzZToKICAgICAgICAgICAgY2FzZSBTdXNwZW5kZWRBbmRSZWFkeVRvQ29udGludWU6CiAgICAgICAgICAgICAgbnVsbCAhPT0gaW5qZWN0ZWRQcm9maWxpbmdIb29rcyAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgaW5qZWN0ZWRQcm9maWxpbmdIb29rcy5tYXJrQ29tcG9uZW50U3VzcGVuZGVkICYmIGluamVjdGVkUHJvZmlsaW5nSG9va3MubWFya0NvbXBvbmVudFN1c3BlbmRlZCgKICAgICAgICAgICAgICAgIGVycm9yZWRXb3JrLAogICAgICAgICAgICAgICAgdGhyb3duVmFsdWUsCiAgICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzc1Jvb3RSZW5kZXJMYW5lcwogICAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcHVzaERpc3BhdGNoZXIoKSB7CiAgICAgICAgdmFyIHByZXZEaXNwYXRjaGVyID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuSDsKICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gQ29udGV4dE9ubHlEaXNwYXRjaGVyOwogICAgICAgIHJldHVybiBudWxsID09PSBwcmV2RGlzcGF0Y2hlciA/IENvbnRleHRPbmx5RGlzcGF0Y2hlciA6IHByZXZEaXNwYXRjaGVyOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHB1c2hBc3luY0Rpc3BhdGNoZXIoKSB7CiAgICAgICAgdmFyIHByZXZBc3luY0Rpc3BhdGNoZXIgPSBSZWFjdFNoYXJlZEludGVybmFscy5BOwogICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLkEgPSBEZWZhdWx0QXN5bmNEaXNwYXRjaGVyOwogICAgICAgIHJldHVybiBwcmV2QXN5bmNEaXNwYXRjaGVyOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlbmRlckRpZFN1c3BlbmREZWxheUlmUG9zc2libGUoKSB7CiAgICAgICAgd29ya0luUHJvZ3Jlc3NSb290RXhpdFN0YXR1cyA9IFJvb3RTdXNwZW5kZWRXaXRoRGVsYXk7CiAgICAgICAgd29ya0luUHJvZ3Jlc3NSb290RGlkU2tpcFN1c3BlbmRlZFNpYmxpbmdzIHx8ICh3b3JrSW5Qcm9ncmVzc1Jvb3RSZW5kZXJMYW5lcyAmIDQxOTQwNDgpICE9PSB3b3JrSW5Qcm9ncmVzc1Jvb3RSZW5kZXJMYW5lcyAmJiBudWxsICE9PSBzdXNwZW5zZUhhbmRsZXJTdGFja0N1cnNvci5jdXJyZW50IHx8ICh3b3JrSW5Qcm9ncmVzc1Jvb3RJc1ByZXJlbmRlcmluZyA9IHRydWUpOwogICAgICAgIDAgPT09ICh3b3JrSW5Qcm9ncmVzc1Jvb3RTa2lwcGVkTGFuZXMgJiAxMzQyMTc3MjcpICYmIDAgPT09ICh3b3JrSW5Qcm9ncmVzc1Jvb3RJbnRlcmxlYXZlZFVwZGF0ZWRMYW5lcyAmIDEzNDIxNzcyNykgfHwgbnVsbCA9PT0gd29ya0luUHJvZ3Jlc3NSb290IHx8IG1hcmtSb290U3VzcGVuZGVkKAogICAgICAgICAgd29ya0luUHJvZ3Jlc3NSb290LAogICAgICAgICAgd29ya0luUHJvZ3Jlc3NSb290UmVuZGVyTGFuZXMsCiAgICAgICAgICB3b3JrSW5Qcm9ncmVzc0RlZmVycmVkTGFuZSwKICAgICAgICAgIGZhbHNlCiAgICAgICAgKTsKICAgICAgfQogICAgICBmdW5jdGlvbiByZW5kZXJSb290U3luYyhyb290MiwgbGFuZXMsIHNob3VsZFlpZWxkRm9yUHJlcmVuZGVyaW5nKSB7CiAgICAgICAgdmFyIHByZXZFeGVjdXRpb25Db250ZXh0ID0gZXhlY3V0aW9uQ29udGV4dDsKICAgICAgICBleGVjdXRpb25Db250ZXh0IHw9IFJlbmRlckNvbnRleHQ7CiAgICAgICAgdmFyIHByZXZEaXNwYXRjaGVyID0gcHVzaERpc3BhdGNoZXIoKSwgcHJldkFzeW5jRGlzcGF0Y2hlciA9IHB1c2hBc3luY0Rpc3BhdGNoZXIoKTsKICAgICAgICBpZiAod29ya0luUHJvZ3Jlc3NSb290ICE9PSByb290MiB8fCB3b3JrSW5Qcm9ncmVzc1Jvb3RSZW5kZXJMYW5lcyAhPT0gbGFuZXMpIHsKICAgICAgICAgIGlmIChpc0RldlRvb2xzUHJlc2VudCkgewogICAgICAgICAgICB2YXIgbWVtb2l6ZWRVcGRhdGVycyA9IHJvb3QyLm1lbW9pemVkVXBkYXRlcnM7CiAgICAgICAgICAgIDAgPCBtZW1vaXplZFVwZGF0ZXJzLnNpemUgJiYgKHJlc3RvcmVQZW5kaW5nVXBkYXRlcnMocm9vdDIsIHdvcmtJblByb2dyZXNzUm9vdFJlbmRlckxhbmVzKSwgbWVtb2l6ZWRVcGRhdGVycy5jbGVhcigpKTsKICAgICAgICAgICAgbW92ZVBlbmRpbmdGaWJlcnNUb01lbW9pemVkKHJvb3QyLCBsYW5lcyk7CiAgICAgICAgICB9CiAgICAgICAgICB3b3JrSW5Qcm9ncmVzc1RyYW5zaXRpb25zID0gbnVsbDsKICAgICAgICAgIHByZXBhcmVGcmVzaFN0YWNrKHJvb3QyLCBsYW5lcyk7CiAgICAgICAgfQogICAgICAgIG1hcmtSZW5kZXJTdGFydGVkKGxhbmVzKTsKICAgICAgICBsYW5lcyA9IGZhbHNlOwogICAgICAgIG1lbW9pemVkVXBkYXRlcnMgPSB3b3JrSW5Qcm9ncmVzc1Jvb3RFeGl0U3RhdHVzOwogICAgICAgIGE6IGRvCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAod29ya0luUHJvZ3Jlc3NTdXNwZW5kZWRSZWFzb24gIT09IE5vdFN1c3BlbmRlZCAmJiBudWxsICE9PSB3b3JrSW5Qcm9ncmVzcykgewogICAgICAgICAgICAgIHZhciB1bml0T2ZXb3JrID0gd29ya0luUHJvZ3Jlc3MsIHRocm93blZhbHVlID0gd29ya0luUHJvZ3Jlc3NUaHJvd25WYWx1ZTsKICAgICAgICAgICAgICBzd2l0Y2ggKHdvcmtJblByb2dyZXNzU3VzcGVuZGVkUmVhc29uKSB7CiAgICAgICAgICAgICAgICBjYXNlIFN1c3BlbmRlZE9uSHlkcmF0aW9uOgogICAgICAgICAgICAgICAgICByZXNldFdvcmtJblByb2dyZXNzU3RhY2soKTsKICAgICAgICAgICAgICAgICAgbWVtb2l6ZWRVcGRhdGVycyA9IFJvb3RTdXNwZW5kZWRBdFRoZVNoZWxsOwogICAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgICAgY2FzZSBTdXNwZW5kZWRPbkltbWVkaWF0ZToKICAgICAgICAgICAgICAgIGNhc2UgU3VzcGVuZGVkT25EYXRhOgogICAgICAgICAgICAgICAgY2FzZSBTdXNwZW5kZWRPbkFjdGlvbjoKICAgICAgICAgICAgICAgIGNhc2UgU3VzcGVuZGVkT25EZXByZWNhdGVkVGhyb3dQcm9taXNlOgogICAgICAgICAgICAgICAgICBudWxsID09PSBzdXNwZW5zZUhhbmRsZXJTdGFja0N1cnNvci5jdXJyZW50ICYmIChsYW5lcyA9IHRydWUpOwogICAgICAgICAgICAgICAgICB2YXIgcmVhc29uID0gd29ya0luUHJvZ3Jlc3NTdXNwZW5kZWRSZWFzb247CiAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzU3VzcGVuZGVkUmVhc29uID0gTm90U3VzcGVuZGVkOwogICAgICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzc1Rocm93blZhbHVlID0gbnVsbDsKICAgICAgICAgICAgICAgICAgdGhyb3dBbmRVbndpbmRXb3JrTG9vcChyb290MiwgdW5pdE9mV29yaywgdGhyb3duVmFsdWUsIHJlYXNvbik7CiAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRZaWVsZEZvclByZXJlbmRlcmluZyAmJiB3b3JrSW5Qcm9ncmVzc1Jvb3RJc1ByZXJlbmRlcmluZykgewogICAgICAgICAgICAgICAgICAgIG1lbW9pemVkVXBkYXRlcnMgPSBSb290SW5Qcm9ncmVzczsKICAgICAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgcmVhc29uID0gd29ya0luUHJvZ3Jlc3NTdXNwZW5kZWRSZWFzb24sIHdvcmtJblByb2dyZXNzU3VzcGVuZGVkUmVhc29uID0gTm90U3VzcGVuZGVkLCB3b3JrSW5Qcm9ncmVzc1Rocm93blZhbHVlID0gbnVsbCwgdGhyb3dBbmRVbndpbmRXb3JrTG9vcChyb290MiwgdW5pdE9mV29yaywgdGhyb3duVmFsdWUsIHJlYXNvbik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHdvcmtMb29wU3luYygpOwogICAgICAgICAgICBtZW1vaXplZFVwZGF0ZXJzID0gd29ya0luUHJvZ3Jlc3NSb290RXhpdFN0YXR1czsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9IGNhdGNoICh0aHJvd25WYWx1ZSQ4KSB7CiAgICAgICAgICAgIGhhbmRsZVRocm93KHJvb3QyLCB0aHJvd25WYWx1ZSQ4KTsKICAgICAgICAgIH0KICAgICAgICB3aGlsZSAoMSk7CiAgICAgICAgbGFuZXMgJiYgcm9vdDIuc2hlbGxTdXNwZW5kQ291bnRlcisrOwogICAgICAgIHJlc2V0Q29udGV4dERlcGVuZGVuY2llcygpOwogICAgICAgIGV4ZWN1dGlvbkNvbnRleHQgPSBwcmV2RXhlY3V0aW9uQ29udGV4dDsKICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gcHJldkRpc3BhdGNoZXI7CiAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuQSA9IHByZXZBc3luY0Rpc3BhdGNoZXI7CiAgICAgICAgbWFya1JlbmRlclN0b3BwZWQoKTsKICAgICAgICBudWxsID09PSB3b3JrSW5Qcm9ncmVzcyAmJiAod29ya0luUHJvZ3Jlc3NSb290ID0gbnVsbCwgd29ya0luUHJvZ3Jlc3NSb290UmVuZGVyTGFuZXMgPSAwLCBmaW5pc2hRdWV1ZWluZ0NvbmN1cnJlbnRVcGRhdGVzKCkpOwogICAgICAgIHJldHVybiBtZW1vaXplZFVwZGF0ZXJzOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHdvcmtMb29wU3luYygpIHsKICAgICAgICBmb3IgKDsgbnVsbCAhPT0gd29ya0luUHJvZ3Jlc3M7ICkgcGVyZm9ybVVuaXRPZldvcmsod29ya0luUHJvZ3Jlc3MpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlbmRlclJvb3RDb25jdXJyZW50KHJvb3QyLCBsYW5lcykgewogICAgICAgIHZhciBwcmV2RXhlY3V0aW9uQ29udGV4dCA9IGV4ZWN1dGlvbkNvbnRleHQ7CiAgICAgICAgZXhlY3V0aW9uQ29udGV4dCB8PSBSZW5kZXJDb250ZXh0OwogICAgICAgIHZhciBwcmV2RGlzcGF0Y2hlciA9IHB1c2hEaXNwYXRjaGVyKCksIHByZXZBc3luY0Rpc3BhdGNoZXIgPSBwdXNoQXN5bmNEaXNwYXRjaGVyKCk7CiAgICAgICAgaWYgKHdvcmtJblByb2dyZXNzUm9vdCAhPT0gcm9vdDIgfHwgd29ya0luUHJvZ3Jlc3NSb290UmVuZGVyTGFuZXMgIT09IGxhbmVzKSB7CiAgICAgICAgICBpZiAoaXNEZXZUb29sc1ByZXNlbnQpIHsKICAgICAgICAgICAgdmFyIG1lbW9pemVkVXBkYXRlcnMgPSByb290Mi5tZW1vaXplZFVwZGF0ZXJzOwogICAgICAgICAgICAwIDwgbWVtb2l6ZWRVcGRhdGVycy5zaXplICYmIChyZXN0b3JlUGVuZGluZ1VwZGF0ZXJzKHJvb3QyLCB3b3JrSW5Qcm9ncmVzc1Jvb3RSZW5kZXJMYW5lcyksIG1lbW9pemVkVXBkYXRlcnMuY2xlYXIoKSk7CiAgICAgICAgICAgIG1vdmVQZW5kaW5nRmliZXJzVG9NZW1vaXplZChyb290MiwgbGFuZXMpOwogICAgICAgICAgfQogICAgICAgICAgd29ya0luUHJvZ3Jlc3NUcmFuc2l0aW9ucyA9IG51bGw7CiAgICAgICAgICB3b3JrSW5Qcm9ncmVzc1Jvb3RSZW5kZXJUYXJnZXRUaW1lID0gbm93JDEoKSArIFJFTkRFUl9USU1FT1VUX01TOwogICAgICAgICAgcHJlcGFyZUZyZXNoU3RhY2socm9vdDIsIGxhbmVzKTsKICAgICAgICB9IGVsc2UKICAgICAgICAgIHdvcmtJblByb2dyZXNzUm9vdElzUHJlcmVuZGVyaW5nID0gY2hlY2tJZlJvb3RJc1ByZXJlbmRlcmluZygKICAgICAgICAgICAgcm9vdDIsCiAgICAgICAgICAgIGxhbmVzCiAgICAgICAgICApOwogICAgICAgIG1hcmtSZW5kZXJTdGFydGVkKGxhbmVzKTsKICAgICAgICBhOiBkbwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKHdvcmtJblByb2dyZXNzU3VzcGVuZGVkUmVhc29uICE9PSBOb3RTdXNwZW5kZWQgJiYgbnVsbCAhPT0gd29ya0luUHJvZ3Jlc3MpCiAgICAgICAgICAgICAgYjogc3dpdGNoIChsYW5lcyA9IHdvcmtJblByb2dyZXNzLCBtZW1vaXplZFVwZGF0ZXJzID0gd29ya0luUHJvZ3Jlc3NUaHJvd25WYWx1ZSwgd29ya0luUHJvZ3Jlc3NTdXNwZW5kZWRSZWFzb24pIHsKICAgICAgICAgICAgICAgIGNhc2UgU3VzcGVuZGVkT25FcnJvcjoKICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3NTdXNwZW5kZWRSZWFzb24gPSBOb3RTdXNwZW5kZWQ7CiAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzVGhyb3duVmFsdWUgPSBudWxsOwogICAgICAgICAgICAgICAgICB0aHJvd0FuZFVud2luZFdvcmtMb29wKAogICAgICAgICAgICAgICAgICAgIHJvb3QyLAogICAgICAgICAgICAgICAgICAgIGxhbmVzLAogICAgICAgICAgICAgICAgICAgIG1lbW9pemVkVXBkYXRlcnMsCiAgICAgICAgICAgICAgICAgICAgU3VzcGVuZGVkT25FcnJvcgogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgU3VzcGVuZGVkT25EYXRhOgogICAgICAgICAgICAgICAgY2FzZSBTdXNwZW5kZWRPbkFjdGlvbjoKICAgICAgICAgICAgICAgICAgaWYgKGlzVGhlbmFibGVSZXNvbHZlZChtZW1vaXplZFVwZGF0ZXJzKSkgewogICAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzU3VzcGVuZGVkUmVhc29uID0gTm90U3VzcGVuZGVkOwogICAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzVGhyb3duVmFsdWUgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIHJlcGxheVN1c3BlbmRlZFVuaXRPZldvcmsobGFuZXMpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGxhbmVzID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3NTdXNwZW5kZWRSZWFzb24gIT09IFN1c3BlbmRlZE9uRGF0YSAmJiB3b3JrSW5Qcm9ncmVzc1N1c3BlbmRlZFJlYXNvbiAhPT0gU3VzcGVuZGVkT25BY3Rpb24gfHwgd29ya0luUHJvZ3Jlc3NSb290ICE9PSByb290MiB8fCAod29ya0luUHJvZ3Jlc3NTdXNwZW5kZWRSZWFzb24gPSBTdXNwZW5kZWRBbmRSZWFkeVRvQ29udGludWUpOwogICAgICAgICAgICAgICAgICAgIGVuc3VyZVJvb3RJc1NjaGVkdWxlZChyb290Mik7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIG1lbW9pemVkVXBkYXRlcnMudGhlbihsYW5lcywgbGFuZXMpOwogICAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgICAgY2FzZSBTdXNwZW5kZWRPbkltbWVkaWF0ZToKICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3NTdXNwZW5kZWRSZWFzb24gPSBTdXNwZW5kZWRBbmRSZWFkeVRvQ29udGludWU7CiAgICAgICAgICAgICAgICAgIGJyZWFrIGE7CiAgICAgICAgICAgICAgICBjYXNlIFN1c3BlbmRlZE9uSW5zdGFuY2U6CiAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzU3VzcGVuZGVkUmVhc29uID0gU3VzcGVuZGVkT25JbnN0YW5jZUFuZFJlYWR5VG9Db250aW51ZTsKICAgICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICAgIGNhc2UgU3VzcGVuZGVkQW5kUmVhZHlUb0NvbnRpbnVlOgogICAgICAgICAgICAgICAgICBpc1RoZW5hYmxlUmVzb2x2ZWQobWVtb2l6ZWRVcGRhdGVycykgPyAod29ya0luUHJvZ3Jlc3NTdXNwZW5kZWRSZWFzb24gPSBOb3RTdXNwZW5kZWQsIHdvcmtJblByb2dyZXNzVGhyb3duVmFsdWUgPSBudWxsLCByZXBsYXlTdXNwZW5kZWRVbml0T2ZXb3JrKGxhbmVzKSkgOiAod29ya0luUHJvZ3Jlc3NTdXNwZW5kZWRSZWFzb24gPSBOb3RTdXNwZW5kZWQsIHdvcmtJblByb2dyZXNzVGhyb3duVmFsdWUgPSBudWxsLCB0aHJvd0FuZFVud2luZFdvcmtMb29wKAogICAgICAgICAgICAgICAgICAgIHJvb3QyLAogICAgICAgICAgICAgICAgICAgIGxhbmVzLAogICAgICAgICAgICAgICAgICAgIG1lbW9pemVkVXBkYXRlcnMsCiAgICAgICAgICAgICAgICAgICAgU3VzcGVuZGVkQW5kUmVhZHlUb0NvbnRpbnVlCiAgICAgICAgICAgICAgICAgICkpOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgU3VzcGVuZGVkT25JbnN0YW5jZUFuZFJlYWR5VG9Db250aW51ZToKICAgICAgICAgICAgICAgICAgdmFyIHJlc291cmNlID0gbnVsbDsKICAgICAgICAgICAgICAgICAgc3dpdGNoICh3b3JrSW5Qcm9ncmVzcy50YWcpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2UgPSB3b3JrSW5Qcm9ncmVzcy5tZW1vaXplZFN0YXRlOwogICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgICAgICAgICAgdmFyIGhvc3RGaWJlciA9IHdvcmtJblByb2dyZXNzOwogICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc291cmNlID8gcHJlbG9hZFJlc291cmNlKHJlc291cmNlKSA6IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3NTdXNwZW5kZWRSZWFzb24gPSBOb3RTdXNwZW5kZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzVGhyb3duVmFsdWUgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2libGluZyA9IGhvc3RGaWJlci5zaWJsaW5nOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gc2libGluZykgd29ya0luUHJvZ3Jlc3MgPSBzaWJsaW5nOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmV0dXJuRmliZXIgPSBob3N0RmliZXIucmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHJldHVybkZpYmVyID8gKHdvcmtJblByb2dyZXNzID0gcmV0dXJuRmliZXIsIGNvbXBsZXRlVW5pdE9mV29yayhyZXR1cm5GaWJlcikpIDogd29ya0luUHJvZ3Jlc3MgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGI7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAgICAgICAgICAgIlVuZXhwZWN0ZWQgdHlwZSBvZiBmaWJlciB0cmlnZ2VyZWQgYSBzdXNwZW5zZXkgY29tbWl0LiBUaGlzIGlzIGEgYnVnIGluIFJlYWN0LiIKICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3NTdXNwZW5kZWRSZWFzb24gPSBOb3RTdXNwZW5kZWQ7CiAgICAgICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzVGhyb3duVmFsdWUgPSBudWxsOwogICAgICAgICAgICAgICAgICB0aHJvd0FuZFVud2luZFdvcmtMb29wKAogICAgICAgICAgICAgICAgICAgIHJvb3QyLAogICAgICAgICAgICAgICAgICAgIGxhbmVzLAogICAgICAgICAgICAgICAgICAgIG1lbW9pemVkVXBkYXRlcnMsCiAgICAgICAgICAgICAgICAgICAgU3VzcGVuZGVkT25JbnN0YW5jZUFuZFJlYWR5VG9Db250aW51ZQogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgU3VzcGVuZGVkT25EZXByZWNhdGVkVGhyb3dQcm9taXNlOgogICAgICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzc1N1c3BlbmRlZFJlYXNvbiA9IE5vdFN1c3BlbmRlZDsKICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3NUaHJvd25WYWx1ZSA9IG51bGw7CiAgICAgICAgICAgICAgICAgIHRocm93QW5kVW53aW5kV29ya0xvb3AoCiAgICAgICAgICAgICAgICAgICAgcm9vdDIsCiAgICAgICAgICAgICAgICAgICAgbGFuZXMsCiAgICAgICAgICAgICAgICAgICAgbWVtb2l6ZWRVcGRhdGVycywKICAgICAgICAgICAgICAgICAgICBTdXNwZW5kZWRPbkRlcHJlY2F0ZWRUaHJvd1Byb21pc2UKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIFN1c3BlbmRlZE9uSHlkcmF0aW9uOgogICAgICAgICAgICAgICAgICByZXNldFdvcmtJblByb2dyZXNzU3RhY2soKTsKICAgICAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3NSb290RXhpdFN0YXR1cyA9IFJvb3RTdXNwZW5kZWRBdFRoZVNoZWxsOwogICAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgIlVuZXhwZWN0ZWQgU3VzcGVuZGVkUmVhc29uLiBUaGlzIGlzIGEgYnVnIGluIFJlYWN0LiIKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIG51bGwgIT09IFJlYWN0U2hhcmVkSW50ZXJuYWxzLmFjdFF1ZXVlID8gd29ya0xvb3BTeW5jKCkgOiB3b3JrTG9vcENvbmN1cnJlbnRCeVNjaGVkdWxlcigpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0gY2F0Y2ggKHRocm93blZhbHVlJDkpIHsKICAgICAgICAgICAgaGFuZGxlVGhyb3cocm9vdDIsIHRocm93blZhbHVlJDkpOwogICAgICAgICAgfQogICAgICAgIHdoaWxlICgxKTsKICAgICAgICByZXNldENvbnRleHREZXBlbmRlbmNpZXMoKTsKICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gcHJldkRpc3BhdGNoZXI7CiAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuQSA9IHByZXZBc3luY0Rpc3BhdGNoZXI7CiAgICAgICAgZXhlY3V0aW9uQ29udGV4dCA9IHByZXZFeGVjdXRpb25Db250ZXh0OwogICAgICAgIGlmIChudWxsICE9PSB3b3JrSW5Qcm9ncmVzcykKICAgICAgICAgIHJldHVybiBudWxsICE9PSBpbmplY3RlZFByb2ZpbGluZ0hvb2tzICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBpbmplY3RlZFByb2ZpbGluZ0hvb2tzLm1hcmtSZW5kZXJZaWVsZGVkICYmIGluamVjdGVkUHJvZmlsaW5nSG9va3MubWFya1JlbmRlcllpZWxkZWQoKSwgUm9vdEluUHJvZ3Jlc3M7CiAgICAgICAgbWFya1JlbmRlclN0b3BwZWQoKTsKICAgICAgICB3b3JrSW5Qcm9ncmVzc1Jvb3QgPSBudWxsOwogICAgICAgIHdvcmtJblByb2dyZXNzUm9vdFJlbmRlckxhbmVzID0gMDsKICAgICAgICBmaW5pc2hRdWV1ZWluZ0NvbmN1cnJlbnRVcGRhdGVzKCk7CiAgICAgICAgcmV0dXJuIHdvcmtJblByb2dyZXNzUm9vdEV4aXRTdGF0dXM7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gd29ya0xvb3BDb25jdXJyZW50QnlTY2hlZHVsZXIoKSB7CiAgICAgICAgZm9yICg7IG51bGwgIT09IHdvcmtJblByb2dyZXNzICYmICFzaG91bGRZaWVsZCgpOyApCiAgICAgICAgICBwZXJmb3JtVW5pdE9mV29yayh3b3JrSW5Qcm9ncmVzcyk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcGVyZm9ybVVuaXRPZldvcmsodW5pdE9mV29yaykgewogICAgICAgIHZhciBjdXJyZW50MiA9IHVuaXRPZldvcmsuYWx0ZXJuYXRlOwogICAgICAgICh1bml0T2ZXb3JrLm1vZGUgJiBQcm9maWxlTW9kZSkgIT09IE5vTW9kZSA/IChzdGFydFByb2ZpbGVyVGltZXIodW5pdE9mV29yayksIGN1cnJlbnQyID0gcnVuV2l0aEZpYmVySW5ERVYoCiAgICAgICAgICB1bml0T2ZXb3JrLAogICAgICAgICAgYmVnaW5Xb3JrLAogICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICB1bml0T2ZXb3JrLAogICAgICAgICAgZW50YW5nbGVkUmVuZGVyTGFuZXMKICAgICAgICApLCBzdG9wUHJvZmlsZXJUaW1lcklmUnVubmluZ0FuZFJlY29yZER1cmF0aW9uKHVuaXRPZldvcmspKSA6IGN1cnJlbnQyID0gcnVuV2l0aEZpYmVySW5ERVYoCiAgICAgICAgICB1bml0T2ZXb3JrLAogICAgICAgICAgYmVnaW5Xb3JrLAogICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICB1bml0T2ZXb3JrLAogICAgICAgICAgZW50YW5nbGVkUmVuZGVyTGFuZXMKICAgICAgICApOwogICAgICAgIHVuaXRPZldvcmsubWVtb2l6ZWRQcm9wcyA9IHVuaXRPZldvcmsucGVuZGluZ1Byb3BzOwogICAgICAgIG51bGwgPT09IGN1cnJlbnQyID8gY29tcGxldGVVbml0T2ZXb3JrKHVuaXRPZldvcmspIDogd29ya0luUHJvZ3Jlc3MgPSBjdXJyZW50MjsKICAgICAgfQogICAgICBmdW5jdGlvbiByZXBsYXlTdXNwZW5kZWRVbml0T2ZXb3JrKHVuaXRPZldvcmspIHsKICAgICAgICB2YXIgbmV4dCA9IHJ1bldpdGhGaWJlckluREVWKHVuaXRPZldvcmssIHJlcGxheUJlZ2luV29yaywgdW5pdE9mV29yayk7CiAgICAgICAgdW5pdE9mV29yay5tZW1vaXplZFByb3BzID0gdW5pdE9mV29yay5wZW5kaW5nUHJvcHM7CiAgICAgICAgbnVsbCA9PT0gbmV4dCA/IGNvbXBsZXRlVW5pdE9mV29yayh1bml0T2ZXb3JrKSA6IHdvcmtJblByb2dyZXNzID0gbmV4dDsKICAgICAgfQogICAgICBmdW5jdGlvbiByZXBsYXlCZWdpbldvcmsodW5pdE9mV29yaykgewogICAgICAgIHZhciBjdXJyZW50MiA9IHVuaXRPZldvcmsuYWx0ZXJuYXRlLCBpc1Byb2ZpbGluZ01vZGUgPSAodW5pdE9mV29yay5tb2RlICYgUHJvZmlsZU1vZGUpICE9PSBOb01vZGU7CiAgICAgICAgaXNQcm9maWxpbmdNb2RlICYmIHN0YXJ0UHJvZmlsZXJUaW1lcih1bml0T2ZXb3JrKTsKICAgICAgICBzd2l0Y2ggKHVuaXRPZldvcmsudGFnKSB7CiAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBjdXJyZW50MiA9IHJlcGxheUZ1bmN0aW9uQ29tcG9uZW50KAogICAgICAgICAgICAgIGN1cnJlbnQyLAogICAgICAgICAgICAgIHVuaXRPZldvcmssCiAgICAgICAgICAgICAgdW5pdE9mV29yay5wZW5kaW5nUHJvcHMsCiAgICAgICAgICAgICAgdW5pdE9mV29yay50eXBlLAogICAgICAgICAgICAgIHZvaWQgMCwKICAgICAgICAgICAgICB3b3JrSW5Qcm9ncmVzc1Jvb3RSZW5kZXJMYW5lcwogICAgICAgICAgICApOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIGN1cnJlbnQyID0gcmVwbGF5RnVuY3Rpb25Db21wb25lbnQoCiAgICAgICAgICAgICAgY3VycmVudDIsCiAgICAgICAgICAgICAgdW5pdE9mV29yaywKICAgICAgICAgICAgICB1bml0T2ZXb3JrLnBlbmRpbmdQcm9wcywKICAgICAgICAgICAgICB1bml0T2ZXb3JrLnR5cGUucmVuZGVyLAogICAgICAgICAgICAgIHVuaXRPZldvcmsucmVmLAogICAgICAgICAgICAgIHdvcmtJblByb2dyZXNzUm9vdFJlbmRlckxhbmVzCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICByZXNldEhvb2tzT25VbndpbmQodW5pdE9mV29yayk7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICB1bndpbmRJbnRlcnJ1cHRlZFdvcmsoY3VycmVudDIsIHVuaXRPZldvcmspLCB1bml0T2ZXb3JrID0gd29ya0luUHJvZ3Jlc3MgPSByZXNldFdvcmtJblByb2dyZXNzKHVuaXRPZldvcmssIGVudGFuZ2xlZFJlbmRlckxhbmVzKSwgY3VycmVudDIgPSBiZWdpbldvcmsoY3VycmVudDIsIHVuaXRPZldvcmssIGVudGFuZ2xlZFJlbmRlckxhbmVzKTsKICAgICAgICB9CiAgICAgICAgaXNQcm9maWxpbmdNb2RlICYmIHN0b3BQcm9maWxlclRpbWVySWZSdW5uaW5nQW5kUmVjb3JkRHVyYXRpb24odW5pdE9mV29yayk7CiAgICAgICAgcmV0dXJuIGN1cnJlbnQyOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHRocm93QW5kVW53aW5kV29ya0xvb3Aocm9vdDIsIHVuaXRPZldvcmssIHRocm93blZhbHVlLCBzdXNwZW5kZWRSZWFzb24pIHsKICAgICAgICByZXNldENvbnRleHREZXBlbmRlbmNpZXMoKTsKICAgICAgICByZXNldEhvb2tzT25VbndpbmQodW5pdE9mV29yayk7CiAgICAgICAgdGhlbmFibGVTdGF0ZSA9IG51bGw7CiAgICAgICAgdGhlbmFibGVJbmRleENvdW50ZXIgPSAwOwogICAgICAgIHZhciByZXR1cm5GaWJlciA9IHVuaXRPZldvcmsucmV0dXJuOwogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAodGhyb3dFeGNlcHRpb24oCiAgICAgICAgICAgIHJvb3QyLAogICAgICAgICAgICByZXR1cm5GaWJlciwKICAgICAgICAgICAgdW5pdE9mV29yaywKICAgICAgICAgICAgdGhyb3duVmFsdWUsCiAgICAgICAgICAgIHdvcmtJblByb2dyZXNzUm9vdFJlbmRlckxhbmVzCiAgICAgICAgICApKSB7CiAgICAgICAgICAgIHdvcmtJblByb2dyZXNzUm9vdEV4aXRTdGF0dXMgPSBSb290RmF0YWxFcnJvcmVkOwogICAgICAgICAgICBsb2dVbmNhdWdodEVycm9yKAogICAgICAgICAgICAgIHJvb3QyLAogICAgICAgICAgICAgIGNyZWF0ZUNhcHR1cmVkVmFsdWVBdEZpYmVyKHRocm93blZhbHVlLCByb290Mi5jdXJyZW50KQogICAgICAgICAgICApOwogICAgICAgICAgICB3b3JrSW5Qcm9ncmVzcyA9IG51bGw7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgaWYgKG51bGwgIT09IHJldHVybkZpYmVyKSB0aHJvdyB3b3JrSW5Qcm9ncmVzcyA9IHJldHVybkZpYmVyLCBlcnJvcjsKICAgICAgICAgIHdvcmtJblByb2dyZXNzUm9vdEV4aXRTdGF0dXMgPSBSb290RmF0YWxFcnJvcmVkOwogICAgICAgICAgbG9nVW5jYXVnaHRFcnJvcigKICAgICAgICAgICAgcm9vdDIsCiAgICAgICAgICAgIGNyZWF0ZUNhcHR1cmVkVmFsdWVBdEZpYmVyKHRocm93blZhbHVlLCByb290Mi5jdXJyZW50KQogICAgICAgICAgKTsKICAgICAgICAgIHdvcmtJblByb2dyZXNzID0gbnVsbDsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKHVuaXRPZldvcmsuZmxhZ3MgJiAzMjc2OCkgewogICAgICAgICAgaWYgKGlzSHlkcmF0aW5nIHx8IHN1c3BlbmRlZFJlYXNvbiA9PT0gU3VzcGVuZGVkT25FcnJvcikgcm9vdDIgPSB0cnVlOwogICAgICAgICAgZWxzZSBpZiAod29ya0luUHJvZ3Jlc3NSb290SXNQcmVyZW5kZXJpbmcgfHwgMCAhPT0gKHdvcmtJblByb2dyZXNzUm9vdFJlbmRlckxhbmVzICYgNTM2ODcwOTEyKSkKICAgICAgICAgICAgcm9vdDIgPSBmYWxzZTsKICAgICAgICAgIGVsc2UgaWYgKHdvcmtJblByb2dyZXNzUm9vdERpZFNraXBTdXNwZW5kZWRTaWJsaW5ncyA9IHJvb3QyID0gdHJ1ZSwgc3VzcGVuZGVkUmVhc29uID09PSBTdXNwZW5kZWRPbkRhdGEgfHwgc3VzcGVuZGVkUmVhc29uID09PSBTdXNwZW5kZWRPbkFjdGlvbiB8fCBzdXNwZW5kZWRSZWFzb24gPT09IFN1c3BlbmRlZE9uSW1tZWRpYXRlIHx8IHN1c3BlbmRlZFJlYXNvbiA9PT0gU3VzcGVuZGVkT25EZXByZWNhdGVkVGhyb3dQcm9taXNlKQogICAgICAgICAgICBzdXNwZW5kZWRSZWFzb24gPSBzdXNwZW5zZUhhbmRsZXJTdGFja0N1cnNvci5jdXJyZW50LCBudWxsICE9PSBzdXNwZW5kZWRSZWFzb24gJiYgMTMgPT09IHN1c3BlbmRlZFJlYXNvbi50YWcgJiYgKHN1c3BlbmRlZFJlYXNvbi5mbGFncyB8PSAxNjM4NCk7CiAgICAgICAgICB1bndpbmRVbml0T2ZXb3JrKHVuaXRPZldvcmssIHJvb3QyKTsKICAgICAgICB9IGVsc2UgY29tcGxldGVVbml0T2ZXb3JrKHVuaXRPZldvcmspOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNvbXBsZXRlVW5pdE9mV29yayh1bml0T2ZXb3JrKSB7CiAgICAgICAgdmFyIGNvbXBsZXRlZFdvcmsgPSB1bml0T2ZXb3JrOwogICAgICAgIGRvIHsKICAgICAgICAgIGlmICgwICE9PSAoY29tcGxldGVkV29yay5mbGFncyAmIDMyNzY4KSkgewogICAgICAgICAgICB1bndpbmRVbml0T2ZXb3JrKAogICAgICAgICAgICAgIGNvbXBsZXRlZFdvcmssCiAgICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3NSb290RGlkU2tpcFN1c3BlbmRlZFNpYmxpbmdzCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBjdXJyZW50MiA9IGNvbXBsZXRlZFdvcmsuYWx0ZXJuYXRlOwogICAgICAgICAgdW5pdE9mV29yayA9IGNvbXBsZXRlZFdvcmsucmV0dXJuOwogICAgICAgICAgc3RhcnRQcm9maWxlclRpbWVyKGNvbXBsZXRlZFdvcmspOwogICAgICAgICAgY3VycmVudDIgPSBydW5XaXRoRmliZXJJbkRFVigKICAgICAgICAgICAgY29tcGxldGVkV29yaywKICAgICAgICAgICAgY29tcGxldGVXb3JrLAogICAgICAgICAgICBjdXJyZW50MiwKICAgICAgICAgICAgY29tcGxldGVkV29yaywKICAgICAgICAgICAgZW50YW5nbGVkUmVuZGVyTGFuZXMKICAgICAgICAgICk7CiAgICAgICAgICAoY29tcGxldGVkV29yay5tb2RlICYgUHJvZmlsZU1vZGUpICE9PSBOb01vZGUgJiYgc3RvcFByb2ZpbGVyVGltZXJJZlJ1bm5pbmdBbmRSZWNvcmRJbmNvbXBsZXRlRHVyYXRpb24oY29tcGxldGVkV29yayk7CiAgICAgICAgICBpZiAobnVsbCAhPT0gY3VycmVudDIpIHsKICAgICAgICAgICAgd29ya0luUHJvZ3Jlc3MgPSBjdXJyZW50MjsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgY29tcGxldGVkV29yayA9IGNvbXBsZXRlZFdvcmsuc2libGluZzsKICAgICAgICAgIGlmIChudWxsICE9PSBjb21wbGV0ZWRXb3JrKSB7CiAgICAgICAgICAgIHdvcmtJblByb2dyZXNzID0gY29tcGxldGVkV29yazsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgd29ya0luUHJvZ3Jlc3MgPSBjb21wbGV0ZWRXb3JrID0gdW5pdE9mV29yazsKICAgICAgICB9IHdoaWxlIChudWxsICE9PSBjb21wbGV0ZWRXb3JrKTsKICAgICAgICB3b3JrSW5Qcm9ncmVzc1Jvb3RFeGl0U3RhdHVzID09PSBSb290SW5Qcm9ncmVzcyAmJiAod29ya0luUHJvZ3Jlc3NSb290RXhpdFN0YXR1cyA9IFJvb3RDb21wbGV0ZWQpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHVud2luZFVuaXRPZldvcmsodW5pdE9mV29yaywgc2tpcFNpYmxpbmdzKSB7CiAgICAgICAgZG8gewogICAgICAgICAgdmFyIG5leHQgPSB1bndpbmRXb3JrKHVuaXRPZldvcmsuYWx0ZXJuYXRlLCB1bml0T2ZXb3JrKTsKICAgICAgICAgIGlmIChudWxsICE9PSBuZXh0KSB7CiAgICAgICAgICAgIG5leHQuZmxhZ3MgJj0gMzI3Njc7CiAgICAgICAgICAgIHdvcmtJblByb2dyZXNzID0gbmV4dDsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCh1bml0T2ZXb3JrLm1vZGUgJiBQcm9maWxlTW9kZSkgIT09IE5vTW9kZSkgewogICAgICAgICAgICBzdG9wUHJvZmlsZXJUaW1lcklmUnVubmluZ0FuZFJlY29yZEluY29tcGxldGVEdXJhdGlvbih1bml0T2ZXb3JrKTsKICAgICAgICAgICAgbmV4dCA9IHVuaXRPZldvcmsuYWN0dWFsRHVyYXRpb247CiAgICAgICAgICAgIGZvciAodmFyIGNoaWxkID0gdW5pdE9mV29yay5jaGlsZDsgbnVsbCAhPT0gY2hpbGQ7ICkKICAgICAgICAgICAgICBuZXh0ICs9IGNoaWxkLmFjdHVhbER1cmF0aW9uLCBjaGlsZCA9IGNoaWxkLnNpYmxpbmc7CiAgICAgICAgICAgIHVuaXRPZldvcmsuYWN0dWFsRHVyYXRpb24gPSBuZXh0OwogICAgICAgICAgfQogICAgICAgICAgbmV4dCA9IHVuaXRPZldvcmsucmV0dXJuOwogICAgICAgICAgbnVsbCAhPT0gbmV4dCAmJiAobmV4dC5mbGFncyB8PSAzMjc2OCwgbmV4dC5zdWJ0cmVlRmxhZ3MgPSAwLCBuZXh0LmRlbGV0aW9ucyA9IG51bGwpOwogICAgICAgICAgaWYgKCFza2lwU2libGluZ3MgJiYgKHVuaXRPZldvcmsgPSB1bml0T2ZXb3JrLnNpYmxpbmcsIG51bGwgIT09IHVuaXRPZldvcmspKSB7CiAgICAgICAgICAgIHdvcmtJblByb2dyZXNzID0gdW5pdE9mV29yazsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgd29ya0luUHJvZ3Jlc3MgPSB1bml0T2ZXb3JrID0gbmV4dDsKICAgICAgICB9IHdoaWxlIChudWxsICE9PSB1bml0T2ZXb3JrKTsKICAgICAgICB3b3JrSW5Qcm9ncmVzc1Jvb3RFeGl0U3RhdHVzID0gUm9vdFN1c3BlbmRlZEF0VGhlU2hlbGw7CiAgICAgICAgd29ya0luUHJvZ3Jlc3MgPSBudWxsOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNvbW1pdFJvb3Qocm9vdDIsIGZpbmlzaGVkV29yaywgbGFuZXMsIHJlY292ZXJhYmxlRXJyb3JzLCB0cmFuc2l0aW9ucywgZGlkSW5jbHVkZVJlbmRlclBoYXNlVXBkYXRlLCBzcGF3bmVkTGFuZSwgdXBkYXRlZExhbmVzLCBzdXNwZW5kZWRSZXRyeUxhbmVzKSB7CiAgICAgICAgcm9vdDIuY2FuY2VsUGVuZGluZ0NvbW1pdCA9IG51bGw7CiAgICAgICAgZG8KICAgICAgICAgIGZsdXNoUGVuZGluZ0VmZmVjdHMoKTsKICAgICAgICB3aGlsZSAocGVuZGluZ0VmZmVjdHNTdGF0dXMgIT09IE5PX1BFTkRJTkdfRUZGRUNUUyk7CiAgICAgICAgUmVhY3RTdHJpY3RNb2RlV2FybmluZ3MuZmx1c2hMZWdhY3lDb250ZXh0V2FybmluZygpOwogICAgICAgIFJlYWN0U3RyaWN0TW9kZVdhcm5pbmdzLmZsdXNoUGVuZGluZ1Vuc2FmZUxpZmVjeWNsZVdhcm5pbmdzKCk7CiAgICAgICAgaWYgKChleGVjdXRpb25Db250ZXh0ICYgKFJlbmRlckNvbnRleHQgfCBDb21taXRDb250ZXh0KSkgIT09IE5vQ29udGV4dCkKICAgICAgICAgIHRocm93IEVycm9yKCJTaG91bGQgbm90IGFscmVhZHkgYmUgd29ya2luZy4iKTsKICAgICAgICBudWxsICE9PSBpbmplY3RlZFByb2ZpbGluZ0hvb2tzICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBpbmplY3RlZFByb2ZpbGluZ0hvb2tzLm1hcmtDb21taXRTdGFydGVkICYmIGluamVjdGVkUHJvZmlsaW5nSG9va3MubWFya0NvbW1pdFN0YXJ0ZWQobGFuZXMpOwogICAgICAgIGlmIChudWxsID09PSBmaW5pc2hlZFdvcmspIG1hcmtDb21taXRTdG9wcGVkKCk7CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAwID09PSBsYW5lcyAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiZmluaXNoZWRMYW5lcyBzaG91bGQgbm90IGJlIGVtcHR5IGR1cmluZyBhIGNvbW1pdC4gVGhpcyBpcyBhIGJ1ZyBpbiBSZWFjdC4iCiAgICAgICAgICApOwogICAgICAgICAgaWYgKGZpbmlzaGVkV29yayA9PT0gcm9vdDIuY3VycmVudCkKICAgICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICAgIkNhbm5vdCBjb21taXQgdGhlIHNhbWUgdHJlZSBhcyBiZWZvcmUuIFRoaXMgZXJyb3IgaXMgbGlrZWx5IGNhdXNlZCBieSBhIGJ1ZyBpbiBSZWFjdC4gUGxlYXNlIGZpbGUgYW4gaXNzdWUuIgogICAgICAgICAgICApOwogICAgICAgICAgZGlkSW5jbHVkZVJlbmRlclBoYXNlVXBkYXRlID0gZmluaXNoZWRXb3JrLmxhbmVzIHwgZmluaXNoZWRXb3JrLmNoaWxkTGFuZXM7CiAgICAgICAgICBkaWRJbmNsdWRlUmVuZGVyUGhhc2VVcGRhdGUgfD0gY29uY3VycmVudGx5VXBkYXRlZExhbmVzOwogICAgICAgICAgbWFya1Jvb3RGaW5pc2hlZCgKICAgICAgICAgICAgcm9vdDIsCiAgICAgICAgICAgIGxhbmVzLAogICAgICAgICAgICBkaWRJbmNsdWRlUmVuZGVyUGhhc2VVcGRhdGUsCiAgICAgICAgICAgIHNwYXduZWRMYW5lLAogICAgICAgICAgICB1cGRhdGVkTGFuZXMsCiAgICAgICAgICAgIHN1c3BlbmRlZFJldHJ5TGFuZXMKICAgICAgICAgICk7CiAgICAgICAgICByb290MiA9PT0gd29ya0luUHJvZ3Jlc3NSb290ICYmICh3b3JrSW5Qcm9ncmVzcyA9IHdvcmtJblByb2dyZXNzUm9vdCA9IG51bGwsIHdvcmtJblByb2dyZXNzUm9vdFJlbmRlckxhbmVzID0gMCk7CiAgICAgICAgICBwZW5kaW5nRmluaXNoZWRXb3JrID0gZmluaXNoZWRXb3JrOwogICAgICAgICAgcGVuZGluZ0VmZmVjdHNSb290ID0gcm9vdDI7CiAgICAgICAgICBwZW5kaW5nRWZmZWN0c0xhbmVzID0gbGFuZXM7CiAgICAgICAgICBwZW5kaW5nRWZmZWN0c1JlbWFpbmluZ0xhbmVzID0gZGlkSW5jbHVkZVJlbmRlclBoYXNlVXBkYXRlOwogICAgICAgICAgcGVuZGluZ1Bhc3NpdmVUcmFuc2l0aW9ucyA9IHRyYW5zaXRpb25zOwogICAgICAgICAgcGVuZGluZ1JlY292ZXJhYmxlRXJyb3JzID0gcmVjb3ZlcmFibGVFcnJvcnM7CiAgICAgICAgICAwICE9PSAoZmluaXNoZWRXb3JrLnN1YnRyZWVGbGFncyAmIDEwMjU2KSB8fCAwICE9PSAoZmluaXNoZWRXb3JrLmZsYWdzICYgMTAyNTYpID8gKHJvb3QyLmNhbGxiYWNrTm9kZSA9IG51bGwsIHJvb3QyLmNhbGxiYWNrUHJpb3JpdHkgPSAwLCBzY2hlZHVsZUNhbGxiYWNrJDEoTm9ybWFsUHJpb3JpdHkkMSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGZsdXNoUGFzc2l2ZUVmZmVjdHModHJ1ZSk7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfSkpIDogKHJvb3QyLmNhbGxiYWNrTm9kZSA9IG51bGwsIHJvb3QyLmNhbGxiYWNrUHJpb3JpdHkgPSAwKTsKICAgICAgICAgIGNvbW1pdFN0YXJ0VGltZSA9IG5vdygpOwogICAgICAgICAgcmVjb3ZlcmFibGVFcnJvcnMgPSAwICE9PSAoZmluaXNoZWRXb3JrLmZsYWdzICYgMTM4NzgpOwogICAgICAgICAgaWYgKDAgIT09IChmaW5pc2hlZFdvcmsuc3VidHJlZUZsYWdzICYgMTM4NzgpIHx8IHJlY292ZXJhYmxlRXJyb3JzKSB7CiAgICAgICAgICAgIHJlY292ZXJhYmxlRXJyb3JzID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuVDsKICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuVCA9IG51bGw7CiAgICAgICAgICAgIHRyYW5zaXRpb25zID0gUmVhY3RET01TaGFyZWRJbnRlcm5hbHMucDsKICAgICAgICAgICAgUmVhY3RET01TaGFyZWRJbnRlcm5hbHMucCA9IERpc2NyZXRlRXZlbnRQcmlvcml0eTsKICAgICAgICAgICAgc3Bhd25lZExhbmUgPSBleGVjdXRpb25Db250ZXh0OwogICAgICAgICAgICBleGVjdXRpb25Db250ZXh0IHw9IENvbW1pdENvbnRleHQ7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgY29tbWl0QmVmb3JlTXV0YXRpb25FZmZlY3RzKHJvb3QyLCBmaW5pc2hlZFdvcmssIGxhbmVzKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBleGVjdXRpb25Db250ZXh0ID0gc3Bhd25lZExhbmUsIFJlYWN0RE9NU2hhcmVkSW50ZXJuYWxzLnAgPSB0cmFuc2l0aW9ucywgUmVhY3RTaGFyZWRJbnRlcm5hbHMuVCA9IHJlY292ZXJhYmxlRXJyb3JzOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBwZW5kaW5nRWZmZWN0c1N0YXR1cyA9IFBFTkRJTkdfTVVUQVRJT05fUEhBU0U7CiAgICAgICAgICBmbHVzaE11dGF0aW9uRWZmZWN0cygpOwogICAgICAgICAgZmx1c2hMYXlvdXRFZmZlY3RzKCk7CiAgICAgICAgICBmbHVzaFNwYXduZWRXb3JrKCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGZsdXNoTXV0YXRpb25FZmZlY3RzKCkgewogICAgICAgIGlmIChwZW5kaW5nRWZmZWN0c1N0YXR1cyA9PT0gUEVORElOR19NVVRBVElPTl9QSEFTRSkgewogICAgICAgICAgcGVuZGluZ0VmZmVjdHNTdGF0dXMgPSBOT19QRU5ESU5HX0VGRkVDVFM7CiAgICAgICAgICB2YXIgcm9vdDIgPSBwZW5kaW5nRWZmZWN0c1Jvb3QsIGZpbmlzaGVkV29yayA9IHBlbmRpbmdGaW5pc2hlZFdvcmssIGxhbmVzID0gcGVuZGluZ0VmZmVjdHNMYW5lcywgcm9vdE11dGF0aW9uSGFzRWZmZWN0ID0gMCAhPT0gKGZpbmlzaGVkV29yay5mbGFncyAmIDEzODc4KTsKICAgICAgICAgIGlmICgwICE9PSAoZmluaXNoZWRXb3JrLnN1YnRyZWVGbGFncyAmIDEzODc4KSB8fCByb290TXV0YXRpb25IYXNFZmZlY3QpIHsKICAgICAgICAgICAgcm9vdE11dGF0aW9uSGFzRWZmZWN0ID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuVDsKICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuVCA9IG51bGw7CiAgICAgICAgICAgIHZhciBwcmV2aW91c1ByaW9yaXR5ID0gUmVhY3RET01TaGFyZWRJbnRlcm5hbHMucDsKICAgICAgICAgICAgUmVhY3RET01TaGFyZWRJbnRlcm5hbHMucCA9IERpc2NyZXRlRXZlbnRQcmlvcml0eTsKICAgICAgICAgICAgdmFyIHByZXZFeGVjdXRpb25Db250ZXh0ID0gZXhlY3V0aW9uQ29udGV4dDsKICAgICAgICAgICAgZXhlY3V0aW9uQ29udGV4dCB8PSBDb21taXRDb250ZXh0OwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGluUHJvZ3Jlc3NMYW5lcyA9IGxhbmVzOwogICAgICAgICAgICAgIGluUHJvZ3Jlc3NSb290ID0gcm9vdDI7CiAgICAgICAgICAgICAgY29tbWl0TXV0YXRpb25FZmZlY3RzT25GaWJlcihmaW5pc2hlZFdvcmssIHJvb3QyKTsKICAgICAgICAgICAgICBpblByb2dyZXNzUm9vdCA9IGluUHJvZ3Jlc3NMYW5lcyA9IG51bGw7CiAgICAgICAgICAgICAgbGFuZXMgPSBzZWxlY3Rpb25JbmZvcm1hdGlvbjsKICAgICAgICAgICAgICB2YXIgY3VyRm9jdXNlZEVsZW0gPSBnZXRBY3RpdmVFbGVtZW50RGVlcChyb290Mi5jb250YWluZXJJbmZvKSwgcHJpb3JGb2N1c2VkRWxlbSA9IGxhbmVzLmZvY3VzZWRFbGVtLCBwcmlvclNlbGVjdGlvblJhbmdlID0gbGFuZXMuc2VsZWN0aW9uUmFuZ2U7CiAgICAgICAgICAgICAgaWYgKGN1ckZvY3VzZWRFbGVtICE9PSBwcmlvckZvY3VzZWRFbGVtICYmIHByaW9yRm9jdXNlZEVsZW0gJiYgcHJpb3JGb2N1c2VkRWxlbS5vd25lckRvY3VtZW50ICYmIGNvbnRhaW5zTm9kZSgKICAgICAgICAgICAgICAgIHByaW9yRm9jdXNlZEVsZW0ub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsCiAgICAgICAgICAgICAgICBwcmlvckZvY3VzZWRFbGVtCiAgICAgICAgICAgICAgKSkgewogICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHByaW9yU2VsZWN0aW9uUmFuZ2UgJiYgaGFzU2VsZWN0aW9uQ2FwYWJpbGl0aWVzKHByaW9yRm9jdXNlZEVsZW0pKSB7CiAgICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IHByaW9yU2VsZWN0aW9uUmFuZ2Uuc3RhcnQsIGVuZCA9IHByaW9yU2VsZWN0aW9uUmFuZ2UuZW5kOwogICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IGVuZCAmJiAoZW5kID0gc3RhcnQpOwogICAgICAgICAgICAgICAgICBpZiAoInNlbGVjdGlvblN0YXJ0IiBpbiBwcmlvckZvY3VzZWRFbGVtKQogICAgICAgICAgICAgICAgICAgIHByaW9yRm9jdXNlZEVsZW0uc2VsZWN0aW9uU3RhcnQgPSBzdGFydCwgcHJpb3JGb2N1c2VkRWxlbS5zZWxlY3Rpb25FbmQgPSBNYXRoLm1pbigKICAgICAgICAgICAgICAgICAgICAgIGVuZCwKICAgICAgICAgICAgICAgICAgICAgIHByaW9yRm9jdXNlZEVsZW0udmFsdWUubGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRvYyA9IHByaW9yRm9jdXNlZEVsZW0ub3duZXJEb2N1bWVudCB8fCBkb2N1bWVudCwgd2luID0gZG9jICYmIGRvYy5kZWZhdWx0VmlldyB8fCB3aW5kb3c7CiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbi5nZXRTZWxlY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3Rpb24gPSB3aW4uZ2V0U2VsZWN0aW9uKCksIGxlbmd0aCA9IHByaW9yRm9jdXNlZEVsZW0udGV4dENvbnRlbnQubGVuZ3RoLCBzdGFydCRqc2NvbXAkMCA9IE1hdGgubWluKAogICAgICAgICAgICAgICAgICAgICAgICBwcmlvclNlbGVjdGlvblJhbmdlLnN0YXJ0LAogICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICksIGVuZCRqc2NvbXAkMCA9IHZvaWQgMCA9PT0gcHJpb3JTZWxlY3Rpb25SYW5nZS5lbmQgPyBzdGFydCRqc2NvbXAkMCA6IE1hdGgubWluKHByaW9yU2VsZWN0aW9uUmFuZ2UuZW5kLCBsZW5ndGgpOwogICAgICAgICAgICAgICAgICAgICAgIXNlbGVjdGlvbi5leHRlbmQgJiYgc3RhcnQkanNjb21wJDAgPiBlbmQkanNjb21wJDAgJiYgKGN1ckZvY3VzZWRFbGVtID0gZW5kJGpzY29tcCQwLCBlbmQkanNjb21wJDAgPSBzdGFydCRqc2NvbXAkMCwgc3RhcnQkanNjb21wJDAgPSBjdXJGb2N1c2VkRWxlbSk7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhcnRNYXJrZXIgPSBnZXROb2RlRm9yQ2hhcmFjdGVyT2Zmc2V0KAogICAgICAgICAgICAgICAgICAgICAgICBwcmlvckZvY3VzZWRFbGVtLAogICAgICAgICAgICAgICAgICAgICAgICBzdGFydCRqc2NvbXAkMAogICAgICAgICAgICAgICAgICAgICAgKSwgZW5kTWFya2VyID0gZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldCgKICAgICAgICAgICAgICAgICAgICAgICAgcHJpb3JGb2N1c2VkRWxlbSwKICAgICAgICAgICAgICAgICAgICAgICAgZW5kJGpzY29tcCQwCiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0TWFya2VyICYmIGVuZE1hcmtlciAmJiAoMSAhPT0gc2VsZWN0aW9uLnJhbmdlQ291bnQgfHwgc2VsZWN0aW9uLmFuY2hvck5vZGUgIT09IHN0YXJ0TWFya2VyLm5vZGUgfHwgc2VsZWN0aW9uLmFuY2hvck9mZnNldCAhPT0gc3RhcnRNYXJrZXIub2Zmc2V0IHx8IHNlbGVjdGlvbi5mb2N1c05vZGUgIT09IGVuZE1hcmtlci5ub2RlIHx8IHNlbGVjdGlvbi5mb2N1c09mZnNldCAhPT0gZW5kTWFya2VyLm9mZnNldCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJhbmdlID0gZG9jLmNyZWF0ZVJhbmdlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlLnNldFN0YXJ0KHN0YXJ0TWFya2VyLm5vZGUsIHN0YXJ0TWFya2VyLm9mZnNldCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQkanNjb21wJDAgPiBlbmQkanNjb21wJDAgPyAoc2VsZWN0aW9uLmFkZFJhbmdlKHJhbmdlKSwgc2VsZWN0aW9uLmV4dGVuZChlbmRNYXJrZXIubm9kZSwgZW5kTWFya2VyLm9mZnNldCkpIDogKHJhbmdlLnNldEVuZChlbmRNYXJrZXIubm9kZSwgZW5kTWFya2VyLm9mZnNldCksIHNlbGVjdGlvbi5hZGRSYW5nZShyYW5nZSkpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZG9jID0gW107CiAgICAgICAgICAgICAgICBmb3IgKHNlbGVjdGlvbiA9IHByaW9yRm9jdXNlZEVsZW07IHNlbGVjdGlvbiA9IHNlbGVjdGlvbi5wYXJlbnROb2RlOyApCiAgICAgICAgICAgICAgICAgIDEgPT09IHNlbGVjdGlvbi5ub2RlVHlwZSAmJiBkb2MucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogc2VsZWN0aW9uLAogICAgICAgICAgICAgICAgICAgIGxlZnQ6IHNlbGVjdGlvbi5zY3JvbGxMZWZ0LAogICAgICAgICAgICAgICAgICAgIHRvcDogc2VsZWN0aW9uLnNjcm9sbFRvcAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBwcmlvckZvY3VzZWRFbGVtLmZvY3VzICYmIHByaW9yRm9jdXNlZEVsZW0uZm9jdXMoKTsKICAgICAgICAgICAgICAgIGZvciAocHJpb3JGb2N1c2VkRWxlbSA9IDA7IHByaW9yRm9jdXNlZEVsZW0gPCBkb2MubGVuZ3RoOyBwcmlvckZvY3VzZWRFbGVtKyspIHsKICAgICAgICAgICAgICAgICAgdmFyIGluZm8gPSBkb2NbcHJpb3JGb2N1c2VkRWxlbV07CiAgICAgICAgICAgICAgICAgIGluZm8uZWxlbWVudC5zY3JvbGxMZWZ0ID0gaW5mby5sZWZ0OwogICAgICAgICAgICAgICAgICBpbmZvLmVsZW1lbnQuc2Nyb2xsVG9wID0gaW5mby50b3A7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9lbmFibGVkID0gISFldmVudHNFbmFibGVkOwogICAgICAgICAgICAgIHNlbGVjdGlvbkluZm9ybWF0aW9uID0gZXZlbnRzRW5hYmxlZCA9IG51bGw7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgZXhlY3V0aW9uQ29udGV4dCA9IHByZXZFeGVjdXRpb25Db250ZXh0LCBSZWFjdERPTVNoYXJlZEludGVybmFscy5wID0gcHJldmlvdXNQcmlvcml0eSwgUmVhY3RTaGFyZWRJbnRlcm5hbHMuVCA9IHJvb3RNdXRhdGlvbkhhc0VmZmVjdDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcm9vdDIuY3VycmVudCA9IGZpbmlzaGVkV29yazsKICAgICAgICAgIHBlbmRpbmdFZmZlY3RzU3RhdHVzID0gUEVORElOR19MQVlPVVRfUEhBU0U7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGZsdXNoTGF5b3V0RWZmZWN0cygpIHsKICAgICAgICBpZiAocGVuZGluZ0VmZmVjdHNTdGF0dXMgPT09IFBFTkRJTkdfTEFZT1VUX1BIQVNFKSB7CiAgICAgICAgICBwZW5kaW5nRWZmZWN0c1N0YXR1cyA9IE5PX1BFTkRJTkdfRUZGRUNUUzsKICAgICAgICAgIHZhciByb290MiA9IHBlbmRpbmdFZmZlY3RzUm9vdCwgZmluaXNoZWRXb3JrID0gcGVuZGluZ0ZpbmlzaGVkV29yaywgbGFuZXMgPSBwZW5kaW5nRWZmZWN0c0xhbmVzLCByb290SGFzTGF5b3V0RWZmZWN0ID0gMCAhPT0gKGZpbmlzaGVkV29yay5mbGFncyAmIDg3NzIpOwogICAgICAgICAgaWYgKDAgIT09IChmaW5pc2hlZFdvcmsuc3VidHJlZUZsYWdzICYgODc3MikgfHwgcm9vdEhhc0xheW91dEVmZmVjdCkgewogICAgICAgICAgICByb290SGFzTGF5b3V0RWZmZWN0ID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuVDsKICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuVCA9IG51bGw7CiAgICAgICAgICAgIHZhciBwcmV2aW91c1ByaW9yaXR5ID0gUmVhY3RET01TaGFyZWRJbnRlcm5hbHMucDsKICAgICAgICAgICAgUmVhY3RET01TaGFyZWRJbnRlcm5hbHMucCA9IERpc2NyZXRlRXZlbnRQcmlvcml0eTsKICAgICAgICAgICAgdmFyIHByZXZFeGVjdXRpb25Db250ZXh0ID0gZXhlY3V0aW9uQ29udGV4dDsKICAgICAgICAgICAgZXhlY3V0aW9uQ29udGV4dCB8PSBDb21taXRDb250ZXh0OwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIG51bGwgIT09IGluamVjdGVkUHJvZmlsaW5nSG9va3MgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGluamVjdGVkUHJvZmlsaW5nSG9va3MubWFya0xheW91dEVmZmVjdHNTdGFydGVkICYmIGluamVjdGVkUHJvZmlsaW5nSG9va3MubWFya0xheW91dEVmZmVjdHNTdGFydGVkKGxhbmVzKSwgaW5Qcm9ncmVzc0xhbmVzID0gbGFuZXMsIGluUHJvZ3Jlc3NSb290ID0gcm9vdDIsIGNvbW1pdExheW91dEVmZmVjdE9uRmliZXIoCiAgICAgICAgICAgICAgICByb290MiwKICAgICAgICAgICAgICAgIGZpbmlzaGVkV29yay5hbHRlcm5hdGUsCiAgICAgICAgICAgICAgICBmaW5pc2hlZFdvcmsKICAgICAgICAgICAgICApLCBpblByb2dyZXNzUm9vdCA9IGluUHJvZ3Jlc3NMYW5lcyA9IG51bGwsIG51bGwgIT09IGluamVjdGVkUHJvZmlsaW5nSG9va3MgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGluamVjdGVkUHJvZmlsaW5nSG9va3MubWFya0xheW91dEVmZmVjdHNTdG9wcGVkICYmIGluamVjdGVkUHJvZmlsaW5nSG9va3MubWFya0xheW91dEVmZmVjdHNTdG9wcGVkKCk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgZXhlY3V0aW9uQ29udGV4dCA9IHByZXZFeGVjdXRpb25Db250ZXh0LCBSZWFjdERPTVNoYXJlZEludGVybmFscy5wID0gcHJldmlvdXNQcmlvcml0eSwgUmVhY3RTaGFyZWRJbnRlcm5hbHMuVCA9IHJvb3RIYXNMYXlvdXRFZmZlY3Q7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHBlbmRpbmdFZmZlY3RzU3RhdHVzID0gUEVORElOR19BRlRFUl9NVVRBVElPTl9QSEFTRTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZmx1c2hTcGF3bmVkV29yaygpIHsKICAgICAgICBpZiAocGVuZGluZ0VmZmVjdHNTdGF0dXMgPT09IFBFTkRJTkdfU1BBV05FRF9XT1JLIHx8IHBlbmRpbmdFZmZlY3RzU3RhdHVzID09PSBQRU5ESU5HX0FGVEVSX01VVEFUSU9OX1BIQVNFKSB7CiAgICAgICAgICBwZW5kaW5nRWZmZWN0c1N0YXR1cyA9IE5PX1BFTkRJTkdfRUZGRUNUUzsKICAgICAgICAgIHJlcXVlc3RQYWludCgpOwogICAgICAgICAgdmFyIHJvb3QyID0gcGVuZGluZ0VmZmVjdHNSb290LCBmaW5pc2hlZFdvcmsgPSBwZW5kaW5nRmluaXNoZWRXb3JrLCBsYW5lcyA9IHBlbmRpbmdFZmZlY3RzTGFuZXMsIHJlY292ZXJhYmxlRXJyb3JzID0gcGVuZGluZ1JlY292ZXJhYmxlRXJyb3JzLCByb290RGlkSGF2ZVBhc3NpdmVFZmZlY3RzID0gMCAhPT0gKGZpbmlzaGVkV29yay5zdWJ0cmVlRmxhZ3MgJiAxMDI1NikgfHwgMCAhPT0gKGZpbmlzaGVkV29yay5mbGFncyAmIDEwMjU2KTsKICAgICAgICAgIHJvb3REaWRIYXZlUGFzc2l2ZUVmZmVjdHMgPyBwZW5kaW5nRWZmZWN0c1N0YXR1cyA9IFBFTkRJTkdfUEFTU0lWRV9QSEFTRSA6IChwZW5kaW5nRWZmZWN0c1N0YXR1cyA9IE5PX1BFTkRJTkdfRUZGRUNUUywgcGVuZGluZ0ZpbmlzaGVkV29yayA9IHBlbmRpbmdFZmZlY3RzUm9vdCA9IG51bGwsIHJlbGVhc2VSb290UG9vbGVkQ2FjaGUocm9vdDIsIHJvb3QyLnBlbmRpbmdMYW5lcyksIG5lc3RlZFBhc3NpdmVVcGRhdGVDb3VudCA9IDAsIHJvb3RXaXRoUGFzc2l2ZU5lc3RlZFVwZGF0ZXMgPSBudWxsKTsKICAgICAgICAgIHZhciByZW1haW5pbmdMYW5lcyA9IHJvb3QyLnBlbmRpbmdMYW5lczsKICAgICAgICAgIDAgPT09IHJlbWFpbmluZ0xhbmVzICYmIChsZWdhY3lFcnJvckJvdW5kYXJpZXNUaGF0QWxyZWFkeUZhaWxlZCA9IG51bGwpOwogICAgICAgICAgcm9vdERpZEhhdmVQYXNzaXZlRWZmZWN0cyB8fCBjb21taXREb3VibGVJbnZva2VFZmZlY3RzSW5ERVYocm9vdDIpOwogICAgICAgICAgcm9vdERpZEhhdmVQYXNzaXZlRWZmZWN0cyA9IGxhbmVzVG9FdmVudFByaW9yaXR5KGxhbmVzKTsKICAgICAgICAgIGZpbmlzaGVkV29yayA9IGZpbmlzaGVkV29yay5zdGF0ZU5vZGU7CiAgICAgICAgICBpZiAoaW5qZWN0ZWRIb29rICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBpbmplY3RlZEhvb2sub25Db21taXRGaWJlclJvb3QpCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgdmFyIGRpZEVycm9yID0gMTI4ID09PSAoZmluaXNoZWRXb3JrLmN1cnJlbnQuZmxhZ3MgJiAxMjgpOwogICAgICAgICAgICAgIHN3aXRjaCAocm9vdERpZEhhdmVQYXNzaXZlRWZmZWN0cykgewogICAgICAgICAgICAgICAgY2FzZSBEaXNjcmV0ZUV2ZW50UHJpb3JpdHk6CiAgICAgICAgICAgICAgICAgIHZhciBzY2hlZHVsZXJQcmlvcml0eSA9IEltbWVkaWF0ZVByaW9yaXR5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgQ29udGludW91c0V2ZW50UHJpb3JpdHk6CiAgICAgICAgICAgICAgICAgIHNjaGVkdWxlclByaW9yaXR5ID0gVXNlckJsb2NraW5nUHJpb3JpdHk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBEZWZhdWx0RXZlbnRQcmlvcml0eToKICAgICAgICAgICAgICAgICAgc2NoZWR1bGVyUHJpb3JpdHkgPSBOb3JtYWxQcmlvcml0eSQxOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgSWRsZUV2ZW50UHJpb3JpdHk6CiAgICAgICAgICAgICAgICAgIHNjaGVkdWxlclByaW9yaXR5ID0gSWRsZVByaW9yaXR5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgIHNjaGVkdWxlclByaW9yaXR5ID0gTm9ybWFsUHJpb3JpdHkkMTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaW5qZWN0ZWRIb29rLm9uQ29tbWl0RmliZXJSb290KAogICAgICAgICAgICAgICAgcmVuZGVyZXJJRCwKICAgICAgICAgICAgICAgIGZpbmlzaGVkV29yaywKICAgICAgICAgICAgICAgIHNjaGVkdWxlclByaW9yaXR5LAogICAgICAgICAgICAgICAgZGlkRXJyb3IKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICBoYXNMb2dnZWRFcnJvciB8fCAoaGFzTG9nZ2VkRXJyb3IgPSB0cnVlLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICAgIlJlYWN0IGluc3RydW1lbnRhdGlvbiBlbmNvdW50ZXJlZCBhbiBlcnJvcjogJXMiLAogICAgICAgICAgICAgICAgZXJyCiAgICAgICAgICAgICAgKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIGlzRGV2VG9vbHNQcmVzZW50ICYmIHJvb3QyLm1lbW9pemVkVXBkYXRlcnMuY2xlYXIoKTsKICAgICAgICAgIG9uQ29tbWl0Um9vdCgpOwogICAgICAgICAgaWYgKG51bGwgIT09IHJlY292ZXJhYmxlRXJyb3JzKSB7CiAgICAgICAgICAgIGRpZEVycm9yID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuVDsKICAgICAgICAgICAgc2NoZWR1bGVyUHJpb3JpdHkgPSBSZWFjdERPTVNoYXJlZEludGVybmFscy5wOwogICAgICAgICAgICBSZWFjdERPTVNoYXJlZEludGVybmFscy5wID0gRGlzY3JldGVFdmVudFByaW9yaXR5OwogICAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5UID0gbnVsbDsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICB2YXIgb25SZWNvdmVyYWJsZUVycm9yID0gcm9vdDIub25SZWNvdmVyYWJsZUVycm9yOwogICAgICAgICAgICAgIGZvciAoZmluaXNoZWRXb3JrID0gMDsgZmluaXNoZWRXb3JrIDwgcmVjb3ZlcmFibGVFcnJvcnMubGVuZ3RoOyBmaW5pc2hlZFdvcmsrKykgewogICAgICAgICAgICAgICAgdmFyIHJlY292ZXJhYmxlRXJyb3IgPSByZWNvdmVyYWJsZUVycm9yc1tmaW5pc2hlZFdvcmtdLCBlcnJvckluZm8gPSBtYWtlRXJyb3JJbmZvKHJlY292ZXJhYmxlRXJyb3Iuc3RhY2spOwogICAgICAgICAgICAgICAgcnVuV2l0aEZpYmVySW5ERVYoCiAgICAgICAgICAgICAgICAgIHJlY292ZXJhYmxlRXJyb3Iuc291cmNlLAogICAgICAgICAgICAgICAgICBvblJlY292ZXJhYmxlRXJyb3IsCiAgICAgICAgICAgICAgICAgIHJlY292ZXJhYmxlRXJyb3IudmFsdWUsCiAgICAgICAgICAgICAgICAgIGVycm9ySW5mbwogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuVCA9IGRpZEVycm9yLCBSZWFjdERPTVNoYXJlZEludGVybmFscy5wID0gc2NoZWR1bGVyUHJpb3JpdHk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIDAgIT09IChwZW5kaW5nRWZmZWN0c0xhbmVzICYgMykgJiYgZmx1c2hQZW5kaW5nRWZmZWN0cygpOwogICAgICAgICAgZW5zdXJlUm9vdElzU2NoZWR1bGVkKHJvb3QyKTsKICAgICAgICAgIHJlbWFpbmluZ0xhbmVzID0gcm9vdDIucGVuZGluZ0xhbmVzOwogICAgICAgICAgMCAhPT0gKGxhbmVzICYgNDE5NDA5MCkgJiYgMCAhPT0gKHJlbWFpbmluZ0xhbmVzICYgNDIpID8gKG5lc3RlZFVwZGF0ZVNjaGVkdWxlZCA9IHRydWUsIHJvb3QyID09PSByb290V2l0aE5lc3RlZFVwZGF0ZXMgPyBuZXN0ZWRVcGRhdGVDb3VudCsrIDogKG5lc3RlZFVwZGF0ZUNvdW50ID0gMCwgcm9vdFdpdGhOZXN0ZWRVcGRhdGVzID0gcm9vdDIpKSA6IG5lc3RlZFVwZGF0ZUNvdW50ID0gMDsKICAgICAgICAgIGZsdXNoU3luY1dvcmtBY3Jvc3NSb290c19pbXBsKDAsIGZhbHNlKTsKICAgICAgICAgIG1hcmtDb21taXRTdG9wcGVkKCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1ha2VFcnJvckluZm8oY29tcG9uZW50U3RhY2spIHsKICAgICAgICBjb21wb25lbnRTdGFjayA9IHsgY29tcG9uZW50U3RhY2sgfTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29tcG9uZW50U3RhY2ssICJkaWdlc3QiLCB7CiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICdZb3UgYXJlIGFjY2Vzc2luZyAiZGlnZXN0IiBmcm9tIHRoZSBlcnJvckluZm8gb2JqZWN0IHBhc3NlZCB0byBvblJlY292ZXJhYmxlRXJyb3IuIFRoaXMgcHJvcGVydHkgaXMgbm8gbG9uZ2VyIHByb3ZpZGVkIGFzIHBhcnQgb2YgZXJyb3JJbmZvIGJ1dCBjYW4gYmUgYWNjZXNzZWQgYXMgYSBwcm9wZXJ0eSBvZiB0aGUgRXJyb3IgaW5zdGFuY2UgaXRzZWxmLicKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICByZXR1cm4gY29tcG9uZW50U3RhY2s7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmVsZWFzZVJvb3RQb29sZWRDYWNoZShyb290MiwgcmVtYWluaW5nTGFuZXMpIHsKICAgICAgICAwID09PSAocm9vdDIucG9vbGVkQ2FjaGVMYW5lcyAmPSByZW1haW5pbmdMYW5lcykgJiYgKHJlbWFpbmluZ0xhbmVzID0gcm9vdDIucG9vbGVkQ2FjaGUsIG51bGwgIT0gcmVtYWluaW5nTGFuZXMgJiYgKHJvb3QyLnBvb2xlZENhY2hlID0gbnVsbCwgcmVsZWFzZUNhY2hlKHJlbWFpbmluZ0xhbmVzKSkpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGZsdXNoUGVuZGluZ0VmZmVjdHMod2FzRGVsYXllZENvbW1pdCkgewogICAgICAgIGZsdXNoTXV0YXRpb25FZmZlY3RzKCk7CiAgICAgICAgZmx1c2hMYXlvdXRFZmZlY3RzKCk7CiAgICAgICAgZmx1c2hTcGF3bmVkV29yaygpOwogICAgICAgIHJldHVybiBmbHVzaFBhc3NpdmVFZmZlY3RzKHdhc0RlbGF5ZWRDb21taXQpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGZsdXNoUGFzc2l2ZUVmZmVjdHMoKSB7CiAgICAgICAgaWYgKHBlbmRpbmdFZmZlY3RzU3RhdHVzICE9PSBQRU5ESU5HX1BBU1NJVkVfUEhBU0UpIHJldHVybiBmYWxzZTsKICAgICAgICB2YXIgcm9vdDIgPSBwZW5kaW5nRWZmZWN0c1Jvb3QsIHJlbWFpbmluZ0xhbmVzID0gcGVuZGluZ0VmZmVjdHNSZW1haW5pbmdMYW5lczsKICAgICAgICBwZW5kaW5nRWZmZWN0c1JlbWFpbmluZ0xhbmVzID0gMDsKICAgICAgICB2YXIgcmVuZGVyUHJpb3JpdHkgPSBsYW5lc1RvRXZlbnRQcmlvcml0eShwZW5kaW5nRWZmZWN0c0xhbmVzKSwgcHJpb3JpdHkgPSAwID09PSBEZWZhdWx0RXZlbnRQcmlvcml0eSB8fCBEZWZhdWx0RXZlbnRQcmlvcml0eSA+IHJlbmRlclByaW9yaXR5ID8gRGVmYXVsdEV2ZW50UHJpb3JpdHkgOiByZW5kZXJQcmlvcml0eTsKICAgICAgICByZW5kZXJQcmlvcml0eSA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLlQ7CiAgICAgICAgdmFyIHByZXZpb3VzUHJpb3JpdHkgPSBSZWFjdERPTVNoYXJlZEludGVybmFscy5wOwogICAgICAgIHRyeSB7CiAgICAgICAgICBSZWFjdERPTVNoYXJlZEludGVybmFscy5wID0gcHJpb3JpdHk7CiAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5UID0gbnVsbDsKICAgICAgICAgIHByaW9yaXR5ID0gcGVuZGluZ1Bhc3NpdmVUcmFuc2l0aW9uczsKICAgICAgICAgIHBlbmRpbmdQYXNzaXZlVHJhbnNpdGlvbnMgPSBudWxsOwogICAgICAgICAgdmFyIHJvb3QkanNjb21wJDAgPSBwZW5kaW5nRWZmZWN0c1Jvb3QsIGxhbmVzID0gcGVuZGluZ0VmZmVjdHNMYW5lczsKICAgICAgICAgIHBlbmRpbmdFZmZlY3RzU3RhdHVzID0gTk9fUEVORElOR19FRkZFQ1RTOwogICAgICAgICAgcGVuZGluZ0ZpbmlzaGVkV29yayA9IHBlbmRpbmdFZmZlY3RzUm9vdCA9IG51bGw7CiAgICAgICAgICBwZW5kaW5nRWZmZWN0c0xhbmVzID0gMDsKICAgICAgICAgIGlmICgoZXhlY3V0aW9uQ29udGV4dCAmIChSZW5kZXJDb250ZXh0IHwgQ29tbWl0Q29udGV4dCkpICE9PSBOb0NvbnRleHQpCiAgICAgICAgICAgIHRocm93IEVycm9yKCJDYW5ub3QgZmx1c2ggcGFzc2l2ZSBlZmZlY3RzIHdoaWxlIGFscmVhZHkgcmVuZGVyaW5nLiIpOwogICAgICAgICAgaXNGbHVzaGluZ1Bhc3NpdmVFZmZlY3RzID0gdHJ1ZTsKICAgICAgICAgIGRpZFNjaGVkdWxlVXBkYXRlRHVyaW5nUGFzc2l2ZUVmZmVjdHMgPSBmYWxzZTsKICAgICAgICAgIG51bGwgIT09IGluamVjdGVkUHJvZmlsaW5nSG9va3MgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGluamVjdGVkUHJvZmlsaW5nSG9va3MubWFya1Bhc3NpdmVFZmZlY3RzU3RhcnRlZCAmJiBpbmplY3RlZFByb2ZpbGluZ0hvb2tzLm1hcmtQYXNzaXZlRWZmZWN0c1N0YXJ0ZWQobGFuZXMpOwogICAgICAgICAgdmFyIHByZXZFeGVjdXRpb25Db250ZXh0ID0gZXhlY3V0aW9uQ29udGV4dDsKICAgICAgICAgIGV4ZWN1dGlvbkNvbnRleHQgfD0gQ29tbWl0Q29udGV4dDsKICAgICAgICAgIGNvbW1pdFBhc3NpdmVVbm1vdW50T25GaWJlcihyb290JGpzY29tcCQwLmN1cnJlbnQpOwogICAgICAgICAgY29tbWl0UGFzc2l2ZU1vdW50T25GaWJlcigKICAgICAgICAgICAgcm9vdCRqc2NvbXAkMCwKICAgICAgICAgICAgcm9vdCRqc2NvbXAkMC5jdXJyZW50LAogICAgICAgICAgICBsYW5lcywKICAgICAgICAgICAgcHJpb3JpdHkKICAgICAgICAgICk7CiAgICAgICAgICBudWxsICE9PSBpbmplY3RlZFByb2ZpbGluZ0hvb2tzICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBpbmplY3RlZFByb2ZpbGluZ0hvb2tzLm1hcmtQYXNzaXZlRWZmZWN0c1N0b3BwZWQgJiYgaW5qZWN0ZWRQcm9maWxpbmdIb29rcy5tYXJrUGFzc2l2ZUVmZmVjdHNTdG9wcGVkKCk7CiAgICAgICAgICBjb21taXREb3VibGVJbnZva2VFZmZlY3RzSW5ERVYocm9vdCRqc2NvbXAkMCk7CiAgICAgICAgICBleGVjdXRpb25Db250ZXh0ID0gcHJldkV4ZWN1dGlvbkNvbnRleHQ7CiAgICAgICAgICBmbHVzaFN5bmNXb3JrQWNyb3NzUm9vdHNfaW1wbCgwLCBmYWxzZSk7CiAgICAgICAgICBkaWRTY2hlZHVsZVVwZGF0ZUR1cmluZ1Bhc3NpdmVFZmZlY3RzID8gcm9vdCRqc2NvbXAkMCA9PT0gcm9vdFdpdGhQYXNzaXZlTmVzdGVkVXBkYXRlcyA/IG5lc3RlZFBhc3NpdmVVcGRhdGVDb3VudCsrIDogKG5lc3RlZFBhc3NpdmVVcGRhdGVDb3VudCA9IDAsIHJvb3RXaXRoUGFzc2l2ZU5lc3RlZFVwZGF0ZXMgPSByb290JGpzY29tcCQwKSA6IG5lc3RlZFBhc3NpdmVVcGRhdGVDb3VudCA9IDA7CiAgICAgICAgICBkaWRTY2hlZHVsZVVwZGF0ZUR1cmluZ1Bhc3NpdmVFZmZlY3RzID0gaXNGbHVzaGluZ1Bhc3NpdmVFZmZlY3RzID0gZmFsc2U7CiAgICAgICAgICBpZiAoaW5qZWN0ZWRIb29rICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBpbmplY3RlZEhvb2sub25Qb3N0Q29tbWl0RmliZXJSb290KQogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGluamVjdGVkSG9vay5vblBvc3RDb21taXRGaWJlclJvb3QocmVuZGVyZXJJRCwgcm9vdCRqc2NvbXAkMCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgIGhhc0xvZ2dlZEVycm9yIHx8IChoYXNMb2dnZWRFcnJvciA9IHRydWUsIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgICAiUmVhY3QgaW5zdHJ1bWVudGF0aW9uIGVuY291bnRlcmVkIGFuIGVycm9yOiAlcyIsCiAgICAgICAgICAgICAgICBlcnIKICAgICAgICAgICAgICApKTsKICAgICAgICAgICAgfQogICAgICAgICAgdmFyIHN0YXRlTm9kZSA9IHJvb3QkanNjb21wJDAuY3VycmVudC5zdGF0ZU5vZGU7CiAgICAgICAgICBzdGF0ZU5vZGUuZWZmZWN0RHVyYXRpb24gPSAwOwogICAgICAgICAgc3RhdGVOb2RlLnBhc3NpdmVFZmZlY3REdXJhdGlvbiA9IDA7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgUmVhY3RET01TaGFyZWRJbnRlcm5hbHMucCA9IHByZXZpb3VzUHJpb3JpdHksIFJlYWN0U2hhcmVkSW50ZXJuYWxzLlQgPSByZW5kZXJQcmlvcml0eSwgcmVsZWFzZVJvb3RQb29sZWRDYWNoZShyb290MiwgcmVtYWluaW5nTGFuZXMpOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBjYXB0dXJlQ29tbWl0UGhhc2VFcnJvck9uUm9vdChyb290RmliZXIsIHNvdXJjZUZpYmVyLCBlcnJvcikgewogICAgICAgIHNvdXJjZUZpYmVyID0gY3JlYXRlQ2FwdHVyZWRWYWx1ZUF0RmliZXIoZXJyb3IsIHNvdXJjZUZpYmVyKTsKICAgICAgICBzb3VyY2VGaWJlciA9IGNyZWF0ZVJvb3RFcnJvclVwZGF0ZShyb290RmliZXIuc3RhdGVOb2RlLCBzb3VyY2VGaWJlciwgMik7CiAgICAgICAgcm9vdEZpYmVyID0gZW5xdWV1ZVVwZGF0ZShyb290RmliZXIsIHNvdXJjZUZpYmVyLCAyKTsKICAgICAgICBudWxsICE9PSByb290RmliZXIgJiYgKG1hcmtSb290VXBkYXRlZCQxKHJvb3RGaWJlciwgMiksIGVuc3VyZVJvb3RJc1NjaGVkdWxlZChyb290RmliZXIpKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjYXB0dXJlQ29tbWl0UGhhc2VFcnJvcihzb3VyY2VGaWJlciwgbmVhcmVzdE1vdW50ZWRBbmNlc3RvciwgZXJyb3IpIHsKICAgICAgICBpc1J1bm5pbmdJbnNlcnRpb25FZmZlY3QgPSBmYWxzZTsKICAgICAgICBpZiAoMyA9PT0gc291cmNlRmliZXIudGFnKQogICAgICAgICAgY2FwdHVyZUNvbW1pdFBoYXNlRXJyb3JPblJvb3Qoc291cmNlRmliZXIsIHNvdXJjZUZpYmVyLCBlcnJvcik7CiAgICAgICAgZWxzZSB7CiAgICAgICAgICBmb3IgKDsgbnVsbCAhPT0gbmVhcmVzdE1vdW50ZWRBbmNlc3RvcjsgKSB7CiAgICAgICAgICAgIGlmICgzID09PSBuZWFyZXN0TW91bnRlZEFuY2VzdG9yLnRhZykgewogICAgICAgICAgICAgIGNhcHR1cmVDb21taXRQaGFzZUVycm9yT25Sb290KAogICAgICAgICAgICAgICAgbmVhcmVzdE1vdW50ZWRBbmNlc3RvciwKICAgICAgICAgICAgICAgIHNvdXJjZUZpYmVyLAogICAgICAgICAgICAgICAgZXJyb3IKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoMSA9PT0gbmVhcmVzdE1vdW50ZWRBbmNlc3Rvci50YWcpIHsKICAgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBuZWFyZXN0TW91bnRlZEFuY2VzdG9yLnN0YXRlTm9kZTsKICAgICAgICAgICAgICBpZiAoImZ1bmN0aW9uIiA9PT0gdHlwZW9mIG5lYXJlc3RNb3VudGVkQW5jZXN0b3IudHlwZS5nZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IgfHwgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGluc3RhbmNlLmNvbXBvbmVudERpZENhdGNoICYmIChudWxsID09PSBsZWdhY3lFcnJvckJvdW5kYXJpZXNUaGF0QWxyZWFkeUZhaWxlZCB8fCAhbGVnYWN5RXJyb3JCb3VuZGFyaWVzVGhhdEFscmVhZHlGYWlsZWQuaGFzKGluc3RhbmNlKSkpIHsKICAgICAgICAgICAgICAgIHNvdXJjZUZpYmVyID0gY3JlYXRlQ2FwdHVyZWRWYWx1ZUF0RmliZXIoZXJyb3IsIHNvdXJjZUZpYmVyKTsKICAgICAgICAgICAgICAgIGVycm9yID0gY3JlYXRlQ2xhc3NFcnJvclVwZGF0ZSgyKTsKICAgICAgICAgICAgICAgIGluc3RhbmNlID0gZW5xdWV1ZVVwZGF0ZShuZWFyZXN0TW91bnRlZEFuY2VzdG9yLCBlcnJvciwgMik7CiAgICAgICAgICAgICAgICBudWxsICE9PSBpbnN0YW5jZSAmJiAoaW5pdGlhbGl6ZUNsYXNzRXJyb3JVcGRhdGUoCiAgICAgICAgICAgICAgICAgIGVycm9yLAogICAgICAgICAgICAgICAgICBpbnN0YW5jZSwKICAgICAgICAgICAgICAgICAgbmVhcmVzdE1vdW50ZWRBbmNlc3RvciwKICAgICAgICAgICAgICAgICAgc291cmNlRmliZXIKICAgICAgICAgICAgICAgICksIG1hcmtSb290VXBkYXRlZCQxKGluc3RhbmNlLCAyKSwgZW5zdXJlUm9vdElzU2NoZWR1bGVkKGluc3RhbmNlKSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIG5lYXJlc3RNb3VudGVkQW5jZXN0b3IgPSBuZWFyZXN0TW91bnRlZEFuY2VzdG9yLnJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICJJbnRlcm5hbCBSZWFjdCBlcnJvcjogQXR0ZW1wdGVkIHRvIGNhcHR1cmUgYSBjb21taXQgcGhhc2UgZXJyb3IgaW5zaWRlIGEgZGV0YWNoZWQgdHJlZS4gVGhpcyBpbmRpY2F0ZXMgYSBidWcgaW4gUmVhY3QuIFBvdGVudGlhbCBjYXVzZXMgaW5jbHVkZSBkZWxldGluZyB0aGUgc2FtZSBmaWJlciBtb3JlIHRoYW4gb25jZSwgY29tbWl0dGluZyBhbiBhbHJlYWR5LWZpbmlzaGVkIHRyZWUsIG9yIGFuIGluY29uc2lzdGVudCByZXR1cm4gcG9pbnRlci5cblxuRXJyb3IgbWVzc2FnZTpcblxuJXMiLAogICAgICAgICAgICBlcnJvcgogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gYXR0YWNoUGluZ0xpc3RlbmVyKHJvb3QyLCB3YWtlYWJsZSwgbGFuZXMpIHsKICAgICAgICB2YXIgcGluZ0NhY2hlID0gcm9vdDIucGluZ0NhY2hlOwogICAgICAgIGlmIChudWxsID09PSBwaW5nQ2FjaGUpIHsKICAgICAgICAgIHBpbmdDYWNoZSA9IHJvb3QyLnBpbmdDYWNoZSA9IG5ldyBQb3NzaWJseVdlYWtNYXAoKTsKICAgICAgICAgIHZhciB0aHJlYWRJRHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogICAgICAgICAgcGluZ0NhY2hlLnNldCh3YWtlYWJsZSwgdGhyZWFkSURzKTsKICAgICAgICB9IGVsc2UKICAgICAgICAgIHRocmVhZElEcyA9IHBpbmdDYWNoZS5nZXQod2FrZWFibGUpLCB2b2lkIDAgPT09IHRocmVhZElEcyAmJiAodGhyZWFkSURzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSwgcGluZ0NhY2hlLnNldCh3YWtlYWJsZSwgdGhyZWFkSURzKSk7CiAgICAgICAgdGhyZWFkSURzLmhhcyhsYW5lcykgfHwgKHdvcmtJblByb2dyZXNzUm9vdERpZEF0dGFjaFBpbmdMaXN0ZW5lciA9IHRydWUsIHRocmVhZElEcy5hZGQobGFuZXMpLCBwaW5nQ2FjaGUgPSBwaW5nU3VzcGVuZGVkUm9vdC5iaW5kKG51bGwsIHJvb3QyLCB3YWtlYWJsZSwgbGFuZXMpLCBpc0RldlRvb2xzUHJlc2VudCAmJiByZXN0b3JlUGVuZGluZ1VwZGF0ZXJzKHJvb3QyLCBsYW5lcyksIHdha2VhYmxlLnRoZW4ocGluZ0NhY2hlLCBwaW5nQ2FjaGUpKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBwaW5nU3VzcGVuZGVkUm9vdChyb290Miwgd2FrZWFibGUsIHBpbmdlZExhbmVzKSB7CiAgICAgICAgdmFyIHBpbmdDYWNoZSA9IHJvb3QyLnBpbmdDYWNoZTsKICAgICAgICBudWxsICE9PSBwaW5nQ2FjaGUgJiYgcGluZ0NhY2hlLmRlbGV0ZSh3YWtlYWJsZSk7CiAgICAgICAgcm9vdDIucGluZ2VkTGFuZXMgfD0gcm9vdDIuc3VzcGVuZGVkTGFuZXMgJiBwaW5nZWRMYW5lczsKICAgICAgICByb290Mi53YXJtTGFuZXMgJj0gfnBpbmdlZExhbmVzOwogICAgICAgIGlzQ29uY3VycmVudEFjdEVudmlyb25tZW50KCkgJiYgbnVsbCA9PT0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuYWN0UXVldWUgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICJBIHN1c3BlbmRlZCByZXNvdXJjZSBmaW5pc2hlZCBsb2FkaW5nIGluc2lkZSBhIHRlc3QsIGJ1dCB0aGUgZXZlbnQgd2FzIG5vdCB3cmFwcGVkIGluIGFjdCguLi4pLlxuXG5XaGVuIHRlc3RpbmcsIGNvZGUgdGhhdCByZXNvbHZlcyBzdXNwZW5kZWQgZGF0YSBzaG91bGQgYmUgd3JhcHBlZCBpbnRvIGFjdCguLi4pOlxuXG5hY3QoKCkgPT4ge1xuICAvKiBmaW5pc2ggbG9hZGluZyBzdXNwZW5kZWQgZGF0YSAqL1xufSk7XG4vKiBhc3NlcnQgb24gdGhlIG91dHB1dCAqL1xuXG5UaGlzIGVuc3VyZXMgdGhhdCB5b3UncmUgdGVzdGluZyB0aGUgYmVoYXZpb3IgdGhlIHVzZXIgd291bGQgc2VlIGluIHRoZSBicm93c2VyLiBMZWFybiBtb3JlIGF0IGh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvd3JhcC10ZXN0cy13aXRoLWFjdCIKICAgICAgICApOwogICAgICAgIHdvcmtJblByb2dyZXNzUm9vdCA9PT0gcm9vdDIgJiYgKHdvcmtJblByb2dyZXNzUm9vdFJlbmRlckxhbmVzICYgcGluZ2VkTGFuZXMpID09PSBwaW5nZWRMYW5lcyAmJiAod29ya0luUHJvZ3Jlc3NSb290RXhpdFN0YXR1cyA9PT0gUm9vdFN1c3BlbmRlZFdpdGhEZWxheSB8fCB3b3JrSW5Qcm9ncmVzc1Jvb3RFeGl0U3RhdHVzID09PSBSb290U3VzcGVuZGVkICYmICh3b3JrSW5Qcm9ncmVzc1Jvb3RSZW5kZXJMYW5lcyAmIDYyOTE0NTYwKSA9PT0gd29ya0luUHJvZ3Jlc3NSb290UmVuZGVyTGFuZXMgJiYgbm93JDEoKSAtIGdsb2JhbE1vc3RSZWNlbnRGYWxsYmFja1RpbWUgPCBGQUxMQkFDS19USFJPVFRMRV9NUyA/IChleGVjdXRpb25Db250ZXh0ICYgUmVuZGVyQ29udGV4dCkgPT09IE5vQ29udGV4dCAmJiBwcmVwYXJlRnJlc2hTdGFjayhyb290MiwgMCkgOiB3b3JrSW5Qcm9ncmVzc1Jvb3RQaW5nZWRMYW5lcyB8PSBwaW5nZWRMYW5lcywgd29ya0luUHJvZ3Jlc3NTdXNwZW5kZWRSZXRyeUxhbmVzID09PSB3b3JrSW5Qcm9ncmVzc1Jvb3RSZW5kZXJMYW5lcyAmJiAod29ya0luUHJvZ3Jlc3NTdXNwZW5kZWRSZXRyeUxhbmVzID0gMCkpOwogICAgICAgIGVuc3VyZVJvb3RJc1NjaGVkdWxlZChyb290Mik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmV0cnlUaW1lZE91dEJvdW5kYXJ5KGJvdW5kYXJ5RmliZXIsIHJldHJ5TGFuZSkgewogICAgICAgIDAgPT09IHJldHJ5TGFuZSAmJiAocmV0cnlMYW5lID0gY2xhaW1OZXh0UmV0cnlMYW5lKCkpOwogICAgICAgIGJvdW5kYXJ5RmliZXIgPSBlbnF1ZXVlQ29uY3VycmVudFJlbmRlckZvckxhbmUoYm91bmRhcnlGaWJlciwgcmV0cnlMYW5lKTsKICAgICAgICBudWxsICE9PSBib3VuZGFyeUZpYmVyICYmIChtYXJrUm9vdFVwZGF0ZWQkMShib3VuZGFyeUZpYmVyLCByZXRyeUxhbmUpLCBlbnN1cmVSb290SXNTY2hlZHVsZWQoYm91bmRhcnlGaWJlcikpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJldHJ5RGVoeWRyYXRlZFN1c3BlbnNlQm91bmRhcnkoYm91bmRhcnlGaWJlcikgewogICAgICAgIHZhciBzdXNwZW5zZVN0YXRlID0gYm91bmRhcnlGaWJlci5tZW1vaXplZFN0YXRlLCByZXRyeUxhbmUgPSAwOwogICAgICAgIG51bGwgIT09IHN1c3BlbnNlU3RhdGUgJiYgKHJldHJ5TGFuZSA9IHN1c3BlbnNlU3RhdGUucmV0cnlMYW5lKTsKICAgICAgICByZXRyeVRpbWVkT3V0Qm91bmRhcnkoYm91bmRhcnlGaWJlciwgcmV0cnlMYW5lKTsKICAgICAgfQogICAgICBmdW5jdGlvbiByZXNvbHZlUmV0cnlXYWtlYWJsZShib3VuZGFyeUZpYmVyLCB3YWtlYWJsZSkgewogICAgICAgIHZhciByZXRyeUxhbmUgPSAwOwogICAgICAgIHN3aXRjaCAoYm91bmRhcnlGaWJlci50YWcpIHsKICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgIHZhciByZXRyeUNhY2hlID0gYm91bmRhcnlGaWJlci5zdGF0ZU5vZGU7CiAgICAgICAgICAgIHZhciBzdXNwZW5zZVN0YXRlID0gYm91bmRhcnlGaWJlci5tZW1vaXplZFN0YXRlOwogICAgICAgICAgICBudWxsICE9PSBzdXNwZW5zZVN0YXRlICYmIChyZXRyeUxhbmUgPSBzdXNwZW5zZVN0YXRlLnJldHJ5TGFuZSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgcmV0cnlDYWNoZSA9IGJvdW5kYXJ5RmliZXIuc3RhdGVOb2RlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgIHJldHJ5Q2FjaGUgPSBib3VuZGFyeUZpYmVyLnN0YXRlTm9kZS5fcmV0cnlDYWNoZTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICAgICAiUGluZ2VkIHVua25vd24gc3VzcGVuc2UgYm91bmRhcnkgdHlwZS4gVGhpcyBpcyBwcm9iYWJseSBhIGJ1ZyBpbiBSZWFjdC4iCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIG51bGwgIT09IHJldHJ5Q2FjaGUgJiYgcmV0cnlDYWNoZS5kZWxldGUod2FrZWFibGUpOwogICAgICAgIHJldHJ5VGltZWRPdXRCb3VuZGFyeShib3VuZGFyeUZpYmVyLCByZXRyeUxhbmUpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlY3Vyc2l2ZWx5VHJhdmVyc2VBbmREb3VibGVJbnZva2VFZmZlY3RzSW5ERVYocm9vdCRqc2NvbXAkMCwgcGFyZW50RmliZXIsIGlzSW5TdHJpY3RNb2RlKSB7CiAgICAgICAgaWYgKDAgIT09IChwYXJlbnRGaWJlci5zdWJ0cmVlRmxhZ3MgJiA2NzExNzA1NikpCiAgICAgICAgICBmb3IgKHBhcmVudEZpYmVyID0gcGFyZW50RmliZXIuY2hpbGQ7IG51bGwgIT09IHBhcmVudEZpYmVyOyApIHsKICAgICAgICAgICAgdmFyIHJvb3QyID0gcm9vdCRqc2NvbXAkMCwgZmliZXIgPSBwYXJlbnRGaWJlciwgaXNTdHJpY3RNb2RlRmliZXIgPSBmaWJlci50eXBlID09PSBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFOwogICAgICAgICAgICBpc1N0cmljdE1vZGVGaWJlciA9IGlzSW5TdHJpY3RNb2RlIHx8IGlzU3RyaWN0TW9kZUZpYmVyOwogICAgICAgICAgICAyMiAhPT0gZmliZXIudGFnID8gZmliZXIuZmxhZ3MgJiA2NzEwODg2NCA/IGlzU3RyaWN0TW9kZUZpYmVyICYmIHJ1bldpdGhGaWJlckluREVWKAogICAgICAgICAgICAgIGZpYmVyLAogICAgICAgICAgICAgIGRvdWJsZUludm9rZUVmZmVjdHNPbkZpYmVyLAogICAgICAgICAgICAgIHJvb3QyLAogICAgICAgICAgICAgIGZpYmVyLAogICAgICAgICAgICAgIChmaWJlci5tb2RlICYgTm9TdHJpY3RQYXNzaXZlRWZmZWN0c01vZGUpID09PSBOb01vZGUKICAgICAgICAgICAgKSA6IHJlY3Vyc2l2ZWx5VHJhdmVyc2VBbmREb3VibGVJbnZva2VFZmZlY3RzSW5ERVYoCiAgICAgICAgICAgICAgcm9vdDIsCiAgICAgICAgICAgICAgZmliZXIsCiAgICAgICAgICAgICAgaXNTdHJpY3RNb2RlRmliZXIKICAgICAgICAgICAgKSA6IG51bGwgPT09IGZpYmVyLm1lbW9pemVkU3RhdGUgJiYgKGlzU3RyaWN0TW9kZUZpYmVyICYmIGZpYmVyLmZsYWdzICYgODE5MiA/IHJ1bldpdGhGaWJlckluREVWKAogICAgICAgICAgICAgIGZpYmVyLAogICAgICAgICAgICAgIGRvdWJsZUludm9rZUVmZmVjdHNPbkZpYmVyLAogICAgICAgICAgICAgIHJvb3QyLAogICAgICAgICAgICAgIGZpYmVyCiAgICAgICAgICAgICkgOiBmaWJlci5zdWJ0cmVlRmxhZ3MgJiA2NzEwODg2NCAmJiBydW5XaXRoRmliZXJJbkRFVigKICAgICAgICAgICAgICBmaWJlciwKICAgICAgICAgICAgICByZWN1cnNpdmVseVRyYXZlcnNlQW5kRG91YmxlSW52b2tlRWZmZWN0c0luREVWLAogICAgICAgICAgICAgIHJvb3QyLAogICAgICAgICAgICAgIGZpYmVyLAogICAgICAgICAgICAgIGlzU3RyaWN0TW9kZUZpYmVyCiAgICAgICAgICAgICkpOwogICAgICAgICAgICBwYXJlbnRGaWJlciA9IHBhcmVudEZpYmVyLnNpYmxpbmc7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZG91YmxlSW52b2tlRWZmZWN0c09uRmliZXIocm9vdDIsIGZpYmVyKSB7CiAgICAgICAgdmFyIHNob3VsZERvdWJsZUludm9rZVBhc3NpdmVFZmZlY3RzID0gMiA8IGFyZ3VtZW50cy5sZW5ndGggJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMl0gPyBhcmd1bWVudHNbMl0gOiB0cnVlOwogICAgICAgIHNldElzU3RyaWN0TW9kZUZvckRldnRvb2xzKHRydWUpOwogICAgICAgIHRyeSB7CiAgICAgICAgICBkaXNhcHBlYXJMYXlvdXRFZmZlY3RzKGZpYmVyKSwgc2hvdWxkRG91YmxlSW52b2tlUGFzc2l2ZUVmZmVjdHMgJiYgZGlzY29ubmVjdFBhc3NpdmVFZmZlY3QoZmliZXIpLCByZWFwcGVhckxheW91dEVmZmVjdHMocm9vdDIsIGZpYmVyLmFsdGVybmF0ZSwgZmliZXIsIGZhbHNlKSwgc2hvdWxkRG91YmxlSW52b2tlUGFzc2l2ZUVmZmVjdHMgJiYgcmVjb25uZWN0UGFzc2l2ZUVmZmVjdHMocm9vdDIsIGZpYmVyLCAwLCBudWxsLCBmYWxzZSwgMCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIHNldElzU3RyaWN0TW9kZUZvckRldnRvb2xzKGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY29tbWl0RG91YmxlSW52b2tlRWZmZWN0c0luREVWKHJvb3QyKSB7CiAgICAgICAgdmFyIGRvdWJsZUludm9rZUVmZmVjdHMgPSB0cnVlOwogICAgICAgIHJvb3QyLmN1cnJlbnQubW9kZSAmIChTdHJpY3RMZWdhY3lNb2RlIHwgU3RyaWN0RWZmZWN0c01vZGUpIHx8IChkb3VibGVJbnZva2VFZmZlY3RzID0gZmFsc2UpOwogICAgICAgIHJlY3Vyc2l2ZWx5VHJhdmVyc2VBbmREb3VibGVJbnZva2VFZmZlY3RzSW5ERVYoCiAgICAgICAgICByb290MiwKICAgICAgICAgIHJvb3QyLmN1cnJlbnQsCiAgICAgICAgICBkb3VibGVJbnZva2VFZmZlY3RzCiAgICAgICAgKTsKICAgICAgfQogICAgICBmdW5jdGlvbiB3YXJuQWJvdXRVcGRhdGVPbk5vdFlldE1vdW50ZWRGaWJlckluREVWKGZpYmVyKSB7CiAgICAgICAgaWYgKChleGVjdXRpb25Db250ZXh0ICYgUmVuZGVyQ29udGV4dCkgPT09IE5vQ29udGV4dCkgewogICAgICAgICAgdmFyIHRhZyA9IGZpYmVyLnRhZzsKICAgICAgICAgIGlmICgzID09PSB0YWcgfHwgMSA9PT0gdGFnIHx8IDAgPT09IHRhZyB8fCAxMSA9PT0gdGFnIHx8IDE0ID09PSB0YWcgfHwgMTUgPT09IHRhZykgewogICAgICAgICAgICB0YWcgPSBnZXRDb21wb25lbnROYW1lRnJvbUZpYmVyKGZpYmVyKSB8fCAiUmVhY3RDb21wb25lbnQiOwogICAgICAgICAgICBpZiAobnVsbCAhPT0gZGlkV2FyblN0YXRlVXBkYXRlRm9yTm90WWV0TW91bnRlZENvbXBvbmVudCkgewogICAgICAgICAgICAgIGlmIChkaWRXYXJuU3RhdGVVcGRhdGVGb3JOb3RZZXRNb3VudGVkQ29tcG9uZW50Lmhhcyh0YWcpKSByZXR1cm47CiAgICAgICAgICAgICAgZGlkV2FyblN0YXRlVXBkYXRlRm9yTm90WWV0TW91bnRlZENvbXBvbmVudC5hZGQodGFnKTsKICAgICAgICAgICAgfSBlbHNlIGRpZFdhcm5TdGF0ZVVwZGF0ZUZvck5vdFlldE1vdW50ZWRDb21wb25lbnQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbdGFnXSk7CiAgICAgICAgICAgIHJ1bldpdGhGaWJlckluREVWKGZpYmVyLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICAgIkNhbid0IHBlcmZvcm0gYSBSZWFjdCBzdGF0ZSB1cGRhdGUgb24gYSBjb21wb25lbnQgdGhhdCBoYXNuJ3QgbW91bnRlZCB5ZXQuIFRoaXMgaW5kaWNhdGVzIHRoYXQgeW91IGhhdmUgYSBzaWRlLWVmZmVjdCBpbiB5b3VyIHJlbmRlciBmdW5jdGlvbiB0aGF0IGFzeW5jaHJvbm91c2x5IGxhdGVyIGNhbGxzIHRyaWVzIHRvIHVwZGF0ZSB0aGUgY29tcG9uZW50LiBNb3ZlIHRoaXMgd29yayB0byB1c2VFZmZlY3QgaW5zdGVhZC4iCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlc3RvcmVQZW5kaW5nVXBkYXRlcnMocm9vdDIsIGxhbmVzKSB7CiAgICAgICAgaXNEZXZUb29sc1ByZXNlbnQgJiYgcm9vdDIubWVtb2l6ZWRVcGRhdGVycy5mb3JFYWNoKGZ1bmN0aW9uKHNjaGVkdWxpbmdGaWJlcikgewogICAgICAgICAgYWRkRmliZXJUb0xhbmVzTWFwKHJvb3QyLCBzY2hlZHVsaW5nRmliZXIsIGxhbmVzKTsKICAgICAgICB9KTsKICAgICAgfQogICAgICBmdW5jdGlvbiBzY2hlZHVsZUNhbGxiYWNrJDEocHJpb3JpdHlMZXZlbCwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgYWN0UXVldWUgPSBSZWFjdFNoYXJlZEludGVybmFscy5hY3RRdWV1ZTsKICAgICAgICByZXR1cm4gbnVsbCAhPT0gYWN0UXVldWUgPyAoYWN0UXVldWUucHVzaChjYWxsYmFjayksIGZha2VBY3RDYWxsYmFja05vZGUkMSkgOiBzY2hlZHVsZUNhbGxiYWNrJDMocHJpb3JpdHlMZXZlbCwgY2FsbGJhY2spOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHdhcm5JZlVwZGF0ZXNOb3RXcmFwcGVkV2l0aEFjdERFVihmaWJlcikgewogICAgICAgIGlzQ29uY3VycmVudEFjdEVudmlyb25tZW50KCkgJiYgbnVsbCA9PT0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuYWN0UXVldWUgJiYgcnVuV2l0aEZpYmVySW5ERVYoZmliZXIsIGZ1bmN0aW9uKCkgewogICAgICAgICAgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIkFuIHVwZGF0ZSB0byAlcyBpbnNpZGUgYSB0ZXN0IHdhcyBub3Qgd3JhcHBlZCBpbiBhY3QoLi4uKS5cblxuV2hlbiB0ZXN0aW5nLCBjb2RlIHRoYXQgY2F1c2VzIFJlYWN0IHN0YXRlIHVwZGF0ZXMgc2hvdWxkIGJlIHdyYXBwZWQgaW50byBhY3QoLi4uKTpcblxuYWN0KCgpID0+IHtcbiAgLyogZmlyZSBldmVudHMgdGhhdCB1cGRhdGUgc3RhdGUgKi9cbn0pO1xuLyogYXNzZXJ0IG9uIHRoZSBvdXRwdXQgKi9cblxuVGhpcyBlbnN1cmVzIHRoYXQgeW91J3JlIHRlc3RpbmcgdGhlIGJlaGF2aW9yIHRoZSB1c2VyIHdvdWxkIHNlZSBpbiB0aGUgYnJvd3Nlci4gTGVhcm4gbW9yZSBhdCBodHRwczovL3JlYWN0LmRldi9saW5rL3dyYXAtdGVzdHMtd2l0aC1hY3QiLAogICAgICAgICAgICBnZXRDb21wb25lbnROYW1lRnJvbUZpYmVyKGZpYmVyKQogICAgICAgICAgKTsKICAgICAgICB9KTsKICAgICAgfQogICAgICBmdW5jdGlvbiBlbnN1cmVSb290SXNTY2hlZHVsZWQocm9vdDIpIHsKICAgICAgICByb290MiAhPT0gbGFzdFNjaGVkdWxlZFJvb3QgJiYgbnVsbCA9PT0gcm9vdDIubmV4dCAmJiAobnVsbCA9PT0gbGFzdFNjaGVkdWxlZFJvb3QgPyBmaXJzdFNjaGVkdWxlZFJvb3QgPSBsYXN0U2NoZWR1bGVkUm9vdCA9IHJvb3QyIDogbGFzdFNjaGVkdWxlZFJvb3QgPSBsYXN0U2NoZWR1bGVkUm9vdC5uZXh0ID0gcm9vdDIpOwogICAgICAgIG1pZ2h0SGF2ZVBlbmRpbmdTeW5jV29yayA9IHRydWU7CiAgICAgICAgbnVsbCAhPT0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuYWN0UXVldWUgPyBkaWRTY2hlZHVsZU1pY3JvdGFza19hY3QgfHwgKGRpZFNjaGVkdWxlTWljcm90YXNrX2FjdCA9IHRydWUsIHNjaGVkdWxlSW1tZWRpYXRlUm9vdFNjaGVkdWxlVGFzaygpKSA6IGRpZFNjaGVkdWxlTWljcm90YXNrIHx8IChkaWRTY2hlZHVsZU1pY3JvdGFzayA9IHRydWUsIHNjaGVkdWxlSW1tZWRpYXRlUm9vdFNjaGVkdWxlVGFzaygpKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBmbHVzaFN5bmNXb3JrQWNyb3NzUm9vdHNfaW1wbChzeW5jVHJhbnNpdGlvbkxhbmVzLCBvbmx5TGVnYWN5KSB7CiAgICAgICAgaWYgKCFpc0ZsdXNoaW5nV29yayAmJiBtaWdodEhhdmVQZW5kaW5nU3luY1dvcmspIHsKICAgICAgICAgIGlzRmx1c2hpbmdXb3JrID0gdHJ1ZTsKICAgICAgICAgIGRvIHsKICAgICAgICAgICAgdmFyIGRpZFBlcmZvcm1Tb21lV29yayA9IGZhbHNlOwogICAgICAgICAgICBmb3IgKHZhciByb290MiA9IGZpcnN0U2NoZWR1bGVkUm9vdDsgbnVsbCAhPT0gcm9vdDI7ICkgewogICAgICAgICAgICAgIGlmICghb25seUxlZ2FjeSkKICAgICAgICAgICAgICAgIGlmICgwICE9PSBzeW5jVHJhbnNpdGlvbkxhbmVzKSB7CiAgICAgICAgICAgICAgICAgIHZhciBwZW5kaW5nTGFuZXMgPSByb290Mi5wZW5kaW5nTGFuZXM7CiAgICAgICAgICAgICAgICAgIGlmICgwID09PSBwZW5kaW5nTGFuZXMpIHZhciBuZXh0TGFuZXMgPSAwOwogICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc3VzcGVuZGVkTGFuZXMgPSByb290Mi5zdXNwZW5kZWRMYW5lcywgcGluZ2VkTGFuZXMgPSByb290Mi5waW5nZWRMYW5lczsKICAgICAgICAgICAgICAgICAgICBuZXh0TGFuZXMgPSAoMSA8PCAzMSAtIGNsejMyKDQyIHwgc3luY1RyYW5zaXRpb25MYW5lcykgKyAxKSAtIDE7CiAgICAgICAgICAgICAgICAgICAgbmV4dExhbmVzICY9IHBlbmRpbmdMYW5lcyAmIH4oc3VzcGVuZGVkTGFuZXMgJiB+cGluZ2VkTGFuZXMpOwogICAgICAgICAgICAgICAgICAgIG5leHRMYW5lcyA9IG5leHRMYW5lcyAmIDIwMTMyNjc0MSA/IG5leHRMYW5lcyAmIDIwMTMyNjc0MSB8IDEgOiBuZXh0TGFuZXMgPyBuZXh0TGFuZXMgfCAyIDogMDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAwICE9PSBuZXh0TGFuZXMgJiYgKGRpZFBlcmZvcm1Tb21lV29yayA9IHRydWUsIHBlcmZvcm1TeW5jV29ya09uUm9vdChyb290MiwgbmV4dExhbmVzKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAgICAgbmV4dExhbmVzID0gd29ya0luUHJvZ3Jlc3NSb290UmVuZGVyTGFuZXMsIG5leHRMYW5lcyA9IGdldE5leHRMYW5lcygKICAgICAgICAgICAgICAgICAgICByb290MiwKICAgICAgICAgICAgICAgICAgICByb290MiA9PT0gd29ya0luUHJvZ3Jlc3NSb290ID8gbmV4dExhbmVzIDogMCwKICAgICAgICAgICAgICAgICAgICBudWxsICE9PSByb290Mi5jYW5jZWxQZW5kaW5nQ29tbWl0IHx8IHJvb3QyLnRpbWVvdXRIYW5kbGUgIT09IG5vVGltZW91dAogICAgICAgICAgICAgICAgICApLCAwID09PSAobmV4dExhbmVzICYgMykgfHwgY2hlY2tJZlJvb3RJc1ByZXJlbmRlcmluZyhyb290MiwgbmV4dExhbmVzKSB8fCAoZGlkUGVyZm9ybVNvbWVXb3JrID0gdHJ1ZSwgcGVyZm9ybVN5bmNXb3JrT25Sb290KHJvb3QyLCBuZXh0TGFuZXMpKTsKICAgICAgICAgICAgICByb290MiA9IHJvb3QyLm5leHQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gd2hpbGUgKGRpZFBlcmZvcm1Tb21lV29yayk7CiAgICAgICAgICBpc0ZsdXNoaW5nV29yayA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBwcm9jZXNzUm9vdFNjaGVkdWxlSW5JbW1lZGlhdGVUYXNrKCkgewogICAgICAgIHByb2Nlc3NSb290U2NoZWR1bGVJbk1pY3JvdGFzaygpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHByb2Nlc3NSb290U2NoZWR1bGVJbk1pY3JvdGFzaygpIHsKICAgICAgICBtaWdodEhhdmVQZW5kaW5nU3luY1dvcmsgPSBkaWRTY2hlZHVsZU1pY3JvdGFza19hY3QgPSBkaWRTY2hlZHVsZU1pY3JvdGFzayA9IGZhbHNlOwogICAgICAgIHZhciBzeW5jVHJhbnNpdGlvbkxhbmVzID0gMDsKICAgICAgICAwICE9PSBjdXJyZW50RXZlbnRUcmFuc2l0aW9uTGFuZSAmJiAoc2hvdWxkQXR0ZW1wdEVhZ2VyVHJhbnNpdGlvbigpICYmIChzeW5jVHJhbnNpdGlvbkxhbmVzID0gY3VycmVudEV2ZW50VHJhbnNpdGlvbkxhbmUpLCBjdXJyZW50RXZlbnRUcmFuc2l0aW9uTGFuZSA9IDApOwogICAgICAgIGZvciAodmFyIGN1cnJlbnRUaW1lID0gbm93JDEoKSwgcHJldiA9IG51bGwsIHJvb3QyID0gZmlyc3RTY2hlZHVsZWRSb290OyBudWxsICE9PSByb290MjsgKSB7CiAgICAgICAgICB2YXIgbmV4dCA9IHJvb3QyLm5leHQsIG5leHRMYW5lcyA9IHNjaGVkdWxlVGFza0ZvclJvb3REdXJpbmdNaWNyb3Rhc2socm9vdDIsIGN1cnJlbnRUaW1lKTsKICAgICAgICAgIGlmICgwID09PSBuZXh0TGFuZXMpCiAgICAgICAgICAgIHJvb3QyLm5leHQgPSBudWxsLCBudWxsID09PSBwcmV2ID8gZmlyc3RTY2hlZHVsZWRSb290ID0gbmV4dCA6IHByZXYubmV4dCA9IG5leHQsIG51bGwgPT09IG5leHQgJiYgKGxhc3RTY2hlZHVsZWRSb290ID0gcHJldik7CiAgICAgICAgICBlbHNlIGlmIChwcmV2ID0gcm9vdDIsIDAgIT09IHN5bmNUcmFuc2l0aW9uTGFuZXMgfHwgMCAhPT0gKG5leHRMYW5lcyAmIDMpKQogICAgICAgICAgICBtaWdodEhhdmVQZW5kaW5nU3luY1dvcmsgPSB0cnVlOwogICAgICAgICAgcm9vdDIgPSBuZXh0OwogICAgICAgIH0KICAgICAgICBmbHVzaFN5bmNXb3JrQWNyb3NzUm9vdHNfaW1wbChzeW5jVHJhbnNpdGlvbkxhbmVzLCBmYWxzZSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gc2NoZWR1bGVUYXNrRm9yUm9vdER1cmluZ01pY3JvdGFzayhyb290MiwgY3VycmVudFRpbWUpIHsKICAgICAgICBmb3IgKHZhciBzdXNwZW5kZWRMYW5lcyA9IHJvb3QyLnN1c3BlbmRlZExhbmVzLCBwaW5nZWRMYW5lcyA9IHJvb3QyLnBpbmdlZExhbmVzLCBleHBpcmF0aW9uVGltZXMgPSByb290Mi5leHBpcmF0aW9uVGltZXMsIGxhbmVzID0gcm9vdDIucGVuZGluZ0xhbmVzICYgLTYyOTE0NTYxOyAwIDwgbGFuZXM7ICkgewogICAgICAgICAgdmFyIGluZGV4ID0gMzEgLSBjbHozMihsYW5lcyksIGxhbmUgPSAxIDw8IGluZGV4LCBleHBpcmF0aW9uVGltZSA9IGV4cGlyYXRpb25UaW1lc1tpbmRleF07CiAgICAgICAgICBpZiAoLTEgPT09IGV4cGlyYXRpb25UaW1lKSB7CiAgICAgICAgICAgIGlmICgwID09PSAobGFuZSAmIHN1c3BlbmRlZExhbmVzKSB8fCAwICE9PSAobGFuZSAmIHBpbmdlZExhbmVzKSkKICAgICAgICAgICAgICBleHBpcmF0aW9uVGltZXNbaW5kZXhdID0gY29tcHV0ZUV4cGlyYXRpb25UaW1lKGxhbmUsIGN1cnJlbnRUaW1lKTsKICAgICAgICAgIH0gZWxzZSBleHBpcmF0aW9uVGltZSA8PSBjdXJyZW50VGltZSAmJiAocm9vdDIuZXhwaXJlZExhbmVzIHw9IGxhbmUpOwogICAgICAgICAgbGFuZXMgJj0gfmxhbmU7CiAgICAgICAgfQogICAgICAgIGN1cnJlbnRUaW1lID0gd29ya0luUHJvZ3Jlc3NSb290OwogICAgICAgIHN1c3BlbmRlZExhbmVzID0gd29ya0luUHJvZ3Jlc3NSb290UmVuZGVyTGFuZXM7CiAgICAgICAgc3VzcGVuZGVkTGFuZXMgPSBnZXROZXh0TGFuZXMoCiAgICAgICAgICByb290MiwKICAgICAgICAgIHJvb3QyID09PSBjdXJyZW50VGltZSA/IHN1c3BlbmRlZExhbmVzIDogMCwKICAgICAgICAgIG51bGwgIT09IHJvb3QyLmNhbmNlbFBlbmRpbmdDb21taXQgfHwgcm9vdDIudGltZW91dEhhbmRsZSAhPT0gbm9UaW1lb3V0CiAgICAgICAgKTsKICAgICAgICBwaW5nZWRMYW5lcyA9IHJvb3QyLmNhbGxiYWNrTm9kZTsKICAgICAgICBpZiAoMCA9PT0gc3VzcGVuZGVkTGFuZXMgfHwgcm9vdDIgPT09IGN1cnJlbnRUaW1lICYmICh3b3JrSW5Qcm9ncmVzc1N1c3BlbmRlZFJlYXNvbiA9PT0gU3VzcGVuZGVkT25EYXRhIHx8IHdvcmtJblByb2dyZXNzU3VzcGVuZGVkUmVhc29uID09PSBTdXNwZW5kZWRPbkFjdGlvbikgfHwgbnVsbCAhPT0gcm9vdDIuY2FuY2VsUGVuZGluZ0NvbW1pdCkKICAgICAgICAgIHJldHVybiBudWxsICE9PSBwaW5nZWRMYW5lcyAmJiBjYW5jZWxDYWxsYmFjayhwaW5nZWRMYW5lcyksIHJvb3QyLmNhbGxiYWNrTm9kZSA9IG51bGwsIHJvb3QyLmNhbGxiYWNrUHJpb3JpdHkgPSAwOwogICAgICAgIGlmICgwID09PSAoc3VzcGVuZGVkTGFuZXMgJiAzKSB8fCBjaGVja0lmUm9vdElzUHJlcmVuZGVyaW5nKHJvb3QyLCBzdXNwZW5kZWRMYW5lcykpIHsKICAgICAgICAgIGN1cnJlbnRUaW1lID0gc3VzcGVuZGVkTGFuZXMgJiAtc3VzcGVuZGVkTGFuZXM7CiAgICAgICAgICBpZiAoY3VycmVudFRpbWUgIT09IHJvb3QyLmNhbGxiYWNrUHJpb3JpdHkgfHwgbnVsbCAhPT0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuYWN0UXVldWUgJiYgcGluZ2VkTGFuZXMgIT09IGZha2VBY3RDYWxsYmFja05vZGUpCiAgICAgICAgICAgIGNhbmNlbENhbGxiYWNrKHBpbmdlZExhbmVzKTsKICAgICAgICAgIGVsc2UgcmV0dXJuIGN1cnJlbnRUaW1lOwogICAgICAgICAgc3dpdGNoIChsYW5lc1RvRXZlbnRQcmlvcml0eShzdXNwZW5kZWRMYW5lcykpIHsKICAgICAgICAgICAgY2FzZSBEaXNjcmV0ZUV2ZW50UHJpb3JpdHk6CiAgICAgICAgICAgIGNhc2UgQ29udGludW91c0V2ZW50UHJpb3JpdHk6CiAgICAgICAgICAgICAgc3VzcGVuZGVkTGFuZXMgPSBVc2VyQmxvY2tpbmdQcmlvcml0eTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBEZWZhdWx0RXZlbnRQcmlvcml0eToKICAgICAgICAgICAgICBzdXNwZW5kZWRMYW5lcyA9IE5vcm1hbFByaW9yaXR5JDE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSWRsZUV2ZW50UHJpb3JpdHk6CiAgICAgICAgICAgICAgc3VzcGVuZGVkTGFuZXMgPSBJZGxlUHJpb3JpdHk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgc3VzcGVuZGVkTGFuZXMgPSBOb3JtYWxQcmlvcml0eSQxOwogICAgICAgICAgfQogICAgICAgICAgcGluZ2VkTGFuZXMgPSBwZXJmb3JtV29ya09uUm9vdFZpYVNjaGVkdWxlclRhc2suYmluZChudWxsLCByb290Mik7CiAgICAgICAgICBudWxsICE9PSBSZWFjdFNoYXJlZEludGVybmFscy5hY3RRdWV1ZSA/IChSZWFjdFNoYXJlZEludGVybmFscy5hY3RRdWV1ZS5wdXNoKHBpbmdlZExhbmVzKSwgc3VzcGVuZGVkTGFuZXMgPSBmYWtlQWN0Q2FsbGJhY2tOb2RlKSA6IHN1c3BlbmRlZExhbmVzID0gc2NoZWR1bGVDYWxsYmFjayQzKHN1c3BlbmRlZExhbmVzLCBwaW5nZWRMYW5lcyk7CiAgICAgICAgICByb290Mi5jYWxsYmFja1ByaW9yaXR5ID0gY3VycmVudFRpbWU7CiAgICAgICAgICByb290Mi5jYWxsYmFja05vZGUgPSBzdXNwZW5kZWRMYW5lczsKICAgICAgICAgIHJldHVybiBjdXJyZW50VGltZTsKICAgICAgICB9CiAgICAgICAgbnVsbCAhPT0gcGluZ2VkTGFuZXMgJiYgY2FuY2VsQ2FsbGJhY2socGluZ2VkTGFuZXMpOwogICAgICAgIHJvb3QyLmNhbGxiYWNrUHJpb3JpdHkgPSAyOwogICAgICAgIHJvb3QyLmNhbGxiYWNrTm9kZSA9IG51bGw7CiAgICAgICAgcmV0dXJuIDI7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcGVyZm9ybVdvcmtPblJvb3RWaWFTY2hlZHVsZXJUYXNrKHJvb3QyLCBkaWRUaW1lb3V0KSB7CiAgICAgICAgbmVzdGVkVXBkYXRlU2NoZWR1bGVkID0gY3VycmVudFVwZGF0ZUlzTmVzdGVkID0gZmFsc2U7CiAgICAgICAgaWYgKHBlbmRpbmdFZmZlY3RzU3RhdHVzICE9PSBOT19QRU5ESU5HX0VGRkVDVFMgJiYgcGVuZGluZ0VmZmVjdHNTdGF0dXMgIT09IFBFTkRJTkdfUEFTU0lWRV9QSEFTRSkKICAgICAgICAgIHJldHVybiByb290Mi5jYWxsYmFja05vZGUgPSBudWxsLCByb290Mi5jYWxsYmFja1ByaW9yaXR5ID0gMCwgbnVsbDsKICAgICAgICB2YXIgb3JpZ2luYWxDYWxsYmFja05vZGUgPSByb290Mi5jYWxsYmFja05vZGU7CiAgICAgICAgaWYgKGZsdXNoUGVuZGluZ0VmZmVjdHModHJ1ZSkgJiYgcm9vdDIuY2FsbGJhY2tOb2RlICE9PSBvcmlnaW5hbENhbGxiYWNrTm9kZSkKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIHZhciB3b3JrSW5Qcm9ncmVzc1Jvb3RSZW5kZXJMYW5lcyRqc2NvbXAkMCA9IHdvcmtJblByb2dyZXNzUm9vdFJlbmRlckxhbmVzOwogICAgICAgIHdvcmtJblByb2dyZXNzUm9vdFJlbmRlckxhbmVzJGpzY29tcCQwID0gZ2V0TmV4dExhbmVzKAogICAgICAgICAgcm9vdDIsCiAgICAgICAgICByb290MiA9PT0gd29ya0luUHJvZ3Jlc3NSb290ID8gd29ya0luUHJvZ3Jlc3NSb290UmVuZGVyTGFuZXMkanNjb21wJDAgOiAwLAogICAgICAgICAgbnVsbCAhPT0gcm9vdDIuY2FuY2VsUGVuZGluZ0NvbW1pdCB8fCByb290Mi50aW1lb3V0SGFuZGxlICE9PSBub1RpbWVvdXQKICAgICAgICApOwogICAgICAgIGlmICgwID09PSB3b3JrSW5Qcm9ncmVzc1Jvb3RSZW5kZXJMYW5lcyRqc2NvbXAkMCkgcmV0dXJuIG51bGw7CiAgICAgICAgcGVyZm9ybVdvcmtPblJvb3QoCiAgICAgICAgICByb290MiwKICAgICAgICAgIHdvcmtJblByb2dyZXNzUm9vdFJlbmRlckxhbmVzJGpzY29tcCQwLAogICAgICAgICAgZGlkVGltZW91dAogICAgICAgICk7CiAgICAgICAgc2NoZWR1bGVUYXNrRm9yUm9vdER1cmluZ01pY3JvdGFzayhyb290Miwgbm93JDEoKSk7CiAgICAgICAgcmV0dXJuIG51bGwgIT0gcm9vdDIuY2FsbGJhY2tOb2RlICYmIHJvb3QyLmNhbGxiYWNrTm9kZSA9PT0gb3JpZ2luYWxDYWxsYmFja05vZGUgPyBwZXJmb3JtV29ya09uUm9vdFZpYVNjaGVkdWxlclRhc2suYmluZChudWxsLCByb290MikgOiBudWxsOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHBlcmZvcm1TeW5jV29ya09uUm9vdChyb290MiwgbGFuZXMpIHsKICAgICAgICBpZiAoZmx1c2hQZW5kaW5nRWZmZWN0cygpKSByZXR1cm4gbnVsbDsKICAgICAgICBjdXJyZW50VXBkYXRlSXNOZXN0ZWQgPSBuZXN0ZWRVcGRhdGVTY2hlZHVsZWQ7CiAgICAgICAgbmVzdGVkVXBkYXRlU2NoZWR1bGVkID0gZmFsc2U7CiAgICAgICAgcGVyZm9ybVdvcmtPblJvb3Qocm9vdDIsIGxhbmVzLCB0cnVlKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjYW5jZWxDYWxsYmFjayhjYWxsYmFja05vZGUpIHsKICAgICAgICBjYWxsYmFja05vZGUgIT09IGZha2VBY3RDYWxsYmFja05vZGUgJiYgbnVsbCAhPT0gY2FsbGJhY2tOb2RlICYmIGNhbmNlbENhbGxiYWNrJDEoY2FsbGJhY2tOb2RlKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBzY2hlZHVsZUltbWVkaWF0ZVJvb3RTY2hlZHVsZVRhc2soKSB7CiAgICAgICAgbnVsbCAhPT0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuYWN0UXVldWUgJiYgUmVhY3RTaGFyZWRJbnRlcm5hbHMuYWN0UXVldWUucHVzaChmdW5jdGlvbigpIHsKICAgICAgICAgIHByb2Nlc3NSb290U2NoZWR1bGVJbk1pY3JvdGFzaygpOwogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfSk7CiAgICAgICAgc2NoZWR1bGVNaWNyb3Rhc2soZnVuY3Rpb24oKSB7CiAgICAgICAgICAoZXhlY3V0aW9uQ29udGV4dCAmIChSZW5kZXJDb250ZXh0IHwgQ29tbWl0Q29udGV4dCkpICE9PSBOb0NvbnRleHQgPyBzY2hlZHVsZUNhbGxiYWNrJDMoCiAgICAgICAgICAgIEltbWVkaWF0ZVByaW9yaXR5LAogICAgICAgICAgICBwcm9jZXNzUm9vdFNjaGVkdWxlSW5JbW1lZGlhdGVUYXNrCiAgICAgICAgICApIDogcHJvY2Vzc1Jvb3RTY2hlZHVsZUluTWljcm90YXNrKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmVxdWVzdFRyYW5zaXRpb25MYW5lKCkgewogICAgICAgIDAgPT09IGN1cnJlbnRFdmVudFRyYW5zaXRpb25MYW5lICYmIChjdXJyZW50RXZlbnRUcmFuc2l0aW9uTGFuZSA9IGNsYWltTmV4dFRyYW5zaXRpb25MYW5lKCkpOwogICAgICAgIHJldHVybiBjdXJyZW50RXZlbnRUcmFuc2l0aW9uTGFuZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjb2VyY2VGb3JtQWN0aW9uUHJvcChhY3Rpb25Qcm9wKSB7CiAgICAgICAgaWYgKG51bGwgPT0gYWN0aW9uUHJvcCB8fCAic3ltYm9sIiA9PT0gdHlwZW9mIGFjdGlvblByb3AgfHwgImJvb2xlYW4iID09PSB0eXBlb2YgYWN0aW9uUHJvcCkKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIGlmICgiZnVuY3Rpb24iID09PSB0eXBlb2YgYWN0aW9uUHJvcCkgcmV0dXJuIGFjdGlvblByb3A7CiAgICAgICAgY2hlY2tBdHRyaWJ1dGVTdHJpbmdDb2VyY2lvbihhY3Rpb25Qcm9wLCAiYWN0aW9uIik7CiAgICAgICAgcmV0dXJuIHNhbml0aXplVVJMKCIiICsgYWN0aW9uUHJvcCk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY3JlYXRlRm9ybURhdGFXaXRoU3VibWl0dGVyKGZvcm0sIHN1Ym1pdHRlcikgewogICAgICAgIHZhciB0ZW1wID0gc3VibWl0dGVyLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKICAgICAgICB0ZW1wLm5hbWUgPSBzdWJtaXR0ZXIubmFtZTsKICAgICAgICB0ZW1wLnZhbHVlID0gc3VibWl0dGVyLnZhbHVlOwogICAgICAgIGZvcm0uaWQgJiYgdGVtcC5zZXRBdHRyaWJ1dGUoImZvcm0iLCBmb3JtLmlkKTsKICAgICAgICBzdWJtaXR0ZXIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGVtcCwgc3VibWl0dGVyKTsKICAgICAgICBmb3JtID0gbmV3IEZvcm1EYXRhKGZvcm0pOwogICAgICAgIHRlbXAucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0ZW1wKTsKICAgICAgICByZXR1cm4gZm9ybTsKICAgICAgfQogICAgICBmdW5jdGlvbiBleHRyYWN0RXZlbnRzJDEoZGlzcGF0Y2hRdWV1ZSwgZG9tRXZlbnROYW1lLCBtYXliZVRhcmdldEluc3QsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkgewogICAgICAgIGlmICgic3VibWl0IiA9PT0gZG9tRXZlbnROYW1lICYmIG1heWJlVGFyZ2V0SW5zdCAmJiBtYXliZVRhcmdldEluc3Quc3RhdGVOb2RlID09PSBuYXRpdmVFdmVudFRhcmdldCkgewogICAgICAgICAgdmFyIGFjdGlvbiA9IGNvZXJjZUZvcm1BY3Rpb25Qcm9wKAogICAgICAgICAgICAobmF0aXZlRXZlbnRUYXJnZXRbaW50ZXJuYWxQcm9wc0tleV0gfHwgbnVsbCkuYWN0aW9uCiAgICAgICAgICApLCBzdWJtaXR0ZXIgPSBuYXRpdmVFdmVudC5zdWJtaXR0ZXI7CiAgICAgICAgICBzdWJtaXR0ZXIgJiYgKGRvbUV2ZW50TmFtZSA9IChkb21FdmVudE5hbWUgPSBzdWJtaXR0ZXJbaW50ZXJuYWxQcm9wc0tleV0gfHwgbnVsbCkgPyBjb2VyY2VGb3JtQWN0aW9uUHJvcChkb21FdmVudE5hbWUuZm9ybUFjdGlvbikgOiBzdWJtaXR0ZXIuZ2V0QXR0cmlidXRlKCJmb3JtQWN0aW9uIiksIG51bGwgIT09IGRvbUV2ZW50TmFtZSAmJiAoYWN0aW9uID0gZG9tRXZlbnROYW1lLCBzdWJtaXR0ZXIgPSBudWxsKSk7CiAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgU3ludGhldGljRXZlbnQoCiAgICAgICAgICAgICJhY3Rpb24iLAogICAgICAgICAgICAiYWN0aW9uIiwKICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgbmF0aXZlRXZlbnQsCiAgICAgICAgICAgIG5hdGl2ZUV2ZW50VGFyZ2V0CiAgICAgICAgICApOwogICAgICAgICAgZGlzcGF0Y2hRdWV1ZS5wdXNoKHsKICAgICAgICAgICAgZXZlbnQsCiAgICAgICAgICAgIGxpc3RlbmVyczogWwogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGluc3RhbmNlOiBudWxsLAogICAgICAgICAgICAgICAgbGlzdGVuZXI6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICBpZiAobmF0aXZlRXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgewogICAgICAgICAgICAgICAgICAgIGlmICgwICE9PSBjdXJyZW50RXZlbnRUcmFuc2l0aW9uTGFuZSkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm1EYXRhID0gc3VibWl0dGVyID8gY3JlYXRlRm9ybURhdGFXaXRoU3VibWl0dGVyKAogICAgICAgICAgICAgICAgICAgICAgICBuYXRpdmVFdmVudFRhcmdldCwKICAgICAgICAgICAgICAgICAgICAgICAgc3VibWl0dGVyCiAgICAgICAgICAgICAgICAgICAgICApIDogbmV3IEZvcm1EYXRhKG5hdGl2ZUV2ZW50VGFyZ2V0KSwgcGVuZGluZ1N0YXRlID0gewogICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBmb3JtRGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBuYXRpdmVFdmVudFRhcmdldC5tZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbgogICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5mcmVlemUocGVuZGluZ1N0YXRlKTsKICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0SG9zdFRyYW5zaXRpb24oCiAgICAgICAgICAgICAgICAgICAgICAgIG1heWJlVGFyZ2V0SW5zdCwKICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1N0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YQogICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBhY3Rpb24gJiYgKGV2ZW50LnByZXZlbnREZWZhdWx0KCksIGZvcm1EYXRhID0gc3VibWl0dGVyID8gY3JlYXRlRm9ybURhdGFXaXRoU3VibWl0dGVyKAogICAgICAgICAgICAgICAgICAgICAgbmF0aXZlRXZlbnRUYXJnZXQsCiAgICAgICAgICAgICAgICAgICAgICBzdWJtaXR0ZXIKICAgICAgICAgICAgICAgICAgICApIDogbmV3IEZvcm1EYXRhKG5hdGl2ZUV2ZW50VGFyZ2V0KSwgcGVuZGluZ1N0YXRlID0gewogICAgICAgICAgICAgICAgICAgICAgcGVuZGluZzogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGZvcm1EYXRhLAogICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBuYXRpdmVFdmVudFRhcmdldC5tZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICBhY3Rpb24KICAgICAgICAgICAgICAgICAgICB9LCBPYmplY3QuZnJlZXplKHBlbmRpbmdTdGF0ZSksIHN0YXJ0SG9zdFRyYW5zaXRpb24oCiAgICAgICAgICAgICAgICAgICAgICBtYXliZVRhcmdldEluc3QsCiAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nU3RhdGUsCiAgICAgICAgICAgICAgICAgICAgICBhY3Rpb24sCiAgICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YQogICAgICAgICAgICAgICAgICAgICkpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGN1cnJlbnRUYXJnZXQ6IG5hdGl2ZUV2ZW50VGFyZ2V0CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBdCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZXhlY3V0ZURpc3BhdGNoKGV2ZW50LCBsaXN0ZW5lciwgY3VycmVudFRhcmdldCkgewogICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0OwogICAgICAgIHRyeSB7CiAgICAgICAgICBsaXN0ZW5lcihldmVudCk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIHJlcG9ydEdsb2JhbEVycm9yKGVycm9yKTsKICAgICAgICB9CiAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldCA9IG51bGw7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcHJvY2Vzc0Rpc3BhdGNoUXVldWUoZGlzcGF0Y2hRdWV1ZSwgZXZlbnRTeXN0ZW1GbGFncykgewogICAgICAgIGV2ZW50U3lzdGVtRmxhZ3MgPSAwICE9PSAoZXZlbnRTeXN0ZW1GbGFncyAmIDQpOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGlzcGF0Y2hRdWV1ZS5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIF9kaXNwYXRjaFF1ZXVlJGkgPSBkaXNwYXRjaFF1ZXVlW2ldOwogICAgICAgICAgYTogewogICAgICAgICAgICB2YXIgcHJldmlvdXNJbnN0YW5jZSA9IHZvaWQgMCwgZXZlbnQgPSBfZGlzcGF0Y2hRdWV1ZSRpLmV2ZW50OwogICAgICAgICAgICBfZGlzcGF0Y2hRdWV1ZSRpID0gX2Rpc3BhdGNoUXVldWUkaS5saXN0ZW5lcnM7CiAgICAgICAgICAgIGlmIChldmVudFN5c3RlbUZsYWdzKQogICAgICAgICAgICAgIGZvciAodmFyIGkkanNjb21wJDAgPSBfZGlzcGF0Y2hRdWV1ZSRpLmxlbmd0aCAtIDE7IDAgPD0gaSRqc2NvbXAkMDsgaSRqc2NvbXAkMC0tKSB7CiAgICAgICAgICAgICAgICB2YXIgX2Rpc3BhdGNoTGlzdGVuZXJzJGkgPSBfZGlzcGF0Y2hRdWV1ZSRpW2kkanNjb21wJDBdLCBpbnN0YW5jZSA9IF9kaXNwYXRjaExpc3RlbmVycyRpLmluc3RhbmNlLCBjdXJyZW50VGFyZ2V0ID0gX2Rpc3BhdGNoTGlzdGVuZXJzJGkuY3VycmVudFRhcmdldDsKICAgICAgICAgICAgICAgIF9kaXNwYXRjaExpc3RlbmVycyRpID0gX2Rpc3BhdGNoTGlzdGVuZXJzJGkubGlzdGVuZXI7CiAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UgIT09IHByZXZpb3VzSW5zdGFuY2UgJiYgZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSkKICAgICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICAgIG51bGwgIT09IGluc3RhbmNlID8gcnVuV2l0aEZpYmVySW5ERVYoCiAgICAgICAgICAgICAgICAgIGluc3RhbmNlLAogICAgICAgICAgICAgICAgICBleGVjdXRlRGlzcGF0Y2gsCiAgICAgICAgICAgICAgICAgIGV2ZW50LAogICAgICAgICAgICAgICAgICBfZGlzcGF0Y2hMaXN0ZW5lcnMkaSwKICAgICAgICAgICAgICAgICAgY3VycmVudFRhcmdldAogICAgICAgICAgICAgICAgKSA6IGV4ZWN1dGVEaXNwYXRjaChldmVudCwgX2Rpc3BhdGNoTGlzdGVuZXJzJGksIGN1cnJlbnRUYXJnZXQpOwogICAgICAgICAgICAgICAgcHJldmlvdXNJbnN0YW5jZSA9IGluc3RhbmNlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgIGZvciAoaSRqc2NvbXAkMCA9IDA7IGkkanNjb21wJDAgPCBfZGlzcGF0Y2hRdWV1ZSRpLmxlbmd0aDsgaSRqc2NvbXAkMCsrKSB7CiAgICAgICAgICAgICAgICBfZGlzcGF0Y2hMaXN0ZW5lcnMkaSA9IF9kaXNwYXRjaFF1ZXVlJGlbaSRqc2NvbXAkMF07CiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IF9kaXNwYXRjaExpc3RlbmVycyRpLmluc3RhbmNlOwogICAgICAgICAgICAgICAgY3VycmVudFRhcmdldCA9IF9kaXNwYXRjaExpc3RlbmVycyRpLmN1cnJlbnRUYXJnZXQ7CiAgICAgICAgICAgICAgICBfZGlzcGF0Y2hMaXN0ZW5lcnMkaSA9IF9kaXNwYXRjaExpc3RlbmVycyRpLmxpc3RlbmVyOwogICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlICE9PSBwcmV2aW91c0luc3RhbmNlICYmIGV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpCiAgICAgICAgICAgICAgICAgIGJyZWFrIGE7CiAgICAgICAgICAgICAgICBudWxsICE9PSBpbnN0YW5jZSA/IHJ1bldpdGhGaWJlckluREVWKAogICAgICAgICAgICAgICAgICBpbnN0YW5jZSwKICAgICAgICAgICAgICAgICAgZXhlY3V0ZURpc3BhdGNoLAogICAgICAgICAgICAgICAgICBldmVudCwKICAgICAgICAgICAgICAgICAgX2Rpc3BhdGNoTGlzdGVuZXJzJGksCiAgICAgICAgICAgICAgICAgIGN1cnJlbnRUYXJnZXQKICAgICAgICAgICAgICAgICkgOiBleGVjdXRlRGlzcGF0Y2goZXZlbnQsIF9kaXNwYXRjaExpc3RlbmVycyRpLCBjdXJyZW50VGFyZ2V0KTsKICAgICAgICAgICAgICAgIHByZXZpb3VzSW5zdGFuY2UgPSBpbnN0YW5jZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGxpc3RlblRvTm9uRGVsZWdhdGVkRXZlbnQoZG9tRXZlbnROYW1lLCB0YXJnZXRFbGVtZW50KSB7CiAgICAgICAgbm9uRGVsZWdhdGVkRXZlbnRzLmhhcyhkb21FdmVudE5hbWUpIHx8IGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAnRGlkIG5vdCBleHBlY3QgYSBsaXN0ZW5Ub05vbkRlbGVnYXRlZEV2ZW50KCkgY2FsbCBmb3IgIiVzIi4gVGhpcyBpcyBhIGJ1ZyBpbiBSZWFjdC4gUGxlYXNlIGZpbGUgYW4gaXNzdWUuJywKICAgICAgICAgIGRvbUV2ZW50TmFtZQogICAgICAgICk7CiAgICAgICAgdmFyIGxpc3RlbmVyU2V0ID0gdGFyZ2V0RWxlbWVudFtpbnRlcm5hbEV2ZW50SGFuZGxlcnNLZXldOwogICAgICAgIHZvaWQgMCA9PT0gbGlzdGVuZXJTZXQgJiYgKGxpc3RlbmVyU2V0ID0gdGFyZ2V0RWxlbWVudFtpbnRlcm5hbEV2ZW50SGFuZGxlcnNLZXldID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSk7CiAgICAgICAgdmFyIGxpc3RlbmVyU2V0S2V5ID0gZG9tRXZlbnROYW1lICsgIl9fYnViYmxlIjsKICAgICAgICBsaXN0ZW5lclNldC5oYXMobGlzdGVuZXJTZXRLZXkpIHx8IChhZGRUcmFwcGVkRXZlbnRMaXN0ZW5lcih0YXJnZXRFbGVtZW50LCBkb21FdmVudE5hbWUsIDIsIGZhbHNlKSwgbGlzdGVuZXJTZXQuYWRkKGxpc3RlbmVyU2V0S2V5KSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbGlzdGVuVG9OYXRpdmVFdmVudChkb21FdmVudE5hbWUsIGlzQ2FwdHVyZVBoYXNlTGlzdGVuZXIsIHRhcmdldCkgewogICAgICAgIG5vbkRlbGVnYXRlZEV2ZW50cy5oYXMoZG9tRXZlbnROYW1lKSAmJiAhaXNDYXB0dXJlUGhhc2VMaXN0ZW5lciAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgJ0RpZCBub3QgZXhwZWN0IGEgbGlzdGVuVG9OYXRpdmVFdmVudCgpIGNhbGwgZm9yICIlcyIgaW4gdGhlIGJ1YmJsZSBwaGFzZS4gVGhpcyBpcyBhIGJ1ZyBpbiBSZWFjdC4gUGxlYXNlIGZpbGUgYW4gaXNzdWUuJywKICAgICAgICAgIGRvbUV2ZW50TmFtZQogICAgICAgICk7CiAgICAgICAgdmFyIGV2ZW50U3lzdGVtRmxhZ3MgPSAwOwogICAgICAgIGlzQ2FwdHVyZVBoYXNlTGlzdGVuZXIgJiYgKGV2ZW50U3lzdGVtRmxhZ3MgfD0gNCk7CiAgICAgICAgYWRkVHJhcHBlZEV2ZW50TGlzdGVuZXIoCiAgICAgICAgICB0YXJnZXQsCiAgICAgICAgICBkb21FdmVudE5hbWUsCiAgICAgICAgICBldmVudFN5c3RlbUZsYWdzLAogICAgICAgICAgaXNDYXB0dXJlUGhhc2VMaXN0ZW5lcgogICAgICAgICk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbGlzdGVuVG9BbGxTdXBwb3J0ZWRFdmVudHMocm9vdENvbnRhaW5lckVsZW1lbnQpIHsKICAgICAgICBpZiAoIXJvb3RDb250YWluZXJFbGVtZW50W2xpc3RlbmluZ01hcmtlcl0pIHsKICAgICAgICAgIHJvb3RDb250YWluZXJFbGVtZW50W2xpc3RlbmluZ01hcmtlcl0gPSB0cnVlOwogICAgICAgICAgYWxsTmF0aXZlRXZlbnRzLmZvckVhY2goZnVuY3Rpb24oZG9tRXZlbnROYW1lKSB7CiAgICAgICAgICAgICJzZWxlY3Rpb25jaGFuZ2UiICE9PSBkb21FdmVudE5hbWUgJiYgKG5vbkRlbGVnYXRlZEV2ZW50cy5oYXMoZG9tRXZlbnROYW1lKSB8fCBsaXN0ZW5Ub05hdGl2ZUV2ZW50KGRvbUV2ZW50TmFtZSwgZmFsc2UsIHJvb3RDb250YWluZXJFbGVtZW50KSwgbGlzdGVuVG9OYXRpdmVFdmVudChkb21FdmVudE5hbWUsIHRydWUsIHJvb3RDb250YWluZXJFbGVtZW50KSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHZhciBvd25lckRvY3VtZW50ID0gOSA9PT0gcm9vdENvbnRhaW5lckVsZW1lbnQubm9kZVR5cGUgPyByb290Q29udGFpbmVyRWxlbWVudCA6IHJvb3RDb250YWluZXJFbGVtZW50Lm93bmVyRG9jdW1lbnQ7CiAgICAgICAgICBudWxsID09PSBvd25lckRvY3VtZW50IHx8IG93bmVyRG9jdW1lbnRbbGlzdGVuaW5nTWFya2VyXSB8fCAob3duZXJEb2N1bWVudFtsaXN0ZW5pbmdNYXJrZXJdID0gdHJ1ZSwgbGlzdGVuVG9OYXRpdmVFdmVudCgic2VsZWN0aW9uY2hhbmdlIiwgZmFsc2UsIG93bmVyRG9jdW1lbnQpKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gYWRkVHJhcHBlZEV2ZW50TGlzdGVuZXIodGFyZ2V0Q29udGFpbmVyLCBkb21FdmVudE5hbWUsIGV2ZW50U3lzdGVtRmxhZ3MsIGlzQ2FwdHVyZVBoYXNlTGlzdGVuZXIpIHsKICAgICAgICBzd2l0Y2ggKGdldEV2ZW50UHJpb3JpdHkoZG9tRXZlbnROYW1lKSkgewogICAgICAgICAgY2FzZSBEaXNjcmV0ZUV2ZW50UHJpb3JpdHk6CiAgICAgICAgICAgIHZhciBsaXN0ZW5lcldyYXBwZXIgPSBkaXNwYXRjaERpc2NyZXRlRXZlbnQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSBDb250aW51b3VzRXZlbnRQcmlvcml0eToKICAgICAgICAgICAgbGlzdGVuZXJXcmFwcGVyID0gZGlzcGF0Y2hDb250aW51b3VzRXZlbnQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgbGlzdGVuZXJXcmFwcGVyID0gZGlzcGF0Y2hFdmVudDsKICAgICAgICB9CiAgICAgICAgZXZlbnRTeXN0ZW1GbGFncyA9IGxpc3RlbmVyV3JhcHBlci5iaW5kKAogICAgICAgICAgbnVsbCwKICAgICAgICAgIGRvbUV2ZW50TmFtZSwKICAgICAgICAgIGV2ZW50U3lzdGVtRmxhZ3MsCiAgICAgICAgICB0YXJnZXRDb250YWluZXIKICAgICAgICApOwogICAgICAgIGxpc3RlbmVyV3JhcHBlciA9IHZvaWQgMDsKICAgICAgICAhcGFzc2l2ZUJyb3dzZXJFdmVudHNTdXBwb3J0ZWQgfHwgInRvdWNoc3RhcnQiICE9PSBkb21FdmVudE5hbWUgJiYgInRvdWNobW92ZSIgIT09IGRvbUV2ZW50TmFtZSAmJiAid2hlZWwiICE9PSBkb21FdmVudE5hbWUgfHwgKGxpc3RlbmVyV3JhcHBlciA9IHRydWUpOwogICAgICAgIGlzQ2FwdHVyZVBoYXNlTGlzdGVuZXIgPyB2b2lkIDAgIT09IGxpc3RlbmVyV3JhcHBlciA/IHRhcmdldENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKGRvbUV2ZW50TmFtZSwgZXZlbnRTeXN0ZW1GbGFncywgewogICAgICAgICAgY2FwdHVyZTogdHJ1ZSwKICAgICAgICAgIHBhc3NpdmU6IGxpc3RlbmVyV3JhcHBlcgogICAgICAgIH0pIDogdGFyZ2V0Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoZG9tRXZlbnROYW1lLCBldmVudFN5c3RlbUZsYWdzLCB0cnVlKSA6IHZvaWQgMCAhPT0gbGlzdGVuZXJXcmFwcGVyID8gdGFyZ2V0Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoZG9tRXZlbnROYW1lLCBldmVudFN5c3RlbUZsYWdzLCB7CiAgICAgICAgICBwYXNzaXZlOiBsaXN0ZW5lcldyYXBwZXIKICAgICAgICB9KSA6IHRhcmdldENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKAogICAgICAgICAgZG9tRXZlbnROYW1lLAogICAgICAgICAgZXZlbnRTeXN0ZW1GbGFncywKICAgICAgICAgIGZhbHNlCiAgICAgICAgKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBkaXNwYXRjaEV2ZW50Rm9yUGx1Z2luRXZlbnRTeXN0ZW0oZG9tRXZlbnROYW1lLCBldmVudFN5c3RlbUZsYWdzLCBuYXRpdmVFdmVudCwgdGFyZ2V0SW5zdCRqc2NvbXAkMCwgdGFyZ2V0Q29udGFpbmVyKSB7CiAgICAgICAgdmFyIGFuY2VzdG9ySW5zdCA9IHRhcmdldEluc3QkanNjb21wJDA7CiAgICAgICAgaWYgKDAgPT09IChldmVudFN5c3RlbUZsYWdzICYgMSkgJiYgMCA9PT0gKGV2ZW50U3lzdGVtRmxhZ3MgJiAyKSAmJiBudWxsICE9PSB0YXJnZXRJbnN0JGpzY29tcCQwKQogICAgICAgICAgYTogZm9yICg7IDsgKSB7CiAgICAgICAgICAgIGlmIChudWxsID09PSB0YXJnZXRJbnN0JGpzY29tcCQwKSByZXR1cm47CiAgICAgICAgICAgIHZhciBub2RlVGFnID0gdGFyZ2V0SW5zdCRqc2NvbXAkMC50YWc7CiAgICAgICAgICAgIGlmICgzID09PSBub2RlVGFnIHx8IDQgPT09IG5vZGVUYWcpIHsKICAgICAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGFyZ2V0SW5zdCRqc2NvbXAkMC5zdGF0ZU5vZGUuY29udGFpbmVySW5mbzsKICAgICAgICAgICAgICBpZiAoY29udGFpbmVyID09PSB0YXJnZXRDb250YWluZXIpIGJyZWFrOwogICAgICAgICAgICAgIGlmICg0ID09PSBub2RlVGFnKQogICAgICAgICAgICAgICAgZm9yIChub2RlVGFnID0gdGFyZ2V0SW5zdCRqc2NvbXAkMC5yZXR1cm47IG51bGwgIT09IG5vZGVUYWc7ICkgewogICAgICAgICAgICAgICAgICB2YXIgZ3JhbmRUYWcgPSBub2RlVGFnLnRhZzsKICAgICAgICAgICAgICAgICAgaWYgKCgzID09PSBncmFuZFRhZyB8fCA0ID09PSBncmFuZFRhZykgJiYgbm9kZVRhZy5zdGF0ZU5vZGUuY29udGFpbmVySW5mbyA9PT0gdGFyZ2V0Q29udGFpbmVyKQogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgbm9kZVRhZyA9IG5vZGVUYWcucmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGZvciAoOyBudWxsICE9PSBjb250YWluZXI7ICkgewogICAgICAgICAgICAgICAgbm9kZVRhZyA9IGdldENsb3Nlc3RJbnN0YW5jZUZyb21Ob2RlKGNvbnRhaW5lcik7CiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gbm9kZVRhZykgcmV0dXJuOwogICAgICAgICAgICAgICAgZ3JhbmRUYWcgPSBub2RlVGFnLnRhZzsKICAgICAgICAgICAgICAgIGlmICg1ID09PSBncmFuZFRhZyB8fCA2ID09PSBncmFuZFRhZyB8fCAyNiA9PT0gZ3JhbmRUYWcgfHwgMjcgPT09IGdyYW5kVGFnKSB7CiAgICAgICAgICAgICAgICAgIHRhcmdldEluc3QkanNjb21wJDAgPSBhbmNlc3Rvckluc3QgPSBub2RlVGFnOwogICAgICAgICAgICAgICAgICBjb250aW51ZSBhOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29udGFpbmVyID0gY29udGFpbmVyLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRhcmdldEluc3QkanNjb21wJDAgPSB0YXJnZXRJbnN0JGpzY29tcCQwLnJldHVybjsKICAgICAgICAgIH0KICAgICAgICBiYXRjaGVkVXBkYXRlcyQxKGZ1bmN0aW9uKCkgewogICAgICAgICAgdmFyIHRhcmdldEluc3QgPSBhbmNlc3Rvckluc3QsIG5hdGl2ZUV2ZW50VGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQobmF0aXZlRXZlbnQpLCBkaXNwYXRjaFF1ZXVlID0gW107CiAgICAgICAgICBhOiB7CiAgICAgICAgICAgIHZhciByZWFjdE5hbWUgPSB0b3BMZXZlbEV2ZW50c1RvUmVhY3ROYW1lcy5nZXQoZG9tRXZlbnROYW1lKTsKICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gcmVhY3ROYW1lKSB7CiAgICAgICAgICAgICAgdmFyIFN5bnRoZXRpY0V2ZW50Q3RvciA9IFN5bnRoZXRpY0V2ZW50LCByZWFjdEV2ZW50VHlwZSA9IGRvbUV2ZW50TmFtZTsKICAgICAgICAgICAgICBzd2l0Y2ggKGRvbUV2ZW50TmFtZSkgewogICAgICAgICAgICAgICAgY2FzZSAia2V5cHJlc3MiOgogICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gZ2V0RXZlbnRDaGFyQ29kZShuYXRpdmVFdmVudCkpIGJyZWFrIGE7CiAgICAgICAgICAgICAgICBjYXNlICJrZXlkb3duIjoKICAgICAgICAgICAgICAgIGNhc2UgImtleXVwIjoKICAgICAgICAgICAgICAgICAgU3ludGhldGljRXZlbnRDdG9yID0gU3ludGhldGljS2V5Ym9hcmRFdmVudDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICJmb2N1c2luIjoKICAgICAgICAgICAgICAgICAgcmVhY3RFdmVudFR5cGUgPSAiZm9jdXMiOwogICAgICAgICAgICAgICAgICBTeW50aGV0aWNFdmVudEN0b3IgPSBTeW50aGV0aWNGb2N1c0V2ZW50OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgImZvY3Vzb3V0IjoKICAgICAgICAgICAgICAgICAgcmVhY3RFdmVudFR5cGUgPSAiYmx1ciI7CiAgICAgICAgICAgICAgICAgIFN5bnRoZXRpY0V2ZW50Q3RvciA9IFN5bnRoZXRpY0ZvY3VzRXZlbnQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAiYmVmb3JlYmx1ciI6CiAgICAgICAgICAgICAgICBjYXNlICJhZnRlcmJsdXIiOgogICAgICAgICAgICAgICAgICBTeW50aGV0aWNFdmVudEN0b3IgPSBTeW50aGV0aWNGb2N1c0V2ZW50OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgImNsaWNrIjoKICAgICAgICAgICAgICAgICAgaWYgKDIgPT09IG5hdGl2ZUV2ZW50LmJ1dHRvbikgYnJlYWsgYTsKICAgICAgICAgICAgICAgIGNhc2UgImF1eGNsaWNrIjoKICAgICAgICAgICAgICAgIGNhc2UgImRibGNsaWNrIjoKICAgICAgICAgICAgICAgIGNhc2UgIm1vdXNlZG93biI6CiAgICAgICAgICAgICAgICBjYXNlICJtb3VzZW1vdmUiOgogICAgICAgICAgICAgICAgY2FzZSAibW91c2V1cCI6CiAgICAgICAgICAgICAgICBjYXNlICJtb3VzZW91dCI6CiAgICAgICAgICAgICAgICBjYXNlICJtb3VzZW92ZXIiOgogICAgICAgICAgICAgICAgY2FzZSAiY29udGV4dG1lbnUiOgogICAgICAgICAgICAgICAgICBTeW50aGV0aWNFdmVudEN0b3IgPSBTeW50aGV0aWNNb3VzZUV2ZW50OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgImRyYWciOgogICAgICAgICAgICAgICAgY2FzZSAiZHJhZ2VuZCI6CiAgICAgICAgICAgICAgICBjYXNlICJkcmFnZW50ZXIiOgogICAgICAgICAgICAgICAgY2FzZSAiZHJhZ2V4aXQiOgogICAgICAgICAgICAgICAgY2FzZSAiZHJhZ2xlYXZlIjoKICAgICAgICAgICAgICAgIGNhc2UgImRyYWdvdmVyIjoKICAgICAgICAgICAgICAgIGNhc2UgImRyYWdzdGFydCI6CiAgICAgICAgICAgICAgICBjYXNlICJkcm9wIjoKICAgICAgICAgICAgICAgICAgU3ludGhldGljRXZlbnRDdG9yID0gU3ludGhldGljRHJhZ0V2ZW50OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgInRvdWNoY2FuY2VsIjoKICAgICAgICAgICAgICAgIGNhc2UgInRvdWNoZW5kIjoKICAgICAgICAgICAgICAgIGNhc2UgInRvdWNobW92ZSI6CiAgICAgICAgICAgICAgICBjYXNlICJ0b3VjaHN0YXJ0IjoKICAgICAgICAgICAgICAgICAgU3ludGhldGljRXZlbnRDdG9yID0gU3ludGhldGljVG91Y2hFdmVudDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIEFOSU1BVElPTl9FTkQ6CiAgICAgICAgICAgICAgICBjYXNlIEFOSU1BVElPTl9JVEVSQVRJT046CiAgICAgICAgICAgICAgICBjYXNlIEFOSU1BVElPTl9TVEFSVDoKICAgICAgICAgICAgICAgICAgU3ludGhldGljRXZlbnRDdG9yID0gU3ludGhldGljQW5pbWF0aW9uRXZlbnQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBUUkFOU0lUSU9OX0VORDoKICAgICAgICAgICAgICAgICAgU3ludGhldGljRXZlbnRDdG9yID0gU3ludGhldGljVHJhbnNpdGlvbkV2ZW50OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgInNjcm9sbCI6CiAgICAgICAgICAgICAgICBjYXNlICJzY3JvbGxlbmQiOgogICAgICAgICAgICAgICAgICBTeW50aGV0aWNFdmVudEN0b3IgPSBTeW50aGV0aWNVSUV2ZW50OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgIndoZWVsIjoKICAgICAgICAgICAgICAgICAgU3ludGhldGljRXZlbnRDdG9yID0gU3ludGhldGljV2hlZWxFdmVudDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICJjb3B5IjoKICAgICAgICAgICAgICAgIGNhc2UgImN1dCI6CiAgICAgICAgICAgICAgICBjYXNlICJwYXN0ZSI6CiAgICAgICAgICAgICAgICAgIFN5bnRoZXRpY0V2ZW50Q3RvciA9IFN5bnRoZXRpY0NsaXBib2FyZEV2ZW50OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgImdvdHBvaW50ZXJjYXB0dXJlIjoKICAgICAgICAgICAgICAgIGNhc2UgImxvc3Rwb2ludGVyY2FwdHVyZSI6CiAgICAgICAgICAgICAgICBjYXNlICJwb2ludGVyY2FuY2VsIjoKICAgICAgICAgICAgICAgIGNhc2UgInBvaW50ZXJkb3duIjoKICAgICAgICAgICAgICAgIGNhc2UgInBvaW50ZXJtb3ZlIjoKICAgICAgICAgICAgICAgIGNhc2UgInBvaW50ZXJvdXQiOgogICAgICAgICAgICAgICAgY2FzZSAicG9pbnRlcm92ZXIiOgogICAgICAgICAgICAgICAgY2FzZSAicG9pbnRlcnVwIjoKICAgICAgICAgICAgICAgICAgU3ludGhldGljRXZlbnRDdG9yID0gU3ludGhldGljUG9pbnRlckV2ZW50OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgInRvZ2dsZSI6CiAgICAgICAgICAgICAgICBjYXNlICJiZWZvcmV0b2dnbGUiOgogICAgICAgICAgICAgICAgICBTeW50aGV0aWNFdmVudEN0b3IgPSBTeW50aGV0aWNUb2dnbGVFdmVudDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdmFyIGluQ2FwdHVyZVBoYXNlID0gMCAhPT0gKGV2ZW50U3lzdGVtRmxhZ3MgJiA0KSwgYWNjdW11bGF0ZVRhcmdldE9ubHkgPSAhaW5DYXB0dXJlUGhhc2UgJiYgKCJzY3JvbGwiID09PSBkb21FdmVudE5hbWUgfHwgInNjcm9sbGVuZCIgPT09IGRvbUV2ZW50TmFtZSksIHJlYWN0RXZlbnROYW1lID0gaW5DYXB0dXJlUGhhc2UgPyBudWxsICE9PSByZWFjdE5hbWUgPyByZWFjdE5hbWUgKyAiQ2FwdHVyZSIgOiBudWxsIDogcmVhY3ROYW1lOwogICAgICAgICAgICAgIGluQ2FwdHVyZVBoYXNlID0gW107CiAgICAgICAgICAgICAgZm9yICh2YXIgaW5zdGFuY2UgPSB0YXJnZXRJbnN0LCBsYXN0SG9zdENvbXBvbmVudDsgbnVsbCAhPT0gaW5zdGFuY2U7ICkgewogICAgICAgICAgICAgICAgdmFyIF9pbnN0YW5jZTIgPSBpbnN0YW5jZTsKICAgICAgICAgICAgICAgIGxhc3RIb3N0Q29tcG9uZW50ID0gX2luc3RhbmNlMi5zdGF0ZU5vZGU7CiAgICAgICAgICAgICAgICBfaW5zdGFuY2UyID0gX2luc3RhbmNlMi50YWc7CiAgICAgICAgICAgICAgICA1ICE9PSBfaW5zdGFuY2UyICYmIDI2ICE9PSBfaW5zdGFuY2UyICYmIDI3ICE9PSBfaW5zdGFuY2UyIHx8IG51bGwgPT09IGxhc3RIb3N0Q29tcG9uZW50IHx8IG51bGwgPT09IHJlYWN0RXZlbnROYW1lIHx8IChfaW5zdGFuY2UyID0gZ2V0TGlzdGVuZXIoaW5zdGFuY2UsIHJlYWN0RXZlbnROYW1lKSwgbnVsbCAhPSBfaW5zdGFuY2UyICYmIGluQ2FwdHVyZVBoYXNlLnB1c2goCiAgICAgICAgICAgICAgICAgIGNyZWF0ZURpc3BhdGNoTGlzdGVuZXIoCiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UsCiAgICAgICAgICAgICAgICAgICAgX2luc3RhbmNlMiwKICAgICAgICAgICAgICAgICAgICBsYXN0SG9zdENvbXBvbmVudAogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICApKTsKICAgICAgICAgICAgICAgIGlmIChhY2N1bXVsYXRlVGFyZ2V0T25seSkgYnJlYWs7CiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IGluc3RhbmNlLnJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgMCA8IGluQ2FwdHVyZVBoYXNlLmxlbmd0aCAmJiAocmVhY3ROYW1lID0gbmV3IFN5bnRoZXRpY0V2ZW50Q3RvcigKICAgICAgICAgICAgICAgIHJlYWN0TmFtZSwKICAgICAgICAgICAgICAgIHJlYWN0RXZlbnRUeXBlLAogICAgICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgICAgIG5hdGl2ZUV2ZW50LAogICAgICAgICAgICAgICAgbmF0aXZlRXZlbnRUYXJnZXQKICAgICAgICAgICAgICApLCBkaXNwYXRjaFF1ZXVlLnB1c2goewogICAgICAgICAgICAgICAgZXZlbnQ6IHJlYWN0TmFtZSwKICAgICAgICAgICAgICAgIGxpc3RlbmVyczogaW5DYXB0dXJlUGhhc2UKICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmICgwID09PSAoZXZlbnRTeXN0ZW1GbGFncyAmIDcpKSB7CiAgICAgICAgICAgIGE6IHsKICAgICAgICAgICAgICByZWFjdE5hbWUgPSAibW91c2VvdmVyIiA9PT0gZG9tRXZlbnROYW1lIHx8ICJwb2ludGVyb3ZlciIgPT09IGRvbUV2ZW50TmFtZTsKICAgICAgICAgICAgICBTeW50aGV0aWNFdmVudEN0b3IgPSAibW91c2VvdXQiID09PSBkb21FdmVudE5hbWUgfHwgInBvaW50ZXJvdXQiID09PSBkb21FdmVudE5hbWU7CiAgICAgICAgICAgICAgaWYgKHJlYWN0TmFtZSAmJiBuYXRpdmVFdmVudCAhPT0gY3VycmVudFJlcGxheWluZ0V2ZW50ICYmIChyZWFjdEV2ZW50VHlwZSA9IG5hdGl2ZUV2ZW50LnJlbGF0ZWRUYXJnZXQgfHwgbmF0aXZlRXZlbnQuZnJvbUVsZW1lbnQpICYmIChnZXRDbG9zZXN0SW5zdGFuY2VGcm9tTm9kZShyZWFjdEV2ZW50VHlwZSkgfHwgcmVhY3RFdmVudFR5cGVbaW50ZXJuYWxDb250YWluZXJJbnN0YW5jZUtleV0pKQogICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICBpZiAoU3ludGhldGljRXZlbnRDdG9yIHx8IHJlYWN0TmFtZSkgewogICAgICAgICAgICAgICAgcmVhY3ROYW1lID0gbmF0aXZlRXZlbnRUYXJnZXQud2luZG93ID09PSBuYXRpdmVFdmVudFRhcmdldCA/IG5hdGl2ZUV2ZW50VGFyZ2V0IDogKHJlYWN0TmFtZSA9IG5hdGl2ZUV2ZW50VGFyZ2V0Lm93bmVyRG9jdW1lbnQpID8gcmVhY3ROYW1lLmRlZmF1bHRWaWV3IHx8IHJlYWN0TmFtZS5wYXJlbnRXaW5kb3cgOiB3aW5kb3c7CiAgICAgICAgICAgICAgICBpZiAoU3ludGhldGljRXZlbnRDdG9yKSB7CiAgICAgICAgICAgICAgICAgIGlmIChyZWFjdEV2ZW50VHlwZSA9IG5hdGl2ZUV2ZW50LnJlbGF0ZWRUYXJnZXQgfHwgbmF0aXZlRXZlbnQudG9FbGVtZW50LCBTeW50aGV0aWNFdmVudEN0b3IgPSB0YXJnZXRJbnN0LCByZWFjdEV2ZW50VHlwZSA9IHJlYWN0RXZlbnRUeXBlID8gZ2V0Q2xvc2VzdEluc3RhbmNlRnJvbU5vZGUocmVhY3RFdmVudFR5cGUpIDogbnVsbCwgbnVsbCAhPT0gcmVhY3RFdmVudFR5cGUgJiYgKGFjY3VtdWxhdGVUYXJnZXRPbmx5ID0gZ2V0TmVhcmVzdE1vdW50ZWRGaWJlcihyZWFjdEV2ZW50VHlwZSksIGluQ2FwdHVyZVBoYXNlID0gcmVhY3RFdmVudFR5cGUudGFnLCByZWFjdEV2ZW50VHlwZSAhPT0gYWNjdW11bGF0ZVRhcmdldE9ubHkgfHwgNSAhPT0gaW5DYXB0dXJlUGhhc2UgJiYgMjcgIT09IGluQ2FwdHVyZVBoYXNlICYmIDYgIT09IGluQ2FwdHVyZVBoYXNlKSkKICAgICAgICAgICAgICAgICAgICByZWFjdEV2ZW50VHlwZSA9IG51bGw7CiAgICAgICAgICAgICAgICB9IGVsc2UgU3ludGhldGljRXZlbnRDdG9yID0gbnVsbCwgcmVhY3RFdmVudFR5cGUgPSB0YXJnZXRJbnN0OwogICAgICAgICAgICAgICAgaWYgKFN5bnRoZXRpY0V2ZW50Q3RvciAhPT0gcmVhY3RFdmVudFR5cGUpIHsKICAgICAgICAgICAgICAgICAgaW5DYXB0dXJlUGhhc2UgPSBTeW50aGV0aWNNb3VzZUV2ZW50OwogICAgICAgICAgICAgICAgICBfaW5zdGFuY2UyID0gIm9uTW91c2VMZWF2ZSI7CiAgICAgICAgICAgICAgICAgIHJlYWN0RXZlbnROYW1lID0gIm9uTW91c2VFbnRlciI7CiAgICAgICAgICAgICAgICAgIGluc3RhbmNlID0gIm1vdXNlIjsKICAgICAgICAgICAgICAgICAgaWYgKCJwb2ludGVyb3V0IiA9PT0gZG9tRXZlbnROYW1lIHx8ICJwb2ludGVyb3ZlciIgPT09IGRvbUV2ZW50TmFtZSkKICAgICAgICAgICAgICAgICAgICBpbkNhcHR1cmVQaGFzZSA9IFN5bnRoZXRpY1BvaW50ZXJFdmVudCwgX2luc3RhbmNlMiA9ICJvblBvaW50ZXJMZWF2ZSIsIHJlYWN0RXZlbnROYW1lID0gIm9uUG9pbnRlckVudGVyIiwgaW5zdGFuY2UgPSAicG9pbnRlciI7CiAgICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVUYXJnZXRPbmx5ID0gbnVsbCA9PSBTeW50aGV0aWNFdmVudEN0b3IgPyByZWFjdE5hbWUgOiBnZXROb2RlRnJvbUluc3RhbmNlKFN5bnRoZXRpY0V2ZW50Q3Rvcik7CiAgICAgICAgICAgICAgICAgIGxhc3RIb3N0Q29tcG9uZW50ID0gbnVsbCA9PSByZWFjdEV2ZW50VHlwZSA/IHJlYWN0TmFtZSA6IGdldE5vZGVGcm9tSW5zdGFuY2UocmVhY3RFdmVudFR5cGUpOwogICAgICAgICAgICAgICAgICByZWFjdE5hbWUgPSBuZXcgaW5DYXB0dXJlUGhhc2UoCiAgICAgICAgICAgICAgICAgICAgX2luc3RhbmNlMiwKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZSArICJsZWF2ZSIsCiAgICAgICAgICAgICAgICAgICAgU3ludGhldGljRXZlbnRDdG9yLAogICAgICAgICAgICAgICAgICAgIG5hdGl2ZUV2ZW50LAogICAgICAgICAgICAgICAgICAgIG5hdGl2ZUV2ZW50VGFyZ2V0CiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIHJlYWN0TmFtZS50YXJnZXQgPSBhY2N1bXVsYXRlVGFyZ2V0T25seTsKICAgICAgICAgICAgICAgICAgcmVhY3ROYW1lLnJlbGF0ZWRUYXJnZXQgPSBsYXN0SG9zdENvbXBvbmVudDsKICAgICAgICAgICAgICAgICAgX2luc3RhbmNlMiA9IG51bGw7CiAgICAgICAgICAgICAgICAgIGdldENsb3Nlc3RJbnN0YW5jZUZyb21Ob2RlKG5hdGl2ZUV2ZW50VGFyZ2V0KSA9PT0gdGFyZ2V0SW5zdCAmJiAoaW5DYXB0dXJlUGhhc2UgPSBuZXcgaW5DYXB0dXJlUGhhc2UoCiAgICAgICAgICAgICAgICAgICAgcmVhY3RFdmVudE5hbWUsCiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UgKyAiZW50ZXIiLAogICAgICAgICAgICAgICAgICAgIHJlYWN0RXZlbnRUeXBlLAogICAgICAgICAgICAgICAgICAgIG5hdGl2ZUV2ZW50LAogICAgICAgICAgICAgICAgICAgIG5hdGl2ZUV2ZW50VGFyZ2V0CiAgICAgICAgICAgICAgICAgICksIGluQ2FwdHVyZVBoYXNlLnRhcmdldCA9IGxhc3RIb3N0Q29tcG9uZW50LCBpbkNhcHR1cmVQaGFzZS5yZWxhdGVkVGFyZ2V0ID0gYWNjdW11bGF0ZVRhcmdldE9ubHksIF9pbnN0YW5jZTIgPSBpbkNhcHR1cmVQaGFzZSk7CiAgICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVUYXJnZXRPbmx5ID0gX2luc3RhbmNlMjsKICAgICAgICAgICAgICAgICAgaWYgKFN5bnRoZXRpY0V2ZW50Q3RvciAmJiByZWFjdEV2ZW50VHlwZSkKICAgICAgICAgICAgICAgICAgICBiOiB7CiAgICAgICAgICAgICAgICAgICAgICBpbkNhcHR1cmVQaGFzZSA9IFN5bnRoZXRpY0V2ZW50Q3RvcjsKICAgICAgICAgICAgICAgICAgICAgIHJlYWN0RXZlbnROYW1lID0gcmVhY3RFdmVudFR5cGU7CiAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxhc3RIb3N0Q29tcG9uZW50ID0gaW5DYXB0dXJlUGhhc2U7IGxhc3RIb3N0Q29tcG9uZW50OyBsYXN0SG9zdENvbXBvbmVudCA9IGdldFBhcmVudChsYXN0SG9zdENvbXBvbmVudCkpCiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlKys7CiAgICAgICAgICAgICAgICAgICAgICBsYXN0SG9zdENvbXBvbmVudCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICBmb3IgKF9pbnN0YW5jZTIgPSByZWFjdEV2ZW50TmFtZTsgX2luc3RhbmNlMjsgX2luc3RhbmNlMiA9IGdldFBhcmVudChfaW5zdGFuY2UyKSkKICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEhvc3RDb21wb25lbnQrKzsKICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyAwIDwgaW5zdGFuY2UgLSBsYXN0SG9zdENvbXBvbmVudDsgKQogICAgICAgICAgICAgICAgICAgICAgICBpbkNhcHR1cmVQaGFzZSA9IGdldFBhcmVudChpbkNhcHR1cmVQaGFzZSksIGluc3RhbmNlLS07CiAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgMCA8IGxhc3RIb3N0Q29tcG9uZW50IC0gaW5zdGFuY2U7ICkKICAgICAgICAgICAgICAgICAgICAgICAgcmVhY3RFdmVudE5hbWUgPSBnZXRQYXJlbnQocmVhY3RFdmVudE5hbWUpLCBsYXN0SG9zdENvbXBvbmVudC0tOwogICAgICAgICAgICAgICAgICAgICAgZm9yICg7IGluc3RhbmNlLS07ICkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5DYXB0dXJlUGhhc2UgPT09IHJlYWN0RXZlbnROYW1lIHx8IG51bGwgIT09IHJlYWN0RXZlbnROYW1lICYmIGluQ2FwdHVyZVBoYXNlID09PSByZWFjdEV2ZW50TmFtZS5hbHRlcm5hdGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgYjsKICAgICAgICAgICAgICAgICAgICAgICAgaW5DYXB0dXJlUGhhc2UgPSBnZXRQYXJlbnQoaW5DYXB0dXJlUGhhc2UpOwogICAgICAgICAgICAgICAgICAgICAgICByZWFjdEV2ZW50TmFtZSA9IGdldFBhcmVudChyZWFjdEV2ZW50TmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBpbkNhcHR1cmVQaGFzZSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBlbHNlIGluQ2FwdHVyZVBoYXNlID0gbnVsbDsKICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gU3ludGhldGljRXZlbnRDdG9yICYmIGFjY3VtdWxhdGVFbnRlckxlYXZlTGlzdGVuZXJzRm9yRXZlbnQoCiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2hRdWV1ZSwKICAgICAgICAgICAgICAgICAgICByZWFjdE5hbWUsCiAgICAgICAgICAgICAgICAgICAgU3ludGhldGljRXZlbnRDdG9yLAogICAgICAgICAgICAgICAgICAgIGluQ2FwdHVyZVBoYXNlLAogICAgICAgICAgICAgICAgICAgIGZhbHNlCiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIG51bGwgIT09IHJlYWN0RXZlbnRUeXBlICYmIG51bGwgIT09IGFjY3VtdWxhdGVUYXJnZXRPbmx5ICYmIGFjY3VtdWxhdGVFbnRlckxlYXZlTGlzdGVuZXJzRm9yRXZlbnQoCiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2hRdWV1ZSwKICAgICAgICAgICAgICAgICAgICBhY2N1bXVsYXRlVGFyZ2V0T25seSwKICAgICAgICAgICAgICAgICAgICByZWFjdEV2ZW50VHlwZSwKICAgICAgICAgICAgICAgICAgICBpbkNhcHR1cmVQaGFzZSwKICAgICAgICAgICAgICAgICAgICB0cnVlCiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGE6IHsKICAgICAgICAgICAgICByZWFjdE5hbWUgPSB0YXJnZXRJbnN0ID8gZ2V0Tm9kZUZyb21JbnN0YW5jZSh0YXJnZXRJbnN0KSA6IHdpbmRvdzsKICAgICAgICAgICAgICBTeW50aGV0aWNFdmVudEN0b3IgPSByZWFjdE5hbWUubm9kZU5hbWUgJiYgcmVhY3ROYW1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgICAgaWYgKCJzZWxlY3QiID09PSBTeW50aGV0aWNFdmVudEN0b3IgfHwgImlucHV0IiA9PT0gU3ludGhldGljRXZlbnRDdG9yICYmICJmaWxlIiA9PT0gcmVhY3ROYW1lLnR5cGUpCiAgICAgICAgICAgICAgICB2YXIgZ2V0VGFyZ2V0SW5zdEZ1bmMgPSBnZXRUYXJnZXRJbnN0Rm9yQ2hhbmdlRXZlbnQ7CiAgICAgICAgICAgICAgZWxzZSBpZiAoaXNUZXh0SW5wdXRFbGVtZW50KHJlYWN0TmFtZSkpCiAgICAgICAgICAgICAgICBpZiAoaXNJbnB1dEV2ZW50U3VwcG9ydGVkKQogICAgICAgICAgICAgICAgICBnZXRUYXJnZXRJbnN0RnVuYyA9IGdldFRhcmdldEluc3RGb3JJbnB1dE9yQ2hhbmdlRXZlbnQ7CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgZ2V0VGFyZ2V0SW5zdEZ1bmMgPSBnZXRUYXJnZXRJbnN0Rm9ySW5wdXRFdmVudFBvbHlmaWxsOwogICAgICAgICAgICAgICAgICB2YXIgaGFuZGxlRXZlbnRGdW5jID0gaGFuZGxlRXZlbnRzRm9ySW5wdXRFdmVudFBvbHlmaWxsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIFN5bnRoZXRpY0V2ZW50Q3RvciA9IHJlYWN0TmFtZS5ub2RlTmFtZSwgIVN5bnRoZXRpY0V2ZW50Q3RvciB8fCAiaW5wdXQiICE9PSBTeW50aGV0aWNFdmVudEN0b3IudG9Mb3dlckNhc2UoKSB8fCAiY2hlY2tib3giICE9PSByZWFjdE5hbWUudHlwZSAmJiAicmFkaW8iICE9PSByZWFjdE5hbWUudHlwZSA/IHRhcmdldEluc3QgJiYgaXNDdXN0b21FbGVtZW50KHRhcmdldEluc3QuZWxlbWVudFR5cGUpICYmIChnZXRUYXJnZXRJbnN0RnVuYyA9IGdldFRhcmdldEluc3RGb3JDaGFuZ2VFdmVudCkgOiBnZXRUYXJnZXRJbnN0RnVuYyA9IGdldFRhcmdldEluc3RGb3JDbGlja0V2ZW50OwogICAgICAgICAgICAgIGlmIChnZXRUYXJnZXRJbnN0RnVuYyAmJiAoZ2V0VGFyZ2V0SW5zdEZ1bmMgPSBnZXRUYXJnZXRJbnN0RnVuYyhkb21FdmVudE5hbWUsIHRhcmdldEluc3QpKSkgewogICAgICAgICAgICAgICAgY3JlYXRlQW5kQWNjdW11bGF0ZUNoYW5nZUV2ZW50KAogICAgICAgICAgICAgICAgICBkaXNwYXRjaFF1ZXVlLAogICAgICAgICAgICAgICAgICBnZXRUYXJnZXRJbnN0RnVuYywKICAgICAgICAgICAgICAgICAgbmF0aXZlRXZlbnQsCiAgICAgICAgICAgICAgICAgIG5hdGl2ZUV2ZW50VGFyZ2V0CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaGFuZGxlRXZlbnRGdW5jICYmIGhhbmRsZUV2ZW50RnVuYyhkb21FdmVudE5hbWUsIHJlYWN0TmFtZSwgdGFyZ2V0SW5zdCk7CiAgICAgICAgICAgICAgImZvY3Vzb3V0IiA9PT0gZG9tRXZlbnROYW1lICYmIHRhcmdldEluc3QgJiYgIm51bWJlciIgPT09IHJlYWN0TmFtZS50eXBlICYmIG51bGwgIT0gdGFyZ2V0SW5zdC5tZW1vaXplZFByb3BzLnZhbHVlICYmIHNldERlZmF1bHRWYWx1ZShyZWFjdE5hbWUsICJudW1iZXIiLCByZWFjdE5hbWUudmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGhhbmRsZUV2ZW50RnVuYyA9IHRhcmdldEluc3QgPyBnZXROb2RlRnJvbUluc3RhbmNlKHRhcmdldEluc3QpIDogd2luZG93OwogICAgICAgICAgICBzd2l0Y2ggKGRvbUV2ZW50TmFtZSkgewogICAgICAgICAgICAgIGNhc2UgImZvY3VzaW4iOgogICAgICAgICAgICAgICAgaWYgKGlzVGV4dElucHV0RWxlbWVudChoYW5kbGVFdmVudEZ1bmMpIHx8ICJ0cnVlIiA9PT0gaGFuZGxlRXZlbnRGdW5jLmNvbnRlbnRFZGl0YWJsZSkKICAgICAgICAgICAgICAgICAgYWN0aXZlRWxlbWVudCA9IGhhbmRsZUV2ZW50RnVuYywgYWN0aXZlRWxlbWVudEluc3QgPSB0YXJnZXRJbnN0LCBsYXN0U2VsZWN0aW9uID0gbnVsbDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgImZvY3Vzb3V0IjoKICAgICAgICAgICAgICAgIGxhc3RTZWxlY3Rpb24gPSBhY3RpdmVFbGVtZW50SW5zdCA9IGFjdGl2ZUVsZW1lbnQgPSBudWxsOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAibW91c2Vkb3duIjoKICAgICAgICAgICAgICAgIG1vdXNlRG93biA9IHRydWU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlICJjb250ZXh0bWVudSI6CiAgICAgICAgICAgICAgY2FzZSAibW91c2V1cCI6CiAgICAgICAgICAgICAgY2FzZSAiZHJhZ2VuZCI6CiAgICAgICAgICAgICAgICBtb3VzZURvd24gPSBmYWxzZTsKICAgICAgICAgICAgICAgIGNvbnN0cnVjdFNlbGVjdEV2ZW50KAogICAgICAgICAgICAgICAgICBkaXNwYXRjaFF1ZXVlLAogICAgICAgICAgICAgICAgICBuYXRpdmVFdmVudCwKICAgICAgICAgICAgICAgICAgbmF0aXZlRXZlbnRUYXJnZXQKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlICJzZWxlY3Rpb25jaGFuZ2UiOgogICAgICAgICAgICAgICAgaWYgKHNraXBTZWxlY3Rpb25DaGFuZ2VFdmVudCkgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAia2V5ZG93biI6CiAgICAgICAgICAgICAgY2FzZSAia2V5dXAiOgogICAgICAgICAgICAgICAgY29uc3RydWN0U2VsZWN0RXZlbnQoCiAgICAgICAgICAgICAgICAgIGRpc3BhdGNoUXVldWUsCiAgICAgICAgICAgICAgICAgIG5hdGl2ZUV2ZW50LAogICAgICAgICAgICAgICAgICBuYXRpdmVFdmVudFRhcmdldAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgZmFsbGJhY2tEYXRhOwogICAgICAgICAgICBpZiAoY2FuVXNlQ29tcG9zaXRpb25FdmVudCkKICAgICAgICAgICAgICBiOiB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKGRvbUV2ZW50TmFtZSkgewogICAgICAgICAgICAgICAgICBjYXNlICJjb21wb3NpdGlvbnN0YXJ0IjoKICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnRUeXBlID0gIm9uQ29tcG9zaXRpb25TdGFydCI7CiAgICAgICAgICAgICAgICAgICAgYnJlYWsgYjsKICAgICAgICAgICAgICAgICAgY2FzZSAiY29tcG9zaXRpb25lbmQiOgogICAgICAgICAgICAgICAgICAgIGV2ZW50VHlwZSA9ICJvbkNvbXBvc2l0aW9uRW5kIjsKICAgICAgICAgICAgICAgICAgICBicmVhayBiOwogICAgICAgICAgICAgICAgICBjYXNlICJjb21wb3NpdGlvbnVwZGF0ZSI6CiAgICAgICAgICAgICAgICAgICAgZXZlbnRUeXBlID0gIm9uQ29tcG9zaXRpb25VcGRhdGUiOwogICAgICAgICAgICAgICAgICAgIGJyZWFrIGI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBldmVudFR5cGUgPSB2b2lkIDA7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgaXNDb21wb3NpbmcgPyBpc0ZhbGxiYWNrQ29tcG9zaXRpb25FbmQoZG9tRXZlbnROYW1lLCBuYXRpdmVFdmVudCkgJiYgKGV2ZW50VHlwZSA9ICJvbkNvbXBvc2l0aW9uRW5kIikgOiAia2V5ZG93biIgPT09IGRvbUV2ZW50TmFtZSAmJiBuYXRpdmVFdmVudC5rZXlDb2RlID09PSBTVEFSVF9LRVlDT0RFICYmIChldmVudFR5cGUgPSAib25Db21wb3NpdGlvblN0YXJ0Iik7CiAgICAgICAgICAgIGV2ZW50VHlwZSAmJiAodXNlRmFsbGJhY2tDb21wb3NpdGlvbkRhdGEgJiYgImtvIiAhPT0gbmF0aXZlRXZlbnQubG9jYWxlICYmIChpc0NvbXBvc2luZyB8fCAib25Db21wb3NpdGlvblN0YXJ0IiAhPT0gZXZlbnRUeXBlID8gIm9uQ29tcG9zaXRpb25FbmQiID09PSBldmVudFR5cGUgJiYgaXNDb21wb3NpbmcgJiYgKGZhbGxiYWNrRGF0YSA9IGdldERhdGEoKSkgOiAocm9vdCA9IG5hdGl2ZUV2ZW50VGFyZ2V0LCBzdGFydFRleHQgPSAidmFsdWUiIGluIHJvb3QgPyByb290LnZhbHVlIDogcm9vdC50ZXh0Q29udGVudCwgaXNDb21wb3NpbmcgPSB0cnVlKSksIGhhbmRsZUV2ZW50RnVuYyA9IGFjY3VtdWxhdGVUd29QaGFzZUxpc3RlbmVycygKICAgICAgICAgICAgICB0YXJnZXRJbnN0LAogICAgICAgICAgICAgIGV2ZW50VHlwZQogICAgICAgICAgICApLCAwIDwgaGFuZGxlRXZlbnRGdW5jLmxlbmd0aCAmJiAoZXZlbnRUeXBlID0gbmV3IFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQoCiAgICAgICAgICAgICAgZXZlbnRUeXBlLAogICAgICAgICAgICAgIGRvbUV2ZW50TmFtZSwKICAgICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgIG5hdGl2ZUV2ZW50LAogICAgICAgICAgICAgIG5hdGl2ZUV2ZW50VGFyZ2V0CiAgICAgICAgICAgICksIGRpc3BhdGNoUXVldWUucHVzaCh7CiAgICAgICAgICAgICAgZXZlbnQ6IGV2ZW50VHlwZSwKICAgICAgICAgICAgICBsaXN0ZW5lcnM6IGhhbmRsZUV2ZW50RnVuYwogICAgICAgICAgICB9KSwgZmFsbGJhY2tEYXRhID8gZXZlbnRUeXBlLmRhdGEgPSBmYWxsYmFja0RhdGEgOiAoZmFsbGJhY2tEYXRhID0gZ2V0RGF0YUZyb21DdXN0b21FdmVudChuYXRpdmVFdmVudCksIG51bGwgIT09IGZhbGxiYWNrRGF0YSAmJiAoZXZlbnRUeXBlLmRhdGEgPSBmYWxsYmFja0RhdGEpKSkpOwogICAgICAgICAgICBpZiAoZmFsbGJhY2tEYXRhID0gY2FuVXNlVGV4dElucHV0RXZlbnQgPyBnZXROYXRpdmVCZWZvcmVJbnB1dENoYXJzKGRvbUV2ZW50TmFtZSwgbmF0aXZlRXZlbnQpIDogZ2V0RmFsbGJhY2tCZWZvcmVJbnB1dENoYXJzKGRvbUV2ZW50TmFtZSwgbmF0aXZlRXZlbnQpKQogICAgICAgICAgICAgIGV2ZW50VHlwZSA9IGFjY3VtdWxhdGVUd29QaGFzZUxpc3RlbmVycygKICAgICAgICAgICAgICAgIHRhcmdldEluc3QsCiAgICAgICAgICAgICAgICAib25CZWZvcmVJbnB1dCIKICAgICAgICAgICAgICApLCAwIDwgZXZlbnRUeXBlLmxlbmd0aCAmJiAoaGFuZGxlRXZlbnRGdW5jID0gbmV3IFN5bnRoZXRpY0lucHV0RXZlbnQoCiAgICAgICAgICAgICAgICAib25CZWZvcmVJbnB1dCIsCiAgICAgICAgICAgICAgICAiYmVmb3JlaW5wdXQiLAogICAgICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgICAgIG5hdGl2ZUV2ZW50LAogICAgICAgICAgICAgICAgbmF0aXZlRXZlbnRUYXJnZXQKICAgICAgICAgICAgICApLCBkaXNwYXRjaFF1ZXVlLnB1c2goewogICAgICAgICAgICAgICAgZXZlbnQ6IGhhbmRsZUV2ZW50RnVuYywKICAgICAgICAgICAgICAgIGxpc3RlbmVyczogZXZlbnRUeXBlCiAgICAgICAgICAgICAgfSksIGhhbmRsZUV2ZW50RnVuYy5kYXRhID0gZmFsbGJhY2tEYXRhKTsKICAgICAgICAgICAgZXh0cmFjdEV2ZW50cyQxKAogICAgICAgICAgICAgIGRpc3BhdGNoUXVldWUsCiAgICAgICAgICAgICAgZG9tRXZlbnROYW1lLAogICAgICAgICAgICAgIHRhcmdldEluc3QsCiAgICAgICAgICAgICAgbmF0aXZlRXZlbnQsCiAgICAgICAgICAgICAgbmF0aXZlRXZlbnRUYXJnZXQKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIHByb2Nlc3NEaXNwYXRjaFF1ZXVlKGRpc3BhdGNoUXVldWUsIGV2ZW50U3lzdGVtRmxhZ3MpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNyZWF0ZURpc3BhdGNoTGlzdGVuZXIoaW5zdGFuY2UsIGxpc3RlbmVyLCBjdXJyZW50VGFyZ2V0KSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGluc3RhbmNlLAogICAgICAgICAgbGlzdGVuZXIsCiAgICAgICAgICBjdXJyZW50VGFyZ2V0CiAgICAgICAgfTsKICAgICAgfQogICAgICBmdW5jdGlvbiBhY2N1bXVsYXRlVHdvUGhhc2VMaXN0ZW5lcnModGFyZ2V0RmliZXIsIHJlYWN0TmFtZSkgewogICAgICAgIGZvciAodmFyIGNhcHR1cmVOYW1lID0gcmVhY3ROYW1lICsgIkNhcHR1cmUiLCBsaXN0ZW5lcnMgPSBbXTsgbnVsbCAhPT0gdGFyZ2V0RmliZXI7ICkgewogICAgICAgICAgdmFyIF9pbnN0YW5jZTMgPSB0YXJnZXRGaWJlciwgc3RhdGVOb2RlID0gX2luc3RhbmNlMy5zdGF0ZU5vZGU7CiAgICAgICAgICBfaW5zdGFuY2UzID0gX2luc3RhbmNlMy50YWc7CiAgICAgICAgICA1ICE9PSBfaW5zdGFuY2UzICYmIDI2ICE9PSBfaW5zdGFuY2UzICYmIDI3ICE9PSBfaW5zdGFuY2UzIHx8IG51bGwgPT09IHN0YXRlTm9kZSB8fCAoX2luc3RhbmNlMyA9IGdldExpc3RlbmVyKHRhcmdldEZpYmVyLCBjYXB0dXJlTmFtZSksIG51bGwgIT0gX2luc3RhbmNlMyAmJiBsaXN0ZW5lcnMudW5zaGlmdCgKICAgICAgICAgICAgY3JlYXRlRGlzcGF0Y2hMaXN0ZW5lcih0YXJnZXRGaWJlciwgX2luc3RhbmNlMywgc3RhdGVOb2RlKQogICAgICAgICAgKSwgX2luc3RhbmNlMyA9IGdldExpc3RlbmVyKHRhcmdldEZpYmVyLCByZWFjdE5hbWUpLCBudWxsICE9IF9pbnN0YW5jZTMgJiYgbGlzdGVuZXJzLnB1c2goCiAgICAgICAgICAgIGNyZWF0ZURpc3BhdGNoTGlzdGVuZXIodGFyZ2V0RmliZXIsIF9pbnN0YW5jZTMsIHN0YXRlTm9kZSkKICAgICAgICAgICkpOwogICAgICAgICAgaWYgKDMgPT09IHRhcmdldEZpYmVyLnRhZykgcmV0dXJuIGxpc3RlbmVyczsKICAgICAgICAgIHRhcmdldEZpYmVyID0gdGFyZ2V0RmliZXIucmV0dXJuOwogICAgICAgIH0KICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0UGFyZW50KGluc3QpIHsKICAgICAgICBpZiAobnVsbCA9PT0gaW5zdCkgcmV0dXJuIG51bGw7CiAgICAgICAgZG8KICAgICAgICAgIGluc3QgPSBpbnN0LnJldHVybjsKICAgICAgICB3aGlsZSAoaW5zdCAmJiA1ICE9PSBpbnN0LnRhZyAmJiAyNyAhPT0gaW5zdC50YWcpOwogICAgICAgIHJldHVybiBpbnN0ID8gaW5zdCA6IG51bGw7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gYWNjdW11bGF0ZUVudGVyTGVhdmVMaXN0ZW5lcnNGb3JFdmVudChkaXNwYXRjaFF1ZXVlLCBldmVudCwgdGFyZ2V0LCBjb21tb24sIGluQ2FwdHVyZVBoYXNlKSB7CiAgICAgICAgZm9yICh2YXIgcmVnaXN0cmF0aW9uTmFtZSA9IGV2ZW50Ll9yZWFjdE5hbWUsIGxpc3RlbmVycyA9IFtdOyBudWxsICE9PSB0YXJnZXQgJiYgdGFyZ2V0ICE9PSBjb21tb247ICkgewogICAgICAgICAgdmFyIF9pbnN0YW5jZTQgPSB0YXJnZXQsIGFsdGVybmF0ZSA9IF9pbnN0YW5jZTQuYWx0ZXJuYXRlLCBzdGF0ZU5vZGUgPSBfaW5zdGFuY2U0LnN0YXRlTm9kZTsKICAgICAgICAgIF9pbnN0YW5jZTQgPSBfaW5zdGFuY2U0LnRhZzsKICAgICAgICAgIGlmIChudWxsICE9PSBhbHRlcm5hdGUgJiYgYWx0ZXJuYXRlID09PSBjb21tb24pIGJyZWFrOwogICAgICAgICAgNSAhPT0gX2luc3RhbmNlNCAmJiAyNiAhPT0gX2luc3RhbmNlNCAmJiAyNyAhPT0gX2luc3RhbmNlNCB8fCBudWxsID09PSBzdGF0ZU5vZGUgfHwgKGFsdGVybmF0ZSA9IHN0YXRlTm9kZSwgaW5DYXB0dXJlUGhhc2UgPyAoc3RhdGVOb2RlID0gZ2V0TGlzdGVuZXIodGFyZ2V0LCByZWdpc3RyYXRpb25OYW1lKSwgbnVsbCAhPSBzdGF0ZU5vZGUgJiYgbGlzdGVuZXJzLnVuc2hpZnQoCiAgICAgICAgICAgIGNyZWF0ZURpc3BhdGNoTGlzdGVuZXIodGFyZ2V0LCBzdGF0ZU5vZGUsIGFsdGVybmF0ZSkKICAgICAgICAgICkpIDogaW5DYXB0dXJlUGhhc2UgfHwgKHN0YXRlTm9kZSA9IGdldExpc3RlbmVyKHRhcmdldCwgcmVnaXN0cmF0aW9uTmFtZSksIG51bGwgIT0gc3RhdGVOb2RlICYmIGxpc3RlbmVycy5wdXNoKAogICAgICAgICAgICBjcmVhdGVEaXNwYXRjaExpc3RlbmVyKHRhcmdldCwgc3RhdGVOb2RlLCBhbHRlcm5hdGUpCiAgICAgICAgICApKSk7CiAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQucmV0dXJuOwogICAgICAgIH0KICAgICAgICAwICE9PSBsaXN0ZW5lcnMubGVuZ3RoICYmIGRpc3BhdGNoUXVldWUucHVzaCh7IGV2ZW50LCBsaXN0ZW5lcnMgfSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdmFsaWRhdGVQcm9wZXJ0aWVzSW5EZXZlbG9wbWVudCh0eXBlLCBwcm9wcykgewogICAgICAgIHZhbGlkYXRlUHJvcGVydGllcyQyKHR5cGUsIHByb3BzKTsKICAgICAgICAiaW5wdXQiICE9PSB0eXBlICYmICJ0ZXh0YXJlYSIgIT09IHR5cGUgJiYgInNlbGVjdCIgIT09IHR5cGUgfHwgbnVsbCA9PSBwcm9wcyB8fCBudWxsICE9PSBwcm9wcy52YWx1ZSB8fCBkaWRXYXJuVmFsdWVOdWxsIHx8IChkaWRXYXJuVmFsdWVOdWxsID0gdHJ1ZSwgInNlbGVjdCIgPT09IHR5cGUgJiYgcHJvcHMubXVsdGlwbGUgPyBjb25zb2xlLmVycm9yKAogICAgICAgICAgImB2YWx1ZWAgcHJvcCBvbiBgJXNgIHNob3VsZCBub3QgYmUgbnVsbC4gQ29uc2lkZXIgdXNpbmcgYW4gZW1wdHkgYXJyYXkgd2hlbiBgbXVsdGlwbGVgIGlzIHNldCB0byBgdHJ1ZWAgdG8gY2xlYXIgdGhlIGNvbXBvbmVudCBvciBgdW5kZWZpbmVkYCBmb3IgdW5jb250cm9sbGVkIGNvbXBvbmVudHMuIiwKICAgICAgICAgIHR5cGUKICAgICAgICApIDogY29uc29sZS5lcnJvcigKICAgICAgICAgICJgdmFsdWVgIHByb3Agb24gYCVzYCBzaG91bGQgbm90IGJlIG51bGwuIENvbnNpZGVyIHVzaW5nIGFuIGVtcHR5IHN0cmluZyB0byBjbGVhciB0aGUgY29tcG9uZW50IG9yIGB1bmRlZmluZWRgIGZvciB1bmNvbnRyb2xsZWQgY29tcG9uZW50cy4iLAogICAgICAgICAgdHlwZQogICAgICAgICkpOwogICAgICAgIHZhciBldmVudFJlZ2lzdHJ5ID0gewogICAgICAgICAgcmVnaXN0cmF0aW9uTmFtZURlcGVuZGVuY2llcywKICAgICAgICAgIHBvc3NpYmxlUmVnaXN0cmF0aW9uTmFtZXMKICAgICAgICB9OwogICAgICAgIGlzQ3VzdG9tRWxlbWVudCh0eXBlKSB8fCAic3RyaW5nIiA9PT0gdHlwZW9mIHByb3BzLmlzIHx8IHdhcm5Vbmtub3duUHJvcGVydGllcyh0eXBlLCBwcm9wcywgZXZlbnRSZWdpc3RyeSk7CiAgICAgICAgcHJvcHMuY29udGVudEVkaXRhYmxlICYmICFwcm9wcy5zdXBwcmVzc0NvbnRlbnRFZGl0YWJsZVdhcm5pbmcgJiYgbnVsbCAhPSBwcm9wcy5jaGlsZHJlbiAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgIkEgY29tcG9uZW50IGlzIGBjb250ZW50RWRpdGFibGVgIGFuZCBjb250YWlucyBgY2hpbGRyZW5gIG1hbmFnZWQgYnkgUmVhY3QuIEl0IGlzIG5vdyB5b3VyIHJlc3BvbnNpYmlsaXR5IHRvIGd1YXJhbnRlZSB0aGF0IG5vbmUgb2YgdGhvc2Ugbm9kZXMgYXJlIHVuZXhwZWN0ZWRseSBtb2RpZmllZCBvciBkdXBsaWNhdGVkLiBUaGlzIGlzIHByb2JhYmx5IG5vdCBpbnRlbnRpb25hbC4iCiAgICAgICAgKTsKICAgICAgfQogICAgICBmdW5jdGlvbiB3YXJuRm9yUHJvcERpZmZlcmVuY2UocHJvcE5hbWUsIHNlcnZlclZhbHVlLCBjbGllbnRWYWx1ZSwgc2VydmVyRGlmZmVyZW5jZXMpIHsKICAgICAgICBzZXJ2ZXJWYWx1ZSAhPT0gY2xpZW50VmFsdWUgJiYgKGNsaWVudFZhbHVlID0gbm9ybWFsaXplTWFya3VwRm9yVGV4dE9yQXR0cmlidXRlKGNsaWVudFZhbHVlKSwgbm9ybWFsaXplTWFya3VwRm9yVGV4dE9yQXR0cmlidXRlKHNlcnZlclZhbHVlKSAhPT0gY2xpZW50VmFsdWUgJiYgKHNlcnZlckRpZmZlcmVuY2VzW3Byb3BOYW1lXSA9IHNlcnZlclZhbHVlKSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gd2FybkZvckV4dHJhQXR0cmlidXRlcyhkb21FbGVtZW50LCBhdHRyaWJ1dGVOYW1lcywgc2VydmVyRGlmZmVyZW5jZXMpIHsKICAgICAgICBhdHRyaWJ1dGVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uKGF0dHJpYnV0ZU5hbWUpIHsKICAgICAgICAgIHNlcnZlckRpZmZlcmVuY2VzW2dldFByb3BOYW1lRnJvbUF0dHJpYnV0ZU5hbWUoYXR0cmlidXRlTmFtZSldID0gInN0eWxlIiA9PT0gYXR0cmlidXRlTmFtZSA/IGdldFN0eWxlc09iamVjdEZyb21FbGVtZW50KGRvbUVsZW1lbnQpIDogZG9tRWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gd2FybkZvckludmFsaWRFdmVudExpc3RlbmVyKHJlZ2lzdHJhdGlvbk5hbWUsIGxpc3RlbmVyKSB7CiAgICAgICAgZmFsc2UgPT09IGxpc3RlbmVyID8gY29uc29sZS5lcnJvcigKICAgICAgICAgICJFeHBlY3RlZCBgJXNgIGxpc3RlbmVyIHRvIGJlIGEgZnVuY3Rpb24sIGluc3RlYWQgZ290IGBmYWxzZWAuXG5cbklmIHlvdSB1c2VkIHRvIGNvbmRpdGlvbmFsbHkgb21pdCBpdCB3aXRoICVzPXtjb25kaXRpb24gJiYgdmFsdWV9LCBwYXNzICVzPXtjb25kaXRpb24gPyB2YWx1ZSA6IHVuZGVmaW5lZH0gaW5zdGVhZC4iLAogICAgICAgICAgcmVnaXN0cmF0aW9uTmFtZSwKICAgICAgICAgIHJlZ2lzdHJhdGlvbk5hbWUsCiAgICAgICAgICByZWdpc3RyYXRpb25OYW1lCiAgICAgICAgKSA6IGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiRXhwZWN0ZWQgYCVzYCBsaXN0ZW5lciB0byBiZSBhIGZ1bmN0aW9uLCBpbnN0ZWFkIGdvdCBhIHZhbHVlIG9mIGAlc2AgdHlwZS4iLAogICAgICAgICAgcmVnaXN0cmF0aW9uTmFtZSwKICAgICAgICAgIHR5cGVvZiBsaXN0ZW5lcgogICAgICAgICk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbm9ybWFsaXplSFRNTChwYXJlbnQsIGh0bWwpIHsKICAgICAgICBwYXJlbnQgPSBwYXJlbnQubmFtZXNwYWNlVVJJID09PSBNQVRIX05BTUVTUEFDRSB8fCBwYXJlbnQubmFtZXNwYWNlVVJJID09PSBTVkdfTkFNRVNQQUNFID8gcGFyZW50Lm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKAogICAgICAgICAgcGFyZW50Lm5hbWVzcGFjZVVSSSwKICAgICAgICAgIHBhcmVudC50YWdOYW1lCiAgICAgICAgKSA6IHBhcmVudC5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQocGFyZW50LnRhZ05hbWUpOwogICAgICAgIHBhcmVudC5pbm5lckhUTUwgPSBodG1sOwogICAgICAgIHJldHVybiBwYXJlbnQuaW5uZXJIVE1MOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZU1hcmt1cEZvclRleHRPckF0dHJpYnV0ZShtYXJrdXApIHsKICAgICAgICB3aWxsQ29lcmNpb25UaHJvdyhtYXJrdXApICYmIChjb25zb2xlLmVycm9yKAogICAgICAgICAgIlRoZSBwcm92aWRlZCBIVE1MIG1hcmt1cCB1c2VzIGEgdmFsdWUgb2YgdW5zdXBwb3J0ZWQgdHlwZSAlcy4gVGhpcyB2YWx1ZSBtdXN0IGJlIGNvZXJjZWQgdG8gYSBzdHJpbmcgYmVmb3JlIHVzaW5nIGl0IGhlcmUuIiwKICAgICAgICAgIHR5cGVOYW1lKG1hcmt1cCkKICAgICAgICApLCB0ZXN0U3RyaW5nQ29lcmNpb24obWFya3VwKSk7CiAgICAgICAgcmV0dXJuICgic3RyaW5nIiA9PT0gdHlwZW9mIG1hcmt1cCA/IG1hcmt1cCA6ICIiICsgbWFya3VwKS5yZXBsYWNlKE5PUk1BTElaRV9ORVdMSU5FU19SRUdFWCwgIlxuIikucmVwbGFjZShOT1JNQUxJWkVfTlVMTF9BTkRfUkVQTEFDRU1FTlRfUkVHRVgsICIiKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjaGVja0ZvclVubWF0Y2hlZFRleHQoc2VydmVyVGV4dCwgY2xpZW50VGV4dCkgewogICAgICAgIGNsaWVudFRleHQgPSBub3JtYWxpemVNYXJrdXBGb3JUZXh0T3JBdHRyaWJ1dGUoY2xpZW50VGV4dCk7CiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZU1hcmt1cEZvclRleHRPckF0dHJpYnV0ZShzZXJ2ZXJUZXh0KSA9PT0gY2xpZW50VGV4dCA/IHRydWUgOiBmYWxzZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBub29wJDEoKSB7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gc2V0UHJvcChkb21FbGVtZW50LCB0YWcsIGtleSwgdmFsdWUsIHByb3BzLCBwcmV2VmFsdWUpIHsKICAgICAgICBzd2l0Y2ggKGtleSkgewogICAgICAgICAgY2FzZSAiY2hpbGRyZW4iOgogICAgICAgICAgICBpZiAoInN0cmluZyIgPT09IHR5cGVvZiB2YWx1ZSkKICAgICAgICAgICAgICB2YWxpZGF0ZVRleHROZXN0aW5nKHZhbHVlLCB0YWcsIGZhbHNlKSwgImJvZHkiID09PSB0YWcgfHwgInRleHRhcmVhIiA9PT0gdGFnICYmICIiID09PSB2YWx1ZSB8fCBzZXRUZXh0Q29udGVudChkb21FbGVtZW50LCB2YWx1ZSk7CiAgICAgICAgICAgIGVsc2UgaWYgKCJudW1iZXIiID09PSB0eXBlb2YgdmFsdWUgfHwgImJpZ2ludCIgPT09IHR5cGVvZiB2YWx1ZSkKICAgICAgICAgICAgICB2YWxpZGF0ZVRleHROZXN0aW5nKCIiICsgdmFsdWUsIHRhZywgZmFsc2UpLCAiYm9keSIgIT09IHRhZyAmJiBzZXRUZXh0Q29udGVudChkb21FbGVtZW50LCAiIiArIHZhbHVlKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJjbGFzc05hbWUiOgogICAgICAgICAgICBzZXRWYWx1ZUZvcktub3duQXR0cmlidXRlKGRvbUVsZW1lbnQsICJjbGFzcyIsIHZhbHVlKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJ0YWJJbmRleCI6CiAgICAgICAgICAgIHNldFZhbHVlRm9yS25vd25BdHRyaWJ1dGUoZG9tRWxlbWVudCwgInRhYmluZGV4IiwgdmFsdWUpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImRpciI6CiAgICAgICAgICBjYXNlICJyb2xlIjoKICAgICAgICAgIGNhc2UgInZpZXdCb3giOgogICAgICAgICAgY2FzZSAid2lkdGgiOgogICAgICAgICAgY2FzZSAiaGVpZ2h0IjoKICAgICAgICAgICAgc2V0VmFsdWVGb3JLbm93bkF0dHJpYnV0ZShkb21FbGVtZW50LCBrZXksIHZhbHVlKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJzdHlsZSI6CiAgICAgICAgICAgIHNldFZhbHVlRm9yU3R5bGVzKGRvbUVsZW1lbnQsIHZhbHVlLCBwcmV2VmFsdWUpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImRhdGEiOgogICAgICAgICAgICBpZiAoIm9iamVjdCIgIT09IHRhZykgewogICAgICAgICAgICAgIHNldFZhbHVlRm9yS25vd25BdHRyaWJ1dGUoZG9tRWxlbWVudCwgImRhdGEiLCB2YWx1ZSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgInNyYyI6CiAgICAgICAgICBjYXNlICJocmVmIjoKICAgICAgICAgICAgaWYgKCIiID09PSB2YWx1ZSAmJiAoImEiICE9PSB0YWcgfHwgImhyZWYiICE9PSBrZXkpKSB7CiAgICAgICAgICAgICAgInNyYyIgPT09IGtleSA/IGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgICAnQW4gZW1wdHkgc3RyaW5nICgiIikgd2FzIHBhc3NlZCB0byB0aGUgJXMgYXR0cmlidXRlLiBUaGlzIG1heSBjYXVzZSB0aGUgYnJvd3NlciB0byBkb3dubG9hZCB0aGUgd2hvbGUgcGFnZSBhZ2FpbiBvdmVyIHRoZSBuZXR3b3JrLiBUbyBmaXggdGhpcywgZWl0aGVyIGRvIG5vdCByZW5kZXIgdGhlIGVsZW1lbnQgYXQgYWxsIG9yIHBhc3MgbnVsbCB0byAlcyBpbnN0ZWFkIG9mIGFuIGVtcHR5IHN0cmluZy4nLAogICAgICAgICAgICAgICAga2V5LAogICAgICAgICAgICAgICAga2V5CiAgICAgICAgICAgICAgKSA6IGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgICAnQW4gZW1wdHkgc3RyaW5nICgiIikgd2FzIHBhc3NlZCB0byB0aGUgJXMgYXR0cmlidXRlLiBUbyBmaXggdGhpcywgZWl0aGVyIGRvIG5vdCByZW5kZXIgdGhlIGVsZW1lbnQgYXQgYWxsIG9yIHBhc3MgbnVsbCB0byAlcyBpbnN0ZWFkIG9mIGFuIGVtcHR5IHN0cmluZy4nLAogICAgICAgICAgICAgICAga2V5LAogICAgICAgICAgICAgICAga2V5CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICBkb21FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShrZXkpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChudWxsID09IHZhbHVlIHx8ICJmdW5jdGlvbiIgPT09IHR5cGVvZiB2YWx1ZSB8fCAic3ltYm9sIiA9PT0gdHlwZW9mIHZhbHVlIHx8ICJib29sZWFuIiA9PT0gdHlwZW9mIHZhbHVlKSB7CiAgICAgICAgICAgICAgZG9tRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBjaGVja0F0dHJpYnV0ZVN0cmluZ0NvZXJjaW9uKHZhbHVlLCBrZXkpOwogICAgICAgICAgICB2YWx1ZSA9IHNhbml0aXplVVJMKCIiICsgdmFsdWUpOwogICAgICAgICAgICBkb21FbGVtZW50LnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJhY3Rpb24iOgogICAgICAgICAgY2FzZSAiZm9ybUFjdGlvbiI6CiAgICAgICAgICAgIG51bGwgIT0gdmFsdWUgJiYgKCJmb3JtIiA9PT0gdGFnID8gImZvcm1BY3Rpb24iID09PSBrZXkgPyBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICJZb3UgY2FuIG9ubHkgcGFzcyB0aGUgZm9ybUFjdGlvbiBwcm9wIHRvIDxpbnB1dD4gb3IgPGJ1dHRvbj4uIFVzZSB0aGUgYWN0aW9uIHByb3Agb24gPGZvcm0+LiIKICAgICAgICAgICAgKSA6ICJmdW5jdGlvbiIgPT09IHR5cGVvZiB2YWx1ZSAmJiAobnVsbCA9PSBwcm9wcy5lbmNUeXBlICYmIG51bGwgPT0gcHJvcHMubWV0aG9kIHx8IGRpZFdhcm5Gb3JtQWN0aW9uTWV0aG9kIHx8IChkaWRXYXJuRm9ybUFjdGlvbk1ldGhvZCA9IHRydWUsIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgIkNhbm5vdCBzcGVjaWZ5IGEgZW5jVHlwZSBvciBtZXRob2QgZm9yIGEgZm9ybSB0aGF0IHNwZWNpZmllcyBhIGZ1bmN0aW9uIGFzIHRoZSBhY3Rpb24uIFJlYWN0IHByb3ZpZGVzIHRob3NlIGF1dG9tYXRpY2FsbHkuIFRoZXkgd2lsbCBnZXQgb3ZlcnJpZGRlbi4iCiAgICAgICAgICAgICkpLCBudWxsID09IHByb3BzLnRhcmdldCB8fCBkaWRXYXJuRm9ybUFjdGlvblRhcmdldCB8fCAoZGlkV2FybkZvcm1BY3Rpb25UYXJnZXQgPSB0cnVlLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICJDYW5ub3Qgc3BlY2lmeSBhIHRhcmdldCBmb3IgYSBmb3JtIHRoYXQgc3BlY2lmaWVzIGEgZnVuY3Rpb24gYXMgdGhlIGFjdGlvbi4gVGhlIGZ1bmN0aW9uIHdpbGwgYWx3YXlzIGJlIGV4ZWN1dGVkIGluIHRoZSBzYW1lIHdpbmRvdy4iCiAgICAgICAgICAgICkpKSA6ICJpbnB1dCIgPT09IHRhZyB8fCAiYnV0dG9uIiA9PT0gdGFnID8gImFjdGlvbiIgPT09IGtleSA/IGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgIllvdSBjYW4gb25seSBwYXNzIHRoZSBhY3Rpb24gcHJvcCB0byA8Zm9ybT4uIFVzZSB0aGUgZm9ybUFjdGlvbiBwcm9wIG9uIDxpbnB1dD4gb3IgPGJ1dHRvbj4uIgogICAgICAgICAgICApIDogImlucHV0IiAhPT0gdGFnIHx8ICJzdWJtaXQiID09PSBwcm9wcy50eXBlIHx8ICJpbWFnZSIgPT09IHByb3BzLnR5cGUgfHwgZGlkV2FybkZvcm1BY3Rpb25UeXBlID8gImJ1dHRvbiIgIT09IHRhZyB8fCBudWxsID09IHByb3BzLnR5cGUgfHwgInN1Ym1pdCIgPT09IHByb3BzLnR5cGUgfHwgZGlkV2FybkZvcm1BY3Rpb25UeXBlID8gImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHZhbHVlICYmIChudWxsID09IHByb3BzLm5hbWUgfHwgZGlkV2FybkZvcm1BY3Rpb25OYW1lIHx8IChkaWRXYXJuRm9ybUFjdGlvbk5hbWUgPSB0cnVlLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICdDYW5ub3Qgc3BlY2lmeSBhICJuYW1lIiBwcm9wIGZvciBhIGJ1dHRvbiB0aGF0IHNwZWNpZmllcyBhIGZ1bmN0aW9uIGFzIGEgZm9ybUFjdGlvbi4gUmVhY3QgbmVlZHMgaXQgdG8gZW5jb2RlIHdoaWNoIGFjdGlvbiBzaG91bGQgYmUgaW52b2tlZC4gSXQgd2lsbCBnZXQgb3ZlcnJpZGRlbi4nCiAgICAgICAgICAgICkpLCBudWxsID09IHByb3BzLmZvcm1FbmNUeXBlICYmIG51bGwgPT0gcHJvcHMuZm9ybU1ldGhvZCB8fCBkaWRXYXJuRm9ybUFjdGlvbk1ldGhvZCB8fCAoZGlkV2FybkZvcm1BY3Rpb25NZXRob2QgPSB0cnVlLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICJDYW5ub3Qgc3BlY2lmeSBhIGZvcm1FbmNUeXBlIG9yIGZvcm1NZXRob2QgZm9yIGEgYnV0dG9uIHRoYXQgc3BlY2lmaWVzIGEgZnVuY3Rpb24gYXMgYSBmb3JtQWN0aW9uLiBSZWFjdCBwcm92aWRlcyB0aG9zZSBhdXRvbWF0aWNhbGx5LiBUaGV5IHdpbGwgZ2V0IG92ZXJyaWRkZW4uIgogICAgICAgICAgICApKSwgbnVsbCA9PSBwcm9wcy5mb3JtVGFyZ2V0IHx8IGRpZFdhcm5Gb3JtQWN0aW9uVGFyZ2V0IHx8IChkaWRXYXJuRm9ybUFjdGlvblRhcmdldCA9IHRydWUsIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgIkNhbm5vdCBzcGVjaWZ5IGEgZm9ybVRhcmdldCBmb3IgYSBidXR0b24gdGhhdCBzcGVjaWZpZXMgYSBmdW5jdGlvbiBhcyBhIGZvcm1BY3Rpb24uIFRoZSBmdW5jdGlvbiB3aWxsIGFsd2F5cyBiZSBleGVjdXRlZCBpbiB0aGUgc2FtZSB3aW5kb3cuIgogICAgICAgICAgICApKSkgOiAoZGlkV2FybkZvcm1BY3Rpb25UeXBlID0gdHJ1ZSwgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAnQSBidXR0b24gY2FuIG9ubHkgc3BlY2lmeSBhIGZvcm1BY3Rpb24gYWxvbmcgd2l0aCB0eXBlPSJzdWJtaXQiIG9yIG5vIHR5cGUuJwogICAgICAgICAgICApKSA6IChkaWRXYXJuRm9ybUFjdGlvblR5cGUgPSB0cnVlLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICdBbiBpbnB1dCBjYW4gb25seSBzcGVjaWZ5IGEgZm9ybUFjdGlvbiBhbG9uZyB3aXRoIHR5cGU9InN1Ym1pdCIgb3IgdHlwZT0iaW1hZ2UiLicKICAgICAgICAgICAgKSkgOiAiYWN0aW9uIiA9PT0ga2V5ID8gY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAiWW91IGNhbiBvbmx5IHBhc3MgdGhlIGFjdGlvbiBwcm9wIHRvIDxmb3JtPi4iCiAgICAgICAgICAgICkgOiBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICJZb3UgY2FuIG9ubHkgcGFzcyB0aGUgZm9ybUFjdGlvbiBwcm9wIHRvIDxpbnB1dD4gb3IgPGJ1dHRvbj4uIgogICAgICAgICAgICApKTsKICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgPT09IHR5cGVvZiB2YWx1ZSkgewogICAgICAgICAgICAgIGRvbUVsZW1lbnQuc2V0QXR0cmlidXRlKAogICAgICAgICAgICAgICAga2V5LAogICAgICAgICAgICAgICAgImphdmFzY3JpcHQ6dGhyb3cgbmV3IEVycm9yKCdBIFJlYWN0IGZvcm0gd2FzIHVuZXhwZWN0ZWRseSBzdWJtaXR0ZWQuIElmIHlvdSBjYWxsZWQgZm9ybS5zdWJtaXQoKSBtYW51YWxseSwgY29uc2lkZXIgdXNpbmcgZm9ybS5yZXF1ZXN0U3VibWl0KCkgaW5zdGVhZC4gSWYgeW91XFwncmUgdHJ5aW5nIHRvIHVzZSBldmVudC5zdG9wUHJvcGFnYXRpb24oKSBpbiBhIHN1Ym1pdCBldmVudCBoYW5kbGVyLCBjb25zaWRlciBhbHNvIGNhbGxpbmcgZXZlbnQucHJldmVudERlZmF1bHQoKS4nKSIKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgcHJldlZhbHVlICYmICgiZm9ybUFjdGlvbiIgPT09IGtleSA/ICgiaW5wdXQiICE9PSB0YWcgJiYgc2V0UHJvcChkb21FbGVtZW50LCB0YWcsICJuYW1lIiwgcHJvcHMubmFtZSwgcHJvcHMsIG51bGwpLCBzZXRQcm9wKAogICAgICAgICAgICAgICAgZG9tRWxlbWVudCwKICAgICAgICAgICAgICAgIHRhZywKICAgICAgICAgICAgICAgICJmb3JtRW5jVHlwZSIsCiAgICAgICAgICAgICAgICBwcm9wcy5mb3JtRW5jVHlwZSwKICAgICAgICAgICAgICAgIHByb3BzLAogICAgICAgICAgICAgICAgbnVsbAogICAgICAgICAgICAgICksIHNldFByb3AoCiAgICAgICAgICAgICAgICBkb21FbGVtZW50LAogICAgICAgICAgICAgICAgdGFnLAogICAgICAgICAgICAgICAgImZvcm1NZXRob2QiLAogICAgICAgICAgICAgICAgcHJvcHMuZm9ybU1ldGhvZCwKICAgICAgICAgICAgICAgIHByb3BzLAogICAgICAgICAgICAgICAgbnVsbAogICAgICAgICAgICAgICksIHNldFByb3AoCiAgICAgICAgICAgICAgICBkb21FbGVtZW50LAogICAgICAgICAgICAgICAgdGFnLAogICAgICAgICAgICAgICAgImZvcm1UYXJnZXQiLAogICAgICAgICAgICAgICAgcHJvcHMuZm9ybVRhcmdldCwKICAgICAgICAgICAgICAgIHByb3BzLAogICAgICAgICAgICAgICAgbnVsbAogICAgICAgICAgICAgICkpIDogKHNldFByb3AoCiAgICAgICAgICAgICAgICBkb21FbGVtZW50LAogICAgICAgICAgICAgICAgdGFnLAogICAgICAgICAgICAgICAgImVuY1R5cGUiLAogICAgICAgICAgICAgICAgcHJvcHMuZW5jVHlwZSwKICAgICAgICAgICAgICAgIHByb3BzLAogICAgICAgICAgICAgICAgbnVsbAogICAgICAgICAgICAgICksIHNldFByb3AoZG9tRWxlbWVudCwgdGFnLCAibWV0aG9kIiwgcHJvcHMubWV0aG9kLCBwcm9wcywgbnVsbCksIHNldFByb3AoCiAgICAgICAgICAgICAgICBkb21FbGVtZW50LAogICAgICAgICAgICAgICAgdGFnLAogICAgICAgICAgICAgICAgInRhcmdldCIsCiAgICAgICAgICAgICAgICBwcm9wcy50YXJnZXQsCiAgICAgICAgICAgICAgICBwcm9wcywKICAgICAgICAgICAgICAgIG51bGwKICAgICAgICAgICAgICApKSk7CiAgICAgICAgICAgIGlmIChudWxsID09IHZhbHVlIHx8ICJzeW1ib2wiID09PSB0eXBlb2YgdmFsdWUgfHwgImJvb2xlYW4iID09PSB0eXBlb2YgdmFsdWUpIHsKICAgICAgICAgICAgICBkb21FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShrZXkpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNoZWNrQXR0cmlidXRlU3RyaW5nQ29lcmNpb24odmFsdWUsIGtleSk7CiAgICAgICAgICAgIHZhbHVlID0gc2FuaXRpemVVUkwoIiIgKyB2YWx1ZSk7CiAgICAgICAgICAgIGRvbUVsZW1lbnQuc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgIm9uQ2xpY2siOgogICAgICAgICAgICBudWxsICE9IHZhbHVlICYmICgiZnVuY3Rpb24iICE9PSB0eXBlb2YgdmFsdWUgJiYgd2FybkZvckludmFsaWRFdmVudExpc3RlbmVyKGtleSwgdmFsdWUpLCBkb21FbGVtZW50Lm9uY2xpY2sgPSBub29wJDEpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgIm9uU2Nyb2xsIjoKICAgICAgICAgICAgbnVsbCAhPSB2YWx1ZSAmJiAoImZ1bmN0aW9uIiAhPT0gdHlwZW9mIHZhbHVlICYmIHdhcm5Gb3JJbnZhbGlkRXZlbnRMaXN0ZW5lcihrZXksIHZhbHVlKSwgbGlzdGVuVG9Ob25EZWxlZ2F0ZWRFdmVudCgic2Nyb2xsIiwgZG9tRWxlbWVudCkpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgIm9uU2Nyb2xsRW5kIjoKICAgICAgICAgICAgbnVsbCAhPSB2YWx1ZSAmJiAoImZ1bmN0aW9uIiAhPT0gdHlwZW9mIHZhbHVlICYmIHdhcm5Gb3JJbnZhbGlkRXZlbnRMaXN0ZW5lcihrZXksIHZhbHVlKSwgbGlzdGVuVG9Ob25EZWxlZ2F0ZWRFdmVudCgic2Nyb2xsZW5kIiwgZG9tRWxlbWVudCkpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIjoKICAgICAgICAgICAgaWYgKG51bGwgIT0gdmFsdWUpIHsKICAgICAgICAgICAgICBpZiAoIm9iamVjdCIgIT09IHR5cGVvZiB2YWx1ZSB8fCAhKCJfX2h0bWwiIGluIHZhbHVlKSkKICAgICAgICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAgICAgICAiYHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYCBtdXN0IGJlIGluIHRoZSBmb3JtIGB7X19odG1sOiAuLi59YC4gUGxlYXNlIHZpc2l0IGh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvZGFuZ2Vyb3VzbHktc2V0LWlubmVyLWh0bWwgZm9yIG1vcmUgaW5mb3JtYXRpb24uIgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICBrZXkgPSB2YWx1ZS5fX2h0bWw7CiAgICAgICAgICAgICAgaWYgKG51bGwgIT0ga2V5KSB7CiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBwcm9wcy5jaGlsZHJlbikKICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgIkNhbiBvbmx5IHNldCBvbmUgb2YgYGNoaWxkcmVuYCBvciBgcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUxgLiIKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQuaW5uZXJIVE1MID0ga2V5OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgIm11bHRpcGxlIjoKICAgICAgICAgICAgZG9tRWxlbWVudC5tdWx0aXBsZSA9IHZhbHVlICYmICJmdW5jdGlvbiIgIT09IHR5cGVvZiB2YWx1ZSAmJiAic3ltYm9sIiAhPT0gdHlwZW9mIHZhbHVlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgIm11dGVkIjoKICAgICAgICAgICAgZG9tRWxlbWVudC5tdXRlZCA9IHZhbHVlICYmICJmdW5jdGlvbiIgIT09IHR5cGVvZiB2YWx1ZSAmJiAic3ltYm9sIiAhPT0gdHlwZW9mIHZhbHVlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgInN1cHByZXNzQ29udGVudEVkaXRhYmxlV2FybmluZyI6CiAgICAgICAgICBjYXNlICJzdXBwcmVzc0h5ZHJhdGlvbldhcm5pbmciOgogICAgICAgICAgY2FzZSAiZGVmYXVsdFZhbHVlIjoKICAgICAgICAgIGNhc2UgImRlZmF1bHRDaGVja2VkIjoKICAgICAgICAgIGNhc2UgImlubmVySFRNTCI6CiAgICAgICAgICBjYXNlICJyZWYiOgogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImF1dG9Gb2N1cyI6CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAieGxpbmtIcmVmIjoKICAgICAgICAgICAgaWYgKG51bGwgPT0gdmFsdWUgfHwgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHZhbHVlIHx8ICJib29sZWFuIiA9PT0gdHlwZW9mIHZhbHVlIHx8ICJzeW1ib2wiID09PSB0eXBlb2YgdmFsdWUpIHsKICAgICAgICAgICAgICBkb21FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgieGxpbms6aHJlZiIpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNoZWNrQXR0cmlidXRlU3RyaW5nQ29lcmNpb24odmFsdWUsIGtleSk7CiAgICAgICAgICAgIGtleSA9IHNhbml0aXplVVJMKCIiICsgdmFsdWUpOwogICAgICAgICAgICBkb21FbGVtZW50LnNldEF0dHJpYnV0ZU5TKHhsaW5rTmFtZXNwYWNlLCAieGxpbms6aHJlZiIsIGtleSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiY29udGVudEVkaXRhYmxlIjoKICAgICAgICAgIGNhc2UgInNwZWxsQ2hlY2siOgogICAgICAgICAgY2FzZSAiZHJhZ2dhYmxlIjoKICAgICAgICAgIGNhc2UgInZhbHVlIjoKICAgICAgICAgIGNhc2UgImF1dG9SZXZlcnNlIjoKICAgICAgICAgIGNhc2UgImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWQiOgogICAgICAgICAgY2FzZSAiZm9jdXNhYmxlIjoKICAgICAgICAgIGNhc2UgInByZXNlcnZlQWxwaGEiOgogICAgICAgICAgICBudWxsICE9IHZhbHVlICYmICJmdW5jdGlvbiIgIT09IHR5cGVvZiB2YWx1ZSAmJiAic3ltYm9sIiAhPT0gdHlwZW9mIHZhbHVlID8gKGNoZWNrQXR0cmlidXRlU3RyaW5nQ29lcmNpb24odmFsdWUsIGtleSksIGRvbUVsZW1lbnQuc2V0QXR0cmlidXRlKGtleSwgIiIgKyB2YWx1ZSkpIDogZG9tRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJpbmVydCI6CiAgICAgICAgICAgICIiICE9PSB2YWx1ZSB8fCBkaWRXYXJuRm9yTmV3Qm9vbGVhblByb3BzV2l0aEVtcHR5VmFsdWVba2V5XSB8fCAoZGlkV2FybkZvck5ld0Jvb2xlYW5Qcm9wc1dpdGhFbXB0eVZhbHVlW2tleV0gPSB0cnVlLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICJSZWNlaXZlZCBhbiBlbXB0eSBzdHJpbmcgZm9yIGEgYm9vbGVhbiBhdHRyaWJ1dGUgYCVzYC4gVGhpcyB3aWxsIHRyZWF0IHRoZSBhdHRyaWJ1dGUgYXMgaWYgaXQgd2VyZSBmYWxzZS4gRWl0aGVyIHBhc3MgYGZhbHNlYCB0byBzaWxlbmNlIHRoaXMgd2FybmluZywgb3IgcGFzcyBgdHJ1ZWAgaWYgeW91IHVzZWQgYW4gZW1wdHkgc3RyaW5nIGluIGVhcmxpZXIgdmVyc2lvbnMgb2YgUmVhY3QgdG8gaW5kaWNhdGUgdGhpcyBhdHRyaWJ1dGUgaXMgdHJ1ZS4iLAogICAgICAgICAgICAgIGtleQogICAgICAgICAgICApKTsKICAgICAgICAgIGNhc2UgImFsbG93RnVsbFNjcmVlbiI6CiAgICAgICAgICBjYXNlICJhc3luYyI6CiAgICAgICAgICBjYXNlICJhdXRvUGxheSI6CiAgICAgICAgICBjYXNlICJjb250cm9scyI6CiAgICAgICAgICBjYXNlICJkZWZhdWx0IjoKICAgICAgICAgIGNhc2UgImRlZmVyIjoKICAgICAgICAgIGNhc2UgImRpc2FibGVkIjoKICAgICAgICAgIGNhc2UgImRpc2FibGVQaWN0dXJlSW5QaWN0dXJlIjoKICAgICAgICAgIGNhc2UgImRpc2FibGVSZW1vdGVQbGF5YmFjayI6CiAgICAgICAgICBjYXNlICJmb3JtTm9WYWxpZGF0ZSI6CiAgICAgICAgICBjYXNlICJoaWRkZW4iOgogICAgICAgICAgY2FzZSAibG9vcCI6CiAgICAgICAgICBjYXNlICJub01vZHVsZSI6CiAgICAgICAgICBjYXNlICJub1ZhbGlkYXRlIjoKICAgICAgICAgIGNhc2UgIm9wZW4iOgogICAgICAgICAgY2FzZSAicGxheXNJbmxpbmUiOgogICAgICAgICAgY2FzZSAicmVhZE9ubHkiOgogICAgICAgICAgY2FzZSAicmVxdWlyZWQiOgogICAgICAgICAgY2FzZSAicmV2ZXJzZWQiOgogICAgICAgICAgY2FzZSAic2NvcGVkIjoKICAgICAgICAgIGNhc2UgInNlYW1sZXNzIjoKICAgICAgICAgIGNhc2UgIml0ZW1TY29wZSI6CiAgICAgICAgICAgIHZhbHVlICYmICJmdW5jdGlvbiIgIT09IHR5cGVvZiB2YWx1ZSAmJiAic3ltYm9sIiAhPT0gdHlwZW9mIHZhbHVlID8gZG9tRWxlbWVudC5zZXRBdHRyaWJ1dGUoa2V5LCAiIikgOiBkb21FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShrZXkpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImNhcHR1cmUiOgogICAgICAgICAgY2FzZSAiZG93bmxvYWQiOgogICAgICAgICAgICB0cnVlID09PSB2YWx1ZSA/IGRvbUVsZW1lbnQuc2V0QXR0cmlidXRlKGtleSwgIiIpIDogZmFsc2UgIT09IHZhbHVlICYmIG51bGwgIT0gdmFsdWUgJiYgImZ1bmN0aW9uIiAhPT0gdHlwZW9mIHZhbHVlICYmICJzeW1ib2wiICE9PSB0eXBlb2YgdmFsdWUgPyAoY2hlY2tBdHRyaWJ1dGVTdHJpbmdDb2VyY2lvbih2YWx1ZSwga2V5KSwgZG9tRWxlbWVudC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSkpIDogZG9tRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJjb2xzIjoKICAgICAgICAgIGNhc2UgInJvd3MiOgogICAgICAgICAgY2FzZSAic2l6ZSI6CiAgICAgICAgICBjYXNlICJzcGFuIjoKICAgICAgICAgICAgbnVsbCAhPSB2YWx1ZSAmJiAiZnVuY3Rpb24iICE9PSB0eXBlb2YgdmFsdWUgJiYgInN5bWJvbCIgIT09IHR5cGVvZiB2YWx1ZSAmJiAhaXNOYU4odmFsdWUpICYmIDEgPD0gdmFsdWUgPyAoY2hlY2tBdHRyaWJ1dGVTdHJpbmdDb2VyY2lvbih2YWx1ZSwga2V5KSwgZG9tRWxlbWVudC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSkpIDogZG9tRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJyb3dTcGFuIjoKICAgICAgICAgIGNhc2UgInN0YXJ0IjoKICAgICAgICAgICAgbnVsbCA9PSB2YWx1ZSB8fCAiZnVuY3Rpb24iID09PSB0eXBlb2YgdmFsdWUgfHwgInN5bWJvbCIgPT09IHR5cGVvZiB2YWx1ZSB8fCBpc05hTih2YWx1ZSkgPyBkb21FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShrZXkpIDogKGNoZWNrQXR0cmlidXRlU3RyaW5nQ29lcmNpb24odmFsdWUsIGtleSksIGRvbUVsZW1lbnQuc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJwb3BvdmVyIjoKICAgICAgICAgICAgbGlzdGVuVG9Ob25EZWxlZ2F0ZWRFdmVudCgiYmVmb3JldG9nZ2xlIiwgZG9tRWxlbWVudCk7CiAgICAgICAgICAgIGxpc3RlblRvTm9uRGVsZWdhdGVkRXZlbnQoInRvZ2dsZSIsIGRvbUVsZW1lbnQpOwogICAgICAgICAgICBzZXRWYWx1ZUZvckF0dHJpYnV0ZShkb21FbGVtZW50LCAicG9wb3ZlciIsIHZhbHVlKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJ4bGlua0FjdHVhdGUiOgogICAgICAgICAgICBzZXRWYWx1ZUZvck5hbWVzcGFjZWRBdHRyaWJ1dGUoCiAgICAgICAgICAgICAgZG9tRWxlbWVudCwKICAgICAgICAgICAgICB4bGlua05hbWVzcGFjZSwKICAgICAgICAgICAgICAieGxpbms6YWN0dWF0ZSIsCiAgICAgICAgICAgICAgdmFsdWUKICAgICAgICAgICAgKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJ4bGlua0FyY3JvbGUiOgogICAgICAgICAgICBzZXRWYWx1ZUZvck5hbWVzcGFjZWRBdHRyaWJ1dGUoCiAgICAgICAgICAgICAgZG9tRWxlbWVudCwKICAgICAgICAgICAgICB4bGlua05hbWVzcGFjZSwKICAgICAgICAgICAgICAieGxpbms6YXJjcm9sZSIsCiAgICAgICAgICAgICAgdmFsdWUKICAgICAgICAgICAgKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJ4bGlua1JvbGUiOgogICAgICAgICAgICBzZXRWYWx1ZUZvck5hbWVzcGFjZWRBdHRyaWJ1dGUoCiAgICAgICAgICAgICAgZG9tRWxlbWVudCwKICAgICAgICAgICAgICB4bGlua05hbWVzcGFjZSwKICAgICAgICAgICAgICAieGxpbms6cm9sZSIsCiAgICAgICAgICAgICAgdmFsdWUKICAgICAgICAgICAgKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJ4bGlua1Nob3ciOgogICAgICAgICAgICBzZXRWYWx1ZUZvck5hbWVzcGFjZWRBdHRyaWJ1dGUoCiAgICAgICAgICAgICAgZG9tRWxlbWVudCwKICAgICAgICAgICAgICB4bGlua05hbWVzcGFjZSwKICAgICAgICAgICAgICAieGxpbms6c2hvdyIsCiAgICAgICAgICAgICAgdmFsdWUKICAgICAgICAgICAgKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJ4bGlua1RpdGxlIjoKICAgICAgICAgICAgc2V0VmFsdWVGb3JOYW1lc3BhY2VkQXR0cmlidXRlKAogICAgICAgICAgICAgIGRvbUVsZW1lbnQsCiAgICAgICAgICAgICAgeGxpbmtOYW1lc3BhY2UsCiAgICAgICAgICAgICAgInhsaW5rOnRpdGxlIiwKICAgICAgICAgICAgICB2YWx1ZQogICAgICAgICAgICApOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgInhsaW5rVHlwZSI6CiAgICAgICAgICAgIHNldFZhbHVlRm9yTmFtZXNwYWNlZEF0dHJpYnV0ZSgKICAgICAgICAgICAgICBkb21FbGVtZW50LAogICAgICAgICAgICAgIHhsaW5rTmFtZXNwYWNlLAogICAgICAgICAgICAgICJ4bGluazp0eXBlIiwKICAgICAgICAgICAgICB2YWx1ZQogICAgICAgICAgICApOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgInhtbEJhc2UiOgogICAgICAgICAgICBzZXRWYWx1ZUZvck5hbWVzcGFjZWRBdHRyaWJ1dGUoCiAgICAgICAgICAgICAgZG9tRWxlbWVudCwKICAgICAgICAgICAgICB4bWxOYW1lc3BhY2UsCiAgICAgICAgICAgICAgInhtbDpiYXNlIiwKICAgICAgICAgICAgICB2YWx1ZQogICAgICAgICAgICApOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgInhtbExhbmciOgogICAgICAgICAgICBzZXRWYWx1ZUZvck5hbWVzcGFjZWRBdHRyaWJ1dGUoCiAgICAgICAgICAgICAgZG9tRWxlbWVudCwKICAgICAgICAgICAgICB4bWxOYW1lc3BhY2UsCiAgICAgICAgICAgICAgInhtbDpsYW5nIiwKICAgICAgICAgICAgICB2YWx1ZQogICAgICAgICAgICApOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgInhtbFNwYWNlIjoKICAgICAgICAgICAgc2V0VmFsdWVGb3JOYW1lc3BhY2VkQXR0cmlidXRlKAogICAgICAgICAgICAgIGRvbUVsZW1lbnQsCiAgICAgICAgICAgICAgeG1sTmFtZXNwYWNlLAogICAgICAgICAgICAgICJ4bWw6c3BhY2UiLAogICAgICAgICAgICAgIHZhbHVlCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiaXMiOgogICAgICAgICAgICBudWxsICE9IHByZXZWYWx1ZSAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICdDYW5ub3QgdXBkYXRlIHRoZSAiaXMiIHByb3AgYWZ0ZXIgaXQgaGFzIGJlZW4gaW5pdGlhbGl6ZWQuJwogICAgICAgICAgICApOwogICAgICAgICAgICBzZXRWYWx1ZUZvckF0dHJpYnV0ZShkb21FbGVtZW50LCAiaXMiLCB2YWx1ZSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiaW5uZXJUZXh0IjoKICAgICAgICAgIGNhc2UgInRleHRDb250ZW50IjoKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJwb3BvdmVyVGFyZ2V0IjoKICAgICAgICAgICAgZGlkV2FyblBvcG92ZXJUYXJnZXRPYmplY3QgfHwgbnVsbCA9PSB2YWx1ZSB8fCAib2JqZWN0IiAhPT0gdHlwZW9mIHZhbHVlIHx8IChkaWRXYXJuUG9wb3ZlclRhcmdldE9iamVjdCA9IHRydWUsIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgIlRoZSBgcG9wb3ZlclRhcmdldGAgcHJvcCBleHBlY3RzIHRoZSBJRCBvZiBhbiBFbGVtZW50IGFzIGEgc3RyaW5nLiBSZWNlaXZlZCAlcyBpbnN0ZWFkLiIsCiAgICAgICAgICAgICAgdmFsdWUKICAgICAgICAgICAgKSk7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAhKDIgPCBrZXkubGVuZ3RoKSB8fCAibyIgIT09IGtleVswXSAmJiAiTyIgIT09IGtleVswXSB8fCAibiIgIT09IGtleVsxXSAmJiAiTiIgIT09IGtleVsxXSA/IChrZXkgPSBnZXRBdHRyaWJ1dGVBbGlhcyhrZXkpLCBzZXRWYWx1ZUZvckF0dHJpYnV0ZShkb21FbGVtZW50LCBrZXksIHZhbHVlKSkgOiByZWdpc3RyYXRpb25OYW1lRGVwZW5kZW5jaWVzLmhhc093blByb3BlcnR5KGtleSkgJiYgbnVsbCAhPSB2YWx1ZSAmJiAiZnVuY3Rpb24iICE9PSB0eXBlb2YgdmFsdWUgJiYgd2FybkZvckludmFsaWRFdmVudExpc3RlbmVyKGtleSwgdmFsdWUpOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBzZXRQcm9wT25DdXN0b21FbGVtZW50KGRvbUVsZW1lbnQsIHRhZywga2V5LCB2YWx1ZSwgcHJvcHMsIHByZXZWYWx1ZSkgewogICAgICAgIHN3aXRjaCAoa2V5KSB7CiAgICAgICAgICBjYXNlICJzdHlsZSI6CiAgICAgICAgICAgIHNldFZhbHVlRm9yU3R5bGVzKGRvbUVsZW1lbnQsIHZhbHVlLCBwcmV2VmFsdWUpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIjoKICAgICAgICAgICAgaWYgKG51bGwgIT0gdmFsdWUpIHsKICAgICAgICAgICAgICBpZiAoIm9iamVjdCIgIT09IHR5cGVvZiB2YWx1ZSB8fCAhKCJfX2h0bWwiIGluIHZhbHVlKSkKICAgICAgICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAgICAgICAiYHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYCBtdXN0IGJlIGluIHRoZSBmb3JtIGB7X19odG1sOiAuLi59YC4gUGxlYXNlIHZpc2l0IGh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvZGFuZ2Vyb3VzbHktc2V0LWlubmVyLWh0bWwgZm9yIG1vcmUgaW5mb3JtYXRpb24uIgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICBrZXkgPSB2YWx1ZS5fX2h0bWw7CiAgICAgICAgICAgICAgaWYgKG51bGwgIT0ga2V5KSB7CiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBwcm9wcy5jaGlsZHJlbikKICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgIkNhbiBvbmx5IHNldCBvbmUgb2YgYGNoaWxkcmVuYCBvciBgcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUxgLiIKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQuaW5uZXJIVE1MID0ga2V5OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImNoaWxkcmVuIjoKICAgICAgICAgICAgInN0cmluZyIgPT09IHR5cGVvZiB2YWx1ZSA/IHNldFRleHRDb250ZW50KGRvbUVsZW1lbnQsIHZhbHVlKSA6ICgibnVtYmVyIiA9PT0gdHlwZW9mIHZhbHVlIHx8ICJiaWdpbnQiID09PSB0eXBlb2YgdmFsdWUpICYmIHNldFRleHRDb250ZW50KGRvbUVsZW1lbnQsICIiICsgdmFsdWUpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgIm9uU2Nyb2xsIjoKICAgICAgICAgICAgbnVsbCAhPSB2YWx1ZSAmJiAoImZ1bmN0aW9uIiAhPT0gdHlwZW9mIHZhbHVlICYmIHdhcm5Gb3JJbnZhbGlkRXZlbnRMaXN0ZW5lcihrZXksIHZhbHVlKSwgbGlzdGVuVG9Ob25EZWxlZ2F0ZWRFdmVudCgic2Nyb2xsIiwgZG9tRWxlbWVudCkpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgIm9uU2Nyb2xsRW5kIjoKICAgICAgICAgICAgbnVsbCAhPSB2YWx1ZSAmJiAoImZ1bmN0aW9uIiAhPT0gdHlwZW9mIHZhbHVlICYmIHdhcm5Gb3JJbnZhbGlkRXZlbnRMaXN0ZW5lcihrZXksIHZhbHVlKSwgbGlzdGVuVG9Ob25EZWxlZ2F0ZWRFdmVudCgic2Nyb2xsZW5kIiwgZG9tRWxlbWVudCkpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgIm9uQ2xpY2siOgogICAgICAgICAgICBudWxsICE9IHZhbHVlICYmICgiZnVuY3Rpb24iICE9PSB0eXBlb2YgdmFsdWUgJiYgd2FybkZvckludmFsaWRFdmVudExpc3RlbmVyKGtleSwgdmFsdWUpLCBkb21FbGVtZW50Lm9uY2xpY2sgPSBub29wJDEpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgInN1cHByZXNzQ29udGVudEVkaXRhYmxlV2FybmluZyI6CiAgICAgICAgICBjYXNlICJzdXBwcmVzc0h5ZHJhdGlvbldhcm5pbmciOgogICAgICAgICAgY2FzZSAiaW5uZXJIVE1MIjoKICAgICAgICAgIGNhc2UgInJlZiI6CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiaW5uZXJUZXh0IjoKICAgICAgICAgIGNhc2UgInRleHRDb250ZW50IjoKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBpZiAocmVnaXN0cmF0aW9uTmFtZURlcGVuZGVuY2llcy5oYXNPd25Qcm9wZXJ0eShrZXkpKQogICAgICAgICAgICAgIG51bGwgIT0gdmFsdWUgJiYgImZ1bmN0aW9uIiAhPT0gdHlwZW9mIHZhbHVlICYmIHdhcm5Gb3JJbnZhbGlkRXZlbnRMaXN0ZW5lcihrZXksIHZhbHVlKTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgIGE6IHsKICAgICAgICAgICAgICAgIGlmICgibyIgPT09IGtleVswXSAmJiAibiIgPT09IGtleVsxXSAmJiAocHJvcHMgPSBrZXkuZW5kc1dpdGgoIkNhcHR1cmUiKSwgdGFnID0ga2V5LnNsaWNlKDIsIHByb3BzID8ga2V5Lmxlbmd0aCAtIDcgOiB2b2lkIDApLCBwcmV2VmFsdWUgPSBkb21FbGVtZW50W2ludGVybmFsUHJvcHNLZXldIHx8IG51bGwsIHByZXZWYWx1ZSA9IG51bGwgIT0gcHJldlZhbHVlID8gcHJldlZhbHVlW2tleV0gOiBudWxsLCAiZnVuY3Rpb24iID09PSB0eXBlb2YgcHJldlZhbHVlICYmIGRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0YWcsIHByZXZWYWx1ZSwgcHJvcHMpLCAiZnVuY3Rpb24iID09PSB0eXBlb2YgdmFsdWUpKSB7CiAgICAgICAgICAgICAgICAgICJmdW5jdGlvbiIgIT09IHR5cGVvZiBwcmV2VmFsdWUgJiYgbnVsbCAhPT0gcHJldlZhbHVlICYmIChrZXkgaW4gZG9tRWxlbWVudCA/IGRvbUVsZW1lbnRba2V5XSA9IG51bGwgOiBkb21FbGVtZW50Lmhhc0F0dHJpYnV0ZShrZXkpICYmIGRvbUVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGtleSkpOwogICAgICAgICAgICAgICAgICBkb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodGFnLCB2YWx1ZSwgcHJvcHMpOwogICAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAga2V5IGluIGRvbUVsZW1lbnQgPyBkb21FbGVtZW50W2tleV0gPSB2YWx1ZSA6IHRydWUgPT09IHZhbHVlID8gZG9tRWxlbWVudC5zZXRBdHRyaWJ1dGUoa2V5LCAiIikgOiBzZXRWYWx1ZUZvckF0dHJpYnV0ZShkb21FbGVtZW50LCBrZXksIHZhbHVlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIHNldEluaXRpYWxQcm9wZXJ0aWVzKGRvbUVsZW1lbnQsIHRhZywgcHJvcHMpIHsKICAgICAgICB2YWxpZGF0ZVByb3BlcnRpZXNJbkRldmVsb3BtZW50KHRhZywgcHJvcHMpOwogICAgICAgIHN3aXRjaCAodGFnKSB7CiAgICAgICAgICBjYXNlICJkaXYiOgogICAgICAgICAgY2FzZSAic3BhbiI6CiAgICAgICAgICBjYXNlICJzdmciOgogICAgICAgICAgY2FzZSAicGF0aCI6CiAgICAgICAgICBjYXNlICJhIjoKICAgICAgICAgIGNhc2UgImciOgogICAgICAgICAgY2FzZSAicCI6CiAgICAgICAgICBjYXNlICJsaSI6CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiaW1nIjoKICAgICAgICAgICAgbGlzdGVuVG9Ob25EZWxlZ2F0ZWRFdmVudCgiZXJyb3IiLCBkb21FbGVtZW50KTsKICAgICAgICAgICAgbGlzdGVuVG9Ob25EZWxlZ2F0ZWRFdmVudCgibG9hZCIsIGRvbUVsZW1lbnQpOwogICAgICAgICAgICB2YXIgaGFzU3JjID0gZmFsc2UsIGhhc1NyY1NldCA9IGZhbHNlLCBwcm9wS2V5OwogICAgICAgICAgICBmb3IgKHByb3BLZXkgaW4gcHJvcHMpCiAgICAgICAgICAgICAgaWYgKHByb3BzLmhhc093blByb3BlcnR5KHByb3BLZXkpKSB7CiAgICAgICAgICAgICAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcEtleV07CiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBwcm9wVmFsdWUpCiAgICAgICAgICAgICAgICAgIHN3aXRjaCAocHJvcEtleSkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgInNyYyI6CiAgICAgICAgICAgICAgICAgICAgICBoYXNTcmMgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAic3JjU2V0IjoKICAgICAgICAgICAgICAgICAgICAgIGhhc1NyY1NldCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICJjaGlsZHJlbiI6CiAgICAgICAgICAgICAgICAgICAgY2FzZSAiZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwiOgogICAgICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAgIHRhZyArICIgaXMgYSB2b2lkIGVsZW1lbnQgdGFnIGFuZCBtdXN0IG5laXRoZXIgaGF2ZSBgY2hpbGRyZW5gIG5vciB1c2UgYGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYC4iCiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICBzZXRQcm9wKGRvbUVsZW1lbnQsIHRhZywgcHJvcEtleSwgcHJvcFZhbHVlLCBwcm9wcywgbnVsbCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGhhc1NyY1NldCAmJiBzZXRQcm9wKGRvbUVsZW1lbnQsIHRhZywgInNyY1NldCIsIHByb3BzLnNyY1NldCwgcHJvcHMsIG51bGwpOwogICAgICAgICAgICBoYXNTcmMgJiYgc2V0UHJvcChkb21FbGVtZW50LCB0YWcsICJzcmMiLCBwcm9wcy5zcmMsIHByb3BzLCBudWxsKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgY2FzZSAiaW5wdXQiOgogICAgICAgICAgICBjaGVja0NvbnRyb2xsZWRWYWx1ZVByb3BzKCJpbnB1dCIsIHByb3BzKTsKICAgICAgICAgICAgbGlzdGVuVG9Ob25EZWxlZ2F0ZWRFdmVudCgiaW52YWxpZCIsIGRvbUVsZW1lbnQpOwogICAgICAgICAgICB2YXIgZGVmYXVsdFZhbHVlID0gcHJvcEtleSA9IHByb3BWYWx1ZSA9IGhhc1NyY1NldCA9IG51bGwsIGNoZWNrZWQgPSBudWxsLCBkZWZhdWx0Q2hlY2tlZCA9IG51bGw7CiAgICAgICAgICAgIGZvciAoaGFzU3JjIGluIHByb3BzKQogICAgICAgICAgICAgIGlmIChwcm9wcy5oYXNPd25Qcm9wZXJ0eShoYXNTcmMpKSB7CiAgICAgICAgICAgICAgICB2YXIgX3Byb3BWYWx1ZSA9IHByb3BzW2hhc1NyY107CiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBfcHJvcFZhbHVlKQogICAgICAgICAgICAgICAgICBzd2l0Y2ggKGhhc1NyYykgewogICAgICAgICAgICAgICAgICAgIGNhc2UgIm5hbWUiOgogICAgICAgICAgICAgICAgICAgICAgaGFzU3JjU2V0ID0gX3Byb3BWYWx1ZTsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgInR5cGUiOgogICAgICAgICAgICAgICAgICAgICAgcHJvcFZhbHVlID0gX3Byb3BWYWx1ZTsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgImNoZWNrZWQiOgogICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZCA9IF9wcm9wVmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICJkZWZhdWx0Q2hlY2tlZCI6CiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZCA9IF9wcm9wVmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICJ2YWx1ZSI6CiAgICAgICAgICAgICAgICAgICAgICBwcm9wS2V5ID0gX3Byb3BWYWx1ZTsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgImRlZmF1bHRWYWx1ZSI6CiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWUgPSBfcHJvcFZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAiY2hpbGRyZW4iOgogICAgICAgICAgICAgICAgICAgIGNhc2UgImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIjoKICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IF9wcm9wVmFsdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAgICAgICAgICAgICAgIHRhZyArICIgaXMgYSB2b2lkIGVsZW1lbnQgdGFnIGFuZCBtdXN0IG5laXRoZXIgaGF2ZSBgY2hpbGRyZW5gIG5vciB1c2UgYGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYC4iCiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgc2V0UHJvcChkb21FbGVtZW50LCB0YWcsIGhhc1NyYywgX3Byb3BWYWx1ZSwgcHJvcHMsIG51bGwpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB2YWxpZGF0ZUlucHV0UHJvcHMoZG9tRWxlbWVudCwgcHJvcHMpOwogICAgICAgICAgICBpbml0SW5wdXQoCiAgICAgICAgICAgICAgZG9tRWxlbWVudCwKICAgICAgICAgICAgICBwcm9wS2V5LAogICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZSwKICAgICAgICAgICAgICBjaGVja2VkLAogICAgICAgICAgICAgIGRlZmF1bHRDaGVja2VkLAogICAgICAgICAgICAgIHByb3BWYWx1ZSwKICAgICAgICAgICAgICBoYXNTcmNTZXQsCiAgICAgICAgICAgICAgZmFsc2UKICAgICAgICAgICAgKTsKICAgICAgICAgICAgdHJhY2soZG9tRWxlbWVudCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIGNhc2UgInNlbGVjdCI6CiAgICAgICAgICAgIGNoZWNrQ29udHJvbGxlZFZhbHVlUHJvcHMoInNlbGVjdCIsIHByb3BzKTsKICAgICAgICAgICAgbGlzdGVuVG9Ob25EZWxlZ2F0ZWRFdmVudCgiaW52YWxpZCIsIGRvbUVsZW1lbnQpOwogICAgICAgICAgICBoYXNTcmMgPSBwcm9wVmFsdWUgPSBwcm9wS2V5ID0gbnVsbDsKICAgICAgICAgICAgZm9yIChoYXNTcmNTZXQgaW4gcHJvcHMpCiAgICAgICAgICAgICAgaWYgKHByb3BzLmhhc093blByb3BlcnR5KGhhc1NyY1NldCkgJiYgKGRlZmF1bHRWYWx1ZSA9IHByb3BzW2hhc1NyY1NldF0sIG51bGwgIT0gZGVmYXVsdFZhbHVlKSkKICAgICAgICAgICAgICAgIHN3aXRjaCAoaGFzU3JjU2V0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgInZhbHVlIjoKICAgICAgICAgICAgICAgICAgICBwcm9wS2V5ID0gZGVmYXVsdFZhbHVlOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBjYXNlICJkZWZhdWx0VmFsdWUiOgogICAgICAgICAgICAgICAgICAgIHByb3BWYWx1ZSA9IGRlZmF1bHRWYWx1ZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgY2FzZSAibXVsdGlwbGUiOgogICAgICAgICAgICAgICAgICAgIGhhc1NyYyA9IGRlZmF1bHRWYWx1ZTsKICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICBzZXRQcm9wKAogICAgICAgICAgICAgICAgICAgICAgZG9tRWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIHRhZywKICAgICAgICAgICAgICAgICAgICAgIGhhc1NyY1NldCwKICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZSwKICAgICAgICAgICAgICAgICAgICAgIHByb3BzLAogICAgICAgICAgICAgICAgICAgICAgbnVsbAogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIHZhbGlkYXRlU2VsZWN0UHJvcHMoZG9tRWxlbWVudCwgcHJvcHMpOwogICAgICAgICAgICB0YWcgPSBwcm9wS2V5OwogICAgICAgICAgICBwcm9wcyA9IHByb3BWYWx1ZTsKICAgICAgICAgICAgZG9tRWxlbWVudC5tdWx0aXBsZSA9ICEhaGFzU3JjOwogICAgICAgICAgICBudWxsICE9IHRhZyA/IHVwZGF0ZU9wdGlvbnMoZG9tRWxlbWVudCwgISFoYXNTcmMsIHRhZywgZmFsc2UpIDogbnVsbCAhPSBwcm9wcyAmJiB1cGRhdGVPcHRpb25zKGRvbUVsZW1lbnQsICEhaGFzU3JjLCBwcm9wcywgdHJ1ZSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIGNhc2UgInRleHRhcmVhIjoKICAgICAgICAgICAgY2hlY2tDb250cm9sbGVkVmFsdWVQcm9wcygidGV4dGFyZWEiLCBwcm9wcyk7CiAgICAgICAgICAgIGxpc3RlblRvTm9uRGVsZWdhdGVkRXZlbnQoImludmFsaWQiLCBkb21FbGVtZW50KTsKICAgICAgICAgICAgcHJvcEtleSA9IGhhc1NyY1NldCA9IGhhc1NyYyA9IG51bGw7CiAgICAgICAgICAgIGZvciAocHJvcFZhbHVlIGluIHByb3BzKQogICAgICAgICAgICAgIGlmIChwcm9wcy5oYXNPd25Qcm9wZXJ0eShwcm9wVmFsdWUpICYmIChkZWZhdWx0VmFsdWUgPSBwcm9wc1twcm9wVmFsdWVdLCBudWxsICE9IGRlZmF1bHRWYWx1ZSkpCiAgICAgICAgICAgICAgICBzd2l0Y2ggKHByb3BWYWx1ZSkgewogICAgICAgICAgICAgICAgICBjYXNlICJ2YWx1ZSI6CiAgICAgICAgICAgICAgICAgICAgaGFzU3JjID0gZGVmYXVsdFZhbHVlOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBjYXNlICJkZWZhdWx0VmFsdWUiOgogICAgICAgICAgICAgICAgICAgIGhhc1NyY1NldCA9IGRlZmF1bHRWYWx1ZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgY2FzZSAiY2hpbGRyZW4iOgogICAgICAgICAgICAgICAgICAgIHByb3BLZXkgPSBkZWZhdWx0VmFsdWU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGNhc2UgImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIjoKICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBkZWZhdWx0VmFsdWUpCiAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICAgICAgICAgICAgICAgImBkYW5nZXJvdXNseVNldElubmVySFRNTGAgZG9lcyBub3QgbWFrZSBzZW5zZSBvbiA8dGV4dGFyZWE+LiIKICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgc2V0UHJvcCgKICAgICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICB0YWcsCiAgICAgICAgICAgICAgICAgICAgICBwcm9wVmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICBwcm9wcywKICAgICAgICAgICAgICAgICAgICAgIG51bGwKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB2YWxpZGF0ZVRleHRhcmVhUHJvcHMoZG9tRWxlbWVudCwgcHJvcHMpOwogICAgICAgICAgICBpbml0VGV4dGFyZWEoZG9tRWxlbWVudCwgaGFzU3JjLCBoYXNTcmNTZXQsIHByb3BLZXkpOwogICAgICAgICAgICB0cmFjayhkb21FbGVtZW50KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgY2FzZSAib3B0aW9uIjoKICAgICAgICAgICAgdmFsaWRhdGVPcHRpb25Qcm9wcyhkb21FbGVtZW50LCBwcm9wcyk7CiAgICAgICAgICAgIGZvciAoY2hlY2tlZCBpbiBwcm9wcykKICAgICAgICAgICAgICBpZiAocHJvcHMuaGFzT3duUHJvcGVydHkoY2hlY2tlZCkgJiYgKGhhc1NyYyA9IHByb3BzW2NoZWNrZWRdLCBudWxsICE9IGhhc1NyYykpCiAgICAgICAgICAgICAgICBzd2l0Y2ggKGNoZWNrZWQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAic2VsZWN0ZWQiOgogICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQuc2VsZWN0ZWQgPSBoYXNTcmMgJiYgImZ1bmN0aW9uIiAhPT0gdHlwZW9mIGhhc1NyYyAmJiAic3ltYm9sIiAhPT0gdHlwZW9mIGhhc1NyYzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICBzZXRQcm9wKGRvbUVsZW1lbnQsIHRhZywgY2hlY2tlZCwgaGFzU3JjLCBwcm9wcywgbnVsbCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIGNhc2UgImRpYWxvZyI6CiAgICAgICAgICAgIGxpc3RlblRvTm9uRGVsZWdhdGVkRXZlbnQoImJlZm9yZXRvZ2dsZSIsIGRvbUVsZW1lbnQpOwogICAgICAgICAgICBsaXN0ZW5Ub05vbkRlbGVnYXRlZEV2ZW50KCJ0b2dnbGUiLCBkb21FbGVtZW50KTsKICAgICAgICAgICAgbGlzdGVuVG9Ob25EZWxlZ2F0ZWRFdmVudCgiY2FuY2VsIiwgZG9tRWxlbWVudCk7CiAgICAgICAgICAgIGxpc3RlblRvTm9uRGVsZWdhdGVkRXZlbnQoImNsb3NlIiwgZG9tRWxlbWVudCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiaWZyYW1lIjoKICAgICAgICAgIGNhc2UgIm9iamVjdCI6CiAgICAgICAgICAgIGxpc3RlblRvTm9uRGVsZWdhdGVkRXZlbnQoImxvYWQiLCBkb21FbGVtZW50KTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJ2aWRlbyI6CiAgICAgICAgICBjYXNlICJhdWRpbyI6CiAgICAgICAgICAgIGZvciAoaGFzU3JjID0gMDsgaGFzU3JjIDwgbWVkaWFFdmVudFR5cGVzLmxlbmd0aDsgaGFzU3JjKyspCiAgICAgICAgICAgICAgbGlzdGVuVG9Ob25EZWxlZ2F0ZWRFdmVudChtZWRpYUV2ZW50VHlwZXNbaGFzU3JjXSwgZG9tRWxlbWVudCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiaW1hZ2UiOgogICAgICAgICAgICBsaXN0ZW5Ub05vbkRlbGVnYXRlZEV2ZW50KCJlcnJvciIsIGRvbUVsZW1lbnQpOwogICAgICAgICAgICBsaXN0ZW5Ub05vbkRlbGVnYXRlZEV2ZW50KCJsb2FkIiwgZG9tRWxlbWVudCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiZGV0YWlscyI6CiAgICAgICAgICAgIGxpc3RlblRvTm9uRGVsZWdhdGVkRXZlbnQoInRvZ2dsZSIsIGRvbUVsZW1lbnQpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImVtYmVkIjoKICAgICAgICAgIGNhc2UgInNvdXJjZSI6CiAgICAgICAgICBjYXNlICJsaW5rIjoKICAgICAgICAgICAgbGlzdGVuVG9Ob25EZWxlZ2F0ZWRFdmVudCgiZXJyb3IiLCBkb21FbGVtZW50KSwgbGlzdGVuVG9Ob25EZWxlZ2F0ZWRFdmVudCgibG9hZCIsIGRvbUVsZW1lbnQpOwogICAgICAgICAgY2FzZSAiYXJlYSI6CiAgICAgICAgICBjYXNlICJiYXNlIjoKICAgICAgICAgIGNhc2UgImJyIjoKICAgICAgICAgIGNhc2UgImNvbCI6CiAgICAgICAgICBjYXNlICJociI6CiAgICAgICAgICBjYXNlICJrZXlnZW4iOgogICAgICAgICAgY2FzZSAibWV0YSI6CiAgICAgICAgICBjYXNlICJwYXJhbSI6CiAgICAgICAgICBjYXNlICJ0cmFjayI6CiAgICAgICAgICBjYXNlICJ3YnIiOgogICAgICAgICAgY2FzZSAibWVudWl0ZW0iOgogICAgICAgICAgICBmb3IgKGRlZmF1bHRDaGVja2VkIGluIHByb3BzKQogICAgICAgICAgICAgIGlmIChwcm9wcy5oYXNPd25Qcm9wZXJ0eShkZWZhdWx0Q2hlY2tlZCkgJiYgKGhhc1NyYyA9IHByb3BzW2RlZmF1bHRDaGVja2VkXSwgbnVsbCAhPSBoYXNTcmMpKQogICAgICAgICAgICAgICAgc3dpdGNoIChkZWZhdWx0Q2hlY2tlZCkgewogICAgICAgICAgICAgICAgICBjYXNlICJjaGlsZHJlbiI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIjoKICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICAgICAgICAgICAgIHRhZyArICIgaXMgYSB2b2lkIGVsZW1lbnQgdGFnIGFuZCBtdXN0IG5laXRoZXIgaGF2ZSBgY2hpbGRyZW5gIG5vciB1c2UgYGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYC4iCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICBzZXRQcm9wKGRvbUVsZW1lbnQsIHRhZywgZGVmYXVsdENoZWNrZWQsIGhhc1NyYywgcHJvcHMsIG51bGwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBpZiAoaXNDdXN0b21FbGVtZW50KHRhZykpIHsKICAgICAgICAgICAgICBmb3IgKF9wcm9wVmFsdWUgaW4gcHJvcHMpCiAgICAgICAgICAgICAgICBwcm9wcy5oYXNPd25Qcm9wZXJ0eShfcHJvcFZhbHVlKSAmJiAoaGFzU3JjID0gcHJvcHNbX3Byb3BWYWx1ZV0sIHZvaWQgMCAhPT0gaGFzU3JjICYmIHNldFByb3BPbkN1c3RvbUVsZW1lbnQoCiAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQsCiAgICAgICAgICAgICAgICAgIHRhZywKICAgICAgICAgICAgICAgICAgX3Byb3BWYWx1ZSwKICAgICAgICAgICAgICAgICAgaGFzU3JjLAogICAgICAgICAgICAgICAgICBwcm9wcywKICAgICAgICAgICAgICAgICAgdm9pZCAwCiAgICAgICAgICAgICAgICApKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZm9yIChkZWZhdWx0VmFsdWUgaW4gcHJvcHMpCiAgICAgICAgICBwcm9wcy5oYXNPd25Qcm9wZXJ0eShkZWZhdWx0VmFsdWUpICYmIChoYXNTcmMgPSBwcm9wc1tkZWZhdWx0VmFsdWVdLCBudWxsICE9IGhhc1NyYyAmJiBzZXRQcm9wKGRvbUVsZW1lbnQsIHRhZywgZGVmYXVsdFZhbHVlLCBoYXNTcmMsIHByb3BzLCBudWxsKSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdXBkYXRlUHJvcGVydGllcyhkb21FbGVtZW50LCB0YWcsIGxhc3RQcm9wcywgbmV4dFByb3BzKSB7CiAgICAgICAgdmFsaWRhdGVQcm9wZXJ0aWVzSW5EZXZlbG9wbWVudCh0YWcsIG5leHRQcm9wcyk7CiAgICAgICAgc3dpdGNoICh0YWcpIHsKICAgICAgICAgIGNhc2UgImRpdiI6CiAgICAgICAgICBjYXNlICJzcGFuIjoKICAgICAgICAgIGNhc2UgInN2ZyI6CiAgICAgICAgICBjYXNlICJwYXRoIjoKICAgICAgICAgIGNhc2UgImEiOgogICAgICAgICAgY2FzZSAiZyI6CiAgICAgICAgICBjYXNlICJwIjoKICAgICAgICAgIGNhc2UgImxpIjoKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJpbnB1dCI6CiAgICAgICAgICAgIHZhciBuYW1lID0gbnVsbCwgdHlwZSA9IG51bGwsIHZhbHVlID0gbnVsbCwgZGVmYXVsdFZhbHVlID0gbnVsbCwgbGFzdERlZmF1bHRWYWx1ZSA9IG51bGwsIGNoZWNrZWQgPSBudWxsLCBkZWZhdWx0Q2hlY2tlZCA9IG51bGw7CiAgICAgICAgICAgIGZvciAocHJvcEtleSBpbiBsYXN0UHJvcHMpIHsKICAgICAgICAgICAgICB2YXIgbGFzdFByb3AgPSBsYXN0UHJvcHNbcHJvcEtleV07CiAgICAgICAgICAgICAgaWYgKGxhc3RQcm9wcy5oYXNPd25Qcm9wZXJ0eShwcm9wS2V5KSAmJiBudWxsICE9IGxhc3RQcm9wKQogICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wS2V5KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgImNoZWNrZWQiOgogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBjYXNlICJ2YWx1ZSI6CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGNhc2UgImRlZmF1bHRWYWx1ZSI6CiAgICAgICAgICAgICAgICAgICAgbGFzdERlZmF1bHRWYWx1ZSA9IGxhc3RQcm9wOwogICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIG5leHRQcm9wcy5oYXNPd25Qcm9wZXJ0eShwcm9wS2V5KSB8fCBzZXRQcm9wKAogICAgICAgICAgICAgICAgICAgICAgZG9tRWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIHRhZywKICAgICAgICAgICAgICAgICAgICAgIHByb3BLZXksCiAgICAgICAgICAgICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgICAgICAgICAgbmV4dFByb3BzLAogICAgICAgICAgICAgICAgICAgICAgbGFzdFByb3AKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAodmFyIF9wcm9wS2V5OCBpbiBuZXh0UHJvcHMpIHsKICAgICAgICAgICAgICB2YXIgcHJvcEtleSA9IG5leHRQcm9wc1tfcHJvcEtleThdOwogICAgICAgICAgICAgIGxhc3RQcm9wID0gbGFzdFByb3BzW19wcm9wS2V5OF07CiAgICAgICAgICAgICAgaWYgKG5leHRQcm9wcy5oYXNPd25Qcm9wZXJ0eShfcHJvcEtleTgpICYmIChudWxsICE9IHByb3BLZXkgfHwgbnVsbCAhPSBsYXN0UHJvcCkpCiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9wcm9wS2V5OCkgewogICAgICAgICAgICAgICAgICBjYXNlICJ0eXBlIjoKICAgICAgICAgICAgICAgICAgICB0eXBlID0gcHJvcEtleTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgY2FzZSAibmFtZSI6CiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IHByb3BLZXk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGNhc2UgImNoZWNrZWQiOgogICAgICAgICAgICAgICAgICAgIGNoZWNrZWQgPSBwcm9wS2V5OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBjYXNlICJkZWZhdWx0Q2hlY2tlZCI6CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdENoZWNrZWQgPSBwcm9wS2V5OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBjYXNlICJ2YWx1ZSI6CiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBwcm9wS2V5OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBjYXNlICJkZWZhdWx0VmFsdWUiOgogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZSA9IHByb3BLZXk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGNhc2UgImNoaWxkcmVuIjoKICAgICAgICAgICAgICAgICAgY2FzZSAiZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwiOgogICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IHByb3BLZXkpCiAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICAgICAgICAgICAgICAgdGFnICsgIiBpcyBhIHZvaWQgZWxlbWVudCB0YWcgYW5kIG11c3QgbmVpdGhlciBoYXZlIGBjaGlsZHJlbmAgbm9yIHVzZSBgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUxgLiIKICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgcHJvcEtleSAhPT0gbGFzdFByb3AgJiYgc2V0UHJvcCgKICAgICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICB0YWcsCiAgICAgICAgICAgICAgICAgICAgICBfcHJvcEtleTgsCiAgICAgICAgICAgICAgICAgICAgICBwcm9wS2V5LAogICAgICAgICAgICAgICAgICAgICAgbmV4dFByb3BzLAogICAgICAgICAgICAgICAgICAgICAgbGFzdFByb3AKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRhZyA9ICJjaGVja2JveCIgPT09IGxhc3RQcm9wcy50eXBlIHx8ICJyYWRpbyIgPT09IGxhc3RQcm9wcy50eXBlID8gbnVsbCAhPSBsYXN0UHJvcHMuY2hlY2tlZCA6IG51bGwgIT0gbGFzdFByb3BzLnZhbHVlOwogICAgICAgICAgICBuZXh0UHJvcHMgPSAiY2hlY2tib3giID09PSBuZXh0UHJvcHMudHlwZSB8fCAicmFkaW8iID09PSBuZXh0UHJvcHMudHlwZSA/IG51bGwgIT0gbmV4dFByb3BzLmNoZWNrZWQgOiBudWxsICE9IG5leHRQcm9wcy52YWx1ZTsKICAgICAgICAgICAgdGFnIHx8ICFuZXh0UHJvcHMgfHwgZGlkV2FyblVuY29udHJvbGxlZFRvQ29udHJvbGxlZCB8fCAoY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAiQSBjb21wb25lbnQgaXMgY2hhbmdpbmcgYW4gdW5jb250cm9sbGVkIGlucHV0IHRvIGJlIGNvbnRyb2xsZWQuIFRoaXMgaXMgbGlrZWx5IGNhdXNlZCBieSB0aGUgdmFsdWUgY2hhbmdpbmcgZnJvbSB1bmRlZmluZWQgdG8gYSBkZWZpbmVkIHZhbHVlLCB3aGljaCBzaG91bGQgbm90IGhhcHBlbi4gRGVjaWRlIGJldHdlZW4gdXNpbmcgYSBjb250cm9sbGVkIG9yIHVuY29udHJvbGxlZCBpbnB1dCBlbGVtZW50IGZvciB0aGUgbGlmZXRpbWUgb2YgdGhlIGNvbXBvbmVudC4gTW9yZSBpbmZvOiBodHRwczovL3JlYWN0LmRldi9saW5rL2NvbnRyb2xsZWQtY29tcG9uZW50cyIKICAgICAgICAgICAgKSwgZGlkV2FyblVuY29udHJvbGxlZFRvQ29udHJvbGxlZCA9IHRydWUpOwogICAgICAgICAgICAhdGFnIHx8IG5leHRQcm9wcyB8fCBkaWRXYXJuQ29udHJvbGxlZFRvVW5jb250cm9sbGVkIHx8IChjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICJBIGNvbXBvbmVudCBpcyBjaGFuZ2luZyBhIGNvbnRyb2xsZWQgaW5wdXQgdG8gYmUgdW5jb250cm9sbGVkLiBUaGlzIGlzIGxpa2VseSBjYXVzZWQgYnkgdGhlIHZhbHVlIGNoYW5naW5nIGZyb20gYSBkZWZpbmVkIHRvIHVuZGVmaW5lZCwgd2hpY2ggc2hvdWxkIG5vdCBoYXBwZW4uIERlY2lkZSBiZXR3ZWVuIHVzaW5nIGEgY29udHJvbGxlZCBvciB1bmNvbnRyb2xsZWQgaW5wdXQgZWxlbWVudCBmb3IgdGhlIGxpZmV0aW1lIG9mIHRoZSBjb21wb25lbnQuIE1vcmUgaW5mbzogaHR0cHM6Ly9yZWFjdC5kZXYvbGluay9jb250cm9sbGVkLWNvbXBvbmVudHMiCiAgICAgICAgICAgICksIGRpZFdhcm5Db250cm9sbGVkVG9VbmNvbnRyb2xsZWQgPSB0cnVlKTsKICAgICAgICAgICAgdXBkYXRlSW5wdXQoCiAgICAgICAgICAgICAgZG9tRWxlbWVudCwKICAgICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgICBkZWZhdWx0VmFsdWUsCiAgICAgICAgICAgICAgbGFzdERlZmF1bHRWYWx1ZSwKICAgICAgICAgICAgICBjaGVja2VkLAogICAgICAgICAgICAgIGRlZmF1bHRDaGVja2VkLAogICAgICAgICAgICAgIHR5cGUsCiAgICAgICAgICAgICAgbmFtZQogICAgICAgICAgICApOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICBjYXNlICJzZWxlY3QiOgogICAgICAgICAgICBwcm9wS2V5ID0gdmFsdWUgPSBkZWZhdWx0VmFsdWUgPSBfcHJvcEtleTggPSBudWxsOwogICAgICAgICAgICBmb3IgKHR5cGUgaW4gbGFzdFByb3BzKQogICAgICAgICAgICAgIGlmIChsYXN0RGVmYXVsdFZhbHVlID0gbGFzdFByb3BzW3R5cGVdLCBsYXN0UHJvcHMuaGFzT3duUHJvcGVydHkodHlwZSkgJiYgbnVsbCAhPSBsYXN0RGVmYXVsdFZhbHVlKQogICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgInZhbHVlIjoKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgY2FzZSAibXVsdGlwbGUiOgogICAgICAgICAgICAgICAgICAgIHByb3BLZXkgPSBsYXN0RGVmYXVsdFZhbHVlOwogICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIG5leHRQcm9wcy5oYXNPd25Qcm9wZXJ0eSh0eXBlKSB8fCBzZXRQcm9wKAogICAgICAgICAgICAgICAgICAgICAgZG9tRWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIHRhZywKICAgICAgICAgICAgICAgICAgICAgIHR5cGUsCiAgICAgICAgICAgICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgICAgICAgICAgbmV4dFByb3BzLAogICAgICAgICAgICAgICAgICAgICAgbGFzdERlZmF1bHRWYWx1ZQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAobmFtZSBpbiBuZXh0UHJvcHMpCiAgICAgICAgICAgICAgaWYgKHR5cGUgPSBuZXh0UHJvcHNbbmFtZV0sIGxhc3REZWZhdWx0VmFsdWUgPSBsYXN0UHJvcHNbbmFtZV0sIG5leHRQcm9wcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiAobnVsbCAhPSB0eXBlIHx8IG51bGwgIT0gbGFzdERlZmF1bHRWYWx1ZSkpCiAgICAgICAgICAgICAgICBzd2l0Y2ggKG5hbWUpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAidmFsdWUiOgogICAgICAgICAgICAgICAgICAgIF9wcm9wS2V5OCA9IHR5cGU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGNhc2UgImRlZmF1bHRWYWx1ZSI6CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlID0gdHlwZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgY2FzZSAibXVsdGlwbGUiOgogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdHlwZTsKICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICB0eXBlICE9PSBsYXN0RGVmYXVsdFZhbHVlICYmIHNldFByb3AoCiAgICAgICAgICAgICAgICAgICAgICBkb21FbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgdGFnLAogICAgICAgICAgICAgICAgICAgICAgbmFtZSwKICAgICAgICAgICAgICAgICAgICAgIHR5cGUsCiAgICAgICAgICAgICAgICAgICAgICBuZXh0UHJvcHMsCiAgICAgICAgICAgICAgICAgICAgICBsYXN0RGVmYXVsdFZhbHVlCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgbmV4dFByb3BzID0gZGVmYXVsdFZhbHVlOwogICAgICAgICAgICB0YWcgPSB2YWx1ZTsKICAgICAgICAgICAgbGFzdFByb3BzID0gcHJvcEtleTsKICAgICAgICAgICAgbnVsbCAhPSBfcHJvcEtleTggPyB1cGRhdGVPcHRpb25zKGRvbUVsZW1lbnQsICEhdGFnLCBfcHJvcEtleTgsIGZhbHNlKSA6ICEhbGFzdFByb3BzICE9PSAhIXRhZyAmJiAobnVsbCAhPSBuZXh0UHJvcHMgPyB1cGRhdGVPcHRpb25zKGRvbUVsZW1lbnQsICEhdGFnLCBuZXh0UHJvcHMsIHRydWUpIDogdXBkYXRlT3B0aW9ucyhkb21FbGVtZW50LCAhIXRhZywgdGFnID8gW10gOiAiIiwgZmFsc2UpKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgY2FzZSAidGV4dGFyZWEiOgogICAgICAgICAgICBwcm9wS2V5ID0gX3Byb3BLZXk4ID0gbnVsbDsKICAgICAgICAgICAgZm9yIChkZWZhdWx0VmFsdWUgaW4gbGFzdFByb3BzKQogICAgICAgICAgICAgIGlmIChuYW1lID0gbGFzdFByb3BzW2RlZmF1bHRWYWx1ZV0sIGxhc3RQcm9wcy5oYXNPd25Qcm9wZXJ0eShkZWZhdWx0VmFsdWUpICYmIG51bGwgIT0gbmFtZSAmJiAhbmV4dFByb3BzLmhhc093blByb3BlcnR5KGRlZmF1bHRWYWx1ZSkpCiAgICAgICAgICAgICAgICBzd2l0Y2ggKGRlZmF1bHRWYWx1ZSkgewogICAgICAgICAgICAgICAgICBjYXNlICJ2YWx1ZSI6CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGNhc2UgImNoaWxkcmVuIjoKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICBzZXRQcm9wKGRvbUVsZW1lbnQsIHRhZywgZGVmYXVsdFZhbHVlLCBudWxsLCBuZXh0UHJvcHMsIG5hbWUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKHZhbHVlIGluIG5leHRQcm9wcykKICAgICAgICAgICAgICBpZiAobmFtZSA9IG5leHRQcm9wc1t2YWx1ZV0sIHR5cGUgPSBsYXN0UHJvcHNbdmFsdWVdLCBuZXh0UHJvcHMuaGFzT3duUHJvcGVydHkodmFsdWUpICYmIChudWxsICE9IG5hbWUgfHwgbnVsbCAhPSB0eXBlKSkKICAgICAgICAgICAgICAgIHN3aXRjaCAodmFsdWUpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAidmFsdWUiOgogICAgICAgICAgICAgICAgICAgIF9wcm9wS2V5OCA9IG5hbWU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGNhc2UgImRlZmF1bHRWYWx1ZSI6CiAgICAgICAgICAgICAgICAgICAgcHJvcEtleSA9IG5hbWU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGNhc2UgImNoaWxkcmVuIjoKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgY2FzZSAiZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwiOgogICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IG5hbWUpCiAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICAgICAgICAgICAgICAgImBkYW5nZXJvdXNseVNldElubmVySFRNTGAgZG9lcyBub3QgbWFrZSBzZW5zZSBvbiA8dGV4dGFyZWE+LiIKICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgbmFtZSAhPT0gdHlwZSAmJiBzZXRQcm9wKGRvbUVsZW1lbnQsIHRhZywgdmFsdWUsIG5hbWUsIG5leHRQcm9wcywgdHlwZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIHVwZGF0ZVRleHRhcmVhKGRvbUVsZW1lbnQsIF9wcm9wS2V5OCwgcHJvcEtleSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIGNhc2UgIm9wdGlvbiI6CiAgICAgICAgICAgIGZvciAodmFyIF9wcm9wS2V5MTMgaW4gbGFzdFByb3BzKQogICAgICAgICAgICAgIGlmIChfcHJvcEtleTggPSBsYXN0UHJvcHNbX3Byb3BLZXkxM10sIGxhc3RQcm9wcy5oYXNPd25Qcm9wZXJ0eShfcHJvcEtleTEzKSAmJiBudWxsICE9IF9wcm9wS2V5OCAmJiAhbmV4dFByb3BzLmhhc093blByb3BlcnR5KF9wcm9wS2V5MTMpKQogICAgICAgICAgICAgICAgc3dpdGNoIChfcHJvcEtleTEzKSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgInNlbGVjdGVkIjoKICAgICAgICAgICAgICAgICAgICBkb21FbGVtZW50LnNlbGVjdGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgc2V0UHJvcCgKICAgICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICB0YWcsCiAgICAgICAgICAgICAgICAgICAgICBfcHJvcEtleTEzLAogICAgICAgICAgICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIG5leHRQcm9wcywKICAgICAgICAgICAgICAgICAgICAgIF9wcm9wS2V5OAogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAobGFzdERlZmF1bHRWYWx1ZSBpbiBuZXh0UHJvcHMpCiAgICAgICAgICAgICAgaWYgKF9wcm9wS2V5OCA9IG5leHRQcm9wc1tsYXN0RGVmYXVsdFZhbHVlXSwgcHJvcEtleSA9IGxhc3RQcm9wc1tsYXN0RGVmYXVsdFZhbHVlXSwgbmV4dFByb3BzLmhhc093blByb3BlcnR5KGxhc3REZWZhdWx0VmFsdWUpICYmIF9wcm9wS2V5OCAhPT0gcHJvcEtleSAmJiAobnVsbCAhPSBfcHJvcEtleTggfHwgbnVsbCAhPSBwcm9wS2V5KSkKICAgICAgICAgICAgICAgIHN3aXRjaCAobGFzdERlZmF1bHRWYWx1ZSkgewogICAgICAgICAgICAgICAgICBjYXNlICJzZWxlY3RlZCI6CiAgICAgICAgICAgICAgICAgICAgZG9tRWxlbWVudC5zZWxlY3RlZCA9IF9wcm9wS2V5OCAmJiAiZnVuY3Rpb24iICE9PSB0eXBlb2YgX3Byb3BLZXk4ICYmICJzeW1ib2wiICE9PSB0eXBlb2YgX3Byb3BLZXk4OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHNldFByb3AoCiAgICAgICAgICAgICAgICAgICAgICBkb21FbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgdGFnLAogICAgICAgICAgICAgICAgICAgICAgbGFzdERlZmF1bHRWYWx1ZSwKICAgICAgICAgICAgICAgICAgICAgIF9wcm9wS2V5OCwKICAgICAgICAgICAgICAgICAgICAgIG5leHRQcm9wcywKICAgICAgICAgICAgICAgICAgICAgIHByb3BLZXkKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICBjYXNlICJpbWciOgogICAgICAgICAgY2FzZSAibGluayI6CiAgICAgICAgICBjYXNlICJhcmVhIjoKICAgICAgICAgIGNhc2UgImJhc2UiOgogICAgICAgICAgY2FzZSAiYnIiOgogICAgICAgICAgY2FzZSAiY29sIjoKICAgICAgICAgIGNhc2UgImVtYmVkIjoKICAgICAgICAgIGNhc2UgImhyIjoKICAgICAgICAgIGNhc2UgImtleWdlbiI6CiAgICAgICAgICBjYXNlICJtZXRhIjoKICAgICAgICAgIGNhc2UgInBhcmFtIjoKICAgICAgICAgIGNhc2UgInNvdXJjZSI6CiAgICAgICAgICBjYXNlICJ0cmFjayI6CiAgICAgICAgICBjYXNlICJ3YnIiOgogICAgICAgICAgY2FzZSAibWVudWl0ZW0iOgogICAgICAgICAgICBmb3IgKHZhciBfcHJvcEtleTE1IGluIGxhc3RQcm9wcykKICAgICAgICAgICAgICBfcHJvcEtleTggPSBsYXN0UHJvcHNbX3Byb3BLZXkxNV0sIGxhc3RQcm9wcy5oYXNPd25Qcm9wZXJ0eShfcHJvcEtleTE1KSAmJiBudWxsICE9IF9wcm9wS2V5OCAmJiAhbmV4dFByb3BzLmhhc093blByb3BlcnR5KF9wcm9wS2V5MTUpICYmIHNldFByb3AoCiAgICAgICAgICAgICAgICBkb21FbGVtZW50LAogICAgICAgICAgICAgICAgdGFnLAogICAgICAgICAgICAgICAgX3Byb3BLZXkxNSwKICAgICAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgICAgICBuZXh0UHJvcHMsCiAgICAgICAgICAgICAgICBfcHJvcEtleTgKICAgICAgICAgICAgICApOwogICAgICAgICAgICBmb3IgKGNoZWNrZWQgaW4gbmV4dFByb3BzKQogICAgICAgICAgICAgIGlmIChfcHJvcEtleTggPSBuZXh0UHJvcHNbY2hlY2tlZF0sIHByb3BLZXkgPSBsYXN0UHJvcHNbY2hlY2tlZF0sIG5leHRQcm9wcy5oYXNPd25Qcm9wZXJ0eShjaGVja2VkKSAmJiBfcHJvcEtleTggIT09IHByb3BLZXkgJiYgKG51bGwgIT0gX3Byb3BLZXk4IHx8IG51bGwgIT0gcHJvcEtleSkpCiAgICAgICAgICAgICAgICBzd2l0Y2ggKGNoZWNrZWQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAiY2hpbGRyZW4iOgogICAgICAgICAgICAgICAgICBjYXNlICJkYW5nZXJvdXNseVNldElubmVySFRNTCI6CiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gX3Byb3BLZXk4KQogICAgICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAgIHRhZyArICIgaXMgYSB2b2lkIGVsZW1lbnQgdGFnIGFuZCBtdXN0IG5laXRoZXIgaGF2ZSBgY2hpbGRyZW5gIG5vciB1c2UgYGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYC4iCiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHNldFByb3AoCiAgICAgICAgICAgICAgICAgICAgICBkb21FbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgdGFnLAogICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZCwKICAgICAgICAgICAgICAgICAgICAgIF9wcm9wS2V5OCwKICAgICAgICAgICAgICAgICAgICAgIG5leHRQcm9wcywKICAgICAgICAgICAgICAgICAgICAgIHByb3BLZXkKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBpZiAoaXNDdXN0b21FbGVtZW50KHRhZykpIHsKICAgICAgICAgICAgICBmb3IgKHZhciBfcHJvcEtleTE3IGluIGxhc3RQcm9wcykKICAgICAgICAgICAgICAgIF9wcm9wS2V5OCA9IGxhc3RQcm9wc1tfcHJvcEtleTE3XSwgbGFzdFByb3BzLmhhc093blByb3BlcnR5KF9wcm9wS2V5MTcpICYmIHZvaWQgMCAhPT0gX3Byb3BLZXk4ICYmICFuZXh0UHJvcHMuaGFzT3duUHJvcGVydHkoX3Byb3BLZXkxNykgJiYgc2V0UHJvcE9uQ3VzdG9tRWxlbWVudCgKICAgICAgICAgICAgICAgICAgZG9tRWxlbWVudCwKICAgICAgICAgICAgICAgICAgdGFnLAogICAgICAgICAgICAgICAgICBfcHJvcEtleTE3LAogICAgICAgICAgICAgICAgICB2b2lkIDAsCiAgICAgICAgICAgICAgICAgIG5leHRQcm9wcywKICAgICAgICAgICAgICAgICAgX3Byb3BLZXk4CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGZvciAoZGVmYXVsdENoZWNrZWQgaW4gbmV4dFByb3BzKQogICAgICAgICAgICAgICAgX3Byb3BLZXk4ID0gbmV4dFByb3BzW2RlZmF1bHRDaGVja2VkXSwgcHJvcEtleSA9IGxhc3RQcm9wc1tkZWZhdWx0Q2hlY2tlZF0sICFuZXh0UHJvcHMuaGFzT3duUHJvcGVydHkoZGVmYXVsdENoZWNrZWQpIHx8IF9wcm9wS2V5OCA9PT0gcHJvcEtleSB8fCB2b2lkIDAgPT09IF9wcm9wS2V5OCAmJiB2b2lkIDAgPT09IHByb3BLZXkgfHwgc2V0UHJvcE9uQ3VzdG9tRWxlbWVudCgKICAgICAgICAgICAgICAgICAgZG9tRWxlbWVudCwKICAgICAgICAgICAgICAgICAgdGFnLAogICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZCwKICAgICAgICAgICAgICAgICAgX3Byb3BLZXk4LAogICAgICAgICAgICAgICAgICBuZXh0UHJvcHMsCiAgICAgICAgICAgICAgICAgIHByb3BLZXkKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIF9wcm9wS2V5MTkgaW4gbGFzdFByb3BzKQogICAgICAgICAgX3Byb3BLZXk4ID0gbGFzdFByb3BzW19wcm9wS2V5MTldLCBsYXN0UHJvcHMuaGFzT3duUHJvcGVydHkoX3Byb3BLZXkxOSkgJiYgbnVsbCAhPSBfcHJvcEtleTggJiYgIW5leHRQcm9wcy5oYXNPd25Qcm9wZXJ0eShfcHJvcEtleTE5KSAmJiBzZXRQcm9wKGRvbUVsZW1lbnQsIHRhZywgX3Byb3BLZXkxOSwgbnVsbCwgbmV4dFByb3BzLCBfcHJvcEtleTgpOwogICAgICAgIGZvciAobGFzdFByb3AgaW4gbmV4dFByb3BzKQogICAgICAgICAgX3Byb3BLZXk4ID0gbmV4dFByb3BzW2xhc3RQcm9wXSwgcHJvcEtleSA9IGxhc3RQcm9wc1tsYXN0UHJvcF0sICFuZXh0UHJvcHMuaGFzT3duUHJvcGVydHkobGFzdFByb3ApIHx8IF9wcm9wS2V5OCA9PT0gcHJvcEtleSB8fCBudWxsID09IF9wcm9wS2V5OCAmJiBudWxsID09IHByb3BLZXkgfHwgc2V0UHJvcChkb21FbGVtZW50LCB0YWcsIGxhc3RQcm9wLCBfcHJvcEtleTgsIG5leHRQcm9wcywgcHJvcEtleSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0UHJvcE5hbWVGcm9tQXR0cmlidXRlTmFtZShhdHRyTmFtZSkgewogICAgICAgIHN3aXRjaCAoYXR0ck5hbWUpIHsKICAgICAgICAgIGNhc2UgImNsYXNzIjoKICAgICAgICAgICAgcmV0dXJuICJjbGFzc05hbWUiOwogICAgICAgICAgY2FzZSAiZm9yIjoKICAgICAgICAgICAgcmV0dXJuICJodG1sRm9yIjsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJldHVybiBhdHRyTmFtZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0U3R5bGVzT2JqZWN0RnJvbUVsZW1lbnQoZG9tRWxlbWVudCkgewogICAgICAgIHZhciBzZXJ2ZXJWYWx1ZUluT2JqZWN0Rm9ybSA9IHt9OwogICAgICAgIGRvbUVsZW1lbnQgPSBkb21FbGVtZW50LnN0eWxlOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9tRWxlbWVudC5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIHN0eWxlTmFtZSA9IGRvbUVsZW1lbnRbaV07CiAgICAgICAgICBzZXJ2ZXJWYWx1ZUluT2JqZWN0Rm9ybVtzdHlsZU5hbWVdID0gZG9tRWxlbWVudC5nZXRQcm9wZXJ0eVZhbHVlKHN0eWxlTmFtZSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzZXJ2ZXJWYWx1ZUluT2JqZWN0Rm9ybTsKICAgICAgfQogICAgICBmdW5jdGlvbiBkaWZmSHlkcmF0ZWRTdHlsZXMoZG9tRWxlbWVudCwgdmFsdWUkanNjb21wJDAsIHNlcnZlckRpZmZlcmVuY2VzKSB7CiAgICAgICAgaWYgKG51bGwgIT0gdmFsdWUkanNjb21wJDAgJiYgIm9iamVjdCIgIT09IHR5cGVvZiB2YWx1ZSRqc2NvbXAkMCkKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICJUaGUgYHN0eWxlYCBwcm9wIGV4cGVjdHMgYSBtYXBwaW5nIGZyb20gc3R5bGUgcHJvcGVydGllcyB0byB2YWx1ZXMsIG5vdCBhIHN0cmluZy4gRm9yIGV4YW1wbGUsIHN0eWxlPXt7bWFyZ2luUmlnaHQ6IHNwYWNpbmcgKyAnZW0nfX0gd2hlbiB1c2luZyBKU1guIgogICAgICAgICAgKTsKICAgICAgICBlbHNlIHsKICAgICAgICAgIHZhciBjbGllbnRWYWx1ZTsKICAgICAgICAgIHZhciBkZWxpbWl0ZXIgPSBjbGllbnRWYWx1ZSA9ICIiLCBzdHlsZU5hbWU7CiAgICAgICAgICBmb3IgKHN0eWxlTmFtZSBpbiB2YWx1ZSRqc2NvbXAkMCkKICAgICAgICAgICAgaWYgKHZhbHVlJGpzY29tcCQwLmhhc093blByb3BlcnR5KHN0eWxlTmFtZSkpIHsKICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB2YWx1ZSRqc2NvbXAkMFtzdHlsZU5hbWVdOwogICAgICAgICAgICAgIG51bGwgIT0gdmFsdWUgJiYgImJvb2xlYW4iICE9PSB0eXBlb2YgdmFsdWUgJiYgIiIgIT09IHZhbHVlICYmICgwID09PSBzdHlsZU5hbWUuaW5kZXhPZigiLS0iKSA/IChjaGVja0NTU1Byb3BlcnR5U3RyaW5nQ29lcmNpb24odmFsdWUsIHN0eWxlTmFtZSksIGNsaWVudFZhbHVlICs9IGRlbGltaXRlciArIHN0eWxlTmFtZSArICI6IiArICgiIiArIHZhbHVlKS50cmltKCkpIDogIm51bWJlciIgIT09IHR5cGVvZiB2YWx1ZSB8fCAwID09PSB2YWx1ZSB8fCB1bml0bGVzc051bWJlcnMuaGFzKHN0eWxlTmFtZSkgPyAoY2hlY2tDU1NQcm9wZXJ0eVN0cmluZ0NvZXJjaW9uKHZhbHVlLCBzdHlsZU5hbWUpLCBjbGllbnRWYWx1ZSArPSBkZWxpbWl0ZXIgKyBzdHlsZU5hbWUucmVwbGFjZSh1cHBlcmNhc2VQYXR0ZXJuLCAiLSQxIikudG9Mb3dlckNhc2UoKS5yZXBsYWNlKG1zUGF0dGVybiQxLCAiLW1zLSIpICsgIjoiICsgKCIiICsgdmFsdWUpLnRyaW0oKSkgOiBjbGllbnRWYWx1ZSArPSBkZWxpbWl0ZXIgKyBzdHlsZU5hbWUucmVwbGFjZSh1cHBlcmNhc2VQYXR0ZXJuLCAiLSQxIikudG9Mb3dlckNhc2UoKS5yZXBsYWNlKG1zUGF0dGVybiQxLCAiLW1zLSIpICsgIjoiICsgdmFsdWUgKyAicHgiLCBkZWxpbWl0ZXIgPSAiOyIpOwogICAgICAgICAgICB9CiAgICAgICAgICBjbGllbnRWYWx1ZSA9IGNsaWVudFZhbHVlIHx8IG51bGw7CiAgICAgICAgICB2YWx1ZSRqc2NvbXAkMCA9IGRvbUVsZW1lbnQuZ2V0QXR0cmlidXRlKCJzdHlsZSIpOwogICAgICAgICAgdmFsdWUkanNjb21wJDAgIT09IGNsaWVudFZhbHVlICYmIChjbGllbnRWYWx1ZSA9IG5vcm1hbGl6ZU1hcmt1cEZvclRleHRPckF0dHJpYnV0ZShjbGllbnRWYWx1ZSksIG5vcm1hbGl6ZU1hcmt1cEZvclRleHRPckF0dHJpYnV0ZSh2YWx1ZSRqc2NvbXAkMCkgIT09IGNsaWVudFZhbHVlICYmIChzZXJ2ZXJEaWZmZXJlbmNlcy5zdHlsZSA9IGdldFN0eWxlc09iamVjdEZyb21FbGVtZW50KGRvbUVsZW1lbnQpKSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGh5ZHJhdGVBdHRyaWJ1dGUoZG9tRWxlbWVudCwgcHJvcEtleSwgYXR0cmlidXRlTmFtZSwgdmFsdWUsIGV4dHJhQXR0cmlidXRlcywgc2VydmVyRGlmZmVyZW5jZXMpIHsKICAgICAgICBleHRyYUF0dHJpYnV0ZXMuZGVsZXRlKGF0dHJpYnV0ZU5hbWUpOwogICAgICAgIGRvbUVsZW1lbnQgPSBkb21FbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKTsKICAgICAgICBpZiAobnVsbCA9PT0gZG9tRWxlbWVudCkKICAgICAgICAgIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7CiAgICAgICAgICAgIGNhc2UgInVuZGVmaW5lZCI6CiAgICAgICAgICAgIGNhc2UgImZ1bmN0aW9uIjoKICAgICAgICAgICAgY2FzZSAic3ltYm9sIjoKICAgICAgICAgICAgY2FzZSAiYm9vbGVhbiI6CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKG51bGwgIT0gdmFsdWUpCiAgICAgICAgICBzd2l0Y2ggKHR5cGVvZiB2YWx1ZSkgewogICAgICAgICAgICBjYXNlICJmdW5jdGlvbiI6CiAgICAgICAgICAgIGNhc2UgInN5bWJvbCI6CiAgICAgICAgICAgIGNhc2UgImJvb2xlYW4iOgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIGlmIChjaGVja0F0dHJpYnV0ZVN0cmluZ0NvZXJjaW9uKHZhbHVlLCBwcm9wS2V5KSwgZG9tRWxlbWVudCA9PT0gIiIgKyB2YWx1ZSkKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICB3YXJuRm9yUHJvcERpZmZlcmVuY2UocHJvcEtleSwgZG9tRWxlbWVudCwgdmFsdWUsIHNlcnZlckRpZmZlcmVuY2VzKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBoeWRyYXRlQm9vbGVhbkF0dHJpYnV0ZShkb21FbGVtZW50LCBwcm9wS2V5LCBhdHRyaWJ1dGVOYW1lLCB2YWx1ZSwgZXh0cmFBdHRyaWJ1dGVzLCBzZXJ2ZXJEaWZmZXJlbmNlcykgewogICAgICAgIGV4dHJhQXR0cmlidXRlcy5kZWxldGUoYXR0cmlidXRlTmFtZSk7CiAgICAgICAgZG9tRWxlbWVudCA9IGRvbUVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpOwogICAgICAgIGlmIChudWxsID09PSBkb21FbGVtZW50KSB7CiAgICAgICAgICBzd2l0Y2ggKHR5cGVvZiB2YWx1ZSkgewogICAgICAgICAgICBjYXNlICJmdW5jdGlvbiI6CiAgICAgICAgICAgIGNhc2UgInN5bWJvbCI6CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuOwogICAgICAgIH0gZWxzZQogICAgICAgICAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHsKICAgICAgICAgICAgY2FzZSAiZnVuY3Rpb24iOgogICAgICAgICAgICBjYXNlICJzeW1ib2wiOgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIGlmICh2YWx1ZSkgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIHdhcm5Gb3JQcm9wRGlmZmVyZW5jZShwcm9wS2V5LCBkb21FbGVtZW50LCB2YWx1ZSwgc2VydmVyRGlmZmVyZW5jZXMpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGh5ZHJhdGVCb29sZWFuaXNoQXR0cmlidXRlKGRvbUVsZW1lbnQsIHByb3BLZXksIGF0dHJpYnV0ZU5hbWUsIHZhbHVlLCBleHRyYUF0dHJpYnV0ZXMsIHNlcnZlckRpZmZlcmVuY2VzKSB7CiAgICAgICAgZXh0cmFBdHRyaWJ1dGVzLmRlbGV0ZShhdHRyaWJ1dGVOYW1lKTsKICAgICAgICBkb21FbGVtZW50ID0gZG9tRWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSk7CiAgICAgICAgaWYgKG51bGwgPT09IGRvbUVsZW1lbnQpCiAgICAgICAgICBzd2l0Y2ggKHR5cGVvZiB2YWx1ZSkgewogICAgICAgICAgICBjYXNlICJ1bmRlZmluZWQiOgogICAgICAgICAgICBjYXNlICJmdW5jdGlvbiI6CiAgICAgICAgICAgIGNhc2UgInN5bWJvbCI6CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKG51bGwgIT0gdmFsdWUpCiAgICAgICAgICBzd2l0Y2ggKHR5cGVvZiB2YWx1ZSkgewogICAgICAgICAgICBjYXNlICJmdW5jdGlvbiI6CiAgICAgICAgICAgIGNhc2UgInN5bWJvbCI6CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgaWYgKGNoZWNrQXR0cmlidXRlU3RyaW5nQ29lcmNpb24odmFsdWUsIGF0dHJpYnV0ZU5hbWUpLCBkb21FbGVtZW50ID09PSAiIiArIHZhbHVlKQogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIHdhcm5Gb3JQcm9wRGlmZmVyZW5jZShwcm9wS2V5LCBkb21FbGVtZW50LCB2YWx1ZSwgc2VydmVyRGlmZmVyZW5jZXMpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGh5ZHJhdGVOdW1lcmljQXR0cmlidXRlKGRvbUVsZW1lbnQsIHByb3BLZXksIGF0dHJpYnV0ZU5hbWUsIHZhbHVlLCBleHRyYUF0dHJpYnV0ZXMsIHNlcnZlckRpZmZlcmVuY2VzKSB7CiAgICAgICAgZXh0cmFBdHRyaWJ1dGVzLmRlbGV0ZShhdHRyaWJ1dGVOYW1lKTsKICAgICAgICBkb21FbGVtZW50ID0gZG9tRWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSk7CiAgICAgICAgaWYgKG51bGwgPT09IGRvbUVsZW1lbnQpCiAgICAgICAgICBzd2l0Y2ggKHR5cGVvZiB2YWx1ZSkgewogICAgICAgICAgICBjYXNlICJ1bmRlZmluZWQiOgogICAgICAgICAgICBjYXNlICJmdW5jdGlvbiI6CiAgICAgICAgICAgIGNhc2UgInN5bWJvbCI6CiAgICAgICAgICAgIGNhc2UgImJvb2xlYW4iOgogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICBpZiAoaXNOYU4odmFsdWUpKSByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAobnVsbCAhPSB2YWx1ZSkKICAgICAgICAgIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7CiAgICAgICAgICAgIGNhc2UgImZ1bmN0aW9uIjoKICAgICAgICAgICAgY2FzZSAic3ltYm9sIjoKICAgICAgICAgICAgY2FzZSAiYm9vbGVhbiI6CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgaWYgKCFpc05hTih2YWx1ZSkgJiYgKGNoZWNrQXR0cmlidXRlU3RyaW5nQ29lcmNpb24odmFsdWUsIHByb3BLZXkpLCBkb21FbGVtZW50ID09PSAiIiArIHZhbHVlKSkKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICB3YXJuRm9yUHJvcERpZmZlcmVuY2UocHJvcEtleSwgZG9tRWxlbWVudCwgdmFsdWUsIHNlcnZlckRpZmZlcmVuY2VzKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBoeWRyYXRlU2FuaXRpemVkQXR0cmlidXRlKGRvbUVsZW1lbnQsIHByb3BLZXksIGF0dHJpYnV0ZU5hbWUsIHZhbHVlLCBleHRyYUF0dHJpYnV0ZXMsIHNlcnZlckRpZmZlcmVuY2VzKSB7CiAgICAgICAgZXh0cmFBdHRyaWJ1dGVzLmRlbGV0ZShhdHRyaWJ1dGVOYW1lKTsKICAgICAgICBkb21FbGVtZW50ID0gZG9tRWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSk7CiAgICAgICAgaWYgKG51bGwgPT09IGRvbUVsZW1lbnQpCiAgICAgICAgICBzd2l0Y2ggKHR5cGVvZiB2YWx1ZSkgewogICAgICAgICAgICBjYXNlICJ1bmRlZmluZWQiOgogICAgICAgICAgICBjYXNlICJmdW5jdGlvbiI6CiAgICAgICAgICAgIGNhc2UgInN5bWJvbCI6CiAgICAgICAgICAgIGNhc2UgImJvb2xlYW4iOgogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICBlbHNlIGlmIChudWxsICE9IHZhbHVlKQogICAgICAgICAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHsKICAgICAgICAgICAgY2FzZSAiZnVuY3Rpb24iOgogICAgICAgICAgICBjYXNlICJzeW1ib2wiOgogICAgICAgICAgICBjYXNlICJib29sZWFuIjoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICBpZiAoY2hlY2tBdHRyaWJ1dGVTdHJpbmdDb2VyY2lvbih2YWx1ZSwgcHJvcEtleSksIGF0dHJpYnV0ZU5hbWUgPSBzYW5pdGl6ZVVSTCgiIiArIHZhbHVlKSwgZG9tRWxlbWVudCA9PT0gYXR0cmlidXRlTmFtZSkKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICB3YXJuRm9yUHJvcERpZmZlcmVuY2UocHJvcEtleSwgZG9tRWxlbWVudCwgdmFsdWUsIHNlcnZlckRpZmZlcmVuY2VzKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBkaWZmSHlkcmF0ZWRQcm9wZXJ0aWVzKGRvbUVsZW1lbnQsIHRhZywgcHJvcHMsIGhvc3RDb250ZXh0KSB7CiAgICAgICAgZm9yICh2YXIgc2VydmVyRGlmZmVyZW5jZXMgPSB7fSwgZXh0cmFBdHRyaWJ1dGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSwgYXR0cmlidXRlcyA9IGRvbUVsZW1lbnQuYXR0cmlidXRlcywgaSA9IDA7IGkgPCBhdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKQogICAgICAgICAgc3dpdGNoIChhdHRyaWJ1dGVzW2ldLm5hbWUudG9Mb3dlckNhc2UoKSkgewogICAgICAgICAgICBjYXNlICJ2YWx1ZSI6CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgImNoZWNrZWQiOgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICJzZWxlY3RlZCI6CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgZXh0cmFBdHRyaWJ1dGVzLmFkZChhdHRyaWJ1dGVzW2ldLm5hbWUpOwogICAgICAgICAgfQogICAgICAgIGlmIChpc0N1c3RvbUVsZW1lbnQodGFnKSkKICAgICAgICAgIGZvciAodmFyIHByb3BLZXkgaW4gcHJvcHMpIHsKICAgICAgICAgICAgaWYgKHByb3BzLmhhc093blByb3BlcnR5KHByb3BLZXkpKSB7CiAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcHJvcHNbcHJvcEtleV07CiAgICAgICAgICAgICAgaWYgKG51bGwgIT0gdmFsdWUpIHsKICAgICAgICAgICAgICAgIGlmIChyZWdpc3RyYXRpb25OYW1lRGVwZW5kZW5jaWVzLmhhc093blByb3BlcnR5KHByb3BLZXkpKQogICAgICAgICAgICAgICAgICAiZnVuY3Rpb24iICE9PSB0eXBlb2YgdmFsdWUgJiYgd2FybkZvckludmFsaWRFdmVudExpc3RlbmVyKHByb3BLZXksIHZhbHVlKTsKICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRydWUgIT09IHByb3BzLnN1cHByZXNzSHlkcmF0aW9uV2FybmluZykKICAgICAgICAgICAgICAgICAgc3dpdGNoIChwcm9wS2V5KSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAiY2hpbGRyZW4iOgogICAgICAgICAgICAgICAgICAgICAgInN0cmluZyIgIT09IHR5cGVvZiB2YWx1ZSAmJiAibnVtYmVyIiAhPT0gdHlwZW9mIHZhbHVlIHx8IHdhcm5Gb3JQcm9wRGlmZmVyZW5jZSgKICAgICAgICAgICAgICAgICAgICAgICAgImNoaWxkcmVuIiwKICAgICAgICAgICAgICAgICAgICAgICAgZG9tRWxlbWVudC50ZXh0Q29udGVudCwKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckRpZmZlcmVuY2VzCiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAic3VwcHJlc3NDb250ZW50RWRpdGFibGVXYXJuaW5nIjoKICAgICAgICAgICAgICAgICAgICBjYXNlICJzdXBwcmVzc0h5ZHJhdGlvbldhcm5pbmciOgogICAgICAgICAgICAgICAgICAgIGNhc2UgImRlZmF1bHRWYWx1ZSI6CiAgICAgICAgICAgICAgICAgICAgY2FzZSAiZGVmYXVsdENoZWNrZWQiOgogICAgICAgICAgICAgICAgICAgIGNhc2UgImlubmVySFRNTCI6CiAgICAgICAgICAgICAgICAgICAgY2FzZSAicmVmIjoKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIGNhc2UgImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIjoKICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMgPSBkb21FbGVtZW50LmlubmVySFRNTDsKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgPyB2YWx1ZS5fX2h0bWwgOiB2b2lkIDA7CiAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IHZhbHVlICYmICh2YWx1ZSA9IG5vcm1hbGl6ZUhUTUwoZG9tRWxlbWVudCwgdmFsdWUpLCB3YXJuRm9yUHJvcERpZmZlcmVuY2UoCiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BLZXksCiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJEaWZmZXJlbmNlcwogICAgICAgICAgICAgICAgICAgICAgKSk7CiAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICBjYXNlICJzdHlsZSI6CiAgICAgICAgICAgICAgICAgICAgICBleHRyYUF0dHJpYnV0ZXMuZGVsZXRlKHByb3BLZXkpOwogICAgICAgICAgICAgICAgICAgICAgZGlmZkh5ZHJhdGVkU3R5bGVzKGRvbUVsZW1lbnQsIHZhbHVlLCBzZXJ2ZXJEaWZmZXJlbmNlcyk7CiAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICBjYXNlICJvZmZzZXRQYXJlbnQiOgogICAgICAgICAgICAgICAgICAgIGNhc2UgIm9mZnNldFRvcCI6CiAgICAgICAgICAgICAgICAgICAgY2FzZSAib2Zmc2V0TGVmdCI6CiAgICAgICAgICAgICAgICAgICAgY2FzZSAib2Zmc2V0V2lkdGgiOgogICAgICAgICAgICAgICAgICAgIGNhc2UgIm9mZnNldEhlaWdodCI6CiAgICAgICAgICAgICAgICAgICAgY2FzZSAiaXNDb250ZW50RWRpdGFibGUiOgogICAgICAgICAgICAgICAgICAgIGNhc2UgIm91dGVyVGV4dCI6CiAgICAgICAgICAgICAgICAgICAgY2FzZSAib3V0ZXJIVE1MIjoKICAgICAgICAgICAgICAgICAgICAgIGV4dHJhQXR0cmlidXRlcy5kZWxldGUocHJvcEtleS50b0xvd2VyQ2FzZSgpKTsKICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAgICJBc3NpZ25tZW50IHRvIHJlYWQtb25seSBwcm9wZXJ0eSB3aWxsIHJlc3VsdCBpbiBhIG5vLW9wOiBgJXNgIiwKICAgICAgICAgICAgICAgICAgICAgICAgcHJvcEtleQogICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIGNhc2UgImNsYXNzTmFtZSI6CiAgICAgICAgICAgICAgICAgICAgICBleHRyYUF0dHJpYnV0ZXMuZGVsZXRlKCJjbGFzcyIpOwogICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcyA9IGdldFZhbHVlRm9yQXR0cmlidXRlT25DdXN0b21Db21wb25lbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICJjbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlCiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgd2FybkZvclByb3BEaWZmZXJlbmNlKAogICAgICAgICAgICAgICAgICAgICAgICAiY2xhc3NOYW1lIiwKICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcywKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckRpZmZlcmVuY2VzCiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgIGhvc3RDb250ZXh0LmNvbnRleHQgPT09IEhvc3RDb250ZXh0TmFtZXNwYWNlTm9uZSAmJiAic3ZnIiAhPT0gdGFnICYmICJtYXRoIiAhPT0gdGFnID8gZXh0cmFBdHRyaWJ1dGVzLmRlbGV0ZShwcm9wS2V5LnRvTG93ZXJDYXNlKCkpIDogZXh0cmFBdHRyaWJ1dGVzLmRlbGV0ZShwcm9wS2V5KSwgYXR0cmlidXRlcyA9IGdldFZhbHVlRm9yQXR0cmlidXRlT25DdXN0b21Db21wb25lbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BLZXksCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlCiAgICAgICAgICAgICAgICAgICAgICApLCB3YXJuRm9yUHJvcERpZmZlcmVuY2UoCiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BLZXksCiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJEaWZmZXJlbmNlcwogICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICAgIGZvciAodmFsdWUgaW4gcHJvcHMpCiAgICAgICAgICAgIGlmIChwcm9wcy5oYXNPd25Qcm9wZXJ0eSh2YWx1ZSkgJiYgKHByb3BLZXkgPSBwcm9wc1t2YWx1ZV0sIG51bGwgIT0gcHJvcEtleSkpIHsKICAgICAgICAgICAgICBpZiAocmVnaXN0cmF0aW9uTmFtZURlcGVuZGVuY2llcy5oYXNPd25Qcm9wZXJ0eSh2YWx1ZSkpCiAgICAgICAgICAgICAgICAiZnVuY3Rpb24iICE9PSB0eXBlb2YgcHJvcEtleSAmJiB3YXJuRm9ySW52YWxpZEV2ZW50TGlzdGVuZXIodmFsdWUsIHByb3BLZXkpOwogICAgICAgICAgICAgIGVsc2UgaWYgKHRydWUgIT09IHByb3BzLnN1cHByZXNzSHlkcmF0aW9uV2FybmluZykKICAgICAgICAgICAgICAgIHN3aXRjaCAodmFsdWUpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAiY2hpbGRyZW4iOgogICAgICAgICAgICAgICAgICAgICJzdHJpbmciICE9PSB0eXBlb2YgcHJvcEtleSAmJiAibnVtYmVyIiAhPT0gdHlwZW9mIHByb3BLZXkgfHwgd2FybkZvclByb3BEaWZmZXJlbmNlKAogICAgICAgICAgICAgICAgICAgICAgImNoaWxkcmVuIiwKICAgICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQudGV4dENvbnRlbnQsCiAgICAgICAgICAgICAgICAgICAgICBwcm9wS2V5LAogICAgICAgICAgICAgICAgICAgICAgc2VydmVyRGlmZmVyZW5jZXMKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICBjYXNlICJzdXBwcmVzc0NvbnRlbnRFZGl0YWJsZVdhcm5pbmciOgogICAgICAgICAgICAgICAgICBjYXNlICJzdXBwcmVzc0h5ZHJhdGlvbldhcm5pbmciOgogICAgICAgICAgICAgICAgICBjYXNlICJ2YWx1ZSI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImNoZWNrZWQiOgogICAgICAgICAgICAgICAgICBjYXNlICJzZWxlY3RlZCI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImRlZmF1bHRWYWx1ZSI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImRlZmF1bHRDaGVja2VkIjoKICAgICAgICAgICAgICAgICAgY2FzZSAiaW5uZXJIVE1MIjoKICAgICAgICAgICAgICAgICAgY2FzZSAicmVmIjoKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgY2FzZSAiZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwiOgogICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMgPSBkb21FbGVtZW50LmlubmVySFRNTDsKICAgICAgICAgICAgICAgICAgICBwcm9wS2V5ID0gcHJvcEtleSA/IHByb3BLZXkuX19odG1sIDogdm9pZCAwOwogICAgICAgICAgICAgICAgICAgIG51bGwgIT0gcHJvcEtleSAmJiAocHJvcEtleSA9IG5vcm1hbGl6ZUhUTUwoZG9tRWxlbWVudCwgcHJvcEtleSksIGF0dHJpYnV0ZXMgIT09IHByb3BLZXkgJiYgKHNlcnZlckRpZmZlcmVuY2VzW3ZhbHVlXSA9IHsgX19odG1sOiBhdHRyaWJ1dGVzIH0pKTsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgY2FzZSAiY2xhc3NOYW1lIjoKICAgICAgICAgICAgICAgICAgICBoeWRyYXRlQXR0cmlidXRlKAogICAgICAgICAgICAgICAgICAgICAgZG9tRWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgImNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAgIHByb3BLZXksCiAgICAgICAgICAgICAgICAgICAgICBleHRyYUF0dHJpYnV0ZXMsCiAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJEaWZmZXJlbmNlcwogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgIGNhc2UgInRhYkluZGV4IjoKICAgICAgICAgICAgICAgICAgICBoeWRyYXRlQXR0cmlidXRlKAogICAgICAgICAgICAgICAgICAgICAgZG9tRWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgInRhYmluZGV4IiwKICAgICAgICAgICAgICAgICAgICAgIHByb3BLZXksCiAgICAgICAgICAgICAgICAgICAgICBleHRyYUF0dHJpYnV0ZXMsCiAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJEaWZmZXJlbmNlcwogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgIGNhc2UgInN0eWxlIjoKICAgICAgICAgICAgICAgICAgICBleHRyYUF0dHJpYnV0ZXMuZGVsZXRlKHZhbHVlKTsKICAgICAgICAgICAgICAgICAgICBkaWZmSHlkcmF0ZWRTdHlsZXMoZG9tRWxlbWVudCwgcHJvcEtleSwgc2VydmVyRGlmZmVyZW5jZXMpOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICBjYXNlICJtdWx0aXBsZSI6CiAgICAgICAgICAgICAgICAgICAgZXh0cmFBdHRyaWJ1dGVzLmRlbGV0ZSh2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgd2FybkZvclByb3BEaWZmZXJlbmNlKAogICAgICAgICAgICAgICAgICAgICAgdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICBkb21FbGVtZW50Lm11bHRpcGxlLAogICAgICAgICAgICAgICAgICAgICAgcHJvcEtleSwKICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckRpZmZlcmVuY2VzCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgY2FzZSAibXV0ZWQiOgogICAgICAgICAgICAgICAgICAgIGV4dHJhQXR0cmlidXRlcy5kZWxldGUodmFsdWUpOwogICAgICAgICAgICAgICAgICAgIHdhcm5Gb3JQcm9wRGlmZmVyZW5jZSgKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgZG9tRWxlbWVudC5tdXRlZCwKICAgICAgICAgICAgICAgICAgICAgIHByb3BLZXksCiAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJEaWZmZXJlbmNlcwogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgIGNhc2UgImF1dG9Gb2N1cyI6CiAgICAgICAgICAgICAgICAgICAgZXh0cmFBdHRyaWJ1dGVzLmRlbGV0ZSgiYXV0b2ZvY3VzIik7CiAgICAgICAgICAgICAgICAgICAgd2FybkZvclByb3BEaWZmZXJlbmNlKAogICAgICAgICAgICAgICAgICAgICAgdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICBkb21FbGVtZW50LmF1dG9mb2N1cywKICAgICAgICAgICAgICAgICAgICAgIHByb3BLZXksCiAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJEaWZmZXJlbmNlcwogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgIGNhc2UgImRhdGEiOgogICAgICAgICAgICAgICAgICAgIGlmICgib2JqZWN0IiAhPT0gdGFnKSB7CiAgICAgICAgICAgICAgICAgICAgICBleHRyYUF0dHJpYnV0ZXMuZGVsZXRlKHZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMgPSBkb21FbGVtZW50LmdldEF0dHJpYnV0ZSgiZGF0YSIpOwogICAgICAgICAgICAgICAgICAgICAgd2FybkZvclByb3BEaWZmZXJlbmNlKAogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcywKICAgICAgICAgICAgICAgICAgICAgICAgcHJvcEtleSwKICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyRGlmZmVyZW5jZXMKICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGNhc2UgInNyYyI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImhyZWYiOgogICAgICAgICAgICAgICAgICAgIGlmICghKCIiICE9PSBwcm9wS2V5IHx8ICJhIiA9PT0gdGFnICYmICJocmVmIiA9PT0gdmFsdWUgfHwgIm9iamVjdCIgPT09IHRhZyAmJiAiZGF0YSIgPT09IHZhbHVlKSkgewogICAgICAgICAgICAgICAgICAgICAgInNyYyIgPT09IHZhbHVlID8gY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAgICAgICAgICAgJ0FuIGVtcHR5IHN0cmluZyAoIiIpIHdhcyBwYXNzZWQgdG8gdGhlICVzIGF0dHJpYnV0ZS4gVGhpcyBtYXkgY2F1c2UgdGhlIGJyb3dzZXIgdG8gZG93bmxvYWQgdGhlIHdob2xlIHBhZ2UgYWdhaW4gb3ZlciB0aGUgbmV0d29yay4gVG8gZml4IHRoaXMsIGVpdGhlciBkbyBub3QgcmVuZGVyIHRoZSBlbGVtZW50IGF0IGFsbCBvciBwYXNzIG51bGwgdG8gJXMgaW5zdGVhZCBvZiBhbiBlbXB0eSBzdHJpbmcuJywKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlCiAgICAgICAgICAgICAgICAgICAgICApIDogY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAgICAgICAgICAgJ0FuIGVtcHR5IHN0cmluZyAoIiIpIHdhcyBwYXNzZWQgdG8gdGhlICVzIGF0dHJpYnV0ZS4gVG8gZml4IHRoaXMsIGVpdGhlciBkbyBub3QgcmVuZGVyIHRoZSBlbGVtZW50IGF0IGFsbCBvciBwYXNzIG51bGwgdG8gJXMgaW5zdGVhZCBvZiBhbiBlbXB0eSBzdHJpbmcuJywKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlCiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGh5ZHJhdGVTYW5pdGl6ZWRBdHRyaWJ1dGUoCiAgICAgICAgICAgICAgICAgICAgICBkb21FbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgIHByb3BLZXksCiAgICAgICAgICAgICAgICAgICAgICBleHRyYUF0dHJpYnV0ZXMsCiAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJEaWZmZXJlbmNlcwogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgIGNhc2UgImFjdGlvbiI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImZvcm1BY3Rpb24iOgogICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMgPSBkb21FbGVtZW50LmdldEF0dHJpYnV0ZSh2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgPT09IHR5cGVvZiBwcm9wS2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICBleHRyYUF0dHJpYnV0ZXMuZGVsZXRlKHZhbHVlLnRvTG93ZXJDYXNlKCkpOwogICAgICAgICAgICAgICAgICAgICAgImZvcm1BY3Rpb24iID09PSB2YWx1ZSA/IChleHRyYUF0dHJpYnV0ZXMuZGVsZXRlKCJuYW1lIiksIGV4dHJhQXR0cmlidXRlcy5kZWxldGUoImZvcm1lbmN0eXBlIiksIGV4dHJhQXR0cmlidXRlcy5kZWxldGUoImZvcm1tZXRob2QiKSwgZXh0cmFBdHRyaWJ1dGVzLmRlbGV0ZSgiZm9ybXRhcmdldCIpKSA6IChleHRyYUF0dHJpYnV0ZXMuZGVsZXRlKCJlbmN0eXBlIiksIGV4dHJhQXR0cmlidXRlcy5kZWxldGUoIm1ldGhvZCIpLCBleHRyYUF0dHJpYnV0ZXMuZGVsZXRlKCJ0YXJnZXQiKSk7CiAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZXMgPT09IEVYUEVDVEVEX0ZPUk1fQUNUSU9OX1VSTCkgewogICAgICAgICAgICAgICAgICAgICAgZXh0cmFBdHRyaWJ1dGVzLmRlbGV0ZSh2YWx1ZS50b0xvd2VyQ2FzZSgpKTsKICAgICAgICAgICAgICAgICAgICAgIHdhcm5Gb3JQcm9wRGlmZmVyZW5jZSgKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICJmdW5jdGlvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BLZXksCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckRpZmZlcmVuY2VzCiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGh5ZHJhdGVTYW5pdGl6ZWRBdHRyaWJ1dGUoCiAgICAgICAgICAgICAgICAgICAgICBkb21FbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS50b0xvd2VyQ2FzZSgpLAogICAgICAgICAgICAgICAgICAgICAgcHJvcEtleSwKICAgICAgICAgICAgICAgICAgICAgIGV4dHJhQXR0cmlidXRlcywKICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckRpZmZlcmVuY2VzCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgY2FzZSAieGxpbmtIcmVmIjoKICAgICAgICAgICAgICAgICAgICBoeWRyYXRlU2FuaXRpemVkQXR0cmlidXRlKAogICAgICAgICAgICAgICAgICAgICAgZG9tRWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgInhsaW5rOmhyZWYiLAogICAgICAgICAgICAgICAgICAgICAgcHJvcEtleSwKICAgICAgICAgICAgICAgICAgICAgIGV4dHJhQXR0cmlidXRlcywKICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckRpZmZlcmVuY2VzCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgY2FzZSAiY29udGVudEVkaXRhYmxlIjoKICAgICAgICAgICAgICAgICAgICBoeWRyYXRlQm9vbGVhbmlzaEF0dHJpYnV0ZSgKICAgICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICJjb250ZW50ZWRpdGFibGUiLAogICAgICAgICAgICAgICAgICAgICAgcHJvcEtleSwKICAgICAgICAgICAgICAgICAgICAgIGV4dHJhQXR0cmlidXRlcywKICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckRpZmZlcmVuY2VzCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgY2FzZSAic3BlbGxDaGVjayI6CiAgICAgICAgICAgICAgICAgICAgaHlkcmF0ZUJvb2xlYW5pc2hBdHRyaWJ1dGUoCiAgICAgICAgICAgICAgICAgICAgICBkb21FbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAic3BlbGxjaGVjayIsCiAgICAgICAgICAgICAgICAgICAgICBwcm9wS2V5LAogICAgICAgICAgICAgICAgICAgICAgZXh0cmFBdHRyaWJ1dGVzLAogICAgICAgICAgICAgICAgICAgICAgc2VydmVyRGlmZmVyZW5jZXMKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICBjYXNlICJkcmFnZ2FibGUiOgogICAgICAgICAgICAgICAgICBjYXNlICJhdXRvUmV2ZXJzZSI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWQiOgogICAgICAgICAgICAgICAgICBjYXNlICJmb2N1c2FibGUiOgogICAgICAgICAgICAgICAgICBjYXNlICJwcmVzZXJ2ZUFscGhhIjoKICAgICAgICAgICAgICAgICAgICBoeWRyYXRlQm9vbGVhbmlzaEF0dHJpYnV0ZSgKICAgICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgcHJvcEtleSwKICAgICAgICAgICAgICAgICAgICAgIGV4dHJhQXR0cmlidXRlcywKICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckRpZmZlcmVuY2VzCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgY2FzZSAiYWxsb3dGdWxsU2NyZWVuIjoKICAgICAgICAgICAgICAgICAgY2FzZSAiYXN5bmMiOgogICAgICAgICAgICAgICAgICBjYXNlICJhdXRvUGxheSI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImNvbnRyb2xzIjoKICAgICAgICAgICAgICAgICAgY2FzZSAiZGVmYXVsdCI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImRlZmVyIjoKICAgICAgICAgICAgICAgICAgY2FzZSAiZGlzYWJsZWQiOgogICAgICAgICAgICAgICAgICBjYXNlICJkaXNhYmxlUGljdHVyZUluUGljdHVyZSI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImRpc2FibGVSZW1vdGVQbGF5YmFjayI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImZvcm1Ob1ZhbGlkYXRlIjoKICAgICAgICAgICAgICAgICAgY2FzZSAiaGlkZGVuIjoKICAgICAgICAgICAgICAgICAgY2FzZSAibG9vcCI6CiAgICAgICAgICAgICAgICAgIGNhc2UgIm5vTW9kdWxlIjoKICAgICAgICAgICAgICAgICAgY2FzZSAibm9WYWxpZGF0ZSI6CiAgICAgICAgICAgICAgICAgIGNhc2UgIm9wZW4iOgogICAgICAgICAgICAgICAgICBjYXNlICJwbGF5c0lubGluZSI6CiAgICAgICAgICAgICAgICAgIGNhc2UgInJlYWRPbmx5IjoKICAgICAgICAgICAgICAgICAgY2FzZSAicmVxdWlyZWQiOgogICAgICAgICAgICAgICAgICBjYXNlICJyZXZlcnNlZCI6CiAgICAgICAgICAgICAgICAgIGNhc2UgInNjb3BlZCI6CiAgICAgICAgICAgICAgICAgIGNhc2UgInNlYW1sZXNzIjoKICAgICAgICAgICAgICAgICAgY2FzZSAiaXRlbVNjb3BlIjoKICAgICAgICAgICAgICAgICAgICBoeWRyYXRlQm9vbGVhbkF0dHJpYnV0ZSgKICAgICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnRvTG93ZXJDYXNlKCksCiAgICAgICAgICAgICAgICAgICAgICBwcm9wS2V5LAogICAgICAgICAgICAgICAgICAgICAgZXh0cmFBdHRyaWJ1dGVzLAogICAgICAgICAgICAgICAgICAgICAgc2VydmVyRGlmZmVyZW5jZXMKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICBjYXNlICJjYXB0dXJlIjoKICAgICAgICAgICAgICAgICAgY2FzZSAiZG93bmxvYWQiOgogICAgICAgICAgICAgICAgICAgIGE6IHsKICAgICAgICAgICAgICAgICAgICAgIGkgPSBkb21FbGVtZW50OwogICAgICAgICAgICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZU5hbWUgPSBhdHRyaWJ1dGVzID0gdmFsdWUsIHNlcnZlckRpZmZlcmVuY2VzJGpzY29tcCQwID0gc2VydmVyRGlmZmVyZW5jZXM7CiAgICAgICAgICAgICAgICAgICAgICBleHRyYUF0dHJpYnV0ZXMuZGVsZXRlKGF0dHJpYnV0ZU5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgaSA9IGkuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGkpCiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZW9mIHByb3BLZXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJ1bmRlZmluZWQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImZ1bmN0aW9uIjoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJzeW1ib2wiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZhbHNlID09PSBwcm9wS2V5KSBicmVhayBhOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChudWxsICE9IHByb3BLZXkpCiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZW9mIHByb3BLZXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJmdW5jdGlvbiI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAic3ltYm9sIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImJvb2xlYW4iOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRydWUgPT09IHByb3BLZXkgJiYgIiIgPT09IGkpIGJyZWFrIGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrQXR0cmlidXRlU3RyaW5nQ29lcmNpb24ocHJvcEtleSwgYXR0cmlidXRlcyksIGkgPT09ICIiICsgcHJvcEtleSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgd2FybkZvclByb3BEaWZmZXJlbmNlKAogICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzLAogICAgICAgICAgICAgICAgICAgICAgICBpLAogICAgICAgICAgICAgICAgICAgICAgICBwcm9wS2V5LAogICAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJEaWZmZXJlbmNlcyRqc2NvbXAkMAogICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgIGNhc2UgImNvbHMiOgogICAgICAgICAgICAgICAgICBjYXNlICJyb3dzIjoKICAgICAgICAgICAgICAgICAgY2FzZSAic2l6ZSI6CiAgICAgICAgICAgICAgICAgIGNhc2UgInNwYW4iOgogICAgICAgICAgICAgICAgICAgIGE6IHsKICAgICAgICAgICAgICAgICAgICAgIGkgPSBkb21FbGVtZW50OwogICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlTmFtZSA9IGF0dHJpYnV0ZXMgPSB2YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckRpZmZlcmVuY2VzJGpzY29tcCQwID0gc2VydmVyRGlmZmVyZW5jZXM7CiAgICAgICAgICAgICAgICAgICAgICBleHRyYUF0dHJpYnV0ZXMuZGVsZXRlKGF0dHJpYnV0ZU5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgaSA9IGkuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGkpCiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZW9mIHByb3BLZXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJ1bmRlZmluZWQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImZ1bmN0aW9uIjoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJzeW1ib2wiOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImJvb2xlYW4iOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmFOKHByb3BLZXkpIHx8IDEgPiBwcm9wS2V5KSBicmVhayBhOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChudWxsICE9IHByb3BLZXkpCiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZW9mIHByb3BLZXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJmdW5jdGlvbiI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAic3ltYm9sIjoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJib29sZWFuIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShpc05hTihwcm9wS2V5KSB8fCAxID4gcHJvcEtleSkgJiYgKGNoZWNrQXR0cmlidXRlU3RyaW5nQ29lcmNpb24ocHJvcEtleSwgYXR0cmlidXRlcyksIGkgPT09ICIiICsgcHJvcEtleSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGE7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIHdhcm5Gb3JQcm9wRGlmZmVyZW5jZSgKICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcywKICAgICAgICAgICAgICAgICAgICAgICAgaSwKICAgICAgICAgICAgICAgICAgICAgICAgcHJvcEtleSwKICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyRGlmZmVyZW5jZXMkanNjb21wJDAKICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICBjYXNlICJyb3dTcGFuIjoKICAgICAgICAgICAgICAgICAgICBoeWRyYXRlTnVtZXJpY0F0dHJpYnV0ZSgKICAgICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICJyb3dzcGFuIiwKICAgICAgICAgICAgICAgICAgICAgIHByb3BLZXksCiAgICAgICAgICAgICAgICAgICAgICBleHRyYUF0dHJpYnV0ZXMsCiAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJEaWZmZXJlbmNlcwogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgIGNhc2UgInN0YXJ0IjoKICAgICAgICAgICAgICAgICAgICBoeWRyYXRlTnVtZXJpY0F0dHJpYnV0ZSgKICAgICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgcHJvcEtleSwKICAgICAgICAgICAgICAgICAgICAgIGV4dHJhQXR0cmlidXRlcywKICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckRpZmZlcmVuY2VzCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgY2FzZSAieEhlaWdodCI6CiAgICAgICAgICAgICAgICAgICAgaHlkcmF0ZUF0dHJpYnV0ZSgKICAgICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICJ4LWhlaWdodCIsCiAgICAgICAgICAgICAgICAgICAgICBwcm9wS2V5LAogICAgICAgICAgICAgICAgICAgICAgZXh0cmFBdHRyaWJ1dGVzLAogICAgICAgICAgICAgICAgICAgICAgc2VydmVyRGlmZmVyZW5jZXMKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICBjYXNlICJ4bGlua0FjdHVhdGUiOgogICAgICAgICAgICAgICAgICAgIGh5ZHJhdGVBdHRyaWJ1dGUoCiAgICAgICAgICAgICAgICAgICAgICBkb21FbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAieGxpbms6YWN0dWF0ZSIsCiAgICAgICAgICAgICAgICAgICAgICBwcm9wS2V5LAogICAgICAgICAgICAgICAgICAgICAgZXh0cmFBdHRyaWJ1dGVzLAogICAgICAgICAgICAgICAgICAgICAgc2VydmVyRGlmZmVyZW5jZXMKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICBjYXNlICJ4bGlua0FyY3JvbGUiOgogICAgICAgICAgICAgICAgICAgIGh5ZHJhdGVBdHRyaWJ1dGUoCiAgICAgICAgICAgICAgICAgICAgICBkb21FbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAieGxpbms6YXJjcm9sZSIsCiAgICAgICAgICAgICAgICAgICAgICBwcm9wS2V5LAogICAgICAgICAgICAgICAgICAgICAgZXh0cmFBdHRyaWJ1dGVzLAogICAgICAgICAgICAgICAgICAgICAgc2VydmVyRGlmZmVyZW5jZXMKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICBjYXNlICJ4bGlua1JvbGUiOgogICAgICAgICAgICAgICAgICAgIGh5ZHJhdGVBdHRyaWJ1dGUoCiAgICAgICAgICAgICAgICAgICAgICBkb21FbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAieGxpbms6cm9sZSIsCiAgICAgICAgICAgICAgICAgICAgICBwcm9wS2V5LAogICAgICAgICAgICAgICAgICAgICAgZXh0cmFBdHRyaWJ1dGVzLAogICAgICAgICAgICAgICAgICAgICAgc2VydmVyRGlmZmVyZW5jZXMKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICBjYXNlICJ4bGlua1Nob3ciOgogICAgICAgICAgICAgICAgICAgIGh5ZHJhdGVBdHRyaWJ1dGUoCiAgICAgICAgICAgICAgICAgICAgICBkb21FbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAieGxpbms6c2hvdyIsCiAgICAgICAgICAgICAgICAgICAgICBwcm9wS2V5LAogICAgICAgICAgICAgICAgICAgICAgZXh0cmFBdHRyaWJ1dGVzLAogICAgICAgICAgICAgICAgICAgICAgc2VydmVyRGlmZmVyZW5jZXMKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICBjYXNlICJ4bGlua1RpdGxlIjoKICAgICAgICAgICAgICAgICAgICBoeWRyYXRlQXR0cmlidXRlKAogICAgICAgICAgICAgICAgICAgICAgZG9tRWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgInhsaW5rOnRpdGxlIiwKICAgICAgICAgICAgICAgICAgICAgIHByb3BLZXksCiAgICAgICAgICAgICAgICAgICAgICBleHRyYUF0dHJpYnV0ZXMsCiAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJEaWZmZXJlbmNlcwogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgIGNhc2UgInhsaW5rVHlwZSI6CiAgICAgICAgICAgICAgICAgICAgaHlkcmF0ZUF0dHJpYnV0ZSgKICAgICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICJ4bGluazp0eXBlIiwKICAgICAgICAgICAgICAgICAgICAgIHByb3BLZXksCiAgICAgICAgICAgICAgICAgICAgICBleHRyYUF0dHJpYnV0ZXMsCiAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJEaWZmZXJlbmNlcwogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgIGNhc2UgInhtbEJhc2UiOgogICAgICAgICAgICAgICAgICAgIGh5ZHJhdGVBdHRyaWJ1dGUoCiAgICAgICAgICAgICAgICAgICAgICBkb21FbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAieG1sOmJhc2UiLAogICAgICAgICAgICAgICAgICAgICAgcHJvcEtleSwKICAgICAgICAgICAgICAgICAgICAgIGV4dHJhQXR0cmlidXRlcywKICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckRpZmZlcmVuY2VzCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgY2FzZSAieG1sTGFuZyI6CiAgICAgICAgICAgICAgICAgICAgaHlkcmF0ZUF0dHJpYnV0ZSgKICAgICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICJ4bWw6bGFuZyIsCiAgICAgICAgICAgICAgICAgICAgICBwcm9wS2V5LAogICAgICAgICAgICAgICAgICAgICAgZXh0cmFBdHRyaWJ1dGVzLAogICAgICAgICAgICAgICAgICAgICAgc2VydmVyRGlmZmVyZW5jZXMKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICBjYXNlICJ4bWxTcGFjZSI6CiAgICAgICAgICAgICAgICAgICAgaHlkcmF0ZUF0dHJpYnV0ZSgKICAgICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICJ4bWw6c3BhY2UiLAogICAgICAgICAgICAgICAgICAgICAgcHJvcEtleSwKICAgICAgICAgICAgICAgICAgICAgIGV4dHJhQXR0cmlidXRlcywKICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckRpZmZlcmVuY2VzCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgY2FzZSAiaW5lcnQiOgogICAgICAgICAgICAgICAgICAgICIiICE9PSBwcm9wS2V5IHx8IGRpZFdhcm5Gb3JOZXdCb29sZWFuUHJvcHNXaXRoRW1wdHlWYWx1ZVt2YWx1ZV0gfHwgKGRpZFdhcm5Gb3JOZXdCb29sZWFuUHJvcHNXaXRoRW1wdHlWYWx1ZVt2YWx1ZV0gPSB0cnVlLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICAgICAgICAgIlJlY2VpdmVkIGFuIGVtcHR5IHN0cmluZyBmb3IgYSBib29sZWFuIGF0dHJpYnV0ZSBgJXNgLiBUaGlzIHdpbGwgdHJlYXQgdGhlIGF0dHJpYnV0ZSBhcyBpZiBpdCB3ZXJlIGZhbHNlLiBFaXRoZXIgcGFzcyBgZmFsc2VgIHRvIHNpbGVuY2UgdGhpcyB3YXJuaW5nLCBvciBwYXNzIGB0cnVlYCBpZiB5b3UgdXNlZCBhbiBlbXB0eSBzdHJpbmcgaW4gZWFybGllciB2ZXJzaW9ucyBvZiBSZWFjdCB0byBpbmRpY2F0ZSB0aGlzIGF0dHJpYnV0ZSBpcyB0cnVlLiIsCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZQogICAgICAgICAgICAgICAgICAgICkpOwogICAgICAgICAgICAgICAgICAgIGh5ZHJhdGVCb29sZWFuQXR0cmlidXRlKAogICAgICAgICAgICAgICAgICAgICAgZG9tRWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICBwcm9wS2V5LAogICAgICAgICAgICAgICAgICAgICAgZXh0cmFBdHRyaWJ1dGVzLAogICAgICAgICAgICAgICAgICAgICAgc2VydmVyRGlmZmVyZW5jZXMKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIGlmICghKDIgPCB2YWx1ZS5sZW5ndGgpIHx8ICJvIiAhPT0gdmFsdWVbMF0gJiYgIk8iICE9PSB2YWx1ZVswXSB8fCAibiIgIT09IHZhbHVlWzFdICYmICJOIiAhPT0gdmFsdWVbMV0pIHsKICAgICAgICAgICAgICAgICAgICAgIGkgPSBnZXRBdHRyaWJ1dGVBbGlhcyh2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICBob3N0Q29udGV4dC5jb250ZXh0ID09PSBIb3N0Q29udGV4dE5hbWVzcGFjZU5vbmUgJiYgInN2ZyIgIT09IHRhZyAmJiAibWF0aCIgIT09IHRhZyA/IGV4dHJhQXR0cmlidXRlcy5kZWxldGUoaS50b0xvd2VyQ2FzZSgpKSA6IChhdHRyaWJ1dGVOYW1lID0gdmFsdWUudG9Mb3dlckNhc2UoKSwgYXR0cmlidXRlTmFtZSA9IHBvc3NpYmxlU3RhbmRhcmROYW1lcy5oYXNPd25Qcm9wZXJ0eSgKICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlTmFtZQogICAgICAgICAgICAgICAgICAgICAgKSA/IHBvc3NpYmxlU3RhbmRhcmROYW1lc1thdHRyaWJ1dGVOYW1lXSB8fCBudWxsIDogbnVsbCwgbnVsbCAhPT0gYXR0cmlidXRlTmFtZSAmJiBhdHRyaWJ1dGVOYW1lICE9PSB2YWx1ZSAmJiAoYXR0cmlidXRlcyA9IHRydWUsIGV4dHJhQXR0cmlidXRlcy5kZWxldGUoYXR0cmlidXRlTmFtZSkpLCBleHRyYUF0dHJpYnV0ZXMuZGVsZXRlKGkpKTsKICAgICAgICAgICAgICAgICAgICAgIGE6IGlmIChhdHRyaWJ1dGVOYW1lID0gZG9tRWxlbWVudCwgc2VydmVyRGlmZmVyZW5jZXMkanNjb21wJDAgPSBpLCBpID0gcHJvcEtleSwgaXNBdHRyaWJ1dGVOYW1lU2FmZShzZXJ2ZXJEaWZmZXJlbmNlcyRqc2NvbXAkMCkpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVOYW1lLmhhc0F0dHJpYnV0ZShzZXJ2ZXJEaWZmZXJlbmNlcyRqc2NvbXAkMCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlTmFtZSA9IGF0dHJpYnV0ZU5hbWUuZ2V0QXR0cmlidXRlKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyRGlmZmVyZW5jZXMkanNjb21wJDAKICAgICAgICAgICAgICAgICAgICAgICAgICApLCBjaGVja0F0dHJpYnV0ZVN0cmluZ0NvZXJjaW9uKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckRpZmZlcmVuY2VzJGpzY29tcCQwCiAgICAgICAgICAgICAgICAgICAgICAgICAgKSwgaSA9IGF0dHJpYnV0ZU5hbWUgPT09ICIiICsgaSA/IGkgOiBhdHRyaWJ1dGVOYW1lOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGVvZiBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJmdW5jdGlvbiI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJzeW1ib2wiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiYm9vbGVhbiI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVOYW1lID0gc2VydmVyRGlmZmVyZW5jZXMkanNjb21wJDAudG9Mb3dlckNhc2UoKS5zbGljZSgwLCA1KSwgImRhdGEtIiAhPT0gYXR0cmlidXRlTmFtZSAmJiAiYXJpYS0iICE9PSBhdHRyaWJ1dGVOYW1lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBlbHNlIGkgPSB2b2lkIDA7CiAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzIHx8IHdhcm5Gb3JQcm9wRGlmZmVyZW5jZSgKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGksCiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BLZXksCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckRpZmZlcmVuY2VzCiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIDAgPCBleHRyYUF0dHJpYnV0ZXMuc2l6ZSAmJiB0cnVlICE9PSBwcm9wcy5zdXBwcmVzc0h5ZHJhdGlvbldhcm5pbmcgJiYgd2FybkZvckV4dHJhQXR0cmlidXRlcyhkb21FbGVtZW50LCBleHRyYUF0dHJpYnV0ZXMsIHNlcnZlckRpZmZlcmVuY2VzKTsKICAgICAgICByZXR1cm4gMCA9PT0gT2JqZWN0LmtleXMoc2VydmVyRGlmZmVyZW5jZXMpLmxlbmd0aCA/IG51bGwgOiBzZXJ2ZXJEaWZmZXJlbmNlczsKICAgICAgfQogICAgICBmdW5jdGlvbiBwcm9wTmFtZXNMaXN0Sm9pbihsaXN0LCBjb21iaW5hdG9yKSB7CiAgICAgICAgc3dpdGNoIChsaXN0Lmxlbmd0aCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICByZXR1cm4gIiI7CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIHJldHVybiBsaXN0WzBdOwogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gbGlzdFswXSArICIgIiArIGNvbWJpbmF0b3IgKyAiICIgKyBsaXN0WzFdOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcmV0dXJuIGxpc3Quc2xpY2UoMCwgLTEpLmpvaW4oIiwgIikgKyAiLCAiICsgY29tYmluYXRvciArICIgIiArIGxpc3RbbGlzdC5sZW5ndGggLSAxXTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0T3duZXJEb2N1bWVudEZyb21Sb290Q29udGFpbmVyKHJvb3RDb250YWluZXJFbGVtZW50KSB7CiAgICAgICAgcmV0dXJuIDkgPT09IHJvb3RDb250YWluZXJFbGVtZW50Lm5vZGVUeXBlID8gcm9vdENvbnRhaW5lckVsZW1lbnQgOiByb290Q29udGFpbmVyRWxlbWVudC5vd25lckRvY3VtZW50OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldE93bkhvc3RDb250ZXh0KG5hbWVzcGFjZVVSSSkgewogICAgICAgIHN3aXRjaCAobmFtZXNwYWNlVVJJKSB7CiAgICAgICAgICBjYXNlIFNWR19OQU1FU1BBQ0U6CiAgICAgICAgICAgIHJldHVybiBIb3N0Q29udGV4dE5hbWVzcGFjZVN2ZzsKICAgICAgICAgIGNhc2UgTUFUSF9OQU1FU1BBQ0U6CiAgICAgICAgICAgIHJldHVybiBIb3N0Q29udGV4dE5hbWVzcGFjZU1hdGg7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICByZXR1cm4gSG9zdENvbnRleHROYW1lc3BhY2VOb25lOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBnZXRDaGlsZEhvc3RDb250ZXh0UHJvZChwYXJlbnROYW1lc3BhY2UsIHR5cGUpIHsKICAgICAgICBpZiAocGFyZW50TmFtZXNwYWNlID09PSBIb3N0Q29udGV4dE5hbWVzcGFjZU5vbmUpCiAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgY2FzZSAic3ZnIjoKICAgICAgICAgICAgICByZXR1cm4gSG9zdENvbnRleHROYW1lc3BhY2VTdmc7CiAgICAgICAgICAgIGNhc2UgIm1hdGgiOgogICAgICAgICAgICAgIHJldHVybiBIb3N0Q29udGV4dE5hbWVzcGFjZU1hdGg7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgcmV0dXJuIEhvc3RDb250ZXh0TmFtZXNwYWNlTm9uZTsKICAgICAgICAgIH0KICAgICAgICByZXR1cm4gcGFyZW50TmFtZXNwYWNlID09PSBIb3N0Q29udGV4dE5hbWVzcGFjZVN2ZyAmJiAiZm9yZWlnbk9iamVjdCIgPT09IHR5cGUgPyBIb3N0Q29udGV4dE5hbWVzcGFjZU5vbmUgOiBwYXJlbnROYW1lc3BhY2U7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gc2hvdWxkU2V0VGV4dENvbnRlbnQodHlwZSwgcHJvcHMpIHsKICAgICAgICByZXR1cm4gInRleHRhcmVhIiA9PT0gdHlwZSB8fCAibm9zY3JpcHQiID09PSB0eXBlIHx8ICJzdHJpbmciID09PSB0eXBlb2YgcHJvcHMuY2hpbGRyZW4gfHwgIm51bWJlciIgPT09IHR5cGVvZiBwcm9wcy5jaGlsZHJlbiB8fCAiYmlnaW50IiA9PT0gdHlwZW9mIHByb3BzLmNoaWxkcmVuIHx8ICJvYmplY3QiID09PSB0eXBlb2YgcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgJiYgbnVsbCAhPT0gcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgJiYgbnVsbCAhPSBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTC5fX2h0bWw7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gc2hvdWxkQXR0ZW1wdEVhZ2VyVHJhbnNpdGlvbigpIHsKICAgICAgICB2YXIgZXZlbnQgPSB3aW5kb3cuZXZlbnQ7CiAgICAgICAgaWYgKGV2ZW50ICYmICJwb3BzdGF0ZSIgPT09IGV2ZW50LnR5cGUpIHsKICAgICAgICAgIGlmIChldmVudCA9PT0gY3VycmVudFBvcHN0YXRlVHJhbnNpdGlvbkV2ZW50KSByZXR1cm4gZmFsc2U7CiAgICAgICAgICBjdXJyZW50UG9wc3RhdGVUcmFuc2l0aW9uRXZlbnQgPSBldmVudDsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBjdXJyZW50UG9wc3RhdGVUcmFuc2l0aW9uRXZlbnQgPSBudWxsOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBoYW5kbGVFcnJvckluTmV4dFRpY2soZXJyb3IpIHsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY29tbWl0TW91bnQoZG9tRWxlbWVudCwgdHlwZSwgbmV3UHJvcHMpIHsKICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgIGNhc2UgImJ1dHRvbiI6CiAgICAgICAgICBjYXNlICJpbnB1dCI6CiAgICAgICAgICBjYXNlICJzZWxlY3QiOgogICAgICAgICAgY2FzZSAidGV4dGFyZWEiOgogICAgICAgICAgICBuZXdQcm9wcy5hdXRvRm9jdXMgJiYgZG9tRWxlbWVudC5mb2N1cygpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImltZyI6CiAgICAgICAgICAgIG5ld1Byb3BzLnNyYyA/IGRvbUVsZW1lbnQuc3JjID0gbmV3UHJvcHMuc3JjIDogbmV3UHJvcHMuc3JjU2V0ICYmIChkb21FbGVtZW50LnNyY3NldCA9IG5ld1Byb3BzLnNyY1NldCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNvbW1pdFVwZGF0ZShkb21FbGVtZW50LCB0eXBlLCBvbGRQcm9wcywgbmV3UHJvcHMpIHsKICAgICAgICB1cGRhdGVQcm9wZXJ0aWVzKGRvbUVsZW1lbnQsIHR5cGUsIG9sZFByb3BzLCBuZXdQcm9wcyk7CiAgICAgICAgZG9tRWxlbWVudFtpbnRlcm5hbFByb3BzS2V5XSA9IG5ld1Byb3BzOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlc2V0VGV4dENvbnRlbnQoZG9tRWxlbWVudCkgewogICAgICAgIHNldFRleHRDb250ZW50KGRvbUVsZW1lbnQsICIiKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjb21taXRUZXh0VXBkYXRlKHRleHRJbnN0YW5jZSwgb2xkVGV4dCwgbmV3VGV4dCkgewogICAgICAgIHRleHRJbnN0YW5jZS5ub2RlVmFsdWUgPSBuZXdUZXh0OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGlzU2luZ2xldG9uU2NvcGUodHlwZSkgewogICAgICAgIHJldHVybiAiaGVhZCIgPT09IHR5cGU7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmVtb3ZlQ2hpbGQocGFyZW50SW5zdGFuY2UsIGNoaWxkKSB7CiAgICAgICAgcGFyZW50SW5zdGFuY2UucmVtb3ZlQ2hpbGQoY2hpbGQpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlbW92ZUNoaWxkRnJvbUNvbnRhaW5lcihjb250YWluZXIsIGNoaWxkKSB7CiAgICAgICAgKDkgPT09IGNvbnRhaW5lci5ub2RlVHlwZSA/IGNvbnRhaW5lci5ib2R5IDogIkhUTUwiID09PSBjb250YWluZXIubm9kZU5hbWUgPyBjb250YWluZXIub3duZXJEb2N1bWVudC5ib2R5IDogY29udGFpbmVyKS5yZW1vdmVDaGlsZChjaGlsZCk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY2xlYXJTdXNwZW5zZUJvdW5kYXJ5KHBhcmVudEluc3RhbmNlLCBzdXNwZW5zZUluc3RhbmNlKSB7CiAgICAgICAgdmFyIG5vZGUgPSBzdXNwZW5zZUluc3RhbmNlLCBwb3NzaWJsZVByZWFtYmxlQ29udHJpYnV0aW9uID0gMCwgZGVwdGggPSAwOwogICAgICAgIGRvIHsKICAgICAgICAgIHZhciBuZXh0Tm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7CiAgICAgICAgICBwYXJlbnRJbnN0YW5jZS5yZW1vdmVDaGlsZChub2RlKTsKICAgICAgICAgIGlmIChuZXh0Tm9kZSAmJiA4ID09PSBuZXh0Tm9kZS5ub2RlVHlwZSkKICAgICAgICAgICAgaWYgKG5vZGUgPSBuZXh0Tm9kZS5kYXRhLCBub2RlID09PSBTVVNQRU5TRV9FTkRfREFUQSkgewogICAgICAgICAgICAgIGlmICgwIDwgcG9zc2libGVQcmVhbWJsZUNvbnRyaWJ1dGlvbiAmJiA4ID4gcG9zc2libGVQcmVhbWJsZUNvbnRyaWJ1dGlvbikgewogICAgICAgICAgICAgICAgbm9kZSA9IHBvc3NpYmxlUHJlYW1ibGVDb250cmlidXRpb247CiAgICAgICAgICAgICAgICB2YXIgb3duZXJEb2N1bWVudCA9IHBhcmVudEluc3RhbmNlLm93bmVyRG9jdW1lbnQ7CiAgICAgICAgICAgICAgICBub2RlICYgUFJFQU1CTEVfQ09OVFJJQlVUSU9OX0hUTUwgJiYgcmVsZWFzZVNpbmdsZXRvbkluc3RhbmNlKG93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTsKICAgICAgICAgICAgICAgIG5vZGUgJiBQUkVBTUJMRV9DT05UUklCVVRJT05fQk9EWSAmJiByZWxlYXNlU2luZ2xldG9uSW5zdGFuY2Uob3duZXJEb2N1bWVudC5ib2R5KTsKICAgICAgICAgICAgICAgIGlmIChub2RlICYgUFJFQU1CTEVfQ09OVFJJQlVUSU9OX0hFQUQpCiAgICAgICAgICAgICAgICAgIGZvciAobm9kZSA9IG93bmVyRG9jdW1lbnQuaGVhZCwgcmVsZWFzZVNpbmdsZXRvbkluc3RhbmNlKG5vZGUpLCBvd25lckRvY3VtZW50ID0gbm9kZS5maXJzdENoaWxkOyBvd25lckRvY3VtZW50OyApIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dE5vZGUkanNjb21wJDAgPSBvd25lckRvY3VtZW50Lm5leHRTaWJsaW5nLCBub2RlTmFtZSA9IG93bmVyRG9jdW1lbnQubm9kZU5hbWU7CiAgICAgICAgICAgICAgICAgICAgb3duZXJEb2N1bWVudFtpbnRlcm5hbEhvaXN0YWJsZU1hcmtlcl0gfHwgIlNDUklQVCIgPT09IG5vZGVOYW1lIHx8ICJTVFlMRSIgPT09IG5vZGVOYW1lIHx8ICJMSU5LIiA9PT0gbm9kZU5hbWUgJiYgInN0eWxlc2hlZXQiID09PSBvd25lckRvY3VtZW50LnJlbC50b0xvd2VyQ2FzZSgpIHx8IG5vZGUucmVtb3ZlQ2hpbGQob3duZXJEb2N1bWVudCk7CiAgICAgICAgICAgICAgICAgICAgb3duZXJEb2N1bWVudCA9IG5leHROb2RlJGpzY29tcCQwOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICgwID09PSBkZXB0aCkgewogICAgICAgICAgICAgICAgcGFyZW50SW5zdGFuY2UucmVtb3ZlQ2hpbGQobmV4dE5vZGUpOwogICAgICAgICAgICAgICAgcmV0cnlJZkJsb2NrZWRPbihzdXNwZW5zZUluc3RhbmNlKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZGVwdGgtLTsKICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgbm9kZSA9PT0gU1VTUEVOU0VfU1RBUlRfREFUQSB8fCBub2RlID09PSBTVVNQRU5TRV9QRU5ESU5HX1NUQVJUX0RBVEEgfHwgbm9kZSA9PT0gU1VTUEVOU0VfRkFMTEJBQ0tfU1RBUlRfREFUQSA/IGRlcHRoKysgOiBwb3NzaWJsZVByZWFtYmxlQ29udHJpYnV0aW9uID0gbm9kZS5jaGFyQ29kZUF0KDApIC0gNDg7CiAgICAgICAgICBlbHNlIHBvc3NpYmxlUHJlYW1ibGVDb250cmlidXRpb24gPSAwOwogICAgICAgICAgbm9kZSA9IG5leHROb2RlOwogICAgICAgIH0gd2hpbGUgKG5vZGUpOwogICAgICAgIHJldHJ5SWZCbG9ja2VkT24oc3VzcGVuc2VJbnN0YW5jZSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gaGlkZUluc3RhbmNlKGluc3RhbmNlKSB7CiAgICAgICAgaW5zdGFuY2UgPSBpbnN0YW5jZS5zdHlsZTsKICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgaW5zdGFuY2Uuc2V0UHJvcGVydHkgPyBpbnN0YW5jZS5zZXRQcm9wZXJ0eSgiZGlzcGxheSIsICJub25lIiwgImltcG9ydGFudCIpIDogaW5zdGFuY2UuZGlzcGxheSA9ICJub25lIjsKICAgICAgfQogICAgICBmdW5jdGlvbiBoaWRlVGV4dEluc3RhbmNlKHRleHRJbnN0YW5jZSkgewogICAgICAgIHRleHRJbnN0YW5jZS5ub2RlVmFsdWUgPSAiIjsKICAgICAgfQogICAgICBmdW5jdGlvbiB1bmhpZGVJbnN0YW5jZShpbnN0YW5jZSwgcHJvcHMpIHsKICAgICAgICBwcm9wcyA9IHByb3BzW1NUWUxFXTsKICAgICAgICBwcm9wcyA9IHZvaWQgMCAhPT0gcHJvcHMgJiYgbnVsbCAhPT0gcHJvcHMgJiYgcHJvcHMuaGFzT3duUHJvcGVydHkoImRpc3BsYXkiKSA/IHByb3BzLmRpc3BsYXkgOiBudWxsOwogICAgICAgIGluc3RhbmNlLnN0eWxlLmRpc3BsYXkgPSBudWxsID09IHByb3BzIHx8ICJib29sZWFuIiA9PT0gdHlwZW9mIHByb3BzID8gIiIgOiAoIiIgKyBwcm9wcykudHJpbSgpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHVuaGlkZVRleHRJbnN0YW5jZSh0ZXh0SW5zdGFuY2UsIHRleHQpIHsKICAgICAgICB0ZXh0SW5zdGFuY2Uubm9kZVZhbHVlID0gdGV4dDsKICAgICAgfQogICAgICBmdW5jdGlvbiBjbGVhckNvbnRhaW5lclNwYXJpbmdseShjb250YWluZXIpIHsKICAgICAgICB2YXIgbmV4dE5vZGUgPSBjb250YWluZXIuZmlyc3RDaGlsZDsKICAgICAgICBuZXh0Tm9kZSAmJiAxMCA9PT0gbmV4dE5vZGUubm9kZVR5cGUgJiYgKG5leHROb2RlID0gbmV4dE5vZGUubmV4dFNpYmxpbmcpOwogICAgICAgIGZvciAoOyBuZXh0Tm9kZTsgKSB7CiAgICAgICAgICB2YXIgbm9kZSA9IG5leHROb2RlOwogICAgICAgICAgbmV4dE5vZGUgPSBuZXh0Tm9kZS5uZXh0U2libGluZzsKICAgICAgICAgIHN3aXRjaCAobm9kZS5ub2RlTmFtZSkgewogICAgICAgICAgICBjYXNlICJIVE1MIjoKICAgICAgICAgICAgY2FzZSAiSEVBRCI6CiAgICAgICAgICAgIGNhc2UgIkJPRFkiOgogICAgICAgICAgICAgIGNsZWFyQ29udGFpbmVyU3BhcmluZ2x5KG5vZGUpOwogICAgICAgICAgICAgIGRldGFjaERlbGV0ZWRJbnN0YW5jZShub2RlKTsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgY2FzZSAiU0NSSVBUIjoKICAgICAgICAgICAgY2FzZSAiU1RZTEUiOgogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICBjYXNlICJMSU5LIjoKICAgICAgICAgICAgICBpZiAoInN0eWxlc2hlZXQiID09PSBub2RlLnJlbC50b0xvd2VyQ2FzZSgpKSBjb250aW51ZTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChub2RlKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY2FuSHlkcmF0ZUluc3RhbmNlKGluc3RhbmNlLCB0eXBlLCBwcm9wcywgaW5Sb290T3JTaW5nbGV0b24pIHsKICAgICAgICBmb3IgKDsgMSA9PT0gaW5zdGFuY2Uubm9kZVR5cGU7ICkgewogICAgICAgICAgdmFyIGFueVByb3BzID0gcHJvcHM7CiAgICAgICAgICBpZiAoaW5zdGFuY2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gdHlwZS50b0xvd2VyQ2FzZSgpKSB7CiAgICAgICAgICAgIGlmICghaW5Sb290T3JTaW5nbGV0b24gJiYgKCJJTlBVVCIgIT09IGluc3RhbmNlLm5vZGVOYW1lIHx8ICJoaWRkZW4iICE9PSBpbnN0YW5jZS50eXBlKSkKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0gZWxzZSBpZiAoIWluUm9vdE9yU2luZ2xldG9uKQogICAgICAgICAgICBpZiAoImlucHV0IiA9PT0gdHlwZSAmJiAiaGlkZGVuIiA9PT0gaW5zdGFuY2UudHlwZSkgewogICAgICAgICAgICAgIGNoZWNrQXR0cmlidXRlU3RyaW5nQ29lcmNpb24oYW55UHJvcHMubmFtZSwgIm5hbWUiKTsKICAgICAgICAgICAgICB2YXIgbmFtZSA9IG51bGwgPT0gYW55UHJvcHMubmFtZSA/IG51bGwgOiAiIiArIGFueVByb3BzLm5hbWU7CiAgICAgICAgICAgICAgaWYgKCJoaWRkZW4iID09PSBhbnlQcm9wcy50eXBlICYmIGluc3RhbmNlLmdldEF0dHJpYnV0ZSgibmFtZSIpID09PSBuYW1lKQogICAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlOwogICAgICAgICAgICB9IGVsc2UgcmV0dXJuIGluc3RhbmNlOwogICAgICAgICAgZWxzZSBpZiAoIWluc3RhbmNlW2ludGVybmFsSG9pc3RhYmxlTWFya2VyXSkKICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICAgICAgY2FzZSAibWV0YSI6CiAgICAgICAgICAgICAgICBpZiAoIWluc3RhbmNlLmhhc0F0dHJpYnV0ZSgiaXRlbXByb3AiKSkgYnJlYWs7CiAgICAgICAgICAgICAgICByZXR1cm4gaW5zdGFuY2U7CiAgICAgICAgICAgICAgY2FzZSAibGluayI6CiAgICAgICAgICAgICAgICBuYW1lID0gaW5zdGFuY2UuZ2V0QXR0cmlidXRlKCJyZWwiKTsKICAgICAgICAgICAgICAgIGlmICgic3R5bGVzaGVldCIgPT09IG5hbWUgJiYgaW5zdGFuY2UuaGFzQXR0cmlidXRlKCJkYXRhLXByZWNlZGVuY2UiKSkKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBlbHNlIGlmIChuYW1lICE9PSBhbnlQcm9wcy5yZWwgfHwgaW5zdGFuY2UuZ2V0QXR0cmlidXRlKCJocmVmIikgIT09IChudWxsID09IGFueVByb3BzLmhyZWYgfHwgIiIgPT09IGFueVByb3BzLmhyZWYgPyBudWxsIDogYW55UHJvcHMuaHJlZikgfHwgaW5zdGFuY2UuZ2V0QXR0cmlidXRlKCJjcm9zc29yaWdpbiIpICE9PSAobnVsbCA9PSBhbnlQcm9wcy5jcm9zc09yaWdpbiA/IG51bGwgOiBhbnlQcm9wcy5jcm9zc09yaWdpbikgfHwgaW5zdGFuY2UuZ2V0QXR0cmlidXRlKCJ0aXRsZSIpICE9PSAobnVsbCA9PSBhbnlQcm9wcy50aXRsZSA/IG51bGwgOiBhbnlQcm9wcy50aXRsZSkpCiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlOwogICAgICAgICAgICAgIGNhc2UgInN0eWxlIjoKICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZS5oYXNBdHRyaWJ1dGUoImRhdGEtcHJlY2VkZW5jZSIpKSBicmVhazsKICAgICAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZTsKICAgICAgICAgICAgICBjYXNlICJzY3JpcHQiOgogICAgICAgICAgICAgICAgbmFtZSA9IGluc3RhbmNlLmdldEF0dHJpYnV0ZSgic3JjIik7CiAgICAgICAgICAgICAgICBpZiAoKG5hbWUgIT09IChudWxsID09IGFueVByb3BzLnNyYyA/IG51bGwgOiBhbnlQcm9wcy5zcmMpIHx8IGluc3RhbmNlLmdldEF0dHJpYnV0ZSgidHlwZSIpICE9PSAobnVsbCA9PSBhbnlQcm9wcy50eXBlID8gbnVsbCA6IGFueVByb3BzLnR5cGUpIHx8IGluc3RhbmNlLmdldEF0dHJpYnV0ZSgiY3Jvc3NvcmlnaW4iKSAhPT0gKG51bGwgPT0gYW55UHJvcHMuY3Jvc3NPcmlnaW4gPyBudWxsIDogYW55UHJvcHMuY3Jvc3NPcmlnaW4pKSAmJiBuYW1lICYmIGluc3RhbmNlLmhhc0F0dHJpYnV0ZSgiYXN5bmMiKSAmJiAhaW5zdGFuY2UuaGFzQXR0cmlidXRlKCJpdGVtcHJvcCIpKQogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZTsKICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlOwogICAgICAgICAgICB9CiAgICAgICAgICBpbnN0YW5jZSA9IGdldE5leHRIeWRyYXRhYmxlKGluc3RhbmNlLm5leHRTaWJsaW5nKTsKICAgICAgICAgIGlmIChudWxsID09PSBpbnN0YW5jZSkgYnJlYWs7CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNhbkh5ZHJhdGVUZXh0SW5zdGFuY2UoaW5zdGFuY2UsIHRleHQsIGluUm9vdE9yU2luZ2xldG9uKSB7CiAgICAgICAgaWYgKCIiID09PSB0ZXh0KSByZXR1cm4gbnVsbDsKICAgICAgICBmb3IgKDsgMyAhPT0gaW5zdGFuY2Uubm9kZVR5cGU7ICkgewogICAgICAgICAgaWYgKCgxICE9PSBpbnN0YW5jZS5ub2RlVHlwZSB8fCAiSU5QVVQiICE9PSBpbnN0YW5jZS5ub2RlTmFtZSB8fCAiaGlkZGVuIiAhPT0gaW5zdGFuY2UudHlwZSkgJiYgIWluUm9vdE9yU2luZ2xldG9uKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIGluc3RhbmNlID0gZ2V0TmV4dEh5ZHJhdGFibGUoaW5zdGFuY2UubmV4dFNpYmxpbmcpOwogICAgICAgICAgaWYgKG51bGwgPT09IGluc3RhbmNlKSByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGluc3RhbmNlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGlzU3VzcGVuc2VJbnN0YW5jZUZhbGxiYWNrKGluc3RhbmNlKSB7CiAgICAgICAgcmV0dXJuIGluc3RhbmNlLmRhdGEgPT09IFNVU1BFTlNFX0ZBTExCQUNLX1NUQVJUX0RBVEEgfHwgaW5zdGFuY2UuZGF0YSA9PT0gU1VTUEVOU0VfUEVORElOR19TVEFSVF9EQVRBICYmIGluc3RhbmNlLm93bmVyRG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gRE9DVU1FTlRfUkVBRFlfU1RBVEVfQ09NUExFVEU7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmVnaXN0ZXJTdXNwZW5zZUluc3RhbmNlUmV0cnkoaW5zdGFuY2UsIGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIG93bmVyRG9jdW1lbnQgPSBpbnN0YW5jZS5vd25lckRvY3VtZW50OwogICAgICAgIGlmIChpbnN0YW5jZS5kYXRhICE9PSBTVVNQRU5TRV9QRU5ESU5HX1NUQVJUX0RBVEEgfHwgb3duZXJEb2N1bWVudC5yZWFkeVN0YXRlID09PSBET0NVTUVOVF9SRUFEWV9TVEFURV9DT01QTEVURSkKICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgZWxzZSB7CiAgICAgICAgICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgICAgb3duZXJEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIiwgbGlzdGVuZXIpOwogICAgICAgICAgfTsKICAgICAgICAgIG93bmVyRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIGxpc3RlbmVyKTsKICAgICAgICAgIGluc3RhbmNlLl9yZWFjdFJldHJ5ID0gbGlzdGVuZXI7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldE5leHRIeWRyYXRhYmxlKG5vZGUpIHsKICAgICAgICBmb3IgKDsgbnVsbCAhPSBub2RlOyBub2RlID0gbm9kZS5uZXh0U2libGluZykgewogICAgICAgICAgdmFyIG5vZGVUeXBlID0gbm9kZS5ub2RlVHlwZTsKICAgICAgICAgIGlmICgxID09PSBub2RlVHlwZSB8fCAzID09PSBub2RlVHlwZSkgYnJlYWs7CiAgICAgICAgICBpZiAoOCA9PT0gbm9kZVR5cGUpIHsKICAgICAgICAgICAgbm9kZVR5cGUgPSBub2RlLmRhdGE7CiAgICAgICAgICAgIGlmIChub2RlVHlwZSA9PT0gU1VTUEVOU0VfU1RBUlRfREFUQSB8fCBub2RlVHlwZSA9PT0gU1VTUEVOU0VfRkFMTEJBQ0tfU1RBUlRfREFUQSB8fCBub2RlVHlwZSA9PT0gU1VTUEVOU0VfUEVORElOR19TVEFSVF9EQVRBIHx8IG5vZGVUeXBlID09PSBGT1JNX1NUQVRFX0lTX01BVENISU5HIHx8IG5vZGVUeXBlID09PSBGT1JNX1NUQVRFX0lTX05PVF9NQVRDSElORykKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgaWYgKG5vZGVUeXBlID09PSBTVVNQRU5TRV9FTkRfREFUQSkgcmV0dXJuIG51bGw7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBub2RlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGRlc2NyaWJlSHlkcmF0YWJsZUluc3RhbmNlRm9yRGV2V2FybmluZ3MoaW5zdGFuY2UpIHsKICAgICAgICBpZiAoMSA9PT0gaW5zdGFuY2Uubm9kZVR5cGUpIHsKICAgICAgICAgIGZvciAodmFyIEpTQ29tcGlsZXJfdGVtcF9jb25zdCA9IGluc3RhbmNlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksIHNlcnZlckRpZmZlcmVuY2VzID0ge30sIGF0dHJpYnV0ZXMgPSBpbnN0YW5jZS5hdHRyaWJ1dGVzLCBpID0gMDsgaSA8IGF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIGF0dHIgPSBhdHRyaWJ1dGVzW2ldOwogICAgICAgICAgICBzZXJ2ZXJEaWZmZXJlbmNlc1tnZXRQcm9wTmFtZUZyb21BdHRyaWJ1dGVOYW1lKGF0dHIubmFtZSldID0gInN0eWxlIiA9PT0gYXR0ci5uYW1lLnRvTG93ZXJDYXNlKCkgPyBnZXRTdHlsZXNPYmplY3RGcm9tRWxlbWVudChpbnN0YW5jZSkgOiBhdHRyLnZhbHVlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHsgdHlwZTogSlNDb21waWxlcl90ZW1wX2NvbnN0LCBwcm9wczogc2VydmVyRGlmZmVyZW5jZXMgfTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIDggPT09IGluc3RhbmNlLm5vZGVUeXBlID8geyB0eXBlOiAiU3VzcGVuc2UiLCBwcm9wczoge30gfSA6IGluc3RhbmNlLm5vZGVWYWx1ZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBkaWZmSHlkcmF0ZWRUZXh0Rm9yRGV2V2FybmluZ3ModGV4dEluc3RhbmNlLCB0ZXh0LCBwYXJlbnRQcm9wcykgewogICAgICAgIHJldHVybiBudWxsID09PSBwYXJlbnRQcm9wcyB8fCB0cnVlICE9PSBwYXJlbnRQcm9wc1tTVVBQUkVTU19IWURSQVRJT05fV0FSTklOR10gPyAodGV4dEluc3RhbmNlLm5vZGVWYWx1ZSA9PT0gdGV4dCA/IHRleHRJbnN0YW5jZSA9IG51bGwgOiAodGV4dCA9IG5vcm1hbGl6ZU1hcmt1cEZvclRleHRPckF0dHJpYnV0ZSh0ZXh0KSwgdGV4dEluc3RhbmNlID0gbm9ybWFsaXplTWFya3VwRm9yVGV4dE9yQXR0cmlidXRlKHRleHRJbnN0YW5jZS5ub2RlVmFsdWUpID09PSB0ZXh0ID8gbnVsbCA6IHRleHRJbnN0YW5jZS5ub2RlVmFsdWUpLCB0ZXh0SW5zdGFuY2UpIDogbnVsbDsKICAgICAgfQogICAgICBmdW5jdGlvbiBnZXROZXh0SHlkcmF0YWJsZUluc3RhbmNlQWZ0ZXJTdXNwZW5zZUluc3RhbmNlKHN1c3BlbnNlSW5zdGFuY2UpIHsKICAgICAgICBzdXNwZW5zZUluc3RhbmNlID0gc3VzcGVuc2VJbnN0YW5jZS5uZXh0U2libGluZzsKICAgICAgICBmb3IgKHZhciBkZXB0aCA9IDA7IHN1c3BlbnNlSW5zdGFuY2U7ICkgewogICAgICAgICAgaWYgKDggPT09IHN1c3BlbnNlSW5zdGFuY2Uubm9kZVR5cGUpIHsKICAgICAgICAgICAgdmFyIGRhdGEgPSBzdXNwZW5zZUluc3RhbmNlLmRhdGE7CiAgICAgICAgICAgIGlmIChkYXRhID09PSBTVVNQRU5TRV9FTkRfREFUQSkgewogICAgICAgICAgICAgIGlmICgwID09PSBkZXB0aCkKICAgICAgICAgICAgICAgIHJldHVybiBnZXROZXh0SHlkcmF0YWJsZShzdXNwZW5zZUluc3RhbmNlLm5leHRTaWJsaW5nKTsKICAgICAgICAgICAgICBkZXB0aC0tOwogICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICBkYXRhICE9PSBTVVNQRU5TRV9TVEFSVF9EQVRBICYmIGRhdGEgIT09IFNVU1BFTlNFX0ZBTExCQUNLX1NUQVJUX0RBVEEgJiYgZGF0YSAhPT0gU1VTUEVOU0VfUEVORElOR19TVEFSVF9EQVRBIHx8IGRlcHRoKys7CiAgICAgICAgICB9CiAgICAgICAgICBzdXNwZW5zZUluc3RhbmNlID0gc3VzcGVuc2VJbnN0YW5jZS5uZXh0U2libGluZzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0UGFyZW50U3VzcGVuc2VJbnN0YW5jZSh0YXJnZXRJbnN0YW5jZSkgewogICAgICAgIHRhcmdldEluc3RhbmNlID0gdGFyZ2V0SW5zdGFuY2UucHJldmlvdXNTaWJsaW5nOwogICAgICAgIGZvciAodmFyIGRlcHRoID0gMDsgdGFyZ2V0SW5zdGFuY2U7ICkgewogICAgICAgICAgaWYgKDggPT09IHRhcmdldEluc3RhbmNlLm5vZGVUeXBlKSB7CiAgICAgICAgICAgIHZhciBkYXRhID0gdGFyZ2V0SW5zdGFuY2UuZGF0YTsKICAgICAgICAgICAgaWYgKGRhdGEgPT09IFNVU1BFTlNFX1NUQVJUX0RBVEEgfHwgZGF0YSA9PT0gU1VTUEVOU0VfRkFMTEJBQ0tfU1RBUlRfREFUQSB8fCBkYXRhID09PSBTVVNQRU5TRV9QRU5ESU5HX1NUQVJUX0RBVEEpIHsKICAgICAgICAgICAgICBpZiAoMCA9PT0gZGVwdGgpIHJldHVybiB0YXJnZXRJbnN0YW5jZTsKICAgICAgICAgICAgICBkZXB0aC0tOwogICAgICAgICAgICB9IGVsc2UgZGF0YSA9PT0gU1VTUEVOU0VfRU5EX0RBVEEgJiYgZGVwdGgrKzsKICAgICAgICAgIH0KICAgICAgICAgIHRhcmdldEluc3RhbmNlID0gdGFyZ2V0SW5zdGFuY2UucHJldmlvdXNTaWJsaW5nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICBmdW5jdGlvbiBjb21taXRIeWRyYXRlZENvbnRhaW5lcihjb250YWluZXIpIHsKICAgICAgICByZXRyeUlmQmxvY2tlZE9uKGNvbnRhaW5lcik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY29tbWl0SHlkcmF0ZWRTdXNwZW5zZUluc3RhbmNlKHN1c3BlbnNlSW5zdGFuY2UpIHsKICAgICAgICByZXRyeUlmQmxvY2tlZE9uKHN1c3BlbnNlSW5zdGFuY2UpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlc29sdmVTaW5nbGV0b25JbnN0YW5jZSh0eXBlLCBwcm9wcywgcm9vdENvbnRhaW5lckluc3RhbmNlLCBob3N0Q29udGV4dCwgdmFsaWRhdGVET01OZXN0aW5nRGV2KSB7CiAgICAgICAgdmFsaWRhdGVET01OZXN0aW5nRGV2ICYmIHZhbGlkYXRlRE9NTmVzdGluZyh0eXBlLCBob3N0Q29udGV4dC5hbmNlc3RvckluZm8pOwogICAgICAgIHByb3BzID0gZ2V0T3duZXJEb2N1bWVudEZyb21Sb290Q29udGFpbmVyKHJvb3RDb250YWluZXJJbnN0YW5jZSk7CiAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICBjYXNlICJodG1sIjoKICAgICAgICAgICAgdHlwZSA9IHByb3BzLmRvY3VtZW50RWxlbWVudDsKICAgICAgICAgICAgaWYgKCF0eXBlKQogICAgICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAgICAgIlJlYWN0IGV4cGVjdGVkIGFuIDxodG1sPiBlbGVtZW50IChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpIHRvIGV4aXN0IGluIHRoZSBEb2N1bWVudCBidXQgb25lIHdhcyBub3QgZm91bmQuIFJlYWN0IG5ldmVyIHJlbW92ZXMgdGhlIGRvY3VtZW50RWxlbWVudCBmb3IgYW55IERvY3VtZW50IGl0IHJlbmRlcnMgaW50byBzbyB0aGUgY2F1c2UgaXMgbGlrZWx5IGluIHNvbWUgb3RoZXIgc2NyaXB0IHJ1bm5pbmcgb24gdGhpcyBwYWdlLiIKICAgICAgICAgICAgICApOwogICAgICAgICAgICByZXR1cm4gdHlwZTsKICAgICAgICAgIGNhc2UgImhlYWQiOgogICAgICAgICAgICB0eXBlID0gcHJvcHMuaGVhZDsKICAgICAgICAgICAgaWYgKCF0eXBlKQogICAgICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAgICAgIlJlYWN0IGV4cGVjdGVkIGEgPGhlYWQ+IGVsZW1lbnQgKGRvY3VtZW50LmhlYWQpIHRvIGV4aXN0IGluIHRoZSBEb2N1bWVudCBidXQgb25lIHdhcyBub3QgZm91bmQuIFJlYWN0IG5ldmVyIHJlbW92ZXMgdGhlIGhlYWQgZm9yIGFueSBEb2N1bWVudCBpdCByZW5kZXJzIGludG8gc28gdGhlIGNhdXNlIGlzIGxpa2VseSBpbiBzb21lIG90aGVyIHNjcmlwdCBydW5uaW5nIG9uIHRoaXMgcGFnZS4iCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgcmV0dXJuIHR5cGU7CiAgICAgICAgICBjYXNlICJib2R5IjoKICAgICAgICAgICAgdHlwZSA9IHByb3BzLmJvZHk7CiAgICAgICAgICAgIGlmICghdHlwZSkKICAgICAgICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICAgICAgICJSZWFjdCBleHBlY3RlZCBhIDxib2R5PiBlbGVtZW50IChkb2N1bWVudC5ib2R5KSB0byBleGlzdCBpbiB0aGUgRG9jdW1lbnQgYnV0IG9uZSB3YXMgbm90IGZvdW5kLiBSZWFjdCBuZXZlciByZW1vdmVzIHRoZSBib2R5IGZvciBhbnkgRG9jdW1lbnQgaXQgcmVuZGVycyBpbnRvIHNvIHRoZSBjYXVzZSBpcyBsaWtlbHkgaW4gc29tZSBvdGhlciBzY3JpcHQgcnVubmluZyBvbiB0aGlzIHBhZ2UuIgogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIHJldHVybiB0eXBlOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICAgInJlc29sdmVTaW5nbGV0b25JbnN0YW5jZSB3YXMgY2FsbGVkIHdpdGggYW4gZWxlbWVudCB0eXBlIHRoYXQgaXMgbm90IHN1cHBvcnRlZC4gVGhpcyBpcyBhIGJ1ZyBpbiBSZWFjdC4iCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGFjcXVpcmVTaW5nbGV0b25JbnN0YW5jZSh0eXBlLCBwcm9wcywgaW5zdGFuY2UsIGludGVybmFsSW5zdGFuY2VIYW5kbGUpIHsKICAgICAgICBpZiAoIWluc3RhbmNlW2ludGVybmFsQ29udGFpbmVySW5zdGFuY2VLZXldICYmIGdldEluc3RhbmNlRnJvbU5vZGUoaW5zdGFuY2UpKSB7CiAgICAgICAgICB2YXIgdGFnTmFtZSA9IGluc3RhbmNlLnRhZ05hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICJZb3UgYXJlIG1vdW50aW5nIGEgbmV3ICVzIGNvbXBvbmVudCB3aGVuIGEgcHJldmlvdXMgb25lIGhhcyBub3QgZmlyc3QgdW5tb3VudGVkLiBJdCBpcyBhbiBlcnJvciB0byByZW5kZXIgbW9yZSB0aGFuIG9uZSAlcyBjb21wb25lbnQgYXQgYSB0aW1lIGFuZCBhdHRyaWJ1dGVzIGFuZCBjaGlsZHJlbiBvZiB0aGVzZSBjb21wb25lbnRzIHdpbGwgbGlrZWx5IGZhaWwgaW4gdW5wcmVkaWN0YWJsZSB3YXlzLiBQbGVhc2Ugb25seSByZW5kZXIgYSBzaW5nbGUgaW5zdGFuY2Ugb2YgPCVzPiBhbmQgaWYgeW91IG5lZWQgdG8gbW91bnQgYSBuZXcgb25lLCBlbnN1cmUgYW55IHByZXZpb3VzIG9uZXMgaGF2ZSB1bm1vdW50ZWQgZmlyc3QuIiwKICAgICAgICAgICAgdGFnTmFtZSwKICAgICAgICAgICAgdGFnTmFtZSwKICAgICAgICAgICAgdGFnTmFtZQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICBjYXNlICJodG1sIjoKICAgICAgICAgIGNhc2UgImhlYWQiOgogICAgICAgICAgY2FzZSAiYm9keSI6CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAiYWNxdWlyZVNpbmdsZXRvbkluc3RhbmNlIHdhcyBjYWxsZWQgd2l0aCBhbiBlbGVtZW50IHR5cGUgdGhhdCBpcyBub3Qgc3VwcG9ydGVkLiBUaGlzIGlzIGEgYnVnIGluIFJlYWN0LiIKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgZm9yICh0YWdOYW1lID0gaW5zdGFuY2UuYXR0cmlidXRlczsgdGFnTmFtZS5sZW5ndGg7ICkKICAgICAgICAgIGluc3RhbmNlLnJlbW92ZUF0dHJpYnV0ZU5vZGUodGFnTmFtZVswXSk7CiAgICAgICAgc2V0SW5pdGlhbFByb3BlcnRpZXMoaW5zdGFuY2UsIHR5cGUsIHByb3BzKTsKICAgICAgICBpbnN0YW5jZVtpbnRlcm5hbEluc3RhbmNlS2V5XSA9IGludGVybmFsSW5zdGFuY2VIYW5kbGU7CiAgICAgICAgaW5zdGFuY2VbaW50ZXJuYWxQcm9wc0tleV0gPSBwcm9wczsKICAgICAgfQogICAgICBmdW5jdGlvbiByZWxlYXNlU2luZ2xldG9uSW5zdGFuY2UoaW5zdGFuY2UpIHsKICAgICAgICBmb3IgKHZhciBhdHRyaWJ1dGVzID0gaW5zdGFuY2UuYXR0cmlidXRlczsgYXR0cmlidXRlcy5sZW5ndGg7ICkKICAgICAgICAgIGluc3RhbmNlLnJlbW92ZUF0dHJpYnV0ZU5vZGUoYXR0cmlidXRlc1swXSk7CiAgICAgICAgZGV0YWNoRGVsZXRlZEluc3RhbmNlKGluc3RhbmNlKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBnZXRIb2lzdGFibGVSb290KGNvbnRhaW5lcikgewogICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09PSB0eXBlb2YgY29udGFpbmVyLmdldFJvb3ROb2RlID8gY29udGFpbmVyLmdldFJvb3ROb2RlKCkgOiA5ID09PSBjb250YWluZXIubm9kZVR5cGUgPyBjb250YWluZXIgOiBjb250YWluZXIub3duZXJEb2N1bWVudDsKICAgICAgfQogICAgICBmdW5jdGlvbiBwcmVjb25uZWN0QXMocmVsLCBocmVmLCBjcm9zc09yaWdpbikgewogICAgICAgIHZhciBvd25lckRvY3VtZW50ID0gZ2xvYmFsRG9jdW1lbnQ7CiAgICAgICAgaWYgKG93bmVyRG9jdW1lbnQgJiYgInN0cmluZyIgPT09IHR5cGVvZiBocmVmICYmIGhyZWYpIHsKICAgICAgICAgIHZhciBsaW1pdGVkRXNjYXBlZEhyZWYgPSBlc2NhcGVTZWxlY3RvckF0dHJpYnV0ZVZhbHVlSW5zaWRlRG91YmxlUXVvdGVzKGhyZWYpOwogICAgICAgICAgbGltaXRlZEVzY2FwZWRIcmVmID0gJ2xpbmtbcmVsPSInICsgcmVsICsgJyJdW2hyZWY9IicgKyBsaW1pdGVkRXNjYXBlZEhyZWYgKyAnIl0nOwogICAgICAgICAgInN0cmluZyIgPT09IHR5cGVvZiBjcm9zc09yaWdpbiAmJiAobGltaXRlZEVzY2FwZWRIcmVmICs9ICdbY3Jvc3NvcmlnaW49IicgKyBjcm9zc09yaWdpbiArICciXScpOwogICAgICAgICAgcHJlY29ubmVjdHNTZXQuaGFzKGxpbWl0ZWRFc2NhcGVkSHJlZikgfHwgKHByZWNvbm5lY3RzU2V0LmFkZChsaW1pdGVkRXNjYXBlZEhyZWYpLCByZWwgPSB7IHJlbCwgY3Jvc3NPcmlnaW4sIGhyZWYgfSwgbnVsbCA9PT0gb3duZXJEb2N1bWVudC5xdWVyeVNlbGVjdG9yKGxpbWl0ZWRFc2NhcGVkSHJlZikgJiYgKGhyZWYgPSBvd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpbmsiKSwgc2V0SW5pdGlhbFByb3BlcnRpZXMoaHJlZiwgImxpbmsiLCByZWwpLCBtYXJrTm9kZUFzSG9pc3RhYmxlKGhyZWYpLCBvd25lckRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoaHJlZikpKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0UmVzb3VyY2UodHlwZSwgY3VycmVudFByb3BzLCBwZW5kaW5nUHJvcHMsIGN1cnJlbnRSZXNvdXJjZSkgewogICAgICAgIHZhciByZXNvdXJjZVJvb3QgPSAocmVzb3VyY2VSb290ID0gcm9vdEluc3RhbmNlU3RhY2tDdXJzb3IuY3VycmVudCkgPyBnZXRIb2lzdGFibGVSb290KHJlc291cmNlUm9vdCkgOiBudWxsOwogICAgICAgIGlmICghcmVzb3VyY2VSb290KQogICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICcicmVzb3VyY2VSb290IiB3YXMgZXhwZWN0ZWQgdG8gZXhpc3QuIFRoaXMgaXMgYSBidWcgaW4gUmVhY3QuJwogICAgICAgICAgKTsKICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgIGNhc2UgIm1ldGEiOgogICAgICAgICAgY2FzZSAidGl0bGUiOgogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIGNhc2UgInN0eWxlIjoKICAgICAgICAgICAgcmV0dXJuICJzdHJpbmciID09PSB0eXBlb2YgcGVuZGluZ1Byb3BzLnByZWNlZGVuY2UgJiYgInN0cmluZyIgPT09IHR5cGVvZiBwZW5kaW5nUHJvcHMuaHJlZiA/IChwZW5kaW5nUHJvcHMgPSBnZXRTdHlsZUtleShwZW5kaW5nUHJvcHMuaHJlZiksIGN1cnJlbnRQcm9wcyA9IGdldFJlc291cmNlc0Zyb21Sb290KHJlc291cmNlUm9vdCkuaG9pc3RhYmxlU3R5bGVzLCBjdXJyZW50UmVzb3VyY2UgPSBjdXJyZW50UHJvcHMuZ2V0KHBlbmRpbmdQcm9wcyksIGN1cnJlbnRSZXNvdXJjZSB8fCAoY3VycmVudFJlc291cmNlID0gewogICAgICAgICAgICAgIHR5cGU6ICJzdHlsZSIsCiAgICAgICAgICAgICAgaW5zdGFuY2U6IG51bGwsCiAgICAgICAgICAgICAgY291bnQ6IDAsCiAgICAgICAgICAgICAgc3RhdGU6IG51bGwKICAgICAgICAgICAgfSwgY3VycmVudFByb3BzLnNldChwZW5kaW5nUHJvcHMsIGN1cnJlbnRSZXNvdXJjZSkpLCBjdXJyZW50UmVzb3VyY2UpIDogeyB0eXBlOiAidm9pZCIsIGluc3RhbmNlOiBudWxsLCBjb3VudDogMCwgc3RhdGU6IG51bGwgfTsKICAgICAgICAgIGNhc2UgImxpbmsiOgogICAgICAgICAgICBpZiAoInN0eWxlc2hlZXQiID09PSBwZW5kaW5nUHJvcHMucmVsICYmICJzdHJpbmciID09PSB0eXBlb2YgcGVuZGluZ1Byb3BzLmhyZWYgJiYgInN0cmluZyIgPT09IHR5cGVvZiBwZW5kaW5nUHJvcHMucHJlY2VkZW5jZSkgewogICAgICAgICAgICAgIHR5cGUgPSBnZXRTdHlsZUtleShwZW5kaW5nUHJvcHMuaHJlZik7CiAgICAgICAgICAgICAgdmFyIF9zdHlsZXMgPSBnZXRSZXNvdXJjZXNGcm9tUm9vdChyZXNvdXJjZVJvb3QpLmhvaXN0YWJsZVN0eWxlcywgX3Jlc291cmNlID0gX3N0eWxlcy5nZXQodHlwZSk7CiAgICAgICAgICAgICAgaWYgKCFfcmVzb3VyY2UgJiYgKHJlc291cmNlUm9vdCA9IHJlc291cmNlUm9vdC5vd25lckRvY3VtZW50IHx8IHJlc291cmNlUm9vdCwgX3Jlc291cmNlID0gewogICAgICAgICAgICAgICAgdHlwZTogInN0eWxlc2hlZXQiLAogICAgICAgICAgICAgICAgaW5zdGFuY2U6IG51bGwsCiAgICAgICAgICAgICAgICBjb3VudDogMCwKICAgICAgICAgICAgICAgIHN0YXRlOiB7IGxvYWRpbmc6IE5vdExvYWRlZCwgcHJlbG9hZDogbnVsbCB9CiAgICAgICAgICAgICAgfSwgX3N0eWxlcy5zZXQodHlwZSwgX3Jlc291cmNlKSwgKF9zdHlsZXMgPSByZXNvdXJjZVJvb3QucXVlcnlTZWxlY3RvcigKICAgICAgICAgICAgICAgIGdldFN0eWxlc2hlZXRTZWxlY3RvckZyb21LZXkodHlwZSkKICAgICAgICAgICAgICApKSAmJiAhX3N0eWxlcy5fcCAmJiAoX3Jlc291cmNlLmluc3RhbmNlID0gX3N0eWxlcywgX3Jlc291cmNlLnN0YXRlLmxvYWRpbmcgPSBMb2FkZWQgfCBJbnNlcnRlZCksICFwcmVsb2FkUHJvcHNNYXAuaGFzKHR5cGUpKSkgewogICAgICAgICAgICAgICAgdmFyIHByZWxvYWRQcm9wcyA9IHsKICAgICAgICAgICAgICAgICAgcmVsOiAicHJlbG9hZCIsCiAgICAgICAgICAgICAgICAgIGFzOiAic3R5bGUiLAogICAgICAgICAgICAgICAgICBocmVmOiBwZW5kaW5nUHJvcHMuaHJlZiwKICAgICAgICAgICAgICAgICAgY3Jvc3NPcmlnaW46IHBlbmRpbmdQcm9wcy5jcm9zc09yaWdpbiwKICAgICAgICAgICAgICAgICAgaW50ZWdyaXR5OiBwZW5kaW5nUHJvcHMuaW50ZWdyaXR5LAogICAgICAgICAgICAgICAgICBtZWRpYTogcGVuZGluZ1Byb3BzLm1lZGlhLAogICAgICAgICAgICAgICAgICBocmVmTGFuZzogcGVuZGluZ1Byb3BzLmhyZWZMYW5nLAogICAgICAgICAgICAgICAgICByZWZlcnJlclBvbGljeTogcGVuZGluZ1Byb3BzLnJlZmVycmVyUG9saWN5CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcHJlbG9hZFByb3BzTWFwLnNldCh0eXBlLCBwcmVsb2FkUHJvcHMpOwogICAgICAgICAgICAgICAgX3N0eWxlcyB8fCBwcmVsb2FkU3R5bGVzaGVldCgKICAgICAgICAgICAgICAgICAgcmVzb3VyY2VSb290LAogICAgICAgICAgICAgICAgICB0eXBlLAogICAgICAgICAgICAgICAgICBwcmVsb2FkUHJvcHMsCiAgICAgICAgICAgICAgICAgIF9yZXNvdXJjZS5zdGF0ZQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKGN1cnJlbnRQcm9wcyAmJiBudWxsID09PSBjdXJyZW50UmVzb3VyY2UpCiAgICAgICAgICAgICAgICB0aHJvdyBwZW5kaW5nUHJvcHMgPSAiXG5cbiAgLSAiICsgZGVzY3JpYmVMaW5rRm9yUmVzb3VyY2VFcnJvckRFVihjdXJyZW50UHJvcHMpICsgIlxuICArICIgKyBkZXNjcmliZUxpbmtGb3JSZXNvdXJjZUVycm9yREVWKHBlbmRpbmdQcm9wcyksIEVycm9yKAogICAgICAgICAgICAgICAgICAiRXhwZWN0ZWQgPGxpbms+IG5vdCB0byB1cGRhdGUgdG8gYmUgdXBkYXRlZCB0byBhIHN0eWxlc2hlZXQgd2l0aCBwcmVjZWRlbmNlLiBDaGVjayB0aGUgYHJlbGAsIGBocmVmYCwgYW5kIGBwcmVjZWRlbmNlYCBwcm9wcyBvZiB0aGlzIGNvbXBvbmVudC4gQWx0ZXJuYXRpdmVseSwgY2hlY2sgd2hldGhlciB0d28gZGlmZmVyZW50IDxsaW5rPiBjb21wb25lbnRzIHJlbmRlciBpbiB0aGUgc2FtZSBzbG90IG9yIHNoYXJlIHRoZSBzYW1lIGtleS4iICsgcGVuZGluZ1Byb3BzCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIHJldHVybiBfcmVzb3VyY2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGN1cnJlbnRQcm9wcyAmJiBudWxsICE9PSBjdXJyZW50UmVzb3VyY2UpCiAgICAgICAgICAgICAgdGhyb3cgcGVuZGluZ1Byb3BzID0gIlxuXG4gIC0gIiArIGRlc2NyaWJlTGlua0ZvclJlc291cmNlRXJyb3JERVYoY3VycmVudFByb3BzKSArICJcbiAgKyAiICsgZGVzY3JpYmVMaW5rRm9yUmVzb3VyY2VFcnJvckRFVihwZW5kaW5nUHJvcHMpLCBFcnJvcigKICAgICAgICAgICAgICAgICJFeHBlY3RlZCBzdHlsZXNoZWV0IHdpdGggcHJlY2VkZW5jZSB0byBub3QgYmUgdXBkYXRlZCB0byBhIGRpZmZlcmVudCBraW5kIG9mIDxsaW5rPi4gQ2hlY2sgdGhlIGByZWxgLCBgaHJlZmAsIGFuZCBgcHJlY2VkZW5jZWAgcHJvcHMgb2YgdGhpcyBjb21wb25lbnQuIEFsdGVybmF0aXZlbHksIGNoZWNrIHdoZXRoZXIgdHdvIGRpZmZlcmVudCA8bGluaz4gY29tcG9uZW50cyByZW5kZXIgaW4gdGhlIHNhbWUgc2xvdCBvciBzaGFyZSB0aGUgc2FtZSBrZXkuIiArIHBlbmRpbmdQcm9wcwogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgY2FzZSAic2NyaXB0IjoKICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRQcm9wcyA9IHBlbmRpbmdQcm9wcy5hc3luYywgcGVuZGluZ1Byb3BzID0gcGVuZGluZ1Byb3BzLnNyYywgInN0cmluZyIgPT09IHR5cGVvZiBwZW5kaW5nUHJvcHMgJiYgY3VycmVudFByb3BzICYmICJmdW5jdGlvbiIgIT09IHR5cGVvZiBjdXJyZW50UHJvcHMgJiYgInN5bWJvbCIgIT09IHR5cGVvZiBjdXJyZW50UHJvcHMgPyAocGVuZGluZ1Byb3BzID0gZ2V0U2NyaXB0S2V5KHBlbmRpbmdQcm9wcyksIGN1cnJlbnRQcm9wcyA9IGdldFJlc291cmNlc0Zyb21Sb290KHJlc291cmNlUm9vdCkuaG9pc3RhYmxlU2NyaXB0cywgY3VycmVudFJlc291cmNlID0gY3VycmVudFByb3BzLmdldChwZW5kaW5nUHJvcHMpLCBjdXJyZW50UmVzb3VyY2UgfHwgKGN1cnJlbnRSZXNvdXJjZSA9IHsKICAgICAgICAgICAgICB0eXBlOiAic2NyaXB0IiwKICAgICAgICAgICAgICBpbnN0YW5jZTogbnVsbCwKICAgICAgICAgICAgICBjb3VudDogMCwKICAgICAgICAgICAgICBzdGF0ZTogbnVsbAogICAgICAgICAgICB9LCBjdXJyZW50UHJvcHMuc2V0KHBlbmRpbmdQcm9wcywgY3VycmVudFJlc291cmNlKSksIGN1cnJlbnRSZXNvdXJjZSkgOiB7IHR5cGU6ICJ2b2lkIiwgaW5zdGFuY2U6IG51bGwsIGNvdW50OiAwLCBzdGF0ZTogbnVsbCB9OwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICAgJ2dldFJlc291cmNlIGVuY291bnRlcmVkIGEgdHlwZSBpdCBkaWQgbm90IGV4cGVjdDogIicgKyB0eXBlICsgJyIuIHRoaXMgaXMgYSBidWcgaW4gUmVhY3QuJwogICAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBkZXNjcmliZUxpbmtGb3JSZXNvdXJjZUVycm9yREVWKHByb3BzKSB7CiAgICAgICAgdmFyIGRlc2NyaWJlZFByb3BzID0gMCwgZGVzY3JpcHRpb24gPSAiPGxpbmsiOwogICAgICAgICJzdHJpbmciID09PSB0eXBlb2YgcHJvcHMucmVsID8gKGRlc2NyaWJlZFByb3BzKyssIGRlc2NyaXB0aW9uICs9ICcgcmVsPSInICsgcHJvcHMucmVsICsgJyInKSA6IGhhc093blByb3BlcnR5LmNhbGwocHJvcHMsICJyZWwiKSAmJiAoZGVzY3JpYmVkUHJvcHMrKywgZGVzY3JpcHRpb24gKz0gJyByZWw9IicgKyAobnVsbCA9PT0gcHJvcHMucmVsID8gIm51bGwiIDogImludmFsaWQgdHlwZSAiICsgdHlwZW9mIHByb3BzLnJlbCkgKyAnIicpOwogICAgICAgICJzdHJpbmciID09PSB0eXBlb2YgcHJvcHMuaHJlZiA/IChkZXNjcmliZWRQcm9wcysrLCBkZXNjcmlwdGlvbiArPSAnIGhyZWY9IicgKyBwcm9wcy5ocmVmICsgJyInKSA6IGhhc093blByb3BlcnR5LmNhbGwocHJvcHMsICJocmVmIikgJiYgKGRlc2NyaWJlZFByb3BzKyssIGRlc2NyaXB0aW9uICs9ICcgaHJlZj0iJyArIChudWxsID09PSBwcm9wcy5ocmVmID8gIm51bGwiIDogImludmFsaWQgdHlwZSAiICsgdHlwZW9mIHByb3BzLmhyZWYpICsgJyInKTsKICAgICAgICAic3RyaW5nIiA9PT0gdHlwZW9mIHByb3BzLnByZWNlZGVuY2UgPyAoZGVzY3JpYmVkUHJvcHMrKywgZGVzY3JpcHRpb24gKz0gJyBwcmVjZWRlbmNlPSInICsgcHJvcHMucHJlY2VkZW5jZSArICciJykgOiBoYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3BzLCAicHJlY2VkZW5jZSIpICYmIChkZXNjcmliZWRQcm9wcysrLCBkZXNjcmlwdGlvbiArPSAiIHByZWNlZGVuY2U9eyIgKyAobnVsbCA9PT0gcHJvcHMucHJlY2VkZW5jZSA/ICJudWxsIiA6ICJpbnZhbGlkIHR5cGUgIiArIHR5cGVvZiBwcm9wcy5wcmVjZWRlbmNlKSArICJ9Iik7CiAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocHJvcHMpLmxlbmd0aCA+IGRlc2NyaWJlZFByb3BzICYmIChkZXNjcmlwdGlvbiArPSAiIC4uLiIpOwogICAgICAgIHJldHVybiBkZXNjcmlwdGlvbiArICIgLz4iOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldFN0eWxlS2V5KGhyZWYpIHsKICAgICAgICByZXR1cm4gJ2hyZWY9IicgKyBlc2NhcGVTZWxlY3RvckF0dHJpYnV0ZVZhbHVlSW5zaWRlRG91YmxlUXVvdGVzKGhyZWYpICsgJyInOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldFN0eWxlc2hlZXRTZWxlY3RvckZyb21LZXkoa2V5KSB7CiAgICAgICAgcmV0dXJuICdsaW5rW3JlbD0ic3R5bGVzaGVldCJdWycgKyBrZXkgKyAiXSI7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gc3R5bGVzaGVldFByb3BzRnJvbVJhd1Byb3BzKHJhd1Byb3BzKSB7CiAgICAgICAgcmV0dXJuIGFzc2lnbih7fSwgcmF3UHJvcHMsIHsKICAgICAgICAgICJkYXRhLXByZWNlZGVuY2UiOiByYXdQcm9wcy5wcmVjZWRlbmNlLAogICAgICAgICAgcHJlY2VkZW5jZTogbnVsbAogICAgICAgIH0pOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHByZWxvYWRTdHlsZXNoZWV0KG93bmVyRG9jdW1lbnQsIGtleSwgcHJlbG9hZFByb3BzLCBzdGF0ZSkgewogICAgICAgIG93bmVyRG9jdW1lbnQucXVlcnlTZWxlY3RvcigKICAgICAgICAgICdsaW5rW3JlbD0icHJlbG9hZCJdW2FzPSJzdHlsZSJdWycgKyBrZXkgKyAiXSIKICAgICAgICApID8gc3RhdGUubG9hZGluZyA9IExvYWRlZCA6IChrZXkgPSBvd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpbmsiKSwgc3RhdGUucHJlbG9hZCA9IGtleSwga2V5LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLCBmdW5jdGlvbigpIHsKICAgICAgICAgIHJldHVybiBzdGF0ZS5sb2FkaW5nIHw9IExvYWRlZDsKICAgICAgICB9KSwga2V5LmFkZEV2ZW50TGlzdGVuZXIoImVycm9yIiwgZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gc3RhdGUubG9hZGluZyB8PSBFcnJvcmVkOwogICAgICAgIH0pLCBzZXRJbml0aWFsUHJvcGVydGllcyhrZXksICJsaW5rIiwgcHJlbG9hZFByb3BzKSwgbWFya05vZGVBc0hvaXN0YWJsZShrZXkpLCBvd25lckRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoa2V5KSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0U2NyaXB0S2V5KHNyYykgewogICAgICAgIHJldHVybiAnW3NyYz0iJyArIGVzY2FwZVNlbGVjdG9yQXR0cmlidXRlVmFsdWVJbnNpZGVEb3VibGVRdW90ZXMoc3JjKSArICciXSc7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0U2NyaXB0U2VsZWN0b3JGcm9tS2V5KGtleSkgewogICAgICAgIHJldHVybiAic2NyaXB0W2FzeW5jXSIgKyBrZXk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gYWNxdWlyZVJlc291cmNlKGhvaXN0YWJsZVJvb3QsIHJlc291cmNlLCBwcm9wcykgewogICAgICAgIHJlc291cmNlLmNvdW50Kys7CiAgICAgICAgaWYgKG51bGwgPT09IHJlc291cmNlLmluc3RhbmNlKQogICAgICAgICAgc3dpdGNoIChyZXNvdXJjZS50eXBlKSB7CiAgICAgICAgICAgIGNhc2UgInN0eWxlIjoKICAgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBob2lzdGFibGVSb290LnF1ZXJ5U2VsZWN0b3IoCiAgICAgICAgICAgICAgICAnc3R5bGVbZGF0YS1ocmVmfj0iJyArIGVzY2FwZVNlbGVjdG9yQXR0cmlidXRlVmFsdWVJbnNpZGVEb3VibGVRdW90ZXMocHJvcHMuaHJlZikgKyAnIl0nCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UpCiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2UuaW5zdGFuY2UgPSBpbnN0YW5jZSwgbWFya05vZGVBc0hvaXN0YWJsZShpbnN0YW5jZSksIGluc3RhbmNlOwogICAgICAgICAgICAgIHZhciBzdHlsZVByb3BzID0gYXNzaWduKHt9LCBwcm9wcywgewogICAgICAgICAgICAgICAgImRhdGEtaHJlZiI6IHByb3BzLmhyZWYsCiAgICAgICAgICAgICAgICAiZGF0YS1wcmVjZWRlbmNlIjogcHJvcHMucHJlY2VkZW5jZSwKICAgICAgICAgICAgICAgIGhyZWY6IG51bGwsCiAgICAgICAgICAgICAgICBwcmVjZWRlbmNlOiBudWxsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgaW5zdGFuY2UgPSAoaG9pc3RhYmxlUm9vdC5vd25lckRvY3VtZW50IHx8IGhvaXN0YWJsZVJvb3QpLmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7CiAgICAgICAgICAgICAgbWFya05vZGVBc0hvaXN0YWJsZShpbnN0YW5jZSk7CiAgICAgICAgICAgICAgc2V0SW5pdGlhbFByb3BlcnRpZXMoaW5zdGFuY2UsICJzdHlsZSIsIHN0eWxlUHJvcHMpOwogICAgICAgICAgICAgIGluc2VydFN0eWxlc2hlZXQoaW5zdGFuY2UsIHByb3BzLnByZWNlZGVuY2UsIGhvaXN0YWJsZVJvb3QpOwogICAgICAgICAgICAgIHJldHVybiByZXNvdXJjZS5pbnN0YW5jZSA9IGluc3RhbmNlOwogICAgICAgICAgICBjYXNlICJzdHlsZXNoZWV0IjoKICAgICAgICAgICAgICBzdHlsZVByb3BzID0gZ2V0U3R5bGVLZXkocHJvcHMuaHJlZik7CiAgICAgICAgICAgICAgdmFyIF9pbnN0YW5jZSA9IGhvaXN0YWJsZVJvb3QucXVlcnlTZWxlY3RvcigKICAgICAgICAgICAgICAgIGdldFN0eWxlc2hlZXRTZWxlY3RvckZyb21LZXkoc3R5bGVQcm9wcykKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGlmIChfaW5zdGFuY2UpCiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2Uuc3RhdGUubG9hZGluZyB8PSBJbnNlcnRlZCwgcmVzb3VyY2UuaW5zdGFuY2UgPSBfaW5zdGFuY2UsIG1hcmtOb2RlQXNIb2lzdGFibGUoX2luc3RhbmNlKSwgX2luc3RhbmNlOwogICAgICAgICAgICAgIGluc3RhbmNlID0gc3R5bGVzaGVldFByb3BzRnJvbVJhd1Byb3BzKHByb3BzKTsKICAgICAgICAgICAgICAoc3R5bGVQcm9wcyA9IHByZWxvYWRQcm9wc01hcC5nZXQoc3R5bGVQcm9wcykpICYmIGFkb3B0UHJlbG9hZFByb3BzRm9yU3R5bGVzaGVldChpbnN0YW5jZSwgc3R5bGVQcm9wcyk7CiAgICAgICAgICAgICAgX2luc3RhbmNlID0gKGhvaXN0YWJsZVJvb3Qub3duZXJEb2N1bWVudCB8fCBob2lzdGFibGVSb290KS5jcmVhdGVFbGVtZW50KCJsaW5rIik7CiAgICAgICAgICAgICAgbWFya05vZGVBc0hvaXN0YWJsZShfaW5zdGFuY2UpOwogICAgICAgICAgICAgIHZhciBsaW5rSW5zdGFuY2UgPSBfaW5zdGFuY2U7CiAgICAgICAgICAgICAgbGlua0luc3RhbmNlLl9wID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgICBsaW5rSW5zdGFuY2Uub25sb2FkID0gcmVzb2x2ZTsKICAgICAgICAgICAgICAgIGxpbmtJbnN0YW5jZS5vbmVycm9yID0gcmVqZWN0OwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHNldEluaXRpYWxQcm9wZXJ0aWVzKF9pbnN0YW5jZSwgImxpbmsiLCBpbnN0YW5jZSk7CiAgICAgICAgICAgICAgcmVzb3VyY2Uuc3RhdGUubG9hZGluZyB8PSBJbnNlcnRlZDsKICAgICAgICAgICAgICBpbnNlcnRTdHlsZXNoZWV0KF9pbnN0YW5jZSwgcHJvcHMucHJlY2VkZW5jZSwgaG9pc3RhYmxlUm9vdCk7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlLmluc3RhbmNlID0gX2luc3RhbmNlOwogICAgICAgICAgICBjYXNlICJzY3JpcHQiOgogICAgICAgICAgICAgIF9pbnN0YW5jZSA9IGdldFNjcmlwdEtleShwcm9wcy5zcmMpOwogICAgICAgICAgICAgIGlmIChzdHlsZVByb3BzID0gaG9pc3RhYmxlUm9vdC5xdWVyeVNlbGVjdG9yKAogICAgICAgICAgICAgICAgZ2V0U2NyaXB0U2VsZWN0b3JGcm9tS2V5KF9pbnN0YW5jZSkKICAgICAgICAgICAgICApKQogICAgICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlLmluc3RhbmNlID0gc3R5bGVQcm9wcywgbWFya05vZGVBc0hvaXN0YWJsZShzdHlsZVByb3BzKSwgc3R5bGVQcm9wczsKICAgICAgICAgICAgICBpbnN0YW5jZSA9IHByb3BzOwogICAgICAgICAgICAgIGlmIChzdHlsZVByb3BzID0gcHJlbG9hZFByb3BzTWFwLmdldChfaW5zdGFuY2UpKQogICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBhc3NpZ24oe30sIHByb3BzKSwgYWRvcHRQcmVsb2FkUHJvcHNGb3JTY3JpcHQoaW5zdGFuY2UsIHN0eWxlUHJvcHMpOwogICAgICAgICAgICAgIGhvaXN0YWJsZVJvb3QgPSBob2lzdGFibGVSb290Lm93bmVyRG9jdW1lbnQgfHwgaG9pc3RhYmxlUm9vdDsKICAgICAgICAgICAgICBzdHlsZVByb3BzID0gaG9pc3RhYmxlUm9vdC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsKICAgICAgICAgICAgICBtYXJrTm9kZUFzSG9pc3RhYmxlKHN0eWxlUHJvcHMpOwogICAgICAgICAgICAgIHNldEluaXRpYWxQcm9wZXJ0aWVzKHN0eWxlUHJvcHMsICJsaW5rIiwgaW5zdGFuY2UpOwogICAgICAgICAgICAgIGhvaXN0YWJsZVJvb3QuaGVhZC5hcHBlbmRDaGlsZChzdHlsZVByb3BzKTsKICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2UuaW5zdGFuY2UgPSBzdHlsZVByb3BzOwogICAgICAgICAgICBjYXNlICJ2b2lkIjoKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICAgICAgICdhY3F1aXJlUmVzb3VyY2UgZW5jb3VudGVyZWQgYSByZXNvdXJjZSB0eXBlIGl0IGRpZCBub3QgZXhwZWN0OiAiJyArIHJlc291cmNlLnR5cGUgKyAnIi4gdGhpcyBpcyBhIGJ1ZyBpbiBSZWFjdC4nCiAgICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgICAic3R5bGVzaGVldCIgPT09IHJlc291cmNlLnR5cGUgJiYgKHJlc291cmNlLnN0YXRlLmxvYWRpbmcgJiBJbnNlcnRlZCkgPT09IE5vdExvYWRlZCAmJiAoaW5zdGFuY2UgPSByZXNvdXJjZS5pbnN0YW5jZSwgcmVzb3VyY2Uuc3RhdGUubG9hZGluZyB8PSBJbnNlcnRlZCwgaW5zZXJ0U3R5bGVzaGVldChpbnN0YW5jZSwgcHJvcHMucHJlY2VkZW5jZSwgaG9pc3RhYmxlUm9vdCkpOwogICAgICAgIHJldHVybiByZXNvdXJjZS5pbnN0YW5jZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBpbnNlcnRTdHlsZXNoZWV0KGluc3RhbmNlLCBwcmVjZWRlbmNlLCByb290MikgewogICAgICAgIGZvciAodmFyIG5vZGVzID0gcm9vdDIucXVlcnlTZWxlY3RvckFsbCgKICAgICAgICAgICdsaW5rW3JlbD0ic3R5bGVzaGVldCJdW2RhdGEtcHJlY2VkZW5jZV0sc3R5bGVbZGF0YS1wcmVjZWRlbmNlXScKICAgICAgICApLCBsYXN0ID0gbm9kZXMubGVuZ3RoID8gbm9kZXNbbm9kZXMubGVuZ3RoIC0gMV0gOiBudWxsLCBwcmlvciA9IGxhc3QsIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHZhciBub2RlID0gbm9kZXNbaV07CiAgICAgICAgICBpZiAobm9kZS5kYXRhc2V0LnByZWNlZGVuY2UgPT09IHByZWNlZGVuY2UpIHByaW9yID0gbm9kZTsKICAgICAgICAgIGVsc2UgaWYgKHByaW9yICE9PSBsYXN0KSBicmVhazsKICAgICAgICB9CiAgICAgICAgcHJpb3IgPyBwcmlvci5wYXJlbnROb2RlLmluc2VydEJlZm9yZShpbnN0YW5jZSwgcHJpb3IubmV4dFNpYmxpbmcpIDogKHByZWNlZGVuY2UgPSA5ID09PSByb290Mi5ub2RlVHlwZSA/IHJvb3QyLmhlYWQgOiByb290MiwgcHJlY2VkZW5jZS5pbnNlcnRCZWZvcmUoaW5zdGFuY2UsIHByZWNlZGVuY2UuZmlyc3RDaGlsZCkpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGFkb3B0UHJlbG9hZFByb3BzRm9yU3R5bGVzaGVldChzdHlsZXNoZWV0UHJvcHMsIHByZWxvYWRQcm9wcykgewogICAgICAgIG51bGwgPT0gc3R5bGVzaGVldFByb3BzLmNyb3NzT3JpZ2luICYmIChzdHlsZXNoZWV0UHJvcHMuY3Jvc3NPcmlnaW4gPSBwcmVsb2FkUHJvcHMuY3Jvc3NPcmlnaW4pOwogICAgICAgIG51bGwgPT0gc3R5bGVzaGVldFByb3BzLnJlZmVycmVyUG9saWN5ICYmIChzdHlsZXNoZWV0UHJvcHMucmVmZXJyZXJQb2xpY3kgPSBwcmVsb2FkUHJvcHMucmVmZXJyZXJQb2xpY3kpOwogICAgICAgIG51bGwgPT0gc3R5bGVzaGVldFByb3BzLnRpdGxlICYmIChzdHlsZXNoZWV0UHJvcHMudGl0bGUgPSBwcmVsb2FkUHJvcHMudGl0bGUpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGFkb3B0UHJlbG9hZFByb3BzRm9yU2NyaXB0KHNjcmlwdFByb3BzLCBwcmVsb2FkUHJvcHMpIHsKICAgICAgICBudWxsID09IHNjcmlwdFByb3BzLmNyb3NzT3JpZ2luICYmIChzY3JpcHRQcm9wcy5jcm9zc09yaWdpbiA9IHByZWxvYWRQcm9wcy5jcm9zc09yaWdpbik7CiAgICAgICAgbnVsbCA9PSBzY3JpcHRQcm9wcy5yZWZlcnJlclBvbGljeSAmJiAoc2NyaXB0UHJvcHMucmVmZXJyZXJQb2xpY3kgPSBwcmVsb2FkUHJvcHMucmVmZXJyZXJQb2xpY3kpOwogICAgICAgIG51bGwgPT0gc2NyaXB0UHJvcHMuaW50ZWdyaXR5ICYmIChzY3JpcHRQcm9wcy5pbnRlZ3JpdHkgPSBwcmVsb2FkUHJvcHMuaW50ZWdyaXR5KTsKICAgICAgfQogICAgICBmdW5jdGlvbiBnZXRIeWRyYXRhYmxlSG9pc3RhYmxlQ2FjaGUodHlwZSwga2V5QXR0cmlidXRlLCBvd25lckRvY3VtZW50KSB7CiAgICAgICAgaWYgKG51bGwgPT09IHRhZ0NhY2hlcykgewogICAgICAgICAgdmFyIGNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICAgICAgICAgIHZhciBjYWNoZXMgPSB0YWdDYWNoZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpOwogICAgICAgICAgY2FjaGVzLnNldChvd25lckRvY3VtZW50LCBjYWNoZSk7CiAgICAgICAgfSBlbHNlCiAgICAgICAgICBjYWNoZXMgPSB0YWdDYWNoZXMsIGNhY2hlID0gY2FjaGVzLmdldChvd25lckRvY3VtZW50KSwgY2FjaGUgfHwgKGNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSwgY2FjaGVzLnNldChvd25lckRvY3VtZW50LCBjYWNoZSkpOwogICAgICAgIGlmIChjYWNoZS5oYXModHlwZSkpIHJldHVybiBjYWNoZTsKICAgICAgICBjYWNoZS5zZXQodHlwZSwgbnVsbCk7CiAgICAgICAgb3duZXJEb2N1bWVudCA9IG93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUodHlwZSk7CiAgICAgICAgZm9yIChjYWNoZXMgPSAwOyBjYWNoZXMgPCBvd25lckRvY3VtZW50Lmxlbmd0aDsgY2FjaGVzKyspIHsKICAgICAgICAgIHZhciBub2RlID0gb3duZXJEb2N1bWVudFtjYWNoZXNdOwogICAgICAgICAgaWYgKCEobm9kZVtpbnRlcm5hbEhvaXN0YWJsZU1hcmtlcl0gfHwgbm9kZVtpbnRlcm5hbEluc3RhbmNlS2V5XSB8fCAibGluayIgPT09IHR5cGUgJiYgInN0eWxlc2hlZXQiID09PSBub2RlLmdldEF0dHJpYnV0ZSgicmVsIikpICYmIG5vZGUubmFtZXNwYWNlVVJJICE9PSBTVkdfTkFNRVNQQUNFKSB7CiAgICAgICAgICAgIHZhciBub2RlS2V5ID0gbm9kZS5nZXRBdHRyaWJ1dGUoa2V5QXR0cmlidXRlKSB8fCAiIjsKICAgICAgICAgICAgbm9kZUtleSA9IHR5cGUgKyBub2RlS2V5OwogICAgICAgICAgICB2YXIgZXhpc3RpbmcgPSBjYWNoZS5nZXQobm9kZUtleSk7CiAgICAgICAgICAgIGV4aXN0aW5nID8gZXhpc3RpbmcucHVzaChub2RlKSA6IGNhY2hlLnNldChub2RlS2V5LCBbbm9kZV0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gY2FjaGU7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbW91bnRIb2lzdGFibGUoaG9pc3RhYmxlUm9vdCwgdHlwZSwgaW5zdGFuY2UpIHsKICAgICAgICBob2lzdGFibGVSb290ID0gaG9pc3RhYmxlUm9vdC5vd25lckRvY3VtZW50IHx8IGhvaXN0YWJsZVJvb3Q7CiAgICAgICAgaG9pc3RhYmxlUm9vdC5oZWFkLmluc2VydEJlZm9yZSgKICAgICAgICAgIGluc3RhbmNlLAogICAgICAgICAgInRpdGxlIiA9PT0gdHlwZSA/IGhvaXN0YWJsZVJvb3QucXVlcnlTZWxlY3RvcigiaGVhZCA+IHRpdGxlIikgOiBudWxsCiAgICAgICAgKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBpc0hvc3RIb2lzdGFibGVUeXBlKHR5cGUsIHByb3BzLCBob3N0Q29udGV4dCkgewogICAgICAgIHZhciBvdXRzaWRlSG9zdENvbnRhaW5lckNvbnRleHQgPSAhaG9zdENvbnRleHQuYW5jZXN0b3JJbmZvLmNvbnRhaW5lclRhZ0luU2NvcGU7CiAgICAgICAgaWYgKGhvc3RDb250ZXh0LmNvbnRleHQgPT09IEhvc3RDb250ZXh0TmFtZXNwYWNlU3ZnIHx8IG51bGwgIT0gcHJvcHMuaXRlbVByb3ApCiAgICAgICAgICByZXR1cm4gIW91dHNpZGVIb3N0Q29udGFpbmVyQ29udGV4dCB8fCBudWxsID09IHByb3BzLml0ZW1Qcm9wIHx8ICJtZXRhIiAhPT0gdHlwZSAmJiAidGl0bGUiICE9PSB0eXBlICYmICJzdHlsZSIgIT09IHR5cGUgJiYgImxpbmsiICE9PSB0eXBlICYmICJzY3JpcHQiICE9PSB0eXBlIHx8IGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICJDYW5ub3QgcmVuZGVyIGEgPCVzPiBvdXRzaWRlIHRoZSBtYWluIGRvY3VtZW50IGlmIGl0IGhhcyBhbiBgaXRlbVByb3BgIHByb3AuIGBpdGVtUHJvcGAgc3VnZ2VzdHMgdGhlIHRhZyBiZWxvbmdzIHRvIGFuIGBpdGVtU2NvcGVgIHdoaWNoIGNhbiBhcHBlYXIgYW55d2hlcmUgaW4gdGhlIERPTS4gSWYgeW91IHdlcmUgaW50ZW5kaW5nIGZvciBSZWFjdCB0byBob2lzdCB0aGlzIDwlcz4gcmVtb3ZlIHRoZSBgaXRlbVByb3BgIHByb3AuIE90aGVyd2lzZSwgdHJ5IG1vdmluZyB0aGlzIHRhZyBpbnRvIHRoZSA8aGVhZD4gb3IgPGJvZHk+IG9mIHRoZSBEb2N1bWVudC4iLAogICAgICAgICAgICB0eXBlLAogICAgICAgICAgICB0eXBlCiAgICAgICAgICApLCBmYWxzZTsKICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgIGNhc2UgIm1ldGEiOgogICAgICAgICAgY2FzZSAidGl0bGUiOgogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIGNhc2UgInN0eWxlIjoKICAgICAgICAgICAgaWYgKCJzdHJpbmciICE9PSB0eXBlb2YgcHJvcHMucHJlY2VkZW5jZSB8fCAic3RyaW5nIiAhPT0gdHlwZW9mIHByb3BzLmhyZWYgfHwgIiIgPT09IHByb3BzLmhyZWYpIHsKICAgICAgICAgICAgICBvdXRzaWRlSG9zdENvbnRhaW5lckNvbnRleHQgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAgICdDYW5ub3QgcmVuZGVyIGEgPHN0eWxlPiBvdXRzaWRlIHRoZSBtYWluIGRvY3VtZW50IHdpdGhvdXQga25vd2luZyBpdHMgcHJlY2VkZW5jZSBhbmQgYSB1bmlxdWUgaHJlZiBrZXkuIFJlYWN0IGNhbiBob2lzdCBhbmQgZGVkdXBsaWNhdGUgPHN0eWxlPiB0YWdzIGlmIHlvdSBwcm92aWRlIGEgYHByZWNlZGVuY2VgIHByb3AgYWxvbmcgd2l0aCBhbiBgaHJlZmAgcHJvcCB0aGF0IGRvZXMgbm90IGNvbmZsaWN0IHdpdGggdGhlIGBocmVmYCB2YWx1ZXMgdXNlZCBpbiBhbnkgb3RoZXIgaG9pc3RlZCA8c3R5bGU+IG9yIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgLi4uPiB0YWdzLiAgTm90ZSB0aGF0IGhvaXN0aW5nIDxzdHlsZT4gdGFncyBpcyBjb25zaWRlcmVkIGFuIGFkdmFuY2VkIGZlYXR1cmUgdGhhdCBtb3N0IHdpbGwgbm90IHVzZSBkaXJlY3RseS4gQ29uc2lkZXIgbW92aW5nIHRoZSA8c3R5bGU+IHRhZyB0byB0aGUgPGhlYWQ+IG9yIGNvbnNpZGVyIGFkZGluZyBhIGBwcmVjZWRlbmNlPSJkZWZhdWx0ImAgYW5kIGBocmVmPSJzb21lIHVuaXF1ZSByZXNvdXJjZSBpZGVudGlmaWVyImAuJwogICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICBjYXNlICJsaW5rIjoKICAgICAgICAgICAgaWYgKCJzdHJpbmciICE9PSB0eXBlb2YgcHJvcHMucmVsIHx8ICJzdHJpbmciICE9PSB0eXBlb2YgcHJvcHMuaHJlZiB8fCAiIiA9PT0gcHJvcHMuaHJlZiB8fCBwcm9wcy5vbkxvYWQgfHwgcHJvcHMub25FcnJvcikgewogICAgICAgICAgICAgIGlmICgic3R5bGVzaGVldCIgPT09IHByb3BzLnJlbCAmJiAic3RyaW5nIiA9PT0gdHlwZW9mIHByb3BzLnByZWNlZGVuY2UpIHsKICAgICAgICAgICAgICAgIHR5cGUgPSBwcm9wcy5ocmVmOwogICAgICAgICAgICAgICAgdmFyIG9uRXJyb3IgPSBwcm9wcy5vbkVycm9yLCBkaXNhYmxlZCA9IHByb3BzLmRpc2FibGVkOwogICAgICAgICAgICAgICAgaG9zdENvbnRleHQgPSBbXTsKICAgICAgICAgICAgICAgIHByb3BzLm9uTG9hZCAmJiBob3N0Q29udGV4dC5wdXNoKCJgb25Mb2FkYCIpOwogICAgICAgICAgICAgICAgb25FcnJvciAmJiBob3N0Q29udGV4dC5wdXNoKCJgb25FcnJvcmAiKTsKICAgICAgICAgICAgICAgIG51bGwgIT0gZGlzYWJsZWQgJiYgaG9zdENvbnRleHQucHVzaCgiYGRpc2FibGVkYCIpOwogICAgICAgICAgICAgICAgb25FcnJvciA9IHByb3BOYW1lc0xpc3RKb2luKGhvc3RDb250ZXh0LCAiYW5kIik7CiAgICAgICAgICAgICAgICBvbkVycm9yICs9IDEgPT09IGhvc3RDb250ZXh0Lmxlbmd0aCA/ICIgcHJvcCIgOiAiIHByb3BzIjsKICAgICAgICAgICAgICAgIGRpc2FibGVkID0gMSA9PT0gaG9zdENvbnRleHQubGVuZ3RoID8gImFuICIgKyBvbkVycm9yIDogInRoZSAiICsgb25FcnJvcjsKICAgICAgICAgICAgICAgIGhvc3RDb250ZXh0Lmxlbmd0aCAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICAgICAnUmVhY3QgZW5jb3VudGVyZWQgYSA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9IiVzIiAuLi4gLz4gd2l0aCBhIGBwcmVjZWRlbmNlYCBwcm9wIHRoYXQgYWxzbyBpbmNsdWRlZCAlcy4gVGhlIHByZXNlbmNlIG9mIGxvYWRpbmcgYW5kIGVycm9yIGhhbmRsZXJzIGluZGljYXRlcyBhbiBpbnRlbnQgdG8gbWFuYWdlIHRoZSBzdHlsZXNoZWV0IGxvYWRpbmcgc3RhdGUgZnJvbSB5b3VyIGZyb20geW91ciBDb21wb25lbnQgY29kZSBhbmQgUmVhY3Qgd2lsbCBub3QgaG9pc3Qgb3IgZGVkdXBsaWNhdGUgdGhpcyBzdHlsZXNoZWV0LiBJZiB5b3VyIGludGVudCB3YXMgdG8gaGF2ZSBSZWFjdCBob2lzdCBhbmQgZGVkdXBsY2lhdGUgdGhpcyBzdHlsZXNoZWV0IHVzaW5nIHRoZSBgcHJlY2VkZW5jZWAgcHJvcCByZW1vdmUgdGhlICVzLCBvdGhlcndpc2UgcmVtb3ZlIHRoZSBgcHJlY2VkZW5jZWAgcHJvcC4nLAogICAgICAgICAgICAgICAgICB0eXBlLAogICAgICAgICAgICAgICAgICBkaXNhYmxlZCwKICAgICAgICAgICAgICAgICAgb25FcnJvcgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgb3V0c2lkZUhvc3RDb250YWluZXJDb250ZXh0ICYmICgic3RyaW5nIiAhPT0gdHlwZW9mIHByb3BzLnJlbCB8fCAic3RyaW5nIiAhPT0gdHlwZW9mIHByb3BzLmhyZWYgfHwgIiIgPT09IHByb3BzLmhyZWYgPyBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICAgIkNhbm5vdCByZW5kZXIgYSA8bGluaz4gb3V0c2lkZSB0aGUgbWFpbiBkb2N1bWVudCB3aXRob3V0IGEgYHJlbGAgYW5kIGBocmVmYCBwcm9wLiBUcnkgYWRkaW5nIGEgYHJlbGAgYW5kL29yIGBocmVmYCBwcm9wIHRvIHRoaXMgPGxpbms+IG9yIG1vdmluZyB0aGUgbGluayBpbnRvIHRoZSA8aGVhZD4gdGFnIgogICAgICAgICAgICAgICkgOiAocHJvcHMub25FcnJvciB8fCBwcm9wcy5vbkxvYWQpICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgICAiQ2Fubm90IHJlbmRlciBhIDxsaW5rPiB3aXRoIG9uTG9hZCBvciBvbkVycm9yIGxpc3RlbmVycyBvdXRzaWRlIHRoZSBtYWluIGRvY3VtZW50LiBUcnkgcmVtb3Zpbmcgb25Mb2FkPXsuLi59IGFuZCBvbkVycm9yPXsuLi59IG9yIG1vdmluZyBpdCBpbnRvIHRoZSByb290IDxoZWFkPiB0YWcgb3Igc29tZXdoZXJlIGluIHRoZSA8Ym9keT4uIgogICAgICAgICAgICAgICkpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN3aXRjaCAocHJvcHMucmVsKSB7CiAgICAgICAgICAgICAgY2FzZSAic3R5bGVzaGVldCI6CiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZSA9IHByb3BzLnByZWNlZGVuY2UsIHByb3BzID0gcHJvcHMuZGlzYWJsZWQsICJzdHJpbmciICE9PSB0eXBlb2YgdHlwZSAmJiBvdXRzaWRlSG9zdENvbnRhaW5lckNvbnRleHQgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAgICAgJ0Nhbm5vdCByZW5kZXIgYSA8bGluayByZWw9InN0eWxlc2hlZXQiIC8+IG91dHNpZGUgdGhlIG1haW4gZG9jdW1lbnQgd2l0aG91dCBrbm93aW5nIGl0cyBwcmVjZWRlbmNlLiBDb25zaWRlciBhZGRpbmcgcHJlY2VkZW5jZT0iZGVmYXVsdCIgb3IgbW92aW5nIGl0IGludG8gdGhlIHJvb3QgPGhlYWQ+IHRhZy4nCiAgICAgICAgICAgICAgICApLCAic3RyaW5nIiA9PT0gdHlwZW9mIHR5cGUgJiYgbnVsbCA9PSBwcm9wczsKICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgInNjcmlwdCI6CiAgICAgICAgICAgIHR5cGUgPSBwcm9wcy5hc3luYyAmJiAiZnVuY3Rpb24iICE9PSB0eXBlb2YgcHJvcHMuYXN5bmMgJiYgInN5bWJvbCIgIT09IHR5cGVvZiBwcm9wcy5hc3luYzsKICAgICAgICAgICAgaWYgKCF0eXBlIHx8IHByb3BzLm9uTG9hZCB8fCBwcm9wcy5vbkVycm9yIHx8ICFwcm9wcy5zcmMgfHwgInN0cmluZyIgIT09IHR5cGVvZiBwcm9wcy5zcmMpIHsKICAgICAgICAgICAgICBvdXRzaWRlSG9zdENvbnRhaW5lckNvbnRleHQgJiYgKHR5cGUgPyBwcm9wcy5vbkxvYWQgfHwgcHJvcHMub25FcnJvciA/IGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgICAiQ2Fubm90IHJlbmRlciBhIDxzY3JpcHQ+IHdpdGggb25Mb2FkIG9yIG9uRXJyb3IgbGlzdGVuZXJzIG91dHNpZGUgdGhlIG1haW4gZG9jdW1lbnQuIFRyeSByZW1vdmluZyBvbkxvYWQ9ey4uLn0gYW5kIG9uRXJyb3I9ey4uLn0gb3IgbW92aW5nIGl0IGludG8gdGhlIHJvb3QgPGhlYWQ+IHRhZyBvciBzb21ld2hlcmUgaW4gdGhlIDxib2R5Pi4iCiAgICAgICAgICAgICAgKSA6IGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgICAiQ2Fubm90IHJlbmRlciBhIDxzY3JpcHQ+IG91dHNpZGUgdGhlIG1haW4gZG9jdW1lbnQgd2l0aG91dCBgYXN5bmM9e3RydWV9YCBhbmQgYSBub24tZW1wdHkgYHNyY2AgcHJvcC4gRW5zdXJlIHRoZXJlIGlzIGEgdmFsaWQgYHNyY2AgYW5kIGVpdGhlciBtYWtlIHRoZSBzY3JpcHQgYXN5bmMgb3IgbW92ZSBpdCBpbnRvIHRoZSByb290IDxoZWFkPiB0YWcgb3Igc29tZXdoZXJlIGluIHRoZSA8Ym9keT4uIgogICAgICAgICAgICAgICkgOiBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICAgJ0Nhbm5vdCByZW5kZXIgYSBzeW5jIG9yIGRlZmVyIDxzY3JpcHQ+IG91dHNpZGUgdGhlIG1haW4gZG9jdW1lbnQgd2l0aG91dCBrbm93aW5nIGl0cyBvcmRlci4gVHJ5IGFkZGluZyBhc3luYz0iIiBvciBtb3ZpbmcgaXQgaW50byB0aGUgcm9vdCA8aGVhZD4gdGFnLicKICAgICAgICAgICAgICApKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIGNhc2UgIm5vc2NyaXB0IjoKICAgICAgICAgIGNhc2UgInRlbXBsYXRlIjoKICAgICAgICAgICAgb3V0c2lkZUhvc3RDb250YWluZXJDb250ZXh0ICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgIkNhbm5vdCByZW5kZXIgPCVzPiBvdXRzaWRlIHRoZSBtYWluIGRvY3VtZW50LiBUcnkgbW92aW5nIGl0IGludG8gdGhlIHJvb3QgPGhlYWQ+IHRhZy4iLAogICAgICAgICAgICAgIHR5cGUKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHByZWxvYWRSZXNvdXJjZShyZXNvdXJjZSkgewogICAgICAgIHJldHVybiAic3R5bGVzaGVldCIgPT09IHJlc291cmNlLnR5cGUgJiYgKHJlc291cmNlLnN0YXRlLmxvYWRpbmcgJiBTZXR0bGVkKSA9PT0gTm90TG9hZGVkID8gZmFsc2UgOiB0cnVlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG5vb3AoKSB7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gc3VzcGVuZFJlc291cmNlKGhvaXN0YWJsZVJvb3QsIHJlc291cmNlLCBwcm9wcykgewogICAgICAgIGlmIChudWxsID09PSBzdXNwZW5kZWRTdGF0ZSkKICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAiSW50ZXJuYWwgUmVhY3QgRXJyb3I6IHN1c3BlbmRlZFN0YXRlIG51bGwgd2hlbiBpdCB3YXMgZXhwZWN0ZWQgdG8gZXhpc3RzLiBQbGVhc2UgcmVwb3J0IHRoaXMgYXMgYSBSZWFjdCBidWcuIgogICAgICAgICAgKTsKICAgICAgICB2YXIgc3RhdGUgPSBzdXNwZW5kZWRTdGF0ZTsKICAgICAgICBpZiAoInN0eWxlc2hlZXQiID09PSByZXNvdXJjZS50eXBlICYmICgic3RyaW5nIiAhPT0gdHlwZW9mIHByb3BzLm1lZGlhIHx8IGZhbHNlICE9PSBtYXRjaE1lZGlhKHByb3BzLm1lZGlhKS5tYXRjaGVzKSAmJiAocmVzb3VyY2Uuc3RhdGUubG9hZGluZyAmIEluc2VydGVkKSA9PT0gTm90TG9hZGVkKSB7CiAgICAgICAgICBpZiAobnVsbCA9PT0gcmVzb3VyY2UuaW5zdGFuY2UpIHsKICAgICAgICAgICAgdmFyIGtleSA9IGdldFN0eWxlS2V5KHByb3BzLmhyZWYpLCBpbnN0YW5jZSA9IGhvaXN0YWJsZVJvb3QucXVlcnlTZWxlY3RvcigKICAgICAgICAgICAgICBnZXRTdHlsZXNoZWV0U2VsZWN0b3JGcm9tS2V5KGtleSkKICAgICAgICAgICAgKTsKICAgICAgICAgICAgaWYgKGluc3RhbmNlKSB7CiAgICAgICAgICAgICAgaG9pc3RhYmxlUm9vdCA9IGluc3RhbmNlLl9wOwogICAgICAgICAgICAgIG51bGwgIT09IGhvaXN0YWJsZVJvb3QgJiYgIm9iamVjdCIgPT09IHR5cGVvZiBob2lzdGFibGVSb290ICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBob2lzdGFibGVSb290LnRoZW4gJiYgKHN0YXRlLmNvdW50KyssIHN0YXRlID0gb25VbnN1c3BlbmQuYmluZChzdGF0ZSksIGhvaXN0YWJsZVJvb3QudGhlbihzdGF0ZSwgc3RhdGUpKTsKICAgICAgICAgICAgICByZXNvdXJjZS5zdGF0ZS5sb2FkaW5nIHw9IEluc2VydGVkOwogICAgICAgICAgICAgIHJlc291cmNlLmluc3RhbmNlID0gaW5zdGFuY2U7CiAgICAgICAgICAgICAgbWFya05vZGVBc0hvaXN0YWJsZShpbnN0YW5jZSk7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGluc3RhbmNlID0gaG9pc3RhYmxlUm9vdC5vd25lckRvY3VtZW50IHx8IGhvaXN0YWJsZVJvb3Q7CiAgICAgICAgICAgIHByb3BzID0gc3R5bGVzaGVldFByb3BzRnJvbVJhd1Byb3BzKHByb3BzKTsKICAgICAgICAgICAgKGtleSA9IHByZWxvYWRQcm9wc01hcC5nZXQoa2V5KSkgJiYgYWRvcHRQcmVsb2FkUHJvcHNGb3JTdHlsZXNoZWV0KHByb3BzLCBrZXkpOwogICAgICAgICAgICBpbnN0YW5jZSA9IGluc3RhbmNlLmNyZWF0ZUVsZW1lbnQoImxpbmsiKTsKICAgICAgICAgICAgbWFya05vZGVBc0hvaXN0YWJsZShpbnN0YW5jZSk7CiAgICAgICAgICAgIHZhciBsaW5rSW5zdGFuY2UgPSBpbnN0YW5jZTsKICAgICAgICAgICAgbGlua0luc3RhbmNlLl9wID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgbGlua0luc3RhbmNlLm9ubG9hZCA9IHJlc29sdmU7CiAgICAgICAgICAgICAgbGlua0luc3RhbmNlLm9uZXJyb3IgPSByZWplY3Q7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBzZXRJbml0aWFsUHJvcGVydGllcyhpbnN0YW5jZSwgImxpbmsiLCBwcm9wcyk7CiAgICAgICAgICAgIHJlc291cmNlLmluc3RhbmNlID0gaW5zdGFuY2U7CiAgICAgICAgICB9CiAgICAgICAgICBudWxsID09PSBzdGF0ZS5zdHlsZXNoZWV0cyAmJiAoc3RhdGUuc3R5bGVzaGVldHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpKTsKICAgICAgICAgIHN0YXRlLnN0eWxlc2hlZXRzLnNldChyZXNvdXJjZSwgaG9pc3RhYmxlUm9vdCk7CiAgICAgICAgICAoaG9pc3RhYmxlUm9vdCA9IHJlc291cmNlLnN0YXRlLnByZWxvYWQpICYmIChyZXNvdXJjZS5zdGF0ZS5sb2FkaW5nICYgU2V0dGxlZCkgPT09IE5vdExvYWRlZCAmJiAoc3RhdGUuY291bnQrKywgcmVzb3VyY2UgPSBvblVuc3VzcGVuZC5iaW5kKHN0YXRlKSwgaG9pc3RhYmxlUm9vdC5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwgcmVzb3VyY2UpLCBob2lzdGFibGVSb290LmFkZEV2ZW50TGlzdGVuZXIoImVycm9yIiwgcmVzb3VyY2UpKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gd2FpdEZvckNvbW1pdFRvQmVSZWFkeSgpIHsKICAgICAgICBpZiAobnVsbCA9PT0gc3VzcGVuZGVkU3RhdGUpCiAgICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICAgIkludGVybmFsIFJlYWN0IEVycm9yOiBzdXNwZW5kZWRTdGF0ZSBudWxsIHdoZW4gaXQgd2FzIGV4cGVjdGVkIHRvIGV4aXN0cy4gUGxlYXNlIHJlcG9ydCB0aGlzIGFzIGEgUmVhY3QgYnVnLiIKICAgICAgICAgICk7CiAgICAgICAgdmFyIHN0YXRlID0gc3VzcGVuZGVkU3RhdGU7CiAgICAgICAgc3RhdGUuc3R5bGVzaGVldHMgJiYgMCA9PT0gc3RhdGUuY291bnQgJiYgaW5zZXJ0U3VzcGVuZGVkU3R5bGVzaGVldHMoc3RhdGUsIHN0YXRlLnN0eWxlc2hlZXRzKTsKICAgICAgICByZXR1cm4gMCA8IHN0YXRlLmNvdW50ID8gZnVuY3Rpb24oY29tbWl0KSB7CiAgICAgICAgICB2YXIgc3R5bGVzaGVldFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgc3RhdGUuc3R5bGVzaGVldHMgJiYgaW5zZXJ0U3VzcGVuZGVkU3R5bGVzaGVldHMoc3RhdGUsIHN0YXRlLnN0eWxlc2hlZXRzKTsKICAgICAgICAgICAgaWYgKHN0YXRlLnVuc3VzcGVuZCkgewogICAgICAgICAgICAgIHZhciB1bnN1c3BlbmQgPSBzdGF0ZS51bnN1c3BlbmQ7CiAgICAgICAgICAgICAgc3RhdGUudW5zdXNwZW5kID0gbnVsbDsKICAgICAgICAgICAgICB1bnN1c3BlbmQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgNmU0KTsKICAgICAgICAgIHN0YXRlLnVuc3VzcGVuZCA9IGNvbW1pdDsKICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgc3RhdGUudW5zdXNwZW5kID0gbnVsbDsKICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHN0eWxlc2hlZXRUaW1lcik7CiAgICAgICAgICB9OwogICAgICAgIH0gOiBudWxsOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG9uVW5zdXNwZW5kKCkgewogICAgICAgIHRoaXMuY291bnQtLTsKICAgICAgICBpZiAoMCA9PT0gdGhpcy5jb3VudCkgewogICAgICAgICAgaWYgKHRoaXMuc3R5bGVzaGVldHMpCiAgICAgICAgICAgIGluc2VydFN1c3BlbmRlZFN0eWxlc2hlZXRzKHRoaXMsIHRoaXMuc3R5bGVzaGVldHMpOwogICAgICAgICAgZWxzZSBpZiAodGhpcy51bnN1c3BlbmQpIHsKICAgICAgICAgICAgdmFyIHVuc3VzcGVuZCA9IHRoaXMudW5zdXNwZW5kOwogICAgICAgICAgICB0aGlzLnVuc3VzcGVuZCA9IG51bGw7CiAgICAgICAgICAgIHVuc3VzcGVuZCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBpbnNlcnRTdXNwZW5kZWRTdHlsZXNoZWV0cyhzdGF0ZSwgcmVzb3VyY2VzKSB7CiAgICAgICAgc3RhdGUuc3R5bGVzaGVldHMgPSBudWxsOwogICAgICAgIG51bGwgIT09IHN0YXRlLnVuc3VzcGVuZCAmJiAoc3RhdGUuY291bnQrKywgcHJlY2VkZW5jZXNCeVJvb3QgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpLCByZXNvdXJjZXMuZm9yRWFjaChpbnNlcnRTdHlsZXNoZWV0SW50b1Jvb3QsIHN0YXRlKSwgcHJlY2VkZW5jZXNCeVJvb3QgPSBudWxsLCBvblVuc3VzcGVuZC5jYWxsKHN0YXRlKSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gaW5zZXJ0U3R5bGVzaGVldEludG9Sb290KHJvb3QyLCByZXNvdXJjZSkgewogICAgICAgIGlmICghKHJlc291cmNlLnN0YXRlLmxvYWRpbmcgJiBJbnNlcnRlZCkpIHsKICAgICAgICAgIHZhciBwcmVjZWRlbmNlcyA9IHByZWNlZGVuY2VzQnlSb290LmdldChyb290Mik7CiAgICAgICAgICBpZiAocHJlY2VkZW5jZXMpIHZhciBsYXN0ID0gcHJlY2VkZW5jZXMuZ2V0KExBU1RfUFJFQ0VERU5DRSk7CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcHJlY2VkZW5jZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpOwogICAgICAgICAgICBwcmVjZWRlbmNlc0J5Um9vdC5zZXQocm9vdDIsIHByZWNlZGVuY2VzKTsKICAgICAgICAgICAgZm9yICh2YXIgbm9kZXMgPSByb290Mi5xdWVyeVNlbGVjdG9yQWxsKAogICAgICAgICAgICAgICJsaW5rW2RhdGEtcHJlY2VkZW5jZV0sc3R5bGVbZGF0YS1wcmVjZWRlbmNlXSIKICAgICAgICAgICAgKSwgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIHZhciBub2RlID0gbm9kZXNbaV07CiAgICAgICAgICAgICAgaWYgKCJMSU5LIiA9PT0gbm9kZS5ub2RlTmFtZSB8fCAibm90IGFsbCIgIT09IG5vZGUuZ2V0QXR0cmlidXRlKCJtZWRpYSIpKQogICAgICAgICAgICAgICAgcHJlY2VkZW5jZXMuc2V0KG5vZGUuZGF0YXNldC5wcmVjZWRlbmNlLCBub2RlKSwgbGFzdCA9IG5vZGU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGFzdCAmJiBwcmVjZWRlbmNlcy5zZXQoTEFTVF9QUkVDRURFTkNFLCBsYXN0KTsKICAgICAgICAgIH0KICAgICAgICAgIG5vZGVzID0gcmVzb3VyY2UuaW5zdGFuY2U7CiAgICAgICAgICBub2RlID0gbm9kZXMuZ2V0QXR0cmlidXRlKCJkYXRhLXByZWNlZGVuY2UiKTsKICAgICAgICAgIGkgPSBwcmVjZWRlbmNlcy5nZXQobm9kZSkgfHwgbGFzdDsKICAgICAgICAgIGkgPT09IGxhc3QgJiYgcHJlY2VkZW5jZXMuc2V0KExBU1RfUFJFQ0VERU5DRSwgbm9kZXMpOwogICAgICAgICAgcHJlY2VkZW5jZXMuc2V0KG5vZGUsIG5vZGVzKTsKICAgICAgICAgIHRoaXMuY291bnQrKzsKICAgICAgICAgIGxhc3QgPSBvblVuc3VzcGVuZC5iaW5kKHRoaXMpOwogICAgICAgICAgbm9kZXMuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsIGxhc3QpOwogICAgICAgICAgbm9kZXMuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLCBsYXN0KTsKICAgICAgICAgIGkgPyBpLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGVzLCBpLm5leHRTaWJsaW5nKSA6IChyb290MiA9IDkgPT09IHJvb3QyLm5vZGVUeXBlID8gcm9vdDIuaGVhZCA6IHJvb3QyLCByb290Mi5pbnNlcnRCZWZvcmUobm9kZXMsIHJvb3QyLmZpcnN0Q2hpbGQpKTsKICAgICAgICAgIHJlc291cmNlLnN0YXRlLmxvYWRpbmcgfD0gSW5zZXJ0ZWQ7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIEZpYmVyUm9vdE5vZGUoY29udGFpbmVySW5mbywgdGFnLCBoeWRyYXRlLCBpZGVudGlmaWVyUHJlZml4LCBvblVuY2F1Z2h0RXJyb3IsIG9uQ2F1Z2h0RXJyb3IsIG9uUmVjb3ZlcmFibGVFcnJvciwgZm9ybVN0YXRlKSB7CiAgICAgICAgdGhpcy50YWcgPSAxOwogICAgICAgIHRoaXMuY29udGFpbmVySW5mbyA9IGNvbnRhaW5lckluZm87CiAgICAgICAgdGhpcy5waW5nQ2FjaGUgPSB0aGlzLmN1cnJlbnQgPSB0aGlzLnBlbmRpbmdDaGlsZHJlbiA9IG51bGw7CiAgICAgICAgdGhpcy50aW1lb3V0SGFuZGxlID0gbm9UaW1lb3V0OwogICAgICAgIHRoaXMuY2FsbGJhY2tOb2RlID0gdGhpcy5uZXh0ID0gdGhpcy5wZW5kaW5nQ29udGV4dCA9IHRoaXMuY29udGV4dCA9IHRoaXMuY2FuY2VsUGVuZGluZ0NvbW1pdCA9IG51bGw7CiAgICAgICAgdGhpcy5jYWxsYmFja1ByaW9yaXR5ID0gMDsKICAgICAgICB0aGlzLmV4cGlyYXRpb25UaW1lcyA9IGNyZWF0ZUxhbmVNYXAoLTEpOwogICAgICAgIHRoaXMuZW50YW5nbGVkTGFuZXMgPSB0aGlzLnNoZWxsU3VzcGVuZENvdW50ZXIgPSB0aGlzLmVycm9yUmVjb3ZlcnlEaXNhYmxlZExhbmVzID0gdGhpcy5leHBpcmVkTGFuZXMgPSB0aGlzLndhcm1MYW5lcyA9IHRoaXMucGluZ2VkTGFuZXMgPSB0aGlzLnN1c3BlbmRlZExhbmVzID0gdGhpcy5wZW5kaW5nTGFuZXMgPSAwOwogICAgICAgIHRoaXMuZW50YW5nbGVtZW50cyA9IGNyZWF0ZUxhbmVNYXAoMCk7CiAgICAgICAgdGhpcy5oaWRkZW5VcGRhdGVzID0gY3JlYXRlTGFuZU1hcChudWxsKTsKICAgICAgICB0aGlzLmlkZW50aWZpZXJQcmVmaXggPSBpZGVudGlmaWVyUHJlZml4OwogICAgICAgIHRoaXMub25VbmNhdWdodEVycm9yID0gb25VbmNhdWdodEVycm9yOwogICAgICAgIHRoaXMub25DYXVnaHRFcnJvciA9IG9uQ2F1Z2h0RXJyb3I7CiAgICAgICAgdGhpcy5vblJlY292ZXJhYmxlRXJyb3IgPSBvblJlY292ZXJhYmxlRXJyb3I7CiAgICAgICAgdGhpcy5wb29sZWRDYWNoZSA9IG51bGw7CiAgICAgICAgdGhpcy5wb29sZWRDYWNoZUxhbmVzID0gMDsKICAgICAgICB0aGlzLmZvcm1TdGF0ZSA9IGZvcm1TdGF0ZTsKICAgICAgICB0aGlzLmluY29tcGxldGVUcmFuc2l0aW9ucyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgICAgICAgdGhpcy5wYXNzaXZlRWZmZWN0RHVyYXRpb24gPSB0aGlzLmVmZmVjdER1cmF0aW9uID0gLTA7CiAgICAgICAgdGhpcy5tZW1vaXplZFVwZGF0ZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKICAgICAgICBjb250YWluZXJJbmZvID0gdGhpcy5wZW5kaW5nVXBkYXRlcnNMYW5lTWFwID0gW107CiAgICAgICAgZm9yICh0YWcgPSAwOyAzMSA+IHRhZzsgdGFnKyspIGNvbnRhaW5lckluZm8ucHVzaCgvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpKTsKICAgICAgICB0aGlzLl9kZWJ1Z1Jvb3RUeXBlID0gaHlkcmF0ZSA/ICJoeWRyYXRlUm9vdCgpIiA6ICJjcmVhdGVSb290KCkiOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNyZWF0ZUZpYmVyUm9vdChjb250YWluZXJJbmZvLCB0YWcsIGh5ZHJhdGUsIGluaXRpYWxDaGlsZHJlbiwgaHlkcmF0aW9uQ2FsbGJhY2tzLCBpc1N0cmljdE1vZGUsIGlkZW50aWZpZXJQcmVmaXgsIG9uVW5jYXVnaHRFcnJvciwgb25DYXVnaHRFcnJvciwgb25SZWNvdmVyYWJsZUVycm9yLCB0cmFuc2l0aW9uQ2FsbGJhY2tzLCBmb3JtU3RhdGUpIHsKICAgICAgICBjb250YWluZXJJbmZvID0gbmV3IEZpYmVyUm9vdE5vZGUoCiAgICAgICAgICBjb250YWluZXJJbmZvLAogICAgICAgICAgdGFnLAogICAgICAgICAgaHlkcmF0ZSwKICAgICAgICAgIGlkZW50aWZpZXJQcmVmaXgsCiAgICAgICAgICBvblVuY2F1Z2h0RXJyb3IsCiAgICAgICAgICBvbkNhdWdodEVycm9yLAogICAgICAgICAgb25SZWNvdmVyYWJsZUVycm9yLAogICAgICAgICAgZm9ybVN0YXRlCiAgICAgICAgKTsKICAgICAgICB0YWcgPSBDb25jdXJyZW50TW9kZTsKICAgICAgICB0cnVlID09PSBpc1N0cmljdE1vZGUgJiYgKHRhZyB8PSBTdHJpY3RMZWdhY3lNb2RlIHwgU3RyaWN0RWZmZWN0c01vZGUpOwogICAgICAgIGlzRGV2VG9vbHNQcmVzZW50ICYmICh0YWcgfD0gUHJvZmlsZU1vZGUpOwogICAgICAgIGlzU3RyaWN0TW9kZSA9IGNyZWF0ZUZpYmVyKDMsIG51bGwsIG51bGwsIHRhZyk7CiAgICAgICAgY29udGFpbmVySW5mby5jdXJyZW50ID0gaXNTdHJpY3RNb2RlOwogICAgICAgIGlzU3RyaWN0TW9kZS5zdGF0ZU5vZGUgPSBjb250YWluZXJJbmZvOwogICAgICAgIHRhZyA9IGNyZWF0ZUNhY2hlKCk7CiAgICAgICAgcmV0YWluQ2FjaGUodGFnKTsKICAgICAgICBjb250YWluZXJJbmZvLnBvb2xlZENhY2hlID0gdGFnOwogICAgICAgIHJldGFpbkNhY2hlKHRhZyk7CiAgICAgICAgaXNTdHJpY3RNb2RlLm1lbW9pemVkU3RhdGUgPSB7CiAgICAgICAgICBlbGVtZW50OiBpbml0aWFsQ2hpbGRyZW4sCiAgICAgICAgICBpc0RlaHlkcmF0ZWQ6IGh5ZHJhdGUsCiAgICAgICAgICBjYWNoZTogdGFnCiAgICAgICAgfTsKICAgICAgICBpbml0aWFsaXplVXBkYXRlUXVldWUoaXNTdHJpY3RNb2RlKTsKICAgICAgICByZXR1cm4gY29udGFpbmVySW5mbzsKICAgICAgfQogICAgICBmdW5jdGlvbiBnZXRDb250ZXh0Rm9yU3VidHJlZShwYXJlbnRDb21wb25lbnQpIHsKICAgICAgICBpZiAoIXBhcmVudENvbXBvbmVudCkgcmV0dXJuIGVtcHR5Q29udGV4dE9iamVjdDsKICAgICAgICBwYXJlbnRDb21wb25lbnQgPSBlbXB0eUNvbnRleHRPYmplY3Q7CiAgICAgICAgcmV0dXJuIHBhcmVudENvbXBvbmVudDsKICAgICAgfQogICAgICBmdW5jdGlvbiB1cGRhdGVDb250YWluZXJJbXBsKHJvb3RGaWJlciwgbGFuZSwgZWxlbWVudCwgY29udGFpbmVyLCBwYXJlbnRDb21wb25lbnQsIGNhbGxiYWNrKSB7CiAgICAgICAgaWYgKGluamVjdGVkSG9vayAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgaW5qZWN0ZWRIb29rLm9uU2NoZWR1bGVGaWJlclJvb3QpCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBpbmplY3RlZEhvb2sub25TY2hlZHVsZUZpYmVyUm9vdChyZW5kZXJlcklELCBjb250YWluZXIsIGVsZW1lbnQpOwogICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIGhhc0xvZ2dlZEVycm9yIHx8IChoYXNMb2dnZWRFcnJvciA9IHRydWUsIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgIlJlYWN0IGluc3RydW1lbnRhdGlvbiBlbmNvdW50ZXJlZCBhbiBlcnJvcjogJXMiLAogICAgICAgICAgICAgIGVycgogICAgICAgICAgICApKTsKICAgICAgICAgIH0KICAgICAgICBudWxsICE9PSBpbmplY3RlZFByb2ZpbGluZ0hvb2tzICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBpbmplY3RlZFByb2ZpbGluZ0hvb2tzLm1hcmtSZW5kZXJTY2hlZHVsZWQgJiYgaW5qZWN0ZWRQcm9maWxpbmdIb29rcy5tYXJrUmVuZGVyU2NoZWR1bGVkKGxhbmUpOwogICAgICAgIHBhcmVudENvbXBvbmVudCA9IGdldENvbnRleHRGb3JTdWJ0cmVlKHBhcmVudENvbXBvbmVudCk7CiAgICAgICAgbnVsbCA9PT0gY29udGFpbmVyLmNvbnRleHQgPyBjb250YWluZXIuY29udGV4dCA9IHBhcmVudENvbXBvbmVudCA6IGNvbnRhaW5lci5wZW5kaW5nQ29udGV4dCA9IHBhcmVudENvbXBvbmVudDsKICAgICAgICBpc1JlbmRlcmluZyAmJiBudWxsICE9PSBjdXJyZW50ICYmICFkaWRXYXJuQWJvdXROZXN0ZWRVcGRhdGVzICYmIChkaWRXYXJuQWJvdXROZXN0ZWRVcGRhdGVzID0gdHJ1ZSwgY29uc29sZS5lcnJvcigKICAgICAgICAgICJSZW5kZXIgbWV0aG9kcyBzaG91bGQgYmUgYSBwdXJlIGZ1bmN0aW9uIG9mIHByb3BzIGFuZCBzdGF0ZTsgdHJpZ2dlcmluZyBuZXN0ZWQgY29tcG9uZW50IHVwZGF0ZXMgZnJvbSByZW5kZXIgaXMgbm90IGFsbG93ZWQuIElmIG5lY2Vzc2FyeSwgdHJpZ2dlciBuZXN0ZWQgdXBkYXRlcyBpbiBjb21wb25lbnREaWRVcGRhdGUuXG5cbkNoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mICVzLiIsCiAgICAgICAgICBnZXRDb21wb25lbnROYW1lRnJvbUZpYmVyKGN1cnJlbnQpIHx8ICJVbmtub3duIgogICAgICAgICkpOwogICAgICAgIGNvbnRhaW5lciA9IGNyZWF0ZVVwZGF0ZShsYW5lKTsKICAgICAgICBjb250YWluZXIucGF5bG9hZCA9IHsgZWxlbWVudCB9OwogICAgICAgIGNhbGxiYWNrID0gdm9pZCAwID09PSBjYWxsYmFjayA/IG51bGwgOiBjYWxsYmFjazsKICAgICAgICBudWxsICE9PSBjYWxsYmFjayAmJiAoImZ1bmN0aW9uIiAhPT0gdHlwZW9mIGNhbGxiYWNrICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiRXhwZWN0ZWQgdGhlIGxhc3Qgb3B0aW9uYWwgYGNhbGxiYWNrYCBhcmd1bWVudCB0byBiZSBhIGZ1bmN0aW9uLiBJbnN0ZWFkIHJlY2VpdmVkOiAlcy4iLAogICAgICAgICAgY2FsbGJhY2sKICAgICAgICApLCBjb250YWluZXIuY2FsbGJhY2sgPSBjYWxsYmFjayk7CiAgICAgICAgZWxlbWVudCA9IGVucXVldWVVcGRhdGUocm9vdEZpYmVyLCBjb250YWluZXIsIGxhbmUpOwogICAgICAgIG51bGwgIT09IGVsZW1lbnQgJiYgKHNjaGVkdWxlVXBkYXRlT25GaWJlcihlbGVtZW50LCByb290RmliZXIsIGxhbmUpLCBlbnRhbmdsZVRyYW5zaXRpb25zKGVsZW1lbnQsIHJvb3RGaWJlciwgbGFuZSkpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1hcmtSZXRyeUxhbmVJbXBsKGZpYmVyLCByZXRyeUxhbmUpIHsKICAgICAgICBmaWJlciA9IGZpYmVyLm1lbW9pemVkU3RhdGU7CiAgICAgICAgaWYgKG51bGwgIT09IGZpYmVyICYmIG51bGwgIT09IGZpYmVyLmRlaHlkcmF0ZWQpIHsKICAgICAgICAgIHZhciBhID0gZmliZXIucmV0cnlMYW5lOwogICAgICAgICAgZmliZXIucmV0cnlMYW5lID0gMCAhPT0gYSAmJiBhIDwgcmV0cnlMYW5lID8gYSA6IHJldHJ5TGFuZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbWFya1JldHJ5TGFuZUlmTm90SHlkcmF0ZWQoZmliZXIsIHJldHJ5TGFuZSkgewogICAgICAgIG1hcmtSZXRyeUxhbmVJbXBsKGZpYmVyLCByZXRyeUxhbmUpOwogICAgICAgIChmaWJlciA9IGZpYmVyLmFsdGVybmF0ZSkgJiYgbWFya1JldHJ5TGFuZUltcGwoZmliZXIsIHJldHJ5TGFuZSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gYXR0ZW1wdENvbnRpbnVvdXNIeWRyYXRpb24oZmliZXIpIHsKICAgICAgICBpZiAoMTMgPT09IGZpYmVyLnRhZykgewogICAgICAgICAgdmFyIHJvb3QyID0gZW5xdWV1ZUNvbmN1cnJlbnRSZW5kZXJGb3JMYW5lKGZpYmVyLCA2NzEwODg2NCk7CiAgICAgICAgICBudWxsICE9PSByb290MiAmJiBzY2hlZHVsZVVwZGF0ZU9uRmliZXIocm9vdDIsIGZpYmVyLCA2NzEwODg2NCk7CiAgICAgICAgICBtYXJrUmV0cnlMYW5lSWZOb3RIeWRyYXRlZChmaWJlciwgNjcxMDg4NjQpOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBnZXRDdXJyZW50RmliZXJGb3JEZXZUb29scygpIHsKICAgICAgICByZXR1cm4gY3VycmVudDsKICAgICAgfQogICAgICBmdW5jdGlvbiBnZXRMYW5lTGFiZWxNYXAoKSB7CiAgICAgICAgZm9yICh2YXIgbWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSwgbGFuZSA9IDEsIGluZGV4ID0gMDsgMzEgPiBpbmRleDsgaW5kZXgrKykgewogICAgICAgICAgdmFyIGxhYmVsID0gZ2V0TGFiZWxGb3JMYW5lKGxhbmUpOwogICAgICAgICAgbWFwLnNldChsYW5lLCBsYWJlbCk7CiAgICAgICAgICBsYW5lICo9IDI7CiAgICAgICAgfQogICAgICAgIHJldHVybiBtYXA7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZGlzcGF0Y2hEaXNjcmV0ZUV2ZW50KGRvbUV2ZW50TmFtZSwgZXZlbnRTeXN0ZW1GbGFncywgY29udGFpbmVyLCBuYXRpdmVFdmVudCkgewogICAgICAgIHZhciBwcmV2VHJhbnNpdGlvbiA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLlQ7CiAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuVCA9IG51bGw7CiAgICAgICAgdmFyIHByZXZpb3VzUHJpb3JpdHkgPSBSZWFjdERPTVNoYXJlZEludGVybmFscy5wOwogICAgICAgIHRyeSB7CiAgICAgICAgICBSZWFjdERPTVNoYXJlZEludGVybmFscy5wID0gRGlzY3JldGVFdmVudFByaW9yaXR5LCBkaXNwYXRjaEV2ZW50KGRvbUV2ZW50TmFtZSwgZXZlbnRTeXN0ZW1GbGFncywgY29udGFpbmVyLCBuYXRpdmVFdmVudCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIFJlYWN0RE9NU2hhcmVkSW50ZXJuYWxzLnAgPSBwcmV2aW91c1ByaW9yaXR5LCBSZWFjdFNoYXJlZEludGVybmFscy5UID0gcHJldlRyYW5zaXRpb247CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGRpc3BhdGNoQ29udGludW91c0V2ZW50KGRvbUV2ZW50TmFtZSwgZXZlbnRTeXN0ZW1GbGFncywgY29udGFpbmVyLCBuYXRpdmVFdmVudCkgewogICAgICAgIHZhciBwcmV2VHJhbnNpdGlvbiA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLlQ7CiAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuVCA9IG51bGw7CiAgICAgICAgdmFyIHByZXZpb3VzUHJpb3JpdHkgPSBSZWFjdERPTVNoYXJlZEludGVybmFscy5wOwogICAgICAgIHRyeSB7CiAgICAgICAgICBSZWFjdERPTVNoYXJlZEludGVybmFscy5wID0gQ29udGludW91c0V2ZW50UHJpb3JpdHksIGRpc3BhdGNoRXZlbnQoZG9tRXZlbnROYW1lLCBldmVudFN5c3RlbUZsYWdzLCBjb250YWluZXIsIG5hdGl2ZUV2ZW50KTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgUmVhY3RET01TaGFyZWRJbnRlcm5hbHMucCA9IHByZXZpb3VzUHJpb3JpdHksIFJlYWN0U2hhcmVkSW50ZXJuYWxzLlQgPSBwcmV2VHJhbnNpdGlvbjsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZGlzcGF0Y2hFdmVudChkb21FdmVudE5hbWUsIGV2ZW50U3lzdGVtRmxhZ3MsIHRhcmdldENvbnRhaW5lciwgbmF0aXZlRXZlbnQpIHsKICAgICAgICBpZiAoX2VuYWJsZWQpIHsKICAgICAgICAgIHZhciBibG9ja2VkT24gPSBmaW5kSW5zdGFuY2VCbG9ja2luZ0V2ZW50KG5hdGl2ZUV2ZW50KTsKICAgICAgICAgIGlmIChudWxsID09PSBibG9ja2VkT24pCiAgICAgICAgICAgIGRpc3BhdGNoRXZlbnRGb3JQbHVnaW5FdmVudFN5c3RlbSgKICAgICAgICAgICAgICBkb21FdmVudE5hbWUsCiAgICAgICAgICAgICAgZXZlbnRTeXN0ZW1GbGFncywKICAgICAgICAgICAgICBuYXRpdmVFdmVudCwKICAgICAgICAgICAgICByZXR1cm5fdGFyZ2V0SW5zdCwKICAgICAgICAgICAgICB0YXJnZXRDb250YWluZXIKICAgICAgICAgICAgKSwgY2xlYXJJZkNvbnRpbnVvdXNFdmVudChkb21FdmVudE5hbWUsIG5hdGl2ZUV2ZW50KTsKICAgICAgICAgIGVsc2UgaWYgKHF1ZXVlSWZDb250aW51b3VzRXZlbnQoCiAgICAgICAgICAgIGJsb2NrZWRPbiwKICAgICAgICAgICAgZG9tRXZlbnROYW1lLAogICAgICAgICAgICBldmVudFN5c3RlbUZsYWdzLAogICAgICAgICAgICB0YXJnZXRDb250YWluZXIsCiAgICAgICAgICAgIG5hdGl2ZUV2ZW50CiAgICAgICAgICApKQogICAgICAgICAgICBuYXRpdmVFdmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgIGVsc2UgaWYgKGNsZWFySWZDb250aW51b3VzRXZlbnQoZG9tRXZlbnROYW1lLCBuYXRpdmVFdmVudCksIGV2ZW50U3lzdGVtRmxhZ3MgJiA0ICYmIC0xIDwgZGlzY3JldGVSZXBsYXlhYmxlRXZlbnRzLmluZGV4T2YoZG9tRXZlbnROYW1lKSkgewogICAgICAgICAgICBmb3IgKDsgbnVsbCAhPT0gYmxvY2tlZE9uOyApIHsKICAgICAgICAgICAgICB2YXIgZmliZXIgPSBnZXRJbnN0YW5jZUZyb21Ob2RlKGJsb2NrZWRPbik7CiAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGZpYmVyKQogICAgICAgICAgICAgICAgc3dpdGNoIChmaWJlci50YWcpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgIGZpYmVyID0gZmliZXIuc3RhdGVOb2RlOwogICAgICAgICAgICAgICAgICAgIGlmIChmaWJlci5jdXJyZW50Lm1lbW9pemVkU3RhdGUuaXNEZWh5ZHJhdGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFuZXMgPSBnZXRIaWdoZXN0UHJpb3JpdHlMYW5lcyhmaWJlci5wZW5kaW5nTGFuZXMpOwogICAgICAgICAgICAgICAgICAgICAgaWYgKDAgIT09IGxhbmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByb290MiA9IGZpYmVyOwogICAgICAgICAgICAgICAgICAgICAgICByb290Mi5wZW5kaW5nTGFuZXMgfD0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChyb290Mi5lbnRhbmdsZWRMYW5lcyB8PSAyOyBsYW5lczsgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhbmUgPSAxIDw8IDMxIC0gY2x6MzIobGFuZXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QyLmVudGFuZ2xlbWVudHNbMV0gfD0gbGFuZTsKICAgICAgICAgICAgICAgICAgICAgICAgICBsYW5lcyAmPSB+bGFuZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbnN1cmVSb290SXNTY2hlZHVsZWQoZmliZXIpOwogICAgICAgICAgICAgICAgICAgICAgICAoZXhlY3V0aW9uQ29udGV4dCAmIChSZW5kZXJDb250ZXh0IHwgQ29tbWl0Q29udGV4dCkpID09PSBOb0NvbnRleHQgJiYgKHdvcmtJblByb2dyZXNzUm9vdFJlbmRlclRhcmdldFRpbWUgPSBub3ckMSgpICsgUkVOREVSX1RJTUVPVVRfTVMsIGZsdXNoU3luY1dvcmtBY3Jvc3NSb290c19pbXBsKDAsIGZhbHNlKSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICAgIHJvb3QyID0gZW5xdWV1ZUNvbmN1cnJlbnRSZW5kZXJGb3JMYW5lKGZpYmVyLCAyKSwgbnVsbCAhPT0gcm9vdDIgJiYgc2NoZWR1bGVVcGRhdGVPbkZpYmVyKHJvb3QyLCBmaWJlciwgMiksIGZsdXNoU3luY1dvcmskMSgpLCBtYXJrUmV0cnlMYW5lSWZOb3RIeWRyYXRlZChmaWJlciwgMik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZmliZXIgPSBmaW5kSW5zdGFuY2VCbG9ja2luZ0V2ZW50KG5hdGl2ZUV2ZW50KTsKICAgICAgICAgICAgICBudWxsID09PSBmaWJlciAmJiBkaXNwYXRjaEV2ZW50Rm9yUGx1Z2luRXZlbnRTeXN0ZW0oCiAgICAgICAgICAgICAgICBkb21FdmVudE5hbWUsCiAgICAgICAgICAgICAgICBldmVudFN5c3RlbUZsYWdzLAogICAgICAgICAgICAgICAgbmF0aXZlRXZlbnQsCiAgICAgICAgICAgICAgICByZXR1cm5fdGFyZ2V0SW5zdCwKICAgICAgICAgICAgICAgIHRhcmdldENvbnRhaW5lcgogICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgaWYgKGZpYmVyID09PSBibG9ja2VkT24pIGJyZWFrOwogICAgICAgICAgICAgIGJsb2NrZWRPbiA9IGZpYmVyOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG51bGwgIT09IGJsb2NrZWRPbiAmJiBuYXRpdmVFdmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICBkaXNwYXRjaEV2ZW50Rm9yUGx1Z2luRXZlbnRTeXN0ZW0oCiAgICAgICAgICAgICAgZG9tRXZlbnROYW1lLAogICAgICAgICAgICAgIGV2ZW50U3lzdGVtRmxhZ3MsCiAgICAgICAgICAgICAgbmF0aXZlRXZlbnQsCiAgICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgICB0YXJnZXRDb250YWluZXIKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZmluZEluc3RhbmNlQmxvY2tpbmdFdmVudChuYXRpdmVFdmVudCkgewogICAgICAgIG5hdGl2ZUV2ZW50ID0gZ2V0RXZlbnRUYXJnZXQobmF0aXZlRXZlbnQpOwogICAgICAgIHJldHVybiBmaW5kSW5zdGFuY2VCbG9ja2luZ1RhcmdldChuYXRpdmVFdmVudCk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZmluZEluc3RhbmNlQmxvY2tpbmdUYXJnZXQodGFyZ2V0Tm9kZSkgewogICAgICAgIHJldHVybl90YXJnZXRJbnN0ID0gbnVsbDsKICAgICAgICB0YXJnZXROb2RlID0gZ2V0Q2xvc2VzdEluc3RhbmNlRnJvbU5vZGUodGFyZ2V0Tm9kZSk7CiAgICAgICAgaWYgKG51bGwgIT09IHRhcmdldE5vZGUpIHsKICAgICAgICAgIHZhciBuZWFyZXN0TW91bnRlZCA9IGdldE5lYXJlc3RNb3VudGVkRmliZXIodGFyZ2V0Tm9kZSk7CiAgICAgICAgICBpZiAobnVsbCA9PT0gbmVhcmVzdE1vdW50ZWQpIHRhcmdldE5vZGUgPSBudWxsOwogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHZhciB0YWcgPSBuZWFyZXN0TW91bnRlZC50YWc7CiAgICAgICAgICAgIGlmICgxMyA9PT0gdGFnKSB7CiAgICAgICAgICAgICAgdGFyZ2V0Tm9kZSA9IGdldFN1c3BlbnNlSW5zdGFuY2VGcm9tRmliZXIobmVhcmVzdE1vdW50ZWQpOwogICAgICAgICAgICAgIGlmIChudWxsICE9PSB0YXJnZXROb2RlKSByZXR1cm4gdGFyZ2V0Tm9kZTsKICAgICAgICAgICAgICB0YXJnZXROb2RlID0gbnVsbDsKICAgICAgICAgICAgfSBlbHNlIGlmICgzID09PSB0YWcpIHsKICAgICAgICAgICAgICBpZiAobmVhcmVzdE1vdW50ZWQuc3RhdGVOb2RlLmN1cnJlbnQubWVtb2l6ZWRTdGF0ZS5pc0RlaHlkcmF0ZWQpCiAgICAgICAgICAgICAgICByZXR1cm4gMyA9PT0gbmVhcmVzdE1vdW50ZWQudGFnID8gbmVhcmVzdE1vdW50ZWQuc3RhdGVOb2RlLmNvbnRhaW5lckluZm8gOiBudWxsOwogICAgICAgICAgICAgIHRhcmdldE5vZGUgPSBudWxsOwogICAgICAgICAgICB9IGVsc2UgbmVhcmVzdE1vdW50ZWQgIT09IHRhcmdldE5vZGUgJiYgKHRhcmdldE5vZGUgPSBudWxsKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuX3RhcmdldEluc3QgPSB0YXJnZXROb2RlOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldEV2ZW50UHJpb3JpdHkoZG9tRXZlbnROYW1lKSB7CiAgICAgICAgc3dpdGNoIChkb21FdmVudE5hbWUpIHsKICAgICAgICAgIGNhc2UgImJlZm9yZXRvZ2dsZSI6CiAgICAgICAgICBjYXNlICJjYW5jZWwiOgogICAgICAgICAgY2FzZSAiY2xpY2siOgogICAgICAgICAgY2FzZSAiY2xvc2UiOgogICAgICAgICAgY2FzZSAiY29udGV4dG1lbnUiOgogICAgICAgICAgY2FzZSAiY29weSI6CiAgICAgICAgICBjYXNlICJjdXQiOgogICAgICAgICAgY2FzZSAiYXV4Y2xpY2siOgogICAgICAgICAgY2FzZSAiZGJsY2xpY2siOgogICAgICAgICAgY2FzZSAiZHJhZ2VuZCI6CiAgICAgICAgICBjYXNlICJkcmFnc3RhcnQiOgogICAgICAgICAgY2FzZSAiZHJvcCI6CiAgICAgICAgICBjYXNlICJmb2N1c2luIjoKICAgICAgICAgIGNhc2UgImZvY3Vzb3V0IjoKICAgICAgICAgIGNhc2UgImlucHV0IjoKICAgICAgICAgIGNhc2UgImludmFsaWQiOgogICAgICAgICAgY2FzZSAia2V5ZG93biI6CiAgICAgICAgICBjYXNlICJrZXlwcmVzcyI6CiAgICAgICAgICBjYXNlICJrZXl1cCI6CiAgICAgICAgICBjYXNlICJtb3VzZWRvd24iOgogICAgICAgICAgY2FzZSAibW91c2V1cCI6CiAgICAgICAgICBjYXNlICJwYXN0ZSI6CiAgICAgICAgICBjYXNlICJwYXVzZSI6CiAgICAgICAgICBjYXNlICJwbGF5IjoKICAgICAgICAgIGNhc2UgInBvaW50ZXJjYW5jZWwiOgogICAgICAgICAgY2FzZSAicG9pbnRlcmRvd24iOgogICAgICAgICAgY2FzZSAicG9pbnRlcnVwIjoKICAgICAgICAgIGNhc2UgInJhdGVjaGFuZ2UiOgogICAgICAgICAgY2FzZSAicmVzZXQiOgogICAgICAgICAgY2FzZSAicmVzaXplIjoKICAgICAgICAgIGNhc2UgInNlZWtlZCI6CiAgICAgICAgICBjYXNlICJzdWJtaXQiOgogICAgICAgICAgY2FzZSAidG9nZ2xlIjoKICAgICAgICAgIGNhc2UgInRvdWNoY2FuY2VsIjoKICAgICAgICAgIGNhc2UgInRvdWNoZW5kIjoKICAgICAgICAgIGNhc2UgInRvdWNoc3RhcnQiOgogICAgICAgICAgY2FzZSAidm9sdW1lY2hhbmdlIjoKICAgICAgICAgIGNhc2UgImNoYW5nZSI6CiAgICAgICAgICBjYXNlICJzZWxlY3Rpb25jaGFuZ2UiOgogICAgICAgICAgY2FzZSAidGV4dElucHV0IjoKICAgICAgICAgIGNhc2UgImNvbXBvc2l0aW9uc3RhcnQiOgogICAgICAgICAgY2FzZSAiY29tcG9zaXRpb25lbmQiOgogICAgICAgICAgY2FzZSAiY29tcG9zaXRpb251cGRhdGUiOgogICAgICAgICAgY2FzZSAiYmVmb3JlYmx1ciI6CiAgICAgICAgICBjYXNlICJhZnRlcmJsdXIiOgogICAgICAgICAgY2FzZSAiYmVmb3JlaW5wdXQiOgogICAgICAgICAgY2FzZSAiYmx1ciI6CiAgICAgICAgICBjYXNlICJmdWxsc2NyZWVuY2hhbmdlIjoKICAgICAgICAgIGNhc2UgImZvY3VzIjoKICAgICAgICAgIGNhc2UgImhhc2hjaGFuZ2UiOgogICAgICAgICAgY2FzZSAicG9wc3RhdGUiOgogICAgICAgICAgY2FzZSAic2VsZWN0IjoKICAgICAgICAgIGNhc2UgInNlbGVjdHN0YXJ0IjoKICAgICAgICAgICAgcmV0dXJuIERpc2NyZXRlRXZlbnRQcmlvcml0eTsKICAgICAgICAgIGNhc2UgImRyYWciOgogICAgICAgICAgY2FzZSAiZHJhZ2VudGVyIjoKICAgICAgICAgIGNhc2UgImRyYWdleGl0IjoKICAgICAgICAgIGNhc2UgImRyYWdsZWF2ZSI6CiAgICAgICAgICBjYXNlICJkcmFnb3ZlciI6CiAgICAgICAgICBjYXNlICJtb3VzZW1vdmUiOgogICAgICAgICAgY2FzZSAibW91c2VvdXQiOgogICAgICAgICAgY2FzZSAibW91c2VvdmVyIjoKICAgICAgICAgIGNhc2UgInBvaW50ZXJtb3ZlIjoKICAgICAgICAgIGNhc2UgInBvaW50ZXJvdXQiOgogICAgICAgICAgY2FzZSAicG9pbnRlcm92ZXIiOgogICAgICAgICAgY2FzZSAic2Nyb2xsIjoKICAgICAgICAgIGNhc2UgInRvdWNobW92ZSI6CiAgICAgICAgICBjYXNlICJ3aGVlbCI6CiAgICAgICAgICBjYXNlICJtb3VzZWVudGVyIjoKICAgICAgICAgIGNhc2UgIm1vdXNlbGVhdmUiOgogICAgICAgICAgY2FzZSAicG9pbnRlcmVudGVyIjoKICAgICAgICAgIGNhc2UgInBvaW50ZXJsZWF2ZSI6CiAgICAgICAgICAgIHJldHVybiBDb250aW51b3VzRXZlbnRQcmlvcml0eTsKICAgICAgICAgIGNhc2UgIm1lc3NhZ2UiOgogICAgICAgICAgICBzd2l0Y2ggKGdldEN1cnJlbnRQcmlvcml0eUxldmVsKCkpIHsKICAgICAgICAgICAgICBjYXNlIEltbWVkaWF0ZVByaW9yaXR5OgogICAgICAgICAgICAgICAgcmV0dXJuIERpc2NyZXRlRXZlbnRQcmlvcml0eTsKICAgICAgICAgICAgICBjYXNlIFVzZXJCbG9ja2luZ1ByaW9yaXR5OgogICAgICAgICAgICAgICAgcmV0dXJuIENvbnRpbnVvdXNFdmVudFByaW9yaXR5OwogICAgICAgICAgICAgIGNhc2UgTm9ybWFsUHJpb3JpdHkkMToKICAgICAgICAgICAgICBjYXNlIExvd1ByaW9yaXR5OgogICAgICAgICAgICAgICAgcmV0dXJuIERlZmF1bHRFdmVudFByaW9yaXR5OwogICAgICAgICAgICAgIGNhc2UgSWRsZVByaW9yaXR5OgogICAgICAgICAgICAgICAgcmV0dXJuIElkbGVFdmVudFByaW9yaXR5OwogICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm4gRGVmYXVsdEV2ZW50UHJpb3JpdHk7CiAgICAgICAgICAgIH0KICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJldHVybiBEZWZhdWx0RXZlbnRQcmlvcml0eTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY2xlYXJJZkNvbnRpbnVvdXNFdmVudChkb21FdmVudE5hbWUsIG5hdGl2ZUV2ZW50KSB7CiAgICAgICAgc3dpdGNoIChkb21FdmVudE5hbWUpIHsKICAgICAgICAgIGNhc2UgImZvY3VzaW4iOgogICAgICAgICAgY2FzZSAiZm9jdXNvdXQiOgogICAgICAgICAgICBxdWV1ZWRGb2N1cyA9IG51bGw7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiZHJhZ2VudGVyIjoKICAgICAgICAgIGNhc2UgImRyYWdsZWF2ZSI6CiAgICAgICAgICAgIHF1ZXVlZERyYWcgPSBudWxsOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgIm1vdXNlb3ZlciI6CiAgICAgICAgICBjYXNlICJtb3VzZW91dCI6CiAgICAgICAgICAgIHF1ZXVlZE1vdXNlID0gbnVsbDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJwb2ludGVyb3ZlciI6CiAgICAgICAgICBjYXNlICJwb2ludGVyb3V0IjoKICAgICAgICAgICAgcXVldWVkUG9pbnRlcnMuZGVsZXRlKG5hdGl2ZUV2ZW50LnBvaW50ZXJJZCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiZ290cG9pbnRlcmNhcHR1cmUiOgogICAgICAgICAgY2FzZSAibG9zdHBvaW50ZXJjYXB0dXJlIjoKICAgICAgICAgICAgcXVldWVkUG9pbnRlckNhcHR1cmVzLmRlbGV0ZShuYXRpdmVFdmVudC5wb2ludGVySWQpOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBhY2N1bXVsYXRlT3JDcmVhdGVDb250aW51b3VzUXVldWVkUmVwbGF5YWJsZUV2ZW50KGV4aXN0aW5nUXVldWVkRXZlbnQsIGJsb2NrZWRPbiwgZG9tRXZlbnROYW1lLCBldmVudFN5c3RlbUZsYWdzLCB0YXJnZXRDb250YWluZXIsIG5hdGl2ZUV2ZW50KSB7CiAgICAgICAgaWYgKG51bGwgPT09IGV4aXN0aW5nUXVldWVkRXZlbnQgfHwgZXhpc3RpbmdRdWV1ZWRFdmVudC5uYXRpdmVFdmVudCAhPT0gbmF0aXZlRXZlbnQpCiAgICAgICAgICByZXR1cm4gZXhpc3RpbmdRdWV1ZWRFdmVudCA9IHsKICAgICAgICAgICAgYmxvY2tlZE9uLAogICAgICAgICAgICBkb21FdmVudE5hbWUsCiAgICAgICAgICAgIGV2ZW50U3lzdGVtRmxhZ3MsCiAgICAgICAgICAgIG5hdGl2ZUV2ZW50LAogICAgICAgICAgICB0YXJnZXRDb250YWluZXJzOiBbdGFyZ2V0Q29udGFpbmVyXQogICAgICAgICAgfSwgbnVsbCAhPT0gYmxvY2tlZE9uICYmIChibG9ja2VkT24gPSBnZXRJbnN0YW5jZUZyb21Ob2RlKGJsb2NrZWRPbiksIG51bGwgIT09IGJsb2NrZWRPbiAmJiBhdHRlbXB0Q29udGludW91c0h5ZHJhdGlvbihibG9ja2VkT24pKSwgZXhpc3RpbmdRdWV1ZWRFdmVudDsKICAgICAgICBleGlzdGluZ1F1ZXVlZEV2ZW50LmV2ZW50U3lzdGVtRmxhZ3MgfD0gZXZlbnRTeXN0ZW1GbGFnczsKICAgICAgICBibG9ja2VkT24gPSBleGlzdGluZ1F1ZXVlZEV2ZW50LnRhcmdldENvbnRhaW5lcnM7CiAgICAgICAgbnVsbCAhPT0gdGFyZ2V0Q29udGFpbmVyICYmIC0xID09PSBibG9ja2VkT24uaW5kZXhPZih0YXJnZXRDb250YWluZXIpICYmIGJsb2NrZWRPbi5wdXNoKHRhcmdldENvbnRhaW5lcik7CiAgICAgICAgcmV0dXJuIGV4aXN0aW5nUXVldWVkRXZlbnQ7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcXVldWVJZkNvbnRpbnVvdXNFdmVudChibG9ja2VkT24sIGRvbUV2ZW50TmFtZSwgZXZlbnRTeXN0ZW1GbGFncywgdGFyZ2V0Q29udGFpbmVyLCBuYXRpdmVFdmVudCkgewogICAgICAgIHN3aXRjaCAoZG9tRXZlbnROYW1lKSB7CiAgICAgICAgICBjYXNlICJmb2N1c2luIjoKICAgICAgICAgICAgcmV0dXJuIHF1ZXVlZEZvY3VzID0gYWNjdW11bGF0ZU9yQ3JlYXRlQ29udGludW91c1F1ZXVlZFJlcGxheWFibGVFdmVudCgKICAgICAgICAgICAgICBxdWV1ZWRGb2N1cywKICAgICAgICAgICAgICBibG9ja2VkT24sCiAgICAgICAgICAgICAgZG9tRXZlbnROYW1lLAogICAgICAgICAgICAgIGV2ZW50U3lzdGVtRmxhZ3MsCiAgICAgICAgICAgICAgdGFyZ2V0Q29udGFpbmVyLAogICAgICAgICAgICAgIG5hdGl2ZUV2ZW50CiAgICAgICAgICAgICksIHRydWU7CiAgICAgICAgICBjYXNlICJkcmFnZW50ZXIiOgogICAgICAgICAgICByZXR1cm4gcXVldWVkRHJhZyA9IGFjY3VtdWxhdGVPckNyZWF0ZUNvbnRpbnVvdXNRdWV1ZWRSZXBsYXlhYmxlRXZlbnQoCiAgICAgICAgICAgICAgcXVldWVkRHJhZywKICAgICAgICAgICAgICBibG9ja2VkT24sCiAgICAgICAgICAgICAgZG9tRXZlbnROYW1lLAogICAgICAgICAgICAgIGV2ZW50U3lzdGVtRmxhZ3MsCiAgICAgICAgICAgICAgdGFyZ2V0Q29udGFpbmVyLAogICAgICAgICAgICAgIG5hdGl2ZUV2ZW50CiAgICAgICAgICAgICksIHRydWU7CiAgICAgICAgICBjYXNlICJtb3VzZW92ZXIiOgogICAgICAgICAgICByZXR1cm4gcXVldWVkTW91c2UgPSBhY2N1bXVsYXRlT3JDcmVhdGVDb250aW51b3VzUXVldWVkUmVwbGF5YWJsZUV2ZW50KAogICAgICAgICAgICAgIHF1ZXVlZE1vdXNlLAogICAgICAgICAgICAgIGJsb2NrZWRPbiwKICAgICAgICAgICAgICBkb21FdmVudE5hbWUsCiAgICAgICAgICAgICAgZXZlbnRTeXN0ZW1GbGFncywKICAgICAgICAgICAgICB0YXJnZXRDb250YWluZXIsCiAgICAgICAgICAgICAgbmF0aXZlRXZlbnQKICAgICAgICAgICAgKSwgdHJ1ZTsKICAgICAgICAgIGNhc2UgInBvaW50ZXJvdmVyIjoKICAgICAgICAgICAgdmFyIHBvaW50ZXJJZCA9IG5hdGl2ZUV2ZW50LnBvaW50ZXJJZDsKICAgICAgICAgICAgcXVldWVkUG9pbnRlcnMuc2V0KAogICAgICAgICAgICAgIHBvaW50ZXJJZCwKICAgICAgICAgICAgICBhY2N1bXVsYXRlT3JDcmVhdGVDb250aW51b3VzUXVldWVkUmVwbGF5YWJsZUV2ZW50KAogICAgICAgICAgICAgICAgcXVldWVkUG9pbnRlcnMuZ2V0KHBvaW50ZXJJZCkgfHwgbnVsbCwKICAgICAgICAgICAgICAgIGJsb2NrZWRPbiwKICAgICAgICAgICAgICAgIGRvbUV2ZW50TmFtZSwKICAgICAgICAgICAgICAgIGV2ZW50U3lzdGVtRmxhZ3MsCiAgICAgICAgICAgICAgICB0YXJnZXRDb250YWluZXIsCiAgICAgICAgICAgICAgICBuYXRpdmVFdmVudAogICAgICAgICAgICAgICkKICAgICAgICAgICAgKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICBjYXNlICJnb3Rwb2ludGVyY2FwdHVyZSI6CiAgICAgICAgICAgIHJldHVybiBwb2ludGVySWQgPSBuYXRpdmVFdmVudC5wb2ludGVySWQsIHF1ZXVlZFBvaW50ZXJDYXB0dXJlcy5zZXQoCiAgICAgICAgICAgICAgcG9pbnRlcklkLAogICAgICAgICAgICAgIGFjY3VtdWxhdGVPckNyZWF0ZUNvbnRpbnVvdXNRdWV1ZWRSZXBsYXlhYmxlRXZlbnQoCiAgICAgICAgICAgICAgICBxdWV1ZWRQb2ludGVyQ2FwdHVyZXMuZ2V0KHBvaW50ZXJJZCkgfHwgbnVsbCwKICAgICAgICAgICAgICAgIGJsb2NrZWRPbiwKICAgICAgICAgICAgICAgIGRvbUV2ZW50TmFtZSwKICAgICAgICAgICAgICAgIGV2ZW50U3lzdGVtRmxhZ3MsCiAgICAgICAgICAgICAgICB0YXJnZXRDb250YWluZXIsCiAgICAgICAgICAgICAgICBuYXRpdmVFdmVudAogICAgICAgICAgICAgICkKICAgICAgICAgICAgKSwgdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGF0dGVtcHRFeHBsaWNpdEh5ZHJhdGlvblRhcmdldChxdWV1ZWRUYXJnZXQpIHsKICAgICAgICB2YXIgdGFyZ2V0SW5zdCA9IGdldENsb3Nlc3RJbnN0YW5jZUZyb21Ob2RlKHF1ZXVlZFRhcmdldC50YXJnZXQpOwogICAgICAgIGlmIChudWxsICE9PSB0YXJnZXRJbnN0KSB7CiAgICAgICAgICB2YXIgbmVhcmVzdE1vdW50ZWQgPSBnZXROZWFyZXN0TW91bnRlZEZpYmVyKHRhcmdldEluc3QpOwogICAgICAgICAgaWYgKG51bGwgIT09IG5lYXJlc3RNb3VudGVkKSB7CiAgICAgICAgICAgIGlmICh0YXJnZXRJbnN0ID0gbmVhcmVzdE1vdW50ZWQudGFnLCAxMyA9PT0gdGFyZ2V0SW5zdCkgewogICAgICAgICAgICAgIGlmICh0YXJnZXRJbnN0ID0gZ2V0U3VzcGVuc2VJbnN0YW5jZUZyb21GaWJlcihuZWFyZXN0TW91bnRlZCksIG51bGwgIT09IHRhcmdldEluc3QpIHsKICAgICAgICAgICAgICAgIHF1ZXVlZFRhcmdldC5ibG9ja2VkT24gPSB0YXJnZXRJbnN0OwogICAgICAgICAgICAgICAgcnVuV2l0aFByaW9yaXR5KHF1ZXVlZFRhcmdldC5wcmlvcml0eSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgIGlmICgxMyA9PT0gbmVhcmVzdE1vdW50ZWQudGFnKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGxhbmUgPSByZXF1ZXN0VXBkYXRlTGFuZShuZWFyZXN0TW91bnRlZCk7CiAgICAgICAgICAgICAgICAgICAgbGFuZSA9IGdldEJ1bXBlZExhbmVGb3JIeWRyYXRpb25CeUxhbmUobGFuZSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJvb3QyID0gZW5xdWV1ZUNvbmN1cnJlbnRSZW5kZXJGb3JMYW5lKAogICAgICAgICAgICAgICAgICAgICAgbmVhcmVzdE1vdW50ZWQsCiAgICAgICAgICAgICAgICAgICAgICBsYW5lCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICBudWxsICE9PSByb290MiAmJiBzY2hlZHVsZVVwZGF0ZU9uRmliZXIocm9vdDIsIG5lYXJlc3RNb3VudGVkLCBsYW5lKTsKICAgICAgICAgICAgICAgICAgICBtYXJrUmV0cnlMYW5lSWZOb3RIeWRyYXRlZChuZWFyZXN0TW91bnRlZCwgbGFuZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmICgzID09PSB0YXJnZXRJbnN0ICYmIG5lYXJlc3RNb3VudGVkLnN0YXRlTm9kZS5jdXJyZW50Lm1lbW9pemVkU3RhdGUuaXNEZWh5ZHJhdGVkKSB7CiAgICAgICAgICAgICAgcXVldWVkVGFyZ2V0LmJsb2NrZWRPbiA9IDMgPT09IG5lYXJlc3RNb3VudGVkLnRhZyA/IG5lYXJlc3RNb3VudGVkLnN0YXRlTm9kZS5jb250YWluZXJJbmZvIDogbnVsbDsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcXVldWVkVGFyZ2V0LmJsb2NrZWRPbiA9IG51bGw7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gYXR0ZW1wdFJlcGxheUNvbnRpbnVvdXNRdWV1ZWRFdmVudChxdWV1ZWRFdmVudCkgewogICAgICAgIGlmIChudWxsICE9PSBxdWV1ZWRFdmVudC5ibG9ja2VkT24pIHJldHVybiBmYWxzZTsKICAgICAgICBmb3IgKHZhciB0YXJnZXRDb250YWluZXJzID0gcXVldWVkRXZlbnQudGFyZ2V0Q29udGFpbmVyczsgMCA8IHRhcmdldENvbnRhaW5lcnMubGVuZ3RoOyApIHsKICAgICAgICAgIHZhciBuZXh0QmxvY2tlZE9uID0gZmluZEluc3RhbmNlQmxvY2tpbmdFdmVudChxdWV1ZWRFdmVudC5uYXRpdmVFdmVudCk7CiAgICAgICAgICBpZiAobnVsbCA9PT0gbmV4dEJsb2NrZWRPbikgewogICAgICAgICAgICBuZXh0QmxvY2tlZE9uID0gcXVldWVkRXZlbnQubmF0aXZlRXZlbnQ7CiAgICAgICAgICAgIHZhciBuYXRpdmVFdmVudENsb25lID0gbmV3IG5leHRCbG9ja2VkT24uY29uc3RydWN0b3IoCiAgICAgICAgICAgICAgbmV4dEJsb2NrZWRPbi50eXBlLAogICAgICAgICAgICAgIG5leHRCbG9ja2VkT24KICAgICAgICAgICAgKSwgZXZlbnQgPSBuYXRpdmVFdmVudENsb25lOwogICAgICAgICAgICBudWxsICE9PSBjdXJyZW50UmVwbGF5aW5nRXZlbnQgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAiRXhwZWN0ZWQgY3VycmVudGx5IHJlcGxheWluZyBldmVudCB0byBiZSBudWxsLiBUaGlzIGVycm9yIGlzIGxpa2VseSBjYXVzZWQgYnkgYSBidWcgaW4gUmVhY3QuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLiIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgY3VycmVudFJlcGxheWluZ0V2ZW50ID0gZXZlbnQ7CiAgICAgICAgICAgIG5leHRCbG9ja2VkT24udGFyZ2V0LmRpc3BhdGNoRXZlbnQobmF0aXZlRXZlbnRDbG9uZSk7CiAgICAgICAgICAgIG51bGwgPT09IGN1cnJlbnRSZXBsYXlpbmdFdmVudCAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICJFeHBlY3RlZCBjdXJyZW50bHkgcmVwbGF5aW5nIGV2ZW50IHRvIG5vdCBiZSBudWxsLiBUaGlzIGVycm9yIGlzIGxpa2VseSBjYXVzZWQgYnkgYSBidWcgaW4gUmVhY3QuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLiIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgY3VycmVudFJlcGxheWluZ0V2ZW50ID0gbnVsbDsKICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICByZXR1cm4gdGFyZ2V0Q29udGFpbmVycyA9IGdldEluc3RhbmNlRnJvbU5vZGUobmV4dEJsb2NrZWRPbiksIG51bGwgIT09IHRhcmdldENvbnRhaW5lcnMgJiYgYXR0ZW1wdENvbnRpbnVvdXNIeWRyYXRpb24odGFyZ2V0Q29udGFpbmVycyksIHF1ZXVlZEV2ZW50LmJsb2NrZWRPbiA9IG5leHRCbG9ja2VkT24sIGZhbHNlOwogICAgICAgICAgdGFyZ2V0Q29udGFpbmVycy5zaGlmdCgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBhdHRlbXB0UmVwbGF5Q29udGludW91c1F1ZXVlZEV2ZW50SW5NYXAocXVldWVkRXZlbnQsIGtleSwgbWFwKSB7CiAgICAgICAgYXR0ZW1wdFJlcGxheUNvbnRpbnVvdXNRdWV1ZWRFdmVudChxdWV1ZWRFdmVudCkgJiYgbWFwLmRlbGV0ZShrZXkpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlcGxheVVuYmxvY2tlZEV2ZW50cygpIHsKICAgICAgICBoYXNTY2hlZHVsZWRSZXBsYXlBdHRlbXB0ID0gZmFsc2U7CiAgICAgICAgbnVsbCAhPT0gcXVldWVkRm9jdXMgJiYgYXR0ZW1wdFJlcGxheUNvbnRpbnVvdXNRdWV1ZWRFdmVudChxdWV1ZWRGb2N1cykgJiYgKHF1ZXVlZEZvY3VzID0gbnVsbCk7CiAgICAgICAgbnVsbCAhPT0gcXVldWVkRHJhZyAmJiBhdHRlbXB0UmVwbGF5Q29udGludW91c1F1ZXVlZEV2ZW50KHF1ZXVlZERyYWcpICYmIChxdWV1ZWREcmFnID0gbnVsbCk7CiAgICAgICAgbnVsbCAhPT0gcXVldWVkTW91c2UgJiYgYXR0ZW1wdFJlcGxheUNvbnRpbnVvdXNRdWV1ZWRFdmVudChxdWV1ZWRNb3VzZSkgJiYgKHF1ZXVlZE1vdXNlID0gbnVsbCk7CiAgICAgICAgcXVldWVkUG9pbnRlcnMuZm9yRWFjaChhdHRlbXB0UmVwbGF5Q29udGludW91c1F1ZXVlZEV2ZW50SW5NYXApOwogICAgICAgIHF1ZXVlZFBvaW50ZXJDYXB0dXJlcy5mb3JFYWNoKGF0dGVtcHRSZXBsYXlDb250aW51b3VzUXVldWVkRXZlbnRJbk1hcCk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gc2NoZWR1bGVDYWxsYmFja0lmVW5ibG9ja2VkKHF1ZXVlZEV2ZW50LCB1bmJsb2NrZWQpIHsKICAgICAgICBxdWV1ZWRFdmVudC5ibG9ja2VkT24gPT09IHVuYmxvY2tlZCAmJiAocXVldWVkRXZlbnQuYmxvY2tlZE9uID0gbnVsbCwgaGFzU2NoZWR1bGVkUmVwbGF5QXR0ZW1wdCB8fCAoaGFzU2NoZWR1bGVkUmVwbGF5QXR0ZW1wdCA9IHRydWUsIFNjaGVkdWxlci51bnN0YWJsZV9zY2hlZHVsZUNhbGxiYWNrKAogICAgICAgICAgU2NoZWR1bGVyLnVuc3RhYmxlX05vcm1hbFByaW9yaXR5LAogICAgICAgICAgcmVwbGF5VW5ibG9ja2VkRXZlbnRzCiAgICAgICAgKSkpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHNjaGVkdWxlUmVwbGF5UXVldWVJZk5lZWRlZChmb3JtUmVwbGF5aW5nUXVldWUpIHsKICAgICAgICBsYXN0U2NoZWR1bGVkUmVwbGF5UXVldWUgIT09IGZvcm1SZXBsYXlpbmdRdWV1ZSAmJiAobGFzdFNjaGVkdWxlZFJlcGxheVF1ZXVlID0gZm9ybVJlcGxheWluZ1F1ZXVlLCBTY2hlZHVsZXIudW5zdGFibGVfc2NoZWR1bGVDYWxsYmFjaygKICAgICAgICAgIFNjaGVkdWxlci51bnN0YWJsZV9Ob3JtYWxQcmlvcml0eSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICBsYXN0U2NoZWR1bGVkUmVwbGF5UXVldWUgPT09IGZvcm1SZXBsYXlpbmdRdWV1ZSAmJiAobGFzdFNjaGVkdWxlZFJlcGxheVF1ZXVlID0gbnVsbCk7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZm9ybVJlcGxheWluZ1F1ZXVlLmxlbmd0aDsgaSArPSAzKSB7CiAgICAgICAgICAgICAgdmFyIGZvcm0gPSBmb3JtUmVwbGF5aW5nUXVldWVbaV0sIHN1Ym1pdHRlck9yQWN0aW9uID0gZm9ybVJlcGxheWluZ1F1ZXVlW2kgKyAxXSwgZm9ybURhdGEgPSBmb3JtUmVwbGF5aW5nUXVldWVbaSArIDJdOwogICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iICE9PSB0eXBlb2Ygc3VibWl0dGVyT3JBY3Rpb24pCiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gZmluZEluc3RhbmNlQmxvY2tpbmdUYXJnZXQoc3VibWl0dGVyT3JBY3Rpb24gfHwgZm9ybSkpCiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgZWxzZSBicmVhazsKICAgICAgICAgICAgICB2YXIgZm9ybUluc3QgPSBnZXRJbnN0YW5jZUZyb21Ob2RlKGZvcm0pOwogICAgICAgICAgICAgIG51bGwgIT09IGZvcm1JbnN0ICYmIChmb3JtUmVwbGF5aW5nUXVldWUuc3BsaWNlKGksIDMpLCBpIC09IDMsIGZvcm0gPSB7CiAgICAgICAgICAgICAgICBwZW5kaW5nOiB0cnVlLAogICAgICAgICAgICAgICAgZGF0YTogZm9ybURhdGEsCiAgICAgICAgICAgICAgICBtZXRob2Q6IGZvcm0ubWV0aG9kLAogICAgICAgICAgICAgICAgYWN0aW9uOiBzdWJtaXR0ZXJPckFjdGlvbgogICAgICAgICAgICAgIH0sIE9iamVjdC5mcmVlemUoZm9ybSksIHN0YXJ0SG9zdFRyYW5zaXRpb24oCiAgICAgICAgICAgICAgICBmb3JtSW5zdCwKICAgICAgICAgICAgICAgIGZvcm0sCiAgICAgICAgICAgICAgICBzdWJtaXR0ZXJPckFjdGlvbiwKICAgICAgICAgICAgICAgIGZvcm1EYXRhCiAgICAgICAgICAgICAgKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICApKTsKICAgICAgfQogICAgICBmdW5jdGlvbiByZXRyeUlmQmxvY2tlZE9uKHVuYmxvY2tlZCkgewogICAgICAgIGZ1bmN0aW9uIHVuYmxvY2socXVldWVkRXZlbnQpIHsKICAgICAgICAgIHJldHVybiBzY2hlZHVsZUNhbGxiYWNrSWZVbmJsb2NrZWQocXVldWVkRXZlbnQsIHVuYmxvY2tlZCk7CiAgICAgICAgfQogICAgICAgIG51bGwgIT09IHF1ZXVlZEZvY3VzICYmIHNjaGVkdWxlQ2FsbGJhY2tJZlVuYmxvY2tlZChxdWV1ZWRGb2N1cywgdW5ibG9ja2VkKTsKICAgICAgICBudWxsICE9PSBxdWV1ZWREcmFnICYmIHNjaGVkdWxlQ2FsbGJhY2tJZlVuYmxvY2tlZChxdWV1ZWREcmFnLCB1bmJsb2NrZWQpOwogICAgICAgIG51bGwgIT09IHF1ZXVlZE1vdXNlICYmIHNjaGVkdWxlQ2FsbGJhY2tJZlVuYmxvY2tlZChxdWV1ZWRNb3VzZSwgdW5ibG9ja2VkKTsKICAgICAgICBxdWV1ZWRQb2ludGVycy5mb3JFYWNoKHVuYmxvY2spOwogICAgICAgIHF1ZXVlZFBvaW50ZXJDYXB0dXJlcy5mb3JFYWNoKHVuYmxvY2spOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWVkRXhwbGljaXRIeWRyYXRpb25UYXJnZXRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgcXVldWVkVGFyZ2V0ID0gcXVldWVkRXhwbGljaXRIeWRyYXRpb25UYXJnZXRzW2ldOwogICAgICAgICAgcXVldWVkVGFyZ2V0LmJsb2NrZWRPbiA9PT0gdW5ibG9ja2VkICYmIChxdWV1ZWRUYXJnZXQuYmxvY2tlZE9uID0gbnVsbCk7CiAgICAgICAgfQogICAgICAgIGZvciAoOyAwIDwgcXVldWVkRXhwbGljaXRIeWRyYXRpb25UYXJnZXRzLmxlbmd0aCAmJiAoaSA9IHF1ZXVlZEV4cGxpY2l0SHlkcmF0aW9uVGFyZ2V0c1swXSwgbnVsbCA9PT0gaS5ibG9ja2VkT24pOyApCiAgICAgICAgICBhdHRlbXB0RXhwbGljaXRIeWRyYXRpb25UYXJnZXQoaSksIG51bGwgPT09IGkuYmxvY2tlZE9uICYmIHF1ZXVlZEV4cGxpY2l0SHlkcmF0aW9uVGFyZ2V0cy5zaGlmdCgpOwogICAgICAgIGkgPSAodW5ibG9ja2VkLm93bmVyRG9jdW1lbnQgfHwgdW5ibG9ja2VkKS4kJHJlYWN0Rm9ybVJlcGxheTsKICAgICAgICBpZiAobnVsbCAhPSBpKQogICAgICAgICAgZm9yIChxdWV1ZWRUYXJnZXQgPSAwOyBxdWV1ZWRUYXJnZXQgPCBpLmxlbmd0aDsgcXVldWVkVGFyZ2V0ICs9IDMpIHsKICAgICAgICAgICAgdmFyIGZvcm0gPSBpW3F1ZXVlZFRhcmdldF0sIHN1Ym1pdHRlck9yQWN0aW9uID0gaVtxdWV1ZWRUYXJnZXQgKyAxXSwgZm9ybVByb3BzID0gZm9ybVtpbnRlcm5hbFByb3BzS2V5XSB8fCBudWxsOwogICAgICAgICAgICBpZiAoImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHN1Ym1pdHRlck9yQWN0aW9uKQogICAgICAgICAgICAgIGZvcm1Qcm9wcyB8fCBzY2hlZHVsZVJlcGxheVF1ZXVlSWZOZWVkZWQoaSk7CiAgICAgICAgICAgIGVsc2UgaWYgKGZvcm1Qcm9wcykgewogICAgICAgICAgICAgIHZhciBhY3Rpb24gPSBudWxsOwogICAgICAgICAgICAgIGlmIChzdWJtaXR0ZXJPckFjdGlvbiAmJiBzdWJtaXR0ZXJPckFjdGlvbi5oYXNBdHRyaWJ1dGUoImZvcm1BY3Rpb24iKSkKICAgICAgICAgICAgICAgIGlmIChmb3JtID0gc3VibWl0dGVyT3JBY3Rpb24sIGZvcm1Qcm9wcyA9IHN1Ym1pdHRlck9yQWN0aW9uW2ludGVybmFsUHJvcHNLZXldIHx8IG51bGwpCiAgICAgICAgICAgICAgICAgIGFjdGlvbiA9IGZvcm1Qcm9wcy5mb3JtQWN0aW9uOwogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBmaW5kSW5zdGFuY2VCbG9ja2luZ1RhcmdldChmb3JtKSkgY29udGludWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSBhY3Rpb24gPSBmb3JtUHJvcHMuYWN0aW9uOwogICAgICAgICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBhY3Rpb24gPyBpW3F1ZXVlZFRhcmdldCArIDFdID0gYWN0aW9uIDogKGkuc3BsaWNlKHF1ZXVlZFRhcmdldCwgMyksIHF1ZXVlZFRhcmdldCAtPSAzKTsKICAgICAgICAgICAgICBzY2hlZHVsZVJlcGxheVF1ZXVlSWZOZWVkZWQoaSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBSZWFjdERPTVJvb3QoaW50ZXJuYWxSb290KSB7CiAgICAgICAgdGhpcy5faW50ZXJuYWxSb290ID0gaW50ZXJuYWxSb290OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIFJlYWN0RE9NSHlkcmF0aW9uUm9vdChpbnRlcm5hbFJvb3QpIHsKICAgICAgICB0aGlzLl9pbnRlcm5hbFJvb3QgPSBpbnRlcm5hbFJvb3Q7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gd2FybklmUmVhY3RET01Db250YWluZXJJbkRFVihjb250YWluZXIpIHsKICAgICAgICBjb250YWluZXJbaW50ZXJuYWxDb250YWluZXJJbnN0YW5jZUtleV0gJiYgKGNvbnRhaW5lci5fcmVhY3RSb290Q29udGFpbmVyID8gY29uc29sZS5lcnJvcigKICAgICAgICAgICJZb3UgYXJlIGNhbGxpbmcgUmVhY3RET01DbGllbnQuY3JlYXRlUm9vdCgpIG9uIGEgY29udGFpbmVyIHRoYXQgd2FzIHByZXZpb3VzbHkgcGFzc2VkIHRvIFJlYWN0RE9NLnJlbmRlcigpLiBUaGlzIGlzIG5vdCBzdXBwb3J0ZWQuIgogICAgICAgICkgOiBjb25zb2xlLmVycm9yKAogICAgICAgICAgIllvdSBhcmUgY2FsbGluZyBSZWFjdERPTUNsaWVudC5jcmVhdGVSb290KCkgb24gYSBjb250YWluZXIgdGhhdCBoYXMgYWxyZWFkeSBiZWVuIHBhc3NlZCB0byBjcmVhdGVSb290KCkgYmVmb3JlLiBJbnN0ZWFkLCBjYWxsIHJvb3QucmVuZGVyKCkgb24gdGhlIGV4aXN0aW5nIHJvb3QgaW5zdGVhZCBpZiB5b3Ugd2FudCB0byB1cGRhdGUgaXQuIgogICAgICAgICkpOwogICAgICB9CiAgICAgICJ1bmRlZmluZWQiICE9PSB0eXBlb2YgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18ucmVnaXN0ZXJJbnRlcm5hbE1vZHVsZVN0YXJ0ICYmIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5yZWdpc3RlckludGVybmFsTW9kdWxlU3RhcnQoRXJyb3IoKSk7CiAgICAgIHZhciBTY2hlZHVsZXIgPSByZXF1aXJlX3NjaGVkdWxlcigpLCBSZWFjdCA9IHJlcXVpcmVfcmVhY3QoKSwgUmVhY3RET00gPSByZXF1aXJlX3JlYWN0X2RvbSgpLCBhc3NpZ24gPSBPYmplY3QuYXNzaWduLCBSRUFDVF9MRUdBQ1lfRUxFTUVOVF9UWVBFID0gU3ltYm9sLmZvcigicmVhY3QuZWxlbWVudCIpLCBSRUFDVF9FTEVNRU5UX1RZUEUgPSBTeW1ib2wuZm9yKCJyZWFjdC50cmFuc2l0aW9uYWwuZWxlbWVudCIpLCBSRUFDVF9QT1JUQUxfVFlQRSA9IFN5bWJvbC5mb3IoInJlYWN0LnBvcnRhbCIpLCBSRUFDVF9GUkFHTUVOVF9UWVBFID0gU3ltYm9sLmZvcigicmVhY3QuZnJhZ21lbnQiKSwgUkVBQ1RfU1RSSUNUX01PREVfVFlQRSA9IFN5bWJvbC5mb3IoInJlYWN0LnN0cmljdF9tb2RlIiksIFJFQUNUX1BST0ZJTEVSX1RZUEUgPSBTeW1ib2wuZm9yKCJyZWFjdC5wcm9maWxlciIpLCBSRUFDVF9QUk9WSURFUl9UWVBFID0gU3ltYm9sLmZvcigicmVhY3QucHJvdmlkZXIiKSwgUkVBQ1RfQ09OU1VNRVJfVFlQRSA9IFN5bWJvbC5mb3IoInJlYWN0LmNvbnN1bWVyIiksIFJFQUNUX0NPTlRFWFRfVFlQRSA9IFN5bWJvbC5mb3IoInJlYWN0LmNvbnRleHQiKSwgUkVBQ1RfRk9SV0FSRF9SRUZfVFlQRSA9IFN5bWJvbC5mb3IoInJlYWN0LmZvcndhcmRfcmVmIiksIFJFQUNUX1NVU1BFTlNFX1RZUEUgPSBTeW1ib2wuZm9yKCJyZWFjdC5zdXNwZW5zZSIpLCBSRUFDVF9TVVNQRU5TRV9MSVNUX1RZUEUgPSBTeW1ib2wuZm9yKCJyZWFjdC5zdXNwZW5zZV9saXN0IiksIFJFQUNUX01FTU9fVFlQRSA9IFN5bWJvbC5mb3IoInJlYWN0Lm1lbW8iKSwgUkVBQ1RfTEFaWV9UWVBFID0gU3ltYm9sLmZvcigicmVhY3QubGF6eSIpOwogICAgICBTeW1ib2wuZm9yKCJyZWFjdC5zY29wZSIpOwogICAgICB2YXIgUkVBQ1RfQUNUSVZJVFlfVFlQRSA9IFN5bWJvbC5mb3IoInJlYWN0LmFjdGl2aXR5Iik7CiAgICAgIFN5bWJvbC5mb3IoInJlYWN0LmxlZ2FjeV9oaWRkZW4iKTsKICAgICAgU3ltYm9sLmZvcigicmVhY3QudHJhY2luZ19tYXJrZXIiKTsKICAgICAgdmFyIFJFQUNUX01FTU9fQ0FDSEVfU0VOVElORUwgPSBTeW1ib2wuZm9yKCJyZWFjdC5tZW1vX2NhY2hlX3NlbnRpbmVsIik7CiAgICAgIFN5bWJvbC5mb3IoInJlYWN0LnZpZXdfdHJhbnNpdGlvbiIpOwogICAgICB2YXIgTUFZQkVfSVRFUkFUT1JfU1lNQk9MID0gU3ltYm9sLml0ZXJhdG9yLCBSRUFDVF9DTElFTlRfUkVGRVJFTkNFID0gU3ltYm9sLmZvcigicmVhY3QuY2xpZW50LnJlZmVyZW5jZSIpLCBpc0FycmF5SW1wbCA9IEFycmF5LmlzQXJyYXksIFJlYWN0U2hhcmVkSW50ZXJuYWxzID0gUmVhY3QuX19DTElFTlRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfV0FSTl9VU0VSU19USEVZX0NBTk5PVF9VUEdSQURFLCBSZWFjdERPTVNoYXJlZEludGVybmFscyA9IFJlYWN0RE9NLl9fRE9NX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1dBUk5fVVNFUlNfVEhFWV9DQU5OT1RfVVBHUkFERSwgTm90UGVuZGluZyA9IE9iamVjdC5mcmVlemUoewogICAgICAgIHBlbmRpbmc6IGZhbHNlLAogICAgICAgIGRhdGE6IG51bGwsCiAgICAgICAgbWV0aG9kOiBudWxsLAogICAgICAgIGFjdGlvbjogbnVsbAogICAgICB9KSwgdmFsdWVTdGFjayA9IFtdOwogICAgICB2YXIgZmliZXJTdGFjayA9IFtdOwogICAgICB2YXIgaW5kZXgkanNjb21wJDAgPSAtMSwgY29udGV4dFN0YWNrQ3Vyc29yID0gY3JlYXRlQ3Vyc29yKG51bGwpLCBjb250ZXh0RmliZXJTdGFja0N1cnNvciA9IGNyZWF0ZUN1cnNvcihudWxsKSwgcm9vdEluc3RhbmNlU3RhY2tDdXJzb3IgPSBjcmVhdGVDdXJzb3IobnVsbCksIGhvc3RUcmFuc2l0aW9uUHJvdmlkZXJDdXJzb3IgPSBjcmVhdGVDdXJzb3IobnVsbCksIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSwgc2NoZWR1bGVDYWxsYmFjayQzID0gU2NoZWR1bGVyLnVuc3RhYmxlX3NjaGVkdWxlQ2FsbGJhY2ssIGNhbmNlbENhbGxiYWNrJDEgPSBTY2hlZHVsZXIudW5zdGFibGVfY2FuY2VsQ2FsbGJhY2ssIHNob3VsZFlpZWxkID0gU2NoZWR1bGVyLnVuc3RhYmxlX3Nob3VsZFlpZWxkLCByZXF1ZXN0UGFpbnQgPSBTY2hlZHVsZXIudW5zdGFibGVfcmVxdWVzdFBhaW50LCBub3ckMSA9IFNjaGVkdWxlci51bnN0YWJsZV9ub3csIGdldEN1cnJlbnRQcmlvcml0eUxldmVsID0gU2NoZWR1bGVyLnVuc3RhYmxlX2dldEN1cnJlbnRQcmlvcml0eUxldmVsLCBJbW1lZGlhdGVQcmlvcml0eSA9IFNjaGVkdWxlci51bnN0YWJsZV9JbW1lZGlhdGVQcmlvcml0eSwgVXNlckJsb2NraW5nUHJpb3JpdHkgPSBTY2hlZHVsZXIudW5zdGFibGVfVXNlckJsb2NraW5nUHJpb3JpdHksIE5vcm1hbFByaW9yaXR5JDEgPSBTY2hlZHVsZXIudW5zdGFibGVfTm9ybWFsUHJpb3JpdHksIExvd1ByaW9yaXR5ID0gU2NoZWR1bGVyLnVuc3RhYmxlX0xvd1ByaW9yaXR5LCBJZGxlUHJpb3JpdHkgPSBTY2hlZHVsZXIudW5zdGFibGVfSWRsZVByaW9yaXR5LCBsb2ckMSA9IFNjaGVkdWxlci5sb2csIHVuc3RhYmxlX3NldERpc2FibGVZaWVsZFZhbHVlID0gU2NoZWR1bGVyLnVuc3RhYmxlX3NldERpc2FibGVZaWVsZFZhbHVlLCByZW5kZXJlcklEID0gbnVsbCwgaW5qZWN0ZWRIb29rID0gbnVsbCwgaW5qZWN0ZWRQcm9maWxpbmdIb29rcyA9IG51bGwsIGhhc0xvZ2dlZEVycm9yID0gZmFsc2UsIGlzRGV2VG9vbHNQcmVzZW50ID0gInVuZGVmaW5lZCIgIT09IHR5cGVvZiBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18sIGNsejMyID0gTWF0aC5jbHozMiA/IE1hdGguY2x6MzIgOiBjbHozMkZhbGxiYWNrLCBsb2cgPSBNYXRoLmxvZywgTE4yID0gTWF0aC5MTjIsIG5leHRUcmFuc2l0aW9uTGFuZSA9IDI1NiwgbmV4dFJldHJ5TGFuZSA9IDQxOTQzMDQsIERpc2NyZXRlRXZlbnRQcmlvcml0eSA9IDIsIENvbnRpbnVvdXNFdmVudFByaW9yaXR5ID0gOCwgRGVmYXVsdEV2ZW50UHJpb3JpdHkgPSAzMiwgSWRsZUV2ZW50UHJpb3JpdHkgPSAyNjg0MzU0NTYsIHJhbmRvbUtleSA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpLCBpbnRlcm5hbEluc3RhbmNlS2V5ID0gIl9fcmVhY3RGaWJlciQiICsgcmFuZG9tS2V5LCBpbnRlcm5hbFByb3BzS2V5ID0gIl9fcmVhY3RQcm9wcyQiICsgcmFuZG9tS2V5LCBpbnRlcm5hbENvbnRhaW5lckluc3RhbmNlS2V5ID0gIl9fcmVhY3RDb250YWluZXIkIiArIHJhbmRvbUtleSwgaW50ZXJuYWxFdmVudEhhbmRsZXJzS2V5ID0gIl9fcmVhY3RFdmVudHMkIiArIHJhbmRvbUtleSwgaW50ZXJuYWxFdmVudEhhbmRsZXJMaXN0ZW5lcnNLZXkgPSAiX19yZWFjdExpc3RlbmVycyQiICsgcmFuZG9tS2V5LCBpbnRlcm5hbEV2ZW50SGFuZGxlc1NldEtleSA9ICJfX3JlYWN0SGFuZGxlcyQiICsgcmFuZG9tS2V5LCBpbnRlcm5hbFJvb3ROb2RlUmVzb3VyY2VzS2V5ID0gIl9fcmVhY3RSZXNvdXJjZXMkIiArIHJhbmRvbUtleSwgaW50ZXJuYWxIb2lzdGFibGVNYXJrZXIgPSAiX19yZWFjdE1hcmtlciQiICsgcmFuZG9tS2V5LCBhbGxOYXRpdmVFdmVudHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpLCByZWdpc3RyYXRpb25OYW1lRGVwZW5kZW5jaWVzID0ge30sIHBvc3NpYmxlUmVnaXN0cmF0aW9uTmFtZXMgPSB7fSwgaGFzUmVhZE9ubHlWYWx1ZSA9IHsKICAgICAgICBidXR0b246IHRydWUsCiAgICAgICAgY2hlY2tib3g6IHRydWUsCiAgICAgICAgaW1hZ2U6IHRydWUsCiAgICAgICAgaGlkZGVuOiB0cnVlLAogICAgICAgIHJhZGlvOiB0cnVlLAogICAgICAgIHJlc2V0OiB0cnVlLAogICAgICAgIHN1Ym1pdDogdHJ1ZQogICAgICB9LCBWQUxJRF9BVFRSSUJVVEVfTkFNRV9SRUdFWCA9IFJlZ0V4cCgKICAgICAgICAiXls6QS1aX2EtelxcdTAwQzAtXFx1MDBENlxcdTAwRDgtXFx1MDBGNlxcdTAwRjgtXFx1MDJGRlxcdTAzNzAtXFx1MDM3RFxcdTAzN0YtXFx1MUZGRlxcdTIwMEMtXFx1MjAwRFxcdTIwNzAtXFx1MjE4RlxcdTJDMDAtXFx1MkZFRlxcdTMwMDEtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZGRF1bOkEtWl9hLXpcXHUwMEMwLVxcdTAwRDZcXHUwMEQ4LVxcdTAwRjZcXHUwMEY4LVxcdTAyRkZcXHUwMzcwLVxcdTAzN0RcXHUwMzdGLVxcdTFGRkZcXHUyMDBDLVxcdTIwMERcXHUyMDcwLVxcdTIxOEZcXHUyQzAwLVxcdTJGRUZcXHUzMDAxLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRkRcXC0uMC05XFx1MDBCN1xcdTAzMDAtXFx1MDM2RlxcdTIwM0YtXFx1MjA0MF0qJCIKICAgICAgKSwgaWxsZWdhbEF0dHJpYnV0ZU5hbWVDYWNoZSA9IHt9LCB2YWxpZGF0ZWRBdHRyaWJ1dGVOYW1lQ2FjaGUgPSB7fSwgZGlzYWJsZWREZXB0aCA9IDAsIHByZXZMb2csIHByZXZJbmZvLCBwcmV2V2FybiwgcHJldkVycm9yLCBwcmV2R3JvdXAsIHByZXZHcm91cENvbGxhcHNlZCwgcHJldkdyb3VwRW5kOwogICAgICBkaXNhYmxlZExvZy5fX3JlYWN0RGlzYWJsZWRMb2cgPSB0cnVlOwogICAgICB2YXIgcHJlZml4LCBzdWZmaXgsIHJlZW50cnkgPSBmYWxzZTsKICAgICAgdmFyIGNvbXBvbmVudEZyYW1lQ2FjaGUgPSBuZXcgKCJmdW5jdGlvbiIgPT09IHR5cGVvZiBXZWFrTWFwID8gV2Vha01hcCA6IE1hcCkoKTsKICAgICAgdmFyIGN1cnJlbnQgPSBudWxsLCBpc1JlbmRlcmluZyA9IGZhbHNlLCBlc2NhcGVTZWxlY3RvckF0dHJpYnV0ZVZhbHVlSW5zaWRlRG91YmxlUXVvdGVzUmVnZXggPSAvW1xuIlxcXS9nLCBkaWRXYXJuVmFsdWVEZWZhdWx0VmFsdWUkMSA9IGZhbHNlLCBkaWRXYXJuQ2hlY2tlZERlZmF1bHRDaGVja2VkID0gZmFsc2UsIGRpZFdhcm5TZWxlY3RlZFNldE9uT3B0aW9uID0gZmFsc2UsIGRpZFdhcm5JbnZhbGlkQ2hpbGQgPSBmYWxzZSwgZGlkV2FybkludmFsaWRJbm5lckhUTUwgPSBmYWxzZTsKICAgICAgdmFyIGRpZFdhcm5WYWx1ZURlZmF1bHRWYWx1ZSA9IGZhbHNlOwogICAgICB2YXIgdmFsdWVQcm9wTmFtZXMgPSBbInZhbHVlIiwgImRlZmF1bHRWYWx1ZSJdLCBkaWRXYXJuVmFsRGVmYXVsdFZhbCA9IGZhbHNlLCBuZWVkc0VzY2FwaW5nID0gL1siJyY8PlxuXHRdfF5cc3xccyQvLCBzcGVjaWFsVGFncyA9ICJhZGRyZXNzIGFwcGxldCBhcmVhIGFydGljbGUgYXNpZGUgYmFzZSBiYXNlZm9udCBiZ3NvdW5kIGJsb2NrcXVvdGUgYm9keSBiciBidXR0b24gY2FwdGlvbiBjZW50ZXIgY29sIGNvbGdyb3VwIGRkIGRldGFpbHMgZGlyIGRpdiBkbCBkdCBlbWJlZCBmaWVsZHNldCBmaWdjYXB0aW9uIGZpZ3VyZSBmb290ZXIgZm9ybSBmcmFtZSBmcmFtZXNldCBoMSBoMiBoMyBoNCBoNSBoNiBoZWFkIGhlYWRlciBoZ3JvdXAgaHIgaHRtbCBpZnJhbWUgaW1nIGlucHV0IGlzaW5kZXggbGkgbGluayBsaXN0aW5nIG1haW4gbWFycXVlZSBtZW51IG1lbnVpdGVtIG1ldGEgbmF2IG5vZW1iZWQgbm9mcmFtZXMgbm9zY3JpcHQgb2JqZWN0IG9sIHAgcGFyYW0gcGxhaW50ZXh0IHByZSBzY3JpcHQgc2VjdGlvbiBzZWxlY3Qgc291cmNlIHN0eWxlIHN1bW1hcnkgdGFibGUgdGJvZHkgdGQgdGVtcGxhdGUgdGV4dGFyZWEgdGZvb3QgdGggdGhlYWQgdGl0bGUgdHIgdHJhY2sgdWwgd2JyIHhtcCIuc3BsaXQoCiAgICAgICAgIiAiCiAgICAgICksIGluU2NvcGVUYWdzID0gImFwcGxldCBjYXB0aW9uIGh0bWwgdGFibGUgdGQgdGggbWFycXVlZSBvYmplY3QgdGVtcGxhdGUgZm9yZWlnbk9iamVjdCBkZXNjIHRpdGxlIi5zcGxpdCgKICAgICAgICAiICIKICAgICAgKSwgYnV0dG9uU2NvcGVUYWdzID0gaW5TY29wZVRhZ3MuY29uY2F0KFsiYnV0dG9uIl0pLCBpbXBsaWVkRW5kVGFncyA9ICJkZCBkdCBsaSBvcHRpb24gb3B0Z3JvdXAgcCBycCBydCIuc3BsaXQoIiAiKSwgZW1wdHlBbmNlc3RvckluZm9EZXYgPSB7CiAgICAgICAgY3VycmVudDogbnVsbCwKICAgICAgICBmb3JtVGFnOiBudWxsLAogICAgICAgIGFUYWdJblNjb3BlOiBudWxsLAogICAgICAgIGJ1dHRvblRhZ0luU2NvcGU6IG51bGwsCiAgICAgICAgbm9iclRhZ0luU2NvcGU6IG51bGwsCiAgICAgICAgcFRhZ0luQnV0dG9uU2NvcGU6IG51bGwsCiAgICAgICAgbGlzdEl0ZW1UYWdBdXRvY2xvc2luZzogbnVsbCwKICAgICAgICBkbEl0ZW1UYWdBdXRvY2xvc2luZzogbnVsbCwKICAgICAgICBjb250YWluZXJUYWdJblNjb3BlOiBudWxsLAogICAgICAgIGltcGxpY2l0Um9vdFNjb3BlOiBmYWxzZQogICAgICB9LCBkaWRXYXJuID0ge30sIHNob3J0aGFuZFRvTG9uZ2hhbmQgPSB7CiAgICAgICAgYW5pbWF0aW9uOiAiYW5pbWF0aW9uRGVsYXkgYW5pbWF0aW9uRGlyZWN0aW9uIGFuaW1hdGlvbkR1cmF0aW9uIGFuaW1hdGlvbkZpbGxNb2RlIGFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50IGFuaW1hdGlvbk5hbWUgYW5pbWF0aW9uUGxheVN0YXRlIGFuaW1hdGlvblRpbWluZ0Z1bmN0aW9uIi5zcGxpdCgKICAgICAgICAgICIgIgogICAgICAgICksCiAgICAgICAgYmFja2dyb3VuZDogImJhY2tncm91bmRBdHRhY2htZW50IGJhY2tncm91bmRDbGlwIGJhY2tncm91bmRDb2xvciBiYWNrZ3JvdW5kSW1hZ2UgYmFja2dyb3VuZE9yaWdpbiBiYWNrZ3JvdW5kUG9zaXRpb25YIGJhY2tncm91bmRQb3NpdGlvblkgYmFja2dyb3VuZFJlcGVhdCBiYWNrZ3JvdW5kU2l6ZSIuc3BsaXQoCiAgICAgICAgICAiICIKICAgICAgICApLAogICAgICAgIGJhY2tncm91bmRQb3NpdGlvbjogWyJiYWNrZ3JvdW5kUG9zaXRpb25YIiwgImJhY2tncm91bmRQb3NpdGlvblkiXSwKICAgICAgICBib3JkZXI6ICJib3JkZXJCb3R0b21Db2xvciBib3JkZXJCb3R0b21TdHlsZSBib3JkZXJCb3R0b21XaWR0aCBib3JkZXJJbWFnZU91dHNldCBib3JkZXJJbWFnZVJlcGVhdCBib3JkZXJJbWFnZVNsaWNlIGJvcmRlckltYWdlU291cmNlIGJvcmRlckltYWdlV2lkdGggYm9yZGVyTGVmdENvbG9yIGJvcmRlckxlZnRTdHlsZSBib3JkZXJMZWZ0V2lkdGggYm9yZGVyUmlnaHRDb2xvciBib3JkZXJSaWdodFN0eWxlIGJvcmRlclJpZ2h0V2lkdGggYm9yZGVyVG9wQ29sb3IgYm9yZGVyVG9wU3R5bGUgYm9yZGVyVG9wV2lkdGgiLnNwbGl0KAogICAgICAgICAgIiAiCiAgICAgICAgKSwKICAgICAgICBib3JkZXJCbG9ja0VuZDogWwogICAgICAgICAgImJvcmRlckJsb2NrRW5kQ29sb3IiLAogICAgICAgICAgImJvcmRlckJsb2NrRW5kU3R5bGUiLAogICAgICAgICAgImJvcmRlckJsb2NrRW5kV2lkdGgiCiAgICAgICAgXSwKICAgICAgICBib3JkZXJCbG9ja1N0YXJ0OiBbCiAgICAgICAgICAiYm9yZGVyQmxvY2tTdGFydENvbG9yIiwKICAgICAgICAgICJib3JkZXJCbG9ja1N0YXJ0U3R5bGUiLAogICAgICAgICAgImJvcmRlckJsb2NrU3RhcnRXaWR0aCIKICAgICAgICBdLAogICAgICAgIGJvcmRlckJvdHRvbTogWwogICAgICAgICAgImJvcmRlckJvdHRvbUNvbG9yIiwKICAgICAgICAgICJib3JkZXJCb3R0b21TdHlsZSIsCiAgICAgICAgICAiYm9yZGVyQm90dG9tV2lkdGgiCiAgICAgICAgXSwKICAgICAgICBib3JkZXJDb2xvcjogWwogICAgICAgICAgImJvcmRlckJvdHRvbUNvbG9yIiwKICAgICAgICAgICJib3JkZXJMZWZ0Q29sb3IiLAogICAgICAgICAgImJvcmRlclJpZ2h0Q29sb3IiLAogICAgICAgICAgImJvcmRlclRvcENvbG9yIgogICAgICAgIF0sCiAgICAgICAgYm9yZGVySW1hZ2U6IFsKICAgICAgICAgICJib3JkZXJJbWFnZU91dHNldCIsCiAgICAgICAgICAiYm9yZGVySW1hZ2VSZXBlYXQiLAogICAgICAgICAgImJvcmRlckltYWdlU2xpY2UiLAogICAgICAgICAgImJvcmRlckltYWdlU291cmNlIiwKICAgICAgICAgICJib3JkZXJJbWFnZVdpZHRoIgogICAgICAgIF0sCiAgICAgICAgYm9yZGVySW5saW5lRW5kOiBbCiAgICAgICAgICAiYm9yZGVySW5saW5lRW5kQ29sb3IiLAogICAgICAgICAgImJvcmRlcklubGluZUVuZFN0eWxlIiwKICAgICAgICAgICJib3JkZXJJbmxpbmVFbmRXaWR0aCIKICAgICAgICBdLAogICAgICAgIGJvcmRlcklubGluZVN0YXJ0OiBbCiAgICAgICAgICAiYm9yZGVySW5saW5lU3RhcnRDb2xvciIsCiAgICAgICAgICAiYm9yZGVySW5saW5lU3RhcnRTdHlsZSIsCiAgICAgICAgICAiYm9yZGVySW5saW5lU3RhcnRXaWR0aCIKICAgICAgICBdLAogICAgICAgIGJvcmRlckxlZnQ6IFsiYm9yZGVyTGVmdENvbG9yIiwgImJvcmRlckxlZnRTdHlsZSIsICJib3JkZXJMZWZ0V2lkdGgiXSwKICAgICAgICBib3JkZXJSYWRpdXM6IFsKICAgICAgICAgICJib3JkZXJCb3R0b21MZWZ0UmFkaXVzIiwKICAgICAgICAgICJib3JkZXJCb3R0b21SaWdodFJhZGl1cyIsCiAgICAgICAgICAiYm9yZGVyVG9wTGVmdFJhZGl1cyIsCiAgICAgICAgICAiYm9yZGVyVG9wUmlnaHRSYWRpdXMiCiAgICAgICAgXSwKICAgICAgICBib3JkZXJSaWdodDogWwogICAgICAgICAgImJvcmRlclJpZ2h0Q29sb3IiLAogICAgICAgICAgImJvcmRlclJpZ2h0U3R5bGUiLAogICAgICAgICAgImJvcmRlclJpZ2h0V2lkdGgiCiAgICAgICAgXSwKICAgICAgICBib3JkZXJTdHlsZTogWwogICAgICAgICAgImJvcmRlckJvdHRvbVN0eWxlIiwKICAgICAgICAgICJib3JkZXJMZWZ0U3R5bGUiLAogICAgICAgICAgImJvcmRlclJpZ2h0U3R5bGUiLAogICAgICAgICAgImJvcmRlclRvcFN0eWxlIgogICAgICAgIF0sCiAgICAgICAgYm9yZGVyVG9wOiBbImJvcmRlclRvcENvbG9yIiwgImJvcmRlclRvcFN0eWxlIiwgImJvcmRlclRvcFdpZHRoIl0sCiAgICAgICAgYm9yZGVyV2lkdGg6IFsKICAgICAgICAgICJib3JkZXJCb3R0b21XaWR0aCIsCiAgICAgICAgICAiYm9yZGVyTGVmdFdpZHRoIiwKICAgICAgICAgICJib3JkZXJSaWdodFdpZHRoIiwKICAgICAgICAgICJib3JkZXJUb3BXaWR0aCIKICAgICAgICBdLAogICAgICAgIGNvbHVtblJ1bGU6IFsiY29sdW1uUnVsZUNvbG9yIiwgImNvbHVtblJ1bGVTdHlsZSIsICJjb2x1bW5SdWxlV2lkdGgiXSwKICAgICAgICBjb2x1bW5zOiBbImNvbHVtbkNvdW50IiwgImNvbHVtbldpZHRoIl0sCiAgICAgICAgZmxleDogWyJmbGV4QmFzaXMiLCAiZmxleEdyb3ciLCAiZmxleFNocmluayJdLAogICAgICAgIGZsZXhGbG93OiBbImZsZXhEaXJlY3Rpb24iLCAiZmxleFdyYXAiXSwKICAgICAgICBmb250OiAiZm9udEZhbWlseSBmb250RmVhdHVyZVNldHRpbmdzIGZvbnRLZXJuaW5nIGZvbnRMYW5ndWFnZU92ZXJyaWRlIGZvbnRTaXplIGZvbnRTaXplQWRqdXN0IGZvbnRTdHJldGNoIGZvbnRTdHlsZSBmb250VmFyaWFudCBmb250VmFyaWFudEFsdGVybmF0ZXMgZm9udFZhcmlhbnRDYXBzIGZvbnRWYXJpYW50RWFzdEFzaWFuIGZvbnRWYXJpYW50TGlnYXR1cmVzIGZvbnRWYXJpYW50TnVtZXJpYyBmb250VmFyaWFudFBvc2l0aW9uIGZvbnRXZWlnaHQgbGluZUhlaWdodCIuc3BsaXQoCiAgICAgICAgICAiICIKICAgICAgICApLAogICAgICAgIGZvbnRWYXJpYW50OiAiZm9udFZhcmlhbnRBbHRlcm5hdGVzIGZvbnRWYXJpYW50Q2FwcyBmb250VmFyaWFudEVhc3RBc2lhbiBmb250VmFyaWFudExpZ2F0dXJlcyBmb250VmFyaWFudE51bWVyaWMgZm9udFZhcmlhbnRQb3NpdGlvbiIuc3BsaXQoCiAgICAgICAgICAiICIKICAgICAgICApLAogICAgICAgIGdhcDogWyJjb2x1bW5HYXAiLCAicm93R2FwIl0sCiAgICAgICAgZ3JpZDogImdyaWRBdXRvQ29sdW1ucyBncmlkQXV0b0Zsb3cgZ3JpZEF1dG9Sb3dzIGdyaWRUZW1wbGF0ZUFyZWFzIGdyaWRUZW1wbGF0ZUNvbHVtbnMgZ3JpZFRlbXBsYXRlUm93cyIuc3BsaXQoCiAgICAgICAgICAiICIKICAgICAgICApLAogICAgICAgIGdyaWRBcmVhOiBbCiAgICAgICAgICAiZ3JpZENvbHVtbkVuZCIsCiAgICAgICAgICAiZ3JpZENvbHVtblN0YXJ0IiwKICAgICAgICAgICJncmlkUm93RW5kIiwKICAgICAgICAgICJncmlkUm93U3RhcnQiCiAgICAgICAgXSwKICAgICAgICBncmlkQ29sdW1uOiBbImdyaWRDb2x1bW5FbmQiLCAiZ3JpZENvbHVtblN0YXJ0Il0sCiAgICAgICAgZ3JpZENvbHVtbkdhcDogWyJjb2x1bW5HYXAiXSwKICAgICAgICBncmlkR2FwOiBbImNvbHVtbkdhcCIsICJyb3dHYXAiXSwKICAgICAgICBncmlkUm93OiBbImdyaWRSb3dFbmQiLCAiZ3JpZFJvd1N0YXJ0Il0sCiAgICAgICAgZ3JpZFJvd0dhcDogWyJyb3dHYXAiXSwKICAgICAgICBncmlkVGVtcGxhdGU6IFsKICAgICAgICAgICJncmlkVGVtcGxhdGVBcmVhcyIsCiAgICAgICAgICAiZ3JpZFRlbXBsYXRlQ29sdW1ucyIsCiAgICAgICAgICAiZ3JpZFRlbXBsYXRlUm93cyIKICAgICAgICBdLAogICAgICAgIGxpc3RTdHlsZTogWyJsaXN0U3R5bGVJbWFnZSIsICJsaXN0U3R5bGVQb3NpdGlvbiIsICJsaXN0U3R5bGVUeXBlIl0sCiAgICAgICAgbWFyZ2luOiBbIm1hcmdpbkJvdHRvbSIsICJtYXJnaW5MZWZ0IiwgIm1hcmdpblJpZ2h0IiwgIm1hcmdpblRvcCJdLAogICAgICAgIG1hcmtlcjogWyJtYXJrZXJFbmQiLCAibWFya2VyTWlkIiwgIm1hcmtlclN0YXJ0Il0sCiAgICAgICAgbWFzazogIm1hc2tDbGlwIG1hc2tDb21wb3NpdGUgbWFza0ltYWdlIG1hc2tNb2RlIG1hc2tPcmlnaW4gbWFza1Bvc2l0aW9uWCBtYXNrUG9zaXRpb25ZIG1hc2tSZXBlYXQgbWFza1NpemUiLnNwbGl0KAogICAgICAgICAgIiAiCiAgICAgICAgKSwKICAgICAgICBtYXNrUG9zaXRpb246IFsibWFza1Bvc2l0aW9uWCIsICJtYXNrUG9zaXRpb25ZIl0sCiAgICAgICAgb3V0bGluZTogWyJvdXRsaW5lQ29sb3IiLCAib3V0bGluZVN0eWxlIiwgIm91dGxpbmVXaWR0aCJdLAogICAgICAgIG92ZXJmbG93OiBbIm92ZXJmbG93WCIsICJvdmVyZmxvd1kiXSwKICAgICAgICBwYWRkaW5nOiBbInBhZGRpbmdCb3R0b20iLCAicGFkZGluZ0xlZnQiLCAicGFkZGluZ1JpZ2h0IiwgInBhZGRpbmdUb3AiXSwKICAgICAgICBwbGFjZUNvbnRlbnQ6IFsiYWxpZ25Db250ZW50IiwgImp1c3RpZnlDb250ZW50Il0sCiAgICAgICAgcGxhY2VJdGVtczogWyJhbGlnbkl0ZW1zIiwgImp1c3RpZnlJdGVtcyJdLAogICAgICAgIHBsYWNlU2VsZjogWyJhbGlnblNlbGYiLCAianVzdGlmeVNlbGYiXSwKICAgICAgICB0ZXh0RGVjb3JhdGlvbjogWwogICAgICAgICAgInRleHREZWNvcmF0aW9uQ29sb3IiLAogICAgICAgICAgInRleHREZWNvcmF0aW9uTGluZSIsCiAgICAgICAgICAidGV4dERlY29yYXRpb25TdHlsZSIKICAgICAgICBdLAogICAgICAgIHRleHRFbXBoYXNpczogWyJ0ZXh0RW1waGFzaXNDb2xvciIsICJ0ZXh0RW1waGFzaXNTdHlsZSJdLAogICAgICAgIHRyYW5zaXRpb246IFsKICAgICAgICAgICJ0cmFuc2l0aW9uRGVsYXkiLAogICAgICAgICAgInRyYW5zaXRpb25EdXJhdGlvbiIsCiAgICAgICAgICAidHJhbnNpdGlvblByb3BlcnR5IiwKICAgICAgICAgICJ0cmFuc2l0aW9uVGltaW5nRnVuY3Rpb24iCiAgICAgICAgXSwKICAgICAgICB3b3JkV3JhcDogWyJvdmVyZmxvd1dyYXAiXQogICAgICB9LCB1cHBlcmNhc2VQYXR0ZXJuID0gLyhbQS1aXSkvZywgbXNQYXR0ZXJuJDEgPSAvXm1zLS8sIGJhZFZlbmRvcmVkU3R5bGVOYW1lUGF0dGVybiA9IC9eKD86d2Via2l0fG1venxvKVtBLVpdLywgbXNQYXR0ZXJuID0gL14tbXMtLywgaHlwaGVuUGF0dGVybiA9IC8tKC4pL2csIGJhZFN0eWxlVmFsdWVXaXRoU2VtaWNvbG9uUGF0dGVybiA9IC87XHMqJC8sIHdhcm5lZFN0eWxlTmFtZXMgPSB7fSwgd2FybmVkU3R5bGVWYWx1ZXMgPSB7fSwgd2FybmVkRm9yTmFOVmFsdWUgPSBmYWxzZSwgd2FybmVkRm9ySW5maW5pdHlWYWx1ZSA9IGZhbHNlLCB1bml0bGVzc051bWJlcnMgPSBuZXcgU2V0KAogICAgICAgICJhbmltYXRpb25JdGVyYXRpb25Db3VudCBhc3BlY3RSYXRpbyBib3JkZXJJbWFnZU91dHNldCBib3JkZXJJbWFnZVNsaWNlIGJvcmRlckltYWdlV2lkdGggYm94RmxleCBib3hGbGV4R3JvdXAgYm94T3JkaW5hbEdyb3VwIGNvbHVtbkNvdW50IGNvbHVtbnMgZmxleCBmbGV4R3JvdyBmbGV4UG9zaXRpdmUgZmxleFNocmluayBmbGV4TmVnYXRpdmUgZmxleE9yZGVyIGdyaWRBcmVhIGdyaWRSb3cgZ3JpZFJvd0VuZCBncmlkUm93U3BhbiBncmlkUm93U3RhcnQgZ3JpZENvbHVtbiBncmlkQ29sdW1uRW5kIGdyaWRDb2x1bW5TcGFuIGdyaWRDb2x1bW5TdGFydCBmb250V2VpZ2h0IGxpbmVDbGFtcCBsaW5lSGVpZ2h0IG9wYWNpdHkgb3JkZXIgb3JwaGFucyBzY2FsZSB0YWJTaXplIHdpZG93cyB6SW5kZXggem9vbSBmaWxsT3BhY2l0eSBmbG9vZE9wYWNpdHkgc3RvcE9wYWNpdHkgc3Ryb2tlRGFzaGFycmF5IHN0cm9rZURhc2hvZmZzZXQgc3Ryb2tlTWl0ZXJsaW1pdCBzdHJva2VPcGFjaXR5IHN0cm9rZVdpZHRoIE1vekFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50IE1vekJveEZsZXggTW96Qm94RmxleEdyb3VwIE1vekxpbmVDbGFtcCBtc0FuaW1hdGlvbkl0ZXJhdGlvbkNvdW50IG1zRmxleCBtc1pvb20gbXNGbGV4R3JvdyBtc0ZsZXhOZWdhdGl2ZSBtc0ZsZXhPcmRlciBtc0ZsZXhQb3NpdGl2ZSBtc0ZsZXhTaHJpbmsgbXNHcmlkQ29sdW1uIG1zR3JpZENvbHVtblNwYW4gbXNHcmlkUm93IG1zR3JpZFJvd1NwYW4gV2Via2l0QW5pbWF0aW9uSXRlcmF0aW9uQ291bnQgV2Via2l0Qm94RmxleCBXZWJLaXRCb3hGbGV4R3JvdXAgV2Via2l0Qm94T3JkaW5hbEdyb3VwIFdlYmtpdENvbHVtbkNvdW50IFdlYmtpdENvbHVtbnMgV2Via2l0RmxleCBXZWJraXRGbGV4R3JvdyBXZWJraXRGbGV4UG9zaXRpdmUgV2Via2l0RmxleFNocmluayBXZWJraXRMaW5lQ2xhbXAiLnNwbGl0KAogICAgICAgICAgIiAiCiAgICAgICAgKQogICAgICApLCBNQVRIX05BTUVTUEFDRSA9ICJodHRwOi8vd3d3LnczLm9yZy8xOTk4L01hdGgvTWF0aE1MIiwgU1ZHX05BTUVTUEFDRSA9ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsIGFsaWFzZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcChbCiAgICAgICAgWyJhY2NlcHRDaGFyc2V0IiwgImFjY2VwdC1jaGFyc2V0Il0sCiAgICAgICAgWyJodG1sRm9yIiwgImZvciJdLAogICAgICAgIFsiaHR0cEVxdWl2IiwgImh0dHAtZXF1aXYiXSwKICAgICAgICBbImNyb3NzT3JpZ2luIiwgImNyb3Nzb3JpZ2luIl0sCiAgICAgICAgWyJhY2NlbnRIZWlnaHQiLCAiYWNjZW50LWhlaWdodCJdLAogICAgICAgIFsiYWxpZ25tZW50QmFzZWxpbmUiLCAiYWxpZ25tZW50LWJhc2VsaW5lIl0sCiAgICAgICAgWyJhcmFiaWNGb3JtIiwgImFyYWJpYy1mb3JtIl0sCiAgICAgICAgWyJiYXNlbGluZVNoaWZ0IiwgImJhc2VsaW5lLXNoaWZ0Il0sCiAgICAgICAgWyJjYXBIZWlnaHQiLCAiY2FwLWhlaWdodCJdLAogICAgICAgIFsiY2xpcFBhdGgiLCAiY2xpcC1wYXRoIl0sCiAgICAgICAgWyJjbGlwUnVsZSIsICJjbGlwLXJ1bGUiXSwKICAgICAgICBbImNvbG9ySW50ZXJwb2xhdGlvbiIsICJjb2xvci1pbnRlcnBvbGF0aW9uIl0sCiAgICAgICAgWyJjb2xvckludGVycG9sYXRpb25GaWx0ZXJzIiwgImNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycyJdLAogICAgICAgIFsiY29sb3JQcm9maWxlIiwgImNvbG9yLXByb2ZpbGUiXSwKICAgICAgICBbImNvbG9yUmVuZGVyaW5nIiwgImNvbG9yLXJlbmRlcmluZyJdLAogICAgICAgIFsiZG9taW5hbnRCYXNlbGluZSIsICJkb21pbmFudC1iYXNlbGluZSJdLAogICAgICAgIFsiZW5hYmxlQmFja2dyb3VuZCIsICJlbmFibGUtYmFja2dyb3VuZCJdLAogICAgICAgIFsiZmlsbE9wYWNpdHkiLCAiZmlsbC1vcGFjaXR5Il0sCiAgICAgICAgWyJmaWxsUnVsZSIsICJmaWxsLXJ1bGUiXSwKICAgICAgICBbImZsb29kQ29sb3IiLCAiZmxvb2QtY29sb3IiXSwKICAgICAgICBbImZsb29kT3BhY2l0eSIsICJmbG9vZC1vcGFjaXR5Il0sCiAgICAgICAgWyJmb250RmFtaWx5IiwgImZvbnQtZmFtaWx5Il0sCiAgICAgICAgWyJmb250U2l6ZSIsICJmb250LXNpemUiXSwKICAgICAgICBbImZvbnRTaXplQWRqdXN0IiwgImZvbnQtc2l6ZS1hZGp1c3QiXSwKICAgICAgICBbImZvbnRTdHJldGNoIiwgImZvbnQtc3RyZXRjaCJdLAogICAgICAgIFsiZm9udFN0eWxlIiwgImZvbnQtc3R5bGUiXSwKICAgICAgICBbImZvbnRWYXJpYW50IiwgImZvbnQtdmFyaWFudCJdLAogICAgICAgIFsiZm9udFdlaWdodCIsICJmb250LXdlaWdodCJdLAogICAgICAgIFsiZ2x5cGhOYW1lIiwgImdseXBoLW5hbWUiXSwKICAgICAgICBbImdseXBoT3JpZW50YXRpb25Ib3Jpem9udGFsIiwgImdseXBoLW9yaWVudGF0aW9uLWhvcml6b250YWwiXSwKICAgICAgICBbImdseXBoT3JpZW50YXRpb25WZXJ0aWNhbCIsICJnbHlwaC1vcmllbnRhdGlvbi12ZXJ0aWNhbCJdLAogICAgICAgIFsiaG9yaXpBZHZYIiwgImhvcml6LWFkdi14Il0sCiAgICAgICAgWyJob3Jpek9yaWdpblgiLCAiaG9yaXotb3JpZ2luLXgiXSwKICAgICAgICBbImltYWdlUmVuZGVyaW5nIiwgImltYWdlLXJlbmRlcmluZyJdLAogICAgICAgIFsibGV0dGVyU3BhY2luZyIsICJsZXR0ZXItc3BhY2luZyJdLAogICAgICAgIFsibGlnaHRpbmdDb2xvciIsICJsaWdodGluZy1jb2xvciJdLAogICAgICAgIFsibWFya2VyRW5kIiwgIm1hcmtlci1lbmQiXSwKICAgICAgICBbIm1hcmtlck1pZCIsICJtYXJrZXItbWlkIl0sCiAgICAgICAgWyJtYXJrZXJTdGFydCIsICJtYXJrZXItc3RhcnQiXSwKICAgICAgICBbIm92ZXJsaW5lUG9zaXRpb24iLCAib3ZlcmxpbmUtcG9zaXRpb24iXSwKICAgICAgICBbIm92ZXJsaW5lVGhpY2tuZXNzIiwgIm92ZXJsaW5lLXRoaWNrbmVzcyJdLAogICAgICAgIFsicGFpbnRPcmRlciIsICJwYWludC1vcmRlciJdLAogICAgICAgIFsicGFub3NlLTEiLCAicGFub3NlLTEiXSwKICAgICAgICBbInBvaW50ZXJFdmVudHMiLCAicG9pbnRlci1ldmVudHMiXSwKICAgICAgICBbInJlbmRlcmluZ0ludGVudCIsICJyZW5kZXJpbmctaW50ZW50Il0sCiAgICAgICAgWyJzaGFwZVJlbmRlcmluZyIsICJzaGFwZS1yZW5kZXJpbmciXSwKICAgICAgICBbInN0b3BDb2xvciIsICJzdG9wLWNvbG9yIl0sCiAgICAgICAgWyJzdG9wT3BhY2l0eSIsICJzdG9wLW9wYWNpdHkiXSwKICAgICAgICBbInN0cmlrZXRocm91Z2hQb3NpdGlvbiIsICJzdHJpa2V0aHJvdWdoLXBvc2l0aW9uIl0sCiAgICAgICAgWyJzdHJpa2V0aHJvdWdoVGhpY2tuZXNzIiwgInN0cmlrZXRocm91Z2gtdGhpY2tuZXNzIl0sCiAgICAgICAgWyJzdHJva2VEYXNoYXJyYXkiLCAic3Ryb2tlLWRhc2hhcnJheSJdLAogICAgICAgIFsic3Ryb2tlRGFzaG9mZnNldCIsICJzdHJva2UtZGFzaG9mZnNldCJdLAogICAgICAgIFsic3Ryb2tlTGluZWNhcCIsICJzdHJva2UtbGluZWNhcCJdLAogICAgICAgIFsic3Ryb2tlTGluZWpvaW4iLCAic3Ryb2tlLWxpbmVqb2luIl0sCiAgICAgICAgWyJzdHJva2VNaXRlcmxpbWl0IiwgInN0cm9rZS1taXRlcmxpbWl0Il0sCiAgICAgICAgWyJzdHJva2VPcGFjaXR5IiwgInN0cm9rZS1vcGFjaXR5Il0sCiAgICAgICAgWyJzdHJva2VXaWR0aCIsICJzdHJva2Utd2lkdGgiXSwKICAgICAgICBbInRleHRBbmNob3IiLCAidGV4dC1hbmNob3IiXSwKICAgICAgICBbInRleHREZWNvcmF0aW9uIiwgInRleHQtZGVjb3JhdGlvbiJdLAogICAgICAgIFsidGV4dFJlbmRlcmluZyIsICJ0ZXh0LXJlbmRlcmluZyJdLAogICAgICAgIFsidHJhbnNmb3JtT3JpZ2luIiwgInRyYW5zZm9ybS1vcmlnaW4iXSwKICAgICAgICBbInVuZGVybGluZVBvc2l0aW9uIiwgInVuZGVybGluZS1wb3NpdGlvbiJdLAogICAgICAgIFsidW5kZXJsaW5lVGhpY2tuZXNzIiwgInVuZGVybGluZS10aGlja25lc3MiXSwKICAgICAgICBbInVuaWNvZGVCaWRpIiwgInVuaWNvZGUtYmlkaSJdLAogICAgICAgIFsidW5pY29kZVJhbmdlIiwgInVuaWNvZGUtcmFuZ2UiXSwKICAgICAgICBbInVuaXRzUGVyRW0iLCAidW5pdHMtcGVyLWVtIl0sCiAgICAgICAgWyJ2QWxwaGFiZXRpYyIsICJ2LWFscGhhYmV0aWMiXSwKICAgICAgICBbInZIYW5naW5nIiwgInYtaGFuZ2luZyJdLAogICAgICAgIFsidklkZW9ncmFwaGljIiwgInYtaWRlb2dyYXBoaWMiXSwKICAgICAgICBbInZNYXRoZW1hdGljYWwiLCAidi1tYXRoZW1hdGljYWwiXSwKICAgICAgICBbInZlY3RvckVmZmVjdCIsICJ2ZWN0b3ItZWZmZWN0Il0sCiAgICAgICAgWyJ2ZXJ0QWR2WSIsICJ2ZXJ0LWFkdi15Il0sCiAgICAgICAgWyJ2ZXJ0T3JpZ2luWCIsICJ2ZXJ0LW9yaWdpbi14Il0sCiAgICAgICAgWyJ2ZXJ0T3JpZ2luWSIsICJ2ZXJ0LW9yaWdpbi15Il0sCiAgICAgICAgWyJ3b3JkU3BhY2luZyIsICJ3b3JkLXNwYWNpbmciXSwKICAgICAgICBbIndyaXRpbmdNb2RlIiwgIndyaXRpbmctbW9kZSJdLAogICAgICAgIFsieG1sbnNYbGluayIsICJ4bWxuczp4bGluayJdLAogICAgICAgIFsieEhlaWdodCIsICJ4LWhlaWdodCJdCiAgICAgIF0pLCBwb3NzaWJsZVN0YW5kYXJkTmFtZXMgPSB7CiAgICAgICAgYWNjZXB0OiAiYWNjZXB0IiwKICAgICAgICBhY2NlcHRjaGFyc2V0OiAiYWNjZXB0Q2hhcnNldCIsCiAgICAgICAgImFjY2VwdC1jaGFyc2V0IjogImFjY2VwdENoYXJzZXQiLAogICAgICAgIGFjY2Vzc2tleTogImFjY2Vzc0tleSIsCiAgICAgICAgYWN0aW9uOiAiYWN0aW9uIiwKICAgICAgICBhbGxvd2Z1bGxzY3JlZW46ICJhbGxvd0Z1bGxTY3JlZW4iLAogICAgICAgIGFsdDogImFsdCIsCiAgICAgICAgYXM6ICJhcyIsCiAgICAgICAgYXN5bmM6ICJhc3luYyIsCiAgICAgICAgYXV0b2NhcGl0YWxpemU6ICJhdXRvQ2FwaXRhbGl6ZSIsCiAgICAgICAgYXV0b2NvbXBsZXRlOiAiYXV0b0NvbXBsZXRlIiwKICAgICAgICBhdXRvY29ycmVjdDogImF1dG9Db3JyZWN0IiwKICAgICAgICBhdXRvZm9jdXM6ICJhdXRvRm9jdXMiLAogICAgICAgIGF1dG9wbGF5OiAiYXV0b1BsYXkiLAogICAgICAgIGF1dG9zYXZlOiAiYXV0b1NhdmUiLAogICAgICAgIGNhcHR1cmU6ICJjYXB0dXJlIiwKICAgICAgICBjZWxscGFkZGluZzogImNlbGxQYWRkaW5nIiwKICAgICAgICBjZWxsc3BhY2luZzogImNlbGxTcGFjaW5nIiwKICAgICAgICBjaGFsbGVuZ2U6ICJjaGFsbGVuZ2UiLAogICAgICAgIGNoYXJzZXQ6ICJjaGFyU2V0IiwKICAgICAgICBjaGVja2VkOiAiY2hlY2tlZCIsCiAgICAgICAgY2hpbGRyZW46ICJjaGlsZHJlbiIsCiAgICAgICAgY2l0ZTogImNpdGUiLAogICAgICAgIGNsYXNzOiAiY2xhc3NOYW1lIiwKICAgICAgICBjbGFzc2lkOiAiY2xhc3NJRCIsCiAgICAgICAgY2xhc3NuYW1lOiAiY2xhc3NOYW1lIiwKICAgICAgICBjb2xzOiAiY29scyIsCiAgICAgICAgY29sc3BhbjogImNvbFNwYW4iLAogICAgICAgIGNvbnRlbnQ6ICJjb250ZW50IiwKICAgICAgICBjb250ZW50ZWRpdGFibGU6ICJjb250ZW50RWRpdGFibGUiLAogICAgICAgIGNvbnRleHRtZW51OiAiY29udGV4dE1lbnUiLAogICAgICAgIGNvbnRyb2xzOiAiY29udHJvbHMiLAogICAgICAgIGNvbnRyb2xzbGlzdDogImNvbnRyb2xzTGlzdCIsCiAgICAgICAgY29vcmRzOiAiY29vcmRzIiwKICAgICAgICBjcm9zc29yaWdpbjogImNyb3NzT3JpZ2luIiwKICAgICAgICBkYW5nZXJvdXNseXNldGlubmVyaHRtbDogImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIiwKICAgICAgICBkYXRhOiAiZGF0YSIsCiAgICAgICAgZGF0ZXRpbWU6ICJkYXRlVGltZSIsCiAgICAgICAgZGVmYXVsdDogImRlZmF1bHQiLAogICAgICAgIGRlZmF1bHRjaGVja2VkOiAiZGVmYXVsdENoZWNrZWQiLAogICAgICAgIGRlZmF1bHR2YWx1ZTogImRlZmF1bHRWYWx1ZSIsCiAgICAgICAgZGVmZXI6ICJkZWZlciIsCiAgICAgICAgZGlyOiAiZGlyIiwKICAgICAgICBkaXNhYmxlZDogImRpc2FibGVkIiwKICAgICAgICBkaXNhYmxlcGljdHVyZWlucGljdHVyZTogImRpc2FibGVQaWN0dXJlSW5QaWN0dXJlIiwKICAgICAgICBkaXNhYmxlcmVtb3RlcGxheWJhY2s6ICJkaXNhYmxlUmVtb3RlUGxheWJhY2siLAogICAgICAgIGRvd25sb2FkOiAiZG93bmxvYWQiLAogICAgICAgIGRyYWdnYWJsZTogImRyYWdnYWJsZSIsCiAgICAgICAgZW5jdHlwZTogImVuY1R5cGUiLAogICAgICAgIGVudGVya2V5aGludDogImVudGVyS2V5SGludCIsCiAgICAgICAgZmV0Y2hwcmlvcml0eTogImZldGNoUHJpb3JpdHkiLAogICAgICAgIGZvcjogImh0bWxGb3IiLAogICAgICAgIGZvcm06ICJmb3JtIiwKICAgICAgICBmb3JtbWV0aG9kOiAiZm9ybU1ldGhvZCIsCiAgICAgICAgZm9ybWFjdGlvbjogImZvcm1BY3Rpb24iLAogICAgICAgIGZvcm1lbmN0eXBlOiAiZm9ybUVuY1R5cGUiLAogICAgICAgIGZvcm1ub3ZhbGlkYXRlOiAiZm9ybU5vVmFsaWRhdGUiLAogICAgICAgIGZvcm10YXJnZXQ6ICJmb3JtVGFyZ2V0IiwKICAgICAgICBmcmFtZWJvcmRlcjogImZyYW1lQm9yZGVyIiwKICAgICAgICBoZWFkZXJzOiAiaGVhZGVycyIsCiAgICAgICAgaGVpZ2h0OiAiaGVpZ2h0IiwKICAgICAgICBoaWRkZW46ICJoaWRkZW4iLAogICAgICAgIGhpZ2g6ICJoaWdoIiwKICAgICAgICBocmVmOiAiaHJlZiIsCiAgICAgICAgaHJlZmxhbmc6ICJocmVmTGFuZyIsCiAgICAgICAgaHRtbGZvcjogImh0bWxGb3IiLAogICAgICAgIGh0dHBlcXVpdjogImh0dHBFcXVpdiIsCiAgICAgICAgImh0dHAtZXF1aXYiOiAiaHR0cEVxdWl2IiwKICAgICAgICBpY29uOiAiaWNvbiIsCiAgICAgICAgaWQ6ICJpZCIsCiAgICAgICAgaW1hZ2VzaXplczogImltYWdlU2l6ZXMiLAogICAgICAgIGltYWdlc3Jjc2V0OiAiaW1hZ2VTcmNTZXQiLAogICAgICAgIGluZXJ0OiAiaW5lcnQiLAogICAgICAgIGlubmVyaHRtbDogImlubmVySFRNTCIsCiAgICAgICAgaW5wdXRtb2RlOiAiaW5wdXRNb2RlIiwKICAgICAgICBpbnRlZ3JpdHk6ICJpbnRlZ3JpdHkiLAogICAgICAgIGlzOiAiaXMiLAogICAgICAgIGl0ZW1pZDogIml0ZW1JRCIsCiAgICAgICAgaXRlbXByb3A6ICJpdGVtUHJvcCIsCiAgICAgICAgaXRlbXJlZjogIml0ZW1SZWYiLAogICAgICAgIGl0ZW1zY29wZTogIml0ZW1TY29wZSIsCiAgICAgICAgaXRlbXR5cGU6ICJpdGVtVHlwZSIsCiAgICAgICAga2V5cGFyYW1zOiAia2V5UGFyYW1zIiwKICAgICAgICBrZXl0eXBlOiAia2V5VHlwZSIsCiAgICAgICAga2luZDogImtpbmQiLAogICAgICAgIGxhYmVsOiAibGFiZWwiLAogICAgICAgIGxhbmc6ICJsYW5nIiwKICAgICAgICBsaXN0OiAibGlzdCIsCiAgICAgICAgbG9vcDogImxvb3AiLAogICAgICAgIGxvdzogImxvdyIsCiAgICAgICAgbWFuaWZlc3Q6ICJtYW5pZmVzdCIsCiAgICAgICAgbWFyZ2lud2lkdGg6ICJtYXJnaW5XaWR0aCIsCiAgICAgICAgbWFyZ2luaGVpZ2h0OiAibWFyZ2luSGVpZ2h0IiwKICAgICAgICBtYXg6ICJtYXgiLAogICAgICAgIG1heGxlbmd0aDogIm1heExlbmd0aCIsCiAgICAgICAgbWVkaWE6ICJtZWRpYSIsCiAgICAgICAgbWVkaWFncm91cDogIm1lZGlhR3JvdXAiLAogICAgICAgIG1ldGhvZDogIm1ldGhvZCIsCiAgICAgICAgbWluOiAibWluIiwKICAgICAgICBtaW5sZW5ndGg6ICJtaW5MZW5ndGgiLAogICAgICAgIG11bHRpcGxlOiAibXVsdGlwbGUiLAogICAgICAgIG11dGVkOiAibXV0ZWQiLAogICAgICAgIG5hbWU6ICJuYW1lIiwKICAgICAgICBub21vZHVsZTogIm5vTW9kdWxlIiwKICAgICAgICBub25jZTogIm5vbmNlIiwKICAgICAgICBub3ZhbGlkYXRlOiAibm9WYWxpZGF0ZSIsCiAgICAgICAgb3BlbjogIm9wZW4iLAogICAgICAgIG9wdGltdW06ICJvcHRpbXVtIiwKICAgICAgICBwYXR0ZXJuOiAicGF0dGVybiIsCiAgICAgICAgcGxhY2Vob2xkZXI6ICJwbGFjZWhvbGRlciIsCiAgICAgICAgcGxheXNpbmxpbmU6ICJwbGF5c0lubGluZSIsCiAgICAgICAgcG9zdGVyOiAicG9zdGVyIiwKICAgICAgICBwcmVsb2FkOiAicHJlbG9hZCIsCiAgICAgICAgcHJvZmlsZTogInByb2ZpbGUiLAogICAgICAgIHJhZGlvZ3JvdXA6ICJyYWRpb0dyb3VwIiwKICAgICAgICByZWFkb25seTogInJlYWRPbmx5IiwKICAgICAgICByZWZlcnJlcnBvbGljeTogInJlZmVycmVyUG9saWN5IiwKICAgICAgICByZWw6ICJyZWwiLAogICAgICAgIHJlcXVpcmVkOiAicmVxdWlyZWQiLAogICAgICAgIHJldmVyc2VkOiAicmV2ZXJzZWQiLAogICAgICAgIHJvbGU6ICJyb2xlIiwKICAgICAgICByb3dzOiAicm93cyIsCiAgICAgICAgcm93c3BhbjogInJvd1NwYW4iLAogICAgICAgIHNhbmRib3g6ICJzYW5kYm94IiwKICAgICAgICBzY29wZTogInNjb3BlIiwKICAgICAgICBzY29wZWQ6ICJzY29wZWQiLAogICAgICAgIHNjcm9sbGluZzogInNjcm9sbGluZyIsCiAgICAgICAgc2VhbWxlc3M6ICJzZWFtbGVzcyIsCiAgICAgICAgc2VsZWN0ZWQ6ICJzZWxlY3RlZCIsCiAgICAgICAgc2hhcGU6ICJzaGFwZSIsCiAgICAgICAgc2l6ZTogInNpemUiLAogICAgICAgIHNpemVzOiAic2l6ZXMiLAogICAgICAgIHNwYW46ICJzcGFuIiwKICAgICAgICBzcGVsbGNoZWNrOiAic3BlbGxDaGVjayIsCiAgICAgICAgc3JjOiAic3JjIiwKICAgICAgICBzcmNkb2M6ICJzcmNEb2MiLAogICAgICAgIHNyY2xhbmc6ICJzcmNMYW5nIiwKICAgICAgICBzcmNzZXQ6ICJzcmNTZXQiLAogICAgICAgIHN0YXJ0OiAic3RhcnQiLAogICAgICAgIHN0ZXA6ICJzdGVwIiwKICAgICAgICBzdHlsZTogInN0eWxlIiwKICAgICAgICBzdW1tYXJ5OiAic3VtbWFyeSIsCiAgICAgICAgdGFiaW5kZXg6ICJ0YWJJbmRleCIsCiAgICAgICAgdGFyZ2V0OiAidGFyZ2V0IiwKICAgICAgICB0aXRsZTogInRpdGxlIiwKICAgICAgICB0eXBlOiAidHlwZSIsCiAgICAgICAgdXNlbWFwOiAidXNlTWFwIiwKICAgICAgICB2YWx1ZTogInZhbHVlIiwKICAgICAgICB3aWR0aDogIndpZHRoIiwKICAgICAgICB3bW9kZTogIndtb2RlIiwKICAgICAgICB3cmFwOiAid3JhcCIsCiAgICAgICAgYWJvdXQ6ICJhYm91dCIsCiAgICAgICAgYWNjZW50aGVpZ2h0OiAiYWNjZW50SGVpZ2h0IiwKICAgICAgICAiYWNjZW50LWhlaWdodCI6ICJhY2NlbnRIZWlnaHQiLAogICAgICAgIGFjY3VtdWxhdGU6ICJhY2N1bXVsYXRlIiwKICAgICAgICBhZGRpdGl2ZTogImFkZGl0aXZlIiwKICAgICAgICBhbGlnbm1lbnRiYXNlbGluZTogImFsaWdubWVudEJhc2VsaW5lIiwKICAgICAgICAiYWxpZ25tZW50LWJhc2VsaW5lIjogImFsaWdubWVudEJhc2VsaW5lIiwKICAgICAgICBhbGxvd3Jlb3JkZXI6ICJhbGxvd1Jlb3JkZXIiLAogICAgICAgIGFscGhhYmV0aWM6ICJhbHBoYWJldGljIiwKICAgICAgICBhbXBsaXR1ZGU6ICJhbXBsaXR1ZGUiLAogICAgICAgIGFyYWJpY2Zvcm06ICJhcmFiaWNGb3JtIiwKICAgICAgICAiYXJhYmljLWZvcm0iOiAiYXJhYmljRm9ybSIsCiAgICAgICAgYXNjZW50OiAiYXNjZW50IiwKICAgICAgICBhdHRyaWJ1dGVuYW1lOiAiYXR0cmlidXRlTmFtZSIsCiAgICAgICAgYXR0cmlidXRldHlwZTogImF0dHJpYnV0ZVR5cGUiLAogICAgICAgIGF1dG9yZXZlcnNlOiAiYXV0b1JldmVyc2UiLAogICAgICAgIGF6aW11dGg6ICJhemltdXRoIiwKICAgICAgICBiYXNlZnJlcXVlbmN5OiAiYmFzZUZyZXF1ZW5jeSIsCiAgICAgICAgYmFzZWxpbmVzaGlmdDogImJhc2VsaW5lU2hpZnQiLAogICAgICAgICJiYXNlbGluZS1zaGlmdCI6ICJiYXNlbGluZVNoaWZ0IiwKICAgICAgICBiYXNlcHJvZmlsZTogImJhc2VQcm9maWxlIiwKICAgICAgICBiYm94OiAiYmJveCIsCiAgICAgICAgYmVnaW46ICJiZWdpbiIsCiAgICAgICAgYmlhczogImJpYXMiLAogICAgICAgIGJ5OiAiYnkiLAogICAgICAgIGNhbGNtb2RlOiAiY2FsY01vZGUiLAogICAgICAgIGNhcGhlaWdodDogImNhcEhlaWdodCIsCiAgICAgICAgImNhcC1oZWlnaHQiOiAiY2FwSGVpZ2h0IiwKICAgICAgICBjbGlwOiAiY2xpcCIsCiAgICAgICAgY2xpcHBhdGg6ICJjbGlwUGF0aCIsCiAgICAgICAgImNsaXAtcGF0aCI6ICJjbGlwUGF0aCIsCiAgICAgICAgY2xpcHBhdGh1bml0czogImNsaXBQYXRoVW5pdHMiLAogICAgICAgIGNsaXBydWxlOiAiY2xpcFJ1bGUiLAogICAgICAgICJjbGlwLXJ1bGUiOiAiY2xpcFJ1bGUiLAogICAgICAgIGNvbG9yOiAiY29sb3IiLAogICAgICAgIGNvbG9yaW50ZXJwb2xhdGlvbjogImNvbG9ySW50ZXJwb2xhdGlvbiIsCiAgICAgICAgImNvbG9yLWludGVycG9sYXRpb24iOiAiY29sb3JJbnRlcnBvbGF0aW9uIiwKICAgICAgICBjb2xvcmludGVycG9sYXRpb25maWx0ZXJzOiAiY29sb3JJbnRlcnBvbGF0aW9uRmlsdGVycyIsCiAgICAgICAgImNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycyI6ICJjb2xvckludGVycG9sYXRpb25GaWx0ZXJzIiwKICAgICAgICBjb2xvcnByb2ZpbGU6ICJjb2xvclByb2ZpbGUiLAogICAgICAgICJjb2xvci1wcm9maWxlIjogImNvbG9yUHJvZmlsZSIsCiAgICAgICAgY29sb3JyZW5kZXJpbmc6ICJjb2xvclJlbmRlcmluZyIsCiAgICAgICAgImNvbG9yLXJlbmRlcmluZyI6ICJjb2xvclJlbmRlcmluZyIsCiAgICAgICAgY29udGVudHNjcmlwdHR5cGU6ICJjb250ZW50U2NyaXB0VHlwZSIsCiAgICAgICAgY29udGVudHN0eWxldHlwZTogImNvbnRlbnRTdHlsZVR5cGUiLAogICAgICAgIGN1cnNvcjogImN1cnNvciIsCiAgICAgICAgY3g6ICJjeCIsCiAgICAgICAgY3k6ICJjeSIsCiAgICAgICAgZDogImQiLAogICAgICAgIGRhdGF0eXBlOiAiZGF0YXR5cGUiLAogICAgICAgIGRlY2VsZXJhdGU6ICJkZWNlbGVyYXRlIiwKICAgICAgICBkZXNjZW50OiAiZGVzY2VudCIsCiAgICAgICAgZGlmZnVzZWNvbnN0YW50OiAiZGlmZnVzZUNvbnN0YW50IiwKICAgICAgICBkaXJlY3Rpb246ICJkaXJlY3Rpb24iLAogICAgICAgIGRpc3BsYXk6ICJkaXNwbGF5IiwKICAgICAgICBkaXZpc29yOiAiZGl2aXNvciIsCiAgICAgICAgZG9taW5hbnRiYXNlbGluZTogImRvbWluYW50QmFzZWxpbmUiLAogICAgICAgICJkb21pbmFudC1iYXNlbGluZSI6ICJkb21pbmFudEJhc2VsaW5lIiwKICAgICAgICBkdXI6ICJkdXIiLAogICAgICAgIGR4OiAiZHgiLAogICAgICAgIGR5OiAiZHkiLAogICAgICAgIGVkZ2Vtb2RlOiAiZWRnZU1vZGUiLAogICAgICAgIGVsZXZhdGlvbjogImVsZXZhdGlvbiIsCiAgICAgICAgZW5hYmxlYmFja2dyb3VuZDogImVuYWJsZUJhY2tncm91bmQiLAogICAgICAgICJlbmFibGUtYmFja2dyb3VuZCI6ICJlbmFibGVCYWNrZ3JvdW5kIiwKICAgICAgICBlbmQ6ICJlbmQiLAogICAgICAgIGV4cG9uZW50OiAiZXhwb25lbnQiLAogICAgICAgIGV4dGVybmFscmVzb3VyY2VzcmVxdWlyZWQ6ICJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkIiwKICAgICAgICBmaWxsOiAiZmlsbCIsCiAgICAgICAgZmlsbG9wYWNpdHk6ICJmaWxsT3BhY2l0eSIsCiAgICAgICAgImZpbGwtb3BhY2l0eSI6ICJmaWxsT3BhY2l0eSIsCiAgICAgICAgZmlsbHJ1bGU6ICJmaWxsUnVsZSIsCiAgICAgICAgImZpbGwtcnVsZSI6ICJmaWxsUnVsZSIsCiAgICAgICAgZmlsdGVyOiAiZmlsdGVyIiwKICAgICAgICBmaWx0ZXJyZXM6ICJmaWx0ZXJSZXMiLAogICAgICAgIGZpbHRlcnVuaXRzOiAiZmlsdGVyVW5pdHMiLAogICAgICAgIGZsb29kb3BhY2l0eTogImZsb29kT3BhY2l0eSIsCiAgICAgICAgImZsb29kLW9wYWNpdHkiOiAiZmxvb2RPcGFjaXR5IiwKICAgICAgICBmbG9vZGNvbG9yOiAiZmxvb2RDb2xvciIsCiAgICAgICAgImZsb29kLWNvbG9yIjogImZsb29kQ29sb3IiLAogICAgICAgIGZvY3VzYWJsZTogImZvY3VzYWJsZSIsCiAgICAgICAgZm9udGZhbWlseTogImZvbnRGYW1pbHkiLAogICAgICAgICJmb250LWZhbWlseSI6ICJmb250RmFtaWx5IiwKICAgICAgICBmb250c2l6ZTogImZvbnRTaXplIiwKICAgICAgICAiZm9udC1zaXplIjogImZvbnRTaXplIiwKICAgICAgICBmb250c2l6ZWFkanVzdDogImZvbnRTaXplQWRqdXN0IiwKICAgICAgICAiZm9udC1zaXplLWFkanVzdCI6ICJmb250U2l6ZUFkanVzdCIsCiAgICAgICAgZm9udHN0cmV0Y2g6ICJmb250U3RyZXRjaCIsCiAgICAgICAgImZvbnQtc3RyZXRjaCI6ICJmb250U3RyZXRjaCIsCiAgICAgICAgZm9udHN0eWxlOiAiZm9udFN0eWxlIiwKICAgICAgICAiZm9udC1zdHlsZSI6ICJmb250U3R5bGUiLAogICAgICAgIGZvbnR2YXJpYW50OiAiZm9udFZhcmlhbnQiLAogICAgICAgICJmb250LXZhcmlhbnQiOiAiZm9udFZhcmlhbnQiLAogICAgICAgIGZvbnR3ZWlnaHQ6ICJmb250V2VpZ2h0IiwKICAgICAgICAiZm9udC13ZWlnaHQiOiAiZm9udFdlaWdodCIsCiAgICAgICAgZm9ybWF0OiAiZm9ybWF0IiwKICAgICAgICBmcm9tOiAiZnJvbSIsCiAgICAgICAgZng6ICJmeCIsCiAgICAgICAgZnk6ICJmeSIsCiAgICAgICAgZzE6ICJnMSIsCiAgICAgICAgZzI6ICJnMiIsCiAgICAgICAgZ2x5cGhuYW1lOiAiZ2x5cGhOYW1lIiwKICAgICAgICAiZ2x5cGgtbmFtZSI6ICJnbHlwaE5hbWUiLAogICAgICAgIGdseXBob3JpZW50YXRpb25ob3Jpem9udGFsOiAiZ2x5cGhPcmllbnRhdGlvbkhvcml6b250YWwiLAogICAgICAgICJnbHlwaC1vcmllbnRhdGlvbi1ob3Jpem9udGFsIjogImdseXBoT3JpZW50YXRpb25Ib3Jpem9udGFsIiwKICAgICAgICBnbHlwaG9yaWVudGF0aW9udmVydGljYWw6ICJnbHlwaE9yaWVudGF0aW9uVmVydGljYWwiLAogICAgICAgICJnbHlwaC1vcmllbnRhdGlvbi12ZXJ0aWNhbCI6ICJnbHlwaE9yaWVudGF0aW9uVmVydGljYWwiLAogICAgICAgIGdseXBocmVmOiAiZ2x5cGhSZWYiLAogICAgICAgIGdyYWRpZW50dHJhbnNmb3JtOiAiZ3JhZGllbnRUcmFuc2Zvcm0iLAogICAgICAgIGdyYWRpZW50dW5pdHM6ICJncmFkaWVudFVuaXRzIiwKICAgICAgICBoYW5naW5nOiAiaGFuZ2luZyIsCiAgICAgICAgaG9yaXphZHZ4OiAiaG9yaXpBZHZYIiwKICAgICAgICAiaG9yaXotYWR2LXgiOiAiaG9yaXpBZHZYIiwKICAgICAgICBob3Jpem9yaWdpbng6ICJob3Jpek9yaWdpblgiLAogICAgICAgICJob3Jpei1vcmlnaW4teCI6ICJob3Jpek9yaWdpblgiLAogICAgICAgIGlkZW9ncmFwaGljOiAiaWRlb2dyYXBoaWMiLAogICAgICAgIGltYWdlcmVuZGVyaW5nOiAiaW1hZ2VSZW5kZXJpbmciLAogICAgICAgICJpbWFnZS1yZW5kZXJpbmciOiAiaW1hZ2VSZW5kZXJpbmciLAogICAgICAgIGluMjogImluMiIsCiAgICAgICAgaW46ICJpbiIsCiAgICAgICAgaW5saXN0OiAiaW5saXN0IiwKICAgICAgICBpbnRlcmNlcHQ6ICJpbnRlcmNlcHQiLAogICAgICAgIGsxOiAiazEiLAogICAgICAgIGsyOiAiazIiLAogICAgICAgIGszOiAiazMiLAogICAgICAgIGs0OiAiazQiLAogICAgICAgIGs6ICJrIiwKICAgICAgICBrZXJuZWxtYXRyaXg6ICJrZXJuZWxNYXRyaXgiLAogICAgICAgIGtlcm5lbHVuaXRsZW5ndGg6ICJrZXJuZWxVbml0TGVuZ3RoIiwKICAgICAgICBrZXJuaW5nOiAia2VybmluZyIsCiAgICAgICAga2V5cG9pbnRzOiAia2V5UG9pbnRzIiwKICAgICAgICBrZXlzcGxpbmVzOiAia2V5U3BsaW5lcyIsCiAgICAgICAga2V5dGltZXM6ICJrZXlUaW1lcyIsCiAgICAgICAgbGVuZ3RoYWRqdXN0OiAibGVuZ3RoQWRqdXN0IiwKICAgICAgICBsZXR0ZXJzcGFjaW5nOiAibGV0dGVyU3BhY2luZyIsCiAgICAgICAgImxldHRlci1zcGFjaW5nIjogImxldHRlclNwYWNpbmciLAogICAgICAgIGxpZ2h0aW5nY29sb3I6ICJsaWdodGluZ0NvbG9yIiwKICAgICAgICAibGlnaHRpbmctY29sb3IiOiAibGlnaHRpbmdDb2xvciIsCiAgICAgICAgbGltaXRpbmdjb25lYW5nbGU6ICJsaW1pdGluZ0NvbmVBbmdsZSIsCiAgICAgICAgbG9jYWw6ICJsb2NhbCIsCiAgICAgICAgbWFya2VyZW5kOiAibWFya2VyRW5kIiwKICAgICAgICAibWFya2VyLWVuZCI6ICJtYXJrZXJFbmQiLAogICAgICAgIG1hcmtlcmhlaWdodDogIm1hcmtlckhlaWdodCIsCiAgICAgICAgbWFya2VybWlkOiAibWFya2VyTWlkIiwKICAgICAgICAibWFya2VyLW1pZCI6ICJtYXJrZXJNaWQiLAogICAgICAgIG1hcmtlcnN0YXJ0OiAibWFya2VyU3RhcnQiLAogICAgICAgICJtYXJrZXItc3RhcnQiOiAibWFya2VyU3RhcnQiLAogICAgICAgIG1hcmtlcnVuaXRzOiAibWFya2VyVW5pdHMiLAogICAgICAgIG1hcmtlcndpZHRoOiAibWFya2VyV2lkdGgiLAogICAgICAgIG1hc2s6ICJtYXNrIiwKICAgICAgICBtYXNrY29udGVudHVuaXRzOiAibWFza0NvbnRlbnRVbml0cyIsCiAgICAgICAgbWFza3VuaXRzOiAibWFza1VuaXRzIiwKICAgICAgICBtYXRoZW1hdGljYWw6ICJtYXRoZW1hdGljYWwiLAogICAgICAgIG1vZGU6ICJtb2RlIiwKICAgICAgICBudW1vY3RhdmVzOiAibnVtT2N0YXZlcyIsCiAgICAgICAgb2Zmc2V0OiAib2Zmc2V0IiwKICAgICAgICBvcGFjaXR5OiAib3BhY2l0eSIsCiAgICAgICAgb3BlcmF0b3I6ICJvcGVyYXRvciIsCiAgICAgICAgb3JkZXI6ICJvcmRlciIsCiAgICAgICAgb3JpZW50OiAib3JpZW50IiwKICAgICAgICBvcmllbnRhdGlvbjogIm9yaWVudGF0aW9uIiwKICAgICAgICBvcmlnaW46ICJvcmlnaW4iLAogICAgICAgIG92ZXJmbG93OiAib3ZlcmZsb3ciLAogICAgICAgIG92ZXJsaW5lcG9zaXRpb246ICJvdmVybGluZVBvc2l0aW9uIiwKICAgICAgICAib3ZlcmxpbmUtcG9zaXRpb24iOiAib3ZlcmxpbmVQb3NpdGlvbiIsCiAgICAgICAgb3ZlcmxpbmV0aGlja25lc3M6ICJvdmVybGluZVRoaWNrbmVzcyIsCiAgICAgICAgIm92ZXJsaW5lLXRoaWNrbmVzcyI6ICJvdmVybGluZVRoaWNrbmVzcyIsCiAgICAgICAgcGFpbnRvcmRlcjogInBhaW50T3JkZXIiLAogICAgICAgICJwYWludC1vcmRlciI6ICJwYWludE9yZGVyIiwKICAgICAgICBwYW5vc2UxOiAicGFub3NlMSIsCiAgICAgICAgInBhbm9zZS0xIjogInBhbm9zZTEiLAogICAgICAgIHBhdGhsZW5ndGg6ICJwYXRoTGVuZ3RoIiwKICAgICAgICBwYXR0ZXJuY29udGVudHVuaXRzOiAicGF0dGVybkNvbnRlbnRVbml0cyIsCiAgICAgICAgcGF0dGVybnRyYW5zZm9ybTogInBhdHRlcm5UcmFuc2Zvcm0iLAogICAgICAgIHBhdHRlcm51bml0czogInBhdHRlcm5Vbml0cyIsCiAgICAgICAgcG9pbnRlcmV2ZW50czogInBvaW50ZXJFdmVudHMiLAogICAgICAgICJwb2ludGVyLWV2ZW50cyI6ICJwb2ludGVyRXZlbnRzIiwKICAgICAgICBwb2ludHM6ICJwb2ludHMiLAogICAgICAgIHBvaW50c2F0eDogInBvaW50c0F0WCIsCiAgICAgICAgcG9pbnRzYXR5OiAicG9pbnRzQXRZIiwKICAgICAgICBwb2ludHNhdHo6ICJwb2ludHNBdFoiLAogICAgICAgIHBvcG92ZXI6ICJwb3BvdmVyIiwKICAgICAgICBwb3BvdmVydGFyZ2V0OiAicG9wb3ZlclRhcmdldCIsCiAgICAgICAgcG9wb3ZlcnRhcmdldGFjdGlvbjogInBvcG92ZXJUYXJnZXRBY3Rpb24iLAogICAgICAgIHByZWZpeDogInByZWZpeCIsCiAgICAgICAgcHJlc2VydmVhbHBoYTogInByZXNlcnZlQWxwaGEiLAogICAgICAgIHByZXNlcnZlYXNwZWN0cmF0aW86ICJwcmVzZXJ2ZUFzcGVjdFJhdGlvIiwKICAgICAgICBwcmltaXRpdmV1bml0czogInByaW1pdGl2ZVVuaXRzIiwKICAgICAgICBwcm9wZXJ0eTogInByb3BlcnR5IiwKICAgICAgICByOiAiciIsCiAgICAgICAgcmFkaXVzOiAicmFkaXVzIiwKICAgICAgICByZWZ4OiAicmVmWCIsCiAgICAgICAgcmVmeTogInJlZlkiLAogICAgICAgIHJlbmRlcmluZ2ludGVudDogInJlbmRlcmluZ0ludGVudCIsCiAgICAgICAgInJlbmRlcmluZy1pbnRlbnQiOiAicmVuZGVyaW5nSW50ZW50IiwKICAgICAgICByZXBlYXRjb3VudDogInJlcGVhdENvdW50IiwKICAgICAgICByZXBlYXRkdXI6ICJyZXBlYXREdXIiLAogICAgICAgIHJlcXVpcmVkZXh0ZW5zaW9uczogInJlcXVpcmVkRXh0ZW5zaW9ucyIsCiAgICAgICAgcmVxdWlyZWRmZWF0dXJlczogInJlcXVpcmVkRmVhdHVyZXMiLAogICAgICAgIHJlc291cmNlOiAicmVzb3VyY2UiLAogICAgICAgIHJlc3RhcnQ6ICJyZXN0YXJ0IiwKICAgICAgICByZXN1bHQ6ICJyZXN1bHQiLAogICAgICAgIHJlc3VsdHM6ICJyZXN1bHRzIiwKICAgICAgICByb3RhdGU6ICJyb3RhdGUiLAogICAgICAgIHJ4OiAicngiLAogICAgICAgIHJ5OiAicnkiLAogICAgICAgIHNjYWxlOiAic2NhbGUiLAogICAgICAgIHNlY3VyaXR5OiAic2VjdXJpdHkiLAogICAgICAgIHNlZWQ6ICJzZWVkIiwKICAgICAgICBzaGFwZXJlbmRlcmluZzogInNoYXBlUmVuZGVyaW5nIiwKICAgICAgICAic2hhcGUtcmVuZGVyaW5nIjogInNoYXBlUmVuZGVyaW5nIiwKICAgICAgICBzbG9wZTogInNsb3BlIiwKICAgICAgICBzcGFjaW5nOiAic3BhY2luZyIsCiAgICAgICAgc3BlY3VsYXJjb25zdGFudDogInNwZWN1bGFyQ29uc3RhbnQiLAogICAgICAgIHNwZWN1bGFyZXhwb25lbnQ6ICJzcGVjdWxhckV4cG9uZW50IiwKICAgICAgICBzcGVlZDogInNwZWVkIiwKICAgICAgICBzcHJlYWRtZXRob2Q6ICJzcHJlYWRNZXRob2QiLAogICAgICAgIHN0YXJ0b2Zmc2V0OiAic3RhcnRPZmZzZXQiLAogICAgICAgIHN0ZGRldmlhdGlvbjogInN0ZERldmlhdGlvbiIsCiAgICAgICAgc3RlbWg6ICJzdGVtaCIsCiAgICAgICAgc3RlbXY6ICJzdGVtdiIsCiAgICAgICAgc3RpdGNodGlsZXM6ICJzdGl0Y2hUaWxlcyIsCiAgICAgICAgc3RvcGNvbG9yOiAic3RvcENvbG9yIiwKICAgICAgICAic3RvcC1jb2xvciI6ICJzdG9wQ29sb3IiLAogICAgICAgIHN0b3BvcGFjaXR5OiAic3RvcE9wYWNpdHkiLAogICAgICAgICJzdG9wLW9wYWNpdHkiOiAic3RvcE9wYWNpdHkiLAogICAgICAgIHN0cmlrZXRocm91Z2hwb3NpdGlvbjogInN0cmlrZXRocm91Z2hQb3NpdGlvbiIsCiAgICAgICAgInN0cmlrZXRocm91Z2gtcG9zaXRpb24iOiAic3RyaWtldGhyb3VnaFBvc2l0aW9uIiwKICAgICAgICBzdHJpa2V0aHJvdWdodGhpY2tuZXNzOiAic3RyaWtldGhyb3VnaFRoaWNrbmVzcyIsCiAgICAgICAgInN0cmlrZXRocm91Z2gtdGhpY2tuZXNzIjogInN0cmlrZXRocm91Z2hUaGlja25lc3MiLAogICAgICAgIHN0cmluZzogInN0cmluZyIsCiAgICAgICAgc3Ryb2tlOiAic3Ryb2tlIiwKICAgICAgICBzdHJva2VkYXNoYXJyYXk6ICJzdHJva2VEYXNoYXJyYXkiLAogICAgICAgICJzdHJva2UtZGFzaGFycmF5IjogInN0cm9rZURhc2hhcnJheSIsCiAgICAgICAgc3Ryb2tlZGFzaG9mZnNldDogInN0cm9rZURhc2hvZmZzZXQiLAogICAgICAgICJzdHJva2UtZGFzaG9mZnNldCI6ICJzdHJva2VEYXNob2Zmc2V0IiwKICAgICAgICBzdHJva2VsaW5lY2FwOiAic3Ryb2tlTGluZWNhcCIsCiAgICAgICAgInN0cm9rZS1saW5lY2FwIjogInN0cm9rZUxpbmVjYXAiLAogICAgICAgIHN0cm9rZWxpbmVqb2luOiAic3Ryb2tlTGluZWpvaW4iLAogICAgICAgICJzdHJva2UtbGluZWpvaW4iOiAic3Ryb2tlTGluZWpvaW4iLAogICAgICAgIHN0cm9rZW1pdGVybGltaXQ6ICJzdHJva2VNaXRlcmxpbWl0IiwKICAgICAgICAic3Ryb2tlLW1pdGVybGltaXQiOiAic3Ryb2tlTWl0ZXJsaW1pdCIsCiAgICAgICAgc3Ryb2tld2lkdGg6ICJzdHJva2VXaWR0aCIsCiAgICAgICAgInN0cm9rZS13aWR0aCI6ICJzdHJva2VXaWR0aCIsCiAgICAgICAgc3Ryb2tlb3BhY2l0eTogInN0cm9rZU9wYWNpdHkiLAogICAgICAgICJzdHJva2Utb3BhY2l0eSI6ICJzdHJva2VPcGFjaXR5IiwKICAgICAgICBzdXBwcmVzc2NvbnRlbnRlZGl0YWJsZXdhcm5pbmc6ICJzdXBwcmVzc0NvbnRlbnRFZGl0YWJsZVdhcm5pbmciLAogICAgICAgIHN1cHByZXNzaHlkcmF0aW9ud2FybmluZzogInN1cHByZXNzSHlkcmF0aW9uV2FybmluZyIsCiAgICAgICAgc3VyZmFjZXNjYWxlOiAic3VyZmFjZVNjYWxlIiwKICAgICAgICBzeXN0ZW1sYW5ndWFnZTogInN5c3RlbUxhbmd1YWdlIiwKICAgICAgICB0YWJsZXZhbHVlczogInRhYmxlVmFsdWVzIiwKICAgICAgICB0YXJnZXR4OiAidGFyZ2V0WCIsCiAgICAgICAgdGFyZ2V0eTogInRhcmdldFkiLAogICAgICAgIHRleHRhbmNob3I6ICJ0ZXh0QW5jaG9yIiwKICAgICAgICAidGV4dC1hbmNob3IiOiAidGV4dEFuY2hvciIsCiAgICAgICAgdGV4dGRlY29yYXRpb246ICJ0ZXh0RGVjb3JhdGlvbiIsCiAgICAgICAgInRleHQtZGVjb3JhdGlvbiI6ICJ0ZXh0RGVjb3JhdGlvbiIsCiAgICAgICAgdGV4dGxlbmd0aDogInRleHRMZW5ndGgiLAogICAgICAgIHRleHRyZW5kZXJpbmc6ICJ0ZXh0UmVuZGVyaW5nIiwKICAgICAgICAidGV4dC1yZW5kZXJpbmciOiAidGV4dFJlbmRlcmluZyIsCiAgICAgICAgdG86ICJ0byIsCiAgICAgICAgdHJhbnNmb3JtOiAidHJhbnNmb3JtIiwKICAgICAgICB0cmFuc2Zvcm1vcmlnaW46ICJ0cmFuc2Zvcm1PcmlnaW4iLAogICAgICAgICJ0cmFuc2Zvcm0tb3JpZ2luIjogInRyYW5zZm9ybU9yaWdpbiIsCiAgICAgICAgdHlwZW9mOiAidHlwZW9mIiwKICAgICAgICB1MTogInUxIiwKICAgICAgICB1MjogInUyIiwKICAgICAgICB1bmRlcmxpbmVwb3NpdGlvbjogInVuZGVybGluZVBvc2l0aW9uIiwKICAgICAgICAidW5kZXJsaW5lLXBvc2l0aW9uIjogInVuZGVybGluZVBvc2l0aW9uIiwKICAgICAgICB1bmRlcmxpbmV0aGlja25lc3M6ICJ1bmRlcmxpbmVUaGlja25lc3MiLAogICAgICAgICJ1bmRlcmxpbmUtdGhpY2tuZXNzIjogInVuZGVybGluZVRoaWNrbmVzcyIsCiAgICAgICAgdW5pY29kZTogInVuaWNvZGUiLAogICAgICAgIHVuaWNvZGViaWRpOiAidW5pY29kZUJpZGkiLAogICAgICAgICJ1bmljb2RlLWJpZGkiOiAidW5pY29kZUJpZGkiLAogICAgICAgIHVuaWNvZGVyYW5nZTogInVuaWNvZGVSYW5nZSIsCiAgICAgICAgInVuaWNvZGUtcmFuZ2UiOiAidW5pY29kZVJhbmdlIiwKICAgICAgICB1bml0c3BlcmVtOiAidW5pdHNQZXJFbSIsCiAgICAgICAgInVuaXRzLXBlci1lbSI6ICJ1bml0c1BlckVtIiwKICAgICAgICB1bnNlbGVjdGFibGU6ICJ1bnNlbGVjdGFibGUiLAogICAgICAgIHZhbHBoYWJldGljOiAidkFscGhhYmV0aWMiLAogICAgICAgICJ2LWFscGhhYmV0aWMiOiAidkFscGhhYmV0aWMiLAogICAgICAgIHZhbHVlczogInZhbHVlcyIsCiAgICAgICAgdmVjdG9yZWZmZWN0OiAidmVjdG9yRWZmZWN0IiwKICAgICAgICAidmVjdG9yLWVmZmVjdCI6ICJ2ZWN0b3JFZmZlY3QiLAogICAgICAgIHZlcnNpb246ICJ2ZXJzaW9uIiwKICAgICAgICB2ZXJ0YWR2eTogInZlcnRBZHZZIiwKICAgICAgICAidmVydC1hZHYteSI6ICJ2ZXJ0QWR2WSIsCiAgICAgICAgdmVydG9yaWdpbng6ICJ2ZXJ0T3JpZ2luWCIsCiAgICAgICAgInZlcnQtb3JpZ2luLXgiOiAidmVydE9yaWdpblgiLAogICAgICAgIHZlcnRvcmlnaW55OiAidmVydE9yaWdpblkiLAogICAgICAgICJ2ZXJ0LW9yaWdpbi15IjogInZlcnRPcmlnaW5ZIiwKICAgICAgICB2aGFuZ2luZzogInZIYW5naW5nIiwKICAgICAgICAidi1oYW5naW5nIjogInZIYW5naW5nIiwKICAgICAgICB2aWRlb2dyYXBoaWM6ICJ2SWRlb2dyYXBoaWMiLAogICAgICAgICJ2LWlkZW9ncmFwaGljIjogInZJZGVvZ3JhcGhpYyIsCiAgICAgICAgdmlld2JveDogInZpZXdCb3giLAogICAgICAgIHZpZXd0YXJnZXQ6ICJ2aWV3VGFyZ2V0IiwKICAgICAgICB2aXNpYmlsaXR5OiAidmlzaWJpbGl0eSIsCiAgICAgICAgdm1hdGhlbWF0aWNhbDogInZNYXRoZW1hdGljYWwiLAogICAgICAgICJ2LW1hdGhlbWF0aWNhbCI6ICJ2TWF0aGVtYXRpY2FsIiwKICAgICAgICB2b2NhYjogInZvY2FiIiwKICAgICAgICB3aWR0aHM6ICJ3aWR0aHMiLAogICAgICAgIHdvcmRzcGFjaW5nOiAid29yZFNwYWNpbmciLAogICAgICAgICJ3b3JkLXNwYWNpbmciOiAid29yZFNwYWNpbmciLAogICAgICAgIHdyaXRpbmdtb2RlOiAid3JpdGluZ01vZGUiLAogICAgICAgICJ3cml0aW5nLW1vZGUiOiAid3JpdGluZ01vZGUiLAogICAgICAgIHgxOiAieDEiLAogICAgICAgIHgyOiAieDIiLAogICAgICAgIHg6ICJ4IiwKICAgICAgICB4Y2hhbm5lbHNlbGVjdG9yOiAieENoYW5uZWxTZWxlY3RvciIsCiAgICAgICAgeGhlaWdodDogInhIZWlnaHQiLAogICAgICAgICJ4LWhlaWdodCI6ICJ4SGVpZ2h0IiwKICAgICAgICB4bGlua2FjdHVhdGU6ICJ4bGlua0FjdHVhdGUiLAogICAgICAgICJ4bGluazphY3R1YXRlIjogInhsaW5rQWN0dWF0ZSIsCiAgICAgICAgeGxpbmthcmNyb2xlOiAieGxpbmtBcmNyb2xlIiwKICAgICAgICAieGxpbms6YXJjcm9sZSI6ICJ4bGlua0FyY3JvbGUiLAogICAgICAgIHhsaW5raHJlZjogInhsaW5rSHJlZiIsCiAgICAgICAgInhsaW5rOmhyZWYiOiAieGxpbmtIcmVmIiwKICAgICAgICB4bGlua3JvbGU6ICJ4bGlua1JvbGUiLAogICAgICAgICJ4bGluazpyb2xlIjogInhsaW5rUm9sZSIsCiAgICAgICAgeGxpbmtzaG93OiAieGxpbmtTaG93IiwKICAgICAgICAieGxpbms6c2hvdyI6ICJ4bGlua1Nob3ciLAogICAgICAgIHhsaW5rdGl0bGU6ICJ4bGlua1RpdGxlIiwKICAgICAgICAieGxpbms6dGl0bGUiOiAieGxpbmtUaXRsZSIsCiAgICAgICAgeGxpbmt0eXBlOiAieGxpbmtUeXBlIiwKICAgICAgICAieGxpbms6dHlwZSI6ICJ4bGlua1R5cGUiLAogICAgICAgIHhtbGJhc2U6ICJ4bWxCYXNlIiwKICAgICAgICAieG1sOmJhc2UiOiAieG1sQmFzZSIsCiAgICAgICAgeG1sbGFuZzogInhtbExhbmciLAogICAgICAgICJ4bWw6bGFuZyI6ICJ4bWxMYW5nIiwKICAgICAgICB4bWxuczogInhtbG5zIiwKICAgICAgICAieG1sOnNwYWNlIjogInhtbFNwYWNlIiwKICAgICAgICB4bWxuc3hsaW5rOiAieG1sbnNYbGluayIsCiAgICAgICAgInhtbG5zOnhsaW5rIjogInhtbG5zWGxpbmsiLAogICAgICAgIHhtbHNwYWNlOiAieG1sU3BhY2UiLAogICAgICAgIHkxOiAieTEiLAogICAgICAgIHkyOiAieTIiLAogICAgICAgIHk6ICJ5IiwKICAgICAgICB5Y2hhbm5lbHNlbGVjdG9yOiAieUNoYW5uZWxTZWxlY3RvciIsCiAgICAgICAgejogInoiLAogICAgICAgIHpvb21hbmRwYW46ICJ6b29tQW5kUGFuIgogICAgICB9LCBhcmlhUHJvcGVydGllcyA9IHsKICAgICAgICAiYXJpYS1jdXJyZW50IjogMCwKICAgICAgICAiYXJpYS1kZXNjcmlwdGlvbiI6IDAsCiAgICAgICAgImFyaWEtZGV0YWlscyI6IDAsCiAgICAgICAgImFyaWEtZGlzYWJsZWQiOiAwLAogICAgICAgICJhcmlhLWhpZGRlbiI6IDAsCiAgICAgICAgImFyaWEtaW52YWxpZCI6IDAsCiAgICAgICAgImFyaWEta2V5c2hvcnRjdXRzIjogMCwKICAgICAgICAiYXJpYS1sYWJlbCI6IDAsCiAgICAgICAgImFyaWEtcm9sZWRlc2NyaXB0aW9uIjogMCwKICAgICAgICAiYXJpYS1hdXRvY29tcGxldGUiOiAwLAogICAgICAgICJhcmlhLWNoZWNrZWQiOiAwLAogICAgICAgICJhcmlhLWV4cGFuZGVkIjogMCwKICAgICAgICAiYXJpYS1oYXNwb3B1cCI6IDAsCiAgICAgICAgImFyaWEtbGV2ZWwiOiAwLAogICAgICAgICJhcmlhLW1vZGFsIjogMCwKICAgICAgICAiYXJpYS1tdWx0aWxpbmUiOiAwLAogICAgICAgICJhcmlhLW11bHRpc2VsZWN0YWJsZSI6IDAsCiAgICAgICAgImFyaWEtb3JpZW50YXRpb24iOiAwLAogICAgICAgICJhcmlhLXBsYWNlaG9sZGVyIjogMCwKICAgICAgICAiYXJpYS1wcmVzc2VkIjogMCwKICAgICAgICAiYXJpYS1yZWFkb25seSI6IDAsCiAgICAgICAgImFyaWEtcmVxdWlyZWQiOiAwLAogICAgICAgICJhcmlhLXNlbGVjdGVkIjogMCwKICAgICAgICAiYXJpYS1zb3J0IjogMCwKICAgICAgICAiYXJpYS12YWx1ZW1heCI6IDAsCiAgICAgICAgImFyaWEtdmFsdWVtaW4iOiAwLAogICAgICAgICJhcmlhLXZhbHVlbm93IjogMCwKICAgICAgICAiYXJpYS12YWx1ZXRleHQiOiAwLAogICAgICAgICJhcmlhLWF0b21pYyI6IDAsCiAgICAgICAgImFyaWEtYnVzeSI6IDAsCiAgICAgICAgImFyaWEtbGl2ZSI6IDAsCiAgICAgICAgImFyaWEtcmVsZXZhbnQiOiAwLAogICAgICAgICJhcmlhLWRyb3BlZmZlY3QiOiAwLAogICAgICAgICJhcmlhLWdyYWJiZWQiOiAwLAogICAgICAgICJhcmlhLWFjdGl2ZWRlc2NlbmRhbnQiOiAwLAogICAgICAgICJhcmlhLWNvbGNvdW50IjogMCwKICAgICAgICAiYXJpYS1jb2xpbmRleCI6IDAsCiAgICAgICAgImFyaWEtY29sc3BhbiI6IDAsCiAgICAgICAgImFyaWEtY29udHJvbHMiOiAwLAogICAgICAgICJhcmlhLWRlc2NyaWJlZGJ5IjogMCwKICAgICAgICAiYXJpYS1lcnJvcm1lc3NhZ2UiOiAwLAogICAgICAgICJhcmlhLWZsb3d0byI6IDAsCiAgICAgICAgImFyaWEtbGFiZWxsZWRieSI6IDAsCiAgICAgICAgImFyaWEtb3ducyI6IDAsCiAgICAgICAgImFyaWEtcG9zaW5zZXQiOiAwLAogICAgICAgICJhcmlhLXJvd2NvdW50IjogMCwKICAgICAgICAiYXJpYS1yb3dpbmRleCI6IDAsCiAgICAgICAgImFyaWEtcm93c3BhbiI6IDAsCiAgICAgICAgImFyaWEtc2V0c2l6ZSI6IDAKICAgICAgfSwgd2FybmVkUHJvcGVydGllcyQxID0ge30sIHJBUklBJDEgPSBSZWdFeHAoCiAgICAgICAgIl4oYXJpYSktWzpBLVpfYS16XFx1MDBDMC1cXHUwMEQ2XFx1MDBEOC1cXHUwMEY2XFx1MDBGOC1cXHUwMkZGXFx1MDM3MC1cXHUwMzdEXFx1MDM3Ri1cXHUxRkZGXFx1MjAwQy1cXHUyMDBEXFx1MjA3MC1cXHUyMThGXFx1MkMwMC1cXHUyRkVGXFx1MzAwMS1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkZEXFwtLjAtOVxcdTAwQjdcXHUwMzAwLVxcdTAzNkZcXHUyMDNGLVxcdTIwNDBdKiQiCiAgICAgICksIHJBUklBQ2FtZWwkMSA9IFJlZ0V4cCgKICAgICAgICAiXihhcmlhKVtBLVpdWzpBLVpfYS16XFx1MDBDMC1cXHUwMEQ2XFx1MDBEOC1cXHUwMEY2XFx1MDBGOC1cXHUwMkZGXFx1MDM3MC1cXHUwMzdEXFx1MDM3Ri1cXHUxRkZGXFx1MjAwQy1cXHUyMDBEXFx1MjA3MC1cXHUyMThGXFx1MkMwMC1cXHUyRkVGXFx1MzAwMS1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkZEXFwtLjAtOVxcdTAwQjdcXHUwMzAwLVxcdTAzNkZcXHUyMDNGLVxcdTIwNDBdKiQiCiAgICAgICksIGRpZFdhcm5WYWx1ZU51bGwgPSBmYWxzZSwgd2FybmVkUHJvcGVydGllcyA9IHt9LCBFVkVOVF9OQU1FX1JFR0VYID0gL15vbi4vLCBJTlZBTElEX0VWRU5UX05BTUVfUkVHRVggPSAvXm9uW15BLVpdLywgckFSSUEgPSBSZWdFeHAoCiAgICAgICAgIl4oYXJpYSktWzpBLVpfYS16XFx1MDBDMC1cXHUwMEQ2XFx1MDBEOC1cXHUwMEY2XFx1MDBGOC1cXHUwMkZGXFx1MDM3MC1cXHUwMzdEXFx1MDM3Ri1cXHUxRkZGXFx1MjAwQy1cXHUyMDBEXFx1MjA3MC1cXHUyMThGXFx1MkMwMC1cXHUyRkVGXFx1MzAwMS1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkZEXFwtLjAtOVxcdTAwQjdcXHUwMzAwLVxcdTAzNkZcXHUyMDNGLVxcdTIwNDBdKiQiCiAgICAgICksIHJBUklBQ2FtZWwgPSBSZWdFeHAoCiAgICAgICAgIl4oYXJpYSlbQS1aXVs6QS1aX2EtelxcdTAwQzAtXFx1MDBENlxcdTAwRDgtXFx1MDBGNlxcdTAwRjgtXFx1MDJGRlxcdTAzNzAtXFx1MDM3RFxcdTAzN0YtXFx1MUZGRlxcdTIwMEMtXFx1MjAwRFxcdTIwNzAtXFx1MjE4RlxcdTJDMDAtXFx1MkZFRlxcdTMwMDEtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZGRFxcLS4wLTlcXHUwMEI3XFx1MDMwMC1cXHUwMzZGXFx1MjAzRi1cXHUyMDQwXSokIgogICAgICApLCBpc0phdmFTY3JpcHRQcm90b2NvbCA9IC9eW1x1MDAwMC1cdTAwMUYgXSpqW1xyXG5cdF0qYVtcclxuXHRdKnZbXHJcblx0XSphW1xyXG5cdF0qc1tcclxuXHRdKmNbXHJcblx0XSpyW1xyXG5cdF0qaVtcclxuXHRdKnBbXHJcblx0XSp0W1xyXG5cdF0qOi9pLCBjdXJyZW50UmVwbGF5aW5nRXZlbnQgPSBudWxsLCByZXN0b3JlVGFyZ2V0ID0gbnVsbCwgcmVzdG9yZVF1ZXVlID0gbnVsbCwgaXNJbnNpZGVFdmVudEhhbmRsZXIgPSBmYWxzZSwgY2FuVXNlRE9NID0gISgidW5kZWZpbmVkIiA9PT0gdHlwZW9mIHdpbmRvdyB8fCAidW5kZWZpbmVkIiA9PT0gdHlwZW9mIHdpbmRvdy5kb2N1bWVudCB8fCAidW5kZWZpbmVkIiA9PT0gdHlwZW9mIHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KSwgcGFzc2l2ZUJyb3dzZXJFdmVudHNTdXBwb3J0ZWQgPSBmYWxzZTsKICAgICAgaWYgKGNhblVzZURPTSkKICAgICAgICB0cnkgewogICAgICAgICAgdmFyIG9wdGlvbnMkanNjb21wJDAgPSB7fTsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvcHRpb25zJGpzY29tcCQwLCAicGFzc2l2ZSIsIHsKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICBwYXNzaXZlQnJvd3NlckV2ZW50c1N1cHBvcnRlZCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInRlc3QiLCBvcHRpb25zJGpzY29tcCQwLCBvcHRpb25zJGpzY29tcCQwKTsKICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJ0ZXN0Iiwgb3B0aW9ucyRqc2NvbXAkMCwgb3B0aW9ucyRqc2NvbXAkMCk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgcGFzc2l2ZUJyb3dzZXJFdmVudHNTdXBwb3J0ZWQgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIHZhciByb290ID0gbnVsbCwgc3RhcnRUZXh0ID0gbnVsbCwgZmFsbGJhY2tUZXh0ID0gbnVsbCwgRXZlbnRJbnRlcmZhY2UgPSB7CiAgICAgICAgZXZlbnRQaGFzZTogMCwKICAgICAgICBidWJibGVzOiAwLAogICAgICAgIGNhbmNlbGFibGU6IDAsCiAgICAgICAgdGltZVN0YW1wOiBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgcmV0dXJuIGV2ZW50LnRpbWVTdGFtcCB8fCBEYXRlLm5vdygpOwogICAgICAgIH0sCiAgICAgICAgZGVmYXVsdFByZXZlbnRlZDogMCwKICAgICAgICBpc1RydXN0ZWQ6IDAKICAgICAgfSwgU3ludGhldGljRXZlbnQgPSBjcmVhdGVTeW50aGV0aWNFdmVudChFdmVudEludGVyZmFjZSksIFVJRXZlbnRJbnRlcmZhY2UgPSBhc3NpZ24oe30sIEV2ZW50SW50ZXJmYWNlLCB7IHZpZXc6IDAsIGRldGFpbDogMCB9KSwgU3ludGhldGljVUlFdmVudCA9IGNyZWF0ZVN5bnRoZXRpY0V2ZW50KFVJRXZlbnRJbnRlcmZhY2UpLCBsYXN0TW92ZW1lbnRYLCBsYXN0TW92ZW1lbnRZLCBsYXN0TW91c2VFdmVudCwgTW91c2VFdmVudEludGVyZmFjZSA9IGFzc2lnbih7fSwgVUlFdmVudEludGVyZmFjZSwgewogICAgICAgIHNjcmVlblg6IDAsCiAgICAgICAgc2NyZWVuWTogMCwKICAgICAgICBjbGllbnRYOiAwLAogICAgICAgIGNsaWVudFk6IDAsCiAgICAgICAgcGFnZVg6IDAsCiAgICAgICAgcGFnZVk6IDAsCiAgICAgICAgY3RybEtleTogMCwKICAgICAgICBzaGlmdEtleTogMCwKICAgICAgICBhbHRLZXk6IDAsCiAgICAgICAgbWV0YUtleTogMCwKICAgICAgICBnZXRNb2RpZmllclN0YXRlOiBnZXRFdmVudE1vZGlmaWVyU3RhdGUsCiAgICAgICAgYnV0dG9uOiAwLAogICAgICAgIGJ1dHRvbnM6IDAsCiAgICAgICAgcmVsYXRlZFRhcmdldDogZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgIHJldHVybiB2b2lkIDAgPT09IGV2ZW50LnJlbGF0ZWRUYXJnZXQgPyBldmVudC5mcm9tRWxlbWVudCA9PT0gZXZlbnQuc3JjRWxlbWVudCA/IGV2ZW50LnRvRWxlbWVudCA6IGV2ZW50LmZyb21FbGVtZW50IDogZXZlbnQucmVsYXRlZFRhcmdldDsKICAgICAgICB9LAogICAgICAgIG1vdmVtZW50WDogZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgIGlmICgibW92ZW1lbnRYIiBpbiBldmVudCkgcmV0dXJuIGV2ZW50Lm1vdmVtZW50WDsKICAgICAgICAgIGV2ZW50ICE9PSBsYXN0TW91c2VFdmVudCAmJiAobGFzdE1vdXNlRXZlbnQgJiYgIm1vdXNlbW92ZSIgPT09IGV2ZW50LnR5cGUgPyAobGFzdE1vdmVtZW50WCA9IGV2ZW50LnNjcmVlblggLSBsYXN0TW91c2VFdmVudC5zY3JlZW5YLCBsYXN0TW92ZW1lbnRZID0gZXZlbnQuc2NyZWVuWSAtIGxhc3RNb3VzZUV2ZW50LnNjcmVlblkpIDogbGFzdE1vdmVtZW50WSA9IGxhc3RNb3ZlbWVudFggPSAwLCBsYXN0TW91c2VFdmVudCA9IGV2ZW50KTsKICAgICAgICAgIHJldHVybiBsYXN0TW92ZW1lbnRYOwogICAgICAgIH0sCiAgICAgICAgbW92ZW1lbnRZOiBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgcmV0dXJuICJtb3ZlbWVudFkiIGluIGV2ZW50ID8gZXZlbnQubW92ZW1lbnRZIDogbGFzdE1vdmVtZW50WTsKICAgICAgICB9CiAgICAgIH0pLCBTeW50aGV0aWNNb3VzZUV2ZW50ID0gY3JlYXRlU3ludGhldGljRXZlbnQoTW91c2VFdmVudEludGVyZmFjZSksIERyYWdFdmVudEludGVyZmFjZSA9IGFzc2lnbih7fSwgTW91c2VFdmVudEludGVyZmFjZSwgeyBkYXRhVHJhbnNmZXI6IDAgfSksIFN5bnRoZXRpY0RyYWdFdmVudCA9IGNyZWF0ZVN5bnRoZXRpY0V2ZW50KERyYWdFdmVudEludGVyZmFjZSksIEZvY3VzRXZlbnRJbnRlcmZhY2UgPSBhc3NpZ24oe30sIFVJRXZlbnRJbnRlcmZhY2UsIHsgcmVsYXRlZFRhcmdldDogMCB9KSwgU3ludGhldGljRm9jdXNFdmVudCA9IGNyZWF0ZVN5bnRoZXRpY0V2ZW50KEZvY3VzRXZlbnRJbnRlcmZhY2UpLCBBbmltYXRpb25FdmVudEludGVyZmFjZSA9IGFzc2lnbih7fSwgRXZlbnRJbnRlcmZhY2UsIHsKICAgICAgICBhbmltYXRpb25OYW1lOiAwLAogICAgICAgIGVsYXBzZWRUaW1lOiAwLAogICAgICAgIHBzZXVkb0VsZW1lbnQ6IDAKICAgICAgfSksIFN5bnRoZXRpY0FuaW1hdGlvbkV2ZW50ID0gY3JlYXRlU3ludGhldGljRXZlbnQoQW5pbWF0aW9uRXZlbnRJbnRlcmZhY2UpLCBDbGlwYm9hcmRFdmVudEludGVyZmFjZSA9IGFzc2lnbih7fSwgRXZlbnRJbnRlcmZhY2UsIHsKICAgICAgICBjbGlwYm9hcmREYXRhOiBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgcmV0dXJuICJjbGlwYm9hcmREYXRhIiBpbiBldmVudCA/IGV2ZW50LmNsaXBib2FyZERhdGEgOiB3aW5kb3cuY2xpcGJvYXJkRGF0YTsKICAgICAgICB9CiAgICAgIH0pLCBTeW50aGV0aWNDbGlwYm9hcmRFdmVudCA9IGNyZWF0ZVN5bnRoZXRpY0V2ZW50KENsaXBib2FyZEV2ZW50SW50ZXJmYWNlKSwgQ29tcG9zaXRpb25FdmVudEludGVyZmFjZSA9IGFzc2lnbih7fSwgRXZlbnRJbnRlcmZhY2UsIHsgZGF0YTogMCB9KSwgU3ludGhldGljQ29tcG9zaXRpb25FdmVudCA9IGNyZWF0ZVN5bnRoZXRpY0V2ZW50KAogICAgICAgIENvbXBvc2l0aW9uRXZlbnRJbnRlcmZhY2UKICAgICAgKSwgU3ludGhldGljSW5wdXRFdmVudCA9IFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQsIG5vcm1hbGl6ZUtleSA9IHsKICAgICAgICBFc2M6ICJFc2NhcGUiLAogICAgICAgIFNwYWNlYmFyOiAiICIsCiAgICAgICAgTGVmdDogIkFycm93TGVmdCIsCiAgICAgICAgVXA6ICJBcnJvd1VwIiwKICAgICAgICBSaWdodDogIkFycm93UmlnaHQiLAogICAgICAgIERvd246ICJBcnJvd0Rvd24iLAogICAgICAgIERlbDogIkRlbGV0ZSIsCiAgICAgICAgV2luOiAiT1MiLAogICAgICAgIE1lbnU6ICJDb250ZXh0TWVudSIsCiAgICAgICAgQXBwczogIkNvbnRleHRNZW51IiwKICAgICAgICBTY3JvbGw6ICJTY3JvbGxMb2NrIiwKICAgICAgICBNb3pQcmludGFibGVLZXk6ICJVbmlkZW50aWZpZWQiCiAgICAgIH0sIHRyYW5zbGF0ZVRvS2V5ID0gewogICAgICAgIDg6ICJCYWNrc3BhY2UiLAogICAgICAgIDk6ICJUYWIiLAogICAgICAgIDEyOiAiQ2xlYXIiLAogICAgICAgIDEzOiAiRW50ZXIiLAogICAgICAgIDE2OiAiU2hpZnQiLAogICAgICAgIDE3OiAiQ29udHJvbCIsCiAgICAgICAgMTg6ICJBbHQiLAogICAgICAgIDE5OiAiUGF1c2UiLAogICAgICAgIDIwOiAiQ2Fwc0xvY2siLAogICAgICAgIDI3OiAiRXNjYXBlIiwKICAgICAgICAzMjogIiAiLAogICAgICAgIDMzOiAiUGFnZVVwIiwKICAgICAgICAzNDogIlBhZ2VEb3duIiwKICAgICAgICAzNTogIkVuZCIsCiAgICAgICAgMzY6ICJIb21lIiwKICAgICAgICAzNzogIkFycm93TGVmdCIsCiAgICAgICAgMzg6ICJBcnJvd1VwIiwKICAgICAgICAzOTogIkFycm93UmlnaHQiLAogICAgICAgIDQwOiAiQXJyb3dEb3duIiwKICAgICAgICA0NTogIkluc2VydCIsCiAgICAgICAgNDY6ICJEZWxldGUiLAogICAgICAgIDExMjogIkYxIiwKICAgICAgICAxMTM6ICJGMiIsCiAgICAgICAgMTE0OiAiRjMiLAogICAgICAgIDExNTogIkY0IiwKICAgICAgICAxMTY6ICJGNSIsCiAgICAgICAgMTE3OiAiRjYiLAogICAgICAgIDExODogIkY3IiwKICAgICAgICAxMTk6ICJGOCIsCiAgICAgICAgMTIwOiAiRjkiLAogICAgICAgIDEyMTogIkYxMCIsCiAgICAgICAgMTIyOiAiRjExIiwKICAgICAgICAxMjM6ICJGMTIiLAogICAgICAgIDE0NDogIk51bUxvY2siLAogICAgICAgIDE0NTogIlNjcm9sbExvY2siLAogICAgICAgIDIyNDogIk1ldGEiCiAgICAgIH0sIG1vZGlmaWVyS2V5VG9Qcm9wID0gewogICAgICAgIEFsdDogImFsdEtleSIsCiAgICAgICAgQ29udHJvbDogImN0cmxLZXkiLAogICAgICAgIE1ldGE6ICJtZXRhS2V5IiwKICAgICAgICBTaGlmdDogInNoaWZ0S2V5IgogICAgICB9LCBLZXlib2FyZEV2ZW50SW50ZXJmYWNlID0gYXNzaWduKHt9LCBVSUV2ZW50SW50ZXJmYWNlLCB7CiAgICAgICAga2V5OiBmdW5jdGlvbihuYXRpdmVFdmVudCkgewogICAgICAgICAgaWYgKG5hdGl2ZUV2ZW50LmtleSkgewogICAgICAgICAgICB2YXIga2V5ID0gbm9ybWFsaXplS2V5W25hdGl2ZUV2ZW50LmtleV0gfHwgbmF0aXZlRXZlbnQua2V5OwogICAgICAgICAgICBpZiAoIlVuaWRlbnRpZmllZCIgIT09IGtleSkgcmV0dXJuIGtleTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiAia2V5cHJlc3MiID09PSBuYXRpdmVFdmVudC50eXBlID8gKG5hdGl2ZUV2ZW50ID0gZ2V0RXZlbnRDaGFyQ29kZShuYXRpdmVFdmVudCksIDEzID09PSBuYXRpdmVFdmVudCA/ICJFbnRlciIgOiBTdHJpbmcuZnJvbUNoYXJDb2RlKG5hdGl2ZUV2ZW50KSkgOiAia2V5ZG93biIgPT09IG5hdGl2ZUV2ZW50LnR5cGUgfHwgImtleXVwIiA9PT0gbmF0aXZlRXZlbnQudHlwZSA/IHRyYW5zbGF0ZVRvS2V5W25hdGl2ZUV2ZW50LmtleUNvZGVdIHx8ICJVbmlkZW50aWZpZWQiIDogIiI7CiAgICAgICAgfSwKICAgICAgICBjb2RlOiAwLAogICAgICAgIGxvY2F0aW9uOiAwLAogICAgICAgIGN0cmxLZXk6IDAsCiAgICAgICAgc2hpZnRLZXk6IDAsCiAgICAgICAgYWx0S2V5OiAwLAogICAgICAgIG1ldGFLZXk6IDAsCiAgICAgICAgcmVwZWF0OiAwLAogICAgICAgIGxvY2FsZTogMCwKICAgICAgICBnZXRNb2RpZmllclN0YXRlOiBnZXRFdmVudE1vZGlmaWVyU3RhdGUsCiAgICAgICAgY2hhckNvZGU6IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gImtleXByZXNzIiA9PT0gZXZlbnQudHlwZSA/IGdldEV2ZW50Q2hhckNvZGUoZXZlbnQpIDogMDsKICAgICAgICB9LAogICAgICAgIGtleUNvZGU6IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gImtleWRvd24iID09PSBldmVudC50eXBlIHx8ICJrZXl1cCIgPT09IGV2ZW50LnR5cGUgPyBldmVudC5rZXlDb2RlIDogMDsKICAgICAgICB9LAogICAgICAgIHdoaWNoOiBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgcmV0dXJuICJrZXlwcmVzcyIgPT09IGV2ZW50LnR5cGUgPyBnZXRFdmVudENoYXJDb2RlKGV2ZW50KSA6ICJrZXlkb3duIiA9PT0gZXZlbnQudHlwZSB8fCAia2V5dXAiID09PSBldmVudC50eXBlID8gZXZlbnQua2V5Q29kZSA6IDA7CiAgICAgICAgfQogICAgICB9KSwgU3ludGhldGljS2V5Ym9hcmRFdmVudCA9IGNyZWF0ZVN5bnRoZXRpY0V2ZW50KEtleWJvYXJkRXZlbnRJbnRlcmZhY2UpLCBQb2ludGVyRXZlbnRJbnRlcmZhY2UgPSBhc3NpZ24oe30sIE1vdXNlRXZlbnRJbnRlcmZhY2UsIHsKICAgICAgICBwb2ludGVySWQ6IDAsCiAgICAgICAgd2lkdGg6IDAsCiAgICAgICAgaGVpZ2h0OiAwLAogICAgICAgIHByZXNzdXJlOiAwLAogICAgICAgIHRhbmdlbnRpYWxQcmVzc3VyZTogMCwKICAgICAgICB0aWx0WDogMCwKICAgICAgICB0aWx0WTogMCwKICAgICAgICB0d2lzdDogMCwKICAgICAgICBwb2ludGVyVHlwZTogMCwKICAgICAgICBpc1ByaW1hcnk6IDAKICAgICAgfSksIFN5bnRoZXRpY1BvaW50ZXJFdmVudCA9IGNyZWF0ZVN5bnRoZXRpY0V2ZW50KFBvaW50ZXJFdmVudEludGVyZmFjZSksIFRvdWNoRXZlbnRJbnRlcmZhY2UgPSBhc3NpZ24oe30sIFVJRXZlbnRJbnRlcmZhY2UsIHsKICAgICAgICB0b3VjaGVzOiAwLAogICAgICAgIHRhcmdldFRvdWNoZXM6IDAsCiAgICAgICAgY2hhbmdlZFRvdWNoZXM6IDAsCiAgICAgICAgYWx0S2V5OiAwLAogICAgICAgIG1ldGFLZXk6IDAsCiAgICAgICAgY3RybEtleTogMCwKICAgICAgICBzaGlmdEtleTogMCwKICAgICAgICBnZXRNb2RpZmllclN0YXRlOiBnZXRFdmVudE1vZGlmaWVyU3RhdGUKICAgICAgfSksIFN5bnRoZXRpY1RvdWNoRXZlbnQgPSBjcmVhdGVTeW50aGV0aWNFdmVudChUb3VjaEV2ZW50SW50ZXJmYWNlKSwgVHJhbnNpdGlvbkV2ZW50SW50ZXJmYWNlID0gYXNzaWduKHt9LCBFdmVudEludGVyZmFjZSwgewogICAgICAgIHByb3BlcnR5TmFtZTogMCwKICAgICAgICBlbGFwc2VkVGltZTogMCwKICAgICAgICBwc2V1ZG9FbGVtZW50OiAwCiAgICAgIH0pLCBTeW50aGV0aWNUcmFuc2l0aW9uRXZlbnQgPSBjcmVhdGVTeW50aGV0aWNFdmVudChUcmFuc2l0aW9uRXZlbnRJbnRlcmZhY2UpLCBXaGVlbEV2ZW50SW50ZXJmYWNlID0gYXNzaWduKHt9LCBNb3VzZUV2ZW50SW50ZXJmYWNlLCB7CiAgICAgICAgZGVsdGFYOiBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgcmV0dXJuICJkZWx0YVgiIGluIGV2ZW50ID8gZXZlbnQuZGVsdGFYIDogIndoZWVsRGVsdGFYIiBpbiBldmVudCA/IC1ldmVudC53aGVlbERlbHRhWCA6IDA7CiAgICAgICAgfSwKICAgICAgICBkZWx0YVk6IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gImRlbHRhWSIgaW4gZXZlbnQgPyBldmVudC5kZWx0YVkgOiAid2hlZWxEZWx0YVkiIGluIGV2ZW50ID8gLWV2ZW50LndoZWVsRGVsdGFZIDogIndoZWVsRGVsdGEiIGluIGV2ZW50ID8gLWV2ZW50LndoZWVsRGVsdGEgOiAwOwogICAgICAgIH0sCiAgICAgICAgZGVsdGFaOiAwLAogICAgICAgIGRlbHRhTW9kZTogMAogICAgICB9KSwgU3ludGhldGljV2hlZWxFdmVudCA9IGNyZWF0ZVN5bnRoZXRpY0V2ZW50KFdoZWVsRXZlbnRJbnRlcmZhY2UpLCBUb2dnbGVFdmVudEludGVyZmFjZSA9IGFzc2lnbih7fSwgRXZlbnRJbnRlcmZhY2UsIHsKICAgICAgICBuZXdTdGF0ZTogMCwKICAgICAgICBvbGRTdGF0ZTogMAogICAgICB9KSwgU3ludGhldGljVG9nZ2xlRXZlbnQgPSBjcmVhdGVTeW50aGV0aWNFdmVudChUb2dnbGVFdmVudEludGVyZmFjZSksIEVORF9LRVlDT0RFUyA9IFs5LCAxMywgMjcsIDMyXSwgU1RBUlRfS0VZQ09ERSA9IDIyOSwgY2FuVXNlQ29tcG9zaXRpb25FdmVudCA9IGNhblVzZURPTSAmJiAiQ29tcG9zaXRpb25FdmVudCIgaW4gd2luZG93LCBkb2N1bWVudE1vZGUgPSBudWxsOwogICAgICBjYW5Vc2VET00gJiYgImRvY3VtZW50TW9kZSIgaW4gZG9jdW1lbnQgJiYgKGRvY3VtZW50TW9kZSA9IGRvY3VtZW50LmRvY3VtZW50TW9kZSk7CiAgICAgIHZhciBjYW5Vc2VUZXh0SW5wdXRFdmVudCA9IGNhblVzZURPTSAmJiAiVGV4dEV2ZW50IiBpbiB3aW5kb3cgJiYgIWRvY3VtZW50TW9kZSwgdXNlRmFsbGJhY2tDb21wb3NpdGlvbkRhdGEgPSBjYW5Vc2VET00gJiYgKCFjYW5Vc2VDb21wb3NpdGlvbkV2ZW50IHx8IGRvY3VtZW50TW9kZSAmJiA4IDwgZG9jdW1lbnRNb2RlICYmIDExID49IGRvY3VtZW50TW9kZSksIFNQQUNFQkFSX0NPREUgPSAzMiwgU1BBQ0VCQVJfQ0hBUiA9IFN0cmluZy5mcm9tQ2hhckNvZGUoU1BBQ0VCQVJfQ09ERSksIGhhc1NwYWNlS2V5cHJlc3MgPSBmYWxzZSwgaXNDb21wb3NpbmcgPSBmYWxzZSwgc3VwcG9ydGVkSW5wdXRUeXBlcyA9IHsKICAgICAgICBjb2xvcjogdHJ1ZSwKICAgICAgICBkYXRlOiB0cnVlLAogICAgICAgIGRhdGV0aW1lOiB0cnVlLAogICAgICAgICJkYXRldGltZS1sb2NhbCI6IHRydWUsCiAgICAgICAgZW1haWw6IHRydWUsCiAgICAgICAgbW9udGg6IHRydWUsCiAgICAgICAgbnVtYmVyOiB0cnVlLAogICAgICAgIHBhc3N3b3JkOiB0cnVlLAogICAgICAgIHJhbmdlOiB0cnVlLAogICAgICAgIHNlYXJjaDogdHJ1ZSwKICAgICAgICB0ZWw6IHRydWUsCiAgICAgICAgdGV4dDogdHJ1ZSwKICAgICAgICB0aW1lOiB0cnVlLAogICAgICAgIHVybDogdHJ1ZSwKICAgICAgICB3ZWVrOiB0cnVlCiAgICAgIH0sIGFjdGl2ZUVsZW1lbnQkMSA9IG51bGwsIGFjdGl2ZUVsZW1lbnRJbnN0JDEgPSBudWxsLCBpc0lucHV0RXZlbnRTdXBwb3J0ZWQgPSBmYWxzZTsKICAgICAgY2FuVXNlRE9NICYmIChpc0lucHV0RXZlbnRTdXBwb3J0ZWQgPSBpc0V2ZW50U3VwcG9ydGVkKCJpbnB1dCIpICYmICghZG9jdW1lbnQuZG9jdW1lbnRNb2RlIHx8IDkgPCBkb2N1bWVudC5kb2N1bWVudE1vZGUpKTsKICAgICAgdmFyIG9iamVjdElzID0gImZ1bmN0aW9uIiA9PT0gdHlwZW9mIE9iamVjdC5pcyA/IE9iamVjdC5pcyA6IGlzLCBza2lwU2VsZWN0aW9uQ2hhbmdlRXZlbnQgPSBjYW5Vc2VET00gJiYgImRvY3VtZW50TW9kZSIgaW4gZG9jdW1lbnQgJiYgMTEgPj0gZG9jdW1lbnQuZG9jdW1lbnRNb2RlLCBhY3RpdmVFbGVtZW50ID0gbnVsbCwgYWN0aXZlRWxlbWVudEluc3QgPSBudWxsLCBsYXN0U2VsZWN0aW9uID0gbnVsbCwgbW91c2VEb3duID0gZmFsc2UsIHZlbmRvclByZWZpeGVzID0gewogICAgICAgIGFuaW1hdGlvbmVuZDogbWFrZVByZWZpeE1hcCgiQW5pbWF0aW9uIiwgIkFuaW1hdGlvbkVuZCIpLAogICAgICAgIGFuaW1hdGlvbml0ZXJhdGlvbjogbWFrZVByZWZpeE1hcCgiQW5pbWF0aW9uIiwgIkFuaW1hdGlvbkl0ZXJhdGlvbiIpLAogICAgICAgIGFuaW1hdGlvbnN0YXJ0OiBtYWtlUHJlZml4TWFwKCJBbmltYXRpb24iLCAiQW5pbWF0aW9uU3RhcnQiKSwKICAgICAgICB0cmFuc2l0aW9ucnVuOiBtYWtlUHJlZml4TWFwKCJUcmFuc2l0aW9uIiwgIlRyYW5zaXRpb25SdW4iKSwKICAgICAgICB0cmFuc2l0aW9uc3RhcnQ6IG1ha2VQcmVmaXhNYXAoIlRyYW5zaXRpb24iLCAiVHJhbnNpdGlvblN0YXJ0IiksCiAgICAgICAgdHJhbnNpdGlvbmNhbmNlbDogbWFrZVByZWZpeE1hcCgiVHJhbnNpdGlvbiIsICJUcmFuc2l0aW9uQ2FuY2VsIiksCiAgICAgICAgdHJhbnNpdGlvbmVuZDogbWFrZVByZWZpeE1hcCgiVHJhbnNpdGlvbiIsICJUcmFuc2l0aW9uRW5kIikKICAgICAgfSwgcHJlZml4ZWRFdmVudE5hbWVzID0ge30sIHN0eWxlID0ge307CiAgICAgIGNhblVzZURPTSAmJiAoc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKS5zdHlsZSwgIkFuaW1hdGlvbkV2ZW50IiBpbiB3aW5kb3cgfHwgKGRlbGV0ZSB2ZW5kb3JQcmVmaXhlcy5hbmltYXRpb25lbmQuYW5pbWF0aW9uLCBkZWxldGUgdmVuZG9yUHJlZml4ZXMuYW5pbWF0aW9uaXRlcmF0aW9uLmFuaW1hdGlvbiwgZGVsZXRlIHZlbmRvclByZWZpeGVzLmFuaW1hdGlvbnN0YXJ0LmFuaW1hdGlvbiksICJUcmFuc2l0aW9uRXZlbnQiIGluIHdpbmRvdyB8fCBkZWxldGUgdmVuZG9yUHJlZml4ZXMudHJhbnNpdGlvbmVuZC50cmFuc2l0aW9uKTsKICAgICAgdmFyIEFOSU1BVElPTl9FTkQgPSBnZXRWZW5kb3JQcmVmaXhlZEV2ZW50TmFtZSgiYW5pbWF0aW9uZW5kIiksIEFOSU1BVElPTl9JVEVSQVRJT04gPSBnZXRWZW5kb3JQcmVmaXhlZEV2ZW50TmFtZSgiYW5pbWF0aW9uaXRlcmF0aW9uIiksIEFOSU1BVElPTl9TVEFSVCA9IGdldFZlbmRvclByZWZpeGVkRXZlbnROYW1lKCJhbmltYXRpb25zdGFydCIpLCBUUkFOU0lUSU9OX1JVTiA9IGdldFZlbmRvclByZWZpeGVkRXZlbnROYW1lKCJ0cmFuc2l0aW9ucnVuIiksIFRSQU5TSVRJT05fU1RBUlQgPSBnZXRWZW5kb3JQcmVmaXhlZEV2ZW50TmFtZSgidHJhbnNpdGlvbnN0YXJ0IiksIFRSQU5TSVRJT05fQ0FOQ0VMID0gZ2V0VmVuZG9yUHJlZml4ZWRFdmVudE5hbWUoInRyYW5zaXRpb25jYW5jZWwiKSwgVFJBTlNJVElPTl9FTkQgPSBnZXRWZW5kb3JQcmVmaXhlZEV2ZW50TmFtZSgidHJhbnNpdGlvbmVuZCIpLCB0b3BMZXZlbEV2ZW50c1RvUmVhY3ROYW1lcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCksIHNpbXBsZUV2ZW50UGx1Z2luRXZlbnRzID0gImFib3J0IGF1eENsaWNrIGJlZm9yZVRvZ2dsZSBjYW5jZWwgY2FuUGxheSBjYW5QbGF5VGhyb3VnaCBjbGljayBjbG9zZSBjb250ZXh0TWVudSBjb3B5IGN1dCBkcmFnIGRyYWdFbmQgZHJhZ0VudGVyIGRyYWdFeGl0IGRyYWdMZWF2ZSBkcmFnT3ZlciBkcmFnU3RhcnQgZHJvcCBkdXJhdGlvbkNoYW5nZSBlbXB0aWVkIGVuY3J5cHRlZCBlbmRlZCBlcnJvciBnb3RQb2ludGVyQ2FwdHVyZSBpbnB1dCBpbnZhbGlkIGtleURvd24ga2V5UHJlc3Mga2V5VXAgbG9hZCBsb2FkZWREYXRhIGxvYWRlZE1ldGFkYXRhIGxvYWRTdGFydCBsb3N0UG9pbnRlckNhcHR1cmUgbW91c2VEb3duIG1vdXNlTW92ZSBtb3VzZU91dCBtb3VzZU92ZXIgbW91c2VVcCBwYXN0ZSBwYXVzZSBwbGF5IHBsYXlpbmcgcG9pbnRlckNhbmNlbCBwb2ludGVyRG93biBwb2ludGVyTW92ZSBwb2ludGVyT3V0IHBvaW50ZXJPdmVyIHBvaW50ZXJVcCBwcm9ncmVzcyByYXRlQ2hhbmdlIHJlc2V0IHJlc2l6ZSBzZWVrZWQgc2Vla2luZyBzdGFsbGVkIHN1Ym1pdCBzdXNwZW5kIHRpbWVVcGRhdGUgdG91Y2hDYW5jZWwgdG91Y2hFbmQgdG91Y2hTdGFydCB2b2x1bWVDaGFuZ2Ugc2Nyb2xsIHRvZ2dsZSB0b3VjaE1vdmUgd2FpdGluZyB3aGVlbCIuc3BsaXQoCiAgICAgICAgIiAiCiAgICAgICk7CiAgICAgIHNpbXBsZUV2ZW50UGx1Z2luRXZlbnRzLnB1c2goInNjcm9sbEVuZCIpOwogICAgICB2YXIgQ2FwdHVyZWRTdGFja3MgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKSwgT2Zmc2NyZWVuVmlzaWJsZSA9IDEsIE9mZnNjcmVlblBhc3NpdmVFZmZlY3RzQ29ubmVjdGVkID0gMiwgY29uY3VycmVudFF1ZXVlcyA9IFtdLCBjb25jdXJyZW50UXVldWVzSW5kZXggPSAwLCBjb25jdXJyZW50bHlVcGRhdGVkTGFuZXMgPSAwLCBlbXB0eUNvbnRleHRPYmplY3QgPSB7fTsKICAgICAgT2JqZWN0LmZyZWV6ZShlbXB0eUNvbnRleHRPYmplY3QpOwogICAgICB2YXIgcmVzb2x2ZUZhbWlseSA9IG51bGwsIGZhaWxlZEJvdW5kYXJpZXMgPSBudWxsLCBOb01vZGUgPSAwLCBDb25jdXJyZW50TW9kZSA9IDEsIFByb2ZpbGVNb2RlID0gMiwgU3RyaWN0TGVnYWN5TW9kZSA9IDgsIFN0cmljdEVmZmVjdHNNb2RlID0gMTYsIE5vU3RyaWN0UGFzc2l2ZUVmZmVjdHNNb2RlID0gNjQ7CiAgICAgIHZhciBoYXNCYWRNYXBQb2x5ZmlsbCA9IGZhbHNlOwogICAgICB0cnkgewogICAgICAgIHZhciBub25FeHRlbnNpYmxlT2JqZWN0ID0gT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KTsKICAgICAgICAvKiBAX19QVVJFX18gKi8gbmV3IE1hcChbW25vbkV4dGVuc2libGVPYmplY3QsIG51bGxdXSk7CiAgICAgICAgLyogQF9fUFVSRV9fICovIG5ldyBTZXQoW25vbkV4dGVuc2libGVPYmplY3RdKTsKICAgICAgfSBjYXRjaCAoZSQzKSB7CiAgICAgICAgaGFzQmFkTWFwUG9seWZpbGwgPSB0cnVlOwogICAgICB9CiAgICAgIHZhciBmb3JrU3RhY2sgPSBbXSwgZm9ya1N0YWNrSW5kZXggPSAwLCB0cmVlRm9ya1Byb3ZpZGVyID0gbnVsbCwgdHJlZUZvcmtDb3VudCA9IDAsIGlkU3RhY2sgPSBbXSwgaWRTdGFja0luZGV4ID0gMCwgdHJlZUNvbnRleHRQcm92aWRlciA9IG51bGwsIHRyZWVDb250ZXh0SWQgPSAxLCB0cmVlQ29udGV4dE92ZXJmbG93ID0gIiIsIGh5ZHJhdGlvblBhcmVudEZpYmVyID0gbnVsbCwgbmV4dEh5ZHJhdGFibGVJbnN0YW5jZSA9IG51bGwsIGlzSHlkcmF0aW5nID0gZmFsc2UsIGRpZFN1c3BlbmRPckVycm9yREVWID0gZmFsc2UsIGh5ZHJhdGlvbkRpZmZSb290REVWID0gbnVsbCwgaHlkcmF0aW9uRXJyb3JzID0gbnVsbCwgcm9vdE9yU2luZ2xldG9uQ29udGV4dCA9IGZhbHNlLCBIeWRyYXRpb25NaXNtYXRjaEV4Y2VwdGlvbiA9IEVycm9yKAogICAgICAgICJIeWRyYXRpb24gTWlzbWF0Y2ggRXhjZXB0aW9uOiBUaGlzIGlzIG5vdCBhIHJlYWwgZXJyb3IsIGFuZCBzaG91bGQgbm90IGxlYWsgaW50byB1c2Vyc3BhY2UuIElmIHlvdSdyZSBzZWVpbmcgdGhpcywgaXQncyBsaWtlbHkgYSBidWcgaW4gUmVhY3QuIgogICAgICApLCBsYXN0UmVzZXRUaW1lID0gMDsKICAgICAgaWYgKCJvYmplY3QiID09PSB0eXBlb2YgcGVyZm9ybWFuY2UgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHBlcmZvcm1hbmNlLm5vdykgewogICAgICAgIHZhciBsb2NhbFBlcmZvcm1hbmNlID0gcGVyZm9ybWFuY2U7CiAgICAgICAgdmFyIGdldEN1cnJlbnRUaW1lID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gbG9jYWxQZXJmb3JtYW5jZS5ub3coKTsKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBsb2NhbERhdGUgPSBEYXRlOwogICAgICAgIGdldEN1cnJlbnRUaW1lID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gbG9jYWxEYXRlLm5vdygpOwogICAgICAgIH07CiAgICAgIH0KICAgICAgdmFyIHZhbHVlQ3Vyc29yID0gY3JlYXRlQ3Vyc29yKG51bGwpOwogICAgICB2YXIgcmVuZGVyZXJDdXJzb3JERVYgPSBjcmVhdGVDdXJzb3IobnVsbCk7CiAgICAgIHZhciByZW5kZXJlclNpZ2lsID0ge307CiAgICAgIHZhciBjdXJyZW50bHlSZW5kZXJpbmdGaWJlciQxID0gbnVsbCwgbGFzdENvbnRleHREZXBlbmRlbmN5ID0gbnVsbCwgaXNEaXNhbGxvd2VkQ29udGV4dFJlYWRJbkRFViA9IGZhbHNlLCBBYm9ydENvbnRyb2xsZXJMb2NhbCA9ICJ1bmRlZmluZWQiICE9PSB0eXBlb2YgQWJvcnRDb250cm9sbGVyID8gQWJvcnRDb250cm9sbGVyIDogZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIGxpc3RlbmVycyA9IFtdLCBzaWduYWwgPSB0aGlzLnNpZ25hbCA9IHsKICAgICAgICAgIGFib3J0ZWQ6IGZhbHNlLAogICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHsKICAgICAgICAgICAgbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgdGhpcy5hYm9ydCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgc2lnbmFsLmFib3J0ZWQgPSB0cnVlOwogICAgICAgICAgbGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24obGlzdGVuZXIpIHsKICAgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyKCk7CiAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICB9LCBzY2hlZHVsZUNhbGxiYWNrJDIgPSBTY2hlZHVsZXIudW5zdGFibGVfc2NoZWR1bGVDYWxsYmFjaywgTm9ybWFsUHJpb3JpdHkgPSBTY2hlZHVsZXIudW5zdGFibGVfTm9ybWFsUHJpb3JpdHksIENhY2hlQ29udGV4dCA9IHsKICAgICAgICAkJHR5cGVvZjogUkVBQ1RfQ09OVEVYVF9UWVBFLAogICAgICAgIENvbnN1bWVyOiBudWxsLAogICAgICAgIFByb3ZpZGVyOiBudWxsLAogICAgICAgIF9jdXJyZW50VmFsdWU6IG51bGwsCiAgICAgICAgX2N1cnJlbnRWYWx1ZTI6IG51bGwsCiAgICAgICAgX3RocmVhZENvdW50OiAwLAogICAgICAgIF9jdXJyZW50UmVuZGVyZXI6IG51bGwsCiAgICAgICAgX2N1cnJlbnRSZW5kZXJlcjI6IG51bGwKICAgICAgfSwgbm93ID0gU2NoZWR1bGVyLnVuc3RhYmxlX25vdywgcmVuZGVyU3RhcnRUaW1lID0gLTAsIGNvbW1pdFN0YXJ0VGltZSA9IC0wLCBwcm9maWxlclN0YXJ0VGltZSA9IC0xLjEsIHByb2ZpbGVyRWZmZWN0RHVyYXRpb24gPSAtMCwgY3VycmVudFVwZGF0ZUlzTmVzdGVkID0gZmFsc2UsIG5lc3RlZFVwZGF0ZVNjaGVkdWxlZCA9IGZhbHNlLCBjdXJyZW50RW50YW5nbGVkTGlzdGVuZXJzID0gbnVsbCwgY3VycmVudEVudGFuZ2xlZFBlbmRpbmdDb3VudCA9IDAsIGN1cnJlbnRFbnRhbmdsZWRMYW5lID0gMCwgY3VycmVudEVudGFuZ2xlZEFjdGlvblRoZW5hYmxlID0gbnVsbCwgcHJldk9uU3RhcnRUcmFuc2l0aW9uRmluaXNoID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuUzsKICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuUyA9IGZ1bmN0aW9uKHRyYW5zaXRpb24sIHJldHVyblZhbHVlKSB7CiAgICAgICAgIm9iamVjdCIgPT09IHR5cGVvZiByZXR1cm5WYWx1ZSAmJiBudWxsICE9PSByZXR1cm5WYWx1ZSAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgcmV0dXJuVmFsdWUudGhlbiAmJiBlbnRhbmdsZUFzeW5jQWN0aW9uKHRyYW5zaXRpb24sIHJldHVyblZhbHVlKTsKICAgICAgICBudWxsICE9PSBwcmV2T25TdGFydFRyYW5zaXRpb25GaW5pc2ggJiYgcHJldk9uU3RhcnRUcmFuc2l0aW9uRmluaXNoKHRyYW5zaXRpb24sIHJldHVyblZhbHVlKTsKICAgICAgfTsKICAgICAgdmFyIHJlc3VtZWRDYWNoZSA9IGNyZWF0ZUN1cnNvcihudWxsKSwgUmVhY3RTdHJpY3RNb2RlV2FybmluZ3MgPSB7CiAgICAgICAgcmVjb3JkVW5zYWZlTGlmZWN5Y2xlV2FybmluZ3M6IGZ1bmN0aW9uKCkgewogICAgICAgIH0sCiAgICAgICAgZmx1c2hQZW5kaW5nVW5zYWZlTGlmZWN5Y2xlV2FybmluZ3M6IGZ1bmN0aW9uKCkgewogICAgICAgIH0sCiAgICAgICAgcmVjb3JkTGVnYWN5Q29udGV4dFdhcm5pbmc6IGZ1bmN0aW9uKCkgewogICAgICAgIH0sCiAgICAgICAgZmx1c2hMZWdhY3lDb250ZXh0V2FybmluZzogZnVuY3Rpb24oKSB7CiAgICAgICAgfSwKICAgICAgICBkaXNjYXJkUGVuZGluZ1dhcm5pbmdzOiBmdW5jdGlvbigpIHsKICAgICAgICB9CiAgICAgIH0sIHBlbmRpbmdDb21wb25lbnRXaWxsTW91bnRXYXJuaW5ncyA9IFtdLCBwZW5kaW5nVU5TQUZFX0NvbXBvbmVudFdpbGxNb3VudFdhcm5pbmdzID0gW10sIHBlbmRpbmdDb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzV2FybmluZ3MgPSBbXSwgcGVuZGluZ1VOU0FGRV9Db21wb25lbnRXaWxsUmVjZWl2ZVByb3BzV2FybmluZ3MgPSBbXSwgcGVuZGluZ0NvbXBvbmVudFdpbGxVcGRhdGVXYXJuaW5ncyA9IFtdLCBwZW5kaW5nVU5TQUZFX0NvbXBvbmVudFdpbGxVcGRhdGVXYXJuaW5ncyA9IFtdLCBkaWRXYXJuQWJvdXRVbnNhZmVMaWZlY3ljbGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKICAgICAgUmVhY3RTdHJpY3RNb2RlV2FybmluZ3MucmVjb3JkVW5zYWZlTGlmZWN5Y2xlV2FybmluZ3MgPSBmdW5jdGlvbihmaWJlciwgaW5zdGFuY2UpIHsKICAgICAgICBkaWRXYXJuQWJvdXRVbnNhZmVMaWZlY3ljbGVzLmhhcyhmaWJlci50eXBlKSB8fCAoImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGluc3RhbmNlLmNvbXBvbmVudFdpbGxNb3VudCAmJiB0cnVlICE9PSBpbnN0YW5jZS5jb21wb25lbnRXaWxsTW91bnQuX19zdXBwcmVzc0RlcHJlY2F0aW9uV2FybmluZyAmJiBwZW5kaW5nQ29tcG9uZW50V2lsbE1vdW50V2FybmluZ3MucHVzaChmaWJlciksIGZpYmVyLm1vZGUgJiBTdHJpY3RMZWdhY3lNb2RlICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBpbnN0YW5jZS5VTlNBRkVfY29tcG9uZW50V2lsbE1vdW50ICYmIHBlbmRpbmdVTlNBRkVfQ29tcG9uZW50V2lsbE1vdW50V2FybmluZ3MucHVzaChmaWJlciksICJmdW5jdGlvbiIgPT09IHR5cGVvZiBpbnN0YW5jZS5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzICYmIHRydWUgIT09IGluc3RhbmNlLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMuX19zdXBwcmVzc0RlcHJlY2F0aW9uV2FybmluZyAmJiBwZW5kaW5nQ29tcG9uZW50V2lsbFJlY2VpdmVQcm9wc1dhcm5pbmdzLnB1c2goZmliZXIpLCBmaWJlci5tb2RlICYgU3RyaWN0TGVnYWN5TW9kZSAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgaW5zdGFuY2UuVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgJiYgcGVuZGluZ1VOU0FGRV9Db21wb25lbnRXaWxsUmVjZWl2ZVByb3BzV2FybmluZ3MucHVzaChmaWJlciksICJmdW5jdGlvbiIgPT09IHR5cGVvZiBpbnN0YW5jZS5jb21wb25lbnRXaWxsVXBkYXRlICYmIHRydWUgIT09IGluc3RhbmNlLmNvbXBvbmVudFdpbGxVcGRhdGUuX19zdXBwcmVzc0RlcHJlY2F0aW9uV2FybmluZyAmJiBwZW5kaW5nQ29tcG9uZW50V2lsbFVwZGF0ZVdhcm5pbmdzLnB1c2goZmliZXIpLCBmaWJlci5tb2RlICYgU3RyaWN0TGVnYWN5TW9kZSAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgaW5zdGFuY2UuVU5TQUZFX2NvbXBvbmVudFdpbGxVcGRhdGUgJiYgcGVuZGluZ1VOU0FGRV9Db21wb25lbnRXaWxsVXBkYXRlV2FybmluZ3MucHVzaChmaWJlcikpOwogICAgICB9OwogICAgICBSZWFjdFN0cmljdE1vZGVXYXJuaW5ncy5mbHVzaFBlbmRpbmdVbnNhZmVMaWZlY3ljbGVXYXJuaW5ncyA9IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBjb21wb25lbnRXaWxsTW91bnRVbmlxdWVOYW1lcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7CiAgICAgICAgMCA8IHBlbmRpbmdDb21wb25lbnRXaWxsTW91bnRXYXJuaW5ncy5sZW5ndGggJiYgKHBlbmRpbmdDb21wb25lbnRXaWxsTW91bnRXYXJuaW5ncy5mb3JFYWNoKGZ1bmN0aW9uKGZpYmVyKSB7CiAgICAgICAgICBjb21wb25lbnRXaWxsTW91bnRVbmlxdWVOYW1lcy5hZGQoCiAgICAgICAgICAgIGdldENvbXBvbmVudE5hbWVGcm9tRmliZXIoZmliZXIpIHx8ICJDb21wb25lbnQiCiAgICAgICAgICApOwogICAgICAgICAgZGlkV2FybkFib3V0VW5zYWZlTGlmZWN5Y2xlcy5hZGQoZmliZXIudHlwZSk7CiAgICAgICAgfSksIHBlbmRpbmdDb21wb25lbnRXaWxsTW91bnRXYXJuaW5ncyA9IFtdKTsKICAgICAgICB2YXIgVU5TQUZFX2NvbXBvbmVudFdpbGxNb3VudFVuaXF1ZU5hbWVzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKICAgICAgICAwIDwgcGVuZGluZ1VOU0FGRV9Db21wb25lbnRXaWxsTW91bnRXYXJuaW5ncy5sZW5ndGggJiYgKHBlbmRpbmdVTlNBRkVfQ29tcG9uZW50V2lsbE1vdW50V2FybmluZ3MuZm9yRWFjaChmdW5jdGlvbihmaWJlcikgewogICAgICAgICAgVU5TQUZFX2NvbXBvbmVudFdpbGxNb3VudFVuaXF1ZU5hbWVzLmFkZCgKICAgICAgICAgICAgZ2V0Q29tcG9uZW50TmFtZUZyb21GaWJlcihmaWJlcikgfHwgIkNvbXBvbmVudCIKICAgICAgICAgICk7CiAgICAgICAgICBkaWRXYXJuQWJvdXRVbnNhZmVMaWZlY3ljbGVzLmFkZChmaWJlci50eXBlKTsKICAgICAgICB9KSwgcGVuZGluZ1VOU0FGRV9Db21wb25lbnRXaWxsTW91bnRXYXJuaW5ncyA9IFtdKTsKICAgICAgICB2YXIgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wc1VuaXF1ZU5hbWVzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKICAgICAgICAwIDwgcGVuZGluZ0NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHNXYXJuaW5ncy5sZW5ndGggJiYgKHBlbmRpbmdDb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzV2FybmluZ3MuZm9yRWFjaChmdW5jdGlvbihmaWJlcikgewogICAgICAgICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wc1VuaXF1ZU5hbWVzLmFkZCgKICAgICAgICAgICAgZ2V0Q29tcG9uZW50TmFtZUZyb21GaWJlcihmaWJlcikgfHwgIkNvbXBvbmVudCIKICAgICAgICAgICk7CiAgICAgICAgICBkaWRXYXJuQWJvdXRVbnNhZmVMaWZlY3ljbGVzLmFkZChmaWJlci50eXBlKTsKICAgICAgICB9KSwgcGVuZGluZ0NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHNXYXJuaW5ncyA9IFtdKTsKICAgICAgICB2YXIgVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHNVbmlxdWVOYW1lcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7CiAgICAgICAgMCA8IHBlbmRpbmdVTlNBRkVfQ29tcG9uZW50V2lsbFJlY2VpdmVQcm9wc1dhcm5pbmdzLmxlbmd0aCAmJiAocGVuZGluZ1VOU0FGRV9Db21wb25lbnRXaWxsUmVjZWl2ZVByb3BzV2FybmluZ3MuZm9yRWFjaCgKICAgICAgICAgIGZ1bmN0aW9uKGZpYmVyKSB7CiAgICAgICAgICAgIFVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzVW5pcXVlTmFtZXMuYWRkKAogICAgICAgICAgICAgIGdldENvbXBvbmVudE5hbWVGcm9tRmliZXIoZmliZXIpIHx8ICJDb21wb25lbnQiCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGRpZFdhcm5BYm91dFVuc2FmZUxpZmVjeWNsZXMuYWRkKGZpYmVyLnR5cGUpOwogICAgICAgICAgfQogICAgICAgICksIHBlbmRpbmdVTlNBRkVfQ29tcG9uZW50V2lsbFJlY2VpdmVQcm9wc1dhcm5pbmdzID0gW10pOwogICAgICAgIHZhciBjb21wb25lbnRXaWxsVXBkYXRlVW5pcXVlTmFtZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogICAgICAgIDAgPCBwZW5kaW5nQ29tcG9uZW50V2lsbFVwZGF0ZVdhcm5pbmdzLmxlbmd0aCAmJiAocGVuZGluZ0NvbXBvbmVudFdpbGxVcGRhdGVXYXJuaW5ncy5mb3JFYWNoKGZ1bmN0aW9uKGZpYmVyKSB7CiAgICAgICAgICBjb21wb25lbnRXaWxsVXBkYXRlVW5pcXVlTmFtZXMuYWRkKAogICAgICAgICAgICBnZXRDb21wb25lbnROYW1lRnJvbUZpYmVyKGZpYmVyKSB8fCAiQ29tcG9uZW50IgogICAgICAgICAgKTsKICAgICAgICAgIGRpZFdhcm5BYm91dFVuc2FmZUxpZmVjeWNsZXMuYWRkKGZpYmVyLnR5cGUpOwogICAgICAgIH0pLCBwZW5kaW5nQ29tcG9uZW50V2lsbFVwZGF0ZVdhcm5pbmdzID0gW10pOwogICAgICAgIHZhciBVTlNBRkVfY29tcG9uZW50V2lsbFVwZGF0ZVVuaXF1ZU5hbWVzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKICAgICAgICAwIDwgcGVuZGluZ1VOU0FGRV9Db21wb25lbnRXaWxsVXBkYXRlV2FybmluZ3MubGVuZ3RoICYmIChwZW5kaW5nVU5TQUZFX0NvbXBvbmVudFdpbGxVcGRhdGVXYXJuaW5ncy5mb3JFYWNoKGZ1bmN0aW9uKGZpYmVyKSB7CiAgICAgICAgICBVTlNBRkVfY29tcG9uZW50V2lsbFVwZGF0ZVVuaXF1ZU5hbWVzLmFkZCgKICAgICAgICAgICAgZ2V0Q29tcG9uZW50TmFtZUZyb21GaWJlcihmaWJlcikgfHwgIkNvbXBvbmVudCIKICAgICAgICAgICk7CiAgICAgICAgICBkaWRXYXJuQWJvdXRVbnNhZmVMaWZlY3ljbGVzLmFkZChmaWJlci50eXBlKTsKICAgICAgICB9KSwgcGVuZGluZ1VOU0FGRV9Db21wb25lbnRXaWxsVXBkYXRlV2FybmluZ3MgPSBbXSk7CiAgICAgICAgaWYgKDAgPCBVTlNBRkVfY29tcG9uZW50V2lsbE1vdW50VW5pcXVlTmFtZXMuc2l6ZSkgewogICAgICAgICAgdmFyIHNvcnRlZE5hbWVzID0gc2V0VG9Tb3J0ZWRTdHJpbmcoCiAgICAgICAgICAgIFVOU0FGRV9jb21wb25lbnRXaWxsTW91bnRVbmlxdWVOYW1lcwogICAgICAgICAgKTsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICJVc2luZyBVTlNBRkVfY29tcG9uZW50V2lsbE1vdW50IGluIHN0cmljdCBtb2RlIGlzIG5vdCByZWNvbW1lbmRlZCBhbmQgbWF5IGluZGljYXRlIGJ1Z3MgaW4geW91ciBjb2RlLiBTZWUgaHR0cHM6Ly9yZWFjdC5kZXYvbGluay91bnNhZmUtY29tcG9uZW50LWxpZmVjeWNsZXMgZm9yIGRldGFpbHMuXG5cbiogTW92ZSBjb2RlIHdpdGggc2lkZSBlZmZlY3RzIHRvIGNvbXBvbmVudERpZE1vdW50LCBhbmQgc2V0IGluaXRpYWwgc3RhdGUgaW4gdGhlIGNvbnN0cnVjdG9yLlxuXG5QbGVhc2UgdXBkYXRlIHRoZSBmb2xsb3dpbmcgY29tcG9uZW50czogJXMiLAogICAgICAgICAgICBzb3J0ZWROYW1lcwogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgMCA8IFVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzVW5pcXVlTmFtZXMuc2l6ZSAmJiAoc29ydGVkTmFtZXMgPSBzZXRUb1NvcnRlZFN0cmluZygKICAgICAgICAgIFVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzVW5pcXVlTmFtZXMKICAgICAgICApLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgIlVzaW5nIFVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzIGluIHN0cmljdCBtb2RlIGlzIG5vdCByZWNvbW1lbmRlZCBhbmQgbWF5IGluZGljYXRlIGJ1Z3MgaW4geW91ciBjb2RlLiBTZWUgaHR0cHM6Ly9yZWFjdC5kZXYvbGluay91bnNhZmUtY29tcG9uZW50LWxpZmVjeWNsZXMgZm9yIGRldGFpbHMuXG5cbiogTW92ZSBkYXRhIGZldGNoaW5nIGNvZGUgb3Igc2lkZSBlZmZlY3RzIHRvIGNvbXBvbmVudERpZFVwZGF0ZS5cbiogSWYgeW91J3JlIHVwZGF0aW5nIHN0YXRlIHdoZW5ldmVyIHByb3BzIGNoYW5nZSwgcmVmYWN0b3IgeW91ciBjb2RlIHRvIHVzZSBtZW1vaXphdGlvbiB0ZWNobmlxdWVzIG9yIG1vdmUgaXQgdG8gc3RhdGljIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcy4gTGVhcm4gbW9yZSBhdDogaHR0cHM6Ly9yZWFjdC5kZXYvbGluay9kZXJpdmVkLXN0YXRlXG5cblBsZWFzZSB1cGRhdGUgdGhlIGZvbGxvd2luZyBjb21wb25lbnRzOiAlcyIsCiAgICAgICAgICBzb3J0ZWROYW1lcwogICAgICAgICkpOwogICAgICAgIDAgPCBVTlNBRkVfY29tcG9uZW50V2lsbFVwZGF0ZVVuaXF1ZU5hbWVzLnNpemUgJiYgKHNvcnRlZE5hbWVzID0gc2V0VG9Tb3J0ZWRTdHJpbmcoCiAgICAgICAgICBVTlNBRkVfY29tcG9uZW50V2lsbFVwZGF0ZVVuaXF1ZU5hbWVzCiAgICAgICAgKSwgY29uc29sZS5lcnJvcigKICAgICAgICAgICJVc2luZyBVTlNBRkVfY29tcG9uZW50V2lsbFVwZGF0ZSBpbiBzdHJpY3QgbW9kZSBpcyBub3QgcmVjb21tZW5kZWQgYW5kIG1heSBpbmRpY2F0ZSBidWdzIGluIHlvdXIgY29kZS4gU2VlIGh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvdW5zYWZlLWNvbXBvbmVudC1saWZlY3ljbGVzIGZvciBkZXRhaWxzLlxuXG4qIE1vdmUgZGF0YSBmZXRjaGluZyBjb2RlIG9yIHNpZGUgZWZmZWN0cyB0byBjb21wb25lbnREaWRVcGRhdGUuXG5cblBsZWFzZSB1cGRhdGUgdGhlIGZvbGxvd2luZyBjb21wb25lbnRzOiAlcyIsCiAgICAgICAgICBzb3J0ZWROYW1lcwogICAgICAgICkpOwogICAgICAgIDAgPCBjb21wb25lbnRXaWxsTW91bnRVbmlxdWVOYW1lcy5zaXplICYmIChzb3J0ZWROYW1lcyA9IHNldFRvU29ydGVkU3RyaW5nKGNvbXBvbmVudFdpbGxNb3VudFVuaXF1ZU5hbWVzKSwgY29uc29sZS53YXJuKAogICAgICAgICAgImNvbXBvbmVudFdpbGxNb3VudCBoYXMgYmVlbiByZW5hbWVkLCBhbmQgaXMgbm90IHJlY29tbWVuZGVkIGZvciB1c2UuIFNlZSBodHRwczovL3JlYWN0LmRldi9saW5rL3Vuc2FmZS1jb21wb25lbnQtbGlmZWN5Y2xlcyBmb3IgZGV0YWlscy5cblxuKiBNb3ZlIGNvZGUgd2l0aCBzaWRlIGVmZmVjdHMgdG8gY29tcG9uZW50RGlkTW91bnQsIGFuZCBzZXQgaW5pdGlhbCBzdGF0ZSBpbiB0aGUgY29uc3RydWN0b3IuXG4qIFJlbmFtZSBjb21wb25lbnRXaWxsTW91bnQgdG8gVU5TQUZFX2NvbXBvbmVudFdpbGxNb3VudCB0byBzdXBwcmVzcyB0aGlzIHdhcm5pbmcgaW4gbm9uLXN0cmljdCBtb2RlLiBJbiBSZWFjdCAxOC54LCBvbmx5IHRoZSBVTlNBRkVfIG5hbWUgd2lsbCB3b3JrLiBUbyByZW5hbWUgYWxsIGRlcHJlY2F0ZWQgbGlmZWN5Y2xlcyB0byB0aGVpciBuZXcgbmFtZXMsIHlvdSBjYW4gcnVuIGBucHggcmVhY3QtY29kZW1vZCByZW5hbWUtdW5zYWZlLWxpZmVjeWNsZXNgIGluIHlvdXIgcHJvamVjdCBzb3VyY2UgZm9sZGVyLlxuXG5QbGVhc2UgdXBkYXRlIHRoZSBmb2xsb3dpbmcgY29tcG9uZW50czogJXMiLAogICAgICAgICAgc29ydGVkTmFtZXMKICAgICAgICApKTsKICAgICAgICAwIDwgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wc1VuaXF1ZU5hbWVzLnNpemUgJiYgKHNvcnRlZE5hbWVzID0gc2V0VG9Tb3J0ZWRTdHJpbmcoCiAgICAgICAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzVW5pcXVlTmFtZXMKICAgICAgICApLCBjb25zb2xlLndhcm4oCiAgICAgICAgICAiY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyBoYXMgYmVlbiByZW5hbWVkLCBhbmQgaXMgbm90IHJlY29tbWVuZGVkIGZvciB1c2UuIFNlZSBodHRwczovL3JlYWN0LmRldi9saW5rL3Vuc2FmZS1jb21wb25lbnQtbGlmZWN5Y2xlcyBmb3IgZGV0YWlscy5cblxuKiBNb3ZlIGRhdGEgZmV0Y2hpbmcgY29kZSBvciBzaWRlIGVmZmVjdHMgdG8gY29tcG9uZW50RGlkVXBkYXRlLlxuKiBJZiB5b3UncmUgdXBkYXRpbmcgc3RhdGUgd2hlbmV2ZXIgcHJvcHMgY2hhbmdlLCByZWZhY3RvciB5b3VyIGNvZGUgdG8gdXNlIG1lbW9pemF0aW9uIHRlY2huaXF1ZXMgb3IgbW92ZSBpdCB0byBzdGF0aWMgZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzLiBMZWFybiBtb3JlIGF0OiBodHRwczovL3JlYWN0LmRldi9saW5rL2Rlcml2ZWQtc3RhdGVcbiogUmVuYW1lIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgdG8gVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgdG8gc3VwcHJlc3MgdGhpcyB3YXJuaW5nIGluIG5vbi1zdHJpY3QgbW9kZS4gSW4gUmVhY3QgMTgueCwgb25seSB0aGUgVU5TQUZFXyBuYW1lIHdpbGwgd29yay4gVG8gcmVuYW1lIGFsbCBkZXByZWNhdGVkIGxpZmVjeWNsZXMgdG8gdGhlaXIgbmV3IG5hbWVzLCB5b3UgY2FuIHJ1biBgbnB4IHJlYWN0LWNvZGVtb2QgcmVuYW1lLXVuc2FmZS1saWZlY3ljbGVzYCBpbiB5b3VyIHByb2plY3Qgc291cmNlIGZvbGRlci5cblxuUGxlYXNlIHVwZGF0ZSB0aGUgZm9sbG93aW5nIGNvbXBvbmVudHM6ICVzIiwKICAgICAgICAgIHNvcnRlZE5hbWVzCiAgICAgICAgKSk7CiAgICAgICAgMCA8IGNvbXBvbmVudFdpbGxVcGRhdGVVbmlxdWVOYW1lcy5zaXplICYmIChzb3J0ZWROYW1lcyA9IHNldFRvU29ydGVkU3RyaW5nKGNvbXBvbmVudFdpbGxVcGRhdGVVbmlxdWVOYW1lcyksIGNvbnNvbGUud2FybigKICAgICAgICAgICJjb21wb25lbnRXaWxsVXBkYXRlIGhhcyBiZWVuIHJlbmFtZWQsIGFuZCBpcyBub3QgcmVjb21tZW5kZWQgZm9yIHVzZS4gU2VlIGh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvdW5zYWZlLWNvbXBvbmVudC1saWZlY3ljbGVzIGZvciBkZXRhaWxzLlxuXG4qIE1vdmUgZGF0YSBmZXRjaGluZyBjb2RlIG9yIHNpZGUgZWZmZWN0cyB0byBjb21wb25lbnREaWRVcGRhdGUuXG4qIFJlbmFtZSBjb21wb25lbnRXaWxsVXBkYXRlIHRvIFVOU0FGRV9jb21wb25lbnRXaWxsVXBkYXRlIHRvIHN1cHByZXNzIHRoaXMgd2FybmluZyBpbiBub24tc3RyaWN0IG1vZGUuIEluIFJlYWN0IDE4LngsIG9ubHkgdGhlIFVOU0FGRV8gbmFtZSB3aWxsIHdvcmsuIFRvIHJlbmFtZSBhbGwgZGVwcmVjYXRlZCBsaWZlY3ljbGVzIHRvIHRoZWlyIG5ldyBuYW1lcywgeW91IGNhbiBydW4gYG5weCByZWFjdC1jb2RlbW9kIHJlbmFtZS11bnNhZmUtbGlmZWN5Y2xlc2AgaW4geW91ciBwcm9qZWN0IHNvdXJjZSBmb2xkZXIuXG5cblBsZWFzZSB1cGRhdGUgdGhlIGZvbGxvd2luZyBjb21wb25lbnRzOiAlcyIsCiAgICAgICAgICBzb3J0ZWROYW1lcwogICAgICAgICkpOwogICAgICB9OwogICAgICB2YXIgcGVuZGluZ0xlZ2FjeUNvbnRleHRXYXJuaW5nID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSwgZGlkV2FybkFib3V0TGVnYWN5Q29udGV4dCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7CiAgICAgIFJlYWN0U3RyaWN0TW9kZVdhcm5pbmdzLnJlY29yZExlZ2FjeUNvbnRleHRXYXJuaW5nID0gZnVuY3Rpb24oZmliZXIsIGluc3RhbmNlKSB7CiAgICAgICAgdmFyIHN0cmljdFJvb3QgPSBudWxsOwogICAgICAgIGZvciAodmFyIG5vZGUgPSBmaWJlcjsgbnVsbCAhPT0gbm9kZTsgKQogICAgICAgICAgbm9kZS5tb2RlICYgU3RyaWN0TGVnYWN5TW9kZSAmJiAoc3RyaWN0Um9vdCA9IG5vZGUpLCBub2RlID0gbm9kZS5yZXR1cm47CiAgICAgICAgbnVsbCA9PT0gc3RyaWN0Um9vdCA/IGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiRXhwZWN0ZWQgdG8gZmluZCBhIFN0cmljdE1vZGUgY29tcG9uZW50IGluIGEgc3RyaWN0IG1vZGUgdHJlZS4gVGhpcyBlcnJvciBpcyBsaWtlbHkgY2F1c2VkIGJ5IGEgYnVnIGluIFJlYWN0LiBQbGVhc2UgZmlsZSBhbiBpc3N1ZS4iCiAgICAgICAgKSA6ICFkaWRXYXJuQWJvdXRMZWdhY3lDb250ZXh0LmhhcyhmaWJlci50eXBlKSAmJiAobm9kZSA9IHBlbmRpbmdMZWdhY3lDb250ZXh0V2FybmluZy5nZXQoc3RyaWN0Um9vdCksIG51bGwgIT0gZmliZXIudHlwZS5jb250ZXh0VHlwZXMgfHwgbnVsbCAhPSBmaWJlci50eXBlLmNoaWxkQ29udGV4dFR5cGVzIHx8IG51bGwgIT09IGluc3RhbmNlICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBpbnN0YW5jZS5nZXRDaGlsZENvbnRleHQpICYmICh2b2lkIDAgPT09IG5vZGUgJiYgKG5vZGUgPSBbXSwgcGVuZGluZ0xlZ2FjeUNvbnRleHRXYXJuaW5nLnNldChzdHJpY3RSb290LCBub2RlKSksIG5vZGUucHVzaChmaWJlcikpOwogICAgICB9OwogICAgICBSZWFjdFN0cmljdE1vZGVXYXJuaW5ncy5mbHVzaExlZ2FjeUNvbnRleHRXYXJuaW5nID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcGVuZGluZ0xlZ2FjeUNvbnRleHRXYXJuaW5nLmZvckVhY2goZnVuY3Rpb24oZmliZXJBcnJheSkgewogICAgICAgICAgaWYgKDAgIT09IGZpYmVyQXJyYXkubGVuZ3RoKSB7CiAgICAgICAgICAgIHZhciBmaXJzdEZpYmVyID0gZmliZXJBcnJheVswXSwgdW5pcXVlTmFtZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogICAgICAgICAgICBmaWJlckFycmF5LmZvckVhY2goZnVuY3Rpb24oZmliZXIpIHsKICAgICAgICAgICAgICB1bmlxdWVOYW1lcy5hZGQoZ2V0Q29tcG9uZW50TmFtZUZyb21GaWJlcihmaWJlcikgfHwgIkNvbXBvbmVudCIpOwogICAgICAgICAgICAgIGRpZFdhcm5BYm91dExlZ2FjeUNvbnRleHQuYWRkKGZpYmVyLnR5cGUpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdmFyIHNvcnRlZE5hbWVzID0gc2V0VG9Tb3J0ZWRTdHJpbmcodW5pcXVlTmFtZXMpOwogICAgICAgICAgICBydW5XaXRoRmliZXJJbkRFVihmaXJzdEZpYmVyLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAgICAgIkxlZ2FjeSBjb250ZXh0IEFQSSBoYXMgYmVlbiBkZXRlY3RlZCB3aXRoaW4gYSBzdHJpY3QtbW9kZSB0cmVlLlxuXG5UaGUgb2xkIEFQSSB3aWxsIGJlIHN1cHBvcnRlZCBpbiBhbGwgMTYueCByZWxlYXNlcywgYnV0IGFwcGxpY2F0aW9ucyB1c2luZyBpdCBzaG91bGQgbWlncmF0ZSB0byB0aGUgbmV3IHZlcnNpb24uXG5cblBsZWFzZSB1cGRhdGUgdGhlIGZvbGxvd2luZyBjb21wb25lbnRzOiAlc1xuXG5MZWFybiBtb3JlIGFib3V0IHRoaXMgd2FybmluZyBoZXJlOiBodHRwczovL3JlYWN0LmRldi9saW5rL2xlZ2FjeS1jb250ZXh0IiwKICAgICAgICAgICAgICAgIHNvcnRlZE5hbWVzCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIFJlYWN0U3RyaWN0TW9kZVdhcm5pbmdzLmRpc2NhcmRQZW5kaW5nV2FybmluZ3MgPSBmdW5jdGlvbigpIHsKICAgICAgICBwZW5kaW5nQ29tcG9uZW50V2lsbE1vdW50V2FybmluZ3MgPSBbXTsKICAgICAgICBwZW5kaW5nVU5TQUZFX0NvbXBvbmVudFdpbGxNb3VudFdhcm5pbmdzID0gW107CiAgICAgICAgcGVuZGluZ0NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHNXYXJuaW5ncyA9IFtdOwogICAgICAgIHBlbmRpbmdVTlNBRkVfQ29tcG9uZW50V2lsbFJlY2VpdmVQcm9wc1dhcm5pbmdzID0gW107CiAgICAgICAgcGVuZGluZ0NvbXBvbmVudFdpbGxVcGRhdGVXYXJuaW5ncyA9IFtdOwogICAgICAgIHBlbmRpbmdVTlNBRkVfQ29tcG9uZW50V2lsbFVwZGF0ZVdhcm5pbmdzID0gW107CiAgICAgICAgcGVuZGluZ0xlZ2FjeUNvbnRleHRXYXJuaW5nID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICAgICAgfTsKICAgICAgdmFyIFN1c3BlbnNlRXhjZXB0aW9uID0gRXJyb3IoCiAgICAgICAgIlN1c3BlbnNlIEV4Y2VwdGlvbjogVGhpcyBpcyBub3QgYSByZWFsIGVycm9yISBJdCdzIGFuIGltcGxlbWVudGF0aW9uIGRldGFpbCBvZiBgdXNlYCB0byBpbnRlcnJ1cHQgdGhlIGN1cnJlbnQgcmVuZGVyLiBZb3UgbXVzdCBlaXRoZXIgcmV0aHJvdyBpdCBpbW1lZGlhdGVseSwgb3IgbW92ZSB0aGUgYHVzZWAgY2FsbCBvdXRzaWRlIG9mIHRoZSBgdHJ5L2NhdGNoYCBibG9jay4gQ2FwdHVyaW5nIHdpdGhvdXQgcmV0aHJvd2luZyB3aWxsIGxlYWQgdG8gdW5leHBlY3RlZCBiZWhhdmlvci5cblxuVG8gaGFuZGxlIGFzeW5jIGVycm9ycywgd3JhcCB5b3VyIGNvbXBvbmVudCBpbiBhbiBlcnJvciBib3VuZGFyeSwgb3IgY2FsbCB0aGUgcHJvbWlzZSdzIGAuY2F0Y2hgIG1ldGhvZCBhbmQgcGFzcyB0aGUgcmVzdWx0IHRvIGB1c2VgLiIKICAgICAgKSwgU3VzcGVuc2V5Q29tbWl0RXhjZXB0aW9uID0gRXJyb3IoCiAgICAgICAgIlN1c3BlbnNlIEV4Y2VwdGlvbjogVGhpcyBpcyBub3QgYSByZWFsIGVycm9yLCBhbmQgc2hvdWxkIG5vdCBsZWFrIGludG8gdXNlcnNwYWNlLiBJZiB5b3UncmUgc2VlaW5nIHRoaXMsIGl0J3MgbGlrZWx5IGEgYnVnIGluIFJlYWN0LiIKICAgICAgKSwgU3VzcGVuc2VBY3Rpb25FeGNlcHRpb24gPSBFcnJvcigKICAgICAgICAiU3VzcGVuc2UgRXhjZXB0aW9uOiBUaGlzIGlzIG5vdCBhIHJlYWwgZXJyb3IhIEl0J3MgYW4gaW1wbGVtZW50YXRpb24gZGV0YWlsIG9mIGB1c2VBY3Rpb25TdGF0ZWAgdG8gaW50ZXJydXB0IHRoZSBjdXJyZW50IHJlbmRlci4gWW91IG11c3QgZWl0aGVyIHJldGhyb3cgaXQgaW1tZWRpYXRlbHksIG9yIG1vdmUgdGhlIGB1c2VBY3Rpb25TdGF0ZWAgY2FsbCBvdXRzaWRlIG9mIHRoZSBgdHJ5L2NhdGNoYCBibG9jay4gQ2FwdHVyaW5nIHdpdGhvdXQgcmV0aHJvd2luZyB3aWxsIGxlYWQgdG8gdW5leHBlY3RlZCBiZWhhdmlvci5cblxuVG8gaGFuZGxlIGFzeW5jIGVycm9ycywgd3JhcCB5b3VyIGNvbXBvbmVudCBpbiBhbiBlcnJvciBib3VuZGFyeS4iCiAgICAgICksIG5vb3BTdXNwZW5zZXlDb21taXRUaGVuYWJsZSA9IHsKICAgICAgICB0aGVuOiBmdW5jdGlvbigpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICdJbnRlcm5hbCBSZWFjdCBlcnJvcjogQSBsaXN0ZW5lciB3YXMgdW5leHBlY3RlZGx5IGF0dGFjaGVkIHRvIGEgIm5vb3AiIHRoZW5hYmxlLiBUaGlzIGlzIGEgYnVnIGluIFJlYWN0LiBQbGVhc2UgZmlsZSBhbiBpc3N1ZS4nCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfSwgc3VzcGVuZGVkVGhlbmFibGUgPSBudWxsLCBuZWVkc1RvUmVzZXRTdXNwZW5kZWRUaGVuYWJsZURFViA9IGZhbHNlLCBOb0ZsYWdzID0gMCwgSGFzRWZmZWN0ID0gMSwgSW5zZXJ0aW9uID0gMiwgTGF5b3V0ID0gNCwgUGFzc2l2ZSA9IDgsIFVwZGF0ZVN0YXRlID0gMCwgUmVwbGFjZVN0YXRlID0gMSwgRm9yY2VVcGRhdGUgPSAyLCBDYXB0dXJlVXBkYXRlID0gMywgaGFzRm9yY2VVcGRhdGUgPSBmYWxzZTsKICAgICAgdmFyIGRpZFdhcm5VcGRhdGVJbnNpZGVVcGRhdGUgPSBmYWxzZTsKICAgICAgdmFyIGN1cnJlbnRseVByb2Nlc3NpbmdRdWV1ZSA9IG51bGw7CiAgICAgIHZhciBkaWRSZWFkRnJvbUVudGFuZ2xlZEFzeW5jQWN0aW9uID0gZmFsc2UsIGN1cnJlbnRUcmVlSGlkZGVuU3RhY2tDdXJzb3IgPSBjcmVhdGVDdXJzb3IobnVsbCksIHByZXZFbnRhbmdsZWRSZW5kZXJMYW5lc0N1cnNvciA9IGNyZWF0ZUN1cnNvcigwKSwgZGlkV2FyblVuY2FjaGVkR2V0U25hcHNob3Q7CiAgICAgIHZhciBkaWRXYXJuQWJvdXRNaXNtYXRjaGVkSG9va3NGb3JDb21wb25lbnQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogICAgICB2YXIgZGlkV2FybkFib3V0VXNlV3JhcHBlZEluVHJ5Q2F0Y2ggPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogICAgICB2YXIgZGlkV2FybkFib3V0QXN5bmNDbGllbnRDb21wb25lbnQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogICAgICB2YXIgZGlkV2FybkFib3V0VXNlRm9ybVN0YXRlID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKICAgICAgdmFyIHJlbmRlckxhbmVzID0gMCwgY3VycmVudGx5UmVuZGVyaW5nRmliZXIgPSBudWxsLCBjdXJyZW50SG9vayA9IG51bGwsIHdvcmtJblByb2dyZXNzSG9vayA9IG51bGwsIGRpZFNjaGVkdWxlUmVuZGVyUGhhc2VVcGRhdGUgPSBmYWxzZSwgZGlkU2NoZWR1bGVSZW5kZXJQaGFzZVVwZGF0ZUR1cmluZ1RoaXNQYXNzID0gZmFsc2UsIHNob3VsZERvdWJsZUludm9rZVVzZXJGbnNJbkhvb2tzREVWID0gZmFsc2UsIGxvY2FsSWRDb3VudGVyID0gMCwgdGhlbmFibGVJbmRleENvdW50ZXIkMSA9IDAsIHRoZW5hYmxlU3RhdGUkMSA9IG51bGwsIGdsb2JhbENsaWVudElkQ291bnRlciA9IDAsIFJFX1JFTkRFUl9MSU1JVCA9IDI1LCBjdXJyZW50SG9va05hbWVJbkRldiA9IG51bGwsIGhvb2tUeXBlc0RldiA9IG51bGwsIGhvb2tUeXBlc1VwZGF0ZUluZGV4RGV2ID0gLTEsIGlnbm9yZVByZXZpb3VzRGVwZW5kZW5jaWVzID0gZmFsc2UsIENvbnRleHRPbmx5RGlzcGF0Y2hlciA9IHsKICAgICAgICByZWFkQ29udGV4dCwKICAgICAgICB1c2UsCiAgICAgICAgdXNlQ2FsbGJhY2s6IHRocm93SW52YWxpZEhvb2tFcnJvciwKICAgICAgICB1c2VDb250ZXh0OiB0aHJvd0ludmFsaWRIb29rRXJyb3IsCiAgICAgICAgdXNlRWZmZWN0OiB0aHJvd0ludmFsaWRIb29rRXJyb3IsCiAgICAgICAgdXNlSW1wZXJhdGl2ZUhhbmRsZTogdGhyb3dJbnZhbGlkSG9va0Vycm9yLAogICAgICAgIHVzZUxheW91dEVmZmVjdDogdGhyb3dJbnZhbGlkSG9va0Vycm9yLAogICAgICAgIHVzZUluc2VydGlvbkVmZmVjdDogdGhyb3dJbnZhbGlkSG9va0Vycm9yLAogICAgICAgIHVzZU1lbW86IHRocm93SW52YWxpZEhvb2tFcnJvciwKICAgICAgICB1c2VSZWR1Y2VyOiB0aHJvd0ludmFsaWRIb29rRXJyb3IsCiAgICAgICAgdXNlUmVmOiB0aHJvd0ludmFsaWRIb29rRXJyb3IsCiAgICAgICAgdXNlU3RhdGU6IHRocm93SW52YWxpZEhvb2tFcnJvciwKICAgICAgICB1c2VEZWJ1Z1ZhbHVlOiB0aHJvd0ludmFsaWRIb29rRXJyb3IsCiAgICAgICAgdXNlRGVmZXJyZWRWYWx1ZTogdGhyb3dJbnZhbGlkSG9va0Vycm9yLAogICAgICAgIHVzZVRyYW5zaXRpb246IHRocm93SW52YWxpZEhvb2tFcnJvciwKICAgICAgICB1c2VTeW5jRXh0ZXJuYWxTdG9yZTogdGhyb3dJbnZhbGlkSG9va0Vycm9yLAogICAgICAgIHVzZUlkOiB0aHJvd0ludmFsaWRIb29rRXJyb3IsCiAgICAgICAgdXNlSG9zdFRyYW5zaXRpb25TdGF0dXM6IHRocm93SW52YWxpZEhvb2tFcnJvciwKICAgICAgICB1c2VGb3JtU3RhdGU6IHRocm93SW52YWxpZEhvb2tFcnJvciwKICAgICAgICB1c2VBY3Rpb25TdGF0ZTogdGhyb3dJbnZhbGlkSG9va0Vycm9yLAogICAgICAgIHVzZU9wdGltaXN0aWM6IHRocm93SW52YWxpZEhvb2tFcnJvciwKICAgICAgICB1c2VNZW1vQ2FjaGU6IHRocm93SW52YWxpZEhvb2tFcnJvciwKICAgICAgICB1c2VDYWNoZVJlZnJlc2g6IHRocm93SW52YWxpZEhvb2tFcnJvcgogICAgICB9LCBIb29rc0Rpc3BhdGNoZXJPbk1vdW50SW5ERVYgPSBudWxsLCBIb29rc0Rpc3BhdGNoZXJPbk1vdW50V2l0aEhvb2tUeXBlc0luREVWID0gbnVsbCwgSG9va3NEaXNwYXRjaGVyT25VcGRhdGVJbkRFViA9IG51bGwsIEhvb2tzRGlzcGF0Y2hlck9uUmVyZW5kZXJJbkRFViA9IG51bGwsIEludmFsaWROZXN0ZWRIb29rc0Rpc3BhdGNoZXJPbk1vdW50SW5ERVYgPSBudWxsLCBJbnZhbGlkTmVzdGVkSG9va3NEaXNwYXRjaGVyT25VcGRhdGVJbkRFViA9IG51bGwsIEludmFsaWROZXN0ZWRIb29rc0Rpc3BhdGNoZXJPblJlcmVuZGVySW5ERVYgPSBudWxsOwogICAgICBIb29rc0Rpc3BhdGNoZXJPbk1vdW50SW5ERVYgPSB7CiAgICAgICAgcmVhZENvbnRleHQ6IGZ1bmN0aW9uKGNvbnRleHQpIHsKICAgICAgICAgIHJldHVybiByZWFkQ29udGV4dChjb250ZXh0KTsKICAgICAgICB9LAogICAgICAgIHVzZSwKICAgICAgICB1c2VDYWxsYmFjazogZnVuY3Rpb24oY2FsbGJhY2ssIGRlcHMpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUNhbGxiYWNrIjsKICAgICAgICAgIG1vdW50SG9va1R5cGVzRGV2KCk7CiAgICAgICAgICBjaGVja0RlcHNBcmVBcnJheURldihkZXBzKTsKICAgICAgICAgIHJldHVybiBtb3VudENhbGxiYWNrKGNhbGxiYWNrLCBkZXBzKTsKICAgICAgICB9LAogICAgICAgIHVzZUNvbnRleHQ6IGZ1bmN0aW9uKGNvbnRleHQpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUNvbnRleHQiOwogICAgICAgICAgbW91bnRIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiByZWFkQ29udGV4dChjb250ZXh0KTsKICAgICAgICB9LAogICAgICAgIHVzZUVmZmVjdDogZnVuY3Rpb24oY3JlYXRlLCBjcmVhdGVEZXBzKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VFZmZlY3QiOwogICAgICAgICAgbW91bnRIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIGNoZWNrRGVwc0FyZUFycmF5RGV2KGNyZWF0ZURlcHMpOwogICAgICAgICAgcmV0dXJuIG1vdW50RWZmZWN0KGNyZWF0ZSwgY3JlYXRlRGVwcyk7CiAgICAgICAgfSwKICAgICAgICB1c2VJbXBlcmF0aXZlSGFuZGxlOiBmdW5jdGlvbihyZWYsIGNyZWF0ZSwgZGVwcykgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlSW1wZXJhdGl2ZUhhbmRsZSI7CiAgICAgICAgICBtb3VudEhvb2tUeXBlc0RldigpOwogICAgICAgICAgY2hlY2tEZXBzQXJlQXJyYXlEZXYoZGVwcyk7CiAgICAgICAgICByZXR1cm4gbW91bnRJbXBlcmF0aXZlSGFuZGxlKHJlZiwgY3JlYXRlLCBkZXBzKTsKICAgICAgICB9LAogICAgICAgIHVzZUluc2VydGlvbkVmZmVjdDogZnVuY3Rpb24oY3JlYXRlLCBkZXBzKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VJbnNlcnRpb25FZmZlY3QiOwogICAgICAgICAgbW91bnRIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIGNoZWNrRGVwc0FyZUFycmF5RGV2KGRlcHMpOwogICAgICAgICAgbW91bnRFZmZlY3RJbXBsKDQsIEluc2VydGlvbiwgY3JlYXRlLCBkZXBzKTsKICAgICAgICB9LAogICAgICAgIHVzZUxheW91dEVmZmVjdDogZnVuY3Rpb24oY3JlYXRlLCBkZXBzKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VMYXlvdXRFZmZlY3QiOwogICAgICAgICAgbW91bnRIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIGNoZWNrRGVwc0FyZUFycmF5RGV2KGRlcHMpOwogICAgICAgICAgcmV0dXJuIG1vdW50TGF5b3V0RWZmZWN0KGNyZWF0ZSwgZGVwcyk7CiAgICAgICAgfSwKICAgICAgICB1c2VNZW1vOiBmdW5jdGlvbihjcmVhdGUsIGRlcHMpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZU1lbW8iOwogICAgICAgICAgbW91bnRIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIGNoZWNrRGVwc0FyZUFycmF5RGV2KGRlcHMpOwogICAgICAgICAgdmFyIHByZXZEaXNwYXRjaGVyID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuSDsKICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLkggPSBJbnZhbGlkTmVzdGVkSG9va3NEaXNwYXRjaGVyT25Nb3VudEluREVWOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIG1vdW50TWVtbyhjcmVhdGUsIGRlcHMpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuSCA9IHByZXZEaXNwYXRjaGVyOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdXNlUmVkdWNlcjogZnVuY3Rpb24ocmVkdWNlciwgaW5pdGlhbEFyZywgaW5pdCkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlUmVkdWNlciI7CiAgICAgICAgICBtb3VudEhvb2tUeXBlc0RldigpOwogICAgICAgICAgdmFyIHByZXZEaXNwYXRjaGVyID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuSDsKICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLkggPSBJbnZhbGlkTmVzdGVkSG9va3NEaXNwYXRjaGVyT25Nb3VudEluREVWOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIG1vdW50UmVkdWNlcihyZWR1Y2VyLCBpbml0aWFsQXJnLCBpbml0KTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLkggPSBwcmV2RGlzcGF0Y2hlcjsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHVzZVJlZjogZnVuY3Rpb24oaW5pdGlhbFZhbHVlKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VSZWYiOwogICAgICAgICAgbW91bnRIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiBtb3VudFJlZihpbml0aWFsVmFsdWUpOwogICAgICAgIH0sCiAgICAgICAgdXNlU3RhdGU6IGZ1bmN0aW9uKGluaXRpYWxTdGF0ZSkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlU3RhdGUiOwogICAgICAgICAgbW91bnRIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHZhciBwcmV2RGlzcGF0Y2hlciA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLkg7CiAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gSW52YWxpZE5lc3RlZEhvb2tzRGlzcGF0Y2hlck9uTW91bnRJbkRFVjsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBtb3VudFN0YXRlKGluaXRpYWxTdGF0ZSk7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gcHJldkRpc3BhdGNoZXI7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB1c2VEZWJ1Z1ZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZURlYnVnVmFsdWUiOwogICAgICAgICAgbW91bnRIb29rVHlwZXNEZXYoKTsKICAgICAgICB9LAogICAgICAgIHVzZURlZmVycmVkVmFsdWU6IGZ1bmN0aW9uKHZhbHVlLCBpbml0aWFsVmFsdWUpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZURlZmVycmVkVmFsdWUiOwogICAgICAgICAgbW91bnRIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiBtb3VudERlZmVycmVkVmFsdWUodmFsdWUsIGluaXRpYWxWYWx1ZSk7CiAgICAgICAgfSwKICAgICAgICB1c2VUcmFuc2l0aW9uOiBmdW5jdGlvbigpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZVRyYW5zaXRpb24iOwogICAgICAgICAgbW91bnRIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiBtb3VudFRyYW5zaXRpb24oKTsKICAgICAgICB9LAogICAgICAgIHVzZVN5bmNFeHRlcm5hbFN0b3JlOiBmdW5jdGlvbihzdWJzY3JpYmUsIGdldFNuYXBzaG90LCBnZXRTZXJ2ZXJTbmFwc2hvdCkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlU3luY0V4dGVybmFsU3RvcmUiOwogICAgICAgICAgbW91bnRIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiBtb3VudFN5bmNFeHRlcm5hbFN0b3JlKAogICAgICAgICAgICBzdWJzY3JpYmUsCiAgICAgICAgICAgIGdldFNuYXBzaG90LAogICAgICAgICAgICBnZXRTZXJ2ZXJTbmFwc2hvdAogICAgICAgICAgKTsKICAgICAgICB9LAogICAgICAgIHVzZUlkOiBmdW5jdGlvbigpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUlkIjsKICAgICAgICAgIG1vdW50SG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gbW91bnRJZCgpOwogICAgICAgIH0sCiAgICAgICAgdXNlRm9ybVN0YXRlOiBmdW5jdGlvbihhY3Rpb24sIGluaXRpYWxTdGF0ZSkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlRm9ybVN0YXRlIjsKICAgICAgICAgIG1vdW50SG9va1R5cGVzRGV2KCk7CiAgICAgICAgICB3YXJuT25Vc2VGb3JtU3RhdGVJbkRldigpOwogICAgICAgICAgcmV0dXJuIG1vdW50QWN0aW9uU3RhdGUoYWN0aW9uLCBpbml0aWFsU3RhdGUpOwogICAgICAgIH0sCiAgICAgICAgdXNlQWN0aW9uU3RhdGU6IGZ1bmN0aW9uKGFjdGlvbiwgaW5pdGlhbFN0YXRlKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VBY3Rpb25TdGF0ZSI7CiAgICAgICAgICBtb3VudEhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIG1vdW50QWN0aW9uU3RhdGUoYWN0aW9uLCBpbml0aWFsU3RhdGUpOwogICAgICAgIH0sCiAgICAgICAgdXNlT3B0aW1pc3RpYzogZnVuY3Rpb24ocGFzc3Rocm91Z2gpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZU9wdGltaXN0aWMiOwogICAgICAgICAgbW91bnRIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiBtb3VudE9wdGltaXN0aWMocGFzc3Rocm91Z2gpOwogICAgICAgIH0sCiAgICAgICAgdXNlSG9zdFRyYW5zaXRpb25TdGF0dXMsCiAgICAgICAgdXNlTWVtb0NhY2hlLAogICAgICAgIHVzZUNhY2hlUmVmcmVzaDogZnVuY3Rpb24oKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VDYWNoZVJlZnJlc2giOwogICAgICAgICAgbW91bnRIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiBtb3VudFJlZnJlc2goKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIEhvb2tzRGlzcGF0Y2hlck9uTW91bnRXaXRoSG9va1R5cGVzSW5ERVYgPSB7CiAgICAgICAgcmVhZENvbnRleHQ6IGZ1bmN0aW9uKGNvbnRleHQpIHsKICAgICAgICAgIHJldHVybiByZWFkQ29udGV4dChjb250ZXh0KTsKICAgICAgICB9LAogICAgICAgIHVzZSwKICAgICAgICB1c2VDYWxsYmFjazogZnVuY3Rpb24oY2FsbGJhY2ssIGRlcHMpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUNhbGxiYWNrIjsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIG1vdW50Q2FsbGJhY2soY2FsbGJhY2ssIGRlcHMpOwogICAgICAgIH0sCiAgICAgICAgdXNlQ29udGV4dDogZnVuY3Rpb24oY29udGV4dCkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlQ29udGV4dCI7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiByZWFkQ29udGV4dChjb250ZXh0KTsKICAgICAgICB9LAogICAgICAgIHVzZUVmZmVjdDogZnVuY3Rpb24oY3JlYXRlLCBjcmVhdGVEZXBzKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VFZmZlY3QiOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gbW91bnRFZmZlY3QoY3JlYXRlLCBjcmVhdGVEZXBzKTsKICAgICAgICB9LAogICAgICAgIHVzZUltcGVyYXRpdmVIYW5kbGU6IGZ1bmN0aW9uKHJlZiwgY3JlYXRlLCBkZXBzKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VJbXBlcmF0aXZlSGFuZGxlIjsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIG1vdW50SW1wZXJhdGl2ZUhhbmRsZShyZWYsIGNyZWF0ZSwgZGVwcyk7CiAgICAgICAgfSwKICAgICAgICB1c2VJbnNlcnRpb25FZmZlY3Q6IGZ1bmN0aW9uKGNyZWF0ZSwgZGVwcykgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlSW5zZXJ0aW9uRWZmZWN0IjsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgbW91bnRFZmZlY3RJbXBsKDQsIEluc2VydGlvbiwgY3JlYXRlLCBkZXBzKTsKICAgICAgICB9LAogICAgICAgIHVzZUxheW91dEVmZmVjdDogZnVuY3Rpb24oY3JlYXRlLCBkZXBzKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VMYXlvdXRFZmZlY3QiOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gbW91bnRMYXlvdXRFZmZlY3QoY3JlYXRlLCBkZXBzKTsKICAgICAgICB9LAogICAgICAgIHVzZU1lbW86IGZ1bmN0aW9uKGNyZWF0ZSwgZGVwcykgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlTWVtbyI7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHZhciBwcmV2RGlzcGF0Y2hlciA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLkg7CiAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gSW52YWxpZE5lc3RlZEhvb2tzRGlzcGF0Y2hlck9uTW91bnRJbkRFVjsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBtb3VudE1lbW8oY3JlYXRlLCBkZXBzKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLkggPSBwcmV2RGlzcGF0Y2hlcjsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHVzZVJlZHVjZXI6IGZ1bmN0aW9uKHJlZHVjZXIsIGluaXRpYWxBcmcsIGluaXQpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZVJlZHVjZXIiOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICB2YXIgcHJldkRpc3BhdGNoZXIgPSBSZWFjdFNoYXJlZEludGVybmFscy5IOwogICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuSCA9IEludmFsaWROZXN0ZWRIb29rc0Rpc3BhdGNoZXJPbk1vdW50SW5ERVY7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gbW91bnRSZWR1Y2VyKHJlZHVjZXIsIGluaXRpYWxBcmcsIGluaXQpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuSCA9IHByZXZEaXNwYXRjaGVyOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdXNlUmVmOiBmdW5jdGlvbihpbml0aWFsVmFsdWUpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZVJlZiI7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiBtb3VudFJlZihpbml0aWFsVmFsdWUpOwogICAgICAgIH0sCiAgICAgICAgdXNlU3RhdGU6IGZ1bmN0aW9uKGluaXRpYWxTdGF0ZSkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlU3RhdGUiOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICB2YXIgcHJldkRpc3BhdGNoZXIgPSBSZWFjdFNoYXJlZEludGVybmFscy5IOwogICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuSCA9IEludmFsaWROZXN0ZWRIb29rc0Rpc3BhdGNoZXJPbk1vdW50SW5ERVY7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gbW91bnRTdGF0ZShpbml0aWFsU3RhdGUpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuSCA9IHByZXZEaXNwYXRjaGVyOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdXNlRGVidWdWYWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VEZWJ1Z1ZhbHVlIjsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgIH0sCiAgICAgICAgdXNlRGVmZXJyZWRWYWx1ZTogZnVuY3Rpb24odmFsdWUsIGluaXRpYWxWYWx1ZSkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlRGVmZXJyZWRWYWx1ZSI7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiBtb3VudERlZmVycmVkVmFsdWUodmFsdWUsIGluaXRpYWxWYWx1ZSk7CiAgICAgICAgfSwKICAgICAgICB1c2VUcmFuc2l0aW9uOiBmdW5jdGlvbigpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZVRyYW5zaXRpb24iOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gbW91bnRUcmFuc2l0aW9uKCk7CiAgICAgICAgfSwKICAgICAgICB1c2VTeW5jRXh0ZXJuYWxTdG9yZTogZnVuY3Rpb24oc3Vic2NyaWJlLCBnZXRTbmFwc2hvdCwgZ2V0U2VydmVyU25hcHNob3QpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZVN5bmNFeHRlcm5hbFN0b3JlIjsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIG1vdW50U3luY0V4dGVybmFsU3RvcmUoCiAgICAgICAgICAgIHN1YnNjcmliZSwKICAgICAgICAgICAgZ2V0U25hcHNob3QsCiAgICAgICAgICAgIGdldFNlcnZlclNuYXBzaG90CiAgICAgICAgICApOwogICAgICAgIH0sCiAgICAgICAgdXNlSWQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlSWQiOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gbW91bnRJZCgpOwogICAgICAgIH0sCiAgICAgICAgdXNlQWN0aW9uU3RhdGU6IGZ1bmN0aW9uKGFjdGlvbiwgaW5pdGlhbFN0YXRlKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VBY3Rpb25TdGF0ZSI7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiBtb3VudEFjdGlvblN0YXRlKGFjdGlvbiwgaW5pdGlhbFN0YXRlKTsKICAgICAgICB9LAogICAgICAgIHVzZUZvcm1TdGF0ZTogZnVuY3Rpb24oYWN0aW9uLCBpbml0aWFsU3RhdGUpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUZvcm1TdGF0ZSI7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHdhcm5PblVzZUZvcm1TdGF0ZUluRGV2KCk7CiAgICAgICAgICByZXR1cm4gbW91bnRBY3Rpb25TdGF0ZShhY3Rpb24sIGluaXRpYWxTdGF0ZSk7CiAgICAgICAgfSwKICAgICAgICB1c2VPcHRpbWlzdGljOiBmdW5jdGlvbihwYXNzdGhyb3VnaCkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlT3B0aW1pc3RpYyI7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiBtb3VudE9wdGltaXN0aWMocGFzc3Rocm91Z2gpOwogICAgICAgIH0sCiAgICAgICAgdXNlSG9zdFRyYW5zaXRpb25TdGF0dXMsCiAgICAgICAgdXNlTWVtb0NhY2hlLAogICAgICAgIHVzZUNhY2hlUmVmcmVzaDogZnVuY3Rpb24oKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VDYWNoZVJlZnJlc2giOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gbW91bnRSZWZyZXNoKCk7CiAgICAgICAgfQogICAgICB9OwogICAgICBIb29rc0Rpc3BhdGNoZXJPblVwZGF0ZUluREVWID0gewogICAgICAgIHJlYWRDb250ZXh0OiBmdW5jdGlvbihjb250ZXh0KSB7CiAgICAgICAgICByZXR1cm4gcmVhZENvbnRleHQoY29udGV4dCk7CiAgICAgICAgfSwKICAgICAgICB1c2UsCiAgICAgICAgdXNlQ2FsbGJhY2s6IGZ1bmN0aW9uKGNhbGxiYWNrLCBkZXBzKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VDYWxsYmFjayI7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiB1cGRhdGVDYWxsYmFjayhjYWxsYmFjaywgZGVwcyk7CiAgICAgICAgfSwKICAgICAgICB1c2VDb250ZXh0OiBmdW5jdGlvbihjb250ZXh0KSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VDb250ZXh0IjsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIHJlYWRDb250ZXh0KGNvbnRleHQpOwogICAgICAgIH0sCiAgICAgICAgdXNlRWZmZWN0OiBmdW5jdGlvbihjcmVhdGUsIGNyZWF0ZURlcHMpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUVmZmVjdCI7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHVwZGF0ZUVmZmVjdEltcGwoMjA0OCwgUGFzc2l2ZSwgY3JlYXRlLCBjcmVhdGVEZXBzKTsKICAgICAgICB9LAogICAgICAgIHVzZUltcGVyYXRpdmVIYW5kbGU6IGZ1bmN0aW9uKHJlZiwgY3JlYXRlLCBkZXBzKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VJbXBlcmF0aXZlSGFuZGxlIjsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIHVwZGF0ZUltcGVyYXRpdmVIYW5kbGUocmVmLCBjcmVhdGUsIGRlcHMpOwogICAgICAgIH0sCiAgICAgICAgdXNlSW5zZXJ0aW9uRWZmZWN0OiBmdW5jdGlvbihjcmVhdGUsIGRlcHMpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUluc2VydGlvbkVmZmVjdCI7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiB1cGRhdGVFZmZlY3RJbXBsKDQsIEluc2VydGlvbiwgY3JlYXRlLCBkZXBzKTsKICAgICAgICB9LAogICAgICAgIHVzZUxheW91dEVmZmVjdDogZnVuY3Rpb24oY3JlYXRlLCBkZXBzKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VMYXlvdXRFZmZlY3QiOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gdXBkYXRlRWZmZWN0SW1wbCg0LCBMYXlvdXQsIGNyZWF0ZSwgZGVwcyk7CiAgICAgICAgfSwKICAgICAgICB1c2VNZW1vOiBmdW5jdGlvbihjcmVhdGUsIGRlcHMpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZU1lbW8iOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICB2YXIgcHJldkRpc3BhdGNoZXIgPSBSZWFjdFNoYXJlZEludGVybmFscy5IOwogICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuSCA9IEludmFsaWROZXN0ZWRIb29rc0Rpc3BhdGNoZXJPblVwZGF0ZUluREVWOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZU1lbW8oY3JlYXRlLCBkZXBzKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLkggPSBwcmV2RGlzcGF0Y2hlcjsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHVzZVJlZHVjZXI6IGZ1bmN0aW9uKHJlZHVjZXIsIGluaXRpYWxBcmcsIGluaXQpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZVJlZHVjZXIiOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICB2YXIgcHJldkRpc3BhdGNoZXIgPSBSZWFjdFNoYXJlZEludGVybmFscy5IOwogICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuSCA9IEludmFsaWROZXN0ZWRIb29rc0Rpc3BhdGNoZXJPblVwZGF0ZUluREVWOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZVJlZHVjZXIocmVkdWNlciwgaW5pdGlhbEFyZywgaW5pdCk7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gcHJldkRpc3BhdGNoZXI7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB1c2VSZWY6IGZ1bmN0aW9uKCkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlUmVmIjsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIHVwZGF0ZVdvcmtJblByb2dyZXNzSG9vaygpLm1lbW9pemVkU3RhdGU7CiAgICAgICAgfSwKICAgICAgICB1c2VTdGF0ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VTdGF0ZSI7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHZhciBwcmV2RGlzcGF0Y2hlciA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLkg7CiAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gSW52YWxpZE5lc3RlZEhvb2tzRGlzcGF0Y2hlck9uVXBkYXRlSW5ERVY7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gdXBkYXRlUmVkdWNlcihiYXNpY1N0YXRlUmVkdWNlcik7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gcHJldkRpc3BhdGNoZXI7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB1c2VEZWJ1Z1ZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZURlYnVnVmFsdWUiOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgfSwKICAgICAgICB1c2VEZWZlcnJlZFZhbHVlOiBmdW5jdGlvbih2YWx1ZSwgaW5pdGlhbFZhbHVlKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VEZWZlcnJlZFZhbHVlIjsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIHVwZGF0ZURlZmVycmVkVmFsdWUodmFsdWUsIGluaXRpYWxWYWx1ZSk7CiAgICAgICAgfSwKICAgICAgICB1c2VUcmFuc2l0aW9uOiBmdW5jdGlvbigpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZVRyYW5zaXRpb24iOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gdXBkYXRlVHJhbnNpdGlvbigpOwogICAgICAgIH0sCiAgICAgICAgdXNlU3luY0V4dGVybmFsU3RvcmU6IGZ1bmN0aW9uKHN1YnNjcmliZSwgZ2V0U25hcHNob3QsIGdldFNlcnZlclNuYXBzaG90KSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VTeW5jRXh0ZXJuYWxTdG9yZSI7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiB1cGRhdGVTeW5jRXh0ZXJuYWxTdG9yZSgKICAgICAgICAgICAgc3Vic2NyaWJlLAogICAgICAgICAgICBnZXRTbmFwc2hvdCwKICAgICAgICAgICAgZ2V0U2VydmVyU25hcHNob3QKICAgICAgICAgICk7CiAgICAgICAgfSwKICAgICAgICB1c2VJZDogZnVuY3Rpb24oKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VJZCI7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiB1cGRhdGVXb3JrSW5Qcm9ncmVzc0hvb2soKS5tZW1vaXplZFN0YXRlOwogICAgICAgIH0sCiAgICAgICAgdXNlRm9ybVN0YXRlOiBmdW5jdGlvbihhY3Rpb24pIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUZvcm1TdGF0ZSI7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHdhcm5PblVzZUZvcm1TdGF0ZUluRGV2KCk7CiAgICAgICAgICByZXR1cm4gdXBkYXRlQWN0aW9uU3RhdGUoYWN0aW9uKTsKICAgICAgICB9LAogICAgICAgIHVzZUFjdGlvblN0YXRlOiBmdW5jdGlvbihhY3Rpb24pIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUFjdGlvblN0YXRlIjsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIHVwZGF0ZUFjdGlvblN0YXRlKGFjdGlvbik7CiAgICAgICAgfSwKICAgICAgICB1c2VPcHRpbWlzdGljOiBmdW5jdGlvbihwYXNzdGhyb3VnaCwgcmVkdWNlcikgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlT3B0aW1pc3RpYyI7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiB1cGRhdGVPcHRpbWlzdGljKHBhc3N0aHJvdWdoLCByZWR1Y2VyKTsKICAgICAgICB9LAogICAgICAgIHVzZUhvc3RUcmFuc2l0aW9uU3RhdHVzLAogICAgICAgIHVzZU1lbW9DYWNoZSwKICAgICAgICB1c2VDYWNoZVJlZnJlc2g6IGZ1bmN0aW9uKCkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlQ2FjaGVSZWZyZXNoIjsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIHVwZGF0ZVdvcmtJblByb2dyZXNzSG9vaygpLm1lbW9pemVkU3RhdGU7CiAgICAgICAgfQogICAgICB9OwogICAgICBIb29rc0Rpc3BhdGNoZXJPblJlcmVuZGVySW5ERVYgPSB7CiAgICAgICAgcmVhZENvbnRleHQ6IGZ1bmN0aW9uKGNvbnRleHQpIHsKICAgICAgICAgIHJldHVybiByZWFkQ29udGV4dChjb250ZXh0KTsKICAgICAgICB9LAogICAgICAgIHVzZSwKICAgICAgICB1c2VDYWxsYmFjazogZnVuY3Rpb24oY2FsbGJhY2ssIGRlcHMpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUNhbGxiYWNrIjsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIHVwZGF0ZUNhbGxiYWNrKGNhbGxiYWNrLCBkZXBzKTsKICAgICAgICB9LAogICAgICAgIHVzZUNvbnRleHQ6IGZ1bmN0aW9uKGNvbnRleHQpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUNvbnRleHQiOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gcmVhZENvbnRleHQoY29udGV4dCk7CiAgICAgICAgfSwKICAgICAgICB1c2VFZmZlY3Q6IGZ1bmN0aW9uKGNyZWF0ZSwgY3JlYXRlRGVwcykgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlRWZmZWN0IjsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgdXBkYXRlRWZmZWN0SW1wbCgyMDQ4LCBQYXNzaXZlLCBjcmVhdGUsIGNyZWF0ZURlcHMpOwogICAgICAgIH0sCiAgICAgICAgdXNlSW1wZXJhdGl2ZUhhbmRsZTogZnVuY3Rpb24ocmVmLCBjcmVhdGUsIGRlcHMpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUltcGVyYXRpdmVIYW5kbGUiOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gdXBkYXRlSW1wZXJhdGl2ZUhhbmRsZShyZWYsIGNyZWF0ZSwgZGVwcyk7CiAgICAgICAgfSwKICAgICAgICB1c2VJbnNlcnRpb25FZmZlY3Q6IGZ1bmN0aW9uKGNyZWF0ZSwgZGVwcykgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlSW5zZXJ0aW9uRWZmZWN0IjsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIHVwZGF0ZUVmZmVjdEltcGwoNCwgSW5zZXJ0aW9uLCBjcmVhdGUsIGRlcHMpOwogICAgICAgIH0sCiAgICAgICAgdXNlTGF5b3V0RWZmZWN0OiBmdW5jdGlvbihjcmVhdGUsIGRlcHMpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUxheW91dEVmZmVjdCI7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiB1cGRhdGVFZmZlY3RJbXBsKDQsIExheW91dCwgY3JlYXRlLCBkZXBzKTsKICAgICAgICB9LAogICAgICAgIHVzZU1lbW86IGZ1bmN0aW9uKGNyZWF0ZSwgZGVwcykgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlTWVtbyI7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHZhciBwcmV2RGlzcGF0Y2hlciA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLkg7CiAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gSW52YWxpZE5lc3RlZEhvb2tzRGlzcGF0Y2hlck9uUmVyZW5kZXJJbkRFVjsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiB1cGRhdGVNZW1vKGNyZWF0ZSwgZGVwcyk7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gcHJldkRpc3BhdGNoZXI7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB1c2VSZWR1Y2VyOiBmdW5jdGlvbihyZWR1Y2VyLCBpbml0aWFsQXJnLCBpbml0KSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VSZWR1Y2VyIjsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgdmFyIHByZXZEaXNwYXRjaGVyID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuSDsKICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLkggPSBJbnZhbGlkTmVzdGVkSG9va3NEaXNwYXRjaGVyT25SZXJlbmRlckluREVWOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIHJlcmVuZGVyUmVkdWNlcihyZWR1Y2VyLCBpbml0aWFsQXJnLCBpbml0KTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLkggPSBwcmV2RGlzcGF0Y2hlcjsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHVzZVJlZjogZnVuY3Rpb24oKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VSZWYiOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gdXBkYXRlV29ya0luUHJvZ3Jlc3NIb29rKCkubWVtb2l6ZWRTdGF0ZTsKICAgICAgICB9LAogICAgICAgIHVzZVN0YXRlOiBmdW5jdGlvbigpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZVN0YXRlIjsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgdmFyIHByZXZEaXNwYXRjaGVyID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuSDsKICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLkggPSBJbnZhbGlkTmVzdGVkSG9va3NEaXNwYXRjaGVyT25SZXJlbmRlckluREVWOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIHJlcmVuZGVyUmVkdWNlcihiYXNpY1N0YXRlUmVkdWNlcik7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gcHJldkRpc3BhdGNoZXI7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB1c2VEZWJ1Z1ZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZURlYnVnVmFsdWUiOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgfSwKICAgICAgICB1c2VEZWZlcnJlZFZhbHVlOiBmdW5jdGlvbih2YWx1ZSwgaW5pdGlhbFZhbHVlKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VEZWZlcnJlZFZhbHVlIjsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIHJlcmVuZGVyRGVmZXJyZWRWYWx1ZSh2YWx1ZSwgaW5pdGlhbFZhbHVlKTsKICAgICAgICB9LAogICAgICAgIHVzZVRyYW5zaXRpb246IGZ1bmN0aW9uKCkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlVHJhbnNpdGlvbiI7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiByZXJlbmRlclRyYW5zaXRpb24oKTsKICAgICAgICB9LAogICAgICAgIHVzZVN5bmNFeHRlcm5hbFN0b3JlOiBmdW5jdGlvbihzdWJzY3JpYmUsIGdldFNuYXBzaG90LCBnZXRTZXJ2ZXJTbmFwc2hvdCkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlU3luY0V4dGVybmFsU3RvcmUiOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gdXBkYXRlU3luY0V4dGVybmFsU3RvcmUoCiAgICAgICAgICAgIHN1YnNjcmliZSwKICAgICAgICAgICAgZ2V0U25hcHNob3QsCiAgICAgICAgICAgIGdldFNlcnZlclNuYXBzaG90CiAgICAgICAgICApOwogICAgICAgIH0sCiAgICAgICAgdXNlSWQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlSWQiOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gdXBkYXRlV29ya0luUHJvZ3Jlc3NIb29rKCkubWVtb2l6ZWRTdGF0ZTsKICAgICAgICB9LAogICAgICAgIHVzZUZvcm1TdGF0ZTogZnVuY3Rpb24oYWN0aW9uKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VGb3JtU3RhdGUiOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICB3YXJuT25Vc2VGb3JtU3RhdGVJbkRldigpOwogICAgICAgICAgcmV0dXJuIHJlcmVuZGVyQWN0aW9uU3RhdGUoYWN0aW9uKTsKICAgICAgICB9LAogICAgICAgIHVzZUFjdGlvblN0YXRlOiBmdW5jdGlvbihhY3Rpb24pIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUFjdGlvblN0YXRlIjsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIHJlcmVuZGVyQWN0aW9uU3RhdGUoYWN0aW9uKTsKICAgICAgICB9LAogICAgICAgIHVzZU9wdGltaXN0aWM6IGZ1bmN0aW9uKHBhc3N0aHJvdWdoLCByZWR1Y2VyKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VPcHRpbWlzdGljIjsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIHJlcmVuZGVyT3B0aW1pc3RpYyhwYXNzdGhyb3VnaCwgcmVkdWNlcik7CiAgICAgICAgfSwKICAgICAgICB1c2VIb3N0VHJhbnNpdGlvblN0YXR1cywKICAgICAgICB1c2VNZW1vQ2FjaGUsCiAgICAgICAgdXNlQ2FjaGVSZWZyZXNoOiBmdW5jdGlvbigpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUNhY2hlUmVmcmVzaCI7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiB1cGRhdGVXb3JrSW5Qcm9ncmVzc0hvb2soKS5tZW1vaXplZFN0YXRlOwogICAgICAgIH0KICAgICAgfTsKICAgICAgSW52YWxpZE5lc3RlZEhvb2tzRGlzcGF0Y2hlck9uTW91bnRJbkRFViA9IHsKICAgICAgICByZWFkQ29udGV4dDogZnVuY3Rpb24oY29udGV4dCkgewogICAgICAgICAgd2FybkludmFsaWRDb250ZXh0QWNjZXNzKCk7CiAgICAgICAgICByZXR1cm4gcmVhZENvbnRleHQoY29udGV4dCk7CiAgICAgICAgfSwKICAgICAgICB1c2U6IGZ1bmN0aW9uKHVzYWJsZSkgewogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICByZXR1cm4gdXNlKHVzYWJsZSk7CiAgICAgICAgfSwKICAgICAgICB1c2VDYWxsYmFjazogZnVuY3Rpb24oY2FsbGJhY2ssIGRlcHMpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUNhbGxiYWNrIjsKICAgICAgICAgIHdhcm5JbnZhbGlkSG9va0FjY2VzcygpOwogICAgICAgICAgbW91bnRIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiBtb3VudENhbGxiYWNrKGNhbGxiYWNrLCBkZXBzKTsKICAgICAgICB9LAogICAgICAgIHVzZUNvbnRleHQ6IGZ1bmN0aW9uKGNvbnRleHQpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUNvbnRleHQiOwogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICBtb3VudEhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIHJlYWRDb250ZXh0KGNvbnRleHQpOwogICAgICAgIH0sCiAgICAgICAgdXNlRWZmZWN0OiBmdW5jdGlvbihjcmVhdGUsIGNyZWF0ZURlcHMpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUVmZmVjdCI7CiAgICAgICAgICB3YXJuSW52YWxpZEhvb2tBY2Nlc3MoKTsKICAgICAgICAgIG1vdW50SG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gbW91bnRFZmZlY3QoY3JlYXRlLCBjcmVhdGVEZXBzKTsKICAgICAgICB9LAogICAgICAgIHVzZUltcGVyYXRpdmVIYW5kbGU6IGZ1bmN0aW9uKHJlZiwgY3JlYXRlLCBkZXBzKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VJbXBlcmF0aXZlSGFuZGxlIjsKICAgICAgICAgIHdhcm5JbnZhbGlkSG9va0FjY2VzcygpOwogICAgICAgICAgbW91bnRIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiBtb3VudEltcGVyYXRpdmVIYW5kbGUocmVmLCBjcmVhdGUsIGRlcHMpOwogICAgICAgIH0sCiAgICAgICAgdXNlSW5zZXJ0aW9uRWZmZWN0OiBmdW5jdGlvbihjcmVhdGUsIGRlcHMpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUluc2VydGlvbkVmZmVjdCI7CiAgICAgICAgICB3YXJuSW52YWxpZEhvb2tBY2Nlc3MoKTsKICAgICAgICAgIG1vdW50SG9va1R5cGVzRGV2KCk7CiAgICAgICAgICBtb3VudEVmZmVjdEltcGwoNCwgSW5zZXJ0aW9uLCBjcmVhdGUsIGRlcHMpOwogICAgICAgIH0sCiAgICAgICAgdXNlTGF5b3V0RWZmZWN0OiBmdW5jdGlvbihjcmVhdGUsIGRlcHMpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUxheW91dEVmZmVjdCI7CiAgICAgICAgICB3YXJuSW52YWxpZEhvb2tBY2Nlc3MoKTsKICAgICAgICAgIG1vdW50SG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gbW91bnRMYXlvdXRFZmZlY3QoY3JlYXRlLCBkZXBzKTsKICAgICAgICB9LAogICAgICAgIHVzZU1lbW86IGZ1bmN0aW9uKGNyZWF0ZSwgZGVwcykgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlTWVtbyI7CiAgICAgICAgICB3YXJuSW52YWxpZEhvb2tBY2Nlc3MoKTsKICAgICAgICAgIG1vdW50SG9va1R5cGVzRGV2KCk7CiAgICAgICAgICB2YXIgcHJldkRpc3BhdGNoZXIgPSBSZWFjdFNoYXJlZEludGVybmFscy5IOwogICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuSCA9IEludmFsaWROZXN0ZWRIb29rc0Rpc3BhdGNoZXJPbk1vdW50SW5ERVY7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gbW91bnRNZW1vKGNyZWF0ZSwgZGVwcyk7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gcHJldkRpc3BhdGNoZXI7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB1c2VSZWR1Y2VyOiBmdW5jdGlvbihyZWR1Y2VyLCBpbml0aWFsQXJnLCBpbml0KSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VSZWR1Y2VyIjsKICAgICAgICAgIHdhcm5JbnZhbGlkSG9va0FjY2VzcygpOwogICAgICAgICAgbW91bnRIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHZhciBwcmV2RGlzcGF0Y2hlciA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLkg7CiAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gSW52YWxpZE5lc3RlZEhvb2tzRGlzcGF0Y2hlck9uTW91bnRJbkRFVjsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBtb3VudFJlZHVjZXIocmVkdWNlciwgaW5pdGlhbEFyZywgaW5pdCk7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gcHJldkRpc3BhdGNoZXI7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB1c2VSZWY6IGZ1bmN0aW9uKGluaXRpYWxWYWx1ZSkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlUmVmIjsKICAgICAgICAgIHdhcm5JbnZhbGlkSG9va0FjY2VzcygpOwogICAgICAgICAgbW91bnRIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiBtb3VudFJlZihpbml0aWFsVmFsdWUpOwogICAgICAgIH0sCiAgICAgICAgdXNlU3RhdGU6IGZ1bmN0aW9uKGluaXRpYWxTdGF0ZSkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlU3RhdGUiOwogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICBtb3VudEhvb2tUeXBlc0RldigpOwogICAgICAgICAgdmFyIHByZXZEaXNwYXRjaGVyID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuSDsKICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLkggPSBJbnZhbGlkTmVzdGVkSG9va3NEaXNwYXRjaGVyT25Nb3VudEluREVWOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIG1vdW50U3RhdGUoaW5pdGlhbFN0YXRlKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLkggPSBwcmV2RGlzcGF0Y2hlcjsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHVzZURlYnVnVmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlRGVidWdWYWx1ZSI7CiAgICAgICAgICB3YXJuSW52YWxpZEhvb2tBY2Nlc3MoKTsKICAgICAgICAgIG1vdW50SG9va1R5cGVzRGV2KCk7CiAgICAgICAgfSwKICAgICAgICB1c2VEZWZlcnJlZFZhbHVlOiBmdW5jdGlvbih2YWx1ZSwgaW5pdGlhbFZhbHVlKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VEZWZlcnJlZFZhbHVlIjsKICAgICAgICAgIHdhcm5JbnZhbGlkSG9va0FjY2VzcygpOwogICAgICAgICAgbW91bnRIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiBtb3VudERlZmVycmVkVmFsdWUodmFsdWUsIGluaXRpYWxWYWx1ZSk7CiAgICAgICAgfSwKICAgICAgICB1c2VUcmFuc2l0aW9uOiBmdW5jdGlvbigpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZVRyYW5zaXRpb24iOwogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICBtb3VudEhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIG1vdW50VHJhbnNpdGlvbigpOwogICAgICAgIH0sCiAgICAgICAgdXNlU3luY0V4dGVybmFsU3RvcmU6IGZ1bmN0aW9uKHN1YnNjcmliZSwgZ2V0U25hcHNob3QsIGdldFNlcnZlclNuYXBzaG90KSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VTeW5jRXh0ZXJuYWxTdG9yZSI7CiAgICAgICAgICB3YXJuSW52YWxpZEhvb2tBY2Nlc3MoKTsKICAgICAgICAgIG1vdW50SG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gbW91bnRTeW5jRXh0ZXJuYWxTdG9yZSgKICAgICAgICAgICAgc3Vic2NyaWJlLAogICAgICAgICAgICBnZXRTbmFwc2hvdCwKICAgICAgICAgICAgZ2V0U2VydmVyU25hcHNob3QKICAgICAgICAgICk7CiAgICAgICAgfSwKICAgICAgICB1c2VJZDogZnVuY3Rpb24oKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VJZCI7CiAgICAgICAgICB3YXJuSW52YWxpZEhvb2tBY2Nlc3MoKTsKICAgICAgICAgIG1vdW50SG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gbW91bnRJZCgpOwogICAgICAgIH0sCiAgICAgICAgdXNlRm9ybVN0YXRlOiBmdW5jdGlvbihhY3Rpb24sIGluaXRpYWxTdGF0ZSkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlRm9ybVN0YXRlIjsKICAgICAgICAgIHdhcm5JbnZhbGlkSG9va0FjY2VzcygpOwogICAgICAgICAgbW91bnRIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiBtb3VudEFjdGlvblN0YXRlKGFjdGlvbiwgaW5pdGlhbFN0YXRlKTsKICAgICAgICB9LAogICAgICAgIHVzZUFjdGlvblN0YXRlOiBmdW5jdGlvbihhY3Rpb24sIGluaXRpYWxTdGF0ZSkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlQWN0aW9uU3RhdGUiOwogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICBtb3VudEhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIG1vdW50QWN0aW9uU3RhdGUoYWN0aW9uLCBpbml0aWFsU3RhdGUpOwogICAgICAgIH0sCiAgICAgICAgdXNlT3B0aW1pc3RpYzogZnVuY3Rpb24ocGFzc3Rocm91Z2gpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZU9wdGltaXN0aWMiOwogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICBtb3VudEhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIG1vdW50T3B0aW1pc3RpYyhwYXNzdGhyb3VnaCk7CiAgICAgICAgfSwKICAgICAgICB1c2VNZW1vQ2FjaGU6IGZ1bmN0aW9uKHNpemUpIHsKICAgICAgICAgIHdhcm5JbnZhbGlkSG9va0FjY2VzcygpOwogICAgICAgICAgcmV0dXJuIHVzZU1lbW9DYWNoZShzaXplKTsKICAgICAgICB9LAogICAgICAgIHVzZUhvc3RUcmFuc2l0aW9uU3RhdHVzLAogICAgICAgIHVzZUNhY2hlUmVmcmVzaDogZnVuY3Rpb24oKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VDYWNoZVJlZnJlc2giOwogICAgICAgICAgbW91bnRIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiBtb3VudFJlZnJlc2goKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIEludmFsaWROZXN0ZWRIb29rc0Rpc3BhdGNoZXJPblVwZGF0ZUluREVWID0gewogICAgICAgIHJlYWRDb250ZXh0OiBmdW5jdGlvbihjb250ZXh0KSB7CiAgICAgICAgICB3YXJuSW52YWxpZENvbnRleHRBY2Nlc3MoKTsKICAgICAgICAgIHJldHVybiByZWFkQ29udGV4dChjb250ZXh0KTsKICAgICAgICB9LAogICAgICAgIHVzZTogZnVuY3Rpb24odXNhYmxlKSB7CiAgICAgICAgICB3YXJuSW52YWxpZEhvb2tBY2Nlc3MoKTsKICAgICAgICAgIHJldHVybiB1c2UodXNhYmxlKTsKICAgICAgICB9LAogICAgICAgIHVzZUNhbGxiYWNrOiBmdW5jdGlvbihjYWxsYmFjaywgZGVwcykgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlQ2FsbGJhY2siOwogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiB1cGRhdGVDYWxsYmFjayhjYWxsYmFjaywgZGVwcyk7CiAgICAgICAgfSwKICAgICAgICB1c2VDb250ZXh0OiBmdW5jdGlvbihjb250ZXh0KSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VDb250ZXh0IjsKICAgICAgICAgIHdhcm5JbnZhbGlkSG9va0FjY2VzcygpOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gcmVhZENvbnRleHQoY29udGV4dCk7CiAgICAgICAgfSwKICAgICAgICB1c2VFZmZlY3Q6IGZ1bmN0aW9uKGNyZWF0ZSwgY3JlYXRlRGVwcykgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlRWZmZWN0IjsKICAgICAgICAgIHdhcm5JbnZhbGlkSG9va0FjY2VzcygpOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICB1cGRhdGVFZmZlY3RJbXBsKDIwNDgsIFBhc3NpdmUsIGNyZWF0ZSwgY3JlYXRlRGVwcyk7CiAgICAgICAgfSwKICAgICAgICB1c2VJbXBlcmF0aXZlSGFuZGxlOiBmdW5jdGlvbihyZWYsIGNyZWF0ZSwgZGVwcykgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlSW1wZXJhdGl2ZUhhbmRsZSI7CiAgICAgICAgICB3YXJuSW52YWxpZEhvb2tBY2Nlc3MoKTsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIHVwZGF0ZUltcGVyYXRpdmVIYW5kbGUocmVmLCBjcmVhdGUsIGRlcHMpOwogICAgICAgIH0sCiAgICAgICAgdXNlSW5zZXJ0aW9uRWZmZWN0OiBmdW5jdGlvbihjcmVhdGUsIGRlcHMpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUluc2VydGlvbkVmZmVjdCI7CiAgICAgICAgICB3YXJuSW52YWxpZEhvb2tBY2Nlc3MoKTsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIHVwZGF0ZUVmZmVjdEltcGwoNCwgSW5zZXJ0aW9uLCBjcmVhdGUsIGRlcHMpOwogICAgICAgIH0sCiAgICAgICAgdXNlTGF5b3V0RWZmZWN0OiBmdW5jdGlvbihjcmVhdGUsIGRlcHMpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUxheW91dEVmZmVjdCI7CiAgICAgICAgICB3YXJuSW52YWxpZEhvb2tBY2Nlc3MoKTsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIHVwZGF0ZUVmZmVjdEltcGwoNCwgTGF5b3V0LCBjcmVhdGUsIGRlcHMpOwogICAgICAgIH0sCiAgICAgICAgdXNlTWVtbzogZnVuY3Rpb24oY3JlYXRlLCBkZXBzKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VNZW1vIjsKICAgICAgICAgIHdhcm5JbnZhbGlkSG9va0FjY2VzcygpOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICB2YXIgcHJldkRpc3BhdGNoZXIgPSBSZWFjdFNoYXJlZEludGVybmFscy5IOwogICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuSCA9IEludmFsaWROZXN0ZWRIb29rc0Rpc3BhdGNoZXJPblVwZGF0ZUluREVWOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZU1lbW8oY3JlYXRlLCBkZXBzKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLkggPSBwcmV2RGlzcGF0Y2hlcjsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHVzZVJlZHVjZXI6IGZ1bmN0aW9uKHJlZHVjZXIsIGluaXRpYWxBcmcsIGluaXQpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZVJlZHVjZXIiOwogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHZhciBwcmV2RGlzcGF0Y2hlciA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLkg7CiAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gSW52YWxpZE5lc3RlZEhvb2tzRGlzcGF0Y2hlck9uVXBkYXRlSW5ERVY7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gdXBkYXRlUmVkdWNlcihyZWR1Y2VyLCBpbml0aWFsQXJnLCBpbml0KTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLkggPSBwcmV2RGlzcGF0Y2hlcjsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHVzZVJlZjogZnVuY3Rpb24oKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VSZWYiOwogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiB1cGRhdGVXb3JrSW5Qcm9ncmVzc0hvb2soKS5tZW1vaXplZFN0YXRlOwogICAgICAgIH0sCiAgICAgICAgdXNlU3RhdGU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlU3RhdGUiOwogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHZhciBwcmV2RGlzcGF0Y2hlciA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLkg7CiAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gSW52YWxpZE5lc3RlZEhvb2tzRGlzcGF0Y2hlck9uVXBkYXRlSW5ERVY7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gdXBkYXRlUmVkdWNlcihiYXNpY1N0YXRlUmVkdWNlcik7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gcHJldkRpc3BhdGNoZXI7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB1c2VEZWJ1Z1ZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZURlYnVnVmFsdWUiOwogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICB9LAogICAgICAgIHVzZURlZmVycmVkVmFsdWU6IGZ1bmN0aW9uKHZhbHVlLCBpbml0aWFsVmFsdWUpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZURlZmVycmVkVmFsdWUiOwogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiB1cGRhdGVEZWZlcnJlZFZhbHVlKHZhbHVlLCBpbml0aWFsVmFsdWUpOwogICAgICAgIH0sCiAgICAgICAgdXNlVHJhbnNpdGlvbjogZnVuY3Rpb24oKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VUcmFuc2l0aW9uIjsKICAgICAgICAgIHdhcm5JbnZhbGlkSG9va0FjY2VzcygpOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gdXBkYXRlVHJhbnNpdGlvbigpOwogICAgICAgIH0sCiAgICAgICAgdXNlU3luY0V4dGVybmFsU3RvcmU6IGZ1bmN0aW9uKHN1YnNjcmliZSwgZ2V0U25hcHNob3QsIGdldFNlcnZlclNuYXBzaG90KSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VTeW5jRXh0ZXJuYWxTdG9yZSI7CiAgICAgICAgICB3YXJuSW52YWxpZEhvb2tBY2Nlc3MoKTsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIHVwZGF0ZVN5bmNFeHRlcm5hbFN0b3JlKAogICAgICAgICAgICBzdWJzY3JpYmUsCiAgICAgICAgICAgIGdldFNuYXBzaG90LAogICAgICAgICAgICBnZXRTZXJ2ZXJTbmFwc2hvdAogICAgICAgICAgKTsKICAgICAgICB9LAogICAgICAgIHVzZUlkOiBmdW5jdGlvbigpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUlkIjsKICAgICAgICAgIHdhcm5JbnZhbGlkSG9va0FjY2VzcygpOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gdXBkYXRlV29ya0luUHJvZ3Jlc3NIb29rKCkubWVtb2l6ZWRTdGF0ZTsKICAgICAgICB9LAogICAgICAgIHVzZUZvcm1TdGF0ZTogZnVuY3Rpb24oYWN0aW9uKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VGb3JtU3RhdGUiOwogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiB1cGRhdGVBY3Rpb25TdGF0ZShhY3Rpb24pOwogICAgICAgIH0sCiAgICAgICAgdXNlQWN0aW9uU3RhdGU6IGZ1bmN0aW9uKGFjdGlvbikgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlQWN0aW9uU3RhdGUiOwogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiB1cGRhdGVBY3Rpb25TdGF0ZShhY3Rpb24pOwogICAgICAgIH0sCiAgICAgICAgdXNlT3B0aW1pc3RpYzogZnVuY3Rpb24ocGFzc3Rocm91Z2gsIHJlZHVjZXIpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZU9wdGltaXN0aWMiOwogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiB1cGRhdGVPcHRpbWlzdGljKHBhc3N0aHJvdWdoLCByZWR1Y2VyKTsKICAgICAgICB9LAogICAgICAgIHVzZU1lbW9DYWNoZTogZnVuY3Rpb24oc2l6ZSkgewogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICByZXR1cm4gdXNlTWVtb0NhY2hlKHNpemUpOwogICAgICAgIH0sCiAgICAgICAgdXNlSG9zdFRyYW5zaXRpb25TdGF0dXMsCiAgICAgICAgdXNlQ2FjaGVSZWZyZXNoOiBmdW5jdGlvbigpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUNhY2hlUmVmcmVzaCI7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiB1cGRhdGVXb3JrSW5Qcm9ncmVzc0hvb2soKS5tZW1vaXplZFN0YXRlOwogICAgICAgIH0KICAgICAgfTsKICAgICAgSW52YWxpZE5lc3RlZEhvb2tzRGlzcGF0Y2hlck9uUmVyZW5kZXJJbkRFViA9IHsKICAgICAgICByZWFkQ29udGV4dDogZnVuY3Rpb24oY29udGV4dCkgewogICAgICAgICAgd2FybkludmFsaWRDb250ZXh0QWNjZXNzKCk7CiAgICAgICAgICByZXR1cm4gcmVhZENvbnRleHQoY29udGV4dCk7CiAgICAgICAgfSwKICAgICAgICB1c2U6IGZ1bmN0aW9uKHVzYWJsZSkgewogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICByZXR1cm4gdXNlKHVzYWJsZSk7CiAgICAgICAgfSwKICAgICAgICB1c2VDYWxsYmFjazogZnVuY3Rpb24oY2FsbGJhY2ssIGRlcHMpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUNhbGxiYWNrIjsKICAgICAgICAgIHdhcm5JbnZhbGlkSG9va0FjY2VzcygpOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gdXBkYXRlQ2FsbGJhY2soY2FsbGJhY2ssIGRlcHMpOwogICAgICAgIH0sCiAgICAgICAgdXNlQ29udGV4dDogZnVuY3Rpb24oY29udGV4dCkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlQ29udGV4dCI7CiAgICAgICAgICB3YXJuSW52YWxpZEhvb2tBY2Nlc3MoKTsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIHJlYWRDb250ZXh0KGNvbnRleHQpOwogICAgICAgIH0sCiAgICAgICAgdXNlRWZmZWN0OiBmdW5jdGlvbihjcmVhdGUsIGNyZWF0ZURlcHMpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUVmZmVjdCI7CiAgICAgICAgICB3YXJuSW52YWxpZEhvb2tBY2Nlc3MoKTsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgdXBkYXRlRWZmZWN0SW1wbCgyMDQ4LCBQYXNzaXZlLCBjcmVhdGUsIGNyZWF0ZURlcHMpOwogICAgICAgIH0sCiAgICAgICAgdXNlSW1wZXJhdGl2ZUhhbmRsZTogZnVuY3Rpb24ocmVmLCBjcmVhdGUsIGRlcHMpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUltcGVyYXRpdmVIYW5kbGUiOwogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiB1cGRhdGVJbXBlcmF0aXZlSGFuZGxlKHJlZiwgY3JlYXRlLCBkZXBzKTsKICAgICAgICB9LAogICAgICAgIHVzZUluc2VydGlvbkVmZmVjdDogZnVuY3Rpb24oY3JlYXRlLCBkZXBzKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VJbnNlcnRpb25FZmZlY3QiOwogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiB1cGRhdGVFZmZlY3RJbXBsKDQsIEluc2VydGlvbiwgY3JlYXRlLCBkZXBzKTsKICAgICAgICB9LAogICAgICAgIHVzZUxheW91dEVmZmVjdDogZnVuY3Rpb24oY3JlYXRlLCBkZXBzKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VMYXlvdXRFZmZlY3QiOwogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiB1cGRhdGVFZmZlY3RJbXBsKDQsIExheW91dCwgY3JlYXRlLCBkZXBzKTsKICAgICAgICB9LAogICAgICAgIHVzZU1lbW86IGZ1bmN0aW9uKGNyZWF0ZSwgZGVwcykgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlTWVtbyI7CiAgICAgICAgICB3YXJuSW52YWxpZEhvb2tBY2Nlc3MoKTsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgdmFyIHByZXZEaXNwYXRjaGVyID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuSDsKICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLkggPSBJbnZhbGlkTmVzdGVkSG9va3NEaXNwYXRjaGVyT25VcGRhdGVJbkRFVjsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiB1cGRhdGVNZW1vKGNyZWF0ZSwgZGVwcyk7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gcHJldkRpc3BhdGNoZXI7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB1c2VSZWR1Y2VyOiBmdW5jdGlvbihyZWR1Y2VyLCBpbml0aWFsQXJnLCBpbml0KSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VSZWR1Y2VyIjsKICAgICAgICAgIHdhcm5JbnZhbGlkSG9va0FjY2VzcygpOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICB2YXIgcHJldkRpc3BhdGNoZXIgPSBSZWFjdFNoYXJlZEludGVybmFscy5IOwogICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuSCA9IEludmFsaWROZXN0ZWRIb29rc0Rpc3BhdGNoZXJPblVwZGF0ZUluREVWOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIHJlcmVuZGVyUmVkdWNlcihyZWR1Y2VyLCBpbml0aWFsQXJnLCBpbml0KTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLkggPSBwcmV2RGlzcGF0Y2hlcjsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHVzZVJlZjogZnVuY3Rpb24oKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VSZWYiOwogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiB1cGRhdGVXb3JrSW5Qcm9ncmVzc0hvb2soKS5tZW1vaXplZFN0YXRlOwogICAgICAgIH0sCiAgICAgICAgdXNlU3RhdGU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlU3RhdGUiOwogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHZhciBwcmV2RGlzcGF0Y2hlciA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLkg7CiAgICAgICAgICBSZWFjdFNoYXJlZEludGVybmFscy5IID0gSW52YWxpZE5lc3RlZEhvb2tzRGlzcGF0Y2hlck9uVXBkYXRlSW5ERVY7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gcmVyZW5kZXJSZWR1Y2VyKGJhc2ljU3RhdGVSZWR1Y2VyKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLkggPSBwcmV2RGlzcGF0Y2hlcjsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHVzZURlYnVnVmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlRGVidWdWYWx1ZSI7CiAgICAgICAgICB3YXJuSW52YWxpZEhvb2tBY2Nlc3MoKTsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgIH0sCiAgICAgICAgdXNlRGVmZXJyZWRWYWx1ZTogZnVuY3Rpb24odmFsdWUsIGluaXRpYWxWYWx1ZSkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlRGVmZXJyZWRWYWx1ZSI7CiAgICAgICAgICB3YXJuSW52YWxpZEhvb2tBY2Nlc3MoKTsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIHJlcmVuZGVyRGVmZXJyZWRWYWx1ZSh2YWx1ZSwgaW5pdGlhbFZhbHVlKTsKICAgICAgICB9LAogICAgICAgIHVzZVRyYW5zaXRpb246IGZ1bmN0aW9uKCkgewogICAgICAgICAgY3VycmVudEhvb2tOYW1lSW5EZXYgPSAidXNlVHJhbnNpdGlvbiI7CiAgICAgICAgICB3YXJuSW52YWxpZEhvb2tBY2Nlc3MoKTsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIHJlcmVuZGVyVHJhbnNpdGlvbigpOwogICAgICAgIH0sCiAgICAgICAgdXNlU3luY0V4dGVybmFsU3RvcmU6IGZ1bmN0aW9uKHN1YnNjcmliZSwgZ2V0U25hcHNob3QsIGdldFNlcnZlclNuYXBzaG90KSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VTeW5jRXh0ZXJuYWxTdG9yZSI7CiAgICAgICAgICB3YXJuSW52YWxpZEhvb2tBY2Nlc3MoKTsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIHVwZGF0ZVN5bmNFeHRlcm5hbFN0b3JlKAogICAgICAgICAgICBzdWJzY3JpYmUsCiAgICAgICAgICAgIGdldFNuYXBzaG90LAogICAgICAgICAgICBnZXRTZXJ2ZXJTbmFwc2hvdAogICAgICAgICAgKTsKICAgICAgICB9LAogICAgICAgIHVzZUlkOiBmdW5jdGlvbigpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUlkIjsKICAgICAgICAgIHdhcm5JbnZhbGlkSG9va0FjY2VzcygpOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gdXBkYXRlV29ya0luUHJvZ3Jlc3NIb29rKCkubWVtb2l6ZWRTdGF0ZTsKICAgICAgICB9LAogICAgICAgIHVzZUZvcm1TdGF0ZTogZnVuY3Rpb24oYWN0aW9uKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VGb3JtU3RhdGUiOwogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiByZXJlbmRlckFjdGlvblN0YXRlKGFjdGlvbik7CiAgICAgICAgfSwKICAgICAgICB1c2VBY3Rpb25TdGF0ZTogZnVuY3Rpb24oYWN0aW9uKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VBY3Rpb25TdGF0ZSI7CiAgICAgICAgICB3YXJuSW52YWxpZEhvb2tBY2Nlc3MoKTsKICAgICAgICAgIHVwZGF0ZUhvb2tUeXBlc0RldigpOwogICAgICAgICAgcmV0dXJuIHJlcmVuZGVyQWN0aW9uU3RhdGUoYWN0aW9uKTsKICAgICAgICB9LAogICAgICAgIHVzZU9wdGltaXN0aWM6IGZ1bmN0aW9uKHBhc3N0aHJvdWdoLCByZWR1Y2VyKSB7CiAgICAgICAgICBjdXJyZW50SG9va05hbWVJbkRldiA9ICJ1c2VPcHRpbWlzdGljIjsKICAgICAgICAgIHdhcm5JbnZhbGlkSG9va0FjY2VzcygpOwogICAgICAgICAgdXBkYXRlSG9va1R5cGVzRGV2KCk7CiAgICAgICAgICByZXR1cm4gcmVyZW5kZXJPcHRpbWlzdGljKHBhc3N0aHJvdWdoLCByZWR1Y2VyKTsKICAgICAgICB9LAogICAgICAgIHVzZU1lbW9DYWNoZTogZnVuY3Rpb24oc2l6ZSkgewogICAgICAgICAgd2FybkludmFsaWRIb29rQWNjZXNzKCk7CiAgICAgICAgICByZXR1cm4gdXNlTWVtb0NhY2hlKHNpemUpOwogICAgICAgIH0sCiAgICAgICAgdXNlSG9zdFRyYW5zaXRpb25TdGF0dXMsCiAgICAgICAgdXNlQ2FjaGVSZWZyZXNoOiBmdW5jdGlvbigpIHsKICAgICAgICAgIGN1cnJlbnRIb29rTmFtZUluRGV2ID0gInVzZUNhY2hlUmVmcmVzaCI7CiAgICAgICAgICB1cGRhdGVIb29rVHlwZXNEZXYoKTsKICAgICAgICAgIHJldHVybiB1cGRhdGVXb3JrSW5Qcm9ncmVzc0hvb2soKS5tZW1vaXplZFN0YXRlOwogICAgICAgIH0KICAgICAgfTsKICAgICAgdmFyIGNhbGxDb21wb25lbnQgPSB7CiAgICAgICAgcmVhY3Rfc3RhY2tfYm90dG9tX2ZyYW1lOiBmdW5jdGlvbihDb21wb25lbnQsIHByb3BzLCBzZWNvbmRBcmcpIHsKICAgICAgICAgIHZhciB3YXNSZW5kZXJpbmcgPSBpc1JlbmRlcmluZzsKICAgICAgICAgIGlzUmVuZGVyaW5nID0gdHJ1ZTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBDb21wb25lbnQocHJvcHMsIHNlY29uZEFyZyk7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBpc1JlbmRlcmluZyA9IHdhc1JlbmRlcmluZzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIGNhbGxDb21wb25lbnRJbkRFViA9IGNhbGxDb21wb25lbnQucmVhY3Rfc3RhY2tfYm90dG9tX2ZyYW1lLmJpbmQoY2FsbENvbXBvbmVudCksIGNhbGxSZW5kZXIgPSB7CiAgICAgICAgcmVhY3Rfc3RhY2tfYm90dG9tX2ZyYW1lOiBmdW5jdGlvbihpbnN0YW5jZSkgewogICAgICAgICAgdmFyIHdhc1JlbmRlcmluZyA9IGlzUmVuZGVyaW5nOwogICAgICAgICAgaXNSZW5kZXJpbmcgPSB0cnVlOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlLnJlbmRlcigpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgaXNSZW5kZXJpbmcgPSB3YXNSZW5kZXJpbmc7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBjYWxsUmVuZGVySW5ERVYgPSBjYWxsUmVuZGVyLnJlYWN0X3N0YWNrX2JvdHRvbV9mcmFtZS5iaW5kKGNhbGxSZW5kZXIpLCBjYWxsQ29tcG9uZW50RGlkTW91bnQgPSB7CiAgICAgICAgcmVhY3Rfc3RhY2tfYm90dG9tX2ZyYW1lOiBmdW5jdGlvbihmaW5pc2hlZFdvcmssIGluc3RhbmNlKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBpbnN0YW5jZS5jb21wb25lbnREaWRNb3VudCgpOwogICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgY2FwdHVyZUNvbW1pdFBoYXNlRXJyb3IoZmluaXNoZWRXb3JrLCBmaW5pc2hlZFdvcmsucmV0dXJuLCBlcnJvcik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBjYWxsQ29tcG9uZW50RGlkTW91bnRJbkRFViA9IGNhbGxDb21wb25lbnREaWRNb3VudC5yZWFjdF9zdGFja19ib3R0b21fZnJhbWUuYmluZCgKICAgICAgICBjYWxsQ29tcG9uZW50RGlkTW91bnQKICAgICAgKSwgY2FsbENvbXBvbmVudERpZFVwZGF0ZSA9IHsKICAgICAgICByZWFjdF9zdGFja19ib3R0b21fZnJhbWU6IGZ1bmN0aW9uKGZpbmlzaGVkV29yaywgaW5zdGFuY2UsIHByZXZQcm9wcywgcHJldlN0YXRlLCBzbmFwc2hvdCkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaW5zdGFuY2UuY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcywgcHJldlN0YXRlLCBzbmFwc2hvdCk7CiAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICBjYXB0dXJlQ29tbWl0UGhhc2VFcnJvcihmaW5pc2hlZFdvcmssIGZpbmlzaGVkV29yay5yZXR1cm4sIGVycm9yKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIGNhbGxDb21wb25lbnREaWRVcGRhdGVJbkRFViA9IGNhbGxDb21wb25lbnREaWRVcGRhdGUucmVhY3Rfc3RhY2tfYm90dG9tX2ZyYW1lLmJpbmQoCiAgICAgICAgY2FsbENvbXBvbmVudERpZFVwZGF0ZQogICAgICApLCBjYWxsQ29tcG9uZW50RGlkQ2F0Y2ggPSB7CiAgICAgICAgcmVhY3Rfc3RhY2tfYm90dG9tX2ZyYW1lOiBmdW5jdGlvbihpbnN0YW5jZSwgZXJyb3JJbmZvKSB7CiAgICAgICAgICB2YXIgc3RhY2sgPSBlcnJvckluZm8uc3RhY2s7CiAgICAgICAgICBpbnN0YW5jZS5jb21wb25lbnREaWRDYXRjaChlcnJvckluZm8udmFsdWUsIHsKICAgICAgICAgICAgY29tcG9uZW50U3RhY2s6IG51bGwgIT09IHN0YWNrID8gc3RhY2sgOiAiIgogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LCBjYWxsQ29tcG9uZW50RGlkQ2F0Y2hJbkRFViA9IGNhbGxDb21wb25lbnREaWRDYXRjaC5yZWFjdF9zdGFja19ib3R0b21fZnJhbWUuYmluZCgKICAgICAgICBjYWxsQ29tcG9uZW50RGlkQ2F0Y2gKICAgICAgKSwgY2FsbENvbXBvbmVudFdpbGxVbm1vdW50ID0gewogICAgICAgIHJlYWN0X3N0YWNrX2JvdHRvbV9mcmFtZTogZnVuY3Rpb24oY3VycmVudDIsIG5lYXJlc3RNb3VudGVkQW5jZXN0b3IsIGluc3RhbmNlKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBpbnN0YW5jZS5jb21wb25lbnRXaWxsVW5tb3VudCgpOwogICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgY2FwdHVyZUNvbW1pdFBoYXNlRXJyb3IoY3VycmVudDIsIG5lYXJlc3RNb3VudGVkQW5jZXN0b3IsIGVycm9yKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIGNhbGxDb21wb25lbnRXaWxsVW5tb3VudEluREVWID0gY2FsbENvbXBvbmVudFdpbGxVbm1vdW50LnJlYWN0X3N0YWNrX2JvdHRvbV9mcmFtZS5iaW5kKAogICAgICAgIGNhbGxDb21wb25lbnRXaWxsVW5tb3VudAogICAgICApLCBjYWxsQ3JlYXRlID0gewogICAgICAgIHJlYWN0X3N0YWNrX2JvdHRvbV9mcmFtZTogZnVuY3Rpb24oZWZmZWN0KSB7CiAgICAgICAgICBudWxsICE9IGVmZmVjdC5yZXNvdXJjZUtpbmQgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIkV4cGVjdGVkIG9ubHkgU2ltcGxlRWZmZWN0cyB3aGVuIGVuYWJsZVVzZUVmZmVjdENSVURPdmVybG9hZCBpcyBkaXNhYmxlZCwgZ290ICVzIiwKICAgICAgICAgICAgZWZmZWN0LnJlc291cmNlS2luZAogICAgICAgICAgKTsKICAgICAgICAgIHZhciBjcmVhdGUgPSBlZmZlY3QuY3JlYXRlOwogICAgICAgICAgZWZmZWN0ID0gZWZmZWN0Lmluc3Q7CiAgICAgICAgICBjcmVhdGUgPSBjcmVhdGUoKTsKICAgICAgICAgIHJldHVybiBlZmZlY3QuZGVzdHJveSA9IGNyZWF0ZTsKICAgICAgICB9CiAgICAgIH0sIGNhbGxDcmVhdGVJbkRFViA9IGNhbGxDcmVhdGUucmVhY3Rfc3RhY2tfYm90dG9tX2ZyYW1lLmJpbmQoY2FsbENyZWF0ZSksIGNhbGxEZXN0cm95ID0gewogICAgICAgIHJlYWN0X3N0YWNrX2JvdHRvbV9mcmFtZTogZnVuY3Rpb24oY3VycmVudDIsIG5lYXJlc3RNb3VudGVkQW5jZXN0b3IsIGRlc3Ryb3kpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGRlc3Ryb3koKTsKICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIGNhcHR1cmVDb21taXRQaGFzZUVycm9yKGN1cnJlbnQyLCBuZWFyZXN0TW91bnRlZEFuY2VzdG9yLCBlcnJvcik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBjYWxsRGVzdHJveUluREVWID0gY2FsbERlc3Ryb3kucmVhY3Rfc3RhY2tfYm90dG9tX2ZyYW1lLmJpbmQoY2FsbERlc3Ryb3kpLCBjYWxsTGF6eUluaXQgPSB7CiAgICAgICAgcmVhY3Rfc3RhY2tfYm90dG9tX2ZyYW1lOiBmdW5jdGlvbihsYXp5KSB7CiAgICAgICAgICB2YXIgaW5pdCA9IGxhenkuX2luaXQ7CiAgICAgICAgICByZXR1cm4gaW5pdChsYXp5Ll9wYXlsb2FkKTsKICAgICAgICB9CiAgICAgIH0sIGNhbGxMYXp5SW5pdEluREVWID0gY2FsbExhenlJbml0LnJlYWN0X3N0YWNrX2JvdHRvbV9mcmFtZS5iaW5kKGNhbGxMYXp5SW5pdCksIHRoZW5hYmxlU3RhdGUgPSBudWxsLCB0aGVuYWJsZUluZGV4Q291bnRlciA9IDAsIGN1cnJlbnREZWJ1Z0luZm8gPSBudWxsLCBkaWRXYXJuQWJvdXRNYXBzOwogICAgICB2YXIgZGlkV2FybkFib3V0R2VuZXJhdG9ycyA9IGRpZFdhcm5BYm91dE1hcHMgPSBmYWxzZTsKICAgICAgdmFyIG93bmVySGFzS2V5VXNlV2FybmluZyA9IHt9OwogICAgICB2YXIgb3duZXJIYXNGdW5jdGlvblR5cGVXYXJuaW5nID0ge307CiAgICAgIHZhciBvd25lckhhc1N5bWJvbFR5cGVXYXJuaW5nID0ge307CiAgICAgIHdhcm5Gb3JNaXNzaW5nS2V5ID0gZnVuY3Rpb24ocmV0dXJuRmliZXIsIHdvcmtJblByb2dyZXNzMiwgY2hpbGQpIHsKICAgICAgICBpZiAobnVsbCAhPT0gY2hpbGQgJiYgIm9iamVjdCIgPT09IHR5cGVvZiBjaGlsZCAmJiBjaGlsZC5fc3RvcmUgJiYgKCFjaGlsZC5fc3RvcmUudmFsaWRhdGVkICYmIG51bGwgPT0gY2hpbGQua2V5IHx8IDIgPT09IGNoaWxkLl9zdG9yZS52YWxpZGF0ZWQpKSB7CiAgICAgICAgICBpZiAoIm9iamVjdCIgIT09IHR5cGVvZiBjaGlsZC5fc3RvcmUpCiAgICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAgICJSZWFjdCBDb21wb25lbnQgaW4gd2FybkZvck1pc3NpbmdLZXkgc2hvdWxkIGhhdmUgYSBfc3RvcmUuIFRoaXMgZXJyb3IgaXMgbGlrZWx5IGNhdXNlZCBieSBhIGJ1ZyBpbiBSZWFjdC4gUGxlYXNlIGZpbGUgYW4gaXNzdWUuIgogICAgICAgICAgICApOwogICAgICAgICAgY2hpbGQuX3N0b3JlLnZhbGlkYXRlZCA9IDE7CiAgICAgICAgICB2YXIgY29tcG9uZW50TmFtZTIgPSBnZXRDb21wb25lbnROYW1lRnJvbUZpYmVyKHJldHVybkZpYmVyKSwgY29tcG9uZW50S2V5ID0gY29tcG9uZW50TmFtZTIgfHwgIm51bGwiOwogICAgICAgICAgaWYgKCFvd25lckhhc0tleVVzZVdhcm5pbmdbY29tcG9uZW50S2V5XSkgewogICAgICAgICAgICBvd25lckhhc0tleVVzZVdhcm5pbmdbY29tcG9uZW50S2V5XSA9IHRydWU7CiAgICAgICAgICAgIGNoaWxkID0gY2hpbGQuX293bmVyOwogICAgICAgICAgICByZXR1cm5GaWJlciA9IHJldHVybkZpYmVyLl9kZWJ1Z093bmVyOwogICAgICAgICAgICB2YXIgY3VycmVudENvbXBvbmVudEVycm9ySW5mbyA9ICIiOwogICAgICAgICAgICByZXR1cm5GaWJlciAmJiAibnVtYmVyIiA9PT0gdHlwZW9mIHJldHVybkZpYmVyLnRhZyAmJiAoY29tcG9uZW50S2V5ID0gZ2V0Q29tcG9uZW50TmFtZUZyb21GaWJlcihyZXR1cm5GaWJlcikpICYmIChjdXJyZW50Q29tcG9uZW50RXJyb3JJbmZvID0gIlxuXG5DaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgIiArIGNvbXBvbmVudEtleSArICJgLiIpOwogICAgICAgICAgICBjdXJyZW50Q29tcG9uZW50RXJyb3JJbmZvIHx8IGNvbXBvbmVudE5hbWUyICYmIChjdXJyZW50Q29tcG9uZW50RXJyb3JJbmZvID0gIlxuXG5DaGVjayB0aGUgdG9wLWxldmVsIHJlbmRlciBjYWxsIHVzaW5nIDwiICsgY29tcG9uZW50TmFtZTIgKyAiPi4iKTsKICAgICAgICAgICAgdmFyIGNoaWxkT3duZXJBcHBlbmRpeCA9ICIiOwogICAgICAgICAgICBudWxsICE9IGNoaWxkICYmIHJldHVybkZpYmVyICE9PSBjaGlsZCAmJiAoY29tcG9uZW50TmFtZTIgPSBudWxsLCAibnVtYmVyIiA9PT0gdHlwZW9mIGNoaWxkLnRhZyA/IGNvbXBvbmVudE5hbWUyID0gZ2V0Q29tcG9uZW50TmFtZUZyb21GaWJlcihjaGlsZCkgOiAic3RyaW5nIiA9PT0gdHlwZW9mIGNoaWxkLm5hbWUgJiYgKGNvbXBvbmVudE5hbWUyID0gY2hpbGQubmFtZSksIGNvbXBvbmVudE5hbWUyICYmIChjaGlsZE93bmVyQXBwZW5kaXggPSAiIEl0IHdhcyBwYXNzZWQgYSBjaGlsZCBmcm9tICIgKyBjb21wb25lbnROYW1lMiArICIuIikpOwogICAgICAgICAgICBydW5XaXRoRmliZXJJbkRFVih3b3JrSW5Qcm9ncmVzczIsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgICAnRWFjaCBjaGlsZCBpbiBhIGxpc3Qgc2hvdWxkIGhhdmUgYSB1bmlxdWUgImtleSIgcHJvcC4lcyVzIFNlZSBodHRwczovL3JlYWN0LmRldi9saW5rL3dhcm5pbmcta2V5cyBmb3IgbW9yZSBpbmZvcm1hdGlvbi4nLAogICAgICAgICAgICAgICAgY3VycmVudENvbXBvbmVudEVycm9ySW5mbywKICAgICAgICAgICAgICAgIGNoaWxkT3duZXJBcHBlbmRpeAogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKICAgICAgdmFyIHJlY29uY2lsZUNoaWxkRmliZXJzID0gY3JlYXRlQ2hpbGRSZWNvbmNpbGVyKHRydWUpLCBtb3VudENoaWxkRmliZXJzID0gY3JlYXRlQ2hpbGRSZWNvbmNpbGVyKGZhbHNlKSwgc3VzcGVuc2VIYW5kbGVyU3RhY2tDdXJzb3IgPSBjcmVhdGVDdXJzb3IobnVsbCksIHNoZWxsQm91bmRhcnkgPSBudWxsLCBTdWJ0cmVlU3VzcGVuc2VDb250ZXh0TWFzayA9IDEsIEZvcmNlU3VzcGVuc2VGYWxsYmFjayA9IDIsIHN1c3BlbnNlU3RhY2tDdXJzb3IgPSBjcmVhdGVDdXJzb3IoMCksIGZha2VJbnRlcm5hbEluc3RhbmNlID0ge307CiAgICAgIHZhciBkaWRXYXJuQWJvdXRTdGF0ZUFzc2lnbm1lbnRGb3JDb21wb25lbnQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogICAgICB2YXIgZGlkV2FybkFib3V0VW5pbml0aWFsaXplZFN0YXRlID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKICAgICAgdmFyIGRpZFdhcm5BYm91dEdldFNuYXBzaG90QmVmb3JlVXBkYXRlV2l0aG91dERpZFVwZGF0ZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7CiAgICAgIHZhciBkaWRXYXJuQWJvdXRMZWdhY3lMaWZlY3ljbGVzQW5kRGVyaXZlZFN0YXRlID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKICAgICAgdmFyIGRpZFdhcm5BYm91dERpcmVjdGx5QXNzaWduaW5nUHJvcHNUb1N0YXRlID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKICAgICAgdmFyIGRpZFdhcm5BYm91dFVuZGVmaW5lZERlcml2ZWRTdGF0ZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7CiAgICAgIHZhciBkaWRXYXJuQWJvdXRDb250ZXh0VHlwZXMkMSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7CiAgICAgIHZhciBkaWRXYXJuQWJvdXRDaGlsZENvbnRleHRUeXBlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7CiAgICAgIHZhciBkaWRXYXJuQWJvdXRJbnZhbGlkYXRlQ29udGV4dFR5cGUgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogICAgICB2YXIgZGlkV2Fybk9uSW52YWxpZENhbGxiYWNrID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKICAgICAgT2JqZWN0LmZyZWV6ZShmYWtlSW50ZXJuYWxJbnN0YW5jZSk7CiAgICAgIHZhciBjbGFzc0NvbXBvbmVudFVwZGF0ZXIgPSB7CiAgICAgICAgZW5xdWV1ZVNldFN0YXRlOiBmdW5jdGlvbihpbnN0LCBwYXlsb2FkLCBjYWxsYmFjaykgewogICAgICAgICAgaW5zdCA9IGluc3QuX3JlYWN0SW50ZXJuYWxzOwogICAgICAgICAgdmFyIGxhbmUgPSByZXF1ZXN0VXBkYXRlTGFuZShpbnN0KSwgdXBkYXRlID0gY3JlYXRlVXBkYXRlKGxhbmUpOwogICAgICAgICAgdXBkYXRlLnBheWxvYWQgPSBwYXlsb2FkOwogICAgICAgICAgdm9pZCAwICE9PSBjYWxsYmFjayAmJiBudWxsICE9PSBjYWxsYmFjayAmJiAod2Fybk9uSW52YWxpZENhbGxiYWNrKGNhbGxiYWNrKSwgdXBkYXRlLmNhbGxiYWNrID0gY2FsbGJhY2spOwogICAgICAgICAgcGF5bG9hZCA9IGVucXVldWVVcGRhdGUoaW5zdCwgdXBkYXRlLCBsYW5lKTsKICAgICAgICAgIG51bGwgIT09IHBheWxvYWQgJiYgKHNjaGVkdWxlVXBkYXRlT25GaWJlcihwYXlsb2FkLCBpbnN0LCBsYW5lKSwgZW50YW5nbGVUcmFuc2l0aW9ucyhwYXlsb2FkLCBpbnN0LCBsYW5lKSk7CiAgICAgICAgICBtYXJrU3RhdGVVcGRhdGVTY2hlZHVsZWQoaW5zdCwgbGFuZSk7CiAgICAgICAgfSwKICAgICAgICBlbnF1ZXVlUmVwbGFjZVN0YXRlOiBmdW5jdGlvbihpbnN0LCBwYXlsb2FkLCBjYWxsYmFjaykgewogICAgICAgICAgaW5zdCA9IGluc3QuX3JlYWN0SW50ZXJuYWxzOwogICAgICAgICAgdmFyIGxhbmUgPSByZXF1ZXN0VXBkYXRlTGFuZShpbnN0KSwgdXBkYXRlID0gY3JlYXRlVXBkYXRlKGxhbmUpOwogICAgICAgICAgdXBkYXRlLnRhZyA9IFJlcGxhY2VTdGF0ZTsKICAgICAgICAgIHVwZGF0ZS5wYXlsb2FkID0gcGF5bG9hZDsKICAgICAgICAgIHZvaWQgMCAhPT0gY2FsbGJhY2sgJiYgbnVsbCAhPT0gY2FsbGJhY2sgJiYgKHdhcm5PbkludmFsaWRDYWxsYmFjayhjYWxsYmFjayksIHVwZGF0ZS5jYWxsYmFjayA9IGNhbGxiYWNrKTsKICAgICAgICAgIHBheWxvYWQgPSBlbnF1ZXVlVXBkYXRlKGluc3QsIHVwZGF0ZSwgbGFuZSk7CiAgICAgICAgICBudWxsICE9PSBwYXlsb2FkICYmIChzY2hlZHVsZVVwZGF0ZU9uRmliZXIocGF5bG9hZCwgaW5zdCwgbGFuZSksIGVudGFuZ2xlVHJhbnNpdGlvbnMocGF5bG9hZCwgaW5zdCwgbGFuZSkpOwogICAgICAgICAgbWFya1N0YXRlVXBkYXRlU2NoZWR1bGVkKGluc3QsIGxhbmUpOwogICAgICAgIH0sCiAgICAgICAgZW5xdWV1ZUZvcmNlVXBkYXRlOiBmdW5jdGlvbihpbnN0LCBjYWxsYmFjaykgewogICAgICAgICAgaW5zdCA9IGluc3QuX3JlYWN0SW50ZXJuYWxzOwogICAgICAgICAgdmFyIGxhbmUgPSByZXF1ZXN0VXBkYXRlTGFuZShpbnN0KSwgdXBkYXRlID0gY3JlYXRlVXBkYXRlKGxhbmUpOwogICAgICAgICAgdXBkYXRlLnRhZyA9IEZvcmNlVXBkYXRlOwogICAgICAgICAgdm9pZCAwICE9PSBjYWxsYmFjayAmJiBudWxsICE9PSBjYWxsYmFjayAmJiAod2Fybk9uSW52YWxpZENhbGxiYWNrKGNhbGxiYWNrKSwgdXBkYXRlLmNhbGxiYWNrID0gY2FsbGJhY2spOwogICAgICAgICAgY2FsbGJhY2sgPSBlbnF1ZXVlVXBkYXRlKGluc3QsIHVwZGF0ZSwgbGFuZSk7CiAgICAgICAgICBudWxsICE9PSBjYWxsYmFjayAmJiAoc2NoZWR1bGVVcGRhdGVPbkZpYmVyKGNhbGxiYWNrLCBpbnN0LCBsYW5lKSwgZW50YW5nbGVUcmFuc2l0aW9ucyhjYWxsYmFjaywgaW5zdCwgbGFuZSkpOwogICAgICAgICAgbnVsbCAhPT0gaW5qZWN0ZWRQcm9maWxpbmdIb29rcyAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgaW5qZWN0ZWRQcm9maWxpbmdIb29rcy5tYXJrRm9yY2VVcGRhdGVTY2hlZHVsZWQgJiYgaW5qZWN0ZWRQcm9maWxpbmdIb29rcy5tYXJrRm9yY2VVcGRhdGVTY2hlZHVsZWQoaW5zdCwgbGFuZSk7CiAgICAgICAgfQogICAgICB9LCByZXBvcnRHbG9iYWxFcnJvciA9ICJmdW5jdGlvbiIgPT09IHR5cGVvZiByZXBvcnRFcnJvciA/IHJlcG9ydEVycm9yIDogZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICBpZiAoIm9iamVjdCIgPT09IHR5cGVvZiB3aW5kb3cgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHdpbmRvdy5FcnJvckV2ZW50KSB7CiAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgd2luZG93LkVycm9yRXZlbnQoImVycm9yIiwgewogICAgICAgICAgICBidWJibGVzOiB0cnVlLAogICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAib2JqZWN0IiA9PT0gdHlwZW9mIGVycm9yICYmIG51bGwgIT09IGVycm9yICYmICJzdHJpbmciID09PSB0eXBlb2YgZXJyb3IubWVzc2FnZSA/IFN0cmluZyhlcnJvci5tZXNzYWdlKSA6IFN0cmluZyhlcnJvciksCiAgICAgICAgICAgIGVycm9yCiAgICAgICAgICB9KTsKICAgICAgICAgIGlmICghd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpKSByZXR1cm47CiAgICAgICAgfSBlbHNlIGlmICgib2JqZWN0IiA9PT0gdHlwZW9mIHByb2Nlc3MgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHByb2Nlc3MuZW1pdCkgewogICAgICAgICAgcHJvY2Vzcy5lbWl0KCJ1bmNhdWdodEV4Y2VwdGlvbiIsIGVycm9yKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgIH0sIGNvbXBvbmVudE5hbWUgPSBudWxsLCBlcnJvckJvdW5kYXJ5TmFtZSA9IG51bGwsIFNlbGVjdGl2ZUh5ZHJhdGlvbkV4Y2VwdGlvbiA9IEVycm9yKAogICAgICAgICJUaGlzIGlzIG5vdCBhIHJlYWwgZXJyb3IuIEl0J3MgYW4gaW1wbGVtZW50YXRpb24gZGV0YWlsIG9mIFJlYWN0J3Mgc2VsZWN0aXZlIGh5ZHJhdGlvbiBmZWF0dXJlLiBJZiB0aGlzIGxlYWtzIGludG8gdXNlcnNwYWNlLCBpdCdzIGEgYnVnIGluIFJlYWN0LiBQbGVhc2UgZmlsZSBhbiBpc3N1ZS4iCiAgICAgICksIGRpZFJlY2VpdmVVcGRhdGUgPSBmYWxzZTsKICAgICAgdmFyIGRpZFdhcm5BYm91dEJhZENsYXNzID0ge307CiAgICAgIHZhciBkaWRXYXJuQWJvdXRDb250ZXh0VHlwZU9uRnVuY3Rpb25Db21wb25lbnQgPSB7fTsKICAgICAgdmFyIGRpZFdhcm5BYm91dENvbnRleHRUeXBlcyA9IHt9OwogICAgICB2YXIgZGlkV2FybkFib3V0R2V0RGVyaXZlZFN0YXRlT25GdW5jdGlvbkNvbXBvbmVudCA9IHt9OwogICAgICB2YXIgZGlkV2FybkFib3V0UmVhc3NpZ25pbmdQcm9wcyA9IGZhbHNlOwogICAgICB2YXIgZGlkV2FybkFib3V0UmV2ZWFsT3JkZXIgPSB7fTsKICAgICAgdmFyIGRpZFdhcm5BYm91dFRhaWxPcHRpb25zID0ge307CiAgICAgIHZhciBTVVNQRU5ERURfTUFSS0VSID0gewogICAgICAgIGRlaHlkcmF0ZWQ6IG51bGwsCiAgICAgICAgdHJlZUNvbnRleHQ6IG51bGwsCiAgICAgICAgcmV0cnlMYW5lOiAwLAogICAgICAgIGh5ZHJhdGlvbkVycm9yczogbnVsbAogICAgICB9LCBoYXNXYXJuZWRBYm91dFVzaW5nTm9WYWx1ZVByb3BPbkNvbnRleHRQcm92aWRlciA9IGZhbHNlLCBkaWRXYXJuQWJvdXRVbmRlZmluZWRTbmFwc2hvdEJlZm9yZVVwZGF0ZSA9IG51bGw7CiAgICAgIGRpZFdhcm5BYm91dFVuZGVmaW5lZFNuYXBzaG90QmVmb3JlVXBkYXRlID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKICAgICAgdmFyIG9mZnNjcmVlblN1YnRyZWVJc0hpZGRlbiA9IGZhbHNlLCBvZmZzY3JlZW5TdWJ0cmVlV2FzSGlkZGVuID0gZmFsc2UsIG5lZWRzRm9ybVJlc2V0ID0gZmFsc2UsIFBvc3NpYmx5V2Vha1NldCA9ICJmdW5jdGlvbiIgPT09IHR5cGVvZiBXZWFrU2V0ID8gV2Vha1NldCA6IFNldCwgbmV4dEVmZmVjdCA9IG51bGwsIGluUHJvZ3Jlc3NMYW5lcyA9IG51bGwsIGluUHJvZ3Jlc3NSb290ID0gbnVsbCwgaG9zdFBhcmVudCA9IG51bGwsIGhvc3RQYXJlbnRJc0NvbnRhaW5lciA9IGZhbHNlLCBjdXJyZW50SG9pc3RhYmxlUm9vdCA9IG51bGwsIHN1c3BlbnNleUNvbW1pdEZsYWcgPSA4MTkyLCBEZWZhdWx0QXN5bmNEaXNwYXRjaGVyID0gewogICAgICAgIGdldENhY2hlRm9yVHlwZTogZnVuY3Rpb24ocmVzb3VyY2VUeXBlKSB7CiAgICAgICAgICB2YXIgY2FjaGUgPSByZWFkQ29udGV4dChDYWNoZUNvbnRleHQpLCBjYWNoZUZvclR5cGUgPSBjYWNoZS5kYXRhLmdldChyZXNvdXJjZVR5cGUpOwogICAgICAgICAgdm9pZCAwID09PSBjYWNoZUZvclR5cGUgJiYgKGNhY2hlRm9yVHlwZSA9IHJlc291cmNlVHlwZSgpLCBjYWNoZS5kYXRhLnNldChyZXNvdXJjZVR5cGUsIGNhY2hlRm9yVHlwZSkpOwogICAgICAgICAgcmV0dXJuIGNhY2hlRm9yVHlwZTsKICAgICAgICB9LAogICAgICAgIGdldE93bmVyOiBmdW5jdGlvbigpIHsKICAgICAgICAgIHJldHVybiBjdXJyZW50OwogICAgICAgIH0KICAgICAgfTsKICAgICAgaWYgKCJmdW5jdGlvbiIgPT09IHR5cGVvZiBTeW1ib2wgJiYgU3ltYm9sLmZvcikgewogICAgICAgIHZhciBzeW1ib2xGb3IgPSBTeW1ib2wuZm9yOwogICAgICAgIHN5bWJvbEZvcigic2VsZWN0b3IuY29tcG9uZW50Iik7CiAgICAgICAgc3ltYm9sRm9yKCJzZWxlY3Rvci5oYXNfcHNldWRvX2NsYXNzIik7CiAgICAgICAgc3ltYm9sRm9yKCJzZWxlY3Rvci5yb2xlIik7CiAgICAgICAgc3ltYm9sRm9yKCJzZWxlY3Rvci50ZXN0X2lkIik7CiAgICAgICAgc3ltYm9sRm9yKCJzZWxlY3Rvci50ZXh0Iik7CiAgICAgIH0KICAgICAgdmFyIGNvbW1pdEhvb2tzID0gW10sIFBvc3NpYmx5V2Vha01hcCA9ICJmdW5jdGlvbiIgPT09IHR5cGVvZiBXZWFrTWFwID8gV2Vha01hcCA6IE1hcCwgTm9Db250ZXh0ID0gMCwgUmVuZGVyQ29udGV4dCA9IDIsIENvbW1pdENvbnRleHQgPSA0LCBSb290SW5Qcm9ncmVzcyA9IDAsIFJvb3RGYXRhbEVycm9yZWQgPSAxLCBSb290RXJyb3JlZCA9IDIsIFJvb3RTdXNwZW5kZWQgPSAzLCBSb290U3VzcGVuZGVkV2l0aERlbGF5ID0gNCwgUm9vdFN1c3BlbmRlZEF0VGhlU2hlbGwgPSA2LCBSb290Q29tcGxldGVkID0gNSwgZXhlY3V0aW9uQ29udGV4dCA9IE5vQ29udGV4dCwgd29ya0luUHJvZ3Jlc3NSb290ID0gbnVsbCwgd29ya0luUHJvZ3Jlc3MgPSBudWxsLCB3b3JrSW5Qcm9ncmVzc1Jvb3RSZW5kZXJMYW5lcyA9IDAsIE5vdFN1c3BlbmRlZCA9IDAsIFN1c3BlbmRlZE9uRXJyb3IgPSAxLCBTdXNwZW5kZWRPbkRhdGEgPSAyLCBTdXNwZW5kZWRPbkltbWVkaWF0ZSA9IDMsIFN1c3BlbmRlZE9uSW5zdGFuY2UgPSA0LCBTdXNwZW5kZWRPbkluc3RhbmNlQW5kUmVhZHlUb0NvbnRpbnVlID0gNSwgU3VzcGVuZGVkT25EZXByZWNhdGVkVGhyb3dQcm9taXNlID0gNiwgU3VzcGVuZGVkQW5kUmVhZHlUb0NvbnRpbnVlID0gNywgU3VzcGVuZGVkT25IeWRyYXRpb24gPSA4LCBTdXNwZW5kZWRPbkFjdGlvbiA9IDksIHdvcmtJblByb2dyZXNzU3VzcGVuZGVkUmVhc29uID0gTm90U3VzcGVuZGVkLCB3b3JrSW5Qcm9ncmVzc1Rocm93blZhbHVlID0gbnVsbCwgd29ya0luUHJvZ3Jlc3NSb290RGlkU2tpcFN1c3BlbmRlZFNpYmxpbmdzID0gZmFsc2UsIHdvcmtJblByb2dyZXNzUm9vdElzUHJlcmVuZGVyaW5nID0gZmFsc2UsIHdvcmtJblByb2dyZXNzUm9vdERpZEF0dGFjaFBpbmdMaXN0ZW5lciA9IGZhbHNlLCBlbnRhbmdsZWRSZW5kZXJMYW5lcyA9IDAsIHdvcmtJblByb2dyZXNzUm9vdEV4aXRTdGF0dXMgPSBSb290SW5Qcm9ncmVzcywgd29ya0luUHJvZ3Jlc3NSb290U2tpcHBlZExhbmVzID0gMCwgd29ya0luUHJvZ3Jlc3NSb290SW50ZXJsZWF2ZWRVcGRhdGVkTGFuZXMgPSAwLCB3b3JrSW5Qcm9ncmVzc1Jvb3RQaW5nZWRMYW5lcyA9IDAsIHdvcmtJblByb2dyZXNzRGVmZXJyZWRMYW5lID0gMCwgd29ya0luUHJvZ3Jlc3NTdXNwZW5kZWRSZXRyeUxhbmVzID0gMCwgd29ya0luUHJvZ3Jlc3NSb290Q29uY3VycmVudEVycm9ycyA9IG51bGwsIHdvcmtJblByb2dyZXNzUm9vdFJlY292ZXJhYmxlRXJyb3JzID0gbnVsbCwgd29ya0luUHJvZ3Jlc3NSb290RGlkSW5jbHVkZVJlY3Vyc2l2ZVJlbmRlclVwZGF0ZSA9IGZhbHNlLCBnbG9iYWxNb3N0UmVjZW50RmFsbGJhY2tUaW1lID0gMCwgRkFMTEJBQ0tfVEhST1RUTEVfTVMgPSAzMDAsIHdvcmtJblByb2dyZXNzUm9vdFJlbmRlclRhcmdldFRpbWUgPSBJbmZpbml0eSwgUkVOREVSX1RJTUVPVVRfTVMgPSA1MDAsIHdvcmtJblByb2dyZXNzVHJhbnNpdGlvbnMgPSBudWxsLCBsZWdhY3lFcnJvckJvdW5kYXJpZXNUaGF0QWxyZWFkeUZhaWxlZCA9IG51bGwsIElNTUVESUFURV9DT01NSVQgPSAwLCBTVVNQRU5ERURfQ09NTUlUID0gMSwgVEhST1RUTEVEX0NPTU1JVCA9IDIsIE5PX1BFTkRJTkdfRUZGRUNUUyA9IDAsIFBFTkRJTkdfTVVUQVRJT05fUEhBU0UgPSAxLCBQRU5ESU5HX0xBWU9VVF9QSEFTRSA9IDIsIFBFTkRJTkdfQUZURVJfTVVUQVRJT05fUEhBU0UgPSAzLCBQRU5ESU5HX1NQQVdORURfV09SSyA9IDQsIFBFTkRJTkdfUEFTU0lWRV9QSEFTRSA9IDUsIHBlbmRpbmdFZmZlY3RzU3RhdHVzID0gMCwgcGVuZGluZ0VmZmVjdHNSb290ID0gbnVsbCwgcGVuZGluZ0ZpbmlzaGVkV29yayA9IG51bGwsIHBlbmRpbmdFZmZlY3RzTGFuZXMgPSAwLCBwZW5kaW5nRWZmZWN0c1JlbWFpbmluZ0xhbmVzID0gMCwgcGVuZGluZ1Bhc3NpdmVUcmFuc2l0aW9ucyA9IG51bGwsIHBlbmRpbmdSZWNvdmVyYWJsZUVycm9ycyA9IG51bGwsIE5FU1RFRF9VUERBVEVfTElNSVQgPSA1MCwgbmVzdGVkVXBkYXRlQ291bnQgPSAwLCByb290V2l0aE5lc3RlZFVwZGF0ZXMgPSBudWxsLCBpc0ZsdXNoaW5nUGFzc2l2ZUVmZmVjdHMgPSBmYWxzZSwgZGlkU2NoZWR1bGVVcGRhdGVEdXJpbmdQYXNzaXZlRWZmZWN0cyA9IGZhbHNlLCBORVNURURfUEFTU0lWRV9VUERBVEVfTElNSVQgPSA1MCwgbmVzdGVkUGFzc2l2ZVVwZGF0ZUNvdW50ID0gMCwgcm9vdFdpdGhQYXNzaXZlTmVzdGVkVXBkYXRlcyA9IG51bGwsIGlzUnVubmluZ0luc2VydGlvbkVmZmVjdCA9IGZhbHNlLCBkaWRXYXJuU3RhdGVVcGRhdGVGb3JOb3RZZXRNb3VudGVkQ29tcG9uZW50ID0gbnVsbCwgZGlkV2FybkFib3V0VXBkYXRlSW5SZW5kZXIgPSBmYWxzZTsKICAgICAgdmFyIGRpZFdhcm5BYm91dFVwZGF0ZUluUmVuZGVyRm9yQW5vdGhlckNvbXBvbmVudCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7CiAgICAgIHZhciBmYWtlQWN0Q2FsbGJhY2tOb2RlJDEgPSB7fSwgZmlyc3RTY2hlZHVsZWRSb290ID0gbnVsbCwgbGFzdFNjaGVkdWxlZFJvb3QgPSBudWxsLCBkaWRTY2hlZHVsZU1pY3JvdGFzayA9IGZhbHNlLCBkaWRTY2hlZHVsZU1pY3JvdGFza19hY3QgPSBmYWxzZSwgbWlnaHRIYXZlUGVuZGluZ1N5bmNXb3JrID0gZmFsc2UsIGlzRmx1c2hpbmdXb3JrID0gZmFsc2UsIGN1cnJlbnRFdmVudFRyYW5zaXRpb25MYW5lID0gMCwgZmFrZUFjdENhbGxiYWNrTm9kZSA9IHt9OwogICAgICAoZnVuY3Rpb24oKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaW1wbGVFdmVudFBsdWdpbkV2ZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIGV2ZW50TmFtZSA9IHNpbXBsZUV2ZW50UGx1Z2luRXZlbnRzW2ldLCBkb21FdmVudE5hbWUgPSBldmVudE5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgICAgIGV2ZW50TmFtZSA9IGV2ZW50TmFtZVswXS50b1VwcGVyQ2FzZSgpICsgZXZlbnROYW1lLnNsaWNlKDEpOwogICAgICAgICAgcmVnaXN0ZXJTaW1wbGVFdmVudChkb21FdmVudE5hbWUsICJvbiIgKyBldmVudE5hbWUpOwogICAgICAgIH0KICAgICAgICByZWdpc3RlclNpbXBsZUV2ZW50KEFOSU1BVElPTl9FTkQsICJvbkFuaW1hdGlvbkVuZCIpOwogICAgICAgIHJlZ2lzdGVyU2ltcGxlRXZlbnQoQU5JTUFUSU9OX0lURVJBVElPTiwgIm9uQW5pbWF0aW9uSXRlcmF0aW9uIik7CiAgICAgICAgcmVnaXN0ZXJTaW1wbGVFdmVudChBTklNQVRJT05fU1RBUlQsICJvbkFuaW1hdGlvblN0YXJ0Iik7CiAgICAgICAgcmVnaXN0ZXJTaW1wbGVFdmVudCgiZGJsY2xpY2siLCAib25Eb3VibGVDbGljayIpOwogICAgICAgIHJlZ2lzdGVyU2ltcGxlRXZlbnQoImZvY3VzaW4iLCAib25Gb2N1cyIpOwogICAgICAgIHJlZ2lzdGVyU2ltcGxlRXZlbnQoImZvY3Vzb3V0IiwgIm9uQmx1ciIpOwogICAgICAgIHJlZ2lzdGVyU2ltcGxlRXZlbnQoVFJBTlNJVElPTl9SVU4sICJvblRyYW5zaXRpb25SdW4iKTsKICAgICAgICByZWdpc3RlclNpbXBsZUV2ZW50KFRSQU5TSVRJT05fU1RBUlQsICJvblRyYW5zaXRpb25TdGFydCIpOwogICAgICAgIHJlZ2lzdGVyU2ltcGxlRXZlbnQoVFJBTlNJVElPTl9DQU5DRUwsICJvblRyYW5zaXRpb25DYW5jZWwiKTsKICAgICAgICByZWdpc3RlclNpbXBsZUV2ZW50KFRSQU5TSVRJT05fRU5ELCAib25UcmFuc2l0aW9uRW5kIik7CiAgICAgIH0pKCk7CiAgICAgIHJlZ2lzdGVyRGlyZWN0RXZlbnQoIm9uTW91c2VFbnRlciIsIFsibW91c2VvdXQiLCAibW91c2VvdmVyIl0pOwogICAgICByZWdpc3RlckRpcmVjdEV2ZW50KCJvbk1vdXNlTGVhdmUiLCBbIm1vdXNlb3V0IiwgIm1vdXNlb3ZlciJdKTsKICAgICAgcmVnaXN0ZXJEaXJlY3RFdmVudCgib25Qb2ludGVyRW50ZXIiLCBbInBvaW50ZXJvdXQiLCAicG9pbnRlcm92ZXIiXSk7CiAgICAgIHJlZ2lzdGVyRGlyZWN0RXZlbnQoIm9uUG9pbnRlckxlYXZlIiwgWyJwb2ludGVyb3V0IiwgInBvaW50ZXJvdmVyIl0pOwogICAgICByZWdpc3RlclR3b1BoYXNlRXZlbnQoCiAgICAgICAgIm9uQ2hhbmdlIiwKICAgICAgICAiY2hhbmdlIGNsaWNrIGZvY3VzaW4gZm9jdXNvdXQgaW5wdXQga2V5ZG93biBrZXl1cCBzZWxlY3Rpb25jaGFuZ2UiLnNwbGl0KAogICAgICAgICAgIiAiCiAgICAgICAgKQogICAgICApOwogICAgICByZWdpc3RlclR3b1BoYXNlRXZlbnQoCiAgICAgICAgIm9uU2VsZWN0IiwKICAgICAgICAiZm9jdXNvdXQgY29udGV4dG1lbnUgZHJhZ2VuZCBmb2N1c2luIGtleWRvd24ga2V5dXAgbW91c2Vkb3duIG1vdXNldXAgc2VsZWN0aW9uY2hhbmdlIi5zcGxpdCgKICAgICAgICAgICIgIgogICAgICAgICkKICAgICAgKTsKICAgICAgcmVnaXN0ZXJUd29QaGFzZUV2ZW50KCJvbkJlZm9yZUlucHV0IiwgWwogICAgICAgICJjb21wb3NpdGlvbmVuZCIsCiAgICAgICAgImtleXByZXNzIiwKICAgICAgICAidGV4dElucHV0IiwKICAgICAgICAicGFzdGUiCiAgICAgIF0pOwogICAgICByZWdpc3RlclR3b1BoYXNlRXZlbnQoCiAgICAgICAgIm9uQ29tcG9zaXRpb25FbmQiLAogICAgICAgICJjb21wb3NpdGlvbmVuZCBmb2N1c291dCBrZXlkb3duIGtleXByZXNzIGtleXVwIG1vdXNlZG93biIuc3BsaXQoIiAiKQogICAgICApOwogICAgICByZWdpc3RlclR3b1BoYXNlRXZlbnQoCiAgICAgICAgIm9uQ29tcG9zaXRpb25TdGFydCIsCiAgICAgICAgImNvbXBvc2l0aW9uc3RhcnQgZm9jdXNvdXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBtb3VzZWRvd24iLnNwbGl0KCIgIikKICAgICAgKTsKICAgICAgcmVnaXN0ZXJUd29QaGFzZUV2ZW50KAogICAgICAgICJvbkNvbXBvc2l0aW9uVXBkYXRlIiwKICAgICAgICAiY29tcG9zaXRpb251cGRhdGUgZm9jdXNvdXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBtb3VzZWRvd24iLnNwbGl0KCIgIikKICAgICAgKTsKICAgICAgdmFyIG1lZGlhRXZlbnRUeXBlcyA9ICJhYm9ydCBjYW5wbGF5IGNhbnBsYXl0aHJvdWdoIGR1cmF0aW9uY2hhbmdlIGVtcHRpZWQgZW5jcnlwdGVkIGVuZGVkIGVycm9yIGxvYWRlZGRhdGEgbG9hZGVkbWV0YWRhdGEgbG9hZHN0YXJ0IHBhdXNlIHBsYXkgcGxheWluZyBwcm9ncmVzcyByYXRlY2hhbmdlIHJlc2l6ZSBzZWVrZWQgc2Vla2luZyBzdGFsbGVkIHN1c3BlbmQgdGltZXVwZGF0ZSB2b2x1bWVjaGFuZ2Ugd2FpdGluZyIuc3BsaXQoCiAgICAgICAgIiAiCiAgICAgICksIG5vbkRlbGVnYXRlZEV2ZW50cyA9IG5ldyBTZXQoCiAgICAgICAgImJlZm9yZXRvZ2dsZSBjYW5jZWwgY2xvc2UgaW52YWxpZCBsb2FkIHNjcm9sbCBzY3JvbGxlbmQgdG9nZ2xlIi5zcGxpdCgiICIpLmNvbmNhdChtZWRpYUV2ZW50VHlwZXMpCiAgICAgICksIGxpc3RlbmluZ01hcmtlciA9ICJfcmVhY3RMaXN0ZW5pbmciICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMiksIGRpZFdhcm5Db250cm9sbGVkVG9VbmNvbnRyb2xsZWQgPSBmYWxzZSwgZGlkV2FyblVuY29udHJvbGxlZFRvQ29udHJvbGxlZCA9IGZhbHNlLCBkaWRXYXJuRm9ybUFjdGlvblR5cGUgPSBmYWxzZSwgZGlkV2FybkZvcm1BY3Rpb25OYW1lID0gZmFsc2UsIGRpZFdhcm5Gb3JtQWN0aW9uVGFyZ2V0ID0gZmFsc2UsIGRpZFdhcm5Gb3JtQWN0aW9uTWV0aG9kID0gZmFsc2UsIGRpZFdhcm5Qb3BvdmVyVGFyZ2V0T2JqZWN0ID0gZmFsc2U7CiAgICAgIHZhciBkaWRXYXJuRm9yTmV3Qm9vbGVhblByb3BzV2l0aEVtcHR5VmFsdWUgPSB7fTsKICAgICAgdmFyIE5PUk1BTElaRV9ORVdMSU5FU19SRUdFWCA9IC9cclxuPy9nLCBOT1JNQUxJWkVfTlVMTF9BTkRfUkVQTEFDRU1FTlRfUkVHRVggPSAvXHUwMDAwfFx1RkZGRC9nLCB4bGlua05hbWVzcGFjZSA9ICJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiwgeG1sTmFtZXNwYWNlID0gImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZSIsIEVYUEVDVEVEX0ZPUk1fQUNUSU9OX1VSTCA9ICJqYXZhc2NyaXB0OnRocm93IG5ldyBFcnJvcignUmVhY3QgZm9ybSB1bmV4cGVjdGVkbHkgc3VibWl0dGVkLicpIiwgU1VQUFJFU1NfSFlEUkFUSU9OX1dBUk5JTkcgPSAic3VwcHJlc3NIeWRyYXRpb25XYXJuaW5nIiwgU1VTUEVOU0VfU1RBUlRfREFUQSA9ICIkIiwgU1VTUEVOU0VfRU5EX0RBVEEgPSAiLyQiLCBTVVNQRU5TRV9QRU5ESU5HX1NUQVJUX0RBVEEgPSAiJD8iLCBTVVNQRU5TRV9GQUxMQkFDS19TVEFSVF9EQVRBID0gIiQhIiwgUFJFQU1CTEVfQ09OVFJJQlVUSU9OX0hUTUwgPSAxLCBQUkVBTUJMRV9DT05UUklCVVRJT05fQk9EWSA9IDIsIFBSRUFNQkxFX0NPTlRSSUJVVElPTl9IRUFEID0gNCwgRk9STV9TVEFURV9JU19NQVRDSElORyA9ICJGISIsIEZPUk1fU1RBVEVfSVNfTk9UX01BVENISU5HID0gIkYiLCBET0NVTUVOVF9SRUFEWV9TVEFURV9DT01QTEVURSA9ICJjb21wbGV0ZSIsIFNUWUxFID0gInN0eWxlIiwgSG9zdENvbnRleHROYW1lc3BhY2VOb25lID0gMCwgSG9zdENvbnRleHROYW1lc3BhY2VTdmcgPSAxLCBIb3N0Q29udGV4dE5hbWVzcGFjZU1hdGggPSAyLCBldmVudHNFbmFibGVkID0gbnVsbCwgc2VsZWN0aW9uSW5mb3JtYXRpb24gPSBudWxsLCB3YXJuZWRVbmtub3duVGFncyA9IHsgZGlhbG9nOiB0cnVlLCB3ZWJ2aWV3OiB0cnVlIH0sIGN1cnJlbnRQb3BzdGF0ZVRyYW5zaXRpb25FdmVudCA9IG51bGwsIHNjaGVkdWxlVGltZW91dCA9ICJmdW5jdGlvbiIgPT09IHR5cGVvZiBzZXRUaW1lb3V0ID8gc2V0VGltZW91dCA6IHZvaWQgMCwgY2FuY2VsVGltZW91dCA9ICJmdW5jdGlvbiIgPT09IHR5cGVvZiBjbGVhclRpbWVvdXQgPyBjbGVhclRpbWVvdXQgOiB2b2lkIDAsIG5vVGltZW91dCA9IC0xLCBsb2NhbFByb21pc2UgPSAiZnVuY3Rpb24iID09PSB0eXBlb2YgUHJvbWlzZSA/IFByb21pc2UgOiB2b2lkIDAsIHNjaGVkdWxlTWljcm90YXNrID0gImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHF1ZXVlTWljcm90YXNrID8gcXVldWVNaWNyb3Rhc2sgOiAidW5kZWZpbmVkIiAhPT0gdHlwZW9mIGxvY2FsUHJvbWlzZSA/IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAgICAgICAgcmV0dXJuIGxvY2FsUHJvbWlzZS5yZXNvbHZlKG51bGwpLnRoZW4oY2FsbGJhY2spLmNhdGNoKGhhbmRsZUVycm9ySW5OZXh0VGljayk7CiAgICAgIH0gOiBzY2hlZHVsZVRpbWVvdXQsIHByZXZpb3VzSHlkcmF0YWJsZU9uRW50ZXJpbmdTY29wZWRTaW5nbGV0b24gPSBudWxsLCBOb3RMb2FkZWQgPSAwLCBMb2FkZWQgPSAxLCBFcnJvcmVkID0gMiwgU2V0dGxlZCA9IDMsIEluc2VydGVkID0gNCwgcHJlbG9hZFByb3BzTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSwgcHJlY29ubmVjdHNTZXQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpLCBwcmV2aW91c0Rpc3BhdGNoZXIgPSBSZWFjdERPTVNoYXJlZEludGVybmFscy5kOwogICAgICBSZWFjdERPTVNoYXJlZEludGVybmFscy5kID0gewogICAgICAgIGY6IGZ1bmN0aW9uKCkgewogICAgICAgICAgdmFyIHByZXZpb3VzV2FzUmVuZGVyaW5nID0gcHJldmlvdXNEaXNwYXRjaGVyLmYoKSwgd2FzUmVuZGVyaW5nID0gZmx1c2hTeW5jV29yayQxKCk7CiAgICAgICAgICByZXR1cm4gcHJldmlvdXNXYXNSZW5kZXJpbmcgfHwgd2FzUmVuZGVyaW5nOwogICAgICAgIH0sCiAgICAgICAgcjogZnVuY3Rpb24oZm9ybSkgewogICAgICAgICAgdmFyIGZvcm1JbnN0ID0gZ2V0SW5zdGFuY2VGcm9tTm9kZShmb3JtKTsKICAgICAgICAgIG51bGwgIT09IGZvcm1JbnN0ICYmIDUgPT09IGZvcm1JbnN0LnRhZyAmJiAiZm9ybSIgPT09IGZvcm1JbnN0LnR5cGUgPyByZXF1ZXN0Rm9ybVJlc2V0JDEoZm9ybUluc3QpIDogcHJldmlvdXNEaXNwYXRjaGVyLnIoZm9ybSk7CiAgICAgICAgfSwKICAgICAgICBEOiBmdW5jdGlvbihocmVmKSB7CiAgICAgICAgICBwcmV2aW91c0Rpc3BhdGNoZXIuRChocmVmKTsKICAgICAgICAgIHByZWNvbm5lY3RBcygiZG5zLXByZWZldGNoIiwgaHJlZiwgbnVsbCk7CiAgICAgICAgfSwKICAgICAgICBDOiBmdW5jdGlvbihocmVmLCBjcm9zc09yaWdpbikgewogICAgICAgICAgcHJldmlvdXNEaXNwYXRjaGVyLkMoaHJlZiwgY3Jvc3NPcmlnaW4pOwogICAgICAgICAgcHJlY29ubmVjdEFzKCJwcmVjb25uZWN0IiwgaHJlZiwgY3Jvc3NPcmlnaW4pOwogICAgICAgIH0sCiAgICAgICAgTDogZnVuY3Rpb24oaHJlZiwgYXMsIG9wdGlvbnMpIHsKICAgICAgICAgIHByZXZpb3VzRGlzcGF0Y2hlci5MKGhyZWYsIGFzLCBvcHRpb25zKTsKICAgICAgICAgIHZhciBvd25lckRvY3VtZW50ID0gZ2xvYmFsRG9jdW1lbnQ7CiAgICAgICAgICBpZiAob3duZXJEb2N1bWVudCAmJiBocmVmICYmIGFzKSB7CiAgICAgICAgICAgIHZhciBwcmVsb2FkU2VsZWN0b3IgPSAnbGlua1tyZWw9InByZWxvYWQiXVthcz0iJyArIGVzY2FwZVNlbGVjdG9yQXR0cmlidXRlVmFsdWVJbnNpZGVEb3VibGVRdW90ZXMoYXMpICsgJyJdJzsKICAgICAgICAgICAgImltYWdlIiA9PT0gYXMgPyBvcHRpb25zICYmIG9wdGlvbnMuaW1hZ2VTcmNTZXQgPyAocHJlbG9hZFNlbGVjdG9yICs9ICdbaW1hZ2VzcmNzZXQ9IicgKyBlc2NhcGVTZWxlY3RvckF0dHJpYnV0ZVZhbHVlSW5zaWRlRG91YmxlUXVvdGVzKAogICAgICAgICAgICAgIG9wdGlvbnMuaW1hZ2VTcmNTZXQKICAgICAgICAgICAgKSArICciXScsICJzdHJpbmciID09PSB0eXBlb2Ygb3B0aW9ucy5pbWFnZVNpemVzICYmIChwcmVsb2FkU2VsZWN0b3IgKz0gJ1tpbWFnZXNpemVzPSInICsgZXNjYXBlU2VsZWN0b3JBdHRyaWJ1dGVWYWx1ZUluc2lkZURvdWJsZVF1b3RlcygKICAgICAgICAgICAgICBvcHRpb25zLmltYWdlU2l6ZXMKICAgICAgICAgICAgKSArICciXScpKSA6IHByZWxvYWRTZWxlY3RvciArPSAnW2hyZWY9IicgKyBlc2NhcGVTZWxlY3RvckF0dHJpYnV0ZVZhbHVlSW5zaWRlRG91YmxlUXVvdGVzKGhyZWYpICsgJyJdJyA6IHByZWxvYWRTZWxlY3RvciArPSAnW2hyZWY9IicgKyBlc2NhcGVTZWxlY3RvckF0dHJpYnV0ZVZhbHVlSW5zaWRlRG91YmxlUXVvdGVzKGhyZWYpICsgJyJdJzsKICAgICAgICAgICAgdmFyIGtleSA9IHByZWxvYWRTZWxlY3RvcjsKICAgICAgICAgICAgc3dpdGNoIChhcykgewogICAgICAgICAgICAgIGNhc2UgInN0eWxlIjoKICAgICAgICAgICAgICAgIGtleSA9IGdldFN0eWxlS2V5KGhyZWYpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAic2NyaXB0IjoKICAgICAgICAgICAgICAgIGtleSA9IGdldFNjcmlwdEtleShocmVmKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBwcmVsb2FkUHJvcHNNYXAuaGFzKGtleSkgfHwgKGhyZWYgPSBhc3NpZ24oCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgcmVsOiAicHJlbG9hZCIsCiAgICAgICAgICAgICAgICBocmVmOiAiaW1hZ2UiID09PSBhcyAmJiBvcHRpb25zICYmIG9wdGlvbnMuaW1hZ2VTcmNTZXQgPyB2b2lkIDAgOiBocmVmLAogICAgICAgICAgICAgICAgYXMKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIG9wdGlvbnMKICAgICAgICAgICAgKSwgcHJlbG9hZFByb3BzTWFwLnNldChrZXksIGhyZWYpLCBudWxsICE9PSBvd25lckRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJlbG9hZFNlbGVjdG9yKSB8fCAic3R5bGUiID09PSBhcyAmJiBvd25lckRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCiAgICAgICAgICAgICAgZ2V0U3R5bGVzaGVldFNlbGVjdG9yRnJvbUtleShrZXkpCiAgICAgICAgICAgICkgfHwgInNjcmlwdCIgPT09IGFzICYmIG93bmVyRG9jdW1lbnQucXVlcnlTZWxlY3RvcihnZXRTY3JpcHRTZWxlY3RvckZyb21LZXkoa2V5KSkgfHwgKGFzID0gb3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIiksIHNldEluaXRpYWxQcm9wZXJ0aWVzKGFzLCAibGluayIsIGhyZWYpLCBtYXJrTm9kZUFzSG9pc3RhYmxlKGFzKSwgb3duZXJEb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGFzKSkpOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgbTogZnVuY3Rpb24oaHJlZiwgb3B0aW9ucykgewogICAgICAgICAgcHJldmlvdXNEaXNwYXRjaGVyLm0oaHJlZiwgb3B0aW9ucyk7CiAgICAgICAgICB2YXIgb3duZXJEb2N1bWVudCA9IGdsb2JhbERvY3VtZW50OwogICAgICAgICAgaWYgKG93bmVyRG9jdW1lbnQgJiYgaHJlZikgewogICAgICAgICAgICB2YXIgYXMgPSBvcHRpb25zICYmICJzdHJpbmciID09PSB0eXBlb2Ygb3B0aW9ucy5hcyA/IG9wdGlvbnMuYXMgOiAic2NyaXB0IiwgcHJlbG9hZFNlbGVjdG9yID0gJ2xpbmtbcmVsPSJtb2R1bGVwcmVsb2FkIl1bYXM9IicgKyBlc2NhcGVTZWxlY3RvckF0dHJpYnV0ZVZhbHVlSW5zaWRlRG91YmxlUXVvdGVzKGFzKSArICciXVtocmVmPSInICsgZXNjYXBlU2VsZWN0b3JBdHRyaWJ1dGVWYWx1ZUluc2lkZURvdWJsZVF1b3RlcyhocmVmKSArICciXScsIGtleSA9IHByZWxvYWRTZWxlY3RvcjsKICAgICAgICAgICAgc3dpdGNoIChhcykgewogICAgICAgICAgICAgIGNhc2UgImF1ZGlvd29ya2xldCI6CiAgICAgICAgICAgICAgY2FzZSAicGFpbnR3b3JrbGV0IjoKICAgICAgICAgICAgICBjYXNlICJzZXJ2aWNld29ya2VyIjoKICAgICAgICAgICAgICBjYXNlICJzaGFyZWR3b3JrZXIiOgogICAgICAgICAgICAgIGNhc2UgIndvcmtlciI6CiAgICAgICAgICAgICAgY2FzZSAic2NyaXB0IjoKICAgICAgICAgICAgICAgIGtleSA9IGdldFNjcmlwdEtleShocmVmKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIXByZWxvYWRQcm9wc01hcC5oYXMoa2V5KSAmJiAoaHJlZiA9IGFzc2lnbih7IHJlbDogIm1vZHVsZXByZWxvYWQiLCBocmVmIH0sIG9wdGlvbnMpLCBwcmVsb2FkUHJvcHNNYXAuc2V0KGtleSwgaHJlZiksIG51bGwgPT09IG93bmVyRG9jdW1lbnQucXVlcnlTZWxlY3RvcihwcmVsb2FkU2VsZWN0b3IpKSkgewogICAgICAgICAgICAgIHN3aXRjaCAoYXMpIHsKICAgICAgICAgICAgICAgIGNhc2UgImF1ZGlvd29ya2xldCI6CiAgICAgICAgICAgICAgICBjYXNlICJwYWludHdvcmtsZXQiOgogICAgICAgICAgICAgICAgY2FzZSAic2VydmljZXdvcmtlciI6CiAgICAgICAgICAgICAgICBjYXNlICJzaGFyZWR3b3JrZXIiOgogICAgICAgICAgICAgICAgY2FzZSAid29ya2VyIjoKICAgICAgICAgICAgICAgIGNhc2UgInNjcmlwdCI6CiAgICAgICAgICAgICAgICAgIGlmIChvd25lckRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZ2V0U2NyaXB0U2VsZWN0b3JGcm9tS2V5KGtleSkpKQogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYXMgPSBvd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpbmsiKTsKICAgICAgICAgICAgICBzZXRJbml0aWFsUHJvcGVydGllcyhhcywgImxpbmsiLCBocmVmKTsKICAgICAgICAgICAgICBtYXJrTm9kZUFzSG9pc3RhYmxlKGFzKTsKICAgICAgICAgICAgICBvd25lckRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoYXMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBYOiBmdW5jdGlvbihzcmMsIG9wdGlvbnMpIHsKICAgICAgICAgIHByZXZpb3VzRGlzcGF0Y2hlci5YKHNyYywgb3B0aW9ucyk7CiAgICAgICAgICB2YXIgb3duZXJEb2N1bWVudCA9IGdsb2JhbERvY3VtZW50OwogICAgICAgICAgaWYgKG93bmVyRG9jdW1lbnQgJiYgc3JjKSB7CiAgICAgICAgICAgIHZhciBzY3JpcHRzID0gZ2V0UmVzb3VyY2VzRnJvbVJvb3Qob3duZXJEb2N1bWVudCkuaG9pc3RhYmxlU2NyaXB0cywga2V5ID0gZ2V0U2NyaXB0S2V5KHNyYyksIHJlc291cmNlID0gc2NyaXB0cy5nZXQoa2V5KTsKICAgICAgICAgICAgcmVzb3VyY2UgfHwgKHJlc291cmNlID0gb3duZXJEb2N1bWVudC5xdWVyeVNlbGVjdG9yKAogICAgICAgICAgICAgIGdldFNjcmlwdFNlbGVjdG9yRnJvbUtleShrZXkpCiAgICAgICAgICAgICksIHJlc291cmNlIHx8IChzcmMgPSBhc3NpZ24oeyBzcmMsIGFzeW5jOiB0cnVlIH0sIG9wdGlvbnMpLCAob3B0aW9ucyA9IHByZWxvYWRQcm9wc01hcC5nZXQoa2V5KSkgJiYgYWRvcHRQcmVsb2FkUHJvcHNGb3JTY3JpcHQoc3JjLCBvcHRpb25zKSwgcmVzb3VyY2UgPSBvd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpLCBtYXJrTm9kZUFzSG9pc3RhYmxlKHJlc291cmNlKSwgc2V0SW5pdGlhbFByb3BlcnRpZXMocmVzb3VyY2UsICJsaW5rIiwgc3JjKSwgb3duZXJEb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHJlc291cmNlKSksIHJlc291cmNlID0gewogICAgICAgICAgICAgIHR5cGU6ICJzY3JpcHQiLAogICAgICAgICAgICAgIGluc3RhbmNlOiByZXNvdXJjZSwKICAgICAgICAgICAgICBjb3VudDogMSwKICAgICAgICAgICAgICBzdGF0ZTogbnVsbAogICAgICAgICAgICB9LCBzY3JpcHRzLnNldChrZXksIHJlc291cmNlKSk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBTOiBmdW5jdGlvbihocmVmLCBwcmVjZWRlbmNlLCBvcHRpb25zKSB7CiAgICAgICAgICBwcmV2aW91c0Rpc3BhdGNoZXIuUyhocmVmLCBwcmVjZWRlbmNlLCBvcHRpb25zKTsKICAgICAgICAgIHZhciBvd25lckRvY3VtZW50ID0gZ2xvYmFsRG9jdW1lbnQ7CiAgICAgICAgICBpZiAob3duZXJEb2N1bWVudCAmJiBocmVmKSB7CiAgICAgICAgICAgIHZhciBzdHlsZXMgPSBnZXRSZXNvdXJjZXNGcm9tUm9vdChvd25lckRvY3VtZW50KS5ob2lzdGFibGVTdHlsZXMsIGtleSA9IGdldFN0eWxlS2V5KGhyZWYpOwogICAgICAgICAgICBwcmVjZWRlbmNlID0gcHJlY2VkZW5jZSB8fCAiZGVmYXVsdCI7CiAgICAgICAgICAgIHZhciByZXNvdXJjZSA9IHN0eWxlcy5nZXQoa2V5KTsKICAgICAgICAgICAgaWYgKCFyZXNvdXJjZSkgewogICAgICAgICAgICAgIHZhciBzdGF0ZSA9IHsgbG9hZGluZzogTm90TG9hZGVkLCBwcmVsb2FkOiBudWxsIH07CiAgICAgICAgICAgICAgaWYgKHJlc291cmNlID0gb3duZXJEb2N1bWVudC5xdWVyeVNlbGVjdG9yKAogICAgICAgICAgICAgICAgZ2V0U3R5bGVzaGVldFNlbGVjdG9yRnJvbUtleShrZXkpCiAgICAgICAgICAgICAgKSkKICAgICAgICAgICAgICAgIHN0YXRlLmxvYWRpbmcgPSBMb2FkZWQgfCBJbnNlcnRlZDsKICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGhyZWYgPSBhc3NpZ24oCiAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICByZWw6ICJzdHlsZXNoZWV0IiwKICAgICAgICAgICAgICAgICAgICBocmVmLAogICAgICAgICAgICAgICAgICAgICJkYXRhLXByZWNlZGVuY2UiOiBwcmVjZWRlbmNlCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9wdGlvbnMKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAob3B0aW9ucyA9IHByZWxvYWRQcm9wc01hcC5nZXQoa2V5KSkgJiYgYWRvcHRQcmVsb2FkUHJvcHNGb3JTdHlsZXNoZWV0KGhyZWYsIG9wdGlvbnMpOwogICAgICAgICAgICAgICAgdmFyIGxpbmsgPSByZXNvdXJjZSA9IG93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGluayIpOwogICAgICAgICAgICAgICAgbWFya05vZGVBc0hvaXN0YWJsZShsaW5rKTsKICAgICAgICAgICAgICAgIHNldEluaXRpYWxQcm9wZXJ0aWVzKGxpbmssICJsaW5rIiwgaHJlZik7CiAgICAgICAgICAgICAgICBsaW5rLl9wID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgICAgIGxpbmsub25sb2FkID0gcmVzb2x2ZTsKICAgICAgICAgICAgICAgICAgbGluay5vbmVycm9yID0gcmVqZWN0OwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgc3RhdGUubG9hZGluZyB8PSBMb2FkZWQ7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgc3RhdGUubG9hZGluZyB8PSBFcnJvcmVkOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBzdGF0ZS5sb2FkaW5nIHw9IEluc2VydGVkOwogICAgICAgICAgICAgICAgaW5zZXJ0U3R5bGVzaGVldChyZXNvdXJjZSwgcHJlY2VkZW5jZSwgb3duZXJEb2N1bWVudCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJlc291cmNlID0gewogICAgICAgICAgICAgICAgdHlwZTogInN0eWxlc2hlZXQiLAogICAgICAgICAgICAgICAgaW5zdGFuY2U6IHJlc291cmNlLAogICAgICAgICAgICAgICAgY291bnQ6IDEsCiAgICAgICAgICAgICAgICBzdGF0ZQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgc3R5bGVzLnNldChrZXksIHJlc291cmNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgTTogZnVuY3Rpb24oc3JjLCBvcHRpb25zKSB7CiAgICAgICAgICBwcmV2aW91c0Rpc3BhdGNoZXIuTShzcmMsIG9wdGlvbnMpOwogICAgICAgICAgdmFyIG93bmVyRG9jdW1lbnQgPSBnbG9iYWxEb2N1bWVudDsKICAgICAgICAgIGlmIChvd25lckRvY3VtZW50ICYmIHNyYykgewogICAgICAgICAgICB2YXIgc2NyaXB0cyA9IGdldFJlc291cmNlc0Zyb21Sb290KG93bmVyRG9jdW1lbnQpLmhvaXN0YWJsZVNjcmlwdHMsIGtleSA9IGdldFNjcmlwdEtleShzcmMpLCByZXNvdXJjZSA9IHNjcmlwdHMuZ2V0KGtleSk7CiAgICAgICAgICAgIHJlc291cmNlIHx8IChyZXNvdXJjZSA9IG93bmVyRG9jdW1lbnQucXVlcnlTZWxlY3RvcigKICAgICAgICAgICAgICBnZXRTY3JpcHRTZWxlY3RvckZyb21LZXkoa2V5KQogICAgICAgICAgICApLCByZXNvdXJjZSB8fCAoc3JjID0gYXNzaWduKHsgc3JjLCBhc3luYzogdHJ1ZSwgdHlwZTogIm1vZHVsZSIgfSwgb3B0aW9ucyksIChvcHRpb25zID0gcHJlbG9hZFByb3BzTWFwLmdldChrZXkpKSAmJiBhZG9wdFByZWxvYWRQcm9wc0ZvclNjcmlwdChzcmMsIG9wdGlvbnMpLCByZXNvdXJjZSA9IG93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0IiksIG1hcmtOb2RlQXNIb2lzdGFibGUocmVzb3VyY2UpLCBzZXRJbml0aWFsUHJvcGVydGllcyhyZXNvdXJjZSwgImxpbmsiLCBzcmMpLCBvd25lckRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQocmVzb3VyY2UpKSwgcmVzb3VyY2UgPSB7CiAgICAgICAgICAgICAgdHlwZTogInNjcmlwdCIsCiAgICAgICAgICAgICAgaW5zdGFuY2U6IHJlc291cmNlLAogICAgICAgICAgICAgIGNvdW50OiAxLAogICAgICAgICAgICAgIHN0YXRlOiBudWxsCiAgICAgICAgICAgIH0sIHNjcmlwdHMuc2V0KGtleSwgcmVzb3VyY2UpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CiAgICAgIHZhciBnbG9iYWxEb2N1bWVudCA9ICJ1bmRlZmluZWQiID09PSB0eXBlb2YgZG9jdW1lbnQgPyBudWxsIDogZG9jdW1lbnQsIHRhZ0NhY2hlcyA9IG51bGwsIHN1c3BlbmRlZFN0YXRlID0gbnVsbCwgTEFTVF9QUkVDRURFTkNFID0gbnVsbCwgcHJlY2VkZW5jZXNCeVJvb3QgPSBudWxsLCBOb3RQZW5kaW5nVHJhbnNpdGlvbiA9IE5vdFBlbmRpbmcsIEhvc3RUcmFuc2l0aW9uQ29udGV4dCA9IHsKICAgICAgICAkJHR5cGVvZjogUkVBQ1RfQ09OVEVYVF9UWVBFLAogICAgICAgIFByb3ZpZGVyOiBudWxsLAogICAgICAgIENvbnN1bWVyOiBudWxsLAogICAgICAgIF9jdXJyZW50VmFsdWU6IE5vdFBlbmRpbmdUcmFuc2l0aW9uLAogICAgICAgIF9jdXJyZW50VmFsdWUyOiBOb3RQZW5kaW5nVHJhbnNpdGlvbiwKICAgICAgICBfdGhyZWFkQ291bnQ6IDAKICAgICAgfSwgYmFkZ2VGb3JtYXQgPSAiJWMlcyVjICIsIGJhZGdlU3R5bGUgPSAiYmFja2dyb3VuZDogI2U2ZTZlNjtiYWNrZ3JvdW5kOiBsaWdodC1kYXJrKHJnYmEoMCwwLDAsMC4xKSwgcmdiYSgyNTUsMjU1LDI1NSwwLjI1KSk7Y29sb3I6ICMwMDAwMDA7Y29sb3I6IGxpZ2h0LWRhcmsoIzAwMDAwMCwgI2ZmZmZmZik7Ym9yZGVyLXJhZGl1czogMnB4IiwgcmVzZXRTdHlsZSA9ICIiLCBwYWQgPSAiICIsIGJpbmQgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZDsKICAgICAgdmFyIGRpZFdhcm5BYm91dE5lc3RlZFVwZGF0ZXMgPSBmYWxzZTsKICAgICAgdmFyIG92ZXJyaWRlSG9va1N0YXRlID0gbnVsbCwgb3ZlcnJpZGVIb29rU3RhdGVEZWxldGVQYXRoID0gbnVsbCwgb3ZlcnJpZGVIb29rU3RhdGVSZW5hbWVQYXRoID0gbnVsbCwgb3ZlcnJpZGVQcm9wcyA9IG51bGwsIG92ZXJyaWRlUHJvcHNEZWxldGVQYXRoID0gbnVsbCwgb3ZlcnJpZGVQcm9wc1JlbmFtZVBhdGggPSBudWxsLCBzY2hlZHVsZVVwZGF0ZSA9IG51bGwsIHNldEVycm9ySGFuZGxlciA9IG51bGwsIHNldFN1c3BlbnNlSGFuZGxlciA9IG51bGw7CiAgICAgIG92ZXJyaWRlSG9va1N0YXRlID0gZnVuY3Rpb24oZmliZXIsIGlkLCBwYXRoLCB2YWx1ZSkgewogICAgICAgIGlkID0gZmluZEhvb2soZmliZXIsIGlkKTsKICAgICAgICBudWxsICE9PSBpZCAmJiAocGF0aCA9IGNvcHlXaXRoU2V0SW1wbChpZC5tZW1vaXplZFN0YXRlLCBwYXRoLCAwLCB2YWx1ZSksIGlkLm1lbW9pemVkU3RhdGUgPSBwYXRoLCBpZC5iYXNlU3RhdGUgPSBwYXRoLCBmaWJlci5tZW1vaXplZFByb3BzID0gYXNzaWduKHt9LCBmaWJlci5tZW1vaXplZFByb3BzKSwgcGF0aCA9IGVucXVldWVDb25jdXJyZW50UmVuZGVyRm9yTGFuZShmaWJlciwgMiksIG51bGwgIT09IHBhdGggJiYgc2NoZWR1bGVVcGRhdGVPbkZpYmVyKHBhdGgsIGZpYmVyLCAyKSk7CiAgICAgIH07CiAgICAgIG92ZXJyaWRlSG9va1N0YXRlRGVsZXRlUGF0aCA9IGZ1bmN0aW9uKGZpYmVyLCBpZCwgcGF0aCkgewogICAgICAgIGlkID0gZmluZEhvb2soZmliZXIsIGlkKTsKICAgICAgICBudWxsICE9PSBpZCAmJiAocGF0aCA9IGNvcHlXaXRoRGVsZXRlSW1wbChpZC5tZW1vaXplZFN0YXRlLCBwYXRoLCAwKSwgaWQubWVtb2l6ZWRTdGF0ZSA9IHBhdGgsIGlkLmJhc2VTdGF0ZSA9IHBhdGgsIGZpYmVyLm1lbW9pemVkUHJvcHMgPSBhc3NpZ24oe30sIGZpYmVyLm1lbW9pemVkUHJvcHMpLCBwYXRoID0gZW5xdWV1ZUNvbmN1cnJlbnRSZW5kZXJGb3JMYW5lKGZpYmVyLCAyKSwgbnVsbCAhPT0gcGF0aCAmJiBzY2hlZHVsZVVwZGF0ZU9uRmliZXIocGF0aCwgZmliZXIsIDIpKTsKICAgICAgfTsKICAgICAgb3ZlcnJpZGVIb29rU3RhdGVSZW5hbWVQYXRoID0gZnVuY3Rpb24oZmliZXIsIGlkLCBvbGRQYXRoLCBuZXdQYXRoKSB7CiAgICAgICAgaWQgPSBmaW5kSG9vayhmaWJlciwgaWQpOwogICAgICAgIG51bGwgIT09IGlkICYmIChvbGRQYXRoID0gY29weVdpdGhSZW5hbWUoaWQubWVtb2l6ZWRTdGF0ZSwgb2xkUGF0aCwgbmV3UGF0aCksIGlkLm1lbW9pemVkU3RhdGUgPSBvbGRQYXRoLCBpZC5iYXNlU3RhdGUgPSBvbGRQYXRoLCBmaWJlci5tZW1vaXplZFByb3BzID0gYXNzaWduKHt9LCBmaWJlci5tZW1vaXplZFByb3BzKSwgb2xkUGF0aCA9IGVucXVldWVDb25jdXJyZW50UmVuZGVyRm9yTGFuZShmaWJlciwgMiksIG51bGwgIT09IG9sZFBhdGggJiYgc2NoZWR1bGVVcGRhdGVPbkZpYmVyKG9sZFBhdGgsIGZpYmVyLCAyKSk7CiAgICAgIH07CiAgICAgIG92ZXJyaWRlUHJvcHMgPSBmdW5jdGlvbihmaWJlciwgcGF0aCwgdmFsdWUpIHsKICAgICAgICBmaWJlci5wZW5kaW5nUHJvcHMgPSBjb3B5V2l0aFNldEltcGwoZmliZXIubWVtb2l6ZWRQcm9wcywgcGF0aCwgMCwgdmFsdWUpOwogICAgICAgIGZpYmVyLmFsdGVybmF0ZSAmJiAoZmliZXIuYWx0ZXJuYXRlLnBlbmRpbmdQcm9wcyA9IGZpYmVyLnBlbmRpbmdQcm9wcyk7CiAgICAgICAgcGF0aCA9IGVucXVldWVDb25jdXJyZW50UmVuZGVyRm9yTGFuZShmaWJlciwgMik7CiAgICAgICAgbnVsbCAhPT0gcGF0aCAmJiBzY2hlZHVsZVVwZGF0ZU9uRmliZXIocGF0aCwgZmliZXIsIDIpOwogICAgICB9OwogICAgICBvdmVycmlkZVByb3BzRGVsZXRlUGF0aCA9IGZ1bmN0aW9uKGZpYmVyLCBwYXRoKSB7CiAgICAgICAgZmliZXIucGVuZGluZ1Byb3BzID0gY29weVdpdGhEZWxldGVJbXBsKGZpYmVyLm1lbW9pemVkUHJvcHMsIHBhdGgsIDApOwogICAgICAgIGZpYmVyLmFsdGVybmF0ZSAmJiAoZmliZXIuYWx0ZXJuYXRlLnBlbmRpbmdQcm9wcyA9IGZpYmVyLnBlbmRpbmdQcm9wcyk7CiAgICAgICAgcGF0aCA9IGVucXVldWVDb25jdXJyZW50UmVuZGVyRm9yTGFuZShmaWJlciwgMik7CiAgICAgICAgbnVsbCAhPT0gcGF0aCAmJiBzY2hlZHVsZVVwZGF0ZU9uRmliZXIocGF0aCwgZmliZXIsIDIpOwogICAgICB9OwogICAgICBvdmVycmlkZVByb3BzUmVuYW1lUGF0aCA9IGZ1bmN0aW9uKGZpYmVyLCBvbGRQYXRoLCBuZXdQYXRoKSB7CiAgICAgICAgZmliZXIucGVuZGluZ1Byb3BzID0gY29weVdpdGhSZW5hbWUoCiAgICAgICAgICBmaWJlci5tZW1vaXplZFByb3BzLAogICAgICAgICAgb2xkUGF0aCwKICAgICAgICAgIG5ld1BhdGgKICAgICAgICApOwogICAgICAgIGZpYmVyLmFsdGVybmF0ZSAmJiAoZmliZXIuYWx0ZXJuYXRlLnBlbmRpbmdQcm9wcyA9IGZpYmVyLnBlbmRpbmdQcm9wcyk7CiAgICAgICAgb2xkUGF0aCA9IGVucXVldWVDb25jdXJyZW50UmVuZGVyRm9yTGFuZShmaWJlciwgMik7CiAgICAgICAgbnVsbCAhPT0gb2xkUGF0aCAmJiBzY2hlZHVsZVVwZGF0ZU9uRmliZXIob2xkUGF0aCwgZmliZXIsIDIpOwogICAgICB9OwogICAgICBzY2hlZHVsZVVwZGF0ZSA9IGZ1bmN0aW9uKGZpYmVyKSB7CiAgICAgICAgdmFyIHJvb3QyID0gZW5xdWV1ZUNvbmN1cnJlbnRSZW5kZXJGb3JMYW5lKGZpYmVyLCAyKTsKICAgICAgICBudWxsICE9PSByb290MiAmJiBzY2hlZHVsZVVwZGF0ZU9uRmliZXIocm9vdDIsIGZpYmVyLCAyKTsKICAgICAgfTsKICAgICAgc2V0RXJyb3JIYW5kbGVyID0gZnVuY3Rpb24obmV3U2hvdWxkRXJyb3JJbXBsKSB7CiAgICAgICAgc2hvdWxkRXJyb3JJbXBsID0gbmV3U2hvdWxkRXJyb3JJbXBsOwogICAgICB9OwogICAgICBzZXRTdXNwZW5zZUhhbmRsZXIgPSBmdW5jdGlvbihuZXdTaG91bGRTdXNwZW5kSW1wbCkgewogICAgICAgIHNob3VsZFN1c3BlbmRJbXBsID0gbmV3U2hvdWxkU3VzcGVuZEltcGw7CiAgICAgIH07CiAgICAgIHZhciBfZW5hYmxlZCA9IHRydWUsIHJldHVybl90YXJnZXRJbnN0ID0gbnVsbCwgaGFzU2NoZWR1bGVkUmVwbGF5QXR0ZW1wdCA9IGZhbHNlLCBxdWV1ZWRGb2N1cyA9IG51bGwsIHF1ZXVlZERyYWcgPSBudWxsLCBxdWV1ZWRNb3VzZSA9IG51bGwsIHF1ZXVlZFBvaW50ZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSwgcXVldWVkUG9pbnRlckNhcHR1cmVzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSwgcXVldWVkRXhwbGljaXRIeWRyYXRpb25UYXJnZXRzID0gW10sIGRpc2NyZXRlUmVwbGF5YWJsZUV2ZW50cyA9ICJtb3VzZWRvd24gbW91c2V1cCB0b3VjaGNhbmNlbCB0b3VjaGVuZCB0b3VjaHN0YXJ0IGF1eGNsaWNrIGRibGNsaWNrIHBvaW50ZXJjYW5jZWwgcG9pbnRlcmRvd24gcG9pbnRlcnVwIGRyYWdlbmQgZHJhZ3N0YXJ0IGRyb3AgY29tcG9zaXRpb25lbmQgY29tcG9zaXRpb25zdGFydCBrZXlkb3duIGtleXByZXNzIGtleXVwIGlucHV0IHRleHRJbnB1dCBjb3B5IGN1dCBwYXN0ZSBjbGljayBjaGFuZ2UgY29udGV4dG1lbnUgcmVzZXQiLnNwbGl0KAogICAgICAgICIgIgogICAgICApLCBsYXN0U2NoZWR1bGVkUmVwbGF5UXVldWUgPSBudWxsOwogICAgICBSZWFjdERPTUh5ZHJhdGlvblJvb3QucHJvdG90eXBlLnJlbmRlciA9IFJlYWN0RE9NUm9vdC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oY2hpbGRyZW4pIHsKICAgICAgICB2YXIgcm9vdDIgPSB0aGlzLl9pbnRlcm5hbFJvb3Q7CiAgICAgICAgaWYgKG51bGwgPT09IHJvb3QyKSB0aHJvdyBFcnJvcigiQ2Fubm90IHVwZGF0ZSBhbiB1bm1vdW50ZWQgcm9vdC4iKTsKICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50czsKICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgYXJnc1sxXSA/IGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiZG9lcyBub3Qgc3VwcG9ydCB0aGUgc2Vjb25kIGNhbGxiYWNrIGFyZ3VtZW50LiBUbyBleGVjdXRlIGEgc2lkZSBlZmZlY3QgYWZ0ZXIgcmVuZGVyaW5nLCBkZWNsYXJlIGl0IGluIGEgY29tcG9uZW50IGJvZHkgd2l0aCB1c2VFZmZlY3QoKS4iCiAgICAgICAgKSA6IGlzVmFsaWRDb250YWluZXIoYXJnc1sxXSkgPyBjb25zb2xlLmVycm9yKAogICAgICAgICAgIllvdSBwYXNzZWQgYSBjb250YWluZXIgdG8gdGhlIHNlY29uZCBhcmd1bWVudCBvZiByb290LnJlbmRlciguLi4pLiBZb3UgZG9uJ3QgbmVlZCB0byBwYXNzIGl0IGFnYWluIHNpbmNlIHlvdSBhbHJlYWR5IHBhc3NlZCBpdCB0byBjcmVhdGUgdGhlIHJvb3QuIgogICAgICAgICkgOiAidW5kZWZpbmVkIiAhPT0gdHlwZW9mIGFyZ3NbMV0gJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICJZb3UgcGFzc2VkIGEgc2Vjb25kIGFyZ3VtZW50IHRvIHJvb3QucmVuZGVyKC4uLikgYnV0IGl0IG9ubHkgYWNjZXB0cyBvbmUgYXJndW1lbnQuIgogICAgICAgICk7CiAgICAgICAgYXJncyA9IGNoaWxkcmVuOwogICAgICAgIHZhciBjdXJyZW50MiA9IHJvb3QyLmN1cnJlbnQsIGxhbmUgPSByZXF1ZXN0VXBkYXRlTGFuZShjdXJyZW50Mik7CiAgICAgICAgdXBkYXRlQ29udGFpbmVySW1wbChjdXJyZW50MiwgbGFuZSwgYXJncywgcm9vdDIsIG51bGwsIG51bGwpOwogICAgICB9OwogICAgICBSZWFjdERPTUh5ZHJhdGlvblJvb3QucHJvdG90eXBlLnVubW91bnQgPSBSZWFjdERPTVJvb3QucHJvdG90eXBlLnVubW91bnQgPSBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50czsKICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgYXJnc1swXSAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgImRvZXMgbm90IHN1cHBvcnQgYSBjYWxsYmFjayBhcmd1bWVudC4gVG8gZXhlY3V0ZSBhIHNpZGUgZWZmZWN0IGFmdGVyIHJlbmRlcmluZywgZGVjbGFyZSBpdCBpbiBhIGNvbXBvbmVudCBib2R5IHdpdGggdXNlRWZmZWN0KCkuIgogICAgICAgICk7CiAgICAgICAgYXJncyA9IHRoaXMuX2ludGVybmFsUm9vdDsKICAgICAgICBpZiAobnVsbCAhPT0gYXJncykgewogICAgICAgICAgdGhpcy5faW50ZXJuYWxSb290ID0gbnVsbDsKICAgICAgICAgIHZhciBjb250YWluZXIgPSBhcmdzLmNvbnRhaW5lckluZm87CiAgICAgICAgICAoZXhlY3V0aW9uQ29udGV4dCAmIChSZW5kZXJDb250ZXh0IHwgQ29tbWl0Q29udGV4dCkpICE9PSBOb0NvbnRleHQgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIkF0dGVtcHRlZCB0byBzeW5jaHJvbm91c2x5IHVubW91bnQgYSByb290IHdoaWxlIFJlYWN0IHdhcyBhbHJlYWR5IHJlbmRlcmluZy4gUmVhY3QgY2Fubm90IGZpbmlzaCB1bm1vdW50aW5nIHRoZSByb290IHVudGlsIHRoZSBjdXJyZW50IHJlbmRlciBoYXMgY29tcGxldGVkLCB3aGljaCBtYXkgbGVhZCB0byBhIHJhY2UgY29uZGl0aW9uLiIKICAgICAgICAgICk7CiAgICAgICAgICB1cGRhdGVDb250YWluZXJJbXBsKGFyZ3MuY3VycmVudCwgMiwgbnVsbCwgYXJncywgbnVsbCwgbnVsbCk7CiAgICAgICAgICBmbHVzaFN5bmNXb3JrJDEoKTsKICAgICAgICAgIGNvbnRhaW5lcltpbnRlcm5hbENvbnRhaW5lckluc3RhbmNlS2V5XSA9IG51bGw7CiAgICAgICAgfQogICAgICB9OwogICAgICBSZWFjdERPTUh5ZHJhdGlvblJvb3QucHJvdG90eXBlLnVuc3RhYmxlX3NjaGVkdWxlSHlkcmF0aW9uID0gZnVuY3Rpb24odGFyZ2V0KSB7CiAgICAgICAgaWYgKHRhcmdldCkgewogICAgICAgICAgdmFyIHVwZGF0ZVByaW9yaXR5ID0gcmVzb2x2ZVVwZGF0ZVByaW9yaXR5KCk7CiAgICAgICAgICB0YXJnZXQgPSB7IGJsb2NrZWRPbjogbnVsbCwgdGFyZ2V0LCBwcmlvcml0eTogdXBkYXRlUHJpb3JpdHkgfTsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWVkRXhwbGljaXRIeWRyYXRpb25UYXJnZXRzLmxlbmd0aCAmJiAwICE9PSB1cGRhdGVQcmlvcml0eSAmJiB1cGRhdGVQcmlvcml0eSA8IHF1ZXVlZEV4cGxpY2l0SHlkcmF0aW9uVGFyZ2V0c1tpXS5wcmlvcml0eTsgaSsrKSA7CiAgICAgICAgICBxdWV1ZWRFeHBsaWNpdEh5ZHJhdGlvblRhcmdldHMuc3BsaWNlKGksIDAsIHRhcmdldCk7CiAgICAgICAgICAwID09PSBpICYmIGF0dGVtcHRFeHBsaWNpdEh5ZHJhdGlvblRhcmdldCh0YXJnZXQpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgKGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBpc29tb3JwaGljUmVhY3RQYWNrYWdlVmVyc2lvbiA9IFJlYWN0LnZlcnNpb247CiAgICAgICAgaWYgKCIxOS4xLjEiICE9PSBpc29tb3JwaGljUmVhY3RQYWNrYWdlVmVyc2lvbikKICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAnSW5jb21wYXRpYmxlIFJlYWN0IHZlcnNpb25zOiBUaGUgInJlYWN0IiBhbmQgInJlYWN0LWRvbSIgcGFja2FnZXMgbXVzdCBoYXZlIHRoZSBleGFjdCBzYW1lIHZlcnNpb24uIEluc3RlYWQgZ290OlxuICAtIHJlYWN0OiAgICAgICcgKyAoaXNvbW9ycGhpY1JlYWN0UGFja2FnZVZlcnNpb24gKyAiXG4gIC0gcmVhY3QtZG9tOiAgMTkuMS4xXG5MZWFybiBtb3JlOiBodHRwczovL3JlYWN0LmRldi93YXJuaW5ncy92ZXJzaW9uLW1pc21hdGNoIikKICAgICAgICAgICk7CiAgICAgIH0pKCk7CiAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBNYXAgJiYgbnVsbCAhPSBNYXAucHJvdG90eXBlICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBNYXAucHJvdG90eXBlLmZvckVhY2ggJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIFNldCAmJiBudWxsICE9IFNldC5wcm90b3R5cGUgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIFNldC5wcm90b3R5cGUuY2xlYXIgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIFNldC5wcm90b3R5cGUuZm9yRWFjaCB8fCBjb25zb2xlLmVycm9yKAogICAgICAgICJSZWFjdCBkZXBlbmRzIG9uIE1hcCBhbmQgU2V0IGJ1aWx0LWluIHR5cGVzLiBNYWtlIHN1cmUgdGhhdCB5b3UgbG9hZCBhIHBvbHlmaWxsIGluIG9sZGVyIGJyb3dzZXJzLiBodHRwczovL3JlYWN0LmRldi9saW5rL3JlYWN0LXBvbHlmaWxscyIKICAgICAgKTsKICAgICAgUmVhY3RET01TaGFyZWRJbnRlcm5hbHMuZmluZERPTU5vZGUgPSBmdW5jdGlvbihjb21wb25lbnRPckVsZW1lbnQpIHsKICAgICAgICB2YXIgZmliZXIgPSBjb21wb25lbnRPckVsZW1lbnQuX3JlYWN0SW50ZXJuYWxzOwogICAgICAgIGlmICh2b2lkIDAgPT09IGZpYmVyKSB7CiAgICAgICAgICBpZiAoImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGNvbXBvbmVudE9yRWxlbWVudC5yZW5kZXIpCiAgICAgICAgICAgIHRocm93IEVycm9yKCJVbmFibGUgdG8gZmluZCBub2RlIG9uIGFuIHVubW91bnRlZCBjb21wb25lbnQuIik7CiAgICAgICAgICBjb21wb25lbnRPckVsZW1lbnQgPSBPYmplY3Qua2V5cyhjb21wb25lbnRPckVsZW1lbnQpLmpvaW4oIiwiKTsKICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAiQXJndW1lbnQgYXBwZWFycyB0byBub3QgYmUgYSBSZWFjdENvbXBvbmVudC4gS2V5czogIiArIGNvbXBvbmVudE9yRWxlbWVudAogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgY29tcG9uZW50T3JFbGVtZW50ID0gZmluZEN1cnJlbnRGaWJlclVzaW5nU2xvd1BhdGgoZmliZXIpOwogICAgICAgIGNvbXBvbmVudE9yRWxlbWVudCA9IG51bGwgIT09IGNvbXBvbmVudE9yRWxlbWVudCA/IGZpbmRDdXJyZW50SG9zdEZpYmVySW1wbChjb21wb25lbnRPckVsZW1lbnQpIDogbnVsbDsKICAgICAgICBjb21wb25lbnRPckVsZW1lbnQgPSBudWxsID09PSBjb21wb25lbnRPckVsZW1lbnQgPyBudWxsIDogY29tcG9uZW50T3JFbGVtZW50LnN0YXRlTm9kZTsKICAgICAgICByZXR1cm4gY29tcG9uZW50T3JFbGVtZW50OwogICAgICB9OwogICAgICBpZiAoIShmdW5jdGlvbigpIHsKICAgICAgICB2YXIgaW50ZXJuYWxzID0gewogICAgICAgICAgYnVuZGxlVHlwZTogMSwKICAgICAgICAgIHZlcnNpb246ICIxOS4xLjEiLAogICAgICAgICAgcmVuZGVyZXJQYWNrYWdlTmFtZTogInJlYWN0LWRvbSIsCiAgICAgICAgICBjdXJyZW50RGlzcGF0Y2hlclJlZjogUmVhY3RTaGFyZWRJbnRlcm5hbHMsCiAgICAgICAgICByZWNvbmNpbGVyVmVyc2lvbjogIjE5LjEuMSIKICAgICAgICB9OwogICAgICAgIGludGVybmFscy5vdmVycmlkZUhvb2tTdGF0ZSA9IG92ZXJyaWRlSG9va1N0YXRlOwogICAgICAgIGludGVybmFscy5vdmVycmlkZUhvb2tTdGF0ZURlbGV0ZVBhdGggPSBvdmVycmlkZUhvb2tTdGF0ZURlbGV0ZVBhdGg7CiAgICAgICAgaW50ZXJuYWxzLm92ZXJyaWRlSG9va1N0YXRlUmVuYW1lUGF0aCA9IG92ZXJyaWRlSG9va1N0YXRlUmVuYW1lUGF0aDsKICAgICAgICBpbnRlcm5hbHMub3ZlcnJpZGVQcm9wcyA9IG92ZXJyaWRlUHJvcHM7CiAgICAgICAgaW50ZXJuYWxzLm92ZXJyaWRlUHJvcHNEZWxldGVQYXRoID0gb3ZlcnJpZGVQcm9wc0RlbGV0ZVBhdGg7CiAgICAgICAgaW50ZXJuYWxzLm92ZXJyaWRlUHJvcHNSZW5hbWVQYXRoID0gb3ZlcnJpZGVQcm9wc1JlbmFtZVBhdGg7CiAgICAgICAgaW50ZXJuYWxzLnNjaGVkdWxlVXBkYXRlID0gc2NoZWR1bGVVcGRhdGU7CiAgICAgICAgaW50ZXJuYWxzLnNldEVycm9ySGFuZGxlciA9IHNldEVycm9ySGFuZGxlcjsKICAgICAgICBpbnRlcm5hbHMuc2V0U3VzcGVuc2VIYW5kbGVyID0gc2V0U3VzcGVuc2VIYW5kbGVyOwogICAgICAgIGludGVybmFscy5zY2hlZHVsZVJlZnJlc2ggPSBzY2hlZHVsZVJlZnJlc2g7CiAgICAgICAgaW50ZXJuYWxzLnNjaGVkdWxlUm9vdCA9IHNjaGVkdWxlUm9vdDsKICAgICAgICBpbnRlcm5hbHMuc2V0UmVmcmVzaEhhbmRsZXIgPSBzZXRSZWZyZXNoSGFuZGxlcjsKICAgICAgICBpbnRlcm5hbHMuZ2V0Q3VycmVudEZpYmVyID0gZ2V0Q3VycmVudEZpYmVyRm9yRGV2VG9vbHM7CiAgICAgICAgaW50ZXJuYWxzLmdldExhbmVMYWJlbE1hcCA9IGdldExhbmVMYWJlbE1hcDsKICAgICAgICBpbnRlcm5hbHMuaW5qZWN0UHJvZmlsaW5nSG9va3MgPSBpbmplY3RQcm9maWxpbmdIb29rczsKICAgICAgICByZXR1cm4gaW5qZWN0SW50ZXJuYWxzKGludGVybmFscyk7CiAgICAgIH0pKCkgJiYgY2FuVXNlRE9NICYmIHdpbmRvdy50b3AgPT09IHdpbmRvdy5zZWxmICYmICgtMSA8IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiQ2hyb21lIikgJiYgLTEgPT09IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiRWRnZSIpIHx8IC0xIDwgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJGaXJlZm94IikpKSB7CiAgICAgICAgdmFyIHByb3RvY29sID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sOwogICAgICAgIC9eKGh0dHBzP3xmaWxlKTokLy50ZXN0KHByb3RvY29sKSAmJiBjb25zb2xlLmluZm8oCiAgICAgICAgICAiJWNEb3dubG9hZCB0aGUgUmVhY3QgRGV2VG9vbHMgZm9yIGEgYmV0dGVyIGRldmVsb3BtZW50IGV4cGVyaWVuY2U6IGh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvcmVhY3QtZGV2dG9vbHMiICsgKCJmaWxlOiIgPT09IHByb3RvY29sID8gIlxuWW91IG1pZ2h0IG5lZWQgdG8gdXNlIGEgbG9jYWwgSFRUUCBzZXJ2ZXIgKGluc3RlYWQgb2YgZmlsZTovLyk6IGh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvcmVhY3QtZGV2dG9vbHMtZmFxIiA6ICIiKSwKICAgICAgICAgICJmb250LXdlaWdodDpib2xkIgogICAgICAgICk7CiAgICAgIH0KICAgICAgZXhwb3J0cy5jcmVhdGVSb290ID0gZnVuY3Rpb24oY29udGFpbmVyLCBvcHRpb25zKSB7CiAgICAgICAgaWYgKCFpc1ZhbGlkQ29udGFpbmVyKGNvbnRhaW5lcikpCiAgICAgICAgICB0aHJvdyBFcnJvcigiVGFyZ2V0IGNvbnRhaW5lciBpcyBub3QgYSBET00gZWxlbWVudC4iKTsKICAgICAgICB3YXJuSWZSZWFjdERPTUNvbnRhaW5lckluREVWKGNvbnRhaW5lcik7CiAgICAgICAgdmFyIGlzU3RyaWN0TW9kZSA9IGZhbHNlLCBpZGVudGlmaWVyUHJlZml4ID0gIiIsIG9uVW5jYXVnaHRFcnJvciA9IGRlZmF1bHRPblVuY2F1Z2h0RXJyb3IsIG9uQ2F1Z2h0RXJyb3IgPSBkZWZhdWx0T25DYXVnaHRFcnJvciwgb25SZWNvdmVyYWJsZUVycm9yID0gZGVmYXVsdE9uUmVjb3ZlcmFibGVFcnJvciwgdHJhbnNpdGlvbkNhbGxiYWNrcyA9IG51bGw7CiAgICAgICAgbnVsbCAhPT0gb3B0aW9ucyAmJiB2b2lkIDAgIT09IG9wdGlvbnMgJiYgKG9wdGlvbnMuaHlkcmF0ZSA/IGNvbnNvbGUud2FybigKICAgICAgICAgICJoeWRyYXRlIHRocm91Z2ggY3JlYXRlUm9vdCBpcyBkZXByZWNhdGVkLiBVc2UgUmVhY3RET01DbGllbnQuaHlkcmF0ZVJvb3QoY29udGFpbmVyLCA8QXBwIC8+KSBpbnN0ZWFkLiIKICAgICAgICApIDogIm9iamVjdCIgPT09IHR5cGVvZiBvcHRpb25zICYmIG51bGwgIT09IG9wdGlvbnMgJiYgb3B0aW9ucy4kJHR5cGVvZiA9PT0gUkVBQ1RfRUxFTUVOVF9UWVBFICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiWW91IHBhc3NlZCBhIEpTWCBlbGVtZW50IHRvIGNyZWF0ZVJvb3QuIFlvdSBwcm9iYWJseSBtZWFudCB0byBjYWxsIHJvb3QucmVuZGVyIGluc3RlYWQuIEV4YW1wbGUgdXNhZ2U6XG5cbiAgbGV0IHJvb3QgPSBjcmVhdGVSb290KGRvbUNvbnRhaW5lcik7XG4gIHJvb3QucmVuZGVyKDxBcHAgLz4pOyIKICAgICAgICApLCB0cnVlID09PSBvcHRpb25zLnVuc3RhYmxlX3N0cmljdE1vZGUgJiYgKGlzU3RyaWN0TW9kZSA9IHRydWUpLCB2b2lkIDAgIT09IG9wdGlvbnMuaWRlbnRpZmllclByZWZpeCAmJiAoaWRlbnRpZmllclByZWZpeCA9IG9wdGlvbnMuaWRlbnRpZmllclByZWZpeCksIHZvaWQgMCAhPT0gb3B0aW9ucy5vblVuY2F1Z2h0RXJyb3IgJiYgKG9uVW5jYXVnaHRFcnJvciA9IG9wdGlvbnMub25VbmNhdWdodEVycm9yKSwgdm9pZCAwICE9PSBvcHRpb25zLm9uQ2F1Z2h0RXJyb3IgJiYgKG9uQ2F1Z2h0RXJyb3IgPSBvcHRpb25zLm9uQ2F1Z2h0RXJyb3IpLCB2b2lkIDAgIT09IG9wdGlvbnMub25SZWNvdmVyYWJsZUVycm9yICYmIChvblJlY292ZXJhYmxlRXJyb3IgPSBvcHRpb25zLm9uUmVjb3ZlcmFibGVFcnJvciksIHZvaWQgMCAhPT0gb3B0aW9ucy51bnN0YWJsZV90cmFuc2l0aW9uQ2FsbGJhY2tzICYmICh0cmFuc2l0aW9uQ2FsbGJhY2tzID0gb3B0aW9ucy51bnN0YWJsZV90cmFuc2l0aW9uQ2FsbGJhY2tzKSk7CiAgICAgICAgb3B0aW9ucyA9IGNyZWF0ZUZpYmVyUm9vdCgKICAgICAgICAgIGNvbnRhaW5lciwKICAgICAgICAgIDEsCiAgICAgICAgICBmYWxzZSwKICAgICAgICAgIG51bGwsCiAgICAgICAgICBudWxsLAogICAgICAgICAgaXNTdHJpY3RNb2RlLAogICAgICAgICAgaWRlbnRpZmllclByZWZpeCwKICAgICAgICAgIG9uVW5jYXVnaHRFcnJvciwKICAgICAgICAgIG9uQ2F1Z2h0RXJyb3IsCiAgICAgICAgICBvblJlY292ZXJhYmxlRXJyb3IsCiAgICAgICAgICB0cmFuc2l0aW9uQ2FsbGJhY2tzLAogICAgICAgICAgbnVsbAogICAgICAgICk7CiAgICAgICAgY29udGFpbmVyW2ludGVybmFsQ29udGFpbmVySW5zdGFuY2VLZXldID0gb3B0aW9ucy5jdXJyZW50OwogICAgICAgIGxpc3RlblRvQWxsU3VwcG9ydGVkRXZlbnRzKGNvbnRhaW5lcik7CiAgICAgICAgcmV0dXJuIG5ldyBSZWFjdERPTVJvb3Qob3B0aW9ucyk7CiAgICAgIH07CiAgICAgIGV4cG9ydHMuaHlkcmF0ZVJvb3QgPSBmdW5jdGlvbihjb250YWluZXIsIGluaXRpYWxDaGlsZHJlbiwgb3B0aW9ucykgewogICAgICAgIGlmICghaXNWYWxpZENvbnRhaW5lcihjb250YWluZXIpKQogICAgICAgICAgdGhyb3cgRXJyb3IoIlRhcmdldCBjb250YWluZXIgaXMgbm90IGEgRE9NIGVsZW1lbnQuIik7CiAgICAgICAgd2FybklmUmVhY3RET01Db250YWluZXJJbkRFVihjb250YWluZXIpOwogICAgICAgIHZvaWQgMCA9PT0gaW5pdGlhbENoaWxkcmVuICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiTXVzdCBwcm92aWRlIGluaXRpYWwgY2hpbGRyZW4gYXMgc2Vjb25kIGFyZ3VtZW50IHRvIGh5ZHJhdGVSb290LiBFeGFtcGxlIHVzYWdlOiBoeWRyYXRlUm9vdChkb21Db250YWluZXIsIDxBcHAgLz4pIgogICAgICAgICk7CiAgICAgICAgdmFyIGlzU3RyaWN0TW9kZSA9IGZhbHNlLCBpZGVudGlmaWVyUHJlZml4ID0gIiIsIG9uVW5jYXVnaHRFcnJvciA9IGRlZmF1bHRPblVuY2F1Z2h0RXJyb3IsIG9uQ2F1Z2h0RXJyb3IgPSBkZWZhdWx0T25DYXVnaHRFcnJvciwgb25SZWNvdmVyYWJsZUVycm9yID0gZGVmYXVsdE9uUmVjb3ZlcmFibGVFcnJvciwgdHJhbnNpdGlvbkNhbGxiYWNrcyA9IG51bGwsIGZvcm1TdGF0ZSA9IG51bGw7CiAgICAgICAgbnVsbCAhPT0gb3B0aW9ucyAmJiB2b2lkIDAgIT09IG9wdGlvbnMgJiYgKHRydWUgPT09IG9wdGlvbnMudW5zdGFibGVfc3RyaWN0TW9kZSAmJiAoaXNTdHJpY3RNb2RlID0gdHJ1ZSksIHZvaWQgMCAhPT0gb3B0aW9ucy5pZGVudGlmaWVyUHJlZml4ICYmIChpZGVudGlmaWVyUHJlZml4ID0gb3B0aW9ucy5pZGVudGlmaWVyUHJlZml4KSwgdm9pZCAwICE9PSBvcHRpb25zLm9uVW5jYXVnaHRFcnJvciAmJiAob25VbmNhdWdodEVycm9yID0gb3B0aW9ucy5vblVuY2F1Z2h0RXJyb3IpLCB2b2lkIDAgIT09IG9wdGlvbnMub25DYXVnaHRFcnJvciAmJiAob25DYXVnaHRFcnJvciA9IG9wdGlvbnMub25DYXVnaHRFcnJvciksIHZvaWQgMCAhPT0gb3B0aW9ucy5vblJlY292ZXJhYmxlRXJyb3IgJiYgKG9uUmVjb3ZlcmFibGVFcnJvciA9IG9wdGlvbnMub25SZWNvdmVyYWJsZUVycm9yKSwgdm9pZCAwICE9PSBvcHRpb25zLnVuc3RhYmxlX3RyYW5zaXRpb25DYWxsYmFja3MgJiYgKHRyYW5zaXRpb25DYWxsYmFja3MgPSBvcHRpb25zLnVuc3RhYmxlX3RyYW5zaXRpb25DYWxsYmFja3MpLCB2b2lkIDAgIT09IG9wdGlvbnMuZm9ybVN0YXRlICYmIChmb3JtU3RhdGUgPSBvcHRpb25zLmZvcm1TdGF0ZSkpOwogICAgICAgIGluaXRpYWxDaGlsZHJlbiA9IGNyZWF0ZUZpYmVyUm9vdCgKICAgICAgICAgIGNvbnRhaW5lciwKICAgICAgICAgIDEsCiAgICAgICAgICB0cnVlLAogICAgICAgICAgaW5pdGlhbENoaWxkcmVuLAogICAgICAgICAgbnVsbCAhPSBvcHRpb25zID8gb3B0aW9ucyA6IG51bGwsCiAgICAgICAgICBpc1N0cmljdE1vZGUsCiAgICAgICAgICBpZGVudGlmaWVyUHJlZml4LAogICAgICAgICAgb25VbmNhdWdodEVycm9yLAogICAgICAgICAgb25DYXVnaHRFcnJvciwKICAgICAgICAgIG9uUmVjb3ZlcmFibGVFcnJvciwKICAgICAgICAgIHRyYW5zaXRpb25DYWxsYmFja3MsCiAgICAgICAgICBmb3JtU3RhdGUKICAgICAgICApOwogICAgICAgIGluaXRpYWxDaGlsZHJlbi5jb250ZXh0ID0gZ2V0Q29udGV4dEZvclN1YnRyZWUobnVsbCk7CiAgICAgICAgb3B0aW9ucyA9IGluaXRpYWxDaGlsZHJlbi5jdXJyZW50OwogICAgICAgIGlzU3RyaWN0TW9kZSA9IHJlcXVlc3RVcGRhdGVMYW5lKG9wdGlvbnMpOwogICAgICAgIGlzU3RyaWN0TW9kZSA9IGdldEJ1bXBlZExhbmVGb3JIeWRyYXRpb25CeUxhbmUoaXNTdHJpY3RNb2RlKTsKICAgICAgICBpZGVudGlmaWVyUHJlZml4ID0gY3JlYXRlVXBkYXRlKGlzU3RyaWN0TW9kZSk7CiAgICAgICAgaWRlbnRpZmllclByZWZpeC5jYWxsYmFjayA9IG51bGw7CiAgICAgICAgZW5xdWV1ZVVwZGF0ZShvcHRpb25zLCBpZGVudGlmaWVyUHJlZml4LCBpc1N0cmljdE1vZGUpOwogICAgICAgIG9wdGlvbnMgPSBpc1N0cmljdE1vZGU7CiAgICAgICAgaW5pdGlhbENoaWxkcmVuLmN1cnJlbnQubGFuZXMgPSBvcHRpb25zOwogICAgICAgIG1hcmtSb290VXBkYXRlZCQxKGluaXRpYWxDaGlsZHJlbiwgb3B0aW9ucyk7CiAgICAgICAgZW5zdXJlUm9vdElzU2NoZWR1bGVkKGluaXRpYWxDaGlsZHJlbik7CiAgICAgICAgY29udGFpbmVyW2ludGVybmFsQ29udGFpbmVySW5zdGFuY2VLZXldID0gaW5pdGlhbENoaWxkcmVuLmN1cnJlbnQ7CiAgICAgICAgbGlzdGVuVG9BbGxTdXBwb3J0ZWRFdmVudHMoY29udGFpbmVyKTsKICAgICAgICByZXR1cm4gbmV3IFJlYWN0RE9NSHlkcmF0aW9uUm9vdChpbml0aWFsQ2hpbGRyZW4pOwogICAgICB9OwogICAgICBleHBvcnRzLnZlcnNpb24gPSAiMTkuMS4xIjsKICAgICAgInVuZGVmaW5lZCIgIT09IHR5cGVvZiBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18gJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5yZWdpc3RlckludGVybmFsTW9kdWxlU3RvcCAmJiBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18ucmVnaXN0ZXJJbnRlcm5hbE1vZHVsZVN0b3AoRXJyb3IoKSk7CiAgICB9KSgpOwogIH0KfSk7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtZG9tL2NsaWVudC5qcwp2YXIgcmVxdWlyZV9jbGllbnQgPSBfX2NvbW1vbkpTKHsKICAiLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWRvbS9jbGllbnQuanMiKGV4cG9ydHMsIG1vZHVsZSkgewogICAgaWYgKGZhbHNlKSB7CiAgICAgIGNoZWNrRENFKCk7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gbnVsbDsKICAgIH0gZWxzZSB7CiAgICAgIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZV9yZWFjdF9kb21fY2xpZW50X2RldmVsb3BtZW50KCk7CiAgICB9CiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgcmVxdWlyZV9jbGllbnQoKTsKLyohIEJ1bmRsZWQgbGljZW5zZSBpbmZvcm1hdGlvbjoKCnNjaGVkdWxlci9janMvc2NoZWR1bGVyLmRldmVsb3BtZW50LmpzOgogICgqKgogICAqIEBsaWNlbnNlIFJlYWN0CiAgICogc2NoZWR1bGVyLmRldmVsb3BtZW50LmpzCiAgICoKICAgKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLgogICAqCiAgICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlCiAgICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogICAqKQoKcmVhY3QtZG9tL2Nqcy9yZWFjdC1kb20tY2xpZW50LmRldmVsb3BtZW50LmpzOgogICgqKgogICAqIEBsaWNlbnNlIFJlYWN0CiAgICogcmVhY3QtZG9tLWNsaWVudC5kZXZlbG9wbWVudC5qcwogICAqCiAgICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy4KICAgKgogICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZQogICAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4KICAgKikKKi8KLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhY3QtZG9tX2NsaWVudC5qcy5tYXAK",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 902094
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 20,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.379Z",
        "time": 11,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/@fs/Users/murat.ozcan/seon/playwright-utils/node_modules/vite/dist/client/env.mjs",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/@vite/client"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"28b-AmguK4CI08a+E8xggbA6UM/iRRI\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "3962"
            }
          ],
          "content": {
            "size": 3962,
            "mimeType": "text/javascript",
            "text": "Y29uc3QgY29udGV4dCA9ICgoKSA9PiB7CiAgaWYgKHR5cGVvZiBnbG9iYWxUaGlzICE9PSAidW5kZWZpbmVkIikgewogICAgcmV0dXJuIGdsb2JhbFRoaXM7CiAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIpIHsKICAgIHJldHVybiBzZWxmOwogIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIpIHsKICAgIHJldHVybiB3aW5kb3c7CiAgfSBlbHNlIHsKICAgIHJldHVybiBGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpOwogIH0KfSkoKTsKY29uc3QgZGVmaW5lcyA9IHsicHJvY2Vzcy5lbnYiOiB7fX07Ck9iamVjdC5rZXlzKGRlZmluZXMpLmZvckVhY2goKGtleSkgPT4gewogIGNvbnN0IHNlZ21lbnRzID0ga2V5LnNwbGl0KCIuIik7CiAgbGV0IHRhcmdldCA9IGNvbnRleHQ7CiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkrKykgewogICAgY29uc3Qgc2VnbWVudCA9IHNlZ21lbnRzW2ldOwogICAgaWYgKGkgPT09IHNlZ21lbnRzLmxlbmd0aCAtIDEpIHsKICAgICAgdGFyZ2V0W3NlZ21lbnRdID0gZGVmaW5lc1trZXldOwogICAgfSBlbHNlIHsKICAgICAgdGFyZ2V0ID0gdGFyZ2V0W3NlZ21lbnRdIHx8ICh0YXJnZXRbc2VnbWVudF0gPSB7fSk7CiAgICB9CiAgfQp9KTsKCi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnpiM1Z5WTJWeklqcGJJbVZ1ZGk1dGFuTWlYU3dpYzI5MWNtTmxjME52Ym5SbGJuUWlPbHNpWTI5dWMzUWdZMjl1ZEdWNGRDQTlJQ2dvS1NBOVBpQjdYRzRnSUdsbUlDaDBlWEJsYjJZZ1oyeHZZbUZzVkdocGN5QWhQVDBnWENKMWJtUmxabWx1WldSY0lpa2dlMXh1SUNBZ0lISmxkSFZ5YmlCbmJHOWlZV3hVYUdsek8xeHVJQ0I5SUdWc2MyVWdhV1lnS0hSNWNHVnZaaUJ6Wld4bUlDRTlQU0JjSW5WdVpHVm1hVzVsWkZ3aUtTQjdYRzRnSUNBZ2NtVjBkWEp1SUhObGJHWTdYRzRnSUgwZ1pXeHpaU0JwWmlBb2RIbHdaVzltSUhkcGJtUnZkeUFoUFQwZ1hDSjFibVJsWm1sdVpXUmNJaWtnZTF4dUlDQWdJSEpsZEhWeWJpQjNhVzVrYjNjN1hHNGdJSDBnWld4elpTQjdYRzRnSUNBZ2NtVjBkWEp1SUVaMWJtTjBhVzl1S0Z3aWNtVjBkWEp1SUhSb2FYTmNJaWtvS1R0Y2JpQWdmVnh1ZlNrb0tUdGNibU52Ym5OMElHUmxabWx1WlhNZ1BTQjdYQ0p3Y205alpYTnpMbVZ1ZGx3aU9pQjdmWDA3WEc1UFltcGxZM1F1YTJWNWN5aGtaV1pwYm1WektTNW1iM0pGWVdOb0tDaHJaWGtwSUQwK0lIdGNiaUFnWTI5dWMzUWdjMlZuYldWdWRITWdQU0JyWlhrdWMzQnNhWFFvWENJdVhDSXBPMXh1SUNCc1pYUWdkR0Z5WjJWMElEMGdZMjl1ZEdWNGREdGNiaUFnWm05eUlDaHNaWFFnYVNBOUlEQTdJR2tnUENCelpXZHRaVzUwY3k1c1pXNW5kR2c3SUdrckt5a2dlMXh1SUNBZ0lHTnZibk4wSUhObFoyMWxiblFnUFNCelpXZHRaVzUwYzF0cFhUdGNiaUFnSUNCcFppQW9hU0E5UFQwZ2MyVm5iV1Z1ZEhNdWJHVnVaM1JvSUMwZ01Ta2dlMXh1SUNBZ0lDQWdkR0Z5WjJWMFczTmxaMjFsYm5SZElEMGdaR1ZtYVc1bGMxdHJaWGxkTzF4dUlDQWdJSDBnWld4elpTQjdYRzRnSUNBZ0lDQjBZWEpuWlhRZ1BTQjBZWEpuWlhSYmMyVm5iV1Z1ZEYwZ2ZId2dLSFJoY21kbGRGdHpaV2R0Wlc1MFhTQTlJSHQ5S1R0Y2JpQWdJQ0I5WEc0Z0lIMWNibjBwTzF4dUlsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMRXRCUVVzc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRGRrSXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eFZRVUZWTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZETEVOQlFVTTdRVUZEZWtNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNWVUZCVlR0QlFVTnlRaXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhUUVVGVExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlF6RkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVsQlFVazdRVUZEWml4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4VFFVRlRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRelZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFMUJRVTA3UVVGRGFrSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU03UVVGRFZDeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRM0JETEVOQlFVTXNRMEZCUXp0QlFVTkdMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRFNpeExRVUZMTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVDBGQlR5eERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRGJrTXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU4wUXl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEycERMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNRMEZCUXl4UFFVRlBPMEZCUTNSQ0xFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGRkJRVkVzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03UVVGRE5VTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTXNRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJReTlDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1VVRkJVU3hEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRia01zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1IwRkJSeXhEUVVGRE8wRkJRM0JETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF6dEJRVU5ZTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTjRSQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEwb3NRMEZCUXl4RFFVRkRPMEZCUTBZc1EwRkJReXhEUVVGRE95Sjk=",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 3962
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 11,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.368Z",
        "time": 27,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/node_modules/.vite/deps/@tanstack_react-query.js?v=0bb69d73",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/main.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [
            {
              "name": "v",
              "value": "0bb69d73"
            }
          ],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "max-age=31536000,immutable"
            },
            {
              "name": "etag",
              "value": "W/\"1f15e-ywYWE5Bg0q8mPANxtZaHVTURitg\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "127326"
            }
          ],
          "content": {
            "size": 127326,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsKICByZXF1aXJlX2pzeF9ydW50aW1lCn0gZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL2NodW5rLTJGWTJEQVlFLmpzP3Y9MGJiNjlkNzMiOwppbXBvcnQgewogIHJlcXVpcmVfcmVhY3QKfSBmcm9tICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvY2h1bmstUUpZS1VLQUwuanM/dj0wYmI2OWQ3MyI7CmltcG9ydCB7CiAgX19wcml2YXRlQWRkLAogIF9fcHJpdmF0ZUdldCwKICBfX3ByaXZhdGVNZXRob2QsCiAgX19wcml2YXRlU2V0LAogIF9fcHJpdmF0ZVdyYXBwZXIsCiAgX190b0VTTQp9IGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9jaHVuay00TUJNUklMQS5qcz92PTBiYjY5ZDczIjsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9AdGFuc3RhY2svcXVlcnktY29yZS9idWlsZC9tb2Rlcm4vc3Vic2NyaWJhYmxlLmpzCnZhciBTdWJzY3JpYmFibGUgPSBjbGFzcyB7CiAgY29uc3RydWN0b3IoKSB7CiAgICB0aGlzLmxpc3RlbmVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7CiAgICB0aGlzLnN1YnNjcmliZSA9IHRoaXMuc3Vic2NyaWJlLmJpbmQodGhpcyk7CiAgfQogIHN1YnNjcmliZShsaXN0ZW5lcikgewogICAgdGhpcy5saXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTsKICAgIHRoaXMub25TdWJzY3JpYmUoKTsKICAgIHJldHVybiAoKSA9PiB7CiAgICAgIHRoaXMubGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7CiAgICAgIHRoaXMub25VbnN1YnNjcmliZSgpOwogICAgfTsKICB9CiAgaGFzTGlzdGVuZXJzKCkgewogICAgcmV0dXJuIHRoaXMubGlzdGVuZXJzLnNpemUgPiAwOwogIH0KICBvblN1YnNjcmliZSgpIHsKICB9CiAgb25VbnN1YnNjcmliZSgpIHsKICB9Cn07CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvQHRhbnN0YWNrL3F1ZXJ5LWNvcmUvYnVpbGQvbW9kZXJuL3RpbWVvdXRNYW5hZ2VyLmpzCnZhciBkZWZhdWx0VGltZW91dFByb3ZpZGVyID0gewogIC8vIFdlIG5lZWQgdGhlIHdyYXBwZXIgZnVuY3Rpb24gc3ludGF4IGJlbG93IGluc3RlYWQgb2YgZGlyZWN0IHJlZmVyZW5jZXMgdG8KICAvLyBnbG9iYWwgc2V0VGltZW91dCBldGMuCiAgLy8KICAvLyBCQUQ6IGBzZXRUaW1lb3V0OiBzZXRUaW1lb3V0YAogIC8vIEdPT0Q6IGBzZXRUaW1lb3V0OiAoY2IsIGRlbGF5KSA9PiBzZXRUaW1lb3V0KGNiLCBkZWxheSlgCiAgLy8KICAvLyBJZiB3ZSB1c2UgZGlyZWN0IHJlZmVyZW5jZXMgaGVyZSwgdGhlbiBhbnl0aGluZyB0aGF0IHdhbnRzIHRvIHNweSBvbiBvcgogIC8vIHJlcGxhY2UgdGhlIGdsb2JhbCBzZXRUaW1lb3V0IChsaWtlIHRlc3RzKSB3b24ndCB3b3JrIHNpbmNlIHdlJ2xsIGFscmVhZHkKICAvLyBoYXZlIGEgaGFyZCByZWZlcmVuY2UgdG8gdGhlIG9yaWdpbmFsIGltcGxlbWVudGF0aW9uIGF0IHRoZSB0aW1lIHdoZW4gdGhpcwogIC8vIGZpbGUgd2FzIGltcG9ydGVkLgogIHNldFRpbWVvdXQ6IChjYWxsYmFjaywgZGVsYXkpID0+IHNldFRpbWVvdXQoY2FsbGJhY2ssIGRlbGF5KSwKICBjbGVhclRpbWVvdXQ6ICh0aW1lb3V0SWQpID0+IGNsZWFyVGltZW91dCh0aW1lb3V0SWQpLAogIHNldEludGVydmFsOiAoY2FsbGJhY2ssIGRlbGF5KSA9PiBzZXRJbnRlcnZhbChjYWxsYmFjaywgZGVsYXkpLAogIGNsZWFySW50ZXJ2YWw6IChpbnRlcnZhbElkKSA9PiBjbGVhckludGVydmFsKGludGVydmFsSWQpCn07CnZhciBfcHJvdmlkZXIsIF9wcm92aWRlckNhbGxlZCwgX2E7CnZhciBUaW1lb3V0TWFuYWdlciA9IChfYSA9IGNsYXNzIHsKICBjb25zdHJ1Y3RvcigpIHsKICAgIC8vIFdlIGNhbm5vdCBoYXZlIFRpbWVvdXRNYW5hZ2VyPFQ+IGFzIHdlIG11c3QgaW5zdGFudGlhdGUgaXQgd2l0aCBhIGNvbmNyZXRlCiAgICAvLyB0eXBlIGF0IGFwcCBib290OyBhbmQgaWYgd2UgbGVhdmUgdGhhdCB0eXBlLCB0aGVuIGFueSBuZXcgdGltZXIgcHJvdmlkZXIKICAgIC8vIHdvdWxkIG5lZWQgdG8gc3VwcG9ydCBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0Piwgd2hpY2ggaXMgaW5mZWFzaWJsZS4KICAgIC8vCiAgICAvLyBXZSBzZXR0bGUgZm9yIHR5cGUgc2FmZXR5IGZvciB0aGUgVGltZW91dFByb3ZpZGVyIHR5cGUsIGFuZCBhY2NlcHQgdGhhdAogICAgLy8gdGhpcyBjbGFzcyBpcyB1bnNhZmUgaW50ZXJuYWxseSB0byBhbGxvdyBmb3IgZXh0ZW5zaW9uLgogICAgX19wcml2YXRlQWRkKHRoaXMsIF9wcm92aWRlciwgZGVmYXVsdFRpbWVvdXRQcm92aWRlcik7CiAgICBfX3ByaXZhdGVBZGQodGhpcywgX3Byb3ZpZGVyQ2FsbGVkLCBmYWxzZSk7CiAgfQogIHNldFRpbWVvdXRQcm92aWRlcihwcm92aWRlcikgewogICAgaWYgKHRydWUpIHsKICAgICAgaWYgKF9fcHJpdmF0ZUdldCh0aGlzLCBfcHJvdmlkZXJDYWxsZWQpICYmIHByb3ZpZGVyICE9PSBfX3ByaXZhdGVHZXQodGhpcywgX3Byb3ZpZGVyKSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICBgW3RpbWVvdXRNYW5hZ2VyXTogU3dpdGNoaW5nIHByb3ZpZGVyIGFmdGVyIGNhbGxzIHRvIHByZXZpb3VzIHByb3ZpZGVyIG1pZ2h0IHJlc3VsdCBpbiB1bmV4cGVjdGVkIGJlaGF2aW9yLmAsCiAgICAgICAgICB7IHByZXZpb3VzOiBfX3ByaXZhdGVHZXQodGhpcywgX3Byb3ZpZGVyKSwgcHJvdmlkZXIgfQogICAgICAgICk7CiAgICAgIH0KICAgIH0KICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfcHJvdmlkZXIsIHByb3ZpZGVyKTsKICAgIGlmICh0cnVlKSB7CiAgICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfcHJvdmlkZXJDYWxsZWQsIGZhbHNlKTsKICAgIH0KICB9CiAgc2V0VGltZW91dChjYWxsYmFjaywgZGVsYXkpIHsKICAgIGlmICh0cnVlKSB7CiAgICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfcHJvdmlkZXJDYWxsZWQsIHRydWUpOwogICAgfQogICAgcmV0dXJuIF9fcHJpdmF0ZUdldCh0aGlzLCBfcHJvdmlkZXIpLnNldFRpbWVvdXQoY2FsbGJhY2ssIGRlbGF5KTsKICB9CiAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCkgewogICAgX19wcml2YXRlR2V0KHRoaXMsIF9wcm92aWRlcikuY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7CiAgfQogIHNldEludGVydmFsKGNhbGxiYWNrLCBkZWxheSkgewogICAgaWYgKHRydWUpIHsKICAgICAgX19wcml2YXRlU2V0KHRoaXMsIF9wcm92aWRlckNhbGxlZCwgdHJ1ZSk7CiAgICB9CiAgICByZXR1cm4gX19wcml2YXRlR2V0KHRoaXMsIF9wcm92aWRlcikuc2V0SW50ZXJ2YWwoY2FsbGJhY2ssIGRlbGF5KTsKICB9CiAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKSB7CiAgICBfX3ByaXZhdGVHZXQodGhpcywgX3Byb3ZpZGVyKS5jbGVhckludGVydmFsKGludGVydmFsSWQpOwogIH0KfSwgX3Byb3ZpZGVyID0gbmV3IFdlYWtNYXAoKSwgX3Byb3ZpZGVyQ2FsbGVkID0gbmV3IFdlYWtNYXAoKSwgX2EpOwp2YXIgdGltZW91dE1hbmFnZXIgPSBuZXcgVGltZW91dE1hbmFnZXIoKTsKZnVuY3Rpb24gc3lzdGVtU2V0VGltZW91dFplcm8oY2FsbGJhY2spIHsKICBzZXRUaW1lb3V0KGNhbGxiYWNrLCAwKTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0B0YW5zdGFjay9xdWVyeS1jb3JlL2J1aWxkL21vZGVybi91dGlscy5qcwp2YXIgaXNTZXJ2ZXIgPSB0eXBlb2Ygd2luZG93ID09PSAidW5kZWZpbmVkIiB8fCAiRGVubyIgaW4gZ2xvYmFsVGhpczsKZnVuY3Rpb24gbm9vcCgpIHsKfQpmdW5jdGlvbiBmdW5jdGlvbmFsVXBkYXRlKHVwZGF0ZXIsIGlucHV0KSB7CiAgcmV0dXJuIHR5cGVvZiB1cGRhdGVyID09PSAiZnVuY3Rpb24iID8gdXBkYXRlcihpbnB1dCkgOiB1cGRhdGVyOwp9CmZ1bmN0aW9uIGlzVmFsaWRUaW1lb3V0KHZhbHVlKSB7CiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gIm51bWJlciIgJiYgdmFsdWUgPj0gMCAmJiB2YWx1ZSAhPT0gSW5maW5pdHk7Cn0KZnVuY3Rpb24gdGltZVVudGlsU3RhbGUodXBkYXRlZEF0LCBzdGFsZVRpbWUpIHsKICByZXR1cm4gTWF0aC5tYXgodXBkYXRlZEF0ICsgKHN0YWxlVGltZSB8fCAwKSAtIERhdGUubm93KCksIDApOwp9CmZ1bmN0aW9uIHJlc29sdmVTdGFsZVRpbWUoc3RhbGVUaW1lLCBxdWVyeSkgewogIHJldHVybiB0eXBlb2Ygc3RhbGVUaW1lID09PSAiZnVuY3Rpb24iID8gc3RhbGVUaW1lKHF1ZXJ5KSA6IHN0YWxlVGltZTsKfQpmdW5jdGlvbiByZXNvbHZlRW5hYmxlZChlbmFibGVkLCBxdWVyeSkgewogIHJldHVybiB0eXBlb2YgZW5hYmxlZCA9PT0gImZ1bmN0aW9uIiA/IGVuYWJsZWQocXVlcnkpIDogZW5hYmxlZDsKfQpmdW5jdGlvbiBtYXRjaFF1ZXJ5KGZpbHRlcnMsIHF1ZXJ5KSB7CiAgY29uc3QgewogICAgdHlwZSA9ICJhbGwiLAogICAgZXhhY3QsCiAgICBmZXRjaFN0YXR1cywKICAgIHByZWRpY2F0ZSwKICAgIHF1ZXJ5S2V5LAogICAgc3RhbGUKICB9ID0gZmlsdGVyczsKICBpZiAocXVlcnlLZXkpIHsKICAgIGlmIChleGFjdCkgewogICAgICBpZiAocXVlcnkucXVlcnlIYXNoICE9PSBoYXNoUXVlcnlLZXlCeU9wdGlvbnMocXVlcnlLZXksIHF1ZXJ5Lm9wdGlvbnMpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9IGVsc2UgaWYgKCFwYXJ0aWFsTWF0Y2hLZXkocXVlcnkucXVlcnlLZXksIHF1ZXJ5S2V5KSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQogIGlmICh0eXBlICE9PSAiYWxsIikgewogICAgY29uc3QgaXNBY3RpdmUgPSBxdWVyeS5pc0FjdGl2ZSgpOwogICAgaWYgKHR5cGUgPT09ICJhY3RpdmUiICYmICFpc0FjdGl2ZSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBpZiAodHlwZSA9PT0gImluYWN0aXZlIiAmJiBpc0FjdGl2ZSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQogIGlmICh0eXBlb2Ygc3RhbGUgPT09ICJib29sZWFuIiAmJiBxdWVyeS5pc1N0YWxlKCkgIT09IHN0YWxlKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIGlmIChmZXRjaFN0YXR1cyAmJiBmZXRjaFN0YXR1cyAhPT0gcXVlcnkuc3RhdGUuZmV0Y2hTdGF0dXMpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgaWYgKHByZWRpY2F0ZSAmJiAhcHJlZGljYXRlKHF1ZXJ5KSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICByZXR1cm4gdHJ1ZTsKfQpmdW5jdGlvbiBtYXRjaE11dGF0aW9uKGZpbHRlcnMsIG11dGF0aW9uKSB7CiAgY29uc3QgeyBleGFjdCwgc3RhdHVzLCBwcmVkaWNhdGUsIG11dGF0aW9uS2V5IH0gPSBmaWx0ZXJzOwogIGlmIChtdXRhdGlvbktleSkgewogICAgaWYgKCFtdXRhdGlvbi5vcHRpb25zLm11dGF0aW9uS2V5KSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGlmIChleGFjdCkgewogICAgICBpZiAoaGFzaEtleShtdXRhdGlvbi5vcHRpb25zLm11dGF0aW9uS2V5KSAhPT0gaGFzaEtleShtdXRhdGlvbktleSkpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoIXBhcnRpYWxNYXRjaEtleShtdXRhdGlvbi5vcHRpb25zLm11dGF0aW9uS2V5LCBtdXRhdGlvbktleSkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KICBpZiAoc3RhdHVzICYmIG11dGF0aW9uLnN0YXRlLnN0YXR1cyAhPT0gc3RhdHVzKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIGlmIChwcmVkaWNhdGUgJiYgIXByZWRpY2F0ZShtdXRhdGlvbikpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgcmV0dXJuIHRydWU7Cn0KZnVuY3Rpb24gaGFzaFF1ZXJ5S2V5QnlPcHRpb25zKHF1ZXJ5S2V5LCBvcHRpb25zKSB7CiAgY29uc3QgaGFzaEZuID0gKG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMucXVlcnlLZXlIYXNoRm4pIHx8IGhhc2hLZXk7CiAgcmV0dXJuIGhhc2hGbihxdWVyeUtleSk7Cn0KZnVuY3Rpb24gaGFzaEtleShxdWVyeUtleSkgewogIHJldHVybiBKU09OLnN0cmluZ2lmeSgKICAgIHF1ZXJ5S2V5LAogICAgKF8sIHZhbCkgPT4gaXNQbGFpbk9iamVjdCh2YWwpID8gT2JqZWN0LmtleXModmFsKS5zb3J0KCkucmVkdWNlKChyZXN1bHQsIGtleSkgPT4gewogICAgICByZXN1bHRba2V5XSA9IHZhbFtrZXldOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwge30pIDogdmFsCiAgKTsKfQpmdW5jdGlvbiBwYXJ0aWFsTWF0Y2hLZXkoYSwgYikgewogIGlmIChhID09PSBiKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgaWYgKHR5cGVvZiBhICE9PSB0eXBlb2YgYikgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICBpZiAoYSAmJiBiICYmIHR5cGVvZiBhID09PSAib2JqZWN0IiAmJiB0eXBlb2YgYiA9PT0gIm9iamVjdCIpIHsKICAgIHJldHVybiBPYmplY3Qua2V5cyhiKS5ldmVyeSgoa2V5KSA9PiBwYXJ0aWFsTWF0Y2hLZXkoYVtrZXldLCBiW2tleV0pKTsKICB9CiAgcmV0dXJuIGZhbHNlOwp9CnZhciBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwpmdW5jdGlvbiByZXBsYWNlRXF1YWxEZWVwKGEsIGIpIHsKICBpZiAoYSA9PT0gYikgewogICAgcmV0dXJuIGE7CiAgfQogIGNvbnN0IGFycmF5ID0gaXNQbGFpbkFycmF5KGEpICYmIGlzUGxhaW5BcnJheShiKTsKICBpZiAoIWFycmF5ICYmICEoaXNQbGFpbk9iamVjdChhKSAmJiBpc1BsYWluT2JqZWN0KGIpKSkgcmV0dXJuIGI7CiAgY29uc3QgYUl0ZW1zID0gYXJyYXkgPyBhIDogT2JqZWN0LmtleXMoYSk7CiAgY29uc3QgYVNpemUgPSBhSXRlbXMubGVuZ3RoOwogIGNvbnN0IGJJdGVtcyA9IGFycmF5ID8gYiA6IE9iamVjdC5rZXlzKGIpOwogIGNvbnN0IGJTaXplID0gYkl0ZW1zLmxlbmd0aDsKICBjb25zdCBjb3B5ID0gYXJyYXkgPyBuZXcgQXJyYXkoYlNpemUpIDoge307CiAgbGV0IGVxdWFsSXRlbXMgPSAwOwogIGZvciAobGV0IGkgPSAwOyBpIDwgYlNpemU7IGkrKykgewogICAgY29uc3Qga2V5ID0gYXJyYXkgPyBpIDogYkl0ZW1zW2ldOwogICAgY29uc3QgYUl0ZW0gPSBhW2tleV07CiAgICBjb25zdCBiSXRlbSA9IGJba2V5XTsKICAgIGlmIChhSXRlbSA9PT0gYkl0ZW0pIHsKICAgICAgY29weVtrZXldID0gYUl0ZW07CiAgICAgIGlmIChhcnJheSA/IGkgPCBhU2l6ZSA6IGhhc093bi5jYWxsKGEsIGtleSkpIGVxdWFsSXRlbXMrKzsKICAgICAgY29udGludWU7CiAgICB9CiAgICBpZiAoYUl0ZW0gPT09IG51bGwgfHwgYkl0ZW0gPT09IG51bGwgfHwgdHlwZW9mIGFJdGVtICE9PSAib2JqZWN0IiB8fCB0eXBlb2YgYkl0ZW0gIT09ICJvYmplY3QiKSB7CiAgICAgIGNvcHlba2V5XSA9IGJJdGVtOwogICAgICBjb250aW51ZTsKICAgIH0KICAgIGNvbnN0IHYgPSByZXBsYWNlRXF1YWxEZWVwKGFJdGVtLCBiSXRlbSk7CiAgICBjb3B5W2tleV0gPSB2OwogICAgaWYgKHYgPT09IGFJdGVtKSBlcXVhbEl0ZW1zKys7CiAgfQogIHJldHVybiBhU2l6ZSA9PT0gYlNpemUgJiYgZXF1YWxJdGVtcyA9PT0gYVNpemUgPyBhIDogY29weTsKfQpmdW5jdGlvbiBzaGFsbG93RXF1YWxPYmplY3RzKGEsIGIpIHsKICBpZiAoIWIgfHwgT2JqZWN0LmtleXMoYSkubGVuZ3RoICE9PSBPYmplY3Qua2V5cyhiKS5sZW5ndGgpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgZm9yIChjb25zdCBrZXkgaW4gYSkgewogICAgaWYgKGFba2V5XSAhPT0gYltrZXldKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9CiAgcmV0dXJuIHRydWU7Cn0KZnVuY3Rpb24gaXNQbGFpbkFycmF5KHZhbHVlKSB7CiAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA9PT0gT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aDsKfQpmdW5jdGlvbiBpc1BsYWluT2JqZWN0KG8pIHsKICBpZiAoIWhhc09iamVjdFByb3RvdHlwZShvKSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICBjb25zdCBjdG9yID0gby5jb25zdHJ1Y3RvcjsKICBpZiAoY3RvciA9PT0gdm9pZCAwKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgY29uc3QgcHJvdCA9IGN0b3IucHJvdG90eXBlOwogIGlmICghaGFzT2JqZWN0UHJvdG90eXBlKHByb3QpKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIGlmICghcHJvdC5oYXNPd25Qcm9wZXJ0eSgiaXNQcm90b3R5cGVPZiIpKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YobykgIT09IE9iamVjdC5wcm90b3R5cGUpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgcmV0dXJuIHRydWU7Cn0KZnVuY3Rpb24gaGFzT2JqZWN0UHJvdG90eXBlKG8pIHsKICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pID09PSAiW29iamVjdCBPYmplY3RdIjsKfQpmdW5jdGlvbiBzbGVlcCh0aW1lb3V0KSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICB0aW1lb3V0TWFuYWdlci5zZXRUaW1lb3V0KHJlc29sdmUsIHRpbWVvdXQpOwogIH0pOwp9CmZ1bmN0aW9uIHJlcGxhY2VEYXRhKHByZXZEYXRhLCBkYXRhLCBvcHRpb25zKSB7CiAgaWYgKHR5cGVvZiBvcHRpb25zLnN0cnVjdHVyYWxTaGFyaW5nID09PSAiZnVuY3Rpb24iKSB7CiAgICByZXR1cm4gb3B0aW9ucy5zdHJ1Y3R1cmFsU2hhcmluZyhwcmV2RGF0YSwgZGF0YSk7CiAgfSBlbHNlIGlmIChvcHRpb25zLnN0cnVjdHVyYWxTaGFyaW5nICE9PSBmYWxzZSkgewogICAgaWYgKHRydWUpIHsKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gcmVwbGFjZUVxdWFsRGVlcChwcmV2RGF0YSwgZGF0YSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcigKICAgICAgICAgIGBTdHJ1Y3R1cmFsIHNoYXJpbmcgcmVxdWlyZXMgZGF0YSB0byBiZSBKU09OIHNlcmlhbGl6YWJsZS4gVG8gZml4IHRoaXMsIHR1cm4gb2ZmIHN0cnVjdHVyYWxTaGFyaW5nIG9yIHJldHVybiBKU09OLXNlcmlhbGl6YWJsZSBkYXRhIGZyb20geW91ciBxdWVyeUZuLiBbJHtvcHRpb25zLnF1ZXJ5SGFzaH1dOiAke2Vycm9yfWAKICAgICAgICApOwogICAgICAgIHRocm93IGVycm9yOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gcmVwbGFjZUVxdWFsRGVlcChwcmV2RGF0YSwgZGF0YSk7CiAgfQogIHJldHVybiBkYXRhOwp9CmZ1bmN0aW9uIGtlZXBQcmV2aW91c0RhdGEocHJldmlvdXNEYXRhKSB7CiAgcmV0dXJuIHByZXZpb3VzRGF0YTsKfQpmdW5jdGlvbiBhZGRUb0VuZChpdGVtcywgaXRlbSwgbWF4ID0gMCkgewogIGNvbnN0IG5ld0l0ZW1zID0gWy4uLml0ZW1zLCBpdGVtXTsKICByZXR1cm4gbWF4ICYmIG5ld0l0ZW1zLmxlbmd0aCA+IG1heCA/IG5ld0l0ZW1zLnNsaWNlKDEpIDogbmV3SXRlbXM7Cn0KZnVuY3Rpb24gYWRkVG9TdGFydChpdGVtcywgaXRlbSwgbWF4ID0gMCkgewogIGNvbnN0IG5ld0l0ZW1zID0gW2l0ZW0sIC4uLml0ZW1zXTsKICByZXR1cm4gbWF4ICYmIG5ld0l0ZW1zLmxlbmd0aCA+IG1heCA/IG5ld0l0ZW1zLnNsaWNlKDAsIC0xKSA6IG5ld0l0ZW1zOwp9CnZhciBza2lwVG9rZW4gPSBTeW1ib2woKTsKZnVuY3Rpb24gZW5zdXJlUXVlcnlGbihvcHRpb25zLCBmZXRjaE9wdGlvbnMpIHsKICBpZiAodHJ1ZSkgewogICAgaWYgKG9wdGlvbnMucXVlcnlGbiA9PT0gc2tpcFRva2VuKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgYEF0dGVtcHRlZCB0byBpbnZva2UgcXVlcnlGbiB3aGVuIHNldCB0byBza2lwVG9rZW4uIFRoaXMgaXMgbGlrZWx5IGEgY29uZmlndXJhdGlvbiBlcnJvci4gUXVlcnkgaGFzaDogJyR7b3B0aW9ucy5xdWVyeUhhc2h9J2AKICAgICAgKTsKICAgIH0KICB9CiAgaWYgKCFvcHRpb25zLnF1ZXJ5Rm4gJiYgKGZldGNoT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogZmV0Y2hPcHRpb25zLmluaXRpYWxQcm9taXNlKSkgewogICAgcmV0dXJuICgpID0+IGZldGNoT3B0aW9ucy5pbml0aWFsUHJvbWlzZTsKICB9CiAgaWYgKCFvcHRpb25zLnF1ZXJ5Rm4gfHwgb3B0aW9ucy5xdWVyeUZuID09PSBza2lwVG9rZW4pIHsKICAgIHJldHVybiAoKSA9PiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoYE1pc3NpbmcgcXVlcnlGbjogJyR7b3B0aW9ucy5xdWVyeUhhc2h9J2ApKTsKICB9CiAgcmV0dXJuIG9wdGlvbnMucXVlcnlGbjsKfQpmdW5jdGlvbiBzaG91bGRUaHJvd0Vycm9yKHRocm93T25FcnJvciwgcGFyYW1zKSB7CiAgaWYgKHR5cGVvZiB0aHJvd09uRXJyb3IgPT09ICJmdW5jdGlvbiIpIHsKICAgIHJldHVybiB0aHJvd09uRXJyb3IoLi4ucGFyYW1zKTsKICB9CiAgcmV0dXJuICEhdGhyb3dPbkVycm9yOwp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvQHRhbnN0YWNrL3F1ZXJ5LWNvcmUvYnVpbGQvbW9kZXJuL2ZvY3VzTWFuYWdlci5qcwp2YXIgX2ZvY3VzZWQsIF9jbGVhbnVwLCBfc2V0dXAsIF9hMjsKdmFyIEZvY3VzTWFuYWdlciA9IChfYTIgPSBjbGFzcyBleHRlbmRzIFN1YnNjcmliYWJsZSB7CiAgY29uc3RydWN0b3IoKSB7CiAgICBzdXBlcigpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9mb2N1c2VkKTsKICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfY2xlYW51cCk7CiAgICBfX3ByaXZhdGVBZGQodGhpcywgX3NldHVwKTsKICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfc2V0dXAsIChvbkZvY3VzKSA9PiB7CiAgICAgIGlmICghaXNTZXJ2ZXIgJiYgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHsKICAgICAgICBjb25zdCBsaXN0ZW5lciA9ICgpID0+IG9uRm9jdXMoKTsKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigidmlzaWJpbGl0eWNoYW5nZSIsIGxpc3RlbmVyLCBmYWxzZSk7CiAgICAgICAgcmV0dXJuICgpID0+IHsKICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJ2aXNpYmlsaXR5Y2hhbmdlIiwgbGlzdGVuZXIpOwogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuOwogICAgfSk7CiAgfQogIG9uU3Vic2NyaWJlKCkgewogICAgaWYgKCFfX3ByaXZhdGVHZXQodGhpcywgX2NsZWFudXApKSB7CiAgICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcihfX3ByaXZhdGVHZXQodGhpcywgX3NldHVwKSk7CiAgICB9CiAgfQogIG9uVW5zdWJzY3JpYmUoKSB7CiAgICB2YXIgX2ExMzsKICAgIGlmICghdGhpcy5oYXNMaXN0ZW5lcnMoKSkgewogICAgICAoX2ExMyA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfY2xlYW51cCkpID09IG51bGwgPyB2b2lkIDAgOiBfYTEzLmNhbGwodGhpcyk7CiAgICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfY2xlYW51cCwgdm9pZCAwKTsKICAgIH0KICB9CiAgc2V0RXZlbnRMaXN0ZW5lcihzZXR1cCkgewogICAgdmFyIF9hMTM7CiAgICBfX3ByaXZhdGVTZXQodGhpcywgX3NldHVwLCBzZXR1cCk7CiAgICAoX2ExMyA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfY2xlYW51cCkpID09IG51bGwgPyB2b2lkIDAgOiBfYTEzLmNhbGwodGhpcyk7CiAgICBfX3ByaXZhdGVTZXQodGhpcywgX2NsZWFudXAsIHNldHVwKChmb2N1c2VkKSA9PiB7CiAgICAgIGlmICh0eXBlb2YgZm9jdXNlZCA9PT0gImJvb2xlYW4iKSB7CiAgICAgICAgdGhpcy5zZXRGb2N1c2VkKGZvY3VzZWQpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMub25Gb2N1cygpOwogICAgICB9CiAgICB9KSk7CiAgfQogIHNldEZvY3VzZWQoZm9jdXNlZCkgewogICAgY29uc3QgY2hhbmdlZCA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfZm9jdXNlZCkgIT09IGZvY3VzZWQ7CiAgICBpZiAoY2hhbmdlZCkgewogICAgICBfX3ByaXZhdGVTZXQodGhpcywgX2ZvY3VzZWQsIGZvY3VzZWQpOwogICAgICB0aGlzLm9uRm9jdXMoKTsKICAgIH0KICB9CiAgb25Gb2N1cygpIHsKICAgIGNvbnN0IGlzRm9jdXNlZCA9IHRoaXMuaXNGb2N1c2VkKCk7CiAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gewogICAgICBsaXN0ZW5lcihpc0ZvY3VzZWQpOwogICAgfSk7CiAgfQogIGlzRm9jdXNlZCgpIHsKICAgIHZhciBfYTEzOwogICAgaWYgKHR5cGVvZiBfX3ByaXZhdGVHZXQodGhpcywgX2ZvY3VzZWQpID09PSAiYm9vbGVhbiIpIHsKICAgICAgcmV0dXJuIF9fcHJpdmF0ZUdldCh0aGlzLCBfZm9jdXNlZCk7CiAgICB9CiAgICByZXR1cm4gKChfYTEzID0gZ2xvYmFsVGhpcy5kb2N1bWVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMTMudmlzaWJpbGl0eVN0YXRlKSAhPT0gImhpZGRlbiI7CiAgfQp9LCBfZm9jdXNlZCA9IG5ldyBXZWFrTWFwKCksIF9jbGVhbnVwID0gbmV3IFdlYWtNYXAoKSwgX3NldHVwID0gbmV3IFdlYWtNYXAoKSwgX2EyKTsKdmFyIGZvY3VzTWFuYWdlciA9IG5ldyBGb2N1c01hbmFnZXIoKTsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9AdGFuc3RhY2svcXVlcnktY29yZS9idWlsZC9tb2Rlcm4vdGhlbmFibGUuanMKZnVuY3Rpb24gcGVuZGluZ1RoZW5hYmxlKCkgewogIGxldCByZXNvbHZlOwogIGxldCByZWplY3Q7CiAgY29uc3QgdGhlbmFibGUgPSBuZXcgUHJvbWlzZSgoX3Jlc29sdmUsIF9yZWplY3QpID0+IHsKICAgIHJlc29sdmUgPSBfcmVzb2x2ZTsKICAgIHJlamVjdCA9IF9yZWplY3Q7CiAgfSk7CiAgdGhlbmFibGUuc3RhdHVzID0gInBlbmRpbmciOwogIHRoZW5hYmxlLmNhdGNoKCgpID0+IHsKICB9KTsKICBmdW5jdGlvbiBmaW5hbGl6ZShkYXRhKSB7CiAgICBPYmplY3QuYXNzaWduKHRoZW5hYmxlLCBkYXRhKTsKICAgIGRlbGV0ZSB0aGVuYWJsZS5yZXNvbHZlOwogICAgZGVsZXRlIHRoZW5hYmxlLnJlamVjdDsKICB9CiAgdGhlbmFibGUucmVzb2x2ZSA9ICh2YWx1ZSkgPT4gewogICAgZmluYWxpemUoewogICAgICBzdGF0dXM6ICJmdWxmaWxsZWQiLAogICAgICB2YWx1ZQogICAgfSk7CiAgICByZXNvbHZlKHZhbHVlKTsKICB9OwogIHRoZW5hYmxlLnJlamVjdCA9IChyZWFzb24pID0+IHsKICAgIGZpbmFsaXplKHsKICAgICAgc3RhdHVzOiAicmVqZWN0ZWQiLAogICAgICByZWFzb24KICAgIH0pOwogICAgcmVqZWN0KHJlYXNvbik7CiAgfTsKICByZXR1cm4gdGhlbmFibGU7Cn0KZnVuY3Rpb24gdHJ5UmVzb2x2ZVN5bmMocHJvbWlzZSkgewogIHZhciBfYTEzOwogIGxldCBkYXRhOwogIChfYTEzID0gcHJvbWlzZS50aGVuKChyZXN1bHQpID0+IHsKICAgIGRhdGEgPSByZXN1bHQ7CiAgICByZXR1cm4gcmVzdWx0OwogIH0sIG5vb3ApKSA9PSBudWxsID8gdm9pZCAwIDogX2ExMy5jYXRjaChub29wKTsKICBpZiAoZGF0YSAhPT0gdm9pZCAwKSB7CiAgICByZXR1cm4geyBkYXRhIH07CiAgfQogIHJldHVybiB2b2lkIDA7Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9AdGFuc3RhY2svcXVlcnktY29yZS9idWlsZC9tb2Rlcm4vaHlkcmF0aW9uLmpzCmZ1bmN0aW9uIGRlZmF1bHRUcmFuc2Zvcm1lckZuKGRhdGEpIHsKICByZXR1cm4gZGF0YTsKfQpmdW5jdGlvbiBkZWh5ZHJhdGVNdXRhdGlvbihtdXRhdGlvbikgewogIHJldHVybiB7CiAgICBtdXRhdGlvbktleTogbXV0YXRpb24ub3B0aW9ucy5tdXRhdGlvbktleSwKICAgIHN0YXRlOiBtdXRhdGlvbi5zdGF0ZSwKICAgIC4uLm11dGF0aW9uLm9wdGlvbnMuc2NvcGUgJiYgeyBzY29wZTogbXV0YXRpb24ub3B0aW9ucy5zY29wZSB9LAogICAgLi4ubXV0YXRpb24ubWV0YSAmJiB7IG1ldGE6IG11dGF0aW9uLm1ldGEgfQogIH07Cn0KZnVuY3Rpb24gZGVoeWRyYXRlUXVlcnkocXVlcnksIHNlcmlhbGl6ZURhdGEsIHNob3VsZFJlZGFjdEVycm9ycykgewogIHZhciBfYTEzOwogIHJldHVybiB7CiAgICBkZWh5ZHJhdGVkQXQ6IERhdGUubm93KCksCiAgICBzdGF0ZTogewogICAgICAuLi5xdWVyeS5zdGF0ZSwKICAgICAgLi4ucXVlcnkuc3RhdGUuZGF0YSAhPT0gdm9pZCAwICYmIHsKICAgICAgICBkYXRhOiBzZXJpYWxpemVEYXRhKHF1ZXJ5LnN0YXRlLmRhdGEpCiAgICAgIH0KICAgIH0sCiAgICBxdWVyeUtleTogcXVlcnkucXVlcnlLZXksCiAgICBxdWVyeUhhc2g6IHF1ZXJ5LnF1ZXJ5SGFzaCwKICAgIC4uLnF1ZXJ5LnN0YXRlLnN0YXR1cyA9PT0gInBlbmRpbmciICYmIHsKICAgICAgcHJvbWlzZTogKF9hMTMgPSBxdWVyeS5wcm9taXNlKSA9PSBudWxsID8gdm9pZCAwIDogX2ExMy50aGVuKHNlcmlhbGl6ZURhdGEpLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgIGlmICghc2hvdWxkUmVkYWN0RXJyb3JzKGVycm9yKSkgewogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRydWUpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgIGBBIHF1ZXJ5IHRoYXQgd2FzIGRlaHlkcmF0ZWQgYXMgcGVuZGluZyBlbmRlZCB1cCByZWplY3RpbmcuIFske3F1ZXJ5LnF1ZXJ5SGFzaH1dOiAke2Vycm9yfTsgVGhlIGVycm9yIHdpbGwgYmUgcmVkYWN0ZWQgaW4gcHJvZHVjdGlvbiBidWlsZHNgCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJyZWRhY3RlZCIpKTsKICAgICAgfSkKICAgIH0sCiAgICAuLi5xdWVyeS5tZXRhICYmIHsgbWV0YTogcXVlcnkubWV0YSB9CiAgfTsKfQpmdW5jdGlvbiBkZWZhdWx0U2hvdWxkRGVoeWRyYXRlTXV0YXRpb24obXV0YXRpb24pIHsKICByZXR1cm4gbXV0YXRpb24uc3RhdGUuaXNQYXVzZWQ7Cn0KZnVuY3Rpb24gZGVmYXVsdFNob3VsZERlaHlkcmF0ZVF1ZXJ5KHF1ZXJ5KSB7CiAgcmV0dXJuIHF1ZXJ5LnN0YXRlLnN0YXR1cyA9PT0gInN1Y2Nlc3MiOwp9CmZ1bmN0aW9uIGRlZmF1bHRTaG91bGRSZWRhY3RFcnJvcnMoXykgewogIHJldHVybiB0cnVlOwp9CmZ1bmN0aW9uIGRlaHlkcmF0ZShjbGllbnQsIG9wdGlvbnMgPSB7fSkgewogIHZhciBfYTEzLCBfYiwgX2MsIF9kOwogIGNvbnN0IGZpbHRlck11dGF0aW9uID0gb3B0aW9ucy5zaG91bGREZWh5ZHJhdGVNdXRhdGlvbiA/PyAoKF9hMTMgPSBjbGllbnQuZ2V0RGVmYXVsdE9wdGlvbnMoKS5kZWh5ZHJhdGUpID09IG51bGwgPyB2b2lkIDAgOiBfYTEzLnNob3VsZERlaHlkcmF0ZU11dGF0aW9uKSA/PyBkZWZhdWx0U2hvdWxkRGVoeWRyYXRlTXV0YXRpb247CiAgY29uc3QgbXV0YXRpb25zID0gY2xpZW50LmdldE11dGF0aW9uQ2FjaGUoKS5nZXRBbGwoKS5mbGF0TWFwKAogICAgKG11dGF0aW9uKSA9PiBmaWx0ZXJNdXRhdGlvbihtdXRhdGlvbikgPyBbZGVoeWRyYXRlTXV0YXRpb24obXV0YXRpb24pXSA6IFtdCiAgKTsKICBjb25zdCBmaWx0ZXJRdWVyeSA9IG9wdGlvbnMuc2hvdWxkRGVoeWRyYXRlUXVlcnkgPz8gKChfYiA9IGNsaWVudC5nZXREZWZhdWx0T3B0aW9ucygpLmRlaHlkcmF0ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnNob3VsZERlaHlkcmF0ZVF1ZXJ5KSA/PyBkZWZhdWx0U2hvdWxkRGVoeWRyYXRlUXVlcnk7CiAgY29uc3Qgc2hvdWxkUmVkYWN0RXJyb3JzID0gb3B0aW9ucy5zaG91bGRSZWRhY3RFcnJvcnMgPz8gKChfYyA9IGNsaWVudC5nZXREZWZhdWx0T3B0aW9ucygpLmRlaHlkcmF0ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnNob3VsZFJlZGFjdEVycm9ycykgPz8gZGVmYXVsdFNob3VsZFJlZGFjdEVycm9yczsKICBjb25zdCBzZXJpYWxpemVEYXRhID0gb3B0aW9ucy5zZXJpYWxpemVEYXRhID8/ICgoX2QgPSBjbGllbnQuZ2V0RGVmYXVsdE9wdGlvbnMoKS5kZWh5ZHJhdGUpID09IG51bGwgPyB2b2lkIDAgOiBfZC5zZXJpYWxpemVEYXRhKSA/PyBkZWZhdWx0VHJhbnNmb3JtZXJGbjsKICBjb25zdCBxdWVyaWVzID0gY2xpZW50LmdldFF1ZXJ5Q2FjaGUoKS5nZXRBbGwoKS5mbGF0TWFwKAogICAgKHF1ZXJ5KSA9PiBmaWx0ZXJRdWVyeShxdWVyeSkgPyBbZGVoeWRyYXRlUXVlcnkocXVlcnksIHNlcmlhbGl6ZURhdGEsIHNob3VsZFJlZGFjdEVycm9ycyldIDogW10KICApOwogIHJldHVybiB7IG11dGF0aW9ucywgcXVlcmllcyB9Owp9CmZ1bmN0aW9uIGh5ZHJhdGUoY2xpZW50LCBkZWh5ZHJhdGVkU3RhdGUsIG9wdGlvbnMpIHsKICB2YXIgX2ExMywgX2I7CiAgaWYgKHR5cGVvZiBkZWh5ZHJhdGVkU3RhdGUgIT09ICJvYmplY3QiIHx8IGRlaHlkcmF0ZWRTdGF0ZSA9PT0gbnVsbCkgewogICAgcmV0dXJuOwogIH0KICBjb25zdCBtdXRhdGlvbkNhY2hlID0gY2xpZW50LmdldE11dGF0aW9uQ2FjaGUoKTsKICBjb25zdCBxdWVyeUNhY2hlID0gY2xpZW50LmdldFF1ZXJ5Q2FjaGUoKTsKICBjb25zdCBkZXNlcmlhbGl6ZURhdGEgPSAoKF9hMTMgPSBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmRlZmF1bHRPcHRpb25zKSA9PSBudWxsID8gdm9pZCAwIDogX2ExMy5kZXNlcmlhbGl6ZURhdGEpID8/ICgoX2IgPSBjbGllbnQuZ2V0RGVmYXVsdE9wdGlvbnMoKS5oeWRyYXRlKSA9PSBudWxsID8gdm9pZCAwIDogX2IuZGVzZXJpYWxpemVEYXRhKSA/PyBkZWZhdWx0VHJhbnNmb3JtZXJGbjsKICBjb25zdCBtdXRhdGlvbnMgPSBkZWh5ZHJhdGVkU3RhdGUubXV0YXRpb25zIHx8IFtdOwogIGNvbnN0IHF1ZXJpZXMgPSBkZWh5ZHJhdGVkU3RhdGUucXVlcmllcyB8fCBbXTsKICBtdXRhdGlvbnMuZm9yRWFjaCgoeyBzdGF0ZSwgLi4ubXV0YXRpb25PcHRpb25zMiB9KSA9PiB7CiAgICB2YXIgX2ExNCwgX2IyOwogICAgbXV0YXRpb25DYWNoZS5idWlsZCgKICAgICAgY2xpZW50LAogICAgICB7CiAgICAgICAgLi4uKF9hMTQgPSBjbGllbnQuZ2V0RGVmYXVsdE9wdGlvbnMoKS5oeWRyYXRlKSA9PSBudWxsID8gdm9pZCAwIDogX2ExNC5tdXRhdGlvbnMsCiAgICAgICAgLi4uKF9iMiA9IG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuZGVmYXVsdE9wdGlvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYjIubXV0YXRpb25zLAogICAgICAgIC4uLm11dGF0aW9uT3B0aW9uczIKICAgICAgfSwKICAgICAgc3RhdGUKICAgICk7CiAgfSk7CiAgcXVlcmllcy5mb3JFYWNoKAogICAgKHsgcXVlcnlLZXksIHN0YXRlLCBxdWVyeUhhc2gsIG1ldGEsIHByb21pc2UsIGRlaHlkcmF0ZWRBdCB9KSA9PiB7CiAgICAgIHZhciBfYTE0LCBfYjI7CiAgICAgIGNvbnN0IHN5bmNEYXRhID0gcHJvbWlzZSA/IHRyeVJlc29sdmVTeW5jKHByb21pc2UpIDogdm9pZCAwOwogICAgICBjb25zdCByYXdEYXRhID0gc3RhdGUuZGF0YSA9PT0gdm9pZCAwID8gc3luY0RhdGEgPT0gbnVsbCA/IHZvaWQgMCA6IHN5bmNEYXRhLmRhdGEgOiBzdGF0ZS5kYXRhOwogICAgICBjb25zdCBkYXRhID0gcmF3RGF0YSA9PT0gdm9pZCAwID8gcmF3RGF0YSA6IGRlc2VyaWFsaXplRGF0YShyYXdEYXRhKTsKICAgICAgbGV0IHF1ZXJ5ID0gcXVlcnlDYWNoZS5nZXQocXVlcnlIYXNoKTsKICAgICAgY29uc3QgZXhpc3RpbmdRdWVyeUlzUGVuZGluZyA9IChxdWVyeSA9PSBudWxsID8gdm9pZCAwIDogcXVlcnkuc3RhdGUuc3RhdHVzKSA9PT0gInBlbmRpbmciOwogICAgICBjb25zdCBleGlzdGluZ1F1ZXJ5SXNGZXRjaGluZyA9IChxdWVyeSA9PSBudWxsID8gdm9pZCAwIDogcXVlcnkuc3RhdGUuZmV0Y2hTdGF0dXMpID09PSAiZmV0Y2hpbmciOwogICAgICBpZiAocXVlcnkpIHsKICAgICAgICBjb25zdCBoYXNOZXdlclN5bmNEYXRhID0gc3luY0RhdGEgJiYgLy8gV2Ugb25seSBuZWVkIHRoaXMgdW5kZWZpbmVkIGNoZWNrIHRvIGhhbmRsZSBvbGRlciBkZWh5ZHJhdGlvbgogICAgICAgIC8vIHBheWxvYWRzIHRoYXQgbWlnaHQgbm90IGhhdmUgZGVoeWRyYXRlZEF0CiAgICAgICAgZGVoeWRyYXRlZEF0ICE9PSB2b2lkIDAgJiYgZGVoeWRyYXRlZEF0ID4gcXVlcnkuc3RhdGUuZGF0YVVwZGF0ZWRBdDsKICAgICAgICBpZiAoc3RhdGUuZGF0YVVwZGF0ZWRBdCA+IHF1ZXJ5LnN0YXRlLmRhdGFVcGRhdGVkQXQgfHwgaGFzTmV3ZXJTeW5jRGF0YSkgewogICAgICAgICAgY29uc3QgeyBmZXRjaFN0YXR1czogX2lnbm9yZWQsIC4uLnNlcmlhbGl6ZWRTdGF0ZSB9ID0gc3RhdGU7CiAgICAgICAgICBxdWVyeS5zZXRTdGF0ZSh7CiAgICAgICAgICAgIC4uLnNlcmlhbGl6ZWRTdGF0ZSwKICAgICAgICAgICAgZGF0YQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHF1ZXJ5ID0gcXVlcnlDYWNoZS5idWlsZCgKICAgICAgICAgIGNsaWVudCwKICAgICAgICAgIHsKICAgICAgICAgICAgLi4uKF9hMTQgPSBjbGllbnQuZ2V0RGVmYXVsdE9wdGlvbnMoKS5oeWRyYXRlKSA9PSBudWxsID8gdm9pZCAwIDogX2ExNC5xdWVyaWVzLAogICAgICAgICAgICAuLi4oX2IyID0gb3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5kZWZhdWx0T3B0aW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMi5xdWVyaWVzLAogICAgICAgICAgICBxdWVyeUtleSwKICAgICAgICAgICAgcXVlcnlIYXNoLAogICAgICAgICAgICBtZXRhCiAgICAgICAgICB9LAogICAgICAgICAgLy8gUmVzZXQgZmV0Y2ggc3RhdHVzIHRvIGlkbGUgdG8gYXZvaWQKICAgICAgICAgIC8vIHF1ZXJ5IGJlaW5nIHN0dWNrIGluIGZldGNoaW5nIHN0YXRlIHVwb24gaHlkcmF0aW9uCiAgICAgICAgICB7CiAgICAgICAgICAgIC4uLnN0YXRlLAogICAgICAgICAgICBkYXRhLAogICAgICAgICAgICBmZXRjaFN0YXR1czogImlkbGUiLAogICAgICAgICAgICBzdGF0dXM6IGRhdGEgIT09IHZvaWQgMCA/ICJzdWNjZXNzIiA6IHN0YXRlLnN0YXR1cwogICAgICAgICAgfQogICAgICAgICk7CiAgICAgIH0KICAgICAgaWYgKHByb21pc2UgJiYgIWV4aXN0aW5nUXVlcnlJc1BlbmRpbmcgJiYgIWV4aXN0aW5nUXVlcnlJc0ZldGNoaW5nICYmIC8vIE9ubHkgaHlkcmF0ZSBpZiBkZWh5ZHJhdGlvbiBpcyBuZXdlciB0aGFuIGFueSBleGlzdGluZyBkYXRhLAogICAgICAvLyB0aGlzIGlzIGFsd2F5cyB0cnVlIGZvciBuZXcgcXVlcmllcwogICAgICAoZGVoeWRyYXRlZEF0ID09PSB2b2lkIDAgfHwgZGVoeWRyYXRlZEF0ID4gcXVlcnkuc3RhdGUuZGF0YVVwZGF0ZWRBdCkpIHsKICAgICAgICB2b2lkIHF1ZXJ5LmZldGNoKHZvaWQgMCwgewogICAgICAgICAgLy8gUlNDIHRyYW5zZm9ybWVkIHByb21pc2VzIGFyZSBub3QgdGhlbmFibGUKICAgICAgICAgIGluaXRpYWxQcm9taXNlOiBQcm9taXNlLnJlc29sdmUocHJvbWlzZSkudGhlbihkZXNlcmlhbGl6ZURhdGEpCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICApOwp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvQHRhbnN0YWNrL3F1ZXJ5LWNvcmUvYnVpbGQvbW9kZXJuL25vdGlmeU1hbmFnZXIuanMKdmFyIGRlZmF1bHRTY2hlZHVsZXIgPSBzeXN0ZW1TZXRUaW1lb3V0WmVybzsKZnVuY3Rpb24gY3JlYXRlTm90aWZ5TWFuYWdlcigpIHsKICBsZXQgcXVldWUgPSBbXTsKICBsZXQgdHJhbnNhY3Rpb25zID0gMDsKICBsZXQgbm90aWZ5Rm4gPSAoY2FsbGJhY2spID0+IHsKICAgIGNhbGxiYWNrKCk7CiAgfTsKICBsZXQgYmF0Y2hOb3RpZnlGbiA9IChjYWxsYmFjaykgPT4gewogICAgY2FsbGJhY2soKTsKICB9OwogIGxldCBzY2hlZHVsZUZuID0gZGVmYXVsdFNjaGVkdWxlcjsKICBjb25zdCBzY2hlZHVsZSA9IChjYWxsYmFjaykgPT4gewogICAgaWYgKHRyYW5zYWN0aW9ucykgewogICAgICBxdWV1ZS5wdXNoKGNhbGxiYWNrKTsKICAgIH0gZWxzZSB7CiAgICAgIHNjaGVkdWxlRm4oKCkgPT4gewogICAgICAgIG5vdGlmeUZuKGNhbGxiYWNrKTsKICAgICAgfSk7CiAgICB9CiAgfTsKICBjb25zdCBmbHVzaCA9ICgpID0+IHsKICAgIGNvbnN0IG9yaWdpbmFsUXVldWUgPSBxdWV1ZTsKICAgIHF1ZXVlID0gW107CiAgICBpZiAob3JpZ2luYWxRdWV1ZS5sZW5ndGgpIHsKICAgICAgc2NoZWR1bGVGbigoKSA9PiB7CiAgICAgICAgYmF0Y2hOb3RpZnlGbigoKSA9PiB7CiAgICAgICAgICBvcmlnaW5hbFF1ZXVlLmZvckVhY2goKGNhbGxiYWNrKSA9PiB7CiAgICAgICAgICAgIG5vdGlmeUZuKGNhbGxiYWNrKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9OwogIHJldHVybiB7CiAgICBiYXRjaDogKGNhbGxiYWNrKSA9PiB7CiAgICAgIGxldCByZXN1bHQ7CiAgICAgIHRyYW5zYWN0aW9ucysrOwogICAgICB0cnkgewogICAgICAgIHJlc3VsdCA9IGNhbGxiYWNrKCk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdHJhbnNhY3Rpb25zLS07CiAgICAgICAgaWYgKCF0cmFuc2FjdGlvbnMpIHsKICAgICAgICAgIGZsdXNoKCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAogICAgLyoqCiAgICAgKiBBbGwgY2FsbHMgdG8gdGhlIHdyYXBwZWQgZnVuY3Rpb24gd2lsbCBiZSBiYXRjaGVkLgogICAgICovCiAgICBiYXRjaENhbGxzOiAoY2FsbGJhY2spID0+IHsKICAgICAgcmV0dXJuICguLi5hcmdzKSA9PiB7CiAgICAgICAgc2NoZWR1bGUoKCkgPT4gewogICAgICAgICAgY2FsbGJhY2soLi4uYXJncyk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICB9LAogICAgc2NoZWR1bGUsCiAgICAvKioKICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBzZXQgYSBjdXN0b20gbm90aWZ5IGZ1bmN0aW9uLgogICAgICogVGhpcyBjYW4gYmUgdXNlZCB0byBmb3IgZXhhbXBsZSB3cmFwIG5vdGlmaWNhdGlvbnMgd2l0aCBgUmVhY3QuYWN0YCB3aGlsZSBydW5uaW5nIHRlc3RzLgogICAgICovCiAgICBzZXROb3RpZnlGdW5jdGlvbjogKGZuKSA9PiB7CiAgICAgIG5vdGlmeUZuID0gZm47CiAgICB9LAogICAgLyoqCiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gc2V0IGEgY3VzdG9tIGZ1bmN0aW9uIHRvIGJhdGNoIG5vdGlmaWNhdGlvbnMgdG9nZXRoZXIgaW50byBhIHNpbmdsZSB0aWNrLgogICAgICogQnkgZGVmYXVsdCBSZWFjdCBRdWVyeSB3aWxsIHVzZSB0aGUgYmF0Y2ggZnVuY3Rpb24gcHJvdmlkZWQgYnkgUmVhY3RET00gb3IgUmVhY3QgTmF0aXZlLgogICAgICovCiAgICBzZXRCYXRjaE5vdGlmeUZ1bmN0aW9uOiAoZm4pID0+IHsKICAgICAgYmF0Y2hOb3RpZnlGbiA9IGZuOwogICAgfSwKICAgIHNldFNjaGVkdWxlcjogKGZuKSA9PiB7CiAgICAgIHNjaGVkdWxlRm4gPSBmbjsKICAgIH0KICB9Owp9CnZhciBub3RpZnlNYW5hZ2VyID0gY3JlYXRlTm90aWZ5TWFuYWdlcigpOwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0B0YW5zdGFjay9xdWVyeS1jb3JlL2J1aWxkL21vZGVybi9vbmxpbmVNYW5hZ2VyLmpzCnZhciBfb25saW5lLCBfY2xlYW51cDIsIF9zZXR1cDIsIF9hMzsKdmFyIE9ubGluZU1hbmFnZXIgPSAoX2EzID0gY2xhc3MgZXh0ZW5kcyBTdWJzY3JpYmFibGUgewogIGNvbnN0cnVjdG9yKCkgewogICAgc3VwZXIoKTsKICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfb25saW5lLCB0cnVlKTsKICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfY2xlYW51cDIpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9zZXR1cDIpOwogICAgX19wcml2YXRlU2V0KHRoaXMsIF9zZXR1cDIsIChvbk9ubGluZSkgPT4gewogICAgICBpZiAoIWlzU2VydmVyICYmIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7CiAgICAgICAgY29uc3Qgb25saW5lTGlzdGVuZXIgPSAoKSA9PiBvbk9ubGluZSh0cnVlKTsKICAgICAgICBjb25zdCBvZmZsaW5lTGlzdGVuZXIgPSAoKSA9PiBvbk9ubGluZShmYWxzZSk7CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm9ubGluZSIsIG9ubGluZUxpc3RlbmVyLCBmYWxzZSk7CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm9mZmxpbmUiLCBvZmZsaW5lTGlzdGVuZXIsIGZhbHNlKTsKICAgICAgICByZXR1cm4gKCkgPT4gewogICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm9ubGluZSIsIG9ubGluZUxpc3RlbmVyKTsKICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJvZmZsaW5lIiwgb2ZmbGluZUxpc3RlbmVyKTsKICAgICAgICB9OwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0pOwogIH0KICBvblN1YnNjcmliZSgpIHsKICAgIGlmICghX19wcml2YXRlR2V0KHRoaXMsIF9jbGVhbnVwMikpIHsKICAgICAgdGhpcy5zZXRFdmVudExpc3RlbmVyKF9fcHJpdmF0ZUdldCh0aGlzLCBfc2V0dXAyKSk7CiAgICB9CiAgfQogIG9uVW5zdWJzY3JpYmUoKSB7CiAgICB2YXIgX2ExMzsKICAgIGlmICghdGhpcy5oYXNMaXN0ZW5lcnMoKSkgewogICAgICAoX2ExMyA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfY2xlYW51cDIpKSA9PSBudWxsID8gdm9pZCAwIDogX2ExMy5jYWxsKHRoaXMpOwogICAgICBfX3ByaXZhdGVTZXQodGhpcywgX2NsZWFudXAyLCB2b2lkIDApOwogICAgfQogIH0KICBzZXRFdmVudExpc3RlbmVyKHNldHVwKSB7CiAgICB2YXIgX2ExMzsKICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfc2V0dXAyLCBzZXR1cCk7CiAgICAoX2ExMyA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfY2xlYW51cDIpKSA9PSBudWxsID8gdm9pZCAwIDogX2ExMy5jYWxsKHRoaXMpOwogICAgX19wcml2YXRlU2V0KHRoaXMsIF9jbGVhbnVwMiwgc2V0dXAodGhpcy5zZXRPbmxpbmUuYmluZCh0aGlzKSkpOwogIH0KICBzZXRPbmxpbmUob25saW5lKSB7CiAgICBjb25zdCBjaGFuZ2VkID0gX19wcml2YXRlR2V0KHRoaXMsIF9vbmxpbmUpICE9PSBvbmxpbmU7CiAgICBpZiAoY2hhbmdlZCkgewogICAgICBfX3ByaXZhdGVTZXQodGhpcywgX29ubGluZSwgb25saW5lKTsKICAgICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaCgobGlzdGVuZXIpID0+IHsKICAgICAgICBsaXN0ZW5lcihvbmxpbmUpOwogICAgICB9KTsKICAgIH0KICB9CiAgaXNPbmxpbmUoKSB7CiAgICByZXR1cm4gX19wcml2YXRlR2V0KHRoaXMsIF9vbmxpbmUpOwogIH0KfSwgX29ubGluZSA9IG5ldyBXZWFrTWFwKCksIF9jbGVhbnVwMiA9IG5ldyBXZWFrTWFwKCksIF9zZXR1cDIgPSBuZXcgV2Vha01hcCgpLCBfYTMpOwp2YXIgb25saW5lTWFuYWdlciA9IG5ldyBPbmxpbmVNYW5hZ2VyKCk7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvQHRhbnN0YWNrL3F1ZXJ5LWNvcmUvYnVpbGQvbW9kZXJuL3JldHJ5ZXIuanMKZnVuY3Rpb24gZGVmYXVsdFJldHJ5RGVsYXkoZmFpbHVyZUNvdW50KSB7CiAgcmV0dXJuIE1hdGgubWluKDFlMyAqIDIgKiogZmFpbHVyZUNvdW50LCAzZTQpOwp9CmZ1bmN0aW9uIGNhbkZldGNoKG5ldHdvcmtNb2RlKSB7CiAgcmV0dXJuIChuZXR3b3JrTW9kZSA/PyAib25saW5lIikgPT09ICJvbmxpbmUiID8gb25saW5lTWFuYWdlci5pc09ubGluZSgpIDogdHJ1ZTsKfQp2YXIgQ2FuY2VsbGVkRXJyb3IgPSBjbGFzcyBleHRlbmRzIEVycm9yIHsKICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICBzdXBlcigiQ2FuY2VsbGVkRXJyb3IiKTsKICAgIHRoaXMucmV2ZXJ0ID0gb3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5yZXZlcnQ7CiAgICB0aGlzLnNpbGVudCA9IG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuc2lsZW50OwogIH0KfTsKZnVuY3Rpb24gaXNDYW5jZWxsZWRFcnJvcih2YWx1ZSkgewogIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIENhbmNlbGxlZEVycm9yOwp9CmZ1bmN0aW9uIGNyZWF0ZVJldHJ5ZXIoY29uZmlnKSB7CiAgbGV0IGlzUmV0cnlDYW5jZWxsZWQgPSBmYWxzZTsKICBsZXQgZmFpbHVyZUNvdW50ID0gMDsKICBsZXQgY29udGludWVGbjsKICBjb25zdCB0aGVuYWJsZSA9IHBlbmRpbmdUaGVuYWJsZSgpOwogIGNvbnN0IGlzUmVzb2x2ZWQgPSAoKSA9PiB0aGVuYWJsZS5zdGF0dXMgIT09ICJwZW5kaW5nIjsKICBjb25zdCBjYW5jZWwgPSAoY2FuY2VsT3B0aW9ucykgPT4gewogICAgdmFyIF9hMTM7CiAgICBpZiAoIWlzUmVzb2x2ZWQoKSkgewogICAgICBjb25zdCBlcnJvciA9IG5ldyBDYW5jZWxsZWRFcnJvcihjYW5jZWxPcHRpb25zKTsKICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgKF9hMTMgPSBjb25maWcub25DYW5jZWwpID09IG51bGwgPyB2b2lkIDAgOiBfYTEzLmNhbGwoY29uZmlnLCBlcnJvcik7CiAgICB9CiAgfTsKICBjb25zdCBjYW5jZWxSZXRyeSA9ICgpID0+IHsKICAgIGlzUmV0cnlDYW5jZWxsZWQgPSB0cnVlOwogIH07CiAgY29uc3QgY29udGludWVSZXRyeSA9ICgpID0+IHsKICAgIGlzUmV0cnlDYW5jZWxsZWQgPSBmYWxzZTsKICB9OwogIGNvbnN0IGNhbkNvbnRpbnVlID0gKCkgPT4gZm9jdXNNYW5hZ2VyLmlzRm9jdXNlZCgpICYmIChjb25maWcubmV0d29ya01vZGUgPT09ICJhbHdheXMiIHx8IG9ubGluZU1hbmFnZXIuaXNPbmxpbmUoKSkgJiYgY29uZmlnLmNhblJ1bigpOwogIGNvbnN0IGNhblN0YXJ0ID0gKCkgPT4gY2FuRmV0Y2goY29uZmlnLm5ldHdvcmtNb2RlKSAmJiBjb25maWcuY2FuUnVuKCk7CiAgY29uc3QgcmVzb2x2ZSA9ICh2YWx1ZSkgPT4gewogICAgaWYgKCFpc1Jlc29sdmVkKCkpIHsKICAgICAgY29udGludWVGbiA9PSBudWxsID8gdm9pZCAwIDogY29udGludWVGbigpOwogICAgICB0aGVuYWJsZS5yZXNvbHZlKHZhbHVlKTsKICAgIH0KICB9OwogIGNvbnN0IHJlamVjdCA9ICh2YWx1ZSkgPT4gewogICAgaWYgKCFpc1Jlc29sdmVkKCkpIHsKICAgICAgY29udGludWVGbiA9PSBudWxsID8gdm9pZCAwIDogY29udGludWVGbigpOwogICAgICB0aGVuYWJsZS5yZWplY3QodmFsdWUpOwogICAgfQogIH07CiAgY29uc3QgcGF1c2UgPSAoKSA9PiB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoKGNvbnRpbnVlUmVzb2x2ZSkgPT4gewogICAgICB2YXIgX2ExMzsKICAgICAgY29udGludWVGbiA9ICh2YWx1ZSkgPT4gewogICAgICAgIGlmIChpc1Jlc29sdmVkKCkgfHwgY2FuQ29udGludWUoKSkgewogICAgICAgICAgY29udGludWVSZXNvbHZlKHZhbHVlKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIChfYTEzID0gY29uZmlnLm9uUGF1c2UpID09IG51bGwgPyB2b2lkIDAgOiBfYTEzLmNhbGwoY29uZmlnKTsKICAgIH0pLnRoZW4oKCkgPT4gewogICAgICB2YXIgX2ExMzsKICAgICAgY29udGludWVGbiA9IHZvaWQgMDsKICAgICAgaWYgKCFpc1Jlc29sdmVkKCkpIHsKICAgICAgICAoX2ExMyA9IGNvbmZpZy5vbkNvbnRpbnVlKSA9PSBudWxsID8gdm9pZCAwIDogX2ExMy5jYWxsKGNvbmZpZyk7CiAgICAgIH0KICAgIH0pOwogIH07CiAgY29uc3QgcnVuID0gKCkgPT4gewogICAgaWYgKGlzUmVzb2x2ZWQoKSkgewogICAgICByZXR1cm47CiAgICB9CiAgICBsZXQgcHJvbWlzZU9yVmFsdWU7CiAgICBjb25zdCBpbml0aWFsUHJvbWlzZSA9IGZhaWx1cmVDb3VudCA9PT0gMCA/IGNvbmZpZy5pbml0aWFsUHJvbWlzZSA6IHZvaWQgMDsKICAgIHRyeSB7CiAgICAgIHByb21pc2VPclZhbHVlID0gaW5pdGlhbFByb21pc2UgPz8gY29uZmlnLmZuKCk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICBwcm9taXNlT3JWYWx1ZSA9IFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgIH0KICAgIFByb21pc2UucmVzb2x2ZShwcm9taXNlT3JWYWx1ZSkudGhlbihyZXNvbHZlKS5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgdmFyIF9hMTM7CiAgICAgIGlmIChpc1Jlc29sdmVkKCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3QgcmV0cnkgPSBjb25maWcucmV0cnkgPz8gKGlzU2VydmVyID8gMCA6IDMpOwogICAgICBjb25zdCByZXRyeURlbGF5ID0gY29uZmlnLnJldHJ5RGVsYXkgPz8gZGVmYXVsdFJldHJ5RGVsYXk7CiAgICAgIGNvbnN0IGRlbGF5ID0gdHlwZW9mIHJldHJ5RGVsYXkgPT09ICJmdW5jdGlvbiIgPyByZXRyeURlbGF5KGZhaWx1cmVDb3VudCwgZXJyb3IpIDogcmV0cnlEZWxheTsKICAgICAgY29uc3Qgc2hvdWxkUmV0cnkgPSByZXRyeSA9PT0gdHJ1ZSB8fCB0eXBlb2YgcmV0cnkgPT09ICJudW1iZXIiICYmIGZhaWx1cmVDb3VudCA8IHJldHJ5IHx8IHR5cGVvZiByZXRyeSA9PT0gImZ1bmN0aW9uIiAmJiByZXRyeShmYWlsdXJlQ291bnQsIGVycm9yKTsKICAgICAgaWYgKGlzUmV0cnlDYW5jZWxsZWQgfHwgIXNob3VsZFJldHJ5KSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZmFpbHVyZUNvdW50Kys7CiAgICAgIChfYTEzID0gY29uZmlnLm9uRmFpbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMTMuY2FsbChjb25maWcsIGZhaWx1cmVDb3VudCwgZXJyb3IpOwogICAgICBzbGVlcChkZWxheSkudGhlbigoKSA9PiB7CiAgICAgICAgcmV0dXJuIGNhbkNvbnRpbnVlKCkgPyB2b2lkIDAgOiBwYXVzZSgpOwogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBpZiAoaXNSZXRyeUNhbmNlbGxlZCkgewogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcnVuKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogIH07CiAgcmV0dXJuIHsKICAgIHByb21pc2U6IHRoZW5hYmxlLAogICAgc3RhdHVzOiAoKSA9PiB0aGVuYWJsZS5zdGF0dXMsCiAgICBjYW5jZWwsCiAgICBjb250aW51ZTogKCkgPT4gewogICAgICBjb250aW51ZUZuID09IG51bGwgPyB2b2lkIDAgOiBjb250aW51ZUZuKCk7CiAgICAgIHJldHVybiB0aGVuYWJsZTsKICAgIH0sCiAgICBjYW5jZWxSZXRyeSwKICAgIGNvbnRpbnVlUmV0cnksCiAgICBjYW5TdGFydCwKICAgIHN0YXJ0OiAoKSA9PiB7CiAgICAgIGlmIChjYW5TdGFydCgpKSB7CiAgICAgICAgcnVuKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcGF1c2UoKS50aGVuKHJ1bik7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoZW5hYmxlOwogICAgfQogIH07Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9AdGFuc3RhY2svcXVlcnktY29yZS9idWlsZC9tb2Rlcm4vcmVtb3ZhYmxlLmpzCnZhciBfZ2NUaW1lb3V0LCBfYTQ7CnZhciBSZW1vdmFibGUgPSAoX2E0ID0gY2xhc3MgewogIGNvbnN0cnVjdG9yKCkgewogICAgX19wcml2YXRlQWRkKHRoaXMsIF9nY1RpbWVvdXQpOwogIH0KICBkZXN0cm95KCkgewogICAgdGhpcy5jbGVhckdjVGltZW91dCgpOwogIH0KICBzY2hlZHVsZUdjKCkgewogICAgdGhpcy5jbGVhckdjVGltZW91dCgpOwogICAgaWYgKGlzVmFsaWRUaW1lb3V0KHRoaXMuZ2NUaW1lKSkgewogICAgICBfX3ByaXZhdGVTZXQodGhpcywgX2djVGltZW91dCwgdGltZW91dE1hbmFnZXIuc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5vcHRpb25hbFJlbW92ZSgpOwogICAgICB9LCB0aGlzLmdjVGltZSkpOwogICAgfQogIH0KICB1cGRhdGVHY1RpbWUobmV3R2NUaW1lKSB7CiAgICB0aGlzLmdjVGltZSA9IE1hdGgubWF4KAogICAgICB0aGlzLmdjVGltZSB8fCAwLAogICAgICBuZXdHY1RpbWUgPz8gKGlzU2VydmVyID8gSW5maW5pdHkgOiA1ICogNjAgKiAxZTMpCiAgICApOwogIH0KICBjbGVhckdjVGltZW91dCgpIHsKICAgIGlmIChfX3ByaXZhdGVHZXQodGhpcywgX2djVGltZW91dCkpIHsKICAgICAgdGltZW91dE1hbmFnZXIuY2xlYXJUaW1lb3V0KF9fcHJpdmF0ZUdldCh0aGlzLCBfZ2NUaW1lb3V0KSk7CiAgICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfZ2NUaW1lb3V0LCB2b2lkIDApOwogICAgfQogIH0KfSwgX2djVGltZW91dCA9IG5ldyBXZWFrTWFwKCksIF9hNCk7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvQHRhbnN0YWNrL3F1ZXJ5LWNvcmUvYnVpbGQvbW9kZXJuL3F1ZXJ5LmpzCnZhciBfaW5pdGlhbFN0YXRlLCBfcmV2ZXJ0U3RhdGUsIF9jYWNoZSwgX2NsaWVudCwgX3JldHJ5ZXIsIF9kZWZhdWx0T3B0aW9ucywgX2Fib3J0U2lnbmFsQ29uc3VtZWQsIF9RdWVyeV9pbnN0YW5jZXMsIGRpc3BhdGNoX2ZuLCBfYTU7CnZhciBRdWVyeSA9IChfYTUgPSBjbGFzcyBleHRlbmRzIFJlbW92YWJsZSB7CiAgY29uc3RydWN0b3IoY29uZmlnKSB7CiAgICBzdXBlcigpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9RdWVyeV9pbnN0YW5jZXMpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9pbml0aWFsU3RhdGUpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9yZXZlcnRTdGF0ZSk7CiAgICBfX3ByaXZhdGVBZGQodGhpcywgX2NhY2hlKTsKICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfY2xpZW50KTsKICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfcmV0cnllcik7CiAgICBfX3ByaXZhdGVBZGQodGhpcywgX2RlZmF1bHRPcHRpb25zKTsKICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfYWJvcnRTaWduYWxDb25zdW1lZCk7CiAgICBfX3ByaXZhdGVTZXQodGhpcywgX2Fib3J0U2lnbmFsQ29uc3VtZWQsIGZhbHNlKTsKICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfZGVmYXVsdE9wdGlvbnMsIGNvbmZpZy5kZWZhdWx0T3B0aW9ucyk7CiAgICB0aGlzLnNldE9wdGlvbnMoY29uZmlnLm9wdGlvbnMpOwogICAgdGhpcy5vYnNlcnZlcnMgPSBbXTsKICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfY2xpZW50LCBjb25maWcuY2xpZW50KTsKICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfY2FjaGUsIF9fcHJpdmF0ZUdldCh0aGlzLCBfY2xpZW50KS5nZXRRdWVyeUNhY2hlKCkpOwogICAgdGhpcy5xdWVyeUtleSA9IGNvbmZpZy5xdWVyeUtleTsKICAgIHRoaXMucXVlcnlIYXNoID0gY29uZmlnLnF1ZXJ5SGFzaDsKICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfaW5pdGlhbFN0YXRlLCBnZXREZWZhdWx0U3RhdGUodGhpcy5vcHRpb25zKSk7CiAgICB0aGlzLnN0YXRlID0gY29uZmlnLnN0YXRlID8/IF9fcHJpdmF0ZUdldCh0aGlzLCBfaW5pdGlhbFN0YXRlKTsKICAgIHRoaXMuc2NoZWR1bGVHYygpOwogIH0KICBnZXQgbWV0YSgpIHsKICAgIHJldHVybiB0aGlzLm9wdGlvbnMubWV0YTsKICB9CiAgZ2V0IHByb21pc2UoKSB7CiAgICB2YXIgX2ExMzsKICAgIHJldHVybiAoX2ExMyA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfcmV0cnllcikpID09IG51bGwgPyB2b2lkIDAgOiBfYTEzLnByb21pc2U7CiAgfQogIHNldE9wdGlvbnMob3B0aW9ucykgewogICAgdGhpcy5vcHRpb25zID0geyAuLi5fX3ByaXZhdGVHZXQodGhpcywgX2RlZmF1bHRPcHRpb25zKSwgLi4ub3B0aW9ucyB9OwogICAgdGhpcy51cGRhdGVHY1RpbWUodGhpcy5vcHRpb25zLmdjVGltZSk7CiAgICBpZiAodGhpcy5zdGF0ZSAmJiB0aGlzLnN0YXRlLmRhdGEgPT09IHZvaWQgMCkgewogICAgICBjb25zdCBkZWZhdWx0U3RhdGUgPSBnZXREZWZhdWx0U3RhdGUodGhpcy5vcHRpb25zKTsKICAgICAgaWYgKGRlZmF1bHRTdGF0ZS5kYXRhICE9PSB2b2lkIDApIHsKICAgICAgICB0aGlzLnNldERhdGEoZGVmYXVsdFN0YXRlLmRhdGEsIHsKICAgICAgICAgIHVwZGF0ZWRBdDogZGVmYXVsdFN0YXRlLmRhdGFVcGRhdGVkQXQsCiAgICAgICAgICBtYW51YWw6IHRydWUKICAgICAgICB9KTsKICAgICAgICBfX3ByaXZhdGVTZXQodGhpcywgX2luaXRpYWxTdGF0ZSwgZGVmYXVsdFN0YXRlKTsKICAgICAgfQogICAgfQogIH0KICBvcHRpb25hbFJlbW92ZSgpIHsKICAgIGlmICghdGhpcy5vYnNlcnZlcnMubGVuZ3RoICYmIHRoaXMuc3RhdGUuZmV0Y2hTdGF0dXMgPT09ICJpZGxlIikgewogICAgICBfX3ByaXZhdGVHZXQodGhpcywgX2NhY2hlKS5yZW1vdmUodGhpcyk7CiAgICB9CiAgfQogIHNldERhdGEobmV3RGF0YSwgb3B0aW9ucykgewogICAgY29uc3QgZGF0YSA9IHJlcGxhY2VEYXRhKHRoaXMuc3RhdGUuZGF0YSwgbmV3RGF0YSwgdGhpcy5vcHRpb25zKTsKICAgIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfUXVlcnlfaW5zdGFuY2VzLCBkaXNwYXRjaF9mbikuY2FsbCh0aGlzLCB7CiAgICAgIGRhdGEsCiAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgZGF0YVVwZGF0ZWRBdDogb3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy51cGRhdGVkQXQsCiAgICAgIG1hbnVhbDogb3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5tYW51YWwKICAgIH0pOwogICAgcmV0dXJuIGRhdGE7CiAgfQogIHNldFN0YXRlKHN0YXRlLCBzZXRTdGF0ZU9wdGlvbnMpIHsKICAgIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfUXVlcnlfaW5zdGFuY2VzLCBkaXNwYXRjaF9mbikuY2FsbCh0aGlzLCB7IHR5cGU6ICJzZXRTdGF0ZSIsIHN0YXRlLCBzZXRTdGF0ZU9wdGlvbnMgfSk7CiAgfQogIGNhbmNlbChvcHRpb25zKSB7CiAgICB2YXIgX2ExMywgX2I7CiAgICBjb25zdCBwcm9taXNlID0gKF9hMTMgPSBfX3ByaXZhdGVHZXQodGhpcywgX3JldHJ5ZXIpKSA9PSBudWxsID8gdm9pZCAwIDogX2ExMy5wcm9taXNlOwogICAgKF9iID0gX19wcml2YXRlR2V0KHRoaXMsIF9yZXRyeWVyKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmNhbmNlbChvcHRpb25zKTsKICAgIHJldHVybiBwcm9taXNlID8gcHJvbWlzZS50aGVuKG5vb3ApLmNhdGNoKG5vb3ApIDogUHJvbWlzZS5yZXNvbHZlKCk7CiAgfQogIGRlc3Ryb3koKSB7CiAgICBzdXBlci5kZXN0cm95KCk7CiAgICB0aGlzLmNhbmNlbCh7IHNpbGVudDogdHJ1ZSB9KTsKICB9CiAgcmVzZXQoKSB7CiAgICB0aGlzLmRlc3Ryb3koKTsKICAgIHRoaXMuc2V0U3RhdGUoX19wcml2YXRlR2V0KHRoaXMsIF9pbml0aWFsU3RhdGUpKTsKICB9CiAgaXNBY3RpdmUoKSB7CiAgICByZXR1cm4gdGhpcy5vYnNlcnZlcnMuc29tZSgKICAgICAgKG9ic2VydmVyKSA9PiByZXNvbHZlRW5hYmxlZChvYnNlcnZlci5vcHRpb25zLmVuYWJsZWQsIHRoaXMpICE9PSBmYWxzZQogICAgKTsKICB9CiAgaXNEaXNhYmxlZCgpIHsKICAgIGlmICh0aGlzLmdldE9ic2VydmVyc0NvdW50KCkgPiAwKSB7CiAgICAgIHJldHVybiAhdGhpcy5pc0FjdGl2ZSgpOwogICAgfQogICAgcmV0dXJuIHRoaXMub3B0aW9ucy5xdWVyeUZuID09PSBza2lwVG9rZW4gfHwgdGhpcy5zdGF0ZS5kYXRhVXBkYXRlQ291bnQgKyB0aGlzLnN0YXRlLmVycm9yVXBkYXRlQ291bnQgPT09IDA7CiAgfQogIGlzU3RhdGljKCkgewogICAgaWYgKHRoaXMuZ2V0T2JzZXJ2ZXJzQ291bnQoKSA+IDApIHsKICAgICAgcmV0dXJuIHRoaXMub2JzZXJ2ZXJzLnNvbWUoCiAgICAgICAgKG9ic2VydmVyKSA9PiByZXNvbHZlU3RhbGVUaW1lKG9ic2VydmVyLm9wdGlvbnMuc3RhbGVUaW1lLCB0aGlzKSA9PT0gInN0YXRpYyIKICAgICAgKTsKICAgIH0KICAgIHJldHVybiBmYWxzZTsKICB9CiAgaXNTdGFsZSgpIHsKICAgIGlmICh0aGlzLmdldE9ic2VydmVyc0NvdW50KCkgPiAwKSB7CiAgICAgIHJldHVybiB0aGlzLm9ic2VydmVycy5zb21lKAogICAgICAgIChvYnNlcnZlcikgPT4gb2JzZXJ2ZXIuZ2V0Q3VycmVudFJlc3VsdCgpLmlzU3RhbGUKICAgICAgKTsKICAgIH0KICAgIHJldHVybiB0aGlzLnN0YXRlLmRhdGEgPT09IHZvaWQgMCB8fCB0aGlzLnN0YXRlLmlzSW52YWxpZGF0ZWQ7CiAgfQogIGlzU3RhbGVCeVRpbWUoc3RhbGVUaW1lID0gMCkgewogICAgaWYgKHRoaXMuc3RhdGUuZGF0YSA9PT0gdm9pZCAwKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgaWYgKHN0YWxlVGltZSA9PT0gInN0YXRpYyIpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgaWYgKHRoaXMuc3RhdGUuaXNJbnZhbGlkYXRlZCkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIHJldHVybiAhdGltZVVudGlsU3RhbGUodGhpcy5zdGF0ZS5kYXRhVXBkYXRlZEF0LCBzdGFsZVRpbWUpOwogIH0KICBvbkZvY3VzKCkgewogICAgdmFyIF9hMTM7CiAgICBjb25zdCBvYnNlcnZlciA9IHRoaXMub2JzZXJ2ZXJzLmZpbmQoKHgpID0+IHguc2hvdWxkRmV0Y2hPbldpbmRvd0ZvY3VzKCkpOwogICAgb2JzZXJ2ZXIgPT0gbnVsbCA/IHZvaWQgMCA6IG9ic2VydmVyLnJlZmV0Y2goeyBjYW5jZWxSZWZldGNoOiBmYWxzZSB9KTsKICAgIChfYTEzID0gX19wcml2YXRlR2V0KHRoaXMsIF9yZXRyeWVyKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMTMuY29udGludWUoKTsKICB9CiAgb25PbmxpbmUoKSB7CiAgICB2YXIgX2ExMzsKICAgIGNvbnN0IG9ic2VydmVyID0gdGhpcy5vYnNlcnZlcnMuZmluZCgoeCkgPT4geC5zaG91bGRGZXRjaE9uUmVjb25uZWN0KCkpOwogICAgb2JzZXJ2ZXIgPT0gbnVsbCA/IHZvaWQgMCA6IG9ic2VydmVyLnJlZmV0Y2goeyBjYW5jZWxSZWZldGNoOiBmYWxzZSB9KTsKICAgIChfYTEzID0gX19wcml2YXRlR2V0KHRoaXMsIF9yZXRyeWVyKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMTMuY29udGludWUoKTsKICB9CiAgYWRkT2JzZXJ2ZXIob2JzZXJ2ZXIpIHsKICAgIGlmICghdGhpcy5vYnNlcnZlcnMuaW5jbHVkZXMob2JzZXJ2ZXIpKSB7CiAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpOwogICAgICB0aGlzLmNsZWFyR2NUaW1lb3V0KCk7CiAgICAgIF9fcHJpdmF0ZUdldCh0aGlzLCBfY2FjaGUpLm5vdGlmeSh7IHR5cGU6ICJvYnNlcnZlckFkZGVkIiwgcXVlcnk6IHRoaXMsIG9ic2VydmVyIH0pOwogICAgfQogIH0KICByZW1vdmVPYnNlcnZlcihvYnNlcnZlcikgewogICAgaWYgKHRoaXMub2JzZXJ2ZXJzLmluY2x1ZGVzKG9ic2VydmVyKSkgewogICAgICB0aGlzLm9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzLmZpbHRlcigoeCkgPT4geCAhPT0gb2JzZXJ2ZXIpOwogICAgICBpZiAoIXRoaXMub2JzZXJ2ZXJzLmxlbmd0aCkgewogICAgICAgIGlmIChfX3ByaXZhdGVHZXQodGhpcywgX3JldHJ5ZXIpKSB7CiAgICAgICAgICBpZiAoX19wcml2YXRlR2V0KHRoaXMsIF9hYm9ydFNpZ25hbENvbnN1bWVkKSkgewogICAgICAgICAgICBfX3ByaXZhdGVHZXQodGhpcywgX3JldHJ5ZXIpLmNhbmNlbCh7IHJldmVydDogdHJ1ZSB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF9fcHJpdmF0ZUdldCh0aGlzLCBfcmV0cnllcikuY2FuY2VsUmV0cnkoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdGhpcy5zY2hlZHVsZUdjKCk7CiAgICAgIH0KICAgICAgX19wcml2YXRlR2V0KHRoaXMsIF9jYWNoZSkubm90aWZ5KHsgdHlwZTogIm9ic2VydmVyUmVtb3ZlZCIsIHF1ZXJ5OiB0aGlzLCBvYnNlcnZlciB9KTsKICAgIH0KICB9CiAgZ2V0T2JzZXJ2ZXJzQ291bnQoKSB7CiAgICByZXR1cm4gdGhpcy5vYnNlcnZlcnMubGVuZ3RoOwogIH0KICBpbnZhbGlkYXRlKCkgewogICAgaWYgKCF0aGlzLnN0YXRlLmlzSW52YWxpZGF0ZWQpIHsKICAgICAgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9RdWVyeV9pbnN0YW5jZXMsIGRpc3BhdGNoX2ZuKS5jYWxsKHRoaXMsIHsgdHlwZTogImludmFsaWRhdGUiIH0pOwogICAgfQogIH0KICBhc3luYyBmZXRjaChvcHRpb25zLCBmZXRjaE9wdGlvbnMpIHsKICAgIHZhciBfYTEzLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2ksIF9qLCBfaywgX2w7CiAgICBpZiAodGhpcy5zdGF0ZS5mZXRjaFN0YXR1cyAhPT0gImlkbGUiICYmIC8vIElmIHRoZSBwcm9taXNlIGluIHRoZSByZXR5ZXIgaXMgYWxyZWFkeSByZWplY3RlZCwgd2UgaGF2ZSB0byBkZWZpbml0ZWx5CiAgICAvLyByZS1zdGFydCB0aGUgZmV0Y2g7IHRoZXJlIGlzIGEgY2hhbmNlIHRoYXQgdGhlIHF1ZXJ5IGlzIHN0aWxsIGluIGEKICAgIC8vIHBlbmRpbmcgc3RhdGUgd2hlbiB0aGF0IGhhcHBlbnMKICAgICgoX2ExMyA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfcmV0cnllcikpID09IG51bGwgPyB2b2lkIDAgOiBfYTEzLnN0YXR1cygpKSAhPT0gInJlamVjdGVkIikgewogICAgICBpZiAodGhpcy5zdGF0ZS5kYXRhICE9PSB2b2lkIDAgJiYgKGZldGNoT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogZmV0Y2hPcHRpb25zLmNhbmNlbFJlZmV0Y2gpKSB7CiAgICAgICAgdGhpcy5jYW5jZWwoeyBzaWxlbnQ6IHRydWUgfSk7CiAgICAgIH0gZWxzZSBpZiAoX19wcml2YXRlR2V0KHRoaXMsIF9yZXRyeWVyKSkgewogICAgICAgIF9fcHJpdmF0ZUdldCh0aGlzLCBfcmV0cnllcikuY29udGludWVSZXRyeSgpOwogICAgICAgIHJldHVybiBfX3ByaXZhdGVHZXQodGhpcywgX3JldHJ5ZXIpLnByb21pc2U7CiAgICAgIH0KICAgIH0KICAgIGlmIChvcHRpb25zKSB7CiAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTsKICAgIH0KICAgIGlmICghdGhpcy5vcHRpb25zLnF1ZXJ5Rm4pIHsKICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSB0aGlzLm9ic2VydmVycy5maW5kKCh4KSA9PiB4Lm9wdGlvbnMucXVlcnlGbik7CiAgICAgIGlmIChvYnNlcnZlcikgewogICAgICAgIHRoaXMuc2V0T3B0aW9ucyhvYnNlcnZlci5vcHRpb25zKTsKICAgICAgfQogICAgfQogICAgaWYgKHRydWUpIHsKICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRoaXMub3B0aW9ucy5xdWVyeUtleSkpIHsKICAgICAgICBjb25zb2xlLmVycm9yKAogICAgICAgICAgYEFzIG9mIHY0LCBxdWVyeUtleSBuZWVkcyB0byBiZSBhbiBBcnJheS4gSWYgeW91IGFyZSB1c2luZyBhIHN0cmluZyBsaWtlICdyZXBvRGF0YScsIHBsZWFzZSBjaGFuZ2UgaXQgdG8gYW4gQXJyYXksIGUuZy4gWydyZXBvRGF0YSddYAogICAgICAgICk7CiAgICAgIH0KICAgIH0KICAgIGNvbnN0IGFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTsKICAgIGNvbnN0IGFkZFNpZ25hbFByb3BlcnR5ID0gKG9iamVjdCkgPT4gewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqZWN0LCAic2lnbmFsIiwgewogICAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgICAgZ2V0OiAoKSA9PiB7CiAgICAgICAgICBfX3ByaXZhdGVTZXQodGhpcywgX2Fib3J0U2lnbmFsQ29uc3VtZWQsIHRydWUpOwogICAgICAgICAgcmV0dXJuIGFib3J0Q29udHJvbGxlci5zaWduYWw7CiAgICAgICAgfQogICAgICB9KTsKICAgIH07CiAgICBjb25zdCBmZXRjaEZuID0gKCkgPT4gewogICAgICBjb25zdCBxdWVyeUZuID0gZW5zdXJlUXVlcnlGbih0aGlzLm9wdGlvbnMsIGZldGNoT3B0aW9ucyk7CiAgICAgIGNvbnN0IGNyZWF0ZVF1ZXJ5Rm5Db250ZXh0ID0gKCkgPT4gewogICAgICAgIGNvbnN0IHF1ZXJ5Rm5Db250ZXh0MiA9IHsKICAgICAgICAgIGNsaWVudDogX19wcml2YXRlR2V0KHRoaXMsIF9jbGllbnQpLAogICAgICAgICAgcXVlcnlLZXk6IHRoaXMucXVlcnlLZXksCiAgICAgICAgICBtZXRhOiB0aGlzLm1ldGEKICAgICAgICB9OwogICAgICAgIGFkZFNpZ25hbFByb3BlcnR5KHF1ZXJ5Rm5Db250ZXh0Mik7CiAgICAgICAgcmV0dXJuIHF1ZXJ5Rm5Db250ZXh0MjsKICAgICAgfTsKICAgICAgY29uc3QgcXVlcnlGbkNvbnRleHQgPSBjcmVhdGVRdWVyeUZuQ29udGV4dCgpOwogICAgICBfX3ByaXZhdGVTZXQodGhpcywgX2Fib3J0U2lnbmFsQ29uc3VtZWQsIGZhbHNlKTsKICAgICAgaWYgKHRoaXMub3B0aW9ucy5wZXJzaXN0ZXIpIHsKICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnBlcnNpc3RlcigKICAgICAgICAgIHF1ZXJ5Rm4sCiAgICAgICAgICBxdWVyeUZuQ29udGV4dCwKICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgICB9CiAgICAgIHJldHVybiBxdWVyeUZuKHF1ZXJ5Rm5Db250ZXh0KTsKICAgIH07CiAgICBjb25zdCBjcmVhdGVGZXRjaENvbnRleHQgPSAoKSA9PiB7CiAgICAgIGNvbnN0IGNvbnRleHQyID0gewogICAgICAgIGZldGNoT3B0aW9ucywKICAgICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsCiAgICAgICAgcXVlcnlLZXk6IHRoaXMucXVlcnlLZXksCiAgICAgICAgY2xpZW50OiBfX3ByaXZhdGVHZXQodGhpcywgX2NsaWVudCksCiAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsCiAgICAgICAgZmV0Y2hGbgogICAgICB9OwogICAgICBhZGRTaWduYWxQcm9wZXJ0eShjb250ZXh0Mik7CiAgICAgIHJldHVybiBjb250ZXh0MjsKICAgIH07CiAgICBjb25zdCBjb250ZXh0ID0gY3JlYXRlRmV0Y2hDb250ZXh0KCk7CiAgICAoX2IgPSB0aGlzLm9wdGlvbnMuYmVoYXZpb3IpID09IG51bGwgPyB2b2lkIDAgOiBfYi5vbkZldGNoKGNvbnRleHQsIHRoaXMpOwogICAgX19wcml2YXRlU2V0KHRoaXMsIF9yZXZlcnRTdGF0ZSwgdGhpcy5zdGF0ZSk7CiAgICBpZiAodGhpcy5zdGF0ZS5mZXRjaFN0YXR1cyA9PT0gImlkbGUiIHx8IHRoaXMuc3RhdGUuZmV0Y2hNZXRhICE9PSAoKF9jID0gY29udGV4dC5mZXRjaE9wdGlvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYy5tZXRhKSkgewogICAgICBfX3ByaXZhdGVNZXRob2QodGhpcywgX1F1ZXJ5X2luc3RhbmNlcywgZGlzcGF0Y2hfZm4pLmNhbGwodGhpcywgeyB0eXBlOiAiZmV0Y2giLCBtZXRhOiAoX2QgPSBjb250ZXh0LmZldGNoT3B0aW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLm1ldGEgfSk7CiAgICB9CiAgICBfX3ByaXZhdGVTZXQodGhpcywgX3JldHJ5ZXIsIGNyZWF0ZVJldHJ5ZXIoewogICAgICBpbml0aWFsUHJvbWlzZTogZmV0Y2hPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBmZXRjaE9wdGlvbnMuaW5pdGlhbFByb21pc2UsCiAgICAgIGZuOiBjb250ZXh0LmZldGNoRm4sCiAgICAgIG9uQ2FuY2VsOiAoZXJyb3IpID0+IHsKICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBDYW5jZWxsZWRFcnJvciAmJiBlcnJvci5yZXZlcnQpIHsKICAgICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAuLi5fX3ByaXZhdGVHZXQodGhpcywgX3JldmVydFN0YXRlKSwKICAgICAgICAgICAgZmV0Y2hTdGF0dXM6ICJpZGxlIgogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGFib3J0Q29udHJvbGxlci5hYm9ydCgpOwogICAgICB9LAogICAgICBvbkZhaWw6IChmYWlsdXJlQ291bnQsIGVycm9yKSA9PiB7CiAgICAgICAgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9RdWVyeV9pbnN0YW5jZXMsIGRpc3BhdGNoX2ZuKS5jYWxsKHRoaXMsIHsgdHlwZTogImZhaWxlZCIsIGZhaWx1cmVDb3VudCwgZXJyb3IgfSk7CiAgICAgIH0sCiAgICAgIG9uUGF1c2U6ICgpID0+IHsKICAgICAgICBfX3ByaXZhdGVNZXRob2QodGhpcywgX1F1ZXJ5X2luc3RhbmNlcywgZGlzcGF0Y2hfZm4pLmNhbGwodGhpcywgeyB0eXBlOiAicGF1c2UiIH0pOwogICAgICB9LAogICAgICBvbkNvbnRpbnVlOiAoKSA9PiB7CiAgICAgICAgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9RdWVyeV9pbnN0YW5jZXMsIGRpc3BhdGNoX2ZuKS5jYWxsKHRoaXMsIHsgdHlwZTogImNvbnRpbnVlIiB9KTsKICAgICAgfSwKICAgICAgcmV0cnk6IGNvbnRleHQub3B0aW9ucy5yZXRyeSwKICAgICAgcmV0cnlEZWxheTogY29udGV4dC5vcHRpb25zLnJldHJ5RGVsYXksCiAgICAgIG5ldHdvcmtNb2RlOiBjb250ZXh0Lm9wdGlvbnMubmV0d29ya01vZGUsCiAgICAgIGNhblJ1bjogKCkgPT4gdHJ1ZQogICAgfSkpOwogICAgdHJ5IHsKICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IF9fcHJpdmF0ZUdldCh0aGlzLCBfcmV0cnllcikuc3RhcnQoKTsKICAgICAgaWYgKGRhdGEgPT09IHZvaWQgMCkgewogICAgICAgIGlmICh0cnVlKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKAogICAgICAgICAgICBgUXVlcnkgZGF0YSBjYW5ub3QgYmUgdW5kZWZpbmVkLiBQbGVhc2UgbWFrZSBzdXJlIHRvIHJldHVybiBhIHZhbHVlIG90aGVyIHRoYW4gdW5kZWZpbmVkIGZyb20geW91ciBxdWVyeSBmdW5jdGlvbi4gQWZmZWN0ZWQgcXVlcnkga2V5OiAke3RoaXMucXVlcnlIYXNofWAKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIHRocm93IG5ldyBFcnJvcihgJHt0aGlzLnF1ZXJ5SGFzaH0gZGF0YSBpcyB1bmRlZmluZWRgKTsKICAgICAgfQogICAgICB0aGlzLnNldERhdGEoZGF0YSk7CiAgICAgIChfZiA9IChfZSA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfY2FjaGUpLmNvbmZpZykub25TdWNjZXNzKSA9PSBudWxsID8gdm9pZCAwIDogX2YuY2FsbChfZSwgZGF0YSwgdGhpcyk7CiAgICAgIChfaCA9IChfZyA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfY2FjaGUpLmNvbmZpZykub25TZXR0bGVkKSA9PSBudWxsID8gdm9pZCAwIDogX2guY2FsbCgKICAgICAgICBfZywKICAgICAgICBkYXRhLAogICAgICAgIHRoaXMuc3RhdGUuZXJyb3IsCiAgICAgICAgdGhpcwogICAgICApOwogICAgICByZXR1cm4gZGF0YTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIENhbmNlbGxlZEVycm9yKSB7CiAgICAgICAgaWYgKGVycm9yLnNpbGVudCkgewogICAgICAgICAgcmV0dXJuIF9fcHJpdmF0ZUdldCh0aGlzLCBfcmV0cnllcikucHJvbWlzZTsKICAgICAgICB9IGVsc2UgaWYgKGVycm9yLnJldmVydCkgewogICAgICAgICAgaWYgKHRoaXMuc3RhdGUuZGF0YSA9PT0gdm9pZCAwKSB7CiAgICAgICAgICAgIHRocm93IGVycm9yOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuZGF0YTsKICAgICAgICB9CiAgICAgIH0KICAgICAgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9RdWVyeV9pbnN0YW5jZXMsIGRpc3BhdGNoX2ZuKS5jYWxsKHRoaXMsIHsKICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgIGVycm9yCiAgICAgIH0pOwogICAgICAoX2ogPSAoX2kgPSBfX3ByaXZhdGVHZXQodGhpcywgX2NhY2hlKS5jb25maWcpLm9uRXJyb3IpID09IG51bGwgPyB2b2lkIDAgOiBfai5jYWxsKAogICAgICAgIF9pLAogICAgICAgIGVycm9yLAogICAgICAgIHRoaXMKICAgICAgKTsKICAgICAgKF9sID0gKF9rID0gX19wcml2YXRlR2V0KHRoaXMsIF9jYWNoZSkuY29uZmlnKS5vblNldHRsZWQpID09IG51bGwgPyB2b2lkIDAgOiBfbC5jYWxsKAogICAgICAgIF9rLAogICAgICAgIHRoaXMuc3RhdGUuZGF0YSwKICAgICAgICBlcnJvciwKICAgICAgICB0aGlzCiAgICAgICk7CiAgICAgIHRocm93IGVycm9yOwogICAgfSBmaW5hbGx5IHsKICAgICAgdGhpcy5zY2hlZHVsZUdjKCk7CiAgICB9CiAgfQp9LCBfaW5pdGlhbFN0YXRlID0gbmV3IFdlYWtNYXAoKSwgX3JldmVydFN0YXRlID0gbmV3IFdlYWtNYXAoKSwgX2NhY2hlID0gbmV3IFdlYWtNYXAoKSwgX2NsaWVudCA9IG5ldyBXZWFrTWFwKCksIF9yZXRyeWVyID0gbmV3IFdlYWtNYXAoKSwgX2RlZmF1bHRPcHRpb25zID0gbmV3IFdlYWtNYXAoKSwgX2Fib3J0U2lnbmFsQ29uc3VtZWQgPSBuZXcgV2Vha01hcCgpLCBfUXVlcnlfaW5zdGFuY2VzID0gbmV3IFdlYWtTZXQoKSwgZGlzcGF0Y2hfZm4gPSBmdW5jdGlvbihhY3Rpb24pIHsKICBjb25zdCByZWR1Y2VyID0gKHN0YXRlKSA9PiB7CiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7CiAgICAgIGNhc2UgImZhaWxlZCI6CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLnN0YXRlLAogICAgICAgICAgZmV0Y2hGYWlsdXJlQ291bnQ6IGFjdGlvbi5mYWlsdXJlQ291bnQsCiAgICAgICAgICBmZXRjaEZhaWx1cmVSZWFzb246IGFjdGlvbi5lcnJvcgogICAgICAgIH07CiAgICAgIGNhc2UgInBhdXNlIjoKICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4uc3RhdGUsCiAgICAgICAgICBmZXRjaFN0YXR1czogInBhdXNlZCIKICAgICAgICB9OwogICAgICBjYXNlICJjb250aW51ZSI6CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLnN0YXRlLAogICAgICAgICAgZmV0Y2hTdGF0dXM6ICJmZXRjaGluZyIKICAgICAgICB9OwogICAgICBjYXNlICJmZXRjaCI6CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLnN0YXRlLAogICAgICAgICAgLi4uZmV0Y2hTdGF0ZShzdGF0ZS5kYXRhLCB0aGlzLm9wdGlvbnMpLAogICAgICAgICAgZmV0Y2hNZXRhOiBhY3Rpb24ubWV0YSA/PyBudWxsCiAgICAgICAgfTsKICAgICAgY2FzZSAic3VjY2VzcyI6CiAgICAgICAgY29uc3QgbmV3U3RhdGUgPSB7CiAgICAgICAgICAuLi5zdGF0ZSwKICAgICAgICAgIGRhdGE6IGFjdGlvbi5kYXRhLAogICAgICAgICAgZGF0YVVwZGF0ZUNvdW50OiBzdGF0ZS5kYXRhVXBkYXRlQ291bnQgKyAxLAogICAgICAgICAgZGF0YVVwZGF0ZWRBdDogYWN0aW9uLmRhdGFVcGRhdGVkQXQgPz8gRGF0ZS5ub3coKSwKICAgICAgICAgIGVycm9yOiBudWxsLAogICAgICAgICAgaXNJbnZhbGlkYXRlZDogZmFsc2UsCiAgICAgICAgICBzdGF0dXM6ICJzdWNjZXNzIiwKICAgICAgICAgIC4uLiFhY3Rpb24ubWFudWFsICYmIHsKICAgICAgICAgICAgZmV0Y2hTdGF0dXM6ICJpZGxlIiwKICAgICAgICAgICAgZmV0Y2hGYWlsdXJlQ291bnQ6IDAsCiAgICAgICAgICAgIGZldGNoRmFpbHVyZVJlYXNvbjogbnVsbAogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX19wcml2YXRlU2V0KHRoaXMsIF9yZXZlcnRTdGF0ZSwgYWN0aW9uLm1hbnVhbCA/IG5ld1N0YXRlIDogdm9pZCAwKTsKICAgICAgICByZXR1cm4gbmV3U3RhdGU7CiAgICAgIGNhc2UgImVycm9yIjoKICAgICAgICBjb25zdCBlcnJvciA9IGFjdGlvbi5lcnJvcjsKICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4uc3RhdGUsCiAgICAgICAgICBlcnJvciwKICAgICAgICAgIGVycm9yVXBkYXRlQ291bnQ6IHN0YXRlLmVycm9yVXBkYXRlQ291bnQgKyAxLAogICAgICAgICAgZXJyb3JVcGRhdGVkQXQ6IERhdGUubm93KCksCiAgICAgICAgICBmZXRjaEZhaWx1cmVDb3VudDogc3RhdGUuZmV0Y2hGYWlsdXJlQ291bnQgKyAxLAogICAgICAgICAgZmV0Y2hGYWlsdXJlUmVhc29uOiBlcnJvciwKICAgICAgICAgIGZldGNoU3RhdHVzOiAiaWRsZSIsCiAgICAgICAgICBzdGF0dXM6ICJlcnJvciIKICAgICAgICB9OwogICAgICBjYXNlICJpbnZhbGlkYXRlIjoKICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4uc3RhdGUsCiAgICAgICAgICBpc0ludmFsaWRhdGVkOiB0cnVlCiAgICAgICAgfTsKICAgICAgY2FzZSAic2V0U3RhdGUiOgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAuLi5zdGF0ZSwKICAgICAgICAgIC4uLmFjdGlvbi5zdGF0ZQogICAgICAgIH07CiAgICB9CiAgfTsKICB0aGlzLnN0YXRlID0gcmVkdWNlcih0aGlzLnN0YXRlKTsKICBub3RpZnlNYW5hZ2VyLmJhdGNoKCgpID0+IHsKICAgIHRoaXMub2JzZXJ2ZXJzLmZvckVhY2goKG9ic2VydmVyKSA9PiB7CiAgICAgIG9ic2VydmVyLm9uUXVlcnlVcGRhdGUoKTsKICAgIH0pOwogICAgX19wcml2YXRlR2V0KHRoaXMsIF9jYWNoZSkubm90aWZ5KHsgcXVlcnk6IHRoaXMsIHR5cGU6ICJ1cGRhdGVkIiwgYWN0aW9uIH0pOwogIH0pOwp9LCBfYTUpOwpmdW5jdGlvbiBmZXRjaFN0YXRlKGRhdGEsIG9wdGlvbnMpIHsKICByZXR1cm4gewogICAgZmV0Y2hGYWlsdXJlQ291bnQ6IDAsCiAgICBmZXRjaEZhaWx1cmVSZWFzb246IG51bGwsCiAgICBmZXRjaFN0YXR1czogY2FuRmV0Y2gob3B0aW9ucy5uZXR3b3JrTW9kZSkgPyAiZmV0Y2hpbmciIDogInBhdXNlZCIsCiAgICAuLi5kYXRhID09PSB2b2lkIDAgJiYgewogICAgICBlcnJvcjogbnVsbCwKICAgICAgc3RhdHVzOiAicGVuZGluZyIKICAgIH0KICB9Owp9CmZ1bmN0aW9uIGdldERlZmF1bHRTdGF0ZShvcHRpb25zKSB7CiAgY29uc3QgZGF0YSA9IHR5cGVvZiBvcHRpb25zLmluaXRpYWxEYXRhID09PSAiZnVuY3Rpb24iID8gb3B0aW9ucy5pbml0aWFsRGF0YSgpIDogb3B0aW9ucy5pbml0aWFsRGF0YTsKICBjb25zdCBoYXNEYXRhID0gZGF0YSAhPT0gdm9pZCAwOwogIGNvbnN0IGluaXRpYWxEYXRhVXBkYXRlZEF0ID0gaGFzRGF0YSA/IHR5cGVvZiBvcHRpb25zLmluaXRpYWxEYXRhVXBkYXRlZEF0ID09PSAiZnVuY3Rpb24iID8gb3B0aW9ucy5pbml0aWFsRGF0YVVwZGF0ZWRBdCgpIDogb3B0aW9ucy5pbml0aWFsRGF0YVVwZGF0ZWRBdCA6IDA7CiAgcmV0dXJuIHsKICAgIGRhdGEsCiAgICBkYXRhVXBkYXRlQ291bnQ6IDAsCiAgICBkYXRhVXBkYXRlZEF0OiBoYXNEYXRhID8gaW5pdGlhbERhdGFVcGRhdGVkQXQgPz8gRGF0ZS5ub3coKSA6IDAsCiAgICBlcnJvcjogbnVsbCwKICAgIGVycm9yVXBkYXRlQ291bnQ6IDAsCiAgICBlcnJvclVwZGF0ZWRBdDogMCwKICAgIGZldGNoRmFpbHVyZUNvdW50OiAwLAogICAgZmV0Y2hGYWlsdXJlUmVhc29uOiBudWxsLAogICAgZmV0Y2hNZXRhOiBudWxsLAogICAgaXNJbnZhbGlkYXRlZDogZmFsc2UsCiAgICBzdGF0dXM6IGhhc0RhdGEgPyAic3VjY2VzcyIgOiAicGVuZGluZyIsCiAgICBmZXRjaFN0YXR1czogImlkbGUiCiAgfTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0B0YW5zdGFjay9xdWVyeS1jb3JlL2J1aWxkL21vZGVybi9xdWVyeU9ic2VydmVyLmpzCnZhciBfY2xpZW50MiwgX2N1cnJlbnRRdWVyeSwgX2N1cnJlbnRRdWVyeUluaXRpYWxTdGF0ZSwgX2N1cnJlbnRSZXN1bHQsIF9jdXJyZW50UmVzdWx0U3RhdGUsIF9jdXJyZW50UmVzdWx0T3B0aW9ucywgX2N1cnJlbnRUaGVuYWJsZSwgX3NlbGVjdEVycm9yLCBfc2VsZWN0Rm4sIF9zZWxlY3RSZXN1bHQsIF9sYXN0UXVlcnlXaXRoRGVmaW5lZERhdGEsIF9zdGFsZVRpbWVvdXRJZCwgX3JlZmV0Y2hJbnRlcnZhbElkLCBfY3VycmVudFJlZmV0Y2hJbnRlcnZhbCwgX3RyYWNrZWRQcm9wcywgX1F1ZXJ5T2JzZXJ2ZXJfaW5zdGFuY2VzLCBleGVjdXRlRmV0Y2hfZm4sIHVwZGF0ZVN0YWxlVGltZW91dF9mbiwgY29tcHV0ZVJlZmV0Y2hJbnRlcnZhbF9mbiwgdXBkYXRlUmVmZXRjaEludGVydmFsX2ZuLCB1cGRhdGVUaW1lcnNfZm4sIGNsZWFyU3RhbGVUaW1lb3V0X2ZuLCBjbGVhclJlZmV0Y2hJbnRlcnZhbF9mbiwgdXBkYXRlUXVlcnlfZm4sIG5vdGlmeV9mbiwgX2E2Owp2YXIgUXVlcnlPYnNlcnZlciA9IChfYTYgPSBjbGFzcyBleHRlbmRzIFN1YnNjcmliYWJsZSB7CiAgY29uc3RydWN0b3IoY2xpZW50LCBvcHRpb25zKSB7CiAgICBzdXBlcigpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9RdWVyeU9ic2VydmVyX2luc3RhbmNlcyk7CiAgICBfX3ByaXZhdGVBZGQodGhpcywgX2NsaWVudDIpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9jdXJyZW50UXVlcnkpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9jdXJyZW50UXVlcnlJbml0aWFsU3RhdGUpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9jdXJyZW50UmVzdWx0KTsKICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfY3VycmVudFJlc3VsdFN0YXRlKTsKICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfY3VycmVudFJlc3VsdE9wdGlvbnMpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9jdXJyZW50VGhlbmFibGUpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9zZWxlY3RFcnJvcik7CiAgICBfX3ByaXZhdGVBZGQodGhpcywgX3NlbGVjdEZuKTsKICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfc2VsZWN0UmVzdWx0KTsKICAgIC8vIFRoaXMgcHJvcGVydHkga2VlcHMgdHJhY2sgb2YgdGhlIGxhc3QgcXVlcnkgd2l0aCBkZWZpbmVkIGRhdGEuCiAgICAvLyBJdCB3aWxsIGJlIHVzZWQgdG8gcGFzcyB0aGUgcHJldmlvdXMgZGF0YSBhbmQgcXVlcnkgdG8gdGhlIHBsYWNlaG9sZGVyIGZ1bmN0aW9uIGJldHdlZW4gcmVuZGVycy4KICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfbGFzdFF1ZXJ5V2l0aERlZmluZWREYXRhKTsKICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfc3RhbGVUaW1lb3V0SWQpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9yZWZldGNoSW50ZXJ2YWxJZCk7CiAgICBfX3ByaXZhdGVBZGQodGhpcywgX2N1cnJlbnRSZWZldGNoSW50ZXJ2YWwpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF90cmFja2VkUHJvcHMsIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCkpOwogICAgdGhpcy5vcHRpb25zID0gb3B0aW9uczsKICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfY2xpZW50MiwgY2xpZW50KTsKICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfc2VsZWN0RXJyb3IsIG51bGwpOwogICAgX19wcml2YXRlU2V0KHRoaXMsIF9jdXJyZW50VGhlbmFibGUsIHBlbmRpbmdUaGVuYWJsZSgpKTsKICAgIHRoaXMuYmluZE1ldGhvZHMoKTsKICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTsKICB9CiAgYmluZE1ldGhvZHMoKSB7CiAgICB0aGlzLnJlZmV0Y2ggPSB0aGlzLnJlZmV0Y2guYmluZCh0aGlzKTsKICB9CiAgb25TdWJzY3JpYmUoKSB7CiAgICBpZiAodGhpcy5saXN0ZW5lcnMuc2l6ZSA9PT0gMSkgewogICAgICBfX3ByaXZhdGVHZXQodGhpcywgX2N1cnJlbnRRdWVyeSkuYWRkT2JzZXJ2ZXIodGhpcyk7CiAgICAgIGlmIChzaG91bGRGZXRjaE9uTW91bnQoX19wcml2YXRlR2V0KHRoaXMsIF9jdXJyZW50UXVlcnkpLCB0aGlzLm9wdGlvbnMpKSB7CiAgICAgICAgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9RdWVyeU9ic2VydmVyX2luc3RhbmNlcywgZXhlY3V0ZUZldGNoX2ZuKS5jYWxsKHRoaXMpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudXBkYXRlUmVzdWx0KCk7CiAgICAgIH0KICAgICAgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9RdWVyeU9ic2VydmVyX2luc3RhbmNlcywgdXBkYXRlVGltZXJzX2ZuKS5jYWxsKHRoaXMpOwogICAgfQogIH0KICBvblVuc3Vic2NyaWJlKCkgewogICAgaWYgKCF0aGlzLmhhc0xpc3RlbmVycygpKSB7CiAgICAgIHRoaXMuZGVzdHJveSgpOwogICAgfQogIH0KICBzaG91bGRGZXRjaE9uUmVjb25uZWN0KCkgewogICAgcmV0dXJuIHNob3VsZEZldGNoT24oCiAgICAgIF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudFF1ZXJ5KSwKICAgICAgdGhpcy5vcHRpb25zLAogICAgICB0aGlzLm9wdGlvbnMucmVmZXRjaE9uUmVjb25uZWN0CiAgICApOwogIH0KICBzaG91bGRGZXRjaE9uV2luZG93Rm9jdXMoKSB7CiAgICByZXR1cm4gc2hvdWxkRmV0Y2hPbigKICAgICAgX19wcml2YXRlR2V0KHRoaXMsIF9jdXJyZW50UXVlcnkpLAogICAgICB0aGlzLm9wdGlvbnMsCiAgICAgIHRoaXMub3B0aW9ucy5yZWZldGNoT25XaW5kb3dGb2N1cwogICAgKTsKICB9CiAgZGVzdHJveSgpIHsKICAgIHRoaXMubGlzdGVuZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKICAgIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfUXVlcnlPYnNlcnZlcl9pbnN0YW5jZXMsIGNsZWFyU3RhbGVUaW1lb3V0X2ZuKS5jYWxsKHRoaXMpOwogICAgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9RdWVyeU9ic2VydmVyX2luc3RhbmNlcywgY2xlYXJSZWZldGNoSW50ZXJ2YWxfZm4pLmNhbGwodGhpcyk7CiAgICBfX3ByaXZhdGVHZXQodGhpcywgX2N1cnJlbnRRdWVyeSkucmVtb3ZlT2JzZXJ2ZXIodGhpcyk7CiAgfQogIHNldE9wdGlvbnMob3B0aW9ucykgewogICAgY29uc3QgcHJldk9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7CiAgICBjb25zdCBwcmV2UXVlcnkgPSBfX3ByaXZhdGVHZXQodGhpcywgX2N1cnJlbnRRdWVyeSk7CiAgICB0aGlzLm9wdGlvbnMgPSBfX3ByaXZhdGVHZXQodGhpcywgX2NsaWVudDIpLmRlZmF1bHRRdWVyeU9wdGlvbnMob3B0aW9ucyk7CiAgICBpZiAodGhpcy5vcHRpb25zLmVuYWJsZWQgIT09IHZvaWQgMCAmJiB0eXBlb2YgdGhpcy5vcHRpb25zLmVuYWJsZWQgIT09ICJib29sZWFuIiAmJiB0eXBlb2YgdGhpcy5vcHRpb25zLmVuYWJsZWQgIT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIHJlc29sdmVFbmFibGVkKHRoaXMub3B0aW9ucy5lbmFibGVkLCBfX3ByaXZhdGVHZXQodGhpcywgX2N1cnJlbnRRdWVyeSkpICE9PSAiYm9vbGVhbiIpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgICJFeHBlY3RlZCBlbmFibGVkIHRvIGJlIGEgYm9vbGVhbiBvciBhIGNhbGxiYWNrIHRoYXQgcmV0dXJucyBhIGJvb2xlYW4iCiAgICAgICk7CiAgICB9CiAgICBfX3ByaXZhdGVNZXRob2QodGhpcywgX1F1ZXJ5T2JzZXJ2ZXJfaW5zdGFuY2VzLCB1cGRhdGVRdWVyeV9mbikuY2FsbCh0aGlzKTsKICAgIF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudFF1ZXJ5KS5zZXRPcHRpb25zKHRoaXMub3B0aW9ucyk7CiAgICBpZiAocHJldk9wdGlvbnMuX2RlZmF1bHRlZCAmJiAhc2hhbGxvd0VxdWFsT2JqZWN0cyh0aGlzLm9wdGlvbnMsIHByZXZPcHRpb25zKSkgewogICAgICBfX3ByaXZhdGVHZXQodGhpcywgX2NsaWVudDIpLmdldFF1ZXJ5Q2FjaGUoKS5ub3RpZnkoewogICAgICAgIHR5cGU6ICJvYnNlcnZlck9wdGlvbnNVcGRhdGVkIiwKICAgICAgICBxdWVyeTogX19wcml2YXRlR2V0KHRoaXMsIF9jdXJyZW50UXVlcnkpLAogICAgICAgIG9ic2VydmVyOiB0aGlzCiAgICAgIH0pOwogICAgfQogICAgY29uc3QgbW91bnRlZCA9IHRoaXMuaGFzTGlzdGVuZXJzKCk7CiAgICBpZiAobW91bnRlZCAmJiBzaG91bGRGZXRjaE9wdGlvbmFsbHkoCiAgICAgIF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudFF1ZXJ5KSwKICAgICAgcHJldlF1ZXJ5LAogICAgICB0aGlzLm9wdGlvbnMsCiAgICAgIHByZXZPcHRpb25zCiAgICApKSB7CiAgICAgIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfUXVlcnlPYnNlcnZlcl9pbnN0YW5jZXMsIGV4ZWN1dGVGZXRjaF9mbikuY2FsbCh0aGlzKTsKICAgIH0KICAgIHRoaXMudXBkYXRlUmVzdWx0KCk7CiAgICBpZiAobW91bnRlZCAmJiAoX19wcml2YXRlR2V0KHRoaXMsIF9jdXJyZW50UXVlcnkpICE9PSBwcmV2UXVlcnkgfHwgcmVzb2x2ZUVuYWJsZWQodGhpcy5vcHRpb25zLmVuYWJsZWQsIF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudFF1ZXJ5KSkgIT09IHJlc29sdmVFbmFibGVkKHByZXZPcHRpb25zLmVuYWJsZWQsIF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudFF1ZXJ5KSkgfHwgcmVzb2x2ZVN0YWxlVGltZSh0aGlzLm9wdGlvbnMuc3RhbGVUaW1lLCBfX3ByaXZhdGVHZXQodGhpcywgX2N1cnJlbnRRdWVyeSkpICE9PSByZXNvbHZlU3RhbGVUaW1lKHByZXZPcHRpb25zLnN0YWxlVGltZSwgX19wcml2YXRlR2V0KHRoaXMsIF9jdXJyZW50UXVlcnkpKSkpIHsKICAgICAgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9RdWVyeU9ic2VydmVyX2luc3RhbmNlcywgdXBkYXRlU3RhbGVUaW1lb3V0X2ZuKS5jYWxsKHRoaXMpOwogICAgfQogICAgY29uc3QgbmV4dFJlZmV0Y2hJbnRlcnZhbCA9IF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfUXVlcnlPYnNlcnZlcl9pbnN0YW5jZXMsIGNvbXB1dGVSZWZldGNoSW50ZXJ2YWxfZm4pLmNhbGwodGhpcyk7CiAgICBpZiAobW91bnRlZCAmJiAoX19wcml2YXRlR2V0KHRoaXMsIF9jdXJyZW50UXVlcnkpICE9PSBwcmV2UXVlcnkgfHwgcmVzb2x2ZUVuYWJsZWQodGhpcy5vcHRpb25zLmVuYWJsZWQsIF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudFF1ZXJ5KSkgIT09IHJlc29sdmVFbmFibGVkKHByZXZPcHRpb25zLmVuYWJsZWQsIF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudFF1ZXJ5KSkgfHwgbmV4dFJlZmV0Y2hJbnRlcnZhbCAhPT0gX19wcml2YXRlR2V0KHRoaXMsIF9jdXJyZW50UmVmZXRjaEludGVydmFsKSkpIHsKICAgICAgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9RdWVyeU9ic2VydmVyX2luc3RhbmNlcywgdXBkYXRlUmVmZXRjaEludGVydmFsX2ZuKS5jYWxsKHRoaXMsIG5leHRSZWZldGNoSW50ZXJ2YWwpOwogICAgfQogIH0KICBnZXRPcHRpbWlzdGljUmVzdWx0KG9wdGlvbnMpIHsKICAgIGNvbnN0IHF1ZXJ5ID0gX19wcml2YXRlR2V0KHRoaXMsIF9jbGllbnQyKS5nZXRRdWVyeUNhY2hlKCkuYnVpbGQoX19wcml2YXRlR2V0KHRoaXMsIF9jbGllbnQyKSwgb3B0aW9ucyk7CiAgICBjb25zdCByZXN1bHQgPSB0aGlzLmNyZWF0ZVJlc3VsdChxdWVyeSwgb3B0aW9ucyk7CiAgICBpZiAoc2hvdWxkQXNzaWduT2JzZXJ2ZXJDdXJyZW50UHJvcGVydGllcyh0aGlzLCByZXN1bHQpKSB7CiAgICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfY3VycmVudFJlc3VsdCwgcmVzdWx0KTsKICAgICAgX19wcml2YXRlU2V0KHRoaXMsIF9jdXJyZW50UmVzdWx0T3B0aW9ucywgdGhpcy5vcHRpb25zKTsKICAgICAgX19wcml2YXRlU2V0KHRoaXMsIF9jdXJyZW50UmVzdWx0U3RhdGUsIF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudFF1ZXJ5KS5zdGF0ZSk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0OwogIH0KICBnZXRDdXJyZW50UmVzdWx0KCkgewogICAgcmV0dXJuIF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudFJlc3VsdCk7CiAgfQogIHRyYWNrUmVzdWx0KHJlc3VsdCwgb25Qcm9wVHJhY2tlZCkgewogICAgcmV0dXJuIG5ldyBQcm94eShyZXN1bHQsIHsKICAgICAgZ2V0OiAodGFyZ2V0LCBrZXkpID0+IHsKICAgICAgICB0aGlzLnRyYWNrUHJvcChrZXkpOwogICAgICAgIG9uUHJvcFRyYWNrZWQgPT0gbnVsbCA/IHZvaWQgMCA6IG9uUHJvcFRyYWNrZWQoa2V5KTsKICAgICAgICBpZiAoa2V5ID09PSAicHJvbWlzZSIgJiYgIXRoaXMub3B0aW9ucy5leHBlcmltZW50YWxfcHJlZmV0Y2hJblJlbmRlciAmJiBfX3ByaXZhdGVHZXQodGhpcywgX2N1cnJlbnRUaGVuYWJsZSkuc3RhdHVzID09PSAicGVuZGluZyIpIHsKICAgICAgICAgIF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudFRoZW5hYmxlKS5yZWplY3QoCiAgICAgICAgICAgIG5ldyBFcnJvcigKICAgICAgICAgICAgICAiZXhwZXJpbWVudGFsX3ByZWZldGNoSW5SZW5kZXIgZmVhdHVyZSBmbGFnIGlzIG5vdCBlbmFibGVkIgogICAgICAgICAgICApCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCBrZXkpOwogICAgICB9CiAgICB9KTsKICB9CiAgdHJhY2tQcm9wKGtleSkgewogICAgX19wcml2YXRlR2V0KHRoaXMsIF90cmFja2VkUHJvcHMpLmFkZChrZXkpOwogIH0KICBnZXRDdXJyZW50UXVlcnkoKSB7CiAgICByZXR1cm4gX19wcml2YXRlR2V0KHRoaXMsIF9jdXJyZW50UXVlcnkpOwogIH0KICByZWZldGNoKHsgLi4ub3B0aW9ucyB9ID0ge30pIHsKICAgIHJldHVybiB0aGlzLmZldGNoKHsKICAgICAgLi4ub3B0aW9ucwogICAgfSk7CiAgfQogIGZldGNoT3B0aW1pc3RpYyhvcHRpb25zKSB7CiAgICBjb25zdCBkZWZhdWx0ZWRPcHRpb25zID0gX19wcml2YXRlR2V0KHRoaXMsIF9jbGllbnQyKS5kZWZhdWx0UXVlcnlPcHRpb25zKG9wdGlvbnMpOwogICAgY29uc3QgcXVlcnkgPSBfX3ByaXZhdGVHZXQodGhpcywgX2NsaWVudDIpLmdldFF1ZXJ5Q2FjaGUoKS5idWlsZChfX3ByaXZhdGVHZXQodGhpcywgX2NsaWVudDIpLCBkZWZhdWx0ZWRPcHRpb25zKTsKICAgIHJldHVybiBxdWVyeS5mZXRjaCgpLnRoZW4oKCkgPT4gdGhpcy5jcmVhdGVSZXN1bHQocXVlcnksIGRlZmF1bHRlZE9wdGlvbnMpKTsKICB9CiAgZmV0Y2goZmV0Y2hPcHRpb25zKSB7CiAgICByZXR1cm4gX19wcml2YXRlTWV0aG9kKHRoaXMsIF9RdWVyeU9ic2VydmVyX2luc3RhbmNlcywgZXhlY3V0ZUZldGNoX2ZuKS5jYWxsKHRoaXMsIHsKICAgICAgLi4uZmV0Y2hPcHRpb25zLAogICAgICBjYW5jZWxSZWZldGNoOiBmZXRjaE9wdGlvbnMuY2FuY2VsUmVmZXRjaCA/PyB0cnVlCiAgICB9KS50aGVuKCgpID0+IHsKICAgICAgdGhpcy51cGRhdGVSZXN1bHQoKTsKICAgICAgcmV0dXJuIF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudFJlc3VsdCk7CiAgICB9KTsKICB9CiAgY3JlYXRlUmVzdWx0KHF1ZXJ5LCBvcHRpb25zKSB7CiAgICB2YXIgX2ExMzsKICAgIGNvbnN0IHByZXZRdWVyeSA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudFF1ZXJ5KTsKICAgIGNvbnN0IHByZXZPcHRpb25zID0gdGhpcy5vcHRpb25zOwogICAgY29uc3QgcHJldlJlc3VsdCA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudFJlc3VsdCk7CiAgICBjb25zdCBwcmV2UmVzdWx0U3RhdGUgPSBfX3ByaXZhdGVHZXQodGhpcywgX2N1cnJlbnRSZXN1bHRTdGF0ZSk7CiAgICBjb25zdCBwcmV2UmVzdWx0T3B0aW9ucyA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudFJlc3VsdE9wdGlvbnMpOwogICAgY29uc3QgcXVlcnlDaGFuZ2UgPSBxdWVyeSAhPT0gcHJldlF1ZXJ5OwogICAgY29uc3QgcXVlcnlJbml0aWFsU3RhdGUgPSBxdWVyeUNoYW5nZSA/IHF1ZXJ5LnN0YXRlIDogX19wcml2YXRlR2V0KHRoaXMsIF9jdXJyZW50UXVlcnlJbml0aWFsU3RhdGUpOwogICAgY29uc3QgeyBzdGF0ZSB9ID0gcXVlcnk7CiAgICBsZXQgbmV3U3RhdGUgPSB7IC4uLnN0YXRlIH07CiAgICBsZXQgaXNQbGFjZWhvbGRlckRhdGEgPSBmYWxzZTsKICAgIGxldCBkYXRhOwogICAgaWYgKG9wdGlvbnMuX29wdGltaXN0aWNSZXN1bHRzKSB7CiAgICAgIGNvbnN0IG1vdW50ZWQgPSB0aGlzLmhhc0xpc3RlbmVycygpOwogICAgICBjb25zdCBmZXRjaE9uTW91bnQgPSAhbW91bnRlZCAmJiBzaG91bGRGZXRjaE9uTW91bnQocXVlcnksIG9wdGlvbnMpOwogICAgICBjb25zdCBmZXRjaE9wdGlvbmFsbHkgPSBtb3VudGVkICYmIHNob3VsZEZldGNoT3B0aW9uYWxseShxdWVyeSwgcHJldlF1ZXJ5LCBvcHRpb25zLCBwcmV2T3B0aW9ucyk7CiAgICAgIGlmIChmZXRjaE9uTW91bnQgfHwgZmV0Y2hPcHRpb25hbGx5KSB7CiAgICAgICAgbmV3U3RhdGUgPSB7CiAgICAgICAgICAuLi5uZXdTdGF0ZSwKICAgICAgICAgIC4uLmZldGNoU3RhdGUoc3RhdGUuZGF0YSwgcXVlcnkub3B0aW9ucykKICAgICAgICB9OwogICAgICB9CiAgICAgIGlmIChvcHRpb25zLl9vcHRpbWlzdGljUmVzdWx0cyA9PT0gImlzUmVzdG9yaW5nIikgewogICAgICAgIG5ld1N0YXRlLmZldGNoU3RhdHVzID0gImlkbGUiOwogICAgICB9CiAgICB9CiAgICBsZXQgeyBlcnJvciwgZXJyb3JVcGRhdGVkQXQsIHN0YXR1cyB9ID0gbmV3U3RhdGU7CiAgICBkYXRhID0gbmV3U3RhdGUuZGF0YTsKICAgIGxldCBza2lwU2VsZWN0ID0gZmFsc2U7CiAgICBpZiAob3B0aW9ucy5wbGFjZWhvbGRlckRhdGEgIT09IHZvaWQgMCAmJiBkYXRhID09PSB2b2lkIDAgJiYgc3RhdHVzID09PSAicGVuZGluZyIpIHsKICAgICAgbGV0IHBsYWNlaG9sZGVyRGF0YTsKICAgICAgaWYgKChwcmV2UmVzdWx0ID09IG51bGwgPyB2b2lkIDAgOiBwcmV2UmVzdWx0LmlzUGxhY2Vob2xkZXJEYXRhKSAmJiBvcHRpb25zLnBsYWNlaG9sZGVyRGF0YSA9PT0gKHByZXZSZXN1bHRPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBwcmV2UmVzdWx0T3B0aW9ucy5wbGFjZWhvbGRlckRhdGEpKSB7CiAgICAgICAgcGxhY2Vob2xkZXJEYXRhID0gcHJldlJlc3VsdC5kYXRhOwogICAgICAgIHNraXBTZWxlY3QgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHBsYWNlaG9sZGVyRGF0YSA9IHR5cGVvZiBvcHRpb25zLnBsYWNlaG9sZGVyRGF0YSA9PT0gImZ1bmN0aW9uIiA/IG9wdGlvbnMucGxhY2Vob2xkZXJEYXRhKAogICAgICAgICAgKF9hMTMgPSBfX3ByaXZhdGVHZXQodGhpcywgX2xhc3RRdWVyeVdpdGhEZWZpbmVkRGF0YSkpID09IG51bGwgPyB2b2lkIDAgOiBfYTEzLnN0YXRlLmRhdGEsCiAgICAgICAgICBfX3ByaXZhdGVHZXQodGhpcywgX2xhc3RRdWVyeVdpdGhEZWZpbmVkRGF0YSkKICAgICAgICApIDogb3B0aW9ucy5wbGFjZWhvbGRlckRhdGE7CiAgICAgIH0KICAgICAgaWYgKHBsYWNlaG9sZGVyRGF0YSAhPT0gdm9pZCAwKSB7CiAgICAgICAgc3RhdHVzID0gInN1Y2Nlc3MiOwogICAgICAgIGRhdGEgPSByZXBsYWNlRGF0YSgKICAgICAgICAgIHByZXZSZXN1bHQgPT0gbnVsbCA/IHZvaWQgMCA6IHByZXZSZXN1bHQuZGF0YSwKICAgICAgICAgIHBsYWNlaG9sZGVyRGF0YSwKICAgICAgICAgIG9wdGlvbnMKICAgICAgICApOwogICAgICAgIGlzUGxhY2Vob2xkZXJEYXRhID0gdHJ1ZTsKICAgICAgfQogICAgfQogICAgaWYgKG9wdGlvbnMuc2VsZWN0ICYmIGRhdGEgIT09IHZvaWQgMCAmJiAhc2tpcFNlbGVjdCkgewogICAgICBpZiAocHJldlJlc3VsdCAmJiBkYXRhID09PSAocHJldlJlc3VsdFN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBwcmV2UmVzdWx0U3RhdGUuZGF0YSkgJiYgb3B0aW9ucy5zZWxlY3QgPT09IF9fcHJpdmF0ZUdldCh0aGlzLCBfc2VsZWN0Rm4pKSB7CiAgICAgICAgZGF0YSA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfc2VsZWN0UmVzdWx0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0cnkgewogICAgICAgICAgX19wcml2YXRlU2V0KHRoaXMsIF9zZWxlY3RGbiwgb3B0aW9ucy5zZWxlY3QpOwogICAgICAgICAgZGF0YSA9IG9wdGlvbnMuc2VsZWN0KGRhdGEpOwogICAgICAgICAgZGF0YSA9IHJlcGxhY2VEYXRhKHByZXZSZXN1bHQgPT0gbnVsbCA/IHZvaWQgMCA6IHByZXZSZXN1bHQuZGF0YSwgZGF0YSwgb3B0aW9ucyk7CiAgICAgICAgICBfX3ByaXZhdGVTZXQodGhpcywgX3NlbGVjdFJlc3VsdCwgZGF0YSk7CiAgICAgICAgICBfX3ByaXZhdGVTZXQodGhpcywgX3NlbGVjdEVycm9yLCBudWxsKTsKICAgICAgICB9IGNhdGNoIChzZWxlY3RFcnJvcikgewogICAgICAgICAgX19wcml2YXRlU2V0KHRoaXMsIF9zZWxlY3RFcnJvciwgc2VsZWN0RXJyb3IpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgaWYgKF9fcHJpdmF0ZUdldCh0aGlzLCBfc2VsZWN0RXJyb3IpKSB7CiAgICAgIGVycm9yID0gX19wcml2YXRlR2V0KHRoaXMsIF9zZWxlY3RFcnJvcik7CiAgICAgIGRhdGEgPSBfX3ByaXZhdGVHZXQodGhpcywgX3NlbGVjdFJlc3VsdCk7CiAgICAgIGVycm9yVXBkYXRlZEF0ID0gRGF0ZS5ub3coKTsKICAgICAgc3RhdHVzID0gImVycm9yIjsKICAgIH0KICAgIGNvbnN0IGlzRmV0Y2hpbmcgPSBuZXdTdGF0ZS5mZXRjaFN0YXR1cyA9PT0gImZldGNoaW5nIjsKICAgIGNvbnN0IGlzUGVuZGluZyA9IHN0YXR1cyA9PT0gInBlbmRpbmciOwogICAgY29uc3QgaXNFcnJvciA9IHN0YXR1cyA9PT0gImVycm9yIjsKICAgIGNvbnN0IGlzTG9hZGluZyA9IGlzUGVuZGluZyAmJiBpc0ZldGNoaW5nOwogICAgY29uc3QgaGFzRGF0YSA9IGRhdGEgIT09IHZvaWQgMDsKICAgIGNvbnN0IHJlc3VsdCA9IHsKICAgICAgc3RhdHVzLAogICAgICBmZXRjaFN0YXR1czogbmV3U3RhdGUuZmV0Y2hTdGF0dXMsCiAgICAgIGlzUGVuZGluZywKICAgICAgaXNTdWNjZXNzOiBzdGF0dXMgPT09ICJzdWNjZXNzIiwKICAgICAgaXNFcnJvciwKICAgICAgaXNJbml0aWFsTG9hZGluZzogaXNMb2FkaW5nLAogICAgICBpc0xvYWRpbmcsCiAgICAgIGRhdGEsCiAgICAgIGRhdGFVcGRhdGVkQXQ6IG5ld1N0YXRlLmRhdGFVcGRhdGVkQXQsCiAgICAgIGVycm9yLAogICAgICBlcnJvclVwZGF0ZWRBdCwKICAgICAgZmFpbHVyZUNvdW50OiBuZXdTdGF0ZS5mZXRjaEZhaWx1cmVDb3VudCwKICAgICAgZmFpbHVyZVJlYXNvbjogbmV3U3RhdGUuZmV0Y2hGYWlsdXJlUmVhc29uLAogICAgICBlcnJvclVwZGF0ZUNvdW50OiBuZXdTdGF0ZS5lcnJvclVwZGF0ZUNvdW50LAogICAgICBpc0ZldGNoZWQ6IG5ld1N0YXRlLmRhdGFVcGRhdGVDb3VudCA+IDAgfHwgbmV3U3RhdGUuZXJyb3JVcGRhdGVDb3VudCA+IDAsCiAgICAgIGlzRmV0Y2hlZEFmdGVyTW91bnQ6IG5ld1N0YXRlLmRhdGFVcGRhdGVDb3VudCA+IHF1ZXJ5SW5pdGlhbFN0YXRlLmRhdGFVcGRhdGVDb3VudCB8fCBuZXdTdGF0ZS5lcnJvclVwZGF0ZUNvdW50ID4gcXVlcnlJbml0aWFsU3RhdGUuZXJyb3JVcGRhdGVDb3VudCwKICAgICAgaXNGZXRjaGluZywKICAgICAgaXNSZWZldGNoaW5nOiBpc0ZldGNoaW5nICYmICFpc1BlbmRpbmcsCiAgICAgIGlzTG9hZGluZ0Vycm9yOiBpc0Vycm9yICYmICFoYXNEYXRhLAogICAgICBpc1BhdXNlZDogbmV3U3RhdGUuZmV0Y2hTdGF0dXMgPT09ICJwYXVzZWQiLAogICAgICBpc1BsYWNlaG9sZGVyRGF0YSwKICAgICAgaXNSZWZldGNoRXJyb3I6IGlzRXJyb3IgJiYgaGFzRGF0YSwKICAgICAgaXNTdGFsZTogaXNTdGFsZShxdWVyeSwgb3B0aW9ucyksCiAgICAgIHJlZmV0Y2g6IHRoaXMucmVmZXRjaCwKICAgICAgcHJvbWlzZTogX19wcml2YXRlR2V0KHRoaXMsIF9jdXJyZW50VGhlbmFibGUpLAogICAgICBpc0VuYWJsZWQ6IHJlc29sdmVFbmFibGVkKG9wdGlvbnMuZW5hYmxlZCwgcXVlcnkpICE9PSBmYWxzZQogICAgfTsKICAgIGNvbnN0IG5leHRSZXN1bHQgPSByZXN1bHQ7CiAgICBpZiAodGhpcy5vcHRpb25zLmV4cGVyaW1lbnRhbF9wcmVmZXRjaEluUmVuZGVyKSB7CiAgICAgIGNvbnN0IGZpbmFsaXplVGhlbmFibGVJZlBvc3NpYmxlID0gKHRoZW5hYmxlKSA9PiB7CiAgICAgICAgaWYgKG5leHRSZXN1bHQuc3RhdHVzID09PSAiZXJyb3IiKSB7CiAgICAgICAgICB0aGVuYWJsZS5yZWplY3QobmV4dFJlc3VsdC5lcnJvcik7CiAgICAgICAgfSBlbHNlIGlmIChuZXh0UmVzdWx0LmRhdGEgIT09IHZvaWQgMCkgewogICAgICAgICAgdGhlbmFibGUucmVzb2x2ZShuZXh0UmVzdWx0LmRhdGEpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgY29uc3QgcmVjcmVhdGVUaGVuYWJsZSA9ICgpID0+IHsKICAgICAgICBjb25zdCBwZW5kaW5nID0gX19wcml2YXRlU2V0KHRoaXMsIF9jdXJyZW50VGhlbmFibGUsIG5leHRSZXN1bHQucHJvbWlzZSA9IHBlbmRpbmdUaGVuYWJsZSgpKTsKICAgICAgICBmaW5hbGl6ZVRoZW5hYmxlSWZQb3NzaWJsZShwZW5kaW5nKTsKICAgICAgfTsKICAgICAgY29uc3QgcHJldlRoZW5hYmxlID0gX19wcml2YXRlR2V0KHRoaXMsIF9jdXJyZW50VGhlbmFibGUpOwogICAgICBzd2l0Y2ggKHByZXZUaGVuYWJsZS5zdGF0dXMpIHsKICAgICAgICBjYXNlICJwZW5kaW5nIjoKICAgICAgICAgIGlmIChxdWVyeS5xdWVyeUhhc2ggPT09IHByZXZRdWVyeS5xdWVyeUhhc2gpIHsKICAgICAgICAgICAgZmluYWxpemVUaGVuYWJsZUlmUG9zc2libGUocHJldlRoZW5hYmxlKTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgImZ1bGZpbGxlZCI6CiAgICAgICAgICBpZiAobmV4dFJlc3VsdC5zdGF0dXMgPT09ICJlcnJvciIgfHwgbmV4dFJlc3VsdC5kYXRhICE9PSBwcmV2VGhlbmFibGUudmFsdWUpIHsKICAgICAgICAgICAgcmVjcmVhdGVUaGVuYWJsZSgpOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAicmVqZWN0ZWQiOgogICAgICAgICAgaWYgKG5leHRSZXN1bHQuc3RhdHVzICE9PSAiZXJyb3IiIHx8IG5leHRSZXN1bHQuZXJyb3IgIT09IHByZXZUaGVuYWJsZS5yZWFzb24pIHsKICAgICAgICAgICAgcmVjcmVhdGVUaGVuYWJsZSgpOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBuZXh0UmVzdWx0OwogIH0KICB1cGRhdGVSZXN1bHQoKSB7CiAgICBjb25zdCBwcmV2UmVzdWx0ID0gX19wcml2YXRlR2V0KHRoaXMsIF9jdXJyZW50UmVzdWx0KTsKICAgIGNvbnN0IG5leHRSZXN1bHQgPSB0aGlzLmNyZWF0ZVJlc3VsdChfX3ByaXZhdGVHZXQodGhpcywgX2N1cnJlbnRRdWVyeSksIHRoaXMub3B0aW9ucyk7CiAgICBfX3ByaXZhdGVTZXQodGhpcywgX2N1cnJlbnRSZXN1bHRTdGF0ZSwgX19wcml2YXRlR2V0KHRoaXMsIF9jdXJyZW50UXVlcnkpLnN0YXRlKTsKICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfY3VycmVudFJlc3VsdE9wdGlvbnMsIHRoaXMub3B0aW9ucyk7CiAgICBpZiAoX19wcml2YXRlR2V0KHRoaXMsIF9jdXJyZW50UmVzdWx0U3RhdGUpLmRhdGEgIT09IHZvaWQgMCkgewogICAgICBfX3ByaXZhdGVTZXQodGhpcywgX2xhc3RRdWVyeVdpdGhEZWZpbmVkRGF0YSwgX19wcml2YXRlR2V0KHRoaXMsIF9jdXJyZW50UXVlcnkpKTsKICAgIH0KICAgIGlmIChzaGFsbG93RXF1YWxPYmplY3RzKG5leHRSZXN1bHQsIHByZXZSZXN1bHQpKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfY3VycmVudFJlc3VsdCwgbmV4dFJlc3VsdCk7CiAgICBjb25zdCBzaG91bGROb3RpZnlMaXN0ZW5lcnMgPSAoKSA9PiB7CiAgICAgIGlmICghcHJldlJlc3VsdCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIGNvbnN0IHsgbm90aWZ5T25DaGFuZ2VQcm9wcyB9ID0gdGhpcy5vcHRpb25zOwogICAgICBjb25zdCBub3RpZnlPbkNoYW5nZVByb3BzVmFsdWUgPSB0eXBlb2Ygbm90aWZ5T25DaGFuZ2VQcm9wcyA9PT0gImZ1bmN0aW9uIiA/IG5vdGlmeU9uQ2hhbmdlUHJvcHMoKSA6IG5vdGlmeU9uQ2hhbmdlUHJvcHM7CiAgICAgIGlmIChub3RpZnlPbkNoYW5nZVByb3BzVmFsdWUgPT09ICJhbGwiIHx8ICFub3RpZnlPbkNoYW5nZVByb3BzVmFsdWUgJiYgIV9fcHJpdmF0ZUdldCh0aGlzLCBfdHJhY2tlZFByb3BzKS5zaXplKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgY29uc3QgaW5jbHVkZWRQcm9wcyA9IG5ldyBTZXQoCiAgICAgICAgbm90aWZ5T25DaGFuZ2VQcm9wc1ZhbHVlID8/IF9fcHJpdmF0ZUdldCh0aGlzLCBfdHJhY2tlZFByb3BzKQogICAgICApOwogICAgICBpZiAodGhpcy5vcHRpb25zLnRocm93T25FcnJvcikgewogICAgICAgIGluY2x1ZGVkUHJvcHMuYWRkKCJlcnJvciIpOwogICAgICB9CiAgICAgIHJldHVybiBPYmplY3Qua2V5cyhfX3ByaXZhdGVHZXQodGhpcywgX2N1cnJlbnRSZXN1bHQpKS5zb21lKChrZXkpID0+IHsKICAgICAgICBjb25zdCB0eXBlZEtleSA9IGtleTsKICAgICAgICBjb25zdCBjaGFuZ2VkID0gX19wcml2YXRlR2V0KHRoaXMsIF9jdXJyZW50UmVzdWx0KVt0eXBlZEtleV0gIT09IHByZXZSZXN1bHRbdHlwZWRLZXldOwogICAgICAgIHJldHVybiBjaGFuZ2VkICYmIGluY2x1ZGVkUHJvcHMuaGFzKHR5cGVkS2V5KTsKICAgICAgfSk7CiAgICB9OwogICAgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9RdWVyeU9ic2VydmVyX2luc3RhbmNlcywgbm90aWZ5X2ZuKS5jYWxsKHRoaXMsIHsgbGlzdGVuZXJzOiBzaG91bGROb3RpZnlMaXN0ZW5lcnMoKSB9KTsKICB9CiAgb25RdWVyeVVwZGF0ZSgpIHsKICAgIHRoaXMudXBkYXRlUmVzdWx0KCk7CiAgICBpZiAodGhpcy5oYXNMaXN0ZW5lcnMoKSkgewogICAgICBfX3ByaXZhdGVNZXRob2QodGhpcywgX1F1ZXJ5T2JzZXJ2ZXJfaW5zdGFuY2VzLCB1cGRhdGVUaW1lcnNfZm4pLmNhbGwodGhpcyk7CiAgICB9CiAgfQp9LCBfY2xpZW50MiA9IG5ldyBXZWFrTWFwKCksIF9jdXJyZW50UXVlcnkgPSBuZXcgV2Vha01hcCgpLCBfY3VycmVudFF1ZXJ5SW5pdGlhbFN0YXRlID0gbmV3IFdlYWtNYXAoKSwgX2N1cnJlbnRSZXN1bHQgPSBuZXcgV2Vha01hcCgpLCBfY3VycmVudFJlc3VsdFN0YXRlID0gbmV3IFdlYWtNYXAoKSwgX2N1cnJlbnRSZXN1bHRPcHRpb25zID0gbmV3IFdlYWtNYXAoKSwgX2N1cnJlbnRUaGVuYWJsZSA9IG5ldyBXZWFrTWFwKCksIF9zZWxlY3RFcnJvciA9IG5ldyBXZWFrTWFwKCksIF9zZWxlY3RGbiA9IG5ldyBXZWFrTWFwKCksIF9zZWxlY3RSZXN1bHQgPSBuZXcgV2Vha01hcCgpLCBfbGFzdFF1ZXJ5V2l0aERlZmluZWREYXRhID0gbmV3IFdlYWtNYXAoKSwgX3N0YWxlVGltZW91dElkID0gbmV3IFdlYWtNYXAoKSwgX3JlZmV0Y2hJbnRlcnZhbElkID0gbmV3IFdlYWtNYXAoKSwgX2N1cnJlbnRSZWZldGNoSW50ZXJ2YWwgPSBuZXcgV2Vha01hcCgpLCBfdHJhY2tlZFByb3BzID0gbmV3IFdlYWtNYXAoKSwgX1F1ZXJ5T2JzZXJ2ZXJfaW5zdGFuY2VzID0gbmV3IFdlYWtTZXQoKSwgZXhlY3V0ZUZldGNoX2ZuID0gZnVuY3Rpb24oZmV0Y2hPcHRpb25zKSB7CiAgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9RdWVyeU9ic2VydmVyX2luc3RhbmNlcywgdXBkYXRlUXVlcnlfZm4pLmNhbGwodGhpcyk7CiAgbGV0IHByb21pc2UgPSBfX3ByaXZhdGVHZXQodGhpcywgX2N1cnJlbnRRdWVyeSkuZmV0Y2goCiAgICB0aGlzLm9wdGlvbnMsCiAgICBmZXRjaE9wdGlvbnMKICApOwogIGlmICghKGZldGNoT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogZmV0Y2hPcHRpb25zLnRocm93T25FcnJvcikpIHsKICAgIHByb21pc2UgPSBwcm9taXNlLmNhdGNoKG5vb3ApOwogIH0KICByZXR1cm4gcHJvbWlzZTsKfSwgdXBkYXRlU3RhbGVUaW1lb3V0X2ZuID0gZnVuY3Rpb24oKSB7CiAgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9RdWVyeU9ic2VydmVyX2luc3RhbmNlcywgY2xlYXJTdGFsZVRpbWVvdXRfZm4pLmNhbGwodGhpcyk7CiAgY29uc3Qgc3RhbGVUaW1lID0gcmVzb2x2ZVN0YWxlVGltZSgKICAgIHRoaXMub3B0aW9ucy5zdGFsZVRpbWUsCiAgICBfX3ByaXZhdGVHZXQodGhpcywgX2N1cnJlbnRRdWVyeSkKICApOwogIGlmIChpc1NlcnZlciB8fCBfX3ByaXZhdGVHZXQodGhpcywgX2N1cnJlbnRSZXN1bHQpLmlzU3RhbGUgfHwgIWlzVmFsaWRUaW1lb3V0KHN0YWxlVGltZSkpIHsKICAgIHJldHVybjsKICB9CiAgY29uc3QgdGltZSA9IHRpbWVVbnRpbFN0YWxlKF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudFJlc3VsdCkuZGF0YVVwZGF0ZWRBdCwgc3RhbGVUaW1lKTsKICBjb25zdCB0aW1lb3V0ID0gdGltZSArIDE7CiAgX19wcml2YXRlU2V0KHRoaXMsIF9zdGFsZVRpbWVvdXRJZCwgdGltZW91dE1hbmFnZXIuc2V0VGltZW91dCgoKSA9PiB7CiAgICBpZiAoIV9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudFJlc3VsdCkuaXNTdGFsZSkgewogICAgICB0aGlzLnVwZGF0ZVJlc3VsdCgpOwogICAgfQogIH0sIHRpbWVvdXQpKTsKfSwgY29tcHV0ZVJlZmV0Y2hJbnRlcnZhbF9mbiA9IGZ1bmN0aW9uKCkgewogIHJldHVybiAodHlwZW9mIHRoaXMub3B0aW9ucy5yZWZldGNoSW50ZXJ2YWwgPT09ICJmdW5jdGlvbiIgPyB0aGlzLm9wdGlvbnMucmVmZXRjaEludGVydmFsKF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudFF1ZXJ5KSkgOiB0aGlzLm9wdGlvbnMucmVmZXRjaEludGVydmFsKSA/PyBmYWxzZTsKfSwgdXBkYXRlUmVmZXRjaEludGVydmFsX2ZuID0gZnVuY3Rpb24obmV4dEludGVydmFsKSB7CiAgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9RdWVyeU9ic2VydmVyX2luc3RhbmNlcywgY2xlYXJSZWZldGNoSW50ZXJ2YWxfZm4pLmNhbGwodGhpcyk7CiAgX19wcml2YXRlU2V0KHRoaXMsIF9jdXJyZW50UmVmZXRjaEludGVydmFsLCBuZXh0SW50ZXJ2YWwpOwogIGlmIChpc1NlcnZlciB8fCByZXNvbHZlRW5hYmxlZCh0aGlzLm9wdGlvbnMuZW5hYmxlZCwgX19wcml2YXRlR2V0KHRoaXMsIF9jdXJyZW50UXVlcnkpKSA9PT0gZmFsc2UgfHwgIWlzVmFsaWRUaW1lb3V0KF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudFJlZmV0Y2hJbnRlcnZhbCkpIHx8IF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudFJlZmV0Y2hJbnRlcnZhbCkgPT09IDApIHsKICAgIHJldHVybjsKICB9CiAgX19wcml2YXRlU2V0KHRoaXMsIF9yZWZldGNoSW50ZXJ2YWxJZCwgdGltZW91dE1hbmFnZXIuc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgaWYgKHRoaXMub3B0aW9ucy5yZWZldGNoSW50ZXJ2YWxJbkJhY2tncm91bmQgfHwgZm9jdXNNYW5hZ2VyLmlzRm9jdXNlZCgpKSB7CiAgICAgIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfUXVlcnlPYnNlcnZlcl9pbnN0YW5jZXMsIGV4ZWN1dGVGZXRjaF9mbikuY2FsbCh0aGlzKTsKICAgIH0KICB9LCBfX3ByaXZhdGVHZXQodGhpcywgX2N1cnJlbnRSZWZldGNoSW50ZXJ2YWwpKSk7Cn0sIHVwZGF0ZVRpbWVyc19mbiA9IGZ1bmN0aW9uKCkgewogIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfUXVlcnlPYnNlcnZlcl9pbnN0YW5jZXMsIHVwZGF0ZVN0YWxlVGltZW91dF9mbikuY2FsbCh0aGlzKTsKICBfX3ByaXZhdGVNZXRob2QodGhpcywgX1F1ZXJ5T2JzZXJ2ZXJfaW5zdGFuY2VzLCB1cGRhdGVSZWZldGNoSW50ZXJ2YWxfZm4pLmNhbGwodGhpcywgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9RdWVyeU9ic2VydmVyX2luc3RhbmNlcywgY29tcHV0ZVJlZmV0Y2hJbnRlcnZhbF9mbikuY2FsbCh0aGlzKSk7Cn0sIGNsZWFyU3RhbGVUaW1lb3V0X2ZuID0gZnVuY3Rpb24oKSB7CiAgaWYgKF9fcHJpdmF0ZUdldCh0aGlzLCBfc3RhbGVUaW1lb3V0SWQpKSB7CiAgICB0aW1lb3V0TWFuYWdlci5jbGVhclRpbWVvdXQoX19wcml2YXRlR2V0KHRoaXMsIF9zdGFsZVRpbWVvdXRJZCkpOwogICAgX19wcml2YXRlU2V0KHRoaXMsIF9zdGFsZVRpbWVvdXRJZCwgdm9pZCAwKTsKICB9Cn0sIGNsZWFyUmVmZXRjaEludGVydmFsX2ZuID0gZnVuY3Rpb24oKSB7CiAgaWYgKF9fcHJpdmF0ZUdldCh0aGlzLCBfcmVmZXRjaEludGVydmFsSWQpKSB7CiAgICB0aW1lb3V0TWFuYWdlci5jbGVhckludGVydmFsKF9fcHJpdmF0ZUdldCh0aGlzLCBfcmVmZXRjaEludGVydmFsSWQpKTsKICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfcmVmZXRjaEludGVydmFsSWQsIHZvaWQgMCk7CiAgfQp9LCB1cGRhdGVRdWVyeV9mbiA9IGZ1bmN0aW9uKCkgewogIGNvbnN0IHF1ZXJ5ID0gX19wcml2YXRlR2V0KHRoaXMsIF9jbGllbnQyKS5nZXRRdWVyeUNhY2hlKCkuYnVpbGQoX19wcml2YXRlR2V0KHRoaXMsIF9jbGllbnQyKSwgdGhpcy5vcHRpb25zKTsKICBpZiAocXVlcnkgPT09IF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudFF1ZXJ5KSkgewogICAgcmV0dXJuOwogIH0KICBjb25zdCBwcmV2UXVlcnkgPSBfX3ByaXZhdGVHZXQodGhpcywgX2N1cnJlbnRRdWVyeSk7CiAgX19wcml2YXRlU2V0KHRoaXMsIF9jdXJyZW50UXVlcnksIHF1ZXJ5KTsKICBfX3ByaXZhdGVTZXQodGhpcywgX2N1cnJlbnRRdWVyeUluaXRpYWxTdGF0ZSwgcXVlcnkuc3RhdGUpOwogIGlmICh0aGlzLmhhc0xpc3RlbmVycygpKSB7CiAgICBwcmV2UXVlcnkgPT0gbnVsbCA/IHZvaWQgMCA6IHByZXZRdWVyeS5yZW1vdmVPYnNlcnZlcih0aGlzKTsKICAgIHF1ZXJ5LmFkZE9ic2VydmVyKHRoaXMpOwogIH0KfSwgbm90aWZ5X2ZuID0gZnVuY3Rpb24obm90aWZ5T3B0aW9ucykgewogIG5vdGlmeU1hbmFnZXIuYmF0Y2goKCkgPT4gewogICAgaWYgKG5vdGlmeU9wdGlvbnMubGlzdGVuZXJzKSB7CiAgICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiB7CiAgICAgICAgbGlzdGVuZXIoX19wcml2YXRlR2V0KHRoaXMsIF9jdXJyZW50UmVzdWx0KSk7CiAgICAgIH0pOwogICAgfQogICAgX19wcml2YXRlR2V0KHRoaXMsIF9jbGllbnQyKS5nZXRRdWVyeUNhY2hlKCkubm90aWZ5KHsKICAgICAgcXVlcnk6IF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudFF1ZXJ5KSwKICAgICAgdHlwZTogIm9ic2VydmVyUmVzdWx0c1VwZGF0ZWQiCiAgICB9KTsKICB9KTsKfSwgX2E2KTsKZnVuY3Rpb24gc2hvdWxkTG9hZE9uTW91bnQocXVlcnksIG9wdGlvbnMpIHsKICByZXR1cm4gcmVzb2x2ZUVuYWJsZWQob3B0aW9ucy5lbmFibGVkLCBxdWVyeSkgIT09IGZhbHNlICYmIHF1ZXJ5LnN0YXRlLmRhdGEgPT09IHZvaWQgMCAmJiAhKHF1ZXJ5LnN0YXRlLnN0YXR1cyA9PT0gImVycm9yIiAmJiBvcHRpb25zLnJldHJ5T25Nb3VudCA9PT0gZmFsc2UpOwp9CmZ1bmN0aW9uIHNob3VsZEZldGNoT25Nb3VudChxdWVyeSwgb3B0aW9ucykgewogIHJldHVybiBzaG91bGRMb2FkT25Nb3VudChxdWVyeSwgb3B0aW9ucykgfHwgcXVlcnkuc3RhdGUuZGF0YSAhPT0gdm9pZCAwICYmIHNob3VsZEZldGNoT24ocXVlcnksIG9wdGlvbnMsIG9wdGlvbnMucmVmZXRjaE9uTW91bnQpOwp9CmZ1bmN0aW9uIHNob3VsZEZldGNoT24ocXVlcnksIG9wdGlvbnMsIGZpZWxkKSB7CiAgaWYgKHJlc29sdmVFbmFibGVkKG9wdGlvbnMuZW5hYmxlZCwgcXVlcnkpICE9PSBmYWxzZSAmJiByZXNvbHZlU3RhbGVUaW1lKG9wdGlvbnMuc3RhbGVUaW1lLCBxdWVyeSkgIT09ICJzdGF0aWMiKSB7CiAgICBjb25zdCB2YWx1ZSA9IHR5cGVvZiBmaWVsZCA9PT0gImZ1bmN0aW9uIiA/IGZpZWxkKHF1ZXJ5KSA6IGZpZWxkOwogICAgcmV0dXJuIHZhbHVlID09PSAiYWx3YXlzIiB8fCB2YWx1ZSAhPT0gZmFsc2UgJiYgaXNTdGFsZShxdWVyeSwgb3B0aW9ucyk7CiAgfQogIHJldHVybiBmYWxzZTsKfQpmdW5jdGlvbiBzaG91bGRGZXRjaE9wdGlvbmFsbHkocXVlcnksIHByZXZRdWVyeSwgb3B0aW9ucywgcHJldk9wdGlvbnMpIHsKICByZXR1cm4gKHF1ZXJ5ICE9PSBwcmV2UXVlcnkgfHwgcmVzb2x2ZUVuYWJsZWQocHJldk9wdGlvbnMuZW5hYmxlZCwgcXVlcnkpID09PSBmYWxzZSkgJiYgKCFvcHRpb25zLnN1c3BlbnNlIHx8IHF1ZXJ5LnN0YXRlLnN0YXR1cyAhPT0gImVycm9yIikgJiYgaXNTdGFsZShxdWVyeSwgb3B0aW9ucyk7Cn0KZnVuY3Rpb24gaXNTdGFsZShxdWVyeSwgb3B0aW9ucykgewogIHJldHVybiByZXNvbHZlRW5hYmxlZChvcHRpb25zLmVuYWJsZWQsIHF1ZXJ5KSAhPT0gZmFsc2UgJiYgcXVlcnkuaXNTdGFsZUJ5VGltZShyZXNvbHZlU3RhbGVUaW1lKG9wdGlvbnMuc3RhbGVUaW1lLCBxdWVyeSkpOwp9CmZ1bmN0aW9uIHNob3VsZEFzc2lnbk9ic2VydmVyQ3VycmVudFByb3BlcnRpZXMob2JzZXJ2ZXIsIG9wdGltaXN0aWNSZXN1bHQpIHsKICBpZiAoIXNoYWxsb3dFcXVhbE9iamVjdHMob2JzZXJ2ZXIuZ2V0Q3VycmVudFJlc3VsdCgpLCBvcHRpbWlzdGljUmVzdWx0KSkgewogICAgcmV0dXJuIHRydWU7CiAgfQogIHJldHVybiBmYWxzZTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0B0YW5zdGFjay9xdWVyeS1jb3JlL2J1aWxkL21vZGVybi9pbmZpbml0ZVF1ZXJ5QmVoYXZpb3IuanMKZnVuY3Rpb24gaW5maW5pdGVRdWVyeUJlaGF2aW9yKHBhZ2VzKSB7CiAgcmV0dXJuIHsKICAgIG9uRmV0Y2g6IChjb250ZXh0LCBxdWVyeSkgPT4gewogICAgICB2YXIgX2ExMywgX2IsIF9jLCBfZCwgX2U7CiAgICAgIGNvbnN0IG9wdGlvbnMgPSBjb250ZXh0Lm9wdGlvbnM7CiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IChfYyA9IChfYiA9IChfYTEzID0gY29udGV4dC5mZXRjaE9wdGlvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYTEzLm1ldGEpID09IG51bGwgPyB2b2lkIDAgOiBfYi5mZXRjaE1vcmUpID09IG51bGwgPyB2b2lkIDAgOiBfYy5kaXJlY3Rpb247CiAgICAgIGNvbnN0IG9sZFBhZ2VzID0gKChfZCA9IGNvbnRleHQuc3RhdGUuZGF0YSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLnBhZ2VzKSB8fCBbXTsKICAgICAgY29uc3Qgb2xkUGFnZVBhcmFtcyA9ICgoX2UgPSBjb250ZXh0LnN0YXRlLmRhdGEpID09IG51bGwgPyB2b2lkIDAgOiBfZS5wYWdlUGFyYW1zKSB8fCBbXTsKICAgICAgbGV0IHJlc3VsdCA9IHsgcGFnZXM6IFtdLCBwYWdlUGFyYW1zOiBbXSB9OwogICAgICBsZXQgY3VycmVudFBhZ2UgPSAwOwogICAgICBjb25zdCBmZXRjaEZuID0gYXN5bmMgKCkgPT4gewogICAgICAgIGxldCBjYW5jZWxsZWQgPSBmYWxzZTsKICAgICAgICBjb25zdCBhZGRTaWduYWxQcm9wZXJ0eSA9IChvYmplY3QpID0+IHsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmplY3QsICJzaWduYWwiLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgICAgICAgIGdldDogKCkgPT4gewogICAgICAgICAgICAgIGlmIChjb250ZXh0LnNpZ25hbC5hYm9ydGVkKSB7CiAgICAgICAgICAgICAgICBjYW5jZWxsZWQgPSB0cnVlOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb250ZXh0LnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCJhYm9ydCIsICgpID0+IHsKICAgICAgICAgICAgICAgICAgY2FuY2VsbGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5zaWduYWw7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgY29uc3QgcXVlcnlGbiA9IGVuc3VyZVF1ZXJ5Rm4oY29udGV4dC5vcHRpb25zLCBjb250ZXh0LmZldGNoT3B0aW9ucyk7CiAgICAgICAgY29uc3QgZmV0Y2hQYWdlID0gYXN5bmMgKGRhdGEsIHBhcmFtLCBwcmV2aW91cykgPT4gewogICAgICAgICAgaWYgKGNhbmNlbGxlZCkgewogICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChwYXJhbSA9PSBudWxsICYmIGRhdGEucGFnZXMubGVuZ3RoKSB7CiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBjcmVhdGVRdWVyeUZuQ29udGV4dCA9ICgpID0+IHsKICAgICAgICAgICAgY29uc3QgcXVlcnlGbkNvbnRleHQyID0gewogICAgICAgICAgICAgIGNsaWVudDogY29udGV4dC5jbGllbnQsCiAgICAgICAgICAgICAgcXVlcnlLZXk6IGNvbnRleHQucXVlcnlLZXksCiAgICAgICAgICAgICAgcGFnZVBhcmFtOiBwYXJhbSwKICAgICAgICAgICAgICBkaXJlY3Rpb246IHByZXZpb3VzID8gImJhY2t3YXJkIiA6ICJmb3J3YXJkIiwKICAgICAgICAgICAgICBtZXRhOiBjb250ZXh0Lm9wdGlvbnMubWV0YQogICAgICAgICAgICB9OwogICAgICAgICAgICBhZGRTaWduYWxQcm9wZXJ0eShxdWVyeUZuQ29udGV4dDIpOwogICAgICAgICAgICByZXR1cm4gcXVlcnlGbkNvbnRleHQyOwogICAgICAgICAgfTsKICAgICAgICAgIGNvbnN0IHF1ZXJ5Rm5Db250ZXh0ID0gY3JlYXRlUXVlcnlGbkNvbnRleHQoKTsKICAgICAgICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCBxdWVyeUZuKHF1ZXJ5Rm5Db250ZXh0KTsKICAgICAgICAgIGNvbnN0IHsgbWF4UGFnZXMgfSA9IGNvbnRleHQub3B0aW9uczsKICAgICAgICAgIGNvbnN0IGFkZFRvID0gcHJldmlvdXMgPyBhZGRUb1N0YXJ0IDogYWRkVG9FbmQ7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBwYWdlczogYWRkVG8oZGF0YS5wYWdlcywgcGFnZSwgbWF4UGFnZXMpLAogICAgICAgICAgICBwYWdlUGFyYW1zOiBhZGRUbyhkYXRhLnBhZ2VQYXJhbXMsIHBhcmFtLCBtYXhQYWdlcykKICAgICAgICAgIH07CiAgICAgICAgfTsKICAgICAgICBpZiAoZGlyZWN0aW9uICYmIG9sZFBhZ2VzLmxlbmd0aCkgewogICAgICAgICAgY29uc3QgcHJldmlvdXMgPSBkaXJlY3Rpb24gPT09ICJiYWNrd2FyZCI7CiAgICAgICAgICBjb25zdCBwYWdlUGFyYW1GbiA9IHByZXZpb3VzID8gZ2V0UHJldmlvdXNQYWdlUGFyYW0gOiBnZXROZXh0UGFnZVBhcmFtOwogICAgICAgICAgY29uc3Qgb2xkRGF0YSA9IHsKICAgICAgICAgICAgcGFnZXM6IG9sZFBhZ2VzLAogICAgICAgICAgICBwYWdlUGFyYW1zOiBvbGRQYWdlUGFyYW1zCiAgICAgICAgICB9OwogICAgICAgICAgY29uc3QgcGFyYW0gPSBwYWdlUGFyYW1GbihvcHRpb25zLCBvbGREYXRhKTsKICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGZldGNoUGFnZShvbGREYXRhLCBwYXJhbSwgcHJldmlvdXMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCByZW1haW5pbmdQYWdlcyA9IHBhZ2VzID8/IG9sZFBhZ2VzLmxlbmd0aDsKICAgICAgICAgIGRvIHsKICAgICAgICAgICAgY29uc3QgcGFyYW0gPSBjdXJyZW50UGFnZSA9PT0gMCA/IG9sZFBhZ2VQYXJhbXNbMF0gPz8gb3B0aW9ucy5pbml0aWFsUGFnZVBhcmFtIDogZ2V0TmV4dFBhZ2VQYXJhbShvcHRpb25zLCByZXN1bHQpOwogICAgICAgICAgICBpZiAoY3VycmVudFBhZ2UgPiAwICYmIHBhcmFtID09IG51bGwpIHsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXN1bHQgPSBhd2FpdCBmZXRjaFBhZ2UocmVzdWx0LCBwYXJhbSk7CiAgICAgICAgICAgIGN1cnJlbnRQYWdlKys7CiAgICAgICAgICB9IHdoaWxlIChjdXJyZW50UGFnZSA8IHJlbWFpbmluZ1BhZ2VzKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfTsKICAgICAgaWYgKGNvbnRleHQub3B0aW9ucy5wZXJzaXN0ZXIpIHsKICAgICAgICBjb250ZXh0LmZldGNoRm4gPSAoKSA9PiB7CiAgICAgICAgICB2YXIgX2ExNCwgX2IyOwogICAgICAgICAgcmV0dXJuIChfYjIgPSAoX2ExNCA9IGNvbnRleHQub3B0aW9ucykucGVyc2lzdGVyKSA9PSBudWxsID8gdm9pZCAwIDogX2IyLmNhbGwoCiAgICAgICAgICAgIF9hMTQsCiAgICAgICAgICAgIGZldGNoRm4sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjbGllbnQ6IGNvbnRleHQuY2xpZW50LAogICAgICAgICAgICAgIHF1ZXJ5S2V5OiBjb250ZXh0LnF1ZXJ5S2V5LAogICAgICAgICAgICAgIG1ldGE6IGNvbnRleHQub3B0aW9ucy5tZXRhLAogICAgICAgICAgICAgIHNpZ25hbDogY29udGV4dC5zaWduYWwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcXVlcnkKICAgICAgICAgICk7CiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb250ZXh0LmZldGNoRm4gPSBmZXRjaEZuOwogICAgICB9CiAgICB9CiAgfTsKfQpmdW5jdGlvbiBnZXROZXh0UGFnZVBhcmFtKG9wdGlvbnMsIHsgcGFnZXMsIHBhZ2VQYXJhbXMgfSkgewogIGNvbnN0IGxhc3RJbmRleCA9IHBhZ2VzLmxlbmd0aCAtIDE7CiAgcmV0dXJuIHBhZ2VzLmxlbmd0aCA+IDAgPyBvcHRpb25zLmdldE5leHRQYWdlUGFyYW0oCiAgICBwYWdlc1tsYXN0SW5kZXhdLAogICAgcGFnZXMsCiAgICBwYWdlUGFyYW1zW2xhc3RJbmRleF0sCiAgICBwYWdlUGFyYW1zCiAgKSA6IHZvaWQgMDsKfQpmdW5jdGlvbiBnZXRQcmV2aW91c1BhZ2VQYXJhbShvcHRpb25zLCB7IHBhZ2VzLCBwYWdlUGFyYW1zIH0pIHsKICB2YXIgX2ExMzsKICByZXR1cm4gcGFnZXMubGVuZ3RoID4gMCA/IChfYTEzID0gb3B0aW9ucy5nZXRQcmV2aW91c1BhZ2VQYXJhbSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMTMuY2FsbChvcHRpb25zLCBwYWdlc1swXSwgcGFnZXMsIHBhZ2VQYXJhbXNbMF0sIHBhZ2VQYXJhbXMpIDogdm9pZCAwOwp9CmZ1bmN0aW9uIGhhc05leHRQYWdlKG9wdGlvbnMsIGRhdGEpIHsKICBpZiAoIWRhdGEpIHJldHVybiBmYWxzZTsKICByZXR1cm4gZ2V0TmV4dFBhZ2VQYXJhbShvcHRpb25zLCBkYXRhKSAhPSBudWxsOwp9CmZ1bmN0aW9uIGhhc1ByZXZpb3VzUGFnZShvcHRpb25zLCBkYXRhKSB7CiAgaWYgKCFkYXRhIHx8ICFvcHRpb25zLmdldFByZXZpb3VzUGFnZVBhcmFtKSByZXR1cm4gZmFsc2U7CiAgcmV0dXJuIGdldFByZXZpb3VzUGFnZVBhcmFtKG9wdGlvbnMsIGRhdGEpICE9IG51bGw7Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9AdGFuc3RhY2svcXVlcnktY29yZS9idWlsZC9tb2Rlcm4vaW5maW5pdGVRdWVyeU9ic2VydmVyLmpzCnZhciBJbmZpbml0ZVF1ZXJ5T2JzZXJ2ZXIgPSBjbGFzcyBleHRlbmRzIFF1ZXJ5T2JzZXJ2ZXIgewogIGNvbnN0cnVjdG9yKGNsaWVudCwgb3B0aW9ucykgewogICAgc3VwZXIoY2xpZW50LCBvcHRpb25zKTsKICB9CiAgYmluZE1ldGhvZHMoKSB7CiAgICBzdXBlci5iaW5kTWV0aG9kcygpOwogICAgdGhpcy5mZXRjaE5leHRQYWdlID0gdGhpcy5mZXRjaE5leHRQYWdlLmJpbmQodGhpcyk7CiAgICB0aGlzLmZldGNoUHJldmlvdXNQYWdlID0gdGhpcy5mZXRjaFByZXZpb3VzUGFnZS5iaW5kKHRoaXMpOwogIH0KICBzZXRPcHRpb25zKG9wdGlvbnMpIHsKICAgIHN1cGVyLnNldE9wdGlvbnMoewogICAgICAuLi5vcHRpb25zLAogICAgICBiZWhhdmlvcjogaW5maW5pdGVRdWVyeUJlaGF2aW9yKCkKICAgIH0pOwogIH0KICBnZXRPcHRpbWlzdGljUmVzdWx0KG9wdGlvbnMpIHsKICAgIG9wdGlvbnMuYmVoYXZpb3IgPSBpbmZpbml0ZVF1ZXJ5QmVoYXZpb3IoKTsKICAgIHJldHVybiBzdXBlci5nZXRPcHRpbWlzdGljUmVzdWx0KG9wdGlvbnMpOwogIH0KICBmZXRjaE5leHRQYWdlKG9wdGlvbnMpIHsKICAgIHJldHVybiB0aGlzLmZldGNoKHsKICAgICAgLi4ub3B0aW9ucywKICAgICAgbWV0YTogewogICAgICAgIGZldGNoTW9yZTogeyBkaXJlY3Rpb246ICJmb3J3YXJkIiB9CiAgICAgIH0KICAgIH0pOwogIH0KICBmZXRjaFByZXZpb3VzUGFnZShvcHRpb25zKSB7CiAgICByZXR1cm4gdGhpcy5mZXRjaCh7CiAgICAgIC4uLm9wdGlvbnMsCiAgICAgIG1ldGE6IHsKICAgICAgICBmZXRjaE1vcmU6IHsgZGlyZWN0aW9uOiAiYmFja3dhcmQiIH0KICAgICAgfQogICAgfSk7CiAgfQogIGNyZWF0ZVJlc3VsdChxdWVyeSwgb3B0aW9ucykgewogICAgdmFyIF9hMTMsIF9iOwogICAgY29uc3QgeyBzdGF0ZSB9ID0gcXVlcnk7CiAgICBjb25zdCBwYXJlbnRSZXN1bHQgPSBzdXBlci5jcmVhdGVSZXN1bHQocXVlcnksIG9wdGlvbnMpOwogICAgY29uc3QgeyBpc0ZldGNoaW5nLCBpc1JlZmV0Y2hpbmcsIGlzRXJyb3IsIGlzUmVmZXRjaEVycm9yIH0gPSBwYXJlbnRSZXN1bHQ7CiAgICBjb25zdCBmZXRjaERpcmVjdGlvbiA9IChfYiA9IChfYTEzID0gc3RhdGUuZmV0Y2hNZXRhKSA9PSBudWxsID8gdm9pZCAwIDogX2ExMy5mZXRjaE1vcmUpID09IG51bGwgPyB2b2lkIDAgOiBfYi5kaXJlY3Rpb247CiAgICBjb25zdCBpc0ZldGNoTmV4dFBhZ2VFcnJvciA9IGlzRXJyb3IgJiYgZmV0Y2hEaXJlY3Rpb24gPT09ICJmb3J3YXJkIjsKICAgIGNvbnN0IGlzRmV0Y2hpbmdOZXh0UGFnZSA9IGlzRmV0Y2hpbmcgJiYgZmV0Y2hEaXJlY3Rpb24gPT09ICJmb3J3YXJkIjsKICAgIGNvbnN0IGlzRmV0Y2hQcmV2aW91c1BhZ2VFcnJvciA9IGlzRXJyb3IgJiYgZmV0Y2hEaXJlY3Rpb24gPT09ICJiYWNrd2FyZCI7CiAgICBjb25zdCBpc0ZldGNoaW5nUHJldmlvdXNQYWdlID0gaXNGZXRjaGluZyAmJiBmZXRjaERpcmVjdGlvbiA9PT0gImJhY2t3YXJkIjsKICAgIGNvbnN0IHJlc3VsdCA9IHsKICAgICAgLi4ucGFyZW50UmVzdWx0LAogICAgICBmZXRjaE5leHRQYWdlOiB0aGlzLmZldGNoTmV4dFBhZ2UsCiAgICAgIGZldGNoUHJldmlvdXNQYWdlOiB0aGlzLmZldGNoUHJldmlvdXNQYWdlLAogICAgICBoYXNOZXh0UGFnZTogaGFzTmV4dFBhZ2Uob3B0aW9ucywgc3RhdGUuZGF0YSksCiAgICAgIGhhc1ByZXZpb3VzUGFnZTogaGFzUHJldmlvdXNQYWdlKG9wdGlvbnMsIHN0YXRlLmRhdGEpLAogICAgICBpc0ZldGNoTmV4dFBhZ2VFcnJvciwKICAgICAgaXNGZXRjaGluZ05leHRQYWdlLAogICAgICBpc0ZldGNoUHJldmlvdXNQYWdlRXJyb3IsCiAgICAgIGlzRmV0Y2hpbmdQcmV2aW91c1BhZ2UsCiAgICAgIGlzUmVmZXRjaEVycm9yOiBpc1JlZmV0Y2hFcnJvciAmJiAhaXNGZXRjaE5leHRQYWdlRXJyb3IgJiYgIWlzRmV0Y2hQcmV2aW91c1BhZ2VFcnJvciwKICAgICAgaXNSZWZldGNoaW5nOiBpc1JlZmV0Y2hpbmcgJiYgIWlzRmV0Y2hpbmdOZXh0UGFnZSAmJiAhaXNGZXRjaGluZ1ByZXZpb3VzUGFnZQogICAgfTsKICAgIHJldHVybiByZXN1bHQ7CiAgfQp9OwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0B0YW5zdGFjay9xdWVyeS1jb3JlL2J1aWxkL21vZGVybi9tdXRhdGlvbi5qcwp2YXIgX2NsaWVudDMsIF9vYnNlcnZlcnMsIF9tdXRhdGlvbkNhY2hlLCBfcmV0cnllcjIsIF9NdXRhdGlvbl9pbnN0YW5jZXMsIGRpc3BhdGNoX2ZuMiwgX2E3Owp2YXIgTXV0YXRpb24gPSAoX2E3ID0gY2xhc3MgZXh0ZW5kcyBSZW1vdmFibGUgewogIGNvbnN0cnVjdG9yKGNvbmZpZykgewogICAgc3VwZXIoKTsKICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfTXV0YXRpb25faW5zdGFuY2VzKTsKICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfY2xpZW50Myk7CiAgICBfX3ByaXZhdGVBZGQodGhpcywgX29ic2VydmVycyk7CiAgICBfX3ByaXZhdGVBZGQodGhpcywgX211dGF0aW9uQ2FjaGUpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9yZXRyeWVyMik7CiAgICBfX3ByaXZhdGVTZXQodGhpcywgX2NsaWVudDMsIGNvbmZpZy5jbGllbnQpOwogICAgdGhpcy5tdXRhdGlvbklkID0gY29uZmlnLm11dGF0aW9uSWQ7CiAgICBfX3ByaXZhdGVTZXQodGhpcywgX211dGF0aW9uQ2FjaGUsIGNvbmZpZy5tdXRhdGlvbkNhY2hlKTsKICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfb2JzZXJ2ZXJzLCBbXSk7CiAgICB0aGlzLnN0YXRlID0gY29uZmlnLnN0YXRlIHx8IGdldERlZmF1bHRTdGF0ZTIoKTsKICAgIHRoaXMuc2V0T3B0aW9ucyhjb25maWcub3B0aW9ucyk7CiAgICB0aGlzLnNjaGVkdWxlR2MoKTsKICB9CiAgc2V0T3B0aW9ucyhvcHRpb25zKSB7CiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwogICAgdGhpcy51cGRhdGVHY1RpbWUodGhpcy5vcHRpb25zLmdjVGltZSk7CiAgfQogIGdldCBtZXRhKCkgewogICAgcmV0dXJuIHRoaXMub3B0aW9ucy5tZXRhOwogIH0KICBhZGRPYnNlcnZlcihvYnNlcnZlcikgewogICAgaWYgKCFfX3ByaXZhdGVHZXQodGhpcywgX29ic2VydmVycykuaW5jbHVkZXMob2JzZXJ2ZXIpKSB7CiAgICAgIF9fcHJpdmF0ZUdldCh0aGlzLCBfb2JzZXJ2ZXJzKS5wdXNoKG9ic2VydmVyKTsKICAgICAgdGhpcy5jbGVhckdjVGltZW91dCgpOwogICAgICBfX3ByaXZhdGVHZXQodGhpcywgX211dGF0aW9uQ2FjaGUpLm5vdGlmeSh7CiAgICAgICAgdHlwZTogIm9ic2VydmVyQWRkZWQiLAogICAgICAgIG11dGF0aW9uOiB0aGlzLAogICAgICAgIG9ic2VydmVyCiAgICAgIH0pOwogICAgfQogIH0KICByZW1vdmVPYnNlcnZlcihvYnNlcnZlcikgewogICAgX19wcml2YXRlU2V0KHRoaXMsIF9vYnNlcnZlcnMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfb2JzZXJ2ZXJzKS5maWx0ZXIoKHgpID0+IHggIT09IG9ic2VydmVyKSk7CiAgICB0aGlzLnNjaGVkdWxlR2MoKTsKICAgIF9fcHJpdmF0ZUdldCh0aGlzLCBfbXV0YXRpb25DYWNoZSkubm90aWZ5KHsKICAgICAgdHlwZTogIm9ic2VydmVyUmVtb3ZlZCIsCiAgICAgIG11dGF0aW9uOiB0aGlzLAogICAgICBvYnNlcnZlcgogICAgfSk7CiAgfQogIG9wdGlvbmFsUmVtb3ZlKCkgewogICAgaWYgKCFfX3ByaXZhdGVHZXQodGhpcywgX29ic2VydmVycykubGVuZ3RoKSB7CiAgICAgIGlmICh0aGlzLnN0YXRlLnN0YXR1cyA9PT0gInBlbmRpbmciKSB7CiAgICAgICAgdGhpcy5zY2hlZHVsZUdjKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX19wcml2YXRlR2V0KHRoaXMsIF9tdXRhdGlvbkNhY2hlKS5yZW1vdmUodGhpcyk7CiAgICAgIH0KICAgIH0KICB9CiAgY29udGludWUoKSB7CiAgICB2YXIgX2ExMzsKICAgIHJldHVybiAoKF9hMTMgPSBfX3ByaXZhdGVHZXQodGhpcywgX3JldHJ5ZXIyKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMTMuY29udGludWUoKSkgPz8gLy8gY29udGludWluZyBhIG11dGF0aW9uIGFzc3VtZXMgdGhhdCB2YXJpYWJsZXMgYXJlIHNldCwgbXV0YXRpb24gbXVzdCBoYXZlIGJlZW4gZGVoeWRyYXRlZCBiZWZvcmUKICAgIHRoaXMuZXhlY3V0ZSh0aGlzLnN0YXRlLnZhcmlhYmxlcyk7CiAgfQogIGFzeW5jIGV4ZWN1dGUodmFyaWFibGVzKSB7CiAgICB2YXIgX2ExMywgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9pLCBfaiwgX2ssIF9sLCBfbSwgX24sIF9vLCBfcCwgX3EsIF9yLCBfcywgX3Q7CiAgICBjb25zdCBvbkNvbnRpbnVlID0gKCkgPT4gewogICAgICBfX3ByaXZhdGVNZXRob2QodGhpcywgX011dGF0aW9uX2luc3RhbmNlcywgZGlzcGF0Y2hfZm4yKS5jYWxsKHRoaXMsIHsgdHlwZTogImNvbnRpbnVlIiB9KTsKICAgIH07CiAgICBjb25zdCBtdXRhdGlvbkZuQ29udGV4dCA9IHsKICAgICAgY2xpZW50OiBfX3ByaXZhdGVHZXQodGhpcywgX2NsaWVudDMpLAogICAgICBtZXRhOiB0aGlzLm9wdGlvbnMubWV0YSwKICAgICAgbXV0YXRpb25LZXk6IHRoaXMub3B0aW9ucy5tdXRhdGlvbktleQogICAgfTsKICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfcmV0cnllcjIsIGNyZWF0ZVJldHJ5ZXIoewogICAgICBmbjogKCkgPT4gewogICAgICAgIGlmICghdGhpcy5vcHRpb25zLm11dGF0aW9uRm4pIHsKICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIk5vIG11dGF0aW9uRm4gZm91bmQiKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMubXV0YXRpb25Gbih2YXJpYWJsZXMsIG11dGF0aW9uRm5Db250ZXh0KTsKICAgICAgfSwKICAgICAgb25GYWlsOiAoZmFpbHVyZUNvdW50LCBlcnJvcikgPT4gewogICAgICAgIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfTXV0YXRpb25faW5zdGFuY2VzLCBkaXNwYXRjaF9mbjIpLmNhbGwodGhpcywgeyB0eXBlOiAiZmFpbGVkIiwgZmFpbHVyZUNvdW50LCBlcnJvciB9KTsKICAgICAgfSwKICAgICAgb25QYXVzZTogKCkgPT4gewogICAgICAgIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfTXV0YXRpb25faW5zdGFuY2VzLCBkaXNwYXRjaF9mbjIpLmNhbGwodGhpcywgeyB0eXBlOiAicGF1c2UiIH0pOwogICAgICB9LAogICAgICBvbkNvbnRpbnVlLAogICAgICByZXRyeTogdGhpcy5vcHRpb25zLnJldHJ5ID8/IDAsCiAgICAgIHJldHJ5RGVsYXk6IHRoaXMub3B0aW9ucy5yZXRyeURlbGF5LAogICAgICBuZXR3b3JrTW9kZTogdGhpcy5vcHRpb25zLm5ldHdvcmtNb2RlLAogICAgICBjYW5SdW46ICgpID0+IF9fcHJpdmF0ZUdldCh0aGlzLCBfbXV0YXRpb25DYWNoZSkuY2FuUnVuKHRoaXMpCiAgICB9KSk7CiAgICBjb25zdCByZXN0b3JlZCA9IHRoaXMuc3RhdGUuc3RhdHVzID09PSAicGVuZGluZyI7CiAgICBjb25zdCBpc1BhdXNlZCA9ICFfX3ByaXZhdGVHZXQodGhpcywgX3JldHJ5ZXIyKS5jYW5TdGFydCgpOwogICAgdHJ5IHsKICAgICAgaWYgKHJlc3RvcmVkKSB7CiAgICAgICAgb25Db250aW51ZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfTXV0YXRpb25faW5zdGFuY2VzLCBkaXNwYXRjaF9mbjIpLmNhbGwodGhpcywgeyB0eXBlOiAicGVuZGluZyIsIHZhcmlhYmxlcywgaXNQYXVzZWQgfSk7CiAgICAgICAgYXdhaXQgKChfYiA9IChfYTEzID0gX19wcml2YXRlR2V0KHRoaXMsIF9tdXRhdGlvbkNhY2hlKS5jb25maWcpLm9uTXV0YXRlKSA9PSBudWxsID8gdm9pZCAwIDogX2IuY2FsbCgKICAgICAgICAgIF9hMTMsCiAgICAgICAgICB2YXJpYWJsZXMsCiAgICAgICAgICB0aGlzLAogICAgICAgICAgbXV0YXRpb25GbkNvbnRleHQKICAgICAgICApKTsKICAgICAgICBjb25zdCBjb250ZXh0ID0gYXdhaXQgKChfZCA9IChfYyA9IHRoaXMub3B0aW9ucykub25NdXRhdGUpID09IG51bGwgPyB2b2lkIDAgOiBfZC5jYWxsKAogICAgICAgICAgX2MsCiAgICAgICAgICB2YXJpYWJsZXMsCiAgICAgICAgICBtdXRhdGlvbkZuQ29udGV4dAogICAgICAgICkpOwogICAgICAgIGlmIChjb250ZXh0ICE9PSB0aGlzLnN0YXRlLmNvbnRleHQpIHsKICAgICAgICAgIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfTXV0YXRpb25faW5zdGFuY2VzLCBkaXNwYXRjaF9mbjIpLmNhbGwodGhpcywgewogICAgICAgICAgICB0eXBlOiAicGVuZGluZyIsCiAgICAgICAgICAgIGNvbnRleHQsCiAgICAgICAgICAgIHZhcmlhYmxlcywKICAgICAgICAgICAgaXNQYXVzZWQKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgICBjb25zdCBkYXRhID0gYXdhaXQgX19wcml2YXRlR2V0KHRoaXMsIF9yZXRyeWVyMikuc3RhcnQoKTsKICAgICAgYXdhaXQgKChfZiA9IChfZSA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfbXV0YXRpb25DYWNoZSkuY29uZmlnKS5vblN1Y2Nlc3MpID09IG51bGwgPyB2b2lkIDAgOiBfZi5jYWxsKAogICAgICAgIF9lLAogICAgICAgIGRhdGEsCiAgICAgICAgdmFyaWFibGVzLAogICAgICAgIHRoaXMuc3RhdGUuY29udGV4dCwKICAgICAgICB0aGlzLAogICAgICAgIG11dGF0aW9uRm5Db250ZXh0CiAgICAgICkpOwogICAgICBhd2FpdCAoKF9oID0gKF9nID0gdGhpcy5vcHRpb25zKS5vblN1Y2Nlc3MpID09IG51bGwgPyB2b2lkIDAgOiBfaC5jYWxsKAogICAgICAgIF9nLAogICAgICAgIGRhdGEsCiAgICAgICAgdmFyaWFibGVzLAogICAgICAgIHRoaXMuc3RhdGUuY29udGV4dCwKICAgICAgICBtdXRhdGlvbkZuQ29udGV4dAogICAgICApKTsKICAgICAgYXdhaXQgKChfaiA9IChfaSA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfbXV0YXRpb25DYWNoZSkuY29uZmlnKS5vblNldHRsZWQpID09IG51bGwgPyB2b2lkIDAgOiBfai5jYWxsKAogICAgICAgIF9pLAogICAgICAgIGRhdGEsCiAgICAgICAgbnVsbCwKICAgICAgICB0aGlzLnN0YXRlLnZhcmlhYmxlcywKICAgICAgICB0aGlzLnN0YXRlLmNvbnRleHQsCiAgICAgICAgdGhpcywKICAgICAgICBtdXRhdGlvbkZuQ29udGV4dAogICAgICApKTsKICAgICAgYXdhaXQgKChfbCA9IChfayA9IHRoaXMub3B0aW9ucykub25TZXR0bGVkKSA9PSBudWxsID8gdm9pZCAwIDogX2wuY2FsbCgKICAgICAgICBfaywKICAgICAgICBkYXRhLAogICAgICAgIG51bGwsCiAgICAgICAgdmFyaWFibGVzLAogICAgICAgIHRoaXMuc3RhdGUuY29udGV4dCwKICAgICAgICBtdXRhdGlvbkZuQ29udGV4dAogICAgICApKTsKICAgICAgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9NdXRhdGlvbl9pbnN0YW5jZXMsIGRpc3BhdGNoX2ZuMikuY2FsbCh0aGlzLCB7IHR5cGU6ICJzdWNjZXNzIiwgZGF0YSB9KTsKICAgICAgcmV0dXJuIGRhdGE7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICB0cnkgewogICAgICAgIGF3YWl0ICgoX24gPSAoX20gPSBfX3ByaXZhdGVHZXQodGhpcywgX211dGF0aW9uQ2FjaGUpLmNvbmZpZykub25FcnJvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9uLmNhbGwoCiAgICAgICAgICBfbSwKICAgICAgICAgIGVycm9yLAogICAgICAgICAgdmFyaWFibGVzLAogICAgICAgICAgdGhpcy5zdGF0ZS5jb250ZXh0LAogICAgICAgICAgdGhpcywKICAgICAgICAgIG11dGF0aW9uRm5Db250ZXh0CiAgICAgICAgKSk7CiAgICAgICAgYXdhaXQgKChfcCA9IChfbyA9IHRoaXMub3B0aW9ucykub25FcnJvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9wLmNhbGwoCiAgICAgICAgICBfbywKICAgICAgICAgIGVycm9yLAogICAgICAgICAgdmFyaWFibGVzLAogICAgICAgICAgdGhpcy5zdGF0ZS5jb250ZXh0LAogICAgICAgICAgbXV0YXRpb25GbkNvbnRleHQKICAgICAgICApKTsKICAgICAgICBhd2FpdCAoKF9yID0gKF9xID0gX19wcml2YXRlR2V0KHRoaXMsIF9tdXRhdGlvbkNhY2hlKS5jb25maWcpLm9uU2V0dGxlZCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9yLmNhbGwoCiAgICAgICAgICBfcSwKICAgICAgICAgIHZvaWQgMCwKICAgICAgICAgIGVycm9yLAogICAgICAgICAgdGhpcy5zdGF0ZS52YXJpYWJsZXMsCiAgICAgICAgICB0aGlzLnN0YXRlLmNvbnRleHQsCiAgICAgICAgICB0aGlzLAogICAgICAgICAgbXV0YXRpb25GbkNvbnRleHQKICAgICAgICApKTsKICAgICAgICBhd2FpdCAoKF90ID0gKF9zID0gdGhpcy5vcHRpb25zKS5vblNldHRsZWQpID09IG51bGwgPyB2b2lkIDAgOiBfdC5jYWxsKAogICAgICAgICAgX3MsCiAgICAgICAgICB2b2lkIDAsCiAgICAgICAgICBlcnJvciwKICAgICAgICAgIHZhcmlhYmxlcywKICAgICAgICAgIHRoaXMuc3RhdGUuY29udGV4dCwKICAgICAgICAgIG11dGF0aW9uRm5Db250ZXh0CiAgICAgICAgKSk7CiAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9NdXRhdGlvbl9pbnN0YW5jZXMsIGRpc3BhdGNoX2ZuMikuY2FsbCh0aGlzLCB7IHR5cGU6ICJlcnJvciIsIGVycm9yIH0pOwogICAgICB9CiAgICB9IGZpbmFsbHkgewogICAgICBfX3ByaXZhdGVHZXQodGhpcywgX211dGF0aW9uQ2FjaGUpLnJ1bk5leHQodGhpcyk7CiAgICB9CiAgfQp9LCBfY2xpZW50MyA9IG5ldyBXZWFrTWFwKCksIF9vYnNlcnZlcnMgPSBuZXcgV2Vha01hcCgpLCBfbXV0YXRpb25DYWNoZSA9IG5ldyBXZWFrTWFwKCksIF9yZXRyeWVyMiA9IG5ldyBXZWFrTWFwKCksIF9NdXRhdGlvbl9pbnN0YW5jZXMgPSBuZXcgV2Vha1NldCgpLCBkaXNwYXRjaF9mbjIgPSBmdW5jdGlvbihhY3Rpb24pIHsKICBjb25zdCByZWR1Y2VyID0gKHN0YXRlKSA9PiB7CiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7CiAgICAgIGNhc2UgImZhaWxlZCI6CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLnN0YXRlLAogICAgICAgICAgZmFpbHVyZUNvdW50OiBhY3Rpb24uZmFpbHVyZUNvdW50LAogICAgICAgICAgZmFpbHVyZVJlYXNvbjogYWN0aW9uLmVycm9yCiAgICAgICAgfTsKICAgICAgY2FzZSAicGF1c2UiOgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAuLi5zdGF0ZSwKICAgICAgICAgIGlzUGF1c2VkOiB0cnVlCiAgICAgICAgfTsKICAgICAgY2FzZSAiY29udGludWUiOgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAuLi5zdGF0ZSwKICAgICAgICAgIGlzUGF1c2VkOiBmYWxzZQogICAgICAgIH07CiAgICAgIGNhc2UgInBlbmRpbmciOgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAuLi5zdGF0ZSwKICAgICAgICAgIGNvbnRleHQ6IGFjdGlvbi5jb250ZXh0LAogICAgICAgICAgZGF0YTogdm9pZCAwLAogICAgICAgICAgZmFpbHVyZUNvdW50OiAwLAogICAgICAgICAgZmFpbHVyZVJlYXNvbjogbnVsbCwKICAgICAgICAgIGVycm9yOiBudWxsLAogICAgICAgICAgaXNQYXVzZWQ6IGFjdGlvbi5pc1BhdXNlZCwKICAgICAgICAgIHN0YXR1czogInBlbmRpbmciLAogICAgICAgICAgdmFyaWFibGVzOiBhY3Rpb24udmFyaWFibGVzLAogICAgICAgICAgc3VibWl0dGVkQXQ6IERhdGUubm93KCkKICAgICAgICB9OwogICAgICBjYXNlICJzdWNjZXNzIjoKICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4uc3RhdGUsCiAgICAgICAgICBkYXRhOiBhY3Rpb24uZGF0YSwKICAgICAgICAgIGZhaWx1cmVDb3VudDogMCwKICAgICAgICAgIGZhaWx1cmVSZWFzb246IG51bGwsCiAgICAgICAgICBlcnJvcjogbnVsbCwKICAgICAgICAgIHN0YXR1czogInN1Y2Nlc3MiLAogICAgICAgICAgaXNQYXVzZWQ6IGZhbHNlCiAgICAgICAgfTsKICAgICAgY2FzZSAiZXJyb3IiOgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAuLi5zdGF0ZSwKICAgICAgICAgIGRhdGE6IHZvaWQgMCwKICAgICAgICAgIGVycm9yOiBhY3Rpb24uZXJyb3IsCiAgICAgICAgICBmYWlsdXJlQ291bnQ6IHN0YXRlLmZhaWx1cmVDb3VudCArIDEsCiAgICAgICAgICBmYWlsdXJlUmVhc29uOiBhY3Rpb24uZXJyb3IsCiAgICAgICAgICBpc1BhdXNlZDogZmFsc2UsCiAgICAgICAgICBzdGF0dXM6ICJlcnJvciIKICAgICAgICB9OwogICAgfQogIH07CiAgdGhpcy5zdGF0ZSA9IHJlZHVjZXIodGhpcy5zdGF0ZSk7CiAgbm90aWZ5TWFuYWdlci5iYXRjaCgoKSA9PiB7CiAgICBfX3ByaXZhdGVHZXQodGhpcywgX29ic2VydmVycykuZm9yRWFjaCgob2JzZXJ2ZXIpID0+IHsKICAgICAgb2JzZXJ2ZXIub25NdXRhdGlvblVwZGF0ZShhY3Rpb24pOwogICAgfSk7CiAgICBfX3ByaXZhdGVHZXQodGhpcywgX211dGF0aW9uQ2FjaGUpLm5vdGlmeSh7CiAgICAgIG11dGF0aW9uOiB0aGlzLAogICAgICB0eXBlOiAidXBkYXRlZCIsCiAgICAgIGFjdGlvbgogICAgfSk7CiAgfSk7Cn0sIF9hNyk7CmZ1bmN0aW9uIGdldERlZmF1bHRTdGF0ZTIoKSB7CiAgcmV0dXJuIHsKICAgIGNvbnRleHQ6IHZvaWQgMCwKICAgIGRhdGE6IHZvaWQgMCwKICAgIGVycm9yOiBudWxsLAogICAgZmFpbHVyZUNvdW50OiAwLAogICAgZmFpbHVyZVJlYXNvbjogbnVsbCwKICAgIGlzUGF1c2VkOiBmYWxzZSwKICAgIHN0YXR1czogImlkbGUiLAogICAgdmFyaWFibGVzOiB2b2lkIDAsCiAgICBzdWJtaXR0ZWRBdDogMAogIH07Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9AdGFuc3RhY2svcXVlcnktY29yZS9idWlsZC9tb2Rlcm4vbXV0YXRpb25DYWNoZS5qcwp2YXIgX211dGF0aW9ucywgX3Njb3BlcywgX211dGF0aW9uSWQsIF9hODsKdmFyIE11dGF0aW9uQ2FjaGUgPSAoX2E4ID0gY2xhc3MgZXh0ZW5kcyBTdWJzY3JpYmFibGUgewogIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7CiAgICBzdXBlcigpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9tdXRhdGlvbnMpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9zY29wZXMpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9tdXRhdGlvbklkKTsKICAgIHRoaXMuY29uZmlnID0gY29uZmlnOwogICAgX19wcml2YXRlU2V0KHRoaXMsIF9tdXRhdGlvbnMsIC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCkpOwogICAgX19wcml2YXRlU2V0KHRoaXMsIF9zY29wZXMsIC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkpOwogICAgX19wcml2YXRlU2V0KHRoaXMsIF9tdXRhdGlvbklkLCAwKTsKICB9CiAgYnVpbGQoY2xpZW50LCBvcHRpb25zLCBzdGF0ZSkgewogICAgY29uc3QgbXV0YXRpb24gPSBuZXcgTXV0YXRpb24oewogICAgICBjbGllbnQsCiAgICAgIG11dGF0aW9uQ2FjaGU6IHRoaXMsCiAgICAgIG11dGF0aW9uSWQ6ICsrX19wcml2YXRlV3JhcHBlcih0aGlzLCBfbXV0YXRpb25JZCkuXywKICAgICAgb3B0aW9uczogY2xpZW50LmRlZmF1bHRNdXRhdGlvbk9wdGlvbnMob3B0aW9ucyksCiAgICAgIHN0YXRlCiAgICB9KTsKICAgIHRoaXMuYWRkKG11dGF0aW9uKTsKICAgIHJldHVybiBtdXRhdGlvbjsKICB9CiAgYWRkKG11dGF0aW9uKSB7CiAgICBfX3ByaXZhdGVHZXQodGhpcywgX211dGF0aW9ucykuYWRkKG11dGF0aW9uKTsKICAgIGNvbnN0IHNjb3BlID0gc2NvcGVGb3IobXV0YXRpb24pOwogICAgaWYgKHR5cGVvZiBzY29wZSA9PT0gInN0cmluZyIpIHsKICAgICAgY29uc3Qgc2NvcGVkTXV0YXRpb25zID0gX19wcml2YXRlR2V0KHRoaXMsIF9zY29wZXMpLmdldChzY29wZSk7CiAgICAgIGlmIChzY29wZWRNdXRhdGlvbnMpIHsKICAgICAgICBzY29wZWRNdXRhdGlvbnMucHVzaChtdXRhdGlvbik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX19wcml2YXRlR2V0KHRoaXMsIF9zY29wZXMpLnNldChzY29wZSwgW211dGF0aW9uXSk7CiAgICAgIH0KICAgIH0KICAgIHRoaXMubm90aWZ5KHsgdHlwZTogImFkZGVkIiwgbXV0YXRpb24gfSk7CiAgfQogIHJlbW92ZShtdXRhdGlvbikgewogICAgaWYgKF9fcHJpdmF0ZUdldCh0aGlzLCBfbXV0YXRpb25zKS5kZWxldGUobXV0YXRpb24pKSB7CiAgICAgIGNvbnN0IHNjb3BlID0gc2NvcGVGb3IobXV0YXRpb24pOwogICAgICBpZiAodHlwZW9mIHNjb3BlID09PSAic3RyaW5nIikgewogICAgICAgIGNvbnN0IHNjb3BlZE11dGF0aW9ucyA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfc2NvcGVzKS5nZXQoc2NvcGUpOwogICAgICAgIGlmIChzY29wZWRNdXRhdGlvbnMpIHsKICAgICAgICAgIGlmIChzY29wZWRNdXRhdGlvbnMubGVuZ3RoID4gMSkgewogICAgICAgICAgICBjb25zdCBpbmRleCA9IHNjb3BlZE11dGF0aW9ucy5pbmRleE9mKG11dGF0aW9uKTsKICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgICAgICAgIHNjb3BlZE11dGF0aW9ucy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKHNjb3BlZE11dGF0aW9uc1swXSA9PT0gbXV0YXRpb24pIHsKICAgICAgICAgICAgX19wcml2YXRlR2V0KHRoaXMsIF9zY29wZXMpLmRlbGV0ZShzY29wZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICB0aGlzLm5vdGlmeSh7IHR5cGU6ICJyZW1vdmVkIiwgbXV0YXRpb24gfSk7CiAgfQogIGNhblJ1bihtdXRhdGlvbikgewogICAgY29uc3Qgc2NvcGUgPSBzY29wZUZvcihtdXRhdGlvbik7CiAgICBpZiAodHlwZW9mIHNjb3BlID09PSAic3RyaW5nIikgewogICAgICBjb25zdCBtdXRhdGlvbnNXaXRoU2FtZVNjb3BlID0gX19wcml2YXRlR2V0KHRoaXMsIF9zY29wZXMpLmdldChzY29wZSk7CiAgICAgIGNvbnN0IGZpcnN0UGVuZGluZ011dGF0aW9uID0gbXV0YXRpb25zV2l0aFNhbWVTY29wZSA9PSBudWxsID8gdm9pZCAwIDogbXV0YXRpb25zV2l0aFNhbWVTY29wZS5maW5kKAogICAgICAgIChtKSA9PiBtLnN0YXRlLnN0YXR1cyA9PT0gInBlbmRpbmciCiAgICAgICk7CiAgICAgIHJldHVybiAhZmlyc3RQZW5kaW5nTXV0YXRpb24gfHwgZmlyc3RQZW5kaW5nTXV0YXRpb24gPT09IG11dGF0aW9uOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfQogIHJ1bk5leHQobXV0YXRpb24pIHsKICAgIHZhciBfYTEzOwogICAgY29uc3Qgc2NvcGUgPSBzY29wZUZvcihtdXRhdGlvbik7CiAgICBpZiAodHlwZW9mIHNjb3BlID09PSAic3RyaW5nIikgewogICAgICBjb25zdCBmb3VuZE11dGF0aW9uID0gKF9hMTMgPSBfX3ByaXZhdGVHZXQodGhpcywgX3Njb3BlcykuZ2V0KHNjb3BlKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMTMuZmluZCgobSkgPT4gbSAhPT0gbXV0YXRpb24gJiYgbS5zdGF0ZS5pc1BhdXNlZCk7CiAgICAgIHJldHVybiAoZm91bmRNdXRhdGlvbiA9PSBudWxsID8gdm9pZCAwIDogZm91bmRNdXRhdGlvbi5jb250aW51ZSgpKSA/PyBQcm9taXNlLnJlc29sdmUoKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgIH0KICB9CiAgY2xlYXIoKSB7CiAgICBub3RpZnlNYW5hZ2VyLmJhdGNoKCgpID0+IHsKICAgICAgX19wcml2YXRlR2V0KHRoaXMsIF9tdXRhdGlvbnMpLmZvckVhY2goKG11dGF0aW9uKSA9PiB7CiAgICAgICAgdGhpcy5ub3RpZnkoeyB0eXBlOiAicmVtb3ZlZCIsIG11dGF0aW9uIH0pOwogICAgICB9KTsKICAgICAgX19wcml2YXRlR2V0KHRoaXMsIF9tdXRhdGlvbnMpLmNsZWFyKCk7CiAgICAgIF9fcHJpdmF0ZUdldCh0aGlzLCBfc2NvcGVzKS5jbGVhcigpOwogICAgfSk7CiAgfQogIGdldEFsbCgpIHsKICAgIHJldHVybiBBcnJheS5mcm9tKF9fcHJpdmF0ZUdldCh0aGlzLCBfbXV0YXRpb25zKSk7CiAgfQogIGZpbmQoZmlsdGVycykgewogICAgY29uc3QgZGVmYXVsdGVkRmlsdGVycyA9IHsgZXhhY3Q6IHRydWUsIC4uLmZpbHRlcnMgfTsKICAgIHJldHVybiB0aGlzLmdldEFsbCgpLmZpbmQoCiAgICAgIChtdXRhdGlvbikgPT4gbWF0Y2hNdXRhdGlvbihkZWZhdWx0ZWRGaWx0ZXJzLCBtdXRhdGlvbikKICAgICk7CiAgfQogIGZpbmRBbGwoZmlsdGVycyA9IHt9KSB7CiAgICByZXR1cm4gdGhpcy5nZXRBbGwoKS5maWx0ZXIoKG11dGF0aW9uKSA9PiBtYXRjaE11dGF0aW9uKGZpbHRlcnMsIG11dGF0aW9uKSk7CiAgfQogIG5vdGlmeShldmVudCkgewogICAgbm90aWZ5TWFuYWdlci5iYXRjaCgoKSA9PiB7CiAgICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiB7CiAgICAgICAgbGlzdGVuZXIoZXZlbnQpOwogICAgICB9KTsKICAgIH0pOwogIH0KICByZXN1bWVQYXVzZWRNdXRhdGlvbnMoKSB7CiAgICBjb25zdCBwYXVzZWRNdXRhdGlvbnMgPSB0aGlzLmdldEFsbCgpLmZpbHRlcigoeCkgPT4geC5zdGF0ZS5pc1BhdXNlZCk7CiAgICByZXR1cm4gbm90aWZ5TWFuYWdlci5iYXRjaCgKICAgICAgKCkgPT4gUHJvbWlzZS5hbGwoCiAgICAgICAgcGF1c2VkTXV0YXRpb25zLm1hcCgobXV0YXRpb24pID0+IG11dGF0aW9uLmNvbnRpbnVlKCkuY2F0Y2gobm9vcCkpCiAgICAgICkKICAgICk7CiAgfQp9LCBfbXV0YXRpb25zID0gbmV3IFdlYWtNYXAoKSwgX3Njb3BlcyA9IG5ldyBXZWFrTWFwKCksIF9tdXRhdGlvbklkID0gbmV3IFdlYWtNYXAoKSwgX2E4KTsKZnVuY3Rpb24gc2NvcGVGb3IobXV0YXRpb24pIHsKICB2YXIgX2ExMzsKICByZXR1cm4gKF9hMTMgPSBtdXRhdGlvbi5vcHRpb25zLnNjb3BlKSA9PSBudWxsID8gdm9pZCAwIDogX2ExMy5pZDsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0B0YW5zdGFjay9xdWVyeS1jb3JlL2J1aWxkL21vZGVybi9tdXRhdGlvbk9ic2VydmVyLmpzCnZhciBfY2xpZW50NCwgX2N1cnJlbnRSZXN1bHQyLCBfY3VycmVudE11dGF0aW9uLCBfbXV0YXRlT3B0aW9ucywgX011dGF0aW9uT2JzZXJ2ZXJfaW5zdGFuY2VzLCB1cGRhdGVSZXN1bHRfZm4sIG5vdGlmeV9mbjIsIF9hOTsKdmFyIE11dGF0aW9uT2JzZXJ2ZXIgPSAoX2E5ID0gY2xhc3MgZXh0ZW5kcyBTdWJzY3JpYmFibGUgewogIGNvbnN0cnVjdG9yKGNsaWVudCwgb3B0aW9ucykgewogICAgc3VwZXIoKTsKICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfTXV0YXRpb25PYnNlcnZlcl9pbnN0YW5jZXMpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9jbGllbnQ0KTsKICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfY3VycmVudFJlc3VsdDIpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9jdXJyZW50TXV0YXRpb24pOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9tdXRhdGVPcHRpb25zKTsKICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfY2xpZW50NCwgY2xpZW50KTsKICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTsKICAgIHRoaXMuYmluZE1ldGhvZHMoKTsKICAgIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfTXV0YXRpb25PYnNlcnZlcl9pbnN0YW5jZXMsIHVwZGF0ZVJlc3VsdF9mbikuY2FsbCh0aGlzKTsKICB9CiAgYmluZE1ldGhvZHMoKSB7CiAgICB0aGlzLm11dGF0ZSA9IHRoaXMubXV0YXRlLmJpbmQodGhpcyk7CiAgICB0aGlzLnJlc2V0ID0gdGhpcy5yZXNldC5iaW5kKHRoaXMpOwogIH0KICBzZXRPcHRpb25zKG9wdGlvbnMpIHsKICAgIHZhciBfYTEzOwogICAgY29uc3QgcHJldk9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7CiAgICB0aGlzLm9wdGlvbnMgPSBfX3ByaXZhdGVHZXQodGhpcywgX2NsaWVudDQpLmRlZmF1bHRNdXRhdGlvbk9wdGlvbnMob3B0aW9ucyk7CiAgICBpZiAoIXNoYWxsb3dFcXVhbE9iamVjdHModGhpcy5vcHRpb25zLCBwcmV2T3B0aW9ucykpIHsKICAgICAgX19wcml2YXRlR2V0KHRoaXMsIF9jbGllbnQ0KS5nZXRNdXRhdGlvbkNhY2hlKCkubm90aWZ5KHsKICAgICAgICB0eXBlOiAib2JzZXJ2ZXJPcHRpb25zVXBkYXRlZCIsCiAgICAgICAgbXV0YXRpb246IF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudE11dGF0aW9uKSwKICAgICAgICBvYnNlcnZlcjogdGhpcwogICAgICB9KTsKICAgIH0KICAgIGlmICgocHJldk9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IHByZXZPcHRpb25zLm11dGF0aW9uS2V5KSAmJiB0aGlzLm9wdGlvbnMubXV0YXRpb25LZXkgJiYgaGFzaEtleShwcmV2T3B0aW9ucy5tdXRhdGlvbktleSkgIT09IGhhc2hLZXkodGhpcy5vcHRpb25zLm11dGF0aW9uS2V5KSkgewogICAgICB0aGlzLnJlc2V0KCk7CiAgICB9IGVsc2UgaWYgKCgoX2ExMyA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudE11dGF0aW9uKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMTMuc3RhdGUuc3RhdHVzKSA9PT0gInBlbmRpbmciKSB7CiAgICAgIF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudE11dGF0aW9uKS5zZXRPcHRpb25zKHRoaXMub3B0aW9ucyk7CiAgICB9CiAgfQogIG9uVW5zdWJzY3JpYmUoKSB7CiAgICB2YXIgX2ExMzsKICAgIGlmICghdGhpcy5oYXNMaXN0ZW5lcnMoKSkgewogICAgICAoX2ExMyA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudE11dGF0aW9uKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMTMucmVtb3ZlT2JzZXJ2ZXIodGhpcyk7CiAgICB9CiAgfQogIG9uTXV0YXRpb25VcGRhdGUoYWN0aW9uKSB7CiAgICBfX3ByaXZhdGVNZXRob2QodGhpcywgX011dGF0aW9uT2JzZXJ2ZXJfaW5zdGFuY2VzLCB1cGRhdGVSZXN1bHRfZm4pLmNhbGwodGhpcyk7CiAgICBfX3ByaXZhdGVNZXRob2QodGhpcywgX011dGF0aW9uT2JzZXJ2ZXJfaW5zdGFuY2VzLCBub3RpZnlfZm4yKS5jYWxsKHRoaXMsIGFjdGlvbik7CiAgfQogIGdldEN1cnJlbnRSZXN1bHQoKSB7CiAgICByZXR1cm4gX19wcml2YXRlR2V0KHRoaXMsIF9jdXJyZW50UmVzdWx0Mik7CiAgfQogIHJlc2V0KCkgewogICAgdmFyIF9hMTM7CiAgICAoX2ExMyA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudE11dGF0aW9uKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMTMucmVtb3ZlT2JzZXJ2ZXIodGhpcyk7CiAgICBfX3ByaXZhdGVTZXQodGhpcywgX2N1cnJlbnRNdXRhdGlvbiwgdm9pZCAwKTsKICAgIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfTXV0YXRpb25PYnNlcnZlcl9pbnN0YW5jZXMsIHVwZGF0ZVJlc3VsdF9mbikuY2FsbCh0aGlzKTsKICAgIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfTXV0YXRpb25PYnNlcnZlcl9pbnN0YW5jZXMsIG5vdGlmeV9mbjIpLmNhbGwodGhpcyk7CiAgfQogIG11dGF0ZSh2YXJpYWJsZXMsIG9wdGlvbnMpIHsKICAgIHZhciBfYTEzOwogICAgX19wcml2YXRlU2V0KHRoaXMsIF9tdXRhdGVPcHRpb25zLCBvcHRpb25zKTsKICAgIChfYTEzID0gX19wcml2YXRlR2V0KHRoaXMsIF9jdXJyZW50TXV0YXRpb24pKSA9PSBudWxsID8gdm9pZCAwIDogX2ExMy5yZW1vdmVPYnNlcnZlcih0aGlzKTsKICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfY3VycmVudE11dGF0aW9uLCBfX3ByaXZhdGVHZXQodGhpcywgX2NsaWVudDQpLmdldE11dGF0aW9uQ2FjaGUoKS5idWlsZChfX3ByaXZhdGVHZXQodGhpcywgX2NsaWVudDQpLCB0aGlzLm9wdGlvbnMpKTsKICAgIF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudE11dGF0aW9uKS5hZGRPYnNlcnZlcih0aGlzKTsKICAgIHJldHVybiBfX3ByaXZhdGVHZXQodGhpcywgX2N1cnJlbnRNdXRhdGlvbikuZXhlY3V0ZSh2YXJpYWJsZXMpOwogIH0KfSwgX2NsaWVudDQgPSBuZXcgV2Vha01hcCgpLCBfY3VycmVudFJlc3VsdDIgPSBuZXcgV2Vha01hcCgpLCBfY3VycmVudE11dGF0aW9uID0gbmV3IFdlYWtNYXAoKSwgX211dGF0ZU9wdGlvbnMgPSBuZXcgV2Vha01hcCgpLCBfTXV0YXRpb25PYnNlcnZlcl9pbnN0YW5jZXMgPSBuZXcgV2Vha1NldCgpLCB1cGRhdGVSZXN1bHRfZm4gPSBmdW5jdGlvbigpIHsKICB2YXIgX2ExMzsKICBjb25zdCBzdGF0ZSA9ICgoX2ExMyA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudE11dGF0aW9uKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMTMuc3RhdGUpID8/IGdldERlZmF1bHRTdGF0ZTIoKTsKICBfX3ByaXZhdGVTZXQodGhpcywgX2N1cnJlbnRSZXN1bHQyLCB7CiAgICAuLi5zdGF0ZSwKICAgIGlzUGVuZGluZzogc3RhdGUuc3RhdHVzID09PSAicGVuZGluZyIsCiAgICBpc1N1Y2Nlc3M6IHN0YXRlLnN0YXR1cyA9PT0gInN1Y2Nlc3MiLAogICAgaXNFcnJvcjogc3RhdGUuc3RhdHVzID09PSAiZXJyb3IiLAogICAgaXNJZGxlOiBzdGF0ZS5zdGF0dXMgPT09ICJpZGxlIiwKICAgIG11dGF0ZTogdGhpcy5tdXRhdGUsCiAgICByZXNldDogdGhpcy5yZXNldAogIH0pOwp9LCBub3RpZnlfZm4yID0gZnVuY3Rpb24oYWN0aW9uKSB7CiAgbm90aWZ5TWFuYWdlci5iYXRjaCgoKSA9PiB7CiAgICB2YXIgX2ExMywgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2g7CiAgICBpZiAoX19wcml2YXRlR2V0KHRoaXMsIF9tdXRhdGVPcHRpb25zKSAmJiB0aGlzLmhhc0xpc3RlbmVycygpKSB7CiAgICAgIGNvbnN0IHZhcmlhYmxlcyA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfY3VycmVudFJlc3VsdDIpLnZhcmlhYmxlczsKICAgICAgY29uc3Qgb25NdXRhdGVSZXN1bHQgPSBfX3ByaXZhdGVHZXQodGhpcywgX2N1cnJlbnRSZXN1bHQyKS5jb250ZXh0OwogICAgICBjb25zdCBjb250ZXh0ID0gewogICAgICAgIGNsaWVudDogX19wcml2YXRlR2V0KHRoaXMsIF9jbGllbnQ0KSwKICAgICAgICBtZXRhOiB0aGlzLm9wdGlvbnMubWV0YSwKICAgICAgICBtdXRhdGlvbktleTogdGhpcy5vcHRpb25zLm11dGF0aW9uS2V5CiAgICAgIH07CiAgICAgIGlmICgoYWN0aW9uID09IG51bGwgPyB2b2lkIDAgOiBhY3Rpb24udHlwZSkgPT09ICJzdWNjZXNzIikgewogICAgICAgIChfYiA9IChfYTEzID0gX19wcml2YXRlR2V0KHRoaXMsIF9tdXRhdGVPcHRpb25zKSkub25TdWNjZXNzKSA9PSBudWxsID8gdm9pZCAwIDogX2IuY2FsbCgKICAgICAgICAgIF9hMTMsCiAgICAgICAgICBhY3Rpb24uZGF0YSwKICAgICAgICAgIHZhcmlhYmxlcywKICAgICAgICAgIG9uTXV0YXRlUmVzdWx0LAogICAgICAgICAgY29udGV4dAogICAgICAgICk7CiAgICAgICAgKF9kID0gKF9jID0gX19wcml2YXRlR2V0KHRoaXMsIF9tdXRhdGVPcHRpb25zKSkub25TZXR0bGVkKSA9PSBudWxsID8gdm9pZCAwIDogX2QuY2FsbCgKICAgICAgICAgIF9jLAogICAgICAgICAgYWN0aW9uLmRhdGEsCiAgICAgICAgICBudWxsLAogICAgICAgICAgdmFyaWFibGVzLAogICAgICAgICAgb25NdXRhdGVSZXN1bHQsCiAgICAgICAgICBjb250ZXh0CiAgICAgICAgKTsKICAgICAgfSBlbHNlIGlmICgoYWN0aW9uID09IG51bGwgPyB2b2lkIDAgOiBhY3Rpb24udHlwZSkgPT09ICJlcnJvciIpIHsKICAgICAgICAoX2YgPSAoX2UgPSBfX3ByaXZhdGVHZXQodGhpcywgX211dGF0ZU9wdGlvbnMpKS5vbkVycm9yKSA9PSBudWxsID8gdm9pZCAwIDogX2YuY2FsbCgKICAgICAgICAgIF9lLAogICAgICAgICAgYWN0aW9uLmVycm9yLAogICAgICAgICAgdmFyaWFibGVzLAogICAgICAgICAgb25NdXRhdGVSZXN1bHQsCiAgICAgICAgICBjb250ZXh0CiAgICAgICAgKTsKICAgICAgICAoX2ggPSAoX2cgPSBfX3ByaXZhdGVHZXQodGhpcywgX211dGF0ZU9wdGlvbnMpKS5vblNldHRsZWQpID09IG51bGwgPyB2b2lkIDAgOiBfaC5jYWxsKAogICAgICAgICAgX2csCiAgICAgICAgICB2b2lkIDAsCiAgICAgICAgICBhY3Rpb24uZXJyb3IsCiAgICAgICAgICB2YXJpYWJsZXMsCiAgICAgICAgICBvbk11dGF0ZVJlc3VsdCwKICAgICAgICAgIGNvbnRleHQKICAgICAgICApOwogICAgICB9CiAgICB9CiAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gewogICAgICBsaXN0ZW5lcihfX3ByaXZhdGVHZXQodGhpcywgX2N1cnJlbnRSZXN1bHQyKSk7CiAgICB9KTsKICB9KTsKfSwgX2E5KTsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9AdGFuc3RhY2svcXVlcnktY29yZS9idWlsZC9tb2Rlcm4vcXVlcmllc09ic2VydmVyLmpzCmZ1bmN0aW9uIGRpZmZlcmVuY2UoYXJyYXkxLCBhcnJheTIpIHsKICBjb25zdCBleGNsdWRlU2V0ID0gbmV3IFNldChhcnJheTIpOwogIHJldHVybiBhcnJheTEuZmlsdGVyKCh4KSA9PiAhZXhjbHVkZVNldC5oYXMoeCkpOwp9CmZ1bmN0aW9uIHJlcGxhY2VBdChhcnJheSwgaW5kZXgsIHZhbHVlKSB7CiAgY29uc3QgY29weSA9IGFycmF5LnNsaWNlKDApOwogIGNvcHlbaW5kZXhdID0gdmFsdWU7CiAgcmV0dXJuIGNvcHk7Cn0KdmFyIF9jbGllbnQ1LCBfcmVzdWx0LCBfcXVlcmllcywgX29wdGlvbnMsIF9vYnNlcnZlcnMyLCBfY29tYmluZWRSZXN1bHQsIF9sYXN0Q29tYmluZSwgX2xhc3RSZXN1bHQsIF9vYnNlcnZlck1hdGNoZXMsIF9RdWVyaWVzT2JzZXJ2ZXJfaW5zdGFuY2VzLCB0cmFja1Jlc3VsdF9mbiwgY29tYmluZVJlc3VsdF9mbiwgZmluZE1hdGNoaW5nT2JzZXJ2ZXJzX2ZuLCBvblVwZGF0ZV9mbiwgbm90aWZ5X2ZuMywgX2ExMDsKdmFyIFF1ZXJpZXNPYnNlcnZlciA9IChfYTEwID0gY2xhc3MgZXh0ZW5kcyBTdWJzY3JpYmFibGUgewogIGNvbnN0cnVjdG9yKGNsaWVudCwgcXVlcmllcywgb3B0aW9ucykgewogICAgc3VwZXIoKTsKICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfUXVlcmllc09ic2VydmVyX2luc3RhbmNlcyk7CiAgICBfX3ByaXZhdGVBZGQodGhpcywgX2NsaWVudDUpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9yZXN1bHQpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9xdWVyaWVzKTsKICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfb3B0aW9ucyk7CiAgICBfX3ByaXZhdGVBZGQodGhpcywgX29ic2VydmVyczIpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9jb21iaW5lZFJlc3VsdCk7CiAgICBfX3ByaXZhdGVBZGQodGhpcywgX2xhc3RDb21iaW5lKTsKICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfbGFzdFJlc3VsdCk7CiAgICBfX3ByaXZhdGVBZGQodGhpcywgX29ic2VydmVyTWF0Y2hlcywgW10pOwogICAgX19wcml2YXRlU2V0KHRoaXMsIF9jbGllbnQ1LCBjbGllbnQpOwogICAgX19wcml2YXRlU2V0KHRoaXMsIF9vcHRpb25zLCBvcHRpb25zKTsKICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfcXVlcmllcywgW10pOwogICAgX19wcml2YXRlU2V0KHRoaXMsIF9vYnNlcnZlcnMyLCBbXSk7CiAgICBfX3ByaXZhdGVTZXQodGhpcywgX3Jlc3VsdCwgW10pOwogICAgdGhpcy5zZXRRdWVyaWVzKHF1ZXJpZXMpOwogIH0KICBvblN1YnNjcmliZSgpIHsKICAgIGlmICh0aGlzLmxpc3RlbmVycy5zaXplID09PSAxKSB7CiAgICAgIF9fcHJpdmF0ZUdldCh0aGlzLCBfb2JzZXJ2ZXJzMikuZm9yRWFjaCgob2JzZXJ2ZXIpID0+IHsKICAgICAgICBvYnNlcnZlci5zdWJzY3JpYmUoKHJlc3VsdCkgPT4gewogICAgICAgICAgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9RdWVyaWVzT2JzZXJ2ZXJfaW5zdGFuY2VzLCBvblVwZGF0ZV9mbikuY2FsbCh0aGlzLCBvYnNlcnZlciwgcmVzdWx0KTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfQogIG9uVW5zdWJzY3JpYmUoKSB7CiAgICBpZiAoIXRoaXMubGlzdGVuZXJzLnNpemUpIHsKICAgICAgdGhpcy5kZXN0cm95KCk7CiAgICB9CiAgfQogIGRlc3Ryb3koKSB7CiAgICB0aGlzLmxpc3RlbmVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7CiAgICBfX3ByaXZhdGVHZXQodGhpcywgX29ic2VydmVyczIpLmZvckVhY2goKG9ic2VydmVyKSA9PiB7CiAgICAgIG9ic2VydmVyLmRlc3Ryb3koKTsKICAgIH0pOwogIH0KICBzZXRRdWVyaWVzKHF1ZXJpZXMsIG9wdGlvbnMpIHsKICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfcXVlcmllcywgcXVlcmllcyk7CiAgICBfX3ByaXZhdGVTZXQodGhpcywgX29wdGlvbnMsIG9wdGlvbnMpOwogICAgaWYgKHRydWUpIHsKICAgICAgY29uc3QgcXVlcnlIYXNoZXMgPSBxdWVyaWVzLm1hcCgKICAgICAgICAocXVlcnkpID0+IF9fcHJpdmF0ZUdldCh0aGlzLCBfY2xpZW50NSkuZGVmYXVsdFF1ZXJ5T3B0aW9ucyhxdWVyeSkucXVlcnlIYXNoCiAgICAgICk7CiAgICAgIGlmIChuZXcgU2V0KHF1ZXJ5SGFzaGVzKS5zaXplICE9PSBxdWVyeUhhc2hlcy5sZW5ndGgpIHsKICAgICAgICBjb25zb2xlLndhcm4oCiAgICAgICAgICAiW1F1ZXJpZXNPYnNlcnZlcl06IER1cGxpY2F0ZSBRdWVyaWVzIGZvdW5kLiBUaGlzIG1pZ2h0IHJlc3VsdCBpbiB1bmV4cGVjdGVkIGJlaGF2aW9yLiIKICAgICAgICApOwogICAgICB9CiAgICB9CiAgICBub3RpZnlNYW5hZ2VyLmJhdGNoKCgpID0+IHsKICAgICAgY29uc3QgcHJldk9ic2VydmVycyA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfb2JzZXJ2ZXJzMik7CiAgICAgIGNvbnN0IG5ld09ic2VydmVyTWF0Y2hlcyA9IF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfUXVlcmllc09ic2VydmVyX2luc3RhbmNlcywgZmluZE1hdGNoaW5nT2JzZXJ2ZXJzX2ZuKS5jYWxsKHRoaXMsIF9fcHJpdmF0ZUdldCh0aGlzLCBfcXVlcmllcykpOwogICAgICBfX3ByaXZhdGVTZXQodGhpcywgX29ic2VydmVyTWF0Y2hlcywgbmV3T2JzZXJ2ZXJNYXRjaGVzKTsKICAgICAgbmV3T2JzZXJ2ZXJNYXRjaGVzLmZvckVhY2goCiAgICAgICAgKG1hdGNoKSA9PiBtYXRjaC5vYnNlcnZlci5zZXRPcHRpb25zKG1hdGNoLmRlZmF1bHRlZFF1ZXJ5T3B0aW9ucykKICAgICAgKTsKICAgICAgY29uc3QgbmV3T2JzZXJ2ZXJzID0gbmV3T2JzZXJ2ZXJNYXRjaGVzLm1hcCgobWF0Y2gpID0+IG1hdGNoLm9ic2VydmVyKTsKICAgICAgY29uc3QgbmV3UmVzdWx0ID0gbmV3T2JzZXJ2ZXJzLm1hcCgKICAgICAgICAob2JzZXJ2ZXIpID0+IG9ic2VydmVyLmdldEN1cnJlbnRSZXN1bHQoKQogICAgICApOwogICAgICBjb25zdCBoYXNMZW5ndGhDaGFuZ2UgPSBwcmV2T2JzZXJ2ZXJzLmxlbmd0aCAhPT0gbmV3T2JzZXJ2ZXJzLmxlbmd0aDsKICAgICAgY29uc3QgaGFzSW5kZXhDaGFuZ2UgPSBuZXdPYnNlcnZlcnMuc29tZSgKICAgICAgICAob2JzZXJ2ZXIsIGluZGV4KSA9PiBvYnNlcnZlciAhPT0gcHJldk9ic2VydmVyc1tpbmRleF0KICAgICAgKTsKICAgICAgY29uc3QgaGFzU3RydWN0dXJhbENoYW5nZSA9IGhhc0xlbmd0aENoYW5nZSB8fCBoYXNJbmRleENoYW5nZTsKICAgICAgY29uc3QgaGFzUmVzdWx0Q2hhbmdlID0gaGFzU3RydWN0dXJhbENoYW5nZSA/IHRydWUgOiBuZXdSZXN1bHQuc29tZSgocmVzdWx0LCBpbmRleCkgPT4gewogICAgICAgIGNvbnN0IHByZXYgPSBfX3ByaXZhdGVHZXQodGhpcywgX3Jlc3VsdClbaW5kZXhdOwogICAgICAgIHJldHVybiAhcHJldiB8fCAhc2hhbGxvd0VxdWFsT2JqZWN0cyhyZXN1bHQsIHByZXYpOwogICAgICB9KTsKICAgICAgaWYgKCFoYXNTdHJ1Y3R1cmFsQ2hhbmdlICYmICFoYXNSZXN1bHRDaGFuZ2UpIHJldHVybjsKICAgICAgaWYgKGhhc1N0cnVjdHVyYWxDaGFuZ2UpIHsKICAgICAgICBfX3ByaXZhdGVTZXQodGhpcywgX29ic2VydmVyczIsIG5ld09ic2VydmVycyk7CiAgICAgIH0KICAgICAgX19wcml2YXRlU2V0KHRoaXMsIF9yZXN1bHQsIG5ld1Jlc3VsdCk7CiAgICAgIGlmICghdGhpcy5oYXNMaXN0ZW5lcnMoKSkgcmV0dXJuOwogICAgICBpZiAoaGFzU3RydWN0dXJhbENoYW5nZSkgewogICAgICAgIGRpZmZlcmVuY2UocHJldk9ic2VydmVycywgbmV3T2JzZXJ2ZXJzKS5mb3JFYWNoKChvYnNlcnZlcikgPT4gewogICAgICAgICAgb2JzZXJ2ZXIuZGVzdHJveSgpOwogICAgICAgIH0pOwogICAgICAgIGRpZmZlcmVuY2UobmV3T2JzZXJ2ZXJzLCBwcmV2T2JzZXJ2ZXJzKS5mb3JFYWNoKChvYnNlcnZlcikgPT4gewogICAgICAgICAgb2JzZXJ2ZXIuc3Vic2NyaWJlKChyZXN1bHQpID0+IHsKICAgICAgICAgICAgX19wcml2YXRlTWV0aG9kKHRoaXMsIF9RdWVyaWVzT2JzZXJ2ZXJfaW5zdGFuY2VzLCBvblVwZGF0ZV9mbikuY2FsbCh0aGlzLCBvYnNlcnZlciwgcmVzdWx0KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfUXVlcmllc09ic2VydmVyX2luc3RhbmNlcywgbm90aWZ5X2ZuMykuY2FsbCh0aGlzKTsKICAgIH0pOwogIH0KICBnZXRDdXJyZW50UmVzdWx0KCkgewogICAgcmV0dXJuIF9fcHJpdmF0ZUdldCh0aGlzLCBfcmVzdWx0KTsKICB9CiAgZ2V0UXVlcmllcygpIHsKICAgIHJldHVybiBfX3ByaXZhdGVHZXQodGhpcywgX29ic2VydmVyczIpLm1hcCgob2JzZXJ2ZXIpID0+IG9ic2VydmVyLmdldEN1cnJlbnRRdWVyeSgpKTsKICB9CiAgZ2V0T2JzZXJ2ZXJzKCkgewogICAgcmV0dXJuIF9fcHJpdmF0ZUdldCh0aGlzLCBfb2JzZXJ2ZXJzMik7CiAgfQogIGdldE9wdGltaXN0aWNSZXN1bHQocXVlcmllcywgY29tYmluZSkgewogICAgY29uc3QgbWF0Y2hlcyA9IF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfUXVlcmllc09ic2VydmVyX2luc3RhbmNlcywgZmluZE1hdGNoaW5nT2JzZXJ2ZXJzX2ZuKS5jYWxsKHRoaXMsIHF1ZXJpZXMpOwogICAgY29uc3QgcmVzdWx0ID0gbWF0Y2hlcy5tYXAoCiAgICAgIChtYXRjaCkgPT4gbWF0Y2gub2JzZXJ2ZXIuZ2V0T3B0aW1pc3RpY1Jlc3VsdChtYXRjaC5kZWZhdWx0ZWRRdWVyeU9wdGlvbnMpCiAgICApOwogICAgcmV0dXJuIFsKICAgICAgcmVzdWx0LAogICAgICAocikgPT4gewogICAgICAgIHJldHVybiBfX3ByaXZhdGVNZXRob2QodGhpcywgX1F1ZXJpZXNPYnNlcnZlcl9pbnN0YW5jZXMsIGNvbWJpbmVSZXN1bHRfZm4pLmNhbGwodGhpcywgciA/PyByZXN1bHQsIGNvbWJpbmUpOwogICAgICB9LAogICAgICAoKSA9PiB7CiAgICAgICAgcmV0dXJuIF9fcHJpdmF0ZU1ldGhvZCh0aGlzLCBfUXVlcmllc09ic2VydmVyX2luc3RhbmNlcywgdHJhY2tSZXN1bHRfZm4pLmNhbGwodGhpcywgcmVzdWx0LCBtYXRjaGVzKTsKICAgICAgfQogICAgXTsKICB9Cn0sIF9jbGllbnQ1ID0gbmV3IFdlYWtNYXAoKSwgX3Jlc3VsdCA9IG5ldyBXZWFrTWFwKCksIF9xdWVyaWVzID0gbmV3IFdlYWtNYXAoKSwgX29wdGlvbnMgPSBuZXcgV2Vha01hcCgpLCBfb2JzZXJ2ZXJzMiA9IG5ldyBXZWFrTWFwKCksIF9jb21iaW5lZFJlc3VsdCA9IG5ldyBXZWFrTWFwKCksIF9sYXN0Q29tYmluZSA9IG5ldyBXZWFrTWFwKCksIF9sYXN0UmVzdWx0ID0gbmV3IFdlYWtNYXAoKSwgX29ic2VydmVyTWF0Y2hlcyA9IG5ldyBXZWFrTWFwKCksIF9RdWVyaWVzT2JzZXJ2ZXJfaW5zdGFuY2VzID0gbmV3IFdlYWtTZXQoKSwgdHJhY2tSZXN1bHRfZm4gPSBmdW5jdGlvbihyZXN1bHQsIG1hdGNoZXMpIHsKICByZXR1cm4gbWF0Y2hlcy5tYXAoKG1hdGNoLCBpbmRleCkgPT4gewogICAgY29uc3Qgb2JzZXJ2ZXJSZXN1bHQgPSByZXN1bHRbaW5kZXhdOwogICAgcmV0dXJuICFtYXRjaC5kZWZhdWx0ZWRRdWVyeU9wdGlvbnMubm90aWZ5T25DaGFuZ2VQcm9wcyA/IG1hdGNoLm9ic2VydmVyLnRyYWNrUmVzdWx0KG9ic2VydmVyUmVzdWx0LCAoYWNjZXNzZWRQcm9wKSA9PiB7CiAgICAgIG1hdGNoZXMuZm9yRWFjaCgobSkgPT4gewogICAgICAgIG0ub2JzZXJ2ZXIudHJhY2tQcm9wKGFjY2Vzc2VkUHJvcCk7CiAgICAgIH0pOwogICAgfSkgOiBvYnNlcnZlclJlc3VsdDsKICB9KTsKfSwgY29tYmluZVJlc3VsdF9mbiA9IGZ1bmN0aW9uKGlucHV0LCBjb21iaW5lKSB7CiAgaWYgKGNvbWJpbmUpIHsKICAgIGlmICghX19wcml2YXRlR2V0KHRoaXMsIF9jb21iaW5lZFJlc3VsdCkgfHwgX19wcml2YXRlR2V0KHRoaXMsIF9yZXN1bHQpICE9PSBfX3ByaXZhdGVHZXQodGhpcywgX2xhc3RSZXN1bHQpIHx8IGNvbWJpbmUgIT09IF9fcHJpdmF0ZUdldCh0aGlzLCBfbGFzdENvbWJpbmUpKSB7CiAgICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfbGFzdENvbWJpbmUsIGNvbWJpbmUpOwogICAgICBfX3ByaXZhdGVTZXQodGhpcywgX2xhc3RSZXN1bHQsIF9fcHJpdmF0ZUdldCh0aGlzLCBfcmVzdWx0KSk7CiAgICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfY29tYmluZWRSZXN1bHQsIHJlcGxhY2VFcXVhbERlZXAoCiAgICAgICAgX19wcml2YXRlR2V0KHRoaXMsIF9jb21iaW5lZFJlc3VsdCksCiAgICAgICAgY29tYmluZShpbnB1dCkKICAgICAgKSk7CiAgICB9CiAgICByZXR1cm4gX19wcml2YXRlR2V0KHRoaXMsIF9jb21iaW5lZFJlc3VsdCk7CiAgfQogIHJldHVybiBpbnB1dDsKfSwgZmluZE1hdGNoaW5nT2JzZXJ2ZXJzX2ZuID0gZnVuY3Rpb24ocXVlcmllcykgewogIGNvbnN0IHByZXZPYnNlcnZlcnNNYXAgPSBuZXcgTWFwKAogICAgX19wcml2YXRlR2V0KHRoaXMsIF9vYnNlcnZlcnMyKS5tYXAoKG9ic2VydmVyKSA9PiBbb2JzZXJ2ZXIub3B0aW9ucy5xdWVyeUhhc2gsIG9ic2VydmVyXSkKICApOwogIGNvbnN0IG9ic2VydmVycyA9IFtdOwogIHF1ZXJpZXMuZm9yRWFjaCgob3B0aW9ucykgPT4gewogICAgY29uc3QgZGVmYXVsdGVkT3B0aW9ucyA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfY2xpZW50NSkuZGVmYXVsdFF1ZXJ5T3B0aW9ucyhvcHRpb25zKTsKICAgIGNvbnN0IG1hdGNoID0gcHJldk9ic2VydmVyc01hcC5nZXQoZGVmYXVsdGVkT3B0aW9ucy5xdWVyeUhhc2gpOwogICAgaWYgKG1hdGNoKSB7CiAgICAgIG9ic2VydmVycy5wdXNoKHsKICAgICAgICBkZWZhdWx0ZWRRdWVyeU9wdGlvbnM6IGRlZmF1bHRlZE9wdGlvbnMsCiAgICAgICAgb2JzZXJ2ZXI6IG1hdGNoCiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgb2JzZXJ2ZXJzLnB1c2goewogICAgICAgIGRlZmF1bHRlZFF1ZXJ5T3B0aW9uczogZGVmYXVsdGVkT3B0aW9ucywKICAgICAgICBvYnNlcnZlcjogbmV3IFF1ZXJ5T2JzZXJ2ZXIoX19wcml2YXRlR2V0KHRoaXMsIF9jbGllbnQ1KSwgZGVmYXVsdGVkT3B0aW9ucykKICAgICAgfSk7CiAgICB9CiAgfSk7CiAgcmV0dXJuIG9ic2VydmVyczsKfSwgb25VcGRhdGVfZm4gPSBmdW5jdGlvbihvYnNlcnZlciwgcmVzdWx0KSB7CiAgY29uc3QgaW5kZXggPSBfX3ByaXZhdGVHZXQodGhpcywgX29ic2VydmVyczIpLmluZGV4T2Yob2JzZXJ2ZXIpOwogIGlmIChpbmRleCAhPT0gLTEpIHsKICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfcmVzdWx0LCByZXBsYWNlQXQoX19wcml2YXRlR2V0KHRoaXMsIF9yZXN1bHQpLCBpbmRleCwgcmVzdWx0KSk7CiAgICBfX3ByaXZhdGVNZXRob2QodGhpcywgX1F1ZXJpZXNPYnNlcnZlcl9pbnN0YW5jZXMsIG5vdGlmeV9mbjMpLmNhbGwodGhpcyk7CiAgfQp9LCBub3RpZnlfZm4zID0gZnVuY3Rpb24oKSB7CiAgdmFyIF9hMTM7CiAgaWYgKHRoaXMuaGFzTGlzdGVuZXJzKCkpIHsKICAgIGNvbnN0IHByZXZpb3VzUmVzdWx0ID0gX19wcml2YXRlR2V0KHRoaXMsIF9jb21iaW5lZFJlc3VsdCk7CiAgICBjb25zdCBuZXdUcmFja2VkID0gX19wcml2YXRlTWV0aG9kKHRoaXMsIF9RdWVyaWVzT2JzZXJ2ZXJfaW5zdGFuY2VzLCB0cmFja1Jlc3VsdF9mbikuY2FsbCh0aGlzLCBfX3ByaXZhdGVHZXQodGhpcywgX3Jlc3VsdCksIF9fcHJpdmF0ZUdldCh0aGlzLCBfb2JzZXJ2ZXJNYXRjaGVzKSk7CiAgICBjb25zdCBuZXdSZXN1bHQgPSBfX3ByaXZhdGVNZXRob2QodGhpcywgX1F1ZXJpZXNPYnNlcnZlcl9pbnN0YW5jZXMsIGNvbWJpbmVSZXN1bHRfZm4pLmNhbGwodGhpcywgbmV3VHJhY2tlZCwgKF9hMTMgPSBfX3ByaXZhdGVHZXQodGhpcywgX29wdGlvbnMpKSA9PSBudWxsID8gdm9pZCAwIDogX2ExMy5jb21iaW5lKTsKICAgIGlmIChwcmV2aW91c1Jlc3VsdCAhPT0gbmV3UmVzdWx0KSB7CiAgICAgIG5vdGlmeU1hbmFnZXIuYmF0Y2goKCkgPT4gewogICAgICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiB7CiAgICAgICAgICBsaXN0ZW5lcihfX3ByaXZhdGVHZXQodGhpcywgX3Jlc3VsdCkpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn0sIF9hMTApOwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0B0YW5zdGFjay9xdWVyeS1jb3JlL2J1aWxkL21vZGVybi9xdWVyeUNhY2hlLmpzCnZhciBfcXVlcmllczIsIF9hMTE7CnZhciBRdWVyeUNhY2hlID0gKF9hMTEgPSBjbGFzcyBleHRlbmRzIFN1YnNjcmliYWJsZSB7CiAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHsKICAgIHN1cGVyKCk7CiAgICBfX3ByaXZhdGVBZGQodGhpcywgX3F1ZXJpZXMyKTsKICAgIHRoaXMuY29uZmlnID0gY29uZmlnOwogICAgX19wcml2YXRlU2V0KHRoaXMsIF9xdWVyaWVzMiwgLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSk7CiAgfQogIGJ1aWxkKGNsaWVudCwgb3B0aW9ucywgc3RhdGUpIHsKICAgIGNvbnN0IHF1ZXJ5S2V5ID0gb3B0aW9ucy5xdWVyeUtleTsKICAgIGNvbnN0IHF1ZXJ5SGFzaCA9IG9wdGlvbnMucXVlcnlIYXNoID8/IGhhc2hRdWVyeUtleUJ5T3B0aW9ucyhxdWVyeUtleSwgb3B0aW9ucyk7CiAgICBsZXQgcXVlcnkgPSB0aGlzLmdldChxdWVyeUhhc2gpOwogICAgaWYgKCFxdWVyeSkgewogICAgICBxdWVyeSA9IG5ldyBRdWVyeSh7CiAgICAgICAgY2xpZW50LAogICAgICAgIHF1ZXJ5S2V5LAogICAgICAgIHF1ZXJ5SGFzaCwKICAgICAgICBvcHRpb25zOiBjbGllbnQuZGVmYXVsdFF1ZXJ5T3B0aW9ucyhvcHRpb25zKSwKICAgICAgICBzdGF0ZSwKICAgICAgICBkZWZhdWx0T3B0aW9uczogY2xpZW50LmdldFF1ZXJ5RGVmYXVsdHMocXVlcnlLZXkpCiAgICAgIH0pOwogICAgICB0aGlzLmFkZChxdWVyeSk7CiAgICB9CiAgICByZXR1cm4gcXVlcnk7CiAgfQogIGFkZChxdWVyeSkgewogICAgaWYgKCFfX3ByaXZhdGVHZXQodGhpcywgX3F1ZXJpZXMyKS5oYXMocXVlcnkucXVlcnlIYXNoKSkgewogICAgICBfX3ByaXZhdGVHZXQodGhpcywgX3F1ZXJpZXMyKS5zZXQocXVlcnkucXVlcnlIYXNoLCBxdWVyeSk7CiAgICAgIHRoaXMubm90aWZ5KHsKICAgICAgICB0eXBlOiAiYWRkZWQiLAogICAgICAgIHF1ZXJ5CiAgICAgIH0pOwogICAgfQogIH0KICByZW1vdmUocXVlcnkpIHsKICAgIGNvbnN0IHF1ZXJ5SW5NYXAgPSBfX3ByaXZhdGVHZXQodGhpcywgX3F1ZXJpZXMyKS5nZXQocXVlcnkucXVlcnlIYXNoKTsKICAgIGlmIChxdWVyeUluTWFwKSB7CiAgICAgIHF1ZXJ5LmRlc3Ryb3koKTsKICAgICAgaWYgKHF1ZXJ5SW5NYXAgPT09IHF1ZXJ5KSB7CiAgICAgICAgX19wcml2YXRlR2V0KHRoaXMsIF9xdWVyaWVzMikuZGVsZXRlKHF1ZXJ5LnF1ZXJ5SGFzaCk7CiAgICAgIH0KICAgICAgdGhpcy5ub3RpZnkoeyB0eXBlOiAicmVtb3ZlZCIsIHF1ZXJ5IH0pOwogICAgfQogIH0KICBjbGVhcigpIHsKICAgIG5vdGlmeU1hbmFnZXIuYmF0Y2goKCkgPT4gewogICAgICB0aGlzLmdldEFsbCgpLmZvckVhY2goKHF1ZXJ5KSA9PiB7CiAgICAgICAgdGhpcy5yZW1vdmUocXVlcnkpOwogICAgICB9KTsKICAgIH0pOwogIH0KICBnZXQocXVlcnlIYXNoKSB7CiAgICByZXR1cm4gX19wcml2YXRlR2V0KHRoaXMsIF9xdWVyaWVzMikuZ2V0KHF1ZXJ5SGFzaCk7CiAgfQogIGdldEFsbCgpIHsKICAgIHJldHVybiBbLi4uX19wcml2YXRlR2V0KHRoaXMsIF9xdWVyaWVzMikudmFsdWVzKCldOwogIH0KICBmaW5kKGZpbHRlcnMpIHsKICAgIGNvbnN0IGRlZmF1bHRlZEZpbHRlcnMgPSB7IGV4YWN0OiB0cnVlLCAuLi5maWx0ZXJzIH07CiAgICByZXR1cm4gdGhpcy5nZXRBbGwoKS5maW5kKAogICAgICAocXVlcnkpID0+IG1hdGNoUXVlcnkoZGVmYXVsdGVkRmlsdGVycywgcXVlcnkpCiAgICApOwogIH0KICBmaW5kQWxsKGZpbHRlcnMgPSB7fSkgewogICAgY29uc3QgcXVlcmllcyA9IHRoaXMuZ2V0QWxsKCk7CiAgICByZXR1cm4gT2JqZWN0LmtleXMoZmlsdGVycykubGVuZ3RoID4gMCA/IHF1ZXJpZXMuZmlsdGVyKChxdWVyeSkgPT4gbWF0Y2hRdWVyeShmaWx0ZXJzLCBxdWVyeSkpIDogcXVlcmllczsKICB9CiAgbm90aWZ5KGV2ZW50KSB7CiAgICBub3RpZnlNYW5hZ2VyLmJhdGNoKCgpID0+IHsKICAgICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaCgobGlzdGVuZXIpID0+IHsKICAgICAgICBsaXN0ZW5lcihldmVudCk7CiAgICAgIH0pOwogICAgfSk7CiAgfQogIG9uRm9jdXMoKSB7CiAgICBub3RpZnlNYW5hZ2VyLmJhdGNoKCgpID0+IHsKICAgICAgdGhpcy5nZXRBbGwoKS5mb3JFYWNoKChxdWVyeSkgPT4gewogICAgICAgIHF1ZXJ5Lm9uRm9jdXMoKTsKICAgICAgfSk7CiAgICB9KTsKICB9CiAgb25PbmxpbmUoKSB7CiAgICBub3RpZnlNYW5hZ2VyLmJhdGNoKCgpID0+IHsKICAgICAgdGhpcy5nZXRBbGwoKS5mb3JFYWNoKChxdWVyeSkgPT4gewogICAgICAgIHF1ZXJ5Lm9uT25saW5lKCk7CiAgICAgIH0pOwogICAgfSk7CiAgfQp9LCBfcXVlcmllczIgPSBuZXcgV2Vha01hcCgpLCBfYTExKTsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9AdGFuc3RhY2svcXVlcnktY29yZS9idWlsZC9tb2Rlcm4vcXVlcnlDbGllbnQuanMKdmFyIF9xdWVyeUNhY2hlLCBfbXV0YXRpb25DYWNoZTIsIF9kZWZhdWx0T3B0aW9uczIsIF9xdWVyeURlZmF1bHRzLCBfbXV0YXRpb25EZWZhdWx0cywgX21vdW50Q291bnQsIF91bnN1YnNjcmliZUZvY3VzLCBfdW5zdWJzY3JpYmVPbmxpbmUsIF9hMTI7CnZhciBRdWVyeUNsaWVudCA9IChfYTEyID0gY2xhc3MgewogIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7CiAgICBfX3ByaXZhdGVBZGQodGhpcywgX3F1ZXJ5Q2FjaGUpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9tdXRhdGlvbkNhY2hlMik7CiAgICBfX3ByaXZhdGVBZGQodGhpcywgX2RlZmF1bHRPcHRpb25zMik7CiAgICBfX3ByaXZhdGVBZGQodGhpcywgX3F1ZXJ5RGVmYXVsdHMpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF9tdXRhdGlvbkRlZmF1bHRzKTsKICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfbW91bnRDb3VudCk7CiAgICBfX3ByaXZhdGVBZGQodGhpcywgX3Vuc3Vic2NyaWJlRm9jdXMpOwogICAgX19wcml2YXRlQWRkKHRoaXMsIF91bnN1YnNjcmliZU9ubGluZSk7CiAgICBfX3ByaXZhdGVTZXQodGhpcywgX3F1ZXJ5Q2FjaGUsIGNvbmZpZy5xdWVyeUNhY2hlIHx8IG5ldyBRdWVyeUNhY2hlKCkpOwogICAgX19wcml2YXRlU2V0KHRoaXMsIF9tdXRhdGlvbkNhY2hlMiwgY29uZmlnLm11dGF0aW9uQ2FjaGUgfHwgbmV3IE11dGF0aW9uQ2FjaGUoKSk7CiAgICBfX3ByaXZhdGVTZXQodGhpcywgX2RlZmF1bHRPcHRpb25zMiwgY29uZmlnLmRlZmF1bHRPcHRpb25zIHx8IHt9KTsKICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfcXVlcnlEZWZhdWx0cywgLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSk7CiAgICBfX3ByaXZhdGVTZXQodGhpcywgX211dGF0aW9uRGVmYXVsdHMsIC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkpOwogICAgX19wcml2YXRlU2V0KHRoaXMsIF9tb3VudENvdW50LCAwKTsKICB9CiAgbW91bnQoKSB7CiAgICBfX3ByaXZhdGVXcmFwcGVyKHRoaXMsIF9tb3VudENvdW50KS5fKys7CiAgICBpZiAoX19wcml2YXRlR2V0KHRoaXMsIF9tb3VudENvdW50KSAhPT0gMSkgcmV0dXJuOwogICAgX19wcml2YXRlU2V0KHRoaXMsIF91bnN1YnNjcmliZUZvY3VzLCBmb2N1c01hbmFnZXIuc3Vic2NyaWJlKGFzeW5jIChmb2N1c2VkKSA9PiB7CiAgICAgIGlmIChmb2N1c2VkKSB7CiAgICAgICAgYXdhaXQgdGhpcy5yZXN1bWVQYXVzZWRNdXRhdGlvbnMoKTsKICAgICAgICBfX3ByaXZhdGVHZXQodGhpcywgX3F1ZXJ5Q2FjaGUpLm9uRm9jdXMoKTsKICAgICAgfQogICAgfSkpOwogICAgX19wcml2YXRlU2V0KHRoaXMsIF91bnN1YnNjcmliZU9ubGluZSwgb25saW5lTWFuYWdlci5zdWJzY3JpYmUoYXN5bmMgKG9ubGluZSkgPT4gewogICAgICBpZiAob25saW5lKSB7CiAgICAgICAgYXdhaXQgdGhpcy5yZXN1bWVQYXVzZWRNdXRhdGlvbnMoKTsKICAgICAgICBfX3ByaXZhdGVHZXQodGhpcywgX3F1ZXJ5Q2FjaGUpLm9uT25saW5lKCk7CiAgICAgIH0KICAgIH0pKTsKICB9CiAgdW5tb3VudCgpIHsKICAgIHZhciBfYTEzLCBfYjsKICAgIF9fcHJpdmF0ZVdyYXBwZXIodGhpcywgX21vdW50Q291bnQpLl8tLTsKICAgIGlmIChfX3ByaXZhdGVHZXQodGhpcywgX21vdW50Q291bnQpICE9PSAwKSByZXR1cm47CiAgICAoX2ExMyA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfdW5zdWJzY3JpYmVGb2N1cykpID09IG51bGwgPyB2b2lkIDAgOiBfYTEzLmNhbGwodGhpcyk7CiAgICBfX3ByaXZhdGVTZXQodGhpcywgX3Vuc3Vic2NyaWJlRm9jdXMsIHZvaWQgMCk7CiAgICAoX2IgPSBfX3ByaXZhdGVHZXQodGhpcywgX3Vuc3Vic2NyaWJlT25saW5lKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmNhbGwodGhpcyk7CiAgICBfX3ByaXZhdGVTZXQodGhpcywgX3Vuc3Vic2NyaWJlT25saW5lLCB2b2lkIDApOwogIH0KICBpc0ZldGNoaW5nKGZpbHRlcnMpIHsKICAgIHJldHVybiBfX3ByaXZhdGVHZXQodGhpcywgX3F1ZXJ5Q2FjaGUpLmZpbmRBbGwoeyAuLi5maWx0ZXJzLCBmZXRjaFN0YXR1czogImZldGNoaW5nIiB9KS5sZW5ndGg7CiAgfQogIGlzTXV0YXRpbmcoZmlsdGVycykgewogICAgcmV0dXJuIF9fcHJpdmF0ZUdldCh0aGlzLCBfbXV0YXRpb25DYWNoZTIpLmZpbmRBbGwoeyAuLi5maWx0ZXJzLCBzdGF0dXM6ICJwZW5kaW5nIiB9KS5sZW5ndGg7CiAgfQogIC8qKgogICAqIEltcGVyYXRpdmUgKG5vbi1yZWFjdGl2ZSkgd2F5IHRvIHJldHJpZXZlIGRhdGEgZm9yIGEgUXVlcnlLZXkuCiAgICogU2hvdWxkIG9ubHkgYmUgdXNlZCBpbiBjYWxsYmFja3Mgb3IgZnVuY3Rpb25zIHdoZXJlIHJlYWRpbmcgdGhlIGxhdGVzdCBkYXRhIGlzIG5lY2Vzc2FyeSwgZS5nLiBmb3Igb3B0aW1pc3RpYyB1cGRhdGVzLgogICAqCiAgICogSGludDogRG8gbm90IHVzZSB0aGlzIGZ1bmN0aW9uIGluc2lkZSBhIGNvbXBvbmVudCwgYmVjYXVzZSBpdCB3b24ndCByZWNlaXZlIHVwZGF0ZXMuCiAgICogVXNlIGB1c2VRdWVyeWAgdG8gY3JlYXRlIGEgYFF1ZXJ5T2JzZXJ2ZXJgIHRoYXQgc3Vic2NyaWJlcyB0byBjaGFuZ2VzLgogICAqLwogIGdldFF1ZXJ5RGF0YShxdWVyeUtleSkgewogICAgdmFyIF9hMTM7CiAgICBjb25zdCBvcHRpb25zID0gdGhpcy5kZWZhdWx0UXVlcnlPcHRpb25zKHsgcXVlcnlLZXkgfSk7CiAgICByZXR1cm4gKF9hMTMgPSBfX3ByaXZhdGVHZXQodGhpcywgX3F1ZXJ5Q2FjaGUpLmdldChvcHRpb25zLnF1ZXJ5SGFzaCkpID09IG51bGwgPyB2b2lkIDAgOiBfYTEzLnN0YXRlLmRhdGE7CiAgfQogIGVuc3VyZVF1ZXJ5RGF0YShvcHRpb25zKSB7CiAgICBjb25zdCBkZWZhdWx0ZWRPcHRpb25zID0gdGhpcy5kZWZhdWx0UXVlcnlPcHRpb25zKG9wdGlvbnMpOwogICAgY29uc3QgcXVlcnkgPSBfX3ByaXZhdGVHZXQodGhpcywgX3F1ZXJ5Q2FjaGUpLmJ1aWxkKHRoaXMsIGRlZmF1bHRlZE9wdGlvbnMpOwogICAgY29uc3QgY2FjaGVkRGF0YSA9IHF1ZXJ5LnN0YXRlLmRhdGE7CiAgICBpZiAoY2FjaGVkRGF0YSA9PT0gdm9pZCAwKSB7CiAgICAgIHJldHVybiB0aGlzLmZldGNoUXVlcnkob3B0aW9ucyk7CiAgICB9CiAgICBpZiAob3B0aW9ucy5yZXZhbGlkYXRlSWZTdGFsZSAmJiBxdWVyeS5pc1N0YWxlQnlUaW1lKHJlc29sdmVTdGFsZVRpbWUoZGVmYXVsdGVkT3B0aW9ucy5zdGFsZVRpbWUsIHF1ZXJ5KSkpIHsKICAgICAgdm9pZCB0aGlzLnByZWZldGNoUXVlcnkoZGVmYXVsdGVkT3B0aW9ucyk7CiAgICB9CiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNhY2hlZERhdGEpOwogIH0KICBnZXRRdWVyaWVzRGF0YShmaWx0ZXJzKSB7CiAgICByZXR1cm4gX19wcml2YXRlR2V0KHRoaXMsIF9xdWVyeUNhY2hlKS5maW5kQWxsKGZpbHRlcnMpLm1hcCgoeyBxdWVyeUtleSwgc3RhdGUgfSkgPT4gewogICAgICBjb25zdCBkYXRhID0gc3RhdGUuZGF0YTsKICAgICAgcmV0dXJuIFtxdWVyeUtleSwgZGF0YV07CiAgICB9KTsKICB9CiAgc2V0UXVlcnlEYXRhKHF1ZXJ5S2V5LCB1cGRhdGVyLCBvcHRpb25zKSB7CiAgICBjb25zdCBkZWZhdWx0ZWRPcHRpb25zID0gdGhpcy5kZWZhdWx0UXVlcnlPcHRpb25zKHsgcXVlcnlLZXkgfSk7CiAgICBjb25zdCBxdWVyeSA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfcXVlcnlDYWNoZSkuZ2V0KAogICAgICBkZWZhdWx0ZWRPcHRpb25zLnF1ZXJ5SGFzaAogICAgKTsKICAgIGNvbnN0IHByZXZEYXRhID0gcXVlcnkgPT0gbnVsbCA/IHZvaWQgMCA6IHF1ZXJ5LnN0YXRlLmRhdGE7CiAgICBjb25zdCBkYXRhID0gZnVuY3Rpb25hbFVwZGF0ZSh1cGRhdGVyLCBwcmV2RGF0YSk7CiAgICBpZiAoZGF0YSA9PT0gdm9pZCAwKSB7CiAgICAgIHJldHVybiB2b2lkIDA7CiAgICB9CiAgICByZXR1cm4gX19wcml2YXRlR2V0KHRoaXMsIF9xdWVyeUNhY2hlKS5idWlsZCh0aGlzLCBkZWZhdWx0ZWRPcHRpb25zKS5zZXREYXRhKGRhdGEsIHsgLi4ub3B0aW9ucywgbWFudWFsOiB0cnVlIH0pOwogIH0KICBzZXRRdWVyaWVzRGF0YShmaWx0ZXJzLCB1cGRhdGVyLCBvcHRpb25zKSB7CiAgICByZXR1cm4gbm90aWZ5TWFuYWdlci5iYXRjaCgKICAgICAgKCkgPT4gX19wcml2YXRlR2V0KHRoaXMsIF9xdWVyeUNhY2hlKS5maW5kQWxsKGZpbHRlcnMpLm1hcCgoeyBxdWVyeUtleSB9KSA9PiBbCiAgICAgICAgcXVlcnlLZXksCiAgICAgICAgdGhpcy5zZXRRdWVyeURhdGEocXVlcnlLZXksIHVwZGF0ZXIsIG9wdGlvbnMpCiAgICAgIF0pCiAgICApOwogIH0KICBnZXRRdWVyeVN0YXRlKHF1ZXJ5S2V5KSB7CiAgICB2YXIgX2ExMzsKICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLmRlZmF1bHRRdWVyeU9wdGlvbnMoeyBxdWVyeUtleSB9KTsKICAgIHJldHVybiAoX2ExMyA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfcXVlcnlDYWNoZSkuZ2V0KAogICAgICBvcHRpb25zLnF1ZXJ5SGFzaAogICAgKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMTMuc3RhdGU7CiAgfQogIHJlbW92ZVF1ZXJpZXMoZmlsdGVycykgewogICAgY29uc3QgcXVlcnlDYWNoZSA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfcXVlcnlDYWNoZSk7CiAgICBub3RpZnlNYW5hZ2VyLmJhdGNoKCgpID0+IHsKICAgICAgcXVlcnlDYWNoZS5maW5kQWxsKGZpbHRlcnMpLmZvckVhY2goKHF1ZXJ5KSA9PiB7CiAgICAgICAgcXVlcnlDYWNoZS5yZW1vdmUocXVlcnkpOwogICAgICB9KTsKICAgIH0pOwogIH0KICByZXNldFF1ZXJpZXMoZmlsdGVycywgb3B0aW9ucykgewogICAgY29uc3QgcXVlcnlDYWNoZSA9IF9fcHJpdmF0ZUdldCh0aGlzLCBfcXVlcnlDYWNoZSk7CiAgICByZXR1cm4gbm90aWZ5TWFuYWdlci5iYXRjaCgoKSA9PiB7CiAgICAgIHF1ZXJ5Q2FjaGUuZmluZEFsbChmaWx0ZXJzKS5mb3JFYWNoKChxdWVyeSkgPT4gewogICAgICAgIHF1ZXJ5LnJlc2V0KCk7CiAgICAgIH0pOwogICAgICByZXR1cm4gdGhpcy5yZWZldGNoUXVlcmllcygKICAgICAgICB7CiAgICAgICAgICB0eXBlOiAiYWN0aXZlIiwKICAgICAgICAgIC4uLmZpbHRlcnMKICAgICAgICB9LAogICAgICAgIG9wdGlvbnMKICAgICAgKTsKICAgIH0pOwogIH0KICBjYW5jZWxRdWVyaWVzKGZpbHRlcnMsIGNhbmNlbE9wdGlvbnMgPSB7fSkgewogICAgY29uc3QgZGVmYXVsdGVkQ2FuY2VsT3B0aW9ucyA9IHsgcmV2ZXJ0OiB0cnVlLCAuLi5jYW5jZWxPcHRpb25zIH07CiAgICBjb25zdCBwcm9taXNlcyA9IG5vdGlmeU1hbmFnZXIuYmF0Y2goCiAgICAgICgpID0+IF9fcHJpdmF0ZUdldCh0aGlzLCBfcXVlcnlDYWNoZSkuZmluZEFsbChmaWx0ZXJzKS5tYXAoKHF1ZXJ5KSA9PiBxdWVyeS5jYW5jZWwoZGVmYXVsdGVkQ2FuY2VsT3B0aW9ucykpCiAgICApOwogICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKG5vb3ApLmNhdGNoKG5vb3ApOwogIH0KICBpbnZhbGlkYXRlUXVlcmllcyhmaWx0ZXJzLCBvcHRpb25zID0ge30pIHsKICAgIHJldHVybiBub3RpZnlNYW5hZ2VyLmJhdGNoKCgpID0+IHsKICAgICAgX19wcml2YXRlR2V0KHRoaXMsIF9xdWVyeUNhY2hlKS5maW5kQWxsKGZpbHRlcnMpLmZvckVhY2goKHF1ZXJ5KSA9PiB7CiAgICAgICAgcXVlcnkuaW52YWxpZGF0ZSgpOwogICAgICB9KTsKICAgICAgaWYgKChmaWx0ZXJzID09IG51bGwgPyB2b2lkIDAgOiBmaWx0ZXJzLnJlZmV0Y2hUeXBlKSA9PT0gIm5vbmUiKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLnJlZmV0Y2hRdWVyaWVzKAogICAgICAgIHsKICAgICAgICAgIC4uLmZpbHRlcnMsCiAgICAgICAgICB0eXBlOiAoZmlsdGVycyA9PSBudWxsID8gdm9pZCAwIDogZmlsdGVycy5yZWZldGNoVHlwZSkgPz8gKGZpbHRlcnMgPT0gbnVsbCA/IHZvaWQgMCA6IGZpbHRlcnMudHlwZSkgPz8gImFjdGl2ZSIKICAgICAgICB9LAogICAgICAgIG9wdGlvbnMKICAgICAgKTsKICAgIH0pOwogIH0KICByZWZldGNoUXVlcmllcyhmaWx0ZXJzLCBvcHRpb25zID0ge30pIHsKICAgIGNvbnN0IGZldGNoT3B0aW9ucyA9IHsKICAgICAgLi4ub3B0aW9ucywKICAgICAgY2FuY2VsUmVmZXRjaDogb3B0aW9ucy5jYW5jZWxSZWZldGNoID8/IHRydWUKICAgIH07CiAgICBjb25zdCBwcm9taXNlcyA9IG5vdGlmeU1hbmFnZXIuYmF0Y2goCiAgICAgICgpID0+IF9fcHJpdmF0ZUdldCh0aGlzLCBfcXVlcnlDYWNoZSkuZmluZEFsbChmaWx0ZXJzKS5maWx0ZXIoKHF1ZXJ5KSA9PiAhcXVlcnkuaXNEaXNhYmxlZCgpICYmICFxdWVyeS5pc1N0YXRpYygpKS5tYXAoKHF1ZXJ5KSA9PiB7CiAgICAgICAgbGV0IHByb21pc2UgPSBxdWVyeS5mZXRjaCh2b2lkIDAsIGZldGNoT3B0aW9ucyk7CiAgICAgICAgaWYgKCFmZXRjaE9wdGlvbnMudGhyb3dPbkVycm9yKSB7CiAgICAgICAgICBwcm9taXNlID0gcHJvbWlzZS5jYXRjaChub29wKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHF1ZXJ5LnN0YXRlLmZldGNoU3RhdHVzID09PSAicGF1c2VkIiA/IFByb21pc2UucmVzb2x2ZSgpIDogcHJvbWlzZTsKICAgICAgfSkKICAgICk7CiAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4obm9vcCk7CiAgfQogIGZldGNoUXVlcnkob3B0aW9ucykgewogICAgY29uc3QgZGVmYXVsdGVkT3B0aW9ucyA9IHRoaXMuZGVmYXVsdFF1ZXJ5T3B0aW9ucyhvcHRpb25zKTsKICAgIGlmIChkZWZhdWx0ZWRPcHRpb25zLnJldHJ5ID09PSB2b2lkIDApIHsKICAgICAgZGVmYXVsdGVkT3B0aW9ucy5yZXRyeSA9IGZhbHNlOwogICAgfQogICAgY29uc3QgcXVlcnkgPSBfX3ByaXZhdGVHZXQodGhpcywgX3F1ZXJ5Q2FjaGUpLmJ1aWxkKHRoaXMsIGRlZmF1bHRlZE9wdGlvbnMpOwogICAgcmV0dXJuIHF1ZXJ5LmlzU3RhbGVCeVRpbWUoCiAgICAgIHJlc29sdmVTdGFsZVRpbWUoZGVmYXVsdGVkT3B0aW9ucy5zdGFsZVRpbWUsIHF1ZXJ5KQogICAgKSA/IHF1ZXJ5LmZldGNoKGRlZmF1bHRlZE9wdGlvbnMpIDogUHJvbWlzZS5yZXNvbHZlKHF1ZXJ5LnN0YXRlLmRhdGEpOwogIH0KICBwcmVmZXRjaFF1ZXJ5KG9wdGlvbnMpIHsKICAgIHJldHVybiB0aGlzLmZldGNoUXVlcnkob3B0aW9ucykudGhlbihub29wKS5jYXRjaChub29wKTsKICB9CiAgZmV0Y2hJbmZpbml0ZVF1ZXJ5KG9wdGlvbnMpIHsKICAgIG9wdGlvbnMuYmVoYXZpb3IgPSBpbmZpbml0ZVF1ZXJ5QmVoYXZpb3Iob3B0aW9ucy5wYWdlcyk7CiAgICByZXR1cm4gdGhpcy5mZXRjaFF1ZXJ5KG9wdGlvbnMpOwogIH0KICBwcmVmZXRjaEluZmluaXRlUXVlcnkob3B0aW9ucykgewogICAgcmV0dXJuIHRoaXMuZmV0Y2hJbmZpbml0ZVF1ZXJ5KG9wdGlvbnMpLnRoZW4obm9vcCkuY2F0Y2gobm9vcCk7CiAgfQogIGVuc3VyZUluZmluaXRlUXVlcnlEYXRhKG9wdGlvbnMpIHsKICAgIG9wdGlvbnMuYmVoYXZpb3IgPSBpbmZpbml0ZVF1ZXJ5QmVoYXZpb3Iob3B0aW9ucy5wYWdlcyk7CiAgICByZXR1cm4gdGhpcy5lbnN1cmVRdWVyeURhdGEob3B0aW9ucyk7CiAgfQogIHJlc3VtZVBhdXNlZE11dGF0aW9ucygpIHsKICAgIGlmIChvbmxpbmVNYW5hZ2VyLmlzT25saW5lKCkpIHsKICAgICAgcmV0dXJuIF9fcHJpdmF0ZUdldCh0aGlzLCBfbXV0YXRpb25DYWNoZTIpLnJlc3VtZVBhdXNlZE11dGF0aW9ucygpOwogICAgfQogICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogIH0KICBnZXRRdWVyeUNhY2hlKCkgewogICAgcmV0dXJuIF9fcHJpdmF0ZUdldCh0aGlzLCBfcXVlcnlDYWNoZSk7CiAgfQogIGdldE11dGF0aW9uQ2FjaGUoKSB7CiAgICByZXR1cm4gX19wcml2YXRlR2V0KHRoaXMsIF9tdXRhdGlvbkNhY2hlMik7CiAgfQogIGdldERlZmF1bHRPcHRpb25zKCkgewogICAgcmV0dXJuIF9fcHJpdmF0ZUdldCh0aGlzLCBfZGVmYXVsdE9wdGlvbnMyKTsKICB9CiAgc2V0RGVmYXVsdE9wdGlvbnMob3B0aW9ucykgewogICAgX19wcml2YXRlU2V0KHRoaXMsIF9kZWZhdWx0T3B0aW9uczIsIG9wdGlvbnMpOwogIH0KICBzZXRRdWVyeURlZmF1bHRzKHF1ZXJ5S2V5LCBvcHRpb25zKSB7CiAgICBfX3ByaXZhdGVHZXQodGhpcywgX3F1ZXJ5RGVmYXVsdHMpLnNldChoYXNoS2V5KHF1ZXJ5S2V5KSwgewogICAgICBxdWVyeUtleSwKICAgICAgZGVmYXVsdE9wdGlvbnM6IG9wdGlvbnMKICAgIH0pOwogIH0KICBnZXRRdWVyeURlZmF1bHRzKHF1ZXJ5S2V5KSB7CiAgICBjb25zdCBkZWZhdWx0cyA9IFsuLi5fX3ByaXZhdGVHZXQodGhpcywgX3F1ZXJ5RGVmYXVsdHMpLnZhbHVlcygpXTsKICAgIGNvbnN0IHJlc3VsdCA9IHt9OwogICAgZGVmYXVsdHMuZm9yRWFjaCgocXVlcnlEZWZhdWx0KSA9PiB7CiAgICAgIGlmIChwYXJ0aWFsTWF0Y2hLZXkocXVlcnlLZXksIHF1ZXJ5RGVmYXVsdC5xdWVyeUtleSkpIHsKICAgICAgICBPYmplY3QuYXNzaWduKHJlc3VsdCwgcXVlcnlEZWZhdWx0LmRlZmF1bHRPcHRpb25zKTsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gcmVzdWx0OwogIH0KICBzZXRNdXRhdGlvbkRlZmF1bHRzKG11dGF0aW9uS2V5LCBvcHRpb25zKSB7CiAgICBfX3ByaXZhdGVHZXQodGhpcywgX211dGF0aW9uRGVmYXVsdHMpLnNldChoYXNoS2V5KG11dGF0aW9uS2V5KSwgewogICAgICBtdXRhdGlvbktleSwKICAgICAgZGVmYXVsdE9wdGlvbnM6IG9wdGlvbnMKICAgIH0pOwogIH0KICBnZXRNdXRhdGlvbkRlZmF1bHRzKG11dGF0aW9uS2V5KSB7CiAgICBjb25zdCBkZWZhdWx0cyA9IFsuLi5fX3ByaXZhdGVHZXQodGhpcywgX211dGF0aW9uRGVmYXVsdHMpLnZhbHVlcygpXTsKICAgIGNvbnN0IHJlc3VsdCA9IHt9OwogICAgZGVmYXVsdHMuZm9yRWFjaCgocXVlcnlEZWZhdWx0KSA9PiB7CiAgICAgIGlmIChwYXJ0aWFsTWF0Y2hLZXkobXV0YXRpb25LZXksIHF1ZXJ5RGVmYXVsdC5tdXRhdGlvbktleSkpIHsKICAgICAgICBPYmplY3QuYXNzaWduKHJlc3VsdCwgcXVlcnlEZWZhdWx0LmRlZmF1bHRPcHRpb25zKTsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gcmVzdWx0OwogIH0KICBkZWZhdWx0UXVlcnlPcHRpb25zKG9wdGlvbnMpIHsKICAgIGlmIChvcHRpb25zLl9kZWZhdWx0ZWQpIHsKICAgICAgcmV0dXJuIG9wdGlvbnM7CiAgICB9CiAgICBjb25zdCBkZWZhdWx0ZWRPcHRpb25zID0gewogICAgICAuLi5fX3ByaXZhdGVHZXQodGhpcywgX2RlZmF1bHRPcHRpb25zMikucXVlcmllcywKICAgICAgLi4udGhpcy5nZXRRdWVyeURlZmF1bHRzKG9wdGlvbnMucXVlcnlLZXkpLAogICAgICAuLi5vcHRpb25zLAogICAgICBfZGVmYXVsdGVkOiB0cnVlCiAgICB9OwogICAgaWYgKCFkZWZhdWx0ZWRPcHRpb25zLnF1ZXJ5SGFzaCkgewogICAgICBkZWZhdWx0ZWRPcHRpb25zLnF1ZXJ5SGFzaCA9IGhhc2hRdWVyeUtleUJ5T3B0aW9ucygKICAgICAgICBkZWZhdWx0ZWRPcHRpb25zLnF1ZXJ5S2V5LAogICAgICAgIGRlZmF1bHRlZE9wdGlvbnMKICAgICAgKTsKICAgIH0KICAgIGlmIChkZWZhdWx0ZWRPcHRpb25zLnJlZmV0Y2hPblJlY29ubmVjdCA9PT0gdm9pZCAwKSB7CiAgICAgIGRlZmF1bHRlZE9wdGlvbnMucmVmZXRjaE9uUmVjb25uZWN0ID0gZGVmYXVsdGVkT3B0aW9ucy5uZXR3b3JrTW9kZSAhPT0gImFsd2F5cyI7CiAgICB9CiAgICBpZiAoZGVmYXVsdGVkT3B0aW9ucy50aHJvd09uRXJyb3IgPT09IHZvaWQgMCkgewogICAgICBkZWZhdWx0ZWRPcHRpb25zLnRocm93T25FcnJvciA9ICEhZGVmYXVsdGVkT3B0aW9ucy5zdXNwZW5zZTsKICAgIH0KICAgIGlmICghZGVmYXVsdGVkT3B0aW9ucy5uZXR3b3JrTW9kZSAmJiBkZWZhdWx0ZWRPcHRpb25zLnBlcnNpc3RlcikgewogICAgICBkZWZhdWx0ZWRPcHRpb25zLm5ldHdvcmtNb2RlID0gIm9mZmxpbmVGaXJzdCI7CiAgICB9CiAgICBpZiAoZGVmYXVsdGVkT3B0aW9ucy5xdWVyeUZuID09PSBza2lwVG9rZW4pIHsKICAgICAgZGVmYXVsdGVkT3B0aW9ucy5lbmFibGVkID0gZmFsc2U7CiAgICB9CiAgICByZXR1cm4gZGVmYXVsdGVkT3B0aW9uczsKICB9CiAgZGVmYXVsdE11dGF0aW9uT3B0aW9ucyhvcHRpb25zKSB7CiAgICBpZiAob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5fZGVmYXVsdGVkKSB7CiAgICAgIHJldHVybiBvcHRpb25zOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgLi4uX19wcml2YXRlR2V0KHRoaXMsIF9kZWZhdWx0T3B0aW9uczIpLm11dGF0aW9ucywKICAgICAgLi4uKG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMubXV0YXRpb25LZXkpICYmIHRoaXMuZ2V0TXV0YXRpb25EZWZhdWx0cyhvcHRpb25zLm11dGF0aW9uS2V5KSwKICAgICAgLi4ub3B0aW9ucywKICAgICAgX2RlZmF1bHRlZDogdHJ1ZQogICAgfTsKICB9CiAgY2xlYXIoKSB7CiAgICBfX3ByaXZhdGVHZXQodGhpcywgX3F1ZXJ5Q2FjaGUpLmNsZWFyKCk7CiAgICBfX3ByaXZhdGVHZXQodGhpcywgX211dGF0aW9uQ2FjaGUyKS5jbGVhcigpOwogIH0KfSwgX3F1ZXJ5Q2FjaGUgPSBuZXcgV2Vha01hcCgpLCBfbXV0YXRpb25DYWNoZTIgPSBuZXcgV2Vha01hcCgpLCBfZGVmYXVsdE9wdGlvbnMyID0gbmV3IFdlYWtNYXAoKSwgX3F1ZXJ5RGVmYXVsdHMgPSBuZXcgV2Vha01hcCgpLCBfbXV0YXRpb25EZWZhdWx0cyA9IG5ldyBXZWFrTWFwKCksIF9tb3VudENvdW50ID0gbmV3IFdlYWtNYXAoKSwgX3Vuc3Vic2NyaWJlRm9jdXMgPSBuZXcgV2Vha01hcCgpLCBfdW5zdWJzY3JpYmVPbmxpbmUgPSBuZXcgV2Vha01hcCgpLCBfYTEyKTsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9AdGFuc3RhY2svcXVlcnktY29yZS9idWlsZC9tb2Rlcm4vc3RyZWFtZWRRdWVyeS5qcwpmdW5jdGlvbiBzdHJlYW1lZFF1ZXJ5KHsKICBzdHJlYW1GbiwKICByZWZldGNoTW9kZSA9ICJyZXNldCIsCiAgcmVkdWNlciA9IChpdGVtcywgY2h1bmspID0+IGFkZFRvRW5kKGl0ZW1zLCBjaHVuayksCiAgaW5pdGlhbFZhbHVlID0gW10KfSkgewogIHJldHVybiBhc3luYyAoY29udGV4dCkgPT4gewogICAgY29uc3QgcXVlcnkgPSBjb250ZXh0LmNsaWVudC5nZXRRdWVyeUNhY2hlKCkuZmluZCh7IHF1ZXJ5S2V5OiBjb250ZXh0LnF1ZXJ5S2V5LCBleGFjdDogdHJ1ZSB9KTsKICAgIGNvbnN0IGlzUmVmZXRjaCA9ICEhcXVlcnkgJiYgcXVlcnkuc3RhdGUuZGF0YSAhPT0gdm9pZCAwOwogICAgaWYgKGlzUmVmZXRjaCAmJiByZWZldGNoTW9kZSA9PT0gInJlc2V0IikgewogICAgICBxdWVyeS5zZXRTdGF0ZSh7CiAgICAgICAgc3RhdHVzOiAicGVuZGluZyIsCiAgICAgICAgZGF0YTogdm9pZCAwLAogICAgICAgIGVycm9yOiBudWxsLAogICAgICAgIGZldGNoU3RhdHVzOiAiZmV0Y2hpbmciCiAgICAgIH0pOwogICAgfQogICAgbGV0IHJlc3VsdCA9IGluaXRpYWxWYWx1ZTsKICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IHN0cmVhbUZuKGNvbnRleHQpOwogICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBzdHJlYW0pIHsKICAgICAgaWYgKGNvbnRleHQuc2lnbmFsLmFib3J0ZWQpIHsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBpZiAoIWlzUmVmZXRjaCB8fCByZWZldGNoTW9kZSAhPT0gInJlcGxhY2UiKSB7CiAgICAgICAgY29udGV4dC5jbGllbnQuc2V0UXVlcnlEYXRhKAogICAgICAgICAgY29udGV4dC5xdWVyeUtleSwKICAgICAgICAgIChwcmV2KSA9PiByZWR1Y2VyKHByZXYgPT09IHZvaWQgMCA/IGluaXRpYWxWYWx1ZSA6IHByZXYsIGNodW5rKQogICAgICAgICk7CiAgICAgIH0KICAgICAgcmVzdWx0ID0gcmVkdWNlcihyZXN1bHQsIGNodW5rKTsKICAgIH0KICAgIGlmIChpc1JlZmV0Y2ggJiYgcmVmZXRjaE1vZGUgPT09ICJyZXBsYWNlIiAmJiAhY29udGV4dC5zaWduYWwuYWJvcnRlZCkgewogICAgICBjb250ZXh0LmNsaWVudC5zZXRRdWVyeURhdGEoY29udGV4dC5xdWVyeUtleSwgcmVzdWx0KTsKICAgIH0KICAgIHJldHVybiBjb250ZXh0LmNsaWVudC5nZXRRdWVyeURhdGEoY29udGV4dC5xdWVyeUtleSk7CiAgfTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0B0YW5zdGFjay9xdWVyeS1jb3JlL2J1aWxkL21vZGVybi90eXBlcy5qcwp2YXIgZGF0YVRhZ1N5bWJvbCA9IFN5bWJvbCgiZGF0YVRhZ1N5bWJvbCIpOwp2YXIgZGF0YVRhZ0Vycm9yU3ltYm9sID0gU3ltYm9sKCJkYXRhVGFnRXJyb3JTeW1ib2wiKTsKdmFyIHVuc2V0TWFya2VyID0gU3ltYm9sKCJ1bnNldE1hcmtlciIpOwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0B0YW5zdGFjay9yZWFjdC1xdWVyeS9idWlsZC9tb2Rlcm4vdXNlUXVlcmllcy5qcwp2YXIgUmVhY3Q1ID0gX190b0VTTShyZXF1aXJlX3JlYWN0KCksIDEpOwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0B0YW5zdGFjay9yZWFjdC1xdWVyeS9idWlsZC9tb2Rlcm4vUXVlcnlDbGllbnRQcm92aWRlci5qcwp2YXIgUmVhY3QgPSBfX3RvRVNNKHJlcXVpcmVfcmVhY3QoKSwgMSk7CnZhciBpbXBvcnRfanN4X3J1bnRpbWUgPSBfX3RvRVNNKHJlcXVpcmVfanN4X3J1bnRpbWUoKSwgMSk7CnZhciBRdWVyeUNsaWVudENvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0KAogIHZvaWQgMAopOwp2YXIgdXNlUXVlcnlDbGllbnQgPSAocXVlcnlDbGllbnQpID0+IHsKICBjb25zdCBjbGllbnQgPSBSZWFjdC51c2VDb250ZXh0KFF1ZXJ5Q2xpZW50Q29udGV4dCk7CiAgaWYgKHF1ZXJ5Q2xpZW50KSB7CiAgICByZXR1cm4gcXVlcnlDbGllbnQ7CiAgfQogIGlmICghY2xpZW50KSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoIk5vIFF1ZXJ5Q2xpZW50IHNldCwgdXNlIFF1ZXJ5Q2xpZW50UHJvdmlkZXIgdG8gc2V0IG9uZSIpOwogIH0KICByZXR1cm4gY2xpZW50Owp9Owp2YXIgUXVlcnlDbGllbnRQcm92aWRlciA9ICh7CiAgY2xpZW50LAogIGNoaWxkcmVuCn0pID0+IHsKICBSZWFjdC51c2VFZmZlY3QoKCkgPT4gewogICAgY2xpZW50Lm1vdW50KCk7CiAgICByZXR1cm4gKCkgPT4gewogICAgICBjbGllbnQudW5tb3VudCgpOwogICAgfTsKICB9LCBbY2xpZW50XSk7CiAgcmV0dXJuICgwLCBpbXBvcnRfanN4X3J1bnRpbWUuanN4KShRdWVyeUNsaWVudENvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IGNsaWVudCwgY2hpbGRyZW4gfSk7Cn07CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5L2J1aWxkL21vZGVybi9Jc1Jlc3RvcmluZ1Byb3ZpZGVyLmpzCnZhciBSZWFjdDIgPSBfX3RvRVNNKHJlcXVpcmVfcmVhY3QoKSwgMSk7CnZhciBJc1Jlc3RvcmluZ0NvbnRleHQgPSBSZWFjdDIuY3JlYXRlQ29udGV4dChmYWxzZSk7CnZhciB1c2VJc1Jlc3RvcmluZyA9ICgpID0+IFJlYWN0Mi51c2VDb250ZXh0KElzUmVzdG9yaW5nQ29udGV4dCk7CnZhciBJc1Jlc3RvcmluZ1Byb3ZpZGVyID0gSXNSZXN0b3JpbmdDb250ZXh0LlByb3ZpZGVyOwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0B0YW5zdGFjay9yZWFjdC1xdWVyeS9idWlsZC9tb2Rlcm4vUXVlcnlFcnJvclJlc2V0Qm91bmRhcnkuanMKdmFyIFJlYWN0MyA9IF9fdG9FU00ocmVxdWlyZV9yZWFjdCgpLCAxKTsKdmFyIGltcG9ydF9qc3hfcnVudGltZTIgPSBfX3RvRVNNKHJlcXVpcmVfanN4X3J1bnRpbWUoKSwgMSk7CmZ1bmN0aW9uIGNyZWF0ZVZhbHVlKCkgewogIGxldCBpc1Jlc2V0ID0gZmFsc2U7CiAgcmV0dXJuIHsKICAgIGNsZWFyUmVzZXQ6ICgpID0+IHsKICAgICAgaXNSZXNldCA9IGZhbHNlOwogICAgfSwKICAgIHJlc2V0OiAoKSA9PiB7CiAgICAgIGlzUmVzZXQgPSB0cnVlOwogICAgfSwKICAgIGlzUmVzZXQ6ICgpID0+IHsKICAgICAgcmV0dXJuIGlzUmVzZXQ7CiAgICB9CiAgfTsKfQp2YXIgUXVlcnlFcnJvclJlc2V0Qm91bmRhcnlDb250ZXh0ID0gUmVhY3QzLmNyZWF0ZUNvbnRleHQoY3JlYXRlVmFsdWUoKSk7CnZhciB1c2VRdWVyeUVycm9yUmVzZXRCb3VuZGFyeSA9ICgpID0+IFJlYWN0My51c2VDb250ZXh0KFF1ZXJ5RXJyb3JSZXNldEJvdW5kYXJ5Q29udGV4dCk7CnZhciBRdWVyeUVycm9yUmVzZXRCb3VuZGFyeSA9ICh7CiAgY2hpbGRyZW4KfSkgPT4gewogIGNvbnN0IFt2YWx1ZV0gPSBSZWFjdDMudXNlU3RhdGUoKCkgPT4gY3JlYXRlVmFsdWUoKSk7CiAgcmV0dXJuICgwLCBpbXBvcnRfanN4X3J1bnRpbWUyLmpzeCkoUXVlcnlFcnJvclJlc2V0Qm91bmRhcnlDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlLCBjaGlsZHJlbjogdHlwZW9mIGNoaWxkcmVuID09PSAiZnVuY3Rpb24iID8gY2hpbGRyZW4odmFsdWUpIDogY2hpbGRyZW4gfSk7Cn07CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5L2J1aWxkL21vZGVybi9lcnJvckJvdW5kYXJ5VXRpbHMuanMKdmFyIFJlYWN0NCA9IF9fdG9FU00ocmVxdWlyZV9yZWFjdCgpLCAxKTsKdmFyIGVuc3VyZVByZXZlbnRFcnJvckJvdW5kYXJ5UmV0cnkgPSAob3B0aW9ucywgZXJyb3JSZXNldEJvdW5kYXJ5KSA9PiB7CiAgaWYgKG9wdGlvbnMuc3VzcGVuc2UgfHwgb3B0aW9ucy50aHJvd09uRXJyb3IgfHwgb3B0aW9ucy5leHBlcmltZW50YWxfcHJlZmV0Y2hJblJlbmRlcikgewogICAgaWYgKCFlcnJvclJlc2V0Qm91bmRhcnkuaXNSZXNldCgpKSB7CiAgICAgIG9wdGlvbnMucmV0cnlPbk1vdW50ID0gZmFsc2U7CiAgICB9CiAgfQp9Owp2YXIgdXNlQ2xlYXJSZXNldEVycm9yQm91bmRhcnkgPSAoZXJyb3JSZXNldEJvdW5kYXJ5KSA9PiB7CiAgUmVhY3Q0LnVzZUVmZmVjdCgoKSA9PiB7CiAgICBlcnJvclJlc2V0Qm91bmRhcnkuY2xlYXJSZXNldCgpOwogIH0sIFtlcnJvclJlc2V0Qm91bmRhcnldKTsKfTsKdmFyIGdldEhhc0Vycm9yID0gKHsKICByZXN1bHQsCiAgZXJyb3JSZXNldEJvdW5kYXJ5LAogIHRocm93T25FcnJvciwKICBxdWVyeSwKICBzdXNwZW5zZQp9KSA9PiB7CiAgcmV0dXJuIHJlc3VsdC5pc0Vycm9yICYmICFlcnJvclJlc2V0Qm91bmRhcnkuaXNSZXNldCgpICYmICFyZXN1bHQuaXNGZXRjaGluZyAmJiBxdWVyeSAmJiAoc3VzcGVuc2UgJiYgcmVzdWx0LmRhdGEgPT09IHZvaWQgMCB8fCBzaG91bGRUaHJvd0Vycm9yKHRocm93T25FcnJvciwgW3Jlc3VsdC5lcnJvciwgcXVlcnldKSk7Cn07CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5L2J1aWxkL21vZGVybi9zdXNwZW5zZS5qcwp2YXIgZGVmYXVsdFRocm93T25FcnJvciA9IChfZXJyb3IsIHF1ZXJ5KSA9PiBxdWVyeS5zdGF0ZS5kYXRhID09PSB2b2lkIDA7CnZhciBlbnN1cmVTdXNwZW5zZVRpbWVycyA9IChkZWZhdWx0ZWRPcHRpb25zKSA9PiB7CiAgaWYgKGRlZmF1bHRlZE9wdGlvbnMuc3VzcGVuc2UpIHsKICAgIGNvbnN0IE1JTl9TVVNQRU5TRV9USU1FX01TID0gMWUzOwogICAgY29uc3QgY2xhbXAgPSAodmFsdWUpID0+IHZhbHVlID09PSAic3RhdGljIiA/IHZhbHVlIDogTWF0aC5tYXgodmFsdWUgPz8gTUlOX1NVU1BFTlNFX1RJTUVfTVMsIE1JTl9TVVNQRU5TRV9USU1FX01TKTsKICAgIGNvbnN0IG9yaWdpbmFsU3RhbGVUaW1lID0gZGVmYXVsdGVkT3B0aW9ucy5zdGFsZVRpbWU7CiAgICBkZWZhdWx0ZWRPcHRpb25zLnN0YWxlVGltZSA9IHR5cGVvZiBvcmlnaW5hbFN0YWxlVGltZSA9PT0gImZ1bmN0aW9uIiA/ICguLi5hcmdzKSA9PiBjbGFtcChvcmlnaW5hbFN0YWxlVGltZSguLi5hcmdzKSkgOiBjbGFtcChvcmlnaW5hbFN0YWxlVGltZSk7CiAgICBpZiAodHlwZW9mIGRlZmF1bHRlZE9wdGlvbnMuZ2NUaW1lID09PSAibnVtYmVyIikgewogICAgICBkZWZhdWx0ZWRPcHRpb25zLmdjVGltZSA9IE1hdGgubWF4KAogICAgICAgIGRlZmF1bHRlZE9wdGlvbnMuZ2NUaW1lLAogICAgICAgIE1JTl9TVVNQRU5TRV9USU1FX01TCiAgICAgICk7CiAgICB9CiAgfQp9Owp2YXIgd2lsbEZldGNoID0gKHJlc3VsdCwgaXNSZXN0b3JpbmcpID0+IHJlc3VsdC5pc0xvYWRpbmcgJiYgcmVzdWx0LmlzRmV0Y2hpbmcgJiYgIWlzUmVzdG9yaW5nOwp2YXIgc2hvdWxkU3VzcGVuZCA9IChkZWZhdWx0ZWRPcHRpb25zLCByZXN1bHQpID0+IChkZWZhdWx0ZWRPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBkZWZhdWx0ZWRPcHRpb25zLnN1c3BlbnNlKSAmJiByZXN1bHQuaXNQZW5kaW5nOwp2YXIgZmV0Y2hPcHRpbWlzdGljID0gKGRlZmF1bHRlZE9wdGlvbnMsIG9ic2VydmVyLCBlcnJvclJlc2V0Qm91bmRhcnkpID0+IG9ic2VydmVyLmZldGNoT3B0aW1pc3RpYyhkZWZhdWx0ZWRPcHRpb25zKS5jYXRjaCgoKSA9PiB7CiAgZXJyb3JSZXNldEJvdW5kYXJ5LmNsZWFyUmVzZXQoKTsKfSk7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5L2J1aWxkL21vZGVybi91c2VRdWVyaWVzLmpzCmZ1bmN0aW9uIHVzZVF1ZXJpZXMoewogIHF1ZXJpZXMsCiAgLi4ub3B0aW9ucwp9LCBxdWVyeUNsaWVudCkgewogIGNvbnN0IGNsaWVudCA9IHVzZVF1ZXJ5Q2xpZW50KHF1ZXJ5Q2xpZW50KTsKICBjb25zdCBpc1Jlc3RvcmluZyA9IHVzZUlzUmVzdG9yaW5nKCk7CiAgY29uc3QgZXJyb3JSZXNldEJvdW5kYXJ5ID0gdXNlUXVlcnlFcnJvclJlc2V0Qm91bmRhcnkoKTsKICBjb25zdCBkZWZhdWx0ZWRRdWVyaWVzID0gUmVhY3Q1LnVzZU1lbW8oCiAgICAoKSA9PiBxdWVyaWVzLm1hcCgob3B0cykgPT4gewogICAgICBjb25zdCBkZWZhdWx0ZWRPcHRpb25zID0gY2xpZW50LmRlZmF1bHRRdWVyeU9wdGlvbnMoCiAgICAgICAgb3B0cwogICAgICApOwogICAgICBkZWZhdWx0ZWRPcHRpb25zLl9vcHRpbWlzdGljUmVzdWx0cyA9IGlzUmVzdG9yaW5nID8gImlzUmVzdG9yaW5nIiA6ICJvcHRpbWlzdGljIjsKICAgICAgcmV0dXJuIGRlZmF1bHRlZE9wdGlvbnM7CiAgICB9KSwKICAgIFtxdWVyaWVzLCBjbGllbnQsIGlzUmVzdG9yaW5nXQogICk7CiAgZGVmYXVsdGVkUXVlcmllcy5mb3JFYWNoKChxdWVyeSkgPT4gewogICAgZW5zdXJlU3VzcGVuc2VUaW1lcnMocXVlcnkpOwogICAgZW5zdXJlUHJldmVudEVycm9yQm91bmRhcnlSZXRyeShxdWVyeSwgZXJyb3JSZXNldEJvdW5kYXJ5KTsKICB9KTsKICB1c2VDbGVhclJlc2V0RXJyb3JCb3VuZGFyeShlcnJvclJlc2V0Qm91bmRhcnkpOwogIGNvbnN0IFtvYnNlcnZlcl0gPSBSZWFjdDUudXNlU3RhdGUoCiAgICAoKSA9PiBuZXcgUXVlcmllc09ic2VydmVyKAogICAgICBjbGllbnQsCiAgICAgIGRlZmF1bHRlZFF1ZXJpZXMsCiAgICAgIG9wdGlvbnMKICAgICkKICApOwogIGNvbnN0IFtvcHRpbWlzdGljUmVzdWx0LCBnZXRDb21iaW5lZFJlc3VsdCwgdHJhY2tSZXN1bHRdID0gb2JzZXJ2ZXIuZ2V0T3B0aW1pc3RpY1Jlc3VsdCgKICAgIGRlZmF1bHRlZFF1ZXJpZXMsCiAgICBvcHRpb25zLmNvbWJpbmUKICApOwogIGNvbnN0IHNob3VsZFN1YnNjcmliZSA9ICFpc1Jlc3RvcmluZyAmJiBvcHRpb25zLnN1YnNjcmliZWQgIT09IGZhbHNlOwogIFJlYWN0NS51c2VTeW5jRXh0ZXJuYWxTdG9yZSgKICAgIFJlYWN0NS51c2VDYWxsYmFjaygKICAgICAgKG9uU3RvcmVDaGFuZ2UpID0+IHNob3VsZFN1YnNjcmliZSA/IG9ic2VydmVyLnN1YnNjcmliZShub3RpZnlNYW5hZ2VyLmJhdGNoQ2FsbHMob25TdG9yZUNoYW5nZSkpIDogbm9vcCwKICAgICAgW29ic2VydmVyLCBzaG91bGRTdWJzY3JpYmVdCiAgICApLAogICAgKCkgPT4gb2JzZXJ2ZXIuZ2V0Q3VycmVudFJlc3VsdCgpLAogICAgKCkgPT4gb2JzZXJ2ZXIuZ2V0Q3VycmVudFJlc3VsdCgpCiAgKTsKICBSZWFjdDUudXNlRWZmZWN0KCgpID0+IHsKICAgIG9ic2VydmVyLnNldFF1ZXJpZXMoCiAgICAgIGRlZmF1bHRlZFF1ZXJpZXMsCiAgICAgIG9wdGlvbnMKICAgICk7CiAgfSwgW2RlZmF1bHRlZFF1ZXJpZXMsIG9wdGlvbnMsIG9ic2VydmVyXSk7CiAgY29uc3Qgc2hvdWxkQXRMZWFzdE9uZVN1c3BlbmQgPSBvcHRpbWlzdGljUmVzdWx0LnNvbWUoCiAgICAocmVzdWx0LCBpbmRleCkgPT4gc2hvdWxkU3VzcGVuZChkZWZhdWx0ZWRRdWVyaWVzW2luZGV4XSwgcmVzdWx0KQogICk7CiAgY29uc3Qgc3VzcGVuc2VQcm9taXNlcyA9IHNob3VsZEF0TGVhc3RPbmVTdXNwZW5kID8gb3B0aW1pc3RpY1Jlc3VsdC5mbGF0TWFwKChyZXN1bHQsIGluZGV4KSA9PiB7CiAgICBjb25zdCBvcHRzID0gZGVmYXVsdGVkUXVlcmllc1tpbmRleF07CiAgICBpZiAob3B0cykgewogICAgICBjb25zdCBxdWVyeU9ic2VydmVyID0gbmV3IFF1ZXJ5T2JzZXJ2ZXIoY2xpZW50LCBvcHRzKTsKICAgICAgaWYgKHNob3VsZFN1c3BlbmQob3B0cywgcmVzdWx0KSkgewogICAgICAgIHJldHVybiBmZXRjaE9wdGltaXN0aWMob3B0cywgcXVlcnlPYnNlcnZlciwgZXJyb3JSZXNldEJvdW5kYXJ5KTsKICAgICAgfSBlbHNlIGlmICh3aWxsRmV0Y2gocmVzdWx0LCBpc1Jlc3RvcmluZykpIHsKICAgICAgICB2b2lkIGZldGNoT3B0aW1pc3RpYyhvcHRzLCBxdWVyeU9ic2VydmVyLCBlcnJvclJlc2V0Qm91bmRhcnkpOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gW107CiAgfSkgOiBbXTsKICBpZiAoc3VzcGVuc2VQcm9taXNlcy5sZW5ndGggPiAwKSB7CiAgICB0aHJvdyBQcm9taXNlLmFsbChzdXNwZW5zZVByb21pc2VzKTsKICB9CiAgY29uc3QgZmlyc3RTaW5nbGVSZXN1bHRXaGljaFNob3VsZFRocm93ID0gb3B0aW1pc3RpY1Jlc3VsdC5maW5kKAogICAgKHJlc3VsdCwgaW5kZXgpID0+IHsKICAgICAgY29uc3QgcXVlcnkgPSBkZWZhdWx0ZWRRdWVyaWVzW2luZGV4XTsKICAgICAgcmV0dXJuIHF1ZXJ5ICYmIGdldEhhc0Vycm9yKHsKICAgICAgICByZXN1bHQsCiAgICAgICAgZXJyb3JSZXNldEJvdW5kYXJ5LAogICAgICAgIHRocm93T25FcnJvcjogcXVlcnkudGhyb3dPbkVycm9yLAogICAgICAgIHF1ZXJ5OiBjbGllbnQuZ2V0UXVlcnlDYWNoZSgpLmdldChxdWVyeS5xdWVyeUhhc2gpLAogICAgICAgIHN1c3BlbnNlOiBxdWVyeS5zdXNwZW5zZQogICAgICB9KTsKICAgIH0KICApOwogIGlmIChmaXJzdFNpbmdsZVJlc3VsdFdoaWNoU2hvdWxkVGhyb3cgPT0gbnVsbCA/IHZvaWQgMCA6IGZpcnN0U2luZ2xlUmVzdWx0V2hpY2hTaG91bGRUaHJvdy5lcnJvcikgewogICAgdGhyb3cgZmlyc3RTaW5nbGVSZXN1bHRXaGljaFNob3VsZFRocm93LmVycm9yOwogIH0KICByZXR1cm4gZ2V0Q29tYmluZWRSZXN1bHQodHJhY2tSZXN1bHQoKSk7Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9AdGFuc3RhY2svcmVhY3QtcXVlcnkvYnVpbGQvbW9kZXJuL3VzZUJhc2VRdWVyeS5qcwp2YXIgUmVhY3Q2ID0gX190b0VTTShyZXF1aXJlX3JlYWN0KCksIDEpOwpmdW5jdGlvbiB1c2VCYXNlUXVlcnkob3B0aW9ucywgT2JzZXJ2ZXIsIHF1ZXJ5Q2xpZW50KSB7CiAgdmFyIF9hMTMsIF9iLCBfYywgX2QsIF9lOwogIGlmICh0cnVlKSB7CiAgICBpZiAodHlwZW9mIG9wdGlvbnMgIT09ICJvYmplY3QiIHx8IEFycmF5LmlzQXJyYXkob3B0aW9ucykpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgICdCYWQgYXJndW1lbnQgdHlwZS4gU3RhcnRpbmcgd2l0aCB2NSwgb25seSB0aGUgIk9iamVjdCIgZm9ybSBpcyBhbGxvd2VkIHdoZW4gY2FsbGluZyBxdWVyeSByZWxhdGVkIGZ1bmN0aW9ucy4gUGxlYXNlIHVzZSB0aGUgZXJyb3Igc3RhY2sgdG8gZmluZCB0aGUgY3VscHJpdCBjYWxsLiBNb3JlIGluZm8gaGVyZTogaHR0cHM6Ly90YW5zdGFjay5jb20vcXVlcnkvbGF0ZXN0L2RvY3MvcmVhY3QvZ3VpZGVzL21pZ3JhdGluZy10by12NSNzdXBwb3J0cy1hLXNpbmdsZS1zaWduYXR1cmUtb25lLW9iamVjdCcKICAgICAgKTsKICAgIH0KICB9CiAgY29uc3QgaXNSZXN0b3JpbmcgPSB1c2VJc1Jlc3RvcmluZygpOwogIGNvbnN0IGVycm9yUmVzZXRCb3VuZGFyeSA9IHVzZVF1ZXJ5RXJyb3JSZXNldEJvdW5kYXJ5KCk7CiAgY29uc3QgY2xpZW50ID0gdXNlUXVlcnlDbGllbnQocXVlcnlDbGllbnQpOwogIGNvbnN0IGRlZmF1bHRlZE9wdGlvbnMgPSBjbGllbnQuZGVmYXVsdFF1ZXJ5T3B0aW9ucyhvcHRpb25zKTsKICAoX2IgPSAoX2ExMyA9IGNsaWVudC5nZXREZWZhdWx0T3B0aW9ucygpLnF1ZXJpZXMpID09IG51bGwgPyB2b2lkIDAgOiBfYTEzLl9leHBlcmltZW50YWxfYmVmb3JlUXVlcnkpID09IG51bGwgPyB2b2lkIDAgOiBfYi5jYWxsKAogICAgX2ExMywKICAgIGRlZmF1bHRlZE9wdGlvbnMKICApOwogIGlmICh0cnVlKSB7CiAgICBpZiAoIWRlZmF1bHRlZE9wdGlvbnMucXVlcnlGbikgewogICAgICBjb25zb2xlLmVycm9yKAogICAgICAgIGBbJHtkZWZhdWx0ZWRPcHRpb25zLnF1ZXJ5SGFzaH1dOiBObyBxdWVyeUZuIHdhcyBwYXNzZWQgYXMgYW4gb3B0aW9uLCBhbmQgbm8gZGVmYXVsdCBxdWVyeUZuIHdhcyBmb3VuZC4gVGhlIHF1ZXJ5Rm4gcGFyYW1ldGVyIGlzIG9ubHkgb3B0aW9uYWwgd2hlbiB1c2luZyBhIGRlZmF1bHQgcXVlcnlGbi4gTW9yZSBpbmZvIGhlcmU6IGh0dHBzOi8vdGFuc3RhY2suY29tL3F1ZXJ5L2xhdGVzdC9kb2NzL2ZyYW1ld29yay9yZWFjdC9ndWlkZXMvZGVmYXVsdC1xdWVyeS1mdW5jdGlvbmAKICAgICAgKTsKICAgIH0KICB9CiAgZGVmYXVsdGVkT3B0aW9ucy5fb3B0aW1pc3RpY1Jlc3VsdHMgPSBpc1Jlc3RvcmluZyA/ICJpc1Jlc3RvcmluZyIgOiAib3B0aW1pc3RpYyI7CiAgZW5zdXJlU3VzcGVuc2VUaW1lcnMoZGVmYXVsdGVkT3B0aW9ucyk7CiAgZW5zdXJlUHJldmVudEVycm9yQm91bmRhcnlSZXRyeShkZWZhdWx0ZWRPcHRpb25zLCBlcnJvclJlc2V0Qm91bmRhcnkpOwogIHVzZUNsZWFyUmVzZXRFcnJvckJvdW5kYXJ5KGVycm9yUmVzZXRCb3VuZGFyeSk7CiAgY29uc3QgaXNOZXdDYWNoZUVudHJ5ID0gIWNsaWVudC5nZXRRdWVyeUNhY2hlKCkuZ2V0KGRlZmF1bHRlZE9wdGlvbnMucXVlcnlIYXNoKTsKICBjb25zdCBbb2JzZXJ2ZXJdID0gUmVhY3Q2LnVzZVN0YXRlKAogICAgKCkgPT4gbmV3IE9ic2VydmVyKAogICAgICBjbGllbnQsCiAgICAgIGRlZmF1bHRlZE9wdGlvbnMKICAgICkKICApOwogIGNvbnN0IHJlc3VsdCA9IG9ic2VydmVyLmdldE9wdGltaXN0aWNSZXN1bHQoZGVmYXVsdGVkT3B0aW9ucyk7CiAgY29uc3Qgc2hvdWxkU3Vic2NyaWJlID0gIWlzUmVzdG9yaW5nICYmIG9wdGlvbnMuc3Vic2NyaWJlZCAhPT0gZmFsc2U7CiAgUmVhY3Q2LnVzZVN5bmNFeHRlcm5hbFN0b3JlKAogICAgUmVhY3Q2LnVzZUNhbGxiYWNrKAogICAgICAob25TdG9yZUNoYW5nZSkgPT4gewogICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gc2hvdWxkU3Vic2NyaWJlID8gb2JzZXJ2ZXIuc3Vic2NyaWJlKG5vdGlmeU1hbmFnZXIuYmF0Y2hDYWxscyhvblN0b3JlQ2hhbmdlKSkgOiBub29wOwogICAgICAgIG9ic2VydmVyLnVwZGF0ZVJlc3VsdCgpOwogICAgICAgIHJldHVybiB1bnN1YnNjcmliZTsKICAgICAgfSwKICAgICAgW29ic2VydmVyLCBzaG91bGRTdWJzY3JpYmVdCiAgICApLAogICAgKCkgPT4gb2JzZXJ2ZXIuZ2V0Q3VycmVudFJlc3VsdCgpLAogICAgKCkgPT4gb2JzZXJ2ZXIuZ2V0Q3VycmVudFJlc3VsdCgpCiAgKTsKICBSZWFjdDYudXNlRWZmZWN0KCgpID0+IHsKICAgIG9ic2VydmVyLnNldE9wdGlvbnMoZGVmYXVsdGVkT3B0aW9ucyk7CiAgfSwgW2RlZmF1bHRlZE9wdGlvbnMsIG9ic2VydmVyXSk7CiAgaWYgKHNob3VsZFN1c3BlbmQoZGVmYXVsdGVkT3B0aW9ucywgcmVzdWx0KSkgewogICAgdGhyb3cgZmV0Y2hPcHRpbWlzdGljKGRlZmF1bHRlZE9wdGlvbnMsIG9ic2VydmVyLCBlcnJvclJlc2V0Qm91bmRhcnkpOwogIH0KICBpZiAoZ2V0SGFzRXJyb3IoewogICAgcmVzdWx0LAogICAgZXJyb3JSZXNldEJvdW5kYXJ5LAogICAgdGhyb3dPbkVycm9yOiBkZWZhdWx0ZWRPcHRpb25zLnRocm93T25FcnJvciwKICAgIHF1ZXJ5OiBjbGllbnQuZ2V0UXVlcnlDYWNoZSgpLmdldChkZWZhdWx0ZWRPcHRpb25zLnF1ZXJ5SGFzaCksCiAgICBzdXNwZW5zZTogZGVmYXVsdGVkT3B0aW9ucy5zdXNwZW5zZQogIH0pKSB7CiAgICB0aHJvdyByZXN1bHQuZXJyb3I7CiAgfQogIDsKICAoX2QgPSAoX2MgPSBjbGllbnQuZ2V0RGVmYXVsdE9wdGlvbnMoKS5xdWVyaWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2MuX2V4cGVyaW1lbnRhbF9hZnRlclF1ZXJ5KSA9PSBudWxsID8gdm9pZCAwIDogX2QuY2FsbCgKICAgIF9jLAogICAgZGVmYXVsdGVkT3B0aW9ucywKICAgIHJlc3VsdAogICk7CiAgaWYgKGRlZmF1bHRlZE9wdGlvbnMuZXhwZXJpbWVudGFsX3ByZWZldGNoSW5SZW5kZXIgJiYgIWlzU2VydmVyICYmIHdpbGxGZXRjaChyZXN1bHQsIGlzUmVzdG9yaW5nKSkgewogICAgY29uc3QgcHJvbWlzZSA9IGlzTmV3Q2FjaGVFbnRyeSA/ICgKICAgICAgLy8gRmV0Y2ggaW1tZWRpYXRlbHkgb24gcmVuZGVyIGluIG9yZGVyIHRvIGVuc3VyZSBgLnByb21pc2VgIGlzIHJlc29sdmVkIGV2ZW4gaWYgdGhlIGNvbXBvbmVudCBpcyB1bm1vdW50ZWQKICAgICAgZmV0Y2hPcHRpbWlzdGljKGRlZmF1bHRlZE9wdGlvbnMsIG9ic2VydmVyLCBlcnJvclJlc2V0Qm91bmRhcnkpCiAgICApIDogKAogICAgICAvLyBzdWJzY3JpYmUgdG8gdGhlICJjYWNoZSBwcm9taXNlIiBzbyB0aGF0IHdlIGNhbiBmaW5hbGl6ZSB0aGUgY3VycmVudFRoZW5hYmxlIG9uY2UgZGF0YSBjb21lcyBpbgogICAgICAoX2UgPSBjbGllbnQuZ2V0UXVlcnlDYWNoZSgpLmdldChkZWZhdWx0ZWRPcHRpb25zLnF1ZXJ5SGFzaCkpID09IG51bGwgPyB2b2lkIDAgOiBfZS5wcm9taXNlCiAgICApOwogICAgcHJvbWlzZSA9PSBudWxsID8gdm9pZCAwIDogcHJvbWlzZS5jYXRjaChub29wKS5maW5hbGx5KCgpID0+IHsKICAgICAgb2JzZXJ2ZXIudXBkYXRlUmVzdWx0KCk7CiAgICB9KTsKICB9CiAgcmV0dXJuICFkZWZhdWx0ZWRPcHRpb25zLm5vdGlmeU9uQ2hhbmdlUHJvcHMgPyBvYnNlcnZlci50cmFja1Jlc3VsdChyZXN1bHQpIDogcmVzdWx0Owp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5L2J1aWxkL21vZGVybi91c2VRdWVyeS5qcwpmdW5jdGlvbiB1c2VRdWVyeShvcHRpb25zLCBxdWVyeUNsaWVudCkgewogIHJldHVybiB1c2VCYXNlUXVlcnkob3B0aW9ucywgUXVlcnlPYnNlcnZlciwgcXVlcnlDbGllbnQpOwp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5L2J1aWxkL21vZGVybi91c2VTdXNwZW5zZVF1ZXJ5LmpzCmZ1bmN0aW9uIHVzZVN1c3BlbnNlUXVlcnkob3B0aW9ucywgcXVlcnlDbGllbnQpIHsKICBpZiAodHJ1ZSkgewogICAgaWYgKG9wdGlvbnMucXVlcnlGbiA9PT0gc2tpcFRva2VuKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoInNraXBUb2tlbiBpcyBub3QgYWxsb3dlZCBmb3IgdXNlU3VzcGVuc2VRdWVyeSIpOwogICAgfQogIH0KICByZXR1cm4gdXNlQmFzZVF1ZXJ5KAogICAgewogICAgICAuLi5vcHRpb25zLAogICAgICBlbmFibGVkOiB0cnVlLAogICAgICBzdXNwZW5zZTogdHJ1ZSwKICAgICAgdGhyb3dPbkVycm9yOiBkZWZhdWx0VGhyb3dPbkVycm9yLAogICAgICBwbGFjZWhvbGRlckRhdGE6IHZvaWQgMAogICAgfSwKICAgIFF1ZXJ5T2JzZXJ2ZXIsCiAgICBxdWVyeUNsaWVudAogICk7Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9AdGFuc3RhY2svcmVhY3QtcXVlcnkvYnVpbGQvbW9kZXJuL3VzZVN1c3BlbnNlSW5maW5pdGVRdWVyeS5qcwpmdW5jdGlvbiB1c2VTdXNwZW5zZUluZmluaXRlUXVlcnkob3B0aW9ucywgcXVlcnlDbGllbnQpIHsKICBpZiAodHJ1ZSkgewogICAgaWYgKG9wdGlvbnMucXVlcnlGbiA9PT0gc2tpcFRva2VuKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoInNraXBUb2tlbiBpcyBub3QgYWxsb3dlZCBmb3IgdXNlU3VzcGVuc2VJbmZpbml0ZVF1ZXJ5Iik7CiAgICB9CiAgfQogIHJldHVybiB1c2VCYXNlUXVlcnkoCiAgICB7CiAgICAgIC4uLm9wdGlvbnMsCiAgICAgIGVuYWJsZWQ6IHRydWUsCiAgICAgIHN1c3BlbnNlOiB0cnVlLAogICAgICB0aHJvd09uRXJyb3I6IGRlZmF1bHRUaHJvd09uRXJyb3IKICAgIH0sCiAgICBJbmZpbml0ZVF1ZXJ5T2JzZXJ2ZXIsCiAgICBxdWVyeUNsaWVudAogICk7Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9AdGFuc3RhY2svcmVhY3QtcXVlcnkvYnVpbGQvbW9kZXJuL3VzZVN1c3BlbnNlUXVlcmllcy5qcwpmdW5jdGlvbiB1c2VTdXNwZW5zZVF1ZXJpZXMob3B0aW9ucywgcXVlcnlDbGllbnQpIHsKICByZXR1cm4gdXNlUXVlcmllcygKICAgIHsKICAgICAgLi4ub3B0aW9ucywKICAgICAgcXVlcmllczogb3B0aW9ucy5xdWVyaWVzLm1hcCgocXVlcnkpID0+IHsKICAgICAgICBpZiAodHJ1ZSkgewogICAgICAgICAgaWYgKHF1ZXJ5LnF1ZXJ5Rm4gPT09IHNraXBUb2tlbikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCJza2lwVG9rZW4gaXMgbm90IGFsbG93ZWQgZm9yIHVzZVN1c3BlbnNlUXVlcmllcyIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4ucXVlcnksCiAgICAgICAgICBzdXNwZW5zZTogdHJ1ZSwKICAgICAgICAgIHRocm93T25FcnJvcjogZGVmYXVsdFRocm93T25FcnJvciwKICAgICAgICAgIGVuYWJsZWQ6IHRydWUsCiAgICAgICAgICBwbGFjZWhvbGRlckRhdGE6IHZvaWQgMAogICAgICAgIH07CiAgICAgIH0pCiAgICB9LAogICAgcXVlcnlDbGllbnQKICApOwp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5L2J1aWxkL21vZGVybi91c2VQcmVmZXRjaFF1ZXJ5LmpzCmZ1bmN0aW9uIHVzZVByZWZldGNoUXVlcnkob3B0aW9ucywgcXVlcnlDbGllbnQpIHsKICBjb25zdCBjbGllbnQgPSB1c2VRdWVyeUNsaWVudChxdWVyeUNsaWVudCk7CiAgaWYgKCFjbGllbnQuZ2V0UXVlcnlTdGF0ZShvcHRpb25zLnF1ZXJ5S2V5KSkgewogICAgY2xpZW50LnByZWZldGNoUXVlcnkob3B0aW9ucyk7CiAgfQp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5L2J1aWxkL21vZGVybi91c2VQcmVmZXRjaEluZmluaXRlUXVlcnkuanMKZnVuY3Rpb24gdXNlUHJlZmV0Y2hJbmZpbml0ZVF1ZXJ5KG9wdGlvbnMsIHF1ZXJ5Q2xpZW50KSB7CiAgY29uc3QgY2xpZW50ID0gdXNlUXVlcnlDbGllbnQocXVlcnlDbGllbnQpOwogIGlmICghY2xpZW50LmdldFF1ZXJ5U3RhdGUob3B0aW9ucy5xdWVyeUtleSkpIHsKICAgIGNsaWVudC5wcmVmZXRjaEluZmluaXRlUXVlcnkob3B0aW9ucyk7CiAgfQp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5L2J1aWxkL21vZGVybi9xdWVyeU9wdGlvbnMuanMKZnVuY3Rpb24gcXVlcnlPcHRpb25zKG9wdGlvbnMpIHsKICByZXR1cm4gb3B0aW9uczsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0B0YW5zdGFjay9yZWFjdC1xdWVyeS9idWlsZC9tb2Rlcm4vaW5maW5pdGVRdWVyeU9wdGlvbnMuanMKZnVuY3Rpb24gaW5maW5pdGVRdWVyeU9wdGlvbnMob3B0aW9ucykgewogIHJldHVybiBvcHRpb25zOwp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5L2J1aWxkL21vZGVybi9IeWRyYXRpb25Cb3VuZGFyeS5qcwp2YXIgUmVhY3Q3ID0gX190b0VTTShyZXF1aXJlX3JlYWN0KCksIDEpOwp2YXIgSHlkcmF0aW9uQm91bmRhcnkgPSAoewogIGNoaWxkcmVuLAogIG9wdGlvbnMgPSB7fSwKICBzdGF0ZSwKICBxdWVyeUNsaWVudAp9KSA9PiB7CiAgY29uc3QgY2xpZW50ID0gdXNlUXVlcnlDbGllbnQocXVlcnlDbGllbnQpOwogIGNvbnN0IG9wdGlvbnNSZWYgPSBSZWFjdDcudXNlUmVmKG9wdGlvbnMpOwogIG9wdGlvbnNSZWYuY3VycmVudCA9IG9wdGlvbnM7CiAgY29uc3QgaHlkcmF0aW9uUXVldWUgPSBSZWFjdDcudXNlTWVtbygoKSA9PiB7CiAgICBpZiAoc3RhdGUpIHsKICAgICAgaWYgKHR5cGVvZiBzdGF0ZSAhPT0gIm9iamVjdCIpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3QgcXVlcnlDYWNoZSA9IGNsaWVudC5nZXRRdWVyeUNhY2hlKCk7CiAgICAgIGNvbnN0IHF1ZXJpZXMgPSBzdGF0ZS5xdWVyaWVzIHx8IFtdOwogICAgICBjb25zdCBuZXdRdWVyaWVzID0gW107CiAgICAgIGNvbnN0IGV4aXN0aW5nUXVlcmllcyA9IFtdOwogICAgICBmb3IgKGNvbnN0IGRlaHlkcmF0ZWRRdWVyeSBvZiBxdWVyaWVzKSB7CiAgICAgICAgY29uc3QgZXhpc3RpbmdRdWVyeSA9IHF1ZXJ5Q2FjaGUuZ2V0KGRlaHlkcmF0ZWRRdWVyeS5xdWVyeUhhc2gpOwogICAgICAgIGlmICghZXhpc3RpbmdRdWVyeSkgewogICAgICAgICAgbmV3UXVlcmllcy5wdXNoKGRlaHlkcmF0ZWRRdWVyeSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IGh5ZHJhdGlvbklzTmV3ZXIgPSBkZWh5ZHJhdGVkUXVlcnkuc3RhdGUuZGF0YVVwZGF0ZWRBdCA+IGV4aXN0aW5nUXVlcnkuc3RhdGUuZGF0YVVwZGF0ZWRBdCB8fCBkZWh5ZHJhdGVkUXVlcnkucHJvbWlzZSAmJiBleGlzdGluZ1F1ZXJ5LnN0YXRlLnN0YXR1cyAhPT0gInBlbmRpbmciICYmIGV4aXN0aW5nUXVlcnkuc3RhdGUuZmV0Y2hTdGF0dXMgIT09ICJmZXRjaGluZyIgJiYgZGVoeWRyYXRlZFF1ZXJ5LmRlaHlkcmF0ZWRBdCAhPT0gdm9pZCAwICYmIGRlaHlkcmF0ZWRRdWVyeS5kZWh5ZHJhdGVkQXQgPiBleGlzdGluZ1F1ZXJ5LnN0YXRlLmRhdGFVcGRhdGVkQXQ7CiAgICAgICAgICBpZiAoaHlkcmF0aW9uSXNOZXdlcikgewogICAgICAgICAgICBleGlzdGluZ1F1ZXJpZXMucHVzaChkZWh5ZHJhdGVkUXVlcnkpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAobmV3UXVlcmllcy5sZW5ndGggPiAwKSB7CiAgICAgICAgaHlkcmF0ZShjbGllbnQsIHsgcXVlcmllczogbmV3UXVlcmllcyB9LCBvcHRpb25zUmVmLmN1cnJlbnQpOwogICAgICB9CiAgICAgIGlmIChleGlzdGluZ1F1ZXJpZXMubGVuZ3RoID4gMCkgewogICAgICAgIHJldHVybiBleGlzdGluZ1F1ZXJpZXM7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB2b2lkIDA7CiAgfSwgW2NsaWVudCwgc3RhdGVdKTsKICBSZWFjdDcudXNlRWZmZWN0KCgpID0+IHsKICAgIGlmIChoeWRyYXRpb25RdWV1ZSkgewogICAgICBoeWRyYXRlKGNsaWVudCwgeyBxdWVyaWVzOiBoeWRyYXRpb25RdWV1ZSB9LCBvcHRpb25zUmVmLmN1cnJlbnQpOwogICAgfQogIH0sIFtjbGllbnQsIGh5ZHJhdGlvblF1ZXVlXSk7CiAgcmV0dXJuIGNoaWxkcmVuOwp9OwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0B0YW5zdGFjay9yZWFjdC1xdWVyeS9idWlsZC9tb2Rlcm4vdXNlSXNGZXRjaGluZy5qcwp2YXIgUmVhY3Q4ID0gX190b0VTTShyZXF1aXJlX3JlYWN0KCksIDEpOwpmdW5jdGlvbiB1c2VJc0ZldGNoaW5nKGZpbHRlcnMsIHF1ZXJ5Q2xpZW50KSB7CiAgY29uc3QgY2xpZW50ID0gdXNlUXVlcnlDbGllbnQocXVlcnlDbGllbnQpOwogIGNvbnN0IHF1ZXJ5Q2FjaGUgPSBjbGllbnQuZ2V0UXVlcnlDYWNoZSgpOwogIHJldHVybiBSZWFjdDgudXNlU3luY0V4dGVybmFsU3RvcmUoCiAgICBSZWFjdDgudXNlQ2FsbGJhY2soCiAgICAgIChvblN0b3JlQ2hhbmdlKSA9PiBxdWVyeUNhY2hlLnN1YnNjcmliZShub3RpZnlNYW5hZ2VyLmJhdGNoQ2FsbHMob25TdG9yZUNoYW5nZSkpLAogICAgICBbcXVlcnlDYWNoZV0KICAgICksCiAgICAoKSA9PiBjbGllbnQuaXNGZXRjaGluZyhmaWx0ZXJzKSwKICAgICgpID0+IGNsaWVudC5pc0ZldGNoaW5nKGZpbHRlcnMpCiAgKTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0B0YW5zdGFjay9yZWFjdC1xdWVyeS9idWlsZC9tb2Rlcm4vdXNlTXV0YXRpb25TdGF0ZS5qcwp2YXIgUmVhY3Q5ID0gX190b0VTTShyZXF1aXJlX3JlYWN0KCksIDEpOwpmdW5jdGlvbiB1c2VJc011dGF0aW5nKGZpbHRlcnMsIHF1ZXJ5Q2xpZW50KSB7CiAgY29uc3QgY2xpZW50ID0gdXNlUXVlcnlDbGllbnQocXVlcnlDbGllbnQpOwogIHJldHVybiB1c2VNdXRhdGlvblN0YXRlKAogICAgeyBmaWx0ZXJzOiB7IC4uLmZpbHRlcnMsIHN0YXR1czogInBlbmRpbmciIH0gfSwKICAgIGNsaWVudAogICkubGVuZ3RoOwp9CmZ1bmN0aW9uIGdldFJlc3VsdChtdXRhdGlvbkNhY2hlLCBvcHRpb25zKSB7CiAgcmV0dXJuIG11dGF0aW9uQ2FjaGUuZmluZEFsbChvcHRpb25zLmZpbHRlcnMpLm1hcCgKICAgIChtdXRhdGlvbikgPT4gb3B0aW9ucy5zZWxlY3QgPyBvcHRpb25zLnNlbGVjdChtdXRhdGlvbikgOiBtdXRhdGlvbi5zdGF0ZQogICk7Cn0KZnVuY3Rpb24gdXNlTXV0YXRpb25TdGF0ZShvcHRpb25zID0ge30sIHF1ZXJ5Q2xpZW50KSB7CiAgY29uc3QgbXV0YXRpb25DYWNoZSA9IHVzZVF1ZXJ5Q2xpZW50KHF1ZXJ5Q2xpZW50KS5nZXRNdXRhdGlvbkNhY2hlKCk7CiAgY29uc3Qgb3B0aW9uc1JlZiA9IFJlYWN0OS51c2VSZWYob3B0aW9ucyk7CiAgY29uc3QgcmVzdWx0ID0gUmVhY3Q5LnVzZVJlZihudWxsKTsKICBpZiAoIXJlc3VsdC5jdXJyZW50KSB7CiAgICByZXN1bHQuY3VycmVudCA9IGdldFJlc3VsdChtdXRhdGlvbkNhY2hlLCBvcHRpb25zKTsKICB9CiAgUmVhY3Q5LnVzZUVmZmVjdCgoKSA9PiB7CiAgICBvcHRpb25zUmVmLmN1cnJlbnQgPSBvcHRpb25zOwogIH0pOwogIHJldHVybiBSZWFjdDkudXNlU3luY0V4dGVybmFsU3RvcmUoCiAgICBSZWFjdDkudXNlQ2FsbGJhY2soCiAgICAgIChvblN0b3JlQ2hhbmdlKSA9PiBtdXRhdGlvbkNhY2hlLnN1YnNjcmliZSgoKSA9PiB7CiAgICAgICAgY29uc3QgbmV4dFJlc3VsdCA9IHJlcGxhY2VFcXVhbERlZXAoCiAgICAgICAgICByZXN1bHQuY3VycmVudCwKICAgICAgICAgIGdldFJlc3VsdChtdXRhdGlvbkNhY2hlLCBvcHRpb25zUmVmLmN1cnJlbnQpCiAgICAgICAgKTsKICAgICAgICBpZiAocmVzdWx0LmN1cnJlbnQgIT09IG5leHRSZXN1bHQpIHsKICAgICAgICAgIHJlc3VsdC5jdXJyZW50ID0gbmV4dFJlc3VsdDsKICAgICAgICAgIG5vdGlmeU1hbmFnZXIuc2NoZWR1bGUob25TdG9yZUNoYW5nZSk7CiAgICAgICAgfQogICAgICB9KSwKICAgICAgW211dGF0aW9uQ2FjaGVdCiAgICApLAogICAgKCkgPT4gcmVzdWx0LmN1cnJlbnQsCiAgICAoKSA9PiByZXN1bHQuY3VycmVudAogICk7Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9AdGFuc3RhY2svcmVhY3QtcXVlcnkvYnVpbGQvbW9kZXJuL3VzZU11dGF0aW9uLmpzCnZhciBSZWFjdDEwID0gX190b0VTTShyZXF1aXJlX3JlYWN0KCksIDEpOwpmdW5jdGlvbiB1c2VNdXRhdGlvbihvcHRpb25zLCBxdWVyeUNsaWVudCkgewogIGNvbnN0IGNsaWVudCA9IHVzZVF1ZXJ5Q2xpZW50KHF1ZXJ5Q2xpZW50KTsKICBjb25zdCBbb2JzZXJ2ZXJdID0gUmVhY3QxMC51c2VTdGF0ZSgKICAgICgpID0+IG5ldyBNdXRhdGlvbk9ic2VydmVyKAogICAgICBjbGllbnQsCiAgICAgIG9wdGlvbnMKICAgICkKICApOwogIFJlYWN0MTAudXNlRWZmZWN0KCgpID0+IHsKICAgIG9ic2VydmVyLnNldE9wdGlvbnMob3B0aW9ucyk7CiAgfSwgW29ic2VydmVyLCBvcHRpb25zXSk7CiAgY29uc3QgcmVzdWx0ID0gUmVhY3QxMC51c2VTeW5jRXh0ZXJuYWxTdG9yZSgKICAgIFJlYWN0MTAudXNlQ2FsbGJhY2soCiAgICAgIChvblN0b3JlQ2hhbmdlKSA9PiBvYnNlcnZlci5zdWJzY3JpYmUobm90aWZ5TWFuYWdlci5iYXRjaENhbGxzKG9uU3RvcmVDaGFuZ2UpKSwKICAgICAgW29ic2VydmVyXQogICAgKSwKICAgICgpID0+IG9ic2VydmVyLmdldEN1cnJlbnRSZXN1bHQoKSwKICAgICgpID0+IG9ic2VydmVyLmdldEN1cnJlbnRSZXN1bHQoKQogICk7CiAgY29uc3QgbXV0YXRlID0gUmVhY3QxMC51c2VDYWxsYmFjaygKICAgICh2YXJpYWJsZXMsIG11dGF0ZU9wdGlvbnMpID0+IHsKICAgICAgb2JzZXJ2ZXIubXV0YXRlKHZhcmlhYmxlcywgbXV0YXRlT3B0aW9ucykuY2F0Y2gobm9vcCk7CiAgICB9LAogICAgW29ic2VydmVyXQogICk7CiAgaWYgKHJlc3VsdC5lcnJvciAmJiBzaG91bGRUaHJvd0Vycm9yKG9ic2VydmVyLm9wdGlvbnMudGhyb3dPbkVycm9yLCBbcmVzdWx0LmVycm9yXSkpIHsKICAgIHRocm93IHJlc3VsdC5lcnJvcjsKICB9CiAgcmV0dXJuIHsgLi4ucmVzdWx0LCBtdXRhdGUsIG11dGF0ZUFzeW5jOiByZXN1bHQubXV0YXRlIH07Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9AdGFuc3RhY2svcmVhY3QtcXVlcnkvYnVpbGQvbW9kZXJuL211dGF0aW9uT3B0aW9ucy5qcwpmdW5jdGlvbiBtdXRhdGlvbk9wdGlvbnMob3B0aW9ucykgewogIHJldHVybiBvcHRpb25zOwp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5L2J1aWxkL21vZGVybi91c2VJbmZpbml0ZVF1ZXJ5LmpzCmZ1bmN0aW9uIHVzZUluZmluaXRlUXVlcnkob3B0aW9ucywgcXVlcnlDbGllbnQpIHsKICByZXR1cm4gdXNlQmFzZVF1ZXJ5KAogICAgb3B0aW9ucywKICAgIEluZmluaXRlUXVlcnlPYnNlcnZlciwKICAgIHF1ZXJ5Q2xpZW50CiAgKTsKfQpleHBvcnQgewogIENhbmNlbGxlZEVycm9yLAogIEh5ZHJhdGlvbkJvdW5kYXJ5LAogIEluZmluaXRlUXVlcnlPYnNlcnZlciwKICBJc1Jlc3RvcmluZ1Byb3ZpZGVyLAogIE11dGF0aW9uLAogIE11dGF0aW9uQ2FjaGUsCiAgTXV0YXRpb25PYnNlcnZlciwKICBRdWVyaWVzT2JzZXJ2ZXIsCiAgUXVlcnksCiAgUXVlcnlDYWNoZSwKICBRdWVyeUNsaWVudCwKICBRdWVyeUNsaWVudENvbnRleHQsCiAgUXVlcnlDbGllbnRQcm92aWRlciwKICBRdWVyeUVycm9yUmVzZXRCb3VuZGFyeSwKICBRdWVyeU9ic2VydmVyLAogIGRhdGFUYWdFcnJvclN5bWJvbCwKICBkYXRhVGFnU3ltYm9sLAogIGRlZmF1bHRTY2hlZHVsZXIsCiAgZGVmYXVsdFNob3VsZERlaHlkcmF0ZU11dGF0aW9uLAogIGRlZmF1bHRTaG91bGREZWh5ZHJhdGVRdWVyeSwKICBkZWh5ZHJhdGUsCiAgc3RyZWFtZWRRdWVyeSBhcyBleHBlcmltZW50YWxfc3RyZWFtZWRRdWVyeSwKICBmb2N1c01hbmFnZXIsCiAgaGFzaEtleSwKICBoeWRyYXRlLAogIGluZmluaXRlUXVlcnlPcHRpb25zLAogIGlzQ2FuY2VsbGVkRXJyb3IsCiAgaXNTZXJ2ZXIsCiAga2VlcFByZXZpb3VzRGF0YSwKICBtYXRjaE11dGF0aW9uLAogIG1hdGNoUXVlcnksCiAgbXV0YXRpb25PcHRpb25zLAogIG5vb3AsCiAgbm90aWZ5TWFuYWdlciwKICBvbmxpbmVNYW5hZ2VyLAogIHBhcnRpYWxNYXRjaEtleSwKICBxdWVyeU9wdGlvbnMsCiAgcmVwbGFjZUVxdWFsRGVlcCwKICBzaG91bGRUaHJvd0Vycm9yLAogIHNraXBUb2tlbiwKICB0aW1lb3V0TWFuYWdlciwKICB1bnNldE1hcmtlciwKICB1c2VJbmZpbml0ZVF1ZXJ5LAogIHVzZUlzRmV0Y2hpbmcsCiAgdXNlSXNNdXRhdGluZywKICB1c2VJc1Jlc3RvcmluZywKICB1c2VNdXRhdGlvbiwKICB1c2VNdXRhdGlvblN0YXRlLAogIHVzZVByZWZldGNoSW5maW5pdGVRdWVyeSwKICB1c2VQcmVmZXRjaFF1ZXJ5LAogIHVzZVF1ZXJpZXMsCiAgdXNlUXVlcnksCiAgdXNlUXVlcnlDbGllbnQsCiAgdXNlUXVlcnlFcnJvclJlc2V0Qm91bmRhcnksCiAgdXNlU3VzcGVuc2VJbmZpbml0ZVF1ZXJ5LAogIHVzZVN1c3BlbnNlUXVlcmllcywKICB1c2VTdXNwZW5zZVF1ZXJ5Cn07Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPUB0YW5zdGFja19yZWFjdC1xdWVyeS5qcy5tYXAK",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 127326
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 27,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.369Z",
        "time": 26,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/App.tsx",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/main.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"f67-A1Im+nlkmsXAqHK3DrpPSkgB9zM\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "6706"
            }
          ],
          "content": {
            "size": 6706,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsgY3JlYXRlSG90Q29udGV4dCBhcyBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQgfSBmcm9tICIvQHZpdGUvY2xpZW50IjtpbXBvcnQubWV0YS5ob3QgPSBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQoIi9zcmMvQXBwLnRzeCIpO2ltcG9ydCBfX3ZpdGVfX2Nqc0ltcG9ydDBfcmVhY3RfanN4RGV2UnVudGltZSBmcm9tICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvcmVhY3RfanN4LWRldi1ydW50aW1lLmpzP3Y9MGJiNjlkNzMiOyBjb25zdCBqc3hERVYgPSBfX3ZpdGVfX2Nqc0ltcG9ydDBfcmVhY3RfanN4RGV2UnVudGltZVsianN4REVWIl07CmltcG9ydCAqIGFzIFJlZnJlc2hSdW50aW1lIGZyb20gIi9AcmVhY3QtcmVmcmVzaCI7CmNvbnN0IGluV2ViV29ya2VyID0gdHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlICE9PSAidW5kZWZpbmVkIiAmJiBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGU7CmxldCBwcmV2UmVmcmVzaFJlZzsKbGV0IHByZXZSZWZyZXNoU2lnOwppZiAoaW1wb3J0Lm1ldGEuaG90ICYmICFpbldlYldvcmtlcikgewogIGlmICghd2luZG93LiRSZWZyZXNoUmVnJCkgewogICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAiQHZpdGVqcy9wbHVnaW4tcmVhY3QgY2FuJ3QgZGV0ZWN0IHByZWFtYmxlLiBTb21ldGhpbmcgaXMgd3JvbmcuIgogICAgKTsKICB9CiAgcHJldlJlZnJlc2hSZWcgPSB3aW5kb3cuJFJlZnJlc2hSZWckOwogIHByZXZSZWZyZXNoU2lnID0gd2luZG93LiRSZWZyZXNoU2lnJDsKICB3aW5kb3cuJFJlZnJlc2hSZWckID0gUmVmcmVzaFJ1bnRpbWUuZ2V0UmVmcmVzaFJlZygiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9BcHAudHN4Iik7CiAgd2luZG93LiRSZWZyZXNoU2lnJCA9IFJlZnJlc2hSdW50aW1lLmNyZWF0ZVNpZ25hdHVyZUZ1bmN0aW9uRm9yVHJhbnNmb3JtOwp9CnZhciBfcyA9ICRSZWZyZXNoU2lnJCgpOwppbXBvcnQgeyB1c2VEZWxldGVNb3ZpZSwgdXNlTW92aWVzIH0gZnJvbSAiL3NyYy9ob29rcy91c2UtbW92aWVzLnRzIjsKaW1wb3J0IHsgU0FwcENvbnRhaW5lciB9IGZyb20gIi9zcmMvc3R5bGVzL3N0eWxlZC1jb21wb25lbnRzLnRzIjsKaW1wb3J0IExvYWRpbmdNZXNzYWdlIGZyb20gIi9zcmMvY29tcG9uZW50cy9sb2FkaW5nLW1lc3NhZ2UudHN4IjsKaW1wb3J0IF9fdml0ZV9fY2pzSW1wb3J0Nl9yZWFjdCBmcm9tICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvcmVhY3QuanM/dj0wYmI2OWQ3MyI7IGNvbnN0IFN1c3BlbnNlID0gX192aXRlX19janNJbXBvcnQ2X3JlYWN0WyJTdXNwZW5zZSJdOwppbXBvcnQgeyBFcnJvckJvdW5kYXJ5IH0gZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL3JlYWN0LWVycm9yLWJvdW5kYXJ5LmpzP3Y9MGJiNjlkNzMiOwppbXBvcnQgRXJyb3JDb21wb25lbnQgZnJvbSAiL3NyYy9jb21wb25lbnRzL2Vycm9yLWNvbXBvbmVudC50c3giOwppbXBvcnQgQXBwUm91dGVzIGZyb20gIi9zcmMvQXBwLXJvdXRlcy50c3giOwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBcHAoKSB7CiAgX3MoKTsKICBjb25zdCB7IGRhdGEgfSA9IHVzZU1vdmllcygpOwogIGNvbnN0IG1vdmllc0RhdGEgPSBkYXRhLmRhdGE7CiAgY29uc3QgZGVsZXRlTW92aWVNdXRhdGlvbiA9IHVzZURlbGV0ZU1vdmllKCk7CiAgY29uc3QgaGFuZGxlRGVsZXRlTW92aWUgPSBkZWxldGVNb3ZpZU11dGF0aW9uLm11dGF0ZTsKICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeERFVihFcnJvckJvdW5kYXJ5LCB7IGZhbGxiYWNrOiAvKiBAX19QVVJFX18gKi8ganN4REVWKEVycm9yQ29tcG9uZW50LCB7fSwgdm9pZCAwLCBmYWxzZSwgewogICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL0FwcC50c3giLAogICAgbGluZU51bWJlcjogMzcsCiAgICBjb2x1bW5OdW1iZXI6IDMwCiAgfSwgdGhpcyksIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4REVWKFN1c3BlbnNlLCB7IGZhbGxiYWNrOiAvKiBAX19QVVJFX18gKi8ganN4REVWKExvYWRpbmdNZXNzYWdlLCB7fSwgdm9pZCAwLCBmYWxzZSwgewogICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL0FwcC50c3giLAogICAgbGluZU51bWJlcjogMzgsCiAgICBjb2x1bW5OdW1iZXI6IDI3CiAgfSwgdGhpcyksIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4REVWKFNBcHBDb250YWluZXIsIHsgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoQXBwUm91dGVzLCB7IG1vdmllczogbW92aWVzRGF0YSwgb25EZWxldGU6IGhhbmRsZURlbGV0ZU1vdmllIH0sIHZvaWQgMCwgZmFsc2UsIHsKICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9BcHAudHN4IiwKICAgIGxpbmVOdW1iZXI6IDQwLAogICAgY29sdW1uTnVtYmVyOiAxMQogIH0sIHRoaXMpIH0sIHZvaWQgMCwgZmFsc2UsIHsKICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9BcHAudHN4IiwKICAgIGxpbmVOdW1iZXI6IDM5LAogICAgY29sdW1uTnVtYmVyOiA5CiAgfSwgdGhpcykgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL0FwcC50c3giLAogICAgbGluZU51bWJlcjogMzgsCiAgICBjb2x1bW5OdW1iZXI6IDcKICB9LCB0aGlzKSB9LCB2b2lkIDAsIGZhbHNlLCB7CiAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvQXBwLnRzeCIsCiAgICBsaW5lTnVtYmVyOiAzNywKICAgIGNvbHVtbk51bWJlcjogNQogIH0sIHRoaXMpOwp9Cl9zKEFwcCwgIjNSa2wwcnQyeHpTbVFvT2lvbkYzNjBaT2Fhaz0iLCBmYWxzZSwgZnVuY3Rpb24oKSB7CiAgcmV0dXJuIFt1c2VNb3ZpZXMsIHVzZURlbGV0ZU1vdmllXTsKfSk7Cl9jID0gQXBwOwp2YXIgX2M7CiRSZWZyZXNoUmVnJChfYywgIkFwcCIpOwppZiAoaW1wb3J0Lm1ldGEuaG90ICYmICFpbldlYldvcmtlcikgewogIHdpbmRvdy4kUmVmcmVzaFJlZyQgPSBwcmV2UmVmcmVzaFJlZzsKICB3aW5kb3cuJFJlZnJlc2hTaWckID0gcHJldlJlZnJlc2hTaWc7Cn0KaWYgKGltcG9ydC5tZXRhLmhvdCAmJiAhaW5XZWJXb3JrZXIpIHsKICBSZWZyZXNoUnVudGltZS5fX2htcl9pbXBvcnQoaW1wb3J0Lm1ldGEudXJsKS50aGVuKChjdXJyZW50RXhwb3J0cykgPT4gewogICAgUmVmcmVzaFJ1bnRpbWUucmVnaXN0ZXJFeHBvcnRzRm9yUmVhY3RSZWZyZXNoKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL0FwcC50c3giLCBjdXJyZW50RXhwb3J0cyk7CiAgICBpbXBvcnQubWV0YS5ob3QuYWNjZXB0KChuZXh0RXhwb3J0cykgPT4gewogICAgICBpZiAoIW5leHRFeHBvcnRzKSByZXR1cm47CiAgICAgIGNvbnN0IGludmFsaWRhdGVNZXNzYWdlID0gUmVmcmVzaFJ1bnRpbWUudmFsaWRhdGVSZWZyZXNoQm91bmRhcnlBbmRFbnF1ZXVlVXBkYXRlKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL0FwcC50c3giLCBjdXJyZW50RXhwb3J0cywgbmV4dEV4cG9ydHMpOwogICAgICBpZiAoaW52YWxpZGF0ZU1lc3NhZ2UpIGltcG9ydC5tZXRhLmhvdC5pbnZhbGlkYXRlKGludmFsaWRhdGVNZXNzYWdlKTsKICAgIH0pOwogIH0pOwp9CgovLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p0WVhCd2FXNW5jeUk2SWtGQmFVSTJRanM3T3pzN096czdPenM3T3pzN096czdRVUZxUWpkQ0xGTkJRVk5CTEdkQ1FVRm5Ra01zYVVKQlFXbENPMEZCUXpGRExGTkJRVk5ETEhGQ1FVRnhRanRCUVVNNVFpeFBRVUZQUXl4dlFrRkJiMEk3UVVGRE0wSXNVMEZCVTBNc1owSkJRV2RDTzBGQlEzcENMRk5CUVZORExIRkNRVUZ4UWp0QlFVTTVRaXhQUVVGUFF5eHZRa0ZCYjBJN1FVRkRNMElzVDBGQlQwTXNaVUZCWlR0QlFVZDBRaXgzUWtGQmQwSkRMRTFCUVUwN1FVRkJRVU1zUzBGQlFUdEJRVU0xUWl4UlFVRk5MRVZCUVVWRExFdEJRVXNzU1VGQlNWUXNWVUZCVlR0QlFVTXpRaXhSUVVGTlZTeGhRVUZqUkN4TFFVRnpRMEU3UVVGRk1VUXNVVUZCVFVVc2MwSkJRWE5DV2l4bFFVRmxPMEZCUXpORExGRkJRVTFoTEc5Q1FVRnZRa1FzYjBKQlFXOUNSVHRCUVVVNVF5eFRRVU5GTEhWQ1FVRkRMR2xDUVVGakxGVkJRVlVzZFVKQlFVTXNiMEpCUVVRN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFTeFRRVUZsTEVkQlEzUkRMR2xEUVVGRExGbEJRVk1zVlVGQlZTeDFRa0ZCUXl4dlFrRkJSRHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTEZOQlFXVXNSMEZEYWtNc2FVTkJRVU1zYVVKQlEwTXNhVU5CUVVNc1lVRkJWU3hSUVVGUlNDeFpRVUZaTEZWQlFWVkZMSEZDUVVGNlF6dEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJMRk5CUVRKRUxFdEJSRGRFTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFc1UwRkZRU3hMUVVoR08wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRXNVMEZKUVN4TFFVeEdPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUVzVTBGTlFUdEJRVVZLTzBGQlFVTktMRWRCYUVKMVFrUXNTMEZCUnp0QlFVRkJMRlZCUTFKUUxGZEJSMWRFTEdOQlFXTTdRVUZCUVR0QlFVRkJaU3hMUVVwd1FsQTdRVUZCUnl4SlFVRkJUenRCUVVGQlF5eGhRVUZCUkN4SlFVRkJJaXdpYm1GdFpYTWlPbHNpZFhObFJHVnNaWFJsVFc5MmFXVWlMQ0oxYzJWTmIzWnBaWE1pTENKVFFYQndRMjl1ZEdGcGJtVnlJaXdpVEc5aFpHbHVaMDFsYzNOaFoyVWlMQ0pUZFhOd1pXNXpaU0lzSWtWeWNtOXlRbTkxYm1SaGNua2lMQ0pGY25KdmNrTnZiWEJ2Ym1WdWRDSXNJa0Z3Y0ZKdmRYUmxjeUlzSWtGd2NDSXNJbDl6SWl3aVpHRjBZU0lzSW0xdmRtbGxjMFJoZEdFaUxDSmtaV3hsZEdWTmIzWnBaVTExZEdGMGFXOXVJaXdpYUdGdVpHeGxSR1ZzWlhSbFRXOTJhV1VpTENKdGRYUmhkR1VpTENKZll5SXNJaVJTWldaeVpYTm9VbVZuSkNKZExDSnBaMjV2Y21WTWFYTjBJanBiWFN3aWMyOTFjbU5sY3lJNld5SkJjSEF1ZEhONElsMHNJbk52ZFhKalpYTkRiMjUwWlc1MElqcGJJbWx0Y0c5eWRDQjdJSFZ6WlVSbGJHVjBaVTF2ZG1sbExDQjFjMlZOYjNacFpYTWdmU0JtY205dElDZEFhRzl2YTNNdmRYTmxMVzF2ZG1sbGN5ZGNibWx0Y0c5eWRDQjdJRk5CY0hCRGIyNTBZV2x1WlhJZ2ZTQm1jbTl0SUNkQWMzUjViR1Z6TDNOMGVXeGxaQzFqYjIxd2IyNWxiblJ6SjF4dWFXMXdiM0owSUV4dllXUnBibWROWlhOellXZGxJR1p5YjIwZ0owQmpiMjF3YjI1bGJuUnpMMnh2WVdScGJtY3RiV1Z6YzJGblpTZGNibWx0Y0c5eWRDQjdJRk4xYzNCbGJuTmxJSDBnWm5KdmJTQW5jbVZoWTNRblhHNXBiWEJ2Y25RZ2V5QkZjbkp2Y2tKdmRXNWtZWEo1SUgwZ1puSnZiU0FuY21WaFkzUXRaWEp5YjNJdFltOTFibVJoY25rblhHNXBiWEJ2Y25RZ1JYSnliM0pEYjIxd2IyNWxiblFnWm5KdmJTQW5RR052YlhCdmJtVnVkSE12WlhKeWIzSXRZMjl0Y0c5dVpXNTBKMXh1YVcxd2IzSjBJRUZ3Y0ZKdmRYUmxjeUJtY205dElDY3VMMEZ3Y0MxeWIzVjBaWE1uWEc1cGJYQnZjblFnZEhsd1pTQjdJRTF2ZG1sbElIMGdabkp2YlNBblFITm9ZWEpsWkM5MGVYQmxjeTl0YjNacFpTMTBlWEJsY3lkY2JseHVaWGh3YjNKMElHUmxabUYxYkhRZ1puVnVZM1JwYjI0Z1FYQndLQ2tnZTF4dUlDQmpiMjV6ZENCN0lHUmhkR0VnZlNBOUlIVnpaVTF2ZG1sbGN5Z3BYRzRnSUdOdmJuTjBJRzF2ZG1sbGMwUmhkR0VnUFNBb1pHRjBZU0JoY3lCMWJtdHViM2R1SUdGeklIc2daR0YwWVRvZ1RXOTJhV1ZiWFNCOUtTNWtZWFJoWEc1Y2JpQWdZMjl1YzNRZ1pHVnNaWFJsVFc5MmFXVk5kWFJoZEdsdmJpQTlJSFZ6WlVSbGJHVjBaVTF2ZG1sbEtDbGNiaUFnWTI5dWMzUWdhR0Z1Wkd4bFJHVnNaWFJsVFc5MmFXVWdQU0JrWld4bGRHVk5iM1pwWlUxMWRHRjBhVzl1TG0xMWRHRjBaVnh1WEc0Z0lISmxkSFZ5YmlBb1hHNGdJQ0FnUEVWeWNtOXlRbTkxYm1SaGNua2dabUZzYkdKaFkyczllenhGY25KdmNrTnZiWEJ2Ym1WdWRDQXZQbjArWEc0Z0lDQWdJQ0E4VTNWemNHVnVjMlVnWm1Gc2JHSmhZMnM5ZXp4TWIyRmthVzVuVFdWemMyRm5aU0F2UG4wK1hHNGdJQ0FnSUNBZ0lEeFRRWEJ3UTI5dWRHRnBibVZ5UGx4dUlDQWdJQ0FnSUNBZ0lEeEJjSEJTYjNWMFpYTWdiVzkyYVdWelBYdHRiM1pwWlhORVlYUmhmU0J2YmtSbGJHVjBaVDE3YUdGdVpHeGxSR1ZzWlhSbFRXOTJhV1Y5SUM4K1hHNGdJQ0FnSUNBZ0lEd3ZVMEZ3Y0VOdmJuUmhhVzVsY2o1Y2JpQWdJQ0FnSUR3dlUzVnpjR1Z1YzJVK1hHNGdJQ0FnUEM5RmNuSnZja0p2ZFc1a1lYSjVQbHh1SUNBcFhHNTlYRzRpWFN3aVptbHNaU0k2SWk5VmMyVnljeTl0ZFhKaGRDNXZlbU5oYmk5elpXOXVMM0JzWVhsM2NtbG5hSFF0ZFhScGJITXZjMkZ0Y0d4bExXRndjQzltY205dWRHVnVaQzl6Y21NdlFYQndMblJ6ZUNKOQ==",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 6706
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 26,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.435Z",
        "time": 7,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/node_modules/.vite/deps/chunk-QJYKUKAL.js?v=0bb69d73",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/node_modules/.vite/deps/react.js?v=0bb69d73"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [
            {
              "name": "v",
              "value": "0bb69d73"
            }
          ],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "max-age=31536000,immutable"
            },
            {
              "name": "etag",
              "value": "W/\"aa83-odBFp+m2/XpVbJS4tAi7/tQy+VU\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "43651"
            }
          ],
          "content": {
            "size": 43651,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsKICBfX2NvbW1vbkpTCn0gZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL2NodW5rLTRNQk1SSUxBLmpzP3Y9MGJiNjlkNzMiOwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0L2Nqcy9yZWFjdC5kZXZlbG9wbWVudC5qcwp2YXIgcmVxdWlyZV9yZWFjdF9kZXZlbG9wbWVudCA9IF9fY29tbW9uSlMoewogICIuLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QvY2pzL3JlYWN0LmRldmVsb3BtZW50LmpzIihleHBvcnRzLCBtb2R1bGUpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIChmdW5jdGlvbigpIHsKICAgICAgZnVuY3Rpb24gZGVmaW5lRGVwcmVjYXRpb25XYXJuaW5nKG1ldGhvZE5hbWUsIGluZm8pIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29tcG9uZW50LnByb3RvdHlwZSwgbWV0aG9kTmFtZSwgewogICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgY29uc29sZS53YXJuKAogICAgICAgICAgICAgICIlcyguLi4pIGlzIGRlcHJlY2F0ZWQgaW4gcGxhaW4gSmF2YVNjcmlwdCBSZWFjdCBjbGFzc2VzLiAlcyIsCiAgICAgICAgICAgICAgaW5mb1swXSwKICAgICAgICAgICAgICBpbmZvWzFdCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0SXRlcmF0b3JGbihtYXliZUl0ZXJhYmxlKSB7CiAgICAgICAgaWYgKG51bGwgPT09IG1heWJlSXRlcmFibGUgfHwgIm9iamVjdCIgIT09IHR5cGVvZiBtYXliZUl0ZXJhYmxlKQogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgbWF5YmVJdGVyYWJsZSA9IE1BWUJFX0lURVJBVE9SX1NZTUJPTCAmJiBtYXliZUl0ZXJhYmxlW01BWUJFX0lURVJBVE9SX1NZTUJPTF0gfHwgbWF5YmVJdGVyYWJsZVsiQEBpdGVyYXRvciJdOwogICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09PSB0eXBlb2YgbWF5YmVJdGVyYWJsZSA/IG1heWJlSXRlcmFibGUgOiBudWxsOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHdhcm5Ob29wKHB1YmxpY0luc3RhbmNlLCBjYWxsZXJOYW1lKSB7CiAgICAgICAgcHVibGljSW5zdGFuY2UgPSAocHVibGljSW5zdGFuY2UgPSBwdWJsaWNJbnN0YW5jZS5jb25zdHJ1Y3RvcikgJiYgKHB1YmxpY0luc3RhbmNlLmRpc3BsYXlOYW1lIHx8IHB1YmxpY0luc3RhbmNlLm5hbWUpIHx8ICJSZWFjdENsYXNzIjsKICAgICAgICB2YXIgd2FybmluZ0tleSA9IHB1YmxpY0luc3RhbmNlICsgIi4iICsgY2FsbGVyTmFtZTsKICAgICAgICBkaWRXYXJuU3RhdGVVcGRhdGVGb3JVbm1vdW50ZWRDb21wb25lbnRbd2FybmluZ0tleV0gfHwgKGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiQ2FuJ3QgY2FsbCAlcyBvbiBhIGNvbXBvbmVudCB0aGF0IGlzIG5vdCB5ZXQgbW91bnRlZC4gVGhpcyBpcyBhIG5vLW9wLCBidXQgaXQgbWlnaHQgaW5kaWNhdGUgYSBidWcgaW4geW91ciBhcHBsaWNhdGlvbi4gSW5zdGVhZCwgYXNzaWduIHRvIGB0aGlzLnN0YXRlYCBkaXJlY3RseSBvciBkZWZpbmUgYSBgc3RhdGUgPSB7fTtgIGNsYXNzIHByb3BlcnR5IHdpdGggdGhlIGRlc2lyZWQgc3RhdGUgaW4gdGhlICVzIGNvbXBvbmVudC4iLAogICAgICAgICAgY2FsbGVyTmFtZSwKICAgICAgICAgIHB1YmxpY0luc3RhbmNlCiAgICAgICAgKSwgZGlkV2FyblN0YXRlVXBkYXRlRm9yVW5tb3VudGVkQ29tcG9uZW50W3dhcm5pbmdLZXldID0gdHJ1ZSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gQ29tcG9uZW50KHByb3BzLCBjb250ZXh0LCB1cGRhdGVyKSB7CiAgICAgICAgdGhpcy5wcm9wcyA9IHByb3BzOwogICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgICAgdGhpcy5yZWZzID0gZW1wdHlPYmplY3Q7CiAgICAgICAgdGhpcy51cGRhdGVyID0gdXBkYXRlciB8fCBSZWFjdE5vb3BVcGRhdGVRdWV1ZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBDb21wb25lbnREdW1teSgpIHsKICAgICAgfQogICAgICBmdW5jdGlvbiBQdXJlQ29tcG9uZW50KHByb3BzLCBjb250ZXh0LCB1cGRhdGVyKSB7CiAgICAgICAgdGhpcy5wcm9wcyA9IHByb3BzOwogICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgICAgdGhpcy5yZWZzID0gZW1wdHlPYmplY3Q7CiAgICAgICAgdGhpcy51cGRhdGVyID0gdXBkYXRlciB8fCBSZWFjdE5vb3BVcGRhdGVRdWV1ZTsKICAgICAgfQogICAgICBmdW5jdGlvbiB0ZXN0U3RyaW5nQ29lcmNpb24odmFsdWUpIHsKICAgICAgICByZXR1cm4gIiIgKyB2YWx1ZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjaGVja0tleVN0cmluZ0NvZXJjaW9uKHZhbHVlKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHRlc3RTdHJpbmdDb2VyY2lvbih2YWx1ZSk7CiAgICAgICAgICB2YXIgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0ID0gZmFsc2U7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgaWYgKEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCkgewogICAgICAgICAgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0ID0gY29uc29sZTsKICAgICAgICAgIHZhciBKU0NvbXBpbGVyX3RlbXBfY29uc3QgPSBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQuZXJyb3I7CiAgICAgICAgICB2YXIgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0JGpzY29tcCQwID0gImZ1bmN0aW9uIiA9PT0gdHlwZW9mIFN5bWJvbCAmJiBTeW1ib2wudG9TdHJpbmdUYWcgJiYgdmFsdWVbU3ltYm9sLnRvU3RyaW5nVGFnXSB8fCB2YWx1ZS5jb25zdHJ1Y3Rvci5uYW1lIHx8ICJPYmplY3QiOwogICAgICAgICAgSlNDb21waWxlcl90ZW1wX2NvbnN0LmNhbGwoCiAgICAgICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCwKICAgICAgICAgICAgIlRoZSBwcm92aWRlZCBrZXkgaXMgYW4gdW5zdXBwb3J0ZWQgdHlwZSAlcy4gVGhpcyB2YWx1ZSBtdXN0IGJlIGNvZXJjZWQgdG8gYSBzdHJpbmcgYmVmb3JlIHVzaW5nIGl0IGhlcmUuIiwKICAgICAgICAgICAgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0JGpzY29tcCQwCiAgICAgICAgICApOwogICAgICAgICAgcmV0dXJuIHRlc3RTdHJpbmdDb2VyY2lvbih2YWx1ZSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlKSB7CiAgICAgICAgaWYgKG51bGwgPT0gdHlwZSkgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKCJmdW5jdGlvbiIgPT09IHR5cGVvZiB0eXBlKQogICAgICAgICAgcmV0dXJuIHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX0NMSUVOVF9SRUZFUkVOQ0UgPyBudWxsIDogdHlwZS5kaXNwbGF5TmFtZSB8fCB0eXBlLm5hbWUgfHwgbnVsbDsKICAgICAgICBpZiAoInN0cmluZyIgPT09IHR5cGVvZiB0eXBlKSByZXR1cm4gdHlwZTsKICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgIGNhc2UgUkVBQ1RfRlJBR01FTlRfVFlQRToKICAgICAgICAgICAgcmV0dXJuICJGcmFnbWVudCI7CiAgICAgICAgICBjYXNlIFJFQUNUX1BST0ZJTEVSX1RZUEU6CiAgICAgICAgICAgIHJldHVybiAiUHJvZmlsZXIiOwogICAgICAgICAgY2FzZSBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFOgogICAgICAgICAgICByZXR1cm4gIlN0cmljdE1vZGUiOwogICAgICAgICAgY2FzZSBSRUFDVF9TVVNQRU5TRV9UWVBFOgogICAgICAgICAgICByZXR1cm4gIlN1c3BlbnNlIjsKICAgICAgICAgIGNhc2UgUkVBQ1RfU1VTUEVOU0VfTElTVF9UWVBFOgogICAgICAgICAgICByZXR1cm4gIlN1c3BlbnNlTGlzdCI7CiAgICAgICAgICBjYXNlIFJFQUNUX0FDVElWSVRZX1RZUEU6CiAgICAgICAgICAgIHJldHVybiAiQWN0aXZpdHkiOwogICAgICAgIH0KICAgICAgICBpZiAoIm9iamVjdCIgPT09IHR5cGVvZiB0eXBlKQogICAgICAgICAgc3dpdGNoICgibnVtYmVyIiA9PT0gdHlwZW9mIHR5cGUudGFnICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICJSZWNlaXZlZCBhbiB1bmV4cGVjdGVkIG9iamVjdCBpbiBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUoKS4gVGhpcyBpcyBsaWtlbHkgYSBidWcgaW4gUmVhY3QuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLiIKICAgICAgICAgICksIHR5cGUuJCR0eXBlb2YpIHsKICAgICAgICAgICAgY2FzZSBSRUFDVF9QT1JUQUxfVFlQRToKICAgICAgICAgICAgICByZXR1cm4gIlBvcnRhbCI7CiAgICAgICAgICAgIGNhc2UgUkVBQ1RfQ09OVEVYVF9UWVBFOgogICAgICAgICAgICAgIHJldHVybiAodHlwZS5kaXNwbGF5TmFtZSB8fCAiQ29udGV4dCIpICsgIi5Qcm92aWRlciI7CiAgICAgICAgICAgIGNhc2UgUkVBQ1RfQ09OU1VNRVJfVFlQRToKICAgICAgICAgICAgICByZXR1cm4gKHR5cGUuX2NvbnRleHQuZGlzcGxheU5hbWUgfHwgIkNvbnRleHQiKSArICIuQ29uc3VtZXIiOwogICAgICAgICAgICBjYXNlIFJFQUNUX0ZPUldBUkRfUkVGX1RZUEU6CiAgICAgICAgICAgICAgdmFyIGlubmVyVHlwZSA9IHR5cGUucmVuZGVyOwogICAgICAgICAgICAgIHR5cGUgPSB0eXBlLmRpc3BsYXlOYW1lOwogICAgICAgICAgICAgIHR5cGUgfHwgKHR5cGUgPSBpbm5lclR5cGUuZGlzcGxheU5hbWUgfHwgaW5uZXJUeXBlLm5hbWUgfHwgIiIsIHR5cGUgPSAiIiAhPT0gdHlwZSA/ICJGb3J3YXJkUmVmKCIgKyB0eXBlICsgIikiIDogIkZvcndhcmRSZWYiKTsKICAgICAgICAgICAgICByZXR1cm4gdHlwZTsKICAgICAgICAgICAgY2FzZSBSRUFDVF9NRU1PX1RZUEU6CiAgICAgICAgICAgICAgcmV0dXJuIGlubmVyVHlwZSA9IHR5cGUuZGlzcGxheU5hbWUgfHwgbnVsbCwgbnVsbCAhPT0gaW5uZXJUeXBlID8gaW5uZXJUeXBlIDogZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUudHlwZSkgfHwgIk1lbW8iOwogICAgICAgICAgICBjYXNlIFJFQUNUX0xBWllfVFlQRToKICAgICAgICAgICAgICBpbm5lclR5cGUgPSB0eXBlLl9wYXlsb2FkOwogICAgICAgICAgICAgIHR5cGUgPSB0eXBlLl9pbml0OwogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUoaW5uZXJUeXBlKSk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoeCkgewogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICBmdW5jdGlvbiBnZXRUYXNrTmFtZSh0eXBlKSB7CiAgICAgICAgaWYgKHR5cGUgPT09IFJFQUNUX0ZSQUdNRU5UX1RZUEUpIHJldHVybiAiPD4iOwogICAgICAgIGlmICgib2JqZWN0IiA9PT0gdHlwZW9mIHR5cGUgJiYgbnVsbCAhPT0gdHlwZSAmJiB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9MQVpZX1RZUEUpCiAgICAgICAgICByZXR1cm4gIjwuLi4+IjsKICAgICAgICB0cnkgewogICAgICAgICAgdmFyIG5hbWUgPSBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodHlwZSk7CiAgICAgICAgICByZXR1cm4gbmFtZSA/ICI8IiArIG5hbWUgKyAiPiIgOiAiPC4uLj4iOwogICAgICAgIH0gY2F0Y2ggKHgpIHsKICAgICAgICAgIHJldHVybiAiPC4uLj4iOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBnZXRPd25lcigpIHsKICAgICAgICB2YXIgZGlzcGF0Y2hlciA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLkE7CiAgICAgICAgcmV0dXJuIG51bGwgPT09IGRpc3BhdGNoZXIgPyBudWxsIDogZGlzcGF0Y2hlci5nZXRPd25lcigpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIFVua25vd25Pd25lcigpIHsKICAgICAgICByZXR1cm4gRXJyb3IoInJlYWN0LXN0YWNrLXRvcC1mcmFtZSIpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGhhc1ZhbGlkS2V5KGNvbmZpZykgewogICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZywgImtleSIpKSB7CiAgICAgICAgICB2YXIgZ2V0dGVyID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihjb25maWcsICJrZXkiKS5nZXQ7CiAgICAgICAgICBpZiAoZ2V0dGVyICYmIGdldHRlci5pc1JlYWN0V2FybmluZykgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBjb25maWcua2V5OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGRlZmluZUtleVByb3BXYXJuaW5nR2V0dGVyKHByb3BzLCBkaXNwbGF5TmFtZSkgewogICAgICAgIGZ1bmN0aW9uIHdhcm5BYm91dEFjY2Vzc2luZ0tleSgpIHsKICAgICAgICAgIHNwZWNpYWxQcm9wS2V5V2FybmluZ1Nob3duIHx8IChzcGVjaWFsUHJvcEtleVdhcm5pbmdTaG93biA9IHRydWUsIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICIlczogYGtleWAgaXMgbm90IGEgcHJvcC4gVHJ5aW5nIHRvIGFjY2VzcyBpdCB3aWxsIHJlc3VsdCBpbiBgdW5kZWZpbmVkYCBiZWluZyByZXR1cm5lZC4gSWYgeW91IG5lZWQgdG8gYWNjZXNzIHRoZSBzYW1lIHZhbHVlIHdpdGhpbiB0aGUgY2hpbGQgY29tcG9uZW50LCB5b3Ugc2hvdWxkIHBhc3MgaXQgYXMgYSBkaWZmZXJlbnQgcHJvcC4gKGh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvc3BlY2lhbC1wcm9wcykiLAogICAgICAgICAgICBkaXNwbGF5TmFtZQogICAgICAgICAgKSk7CiAgICAgICAgfQogICAgICAgIHdhcm5BYm91dEFjY2Vzc2luZ0tleS5pc1JlYWN0V2FybmluZyA9IHRydWU7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3BzLCAia2V5IiwgewogICAgICAgICAgZ2V0OiB3YXJuQWJvdXRBY2Nlc3NpbmdLZXksCiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgICB9KTsKICAgICAgfQogICAgICBmdW5jdGlvbiBlbGVtZW50UmVmR2V0dGVyV2l0aERlcHJlY2F0aW9uV2FybmluZygpIHsKICAgICAgICB2YXIgY29tcG9uZW50TmFtZSA9IGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0aGlzLnR5cGUpOwogICAgICAgIGRpZFdhcm5BYm91dEVsZW1lbnRSZWZbY29tcG9uZW50TmFtZV0gfHwgKGRpZFdhcm5BYm91dEVsZW1lbnRSZWZbY29tcG9uZW50TmFtZV0gPSB0cnVlLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgIkFjY2Vzc2luZyBlbGVtZW50LnJlZiB3YXMgcmVtb3ZlZCBpbiBSZWFjdCAxOS4gcmVmIGlzIG5vdyBhIHJlZ3VsYXIgcHJvcC4gSXQgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIEpTWCBFbGVtZW50IHR5cGUgaW4gYSBmdXR1cmUgcmVsZWFzZS4iCiAgICAgICAgKSk7CiAgICAgICAgY29tcG9uZW50TmFtZSA9IHRoaXMucHJvcHMucmVmOwogICAgICAgIHJldHVybiB2b2lkIDAgIT09IGNvbXBvbmVudE5hbWUgPyBjb21wb25lbnROYW1lIDogbnVsbDsKICAgICAgfQogICAgICBmdW5jdGlvbiBSZWFjdEVsZW1lbnQodHlwZSwga2V5LCBzZWxmLCBzb3VyY2UsIG93bmVyLCBwcm9wcywgZGVidWdTdGFjaywgZGVidWdUYXNrKSB7CiAgICAgICAgc2VsZiA9IHByb3BzLnJlZjsKICAgICAgICB0eXBlID0gewogICAgICAgICAgJCR0eXBlb2Y6IFJFQUNUX0VMRU1FTlRfVFlQRSwKICAgICAgICAgIHR5cGUsCiAgICAgICAgICBrZXksCiAgICAgICAgICBwcm9wcywKICAgICAgICAgIF9vd25lcjogb3duZXIKICAgICAgICB9OwogICAgICAgIG51bGwgIT09ICh2b2lkIDAgIT09IHNlbGYgPyBzZWxmIDogbnVsbCkgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZSwgInJlZiIsIHsKICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgICAgZ2V0OiBlbGVtZW50UmVmR2V0dGVyV2l0aERlcHJlY2F0aW9uV2FybmluZwogICAgICAgIH0pIDogT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsICJyZWYiLCB7IGVudW1lcmFibGU6IGZhbHNlLCB2YWx1ZTogbnVsbCB9KTsKICAgICAgICB0eXBlLl9zdG9yZSA9IHt9OwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLl9zdG9yZSwgInZhbGlkYXRlZCIsIHsKICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsCiAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICAgICAgdmFsdWU6IDAKICAgICAgICB9KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZSwgIl9kZWJ1Z0luZm8iLCB7CiAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLAogICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICAgIHZhbHVlOiBudWxsCiAgICAgICAgfSk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsICJfZGVidWdTdGFjayIsIHsKICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsCiAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICAgICAgdmFsdWU6IGRlYnVnU3RhY2sKICAgICAgICB9KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZSwgIl9kZWJ1Z1Rhc2siLCB7CiAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLAogICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICAgIHZhbHVlOiBkZWJ1Z1Rhc2sKICAgICAgICB9KTsKICAgICAgICBPYmplY3QuZnJlZXplICYmIChPYmplY3QuZnJlZXplKHR5cGUucHJvcHMpLCBPYmplY3QuZnJlZXplKHR5cGUpKTsKICAgICAgICByZXR1cm4gdHlwZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjbG9uZUFuZFJlcGxhY2VLZXkob2xkRWxlbWVudCwgbmV3S2V5KSB7CiAgICAgICAgbmV3S2V5ID0gUmVhY3RFbGVtZW50KAogICAgICAgICAgb2xkRWxlbWVudC50eXBlLAogICAgICAgICAgbmV3S2V5LAogICAgICAgICAgdm9pZCAwLAogICAgICAgICAgdm9pZCAwLAogICAgICAgICAgb2xkRWxlbWVudC5fb3duZXIsCiAgICAgICAgICBvbGRFbGVtZW50LnByb3BzLAogICAgICAgICAgb2xkRWxlbWVudC5fZGVidWdTdGFjaywKICAgICAgICAgIG9sZEVsZW1lbnQuX2RlYnVnVGFzawogICAgICAgICk7CiAgICAgICAgb2xkRWxlbWVudC5fc3RvcmUgJiYgKG5ld0tleS5fc3RvcmUudmFsaWRhdGVkID0gb2xkRWxlbWVudC5fc3RvcmUudmFsaWRhdGVkKTsKICAgICAgICByZXR1cm4gbmV3S2V5OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGlzVmFsaWRFbGVtZW50KG9iamVjdCkgewogICAgICAgIHJldHVybiAib2JqZWN0IiA9PT0gdHlwZW9mIG9iamVjdCAmJiBudWxsICE9PSBvYmplY3QgJiYgb2JqZWN0LiQkdHlwZW9mID09PSBSRUFDVF9FTEVNRU5UX1RZUEU7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZXNjYXBlKGtleSkgewogICAgICAgIHZhciBlc2NhcGVyTG9va3VwID0geyAiPSI6ICI9MCIsICI6IjogIj0yIiB9OwogICAgICAgIHJldHVybiAiJCIgKyBrZXkucmVwbGFjZSgvWz06XS9nLCBmdW5jdGlvbihtYXRjaCkgewogICAgICAgICAgcmV0dXJuIGVzY2FwZXJMb29rdXBbbWF0Y2hdOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldEVsZW1lbnRLZXkoZWxlbWVudCwgaW5kZXgpIHsKICAgICAgICByZXR1cm4gIm9iamVjdCIgPT09IHR5cGVvZiBlbGVtZW50ICYmIG51bGwgIT09IGVsZW1lbnQgJiYgbnVsbCAhPSBlbGVtZW50LmtleSA/IChjaGVja0tleVN0cmluZ0NvZXJjaW9uKGVsZW1lbnQua2V5KSwgZXNjYXBlKCIiICsgZWxlbWVudC5rZXkpKSA6IGluZGV4LnRvU3RyaW5nKDM2KTsKICAgICAgfQogICAgICBmdW5jdGlvbiBub29wJDEoKSB7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmVzb2x2ZVRoZW5hYmxlKHRoZW5hYmxlKSB7CiAgICAgICAgc3dpdGNoICh0aGVuYWJsZS5zdGF0dXMpIHsKICAgICAgICAgIGNhc2UgImZ1bGZpbGxlZCI6CiAgICAgICAgICAgIHJldHVybiB0aGVuYWJsZS52YWx1ZTsKICAgICAgICAgIGNhc2UgInJlamVjdGVkIjoKICAgICAgICAgICAgdGhyb3cgdGhlbmFibGUucmVhc29uOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgc3dpdGNoICgic3RyaW5nIiA9PT0gdHlwZW9mIHRoZW5hYmxlLnN0YXR1cyA/IHRoZW5hYmxlLnRoZW4obm9vcCQxLCBub29wJDEpIDogKHRoZW5hYmxlLnN0YXR1cyA9ICJwZW5kaW5nIiwgdGhlbmFibGUudGhlbigKICAgICAgICAgICAgICBmdW5jdGlvbihmdWxmaWxsZWRWYWx1ZSkgewogICAgICAgICAgICAgICAgInBlbmRpbmciID09PSB0aGVuYWJsZS5zdGF0dXMgJiYgKHRoZW5hYmxlLnN0YXR1cyA9ICJmdWxmaWxsZWQiLCB0aGVuYWJsZS52YWx1ZSA9IGZ1bGZpbGxlZFZhbHVlKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICAgICAgICAicGVuZGluZyIgPT09IHRoZW5hYmxlLnN0YXR1cyAmJiAodGhlbmFibGUuc3RhdHVzID0gInJlamVjdGVkIiwgdGhlbmFibGUucmVhc29uID0gZXJyb3IpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgKSksIHRoZW5hYmxlLnN0YXR1cykgewogICAgICAgICAgICAgIGNhc2UgImZ1bGZpbGxlZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gdGhlbmFibGUudmFsdWU7CiAgICAgICAgICAgICAgY2FzZSAicmVqZWN0ZWQiOgogICAgICAgICAgICAgICAgdGhyb3cgdGhlbmFibGUucmVhc29uOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRocm93IHRoZW5hYmxlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1hcEludG9BcnJheShjaGlsZHJlbiwgYXJyYXksIGVzY2FwZWRQcmVmaXgsIG5hbWVTb0ZhciwgY2FsbGJhY2spIHsKICAgICAgICB2YXIgdHlwZSA9IHR5cGVvZiBjaGlsZHJlbjsKICAgICAgICBpZiAoInVuZGVmaW5lZCIgPT09IHR5cGUgfHwgImJvb2xlYW4iID09PSB0eXBlKSBjaGlsZHJlbiA9IG51bGw7CiAgICAgICAgdmFyIGludm9rZUNhbGxiYWNrID0gZmFsc2U7CiAgICAgICAgaWYgKG51bGwgPT09IGNoaWxkcmVuKSBpbnZva2VDYWxsYmFjayA9IHRydWU7CiAgICAgICAgZWxzZQogICAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICAgIGNhc2UgImJpZ2ludCI6CiAgICAgICAgICAgIGNhc2UgInN0cmluZyI6CiAgICAgICAgICAgIGNhc2UgIm51bWJlciI6CiAgICAgICAgICAgICAgaW52b2tlQ2FsbGJhY2sgPSB0cnVlOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICJvYmplY3QiOgogICAgICAgICAgICAgIHN3aXRjaCAoY2hpbGRyZW4uJCR0eXBlb2YpIHsKICAgICAgICAgICAgICAgIGNhc2UgUkVBQ1RfRUxFTUVOVF9UWVBFOgogICAgICAgICAgICAgICAgY2FzZSBSRUFDVF9QT1JUQUxfVFlQRToKICAgICAgICAgICAgICAgICAgaW52b2tlQ2FsbGJhY2sgPSB0cnVlOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgUkVBQ1RfTEFaWV9UWVBFOgogICAgICAgICAgICAgICAgICByZXR1cm4gaW52b2tlQ2FsbGJhY2sgPSBjaGlsZHJlbi5faW5pdCwgbWFwSW50b0FycmF5KAogICAgICAgICAgICAgICAgICAgIGludm9rZUNhbGxiYWNrKGNoaWxkcmVuLl9wYXlsb2FkKSwKICAgICAgICAgICAgICAgICAgICBhcnJheSwKICAgICAgICAgICAgICAgICAgICBlc2NhcGVkUHJlZml4LAogICAgICAgICAgICAgICAgICAgIG5hbWVTb0ZhciwKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjawogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICBpZiAoaW52b2tlQ2FsbGJhY2spIHsKICAgICAgICAgIGludm9rZUNhbGxiYWNrID0gY2hpbGRyZW47CiAgICAgICAgICBjYWxsYmFjayA9IGNhbGxiYWNrKGludm9rZUNhbGxiYWNrKTsKICAgICAgICAgIHZhciBjaGlsZEtleSA9ICIiID09PSBuYW1lU29GYXIgPyAiLiIgKyBnZXRFbGVtZW50S2V5KGludm9rZUNhbGxiYWNrLCAwKSA6IG5hbWVTb0ZhcjsKICAgICAgICAgIGlzQXJyYXlJbXBsKGNhbGxiYWNrKSA/IChlc2NhcGVkUHJlZml4ID0gIiIsIG51bGwgIT0gY2hpbGRLZXkgJiYgKGVzY2FwZWRQcmVmaXggPSBjaGlsZEtleS5yZXBsYWNlKHVzZXJQcm92aWRlZEtleUVzY2FwZVJlZ2V4LCAiJCYvIikgKyAiLyIpLCBtYXBJbnRvQXJyYXkoY2FsbGJhY2ssIGFycmF5LCBlc2NhcGVkUHJlZml4LCAiIiwgZnVuY3Rpb24oYykgewogICAgICAgICAgICByZXR1cm4gYzsKICAgICAgICAgIH0pKSA6IG51bGwgIT0gY2FsbGJhY2sgJiYgKGlzVmFsaWRFbGVtZW50KGNhbGxiYWNrKSAmJiAobnVsbCAhPSBjYWxsYmFjay5rZXkgJiYgKGludm9rZUNhbGxiYWNrICYmIGludm9rZUNhbGxiYWNrLmtleSA9PT0gY2FsbGJhY2sua2V5IHx8IGNoZWNrS2V5U3RyaW5nQ29lcmNpb24oY2FsbGJhY2sua2V5KSksIGVzY2FwZWRQcmVmaXggPSBjbG9uZUFuZFJlcGxhY2VLZXkoCiAgICAgICAgICAgIGNhbGxiYWNrLAogICAgICAgICAgICBlc2NhcGVkUHJlZml4ICsgKG51bGwgPT0gY2FsbGJhY2sua2V5IHx8IGludm9rZUNhbGxiYWNrICYmIGludm9rZUNhbGxiYWNrLmtleSA9PT0gY2FsbGJhY2sua2V5ID8gIiIgOiAoIiIgKyBjYWxsYmFjay5rZXkpLnJlcGxhY2UoCiAgICAgICAgICAgICAgdXNlclByb3ZpZGVkS2V5RXNjYXBlUmVnZXgsCiAgICAgICAgICAgICAgIiQmLyIKICAgICAgICAgICAgKSArICIvIikgKyBjaGlsZEtleQogICAgICAgICAgKSwgIiIgIT09IG5hbWVTb0ZhciAmJiBudWxsICE9IGludm9rZUNhbGxiYWNrICYmIGlzVmFsaWRFbGVtZW50KGludm9rZUNhbGxiYWNrKSAmJiBudWxsID09IGludm9rZUNhbGxiYWNrLmtleSAmJiBpbnZva2VDYWxsYmFjay5fc3RvcmUgJiYgIWludm9rZUNhbGxiYWNrLl9zdG9yZS52YWxpZGF0ZWQgJiYgKGVzY2FwZWRQcmVmaXguX3N0b3JlLnZhbGlkYXRlZCA9IDIpLCBjYWxsYmFjayA9IGVzY2FwZWRQcmVmaXgpLCBhcnJheS5wdXNoKGNhbGxiYWNrKSk7CiAgICAgICAgICByZXR1cm4gMTsKICAgICAgICB9CiAgICAgICAgaW52b2tlQ2FsbGJhY2sgPSAwOwogICAgICAgIGNoaWxkS2V5ID0gIiIgPT09IG5hbWVTb0ZhciA/ICIuIiA6IG5hbWVTb0ZhciArICI6IjsKICAgICAgICBpZiAoaXNBcnJheUltcGwoY2hpbGRyZW4pKQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykKICAgICAgICAgICAgbmFtZVNvRmFyID0gY2hpbGRyZW5baV0sIHR5cGUgPSBjaGlsZEtleSArIGdldEVsZW1lbnRLZXkobmFtZVNvRmFyLCBpKSwgaW52b2tlQ2FsbGJhY2sgKz0gbWFwSW50b0FycmF5KAogICAgICAgICAgICAgIG5hbWVTb0ZhciwKICAgICAgICAgICAgICBhcnJheSwKICAgICAgICAgICAgICBlc2NhcGVkUHJlZml4LAogICAgICAgICAgICAgIHR5cGUsCiAgICAgICAgICAgICAgY2FsbGJhY2sKICAgICAgICAgICAgKTsKICAgICAgICBlbHNlIGlmIChpID0gZ2V0SXRlcmF0b3JGbihjaGlsZHJlbiksICJmdW5jdGlvbiIgPT09IHR5cGVvZiBpKQogICAgICAgICAgZm9yIChpID09PSBjaGlsZHJlbi5lbnRyaWVzICYmIChkaWRXYXJuQWJvdXRNYXBzIHx8IGNvbnNvbGUud2FybigKICAgICAgICAgICAgIlVzaW5nIE1hcHMgYXMgY2hpbGRyZW4gaXMgbm90IHN1cHBvcnRlZC4gVXNlIGFuIGFycmF5IG9mIGtleWVkIFJlYWN0RWxlbWVudHMgaW5zdGVhZC4iCiAgICAgICAgICApLCBkaWRXYXJuQWJvdXRNYXBzID0gdHJ1ZSksIGNoaWxkcmVuID0gaS5jYWxsKGNoaWxkcmVuKSwgaSA9IDA7ICEobmFtZVNvRmFyID0gY2hpbGRyZW4ubmV4dCgpKS5kb25lOyApCiAgICAgICAgICAgIG5hbWVTb0ZhciA9IG5hbWVTb0Zhci52YWx1ZSwgdHlwZSA9IGNoaWxkS2V5ICsgZ2V0RWxlbWVudEtleShuYW1lU29GYXIsIGkrKyksIGludm9rZUNhbGxiYWNrICs9IG1hcEludG9BcnJheSgKICAgICAgICAgICAgICBuYW1lU29GYXIsCiAgICAgICAgICAgICAgYXJyYXksCiAgICAgICAgICAgICAgZXNjYXBlZFByZWZpeCwKICAgICAgICAgICAgICB0eXBlLAogICAgICAgICAgICAgIGNhbGxiYWNrCiAgICAgICAgICAgICk7CiAgICAgICAgZWxzZSBpZiAoIm9iamVjdCIgPT09IHR5cGUpIHsKICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09PSB0eXBlb2YgY2hpbGRyZW4udGhlbikKICAgICAgICAgICAgcmV0dXJuIG1hcEludG9BcnJheSgKICAgICAgICAgICAgICByZXNvbHZlVGhlbmFibGUoY2hpbGRyZW4pLAogICAgICAgICAgICAgIGFycmF5LAogICAgICAgICAgICAgIGVzY2FwZWRQcmVmaXgsCiAgICAgICAgICAgICAgbmFtZVNvRmFyLAogICAgICAgICAgICAgIGNhbGxiYWNrCiAgICAgICAgICAgICk7CiAgICAgICAgICBhcnJheSA9IFN0cmluZyhjaGlsZHJlbik7CiAgICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICAgIk9iamVjdHMgYXJlIG5vdCB2YWxpZCBhcyBhIFJlYWN0IGNoaWxkIChmb3VuZDogIiArICgiW29iamVjdCBPYmplY3RdIiA9PT0gYXJyYXkgPyAib2JqZWN0IHdpdGgga2V5cyB7IiArIE9iamVjdC5rZXlzKGNoaWxkcmVuKS5qb2luKCIsICIpICsgIn0iIDogYXJyYXkpICsgIikuIElmIHlvdSBtZWFudCB0byByZW5kZXIgYSBjb2xsZWN0aW9uIG9mIGNoaWxkcmVuLCB1c2UgYW4gYXJyYXkgaW5zdGVhZC4iCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICByZXR1cm4gaW52b2tlQ2FsbGJhY2s7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbWFwQ2hpbGRyZW4oY2hpbGRyZW4sIGZ1bmMsIGNvbnRleHQpIHsKICAgICAgICBpZiAobnVsbCA9PSBjaGlsZHJlbikgcmV0dXJuIGNoaWxkcmVuOwogICAgICAgIHZhciByZXN1bHQgPSBbXSwgY291bnQgPSAwOwogICAgICAgIG1hcEludG9BcnJheShjaGlsZHJlbiwgcmVzdWx0LCAiIiwgIiIsIGZ1bmN0aW9uKGNoaWxkKSB7CiAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsIGNoaWxkLCBjb3VudCsrKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGxhenlJbml0aWFsaXplcihwYXlsb2FkKSB7CiAgICAgICAgaWYgKC0xID09PSBwYXlsb2FkLl9zdGF0dXMpIHsKICAgICAgICAgIHZhciBjdG9yID0gcGF5bG9hZC5fcmVzdWx0OwogICAgICAgICAgY3RvciA9IGN0b3IoKTsKICAgICAgICAgIGN0b3IudGhlbigKICAgICAgICAgICAgZnVuY3Rpb24obW9kdWxlT2JqZWN0KSB7CiAgICAgICAgICAgICAgaWYgKDAgPT09IHBheWxvYWQuX3N0YXR1cyB8fCAtMSA9PT0gcGF5bG9hZC5fc3RhdHVzKQogICAgICAgICAgICAgICAgcGF5bG9hZC5fc3RhdHVzID0gMSwgcGF5bG9hZC5fcmVzdWx0ID0gbW9kdWxlT2JqZWN0OwogICAgICAgICAgICB9LAogICAgICAgICAgICBmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgICAgIGlmICgwID09PSBwYXlsb2FkLl9zdGF0dXMgfHwgLTEgPT09IHBheWxvYWQuX3N0YXR1cykKICAgICAgICAgICAgICAgIHBheWxvYWQuX3N0YXR1cyA9IDIsIHBheWxvYWQuX3Jlc3VsdCA9IGVycm9yOwogICAgICAgICAgICB9CiAgICAgICAgICApOwogICAgICAgICAgLTEgPT09IHBheWxvYWQuX3N0YXR1cyAmJiAocGF5bG9hZC5fc3RhdHVzID0gMCwgcGF5bG9hZC5fcmVzdWx0ID0gY3Rvcik7CiAgICAgICAgfQogICAgICAgIGlmICgxID09PSBwYXlsb2FkLl9zdGF0dXMpCiAgICAgICAgICByZXR1cm4gY3RvciA9IHBheWxvYWQuX3Jlc3VsdCwgdm9pZCAwID09PSBjdG9yICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICJsYXp5OiBFeHBlY3RlZCB0aGUgcmVzdWx0IG9mIGEgZHluYW1pYyBpbXBvcnQoKSBjYWxsLiBJbnN0ZWFkIHJlY2VpdmVkOiAlc1xuXG5Zb3VyIGNvZGUgc2hvdWxkIGxvb2sgbGlrZTogXG4gIGNvbnN0IE15Q29tcG9uZW50ID0gbGF6eSgoKSA9PiBpbXBvcnQoJy4vTXlDb21wb25lbnQnKSlcblxuRGlkIHlvdSBhY2NpZGVudGFsbHkgcHV0IGN1cmx5IGJyYWNlcyBhcm91bmQgdGhlIGltcG9ydD8iLAogICAgICAgICAgICBjdG9yCiAgICAgICAgICApLCAiZGVmYXVsdCIgaW4gY3RvciB8fCBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAibGF6eTogRXhwZWN0ZWQgdGhlIHJlc3VsdCBvZiBhIGR5bmFtaWMgaW1wb3J0KCkgY2FsbC4gSW5zdGVhZCByZWNlaXZlZDogJXNcblxuWW91ciBjb2RlIHNob3VsZCBsb29rIGxpa2U6IFxuICBjb25zdCBNeUNvbXBvbmVudCA9IGxhenkoKCkgPT4gaW1wb3J0KCcuL015Q29tcG9uZW50JykpIiwKICAgICAgICAgICAgY3RvcgogICAgICAgICAgKSwgY3Rvci5kZWZhdWx0OwogICAgICAgIHRocm93IHBheWxvYWQuX3Jlc3VsdDsKICAgICAgfQogICAgICBmdW5jdGlvbiByZXNvbHZlRGlzcGF0Y2hlcigpIHsKICAgICAgICB2YXIgZGlzcGF0Y2hlciA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLkg7CiAgICAgICAgbnVsbCA9PT0gZGlzcGF0Y2hlciAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgIkludmFsaWQgaG9vayBjYWxsLiBIb29rcyBjYW4gb25seSBiZSBjYWxsZWQgaW5zaWRlIG9mIHRoZSBib2R5IG9mIGEgZnVuY3Rpb24gY29tcG9uZW50LiBUaGlzIGNvdWxkIGhhcHBlbiBmb3Igb25lIG9mIHRoZSBmb2xsb3dpbmcgcmVhc29uczpcbjEuIFlvdSBtaWdodCBoYXZlIG1pc21hdGNoaW5nIHZlcnNpb25zIG9mIFJlYWN0IGFuZCB0aGUgcmVuZGVyZXIgKHN1Y2ggYXMgUmVhY3QgRE9NKVxuMi4gWW91IG1pZ2h0IGJlIGJyZWFraW5nIHRoZSBSdWxlcyBvZiBIb29rc1xuMy4gWW91IG1pZ2h0IGhhdmUgbW9yZSB0aGFuIG9uZSBjb3B5IG9mIFJlYWN0IGluIHRoZSBzYW1lIGFwcFxuU2VlIGh0dHBzOi8vcmVhY3QuZGV2L2xpbmsvaW52YWxpZC1ob29rLWNhbGwgZm9yIHRpcHMgYWJvdXQgaG93IHRvIGRlYnVnIGFuZCBmaXggdGhpcyBwcm9ibGVtLiIKICAgICAgICApOwogICAgICAgIHJldHVybiBkaXNwYXRjaGVyOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG5vb3AoKSB7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZW5xdWV1ZVRhc2sodGFzaykgewogICAgICAgIGlmIChudWxsID09PSBlbnF1ZXVlVGFza0ltcGwpCiAgICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgcmVxdWlyZVN0cmluZyA9ICgicmVxdWlyZSIgKyBNYXRoLnJhbmRvbSgpKS5zbGljZSgwLCA3KTsKICAgICAgICAgICAgZW5xdWV1ZVRhc2tJbXBsID0gKG1vZHVsZSAmJiBtb2R1bGVbcmVxdWlyZVN0cmluZ10pLmNhbGwoCiAgICAgICAgICAgICAgbW9kdWxlLAogICAgICAgICAgICAgICJ0aW1lcnMiCiAgICAgICAgICAgICkuc2V0SW1tZWRpYXRlOwogICAgICAgICAgfSBjYXRjaCAoX2VycikgewogICAgICAgICAgICBlbnF1ZXVlVGFza0ltcGwgPSBmdW5jdGlvbihjYWxsYmFjaykgewogICAgICAgICAgICAgIGZhbHNlID09PSBkaWRXYXJuQWJvdXRNZXNzYWdlQ2hhbm5lbCAmJiAoZGlkV2FybkFib3V0TWVzc2FnZUNoYW5uZWwgPSB0cnVlLCAidW5kZWZpbmVkIiA9PT0gdHlwZW9mIE1lc3NhZ2VDaGFubmVsICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgICAiVGhpcyBicm93c2VyIGRvZXMgbm90IGhhdmUgYSBNZXNzYWdlQ2hhbm5lbCBpbXBsZW1lbnRhdGlvbiwgc28gZW5xdWV1aW5nIHRhc2tzIHZpYSBhd2FpdCBhY3QoYXN5bmMgKCkgPT4gLi4uKSB3aWxsIGZhaWwuIFBsZWFzZSBmaWxlIGFuIGlzc3VlIGF0IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9pc3N1ZXMgaWYgeW91IGVuY291bnRlciB0aGlzIHdhcm5pbmcuIgogICAgICAgICAgICAgICkpOwogICAgICAgICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7CiAgICAgICAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBjYWxsYmFjazsKICAgICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKHZvaWQgMCk7CiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgcmV0dXJuIGVucXVldWVUYXNrSW1wbCh0YXNrKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBhZ2dyZWdhdGVFcnJvcnMoZXJyb3JzKSB7CiAgICAgICAgcmV0dXJuIDEgPCBlcnJvcnMubGVuZ3RoICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBBZ2dyZWdhdGVFcnJvciA/IG5ldyBBZ2dyZWdhdGVFcnJvcihlcnJvcnMpIDogZXJyb3JzWzBdOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHBvcEFjdFNjb3BlKHByZXZBY3RRdWV1ZSwgcHJldkFjdFNjb3BlRGVwdGgpIHsKICAgICAgICBwcmV2QWN0U2NvcGVEZXB0aCAhPT0gYWN0U2NvcGVEZXB0aCAtIDEgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICJZb3Ugc2VlbSB0byBoYXZlIG92ZXJsYXBwaW5nIGFjdCgpIGNhbGxzLCB0aGlzIGlzIG5vdCBzdXBwb3J0ZWQuIEJlIHN1cmUgdG8gYXdhaXQgcHJldmlvdXMgYWN0KCkgY2FsbHMgYmVmb3JlIG1ha2luZyBhIG5ldyBvbmUuICIKICAgICAgICApOwogICAgICAgIGFjdFNjb3BlRGVwdGggPSBwcmV2QWN0U2NvcGVEZXB0aDsKICAgICAgfQogICAgICBmdW5jdGlvbiByZWN1cnNpdmVseUZsdXNoQXN5bmNBY3RXb3JrKHJldHVyblZhbHVlLCByZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB2YXIgcXVldWUgPSBSZWFjdFNoYXJlZEludGVybmFscy5hY3RRdWV1ZTsKICAgICAgICBpZiAobnVsbCAhPT0gcXVldWUpCiAgICAgICAgICBpZiAoMCAhPT0gcXVldWUubGVuZ3RoKQogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGZsdXNoQWN0UXVldWUocXVldWUpOwogICAgICAgICAgICAgIGVucXVldWVUYXNrKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHJlY3Vyc2l2ZWx5Rmx1c2hBc3luY0FjdFdvcmsocmV0dXJuVmFsdWUsIHJlc29sdmUsIHJlamVjdCk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5wdXNoKGVycm9yKTsKICAgICAgICAgICAgfQogICAgICAgICAgZWxzZSBSZWFjdFNoYXJlZEludGVybmFscy5hY3RRdWV1ZSA9IG51bGw7CiAgICAgICAgMCA8IFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5sZW5ndGggPyAocXVldWUgPSBhZ2dyZWdhdGVFcnJvcnMoUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzKSwgUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzLmxlbmd0aCA9IDAsIHJlamVjdChxdWV1ZSkpIDogcmVzb2x2ZShyZXR1cm5WYWx1ZSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZmx1c2hBY3RRdWV1ZShxdWV1ZSkgewogICAgICAgIGlmICghaXNGbHVzaGluZykgewogICAgICAgICAgaXNGbHVzaGluZyA9IHRydWU7CiAgICAgICAgICB2YXIgaSA9IDA7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gcXVldWVbaV07CiAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMuZGlkVXNlUHJvbWlzZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgdmFyIGNvbnRpbnVhdGlvbiA9IGNhbGxiYWNrKGZhbHNlKTsKICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBjb250aW51YXRpb24pIHsKICAgICAgICAgICAgICAgICAgaWYgKFJlYWN0U2hhcmVkSW50ZXJuYWxzLmRpZFVzZVByb21pc2UpIHsKICAgICAgICAgICAgICAgICAgICBxdWV1ZVtpXSA9IGNhbGxiYWNrOwogICAgICAgICAgICAgICAgICAgIHF1ZXVlLnNwbGljZSgwLCBpKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBjb250aW51YXRpb247CiAgICAgICAgICAgICAgICB9IGVsc2UgYnJlYWs7CiAgICAgICAgICAgICAgfSB3aGlsZSAoMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcXVldWUubGVuZ3RoID0gMDsKICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIHF1ZXVlLnNwbGljZSgwLCBpICsgMSksIFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5wdXNoKGVycm9yKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIGlzRmx1c2hpbmcgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgInVuZGVmaW5lZCIgIT09IHR5cGVvZiBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18gJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5yZWdpc3RlckludGVybmFsTW9kdWxlU3RhcnQgJiYgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fLnJlZ2lzdGVySW50ZXJuYWxNb2R1bGVTdGFydChFcnJvcigpKTsKICAgICAgdmFyIFJFQUNUX0VMRU1FTlRfVFlQRSA9IFN5bWJvbC5mb3IoInJlYWN0LnRyYW5zaXRpb25hbC5lbGVtZW50IiksIFJFQUNUX1BPUlRBTF9UWVBFID0gU3ltYm9sLmZvcigicmVhY3QucG9ydGFsIiksIFJFQUNUX0ZSQUdNRU5UX1RZUEUgPSBTeW1ib2wuZm9yKCJyZWFjdC5mcmFnbWVudCIpLCBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFID0gU3ltYm9sLmZvcigicmVhY3Quc3RyaWN0X21vZGUiKSwgUkVBQ1RfUFJPRklMRVJfVFlQRSA9IFN5bWJvbC5mb3IoInJlYWN0LnByb2ZpbGVyIik7CiAgICAgIFN5bWJvbC5mb3IoInJlYWN0LnByb3ZpZGVyIik7CiAgICAgIHZhciBSRUFDVF9DT05TVU1FUl9UWVBFID0gU3ltYm9sLmZvcigicmVhY3QuY29uc3VtZXIiKSwgUkVBQ1RfQ09OVEVYVF9UWVBFID0gU3ltYm9sLmZvcigicmVhY3QuY29udGV4dCIpLCBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFID0gU3ltYm9sLmZvcigicmVhY3QuZm9yd2FyZF9yZWYiKSwgUkVBQ1RfU1VTUEVOU0VfVFlQRSA9IFN5bWJvbC5mb3IoInJlYWN0LnN1c3BlbnNlIiksIFJFQUNUX1NVU1BFTlNFX0xJU1RfVFlQRSA9IFN5bWJvbC5mb3IoInJlYWN0LnN1c3BlbnNlX2xpc3QiKSwgUkVBQ1RfTUVNT19UWVBFID0gU3ltYm9sLmZvcigicmVhY3QubWVtbyIpLCBSRUFDVF9MQVpZX1RZUEUgPSBTeW1ib2wuZm9yKCJyZWFjdC5sYXp5IiksIFJFQUNUX0FDVElWSVRZX1RZUEUgPSBTeW1ib2wuZm9yKCJyZWFjdC5hY3Rpdml0eSIpLCBNQVlCRV9JVEVSQVRPUl9TWU1CT0wgPSBTeW1ib2wuaXRlcmF0b3IsIGRpZFdhcm5TdGF0ZVVwZGF0ZUZvclVubW91bnRlZENvbXBvbmVudCA9IHt9LCBSZWFjdE5vb3BVcGRhdGVRdWV1ZSA9IHsKICAgICAgICBpc01vdW50ZWQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgZW5xdWV1ZUZvcmNlVXBkYXRlOiBmdW5jdGlvbihwdWJsaWNJbnN0YW5jZSkgewogICAgICAgICAgd2Fybk5vb3AocHVibGljSW5zdGFuY2UsICJmb3JjZVVwZGF0ZSIpOwogICAgICAgIH0sCiAgICAgICAgZW5xdWV1ZVJlcGxhY2VTdGF0ZTogZnVuY3Rpb24ocHVibGljSW5zdGFuY2UpIHsKICAgICAgICAgIHdhcm5Ob29wKHB1YmxpY0luc3RhbmNlLCAicmVwbGFjZVN0YXRlIik7CiAgICAgICAgfSwKICAgICAgICBlbnF1ZXVlU2V0U3RhdGU6IGZ1bmN0aW9uKHB1YmxpY0luc3RhbmNlKSB7CiAgICAgICAgICB3YXJuTm9vcChwdWJsaWNJbnN0YW5jZSwgInNldFN0YXRlIik7CiAgICAgICAgfQogICAgICB9LCBhc3NpZ24gPSBPYmplY3QuYXNzaWduLCBlbXB0eU9iamVjdCA9IHt9OwogICAgICBPYmplY3QuZnJlZXplKGVtcHR5T2JqZWN0KTsKICAgICAgQ29tcG9uZW50LnByb3RvdHlwZS5pc1JlYWN0Q29tcG9uZW50ID0ge307CiAgICAgIENvbXBvbmVudC5wcm90b3R5cGUuc2V0U3RhdGUgPSBmdW5jdGlvbihwYXJ0aWFsU3RhdGUsIGNhbGxiYWNrKSB7CiAgICAgICAgaWYgKCJvYmplY3QiICE9PSB0eXBlb2YgcGFydGlhbFN0YXRlICYmICJmdW5jdGlvbiIgIT09IHR5cGVvZiBwYXJ0aWFsU3RhdGUgJiYgbnVsbCAhPSBwYXJ0aWFsU3RhdGUpCiAgICAgICAgICB0aHJvdyBFcnJvcigKICAgICAgICAgICAgInRha2VzIGFuIG9iamVjdCBvZiBzdGF0ZSB2YXJpYWJsZXMgdG8gdXBkYXRlIG9yIGEgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhbiBvYmplY3Qgb2Ygc3RhdGUgdmFyaWFibGVzLiIKICAgICAgICAgICk7CiAgICAgICAgdGhpcy51cGRhdGVyLmVucXVldWVTZXRTdGF0ZSh0aGlzLCBwYXJ0aWFsU3RhdGUsIGNhbGxiYWNrLCAic2V0U3RhdGUiKTsKICAgICAgfTsKICAgICAgQ29tcG9uZW50LnByb3RvdHlwZS5mb3JjZVVwZGF0ZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAgICAgICAgdGhpcy51cGRhdGVyLmVucXVldWVGb3JjZVVwZGF0ZSh0aGlzLCBjYWxsYmFjaywgImZvcmNlVXBkYXRlIik7CiAgICAgIH07CiAgICAgIHZhciBkZXByZWNhdGVkQVBJcyA9IHsKICAgICAgICBpc01vdW50ZWQ6IFsKICAgICAgICAgICJpc01vdW50ZWQiLAogICAgICAgICAgIkluc3RlYWQsIG1ha2Ugc3VyZSB0byBjbGVhbiB1cCBzdWJzY3JpcHRpb25zIGFuZCBwZW5kaW5nIHJlcXVlc3RzIGluIGNvbXBvbmVudFdpbGxVbm1vdW50IHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzLiIKICAgICAgICBdLAogICAgICAgIHJlcGxhY2VTdGF0ZTogWwogICAgICAgICAgInJlcGxhY2VTdGF0ZSIsCiAgICAgICAgICAiUmVmYWN0b3IgeW91ciBjb2RlIHRvIHVzZSBzZXRTdGF0ZSBpbnN0ZWFkIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2lzc3Vlcy8zMjM2KS4iCiAgICAgICAgXQogICAgICB9LCBmbk5hbWU7CiAgICAgIGZvciAoZm5OYW1lIGluIGRlcHJlY2F0ZWRBUElzKQogICAgICAgIGRlcHJlY2F0ZWRBUElzLmhhc093blByb3BlcnR5KGZuTmFtZSkgJiYgZGVmaW5lRGVwcmVjYXRpb25XYXJuaW5nKGZuTmFtZSwgZGVwcmVjYXRlZEFQSXNbZm5OYW1lXSk7CiAgICAgIENvbXBvbmVudER1bW15LnByb3RvdHlwZSA9IENvbXBvbmVudC5wcm90b3R5cGU7CiAgICAgIGRlcHJlY2F0ZWRBUElzID0gUHVyZUNvbXBvbmVudC5wcm90b3R5cGUgPSBuZXcgQ29tcG9uZW50RHVtbXkoKTsKICAgICAgZGVwcmVjYXRlZEFQSXMuY29uc3RydWN0b3IgPSBQdXJlQ29tcG9uZW50OwogICAgICBhc3NpZ24oZGVwcmVjYXRlZEFQSXMsIENvbXBvbmVudC5wcm90b3R5cGUpOwogICAgICBkZXByZWNhdGVkQVBJcy5pc1B1cmVSZWFjdENvbXBvbmVudCA9IHRydWU7CiAgICAgIHZhciBpc0FycmF5SW1wbCA9IEFycmF5LmlzQXJyYXksIFJFQUNUX0NMSUVOVF9SRUZFUkVOQ0UgPSBTeW1ib2wuZm9yKCJyZWFjdC5jbGllbnQucmVmZXJlbmNlIiksIFJlYWN0U2hhcmVkSW50ZXJuYWxzID0gewogICAgICAgIEg6IG51bGwsCiAgICAgICAgQTogbnVsbCwKICAgICAgICBUOiBudWxsLAogICAgICAgIFM6IG51bGwsCiAgICAgICAgVjogbnVsbCwKICAgICAgICBhY3RRdWV1ZTogbnVsbCwKICAgICAgICBpc0JhdGNoaW5nTGVnYWN5OiBmYWxzZSwKICAgICAgICBkaWRTY2hlZHVsZUxlZ2FjeVVwZGF0ZTogZmFsc2UsCiAgICAgICAgZGlkVXNlUHJvbWlzZTogZmFsc2UsCiAgICAgICAgdGhyb3duRXJyb3JzOiBbXSwKICAgICAgICBnZXRDdXJyZW50U3RhY2s6IG51bGwsCiAgICAgICAgcmVjZW50bHlDcmVhdGVkT3duZXJTdGFja3M6IDAKICAgICAgfSwgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LCBjcmVhdGVUYXNrID0gY29uc29sZS5jcmVhdGVUYXNrID8gY29uc29sZS5jcmVhdGVUYXNrIDogZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH07CiAgICAgIGRlcHJlY2F0ZWRBUElzID0gewogICAgICAgIHJlYWN0X3N0YWNrX2JvdHRvbV9mcmFtZTogZnVuY3Rpb24oY2FsbFN0YWNrRm9yRXJyb3IpIHsKICAgICAgICAgIHJldHVybiBjYWxsU3RhY2tGb3JFcnJvcigpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgdmFyIHNwZWNpYWxQcm9wS2V5V2FybmluZ1Nob3duLCBkaWRXYXJuQWJvdXRPbGRKU1hSdW50aW1lOwogICAgICB2YXIgZGlkV2FybkFib3V0RWxlbWVudFJlZiA9IHt9OwogICAgICB2YXIgdW5rbm93bk93bmVyRGVidWdTdGFjayA9IGRlcHJlY2F0ZWRBUElzLnJlYWN0X3N0YWNrX2JvdHRvbV9mcmFtZS5iaW5kKAogICAgICAgIGRlcHJlY2F0ZWRBUElzLAogICAgICAgIFVua25vd25Pd25lcgogICAgICApKCk7CiAgICAgIHZhciB1bmtub3duT3duZXJEZWJ1Z1Rhc2sgPSBjcmVhdGVUYXNrKGdldFRhc2tOYW1lKFVua25vd25Pd25lcikpOwogICAgICB2YXIgZGlkV2FybkFib3V0TWFwcyA9IGZhbHNlLCB1c2VyUHJvdmlkZWRLZXlFc2NhcGVSZWdleCA9IC9cLysvZywgcmVwb3J0R2xvYmFsRXJyb3IgPSAiZnVuY3Rpb24iID09PSB0eXBlb2YgcmVwb3J0RXJyb3IgPyByZXBvcnRFcnJvciA6IGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgaWYgKCJvYmplY3QiID09PSB0eXBlb2Ygd2luZG93ICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiB3aW5kb3cuRXJyb3JFdmVudCkgewogICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IHdpbmRvdy5FcnJvckV2ZW50KCJlcnJvciIsIHsKICAgICAgICAgICAgYnViYmxlczogdHJ1ZSwKICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIm9iamVjdCIgPT09IHR5cGVvZiBlcnJvciAmJiBudWxsICE9PSBlcnJvciAmJiAic3RyaW5nIiA9PT0gdHlwZW9mIGVycm9yLm1lc3NhZ2UgPyBTdHJpbmcoZXJyb3IubWVzc2FnZSkgOiBTdHJpbmcoZXJyb3IpLAogICAgICAgICAgICBlcnJvcgogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAoIXdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KSkgcmV0dXJuOwogICAgICAgIH0gZWxzZSBpZiAoIm9iamVjdCIgPT09IHR5cGVvZiBwcm9jZXNzICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBwcm9jZXNzLmVtaXQpIHsKICAgICAgICAgIHByb2Nlc3MuZW1pdCgidW5jYXVnaHRFeGNlcHRpb24iLCBlcnJvcik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICB9LCBkaWRXYXJuQWJvdXRNZXNzYWdlQ2hhbm5lbCA9IGZhbHNlLCBlbnF1ZXVlVGFza0ltcGwgPSBudWxsLCBhY3RTY29wZURlcHRoID0gMCwgZGlkV2Fybk5vQXdhaXRBY3QgPSBmYWxzZSwgaXNGbHVzaGluZyA9IGZhbHNlLCBxdWV1ZVNldmVyYWxNaWNyb3Rhc2tzID0gImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHF1ZXVlTWljcm90YXNrID8gZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgICAgICBxdWV1ZU1pY3JvdGFzayhmdW5jdGlvbigpIHsKICAgICAgICAgIHJldHVybiBxdWV1ZU1pY3JvdGFzayhjYWxsYmFjayk7CiAgICAgICAgfSk7CiAgICAgIH0gOiBlbnF1ZXVlVGFzazsKICAgICAgZGVwcmVjYXRlZEFQSXMgPSBPYmplY3QuZnJlZXplKHsKICAgICAgICBfX3Byb3RvX186IG51bGwsCiAgICAgICAgYzogZnVuY3Rpb24oc2l6ZSkgewogICAgICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlTWVtb0NhY2hlKHNpemUpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGV4cG9ydHMuQ2hpbGRyZW4gPSB7CiAgICAgICAgbWFwOiBtYXBDaGlsZHJlbiwKICAgICAgICBmb3JFYWNoOiBmdW5jdGlvbihjaGlsZHJlbiwgZm9yRWFjaEZ1bmMsIGZvckVhY2hDb250ZXh0KSB7CiAgICAgICAgICBtYXBDaGlsZHJlbigKICAgICAgICAgICAgY2hpbGRyZW4sCiAgICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIGZvckVhY2hGdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZvckVhY2hDb250ZXh0CiAgICAgICAgICApOwogICAgICAgIH0sCiAgICAgICAgY291bnQ6IGZ1bmN0aW9uKGNoaWxkcmVuKSB7CiAgICAgICAgICB2YXIgbiA9IDA7CiAgICAgICAgICBtYXBDaGlsZHJlbihjaGlsZHJlbiwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIG4rKzsKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIG47CiAgICAgICAgfSwKICAgICAgICB0b0FycmF5OiBmdW5jdGlvbihjaGlsZHJlbikgewogICAgICAgICAgcmV0dXJuIG1hcENoaWxkcmVuKGNoaWxkcmVuLCBmdW5jdGlvbihjaGlsZCkgewogICAgICAgICAgICByZXR1cm4gY2hpbGQ7CiAgICAgICAgICB9KSB8fCBbXTsKICAgICAgICB9LAogICAgICAgIG9ubHk6IGZ1bmN0aW9uKGNoaWxkcmVuKSB7CiAgICAgICAgICBpZiAoIWlzVmFsaWRFbGVtZW50KGNoaWxkcmVuKSkKICAgICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICAgIlJlYWN0LkNoaWxkcmVuLm9ubHkgZXhwZWN0ZWQgdG8gcmVjZWl2ZSBhIHNpbmdsZSBSZWFjdCBlbGVtZW50IGNoaWxkLiIKICAgICAgICAgICAgKTsKICAgICAgICAgIHJldHVybiBjaGlsZHJlbjsKICAgICAgICB9CiAgICAgIH07CiAgICAgIGV4cG9ydHMuQ29tcG9uZW50ID0gQ29tcG9uZW50OwogICAgICBleHBvcnRzLkZyYWdtZW50ID0gUkVBQ1RfRlJBR01FTlRfVFlQRTsKICAgICAgZXhwb3J0cy5Qcm9maWxlciA9IFJFQUNUX1BST0ZJTEVSX1RZUEU7CiAgICAgIGV4cG9ydHMuUHVyZUNvbXBvbmVudCA9IFB1cmVDb21wb25lbnQ7CiAgICAgIGV4cG9ydHMuU3RyaWN0TW9kZSA9IFJFQUNUX1NUUklDVF9NT0RFX1RZUEU7CiAgICAgIGV4cG9ydHMuU3VzcGVuc2UgPSBSRUFDVF9TVVNQRU5TRV9UWVBFOwogICAgICBleHBvcnRzLl9fQ0xJRU5UX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1dBUk5fVVNFUlNfVEhFWV9DQU5OT1RfVVBHUkFERSA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzOwogICAgICBleHBvcnRzLl9fQ09NUElMRVJfUlVOVElNRSA9IGRlcHJlY2F0ZWRBUElzOwogICAgICBleHBvcnRzLmFjdCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHByZXZBY3RRdWV1ZSA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLmFjdFF1ZXVlLCBwcmV2QWN0U2NvcGVEZXB0aCA9IGFjdFNjb3BlRGVwdGg7CiAgICAgICAgYWN0U2NvcGVEZXB0aCsrOwogICAgICAgIHZhciBxdWV1ZSA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLmFjdFF1ZXVlID0gbnVsbCAhPT0gcHJldkFjdFF1ZXVlID8gcHJldkFjdFF1ZXVlIDogW10sIGRpZEF3YWl0QWN0Q2FsbCA9IGZhbHNlOwogICAgICAgIHRyeSB7CiAgICAgICAgICB2YXIgcmVzdWx0ID0gY2FsbGJhY2soKTsKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzLnB1c2goZXJyb3IpOwogICAgICAgIH0KICAgICAgICBpZiAoMCA8IFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5sZW5ndGgpCiAgICAgICAgICB0aHJvdyBwb3BBY3RTY29wZShwcmV2QWN0UXVldWUsIHByZXZBY3RTY29wZURlcHRoKSwgY2FsbGJhY2sgPSBhZ2dyZWdhdGVFcnJvcnMoUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzKSwgUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzLmxlbmd0aCA9IDAsIGNhbGxiYWNrOwogICAgICAgIGlmIChudWxsICE9PSByZXN1bHQgJiYgIm9iamVjdCIgPT09IHR5cGVvZiByZXN1bHQgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHJlc3VsdC50aGVuKSB7CiAgICAgICAgICB2YXIgdGhlbmFibGUgPSByZXN1bHQ7CiAgICAgICAgICBxdWV1ZVNldmVyYWxNaWNyb3Rhc2tzKGZ1bmN0aW9uKCkgewogICAgICAgICAgICBkaWRBd2FpdEFjdENhbGwgfHwgZGlkV2Fybk5vQXdhaXRBY3QgfHwgKGRpZFdhcm5Ob0F3YWl0QWN0ID0gdHJ1ZSwgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgICAiWW91IGNhbGxlZCBhY3QoYXN5bmMgKCkgPT4gLi4uKSB3aXRob3V0IGF3YWl0LiBUaGlzIGNvdWxkIGxlYWQgdG8gdW5leHBlY3RlZCB0ZXN0aW5nIGJlaGF2aW91ciwgaW50ZXJsZWF2aW5nIG11bHRpcGxlIGFjdCBjYWxscyBhbmQgbWl4aW5nIHRoZWlyIHNjb3Blcy4gWW91IHNob3VsZCAtIGF3YWl0IGFjdChhc3luYyAoKSA9PiAuLi4pOyIKICAgICAgICAgICAgKSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRoZW46IGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgIGRpZEF3YWl0QWN0Q2FsbCA9IHRydWU7CiAgICAgICAgICAgICAgdGhlbmFibGUudGhlbigKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJldHVyblZhbHVlKSB7CiAgICAgICAgICAgICAgICAgIHBvcEFjdFNjb3BlKHByZXZBY3RRdWV1ZSwgcHJldkFjdFNjb3BlRGVwdGgpOwogICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gcHJldkFjdFNjb3BlRGVwdGgpIHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgZmx1c2hBY3RRdWV1ZShxdWV1ZSksIGVucXVldWVUYXNrKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVjdXJzaXZlbHlGbHVzaEFzeW5jQWN0V29yaygKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlLAogICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdAogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IkMCkgewogICAgICAgICAgICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzLnB1c2goZXJyb3IkMCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICgwIDwgUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIF90aHJvd25FcnJvciA9IGFnZ3JlZ2F0ZUVycm9ycygKICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzCiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzLmxlbmd0aCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICByZWplY3QoX3Rocm93bkVycm9yKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0gZWxzZSByZXNvbHZlKHJldHVyblZhbHVlKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgICAgICAgICBwb3BBY3RTY29wZShwcmV2QWN0UXVldWUsIHByZXZBY3RTY29wZURlcHRoKTsKICAgICAgICAgICAgICAgICAgMCA8IFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5sZW5ndGggPyAoZXJyb3IgPSBhZ2dyZWdhdGVFcnJvcnMoCiAgICAgICAgICAgICAgICAgICAgUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzCiAgICAgICAgICAgICAgICAgICksIFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5sZW5ndGggPSAwLCByZWplY3QoZXJyb3IpKSA6IHJlamVjdChlcnJvcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgdmFyIHJldHVyblZhbHVlJGpzY29tcCQwID0gcmVzdWx0OwogICAgICAgIHBvcEFjdFNjb3BlKHByZXZBY3RRdWV1ZSwgcHJldkFjdFNjb3BlRGVwdGgpOwogICAgICAgIDAgPT09IHByZXZBY3RTY29wZURlcHRoICYmIChmbHVzaEFjdFF1ZXVlKHF1ZXVlKSwgMCAhPT0gcXVldWUubGVuZ3RoICYmIHF1ZXVlU2V2ZXJhbE1pY3JvdGFza3MoZnVuY3Rpb24oKSB7CiAgICAgICAgICBkaWRBd2FpdEFjdENhbGwgfHwgZGlkV2Fybk5vQXdhaXRBY3QgfHwgKGRpZFdhcm5Ob0F3YWl0QWN0ID0gdHJ1ZSwgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIkEgY29tcG9uZW50IHN1c3BlbmRlZCBpbnNpZGUgYW4gYGFjdGAgc2NvcGUsIGJ1dCB0aGUgYGFjdGAgY2FsbCB3YXMgbm90IGF3YWl0ZWQuIFdoZW4gdGVzdGluZyBSZWFjdCBjb21wb25lbnRzIHRoYXQgZGVwZW5kIG9uIGFzeW5jaHJvbm91cyBkYXRhLCB5b3UgbXVzdCBhd2FpdCB0aGUgcmVzdWx0OlxuXG5hd2FpdCBhY3QoKCkgPT4gLi4uKSIKICAgICAgICAgICkpOwogICAgICAgIH0pLCBSZWFjdFNoYXJlZEludGVybmFscy5hY3RRdWV1ZSA9IG51bGwpOwogICAgICAgIGlmICgwIDwgUmVhY3RTaGFyZWRJbnRlcm5hbHMudGhyb3duRXJyb3JzLmxlbmd0aCkKICAgICAgICAgIHRocm93IGNhbGxiYWNrID0gYWdncmVnYXRlRXJyb3JzKFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycyksIFJlYWN0U2hhcmVkSW50ZXJuYWxzLnRocm93bkVycm9ycy5sZW5ndGggPSAwLCBjYWxsYmFjazsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdGhlbjogZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgIGRpZEF3YWl0QWN0Q2FsbCA9IHRydWU7CiAgICAgICAgICAgIDAgPT09IHByZXZBY3RTY29wZURlcHRoID8gKFJlYWN0U2hhcmVkSW50ZXJuYWxzLmFjdFF1ZXVlID0gcXVldWUsIGVucXVldWVUYXNrKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIHJldHVybiByZWN1cnNpdmVseUZsdXNoQXN5bmNBY3RXb3JrKAogICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUkanNjb21wJDAsCiAgICAgICAgICAgICAgICByZXNvbHZlLAogICAgICAgICAgICAgICAgcmVqZWN0CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSkpIDogcmVzb2x2ZShyZXR1cm5WYWx1ZSRqc2NvbXAkMCk7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfTsKICAgICAgZXhwb3J0cy5jYWNoZSA9IGZ1bmN0aW9uKGZuKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfTsKICAgICAgZXhwb3J0cy5jYXB0dXJlT3duZXJTdGFjayA9IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBnZXRDdXJyZW50U3RhY2sgPSBSZWFjdFNoYXJlZEludGVybmFscy5nZXRDdXJyZW50U3RhY2s7CiAgICAgICAgcmV0dXJuIG51bGwgPT09IGdldEN1cnJlbnRTdGFjayA/IG51bGwgOiBnZXRDdXJyZW50U3RhY2soKTsKICAgICAgfTsKICAgICAgZXhwb3J0cy5jbG9uZUVsZW1lbnQgPSBmdW5jdGlvbihlbGVtZW50LCBjb25maWcsIGNoaWxkcmVuKSB7CiAgICAgICAgaWYgKG51bGwgPT09IGVsZW1lbnQgfHwgdm9pZCAwID09PSBlbGVtZW50KQogICAgICAgICAgdGhyb3cgRXJyb3IoCiAgICAgICAgICAgICJUaGUgYXJndW1lbnQgbXVzdCBiZSBhIFJlYWN0IGVsZW1lbnQsIGJ1dCB5b3UgcGFzc2VkICIgKyBlbGVtZW50ICsgIi4iCiAgICAgICAgICApOwogICAgICAgIHZhciBwcm9wcyA9IGFzc2lnbih7fSwgZWxlbWVudC5wcm9wcyksIGtleSA9IGVsZW1lbnQua2V5LCBvd25lciA9IGVsZW1lbnQuX293bmVyOwogICAgICAgIGlmIChudWxsICE9IGNvbmZpZykgewogICAgICAgICAgdmFyIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdDsKICAgICAgICAgIGE6IHsKICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoY29uZmlnLCAicmVmIikgJiYgKEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoCiAgICAgICAgICAgICAgY29uZmlnLAogICAgICAgICAgICAgICJyZWYiCiAgICAgICAgICAgICkuZ2V0KSAmJiBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQuaXNSZWFjdFdhcm5pbmcpIHsKICAgICAgICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSBmYWxzZTsKICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICB9CiAgICAgICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9IHZvaWQgMCAhPT0gY29uZmlnLnJlZjsKICAgICAgICAgIH0KICAgICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCAmJiAob3duZXIgPSBnZXRPd25lcigpKTsKICAgICAgICAgIGhhc1ZhbGlkS2V5KGNvbmZpZykgJiYgKGNoZWNrS2V5U3RyaW5nQ29lcmNpb24oY29uZmlnLmtleSksIGtleSA9ICIiICsgY29uZmlnLmtleSk7CiAgICAgICAgICBmb3IgKHByb3BOYW1lIGluIGNvbmZpZykKICAgICAgICAgICAgIWhhc093blByb3BlcnR5LmNhbGwoY29uZmlnLCBwcm9wTmFtZSkgfHwgImtleSIgPT09IHByb3BOYW1lIHx8ICJfX3NlbGYiID09PSBwcm9wTmFtZSB8fCAiX19zb3VyY2UiID09PSBwcm9wTmFtZSB8fCAicmVmIiA9PT0gcHJvcE5hbWUgJiYgdm9pZCAwID09PSBjb25maWcucmVmIHx8IChwcm9wc1twcm9wTmFtZV0gPSBjb25maWdbcHJvcE5hbWVdKTsKICAgICAgICB9CiAgICAgICAgdmFyIHByb3BOYW1lID0gYXJndW1lbnRzLmxlbmd0aCAtIDI7CiAgICAgICAgaWYgKDEgPT09IHByb3BOYW1lKSBwcm9wcy5jaGlsZHJlbiA9IGNoaWxkcmVuOwogICAgICAgIGVsc2UgaWYgKDEgPCBwcm9wTmFtZSkgewogICAgICAgICAgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0ID0gQXJyYXkocHJvcE5hbWUpOwogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wTmFtZTsgaSsrKQogICAgICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHRbaV0gPSBhcmd1bWVudHNbaSArIDJdOwogICAgICAgICAgcHJvcHMuY2hpbGRyZW4gPSBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQ7CiAgICAgICAgfQogICAgICAgIHByb3BzID0gUmVhY3RFbGVtZW50KAogICAgICAgICAgZWxlbWVudC50eXBlLAogICAgICAgICAga2V5LAogICAgICAgICAgdm9pZCAwLAogICAgICAgICAgdm9pZCAwLAogICAgICAgICAgb3duZXIsCiAgICAgICAgICBwcm9wcywKICAgICAgICAgIGVsZW1lbnQuX2RlYnVnU3RhY2ssCiAgICAgICAgICBlbGVtZW50Ll9kZWJ1Z1Rhc2sKICAgICAgICApOwogICAgICAgIGZvciAoa2V5ID0gMjsga2V5IDwgYXJndW1lbnRzLmxlbmd0aDsga2V5KyspCiAgICAgICAgICBvd25lciA9IGFyZ3VtZW50c1trZXldLCBpc1ZhbGlkRWxlbWVudChvd25lcikgJiYgb3duZXIuX3N0b3JlICYmIChvd25lci5fc3RvcmUudmFsaWRhdGVkID0gMSk7CiAgICAgICAgcmV0dXJuIHByb3BzOwogICAgICB9OwogICAgICBleHBvcnRzLmNyZWF0ZUNvbnRleHQgPSBmdW5jdGlvbihkZWZhdWx0VmFsdWUpIHsKICAgICAgICBkZWZhdWx0VmFsdWUgPSB7CiAgICAgICAgICAkJHR5cGVvZjogUkVBQ1RfQ09OVEVYVF9UWVBFLAogICAgICAgICAgX2N1cnJlbnRWYWx1ZTogZGVmYXVsdFZhbHVlLAogICAgICAgICAgX2N1cnJlbnRWYWx1ZTI6IGRlZmF1bHRWYWx1ZSwKICAgICAgICAgIF90aHJlYWRDb3VudDogMCwKICAgICAgICAgIFByb3ZpZGVyOiBudWxsLAogICAgICAgICAgQ29uc3VtZXI6IG51bGwKICAgICAgICB9OwogICAgICAgIGRlZmF1bHRWYWx1ZS5Qcm92aWRlciA9IGRlZmF1bHRWYWx1ZTsKICAgICAgICBkZWZhdWx0VmFsdWUuQ29uc3VtZXIgPSB7CiAgICAgICAgICAkJHR5cGVvZjogUkVBQ1RfQ09OU1VNRVJfVFlQRSwKICAgICAgICAgIF9jb250ZXh0OiBkZWZhdWx0VmFsdWUKICAgICAgICB9OwogICAgICAgIGRlZmF1bHRWYWx1ZS5fY3VycmVudFJlbmRlcmVyID0gbnVsbDsKICAgICAgICBkZWZhdWx0VmFsdWUuX2N1cnJlbnRSZW5kZXJlcjIgPSBudWxsOwogICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7CiAgICAgIH07CiAgICAgIGV4cG9ydHMuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uKHR5cGUsIGNvbmZpZywgY2hpbGRyZW4pIHsKICAgICAgICBmb3IgKHZhciBpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIG5vZGUgPSBhcmd1bWVudHNbaV07CiAgICAgICAgICBpc1ZhbGlkRWxlbWVudChub2RlKSAmJiBub2RlLl9zdG9yZSAmJiAobm9kZS5fc3RvcmUudmFsaWRhdGVkID0gMSk7CiAgICAgICAgfQogICAgICAgIGkgPSB7fTsKICAgICAgICBub2RlID0gbnVsbDsKICAgICAgICBpZiAobnVsbCAhPSBjb25maWcpCiAgICAgICAgICBmb3IgKHByb3BOYW1lIGluIGRpZFdhcm5BYm91dE9sZEpTWFJ1bnRpbWUgfHwgISgiX19zZWxmIiBpbiBjb25maWcpIHx8ICJrZXkiIGluIGNvbmZpZyB8fCAoZGlkV2FybkFib3V0T2xkSlNYUnVudGltZSA9IHRydWUsIGNvbnNvbGUud2FybigKICAgICAgICAgICAgIllvdXIgYXBwIChvciBvbmUgb2YgaXRzIGRlcGVuZGVuY2llcykgaXMgdXNpbmcgYW4gb3V0ZGF0ZWQgSlNYIHRyYW5zZm9ybS4gVXBkYXRlIHRvIHRoZSBtb2Rlcm4gSlNYIHRyYW5zZm9ybSBmb3IgZmFzdGVyIHBlcmZvcm1hbmNlOiBodHRwczovL3JlYWN0LmRldi9saW5rL25ldy1qc3gtdHJhbnNmb3JtIgogICAgICAgICAgKSksIGhhc1ZhbGlkS2V5KGNvbmZpZykgJiYgKGNoZWNrS2V5U3RyaW5nQ29lcmNpb24oY29uZmlnLmtleSksIG5vZGUgPSAiIiArIGNvbmZpZy5rZXkpLCBjb25maWcpCiAgICAgICAgICAgIGhhc093blByb3BlcnR5LmNhbGwoY29uZmlnLCBwcm9wTmFtZSkgJiYgImtleSIgIT09IHByb3BOYW1lICYmICJfX3NlbGYiICE9PSBwcm9wTmFtZSAmJiAiX19zb3VyY2UiICE9PSBwcm9wTmFtZSAmJiAoaVtwcm9wTmFtZV0gPSBjb25maWdbcHJvcE5hbWVdKTsKICAgICAgICB2YXIgY2hpbGRyZW5MZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoIC0gMjsKICAgICAgICBpZiAoMSA9PT0gY2hpbGRyZW5MZW5ndGgpIGkuY2hpbGRyZW4gPSBjaGlsZHJlbjsKICAgICAgICBlbHNlIGlmICgxIDwgY2hpbGRyZW5MZW5ndGgpIHsKICAgICAgICAgIGZvciAodmFyIGNoaWxkQXJyYXkgPSBBcnJheShjaGlsZHJlbkxlbmd0aCksIF9pID0gMDsgX2kgPCBjaGlsZHJlbkxlbmd0aDsgX2krKykKICAgICAgICAgICAgY2hpbGRBcnJheVtfaV0gPSBhcmd1bWVudHNbX2kgKyAyXTsKICAgICAgICAgIE9iamVjdC5mcmVlemUgJiYgT2JqZWN0LmZyZWV6ZShjaGlsZEFycmF5KTsKICAgICAgICAgIGkuY2hpbGRyZW4gPSBjaGlsZEFycmF5OwogICAgICAgIH0KICAgICAgICBpZiAodHlwZSAmJiB0eXBlLmRlZmF1bHRQcm9wcykKICAgICAgICAgIGZvciAocHJvcE5hbWUgaW4gY2hpbGRyZW5MZW5ndGggPSB0eXBlLmRlZmF1bHRQcm9wcywgY2hpbGRyZW5MZW5ndGgpCiAgICAgICAgICAgIHZvaWQgMCA9PT0gaVtwcm9wTmFtZV0gJiYgKGlbcHJvcE5hbWVdID0gY2hpbGRyZW5MZW5ndGhbcHJvcE5hbWVdKTsKICAgICAgICBub2RlICYmIGRlZmluZUtleVByb3BXYXJuaW5nR2V0dGVyKAogICAgICAgICAgaSwKICAgICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiB0eXBlID8gdHlwZS5kaXNwbGF5TmFtZSB8fCB0eXBlLm5hbWUgfHwgIlVua25vd24iIDogdHlwZQogICAgICAgICk7CiAgICAgICAgdmFyIHByb3BOYW1lID0gMWU0ID4gUmVhY3RTaGFyZWRJbnRlcm5hbHMucmVjZW50bHlDcmVhdGVkT3duZXJTdGFja3MrKzsKICAgICAgICByZXR1cm4gUmVhY3RFbGVtZW50KAogICAgICAgICAgdHlwZSwKICAgICAgICAgIG5vZGUsCiAgICAgICAgICB2b2lkIDAsCiAgICAgICAgICB2b2lkIDAsCiAgICAgICAgICBnZXRPd25lcigpLAogICAgICAgICAgaSwKICAgICAgICAgIHByb3BOYW1lID8gRXJyb3IoInJlYWN0LXN0YWNrLXRvcC1mcmFtZSIpIDogdW5rbm93bk93bmVyRGVidWdTdGFjaywKICAgICAgICAgIHByb3BOYW1lID8gY3JlYXRlVGFzayhnZXRUYXNrTmFtZSh0eXBlKSkgOiB1bmtub3duT3duZXJEZWJ1Z1Rhc2sKICAgICAgICApOwogICAgICB9OwogICAgICBleHBvcnRzLmNyZWF0ZVJlZiA9IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciByZWZPYmplY3QgPSB7IGN1cnJlbnQ6IG51bGwgfTsKICAgICAgICBPYmplY3Quc2VhbChyZWZPYmplY3QpOwogICAgICAgIHJldHVybiByZWZPYmplY3Q7CiAgICAgIH07CiAgICAgIGV4cG9ydHMuZm9yd2FyZFJlZiA9IGZ1bmN0aW9uKHJlbmRlcikgewogICAgICAgIG51bGwgIT0gcmVuZGVyICYmIHJlbmRlci4kJHR5cGVvZiA9PT0gUkVBQ1RfTUVNT19UWVBFID8gY29uc29sZS5lcnJvcigKICAgICAgICAgICJmb3J3YXJkUmVmIHJlcXVpcmVzIGEgcmVuZGVyIGZ1bmN0aW9uIGJ1dCByZWNlaXZlZCBhIGBtZW1vYCBjb21wb25lbnQuIEluc3RlYWQgb2YgZm9yd2FyZFJlZihtZW1vKC4uLikpLCB1c2UgbWVtbyhmb3J3YXJkUmVmKC4uLikpLiIKICAgICAgICApIDogImZ1bmN0aW9uIiAhPT0gdHlwZW9mIHJlbmRlciA/IGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiZm9yd2FyZFJlZiByZXF1aXJlcyBhIHJlbmRlciBmdW5jdGlvbiBidXQgd2FzIGdpdmVuICVzLiIsCiAgICAgICAgICBudWxsID09PSByZW5kZXIgPyAibnVsbCIgOiB0eXBlb2YgcmVuZGVyCiAgICAgICAgKSA6IDAgIT09IHJlbmRlci5sZW5ndGggJiYgMiAhPT0gcmVuZGVyLmxlbmd0aCAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgImZvcndhcmRSZWYgcmVuZGVyIGZ1bmN0aW9ucyBhY2NlcHQgZXhhY3RseSB0d28gcGFyYW1ldGVyczogcHJvcHMgYW5kIHJlZi4gJXMiLAogICAgICAgICAgMSA9PT0gcmVuZGVyLmxlbmd0aCA/ICJEaWQgeW91IGZvcmdldCB0byB1c2UgdGhlIHJlZiBwYXJhbWV0ZXI/IiA6ICJBbnkgYWRkaXRpb25hbCBwYXJhbWV0ZXIgd2lsbCBiZSB1bmRlZmluZWQuIgogICAgICAgICk7CiAgICAgICAgbnVsbCAhPSByZW5kZXIgJiYgbnVsbCAhPSByZW5kZXIuZGVmYXVsdFByb3BzICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiZm9yd2FyZFJlZiByZW5kZXIgZnVuY3Rpb25zIGRvIG5vdCBzdXBwb3J0IGRlZmF1bHRQcm9wcy4gRGlkIHlvdSBhY2NpZGVudGFsbHkgcGFzcyBhIFJlYWN0IGNvbXBvbmVudD8iCiAgICAgICAgKTsKICAgICAgICB2YXIgZWxlbWVudFR5cGUgPSB7ICQkdHlwZW9mOiBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFLCByZW5kZXIgfSwgb3duTmFtZTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWxlbWVudFR5cGUsICJkaXNwbGF5TmFtZSIsIHsKICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIG93bk5hbWU7CiAgICAgICAgICB9LAogICAgICAgICAgc2V0OiBmdW5jdGlvbihuYW1lKSB7CiAgICAgICAgICAgIG93bk5hbWUgPSBuYW1lOwogICAgICAgICAgICByZW5kZXIubmFtZSB8fCByZW5kZXIuZGlzcGxheU5hbWUgfHwgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZW5kZXIsICJuYW1lIiwgeyB2YWx1ZTogbmFtZSB9KSwgcmVuZGVyLmRpc3BsYXlOYW1lID0gbmFtZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGVsZW1lbnRUeXBlOwogICAgICB9OwogICAgICBleHBvcnRzLmlzVmFsaWRFbGVtZW50ID0gaXNWYWxpZEVsZW1lbnQ7CiAgICAgIGV4cG9ydHMubGF6eSA9IGZ1bmN0aW9uKGN0b3IpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgJCR0eXBlb2Y6IFJFQUNUX0xBWllfVFlQRSwKICAgICAgICAgIF9wYXlsb2FkOiB7IF9zdGF0dXM6IC0xLCBfcmVzdWx0OiBjdG9yIH0sCiAgICAgICAgICBfaW5pdDogbGF6eUluaXRpYWxpemVyCiAgICAgICAgfTsKICAgICAgfTsKICAgICAgZXhwb3J0cy5tZW1vID0gZnVuY3Rpb24odHlwZSwgY29tcGFyZSkgewogICAgICAgIG51bGwgPT0gdHlwZSAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgIm1lbW86IFRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgY29tcG9uZW50LiBJbnN0ZWFkIHJlY2VpdmVkOiAlcyIsCiAgICAgICAgICBudWxsID09PSB0eXBlID8gIm51bGwiIDogdHlwZW9mIHR5cGUKICAgICAgICApOwogICAgICAgIGNvbXBhcmUgPSB7CiAgICAgICAgICAkJHR5cGVvZjogUkVBQ1RfTUVNT19UWVBFLAogICAgICAgICAgdHlwZSwKICAgICAgICAgIGNvbXBhcmU6IHZvaWQgMCA9PT0gY29tcGFyZSA/IG51bGwgOiBjb21wYXJlCiAgICAgICAgfTsKICAgICAgICB2YXIgb3duTmFtZTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29tcGFyZSwgImRpc3BsYXlOYW1lIiwgewogICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gb3duTmFtZTsKICAgICAgICAgIH0sCiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKG5hbWUpIHsKICAgICAgICAgICAgb3duTmFtZSA9IG5hbWU7CiAgICAgICAgICAgIHR5cGUubmFtZSB8fCB0eXBlLmRpc3BsYXlOYW1lIHx8IChPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZSwgIm5hbWUiLCB7IHZhbHVlOiBuYW1lIH0pLCB0eXBlLmRpc3BsYXlOYW1lID0gbmFtZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGNvbXBhcmU7CiAgICAgIH07CiAgICAgIGV4cG9ydHMuc3RhcnRUcmFuc2l0aW9uID0gZnVuY3Rpb24oc2NvcGUpIHsKICAgICAgICB2YXIgcHJldlRyYW5zaXRpb24gPSBSZWFjdFNoYXJlZEludGVybmFscy5ULCBjdXJyZW50VHJhbnNpdGlvbiA9IHt9OwogICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLlQgPSBjdXJyZW50VHJhbnNpdGlvbjsKICAgICAgICBjdXJyZW50VHJhbnNpdGlvbi5fdXBkYXRlZEZpYmVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciByZXR1cm5WYWx1ZSA9IHNjb3BlKCksIG9uU3RhcnRUcmFuc2l0aW9uRmluaXNoID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuUzsKICAgICAgICAgIG51bGwgIT09IG9uU3RhcnRUcmFuc2l0aW9uRmluaXNoICYmIG9uU3RhcnRUcmFuc2l0aW9uRmluaXNoKGN1cnJlbnRUcmFuc2l0aW9uLCByZXR1cm5WYWx1ZSk7CiAgICAgICAgICAib2JqZWN0IiA9PT0gdHlwZW9mIHJldHVyblZhbHVlICYmIG51bGwgIT09IHJldHVyblZhbHVlICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiByZXR1cm5WYWx1ZS50aGVuICYmIHJldHVyblZhbHVlLnRoZW4obm9vcCwgcmVwb3J0R2xvYmFsRXJyb3IpOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICByZXBvcnRHbG9iYWxFcnJvcihlcnJvcik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIG51bGwgPT09IHByZXZUcmFuc2l0aW9uICYmIGN1cnJlbnRUcmFuc2l0aW9uLl91cGRhdGVkRmliZXJzICYmIChzY29wZSA9IGN1cnJlbnRUcmFuc2l0aW9uLl91cGRhdGVkRmliZXJzLnNpemUsIGN1cnJlbnRUcmFuc2l0aW9uLl91cGRhdGVkRmliZXJzLmNsZWFyKCksIDEwIDwgc2NvcGUgJiYgY29uc29sZS53YXJuKAogICAgICAgICAgICAiRGV0ZWN0ZWQgYSBsYXJnZSBudW1iZXIgb2YgdXBkYXRlcyBpbnNpZGUgc3RhcnRUcmFuc2l0aW9uLiBJZiB0aGlzIGlzIGR1ZSB0byBhIHN1YnNjcmlwdGlvbiBwbGVhc2UgcmUtd3JpdGUgaXQgdG8gdXNlIFJlYWN0IHByb3ZpZGVkIGhvb2tzLiBPdGhlcndpc2UgY29uY3VycmVudCBtb2RlIGd1YXJhbnRlZXMgYXJlIG9mZiB0aGUgdGFibGUuIgogICAgICAgICAgKSksIFJlYWN0U2hhcmVkSW50ZXJuYWxzLlQgPSBwcmV2VHJhbnNpdGlvbjsKICAgICAgICB9CiAgICAgIH07CiAgICAgIGV4cG9ydHMudW5zdGFibGVfdXNlQ2FjaGVSZWZyZXNoID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlQ2FjaGVSZWZyZXNoKCk7CiAgICAgIH07CiAgICAgIGV4cG9ydHMudXNlID0gZnVuY3Rpb24odXNhYmxlKSB7CiAgICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlKHVzYWJsZSk7CiAgICAgIH07CiAgICAgIGV4cG9ydHMudXNlQWN0aW9uU3RhdGUgPSBmdW5jdGlvbihhY3Rpb24sIGluaXRpYWxTdGF0ZSwgcGVybWFsaW5rKSB7CiAgICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlQWN0aW9uU3RhdGUoCiAgICAgICAgICBhY3Rpb24sCiAgICAgICAgICBpbml0aWFsU3RhdGUsCiAgICAgICAgICBwZXJtYWxpbmsKICAgICAgICApOwogICAgICB9OwogICAgICBleHBvcnRzLnVzZUNhbGxiYWNrID0gZnVuY3Rpb24oY2FsbGJhY2ssIGRlcHMpIHsKICAgICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VDYWxsYmFjayhjYWxsYmFjaywgZGVwcyk7CiAgICAgIH07CiAgICAgIGV4cG9ydHMudXNlQ29udGV4dCA9IGZ1bmN0aW9uKENvbnRleHQpIHsKICAgICAgICB2YXIgZGlzcGF0Y2hlciA9IHJlc29sdmVEaXNwYXRjaGVyKCk7CiAgICAgICAgQ29udGV4dC4kJHR5cGVvZiA9PT0gUkVBQ1RfQ09OU1VNRVJfVFlQRSAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgIkNhbGxpbmcgdXNlQ29udGV4dChDb250ZXh0LkNvbnN1bWVyKSBpcyBub3Qgc3VwcG9ydGVkIGFuZCB3aWxsIGNhdXNlIGJ1Z3MuIERpZCB5b3UgbWVhbiB0byBjYWxsIHVzZUNvbnRleHQoQ29udGV4dCkgaW5zdGVhZD8iCiAgICAgICAgKTsKICAgICAgICByZXR1cm4gZGlzcGF0Y2hlci51c2VDb250ZXh0KENvbnRleHQpOwogICAgICB9OwogICAgICBleHBvcnRzLnVzZURlYnVnVmFsdWUgPSBmdW5jdGlvbih2YWx1ZSwgZm9ybWF0dGVyRm4pIHsKICAgICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VEZWJ1Z1ZhbHVlKHZhbHVlLCBmb3JtYXR0ZXJGbik7CiAgICAgIH07CiAgICAgIGV4cG9ydHMudXNlRGVmZXJyZWRWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlLCBpbml0aWFsVmFsdWUpIHsKICAgICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VEZWZlcnJlZFZhbHVlKHZhbHVlLCBpbml0aWFsVmFsdWUpOwogICAgICB9OwogICAgICBleHBvcnRzLnVzZUVmZmVjdCA9IGZ1bmN0aW9uKGNyZWF0ZSwgY3JlYXRlRGVwcywgdXBkYXRlKSB7CiAgICAgICAgbnVsbCA9PSBjcmVhdGUgJiYgY29uc29sZS53YXJuKAogICAgICAgICAgIlJlYWN0IEhvb2sgdXNlRWZmZWN0IHJlcXVpcmVzIGFuIGVmZmVjdCBjYWxsYmFjay4gRGlkIHlvdSBmb3JnZXQgdG8gcGFzcyBhIGNhbGxiYWNrIHRvIHRoZSBob29rPyIKICAgICAgICApOwogICAgICAgIHZhciBkaXNwYXRjaGVyID0gcmVzb2x2ZURpc3BhdGNoZXIoKTsKICAgICAgICBpZiAoImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHVwZGF0ZSkKICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAidXNlRWZmZWN0IENSVUQgb3ZlcmxvYWQgaXMgbm90IGVuYWJsZWQgaW4gdGhpcyBidWlsZCBvZiBSZWFjdC4iCiAgICAgICAgICApOwogICAgICAgIHJldHVybiBkaXNwYXRjaGVyLnVzZUVmZmVjdChjcmVhdGUsIGNyZWF0ZURlcHMpOwogICAgICB9OwogICAgICBleHBvcnRzLnVzZUlkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlSWQoKTsKICAgICAgfTsKICAgICAgZXhwb3J0cy51c2VJbXBlcmF0aXZlSGFuZGxlID0gZnVuY3Rpb24ocmVmLCBjcmVhdGUsIGRlcHMpIHsKICAgICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgY3JlYXRlLCBkZXBzKTsKICAgICAgfTsKICAgICAgZXhwb3J0cy51c2VJbnNlcnRpb25FZmZlY3QgPSBmdW5jdGlvbihjcmVhdGUsIGRlcHMpIHsKICAgICAgICBudWxsID09IGNyZWF0ZSAmJiBjb25zb2xlLndhcm4oCiAgICAgICAgICAiUmVhY3QgSG9vayB1c2VJbnNlcnRpb25FZmZlY3QgcmVxdWlyZXMgYW4gZWZmZWN0IGNhbGxiYWNrLiBEaWQgeW91IGZvcmdldCB0byBwYXNzIGEgY2FsbGJhY2sgdG8gdGhlIGhvb2s/IgogICAgICAgICk7CiAgICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlSW5zZXJ0aW9uRWZmZWN0KGNyZWF0ZSwgZGVwcyk7CiAgICAgIH07CiAgICAgIGV4cG9ydHMudXNlTGF5b3V0RWZmZWN0ID0gZnVuY3Rpb24oY3JlYXRlLCBkZXBzKSB7CiAgICAgICAgbnVsbCA9PSBjcmVhdGUgJiYgY29uc29sZS53YXJuKAogICAgICAgICAgIlJlYWN0IEhvb2sgdXNlTGF5b3V0RWZmZWN0IHJlcXVpcmVzIGFuIGVmZmVjdCBjYWxsYmFjay4gRGlkIHlvdSBmb3JnZXQgdG8gcGFzcyBhIGNhbGxiYWNrIHRvIHRoZSBob29rPyIKICAgICAgICApOwogICAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZUxheW91dEVmZmVjdChjcmVhdGUsIGRlcHMpOwogICAgICB9OwogICAgICBleHBvcnRzLnVzZU1lbW8gPSBmdW5jdGlvbihjcmVhdGUsIGRlcHMpIHsKICAgICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VNZW1vKGNyZWF0ZSwgZGVwcyk7CiAgICAgIH07CiAgICAgIGV4cG9ydHMudXNlT3B0aW1pc3RpYyA9IGZ1bmN0aW9uKHBhc3N0aHJvdWdoLCByZWR1Y2VyKSB7CiAgICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlT3B0aW1pc3RpYyhwYXNzdGhyb3VnaCwgcmVkdWNlcik7CiAgICAgIH07CiAgICAgIGV4cG9ydHMudXNlUmVkdWNlciA9IGZ1bmN0aW9uKHJlZHVjZXIsIGluaXRpYWxBcmcsIGluaXQpIHsKICAgICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VSZWR1Y2VyKHJlZHVjZXIsIGluaXRpYWxBcmcsIGluaXQpOwogICAgICB9OwogICAgICBleHBvcnRzLnVzZVJlZiA9IGZ1bmN0aW9uKGluaXRpYWxWYWx1ZSkgewogICAgICAgIHJldHVybiByZXNvbHZlRGlzcGF0Y2hlcigpLnVzZVJlZihpbml0aWFsVmFsdWUpOwogICAgICB9OwogICAgICBleHBvcnRzLnVzZVN0YXRlID0gZnVuY3Rpb24oaW5pdGlhbFN0YXRlKSB7CiAgICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlU3RhdGUoaW5pdGlhbFN0YXRlKTsKICAgICAgfTsKICAgICAgZXhwb3J0cy51c2VTeW5jRXh0ZXJuYWxTdG9yZSA9IGZ1bmN0aW9uKHN1YnNjcmliZSwgZ2V0U25hcHNob3QsIGdldFNlcnZlclNuYXBzaG90KSB7CiAgICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlU3luY0V4dGVybmFsU3RvcmUoCiAgICAgICAgICBzdWJzY3JpYmUsCiAgICAgICAgICBnZXRTbmFwc2hvdCwKICAgICAgICAgIGdldFNlcnZlclNuYXBzaG90CiAgICAgICAgKTsKICAgICAgfTsKICAgICAgZXhwb3J0cy51c2VUcmFuc2l0aW9uID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlVHJhbnNpdGlvbigpOwogICAgICB9OwogICAgICBleHBvcnRzLnZlcnNpb24gPSAiMTkuMS4xIjsKICAgICAgInVuZGVmaW5lZCIgIT09IHR5cGVvZiBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18gJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5yZWdpc3RlckludGVybmFsTW9kdWxlU3RvcCAmJiBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18ucmVnaXN0ZXJJbnRlcm5hbE1vZHVsZVN0b3AoRXJyb3IoKSk7CiAgICB9KSgpOwogIH0KfSk7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QvaW5kZXguanMKdmFyIHJlcXVpcmVfcmVhY3QgPSBfX2NvbW1vbkpTKHsKICAiLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0L2luZGV4LmpzIihleHBvcnRzLCBtb2R1bGUpIHsKICAgIGlmIChmYWxzZSkgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IG51bGw7CiAgICB9IGVsc2UgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmVfcmVhY3RfZGV2ZWxvcG1lbnQoKTsKICAgIH0KICB9Cn0pOwoKZXhwb3J0IHsKICByZXF1aXJlX3JlYWN0Cn07Ci8qISBCdW5kbGVkIGxpY2Vuc2UgaW5mb3JtYXRpb246CgpyZWFjdC9janMvcmVhY3QuZGV2ZWxvcG1lbnQuanM6CiAgKCoqCiAgICogQGxpY2Vuc2UgUmVhY3QKICAgKiByZWFjdC5kZXZlbG9wbWVudC5qcwogICAqCiAgICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy4KICAgKgogICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZQogICAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4KICAgKikKKi8KLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2h1bmstUUpZS1VLQUwuanMubWFwCg==",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 43651
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 7,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.437Z",
        "time": 6,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/node_modules/.vite/deps/chunk-4MBMRILA.js?v=0bb69d73",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/node_modules/.vite/deps/react.js?v=0bb69d73"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [
            {
              "name": "v",
              "value": "0bb69d73"
            }
          ],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "max-age=31536000,immutable"
            },
            {
              "name": "etag",
              "value": "W/\"9f7-gcFvZZbj6z0i3lRHjH57rTkDVpY\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "13346"
            }
          ],
          "content": {
            "size": 13346,
            "mimeType": "text/javascript",
            "text": "dmFyIF9fY3JlYXRlID0gT2JqZWN0LmNyZWF0ZTsKdmFyIF9fZGVmUHJvcCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTsKdmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOwp2YXIgX19nZXRPd25Qcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lczsKdmFyIF9fZ2V0UHJvdG9PZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjsKdmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7CnZhciBfX3R5cGVFcnJvciA9IChtc2cpID0+IHsKICB0aHJvdyBUeXBlRXJyb3IobXNnKTsKfTsKdmFyIF9fY29tbW9uSlMgPSAoY2IsIG1vZCkgPT4gZnVuY3Rpb24gX19yZXF1aXJlKCkgewogIHJldHVybiBtb2QgfHwgKDAsIGNiW19fZ2V0T3duUHJvcE5hbWVzKGNiKVswXV0pKChtb2QgPSB7IGV4cG9ydHM6IHt9IH0pLmV4cG9ydHMsIG1vZCksIG1vZC5leHBvcnRzOwp9Owp2YXIgX19leHBvcnQgPSAodGFyZ2V0LCBhbGwpID0+IHsKICBmb3IgKHZhciBuYW1lIGluIGFsbCkKICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7Cn07CnZhciBfX2NvcHlQcm9wcyA9ICh0bywgZnJvbSwgZXhjZXB0LCBkZXNjKSA9PiB7CiAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09ICJvYmplY3QiIHx8IHR5cGVvZiBmcm9tID09PSAiZnVuY3Rpb24iKSB7CiAgICBmb3IgKGxldCBrZXkgb2YgX19nZXRPd25Qcm9wTmFtZXMoZnJvbSkpCiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpCiAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pOwogIH0KICByZXR1cm4gdG87Cn07CnZhciBfX3RvRVNNID0gKG1vZCwgaXNOb2RlTW9kZSwgdGFyZ2V0KSA9PiAodGFyZ2V0ID0gbW9kICE9IG51bGwgPyBfX2NyZWF0ZShfX2dldFByb3RvT2YobW9kKSkgOiB7fSwgX19jb3B5UHJvcHMoCiAgLy8gSWYgdGhlIGltcG9ydGVyIGlzIGluIG5vZGUgY29tcGF0aWJpbGl0eSBtb2RlIG9yIHRoaXMgaXMgbm90IGFuIEVTTQogIC8vIGZpbGUgdGhhdCBoYXMgYmVlbiBjb252ZXJ0ZWQgdG8gYSBDb21tb25KUyBmaWxlIHVzaW5nIGEgQmFiZWwtCiAgLy8gY29tcGF0aWJsZSB0cmFuc2Zvcm0gKGkuZS4gIl9fZXNNb2R1bGUiIGhhcyBub3QgYmVlbiBzZXQpLCB0aGVuIHNldAogIC8vICJkZWZhdWx0IiB0byB0aGUgQ29tbW9uSlMgIm1vZHVsZS5leHBvcnRzIiBmb3Igbm9kZSBjb21wYXRpYmlsaXR5LgogIGlzTm9kZU1vZGUgfHwgIW1vZCB8fCAhbW9kLl9fZXNNb2R1bGUgPyBfX2RlZlByb3AodGFyZ2V0LCAiZGVmYXVsdCIsIHsgdmFsdWU6IG1vZCwgZW51bWVyYWJsZTogdHJ1ZSB9KSA6IHRhcmdldCwKICBtb2QKKSk7CnZhciBfX2FjY2Vzc0NoZWNrID0gKG9iaiwgbWVtYmVyLCBtc2cpID0+IG1lbWJlci5oYXMob2JqKSB8fCBfX3R5cGVFcnJvcigiQ2Fubm90ICIgKyBtc2cpOwp2YXIgX19wcml2YXRlR2V0ID0gKG9iaiwgbWVtYmVyLCBnZXR0ZXIpID0+IChfX2FjY2Vzc0NoZWNrKG9iaiwgbWVtYmVyLCAicmVhZCBmcm9tIHByaXZhdGUgZmllbGQiKSwgZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IG1lbWJlci5nZXQob2JqKSk7CnZhciBfX3ByaXZhdGVBZGQgPSAob2JqLCBtZW1iZXIsIHZhbHVlKSA9PiBtZW1iZXIuaGFzKG9iaikgPyBfX3R5cGVFcnJvcigiQ2Fubm90IGFkZCB0aGUgc2FtZSBwcml2YXRlIG1lbWJlciBtb3JlIHRoYW4gb25jZSIpIDogbWVtYmVyIGluc3RhbmNlb2YgV2Vha1NldCA/IG1lbWJlci5hZGQob2JqKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7CnZhciBfX3ByaXZhdGVTZXQgPSAob2JqLCBtZW1iZXIsIHZhbHVlLCBzZXR0ZXIpID0+IChfX2FjY2Vzc0NoZWNrKG9iaiwgbWVtYmVyLCAid3JpdGUgdG8gcHJpdmF0ZSBmaWVsZCIpLCBzZXR0ZXIgPyBzZXR0ZXIuY2FsbChvYmosIHZhbHVlKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSksIHZhbHVlKTsKdmFyIF9fcHJpdmF0ZU1ldGhvZCA9IChvYmosIG1lbWJlciwgbWV0aG9kKSA9PiAoX19hY2Nlc3NDaGVjayhvYmosIG1lbWJlciwgImFjY2VzcyBwcml2YXRlIG1ldGhvZCIpLCBtZXRob2QpOwp2YXIgX19wcml2YXRlV3JhcHBlciA9IChvYmosIG1lbWJlciwgc2V0dGVyLCBnZXR0ZXIpID0+ICh7CiAgc2V0IF8odmFsdWUpIHsKICAgIF9fcHJpdmF0ZVNldChvYmosIG1lbWJlciwgdmFsdWUsIHNldHRlcik7CiAgfSwKICBnZXQgXygpIHsKICAgIHJldHVybiBfX3ByaXZhdGVHZXQob2JqLCBtZW1iZXIsIGdldHRlcik7CiAgfQp9KTsKCmV4cG9ydCB7CiAgX19jb21tb25KUywKICBfX2V4cG9ydCwKICBfX3RvRVNNLAogIF9fcHJpdmF0ZUdldCwKICBfX3ByaXZhdGVBZGQsCiAgX19wcml2YXRlU2V0LAogIF9fcHJpdmF0ZU1ldGhvZCwKICBfX3ByaXZhdGVXcmFwcGVyCn07CgovLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiSW1Ob2RXNXJMVFJOUWsxU1NVeEJMbXB6UDNZOU1HSmlOamxrTnpNaVhTd2ljMjkxY21ObGMwTnZiblJsYm5RaU9sc2lkbUZ5SUY5ZlkzSmxZWFJsSUQwZ1QySnFaV04wTG1OeVpXRjBaVHRjYm5aaGNpQmZYMlJsWmxCeWIzQWdQU0JQWW1wbFkzUXVaR1ZtYVc1bFVISnZjR1Z5ZEhrN1hHNTJZWElnWDE5blpYUlBkMjVRY205d1JHVnpZeUE5SUU5aWFtVmpkQzVuWlhSUGQyNVFjbTl3WlhKMGVVUmxjMk55YVhCMGIzSTdYRzUyWVhJZ1gxOW5aWFJQZDI1UWNtOXdUbUZ0WlhNZ1BTQlBZbXBsWTNRdVoyVjBUM2R1VUhKdmNHVnlkSGxPWVcxbGN6dGNiblpoY2lCZlgyZGxkRkJ5YjNSdlQyWWdQU0JQWW1wbFkzUXVaMlYwVUhKdmRHOTBlWEJsVDJZN1hHNTJZWElnWDE5b1lYTlBkMjVRY205d0lEMGdUMkpxWldOMExuQnliM1J2ZEhsd1pTNW9ZWE5QZDI1UWNtOXdaWEowZVR0Y2JuWmhjaUJmWDNSNWNHVkZjbkp2Y2lBOUlDaHRjMmNwSUQwK0lIdGNiaUFnZEdoeWIzY2dWSGx3WlVWeWNtOXlLRzF6WnlrN1hHNTlPMXh1ZG1GeUlGOWZZMjl0Ylc5dVNsTWdQU0FvWTJJc0lHMXZaQ2tnUFQ0Z1puVnVZM1JwYjI0Z1gxOXlaWEYxYVhKbEtDa2dlMXh1SUNCeVpYUjFjbTRnYlc5a0lIeDhJQ2d3TENCallsdGZYMmRsZEU5M2JsQnliM0JPWVcxbGN5aGpZaWxiTUYxZEtTZ29iVzlrSUQwZ2V5QmxlSEJ2Y25Sek9pQjdmU0I5S1M1bGVIQnZjblJ6TENCdGIyUXBMQ0J0YjJRdVpYaHdiM0owY3p0Y2JuMDdYRzUyWVhJZ1gxOWxlSEJ2Y25RZ1BTQW9kR0Z5WjJWMExDQmhiR3dwSUQwK0lIdGNiaUFnWm05eUlDaDJZWElnYm1GdFpTQnBiaUJoYkd3cFhHNGdJQ0FnWDE5a1pXWlFjbTl3S0hSaGNtZGxkQ3dnYm1GdFpTd2dleUJuWlhRNklHRnNiRnR1WVcxbFhTd2daVzUxYldWeVlXSnNaVG9nZEhKMVpTQjlLVHRjYm4wN1hHNTJZWElnWDE5amIzQjVVSEp2Y0hNZ1BTQW9kRzhzSUdaeWIyMHNJR1Y0WTJWd2RDd2daR1Z6WXlrZ1BUNGdlMXh1SUNCcFppQW9abkp2YlNBbUppQjBlWEJsYjJZZ1puSnZiU0E5UFQwZ1hDSnZZbXBsWTNSY0lpQjhmQ0IwZVhCbGIyWWdabkp2YlNBOVBUMGdYQ0ptZFc1amRHbHZibHdpS1NCN1hHNGdJQ0FnWm05eUlDaHNaWFFnYTJWNUlHOW1JRjlmWjJWMFQzZHVVSEp2Y0U1aGJXVnpLR1p5YjIwcEtWeHVJQ0FnSUNBZ2FXWWdLQ0ZmWDJoaGMwOTNibEJ5YjNBdVkyRnNiQ2gwYnl3Z2EyVjVLU0FtSmlCclpYa2dJVDA5SUdWNFkyVndkQ2xjYmlBZ0lDQWdJQ0FnWDE5a1pXWlFjbTl3S0hSdkxDQnJaWGtzSUhzZ1oyVjBPaUFvS1NBOVBpQm1jbTl0VzJ0bGVWMHNJR1Z1ZFcxbGNtRmliR1U2SUNFb1pHVnpZeUE5SUY5ZloyVjBUM2R1VUhKdmNFUmxjMk1vWm5KdmJTd2dhMlY1S1NrZ2ZId2daR1Z6WXk1bGJuVnRaWEpoWW14bElIMHBPMXh1SUNCOVhHNGdJSEpsZEhWeWJpQjBienRjYm4wN1hHNTJZWElnWDE5MGIwVlRUU0E5SUNodGIyUXNJR2x6VG05a1pVMXZaR1VzSUhSaGNtZGxkQ2tnUFQ0Z0tIUmhjbWRsZENBOUlHMXZaQ0FoUFNCdWRXeHNJRDhnWDE5amNtVmhkR1VvWDE5blpYUlFjbTkwYjA5bUtHMXZaQ2twSURvZ2UzMHNJRjlmWTI5d2VWQnliM0J6S0Z4dUlDQXZMeUJKWmlCMGFHVWdhVzF3YjNKMFpYSWdhWE1nYVc0Z2JtOWtaU0JqYjIxd1lYUnBZbWxzYVhSNUlHMXZaR1VnYjNJZ2RHaHBjeUJwY3lCdWIzUWdZVzRnUlZOTlhHNGdJQzh2SUdacGJHVWdkR2hoZENCb1lYTWdZbVZsYmlCamIyNTJaWEowWldRZ2RHOGdZU0JEYjIxdGIyNUtVeUJtYVd4bElIVnphVzVuSUdFZ1FtRmlaV3d0WEc0Z0lDOHZJR052YlhCaGRHbGliR1VnZEhKaGJuTm1iM0p0SUNocExtVXVJRndpWDE5bGMwMXZaSFZzWlZ3aUlHaGhjeUJ1YjNRZ1ltVmxiaUJ6WlhRcExDQjBhR1Z1SUhObGRGeHVJQ0F2THlCY0ltUmxabUYxYkhSY0lpQjBieUIwYUdVZ1EyOXRiVzl1U2xNZ1hDSnRiMlIxYkdVdVpYaHdiM0owYzF3aUlHWnZjaUJ1YjJSbElHTnZiWEJoZEdsaWFXeHBkSGt1WEc0Z0lHbHpUbTlrWlUxdlpHVWdmSHdnSVcxdlpDQjhmQ0FoYlc5a0xsOWZaWE5OYjJSMWJHVWdQeUJmWDJSbFpsQnliM0FvZEdGeVoyVjBMQ0JjSW1SbFptRjFiSFJjSWl3Z2V5QjJZV3gxWlRvZ2JXOWtMQ0JsYm5WdFpYSmhZbXhsT2lCMGNuVmxJSDBwSURvZ2RHRnlaMlYwTEZ4dUlDQnRiMlJjYmlrcE8xeHVkbUZ5SUY5ZllXTmpaWE56UTJobFkyc2dQU0FvYjJKcUxDQnRaVzFpWlhJc0lHMXpaeWtnUFQ0Z2JXVnRZbVZ5TG1oaGN5aHZZbW9wSUh4OElGOWZkSGx3WlVWeWNtOXlLRndpUTJGdWJtOTBJRndpSUNzZ2JYTm5LVHRjYm5aaGNpQmZYM0J5YVhaaGRHVkhaWFFnUFNBb2IySnFMQ0J0WlcxaVpYSXNJR2RsZEhSbGNpa2dQVDRnS0Y5ZllXTmpaWE56UTJobFkyc29iMkpxTENCdFpXMWlaWElzSUZ3aWNtVmhaQ0JtY205dElIQnlhWFpoZEdVZ1ptbGxiR1JjSWlrc0lHZGxkSFJsY2lBL0lHZGxkSFJsY2k1allXeHNLRzlpYWlrZ09pQnRaVzFpWlhJdVoyVjBLRzlpYWlrcE8xeHVkbUZ5SUY5ZmNISnBkbUYwWlVGa1pDQTlJQ2h2WW1vc0lHMWxiV0psY2l3Z2RtRnNkV1VwSUQwK0lHMWxiV0psY2k1b1lYTW9iMkpxS1NBL0lGOWZkSGx3WlVWeWNtOXlLRndpUTJGdWJtOTBJR0ZrWkNCMGFHVWdjMkZ0WlNCd2NtbDJZWFJsSUcxbGJXSmxjaUJ0YjNKbElIUm9ZVzRnYjI1alpWd2lLU0E2SUcxbGJXSmxjaUJwYm5OMFlXNWpaVzltSUZkbFlXdFRaWFFnUHlCdFpXMWlaWEl1WVdSa0tHOWlhaWtnT2lCdFpXMWlaWEl1YzJWMEtHOWlhaXdnZG1Gc2RXVXBPMXh1ZG1GeUlGOWZjSEpwZG1GMFpWTmxkQ0E5SUNodlltb3NJRzFsYldKbGNpd2dkbUZzZFdVc0lITmxkSFJsY2lrZ1BUNGdLRjlmWVdOalpYTnpRMmhsWTJzb2IySnFMQ0J0WlcxaVpYSXNJRndpZDNKcGRHVWdkRzhnY0hKcGRtRjBaU0JtYVdWc1pGd2lLU3dnYzJWMGRHVnlJRDhnYzJWMGRHVnlMbU5oYkd3b2IySnFMQ0IyWVd4MVpTa2dPaUJ0WlcxaVpYSXVjMlYwS0c5aWFpd2dkbUZzZFdVcExDQjJZV3gxWlNrN1hHNTJZWElnWDE5d2NtbDJZWFJsVFdWMGFHOWtJRDBnS0c5aWFpd2diV1Z0WW1WeUxDQnRaWFJvYjJRcElEMCtJQ2hmWDJGalkyVnpjME5vWldOcktHOWlhaXdnYldWdFltVnlMQ0JjSW1GalkyVnpjeUJ3Y21sMllYUmxJRzFsZEdodlpGd2lLU3dnYldWMGFHOWtLVHRjYm5aaGNpQmZYM0J5YVhaaGRHVlhjbUZ3Y0dWeUlEMGdLRzlpYWl3Z2JXVnRZbVZ5TENCelpYUjBaWElzSUdkbGRIUmxjaWtnUFQ0Z0tIdGNiaUFnYzJWMElGOG9kbUZzZFdVcElIdGNiaUFnSUNCZlgzQnlhWFpoZEdWVFpYUW9iMkpxTENCdFpXMWlaWElzSUhaaGJIVmxMQ0J6WlhSMFpYSXBPMXh1SUNCOUxGeHVJQ0JuWlhRZ1h5Z3BJSHRjYmlBZ0lDQnlaWFIxY200Z1gxOXdjbWwyWVhSbFIyVjBLRzlpYWl3Z2JXVnRZbVZ5TENCblpYUjBaWElwTzF4dUlDQjlYRzU5S1R0Y2JseHVaWGh3YjNKMElIdGNiaUFnWDE5amIyMXRiMjVLVXl4Y2JpQWdYMTlsZUhCdmNuUXNYRzRnSUY5ZmRHOUZVMDBzWEc0Z0lGOWZjSEpwZG1GMFpVZGxkQ3hjYmlBZ1gxOXdjbWwyWVhSbFFXUmtMRnh1SUNCZlgzQnlhWFpoZEdWVFpYUXNYRzRnSUY5ZmNISnBkbUYwWlUxbGRHaHZaQ3hjYmlBZ1gxOXdjbWwyWVhSbFYzSmhjSEJsY2x4dWZUdGNiaUpkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZCUVN4SFFVRkhMRU5CUVVNc1VVRkJVU3hEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNUVUZCVFR0QlFVTTFRaXhIUVVGSExFTkJRVU1zVTBGQlV5eERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1kwRkJZenRCUVVOeVF5eEhRVUZITEVOQlFVTXNaMEpCUVdkQ0xFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4M1FrRkJkMEk3UVVGRGRFUXNSMEZCUnl4RFFVRkRMR2xDUVVGcFFpeERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc2JVSkJRVzFDTzBGQlEyeEVMRWRCUVVjc1EwRkJReXhaUVVGWkxFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4alFVRmpPMEZCUTNoRExFZEJRVWNzUTBGQlF5eFpRVUZaTEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhUUVVGVExFTkJRVU1zWTBGQll6dEJRVU5zUkN4SFFVRkhMRU5CUVVNc1YwRkJWeXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRek5DTEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1UwRkJVeXhEUVVGRExFZEJRVWNzUTBGQlF6dEJRVU4wUWl4RFFVRkRPMEZCUTBRc1IwRkJSeXhEUVVGRExGVkJRVlVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UlFVRlJMRU5CUVVNc1UwRkJVeXhEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU51UkN4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzUTBGQlF5eHBRa0ZCYVVJc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4UFFVRlBPMEZCUTNCSExFTkJRVU03UVVGRFJDeEhRVUZITEVOQlFVTXNVVUZCVVN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wRkJRMmhETEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zU1VGQlNTeERRVUZETEVWQlFVVXNRMEZCUXl4SFFVRkhPMEZCUTNSQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNVMEZCVXl4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXl4VlFVRlZMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETzBGQlEycEZMRU5CUVVNN1FVRkRSQ3hIUVVGSExFTkJRVU1zVjBGQlZ5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBGQlF6bERMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNVVUZCVVN4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOMFJTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eEhRVUZITEVOQlFVTXNSVUZCUlN4RFFVRkRMR2xDUVVGcFFpeERRVUZETEVsQlFVa3NRMEZCUXp0QlFVTXpReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRExGbEJRVmtzUTBGQlF5eEpRVUZKTEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRUdEJRVU4yUkN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNVMEZCVXl4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU1zUTBGQlF5eFZRVUZWTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF5eG5Ra0ZCWjBJc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eFZRVUZWTEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUXpGSUxFTkJRVU1zUTBGQlF6dEJRVU5HTEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1JVRkJSVHRCUVVOWUxFTkJRVU03UVVGRFJDeEhRVUZITEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEZWQlFWVXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhSUVVGUkxFTkJRVU1zV1VGQldTeERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNWMEZCVnp0QlFVTm9TQ3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4RFFVRkRMRWRCUVVjc1EwRkJReXhSUVVGUkxFTkJRVU1zUlVGQlJTeERRVUZETEVWQlFVVXNRMEZCUXl4SlFVRkpMRU5CUVVNc1lVRkJZU3hEUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVTXNTVUZCU1N4RFFVRkRMRVZCUVVVc1EwRkJReXhIUVVGSExFTkJRVU1zUlVGQlJTeERRVUZETzBGQlEzSkZMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWRCUVVjc1EwRkJReXhKUVVGSkxFTkJRVU1zVTBGQlV5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1VVRkJVU3hEUVVGRExFbEJRVWtzUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzN1FVRkRiRVVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRlZCUVZVc1EwRkJReXhUUVVGVExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNSMEZCUnl4RFFVRkRMRWxCUVVrc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXp0QlFVTnlSU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhGUVVGRkxFTkJRVU1zUjBGQlJ5eERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNTVUZCU1N4RFFVRkRMR0ZCUVdFN1FVRkRkRVVzUTBGQlF5eERRVUZETEZWQlFWVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF5eERRVUZETEZOQlFWTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEZWQlFWVXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFR0QlFVTnFTQ3hEUVVGRExFTkJRVU03UVVGRFJpeERRVUZETEVOQlFVTTdRVUZEUml4SFFVRkhMRU5CUVVNc1lVRkJZU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhIUVVGSExFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1YwRkJWeXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRE8wRkJRM3BHTEVkQlFVY3NRMEZCUXl4WlFVRlpMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4aFFVRmhMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFOUJRVThzUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNSMEZCUnl4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRE8wRkJRMmhLTEVkQlFVY3NRMEZCUXl4WlFVRlpMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRWRCUVVjc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNWMEZCVnl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFZEJRVWNzUTBGQlF5eEhRVUZITEVOQlFVTXNTVUZCU1N4RFFVRkRMRTlCUVU4c1EwRkJReXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNWVUZCVlN4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVkQlFVY3NRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVkQlFVY3NRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU03UVVGRGNFMHNSMEZCUnl4RFFVRkRMRmxCUVZrc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExHRkJRV0VzUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eEZRVUZGTEVOQlFVTXNUMEZCVHl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eEhRVUZITEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTTdRVUZETTBzc1IwRkJSeXhEUVVGRExHVkJRV1VzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExHRkJRV0VzUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eFBRVUZQTEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF6dEJRVU0xUnl4SFFVRkhMRU5CUVVNc1owSkJRV2RDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTjZSQ3hEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJRenRCUVVObUxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNXVUZCV1N4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJRenRCUVVNMVF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTklMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0QlFVTldMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEZsQlFWa3NRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTTdRVUZETlVNc1EwRkJReXhEUVVGRE8wRkJRMFlzUTBGQlF5eERRVUZET3p0QlFVVkdMRTFCUVUwc1EwRkJRenRCUVVOUUxFTkJRVU1zUTBGQlF5eFZRVUZWTzBGQlExb3NRMEZCUXl4RFFVRkRMRkZCUVZFN1FVRkRWaXhEUVVGRExFTkJRVU1zVDBGQlR6dEJRVU5VTEVOQlFVTXNRMEZCUXl4WlFVRlpPMEZCUTJRc1EwRkJReXhEUVVGRExGbEJRVms3UVVGRFpDeERRVUZETEVOQlFVTXNXVUZCV1R0QlFVTmtMRU5CUVVNc1EwRkJReXhsUVVGbE8wRkJRMnBDTEVOQlFVTXNRMEZCUXp0QlFVTkdMRU5CUVVNN0luMD0=",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 13346
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 6,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.476Z",
        "time": 30,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/hooks/use-movies.ts",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/App.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"81b-hjm4szVPYH9TC1CW95ZhJeFROo0\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "12142"
            }
          ],
          "content": {
            "size": 12142,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsKICB1c2VNdXRhdGlvbiwKICB1c2VRdWVyeSwKICB1c2VRdWVyeUNsaWVudCwKICB1c2VTdXNwZW5zZVF1ZXJ5Cn0gZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL0B0YW5zdGFja19yZWFjdC1xdWVyeS5qcz92PTBiYjY5ZDczIjsKaW1wb3J0IHsKICBnZXRNb3ZpZXMsCiAgYWRkTW92aWUsCiAgZGVsZXRlTW92aWVCeUlkLAogIGdldE1vdmllQnlJZCwKICBnZXRNb3ZpZUJ5TmFtZSwKICB1cGRhdGVNb3ZpZQp9IGZyb20gIi9zcmMvY29uc3VtZXIudHMiOwpleHBvcnQgY29uc3QgdXNlTW92aWVzID0gKCkgPT4gdXNlU3VzcGVuc2VRdWVyeSh7CiAgcXVlcnlLZXk6IFsibW92aWVzIl0sCiAgcXVlcnlGbjogZ2V0TW92aWVzLAogIHN0YWxlVGltZTogNWUzLAogIC8vIGRhdGEgY29uc2lkZXJlZCBmcmVzaCBmb3IgNSBzZWNvbmRzCiAgcmV0cnk6IDIKICAvLyByZXRyeSBmYWlsZWQgcmVxdWVzdHMgdXAgdG8gMiB0aW1lcwp9KTsKZXhwb3J0IGNvbnN0IHVzZU1vdmllID0gKGlkZW50aWZpZXIpID0+IHVzZVF1ZXJ5KHsKICBxdWVyeUtleTogWyJtb3ZpZSIsIGlkZW50aWZpZXJdLAogIHF1ZXJ5Rm46ICgpID0+IHsKICAgIGlmICghaWRlbnRpZmllcikgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTsKICAgIGNvbnN0IGlzTnVtZXJpY09ubHkgPSAvXlxkKyQvLnRlc3QoU3RyaW5nKGlkZW50aWZpZXIpKTsKICAgIHJldHVybiBpc051bWVyaWNPbmx5ID8gZ2V0TW92aWVCeUlkKE51bWJlcihpZGVudGlmaWVyKSkgOiBnZXRNb3ZpZUJ5TmFtZShTdHJpbmcoaWRlbnRpZmllcikpOwogIH0sCiAgZW5hYmxlZDogISFpZGVudGlmaWVyLAogIC8vIE9ubHkgZW5hYmxlIHRoZSBxdWVyeSB3aGVuIGFuIGlkZW50aWZpZXIgaXMgc2V0CiAgLy8gQnkgZGVmYXVsdCwgUmVhY3QgUXVlcnkgd2lsbCBleGVjdXRlIHRoZSBxdWVyeSBhcyBzb29uIGFzIHRoZSBjb21wb25lbnQgbW91bnRzCiAgLy8gSG93ZXZlciwgaW4gdGhpcyBjYXNlLCB5b3Ugb25seSB3YW50IHRvIGZldGNoIGRhdGEgd2hlbiB0aGVyZeKAmXMgYSB2YWxpZCBpZGVudGlmaWVyIChlaXRoZXIgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgbnVtYmVyKQogIHN0YWxlVGltZTogNWUzLAogIHJldHJ5OiAyCn0pOwpleHBvcnQgY29uc3QgdXNlQWRkTW92aWUgPSAoKSA9PiB7CiAgY29uc3QgcXVlcnlDbGllbnQgPSB1c2VRdWVyeUNsaWVudCgpOwogIHJldHVybiB1c2VNdXRhdGlvbih7CiAgICBtdXRhdGlvbkZuOiAobW92aWUpID0+IGFkZE1vdmllKG1vdmllKSwKICAgIC8vIEludmFsaWRhdGUgY2FjaGUgd2hlbiBhIG5ldyBtb3ZpZSBpcyBhZGRlZAogICAgb25TdWNjZXNzOiAoKSA9PiBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbIm1vdmllcyJdIH0pCiAgfSk7Cn07CmV4cG9ydCBjb25zdCB1c2VVcGRhdGVNb3ZpZSA9ICgpID0+IHsKICBjb25zdCBxdWVyeUNsaWVudCA9IHVzZVF1ZXJ5Q2xpZW50KCk7CiAgcmV0dXJuIHVzZU11dGF0aW9uKHsKICAgIG11dGF0aW9uRm46ICh7CiAgICAgIGlkLAogICAgICBtb3ZpZQogICAgfSkgPT4gdXBkYXRlTW92aWUoaWQsIG1vdmllKSwKICAgIC8vIGhhbmRsZXMgYm90aCBlcnJvciBhbmQgc3VjY2VzcyBzY2VuYXJpb3MKICAgIG9uU2V0dGxlZDogKCkgPT4gcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoeyBxdWVyeUtleTogWyJtb3ZpZXMiXSB9KSwKICAgIC8vIE9wdGlvbmFsOiBIYW5kbGUgZXJyb3JzIGdsb2JhbGx5IGlmIG5lZWRlZAogICAgb25FcnJvcjogKGVycm9yKSA9PiB7CiAgICAgIGNvbnNvbGUuZXJyb3IoIlVwZGF0ZSBmYWlsZWQiLCBlcnJvcik7CiAgICB9CiAgfSk7Cn07CmV4cG9ydCBjb25zdCB1c2VEZWxldGVNb3ZpZSA9ICgpID0+IHsKICBjb25zdCBxdWVyeUNsaWVudCA9IHVzZVF1ZXJ5Q2xpZW50KCk7CiAgcmV0dXJuIHVzZU11dGF0aW9uKHsKICAgIG11dGF0aW9uRm46IChpZCkgPT4gZGVsZXRlTW92aWVCeUlkKGlkKSwKICAgIG9uU3VjY2VzczogKCkgPT4gcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoeyBxdWVyeUtleTogWyJtb3ZpZXMiXSB9KQogIH0pOwp9OwoKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYkluVnpaUzF0YjNacFpYTXVkSE1pWFN3aWMyOTFjbU5sYzBOdmJuUmxiblFpT2xzaWFXMXdiM0owSUh0Y2JpQWdkWE5sVFhWMFlYUnBiMjRzWEc0Z0lIVnpaVkYxWlhKNUxGeHVJQ0IxYzJWUmRXVnllVU5zYVdWdWRDeGNiaUFnZFhObFUzVnpjR1Z1YzJWUmRXVnllVnh1ZlNCbWNtOXRJQ2RBZEdGdWMzUmhZMnN2Y21WaFkzUXRjWFZsY25rblhHNXBiWEJ2Y25RZ2UxeHVJQ0JuWlhSTmIzWnBaWE1zWEc0Z0lHRmtaRTF2ZG1sbExGeHVJQ0JrWld4bGRHVk5iM1pwWlVKNVNXUXNYRzRnSUdkbGRFMXZkbWxsUW5sSlpDeGNiaUFnWjJWMFRXOTJhV1ZDZVU1aGJXVXNYRzRnSUhWd1pHRjBaVTF2ZG1sbFhHNTlJR1p5YjIwZ0p5NHVMMk52Ym5OMWJXVnlKMXh1YVcxd2IzSjBJSFI1Y0dVZ2V5Qk5iM1pwWlNCOUlHWnliMjBnSjBCemFHRnlaV1F2ZEhsd1pYTXZiVzkyYVdVdGRIbHdaWE1uWEc1Y2JtVjRjRzl5ZENCamIyNXpkQ0IxYzJWTmIzWnBaWE1nUFNBb0tTQTlQbHh1SUNCMWMyVlRkWE53Wlc1elpWRjFaWEo1S0h0Y2JpQWdJQ0J4ZFdWeWVVdGxlVG9nV3lkdGIzWnBaWE1uWFN4Y2JpQWdJQ0J4ZFdWeWVVWnVPaUJuWlhSTmIzWnBaWE1zWEc0Z0lDQWdjM1JoYkdWVWFXMWxPaUExTURBd0xDQXZMeUJrWVhSaElHTnZibk5wWkdWeVpXUWdabkpsYzJnZ1ptOXlJRFVnYzJWamIyNWtjMXh1SUNBZ0lISmxkSEo1T2lBeUlDOHZJSEpsZEhKNUlHWmhhV3hsWkNCeVpYRjFaWE4wY3lCMWNDQjBieUF5SUhScGJXVnpYRzRnSUgwcFhHNWNibVY0Y0c5eWRDQmpiMjV6ZENCMWMyVk5iM1pwWlNBOUlDaHBaR1Z1ZEdsbWFXVnlPaUJ1ZFcxaVpYSWdmQ0J6ZEhKcGJtY3BJRDArWEc0Z0lIVnpaVkYxWlhKNUtIdGNiaUFnSUNCeGRXVnllVXRsZVRvZ1d5ZHRiM1pwWlNjc0lHbGtaVzUwYVdacFpYSmRMRnh1SUNBZ0lIRjFaWEo1Um00NklDZ3BJRDArSUh0Y2JpQWdJQ0FnSUdsbUlDZ2hhV1JsYm5ScFptbGxjaWtnY21WMGRYSnVJRkJ5YjIxcGMyVXVjbVZ6YjJ4MlpTaHVkV3hzS1Z4dUlDQWdJQ0FnWTI5dWMzUWdhWE5PZFcxbGNtbGpUMjVzZVNBOUlDOWVYRnhrS3lRdkxuUmxjM1FvVTNSeWFXNW5LR2xrWlc1MGFXWnBaWElwS1Z4dVhHNGdJQ0FnSUNCeVpYUjFjbTRnYVhOT2RXMWxjbWxqVDI1c2VWeHVJQ0FnSUNBZ0lDQS9JR2RsZEUxdmRtbGxRbmxKWkNoT2RXMWlaWElvYVdSbGJuUnBabWxsY2lrcFhHNGdJQ0FnSUNBZ0lEb2daMlYwVFc5MmFXVkNlVTVoYldVb1UzUnlhVzVuS0dsa1pXNTBhV1pwWlhJcEtWeHVJQ0FnSUgwc1hHNGdJQ0FnWlc1aFlteGxaRG9nSVNGcFpHVnVkR2xtYVdWeUxDQXZMeUJQYm14NUlHVnVZV0pzWlNCMGFHVWdjWFZsY25rZ2QyaGxiaUJoYmlCcFpHVnVkR2xtYVdWeUlHbHpJSE5sZEZ4dUlDQWdJQzh2SUVKNUlHUmxabUYxYkhRc0lGSmxZV04wSUZGMVpYSjVJSGRwYkd3Z1pYaGxZM1YwWlNCMGFHVWdjWFZsY25rZ1lYTWdjMjl2YmlCaGN5QjBhR1VnWTI5dGNHOXVaVzUwSUcxdmRXNTBjMXh1SUNBZ0lDOHZJRWh2ZDJWMlpYSXNJR2x1SUhSb2FYTWdZMkZ6WlN3Z2VXOTFJRzl1YkhrZ2QyRnVkQ0IwYnlCbVpYUmphQ0JrWVhSaElIZG9aVzRnZEdobGNtWGlnSmx6SUdFZ2RtRnNhV1FnYVdSbGJuUnBabWxsY2lBb1pXbDBhR1Z5SUdFZ2JtOXVMV1Z0Y0hSNUlITjBjbWx1WnlCdmNpQmhJRzUxYldKbGNpbGNiaUFnSUNCemRHRnNaVlJwYldVNklEVXdNREFzWEc0Z0lDQWdjbVYwY25rNklESmNiaUFnZlNsY2JseHVaWGh3YjNKMElHTnZibk4wSUhWelpVRmtaRTF2ZG1sbElEMGdLQ2tnUFQ0Z2UxeHVJQ0JqYjI1emRDQnhkV1Z5ZVVOc2FXVnVkQ0E5SUhWelpWRjFaWEo1UTJ4cFpXNTBLQ2xjYmx4dUlDQnlaWFIxY200Z2RYTmxUWFYwWVhScGIyNG9lMXh1SUNBZ0lHMTFkR0YwYVc5dVJtNDZJQ2h0YjNacFpUb2dUMjFwZER4TmIzWnBaU3dnSjJsa0p6NHBJRDArSUdGa1pFMXZkbWxsS0cxdmRtbGxLU3hjYmx4dUlDQWdJQzh2SUVsdWRtRnNhV1JoZEdVZ1kyRmphR1VnZDJobGJpQmhJRzVsZHlCdGIzWnBaU0JwY3lCaFpHUmxaRnh1SUNBZ0lHOXVVM1ZqWTJWemN6b2dLQ2tnUFQ0Z2NYVmxjbmxEYkdsbGJuUXVhVzUyWVd4cFpHRjBaVkYxWlhKcFpYTW9leUJ4ZFdWeWVVdGxlVG9nV3lkdGIzWnBaWE1uWFNCOUtWeHVJQ0I5S1Z4dWZWeHVYRzVsZUhCdmNuUWdZMjl1YzNRZ2RYTmxWWEJrWVhSbFRXOTJhV1VnUFNBb0tTQTlQaUI3WEc0Z0lHTnZibk4wSUhGMVpYSjVRMnhwWlc1MElEMGdkWE5sVVhWbGNubERiR2xsYm5Rb0tWeHVYRzRnSUM4dklHNXZkR1U2SUhKbFlXTjBJSEYxWlhKNUlHVjRjR1ZqZEhNZ1lTQnphVzVuYkdVZ1lYSm5kVzFsYm5RZ1ptOXlJSFJvWlNCdGRYUmhkR2x2YmtadVhHNGdJSEpsZEhWeWJpQjFjMlZOZFhSaGRHbHZiaWg3WEc0Z0lDQWdiWFYwWVhScGIyNUdiam9nS0h0Y2JpQWdJQ0FnSUdsa0xGeHVJQ0FnSUNBZ2JXOTJhV1ZjYmlBZ0lDQjlPaUI3WEc0Z0lDQWdJQ0JwWkRvZ2JuVnRZbVZ5WEc0Z0lDQWdJQ0J0YjNacFpUb2dVR0Z5ZEdsaGJEeFBiV2wwUEUxdmRtbGxMQ0FuYVdRblBqNWNiaUFnSUNCOUtTQTlQaUIxY0dSaGRHVk5iM1pwWlNocFpDd2diVzkyYVdVcExGeHVJQ0FnSUM4dklHaGhibVJzWlhNZ1ltOTBhQ0JsY25KdmNpQmhibVFnYzNWalkyVnpjeUJ6WTJWdVlYSnBiM05jYmlBZ0lDQnZibE5sZEhSc1pXUTZJQ2dwSUQwK0lIRjFaWEo1UTJ4cFpXNTBMbWx1ZG1Gc2FXUmhkR1ZSZFdWeWFXVnpLSHNnY1hWbGNubExaWGs2SUZzbmJXOTJhV1Z6SjEwZ2ZTa3NYRzRnSUNBZ0x5OGdUM0IwYVc5dVlXdzZJRWhoYm1Sc1pTQmxjbkp2Y25NZ1oyeHZZbUZzYkhrZ2FXWWdibVZsWkdWa1hHNGdJQ0FnYjI1RmNuSnZjam9nS0dWeWNtOXlLU0E5UGlCN1hHNGdJQ0FnSUNCamIyNXpiMnhsTG1WeWNtOXlLQ2RWY0dSaGRHVWdabUZwYkdWa0p5d2daWEp5YjNJcFhHNGdJQ0FnSUNBdkx5QlBjSFJwYjI1aGJHeDVMQ0JrYVhOd2JHRjVJR0VnZEc5aGMzUWdiM0lnYkc5bklIUm9aU0JsY25KdmNpQnpiMjFsZDJobGNtVmNiaUFnSUNCOVhHNGdJSDBwWEc1OVhHNWNibVY0Y0c5eWRDQmpiMjV6ZENCMWMyVkVaV3hsZEdWTmIzWnBaU0E5SUNncElEMCtJSHRjYmlBZ1kyOXVjM1FnY1hWbGNubERiR2xsYm5RZ1BTQjFjMlZSZFdWeWVVTnNhV1Z1ZENncFhHNWNiaUFnY21WMGRYSnVJSFZ6WlUxMWRHRjBhVzl1S0h0Y2JpQWdJQ0J0ZFhSaGRHbHZia1p1T2lBb2FXUTZJRzUxYldKbGNpa2dQVDRnWkdWc1pYUmxUVzkyYVdWQ2VVbGtLR2xrS1N4Y2JpQWdJQ0J2YmxOMVkyTmxjM002SUNncElEMCtJSEYxWlhKNVEyeHBaVzUwTG1sdWRtRnNhV1JoZEdWUmRXVnlhV1Z6S0hzZ2NYVmxjbmxMWlhrNklGc25iVzkyYVdWekoxMGdmU2xjYmlBZ2ZTbGNibjFjYmx4dUx5cGNibkpsWVdOMExYRjFaWEo1SUdsdUlHRWdiblYwYzJobGJHeGNibHh1UTJGamFHbHVaem9nY21WaFkzUXRjWFZsY25rZ1lYVjBiMjFoZEdsallXeHNlU0JqWVdOb1pYTWdjWFZsY25rZ2NtVnpkV3gwY3l3Z1hHNXlaV1IxWTJsdVp5QjFibTVsWTJWemMyRnllU0J1WlhSM2IzSnJJSEpsY1hWbGMzUnpJR0Z1WkNCcGJYQnliM1pwYm1jZ2NHVnlabTl5YldGdVkyVXVYRzVjYmtGMWRHOXRZWFJwWXlCU1pXWmxkR05vYVc1bk9pQnpkR0ZzWlNCeGRXVnlhV1Z6SUdOaGJpQmlaU0JoZFhSdmJXRjBhV05oYkd4NUlISmxMV1psZEdOb1pXUWdkMmhsYmlCa1lYUmhJRzFwWjJoMElHaGhkbVVnWTJoaGJtZGxaQ3dnWEc1bGJuTjFjbWx1WnlCMGFHRjBJSGx2ZFhJZ1ZVa2dhWE1nWVd4M1lYbHpJR1JwYzNCc1lYbHBibWNnZEdobElHMXZjM1FnZFhBdGRHOHRaR0YwWlNCcGJtWnZjbTFoZEdsdmJpNWNibHh1VVhWbGNtbGxjenBjYmlvZ2NIVnljRzl6WlRvZ2RYTmxaQ0IwYnlCbVpYUmphQ0JrWVhSaExpQlVhR1Y1SUdGeVpTQnBaR1Z0Y0c5MFpXNTBMQ0J0WldGdWFXNW5JSFJvWlhrZ1pHOXU0b0NaZENCamFHRnVaMlVnZEdobElITmxjblpsY2lkeklITjBZWFJsSUhkb1pXNGdZMkZzYkdWa0xseHVLaUJoY21kMWJXVnVkSE02SUhSb1pYa2diV0YwWTJnZ2RHaGxJR1oxYm1OMGFXOXVJSEpsYzNCdmJuTnBZbXhsSUdadmNpQm1aWFJqYUdsdVp5QjBhR1VnWkdGMFlWeHVYRzVOZFhSaGRHbHZibk02WEc0cUlIQjFjbkJ2YzJVNklIVnpaV1FnZEc4Z2JXOWthV1o1SUdSaGRHRWdiMjRnZEdobElITmxjblpsY2lBb1pTNW5MaXdnWTNKbFlYUnBibWNzSUhWd1pHRjBhVzVuTENCa1pXeGxkR2x1WnlCa1lYUmhLUzRnWEc1MGFHVjVJSFI1Y0dsallXeHNlU0JqYUdGdVoyVWdkR2hsSUhObGNuWmxjaWR6SUhOMFlYUmxMbHh1S2lCaGNtZDFiV1Z1ZEhNNklIUm9aU0J0ZFhSaGRHbHZia1p1SUNodmNpQnRkWFJoZEdWQmMzbHVZeUJtYjNJZ1lYTjVibU1nWTJGc2JITXBJSFJoYTJWeklHRnlaM1Z0Wlc1MGN5QmNiblJvWVhRZ2JXRjBZMmdnZEdobElHWjFibU4wYVc5dUlISmxjM0J2Ym5OcFlteGxYRzUwYUdseklHRnNiRzkzY3lCbWIzSWdiVzl5WlNCbWJHVjRhV0pwYkdsMGVTQnBiaUJvYjNjZ1lXNWtJSGRvWlc0Z2RHaGxJRzExZEdGMGFXOXVJR2x6SUdWNFpXTjFkR1ZrTGx4dUtpQnZibE4xWTJObGMzTTZJSGRvWlc0Z1lTQnRkWFJoZEdsdmJpQmpiMjF3YkdWMFpYTWdjM1ZqWTJWemMyWjFiR3g1SUZ4dUtHa3VaUzRzSUhSb1pTQkJVRWtnWTJGc2JDQjNZWE1nYldGa1pTd2dZVzVrSUhSb1pTQnpaWEoyWlhJZ2NtVnpjRzl1WkdWa0lIZHBkR2h2ZFhRZ1pYSnliM0lwTENCdmJsTjFZMk5sYzNNZ2FYTWdkSEpwWjJkbGNtVmtMaUJjYmxSb2FYTWdablZ1WTNScGIyNGdjSEp2ZG1sa1pYTWdZVzRnYjNCd2IzSjBkVzVwZEhrZ2RHOGdjbVZ6Y0c5dVpDQjBieUIwYUdVZ2JYVjBZWFJwYjI3aWdKbHpJSE4xWTJObGMzTXNJRnh1YjJaMFpXNGdZbmtnZFhCa1lYUnBibWNnZEdobElITjBZWFJsSUc5eUlHTmhZMmhsSUhSdklISmxabXhsWTNRZ2RHaGxJRzVsZHlCa1lYUmhMbHh1WEc0dExTMHRMUzB0TFMwdExTMHRYRzVNYjI1blpYSWdkbVZ5YzJsdmJseHVYRzV5WldGamRDMXhkV1Z5ZVNBb2RHRnVjM1JoWTJzdGNYVmxjbmtwSUc5bVptVnljeUJoSUhkcFpHVWdjbUZ1WjJVZ2IyWWdkWFJwYkdsMGFXVnpJR0Z1WkNCbWRXNWpkR2x2Ym5NZ1hHNTBhR0YwSUdobGJIQWdiV0Z1WVdkbElITmxjblpsY2kxemRHRjBaU0JwYmlCU1pXRmpkQ0JoY0hCc2FXTmhkR2x2Ym5NdUlDQmNibHh1WEc0eExpQjFjMlZSZFdWeWVUcGNiaUFnSUMwZ1VIVnljRzl6WlRvZ1ZYTmxaQ0IwYnlCbVpYUmphQ0JoYm1RZ1kyRmphR1VnWkdGMFlTNWNiaUFnSUMwZ1MyVjVJRTl3ZEdsdmJuTTZJRnh1SUNBZ0lDQXRJSEYxWlhKNVMyVjVPaUJWYm1seGRXVnNlU0JwWkdWdWRHbG1hV1Z6SUhSb1pTQnhkV1Z5ZVM1Y2JpQWdJQ0FnTFNCeGRXVnllVVp1T2lCVWFHVWdablZ1WTNScGIyNGdjbVZ6Y0c5dWMybGliR1VnWm05eUlHWmxkR05vYVc1bklHUmhkR0V1WEc0Z0lDQWdJQzBnWlc1aFlteGxaRG9nUVNCaWIyOXNaV0Z1SUhSb1lYUWdZMkZ1SUdScGMyRmliR1VnZEdobElIRjFaWEo1SUdaeWIyMGdZWFYwYjIxaGRHbGpZV3hzZVNCeWRXNXVhVzVuTGx4dUlDQWdJQ0F0SUhOMFlXeGxWR2x0WlRvZ1NHOTNJR3h2Ym1jZ2RHaGxJR1JoZEdFZ2FYTWdZMjl1YzJsa1pYSmxaQ0JtY21WemFDNWNiaUFnSUNBZ0xTQnlaV1psZEdOb1QyNVhhVzVrYjNkR2IyTjFjem9nVjJobGRHaGxjaUIwYUdVZ2NYVmxjbmtnYzJodmRXeGtJSEpsWm1WMFkyZ2dkMmhsYmlCMGFHVWdkMmx1Wkc5M0lHbHpJR1p2WTNWelpXUXVYRzVjYmpJdUlIVnpaVTExZEdGMGFXOXVPbHh1SUNBZ0xTQlFkWEp3YjNObE9pQlZjMlZrSUdadmNpQmpjbVZoZEdsdVp5d2dkWEJrWVhScGJtY3NJRzl5SUdSbGJHVjBhVzVuSUdSaGRHRXVYRzRnSUNBdElFdGxlU0JQY0hScGIyNXpPbHh1SUNBZ0lDQXRJRzExZEdGMGFXOXVSbTQ2SUZSb1pTQm1kVzVqZEdsdmJpQjBhR0YwSUhCbGNtWnZjbTF6SUhSb1pTQnRkWFJoZEdsdmJpNWNiaUFnSUNBZ0xTQnZiazExZEdGMFpUb2dRMkZzYkdWa0lHSmxabTl5WlNCMGFHVWdiWFYwWVhScGIyNGdablZ1WTNScGIyNGdhWE1nWm1seVpXUXNJSFZ6WldaMWJDQm1iM0lnYjNCMGFXMXBjM1JwWXlCMWNHUmhkR1Z6TGx4dUlDQWdJQ0F0SUc5dVUzVmpZMlZ6Y3pvZ1JYaGxZM1YwWlhNZ1lXWjBaWElnWVNCemRXTmpaWE56Wm5Wc0lHMTFkR0YwYVc5dUxDQnZablJsYmlCMWMyVmtJSFJ2SUhWd1pHRjBaU0IwYUdVZ1kyRmphR1VnYjNJZ2NHVnlabTl5YlNCemFXUmxJR1ZtWm1WamRITXVYRzRnSUNBZ0lDMGdiMjVGY25KdmNqb2dRMkZzYkdWa0lHbG1JSFJvWlNCdGRYUmhkR2x2YmlCbGJtTnZkVzUwWlhKeklHRnVJR1Z5Y205eUxseHVJQ0FnSUNBdElHOXVVMlYwZEd4bFpEb2dRMkZzYkdWa0lIZG9aVzRnZEdobElHMTFkR0YwYVc5dUlHVnBkR2hsY2lCemRXTmpaV1ZrY3lCdmNpQm1ZV2xzY3l3Z2RYTmxablZzSUdadmNpQmpiR1ZoYm5Wd0lHRmpkR2x2Ym5NdVhHNGdJQ0FnSUMwZ2JYVjBZWFJsUVhONWJtTTZJRUZ1SUdGemVXNWphSEp2Ym05MWN5QmhiSFJsY201aGRHbDJaU0IwYnlCdGRYUmhkR1VzSUhKbGRIVnlibWx1WnlCaElIQnliMjFwYzJVdVhHNGdJRnh1WEhScGMweHZZV1JwYm1jc0lHbHpSWEp5YjNJc0lHUmhkR0VzSUdWeWNtOXlPbHh1SUNBZ0xTQlFkWEp3YjNObE9pQlRkR0Z1WkdGeVpDQnpkR0YwWlhNZ1lXNWtJR1JoZEdFZ2NISnZkbWxrWldRZ1lua2dZbTkwYUNCMWMyVlJkV1Z5ZVNCaGJtUWdYRzVjZENBZ0lIVnpaVTExZEdGMGFXOXVJR2h2YjJ0eklIUnZJRzFoYm1GblpTQlZTU0J5Wlc1a1pYSnBibWNnWW1GelpXUWdiMjRnZEdobElISmxjWFZsYzNRbmN5QnNhV1psWTNsamJHVXVYRzVjYmlBZ2JYVjBZWFJsT2x4dUlDQWdMU0JRZFhKd2IzTmxPaUJCSUcxbGRHaHZaQ0J3Y205MmFXUmxaQ0JpZVNCMWMyVk5kWFJoZEdsdmJpQjBieUIwY21sbloyVnlJR0VnYlhWMFlYUnBiMjRnZDJsMGFDQjBhR1VnY21WeGRXbHlaV1FnZG1GeWFXRmliR1Z6TGx4dVhHNHpMaUJ4ZFdWeWVVTnNhV1Z1ZERwY2JpQWdJQzBnVUhWeWNHOXpaVG9nUVNCalpXNTBjbUZzSUhCc1lXTmxJSFJ2SUcxaGJtRm5aU0J4ZFdWeWFXVnpJR0Z1WkNCdGRYUmhkR2x2Ym5NdVhHNGdJQ0F0SUV0bGVTQk5aWFJvYjJSek9seHVJQ0FnSUNBdElHbHVkbUZzYVdSaGRHVlJkV1Z5YVdWek9pQkpiblpoYkdsa1lYUmxJR0Z1WkNCeVpXWmxkR05vSUhGMVpYSnBaWE11WEc0Z0lDQWdJQzBnYzJWMFVYVmxjbmxFWVhSaE9pQk5ZVzUxWVd4c2VTQnpaWFFnZEdobElHUmhkR0VnWm05eUlHRWdjWFZsY25rZ2FXNGdkR2hsSUdOaFkyaGxMbHh1SUNBZ0lDQXRJR2RsZEZGMVpYSjVSR0YwWVRvZ1VtVjBjbWxsZG1VZ2RHaGxJR1JoZEdFZ1ptOXlJR0VnY1hWbGNua2dabkp2YlNCMGFHVWdZMkZqYUdVdVhHNGdJQ0FnSUMwZ2NtVnpaWFJSZFdWeWFXVnpPaUJTWlhObGRDQmhJSEYxWlhKNUozTWdjM1JoZEdVZ2RHOGdhWFJ6SUdsdWFYUnBZV3dnYzNSaGRHVXVYRzRnSUNBZ0lDMGdjbVZ0YjNabFVYVmxjbWxsY3pvZ1VtVnRiM1psSUhGMVpYSnBaWE1nWm5KdmJTQjBhR1VnWTJGamFHVXVYRzVjYmxSb1pYTmxJSFYwYVd4cGRHbGxjeUJqYjJ4c1pXTjBhWFpsYkhrZ2NISnZkbWxrWlNCaElISnZZblZ6ZENCbWNtRnRaWGR2Y21zZ1ptOXlJRzFoYm1GbmFXNW5JSE5sY25abGNpMXpkR0YwWlNCcGJpQlNaV0ZqZENCaGNIQnNhV05oZEdsdmJuTXNYRzV0WVd0cGJtY2daR0YwWVNCbVpYUmphR2x1Wnl3Z1kyRmphR2x1Wnl3Z2MzbHVZMmh5YjI1cGVtRjBhVzl1TENCaGJtUWdiWFYwWVhScGIyNXpJR1ZtWm1samFXVnVkQ0JoYm1RZ1pXRnplU0IwYnlCcGJYQnNaVzFsYm5RdVhHNWNibTV2ZEdWek9seHVYRzUxYzJWVGRYTndaVzV6WlZGMVpYSjVPaUJwYm5SbFozSmhkR1Z6SUdScGNtVmpkR3g1SUhkcGRHZ2dVbVZoWTNRbmN5QlRkWE53Wlc1elpTNWNia2wwSUdSdlpYTnVKM1FnY21WMGRYSnVJR2x6VEc5aFpHbHVaeUJ2Y2lCcGMwVnljbTl5SUhOMFlYUmxjenNnYVc1emRHVmhaQ3dnWEc1U1pXRmpkQ0JUZFhOd1pXNXpaU0JoZFhSdmJXRjBhV05oYkd4NUlITm9iM2R6SUhSb1pTQm1ZV3hzWW1GamF5QmpiMjF3YjI1bGJuUWdkMmhsYmlCMGFHVWdjWFZsY25rZ2FYTWdiRzloWkdsdVp5QmNibUZ1WkNCMGFISnZkM01nWVc0Z1pYSnliM0lnWW05MWJtUmhjbmtnZDJobGJpQmhiaUJsY25KdmNpQnZZMk4xY25NdVhHNWNiblZ6WlZGMVpYSjVPaUI1YjNVZ1lYSmxJSEpsYzNCdmJuTnBZbXhsSUdadmNpQnRZVzVoWjJsdVp5QjBhR1VnYkc5aFpHbHVaeXdnWlhKeWIzSXNJR0Z1WkNCa1lYUmhJSE4wWVhSbGN5QnBiaUI1YjNWeUlHTnZiWEJ2Ym1WdWRDNWNia2hoY3lCdGIzSmxJR052Ym5SeWIyd2diMjRnZDJobGJpQm9aU0J4ZFdWeWVTQnBjeUJsZUdWamRYUmxaQ3dnZDJsMGFDQnZjSFJwYjI1eklHeHBhMlVnSjJWdVlXSnNaV1FuWEc0cUwxeHVJbDBzSW0xaGNIQnBibWR6SWpvaVFVRkJRVHRCUVVGQkxFVkJRMFU3UVVGQlFTeEZRVU5CTzBGQlFVRXNSVUZEUVR0QlFVRkJMRVZCUTBFN1FVRkJRU3hQUVVOTE8wRkJRMUE3UVVGQlFTeEZRVU5GTzBGQlFVRXNSVUZEUVR0QlFVRkJMRVZCUTBFN1FVRkJRU3hGUVVOQk8wRkJRVUVzUlVGRFFUdEJRVUZCTEVWQlEwRTdRVUZCUVN4UFFVTkxPMEZCUjBFc1lVRkJUU3haUVVGWkxFMUJRM1pDTEdsQ1FVRnBRanRCUVVGQkxFVkJRMllzVlVGQlZTeERRVUZETEZGQlFWRTdRVUZCUVN4RlFVTnVRaXhUUVVGVE8wRkJRVUVzUlVGRFZDeFhRVUZYTzBGQlFVRTdRVUZCUVN4RlFVTllMRTlCUVU4N1FVRkJRVHRCUVVOVUxFTkJRVU03UVVGRlNTeGhRVUZOTEZkQlFWY3NRMEZCUXl4bFFVTjJRaXhUUVVGVE8wRkJRVUVzUlVGRFVDeFZRVUZWTEVOQlFVTXNVMEZCVXl4VlFVRlZPMEZCUVVFc1JVRkRPVUlzVTBGQlV5eE5RVUZOTzBGQlEySXNVVUZCU1N4RFFVRkRMRmRCUVZrc1VVRkJUeXhSUVVGUkxGRkJRVkVzU1VGQlNUdEJRVU0xUXl4VlFVRk5MR2RDUVVGblFpeFJRVUZSTEV0QlFVc3NUMEZCVHl4VlFVRlZMRU5CUVVNN1FVRkZja1FzVjBGQlR5eG5Ra0ZEU0N4aFFVRmhMRTlCUVU4c1ZVRkJWU3hEUVVGRExFbEJReTlDTEdWQlFXVXNUMEZCVHl4VlFVRlZMRU5CUVVNN1FVRkJRU3hGUVVOMlF6dEJRVUZCTEVWQlEwRXNVMEZCVXl4RFFVRkRMRU5CUVVNN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFTeEZRVWRZTEZkQlFWYzdRVUZCUVN4RlFVTllMRTlCUVU4N1FVRkRWQ3hEUVVGRE8wRkJSVWtzWVVGQlRTeGpRVUZqTEUxQlFVMDdRVUZETDBJc1VVRkJUU3hqUVVGakxHVkJRV1U3UVVGRmJrTXNVMEZCVHl4WlFVRlpPMEZCUVVFc1NVRkRha0lzV1VGQldTeERRVUZETEZWQlFUWkNMRk5CUVZNc1MwRkJTenRCUVVGQk8wRkJRVUVzU1VGSGVFUXNWMEZCVnl4TlFVRk5MRmxCUVZrc2EwSkJRV3RDTEVWQlFVVXNWVUZCVlN4RFFVRkRMRkZCUVZFc1JVRkJSU3hEUVVGRE8wRkJRVUVzUlVGRGVrVXNRMEZCUXp0QlFVTklPMEZCUlU4c1lVRkJUU3hwUWtGQmFVSXNUVUZCVFR0QlFVTnNReXhSUVVGTkxHTkJRV01zWlVGQlpUdEJRVWR1UXl4VFFVRlBMRmxCUVZrN1FVRkJRU3hKUVVOcVFpeFpRVUZaTEVOQlFVTTdRVUZCUVN4TlFVTllPMEZCUVVFc1RVRkRRVHRCUVVGQkxFbEJRMFlzVFVGSFRTeFpRVUZaTEVsQlFVa3NTMEZCU3p0QlFVRkJPMEZCUVVFc1NVRkZNMElzVjBGQlZ5eE5RVUZOTEZsQlFWa3NhMEpCUVd0Q0xFVkJRVVVzVlVGQlZTeERRVUZETEZGQlFWRXNSVUZCUlN4RFFVRkRPMEZCUVVFN1FVRkJRU3hKUVVWMlJTeFRRVUZUTEVOQlFVTXNWVUZCVlR0QlFVTnNRaXhqUVVGUkxFMUJRVTBzYVVKQlFXbENMRXRCUVVzN1FVRkJRU3hKUVVWMFF6dEJRVUZCTEVWQlEwWXNRMEZCUXp0QlFVTklPMEZCUlU4c1lVRkJUU3hwUWtGQmFVSXNUVUZCVFR0QlFVTnNReXhSUVVGTkxHTkJRV01zWlVGQlpUdEJRVVZ1UXl4VFFVRlBMRmxCUVZrN1FVRkJRU3hKUVVOcVFpeFpRVUZaTEVOQlFVTXNUMEZCWlN4blFrRkJaMElzUlVGQlJUdEJRVUZCTEVsQlF6bERMRmRCUVZjc1RVRkJUU3haUVVGWkxHdENRVUZyUWl4RlFVRkZMRlZCUVZVc1EwRkJReXhSUVVGUkxFVkJRVVVzUTBGQlF6dEJRVUZCTEVWQlEzcEZMRU5CUVVNN1FVRkRTRHNpTENKdVlXMWxjeUk2VzExOQ==",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 12142
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 30,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.477Z",
        "time": 29,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/styles/styled-components.ts",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/App.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"31c-E9cnU333zeQ5t5VK02+RmKevXu0\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "2419"
            }
          ],
          "content": {
            "size": 2419,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHN0eWxlZCBmcm9tICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvc3R5bGVkLWNvbXBvbmVudHMuanM/dj0wYmI2OWQ3MyI7CmV4cG9ydCBjb25zdCBTQXBwQ29udGFpbmVyID0gc3R5bGVkLmRpdmAKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgcGFkZGluZzogMjBweDsKYDsKZXhwb3J0IGNvbnN0IFNUaXRsZSA9IHN0eWxlZC5oMWAKICBjb2xvcjogIzMzMzsKICBmb250LXNpemU6IDIuNXJlbTsKICBtYXJnaW4tYm90dG9tOiAyMHB4OwpgOwpleHBvcnQgY29uc3QgU0J1dHRvbiA9IHN0eWxlZC5idXR0b25gCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmNjM0NzsKICBjb2xvcjogI2ZmZjsKICBib3JkZXI6IG5vbmU7CiAgYm9yZGVyLXJhZGl1czogM3B4OwogIG1hcmdpbjogMTBweDsKICBwYWRkaW5nOiA1cHggMTBweDsKICBjdXJzb3I6IHBvaW50ZXI7CiAgZm9udC1zaXplOiAxcmVtOwogIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zczsKCiAgJjpob3ZlciB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTU1MzNkOwogIH0KCiAgJjpkaXNhYmxlZCB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGRkOwogICAgY3Vyc29yOiBub3QtYWxsb3dlZDsKICB9CmA7CmV4cG9ydCBjb25zdCBTSW5wdXQgPSBzdHlsZWQuaW5wdXRgCiAgcGFkZGluZzogMTBweDsKICBtYXJnaW46IDEwcHg7CiAgYm9yZGVyLXJhZGl1czogNXB4OwogIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7CiAgZm9udC1zaXplOiAxcmVtOwoKICAmW3R5cGU9J251bWJlciddIHsKICAgIHdpZHRoOiAxMDBweDsKICB9CmA7CgovLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiSW5OMGVXeGxaQzFqYjIxd2IyNWxiblJ6TG5SeklsMHNJbk52ZFhKalpYTkRiMjUwWlc1MElqcGJJbWx0Y0c5eWRDQnpkSGxzWldRZ1puSnZiU0FuYzNSNWJHVmtMV052YlhCdmJtVnVkSE1uWEc1Y2JtVjRjRzl5ZENCamIyNXpkQ0JUUVhCd1EyOXVkR0ZwYm1WeUlEMGdjM1I1YkdWa0xtUnBkbUJjYmlBZ2RHVjRkQzFoYkdsbmJqb2dZMlZ1ZEdWeU8xeHVJQ0J3WVdSa2FXNW5PaUF5TUhCNE8xeHVZRnh1WEc1bGVIQnZjblFnWTI5dWMzUWdVMVJwZEd4bElEMGdjM1I1YkdWa0xtZ3hZRnh1SUNCamIyeHZjam9nSXpNek16dGNiaUFnWm05dWRDMXphWHBsT2lBeUxqVnlaVzA3WEc0Z0lHMWhjbWRwYmkxaWIzUjBiMjA2SURJd2NIZzdYRzVnWEc1Y2JtVjRjRzl5ZENCamIyNXpkQ0JUUW5WMGRHOXVJRDBnYzNSNWJHVmtMbUoxZEhSdmJtQmNiaUFnWW1GamEyZHliM1Z1WkMxamIyeHZjam9nSTJabU5qTTBOenRjYmlBZ1kyOXNiM0k2SUNObVptWTdYRzRnSUdKdmNtUmxjam9nYm05dVpUdGNiaUFnWW05eVpHVnlMWEpoWkdsMWN6b2dNM0I0TzF4dUlDQnRZWEpuYVc0NklERXdjSGc3WEc0Z0lIQmhaR1JwYm1jNklEVndlQ0F4TUhCNE8xeHVJQ0JqZFhKemIzSTZJSEJ2YVc1MFpYSTdYRzRnSUdadmJuUXRjMmw2WlRvZ01YSmxiVHRjYmlBZ2RISmhibk5wZEdsdmJqb2dZbUZqYTJkeWIzVnVaQzFqYjJ4dmNpQXdMak56TzF4dVhHNGdJQ1k2YUc5MlpYSWdlMXh1SUNBZ0lHSmhZMnRuY205MWJtUXRZMjlzYjNJNklDTmxOVFV6TTJRN1hHNGdJSDFjYmx4dUlDQW1PbVJwYzJGaWJHVmtJSHRjYmlBZ0lDQmlZV05yWjNKdmRXNWtMV052Ykc5eU9pQWpaR1JrTzF4dUlDQWdJR04xY25OdmNqb2dibTkwTFdGc2JHOTNaV1E3WEc0Z0lIMWNibUJjYmx4dVpYaHdiM0owSUdOdmJuTjBJRk5KYm5CMWRDQTlJSE4wZVd4bFpDNXBibkIxZEdCY2JpQWdjR0ZrWkdsdVp6b2dNVEJ3ZUR0Y2JpQWdiV0Z5WjJsdU9pQXhNSEI0TzF4dUlDQmliM0prWlhJdGNtRmthWFZ6T2lBMWNIZzdYRzRnSUdKdmNtUmxjam9nTVhCNElITnZiR2xrSUNOa1pHUTdYRzRnSUdadmJuUXRjMmw2WlRvZ01YSmxiVHRjYmx4dUlDQW1XM1I1Y0dVOUoyNTFiV0psY2lkZElIdGNiaUFnSUNCM2FXUjBhRG9nTVRBd2NIZzdYRzRnSUgxY2JtQmNiaUpkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzVDBGQlR5eFpRVUZaTzBGQlJWb3NZVUZCVFN4blFrRkJaMElzVDBGQlR6dEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVczNRaXhoUVVGTkxGTkJRVk1zVDBGQlR6dEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCVFhSQ0xHRkJRVTBzVlVGQlZTeFBRVUZQTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZ4UW5aQ0xHRkJRVTBzVTBGQlV5eFBRVUZQTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdJaXdpYm1GdFpYTWlPbHRkZlE9PQ==",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 2419
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 29,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.478Z",
        "time": 28,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/components/loading-message.tsx",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/App.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"89b-rCotBslqrqfylinGA6k70g2LFD0\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "2954"
            }
          ],
          "content": {
            "size": 2954,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsgY3JlYXRlSG90Q29udGV4dCBhcyBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQgfSBmcm9tICIvQHZpdGUvY2xpZW50IjtpbXBvcnQubWV0YS5ob3QgPSBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQoIi9zcmMvY29tcG9uZW50cy9sb2FkaW5nLW1lc3NhZ2UudHN4Iik7aW1wb3J0IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdF9qc3hEZXZSdW50aW1lIGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9yZWFjdF9qc3gtZGV2LXJ1bnRpbWUuanM/dj0wYmI2OWQ3MyI7IGNvbnN0IGpzeERFViA9IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdF9qc3hEZXZSdW50aW1lWyJqc3hERVYiXTsKaW1wb3J0ICogYXMgUmVmcmVzaFJ1bnRpbWUgZnJvbSAiL0ByZWFjdC1yZWZyZXNoIjsKY29uc3QgaW5XZWJXb3JrZXIgPSB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICJ1bmRlZmluZWQiICYmIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZTsKbGV0IHByZXZSZWZyZXNoUmVnOwpsZXQgcHJldlJlZnJlc2hTaWc7CmlmIChpbXBvcnQubWV0YS5ob3QgJiYgIWluV2ViV29ya2VyKSB7CiAgaWYgKCF3aW5kb3cuJFJlZnJlc2hSZWckKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICJAdml0ZWpzL3BsdWdpbi1yZWFjdCBjYW4ndCBkZXRlY3QgcHJlYW1ibGUuIFNvbWV0aGluZyBpcyB3cm9uZy4iCiAgICApOwogIH0KICBwcmV2UmVmcmVzaFJlZyA9IHdpbmRvdy4kUmVmcmVzaFJlZyQ7CiAgcHJldlJlZnJlc2hTaWcgPSB3aW5kb3cuJFJlZnJlc2hTaWckOwogIHdpbmRvdy4kUmVmcmVzaFJlZyQgPSBSZWZyZXNoUnVudGltZS5nZXRSZWZyZXNoUmVnKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbG9hZGluZy1tZXNzYWdlLnRzeCIpOwogIHdpbmRvdy4kUmVmcmVzaFNpZyQgPSBSZWZyZXNoUnVudGltZS5jcmVhdGVTaWduYXR1cmVGdW5jdGlvbkZvclRyYW5zZm9ybTsKfQpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBMb2FkaW5nTWVzc2FnZSgpIHsKICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeERFVigicCIsIHsgImRhdGEtdGVzdGlkIjogImxvYWRpbmctbWVzc2FnZS1jb21wIiwgY2hpbGRyZW46ICJMb2FkaW5nIG1vdmllcy4uLiIgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbG9hZGluZy1tZXNzYWdlLnRzeCIsCiAgICBsaW5lTnVtYmVyOiAyMSwKICAgIGNvbHVtbk51bWJlcjogMTAKICB9LCB0aGlzKTsKfQpfYyA9IExvYWRpbmdNZXNzYWdlOwp2YXIgX2M7CiRSZWZyZXNoUmVnJChfYywgIkxvYWRpbmdNZXNzYWdlIik7CmlmIChpbXBvcnQubWV0YS5ob3QgJiYgIWluV2ViV29ya2VyKSB7CiAgd2luZG93LiRSZWZyZXNoUmVnJCA9IHByZXZSZWZyZXNoUmVnOwogIHdpbmRvdy4kUmVmcmVzaFNpZyQgPSBwcmV2UmVmcmVzaFNpZzsKfQppZiAoaW1wb3J0Lm1ldGEuaG90ICYmICFpbldlYldvcmtlcikgewogIFJlZnJlc2hSdW50aW1lLl9faG1yX2ltcG9ydChpbXBvcnQubWV0YS51cmwpLnRoZW4oKGN1cnJlbnRFeHBvcnRzKSA9PiB7CiAgICBSZWZyZXNoUnVudGltZS5yZWdpc3RlckV4cG9ydHNGb3JSZWFjdFJlZnJlc2goIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9sb2FkaW5nLW1lc3NhZ2UudHN4IiwgY3VycmVudEV4cG9ydHMpOwogICAgaW1wb3J0Lm1ldGEuaG90LmFjY2VwdCgobmV4dEV4cG9ydHMpID0+IHsKICAgICAgaWYgKCFuZXh0RXhwb3J0cykgcmV0dXJuOwogICAgICBjb25zdCBpbnZhbGlkYXRlTWVzc2FnZSA9IFJlZnJlc2hSdW50aW1lLnZhbGlkYXRlUmVmcmVzaEJvdW5kYXJ5QW5kRW5xdWV1ZVVwZGF0ZSgiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL2xvYWRpbmctbWVzc2FnZS50c3giLCBjdXJyZW50RXhwb3J0cywgbmV4dEV4cG9ydHMpOwogICAgICBpZiAoaW52YWxpZGF0ZU1lc3NhZ2UpIGltcG9ydC5tZXRhLmhvdC5pbnZhbGlkYXRlKGludmFsaWRhdGVNZXNzYWdlKTsKICAgIH0pOwogIH0pOwp9CgovLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p0WVhCd2FXNW5jeUk2SWtGQlExTTdPenM3T3pzN096czdPenM3T3pzN1FVRkVWQ3gzUWtGQmQwSkJMR2xDUVVGcFFqdEJRVU4yUXl4VFFVRlBMSFZDUVVGRExFOUJRVVVzWlVGQldTeDNRa0ZCZFVJc2FVTkJRWFJETzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFc1UwRkJkVVE3UVVGRGFFVTdRVUZCUTBNc1MwRkdkVUpFTzBGQlFXTXNTVUZCUVVNN1FVRkJRVU1zWVVGQlFVUXNTVUZCUVNJc0ltNWhiV1Z6SWpwYklreHZZV1JwYm1kTlpYTnpZV2RsSWl3aVgyTWlMQ0lrVW1WbWNtVnphRkpsWnlRaVhTd2lhV2R1YjNKbFRHbHpkQ0k2VzEwc0luTnZkWEpqWlhNaU9sc2liRzloWkdsdVp5MXRaWE56WVdkbExuUnplQ0pkTENKemIzVnlZMlZ6UTI5dWRHVnVkQ0k2V3lKbGVIQnZjblFnWkdWbVlYVnNkQ0JtZFc1amRHbHZiaUJNYjJGa2FXNW5UV1Z6YzJGblpTZ3BJSHRjYmlBZ2NtVjBkWEp1SUR4d0lHUmhkR0V0ZEdWemRHbGtQVndpYkc5aFpHbHVaeTF0WlhOellXZGxMV052YlhCY0lqNU1iMkZrYVc1bklHMXZkbWxsY3k0dUxqd3ZjRDVjYm4xY2JpSmRMQ0ptYVd4bElqb2lMMVZ6WlhKekwyMTFjbUYwTG05NlkyRnVMM05sYjI0dmNHeGhlWGR5YVdkb2RDMTFkR2xzY3k5ellXMXdiR1V0WVhCd0wyWnliMjUwWlc1a0wzTnlZeTlqYjIxd2IyNWxiblJ6TDJ4dllXUnBibWN0YldWemMyRm5aUzUwYzNnaWZRPT0=",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 2954
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 28,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.479Z",
        "time": 27,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/node_modules/.vite/deps/react-error-boundary.js?v=0bb69d73",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/App.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [
            {
              "name": "v",
              "value": "0bb69d73"
            }
          ],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "max-age=31536000,immutable"
            },
            {
              "name": "etag",
              "value": "W/\"12e5-xSioArpO15j4pR/GgO5NDCN/HgA\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "4837"
            }
          ],
          "content": {
            "size": 4837,
            "mimeType": "text/javascript",
            "text": "InVzZSBjbGllbnQiOwppbXBvcnQgewogIHJlcXVpcmVfcmVhY3QKfSBmcm9tICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvY2h1bmstUUpZS1VLQUwuanM/dj0wYmI2OWQ3MyI7CmltcG9ydCB7CiAgX190b0VTTQp9IGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9jaHVuay00TUJNUklMQS5qcz92PTBiYjY5ZDczIjsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1lcnJvci1ib3VuZGFyeS9kaXN0L3JlYWN0LWVycm9yLWJvdW5kYXJ5LmRldmVsb3BtZW50LmVzbS5qcwp2YXIgaW1wb3J0X3JlYWN0ID0gX190b0VTTShyZXF1aXJlX3JlYWN0KCkpOwp2YXIgRXJyb3JCb3VuZGFyeUNvbnRleHQgPSAoMCwgaW1wb3J0X3JlYWN0LmNyZWF0ZUNvbnRleHQpKG51bGwpOwp2YXIgaW5pdGlhbFN0YXRlID0gewogIGRpZENhdGNoOiBmYWxzZSwKICBlcnJvcjogbnVsbAp9Owp2YXIgRXJyb3JCb3VuZGFyeSA9IGNsYXNzIGV4dGVuZHMgaW1wb3J0X3JlYWN0LkNvbXBvbmVudCB7CiAgY29uc3RydWN0b3IocHJvcHMpIHsKICAgIHN1cGVyKHByb3BzKTsKICAgIHRoaXMucmVzZXRFcnJvckJvdW5kYXJ5ID0gdGhpcy5yZXNldEVycm9yQm91bmRhcnkuYmluZCh0aGlzKTsKICAgIHRoaXMuc3RhdGUgPSBpbml0aWFsU3RhdGU7CiAgfQogIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IoZXJyb3IpIHsKICAgIHJldHVybiB7CiAgICAgIGRpZENhdGNoOiB0cnVlLAogICAgICBlcnJvcgogICAgfTsKICB9CiAgcmVzZXRFcnJvckJvdW5kYXJ5KCkgewogICAgY29uc3QgewogICAgICBlcnJvcgogICAgfSA9IHRoaXMuc3RhdGU7CiAgICBpZiAoZXJyb3IgIT09IG51bGwpIHsKICAgICAgdmFyIF90aGlzJHByb3BzJG9uUmVzZXQsIF90aGlzJHByb3BzOwogICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldOwogICAgICB9CiAgICAgIChfdGhpcyRwcm9wcyRvblJlc2V0ID0gKF90aGlzJHByb3BzID0gdGhpcy5wcm9wcykub25SZXNldCkgPT09IG51bGwgfHwgX3RoaXMkcHJvcHMkb25SZXNldCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkcHJvcHMkb25SZXNldC5jYWxsKF90aGlzJHByb3BzLCB7CiAgICAgICAgYXJncywKICAgICAgICByZWFzb246ICJpbXBlcmF0aXZlLWFwaSIKICAgICAgfSk7CiAgICAgIHRoaXMuc2V0U3RhdGUoaW5pdGlhbFN0YXRlKTsKICAgIH0KICB9CiAgY29tcG9uZW50RGlkQ2F0Y2goZXJyb3IsIGluZm8pIHsKICAgIHZhciBfdGhpcyRwcm9wcyRvbkVycm9yLCBfdGhpcyRwcm9wczI7CiAgICAoX3RoaXMkcHJvcHMkb25FcnJvciA9IChfdGhpcyRwcm9wczIgPSB0aGlzLnByb3BzKS5vbkVycm9yKSA9PT0gbnVsbCB8fCBfdGhpcyRwcm9wcyRvbkVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRwcm9wcyRvbkVycm9yLmNhbGwoX3RoaXMkcHJvcHMyLCBlcnJvciwgaW5mbyk7CiAgfQogIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMsIHByZXZTdGF0ZSkgewogICAgY29uc3QgewogICAgICBkaWRDYXRjaAogICAgfSA9IHRoaXMuc3RhdGU7CiAgICBjb25zdCB7CiAgICAgIHJlc2V0S2V5cwogICAgfSA9IHRoaXMucHJvcHM7CiAgICBpZiAoZGlkQ2F0Y2ggJiYgcHJldlN0YXRlLmVycm9yICE9PSBudWxsICYmIGhhc0FycmF5Q2hhbmdlZChwcmV2UHJvcHMucmVzZXRLZXlzLCByZXNldEtleXMpKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wcyRvblJlc2V0MiwgX3RoaXMkcHJvcHMzOwogICAgICAoX3RoaXMkcHJvcHMkb25SZXNldDIgPSAoX3RoaXMkcHJvcHMzID0gdGhpcy5wcm9wcykub25SZXNldCkgPT09IG51bGwgfHwgX3RoaXMkcHJvcHMkb25SZXNldDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHByb3BzJG9uUmVzZXQyLmNhbGwoX3RoaXMkcHJvcHMzLCB7CiAgICAgICAgbmV4dDogcmVzZXRLZXlzLAogICAgICAgIHByZXY6IHByZXZQcm9wcy5yZXNldEtleXMsCiAgICAgICAgcmVhc29uOiAia2V5cyIKICAgICAgfSk7CiAgICAgIHRoaXMuc2V0U3RhdGUoaW5pdGlhbFN0YXRlKTsKICAgIH0KICB9CiAgcmVuZGVyKCkgewogICAgY29uc3QgewogICAgICBjaGlsZHJlbiwKICAgICAgZmFsbGJhY2tSZW5kZXIsCiAgICAgIEZhbGxiYWNrQ29tcG9uZW50LAogICAgICBmYWxsYmFjawogICAgfSA9IHRoaXMucHJvcHM7CiAgICBjb25zdCB7CiAgICAgIGRpZENhdGNoLAogICAgICBlcnJvcgogICAgfSA9IHRoaXMuc3RhdGU7CiAgICBsZXQgY2hpbGRUb1JlbmRlciA9IGNoaWxkcmVuOwogICAgaWYgKGRpZENhdGNoKSB7CiAgICAgIGNvbnN0IHByb3BzID0gewogICAgICAgIGVycm9yLAogICAgICAgIHJlc2V0RXJyb3JCb3VuZGFyeTogdGhpcy5yZXNldEVycm9yQm91bmRhcnkKICAgICAgfTsKICAgICAgaWYgKHR5cGVvZiBmYWxsYmFja1JlbmRlciA9PT0gImZ1bmN0aW9uIikgewogICAgICAgIGNoaWxkVG9SZW5kZXIgPSBmYWxsYmFja1JlbmRlcihwcm9wcyk7CiAgICAgIH0gZWxzZSBpZiAoRmFsbGJhY2tDb21wb25lbnQpIHsKICAgICAgICBjaGlsZFRvUmVuZGVyID0gKDAsIGltcG9ydF9yZWFjdC5jcmVhdGVFbGVtZW50KShGYWxsYmFja0NvbXBvbmVudCwgcHJvcHMpOwogICAgICB9IGVsc2UgaWYgKGZhbGxiYWNrICE9PSB2b2lkIDApIHsKICAgICAgICBjaGlsZFRvUmVuZGVyID0gZmFsbGJhY2s7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgewogICAgICAgICAgY29uc29sZS5lcnJvcigicmVhY3QtZXJyb3ItYm91bmRhcnkgcmVxdWlyZXMgZWl0aGVyIGEgZmFsbGJhY2ssIGZhbGxiYWNrUmVuZGVyLCBvciBGYWxsYmFja0NvbXBvbmVudCBwcm9wIik7CiAgICAgICAgfQogICAgICAgIHRocm93IGVycm9yOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gKDAsIGltcG9ydF9yZWFjdC5jcmVhdGVFbGVtZW50KShFcnJvckJvdW5kYXJ5Q29udGV4dC5Qcm92aWRlciwgewogICAgICB2YWx1ZTogewogICAgICAgIGRpZENhdGNoLAogICAgICAgIGVycm9yLAogICAgICAgIHJlc2V0RXJyb3JCb3VuZGFyeTogdGhpcy5yZXNldEVycm9yQm91bmRhcnkKICAgICAgfQogICAgfSwgY2hpbGRUb1JlbmRlcik7CiAgfQp9OwpmdW5jdGlvbiBoYXNBcnJheUNoYW5nZWQoKSB7CiAgbGV0IGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHZvaWQgMCA/IGFyZ3VtZW50c1swXSA6IFtdOwogIGxldCBiID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB2b2lkIDAgPyBhcmd1bWVudHNbMV0gOiBbXTsKICByZXR1cm4gYS5sZW5ndGggIT09IGIubGVuZ3RoIHx8IGEuc29tZSgoaXRlbSwgaW5kZXgpID0+ICFPYmplY3QuaXMoaXRlbSwgYltpbmRleF0pKTsKfQpmdW5jdGlvbiBhc3NlcnRFcnJvckJvdW5kYXJ5Q29udGV4dCh2YWx1ZSkgewogIGlmICh2YWx1ZSA9PSBudWxsIHx8IHR5cGVvZiB2YWx1ZS5kaWRDYXRjaCAhPT0gImJvb2xlYW4iIHx8IHR5cGVvZiB2YWx1ZS5yZXNldEVycm9yQm91bmRhcnkgIT09ICJmdW5jdGlvbiIpIHsKICAgIHRocm93IG5ldyBFcnJvcigiRXJyb3JCb3VuZGFyeUNvbnRleHQgbm90IGZvdW5kIik7CiAgfQp9CmZ1bmN0aW9uIHVzZUVycm9yQm91bmRhcnkoKSB7CiAgY29uc3QgY29udGV4dCA9ICgwLCBpbXBvcnRfcmVhY3QudXNlQ29udGV4dCkoRXJyb3JCb3VuZGFyeUNvbnRleHQpOwogIGFzc2VydEVycm9yQm91bmRhcnlDb250ZXh0KGNvbnRleHQpOwogIGNvbnN0IFtzdGF0ZSwgc2V0U3RhdGVdID0gKDAsIGltcG9ydF9yZWFjdC51c2VTdGF0ZSkoewogICAgZXJyb3I6IG51bGwsCiAgICBoYXNFcnJvcjogZmFsc2UKICB9KTsKICBjb25zdCBtZW1vaXplZCA9ICgwLCBpbXBvcnRfcmVhY3QudXNlTWVtbykoKCkgPT4gKHsKICAgIHJlc2V0Qm91bmRhcnk6ICgpID0+IHsKICAgICAgY29udGV4dC5yZXNldEVycm9yQm91bmRhcnkoKTsKICAgICAgc2V0U3RhdGUoewogICAgICAgIGVycm9yOiBudWxsLAogICAgICAgIGhhc0Vycm9yOiBmYWxzZQogICAgICB9KTsKICAgIH0sCiAgICBzaG93Qm91bmRhcnk6IChlcnJvcikgPT4gc2V0U3RhdGUoewogICAgICBlcnJvciwKICAgICAgaGFzRXJyb3I6IHRydWUKICAgIH0pCiAgfSksIFtjb250ZXh0LnJlc2V0RXJyb3JCb3VuZGFyeV0pOwogIGlmIChzdGF0ZS5oYXNFcnJvcikgewogICAgdGhyb3cgc3RhdGUuZXJyb3I7CiAgfQogIHJldHVybiBtZW1vaXplZDsKfQpmdW5jdGlvbiB3aXRoRXJyb3JCb3VuZGFyeShjb21wb25lbnQsIGVycm9yQm91bmRhcnlQcm9wcykgewogIGNvbnN0IFdyYXBwZWQgPSAoMCwgaW1wb3J0X3JlYWN0LmZvcndhcmRSZWYpKChwcm9wcywgcmVmKSA9PiAoMCwgaW1wb3J0X3JlYWN0LmNyZWF0ZUVsZW1lbnQpKEVycm9yQm91bmRhcnksIGVycm9yQm91bmRhcnlQcm9wcywgKDAsIGltcG9ydF9yZWFjdC5jcmVhdGVFbGVtZW50KShjb21wb25lbnQsIHsKICAgIC4uLnByb3BzLAogICAgcmVmCiAgfSkpKTsKICBjb25zdCBuYW1lID0gY29tcG9uZW50LmRpc3BsYXlOYW1lIHx8IGNvbXBvbmVudC5uYW1lIHx8ICJVbmtub3duIjsKICBXcmFwcGVkLmRpc3BsYXlOYW1lID0gIndpdGhFcnJvckJvdW5kYXJ5KCIuY29uY2F0KG5hbWUsICIpIik7CiAgcmV0dXJuIFdyYXBwZWQ7Cn0KZXhwb3J0IHsKICBFcnJvckJvdW5kYXJ5LAogIEVycm9yQm91bmRhcnlDb250ZXh0LAogIHVzZUVycm9yQm91bmRhcnksCiAgd2l0aEVycm9yQm91bmRhcnkKfTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhY3QtZXJyb3ItYm91bmRhcnkuanMubWFwCg==",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 4837
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 27,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.480Z",
        "time": 26,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/components/error-component.tsx",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/App.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"ac3-vhTwT2EgpNqAfmfj9Cerr0P4iZQ\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "3714"
            }
          ],
          "content": {
            "size": 3714,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsgY3JlYXRlSG90Q29udGV4dCBhcyBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQgfSBmcm9tICIvQHZpdGUvY2xpZW50IjtpbXBvcnQubWV0YS5ob3QgPSBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQoIi9zcmMvY29tcG9uZW50cy9lcnJvci1jb21wb25lbnQudHN4Iik7aW1wb3J0IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdF9qc3hEZXZSdW50aW1lIGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9yZWFjdF9qc3gtZGV2LXJ1bnRpbWUuanM/dj0wYmI2OWQ3MyI7IGNvbnN0IEZyYWdtZW50ID0gX192aXRlX19janNJbXBvcnQwX3JlYWN0X2pzeERldlJ1bnRpbWVbIkZyYWdtZW50Il07IGNvbnN0IGpzeERFViA9IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdF9qc3hEZXZSdW50aW1lWyJqc3hERVYiXTsKaW1wb3J0ICogYXMgUmVmcmVzaFJ1bnRpbWUgZnJvbSAiL0ByZWFjdC1yZWZyZXNoIjsKY29uc3QgaW5XZWJXb3JrZXIgPSB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICJ1bmRlZmluZWQiICYmIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZTsKbGV0IHByZXZSZWZyZXNoUmVnOwpsZXQgcHJldlJlZnJlc2hTaWc7CmlmIChpbXBvcnQubWV0YS5ob3QgJiYgIWluV2ViV29ya2VyKSB7CiAgaWYgKCF3aW5kb3cuJFJlZnJlc2hSZWckKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICJAdml0ZWpzL3BsdWdpbi1yZWFjdCBjYW4ndCBkZXRlY3QgcHJlYW1ibGUuIFNvbWV0aGluZyBpcyB3cm9uZy4iCiAgICApOwogIH0KICBwcmV2UmVmcmVzaFJlZyA9IHdpbmRvdy4kUmVmcmVzaFJlZyQ7CiAgcHJldlJlZnJlc2hTaWcgPSB3aW5kb3cuJFJlZnJlc2hTaWckOwogIHdpbmRvdy4kUmVmcmVzaFJlZyQgPSBSZWZyZXNoUnVudGltZS5nZXRSZWZyZXNoUmVnKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvZXJyb3ItY29tcG9uZW50LnRzeCIpOwogIHdpbmRvdy4kUmVmcmVzaFNpZyQgPSBSZWZyZXNoUnVudGltZS5jcmVhdGVTaWduYXR1cmVGdW5jdGlvbkZvclRyYW5zZm9ybTsKfQpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBFcnJvckNvbXAoKSB7CiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFsKICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoImgxIiwgeyAiZGF0YS10ZXN0aWQiOiAiZXJyb3IiLCBjaGlsZHJlbjogIlNvbWV0aGluZyB3ZW50IHdyb25nISIgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9lcnJvci1jb21wb25lbnQudHN4IiwKICAgICAgbGluZU51bWJlcjogMjMsCiAgICAgIGNvbHVtbk51bWJlcjogNwogICAgfSwgdGhpcyksCiAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKCJwIiwgeyBjaGlsZHJlbjogIlRyeSByZWxvYWRpbmcgdGhlIHBhZ2UuIiB9LCB2b2lkIDAsIGZhbHNlLCB7CiAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL2Vycm9yLWNvbXBvbmVudC50c3giLAogICAgICBsaW5lTnVtYmVyOiAyNCwKICAgICAgY29sdW1uTnVtYmVyOiA3CiAgICB9LCB0aGlzKQogIF0gfSwgdm9pZCAwLCB0cnVlLCB7CiAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9lcnJvci1jb21wb25lbnQudHN4IiwKICAgIGxpbmVOdW1iZXI6IDIyLAogICAgY29sdW1uTnVtYmVyOiA1CiAgfSwgdGhpcyk7Cn0KX2MgPSBFcnJvckNvbXA7CnZhciBfYzsKJFJlZnJlc2hSZWckKF9jLCAiRXJyb3JDb21wIik7CmlmIChpbXBvcnQubWV0YS5ob3QgJiYgIWluV2ViV29ya2VyKSB7CiAgd2luZG93LiRSZWZyZXNoUmVnJCA9IHByZXZSZWZyZXNoUmVnOwogIHdpbmRvdy4kUmVmcmVzaFNpZyQgPSBwcmV2UmVmcmVzaFNpZzsKfQppZiAoaW1wb3J0Lm1ldGEuaG90ICYmICFpbldlYldvcmtlcikgewogIFJlZnJlc2hSdW50aW1lLl9faG1yX2ltcG9ydChpbXBvcnQubWV0YS51cmwpLnRoZW4oKGN1cnJlbnRFeHBvcnRzKSA9PiB7CiAgICBSZWZyZXNoUnVudGltZS5yZWdpc3RlckV4cG9ydHNGb3JSZWFjdFJlZnJlc2goIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9lcnJvci1jb21wb25lbnQudHN4IiwgY3VycmVudEV4cG9ydHMpOwogICAgaW1wb3J0Lm1ldGEuaG90LmFjY2VwdCgobmV4dEV4cG9ydHMpID0+IHsKICAgICAgaWYgKCFuZXh0RXhwb3J0cykgcmV0dXJuOwogICAgICBjb25zdCBpbnZhbGlkYXRlTWVzc2FnZSA9IFJlZnJlc2hSdW50aW1lLnZhbGlkYXRlUmVmcmVzaEJvdW5kYXJ5QW5kRW5xdWV1ZVVwZGF0ZSgiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL2Vycm9yLWNvbXBvbmVudC50c3giLCBjdXJyZW50RXhwb3J0cywgbmV4dEV4cG9ydHMpOwogICAgICBpZiAoaW52YWxpZGF0ZU1lc3NhZ2UpIGltcG9ydC5tZXRhLmhvdC5pbnZhbGlkYXRlKGludmFsaWRhdGVNZXNzYWdlKTsKICAgIH0pOwogIH0pOwp9CgovLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p0WVhCd2FXNW5jeUk2SWtGQlJVa3NiVUpCUTBVc1kwRkVSanM3T3pzN096czdPenM3T3pzN096dEJRVVpLTEhkQ1FVRjNRa0VzV1VGQldUdEJRVU5zUXl4VFFVTkZMRzFEUVVORk8wRkJRVUVzTWtKQlFVTXNVVUZCUnl4bFFVRlpMRk5CUVZFc2NVTkJRWGhDTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFc1YwRkJOa003UVVGQlFTeEpRVU0zUXl4MVFrRkJReXhQUVVGRkxIVkRRVUZJTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFc1YwRkJNRUk3UVVGQlFTeFBRVVkxUWp0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQkxGTkJSMEU3UVVGRlNqdEJRVUZEUXl4TFFWQjFRa1E3UVVGQlV5eEpRVUZCUXp0QlFVRkJReXhoUVVGQlJDeEpRVUZCSWl3aWJtRnRaWE1pT2xzaVJYSnliM0pEYjIxd0lpd2lYMk1pTENJa1VtVm1jbVZ6YUZKbFp5UWlYU3dpYVdkdWIzSmxUR2x6ZENJNlcxMHNJbk52ZFhKalpYTWlPbHNpWlhKeWIzSXRZMjl0Y0c5dVpXNTBMblJ6ZUNKZExDSnpiM1Z5WTJWelEyOXVkR1Z1ZENJNld5SmxlSEJ2Y25RZ1pHVm1ZWFZzZENCbWRXNWpkR2x2YmlCRmNuSnZja052YlhBb0tTQjdYRzRnSUhKbGRIVnliaUFvWEc0Z0lDQWdQRDVjYmlBZ0lDQWdJRHhvTVNCa1lYUmhMWFJsYzNScFpEMWNJbVZ5Y205eVhDSStVMjl0WlhSb2FXNW5JSGRsYm5RZ2QzSnZibWNoUEM5b01UNWNiaUFnSUNBZ0lEeHdQbFJ5ZVNCeVpXeHZZV1JwYm1jZ2RHaGxJSEJoWjJVdVBDOXdQbHh1SUNBZ0lEd3ZQbHh1SUNBcFhHNTlYRzRpWFN3aVptbHNaU0k2SWk5VmMyVnljeTl0ZFhKaGRDNXZlbU5oYmk5elpXOXVMM0JzWVhsM2NtbG5hSFF0ZFhScGJITXZjMkZ0Y0d4bExXRndjQzltY205dWRHVnVaQzl6Y21NdlkyOXRjRzl1Wlc1MGN5OWxjbkp2Y2kxamIyMXdiMjVsYm5RdWRITjRJbjA9",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 3714
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 26,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.501Z",
        "time": 19,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/node_modules/.vite/deps/chunk-2FY2DAYE.js?v=0bb69d73",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/node_modules/.vite/deps/@tanstack_react-query.js?v=0bb69d73"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [
            {
              "name": "v",
              "value": "0bb69d73"
            }
          ],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "max-age=31536000,immutable"
            },
            {
              "name": "etag",
              "value": "W/\"31a9-kGD79lfzpVsZyxhjdkGX6vMKAF4\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "12713"
            }
          ],
          "content": {
            "size": 12713,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsKICByZXF1aXJlX3JlYWN0Cn0gZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL2NodW5rLVFKWUtVS0FMLmpzP3Y9MGJiNjlkNzMiOwppbXBvcnQgewogIF9fY29tbW9uSlMKfSBmcm9tICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvY2h1bmstNE1CTVJJTEEuanM/dj0wYmI2OWQ3MyI7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QvY2pzL3JlYWN0LWpzeC1ydW50aW1lLmRldmVsb3BtZW50LmpzCnZhciByZXF1aXJlX3JlYWN0X2pzeF9ydW50aW1lX2RldmVsb3BtZW50ID0gX19jb21tb25KUyh7CiAgIi4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC9janMvcmVhY3QtanN4LXJ1bnRpbWUuZGV2ZWxvcG1lbnQuanMiKGV4cG9ydHMpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIChmdW5jdGlvbigpIHsKICAgICAgZnVuY3Rpb24gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUpIHsKICAgICAgICBpZiAobnVsbCA9PSB0eXBlKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHR5cGUpCiAgICAgICAgICByZXR1cm4gdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfQ0xJRU5UX1JFRkVSRU5DRSA/IG51bGwgOiB0eXBlLmRpc3BsYXlOYW1lIHx8IHR5cGUubmFtZSB8fCBudWxsOwogICAgICAgIGlmICgic3RyaW5nIiA9PT0gdHlwZW9mIHR5cGUpIHJldHVybiB0eXBlOwogICAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgY2FzZSBSRUFDVF9GUkFHTUVOVF9UWVBFOgogICAgICAgICAgICByZXR1cm4gIkZyYWdtZW50IjsKICAgICAgICAgIGNhc2UgUkVBQ1RfUFJPRklMRVJfVFlQRToKICAgICAgICAgICAgcmV0dXJuICJQcm9maWxlciI7CiAgICAgICAgICBjYXNlIFJFQUNUX1NUUklDVF9NT0RFX1RZUEU6CiAgICAgICAgICAgIHJldHVybiAiU3RyaWN0TW9kZSI7CiAgICAgICAgICBjYXNlIFJFQUNUX1NVU1BFTlNFX1RZUEU6CiAgICAgICAgICAgIHJldHVybiAiU3VzcGVuc2UiOwogICAgICAgICAgY2FzZSBSRUFDVF9TVVNQRU5TRV9MSVNUX1RZUEU6CiAgICAgICAgICAgIHJldHVybiAiU3VzcGVuc2VMaXN0IjsKICAgICAgICAgIGNhc2UgUkVBQ1RfQUNUSVZJVFlfVFlQRToKICAgICAgICAgICAgcmV0dXJuICJBY3Rpdml0eSI7CiAgICAgICAgfQogICAgICAgIGlmICgib2JqZWN0IiA9PT0gdHlwZW9mIHR5cGUpCiAgICAgICAgICBzd2l0Y2ggKCJudW1iZXIiID09PSB0eXBlb2YgdHlwZS50YWcgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIlJlY2VpdmVkIGFuIHVuZXhwZWN0ZWQgb2JqZWN0IGluIGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSgpLiBUaGlzIGlzIGxpa2VseSBhIGJ1ZyBpbiBSZWFjdC4gUGxlYXNlIGZpbGUgYW4gaXNzdWUuIgogICAgICAgICAgKSwgdHlwZS4kJHR5cGVvZikgewogICAgICAgICAgICBjYXNlIFJFQUNUX1BPUlRBTF9UWVBFOgogICAgICAgICAgICAgIHJldHVybiAiUG9ydGFsIjsKICAgICAgICAgICAgY2FzZSBSRUFDVF9DT05URVhUX1RZUEU6CiAgICAgICAgICAgICAgcmV0dXJuICh0eXBlLmRpc3BsYXlOYW1lIHx8ICJDb250ZXh0IikgKyAiLlByb3ZpZGVyIjsKICAgICAgICAgICAgY2FzZSBSRUFDVF9DT05TVU1FUl9UWVBFOgogICAgICAgICAgICAgIHJldHVybiAodHlwZS5fY29udGV4dC5kaXNwbGF5TmFtZSB8fCAiQ29udGV4dCIpICsgIi5Db25zdW1lciI7CiAgICAgICAgICAgIGNhc2UgUkVBQ1RfRk9SV0FSRF9SRUZfVFlQRToKICAgICAgICAgICAgICB2YXIgaW5uZXJUeXBlID0gdHlwZS5yZW5kZXI7CiAgICAgICAgICAgICAgdHlwZSA9IHR5cGUuZGlzcGxheU5hbWU7CiAgICAgICAgICAgICAgdHlwZSB8fCAodHlwZSA9IGlubmVyVHlwZS5kaXNwbGF5TmFtZSB8fCBpbm5lclR5cGUubmFtZSB8fCAiIiwgdHlwZSA9ICIiICE9PSB0eXBlID8gIkZvcndhcmRSZWYoIiArIHR5cGUgKyAiKSIgOiAiRm9yd2FyZFJlZiIpOwogICAgICAgICAgICAgIHJldHVybiB0eXBlOwogICAgICAgICAgICBjYXNlIFJFQUNUX01FTU9fVFlQRToKICAgICAgICAgICAgICByZXR1cm4gaW5uZXJUeXBlID0gdHlwZS5kaXNwbGF5TmFtZSB8fCBudWxsLCBudWxsICE9PSBpbm5lclR5cGUgPyBpbm5lclR5cGUgOiBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodHlwZS50eXBlKSB8fCAiTWVtbyI7CiAgICAgICAgICAgIGNhc2UgUkVBQ1RfTEFaWV9UWVBFOgogICAgICAgICAgICAgIGlubmVyVHlwZSA9IHR5cGUuX3BheWxvYWQ7CiAgICAgICAgICAgICAgdHlwZSA9IHR5cGUuX2luaXQ7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodHlwZShpbm5lclR5cGUpKTsKICAgICAgICAgICAgICB9IGNhdGNoICh4KSB7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHRlc3RTdHJpbmdDb2VyY2lvbih2YWx1ZSkgewogICAgICAgIHJldHVybiAiIiArIHZhbHVlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNoZWNrS2V5U3RyaW5nQ29lcmNpb24odmFsdWUpIHsKICAgICAgICB0cnkgewogICAgICAgICAgdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKTsKICAgICAgICAgIHZhciBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSBmYWxzZTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSB0cnVlOwogICAgICAgIH0KICAgICAgICBpZiAoSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0KSB7CiAgICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQgPSBjb25zb2xlOwogICAgICAgICAgdmFyIEpTQ29tcGlsZXJfdGVtcF9jb25zdCA9IEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdC5lcnJvcjsKICAgICAgICAgIHZhciBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQkanNjb21wJDAgPSAiZnVuY3Rpb24iID09PSB0eXBlb2YgU3ltYm9sICYmIFN5bWJvbC50b1N0cmluZ1RhZyAmJiB2YWx1ZVtTeW1ib2wudG9TdHJpbmdUYWddIHx8IHZhbHVlLmNvbnN0cnVjdG9yLm5hbWUgfHwgIk9iamVjdCI7CiAgICAgICAgICBKU0NvbXBpbGVyX3RlbXBfY29uc3QuY2FsbCgKICAgICAgICAgICAgSlNDb21waWxlcl9pbmxpbmVfcmVzdWx0LAogICAgICAgICAgICAiVGhlIHByb3ZpZGVkIGtleSBpcyBhbiB1bnN1cHBvcnRlZCB0eXBlICVzLiBUaGlzIHZhbHVlIG11c3QgYmUgY29lcmNlZCB0byBhIHN0cmluZyBiZWZvcmUgdXNpbmcgaXQgaGVyZS4iLAogICAgICAgICAgICBKU0NvbXBpbGVyX2lubGluZV9yZXN1bHQkanNjb21wJDAKICAgICAgICAgICk7CiAgICAgICAgICByZXR1cm4gdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0VGFza05hbWUodHlwZSkgewogICAgICAgIGlmICh0eXBlID09PSBSRUFDVF9GUkFHTUVOVF9UWVBFKSByZXR1cm4gIjw+IjsKICAgICAgICBpZiAoIm9iamVjdCIgPT09IHR5cGVvZiB0eXBlICYmIG51bGwgIT09IHR5cGUgJiYgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfTEFaWV9UWVBFKQogICAgICAgICAgcmV0dXJuICI8Li4uPiI7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUpOwogICAgICAgICAgcmV0dXJuIG5hbWUgPyAiPCIgKyBuYW1lICsgIj4iIDogIjwuLi4+IjsKICAgICAgICB9IGNhdGNoICh4KSB7CiAgICAgICAgICByZXR1cm4gIjwuLi4+IjsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0T3duZXIoKSB7CiAgICAgICAgdmFyIGRpc3BhdGNoZXIgPSBSZWFjdFNoYXJlZEludGVybmFscy5BOwogICAgICAgIHJldHVybiBudWxsID09PSBkaXNwYXRjaGVyID8gbnVsbCA6IGRpc3BhdGNoZXIuZ2V0T3duZXIoKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBVbmtub3duT3duZXIoKSB7CiAgICAgICAgcmV0dXJuIEVycm9yKCJyZWFjdC1zdGFjay10b3AtZnJhbWUiKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBoYXNWYWxpZEtleShjb25maWcpIHsKICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChjb25maWcsICJrZXkiKSkgewogICAgICAgICAgdmFyIGdldHRlciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoY29uZmlnLCAia2V5IikuZ2V0OwogICAgICAgICAgaWYgKGdldHRlciAmJiBnZXR0ZXIuaXNSZWFjdFdhcm5pbmcpIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gY29uZmlnLmtleTsKICAgICAgfQogICAgICBmdW5jdGlvbiBkZWZpbmVLZXlQcm9wV2FybmluZ0dldHRlcihwcm9wcywgZGlzcGxheU5hbWUpIHsKICAgICAgICBmdW5jdGlvbiB3YXJuQWJvdXRBY2Nlc3NpbmdLZXkoKSB7CiAgICAgICAgICBzcGVjaWFsUHJvcEtleVdhcm5pbmdTaG93biB8fCAoc3BlY2lhbFByb3BLZXlXYXJuaW5nU2hvd24gPSB0cnVlLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAiJXM6IGBrZXlgIGlzIG5vdCBhIHByb3AuIFRyeWluZyB0byBhY2Nlc3MgaXQgd2lsbCByZXN1bHQgaW4gYHVuZGVmaW5lZGAgYmVpbmcgcmV0dXJuZWQuIElmIHlvdSBuZWVkIHRvIGFjY2VzcyB0aGUgc2FtZSB2YWx1ZSB3aXRoaW4gdGhlIGNoaWxkIGNvbXBvbmVudCwgeW91IHNob3VsZCBwYXNzIGl0IGFzIGEgZGlmZmVyZW50IHByb3AuIChodHRwczovL3JlYWN0LmRldi9saW5rL3NwZWNpYWwtcHJvcHMpIiwKICAgICAgICAgICAgZGlzcGxheU5hbWUKICAgICAgICAgICkpOwogICAgICAgIH0KICAgICAgICB3YXJuQWJvdXRBY2Nlc3NpbmdLZXkuaXNSZWFjdFdhcm5pbmcgPSB0cnVlOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm9wcywgImtleSIsIHsKICAgICAgICAgIGdldDogd2FybkFib3V0QWNjZXNzaW5nS2V5LAogICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZWxlbWVudFJlZkdldHRlcldpdGhEZXByZWNhdGlvbldhcm5pbmcoKSB7CiAgICAgICAgdmFyIGNvbXBvbmVudE5hbWUgPSBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUodGhpcy50eXBlKTsKICAgICAgICBkaWRXYXJuQWJvdXRFbGVtZW50UmVmW2NvbXBvbmVudE5hbWVdIHx8IChkaWRXYXJuQWJvdXRFbGVtZW50UmVmW2NvbXBvbmVudE5hbWVdID0gdHJ1ZSwgY29uc29sZS5lcnJvcigKICAgICAgICAgICJBY2Nlc3NpbmcgZWxlbWVudC5yZWYgd2FzIHJlbW92ZWQgaW4gUmVhY3QgMTkuIHJlZiBpcyBub3cgYSByZWd1bGFyIHByb3AuIEl0IHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBKU1ggRWxlbWVudCB0eXBlIGluIGEgZnV0dXJlIHJlbGVhc2UuIgogICAgICAgICkpOwogICAgICAgIGNvbXBvbmVudE5hbWUgPSB0aGlzLnByb3BzLnJlZjsKICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBjb21wb25lbnROYW1lID8gY29tcG9uZW50TmFtZSA6IG51bGw7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gUmVhY3RFbGVtZW50KHR5cGUsIGtleSwgc2VsZiwgc291cmNlLCBvd25lciwgcHJvcHMsIGRlYnVnU3RhY2ssIGRlYnVnVGFzaykgewogICAgICAgIHNlbGYgPSBwcm9wcy5yZWY7CiAgICAgICAgdHlwZSA9IHsKICAgICAgICAgICQkdHlwZW9mOiBSRUFDVF9FTEVNRU5UX1RZUEUsCiAgICAgICAgICB0eXBlLAogICAgICAgICAga2V5LAogICAgICAgICAgcHJvcHMsCiAgICAgICAgICBfb3duZXI6IG93bmVyCiAgICAgICAgfTsKICAgICAgICBudWxsICE9PSAodm9pZCAwICE9PSBzZWxmID8gc2VsZiA6IG51bGwpID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsICJyZWYiLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgICAgIGdldDogZWxlbWVudFJlZkdldHRlcldpdGhEZXByZWNhdGlvbldhcm5pbmcKICAgICAgICB9KSA6IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCAicmVmIiwgeyBlbnVtZXJhYmxlOiBmYWxzZSwgdmFsdWU6IG51bGwgfSk7CiAgICAgICAgdHlwZS5fc3RvcmUgPSB7fTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZS5fc3RvcmUsICJ2YWxpZGF0ZWQiLCB7CiAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLAogICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICAgIHZhbHVlOiAwCiAgICAgICAgfSk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsICJfZGVidWdJbmZvIiwgewogICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSwKICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgICAgICB2YWx1ZTogbnVsbAogICAgICAgIH0pOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCAiX2RlYnVnU3RhY2siLCB7CiAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLAogICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICAgIHZhbHVlOiBkZWJ1Z1N0YWNrCiAgICAgICAgfSk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsICJfZGVidWdUYXNrIiwgewogICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSwKICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgICAgICB2YWx1ZTogZGVidWdUYXNrCiAgICAgICAgfSk7CiAgICAgICAgT2JqZWN0LmZyZWV6ZSAmJiAoT2JqZWN0LmZyZWV6ZSh0eXBlLnByb3BzKSwgT2JqZWN0LmZyZWV6ZSh0eXBlKSk7CiAgICAgICAgcmV0dXJuIHR5cGU7CiAgICAgIH0KICAgICAgZnVuY3Rpb24ganN4REVWSW1wbCh0eXBlLCBjb25maWcsIG1heWJlS2V5LCBpc1N0YXRpY0NoaWxkcmVuLCBzb3VyY2UsIHNlbGYsIGRlYnVnU3RhY2ssIGRlYnVnVGFzaykgewogICAgICAgIHZhciBjaGlsZHJlbiA9IGNvbmZpZy5jaGlsZHJlbjsKICAgICAgICBpZiAodm9pZCAwICE9PSBjaGlsZHJlbikKICAgICAgICAgIGlmIChpc1N0YXRpY0NoaWxkcmVuKQogICAgICAgICAgICBpZiAoaXNBcnJheUltcGwoY2hpbGRyZW4pKSB7CiAgICAgICAgICAgICAgZm9yIChpc1N0YXRpY0NoaWxkcmVuID0gMDsgaXNTdGF0aWNDaGlsZHJlbiA8IGNoaWxkcmVuLmxlbmd0aDsgaXNTdGF0aWNDaGlsZHJlbisrKQogICAgICAgICAgICAgICAgdmFsaWRhdGVDaGlsZEtleXMoY2hpbGRyZW5baXNTdGF0aWNDaGlsZHJlbl0pOwogICAgICAgICAgICAgIE9iamVjdC5mcmVlemUgJiYgT2JqZWN0LmZyZWV6ZShjaGlsZHJlbik7CiAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgICAiUmVhY3QuanN4OiBTdGF0aWMgY2hpbGRyZW4gc2hvdWxkIGFsd2F5cyBiZSBhbiBhcnJheS4gWW91IGFyZSBsaWtlbHkgZXhwbGljaXRseSBjYWxsaW5nIFJlYWN0LmpzeHMgb3IgUmVhY3QuanN4REVWLiBVc2UgdGhlIEJhYmVsIHRyYW5zZm9ybSBpbnN0ZWFkLiIKICAgICAgICAgICAgICApOwogICAgICAgICAgZWxzZSB2YWxpZGF0ZUNoaWxkS2V5cyhjaGlsZHJlbik7CiAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoY29uZmlnLCAia2V5IikpIHsKICAgICAgICAgIGNoaWxkcmVuID0gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUpOwogICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhjb25maWcpLmZpbHRlcihmdW5jdGlvbihrKSB7CiAgICAgICAgICAgIHJldHVybiAia2V5IiAhPT0gazsKICAgICAgICAgIH0pOwogICAgICAgICAgaXNTdGF0aWNDaGlsZHJlbiA9IDAgPCBrZXlzLmxlbmd0aCA/ICJ7a2V5OiBzb21lS2V5LCAiICsga2V5cy5qb2luKCI6IC4uLiwgIikgKyAiOiAuLi59IiA6ICJ7a2V5OiBzb21lS2V5fSI7CiAgICAgICAgICBkaWRXYXJuQWJvdXRLZXlTcHJlYWRbY2hpbGRyZW4gKyBpc1N0YXRpY0NoaWxkcmVuXSB8fCAoa2V5cyA9IDAgPCBrZXlzLmxlbmd0aCA/ICJ7IiArIGtleXMuam9pbigiOiAuLi4sICIpICsgIjogLi4ufSIgOiAie30iLCBjb25zb2xlLmVycm9yKAogICAgICAgICAgICAnQSBwcm9wcyBvYmplY3QgY29udGFpbmluZyBhICJrZXkiIHByb3AgaXMgYmVpbmcgc3ByZWFkIGludG8gSlNYOlxuICBsZXQgcHJvcHMgPSAlcztcbiAgPCVzIHsuLi5wcm9wc30gLz5cblJlYWN0IGtleXMgbXVzdCBiZSBwYXNzZWQgZGlyZWN0bHkgdG8gSlNYIHdpdGhvdXQgdXNpbmcgc3ByZWFkOlxuICBsZXQgcHJvcHMgPSAlcztcbiAgPCVzIGtleT17c29tZUtleX0gey4uLnByb3BzfSAvPicsCiAgICAgICAgICAgIGlzU3RhdGljQ2hpbGRyZW4sCiAgICAgICAgICAgIGNoaWxkcmVuLAogICAgICAgICAgICBrZXlzLAogICAgICAgICAgICBjaGlsZHJlbgogICAgICAgICAgKSwgZGlkV2FybkFib3V0S2V5U3ByZWFkW2NoaWxkcmVuICsgaXNTdGF0aWNDaGlsZHJlbl0gPSB0cnVlKTsKICAgICAgICB9CiAgICAgICAgY2hpbGRyZW4gPSBudWxsOwogICAgICAgIHZvaWQgMCAhPT0gbWF5YmVLZXkgJiYgKGNoZWNrS2V5U3RyaW5nQ29lcmNpb24obWF5YmVLZXkpLCBjaGlsZHJlbiA9ICIiICsgbWF5YmVLZXkpOwogICAgICAgIGhhc1ZhbGlkS2V5KGNvbmZpZykgJiYgKGNoZWNrS2V5U3RyaW5nQ29lcmNpb24oY29uZmlnLmtleSksIGNoaWxkcmVuID0gIiIgKyBjb25maWcua2V5KTsKICAgICAgICBpZiAoImtleSIgaW4gY29uZmlnKSB7CiAgICAgICAgICBtYXliZUtleSA9IHt9OwogICAgICAgICAgZm9yICh2YXIgcHJvcE5hbWUgaW4gY29uZmlnKQogICAgICAgICAgICAia2V5IiAhPT0gcHJvcE5hbWUgJiYgKG1heWJlS2V5W3Byb3BOYW1lXSA9IGNvbmZpZ1twcm9wTmFtZV0pOwogICAgICAgIH0gZWxzZSBtYXliZUtleSA9IGNvbmZpZzsKICAgICAgICBjaGlsZHJlbiAmJiBkZWZpbmVLZXlQcm9wV2FybmluZ0dldHRlcigKICAgICAgICAgIG1heWJlS2V5LAogICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHR5cGUgPyB0eXBlLmRpc3BsYXlOYW1lIHx8IHR5cGUubmFtZSB8fCAiVW5rbm93biIgOiB0eXBlCiAgICAgICAgKTsKICAgICAgICByZXR1cm4gUmVhY3RFbGVtZW50KAogICAgICAgICAgdHlwZSwKICAgICAgICAgIGNoaWxkcmVuLAogICAgICAgICAgc2VsZiwKICAgICAgICAgIHNvdXJjZSwKICAgICAgICAgIGdldE93bmVyKCksCiAgICAgICAgICBtYXliZUtleSwKICAgICAgICAgIGRlYnVnU3RhY2ssCiAgICAgICAgICBkZWJ1Z1Rhc2sKICAgICAgICApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlQ2hpbGRLZXlzKG5vZGUpIHsKICAgICAgICAib2JqZWN0IiA9PT0gdHlwZW9mIG5vZGUgJiYgbnVsbCAhPT0gbm9kZSAmJiBub2RlLiQkdHlwZW9mID09PSBSRUFDVF9FTEVNRU5UX1RZUEUgJiYgbm9kZS5fc3RvcmUgJiYgKG5vZGUuX3N0b3JlLnZhbGlkYXRlZCA9IDEpOwogICAgICB9CiAgICAgIHZhciBSZWFjdCA9IHJlcXVpcmVfcmVhY3QoKSwgUkVBQ1RfRUxFTUVOVF9UWVBFID0gU3ltYm9sLmZvcigicmVhY3QudHJhbnNpdGlvbmFsLmVsZW1lbnQiKSwgUkVBQ1RfUE9SVEFMX1RZUEUgPSBTeW1ib2wuZm9yKCJyZWFjdC5wb3J0YWwiKSwgUkVBQ1RfRlJBR01FTlRfVFlQRSA9IFN5bWJvbC5mb3IoInJlYWN0LmZyYWdtZW50IiksIFJFQUNUX1NUUklDVF9NT0RFX1RZUEUgPSBTeW1ib2wuZm9yKCJyZWFjdC5zdHJpY3RfbW9kZSIpLCBSRUFDVF9QUk9GSUxFUl9UWVBFID0gU3ltYm9sLmZvcigicmVhY3QucHJvZmlsZXIiKTsKICAgICAgU3ltYm9sLmZvcigicmVhY3QucHJvdmlkZXIiKTsKICAgICAgdmFyIFJFQUNUX0NPTlNVTUVSX1RZUEUgPSBTeW1ib2wuZm9yKCJyZWFjdC5jb25zdW1lciIpLCBSRUFDVF9DT05URVhUX1RZUEUgPSBTeW1ib2wuZm9yKCJyZWFjdC5jb250ZXh0IiksIFJFQUNUX0ZPUldBUkRfUkVGX1RZUEUgPSBTeW1ib2wuZm9yKCJyZWFjdC5mb3J3YXJkX3JlZiIpLCBSRUFDVF9TVVNQRU5TRV9UWVBFID0gU3ltYm9sLmZvcigicmVhY3Quc3VzcGVuc2UiKSwgUkVBQ1RfU1VTUEVOU0VfTElTVF9UWVBFID0gU3ltYm9sLmZvcigicmVhY3Quc3VzcGVuc2VfbGlzdCIpLCBSRUFDVF9NRU1PX1RZUEUgPSBTeW1ib2wuZm9yKCJyZWFjdC5tZW1vIiksIFJFQUNUX0xBWllfVFlQRSA9IFN5bWJvbC5mb3IoInJlYWN0LmxhenkiKSwgUkVBQ1RfQUNUSVZJVFlfVFlQRSA9IFN5bWJvbC5mb3IoInJlYWN0LmFjdGl2aXR5IiksIFJFQUNUX0NMSUVOVF9SRUZFUkVOQ0UgPSBTeW1ib2wuZm9yKCJyZWFjdC5jbGllbnQucmVmZXJlbmNlIiksIFJlYWN0U2hhcmVkSW50ZXJuYWxzID0gUmVhY3QuX19DTElFTlRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfV0FSTl9VU0VSU19USEVZX0NBTk5PVF9VUEdSQURFLCBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksIGlzQXJyYXlJbXBsID0gQXJyYXkuaXNBcnJheSwgY3JlYXRlVGFzayA9IGNvbnNvbGUuY3JlYXRlVGFzayA/IGNvbnNvbGUuY3JlYXRlVGFzayA6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9OwogICAgICBSZWFjdCA9IHsKICAgICAgICByZWFjdF9zdGFja19ib3R0b21fZnJhbWU6IGZ1bmN0aW9uKGNhbGxTdGFja0ZvckVycm9yKSB7CiAgICAgICAgICByZXR1cm4gY2FsbFN0YWNrRm9yRXJyb3IoKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHZhciBzcGVjaWFsUHJvcEtleVdhcm5pbmdTaG93bjsKICAgICAgdmFyIGRpZFdhcm5BYm91dEVsZW1lbnRSZWYgPSB7fTsKICAgICAgdmFyIHVua25vd25Pd25lckRlYnVnU3RhY2sgPSBSZWFjdC5yZWFjdF9zdGFja19ib3R0b21fZnJhbWUuYmluZCgKICAgICAgICBSZWFjdCwKICAgICAgICBVbmtub3duT3duZXIKICAgICAgKSgpOwogICAgICB2YXIgdW5rbm93bk93bmVyRGVidWdUYXNrID0gY3JlYXRlVGFzayhnZXRUYXNrTmFtZShVbmtub3duT3duZXIpKTsKICAgICAgdmFyIGRpZFdhcm5BYm91dEtleVNwcmVhZCA9IHt9OwogICAgICBleHBvcnRzLkZyYWdtZW50ID0gUkVBQ1RfRlJBR01FTlRfVFlQRTsKICAgICAgZXhwb3J0cy5qc3ggPSBmdW5jdGlvbih0eXBlLCBjb25maWcsIG1heWJlS2V5LCBzb3VyY2UsIHNlbGYpIHsKICAgICAgICB2YXIgdHJhY2tBY3R1YWxPd25lciA9IDFlNCA+IFJlYWN0U2hhcmVkSW50ZXJuYWxzLnJlY2VudGx5Q3JlYXRlZE93bmVyU3RhY2tzKys7CiAgICAgICAgcmV0dXJuIGpzeERFVkltcGwoCiAgICAgICAgICB0eXBlLAogICAgICAgICAgY29uZmlnLAogICAgICAgICAgbWF5YmVLZXksCiAgICAgICAgICBmYWxzZSwKICAgICAgICAgIHNvdXJjZSwKICAgICAgICAgIHNlbGYsCiAgICAgICAgICB0cmFja0FjdHVhbE93bmVyID8gRXJyb3IoInJlYWN0LXN0YWNrLXRvcC1mcmFtZSIpIDogdW5rbm93bk93bmVyRGVidWdTdGFjaywKICAgICAgICAgIHRyYWNrQWN0dWFsT3duZXIgPyBjcmVhdGVUYXNrKGdldFRhc2tOYW1lKHR5cGUpKSA6IHVua25vd25Pd25lckRlYnVnVGFzawogICAgICAgICk7CiAgICAgIH07CiAgICAgIGV4cG9ydHMuanN4cyA9IGZ1bmN0aW9uKHR5cGUsIGNvbmZpZywgbWF5YmVLZXksIHNvdXJjZSwgc2VsZikgewogICAgICAgIHZhciB0cmFja0FjdHVhbE93bmVyID0gMWU0ID4gUmVhY3RTaGFyZWRJbnRlcm5hbHMucmVjZW50bHlDcmVhdGVkT3duZXJTdGFja3MrKzsKICAgICAgICByZXR1cm4ganN4REVWSW1wbCgKICAgICAgICAgIHR5cGUsCiAgICAgICAgICBjb25maWcsCiAgICAgICAgICBtYXliZUtleSwKICAgICAgICAgIHRydWUsCiAgICAgICAgICBzb3VyY2UsCiAgICAgICAgICBzZWxmLAogICAgICAgICAgdHJhY2tBY3R1YWxPd25lciA/IEVycm9yKCJyZWFjdC1zdGFjay10b3AtZnJhbWUiKSA6IHVua25vd25Pd25lckRlYnVnU3RhY2ssCiAgICAgICAgICB0cmFja0FjdHVhbE93bmVyID8gY3JlYXRlVGFzayhnZXRUYXNrTmFtZSh0eXBlKSkgOiB1bmtub3duT3duZXJEZWJ1Z1Rhc2sKICAgICAgICApOwogICAgICB9OwogICAgfSkoKTsKICB9Cn0pOwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0L2pzeC1ydW50aW1lLmpzCnZhciByZXF1aXJlX2pzeF9ydW50aW1lID0gX19jb21tb25KUyh7CiAgIi4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC9qc3gtcnVudGltZS5qcyIoZXhwb3J0cywgbW9kdWxlKSB7CiAgICBpZiAoZmFsc2UpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBudWxsOwogICAgfSBlbHNlIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlX3JlYWN0X2pzeF9ydW50aW1lX2RldmVsb3BtZW50KCk7CiAgICB9CiAgfQp9KTsKCmV4cG9ydCB7CiAgcmVxdWlyZV9qc3hfcnVudGltZQp9OwovKiEgQnVuZGxlZCBsaWNlbnNlIGluZm9ybWF0aW9uOgoKcmVhY3QvY2pzL3JlYWN0LWpzeC1ydW50aW1lLmRldmVsb3BtZW50LmpzOgogICgqKgogICAqIEBsaWNlbnNlIFJlYWN0CiAgICogcmVhY3QtanN4LXJ1bnRpbWUuZGV2ZWxvcG1lbnQuanMKICAgKgogICAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuCiAgICoKICAgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGUKICAgKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuCiAgICopCiovCi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLTJGWTJEQVlFLmpzLm1hcAo=",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 12713
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 19,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.485Z",
        "time": 35,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/App-routes.tsx",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/App.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"2b1b-Nv5cejmOE1X8oGmyGiX37trQxkc\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "24058"
            }
          ],
          "content": {
            "size": 24058,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsgY3JlYXRlSG90Q29udGV4dCBhcyBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQgfSBmcm9tICIvQHZpdGUvY2xpZW50IjtpbXBvcnQubWV0YS5ob3QgPSBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQoIi9zcmMvQXBwLXJvdXRlcy50c3giKTtpbXBvcnQgX192aXRlX19janNJbXBvcnQwX3JlYWN0X2pzeERldlJ1bnRpbWUgZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL3JlYWN0X2pzeC1kZXYtcnVudGltZS5qcz92PTBiYjY5ZDczIjsgY29uc3QgRnJhZ21lbnQgPSBfX3ZpdGVfX2Nqc0ltcG9ydDBfcmVhY3RfanN4RGV2UnVudGltZVsiRnJhZ21lbnQiXTsgY29uc3QganN4REVWID0gX192aXRlX19janNJbXBvcnQwX3JlYWN0X2pzeERldlJ1bnRpbWVbImpzeERFViJdOwppbXBvcnQgKiBhcyBSZWZyZXNoUnVudGltZSBmcm9tICIvQHJlYWN0LXJlZnJlc2giOwpjb25zdCBpbldlYldvcmtlciA9IHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSAhPT0gInVuZGVmaW5lZCIgJiYgc2VsZiBpbnN0YW5jZW9mIFdvcmtlckdsb2JhbFNjb3BlOwpsZXQgcHJldlJlZnJlc2hSZWc7CmxldCBwcmV2UmVmcmVzaFNpZzsKaWYgKGltcG9ydC5tZXRhLmhvdCAmJiAhaW5XZWJXb3JrZXIpIHsKICBpZiAoIXdpbmRvdy4kUmVmcmVzaFJlZyQpIHsKICAgIHRocm93IG5ldyBFcnJvcigKICAgICAgIkB2aXRlanMvcGx1Z2luLXJlYWN0IGNhbid0IGRldGVjdCBwcmVhbWJsZS4gU29tZXRoaW5nIGlzIHdyb25nLiIKICAgICk7CiAgfQogIHByZXZSZWZyZXNoUmVnID0gd2luZG93LiRSZWZyZXNoUmVnJDsKICBwcmV2UmVmcmVzaFNpZyA9IHdpbmRvdy4kUmVmcmVzaFNpZyQ7CiAgd2luZG93LiRSZWZyZXNoUmVnJCA9IFJlZnJlc2hSdW50aW1lLmdldFJlZnJlc2hSZWcoIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvQXBwLXJvdXRlcy50c3giKTsKICB3aW5kb3cuJFJlZnJlc2hTaWckID0gUmVmcmVzaFJ1bnRpbWUuY3JlYXRlU2lnbmF0dXJlRnVuY3Rpb25Gb3JUcmFuc2Zvcm07Cn0KdmFyIF9zID0gJFJlZnJlc2hTaWckKCksIF9zMiA9ICRSZWZyZXNoU2lnJCgpLCBfczMgPSAkUmVmcmVzaFNpZyQoKTsKaW1wb3J0IE1vdmllRm9ybSBmcm9tICIvc3JjL2NvbXBvbmVudHMvbW92aWUtZm9ybS9pbmRleC50cyI7CmltcG9ydCBNb3ZpZURldGFpbHMgZnJvbSAiL3NyYy9jb21wb25lbnRzL21vdmllLWRldGFpbHMvaW5kZXgudHMiOwppbXBvcnQgTW92aWVMaXN0IGZyb20gIi9zcmMvY29tcG9uZW50cy9tb3ZpZS1saXN0LnRzeCI7CmltcG9ydCBMb2dpbkZvcm0gZnJvbSAiL3NyYy9jb21wb25lbnRzL2xvZ2luL2xvZ2luLWZvcm0udHN4IjsKaW1wb3J0IEZpbGVEb3dubG9hZCBmcm9tICIvc3JjL2NvbXBvbmVudHMvZmlsZS1kb3dubG9hZC9maWxlLWRvd25sb2FkLnRzeCI7CmltcG9ydCB7CiAgQnJvd3NlclJvdXRlciwKICBOYXZpZ2F0ZSwKICBSb3V0ZSwKICBSb3V0ZXMsCiAgdXNlU2VhcmNoUGFyYW1zLAogIHVzZUxvY2F0aW9uCn0gZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL3JlYWN0LXJvdXRlci1kb20uanM/dj0wYmI2OWQ3MyI7CmltcG9ydCBfX3ZpdGVfX2Nqc0ltcG9ydDlfcmVhY3QgZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL3JlYWN0LmpzP3Y9MGJiNjlkNzMiOyBjb25zdCB1c2VFZmZlY3QgPSBfX3ZpdGVfX2Nqc0ltcG9ydDlfcmVhY3RbInVzZUVmZmVjdCJdOyBjb25zdCB1c2VTdGF0ZSA9IF9fdml0ZV9fY2pzSW1wb3J0OV9yZWFjdFsidXNlU3RhdGUiXTsKaW1wb3J0IHsgdG9rZW5TZXJ2aWNlIH0gZnJvbSAiL3NyYy9zZXJ2aWNlcy90b2tlbi1zZXJ2aWNlLnRzIjsKaW1wb3J0IFVzZXJIZWFkZXIgZnJvbSAiL3NyYy9jb21wb25lbnRzL2hlYWRlci91c2VyLWhlYWRlci50c3giOwphc3luYyBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQoKSB7CiAgY29uc3QgY3VycmVudFVzZXIgPSB0b2tlblNlcnZpY2UuZ2V0Q3VycmVudFVzZXIoKTsKICBjb25zdCB0b2tlbiA9IHRva2VuU2VydmljZS5nZXRUb2tlbigpOwogIGNvbnN0IGhhc0V4aXN0aW5nQXV0aCA9ICEhY3VycmVudFVzZXI/LnVzZXJJZCAmJiB0b2tlbiAmJiBPYmplY3Qua2V5cyh0b2tlbikubGVuZ3RoID4gMDsKICBpZiAoaGFzRXhpc3RpbmdBdXRoKSB7CiAgICB0b2tlblNlcnZpY2UudmFsaWRhdGVBdXRoV2l0aEJhY2tlbmQoKS5jYXRjaCgoZXJyKSA9PiB7CiAgICAgIGNvbnNvbGUuZXJyb3IoIkJhY2tncm91bmQgYXV0aCB2YWxpZGF0aW9uIGZhaWxlZDoiLCBlcnIpOwogICAgfSk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgdHJ5IHsKICAgIHJldHVybiBhd2FpdCB0b2tlblNlcnZpY2UudmFsaWRhdGVBdXRoV2l0aEJhY2tlbmQoKTsKICB9IGNhdGNoIChlcnJvcikgewogICAgY29uc29sZS5lcnJvcigiQXV0aCB2YWxpZGF0aW9uIGVycm9yOiIsIGVycm9yKTsKICAgIHJldHVybiBmYWxzZTsKICB9Cn0KZnVuY3Rpb24gUHJvdGVjdGVkUm91dGUoeyBjaGlsZHJlbiB9KSB7CiAgX3MoKTsKICBjb25zdCBsb2NhdGlvbiA9IHVzZUxvY2F0aW9uKCk7CiAgY29uc3QgW2NoZWNraW5nLCBzZXRDaGVja2luZ10gPSB1c2VTdGF0ZSh0cnVlKTsKICBjb25zdCBbYXV0aGVudGljYXRlZCwgc2V0QXV0aGVudGljYXRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGNvbnN0IGNoZWNrQXV0aCA9IGFzeW5jICgpID0+IHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBhdXRoID0gYXdhaXQgaXNBdXRoZW50aWNhdGVkKCk7CiAgICAgICAgc2V0QXV0aGVudGljYXRlZChhdXRoKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCJBdXRoZW50aWNhdGlvbiBjaGVjayBmYWlsZWQ6IiwgZXJyb3IpOwogICAgICAgIHNldEF1dGhlbnRpY2F0ZWQoZmFsc2UpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHNldENoZWNraW5nKGZhbHNlKTsKICAgICAgfQogICAgfTsKICAgIGNoZWNrQXV0aCgpLmNhdGNoKChlcnJvcikgPT4gewogICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBpbiBjaGVja0F1dGg6IiwgZXJyb3IpOwogICAgICBzZXRBdXRoZW50aWNhdGVkKGZhbHNlKTsKICAgICAgc2V0Q2hlY2tpbmcoZmFsc2UpOwogICAgfSk7CiAgfSwgW2xvY2F0aW9uLnBhdGhuYW1lXSk7CiAgaWYgKGNoZWNraW5nKSB7CiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeERFVigiZGl2IiwgeyBjaGlsZHJlbjogIkNoZWNraW5nIGF1dGhlbnRpY2F0aW9uLi4uIiB9LCB2b2lkIDAsIGZhbHNlLCB7CiAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9BcHAtcm91dGVzLnRzeCIsCiAgICAgIGxpbmVOdW1iZXI6IDEwNiwKICAgICAgY29sdW1uTnVtYmVyOiAxMgogICAgfSwgdGhpcyk7CiAgfQogIGlmICghYXV0aGVudGljYXRlZCkgewogICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoTmF2aWdhdGUsIHsgdG86ICIvbG9naW4iLCBzdGF0ZTogeyBmcm9tOiBsb2NhdGlvbi5wYXRobmFtZSB9LCByZXBsYWNlOiB0cnVlIH0sIHZvaWQgMCwgZmFsc2UsIHsKICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL0FwcC1yb3V0ZXMudHN4IiwKICAgICAgbGluZU51bWJlcjogMTExLAogICAgICBjb2x1bW5OdW1iZXI6IDEyCiAgICB9LCB0aGlzKTsKICB9CiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFsKICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoVXNlckhlYWRlciwge30sIHZvaWQgMCwgZmFsc2UsIHsKICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL0FwcC1yb3V0ZXMudHN4IiwKICAgICAgbGluZU51bWJlcjogMTE2LAogICAgICBjb2x1bW5OdW1iZXI6IDcKICAgIH0sIHRoaXMpLAogICAgY2hpbGRyZW4KICBdIH0sIHZvaWQgMCwgdHJ1ZSwgewogICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL0FwcC1yb3V0ZXMudHN4IiwKICAgIGxpbmVOdW1iZXI6IDExNSwKICAgIGNvbHVtbk51bWJlcjogNQogIH0sIHRoaXMpOwp9Cl9zKFByb3RlY3RlZFJvdXRlLCAiVnJKSGovOEx3N0FpaVZnTGh6aHI0aEtTWlprPSIsIGZhbHNlLCBmdW5jdGlvbigpIHsKICByZXR1cm4gW3VzZUxvY2F0aW9uXTsKfSk7Cl9jID0gUHJvdGVjdGVkUm91dGU7CmZ1bmN0aW9uIFRva2VuU3luY2hyb25pemVyKCkgewogIF9zMigpOwogIHVzZUVmZmVjdCgoKSA9PiB7CiAgICBjb25zdCB1cGRhdGVkID0gdG9rZW5TZXJ2aWNlLnVwZGF0ZUZyb21Ccm93c2VyQ29va2llcygpOwogICAgY29uc29sZS5sb2coIlRva2VuIHN0YXRlIHVwZGF0ZWQgZnJvbSBicm93c2VyIGNvb2tpZXM6IiwgdXBkYXRlZCk7CiAgfSwgW10pOwogIHJldHVybiBudWxsOwp9Cl9zMihUb2tlblN5bmNocm9uaXplciwgIk9EN2JCcFp2YTVPMmpPK1B1ZjAwaEtpdlA3Yz0iKTsKX2MyID0gVG9rZW5TeW5jaHJvbml6ZXI7CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFwcFJvdXRlcyh7IG1vdmllcywgb25EZWxldGUgfSkgewogIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4REVWKEJyb3dzZXJSb3V0ZXIsIHsgY2hpbGRyZW46IFsKICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoVG9rZW5TeW5jaHJvbml6ZXIsIHt9LCB2b2lkIDAsIGZhbHNlLCB7CiAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9BcHAtcm91dGVzLnRzeCIsCiAgICAgIGxpbmVOdW1iZXI6IDEzNSwKICAgICAgY29sdW1uTnVtYmVyOiA3CiAgICB9LCB0aGlzKSwKICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoUm91dGVzLCB7IGNoaWxkcmVuOiBbCiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoUm91dGUsIHsgcGF0aDogIi9sb2dpbiIsIGVsZW1lbnQ6IC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoTG9naW5Gb3JtLCB7fSwgdm9pZCAwLCBmYWxzZSwgewogICAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9BcHAtcm91dGVzLnRzeCIsCiAgICAgICAgbGluZU51bWJlcjogMTM4LAogICAgICAgIGNvbHVtbk51bWJlcjogMzkKICAgICAgfSwgdGhpcykgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9BcHAtcm91dGVzLnRzeCIsCiAgICAgICAgbGluZU51bWJlcjogMTM4LAogICAgICAgIGNvbHVtbk51bWJlcjogOQogICAgICB9LCB0aGlzKSwKICAgICAgLyogQF9fUFVSRV9fICovIGpzeERFVigKICAgICAgICBSb3V0ZSwKICAgICAgICB7CiAgICAgICAgICBwYXRoOiAiL21vdmllcyIsCiAgICAgICAgICBlbGVtZW50OiAvKiBAX19QVVJFX18gKi8ganN4REVWKFByb3RlY3RlZFJvdXRlLCB7IGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4REVWKE1vdmllTGlzdFdpdGhGb3JtLCB7IG1vdmllcywgb25EZWxldGUgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgICAgICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvQXBwLXJvdXRlcy50c3giLAogICAgICAgICAgICBsaW5lTnVtYmVyOiAxNDUsCiAgICAgICAgICAgIGNvbHVtbk51bWJlcjogMTUKICAgICAgICAgIH0sIHRoaXMpIH0sIHZvaWQgMCwgZmFsc2UsIHsKICAgICAgICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL0FwcC1yb3V0ZXMudHN4IiwKICAgICAgICAgICAgbGluZU51bWJlcjogMTQ0LAogICAgICAgICAgICBjb2x1bW5OdW1iZXI6IDExCiAgICAgICAgICB9LCB0aGlzKQogICAgICAgIH0sCiAgICAgICAgdm9pZCAwLAogICAgICAgIGZhbHNlLAogICAgICAgIHsKICAgICAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9BcHAtcm91dGVzLnRzeCIsCiAgICAgICAgICBsaW5lTnVtYmVyOiAxNDEsCiAgICAgICAgICBjb2x1bW5OdW1iZXI6IDkKICAgICAgICB9LAogICAgICAgIHRoaXMKICAgICAgKSwKICAgICAgLyogQF9fUFVSRV9fICovIGpzeERFVigKICAgICAgICBSb3V0ZSwKICAgICAgICB7CiAgICAgICAgICBwYXRoOiAiL21vdmllcy86aWQiLAogICAgICAgICAgZWxlbWVudDogLyogQF9fUFVSRV9fICovIGpzeERFVihQcm90ZWN0ZWRSb3V0ZSwgeyBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeERFVihNb3ZpZURldGFpbHMsIHt9LCB2b2lkIDAsIGZhbHNlLCB7CiAgICAgICAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9BcHAtcm91dGVzLnRzeCIsCiAgICAgICAgICAgIGxpbmVOdW1iZXI6IDE1MywKICAgICAgICAgICAgY29sdW1uTnVtYmVyOiAxNQogICAgICAgICAgfSwgdGhpcykgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgICAgICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvQXBwLXJvdXRlcy50c3giLAogICAgICAgICAgICBsaW5lTnVtYmVyOiAxNTIsCiAgICAgICAgICAgIGNvbHVtbk51bWJlcjogMTEKICAgICAgICAgIH0sIHRoaXMpCiAgICAgICAgfSwKICAgICAgICB2b2lkIDAsCiAgICAgICAgZmFsc2UsCiAgICAgICAgewogICAgICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL0FwcC1yb3V0ZXMudHN4IiwKICAgICAgICAgIGxpbmVOdW1iZXI6IDE0OSwKICAgICAgICAgIGNvbHVtbk51bWJlcjogOQogICAgICAgIH0sCiAgICAgICAgdGhpcwogICAgICApLAogICAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKAogICAgICAgIFJvdXRlLAogICAgICAgIHsKICAgICAgICAgIHBhdGg6ICIvZG93bmxvYWRzIiwKICAgICAgICAgIGVsZW1lbnQ6IC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoUHJvdGVjdGVkUm91dGUsIHsgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoRmlsZURvd25sb2FkLCB7fSwgdm9pZCAwLCBmYWxzZSwgewogICAgICAgICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvQXBwLXJvdXRlcy50c3giLAogICAgICAgICAgICBsaW5lTnVtYmVyOiAxNjMsCiAgICAgICAgICAgIGNvbHVtbk51bWJlcjogMTUKICAgICAgICAgIH0sIHRoaXMpIH0sIHZvaWQgMCwgZmFsc2UsIHsKICAgICAgICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL0FwcC1yb3V0ZXMudHN4IiwKICAgICAgICAgICAgbGluZU51bWJlcjogMTYyLAogICAgICAgICAgICBjb2x1bW5OdW1iZXI6IDExCiAgICAgICAgICB9LCB0aGlzKQogICAgICAgIH0sCiAgICAgICAgdm9pZCAwLAogICAgICAgIGZhbHNlLAogICAgICAgIHsKICAgICAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9BcHAtcm91dGVzLnRzeCIsCiAgICAgICAgICBsaW5lTnVtYmVyOiAxNTksCiAgICAgICAgICBjb2x1bW5OdW1iZXI6IDkKICAgICAgICB9LAogICAgICAgIHRoaXMKICAgICAgKSwKICAgICAgLyogQF9fUFVSRV9fICovIGpzeERFVihSb3V0ZSwgeyBwYXRoOiAiLyIsIGVsZW1lbnQ6IC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoTmF2aWdhdGUsIHsgdG86ICIvbW92aWVzIiwgcmVwbGFjZTogdHJ1ZSB9LCB2b2lkIDAsIGZhbHNlLCB7CiAgICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL0FwcC1yb3V0ZXMudHN4IiwKICAgICAgICBsaW5lTnVtYmVyOiAxNjksCiAgICAgICAgY29sdW1uTnVtYmVyOiAzNAogICAgICB9LCB0aGlzKSB9LCB2b2lkIDAsIGZhbHNlLCB7CiAgICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL0FwcC1yb3V0ZXMudHN4IiwKICAgICAgICBsaW5lTnVtYmVyOiAxNjksCiAgICAgICAgY29sdW1uTnVtYmVyOiA5CiAgICAgIH0sIHRoaXMpCiAgICBdIH0sIHZvaWQgMCwgdHJ1ZSwgewogICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvQXBwLXJvdXRlcy50c3giLAogICAgICBsaW5lTnVtYmVyOiAxMzYsCiAgICAgIGNvbHVtbk51bWJlcjogNwogICAgfSwgdGhpcykKICBdIH0sIHZvaWQgMCwgdHJ1ZSwgewogICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL0FwcC1yb3V0ZXMudHN4IiwKICAgIGxpbmVOdW1iZXI6IDEzNCwKICAgIGNvbHVtbk51bWJlcjogNQogIH0sIHRoaXMpOwp9Cl9jMyA9IEFwcFJvdXRlczsKZnVuY3Rpb24gTW92aWVMaXN0V2l0aEZvcm0oeyBtb3ZpZXMsIG9uRGVsZXRlIH0pIHsKICBfczMoKTsKICBjb25zdCBbc2VhcmNoUGFyYW1zXSA9IHVzZVNlYXJjaFBhcmFtcygpOwogIGNvbnN0IG1vdmllTmFtZSA9IHNlYXJjaFBhcmFtcy5nZXQoIm5hbWUiKTsKICByZXR1cm4gbW92aWVOYW1lID8gLyogQF9fUFVSRV9fICovIGpzeERFVihNb3ZpZURldGFpbHMsIHt9LCB2b2lkIDAsIGZhbHNlLCB7CiAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvQXBwLXJvdXRlcy50c3giLAogICAgbGluZU51bWJlcjogMTkzLAogICAgY29sdW1uTnVtYmVyOiAzCiAgfSwgdGhpcykgOiAvKiBAX19QVVJFX18gKi8ganN4REVWKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbCiAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKE1vdmllTGlzdCwgeyBtb3ZpZXMsIG9uRGVsZXRlIH0sIHZvaWQgMCwgZmFsc2UsIHsKICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL0FwcC1yb3V0ZXMudHN4IiwKICAgICAgbGluZU51bWJlcjogMTk2LAogICAgICBjb2x1bW5OdW1iZXI6IDcKICAgIH0sIHRoaXMpLAogICAgLyogQF9fUFVSRV9fICovIGpzeERFVihNb3ZpZUZvcm0sIHt9LCB2b2lkIDAsIGZhbHNlLCB7CiAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9BcHAtcm91dGVzLnRzeCIsCiAgICAgIGxpbmVOdW1iZXI6IDE5NywKICAgICAgY29sdW1uTnVtYmVyOiA3CiAgICB9LCB0aGlzKQogIF0gfSwgdm9pZCAwLCB0cnVlLCB7CiAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvQXBwLXJvdXRlcy50c3giLAogICAgbGluZU51bWJlcjogMTk1LAogICAgY29sdW1uTnVtYmVyOiAzCiAgfSwgdGhpcyk7Cn0KX3MzKE1vdmllTGlzdFdpdGhGb3JtLCAiSFd4TlFFR0pHU2xzUEozdWJCQjMwODFtdG5nPSIsIGZhbHNlLCBmdW5jdGlvbigpIHsKICByZXR1cm4gW3VzZVNlYXJjaFBhcmFtc107Cn0pOwpfYzQgPSBNb3ZpZUxpc3RXaXRoRm9ybTsKdmFyIF9jLCBfYzIsIF9jMywgX2M0OwokUmVmcmVzaFJlZyQoX2MsICJQcm90ZWN0ZWRSb3V0ZSIpOwokUmVmcmVzaFJlZyQoX2MyLCAiVG9rZW5TeW5jaHJvbml6ZXIiKTsKJFJlZnJlc2hSZWckKF9jMywgIkFwcFJvdXRlcyIpOwokUmVmcmVzaFJlZyQoX2M0LCAiTW92aWVMaXN0V2l0aEZvcm0iKTsKaWYgKGltcG9ydC5tZXRhLmhvdCAmJiAhaW5XZWJXb3JrZXIpIHsKICB3aW5kb3cuJFJlZnJlc2hSZWckID0gcHJldlJlZnJlc2hSZWc7CiAgd2luZG93LiRSZWZyZXNoU2lnJCA9IHByZXZSZWZyZXNoU2lnOwp9CmlmIChpbXBvcnQubWV0YS5ob3QgJiYgIWluV2ViV29ya2VyKSB7CiAgUmVmcmVzaFJ1bnRpbWUuX19obXJfaW1wb3J0KGltcG9ydC5tZXRhLnVybCkudGhlbigoY3VycmVudEV4cG9ydHMpID0+IHsKICAgIFJlZnJlc2hSdW50aW1lLnJlZ2lzdGVyRXhwb3J0c0ZvclJlYWN0UmVmcmVzaCgiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9BcHAtcm91dGVzLnRzeCIsIGN1cnJlbnRFeHBvcnRzKTsKICAgIGltcG9ydC5tZXRhLmhvdC5hY2NlcHQoKG5leHRFeHBvcnRzKSA9PiB7CiAgICAgIGlmICghbmV4dEV4cG9ydHMpIHJldHVybjsKICAgICAgY29uc3QgaW52YWxpZGF0ZU1lc3NhZ2UgPSBSZWZyZXNoUnVudGltZS52YWxpZGF0ZVJlZnJlc2hCb3VuZGFyeUFuZEVucXVldWVVcGRhdGUoIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvQXBwLXJvdXRlcy50c3giLCBjdXJyZW50RXhwb3J0cywgbmV4dEV4cG9ydHMpOwogICAgICBpZiAoaW52YWxpZGF0ZU1lc3NhZ2UpIGltcG9ydC5tZXRhLmhvdC5pbnZhbGlkYXRlKGludmFsaWRhdGVNZXNzYWdlKTsKICAgIH0pOwogIH0pOwp9CgovLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p0WVhCd2FXNW5jeUk2SWtGQmMwWlhMRk5CVTFBc1ZVRlVUenM3T3pzN096czdPenM3T3pzN096czdRVUYwUmxnc1QwRkJUMEVzWlVGQlpUdEJRVU4wUWl4UFFVRlBReXhyUWtGQmEwSTdRVUZEZWtJc1QwRkJUME1zWlVGQlpUdEJRVU4wUWl4UFFVRlBReXhsUVVGbE8wRkJRM1JDTEU5QlFVOURMR3RDUVVGclFqdEJRVU42UWp0QlFVRkJMRVZCUTBWRE8wRkJRVUZCTEVWQlEwRkRPMEZCUVVGQkxFVkJRMEZETzBGQlFVRkJMRVZCUTBGRE8wRkJRVUZCTEVWQlEwRkRPMEZCUVVGQkxFVkJRMEZETzBGQlFVRkJMRTlCUTBzN1FVRkRVQ3hUUVVGVFF5eFhRVUZYUXl4blFrRkJaMEk3UVVGSGNFTXNVMEZCVTBNc2IwSkJRVzlDTzBGQlF6ZENMRTlCUVU5RExHZENRVUZuUWp0QlFWbDJRaXhsUVVGbFF5eHJRa0ZCYjBNN1FVRkZha1FzVVVGQlRVTXNZMEZCWTBnc1lVRkJZVWtzWlVGQlpUdEJRVU5vUkN4UlFVRk5ReXhSUVVGUlRDeGhRVUZoVFN4VFFVRlRPMEZCUTNCRExGRkJRVTFETEd0Q1FVTktMRU5CUVVNc1EwRkJRMG9zWVVGQllVc3NWVUZCVlVnc1UwRkJVMGtzVDBGQlQwTXNTMEZCUzB3c1MwRkJTeXhGUVVGRlRTeFRRVUZUTzBGQlJXaEZMRTFCUVVsS0xHbENRVUZwUWp0QlFVZHVRbEFzYVVKQlFXRlpMSGRDUVVGM1FpeEZRVUZGUXl4TlFVRk5MRU5CUVVORExGRkJRVkU3UVVGRGNFUkRMR05CUVZGRExFMUJRVTBzYzBOQlFYTkRSaXhIUVVGSE8wRkJRVUVzU1VGRGVrUXNRMEZCUXp0QlFVTkVMRmRCUVU4N1FVRkJRU3hGUVVOVU8wRkJSMEVzVFVGQlNUdEJRVU5HTEZkQlFVOHNUVUZCVFdRc1lVRkJZVmtzZDBKQlFYZENPMEZCUVVFc1JVRkRjRVFzVTBGQlUwa3NUMEZCVHp0QlFVTmtSQ3haUVVGUlF5eE5RVUZOTERCQ1FVRXdRa0VzUzBGQlN6dEJRVU0zUXl4WFFVRlBPMEZCUVVFc1JVRkRWRHRCUVVOR08wRkJTMEVzVTBGQlUwTXNaVUZCWlN4RlFVRkZReXhUUVVGM1F5eEhRVUZITzBGQlFVRkRMRXRCUVVFN1FVRkRia1VzVVVGQlRVTXNWMEZCVjNaQ0xGbEJRVms3UVVGRE4wSXNVVUZCVFN4RFFVRkRkMElzVlVGQlZVTXNWMEZCVnl4SlFVRkpka0lzVTBGQlV5eEpRVUZKTzBGQlF6ZERMRkZCUVUwc1EwRkJRM2RDTEdWQlFXVkRMR2RDUVVGblFpeEpRVUZKZWtJc1UwRkJVeXhMUVVGTE8wRkJSWGhFUkN4WlFVRlZMRTFCUVUwN1FVRkZaQ3hWUVVGTk1rSXNXVUZCV1N4WlFVRlpPMEZCUXpWQ0xGVkJRVWs3UVVGRlJpeGpRVUZOUXl4UFFVRlBMRTFCUVUxNFFpeG5Ra0ZCWjBJN1FVRkRia056UWl4NVFrRkJhVUpGTEVsQlFVazdRVUZCUVN4TlFVTjJRaXhUUVVGVFZpeFBRVUZQTzBGQlEyUkVMR2RDUVVGUlF5eE5RVUZOTEdkRFFVRm5RMEVzUzBGQlN6dEJRVU51UkZFc2VVSkJRV2xDTEV0QlFVczdRVUZCUVN4TlFVTjRRaXhWUVVGRE8wRkJRME5HTEc5Q1FVRlpMRXRCUVVzN1FVRkJRU3hOUVVOdVFqdEJRVUZCTEVsQlEwWTdRVUZIUVVjc1kwRkJWU3hGUVVGRldpeE5RVUZOTEVOQlFVTkhMRlZCUVZVN1FVRkRNMEpFTEdOQlFWRkRMRTFCUVUwc2RVSkJRWFZDUVN4TFFVRkxPMEZCUXpGRFVTeDFRa0ZCYVVJc1MwRkJTenRCUVVOMFFrWXNhMEpCUVZrc1MwRkJTenRCUVVGQkxFbEJRMjVDTEVOQlFVTTdRVUZCUVN4RlFVTklMRWRCUVVjc1EwRkJRMFlzVTBGQlUwOHNVVUZCVVN4RFFVRkRPMEZCUlhSQ0xFMUJRVWxPTEZWQlFWVTdRVUZEV2l4WFFVRlBMSFZDUVVGRExGTkJRVWtzTUVOQlFVdzdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRU3hYUVVFclFqdEJRVUZCTEVWQlEzaERPMEZCUlVFc1RVRkJTU3hEUVVGRFJTeGxRVUZsTzBGQlJXeENMRmRCUVU4c2RVSkJRVU1zV1VGQlV5eEpRVUZITEZWQlFWTXNUMEZCVHl4RlFVRkZTeXhOUVVGTlVpeFRRVUZUVHl4VFFVRlRMRWRCUVVjc1UwRkJUeXhSUVVGcVJUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJMRmRCUVdsRk8wRkJRVUVzUlVGRE1VVTdRVUZGUVN4VFFVTkZMRzFEUVVORk8wRkJRVUVzTWtKQlFVTXNaMEpCUVVRN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFTeFhRVUZYTzBGQlFVRXNTVUZEVmxRN1FVRkJRVUVzVDBGR1NEdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJMRk5CUjBFN1FVRkZTanRCUVVWQlF5eEhRVGREVTBZc1owSkJRV003UVVGQlFTeFZRVU5LY0VJc1YwRkJWenRCUVVGQk8wRkJRVUZuUXl4TFFVUnlRbG83UVVFNFExUXNVMEZCVTJFc2IwSkJRVzlDTzBGQlFVRkRMRTFCUVVFN1FVRkRNMEpxUXl4WlFVRlZMRTFCUVUwN1FVRkZaQ3hWUVVGTmEwTXNWVUZCVldoRExHRkJRV0ZwUXl4NVFrRkJlVUk3UVVGRGRFUnNRaXhaUVVGUmJVSXNTVUZCU1N3MlEwRkJOa05HTEU5QlFVODdRVUZCUVN4RlFVTnNSU3hIUVVGSExFVkJRVVU3UVVGRFRDeFRRVUZQTzBGQlExUTdRVUZCUTBRc1NVRlFVVVFzYlVKQlFXbENPMEZCUVVGTExFMUJRV3BDVER0QlFWTlVMSGRDUVVGM1FrMHNWVUZCVlN4RlFVRkZReXhSUVVGUlF5eFRRVUY1UWl4SFFVRkhPMEZCUTNSRkxGTkJRMFVzZFVKQlFVTXNhVUpCUTBNN1FVRkJRU3d5UWtGQlF5eDFRa0ZCUkR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQkxGZEJRV3RDTzBGQlFVRXNTVUZEYkVJc2RVSkJRVU1zVlVGRlF6dEJRVUZCTERaQ1FVRkRMRk5CUVUwc1RVRkJTeXhWUVVGVExGTkJRVk1zZFVKQlFVTXNaVUZCUkR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQkxHRkJRVlVzUzBGQmVFTTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRU3hoUVVFMFF6dEJRVUZCTEUxQlJ6VkRPMEZCUVVFc1VVRkJRenRCUVVGQk8wRkJRVUVzVlVGRFF5eE5RVUZMTzBGQlFVRXNWVUZEVEN4VFFVTkZMSFZDUVVGRExHdENRVU5ETEdsRFFVRkRMSEZDUVVGclFpeFJRVUZuUWl4WlFVRnVRenRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTEdsQ1FVRnpSQ3hMUVVSNFJEdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJMR2xDUVVWQk8wRkJRVUU3UVVGQlFTeFJRVXhLTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFTeE5RVTFITzBGQlFVRXNUVUZGU0R0QlFVRkJMRkZCUVVNN1FVRkJRVHRCUVVGQkxGVkJRME1zVFVGQlN6dEJRVUZCTEZWQlEwd3NVMEZEUlN4MVFrRkJReXhyUWtGRFF5eHBRMEZCUXl4clFrRkJSRHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTEdsQ1FVRmhMRXRCUkdZN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFTeHBRa0ZGUVR0QlFVRkJPMEZCUVVFc1VVRk1TanRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFc1RVRk5SenRCUVVGQkxFMUJTVWc3UVVGQlFTeFJRVUZETzBGQlFVRTdRVUZCUVN4VlFVTkRMRTFCUVVzN1FVRkJRU3hWUVVOTUxGTkJRMFVzZFVKQlFVTXNhMEpCUTBNc2FVTkJRVU1zYTBKQlFVUTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRU3hwUWtGQllTeExRVVJtTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFc2FVSkJSVUU3UVVGQlFUdEJRVUZCTEZGQlRFbzdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTEUxQlRVYzdRVUZCUVN4TlFVbElMSFZDUVVGRExGTkJRVTBzVFVGQlN5eExRVUZKTEZOQlFWTXNkVUpCUVVNc1dVRkJVeXhKUVVGSExGZEJRVlVzVTBGQlR5eFJRVUU1UWp0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQkxHRkJRVGhDTEV0QlFYWkVPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUVzWVVGQk1rUTdRVUZCUVN4VFFXcEROMFE3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVN4WFFXdERRVHRCUVVGQkxFOUJjRU5HTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFc1UwRnhRMEU3UVVGRlNqdEJRVVZCUXl4TlFUTkRkMEpJTzBGQmQwUjRRaXhUUVVGVFNTeHJRa0ZCYTBJc1JVRkJSVWdzVVVGQlVVTXNVMEZCZVVJc1IwRkJSenRCUVVGQlJ5eE5RVUZCTzBGQlF5OUVMRkZCUVUwc1EwRkJRME1zV1VGQldTeEpRVUZKT1VNc1owSkJRV2RDTzBGQlEzWkRMRkZCUVUwclF5eFpRVUZaUkN4aFFVRmhSU3hKUVVGSkxFMUJRVTA3UVVGRmVrTXNVMEZCVDBRc1dVRkRUQ3gxUWtGQlF5eHJRa0ZCUkR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQkxGTkJRV0VzU1VGRllpeHRRMEZEUlR0QlFVRkJMREpDUVVGRExHRkJRVlVzVVVGQlowSXNXVUZCTTBJN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFTeFhRVUU0UXp0QlFVRkJMRWxCUXpsRExIVkNRVUZETEdWQlFVUTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRU3hYUVVGVk8wRkJRVUVzVDBGR1dqdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJMRk5CUjBFN1FVRkZTanRCUVVGRFJpeEpRVnBSUkN4dFFrRkJhVUk3UVVGQlFTeFZRVU5FTlVNc1pVRkJaVHRCUVVGQk8wRkJRVUZwUkN4TlFVUXZRa3c3UVVGQmFVSXNTVUZCUVZnc1NVRkJRVTBzUzBGQlFVa3NTMEZCUVUwN1FVRkJRVU1zWVVGQlFXcENMRWxCUVVFN1FVRkJRV2xDTEdGQlFVRllMRXRCUVVFN1FVRkJRVmNzWVVGQlFWQXNTMEZCUVR0QlFVRkJUeXhoUVVGQlJDeExRVUZCSWl3aWJtRnRaWE1pT2xzaVRXOTJhV1ZHYjNKdElpd2lUVzkyYVdWRVpYUmhhV3h6SWl3aVRXOTJhV1ZNYVhOMElpd2lURzluYVc1R2IzSnRJaXdpUm1sc1pVUnZkMjVzYjJGa0lpd2lRbkp2ZDNObGNsSnZkWFJsY2lJc0lrNWhkbWxuWVhSbElpd2lVbTkxZEdVaUxDSlNiM1YwWlhNaUxDSjFjMlZUWldGeVkyaFFZWEpoYlhNaUxDSjFjMlZNYjJOaGRHbHZiaUlzSW5WelpVVm1abVZqZENJc0luVnpaVk4wWVhSbElpd2lkRzlyWlc1VFpYSjJhV05sSWl3aVZYTmxja2hsWVdSbGNpSXNJbWx6UVhWMGFHVnVkR2xqWVhSbFpDSXNJbU4xY25KbGJuUlZjMlZ5SWl3aVoyVjBRM1Z5Y21WdWRGVnpaWElpTENKMGIydGxiaUlzSW1kbGRGUnZhMlZ1SWl3aWFHRnpSWGhwYzNScGJtZEJkWFJvSWl3aWRYTmxja2xrSWl3aVQySnFaV04wSWl3aWEyVjVjeUlzSW14bGJtZDBhQ0lzSW5aaGJHbGtZWFJsUVhWMGFGZHBkR2hDWVdOclpXNWtJaXdpWTJGMFkyZ2lMQ0psY25JaUxDSmpiMjV6YjJ4bElpd2laWEp5YjNJaUxDSlFjbTkwWldOMFpXUlNiM1YwWlNJc0ltTm9hV3hrY21WdUlpd2lYM01pTENKc2IyTmhkR2x2YmlJc0ltTm9aV05yYVc1bklpd2ljMlYwUTJobFkydHBibWNpTENKaGRYUm9aVzUwYVdOaGRHVmtJaXdpYzJWMFFYVjBhR1Z1ZEdsallYUmxaQ0lzSW1Ob1pXTnJRWFYwYUNJc0ltRjFkR2dpTENKd1lYUm9ibUZ0WlNJc0ltWnliMjBpTENKZll5SXNJbFJ2YTJWdVUzbHVZMmh5YjI1cGVtVnlJaXdpWDNNeUlpd2lkWEJrWVhSbFpDSXNJblZ3WkdGMFpVWnliMjFDY205M2MyVnlRMjl2YTJsbGN5SXNJbXh2WnlJc0lsOWpNaUlzSWtGd2NGSnZkWFJsY3lJc0ltMXZkbWxsY3lJc0ltOXVSR1ZzWlhSbElpd2lYMk16SWl3aVRXOTJhV1ZNYVhOMFYybDBhRVp2Y20waUxDSmZjek1pTENKelpXRnlZMmhRWVhKaGJYTWlMQ0p0YjNacFpVNWhiV1VpTENKblpYUWlMQ0pmWXpRaUxDSWtVbVZtY21WemFGSmxaeVFpWFN3aWFXZHViM0psVEdsemRDSTZXMTBzSW5OdmRYSmpaWE1pT2xzaVFYQndMWEp2ZFhSbGN5NTBjM2dpWFN3aWMyOTFjbU5sYzBOdmJuUmxiblFpT2xzaWFXMXdiM0owSUUxdmRtbGxSbTl5YlNCbWNtOXRJQ2RBWTI5dGNHOXVaVzUwY3k5dGIzWnBaUzFtYjNKdEoxeHVhVzF3YjNKMElFMXZkbWxsUkdWMFlXbHNjeUJtY205dElDZEFZMjl0Y0c5dVpXNTBjeTl0YjNacFpTMWtaWFJoYVd4ekoxeHVhVzF3YjNKMElFMXZkbWxsVEdsemRDQm1jbTl0SUNkQVkyOXRjRzl1Wlc1MGN5OXRiM1pwWlMxc2FYTjBKMXh1YVcxd2IzSjBJRXh2WjJsdVJtOXliU0JtY205dElDZEFZMjl0Y0c5dVpXNTBjeTlzYjJkcGJpOXNiMmRwYmkxbWIzSnRKMXh1YVcxd2IzSjBJRVpwYkdWRWIzZHViRzloWkNCbWNtOXRJQ2RBWTI5dGNHOXVaVzUwY3k5bWFXeGxMV1J2ZDI1c2IyRmtMMlpwYkdVdFpHOTNibXh2WVdRblhHNXBiWEJ2Y25RZ2UxeHVJQ0JDY205M2MyVnlVbTkxZEdWeUxGeHVJQ0JPWVhacFoyRjBaU3hjYmlBZ1VtOTFkR1VzWEc0Z0lGSnZkWFJsY3l4Y2JpQWdkWE5sVTJWaGNtTm9VR0Z5WVcxekxGeHVJQ0IxYzJWTWIyTmhkR2x2Ymx4dWZTQm1jbTl0SUNkeVpXRmpkQzF5YjNWMFpYSXRaRzl0SjF4dWFXMXdiM0owSUhzZ2RYTmxSV1ptWldOMExDQjFjMlZUZEdGMFpTQjlJR1p5YjIwZ0ozSmxZV04wSjF4dWFXMXdiM0owSUhSNWNHVWdleUJGY25KdmNsSmxjM0J2Ym5ObElIMGdabkp2YlNBbkxpOWpiMjV6ZFcxbGNpZGNibWx0Y0c5eWRDQjBlWEJsSUhzZ1RXOTJhV1VnZlNCbWNtOXRJQ2RBYzJoaGNtVmtMM1I1Y0dWekwyMXZkbWxsTFhSNWNHVnpKMXh1YVcxd2IzSjBJSHNnZEc5clpXNVRaWEoyYVdObElIMGdabkp2YlNBbkxpOXpaWEoyYVdObGN5OTBiMnRsYmkxelpYSjJhV05sSjF4dWFXMXdiM0owSUZWelpYSklaV0ZrWlhJZ1puSnZiU0FuUUdOdmJYQnZibVZ1ZEhNdmFHVmhaR1Z5TDNWelpYSXRhR1ZoWkdWeUoxeHVYRzUwZVhCbElFRndjRkp2ZFhSbGMxQnliM0J6SUQwZ1VtVmhaRzl1YkhrOGUxeHVJQ0J0YjNacFpYTTZJRTF2ZG1sbFcxMGdmQ0JGY25KdmNsSmxjM0J2Ym5ObElId2dkVzVrWldacGJtVmtYRzRnSUc5dVJHVnNaWFJsT2lBb2FXUTZJRzUxYldKbGNpa2dQVDRnZG05cFpGeHVmVDVjYmx4dUx5b3FYRzRnS2lCRGFHVmpheUJwWmlCMWMyVnlJR2x6SUdGMWRHaGxiblJwWTJGMFpXUWdZbmtnZFhOcGJtY2dkR2hsSUhSdmEyVnVJSE5sY25acFkyVmNiaUFxSUZSb2FYTWdibTkzSUhWelpYTWdZU0JpWVdOclpXNWtJRUZRU1NCallXeHNJSFJ2SUhabGNtbG1lU0JoZFhSb1pXNTBhV05oZEdsdmJpQnpkR0YwZFhOY2JpQXFJRUJ5WlhSMWNtNXpJSHRRY205dGFYTmxQR0p2YjJ4bFlXNCtmU0JRY205dGFYTmxJSEpsYzI5c2RtbHVaeUIwYnlCMGNuVmxJR2xtSUdGMWRHaGxiblJwWTJGMFpXUmNiaUFxTDF4dVlYTjVibU1nWm5WdVkzUnBiMjRnYVhOQmRYUm9aVzUwYVdOaGRHVmtLQ2s2SUZCeWIyMXBjMlU4WW05dmJHVmhiajRnZTF4dUlDQXZMeUJHYVhKemRDQjBjbmtnWVNCeGRXbGpheUJqYUdWamF5QjNhWFJvSUdWNGFYTjBhVzVuSUdSaGRHRWdLR1p2Y2lCcGJXMWxaR2xoZEdVZ2NtVnpjRzl1YzJVcFhHNGdJR052Ym5OMElHTjFjbkpsYm5SVmMyVnlJRDBnZEc5clpXNVRaWEoyYVdObExtZGxkRU4xY25KbGJuUlZjMlZ5S0NsY2JpQWdZMjl1YzNRZ2RHOXJaVzRnUFNCMGIydGxibE5sY25acFkyVXVaMlYwVkc5clpXNG9LVnh1SUNCamIyNXpkQ0JvWVhORmVHbHpkR2x1WjBGMWRHZ2dQVnh1SUNBZ0lDRWhZM1Z5Y21WdWRGVnpaWEkvTG5WelpYSkpaQ0FtSmlCMGIydGxiaUFtSmlCUFltcGxZM1F1YTJWNWN5aDBiMnRsYmlrdWJHVnVaM1JvSUQ0Z01GeHVYRzRnSUdsbUlDaG9ZWE5GZUdsemRHbHVaMEYxZEdncElIdGNiaUFnSUNBdkx5QlhaU0JvWVhabElHVjRhWE4wYVc1bklHRjFkR2dnWkdGMFlTd2dZblYwSUd4bGRDZHpJSFpoYkdsa1lYUmxJSGRwZEdnZ1ltRmphMlZ1WkNCcGJpQjBhR1VnWW1GamEyZHliM1Z1WkZ4dUlDQWdJQzh2SUZSb2FYTWdaVzV6ZFhKbGN5QmhkWFJvSUhOMFlYUmxJSE4wWVhseklHbHVJSE41Ym1NZ2QybDBhRzkxZENCaWJHOWphMmx1WnlCMGFHVWdWVWxjYmlBZ0lDQjBiMnRsYmxObGNuWnBZMlV1ZG1Gc2FXUmhkR1ZCZFhSb1YybDBhRUpoWTJ0bGJtUW9LUzVqWVhSamFDZ29aWEp5S1NBOVBpQjdYRzRnSUNBZ0lDQmpiMjV6YjJ4bExtVnljbTl5S0NkQ1lXTnJaM0p2ZFc1a0lHRjFkR2dnZG1Gc2FXUmhkR2x2YmlCbVlXbHNaV1E2Snl3Z1pYSnlLVnh1SUNBZ0lIMHBYRzRnSUNBZ2NtVjBkWEp1SUhSeWRXVmNiaUFnZlZ4dVhHNGdJQzh2SUU1dklHVjRhWE4wYVc1bklHRjFkR2dnWkdGMFlTd2dkMlVnYm1WbFpDQjBieUIyWVd4cFpHRjBaU0IzYVhSb0lIUm9aU0JpWVdOclpXNWtYRzRnSUhSeWVTQjdYRzRnSUNBZ2NtVjBkWEp1SUdGM1lXbDBJSFJ2YTJWdVUyVnlkbWxqWlM1MllXeHBaR0YwWlVGMWRHaFhhWFJvUW1GamEyVnVaQ2dwWEc0Z0lIMGdZMkYwWTJnZ0tHVnljbTl5S1NCN1hHNGdJQ0FnWTI5dWMyOXNaUzVsY25KdmNpZ25RWFYwYUNCMllXeHBaR0YwYVc5dUlHVnljbTl5T2ljc0lHVnljbTl5S1Z4dUlDQWdJSEpsZEhWeWJpQm1ZV3h6WlZ4dUlDQjlYRzU5WEc1Y2JpOHFLbHh1SUNvZ1VISnZkR1ZqZEdWa0lISnZkWFJsSUdOdmJYQnZibVZ1ZENCMGFHRjBJSEpsWkdseVpXTjBjeUIwYnlCc2IyZHBiaUJwWmlCdWIzUWdZWFYwYUdWdWRHbGpZWFJsWkZ4dUlDb3ZYRzVtZFc1amRHbHZiaUJRY205MFpXTjBaV1JTYjNWMFpTaDdJR05vYVd4a2NtVnVJSDA2SUhzZ1kyaHBiR1J5Wlc0NklGSmxZV04wTGxKbFlXTjBUbTlrWlNCOUtTQjdYRzRnSUdOdmJuTjBJR3h2WTJGMGFXOXVJRDBnZFhObFRHOWpZWFJwYjI0b0tWeHVJQ0JqYjI1emRDQmJZMmhsWTJ0cGJtY3NJSE5sZEVOb1pXTnJhVzVuWFNBOUlIVnpaVk4wWVhSbEtIUnlkV1VwWEc0Z0lHTnZibk4wSUZ0aGRYUm9aVzUwYVdOaGRHVmtMQ0J6WlhSQmRYUm9aVzUwYVdOaGRHVmtYU0E5SUhWelpWTjBZWFJsS0daaGJITmxLVnh1WEc0Z0lIVnpaVVZtWm1WamRDZ29LU0E5UGlCN1hHNGdJQ0FnTHk4Z1EzSmxZWFJsSUdGdUlHRnplVzVqSUdaMWJtTjBhVzl1SUdsdWMybGtaU0IxYzJWRlptWmxZM1JjYmlBZ0lDQmpiMjV6ZENCamFHVmphMEYxZEdnZ1BTQmhjM2x1WXlBb0tTQTlQaUI3WEc0Z0lDQWdJQ0IwY25rZ2UxeHVJQ0FnSUNBZ0lDQXZMeUJEYUdWamF5QmhkWFJvWlc1MGFXTmhkR2x2YmlCM2FYUm9JR0poWTJ0bGJtUmNiaUFnSUNBZ0lDQWdZMjl1YzNRZ1lYVjBhQ0E5SUdGM1lXbDBJR2x6UVhWMGFHVnVkR2xqWVhSbFpDZ3BYRzRnSUNBZ0lDQWdJSE5sZEVGMWRHaGxiblJwWTJGMFpXUW9ZWFYwYUNsY2JpQWdJQ0FnSUgwZ1kyRjBZMmdnS0dWeWNtOXlLU0I3WEc0Z0lDQWdJQ0FnSUdOdmJuTnZiR1V1WlhKeWIzSW9KMEYxZEdobGJuUnBZMkYwYVc5dUlHTm9aV05ySUdaaGFXeGxaRG9uTENCbGNuSnZjaWxjYmlBZ0lDQWdJQ0FnYzJWMFFYVjBhR1Z1ZEdsallYUmxaQ2htWVd4elpTbGNiaUFnSUNBZ0lIMGdabWx1WVd4c2VTQjdYRzRnSUNBZ0lDQWdJSE5sZEVOb1pXTnJhVzVuS0daaGJITmxLVnh1SUNBZ0lDQWdmVnh1SUNBZ0lIMWNibHh1SUNBZ0lDOHZJRU5oYkd3Z2RHaGxJR0Z6ZVc1aklHWjFibU4wYVc5dUlHRnVaQ0JvWVc1a2JHVWdZVzU1SUdWeWNtOXljMXh1SUNBZ0lHTm9aV05yUVhWMGFDZ3BMbU5oZEdOb0tDaGxjbkp2Y2lrZ1BUNGdlMXh1SUNBZ0lDQWdZMjl1YzI5c1pTNWxjbkp2Y2lnblJYSnliM0lnYVc0Z1kyaGxZMnRCZFhSb09pY3NJR1Z5Y205eUtWeHVJQ0FnSUNBZ2MyVjBRWFYwYUdWdWRHbGpZWFJsWkNobVlXeHpaU2xjYmlBZ0lDQWdJSE5sZEVOb1pXTnJhVzVuS0daaGJITmxLVnh1SUNBZ0lIMHBYRzRnSUgwc0lGdHNiMk5oZEdsdmJpNXdZWFJvYm1GdFpWMHBYRzVjYmlBZ2FXWWdLR05vWldOcmFXNW5LU0I3WEc0Z0lDQWdjbVYwZFhKdUlEeGthWFkrUTJobFkydHBibWNnWVhWMGFHVnVkR2xqWVhScGIyNHVMaTQ4TDJScGRqNWNiaUFnZlZ4dVhHNGdJR2xtSUNnaFlYVjBhR1Z1ZEdsallYUmxaQ2tnZTF4dUlDQWdJQzh2SUZKbFpHbHlaV04wSUhSdklHeHZaMmx1TENCellYWnBibWNnZEdobElHTjFjbkpsYm5RZ2JHOWpZWFJwYjI0Z1ptOXlJSEpsWkdseVpXTjBJR0ZtZEdWeUlHeHZaMmx1WEc0Z0lDQWdjbVYwZFhKdUlEeE9ZWFpwWjJGMFpTQjBiejFjSWk5c2IyZHBibHdpSUhOMFlYUmxQWHQ3SUdaeWIyMDZJR3h2WTJGMGFXOXVMbkJoZEdodVlXMWxJSDE5SUhKbGNHeGhZMlVnTHo1Y2JpQWdmVnh1WEc0Z0lISmxkSFZ5YmlBb1hHNGdJQ0FnUEQ1Y2JpQWdJQ0FnSUR4VmMyVnlTR1ZoWkdWeUlDOCtYRzRnSUNBZ0lDQjdZMmhwYkdSeVpXNTlYRzRnSUNBZ1BDOCtYRzRnSUNsY2JuMWNibHh1THk4Z1ZHaHBjeUJqYjIxd2IyNWxiblFnWlc1emRYSmxjeUIwYjJ0bGJpQnpkR0YwWlNCcGN5QjFjR1JoZEdWa0lHWnliMjBnWW5KdmQzTmxjaUJqYjI5cmFXVnpJRzl1SUdGd2NDQnNiMkZrWEc1bWRXNWpkR2x2YmlCVWIydGxibE41Ym1Ob2NtOXVhWHBsY2lncElIdGNiaUFnZFhObFJXWm1aV04wS0NncElEMCtJSHRjYmlBZ0lDQXZMeUJWY0dSaGRHVWdkRzlyWlc0Z2MzUmhkR1VnWm5KdmJTQmljbTkzYzJWeUlHTnZiMnRwWlhNZ2IyNGdhVzVwZEdsaGJDQnNiMkZrWEc0Z0lDQWdZMjl1YzNRZ2RYQmtZWFJsWkNBOUlIUnZhMlZ1VTJWeWRtbGpaUzUxY0dSaGRHVkdjbTl0UW5KdmQzTmxja052YjJ0cFpYTW9LVnh1SUNBZ0lHTnZibk52YkdVdWJHOW5LQ2RVYjJ0bGJpQnpkR0YwWlNCMWNHUmhkR1ZrSUdaeWIyMGdZbkp2ZDNObGNpQmpiMjlyYVdWek9pY3NJSFZ3WkdGMFpXUXBYRzRnSUgwc0lGdGRLVnh1SUNCeVpYUjFjbTRnYm5Wc2JGeHVmVnh1WEc1bGVIQnZjblFnWkdWbVlYVnNkQ0JtZFc1amRHbHZiaUJCY0hCU2IzVjBaWE1vZXlCdGIzWnBaWE1zSUc5dVJHVnNaWFJsSUgwNklFRndjRkp2ZFhSbGMxQnliM0J6S1NCN1hHNGdJSEpsZEhWeWJpQW9YRzRnSUNBZ1BFSnliM2R6WlhKU2IzVjBaWEkrWEc0Z0lDQWdJQ0E4Vkc5clpXNVRlVzVqYUhKdmJtbDZaWElnTHo1Y2JpQWdJQ0FnSUR4U2IzVjBaWE0rWEc0Z0lDQWdJQ0FnSUhzdktpQlFkV0pzYVdNZ2NtOTFkR1Z6SUNvdmZWeHVJQ0FnSUNBZ0lDQThVbTkxZEdVZ2NHRjBhRDFjSWk5c2IyZHBibHdpSUdWc1pXMWxiblE5ZXp4TWIyZHBia1p2Y20wZ0x6NTlJQzgrWEc1Y2JpQWdJQ0FnSUNBZ2V5OHFJRkJ5YjNSbFkzUmxaQ0J5YjNWMFpYTWdLaTk5WEc0Z0lDQWdJQ0FnSUR4U2IzVjBaVnh1SUNBZ0lDQWdJQ0FnSUhCaGRHZzlYQ0l2Ylc5MmFXVnpYQ0pjYmlBZ0lDQWdJQ0FnSUNCbGJHVnRaVzUwUFh0Y2JpQWdJQ0FnSUNBZ0lDQWdJRHhRY205MFpXTjBaV1JTYjNWMFpUNWNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ1BFMXZkbWxsVEdsemRGZHBkR2hHYjNKdElHMXZkbWxsY3oxN2JXOTJhV1Z6ZlNCdmJrUmxiR1YwWlQxN2IyNUVaV3hsZEdWOUlDOCtYRzRnSUNBZ0lDQWdJQ0FnSUNBOEwxQnliM1JsWTNSbFpGSnZkWFJsUGx4dUlDQWdJQ0FnSUNBZ0lIMWNiaUFnSUNBZ0lDQWdMejVjYmlBZ0lDQWdJQ0FnUEZKdmRYUmxYRzRnSUNBZ0lDQWdJQ0FnY0dGMGFEMWNJaTl0YjNacFpYTXZPbWxrWENKY2JpQWdJQ0FnSUNBZ0lDQmxiR1Z0Wlc1MFBYdGNiaUFnSUNBZ0lDQWdJQ0FnSUR4UWNtOTBaV04wWldSU2IzVjBaVDVjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdQRTF2ZG1sbFJHVjBZV2xzY3lBdlBseHVJQ0FnSUNBZ0lDQWdJQ0FnUEM5UWNtOTBaV04wWldSU2IzVjBaVDVjYmlBZ0lDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNBZ0lDOCtYRzVjYmlBZ0lDQWdJQ0FnZXk4cUlFWnBiR1VnUkc5M2JteHZZV1FnY205MWRHVWdLaTk5WEc0Z0lDQWdJQ0FnSUR4U2IzVjBaVnh1SUNBZ0lDQWdJQ0FnSUhCaGRHZzlYQ0l2Wkc5M2JteHZZV1J6WENKY2JpQWdJQ0FnSUNBZ0lDQmxiR1Z0Wlc1MFBYdGNiaUFnSUNBZ0lDQWdJQ0FnSUR4UWNtOTBaV04wWldSU2IzVjBaVDVjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdQRVpwYkdWRWIzZHViRzloWkNBdlBseHVJQ0FnSUNBZ0lDQWdJQ0FnUEM5UWNtOTBaV04wWldSU2IzVjBaVDVjYmlBZ0lDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNBZ0lDOCtYRzVjYmlBZ0lDQWdJQ0FnZXk4cUlFUmxabUYxYkhRZ2NtOTFkR1VnS2k5OVhHNGdJQ0FnSUNBZ0lEeFNiM1YwWlNCd1lYUm9QVndpTDF3aUlHVnNaVzFsYm5ROWV6eE9ZWFpwWjJGMFpTQjBiejFjSWk5dGIzWnBaWE5jSWlCeVpYQnNZV05sSUM4K2ZTQXZQbHh1SUNBZ0lDQWdQQzlTYjNWMFpYTStYRzRnSUNBZ1BDOUNjbTkzYzJWeVVtOTFkR1Z5UGx4dUlDQXBYRzU5WEc1Y2JpOHFLbHh1SUNvZ1VtVnVaR1Z5Y3lCaWIzUm9JRTF2ZG1sbFRHbHpkQ0JoYm1RZ1RXOTJhV1ZHYjNKdElHOXVJSFJvWlNCY0lpOXRiM1pwWlhOY0lpQnliM1YwWlM1Y2JpQXFYRzRnS2lCQVkyOXRjRzl1Wlc1MFhHNGdLaUJBY0dGeVlXMGdlMDlpYW1WamRIMGdjSEp2Y0hNZ0xTQlVhR1VnY0hKdmNHVnlkR2xsY3lCd1lYTnpaV1FnZEc4Z2RHaGxJR052YlhCdmJtVnVkQzVjYmlBcUlFQndZWEpoYlNCN1RXOTJhV1ZiWFNCOElFVnljbTl5VW1WemNHOXVjMlVnZkNCMWJtUmxabWx1WldSOUlIQnliM0J6TG0xdmRtbGxjeUF0SUZSb1pTQnNhWE4wSUc5bUlHMXZkbWxsY3lCdmNpQmhiaUJsY25KdmNpQnlaWE53YjI1elpTNWNiaUFxSUVCd1lYSmhiU0I3Wm5WdVkzUnBiMjU5SUhCeWIzQnpMbTl1UkdWc1pYUmxJQzBnUVNCallXeHNZbUZqYXlCbWRXNWpkR2x2YmlCbWIzSWdaR1ZzWlhScGJtY2dZU0J0YjNacFpTQmllU0JwZEhNZ1NVUXVYRzRnS2lCQWNtVjBkWEp1Y3lCN1NsTllMa1ZzWlcxbGJuUjlJQzBnVkdobElISmxibVJsY21Wa0lFMXZkbWxsVEdsemRDQmhibVFnVFc5MmFXVkdiM0p0SUdOdmJYQnZibVZ1ZEhNdVhHNGdLbHh1SUNvZ1FHVjRZVzF3YkdWY2JpQXFJQzh2SUVWNFlXMXdiR1VnZFhOaFoyVTZYRzRnS2lBOFRXOTJhV1ZNYVhOMFYybDBhRVp2Y20wZ2JXOTJhV1Z6UFh0dGIzWnBaVUZ5Y21GNWZTQnZia1JsYkdWMFpUMTdhR0Z1Wkd4bFJHVnNaWFJsVFc5MmFXVjlJQzgrWEc0Z0tpOWNibVoxYm1OMGFXOXVJRTF2ZG1sbFRHbHpkRmRwZEdoR2IzSnRLSHNnYlc5MmFXVnpMQ0J2YmtSbGJHVjBaU0I5T2lCQmNIQlNiM1YwWlhOUWNtOXdjeWtnZTF4dUlDQmpiMjV6ZENCYmMyVmhjbU5vVUdGeVlXMXpYU0E5SUhWelpWTmxZWEpqYUZCaGNtRnRjeWdwWEc0Z0lHTnZibk4wSUcxdmRtbGxUbUZ0WlNBOUlITmxZWEpqYUZCaGNtRnRjeTVuWlhRb0oyNWhiV1VuS1Z4dVhHNGdJSEpsZEhWeWJpQnRiM1pwWlU1aGJXVWdQeUFvWEc0Z0lDQWdQRTF2ZG1sbFJHVjBZV2xzY3lBdlBseHVJQ0FwSURvZ0tGeHVJQ0FnSUR3K1hHNGdJQ0FnSUNBOFRXOTJhV1ZNYVhOMElHMXZkbWxsY3oxN2JXOTJhV1Z6ZlNCdmJrUmxiR1YwWlQxN2IyNUVaV3hsZEdWOUlDOCtYRzRnSUNBZ0lDQThUVzkyYVdWR2IzSnRJQzgrWEc0Z0lDQWdQQzgrWEc0Z0lDbGNibjFjYmlKZExDSm1hV3hsSWpvaUwxVnpaWEp6TDIxMWNtRjBMbTk2WTJGdUwzTmxiMjR2Y0d4aGVYZHlhV2RvZEMxMWRHbHNjeTl6WVcxd2JHVXRZWEJ3TDJaeWIyNTBaVzVrTDNOeVl5OUJjSEF0Y205MWRHVnpMblJ6ZUNKOQ==",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 24058
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 35,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.523Z",
        "time": 7,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/node_modules/.vite/deps/chunk-MH4MW3OK.js?v=0bb69d73",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/node_modules/.vite/deps/react-dom_client.js?v=0bb69d73"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [
            {
              "name": "v",
              "value": "0bb69d73"
            }
          ],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "max-age=31536000,immutable"
            },
            {
              "name": "etag",
              "value": "W/\"40ad-bgjxklTRpFW/zKSpCp3ZtTNt2So\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "16557"
            }
          ],
          "content": {
            "size": 16557,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsKICByZXF1aXJlX3JlYWN0Cn0gZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL2NodW5rLVFKWUtVS0FMLmpzP3Y9MGJiNjlkNzMiOwppbXBvcnQgewogIF9fY29tbW9uSlMKfSBmcm9tICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvY2h1bmstNE1CTVJJTEEuanM/dj0wYmI2OWQ3MyI7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtZG9tL2Nqcy9yZWFjdC1kb20uZGV2ZWxvcG1lbnQuanMKdmFyIHJlcXVpcmVfcmVhY3RfZG9tX2RldmVsb3BtZW50ID0gX19jb21tb25KUyh7CiAgIi4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1kb20vY2pzL3JlYWN0LWRvbS5kZXZlbG9wbWVudC5qcyIoZXhwb3J0cykgewogICAgInVzZSBzdHJpY3QiOwogICAgKGZ1bmN0aW9uKCkgewogICAgICBmdW5jdGlvbiBub29wKCkgewogICAgICB9CiAgICAgIGZ1bmN0aW9uIHRlc3RTdHJpbmdDb2VyY2lvbih2YWx1ZSkgewogICAgICAgIHJldHVybiAiIiArIHZhbHVlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNyZWF0ZVBvcnRhbCQxKGNoaWxkcmVuLCBjb250YWluZXJJbmZvLCBpbXBsZW1lbnRhdGlvbikgewogICAgICAgIHZhciBrZXkgPSAzIDwgYXJndW1lbnRzLmxlbmd0aCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1szXSA/IGFyZ3VtZW50c1szXSA6IG51bGw7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHRlc3RTdHJpbmdDb2VyY2lvbihrZXkpOwogICAgICAgICAgdmFyIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9IGZhbHNlOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCA9IHRydWU7CiAgICAgICAgfQogICAgICAgIEpTQ29tcGlsZXJfaW5saW5lX3Jlc3VsdCAmJiAoY29uc29sZS5lcnJvcigKICAgICAgICAgICJUaGUgcHJvdmlkZWQga2V5IGlzIGFuIHVuc3VwcG9ydGVkIHR5cGUgJXMuIFRoaXMgdmFsdWUgbXVzdCBiZSBjb2VyY2VkIHRvIGEgc3RyaW5nIGJlZm9yZSB1c2luZyBpdCBoZXJlLiIsCiAgICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgU3ltYm9sICYmIFN5bWJvbC50b1N0cmluZ1RhZyAmJiBrZXlbU3ltYm9sLnRvU3RyaW5nVGFnXSB8fCBrZXkuY29uc3RydWN0b3IubmFtZSB8fCAiT2JqZWN0IgogICAgICAgICksIHRlc3RTdHJpbmdDb2VyY2lvbihrZXkpKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgJCR0eXBlb2Y6IFJFQUNUX1BPUlRBTF9UWVBFLAogICAgICAgICAga2V5OiBudWxsID09IGtleSA/IG51bGwgOiAiIiArIGtleSwKICAgICAgICAgIGNoaWxkcmVuLAogICAgICAgICAgY29udGFpbmVySW5mbywKICAgICAgICAgIGltcGxlbWVudGF0aW9uCiAgICAgICAgfTsKICAgICAgfQogICAgICBmdW5jdGlvbiBnZXRDcm9zc09yaWdpblN0cmluZ0FzKGFzLCBpbnB1dCkgewogICAgICAgIGlmICgiZm9udCIgPT09IGFzKSByZXR1cm4gIiI7CiAgICAgICAgaWYgKCJzdHJpbmciID09PSB0eXBlb2YgaW5wdXQpCiAgICAgICAgICByZXR1cm4gInVzZS1jcmVkZW50aWFscyIgPT09IGlucHV0ID8gaW5wdXQgOiAiIjsKICAgICAgfQogICAgICBmdW5jdGlvbiBnZXRWYWx1ZURlc2NyaXB0b3JFeHBlY3RpbmdPYmplY3RGb3JXYXJuaW5nKHRoaW5nKSB7CiAgICAgICAgcmV0dXJuIG51bGwgPT09IHRoaW5nID8gImBudWxsYCIgOiB2b2lkIDAgPT09IHRoaW5nID8gImB1bmRlZmluZWRgIiA6ICIiID09PSB0aGluZyA/ICJhbiBlbXB0eSBzdHJpbmciIDogJ3NvbWV0aGluZyB3aXRoIHR5cGUgIicgKyB0eXBlb2YgdGhpbmcgKyAnIic7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0VmFsdWVEZXNjcmlwdG9yRXhwZWN0aW5nRW51bUZvcldhcm5pbmcodGhpbmcpIHsKICAgICAgICByZXR1cm4gbnVsbCA9PT0gdGhpbmcgPyAiYG51bGxgIiA6IHZvaWQgMCA9PT0gdGhpbmcgPyAiYHVuZGVmaW5lZGAiIDogIiIgPT09IHRoaW5nID8gImFuIGVtcHR5IHN0cmluZyIgOiAic3RyaW5nIiA9PT0gdHlwZW9mIHRoaW5nID8gSlNPTi5zdHJpbmdpZnkodGhpbmcpIDogIm51bWJlciIgPT09IHR5cGVvZiB0aGluZyA/ICJgIiArIHRoaW5nICsgImAiIDogJ3NvbWV0aGluZyB3aXRoIHR5cGUgIicgKyB0eXBlb2YgdGhpbmcgKyAnIic7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmVzb2x2ZURpc3BhdGNoZXIoKSB7CiAgICAgICAgdmFyIGRpc3BhdGNoZXIgPSBSZWFjdFNoYXJlZEludGVybmFscy5IOwogICAgICAgIG51bGwgPT09IGRpc3BhdGNoZXIgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICJJbnZhbGlkIGhvb2sgY2FsbC4gSG9va3MgY2FuIG9ubHkgYmUgY2FsbGVkIGluc2lkZSBvZiB0aGUgYm9keSBvZiBhIGZ1bmN0aW9uIGNvbXBvbmVudC4gVGhpcyBjb3VsZCBoYXBwZW4gZm9yIG9uZSBvZiB0aGUgZm9sbG93aW5nIHJlYXNvbnM6XG4xLiBZb3UgbWlnaHQgaGF2ZSBtaXNtYXRjaGluZyB2ZXJzaW9ucyBvZiBSZWFjdCBhbmQgdGhlIHJlbmRlcmVyIChzdWNoIGFzIFJlYWN0IERPTSlcbjIuIFlvdSBtaWdodCBiZSBicmVha2luZyB0aGUgUnVsZXMgb2YgSG9va3NcbjMuIFlvdSBtaWdodCBoYXZlIG1vcmUgdGhhbiBvbmUgY29weSBvZiBSZWFjdCBpbiB0aGUgc2FtZSBhcHBcblNlZSBodHRwczovL3JlYWN0LmRldi9saW5rL2ludmFsaWQtaG9vay1jYWxsIGZvciB0aXBzIGFib3V0IGhvdyB0byBkZWJ1ZyBhbmQgZml4IHRoaXMgcHJvYmxlbS4iCiAgICAgICAgKTsKICAgICAgICByZXR1cm4gZGlzcGF0Y2hlcjsKICAgICAgfQogICAgICAidW5kZWZpbmVkIiAhPT0gdHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fLnJlZ2lzdGVySW50ZXJuYWxNb2R1bGVTdGFydCAmJiBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18ucmVnaXN0ZXJJbnRlcm5hbE1vZHVsZVN0YXJ0KEVycm9yKCkpOwogICAgICB2YXIgUmVhY3QgPSByZXF1aXJlX3JlYWN0KCksIEludGVybmFscyA9IHsKICAgICAgICBkOiB7CiAgICAgICAgICBmOiBub29wLAogICAgICAgICAgcjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAgICJJbnZhbGlkIGZvcm0gZWxlbWVudC4gcmVxdWVzdEZvcm1SZXNldCBtdXN0IGJlIHBhc3NlZCBhIGZvcm0gdGhhdCB3YXMgcmVuZGVyZWQgYnkgUmVhY3QuIgogICAgICAgICAgICApOwogICAgICAgICAgfSwKICAgICAgICAgIEQ6IG5vb3AsCiAgICAgICAgICBDOiBub29wLAogICAgICAgICAgTDogbm9vcCwKICAgICAgICAgIG06IG5vb3AsCiAgICAgICAgICBYOiBub29wLAogICAgICAgICAgUzogbm9vcCwKICAgICAgICAgIE06IG5vb3AKICAgICAgICB9LAogICAgICAgIHA6IDAsCiAgICAgICAgZmluZERPTU5vZGU6IG51bGwKICAgICAgfSwgUkVBQ1RfUE9SVEFMX1RZUEUgPSBTeW1ib2wuZm9yKCJyZWFjdC5wb3J0YWwiKSwgUmVhY3RTaGFyZWRJbnRlcm5hbHMgPSBSZWFjdC5fX0NMSUVOVF9JTlRFUk5BTFNfRE9fTk9UX1VTRV9PUl9XQVJOX1VTRVJTX1RIRVlfQ0FOTk9UX1VQR1JBREU7CiAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBNYXAgJiYgbnVsbCAhPSBNYXAucHJvdG90eXBlICYmICJmdW5jdGlvbiIgPT09IHR5cGVvZiBNYXAucHJvdG90eXBlLmZvckVhY2ggJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIFNldCAmJiBudWxsICE9IFNldC5wcm90b3R5cGUgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIFNldC5wcm90b3R5cGUuY2xlYXIgJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIFNldC5wcm90b3R5cGUuZm9yRWFjaCB8fCBjb25zb2xlLmVycm9yKAogICAgICAgICJSZWFjdCBkZXBlbmRzIG9uIE1hcCBhbmQgU2V0IGJ1aWx0LWluIHR5cGVzLiBNYWtlIHN1cmUgdGhhdCB5b3UgbG9hZCBhIHBvbHlmaWxsIGluIG9sZGVyIGJyb3dzZXJzLiBodHRwczovL3JlYWN0anMub3JnL2xpbmsvcmVhY3QtcG9seWZpbGxzIgogICAgICApOwogICAgICBleHBvcnRzLl9fRE9NX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1dBUk5fVVNFUlNfVEhFWV9DQU5OT1RfVVBHUkFERSA9IEludGVybmFsczsKICAgICAgZXhwb3J0cy5jcmVhdGVQb3J0YWwgPSBmdW5jdGlvbihjaGlsZHJlbiwgY29udGFpbmVyKSB7CiAgICAgICAgdmFyIGtleSA9IDIgPCBhcmd1bWVudHMubGVuZ3RoICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzJdID8gYXJndW1lbnRzWzJdIDogbnVsbDsKICAgICAgICBpZiAoIWNvbnRhaW5lciB8fCAxICE9PSBjb250YWluZXIubm9kZVR5cGUgJiYgOSAhPT0gY29udGFpbmVyLm5vZGVUeXBlICYmIDExICE9PSBjb250YWluZXIubm9kZVR5cGUpCiAgICAgICAgICB0aHJvdyBFcnJvcigiVGFyZ2V0IGNvbnRhaW5lciBpcyBub3QgYSBET00gZWxlbWVudC4iKTsKICAgICAgICByZXR1cm4gY3JlYXRlUG9ydGFsJDEoY2hpbGRyZW4sIGNvbnRhaW5lciwgbnVsbCwga2V5KTsKICAgICAgfTsKICAgICAgZXhwb3J0cy5mbHVzaFN5bmMgPSBmdW5jdGlvbihmbikgewogICAgICAgIHZhciBwcmV2aW91c1RyYW5zaXRpb24gPSBSZWFjdFNoYXJlZEludGVybmFscy5ULCBwcmV2aW91c1VwZGF0ZVByaW9yaXR5ID0gSW50ZXJuYWxzLnA7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmIChSZWFjdFNoYXJlZEludGVybmFscy5UID0gbnVsbCwgSW50ZXJuYWxzLnAgPSAyLCBmbikKICAgICAgICAgICAgcmV0dXJuIGZuKCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIFJlYWN0U2hhcmVkSW50ZXJuYWxzLlQgPSBwcmV2aW91c1RyYW5zaXRpb24sIEludGVybmFscy5wID0gcHJldmlvdXNVcGRhdGVQcmlvcml0eSwgSW50ZXJuYWxzLmQuZigpICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICJmbHVzaFN5bmMgd2FzIGNhbGxlZCBmcm9tIGluc2lkZSBhIGxpZmVjeWNsZSBtZXRob2QuIFJlYWN0IGNhbm5vdCBmbHVzaCB3aGVuIFJlYWN0IGlzIGFscmVhZHkgcmVuZGVyaW5nLiBDb25zaWRlciBtb3ZpbmcgdGhpcyBjYWxsIHRvIGEgc2NoZWR1bGVyIHRhc2sgb3IgbWljcm8gdGFzay4iCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfTsKICAgICAgZXhwb3J0cy5wcmVjb25uZWN0ID0gZnVuY3Rpb24oaHJlZiwgb3B0aW9ucykgewogICAgICAgICJzdHJpbmciID09PSB0eXBlb2YgaHJlZiAmJiBocmVmID8gbnVsbCAhPSBvcHRpb25zICYmICJvYmplY3QiICE9PSB0eXBlb2Ygb3B0aW9ucyA/IGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiUmVhY3RET00ucHJlY29ubmVjdCgpOiBFeHBlY3RlZCB0aGUgYG9wdGlvbnNgIGFyZ3VtZW50IChzZWNvbmQpIHRvIGJlIGFuIG9iamVjdCBidXQgZW5jb3VudGVyZWQgJXMgaW5zdGVhZC4gVGhlIG9ubHkgc3VwcG9ydGVkIG9wdGlvbiBhdCB0aGlzIHRpbWUgaXMgYGNyb3NzT3JpZ2luYCB3aGljaCBhY2NlcHRzIGEgc3RyaW5nLiIsCiAgICAgICAgICBnZXRWYWx1ZURlc2NyaXB0b3JFeHBlY3RpbmdFbnVtRm9yV2FybmluZyhvcHRpb25zKQogICAgICAgICkgOiBudWxsICE9IG9wdGlvbnMgJiYgInN0cmluZyIgIT09IHR5cGVvZiBvcHRpb25zLmNyb3NzT3JpZ2luICYmIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiUmVhY3RET00ucHJlY29ubmVjdCgpOiBFeHBlY3RlZCB0aGUgYGNyb3NzT3JpZ2luYCBvcHRpb24gKHNlY29uZCBhcmd1bWVudCkgdG8gYmUgYSBzdHJpbmcgYnV0IGVuY291bnRlcmVkICVzIGluc3RlYWQuIFRyeSByZW1vdmluZyB0aGlzIG9wdGlvbiBvciBwYXNzaW5nIGEgc3RyaW5nIHZhbHVlIGluc3RlYWQuIiwKICAgICAgICAgIGdldFZhbHVlRGVzY3JpcHRvckV4cGVjdGluZ09iamVjdEZvcldhcm5pbmcob3B0aW9ucy5jcm9zc09yaWdpbikKICAgICAgICApIDogY29uc29sZS5lcnJvcigKICAgICAgICAgICJSZWFjdERPTS5wcmVjb25uZWN0KCk6IEV4cGVjdGVkIHRoZSBgaHJlZmAgYXJndW1lbnQgKGZpcnN0KSB0byBiZSBhIG5vbi1lbXB0eSBzdHJpbmcgYnV0IGVuY291bnRlcmVkICVzIGluc3RlYWQuIiwKICAgICAgICAgIGdldFZhbHVlRGVzY3JpcHRvckV4cGVjdGluZ09iamVjdEZvcldhcm5pbmcoaHJlZikKICAgICAgICApOwogICAgICAgICJzdHJpbmciID09PSB0eXBlb2YgaHJlZiAmJiAob3B0aW9ucyA/IChvcHRpb25zID0gb3B0aW9ucy5jcm9zc09yaWdpbiwgb3B0aW9ucyA9ICJzdHJpbmciID09PSB0eXBlb2Ygb3B0aW9ucyA/ICJ1c2UtY3JlZGVudGlhbHMiID09PSBvcHRpb25zID8gb3B0aW9ucyA6ICIiIDogdm9pZCAwKSA6IG9wdGlvbnMgPSBudWxsLCBJbnRlcm5hbHMuZC5DKGhyZWYsIG9wdGlvbnMpKTsKICAgICAgfTsKICAgICAgZXhwb3J0cy5wcmVmZXRjaEROUyA9IGZ1bmN0aW9uKGhyZWYpIHsKICAgICAgICBpZiAoInN0cmluZyIgIT09IHR5cGVvZiBocmVmIHx8ICFocmVmKQogICAgICAgICAgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIlJlYWN0RE9NLnByZWZldGNoRE5TKCk6IEV4cGVjdGVkIHRoZSBgaHJlZmAgYXJndW1lbnQgKGZpcnN0KSB0byBiZSBhIG5vbi1lbXB0eSBzdHJpbmcgYnV0IGVuY291bnRlcmVkICVzIGluc3RlYWQuIiwKICAgICAgICAgICAgZ2V0VmFsdWVEZXNjcmlwdG9yRXhwZWN0aW5nT2JqZWN0Rm9yV2FybmluZyhocmVmKQogICAgICAgICAgKTsKICAgICAgICBlbHNlIGlmICgxIDwgYXJndW1lbnRzLmxlbmd0aCkgewogICAgICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHNbMV07CiAgICAgICAgICAib2JqZWN0IiA9PT0gdHlwZW9mIG9wdGlvbnMgJiYgb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgiY3Jvc3NPcmlnaW4iKSA/IGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICJSZWFjdERPTS5wcmVmZXRjaEROUygpOiBFeHBlY3RlZCBvbmx5IG9uZSBhcmd1bWVudCwgYGhyZWZgLCBidXQgZW5jb3VudGVyZWQgJXMgYXMgYSBzZWNvbmQgYXJndW1lbnQgaW5zdGVhZC4gVGhpcyBhcmd1bWVudCBpcyByZXNlcnZlZCBmb3IgZnV0dXJlIG9wdGlvbnMgYW5kIGlzIGN1cnJlbnRseSBkaXNhbGxvd2VkLiBJdCBsb29rcyBsaWtlIHRoZSB5b3UgYXJlIGF0dGVtcHRpbmcgdG8gc2V0IGEgY3Jvc3NPcmlnaW4gcHJvcGVydHkgZm9yIHRoaXMgRE5TIGxvb2t1cCBoaW50LiBCcm93c2VycyBkbyBub3QgcGVyZm9ybSBETlMgcXVlcmllcyB1c2luZyBDT1JTIGFuZCBzZXR0aW5nIHRoaXMgYXR0cmlidXRlIG9uIHRoZSByZXNvdXJjZSBoaW50IGhhcyBubyBlZmZlY3QuIFRyeSBjYWxsaW5nIFJlYWN0RE9NLnByZWZldGNoRE5TKCkgd2l0aCBqdXN0IGEgc2luZ2xlIHN0cmluZyBhcmd1bWVudCwgYGhyZWZgLiIsCiAgICAgICAgICAgIGdldFZhbHVlRGVzY3JpcHRvckV4cGVjdGluZ0VudW1Gb3JXYXJuaW5nKG9wdGlvbnMpCiAgICAgICAgICApIDogY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIlJlYWN0RE9NLnByZWZldGNoRE5TKCk6IEV4cGVjdGVkIG9ubHkgb25lIGFyZ3VtZW50LCBgaHJlZmAsIGJ1dCBlbmNvdW50ZXJlZCAlcyBhcyBhIHNlY29uZCBhcmd1bWVudCBpbnN0ZWFkLiBUaGlzIGFyZ3VtZW50IGlzIHJlc2VydmVkIGZvciBmdXR1cmUgb3B0aW9ucyBhbmQgaXMgY3VycmVudGx5IGRpc2FsbG93ZWQuIFRyeSBjYWxsaW5nIFJlYWN0RE9NLnByZWZldGNoRE5TKCkgd2l0aCBqdXN0IGEgc2luZ2xlIHN0cmluZyBhcmd1bWVudCwgYGhyZWZgLiIsCiAgICAgICAgICAgIGdldFZhbHVlRGVzY3JpcHRvckV4cGVjdGluZ0VudW1Gb3JXYXJuaW5nKG9wdGlvbnMpCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICAic3RyaW5nIiA9PT0gdHlwZW9mIGhyZWYgJiYgSW50ZXJuYWxzLmQuRChocmVmKTsKICAgICAgfTsKICAgICAgZXhwb3J0cy5wcmVpbml0ID0gZnVuY3Rpb24oaHJlZiwgb3B0aW9ucykgewogICAgICAgICJzdHJpbmciID09PSB0eXBlb2YgaHJlZiAmJiBocmVmID8gbnVsbCA9PSBvcHRpb25zIHx8ICJvYmplY3QiICE9PSB0eXBlb2Ygb3B0aW9ucyA/IGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiUmVhY3RET00ucHJlaW5pdCgpOiBFeHBlY3RlZCB0aGUgYG9wdGlvbnNgIGFyZ3VtZW50IChzZWNvbmQpIHRvIGJlIGFuIG9iamVjdCB3aXRoIGFuIGBhc2AgcHJvcGVydHkgZGVzY3JpYmluZyB0aGUgdHlwZSBvZiByZXNvdXJjZSB0byBiZSBwcmVpbml0aWFsaXplZCBidXQgZW5jb3VudGVyZWQgJXMgaW5zdGVhZC4iLAogICAgICAgICAgZ2V0VmFsdWVEZXNjcmlwdG9yRXhwZWN0aW5nRW51bUZvcldhcm5pbmcob3B0aW9ucykKICAgICAgICApIDogInN0eWxlIiAhPT0gb3B0aW9ucy5hcyAmJiAic2NyaXB0IiAhPT0gb3B0aW9ucy5hcyAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgJ1JlYWN0RE9NLnByZWluaXQoKTogRXhwZWN0ZWQgdGhlIGBhc2AgcHJvcGVydHkgaW4gdGhlIGBvcHRpb25zYCBhcmd1bWVudCAoc2Vjb25kKSB0byBjb250YWluIGEgdmFsaWQgdmFsdWUgZGVzY3JpYmluZyB0aGUgdHlwZSBvZiByZXNvdXJjZSB0byBiZSBwcmVpbml0aWFsaXplZCBidXQgZW5jb3VudGVyZWQgJXMgaW5zdGVhZC4gVmFsaWQgdmFsdWVzIGZvciBgYXNgIGFyZSAic3R5bGUiIGFuZCAic2NyaXB0Ii4nLAogICAgICAgICAgZ2V0VmFsdWVEZXNjcmlwdG9yRXhwZWN0aW5nRW51bUZvcldhcm5pbmcob3B0aW9ucy5hcykKICAgICAgICApIDogY29uc29sZS5lcnJvcigKICAgICAgICAgICJSZWFjdERPTS5wcmVpbml0KCk6IEV4cGVjdGVkIHRoZSBgaHJlZmAgYXJndW1lbnQgKGZpcnN0KSB0byBiZSBhIG5vbi1lbXB0eSBzdHJpbmcgYnV0IGVuY291bnRlcmVkICVzIGluc3RlYWQuIiwKICAgICAgICAgIGdldFZhbHVlRGVzY3JpcHRvckV4cGVjdGluZ09iamVjdEZvcldhcm5pbmcoaHJlZikKICAgICAgICApOwogICAgICAgIGlmICgic3RyaW5nIiA9PT0gdHlwZW9mIGhyZWYgJiYgb3B0aW9ucyAmJiAic3RyaW5nIiA9PT0gdHlwZW9mIG9wdGlvbnMuYXMpIHsKICAgICAgICAgIHZhciBhcyA9IG9wdGlvbnMuYXMsIGNyb3NzT3JpZ2luID0gZ2V0Q3Jvc3NPcmlnaW5TdHJpbmdBcyhhcywgb3B0aW9ucy5jcm9zc09yaWdpbiksIGludGVncml0eSA9ICJzdHJpbmciID09PSB0eXBlb2Ygb3B0aW9ucy5pbnRlZ3JpdHkgPyBvcHRpb25zLmludGVncml0eSA6IHZvaWQgMCwgZmV0Y2hQcmlvcml0eSA9ICJzdHJpbmciID09PSB0eXBlb2Ygb3B0aW9ucy5mZXRjaFByaW9yaXR5ID8gb3B0aW9ucy5mZXRjaFByaW9yaXR5IDogdm9pZCAwOwogICAgICAgICAgInN0eWxlIiA9PT0gYXMgPyBJbnRlcm5hbHMuZC5TKAogICAgICAgICAgICBocmVmLAogICAgICAgICAgICAic3RyaW5nIiA9PT0gdHlwZW9mIG9wdGlvbnMucHJlY2VkZW5jZSA/IG9wdGlvbnMucHJlY2VkZW5jZSA6IHZvaWQgMCwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGNyb3NzT3JpZ2luLAogICAgICAgICAgICAgIGludGVncml0eSwKICAgICAgICAgICAgICBmZXRjaFByaW9yaXR5CiAgICAgICAgICAgIH0KICAgICAgICAgICkgOiAic2NyaXB0IiA9PT0gYXMgJiYgSW50ZXJuYWxzLmQuWChocmVmLCB7CiAgICAgICAgICAgIGNyb3NzT3JpZ2luLAogICAgICAgICAgICBpbnRlZ3JpdHksCiAgICAgICAgICAgIGZldGNoUHJpb3JpdHksCiAgICAgICAgICAgIG5vbmNlOiAic3RyaW5nIiA9PT0gdHlwZW9mIG9wdGlvbnMubm9uY2UgPyBvcHRpb25zLm5vbmNlIDogdm9pZCAwCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIGV4cG9ydHMucHJlaW5pdE1vZHVsZSA9IGZ1bmN0aW9uKGhyZWYsIG9wdGlvbnMpIHsKICAgICAgICB2YXIgZW5jb3VudGVyZWQgPSAiIjsKICAgICAgICAic3RyaW5nIiA9PT0gdHlwZW9mIGhyZWYgJiYgaHJlZiB8fCAoZW5jb3VudGVyZWQgKz0gIiBUaGUgYGhyZWZgIGFyZ3VtZW50IGVuY291bnRlcmVkIHdhcyAiICsgZ2V0VmFsdWVEZXNjcmlwdG9yRXhwZWN0aW5nT2JqZWN0Rm9yV2FybmluZyhocmVmKSArICIuIik7CiAgICAgICAgdm9pZCAwICE9PSBvcHRpb25zICYmICJvYmplY3QiICE9PSB0eXBlb2Ygb3B0aW9ucyA/IGVuY291bnRlcmVkICs9ICIgVGhlIGBvcHRpb25zYCBhcmd1bWVudCBlbmNvdW50ZXJlZCB3YXMgIiArIGdldFZhbHVlRGVzY3JpcHRvckV4cGVjdGluZ09iamVjdEZvcldhcm5pbmcob3B0aW9ucykgKyAiLiIgOiBvcHRpb25zICYmICJhcyIgaW4gb3B0aW9ucyAmJiAic2NyaXB0IiAhPT0gb3B0aW9ucy5hcyAmJiAoZW5jb3VudGVyZWQgKz0gIiBUaGUgYGFzYCBvcHRpb24gZW5jb3VudGVyZWQgd2FzICIgKyBnZXRWYWx1ZURlc2NyaXB0b3JFeHBlY3RpbmdFbnVtRm9yV2FybmluZyhvcHRpb25zLmFzKSArICIuIik7CiAgICAgICAgaWYgKGVuY291bnRlcmVkKQogICAgICAgICAgY29uc29sZS5lcnJvcigKICAgICAgICAgICAgIlJlYWN0RE9NLnByZWluaXRNb2R1bGUoKTogRXhwZWN0ZWQgdXAgdG8gdHdvIGFyZ3VtZW50cywgYSBub24tZW1wdHkgYGhyZWZgIHN0cmluZyBhbmQsIG9wdGlvbmFsbHksIGFuIGBvcHRpb25zYCBvYmplY3Qgd2l0aCBhIHZhbGlkIGBhc2AgcHJvcGVydHkuJXMiLAogICAgICAgICAgICBlbmNvdW50ZXJlZAogICAgICAgICAgKTsKICAgICAgICBlbHNlCiAgICAgICAgICBzd2l0Y2ggKGVuY291bnRlcmVkID0gb3B0aW9ucyAmJiAic3RyaW5nIiA9PT0gdHlwZW9mIG9wdGlvbnMuYXMgPyBvcHRpb25zLmFzIDogInNjcmlwdCIsIGVuY291bnRlcmVkKSB7CiAgICAgICAgICAgIGNhc2UgInNjcmlwdCI6CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgZW5jb3VudGVyZWQgPSBnZXRWYWx1ZURlc2NyaXB0b3JFeHBlY3RpbmdFbnVtRm9yV2FybmluZyhlbmNvdW50ZXJlZCksIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICAgICAnUmVhY3RET00ucHJlaW5pdE1vZHVsZSgpOiBDdXJyZW50bHkgdGhlIG9ubHkgc3VwcG9ydGVkICJhcyIgdHlwZSBmb3IgdGhpcyBmdW5jdGlvbiBpcyAic2NyaXB0IiBidXQgcmVjZWl2ZWQgIiVzIiBpbnN0ZWFkLiBUaGlzIHdhcm5pbmcgd2FzIGdlbmVyYXRlZCBmb3IgYGhyZWZgICIlcyIuIEluIHRoZSBmdXR1cmUgb3RoZXIgbW9kdWxlIHR5cGVzIHdpbGwgYmUgc3VwcG9ydGVkLCBhbGlnbmluZyB3aXRoIHRoZSBpbXBvcnQtYXR0cmlidXRlcyBwcm9wb3NhbC4gTGVhcm4gbW9yZSBoZXJlOiAoaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtaW1wb3J0LWF0dHJpYnV0ZXMpJywKICAgICAgICAgICAgICAgIGVuY291bnRlcmVkLAogICAgICAgICAgICAgICAgaHJlZgogICAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgaWYgKCJzdHJpbmciID09PSB0eXBlb2YgaHJlZikKICAgICAgICAgIGlmICgib2JqZWN0IiA9PT0gdHlwZW9mIG9wdGlvbnMgJiYgbnVsbCAhPT0gb3B0aW9ucykgewogICAgICAgICAgICBpZiAobnVsbCA9PSBvcHRpb25zLmFzIHx8ICJzY3JpcHQiID09PSBvcHRpb25zLmFzKQogICAgICAgICAgICAgIGVuY291bnRlcmVkID0gZ2V0Q3Jvc3NPcmlnaW5TdHJpbmdBcygKICAgICAgICAgICAgICAgIG9wdGlvbnMuYXMsCiAgICAgICAgICAgICAgICBvcHRpb25zLmNyb3NzT3JpZ2luCiAgICAgICAgICAgICAgKSwgSW50ZXJuYWxzLmQuTShocmVmLCB7CiAgICAgICAgICAgICAgICBjcm9zc09yaWdpbjogZW5jb3VudGVyZWQsCiAgICAgICAgICAgICAgICBpbnRlZ3JpdHk6ICJzdHJpbmciID09PSB0eXBlb2Ygb3B0aW9ucy5pbnRlZ3JpdHkgPyBvcHRpb25zLmludGVncml0eSA6IHZvaWQgMCwKICAgICAgICAgICAgICAgIG5vbmNlOiAic3RyaW5nIiA9PT0gdHlwZW9mIG9wdGlvbnMubm9uY2UgPyBvcHRpb25zLm5vbmNlIDogdm9pZCAwCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgbnVsbCA9PSBvcHRpb25zICYmIEludGVybmFscy5kLk0oaHJlZik7CiAgICAgIH07CiAgICAgIGV4cG9ydHMucHJlbG9hZCA9IGZ1bmN0aW9uKGhyZWYsIG9wdGlvbnMpIHsKICAgICAgICB2YXIgZW5jb3VudGVyZWQgPSAiIjsKICAgICAgICAic3RyaW5nIiA9PT0gdHlwZW9mIGhyZWYgJiYgaHJlZiB8fCAoZW5jb3VudGVyZWQgKz0gIiBUaGUgYGhyZWZgIGFyZ3VtZW50IGVuY291bnRlcmVkIHdhcyAiICsgZ2V0VmFsdWVEZXNjcmlwdG9yRXhwZWN0aW5nT2JqZWN0Rm9yV2FybmluZyhocmVmKSArICIuIik7CiAgICAgICAgbnVsbCA9PSBvcHRpb25zIHx8ICJvYmplY3QiICE9PSB0eXBlb2Ygb3B0aW9ucyA/IGVuY291bnRlcmVkICs9ICIgVGhlIGBvcHRpb25zYCBhcmd1bWVudCBlbmNvdW50ZXJlZCB3YXMgIiArIGdldFZhbHVlRGVzY3JpcHRvckV4cGVjdGluZ09iamVjdEZvcldhcm5pbmcob3B0aW9ucykgKyAiLiIgOiAic3RyaW5nIiA9PT0gdHlwZW9mIG9wdGlvbnMuYXMgJiYgb3B0aW9ucy5hcyB8fCAoZW5jb3VudGVyZWQgKz0gIiBUaGUgYGFzYCBvcHRpb24gZW5jb3VudGVyZWQgd2FzICIgKyBnZXRWYWx1ZURlc2NyaXB0b3JFeHBlY3RpbmdPYmplY3RGb3JXYXJuaW5nKG9wdGlvbnMuYXMpICsgIi4iKTsKICAgICAgICBlbmNvdW50ZXJlZCAmJiBjb25zb2xlLmVycm9yKAogICAgICAgICAgJ1JlYWN0RE9NLnByZWxvYWQoKTogRXhwZWN0ZWQgdHdvIGFyZ3VtZW50cywgYSBub24tZW1wdHkgYGhyZWZgIHN0cmluZyBhbmQgYW4gYG9wdGlvbnNgIG9iamVjdCB3aXRoIGFuIGBhc2AgcHJvcGVydHkgdmFsaWQgZm9yIGEgYDxsaW5rIHJlbD0icHJlbG9hZCIgYXM9Ii4uLiIgLz5gIHRhZy4lcycsCiAgICAgICAgICBlbmNvdW50ZXJlZAogICAgICAgICk7CiAgICAgICAgaWYgKCJzdHJpbmciID09PSB0eXBlb2YgaHJlZiAmJiAib2JqZWN0IiA9PT0gdHlwZW9mIG9wdGlvbnMgJiYgbnVsbCAhPT0gb3B0aW9ucyAmJiAic3RyaW5nIiA9PT0gdHlwZW9mIG9wdGlvbnMuYXMpIHsKICAgICAgICAgIGVuY291bnRlcmVkID0gb3B0aW9ucy5hczsKICAgICAgICAgIHZhciBjcm9zc09yaWdpbiA9IGdldENyb3NzT3JpZ2luU3RyaW5nQXMoCiAgICAgICAgICAgIGVuY291bnRlcmVkLAogICAgICAgICAgICBvcHRpb25zLmNyb3NzT3JpZ2luCiAgICAgICAgICApOwogICAgICAgICAgSW50ZXJuYWxzLmQuTChocmVmLCBlbmNvdW50ZXJlZCwgewogICAgICAgICAgICBjcm9zc09yaWdpbiwKICAgICAgICAgICAgaW50ZWdyaXR5OiAic3RyaW5nIiA9PT0gdHlwZW9mIG9wdGlvbnMuaW50ZWdyaXR5ID8gb3B0aW9ucy5pbnRlZ3JpdHkgOiB2b2lkIDAsCiAgICAgICAgICAgIG5vbmNlOiAic3RyaW5nIiA9PT0gdHlwZW9mIG9wdGlvbnMubm9uY2UgPyBvcHRpb25zLm5vbmNlIDogdm9pZCAwLAogICAgICAgICAgICB0eXBlOiAic3RyaW5nIiA9PT0gdHlwZW9mIG9wdGlvbnMudHlwZSA/IG9wdGlvbnMudHlwZSA6IHZvaWQgMCwKICAgICAgICAgICAgZmV0Y2hQcmlvcml0eTogInN0cmluZyIgPT09IHR5cGVvZiBvcHRpb25zLmZldGNoUHJpb3JpdHkgPyBvcHRpb25zLmZldGNoUHJpb3JpdHkgOiB2b2lkIDAsCiAgICAgICAgICAgIHJlZmVycmVyUG9saWN5OiAic3RyaW5nIiA9PT0gdHlwZW9mIG9wdGlvbnMucmVmZXJyZXJQb2xpY3kgPyBvcHRpb25zLnJlZmVycmVyUG9saWN5IDogdm9pZCAwLAogICAgICAgICAgICBpbWFnZVNyY1NldDogInN0cmluZyIgPT09IHR5cGVvZiBvcHRpb25zLmltYWdlU3JjU2V0ID8gb3B0aW9ucy5pbWFnZVNyY1NldCA6IHZvaWQgMCwKICAgICAgICAgICAgaW1hZ2VTaXplczogInN0cmluZyIgPT09IHR5cGVvZiBvcHRpb25zLmltYWdlU2l6ZXMgPyBvcHRpb25zLmltYWdlU2l6ZXMgOiB2b2lkIDAsCiAgICAgICAgICAgIG1lZGlhOiAic3RyaW5nIiA9PT0gdHlwZW9mIG9wdGlvbnMubWVkaWEgPyBvcHRpb25zLm1lZGlhIDogdm9pZCAwCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIGV4cG9ydHMucHJlbG9hZE1vZHVsZSA9IGZ1bmN0aW9uKGhyZWYsIG9wdGlvbnMpIHsKICAgICAgICB2YXIgZW5jb3VudGVyZWQgPSAiIjsKICAgICAgICAic3RyaW5nIiA9PT0gdHlwZW9mIGhyZWYgJiYgaHJlZiB8fCAoZW5jb3VudGVyZWQgKz0gIiBUaGUgYGhyZWZgIGFyZ3VtZW50IGVuY291bnRlcmVkIHdhcyAiICsgZ2V0VmFsdWVEZXNjcmlwdG9yRXhwZWN0aW5nT2JqZWN0Rm9yV2FybmluZyhocmVmKSArICIuIik7CiAgICAgICAgdm9pZCAwICE9PSBvcHRpb25zICYmICJvYmplY3QiICE9PSB0eXBlb2Ygb3B0aW9ucyA/IGVuY291bnRlcmVkICs9ICIgVGhlIGBvcHRpb25zYCBhcmd1bWVudCBlbmNvdW50ZXJlZCB3YXMgIiArIGdldFZhbHVlRGVzY3JpcHRvckV4cGVjdGluZ09iamVjdEZvcldhcm5pbmcob3B0aW9ucykgKyAiLiIgOiBvcHRpb25zICYmICJhcyIgaW4gb3B0aW9ucyAmJiAic3RyaW5nIiAhPT0gdHlwZW9mIG9wdGlvbnMuYXMgJiYgKGVuY291bnRlcmVkICs9ICIgVGhlIGBhc2Agb3B0aW9uIGVuY291bnRlcmVkIHdhcyAiICsgZ2V0VmFsdWVEZXNjcmlwdG9yRXhwZWN0aW5nT2JqZWN0Rm9yV2FybmluZyhvcHRpb25zLmFzKSArICIuIik7CiAgICAgICAgZW5jb3VudGVyZWQgJiYgY29uc29sZS5lcnJvcigKICAgICAgICAgICdSZWFjdERPTS5wcmVsb2FkTW9kdWxlKCk6IEV4cGVjdGVkIHR3byBhcmd1bWVudHMsIGEgbm9uLWVtcHR5IGBocmVmYCBzdHJpbmcgYW5kLCBvcHRpb25hbGx5LCBhbiBgb3B0aW9uc2Agb2JqZWN0IHdpdGggYW4gYGFzYCBwcm9wZXJ0eSB2YWxpZCBmb3IgYSBgPGxpbmsgcmVsPSJtb2R1bGVwcmVsb2FkIiBhcz0iLi4uIiAvPmAgdGFnLiVzJywKICAgICAgICAgIGVuY291bnRlcmVkCiAgICAgICAgKTsKICAgICAgICAic3RyaW5nIiA9PT0gdHlwZW9mIGhyZWYgJiYgKG9wdGlvbnMgPyAoZW5jb3VudGVyZWQgPSBnZXRDcm9zc09yaWdpblN0cmluZ0FzKAogICAgICAgICAgb3B0aW9ucy5hcywKICAgICAgICAgIG9wdGlvbnMuY3Jvc3NPcmlnaW4KICAgICAgICApLCBJbnRlcm5hbHMuZC5tKGhyZWYsIHsKICAgICAgICAgIGFzOiAic3RyaW5nIiA9PT0gdHlwZW9mIG9wdGlvbnMuYXMgJiYgInNjcmlwdCIgIT09IG9wdGlvbnMuYXMgPyBvcHRpb25zLmFzIDogdm9pZCAwLAogICAgICAgICAgY3Jvc3NPcmlnaW46IGVuY291bnRlcmVkLAogICAgICAgICAgaW50ZWdyaXR5OiAic3RyaW5nIiA9PT0gdHlwZW9mIG9wdGlvbnMuaW50ZWdyaXR5ID8gb3B0aW9ucy5pbnRlZ3JpdHkgOiB2b2lkIDAKICAgICAgICB9KSkgOiBJbnRlcm5hbHMuZC5tKGhyZWYpKTsKICAgICAgfTsKICAgICAgZXhwb3J0cy5yZXF1ZXN0Rm9ybVJlc2V0ID0gZnVuY3Rpb24oZm9ybSkgewogICAgICAgIEludGVybmFscy5kLnIoZm9ybSk7CiAgICAgIH07CiAgICAgIGV4cG9ydHMudW5zdGFibGVfYmF0Y2hlZFVwZGF0ZXMgPSBmdW5jdGlvbihmbiwgYSkgewogICAgICAgIHJldHVybiBmbihhKTsKICAgICAgfTsKICAgICAgZXhwb3J0cy51c2VGb3JtU3RhdGUgPSBmdW5jdGlvbihhY3Rpb24sIGluaXRpYWxTdGF0ZSwgcGVybWFsaW5rKSB7CiAgICAgICAgcmV0dXJuIHJlc29sdmVEaXNwYXRjaGVyKCkudXNlRm9ybVN0YXRlKGFjdGlvbiwgaW5pdGlhbFN0YXRlLCBwZXJtYWxpbmspOwogICAgICB9OwogICAgICBleHBvcnRzLnVzZUZvcm1TdGF0dXMgPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gcmVzb2x2ZURpc3BhdGNoZXIoKS51c2VIb3N0VHJhbnNpdGlvblN0YXR1cygpOwogICAgICB9OwogICAgICBleHBvcnRzLnZlcnNpb24gPSAiMTkuMS4xIjsKICAgICAgInVuZGVmaW5lZCIgIT09IHR5cGVvZiBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18gJiYgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5yZWdpc3RlckludGVybmFsTW9kdWxlU3RvcCAmJiBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18ucmVnaXN0ZXJJbnRlcm5hbE1vZHVsZVN0b3AoRXJyb3IoKSk7CiAgICB9KSgpOwogIH0KfSk7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtZG9tL2luZGV4LmpzCnZhciByZXF1aXJlX3JlYWN0X2RvbSA9IF9fY29tbW9uSlMoewogICIuLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtZG9tL2luZGV4LmpzIihleHBvcnRzLCBtb2R1bGUpIHsKICAgIGlmIChmYWxzZSkgewogICAgICBjaGVja0RDRSgpOwogICAgICBtb2R1bGUuZXhwb3J0cyA9IG51bGw7CiAgICB9IGVsc2UgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmVfcmVhY3RfZG9tX2RldmVsb3BtZW50KCk7CiAgICB9CiAgfQp9KTsKCmV4cG9ydCB7CiAgcmVxdWlyZV9yZWFjdF9kb20KfTsKLyohIEJ1bmRsZWQgbGljZW5zZSBpbmZvcm1hdGlvbjoKCnJlYWN0LWRvbS9janMvcmVhY3QtZG9tLmRldmVsb3BtZW50LmpzOgogICgqKgogICAqIEBsaWNlbnNlIFJlYWN0CiAgICogcmVhY3QtZG9tLmRldmVsb3BtZW50LmpzCiAgICoKICAgKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLgogICAqCiAgICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlCiAgICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogICAqKQoqLwovLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1NSDRNVzNPSy5qcy5tYXAK",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 16557
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 7,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.544Z",
        "time": 8,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/consumer.ts",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/hooks/use-movies.ts"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"f5e-T4hO/r/eiJBUh34ulNbV2M1zmYI\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "18113"
            }
          ],
          "content": {
            "size": 18113,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IGF4aW9zIGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9heGlvcy5qcz92PTBiYjY5ZDczIjsKaW1wb3J0IHsgdG9rZW5TZXJ2aWNlIH0gZnJvbSAiL3NyYy9zZXJ2aWNlcy90b2tlbi1zZXJ2aWNlLnRzIjsKY29uc3QgQVBJX1VSTCA9ICJodHRwOi8vbG9jYWxob3N0OjMwMDEiOwpjb25zdCB0b2tlblBhdGggPSAiL2F1dGgvaWRlbnRpdHktdG9rZW4iOwpjb25zdCBheGlvc0luc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBBUElfVVJMLAogIC8vIHRoaXMgaXMgcmVhbGx5IHRoZSBBUEkgdXJsIHdoZXJlIHRoZSByZXF1ZXN0cyBhcmUgZ29pbmcgdG8KICB3aXRoQ3JlZGVudGlhbHM6IHRydWUKICAvLyBSZXF1aXJlZCBmb3Igc2VuZGluZyBjb29raWVzIHdpdGggY3Jvc3Mtb3JpZ2luIHJlcXVlc3RzCn0pOwpheGlvc0luc3RhbmNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZSgKICBhc3luYyAoY29uZmlnKSA9PiB7CiAgICBjb25zdCBpc0F1dGhSZXF1ZXN0ID0gY29uZmlnLnVybCA9PT0gdG9rZW5QYXRoIHx8IGNvbmZpZy51cmw/LnN0YXJ0c1dpdGgoIi9hdXRoL3JlbmV3Iik7CiAgICBpZiAoaXNBdXRoUmVxdWVzdCkgcmV0dXJuIGNvbmZpZzsKICAgIGlmICghdG9rZW5TZXJ2aWNlLmlzVG9rZW5WYWxpZCh0b2tlblNlcnZpY2UuZ2V0VG9rZW4oKSkpIHsKICAgICAgYXdhaXQgZW5zdXJlVmFsaWRUb2tlbigpOwogICAgfQogICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IHRva2VuU2VydmljZS5nZXRBdXRob3JpemF0aW9uSGVhZGVyKCk7CiAgICByZXR1cm4gY29uZmlnOwogIH0sCiAgKGVycm9yKSA9PiBQcm9taXNlLnJlamVjdChlcnJvcikKKTsKYXhpb3NJbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKAogIChyZXNwb25zZSkgPT4gcmVzcG9uc2UsCiAgLy8gUmV0dXJuIHN1Y2Nlc3NmdWwgcmVzcG9uc2VzIGFzLWlzCiAgYXN5bmMgKGVycm9yKSA9PiB7CiAgICBjb25zdCBvcmlnaW5hbFJlcXVlc3QgPSBlcnJvci5jb25maWc7CiAgICBpZiAoZXJyb3IucmVzcG9uc2U/LnN0YXR1cyA9PT0gNDAxICYmICFvcmlnaW5hbFJlcXVlc3QuX3JldHJ5KSB7CiAgICAgIG9yaWdpbmFsUmVxdWVzdC5fcmV0cnkgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlZnJlc2hlZFRva2VuID0gYXdhaXQgdG9rZW5TZXJ2aWNlLnJlZnJlc2hUb2tlbigpOwogICAgICAgIGlmICghdG9rZW5TZXJ2aWNlLmlzVG9rZW5WYWxpZChyZWZyZXNoZWRUb2tlbikpIHsKICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgICAgICAgfQogICAgICAgIG9yaWdpbmFsUmVxdWVzdC5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSB0b2tlblNlcnZpY2UuZ2V0QXV0aG9yaXphdGlvbkhlYWRlcigpOwogICAgICAgIHJldHVybiBheGlvc0luc3RhbmNlKG9yaWdpbmFsUmVxdWVzdCk7CiAgICAgIH0gY2F0Y2ggKHJlZnJlc2hFcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIlRva2VuIHJlZnJlc2ggZmFpbGVkOiIsIHJlZnJlc2hFcnJvcik7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICB9Cik7CmV4cG9ydCBjb25zdCBzZXRBcGlVcmwgPSAodXJsKSA9PiB7CiAgYXhpb3NJbnN0YW5jZS5kZWZhdWx0cy5iYXNlVVJMID0gdXJsOwp9Owpjb25zdCBlbnN1cmVWYWxpZFRva2VuID0gYXN5bmMgKCkgPT4gewogIHRyeSB7CiAgICBjb25zdCB0b2tlbiA9IHRva2VuU2VydmljZS5nZXRUb2tlbigpOwogICAgaWYgKCF0b2tlbikgewogICAgICBjb25zb2xlLndhcm4oIk5vIHRva2VuIGF2YWlsYWJsZSAtIHVzZXIgbmVlZHMgdG8gbG9nIGluIik7CiAgICB9CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byBlbnN1cmUgdmFsaWQgdG9rZW46IiwgZXJyb3IpOwogICAgdGhyb3cgZXJyb3I7CiAgfQp9Owpjb25zdCB5aWVsZERhdGEgPSAocmVzKSA9PiByZXMuZGF0YTsKY29uc3QgaGFuZGxlRXJyb3IgPSAoZXJyKSA9PiB7CiAgaWYgKGVyci5yZXNwb25zZT8uZGF0YSAmJiB0eXBlb2YgZXJyLnJlc3BvbnNlLmRhdGEgPT09ICJvYmplY3QiKSB7CiAgICBjb25zdCBlcnJvckRhdGEgPSBlcnIucmVzcG9uc2UuZGF0YTsKICAgIHJldHVybiB7CiAgICAgIC4uLmVycm9yRGF0YSwKICAgICAgc3RhdHVzOiBlcnJvckRhdGEuc3RhdHVzIHx8IGVyci5yZXNwb25zZS5zdGF0dXMgfHwgNTAwCiAgICB9OwogIH0KICByZXR1cm4gewogICAgZXJyb3I6IGVyci5tZXNzYWdlIHx8ICJVbmV4cGVjdGVkIGVycm9yIG9jY3VycmVkIiwKICAgIHN0YXR1czogZXJyLnJlc3BvbnNlPy5zdGF0dXMgfHwgNTAwCiAgfTsKfTsKY29uc3QgY2FsbCA9IChyZXEpID0+IHJlcS50aGVuKHlpZWxkRGF0YSkuY2F0Y2goaGFuZGxlRXJyb3IpOwpleHBvcnQgY29uc3QgZ2V0TW92aWVzID0gYXN5bmMgKCkgPT4gewogIGF3YWl0IGVuc3VyZVZhbGlkVG9rZW4oKTsKICByZXR1cm4gY2FsbChheGlvc0luc3RhbmNlLmdldCgiL21vdmllcyIpKTsKfTsKZXhwb3J0IGNvbnN0IGdldE1vdmllQnlJZCA9IGFzeW5jIChpZCkgPT4gewogIGF3YWl0IGVuc3VyZVZhbGlkVG9rZW4oKTsKICByZXR1cm4gY2FsbChheGlvc0luc3RhbmNlLmdldChgL21vdmllcy8ke2lkfWApKTsKfTsKZXhwb3J0IGNvbnN0IGdldE1vdmllQnlOYW1lID0gYXN5bmMgKG5hbWUpID0+IHsKICBhd2FpdCBlbnN1cmVWYWxpZFRva2VuKCk7CiAgcmV0dXJuIGNhbGwoYXhpb3NJbnN0YW5jZS5nZXQoYC9tb3ZpZXM/bmFtZT0ke2VuY29kZVVSSUNvbXBvbmVudChuYW1lKX1gKSk7Cn07CmV4cG9ydCBjb25zdCBhZGRNb3ZpZSA9IGFzeW5jIChkYXRhKSA9PiB7CiAgYXdhaXQgZW5zdXJlVmFsaWRUb2tlbigpOwogIHJldHVybiBjYWxsKGF4aW9zSW5zdGFuY2UucG9zdCgiL21vdmllcyIsIGRhdGEpKTsKfTsKZXhwb3J0IGNvbnN0IGRlbGV0ZU1vdmllQnlJZCA9IGFzeW5jIChpZCkgPT4gewogIGF3YWl0IGVuc3VyZVZhbGlkVG9rZW4oKTsKICByZXR1cm4gY2FsbChheGlvc0luc3RhbmNlLmRlbGV0ZShgL21vdmllcy8ke2lkfWApKTsKfTsKZXhwb3J0IGNvbnN0IHVwZGF0ZU1vdmllID0gYXN5bmMgKGlkLCBkYXRhKSA9PiB7CiAgYXdhaXQgZW5zdXJlVmFsaWRUb2tlbigpOwogIHJldHVybiBjYWxsKGF4aW9zSW5zdGFuY2UucHV0KGAvbW92aWVzLyR7aWR9YCwgZGF0YSkpOwp9OwpleHBvcnQgY29uc3QgbG9naW4gPSBhc3luYyAoY3JlZGVudGlhbHMpID0+IHsKICB0cnkgewogICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvc0luc3RhbmNlLnBvc3QodG9rZW5QYXRoLCBjcmVkZW50aWFscyk7CiAgICBjb25zdCBkYXRhID0geWllbGREYXRhKHJlc3BvbnNlKTsKICAgIGlmIChkYXRhLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgZXJyb3I6ICJBdXRoZW50aWNhdGlvbiBmYWlsZWQ6IFNlcnZlciBkaWQgbm90IHNldCBhdXRoZW50aWNhdGlvbiBjb29raWVzIiwKICAgICAgICBzdGF0dXM6IGRhdGEuc3RhdHVzIHx8IDUwMAogICAgICB9OwogICAgfQogICAgaWYgKCFkYXRhLmlkZW50aXR5IHx8ICFkYXRhLmlkZW50aXR5LnVzZXJJZCkgewogICAgICByZXR1cm4gewogICAgICAgIGVycm9yOiAiQXV0aGVudGljYXRpb24gZmFpbGVkOiBJbnZhbGlkIGlkZW50aXR5IGluZm9ybWF0aW9uIiwKICAgICAgICBzdGF0dXM6IDUwMAogICAgICB9OwogICAgfQogICAgcmV0dXJuIGRhdGE7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnN0IGVycm9yUmVzcG9uc2UgPSBoYW5kbGVFcnJvcihlcnJvcik7CiAgICByZXR1cm4gewogICAgICAuLi5lcnJvclJlc3BvbnNlLAogICAgICBzdGF0dXM6IGVycm9yUmVzcG9uc2Uuc3RhdHVzIHx8IDUwMAogICAgfTsKICB9Cn07CgovLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiSW1OdmJuTjFiV1Z5TG5SeklsMHNJbk52ZFhKalpYTkRiMjUwWlc1MElqcGJJbWx0Y0c5eWRDQjBlWEJsSUhzZ1FYaHBiM05TWlhOd2IyNXpaU3dnUVhocGIzTkZjbkp2Y2lCOUlHWnliMjBnSjJGNGFXOXpKMXh1YVcxd2IzSjBJR0Y0YVc5eklHWnliMjBnSjJGNGFXOXpKMXh1YVcxd2IzSjBJSFI1Y0dVZ2UxeHVJQ0JEYjI1bWJHbGpkRTF2ZG1sbFVtVnpjRzl1YzJVc1hHNGdJRU55WldGMFpVMXZkbWxsVW1WemNHOXVjMlVzWEc0Z0lFUmxiR1YwWlUxdmRtbGxVbVZ6Y0c5dWMyVXNYRzRnSUVkbGRFMXZkbWxsVW1WemNHOXVjMlVzWEc0Z0lFMXZkbWxsTEZ4dUlDQk5iM1pwWlU1dmRFWnZkVzVrVW1WemNHOXVjMlVzWEc0Z0lGVndaR0YwWlUxdmRtbGxVbVZ6Y0c5dWMyVmNibjBnWm5KdmJTQW5RSE5vWVhKbFpDOTBlWEJsY3k5dGIzWnBaUzEwZVhCbGN5ZGNibWx0Y0c5eWRDQjdJSFJ2YTJWdVUyVnlkbWxqWlNCOUlHWnliMjBnSnk0dmMyVnlkbWxqWlhNdmRHOXJaVzR0YzJWeWRtbGpaU2RjYmx4dVkyOXVjM1FnUVZCSlgxVlNUQ0E5SUNkb2RIUndPaTh2Ykc5allXeG9iM04wT2pNd01ERW5YRzVjYm1OdmJuTjBJSFJ2YTJWdVVHRjBhQ0E5SUNjdllYVjBhQzlwWkdWdWRHbDBlUzEwYjJ0bGJpZGNibHh1Wlhod2IzSjBJSFI1Y0dVZ1JYSnliM0pTWlhOd2IyNXpaU0E5SUh0Y2JpQWdaWEp5YjNJNklITjBjbWx1WjF4dUlDQnpkR0YwZFhNL09pQnVkVzFpWlhKY2JuMWNiaTh2SUdKaGMyVlZVa3dnYVc0Z1lYaHBiM05KYm5OMFlXNWpaVG9nUVhocGIzTWdkWE5sY3lCaElHWnBlR1ZrSUdKaGMyVWdWVkpNSUdadmNpQmhiR3dnY21WeGRXVnpkSE1zWEc0dkx5QmhibVFnVG05amF5QnRkWE4wSUdsdWRHVnlZMlZ3ZENCMGFHRjBJR1Y0WVdOMElGVlNUQ0JtYjNJZ2RHaGxJSFJsYzNSeklIUnZJSGR2Y210Y2JtTnZibk4wSUdGNGFXOXpTVzV6ZEdGdVkyVWdQU0JoZUdsdmN5NWpjbVZoZEdVb2UxeHVJQ0JpWVhObFZWSk1PaUJCVUVsZlZWSk1MQ0F2THlCMGFHbHpJR2x6SUhKbFlXeHNlU0IwYUdVZ1FWQkpJSFZ5YkNCM2FHVnlaU0IwYUdVZ2NtVnhkV1Z6ZEhNZ1lYSmxJR2R2YVc1bklIUnZYRzRnSUhkcGRHaERjbVZrWlc1MGFXRnNjem9nZEhKMVpTQXZMeUJTWlhGMWFYSmxaQ0JtYjNJZ2MyVnVaR2x1WnlCamIyOXJhV1Z6SUhkcGRHZ2dZM0p2YzNNdGIzSnBaMmx1SUhKbGNYVmxjM1J6WEc1OUtWeHVYRzR2THlCQlpHUWdjbVZ4ZFdWemRDQnBiblJsY21ObGNIUnZjaUIwYnlCbGJuTjFjbVVnUVhWMGFHOXlhWHBoZEdsdmJpQm9aV0ZrWlhJZ2FHRnpJSEJ5YjNCbGNpQnBaR1Z1ZEdsMGVWeHVZWGhwYjNOSmJuTjBZVzVqWlM1cGJuUmxjbU5sY0hSdmNuTXVjbVZ4ZFdWemRDNTFjMlVvWEc0Z0lHRnplVzVqSUNoamIyNW1hV2NwSUQwK0lIdGNiaUFnSUNBdkx5QlRhMmx3SUdGMWRHZ2dhR1ZoWkdWeUlHWnZjaUIwYjJ0bGJpQmhZM0YxYVhOcGRHbHZiaUJoYm1RZ2NtVm1jbVZ6YUNCeVpYRjFaWE4wYzF4dUlDQWdJR052Ym5OMElHbHpRWFYwYUZKbGNYVmxjM1FnUFZ4dUlDQWdJQ0FnWTI5dVptbG5MblZ5YkNBOVBUMGdkRzlyWlc1UVlYUm9JSHg4SUdOdmJtWnBaeTUxY213L0xuTjBZWEowYzFkcGRHZ29KeTloZFhSb0wzSmxibVYzSnlsY2JpQWdJQ0JwWmlBb2FYTkJkWFJvVW1WeGRXVnpkQ2tnY21WMGRYSnVJR052Ym1acFoxeHVYRzRnSUNBZ0x5OGdSVzV6ZFhKbElIZGxJR2hoZG1VZ1lTQjBiMnRsYmx4dUlDQWdJR2xtSUNnaGRHOXJaVzVUWlhKMmFXTmxMbWx6Vkc5clpXNVdZV3hwWkNoMGIydGxibE5sY25acFkyVXVaMlYwVkc5clpXNG9LU2twSUh0Y2JpQWdJQ0FnSUdGM1lXbDBJR1Z1YzNWeVpWWmhiR2xrVkc5clpXNG9LVnh1SUNBZ0lIMWNibHh1SUNBZ0lDOHZJRUZzZDJGNWN5QmhaR1FnZEdobElFRjFkR2h2Y21sNllYUnBiMjRnYUdWaFpHVnlJSGRwZEdnZ2NISnZjR1Z5SUhSdmEyVnVJR1p2Y20xaGRGeHVJQ0FnSUdOdmJtWnBaeTVvWldGa1pYSnpMa0YxZEdodmNtbDZZWFJwYjI0Z1BTQjBiMnRsYmxObGNuWnBZMlV1WjJWMFFYVjBhRzl5YVhwaGRHbHZia2hsWVdSbGNpZ3BYRzRnSUNBZ2NtVjBkWEp1SUdOdmJtWnBaMXh1SUNCOUxGeHVJQ0FvWlhKeWIzSXBJRDArSUZCeWIyMXBjMlV1Y21WcVpXTjBLR1Z5Y205eUtWeHVLVnh1WEc0dkx5QkJaR1FnY21WemNHOXVjMlVnYVc1MFpYSmpaWEIwYjNJZ2RHOGdhR0Z1Wkd4bElIUnZhMlZ1SUhKbFpuSmxjMmdnYjI0Z05EQXhJSEpsYzNCdmJuTmxjMXh1WVhocGIzTkpibk4wWVc1alpTNXBiblJsY21ObGNIUnZjbk11Y21WemNHOXVjMlV1ZFhObEtGeHVJQ0FvY21WemNHOXVjMlVwSUQwK0lISmxjM0J2Ym5ObExDQXZMeUJTWlhSMWNtNGdjM1ZqWTJWemMyWjFiQ0J5WlhOd2IyNXpaWE1nWVhNdGFYTmNiaUFnWVhONWJtTWdLR1Z5Y205eUtTQTlQaUI3WEc0Z0lDQWdZMjl1YzNRZ2IzSnBaMmx1WVd4U1pYRjFaWE4wSUQwZ1pYSnliM0l1WTI5dVptbG5YRzVjYmlBZ0lDQXZMeUJKWmlCMGFHVWdaWEp5YjNJZ2FYTWdOREF4SUZWdVlYVjBhRzl5YVhwbFpDQmhibVFnZDJVZ2FHRjJaVzRuZENCMGNtbGxaQ0J5WldaeVpYTm9hVzVuSUhsbGRGeHVJQ0FnSUdsbUlDaGxjbkp2Y2k1eVpYTndiMjV6WlQ4dWMzUmhkSFZ6SUQwOVBTQTBNREVnSmlZZ0lXOXlhV2RwYm1Gc1VtVnhkV1Z6ZEM1ZmNtVjBjbmtwSUh0Y2JpQWdJQ0FnSUM4dklFMWhjbXNnZEdocGN5QnlaWEYxWlhOMElHRnpJSEpsZEhKcFpXUWdkRzhnY0hKbGRtVnVkQ0JwYm1acGJtbDBaU0JzYjI5d2MxeHVJQ0FnSUNBZ2IzSnBaMmx1WVd4U1pYRjFaWE4wTGw5eVpYUnllU0E5SUhSeWRXVmNibHh1SUNBZ0lDQWdkSEo1SUh0Y2JpQWdJQ0FnSUNBZ0x5OGdVbVZtY21WemFDQjBhR1VnZEc5clpXNWNiaUFnSUNBZ0lDQWdZMjl1YzNRZ2NtVm1jbVZ6YUdWa1ZHOXJaVzRnUFNCaGQyRnBkQ0IwYjJ0bGJsTmxjblpwWTJVdWNtVm1jbVZ6YUZSdmEyVnVLQ2xjYmx4dUlDQWdJQ0FnSUNBdkx5QldaWEpwWm5rZ2RHaGxJSEpsWm5KbGMyaGxaQ0IwYjJ0bGJpQnBjeUIyWVd4cFpDQmlaV1p2Y21VZ2NISnZZMlZsWkdsdVoxeHVJQ0FnSUNBZ0lDQnBaaUFvSVhSdmEyVnVVMlZ5ZG1salpTNXBjMVJ2YTJWdVZtRnNhV1FvY21WbWNtVnphR1ZrVkc5clpXNHBLU0I3WEc0Z0lDQWdJQ0FnSUNBZ2NtVjBkWEp1SUZCeWIyMXBjMlV1Y21WcVpXTjBLR1Z5Y205eUtWeHVJQ0FnSUNBZ0lDQjlYRzVjYmlBZ0lDQWdJQ0FnTHk4Z1ZYQmtZWFJsSUhSb1pTQmhkWFJvYjNKcGVtRjBhVzl1SUdobFlXUmxjaUIzYVhSb0lIUm9aU0J1WlhjZ2RHOXJaVzVjYmlBZ0lDQWdJQ0FnYjNKcFoybHVZV3hTWlhGMVpYTjBMbWhsWVdSbGNuTXVRWFYwYUc5eWFYcGhkR2x2YmlBOVhHNGdJQ0FnSUNBZ0lDQWdkRzlyWlc1VFpYSjJhV05sTG1kbGRFRjFkR2h2Y21sNllYUnBiMjVJWldGa1pYSW9LVnh1WEc0Z0lDQWdJQ0FnSUM4dklGSmxkSEo1SUhSb1pTQnZjbWxuYVc1aGJDQnlaWEYxWlhOMElIZHBkR2dnZEdobElHNWxkeUIwYjJ0bGJseHVJQ0FnSUNBZ0lDQnlaWFIxY200Z1lYaHBiM05KYm5OMFlXNWpaU2h2Y21sbmFXNWhiRkpsY1hWbGMzUXBYRzRnSUNBZ0lDQjlJR05oZEdOb0lDaHlaV1p5WlhOb1JYSnliM0lwSUh0Y2JpQWdJQ0FnSUNBZ1kyOXVjMjlzWlM1bGNuSnZjaWduVkc5clpXNGdjbVZtY21WemFDQm1ZV2xzWldRNkp5d2djbVZtY21WemFFVnljbTl5S1Z4dUlDQWdJQ0FnSUNBdkx5QkpaaUIwYjJ0bGJpQnlaV1p5WlhOb0lHWmhhV3h6TENCeVpYUjFjbTRnZEdobElHOXlhV2RwYm1Gc0lHVnljbTl5WEc0Z0lDQWdJQ0FnSUhKbGRIVnliaUJRY205dGFYTmxMbkpsYW1WamRDaGxjbkp2Y2lsY2JpQWdJQ0FnSUgxY2JpQWdJQ0I5WEc1Y2JpQWdJQ0F2THlCR2IzSWdiM1JvWlhJZ1pYSnliM0p6SUc5eUlHbG1JSEpsZEhKNUlHWmhhV3hsWkN3Z2NtVjBkWEp1SUhSb1pTQnZjbWxuYVc1aGJDQmxjbkp2Y2x4dUlDQWdJSEpsZEhWeWJpQlFjbTl0YVhObExuSmxhbVZqZENobGNuSnZjaWxjYmlBZ2ZWeHVLVnh1WEc0dkx5Qm1kVzVqZEdsdmJpQjBieUJ2ZG1WeWNtbGtaU0IwYUdVZ1ltRnpaVlZTVEN3Z2RYTmxaQ0JrZFhKcGJtY2djR0ZqZENCMFpYTjBjMXh1THk4Z1NYUWdZV3hzYjNkeklIUnZJR05vWVc1blpTQjBhR1VnWW1GelpWVlNUQ0J2WmlCaGVHbHZjMGx1YzNSaGJtTmxJR1I1Ym1GdGFXTmhiR3g1WEc0dkx5QkNlU0JqYUdGdVoybHVaeUIwYUdVZ1ltRnpaVlZTVENCa2RYSnBibWNnZEdWemRITXNJSGRsSUdOaGJpQmthWEpsWTNRZ2RHaGxJSEpsY1hWbGMzUnpYRzR2THlCMGJ5QjBhR1VnVUdGamRDQnRiMk5ySUhObGNuWmxjaUJwYm5OMFpXRmtJRzltSUhSb1pTQmhZM1IxWVd3Z1FWQkpYRzVsZUhCdmNuUWdZMjl1YzNRZ2MyVjBRWEJwVlhKc0lEMGdLSFZ5YkRvZ2MzUnlhVzVuS1NBOVBpQjdYRzRnSUdGNGFXOXpTVzV6ZEdGdVkyVXVaR1ZtWVhWc2RITXVZbUZ6WlZWU1RDQTlJSFZ5YkZ4dWZWeHVYRzR2S2lwY2JpQXFJRVZ1YzNWeVpTQjNaU0JvWVhabElHRWdkbUZzYVdRZ2RHOXJaVzRnWW1WbWIzSmxJRzFoYTJsdVp5QkJVRWtnY21WeGRXVnpkSE5jYmlBcUlGUm9hWE1nYzJsdGNHeHBabWxsWkNCMlpYSnphVzl1SUc5dWJIa2dZMmhsWTJ0eklHbG1JSGRsSUdoaGRtVWdZU0IwYjJ0bGJpd2dkMmwwYUc5MWRDQmhkWFJ2TFdGamNYVnBjbWx1WjF4dUlDb2dRSEpsZEhWeWJuTWdVSEp2YldselpTQjBhR0YwSUhKbGMyOXNkbVZ6SUhkb1pXNGdZU0IyWVd4cFpDQjBiMnRsYmlCcGN5QmhkbUZwYkdGaWJHVmNiaUFxTDF4dVkyOXVjM1FnWlc1emRYSmxWbUZzYVdSVWIydGxiaUE5SUdGemVXNWpJQ2dwT2lCUWNtOXRhWE5sUEhadmFXUStJRDArSUh0Y2JpQWdkSEo1SUh0Y2JpQWdJQ0F2THlCS2RYTjBJR05vWldOcklHbG1JSGRsSUdoaGRtVWdZVzU1SUhSdmEyVnVJQzBnWkc5dUozUWdZWFYwYnkxaFkzRjFhWEpsWEc0Z0lDQWdZMjl1YzNRZ2RHOXJaVzRnUFNCMGIydGxibE5sY25acFkyVXVaMlYwVkc5clpXNG9LVnh1SUNBZ0lHbG1JQ2doZEc5clpXNHBJSHRjYmlBZ0lDQWdJR052Ym5OdmJHVXVkMkZ5YmlnblRtOGdkRzlyWlc0Z1lYWmhhV3hoWW14bElDMGdkWE5sY2lCdVpXVmtjeUIwYnlCc2IyY2dhVzRuS1Z4dUlDQWdJQ0FnTHk4Z1RHVjBJSFJvWlNCd2NtOTBaV04wWldRZ2NtOTFkR1VnYUdGdVpHeGxJSEpsWkdseVpXTjBhVzl1SUdsdWMzUmxZV1FnYjJZZ2RHaHliM2RwYm1kY2JpQWdJQ0I5WEc0Z0lIMGdZMkYwWTJnZ0tHVnljbTl5S1NCN1hHNGdJQ0FnWTI5dWMyOXNaUzVsY25KdmNpZ25SbUZwYkdWa0lIUnZJR1Z1YzNWeVpTQjJZV3hwWkNCMGIydGxiam9uTENCbGNuSnZjaWxjYmlBZ0lDQjBhSEp2ZHlCbGNuSnZjbHh1SUNCOVhHNTlYRzVjYmk4dklFaGxiSEJsY2lCbWRXNWpkR2x2YmlCMGJ5QmxlSFJ5WVdOMElHUmhkR0VnWm5KdmJTQkJlR2x2Y3lCeVpYTndiMjV6WlZ4dVkyOXVjM1FnZVdsbGJHUkVZWFJoSUQwZ1BGUStLSEpsY3pvZ1FYaHBiM05TWlhOd2IyNXpaVHhVUGlrNklGUWdQVDRnY21WekxtUmhkR0ZjYmx4dUx5OGdTR1ZzY0dWeUlHWjFibU4wYVc5dUlIUnZJR2hoYm1Sc1pTQmxjbkp2Y25OY2JtTnZibk4wSUdoaGJtUnNaVVZ5Y205eUlEMGdLR1Z5Y2pvZ1FYaHBiM05GY25KdmNpazZJRVZ5Y205eVVtVnpjRzl1YzJVZ1BUNGdlMXh1SUNBdkx5QkpaaUIzWlNCb1lYWmxJSE4wY25WamRIVnlaV1FnWlhKeWIzSWdaR0YwWVNCbWNtOXRJSFJvWlNCelpYSjJaWElzSUhWelpTQnBkRnh1SUNCcFppQW9aWEp5TG5KbGMzQnZibk5sUHk1a1lYUmhJQ1ltSUhSNWNHVnZaaUJsY25JdWNtVnpjRzl1YzJVdVpHRjBZU0E5UFQwZ0oyOWlhbVZqZENjcElIdGNiaUFnSUNCamIyNXpkQ0JsY25KdmNrUmhkR0VnUFNCbGNuSXVjbVZ6Y0c5dWMyVXVaR0YwWVNCaGN5QkZjbkp2Y2xKbGMzQnZibk5sWEc0Z0lDQWdjbVYwZFhKdUlIdGNiaUFnSUNBZ0lDNHVMbVZ5Y205eVJHRjBZU3hjYmlBZ0lDQWdJSE4wWVhSMWN6b2daWEp5YjNKRVlYUmhMbk4wWVhSMWN5QjhmQ0JsY25JdWNtVnpjRzl1YzJVdWMzUmhkSFZ6SUh4OElEVXdNRnh1SUNBZ0lIMWNiaUFnZlZ4dVhHNGdJQzh2SUU5MGFHVnlkMmx6WlNCamNtVmhkR1VnWVNCblpXNWxjbWxqSUdWeWNtOXlJSGRwZEdnZ2RHaGxJSE4wWVhSMWN5Qm1jbTl0SUhSb1pTQnlaWE53YjI1elpTQnBaaUJoZG1GcGJHRmliR1ZjYmlBZ2NtVjBkWEp1SUh0Y2JpQWdJQ0JsY25KdmNqb2daWEp5TG0xbGMzTmhaMlVnZkh3Z0oxVnVaWGh3WldOMFpXUWdaWEp5YjNJZ2IyTmpkWEp5WldRbkxGeHVJQ0FnSUhOMFlYUjFjem9nWlhKeUxuSmxjM0J2Ym5ObFB5NXpkR0YwZFhNZ2ZId2dOVEF3WEc0Z0lIMWNibjFjYmx4dUx5OGdTR1ZzY0dWeUlHWjFibU4wYVc5dUlIUnZJRzFoYTJVZ1FWQkpJR05oYkd4eklIZHBkR2dnWlhKeWIzSWdhR0Z1Wkd4cGJtZGNibU52Ym5OMElHTmhiR3dnUFNBOFZENG9jbVZ4T2lCUWNtOXRhWE5sUEVGNGFXOXpVbVZ6Y0c5dWMyVThWRDQrS1RvZ1VISnZiV2x6WlR4VUlId2dSWEp5YjNKU1pYTndiMjV6WlQ0Z1BUNWNiaUFnY21WeExuUm9aVzRvZVdsbGJHUkVZWFJoS1M1allYUmphQ2hvWVc1a2JHVkZjbkp2Y2lsY2JseHVMeThnUm1WMFkyZ2dZV3hzSUcxdmRtbGxjMXh1Wlhod2IzSjBJR052Ym5OMElHZGxkRTF2ZG1sbGN5QTlJR0Z6ZVc1aklDZ3BPaUJRY205dGFYTmxQRnh1SUNCSFpYUk5iM1pwWlZKbGMzQnZibk5sSUh3Z1JYSnliM0pTWlhOd2IyNXpaVnh1UGlBOVBpQjdYRzRnSUM4dklFVnVjM1Z5WlNCM1pTQm9ZWFpsSUdFZ2RtRnNhV1FnZEc5clpXNGdZbVZtYjNKbElHMWhhMmx1WnlCMGFHVWdjbVZ4ZFdWemRGeHVJQ0JoZDJGcGRDQmxibk4xY21WV1lXeHBaRlJ2YTJWdUtDbGNiaUFnY21WMGRYSnVJR05oYkd3b1lYaHBiM05KYm5OMFlXNWpaUzVuWlhRb0p5OXRiM1pwWlhNbktTbGNibjFjYmx4dUx5OGdSbVYwWTJnZ1lTQnphVzVuYkdVZ2JXOTJhV1VnWW5rZ1NVUmNibVY0Y0c5eWRDQmpiMjV6ZENCblpYUk5iM1pwWlVKNVNXUWdQU0JoYzNsdVl5QW9YRzRnSUdsa09pQnVkVzFpWlhKY2JpazZJRkJ5YjIxcGMyVThSMlYwVFc5MmFXVlNaWE53YjI1elpTQjhJRTF2ZG1sbFRtOTBSbTkxYm1SU1pYTndiMjV6WlNCOElFVnljbTl5VW1WemNHOXVjMlUrSUQwK0lIdGNiaUFnWVhkaGFYUWdaVzV6ZFhKbFZtRnNhV1JVYjJ0bGJpZ3BYRzRnSUhKbGRIVnliaUJqWVd4c0tHRjRhVzl6U1c1emRHRnVZMlV1WjJWMEtHQXZiVzkyYVdWekx5UjdhV1I5WUNrcFhHNTlYRzVjYmk4dklFWmxkR05vSUdFZ2JXOTJhV1VnWW5rZ2JtRnRaVnh1Wlhod2IzSjBJR052Ym5OMElHZGxkRTF2ZG1sbFFubE9ZVzFsSUQwZ1lYTjVibU1nS0Z4dUlDQnVZVzFsT2lCemRISnBibWRjYmlrNklGQnliMjFwYzJVOFIyVjBUVzkyYVdWU1pYTndiMjV6WlNCOElFMXZkbWxsVG05MFJtOTFibVJTWlhOd2IyNXpaU0I4SUVWeWNtOXlVbVZ6Y0c5dWMyVStJRDArSUh0Y2JpQWdZWGRoYVhRZ1pXNXpkWEpsVm1Gc2FXUlViMnRsYmlncFhHNGdJSEpsZEhWeWJpQmpZV3hzS0dGNGFXOXpTVzV6ZEdGdVkyVXVaMlYwS0dBdmJXOTJhV1Z6UDI1aGJXVTlKSHRsYm1OdlpHVlZVa2xEYjIxd2IyNWxiblFvYm1GdFpTbDlZQ2twWEc1OVhHNWNiaTh2SUVOeVpXRjBaU0JoSUc1bGR5QnRiM1pwWlZ4dVpYaHdiM0owSUdOdmJuTjBJR0ZrWkUxdmRtbGxJRDBnWVhONWJtTWdLRnh1SUNCa1lYUmhPaUJQYldsMFBFMXZkbWxsTENBbmFXUW5QbHh1S1RvZ1VISnZiV2x6WlR4RGNtVmhkR1ZOYjNacFpWSmxjM0J2Ym5ObElId2dRMjl1Wm14cFkzUk5iM1pwWlZKbGMzQnZibk5sSUh3Z1JYSnliM0pTWlhOd2IyNXpaVDRnUFQ0Z2UxeHVJQ0JoZDJGcGRDQmxibk4xY21WV1lXeHBaRlJ2YTJWdUtDbGNiaUFnY21WMGRYSnVJR05oYkd3b1lYaHBiM05KYm5OMFlXNWpaUzV3YjNOMEtDY3ZiVzkyYVdWekp5d2daR0YwWVNrcFhHNTlYRzVjYmk4dklFUmxiR1YwWlNCdGIzWnBaU0JpZVNCSlJGeHVaWGh3YjNKMElHTnZibk4wSUdSbGJHVjBaVTF2ZG1sbFFubEpaQ0E5SUdGemVXNWpJQ2hjYmlBZ2FXUTZJRzUxYldKbGNseHVLVG9nVUhKdmJXbHpaVHhFWld4bGRHVk5iM1pwWlZKbGMzQnZibk5sSUh3Z1RXOTJhV1ZPYjNSR2IzVnVaRkpsYzNCdmJuTmxJSHdnUlhKeWIzSlNaWE53YjI1elpUNGdQVDRnZTF4dUlDQmhkMkZwZENCbGJuTjFjbVZXWVd4cFpGUnZhMlZ1S0NsY2JpQWdjbVYwZFhKdUlHTmhiR3dvWVhocGIzTkpibk4wWVc1alpTNWtaV3hsZEdVb1lDOXRiM1pwWlhNdkpIdHBaSDFnS1NsY2JuMWNibHh1THk4Z1ZYQmtZWFJsSUcxdmRtbGxJR0o1SUVsRVhHNWxlSEJ2Y25RZ1kyOXVjM1FnZFhCa1lYUmxUVzkyYVdVZ1BTQmhjM2x1WXlBb1hHNGdJR2xrT2lCdWRXMWlaWElzWEc0Z0lHUmhkR0U2SUZCaGNuUnBZV3c4VDIxcGREeE5iM1pwWlN3Z0oybGtKejQrWEc0cE9pQlFjbTl0YVhObFBGVndaR0YwWlUxdmRtbGxVbVZ6Y0c5dWMyVWdmQ0JOYjNacFpVNXZkRVp2ZFc1a1VtVnpjRzl1YzJVZ2ZDQkZjbkp2Y2xKbGMzQnZibk5sUGlBOVBpQjdYRzRnSUdGM1lXbDBJR1Z1YzNWeVpWWmhiR2xrVkc5clpXNG9LVnh1SUNCeVpYUjFjbTRnWTJGc2JDaGhlR2x2YzBsdWMzUmhibU5sTG5CMWRDaGdMMjF2ZG1sbGN5OGtlMmxrZldBc0lHUmhkR0VwS1Z4dWZWeHVYRzR2THlCQmRYUm9aVzUwYVdOaGRHbHZiaUJVZVhCbGMxeHVaWGh3YjNKMElIUjVjR1VnUVhWMGFGSmxjWFZsYzNRZ1BTQjdYRzRnSUhWelpYSnVZVzFsT2lCemRISnBibWRjYmlBZ2NHRnpjM2R2Y21RNklITjBjbWx1WjF4dUlDQjFjMlZ5U1dSbGJuUnBabWxsY2o4NklITjBjbWx1WjF4dWZWeHVYRzVsZUhCdmNuUWdkSGx3WlNCQmRYUm9VbVZ6Y0c5dWMyVWdQU0I3WEc0Z0lIUnZhMlZ1T2lCemRISnBibWRjYmlBZ1pYaHdhWEpsYzBGME9pQnpkSEpwYm1kY2JpQWdjbVZtY21WemFGUnZhMlZ1T2lCemRISnBibWRjYmlBZ2NtVm1jbVZ6YUVWNGNHbHlaWE5CZERvZ2MzUnlhVzVuWEc0Z0lHbGtaVzUwYVhSNU9pQjdYRzRnSUNBZ2RYTmxja2xrT2lCemRISnBibWRjYmlBZ0lDQjFjMlZ5Ym1GdFpUb2djM1J5YVc1blhHNGdJQ0FnZFhObGNrbGtaVzUwYVdacFpYSTZJSE4wY21sdVoxeHVJQ0I5WEc0Z0lITjBZWFIxY3pvZ2JuVnRZbVZ5WEc0Z0lHMWxjM05oWjJVNklITjBjbWx1WjF4dWZWeHVYRzUwZVhCbElFRjFkR2hGY25KdmNpQTlJSHRjYmlBZ1pYSnliM0k2SUhOMGNtbHVaMXh1SUNCemRHRjBkWE02SUc1MWJXSmxjbHh1ZlZ4dVhHNHZMeUJNYjJkcGJpQjNhWFJvSUhWelpYSnVZVzFsTDNCaGMzTjNiM0prTDNWelpYSkpaR1Z1ZEdsbWFXVnlYRzVsZUhCdmNuUWdZMjl1YzNRZ2JHOW5hVzRnUFNCaGMzbHVZeUFvWEc0Z0lHTnlaV1JsYm5ScFlXeHpPaUJCZFhSb1VtVnhkV1Z6ZEZ4dUtUb2dVSEp2YldselpUeEJkWFJvVW1WemNHOXVjMlVnZkNCQmRYUm9SWEp5YjNJK0lEMCtJSHRjYmlBZ2RISjVJSHRjYmlBZ0lDQXZMeUJWYzJVZ1pYaHdiR2xqYVhRZ2NtVnpjRzl1YzJVZ2FHRnVaR3hwYm1jZ1ptOXlJR0YxZEdobGJuUnBZMkYwYVc5dUlIUnZJR2hoYm1Sc1pTQmpiMjlyYVdWeklIQnliM0JsY214NVhHNGdJQ0FnWTI5dWMzUWdjbVZ6Y0c5dWMyVWdQU0JoZDJGcGRDQmhlR2x2YzBsdWMzUmhibU5sTG5CdmMzUW9kRzlyWlc1UVlYUm9MQ0JqY21Wa1pXNTBhV0ZzY3lsY2JseHVJQ0FnSUM4dklGWmhiR2xrWVhSbElIUm9ZWFFnZEdobElISmxjM0J2Ym5ObElHTnZiblJoYVc1eklIUm9aU0JsZUhCbFkzUmxaQ0JrWVhSaElITjBjblZqZEhWeVpWeHVJQ0FnSUdOdmJuTjBJR1JoZEdFZ1BTQjVhV1ZzWkVSaGRHRW9jbVZ6Y0c5dWMyVXBYRzVjYmlBZ0lDQXZMeUJGYm5OMWNtVWdkR2hoZENCamIyOXJhV1Z6SUhkdmRXeGtJR2hoZG1VZ1ltVmxiaUJ6WlhRZ1lua2dZMmhsWTJ0cGJtY2djM1JoZEhWelhHNGdJQ0FnYVdZZ0tHUmhkR0V1YzNSaGRIVnpJQ0U5UFNBeU1EQXBJSHRjYmlBZ0lDQWdJSEpsZEhWeWJpQjdYRzRnSUNBZ0lDQWdJR1Z5Y205eU9seHVJQ0FnSUNBZ0lDQWdJQ2RCZFhSb1pXNTBhV05oZEdsdmJpQm1ZV2xzWldRNklGTmxjblpsY2lCa2FXUWdibTkwSUhObGRDQmhkWFJvWlc1MGFXTmhkR2x2YmlCamIyOXJhV1Z6Snl4Y2JpQWdJQ0FnSUNBZ2MzUmhkSFZ6T2lCa1lYUmhMbk4wWVhSMWN5QjhmQ0ExTURCY2JpQWdJQ0FnSUgxY2JpQWdJQ0I5WEc1Y2JpQWdJQ0F2THlCV1pYSnBabmtnZEdoaGRDQjNaU0JvWVhabElHbGtaVzUwYVhSNUlHbHVabTl5YldGMGFXOXVYRzRnSUNBZ2FXWWdLQ0ZrWVhSaExtbGtaVzUwYVhSNUlIeDhJQ0ZrWVhSaExtbGtaVzUwYVhSNUxuVnpaWEpKWkNrZ2UxeHVJQ0FnSUNBZ2NtVjBkWEp1SUh0Y2JpQWdJQ0FnSUNBZ1pYSnliM0k2SUNkQmRYUm9aVzUwYVdOaGRHbHZiaUJtWVdsc1pXUTZJRWx1ZG1Gc2FXUWdhV1JsYm5ScGRIa2dhVzVtYjNKdFlYUnBiMjRuTEZ4dUlDQWdJQ0FnSUNCemRHRjBkWE02SURVd01GeHVJQ0FnSUNBZ2ZWeHVJQ0FnSUgxY2JseHVJQ0FnSUhKbGRIVnliaUJrWVhSaFhHNGdJSDBnWTJGMFkyZ2dLR1Z5Y205eUtTQjdYRzRnSUNBZ0x5OGdSVzV6ZFhKbElIUm9aU0JsY25KdmNpQnlaWE53YjI1elpTQnBibU5zZFdSbGN5QjBhR1VnY21WeGRXbHlaV1FnYzNSaGRIVnpJSEJ5YjNCbGNuUjVYRzRnSUNBZ1kyOXVjM1FnWlhKeWIzSlNaWE53YjI1elpTQTlJR2hoYm1Sc1pVVnljbTl5S0dWeWNtOXlJR0Z6SUVGNGFXOXpSWEp5YjNJcFhHNGdJQ0FnY21WMGRYSnVJSHRjYmlBZ0lDQWdJQzR1TG1WeWNtOXlVbVZ6Y0c5dWMyVXNYRzRnSUNBZ0lDQnpkR0YwZFhNNklHVnljbTl5VW1WemNHOXVjMlV1YzNSaGRIVnpJSHg4SURVd01GeHVJQ0FnSUgxY2JpQWdmVnh1ZlZ4dUlsMHNJbTFoY0hCcGJtZHpJam9pUVVGRFFTeFBRVUZQTEZkQlFWYzdRVUZWYkVJc1UwRkJVeXh2UWtGQmIwSTdRVUZGTjBJc1RVRkJUU3hWUVVGVk8wRkJSV2hDTEUxQlFVMHNXVUZCV1R0QlFWRnNRaXhOUVVGTkxHZENRVUZuUWl4TlFVRk5MRTlCUVU4N1FVRkJRU3hGUVVOcVF5eFRRVUZUTzBGQlFVRTdRVUZCUVN4RlFVTlVMR2xDUVVGcFFqdEJRVUZCTzBGQlEyNUNMRU5CUVVNN1FVRkhSQ3hqUVVGakxHRkJRV0VzVVVGQlVUdEJRVUZCTEVWQlEycERMRTlCUVU4c1YwRkJWenRCUVVWb1FpeFZRVUZOTEdkQ1FVTktMRTlCUVU4c1VVRkJVU3hoUVVGaExFOUJRVThzUzBGQlN5eFhRVUZYTEdGQlFXRTdRVUZEYkVVc1VVRkJTU3hqUVVGbExGRkJRVTg3UVVGSE1VSXNVVUZCU1N4RFFVRkRMR0ZCUVdFc1lVRkJZU3hoUVVGaExGTkJRVk1zUTBGQlF5eEhRVUZITzBGQlEzWkVMRmxCUVUwc2FVSkJRV2xDTzBGQlFVRXNTVUZEZWtJN1FVRkhRU3hYUVVGUExGRkJRVkVzWjBKQlFXZENMR0ZCUVdFc2RVSkJRWFZDTzBGQlEyNUZMRmRCUVU4N1FVRkJRU3hGUVVOVU8wRkJRVUVzUlVGRFFTeERRVUZETEZWQlFWVXNVVUZCVVN4UFFVRlBMRXRCUVVzN1FVRkRha003UVVGSFFTeGpRVUZqTEdGQlFXRXNVMEZCVXp0QlFVRkJMRVZCUTJ4RExFTkJRVU1zWVVGQllUdEJRVUZCTzBGQlFVRXNSVUZEWkN4UFFVRlBMRlZCUVZVN1FVRkRaaXhWUVVGTkxHdENRVUZyUWl4TlFVRk5PMEZCUnpsQ0xGRkJRVWtzVFVGQlRTeFZRVUZWTEZkQlFWY3NUMEZCVHl4RFFVRkRMR2RDUVVGblFpeFJRVUZSTzBGQlJUZEVMSE5DUVVGblFpeFRRVUZUTzBGQlJYcENMRlZCUVVrN1FVRkZSaXhqUVVGTkxHbENRVUZwUWl4TlFVRk5MR0ZCUVdFc1lVRkJZVHRCUVVkMlJDeFpRVUZKTEVOQlFVTXNZVUZCWVN4aFFVRmhMR05CUVdNc1IwRkJSenRCUVVNNVF5eHBRa0ZCVHl4UlFVRlJMRTlCUVU4c1MwRkJTenRCUVVGQkxGRkJRemRDTzBGQlIwRXNkMEpCUVdkQ0xGRkJRVkVzWjBKQlEzUkNMR0ZCUVdFc2RVSkJRWFZDTzBGQlIzUkRMR1ZCUVU4c1kwRkJZeXhsUVVGbE8wRkJRVUVzVFVGRGRFTXNVMEZCVXl4alFVRmpPMEZCUTNKQ0xHZENRVUZSTEUxQlFVMHNlVUpCUVhsQ0xGbEJRVms3UVVGRmJrUXNaVUZCVHl4UlFVRlJMRTlCUVU4c1MwRkJTenRCUVVGQkxFMUJRemRDTzBGQlFVRXNTVUZEUmp0QlFVZEJMRmRCUVU4c1VVRkJVU3hQUVVGUExFdEJRVXM3UVVGQlFTeEZRVU0zUWp0QlFVTkdPMEZCVFU4c1lVRkJUU3haUVVGWkxFTkJRVU1zVVVGQlowSTdRVUZEZUVNc1owSkJRV01zVTBGQlV5eFZRVUZWTzBGQlEyNURPMEZCVDBFc1RVRkJUU3h0UWtGQmJVSXNXVUZCTWtJN1FVRkRiRVFzVFVGQlNUdEJRVVZHTEZWQlFVMHNVVUZCVVN4aFFVRmhMRk5CUVZNN1FVRkRjRU1zVVVGQlNTeERRVUZETEU5QlFVODdRVUZEVml4alFVRlJMRXRCUVVzc01rTkJRVEpETzBGQlFVRXNTVUZGTVVRN1FVRkJRU3hGUVVOR0xGTkJRVk1zVDBGQlR6dEJRVU5rTEZsQlFWRXNUVUZCVFN4cFEwRkJhVU1zUzBGQlN6dEJRVU53UkN4VlFVRk5PMEZCUVVFc1JVRkRVanRCUVVOR08wRkJSMEVzVFVGQlRTeFpRVUZaTEVOQlFVa3NVVUZCTmtJc1NVRkJTVHRCUVVkMlJDeE5RVUZOTEdOQlFXTXNRMEZCUXl4UlFVRnRRenRCUVVWMFJDeE5RVUZKTEVsQlFVa3NWVUZCVlN4UlFVRlJMRTlCUVU4c1NVRkJTU3hUUVVGVExGTkJRVk1zVlVGQlZUdEJRVU12UkN4VlFVRk5MRmxCUVZrc1NVRkJTU3hUUVVGVE8wRkJReTlDTEZkQlFVODdRVUZCUVN4TlFVTk1MRWRCUVVjN1FVRkJRU3hOUVVOSUxGRkJRVkVzVlVGQlZTeFZRVUZWTEVsQlFVa3NVMEZCVXl4VlFVRlZPMEZCUVVFc1NVRkRja1E3UVVGQlFTeEZRVU5HTzBGQlIwRXNVMEZCVHp0QlFVRkJMRWxCUTB3c1QwRkJUeXhKUVVGSkxGZEJRVmM3UVVGQlFTeEpRVU4wUWl4UlFVRlJMRWxCUVVrc1ZVRkJWU3hWUVVGVk8wRkJRVUVzUlVGRGJFTTdRVUZEUmp0QlFVZEJMRTFCUVUwc1QwRkJUeXhEUVVGSkxGRkJRMllzU1VGQlNTeExRVUZMTEZOQlFWTXNSVUZCUlN4TlFVRk5MRmRCUVZjN1FVRkhhRU1zWVVGQlRTeFpRVUZaTEZsQlJYQkNPMEZCUlVnc1VVRkJUU3hwUWtGQmFVSTdRVUZEZGtJc1UwRkJUeXhMUVVGTExHTkJRV01zU1VGQlNTeFRRVUZUTEVOQlFVTTdRVUZETVVNN1FVRkhUeXhoUVVGTkxHVkJRV1VzVDBGRE1VSXNUMEZEYzBVN1FVRkRkRVVzVVVGQlRTeHBRa0ZCYVVJN1FVRkRka0lzVTBGQlR5eExRVUZMTEdOQlFXTXNTVUZCU1N4WFFVRlhMRVZCUVVVc1JVRkJSU3hEUVVGRE8wRkJRMmhFTzBGQlIwOHNZVUZCVFN4cFFrRkJhVUlzVDBGRE5VSXNVMEZEYzBVN1FVRkRkRVVzVVVGQlRTeHBRa0ZCYVVJN1FVRkRka0lzVTBGQlR5eExRVUZMTEdOQlFXTXNTVUZCU1N4blFrRkJaMElzYlVKQlFXMUNMRWxCUVVrc1EwRkJReXhGUVVGRkxFTkJRVU03UVVGRE0wVTdRVUZIVHl4aFFVRk5MRmRCUVZjc1QwRkRkRUlzVTBGRGVVVTdRVUZEZWtVc1VVRkJUU3hwUWtGQmFVSTdRVUZEZGtJc1UwRkJUeXhMUVVGTExHTkJRV01zUzBGQlN5eFhRVUZYTEVsQlFVa3NRMEZCUXp0QlFVTnFSRHRCUVVkUExHRkJRVTBzYTBKQlFXdENMRTlCUXpkQ0xFOUJRM2xGTzBGQlEzcEZMRkZCUVUwc2FVSkJRV2xDTzBGQlEzWkNMRk5CUVU4c1MwRkJTeXhqUVVGakxFOUJRVThzVjBGQlZ5eEZRVUZGTEVWQlFVVXNRMEZCUXp0QlFVTnVSRHRCUVVkUExHRkJRVTBzWTBGQll5eFBRVU42UWl4SlFVTkJMRk5CUTNsRk8wRkJRM3BGTEZGQlFVMHNhVUpCUVdsQ08wRkJRM1pDTEZOQlFVOHNTMEZCU3l4alFVRmpMRWxCUVVrc1YwRkJWeXhGUVVGRkxFbEJRVWtzU1VGQlNTeERRVUZETzBGQlEzUkVPMEZCTmtKUExHRkJRVTBzVVVGQlVTeFBRVU51UWl4blFrRkRjME03UVVGRGRFTXNUVUZCU1R0QlFVVkdMRlZCUVUwc1YwRkJWeXhOUVVGTkxHTkJRV01zUzBGQlN5eFhRVUZYTEZkQlFWYzdRVUZIYUVVc1ZVRkJUU3hQUVVGUExGVkJRVlVzVVVGQlVUdEJRVWN2UWl4UlFVRkpMRXRCUVVzc1YwRkJWeXhMUVVGTE8wRkJRM1pDTEdGQlFVODdRVUZCUVN4UlFVTk1MRTlCUTBVN1FVRkJRU3hSUVVOR0xGRkJRVkVzUzBGQlN5eFZRVUZWTzBGQlFVRXNUVUZEZWtJN1FVRkJRU3hKUVVOR08wRkJSMEVzVVVGQlNTeERRVUZETEV0QlFVc3NXVUZCV1N4RFFVRkRMRXRCUVVzc1UwRkJVeXhSUVVGUk8wRkJRek5ETEdGQlFVODdRVUZCUVN4UlFVTk1MRTlCUVU4N1FVRkJRU3hSUVVOUUxGRkJRVkU3UVVGQlFTeE5RVU5XTzBGQlFVRXNTVUZEUmp0QlFVVkJMRmRCUVU4N1FVRkJRU3hGUVVOVUxGTkJRVk1zVDBGQlR6dEJRVVZrTEZWQlFVMHNaMEpCUVdkQ0xGbEJRVmtzUzBGQmJVSTdRVUZEY2tRc1YwRkJUenRCUVVGQkxFMUJRMHdzUjBGQlJ6dEJRVUZCTEUxQlEwZ3NVVUZCVVN4alFVRmpMRlZCUVZVN1FVRkJRU3hKUVVOc1F6dEJRVUZCTEVWQlEwWTdRVUZEUmpzaUxDSnVZVzFsY3lJNlcxMTk=",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 18113
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 8,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.546Z",
        "time": 12,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/node_modules/.vite/deps/styled-components.js?v=0bb69d73",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/styles/styled-components.ts"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [
            {
              "name": "v",
              "value": "0bb69d73"
            }
          ],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "max-age=31536000,immutable"
            },
            {
              "name": "etag",
              "value": "W/\"fd98-eE2/9B/JDQ4zH9aXnr4i/JFJrus\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "64920"
            }
          ],
          "content": {
            "size": 64920,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsKICByZXF1aXJlX3JlYWN0Cn0gZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL2NodW5rLVFKWUtVS0FMLmpzP3Y9MGJiNjlkNzMiOwppbXBvcnQgewogIF9fY29tbW9uSlMsCiAgX190b0VTTQp9IGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9jaHVuay00TUJNUklMQS5qcz92PTBiYjY5ZDczIjsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9zaGFsbG93ZXF1YWwvaW5kZXguanMKdmFyIHJlcXVpcmVfc2hhbGxvd2VxdWFsID0gX19jb21tb25KUyh7CiAgIi4uLy4uL25vZGVfbW9kdWxlcy9zaGFsbG93ZXF1YWwvaW5kZXguanMiKGV4cG9ydHMsIG1vZHVsZSkgewogICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzaGFsbG93RXF1YWwob2JqQSwgb2JqQiwgY29tcGFyZSwgY29tcGFyZUNvbnRleHQpIHsKICAgICAgdmFyIHJldCA9IGNvbXBhcmUgPyBjb21wYXJlLmNhbGwoY29tcGFyZUNvbnRleHQsIG9iakEsIG9iakIpIDogdm9pZCAwOwogICAgICBpZiAocmV0ICE9PSB2b2lkIDApIHsKICAgICAgICByZXR1cm4gISFyZXQ7CiAgICAgIH0KICAgICAgaWYgKG9iakEgPT09IG9iakIpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICBpZiAodHlwZW9mIG9iakEgIT09ICJvYmplY3QiIHx8ICFvYmpBIHx8IHR5cGVvZiBvYmpCICE9PSAib2JqZWN0IiB8fCAhb2JqQikgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICB2YXIga2V5c0EgPSBPYmplY3Qua2V5cyhvYmpBKTsKICAgICAgdmFyIGtleXNCID0gT2JqZWN0LmtleXMob2JqQik7CiAgICAgIGlmIChrZXlzQS5sZW5ndGggIT09IGtleXNCLmxlbmd0aCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICB2YXIgYkhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5iaW5kKG9iakIpOwogICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBrZXlzQS5sZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgdmFyIGtleSA9IGtleXNBW2lkeF07CiAgICAgICAgaWYgKCFiSGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICB2YXIgdmFsdWVBID0gb2JqQVtrZXldOwogICAgICAgIHZhciB2YWx1ZUIgPSBvYmpCW2tleV07CiAgICAgICAgcmV0ID0gY29tcGFyZSA/IGNvbXBhcmUuY2FsbChjb21wYXJlQ29udGV4dCwgdmFsdWVBLCB2YWx1ZUIsIGtleSkgOiB2b2lkIDA7CiAgICAgICAgaWYgKHJldCA9PT0gZmFsc2UgfHwgcmV0ID09PSB2b2lkIDAgJiYgdmFsdWVBICE9PSB2YWx1ZUIpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9OwogIH0KfSk7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGVkLWNvbXBvbmVudHMvbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5tanMKdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7CiAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduMih0KSB7CiAgICBmb3IgKHZhciBzMiwgaTIgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaTIgPCBuOyBpMisrKSB7CiAgICAgIHMyID0gYXJndW1lbnRzW2kyXTsKICAgICAgZm9yICh2YXIgcDIgaW4gczIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoczIsIHAyKSkgdFtwMl0gPSBzMltwMl07CiAgICB9CiAgICByZXR1cm4gdDsKICB9OwogIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9OwpmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tMiwgcGFjaykgewogIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkyID0gMCwgbDIgPSBmcm9tMi5sZW5ndGgsIGFyOyBpMiA8IGwyOyBpMisrKSB7CiAgICBpZiAoYXIgfHwgIShpMiBpbiBmcm9tMikpIHsKICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tMiwgMCwgaTIpOwogICAgICBhcltpMl0gPSBmcm9tMltpMl07CiAgICB9CiAgfQogIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbTIpKTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL0BlbW90aW9uL21lbW9pemUvZGlzdC9lbW90aW9uLW1lbW9pemUuZXNtLmpzCmZ1bmN0aW9uIG1lbW9pemUoZm4pIHsKICB2YXIgY2FjaGUgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTsKICByZXR1cm4gZnVuY3Rpb24oYXJnKSB7CiAgICBpZiAoY2FjaGVbYXJnXSA9PT0gdm9pZCAwKSBjYWNoZVthcmddID0gZm4oYXJnKTsKICAgIHJldHVybiBjYWNoZVthcmddOwogIH07Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9AZW1vdGlvbi9pcy1wcm9wLXZhbGlkL2Rpc3QvZW1vdGlvbi1pcy1wcm9wLXZhbGlkLmVzbS5qcwp2YXIgcmVhY3RQcm9wc1JlZ2V4ID0gL14oKGNoaWxkcmVufGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MfGtleXxyZWZ8YXV0b0ZvY3VzfGRlZmF1bHRWYWx1ZXxkZWZhdWx0Q2hlY2tlZHxpbm5lckhUTUx8c3VwcHJlc3NDb250ZW50RWRpdGFibGVXYXJuaW5nfHN1cHByZXNzSHlkcmF0aW9uV2FybmluZ3x2YWx1ZUxpbmt8YWJicnxhY2NlcHR8YWNjZXB0Q2hhcnNldHxhY2Nlc3NLZXl8YWN0aW9ufGFsbG93fGFsbG93VXNlck1lZGlhfGFsbG93UGF5bWVudFJlcXVlc3R8YWxsb3dGdWxsU2NyZWVufGFsbG93VHJhbnNwYXJlbmN5fGFsdHxhc3luY3xhdXRvQ29tcGxldGV8YXV0b1BsYXl8Y2FwdHVyZXxjZWxsUGFkZGluZ3xjZWxsU3BhY2luZ3xjaGFsbGVuZ2V8Y2hhclNldHxjaGVja2VkfGNpdGV8Y2xhc3NJRHxjbGFzc05hbWV8Y29sc3xjb2xTcGFufGNvbnRlbnR8Y29udGVudEVkaXRhYmxlfGNvbnRleHRNZW51fGNvbnRyb2xzfGNvbnRyb2xzTGlzdHxjb29yZHN8Y3Jvc3NPcmlnaW58ZGF0YXxkYXRlVGltZXxkZWNvZGluZ3xkZWZhdWx0fGRlZmVyfGRpcnxkaXNhYmxlZHxkaXNhYmxlUGljdHVyZUluUGljdHVyZXxkaXNhYmxlUmVtb3RlUGxheWJhY2t8ZG93bmxvYWR8ZHJhZ2dhYmxlfGVuY1R5cGV8ZW50ZXJLZXlIaW50fGZvcm18Zm9ybUFjdGlvbnxmb3JtRW5jVHlwZXxmb3JtTWV0aG9kfGZvcm1Ob1ZhbGlkYXRlfGZvcm1UYXJnZXR8ZnJhbWVCb3JkZXJ8aGVhZGVyc3xoZWlnaHR8aGlkZGVufGhpZ2h8aHJlZnxocmVmTGFuZ3xodG1sRm9yfGh0dHBFcXVpdnxpZHxpbnB1dE1vZGV8aW50ZWdyaXR5fGlzfGtleVBhcmFtc3xrZXlUeXBlfGtpbmR8bGFiZWx8bGFuZ3xsaXN0fGxvYWRpbmd8bG9vcHxsb3d8bWFyZ2luSGVpZ2h0fG1hcmdpbldpZHRofG1heHxtYXhMZW5ndGh8bWVkaWF8bWVkaWFHcm91cHxtZXRob2R8bWlufG1pbkxlbmd0aHxtdWx0aXBsZXxtdXRlZHxuYW1lfG5vbmNlfG5vVmFsaWRhdGV8b3BlbnxvcHRpbXVtfHBhdHRlcm58cGxhY2Vob2xkZXJ8cGxheXNJbmxpbmV8cG9zdGVyfHByZWxvYWR8cHJvZmlsZXxyYWRpb0dyb3VwfHJlYWRPbmx5fHJlZmVycmVyUG9saWN5fHJlbHxyZXF1aXJlZHxyZXZlcnNlZHxyb2xlfHJvd3N8cm93U3BhbnxzYW5kYm94fHNjb3BlfHNjb3BlZHxzY3JvbGxpbmd8c2VhbWxlc3N8c2VsZWN0ZWR8c2hhcGV8c2l6ZXxzaXplc3xzbG90fHNwYW58c3BlbGxDaGVja3xzcmN8c3JjRG9jfHNyY0xhbmd8c3JjU2V0fHN0YXJ0fHN0ZXB8c3R5bGV8c3VtbWFyeXx0YWJJbmRleHx0YXJnZXR8dGl0bGV8dHJhbnNsYXRlfHR5cGV8dXNlTWFwfHZhbHVlfHdpZHRofHdtb2RlfHdyYXB8YWJvdXR8ZGF0YXR5cGV8aW5saXN0fHByZWZpeHxwcm9wZXJ0eXxyZXNvdXJjZXx0eXBlb2Z8dm9jYWJ8YXV0b0NhcGl0YWxpemV8YXV0b0NvcnJlY3R8YXV0b1NhdmV8Y29sb3J8aW5jcmVtZW50YWx8ZmFsbGJhY2t8aW5lcnR8aXRlbVByb3B8aXRlbVNjb3BlfGl0ZW1UeXBlfGl0ZW1JRHxpdGVtUmVmfG9ufG9wdGlvbnxyZXN1bHRzfHNlY3VyaXR5fHVuc2VsZWN0YWJsZXxhY2NlbnRIZWlnaHR8YWNjdW11bGF0ZXxhZGRpdGl2ZXxhbGlnbm1lbnRCYXNlbGluZXxhbGxvd1Jlb3JkZXJ8YWxwaGFiZXRpY3xhbXBsaXR1ZGV8YXJhYmljRm9ybXxhc2NlbnR8YXR0cmlidXRlTmFtZXxhdHRyaWJ1dGVUeXBlfGF1dG9SZXZlcnNlfGF6aW11dGh8YmFzZUZyZXF1ZW5jeXxiYXNlbGluZVNoaWZ0fGJhc2VQcm9maWxlfGJib3h8YmVnaW58Ymlhc3xieXxjYWxjTW9kZXxjYXBIZWlnaHR8Y2xpcHxjbGlwUGF0aFVuaXRzfGNsaXBQYXRofGNsaXBSdWxlfGNvbG9ySW50ZXJwb2xhdGlvbnxjb2xvckludGVycG9sYXRpb25GaWx0ZXJzfGNvbG9yUHJvZmlsZXxjb2xvclJlbmRlcmluZ3xjb250ZW50U2NyaXB0VHlwZXxjb250ZW50U3R5bGVUeXBlfGN1cnNvcnxjeHxjeXxkfGRlY2VsZXJhdGV8ZGVzY2VudHxkaWZmdXNlQ29uc3RhbnR8ZGlyZWN0aW9ufGRpc3BsYXl8ZGl2aXNvcnxkb21pbmFudEJhc2VsaW5lfGR1cnxkeHxkeXxlZGdlTW9kZXxlbGV2YXRpb258ZW5hYmxlQmFja2dyb3VuZHxlbmR8ZXhwb25lbnR8ZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZHxmaWxsfGZpbGxPcGFjaXR5fGZpbGxSdWxlfGZpbHRlcnxmaWx0ZXJSZXN8ZmlsdGVyVW5pdHN8Zmxvb2RDb2xvcnxmbG9vZE9wYWNpdHl8Zm9jdXNhYmxlfGZvbnRGYW1pbHl8Zm9udFNpemV8Zm9udFNpemVBZGp1c3R8Zm9udFN0cmV0Y2h8Zm9udFN0eWxlfGZvbnRWYXJpYW50fGZvbnRXZWlnaHR8Zm9ybWF0fGZyb218ZnJ8Znh8Znl8ZzF8ZzJ8Z2x5cGhOYW1lfGdseXBoT3JpZW50YXRpb25Ib3Jpem9udGFsfGdseXBoT3JpZW50YXRpb25WZXJ0aWNhbHxnbHlwaFJlZnxncmFkaWVudFRyYW5zZm9ybXxncmFkaWVudFVuaXRzfGhhbmdpbmd8aG9yaXpBZHZYfGhvcml6T3JpZ2luWHxpZGVvZ3JhcGhpY3xpbWFnZVJlbmRlcmluZ3xpbnxpbjJ8aW50ZXJjZXB0fGt8azF8azJ8azN8azR8a2VybmVsTWF0cml4fGtlcm5lbFVuaXRMZW5ndGh8a2VybmluZ3xrZXlQb2ludHN8a2V5U3BsaW5lc3xrZXlUaW1lc3xsZW5ndGhBZGp1c3R8bGV0dGVyU3BhY2luZ3xsaWdodGluZ0NvbG9yfGxpbWl0aW5nQ29uZUFuZ2xlfGxvY2FsfG1hcmtlckVuZHxtYXJrZXJNaWR8bWFya2VyU3RhcnR8bWFya2VySGVpZ2h0fG1hcmtlclVuaXRzfG1hcmtlcldpZHRofG1hc2t8bWFza0NvbnRlbnRVbml0c3xtYXNrVW5pdHN8bWF0aGVtYXRpY2FsfG1vZGV8bnVtT2N0YXZlc3xvZmZzZXR8b3BhY2l0eXxvcGVyYXRvcnxvcmRlcnxvcmllbnR8b3JpZW50YXRpb258b3JpZ2lufG92ZXJmbG93fG92ZXJsaW5lUG9zaXRpb258b3ZlcmxpbmVUaGlja25lc3N8cGFub3NlMXxwYWludE9yZGVyfHBhdGhMZW5ndGh8cGF0dGVybkNvbnRlbnRVbml0c3xwYXR0ZXJuVHJhbnNmb3JtfHBhdHRlcm5Vbml0c3xwb2ludGVyRXZlbnRzfHBvaW50c3xwb2ludHNBdFh8cG9pbnRzQXRZfHBvaW50c0F0WnxwcmVzZXJ2ZUFscGhhfHByZXNlcnZlQXNwZWN0UmF0aW98cHJpbWl0aXZlVW5pdHN8cnxyYWRpdXN8cmVmWHxyZWZZfHJlbmRlcmluZ0ludGVudHxyZXBlYXRDb3VudHxyZXBlYXREdXJ8cmVxdWlyZWRFeHRlbnNpb25zfHJlcXVpcmVkRmVhdHVyZXN8cmVzdGFydHxyZXN1bHR8cm90YXRlfHJ4fHJ5fHNjYWxlfHNlZWR8c2hhcGVSZW5kZXJpbmd8c2xvcGV8c3BhY2luZ3xzcGVjdWxhckNvbnN0YW50fHNwZWN1bGFyRXhwb25lbnR8c3BlZWR8c3ByZWFkTWV0aG9kfHN0YXJ0T2Zmc2V0fHN0ZERldmlhdGlvbnxzdGVtaHxzdGVtdnxzdGl0Y2hUaWxlc3xzdG9wQ29sb3J8c3RvcE9wYWNpdHl8c3RyaWtldGhyb3VnaFBvc2l0aW9ufHN0cmlrZXRocm91Z2hUaGlja25lc3N8c3RyaW5nfHN0cm9rZXxzdHJva2VEYXNoYXJyYXl8c3Ryb2tlRGFzaG9mZnNldHxzdHJva2VMaW5lY2FwfHN0cm9rZUxpbmVqb2lufHN0cm9rZU1pdGVybGltaXR8c3Ryb2tlT3BhY2l0eXxzdHJva2VXaWR0aHxzdXJmYWNlU2NhbGV8c3lzdGVtTGFuZ3VhZ2V8dGFibGVWYWx1ZXN8dGFyZ2V0WHx0YXJnZXRZfHRleHRBbmNob3J8dGV4dERlY29yYXRpb258dGV4dFJlbmRlcmluZ3x0ZXh0TGVuZ3RofHRvfHRyYW5zZm9ybXx1MXx1Mnx1bmRlcmxpbmVQb3NpdGlvbnx1bmRlcmxpbmVUaGlja25lc3N8dW5pY29kZXx1bmljb2RlQmlkaXx1bmljb2RlUmFuZ2V8dW5pdHNQZXJFbXx2QWxwaGFiZXRpY3x2SGFuZ2luZ3x2SWRlb2dyYXBoaWN8dk1hdGhlbWF0aWNhbHx2YWx1ZXN8dmVjdG9yRWZmZWN0fHZlcnNpb258dmVydEFkdll8dmVydE9yaWdpblh8dmVydE9yaWdpbll8dmlld0JveHx2aWV3VGFyZ2V0fHZpc2liaWxpdHl8d2lkdGhzfHdvcmRTcGFjaW5nfHdyaXRpbmdNb2RlfHh8eEhlaWdodHx4MXx4Mnx4Q2hhbm5lbFNlbGVjdG9yfHhsaW5rQWN0dWF0ZXx4bGlua0FyY3JvbGV8eGxpbmtIcmVmfHhsaW5rUm9sZXx4bGlua1Nob3d8eGxpbmtUaXRsZXx4bGlua1R5cGV8eG1sQmFzZXx4bWxuc3x4bWxuc1hsaW5rfHhtbExhbmd8eG1sU3BhY2V8eXx5MXx5Mnx5Q2hhbm5lbFNlbGVjdG9yfHp8em9vbUFuZFBhbnxmb3J8Y2xhc3N8YXV0b2ZvY3VzKXwoKFtEZF1bQWFdW1R0XVtBYV18W0FhXVtScl1bSWldW0FhXXx4KS0uKikpJC87CnZhciBpc1Byb3BWYWxpZCA9IG1lbW9pemUoCiAgZnVuY3Rpb24ocHJvcCkgewogICAgcmV0dXJuIHJlYWN0UHJvcHNSZWdleC50ZXN0KHByb3ApIHx8IHByb3AuY2hhckNvZGVBdCgwKSA9PT0gMTExICYmIHByb3AuY2hhckNvZGVBdCgxKSA9PT0gMTEwICYmIHByb3AuY2hhckNvZGVBdCgyKSA8IDkxOwogIH0KICAvKiBaKzEgKi8KKTsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZWQtY29tcG9uZW50cy9kaXN0L3N0eWxlZC1jb21wb25lbnRzLmJyb3dzZXIuZXNtLmpzCnZhciBpbXBvcnRfcmVhY3QgPSBfX3RvRVNNKHJlcXVpcmVfcmVhY3QoKSk7CnZhciBpbXBvcnRfc2hhbGxvd2VxdWFsID0gX190b0VTTShyZXF1aXJlX3NoYWxsb3dlcXVhbCgpKTsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9zdHlsaXMvc3JjL0VudW0uanMKdmFyIE1TID0gIi1tcy0iOwp2YXIgTU9aID0gIi1tb3otIjsKdmFyIFdFQktJVCA9ICItd2Via2l0LSI7CnZhciBDT01NRU5UID0gImNvbW0iOwp2YXIgUlVMRVNFVCA9ICJydWxlIjsKdmFyIERFQ0xBUkFUSU9OID0gImRlY2wiOwp2YXIgSU1QT1JUID0gIkBpbXBvcnQiOwp2YXIgS0VZRlJBTUVTID0gIkBrZXlmcmFtZXMiOwp2YXIgTEFZRVIgPSAiQGxheWVyIjsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9zdHlsaXMvc3JjL1V0aWxpdHkuanMKdmFyIGFicyA9IE1hdGguYWJzOwp2YXIgZnJvbSA9IFN0cmluZy5mcm9tQ2hhckNvZGU7CnZhciBhc3NpZ24gPSBPYmplY3QuYXNzaWduOwpmdW5jdGlvbiBoYXNoKHZhbHVlLCBsZW5ndGgyKSB7CiAgcmV0dXJuIGNoYXJhdCh2YWx1ZSwgMCkgXiA0NSA/ICgoKGxlbmd0aDIgPDwgMiBeIGNoYXJhdCh2YWx1ZSwgMCkpIDw8IDIgXiBjaGFyYXQodmFsdWUsIDEpKSA8PCAyIF4gY2hhcmF0KHZhbHVlLCAyKSkgPDwgMiBeIGNoYXJhdCh2YWx1ZSwgMykgOiAwOwp9CmZ1bmN0aW9uIHRyaW0odmFsdWUpIHsKICByZXR1cm4gdmFsdWUudHJpbSgpOwp9CmZ1bmN0aW9uIG1hdGNoKHZhbHVlLCBwYXR0ZXJuKSB7CiAgcmV0dXJuICh2YWx1ZSA9IHBhdHRlcm4uZXhlYyh2YWx1ZSkpID8gdmFsdWVbMF0gOiB2YWx1ZTsKfQpmdW5jdGlvbiByZXBsYWNlKHZhbHVlLCBwYXR0ZXJuLCByZXBsYWNlbWVudCkgewogIHJldHVybiB2YWx1ZS5yZXBsYWNlKHBhdHRlcm4sIHJlcGxhY2VtZW50KTsKfQpmdW5jdGlvbiBpbmRleG9mKHZhbHVlLCBzZWFyY2gsIHBvc2l0aW9uMikgewogIHJldHVybiB2YWx1ZS5pbmRleE9mKHNlYXJjaCwgcG9zaXRpb24yKTsKfQpmdW5jdGlvbiBjaGFyYXQodmFsdWUsIGluZGV4KSB7CiAgcmV0dXJuIHZhbHVlLmNoYXJDb2RlQXQoaW5kZXgpIHwgMDsKfQpmdW5jdGlvbiBzdWJzdHIodmFsdWUsIGJlZ2luLCBlbmQpIHsKICByZXR1cm4gdmFsdWUuc2xpY2UoYmVnaW4sIGVuZCk7Cn0KZnVuY3Rpb24gc3RybGVuKHZhbHVlKSB7CiAgcmV0dXJuIHZhbHVlLmxlbmd0aDsKfQpmdW5jdGlvbiBzaXplb2YodmFsdWUpIHsKICByZXR1cm4gdmFsdWUubGVuZ3RoOwp9CmZ1bmN0aW9uIGFwcGVuZCh2YWx1ZSwgYXJyYXkpIHsKICByZXR1cm4gYXJyYXkucHVzaCh2YWx1ZSksIHZhbHVlOwp9CmZ1bmN0aW9uIGNvbWJpbmUoYXJyYXksIGNhbGxiYWNrKSB7CiAgcmV0dXJuIGFycmF5Lm1hcChjYWxsYmFjaykuam9pbigiIik7Cn0KZnVuY3Rpb24gZmlsdGVyKGFycmF5LCBwYXR0ZXJuKSB7CiAgcmV0dXJuIGFycmF5LmZpbHRlcihmdW5jdGlvbih2YWx1ZSkgewogICAgcmV0dXJuICFtYXRjaCh2YWx1ZSwgcGF0dGVybik7CiAgfSk7Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9zdHlsaXMvc3JjL1Rva2VuaXplci5qcwp2YXIgbGluZSA9IDE7CnZhciBjb2x1bW4gPSAxOwp2YXIgbGVuZ3RoID0gMDsKdmFyIHBvc2l0aW9uID0gMDsKdmFyIGNoYXJhY3RlciA9IDA7CnZhciBjaGFyYWN0ZXJzID0gIiI7CmZ1bmN0aW9uIG5vZGUodmFsdWUsIHJvb3QsIHBhcmVudCwgdHlwZSwgcHJvcHMsIGNoaWxkcmVuLCBsZW5ndGgyLCBzaWJsaW5ncykgewogIHJldHVybiB7IHZhbHVlLCByb290LCBwYXJlbnQsIHR5cGUsIHByb3BzLCBjaGlsZHJlbiwgbGluZSwgY29sdW1uLCBsZW5ndGg6IGxlbmd0aDIsIHJldHVybjogIiIsIHNpYmxpbmdzIH07Cn0KZnVuY3Rpb24gY29weShyb290LCBwcm9wcykgewogIHJldHVybiBhc3NpZ24obm9kZSgiIiwgbnVsbCwgbnVsbCwgIiIsIG51bGwsIG51bGwsIDAsIHJvb3Quc2libGluZ3MpLCByb290LCB7IGxlbmd0aDogLXJvb3QubGVuZ3RoIH0sIHByb3BzKTsKfQpmdW5jdGlvbiBsaWZ0KHJvb3QpIHsKICB3aGlsZSAocm9vdC5yb290KQogICAgcm9vdCA9IGNvcHkocm9vdC5yb290LCB7IGNoaWxkcmVuOiBbcm9vdF0gfSk7CiAgYXBwZW5kKHJvb3QsIHJvb3Quc2libGluZ3MpOwp9CmZ1bmN0aW9uIGNoYXIoKSB7CiAgcmV0dXJuIGNoYXJhY3RlcjsKfQpmdW5jdGlvbiBwcmV2KCkgewogIGNoYXJhY3RlciA9IHBvc2l0aW9uID4gMCA/IGNoYXJhdChjaGFyYWN0ZXJzLCAtLXBvc2l0aW9uKSA6IDA7CiAgaWYgKGNvbHVtbi0tLCBjaGFyYWN0ZXIgPT09IDEwKQogICAgY29sdW1uID0gMSwgbGluZS0tOwogIHJldHVybiBjaGFyYWN0ZXI7Cn0KZnVuY3Rpb24gbmV4dCgpIHsKICBjaGFyYWN0ZXIgPSBwb3NpdGlvbiA8IGxlbmd0aCA/IGNoYXJhdChjaGFyYWN0ZXJzLCBwb3NpdGlvbisrKSA6IDA7CiAgaWYgKGNvbHVtbisrLCBjaGFyYWN0ZXIgPT09IDEwKQogICAgY29sdW1uID0gMSwgbGluZSsrOwogIHJldHVybiBjaGFyYWN0ZXI7Cn0KZnVuY3Rpb24gcGVlaygpIHsKICByZXR1cm4gY2hhcmF0KGNoYXJhY3RlcnMsIHBvc2l0aW9uKTsKfQpmdW5jdGlvbiBjYXJldCgpIHsKICByZXR1cm4gcG9zaXRpb247Cn0KZnVuY3Rpb24gc2xpY2UoYmVnaW4sIGVuZCkgewogIHJldHVybiBzdWJzdHIoY2hhcmFjdGVycywgYmVnaW4sIGVuZCk7Cn0KZnVuY3Rpb24gdG9rZW4odHlwZSkgewogIHN3aXRjaCAodHlwZSkgewogICAgLy8gXDAgXHQgXG4gXHIgXHMgd2hpdGVzcGFjZSB0b2tlbgogICAgY2FzZSAwOgogICAgY2FzZSA5OgogICAgY2FzZSAxMDoKICAgIGNhc2UgMTM6CiAgICBjYXNlIDMyOgogICAgICByZXR1cm4gNTsKICAgIC8vICEgKyAsIC8gPiBAIH4gaXNvbGF0ZSB0b2tlbgogICAgY2FzZSAzMzoKICAgIGNhc2UgNDM6CiAgICBjYXNlIDQ0OgogICAgY2FzZSA0NzoKICAgIGNhc2UgNjI6CiAgICBjYXNlIDY0OgogICAgY2FzZSAxMjY6CiAgICAvLyA7IHsgfSBicmVha3BvaW50IHRva2VuCiAgICBjYXNlIDU5OgogICAgY2FzZSAxMjM6CiAgICBjYXNlIDEyNToKICAgICAgcmV0dXJuIDQ7CiAgICAvLyA6IGFjY29tcGFuaWVkIHRva2VuCiAgICBjYXNlIDU4OgogICAgICByZXR1cm4gMzsKICAgIC8vICIgJyAoIFsgb3BlbmluZyBkZWxpbWl0IHRva2VuCiAgICBjYXNlIDM0OgogICAgY2FzZSAzOToKICAgIGNhc2UgNDA6CiAgICBjYXNlIDkxOgogICAgICByZXR1cm4gMjsKICAgIC8vICkgXSBjbG9zaW5nIGRlbGltaXQgdG9rZW4KICAgIGNhc2UgNDE6CiAgICBjYXNlIDkzOgogICAgICByZXR1cm4gMTsKICB9CiAgcmV0dXJuIDA7Cn0KZnVuY3Rpb24gYWxsb2ModmFsdWUpIHsKICByZXR1cm4gbGluZSA9IGNvbHVtbiA9IDEsIGxlbmd0aCA9IHN0cmxlbihjaGFyYWN0ZXJzID0gdmFsdWUpLCBwb3NpdGlvbiA9IDAsIFtdOwp9CmZ1bmN0aW9uIGRlYWxsb2ModmFsdWUpIHsKICByZXR1cm4gY2hhcmFjdGVycyA9ICIiLCB2YWx1ZTsKfQpmdW5jdGlvbiBkZWxpbWl0KHR5cGUpIHsKICByZXR1cm4gdHJpbShzbGljZShwb3NpdGlvbiAtIDEsIGRlbGltaXRlcih0eXBlID09PSA5MSA/IHR5cGUgKyAyIDogdHlwZSA9PT0gNDAgPyB0eXBlICsgMSA6IHR5cGUpKSk7Cn0KZnVuY3Rpb24gd2hpdGVzcGFjZSh0eXBlKSB7CiAgd2hpbGUgKGNoYXJhY3RlciA9IHBlZWsoKSkKICAgIGlmIChjaGFyYWN0ZXIgPCAzMykKICAgICAgbmV4dCgpOwogICAgZWxzZQogICAgICBicmVhazsKICByZXR1cm4gdG9rZW4odHlwZSkgPiAyIHx8IHRva2VuKGNoYXJhY3RlcikgPiAzID8gIiIgOiAiICI7Cn0KZnVuY3Rpb24gZXNjYXBpbmcoaW5kZXgsIGNvdW50KSB7CiAgd2hpbGUgKC0tY291bnQgJiYgbmV4dCgpKQogICAgaWYgKGNoYXJhY3RlciA8IDQ4IHx8IGNoYXJhY3RlciA+IDEwMiB8fCBjaGFyYWN0ZXIgPiA1NyAmJiBjaGFyYWN0ZXIgPCA2NSB8fCBjaGFyYWN0ZXIgPiA3MCAmJiBjaGFyYWN0ZXIgPCA5NykKICAgICAgYnJlYWs7CiAgcmV0dXJuIHNsaWNlKGluZGV4LCBjYXJldCgpICsgKGNvdW50IDwgNiAmJiBwZWVrKCkgPT0gMzIgJiYgbmV4dCgpID09IDMyKSk7Cn0KZnVuY3Rpb24gZGVsaW1pdGVyKHR5cGUpIHsKICB3aGlsZSAobmV4dCgpKQogICAgc3dpdGNoIChjaGFyYWN0ZXIpIHsKICAgICAgLy8gXSApICIgJwogICAgICBjYXNlIHR5cGU6CiAgICAgICAgcmV0dXJuIHBvc2l0aW9uOwogICAgICAvLyAiICcKICAgICAgY2FzZSAzNDoKICAgICAgY2FzZSAzOToKICAgICAgICBpZiAodHlwZSAhPT0gMzQgJiYgdHlwZSAhPT0gMzkpCiAgICAgICAgICBkZWxpbWl0ZXIoY2hhcmFjdGVyKTsKICAgICAgICBicmVhazsKICAgICAgLy8gKAogICAgICBjYXNlIDQwOgogICAgICAgIGlmICh0eXBlID09PSA0MSkKICAgICAgICAgIGRlbGltaXRlcih0eXBlKTsKICAgICAgICBicmVhazsKICAgICAgLy8gXAogICAgICBjYXNlIDkyOgogICAgICAgIG5leHQoKTsKICAgICAgICBicmVhazsKICAgIH0KICByZXR1cm4gcG9zaXRpb247Cn0KZnVuY3Rpb24gY29tbWVudGVyKHR5cGUsIGluZGV4KSB7CiAgd2hpbGUgKG5leHQoKSkKICAgIGlmICh0eXBlICsgY2hhcmFjdGVyID09PSA0NyArIDEwKQogICAgICBicmVhazsKICAgIGVsc2UgaWYgKHR5cGUgKyBjaGFyYWN0ZXIgPT09IDQyICsgNDIgJiYgcGVlaygpID09PSA0NykKICAgICAgYnJlYWs7CiAgcmV0dXJuICIvKiIgKyBzbGljZShpbmRleCwgcG9zaXRpb24gLSAxKSArICIqIiArIGZyb20odHlwZSA9PT0gNDcgPyB0eXBlIDogbmV4dCgpKTsKfQpmdW5jdGlvbiBpZGVudGlmaWVyKGluZGV4KSB7CiAgd2hpbGUgKCF0b2tlbihwZWVrKCkpKQogICAgbmV4dCgpOwogIHJldHVybiBzbGljZShpbmRleCwgcG9zaXRpb24pOwp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGlzL3NyYy9QYXJzZXIuanMKZnVuY3Rpb24gY29tcGlsZSh2YWx1ZSkgewogIHJldHVybiBkZWFsbG9jKHBhcnNlKCIiLCBudWxsLCBudWxsLCBudWxsLCBbIiJdLCB2YWx1ZSA9IGFsbG9jKHZhbHVlKSwgMCwgWzBdLCB2YWx1ZSkpOwp9CmZ1bmN0aW9uIHBhcnNlKHZhbHVlLCByb290LCBwYXJlbnQsIHJ1bGUsIHJ1bGVzLCBydWxlc2V0cywgcHNldWRvLCBwb2ludHMsIGRlY2xhcmF0aW9ucykgewogIHZhciBpbmRleCA9IDA7CiAgdmFyIG9mZnNldCA9IDA7CiAgdmFyIGxlbmd0aDIgPSBwc2V1ZG87CiAgdmFyIGF0cnVsZSA9IDA7CiAgdmFyIHByb3BlcnR5ID0gMDsKICB2YXIgcHJldmlvdXMgPSAwOwogIHZhciB2YXJpYWJsZSA9IDE7CiAgdmFyIHNjYW5uaW5nID0gMTsKICB2YXIgYW1wZXJzYW5kID0gMTsKICB2YXIgY2hhcmFjdGVyMiA9IDA7CiAgdmFyIHR5cGUgPSAiIjsKICB2YXIgcHJvcHMgPSBydWxlczsKICB2YXIgY2hpbGRyZW4gPSBydWxlc2V0czsKICB2YXIgcmVmZXJlbmNlID0gcnVsZTsKICB2YXIgY2hhcmFjdGVyczIgPSB0eXBlOwogIHdoaWxlIChzY2FubmluZykKICAgIHN3aXRjaCAocHJldmlvdXMgPSBjaGFyYWN0ZXIyLCBjaGFyYWN0ZXIyID0gbmV4dCgpKSB7CiAgICAgIC8vICgKICAgICAgY2FzZSA0MDoKICAgICAgICBpZiAocHJldmlvdXMgIT0gMTA4ICYmIGNoYXJhdChjaGFyYWN0ZXJzMiwgbGVuZ3RoMiAtIDEpID09IDU4KSB7CiAgICAgICAgICBpZiAoaW5kZXhvZihjaGFyYWN0ZXJzMiArPSByZXBsYWNlKGRlbGltaXQoY2hhcmFjdGVyMiksICImIiwgIiZcZiIpLCAiJlxmIiwgYWJzKGluZGV4ID8gcG9pbnRzW2luZGV4IC0gMV0gOiAwKSkgIT0gLTEpCiAgICAgICAgICAgIGFtcGVyc2FuZCA9IC0xOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAvLyAiICcgWwogICAgICBjYXNlIDM0OgogICAgICBjYXNlIDM5OgogICAgICBjYXNlIDkxOgogICAgICAgIGNoYXJhY3RlcnMyICs9IGRlbGltaXQoY2hhcmFjdGVyMik7CiAgICAgICAgYnJlYWs7CiAgICAgIC8vIFx0IFxuIFxyIFxzCiAgICAgIGNhc2UgOToKICAgICAgY2FzZSAxMDoKICAgICAgY2FzZSAxMzoKICAgICAgY2FzZSAzMjoKICAgICAgICBjaGFyYWN0ZXJzMiArPSB3aGl0ZXNwYWNlKHByZXZpb3VzKTsKICAgICAgICBicmVhazsKICAgICAgLy8gXAogICAgICBjYXNlIDkyOgogICAgICAgIGNoYXJhY3RlcnMyICs9IGVzY2FwaW5nKGNhcmV0KCkgLSAxLCA3KTsKICAgICAgICBjb250aW51ZTsKICAgICAgLy8gLwogICAgICBjYXNlIDQ3OgogICAgICAgIHN3aXRjaCAocGVlaygpKSB7CiAgICAgICAgICBjYXNlIDQyOgogICAgICAgICAgY2FzZSA0NzoKICAgICAgICAgICAgYXBwZW5kKGNvbW1lbnQoY29tbWVudGVyKG5leHQoKSwgY2FyZXQoKSksIHJvb3QsIHBhcmVudCwgZGVjbGFyYXRpb25zKSwgZGVjbGFyYXRpb25zKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBjaGFyYWN0ZXJzMiArPSAiLyI7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICAvLyB7CiAgICAgIGNhc2UgMTIzICogdmFyaWFibGU6CiAgICAgICAgcG9pbnRzW2luZGV4KytdID0gc3RybGVuKGNoYXJhY3RlcnMyKSAqIGFtcGVyc2FuZDsKICAgICAgLy8gfSA7IFwwCiAgICAgIGNhc2UgMTI1ICogdmFyaWFibGU6CiAgICAgIGNhc2UgNTk6CiAgICAgIGNhc2UgMDoKICAgICAgICBzd2l0Y2ggKGNoYXJhY3RlcjIpIHsKICAgICAgICAgIC8vIFwwIH0KICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgIGNhc2UgMTI1OgogICAgICAgICAgICBzY2FubmluZyA9IDA7CiAgICAgICAgICAvLyA7CiAgICAgICAgICBjYXNlIDU5ICsgb2Zmc2V0OgogICAgICAgICAgICBpZiAoYW1wZXJzYW5kID09IC0xKSBjaGFyYWN0ZXJzMiA9IHJlcGxhY2UoY2hhcmFjdGVyczIsIC9cZi9nLCAiIik7CiAgICAgICAgICAgIGlmIChwcm9wZXJ0eSA+IDAgJiYgc3RybGVuKGNoYXJhY3RlcnMyKSAtIGxlbmd0aDIpCiAgICAgICAgICAgICAgYXBwZW5kKHByb3BlcnR5ID4gMzIgPyBkZWNsYXJhdGlvbihjaGFyYWN0ZXJzMiArICI7IiwgcnVsZSwgcGFyZW50LCBsZW5ndGgyIC0gMSwgZGVjbGFyYXRpb25zKSA6IGRlY2xhcmF0aW9uKHJlcGxhY2UoY2hhcmFjdGVyczIsICIgIiwgIiIpICsgIjsiLCBydWxlLCBwYXJlbnQsIGxlbmd0aDIgLSAyLCBkZWNsYXJhdGlvbnMpLCBkZWNsYXJhdGlvbnMpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIC8vIEAgOwogICAgICAgICAgY2FzZSA1OToKICAgICAgICAgICAgY2hhcmFjdGVyczIgKz0gIjsiOwogICAgICAgICAgLy8geyBydWxlL2F0LXJ1bGUKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIGFwcGVuZChyZWZlcmVuY2UgPSBydWxlc2V0KGNoYXJhY3RlcnMyLCByb290LCBwYXJlbnQsIGluZGV4LCBvZmZzZXQsIHJ1bGVzLCBwb2ludHMsIHR5cGUsIHByb3BzID0gW10sIGNoaWxkcmVuID0gW10sIGxlbmd0aDIsIHJ1bGVzZXRzKSwgcnVsZXNldHMpOwogICAgICAgICAgICBpZiAoY2hhcmFjdGVyMiA9PT0gMTIzKQogICAgICAgICAgICAgIGlmIChvZmZzZXQgPT09IDApCiAgICAgICAgICAgICAgICBwYXJzZShjaGFyYWN0ZXJzMiwgcm9vdCwgcmVmZXJlbmNlLCByZWZlcmVuY2UsIHByb3BzLCBydWxlc2V0cywgbGVuZ3RoMiwgcG9pbnRzLCBjaGlsZHJlbik7CiAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgc3dpdGNoIChhdHJ1bGUgPT09IDk5ICYmIGNoYXJhdChjaGFyYWN0ZXJzMiwgMykgPT09IDExMCA/IDEwMCA6IGF0cnVsZSkgewogICAgICAgICAgICAgICAgICAvLyBkIGwgbSBzCiAgICAgICAgICAgICAgICAgIGNhc2UgMTAwOgogICAgICAgICAgICAgICAgICBjYXNlIDEwODoKICAgICAgICAgICAgICAgICAgY2FzZSAxMDk6CiAgICAgICAgICAgICAgICAgIGNhc2UgMTE1OgogICAgICAgICAgICAgICAgICAgIHBhcnNlKHZhbHVlLCByZWZlcmVuY2UsIHJlZmVyZW5jZSwgcnVsZSAmJiBhcHBlbmQocnVsZXNldCh2YWx1ZSwgcmVmZXJlbmNlLCByZWZlcmVuY2UsIDAsIDAsIHJ1bGVzLCBwb2ludHMsIHR5cGUsIHJ1bGVzLCBwcm9wcyA9IFtdLCBsZW5ndGgyLCBjaGlsZHJlbiksIGNoaWxkcmVuKSwgcnVsZXMsIGNoaWxkcmVuLCBsZW5ndGgyLCBwb2ludHMsIHJ1bGUgPyBwcm9wcyA6IGNoaWxkcmVuKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICBwYXJzZShjaGFyYWN0ZXJzMiwgcmVmZXJlbmNlLCByZWZlcmVuY2UsIHJlZmVyZW5jZSwgWyIiXSwgY2hpbGRyZW4sIDAsIHBvaW50cywgY2hpbGRyZW4pOwogICAgICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpbmRleCA9IG9mZnNldCA9IHByb3BlcnR5ID0gMCwgdmFyaWFibGUgPSBhbXBlcnNhbmQgPSAxLCB0eXBlID0gY2hhcmFjdGVyczIgPSAiIiwgbGVuZ3RoMiA9IHBzZXVkbzsKICAgICAgICBicmVhazsKICAgICAgLy8gOgogICAgICBjYXNlIDU4OgogICAgICAgIGxlbmd0aDIgPSAxICsgc3RybGVuKGNoYXJhY3RlcnMyKSwgcHJvcGVydHkgPSBwcmV2aW91czsKICAgICAgZGVmYXVsdDoKICAgICAgICBpZiAodmFyaWFibGUgPCAxKSB7CiAgICAgICAgICBpZiAoY2hhcmFjdGVyMiA9PSAxMjMpCiAgICAgICAgICAgIC0tdmFyaWFibGU7CiAgICAgICAgICBlbHNlIGlmIChjaGFyYWN0ZXIyID09IDEyNSAmJiB2YXJpYWJsZSsrID09IDAgJiYgcHJldigpID09IDEyNSkKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIHN3aXRjaCAoY2hhcmFjdGVyczIgKz0gZnJvbShjaGFyYWN0ZXIyKSwgY2hhcmFjdGVyMiAqIHZhcmlhYmxlKSB7CiAgICAgICAgICAvLyAmCiAgICAgICAgICBjYXNlIDM4OgogICAgICAgICAgICBhbXBlcnNhbmQgPSBvZmZzZXQgPiAwID8gMSA6IChjaGFyYWN0ZXJzMiArPSAiXGYiLCAtMSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgLy8gLAogICAgICAgICAgY2FzZSA0NDoKICAgICAgICAgICAgcG9pbnRzW2luZGV4KytdID0gKHN0cmxlbihjaGFyYWN0ZXJzMikgLSAxKSAqIGFtcGVyc2FuZCwgYW1wZXJzYW5kID0gMTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAvLyBACiAgICAgICAgICBjYXNlIDY0OgogICAgICAgICAgICBpZiAocGVlaygpID09PSA0NSkKICAgICAgICAgICAgICBjaGFyYWN0ZXJzMiArPSBkZWxpbWl0KG5leHQoKSk7CiAgICAgICAgICAgIGF0cnVsZSA9IHBlZWsoKSwgb2Zmc2V0ID0gbGVuZ3RoMiA9IHN0cmxlbih0eXBlID0gY2hhcmFjdGVyczIgKz0gaWRlbnRpZmllcihjYXJldCgpKSksIGNoYXJhY3RlcjIrKzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAvLyAtCiAgICAgICAgICBjYXNlIDQ1OgogICAgICAgICAgICBpZiAocHJldmlvdXMgPT09IDQ1ICYmIHN0cmxlbihjaGFyYWN0ZXJzMikgPT0gMikKICAgICAgICAgICAgICB2YXJpYWJsZSA9IDA7CiAgICAgICAgfQogICAgfQogIHJldHVybiBydWxlc2V0czsKfQpmdW5jdGlvbiBydWxlc2V0KHZhbHVlLCByb290LCBwYXJlbnQsIGluZGV4LCBvZmZzZXQsIHJ1bGVzLCBwb2ludHMsIHR5cGUsIHByb3BzLCBjaGlsZHJlbiwgbGVuZ3RoMiwgc2libGluZ3MpIHsKICB2YXIgcG9zdCA9IG9mZnNldCAtIDE7CiAgdmFyIHJ1bGUgPSBvZmZzZXQgPT09IDAgPyBydWxlcyA6IFsiIl07CiAgdmFyIHNpemUgPSBzaXplb2YocnVsZSk7CiAgZm9yICh2YXIgaTIgPSAwLCBqMiA9IDAsIGsyID0gMDsgaTIgPCBpbmRleDsgKytpMikKICAgIGZvciAodmFyIHgyID0gMCwgeTIgPSBzdWJzdHIodmFsdWUsIHBvc3QgKyAxLCBwb3N0ID0gYWJzKGoyID0gcG9pbnRzW2kyXSkpLCB6MiA9IHZhbHVlOyB4MiA8IHNpemU7ICsreDIpCiAgICAgIGlmICh6MiA9IHRyaW0oajIgPiAwID8gcnVsZVt4Ml0gKyAiICIgKyB5MiA6IHJlcGxhY2UoeTIsIC8mXGYvZywgcnVsZVt4Ml0pKSkKICAgICAgICBwcm9wc1trMisrXSA9IHoyOwogIHJldHVybiBub2RlKHZhbHVlLCByb290LCBwYXJlbnQsIG9mZnNldCA9PT0gMCA/IFJVTEVTRVQgOiB0eXBlLCBwcm9wcywgY2hpbGRyZW4sIGxlbmd0aDIsIHNpYmxpbmdzKTsKfQpmdW5jdGlvbiBjb21tZW50KHZhbHVlLCByb290LCBwYXJlbnQsIHNpYmxpbmdzKSB7CiAgcmV0dXJuIG5vZGUodmFsdWUsIHJvb3QsIHBhcmVudCwgQ09NTUVOVCwgZnJvbShjaGFyKCkpLCBzdWJzdHIodmFsdWUsIDIsIC0yKSwgMCwgc2libGluZ3MpOwp9CmZ1bmN0aW9uIGRlY2xhcmF0aW9uKHZhbHVlLCByb290LCBwYXJlbnQsIGxlbmd0aDIsIHNpYmxpbmdzKSB7CiAgcmV0dXJuIG5vZGUodmFsdWUsIHJvb3QsIHBhcmVudCwgREVDTEFSQVRJT04sIHN1YnN0cih2YWx1ZSwgMCwgbGVuZ3RoMiksIHN1YnN0cih2YWx1ZSwgbGVuZ3RoMiArIDEsIC0xKSwgbGVuZ3RoMiwgc2libGluZ3MpOwp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGlzL3NyYy9QcmVmaXhlci5qcwpmdW5jdGlvbiBwcmVmaXgodmFsdWUsIGxlbmd0aDIsIGNoaWxkcmVuKSB7CiAgc3dpdGNoIChoYXNoKHZhbHVlLCBsZW5ndGgyKSkgewogICAgLy8gY29sb3ItYWRqdXN0CiAgICBjYXNlIDUxMDM6CiAgICAgIHJldHVybiBXRUJLSVQgKyAicHJpbnQtIiArIHZhbHVlICsgdmFsdWU7CiAgICAvLyBhbmltYXRpb24sIGFuaW1hdGlvbi0oZGVsYXl8ZGlyZWN0aW9ufGR1cmF0aW9ufGZpbGwtbW9kZXxpdGVyYXRpb24tY291bnR8bmFtZXxwbGF5LXN0YXRlfHRpbWluZy1mdW5jdGlvbikKICAgIGNhc2UgNTczNzoKICAgIGNhc2UgNDIwMToKICAgIGNhc2UgMzE3NzoKICAgIGNhc2UgMzQzMzoKICAgIGNhc2UgMTY0MToKICAgIGNhc2UgNDQ1NzoKICAgIGNhc2UgMjkyMToKICAgIC8vIHRleHQtZGVjb3JhdGlvbiwgZmlsdGVyLCBjbGlwLXBhdGgsIGJhY2tmYWNlLXZpc2liaWxpdHksIGNvbHVtbiwgYm94LWRlY29yYXRpb24tYnJlYWsKICAgIGNhc2UgNTU3MjoKICAgIGNhc2UgNjM1NjoKICAgIGNhc2UgNTg0NDoKICAgIGNhc2UgMzE5MToKICAgIGNhc2UgNjY0NToKICAgIGNhc2UgMzAwNToKICAgIC8vIG1hc2ssIG1hc2staW1hZ2UsIG1hc2stKG1vZGV8Y2xpcHxzaXplKSwgbWFzay0ocmVwZWF0fG9yaWdpbiksIG1hc2stcG9zaXRpb24sIG1hc2stY29tcG9zaXRlLAogICAgY2FzZSA2MzkxOgogICAgY2FzZSA1ODc5OgogICAgY2FzZSA1NjIzOgogICAgY2FzZSA2MTM1OgogICAgY2FzZSA0NTk5OgogICAgY2FzZSA0ODU1OgogICAgLy8gYmFja2dyb3VuZC1jbGlwLCBjb2x1bW5zLCBjb2x1bW4tKGNvdW50fGZpbGx8Z2FwfHJ1bGV8cnVsZS1jb2xvcnxydWxlLXN0eWxlfHJ1bGUtd2lkdGh8c3Bhbnx3aWR0aCkKICAgIGNhc2UgNDIxNToKICAgIGNhc2UgNjM4OToKICAgIGNhc2UgNTEwOToKICAgIGNhc2UgNTM2NToKICAgIGNhc2UgNTYyMToKICAgIGNhc2UgMzgyOToKICAgICAgcmV0dXJuIFdFQktJVCArIHZhbHVlICsgdmFsdWU7CiAgICAvLyB0YWItc2l6ZQogICAgY2FzZSA0Nzg5OgogICAgICByZXR1cm4gTU9aICsgdmFsdWUgKyB2YWx1ZTsKICAgIC8vIGFwcGVhcmFuY2UsIHVzZXItc2VsZWN0LCB0cmFuc2Zvcm0sIGh5cGhlbnMsIHRleHQtc2l6ZS1hZGp1c3QKICAgIGNhc2UgNTM0OToKICAgIGNhc2UgNDI0NjoKICAgIGNhc2UgNDgxMDoKICAgIGNhc2UgNjk2ODoKICAgIGNhc2UgMjc1NjoKICAgICAgcmV0dXJuIFdFQktJVCArIHZhbHVlICsgTU9aICsgdmFsdWUgKyBNUyArIHZhbHVlICsgdmFsdWU7CiAgICAvLyB3cml0aW5nLW1vZGUKICAgIGNhc2UgNTkzNjoKICAgICAgc3dpdGNoIChjaGFyYXQodmFsdWUsIGxlbmd0aDIgKyAxMSkpIHsKICAgICAgICAvLyB2ZXJ0aWNhbC1sKHIpCiAgICAgICAgY2FzZSAxMTQ6CiAgICAgICAgICByZXR1cm4gV0VCS0lUICsgdmFsdWUgKyBNUyArIHJlcGxhY2UodmFsdWUsIC9bc3ZoXVx3Ky1bdGJscl17Mn0vLCAidGIiKSArIHZhbHVlOwogICAgICAgIC8vIHZlcnRpY2FsLXIobCkKICAgICAgICBjYXNlIDEwODoKICAgICAgICAgIHJldHVybiBXRUJLSVQgKyB2YWx1ZSArIE1TICsgcmVwbGFjZSh2YWx1ZSwgL1tzdmhdXHcrLVt0YmxyXXsyfS8sICJ0Yi1ybCIpICsgdmFsdWU7CiAgICAgICAgLy8gaG9yaXpvbnRhbCgtKXRiCiAgICAgICAgY2FzZSA0NToKICAgICAgICAgIHJldHVybiBXRUJLSVQgKyB2YWx1ZSArIE1TICsgcmVwbGFjZSh2YWx1ZSwgL1tzdmhdXHcrLVt0YmxyXXsyfS8sICJsciIpICsgdmFsdWU7CiAgICAgIH0KICAgIC8vIGZsZXgsIGZsZXgtZGlyZWN0aW9uLCBzY3JvbGwtc25hcC10eXBlLCB3cml0aW5nLW1vZGUKICAgIGNhc2UgNjgyODoKICAgIGNhc2UgNDI2ODoKICAgIGNhc2UgMjkwMzoKICAgICAgcmV0dXJuIFdFQktJVCArIHZhbHVlICsgTVMgKyB2YWx1ZSArIHZhbHVlOwogICAgLy8gb3JkZXIKICAgIGNhc2UgNjE2NToKICAgICAgcmV0dXJuIFdFQktJVCArIHZhbHVlICsgTVMgKyAiZmxleC0iICsgdmFsdWUgKyB2YWx1ZTsKICAgIC8vIGFsaWduLWl0ZW1zCiAgICBjYXNlIDUxODc6CiAgICAgIHJldHVybiBXRUJLSVQgKyB2YWx1ZSArIHJlcGxhY2UodmFsdWUsIC8oXHcrKS4rKDpbXl0rKS8sIFdFQktJVCArICJib3gtJDEkMiIgKyBNUyArICJmbGV4LSQxJDIiKSArIHZhbHVlOwogICAgLy8gYWxpZ24tc2VsZgogICAgY2FzZSA1NDQzOgogICAgICByZXR1cm4gV0VCS0lUICsgdmFsdWUgKyBNUyArICJmbGV4LWl0ZW0tIiArIHJlcGxhY2UodmFsdWUsIC9mbGV4LXwtc2VsZi9nLCAiIikgKyAoIW1hdGNoKHZhbHVlLCAvZmxleC18YmFzZWxpbmUvKSA/IE1TICsgImdyaWQtcm93LSIgKyByZXBsYWNlKHZhbHVlLCAvZmxleC18LXNlbGYvZywgIiIpIDogIiIpICsgdmFsdWU7CiAgICAvLyBhbGlnbi1jb250ZW50CiAgICBjYXNlIDQ2NzU6CiAgICAgIHJldHVybiBXRUJLSVQgKyB2YWx1ZSArIE1TICsgImZsZXgtbGluZS1wYWNrIiArIHJlcGxhY2UodmFsdWUsIC9hbGlnbi1jb250ZW50fGZsZXgtfC1zZWxmL2csICIiKSArIHZhbHVlOwogICAgLy8gZmxleC1zaHJpbmsKICAgIGNhc2UgNTU0ODoKICAgICAgcmV0dXJuIFdFQktJVCArIHZhbHVlICsgTVMgKyByZXBsYWNlKHZhbHVlLCAic2hyaW5rIiwgIm5lZ2F0aXZlIikgKyB2YWx1ZTsKICAgIC8vIGZsZXgtYmFzaXMKICAgIGNhc2UgNTI5MjoKICAgICAgcmV0dXJuIFdFQktJVCArIHZhbHVlICsgTVMgKyByZXBsYWNlKHZhbHVlLCAiYmFzaXMiLCAicHJlZmVycmVkLXNpemUiKSArIHZhbHVlOwogICAgLy8gZmxleC1ncm93CiAgICBjYXNlIDYwNjA6CiAgICAgIHJldHVybiBXRUJLSVQgKyAiYm94LSIgKyByZXBsYWNlKHZhbHVlLCAiLWdyb3ciLCAiIikgKyBXRUJLSVQgKyB2YWx1ZSArIE1TICsgcmVwbGFjZSh2YWx1ZSwgImdyb3ciLCAicG9zaXRpdmUiKSArIHZhbHVlOwogICAgLy8gdHJhbnNpdGlvbgogICAgY2FzZSA0NTU0OgogICAgICByZXR1cm4gV0VCS0lUICsgcmVwbGFjZSh2YWx1ZSwgLyhbXi1dKSh0cmFuc2Zvcm0pL2csICIkMSIgKyBXRUJLSVQgKyAiJDIiKSArIHZhbHVlOwogICAgLy8gY3Vyc29yCiAgICBjYXNlIDYxODc6CiAgICAgIHJldHVybiByZXBsYWNlKHJlcGxhY2UocmVwbGFjZSh2YWx1ZSwgLyh6b29tLXxncmFiKS8sIFdFQktJVCArICIkMSIpLCAvKGltYWdlLXNldCkvLCBXRUJLSVQgKyAiJDEiKSwgdmFsdWUsICIiKSArIHZhbHVlOwogICAgLy8gYmFja2dyb3VuZCwgYmFja2dyb3VuZC1pbWFnZQogICAgY2FzZSA1NDk1OgogICAgY2FzZSAzOTU5OgogICAgICByZXR1cm4gcmVwbGFjZSh2YWx1ZSwgLyhpbWFnZS1zZXRcKFteXSopLywgV0VCS0lUICsgIiQxJGAkMSIpOwogICAgLy8ganVzdGlmeS1jb250ZW50CiAgICBjYXNlIDQ5Njg6CiAgICAgIHJldHVybiByZXBsYWNlKHJlcGxhY2UodmFsdWUsIC8oLis6KShmbGV4LSk/KC4qKS8sIFdFQktJVCArICJib3gtcGFjazokMyIgKyBNUyArICJmbGV4LXBhY2s6JDMiKSwgL3MuKy1iW147XSsvLCAianVzdGlmeSIpICsgV0VCS0lUICsgdmFsdWUgKyB2YWx1ZTsKICAgIC8vIGp1c3RpZnktc2VsZgogICAgY2FzZSA0MjAwOgogICAgICBpZiAoIW1hdGNoKHZhbHVlLCAvZmxleC18YmFzZWxpbmUvKSkgcmV0dXJuIE1TICsgImdyaWQtY29sdW1uLWFsaWduIiArIHN1YnN0cih2YWx1ZSwgbGVuZ3RoMikgKyB2YWx1ZTsKICAgICAgYnJlYWs7CiAgICAvLyBncmlkLXRlbXBsYXRlLShjb2x1bW5zfHJvd3MpCiAgICBjYXNlIDI1OTI6CiAgICBjYXNlIDMzNjA6CiAgICAgIHJldHVybiBNUyArIHJlcGxhY2UodmFsdWUsICJ0ZW1wbGF0ZS0iLCAiIikgKyB2YWx1ZTsKICAgIC8vIGdyaWQtKHJvd3xjb2x1bW4pLXN0YXJ0CiAgICBjYXNlIDQzODQ6CiAgICBjYXNlIDM2MTY6CiAgICAgIGlmIChjaGlsZHJlbiAmJiBjaGlsZHJlbi5zb21lKGZ1bmN0aW9uKGVsZW1lbnQsIGluZGV4KSB7CiAgICAgICAgcmV0dXJuIGxlbmd0aDIgPSBpbmRleCwgbWF0Y2goZWxlbWVudC5wcm9wcywgL2dyaWQtXHcrLWVuZC8pOwogICAgICB9KSkgewogICAgICAgIHJldHVybiB+aW5kZXhvZih2YWx1ZSArIChjaGlsZHJlbiA9IGNoaWxkcmVuW2xlbmd0aDJdLnZhbHVlKSwgInNwYW4iLCAwKSA/IHZhbHVlIDogTVMgKyByZXBsYWNlKHZhbHVlLCAiLXN0YXJ0IiwgIiIpICsgdmFsdWUgKyBNUyArICJncmlkLXJvdy1zcGFuOiIgKyAofmluZGV4b2YoY2hpbGRyZW4sICJzcGFuIiwgMCkgPyBtYXRjaChjaGlsZHJlbiwgL1xkKy8pIDogK21hdGNoKGNoaWxkcmVuLCAvXGQrLykgLSArbWF0Y2godmFsdWUsIC9cZCsvKSkgKyAiOyI7CiAgICAgIH0KICAgICAgcmV0dXJuIE1TICsgcmVwbGFjZSh2YWx1ZSwgIi1zdGFydCIsICIiKSArIHZhbHVlOwogICAgLy8gZ3JpZC0ocm93fGNvbHVtbiktZW5kCiAgICBjYXNlIDQ4OTY6CiAgICBjYXNlIDQxMjg6CiAgICAgIHJldHVybiBjaGlsZHJlbiAmJiBjaGlsZHJlbi5zb21lKGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICByZXR1cm4gbWF0Y2goZWxlbWVudC5wcm9wcywgL2dyaWQtXHcrLXN0YXJ0Lyk7CiAgICAgIH0pID8gdmFsdWUgOiBNUyArIHJlcGxhY2UocmVwbGFjZSh2YWx1ZSwgIi1lbmQiLCAiLXNwYW4iKSwgInNwYW4gIiwgIiIpICsgdmFsdWU7CiAgICAvLyAobWFyZ2lufHBhZGRpbmcpLWlubGluZS0oc3RhcnR8ZW5kKQogICAgY2FzZSA0MDk1OgogICAgY2FzZSAzNTgzOgogICAgY2FzZSA0MDY4OgogICAgY2FzZSAyNTMyOgogICAgICByZXR1cm4gcmVwbGFjZSh2YWx1ZSwgLyguKyktaW5saW5lKC4rKS8sIFdFQktJVCArICIkMSQyIikgKyB2YWx1ZTsKICAgIC8vIChtaW58bWF4KT8od2lkdGh8aGVpZ2h0fGlubGluZS1zaXplfGJsb2NrLXNpemUpCiAgICBjYXNlIDgxMTY6CiAgICBjYXNlIDcwNTk6CiAgICBjYXNlIDU3NTM6CiAgICBjYXNlIDU1MzU6CiAgICBjYXNlIDU0NDU6CiAgICBjYXNlIDU3MDE6CiAgICBjYXNlIDQ5MzM6CiAgICBjYXNlIDQ2Nzc6CiAgICBjYXNlIDU1MzM6CiAgICBjYXNlIDU3ODk6CiAgICBjYXNlIDUwMjE6CiAgICBjYXNlIDQ3NjU6CiAgICAgIGlmIChzdHJsZW4odmFsdWUpIC0gMSAtIGxlbmd0aDIgPiA2KQogICAgICAgIHN3aXRjaCAoY2hhcmF0KHZhbHVlLCBsZW5ndGgyICsgMSkpIHsKICAgICAgICAgIC8vIChtKWF4LWNvbnRlbnQsIChtKWluLWNvbnRlbnQKICAgICAgICAgIGNhc2UgMTA5OgogICAgICAgICAgICBpZiAoY2hhcmF0KHZhbHVlLCBsZW5ndGgyICsgNCkgIT09IDQ1KQogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgLy8gKGYpaWxsLWF2YWlsYWJsZSwgKGYpaXQtY29udGVudAogICAgICAgICAgY2FzZSAxMDI6CiAgICAgICAgICAgIHJldHVybiByZXBsYWNlKHZhbHVlLCAvKC4rOikoLispLShbXl0rKS8sICIkMSIgKyBXRUJLSVQgKyAiJDItJDMkMSIgKyBNT1ogKyAoY2hhcmF0KHZhbHVlLCBsZW5ndGgyICsgMykgPT0gMTA4ID8gIiQzIiA6ICIkMi0kMyIpKSArIHZhbHVlOwogICAgICAgICAgLy8gKHMpdHJldGNoCiAgICAgICAgICBjYXNlIDExNToKICAgICAgICAgICAgcmV0dXJuIH5pbmRleG9mKHZhbHVlLCAic3RyZXRjaCIsIDApID8gcHJlZml4KHJlcGxhY2UodmFsdWUsICJzdHJldGNoIiwgImZpbGwtYXZhaWxhYmxlIiksIGxlbmd0aDIsIGNoaWxkcmVuKSArIHZhbHVlIDogdmFsdWU7CiAgICAgICAgfQogICAgICBicmVhazsKICAgIC8vIGdyaWQtKGNvbHVtbnxyb3cpCiAgICBjYXNlIDUxNTI6CiAgICBjYXNlIDU5MjA6CiAgICAgIHJldHVybiByZXBsYWNlKHZhbHVlLCAvKC4rPyk6KFxkKykoXHMqXC9ccyooc3Bhbik/XHMqKFxkKykpPyguKikvLCBmdW5jdGlvbihfMiwgYTIsIGIyLCBjMiwgZCwgZSwgZjIpIHsKICAgICAgICByZXR1cm4gTVMgKyBhMiArICI6IiArIGIyICsgZjIgKyAoYzIgPyBNUyArIGEyICsgIi1zcGFuOiIgKyAoZCA/IGUgOiArZSAtICtiMikgKyBmMiA6ICIiKSArIHZhbHVlOwogICAgICB9KTsKICAgIC8vIHBvc2l0aW9uOiBzdGlja3kKICAgIGNhc2UgNDk0OToKICAgICAgaWYgKGNoYXJhdCh2YWx1ZSwgbGVuZ3RoMiArIDYpID09PSAxMjEpCiAgICAgICAgcmV0dXJuIHJlcGxhY2UodmFsdWUsICI6IiwgIjoiICsgV0VCS0lUKSArIHZhbHVlOwogICAgICBicmVhazsKICAgIC8vIGRpc3BsYXk6IChmbGV4fGlubGluZS1mbGV4fGdyaWR8aW5saW5lLWdyaWQpCiAgICBjYXNlIDY0NDQ6CiAgICAgIHN3aXRjaCAoY2hhcmF0KHZhbHVlLCBjaGFyYXQodmFsdWUsIDE0KSA9PT0gNDUgPyAxOCA6IDExKSkgewogICAgICAgIC8vIChpbmxpbmUtKT9mbGUoeCkKICAgICAgICBjYXNlIDEyMDoKICAgICAgICAgIHJldHVybiByZXBsYWNlKHZhbHVlLCAvKC4rOikoW147XHMhXSspKDt8KFxzKyk/IS4rKT8vLCAiJDEiICsgV0VCS0lUICsgKGNoYXJhdCh2YWx1ZSwgMTQpID09PSA0NSA/ICJpbmxpbmUtIiA6ICIiKSArICJib3gkMyQxIiArIFdFQktJVCArICIkMiQzJDEiICsgTVMgKyAiJDJib3gkMyIpICsgdmFsdWU7CiAgICAgICAgLy8gKGlubGluZS0pP2dyaShkKQogICAgICAgIGNhc2UgMTAwOgogICAgICAgICAgcmV0dXJuIHJlcGxhY2UodmFsdWUsICI6IiwgIjoiICsgTVMpICsgdmFsdWU7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICAvLyBzY3JvbGwtbWFyZ2luLCBzY3JvbGwtbWFyZ2luLSh0b3B8cmlnaHR8Ym90dG9tfGxlZnQpCiAgICBjYXNlIDU3MTk6CiAgICBjYXNlIDI2NDc6CiAgICBjYXNlIDIxMzU6CiAgICBjYXNlIDM5Mjc6CiAgICBjYXNlIDIzOTE6CiAgICAgIHJldHVybiByZXBsYWNlKHZhbHVlLCAic2Nyb2xsLSIsICJzY3JvbGwtc25hcC0iKSArIHZhbHVlOwogIH0KICByZXR1cm4gdmFsdWU7Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9zdHlsaXMvc3JjL1NlcmlhbGl6ZXIuanMKZnVuY3Rpb24gc2VyaWFsaXplKGNoaWxkcmVuLCBjYWxsYmFjaykgewogIHZhciBvdXRwdXQgPSAiIjsKICBmb3IgKHZhciBpMiA9IDA7IGkyIDwgY2hpbGRyZW4ubGVuZ3RoOyBpMisrKQogICAgb3V0cHV0ICs9IGNhbGxiYWNrKGNoaWxkcmVuW2kyXSwgaTIsIGNoaWxkcmVuLCBjYWxsYmFjaykgfHwgIiI7CiAgcmV0dXJuIG91dHB1dDsKfQpmdW5jdGlvbiBzdHJpbmdpZnkoZWxlbWVudCwgaW5kZXgsIGNoaWxkcmVuLCBjYWxsYmFjaykgewogIHN3aXRjaCAoZWxlbWVudC50eXBlKSB7CiAgICBjYXNlIExBWUVSOgogICAgICBpZiAoZWxlbWVudC5jaGlsZHJlbi5sZW5ndGgpIGJyZWFrOwogICAgY2FzZSBJTVBPUlQ6CiAgICBjYXNlIERFQ0xBUkFUSU9OOgogICAgICByZXR1cm4gZWxlbWVudC5yZXR1cm4gPSBlbGVtZW50LnJldHVybiB8fCBlbGVtZW50LnZhbHVlOwogICAgY2FzZSBDT01NRU5UOgogICAgICByZXR1cm4gIiI7CiAgICBjYXNlIEtFWUZSQU1FUzoKICAgICAgcmV0dXJuIGVsZW1lbnQucmV0dXJuID0gZWxlbWVudC52YWx1ZSArICJ7IiArIHNlcmlhbGl6ZShlbGVtZW50LmNoaWxkcmVuLCBjYWxsYmFjaykgKyAifSI7CiAgICBjYXNlIFJVTEVTRVQ6CiAgICAgIGlmICghc3RybGVuKGVsZW1lbnQudmFsdWUgPSBlbGVtZW50LnByb3BzLmpvaW4oIiwiKSkpIHJldHVybiAiIjsKICB9CiAgcmV0dXJuIHN0cmxlbihjaGlsZHJlbiA9IHNlcmlhbGl6ZShlbGVtZW50LmNoaWxkcmVuLCBjYWxsYmFjaykpID8gZWxlbWVudC5yZXR1cm4gPSBlbGVtZW50LnZhbHVlICsgInsiICsgY2hpbGRyZW4gKyAifSIgOiAiIjsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxpcy9zcmMvTWlkZGxld2FyZS5qcwpmdW5jdGlvbiBtaWRkbGV3YXJlKGNvbGxlY3Rpb24pIHsKICB2YXIgbGVuZ3RoMiA9IHNpemVvZihjb2xsZWN0aW9uKTsKICByZXR1cm4gZnVuY3Rpb24oZWxlbWVudCwgaW5kZXgsIGNoaWxkcmVuLCBjYWxsYmFjaykgewogICAgdmFyIG91dHB1dCA9ICIiOwogICAgZm9yICh2YXIgaTIgPSAwOyBpMiA8IGxlbmd0aDI7IGkyKyspCiAgICAgIG91dHB1dCArPSBjb2xsZWN0aW9uW2kyXShlbGVtZW50LCBpbmRleCwgY2hpbGRyZW4sIGNhbGxiYWNrKSB8fCAiIjsKICAgIHJldHVybiBvdXRwdXQ7CiAgfTsKfQpmdW5jdGlvbiBydWxlc2hlZXQoY2FsbGJhY2spIHsKICByZXR1cm4gZnVuY3Rpb24oZWxlbWVudCkgewogICAgaWYgKCFlbGVtZW50LnJvb3QpIHsKICAgICAgaWYgKGVsZW1lbnQgPSBlbGVtZW50LnJldHVybikKICAgICAgICBjYWxsYmFjayhlbGVtZW50KTsKICAgIH0KICB9Owp9CmZ1bmN0aW9uIHByZWZpeGVyKGVsZW1lbnQsIGluZGV4LCBjaGlsZHJlbiwgY2FsbGJhY2spIHsKICBpZiAoZWxlbWVudC5sZW5ndGggPiAtMSkgewogICAgaWYgKCFlbGVtZW50LnJldHVybikKICAgICAgc3dpdGNoIChlbGVtZW50LnR5cGUpIHsKICAgICAgICBjYXNlIERFQ0xBUkFUSU9OOgogICAgICAgICAgZWxlbWVudC5yZXR1cm4gPSBwcmVmaXgoZWxlbWVudC52YWx1ZSwgZWxlbWVudC5sZW5ndGgsIGNoaWxkcmVuKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICBjYXNlIEtFWUZSQU1FUzoKICAgICAgICAgIHJldHVybiBzZXJpYWxpemUoW2NvcHkoZWxlbWVudCwgeyB2YWx1ZTogcmVwbGFjZShlbGVtZW50LnZhbHVlLCAiQCIsICJAIiArIFdFQktJVCkgfSldLCBjYWxsYmFjayk7CiAgICAgICAgY2FzZSBSVUxFU0VUOgogICAgICAgICAgaWYgKGVsZW1lbnQubGVuZ3RoKQogICAgICAgICAgICByZXR1cm4gY29tYmluZShjaGlsZHJlbiA9IGVsZW1lbnQucHJvcHMsIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChtYXRjaCh2YWx1ZSwgY2FsbGJhY2sgPSAvKDo6cGxhY1x3K3w6cmVhZC1cdyspLykpIHsKICAgICAgICAgICAgICAgIC8vIDpyZWFkLShvbmx5fHdyaXRlKQogICAgICAgICAgICAgICAgY2FzZSAiOnJlYWQtb25seSI6CiAgICAgICAgICAgICAgICBjYXNlICI6cmVhZC13cml0ZSI6CiAgICAgICAgICAgICAgICAgIGxpZnQoY29weShlbGVtZW50LCB7IHByb3BzOiBbcmVwbGFjZSh2YWx1ZSwgLzoocmVhZC1cdyspLywgIjoiICsgTU9aICsgIiQxIildIH0pKTsKICAgICAgICAgICAgICAgICAgbGlmdChjb3B5KGVsZW1lbnQsIHsgcHJvcHM6IFt2YWx1ZV0gfSkpOwogICAgICAgICAgICAgICAgICBhc3NpZ24oZWxlbWVudCwgeyBwcm9wczogZmlsdGVyKGNoaWxkcmVuLCBjYWxsYmFjaykgfSk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgLy8gOnBsYWNlaG9sZGVyCiAgICAgICAgICAgICAgICBjYXNlICI6OnBsYWNlaG9sZGVyIjoKICAgICAgICAgICAgICAgICAgbGlmdChjb3B5KGVsZW1lbnQsIHsgcHJvcHM6IFtyZXBsYWNlKHZhbHVlLCAvOihwbGFjXHcrKS8sICI6IiArIFdFQktJVCArICJpbnB1dC0kMSIpXSB9KSk7CiAgICAgICAgICAgICAgICAgIGxpZnQoY29weShlbGVtZW50LCB7IHByb3BzOiBbcmVwbGFjZSh2YWx1ZSwgLzoocGxhY1x3KykvLCAiOiIgKyBNT1ogKyAiJDEiKV0gfSkpOwogICAgICAgICAgICAgICAgICBsaWZ0KGNvcHkoZWxlbWVudCwgeyBwcm9wczogW3JlcGxhY2UodmFsdWUsIC86KHBsYWNcdyspLywgTVMgKyAiaW5wdXQtJDEiKV0gfSkpOwogICAgICAgICAgICAgICAgICBsaWZ0KGNvcHkoZWxlbWVudCwgeyBwcm9wczogW3ZhbHVlXSB9KSk7CiAgICAgICAgICAgICAgICAgIGFzc2lnbihlbGVtZW50LCB7IHByb3BzOiBmaWx0ZXIoY2hpbGRyZW4sIGNhbGxiYWNrKSB9KTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiAiIjsKICAgICAgICAgICAgfSk7CiAgICAgIH0KICB9Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9AZW1vdGlvbi91bml0bGVzcy9kaXN0L2Vtb3Rpb24tdW5pdGxlc3MuZXNtLmpzCnZhciB1bml0bGVzc0tleXMgPSB7CiAgYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6IDEsCiAgYXNwZWN0UmF0aW86IDEsCiAgYm9yZGVySW1hZ2VPdXRzZXQ6IDEsCiAgYm9yZGVySW1hZ2VTbGljZTogMSwKICBib3JkZXJJbWFnZVdpZHRoOiAxLAogIGJveEZsZXg6IDEsCiAgYm94RmxleEdyb3VwOiAxLAogIGJveE9yZGluYWxHcm91cDogMSwKICBjb2x1bW5Db3VudDogMSwKICBjb2x1bW5zOiAxLAogIGZsZXg6IDEsCiAgZmxleEdyb3c6IDEsCiAgZmxleFBvc2l0aXZlOiAxLAogIGZsZXhTaHJpbms6IDEsCiAgZmxleE5lZ2F0aXZlOiAxLAogIGZsZXhPcmRlcjogMSwKICBncmlkUm93OiAxLAogIGdyaWRSb3dFbmQ6IDEsCiAgZ3JpZFJvd1NwYW46IDEsCiAgZ3JpZFJvd1N0YXJ0OiAxLAogIGdyaWRDb2x1bW46IDEsCiAgZ3JpZENvbHVtbkVuZDogMSwKICBncmlkQ29sdW1uU3BhbjogMSwKICBncmlkQ29sdW1uU3RhcnQ6IDEsCiAgbXNHcmlkUm93OiAxLAogIG1zR3JpZFJvd1NwYW46IDEsCiAgbXNHcmlkQ29sdW1uOiAxLAogIG1zR3JpZENvbHVtblNwYW46IDEsCiAgZm9udFdlaWdodDogMSwKICBsaW5lSGVpZ2h0OiAxLAogIG9wYWNpdHk6IDEsCiAgb3JkZXI6IDEsCiAgb3JwaGFuczogMSwKICB0YWJTaXplOiAxLAogIHdpZG93czogMSwKICB6SW5kZXg6IDEsCiAgem9vbTogMSwKICBXZWJraXRMaW5lQ2xhbXA6IDEsCiAgLy8gU1ZHLXJlbGF0ZWQgcHJvcGVydGllcwogIGZpbGxPcGFjaXR5OiAxLAogIGZsb29kT3BhY2l0eTogMSwKICBzdG9wT3BhY2l0eTogMSwKICBzdHJva2VEYXNoYXJyYXk6IDEsCiAgc3Ryb2tlRGFzaG9mZnNldDogMSwKICBzdHJva2VNaXRlcmxpbWl0OiAxLAogIHN0cm9rZU9wYWNpdHk6IDEsCiAgc3Ryb2tlV2lkdGg6IDEKfTsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZWQtY29tcG9uZW50cy9kaXN0L3N0eWxlZC1jb21wb25lbnRzLmJyb3dzZXIuZXNtLmpzCnZhciBmID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIHByb2Nlc3MgJiYgdm9pZCAwICE9PSBwcm9jZXNzLmVudiAmJiAocHJvY2Vzcy5lbnYuUkVBQ1RfQVBQX1NDX0FUVFIgfHwgcHJvY2Vzcy5lbnYuU0NfQVRUUikgfHwgImRhdGEtc3R5bGVkIjsKdmFyIG0gPSAiYWN0aXZlIjsKdmFyIHkgPSAiZGF0YS1zdHlsZWQtdmVyc2lvbiI7CnZhciB2ID0gIjYuMS4xOSI7CnZhciBnID0gIi8qIXNjKi9cbiI7CnZhciBTID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIHdpbmRvdyAmJiAidW5kZWZpbmVkIiAhPSB0eXBlb2YgZG9jdW1lbnQ7CnZhciB3ID0gQm9vbGVhbigiYm9vbGVhbiIgPT0gdHlwZW9mIFNDX0RJU0FCTEVfU1BFRURZID8gU0NfRElTQUJMRV9TUEVFRFkgOiAidW5kZWZpbmVkIiAhPSB0eXBlb2YgcHJvY2VzcyAmJiB2b2lkIDAgIT09IHByb2Nlc3MuZW52ICYmIHZvaWQgMCAhPT0gcHJvY2Vzcy5lbnYuUkVBQ1RfQVBQX1NDX0RJU0FCTEVfU1BFRURZICYmICIiICE9PSBwcm9jZXNzLmVudi5SRUFDVF9BUFBfU0NfRElTQUJMRV9TUEVFRFkgPyAiZmFsc2UiICE9PSBwcm9jZXNzLmVudi5SRUFDVF9BUFBfU0NfRElTQUJMRV9TUEVFRFkgJiYgcHJvY2Vzcy5lbnYuUkVBQ1RfQVBQX1NDX0RJU0FCTEVfU1BFRURZIDogInVuZGVmaW5lZCIgIT0gdHlwZW9mIHByb2Nlc3MgJiYgdm9pZCAwICE9PSBwcm9jZXNzLmVudiAmJiB2b2lkIDAgIT09IHByb2Nlc3MuZW52LlNDX0RJU0FCTEVfU1BFRURZICYmICIiICE9PSBwcm9jZXNzLmVudi5TQ19ESVNBQkxFX1NQRUVEWSA/ICJmYWxzZSIgIT09IHByb2Nlc3MuZW52LlNDX0RJU0FCTEVfU1BFRURZICYmIHByb2Nlc3MuZW52LlNDX0RJU0FCTEVfU1BFRURZIDogdHJ1ZSk7CnZhciBiID0ge307CnZhciBFID0gL2ludmFsaWQgaG9vayBjYWxsL2k7CnZhciBOID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKdmFyIFAgPSBmdW5jdGlvbih0LCBuKSB7CiAgaWYgKHRydWUpIHsKICAgIHZhciBvMiA9IG4gPyAnIHdpdGggdGhlIGlkIG9mICInLmNvbmNhdChuLCAnIicpIDogIiIsIHMyID0gIlRoZSBjb21wb25lbnQgIi5jb25jYXQodCkuY29uY2F0KG8yLCAiIGhhcyBiZWVuIGNyZWF0ZWQgZHluYW1pY2FsbHkuXG4iKSArICJZb3UgbWF5IHNlZSB0aGlzIHdhcm5pbmcgYmVjYXVzZSB5b3UndmUgY2FsbGVkIHN0eWxlZCBpbnNpZGUgYW5vdGhlciBjb21wb25lbnQuXG5UbyByZXNvbHZlIHRoaXMgb25seSBjcmVhdGUgbmV3IFN0eWxlZENvbXBvbmVudHMgb3V0c2lkZSBvZiBhbnkgcmVuZGVyIG1ldGhvZCBhbmQgZnVuY3Rpb24gY29tcG9uZW50LlxuU2VlIGh0dHBzOi8vc3R5bGVkLWNvbXBvbmVudHMuY29tL2RvY3MvYmFzaWNzI2RlZmluZS1zdHlsZWQtY29tcG9uZW50cy1vdXRzaWRlLW9mLXRoZS1yZW5kZXItbWV0aG9kIGZvciBtb3JlIGluZm8uXG4iLCBpMiA9IGNvbnNvbGUuZXJyb3I7CiAgICB0cnkgewogICAgICB2YXIgYTIgPSB0cnVlOwogICAgICBjb25zb2xlLmVycm9yID0gZnVuY3Rpb24odDIpIHsKICAgICAgICBmb3IgKHZhciBuMiA9IFtdLCBvMyA9IDE7IG8zIDwgYXJndW1lbnRzLmxlbmd0aDsgbzMrKykgbjJbbzMgLSAxXSA9IGFyZ3VtZW50c1tvM107CiAgICAgICAgRS50ZXN0KHQyKSA/IChhMiA9IGZhbHNlLCBOLmRlbGV0ZShzMikpIDogaTIuYXBwbHkodm9pZCAwLCBfX3NwcmVhZEFycmF5KFt0Ml0sIG4yLCBmYWxzZSkpOwogICAgICB9LCAoMCwgaW1wb3J0X3JlYWN0LnVzZVJlZikoKSwgYTIgJiYgIU4uaGFzKHMyKSAmJiAoY29uc29sZS53YXJuKHMyKSwgTi5hZGQoczIpKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgRS50ZXN0KGUubWVzc2FnZSkgJiYgTi5kZWxldGUoczIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgY29uc29sZS5lcnJvciA9IGkyOwogICAgfQogIH0KfTsKdmFyIF8gPSBPYmplY3QuZnJlZXplKFtdKTsKdmFyIEMgPSBPYmplY3QuZnJlZXplKHt9KTsKZnVuY3Rpb24gSShlLCB0LCBuKSB7CiAgcmV0dXJuIHZvaWQgMCA9PT0gbiAmJiAobiA9IEMpLCBlLnRoZW1lICE9PSBuLnRoZW1lICYmIGUudGhlbWUgfHwgdCB8fCBuLnRoZW1lOwp9CnZhciBBID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoWyJhIiwgImFiYnIiLCAiYWRkcmVzcyIsICJhcmVhIiwgImFydGljbGUiLCAiYXNpZGUiLCAiYXVkaW8iLCAiYiIsICJiYXNlIiwgImJkaSIsICJiZG8iLCAiYmlnIiwgImJsb2NrcXVvdGUiLCAiYm9keSIsICJiciIsICJidXR0b24iLCAiY2FudmFzIiwgImNhcHRpb24iLCAiY2l0ZSIsICJjb2RlIiwgImNvbCIsICJjb2xncm91cCIsICJkYXRhIiwgImRhdGFsaXN0IiwgImRkIiwgImRlbCIsICJkZXRhaWxzIiwgImRmbiIsICJkaWFsb2ciLCAiZGl2IiwgImRsIiwgImR0IiwgImVtIiwgImVtYmVkIiwgImZpZWxkc2V0IiwgImZpZ2NhcHRpb24iLCAiZmlndXJlIiwgImZvb3RlciIsICJmb3JtIiwgImgxIiwgImgyIiwgImgzIiwgImg0IiwgImg1IiwgImg2IiwgImhlYWRlciIsICJoZ3JvdXAiLCAiaHIiLCAiaHRtbCIsICJpIiwgImlmcmFtZSIsICJpbWciLCAiaW5wdXQiLCAiaW5zIiwgImtiZCIsICJrZXlnZW4iLCAibGFiZWwiLCAibGVnZW5kIiwgImxpIiwgImxpbmsiLCAibWFpbiIsICJtYXAiLCAibWFyayIsICJtZW51IiwgIm1lbnVpdGVtIiwgIm1ldGEiLCAibWV0ZXIiLCAibmF2IiwgIm5vc2NyaXB0IiwgIm9iamVjdCIsICJvbCIsICJvcHRncm91cCIsICJvcHRpb24iLCAib3V0cHV0IiwgInAiLCAicGFyYW0iLCAicGljdHVyZSIsICJwcmUiLCAicHJvZ3Jlc3MiLCAicSIsICJycCIsICJydCIsICJydWJ5IiwgInMiLCAic2FtcCIsICJzY3JpcHQiLCAic2VjdGlvbiIsICJzZWxlY3QiLCAic21hbGwiLCAic291cmNlIiwgInNwYW4iLCAic3Ryb25nIiwgInN0eWxlIiwgInN1YiIsICJzdW1tYXJ5IiwgInN1cCIsICJ0YWJsZSIsICJ0Ym9keSIsICJ0ZCIsICJ0ZXh0YXJlYSIsICJ0Zm9vdCIsICJ0aCIsICJ0aGVhZCIsICJ0aW1lIiwgInRyIiwgInRyYWNrIiwgInUiLCAidWwiLCAidXNlIiwgInZhciIsICJ2aWRlbyIsICJ3YnIiLCAiY2lyY2xlIiwgImNsaXBQYXRoIiwgImRlZnMiLCAiZWxsaXBzZSIsICJmb3JlaWduT2JqZWN0IiwgImciLCAiaW1hZ2UiLCAibGluZSIsICJsaW5lYXJHcmFkaWVudCIsICJtYXJrZXIiLCAibWFzayIsICJwYXRoIiwgInBhdHRlcm4iLCAicG9seWdvbiIsICJwb2x5bGluZSIsICJyYWRpYWxHcmFkaWVudCIsICJyZWN0IiwgInN0b3AiLCAic3ZnIiwgInRleHQiLCAidHNwYW4iXSk7CnZhciBPID0gL1shIiMkJSYnKCkqKywuLzo7PD0+P0BbXFxcXV5ge3x9fi1dKy9nOwp2YXIgRCA9IC8oXi18LSQpL2c7CmZ1bmN0aW9uIFIoZSkgewogIHJldHVybiBlLnJlcGxhY2UoTywgIi0iKS5yZXBsYWNlKEQsICIiKTsKfQp2YXIgVCA9IC8oYSkoZCkvZ2k7CnZhciBrID0gNTI7CnZhciBqID0gZnVuY3Rpb24oZSkgewogIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGUgKyAoZSA+IDI1ID8gMzkgOiA5NykpOwp9OwpmdW5jdGlvbiB4KGUpIHsKICB2YXIgdCwgbiA9ICIiOwogIGZvciAodCA9IE1hdGguYWJzKGUpOyB0ID4gazsgdCA9IHQgLyBrIHwgMCkgbiA9IGoodCAlIGspICsgbjsKICByZXR1cm4gKGoodCAlIGspICsgbikucmVwbGFjZShULCAiJDEtJDIiKTsKfQp2YXIgVjsKdmFyIEYgPSA1MzgxOwp2YXIgTSA9IGZ1bmN0aW9uKGUsIHQpIHsKICBmb3IgKHZhciBuID0gdC5sZW5ndGg7IG47ICkgZSA9IDMzICogZSBeIHQuY2hhckNvZGVBdCgtLW4pOwogIHJldHVybiBlOwp9Owp2YXIgeiA9IGZ1bmN0aW9uKGUpIHsKICByZXR1cm4gTShGLCBlKTsKfTsKZnVuY3Rpb24gJChlKSB7CiAgcmV0dXJuIHgoeihlKSA+Pj4gMCk7Cn0KZnVuY3Rpb24gQihlKSB7CiAgcmV0dXJuICJzdHJpbmciID09IHR5cGVvZiBlICYmIGUgfHwgZS5kaXNwbGF5TmFtZSB8fCBlLm5hbWUgfHwgIkNvbXBvbmVudCI7Cn0KZnVuY3Rpb24gTChlKSB7CiAgcmV0dXJuICJzdHJpbmciID09IHR5cGVvZiBlICYmIGUuY2hhckF0KDApID09PSBlLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpOwp9CnZhciBHID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIFN5bWJvbC5mb3I7CnZhciBZID0gRyA/IFN5bWJvbC5mb3IoInJlYWN0Lm1lbW8iKSA6IDYwMTE1Owp2YXIgVyA9IEcgPyBTeW1ib2wuZm9yKCJyZWFjdC5mb3J3YXJkX3JlZiIpIDogNjAxMTI7CnZhciBxID0geyBjaGlsZENvbnRleHRUeXBlczogdHJ1ZSwgY29udGV4dFR5cGU6IHRydWUsIGNvbnRleHRUeXBlczogdHJ1ZSwgZGVmYXVsdFByb3BzOiB0cnVlLCBkaXNwbGF5TmFtZTogdHJ1ZSwgZ2V0RGVmYXVsdFByb3BzOiB0cnVlLCBnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3I6IHRydWUsIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wczogdHJ1ZSwgbWl4aW5zOiB0cnVlLCBwcm9wVHlwZXM6IHRydWUsIHR5cGU6IHRydWUgfTsKdmFyIEggPSB7IG5hbWU6IHRydWUsIGxlbmd0aDogdHJ1ZSwgcHJvdG90eXBlOiB0cnVlLCBjYWxsZXI6IHRydWUsIGNhbGxlZTogdHJ1ZSwgYXJndW1lbnRzOiB0cnVlLCBhcml0eTogdHJ1ZSB9Owp2YXIgVSA9IHsgJCR0eXBlb2Y6IHRydWUsIGNvbXBhcmU6IHRydWUsIGRlZmF1bHRQcm9wczogdHJ1ZSwgZGlzcGxheU5hbWU6IHRydWUsIHByb3BUeXBlczogdHJ1ZSwgdHlwZTogdHJ1ZSB9Owp2YXIgSiA9ICgoViA9IHt9KVtXXSA9IHsgJCR0eXBlb2Y6IHRydWUsIHJlbmRlcjogdHJ1ZSwgZGVmYXVsdFByb3BzOiB0cnVlLCBkaXNwbGF5TmFtZTogdHJ1ZSwgcHJvcFR5cGVzOiB0cnVlIH0sIFZbWV0gPSBVLCBWKTsKZnVuY3Rpb24gWChlKSB7CiAgcmV0dXJuICgidHlwZSIgaW4gKHQgPSBlKSAmJiB0LnR5cGUuJCR0eXBlb2YpID09PSBZID8gVSA6ICIkJHR5cGVvZiIgaW4gZSA/IEpbZS4kJHR5cGVvZl0gOiBxOwogIHZhciB0Owp9CnZhciBaID0gT2JqZWN0LmRlZmluZVByb3BlcnR5Owp2YXIgSyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzOwp2YXIgUSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7CnZhciBlZSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7CnZhciB0ZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjsKdmFyIG5lID0gT2JqZWN0LnByb3RvdHlwZTsKZnVuY3Rpb24gb2UoZSwgdCwgbikgewogIGlmICgic3RyaW5nIiAhPSB0eXBlb2YgdCkgewogICAgaWYgKG5lKSB7CiAgICAgIHZhciBvMiA9IHRlKHQpOwogICAgICBvMiAmJiBvMiAhPT0gbmUgJiYgb2UoZSwgbzIsIG4pOwogICAgfQogICAgdmFyIHIyID0gSyh0KTsKICAgIFEgJiYgKHIyID0gcjIuY29uY2F0KFEodCkpKTsKICAgIGZvciAodmFyIHMyID0gWChlKSwgaTIgPSBYKHQpLCBhMiA9IDA7IGEyIDwgcjIubGVuZ3RoOyArK2EyKSB7CiAgICAgIHZhciBjMiA9IHIyW2EyXTsKICAgICAgaWYgKCEoYzIgaW4gSCB8fCBuICYmIG5bYzJdIHx8IGkyICYmIGMyIGluIGkyIHx8IHMyICYmIGMyIGluIHMyKSkgewogICAgICAgIHZhciBsMiA9IGVlKHQsIGMyKTsKICAgICAgICB0cnkgewogICAgICAgICAgWihlLCBjMiwgbDIpOwogICAgICAgIH0gY2F0Y2ggKGUyKSB7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQogIHJldHVybiBlOwp9CmZ1bmN0aW9uIHJlKGUpIHsKICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgZTsKfQpmdW5jdGlvbiBzZShlKSB7CiAgcmV0dXJuICJvYmplY3QiID09IHR5cGVvZiBlICYmICJzdHlsZWRDb21wb25lbnRJZCIgaW4gZTsKfQpmdW5jdGlvbiBpZShlLCB0KSB7CiAgcmV0dXJuIGUgJiYgdCA/ICIiLmNvbmNhdChlLCAiICIpLmNvbmNhdCh0KSA6IGUgfHwgdCB8fCAiIjsKfQpmdW5jdGlvbiBhZShlLCB0KSB7CiAgaWYgKDAgPT09IGUubGVuZ3RoKSByZXR1cm4gIiI7CiAgZm9yICh2YXIgbiA9IGVbMF0sIG8yID0gMTsgbzIgPCBlLmxlbmd0aDsgbzIrKykgbiArPSB0ID8gdCArIGVbbzJdIDogZVtvMl07CiAgcmV0dXJuIG47Cn0KZnVuY3Rpb24gY2UoZSkgewogIHJldHVybiBudWxsICE9PSBlICYmICJvYmplY3QiID09IHR5cGVvZiBlICYmIGUuY29uc3RydWN0b3IubmFtZSA9PT0gT2JqZWN0Lm5hbWUgJiYgISgicHJvcHMiIGluIGUgJiYgZS4kJHR5cGVvZik7Cn0KZnVuY3Rpb24gbGUoZSwgdCwgbikgewogIGlmICh2b2lkIDAgPT09IG4gJiYgKG4gPSBmYWxzZSksICFuICYmICFjZShlKSAmJiAhQXJyYXkuaXNBcnJheShlKSkgcmV0dXJuIHQ7CiAgaWYgKEFycmF5LmlzQXJyYXkodCkpIGZvciAodmFyIG8yID0gMDsgbzIgPCB0Lmxlbmd0aDsgbzIrKykgZVtvMl0gPSBsZShlW28yXSwgdFtvMl0pOwogIGVsc2UgaWYgKGNlKHQpKSBmb3IgKHZhciBvMiBpbiB0KSBlW28yXSA9IGxlKGVbbzJdLCB0W28yXSk7CiAgcmV0dXJuIGU7Cn0KZnVuY3Rpb24gdWUoZSwgdCkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCAidG9TdHJpbmciLCB7IHZhbHVlOiB0IH0pOwp9CnZhciBwZSA9IHRydWUgPyB7IDE6ICJDYW5ub3QgY3JlYXRlIHN0eWxlZC1jb21wb25lbnQgZm9yIGNvbXBvbmVudDogJXMuXG5cbiIsIDI6ICJDYW4ndCBjb2xsZWN0IHN0eWxlcyBvbmNlIHlvdSd2ZSBjb25zdW1lZCBhIGBTZXJ2ZXJTdHlsZVNoZWV0YCdzIHN0eWxlcyEgYFNlcnZlclN0eWxlU2hlZXRgIGlzIGEgb25lIG9mZiBpbnN0YW5jZSBmb3IgZWFjaCBzZXJ2ZXItc2lkZSByZW5kZXIgY3ljbGUuXG5cbi0gQXJlIHlvdSB0cnlpbmcgdG8gcmV1c2UgaXQgYWNyb3NzIHJlbmRlcnM/XG4tIEFyZSB5b3UgYWNjaWRlbnRhbGx5IGNhbGxpbmcgY29sbGVjdFN0eWxlcyB0d2ljZT9cblxuIiwgMzogIlN0cmVhbWluZyBTU1IgaXMgb25seSBzdXBwb3J0ZWQgaW4gYSBOb2RlLmpzIGVudmlyb25tZW50OyBQbGVhc2UgZG8gbm90IHRyeSB0byBjYWxsIHRoaXMgbWV0aG9kIGluIHRoZSBicm93c2VyLlxuXG4iLCA0OiAiVGhlIGBTdHlsZVNoZWV0TWFuYWdlcmAgZXhwZWN0cyBhIHZhbGlkIHRhcmdldCBvciBzaGVldCBwcm9wIVxuXG4tIERvZXMgdGhpcyBlcnJvciBvY2N1ciBvbiB0aGUgY2xpZW50IGFuZCBpcyB5b3VyIHRhcmdldCBmYWxzeT9cbi0gRG9lcyB0aGlzIGVycm9yIG9jY3VyIG9uIHRoZSBzZXJ2ZXIgYW5kIGlzIHRoZSBzaGVldCBmYWxzeT9cblxuIiwgNTogIlRoZSBjbG9uZSBtZXRob2QgY2Fubm90IGJlIHVzZWQgb24gdGhlIGNsaWVudCFcblxuLSBBcmUgeW91IHJ1bm5pbmcgaW4gYSBjbGllbnQtbGlrZSBlbnZpcm9ubWVudCBvbiB0aGUgc2VydmVyP1xuLSBBcmUgeW91IHRyeWluZyB0byBydW4gU1NSIG9uIHRoZSBjbGllbnQ/XG5cbiIsIDY6ICJUcnlpbmcgdG8gaW5zZXJ0IGEgbmV3IHN0eWxlIHRhZywgYnV0IHRoZSBnaXZlbiBOb2RlIGlzIHVubW91bnRlZCFcblxuLSBBcmUgeW91IHVzaW5nIGEgY3VzdG9tIHRhcmdldCB0aGF0IGlzbid0IG1vdW50ZWQ/XG4tIERvZXMgeW91ciBkb2N1bWVudCBub3QgaGF2ZSBhIHZhbGlkIGhlYWQgZWxlbWVudD9cbi0gSGF2ZSB5b3UgYWNjaWRlbnRhbGx5IHJlbW92ZWQgYSBzdHlsZSB0YWcgbWFudWFsbHk/XG5cbiIsIDc6ICdUaGVtZVByb3ZpZGVyOiBQbGVhc2UgcmV0dXJuIGFuIG9iamVjdCBmcm9tIHlvdXIgInRoZW1lIiBwcm9wIGZ1bmN0aW9uLCBlLmcuXG5cbmBgYGpzXG50aGVtZT17KCkgPT4gKHt9KX1cbmBgYFxuXG4nLCA4OiAnVGhlbWVQcm92aWRlcjogUGxlYXNlIG1ha2UgeW91ciAidGhlbWUiIHByb3AgYW4gb2JqZWN0LlxuXG4nLCA5OiAiTWlzc2luZyBkb2N1bWVudCBgPGhlYWQ+YFxuXG4iLCAxMDogIkNhbm5vdCBmaW5kIGEgU3R5bGVTaGVldCBpbnN0YW5jZS4gVXN1YWxseSB0aGlzIGhhcHBlbnMgaWYgdGhlcmUgYXJlIG11bHRpcGxlIGNvcGllcyBvZiBzdHlsZWQtY29tcG9uZW50cyBsb2FkZWQgYXQgb25jZS4gQ2hlY2sgb3V0IHRoaXMgaXNzdWUgZm9yIGhvdyB0byB0cm91Ymxlc2hvb3QgYW5kIGZpeCB0aGUgY29tbW9uIGNhc2VzIHdoZXJlIHRoaXMgc2l0dWF0aW9uIGNhbiBoYXBwZW46IGh0dHBzOi8vZ2l0aHViLmNvbS9zdHlsZWQtY29tcG9uZW50cy9zdHlsZWQtY29tcG9uZW50cy9pc3N1ZXMvMTk0MSNpc3N1ZWNvbW1lbnQtNDE3ODYyMDIxXG5cbiIsIDExOiAiX1RoaXMgZXJyb3Igd2FzIHJlcGxhY2VkIHdpdGggYSBkZXYtdGltZSB3YXJuaW5nLCBpdCB3aWxsIGJlIGRlbGV0ZWQgZm9yIHY0IGZpbmFsLl8gW2NyZWF0ZUdsb2JhbFN0eWxlXSByZWNlaXZlZCBjaGlsZHJlbiB3aGljaCB3aWxsIG5vdCBiZSByZW5kZXJlZC4gUGxlYXNlIHVzZSB0aGUgY29tcG9uZW50IHdpdGhvdXQgcGFzc2luZyBjaGlsZHJlbiBlbGVtZW50cy5cblxuIiwgMTI6ICJJdCBzZWVtcyB5b3UgYXJlIGludGVycG9sYXRpbmcgYSBrZXlmcmFtZSBkZWNsYXJhdGlvbiAoJXMpIGludG8gYW4gdW50YWdnZWQgc3RyaW5nLiBUaGlzIHdhcyBzdXBwb3J0ZWQgaW4gc3R5bGVkLWNvbXBvbmVudHMgdjMsIGJ1dCBpcyBub3QgbG9uZ2VyIHN1cHBvcnRlZCBpbiB2NCBhcyBrZXlmcmFtZXMgYXJlIG5vdyBpbmplY3RlZCBvbi1kZW1hbmQuIFBsZWFzZSB3cmFwIHlvdXIgc3RyaW5nIGluIHRoZSBjc3NcXGBcXGAgaGVscGVyIHdoaWNoIGVuc3VyZXMgdGhlIHN0eWxlcyBhcmUgaW5qZWN0ZWQgY29ycmVjdGx5LiBTZWUgaHR0cHM6Ly93d3cuc3R5bGVkLWNvbXBvbmVudHMuY29tL2RvY3MvYXBpI2Nzc1xuXG4iLCAxMzogIiVzIGlzIG5vdCBhIHN0eWxlZCBjb21wb25lbnQgYW5kIGNhbm5vdCBiZSByZWZlcnJlZCB0byB2aWEgY29tcG9uZW50IHNlbGVjdG9yLiBTZWUgaHR0cHM6Ly93d3cuc3R5bGVkLWNvbXBvbmVudHMuY29tL2RvY3MvYWR2YW5jZWQjcmVmZXJyaW5nLXRvLW90aGVyLWNvbXBvbmVudHMgZm9yIG1vcmUgZGV0YWlscy5cblxuIiwgMTQ6ICdUaGVtZVByb3ZpZGVyOiAidGhlbWUiIHByb3AgaXMgcmVxdWlyZWQuXG5cbicsIDE1OiAiQSBzdHlsaXMgcGx1Z2luIGhhcyBiZWVuIHN1cHBsaWVkIHRoYXQgaXMgbm90IG5hbWVkLiBXZSBuZWVkIGEgbmFtZSBmb3IgZWFjaCBwbHVnaW4gdG8gYmUgYWJsZSB0byBwcmV2ZW50IHN0eWxpbmcgY29sbGlzaW9ucyBiZXR3ZWVuIGRpZmZlcmVudCBzdHlsaXMgY29uZmlndXJhdGlvbnMgd2l0aGluIHRoZSBzYW1lIGFwcC4gQmVmb3JlIHlvdSBwYXNzIHlvdXIgcGx1Z2luIHRvIGA8U3R5bGVTaGVldE1hbmFnZXIgc3R5bGlzUGx1Z2lucz17W119PmAsIHBsZWFzZSBtYWtlIHN1cmUgZWFjaCBwbHVnaW4gaXMgdW5pcXVlbHktbmFtZWQsIGUuZy5cblxuYGBganNcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbXBvcnRlZFBsdWdpbiwgJ25hbWUnLCB7IHZhbHVlOiAnc29tZS11bmlxdWUtbmFtZScgfSk7XG5gYGBcblxuIiwgMTY6ICJSZWFjaGVkIHRoZSBsaW1pdCBvZiBob3cgbWFueSBzdHlsZWQgY29tcG9uZW50cyBtYXkgYmUgY3JlYXRlZCBhdCBncm91cCAlcy5cbllvdSBtYXkgb25seSBjcmVhdGUgdXAgdG8gMSwwNzMsNzQxLDgyNCBjb21wb25lbnRzLiBJZiB5b3UncmUgY3JlYXRpbmcgY29tcG9uZW50cyBkeW5hbWljYWxseSxcbmFzIGZvciBpbnN0YW5jZSBpbiB5b3VyIHJlbmRlciBtZXRob2QgdGhlbiB5b3UgbWF5IGJlIHJ1bm5pbmcgaW50byB0aGlzIGxpbWl0YXRpb24uXG5cbiIsIDE3OiAiQ1NTU3R5bGVTaGVldCBjb3VsZCBub3QgYmUgZm91bmQgb24gSFRNTFN0eWxlRWxlbWVudC5cbkhhcyBzdHlsZWQtY29tcG9uZW50cycgc3R5bGUgdGFnIGJlZW4gdW5tb3VudGVkIG9yIGFsdGVyZWQgYnkgYW5vdGhlciBzY3JpcHQ/XG4iLCAxODogIlRoZW1lUHJvdmlkZXI6IFBsZWFzZSBtYWtlIHN1cmUgeW91ciB1c2VUaGVtZSBob29rIGlzIHdpdGhpbiBhIGA8VGhlbWVQcm92aWRlcj5gIiB9IDoge307CmZ1bmN0aW9uIGRlKCkgewogIGZvciAodmFyIGUgPSBbXSwgdCA9IDA7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspIGVbdF0gPSBhcmd1bWVudHNbdF07CiAgZm9yICh2YXIgbiA9IGVbMF0sIG8yID0gW10sIHIyID0gMSwgczIgPSBlLmxlbmd0aDsgcjIgPCBzMjsgcjIgKz0gMSkgbzIucHVzaChlW3IyXSk7CiAgcmV0dXJuIG8yLmZvckVhY2goZnVuY3Rpb24oZTIpIHsKICAgIG4gPSBuLnJlcGxhY2UoLyVbYS16XS8sIGUyKTsKICB9KSwgbjsKfQpmdW5jdGlvbiBoZSh0KSB7CiAgZm9yICh2YXIgbiA9IFtdLCBvMiA9IDE7IG8yIDwgYXJndW1lbnRzLmxlbmd0aDsgbzIrKykgbltvMiAtIDFdID0gYXJndW1lbnRzW28yXTsKICByZXR1cm4gZmFsc2UgPyBuZXcgRXJyb3IoIkFuIGVycm9yIG9jY3VycmVkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3N0eWxlZC1jb21wb25lbnRzL3N0eWxlZC1jb21wb25lbnRzL2Jsb2IvbWFpbi9wYWNrYWdlcy9zdHlsZWQtY29tcG9uZW50cy9zcmMvdXRpbHMvZXJyb3JzLm1kIyIuY29uY2F0KHQsICIgZm9yIG1vcmUgaW5mb3JtYXRpb24uIikuY29uY2F0KG4ubGVuZ3RoID4gMCA/ICIgQXJnczogIi5jb25jYXQobi5qb2luKCIsICIpKSA6ICIiKSkgOiBuZXcgRXJyb3IoZGUuYXBwbHkodm9pZCAwLCBfX3NwcmVhZEFycmF5KFtwZVt0XV0sIG4sIGZhbHNlKSkudHJpbSgpKTsKfQp2YXIgZmUgPSAoZnVuY3Rpb24oKSB7CiAgZnVuY3Rpb24gZShlMikgewogICAgdGhpcy5ncm91cFNpemVzID0gbmV3IFVpbnQzMkFycmF5KDUxMiksIHRoaXMubGVuZ3RoID0gNTEyLCB0aGlzLnRhZyA9IGUyOwogIH0KICByZXR1cm4gZS5wcm90b3R5cGUuaW5kZXhPZkdyb3VwID0gZnVuY3Rpb24oZTIpIHsKICAgIGZvciAodmFyIHQgPSAwLCBuID0gMDsgbiA8IGUyOyBuKyspIHQgKz0gdGhpcy5ncm91cFNpemVzW25dOwogICAgcmV0dXJuIHQ7CiAgfSwgZS5wcm90b3R5cGUuaW5zZXJ0UnVsZXMgPSBmdW5jdGlvbihlMiwgdCkgewogICAgaWYgKGUyID49IHRoaXMuZ3JvdXBTaXplcy5sZW5ndGgpIHsKICAgICAgZm9yICh2YXIgbiA9IHRoaXMuZ3JvdXBTaXplcywgbzIgPSBuLmxlbmd0aCwgcjIgPSBvMjsgZTIgPj0gcjI7ICkgaWYgKChyMiA8PD0gMSkgPCAwKSB0aHJvdyBoZSgxNiwgIiIuY29uY2F0KGUyKSk7CiAgICAgIHRoaXMuZ3JvdXBTaXplcyA9IG5ldyBVaW50MzJBcnJheShyMiksIHRoaXMuZ3JvdXBTaXplcy5zZXQobiksIHRoaXMubGVuZ3RoID0gcjI7CiAgICAgIGZvciAodmFyIHMyID0gbzI7IHMyIDwgcjI7IHMyKyspIHRoaXMuZ3JvdXBTaXplc1tzMl0gPSAwOwogICAgfQogICAgZm9yICh2YXIgaTIgPSB0aGlzLmluZGV4T2ZHcm91cChlMiArIDEpLCBhMiA9IChzMiA9IDAsIHQubGVuZ3RoKTsgczIgPCBhMjsgczIrKykgdGhpcy50YWcuaW5zZXJ0UnVsZShpMiwgdFtzMl0pICYmICh0aGlzLmdyb3VwU2l6ZXNbZTJdKyssIGkyKyspOwogIH0sIGUucHJvdG90eXBlLmNsZWFyR3JvdXAgPSBmdW5jdGlvbihlMikgewogICAgaWYgKGUyIDwgdGhpcy5sZW5ndGgpIHsKICAgICAgdmFyIHQgPSB0aGlzLmdyb3VwU2l6ZXNbZTJdLCBuID0gdGhpcy5pbmRleE9mR3JvdXAoZTIpLCBvMiA9IG4gKyB0OwogICAgICB0aGlzLmdyb3VwU2l6ZXNbZTJdID0gMDsKICAgICAgZm9yICh2YXIgcjIgPSBuOyByMiA8IG8yOyByMisrKSB0aGlzLnRhZy5kZWxldGVSdWxlKG4pOwogICAgfQogIH0sIGUucHJvdG90eXBlLmdldEdyb3VwID0gZnVuY3Rpb24oZTIpIHsKICAgIHZhciB0ID0gIiI7CiAgICBpZiAoZTIgPj0gdGhpcy5sZW5ndGggfHwgMCA9PT0gdGhpcy5ncm91cFNpemVzW2UyXSkgcmV0dXJuIHQ7CiAgICBmb3IgKHZhciBuID0gdGhpcy5ncm91cFNpemVzW2UyXSwgbzIgPSB0aGlzLmluZGV4T2ZHcm91cChlMiksIHIyID0gbzIgKyBuLCBzMiA9IG8yOyBzMiA8IHIyOyBzMisrKSB0ICs9ICIiLmNvbmNhdCh0aGlzLnRhZy5nZXRSdWxlKHMyKSkuY29uY2F0KGcpOwogICAgcmV0dXJuIHQ7CiAgfSwgZTsKfSkoKTsKdmFyIG1lID0gMSA8PCAzMDsKdmFyIHllID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKdmFyIHZlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKdmFyIGdlID0gMTsKdmFyIFNlID0gZnVuY3Rpb24oZSkgewogIGlmICh5ZS5oYXMoZSkpIHJldHVybiB5ZS5nZXQoZSk7CiAgZm9yICg7IHZlLmhhcyhnZSk7ICkgZ2UrKzsKICB2YXIgdCA9IGdlKys7CiAgaWYgKCgwIHwgdCkgPCAwIHx8IHQgPiBtZSkgdGhyb3cgaGUoMTYsICIiLmNvbmNhdCh0KSk7CiAgcmV0dXJuIHllLnNldChlLCB0KSwgdmUuc2V0KHQsIGUpLCB0Owp9Owp2YXIgd2UgPSBmdW5jdGlvbihlLCB0KSB7CiAgZ2UgPSB0ICsgMSwgeWUuc2V0KGUsIHQpLCB2ZS5zZXQodCwgZSk7Cn07CnZhciBiZSA9ICJzdHlsZVsiLmNvbmNhdChmLCAiXVsiKS5jb25jYXQoeSwgJz0iJykuY29uY2F0KHYsICciXScpOwp2YXIgRWUgPSBuZXcgUmVnRXhwKCJeIi5jb25jYXQoZiwgJ1xcLmcoXFxkKylcXFtpZD0iKFtcXHdcXGQtXSspIlxcXS4qPyIoW14iXSopJykpOwp2YXIgTmUgPSBmdW5jdGlvbihlLCB0LCBuKSB7CiAgZm9yICh2YXIgbzIsIHIyID0gbi5zcGxpdCgiLCIpLCBzMiA9IDAsIGkyID0gcjIubGVuZ3RoOyBzMiA8IGkyOyBzMisrKSAobzIgPSByMltzMl0pICYmIGUucmVnaXN0ZXJOYW1lKHQsIG8yKTsKfTsKdmFyIFBlID0gZnVuY3Rpb24oZSwgdCkgewogIGZvciAodmFyIG4sIG8yID0gKG51bGwgIT09IChuID0gdC50ZXh0Q29udGVudCkgJiYgdm9pZCAwICE9PSBuID8gbiA6ICIiKS5zcGxpdChnKSwgcjIgPSBbXSwgczIgPSAwLCBpMiA9IG8yLmxlbmd0aDsgczIgPCBpMjsgczIrKykgewogICAgdmFyIGEyID0gbzJbczJdLnRyaW0oKTsKICAgIGlmIChhMikgewogICAgICB2YXIgYzIgPSBhMi5tYXRjaChFZSk7CiAgICAgIGlmIChjMikgewogICAgICAgIHZhciBsMiA9IDAgfCBwYXJzZUludChjMlsxXSwgMTApLCB1MiA9IGMyWzJdOwogICAgICAgIDAgIT09IGwyICYmICh3ZSh1MiwgbDIpLCBOZShlLCB1MiwgYzJbM10pLCBlLmdldFRhZygpLmluc2VydFJ1bGVzKGwyLCByMikpLCByMi5sZW5ndGggPSAwOwogICAgICB9IGVsc2UgcjIucHVzaChhMik7CiAgICB9CiAgfQp9Owp2YXIgX2UgPSBmdW5jdGlvbihlKSB7CiAgZm9yICh2YXIgdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYmUpLCBuID0gMCwgbzIgPSB0Lmxlbmd0aDsgbiA8IG8yOyBuKyspIHsKICAgIHZhciByMiA9IHRbbl07CiAgICByMiAmJiByMi5nZXRBdHRyaWJ1dGUoZikgIT09IG0gJiYgKFBlKGUsIHIyKSwgcjIucGFyZW50Tm9kZSAmJiByMi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHIyKSk7CiAgfQp9OwpmdW5jdGlvbiBDZSgpIHsKICByZXR1cm4gInVuZGVmaW5lZCIgIT0gdHlwZW9mIF9fd2VicGFja19ub25jZV9fID8gX193ZWJwYWNrX25vbmNlX18gOiBudWxsOwp9CnZhciBJZSA9IGZ1bmN0aW9uKGUpIHsKICB2YXIgdCA9IGRvY3VtZW50LmhlYWQsIG4gPSBlIHx8IHQsIG8yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKSwgcjIgPSAoZnVuY3Rpb24oZTIpIHsKICAgIHZhciB0MiA9IEFycmF5LmZyb20oZTIucXVlcnlTZWxlY3RvckFsbCgic3R5bGVbIi5jb25jYXQoZiwgIl0iKSkpOwogICAgcmV0dXJuIHQyW3QyLmxlbmd0aCAtIDFdOwogIH0pKG4pLCBzMiA9IHZvaWQgMCAhPT0gcjIgPyByMi5uZXh0U2libGluZyA6IG51bGw7CiAgbzIuc2V0QXR0cmlidXRlKGYsIG0pLCBvMi5zZXRBdHRyaWJ1dGUoeSwgdik7CiAgdmFyIGkyID0gQ2UoKTsKICByZXR1cm4gaTIgJiYgbzIuc2V0QXR0cmlidXRlKCJub25jZSIsIGkyKSwgbi5pbnNlcnRCZWZvcmUobzIsIHMyKSwgbzI7Cn07CnZhciBBZSA9IChmdW5jdGlvbigpIHsKICBmdW5jdGlvbiBlKGUyKSB7CiAgICB0aGlzLmVsZW1lbnQgPSBJZShlMiksIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIikpLCB0aGlzLnNoZWV0ID0gKGZ1bmN0aW9uKGUzKSB7CiAgICAgIGlmIChlMy5zaGVldCkgcmV0dXJuIGUzLnNoZWV0OwogICAgICBmb3IgKHZhciB0ID0gZG9jdW1lbnQuc3R5bGVTaGVldHMsIG4gPSAwLCBvMiA9IHQubGVuZ3RoOyBuIDwgbzI7IG4rKykgewogICAgICAgIHZhciByMiA9IHRbbl07CiAgICAgICAgaWYgKHIyLm93bmVyTm9kZSA9PT0gZTMpIHJldHVybiByMjsKICAgICAgfQogICAgICB0aHJvdyBoZSgxNyk7CiAgICB9KSh0aGlzLmVsZW1lbnQpLCB0aGlzLmxlbmd0aCA9IDA7CiAgfQogIHJldHVybiBlLnByb3RvdHlwZS5pbnNlcnRSdWxlID0gZnVuY3Rpb24oZTIsIHQpIHsKICAgIHRyeSB7CiAgICAgIHJldHVybiB0aGlzLnNoZWV0Lmluc2VydFJ1bGUodCwgZTIpLCB0aGlzLmxlbmd0aCsrLCB0cnVlOwogICAgfSBjYXRjaCAoZTMpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0sIGUucHJvdG90eXBlLmRlbGV0ZVJ1bGUgPSBmdW5jdGlvbihlMikgewogICAgdGhpcy5zaGVldC5kZWxldGVSdWxlKGUyKSwgdGhpcy5sZW5ndGgtLTsKICB9LCBlLnByb3RvdHlwZS5nZXRSdWxlID0gZnVuY3Rpb24oZTIpIHsKICAgIHZhciB0ID0gdGhpcy5zaGVldC5jc3NSdWxlc1tlMl07CiAgICByZXR1cm4gdCAmJiB0LmNzc1RleHQgPyB0LmNzc1RleHQgOiAiIjsKICB9LCBlOwp9KSgpOwp2YXIgT2UgPSAoZnVuY3Rpb24oKSB7CiAgZnVuY3Rpb24gZShlMikgewogICAgdGhpcy5lbGVtZW50ID0gSWUoZTIpLCB0aGlzLm5vZGVzID0gdGhpcy5lbGVtZW50LmNoaWxkTm9kZXMsIHRoaXMubGVuZ3RoID0gMDsKICB9CiAgcmV0dXJuIGUucHJvdG90eXBlLmluc2VydFJ1bGUgPSBmdW5jdGlvbihlMiwgdCkgewogICAgaWYgKGUyIDw9IHRoaXMubGVuZ3RoICYmIGUyID49IDApIHsKICAgICAgdmFyIG4gPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0KTsKICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5pbnNlcnRCZWZvcmUobiwgdGhpcy5ub2Rlc1tlMl0gfHwgbnVsbCksIHRoaXMubGVuZ3RoKyssIHRydWU7CiAgICB9CiAgICByZXR1cm4gZmFsc2U7CiAgfSwgZS5wcm90b3R5cGUuZGVsZXRlUnVsZSA9IGZ1bmN0aW9uKGUyKSB7CiAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5ub2Rlc1tlMl0pLCB0aGlzLmxlbmd0aC0tOwogIH0sIGUucHJvdG90eXBlLmdldFJ1bGUgPSBmdW5jdGlvbihlMikgewogICAgcmV0dXJuIGUyIDwgdGhpcy5sZW5ndGggPyB0aGlzLm5vZGVzW2UyXS50ZXh0Q29udGVudCA6ICIiOwogIH0sIGU7Cn0pKCk7CnZhciBEZSA9IChmdW5jdGlvbigpIHsKICBmdW5jdGlvbiBlKGUyKSB7CiAgICB0aGlzLnJ1bGVzID0gW10sIHRoaXMubGVuZ3RoID0gMDsKICB9CiAgcmV0dXJuIGUucHJvdG90eXBlLmluc2VydFJ1bGUgPSBmdW5jdGlvbihlMiwgdCkgewogICAgcmV0dXJuIGUyIDw9IHRoaXMubGVuZ3RoICYmICh0aGlzLnJ1bGVzLnNwbGljZShlMiwgMCwgdCksIHRoaXMubGVuZ3RoKyssIHRydWUpOwogIH0sIGUucHJvdG90eXBlLmRlbGV0ZVJ1bGUgPSBmdW5jdGlvbihlMikgewogICAgdGhpcy5ydWxlcy5zcGxpY2UoZTIsIDEpLCB0aGlzLmxlbmd0aC0tOwogIH0sIGUucHJvdG90eXBlLmdldFJ1bGUgPSBmdW5jdGlvbihlMikgewogICAgcmV0dXJuIGUyIDwgdGhpcy5sZW5ndGggPyB0aGlzLnJ1bGVzW2UyXSA6ICIiOwogIH0sIGU7Cn0pKCk7CnZhciBSZSA9IFM7CnZhciBUZSA9IHsgaXNTZXJ2ZXI6ICFTLCB1c2VDU1NPTUluamVjdGlvbjogIXcgfTsKdmFyIGtlID0gKGZ1bmN0aW9uKCkgewogIGZ1bmN0aW9uIGUoZTIsIG4sIG8yKSB7CiAgICB2b2lkIDAgPT09IGUyICYmIChlMiA9IEMpLCB2b2lkIDAgPT09IG4gJiYgKG4gPSB7fSk7CiAgICB2YXIgcjIgPSB0aGlzOwogICAgdGhpcy5vcHRpb25zID0gX19hc3NpZ24oX19hc3NpZ24oe30sIFRlKSwgZTIpLCB0aGlzLmdzID0gbiwgdGhpcy5uYW1lcyA9IG5ldyBNYXAobzIpLCB0aGlzLnNlcnZlciA9ICEhZTIuaXNTZXJ2ZXIsICF0aGlzLnNlcnZlciAmJiBTICYmIFJlICYmIChSZSA9IGZhbHNlLCBfZSh0aGlzKSksIHVlKHRoaXMsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gKGZ1bmN0aW9uKGUzKSB7CiAgICAgICAgZm9yICh2YXIgdCA9IGUzLmdldFRhZygpLCBuMiA9IHQubGVuZ3RoLCBvMyA9ICIiLCByMyA9IGZ1bmN0aW9uKG4zKSB7CiAgICAgICAgICB2YXIgcjQgPSAoZnVuY3Rpb24oZTQpIHsKICAgICAgICAgICAgcmV0dXJuIHZlLmdldChlNCk7CiAgICAgICAgICB9KShuMyk7CiAgICAgICAgICBpZiAodm9pZCAwID09PSByNCkgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICB2YXIgczMgPSBlMy5uYW1lcy5nZXQocjQpLCBpMiA9IHQuZ2V0R3JvdXAobjMpOwogICAgICAgICAgaWYgKHZvaWQgMCA9PT0gczMgfHwgIXMzLnNpemUgfHwgMCA9PT0gaTIubGVuZ3RoKSByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgIHZhciBhMiA9ICIiLmNvbmNhdChmLCAiLmciKS5jb25jYXQobjMsICdbaWQ9IicpLmNvbmNhdChyNCwgJyJdJyksIGMyID0gIiI7CiAgICAgICAgICB2b2lkIDAgIT09IHMzICYmIHMzLmZvckVhY2goZnVuY3Rpb24oZTQpIHsKICAgICAgICAgICAgZTQubGVuZ3RoID4gMCAmJiAoYzIgKz0gIiIuY29uY2F0KGU0LCAiLCIpKTsKICAgICAgICAgIH0pLCBvMyArPSAiIi5jb25jYXQoaTIpLmNvbmNhdChhMiwgJ3tjb250ZW50OiInKS5jb25jYXQoYzIsICcifScpLmNvbmNhdChnKTsKICAgICAgICB9LCBzMiA9IDA7IHMyIDwgbjI7IHMyKyspIHIzKHMyKTsKICAgICAgICByZXR1cm4gbzM7CiAgICAgIH0pKHIyKTsKICAgIH0pOwogIH0KICByZXR1cm4gZS5yZWdpc3RlcklkID0gZnVuY3Rpb24oZTIpIHsKICAgIHJldHVybiBTZShlMik7CiAgfSwgZS5wcm90b3R5cGUucmVoeWRyYXRlID0gZnVuY3Rpb24oKSB7CiAgICAhdGhpcy5zZXJ2ZXIgJiYgUyAmJiBfZSh0aGlzKTsKICB9LCBlLnByb3RvdHlwZS5yZWNvbnN0cnVjdFdpdGhPcHRpb25zID0gZnVuY3Rpb24obiwgbzIpIHsKICAgIHJldHVybiB2b2lkIDAgPT09IG8yICYmIChvMiA9IHRydWUpLCBuZXcgZShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5vcHRpb25zKSwgbiksIHRoaXMuZ3MsIG8yICYmIHRoaXMubmFtZXMgfHwgdm9pZCAwKTsKICB9LCBlLnByb3RvdHlwZS5hbGxvY2F0ZUdTSW5zdGFuY2UgPSBmdW5jdGlvbihlMikgewogICAgcmV0dXJuIHRoaXMuZ3NbZTJdID0gKHRoaXMuZ3NbZTJdIHx8IDApICsgMTsKICB9LCBlLnByb3RvdHlwZS5nZXRUYWcgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLnRhZyB8fCAodGhpcy50YWcgPSAoZTIgPSAoZnVuY3Rpb24oZTMpIHsKICAgICAgdmFyIHQgPSBlMy51c2VDU1NPTUluamVjdGlvbiwgbiA9IGUzLnRhcmdldDsKICAgICAgcmV0dXJuIGUzLmlzU2VydmVyID8gbmV3IERlKG4pIDogdCA/IG5ldyBBZShuKSA6IG5ldyBPZShuKTsKICAgIH0pKHRoaXMub3B0aW9ucyksIG5ldyBmZShlMikpKTsKICAgIHZhciBlMjsKICB9LCBlLnByb3RvdHlwZS5oYXNOYW1lRm9ySWQgPSBmdW5jdGlvbihlMiwgdCkgewogICAgcmV0dXJuIHRoaXMubmFtZXMuaGFzKGUyKSAmJiB0aGlzLm5hbWVzLmdldChlMikuaGFzKHQpOwogIH0sIGUucHJvdG90eXBlLnJlZ2lzdGVyTmFtZSA9IGZ1bmN0aW9uKGUyLCB0KSB7CiAgICBpZiAoU2UoZTIpLCB0aGlzLm5hbWVzLmhhcyhlMikpIHRoaXMubmFtZXMuZ2V0KGUyKS5hZGQodCk7CiAgICBlbHNlIHsKICAgICAgdmFyIG4gPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogICAgICBuLmFkZCh0KSwgdGhpcy5uYW1lcy5zZXQoZTIsIG4pOwogICAgfQogIH0sIGUucHJvdG90eXBlLmluc2VydFJ1bGVzID0gZnVuY3Rpb24oZTIsIHQsIG4pIHsKICAgIHRoaXMucmVnaXN0ZXJOYW1lKGUyLCB0KSwgdGhpcy5nZXRUYWcoKS5pbnNlcnRSdWxlcyhTZShlMiksIG4pOwogIH0sIGUucHJvdG90eXBlLmNsZWFyTmFtZXMgPSBmdW5jdGlvbihlMikgewogICAgdGhpcy5uYW1lcy5oYXMoZTIpICYmIHRoaXMubmFtZXMuZ2V0KGUyKS5jbGVhcigpOwogIH0sIGUucHJvdG90eXBlLmNsZWFyUnVsZXMgPSBmdW5jdGlvbihlMikgewogICAgdGhpcy5nZXRUYWcoKS5jbGVhckdyb3VwKFNlKGUyKSksIHRoaXMuY2xlYXJOYW1lcyhlMik7CiAgfSwgZS5wcm90b3R5cGUuY2xlYXJUYWcgPSBmdW5jdGlvbigpIHsKICAgIHRoaXMudGFnID0gdm9pZCAwOwogIH0sIGU7Cn0pKCk7CnZhciBqZSA9IC8mL2c7CnZhciB4ZSA9IC9eXHMqXC9cLy4qJC9nbTsKZnVuY3Rpb24gVmUoZSwgdCkgewogIHJldHVybiBlLm1hcChmdW5jdGlvbihlMikgewogICAgcmV0dXJuICJydWxlIiA9PT0gZTIudHlwZSAmJiAoZTIudmFsdWUgPSAiIi5jb25jYXQodCwgIiAiKS5jb25jYXQoZTIudmFsdWUpLCBlMi52YWx1ZSA9IGUyLnZhbHVlLnJlcGxhY2VBbGwoIiwiLCAiLCIuY29uY2F0KHQsICIgIikpLCBlMi5wcm9wcyA9IGUyLnByb3BzLm1hcChmdW5jdGlvbihlMykgewogICAgICByZXR1cm4gIiIuY29uY2F0KHQsICIgIikuY29uY2F0KGUzKTsKICAgIH0pKSwgQXJyYXkuaXNBcnJheShlMi5jaGlsZHJlbikgJiYgIkBrZXlmcmFtZXMiICE9PSBlMi50eXBlICYmIChlMi5jaGlsZHJlbiA9IFZlKGUyLmNoaWxkcmVuLCB0KSksIGUyOwogIH0pOwp9CmZ1bmN0aW9uIEZlKGUpIHsKICB2YXIgdCwgbiwgbzIsIHIyID0gdm9pZCAwID09PSBlID8gQyA6IGUsIHMyID0gcjIub3B0aW9ucywgaTIgPSB2b2lkIDAgPT09IHMyID8gQyA6IHMyLCBhMiA9IHIyLnBsdWdpbnMsIGMyID0gdm9pZCAwID09PSBhMiA/IF8gOiBhMiwgbDIgPSBmdW5jdGlvbihlMiwgbzMsIHIzKSB7CiAgICByZXR1cm4gcjMuc3RhcnRzV2l0aChuKSAmJiByMy5lbmRzV2l0aChuKSAmJiByMy5yZXBsYWNlQWxsKG4sICIiKS5sZW5ndGggPiAwID8gIi4iLmNvbmNhdCh0KSA6IGUyOwogIH0sIHUyID0gYzIuc2xpY2UoKTsKICB1Mi5wdXNoKGZ1bmN0aW9uKGUyKSB7CiAgICBlMi50eXBlID09PSBSVUxFU0VUICYmIGUyLnZhbHVlLmluY2x1ZGVzKCImIikgJiYgKGUyLnByb3BzWzBdID0gZTIucHJvcHNbMF0ucmVwbGFjZShqZSwgbikucmVwbGFjZShvMiwgbDIpKTsKICB9KSwgaTIucHJlZml4ICYmIHUyLnB1c2gocHJlZml4ZXIpLCB1Mi5wdXNoKHN0cmluZ2lmeSk7CiAgdmFyIHAyID0gZnVuY3Rpb24oZTIsIHIzLCBzMywgYTMpIHsKICAgIHZvaWQgMCA9PT0gcjMgJiYgKHIzID0gIiIpLCB2b2lkIDAgPT09IHMzICYmIChzMyA9ICIiKSwgdm9pZCAwID09PSBhMyAmJiAoYTMgPSAiJiIpLCB0ID0gYTMsIG4gPSByMywgbzIgPSBuZXcgUmVnRXhwKCJcXCIuY29uY2F0KG4sICJcXGIiKSwgImciKTsKICAgIHZhciBjMyA9IGUyLnJlcGxhY2UoeGUsICIiKSwgbDMgPSBjb21waWxlKHMzIHx8IHIzID8gIiIuY29uY2F0KHMzLCAiICIpLmNvbmNhdChyMywgIiB7ICIpLmNvbmNhdChjMywgIiB9IikgOiBjMyk7CiAgICBpMi5uYW1lc3BhY2UgJiYgKGwzID0gVmUobDMsIGkyLm5hbWVzcGFjZSkpOwogICAgdmFyIHAzID0gW107CiAgICByZXR1cm4gc2VyaWFsaXplKGwzLCBtaWRkbGV3YXJlKHUyLmNvbmNhdChydWxlc2hlZXQoZnVuY3Rpb24oZTMpIHsKICAgICAgcmV0dXJuIHAzLnB1c2goZTMpOwogICAgfSkpKSksIHAzOwogIH07CiAgcmV0dXJuIHAyLmhhc2ggPSBjMi5sZW5ndGggPyBjMi5yZWR1Y2UoZnVuY3Rpb24oZTIsIHQyKSB7CiAgICByZXR1cm4gdDIubmFtZSB8fCBoZSgxNSksIE0oZTIsIHQyLm5hbWUpOwogIH0sIEYpLnRvU3RyaW5nKCkgOiAiIiwgcDI7Cn0KdmFyIE1lID0gbmV3IGtlKCk7CnZhciB6ZSA9IEZlKCk7CnZhciAkZSA9IGltcG9ydF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUNvbnRleHQoeyBzaG91bGRGb3J3YXJkUHJvcDogdm9pZCAwLCBzdHlsZVNoZWV0OiBNZSwgc3R5bGlzOiB6ZSB9KTsKdmFyIEJlID0gJGUuQ29uc3VtZXI7CnZhciBMZSA9IGltcG9ydF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUNvbnRleHQodm9pZCAwKTsKZnVuY3Rpb24gR2UoKSB7CiAgcmV0dXJuICgwLCBpbXBvcnRfcmVhY3QudXNlQ29udGV4dCkoJGUpOwp9CmZ1bmN0aW9uIFllKGUpIHsKICB2YXIgdCA9ICgwLCBpbXBvcnRfcmVhY3QudXNlU3RhdGUpKGUuc3R5bGlzUGx1Z2lucyksIG4gPSB0WzBdLCByMiA9IHRbMV0sIGMyID0gR2UoKS5zdHlsZVNoZWV0LCBsMiA9ICgwLCBpbXBvcnRfcmVhY3QudXNlTWVtbykoZnVuY3Rpb24oKSB7CiAgICB2YXIgdDIgPSBjMjsKICAgIHJldHVybiBlLnNoZWV0ID8gdDIgPSBlLnNoZWV0IDogZS50YXJnZXQgJiYgKHQyID0gdDIucmVjb25zdHJ1Y3RXaXRoT3B0aW9ucyh7IHRhcmdldDogZS50YXJnZXQgfSwgZmFsc2UpKSwgZS5kaXNhYmxlQ1NTT01JbmplY3Rpb24gJiYgKHQyID0gdDIucmVjb25zdHJ1Y3RXaXRoT3B0aW9ucyh7IHVzZUNTU09NSW5qZWN0aW9uOiBmYWxzZSB9KSksIHQyOwogIH0sIFtlLmRpc2FibGVDU1NPTUluamVjdGlvbiwgZS5zaGVldCwgZS50YXJnZXQsIGMyXSksIHUyID0gKDAsIGltcG9ydF9yZWFjdC51c2VNZW1vKShmdW5jdGlvbigpIHsKICAgIHJldHVybiBGZSh7IG9wdGlvbnM6IHsgbmFtZXNwYWNlOiBlLm5hbWVzcGFjZSwgcHJlZml4OiBlLmVuYWJsZVZlbmRvclByZWZpeGVzIH0sIHBsdWdpbnM6IG4gfSk7CiAgfSwgW2UuZW5hYmxlVmVuZG9yUHJlZml4ZXMsIGUubmFtZXNwYWNlLCBuXSk7CiAgKDAsIGltcG9ydF9yZWFjdC51c2VFZmZlY3QpKGZ1bmN0aW9uKCkgewogICAgKDAsIGltcG9ydF9zaGFsbG93ZXF1YWwuZGVmYXVsdCkobiwgZS5zdHlsaXNQbHVnaW5zKSB8fCByMihlLnN0eWxpc1BsdWdpbnMpOwogIH0sIFtlLnN0eWxpc1BsdWdpbnNdKTsKICB2YXIgZCA9ICgwLCBpbXBvcnRfcmVhY3QudXNlTWVtbykoZnVuY3Rpb24oKSB7CiAgICByZXR1cm4geyBzaG91bGRGb3J3YXJkUHJvcDogZS5zaG91bGRGb3J3YXJkUHJvcCwgc3R5bGVTaGVldDogbDIsIHN0eWxpczogdTIgfTsKICB9LCBbZS5zaG91bGRGb3J3YXJkUHJvcCwgbDIsIHUyXSk7CiAgcmV0dXJuIGltcG9ydF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJGUuUHJvdmlkZXIsIHsgdmFsdWU6IGQgfSwgaW1wb3J0X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChMZS5Qcm92aWRlciwgeyB2YWx1ZTogdTIgfSwgZS5jaGlsZHJlbikpOwp9CnZhciBXZSA9IChmdW5jdGlvbigpIHsKICBmdW5jdGlvbiBlKGUyLCB0KSB7CiAgICB2YXIgbiA9IHRoaXM7CiAgICB0aGlzLmluamVjdCA9IGZ1bmN0aW9uKGUzLCB0MikgewogICAgICB2b2lkIDAgPT09IHQyICYmICh0MiA9IHplKTsKICAgICAgdmFyIG8yID0gbi5uYW1lICsgdDIuaGFzaDsKICAgICAgZTMuaGFzTmFtZUZvcklkKG4uaWQsIG8yKSB8fCBlMy5pbnNlcnRSdWxlcyhuLmlkLCBvMiwgdDIobi5ydWxlcywgbzIsICJAa2V5ZnJhbWVzIikpOwogICAgfSwgdGhpcy5uYW1lID0gZTIsIHRoaXMuaWQgPSAic2Mta2V5ZnJhbWVzLSIuY29uY2F0KGUyKSwgdGhpcy5ydWxlcyA9IHQsIHVlKHRoaXMsIGZ1bmN0aW9uKCkgewogICAgICB0aHJvdyBoZSgxMiwgU3RyaW5nKG4ubmFtZSkpOwogICAgfSk7CiAgfQogIHJldHVybiBlLnByb3RvdHlwZS5nZXROYW1lID0gZnVuY3Rpb24oZTIpIHsKICAgIHJldHVybiB2b2lkIDAgPT09IGUyICYmIChlMiA9IHplKSwgdGhpcy5uYW1lICsgZTIuaGFzaDsKICB9LCBlOwp9KSgpOwp2YXIgcWUgPSBmdW5jdGlvbihlKSB7CiAgcmV0dXJuIGUgPj0gIkEiICYmIGUgPD0gIloiOwp9OwpmdW5jdGlvbiBIZShlKSB7CiAgZm9yICh2YXIgdCA9ICIiLCBuID0gMDsgbiA8IGUubGVuZ3RoOyBuKyspIHsKICAgIHZhciBvMiA9IGVbbl07CiAgICBpZiAoMSA9PT0gbiAmJiAiLSIgPT09IG8yICYmICItIiA9PT0gZVswXSkgcmV0dXJuIGU7CiAgICBxZShvMikgPyB0ICs9ICItIiArIG8yLnRvTG93ZXJDYXNlKCkgOiB0ICs9IG8yOwogIH0KICByZXR1cm4gdC5zdGFydHNXaXRoKCJtcy0iKSA/ICItIiArIHQgOiB0Owp9CnZhciBVZSA9IGZ1bmN0aW9uKGUpIHsKICByZXR1cm4gbnVsbCA9PSBlIHx8IGZhbHNlID09PSBlIHx8ICIiID09PSBlOwp9Owp2YXIgSmUgPSBmdW5jdGlvbih0KSB7CiAgdmFyIG4sIG8yLCByMiA9IFtdOwogIGZvciAodmFyIHMyIGluIHQpIHsKICAgIHZhciBpMiA9IHRbczJdOwogICAgdC5oYXNPd25Qcm9wZXJ0eShzMikgJiYgIVVlKGkyKSAmJiAoQXJyYXkuaXNBcnJheShpMikgJiYgaTIuaXNDc3MgfHwgcmUoaTIpID8gcjIucHVzaCgiIi5jb25jYXQoSGUoczIpLCAiOiIpLCBpMiwgIjsiKSA6IGNlKGkyKSA/IHIyLnB1c2guYXBwbHkocjIsIF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbIiIuY29uY2F0KHMyLCAiIHsiKV0sIEplKGkyKSwgZmFsc2UpLCBbIn0iXSwgZmFsc2UpKSA6IHIyLnB1c2goIiIuY29uY2F0KEhlKHMyKSwgIjogIikuY29uY2F0KChuID0gczIsIG51bGwgPT0gKG8yID0gaTIpIHx8ICJib29sZWFuIiA9PSB0eXBlb2YgbzIgfHwgIiIgPT09IG8yID8gIiIgOiAibnVtYmVyIiAhPSB0eXBlb2YgbzIgfHwgMCA9PT0gbzIgfHwgbiBpbiB1bml0bGVzc0tleXMgfHwgbi5zdGFydHNXaXRoKCItLSIpID8gU3RyaW5nKG8yKS50cmltKCkgOiAiIi5jb25jYXQobzIsICJweCIpKSwgIjsiKSkpOwogIH0KICByZXR1cm4gcjI7Cn07CmZ1bmN0aW9uIFhlKGUsIHQsIG4sIG8yKSB7CiAgaWYgKFVlKGUpKSByZXR1cm4gW107CiAgaWYgKHNlKGUpKSByZXR1cm4gWyIuIi5jb25jYXQoZS5zdHlsZWRDb21wb25lbnRJZCldOwogIGlmIChyZShlKSkgewogICAgaWYgKCFyZShzMiA9IGUpIHx8IHMyLnByb3RvdHlwZSAmJiBzMi5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudCB8fCAhdCkgcmV0dXJuIFtlXTsKICAgIHZhciByMiA9IGUodCk7CiAgICByZXR1cm4gIm9iamVjdCIgIT0gdHlwZW9mIHIyIHx8IEFycmF5LmlzQXJyYXkocjIpIHx8IHIyIGluc3RhbmNlb2YgV2UgfHwgY2UocjIpIHx8IG51bGwgPT09IHIyIHx8IGNvbnNvbGUuZXJyb3IoIiIuY29uY2F0KEIoZSksICIgaXMgbm90IGEgc3R5bGVkIGNvbXBvbmVudCBhbmQgY2Fubm90IGJlIHJlZmVycmVkIHRvIHZpYSBjb21wb25lbnQgc2VsZWN0b3IuIFNlZSBodHRwczovL3d3dy5zdHlsZWQtY29tcG9uZW50cy5jb20vZG9jcy9hZHZhbmNlZCNyZWZlcnJpbmctdG8tb3RoZXItY29tcG9uZW50cyBmb3IgbW9yZSBkZXRhaWxzLiIpKSwgWGUocjIsIHQsIG4sIG8yKTsKICB9CiAgdmFyIHMyOwogIHJldHVybiBlIGluc3RhbmNlb2YgV2UgPyBuID8gKGUuaW5qZWN0KG4sIG8yKSwgW2UuZ2V0TmFtZShvMildKSA6IFtlXSA6IGNlKGUpID8gSmUoZSkgOiBBcnJheS5pc0FycmF5KGUpID8gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShfLCBlLm1hcChmdW5jdGlvbihlMikgewogICAgcmV0dXJuIFhlKGUyLCB0LCBuLCBvMik7CiAgfSkpIDogW2UudG9TdHJpbmcoKV07Cn0KZnVuY3Rpb24gWmUoZSkgewogIGZvciAodmFyIHQgPSAwOyB0IDwgZS5sZW5ndGg7IHQgKz0gMSkgewogICAgdmFyIG4gPSBlW3RdOwogICAgaWYgKHJlKG4pICYmICFzZShuKSkgcmV0dXJuIGZhbHNlOwogIH0KICByZXR1cm4gdHJ1ZTsKfQp2YXIgS2UgPSB6KHYpOwp2YXIgUWUgPSAoZnVuY3Rpb24oKSB7CiAgZnVuY3Rpb24gZShlMiwgdCwgbikgewogICAgdGhpcy5ydWxlcyA9IGUyLCB0aGlzLnN0YXRpY1J1bGVzSWQgPSAiIiwgdGhpcy5pc1N0YXRpYyA9IGZhbHNlLCB0aGlzLmNvbXBvbmVudElkID0gdCwgdGhpcy5iYXNlSGFzaCA9IE0oS2UsIHQpLCB0aGlzLmJhc2VTdHlsZSA9IG4sIGtlLnJlZ2lzdGVySWQodCk7CiAgfQogIHJldHVybiBlLnByb3RvdHlwZS5nZW5lcmF0ZUFuZEluamVjdFN0eWxlcyA9IGZ1bmN0aW9uKGUyLCB0LCBuKSB7CiAgICB2YXIgbzIgPSB0aGlzLmJhc2VTdHlsZSA/IHRoaXMuYmFzZVN0eWxlLmdlbmVyYXRlQW5kSW5qZWN0U3R5bGVzKGUyLCB0LCBuKSA6ICIiOwogICAgaWYgKHRoaXMuaXNTdGF0aWMgJiYgIW4uaGFzaCkgaWYgKHRoaXMuc3RhdGljUnVsZXNJZCAmJiB0Lmhhc05hbWVGb3JJZCh0aGlzLmNvbXBvbmVudElkLCB0aGlzLnN0YXRpY1J1bGVzSWQpKSBvMiA9IGllKG8yLCB0aGlzLnN0YXRpY1J1bGVzSWQpOwogICAgZWxzZSB7CiAgICAgIHZhciByMiA9IGFlKFhlKHRoaXMucnVsZXMsIGUyLCB0LCBuKSksIHMyID0geChNKHRoaXMuYmFzZUhhc2gsIHIyKSA+Pj4gMCk7CiAgICAgIGlmICghdC5oYXNOYW1lRm9ySWQodGhpcy5jb21wb25lbnRJZCwgczIpKSB7CiAgICAgICAgdmFyIGkyID0gbihyMiwgIi4iLmNvbmNhdChzMiksIHZvaWQgMCwgdGhpcy5jb21wb25lbnRJZCk7CiAgICAgICAgdC5pbnNlcnRSdWxlcyh0aGlzLmNvbXBvbmVudElkLCBzMiwgaTIpOwogICAgICB9CiAgICAgIG8yID0gaWUobzIsIHMyKSwgdGhpcy5zdGF0aWNSdWxlc0lkID0gczI7CiAgICB9CiAgICBlbHNlIHsKICAgICAgZm9yICh2YXIgYTIgPSBNKHRoaXMuYmFzZUhhc2gsIG4uaGFzaCksIGMyID0gIiIsIGwyID0gMDsgbDIgPCB0aGlzLnJ1bGVzLmxlbmd0aDsgbDIrKykgewogICAgICAgIHZhciB1MiA9IHRoaXMucnVsZXNbbDJdOwogICAgICAgIGlmICgic3RyaW5nIiA9PSB0eXBlb2YgdTIpIGMyICs9IHUyLCBhMiA9IE0oYTIsIHUyKTsKICAgICAgICBlbHNlIGlmICh1MikgewogICAgICAgICAgdmFyIHAyID0gYWUoWGUodTIsIGUyLCB0LCBuKSk7CiAgICAgICAgICBhMiA9IE0oYTIsIHAyICsgbDIpLCBjMiArPSBwMjsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGMyKSB7CiAgICAgICAgdmFyIGQgPSB4KGEyID4+PiAwKTsKICAgICAgICB0Lmhhc05hbWVGb3JJZCh0aGlzLmNvbXBvbmVudElkLCBkKSB8fCB0Lmluc2VydFJ1bGVzKHRoaXMuY29tcG9uZW50SWQsIGQsIG4oYzIsICIuIi5jb25jYXQoZCksIHZvaWQgMCwgdGhpcy5jb21wb25lbnRJZCkpLCBvMiA9IGllKG8yLCBkKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIG8yOwogIH0sIGU7Cn0pKCk7CnZhciBldCA9IGltcG9ydF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUNvbnRleHQodm9pZCAwKTsKdmFyIHR0ID0gZXQuQ29uc3VtZXI7CmZ1bmN0aW9uIG50KCkgewogIHZhciBlID0gKDAsIGltcG9ydF9yZWFjdC51c2VDb250ZXh0KShldCk7CiAgaWYgKCFlKSB0aHJvdyBoZSgxOCk7CiAgcmV0dXJuIGU7Cn0KZnVuY3Rpb24gb3QoZSkgewogIHZhciBuID0gaW1wb3J0X3JlYWN0LmRlZmF1bHQudXNlQ29udGV4dChldCksIHIyID0gKDAsIGltcG9ydF9yZWFjdC51c2VNZW1vKShmdW5jdGlvbigpIHsKICAgIHJldHVybiAoZnVuY3Rpb24oZTIsIG4yKSB7CiAgICAgIGlmICghZTIpIHRocm93IGhlKDE0KTsKICAgICAgaWYgKHJlKGUyKSkgewogICAgICAgIHZhciBvMiA9IGUyKG4yKTsKICAgICAgICBpZiAobnVsbCA9PT0gbzIgfHwgQXJyYXkuaXNBcnJheShvMikgfHwgIm9iamVjdCIgIT0gdHlwZW9mIG8yKSB0aHJvdyBoZSg3KTsKICAgICAgICByZXR1cm4gbzI7CiAgICAgIH0KICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZTIpIHx8ICJvYmplY3QiICE9IHR5cGVvZiBlMikgdGhyb3cgaGUoOCk7CiAgICAgIHJldHVybiBuMiA/IF9fYXNzaWduKF9fYXNzaWduKHt9LCBuMiksIGUyKSA6IGUyOwogICAgfSkoZS50aGVtZSwgbik7CiAgfSwgW2UudGhlbWUsIG5dKTsKICByZXR1cm4gZS5jaGlsZHJlbiA/IGltcG9ydF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoZXQuUHJvdmlkZXIsIHsgdmFsdWU6IHIyIH0sIGUuY2hpbGRyZW4pIDogbnVsbDsKfQp2YXIgcnQgPSB7fTsKdmFyIHN0ID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKZnVuY3Rpb24gaXQoZSwgcjIsIHMyKSB7CiAgdmFyIGkyID0gc2UoZSksIGEyID0gZSwgYzIgPSAhTChlKSwgcDIgPSByMi5hdHRycywgZCA9IHZvaWQgMCA9PT0gcDIgPyBfIDogcDIsIGggPSByMi5jb21wb25lbnRJZCwgZjIgPSB2b2lkIDAgPT09IGggPyAoZnVuY3Rpb24oZTIsIHQpIHsKICAgIHZhciBuID0gInN0cmluZyIgIT0gdHlwZW9mIGUyID8gInNjIiA6IFIoZTIpOwogICAgcnRbbl0gPSAocnRbbl0gfHwgMCkgKyAxOwogICAgdmFyIG8yID0gIiIuY29uY2F0KG4sICItIikuY29uY2F0KCQodiArIG4gKyBydFtuXSkpOwogICAgcmV0dXJuIHQgPyAiIi5jb25jYXQodCwgIi0iKS5jb25jYXQobzIpIDogbzI7CiAgfSkocjIuZGlzcGxheU5hbWUsIHIyLnBhcmVudENvbXBvbmVudElkKSA6IGgsIG0yID0gcjIuZGlzcGxheU5hbWUsIHkyID0gdm9pZCAwID09PSBtMiA/IChmdW5jdGlvbihlMikgewogICAgcmV0dXJuIEwoZTIpID8gInN0eWxlZC4iLmNvbmNhdChlMikgOiAiU3R5bGVkKCIuY29uY2F0KEIoZTIpLCAiKSIpOwogIH0pKGUpIDogbTIsIGcyID0gcjIuZGlzcGxheU5hbWUgJiYgcjIuY29tcG9uZW50SWQgPyAiIi5jb25jYXQoUihyMi5kaXNwbGF5TmFtZSksICItIikuY29uY2F0KHIyLmNvbXBvbmVudElkKSA6IHIyLmNvbXBvbmVudElkIHx8IGYyLCBTMiA9IGkyICYmIGEyLmF0dHJzID8gYTIuYXR0cnMuY29uY2F0KGQpLmZpbHRlcihCb29sZWFuKSA6IGQsIHcyID0gcjIuc2hvdWxkRm9yd2FyZFByb3A7CiAgaWYgKGkyICYmIGEyLnNob3VsZEZvcndhcmRQcm9wKSB7CiAgICB2YXIgYjIgPSBhMi5zaG91bGRGb3J3YXJkUHJvcDsKICAgIGlmIChyMi5zaG91bGRGb3J3YXJkUHJvcCkgewogICAgICB2YXIgRTIgPSByMi5zaG91bGRGb3J3YXJkUHJvcDsKICAgICAgdzIgPSBmdW5jdGlvbihlMiwgdCkgewogICAgICAgIHJldHVybiBiMihlMiwgdCkgJiYgRTIoZTIsIHQpOwogICAgICB9OwogICAgfSBlbHNlIHcyID0gYjI7CiAgfQogIHZhciBOMiA9IG5ldyBRZShzMiwgZzIsIGkyID8gYTIuY29tcG9uZW50U3R5bGUgOiB2b2lkIDApOwogIGZ1bmN0aW9uIE8yKGUyLCByMykgewogICAgcmV0dXJuIChmdW5jdGlvbihlMywgcjQsIHMzKSB7CiAgICAgIHZhciBpMyA9IGUzLmF0dHJzLCBhMyA9IGUzLmNvbXBvbmVudFN0eWxlLCBjMyA9IGUzLmRlZmF1bHRQcm9wcywgcDMgPSBlMy5mb2xkZWRDb21wb25lbnRJZHMsIGQyID0gZTMuc3R5bGVkQ29tcG9uZW50SWQsIGgyID0gZTMudGFyZ2V0LCBmMyA9IGltcG9ydF9yZWFjdC5kZWZhdWx0LnVzZUNvbnRleHQoZXQpLCBtMyA9IEdlKCksIHkzID0gZTMuc2hvdWxkRm9yd2FyZFByb3AgfHwgbTMuc2hvdWxkRm9yd2FyZFByb3A7CiAgICAgICgwLCBpbXBvcnRfcmVhY3QudXNlRGVidWdWYWx1ZSkoZDIpOwogICAgICB2YXIgdjIgPSBJKHI0LCBmMywgYzMpIHx8IEMsIGczID0gKGZ1bmN0aW9uKGU0LCBuLCBvMikgewogICAgICAgIGZvciAodmFyIHI1LCBzNCA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBuKSwgeyBjbGFzc05hbWU6IHZvaWQgMCwgdGhlbWU6IG8yIH0pLCBpNCA9IDA7IGk0IDwgZTQubGVuZ3RoOyBpNCArPSAxKSB7CiAgICAgICAgICB2YXIgYTQgPSByZShyNSA9IGU0W2k0XSkgPyByNShzNCkgOiByNTsKICAgICAgICAgIGZvciAodmFyIGM0IGluIGE0KSBzNFtjNF0gPSAiY2xhc3NOYW1lIiA9PT0gYzQgPyBpZShzNFtjNF0sIGE0W2M0XSkgOiAic3R5bGUiID09PSBjNCA/IF9fYXNzaWduKF9fYXNzaWduKHt9LCBzNFtjNF0pLCBhNFtjNF0pIDogYTRbYzRdOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbi5jbGFzc05hbWUgJiYgKHM0LmNsYXNzTmFtZSA9IGllKHM0LmNsYXNzTmFtZSwgbi5jbGFzc05hbWUpKSwgczQ7CiAgICAgIH0pKGkzLCByNCwgdjIpLCBTMyA9IGczLmFzIHx8IGgyLCB3MyA9IHt9OwogICAgICBmb3IgKHZhciBiMyBpbiBnMykgdm9pZCAwID09PSBnM1tiM10gfHwgIiQiID09PSBiM1swXSB8fCAiYXMiID09PSBiMyB8fCAidGhlbWUiID09PSBiMyAmJiBnMy50aGVtZSA9PT0gdjIgfHwgKCJmb3J3YXJkZWRBcyIgPT09IGIzID8gdzMuYXMgPSBnMy5mb3J3YXJkZWRBcyA6IHkzICYmICF5MyhiMywgUzMpIHx8ICh3M1tiM10gPSBnM1tiM10sIHkzIHx8IGZhbHNlIHx8IGlzUHJvcFZhbGlkKGIzKSB8fCBzdC5oYXMoYjMpIHx8ICFBLmhhcyhTMykgfHwgKHN0LmFkZChiMyksIGNvbnNvbGUud2Fybignc3R5bGVkLWNvbXBvbmVudHM6IGl0IGxvb2tzIGxpa2UgYW4gdW5rbm93biBwcm9wICInLmNvbmNhdChiMywgJyIgaXMgYmVpbmcgc2VudCB0aHJvdWdoIHRvIHRoZSBET00sIHdoaWNoIHdpbGwgbGlrZWx5IHRyaWdnZXIgYSBSZWFjdCBjb25zb2xlIGVycm9yLiBJZiB5b3Ugd291bGQgbGlrZSBhdXRvbWF0aWMgZmlsdGVyaW5nIG9mIHVua25vd24gcHJvcHMsIHlvdSBjYW4gb3B0LWludG8gdGhhdCBiZWhhdmlvciB2aWEgYDxTdHlsZVNoZWV0TWFuYWdlciBzaG91bGRGb3J3YXJkUHJvcD17Li4ufT5gIChjb25uZWN0IGFuIEFQSSBsaWtlIGBAZW1vdGlvbi9pcy1wcm9wLXZhbGlkYCkgb3IgY29uc2lkZXIgdXNpbmcgdHJhbnNpZW50IHByb3BzIChgJGAgcHJlZml4IGZvciBhdXRvbWF0aWMgZmlsdGVyaW5nLiknKSkpKSk7CiAgICAgIHZhciBFMyA9IChmdW5jdGlvbihlNCwgdCkgewogICAgICAgIHZhciBuID0gR2UoKSwgbzIgPSBlNC5nZW5lcmF0ZUFuZEluamVjdFN0eWxlcyh0LCBuLnN0eWxlU2hlZXQsIG4uc3R5bGlzKTsKICAgICAgICByZXR1cm4gKDAsIGltcG9ydF9yZWFjdC51c2VEZWJ1Z1ZhbHVlKShvMiksIG8yOwogICAgICB9KShhMywgZzMpOwogICAgICBlMy53YXJuVG9vTWFueUNsYXNzZXMgJiYgZTMud2FyblRvb01hbnlDbGFzc2VzKEUzKTsKICAgICAgdmFyIE4zID0gaWUocDMsIGQyKTsKICAgICAgcmV0dXJuIEUzICYmIChOMyArPSAiICIgKyBFMyksIGczLmNsYXNzTmFtZSAmJiAoTjMgKz0gIiAiICsgZzMuY2xhc3NOYW1lKSwgdzNbTChTMykgJiYgIUEuaGFzKFMzKSA/ICJjbGFzcyIgOiAiY2xhc3NOYW1lIl0gPSBOMywgczMgJiYgKHczLnJlZiA9IHMzKSwgKDAsIGltcG9ydF9yZWFjdC5jcmVhdGVFbGVtZW50KShTMywgdzMpOwogICAgfSkoRDIsIGUyLCByMyk7CiAgfQogIE8yLmRpc3BsYXlOYW1lID0geTI7CiAgdmFyIEQyID0gaW1wb3J0X3JlYWN0LmRlZmF1bHQuZm9yd2FyZFJlZihPMik7CiAgcmV0dXJuIEQyLmF0dHJzID0gUzIsIEQyLmNvbXBvbmVudFN0eWxlID0gTjIsIEQyLmRpc3BsYXlOYW1lID0geTIsIEQyLnNob3VsZEZvcndhcmRQcm9wID0gdzIsIEQyLmZvbGRlZENvbXBvbmVudElkcyA9IGkyID8gaWUoYTIuZm9sZGVkQ29tcG9uZW50SWRzLCBhMi5zdHlsZWRDb21wb25lbnRJZCkgOiAiIiwgRDIuc3R5bGVkQ29tcG9uZW50SWQgPSBnMiwgRDIudGFyZ2V0ID0gaTIgPyBhMi50YXJnZXQgOiBlLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoRDIsICJkZWZhdWx0UHJvcHMiLCB7IGdldDogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpcy5fZm9sZGVkRGVmYXVsdFByb3BzOwogIH0sIHNldDogZnVuY3Rpb24oZTIpIHsKICAgIHRoaXMuX2ZvbGRlZERlZmF1bHRQcm9wcyA9IGkyID8gKGZ1bmN0aW9uKGUzKSB7CiAgICAgIGZvciAodmFyIHQgPSBbXSwgbiA9IDE7IG4gPCBhcmd1bWVudHMubGVuZ3RoOyBuKyspIHRbbiAtIDFdID0gYXJndW1lbnRzW25dOwogICAgICBmb3IgKHZhciBvMiA9IDAsIHIzID0gdDsgbzIgPCByMy5sZW5ndGg7IG8yKyspIGxlKGUzLCByM1tvMl0sIHRydWUpOwogICAgICByZXR1cm4gZTM7CiAgICB9KSh7fSwgYTIuZGVmYXVsdFByb3BzLCBlMikgOiBlMjsKICB9IH0pLCBQKHkyLCBnMiksIEQyLndhcm5Ub29NYW55Q2xhc3NlcyA9IC8qIEBfX1BVUkVfXyAqLyAoZnVuY3Rpb24oZTIsIHQpIHsKICAgIHZhciBuID0ge30sIG8yID0gZmFsc2U7CiAgICByZXR1cm4gZnVuY3Rpb24ocjMpIHsKICAgICAgaWYgKCFvMiAmJiAobltyM10gPSB0cnVlLCBPYmplY3Qua2V5cyhuKS5sZW5ndGggPj0gMjAwKSkgewogICAgICAgIHZhciBzMyA9IHQgPyAnIHdpdGggdGhlIGlkIG9mICInLmNvbmNhdCh0LCAnIicpIDogIiI7CiAgICAgICAgY29uc29sZS53YXJuKCJPdmVyICIuY29uY2F0KDIwMCwgIiBjbGFzc2VzIHdlcmUgZ2VuZXJhdGVkIGZvciBjb21wb25lbnQgIikuY29uY2F0KGUyKS5jb25jYXQoczMsICIuXG4iKSArICJDb25zaWRlciB1c2luZyB0aGUgYXR0cnMgbWV0aG9kLCB0b2dldGhlciB3aXRoIGEgc3R5bGUgb2JqZWN0IGZvciBmcmVxdWVudGx5IGNoYW5nZWQgc3R5bGVzLlxuRXhhbXBsZTpcbiAgY29uc3QgQ29tcG9uZW50ID0gc3R5bGVkLmRpdi5hdHRycyhwcm9wcyA9PiAoe1xuICAgIHN0eWxlOiB7XG4gICAgICBiYWNrZ3JvdW5kOiBwcm9wcy5iYWNrZ3JvdW5kLFxuICAgIH0sXG4gIH0pKWB3aWR0aDogMTAwJTtgXG5cbiAgPENvbXBvbmVudCAvPiIpLCBvMiA9IHRydWUsIG4gPSB7fTsKICAgICAgfQogICAgfTsKICB9KSh5MiwgZzIpLCB1ZShEMiwgZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gIi4iLmNvbmNhdChEMi5zdHlsZWRDb21wb25lbnRJZCk7CiAgfSksIGMyICYmIG9lKEQyLCBlLCB7IGF0dHJzOiB0cnVlLCBjb21wb25lbnRTdHlsZTogdHJ1ZSwgZGlzcGxheU5hbWU6IHRydWUsIGZvbGRlZENvbXBvbmVudElkczogdHJ1ZSwgc2hvdWxkRm9yd2FyZFByb3A6IHRydWUsIHN0eWxlZENvbXBvbmVudElkOiB0cnVlLCB0YXJnZXQ6IHRydWUgfSksIEQyOwp9CmZ1bmN0aW9uIGF0KGUsIHQpIHsKICBmb3IgKHZhciBuID0gW2VbMF1dLCBvMiA9IDAsIHIyID0gdC5sZW5ndGg7IG8yIDwgcjI7IG8yICs9IDEpIG4ucHVzaCh0W28yXSwgZVtvMiArIDFdKTsKICByZXR1cm4gbjsKfQp2YXIgY3QgPSBmdW5jdGlvbihlKSB7CiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oZSwgeyBpc0NzczogdHJ1ZSB9KTsKfTsKZnVuY3Rpb24gbHQodCkgewogIGZvciAodmFyIG4gPSBbXSwgbzIgPSAxOyBvMiA8IGFyZ3VtZW50cy5sZW5ndGg7IG8yKyspIG5bbzIgLSAxXSA9IGFyZ3VtZW50c1tvMl07CiAgaWYgKHJlKHQpIHx8IGNlKHQpKSByZXR1cm4gY3QoWGUoYXQoXywgX19zcHJlYWRBcnJheShbdF0sIG4sIHRydWUpKSkpOwogIHZhciByMiA9IHQ7CiAgcmV0dXJuIDAgPT09IG4ubGVuZ3RoICYmIDEgPT09IHIyLmxlbmd0aCAmJiAic3RyaW5nIiA9PSB0eXBlb2YgcjJbMF0gPyBYZShyMikgOiBjdChYZShhdChyMiwgbikpKTsKfQpmdW5jdGlvbiB1dChuLCBvMiwgcjIpIHsKICBpZiAodm9pZCAwID09PSByMiAmJiAocjIgPSBDKSwgIW8yKSB0aHJvdyBoZSgxLCBvMik7CiAgdmFyIHMyID0gZnVuY3Rpb24odCkgewogICAgZm9yICh2YXIgczMgPSBbXSwgaTIgPSAxOyBpMiA8IGFyZ3VtZW50cy5sZW5ndGg7IGkyKyspIHMzW2kyIC0gMV0gPSBhcmd1bWVudHNbaTJdOwogICAgcmV0dXJuIG4obzIsIHIyLCBsdC5hcHBseSh2b2lkIDAsIF9fc3ByZWFkQXJyYXkoW3RdLCBzMywgZmFsc2UpKSk7CiAgfTsKICByZXR1cm4gczIuYXR0cnMgPSBmdW5jdGlvbihlKSB7CiAgICByZXR1cm4gdXQobiwgbzIsIF9fYXNzaWduKF9fYXNzaWduKHt9LCByMiksIHsgYXR0cnM6IEFycmF5LnByb3RvdHlwZS5jb25jYXQocjIuYXR0cnMsIGUpLmZpbHRlcihCb29sZWFuKSB9KSk7CiAgfSwgczIud2l0aENvbmZpZyA9IGZ1bmN0aW9uKGUpIHsKICAgIHJldHVybiB1dChuLCBvMiwgX19hc3NpZ24oX19hc3NpZ24oe30sIHIyKSwgZSkpOwogIH0sIHMyOwp9CnZhciBwdCA9IGZ1bmN0aW9uKGUpIHsKICByZXR1cm4gdXQoaXQsIGUpOwp9Owp2YXIgZHQgPSBwdDsKQS5mb3JFYWNoKGZ1bmN0aW9uKGUpIHsKICBkdFtlXSA9IHB0KGUpOwp9KTsKdmFyIGh0ID0gKGZ1bmN0aW9uKCkgewogIGZ1bmN0aW9uIGUoZTIsIHQpIHsKICAgIHRoaXMucnVsZXMgPSBlMiwgdGhpcy5jb21wb25lbnRJZCA9IHQsIHRoaXMuaXNTdGF0aWMgPSBaZShlMiksIGtlLnJlZ2lzdGVySWQodGhpcy5jb21wb25lbnRJZCArIDEpOwogIH0KICByZXR1cm4gZS5wcm90b3R5cGUuY3JlYXRlU3R5bGVzID0gZnVuY3Rpb24oZTIsIHQsIG4sIG8yKSB7CiAgICB2YXIgcjIgPSBvMihhZShYZSh0aGlzLnJ1bGVzLCB0LCBuLCBvMikpLCAiIiksIHMyID0gdGhpcy5jb21wb25lbnRJZCArIGUyOwogICAgbi5pbnNlcnRSdWxlcyhzMiwgczIsIHIyKTsKICB9LCBlLnByb3RvdHlwZS5yZW1vdmVTdHlsZXMgPSBmdW5jdGlvbihlMiwgdCkgewogICAgdC5jbGVhclJ1bGVzKHRoaXMuY29tcG9uZW50SWQgKyBlMik7CiAgfSwgZS5wcm90b3R5cGUucmVuZGVyU3R5bGVzID0gZnVuY3Rpb24oZTIsIHQsIG4sIG8yKSB7CiAgICBlMiA+IDIgJiYga2UucmVnaXN0ZXJJZCh0aGlzLmNvbXBvbmVudElkICsgZTIpLCB0aGlzLnJlbW92ZVN0eWxlcyhlMiwgbiksIHRoaXMuY3JlYXRlU3R5bGVzKGUyLCB0LCBuLCBvMik7CiAgfSwgZTsKfSkoKTsKZnVuY3Rpb24gZnQobikgewogIGZvciAodmFyIHIyID0gW10sIHMyID0gMTsgczIgPCBhcmd1bWVudHMubGVuZ3RoOyBzMisrKSByMltzMiAtIDFdID0gYXJndW1lbnRzW3MyXTsKICB2YXIgaTIgPSBsdC5hcHBseSh2b2lkIDAsIF9fc3ByZWFkQXJyYXkoW25dLCByMiwgZmFsc2UpKSwgYTIgPSAic2MtZ2xvYmFsLSIuY29uY2F0KCQoSlNPTi5zdHJpbmdpZnkoaTIpKSksIGMyID0gbmV3IGh0KGkyLCBhMik7CiAgUChhMik7CiAgdmFyIGwyID0gZnVuY3Rpb24oZSkgewogICAgdmFyIHQgPSBHZSgpLCBuMiA9IGltcG9ydF9yZWFjdC5kZWZhdWx0LnVzZUNvbnRleHQoZXQpLCByMyA9IGltcG9ydF9yZWFjdC5kZWZhdWx0LnVzZVJlZih0LnN0eWxlU2hlZXQuYWxsb2NhdGVHU0luc3RhbmNlKGEyKSkuY3VycmVudDsKICAgIHJldHVybiBpbXBvcnRfcmVhY3QuZGVmYXVsdC5DaGlsZHJlbi5jb3VudChlLmNoaWxkcmVuKSAmJiBjb25zb2xlLndhcm4oIlRoZSBnbG9iYWwgc3R5bGUgY29tcG9uZW50ICIuY29uY2F0KGEyLCAiIHdhcyBnaXZlbiBjaGlsZCBKU1guIGNyZWF0ZUdsb2JhbFN0eWxlIGRvZXMgbm90IHJlbmRlciBjaGlsZHJlbi4iKSksIGkyLnNvbWUoZnVuY3Rpb24oZTIpIHsKICAgICAgcmV0dXJuICJzdHJpbmciID09IHR5cGVvZiBlMiAmJiAtMSAhPT0gZTIuaW5kZXhPZigiQGltcG9ydCIpOwogICAgfSkgJiYgY29uc29sZS53YXJuKCJQbGVhc2UgZG8gbm90IHVzZSBAaW1wb3J0IENTUyBzeW50YXggaW4gY3JlYXRlR2xvYmFsU3R5bGUgYXQgdGhpcyB0aW1lLCBhcyB0aGUgQ1NTT00gQVBJcyB3ZSB1c2UgaW4gcHJvZHVjdGlvbiBkbyBub3QgaGFuZGxlIGl0IHdlbGwuIEluc3RlYWQsIHdlIHJlY29tbWVuZCB1c2luZyBhIGxpYnJhcnkgc3VjaCBhcyByZWFjdC1oZWxtZXQgdG8gaW5qZWN0IGEgdHlwaWNhbCA8bGluaz4gbWV0YSB0YWcgdG8gdGhlIHN0eWxlc2hlZXQsIG9yIHNpbXBseSBlbWJlZGRpbmcgaXQgbWFudWFsbHkgaW4geW91ciBpbmRleC5odG1sIDxoZWFkPiBzZWN0aW9uIGZvciBhIHNpbXBsZXIgYXBwLiIpLCB0LnN0eWxlU2hlZXQuc2VydmVyICYmIHUyKHIzLCBlLCB0LnN0eWxlU2hlZXQsIG4yLCB0LnN0eWxpcyksIGltcG9ydF9yZWFjdC5kZWZhdWx0LnVzZUxheW91dEVmZmVjdChmdW5jdGlvbigpIHsKICAgICAgaWYgKCF0LnN0eWxlU2hlZXQuc2VydmVyKSByZXR1cm4gdTIocjMsIGUsIHQuc3R5bGVTaGVldCwgbjIsIHQuc3R5bGlzKSwgZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIGMyLnJlbW92ZVN0eWxlcyhyMywgdC5zdHlsZVNoZWV0KTsKICAgICAgfTsKICAgIH0sIFtyMywgZSwgdC5zdHlsZVNoZWV0LCBuMiwgdC5zdHlsaXNdKSwgbnVsbDsKICB9OwogIGZ1bmN0aW9uIHUyKGUsIG4yLCBvMiwgcjMsIHMzKSB7CiAgICBpZiAoYzIuaXNTdGF0aWMpIGMyLnJlbmRlclN0eWxlcyhlLCBiLCBvMiwgczMpOwogICAgZWxzZSB7CiAgICAgIHZhciBpMyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBuMiksIHsgdGhlbWU6IEkobjIsIHIzLCBsMi5kZWZhdWx0UHJvcHMpIH0pOwogICAgICBjMi5yZW5kZXJTdHlsZXMoZSwgaTMsIG8yLCBzMyk7CiAgICB9CiAgfQogIHJldHVybiBpbXBvcnRfcmVhY3QuZGVmYXVsdC5tZW1vKGwyKTsKfQpmdW5jdGlvbiBtdCh0KSB7CiAgZm9yICh2YXIgbiA9IFtdLCBvMiA9IDE7IG8yIDwgYXJndW1lbnRzLmxlbmd0aDsgbzIrKykgbltvMiAtIDFdID0gYXJndW1lbnRzW28yXTsKICAidW5kZWZpbmVkIiAhPSB0eXBlb2YgbmF2aWdhdG9yICYmICJSZWFjdE5hdGl2ZSIgPT09IG5hdmlnYXRvci5wcm9kdWN0ICYmIGNvbnNvbGUud2FybigiYGtleWZyYW1lc2AgY2Fubm90IGJlIHVzZWQgb24gUmVhY3ROYXRpdmUsIG9ubHkgb24gdGhlIHdlYi4gVG8gZG8gYW5pbWF0aW9uIGluIFJlYWN0TmF0aXZlIHBsZWFzZSB1c2UgQW5pbWF0ZWQuIik7CiAgdmFyIHIyID0gYWUobHQuYXBwbHkodm9pZCAwLCBfX3NwcmVhZEFycmF5KFt0XSwgbiwgZmFsc2UpKSksIHMyID0gJChyMik7CiAgcmV0dXJuIG5ldyBXZShzMiwgcjIpOwp9CmZ1bmN0aW9uIHl0KGUpIHsKICB2YXIgbiA9IGltcG9ydF9yZWFjdC5kZWZhdWx0LmZvcndhcmRSZWYoZnVuY3Rpb24objIsIHIyKSB7CiAgICB2YXIgczIgPSBJKG4yLCBpbXBvcnRfcmVhY3QuZGVmYXVsdC51c2VDb250ZXh0KGV0KSwgZS5kZWZhdWx0UHJvcHMpOwogICAgcmV0dXJuIHZvaWQgMCA9PT0gczIgJiYgY29uc29sZS53YXJuKCdbd2l0aFRoZW1lXSBZb3UgYXJlIG5vdCB1c2luZyBhIFRoZW1lUHJvdmlkZXIgbm9yIHBhc3NpbmcgYSB0aGVtZSBwcm9wIG9yIGEgdGhlbWUgaW4gZGVmYXVsdFByb3BzIGluIGNvbXBvbmVudCBjbGFzcyAiJy5jb25jYXQoQihlKSwgJyInKSksIGltcG9ydF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoZSwgX19hc3NpZ24oe30sIG4yLCB7IHRoZW1lOiBzMiwgcmVmOiByMiB9KSk7CiAgfSk7CiAgcmV0dXJuIG4uZGlzcGxheU5hbWUgPSAiV2l0aFRoZW1lKCIuY29uY2F0KEIoZSksICIpIiksIG9lKG4sIGUpOwp9CnZhciB2dCA9IChmdW5jdGlvbigpIHsKICBmdW5jdGlvbiBlKCkgewogICAgdmFyIGUyID0gdGhpczsKICAgIHRoaXMuX2VtaXRTaGVldENTUyA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgdCA9IGUyLmluc3RhbmNlLnRvU3RyaW5nKCk7CiAgICAgIGlmICghdCkgcmV0dXJuICIiOwogICAgICB2YXIgbiA9IENlKCksIG8yID0gYWUoW24gJiYgJ25vbmNlPSInLmNvbmNhdChuLCAnIicpLCAiIi5jb25jYXQoZiwgJz0idHJ1ZSInKSwgIiIuY29uY2F0KHksICc9IicpLmNvbmNhdCh2LCAnIicpXS5maWx0ZXIoQm9vbGVhbiksICIgIik7CiAgICAgIHJldHVybiAiPHN0eWxlICIuY29uY2F0KG8yLCAiPiIpLmNvbmNhdCh0LCAiPC9zdHlsZT4iKTsKICAgIH0sIHRoaXMuZ2V0U3R5bGVUYWdzID0gZnVuY3Rpb24oKSB7CiAgICAgIGlmIChlMi5zZWFsZWQpIHRocm93IGhlKDIpOwogICAgICByZXR1cm4gZTIuX2VtaXRTaGVldENTUygpOwogICAgfSwgdGhpcy5nZXRTdHlsZUVsZW1lbnQgPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIG47CiAgICAgIGlmIChlMi5zZWFsZWQpIHRocm93IGhlKDIpOwogICAgICB2YXIgcjIgPSBlMi5pbnN0YW5jZS50b1N0cmluZygpOwogICAgICBpZiAoIXIyKSByZXR1cm4gW107CiAgICAgIHZhciBzMiA9ICgobiA9IHt9KVtmXSA9ICIiLCBuW3ldID0gdiwgbi5kYW5nZXJvdXNseVNldElubmVySFRNTCA9IHsgX19odG1sOiByMiB9LCBuKSwgaTIgPSBDZSgpOwogICAgICByZXR1cm4gaTIgJiYgKHMyLm5vbmNlID0gaTIpLCBbaW1wb3J0X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgic3R5bGUiLCBfX2Fzc2lnbih7fSwgczIsIHsga2V5OiAic2MtMC0wIiB9KSldOwogICAgfSwgdGhpcy5zZWFsID0gZnVuY3Rpb24oKSB7CiAgICAgIGUyLnNlYWxlZCA9IHRydWU7CiAgICB9LCB0aGlzLmluc3RhbmNlID0gbmV3IGtlKHsgaXNTZXJ2ZXI6IHRydWUgfSksIHRoaXMuc2VhbGVkID0gZmFsc2U7CiAgfQogIHJldHVybiBlLnByb3RvdHlwZS5jb2xsZWN0U3R5bGVzID0gZnVuY3Rpb24oZTIpIHsKICAgIGlmICh0aGlzLnNlYWxlZCkgdGhyb3cgaGUoMik7CiAgICByZXR1cm4gaW1wb3J0X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChZZSwgeyBzaGVldDogdGhpcy5pbnN0YW5jZSB9LCBlMik7CiAgfSwgZS5wcm90b3R5cGUuaW50ZXJsZWF2ZVdpdGhOb2RlU3RyZWFtID0gZnVuY3Rpb24oZTIpIHsKICAgIHRocm93IGhlKDMpOwogIH0sIGU7Cn0pKCk7CnZhciBndCA9IHsgU3R5bGVTaGVldDoga2UsIG1haW5TaGVldDogTWUgfTsKInVuZGVmaW5lZCIgIT0gdHlwZW9mIG5hdmlnYXRvciAmJiAiUmVhY3ROYXRpdmUiID09PSBuYXZpZ2F0b3IucHJvZHVjdCAmJiBjb25zb2xlLndhcm4oIkl0IGxvb2tzIGxpa2UgeW91J3ZlIGltcG9ydGVkICdzdHlsZWQtY29tcG9uZW50cycgb24gUmVhY3QgTmF0aXZlLlxuUGVyaGFwcyB5b3UncmUgbG9va2luZyB0byBpbXBvcnQgJ3N0eWxlZC1jb21wb25lbnRzL25hdGl2ZSc/XG5SZWFkIG1vcmUgYWJvdXQgdGhpcyBhdCBodHRwczovL3d3dy5zdHlsZWQtY29tcG9uZW50cy5jb20vZG9jcy9iYXNpY3MjcmVhY3QtbmF0aXZlIik7CnZhciBTdCA9ICJfX3NjLSIuY29uY2F0KGYsICJfXyIpOwoidW5kZWZpbmVkIiAhPSB0eXBlb2Ygd2luZG93ICYmICh3aW5kb3dbU3RdIHx8ICh3aW5kb3dbU3RdID0gMCksIDEgPT09IHdpbmRvd1tTdF0gJiYgY29uc29sZS53YXJuKCJJdCBsb29rcyBsaWtlIHRoZXJlIGFyZSBzZXZlcmFsIGluc3RhbmNlcyBvZiAnc3R5bGVkLWNvbXBvbmVudHMnIGluaXRpYWxpemVkIGluIHRoaXMgYXBwbGljYXRpb24uIFRoaXMgbWF5IGNhdXNlIGR5bmFtaWMgc3R5bGVzIHRvIG5vdCByZW5kZXIgcHJvcGVybHksIGVycm9ycyBkdXJpbmcgdGhlIHJlaHlkcmF0aW9uIHByb2Nlc3MsIGEgbWlzc2luZyB0aGVtZSBwcm9wLCBhbmQgbWFrZXMgeW91ciBhcHBsaWNhdGlvbiBiaWdnZXIgd2l0aG91dCBnb29kIHJlYXNvbi5cblxuU2VlIGh0dHBzOi8vcy1jLnNoLzJCQVh6ZWQgZm9yIG1vcmUgaW5mby4iKSwgd2luZG93W1N0XSArPSAxKTsKZXhwb3J0IHsKICB2dCBhcyBTZXJ2ZXJTdHlsZVNoZWV0LAogIEJlIGFzIFN0eWxlU2hlZXRDb25zdW1lciwKICAkZSBhcyBTdHlsZVNoZWV0Q29udGV4dCwKICBZZSBhcyBTdHlsZVNoZWV0TWFuYWdlciwKICB0dCBhcyBUaGVtZUNvbnN1bWVyLAogIGV0IGFzIFRoZW1lQ29udGV4dCwKICBvdCBhcyBUaGVtZVByb3ZpZGVyLAogIGd0IGFzIF9fUFJJVkFURV9fLAogIGZ0IGFzIGNyZWF0ZUdsb2JhbFN0eWxlLAogIGx0IGFzIGNzcywKICBkdCBhcyBkZWZhdWx0LAogIHNlIGFzIGlzU3R5bGVkQ29tcG9uZW50LAogIG10IGFzIGtleWZyYW1lcywKICBkdCBhcyBzdHlsZWQsCiAgbnQgYXMgdXNlVGhlbWUsCiAgdiBhcyB2ZXJzaW9uLAogIHl0IGFzIHdpdGhUaGVtZQp9OwovLyMgc291cmNlTWFwcGluZ1VSTD1zdHlsZWQtY29tcG9uZW50cy5qcy5tYXAK",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 64920
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 12,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.548Z",
        "time": 17,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/components/movie-form/index.ts",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/App-routes.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"b9-7yFVXM9Tbvj6ietXSsDNWL5P+lk\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "588"
            }
          ],
          "content": {
            "size": 588,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IE1vdmllRm9ybSBmcm9tICIvc3JjL2NvbXBvbmVudHMvbW92aWUtZm9ybS9tb3ZpZS1mb3JtLnRzeCI7CmltcG9ydCBNb3ZpZUlucHV0IGZyb20gIi9zcmMvY29tcG9uZW50cy9tb3ZpZS1mb3JtL21vdmllLWlucHV0LnRzeCI7CmV4cG9ydCB7IE1vdmllSW5wdXQgfTsKZXhwb3J0IGRlZmF1bHQgTW92aWVGb3JtOwoKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYkltbHVaR1Y0TG5SeklsMHNJbk52ZFhKalpYTkRiMjUwWlc1MElqcGJJbWx0Y0c5eWRDQk5iM1pwWlVadmNtMGdabkp2YlNBbkxpOXRiM1pwWlMxbWIzSnRKMXh1YVcxd2IzSjBJRTF2ZG1sbFNXNXdkWFFnWm5KdmJTQW5MaTl0YjNacFpTMXBibkIxZENkY2JtVjRjRzl5ZENCN0lFMXZkbWxsU1c1d2RYUWdmVnh1Wlhod2IzSjBJR1JsWm1GMWJIUWdUVzkyYVdWR2IzSnRYRzRpWFN3aWJXRndjR2x1WjNNaU9pSkJRVUZCTEU5QlFVOHNaVUZCWlR0QlFVTjBRaXhQUVVGUExHZENRVUZuUWp0QlFVTjJRaXhUUVVGVE8wRkJRMVFzWlVGQlpUc2lMQ0p1WVcxbGN5STZXMTE5",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 588
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 17,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.550Z",
        "time": 15,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/components/movie-details/index.ts",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/App-routes.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"69-OtG9JelJ/jc8bf708/N1jyDZ09c\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "404"
            }
          ],
          "content": {
            "size": 404,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IE1vdmllRGV0YWlscyBmcm9tICIvc3JjL2NvbXBvbmVudHMvbW92aWUtZGV0YWlscy9tb3ZpZS1kZXRhaWxzLnRzeCI7CmV4cG9ydCBkZWZhdWx0IE1vdmllRGV0YWlsczsKCi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnpiM1Z5WTJWeklqcGJJbWx1WkdWNExuUnpJbDBzSW5OdmRYSmpaWE5EYjI1MFpXNTBJanBiSW1sdGNHOXlkQ0JOYjNacFpVUmxkR0ZwYkhNZ1puSnZiU0FuTGk5dGIzWnBaUzFrWlhSaGFXeHpKMXh1Wlhod2IzSjBJR1JsWm1GMWJIUWdUVzkyYVdWRVpYUmhhV3h6WEc0aVhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQkxFOUJRVThzYTBKQlFXdENPMEZCUTNwQ0xHVkJRV1U3SWl3aWJtRnRaWE1pT2x0ZGZRPT0=",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 404
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 15,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.551Z",
        "time": 14,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/components/movie-list.tsx",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/App-routes.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"ee3-L1YfoRXOVUIeG+GwNUHWkjNXRwo\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "6738"
            }
          ],
          "content": {
            "size": 6738,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsgY3JlYXRlSG90Q29udGV4dCBhcyBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQgfSBmcm9tICIvQHZpdGUvY2xpZW50IjtpbXBvcnQubWV0YS5ob3QgPSBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQoIi9zcmMvY29tcG9uZW50cy9tb3ZpZS1saXN0LnRzeCIpO2ltcG9ydCBfX3ZpdGVfX2Nqc0ltcG9ydDBfcmVhY3RfanN4RGV2UnVudGltZSBmcm9tICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvcmVhY3RfanN4LWRldi1ydW50aW1lLmpzP3Y9MGJiNjlkNzMiOyBjb25zdCBGcmFnbWVudCA9IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdF9qc3hEZXZSdW50aW1lWyJGcmFnbWVudCJdOyBjb25zdCBqc3hERVYgPSBfX3ZpdGVfX2Nqc0ltcG9ydDBfcmVhY3RfanN4RGV2UnVudGltZVsianN4REVWIl07CmltcG9ydCAqIGFzIFJlZnJlc2hSdW50aW1lIGZyb20gIi9AcmVhY3QtcmVmcmVzaCI7CmNvbnN0IGluV2ViV29ya2VyID0gdHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlICE9PSAidW5kZWZpbmVkIiAmJiBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGU7CmxldCBwcmV2UmVmcmVzaFJlZzsKbGV0IHByZXZSZWZyZXNoU2lnOwppZiAoaW1wb3J0Lm1ldGEuaG90ICYmICFpbldlYldvcmtlcikgewogIGlmICghd2luZG93LiRSZWZyZXNoUmVnJCkgewogICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAiQHZpdGVqcy9wbHVnaW4tcmVhY3QgY2FuJ3QgZGV0ZWN0IHByZWFtYmxlLiBTb21ldGhpbmcgaXMgd3JvbmcuIgogICAgKTsKICB9CiAgcHJldlJlZnJlc2hSZWcgPSB3aW5kb3cuJFJlZnJlc2hSZWckOwogIHByZXZSZWZyZXNoU2lnID0gd2luZG93LiRSZWZyZXNoU2lnJDsKICB3aW5kb3cuJFJlZnJlc2hSZWckID0gUmVmcmVzaFJ1bnRpbWUuZ2V0UmVmcmVzaFJlZygiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWxpc3QudHN4Iik7CiAgd2luZG93LiRSZWZyZXNoU2lnJCA9IFJlZnJlc2hSdW50aW1lLmNyZWF0ZVNpZ25hdHVyZUZ1bmN0aW9uRm9yVHJhbnNmb3JtOwp9CmltcG9ydCBFcnJvckNvbXAgZnJvbSAiL3NyYy9jb21wb25lbnRzL2Vycm9yLWNvbXBvbmVudC50c3giOwppbXBvcnQgc3R5bGVkIGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9zdHlsZWQtY29tcG9uZW50cy5qcz92PTBiYjY5ZDczIjsKaW1wb3J0IE1vdmllSXRlbSBmcm9tICIvc3JjL2NvbXBvbmVudHMvbW92aWUtaXRlbS9pbmRleC50cyI7CmltcG9ydCB7IFNUaXRsZSB9IGZyb20gIi9zcmMvc3R5bGVzL3N0eWxlZC1jb21wb25lbnRzLnRzIjsKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTW92aWVMaXN0KHsgbW92aWVzLCBvbkRlbGV0ZSB9KSB7CiAgaWYgKEFycmF5LmlzQXJyYXkobW92aWVzKSAmJiBtb3ZpZXMubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CiAgaWYgKG1vdmllcyAmJiAiZXJyb3IiIGluIG1vdmllcykgewogICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoRXJyb3JDb21wLCB7fSwgdm9pZCAwLCBmYWxzZSwgewogICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9tb3ZpZS1saXN0LnRzeCIsCiAgICAgIGxpbmVOdW1iZXI6IDM4LAogICAgICBjb2x1bW5OdW1iZXI6IDEyCiAgICB9LCB0aGlzKTsKICB9CiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFsKICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoU1RpdGxlLCB7IGNoaWxkcmVuOiAiTW92aWUgTGlzdCIgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9tb3ZpZS1saXN0LnRzeCIsCiAgICAgIGxpbmVOdW1iZXI6IDQzLAogICAgICBjb2x1bW5OdW1iZXI6IDcKICAgIH0sIHRoaXMpLAogICAgLyogQF9fUFVSRV9fICovIGpzeERFVihTTW92aWVMaXN0LCB7ICJkYXRhLXRlc3RpZCI6ICJtb3ZpZS1saXN0LWNvbXAiLCBjaGlsZHJlbjogQXJyYXkuaXNBcnJheShtb3ZpZXMpICYmIG1vdmllcy5tYXAoCiAgICAgIChtb3ZpZSkgPT4gLyogQF9fUFVSRV9fICovIGpzeERFVihNb3ZpZUl0ZW0sIHsgLi4ubW92aWUsIG9uRGVsZXRlIH0sIG1vdmllLmlkLCBmYWxzZSwgewogICAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWxpc3QudHN4IiwKICAgICAgICBsaW5lTnVtYmVyOiA0NywKICAgICAgICBjb2x1bW5OdW1iZXI6IDkKICAgICAgfSwgdGhpcykKICAgICkgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9tb3ZpZS1saXN0LnRzeCIsCiAgICAgIGxpbmVOdW1iZXI6IDQ0LAogICAgICBjb2x1bW5OdW1iZXI6IDcKICAgIH0sIHRoaXMpCiAgXSB9LCB2b2lkIDAsIHRydWUsIHsKICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWxpc3QudHN4IiwKICAgIGxpbmVOdW1iZXI6IDQyLAogICAgY29sdW1uTnVtYmVyOiA1CiAgfSwgdGhpcyk7Cn0KX2MgPSBNb3ZpZUxpc3Q7CmNvbnN0IFNNb3ZpZUxpc3QgPSBzdHlsZWQudWxgCiAgbGlzdC1zdHlsZTogbm9uZTsKICBwYWRkaW5nOiAwOwogIG1heC13aWR0aDogNjAwcHg7CiAgbWFyZ2luOiAwIGF1dG8gMjBweDsKYDsKX2MyID0gU01vdmllTGlzdDsKdmFyIF9jLCBfYzI7CiRSZWZyZXNoUmVnJChfYywgIk1vdmllTGlzdCIpOwokUmVmcmVzaFJlZyQoX2MyLCAiU01vdmllTGlzdCIpOwppZiAoaW1wb3J0Lm1ldGEuaG90ICYmICFpbldlYldvcmtlcikgewogIHdpbmRvdy4kUmVmcmVzaFJlZyQgPSBwcmV2UmVmcmVzaFJlZzsKICB3aW5kb3cuJFJlZnJlc2hTaWckID0gcHJldlJlZnJlc2hTaWc7Cn0KaWYgKGltcG9ydC5tZXRhLmhvdCAmJiAhaW5XZWJXb3JrZXIpIHsKICBSZWZyZXNoUnVudGltZS5fX2htcl9pbXBvcnQoaW1wb3J0Lm1ldGEudXJsKS50aGVuKChjdXJyZW50RXhwb3J0cykgPT4gewogICAgUmVmcmVzaFJ1bnRpbWUucmVnaXN0ZXJFeHBvcnRzRm9yUmVhY3RSZWZyZXNoKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtbGlzdC50c3giLCBjdXJyZW50RXhwb3J0cyk7CiAgICBpbXBvcnQubWV0YS5ob3QuYWNjZXB0KChuZXh0RXhwb3J0cykgPT4gewogICAgICBpZiAoIW5leHRFeHBvcnRzKSByZXR1cm47CiAgICAgIGNvbnN0IGludmFsaWRhdGVNZXNzYWdlID0gUmVmcmVzaFJ1bnRpbWUudmFsaWRhdGVSZWZyZXNoQm91bmRhcnlBbmRFbnF1ZXVlVXBkYXRlKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtbGlzdC50c3giLCBjdXJyZW50RXhwb3J0cywgbmV4dEV4cG9ydHMpOwogICAgICBpZiAoaW52YWxpZGF0ZU1lc3NhZ2UpIGltcG9ydC5tZXRhLmhvdC5pbnZhbGlkYXRlKGludmFsaWRhdGVNZXNzYWdlKTsKICAgIH0pOwogIH0pOwp9CgovLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p0WVhCd2FXNW5jeUk2SWtGQmEwSlhMRk5CU1ZBc1ZVRktUenM3T3pzN096czdPenM3T3pzN096dEJRV3hDV0N4UFFVRlBRU3hsUVVGbE8wRkJRM1JDTEU5QlFVOURMRmxCUVZrN1FVRkZia0lzVDBGQlQwTXNaVUZCWlR0QlFVTjBRaXhUUVVGVFF5eGpRVUZqTzBGQlVYWkNMSGRDUVVGM1FrTXNWVUZCVlN4RlFVRkZReXhSUVVGUlF5eFRRVUY1UWl4SFFVRkhPMEZCUTNSRkxFMUJRVWxETEUxQlFVMURMRkZCUVZGSUxFMUJRVTBzUzBGQlMwRXNUMEZCVDBrc1YwRkJWeXhIUVVGSE8wRkJRMmhFTEZkQlFVODdRVUZCUVN4RlFVTlVPMEZCUlVFc1RVRkJTVW9zVlVGQlZTeFhRVUZYUVN4UlFVRlJPMEZCUXk5Q0xGZEJRVThzZFVKQlFVTXNaVUZCUkR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQkxGZEJRVlU3UVVGQlFTeEZRVU51UWp0QlFVVkJMRk5CUTBVc2JVTkJRMFU3UVVGQlFTd3lRa0ZCUXl4VlFVRlBMREJDUVVGU08wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRXNWMEZCYTBJN1FVRkJRU3hKUVVOc1FpeDFRa0ZCUXl4alFVRlhMR1ZCUVZrc2JVSkJRM0pDUlN4blFrRkJUVU1zVVVGQlVVZ3NUVUZCVFN4TFFVTnVRa0VzVDBGQlQwczdRVUZCUVVFc1RVRkJTU3hEUVVGRFF5eFZRVU5XTEhWQ1FVRkRMR0ZCUVhsQ0xFZEJRVWxCTEU5QlFVOHNXVUZCY2tKQkxFMUJRVTFETEVsQlFYUkNPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUVzWVVGQmQwUTdRVUZCUVN4SlFVTjZSQ3hMUVVwTU8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRXNWMEZMUVR0QlFVRkJMRTlCVUVZN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFTeFRRVkZCTzBGQlJVbzdRVUZCUTBNc1MwRndRblZDVkR0QlFYTkNlRUlzVFVGQlRWVXNZVUZCWVdJc1QwRkJUMk03UVVGQlFVRTdRVUZCUVVFN1FVRkJRVUU3UVVGQlFVRTdRVUZCUVVFN1FVRkxla0pETEUxQlRFdEdPMEZCUVZVc1NVRkJRVVFzU1VGQlFVYzdRVUZCUVVNc1lVRkJRVW9zU1VGQlFUdEJRVUZCU1N4aFFVRkJSQ3hMUVVGQklpd2libUZ0WlhNaU9sc2lSWEp5YjNKRGIyMXdJaXdpYzNSNWJHVmtJaXdpVFc5MmFXVkpkR1Z0SWl3aVUxUnBkR3hsSWl3aVRXOTJhV1ZNYVhOMElpd2liVzkyYVdWeklpd2liMjVFWld4bGRHVWlMQ0pCY25KaGVTSXNJbWx6UVhKeVlYa2lMQ0pzWlc1bmRHZ2lMQ0p0WVhBaUxDSnRiM1pwWlNJc0ltbGtJaXdpWDJNaUxDSlRUVzkyYVdWTWFYTjBJaXdpZFd3aUxDSmZZeklpTENJa1VtVm1jbVZ6YUZKbFp5UWlYU3dpYVdkdWIzSmxUR2x6ZENJNlcxMHNJbk52ZFhKalpYTWlPbHNpYlc5MmFXVXRiR2x6ZEM1MGMzZ2lYU3dpYzI5MWNtTmxjME52Ym5SbGJuUWlPbHNpYVcxd2IzSjBJRVZ5Y205eVEyOXRjQ0JtY205dElDZEFZMjl0Y0c5dVpXNTBjeTlsY25KdmNpMWpiMjF3YjI1bGJuUW5YRzVwYlhCdmNuUWdjM1I1YkdWa0lHWnliMjBnSjNOMGVXeGxaQzFqYjIxd2IyNWxiblJ6SjF4dWFXMXdiM0owSUhSNWNHVWdleUJGY25KdmNsSmxjM0J2Ym5ObElIMGdabkp2YlNBbkxpNHZZMjl1YzNWdFpYSW5YRzVwYlhCdmNuUWdUVzkyYVdWSmRHVnRJR1p5YjIwZ0p5NHZiVzkyYVdVdGFYUmxiU2RjYm1sdGNHOXlkQ0I3SUZOVWFYUnNaU0I5SUdaeWIyMGdKMEJ6ZEhsc1pYTXZjM1I1YkdWa0xXTnZiWEJ2Ym1WdWRITW5YRzVwYlhCdmNuUWdkSGx3WlNCN0lFMXZkbWxsSUgwZ1puSnZiU0FuUUhOb1lYSmxaQzkwZVhCbGN5OXRiM1pwWlMxMGVYQmxjeWRjYmx4dWRIbHdaU0JOYjNacFpVeHBjM1JRY205d2N5QTlJRkpsWVdSdmJteDVQSHRjYmlBZ2JXOTJhV1Z6T2lCTmIzWnBaVnRkSUh3Z1JYSnliM0pTWlhOd2IyNXpaU0I4SUhWdVpHVm1hVzVsWkZ4dUlDQnZia1JsYkdWMFpUb2dLR2xrT2lCdWRXMWlaWElwSUQwK0lIWnZhV1JjYm4wK1hHNWNibVY0Y0c5eWRDQmtaV1poZFd4MElHWjFibU4wYVc5dUlFMXZkbWxsVEdsemRDaDdJRzF2ZG1sbGN5d2diMjVFWld4bGRHVWdmVG9nVFc5MmFXVk1hWE4wVUhKdmNITXBJSHRjYmlBZ2FXWWdLRUZ5Y21GNUxtbHpRWEp5WVhrb2JXOTJhV1Z6S1NBbUppQnRiM1pwWlhNdWJHVnVaM1JvSUQwOVBTQXdLU0I3WEc0Z0lDQWdjbVYwZFhKdUlHNTFiR3hjYmlBZ2ZWeHVYRzRnSUdsbUlDaHRiM1pwWlhNZ0ppWWdKMlZ5Y205eUp5QnBiaUJ0YjNacFpYTXBJSHRjYmlBZ0lDQnlaWFIxY200Z1BFVnljbTl5UTI5dGNDQXZQbHh1SUNCOVhHNWNiaUFnY21WMGRYSnVJQ2hjYmlBZ0lDQThQbHh1SUNBZ0lDQWdQRk5VYVhSc1pUNU5iM1pwWlNCTWFYTjBQQzlUVkdsMGJHVStYRzRnSUNBZ0lDQThVMDF2ZG1sbFRHbHpkQ0JrWVhSaExYUmxjM1JwWkQxY0ltMXZkbWxsTFd4cGMzUXRZMjl0Y0Z3aVBseHVJQ0FnSUNBZ0lDQjdRWEp5WVhrdWFYTkJjbkpoZVNodGIzWnBaWE1wSUNZbVhHNGdJQ0FnSUNBZ0lDQWdiVzkyYVdWekxtMWhjQ2dvYlc5MmFXVXBJRDArSUNoY2JpQWdJQ0FnSUNBZ0lDQWdJRHhOYjNacFpVbDBaVzBnYTJWNVBYdHRiM1pwWlM1cFpIMGdleTR1TG0xdmRtbGxmU0J2YmtSbGJHVjBaVDE3YjI1RVpXeGxkR1Y5SUM4K1hHNGdJQ0FnSUNBZ0lDQWdLU2w5WEc0Z0lDQWdJQ0E4TDFOTmIzWnBaVXhwYzNRK1hHNGdJQ0FnUEM4K1hHNGdJQ2xjYm4xY2JseHVZMjl1YzNRZ1UwMXZkbWxsVEdsemRDQTlJSE4wZVd4bFpDNTFiR0JjYmlBZ2JHbHpkQzF6ZEhsc1pUb2dibTl1WlR0Y2JpQWdjR0ZrWkdsdVp6b2dNRHRjYmlBZ2JXRjRMWGRwWkhSb09pQTJNREJ3ZUR0Y2JpQWdiV0Z5WjJsdU9pQXdJR0YxZEc4Z01qQndlRHRjYm1CY2JpSmRMQ0ptYVd4bElqb2lMMVZ6WlhKekwyMTFjbUYwTG05NlkyRnVMM05sYjI0dmNHeGhlWGR5YVdkb2RDMTFkR2xzY3k5ellXMXdiR1V0WVhCd0wyWnliMjUwWlc1a0wzTnlZeTlqYjIxd2IyNWxiblJ6TDIxdmRtbGxMV3hwYzNRdWRITjRJbjA9",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 6738
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 14,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.555Z",
        "time": 12,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/components/file-download/file-download.tsx",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/App-routes.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"2a65-Wf+maxq0G19gDHAIUht6H9gT31M\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "25676"
            }
          ],
          "content": {
            "size": 25676,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsgY3JlYXRlSG90Q29udGV4dCBhcyBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQgfSBmcm9tICIvQHZpdGUvY2xpZW50IjtpbXBvcnQubWV0YS5ob3QgPSBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQoIi9zcmMvY29tcG9uZW50cy9maWxlLWRvd25sb2FkL2ZpbGUtZG93bmxvYWQudHN4Iik7aW1wb3J0IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdF9qc3hEZXZSdW50aW1lIGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9yZWFjdF9qc3gtZGV2LXJ1bnRpbWUuanM/dj0wYmI2OWQ3MyI7IGNvbnN0IGpzeERFViA9IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdF9qc3hEZXZSdW50aW1lWyJqc3hERVYiXTsKaW1wb3J0ICogYXMgUmVmcmVzaFJ1bnRpbWUgZnJvbSAiL0ByZWFjdC1yZWZyZXNoIjsKY29uc3QgaW5XZWJXb3JrZXIgPSB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICJ1bmRlZmluZWQiICYmIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZTsKbGV0IHByZXZSZWZyZXNoUmVnOwpsZXQgcHJldlJlZnJlc2hTaWc7CmlmIChpbXBvcnQubWV0YS5ob3QgJiYgIWluV2ViV29ya2VyKSB7CiAgaWYgKCF3aW5kb3cuJFJlZnJlc2hSZWckKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICJAdml0ZWpzL3BsdWdpbi1yZWFjdCBjYW4ndCBkZXRlY3QgcHJlYW1ibGUuIFNvbWV0aGluZyBpcyB3cm9uZy4iCiAgICApOwogIH0KICBwcmV2UmVmcmVzaFJlZyA9IHdpbmRvdy4kUmVmcmVzaFJlZyQ7CiAgcHJldlJlZnJlc2hTaWcgPSB3aW5kb3cuJFJlZnJlc2hTaWckOwogIHdpbmRvdy4kUmVmcmVzaFJlZyQgPSBSZWZyZXNoUnVudGltZS5nZXRSZWZyZXNoUmVnKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvZmlsZS1kb3dubG9hZC9maWxlLWRvd25sb2FkLnRzeCIpOwogIHdpbmRvdy4kUmVmcmVzaFNpZyQgPSBSZWZyZXNoUnVudGltZS5jcmVhdGVTaWduYXR1cmVGdW5jdGlvbkZvclRyYW5zZm9ybTsKfQp2YXIgX3MgPSAkUmVmcmVzaFNpZyQoKTsKaW1wb3J0IF9fdml0ZV9fY2pzSW1wb3J0M19yZWFjdCBmcm9tICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvcmVhY3QuanM/dj0wYmI2OWQ3MyI7IGNvbnN0IHVzZVN0YXRlID0gX192aXRlX19janNJbXBvcnQzX3JlYWN0WyJ1c2VTdGF0ZSJdOwppbXBvcnQgc3R5bGVkIGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9zdHlsZWQtY29tcG9uZW50cy5qcz92PTBiYjY5ZDczIjsKaW1wb3J0IHsgU0J1dHRvbiB9IGZyb20gIi9zcmMvc3R5bGVzL3N0eWxlZC1jb21wb25lbnRzLnRzIjsKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRmlsZURvd25sb2FkKCkgewogIF9zKCk7CiAgY29uc3QgW2Rvd25sb2FkU3RhdHVzLCBzZXREb3dubG9hZFN0YXR1c10gPSB1c2VTdGF0ZSgKICAgIHt9CiAgKTsKICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeERFVihDb250YWluZXIsIHsgY2hpbGRyZW46IFsKICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoVGl0bGUsIHsgY2hpbGRyZW46ICJGaWxlIERvd25sb2FkcyIgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9maWxlLWRvd25sb2FkL2ZpbGUtZG93bmxvYWQudHN4IiwKICAgICAgbGluZU51bWJlcjogMzEsCiAgICAgIGNvbHVtbk51bWJlcjogNwogICAgfSwgdGhpcyksCiAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKEZpbGVzTGlzdCwgeyAiZGF0YS10ZXN0aWQiOiAiZmlsZXMtbGlzdCIsIGNoaWxkcmVuOiBhdmFpbGFibGVGaWxlcy5tYXAoCiAgICAgIChmaWxlKSA9PiAvKiBAX19QVVJFX18gKi8ganN4REVWKEZpbGVJdGVtLCB7ICJkYXRhLXRlc3RpZCI6IGBmaWxlLXR5cGUtJHtmaWxlLnR5cGV9YCwgY2hpbGRyZW46IFsKICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKEZpbGVJbmZvLCB7IGNoaWxkcmVuOiBbCiAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKEZpbGVOYW1lLCB7IGNoaWxkcmVuOiBmaWxlLm5hbWUgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgICAgICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9maWxlLWRvd25sb2FkL2ZpbGUtZG93bmxvYWQudHN4IiwKICAgICAgICAgICAgbGluZU51bWJlcjogMzcsCiAgICAgICAgICAgIGNvbHVtbk51bWJlcjogMTUKICAgICAgICAgIH0sIHRoaXMpLAogICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeERFVihGaWxlTWV0YWRhdGEsIHsgY2hpbGRyZW46IFsKICAgICAgICAgICAgLyogQF9fUFVSRV9fICovIGpzeERFVihGaWxlTmFtZUNvZGUsIHsgY2hpbGRyZW46IGZpbGUuZmlsZW5hbWUgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgICAgICAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL2ZpbGUtZG93bmxvYWQvZmlsZS1kb3dubG9hZC50c3giLAogICAgICAgICAgICAgIGxpbmVOdW1iZXI6IDM5LAogICAgICAgICAgICAgIGNvbHVtbk51bWJlcjogMTcKICAgICAgICAgICAgfSwgdGhpcyksCiAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoRmlsZVNpemUsIHsgY2hpbGRyZW46IGZpbGUuc2l6ZSB9LCB2b2lkIDAsIGZhbHNlLCB7CiAgICAgICAgICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvZmlsZS1kb3dubG9hZC9maWxlLWRvd25sb2FkLnRzeCIsCiAgICAgICAgICAgICAgbGluZU51bWJlcjogNDAsCiAgICAgICAgICAgICAgY29sdW1uTnVtYmVyOiAxNwogICAgICAgICAgICB9LCB0aGlzKQogICAgICAgICAgXSB9LCB2b2lkIDAsIHRydWUsIHsKICAgICAgICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvZmlsZS1kb3dubG9hZC9maWxlLWRvd25sb2FkLnRzeCIsCiAgICAgICAgICAgIGxpbmVOdW1iZXI6IDM4LAogICAgICAgICAgICBjb2x1bW5OdW1iZXI6IDE1CiAgICAgICAgICB9LCB0aGlzKSwKICAgICAgICAgIGdldFN0YXR1c0luZGljYXRvcihkb3dubG9hZFN0YXR1c1tmaWxlLmlkXSkKICAgICAgICBdIH0sIHZvaWQgMCwgdHJ1ZSwgewogICAgICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvZmlsZS1kb3dubG9hZC9maWxlLWRvd25sb2FkLnRzeCIsCiAgICAgICAgICBsaW5lTnVtYmVyOiAzNiwKICAgICAgICAgIGNvbHVtbk51bWJlcjogMTMKICAgICAgICB9LCB0aGlzKSwKICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKAogICAgICAgICAgRG93bmxvYWRCdXR0b24sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IGhhbmRsZURvd25sb2FkKGZpbGUuaWQsIGZpbGUsIHNldERvd25sb2FkU3RhdHVzKSwKICAgICAgICAgICAgZGlzYWJsZWQ6IGRvd25sb2FkU3RhdHVzW2ZpbGUuaWRdID09PSAicHJvY2Vzc2luZyIsCiAgICAgICAgICAgICJkYXRhLXRlc3RpZCI6IGBkb3dubG9hZC1idXR0b24tJHtmaWxlLm5hbWV9YCwKICAgICAgICAgICAgY2hpbGRyZW46IGRvd25sb2FkU3RhdHVzW2ZpbGUuaWRdID09PSAicHJvY2Vzc2luZyIgPyAiUHJlcGFyaW5nLi4uIiA6ICJEb3dubG9hZCIKICAgICAgICAgIH0sCiAgICAgICAgICB2b2lkIDAsCiAgICAgICAgICBmYWxzZSwKICAgICAgICAgIHsKICAgICAgICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvZmlsZS1kb3dubG9hZC9maWxlLWRvd25sb2FkLnRzeCIsCiAgICAgICAgICAgIGxpbmVOdW1iZXI6IDQ0LAogICAgICAgICAgICBjb2x1bW5OdW1iZXI6IDEzCiAgICAgICAgICB9LAogICAgICAgICAgdGhpcwogICAgICAgICkKICAgICAgXSB9LCBmaWxlLmlkLCB0cnVlLCB7CiAgICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvZmlsZS1kb3dubG9hZC9maWxlLWRvd25sb2FkLnRzeCIsCiAgICAgICAgbGluZU51bWJlcjogMzUsCiAgICAgICAgY29sdW1uTnVtYmVyOiA5CiAgICAgIH0sIHRoaXMpCiAgICApIH0sIHZvaWQgMCwgZmFsc2UsIHsKICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvZmlsZS1kb3dubG9hZC9maWxlLWRvd25sb2FkLnRzeCIsCiAgICAgIGxpbmVOdW1iZXI6IDMzLAogICAgICBjb2x1bW5OdW1iZXI6IDcKICAgIH0sIHRoaXMpCiAgXSB9LCB2b2lkIDAsIHRydWUsIHsKICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL2ZpbGUtZG93bmxvYWQvZmlsZS1kb3dubG9hZC50c3giLAogICAgbGluZU51bWJlcjogMzAsCiAgICBjb2x1bW5OdW1iZXI6IDUKICB9LCB0aGlzKTsKfQpfcyhGaWxlRG93bmxvYWQsICIrekhXVHlsenY2b0dkMkJXQW5OVWpkUDh4ZGM9Iik7Cl9jID0gRmlsZURvd25sb2FkOwpjb25zdCBhdmFpbGFibGVGaWxlcyA9IFsKICB7CiAgICBpZDogMSwKICAgIG5hbWU6ICJWZWN0b3ItYmFzZWQgUERGIERvY3VtZW50IiwKICAgIGZpbGVuYW1lOiAiMjAyNDYzNi5wZGYiLAogICAgdHlwZTogImFwcGxpY2F0aW9uL3BkZiIsCiAgICBzaXplOiAiMjM0IEtCIgogIH0sCiAgewogICAgaWQ6IDIsCiAgICBuYW1lOiAiVGV4dC1iYXNlZCBQREYgRG9jdW1lbnQiLAogICAgZmlsZW5hbWU6ICJzaW1wbGUucGRmIiwKICAgIHR5cGU6ICJhcHBsaWNhdGlvbi9wZGYiLAogICAgc2l6ZTogIjggS0IiCiAgfSwKICB7CiAgICBpZDogMywKICAgIG5hbWU6ICJaSVAgQXJjaGl2ZSIsCiAgICBmaWxlbmFtZTogImNhc2VzX2V4cG9ydC56aXAiLAogICAgdHlwZTogImFwcGxpY2F0aW9uL3ppcCIsCiAgICBzaXplOiAiNTk4IEtCIgogIH0sCiAgewogICAgaWQ6IDQsCiAgICBuYW1lOiAiQ1NWIEV4cG9ydCIsCiAgICBmaWxlbmFtZTogImV4cG9ydF9hbGVydHMuY3N2IiwKICAgIHR5cGU6ICJ0ZXh0L2NzdiIsCiAgICBzaXplOiAiMjUgS0IiCiAgfSwKICB7CiAgICBpZDogNSwKICAgIG5hbWU6ICJFeGNlbCBTcHJlYWRzaGVldCIsCiAgICBmaWxlbmFtZTogInNlb25fdHJhbnNhY3Rpb25zX2V4cG9ydF8xNzUwMjQzMzIwNDk3Lnhsc3giLAogICAgdHlwZTogImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0IiwKICAgIHNpemU6ICIxLjQgTUIiCiAgfQpdOwpjb25zdCBoYW5kbGVEb3dubG9hZCA9IGFzeW5jIChmaWxlSWQsIGZpbGUsIHNldERvd25sb2FkU3RhdHVzKSA9PiB7CiAgc2V0RG93bmxvYWRTdGF0dXMoKHByZXYpID0+ICh7IC4uLnByZXYsIFtmaWxlSWRdOiAicHJvY2Vzc2luZyIgfSkpOwogIGNvbnN0IGdldFJhbmRvbVRpbWUgPSAoKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzZTMpICsgMTUwMDsKICB0cnkgewogICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZ2V0UmFuZG9tVGltZSgpKSk7CiAgICBjb25zdCBmaWxlVXJsID0gYC4vZmlsZXMvJHtmaWxlLmZpbGVuYW1lfWA7CiAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgbGluay5ocmVmID0gZmlsZVVybDsKICAgIGxpbmsuZG93bmxvYWQgPSBmaWxlLmZpbGVuYW1lOwogICAgbGluay5zZXRBdHRyaWJ1dGUoImRhdGEtdGVzdGlkIiwgYGRvd25sb2FkLWNvbXBsZXRlLSR7ZmlsZUlkfWApOwogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsKICAgIGxpbmsuY2xpY2soKTsKICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7CiAgICBzZXREb3dubG9hZFN0YXR1cygocHJldikgPT4gKHsgLi4ucHJldiwgW2ZpbGVJZF06ICJzdWNjZXNzIiB9KSk7CiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgc2V0RG93bmxvYWRTdGF0dXMoKHByZXYpID0+IHsKICAgICAgICBjb25zdCBuZXdTdGF0dXMgPSB7IC4uLnByZXYgfTsKICAgICAgICBkZWxldGUgbmV3U3RhdHVzW2ZpbGVJZF07CiAgICAgICAgcmV0dXJuIG5ld1N0YXR1czsKICAgICAgfSk7CiAgICB9LCBnZXRSYW5kb21UaW1lKCkpOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICBjb25zb2xlLmVycm9yKCJEb3dubG9hZCBlcnJvcjoiLCBlcnJvcik7CiAgICBzZXREb3dubG9hZFN0YXR1cygocHJldikgPT4gKHsgLi4ucHJldiwgW2ZpbGVJZF06ICJlcnJvciIgfSkpOwogIH0KfTsKY29uc3QgZ2V0U3RhdHVzSW5kaWNhdG9yID0gKHN0YXR1cykgPT4gewogIGlmICghc3RhdHVzKSByZXR1cm4gbnVsbDsKICBpZiAoc3RhdHVzID09PSAicHJvY2Vzc2luZyIpIHsKICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4REVWKFN0YXR1cywgeyB2YXJpYW50OiAicHJvY2Vzc2luZyIsIGNoaWxkcmVuOiAiUHJvY2Vzc2luZy4uLiIgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9maWxlLWRvd25sb2FkL2ZpbGUtZG93bmxvYWQudHN4IiwKICAgICAgbGluZU51bWJlcjogMTYwLAogICAgICBjb2x1bW5OdW1iZXI6IDEyCiAgICB9LCB0aGlzKTsKICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gInN1Y2Nlc3MiKSB7CiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeERFVihTdGF0dXMsIHsgdmFyaWFudDogInN1Y2Nlc3MiLCBjaGlsZHJlbjogIkRvd25sb2FkIGNvbXBsZXRlIiB9LCB2b2lkIDAsIGZhbHNlLCB7CiAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL2ZpbGUtZG93bmxvYWQvZmlsZS1kb3dubG9hZC50c3giLAogICAgICBsaW5lTnVtYmVyOiAxNjIsCiAgICAgIGNvbHVtbk51bWJlcjogMTIKICAgIH0sIHRoaXMpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeERFVihTdGF0dXMsIHsgdmFyaWFudDogImVycm9yIiwgY2hpbGRyZW46ICJFcnJvciAtIHRyeSBhZ2FpbiIgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9maWxlLWRvd25sb2FkL2ZpbGUtZG93bmxvYWQudHN4IiwKICAgICAgbGluZU51bWJlcjogMTY0LAogICAgICBjb2x1bW5OdW1iZXI6IDEyCiAgICB9LCB0aGlzKTsKICB9Cn07CmNvbnN0IENvbnRhaW5lciA9IHN0eWxlZC5kaXZgCiAgbWF4LXdpZHRoOiA4MDBweDsKICBtYXJnaW46IDAgYXV0bzsKICBwYWRkaW5nOiAyMHB4OwpgOwpfYzIgPSBDb250YWluZXI7CmNvbnN0IFRpdGxlID0gc3R5bGVkLmgyYAogIGNvbG9yOiAjMjgzNzQ3OwogIG1hcmdpbi1ib3R0b206IDEwcHg7CmA7Cl9jMyA9IFRpdGxlOwpjb25zdCBGaWxlc0xpc3QgPSBzdHlsZWQuZGl2YAogIG1hcmdpbi10b3A6IDMwcHg7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIGdhcDogMTVweDsKYDsKX2M0ID0gRmlsZXNMaXN0Owpjb25zdCBGaWxlSXRlbSA9IHN0eWxlZC5kaXZgCiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBwYWRkaW5nOiAxNXB4OwogIGJvcmRlci1yYWRpdXM6IDZweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhOwogIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsIDAsIDAsIDAuMDUpOwogIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7CgogICY6aG92ZXIgewogICAgYmFja2dyb3VuZC1jb2xvcjogI2YxZjNmNTsKICAgIGJveC1zaGFkb3c6IDAgM3B4IDZweCByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgfQpgOwpfYzUgPSBGaWxlSXRlbTsKY29uc3QgRmlsZUluZm8gPSBzdHlsZWQuZGl2YAogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBnYXA6IDVweDsKYDsKX2M2ID0gRmlsZUluZm87CmNvbnN0IEZpbGVOYW1lID0gc3R5bGVkLmgzYAogIG1hcmdpbjogMDsKICBmb250LXNpemU6IDEuMXJlbTsKICBjb2xvcjogIzI4Mzc0NzsKYDsKX2M3ID0gRmlsZU5hbWU7CmNvbnN0IEZpbGVNZXRhZGF0YSA9IHN0eWxlZC5kaXZgCiAgZGlzcGxheTogZmxleDsKICBnYXA6IDE1cHg7CiAgY29sb3I6ICM2Yzc1N2Q7CiAgZm9udC1zaXplOiAwLjlyZW07CmA7Cl9jOCA9IEZpbGVNZXRhZGF0YTsKY29uc3QgRmlsZU5hbWVDb2RlID0gc3R5bGVkLnNwYW5gCiAgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTsKYDsKX2M5ID0gRmlsZU5hbWVDb2RlOwpjb25zdCBGaWxlU2l6ZSA9IHN0eWxlZC5zcGFuYAogIGNvbG9yOiAjNDk1MDU3OwpgOwpfYzAgPSBGaWxlU2l6ZTsKY29uc3QgRG93bmxvYWRCdXR0b24gPSBzdHlsZWQoU0J1dHRvbilgCiAgcGFkZGluZzogOHB4IDE2cHg7CiAgYmFja2dyb3VuZC1jb2xvcjogIzI4Mzc0NzsKICBjb2xvcjogd2hpdGU7CiAgbWluLXdpZHRoOiAxMDBweDsKCiAgJjpob3ZlciB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWUyYTM3OwogIH0KCiAgJjpkaXNhYmxlZCB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjYWRiNWJkOwogIH0KYDsKX2MxID0gRG93bmxvYWRCdXR0b247CmNvbnN0IFN0YXR1cyA9IHN0eWxlZC5zcGFuYAogIHBhZGRpbmc6IDNweCA4cHg7CiAgYm9yZGVyLXJhZGl1czogM3B4OwogIGZvbnQtc2l6ZTogMC44cmVtOwogIG1hcmdpbi10b3A6IDVweDsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgZm9udC13ZWlnaHQ6IDUwMDsKCiAgJHsoeyB2YXJpYW50IH0pID0+IHZhcmlhbnQgPT09ICJwcm9jZXNzaW5nIiAmJiBgCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmM2NkOwogICAgY29sb3I6ICM4NTY0MDQ7CiAgYH0KCiAgJHsoeyB2YXJpYW50IH0pID0+IHZhcmlhbnQgPT09ICJzdWNjZXNzIiAmJiBgCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDRlZGRhOwogICAgY29sb3I6ICMxNTU3MjQ7CiAgYH0KCiAgJHsoeyB2YXJpYW50IH0pID0+IHZhcmlhbnQgPT09ICJlcnJvciIgJiYgYAogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZDdkYTsKICAgIGNvbG9yOiAjNzIxYzI0OwogIGB9CmA7Cl9jMTAgPSBTdGF0dXM7CnZhciBfYywgX2MyLCBfYzMsIF9jNCwgX2M1LCBfYzYsIF9jNywgX2M4LCBfYzksIF9jMCwgX2MxLCBfYzEwOwokUmVmcmVzaFJlZyQoX2MsICJGaWxlRG93bmxvYWQiKTsKJFJlZnJlc2hSZWckKF9jMiwgIkNvbnRhaW5lciIpOwokUmVmcmVzaFJlZyQoX2MzLCAiVGl0bGUiKTsKJFJlZnJlc2hSZWckKF9jNCwgIkZpbGVzTGlzdCIpOwokUmVmcmVzaFJlZyQoX2M1LCAiRmlsZUl0ZW0iKTsKJFJlZnJlc2hSZWckKF9jNiwgIkZpbGVJbmZvIik7CiRSZWZyZXNoUmVnJChfYzcsICJGaWxlTmFtZSIpOwokUmVmcmVzaFJlZyQoX2M4LCAiRmlsZU1ldGFkYXRhIik7CiRSZWZyZXNoUmVnJChfYzksICJGaWxlTmFtZUNvZGUiKTsKJFJlZnJlc2hSZWckKF9jMCwgIkZpbGVTaXplIik7CiRSZWZyZXNoUmVnJChfYzEsICJEb3dubG9hZEJ1dHRvbiIpOwokUmVmcmVzaFJlZyQoX2MxMCwgIlN0YXR1cyIpOwppZiAoaW1wb3J0Lm1ldGEuaG90ICYmICFpbldlYldvcmtlcikgewogIHdpbmRvdy4kUmVmcmVzaFJlZyQgPSBwcmV2UmVmcmVzaFJlZzsKICB3aW5kb3cuJFJlZnJlc2hTaWckID0gcHJldlJlZnJlc2hTaWc7Cn0KaWYgKGltcG9ydC5tZXRhLmhvdCAmJiAhaW5XZWJXb3JrZXIpIHsKICBSZWZyZXNoUnVudGltZS5fX2htcl9pbXBvcnQoaW1wb3J0Lm1ldGEudXJsKS50aGVuKChjdXJyZW50RXhwb3J0cykgPT4gewogICAgUmVmcmVzaFJ1bnRpbWUucmVnaXN0ZXJFeHBvcnRzRm9yUmVhY3RSZWZyZXNoKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvZmlsZS1kb3dubG9hZC9maWxlLWRvd25sb2FkLnRzeCIsIGN1cnJlbnRFeHBvcnRzKTsKICAgIGltcG9ydC5tZXRhLmhvdC5hY2NlcHQoKG5leHRFeHBvcnRzKSA9PiB7CiAgICAgIGlmICghbmV4dEV4cG9ydHMpIHJldHVybjsKICAgICAgY29uc3QgaW52YWxpZGF0ZU1lc3NhZ2UgPSBSZWZyZXNoUnVudGltZS52YWxpZGF0ZVJlZnJlc2hCb3VuZGFyeUFuZEVucXVldWVVcGRhdGUoIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9maWxlLWRvd25sb2FkL2ZpbGUtZG93bmxvYWQudHN4IiwgY3VycmVudEV4cG9ydHMsIG5leHRFeHBvcnRzKTsKICAgICAgaWYgKGludmFsaWRhdGVNZXNzYWdlKSBpbXBvcnQubWV0YS5ob3QuaW52YWxpZGF0ZShpbnZhbGlkYXRlTWVzc2FnZSk7CiAgICB9KTsKICB9KTsKfQoKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKdFlYQndhVzVuY3lJNklrRkJWMDA3T3pzN096czdPenM3T3pzN096czdPMEZCV0U0c1UwRkJVMEVzWjBKQlFXZENPMEZCUTNwQ0xFOUJRVTlETEZsQlFWazdRVUZEYmtJc1UwRkJVME1zWlVGQlpUdEJRVVY0UWl4M1FrRkJkMEpETEdWQlFXVTdRVUZCUVVNc1MwRkJRVHRCUVVOeVF5eFJRVUZOTEVOQlFVTkRMR2RDUVVGblFrTXNhVUpCUVdsQ0xFbEJRVWxPTzBGQlFVRkJMRWxCUXpGRExFTkJRVU03UVVGQlFTeEZRVU5JTzBGQlJVRXNVMEZEUlN4MVFrRkJReXhoUVVORE8wRkJRVUVzTWtKQlFVTXNVMEZCVFN3NFFrRkJVRHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTEZkQlFYRkNPMEZCUVVFc1NVRkZja0lzZFVKQlFVTXNZVUZCVlN4bFFVRlpMR05CUTNCQ1R5eDVRa0ZCWlVNN1FVRkJRVUVzVFVGQlNTeERRVUZEUXl4VFFVTnVRaXgxUWtGQlF5eFpRVUYxUWl4bFFVRmhMR0ZCUVdGQkxFdEJRVXRETEVsQlFVa3NTVUZEZWtRN1FVRkJRU3dyUWtGQlF5eFpRVU5ETzBGQlFVRXNhVU5CUVVNc1dVRkJWVVFzWlVGQlMwVXNVVUZCYUVJN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFTeHBRa0ZCY1VJN1FVRkJRU3hWUVVOeVFpeDFRa0ZCUXl4blFrRkRRenRCUVVGQkxHMURRVUZETEdkQ1FVRmpSaXhsUVVGTFJ5eFpRVUZ3UWp0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQkxHMUNRVUUyUWp0QlFVRkJMRmxCUXpkQ0xIVkNRVUZETEZsQlFWVklMR1ZCUVV0SkxGRkJRV2hDTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFc2JVSkJRWEZDTzBGQlFVRXNaVUZHZGtJN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFTeHBRa0ZIUVR0QlFVRkJMRlZCUTBORExHMUNRVUZ0UWxRc1pVRkJaVWtzUzBGQlMwMHNSVUZCUlN4RFFVRkRPMEZCUVVFc1lVRk9OME03UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVN4bFFVOUJPMEZCUVVFc1VVRkRRVHRCUVVGQkxGVkJRVU03UVVGQlFUdEJRVUZCTEZsQlEwTXNVMEZCVXl4TlFVRk5ReXhsUVVGbFVDeExRVUZMVFN4SlFVRkpUaXhOUVVGTlNDeHBRa0ZCYVVJN1FVRkJRU3haUVVNNVJDeFZRVUZWUkN4bFFVRmxTU3hMUVVGTFRTeEZRVUZGTEUxQlFVMDdRVUZCUVN4WlFVTjBReXhsUVVGaExHMUNRVUZ0UWs0c1MwRkJTMFVzU1VGQlNUdEJRVUZCTEZsQlJYaERUaXg1UWtGQlpVa3NTMEZCUzAwc1JVRkJSU3hOUVVGTkxHVkJRM3BDTEdsQ1FVTkJPMEZCUVVFN1FVRkJRU3hWUVZCT08wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRU3hSUVZGQk8wRkJRVUVzVjBGcVFtRk9MRXRCUVV0TkxFbEJRWEJDTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFc1lVRnJRa0U3UVVGQlFTeEpRVU5FTEV0QmNrSklPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUVzVjBGelFrRTdRVUZCUVN4UFFYcENSanRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTEZOQk1FSkJPMEZCUlVvN1FVRkJRMWdzUjBGc1EzVkNSQ3hqUVVGWk8wRkJRVUZqTEV0QlFWcGtPMEZCTmtONFFpeE5RVUZOU1N4cFFrRkJOa0k3UVVGQlFTeEZRVU5xUXp0QlFVRkJMRWxCUTBWUkxFbEJRVWs3UVVGQlFTeEpRVU5LU2l4TlFVRk5PMEZCUVVFc1NVRkRUa01zVlVGQlZUdEJRVUZCTEVsQlExWkdMRTFCUVUwN1FVRkJRU3hKUVVOT1J5eE5RVUZOTzBGQlFVRXNSVUZEVWp0QlFVRkJMRVZCUTBFN1FVRkJRU3hKUVVORlJTeEpRVUZKTzBGQlFVRXNTVUZEU2tvc1RVRkJUVHRCUVVGQkxFbEJRMDVETEZWQlFWVTdRVUZCUVN4SlFVTldSaXhOUVVGTk8wRkJRVUVzU1VGRFRrY3NUVUZCVFR0QlFVRkJMRVZCUTFJN1FVRkJRU3hGUVVOQk8wRkJRVUVzU1VGRFJVVXNTVUZCU1R0QlFVRkJMRWxCUTBwS0xFMUJRVTA3UVVGQlFTeEpRVU5PUXl4VlFVRlZPMEZCUVVFc1NVRkRWa1lzVFVGQlRUdEJRVUZCTEVsQlEwNUhMRTFCUVUwN1FVRkJRU3hGUVVOU08wRkJRVUVzUlVGRFFUdEJRVUZCTEVsQlEwVkZMRWxCUVVrN1FVRkJRU3hKUVVOS1NpeE5RVUZOTzBGQlFVRXNTVUZEVGtNc1ZVRkJWVHRCUVVGQkxFbEJRMVpHTEUxQlFVMDdRVUZCUVN4SlFVTk9SeXhOUVVGTk8wRkJRVUVzUlVGRFVqdEJRVUZCTEVWQlEwRTdRVUZCUVN4SlFVTkZSU3hKUVVGSk8wRkJRVUVzU1VGRFNrb3NUVUZCVFR0QlFVRkJMRWxCUTA1RExGVkJRVlU3UVVGQlFTeEpRVU5XUml4TlFVRk5PMEZCUVVFc1NVRkRUa2NzVFVGQlRUdEJRVUZCTEVWQlExSTdRVUZCUXp0QlFWTklMRTFCUVUxSExHbENRVUZwUWl4UFFVTnlRa1VzVVVGRFFWUXNUVUZEUVVnc2MwSkJSMGM3UVVGRFNFRXNiMEpCUVd0Q0xFTkJRVU5oTEZWQlFWVXNSVUZCUlN4SFFVRkhRU3hOUVVGTkxFTkJRVU5FTEUxQlFVMHNSMEZCUnl4aFFVRmhMRVZCUVVVN1FVRkZha1VzVVVGQlRVVXNaMEpCUVdkQ1FTeE5RVUZOUXl4TFFVRkxReXhOUVVGTlJDeExRVUZMUlN4UFFVRlBMRWxCUVVrc1IwRkJTU3hKUVVGSk8wRkJSUzlFTEUxQlFVazdRVUZGUml4VlFVRk5MRWxCUVVsRExGRkJRVkVzUTBGQlEwTXNXVUZCV1VNc1YwRkJWMFFzVTBGQlUwd3NZMEZCWXl4RFFVRkRMRU5CUVVNN1FVRkhia1VzVlVGQlRVOHNWVUZCVlN4WFFVRlhiRUlzUzBGQlMwY3NVVUZCVVR0QlFVZDRReXhWUVVGTlowSXNUMEZCVDBNc1UwRkJVME1zWTBGQll5eEhRVUZITzBGQlEzWkRSaXhUUVVGTFJ5eFBRVUZQU2p0QlFVTmFReXhUUVVGTFNTeFhRVUZYZGtJc1MwRkJTMGM3UVVGRGNrSm5RaXhUUVVGTFN5eGhRVUZoTEdWQlFXVXNjVUpCUVhGQ1ppeE5RVUZOTEVWQlFVVTdRVUZET1VSWExHRkJRVk5MTEV0QlFVdERMRmxCUVZsUUxFbEJRVWs3UVVGRE9VSkJMRk5CUVV0UkxFMUJRVTA3UVVGRFdGQXNZVUZCVTBzc1MwRkJTMGNzV1VGQldWUXNTVUZCU1R0QlFVVTVRblJDTEhOQ1FVRnJRaXhEUVVGRFlTeFZRVUZWTEVWQlFVVXNSMEZCUjBFc1RVRkJUU3hEUVVGRFJDeE5RVUZOTEVkQlFVY3NWVUZCVlN4RlFVRkZPMEZCUnpsRVVTeGxRVUZYTEUxQlFVMDdRVUZEWm5CQ0xIZENRVUZyUWl4RFFVRkRZU3hUUVVGVE8wRkJRekZDTEdOQlFVMXRRaXhaUVVGWkxFVkJRVVVzUjBGQlIyNUNMRXRCUVVzN1FVRkROVUlzWlVGQlQyMUNMRlZCUVZWd1FpeE5RVUZOTzBGQlEzWkNMR1ZCUVU5dlFqdEJRVUZCUVN4TlFVTlVMRU5CUVVNN1FVRkJRU3hKUVVOSUxFZEJRVWRzUWl4alFVRmpMRU5CUVVNN1FVRkJRU3hGUVVOd1FpeFRRVUZUYlVJc1QwRkJUenRCUVVOa1F5eFpRVUZSUkN4TlFVRk5MRzFDUVVGdFFrRXNTMEZCU3p0QlFVTjBRMnBETEhOQ1FVRnJRaXhEUVVGRFlTeFZRVUZWTEVWQlFVVXNSMEZCUjBFc1RVRkJUU3hEUVVGRFJDeE5RVUZOTEVkQlFVY3NVVUZCVVN4RlFVRkZPMEZCUVVFc1JVRkRPVVE3UVVGRFJqdEJRVVZCTEUxQlFVMUtMSEZDUVVGeFFrRXNRMEZCUXpKQ0xGZEJRU3RDTzBGQlEzcEVMRTFCUVVrc1EwRkJRMEVzVDBGQlVTeFJRVUZQTzBGQlJYQkNMRTFCUVVsQkxGZEJRVmNzWTBGQll6dEJRVU16UWl4WFFVRlBMSFZDUVVGRExGVkJRVThzVTBGQlVTeGpRVUZoTERaQ1FVRTNRanRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTEZkQlFUQkRPMEZCUVVFc1JVRkRia1FzVjBGQlYwRXNWMEZCVnl4WFFVRlhPMEZCUXk5Q0xGZEJRVThzZFVKQlFVTXNWVUZCVHl4VFFVRlJMRmRCUVZVc2FVTkJRVEZDTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFc1YwRkJNa003UVVGQlFTeEZRVU53UkN4UFFVRlBPMEZCUTB3c1YwRkJUeXgxUWtGQlF5eFZRVUZQTEZOQlFWRXNVMEZCVVN4cFEwRkJlRUk3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVN4WFFVRjVRenRCUVVGQkxFVkJRMnhFTzBGQlEwWTdRVUZGUVN4TlFVRk5ReXhaUVVGWmVrTXNUMEZCVHpCRE8wRkJRVUZCTzBGQlFVRkJPMEZCUVVGQk8wRkJRVUZCTzBGQlNYaENReXhOUVVwTFJqdEJRVTFPTEUxQlFVMUhMRkZCUVZFMVF5eFBRVUZQTmtNN1FVRkJRVUU3UVVGQlFVRTdRVUZCUVVFN1FVRkhjRUpETEUxQlNFdEdPMEZCUzA0c1RVRkJUVWNzV1VGQldTOURMRTlCUVU4d1F6dEJRVUZCUVR0QlFVRkJRVHRCUVVGQlFUdEJRVUZCUVR0QlFVRkJRVHRCUVV0NFFrMHNUVUZNUzBRN1FVRlBUaXhOUVVGTlJTeFhRVUZYYWtRc1QwRkJUekJETzBGQlFVRkJPMEZCUVVGQk8wRkJRVUZCTzBGQlFVRkJPMEZCUVVGQk8wRkJRVUZCTzBGQlFVRkJPMEZCUVVGQk8wRkJRVUZCTzBGQlFVRkJPMEZCUVVGQk8wRkJRVUZCTzBGQlFVRkJPMEZCUVVGQk8wRkJZM1pDVVN4TlFXUkxSRHRCUVdkQ1RpeE5RVUZOUlN4WFFVRlhia1FzVDBGQlR6QkRPMEZCUVVGQk8wRkJRVUZCTzBGQlFVRkJPMEZCUVVGQk8wRkJTWFpDVlN4TlFVcExSRHRCUVUxT0xFMUJRVTFGTEZkQlFWZHlSQ3hQUVVGUGMwUTdRVUZCUVVFN1FVRkJRVUU3UVVGQlFVRTdRVUZCUVVFN1FVRkpka0pETEUxQlNrdEdPMEZCVFU0c1RVRkJUVWNzWlVGQlpYaEVMRTlCUVU4d1F6dEJRVUZCUVR0QlFVRkJRVHRCUVVGQlFUdEJRVUZCUVR0QlFVRkJRVHRCUVVzelFtVXNUVUZNUzBRN1FVRlBUaXhOUVVGTlJTeGxRVUZsTVVRc1QwRkJUekpFTzBGQlFVRkJPMEZCUVVGQk8wRkJSVE5DUXl4TlFVWkxSanRCUVVsT0xFMUJRVTFITEZkQlFWYzNSQ3hQUVVGUE1rUTdRVUZCUVVFN1FVRkJRVUU3UVVGRmRrSkhMRTFCUmt0RU8wRkJTVTRzVFVGQlRVVXNhVUpCUVdsQ0wwUXNUMEZCVDBNc1QwRkJUenRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQllYQkRLMFFzVFVGaVMwUTdRVUZsVGl4TlFVRk5SU3hUUVVGVGFrVXNUMEZCVHpKRU8wRkJRVUZCTzBGQlFVRkJPMEZCUVVGQk8wRkJRVUZCTzBGQlFVRkJPMEZCUVVGQk8wRkJRVUZCTzBGQlFVRkJMRWxCVld4Q0xFTkJRVU1zUlVGQlJVOHNVVUZCVVN4TlFVTllRU3haUVVGWkxHZENRVU5hTzBGQlFVRTdRVUZCUVR0QlFVRkJMRWRCUjBRN1FVRkJRVHRCUVVGQkxFbEJSVU1zUTBGQlF5eEZRVUZGUVN4UlFVRlJMRTFCUTFoQkxGbEJRVmtzWVVGRFdqdEJRVUZCTzBGQlFVRTdRVUZCUVN4SFFVZEVPMEZCUVVFN1FVRkJRU3hKUVVWRExFTkJRVU1zUlVGQlJVRXNVVUZCVVN4TlFVTllRU3haUVVGWkxGZEJRMW83UVVGQlFUdEJRVUZCTzBGQlFVRXNSMEZIUkR0QlFVRkJPMEZCUTBaRExFOUJPVUpMUmp0QlFVRk5MRWxCUVVGcVJDeEpRVUZCTWtJc1MwRkJRVWNzUzBGQlFVVXNTMEZCUVVVc1MwRkJRVVVzUzBGQlFVY3NTMEZCUVVVc1MwRkJRVWNzUzBGQlFVVXNTMEZCUVVVc1MwRkJRVWM3UVVGQlFVTXNZVUZCUVhCRUxFbEJRVUU3UVVGQlFXOUVMR0ZCUVVGNlFpeExRVUZCTzBGQlFVRjVRaXhoUVVGQmRFSXNTMEZCUVR0QlFVRkJjMElzWVVGQlFYQkNMRXRCUVVFN1FVRkJRVzlDTEdGQlFVRnNRaXhMUVVGQk8wRkJRVUZyUWl4aFFVRkJhRUlzUzBGQlFUdEJRVUZCWjBJc1lVRkJRV0lzUzBGQlFUdEJRVUZCWVN4aFFVRkJXQ3hMUVVGQk8wRkJRVUZYTEdGQlFVRlNMRXRCUVVFN1FVRkJRVkVzWVVGQlFVNHNTMEZCUVR0QlFVRkJUU3hoUVVGQlNpeExRVUZCTzBGQlFVRkpMR0ZCUVVGRUxFMUJRVUVpTENKdVlXMWxjeUk2V3lKMWMyVlRkR0YwWlNJc0luTjBlV3hsWkNJc0lsTkNkWFIwYjI0aUxDSkdhV3hsUkc5M2JteHZZV1FpTENKZmN5SXNJbVJ2ZDI1c2IyRmtVM1JoZEhWeklpd2ljMlYwUkc5M2JteHZZV1JUZEdGMGRYTWlMQ0poZG1GcGJHRmliR1ZHYVd4bGN5SXNJbTFoY0NJc0ltWnBiR1VpTENKMGVYQmxJaXdpYm1GdFpTSXNJbVpwYkdWdVlXMWxJaXdpYzJsNlpTSXNJbWRsZEZOMFlYUjFjMGx1WkdsallYUnZjaUlzSW1sa0lpd2lhR0Z1Wkd4bFJHOTNibXh2WVdRaUxDSmZZeUlzSW1acGJHVkpaQ0lzSW5CeVpYWWlMQ0puWlhSU1lXNWtiMjFVYVcxbElpd2lUV0YwYUNJc0ltWnNiMjl5SWl3aWNtRnVaRzl0SWl3aVVISnZiV2x6WlNJc0luSmxjMjlzZG1VaUxDSnpaWFJVYVcxbGIzVjBJaXdpWm1sc1pWVnliQ0lzSW14cGJtc2lMQ0prYjJOMWJXVnVkQ0lzSW1OeVpXRjBaVVZzWlcxbGJuUWlMQ0pvY21WbUlpd2laRzkzYm14dllXUWlMQ0p6WlhSQmRIUnlhV0oxZEdVaUxDSmliMlI1SWl3aVlYQndaVzVrUTJocGJHUWlMQ0pqYkdsamF5SXNJbkpsYlc5MlpVTm9hV3hrSWl3aWJtVjNVM1JoZEhWeklpd2laWEp5YjNJaUxDSmpiMjV6YjJ4bElpd2ljM1JoZEhWeklpd2lRMjl1ZEdGcGJtVnlJaXdpWkdsMklpd2lYMk15SWl3aVZHbDBiR1VpTENKb01pSXNJbDlqTXlJc0lrWnBiR1Z6VEdsemRDSXNJbDlqTkNJc0lrWnBiR1ZKZEdWdElpd2lYMk0xSWl3aVJtbHNaVWx1Wm04aUxDSmZZellpTENKR2FXeGxUbUZ0WlNJc0ltZ3pJaXdpWDJNM0lpd2lSbWxzWlUxbGRHRmtZWFJoSWl3aVgyTTRJaXdpUm1sc1pVNWhiV1ZEYjJSbElpd2ljM0JoYmlJc0lsOWpPU0lzSWtacGJHVlRhWHBsSWl3aVgyTXdJaXdpUkc5M2JteHZZV1JDZFhSMGIyNGlMQ0pmWXpFaUxDSlRkR0YwZFhNaUxDSjJZWEpwWVc1MElpd2lYMk14TUNJc0lpUlNaV1p5WlhOb1VtVm5KQ0pkTENKcFoyNXZjbVZNYVhOMElqcGJYU3dpYzI5MWNtTmxjeUk2V3lKbWFXeGxMV1J2ZDI1c2IyRmtMblJ6ZUNKZExDSnpiM1Z5WTJWelEyOXVkR1Z1ZENJNld5SnBiWEJ2Y25RZ2V5QjFjMlZUZEdGMFpTQjlJR1p5YjIwZ0ozSmxZV04wSjF4dWFXMXdiM0owSUhOMGVXeGxaQ0JtY205dElDZHpkSGxzWldRdFkyOXRjRzl1Wlc1MGN5ZGNibWx0Y0c5eWRDQjdJRk5DZFhSMGIyNGdmU0JtY205dElDY3VMaTh1TGk5emRIbHNaWE12YzNSNWJHVmtMV052YlhCdmJtVnVkSE1uWEc1Y2JtVjRjRzl5ZENCa1pXWmhkV3gwSUdaMWJtTjBhVzl1SUVacGJHVkViM2R1Ykc5aFpDZ3BJSHRjYmlBZ1kyOXVjM1FnVzJSdmQyNXNiMkZrVTNSaGRIVnpMQ0J6WlhSRWIzZHViRzloWkZOMFlYUjFjMTBnUFNCMWMyVlRkR0YwWlR4U1pXTnZjbVE4Ym5WdFltVnlMQ0J6ZEhKcGJtYytQaWhjYmlBZ0lDQjdmVnh1SUNBcFhHNWNiaUFnY21WMGRYSnVJQ2hjYmlBZ0lDQThRMjl1ZEdGcGJtVnlQbHh1SUNBZ0lDQWdQRlJwZEd4bFBrWnBiR1VnUkc5M2JteHZZV1J6UEM5VWFYUnNaVDVjYmx4dUlDQWdJQ0FnUEVacGJHVnpUR2x6ZENCa1lYUmhMWFJsYzNScFpEMWNJbVpwYkdWekxXeHBjM1JjSWo1Y2JpQWdJQ0FnSUNBZ2UyRjJZV2xzWVdKc1pVWnBiR1Z6TG0xaGNDZ29abWxzWlNrZ1BUNGdLRnh1SUNBZ0lDQWdJQ0FnSUR4R2FXeGxTWFJsYlNCclpYazllMlpwYkdVdWFXUjlJR1JoZEdFdGRHVnpkR2xrUFh0Z1ptbHNaUzEwZVhCbExTUjdabWxzWlM1MGVYQmxmV0I5UGx4dUlDQWdJQ0FnSUNBZ0lDQWdQRVpwYkdWSmJtWnZQbHh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQThSbWxzWlU1aGJXVStlMlpwYkdVdWJtRnRaWDA4TDBacGJHVk9ZVzFsUGx4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0E4Um1sc1pVMWxkR0ZrWVhSaFBseHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lEeEdhV3hsVG1GdFpVTnZaR1UrZTJacGJHVXVabWxzWlc1aGJXVjlQQzlHYVd4bFRtRnRaVU52WkdVK1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BFWnBiR1ZUYVhwbFBudG1hV3hsTG5OcGVtVjlQQzlHYVd4bFUybDZaVDVjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdQQzlHYVd4bFRXVjBZV1JoZEdFK1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUh0blpYUlRkR0YwZFhOSmJtUnBZMkYwYjNJb1pHOTNibXh2WVdSVGRHRjBkWE5iWm1sc1pTNXBaRjBwZlZ4dUlDQWdJQ0FnSUNBZ0lDQWdQQzlHYVd4bFNXNW1iejVjYmlBZ0lDQWdJQ0FnSUNBZ0lEeEViM2R1Ykc5aFpFSjFkSFJ2Ymx4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0J2YmtOc2FXTnJQWHNvS1NBOVBpQm9ZVzVrYkdWRWIzZHViRzloWkNobWFXeGxMbWxrTENCbWFXeGxMQ0J6WlhSRWIzZHViRzloWkZOMFlYUjFjeWw5WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJR1JwYzJGaWJHVmtQWHRrYjNkdWJHOWhaRk4wWVhSMWMxdG1hV3hsTG1sa1hTQTlQVDBnSjNCeWIyTmxjM05wYm1jbmZWeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNCa1lYUmhMWFJsYzNScFpEMTdZR1J2ZDI1c2IyRmtMV0oxZEhSdmJpMGtlMlpwYkdVdWJtRnRaWDFnZlZ4dUlDQWdJQ0FnSUNBZ0lDQWdQbHh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQjdaRzkzYm14dllXUlRkR0YwZFhOYlptbHNaUzVwWkYwZ1BUMDlJQ2R3Y205alpYTnphVzVuSjF4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUQ4Z0oxQnlaWEJoY21sdVp5NHVMaWRjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E2SUNkRWIzZHViRzloWkNkOVhHNGdJQ0FnSUNBZ0lDQWdJQ0E4TDBSdmQyNXNiMkZrUW5WMGRHOXVQbHh1SUNBZ0lDQWdJQ0FnSUR3dlJtbHNaVWwwWlcwK1hHNGdJQ0FnSUNBZ0lDa3BmVnh1SUNBZ0lDQWdQQzlHYVd4bGMweHBjM1ErWEc0Z0lDQWdQQzlEYjI1MFlXbHVaWEkrWEc0Z0lDbGNibjFjYmx4dWRIbHdaU0JHYVd4bFNYUmxiU0E5SUh0Y2JpQWdhV1E2SUc1MWJXSmxjbHh1SUNCdVlXMWxPaUJ6ZEhKcGJtZGNiaUFnWm1sc1pXNWhiV1U2SUhOMGNtbHVaMXh1SUNCMGVYQmxPaUJ6ZEhKcGJtZGNiaUFnYzJsNlpUb2djM1J5YVc1blhHNTlYRzVjYmk4dklFeHBjM1FnYjJZZ1lYWmhhV3hoWW14bElHWnBiR1Z6SUhSdklHUnZkMjVzYjJGa1hHNWpiMjV6ZENCaGRtRnBiR0ZpYkdWR2FXeGxjem9nUm1sc1pVbDBaVzFiWFNBOUlGdGNiaUFnZTF4dUlDQWdJR2xrT2lBeExGeHVJQ0FnSUc1aGJXVTZJQ2RXWldOMGIzSXRZbUZ6WldRZ1VFUkdJRVJ2WTNWdFpXNTBKeXhjYmlBZ0lDQm1hV3hsYm1GdFpUb2dKekl3TWpRMk16WXVjR1JtSnl4Y2JpQWdJQ0IwZVhCbE9pQW5ZWEJ3YkdsallYUnBiMjR2Y0dSbUp5eGNiaUFnSUNCemFYcGxPaUFuTWpNMElFdENKMXh1SUNCOUxGeHVJQ0I3WEc0Z0lDQWdhV1E2SURJc1hHNGdJQ0FnYm1GdFpUb2dKMVJsZUhRdFltRnpaV1FnVUVSR0lFUnZZM1Z0Wlc1MEp5eGNiaUFnSUNCbWFXeGxibUZ0WlRvZ0ozTnBiWEJzWlM1d1pHWW5MRnh1SUNBZ0lIUjVjR1U2SUNkaGNIQnNhV05oZEdsdmJpOXdaR1luTEZ4dUlDQWdJSE5wZW1VNklDYzRJRXRDSjF4dUlDQjlMRnh1SUNCN1hHNGdJQ0FnYVdRNklETXNYRzRnSUNBZ2JtRnRaVG9nSjFwSlVDQkJjbU5vYVhabEp5eGNiaUFnSUNCbWFXeGxibUZ0WlRvZ0oyTmhjMlZ6WDJWNGNHOXlkQzU2YVhBbkxGeHVJQ0FnSUhSNWNHVTZJQ2RoY0hCc2FXTmhkR2x2Ymk5NmFYQW5MRnh1SUNBZ0lITnBlbVU2SUNjMU9UZ2dTMEluWEc0Z0lIMHNYRzRnSUh0Y2JpQWdJQ0JwWkRvZ05DeGNiaUFnSUNCdVlXMWxPaUFuUTFOV0lFVjRjRzl5ZENjc1hHNGdJQ0FnWm1sc1pXNWhiV1U2SUNkbGVIQnZjblJmWVd4bGNuUnpMbU56ZGljc1hHNGdJQ0FnZEhsd1pUb2dKM1JsZUhRdlkzTjJKeXhjYmlBZ0lDQnphWHBsT2lBbk1qVWdTMEluWEc0Z0lIMHNYRzRnSUh0Y2JpQWdJQ0JwWkRvZ05TeGNiaUFnSUNCdVlXMWxPaUFuUlhoalpXd2dVM0J5WldGa2MyaGxaWFFuTEZ4dUlDQWdJR1pwYkdWdVlXMWxPaUFuYzJWdmJsOTBjbUZ1YzJGamRHbHZibk5mWlhod2IzSjBYekUzTlRBeU5ETXpNakEwT1RjdWVHeHplQ2NzWEc0Z0lDQWdkSGx3WlRvZ0oyRndjR3hwWTJGMGFXOXVMM1p1WkM1dmNHVnVlRzFzWm05eWJXRjBjeTF2Wm1acFkyVmtiMk4xYldWdWRDNXpjSEpsWVdSemFHVmxkRzFzTG5Ob1pXVjBKeXhjYmlBZ0lDQnphWHBsT2lBbk1TNDBJRTFDSjF4dUlDQjlYRzVkWEc1Y2JpOHFLbHh1SUNvZ1NHRnVaR3hsSUdacGJHVWdaRzkzYm14dllXUWdkMmwwYUNCaGNuUnBabWxqYVdGc0lHUmxiR0Y1SUhSdklITnBiWFZzWVhSbElISmxZV3d0ZDI5eWJHUWdjMk5sYm1GeWFXOXpYRzRnS2lCQWNHRnlZVzBnWm1sc1pVbGtJQzBnU1VRZ2IyWWdkR2hsSUdacGJHVWdkRzhnWkc5M2JteHZZV1JjYmlBcUlFQndZWEpoYlNCbWFXeGxJQzBnUm1sc1pTQnBkR1Z0SUhSdklHUnZkMjVzYjJGa1hHNGdLaUJBY0dGeVlXMGdjMlYwUkc5M2JteHZZV1JUZEdGMGRYTWdMU0JUZEdGMGRYTWdkWEJrWVhSbElHWjFibU4wYVc5dVhHNGdLaTljYm1OdmJuTjBJR2hoYm1Sc1pVUnZkMjVzYjJGa0lEMGdZWE41Ym1NZ0tGeHVJQ0JtYVd4bFNXUTZJRzUxYldKbGNpeGNiaUFnWm1sc1pUb2dSbWxzWlVsMFpXMHNYRzRnSUhObGRFUnZkMjVzYjJGa1UzUmhkSFZ6T2lCU1pXRmpkQzVFYVhOd1lYUmphRHhjYmlBZ0lDQlNaV0ZqZEM1VFpYUlRkR0YwWlVGamRHbHZianhTWldOdmNtUThiblZ0WW1WeUxDQnpkSEpwYm1jK1BseHVJQ0ErWEc0cElEMCtJSHRjYmlBZ2MyVjBSRzkzYm14dllXUlRkR0YwZFhNb0tIQnlaWFlwSUQwK0lDaDdJQzR1TG5CeVpYWXNJRnRtYVd4bFNXUmRPaUFuY0hKdlkyVnpjMmx1WnljZ2ZTa3BYRzVjYmlBZ1kyOXVjM1FnWjJWMFVtRnVaRzl0VkdsdFpTQTlJQ2dwSUQwK0lFMWhkR2d1Wm14dmIzSW9UV0YwYUM1eVlXNWtiMjBvS1NBcUlETXdNREFwSUNzZ01UVXdNRnh1WEc0Z0lIUnllU0I3WEc0Z0lDQWdMeThnWkdWc1lYa2dkRzhnYzJsdGRXeGhkR1VnY0hKdlkyVnpjMmx1WnlCMGFXMWxYRzRnSUNBZ1lYZGhhWFFnYm1WM0lGQnliMjFwYzJVb0tISmxjMjlzZG1VcElEMCtJSE5sZEZScGJXVnZkWFFvY21WemIyeDJaU3dnWjJWMFVtRnVaRzl0VkdsdFpTZ3BLU2xjYmx4dUlDQWdJQzh2SUhkdmNtdHpJR2xtSUhSb1pTQm1hV3hsY3lCbWIyeGtaWElnYVhNZ1pHVndiRzk1WldRZ1lXeHZibWR6YVdSbElIUm9aU0JqYjIxd2IyNWxiblJjYmlBZ0lDQmpiMjV6ZENCbWFXeGxWWEpzSUQwZ1lDNHZabWxzWlhNdkpIdG1hV3hsTG1acGJHVnVZVzFsZldCY2JseHVJQ0FnSUM4dklHTnlaV0YwWlNCaGJpQmhibU5vYjNJZ1pXeGxiV1Z1ZENCaGJtUWdkSEpwWjJkbGNpQjBhR1VnWkc5M2JteHZZV1JjYmlBZ0lDQmpiMjV6ZENCc2FXNXJJRDBnWkc5amRXMWxiblF1WTNKbFlYUmxSV3hsYldWdWRDZ25ZU2NwWEc0Z0lDQWdiR2x1YXk1b2NtVm1JRDBnWm1sc1pWVnliRnh1SUNBZ0lHeHBibXN1Wkc5M2JteHZZV1FnUFNCbWFXeGxMbVpwYkdWdVlXMWxYRzRnSUNBZ2JHbHVheTV6WlhSQmRIUnlhV0oxZEdVb0oyUmhkR0V0ZEdWemRHbGtKeXdnWUdSdmQyNXNiMkZrTFdOdmJYQnNaWFJsTFNSN1ptbHNaVWxrZldBcFhHNGdJQ0FnWkc5amRXMWxiblF1WW05a2VTNWhjSEJsYm1SRGFHbHNaQ2hzYVc1cktWeHVJQ0FnSUd4cGJtc3VZMnhwWTJzb0tWeHVJQ0FnSUdSdlkzVnRaVzUwTG1KdlpIa3VjbVZ0YjNabFEyaHBiR1FvYkdsdWF5bGNibHh1SUNBZ0lITmxkRVJ2ZDI1c2IyRmtVM1JoZEhWektDaHdjbVYyS1NBOVBpQW9leUF1TGk1d2NtVjJMQ0JiWm1sc1pVbGtYVG9nSjNOMVkyTmxjM01uSUgwcEtWeHVYRzRnSUNBZ0x5OGdjbVZ6WlhRZ2MzUmhkSFZ6WEc0Z0lDQWdjMlYwVkdsdFpXOTFkQ2dvS1NBOVBpQjdYRzRnSUNBZ0lDQnpaWFJFYjNkdWJHOWhaRk4wWVhSMWN5Z29jSEpsZGlrZ1BUNGdlMXh1SUNBZ0lDQWdJQ0JqYjI1emRDQnVaWGRUZEdGMGRYTWdQU0I3SUM0dUxuQnlaWFlnZlZ4dUlDQWdJQ0FnSUNCa1pXeGxkR1VnYm1WM1UzUmhkSFZ6VzJacGJHVkpaRjFjYmlBZ0lDQWdJQ0FnY21WMGRYSnVJRzVsZDFOMFlYUjFjMXh1SUNBZ0lDQWdmU2xjYmlBZ0lDQjlMQ0JuWlhSU1lXNWtiMjFVYVcxbEtDa3BYRzRnSUgwZ1kyRjBZMmdnS0dWeWNtOXlLU0I3WEc0Z0lDQWdZMjl1YzI5c1pTNWxjbkp2Y2lnblJHOTNibXh2WVdRZ1pYSnliM0k2Snl3Z1pYSnliM0lwWEc0Z0lDQWdjMlYwUkc5M2JteHZZV1JUZEdGMGRYTW9LSEJ5WlhZcElEMCtJQ2g3SUM0dUxuQnlaWFlzSUZ0bWFXeGxTV1JkT2lBblpYSnliM0luSUgwcEtWeHVJQ0I5WEc1OVhHNWNibU52Ym5OMElHZGxkRk4wWVhSMWMwbHVaR2xqWVhSdmNpQTlJQ2h6ZEdGMGRYTTZJSE4wY21sdVp5QjhJSFZ1WkdWbWFXNWxaQ2tnUFQ0Z2UxeHVJQ0JwWmlBb0lYTjBZWFIxY3lrZ2NtVjBkWEp1SUc1MWJHeGNibHh1SUNCcFppQW9jM1JoZEhWeklEMDlQU0FuY0hKdlkyVnpjMmx1WnljcElIdGNiaUFnSUNCeVpYUjFjbTRnUEZOMFlYUjFjeUIyWVhKcFlXNTBQVndpY0hKdlkyVnpjMmx1WjF3aVBsQnliMk5sYzNOcGJtY3VMaTQ4TDFOMFlYUjFjejVjYmlBZ2ZTQmxiSE5sSUdsbUlDaHpkR0YwZFhNZ1BUMDlJQ2R6ZFdOalpYTnpKeWtnZTF4dUlDQWdJSEpsZEhWeWJpQThVM1JoZEhWeklIWmhjbWxoYm5ROVhDSnpkV05qWlhOelhDSStSRzkzYm14dllXUWdZMjl0Y0d4bGRHVThMMU4wWVhSMWN6NWNiaUFnZlNCbGJITmxJSHRjYmlBZ0lDQnlaWFIxY200Z1BGTjBZWFIxY3lCMllYSnBZVzUwUFZ3aVpYSnliM0pjSWo1RmNuSnZjaUF0SUhSeWVTQmhaMkZwYmp3dlUzUmhkSFZ6UGx4dUlDQjlYRzU5WEc1Y2JtTnZibk4wSUVOdmJuUmhhVzVsY2lBOUlITjBlV3hsWkM1a2FYWmdYRzRnSUcxaGVDMTNhV1IwYURvZ09EQXdjSGc3WEc0Z0lHMWhjbWRwYmpvZ01DQmhkWFJ2TzF4dUlDQndZV1JrYVc1bk9pQXlNSEI0TzF4dVlGeHVYRzVqYjI1emRDQlVhWFJzWlNBOUlITjBlV3hsWkM1b01tQmNiaUFnWTI5c2IzSTZJQ015T0RNM05EYzdYRzRnSUcxaGNtZHBiaTFpYjNSMGIyMDZJREV3Y0hnN1hHNWdYRzVjYm1OdmJuTjBJRVpwYkdWelRHbHpkQ0E5SUhOMGVXeGxaQzVrYVhaZ1hHNGdJRzFoY21kcGJpMTBiM0E2SURNd2NIZzdYRzRnSUdScGMzQnNZWGs2SUdac1pYZzdYRzRnSUdac1pYZ3RaR2x5WldOMGFXOXVPaUJqYjJ4MWJXNDdYRzRnSUdkaGNEb2dNVFZ3ZUR0Y2JtQmNibHh1WTI5dWMzUWdSbWxzWlVsMFpXMGdQU0J6ZEhsc1pXUXVaR2wyWUZ4dUlDQmthWE53YkdGNU9pQm1iR1Y0TzF4dUlDQnFkWE4wYVdaNUxXTnZiblJsYm5RNklITndZV05sTFdKbGRIZGxaVzQ3WEc0Z0lHRnNhV2R1TFdsMFpXMXpPaUJqWlc1MFpYSTdYRzRnSUhCaFpHUnBibWM2SURFMWNIZzdYRzRnSUdKdmNtUmxjaTF5WVdScGRYTTZJRFp3ZUR0Y2JpQWdZbUZqYTJkeWIzVnVaQzFqYjJ4dmNqb2dJMlk0WmpsbVlUdGNiaUFnWW05NExYTm9ZV1J2ZHpvZ01DQXljSGdnTkhCNElISm5ZbUVvTUN3Z01Dd2dNQ3dnTUM0d05TazdYRzRnSUhSeVlXNXphWFJwYjI0NklHRnNiQ0F3TGpKeklHVmhjMlU3WEc1Y2JpQWdKanBvYjNabGNpQjdYRzRnSUNBZ1ltRmphMmR5YjNWdVpDMWpiMnh2Y2pvZ0kyWXhaak5tTlR0Y2JpQWdJQ0JpYjNndGMyaGhaRzkzT2lBd0lETndlQ0EyY0hnZ2NtZGlZU2d3TENBd0xDQXdMQ0F3TGpFcE8xeHVJQ0I5WEc1Z1hHNWNibU52Ym5OMElFWnBiR1ZKYm1adklEMGdjM1I1YkdWa0xtUnBkbUJjYmlBZ1pHbHpjR3hoZVRvZ1pteGxlRHRjYmlBZ1pteGxlQzFrYVhKbFkzUnBiMjQ2SUdOdmJIVnRianRjYmlBZ1oyRndPaUExY0hnN1hHNWdYRzVjYm1OdmJuTjBJRVpwYkdWT1lXMWxJRDBnYzNSNWJHVmtMbWd6WUZ4dUlDQnRZWEpuYVc0NklEQTdYRzRnSUdadmJuUXRjMmw2WlRvZ01TNHhjbVZ0TzF4dUlDQmpiMnh2Y2pvZ0l6STRNemMwTnp0Y2JtQmNibHh1WTI5dWMzUWdSbWxzWlUxbGRHRmtZWFJoSUQwZ2MzUjViR1ZrTG1ScGRtQmNiaUFnWkdsemNHeGhlVG9nWm14bGVEdGNiaUFnWjJGd09pQXhOWEI0TzF4dUlDQmpiMnh2Y2pvZ0l6WmpOelUzWkR0Y2JpQWdabTl1ZEMxemFYcGxPaUF3TGpseVpXMDdYRzVnWEc1Y2JtTnZibk4wSUVacGJHVk9ZVzFsUTI5a1pTQTlJSE4wZVd4bFpDNXpjR0Z1WUZ4dUlDQm1iMjUwTFdaaGJXbHNlVG9nYlc5dWIzTndZV05sTzF4dVlGeHVYRzVqYjI1emRDQkdhV3hsVTJsNlpTQTlJSE4wZVd4bFpDNXpjR0Z1WUZ4dUlDQmpiMnh2Y2pvZ0l6UTVOVEExTnp0Y2JtQmNibHh1WTI5dWMzUWdSRzkzYm14dllXUkNkWFIwYjI0Z1BTQnpkSGxzWldRb1UwSjFkSFJ2YmlsZ1hHNGdJSEJoWkdScGJtYzZJRGh3ZUNBeE5uQjRPMXh1SUNCaVlXTnJaM0p2ZFc1a0xXTnZiRzl5T2lBak1qZ3pOelEzTzF4dUlDQmpiMnh2Y2pvZ2QyaHBkR1U3WEc0Z0lHMXBiaTEzYVdSMGFEb2dNVEF3Y0hnN1hHNWNiaUFnSmpwb2IzWmxjaUI3WEc0Z0lDQWdZbUZqYTJkeWIzVnVaQzFqYjJ4dmNqb2dJekZsTW1Fek56dGNiaUFnZlZ4dVhHNGdJQ1k2WkdsellXSnNaV1FnZTF4dUlDQWdJR0poWTJ0bmNtOTFibVF0WTI5c2IzSTZJQ05oWkdJMVltUTdYRzRnSUgxY2JtQmNibHh1WTI5dWMzUWdVM1JoZEhWeklEMGdjM1I1YkdWa0xuTndZVzQ4ZTF4dUlDQjJZWEpwWVc1ME9pQW5jSEp2WTJWemMybHVaeWNnZkNBbmMzVmpZMlZ6Y3ljZ2ZDQW5aWEp5YjNJblhHNTlQbUJjYmlBZ2NHRmtaR2x1WnpvZ00zQjRJRGh3ZUR0Y2JpQWdZbTl5WkdWeUxYSmhaR2wxY3pvZ00zQjRPMXh1SUNCbWIyNTBMWE5wZW1VNklEQXVPSEpsYlR0Y2JpQWdiV0Z5WjJsdUxYUnZjRG9nTlhCNE8xeHVJQ0JrYVhOd2JHRjVPaUJwYm14cGJtVXRZbXh2WTJzN1hHNGdJR1p2Ym5RdGQyVnBaMmgwT2lBMU1EQTdYRzVjYmlBZ0pIc29leUIyWVhKcFlXNTBJSDBwSUQwK1hHNGdJQ0FnZG1GeWFXRnVkQ0E5UFQwZ0ozQnliMk5sYzNOcGJtY25JQ1ltWEc0Z0lDQWdZRnh1SUNBZ0lHSmhZMnRuY205MWJtUXRZMjlzYjNJNklDTm1abVl6WTJRN1hHNGdJQ0FnWTI5c2IzSTZJQ000TlRZME1EUTdYRzRnSUdCOVhHNWNiaUFnSkhzb2V5QjJZWEpwWVc1MElIMHBJRDArWEc0Z0lDQWdkbUZ5YVdGdWRDQTlQVDBnSjNOMVkyTmxjM01uSUNZbVhHNGdJQ0FnWUZ4dUlDQWdJR0poWTJ0bmNtOTFibVF0WTI5c2IzSTZJQ05rTkdWa1pHRTdYRzRnSUNBZ1kyOXNiM0k2SUNNeE5UVTNNalE3WEc0Z0lHQjlYRzVjYmlBZ0pIc29leUIyWVhKcFlXNTBJSDBwSUQwK1hHNGdJQ0FnZG1GeWFXRnVkQ0E5UFQwZ0oyVnljbTl5SnlBbUpseHVJQ0FnSUdCY2JpQWdJQ0JpWVdOclozSnZkVzVrTFdOdmJHOXlPaUFqWmpoa04yUmhPMXh1SUNBZ0lHTnZiRzl5T2lBak56SXhZekkwTzF4dUlDQmdmVnh1WUZ4dUlsMHNJbVpwYkdVaU9pSXZWWE5sY25NdmJYVnlZWFF1YjNwallXNHZjMlZ2Ymk5d2JHRjVkM0pwWjJoMExYVjBhV3h6TDNOaGJYQnNaUzFoY0hBdlpuSnZiblJsYm1RdmMzSmpMMk52YlhCdmJtVnVkSE12Wm1sc1pTMWtiM2R1Ykc5aFpDOW1hV3hsTFdSdmQyNXNiMkZrTG5SemVDSjk=",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 25676
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 12,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.554Z",
        "time": 13,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/components/login/login-form.tsx",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/App-routes.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"2413-XikA6Pw71nL9syB+alPZSftRCTo\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "20410"
            }
          ],
          "content": {
            "size": 20410,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsgY3JlYXRlSG90Q29udGV4dCBhcyBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQgfSBmcm9tICIvQHZpdGUvY2xpZW50IjtpbXBvcnQubWV0YS5ob3QgPSBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQoIi9zcmMvY29tcG9uZW50cy9sb2dpbi9sb2dpbi1mb3JtLnRzeCIpO2ltcG9ydCBfX3ZpdGVfX2Nqc0ltcG9ydDBfcmVhY3RfanN4RGV2UnVudGltZSBmcm9tICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvcmVhY3RfanN4LWRldi1ydW50aW1lLmpzP3Y9MGJiNjlkNzMiOyBjb25zdCBqc3hERVYgPSBfX3ZpdGVfX2Nqc0ltcG9ydDBfcmVhY3RfanN4RGV2UnVudGltZVsianN4REVWIl07CmltcG9ydCAqIGFzIFJlZnJlc2hSdW50aW1lIGZyb20gIi9AcmVhY3QtcmVmcmVzaCI7CmNvbnN0IGluV2ViV29ya2VyID0gdHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlICE9PSAidW5kZWZpbmVkIiAmJiBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGU7CmxldCBwcmV2UmVmcmVzaFJlZzsKbGV0IHByZXZSZWZyZXNoU2lnOwppZiAoaW1wb3J0Lm1ldGEuaG90ICYmICFpbldlYldvcmtlcikgewogIGlmICghd2luZG93LiRSZWZyZXNoUmVnJCkgewogICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAiQHZpdGVqcy9wbHVnaW4tcmVhY3QgY2FuJ3QgZGV0ZWN0IHByZWFtYmxlLiBTb21ldGhpbmcgaXMgd3JvbmcuIgogICAgKTsKICB9CiAgcHJldlJlZnJlc2hSZWcgPSB3aW5kb3cuJFJlZnJlc2hSZWckOwogIHByZXZSZWZyZXNoU2lnID0gd2luZG93LiRSZWZyZXNoU2lnJDsKICB3aW5kb3cuJFJlZnJlc2hSZWckID0gUmVmcmVzaFJ1bnRpbWUuZ2V0UmVmcmVzaFJlZygiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL2xvZ2luL2xvZ2luLWZvcm0udHN4Iik7CiAgd2luZG93LiRSZWZyZXNoU2lnJCA9IFJlZnJlc2hSdW50aW1lLmNyZWF0ZVNpZ25hdHVyZUZ1bmN0aW9uRm9yVHJhbnNmb3JtOwp9CnZhciBfcyA9ICRSZWZyZXNoU2lnJCgpOwppbXBvcnQgX192aXRlX19janNJbXBvcnQzX3JlYWN0IGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9yZWFjdC5qcz92PTBiYjY5ZDczIjsgY29uc3QgdXNlU3RhdGUgPSBfX3ZpdGVfX2Nqc0ltcG9ydDNfcmVhY3RbInVzZVN0YXRlIl07CmltcG9ydCBzdHlsZWQgZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL3N0eWxlZC1jb21wb25lbnRzLmpzP3Y9MGJiNjlkNzMiOwppbXBvcnQgeyBTQnV0dG9uLCBTSW5wdXQgfSBmcm9tICIvc3JjL3N0eWxlcy9zdHlsZWQtY29tcG9uZW50cy50cyI7CmltcG9ydCBWYWxpZGF0aW9uRXJyb3JEaXNwbGF5IGZyb20gIi9zcmMvY29tcG9uZW50cy92YWxpZGF0aW9uLWVycm9yLWRpc3BsYXkudHN4IjsKaW1wb3J0IHsgeiB9IGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy96b2QuanM/dj0wYmI2OWQ3MyI7CmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICIvc3JjL2hvb2tzL3VzZS1hdXRoLnRzIjsKaW1wb3J0IHsgdXNlTmF2aWdhdGUsIHVzZUxvY2F0aW9uIH0gZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL3JlYWN0LXJvdXRlci1kb20uanM/dj0wYmI2OWQ3MyI7CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIExvZ2luRm9ybSgpIHsKICBfcygpOwogIGNvbnN0IFt1c2VybmFtZSwgc2V0VXNlcm5hbWVdID0gdXNlU3RhdGUoIiIpOwogIGNvbnN0IFtwYXNzd29yZCwgc2V0UGFzc3dvcmRdID0gdXNlU3RhdGUoIiIpOwogIGNvbnN0IFt1c2VySWRlbnRpZmllciwgc2V0VXNlcklkZW50aWZpZXJdID0gdXNlU3RhdGUoImFkbWluIik7CiAgY29uc3QgW3ZhbGlkYXRpb25FcnJvciwgc2V0VmFsaWRhdGlvbkVycm9yXSA9IHVzZVN0YXRlKAogICAgbnVsbAogICk7CiAgY29uc3QgbmF2aWdhdGUgPSB1c2VOYXZpZ2F0ZSgpOwogIGNvbnN0IGxvY2F0aW9uID0gdXNlTG9jYXRpb24oKTsKICBjb25zdCBmcm9tID0gbG9jYXRpb24uc3RhdGU/LmZyb20gfHwgIi8iOwogIGNvbnN0IHsgaXNMb2FkaW5nLCBlcnJvcjogbG9naW5FcnJvciwgaGFuZGxlTG9naW46IGF1dGhMb2dpbiB9ID0gdXNlQXV0aCgpOwogIGNvbnN0IGhhbmRsZUxvZ2luID0gYXN5bmMgKGUpID0+IHsKICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgIHNldFZhbGlkYXRpb25FcnJvcihudWxsKTsKICAgIGNvbnN0IGxvZ2luU2NoZW1hID0gei5vYmplY3QoewogICAgICB1c2VybmFtZTogei5zdHJpbmcoKS5taW4oMSwgeyBtZXNzYWdlOiAiVXNlcm5hbWUgaXMgcmVxdWlyZWQiIH0pLAogICAgICBwYXNzd29yZDogei5zdHJpbmcoKS5taW4oMSwgeyBtZXNzYWdlOiAiUGFzc3dvcmQgaXMgcmVxdWlyZWQiIH0pLAogICAgICB1c2VySWRlbnRpZmllcjogei5zdHJpbmcoKQogICAgfSk7CiAgICBjb25zdCByZXN1bHQgPSBsb2dpblNjaGVtYS5zYWZlUGFyc2UoeyB1c2VybmFtZSwgcGFzc3dvcmQsIHVzZXJJZGVudGlmaWVyIH0pOwogICAgaWYgKCFyZXN1bHQuc3VjY2VzcykgewogICAgICBzZXRWYWxpZGF0aW9uRXJyb3IocmVzdWx0LmVycm9yKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgY29uc3QgeyBzdWNjZXNzIH0gPSBhd2FpdCBhdXRoTG9naW4oeyB1c2VybmFtZSwgcGFzc3dvcmQsIHVzZXJJZGVudGlmaWVyIH0pOwogICAgaWYgKHN1Y2Nlc3MpIHsKICAgICAgYXdhaXQgUHJvbWlzZS5yZXNvbHZlKG5hdmlnYXRlKGZyb20sIHsgcmVwbGFjZTogdHJ1ZSB9KSk7CiAgICB9CiAgfTsKICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeERFVihTTG9naW5Gb3JtQ29udGFpbmVyLCB7ICJkYXRhLXRlc3RpZCI6ICJsb2dpbi1mb3JtLWNvbXAiLCBjaGlsZHJlbjogWwogICAgLyogQF9fUFVSRV9fICovIGpzeERFVihTU3VidGl0bGUsIHsgY2hpbGRyZW46ICJVc2VyIEF1dGhlbnRpY2F0aW9uIiB9LCB2b2lkIDAsIGZhbHNlLCB7CiAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL2xvZ2luL2xvZ2luLWZvcm0udHN4IiwKICAgICAgbGluZU51bWJlcjogODMsCiAgICAgIGNvbHVtbk51bWJlcjogNwogICAgfSwgdGhpcyksCiAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKFZhbGlkYXRpb25FcnJvckRpc3BsYXksIHsgdmFsaWRhdGlvbkVycm9yIH0sIHZvaWQgMCwgZmFsc2UsIHsKICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbG9naW4vbG9naW4tZm9ybS50c3giLAogICAgICBsaW5lTnVtYmVyOiA4NiwKICAgICAgY29sdW1uTnVtYmVyOiA3CiAgICB9LCB0aGlzKSwKICAgIGxvZ2luRXJyb3IgJiYgLyogQF9fUFVSRV9fICovIGpzeERFVihTRXJyb3JNZXNzYWdlLCB7IGNoaWxkcmVuOiBsb2dpbkVycm9yIH0sIHZvaWQgMCwgZmFsc2UsIHsKICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbG9naW4vbG9naW4tZm9ybS50c3giLAogICAgICBsaW5lTnVtYmVyOiA4OSwKICAgICAgY29sdW1uTnVtYmVyOiAyMgogICAgfSwgdGhpcyksCiAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKFNGb3JtLCB7IG9uU3VibWl0OiBoYW5kbGVMb2dpbiwgY2hpbGRyZW46IFsKICAgICAgLyogQF9fUFVSRV9fICovIGpzeERFVigKICAgICAgICBTSW5wdXQsCiAgICAgICAgewogICAgICAgICAgdHlwZTogInRleHQiLAogICAgICAgICAgdmFsdWU6IHVzZXJuYW1lLAogICAgICAgICAgcGxhY2Vob2xkZXI6ICJVc2VybmFtZSIsCiAgICAgICAgICBvbkNoYW5nZTogKGUpID0+IHNldFVzZXJuYW1lKGUudGFyZ2V0LnZhbHVlKSwKICAgICAgICAgIGRpc2FibGVkOiBpc0xvYWRpbmcsCiAgICAgICAgICAiZGF0YS10ZXN0aWQiOiAidXNlcm5hbWUtaW5wdXQiCiAgICAgICAgfSwKICAgICAgICB2b2lkIDAsCiAgICAgICAgZmFsc2UsCiAgICAgICAgewogICAgICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbG9naW4vbG9naW4tZm9ybS50c3giLAogICAgICAgICAgbGluZU51bWJlcjogOTIsCiAgICAgICAgICBjb2x1bW5OdW1iZXI6IDkKICAgICAgICB9LAogICAgICAgIHRoaXMKICAgICAgKSwKICAgICAgLyogQF9fUFVSRV9fICovIGpzeERFVigKICAgICAgICBTSW5wdXQsCiAgICAgICAgewogICAgICAgICAgdHlwZTogInBhc3N3b3JkIiwKICAgICAgICAgIHZhbHVlOiBwYXNzd29yZCwKICAgICAgICAgIHBsYWNlaG9sZGVyOiAiUGFzc3dvcmQiLAogICAgICAgICAgb25DaGFuZ2U6IChlKSA9PiBzZXRQYXNzd29yZChlLnRhcmdldC52YWx1ZSksCiAgICAgICAgICBkaXNhYmxlZDogaXNMb2FkaW5nLAogICAgICAgICAgImRhdGEtdGVzdGlkIjogInBhc3N3b3JkLWlucHV0IgogICAgICAgIH0sCiAgICAgICAgdm9pZCAwLAogICAgICAgIGZhbHNlLAogICAgICAgIHsKICAgICAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL2xvZ2luL2xvZ2luLWZvcm0udHN4IiwKICAgICAgICAgIGxpbmVOdW1iZXI6IDEwMSwKICAgICAgICAgIGNvbHVtbk51bWJlcjogOQogICAgICAgIH0sCiAgICAgICAgdGhpcwogICAgICApLAogICAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKAogICAgICAgIFNTZWxlY3QsCiAgICAgICAgewogICAgICAgICAgdmFsdWU6IHVzZXJJZGVudGlmaWVyLAogICAgICAgICAgb25DaGFuZ2U6IChlKSA9PiBzZXRVc2VySWRlbnRpZmllcihlLnRhcmdldC52YWx1ZSksCiAgICAgICAgICBkaXNhYmxlZDogaXNMb2FkaW5nLAogICAgICAgICAgImRhdGEtdGVzdGlkIjogInVzZXItaWRlbnRpdHktc2VsZWN0IiwKICAgICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoIm9wdGlvbiIsIHsgdmFsdWU6ICJhZG1pbiIsIGNoaWxkcmVuOiAiQWRtaW4iIH0sIHZvaWQgMCwgZmFsc2UsIHsKICAgICAgICAgICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9sb2dpbi9sb2dpbi1mb3JtLnRzeCIsCiAgICAgICAgICAgICAgbGluZU51bWJlcjogMTE2LAogICAgICAgICAgICAgIGNvbHVtbk51bWJlcjogMTEKICAgICAgICAgICAgfSwgdGhpcyksCiAgICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoIm9wdGlvbiIsIHsgdmFsdWU6ICJ1c2VyIiwgY2hpbGRyZW46ICJVc2VyIiB9LCB2b2lkIDAsIGZhbHNlLCB7CiAgICAgICAgICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbG9naW4vbG9naW4tZm9ybS50c3giLAogICAgICAgICAgICAgIGxpbmVOdW1iZXI6IDExNywKICAgICAgICAgICAgICBjb2x1bW5OdW1iZXI6IDExCiAgICAgICAgICAgIH0sIHRoaXMpLAogICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKCJvcHRpb24iLCB7IHZhbHVlOiAiZ3Vlc3QiLCBjaGlsZHJlbjogIkd1ZXN0IiB9LCB2b2lkIDAsIGZhbHNlLCB7CiAgICAgICAgICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbG9naW4vbG9naW4tZm9ybS50c3giLAogICAgICAgICAgICAgIGxpbmVOdW1iZXI6IDExOCwKICAgICAgICAgICAgICBjb2x1bW5OdW1iZXI6IDExCiAgICAgICAgICAgIH0sIHRoaXMpLAogICAgICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKCJvcHRpb24iLCB7IHZhbHVlOiAicmVhZG9ubHkiLCBjaGlsZHJlbjogIlJlYWQgT25seSIgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgICAgICAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL2xvZ2luL2xvZ2luLWZvcm0udHN4IiwKICAgICAgICAgICAgICBsaW5lTnVtYmVyOiAxMTksCiAgICAgICAgICAgICAgY29sdW1uTnVtYmVyOiAxMQogICAgICAgICAgICB9LCB0aGlzKQogICAgICAgICAgXQogICAgICAgIH0sCiAgICAgICAgdm9pZCAwLAogICAgICAgIHRydWUsCiAgICAgICAgewogICAgICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbG9naW4vbG9naW4tZm9ybS50c3giLAogICAgICAgICAgbGluZU51bWJlcjogMTEwLAogICAgICAgICAgY29sdW1uTnVtYmVyOiA5CiAgICAgICAgfSwKICAgICAgICB0aGlzCiAgICAgICksCiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoU0J1dHRvbiwgeyB0eXBlOiAic3VibWl0IiwgZGlzYWJsZWQ6IGlzTG9hZGluZywgImRhdGEtdGVzdGlkIjogImxvZ2luLWJ1dHRvbiIsIGNoaWxkcmVuOiBpc0xvYWRpbmcgPyAiTG9nZ2luZyBpbi4uLiIgOiAiTG9nIEluIiB9LCB2b2lkIDAsIGZhbHNlLCB7CiAgICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbG9naW4vbG9naW4tZm9ybS50c3giLAogICAgICAgIGxpbmVOdW1iZXI6IDEyMiwKICAgICAgICBjb2x1bW5OdW1iZXI6IDkKICAgICAgfSwgdGhpcykKICAgIF0gfSwgdm9pZCAwLCB0cnVlLCB7CiAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL2xvZ2luL2xvZ2luLWZvcm0udHN4IiwKICAgICAgbGluZU51bWJlcjogOTEsCiAgICAgIGNvbHVtbk51bWJlcjogNwogICAgfSwgdGhpcykKICBdIH0sIHZvaWQgMCwgdHJ1ZSwgewogICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbG9naW4vbG9naW4tZm9ybS50c3giLAogICAgbGluZU51bWJlcjogODIsCiAgICBjb2x1bW5OdW1iZXI6IDUKICB9LCB0aGlzKTsKfQpfcyhMb2dpbkZvcm0sICI5Z0lob0c0UFhkN1MrRUpmV2VQeHZ0Z05qZ0U9IiwgZmFsc2UsIGZ1bmN0aW9uKCkgewogIHJldHVybiBbdXNlTmF2aWdhdGUsIHVzZUxvY2F0aW9uLCB1c2VBdXRoXTsKfSk7Cl9jID0gTG9naW5Gb3JtOwpjb25zdCBTTG9naW5Gb3JtQ29udGFpbmVyID0gc3R5bGVkLmRpdmAKICBtYXgtd2lkdGg6IDQwMHB4OwogIG1hcmdpbjogMCBhdXRvOwogIHBhZGRpbmc6IDIwcHg7CiAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsKICBib3JkZXItcmFkaXVzOiA1cHg7CiAgYmFja2dyb3VuZC1jb2xvcjogI2Y5ZjlmOTsKYDsKX2MyID0gU0xvZ2luRm9ybUNvbnRhaW5lcjsKY29uc3QgU0Zvcm0gPSBzdHlsZWQuZm9ybWAKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKYDsKX2MzID0gU0Zvcm07CmNvbnN0IFNTdWJ0aXRsZSA9IHN0eWxlZC5oMmAKICBjb2xvcjogIzMzMzsKICBmb250LXNpemU6IDJyZW07CiAgbWFyZ2luLWJvdHRvbTogMjBweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CmA7Cl9jNCA9IFNTdWJ0aXRsZTsKY29uc3QgU1NlbGVjdCA9IHN0eWxlZC5zZWxlY3RgCiAgcGFkZGluZzogMTBweDsKICBtYXJnaW46IDEwcHg7CiAgYm9yZGVyLXJhZGl1czogNXB4OwogIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7CiAgZm9udC1zaXplOiAxcmVtOwogIHdpZHRoOiAyMjBweDsKYDsKX2M1ID0gU1NlbGVjdDsKY29uc3QgU0Vycm9yTWVzc2FnZSA9IHN0eWxlZC5kaXZgCiAgY29sb3I6ICNlNzRjM2M7CiAgbWFyZ2luOiAxMHB4IDA7CiAgcGFkZGluZzogMTBweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmFkYmQ4OwogIGJvcmRlci1yYWRpdXM6IDRweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CmA7Cl9jNiA9IFNFcnJvck1lc3NhZ2U7CnZhciBfYywgX2MyLCBfYzMsIF9jNCwgX2M1LCBfYzY7CiRSZWZyZXNoUmVnJChfYywgIkxvZ2luRm9ybSIpOwokUmVmcmVzaFJlZyQoX2MyLCAiU0xvZ2luRm9ybUNvbnRhaW5lciIpOwokUmVmcmVzaFJlZyQoX2MzLCAiU0Zvcm0iKTsKJFJlZnJlc2hSZWckKF9jNCwgIlNTdWJ0aXRsZSIpOwokUmVmcmVzaFJlZyQoX2M1LCAiU1NlbGVjdCIpOwokUmVmcmVzaFJlZyQoX2M2LCAiU0Vycm9yTWVzc2FnZSIpOwppZiAoaW1wb3J0Lm1ldGEuaG90ICYmICFpbldlYldvcmtlcikgewogIHdpbmRvdy4kUmVmcmVzaFJlZyQgPSBwcmV2UmVmcmVzaFJlZzsKICB3aW5kb3cuJFJlZnJlc2hTaWckID0gcHJldlJlZnJlc2hTaWc7Cn0KaWYgKGltcG9ydC5tZXRhLmhvdCAmJiAhaW5XZWJXb3JrZXIpIHsKICBSZWZyZXNoUnVudGltZS5fX2htcl9pbXBvcnQoaW1wb3J0Lm1ldGEudXJsKS50aGVuKChjdXJyZW50RXhwb3J0cykgPT4gewogICAgUmVmcmVzaFJ1bnRpbWUucmVnaXN0ZXJFeHBvcnRzRm9yUmVhY3RSZWZyZXNoKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbG9naW4vbG9naW4tZm9ybS50c3giLCBjdXJyZW50RXhwb3J0cyk7CiAgICBpbXBvcnQubWV0YS5ob3QuYWNjZXB0KChuZXh0RXhwb3J0cykgPT4gewogICAgICBpZiAoIW5leHRFeHBvcnRzKSByZXR1cm47CiAgICAgIGNvbnN0IGludmFsaWRhdGVNZXNzYWdlID0gUmVmcmVzaFJ1bnRpbWUudmFsaWRhdGVSZWZyZXNoQm91bmRhcnlBbmRFbnF1ZXVlVXBkYXRlKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbG9naW4vbG9naW4tZm9ybS50c3giLCBjdXJyZW50RXhwb3J0cywgbmV4dEV4cG9ydHMpOwogICAgICBpZiAoaW52YWxpZGF0ZU1lc3NhZ2UpIGltcG9ydC5tZXRhLmhvdC5pbnZhbGlkYXRlKGludmFsaWRhdGVNZXNzYWdlKTsKICAgIH0pOwogIH0pOwp9CgovLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p0WVhCd2FXNW5jeUk2SWtGQkswUk5PenM3T3pzN096czdPenM3T3pzN096dEJRUzlFVGl4VFFVRlRRU3huUWtGQlowSTdRVUZEZWtJc1QwRkJUME1zV1VGQldUdEJRVU51UWl4VFFVRlRReXhUUVVGVFF5eGpRVUZqTzBGQlEyaERMRTlCUVU5RExEUkNRVUUwUWp0QlFVTnVReXhUUVVGVFF5eFRRVUZUTzBGQlEyeENMRk5CUVZORExHVkJRV1U3UVVGRGVFSXNVMEZCVTBNc1lVRkJZVU1zYlVKQlFXMUNPMEZCVDNwRExIZENRVUYzUWtNc1dVRkJXVHRCUVVGQlF5eExRVUZCTzBGQlEyeERMRkZCUVUwc1EwRkJRME1zVlVGQlZVTXNWMEZCVnl4SlFVRkpXaXhUUVVGVExFVkJRVVU3UVVGRE0wTXNVVUZCVFN4RFFVRkRZU3hWUVVGVlF5eFhRVUZYTEVsQlFVbGtMRk5CUVZNc1JVRkJSVHRCUVVNelF5eFJRVUZOTEVOQlFVTmxMR2RDUVVGblFrTXNhVUpCUVdsQ0xFbEJRVWxvUWl4VFFVRlRMRTlCUVU4N1FVRkROVVFzVVVGQlRTeERRVUZEYVVJc2FVSkJRV2xDUXl4clFrRkJhMElzU1VGQlNXeENPMEZCUVVGQkxFbEJRelZETzBGQlFVRXNSVUZEUmp0QlFVZEJMRkZCUVUxdFFpeFhRVUZYV2l4WlFVRlpPMEZCUXpkQ0xGRkJRVTFoTEZkQlFWZGFMRmxCUVZrN1FVRkhOMElzVVVGQlRXRXNUMEZCVVVRc1UwRkJVMFVzVDBGQmVVTkVMRkZCUVZFN1FVRkhlRVVzVVVGQlRTeEZRVUZGUlN4WFFVRlhReXhQUVVGUFF5eFpRVUZaUXl4aFFVRmhReXhWUVVGVkxFbEJRVWx5UWl4UlFVRlJPMEZCUlhwRkxGRkJRVTF2UWl4alFVRmpMRTlCUVU5RkxFMUJRWFZDTzBGQlEyaEVRU3hOUVVGRlF5eGxRVUZsTzBGQlIycENXQ3gxUWtGQmJVSXNTVUZCU1R0QlFVZDJRaXhWUVVGTldTeGpRVUZqZWtJc1JVRkJSVEJDTEU5QlFVODdRVUZCUVN4TlFVTXpRbkJDTEZWQlFWVk9MRVZCUVVVeVFpeFBRVUZQTEVWQlFVVkRMRWxCUVVrc1IwRkJSeXhGUVVGRlF5eFRRVUZUTEhWQ1FVRjFRaXhEUVVGRE8wRkJRVUVzVFVGREwwUnlRaXhWUVVGVlVpeEZRVUZGTWtJc1QwRkJUeXhGUVVGRlF5eEpRVUZKTEVkQlFVY3NSVUZCUlVNc1UwRkJVeXgxUWtGQmRVSXNRMEZCUXp0QlFVRkJMRTFCUXk5RWJrSXNaMEpCUVdkQ1ZpeEZRVUZGTWtJc1QwRkJUenRCUVVGQkxFbEJRek5DTEVOQlFVTTdRVUZIUkN4VlFVRk5SeXhUUVVGVFRDeFpRVUZaVFN4VlFVRlZMRVZCUVVWNlFpeFZRVUZWUlN4VlFVRlZSU3hsUVVGbExFTkJRVU03UVVGRE0wVXNVVUZCU1N4RFFVRkRiMElzVDBGQlQwVXNVMEZCVXp0QlFVTnVRbTVDTEhsQ1FVRnRRbWxDTEU5QlFVOVlMRXRCUVVzN1FVRkRMMEk3UVVGQlFTeEpRVU5HTzBGQlIwRXNWVUZCVFN4RlFVRkZZU3hSUVVGUkxFbEJRVWtzVFVGQlRWWXNWVUZCVlN4RlFVRkZhRUlzVlVGQlZVVXNWVUZCVlVVc1pVRkJaU3hEUVVGRE8wRkJSekZGTEZGQlFVbHpRaXhUUVVGVE8wRkJSVmdzV1VGQlRVTXNVVUZCVVVNc1VVRkJVWEJDTEZOQlFWTkZMRTFCUVUwc1JVRkJSVzFDTEZOQlFWTXNTMEZCU3l4RFFVRkRMRU5CUVVNN1FVRkJRU3hKUVVONlJEdEJRVUZCTEVWQlEwWTdRVUZGUVN4VFFVTkZMSFZDUVVGRExIVkNRVUZ2UWl4bFFVRlpMRzFDUVVNdlFqdEJRVUZCTERKQ1FVRkRMR0ZCUVZVc2JVTkJRVmc3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVN4WFFVRTRRanRCUVVGQkxFbEJSemxDTEhWQ1FVRkRMREJDUVVGMVFpeHRRa0ZCZUVJN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFTeFhRVUY1UkR0QlFVRkJMRWxCUjNoRVppeGpRVUZqTEhWQ1FVRkRMR2xDUVVGbFFTeDNRa0ZCYUVJN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFTeFhRVUV5UWp0QlFVRkJMRWxCUlRGRExIVkNRVUZETEZOQlFVMHNWVUZCVlVNc1lVRkRaanRCUVVGQk8wRkJRVUVzVVVGQlF6dEJRVUZCTzBGQlFVRXNWVUZEUXl4TlFVRkxPMEZCUVVFc1ZVRkRUQ3hQUVVGUFpqdEJRVUZCUVN4VlFVTlFMR0ZCUVZrN1FVRkJRU3hWUVVOYUxGVkJRVlVzUTBGQlEybENMRTFCUVUxb1FpeFpRVUZaWjBJc1JVRkJSV0VzVDBGQlQwTXNTMEZCU3p0QlFVRkJMRlZCUXpORExGVkJRVlZ1UWp0QlFVRkJRU3hWUVVOV0xHVkJRVms3UVVGQlFUdEJRVUZCTEZGQlRtUTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTEUxQlRUaENPMEZCUVVFc1RVRkhPVUk3UVVGQlFTeFJRVUZETzBGQlFVRTdRVUZCUVN4VlFVTkRMRTFCUVVzN1FVRkJRU3hWUVVOTUxFOUJRVTlXTzBGQlFVRkJMRlZCUTFBc1lVRkJXVHRCUVVGQkxGVkJRMW9zVlVGQlZTeERRVUZEWlN4TlFVRk5aQ3haUVVGWll5eEZRVUZGWVN4UFFVRlBReXhMUVVGTE8wRkJRVUVzVlVGRE0wTXNWVUZCVlc1Q08wRkJRVUZCTEZWQlExWXNaVUZCV1R0QlFVRkJPMEZCUVVFc1VVRk9aRHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFc1RVRk5PRUk3UVVGQlFTeE5RVWM1UWp0QlFVRkJMRkZCUVVNN1FVRkJRVHRCUVVGQkxGVkJRME1zVDBGQlQxSTdRVUZCUVVFc1ZVRkRVQ3hWUVVGVkxFTkJRVU5oTEUxQlFVMWFMR3RDUVVGclFsa3NSVUZCUldFc1QwRkJUME1zUzBGQlN6dEJRVUZCTEZWQlEycEVMRlZCUVZWdVFqdEJRVUZCUVN4VlFVTldMR1ZCUVZrN1FVRkJRU3hWUVVWYU8wRkJRVUVzYlVOQlFVTXNXVUZCVHl4UFFVRk5MRk5CUVZFc2NVSkJRWFJDTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFc2JVSkJRVEpDTzBGQlFVRXNXVUZETTBJc2RVSkJRVU1zV1VGQlR5eFBRVUZOTEZGQlFVOHNiMEpCUVhKQ08wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRXNiVUpCUVhsQ08wRkJRVUVzV1VGRGVrSXNkVUpCUVVNc1dVRkJUeXhQUVVGTkxGTkJRVkVzY1VKQlFYUkNPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUVzYlVKQlFUSkNPMEZCUVVFc1dVRkRNMElzZFVKQlFVTXNXVUZCVHl4UFFVRk5MRmxCUVZjc2VVSkJRWHBDTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFc2JVSkJRV3RETzBGQlFVRTdRVUZCUVR0QlFVRkJMRkZCVkhCRE8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRU3hOUVZWQk8wRkJRVUVzVFVGRlFTeDFRa0ZCUXl4WFFVRlJMRTFCUVVzc1ZVRkJVeXhWUVVGVlFTeFhRVUZYTEdWQlFWa3NaMEpCUTNKRVFTeHpRa0ZCV1N4clFrRkJhMElzV1VGRWFrTTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRU3hoUVVWQk8wRkJRVUVzVTBGcVEwWTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRU3hYUVd0RFFUdEJRVUZCTEU5Qk0wTkdPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUVzVTBFMFEwRTdRVUZGU2p0QlFVRkRZaXhIUVM5R2RVSkVMRmRCUVZNN1FVRkJRU3hWUVZOa1JpeGhRVU5CUXl4aFFVMW5SRVlzVDBGQlR6dEJRVUZCTzBGQlFVRnhReXhMUVdoQ2JFUnNRenRCUVdsSGVFSXNUVUZCVFcxRExITkNRVUZ6UWpORExFOUJRVTgwUXp0QlFVRkJRVHRCUVVGQlFUdEJRVUZCUVR0QlFVRkJRVHRCUVVGQlFUdEJRVUZCUVR0QlFVRkJRVHRCUVU5c1EwTXNUVUZRUzBZN1FVRlRUaXhOUVVGTlJ5eFJRVUZST1VNc1QwRkJUeXRETzBGQlFVRkJPMEZCUVVGQk8wRkJRVUZCTzBGQlFVRkJPMEZCU1hCQ1F5eE5RVXBMUmp0QlFVMU9MRTFCUVUxSExGbEJRVmxxUkN4UFFVRlBhMFE3UVVGQlFVRTdRVUZCUVVFN1FVRkJRVUU3UVVGQlFVRTdRVUZCUVVFN1FVRkxlRUpETEUxQlRFdEdPMEZCVDA0c1RVRkJUVWNzVlVGQlZYQkVMRTlCUVU5eFJEdEJRVUZCUVR0QlFVRkJRVHRCUVVGQlFUdEJRVUZCUVR0QlFVRkJRVHRCUVVGQlFUdEJRVUZCUVR0QlFVOTBRa01zVFVGUVMwWTdRVUZUVGl4TlFVRk5SeXhuUWtGQlowSjJSQ3hQUVVGUE5FTTdRVUZCUVVFN1FVRkJRVUU3UVVGQlFVRTdRVUZCUVVFN1FVRkJRVUU3UVVGQlFVRTdRVUZCUVVFN1FVRlBOVUpaTEUxQlVFdEVPMEZCUVdFc1NVRkJRV0lzU1VGQlFVY3NTMEZCUVVjc1MwRkJRVWNzUzBGQlFVY3NTMEZCUVVVN1FVRkJRVU1zWVVGQlFXWXNTVUZCUVR0QlFVRkJaU3hoUVVGQldpeExRVUZCTzBGQlFVRlpMR0ZCUVVGVUxFdEJRVUU3UVVGQlFWTXNZVUZCUVU0c1MwRkJRVHRCUVVGQlRTeGhRVUZCU0N4TFFVRkJPMEZCUVVGSExHRkJRVUZFTEV0QlFVRWlMQ0p1WVcxbGN5STZXeUoxYzJWVGRHRjBaU0lzSW5OMGVXeGxaQ0lzSWxOQ2RYUjBiMjRpTENKVFNXNXdkWFFpTENKV1lXeHBaR0YwYVc5dVJYSnliM0pFYVhOd2JHRjVJaXdpZWlJc0luVnpaVUYxZEdnaUxDSjFjMlZPWVhacFoyRjBaU0lzSW5WelpVeHZZMkYwYVc5dUlpd2lURzluYVc1R2IzSnRJaXdpWDNNaUxDSjFjMlZ5Ym1GdFpTSXNJbk5sZEZWelpYSnVZVzFsSWl3aWNHRnpjM2R2Y21RaUxDSnpaWFJRWVhOemQyOXlaQ0lzSW5WelpYSkpaR1Z1ZEdsbWFXVnlJaXdpYzJWMFZYTmxja2xrWlc1MGFXWnBaWElpTENKMllXeHBaR0YwYVc5dVJYSnliM0lpTENKelpYUldZV3hwWkdGMGFXOXVSWEp5YjNJaUxDSnVZWFpwWjJGMFpTSXNJbXh2WTJGMGFXOXVJaXdpWm5KdmJTSXNJbk4wWVhSbElpd2lhWE5NYjJGa2FXNW5JaXdpWlhKeWIzSWlMQ0pzYjJkcGJrVnljbTl5SWl3aWFHRnVaR3hsVEc5bmFXNGlMQ0poZFhSb1RHOW5hVzRpTENKbElpd2ljSEpsZG1WdWRFUmxabUYxYkhRaUxDSnNiMmRwYmxOamFHVnRZU0lzSW05aWFtVmpkQ0lzSW5OMGNtbHVaeUlzSW0xcGJpSXNJbTFsYzNOaFoyVWlMQ0p5WlhOMWJIUWlMQ0p6WVdabFVHRnljMlVpTENKemRXTmpaWE56SWl3aVVISnZiV2x6WlNJc0luSmxjMjlzZG1VaUxDSnlaWEJzWVdObElpd2lkR0Z5WjJWMElpd2lkbUZzZFdVaUxDSmZZeUlzSWxOTWIyZHBia1p2Y20xRGIyNTBZV2x1WlhJaUxDSmthWFlpTENKZll6SWlMQ0pUUm05eWJTSXNJbVp2Y20waUxDSmZZek1pTENKVFUzVmlkR2wwYkdVaUxDSm9NaUlzSWw5ak5DSXNJbE5UWld4bFkzUWlMQ0p6Wld4bFkzUWlMQ0pmWXpVaUxDSlRSWEp5YjNKTlpYTnpZV2RsSWl3aVgyTTJJaXdpSkZKbFpuSmxjMmhTWldja0lsMHNJbWxuYm05eVpVeHBjM1FpT2x0ZExDSnpiM1Z5WTJWeklqcGJJbXh2WjJsdUxXWnZjbTB1ZEhONElsMHNJbk52ZFhKalpYTkRiMjUwWlc1MElqcGJJbWx0Y0c5eWRDQjdJSFZ6WlZOMFlYUmxJSDBnWm5KdmJTQW5jbVZoWTNRblhHNXBiWEJ2Y25RZ2MzUjViR1ZrSUdaeWIyMGdKM04wZVd4bFpDMWpiMjF3YjI1bGJuUnpKMXh1YVcxd2IzSjBJSHNnVTBKMWRIUnZiaXdnVTBsdWNIVjBJSDBnWm5KdmJTQW5RSE4wZVd4bGN5OXpkSGxzWldRdFkyOXRjRzl1Wlc1MGN5ZGNibWx0Y0c5eWRDQldZV3hwWkdGMGFXOXVSWEp5YjNKRWFYTndiR0Y1SUdaeWIyMGdKMEJqYjIxd2IyNWxiblJ6TDNaaGJHbGtZWFJwYjI0dFpYSnliM0l0WkdsemNHeGhlU2RjYm1sdGNHOXlkQ0I3SUhvZ2ZTQm1jbTl0SUNkNmIyUW5YRzVwYlhCdmNuUWdleUIxYzJWQmRYUm9JSDBnWm5KdmJTQW5RR2h2YjJ0ekwzVnpaUzFoZFhSb0oxeHVhVzF3YjNKMElIc2dkWE5sVG1GMmFXZGhkR1VzSUhWelpVeHZZMkYwYVc5dUlIMGdabkp2YlNBbmNtVmhZM1F0Y205MWRHVnlMV1J2YlNkY2JseHVMeW9xWEc0Z0tpQk1iMmRwYmlCbWIzSnRJR052YlhCdmJtVnVkQ0IwYUdGMElHRnNiRzkzY3lCMWMyVnljeUIwYnlCaGRYUm9aVzUwYVdOaGRHVWdkMmwwYUNCMWMyVnlibUZ0WlN3Z2NHRnpjM2R2Y21RZ1lXNWtJSFZ6WlhJZ2FXUmxiblJwWm1sbGNpNWNiaUFxWEc0Z0tpQkFjbVYwZFhKdWN5QjdTbE5ZTGtWc1pXMWxiblI5SUZSb1pTQnlaVzVrWlhKbFpDQnNiMmRwYmlCbWIzSnRYRzRnS2k5Y2JtVjRjRzl5ZENCa1pXWmhkV3gwSUdaMWJtTjBhVzl1SUV4dloybHVSbTl5YlNncElIdGNiaUFnWTI5dWMzUWdXM1Z6WlhKdVlXMWxMQ0J6WlhSVmMyVnlibUZ0WlYwZ1BTQjFjMlZUZEdGMFpTZ25KeWxjYmlBZ1kyOXVjM1FnVzNCaGMzTjNiM0prTENCelpYUlFZWE56ZDI5eVpGMGdQU0IxYzJWVGRHRjBaU2duSnlsY2JpQWdZMjl1YzNRZ1czVnpaWEpKWkdWdWRHbG1hV1Z5TENCelpYUlZjMlZ5U1dSbGJuUnBabWxsY2wwZ1BTQjFjMlZUZEdGMFpTZ25ZV1J0YVc0bktWeHVJQ0JqYjI1emRDQmJkbUZzYVdSaGRHbHZia1Z5Y205eUxDQnpaWFJXWVd4cFpHRjBhVzl1UlhKeWIzSmRJRDBnZFhObFUzUmhkR1U4ZWk1YWIyUkZjbkp2Y2lCOElHNTFiR3crS0Z4dUlDQWdJRzUxYkd4Y2JpQWdLVnh1WEc0Z0lDOHZJRlZ6WlNCU1pXRmpkQ0JTYjNWMFpYSWdhRzl2YTNNZ1ptOXlJRzVoZG1sbllYUnBiMjVjYmlBZ1kyOXVjM1FnYm1GMmFXZGhkR1VnUFNCMWMyVk9ZWFpwWjJGMFpTZ3BYRzRnSUdOdmJuTjBJR3h2WTJGMGFXOXVJRDBnZFhObFRHOWpZWFJwYjI0b0tWeHVYRzRnSUM4dklFZGxkQ0IwYUdVZ2FXNTBaVzVrWldRZ1pHVnpkR2x1WVhScGIyNGdabkp2YlNCc2IyTmhkR2x2YmlCemRHRjBaU0J2Y2lCa1pXWmhkV3gwSUhSdklHaHZiV1ZjYmlBZ1kyOXVjM1FnWm5KdmJTQTlJQ2hzYjJOaGRHbHZiaTV6ZEdGMFpTQmhjeUI3SUdaeWIyMC9PaUJ6ZEhKcGJtY2dmU0I4SUhWdVpHVm1hVzVsWkNrL0xtWnliMjBnZkh3Z0p5OG5YRzVjYmlBZ0x5OGdWWE5sSUc5MWNpQmpaVzUwY21Gc2FYcGxaQ0JoZFhSb0lHaHZiMnNnYVc1emRHVmhaQ0J2WmlCamIyMXdiMjVsYm5RdGJHVjJaV3dnYzNSaGRHVmNiaUFnWTI5dWMzUWdleUJwYzB4dllXUnBibWNzSUdWeWNtOXlPaUJzYjJkcGJrVnljbTl5TENCb1lXNWtiR1ZNYjJkcGJqb2dZWFYwYUV4dloybHVJSDBnUFNCMWMyVkJkWFJvS0NsY2JseHVJQ0JqYjI1emRDQm9ZVzVrYkdWTWIyZHBiaUE5SUdGemVXNWpJQ2hsT2lCU1pXRmpkQzVHYjNKdFJYWmxiblFwSUQwK0lIdGNiaUFnSUNCbExuQnlaWFpsYm5SRVpXWmhkV3gwS0NsY2JseHVJQ0FnSUM4dklGSmxjMlYwSUhaaGJHbGtZWFJwYjI0Z1pYSnliM0p6WEc0Z0lDQWdjMlYwVm1Gc2FXUmhkR2x2YmtWeWNtOXlLRzUxYkd3cFhHNWNiaUFnSUNBdkx5QkVaV1pwYm1VZ2RtRnNhV1JoZEdsdmJpQnpZMmhsYldFZ2RYTnBibWNnV205a1hHNGdJQ0FnWTI5dWMzUWdiRzluYVc1VFkyaGxiV0VnUFNCNkxtOWlhbVZqZENoN1hHNGdJQ0FnSUNCMWMyVnlibUZ0WlRvZ2VpNXpkSEpwYm1jb0tTNXRhVzRvTVN3Z2V5QnRaWE56WVdkbE9pQW5WWE5sY201aGJXVWdhWE1nY21WeGRXbHlaV1FuSUgwcExGeHVJQ0FnSUNBZ2NHRnpjM2R2Y21RNklIb3VjM1J5YVc1bktDa3ViV2x1S0RFc0lIc2diV1Z6YzJGblpUb2dKMUJoYzNOM2IzSmtJR2x6SUhKbGNYVnBjbVZrSnlCOUtTeGNiaUFnSUNBZ0lIVnpaWEpKWkdWdWRHbG1hV1Z5T2lCNkxuTjBjbWx1WnlncFhHNGdJQ0FnZlNsY2JseHVJQ0FnSUM4dklGWmhiR2xrWVhSbElIUm9aU0JtYjNKdElHUmhkR0ZjYmlBZ0lDQmpiMjV6ZENCeVpYTjFiSFFnUFNCc2IyZHBibE5qYUdWdFlTNXpZV1psVUdGeWMyVW9leUIxYzJWeWJtRnRaU3dnY0dGemMzZHZjbVFzSUhWelpYSkpaR1Z1ZEdsbWFXVnlJSDBwWEc0Z0lDQWdhV1lnS0NGeVpYTjFiSFF1YzNWalkyVnpjeWtnZTF4dUlDQWdJQ0FnYzJWMFZtRnNhV1JoZEdsdmJrVnljbTl5S0hKbGMzVnNkQzVsY25KdmNpbGNiaUFnSUNBZ0lISmxkSFZ5Ymx4dUlDQWdJSDFjYmx4dUlDQWdJQzh2SUZWelpTQjBhR1VnWVhWMGFDQm9iMjlySUhSdklHaGhibVJzWlNCc2IyZHBibHh1SUNBZ0lHTnZibk4wSUhzZ2MzVmpZMlZ6Y3lCOUlEMGdZWGRoYVhRZ1lYVjBhRXh2WjJsdUtIc2dkWE5sY201aGJXVXNJSEJoYzNOM2IzSmtMQ0IxYzJWeVNXUmxiblJwWm1sbGNpQjlLVnh1WEc0Z0lDQWdMeThnU1dZZ2JHOW5hVzRnYVhNZ2MzVmpZMlZ6YzJaMWJDd2djbVZrYVhKbFkzUWdkRzhnZEdobElHbHVkR1Z1WkdWa0lHUmxjM1JwYm1GMGFXOXVYRzRnSUNBZ2FXWWdLSE4xWTJObGMzTXBJSHRjYmlBZ0lDQWdJQzh2SUZWelpTQlNaV0ZqZENCU2IzVjBaWEluY3lCdVlYWnBaMkYwWlNCcGJuTjBaV0ZrSUc5bUlIZHBibVJ2ZHk1c2IyTmhkR2x2YmlCbWIzSWdZbVYwZEdWeUlGTlFRU0JsZUhCbGNtbGxibU5sWEc0Z0lDQWdJQ0JoZDJGcGRDQlFjbTl0YVhObExuSmxjMjlzZG1Vb2JtRjJhV2RoZEdVb1puSnZiU3dnZXlCeVpYQnNZV05sT2lCMGNuVmxJSDBwS1Z4dUlDQWdJSDFjYmlBZ2ZWeHVYRzRnSUhKbGRIVnliaUFvWEc0Z0lDQWdQRk5NYjJkcGJrWnZjbTFEYjI1MFlXbHVaWElnWkdGMFlTMTBaWE4wYVdROVhDSnNiMmRwYmkxbWIzSnRMV052YlhCY0lqNWNiaUFnSUNBZ0lEeFRVM1ZpZEdsMGJHVStWWE5sY2lCQmRYUm9aVzUwYVdOaGRHbHZiand2VTFOMVluUnBkR3hsUGx4dVhHNGdJQ0FnSUNCN0x5b2dSR2x6Y0d4aGVTQjJZV3hwWkdGMGFXOXVJR1Z5Y205eWN5QXFMMzFjYmlBZ0lDQWdJRHhXWVd4cFpHRjBhVzl1UlhKeWIzSkVhWE53YkdGNUlIWmhiR2xrWVhScGIyNUZjbkp2Y2oxN2RtRnNhV1JoZEdsdmJrVnljbTl5ZlNBdlBseHVYRzRnSUNBZ0lDQjdMeW9nUkdsemNHeGhlU0JzYjJkcGJpQmxjbkp2Y25NZ0tpOTlYRzRnSUNBZ0lDQjdiRzluYVc1RmNuSnZjaUFtSmlBOFUwVnljbTl5VFdWemMyRm5aVDU3Ykc5bmFXNUZjbkp2Y24wOEwxTkZjbkp2Y2sxbGMzTmhaMlUrZlZ4dVhHNGdJQ0FnSUNBOFUwWnZjbTBnYjI1VGRXSnRhWFE5ZTJoaGJtUnNaVXh2WjJsdWZUNWNiaUFnSUNBZ0lDQWdQRk5KYm5CMWRGeHVJQ0FnSUNBZ0lDQWdJSFI1Y0dVOVhDSjBaWGgwWENKY2JpQWdJQ0FnSUNBZ0lDQjJZV3gxWlQxN2RYTmxjbTVoYldWOVhHNGdJQ0FnSUNBZ0lDQWdjR3hoWTJWb2IyeGtaWEk5WENKVmMyVnlibUZ0WlZ3aVhHNGdJQ0FnSUNBZ0lDQWdiMjVEYUdGdVoyVTlleWhsS1NBOVBpQnpaWFJWYzJWeWJtRnRaU2hsTG5SaGNtZGxkQzUyWVd4MVpTbDlYRzRnSUNBZ0lDQWdJQ0FnWkdsellXSnNaV1E5ZTJselRHOWhaR2x1WjMxY2JpQWdJQ0FnSUNBZ0lDQmtZWFJoTFhSbGMzUnBaRDFjSW5WelpYSnVZVzFsTFdsdWNIVjBYQ0pjYmlBZ0lDQWdJQ0FnTHo1Y2JseHVJQ0FnSUNBZ0lDQThVMGx1Y0hWMFhHNGdJQ0FnSUNBZ0lDQWdkSGx3WlQxY0luQmhjM04zYjNKa1hDSmNiaUFnSUNBZ0lDQWdJQ0IyWVd4MVpUMTdjR0Z6YzNkdmNtUjlYRzRnSUNBZ0lDQWdJQ0FnY0d4aFkyVm9iMnhrWlhJOVhDSlFZWE56ZDI5eVpGd2lYRzRnSUNBZ0lDQWdJQ0FnYjI1RGFHRnVaMlU5ZXlobEtTQTlQaUJ6WlhSUVlYTnpkMjl5WkNobExuUmhjbWRsZEM1MllXeDFaU2w5WEc0Z0lDQWdJQ0FnSUNBZ1pHbHpZV0pzWldROWUybHpURzloWkdsdVozMWNiaUFnSUNBZ0lDQWdJQ0JrWVhSaExYUmxjM1JwWkQxY0luQmhjM04zYjNKa0xXbHVjSFYwWENKY2JpQWdJQ0FnSUNBZ0x6NWNibHh1SUNBZ0lDQWdJQ0E4VTFObGJHVmpkRnh1SUNBZ0lDQWdJQ0FnSUhaaGJIVmxQWHQxYzJWeVNXUmxiblJwWm1sbGNuMWNiaUFnSUNBZ0lDQWdJQ0J2YmtOb1lXNW5aVDE3S0dVcElEMCtJSE5sZEZWelpYSkpaR1Z1ZEdsbWFXVnlLR1V1ZEdGeVoyVjBMblpoYkhWbEtYMWNiaUFnSUNBZ0lDQWdJQ0JrYVhOaFlteGxaRDE3YVhOTWIyRmthVzVuZlZ4dUlDQWdJQ0FnSUNBZ0lHUmhkR0V0ZEdWemRHbGtQVndpZFhObGNpMXBaR1Z1ZEdsMGVTMXpaV3hsWTNSY0lseHVJQ0FnSUNBZ0lDQStYRzRnSUNBZ0lDQWdJQ0FnUEc5d2RHbHZiaUIyWVd4MVpUMWNJbUZrYldsdVhDSStRV1J0YVc0OEwyOXdkR2x2Ymo1Y2JpQWdJQ0FnSUNBZ0lDQThiM0IwYVc5dUlIWmhiSFZsUFZ3aWRYTmxjbHdpUGxWelpYSThMMjl3ZEdsdmJqNWNiaUFnSUNBZ0lDQWdJQ0E4YjNCMGFXOXVJSFpoYkhWbFBWd2laM1ZsYzNSY0lqNUhkV1Z6ZER3dmIzQjBhVzl1UGx4dUlDQWdJQ0FnSUNBZ0lEeHZjSFJwYjI0Z2RtRnNkV1U5WENKeVpXRmtiMjVzZVZ3aVBsSmxZV1FnVDI1c2VUd3ZiM0IwYVc5dVBseHVJQ0FnSUNBZ0lDQThMMU5UWld4bFkzUStYRzVjYmlBZ0lDQWdJQ0FnUEZOQ2RYUjBiMjRnZEhsd1pUMWNJbk4xWW0xcGRGd2lJR1JwYzJGaWJHVmtQWHRwYzB4dllXUnBibWQ5SUdSaGRHRXRkR1Z6ZEdsa1BWd2liRzluYVc0dFluVjBkRzl1WENJK1hHNGdJQ0FnSUNBZ0lDQWdlMmx6VEc5aFpHbHVaeUEvSUNkTWIyZG5hVzVuSUdsdUxpNHVKeUE2SUNkTWIyY2dTVzRuZlZ4dUlDQWdJQ0FnSUNBOEwxTkNkWFIwYjI0K1hHNGdJQ0FnSUNBOEwxTkdiM0p0UGx4dUlDQWdJRHd2VTB4dloybHVSbTl5YlVOdmJuUmhhVzVsY2o1Y2JpQWdLVnh1ZlZ4dVhHNWpiMjV6ZENCVFRHOW5hVzVHYjNKdFEyOXVkR0ZwYm1WeUlEMGdjM1I1YkdWa0xtUnBkbUJjYmlBZ2JXRjRMWGRwWkhSb09pQTBNREJ3ZUR0Y2JpQWdiV0Z5WjJsdU9pQXdJR0YxZEc4N1hHNGdJSEJoWkdScGJtYzZJREl3Y0hnN1hHNGdJR0p2Y21SbGNqb2dNWEI0SUhOdmJHbGtJQ05rWkdRN1hHNGdJR0p2Y21SbGNpMXlZV1JwZFhNNklEVndlRHRjYmlBZ1ltRmphMmR5YjNWdVpDMWpiMnh2Y2pvZ0kyWTVaamxtT1R0Y2JtQmNibHh1WTI5dWMzUWdVMFp2Y20wZ1BTQnpkSGxzWldRdVptOXliV0JjYmlBZ1pHbHpjR3hoZVRvZ1pteGxlRHRjYmlBZ1pteGxlQzFrYVhKbFkzUnBiMjQ2SUdOdmJIVnRianRjYmlBZ1lXeHBaMjR0YVhSbGJYTTZJR05sYm5SbGNqdGNibUJjYmx4dVkyOXVjM1FnVTFOMVluUnBkR3hsSUQwZ2MzUjViR1ZrTG1neVlGeHVJQ0JqYjJ4dmNqb2dJek16TXp0Y2JpQWdabTl1ZEMxemFYcGxPaUF5Y21WdE8xeHVJQ0J0WVhKbmFXNHRZbTkwZEc5dE9pQXlNSEI0TzF4dUlDQjBaWGgwTFdGc2FXZHVPaUJqWlc1MFpYSTdYRzVnWEc1Y2JtTnZibk4wSUZOVFpXeGxZM1FnUFNCemRIbHNaV1F1YzJWc1pXTjBZRnh1SUNCd1lXUmthVzVuT2lBeE1IQjRPMXh1SUNCdFlYSm5hVzQ2SURFd2NIZzdYRzRnSUdKdmNtUmxjaTF5WVdScGRYTTZJRFZ3ZUR0Y2JpQWdZbTl5WkdWeU9pQXhjSGdnYzI5c2FXUWdJMlJrWkR0Y2JpQWdabTl1ZEMxemFYcGxPaUF4Y21WdE8xeHVJQ0IzYVdSMGFEb2dNakl3Y0hnN1hHNWdYRzVjYm1OdmJuTjBJRk5GY25KdmNrMWxjM05oWjJVZ1BTQnpkSGxzWldRdVpHbDJZRnh1SUNCamIyeHZjam9nSTJVM05HTXpZenRjYmlBZ2JXRnlaMmx1T2lBeE1IQjRJREE3WEc0Z0lIQmhaR1JwYm1jNklERXdjSGc3WEc0Z0lHSmhZMnRuY205MWJtUXRZMjlzYjNJNklDTm1ZV1JpWkRnN1hHNGdJR0p2Y21SbGNpMXlZV1JwZFhNNklEUndlRHRjYmlBZ2RHVjRkQzFoYkdsbmJqb2dZMlZ1ZEdWeU8xeHVZRnh1SWwwc0ltWnBiR1VpT2lJdlZYTmxjbk12YlhWeVlYUXViM3BqWVc0dmMyVnZiaTl3YkdGNWQzSnBaMmgwTFhWMGFXeHpMM05oYlhCc1pTMWhjSEF2Wm5KdmJuUmxibVF2YzNKakwyTnZiWEJ2Ym1WdWRITXZiRzluYVc0dmJHOW5hVzR0Wm05eWJTNTBjM2dpZlE9PQ==",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 20410
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 13,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.556Z",
        "time": 14,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/node_modules/.vite/deps/react-router-dom.js?v=0bb69d73",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/App-routes.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [
            {
              "name": "v",
              "value": "0bb69d73"
            }
          ],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "max-age=31536000,immutable"
            },
            {
              "name": "etag",
              "value": "W/\"6b5ea-6jM/tGGRtIfJmoV2iFbUQdqmQgA\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "439786"
            }
          ],
          "content": {
            "size": 439786,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsgaW5qZWN0UXVlcnkgYXMgX192aXRlX19pbmplY3RRdWVyeSB9IGZyb20gIi9Adml0ZS9jbGllbnQiO2ltcG9ydCB7IGNyZWF0ZUhvdENvbnRleHQgYXMgX192aXRlX19jcmVhdGVIb3RDb250ZXh0IH0gZnJvbSAiL0B2aXRlL2NsaWVudCI7aW1wb3J0Lm1ldGEuaG90ID0gX192aXRlX19jcmVhdGVIb3RDb250ZXh0KCIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvcmVhY3Qtcm91dGVyLWRvbS5qcz92PTBiYjY5ZDczIik7aW1wb3J0IHsKICByZXF1aXJlX3JlYWN0X2RvbQp9IGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9jaHVuay1NSDRNVzNPSy5qcz92PTBiYjY5ZDczIjsKaW1wb3J0IHsKICByZXF1aXJlX3JlYWN0Cn0gZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL2NodW5rLVFKWUtVS0FMLmpzP3Y9MGJiNjlkNzMiOwppbXBvcnQgewogIF9fY29tbW9uSlMsCiAgX190b0VTTQp9IGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9jaHVuay00TUJNUklMQS5qcz92PTBiYjY5ZDczIjsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1yb3V0ZXIvbm9kZV9tb2R1bGVzL2Nvb2tpZS9kaXN0L2luZGV4LmpzCnZhciByZXF1aXJlX2Rpc3QgPSBfX2NvbW1vbkpTKHsKICAiLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXJvdXRlci9ub2RlX21vZHVsZXMvY29va2llL2Rpc3QvaW5kZXguanMiKGV4cG9ydHMpIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICBleHBvcnRzLnBhcnNlID0gcGFyc2UyOwogICAgZXhwb3J0cy5zZXJpYWxpemUgPSBzZXJpYWxpemUyOwogICAgdmFyIGNvb2tpZU5hbWVSZWdFeHAgPSAvXltcdTAwMjEtXHUwMDNBXHUwMDNDXHUwMDNFLVx1MDA3RV0rJC87CiAgICB2YXIgY29va2llVmFsdWVSZWdFeHAgPSAvXltcdTAwMjEtXHUwMDNBXHUwMDNDLVx1MDA3RV0qJC87CiAgICB2YXIgZG9tYWluVmFsdWVSZWdFeHAgPSAvXihbLl0/W2EtejAtOV0oW2EtejAtOS1dezAsNjF9W2EtejAtOV0pPykoWy5dW2EtejAtOV0oW2EtejAtOS1dezAsNjF9W2EtejAtOV0pPykqJC9pOwogICAgdmFyIHBhdGhWYWx1ZVJlZ0V4cCA9IC9eW1x1MDAyMC1cdTAwM0FcdTAwM0QtXHUwMDdFXSokLzsKICAgIHZhciBfX3RvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZzsKICAgIHZhciBOdWxsT2JqZWN0ID0gKCgpID0+IHsKICAgICAgY29uc3QgQyA9IGZ1bmN0aW9uKCkgewogICAgICB9OwogICAgICBDLnByb3RvdHlwZSA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgICByZXR1cm4gQzsKICAgIH0pKCk7CiAgICBmdW5jdGlvbiBwYXJzZTIoc3RyLCBvcHRpb25zKSB7CiAgICAgIGNvbnN0IG9iaiA9IG5ldyBOdWxsT2JqZWN0KCk7CiAgICAgIGNvbnN0IGxlbiA9IHN0ci5sZW5ndGg7CiAgICAgIGlmIChsZW4gPCAyKQogICAgICAgIHJldHVybiBvYmo7CiAgICAgIGNvbnN0IGRlYyA9IChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmRlY29kZSkgfHwgZGVjb2RlMjsKICAgICAgbGV0IGluZGV4ID0gMDsKICAgICAgZG8gewogICAgICAgIGNvbnN0IGVxSWR4ID0gc3RyLmluZGV4T2YoIj0iLCBpbmRleCk7CiAgICAgICAgaWYgKGVxSWR4ID09PSAtMSkKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNvbnN0IGNvbG9uSWR4ID0gc3RyLmluZGV4T2YoIjsiLCBpbmRleCk7CiAgICAgICAgY29uc3QgZW5kSWR4ID0gY29sb25JZHggPT09IC0xID8gbGVuIDogY29sb25JZHg7CiAgICAgICAgaWYgKGVxSWR4ID4gZW5kSWR4KSB7CiAgICAgICAgICBpbmRleCA9IHN0ci5sYXN0SW5kZXhPZigiOyIsIGVxSWR4IC0gMSkgKyAxOwogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIGNvbnN0IGtleVN0YXJ0SWR4ID0gc3RhcnRJbmRleChzdHIsIGluZGV4LCBlcUlkeCk7CiAgICAgICAgY29uc3Qga2V5RW5kSWR4ID0gZW5kSW5kZXgoc3RyLCBlcUlkeCwga2V5U3RhcnRJZHgpOwogICAgICAgIGNvbnN0IGtleSA9IHN0ci5zbGljZShrZXlTdGFydElkeCwga2V5RW5kSWR4KTsKICAgICAgICBpZiAob2JqW2tleV0gPT09IHZvaWQgMCkgewogICAgICAgICAgbGV0IHZhbFN0YXJ0SWR4ID0gc3RhcnRJbmRleChzdHIsIGVxSWR4ICsgMSwgZW5kSWR4KTsKICAgICAgICAgIGxldCB2YWxFbmRJZHggPSBlbmRJbmRleChzdHIsIGVuZElkeCwgdmFsU3RhcnRJZHgpOwogICAgICAgICAgY29uc3QgdmFsdWUgPSBkZWMoc3RyLnNsaWNlKHZhbFN0YXJ0SWR4LCB2YWxFbmRJZHgpKTsKICAgICAgICAgIG9ialtrZXldID0gdmFsdWU7CiAgICAgICAgfQogICAgICAgIGluZGV4ID0gZW5kSWR4ICsgMTsKICAgICAgfSB3aGlsZSAoaW5kZXggPCBsZW4pOwogICAgICByZXR1cm4gb2JqOwogICAgfQogICAgZnVuY3Rpb24gc3RhcnRJbmRleChzdHIsIGluZGV4LCBtYXgpIHsKICAgICAgZG8gewogICAgICAgIGNvbnN0IGNvZGUgPSBzdHIuY2hhckNvZGVBdChpbmRleCk7CiAgICAgICAgaWYgKGNvZGUgIT09IDMyICYmIGNvZGUgIT09IDkpCiAgICAgICAgICByZXR1cm4gaW5kZXg7CiAgICAgIH0gd2hpbGUgKCsraW5kZXggPCBtYXgpOwogICAgICByZXR1cm4gbWF4OwogICAgfQogICAgZnVuY3Rpb24gZW5kSW5kZXgoc3RyLCBpbmRleCwgbWluKSB7CiAgICAgIHdoaWxlIChpbmRleCA+IG1pbikgewogICAgICAgIGNvbnN0IGNvZGUgPSBzdHIuY2hhckNvZGVBdCgtLWluZGV4KTsKICAgICAgICBpZiAoY29kZSAhPT0gMzIgJiYgY29kZSAhPT0gOSkKICAgICAgICAgIHJldHVybiBpbmRleCArIDE7CiAgICAgIH0KICAgICAgcmV0dXJuIG1pbjsKICAgIH0KICAgIGZ1bmN0aW9uIHNlcmlhbGl6ZTIobmFtZSwgdmFsLCBvcHRpb25zKSB7CiAgICAgIGNvbnN0IGVuYyA9IChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmVuY29kZSkgfHwgZW5jb2RlVVJJQ29tcG9uZW50OwogICAgICBpZiAoIWNvb2tpZU5hbWVSZWdFeHAudGVzdChuYW1lKSkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYGFyZ3VtZW50IG5hbWUgaXMgaW52YWxpZDogJHtuYW1lfWApOwogICAgICB9CiAgICAgIGNvbnN0IHZhbHVlID0gZW5jKHZhbCk7CiAgICAgIGlmICghY29va2llVmFsdWVSZWdFeHAudGVzdCh2YWx1ZSkpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBhcmd1bWVudCB2YWwgaXMgaW52YWxpZDogJHt2YWx9YCk7CiAgICAgIH0KICAgICAgbGV0IHN0ciA9IG5hbWUgKyAiPSIgKyB2YWx1ZTsKICAgICAgaWYgKCFvcHRpb25zKQogICAgICAgIHJldHVybiBzdHI7CiAgICAgIGlmIChvcHRpb25zLm1heEFnZSAhPT0gdm9pZCAwKSB7CiAgICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKG9wdGlvbnMubWF4QWdlKSkgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgb3B0aW9uIG1heEFnZSBpcyBpbnZhbGlkOiAke29wdGlvbnMubWF4QWdlfWApOwogICAgICAgIH0KICAgICAgICBzdHIgKz0gIjsgTWF4LUFnZT0iICsgb3B0aW9ucy5tYXhBZ2U7CiAgICAgIH0KICAgICAgaWYgKG9wdGlvbnMuZG9tYWluKSB7CiAgICAgICAgaWYgKCFkb21haW5WYWx1ZVJlZ0V4cC50ZXN0KG9wdGlvbnMuZG9tYWluKSkgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgb3B0aW9uIGRvbWFpbiBpcyBpbnZhbGlkOiAke29wdGlvbnMuZG9tYWlufWApOwogICAgICAgIH0KICAgICAgICBzdHIgKz0gIjsgRG9tYWluPSIgKyBvcHRpb25zLmRvbWFpbjsKICAgICAgfQogICAgICBpZiAob3B0aW9ucy5wYXRoKSB7CiAgICAgICAgaWYgKCFwYXRoVmFsdWVSZWdFeHAudGVzdChvcHRpb25zLnBhdGgpKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBvcHRpb24gcGF0aCBpcyBpbnZhbGlkOiAke29wdGlvbnMucGF0aH1gKTsKICAgICAgICB9CiAgICAgICAgc3RyICs9ICI7IFBhdGg9IiArIG9wdGlvbnMucGF0aDsKICAgICAgfQogICAgICBpZiAob3B0aW9ucy5leHBpcmVzKSB7CiAgICAgICAgaWYgKCFpc0RhdGUob3B0aW9ucy5leHBpcmVzKSB8fCAhTnVtYmVyLmlzRmluaXRlKG9wdGlvbnMuZXhwaXJlcy52YWx1ZU9mKCkpKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBvcHRpb24gZXhwaXJlcyBpcyBpbnZhbGlkOiAke29wdGlvbnMuZXhwaXJlc31gKTsKICAgICAgICB9CiAgICAgICAgc3RyICs9ICI7IEV4cGlyZXM9IiArIG9wdGlvbnMuZXhwaXJlcy50b1VUQ1N0cmluZygpOwogICAgICB9CiAgICAgIGlmIChvcHRpb25zLmh0dHBPbmx5KSB7CiAgICAgICAgc3RyICs9ICI7IEh0dHBPbmx5IjsKICAgICAgfQogICAgICBpZiAob3B0aW9ucy5zZWN1cmUpIHsKICAgICAgICBzdHIgKz0gIjsgU2VjdXJlIjsKICAgICAgfQogICAgICBpZiAob3B0aW9ucy5wYXJ0aXRpb25lZCkgewogICAgICAgIHN0ciArPSAiOyBQYXJ0aXRpb25lZCI7CiAgICAgIH0KICAgICAgaWYgKG9wdGlvbnMucHJpb3JpdHkpIHsKICAgICAgICBjb25zdCBwcmlvcml0eSA9IHR5cGVvZiBvcHRpb25zLnByaW9yaXR5ID09PSAic3RyaW5nIiA/IG9wdGlvbnMucHJpb3JpdHkudG9Mb3dlckNhc2UoKSA6IHZvaWQgMDsKICAgICAgICBzd2l0Y2ggKHByaW9yaXR5KSB7CiAgICAgICAgICBjYXNlICJsb3ciOgogICAgICAgICAgICBzdHIgKz0gIjsgUHJpb3JpdHk9TG93IjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJtZWRpdW0iOgogICAgICAgICAgICBzdHIgKz0gIjsgUHJpb3JpdHk9TWVkaXVtIjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJoaWdoIjoKICAgICAgICAgICAgc3RyICs9ICI7IFByaW9yaXR5PUhpZ2giOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYG9wdGlvbiBwcmlvcml0eSBpcyBpbnZhbGlkOiAke29wdGlvbnMucHJpb3JpdHl9YCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChvcHRpb25zLnNhbWVTaXRlKSB7CiAgICAgICAgY29uc3Qgc2FtZVNpdGUgPSB0eXBlb2Ygb3B0aW9ucy5zYW1lU2l0ZSA9PT0gInN0cmluZyIgPyBvcHRpb25zLnNhbWVTaXRlLnRvTG93ZXJDYXNlKCkgOiBvcHRpb25zLnNhbWVTaXRlOwogICAgICAgIHN3aXRjaCAoc2FtZVNpdGUpIHsKICAgICAgICAgIGNhc2UgdHJ1ZToKICAgICAgICAgIGNhc2UgInN0cmljdCI6CiAgICAgICAgICAgIHN0ciArPSAiOyBTYW1lU2l0ZT1TdHJpY3QiOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImxheCI6CiAgICAgICAgICAgIHN0ciArPSAiOyBTYW1lU2l0ZT1MYXgiOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgIm5vbmUiOgogICAgICAgICAgICBzdHIgKz0gIjsgU2FtZVNpdGU9Tm9uZSI7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgb3B0aW9uIHNhbWVTaXRlIGlzIGludmFsaWQ6ICR7b3B0aW9ucy5zYW1lU2l0ZX1gKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHN0cjsKICAgIH0KICAgIGZ1bmN0aW9uIGRlY29kZTIoc3RyKSB7CiAgICAgIGlmIChzdHIuaW5kZXhPZigiJSIpID09PSAtMSkKICAgICAgICByZXR1cm4gc3RyOwogICAgICB0cnkgewogICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoc3RyKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJldHVybiBzdHI7CiAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGlzRGF0ZSh2YWwpIHsKICAgICAgcmV0dXJuIF9fdG9TdHJpbmcuY2FsbCh2YWwpID09PSAiW29iamVjdCBEYXRlXSI7CiAgICB9CiAgfQp9KTsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9zZXQtY29va2llLXBhcnNlci9saWIvc2V0LWNvb2tpZS5qcwp2YXIgcmVxdWlyZV9zZXRfY29va2llID0gX19jb21tb25KUyh7CiAgIi4uLy4uL25vZGVfbW9kdWxlcy9zZXQtY29va2llLXBhcnNlci9saWIvc2V0LWNvb2tpZS5qcyIoZXhwb3J0cywgbW9kdWxlKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICB2YXIgZGVmYXVsdFBhcnNlT3B0aW9ucyA9IHsKICAgICAgZGVjb2RlVmFsdWVzOiB0cnVlLAogICAgICBtYXA6IGZhbHNlLAogICAgICBzaWxlbnQ6IGZhbHNlCiAgICB9OwogICAgZnVuY3Rpb24gaXNOb25FbXB0eVN0cmluZyhzdHIpIHsKICAgICAgcmV0dXJuIHR5cGVvZiBzdHIgPT09ICJzdHJpbmciICYmICEhc3RyLnRyaW0oKTsKICAgIH0KICAgIGZ1bmN0aW9uIHBhcnNlU3RyaW5nKHNldENvb2tpZVZhbHVlLCBvcHRpb25zKSB7CiAgICAgIHZhciBwYXJ0cyA9IHNldENvb2tpZVZhbHVlLnNwbGl0KCI7IikuZmlsdGVyKGlzTm9uRW1wdHlTdHJpbmcpOwogICAgICB2YXIgbmFtZVZhbHVlUGFpclN0ciA9IHBhcnRzLnNoaWZ0KCk7CiAgICAgIHZhciBwYXJzZWQgPSBwYXJzZU5hbWVWYWx1ZVBhaXIobmFtZVZhbHVlUGFpclN0cik7CiAgICAgIHZhciBuYW1lID0gcGFyc2VkLm5hbWU7CiAgICAgIHZhciB2YWx1ZSA9IHBhcnNlZC52YWx1ZTsKICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0UGFyc2VPcHRpb25zLCBvcHRpb25zKSA6IGRlZmF1bHRQYXJzZU9wdGlvbnM7CiAgICAgIHRyeSB7CiAgICAgICAgdmFsdWUgPSBvcHRpb25zLmRlY29kZVZhbHVlcyA/IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkgOiB2YWx1ZTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAic2V0LWNvb2tpZS1wYXJzZXIgZW5jb3VudGVyZWQgYW4gZXJyb3Igd2hpbGUgZGVjb2RpbmcgYSBjb29raWUgd2l0aCB2YWx1ZSAnIiArIHZhbHVlICsgIicuIFNldCBvcHRpb25zLmRlY29kZVZhbHVlcyB0byBmYWxzZSB0byBkaXNhYmxlIHRoaXMgZmVhdHVyZS4iLAogICAgICAgICAgZQogICAgICAgICk7CiAgICAgIH0KICAgICAgdmFyIGNvb2tpZSA9IHsKICAgICAgICBuYW1lLAogICAgICAgIHZhbHVlCiAgICAgIH07CiAgICAgIHBhcnRzLmZvckVhY2goZnVuY3Rpb24ocGFydCkgewogICAgICAgIHZhciBzaWRlcyA9IHBhcnQuc3BsaXQoIj0iKTsKICAgICAgICB2YXIga2V5ID0gc2lkZXMuc2hpZnQoKS50cmltTGVmdCgpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgdmFyIHZhbHVlMiA9IHNpZGVzLmpvaW4oIj0iKTsKICAgICAgICBpZiAoa2V5ID09PSAiZXhwaXJlcyIpIHsKICAgICAgICAgIGNvb2tpZS5leHBpcmVzID0gbmV3IERhdGUodmFsdWUyKTsKICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gIm1heC1hZ2UiKSB7CiAgICAgICAgICBjb29raWUubWF4QWdlID0gcGFyc2VJbnQodmFsdWUyLCAxMCk7CiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICJzZWN1cmUiKSB7CiAgICAgICAgICBjb29raWUuc2VjdXJlID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gImh0dHBvbmx5IikgewogICAgICAgICAgY29va2llLmh0dHBPbmx5ID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gInNhbWVzaXRlIikgewogICAgICAgICAgY29va2llLnNhbWVTaXRlID0gdmFsdWUyOwogICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAicGFydGl0aW9uZWQiKSB7CiAgICAgICAgICBjb29raWUucGFydGl0aW9uZWQgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb29raWVba2V5XSA9IHZhbHVlMjsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gY29va2llOwogICAgfQogICAgZnVuY3Rpb24gcGFyc2VOYW1lVmFsdWVQYWlyKG5hbWVWYWx1ZVBhaXJTdHIpIHsKICAgICAgdmFyIG5hbWUgPSAiIjsKICAgICAgdmFyIHZhbHVlID0gIiI7CiAgICAgIHZhciBuYW1lVmFsdWVBcnIgPSBuYW1lVmFsdWVQYWlyU3RyLnNwbGl0KCI9Iik7CiAgICAgIGlmIChuYW1lVmFsdWVBcnIubGVuZ3RoID4gMSkgewogICAgICAgIG5hbWUgPSBuYW1lVmFsdWVBcnIuc2hpZnQoKTsKICAgICAgICB2YWx1ZSA9IG5hbWVWYWx1ZUFyci5qb2luKCI9Iik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsdWUgPSBuYW1lVmFsdWVQYWlyU3RyOwogICAgICB9CiAgICAgIHJldHVybiB7IG5hbWUsIHZhbHVlIH07CiAgICB9CiAgICBmdW5jdGlvbiBwYXJzZTIoaW5wdXQsIG9wdGlvbnMpIHsKICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0UGFyc2VPcHRpb25zLCBvcHRpb25zKSA6IGRlZmF1bHRQYXJzZU9wdGlvbnM7CiAgICAgIGlmICghaW5wdXQpIHsKICAgICAgICBpZiAoIW9wdGlvbnMubWFwKSB7CiAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiB7fTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGlucHV0LmhlYWRlcnMpIHsKICAgICAgICBpZiAodHlwZW9mIGlucHV0LmhlYWRlcnMuZ2V0U2V0Q29va2llID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICBpbnB1dCA9IGlucHV0LmhlYWRlcnMuZ2V0U2V0Q29va2llKCk7CiAgICAgICAgfSBlbHNlIGlmIChpbnB1dC5oZWFkZXJzWyJzZXQtY29va2llIl0pIHsKICAgICAgICAgIGlucHV0ID0gaW5wdXQuaGVhZGVyc1sic2V0LWNvb2tpZSJdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgc2NoID0gaW5wdXQuaGVhZGVyc1tPYmplY3Qua2V5cyhpbnB1dC5oZWFkZXJzKS5maW5kKGZ1bmN0aW9uKGtleSkgewogICAgICAgICAgICByZXR1cm4ga2V5LnRvTG93ZXJDYXNlKCkgPT09ICJzZXQtY29va2llIjsKICAgICAgICAgIH0pXTsKICAgICAgICAgIGlmICghc2NoICYmIGlucHV0LmhlYWRlcnMuY29va2llICYmICFvcHRpb25zLnNpbGVudCkgewogICAgICAgICAgICBjb25zb2xlLndhcm4oCiAgICAgICAgICAgICAgIldhcm5pbmc6IHNldC1jb29raWUtcGFyc2VyIGFwcGVhcnMgdG8gaGF2ZSBiZWVuIGNhbGxlZCBvbiBhIHJlcXVlc3Qgb2JqZWN0LiBJdCBpcyBkZXNpZ25lZCB0byBwYXJzZSBTZXQtQ29va2llIGhlYWRlcnMgZnJvbSByZXNwb25zZXMsIG5vdCBDb29raWUgaGVhZGVycyBmcm9tIHJlcXVlc3RzLiBTZXQgdGhlIG9wdGlvbiB7c2lsZW50OiB0cnVlfSB0byBzdXBwcmVzcyB0aGlzIHdhcm5pbmcuIgogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgaW5wdXQgPSBzY2g7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHsKICAgICAgICBpbnB1dCA9IFtpbnB1dF07CiAgICAgIH0KICAgICAgaWYgKCFvcHRpb25zLm1hcCkgewogICAgICAgIHJldHVybiBpbnB1dC5maWx0ZXIoaXNOb25FbXB0eVN0cmluZykubWFwKGZ1bmN0aW9uKHN0cikgewogICAgICAgICAgcmV0dXJuIHBhcnNlU3RyaW5nKHN0ciwgb3B0aW9ucyk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGNvb2tpZXMgPSB7fTsKICAgICAgICByZXR1cm4gaW5wdXQuZmlsdGVyKGlzTm9uRW1wdHlTdHJpbmcpLnJlZHVjZShmdW5jdGlvbihjb29raWVzMiwgc3RyKSB7CiAgICAgICAgICB2YXIgY29va2llID0gcGFyc2VTdHJpbmcoc3RyLCBvcHRpb25zKTsKICAgICAgICAgIGNvb2tpZXMyW2Nvb2tpZS5uYW1lXSA9IGNvb2tpZTsKICAgICAgICAgIHJldHVybiBjb29raWVzMjsKICAgICAgICB9LCBjb29raWVzKTsKICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gc3BsaXRDb29raWVzU3RyaW5nMihjb29raWVzU3RyaW5nKSB7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvb2tpZXNTdHJpbmcpKSB7CiAgICAgICAgcmV0dXJuIGNvb2tpZXNTdHJpbmc7CiAgICAgIH0KICAgICAgaWYgKHR5cGVvZiBjb29raWVzU3RyaW5nICE9PSAic3RyaW5nIikgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgICB2YXIgY29va2llc1N0cmluZ3MgPSBbXTsKICAgICAgdmFyIHBvcyA9IDA7CiAgICAgIHZhciBzdGFydDsKICAgICAgdmFyIGNoOwogICAgICB2YXIgbGFzdENvbW1hOwogICAgICB2YXIgbmV4dFN0YXJ0OwogICAgICB2YXIgY29va2llc1NlcGFyYXRvckZvdW5kOwogICAgICBmdW5jdGlvbiBza2lwV2hpdGVzcGFjZSgpIHsKICAgICAgICB3aGlsZSAocG9zIDwgY29va2llc1N0cmluZy5sZW5ndGggJiYgL1xzLy50ZXN0KGNvb2tpZXNTdHJpbmcuY2hhckF0KHBvcykpKSB7CiAgICAgICAgICBwb3MgKz0gMTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHBvcyA8IGNvb2tpZXNTdHJpbmcubGVuZ3RoOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG5vdFNwZWNpYWxDaGFyKCkgewogICAgICAgIGNoID0gY29va2llc1N0cmluZy5jaGFyQXQocG9zKTsKICAgICAgICByZXR1cm4gY2ggIT09ICI9IiAmJiBjaCAhPT0gIjsiICYmIGNoICE9PSAiLCI7CiAgICAgIH0KICAgICAgd2hpbGUgKHBvcyA8IGNvb2tpZXNTdHJpbmcubGVuZ3RoKSB7CiAgICAgICAgc3RhcnQgPSBwb3M7CiAgICAgICAgY29va2llc1NlcGFyYXRvckZvdW5kID0gZmFsc2U7CiAgICAgICAgd2hpbGUgKHNraXBXaGl0ZXNwYWNlKCkpIHsKICAgICAgICAgIGNoID0gY29va2llc1N0cmluZy5jaGFyQXQocG9zKTsKICAgICAgICAgIGlmIChjaCA9PT0gIiwiKSB7CiAgICAgICAgICAgIGxhc3RDb21tYSA9IHBvczsKICAgICAgICAgICAgcG9zICs9IDE7CiAgICAgICAgICAgIHNraXBXaGl0ZXNwYWNlKCk7CiAgICAgICAgICAgIG5leHRTdGFydCA9IHBvczsKICAgICAgICAgICAgd2hpbGUgKHBvcyA8IGNvb2tpZXNTdHJpbmcubGVuZ3RoICYmIG5vdFNwZWNpYWxDaGFyKCkpIHsKICAgICAgICAgICAgICBwb3MgKz0gMTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocG9zIDwgY29va2llc1N0cmluZy5sZW5ndGggJiYgY29va2llc1N0cmluZy5jaGFyQXQocG9zKSA9PT0gIj0iKSB7CiAgICAgICAgICAgICAgY29va2llc1NlcGFyYXRvckZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICBwb3MgPSBuZXh0U3RhcnQ7CiAgICAgICAgICAgICAgY29va2llc1N0cmluZ3MucHVzaChjb29raWVzU3RyaW5nLnN1YnN0cmluZyhzdGFydCwgbGFzdENvbW1hKSk7CiAgICAgICAgICAgICAgc3RhcnQgPSBwb3M7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcG9zID0gbGFzdENvbW1hICsgMTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcG9zICs9IDE7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghY29va2llc1NlcGFyYXRvckZvdW5kIHx8IHBvcyA+PSBjb29raWVzU3RyaW5nLmxlbmd0aCkgewogICAgICAgICAgY29va2llc1N0cmluZ3MucHVzaChjb29raWVzU3RyaW5nLnN1YnN0cmluZyhzdGFydCwgY29va2llc1N0cmluZy5sZW5ndGgpKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGNvb2tpZXNTdHJpbmdzOwogICAgfQogICAgbW9kdWxlLmV4cG9ydHMgPSBwYXJzZTI7CiAgICBtb2R1bGUuZXhwb3J0cy5wYXJzZSA9IHBhcnNlMjsKICAgIG1vZHVsZS5leHBvcnRzLnBhcnNlU3RyaW5nID0gcGFyc2VTdHJpbmc7CiAgICBtb2R1bGUuZXhwb3J0cy5zcGxpdENvb2tpZXNTdHJpbmcgPSBzcGxpdENvb2tpZXNTdHJpbmcyOwogIH0KfSk7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvcmVhY3Qtcm91dGVyL2Rpc3QvZGV2ZWxvcG1lbnQvY2h1bmstQjdSUVU1VEwubWpzCnZhciBSZWFjdCA9IF9fdG9FU00ocmVxdWlyZV9yZWFjdCgpLCAxKTsKdmFyIFJlYWN0MiA9IF9fdG9FU00ocmVxdWlyZV9yZWFjdCgpLCAxKTsKdmFyIFJlYWN0MyA9IF9fdG9FU00ocmVxdWlyZV9yZWFjdCgpLCAxKTsKdmFyIFJlYWN0NCA9IF9fdG9FU00ocmVxdWlyZV9yZWFjdCgpLCAxKTsKdmFyIFJlYWN0OSA9IF9fdG9FU00ocmVxdWlyZV9yZWFjdCgpLCAxKTsKdmFyIFJlYWN0OCA9IF9fdG9FU00ocmVxdWlyZV9yZWFjdCgpLCAxKTsKdmFyIFJlYWN0NyA9IF9fdG9FU00ocmVxdWlyZV9yZWFjdCgpLCAxKTsKdmFyIFJlYWN0NiA9IF9fdG9FU00ocmVxdWlyZV9yZWFjdCgpLCAxKTsKdmFyIFJlYWN0NSA9IF9fdG9FU00ocmVxdWlyZV9yZWFjdCgpLCAxKTsKdmFyIFJlYWN0MTAgPSBfX3RvRVNNKHJlcXVpcmVfcmVhY3QoKSwgMSk7CnZhciBSZWFjdDExID0gX190b0VTTShyZXF1aXJlX3JlYWN0KCksIDEpOwp2YXIgX190eXBlRXJyb3IgPSAobXNnKSA9PiB7CiAgdGhyb3cgVHlwZUVycm9yKG1zZyk7Cn07CnZhciBfX2FjY2Vzc0NoZWNrID0gKG9iaiwgbWVtYmVyLCBtc2cpID0+IG1lbWJlci5oYXMob2JqKSB8fCBfX3R5cGVFcnJvcigiQ2Fubm90ICIgKyBtc2cpOwp2YXIgX19wcml2YXRlR2V0ID0gKG9iaiwgbWVtYmVyLCBnZXR0ZXIpID0+IChfX2FjY2Vzc0NoZWNrKG9iaiwgbWVtYmVyLCAicmVhZCBmcm9tIHByaXZhdGUgZmllbGQiKSwgZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IG1lbWJlci5nZXQob2JqKSk7CnZhciBfX3ByaXZhdGVBZGQgPSAob2JqLCBtZW1iZXIsIHZhbHVlKSA9PiBtZW1iZXIuaGFzKG9iaikgPyBfX3R5cGVFcnJvcigiQ2Fubm90IGFkZCB0aGUgc2FtZSBwcml2YXRlIG1lbWJlciBtb3JlIHRoYW4gb25jZSIpIDogbWVtYmVyIGluc3RhbmNlb2YgV2Vha1NldCA/IG1lbWJlci5hZGQob2JqKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7CnZhciBBY3Rpb24gPSAoKEFjdGlvbjIpID0+IHsKICBBY3Rpb24yWyJQb3AiXSA9ICJQT1AiOwogIEFjdGlvbjJbIlB1c2giXSA9ICJQVVNIIjsKICBBY3Rpb24yWyJSZXBsYWNlIl0gPSAiUkVQTEFDRSI7CiAgcmV0dXJuIEFjdGlvbjI7Cn0pKEFjdGlvbiB8fCB7fSk7CnZhciBQb3BTdGF0ZUV2ZW50VHlwZSA9ICJwb3BzdGF0ZSI7CmZ1bmN0aW9uIGNyZWF0ZU1lbW9yeUhpc3Rvcnkob3B0aW9ucyA9IHt9KSB7CiAgbGV0IHsgaW5pdGlhbEVudHJpZXMgPSBbIi8iXSwgaW5pdGlhbEluZGV4LCB2NUNvbXBhdCA9IGZhbHNlIH0gPSBvcHRpb25zOwogIGxldCBlbnRyaWVzOwogIGVudHJpZXMgPSBpbml0aWFsRW50cmllcy5tYXAoCiAgICAoZW50cnksIGluZGV4MikgPT4gY3JlYXRlTWVtb3J5TG9jYXRpb24oCiAgICAgIGVudHJ5LAogICAgICB0eXBlb2YgZW50cnkgPT09ICJzdHJpbmciID8gbnVsbCA6IGVudHJ5LnN0YXRlLAogICAgICBpbmRleDIgPT09IDAgPyAiZGVmYXVsdCIgOiB2b2lkIDAKICAgICkKICApOwogIGxldCBpbmRleCA9IGNsYW1wSW5kZXgoCiAgICBpbml0aWFsSW5kZXggPT0gbnVsbCA/IGVudHJpZXMubGVuZ3RoIC0gMSA6IGluaXRpYWxJbmRleAogICk7CiAgbGV0IGFjdGlvbiA9ICJQT1AiOwogIGxldCBsaXN0ZW5lciA9IG51bGw7CiAgZnVuY3Rpb24gY2xhbXBJbmRleChuKSB7CiAgICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgobiwgMCksIGVudHJpZXMubGVuZ3RoIC0gMSk7CiAgfQogIGZ1bmN0aW9uIGdldEN1cnJlbnRMb2NhdGlvbigpIHsKICAgIHJldHVybiBlbnRyaWVzW2luZGV4XTsKICB9CiAgZnVuY3Rpb24gY3JlYXRlTWVtb3J5TG9jYXRpb24odG8sIHN0YXRlID0gbnVsbCwga2V5KSB7CiAgICBsZXQgbG9jYXRpb24yID0gY3JlYXRlTG9jYXRpb24oCiAgICAgIGVudHJpZXMgPyBnZXRDdXJyZW50TG9jYXRpb24oKS5wYXRobmFtZSA6ICIvIiwKICAgICAgdG8sCiAgICAgIHN0YXRlLAogICAgICBrZXkKICAgICk7CiAgICB3YXJuaW5nKAogICAgICBsb2NhdGlvbjIucGF0aG5hbWUuY2hhckF0KDApID09PSAiLyIsCiAgICAgIGByZWxhdGl2ZSBwYXRobmFtZXMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gbWVtb3J5IGhpc3Rvcnk6ICR7SlNPTi5zdHJpbmdpZnkoCiAgICAgICAgdG8KICAgICAgKX1gCiAgICApOwogICAgcmV0dXJuIGxvY2F0aW9uMjsKICB9CiAgZnVuY3Rpb24gY3JlYXRlSHJlZjIodG8pIHsKICAgIHJldHVybiB0eXBlb2YgdG8gPT09ICJzdHJpbmciID8gdG8gOiBjcmVhdGVQYXRoKHRvKTsKICB9CiAgbGV0IGhpc3RvcnkgPSB7CiAgICBnZXQgaW5kZXgoKSB7CiAgICAgIHJldHVybiBpbmRleDsKICAgIH0sCiAgICBnZXQgYWN0aW9uKCkgewogICAgICByZXR1cm4gYWN0aW9uOwogICAgfSwKICAgIGdldCBsb2NhdGlvbigpIHsKICAgICAgcmV0dXJuIGdldEN1cnJlbnRMb2NhdGlvbigpOwogICAgfSwKICAgIGNyZWF0ZUhyZWY6IGNyZWF0ZUhyZWYyLAogICAgY3JlYXRlVVJMKHRvKSB7CiAgICAgIHJldHVybiBuZXcgVVJMKGNyZWF0ZUhyZWYyKHRvKSwgImh0dHA6Ly9sb2NhbGhvc3QiKTsKICAgIH0sCiAgICBlbmNvZGVMb2NhdGlvbih0bykgewogICAgICBsZXQgcGF0aCA9IHR5cGVvZiB0byA9PT0gInN0cmluZyIgPyBwYXJzZVBhdGgodG8pIDogdG87CiAgICAgIHJldHVybiB7CiAgICAgICAgcGF0aG5hbWU6IHBhdGgucGF0aG5hbWUgfHwgIiIsCiAgICAgICAgc2VhcmNoOiBwYXRoLnNlYXJjaCB8fCAiIiwKICAgICAgICBoYXNoOiBwYXRoLmhhc2ggfHwgIiIKICAgICAgfTsKICAgIH0sCiAgICBwdXNoKHRvLCBzdGF0ZSkgewogICAgICBhY3Rpb24gPSAiUFVTSCI7CiAgICAgIGxldCBuZXh0TG9jYXRpb24gPSBjcmVhdGVNZW1vcnlMb2NhdGlvbih0bywgc3RhdGUpOwogICAgICBpbmRleCArPSAxOwogICAgICBlbnRyaWVzLnNwbGljZShpbmRleCwgZW50cmllcy5sZW5ndGgsIG5leHRMb2NhdGlvbik7CiAgICAgIGlmICh2NUNvbXBhdCAmJiBsaXN0ZW5lcikgewogICAgICAgIGxpc3RlbmVyKHsgYWN0aW9uLCBsb2NhdGlvbjogbmV4dExvY2F0aW9uLCBkZWx0YTogMSB9KTsKICAgICAgfQogICAgfSwKICAgIHJlcGxhY2UodG8sIHN0YXRlKSB7CiAgICAgIGFjdGlvbiA9ICJSRVBMQUNFIjsKICAgICAgbGV0IG5leHRMb2NhdGlvbiA9IGNyZWF0ZU1lbW9yeUxvY2F0aW9uKHRvLCBzdGF0ZSk7CiAgICAgIGVudHJpZXNbaW5kZXhdID0gbmV4dExvY2F0aW9uOwogICAgICBpZiAodjVDb21wYXQgJiYgbGlzdGVuZXIpIHsKICAgICAgICBsaXN0ZW5lcih7IGFjdGlvbiwgbG9jYXRpb246IG5leHRMb2NhdGlvbiwgZGVsdGE6IDAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBnbyhkZWx0YSkgewogICAgICBhY3Rpb24gPSAiUE9QIjsKICAgICAgbGV0IG5leHRJbmRleCA9IGNsYW1wSW5kZXgoaW5kZXggKyBkZWx0YSk7CiAgICAgIGxldCBuZXh0TG9jYXRpb24gPSBlbnRyaWVzW25leHRJbmRleF07CiAgICAgIGluZGV4ID0gbmV4dEluZGV4OwogICAgICBpZiAobGlzdGVuZXIpIHsKICAgICAgICBsaXN0ZW5lcih7IGFjdGlvbiwgbG9jYXRpb246IG5leHRMb2NhdGlvbiwgZGVsdGEgfSk7CiAgICAgIH0KICAgIH0sCiAgICBsaXN0ZW4oZm4pIHsKICAgICAgbGlzdGVuZXIgPSBmbjsKICAgICAgcmV0dXJuICgpID0+IHsKICAgICAgICBsaXN0ZW5lciA9IG51bGw7CiAgICAgIH07CiAgICB9CiAgfTsKICByZXR1cm4gaGlzdG9yeTsKfQpmdW5jdGlvbiBjcmVhdGVCcm93c2VySGlzdG9yeShvcHRpb25zID0ge30pIHsKICBmdW5jdGlvbiBjcmVhdGVCcm93c2VyTG9jYXRpb24od2luZG93MiwgZ2xvYmFsSGlzdG9yeSkgewogICAgbGV0IHsgcGF0aG5hbWUsIHNlYXJjaCwgaGFzaCB9ID0gd2luZG93Mi5sb2NhdGlvbjsKICAgIHJldHVybiBjcmVhdGVMb2NhdGlvbigKICAgICAgIiIsCiAgICAgIHsgcGF0aG5hbWUsIHNlYXJjaCwgaGFzaCB9LAogICAgICAvLyBzdGF0ZSBkZWZhdWx0cyB0byBgbnVsbGAgYmVjYXVzZSBgd2luZG93Lmhpc3Rvcnkuc3RhdGVgIGRvZXMKICAgICAgZ2xvYmFsSGlzdG9yeS5zdGF0ZSAmJiBnbG9iYWxIaXN0b3J5LnN0YXRlLnVzciB8fCBudWxsLAogICAgICBnbG9iYWxIaXN0b3J5LnN0YXRlICYmIGdsb2JhbEhpc3Rvcnkuc3RhdGUua2V5IHx8ICJkZWZhdWx0IgogICAgKTsKICB9CiAgZnVuY3Rpb24gY3JlYXRlQnJvd3NlckhyZWYod2luZG93MiwgdG8pIHsKICAgIHJldHVybiB0eXBlb2YgdG8gPT09ICJzdHJpbmciID8gdG8gOiBjcmVhdGVQYXRoKHRvKTsKICB9CiAgcmV0dXJuIGdldFVybEJhc2VkSGlzdG9yeSgKICAgIGNyZWF0ZUJyb3dzZXJMb2NhdGlvbiwKICAgIGNyZWF0ZUJyb3dzZXJIcmVmLAogICAgbnVsbCwKICAgIG9wdGlvbnMKICApOwp9CmZ1bmN0aW9uIGNyZWF0ZUhhc2hIaXN0b3J5KG9wdGlvbnMgPSB7fSkgewogIGZ1bmN0aW9uIGNyZWF0ZUhhc2hMb2NhdGlvbih3aW5kb3cyLCBnbG9iYWxIaXN0b3J5KSB7CiAgICBsZXQgewogICAgICBwYXRobmFtZSA9ICIvIiwKICAgICAgc2VhcmNoID0gIiIsCiAgICAgIGhhc2ggPSAiIgogICAgfSA9IHBhcnNlUGF0aCh3aW5kb3cyLmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpKTsKICAgIGlmICghcGF0aG5hbWUuc3RhcnRzV2l0aCgiLyIpICYmICFwYXRobmFtZS5zdGFydHNXaXRoKCIuIikpIHsKICAgICAgcGF0aG5hbWUgPSAiLyIgKyBwYXRobmFtZTsKICAgIH0KICAgIHJldHVybiBjcmVhdGVMb2NhdGlvbigKICAgICAgIiIsCiAgICAgIHsgcGF0aG5hbWUsIHNlYXJjaCwgaGFzaCB9LAogICAgICAvLyBzdGF0ZSBkZWZhdWx0cyB0byBgbnVsbGAgYmVjYXVzZSBgd2luZG93Lmhpc3Rvcnkuc3RhdGVgIGRvZXMKICAgICAgZ2xvYmFsSGlzdG9yeS5zdGF0ZSAmJiBnbG9iYWxIaXN0b3J5LnN0YXRlLnVzciB8fCBudWxsLAogICAgICBnbG9iYWxIaXN0b3J5LnN0YXRlICYmIGdsb2JhbEhpc3Rvcnkuc3RhdGUua2V5IHx8ICJkZWZhdWx0IgogICAgKTsKICB9CiAgZnVuY3Rpb24gY3JlYXRlSGFzaEhyZWYod2luZG93MiwgdG8pIHsKICAgIGxldCBiYXNlID0gd2luZG93Mi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJiYXNlIik7CiAgICBsZXQgaHJlZjIgPSAiIjsKICAgIGlmIChiYXNlICYmIGJhc2UuZ2V0QXR0cmlidXRlKCJocmVmIikpIHsKICAgICAgbGV0IHVybCA9IHdpbmRvdzIubG9jYXRpb24uaHJlZjsKICAgICAgbGV0IGhhc2hJbmRleCA9IHVybC5pbmRleE9mKCIjIik7CiAgICAgIGhyZWYyID0gaGFzaEluZGV4ID09PSAtMSA/IHVybCA6IHVybC5zbGljZSgwLCBoYXNoSW5kZXgpOwogICAgfQogICAgcmV0dXJuIGhyZWYyICsgIiMiICsgKHR5cGVvZiB0byA9PT0gInN0cmluZyIgPyB0byA6IGNyZWF0ZVBhdGgodG8pKTsKICB9CiAgZnVuY3Rpb24gdmFsaWRhdGVIYXNoTG9jYXRpb24obG9jYXRpb24yLCB0bykgewogICAgd2FybmluZygKICAgICAgbG9jYXRpb24yLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gIi8iLAogICAgICBgcmVsYXRpdmUgcGF0aG5hbWVzIGFyZSBub3Qgc3VwcG9ydGVkIGluIGhhc2ggaGlzdG9yeS5wdXNoKCR7SlNPTi5zdHJpbmdpZnkoCiAgICAgICAgdG8KICAgICAgKX0pYAogICAgKTsKICB9CiAgcmV0dXJuIGdldFVybEJhc2VkSGlzdG9yeSgKICAgIGNyZWF0ZUhhc2hMb2NhdGlvbiwKICAgIGNyZWF0ZUhhc2hIcmVmLAogICAgdmFsaWRhdGVIYXNoTG9jYXRpb24sCiAgICBvcHRpb25zCiAgKTsKfQpmdW5jdGlvbiBpbnZhcmlhbnQodmFsdWUsIG1lc3NhZ2UpIHsKICBpZiAodmFsdWUgPT09IGZhbHNlIHx8IHZhbHVlID09PSBudWxsIHx8IHR5cGVvZiB2YWx1ZSA9PT0gInVuZGVmaW5lZCIpIHsKICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTsKICB9Cn0KZnVuY3Rpb24gd2FybmluZyhjb25kLCBtZXNzYWdlKSB7CiAgaWYgKCFjb25kKSB7CiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICJ1bmRlZmluZWQiKSBjb25zb2xlLndhcm4obWVzc2FnZSk7CiAgICB0cnkgewogICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICB9CiAgfQp9CmZ1bmN0aW9uIGNyZWF0ZUtleSgpIHsKICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDEwKTsKfQpmdW5jdGlvbiBnZXRIaXN0b3J5U3RhdGUobG9jYXRpb24yLCBpbmRleCkgewogIHJldHVybiB7CiAgICB1c3I6IGxvY2F0aW9uMi5zdGF0ZSwKICAgIGtleTogbG9jYXRpb24yLmtleSwKICAgIGlkeDogaW5kZXgKICB9Owp9CmZ1bmN0aW9uIGNyZWF0ZUxvY2F0aW9uKGN1cnJlbnQsIHRvLCBzdGF0ZSA9IG51bGwsIGtleSkgewogIGxldCBsb2NhdGlvbjIgPSB7CiAgICBwYXRobmFtZTogdHlwZW9mIGN1cnJlbnQgPT09ICJzdHJpbmciID8gY3VycmVudCA6IGN1cnJlbnQucGF0aG5hbWUsCiAgICBzZWFyY2g6ICIiLAogICAgaGFzaDogIiIsCiAgICAuLi50eXBlb2YgdG8gPT09ICJzdHJpbmciID8gcGFyc2VQYXRoKHRvKSA6IHRvLAogICAgc3RhdGUsCiAgICAvLyBUT0RPOiBUaGlzIGNvdWxkIGJlIGNsZWFuZWQgdXAuICBwdXNoL3JlcGxhY2Ugc2hvdWxkIHByb2JhYmx5IGp1c3QgdGFrZQogICAgLy8gZnVsbCBMb2NhdGlvbnMgbm93IGFuZCBhdm9pZCB0aGUgbmVlZCB0byBydW4gdGhyb3VnaCB0aGlzIGZsb3cgYXQgYWxsCiAgICAvLyBCdXQgdGhhdCdzIGEgcHJldHR5IGJpZyByZWZhY3RvciB0byB0aGUgY3VycmVudCB0ZXN0IHN1aXRlIHNvIGdvaW5nIHRvCiAgICAvLyBrZWVwIGFzIGlzIGZvciB0aGUgdGltZSBiZWluZyBhbmQganVzdCBsZXQgYW55IGluY29taW5nIGtleXMgdGFrZSBwcmVjZWRlbmNlCiAgICBrZXk6IHRvICYmIHRvLmtleSB8fCBrZXkgfHwgY3JlYXRlS2V5KCkKICB9OwogIHJldHVybiBsb2NhdGlvbjI7Cn0KZnVuY3Rpb24gY3JlYXRlUGF0aCh7CiAgcGF0aG5hbWUgPSAiLyIsCiAgc2VhcmNoID0gIiIsCiAgaGFzaCA9ICIiCn0pIHsKICBpZiAoc2VhcmNoICYmIHNlYXJjaCAhPT0gIj8iKQogICAgcGF0aG5hbWUgKz0gc2VhcmNoLmNoYXJBdCgwKSA9PT0gIj8iID8gc2VhcmNoIDogIj8iICsgc2VhcmNoOwogIGlmIChoYXNoICYmIGhhc2ggIT09ICIjIikKICAgIHBhdGhuYW1lICs9IGhhc2guY2hhckF0KDApID09PSAiIyIgPyBoYXNoIDogIiMiICsgaGFzaDsKICByZXR1cm4gcGF0aG5hbWU7Cn0KZnVuY3Rpb24gcGFyc2VQYXRoKHBhdGgpIHsKICBsZXQgcGFyc2VkUGF0aCA9IHt9OwogIGlmIChwYXRoKSB7CiAgICBsZXQgaGFzaEluZGV4ID0gcGF0aC5pbmRleE9mKCIjIik7CiAgICBpZiAoaGFzaEluZGV4ID49IDApIHsKICAgICAgcGFyc2VkUGF0aC5oYXNoID0gcGF0aC5zdWJzdHJpbmcoaGFzaEluZGV4KTsKICAgICAgcGF0aCA9IHBhdGguc3Vic3RyaW5nKDAsIGhhc2hJbmRleCk7CiAgICB9CiAgICBsZXQgc2VhcmNoSW5kZXggPSBwYXRoLmluZGV4T2YoIj8iKTsKICAgIGlmIChzZWFyY2hJbmRleCA+PSAwKSB7CiAgICAgIHBhcnNlZFBhdGguc2VhcmNoID0gcGF0aC5zdWJzdHJpbmcoc2VhcmNoSW5kZXgpOwogICAgICBwYXRoID0gcGF0aC5zdWJzdHJpbmcoMCwgc2VhcmNoSW5kZXgpOwogICAgfQogICAgaWYgKHBhdGgpIHsKICAgICAgcGFyc2VkUGF0aC5wYXRobmFtZSA9IHBhdGg7CiAgICB9CiAgfQogIHJldHVybiBwYXJzZWRQYXRoOwp9CmZ1bmN0aW9uIGdldFVybEJhc2VkSGlzdG9yeShnZXRMb2NhdGlvbiwgY3JlYXRlSHJlZjIsIHZhbGlkYXRlTG9jYXRpb24sIG9wdGlvbnMgPSB7fSkgewogIGxldCB7IHdpbmRvdzogd2luZG93MiA9IGRvY3VtZW50LmRlZmF1bHRWaWV3LCB2NUNvbXBhdCA9IGZhbHNlIH0gPSBvcHRpb25zOwogIGxldCBnbG9iYWxIaXN0b3J5ID0gd2luZG93Mi5oaXN0b3J5OwogIGxldCBhY3Rpb24gPSAiUE9QIjsKICBsZXQgbGlzdGVuZXIgPSBudWxsOwogIGxldCBpbmRleCA9IGdldEluZGV4KCk7CiAgaWYgKGluZGV4ID09IG51bGwpIHsKICAgIGluZGV4ID0gMDsKICAgIGdsb2JhbEhpc3RvcnkucmVwbGFjZVN0YXRlKHsgLi4uZ2xvYmFsSGlzdG9yeS5zdGF0ZSwgaWR4OiBpbmRleCB9LCAiIik7CiAgfQogIGZ1bmN0aW9uIGdldEluZGV4KCkgewogICAgbGV0IHN0YXRlID0gZ2xvYmFsSGlzdG9yeS5zdGF0ZSB8fCB7IGlkeDogbnVsbCB9OwogICAgcmV0dXJuIHN0YXRlLmlkeDsKICB9CiAgZnVuY3Rpb24gaGFuZGxlUG9wKCkgewogICAgYWN0aW9uID0gIlBPUCI7CiAgICBsZXQgbmV4dEluZGV4ID0gZ2V0SW5kZXgoKTsKICAgIGxldCBkZWx0YSA9IG5leHRJbmRleCA9PSBudWxsID8gbnVsbCA6IG5leHRJbmRleCAtIGluZGV4OwogICAgaW5kZXggPSBuZXh0SW5kZXg7CiAgICBpZiAobGlzdGVuZXIpIHsKICAgICAgbGlzdGVuZXIoeyBhY3Rpb24sIGxvY2F0aW9uOiBoaXN0b3J5LmxvY2F0aW9uLCBkZWx0YSB9KTsKICAgIH0KICB9CiAgZnVuY3Rpb24gcHVzaCh0bywgc3RhdGUpIHsKICAgIGFjdGlvbiA9ICJQVVNIIjsKICAgIGxldCBsb2NhdGlvbjIgPSBjcmVhdGVMb2NhdGlvbihoaXN0b3J5LmxvY2F0aW9uLCB0bywgc3RhdGUpOwogICAgaWYgKHZhbGlkYXRlTG9jYXRpb24pIHZhbGlkYXRlTG9jYXRpb24obG9jYXRpb24yLCB0byk7CiAgICBpbmRleCA9IGdldEluZGV4KCkgKyAxOwogICAgbGV0IGhpc3RvcnlTdGF0ZSA9IGdldEhpc3RvcnlTdGF0ZShsb2NhdGlvbjIsIGluZGV4KTsKICAgIGxldCB1cmwgPSBoaXN0b3J5LmNyZWF0ZUhyZWYobG9jYXRpb24yKTsKICAgIHRyeSB7CiAgICAgIGdsb2JhbEhpc3RvcnkucHVzaFN0YXRlKGhpc3RvcnlTdGF0ZSwgIiIsIHVybCk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBET01FeGNlcHRpb24gJiYgZXJyb3IubmFtZSA9PT0gIkRhdGFDbG9uZUVycm9yIikgewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9CiAgICAgIHdpbmRvdzIubG9jYXRpb24uYXNzaWduKHVybCk7CiAgICB9CiAgICBpZiAodjVDb21wYXQgJiYgbGlzdGVuZXIpIHsKICAgICAgbGlzdGVuZXIoeyBhY3Rpb24sIGxvY2F0aW9uOiBoaXN0b3J5LmxvY2F0aW9uLCBkZWx0YTogMSB9KTsKICAgIH0KICB9CiAgZnVuY3Rpb24gcmVwbGFjZTIodG8sIHN0YXRlKSB7CiAgICBhY3Rpb24gPSAiUkVQTEFDRSI7CiAgICBsZXQgbG9jYXRpb24yID0gY3JlYXRlTG9jYXRpb24oaGlzdG9yeS5sb2NhdGlvbiwgdG8sIHN0YXRlKTsKICAgIGlmICh2YWxpZGF0ZUxvY2F0aW9uKSB2YWxpZGF0ZUxvY2F0aW9uKGxvY2F0aW9uMiwgdG8pOwogICAgaW5kZXggPSBnZXRJbmRleCgpOwogICAgbGV0IGhpc3RvcnlTdGF0ZSA9IGdldEhpc3RvcnlTdGF0ZShsb2NhdGlvbjIsIGluZGV4KTsKICAgIGxldCB1cmwgPSBoaXN0b3J5LmNyZWF0ZUhyZWYobG9jYXRpb24yKTsKICAgIGdsb2JhbEhpc3RvcnkucmVwbGFjZVN0YXRlKGhpc3RvcnlTdGF0ZSwgIiIsIHVybCk7CiAgICBpZiAodjVDb21wYXQgJiYgbGlzdGVuZXIpIHsKICAgICAgbGlzdGVuZXIoeyBhY3Rpb24sIGxvY2F0aW9uOiBoaXN0b3J5LmxvY2F0aW9uLCBkZWx0YTogMCB9KTsKICAgIH0KICB9CiAgZnVuY3Rpb24gY3JlYXRlVVJMKHRvKSB7CiAgICByZXR1cm4gY3JlYXRlQnJvd3NlclVSTEltcGwodG8pOwogIH0KICBsZXQgaGlzdG9yeSA9IHsKICAgIGdldCBhY3Rpb24oKSB7CiAgICAgIHJldHVybiBhY3Rpb247CiAgICB9LAogICAgZ2V0IGxvY2F0aW9uKCkgewogICAgICByZXR1cm4gZ2V0TG9jYXRpb24od2luZG93MiwgZ2xvYmFsSGlzdG9yeSk7CiAgICB9LAogICAgbGlzdGVuKGZuKSB7CiAgICAgIGlmIChsaXN0ZW5lcikgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiQSBoaXN0b3J5IG9ubHkgYWNjZXB0cyBvbmUgYWN0aXZlIGxpc3RlbmVyIik7CiAgICAgIH0KICAgICAgd2luZG93Mi5hZGRFdmVudExpc3RlbmVyKFBvcFN0YXRlRXZlbnRUeXBlLCBoYW5kbGVQb3ApOwogICAgICBsaXN0ZW5lciA9IGZuOwogICAgICByZXR1cm4gKCkgPT4gewogICAgICAgIHdpbmRvdzIucmVtb3ZlRXZlbnRMaXN0ZW5lcihQb3BTdGF0ZUV2ZW50VHlwZSwgaGFuZGxlUG9wKTsKICAgICAgICBsaXN0ZW5lciA9IG51bGw7CiAgICAgIH07CiAgICB9LAogICAgY3JlYXRlSHJlZih0bykgewogICAgICByZXR1cm4gY3JlYXRlSHJlZjIod2luZG93MiwgdG8pOwogICAgfSwKICAgIGNyZWF0ZVVSTCwKICAgIGVuY29kZUxvY2F0aW9uKHRvKSB7CiAgICAgIGxldCB1cmwgPSBjcmVhdGVVUkwodG8pOwogICAgICByZXR1cm4gewogICAgICAgIHBhdGhuYW1lOiB1cmwucGF0aG5hbWUsCiAgICAgICAgc2VhcmNoOiB1cmwuc2VhcmNoLAogICAgICAgIGhhc2g6IHVybC5oYXNoCiAgICAgIH07CiAgICB9LAogICAgcHVzaCwKICAgIHJlcGxhY2U6IHJlcGxhY2UyLAogICAgZ28obikgewogICAgICByZXR1cm4gZ2xvYmFsSGlzdG9yeS5nbyhuKTsKICAgIH0KICB9OwogIHJldHVybiBoaXN0b3J5Owp9CmZ1bmN0aW9uIGNyZWF0ZUJyb3dzZXJVUkxJbXBsKHRvLCBpc0Fic29sdXRlID0gZmFsc2UpIHsKICBsZXQgYmFzZSA9ICJodHRwOi8vbG9jYWxob3N0IjsKICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIpIHsKICAgIGJhc2UgPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICE9PSAibnVsbCIgPyB3aW5kb3cubG9jYXRpb24ub3JpZ2luIDogd2luZG93LmxvY2F0aW9uLmhyZWY7CiAgfQogIGludmFyaWFudChiYXNlLCAiTm8gd2luZG93LmxvY2F0aW9uLihvcmlnaW58aHJlZikgYXZhaWxhYmxlIHRvIGNyZWF0ZSBVUkwiKTsKICBsZXQgaHJlZjIgPSB0eXBlb2YgdG8gPT09ICJzdHJpbmciID8gdG8gOiBjcmVhdGVQYXRoKHRvKTsKICBocmVmMiA9IGhyZWYyLnJlcGxhY2UoLyAkLywgIiUyMCIpOwogIGlmICghaXNBYnNvbHV0ZSAmJiBocmVmMi5zdGFydHNXaXRoKCIvLyIpKSB7CiAgICBocmVmMiA9IGJhc2UgKyBocmVmMjsKICB9CiAgcmV0dXJuIG5ldyBVUkwoaHJlZjIsIGJhc2UpOwp9CmZ1bmN0aW9uIGNyZWF0ZUNvbnRleHQ0KGRlZmF1bHRWYWx1ZSkgewogIHJldHVybiB7IGRlZmF1bHRWYWx1ZSB9Owp9CnZhciBfbWFwOwp2YXIgUm91dGVyQ29udGV4dFByb3ZpZGVyID0gY2xhc3MgewogIC8qKgogICAqIENyZWF0ZSBhIG5ldyBgUm91dGVyQ29udGV4dFByb3ZpZGVyYCBpbnN0YW5jZQogICAqIEBwYXJhbSBpbml0IEFuIG9wdGlvbmFsIGluaXRpYWwgY29udGV4dCBtYXAgdG8gcG9wdWxhdGUgdGhlIHByb3ZpZGVyIHdpdGgKICAgKi8KICBjb25zdHJ1Y3Rvcihpbml0KSB7CiAgICBfX3ByaXZhdGVBZGQodGhpcywgX21hcCwgLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSk7CiAgICBpZiAoaW5pdCkgewogICAgICBmb3IgKGxldCBbY29udGV4dCwgdmFsdWVdIG9mIGluaXQpIHsKICAgICAgICB0aGlzLnNldChjb250ZXh0LCB2YWx1ZSk7CiAgICAgIH0KICAgIH0KICB9CiAgLyoqCiAgICogQWNjZXNzIGEgdmFsdWUgZnJvbSB0aGUgY29udGV4dC4gSWYgbm8gdmFsdWUgaGFzIGJlZW4gc2V0IGZvciB0aGUgY29udGV4dCwKICAgKiBpdCB3aWxsIHJldHVybiB0aGUgY29udGV4dCdzIGBkZWZhdWx0VmFsdWVgIGlmIHByb3ZpZGVkLCBvciB0aHJvdyBhbiBlcnJvcgogICAqIGlmIG5vIGBkZWZhdWx0VmFsdWVgIHdhcyBzZXQuCiAgICogQHBhcmFtIGNvbnRleHQgVGhlIGNvbnRleHQgdG8gZ2V0IHRoZSB2YWx1ZSBmb3IKICAgKiBAcmV0dXJucyBUaGUgdmFsdWUgZm9yIHRoZSBjb250ZXh0LCBvciB0aGUgY29udGV4dCdzIGBkZWZhdWx0VmFsdWVgIGlmIG5vCiAgICogdmFsdWUgd2FzIHNldAogICAqLwogIGdldChjb250ZXh0KSB7CiAgICBpZiAoX19wcml2YXRlR2V0KHRoaXMsIF9tYXApLmhhcyhjb250ZXh0KSkgewogICAgICByZXR1cm4gX19wcml2YXRlR2V0KHRoaXMsIF9tYXApLmdldChjb250ZXh0KTsKICAgIH0KICAgIGlmIChjb250ZXh0LmRlZmF1bHRWYWx1ZSAhPT0gdm9pZCAwKSB7CiAgICAgIHJldHVybiBjb250ZXh0LmRlZmF1bHRWYWx1ZTsKICAgIH0KICAgIHRocm93IG5ldyBFcnJvcigiTm8gdmFsdWUgZm91bmQgZm9yIGNvbnRleHQiKTsKICB9CiAgLyoqCiAgICogU2V0IGEgdmFsdWUgZm9yIHRoZSBjb250ZXh0LiBJZiB0aGUgY29udGV4dCBhbHJlYWR5IGhhcyBhIHZhbHVlIHNldCwgdGhpcwogICAqIHdpbGwgb3ZlcndyaXRlIGl0LgogICAqCiAgICogQHBhcmFtIGNvbnRleHQgVGhlIGNvbnRleHQgdG8gc2V0IHRoZSB2YWx1ZSBmb3IKICAgKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldCBmb3IgdGhlIGNvbnRleHQKICAgKiBAcmV0dXJucyB7dm9pZH0KICAgKi8KICBzZXQoY29udGV4dCwgdmFsdWUpIHsKICAgIF9fcHJpdmF0ZUdldCh0aGlzLCBfbWFwKS5zZXQoY29udGV4dCwgdmFsdWUpOwogIH0KfTsKX21hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpOwp2YXIgdW5zdXBwb3J0ZWRMYXp5Um91dGVPYmplY3RLZXlzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoWwogICJsYXp5IiwKICAiY2FzZVNlbnNpdGl2ZSIsCiAgInBhdGgiLAogICJpZCIsCiAgImluZGV4IiwKICAiY2hpbGRyZW4iCl0pOwpmdW5jdGlvbiBpc1Vuc3VwcG9ydGVkTGF6eVJvdXRlT2JqZWN0S2V5KGtleSkgewogIHJldHVybiB1bnN1cHBvcnRlZExhenlSb3V0ZU9iamVjdEtleXMuaGFzKAogICAga2V5CiAgKTsKfQp2YXIgdW5zdXBwb3J0ZWRMYXp5Um91dGVGdW5jdGlvbktleXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbCiAgImxhenkiLAogICJjYXNlU2Vuc2l0aXZlIiwKICAicGF0aCIsCiAgImlkIiwKICAiaW5kZXgiLAogICJtaWRkbGV3YXJlIiwKICAiY2hpbGRyZW4iCl0pOwpmdW5jdGlvbiBpc1Vuc3VwcG9ydGVkTGF6eVJvdXRlRnVuY3Rpb25LZXkoa2V5KSB7CiAgcmV0dXJuIHVuc3VwcG9ydGVkTGF6eVJvdXRlRnVuY3Rpb25LZXlzLmhhcygKICAgIGtleQogICk7Cn0KZnVuY3Rpb24gaXNJbmRleFJvdXRlKHJvdXRlKSB7CiAgcmV0dXJuIHJvdXRlLmluZGV4ID09PSB0cnVlOwp9CmZ1bmN0aW9uIGNvbnZlcnRSb3V0ZXNUb0RhdGFSb3V0ZXMocm91dGVzLCBtYXBSb3V0ZVByb3BlcnRpZXMyLCBwYXJlbnRQYXRoID0gW10sIG1hbmlmZXN0ID0ge30sIGFsbG93SW5QbGFjZU11dGF0aW9ucyA9IGZhbHNlKSB7CiAgcmV0dXJuIHJvdXRlcy5tYXAoKHJvdXRlLCBpbmRleCkgPT4gewogICAgbGV0IHRyZWVQYXRoID0gWy4uLnBhcmVudFBhdGgsIFN0cmluZyhpbmRleCldOwogICAgbGV0IGlkID0gdHlwZW9mIHJvdXRlLmlkID09PSAic3RyaW5nIiA/IHJvdXRlLmlkIDogdHJlZVBhdGguam9pbigiLSIpOwogICAgaW52YXJpYW50KAogICAgICByb3V0ZS5pbmRleCAhPT0gdHJ1ZSB8fCAhcm91dGUuY2hpbGRyZW4sCiAgICAgIGBDYW5ub3Qgc3BlY2lmeSBjaGlsZHJlbiBvbiBhbiBpbmRleCByb3V0ZWAKICAgICk7CiAgICBpbnZhcmlhbnQoCiAgICAgIGFsbG93SW5QbGFjZU11dGF0aW9ucyB8fCAhbWFuaWZlc3RbaWRdLAogICAgICBgRm91bmQgYSByb3V0ZSBpZCBjb2xsaXNpb24gb24gaWQgIiR7aWR9Ii4gIFJvdXRlIGlkJ3MgbXVzdCBiZSBnbG9iYWxseSB1bmlxdWUgd2l0aGluIERhdGEgUm91dGVyIHVzYWdlc2AKICAgICk7CiAgICBpZiAoaXNJbmRleFJvdXRlKHJvdXRlKSkgewogICAgICBsZXQgaW5kZXhSb3V0ZSA9IHsKICAgICAgICAuLi5yb3V0ZSwKICAgICAgICAuLi5tYXBSb3V0ZVByb3BlcnRpZXMyKHJvdXRlKSwKICAgICAgICBpZAogICAgICB9OwogICAgICBtYW5pZmVzdFtpZF0gPSBpbmRleFJvdXRlOwogICAgICByZXR1cm4gaW5kZXhSb3V0ZTsKICAgIH0gZWxzZSB7CiAgICAgIGxldCBwYXRoT3JMYXlvdXRSb3V0ZSA9IHsKICAgICAgICAuLi5yb3V0ZSwKICAgICAgICAuLi5tYXBSb3V0ZVByb3BlcnRpZXMyKHJvdXRlKSwKICAgICAgICBpZCwKICAgICAgICBjaGlsZHJlbjogdm9pZCAwCiAgICAgIH07CiAgICAgIG1hbmlmZXN0W2lkXSA9IHBhdGhPckxheW91dFJvdXRlOwogICAgICBpZiAocm91dGUuY2hpbGRyZW4pIHsKICAgICAgICBwYXRoT3JMYXlvdXRSb3V0ZS5jaGlsZHJlbiA9IGNvbnZlcnRSb3V0ZXNUb0RhdGFSb3V0ZXMoCiAgICAgICAgICByb3V0ZS5jaGlsZHJlbiwKICAgICAgICAgIG1hcFJvdXRlUHJvcGVydGllczIsCiAgICAgICAgICB0cmVlUGF0aCwKICAgICAgICAgIG1hbmlmZXN0LAogICAgICAgICAgYWxsb3dJblBsYWNlTXV0YXRpb25zCiAgICAgICAgKTsKICAgICAgfQogICAgICByZXR1cm4gcGF0aE9yTGF5b3V0Um91dGU7CiAgICB9CiAgfSk7Cn0KZnVuY3Rpb24gbWF0Y2hSb3V0ZXMocm91dGVzLCBsb2NhdGlvbkFyZywgYmFzZW5hbWUgPSAiLyIpIHsKICByZXR1cm4gbWF0Y2hSb3V0ZXNJbXBsKHJvdXRlcywgbG9jYXRpb25BcmcsIGJhc2VuYW1lLCBmYWxzZSk7Cn0KZnVuY3Rpb24gbWF0Y2hSb3V0ZXNJbXBsKHJvdXRlcywgbG9jYXRpb25BcmcsIGJhc2VuYW1lLCBhbGxvd1BhcnRpYWwpIHsKICBsZXQgbG9jYXRpb24yID0gdHlwZW9mIGxvY2F0aW9uQXJnID09PSAic3RyaW5nIiA/IHBhcnNlUGF0aChsb2NhdGlvbkFyZykgOiBsb2NhdGlvbkFyZzsKICBsZXQgcGF0aG5hbWUgPSBzdHJpcEJhc2VuYW1lKGxvY2F0aW9uMi5wYXRobmFtZSB8fCAiLyIsIGJhc2VuYW1lKTsKICBpZiAocGF0aG5hbWUgPT0gbnVsbCkgewogICAgcmV0dXJuIG51bGw7CiAgfQogIGxldCBicmFuY2hlcyA9IGZsYXR0ZW5Sb3V0ZXMocm91dGVzKTsKICByYW5rUm91dGVCcmFuY2hlcyhicmFuY2hlcyk7CiAgbGV0IG1hdGNoZXMgPSBudWxsOwogIGZvciAobGV0IGkgPSAwOyBtYXRjaGVzID09IG51bGwgJiYgaSA8IGJyYW5jaGVzLmxlbmd0aDsgKytpKSB7CiAgICBsZXQgZGVjb2RlZCA9IGRlY29kZVBhdGgocGF0aG5hbWUpOwogICAgbWF0Y2hlcyA9IG1hdGNoUm91dGVCcmFuY2goCiAgICAgIGJyYW5jaGVzW2ldLAogICAgICBkZWNvZGVkLAogICAgICBhbGxvd1BhcnRpYWwKICAgICk7CiAgfQogIHJldHVybiBtYXRjaGVzOwp9CmZ1bmN0aW9uIGNvbnZlcnRSb3V0ZU1hdGNoVG9VaU1hdGNoKG1hdGNoLCBsb2FkZXJEYXRhKSB7CiAgbGV0IHsgcm91dGUsIHBhdGhuYW1lLCBwYXJhbXMgfSA9IG1hdGNoOwogIHJldHVybiB7CiAgICBpZDogcm91dGUuaWQsCiAgICBwYXRobmFtZSwKICAgIHBhcmFtcywKICAgIGRhdGE6IGxvYWRlckRhdGFbcm91dGUuaWRdLAogICAgbG9hZGVyRGF0YTogbG9hZGVyRGF0YVtyb3V0ZS5pZF0sCiAgICBoYW5kbGU6IHJvdXRlLmhhbmRsZQogIH07Cn0KZnVuY3Rpb24gZmxhdHRlblJvdXRlcyhyb3V0ZXMsIGJyYW5jaGVzID0gW10sIHBhcmVudHNNZXRhID0gW10sIHBhcmVudFBhdGggPSAiIiwgX2hhc1BhcmVudE9wdGlvbmFsU2VnbWVudHMgPSBmYWxzZSkgewogIGxldCBmbGF0dGVuUm91dGUgPSAocm91dGUsIGluZGV4LCBoYXNQYXJlbnRPcHRpb25hbFNlZ21lbnRzID0gX2hhc1BhcmVudE9wdGlvbmFsU2VnbWVudHMsIHJlbGF0aXZlUGF0aCkgPT4gewogICAgbGV0IG1ldGEgPSB7CiAgICAgIHJlbGF0aXZlUGF0aDogcmVsYXRpdmVQYXRoID09PSB2b2lkIDAgPyByb3V0ZS5wYXRoIHx8ICIiIDogcmVsYXRpdmVQYXRoLAogICAgICBjYXNlU2Vuc2l0aXZlOiByb3V0ZS5jYXNlU2Vuc2l0aXZlID09PSB0cnVlLAogICAgICBjaGlsZHJlbkluZGV4OiBpbmRleCwKICAgICAgcm91dGUKICAgIH07CiAgICBpZiAobWV0YS5yZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgiLyIpKSB7CiAgICAgIGlmICghbWV0YS5yZWxhdGl2ZVBhdGguc3RhcnRzV2l0aChwYXJlbnRQYXRoKSAmJiBoYXNQYXJlbnRPcHRpb25hbFNlZ21lbnRzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGludmFyaWFudCgKICAgICAgICBtZXRhLnJlbGF0aXZlUGF0aC5zdGFydHNXaXRoKHBhcmVudFBhdGgpLAogICAgICAgIGBBYnNvbHV0ZSByb3V0ZSBwYXRoICIke21ldGEucmVsYXRpdmVQYXRofSIgbmVzdGVkIHVuZGVyIHBhdGggIiR7cGFyZW50UGF0aH0iIGlzIG5vdCB2YWxpZC4gQW4gYWJzb2x1dGUgY2hpbGQgcm91dGUgcGF0aCBtdXN0IHN0YXJ0IHdpdGggdGhlIGNvbWJpbmVkIHBhdGggb2YgYWxsIGl0cyBwYXJlbnQgcm91dGVzLmAKICAgICAgKTsKICAgICAgbWV0YS5yZWxhdGl2ZVBhdGggPSBtZXRhLnJlbGF0aXZlUGF0aC5zbGljZShwYXJlbnRQYXRoLmxlbmd0aCk7CiAgICB9CiAgICBsZXQgcGF0aCA9IGpvaW5QYXRocyhbcGFyZW50UGF0aCwgbWV0YS5yZWxhdGl2ZVBhdGhdKTsKICAgIGxldCByb3V0ZXNNZXRhID0gcGFyZW50c01ldGEuY29uY2F0KG1ldGEpOwogICAgaWYgKHJvdXRlLmNoaWxkcmVuICYmIHJvdXRlLmNoaWxkcmVuLmxlbmd0aCA+IDApIHsKICAgICAgaW52YXJpYW50KAogICAgICAgIC8vIE91ciB0eXBlcyBrbm93IGJldHRlciwgYnV0IHJ1bnRpbWUgSlMgbWF5IG5vdCEKICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yCiAgICAgICAgcm91dGUuaW5kZXggIT09IHRydWUsCiAgICAgICAgYEluZGV4IHJvdXRlcyBtdXN0IG5vdCBoYXZlIGNoaWxkIHJvdXRlcy4gUGxlYXNlIHJlbW92ZSBhbGwgY2hpbGQgcm91dGVzIGZyb20gcm91dGUgcGF0aCAiJHtwYXRofSIuYAogICAgICApOwogICAgICBmbGF0dGVuUm91dGVzKAogICAgICAgIHJvdXRlLmNoaWxkcmVuLAogICAgICAgIGJyYW5jaGVzLAogICAgICAgIHJvdXRlc01ldGEsCiAgICAgICAgcGF0aCwKICAgICAgICBoYXNQYXJlbnRPcHRpb25hbFNlZ21lbnRzCiAgICAgICk7CiAgICB9CiAgICBpZiAocm91dGUucGF0aCA9PSBudWxsICYmICFyb3V0ZS5pbmRleCkgewogICAgICByZXR1cm47CiAgICB9CiAgICBicmFuY2hlcy5wdXNoKHsKICAgICAgcGF0aCwKICAgICAgc2NvcmU6IGNvbXB1dGVTY29yZShwYXRoLCByb3V0ZS5pbmRleCksCiAgICAgIHJvdXRlc01ldGEKICAgIH0pOwogIH07CiAgcm91dGVzLmZvckVhY2goKHJvdXRlLCBpbmRleCkgPT4gewogICAgdmFyIF9hOwogICAgaWYgKHJvdXRlLnBhdGggPT09ICIiIHx8ICEoKF9hID0gcm91dGUucGF0aCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmluY2x1ZGVzKCI/IikpKSB7CiAgICAgIGZsYXR0ZW5Sb3V0ZShyb3V0ZSwgaW5kZXgpOwogICAgfSBlbHNlIHsKICAgICAgZm9yIChsZXQgZXhwbG9kZWQgb2YgZXhwbG9kZU9wdGlvbmFsU2VnbWVudHMocm91dGUucGF0aCkpIHsKICAgICAgICBmbGF0dGVuUm91dGUocm91dGUsIGluZGV4LCB0cnVlLCBleHBsb2RlZCk7CiAgICAgIH0KICAgIH0KICB9KTsKICByZXR1cm4gYnJhbmNoZXM7Cn0KZnVuY3Rpb24gZXhwbG9kZU9wdGlvbmFsU2VnbWVudHMocGF0aCkgewogIGxldCBzZWdtZW50cyA9IHBhdGguc3BsaXQoIi8iKTsKICBpZiAoc2VnbWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gW107CiAgbGV0IFtmaXJzdCwgLi4ucmVzdF0gPSBzZWdtZW50czsKICBsZXQgaXNPcHRpb25hbCA9IGZpcnN0LmVuZHNXaXRoKCI/Iik7CiAgbGV0IHJlcXVpcmVkID0gZmlyc3QucmVwbGFjZSgvXD8kLywgIiIpOwogIGlmIChyZXN0Lmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIGlzT3B0aW9uYWwgPyBbcmVxdWlyZWQsICIiXSA6IFtyZXF1aXJlZF07CiAgfQogIGxldCByZXN0RXhwbG9kZWQgPSBleHBsb2RlT3B0aW9uYWxTZWdtZW50cyhyZXN0LmpvaW4oIi8iKSk7CiAgbGV0IHJlc3VsdCA9IFtdOwogIHJlc3VsdC5wdXNoKAogICAgLi4ucmVzdEV4cGxvZGVkLm1hcCgKICAgICAgKHN1YnBhdGgpID0+IHN1YnBhdGggPT09ICIiID8gcmVxdWlyZWQgOiBbcmVxdWlyZWQsIHN1YnBhdGhdLmpvaW4oIi8iKQogICAgKQogICk7CiAgaWYgKGlzT3B0aW9uYWwpIHsKICAgIHJlc3VsdC5wdXNoKC4uLnJlc3RFeHBsb2RlZCk7CiAgfQogIHJldHVybiByZXN1bHQubWFwKAogICAgKGV4cGxvZGVkKSA9PiBwYXRoLnN0YXJ0c1dpdGgoIi8iKSAmJiBleHBsb2RlZCA9PT0gIiIgPyAiLyIgOiBleHBsb2RlZAogICk7Cn0KZnVuY3Rpb24gcmFua1JvdXRlQnJhbmNoZXMoYnJhbmNoZXMpIHsKICBicmFuY2hlcy5zb3J0KAogICAgKGEsIGIpID0+IGEuc2NvcmUgIT09IGIuc2NvcmUgPyBiLnNjb3JlIC0gYS5zY29yZSA6IGNvbXBhcmVJbmRleGVzKAogICAgICBhLnJvdXRlc01ldGEubWFwKChtZXRhKSA9PiBtZXRhLmNoaWxkcmVuSW5kZXgpLAogICAgICBiLnJvdXRlc01ldGEubWFwKChtZXRhKSA9PiBtZXRhLmNoaWxkcmVuSW5kZXgpCiAgICApCiAgKTsKfQp2YXIgcGFyYW1SZSA9IC9eOltcdy1dKyQvOwp2YXIgZHluYW1pY1NlZ21lbnRWYWx1ZSA9IDM7CnZhciBpbmRleFJvdXRlVmFsdWUgPSAyOwp2YXIgZW1wdHlTZWdtZW50VmFsdWUgPSAxOwp2YXIgc3RhdGljU2VnbWVudFZhbHVlID0gMTA7CnZhciBzcGxhdFBlbmFsdHkgPSAtMjsKdmFyIGlzU3BsYXQgPSAocykgPT4gcyA9PT0gIioiOwpmdW5jdGlvbiBjb21wdXRlU2NvcmUocGF0aCwgaW5kZXgpIHsKICBsZXQgc2VnbWVudHMgPSBwYXRoLnNwbGl0KCIvIik7CiAgbGV0IGluaXRpYWxTY29yZSA9IHNlZ21lbnRzLmxlbmd0aDsKICBpZiAoc2VnbWVudHMuc29tZShpc1NwbGF0KSkgewogICAgaW5pdGlhbFNjb3JlICs9IHNwbGF0UGVuYWx0eTsKICB9CiAgaWYgKGluZGV4KSB7CiAgICBpbml0aWFsU2NvcmUgKz0gaW5kZXhSb3V0ZVZhbHVlOwogIH0KICByZXR1cm4gc2VnbWVudHMuZmlsdGVyKChzKSA9PiAhaXNTcGxhdChzKSkucmVkdWNlKAogICAgKHNjb3JlLCBzZWdtZW50KSA9PiBzY29yZSArIChwYXJhbVJlLnRlc3Qoc2VnbWVudCkgPyBkeW5hbWljU2VnbWVudFZhbHVlIDogc2VnbWVudCA9PT0gIiIgPyBlbXB0eVNlZ21lbnRWYWx1ZSA6IHN0YXRpY1NlZ21lbnRWYWx1ZSksCiAgICBpbml0aWFsU2NvcmUKICApOwp9CmZ1bmN0aW9uIGNvbXBhcmVJbmRleGVzKGEsIGIpIHsKICBsZXQgc2libGluZ3MgPSBhLmxlbmd0aCA9PT0gYi5sZW5ndGggJiYgYS5zbGljZSgwLCAtMSkuZXZlcnkoKG4sIGkpID0+IG4gPT09IGJbaV0pOwogIHJldHVybiBzaWJsaW5ncyA/ICgKICAgIC8vIElmIHR3byByb3V0ZXMgYXJlIHNpYmxpbmdzLCB3ZSBzaG91bGQgdHJ5IHRvIG1hdGNoIHRoZSBlYXJsaWVyIHNpYmxpbmcKICAgIC8vIGZpcnN0LiBUaGlzIGFsbG93cyBwZW9wbGUgdG8gaGF2ZSBmaW5lLWdyYWluZWQgY29udHJvbCBvdmVyIHRoZSBtYXRjaGluZwogICAgLy8gYmVoYXZpb3IgYnkgc2ltcGx5IHB1dHRpbmcgcm91dGVzIHdpdGggaWRlbnRpY2FsIHBhdGhzIGluIHRoZSBvcmRlciB0aGV5CiAgICAvLyB3YW50IHRoZW0gdHJpZWQuCiAgICBhW2EubGVuZ3RoIC0gMV0gLSBiW2IubGVuZ3RoIC0gMV0KICApIDogKAogICAgLy8gT3RoZXJ3aXNlLCBpdCBkb2Vzbid0IHJlYWxseSBtYWtlIHNlbnNlIHRvIHJhbmsgbm9uLXNpYmxpbmdzIGJ5IGluZGV4LAogICAgLy8gc28gdGhleSBzb3J0IGVxdWFsbHkuCiAgICAwCiAgKTsKfQpmdW5jdGlvbiBtYXRjaFJvdXRlQnJhbmNoKGJyYW5jaCwgcGF0aG5hbWUsIGFsbG93UGFydGlhbCA9IGZhbHNlKSB7CiAgbGV0IHsgcm91dGVzTWV0YSB9ID0gYnJhbmNoOwogIGxldCBtYXRjaGVkUGFyYW1zID0ge307CiAgbGV0IG1hdGNoZWRQYXRobmFtZSA9ICIvIjsKICBsZXQgbWF0Y2hlcyA9IFtdOwogIGZvciAobGV0IGkgPSAwOyBpIDwgcm91dGVzTWV0YS5sZW5ndGg7ICsraSkgewogICAgbGV0IG1ldGEgPSByb3V0ZXNNZXRhW2ldOwogICAgbGV0IGVuZCA9IGkgPT09IHJvdXRlc01ldGEubGVuZ3RoIC0gMTsKICAgIGxldCByZW1haW5pbmdQYXRobmFtZSA9IG1hdGNoZWRQYXRobmFtZSA9PT0gIi8iID8gcGF0aG5hbWUgOiBwYXRobmFtZS5zbGljZShtYXRjaGVkUGF0aG5hbWUubGVuZ3RoKSB8fCAiLyI7CiAgICBsZXQgbWF0Y2ggPSBtYXRjaFBhdGgoCiAgICAgIHsgcGF0aDogbWV0YS5yZWxhdGl2ZVBhdGgsIGNhc2VTZW5zaXRpdmU6IG1ldGEuY2FzZVNlbnNpdGl2ZSwgZW5kIH0sCiAgICAgIHJlbWFpbmluZ1BhdGhuYW1lCiAgICApOwogICAgbGV0IHJvdXRlID0gbWV0YS5yb3V0ZTsKICAgIGlmICghbWF0Y2ggJiYgZW5kICYmIGFsbG93UGFydGlhbCAmJiAhcm91dGVzTWV0YVtyb3V0ZXNNZXRhLmxlbmd0aCAtIDFdLnJvdXRlLmluZGV4KSB7CiAgICAgIG1hdGNoID0gbWF0Y2hQYXRoKAogICAgICAgIHsKICAgICAgICAgIHBhdGg6IG1ldGEucmVsYXRpdmVQYXRoLAogICAgICAgICAgY2FzZVNlbnNpdGl2ZTogbWV0YS5jYXNlU2Vuc2l0aXZlLAogICAgICAgICAgZW5kOiBmYWxzZQogICAgICAgIH0sCiAgICAgICAgcmVtYWluaW5nUGF0aG5hbWUKICAgICAgKTsKICAgIH0KICAgIGlmICghbWF0Y2gpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICBPYmplY3QuYXNzaWduKG1hdGNoZWRQYXJhbXMsIG1hdGNoLnBhcmFtcyk7CiAgICBtYXRjaGVzLnB1c2goewogICAgICAvLyBUT0RPOiBDYW4gdGhpcyBhcyBiZSBhdm9pZGVkPwogICAgICBwYXJhbXM6IG1hdGNoZWRQYXJhbXMsCiAgICAgIHBhdGhuYW1lOiBqb2luUGF0aHMoW21hdGNoZWRQYXRobmFtZSwgbWF0Y2gucGF0aG5hbWVdKSwKICAgICAgcGF0aG5hbWVCYXNlOiBub3JtYWxpemVQYXRobmFtZSgKICAgICAgICBqb2luUGF0aHMoW21hdGNoZWRQYXRobmFtZSwgbWF0Y2gucGF0aG5hbWVCYXNlXSkKICAgICAgKSwKICAgICAgcm91dGUKICAgIH0pOwogICAgaWYgKG1hdGNoLnBhdGhuYW1lQmFzZSAhPT0gIi8iKSB7CiAgICAgIG1hdGNoZWRQYXRobmFtZSA9IGpvaW5QYXRocyhbbWF0Y2hlZFBhdGhuYW1lLCBtYXRjaC5wYXRobmFtZUJhc2VdKTsKICAgIH0KICB9CiAgcmV0dXJuIG1hdGNoZXM7Cn0KZnVuY3Rpb24gZ2VuZXJhdGVQYXRoKG9yaWdpbmFsUGF0aCwgcGFyYW1zID0ge30pIHsKICBsZXQgcGF0aCA9IG9yaWdpbmFsUGF0aDsKICBpZiAocGF0aC5lbmRzV2l0aCgiKiIpICYmIHBhdGggIT09ICIqIiAmJiAhcGF0aC5lbmRzV2l0aCgiLyoiKSkgewogICAgd2FybmluZygKICAgICAgZmFsc2UsCiAgICAgIGBSb3V0ZSBwYXRoICIke3BhdGh9IiB3aWxsIGJlIHRyZWF0ZWQgYXMgaWYgaXQgd2VyZSAiJHtwYXRoLnJlcGxhY2UoL1wqJC8sICIvKiIpfSIgYmVjYXVzZSB0aGUgXGAqXGAgY2hhcmFjdGVyIG11c3QgYWx3YXlzIGZvbGxvdyBhIFxgL1xgIGluIHRoZSBwYXR0ZXJuLiBUbyBnZXQgcmlkIG9mIHRoaXMgd2FybmluZywgcGxlYXNlIGNoYW5nZSB0aGUgcm91dGUgcGF0aCB0byAiJHtwYXRoLnJlcGxhY2UoL1wqJC8sICIvKiIpfSIuYAogICAgKTsKICAgIHBhdGggPSBwYXRoLnJlcGxhY2UoL1wqJC8sICIvKiIpOwogIH0KICBjb25zdCBwcmVmaXggPSBwYXRoLnN0YXJ0c1dpdGgoIi8iKSA/ICIvIiA6ICIiOwogIGNvbnN0IHN0cmluZ2lmeTIgPSAocCkgPT4gcCA9PSBudWxsID8gIiIgOiB0eXBlb2YgcCA9PT0gInN0cmluZyIgPyBwIDogU3RyaW5nKHApOwogIGNvbnN0IHNlZ21lbnRzID0gcGF0aC5zcGxpdCgvXC8rLykubWFwKChzZWdtZW50LCBpbmRleCwgYXJyYXkpID0+IHsKICAgIGNvbnN0IGlzTGFzdFNlZ21lbnQgPSBpbmRleCA9PT0gYXJyYXkubGVuZ3RoIC0gMTsKICAgIGlmIChpc0xhc3RTZWdtZW50ICYmIHNlZ21lbnQgPT09ICIqIikgewogICAgICBjb25zdCBzdGFyID0gIioiOwogICAgICByZXR1cm4gc3RyaW5naWZ5MihwYXJhbXNbc3Rhcl0pOwogICAgfQogICAgY29uc3Qga2V5TWF0Y2ggPSBzZWdtZW50Lm1hdGNoKC9eOihbXHctXSspKFw/PykkLyk7CiAgICBpZiAoa2V5TWF0Y2gpIHsKICAgICAgY29uc3QgWywga2V5LCBvcHRpb25hbF0gPSBrZXlNYXRjaDsKICAgICAgbGV0IHBhcmFtID0gcGFyYW1zW2tleV07CiAgICAgIGludmFyaWFudChvcHRpb25hbCA9PT0gIj8iIHx8IHBhcmFtICE9IG51bGwsIGBNaXNzaW5nICI6JHtrZXl9IiBwYXJhbWApOwogICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeTIocGFyYW0pKTsKICAgIH0KICAgIHJldHVybiBzZWdtZW50LnJlcGxhY2UoL1w/JC9nLCAiIik7CiAgfSkuZmlsdGVyKChzZWdtZW50KSA9PiAhIXNlZ21lbnQpOwogIHJldHVybiBwcmVmaXggKyBzZWdtZW50cy5qb2luKCIvIik7Cn0KZnVuY3Rpb24gbWF0Y2hQYXRoKHBhdHRlcm4sIHBhdGhuYW1lKSB7CiAgaWYgKHR5cGVvZiBwYXR0ZXJuID09PSAic3RyaW5nIikgewogICAgcGF0dGVybiA9IHsgcGF0aDogcGF0dGVybiwgY2FzZVNlbnNpdGl2ZTogZmFsc2UsIGVuZDogdHJ1ZSB9OwogIH0KICBsZXQgW21hdGNoZXIsIGNvbXBpbGVkUGFyYW1zXSA9IGNvbXBpbGVQYXRoKAogICAgcGF0dGVybi5wYXRoLAogICAgcGF0dGVybi5jYXNlU2Vuc2l0aXZlLAogICAgcGF0dGVybi5lbmQKICApOwogIGxldCBtYXRjaCA9IHBhdGhuYW1lLm1hdGNoKG1hdGNoZXIpOwogIGlmICghbWF0Y2gpIHJldHVybiBudWxsOwogIGxldCBtYXRjaGVkUGF0aG5hbWUgPSBtYXRjaFswXTsKICBsZXQgcGF0aG5hbWVCYXNlID0gbWF0Y2hlZFBhdGhuYW1lLnJlcGxhY2UoLyguKVwvKyQvLCAiJDEiKTsKICBsZXQgY2FwdHVyZUdyb3VwcyA9IG1hdGNoLnNsaWNlKDEpOwogIGxldCBwYXJhbXMgPSBjb21waWxlZFBhcmFtcy5yZWR1Y2UoCiAgICAobWVtbzIsIHsgcGFyYW1OYW1lLCBpc09wdGlvbmFsIH0sIGluZGV4KSA9PiB7CiAgICAgIGlmIChwYXJhbU5hbWUgPT09ICIqIikgewogICAgICAgIGxldCBzcGxhdFZhbHVlID0gY2FwdHVyZUdyb3Vwc1tpbmRleF0gfHwgIiI7CiAgICAgICAgcGF0aG5hbWVCYXNlID0gbWF0Y2hlZFBhdGhuYW1lLnNsaWNlKDAsIG1hdGNoZWRQYXRobmFtZS5sZW5ndGggLSBzcGxhdFZhbHVlLmxlbmd0aCkucmVwbGFjZSgvKC4pXC8rJC8sICIkMSIpOwogICAgICB9CiAgICAgIGNvbnN0IHZhbHVlID0gY2FwdHVyZUdyb3Vwc1tpbmRleF07CiAgICAgIGlmIChpc09wdGlvbmFsICYmICF2YWx1ZSkgewogICAgICAgIG1lbW8yW3BhcmFtTmFtZV0gPSB2b2lkIDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWVtbzJbcGFyYW1OYW1lXSA9ICh2YWx1ZSB8fCAiIikucmVwbGFjZSgvJTJGL2csICIvIik7CiAgICAgIH0KICAgICAgcmV0dXJuIG1lbW8yOwogICAgfSwKICAgIHt9CiAgKTsKICByZXR1cm4gewogICAgcGFyYW1zLAogICAgcGF0aG5hbWU6IG1hdGNoZWRQYXRobmFtZSwKICAgIHBhdGhuYW1lQmFzZSwKICAgIHBhdHRlcm4KICB9Owp9CmZ1bmN0aW9uIGNvbXBpbGVQYXRoKHBhdGgsIGNhc2VTZW5zaXRpdmUgPSBmYWxzZSwgZW5kID0gdHJ1ZSkgewogIHdhcm5pbmcoCiAgICBwYXRoID09PSAiKiIgfHwgIXBhdGguZW5kc1dpdGgoIioiKSB8fCBwYXRoLmVuZHNXaXRoKCIvKiIpLAogICAgYFJvdXRlIHBhdGggIiR7cGF0aH0iIHdpbGwgYmUgdHJlYXRlZCBhcyBpZiBpdCB3ZXJlICIke3BhdGgucmVwbGFjZSgvXCokLywgIi8qIil9IiBiZWNhdXNlIHRoZSBcYCpcYCBjaGFyYWN0ZXIgbXVzdCBhbHdheXMgZm9sbG93IGEgXGAvXGAgaW4gdGhlIHBhdHRlcm4uIFRvIGdldCByaWQgb2YgdGhpcyB3YXJuaW5nLCBwbGVhc2UgY2hhbmdlIHRoZSByb3V0ZSBwYXRoIHRvICIke3BhdGgucmVwbGFjZSgvXCokLywgIi8qIil9Ii5gCiAgKTsKICBsZXQgcGFyYW1zID0gW107CiAgbGV0IHJlZ2V4cFNvdXJjZSA9ICJeIiArIHBhdGgucmVwbGFjZSgvXC8qXCo/JC8sICIiKS5yZXBsYWNlKC9eXC8qLywgIi8iKS5yZXBsYWNlKC9bXFwuKiteJHt9fCgpW1xdXS9nLCAiXFwkJiIpLnJlcGxhY2UoCiAgICAvXC86KFtcdy1dKykoXD8pPy9nLAogICAgKF8sIHBhcmFtTmFtZSwgaXNPcHRpb25hbCkgPT4gewogICAgICBwYXJhbXMucHVzaCh7IHBhcmFtTmFtZSwgaXNPcHRpb25hbDogaXNPcHRpb25hbCAhPSBudWxsIH0pOwogICAgICByZXR1cm4gaXNPcHRpb25hbCA/ICIvPyhbXlxcL10rKT8iIDogIi8oW15cXC9dKykiOwogICAgfQogICkucmVwbGFjZSgvXC8oW1x3LV0rKVw/KFwvfCQpL2csICIoLyQxKT8kMiIpOwogIGlmIChwYXRoLmVuZHNXaXRoKCIqIikpIHsKICAgIHBhcmFtcy5wdXNoKHsgcGFyYW1OYW1lOiAiKiIgfSk7CiAgICByZWdleHBTb3VyY2UgKz0gcGF0aCA9PT0gIioiIHx8IHBhdGggPT09ICIvKiIgPyAiKC4qKSQiIDogIig/OlxcLyguKyl8XFwvKikkIjsKICB9IGVsc2UgaWYgKGVuZCkgewogICAgcmVnZXhwU291cmNlICs9ICJcXC8qJCI7CiAgfSBlbHNlIGlmIChwYXRoICE9PSAiIiAmJiBwYXRoICE9PSAiLyIpIHsKICAgIHJlZ2V4cFNvdXJjZSArPSAiKD86KD89XFwvfCQpKSI7CiAgfSBlbHNlIHsKICB9CiAgbGV0IG1hdGNoZXIgPSBuZXcgUmVnRXhwKHJlZ2V4cFNvdXJjZSwgY2FzZVNlbnNpdGl2ZSA/IHZvaWQgMCA6ICJpIik7CiAgcmV0dXJuIFttYXRjaGVyLCBwYXJhbXNdOwp9CmZ1bmN0aW9uIGRlY29kZVBhdGgodmFsdWUpIHsKICB0cnkgewogICAgcmV0dXJuIHZhbHVlLnNwbGl0KCIvIikubWFwKCh2KSA9PiBkZWNvZGVVUklDb21wb25lbnQodikucmVwbGFjZSgvXC8vZywgIiUyRiIpKS5qb2luKCIvIik7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIHdhcm5pbmcoCiAgICAgIGZhbHNlLAogICAgICBgVGhlIFVSTCBwYXRoICIke3ZhbHVlfSIgY291bGQgbm90IGJlIGRlY29kZWQgYmVjYXVzZSBpdCBpcyBhIG1hbGZvcm1lZCBVUkwgc2VnbWVudC4gVGhpcyBpcyBwcm9iYWJseSBkdWUgdG8gYSBiYWQgcGVyY2VudCBlbmNvZGluZyAoJHtlcnJvcn0pLmAKICAgICk7CiAgICByZXR1cm4gdmFsdWU7CiAgfQp9CmZ1bmN0aW9uIHN0cmlwQmFzZW5hbWUocGF0aG5hbWUsIGJhc2VuYW1lKSB7CiAgaWYgKGJhc2VuYW1lID09PSAiLyIpIHJldHVybiBwYXRobmFtZTsKICBpZiAoIXBhdGhuYW1lLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChiYXNlbmFtZS50b0xvd2VyQ2FzZSgpKSkgewogICAgcmV0dXJuIG51bGw7CiAgfQogIGxldCBzdGFydEluZGV4ID0gYmFzZW5hbWUuZW5kc1dpdGgoIi8iKSA/IGJhc2VuYW1lLmxlbmd0aCAtIDEgOiBiYXNlbmFtZS5sZW5ndGg7CiAgbGV0IG5leHRDaGFyID0gcGF0aG5hbWUuY2hhckF0KHN0YXJ0SW5kZXgpOwogIGlmIChuZXh0Q2hhciAmJiBuZXh0Q2hhciAhPT0gIi8iKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CiAgcmV0dXJuIHBhdGhuYW1lLnNsaWNlKHN0YXJ0SW5kZXgpIHx8ICIvIjsKfQpmdW5jdGlvbiBwcmVwZW5kQmFzZW5hbWUoewogIGJhc2VuYW1lLAogIHBhdGhuYW1lCn0pIHsKICByZXR1cm4gcGF0aG5hbWUgPT09ICIvIiA/IGJhc2VuYW1lIDogam9pblBhdGhzKFtiYXNlbmFtZSwgcGF0aG5hbWVdKTsKfQpmdW5jdGlvbiByZXNvbHZlUGF0aCh0bywgZnJvbVBhdGhuYW1lID0gIi8iKSB7CiAgbGV0IHsKICAgIHBhdGhuYW1lOiB0b1BhdGhuYW1lLAogICAgc2VhcmNoID0gIiIsCiAgICBoYXNoID0gIiIKICB9ID0gdHlwZW9mIHRvID09PSAic3RyaW5nIiA/IHBhcnNlUGF0aCh0bykgOiB0bzsKICBsZXQgcGF0aG5hbWUgPSB0b1BhdGhuYW1lID8gdG9QYXRobmFtZS5zdGFydHNXaXRoKCIvIikgPyB0b1BhdGhuYW1lIDogcmVzb2x2ZVBhdGhuYW1lKHRvUGF0aG5hbWUsIGZyb21QYXRobmFtZSkgOiBmcm9tUGF0aG5hbWU7CiAgcmV0dXJuIHsKICAgIHBhdGhuYW1lLAogICAgc2VhcmNoOiBub3JtYWxpemVTZWFyY2goc2VhcmNoKSwKICAgIGhhc2g6IG5vcm1hbGl6ZUhhc2goaGFzaCkKICB9Owp9CmZ1bmN0aW9uIHJlc29sdmVQYXRobmFtZShyZWxhdGl2ZVBhdGgsIGZyb21QYXRobmFtZSkgewogIGxldCBzZWdtZW50cyA9IGZyb21QYXRobmFtZS5yZXBsYWNlKC9cLyskLywgIiIpLnNwbGl0KCIvIik7CiAgbGV0IHJlbGF0aXZlU2VnbWVudHMgPSByZWxhdGl2ZVBhdGguc3BsaXQoIi8iKTsKICByZWxhdGl2ZVNlZ21lbnRzLmZvckVhY2goKHNlZ21lbnQpID0+IHsKICAgIGlmIChzZWdtZW50ID09PSAiLi4iKSB7CiAgICAgIGlmIChzZWdtZW50cy5sZW5ndGggPiAxKSBzZWdtZW50cy5wb3AoKTsKICAgIH0gZWxzZSBpZiAoc2VnbWVudCAhPT0gIi4iKSB7CiAgICAgIHNlZ21lbnRzLnB1c2goc2VnbWVudCk7CiAgICB9CiAgfSk7CiAgcmV0dXJuIHNlZ21lbnRzLmxlbmd0aCA+IDEgPyBzZWdtZW50cy5qb2luKCIvIikgOiAiLyI7Cn0KZnVuY3Rpb24gZ2V0SW52YWxpZFBhdGhFcnJvcihjaGFyLCBmaWVsZCwgZGVzdCwgcGF0aCkgewogIHJldHVybiBgQ2Fubm90IGluY2x1ZGUgYSAnJHtjaGFyfScgY2hhcmFjdGVyIGluIGEgbWFudWFsbHkgc3BlY2lmaWVkIFxgdG8uJHtmaWVsZH1cYCBmaWVsZCBbJHtKU09OLnN0cmluZ2lmeSgKICAgIHBhdGgKICApfV0uICBQbGVhc2Ugc2VwYXJhdGUgaXQgb3V0IHRvIHRoZSBcYHRvLiR7ZGVzdH1cYCBmaWVsZC4gQWx0ZXJuYXRpdmVseSB5b3UgbWF5IHByb3ZpZGUgdGhlIGZ1bGwgcGF0aCBhcyBhIHN0cmluZyBpbiA8TGluayB0bz0iLi4uIj4gYW5kIHRoZSByb3V0ZXIgd2lsbCBwYXJzZSBpdCBmb3IgeW91LmA7Cn0KZnVuY3Rpb24gZ2V0UGF0aENvbnRyaWJ1dGluZ01hdGNoZXMobWF0Y2hlcykgewogIHJldHVybiBtYXRjaGVzLmZpbHRlcigKICAgIChtYXRjaCwgaW5kZXgpID0+IGluZGV4ID09PSAwIHx8IG1hdGNoLnJvdXRlLnBhdGggJiYgbWF0Y2gucm91dGUucGF0aC5sZW5ndGggPiAwCiAgKTsKfQpmdW5jdGlvbiBnZXRSZXNvbHZlVG9NYXRjaGVzKG1hdGNoZXMpIHsKICBsZXQgcGF0aE1hdGNoZXMgPSBnZXRQYXRoQ29udHJpYnV0aW5nTWF0Y2hlcyhtYXRjaGVzKTsKICByZXR1cm4gcGF0aE1hdGNoZXMubWFwKAogICAgKG1hdGNoLCBpZHgpID0+IGlkeCA9PT0gcGF0aE1hdGNoZXMubGVuZ3RoIC0gMSA/IG1hdGNoLnBhdGhuYW1lIDogbWF0Y2gucGF0aG5hbWVCYXNlCiAgKTsKfQpmdW5jdGlvbiByZXNvbHZlVG8odG9BcmcsIHJvdXRlUGF0aG5hbWVzLCBsb2NhdGlvblBhdGhuYW1lLCBpc1BhdGhSZWxhdGl2ZSA9IGZhbHNlKSB7CiAgbGV0IHRvOwogIGlmICh0eXBlb2YgdG9BcmcgPT09ICJzdHJpbmciKSB7CiAgICB0byA9IHBhcnNlUGF0aCh0b0FyZyk7CiAgfSBlbHNlIHsKICAgIHRvID0geyAuLi50b0FyZyB9OwogICAgaW52YXJpYW50KAogICAgICAhdG8ucGF0aG5hbWUgfHwgIXRvLnBhdGhuYW1lLmluY2x1ZGVzKCI/IiksCiAgICAgIGdldEludmFsaWRQYXRoRXJyb3IoIj8iLCAicGF0aG5hbWUiLCAic2VhcmNoIiwgdG8pCiAgICApOwogICAgaW52YXJpYW50KAogICAgICAhdG8ucGF0aG5hbWUgfHwgIXRvLnBhdGhuYW1lLmluY2x1ZGVzKCIjIiksCiAgICAgIGdldEludmFsaWRQYXRoRXJyb3IoIiMiLCAicGF0aG5hbWUiLCAiaGFzaCIsIHRvKQogICAgKTsKICAgIGludmFyaWFudCgKICAgICAgIXRvLnNlYXJjaCB8fCAhdG8uc2VhcmNoLmluY2x1ZGVzKCIjIiksCiAgICAgIGdldEludmFsaWRQYXRoRXJyb3IoIiMiLCAic2VhcmNoIiwgImhhc2giLCB0bykKICAgICk7CiAgfQogIGxldCBpc0VtcHR5UGF0aCA9IHRvQXJnID09PSAiIiB8fCB0by5wYXRobmFtZSA9PT0gIiI7CiAgbGV0IHRvUGF0aG5hbWUgPSBpc0VtcHR5UGF0aCA/ICIvIiA6IHRvLnBhdGhuYW1lOwogIGxldCBmcm9tOwogIGlmICh0b1BhdGhuYW1lID09IG51bGwpIHsKICAgIGZyb20gPSBsb2NhdGlvblBhdGhuYW1lOwogIH0gZWxzZSB7CiAgICBsZXQgcm91dGVQYXRobmFtZUluZGV4ID0gcm91dGVQYXRobmFtZXMubGVuZ3RoIC0gMTsKICAgIGlmICghaXNQYXRoUmVsYXRpdmUgJiYgdG9QYXRobmFtZS5zdGFydHNXaXRoKCIuLiIpKSB7CiAgICAgIGxldCB0b1NlZ21lbnRzID0gdG9QYXRobmFtZS5zcGxpdCgiLyIpOwogICAgICB3aGlsZSAodG9TZWdtZW50c1swXSA9PT0gIi4uIikgewogICAgICAgIHRvU2VnbWVudHMuc2hpZnQoKTsKICAgICAgICByb3V0ZVBhdGhuYW1lSW5kZXggLT0gMTsKICAgICAgfQogICAgICB0by5wYXRobmFtZSA9IHRvU2VnbWVudHMuam9pbigiLyIpOwogICAgfQogICAgZnJvbSA9IHJvdXRlUGF0aG5hbWVJbmRleCA+PSAwID8gcm91dGVQYXRobmFtZXNbcm91dGVQYXRobmFtZUluZGV4XSA6ICIvIjsKICB9CiAgbGV0IHBhdGggPSByZXNvbHZlUGF0aCh0bywgZnJvbSk7CiAgbGV0IGhhc0V4cGxpY2l0VHJhaWxpbmdTbGFzaCA9IHRvUGF0aG5hbWUgJiYgdG9QYXRobmFtZSAhPT0gIi8iICYmIHRvUGF0aG5hbWUuZW5kc1dpdGgoIi8iKTsKICBsZXQgaGFzQ3VycmVudFRyYWlsaW5nU2xhc2ggPSAoaXNFbXB0eVBhdGggfHwgdG9QYXRobmFtZSA9PT0gIi4iKSAmJiBsb2NhdGlvblBhdGhuYW1lLmVuZHNXaXRoKCIvIik7CiAgaWYgKCFwYXRoLnBhdGhuYW1lLmVuZHNXaXRoKCIvIikgJiYgKGhhc0V4cGxpY2l0VHJhaWxpbmdTbGFzaCB8fCBoYXNDdXJyZW50VHJhaWxpbmdTbGFzaCkpIHsKICAgIHBhdGgucGF0aG5hbWUgKz0gIi8iOwogIH0KICByZXR1cm4gcGF0aDsKfQp2YXIgam9pblBhdGhzID0gKHBhdGhzKSA9PiBwYXRocy5qb2luKCIvIikucmVwbGFjZSgvXC9cLysvZywgIi8iKTsKdmFyIG5vcm1hbGl6ZVBhdGhuYW1lID0gKHBhdGhuYW1lKSA9PiBwYXRobmFtZS5yZXBsYWNlKC9cLyskLywgIiIpLnJlcGxhY2UoL15cLyovLCAiLyIpOwp2YXIgbm9ybWFsaXplU2VhcmNoID0gKHNlYXJjaCkgPT4gIXNlYXJjaCB8fCBzZWFyY2ggPT09ICI/IiA/ICIiIDogc2VhcmNoLnN0YXJ0c1dpdGgoIj8iKSA/IHNlYXJjaCA6ICI/IiArIHNlYXJjaDsKdmFyIG5vcm1hbGl6ZUhhc2ggPSAoaGFzaCkgPT4gIWhhc2ggfHwgaGFzaCA9PT0gIiMiID8gIiIgOiBoYXNoLnN0YXJ0c1dpdGgoIiMiKSA/IGhhc2ggOiAiIyIgKyBoYXNoOwp2YXIgRGF0YVdpdGhSZXNwb25zZUluaXQgPSBjbGFzcyB7CiAgY29uc3RydWN0b3IoZGF0YTIsIGluaXQpIHsKICAgIHRoaXMudHlwZSA9ICJEYXRhV2l0aFJlc3BvbnNlSW5pdCI7CiAgICB0aGlzLmRhdGEgPSBkYXRhMjsKICAgIHRoaXMuaW5pdCA9IGluaXQgfHwgbnVsbDsKICB9Cn07CmZ1bmN0aW9uIGRhdGEoZGF0YTIsIGluaXQpIHsKICByZXR1cm4gbmV3IERhdGFXaXRoUmVzcG9uc2VJbml0KAogICAgZGF0YTIsCiAgICB0eXBlb2YgaW5pdCA9PT0gIm51bWJlciIgPyB7IHN0YXR1czogaW5pdCB9IDogaW5pdAogICk7Cn0KdmFyIHJlZGlyZWN0ID0gKHVybCwgaW5pdCA9IDMwMikgPT4gewogIGxldCByZXNwb25zZUluaXQgPSBpbml0OwogIGlmICh0eXBlb2YgcmVzcG9uc2VJbml0ID09PSAibnVtYmVyIikgewogICAgcmVzcG9uc2VJbml0ID0geyBzdGF0dXM6IHJlc3BvbnNlSW5pdCB9OwogIH0gZWxzZSBpZiAodHlwZW9mIHJlc3BvbnNlSW5pdC5zdGF0dXMgPT09ICJ1bmRlZmluZWQiKSB7CiAgICByZXNwb25zZUluaXQuc3RhdHVzID0gMzAyOwogIH0KICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHJlc3BvbnNlSW5pdC5oZWFkZXJzKTsKICBoZWFkZXJzLnNldCgiTG9jYXRpb24iLCB1cmwpOwogIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwgeyAuLi5yZXNwb25zZUluaXQsIGhlYWRlcnMgfSk7Cn07CnZhciByZWRpcmVjdERvY3VtZW50ID0gKHVybCwgaW5pdCkgPT4gewogIGxldCByZXNwb25zZSA9IHJlZGlyZWN0KHVybCwgaW5pdCk7CiAgcmVzcG9uc2UuaGVhZGVycy5zZXQoIlgtUmVtaXgtUmVsb2FkLURvY3VtZW50IiwgInRydWUiKTsKICByZXR1cm4gcmVzcG9uc2U7Cn07CnZhciByZXBsYWNlID0gKHVybCwgaW5pdCkgPT4gewogIGxldCByZXNwb25zZSA9IHJlZGlyZWN0KHVybCwgaW5pdCk7CiAgcmVzcG9uc2UuaGVhZGVycy5zZXQoIlgtUmVtaXgtUmVwbGFjZSIsICJ0cnVlIik7CiAgcmV0dXJuIHJlc3BvbnNlOwp9Owp2YXIgRXJyb3JSZXNwb25zZUltcGwgPSBjbGFzcyB7CiAgY29uc3RydWN0b3Ioc3RhdHVzLCBzdGF0dXNUZXh0LCBkYXRhMiwgaW50ZXJuYWwgPSBmYWxzZSkgewogICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7CiAgICB0aGlzLnN0YXR1c1RleHQgPSBzdGF0dXNUZXh0IHx8ICIiOwogICAgdGhpcy5pbnRlcm5hbCA9IGludGVybmFsOwogICAgaWYgKGRhdGEyIGluc3RhbmNlb2YgRXJyb3IpIHsKICAgICAgdGhpcy5kYXRhID0gZGF0YTIudG9TdHJpbmcoKTsKICAgICAgdGhpcy5lcnJvciA9IGRhdGEyOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5kYXRhID0gZGF0YTI7CiAgICB9CiAgfQp9OwpmdW5jdGlvbiBpc1JvdXRlRXJyb3JSZXNwb25zZShlcnJvcikgewogIHJldHVybiBlcnJvciAhPSBudWxsICYmIHR5cGVvZiBlcnJvci5zdGF0dXMgPT09ICJudW1iZXIiICYmIHR5cGVvZiBlcnJvci5zdGF0dXNUZXh0ID09PSAic3RyaW5nIiAmJiB0eXBlb2YgZXJyb3IuaW50ZXJuYWwgPT09ICJib29sZWFuIiAmJiAiZGF0YSIgaW4gZXJyb3I7Cn0KdmFyIHZhbGlkTXV0YXRpb25NZXRob2RzQXJyID0gWwogICJQT1NUIiwKICAiUFVUIiwKICAiUEFUQ0giLAogICJERUxFVEUiCl07CnZhciB2YWxpZE11dGF0aW9uTWV0aG9kcyA9IG5ldyBTZXQoCiAgdmFsaWRNdXRhdGlvbk1ldGhvZHNBcnIKKTsKdmFyIHZhbGlkUmVxdWVzdE1ldGhvZHNBcnIgPSBbCiAgIkdFVCIsCiAgLi4udmFsaWRNdXRhdGlvbk1ldGhvZHNBcnIKXTsKdmFyIHZhbGlkUmVxdWVzdE1ldGhvZHMgPSBuZXcgU2V0KHZhbGlkUmVxdWVzdE1ldGhvZHNBcnIpOwp2YXIgcmVkaXJlY3RTdGF0dXNDb2RlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFszMDEsIDMwMiwgMzAzLCAzMDcsIDMwOF0pOwp2YXIgcmVkaXJlY3RQcmVzZXJ2ZU1ldGhvZFN0YXR1c0NvZGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoWzMwNywgMzA4XSk7CnZhciBJRExFX05BVklHQVRJT04gPSB7CiAgc3RhdGU6ICJpZGxlIiwKICBsb2NhdGlvbjogdm9pZCAwLAogIGZvcm1NZXRob2Q6IHZvaWQgMCwKICBmb3JtQWN0aW9uOiB2b2lkIDAsCiAgZm9ybUVuY1R5cGU6IHZvaWQgMCwKICBmb3JtRGF0YTogdm9pZCAwLAogIGpzb246IHZvaWQgMCwKICB0ZXh0OiB2b2lkIDAKfTsKdmFyIElETEVfRkVUQ0hFUiA9IHsKICBzdGF0ZTogImlkbGUiLAogIGRhdGE6IHZvaWQgMCwKICBmb3JtTWV0aG9kOiB2b2lkIDAsCiAgZm9ybUFjdGlvbjogdm9pZCAwLAogIGZvcm1FbmNUeXBlOiB2b2lkIDAsCiAgZm9ybURhdGE6IHZvaWQgMCwKICBqc29uOiB2b2lkIDAsCiAgdGV4dDogdm9pZCAwCn07CnZhciBJRExFX0JMT0NLRVIgPSB7CiAgc3RhdGU6ICJ1bmJsb2NrZWQiLAogIHByb2NlZWQ6IHZvaWQgMCwKICByZXNldDogdm9pZCAwLAogIGxvY2F0aW9uOiB2b2lkIDAKfTsKdmFyIEFCU09MVVRFX1VSTF9SRUdFWCA9IC9eKD86W2Etel1bYS16MC05Ky4tXSo6fFwvXC8pL2k7CnZhciBpc0Fic29sdXRlVXJsID0gKHVybCkgPT4gQUJTT0xVVEVfVVJMX1JFR0VYLnRlc3QodXJsKTsKdmFyIGRlZmF1bHRNYXBSb3V0ZVByb3BlcnRpZXMgPSAocm91dGUpID0+ICh7CiAgaGFzRXJyb3JCb3VuZGFyeTogQm9vbGVhbihyb3V0ZS5oYXNFcnJvckJvdW5kYXJ5KQp9KTsKdmFyIFRSQU5TSVRJT05TX1NUT1JBR0VfS0VZID0gInJlbWl4LXJvdXRlci10cmFuc2l0aW9ucyI7CnZhciBSZXNldExvYWRlckRhdGFTeW1ib2wgPSBTeW1ib2woIlJlc2V0TG9hZGVyRGF0YSIpOwpmdW5jdGlvbiBjcmVhdGVSb3V0ZXIoaW5pdCkgewogIGNvbnN0IHJvdXRlcldpbmRvdyA9IGluaXQud2luZG93ID8gaW5pdC53aW5kb3cgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHZvaWQgMDsKICBjb25zdCBpc0Jyb3dzZXIyID0gdHlwZW9mIHJvdXRlcldpbmRvdyAhPT0gInVuZGVmaW5lZCIgJiYgdHlwZW9mIHJvdXRlcldpbmRvdy5kb2N1bWVudCAhPT0gInVuZGVmaW5lZCIgJiYgdHlwZW9mIHJvdXRlcldpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50ICE9PSAidW5kZWZpbmVkIjsKICBpbnZhcmlhbnQoCiAgICBpbml0LnJvdXRlcy5sZW5ndGggPiAwLAogICAgIllvdSBtdXN0IHByb3ZpZGUgYSBub24tZW1wdHkgcm91dGVzIGFycmF5IHRvIGNyZWF0ZVJvdXRlciIKICApOwogIGxldCBoeWRyYXRpb25Sb3V0ZVByb3BlcnRpZXMyID0gaW5pdC5oeWRyYXRpb25Sb3V0ZVByb3BlcnRpZXMgfHwgW107CiAgbGV0IG1hcFJvdXRlUHJvcGVydGllczIgPSBpbml0Lm1hcFJvdXRlUHJvcGVydGllcyB8fCBkZWZhdWx0TWFwUm91dGVQcm9wZXJ0aWVzOwogIGxldCBtYW5pZmVzdCA9IHt9OwogIGxldCBkYXRhUm91dGVzID0gY29udmVydFJvdXRlc1RvRGF0YVJvdXRlcygKICAgIGluaXQucm91dGVzLAogICAgbWFwUm91dGVQcm9wZXJ0aWVzMiwKICAgIHZvaWQgMCwKICAgIG1hbmlmZXN0CiAgKTsKICBsZXQgaW5GbGlnaHREYXRhUm91dGVzOwogIGxldCBiYXNlbmFtZSA9IGluaXQuYmFzZW5hbWUgfHwgIi8iOwogIGlmICghYmFzZW5hbWUuc3RhcnRzV2l0aCgiLyIpKSB7CiAgICBiYXNlbmFtZSA9IGAvJHtiYXNlbmFtZX1gOwogIH0KICBsZXQgZGF0YVN0cmF0ZWd5SW1wbCA9IGluaXQuZGF0YVN0cmF0ZWd5IHx8IGRlZmF1bHREYXRhU3RyYXRlZ3lXaXRoTWlkZGxld2FyZTsKICBsZXQgZnV0dXJlID0gewogICAgLi4uaW5pdC5mdXR1cmUKICB9OwogIGxldCB1bmxpc3Rlbkhpc3RvcnkgPSBudWxsOwogIGxldCBzdWJzY3JpYmVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7CiAgbGV0IHNhdmVkU2Nyb2xsUG9zaXRpb25zMiA9IG51bGw7CiAgbGV0IGdldFNjcm9sbFJlc3RvcmF0aW9uS2V5MiA9IG51bGw7CiAgbGV0IGdldFNjcm9sbFBvc2l0aW9uID0gbnVsbDsKICBsZXQgaW5pdGlhbFNjcm9sbFJlc3RvcmVkID0gaW5pdC5oeWRyYXRpb25EYXRhICE9IG51bGw7CiAgbGV0IGluaXRpYWxNYXRjaGVzID0gbWF0Y2hSb3V0ZXMoZGF0YVJvdXRlcywgaW5pdC5oaXN0b3J5LmxvY2F0aW9uLCBiYXNlbmFtZSk7CiAgbGV0IGluaXRpYWxNYXRjaGVzSXNGT1cgPSBmYWxzZTsKICBsZXQgaW5pdGlhbEVycm9ycyA9IG51bGw7CiAgbGV0IGluaXRpYWxpemVkOwogIGlmIChpbml0aWFsTWF0Y2hlcyA9PSBudWxsICYmICFpbml0LnBhdGNoUm91dGVzT25OYXZpZ2F0aW9uKSB7CiAgICBsZXQgZXJyb3IgPSBnZXRJbnRlcm5hbFJvdXRlckVycm9yKDQwNCwgewogICAgICBwYXRobmFtZTogaW5pdC5oaXN0b3J5LmxvY2F0aW9uLnBhdGhuYW1lCiAgICB9KTsKICAgIGxldCB7IG1hdGNoZXMsIHJvdXRlIH0gPSBnZXRTaG9ydENpcmN1aXRNYXRjaGVzKGRhdGFSb3V0ZXMpOwogICAgaW5pdGlhbGl6ZWQgPSB0cnVlOwogICAgaW5pdGlhbE1hdGNoZXMgPSBtYXRjaGVzOwogICAgaW5pdGlhbEVycm9ycyA9IHsgW3JvdXRlLmlkXTogZXJyb3IgfTsKICB9IGVsc2UgewogICAgaWYgKGluaXRpYWxNYXRjaGVzICYmICFpbml0Lmh5ZHJhdGlvbkRhdGEpIHsKICAgICAgbGV0IGZvZ09mV2FyID0gY2hlY2tGb2dPZldhcigKICAgICAgICBpbml0aWFsTWF0Y2hlcywKICAgICAgICBkYXRhUm91dGVzLAogICAgICAgIGluaXQuaGlzdG9yeS5sb2NhdGlvbi5wYXRobmFtZQogICAgICApOwogICAgICBpZiAoZm9nT2ZXYXIuYWN0aXZlKSB7CiAgICAgICAgaW5pdGlhbE1hdGNoZXMgPSBudWxsOwogICAgICB9CiAgICB9CiAgICBpZiAoIWluaXRpYWxNYXRjaGVzKSB7CiAgICAgIGluaXRpYWxpemVkID0gZmFsc2U7CiAgICAgIGluaXRpYWxNYXRjaGVzID0gW107CiAgICAgIGxldCBmb2dPZldhciA9IGNoZWNrRm9nT2ZXYXIoCiAgICAgICAgbnVsbCwKICAgICAgICBkYXRhUm91dGVzLAogICAgICAgIGluaXQuaGlzdG9yeS5sb2NhdGlvbi5wYXRobmFtZQogICAgICApOwogICAgICBpZiAoZm9nT2ZXYXIuYWN0aXZlICYmIGZvZ09mV2FyLm1hdGNoZXMpIHsKICAgICAgICBpbml0aWFsTWF0Y2hlc0lzRk9XID0gdHJ1ZTsKICAgICAgICBpbml0aWFsTWF0Y2hlcyA9IGZvZ09mV2FyLm1hdGNoZXM7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoaW5pdGlhbE1hdGNoZXMuc29tZSgobSkgPT4gbS5yb3V0ZS5sYXp5KSkgewogICAgICBpbml0aWFsaXplZCA9IGZhbHNlOwogICAgfSBlbHNlIGlmICghaW5pdGlhbE1hdGNoZXMuc29tZSgobSkgPT4gbS5yb3V0ZS5sb2FkZXIpKSB7CiAgICAgIGluaXRpYWxpemVkID0gdHJ1ZTsKICAgIH0gZWxzZSB7CiAgICAgIGxldCBsb2FkZXJEYXRhID0gaW5pdC5oeWRyYXRpb25EYXRhID8gaW5pdC5oeWRyYXRpb25EYXRhLmxvYWRlckRhdGEgOiBudWxsOwogICAgICBsZXQgZXJyb3JzID0gaW5pdC5oeWRyYXRpb25EYXRhID8gaW5pdC5oeWRyYXRpb25EYXRhLmVycm9ycyA6IG51bGw7CiAgICAgIGlmIChlcnJvcnMpIHsKICAgICAgICBsZXQgaWR4ID0gaW5pdGlhbE1hdGNoZXMuZmluZEluZGV4KAogICAgICAgICAgKG0pID0+IGVycm9yc1ttLnJvdXRlLmlkXSAhPT0gdm9pZCAwCiAgICAgICAgKTsKICAgICAgICBpbml0aWFsaXplZCA9IGluaXRpYWxNYXRjaGVzLnNsaWNlKDAsIGlkeCArIDEpLmV2ZXJ5KAogICAgICAgICAgKG0pID0+ICFzaG91bGRMb2FkUm91dGVPbkh5ZHJhdGlvbihtLnJvdXRlLCBsb2FkZXJEYXRhLCBlcnJvcnMpCiAgICAgICAgKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpbml0aWFsaXplZCA9IGluaXRpYWxNYXRjaGVzLmV2ZXJ5KAogICAgICAgICAgKG0pID0+ICFzaG91bGRMb2FkUm91dGVPbkh5ZHJhdGlvbihtLnJvdXRlLCBsb2FkZXJEYXRhLCBlcnJvcnMpCiAgICAgICAgKTsKICAgICAgfQogICAgfQogIH0KICBsZXQgcm91dGVyMjsKICBsZXQgc3RhdGUgPSB7CiAgICBoaXN0b3J5QWN0aW9uOiBpbml0Lmhpc3RvcnkuYWN0aW9uLAogICAgbG9jYXRpb246IGluaXQuaGlzdG9yeS5sb2NhdGlvbiwKICAgIG1hdGNoZXM6IGluaXRpYWxNYXRjaGVzLAogICAgaW5pdGlhbGl6ZWQsCiAgICBuYXZpZ2F0aW9uOiBJRExFX05BVklHQVRJT04sCiAgICAvLyBEb24ndCByZXN0b3JlIG9uIGluaXRpYWwgdXBkYXRlU3RhdGUoKSBpZiB3ZSB3ZXJlIFNTUidkCiAgICByZXN0b3JlU2Nyb2xsUG9zaXRpb246IGluaXQuaHlkcmF0aW9uRGF0YSAhPSBudWxsID8gZmFsc2UgOiBudWxsLAogICAgcHJldmVudFNjcm9sbFJlc2V0OiBmYWxzZSwKICAgIHJldmFsaWRhdGlvbjogImlkbGUiLAogICAgbG9hZGVyRGF0YTogaW5pdC5oeWRyYXRpb25EYXRhICYmIGluaXQuaHlkcmF0aW9uRGF0YS5sb2FkZXJEYXRhIHx8IHt9LAogICAgYWN0aW9uRGF0YTogaW5pdC5oeWRyYXRpb25EYXRhICYmIGluaXQuaHlkcmF0aW9uRGF0YS5hY3Rpb25EYXRhIHx8IG51bGwsCiAgICBlcnJvcnM6IGluaXQuaHlkcmF0aW9uRGF0YSAmJiBpbml0Lmh5ZHJhdGlvbkRhdGEuZXJyb3JzIHx8IGluaXRpYWxFcnJvcnMsCiAgICBmZXRjaGVyczogLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSwKICAgIGJsb2NrZXJzOiAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpCiAgfTsKICBsZXQgcGVuZGluZ0FjdGlvbiA9ICJQT1AiOwogIGxldCBwZW5kaW5nUHJldmVudFNjcm9sbFJlc2V0ID0gZmFsc2U7CiAgbGV0IHBlbmRpbmdOYXZpZ2F0aW9uQ29udHJvbGxlcjsKICBsZXQgcGVuZGluZ1ZpZXdUcmFuc2l0aW9uRW5hYmxlZCA9IGZhbHNlOwogIGxldCBhcHBsaWVkVmlld1RyYW5zaXRpb25zID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBsZXQgcmVtb3ZlUGFnZUhpZGVFdmVudExpc3RlbmVyID0gbnVsbDsKICBsZXQgaXNVbmludGVycnVwdGVkUmV2YWxpZGF0aW9uID0gZmFsc2U7CiAgbGV0IGlzUmV2YWxpZGF0aW9uUmVxdWlyZWQgPSBmYWxzZTsKICBsZXQgY2FuY2VsbGVkRmV0Y2hlckxvYWRzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKICBsZXQgZmV0Y2hDb250cm9sbGVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgbGV0IGluY3JlbWVudGluZ0xvYWRJZCA9IDA7CiAgbGV0IHBlbmRpbmdOYXZpZ2F0aW9uTG9hZElkID0gLTE7CiAgbGV0IGZldGNoUmVsb2FkSWRzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBsZXQgZmV0Y2hSZWRpcmVjdElkcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7CiAgbGV0IGZldGNoTG9hZE1hdGNoZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpOwogIGxldCBhY3RpdmVGZXRjaGVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgbGV0IGZldGNoZXJzUXVldWVkRm9yRGVsZXRpb24gPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogIGxldCBibG9ja2VyRnVuY3Rpb25zID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBsZXQgdW5ibG9ja0Jsb2NrZXJIaXN0b3J5VXBkYXRlID0gdm9pZCAwOwogIGxldCBwZW5kaW5nUmV2YWxpZGF0aW9uRGZkID0gbnVsbDsKICBmdW5jdGlvbiBpbml0aWFsaXplKCkgewogICAgdW5saXN0ZW5IaXN0b3J5ID0gaW5pdC5oaXN0b3J5Lmxpc3RlbigKICAgICAgKHsgYWN0aW9uOiBoaXN0b3J5QWN0aW9uLCBsb2NhdGlvbjogbG9jYXRpb24yLCBkZWx0YSB9KSA9PiB7CiAgICAgICAgaWYgKHVuYmxvY2tCbG9ja2VySGlzdG9yeVVwZGF0ZSkgewogICAgICAgICAgdW5ibG9ja0Jsb2NrZXJIaXN0b3J5VXBkYXRlKCk7CiAgICAgICAgICB1bmJsb2NrQmxvY2tlckhpc3RvcnlVcGRhdGUgPSB2b2lkIDA7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHdhcm5pbmcoCiAgICAgICAgICBibG9ja2VyRnVuY3Rpb25zLnNpemUgPT09IDAgfHwgZGVsdGEgIT0gbnVsbCwKICAgICAgICAgICJZb3UgYXJlIHRyeWluZyB0byB1c2UgYSBibG9ja2VyIG9uIGEgUE9QIG5hdmlnYXRpb24gdG8gYSBsb2NhdGlvbiB0aGF0IHdhcyBub3QgY3JlYXRlZCBieSBAcmVtaXgtcnVuL3JvdXRlci4gVGhpcyB3aWxsIGZhaWwgc2lsZW50bHkgaW4gcHJvZHVjdGlvbi4gVGhpcyBjYW4gaGFwcGVuIGlmIHlvdSBhcmUgbmF2aWdhdGluZyBvdXRzaWRlIHRoZSByb3V0ZXIgdmlhIGB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGVgL2B3aW5kb3cubG9jYXRpb24uaGFzaGAgaW5zdGVhZCBvZiB1c2luZyByb3V0ZXIgbmF2aWdhdGlvbiBBUElzLiAgVGhpcyBjYW4gYWxzbyBoYXBwZW4gaWYgeW91IGFyZSB1c2luZyBjcmVhdGVIYXNoUm91dGVyIGFuZCB0aGUgdXNlciBtYW51YWxseSBjaGFuZ2VzIHRoZSBVUkwuIgogICAgICAgICk7CiAgICAgICAgbGV0IGJsb2NrZXJLZXkgPSBzaG91bGRCbG9ja05hdmlnYXRpb24oewogICAgICAgICAgY3VycmVudExvY2F0aW9uOiBzdGF0ZS5sb2NhdGlvbiwKICAgICAgICAgIG5leHRMb2NhdGlvbjogbG9jYXRpb24yLAogICAgICAgICAgaGlzdG9yeUFjdGlvbgogICAgICAgIH0pOwogICAgICAgIGlmIChibG9ja2VyS2V5ICYmIGRlbHRhICE9IG51bGwpIHsKICAgICAgICAgIGxldCBuZXh0SGlzdG9yeVVwZGF0ZVByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgICAgICB1bmJsb2NrQmxvY2tlckhpc3RvcnlVcGRhdGUgPSByZXNvbHZlOwogICAgICAgICAgfSk7CiAgICAgICAgICBpbml0Lmhpc3RvcnkuZ28oZGVsdGEgKiAtMSk7CiAgICAgICAgICB1cGRhdGVCbG9ja2VyKGJsb2NrZXJLZXksIHsKICAgICAgICAgICAgc3RhdGU6ICJibG9ja2VkIiwKICAgICAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uMiwKICAgICAgICAgICAgcHJvY2VlZCgpIHsKICAgICAgICAgICAgICB1cGRhdGVCbG9ja2VyKGJsb2NrZXJLZXksIHsKICAgICAgICAgICAgICAgIHN0YXRlOiAicHJvY2VlZGluZyIsCiAgICAgICAgICAgICAgICBwcm9jZWVkOiB2b2lkIDAsCiAgICAgICAgICAgICAgICByZXNldDogdm9pZCAwLAogICAgICAgICAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uMgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIG5leHRIaXN0b3J5VXBkYXRlUHJvbWlzZS50aGVuKCgpID0+IGluaXQuaGlzdG9yeS5nbyhkZWx0YSkpOwogICAgICAgICAgICB9LAogICAgICAgICAgICByZXNldCgpIHsKICAgICAgICAgICAgICBsZXQgYmxvY2tlcnMgPSBuZXcgTWFwKHN0YXRlLmJsb2NrZXJzKTsKICAgICAgICAgICAgICBibG9ja2Vycy5zZXQoYmxvY2tlcktleSwgSURMRV9CTE9DS0VSKTsKICAgICAgICAgICAgICB1cGRhdGVTdGF0ZSh7IGJsb2NrZXJzIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN0YXJ0TmF2aWdhdGlvbihoaXN0b3J5QWN0aW9uLCBsb2NhdGlvbjIpOwogICAgICB9CiAgICApOwogICAgaWYgKGlzQnJvd3NlcjIpIHsKICAgICAgcmVzdG9yZUFwcGxpZWRUcmFuc2l0aW9ucyhyb3V0ZXJXaW5kb3csIGFwcGxpZWRWaWV3VHJhbnNpdGlvbnMpOwogICAgICBsZXQgX3NhdmVBcHBsaWVkVHJhbnNpdGlvbnMgPSAoKSA9PiBwZXJzaXN0QXBwbGllZFRyYW5zaXRpb25zKHJvdXRlcldpbmRvdywgYXBwbGllZFZpZXdUcmFuc2l0aW9ucyk7CiAgICAgIHJvdXRlcldpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJwYWdlaGlkZSIsIF9zYXZlQXBwbGllZFRyYW5zaXRpb25zKTsKICAgICAgcmVtb3ZlUGFnZUhpZGVFdmVudExpc3RlbmVyID0gKCkgPT4gcm91dGVyV2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoInBhZ2VoaWRlIiwgX3NhdmVBcHBsaWVkVHJhbnNpdGlvbnMpOwogICAgfQogICAgaWYgKCFzdGF0ZS5pbml0aWFsaXplZCkgewogICAgICBzdGFydE5hdmlnYXRpb24oIlBPUCIsIHN0YXRlLmxvY2F0aW9uLCB7CiAgICAgICAgaW5pdGlhbEh5ZHJhdGlvbjogdHJ1ZQogICAgICB9KTsKICAgIH0KICAgIHJldHVybiByb3V0ZXIyOwogIH0KICBmdW5jdGlvbiBkaXNwb3NlKCkgewogICAgaWYgKHVubGlzdGVuSGlzdG9yeSkgewogICAgICB1bmxpc3Rlbkhpc3RvcnkoKTsKICAgIH0KICAgIGlmIChyZW1vdmVQYWdlSGlkZUV2ZW50TGlzdGVuZXIpIHsKICAgICAgcmVtb3ZlUGFnZUhpZGVFdmVudExpc3RlbmVyKCk7CiAgICB9CiAgICBzdWJzY3JpYmVycy5jbGVhcigpOwogICAgcGVuZGluZ05hdmlnYXRpb25Db250cm9sbGVyICYmIHBlbmRpbmdOYXZpZ2F0aW9uQ29udHJvbGxlci5hYm9ydCgpOwogICAgc3RhdGUuZmV0Y2hlcnMuZm9yRWFjaCgoXywga2V5KSA9PiBkZWxldGVGZXRjaGVyKGtleSkpOwogICAgc3RhdGUuYmxvY2tlcnMuZm9yRWFjaCgoXywga2V5KSA9PiBkZWxldGVCbG9ja2VyKGtleSkpOwogIH0KICBmdW5jdGlvbiBzdWJzY3JpYmUoZm4pIHsKICAgIHN1YnNjcmliZXJzLmFkZChmbik7CiAgICByZXR1cm4gKCkgPT4gc3Vic2NyaWJlcnMuZGVsZXRlKGZuKTsKICB9CiAgZnVuY3Rpb24gdXBkYXRlU3RhdGUobmV3U3RhdGUsIG9wdHMgPSB7fSkgewogICAgaWYgKG5ld1N0YXRlLm1hdGNoZXMpIHsKICAgICAgbmV3U3RhdGUubWF0Y2hlcyA9IG5ld1N0YXRlLm1hdGNoZXMubWFwKChtKSA9PiB7CiAgICAgICAgbGV0IHJvdXRlID0gbWFuaWZlc3RbbS5yb3V0ZS5pZF07CiAgICAgICAgbGV0IG1hdGNoUm91dGUgPSBtLnJvdXRlOwogICAgICAgIGlmIChtYXRjaFJvdXRlLmVsZW1lbnQgIT09IHJvdXRlLmVsZW1lbnQgfHwgbWF0Y2hSb3V0ZS5lcnJvckVsZW1lbnQgIT09IHJvdXRlLmVycm9yRWxlbWVudCB8fCBtYXRjaFJvdXRlLmh5ZHJhdGVGYWxsYmFja0VsZW1lbnQgIT09IHJvdXRlLmh5ZHJhdGVGYWxsYmFja0VsZW1lbnQpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIC4uLm0sCiAgICAgICAgICAgIHJvdXRlCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICByZXR1cm4gbTsKICAgICAgfSk7CiAgICB9CiAgICBzdGF0ZSA9IHsKICAgICAgLi4uc3RhdGUsCiAgICAgIC4uLm5ld1N0YXRlCiAgICB9OwogICAgbGV0IHVubW91bnRlZEZldGNoZXJzID0gW107CiAgICBsZXQgbW91bnRlZEZldGNoZXJzID0gW107CiAgICBzdGF0ZS5mZXRjaGVycy5mb3JFYWNoKChmZXRjaGVyLCBrZXkpID0+IHsKICAgICAgaWYgKGZldGNoZXIuc3RhdGUgPT09ICJpZGxlIikgewogICAgICAgIGlmIChmZXRjaGVyc1F1ZXVlZEZvckRlbGV0aW9uLmhhcyhrZXkpKSB7CiAgICAgICAgICB1bm1vdW50ZWRGZXRjaGVycy5wdXNoKGtleSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG1vdW50ZWRGZXRjaGVycy5wdXNoKGtleSk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIGZldGNoZXJzUXVldWVkRm9yRGVsZXRpb24uZm9yRWFjaCgoa2V5KSA9PiB7CiAgICAgIGlmICghc3RhdGUuZmV0Y2hlcnMuaGFzKGtleSkgJiYgIWZldGNoQ29udHJvbGxlcnMuaGFzKGtleSkpIHsKICAgICAgICB1bm1vdW50ZWRGZXRjaGVycy5wdXNoKGtleSk7CiAgICAgIH0KICAgIH0pOwogICAgWy4uLnN1YnNjcmliZXJzXS5mb3JFYWNoKAogICAgICAoc3Vic2NyaWJlcikgPT4gc3Vic2NyaWJlcihzdGF0ZSwgewogICAgICAgIGRlbGV0ZWRGZXRjaGVyczogdW5tb3VudGVkRmV0Y2hlcnMsCiAgICAgICAgdmlld1RyYW5zaXRpb25PcHRzOiBvcHRzLnZpZXdUcmFuc2l0aW9uT3B0cywKICAgICAgICBmbHVzaFN5bmM6IG9wdHMuZmx1c2hTeW5jID09PSB0cnVlCiAgICAgIH0pCiAgICApOwogICAgdW5tb3VudGVkRmV0Y2hlcnMuZm9yRWFjaCgoa2V5KSA9PiBkZWxldGVGZXRjaGVyKGtleSkpOwogICAgbW91bnRlZEZldGNoZXJzLmZvckVhY2goKGtleSkgPT4gc3RhdGUuZmV0Y2hlcnMuZGVsZXRlKGtleSkpOwogIH0KICBmdW5jdGlvbiBjb21wbGV0ZU5hdmlnYXRpb24obG9jYXRpb24yLCBuZXdTdGF0ZSwgeyBmbHVzaFN5bmM6IGZsdXNoU3luYzMgfSA9IHt9KSB7CiAgICB2YXIgX2EsIF9iOwogICAgbGV0IGlzQWN0aW9uUmVsb2FkID0gc3RhdGUuYWN0aW9uRGF0YSAhPSBudWxsICYmIHN0YXRlLm5hdmlnYXRpb24uZm9ybU1ldGhvZCAhPSBudWxsICYmIGlzTXV0YXRpb25NZXRob2Qoc3RhdGUubmF2aWdhdGlvbi5mb3JtTWV0aG9kKSAmJiBzdGF0ZS5uYXZpZ2F0aW9uLnN0YXRlID09PSAibG9hZGluZyIgJiYgKChfYSA9IGxvY2F0aW9uMi5zdGF0ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLl9pc1JlZGlyZWN0KSAhPT0gdHJ1ZTsKICAgIGxldCBhY3Rpb25EYXRhOwogICAgaWYgKG5ld1N0YXRlLmFjdGlvbkRhdGEpIHsKICAgICAgaWYgKE9iamVjdC5rZXlzKG5ld1N0YXRlLmFjdGlvbkRhdGEpLmxlbmd0aCA+IDApIHsKICAgICAgICBhY3Rpb25EYXRhID0gbmV3U3RhdGUuYWN0aW9uRGF0YTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhY3Rpb25EYXRhID0gbnVsbDsKICAgICAgfQogICAgfSBlbHNlIGlmIChpc0FjdGlvblJlbG9hZCkgewogICAgICBhY3Rpb25EYXRhID0gc3RhdGUuYWN0aW9uRGF0YTsKICAgIH0gZWxzZSB7CiAgICAgIGFjdGlvbkRhdGEgPSBudWxsOwogICAgfQogICAgbGV0IGxvYWRlckRhdGEgPSBuZXdTdGF0ZS5sb2FkZXJEYXRhID8gbWVyZ2VMb2FkZXJEYXRhKAogICAgICBzdGF0ZS5sb2FkZXJEYXRhLAogICAgICBuZXdTdGF0ZS5sb2FkZXJEYXRhLAogICAgICBuZXdTdGF0ZS5tYXRjaGVzIHx8IFtdLAogICAgICBuZXdTdGF0ZS5lcnJvcnMKICAgICkgOiBzdGF0ZS5sb2FkZXJEYXRhOwogICAgbGV0IGJsb2NrZXJzID0gc3RhdGUuYmxvY2tlcnM7CiAgICBpZiAoYmxvY2tlcnMuc2l6ZSA+IDApIHsKICAgICAgYmxvY2tlcnMgPSBuZXcgTWFwKGJsb2NrZXJzKTsKICAgICAgYmxvY2tlcnMuZm9yRWFjaCgoXywgaykgPT4gYmxvY2tlcnMuc2V0KGssIElETEVfQkxPQ0tFUikpOwogICAgfQogICAgbGV0IHJlc3RvcmVTY3JvbGxQb3NpdGlvbiA9IGlzVW5pbnRlcnJ1cHRlZFJldmFsaWRhdGlvbiA/IGZhbHNlIDogZ2V0U2F2ZWRTY3JvbGxQb3NpdGlvbihsb2NhdGlvbjIsIG5ld1N0YXRlLm1hdGNoZXMgfHwgc3RhdGUubWF0Y2hlcyk7CiAgICBsZXQgcHJldmVudFNjcm9sbFJlc2V0ID0gcGVuZGluZ1ByZXZlbnRTY3JvbGxSZXNldCA9PT0gdHJ1ZSB8fCBzdGF0ZS5uYXZpZ2F0aW9uLmZvcm1NZXRob2QgIT0gbnVsbCAmJiBpc011dGF0aW9uTWV0aG9kKHN0YXRlLm5hdmlnYXRpb24uZm9ybU1ldGhvZCkgJiYgKChfYiA9IGxvY2F0aW9uMi5zdGF0ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLl9pc1JlZGlyZWN0KSAhPT0gdHJ1ZTsKICAgIGlmIChpbkZsaWdodERhdGFSb3V0ZXMpIHsKICAgICAgZGF0YVJvdXRlcyA9IGluRmxpZ2h0RGF0YVJvdXRlczsKICAgICAgaW5GbGlnaHREYXRhUm91dGVzID0gdm9pZCAwOwogICAgfQogICAgaWYgKGlzVW5pbnRlcnJ1cHRlZFJldmFsaWRhdGlvbikgewogICAgfSBlbHNlIGlmIChwZW5kaW5nQWN0aW9uID09PSAiUE9QIikgewogICAgfSBlbHNlIGlmIChwZW5kaW5nQWN0aW9uID09PSAiUFVTSCIpIHsKICAgICAgaW5pdC5oaXN0b3J5LnB1c2gobG9jYXRpb24yLCBsb2NhdGlvbjIuc3RhdGUpOwogICAgfSBlbHNlIGlmIChwZW5kaW5nQWN0aW9uID09PSAiUkVQTEFDRSIpIHsKICAgICAgaW5pdC5oaXN0b3J5LnJlcGxhY2UobG9jYXRpb24yLCBsb2NhdGlvbjIuc3RhdGUpOwogICAgfQogICAgbGV0IHZpZXdUcmFuc2l0aW9uT3B0czsKICAgIGlmIChwZW5kaW5nQWN0aW9uID09PSAiUE9QIikgewogICAgICBsZXQgcHJpb3JQYXRocyA9IGFwcGxpZWRWaWV3VHJhbnNpdGlvbnMuZ2V0KHN0YXRlLmxvY2F0aW9uLnBhdGhuYW1lKTsKICAgICAgaWYgKHByaW9yUGF0aHMgJiYgcHJpb3JQYXRocy5oYXMobG9jYXRpb24yLnBhdGhuYW1lKSkgewogICAgICAgIHZpZXdUcmFuc2l0aW9uT3B0cyA9IHsKICAgICAgICAgIGN1cnJlbnRMb2NhdGlvbjogc3RhdGUubG9jYXRpb24sCiAgICAgICAgICBuZXh0TG9jYXRpb246IGxvY2F0aW9uMgogICAgICAgIH07CiAgICAgIH0gZWxzZSBpZiAoYXBwbGllZFZpZXdUcmFuc2l0aW9ucy5oYXMobG9jYXRpb24yLnBhdGhuYW1lKSkgewogICAgICAgIHZpZXdUcmFuc2l0aW9uT3B0cyA9IHsKICAgICAgICAgIGN1cnJlbnRMb2NhdGlvbjogbG9jYXRpb24yLAogICAgICAgICAgbmV4dExvY2F0aW9uOiBzdGF0ZS5sb2NhdGlvbgogICAgICAgIH07CiAgICAgIH0KICAgIH0gZWxzZSBpZiAocGVuZGluZ1ZpZXdUcmFuc2l0aW9uRW5hYmxlZCkgewogICAgICBsZXQgdG9QYXRocyA9IGFwcGxpZWRWaWV3VHJhbnNpdGlvbnMuZ2V0KHN0YXRlLmxvY2F0aW9uLnBhdGhuYW1lKTsKICAgICAgaWYgKHRvUGF0aHMpIHsKICAgICAgICB0b1BhdGhzLmFkZChsb2NhdGlvbjIucGF0aG5hbWUpOwogICAgICB9IGVsc2UgewogICAgICAgIHRvUGF0aHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbbG9jYXRpb24yLnBhdGhuYW1lXSk7CiAgICAgICAgYXBwbGllZFZpZXdUcmFuc2l0aW9ucy5zZXQoc3RhdGUubG9jYXRpb24ucGF0aG5hbWUsIHRvUGF0aHMpOwogICAgICB9CiAgICAgIHZpZXdUcmFuc2l0aW9uT3B0cyA9IHsKICAgICAgICBjdXJyZW50TG9jYXRpb246IHN0YXRlLmxvY2F0aW9uLAogICAgICAgIG5leHRMb2NhdGlvbjogbG9jYXRpb24yCiAgICAgIH07CiAgICB9CiAgICB1cGRhdGVTdGF0ZSgKICAgICAgewogICAgICAgIC4uLm5ld1N0YXRlLAogICAgICAgIC8vIG1hdGNoZXMsIGVycm9ycywgZmV0Y2hlcnMgZ28gdGhyb3VnaCBhcy1pcwogICAgICAgIGFjdGlvbkRhdGEsCiAgICAgICAgbG9hZGVyRGF0YSwKICAgICAgICBoaXN0b3J5QWN0aW9uOiBwZW5kaW5nQWN0aW9uLAogICAgICAgIGxvY2F0aW9uOiBsb2NhdGlvbjIsCiAgICAgICAgaW5pdGlhbGl6ZWQ6IHRydWUsCiAgICAgICAgbmF2aWdhdGlvbjogSURMRV9OQVZJR0FUSU9OLAogICAgICAgIHJldmFsaWRhdGlvbjogImlkbGUiLAogICAgICAgIHJlc3RvcmVTY3JvbGxQb3NpdGlvbiwKICAgICAgICBwcmV2ZW50U2Nyb2xsUmVzZXQsCiAgICAgICAgYmxvY2tlcnMKICAgICAgfSwKICAgICAgewogICAgICAgIHZpZXdUcmFuc2l0aW9uT3B0cywKICAgICAgICBmbHVzaFN5bmM6IGZsdXNoU3luYzMgPT09IHRydWUKICAgICAgfQogICAgKTsKICAgIHBlbmRpbmdBY3Rpb24gPSAiUE9QIjsKICAgIHBlbmRpbmdQcmV2ZW50U2Nyb2xsUmVzZXQgPSBmYWxzZTsKICAgIHBlbmRpbmdWaWV3VHJhbnNpdGlvbkVuYWJsZWQgPSBmYWxzZTsKICAgIGlzVW5pbnRlcnJ1cHRlZFJldmFsaWRhdGlvbiA9IGZhbHNlOwogICAgaXNSZXZhbGlkYXRpb25SZXF1aXJlZCA9IGZhbHNlOwogICAgcGVuZGluZ1JldmFsaWRhdGlvbkRmZCA9PSBudWxsID8gdm9pZCAwIDogcGVuZGluZ1JldmFsaWRhdGlvbkRmZC5yZXNvbHZlKCk7CiAgICBwZW5kaW5nUmV2YWxpZGF0aW9uRGZkID0gbnVsbDsKICB9CiAgYXN5bmMgZnVuY3Rpb24gbmF2aWdhdGUodG8sIG9wdHMpIHsKICAgIGlmICh0eXBlb2YgdG8gPT09ICJudW1iZXIiKSB7CiAgICAgIGluaXQuaGlzdG9yeS5nbyh0byk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGxldCBub3JtYWxpemVkUGF0aCA9IG5vcm1hbGl6ZVRvKAogICAgICBzdGF0ZS5sb2NhdGlvbiwKICAgICAgc3RhdGUubWF0Y2hlcywKICAgICAgYmFzZW5hbWUsCiAgICAgIHRvLAogICAgICBvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLmZyb21Sb3V0ZUlkLAogICAgICBvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLnJlbGF0aXZlCiAgICApOwogICAgbGV0IHsgcGF0aCwgc3VibWlzc2lvbiwgZXJyb3IgfSA9IG5vcm1hbGl6ZU5hdmlnYXRlT3B0aW9ucygKICAgICAgZmFsc2UsCiAgICAgIG5vcm1hbGl6ZWRQYXRoLAogICAgICBvcHRzCiAgICApOwogICAgbGV0IGN1cnJlbnRMb2NhdGlvbiA9IHN0YXRlLmxvY2F0aW9uOwogICAgbGV0IG5leHRMb2NhdGlvbiA9IGNyZWF0ZUxvY2F0aW9uKHN0YXRlLmxvY2F0aW9uLCBwYXRoLCBvcHRzICYmIG9wdHMuc3RhdGUpOwogICAgbmV4dExvY2F0aW9uID0gewogICAgICAuLi5uZXh0TG9jYXRpb24sCiAgICAgIC4uLmluaXQuaGlzdG9yeS5lbmNvZGVMb2NhdGlvbihuZXh0TG9jYXRpb24pCiAgICB9OwogICAgbGV0IHVzZXJSZXBsYWNlID0gb3B0cyAmJiBvcHRzLnJlcGxhY2UgIT0gbnVsbCA/IG9wdHMucmVwbGFjZSA6IHZvaWQgMDsKICAgIGxldCBoaXN0b3J5QWN0aW9uID0gIlBVU0giOwogICAgaWYgKHVzZXJSZXBsYWNlID09PSB0cnVlKSB7CiAgICAgIGhpc3RvcnlBY3Rpb24gPSAiUkVQTEFDRSI7CiAgICB9IGVsc2UgaWYgKHVzZXJSZXBsYWNlID09PSBmYWxzZSkgewogICAgfSBlbHNlIGlmIChzdWJtaXNzaW9uICE9IG51bGwgJiYgaXNNdXRhdGlvbk1ldGhvZChzdWJtaXNzaW9uLmZvcm1NZXRob2QpICYmIHN1Ym1pc3Npb24uZm9ybUFjdGlvbiA9PT0gc3RhdGUubG9jYXRpb24ucGF0aG5hbWUgKyBzdGF0ZS5sb2NhdGlvbi5zZWFyY2gpIHsKICAgICAgaGlzdG9yeUFjdGlvbiA9ICJSRVBMQUNFIjsKICAgIH0KICAgIGxldCBwcmV2ZW50U2Nyb2xsUmVzZXQgPSBvcHRzICYmICJwcmV2ZW50U2Nyb2xsUmVzZXQiIGluIG9wdHMgPyBvcHRzLnByZXZlbnRTY3JvbGxSZXNldCA9PT0gdHJ1ZSA6IHZvaWQgMDsKICAgIGxldCBmbHVzaFN5bmMzID0gKG9wdHMgJiYgb3B0cy5mbHVzaFN5bmMpID09PSB0cnVlOwogICAgbGV0IGJsb2NrZXJLZXkgPSBzaG91bGRCbG9ja05hdmlnYXRpb24oewogICAgICBjdXJyZW50TG9jYXRpb24sCiAgICAgIG5leHRMb2NhdGlvbiwKICAgICAgaGlzdG9yeUFjdGlvbgogICAgfSk7CiAgICBpZiAoYmxvY2tlcktleSkgewogICAgICB1cGRhdGVCbG9ja2VyKGJsb2NrZXJLZXksIHsKICAgICAgICBzdGF0ZTogImJsb2NrZWQiLAogICAgICAgIGxvY2F0aW9uOiBuZXh0TG9jYXRpb24sCiAgICAgICAgcHJvY2VlZCgpIHsKICAgICAgICAgIHVwZGF0ZUJsb2NrZXIoYmxvY2tlcktleSwgewogICAgICAgICAgICBzdGF0ZTogInByb2NlZWRpbmciLAogICAgICAgICAgICBwcm9jZWVkOiB2b2lkIDAsCiAgICAgICAgICAgIHJlc2V0OiB2b2lkIDAsCiAgICAgICAgICAgIGxvY2F0aW9uOiBuZXh0TG9jYXRpb24KICAgICAgICAgIH0pOwogICAgICAgICAgbmF2aWdhdGUodG8sIG9wdHMpOwogICAgICAgIH0sCiAgICAgICAgcmVzZXQoKSB7CiAgICAgICAgICBsZXQgYmxvY2tlcnMgPSBuZXcgTWFwKHN0YXRlLmJsb2NrZXJzKTsKICAgICAgICAgIGJsb2NrZXJzLnNldChibG9ja2VyS2V5LCBJRExFX0JMT0NLRVIpOwogICAgICAgICAgdXBkYXRlU3RhdGUoeyBibG9ja2VycyB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm47CiAgICB9CiAgICBhd2FpdCBzdGFydE5hdmlnYXRpb24oaGlzdG9yeUFjdGlvbiwgbmV4dExvY2F0aW9uLCB7CiAgICAgIHN1Ym1pc3Npb24sCiAgICAgIC8vIFNlbmQgdGhyb3VnaCB0aGUgZm9ybURhdGEgc2VyaWFsaXphdGlvbiBlcnJvciBpZiB3ZSBoYXZlIG9uZSBzbyB3ZSBjYW4KICAgICAgLy8gcmVuZGVyIGF0IHRoZSByaWdodCBlcnJvciBib3VuZGFyeSBhZnRlciB3ZSBtYXRjaCByb3V0ZXMKICAgICAgcGVuZGluZ0Vycm9yOiBlcnJvciwKICAgICAgcHJldmVudFNjcm9sbFJlc2V0LAogICAgICByZXBsYWNlOiBvcHRzICYmIG9wdHMucmVwbGFjZSwKICAgICAgZW5hYmxlVmlld1RyYW5zaXRpb246IG9wdHMgJiYgb3B0cy52aWV3VHJhbnNpdGlvbiwKICAgICAgZmx1c2hTeW5jOiBmbHVzaFN5bmMzCiAgICB9KTsKICB9CiAgZnVuY3Rpb24gcmV2YWxpZGF0ZSgpIHsKICAgIGlmICghcGVuZGluZ1JldmFsaWRhdGlvbkRmZCkgewogICAgICBwZW5kaW5nUmV2YWxpZGF0aW9uRGZkID0gY3JlYXRlRGVmZXJyZWQoKTsKICAgIH0KICAgIGludGVycnVwdEFjdGl2ZUxvYWRzKCk7CiAgICB1cGRhdGVTdGF0ZSh7IHJldmFsaWRhdGlvbjogImxvYWRpbmciIH0pOwogICAgbGV0IHByb21pc2UgPSBwZW5kaW5nUmV2YWxpZGF0aW9uRGZkLnByb21pc2U7CiAgICBpZiAoc3RhdGUubmF2aWdhdGlvbi5zdGF0ZSA9PT0gInN1Ym1pdHRpbmciKSB7CiAgICAgIHJldHVybiBwcm9taXNlOwogICAgfQogICAgaWYgKHN0YXRlLm5hdmlnYXRpb24uc3RhdGUgPT09ICJpZGxlIikgewogICAgICBzdGFydE5hdmlnYXRpb24oc3RhdGUuaGlzdG9yeUFjdGlvbiwgc3RhdGUubG9jYXRpb24sIHsKICAgICAgICBzdGFydFVuaW50ZXJydXB0ZWRSZXZhbGlkYXRpb246IHRydWUKICAgICAgfSk7CiAgICAgIHJldHVybiBwcm9taXNlOwogICAgfQogICAgc3RhcnROYXZpZ2F0aW9uKAogICAgICBwZW5kaW5nQWN0aW9uIHx8IHN0YXRlLmhpc3RvcnlBY3Rpb24sCiAgICAgIHN0YXRlLm5hdmlnYXRpb24ubG9jYXRpb24sCiAgICAgIHsKICAgICAgICBvdmVycmlkZU5hdmlnYXRpb246IHN0YXRlLm5hdmlnYXRpb24sCiAgICAgICAgLy8gUHJveHkgdGhyb3VnaCBhbnkgcmVuZGluZyB2aWV3IHRyYW5zaXRpb24KICAgICAgICBlbmFibGVWaWV3VHJhbnNpdGlvbjogcGVuZGluZ1ZpZXdUcmFuc2l0aW9uRW5hYmxlZCA9PT0gdHJ1ZQogICAgICB9CiAgICApOwogICAgcmV0dXJuIHByb21pc2U7CiAgfQogIGFzeW5jIGZ1bmN0aW9uIHN0YXJ0TmF2aWdhdGlvbihoaXN0b3J5QWN0aW9uLCBsb2NhdGlvbjIsIG9wdHMpIHsKICAgIHBlbmRpbmdOYXZpZ2F0aW9uQ29udHJvbGxlciAmJiBwZW5kaW5nTmF2aWdhdGlvbkNvbnRyb2xsZXIuYWJvcnQoKTsKICAgIHBlbmRpbmdOYXZpZ2F0aW9uQ29udHJvbGxlciA9IG51bGw7CiAgICBwZW5kaW5nQWN0aW9uID0gaGlzdG9yeUFjdGlvbjsKICAgIGlzVW5pbnRlcnJ1cHRlZFJldmFsaWRhdGlvbiA9IChvcHRzICYmIG9wdHMuc3RhcnRVbmludGVycnVwdGVkUmV2YWxpZGF0aW9uKSA9PT0gdHJ1ZTsKICAgIHNhdmVTY3JvbGxQb3NpdGlvbihzdGF0ZS5sb2NhdGlvbiwgc3RhdGUubWF0Y2hlcyk7CiAgICBwZW5kaW5nUHJldmVudFNjcm9sbFJlc2V0ID0gKG9wdHMgJiYgb3B0cy5wcmV2ZW50U2Nyb2xsUmVzZXQpID09PSB0cnVlOwogICAgcGVuZGluZ1ZpZXdUcmFuc2l0aW9uRW5hYmxlZCA9IChvcHRzICYmIG9wdHMuZW5hYmxlVmlld1RyYW5zaXRpb24pID09PSB0cnVlOwogICAgbGV0IHJvdXRlc1RvVXNlID0gaW5GbGlnaHREYXRhUm91dGVzIHx8IGRhdGFSb3V0ZXM7CiAgICBsZXQgbG9hZGluZ05hdmlnYXRpb24gPSBvcHRzICYmIG9wdHMub3ZlcnJpZGVOYXZpZ2F0aW9uOwogICAgbGV0IG1hdGNoZXMgPSAob3B0cyA9PSBudWxsID8gdm9pZCAwIDogb3B0cy5pbml0aWFsSHlkcmF0aW9uKSAmJiBzdGF0ZS5tYXRjaGVzICYmIHN0YXRlLm1hdGNoZXMubGVuZ3RoID4gMCAmJiAhaW5pdGlhbE1hdGNoZXNJc0ZPVyA/ICgKICAgICAgLy8gYG1hdGNoUm91dGVzKClgIGhhcyBhbHJlYWR5IGJlZW4gY2FsbGVkIGlmIHdlJ3JlIGluIGhlcmUgdmlhIGByb3V0ZXIuaW5pdGlhbGl6ZSgpYAogICAgICBzdGF0ZS5tYXRjaGVzCiAgICApIDogbWF0Y2hSb3V0ZXMocm91dGVzVG9Vc2UsIGxvY2F0aW9uMiwgYmFzZW5hbWUpOwogICAgbGV0IGZsdXNoU3luYzMgPSAob3B0cyAmJiBvcHRzLmZsdXNoU3luYykgPT09IHRydWU7CiAgICBpZiAobWF0Y2hlcyAmJiBzdGF0ZS5pbml0aWFsaXplZCAmJiAhaXNSZXZhbGlkYXRpb25SZXF1aXJlZCAmJiBpc0hhc2hDaGFuZ2VPbmx5KHN0YXRlLmxvY2F0aW9uLCBsb2NhdGlvbjIpICYmICEob3B0cyAmJiBvcHRzLnN1Ym1pc3Npb24gJiYgaXNNdXRhdGlvbk1ldGhvZChvcHRzLnN1Ym1pc3Npb24uZm9ybU1ldGhvZCkpKSB7CiAgICAgIGNvbXBsZXRlTmF2aWdhdGlvbihsb2NhdGlvbjIsIHsgbWF0Y2hlcyB9LCB7IGZsdXNoU3luYzogZmx1c2hTeW5jMyB9KTsKICAgICAgcmV0dXJuOwogICAgfQogICAgbGV0IGZvZ09mV2FyID0gY2hlY2tGb2dPZldhcihtYXRjaGVzLCByb3V0ZXNUb1VzZSwgbG9jYXRpb24yLnBhdGhuYW1lKTsKICAgIGlmIChmb2dPZldhci5hY3RpdmUgJiYgZm9nT2ZXYXIubWF0Y2hlcykgewogICAgICBtYXRjaGVzID0gZm9nT2ZXYXIubWF0Y2hlczsKICAgIH0KICAgIGlmICghbWF0Y2hlcykgewogICAgICBsZXQgeyBlcnJvciwgbm90Rm91bmRNYXRjaGVzLCByb3V0ZSB9ID0gaGFuZGxlTmF2aWdhdGlvbmFsNDA0KAogICAgICAgIGxvY2F0aW9uMi5wYXRobmFtZQogICAgICApOwogICAgICBjb21wbGV0ZU5hdmlnYXRpb24oCiAgICAgICAgbG9jYXRpb24yLAogICAgICAgIHsKICAgICAgICAgIG1hdGNoZXM6IG5vdEZvdW5kTWF0Y2hlcywKICAgICAgICAgIGxvYWRlckRhdGE6IHt9LAogICAgICAgICAgZXJyb3JzOiB7CiAgICAgICAgICAgIFtyb3V0ZS5pZF06IGVycm9yCiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB7IGZsdXNoU3luYzogZmx1c2hTeW5jMyB9CiAgICAgICk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHBlbmRpbmdOYXZpZ2F0aW9uQ29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTsKICAgIGxldCByZXF1ZXN0ID0gY3JlYXRlQ2xpZW50U2lkZVJlcXVlc3QoCiAgICAgIGluaXQuaGlzdG9yeSwKICAgICAgbG9jYXRpb24yLAogICAgICBwZW5kaW5nTmF2aWdhdGlvbkNvbnRyb2xsZXIuc2lnbmFsLAogICAgICBvcHRzICYmIG9wdHMuc3VibWlzc2lvbgogICAgKTsKICAgIGxldCBzY29wZWRDb250ZXh0ID0gaW5pdC5nZXRDb250ZXh0ID8gYXdhaXQgaW5pdC5nZXRDb250ZXh0KCkgOiBuZXcgUm91dGVyQ29udGV4dFByb3ZpZGVyKCk7CiAgICBsZXQgcGVuZGluZ0FjdGlvblJlc3VsdDsKICAgIGlmIChvcHRzICYmIG9wdHMucGVuZGluZ0Vycm9yKSB7CiAgICAgIHBlbmRpbmdBY3Rpb25SZXN1bHQgPSBbCiAgICAgICAgZmluZE5lYXJlc3RCb3VuZGFyeShtYXRjaGVzKS5yb3V0ZS5pZCwKICAgICAgICB7IHR5cGU6ICJlcnJvciIsIGVycm9yOiBvcHRzLnBlbmRpbmdFcnJvciB9CiAgICAgIF07CiAgICB9IGVsc2UgaWYgKG9wdHMgJiYgb3B0cy5zdWJtaXNzaW9uICYmIGlzTXV0YXRpb25NZXRob2Qob3B0cy5zdWJtaXNzaW9uLmZvcm1NZXRob2QpKSB7CiAgICAgIGxldCBhY3Rpb25SZXN1bHQgPSBhd2FpdCBoYW5kbGVBY3Rpb24oCiAgICAgICAgcmVxdWVzdCwKICAgICAgICBsb2NhdGlvbjIsCiAgICAgICAgb3B0cy5zdWJtaXNzaW9uLAogICAgICAgIG1hdGNoZXMsCiAgICAgICAgc2NvcGVkQ29udGV4dCwKICAgICAgICBmb2dPZldhci5hY3RpdmUsCiAgICAgICAgb3B0cyAmJiBvcHRzLmluaXRpYWxIeWRyYXRpb24gPT09IHRydWUsCiAgICAgICAgeyByZXBsYWNlOiBvcHRzLnJlcGxhY2UsIGZsdXNoU3luYzogZmx1c2hTeW5jMyB9CiAgICAgICk7CiAgICAgIGlmIChhY3Rpb25SZXN1bHQuc2hvcnRDaXJjdWl0ZWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKGFjdGlvblJlc3VsdC5wZW5kaW5nQWN0aW9uUmVzdWx0KSB7CiAgICAgICAgbGV0IFtyb3V0ZUlkLCByZXN1bHRdID0gYWN0aW9uUmVzdWx0LnBlbmRpbmdBY3Rpb25SZXN1bHQ7CiAgICAgICAgaWYgKGlzRXJyb3JSZXN1bHQocmVzdWx0KSAmJiBpc1JvdXRlRXJyb3JSZXNwb25zZShyZXN1bHQuZXJyb3IpICYmIHJlc3VsdC5lcnJvci5zdGF0dXMgPT09IDQwNCkgewogICAgICAgICAgcGVuZGluZ05hdmlnYXRpb25Db250cm9sbGVyID0gbnVsbDsKICAgICAgICAgIGNvbXBsZXRlTmF2aWdhdGlvbihsb2NhdGlvbjIsIHsKICAgICAgICAgICAgbWF0Y2hlczogYWN0aW9uUmVzdWx0Lm1hdGNoZXMsCiAgICAgICAgICAgIGxvYWRlckRhdGE6IHt9LAogICAgICAgICAgICBlcnJvcnM6IHsKICAgICAgICAgICAgICBbcm91dGVJZF06IHJlc3VsdC5lcnJvcgogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAgICAgbWF0Y2hlcyA9IGFjdGlvblJlc3VsdC5tYXRjaGVzIHx8IG1hdGNoZXM7CiAgICAgIHBlbmRpbmdBY3Rpb25SZXN1bHQgPSBhY3Rpb25SZXN1bHQucGVuZGluZ0FjdGlvblJlc3VsdDsKICAgICAgbG9hZGluZ05hdmlnYXRpb24gPSBnZXRMb2FkaW5nTmF2aWdhdGlvbihsb2NhdGlvbjIsIG9wdHMuc3VibWlzc2lvbik7CiAgICAgIGZsdXNoU3luYzMgPSBmYWxzZTsKICAgICAgZm9nT2ZXYXIuYWN0aXZlID0gZmFsc2U7CiAgICAgIHJlcXVlc3QgPSBjcmVhdGVDbGllbnRTaWRlUmVxdWVzdCgKICAgICAgICBpbml0Lmhpc3RvcnksCiAgICAgICAgcmVxdWVzdC51cmwsCiAgICAgICAgcmVxdWVzdC5zaWduYWwKICAgICAgKTsKICAgIH0KICAgIGxldCB7CiAgICAgIHNob3J0Q2lyY3VpdGVkLAogICAgICBtYXRjaGVzOiB1cGRhdGVkTWF0Y2hlcywKICAgICAgbG9hZGVyRGF0YSwKICAgICAgZXJyb3JzCiAgICB9ID0gYXdhaXQgaGFuZGxlTG9hZGVycygKICAgICAgcmVxdWVzdCwKICAgICAgbG9jYXRpb24yLAogICAgICBtYXRjaGVzLAogICAgICBzY29wZWRDb250ZXh0LAogICAgICBmb2dPZldhci5hY3RpdmUsCiAgICAgIGxvYWRpbmdOYXZpZ2F0aW9uLAogICAgICBvcHRzICYmIG9wdHMuc3VibWlzc2lvbiwKICAgICAgb3B0cyAmJiBvcHRzLmZldGNoZXJTdWJtaXNzaW9uLAogICAgICBvcHRzICYmIG9wdHMucmVwbGFjZSwKICAgICAgb3B0cyAmJiBvcHRzLmluaXRpYWxIeWRyYXRpb24gPT09IHRydWUsCiAgICAgIGZsdXNoU3luYzMsCiAgICAgIHBlbmRpbmdBY3Rpb25SZXN1bHQKICAgICk7CiAgICBpZiAoc2hvcnRDaXJjdWl0ZWQpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgcGVuZGluZ05hdmlnYXRpb25Db250cm9sbGVyID0gbnVsbDsKICAgIGNvbXBsZXRlTmF2aWdhdGlvbihsb2NhdGlvbjIsIHsKICAgICAgbWF0Y2hlczogdXBkYXRlZE1hdGNoZXMgfHwgbWF0Y2hlcywKICAgICAgLi4uZ2V0QWN0aW9uRGF0YUZvckNvbW1pdChwZW5kaW5nQWN0aW9uUmVzdWx0KSwKICAgICAgbG9hZGVyRGF0YSwKICAgICAgZXJyb3JzCiAgICB9KTsKICB9CiAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlQWN0aW9uKHJlcXVlc3QsIGxvY2F0aW9uMiwgc3VibWlzc2lvbiwgbWF0Y2hlcywgc2NvcGVkQ29udGV4dCwgaXNGb2dPZldhciwgaW5pdGlhbEh5ZHJhdGlvbiwgb3B0cyA9IHt9KSB7CiAgICBpbnRlcnJ1cHRBY3RpdmVMb2FkcygpOwogICAgbGV0IG5hdmlnYXRpb24gPSBnZXRTdWJtaXR0aW5nTmF2aWdhdGlvbihsb2NhdGlvbjIsIHN1Ym1pc3Npb24pOwogICAgdXBkYXRlU3RhdGUoeyBuYXZpZ2F0aW9uIH0sIHsgZmx1c2hTeW5jOiBvcHRzLmZsdXNoU3luYyA9PT0gdHJ1ZSB9KTsKICAgIGlmIChpc0ZvZ09mV2FyKSB7CiAgICAgIGxldCBkaXNjb3ZlclJlc3VsdCA9IGF3YWl0IGRpc2NvdmVyUm91dGVzKAogICAgICAgIG1hdGNoZXMsCiAgICAgICAgbG9jYXRpb24yLnBhdGhuYW1lLAogICAgICAgIHJlcXVlc3Quc2lnbmFsCiAgICAgICk7CiAgICAgIGlmIChkaXNjb3ZlclJlc3VsdC50eXBlID09PSAiYWJvcnRlZCIpIHsKICAgICAgICByZXR1cm4geyBzaG9ydENpcmN1aXRlZDogdHJ1ZSB9OwogICAgICB9IGVsc2UgaWYgKGRpc2NvdmVyUmVzdWx0LnR5cGUgPT09ICJlcnJvciIpIHsKICAgICAgICBpZiAoZGlzY292ZXJSZXN1bHQucGFydGlhbE1hdGNoZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICBsZXQgeyBtYXRjaGVzOiBtYXRjaGVzMiwgcm91dGUgfSA9IGdldFNob3J0Q2lyY3VpdE1hdGNoZXMoZGF0YVJvdXRlcyk7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBtYXRjaGVzOiBtYXRjaGVzMiwKICAgICAgICAgICAgcGVuZGluZ0FjdGlvblJlc3VsdDogWwogICAgICAgICAgICAgIHJvdXRlLmlkLAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICBlcnJvcjogZGlzY292ZXJSZXN1bHQuZXJyb3IKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIF0KICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIGxldCBib3VuZGFyeUlkID0gZmluZE5lYXJlc3RCb3VuZGFyeShkaXNjb3ZlclJlc3VsdC5wYXJ0aWFsTWF0Y2hlcykucm91dGUuaWQ7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIG1hdGNoZXM6IGRpc2NvdmVyUmVzdWx0LnBhcnRpYWxNYXRjaGVzLAogICAgICAgICAgcGVuZGluZ0FjdGlvblJlc3VsdDogWwogICAgICAgICAgICBib3VuZGFyeUlkLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICBlcnJvcjogZGlzY292ZXJSZXN1bHQuZXJyb3IKICAgICAgICAgICAgfQogICAgICAgICAgXQogICAgICAgIH07CiAgICAgIH0gZWxzZSBpZiAoIWRpc2NvdmVyUmVzdWx0Lm1hdGNoZXMpIHsKICAgICAgICBsZXQgeyBub3RGb3VuZE1hdGNoZXMsIGVycm9yLCByb3V0ZSB9ID0gaGFuZGxlTmF2aWdhdGlvbmFsNDA0KAogICAgICAgICAgbG9jYXRpb24yLnBhdGhuYW1lCiAgICAgICAgKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgbWF0Y2hlczogbm90Rm91bmRNYXRjaGVzLAogICAgICAgICAgcGVuZGluZ0FjdGlvblJlc3VsdDogWwogICAgICAgICAgICByb3V0ZS5pZCwKICAgICAgICAgICAgewogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgZXJyb3IKICAgICAgICAgICAgfQogICAgICAgICAgXQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWF0Y2hlcyA9IGRpc2NvdmVyUmVzdWx0Lm1hdGNoZXM7CiAgICAgIH0KICAgIH0KICAgIGxldCByZXN1bHQ7CiAgICBsZXQgYWN0aW9uTWF0Y2ggPSBnZXRUYXJnZXRNYXRjaChtYXRjaGVzLCBsb2NhdGlvbjIpOwogICAgaWYgKCFhY3Rpb25NYXRjaC5yb3V0ZS5hY3Rpb24gJiYgIWFjdGlvbk1hdGNoLnJvdXRlLmxhenkpIHsKICAgICAgcmVzdWx0ID0gewogICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgZXJyb3I6IGdldEludGVybmFsUm91dGVyRXJyb3IoNDA1LCB7CiAgICAgICAgICBtZXRob2Q6IHJlcXVlc3QubWV0aG9kLAogICAgICAgICAgcGF0aG5hbWU6IGxvY2F0aW9uMi5wYXRobmFtZSwKICAgICAgICAgIHJvdXRlSWQ6IGFjdGlvbk1hdGNoLnJvdXRlLmlkCiAgICAgICAgfSkKICAgICAgfTsKICAgIH0gZWxzZSB7CiAgICAgIGxldCBkc01hdGNoZXMgPSBnZXRUYXJnZXRlZERhdGFTdHJhdGVneU1hdGNoZXMoCiAgICAgICAgbWFwUm91dGVQcm9wZXJ0aWVzMiwKICAgICAgICBtYW5pZmVzdCwKICAgICAgICByZXF1ZXN0LAogICAgICAgIG1hdGNoZXMsCiAgICAgICAgYWN0aW9uTWF0Y2gsCiAgICAgICAgaW5pdGlhbEh5ZHJhdGlvbiA/IFtdIDogaHlkcmF0aW9uUm91dGVQcm9wZXJ0aWVzMiwKICAgICAgICBzY29wZWRDb250ZXh0CiAgICAgICk7CiAgICAgIGxldCByZXN1bHRzID0gYXdhaXQgY2FsbERhdGFTdHJhdGVneSgKICAgICAgICByZXF1ZXN0LAogICAgICAgIGRzTWF0Y2hlcywKICAgICAgICBzY29wZWRDb250ZXh0LAogICAgICAgIG51bGwKICAgICAgKTsKICAgICAgcmVzdWx0ID0gcmVzdWx0c1thY3Rpb25NYXRjaC5yb3V0ZS5pZF07CiAgICAgIGlmICghcmVzdWx0KSB7CiAgICAgICAgZm9yIChsZXQgbWF0Y2ggb2YgbWF0Y2hlcykgewogICAgICAgICAgaWYgKHJlc3VsdHNbbWF0Y2gucm91dGUuaWRdKSB7CiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdHNbbWF0Y2gucm91dGUuaWRdOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHJlcXVlc3Quc2lnbmFsLmFib3J0ZWQpIHsKICAgICAgICByZXR1cm4geyBzaG9ydENpcmN1aXRlZDogdHJ1ZSB9OwogICAgICB9CiAgICB9CiAgICBpZiAoaXNSZWRpcmVjdFJlc3VsdChyZXN1bHQpKSB7CiAgICAgIGxldCByZXBsYWNlMjsKICAgICAgaWYgKG9wdHMgJiYgb3B0cy5yZXBsYWNlICE9IG51bGwpIHsKICAgICAgICByZXBsYWNlMiA9IG9wdHMucmVwbGFjZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBsZXQgbG9jYXRpb24yMiA9IG5vcm1hbGl6ZVJlZGlyZWN0TG9jYXRpb24oCiAgICAgICAgICByZXN1bHQucmVzcG9uc2UuaGVhZGVycy5nZXQoIkxvY2F0aW9uIiksCiAgICAgICAgICBuZXcgVVJMKHJlcXVlc3QudXJsKSwKICAgICAgICAgIGJhc2VuYW1lCiAgICAgICAgKTsKICAgICAgICByZXBsYWNlMiA9IGxvY2F0aW9uMjIgPT09IHN0YXRlLmxvY2F0aW9uLnBhdGhuYW1lICsgc3RhdGUubG9jYXRpb24uc2VhcmNoOwogICAgICB9CiAgICAgIGF3YWl0IHN0YXJ0UmVkaXJlY3ROYXZpZ2F0aW9uKHJlcXVlc3QsIHJlc3VsdCwgdHJ1ZSwgewogICAgICAgIHN1Ym1pc3Npb24sCiAgICAgICAgcmVwbGFjZTogcmVwbGFjZTIKICAgICAgfSk7CiAgICAgIHJldHVybiB7IHNob3J0Q2lyY3VpdGVkOiB0cnVlIH07CiAgICB9CiAgICBpZiAoaXNFcnJvclJlc3VsdChyZXN1bHQpKSB7CiAgICAgIGxldCBib3VuZGFyeU1hdGNoID0gZmluZE5lYXJlc3RCb3VuZGFyeShtYXRjaGVzLCBhY3Rpb25NYXRjaC5yb3V0ZS5pZCk7CiAgICAgIGlmICgob3B0cyAmJiBvcHRzLnJlcGxhY2UpICE9PSB0cnVlKSB7CiAgICAgICAgcGVuZGluZ0FjdGlvbiA9ICJQVVNIIjsKICAgICAgfQogICAgICByZXR1cm4gewogICAgICAgIG1hdGNoZXMsCiAgICAgICAgcGVuZGluZ0FjdGlvblJlc3VsdDogWwogICAgICAgICAgYm91bmRhcnlNYXRjaC5yb3V0ZS5pZCwKICAgICAgICAgIHJlc3VsdCwKICAgICAgICAgIGFjdGlvbk1hdGNoLnJvdXRlLmlkCiAgICAgICAgXQogICAgICB9OwogICAgfQogICAgcmV0dXJuIHsKICAgICAgbWF0Y2hlcywKICAgICAgcGVuZGluZ0FjdGlvblJlc3VsdDogW2FjdGlvbk1hdGNoLnJvdXRlLmlkLCByZXN1bHRdCiAgICB9OwogIH0KICBhc3luYyBmdW5jdGlvbiBoYW5kbGVMb2FkZXJzKHJlcXVlc3QsIGxvY2F0aW9uMiwgbWF0Y2hlcywgc2NvcGVkQ29udGV4dCwgaXNGb2dPZldhciwgb3ZlcnJpZGVOYXZpZ2F0aW9uLCBzdWJtaXNzaW9uLCBmZXRjaGVyU3VibWlzc2lvbiwgcmVwbGFjZTIsIGluaXRpYWxIeWRyYXRpb24sIGZsdXNoU3luYzMsIHBlbmRpbmdBY3Rpb25SZXN1bHQpIHsKICAgIGxldCBsb2FkaW5nTmF2aWdhdGlvbiA9IG92ZXJyaWRlTmF2aWdhdGlvbiB8fCBnZXRMb2FkaW5nTmF2aWdhdGlvbihsb2NhdGlvbjIsIHN1Ym1pc3Npb24pOwogICAgbGV0IGFjdGl2ZVN1Ym1pc3Npb24gPSBzdWJtaXNzaW9uIHx8IGZldGNoZXJTdWJtaXNzaW9uIHx8IGdldFN1Ym1pc3Npb25Gcm9tTmF2aWdhdGlvbihsb2FkaW5nTmF2aWdhdGlvbik7CiAgICBsZXQgc2hvdWxkVXBkYXRlTmF2aWdhdGlvblN0YXRlID0gIWlzVW5pbnRlcnJ1cHRlZFJldmFsaWRhdGlvbiAmJiAhaW5pdGlhbEh5ZHJhdGlvbjsKICAgIGlmIChpc0ZvZ09mV2FyKSB7CiAgICAgIGlmIChzaG91bGRVcGRhdGVOYXZpZ2F0aW9uU3RhdGUpIHsKICAgICAgICBsZXQgYWN0aW9uRGF0YSA9IGdldFVwZGF0ZWRBY3Rpb25EYXRhKHBlbmRpbmdBY3Rpb25SZXN1bHQpOwogICAgICAgIHVwZGF0ZVN0YXRlKAogICAgICAgICAgewogICAgICAgICAgICBuYXZpZ2F0aW9uOiBsb2FkaW5nTmF2aWdhdGlvbiwKICAgICAgICAgICAgLi4uYWN0aW9uRGF0YSAhPT0gdm9pZCAwID8geyBhY3Rpb25EYXRhIH0gOiB7fQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgZmx1c2hTeW5jOiBmbHVzaFN5bmMzCiAgICAgICAgICB9CiAgICAgICAgKTsKICAgICAgfQogICAgICBsZXQgZGlzY292ZXJSZXN1bHQgPSBhd2FpdCBkaXNjb3ZlclJvdXRlcygKICAgICAgICBtYXRjaGVzLAogICAgICAgIGxvY2F0aW9uMi5wYXRobmFtZSwKICAgICAgICByZXF1ZXN0LnNpZ25hbAogICAgICApOwogICAgICBpZiAoZGlzY292ZXJSZXN1bHQudHlwZSA9PT0gImFib3J0ZWQiKSB7CiAgICAgICAgcmV0dXJuIHsgc2hvcnRDaXJjdWl0ZWQ6IHRydWUgfTsKICAgICAgfSBlbHNlIGlmIChkaXNjb3ZlclJlc3VsdC50eXBlID09PSAiZXJyb3IiKSB7CiAgICAgICAgaWYgKGRpc2NvdmVyUmVzdWx0LnBhcnRpYWxNYXRjaGVzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgbGV0IHsgbWF0Y2hlczogbWF0Y2hlczIsIHJvdXRlIH0gPSBnZXRTaG9ydENpcmN1aXRNYXRjaGVzKGRhdGFSb3V0ZXMpOwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbWF0Y2hlczogbWF0Y2hlczIsCiAgICAgICAgICAgIGxvYWRlckRhdGE6IHt9LAogICAgICAgICAgICBlcnJvcnM6IHsKICAgICAgICAgICAgICBbcm91dGUuaWRdOiBkaXNjb3ZlclJlc3VsdC5lcnJvcgogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICBsZXQgYm91bmRhcnlJZCA9IGZpbmROZWFyZXN0Qm91bmRhcnkoZGlzY292ZXJSZXN1bHQucGFydGlhbE1hdGNoZXMpLnJvdXRlLmlkOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICBtYXRjaGVzOiBkaXNjb3ZlclJlc3VsdC5wYXJ0aWFsTWF0Y2hlcywKICAgICAgICAgIGxvYWRlckRhdGE6IHt9LAogICAgICAgICAgZXJyb3JzOiB7CiAgICAgICAgICAgIFtib3VuZGFyeUlkXTogZGlzY292ZXJSZXN1bHQuZXJyb3IKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9IGVsc2UgaWYgKCFkaXNjb3ZlclJlc3VsdC5tYXRjaGVzKSB7CiAgICAgICAgbGV0IHsgZXJyb3IsIG5vdEZvdW5kTWF0Y2hlcywgcm91dGUgfSA9IGhhbmRsZU5hdmlnYXRpb25hbDQwNCgKICAgICAgICAgIGxvY2F0aW9uMi5wYXRobmFtZQogICAgICAgICk7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIG1hdGNoZXM6IG5vdEZvdW5kTWF0Y2hlcywKICAgICAgICAgIGxvYWRlckRhdGE6IHt9LAogICAgICAgICAgZXJyb3JzOiB7CiAgICAgICAgICAgIFtyb3V0ZS5pZF06IGVycm9yCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICBtYXRjaGVzID0gZGlzY292ZXJSZXN1bHQubWF0Y2hlczsKICAgICAgfQogICAgfQogICAgbGV0IHJvdXRlc1RvVXNlID0gaW5GbGlnaHREYXRhUm91dGVzIHx8IGRhdGFSb3V0ZXM7CiAgICBsZXQgeyBkc01hdGNoZXMsIHJldmFsaWRhdGluZ0ZldGNoZXJzIH0gPSBnZXRNYXRjaGVzVG9Mb2FkKAogICAgICByZXF1ZXN0LAogICAgICBzY29wZWRDb250ZXh0LAogICAgICBtYXBSb3V0ZVByb3BlcnRpZXMyLAogICAgICBtYW5pZmVzdCwKICAgICAgaW5pdC5oaXN0b3J5LAogICAgICBzdGF0ZSwKICAgICAgbWF0Y2hlcywKICAgICAgYWN0aXZlU3VibWlzc2lvbiwKICAgICAgbG9jYXRpb24yLAogICAgICBpbml0aWFsSHlkcmF0aW9uID8gW10gOiBoeWRyYXRpb25Sb3V0ZVByb3BlcnRpZXMyLAogICAgICBpbml0aWFsSHlkcmF0aW9uID09PSB0cnVlLAogICAgICBpc1JldmFsaWRhdGlvblJlcXVpcmVkLAogICAgICBjYW5jZWxsZWRGZXRjaGVyTG9hZHMsCiAgICAgIGZldGNoZXJzUXVldWVkRm9yRGVsZXRpb24sCiAgICAgIGZldGNoTG9hZE1hdGNoZXMsCiAgICAgIGZldGNoUmVkaXJlY3RJZHMsCiAgICAgIHJvdXRlc1RvVXNlLAogICAgICBiYXNlbmFtZSwKICAgICAgaW5pdC5wYXRjaFJvdXRlc09uTmF2aWdhdGlvbiAhPSBudWxsLAogICAgICBwZW5kaW5nQWN0aW9uUmVzdWx0CiAgICApOwogICAgcGVuZGluZ05hdmlnYXRpb25Mb2FkSWQgPSArK2luY3JlbWVudGluZ0xvYWRJZDsKICAgIGlmICghaW5pdC5kYXRhU3RyYXRlZ3kgJiYgIWRzTWF0Y2hlcy5zb21lKChtKSA9PiBtLnNob3VsZExvYWQpICYmICFkc01hdGNoZXMuc29tZSgobSkgPT4gbS5yb3V0ZS5taWRkbGV3YXJlKSAmJiByZXZhbGlkYXRpbmdGZXRjaGVycy5sZW5ndGggPT09IDApIHsKICAgICAgbGV0IHVwZGF0ZWRGZXRjaGVyczIgPSBtYXJrRmV0Y2hSZWRpcmVjdHNEb25lKCk7CiAgICAgIGNvbXBsZXRlTmF2aWdhdGlvbigKICAgICAgICBsb2NhdGlvbjIsCiAgICAgICAgewogICAgICAgICAgbWF0Y2hlcywKICAgICAgICAgIGxvYWRlckRhdGE6IHt9LAogICAgICAgICAgLy8gQ29tbWl0IHBlbmRpbmcgZXJyb3IgaWYgd2UncmUgc2hvcnQgY2lyY3VpdGluZwogICAgICAgICAgZXJyb3JzOiBwZW5kaW5nQWN0aW9uUmVzdWx0ICYmIGlzRXJyb3JSZXN1bHQocGVuZGluZ0FjdGlvblJlc3VsdFsxXSkgPyB7IFtwZW5kaW5nQWN0aW9uUmVzdWx0WzBdXTogcGVuZGluZ0FjdGlvblJlc3VsdFsxXS5lcnJvciB9IDogbnVsbCwKICAgICAgICAgIC4uLmdldEFjdGlvbkRhdGFGb3JDb21taXQocGVuZGluZ0FjdGlvblJlc3VsdCksCiAgICAgICAgICAuLi51cGRhdGVkRmV0Y2hlcnMyID8geyBmZXRjaGVyczogbmV3IE1hcChzdGF0ZS5mZXRjaGVycykgfSA6IHt9CiAgICAgICAgfSwKICAgICAgICB7IGZsdXNoU3luYzogZmx1c2hTeW5jMyB9CiAgICAgICk7CiAgICAgIHJldHVybiB7IHNob3J0Q2lyY3VpdGVkOiB0cnVlIH07CiAgICB9CiAgICBpZiAoc2hvdWxkVXBkYXRlTmF2aWdhdGlvblN0YXRlKSB7CiAgICAgIGxldCB1cGRhdGVzID0ge307CiAgICAgIGlmICghaXNGb2dPZldhcikgewogICAgICAgIHVwZGF0ZXMubmF2aWdhdGlvbiA9IGxvYWRpbmdOYXZpZ2F0aW9uOwogICAgICAgIGxldCBhY3Rpb25EYXRhID0gZ2V0VXBkYXRlZEFjdGlvbkRhdGEocGVuZGluZ0FjdGlvblJlc3VsdCk7CiAgICAgICAgaWYgKGFjdGlvbkRhdGEgIT09IHZvaWQgMCkgewogICAgICAgICAgdXBkYXRlcy5hY3Rpb25EYXRhID0gYWN0aW9uRGF0YTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHJldmFsaWRhdGluZ0ZldGNoZXJzLmxlbmd0aCA+IDApIHsKICAgICAgICB1cGRhdGVzLmZldGNoZXJzID0gZ2V0VXBkYXRlZFJldmFsaWRhdGluZ0ZldGNoZXJzKHJldmFsaWRhdGluZ0ZldGNoZXJzKTsKICAgICAgfQogICAgICB1cGRhdGVTdGF0ZSh1cGRhdGVzLCB7IGZsdXNoU3luYzogZmx1c2hTeW5jMyB9KTsKICAgIH0KICAgIHJldmFsaWRhdGluZ0ZldGNoZXJzLmZvckVhY2goKHJmKSA9PiB7CiAgICAgIGFib3J0RmV0Y2hlcihyZi5rZXkpOwogICAgICBpZiAocmYuY29udHJvbGxlcikgewogICAgICAgIGZldGNoQ29udHJvbGxlcnMuc2V0KHJmLmtleSwgcmYuY29udHJvbGxlcik7CiAgICAgIH0KICAgIH0pOwogICAgbGV0IGFib3J0UGVuZGluZ0ZldGNoUmV2YWxpZGF0aW9ucyA9ICgpID0+IHJldmFsaWRhdGluZ0ZldGNoZXJzLmZvckVhY2goKGYpID0+IGFib3J0RmV0Y2hlcihmLmtleSkpOwogICAgaWYgKHBlbmRpbmdOYXZpZ2F0aW9uQ29udHJvbGxlcikgewogICAgICBwZW5kaW5nTmF2aWdhdGlvbkNvbnRyb2xsZXIuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoCiAgICAgICAgImFib3J0IiwKICAgICAgICBhYm9ydFBlbmRpbmdGZXRjaFJldmFsaWRhdGlvbnMKICAgICAgKTsKICAgIH0KICAgIGxldCB7IGxvYWRlclJlc3VsdHMsIGZldGNoZXJSZXN1bHRzIH0gPSBhd2FpdCBjYWxsTG9hZGVyc0FuZE1heWJlUmVzb2x2ZURhdGEoCiAgICAgIGRzTWF0Y2hlcywKICAgICAgcmV2YWxpZGF0aW5nRmV0Y2hlcnMsCiAgICAgIHJlcXVlc3QsCiAgICAgIHNjb3BlZENvbnRleHQKICAgICk7CiAgICBpZiAocmVxdWVzdC5zaWduYWwuYWJvcnRlZCkgewogICAgICByZXR1cm4geyBzaG9ydENpcmN1aXRlZDogdHJ1ZSB9OwogICAgfQogICAgaWYgKHBlbmRpbmdOYXZpZ2F0aW9uQ29udHJvbGxlcikgewogICAgICBwZW5kaW5nTmF2aWdhdGlvbkNvbnRyb2xsZXIuc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoCiAgICAgICAgImFib3J0IiwKICAgICAgICBhYm9ydFBlbmRpbmdGZXRjaFJldmFsaWRhdGlvbnMKICAgICAgKTsKICAgIH0KICAgIHJldmFsaWRhdGluZ0ZldGNoZXJzLmZvckVhY2goKHJmKSA9PiBmZXRjaENvbnRyb2xsZXJzLmRlbGV0ZShyZi5rZXkpKTsKICAgIGxldCByZWRpcmVjdDIgPSBmaW5kUmVkaXJlY3QobG9hZGVyUmVzdWx0cyk7CiAgICBpZiAocmVkaXJlY3QyKSB7CiAgICAgIGF3YWl0IHN0YXJ0UmVkaXJlY3ROYXZpZ2F0aW9uKHJlcXVlc3QsIHJlZGlyZWN0Mi5yZXN1bHQsIHRydWUsIHsKICAgICAgICByZXBsYWNlOiByZXBsYWNlMgogICAgICB9KTsKICAgICAgcmV0dXJuIHsgc2hvcnRDaXJjdWl0ZWQ6IHRydWUgfTsKICAgIH0KICAgIHJlZGlyZWN0MiA9IGZpbmRSZWRpcmVjdChmZXRjaGVyUmVzdWx0cyk7CiAgICBpZiAocmVkaXJlY3QyKSB7CiAgICAgIGZldGNoUmVkaXJlY3RJZHMuYWRkKHJlZGlyZWN0Mi5rZXkpOwogICAgICBhd2FpdCBzdGFydFJlZGlyZWN0TmF2aWdhdGlvbihyZXF1ZXN0LCByZWRpcmVjdDIucmVzdWx0LCB0cnVlLCB7CiAgICAgICAgcmVwbGFjZTogcmVwbGFjZTIKICAgICAgfSk7CiAgICAgIHJldHVybiB7IHNob3J0Q2lyY3VpdGVkOiB0cnVlIH07CiAgICB9CiAgICBsZXQgeyBsb2FkZXJEYXRhLCBlcnJvcnMgfSA9IHByb2Nlc3NMb2FkZXJEYXRhKAogICAgICBzdGF0ZSwKICAgICAgbWF0Y2hlcywKICAgICAgbG9hZGVyUmVzdWx0cywKICAgICAgcGVuZGluZ0FjdGlvblJlc3VsdCwKICAgICAgcmV2YWxpZGF0aW5nRmV0Y2hlcnMsCiAgICAgIGZldGNoZXJSZXN1bHRzCiAgICApOwogICAgaWYgKGluaXRpYWxIeWRyYXRpb24gJiYgc3RhdGUuZXJyb3JzKSB7CiAgICAgIGVycm9ycyA9IHsgLi4uc3RhdGUuZXJyb3JzLCAuLi5lcnJvcnMgfTsKICAgIH0KICAgIGxldCB1cGRhdGVkRmV0Y2hlcnMgPSBtYXJrRmV0Y2hSZWRpcmVjdHNEb25lKCk7CiAgICBsZXQgZGlkQWJvcnRGZXRjaExvYWRzID0gYWJvcnRTdGFsZUZldGNoTG9hZHMocGVuZGluZ05hdmlnYXRpb25Mb2FkSWQpOwogICAgbGV0IHNob3VsZFVwZGF0ZUZldGNoZXJzID0gdXBkYXRlZEZldGNoZXJzIHx8IGRpZEFib3J0RmV0Y2hMb2FkcyB8fCByZXZhbGlkYXRpbmdGZXRjaGVycy5sZW5ndGggPiAwOwogICAgcmV0dXJuIHsKICAgICAgbWF0Y2hlcywKICAgICAgbG9hZGVyRGF0YSwKICAgICAgZXJyb3JzLAogICAgICAuLi5zaG91bGRVcGRhdGVGZXRjaGVycyA/IHsgZmV0Y2hlcnM6IG5ldyBNYXAoc3RhdGUuZmV0Y2hlcnMpIH0gOiB7fQogICAgfTsKICB9CiAgZnVuY3Rpb24gZ2V0VXBkYXRlZEFjdGlvbkRhdGEocGVuZGluZ0FjdGlvblJlc3VsdCkgewogICAgaWYgKHBlbmRpbmdBY3Rpb25SZXN1bHQgJiYgIWlzRXJyb3JSZXN1bHQocGVuZGluZ0FjdGlvblJlc3VsdFsxXSkpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBbcGVuZGluZ0FjdGlvblJlc3VsdFswXV06IHBlbmRpbmdBY3Rpb25SZXN1bHRbMV0uZGF0YQogICAgICB9OwogICAgfSBlbHNlIGlmIChzdGF0ZS5hY3Rpb25EYXRhKSB7CiAgICAgIGlmIChPYmplY3Qua2V5cyhzdGF0ZS5hY3Rpb25EYXRhKS5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gc3RhdGUuYWN0aW9uRGF0YTsKICAgICAgfQogICAgfQogIH0KICBmdW5jdGlvbiBnZXRVcGRhdGVkUmV2YWxpZGF0aW5nRmV0Y2hlcnMocmV2YWxpZGF0aW5nRmV0Y2hlcnMpIHsKICAgIHJldmFsaWRhdGluZ0ZldGNoZXJzLmZvckVhY2goKHJmKSA9PiB7CiAgICAgIGxldCBmZXRjaGVyID0gc3RhdGUuZmV0Y2hlcnMuZ2V0KHJmLmtleSk7CiAgICAgIGxldCByZXZhbGlkYXRpbmdGZXRjaGVyID0gZ2V0TG9hZGluZ0ZldGNoZXIoCiAgICAgICAgdm9pZCAwLAogICAgICAgIGZldGNoZXIgPyBmZXRjaGVyLmRhdGEgOiB2b2lkIDAKICAgICAgKTsKICAgICAgc3RhdGUuZmV0Y2hlcnMuc2V0KHJmLmtleSwgcmV2YWxpZGF0aW5nRmV0Y2hlcik7CiAgICB9KTsKICAgIHJldHVybiBuZXcgTWFwKHN0YXRlLmZldGNoZXJzKTsKICB9CiAgYXN5bmMgZnVuY3Rpb24gZmV0Y2gyKGtleSwgcm91dGVJZCwgaHJlZjIsIG9wdHMpIHsKICAgIGFib3J0RmV0Y2hlcihrZXkpOwogICAgbGV0IGZsdXNoU3luYzMgPSAob3B0cyAmJiBvcHRzLmZsdXNoU3luYykgPT09IHRydWU7CiAgICBsZXQgcm91dGVzVG9Vc2UgPSBpbkZsaWdodERhdGFSb3V0ZXMgfHwgZGF0YVJvdXRlczsKICAgIGxldCBub3JtYWxpemVkUGF0aCA9IG5vcm1hbGl6ZVRvKAogICAgICBzdGF0ZS5sb2NhdGlvbiwKICAgICAgc3RhdGUubWF0Y2hlcywKICAgICAgYmFzZW5hbWUsCiAgICAgIGhyZWYyLAogICAgICByb3V0ZUlkLAogICAgICBvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLnJlbGF0aXZlCiAgICApOwogICAgbGV0IG1hdGNoZXMgPSBtYXRjaFJvdXRlcyhyb3V0ZXNUb1VzZSwgbm9ybWFsaXplZFBhdGgsIGJhc2VuYW1lKTsKICAgIGxldCBmb2dPZldhciA9IGNoZWNrRm9nT2ZXYXIobWF0Y2hlcywgcm91dGVzVG9Vc2UsIG5vcm1hbGl6ZWRQYXRoKTsKICAgIGlmIChmb2dPZldhci5hY3RpdmUgJiYgZm9nT2ZXYXIubWF0Y2hlcykgewogICAgICBtYXRjaGVzID0gZm9nT2ZXYXIubWF0Y2hlczsKICAgIH0KICAgIGlmICghbWF0Y2hlcykgewogICAgICBzZXRGZXRjaGVyRXJyb3IoCiAgICAgICAga2V5LAogICAgICAgIHJvdXRlSWQsCiAgICAgICAgZ2V0SW50ZXJuYWxSb3V0ZXJFcnJvcig0MDQsIHsgcGF0aG5hbWU6IG5vcm1hbGl6ZWRQYXRoIH0pLAogICAgICAgIHsgZmx1c2hTeW5jOiBmbHVzaFN5bmMzIH0KICAgICAgKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgbGV0IHsgcGF0aCwgc3VibWlzc2lvbiwgZXJyb3IgfSA9IG5vcm1hbGl6ZU5hdmlnYXRlT3B0aW9ucygKICAgICAgdHJ1ZSwKICAgICAgbm9ybWFsaXplZFBhdGgsCiAgICAgIG9wdHMKICAgICk7CiAgICBpZiAoZXJyb3IpIHsKICAgICAgc2V0RmV0Y2hlckVycm9yKGtleSwgcm91dGVJZCwgZXJyb3IsIHsgZmx1c2hTeW5jOiBmbHVzaFN5bmMzIH0pOwogICAgICByZXR1cm47CiAgICB9CiAgICBsZXQgc2NvcGVkQ29udGV4dCA9IGluaXQuZ2V0Q29udGV4dCA/IGF3YWl0IGluaXQuZ2V0Q29udGV4dCgpIDogbmV3IFJvdXRlckNvbnRleHRQcm92aWRlcigpOwogICAgbGV0IHByZXZlbnRTY3JvbGxSZXNldCA9IChvcHRzICYmIG9wdHMucHJldmVudFNjcm9sbFJlc2V0KSA9PT0gdHJ1ZTsKICAgIGlmIChzdWJtaXNzaW9uICYmIGlzTXV0YXRpb25NZXRob2Qoc3VibWlzc2lvbi5mb3JtTWV0aG9kKSkgewogICAgICBhd2FpdCBoYW5kbGVGZXRjaGVyQWN0aW9uKAogICAgICAgIGtleSwKICAgICAgICByb3V0ZUlkLAogICAgICAgIHBhdGgsCiAgICAgICAgbWF0Y2hlcywKICAgICAgICBzY29wZWRDb250ZXh0LAogICAgICAgIGZvZ09mV2FyLmFjdGl2ZSwKICAgICAgICBmbHVzaFN5bmMzLAogICAgICAgIHByZXZlbnRTY3JvbGxSZXNldCwKICAgICAgICBzdWJtaXNzaW9uCiAgICAgICk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGZldGNoTG9hZE1hdGNoZXMuc2V0KGtleSwgeyByb3V0ZUlkLCBwYXRoIH0pOwogICAgYXdhaXQgaGFuZGxlRmV0Y2hlckxvYWRlcigKICAgICAga2V5LAogICAgICByb3V0ZUlkLAogICAgICBwYXRoLAogICAgICBtYXRjaGVzLAogICAgICBzY29wZWRDb250ZXh0LAogICAgICBmb2dPZldhci5hY3RpdmUsCiAgICAgIGZsdXNoU3luYzMsCiAgICAgIHByZXZlbnRTY3JvbGxSZXNldCwKICAgICAgc3VibWlzc2lvbgogICAgKTsKICB9CiAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlRmV0Y2hlckFjdGlvbihrZXksIHJvdXRlSWQsIHBhdGgsIHJlcXVlc3RNYXRjaGVzLCBzY29wZWRDb250ZXh0LCBpc0ZvZ09mV2FyLCBmbHVzaFN5bmMzLCBwcmV2ZW50U2Nyb2xsUmVzZXQsIHN1Ym1pc3Npb24pIHsKICAgIGludGVycnVwdEFjdGl2ZUxvYWRzKCk7CiAgICBmZXRjaExvYWRNYXRjaGVzLmRlbGV0ZShrZXkpOwogICAgbGV0IGV4aXN0aW5nRmV0Y2hlciA9IHN0YXRlLmZldGNoZXJzLmdldChrZXkpOwogICAgdXBkYXRlRmV0Y2hlclN0YXRlKGtleSwgZ2V0U3VibWl0dGluZ0ZldGNoZXIoc3VibWlzc2lvbiwgZXhpc3RpbmdGZXRjaGVyKSwgewogICAgICBmbHVzaFN5bmM6IGZsdXNoU3luYzMKICAgIH0pOwogICAgbGV0IGFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTsKICAgIGxldCBmZXRjaFJlcXVlc3QgPSBjcmVhdGVDbGllbnRTaWRlUmVxdWVzdCgKICAgICAgaW5pdC5oaXN0b3J5LAogICAgICBwYXRoLAogICAgICBhYm9ydENvbnRyb2xsZXIuc2lnbmFsLAogICAgICBzdWJtaXNzaW9uCiAgICApOwogICAgaWYgKGlzRm9nT2ZXYXIpIHsKICAgICAgbGV0IGRpc2NvdmVyUmVzdWx0ID0gYXdhaXQgZGlzY292ZXJSb3V0ZXMoCiAgICAgICAgcmVxdWVzdE1hdGNoZXMsCiAgICAgICAgbmV3IFVSTChmZXRjaFJlcXVlc3QudXJsKS5wYXRobmFtZSwKICAgICAgICBmZXRjaFJlcXVlc3Quc2lnbmFsLAogICAgICAgIGtleQogICAgICApOwogICAgICBpZiAoZGlzY292ZXJSZXN1bHQudHlwZSA9PT0gImFib3J0ZWQiKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKGRpc2NvdmVyUmVzdWx0LnR5cGUgPT09ICJlcnJvciIpIHsKICAgICAgICBzZXRGZXRjaGVyRXJyb3Ioa2V5LCByb3V0ZUlkLCBkaXNjb3ZlclJlc3VsdC5lcnJvciwgeyBmbHVzaFN5bmM6IGZsdXNoU3luYzMgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKCFkaXNjb3ZlclJlc3VsdC5tYXRjaGVzKSB7CiAgICAgICAgc2V0RmV0Y2hlckVycm9yKAogICAgICAgICAga2V5LAogICAgICAgICAgcm91dGVJZCwKICAgICAgICAgIGdldEludGVybmFsUm91dGVyRXJyb3IoNDA0LCB7IHBhdGhuYW1lOiBwYXRoIH0pLAogICAgICAgICAgeyBmbHVzaFN5bmM6IGZsdXNoU3luYzMgfQogICAgICAgICk7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgewogICAgICAgIHJlcXVlc3RNYXRjaGVzID0gZGlzY292ZXJSZXN1bHQubWF0Y2hlczsKICAgICAgfQogICAgfQogICAgbGV0IG1hdGNoID0gZ2V0VGFyZ2V0TWF0Y2gocmVxdWVzdE1hdGNoZXMsIHBhdGgpOwogICAgaWYgKCFtYXRjaC5yb3V0ZS5hY3Rpb24gJiYgIW1hdGNoLnJvdXRlLmxhenkpIHsKICAgICAgbGV0IGVycm9yID0gZ2V0SW50ZXJuYWxSb3V0ZXJFcnJvcig0MDUsIHsKICAgICAgICBtZXRob2Q6IHN1Ym1pc3Npb24uZm9ybU1ldGhvZCwKICAgICAgICBwYXRobmFtZTogcGF0aCwKICAgICAgICByb3V0ZUlkCiAgICAgIH0pOwogICAgICBzZXRGZXRjaGVyRXJyb3Ioa2V5LCByb3V0ZUlkLCBlcnJvciwgeyBmbHVzaFN5bmM6IGZsdXNoU3luYzMgfSk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGZldGNoQ29udHJvbGxlcnMuc2V0KGtleSwgYWJvcnRDb250cm9sbGVyKTsKICAgIGxldCBvcmlnaW5hdGluZ0xvYWRJZCA9IGluY3JlbWVudGluZ0xvYWRJZDsKICAgIGxldCBmZXRjaE1hdGNoZXMgPSBnZXRUYXJnZXRlZERhdGFTdHJhdGVneU1hdGNoZXMoCiAgICAgIG1hcFJvdXRlUHJvcGVydGllczIsCiAgICAgIG1hbmlmZXN0LAogICAgICBmZXRjaFJlcXVlc3QsCiAgICAgIHJlcXVlc3RNYXRjaGVzLAogICAgICBtYXRjaCwKICAgICAgaHlkcmF0aW9uUm91dGVQcm9wZXJ0aWVzMiwKICAgICAgc2NvcGVkQ29udGV4dAogICAgKTsKICAgIGxldCBhY3Rpb25SZXN1bHRzID0gYXdhaXQgY2FsbERhdGFTdHJhdGVneSgKICAgICAgZmV0Y2hSZXF1ZXN0LAogICAgICBmZXRjaE1hdGNoZXMsCiAgICAgIHNjb3BlZENvbnRleHQsCiAgICAgIGtleQogICAgKTsKICAgIGxldCBhY3Rpb25SZXN1bHQgPSBhY3Rpb25SZXN1bHRzW21hdGNoLnJvdXRlLmlkXTsKICAgIGlmIChmZXRjaFJlcXVlc3Quc2lnbmFsLmFib3J0ZWQpIHsKICAgICAgaWYgKGZldGNoQ29udHJvbGxlcnMuZ2V0KGtleSkgPT09IGFib3J0Q29udHJvbGxlcikgewogICAgICAgIGZldGNoQ29udHJvbGxlcnMuZGVsZXRlKGtleSk7CiAgICAgIH0KICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKGZldGNoZXJzUXVldWVkRm9yRGVsZXRpb24uaGFzKGtleSkpIHsKICAgICAgaWYgKGlzUmVkaXJlY3RSZXN1bHQoYWN0aW9uUmVzdWx0KSB8fCBpc0Vycm9yUmVzdWx0KGFjdGlvblJlc3VsdCkpIHsKICAgICAgICB1cGRhdGVGZXRjaGVyU3RhdGUoa2V5LCBnZXREb25lRmV0Y2hlcih2b2lkIDApKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmIChpc1JlZGlyZWN0UmVzdWx0KGFjdGlvblJlc3VsdCkpIHsKICAgICAgICBmZXRjaENvbnRyb2xsZXJzLmRlbGV0ZShrZXkpOwogICAgICAgIGlmIChwZW5kaW5nTmF2aWdhdGlvbkxvYWRJZCA+IG9yaWdpbmF0aW5nTG9hZElkKSB7CiAgICAgICAgICB1cGRhdGVGZXRjaGVyU3RhdGUoa2V5LCBnZXREb25lRmV0Y2hlcih2b2lkIDApKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZmV0Y2hSZWRpcmVjdElkcy5hZGQoa2V5KTsKICAgICAgICAgIHVwZGF0ZUZldGNoZXJTdGF0ZShrZXksIGdldExvYWRpbmdGZXRjaGVyKHN1Ym1pc3Npb24pKTsKICAgICAgICAgIHJldHVybiBzdGFydFJlZGlyZWN0TmF2aWdhdGlvbihmZXRjaFJlcXVlc3QsIGFjdGlvblJlc3VsdCwgZmFsc2UsIHsKICAgICAgICAgICAgZmV0Y2hlclN1Ym1pc3Npb246IHN1Ym1pc3Npb24sCiAgICAgICAgICAgIHByZXZlbnRTY3JvbGxSZXNldAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChpc0Vycm9yUmVzdWx0KGFjdGlvblJlc3VsdCkpIHsKICAgICAgICBzZXRGZXRjaGVyRXJyb3Ioa2V5LCByb3V0ZUlkLCBhY3Rpb25SZXN1bHQuZXJyb3IpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfQogICAgbGV0IG5leHRMb2NhdGlvbiA9IHN0YXRlLm5hdmlnYXRpb24ubG9jYXRpb24gfHwgc3RhdGUubG9jYXRpb247CiAgICBsZXQgcmV2YWxpZGF0aW9uUmVxdWVzdCA9IGNyZWF0ZUNsaWVudFNpZGVSZXF1ZXN0KAogICAgICBpbml0Lmhpc3RvcnksCiAgICAgIG5leHRMb2NhdGlvbiwKICAgICAgYWJvcnRDb250cm9sbGVyLnNpZ25hbAogICAgKTsKICAgIGxldCByb3V0ZXNUb1VzZSA9IGluRmxpZ2h0RGF0YVJvdXRlcyB8fCBkYXRhUm91dGVzOwogICAgbGV0IG1hdGNoZXMgPSBzdGF0ZS5uYXZpZ2F0aW9uLnN0YXRlICE9PSAiaWRsZSIgPyBtYXRjaFJvdXRlcyhyb3V0ZXNUb1VzZSwgc3RhdGUubmF2aWdhdGlvbi5sb2NhdGlvbiwgYmFzZW5hbWUpIDogc3RhdGUubWF0Y2hlczsKICAgIGludmFyaWFudChtYXRjaGVzLCAiRGlkbid0IGZpbmQgYW55IG1hdGNoZXMgYWZ0ZXIgZmV0Y2hlciBhY3Rpb24iKTsKICAgIGxldCBsb2FkSWQgPSArK2luY3JlbWVudGluZ0xvYWRJZDsKICAgIGZldGNoUmVsb2FkSWRzLnNldChrZXksIGxvYWRJZCk7CiAgICBsZXQgbG9hZEZldGNoZXIgPSBnZXRMb2FkaW5nRmV0Y2hlcihzdWJtaXNzaW9uLCBhY3Rpb25SZXN1bHQuZGF0YSk7CiAgICBzdGF0ZS5mZXRjaGVycy5zZXQoa2V5LCBsb2FkRmV0Y2hlcik7CiAgICBsZXQgeyBkc01hdGNoZXMsIHJldmFsaWRhdGluZ0ZldGNoZXJzIH0gPSBnZXRNYXRjaGVzVG9Mb2FkKAogICAgICByZXZhbGlkYXRpb25SZXF1ZXN0LAogICAgICBzY29wZWRDb250ZXh0LAogICAgICBtYXBSb3V0ZVByb3BlcnRpZXMyLAogICAgICBtYW5pZmVzdCwKICAgICAgaW5pdC5oaXN0b3J5LAogICAgICBzdGF0ZSwKICAgICAgbWF0Y2hlcywKICAgICAgc3VibWlzc2lvbiwKICAgICAgbmV4dExvY2F0aW9uLAogICAgICBoeWRyYXRpb25Sb3V0ZVByb3BlcnRpZXMyLAogICAgICBmYWxzZSwKICAgICAgaXNSZXZhbGlkYXRpb25SZXF1aXJlZCwKICAgICAgY2FuY2VsbGVkRmV0Y2hlckxvYWRzLAogICAgICBmZXRjaGVyc1F1ZXVlZEZvckRlbGV0aW9uLAogICAgICBmZXRjaExvYWRNYXRjaGVzLAogICAgICBmZXRjaFJlZGlyZWN0SWRzLAogICAgICByb3V0ZXNUb1VzZSwKICAgICAgYmFzZW5hbWUsCiAgICAgIGluaXQucGF0Y2hSb3V0ZXNPbk5hdmlnYXRpb24gIT0gbnVsbCwKICAgICAgW21hdGNoLnJvdXRlLmlkLCBhY3Rpb25SZXN1bHRdCiAgICApOwogICAgcmV2YWxpZGF0aW5nRmV0Y2hlcnMuZmlsdGVyKChyZikgPT4gcmYua2V5ICE9PSBrZXkpLmZvckVhY2goKHJmKSA9PiB7CiAgICAgIGxldCBzdGFsZUtleSA9IHJmLmtleTsKICAgICAgbGV0IGV4aXN0aW5nRmV0Y2hlcjIgPSBzdGF0ZS5mZXRjaGVycy5nZXQoc3RhbGVLZXkpOwogICAgICBsZXQgcmV2YWxpZGF0aW5nRmV0Y2hlciA9IGdldExvYWRpbmdGZXRjaGVyKAogICAgICAgIHZvaWQgMCwKICAgICAgICBleGlzdGluZ0ZldGNoZXIyID8gZXhpc3RpbmdGZXRjaGVyMi5kYXRhIDogdm9pZCAwCiAgICAgICk7CiAgICAgIHN0YXRlLmZldGNoZXJzLnNldChzdGFsZUtleSwgcmV2YWxpZGF0aW5nRmV0Y2hlcik7CiAgICAgIGFib3J0RmV0Y2hlcihzdGFsZUtleSk7CiAgICAgIGlmIChyZi5jb250cm9sbGVyKSB7CiAgICAgICAgZmV0Y2hDb250cm9sbGVycy5zZXQoc3RhbGVLZXksIHJmLmNvbnRyb2xsZXIpOwogICAgICB9CiAgICB9KTsKICAgIHVwZGF0ZVN0YXRlKHsgZmV0Y2hlcnM6IG5ldyBNYXAoc3RhdGUuZmV0Y2hlcnMpIH0pOwogICAgbGV0IGFib3J0UGVuZGluZ0ZldGNoUmV2YWxpZGF0aW9ucyA9ICgpID0+IHJldmFsaWRhdGluZ0ZldGNoZXJzLmZvckVhY2goKHJmKSA9PiBhYm9ydEZldGNoZXIocmYua2V5KSk7CiAgICBhYm9ydENvbnRyb2xsZXIuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoCiAgICAgICJhYm9ydCIsCiAgICAgIGFib3J0UGVuZGluZ0ZldGNoUmV2YWxpZGF0aW9ucwogICAgKTsKICAgIGxldCB7IGxvYWRlclJlc3VsdHMsIGZldGNoZXJSZXN1bHRzIH0gPSBhd2FpdCBjYWxsTG9hZGVyc0FuZE1heWJlUmVzb2x2ZURhdGEoCiAgICAgIGRzTWF0Y2hlcywKICAgICAgcmV2YWxpZGF0aW5nRmV0Y2hlcnMsCiAgICAgIHJldmFsaWRhdGlvblJlcXVlc3QsCiAgICAgIHNjb3BlZENvbnRleHQKICAgICk7CiAgICBpZiAoYWJvcnRDb250cm9sbGVyLnNpZ25hbC5hYm9ydGVkKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGFib3J0Q29udHJvbGxlci5zaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigKICAgICAgImFib3J0IiwKICAgICAgYWJvcnRQZW5kaW5nRmV0Y2hSZXZhbGlkYXRpb25zCiAgICApOwogICAgZmV0Y2hSZWxvYWRJZHMuZGVsZXRlKGtleSk7CiAgICBmZXRjaENvbnRyb2xsZXJzLmRlbGV0ZShrZXkpOwogICAgcmV2YWxpZGF0aW5nRmV0Y2hlcnMuZm9yRWFjaCgocikgPT4gZmV0Y2hDb250cm9sbGVycy5kZWxldGUoci5rZXkpKTsKICAgIGlmIChzdGF0ZS5mZXRjaGVycy5oYXMoa2V5KSkgewogICAgICBsZXQgZG9uZUZldGNoZXIgPSBnZXREb25lRmV0Y2hlcihhY3Rpb25SZXN1bHQuZGF0YSk7CiAgICAgIHN0YXRlLmZldGNoZXJzLnNldChrZXksIGRvbmVGZXRjaGVyKTsKICAgIH0KICAgIGxldCByZWRpcmVjdDIgPSBmaW5kUmVkaXJlY3QobG9hZGVyUmVzdWx0cyk7CiAgICBpZiAocmVkaXJlY3QyKSB7CiAgICAgIHJldHVybiBzdGFydFJlZGlyZWN0TmF2aWdhdGlvbigKICAgICAgICByZXZhbGlkYXRpb25SZXF1ZXN0LAogICAgICAgIHJlZGlyZWN0Mi5yZXN1bHQsCiAgICAgICAgZmFsc2UsCiAgICAgICAgeyBwcmV2ZW50U2Nyb2xsUmVzZXQgfQogICAgICApOwogICAgfQogICAgcmVkaXJlY3QyID0gZmluZFJlZGlyZWN0KGZldGNoZXJSZXN1bHRzKTsKICAgIGlmIChyZWRpcmVjdDIpIHsKICAgICAgZmV0Y2hSZWRpcmVjdElkcy5hZGQocmVkaXJlY3QyLmtleSk7CiAgICAgIHJldHVybiBzdGFydFJlZGlyZWN0TmF2aWdhdGlvbigKICAgICAgICByZXZhbGlkYXRpb25SZXF1ZXN0LAogICAgICAgIHJlZGlyZWN0Mi5yZXN1bHQsCiAgICAgICAgZmFsc2UsCiAgICAgICAgeyBwcmV2ZW50U2Nyb2xsUmVzZXQgfQogICAgICApOwogICAgfQogICAgbGV0IHsgbG9hZGVyRGF0YSwgZXJyb3JzIH0gPSBwcm9jZXNzTG9hZGVyRGF0YSgKICAgICAgc3RhdGUsCiAgICAgIG1hdGNoZXMsCiAgICAgIGxvYWRlclJlc3VsdHMsCiAgICAgIHZvaWQgMCwKICAgICAgcmV2YWxpZGF0aW5nRmV0Y2hlcnMsCiAgICAgIGZldGNoZXJSZXN1bHRzCiAgICApOwogICAgYWJvcnRTdGFsZUZldGNoTG9hZHMobG9hZElkKTsKICAgIGlmIChzdGF0ZS5uYXZpZ2F0aW9uLnN0YXRlID09PSAibG9hZGluZyIgJiYgbG9hZElkID4gcGVuZGluZ05hdmlnYXRpb25Mb2FkSWQpIHsKICAgICAgaW52YXJpYW50KHBlbmRpbmdBY3Rpb24sICJFeHBlY3RlZCBwZW5kaW5nIGFjdGlvbiIpOwogICAgICBwZW5kaW5nTmF2aWdhdGlvbkNvbnRyb2xsZXIgJiYgcGVuZGluZ05hdmlnYXRpb25Db250cm9sbGVyLmFib3J0KCk7CiAgICAgIGNvbXBsZXRlTmF2aWdhdGlvbihzdGF0ZS5uYXZpZ2F0aW9uLmxvY2F0aW9uLCB7CiAgICAgICAgbWF0Y2hlcywKICAgICAgICBsb2FkZXJEYXRhLAogICAgICAgIGVycm9ycywKICAgICAgICBmZXRjaGVyczogbmV3IE1hcChzdGF0ZS5mZXRjaGVycykKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICB1cGRhdGVTdGF0ZSh7CiAgICAgICAgZXJyb3JzLAogICAgICAgIGxvYWRlckRhdGE6IG1lcmdlTG9hZGVyRGF0YSgKICAgICAgICAgIHN0YXRlLmxvYWRlckRhdGEsCiAgICAgICAgICBsb2FkZXJEYXRhLAogICAgICAgICAgbWF0Y2hlcywKICAgICAgICAgIGVycm9ycwogICAgICAgICksCiAgICAgICAgZmV0Y2hlcnM6IG5ldyBNYXAoc3RhdGUuZmV0Y2hlcnMpCiAgICAgIH0pOwogICAgICBpc1JldmFsaWRhdGlvblJlcXVpcmVkID0gZmFsc2U7CiAgICB9CiAgfQogIGFzeW5jIGZ1bmN0aW9uIGhhbmRsZUZldGNoZXJMb2FkZXIoa2V5LCByb3V0ZUlkLCBwYXRoLCBtYXRjaGVzLCBzY29wZWRDb250ZXh0LCBpc0ZvZ09mV2FyLCBmbHVzaFN5bmMzLCBwcmV2ZW50U2Nyb2xsUmVzZXQsIHN1Ym1pc3Npb24pIHsKICAgIGxldCBleGlzdGluZ0ZldGNoZXIgPSBzdGF0ZS5mZXRjaGVycy5nZXQoa2V5KTsKICAgIHVwZGF0ZUZldGNoZXJTdGF0ZSgKICAgICAga2V5LAogICAgICBnZXRMb2FkaW5nRmV0Y2hlcigKICAgICAgICBzdWJtaXNzaW9uLAogICAgICAgIGV4aXN0aW5nRmV0Y2hlciA/IGV4aXN0aW5nRmV0Y2hlci5kYXRhIDogdm9pZCAwCiAgICAgICksCiAgICAgIHsgZmx1c2hTeW5jOiBmbHVzaFN5bmMzIH0KICAgICk7CiAgICBsZXQgYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpOwogICAgbGV0IGZldGNoUmVxdWVzdCA9IGNyZWF0ZUNsaWVudFNpZGVSZXF1ZXN0KAogICAgICBpbml0Lmhpc3RvcnksCiAgICAgIHBhdGgsCiAgICAgIGFib3J0Q29udHJvbGxlci5zaWduYWwKICAgICk7CiAgICBpZiAoaXNGb2dPZldhcikgewogICAgICBsZXQgZGlzY292ZXJSZXN1bHQgPSBhd2FpdCBkaXNjb3ZlclJvdXRlcygKICAgICAgICBtYXRjaGVzLAogICAgICAgIG5ldyBVUkwoZmV0Y2hSZXF1ZXN0LnVybCkucGF0aG5hbWUsCiAgICAgICAgZmV0Y2hSZXF1ZXN0LnNpZ25hbCwKICAgICAgICBrZXkKICAgICAgKTsKICAgICAgaWYgKGRpc2NvdmVyUmVzdWx0LnR5cGUgPT09ICJhYm9ydGVkIikgewogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmIChkaXNjb3ZlclJlc3VsdC50eXBlID09PSAiZXJyb3IiKSB7CiAgICAgICAgc2V0RmV0Y2hlckVycm9yKGtleSwgcm91dGVJZCwgZGlzY292ZXJSZXN1bHQuZXJyb3IsIHsgZmx1c2hTeW5jOiBmbHVzaFN5bmMzIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmICghZGlzY292ZXJSZXN1bHQubWF0Y2hlcykgewogICAgICAgIHNldEZldGNoZXJFcnJvcigKICAgICAgICAgIGtleSwKICAgICAgICAgIHJvdXRlSWQsCiAgICAgICAgICBnZXRJbnRlcm5hbFJvdXRlckVycm9yKDQwNCwgeyBwYXRobmFtZTogcGF0aCB9KSwKICAgICAgICAgIHsgZmx1c2hTeW5jOiBmbHVzaFN5bmMzIH0KICAgICAgICApOwogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICBtYXRjaGVzID0gZGlzY292ZXJSZXN1bHQubWF0Y2hlczsKICAgICAgfQogICAgfQogICAgbGV0IG1hdGNoID0gZ2V0VGFyZ2V0TWF0Y2gobWF0Y2hlcywgcGF0aCk7CiAgICBmZXRjaENvbnRyb2xsZXJzLnNldChrZXksIGFib3J0Q29udHJvbGxlcik7CiAgICBsZXQgb3JpZ2luYXRpbmdMb2FkSWQgPSBpbmNyZW1lbnRpbmdMb2FkSWQ7CiAgICBsZXQgZHNNYXRjaGVzID0gZ2V0VGFyZ2V0ZWREYXRhU3RyYXRlZ3lNYXRjaGVzKAogICAgICBtYXBSb3V0ZVByb3BlcnRpZXMyLAogICAgICBtYW5pZmVzdCwKICAgICAgZmV0Y2hSZXF1ZXN0LAogICAgICBtYXRjaGVzLAogICAgICBtYXRjaCwKICAgICAgaHlkcmF0aW9uUm91dGVQcm9wZXJ0aWVzMiwKICAgICAgc2NvcGVkQ29udGV4dAogICAgKTsKICAgIGxldCByZXN1bHRzID0gYXdhaXQgY2FsbERhdGFTdHJhdGVneSgKICAgICAgZmV0Y2hSZXF1ZXN0LAogICAgICBkc01hdGNoZXMsCiAgICAgIHNjb3BlZENvbnRleHQsCiAgICAgIGtleQogICAgKTsKICAgIGxldCByZXN1bHQgPSByZXN1bHRzW21hdGNoLnJvdXRlLmlkXTsKICAgIGlmIChmZXRjaENvbnRyb2xsZXJzLmdldChrZXkpID09PSBhYm9ydENvbnRyb2xsZXIpIHsKICAgICAgZmV0Y2hDb250cm9sbGVycy5kZWxldGUoa2V5KTsKICAgIH0KICAgIGlmIChmZXRjaFJlcXVlc3Quc2lnbmFsLmFib3J0ZWQpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKGZldGNoZXJzUXVldWVkRm9yRGVsZXRpb24uaGFzKGtleSkpIHsKICAgICAgdXBkYXRlRmV0Y2hlclN0YXRlKGtleSwgZ2V0RG9uZUZldGNoZXIodm9pZCAwKSk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChpc1JlZGlyZWN0UmVzdWx0KHJlc3VsdCkpIHsKICAgICAgaWYgKHBlbmRpbmdOYXZpZ2F0aW9uTG9hZElkID4gb3JpZ2luYXRpbmdMb2FkSWQpIHsKICAgICAgICB1cGRhdGVGZXRjaGVyU3RhdGUoa2V5LCBnZXREb25lRmV0Y2hlcih2b2lkIDApKTsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZmV0Y2hSZWRpcmVjdElkcy5hZGQoa2V5KTsKICAgICAgICBhd2FpdCBzdGFydFJlZGlyZWN0TmF2aWdhdGlvbihmZXRjaFJlcXVlc3QsIHJlc3VsdCwgZmFsc2UsIHsKICAgICAgICAgIHByZXZlbnRTY3JvbGxSZXNldAogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfQogICAgaWYgKGlzRXJyb3JSZXN1bHQocmVzdWx0KSkgewogICAgICBzZXRGZXRjaGVyRXJyb3Ioa2V5LCByb3V0ZUlkLCByZXN1bHQuZXJyb3IpOwogICAgICByZXR1cm47CiAgICB9CiAgICB1cGRhdGVGZXRjaGVyU3RhdGUoa2V5LCBnZXREb25lRmV0Y2hlcihyZXN1bHQuZGF0YSkpOwogIH0KICBhc3luYyBmdW5jdGlvbiBzdGFydFJlZGlyZWN0TmF2aWdhdGlvbihyZXF1ZXN0LCByZWRpcmVjdDIsIGlzTmF2aWdhdGlvbiwgewogICAgc3VibWlzc2lvbiwKICAgIGZldGNoZXJTdWJtaXNzaW9uLAogICAgcHJldmVudFNjcm9sbFJlc2V0LAogICAgcmVwbGFjZTogcmVwbGFjZTIKICB9ID0ge30pIHsKICAgIGlmIChyZWRpcmVjdDIucmVzcG9uc2UuaGVhZGVycy5oYXMoIlgtUmVtaXgtUmV2YWxpZGF0ZSIpKSB7CiAgICAgIGlzUmV2YWxpZGF0aW9uUmVxdWlyZWQgPSB0cnVlOwogICAgfQogICAgbGV0IGxvY2F0aW9uMiA9IHJlZGlyZWN0Mi5yZXNwb25zZS5oZWFkZXJzLmdldCgiTG9jYXRpb24iKTsKICAgIGludmFyaWFudChsb2NhdGlvbjIsICJFeHBlY3RlZCBhIExvY2F0aW9uIGhlYWRlciBvbiB0aGUgcmVkaXJlY3QgUmVzcG9uc2UiKTsKICAgIGxvY2F0aW9uMiA9IG5vcm1hbGl6ZVJlZGlyZWN0TG9jYXRpb24oCiAgICAgIGxvY2F0aW9uMiwKICAgICAgbmV3IFVSTChyZXF1ZXN0LnVybCksCiAgICAgIGJhc2VuYW1lCiAgICApOwogICAgbGV0IHJlZGlyZWN0TG9jYXRpb24gPSBjcmVhdGVMb2NhdGlvbihzdGF0ZS5sb2NhdGlvbiwgbG9jYXRpb24yLCB7CiAgICAgIF9pc1JlZGlyZWN0OiB0cnVlCiAgICB9KTsKICAgIGlmIChpc0Jyb3dzZXIyKSB7CiAgICAgIGxldCBpc0RvY3VtZW50UmVsb2FkID0gZmFsc2U7CiAgICAgIGlmIChyZWRpcmVjdDIucmVzcG9uc2UuaGVhZGVycy5oYXMoIlgtUmVtaXgtUmVsb2FkLURvY3VtZW50IikpIHsKICAgICAgICBpc0RvY3VtZW50UmVsb2FkID0gdHJ1ZTsKICAgICAgfSBlbHNlIGlmIChpc0Fic29sdXRlVXJsKGxvY2F0aW9uMikpIHsKICAgICAgICBjb25zdCB1cmwgPSBjcmVhdGVCcm93c2VyVVJMSW1wbChsb2NhdGlvbjIsIHRydWUpOwogICAgICAgIGlzRG9jdW1lbnRSZWxvYWQgPSAvLyBIYXJkIHJlbG9hZCBpZiBpdCdzIGFuIGFic29sdXRlIFVSTCB0byBhIG5ldyBvcmlnaW4KICAgICAgICB1cmwub3JpZ2luICE9PSByb3V0ZXJXaW5kb3cubG9jYXRpb24ub3JpZ2luIHx8IC8vIEhhcmQgcmVsb2FkIGlmIGl0J3MgYW4gYWJzb2x1dGUgVVJMIHRoYXQgZG9lcyBub3QgbWF0Y2ggb3VyIGJhc2VuYW1lCiAgICAgICAgc3RyaXBCYXNlbmFtZSh1cmwucGF0aG5hbWUsIGJhc2VuYW1lKSA9PSBudWxsOwogICAgICB9CiAgICAgIGlmIChpc0RvY3VtZW50UmVsb2FkKSB7CiAgICAgICAgaWYgKHJlcGxhY2UyKSB7CiAgICAgICAgICByb3V0ZXJXaW5kb3cubG9jYXRpb24ucmVwbGFjZShsb2NhdGlvbjIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByb3V0ZXJXaW5kb3cubG9jYXRpb24uYXNzaWduKGxvY2F0aW9uMik7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfQogICAgcGVuZGluZ05hdmlnYXRpb25Db250cm9sbGVyID0gbnVsbDsKICAgIGxldCByZWRpcmVjdE5hdmlnYXRpb25UeXBlID0gcmVwbGFjZTIgPT09IHRydWUgfHwgcmVkaXJlY3QyLnJlc3BvbnNlLmhlYWRlcnMuaGFzKCJYLVJlbWl4LVJlcGxhY2UiKSA/ICJSRVBMQUNFIiA6ICJQVVNIIjsKICAgIGxldCB7IGZvcm1NZXRob2QsIGZvcm1BY3Rpb24sIGZvcm1FbmNUeXBlIH0gPSBzdGF0ZS5uYXZpZ2F0aW9uOwogICAgaWYgKCFzdWJtaXNzaW9uICYmICFmZXRjaGVyU3VibWlzc2lvbiAmJiBmb3JtTWV0aG9kICYmIGZvcm1BY3Rpb24gJiYgZm9ybUVuY1R5cGUpIHsKICAgICAgc3VibWlzc2lvbiA9IGdldFN1Ym1pc3Npb25Gcm9tTmF2aWdhdGlvbihzdGF0ZS5uYXZpZ2F0aW9uKTsKICAgIH0KICAgIGxldCBhY3RpdmVTdWJtaXNzaW9uID0gc3VibWlzc2lvbiB8fCBmZXRjaGVyU3VibWlzc2lvbjsKICAgIGlmIChyZWRpcmVjdFByZXNlcnZlTWV0aG9kU3RhdHVzQ29kZXMuaGFzKHJlZGlyZWN0Mi5yZXNwb25zZS5zdGF0dXMpICYmIGFjdGl2ZVN1Ym1pc3Npb24gJiYgaXNNdXRhdGlvbk1ldGhvZChhY3RpdmVTdWJtaXNzaW9uLmZvcm1NZXRob2QpKSB7CiAgICAgIGF3YWl0IHN0YXJ0TmF2aWdhdGlvbihyZWRpcmVjdE5hdmlnYXRpb25UeXBlLCByZWRpcmVjdExvY2F0aW9uLCB7CiAgICAgICAgc3VibWlzc2lvbjogewogICAgICAgICAgLi4uYWN0aXZlU3VibWlzc2lvbiwKICAgICAgICAgIGZvcm1BY3Rpb246IGxvY2F0aW9uMgogICAgICAgIH0sCiAgICAgICAgLy8gUHJlc2VydmUgdGhlc2UgZmxhZ3MgYWNyb3NzIHJlZGlyZWN0cwogICAgICAgIHByZXZlbnRTY3JvbGxSZXNldDogcHJldmVudFNjcm9sbFJlc2V0IHx8IHBlbmRpbmdQcmV2ZW50U2Nyb2xsUmVzZXQsCiAgICAgICAgZW5hYmxlVmlld1RyYW5zaXRpb246IGlzTmF2aWdhdGlvbiA/IHBlbmRpbmdWaWV3VHJhbnNpdGlvbkVuYWJsZWQgOiB2b2lkIDAKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBsZXQgb3ZlcnJpZGVOYXZpZ2F0aW9uID0gZ2V0TG9hZGluZ05hdmlnYXRpb24oCiAgICAgICAgcmVkaXJlY3RMb2NhdGlvbiwKICAgICAgICBzdWJtaXNzaW9uCiAgICAgICk7CiAgICAgIGF3YWl0IHN0YXJ0TmF2aWdhdGlvbihyZWRpcmVjdE5hdmlnYXRpb25UeXBlLCByZWRpcmVjdExvY2F0aW9uLCB7CiAgICAgICAgb3ZlcnJpZGVOYXZpZ2F0aW9uLAogICAgICAgIC8vIFNlbmQgZmV0Y2hlciBzdWJtaXNzaW9ucyB0aHJvdWdoIGZvciBzaG91bGRSZXZhbGlkYXRlCiAgICAgICAgZmV0Y2hlclN1Ym1pc3Npb24sCiAgICAgICAgLy8gUHJlc2VydmUgdGhlc2UgZmxhZ3MgYWNyb3NzIHJlZGlyZWN0cwogICAgICAgIHByZXZlbnRTY3JvbGxSZXNldDogcHJldmVudFNjcm9sbFJlc2V0IHx8IHBlbmRpbmdQcmV2ZW50U2Nyb2xsUmVzZXQsCiAgICAgICAgZW5hYmxlVmlld1RyYW5zaXRpb246IGlzTmF2aWdhdGlvbiA/IHBlbmRpbmdWaWV3VHJhbnNpdGlvbkVuYWJsZWQgOiB2b2lkIDAKICAgICAgfSk7CiAgICB9CiAgfQogIGFzeW5jIGZ1bmN0aW9uIGNhbGxEYXRhU3RyYXRlZ3kocmVxdWVzdCwgbWF0Y2hlcywgc2NvcGVkQ29udGV4dCwgZmV0Y2hlcktleSkgewogICAgbGV0IHJlc3VsdHM7CiAgICBsZXQgZGF0YVJlc3VsdHMgPSB7fTsKICAgIHRyeSB7CiAgICAgIHJlc3VsdHMgPSBhd2FpdCBjYWxsRGF0YVN0cmF0ZWd5SW1wbCgKICAgICAgICBkYXRhU3RyYXRlZ3lJbXBsLAogICAgICAgIHJlcXVlc3QsCiAgICAgICAgbWF0Y2hlcywKICAgICAgICBmZXRjaGVyS2V5LAogICAgICAgIHNjb3BlZENvbnRleHQsCiAgICAgICAgZmFsc2UKICAgICAgKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgbWF0Y2hlcy5maWx0ZXIoKG0pID0+IG0uc2hvdWxkTG9hZCkuZm9yRWFjaCgobSkgPT4gewogICAgICAgIGRhdGFSZXN1bHRzW20ucm91dGUuaWRdID0gewogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIGVycm9yOiBlCiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIHJldHVybiBkYXRhUmVzdWx0czsKICAgIH0KICAgIGlmIChyZXF1ZXN0LnNpZ25hbC5hYm9ydGVkKSB7CiAgICAgIHJldHVybiBkYXRhUmVzdWx0czsKICAgIH0KICAgIGZvciAobGV0IFtyb3V0ZUlkLCByZXN1bHRdIG9mIE9iamVjdC5lbnRyaWVzKHJlc3VsdHMpKSB7CiAgICAgIGlmIChpc1JlZGlyZWN0RGF0YVN0cmF0ZWd5UmVzdWx0KHJlc3VsdCkpIHsKICAgICAgICBsZXQgcmVzcG9uc2UgPSByZXN1bHQucmVzdWx0OwogICAgICAgIGRhdGFSZXN1bHRzW3JvdXRlSWRdID0gewogICAgICAgICAgdHlwZTogInJlZGlyZWN0IiwKICAgICAgICAgIHJlc3BvbnNlOiBub3JtYWxpemVSZWxhdGl2ZVJvdXRpbmdSZWRpcmVjdFJlc3BvbnNlKAogICAgICAgICAgICByZXNwb25zZSwKICAgICAgICAgICAgcmVxdWVzdCwKICAgICAgICAgICAgcm91dGVJZCwKICAgICAgICAgICAgbWF0Y2hlcywKICAgICAgICAgICAgYmFzZW5hbWUKICAgICAgICAgICkKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIGRhdGFSZXN1bHRzW3JvdXRlSWRdID0gYXdhaXQgY29udmVydERhdGFTdHJhdGVneVJlc3VsdFRvRGF0YVJlc3VsdChyZXN1bHQpOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gZGF0YVJlc3VsdHM7CiAgfQogIGFzeW5jIGZ1bmN0aW9uIGNhbGxMb2FkZXJzQW5kTWF5YmVSZXNvbHZlRGF0YShtYXRjaGVzLCBmZXRjaGVyc1RvTG9hZCwgcmVxdWVzdCwgc2NvcGVkQ29udGV4dCkgewogICAgbGV0IGxvYWRlclJlc3VsdHNQcm9taXNlID0gY2FsbERhdGFTdHJhdGVneSgKICAgICAgcmVxdWVzdCwKICAgICAgbWF0Y2hlcywKICAgICAgc2NvcGVkQ29udGV4dCwKICAgICAgbnVsbAogICAgKTsKICAgIGxldCBmZXRjaGVyUmVzdWx0c1Byb21pc2UgPSBQcm9taXNlLmFsbCgKICAgICAgZmV0Y2hlcnNUb0xvYWQubWFwKGFzeW5jIChmKSA9PiB7CiAgICAgICAgaWYgKGYubWF0Y2hlcyAmJiBmLm1hdGNoICYmIGYucmVxdWVzdCAmJiBmLmNvbnRyb2xsZXIpIHsKICAgICAgICAgIGxldCByZXN1bHRzID0gYXdhaXQgY2FsbERhdGFTdHJhdGVneSgKICAgICAgICAgICAgZi5yZXF1ZXN0LAogICAgICAgICAgICBmLm1hdGNoZXMsCiAgICAgICAgICAgIHNjb3BlZENvbnRleHQsCiAgICAgICAgICAgIGYua2V5CiAgICAgICAgICApOwogICAgICAgICAgbGV0IHJlc3VsdCA9IHJlc3VsdHNbZi5tYXRjaC5yb3V0ZS5pZF07CiAgICAgICAgICByZXR1cm4geyBbZi5rZXldOiByZXN1bHQgfTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7CiAgICAgICAgICAgIFtmLmtleV06IHsKICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgIGVycm9yOiBnZXRJbnRlcm5hbFJvdXRlckVycm9yKDQwNCwgewogICAgICAgICAgICAgICAgcGF0aG5hbWU6IGYucGF0aAogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkKICAgICk7CiAgICBsZXQgbG9hZGVyUmVzdWx0cyA9IGF3YWl0IGxvYWRlclJlc3VsdHNQcm9taXNlOwogICAgbGV0IGZldGNoZXJSZXN1bHRzID0gKGF3YWl0IGZldGNoZXJSZXN1bHRzUHJvbWlzZSkucmVkdWNlKAogICAgICAoYWNjLCByKSA9PiBPYmplY3QuYXNzaWduKGFjYywgciksCiAgICAgIHt9CiAgICApOwogICAgcmV0dXJuIHsKICAgICAgbG9hZGVyUmVzdWx0cywKICAgICAgZmV0Y2hlclJlc3VsdHMKICAgIH07CiAgfQogIGZ1bmN0aW9uIGludGVycnVwdEFjdGl2ZUxvYWRzKCkgewogICAgaXNSZXZhbGlkYXRpb25SZXF1aXJlZCA9IHRydWU7CiAgICBmZXRjaExvYWRNYXRjaGVzLmZvckVhY2goKF8sIGtleSkgPT4gewogICAgICBpZiAoZmV0Y2hDb250cm9sbGVycy5oYXMoa2V5KSkgewogICAgICAgIGNhbmNlbGxlZEZldGNoZXJMb2Fkcy5hZGQoa2V5KTsKICAgICAgfQogICAgICBhYm9ydEZldGNoZXIoa2V5KTsKICAgIH0pOwogIH0KICBmdW5jdGlvbiB1cGRhdGVGZXRjaGVyU3RhdGUoa2V5LCBmZXRjaGVyLCBvcHRzID0ge30pIHsKICAgIHN0YXRlLmZldGNoZXJzLnNldChrZXksIGZldGNoZXIpOwogICAgdXBkYXRlU3RhdGUoCiAgICAgIHsgZmV0Y2hlcnM6IG5ldyBNYXAoc3RhdGUuZmV0Y2hlcnMpIH0sCiAgICAgIHsgZmx1c2hTeW5jOiAob3B0cyAmJiBvcHRzLmZsdXNoU3luYykgPT09IHRydWUgfQogICAgKTsKICB9CiAgZnVuY3Rpb24gc2V0RmV0Y2hlckVycm9yKGtleSwgcm91dGVJZCwgZXJyb3IsIG9wdHMgPSB7fSkgewogICAgbGV0IGJvdW5kYXJ5TWF0Y2ggPSBmaW5kTmVhcmVzdEJvdW5kYXJ5KHN0YXRlLm1hdGNoZXMsIHJvdXRlSWQpOwogICAgZGVsZXRlRmV0Y2hlcihrZXkpOwogICAgdXBkYXRlU3RhdGUoCiAgICAgIHsKICAgICAgICBlcnJvcnM6IHsKICAgICAgICAgIFtib3VuZGFyeU1hdGNoLnJvdXRlLmlkXTogZXJyb3IKICAgICAgICB9LAogICAgICAgIGZldGNoZXJzOiBuZXcgTWFwKHN0YXRlLmZldGNoZXJzKQogICAgICB9LAogICAgICB7IGZsdXNoU3luYzogKG9wdHMgJiYgb3B0cy5mbHVzaFN5bmMpID09PSB0cnVlIH0KICAgICk7CiAgfQogIGZ1bmN0aW9uIGdldEZldGNoZXIoa2V5KSB7CiAgICBhY3RpdmVGZXRjaGVycy5zZXQoa2V5LCAoYWN0aXZlRmV0Y2hlcnMuZ2V0KGtleSkgfHwgMCkgKyAxKTsKICAgIGlmIChmZXRjaGVyc1F1ZXVlZEZvckRlbGV0aW9uLmhhcyhrZXkpKSB7CiAgICAgIGZldGNoZXJzUXVldWVkRm9yRGVsZXRpb24uZGVsZXRlKGtleSk7CiAgICB9CiAgICByZXR1cm4gc3RhdGUuZmV0Y2hlcnMuZ2V0KGtleSkgfHwgSURMRV9GRVRDSEVSOwogIH0KICBmdW5jdGlvbiBkZWxldGVGZXRjaGVyKGtleSkgewogICAgbGV0IGZldGNoZXIgPSBzdGF0ZS5mZXRjaGVycy5nZXQoa2V5KTsKICAgIGlmIChmZXRjaENvbnRyb2xsZXJzLmhhcyhrZXkpICYmICEoZmV0Y2hlciAmJiBmZXRjaGVyLnN0YXRlID09PSAibG9hZGluZyIgJiYgZmV0Y2hSZWxvYWRJZHMuaGFzKGtleSkpKSB7CiAgICAgIGFib3J0RmV0Y2hlcihrZXkpOwogICAgfQogICAgZmV0Y2hMb2FkTWF0Y2hlcy5kZWxldGUoa2V5KTsKICAgIGZldGNoUmVsb2FkSWRzLmRlbGV0ZShrZXkpOwogICAgZmV0Y2hSZWRpcmVjdElkcy5kZWxldGUoa2V5KTsKICAgIGZldGNoZXJzUXVldWVkRm9yRGVsZXRpb24uZGVsZXRlKGtleSk7CiAgICBjYW5jZWxsZWRGZXRjaGVyTG9hZHMuZGVsZXRlKGtleSk7CiAgICBzdGF0ZS5mZXRjaGVycy5kZWxldGUoa2V5KTsKICB9CiAgZnVuY3Rpb24gcXVldWVGZXRjaGVyRm9yRGVsZXRpb24oa2V5KSB7CiAgICBsZXQgY291bnQgPSAoYWN0aXZlRmV0Y2hlcnMuZ2V0KGtleSkgfHwgMCkgLSAxOwogICAgaWYgKGNvdW50IDw9IDApIHsKICAgICAgYWN0aXZlRmV0Y2hlcnMuZGVsZXRlKGtleSk7CiAgICAgIGZldGNoZXJzUXVldWVkRm9yRGVsZXRpb24uYWRkKGtleSk7CiAgICB9IGVsc2UgewogICAgICBhY3RpdmVGZXRjaGVycy5zZXQoa2V5LCBjb3VudCk7CiAgICB9CiAgICB1cGRhdGVTdGF0ZSh7IGZldGNoZXJzOiBuZXcgTWFwKHN0YXRlLmZldGNoZXJzKSB9KTsKICB9CiAgZnVuY3Rpb24gYWJvcnRGZXRjaGVyKGtleSkgewogICAgbGV0IGNvbnRyb2xsZXIgPSBmZXRjaENvbnRyb2xsZXJzLmdldChrZXkpOwogICAgaWYgKGNvbnRyb2xsZXIpIHsKICAgICAgY29udHJvbGxlci5hYm9ydCgpOwogICAgICBmZXRjaENvbnRyb2xsZXJzLmRlbGV0ZShrZXkpOwogICAgfQogIH0KICBmdW5jdGlvbiBtYXJrRmV0Y2hlcnNEb25lKGtleXMpIHsKICAgIGZvciAobGV0IGtleSBvZiBrZXlzKSB7CiAgICAgIGxldCBmZXRjaGVyID0gZ2V0RmV0Y2hlcihrZXkpOwogICAgICBsZXQgZG9uZUZldGNoZXIgPSBnZXREb25lRmV0Y2hlcihmZXRjaGVyLmRhdGEpOwogICAgICBzdGF0ZS5mZXRjaGVycy5zZXQoa2V5LCBkb25lRmV0Y2hlcik7CiAgICB9CiAgfQogIGZ1bmN0aW9uIG1hcmtGZXRjaFJlZGlyZWN0c0RvbmUoKSB7CiAgICBsZXQgZG9uZUtleXMgPSBbXTsKICAgIGxldCB1cGRhdGVkRmV0Y2hlcnMgPSBmYWxzZTsKICAgIGZvciAobGV0IGtleSBvZiBmZXRjaFJlZGlyZWN0SWRzKSB7CiAgICAgIGxldCBmZXRjaGVyID0gc3RhdGUuZmV0Y2hlcnMuZ2V0KGtleSk7CiAgICAgIGludmFyaWFudChmZXRjaGVyLCBgRXhwZWN0ZWQgZmV0Y2hlcjogJHtrZXl9YCk7CiAgICAgIGlmIChmZXRjaGVyLnN0YXRlID09PSAibG9hZGluZyIpIHsKICAgICAgICBmZXRjaFJlZGlyZWN0SWRzLmRlbGV0ZShrZXkpOwogICAgICAgIGRvbmVLZXlzLnB1c2goa2V5KTsKICAgICAgICB1cGRhdGVkRmV0Y2hlcnMgPSB0cnVlOwogICAgICB9CiAgICB9CiAgICBtYXJrRmV0Y2hlcnNEb25lKGRvbmVLZXlzKTsKICAgIHJldHVybiB1cGRhdGVkRmV0Y2hlcnM7CiAgfQogIGZ1bmN0aW9uIGFib3J0U3RhbGVGZXRjaExvYWRzKGxhbmRlZElkKSB7CiAgICBsZXQgeWVldGVkS2V5cyA9IFtdOwogICAgZm9yIChsZXQgW2tleSwgaWRdIG9mIGZldGNoUmVsb2FkSWRzKSB7CiAgICAgIGlmIChpZCA8IGxhbmRlZElkKSB7CiAgICAgICAgbGV0IGZldGNoZXIgPSBzdGF0ZS5mZXRjaGVycy5nZXQoa2V5KTsKICAgICAgICBpbnZhcmlhbnQoZmV0Y2hlciwgYEV4cGVjdGVkIGZldGNoZXI6ICR7a2V5fWApOwogICAgICAgIGlmIChmZXRjaGVyLnN0YXRlID09PSAibG9hZGluZyIpIHsKICAgICAgICAgIGFib3J0RmV0Y2hlcihrZXkpOwogICAgICAgICAgZmV0Y2hSZWxvYWRJZHMuZGVsZXRlKGtleSk7CiAgICAgICAgICB5ZWV0ZWRLZXlzLnB1c2goa2V5KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIG1hcmtGZXRjaGVyc0RvbmUoeWVldGVkS2V5cyk7CiAgICByZXR1cm4geWVldGVkS2V5cy5sZW5ndGggPiAwOwogIH0KICBmdW5jdGlvbiBnZXRCbG9ja2VyKGtleSwgZm4pIHsKICAgIGxldCBibG9ja2VyID0gc3RhdGUuYmxvY2tlcnMuZ2V0KGtleSkgfHwgSURMRV9CTE9DS0VSOwogICAgaWYgKGJsb2NrZXJGdW5jdGlvbnMuZ2V0KGtleSkgIT09IGZuKSB7CiAgICAgIGJsb2NrZXJGdW5jdGlvbnMuc2V0KGtleSwgZm4pOwogICAgfQogICAgcmV0dXJuIGJsb2NrZXI7CiAgfQogIGZ1bmN0aW9uIGRlbGV0ZUJsb2NrZXIoa2V5KSB7CiAgICBzdGF0ZS5ibG9ja2Vycy5kZWxldGUoa2V5KTsKICAgIGJsb2NrZXJGdW5jdGlvbnMuZGVsZXRlKGtleSk7CiAgfQogIGZ1bmN0aW9uIHVwZGF0ZUJsb2NrZXIoa2V5LCBuZXdCbG9ja2VyKSB7CiAgICBsZXQgYmxvY2tlciA9IHN0YXRlLmJsb2NrZXJzLmdldChrZXkpIHx8IElETEVfQkxPQ0tFUjsKICAgIGludmFyaWFudCgKICAgICAgYmxvY2tlci5zdGF0ZSA9PT0gInVuYmxvY2tlZCIgJiYgbmV3QmxvY2tlci5zdGF0ZSA9PT0gImJsb2NrZWQiIHx8IGJsb2NrZXIuc3RhdGUgPT09ICJibG9ja2VkIiAmJiBuZXdCbG9ja2VyLnN0YXRlID09PSAiYmxvY2tlZCIgfHwgYmxvY2tlci5zdGF0ZSA9PT0gImJsb2NrZWQiICYmIG5ld0Jsb2NrZXIuc3RhdGUgPT09ICJwcm9jZWVkaW5nIiB8fCBibG9ja2VyLnN0YXRlID09PSAiYmxvY2tlZCIgJiYgbmV3QmxvY2tlci5zdGF0ZSA9PT0gInVuYmxvY2tlZCIgfHwgYmxvY2tlci5zdGF0ZSA9PT0gInByb2NlZWRpbmciICYmIG5ld0Jsb2NrZXIuc3RhdGUgPT09ICJ1bmJsb2NrZWQiLAogICAgICBgSW52YWxpZCBibG9ja2VyIHN0YXRlIHRyYW5zaXRpb246ICR7YmxvY2tlci5zdGF0ZX0gLT4gJHtuZXdCbG9ja2VyLnN0YXRlfWAKICAgICk7CiAgICBsZXQgYmxvY2tlcnMgPSBuZXcgTWFwKHN0YXRlLmJsb2NrZXJzKTsKICAgIGJsb2NrZXJzLnNldChrZXksIG5ld0Jsb2NrZXIpOwogICAgdXBkYXRlU3RhdGUoeyBibG9ja2VycyB9KTsKICB9CiAgZnVuY3Rpb24gc2hvdWxkQmxvY2tOYXZpZ2F0aW9uKHsKICAgIGN1cnJlbnRMb2NhdGlvbiwKICAgIG5leHRMb2NhdGlvbiwKICAgIGhpc3RvcnlBY3Rpb24KICB9KSB7CiAgICBpZiAoYmxvY2tlckZ1bmN0aW9ucy5zaXplID09PSAwKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChibG9ja2VyRnVuY3Rpb25zLnNpemUgPiAxKSB7CiAgICAgIHdhcm5pbmcoZmFsc2UsICJBIHJvdXRlciBvbmx5IHN1cHBvcnRzIG9uZSBibG9ja2VyIGF0IGEgdGltZSIpOwogICAgfQogICAgbGV0IGVudHJpZXMgPSBBcnJheS5mcm9tKGJsb2NrZXJGdW5jdGlvbnMuZW50cmllcygpKTsKICAgIGxldCBbYmxvY2tlcktleSwgYmxvY2tlckZ1bmN0aW9uXSA9IGVudHJpZXNbZW50cmllcy5sZW5ndGggLSAxXTsKICAgIGxldCBibG9ja2VyID0gc3RhdGUuYmxvY2tlcnMuZ2V0KGJsb2NrZXJLZXkpOwogICAgaWYgKGJsb2NrZXIgJiYgYmxvY2tlci5zdGF0ZSA9PT0gInByb2NlZWRpbmciKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChibG9ja2VyRnVuY3Rpb24oeyBjdXJyZW50TG9jYXRpb24sIG5leHRMb2NhdGlvbiwgaGlzdG9yeUFjdGlvbiB9KSkgewogICAgICByZXR1cm4gYmxvY2tlcktleTsKICAgIH0KICB9CiAgZnVuY3Rpb24gaGFuZGxlTmF2aWdhdGlvbmFsNDA0KHBhdGhuYW1lKSB7CiAgICBsZXQgZXJyb3IgPSBnZXRJbnRlcm5hbFJvdXRlckVycm9yKDQwNCwgeyBwYXRobmFtZSB9KTsKICAgIGxldCByb3V0ZXNUb1VzZSA9IGluRmxpZ2h0RGF0YVJvdXRlcyB8fCBkYXRhUm91dGVzOwogICAgbGV0IHsgbWF0Y2hlcywgcm91dGUgfSA9IGdldFNob3J0Q2lyY3VpdE1hdGNoZXMocm91dGVzVG9Vc2UpOwogICAgcmV0dXJuIHsgbm90Rm91bmRNYXRjaGVzOiBtYXRjaGVzLCByb3V0ZSwgZXJyb3IgfTsKICB9CiAgZnVuY3Rpb24gZW5hYmxlU2Nyb2xsUmVzdG9yYXRpb24ocG9zaXRpb25zLCBnZXRQb3NpdGlvbiwgZ2V0S2V5KSB7CiAgICBzYXZlZFNjcm9sbFBvc2l0aW9uczIgPSBwb3NpdGlvbnM7CiAgICBnZXRTY3JvbGxQb3NpdGlvbiA9IGdldFBvc2l0aW9uOwogICAgZ2V0U2Nyb2xsUmVzdG9yYXRpb25LZXkyID0gZ2V0S2V5IHx8IG51bGw7CiAgICBpZiAoIWluaXRpYWxTY3JvbGxSZXN0b3JlZCAmJiBzdGF0ZS5uYXZpZ2F0aW9uID09PSBJRExFX05BVklHQVRJT04pIHsKICAgICAgaW5pdGlhbFNjcm9sbFJlc3RvcmVkID0gdHJ1ZTsKICAgICAgbGV0IHkgPSBnZXRTYXZlZFNjcm9sbFBvc2l0aW9uKHN0YXRlLmxvY2F0aW9uLCBzdGF0ZS5tYXRjaGVzKTsKICAgICAgaWYgKHkgIT0gbnVsbCkgewogICAgICAgIHVwZGF0ZVN0YXRlKHsgcmVzdG9yZVNjcm9sbFBvc2l0aW9uOiB5IH0pOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gKCkgPT4gewogICAgICBzYXZlZFNjcm9sbFBvc2l0aW9uczIgPSBudWxsOwogICAgICBnZXRTY3JvbGxQb3NpdGlvbiA9IG51bGw7CiAgICAgIGdldFNjcm9sbFJlc3RvcmF0aW9uS2V5MiA9IG51bGw7CiAgICB9OwogIH0KICBmdW5jdGlvbiBnZXRTY3JvbGxLZXkobG9jYXRpb24yLCBtYXRjaGVzKSB7CiAgICBpZiAoZ2V0U2Nyb2xsUmVzdG9yYXRpb25LZXkyKSB7CiAgICAgIGxldCBrZXkgPSBnZXRTY3JvbGxSZXN0b3JhdGlvbktleTIoCiAgICAgICAgbG9jYXRpb24yLAogICAgICAgIG1hdGNoZXMubWFwKChtKSA9PiBjb252ZXJ0Um91dGVNYXRjaFRvVWlNYXRjaChtLCBzdGF0ZS5sb2FkZXJEYXRhKSkKICAgICAgKTsKICAgICAgcmV0dXJuIGtleSB8fCBsb2NhdGlvbjIua2V5OwogICAgfQogICAgcmV0dXJuIGxvY2F0aW9uMi5rZXk7CiAgfQogIGZ1bmN0aW9uIHNhdmVTY3JvbGxQb3NpdGlvbihsb2NhdGlvbjIsIG1hdGNoZXMpIHsKICAgIGlmIChzYXZlZFNjcm9sbFBvc2l0aW9uczIgJiYgZ2V0U2Nyb2xsUG9zaXRpb24pIHsKICAgICAgbGV0IGtleSA9IGdldFNjcm9sbEtleShsb2NhdGlvbjIsIG1hdGNoZXMpOwogICAgICBzYXZlZFNjcm9sbFBvc2l0aW9uczJba2V5XSA9IGdldFNjcm9sbFBvc2l0aW9uKCk7CiAgICB9CiAgfQogIGZ1bmN0aW9uIGdldFNhdmVkU2Nyb2xsUG9zaXRpb24obG9jYXRpb24yLCBtYXRjaGVzKSB7CiAgICBpZiAoc2F2ZWRTY3JvbGxQb3NpdGlvbnMyKSB7CiAgICAgIGxldCBrZXkgPSBnZXRTY3JvbGxLZXkobG9jYXRpb24yLCBtYXRjaGVzKTsKICAgICAgbGV0IHkgPSBzYXZlZFNjcm9sbFBvc2l0aW9uczJba2V5XTsKICAgICAgaWYgKHR5cGVvZiB5ID09PSAibnVtYmVyIikgewogICAgICAgIHJldHVybiB5OwogICAgICB9CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9CiAgZnVuY3Rpb24gY2hlY2tGb2dPZldhcihtYXRjaGVzLCByb3V0ZXNUb1VzZSwgcGF0aG5hbWUpIHsKICAgIGlmIChpbml0LnBhdGNoUm91dGVzT25OYXZpZ2F0aW9uKSB7CiAgICAgIGlmICghbWF0Y2hlcykgewogICAgICAgIGxldCBmb2dNYXRjaGVzID0gbWF0Y2hSb3V0ZXNJbXBsKAogICAgICAgICAgcm91dGVzVG9Vc2UsCiAgICAgICAgICBwYXRobmFtZSwKICAgICAgICAgIGJhc2VuYW1lLAogICAgICAgICAgdHJ1ZQogICAgICAgICk7CiAgICAgICAgcmV0dXJuIHsgYWN0aXZlOiB0cnVlLCBtYXRjaGVzOiBmb2dNYXRjaGVzIHx8IFtdIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKE9iamVjdC5rZXlzKG1hdGNoZXNbMF0ucGFyYW1zKS5sZW5ndGggPiAwKSB7CiAgICAgICAgICBsZXQgcGFydGlhbE1hdGNoZXMgPSBtYXRjaFJvdXRlc0ltcGwoCiAgICAgICAgICAgIHJvdXRlc1RvVXNlLAogICAgICAgICAgICBwYXRobmFtZSwKICAgICAgICAgICAgYmFzZW5hbWUsCiAgICAgICAgICAgIHRydWUKICAgICAgICAgICk7CiAgICAgICAgICByZXR1cm4geyBhY3RpdmU6IHRydWUsIG1hdGNoZXM6IHBhcnRpYWxNYXRjaGVzIH07CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4geyBhY3RpdmU6IGZhbHNlLCBtYXRjaGVzOiBudWxsIH07CiAgfQogIGFzeW5jIGZ1bmN0aW9uIGRpc2NvdmVyUm91dGVzKG1hdGNoZXMsIHBhdGhuYW1lLCBzaWduYWwsIGZldGNoZXJLZXkpIHsKICAgIGlmICghaW5pdC5wYXRjaFJvdXRlc09uTmF2aWdhdGlvbikgewogICAgICByZXR1cm4geyB0eXBlOiAic3VjY2VzcyIsIG1hdGNoZXMgfTsKICAgIH0KICAgIGxldCBwYXJ0aWFsTWF0Y2hlcyA9IG1hdGNoZXM7CiAgICB3aGlsZSAodHJ1ZSkgewogICAgICBsZXQgaXNOb25ITVIgPSBpbkZsaWdodERhdGFSb3V0ZXMgPT0gbnVsbDsKICAgICAgbGV0IHJvdXRlc1RvVXNlID0gaW5GbGlnaHREYXRhUm91dGVzIHx8IGRhdGFSb3V0ZXM7CiAgICAgIGxldCBsb2NhbE1hbmlmZXN0ID0gbWFuaWZlc3Q7CiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgaW5pdC5wYXRjaFJvdXRlc09uTmF2aWdhdGlvbih7CiAgICAgICAgICBzaWduYWwsCiAgICAgICAgICBwYXRoOiBwYXRobmFtZSwKICAgICAgICAgIG1hdGNoZXM6IHBhcnRpYWxNYXRjaGVzLAogICAgICAgICAgZmV0Y2hlcktleSwKICAgICAgICAgIHBhdGNoOiAocm91dGVJZCwgY2hpbGRyZW4pID0+IHsKICAgICAgICAgICAgaWYgKHNpZ25hbC5hYm9ydGVkKSByZXR1cm47CiAgICAgICAgICAgIHBhdGNoUm91dGVzSW1wbCgKICAgICAgICAgICAgICByb3V0ZUlkLAogICAgICAgICAgICAgIGNoaWxkcmVuLAogICAgICAgICAgICAgIHJvdXRlc1RvVXNlLAogICAgICAgICAgICAgIGxvY2FsTWFuaWZlc3QsCiAgICAgICAgICAgICAgbWFwUm91dGVQcm9wZXJ0aWVzMiwKICAgICAgICAgICAgICBmYWxzZQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuIHsgdHlwZTogImVycm9yIiwgZXJyb3I6IGUsIHBhcnRpYWxNYXRjaGVzIH07CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgaWYgKGlzTm9uSE1SICYmICFzaWduYWwuYWJvcnRlZCkgewogICAgICAgICAgZGF0YVJvdXRlcyA9IFsuLi5kYXRhUm91dGVzXTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHNpZ25hbC5hYm9ydGVkKSB7CiAgICAgICAgcmV0dXJuIHsgdHlwZTogImFib3J0ZWQiIH07CiAgICAgIH0KICAgICAgbGV0IG5ld01hdGNoZXMgPSBtYXRjaFJvdXRlcyhyb3V0ZXNUb1VzZSwgcGF0aG5hbWUsIGJhc2VuYW1lKTsKICAgICAgaWYgKG5ld01hdGNoZXMpIHsKICAgICAgICByZXR1cm4geyB0eXBlOiAic3VjY2VzcyIsIG1hdGNoZXM6IG5ld01hdGNoZXMgfTsKICAgICAgfQogICAgICBsZXQgbmV3UGFydGlhbE1hdGNoZXMgPSBtYXRjaFJvdXRlc0ltcGwoCiAgICAgICAgcm91dGVzVG9Vc2UsCiAgICAgICAgcGF0aG5hbWUsCiAgICAgICAgYmFzZW5hbWUsCiAgICAgICAgdHJ1ZQogICAgICApOwogICAgICBpZiAoIW5ld1BhcnRpYWxNYXRjaGVzIHx8IHBhcnRpYWxNYXRjaGVzLmxlbmd0aCA9PT0gbmV3UGFydGlhbE1hdGNoZXMubGVuZ3RoICYmIHBhcnRpYWxNYXRjaGVzLmV2ZXJ5KAogICAgICAgIChtLCBpKSA9PiBtLnJvdXRlLmlkID09PSBuZXdQYXJ0aWFsTWF0Y2hlc1tpXS5yb3V0ZS5pZAogICAgICApKSB7CiAgICAgICAgcmV0dXJuIHsgdHlwZTogInN1Y2Nlc3MiLCBtYXRjaGVzOiBudWxsIH07CiAgICAgIH0KICAgICAgcGFydGlhbE1hdGNoZXMgPSBuZXdQYXJ0aWFsTWF0Y2hlczsKICAgIH0KICB9CiAgZnVuY3Rpb24gX2ludGVybmFsU2V0Um91dGVzKG5ld1JvdXRlcykgewogICAgbWFuaWZlc3QgPSB7fTsKICAgIGluRmxpZ2h0RGF0YVJvdXRlcyA9IGNvbnZlcnRSb3V0ZXNUb0RhdGFSb3V0ZXMoCiAgICAgIG5ld1JvdXRlcywKICAgICAgbWFwUm91dGVQcm9wZXJ0aWVzMiwKICAgICAgdm9pZCAwLAogICAgICBtYW5pZmVzdAogICAgKTsKICB9CiAgZnVuY3Rpb24gcGF0Y2hSb3V0ZXMocm91dGVJZCwgY2hpbGRyZW4sIHVuc3RhYmxlX2FsbG93RWxlbWVudE11dGF0aW9ucyA9IGZhbHNlKSB7CiAgICBsZXQgaXNOb25ITVIgPSBpbkZsaWdodERhdGFSb3V0ZXMgPT0gbnVsbDsKICAgIGxldCByb3V0ZXNUb1VzZSA9IGluRmxpZ2h0RGF0YVJvdXRlcyB8fCBkYXRhUm91dGVzOwogICAgcGF0Y2hSb3V0ZXNJbXBsKAogICAgICByb3V0ZUlkLAogICAgICBjaGlsZHJlbiwKICAgICAgcm91dGVzVG9Vc2UsCiAgICAgIG1hbmlmZXN0LAogICAgICBtYXBSb3V0ZVByb3BlcnRpZXMyLAogICAgICB1bnN0YWJsZV9hbGxvd0VsZW1lbnRNdXRhdGlvbnMKICAgICk7CiAgICBpZiAoaXNOb25ITVIpIHsKICAgICAgZGF0YVJvdXRlcyA9IFsuLi5kYXRhUm91dGVzXTsKICAgICAgdXBkYXRlU3RhdGUoe30pOwogICAgfQogIH0KICByb3V0ZXIyID0gewogICAgZ2V0IGJhc2VuYW1lKCkgewogICAgICByZXR1cm4gYmFzZW5hbWU7CiAgICB9LAogICAgZ2V0IGZ1dHVyZSgpIHsKICAgICAgcmV0dXJuIGZ1dHVyZTsKICAgIH0sCiAgICBnZXQgc3RhdGUoKSB7CiAgICAgIHJldHVybiBzdGF0ZTsKICAgIH0sCiAgICBnZXQgcm91dGVzKCkgewogICAgICByZXR1cm4gZGF0YVJvdXRlczsKICAgIH0sCiAgICBnZXQgd2luZG93KCkgewogICAgICByZXR1cm4gcm91dGVyV2luZG93OwogICAgfSwKICAgIGluaXRpYWxpemUsCiAgICBzdWJzY3JpYmUsCiAgICBlbmFibGVTY3JvbGxSZXN0b3JhdGlvbiwKICAgIG5hdmlnYXRlLAogICAgZmV0Y2g6IGZldGNoMiwKICAgIHJldmFsaWRhdGUsCiAgICAvLyBQYXNzdGhyb3VnaCB0byBoaXN0b3J5LWF3YXJlIGNyZWF0ZUhyZWYgdXNlZCBieSB1c2VIcmVmIHNvIHdlIGdldCBwcm9wZXIKICAgIC8vIGhhc2gtYXdhcmUgVVJMcyBpbiBET00gcGF0aHMKICAgIGNyZWF0ZUhyZWY6ICh0bykgPT4gaW5pdC5oaXN0b3J5LmNyZWF0ZUhyZWYodG8pLAogICAgZW5jb2RlTG9jYXRpb246ICh0bykgPT4gaW5pdC5oaXN0b3J5LmVuY29kZUxvY2F0aW9uKHRvKSwKICAgIGdldEZldGNoZXIsCiAgICBkZWxldGVGZXRjaGVyOiBxdWV1ZUZldGNoZXJGb3JEZWxldGlvbiwKICAgIGRpc3Bvc2UsCiAgICBnZXRCbG9ja2VyLAogICAgZGVsZXRlQmxvY2tlciwKICAgIHBhdGNoUm91dGVzLAogICAgX2ludGVybmFsRmV0Y2hDb250cm9sbGVyczogZmV0Y2hDb250cm9sbGVycywKICAgIC8vIFRPRE86IFJlbW92ZSBzZXRSb3V0ZXMsIGl0J3MgdGVtcG9yYXJ5IHRvIGF2b2lkIGRlYWxpbmcgd2l0aAogICAgLy8gdXBkYXRpbmcgdGhlIHRyZWUgd2hpbGUgdmFsaWRhdGluZyB0aGUgdXBkYXRlIGFsZ29yaXRobS4KICAgIF9pbnRlcm5hbFNldFJvdXRlcywKICAgIF9pbnRlcm5hbFNldFN0YXRlRG9Ob3RVc2VPcllvdVdpbGxCcmVha1lvdXJBcHAobmV3U3RhdGUpIHsKICAgICAgdXBkYXRlU3RhdGUobmV3U3RhdGUpOwogICAgfQogIH07CiAgcmV0dXJuIHJvdXRlcjI7Cn0KZnVuY3Rpb24gY3JlYXRlU3RhdGljSGFuZGxlcihyb3V0ZXMsIG9wdHMpIHsKICBpbnZhcmlhbnQoCiAgICByb3V0ZXMubGVuZ3RoID4gMCwKICAgICJZb3UgbXVzdCBwcm92aWRlIGEgbm9uLWVtcHR5IHJvdXRlcyBhcnJheSB0byBjcmVhdGVTdGF0aWNIYW5kbGVyIgogICk7CiAgbGV0IG1hbmlmZXN0ID0ge307CiAgbGV0IGJhc2VuYW1lID0gKG9wdHMgPyBvcHRzLmJhc2VuYW1lIDogbnVsbCkgfHwgIi8iOwogIGxldCBtYXBSb3V0ZVByb3BlcnRpZXMyID0gKG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMubWFwUm91dGVQcm9wZXJ0aWVzKSB8fCBkZWZhdWx0TWFwUm91dGVQcm9wZXJ0aWVzOwogIGxldCBkYXRhUm91dGVzID0gY29udmVydFJvdXRlc1RvRGF0YVJvdXRlcygKICAgIHJvdXRlcywKICAgIG1hcFJvdXRlUHJvcGVydGllczIsCiAgICB2b2lkIDAsCiAgICBtYW5pZmVzdAogICk7CiAgYXN5bmMgZnVuY3Rpb24gcXVlcnkocmVxdWVzdCwgewogICAgcmVxdWVzdENvbnRleHQsCiAgICBmaWx0ZXJNYXRjaGVzVG9Mb2FkLAogICAgc2tpcExvYWRlckVycm9yQnViYmxpbmcsCiAgICBza2lwUmV2YWxpZGF0aW9uLAogICAgZGF0YVN0cmF0ZWd5LAogICAgZ2VuZXJhdGVNaWRkbGV3YXJlUmVzcG9uc2UKICB9ID0ge30pIHsKICAgIGxldCB1cmwgPSBuZXcgVVJMKHJlcXVlc3QudXJsKTsKICAgIGxldCBtZXRob2QgPSByZXF1ZXN0Lm1ldGhvZDsKICAgIGxldCBsb2NhdGlvbjIgPSBjcmVhdGVMb2NhdGlvbigiIiwgY3JlYXRlUGF0aCh1cmwpLCBudWxsLCAiZGVmYXVsdCIpOwogICAgbGV0IG1hdGNoZXMgPSBtYXRjaFJvdXRlcyhkYXRhUm91dGVzLCBsb2NhdGlvbjIsIGJhc2VuYW1lKTsKICAgIHJlcXVlc3RDb250ZXh0ID0gcmVxdWVzdENvbnRleHQgIT0gbnVsbCA/IHJlcXVlc3RDb250ZXh0IDogbmV3IFJvdXRlckNvbnRleHRQcm92aWRlcigpOwogICAgaWYgKCFpc1ZhbGlkTWV0aG9kKG1ldGhvZCkgJiYgbWV0aG9kICE9PSAiSEVBRCIpIHsKICAgICAgbGV0IGVycm9yID0gZ2V0SW50ZXJuYWxSb3V0ZXJFcnJvcig0MDUsIHsgbWV0aG9kIH0pOwogICAgICBsZXQgeyBtYXRjaGVzOiBtZXRob2ROb3RBbGxvd2VkTWF0Y2hlcywgcm91dGUgfSA9IGdldFNob3J0Q2lyY3VpdE1hdGNoZXMoZGF0YVJvdXRlcyk7CiAgICAgIGxldCBzdGF0aWNDb250ZXh0ID0gewogICAgICAgIGJhc2VuYW1lLAogICAgICAgIGxvY2F0aW9uOiBsb2NhdGlvbjIsCiAgICAgICAgbWF0Y2hlczogbWV0aG9kTm90QWxsb3dlZE1hdGNoZXMsCiAgICAgICAgbG9hZGVyRGF0YToge30sCiAgICAgICAgYWN0aW9uRGF0YTogbnVsbCwKICAgICAgICBlcnJvcnM6IHsKICAgICAgICAgIFtyb3V0ZS5pZF06IGVycm9yCiAgICAgICAgfSwKICAgICAgICBzdGF0dXNDb2RlOiBlcnJvci5zdGF0dXMsCiAgICAgICAgbG9hZGVySGVhZGVyczoge30sCiAgICAgICAgYWN0aW9uSGVhZGVyczoge30KICAgICAgfTsKICAgICAgcmV0dXJuIGdlbmVyYXRlTWlkZGxld2FyZVJlc3BvbnNlID8gZ2VuZXJhdGVNaWRkbGV3YXJlUmVzcG9uc2UoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHN0YXRpY0NvbnRleHQpKSA6IHN0YXRpY0NvbnRleHQ7CiAgICB9IGVsc2UgaWYgKCFtYXRjaGVzKSB7CiAgICAgIGxldCBlcnJvciA9IGdldEludGVybmFsUm91dGVyRXJyb3IoNDA0LCB7IHBhdGhuYW1lOiBsb2NhdGlvbjIucGF0aG5hbWUgfSk7CiAgICAgIGxldCB7IG1hdGNoZXM6IG5vdEZvdW5kTWF0Y2hlcywgcm91dGUgfSA9IGdldFNob3J0Q2lyY3VpdE1hdGNoZXMoZGF0YVJvdXRlcyk7CiAgICAgIGxldCBzdGF0aWNDb250ZXh0ID0gewogICAgICAgIGJhc2VuYW1lLAogICAgICAgIGxvY2F0aW9uOiBsb2NhdGlvbjIsCiAgICAgICAgbWF0Y2hlczogbm90Rm91bmRNYXRjaGVzLAogICAgICAgIGxvYWRlckRhdGE6IHt9LAogICAgICAgIGFjdGlvbkRhdGE6IG51bGwsCiAgICAgICAgZXJyb3JzOiB7CiAgICAgICAgICBbcm91dGUuaWRdOiBlcnJvcgogICAgICAgIH0sCiAgICAgICAgc3RhdHVzQ29kZTogZXJyb3Iuc3RhdHVzLAogICAgICAgIGxvYWRlckhlYWRlcnM6IHt9LAogICAgICAgIGFjdGlvbkhlYWRlcnM6IHt9CiAgICAgIH07CiAgICAgIHJldHVybiBnZW5lcmF0ZU1pZGRsZXdhcmVSZXNwb25zZSA/IGdlbmVyYXRlTWlkZGxld2FyZVJlc3BvbnNlKCgpID0+IFByb21pc2UucmVzb2x2ZShzdGF0aWNDb250ZXh0KSkgOiBzdGF0aWNDb250ZXh0OwogICAgfQogICAgaWYgKGdlbmVyYXRlTWlkZGxld2FyZVJlc3BvbnNlKSB7CiAgICAgIGludmFyaWFudCgKICAgICAgICByZXF1ZXN0Q29udGV4dCBpbnN0YW5jZW9mIFJvdXRlckNvbnRleHRQcm92aWRlciwKICAgICAgICAiV2hlbiB1c2luZyBtaWRkbGV3YXJlIGluIGBzdGF0aWNIYW5kbGVyLnF1ZXJ5KClgLCBhbnkgcHJvdmlkZWQgYHJlcXVlc3RDb250ZXh0YCBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIGBSb3V0ZXJDb250ZXh0UHJvdmlkZXJgIgogICAgICApOwogICAgICB0cnkgewogICAgICAgIGF3YWl0IGxvYWRMYXp5TWlkZGxld2FyZUZvck1hdGNoZXMoCiAgICAgICAgICBtYXRjaGVzLAogICAgICAgICAgbWFuaWZlc3QsCiAgICAgICAgICBtYXBSb3V0ZVByb3BlcnRpZXMyCiAgICAgICAgKTsKICAgICAgICBsZXQgcmVuZGVyZWRTdGF0aWNDb250ZXh0OwogICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHJ1blNlcnZlck1pZGRsZXdhcmVQaXBlbGluZSgKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWVzdCwKICAgICAgICAgICAgbWF0Y2hlcywKICAgICAgICAgICAgcGFyYW1zOiBtYXRjaGVzWzBdLnBhcmFtcywKICAgICAgICAgICAgLy8gSWYgd2UncmUgY2FsbGluZyBtaWRkbGV3YXJlIHRoZW4gaXQgbXVzdCBiZSBlbmFibGVkIHNvIHdlIGNhbiBjYXN0CiAgICAgICAgICAgIC8vIHRoaXMgdG8gdGhlIHByb3BlciB0eXBlIGtub3dpbmcgaXQncyBub3QgYW4gYEFwcExvYWRDb250ZXh0YAogICAgICAgICAgICBjb250ZXh0OiByZXF1ZXN0Q29udGV4dAogICAgICAgICAgfSwKICAgICAgICAgIGFzeW5jICgpID0+IHsKICAgICAgICAgICAgbGV0IHJlcyA9IGF3YWl0IGdlbmVyYXRlTWlkZGxld2FyZVJlc3BvbnNlKAogICAgICAgICAgICAgIGFzeW5jIChyZXZhbGlkYXRpb25SZXF1ZXN0LCBvcHRzMiA9IHt9KSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0MiA9IGF3YWl0IHF1ZXJ5SW1wbCgKICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0aW9uUmVxdWVzdCwKICAgICAgICAgICAgICAgICAgbG9jYXRpb24yLAogICAgICAgICAgICAgICAgICBtYXRjaGVzLAogICAgICAgICAgICAgICAgICByZXF1ZXN0Q29udGV4dCwKICAgICAgICAgICAgICAgICAgZGF0YVN0cmF0ZWd5IHx8IG51bGwsCiAgICAgICAgICAgICAgICAgIHNraXBMb2FkZXJFcnJvckJ1YmJsaW5nID09PSB0cnVlLAogICAgICAgICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgICAgICAiZmlsdGVyTWF0Y2hlc1RvTG9hZCIgaW4gb3B0czIgPyBvcHRzMi5maWx0ZXJNYXRjaGVzVG9Mb2FkID8/IG51bGwgOiBmaWx0ZXJNYXRjaGVzVG9Mb2FkID8/IG51bGwsCiAgICAgICAgICAgICAgICAgIHNraXBSZXZhbGlkYXRpb24gPT09IHRydWUKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICBpZiAoaXNSZXNwb25zZShyZXN1bHQyKSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0MjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJlbmRlcmVkU3RhdGljQ29udGV4dCA9IHsgbG9jYXRpb246IGxvY2F0aW9uMiwgYmFzZW5hbWUsIC4uLnJlc3VsdDIgfTsKICAgICAgICAgICAgICAgIHJldHVybiByZW5kZXJlZFN0YXRpY0NvbnRleHQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwogICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgfSwKICAgICAgICAgIGFzeW5jIChlcnJvciwgcm91dGVJZCkgPT4gewogICAgICAgICAgICB2YXIgX2E7CiAgICAgICAgICAgIGlmIChpc1JlZGlyZWN0UmVzcG9uc2UoZXJyb3IpKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycm9yOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChpc1Jlc3BvbnNlKGVycm9yKSkgewogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBlcnJvciA9IG5ldyBFcnJvclJlc3BvbnNlSW1wbCgKICAgICAgICAgICAgICAgICAgZXJyb3Iuc3RhdHVzLAogICAgICAgICAgICAgICAgICBlcnJvci5zdGF0dXNUZXh0LAogICAgICAgICAgICAgICAgICBhd2FpdCBwYXJzZVJlc3BvbnNlQm9keShlcnJvcikKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgZXJyb3IgPSBlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaXNEYXRhV2l0aFJlc3BvbnNlSW5pdChlcnJvcikpIHsKICAgICAgICAgICAgICBlcnJvciA9IGRhdGFXaXRoUmVzcG9uc2VJbml0VG9FcnJvclJlc3BvbnNlKGVycm9yKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocmVuZGVyZWRTdGF0aWNDb250ZXh0KSB7CiAgICAgICAgICAgICAgaWYgKHJvdXRlSWQgaW4gcmVuZGVyZWRTdGF0aWNDb250ZXh0LmxvYWRlckRhdGEpIHsKICAgICAgICAgICAgICAgIHJlbmRlcmVkU3RhdGljQ29udGV4dC5sb2FkZXJEYXRhW3JvdXRlSWRdID0gdm9pZCAwOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBsZXQgc3RhdGljQ29udGV4dCA9IGdldFN0YXRpY0NvbnRleHRGcm9tRXJyb3IoCiAgICAgICAgICAgICAgICBkYXRhUm91dGVzLAogICAgICAgICAgICAgICAgcmVuZGVyZWRTdGF0aWNDb250ZXh0LAogICAgICAgICAgICAgICAgZXJyb3IsCiAgICAgICAgICAgICAgICBza2lwTG9hZGVyRXJyb3JCdWJibGluZyA/IHJvdXRlSWQgOiBmaW5kTmVhcmVzdEJvdW5kYXJ5KG1hdGNoZXMsIHJvdXRlSWQpLnJvdXRlLmlkCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICByZXR1cm4gZ2VuZXJhdGVNaWRkbGV3YXJlUmVzcG9uc2UoCiAgICAgICAgICAgICAgICAoKSA9PiBQcm9taXNlLnJlc29sdmUoc3RhdGljQ29udGV4dCkKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGxldCBib3VuZGFyeVJvdXRlSWQgPSBza2lwTG9hZGVyRXJyb3JCdWJibGluZyA/IHJvdXRlSWQgOiBmaW5kTmVhcmVzdEJvdW5kYXJ5KAogICAgICAgICAgICAgICAgbWF0Y2hlcywKICAgICAgICAgICAgICAgICgoX2EgPSBtYXRjaGVzLmZpbmQoCiAgICAgICAgICAgICAgICAgIChtKSA9PiBtLnJvdXRlLmlkID09PSByb3V0ZUlkIHx8IG0ucm91dGUubG9hZGVyCiAgICAgICAgICAgICAgICApKSA9PSBudWxsID8gdm9pZCAwIDogX2Eucm91dGUuaWQpIHx8IHJvdXRlSWQKICAgICAgICAgICAgICApLnJvdXRlLmlkOwogICAgICAgICAgICAgIGxldCBzdGF0aWNDb250ZXh0ID0gewogICAgICAgICAgICAgICAgbWF0Y2hlcywKICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBsb2NhdGlvbjIsCiAgICAgICAgICAgICAgICBiYXNlbmFtZSwKICAgICAgICAgICAgICAgIGxvYWRlckRhdGE6IHt9LAogICAgICAgICAgICAgICAgYWN0aW9uRGF0YTogbnVsbCwKICAgICAgICAgICAgICAgIGVycm9yczogewogICAgICAgICAgICAgICAgICBbYm91bmRhcnlSb3V0ZUlkXTogZXJyb3IKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzdGF0dXNDb2RlOiBpc1JvdXRlRXJyb3JSZXNwb25zZShlcnJvcikgPyBlcnJvci5zdGF0dXMgOiA1MDAsCiAgICAgICAgICAgICAgICBhY3Rpb25IZWFkZXJzOiB7fSwKICAgICAgICAgICAgICAgIGxvYWRlckhlYWRlcnM6IHt9CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICByZXR1cm4gZ2VuZXJhdGVNaWRkbGV3YXJlUmVzcG9uc2UoCiAgICAgICAgICAgICAgICAoKSA9PiBQcm9taXNlLnJlc29sdmUoc3RhdGljQ29udGV4dCkKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgKTsKICAgICAgICBpbnZhcmlhbnQoaXNSZXNwb25zZShyZXNwb25zZSksICJFeHBlY3RlZCBhIHJlc3BvbnNlIGluIHF1ZXJ5KCkiKTsKICAgICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBpZiAoaXNSZXNwb25zZShlKSkgewogICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgfQogICAgICAgIHRocm93IGU7CiAgICAgIH0KICAgIH0KICAgIGxldCByZXN1bHQgPSBhd2FpdCBxdWVyeUltcGwoCiAgICAgIHJlcXVlc3QsCiAgICAgIGxvY2F0aW9uMiwKICAgICAgbWF0Y2hlcywKICAgICAgcmVxdWVzdENvbnRleHQsCiAgICAgIGRhdGFTdHJhdGVneSB8fCBudWxsLAogICAgICBza2lwTG9hZGVyRXJyb3JCdWJibGluZyA9PT0gdHJ1ZSwKICAgICAgbnVsbCwKICAgICAgZmlsdGVyTWF0Y2hlc1RvTG9hZCB8fCBudWxsLAogICAgICBza2lwUmV2YWxpZGF0aW9uID09PSB0cnVlCiAgICApOwogICAgaWYgKGlzUmVzcG9uc2UocmVzdWx0KSkgewogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgcmV0dXJuIHsgbG9jYXRpb246IGxvY2F0aW9uMiwgYmFzZW5hbWUsIC4uLnJlc3VsdCB9OwogIH0KICBhc3luYyBmdW5jdGlvbiBxdWVyeVJvdXRlKHJlcXVlc3QsIHsKICAgIHJvdXRlSWQsCiAgICByZXF1ZXN0Q29udGV4dCwKICAgIGRhdGFTdHJhdGVneSwKICAgIGdlbmVyYXRlTWlkZGxld2FyZVJlc3BvbnNlCiAgfSA9IHt9KSB7CiAgICBsZXQgdXJsID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7CiAgICBsZXQgbWV0aG9kID0gcmVxdWVzdC5tZXRob2Q7CiAgICBsZXQgbG9jYXRpb24yID0gY3JlYXRlTG9jYXRpb24oIiIsIGNyZWF0ZVBhdGgodXJsKSwgbnVsbCwgImRlZmF1bHQiKTsKICAgIGxldCBtYXRjaGVzID0gbWF0Y2hSb3V0ZXMoZGF0YVJvdXRlcywgbG9jYXRpb24yLCBiYXNlbmFtZSk7CiAgICByZXF1ZXN0Q29udGV4dCA9IHJlcXVlc3RDb250ZXh0ICE9IG51bGwgPyByZXF1ZXN0Q29udGV4dCA6IG5ldyBSb3V0ZXJDb250ZXh0UHJvdmlkZXIoKTsKICAgIGlmICghaXNWYWxpZE1ldGhvZChtZXRob2QpICYmIG1ldGhvZCAhPT0gIkhFQUQiICYmIG1ldGhvZCAhPT0gIk9QVElPTlMiKSB7CiAgICAgIHRocm93IGdldEludGVybmFsUm91dGVyRXJyb3IoNDA1LCB7IG1ldGhvZCB9KTsKICAgIH0gZWxzZSBpZiAoIW1hdGNoZXMpIHsKICAgICAgdGhyb3cgZ2V0SW50ZXJuYWxSb3V0ZXJFcnJvcig0MDQsIHsgcGF0aG5hbWU6IGxvY2F0aW9uMi5wYXRobmFtZSB9KTsKICAgIH0KICAgIGxldCBtYXRjaCA9IHJvdXRlSWQgPyBtYXRjaGVzLmZpbmQoKG0pID0+IG0ucm91dGUuaWQgPT09IHJvdXRlSWQpIDogZ2V0VGFyZ2V0TWF0Y2gobWF0Y2hlcywgbG9jYXRpb24yKTsKICAgIGlmIChyb3V0ZUlkICYmICFtYXRjaCkgewogICAgICB0aHJvdyBnZXRJbnRlcm5hbFJvdXRlckVycm9yKDQwMywgewogICAgICAgIHBhdGhuYW1lOiBsb2NhdGlvbjIucGF0aG5hbWUsCiAgICAgICAgcm91dGVJZAogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoIW1hdGNoKSB7CiAgICAgIHRocm93IGdldEludGVybmFsUm91dGVyRXJyb3IoNDA0LCB7IHBhdGhuYW1lOiBsb2NhdGlvbjIucGF0aG5hbWUgfSk7CiAgICB9CiAgICBpZiAoZ2VuZXJhdGVNaWRkbGV3YXJlUmVzcG9uc2UpIHsKICAgICAgaW52YXJpYW50KAogICAgICAgIHJlcXVlc3RDb250ZXh0IGluc3RhbmNlb2YgUm91dGVyQ29udGV4dFByb3ZpZGVyLAogICAgICAgICJXaGVuIHVzaW5nIG1pZGRsZXdhcmUgaW4gYHN0YXRpY0hhbmRsZXIucXVlcnlSb3V0ZSgpYCwgYW55IHByb3ZpZGVkIGByZXF1ZXN0Q29udGV4dGAgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBgUm91dGVyQ29udGV4dFByb3ZpZGVyYCIKICAgICAgKTsKICAgICAgYXdhaXQgbG9hZExhenlNaWRkbGV3YXJlRm9yTWF0Y2hlcyhtYXRjaGVzLCBtYW5pZmVzdCwgbWFwUm91dGVQcm9wZXJ0aWVzMik7CiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHJ1blNlcnZlck1pZGRsZXdhcmVQaXBlbGluZSgKICAgICAgICB7CiAgICAgICAgICByZXF1ZXN0LAogICAgICAgICAgbWF0Y2hlcywKICAgICAgICAgIHBhcmFtczogbWF0Y2hlc1swXS5wYXJhbXMsCiAgICAgICAgICAvLyBJZiB3ZSdyZSBjYWxsaW5nIG1pZGRsZXdhcmUgdGhlbiBpdCBtdXN0IGJlIGVuYWJsZWQgc28gd2UgY2FuIGNhc3QKICAgICAgICAgIC8vIHRoaXMgdG8gdGhlIHByb3BlciB0eXBlIGtub3dpbmcgaXQncyBub3QgYW4gYEFwcExvYWRDb250ZXh0YAogICAgICAgICAgY29udGV4dDogcmVxdWVzdENvbnRleHQKICAgICAgICB9LAogICAgICAgIGFzeW5jICgpID0+IHsKICAgICAgICAgIGxldCByZXMgPSBhd2FpdCBnZW5lcmF0ZU1pZGRsZXdhcmVSZXNwb25zZSgKICAgICAgICAgICAgYXN5bmMgKGlubmVyUmVxdWVzdCkgPT4gewogICAgICAgICAgICAgIGxldCByZXN1bHQyID0gYXdhaXQgcXVlcnlJbXBsKAogICAgICAgICAgICAgICAgaW5uZXJSZXF1ZXN0LAogICAgICAgICAgICAgICAgbG9jYXRpb24yLAogICAgICAgICAgICAgICAgbWF0Y2hlcywKICAgICAgICAgICAgICAgIHJlcXVlc3RDb250ZXh0LAogICAgICAgICAgICAgICAgZGF0YVN0cmF0ZWd5IHx8IG51bGwsCiAgICAgICAgICAgICAgICBmYWxzZSwKICAgICAgICAgICAgICAgIG1hdGNoLAogICAgICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgICAgIGZhbHNlCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICBsZXQgcHJvY2Vzc2VkID0gaGFuZGxlUXVlcnlSZXN1bHQocmVzdWx0Mik7CiAgICAgICAgICAgICAgcmV0dXJuIGlzUmVzcG9uc2UocHJvY2Vzc2VkKSA/IHByb2Nlc3NlZCA6IHR5cGVvZiBwcm9jZXNzZWQgPT09ICJzdHJpbmciID8gbmV3IFJlc3BvbnNlKHByb2Nlc3NlZCkgOiBSZXNwb25zZS5qc29uKHByb2Nlc3NlZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICk7CiAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgIH0sCiAgICAgICAgKGVycm9yKSA9PiB7CiAgICAgICAgICBpZiAoaXNEYXRhV2l0aFJlc3BvbnNlSW5pdChlcnJvcikpIHsKICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkYXRhV2l0aFJlc3BvbnNlSW5pdFRvUmVzcG9uc2UoZXJyb3IpKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChpc1Jlc3BvbnNlKGVycm9yKSkgewogICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVycm9yKTsKICAgICAgICAgIH0KICAgICAgICAgIHRocm93IGVycm9yOwogICAgICAgIH0KICAgICAgKTsKICAgICAgcmV0dXJuIHJlc3BvbnNlOwogICAgfQogICAgbGV0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5SW1wbCgKICAgICAgcmVxdWVzdCwKICAgICAgbG9jYXRpb24yLAogICAgICBtYXRjaGVzLAogICAgICByZXF1ZXN0Q29udGV4dCwKICAgICAgZGF0YVN0cmF0ZWd5IHx8IG51bGwsCiAgICAgIGZhbHNlLAogICAgICBtYXRjaCwKICAgICAgbnVsbCwKICAgICAgZmFsc2UKICAgICk7CiAgICByZXR1cm4gaGFuZGxlUXVlcnlSZXN1bHQocmVzdWx0KTsKICAgIGZ1bmN0aW9uIGhhbmRsZVF1ZXJ5UmVzdWx0KHJlc3VsdDIpIHsKICAgICAgaWYgKGlzUmVzcG9uc2UocmVzdWx0MikpIHsKICAgICAgICByZXR1cm4gcmVzdWx0MjsKICAgICAgfQogICAgICBsZXQgZXJyb3IgPSByZXN1bHQyLmVycm9ycyA/IE9iamVjdC52YWx1ZXMocmVzdWx0Mi5lcnJvcnMpWzBdIDogdm9pZCAwOwogICAgICBpZiAoZXJyb3IgIT09IHZvaWQgMCkgewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9CiAgICAgIGlmIChyZXN1bHQyLmFjdGlvbkRhdGEpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhyZXN1bHQyLmFjdGlvbkRhdGEpWzBdOwogICAgICB9CiAgICAgIGlmIChyZXN1bHQyLmxvYWRlckRhdGEpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhyZXN1bHQyLmxvYWRlckRhdGEpWzBdOwogICAgICB9CiAgICAgIHJldHVybiB2b2lkIDA7CiAgICB9CiAgfQogIGFzeW5jIGZ1bmN0aW9uIHF1ZXJ5SW1wbChyZXF1ZXN0LCBsb2NhdGlvbjIsIG1hdGNoZXMsIHJlcXVlc3RDb250ZXh0LCBkYXRhU3RyYXRlZ3ksIHNraXBMb2FkZXJFcnJvckJ1YmJsaW5nLCByb3V0ZU1hdGNoLCBmaWx0ZXJNYXRjaGVzVG9Mb2FkLCBza2lwUmV2YWxpZGF0aW9uKSB7CiAgICBpbnZhcmlhbnQoCiAgICAgIHJlcXVlc3Quc2lnbmFsLAogICAgICAicXVlcnkoKS9xdWVyeVJvdXRlKCkgcmVxdWVzdHMgbXVzdCBjb250YWluIGFuIEFib3J0Q29udHJvbGxlciBzaWduYWwiCiAgICApOwogICAgdHJ5IHsKICAgICAgaWYgKGlzTXV0YXRpb25NZXRob2QocmVxdWVzdC5tZXRob2QpKSB7CiAgICAgICAgbGV0IHJlc3VsdDIgPSBhd2FpdCBzdWJtaXQoCiAgICAgICAgICByZXF1ZXN0LAogICAgICAgICAgbWF0Y2hlcywKICAgICAgICAgIHJvdXRlTWF0Y2ggfHwgZ2V0VGFyZ2V0TWF0Y2gobWF0Y2hlcywgbG9jYXRpb24yKSwKICAgICAgICAgIHJlcXVlc3RDb250ZXh0LAogICAgICAgICAgZGF0YVN0cmF0ZWd5LAogICAgICAgICAgc2tpcExvYWRlckVycm9yQnViYmxpbmcsCiAgICAgICAgICByb3V0ZU1hdGNoICE9IG51bGwsCiAgICAgICAgICBmaWx0ZXJNYXRjaGVzVG9Mb2FkLAogICAgICAgICAgc2tpcFJldmFsaWRhdGlvbgogICAgICAgICk7CiAgICAgICAgcmV0dXJuIHJlc3VsdDI7CiAgICAgIH0KICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IGxvYWRSb3V0ZURhdGEoCiAgICAgICAgcmVxdWVzdCwKICAgICAgICBtYXRjaGVzLAogICAgICAgIHJlcXVlc3RDb250ZXh0LAogICAgICAgIGRhdGFTdHJhdGVneSwKICAgICAgICBza2lwTG9hZGVyRXJyb3JCdWJibGluZywKICAgICAgICByb3V0ZU1hdGNoLAogICAgICAgIGZpbHRlck1hdGNoZXNUb0xvYWQKICAgICAgKTsKICAgICAgcmV0dXJuIGlzUmVzcG9uc2UocmVzdWx0KSA/IHJlc3VsdCA6IHsKICAgICAgICAuLi5yZXN1bHQsCiAgICAgICAgYWN0aW9uRGF0YTogbnVsbCwKICAgICAgICBhY3Rpb25IZWFkZXJzOiB7fQogICAgICB9OwogICAgfSBjYXRjaCAoZSkgewogICAgICBpZiAoaXNEYXRhU3RyYXRlZ3lSZXN1bHQoZSkgJiYgaXNSZXNwb25zZShlLnJlc3VsdCkpIHsKICAgICAgICBpZiAoZS50eXBlID09PSAiZXJyb3IiKSB7CiAgICAgICAgICB0aHJvdyBlLnJlc3VsdDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGUucmVzdWx0OwogICAgICB9CiAgICAgIGlmIChpc1JlZGlyZWN0UmVzcG9uc2UoZSkpIHsKICAgICAgICByZXR1cm4gZTsKICAgICAgfQogICAgICB0aHJvdyBlOwogICAgfQogIH0KICBhc3luYyBmdW5jdGlvbiBzdWJtaXQocmVxdWVzdCwgbWF0Y2hlcywgYWN0aW9uTWF0Y2gsIHJlcXVlc3RDb250ZXh0LCBkYXRhU3RyYXRlZ3ksIHNraXBMb2FkZXJFcnJvckJ1YmJsaW5nLCBpc1JvdXRlUmVxdWVzdCwgZmlsdGVyTWF0Y2hlc1RvTG9hZCwgc2tpcFJldmFsaWRhdGlvbikgewogICAgbGV0IHJlc3VsdDsKICAgIGlmICghYWN0aW9uTWF0Y2gucm91dGUuYWN0aW9uICYmICFhY3Rpb25NYXRjaC5yb3V0ZS5sYXp5KSB7CiAgICAgIGxldCBlcnJvciA9IGdldEludGVybmFsUm91dGVyRXJyb3IoNDA1LCB7CiAgICAgICAgbWV0aG9kOiByZXF1ZXN0Lm1ldGhvZCwKICAgICAgICBwYXRobmFtZTogbmV3IFVSTChyZXF1ZXN0LnVybCkucGF0aG5hbWUsCiAgICAgICAgcm91dGVJZDogYWN0aW9uTWF0Y2gucm91dGUuaWQKICAgICAgfSk7CiAgICAgIGlmIChpc1JvdXRlUmVxdWVzdCkgewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9CiAgICAgIHJlc3VsdCA9IHsKICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgIGVycm9yCiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICBsZXQgZHNNYXRjaGVzID0gZ2V0VGFyZ2V0ZWREYXRhU3RyYXRlZ3lNYXRjaGVzKAogICAgICAgIG1hcFJvdXRlUHJvcGVydGllczIsCiAgICAgICAgbWFuaWZlc3QsCiAgICAgICAgcmVxdWVzdCwKICAgICAgICBtYXRjaGVzLAogICAgICAgIGFjdGlvbk1hdGNoLAogICAgICAgIFtdLAogICAgICAgIHJlcXVlc3RDb250ZXh0CiAgICAgICk7CiAgICAgIGxldCByZXN1bHRzID0gYXdhaXQgY2FsbERhdGFTdHJhdGVneSgKICAgICAgICByZXF1ZXN0LAogICAgICAgIGRzTWF0Y2hlcywKICAgICAgICBpc1JvdXRlUmVxdWVzdCwKICAgICAgICByZXF1ZXN0Q29udGV4dCwKICAgICAgICBkYXRhU3RyYXRlZ3kKICAgICAgKTsKICAgICAgcmVzdWx0ID0gcmVzdWx0c1thY3Rpb25NYXRjaC5yb3V0ZS5pZF07CiAgICAgIGlmIChyZXF1ZXN0LnNpZ25hbC5hYm9ydGVkKSB7CiAgICAgICAgdGhyb3dTdGF0aWNIYW5kbGVyQWJvcnRlZEVycm9yKHJlcXVlc3QsIGlzUm91dGVSZXF1ZXN0KTsKICAgICAgfQogICAgfQogICAgaWYgKGlzUmVkaXJlY3RSZXN1bHQocmVzdWx0KSkgewogICAgICB0aHJvdyBuZXcgUmVzcG9uc2UobnVsbCwgewogICAgICAgIHN0YXR1czogcmVzdWx0LnJlc3BvbnNlLnN0YXR1cywKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBMb2NhdGlvbjogcmVzdWx0LnJlc3BvbnNlLmhlYWRlcnMuZ2V0KCJMb2NhdGlvbiIpCiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIGlmIChpc1JvdXRlUmVxdWVzdCkgewogICAgICBpZiAoaXNFcnJvclJlc3VsdChyZXN1bHQpKSB7CiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgbWF0Y2hlczogW2FjdGlvbk1hdGNoXSwKICAgICAgICBsb2FkZXJEYXRhOiB7fSwKICAgICAgICBhY3Rpb25EYXRhOiB7IFthY3Rpb25NYXRjaC5yb3V0ZS5pZF06IHJlc3VsdC5kYXRhIH0sCiAgICAgICAgZXJyb3JzOiBudWxsLAogICAgICAgIC8vIE5vdGU6IHN0YXR1c0NvZGUgKyBoZWFkZXJzIGFyZSB1bnVzZWQgaGVyZSBzaW5jZSBxdWVyeVJvdXRlIHdpbGwKICAgICAgICAvLyByZXR1cm4gdGhlIHJhdyBSZXNwb25zZSBvciB2YWx1ZQogICAgICAgIHN0YXR1c0NvZGU6IDIwMCwKICAgICAgICBsb2FkZXJIZWFkZXJzOiB7fSwKICAgICAgICBhY3Rpb25IZWFkZXJzOiB7fQogICAgICB9OwogICAgfQogICAgaWYgKHNraXBSZXZhbGlkYXRpb24pIHsKICAgICAgaWYgKGlzRXJyb3JSZXN1bHQocmVzdWx0KSkgewogICAgICAgIGxldCBib3VuZGFyeU1hdGNoID0gc2tpcExvYWRlckVycm9yQnViYmxpbmcgPyBhY3Rpb25NYXRjaCA6IGZpbmROZWFyZXN0Qm91bmRhcnkobWF0Y2hlcywgYWN0aW9uTWF0Y2gucm91dGUuaWQpOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICBzdGF0dXNDb2RlOiBpc1JvdXRlRXJyb3JSZXNwb25zZShyZXN1bHQuZXJyb3IpID8gcmVzdWx0LmVycm9yLnN0YXR1cyA6IHJlc3VsdC5zdGF0dXNDb2RlICE9IG51bGwgPyByZXN1bHQuc3RhdHVzQ29kZSA6IDUwMCwKICAgICAgICAgIGFjdGlvbkRhdGE6IG51bGwsCiAgICAgICAgICBhY3Rpb25IZWFkZXJzOiB7CiAgICAgICAgICAgIC4uLnJlc3VsdC5oZWFkZXJzID8geyBbYWN0aW9uTWF0Y2gucm91dGUuaWRdOiByZXN1bHQuaGVhZGVycyB9IDoge30KICAgICAgICAgIH0sCiAgICAgICAgICBtYXRjaGVzLAogICAgICAgICAgbG9hZGVyRGF0YToge30sCiAgICAgICAgICBlcnJvcnM6IHsKICAgICAgICAgICAgW2JvdW5kYXJ5TWF0Y2gucm91dGUuaWRdOiByZXN1bHQuZXJyb3IKICAgICAgICAgIH0sCiAgICAgICAgICBsb2FkZXJIZWFkZXJzOiB7fQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGFjdGlvbkRhdGE6IHsKICAgICAgICAgICAgW2FjdGlvbk1hdGNoLnJvdXRlLmlkXTogcmVzdWx0LmRhdGEKICAgICAgICAgIH0sCiAgICAgICAgICBhY3Rpb25IZWFkZXJzOiByZXN1bHQuaGVhZGVycyA/IHsgW2FjdGlvbk1hdGNoLnJvdXRlLmlkXTogcmVzdWx0LmhlYWRlcnMgfSA6IHt9LAogICAgICAgICAgbWF0Y2hlcywKICAgICAgICAgIGxvYWRlckRhdGE6IHt9LAogICAgICAgICAgZXJyb3JzOiBudWxsLAogICAgICAgICAgc3RhdHVzQ29kZTogcmVzdWx0LnN0YXR1c0NvZGUgfHwgMjAwLAogICAgICAgICAgbG9hZGVySGVhZGVyczoge30KICAgICAgICB9OwogICAgICB9CiAgICB9CiAgICBsZXQgbG9hZGVyUmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHJlcXVlc3QudXJsLCB7CiAgICAgIGhlYWRlcnM6IHJlcXVlc3QuaGVhZGVycywKICAgICAgcmVkaXJlY3Q6IHJlcXVlc3QucmVkaXJlY3QsCiAgICAgIHNpZ25hbDogcmVxdWVzdC5zaWduYWwKICAgIH0pOwogICAgaWYgKGlzRXJyb3JSZXN1bHQocmVzdWx0KSkgewogICAgICBsZXQgYm91bmRhcnlNYXRjaCA9IHNraXBMb2FkZXJFcnJvckJ1YmJsaW5nID8gYWN0aW9uTWF0Y2ggOiBmaW5kTmVhcmVzdEJvdW5kYXJ5KG1hdGNoZXMsIGFjdGlvbk1hdGNoLnJvdXRlLmlkKTsKICAgICAgbGV0IGhhbmRsZXJDb250ZXh0MiA9IGF3YWl0IGxvYWRSb3V0ZURhdGEoCiAgICAgICAgbG9hZGVyUmVxdWVzdCwKICAgICAgICBtYXRjaGVzLAogICAgICAgIHJlcXVlc3RDb250ZXh0LAogICAgICAgIGRhdGFTdHJhdGVneSwKICAgICAgICBza2lwTG9hZGVyRXJyb3JCdWJibGluZywKICAgICAgICBudWxsLAogICAgICAgIGZpbHRlck1hdGNoZXNUb0xvYWQsCiAgICAgICAgW2JvdW5kYXJ5TWF0Y2gucm91dGUuaWQsIHJlc3VsdF0KICAgICAgKTsKICAgICAgcmV0dXJuIHsKICAgICAgICAuLi5oYW5kbGVyQ29udGV4dDIsCiAgICAgICAgc3RhdHVzQ29kZTogaXNSb3V0ZUVycm9yUmVzcG9uc2UocmVzdWx0LmVycm9yKSA/IHJlc3VsdC5lcnJvci5zdGF0dXMgOiByZXN1bHQuc3RhdHVzQ29kZSAhPSBudWxsID8gcmVzdWx0LnN0YXR1c0NvZGUgOiA1MDAsCiAgICAgICAgYWN0aW9uRGF0YTogbnVsbCwKICAgICAgICBhY3Rpb25IZWFkZXJzOiB7CiAgICAgICAgICAuLi5yZXN1bHQuaGVhZGVycyA/IHsgW2FjdGlvbk1hdGNoLnJvdXRlLmlkXTogcmVzdWx0LmhlYWRlcnMgfSA6IHt9CiAgICAgICAgfQogICAgICB9OwogICAgfQogICAgbGV0IGhhbmRsZXJDb250ZXh0ID0gYXdhaXQgbG9hZFJvdXRlRGF0YSgKICAgICAgbG9hZGVyUmVxdWVzdCwKICAgICAgbWF0Y2hlcywKICAgICAgcmVxdWVzdENvbnRleHQsCiAgICAgIGRhdGFTdHJhdGVneSwKICAgICAgc2tpcExvYWRlckVycm9yQnViYmxpbmcsCiAgICAgIG51bGwsCiAgICAgIGZpbHRlck1hdGNoZXNUb0xvYWQKICAgICk7CiAgICByZXR1cm4gewogICAgICAuLi5oYW5kbGVyQ29udGV4dCwKICAgICAgYWN0aW9uRGF0YTogewogICAgICAgIFthY3Rpb25NYXRjaC5yb3V0ZS5pZF06IHJlc3VsdC5kYXRhCiAgICAgIH0sCiAgICAgIC8vIGFjdGlvbiBzdGF0dXMgY29kZXMgdGFrZSBwcmVjZWRlbmNlIG92ZXIgbG9hZGVyIHN0YXR1cyBjb2RlcwogICAgICAuLi5yZXN1bHQuc3RhdHVzQ29kZSA/IHsgc3RhdHVzQ29kZTogcmVzdWx0LnN0YXR1c0NvZGUgfSA6IHt9LAogICAgICBhY3Rpb25IZWFkZXJzOiByZXN1bHQuaGVhZGVycyA/IHsgW2FjdGlvbk1hdGNoLnJvdXRlLmlkXTogcmVzdWx0LmhlYWRlcnMgfSA6IHt9CiAgICB9OwogIH0KICBhc3luYyBmdW5jdGlvbiBsb2FkUm91dGVEYXRhKHJlcXVlc3QsIG1hdGNoZXMsIHJlcXVlc3RDb250ZXh0LCBkYXRhU3RyYXRlZ3ksIHNraXBMb2FkZXJFcnJvckJ1YmJsaW5nLCByb3V0ZU1hdGNoLCBmaWx0ZXJNYXRjaGVzVG9Mb2FkLCBwZW5kaW5nQWN0aW9uUmVzdWx0KSB7CiAgICBsZXQgaXNSb3V0ZVJlcXVlc3QgPSByb3V0ZU1hdGNoICE9IG51bGw7CiAgICBpZiAoaXNSb3V0ZVJlcXVlc3QgJiYgIShyb3V0ZU1hdGNoID09IG51bGwgPyB2b2lkIDAgOiByb3V0ZU1hdGNoLnJvdXRlLmxvYWRlcikgJiYgIShyb3V0ZU1hdGNoID09IG51bGwgPyB2b2lkIDAgOiByb3V0ZU1hdGNoLnJvdXRlLmxhenkpKSB7CiAgICAgIHRocm93IGdldEludGVybmFsUm91dGVyRXJyb3IoNDAwLCB7CiAgICAgICAgbWV0aG9kOiByZXF1ZXN0Lm1ldGhvZCwKICAgICAgICBwYXRobmFtZTogbmV3IFVSTChyZXF1ZXN0LnVybCkucGF0aG5hbWUsCiAgICAgICAgcm91dGVJZDogcm91dGVNYXRjaCA9PSBudWxsID8gdm9pZCAwIDogcm91dGVNYXRjaC5yb3V0ZS5pZAogICAgICB9KTsKICAgIH0KICAgIGxldCBkc01hdGNoZXM7CiAgICBpZiAocm91dGVNYXRjaCkgewogICAgICBkc01hdGNoZXMgPSBnZXRUYXJnZXRlZERhdGFTdHJhdGVneU1hdGNoZXMoCiAgICAgICAgbWFwUm91dGVQcm9wZXJ0aWVzMiwKICAgICAgICBtYW5pZmVzdCwKICAgICAgICByZXF1ZXN0LAogICAgICAgIG1hdGNoZXMsCiAgICAgICAgcm91dGVNYXRjaCwKICAgICAgICBbXSwKICAgICAgICByZXF1ZXN0Q29udGV4dAogICAgICApOwogICAgfSBlbHNlIHsKICAgICAgbGV0IG1heElkeCA9IHBlbmRpbmdBY3Rpb25SZXN1bHQgJiYgaXNFcnJvclJlc3VsdChwZW5kaW5nQWN0aW9uUmVzdWx0WzFdKSA/ICgKICAgICAgICAvLyBVcCB0byBidXQgbm90IGluY2x1ZGluZyB0aGUgYm91bmRhcnkKICAgICAgICBtYXRjaGVzLmZpbmRJbmRleCgobSkgPT4gbS5yb3V0ZS5pZCA9PT0gcGVuZGluZ0FjdGlvblJlc3VsdFswXSkgLSAxCiAgICAgICkgOiB2b2lkIDA7CiAgICAgIGRzTWF0Y2hlcyA9IG1hdGNoZXMubWFwKChtYXRjaCwgaW5kZXgpID0+IHsKICAgICAgICBpZiAobWF4SWR4ICE9IG51bGwgJiYgaW5kZXggPiBtYXhJZHgpIHsKICAgICAgICAgIHJldHVybiBnZXREYXRhU3RyYXRlZ3lNYXRjaCgKICAgICAgICAgICAgbWFwUm91dGVQcm9wZXJ0aWVzMiwKICAgICAgICAgICAgbWFuaWZlc3QsCiAgICAgICAgICAgIHJlcXVlc3QsCiAgICAgICAgICAgIG1hdGNoLAogICAgICAgICAgICBbXSwKICAgICAgICAgICAgcmVxdWVzdENvbnRleHQsCiAgICAgICAgICAgIGZhbHNlCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZ2V0RGF0YVN0cmF0ZWd5TWF0Y2goCiAgICAgICAgICBtYXBSb3V0ZVByb3BlcnRpZXMyLAogICAgICAgICAgbWFuaWZlc3QsCiAgICAgICAgICByZXF1ZXN0LAogICAgICAgICAgbWF0Y2gsCiAgICAgICAgICBbXSwKICAgICAgICAgIHJlcXVlc3RDb250ZXh0LAogICAgICAgICAgKG1hdGNoLnJvdXRlLmxvYWRlciB8fCBtYXRjaC5yb3V0ZS5sYXp5KSAhPSBudWxsICYmICghZmlsdGVyTWF0Y2hlc1RvTG9hZCB8fCBmaWx0ZXJNYXRjaGVzVG9Mb2FkKG1hdGNoKSkKICAgICAgICApOwogICAgICB9KTsKICAgIH0KICAgIGlmICghZGF0YVN0cmF0ZWd5ICYmICFkc01hdGNoZXMuc29tZSgobSkgPT4gbS5zaG91bGRMb2FkKSkgewogICAgICByZXR1cm4gewogICAgICAgIG1hdGNoZXMsCiAgICAgICAgbG9hZGVyRGF0YToge30sCiAgICAgICAgZXJyb3JzOiBwZW5kaW5nQWN0aW9uUmVzdWx0ICYmIGlzRXJyb3JSZXN1bHQocGVuZGluZ0FjdGlvblJlc3VsdFsxXSkgPyB7CiAgICAgICAgICBbcGVuZGluZ0FjdGlvblJlc3VsdFswXV06IHBlbmRpbmdBY3Rpb25SZXN1bHRbMV0uZXJyb3IKICAgICAgICB9IDogbnVsbCwKICAgICAgICBzdGF0dXNDb2RlOiAyMDAsCiAgICAgICAgbG9hZGVySGVhZGVyczoge30KICAgICAgfTsKICAgIH0KICAgIGxldCByZXN1bHRzID0gYXdhaXQgY2FsbERhdGFTdHJhdGVneSgKICAgICAgcmVxdWVzdCwKICAgICAgZHNNYXRjaGVzLAogICAgICBpc1JvdXRlUmVxdWVzdCwKICAgICAgcmVxdWVzdENvbnRleHQsCiAgICAgIGRhdGFTdHJhdGVneQogICAgKTsKICAgIGlmIChyZXF1ZXN0LnNpZ25hbC5hYm9ydGVkKSB7CiAgICAgIHRocm93U3RhdGljSGFuZGxlckFib3J0ZWRFcnJvcihyZXF1ZXN0LCBpc1JvdXRlUmVxdWVzdCk7CiAgICB9CiAgICBsZXQgaGFuZGxlckNvbnRleHQgPSBwcm9jZXNzUm91dGVMb2FkZXJEYXRhKAogICAgICBtYXRjaGVzLAogICAgICByZXN1bHRzLAogICAgICBwZW5kaW5nQWN0aW9uUmVzdWx0LAogICAgICB0cnVlLAogICAgICBza2lwTG9hZGVyRXJyb3JCdWJibGluZwogICAgKTsKICAgIHJldHVybiB7CiAgICAgIC4uLmhhbmRsZXJDb250ZXh0LAogICAgICBtYXRjaGVzCiAgICB9OwogIH0KICBhc3luYyBmdW5jdGlvbiBjYWxsRGF0YVN0cmF0ZWd5KHJlcXVlc3QsIG1hdGNoZXMsIGlzUm91dGVSZXF1ZXN0LCByZXF1ZXN0Q29udGV4dCwgZGF0YVN0cmF0ZWd5KSB7CiAgICBsZXQgcmVzdWx0cyA9IGF3YWl0IGNhbGxEYXRhU3RyYXRlZ3lJbXBsKAogICAgICBkYXRhU3RyYXRlZ3kgfHwgZGVmYXVsdERhdGFTdHJhdGVneSwKICAgICAgcmVxdWVzdCwKICAgICAgbWF0Y2hlcywKICAgICAgbnVsbCwKICAgICAgcmVxdWVzdENvbnRleHQsCiAgICAgIHRydWUKICAgICk7CiAgICBsZXQgZGF0YVJlc3VsdHMgPSB7fTsKICAgIGF3YWl0IFByb21pc2UuYWxsKAogICAgICBtYXRjaGVzLm1hcChhc3luYyAobWF0Y2gpID0+IHsKICAgICAgICBpZiAoIShtYXRjaC5yb3V0ZS5pZCBpbiByZXN1bHRzKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBsZXQgcmVzdWx0ID0gcmVzdWx0c1ttYXRjaC5yb3V0ZS5pZF07CiAgICAgICAgaWYgKGlzUmVkaXJlY3REYXRhU3RyYXRlZ3lSZXN1bHQocmVzdWx0KSkgewogICAgICAgICAgbGV0IHJlc3BvbnNlID0gcmVzdWx0LnJlc3VsdDsKICAgICAgICAgIHRocm93IG5vcm1hbGl6ZVJlbGF0aXZlUm91dGluZ1JlZGlyZWN0UmVzcG9uc2UoCiAgICAgICAgICAgIHJlc3BvbnNlLAogICAgICAgICAgICByZXF1ZXN0LAogICAgICAgICAgICBtYXRjaC5yb3V0ZS5pZCwKICAgICAgICAgICAgbWF0Y2hlcywKICAgICAgICAgICAgYmFzZW5hbWUKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGlmIChpc1JvdXRlUmVxdWVzdCkgewogICAgICAgICAgaWYgKGlzUmVzcG9uc2UocmVzdWx0LnJlc3VsdCkpIHsKICAgICAgICAgICAgdGhyb3cgcmVzdWx0OwogICAgICAgICAgfSBlbHNlIGlmIChpc0RhdGFXaXRoUmVzcG9uc2VJbml0KHJlc3VsdC5yZXN1bHQpKSB7CiAgICAgICAgICAgIHRocm93IGRhdGFXaXRoUmVzcG9uc2VJbml0VG9SZXNwb25zZShyZXN1bHQucmVzdWx0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZGF0YVJlc3VsdHNbbWF0Y2gucm91dGUuaWRdID0gYXdhaXQgY29udmVydERhdGFTdHJhdGVneVJlc3VsdFRvRGF0YVJlc3VsdChyZXN1bHQpOwogICAgICB9KQogICAgKTsKICAgIHJldHVybiBkYXRhUmVzdWx0czsKICB9CiAgcmV0dXJuIHsKICAgIGRhdGFSb3V0ZXMsCiAgICBxdWVyeSwKICAgIHF1ZXJ5Um91dGUKICB9Owp9CmZ1bmN0aW9uIGdldFN0YXRpY0NvbnRleHRGcm9tRXJyb3Iocm91dGVzLCBoYW5kbGVyQ29udGV4dCwgZXJyb3IsIGJvdW5kYXJ5SWQpIHsKICBsZXQgZXJyb3JCb3VuZGFyeUlkID0gYm91bmRhcnlJZCB8fCBoYW5kbGVyQ29udGV4dC5fZGVlcGVzdFJlbmRlcmVkQm91bmRhcnlJZCB8fCByb3V0ZXNbMF0uaWQ7CiAgcmV0dXJuIHsKICAgIC4uLmhhbmRsZXJDb250ZXh0LAogICAgc3RhdHVzQ29kZTogaXNSb3V0ZUVycm9yUmVzcG9uc2UoZXJyb3IpID8gZXJyb3Iuc3RhdHVzIDogNTAwLAogICAgZXJyb3JzOiB7CiAgICAgIFtlcnJvckJvdW5kYXJ5SWRdOiBlcnJvcgogICAgfQogIH07Cn0KZnVuY3Rpb24gdGhyb3dTdGF0aWNIYW5kbGVyQWJvcnRlZEVycm9yKHJlcXVlc3QsIGlzUm91dGVSZXF1ZXN0KSB7CiAgaWYgKHJlcXVlc3Quc2lnbmFsLnJlYXNvbiAhPT0gdm9pZCAwKSB7CiAgICB0aHJvdyByZXF1ZXN0LnNpZ25hbC5yZWFzb247CiAgfQogIGxldCBtZXRob2QgPSBpc1JvdXRlUmVxdWVzdCA/ICJxdWVyeVJvdXRlIiA6ICJxdWVyeSI7CiAgdGhyb3cgbmV3IEVycm9yKAogICAgYCR7bWV0aG9kfSgpIGNhbGwgYWJvcnRlZCB3aXRob3V0IGFuIFxgQWJvcnRTaWduYWwucmVhc29uXGA6ICR7cmVxdWVzdC5tZXRob2R9ICR7cmVxdWVzdC51cmx9YAogICk7Cn0KZnVuY3Rpb24gaXNTdWJtaXNzaW9uTmF2aWdhdGlvbihvcHRzKSB7CiAgcmV0dXJuIG9wdHMgIT0gbnVsbCAmJiAoImZvcm1EYXRhIiBpbiBvcHRzICYmIG9wdHMuZm9ybURhdGEgIT0gbnVsbCB8fCAiYm9keSIgaW4gb3B0cyAmJiBvcHRzLmJvZHkgIT09IHZvaWQgMCk7Cn0KZnVuY3Rpb24gbm9ybWFsaXplVG8obG9jYXRpb24yLCBtYXRjaGVzLCBiYXNlbmFtZSwgdG8sIGZyb21Sb3V0ZUlkLCByZWxhdGl2ZSkgewogIGxldCBjb250ZXh0dWFsTWF0Y2hlczsKICBsZXQgYWN0aXZlUm91dGVNYXRjaDsKICBpZiAoZnJvbVJvdXRlSWQpIHsKICAgIGNvbnRleHR1YWxNYXRjaGVzID0gW107CiAgICBmb3IgKGxldCBtYXRjaCBvZiBtYXRjaGVzKSB7CiAgICAgIGNvbnRleHR1YWxNYXRjaGVzLnB1c2gobWF0Y2gpOwogICAgICBpZiAobWF0Y2gucm91dGUuaWQgPT09IGZyb21Sb3V0ZUlkKSB7CiAgICAgICAgYWN0aXZlUm91dGVNYXRjaCA9IG1hdGNoOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgfSBlbHNlIHsKICAgIGNvbnRleHR1YWxNYXRjaGVzID0gbWF0Y2hlczsKICAgIGFjdGl2ZVJvdXRlTWF0Y2ggPSBtYXRjaGVzW21hdGNoZXMubGVuZ3RoIC0gMV07CiAgfQogIGxldCBwYXRoID0gcmVzb2x2ZVRvKAogICAgdG8gPyB0byA6ICIuIiwKICAgIGdldFJlc29sdmVUb01hdGNoZXMoY29udGV4dHVhbE1hdGNoZXMpLAogICAgc3RyaXBCYXNlbmFtZShsb2NhdGlvbjIucGF0aG5hbWUsIGJhc2VuYW1lKSB8fCBsb2NhdGlvbjIucGF0aG5hbWUsCiAgICByZWxhdGl2ZSA9PT0gInBhdGgiCiAgKTsKICBpZiAodG8gPT0gbnVsbCkgewogICAgcGF0aC5zZWFyY2ggPSBsb2NhdGlvbjIuc2VhcmNoOwogICAgcGF0aC5oYXNoID0gbG9jYXRpb24yLmhhc2g7CiAgfQogIGlmICgodG8gPT0gbnVsbCB8fCB0byA9PT0gIiIgfHwgdG8gPT09ICIuIikgJiYgYWN0aXZlUm91dGVNYXRjaCkgewogICAgbGV0IG5ha2VkSW5kZXggPSBoYXNOYWtlZEluZGV4UXVlcnkocGF0aC5zZWFyY2gpOwogICAgaWYgKGFjdGl2ZVJvdXRlTWF0Y2gucm91dGUuaW5kZXggJiYgIW5ha2VkSW5kZXgpIHsKICAgICAgcGF0aC5zZWFyY2ggPSBwYXRoLnNlYXJjaCA/IHBhdGguc2VhcmNoLnJlcGxhY2UoL15cPy8sICI/aW5kZXgmIikgOiAiP2luZGV4IjsKICAgIH0gZWxzZSBpZiAoIWFjdGl2ZVJvdXRlTWF0Y2gucm91dGUuaW5kZXggJiYgbmFrZWRJbmRleCkgewogICAgICBsZXQgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhwYXRoLnNlYXJjaCk7CiAgICAgIGxldCBpbmRleFZhbHVlcyA9IHBhcmFtcy5nZXRBbGwoImluZGV4Iik7CiAgICAgIHBhcmFtcy5kZWxldGUoImluZGV4Iik7CiAgICAgIGluZGV4VmFsdWVzLmZpbHRlcigodikgPT4gdikuZm9yRWFjaCgodikgPT4gcGFyYW1zLmFwcGVuZCgiaW5kZXgiLCB2KSk7CiAgICAgIGxldCBxcyA9IHBhcmFtcy50b1N0cmluZygpOwogICAgICBwYXRoLnNlYXJjaCA9IHFzID8gYD8ke3FzfWAgOiAiIjsKICAgIH0KICB9CiAgaWYgKGJhc2VuYW1lICE9PSAiLyIpIHsKICAgIHBhdGgucGF0aG5hbWUgPSBwcmVwZW5kQmFzZW5hbWUoeyBiYXNlbmFtZSwgcGF0aG5hbWU6IHBhdGgucGF0aG5hbWUgfSk7CiAgfQogIHJldHVybiBjcmVhdGVQYXRoKHBhdGgpOwp9CmZ1bmN0aW9uIG5vcm1hbGl6ZU5hdmlnYXRlT3B0aW9ucyhpc0ZldGNoZXIsIHBhdGgsIG9wdHMpIHsKICBpZiAoIW9wdHMgfHwgIWlzU3VibWlzc2lvbk5hdmlnYXRpb24ob3B0cykpIHsKICAgIHJldHVybiB7IHBhdGggfTsKICB9CiAgaWYgKG9wdHMuZm9ybU1ldGhvZCAmJiAhaXNWYWxpZE1ldGhvZChvcHRzLmZvcm1NZXRob2QpKSB7CiAgICByZXR1cm4gewogICAgICBwYXRoLAogICAgICBlcnJvcjogZ2V0SW50ZXJuYWxSb3V0ZXJFcnJvcig0MDUsIHsgbWV0aG9kOiBvcHRzLmZvcm1NZXRob2QgfSkKICAgIH07CiAgfQogIGxldCBnZXRJbnZhbGlkQm9keUVycm9yID0gKCkgPT4gKHsKICAgIHBhdGgsCiAgICBlcnJvcjogZ2V0SW50ZXJuYWxSb3V0ZXJFcnJvcig0MDAsIHsgdHlwZTogImludmFsaWQtYm9keSIgfSkKICB9KTsKICBsZXQgcmF3Rm9ybU1ldGhvZCA9IG9wdHMuZm9ybU1ldGhvZCB8fCAiZ2V0IjsKICBsZXQgZm9ybU1ldGhvZCA9IHJhd0Zvcm1NZXRob2QudG9VcHBlckNhc2UoKTsKICBsZXQgZm9ybUFjdGlvbiA9IHN0cmlwSGFzaEZyb21QYXRoKHBhdGgpOwogIGlmIChvcHRzLmJvZHkgIT09IHZvaWQgMCkgewogICAgaWYgKG9wdHMuZm9ybUVuY1R5cGUgPT09ICJ0ZXh0L3BsYWluIikgewogICAgICBpZiAoIWlzTXV0YXRpb25NZXRob2QoZm9ybU1ldGhvZCkpIHsKICAgICAgICByZXR1cm4gZ2V0SW52YWxpZEJvZHlFcnJvcigpOwogICAgICB9CiAgICAgIGxldCB0ZXh0ID0gdHlwZW9mIG9wdHMuYm9keSA9PT0gInN0cmluZyIgPyBvcHRzLmJvZHkgOiBvcHRzLmJvZHkgaW5zdGFuY2VvZiBGb3JtRGF0YSB8fCBvcHRzLmJvZHkgaW5zdGFuY2VvZiBVUkxTZWFyY2hQYXJhbXMgPyAoCiAgICAgICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZm9ybS1jb250cm9sLWluZnJhc3RydWN0dXJlLmh0bWwjcGxhaW4tdGV4dC1mb3JtLWRhdGEKICAgICAgICBBcnJheS5mcm9tKG9wdHMuYm9keS5lbnRyaWVzKCkpLnJlZHVjZSgKICAgICAgICAgIChhY2MsIFtuYW1lLCB2YWx1ZV0pID0+IGAke2FjY30ke25hbWV9PSR7dmFsdWV9CmAsCiAgICAgICAgICAiIgogICAgICAgICkKICAgICAgKSA6IFN0cmluZyhvcHRzLmJvZHkpOwogICAgICByZXR1cm4gewogICAgICAgIHBhdGgsCiAgICAgICAgc3VibWlzc2lvbjogewogICAgICAgICAgZm9ybU1ldGhvZCwKICAgICAgICAgIGZvcm1BY3Rpb24sCiAgICAgICAgICBmb3JtRW5jVHlwZTogb3B0cy5mb3JtRW5jVHlwZSwKICAgICAgICAgIGZvcm1EYXRhOiB2b2lkIDAsCiAgICAgICAgICBqc29uOiB2b2lkIDAsCiAgICAgICAgICB0ZXh0CiAgICAgICAgfQogICAgICB9OwogICAgfSBlbHNlIGlmIChvcHRzLmZvcm1FbmNUeXBlID09PSAiYXBwbGljYXRpb24vanNvbiIpIHsKICAgICAgaWYgKCFpc011dGF0aW9uTWV0aG9kKGZvcm1NZXRob2QpKSB7CiAgICAgICAgcmV0dXJuIGdldEludmFsaWRCb2R5RXJyb3IoKTsKICAgICAgfQogICAgICB0cnkgewogICAgICAgIGxldCBqc29uID0gdHlwZW9mIG9wdHMuYm9keSA9PT0gInN0cmluZyIgPyBKU09OLnBhcnNlKG9wdHMuYm9keSkgOiBvcHRzLmJvZHk7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHBhdGgsCiAgICAgICAgICBzdWJtaXNzaW9uOiB7CiAgICAgICAgICAgIGZvcm1NZXRob2QsCiAgICAgICAgICAgIGZvcm1BY3Rpb24sCiAgICAgICAgICAgIGZvcm1FbmNUeXBlOiBvcHRzLmZvcm1FbmNUeXBlLAogICAgICAgICAgICBmb3JtRGF0YTogdm9pZCAwLAogICAgICAgICAgICBqc29uLAogICAgICAgICAgICB0ZXh0OiB2b2lkIDAKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuIGdldEludmFsaWRCb2R5RXJyb3IoKTsKICAgICAgfQogICAgfQogIH0KICBpbnZhcmlhbnQoCiAgICB0eXBlb2YgRm9ybURhdGEgPT09ICJmdW5jdGlvbiIsCiAgICAiRm9ybURhdGEgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50IgogICk7CiAgbGV0IHNlYXJjaFBhcmFtczsKICBsZXQgZm9ybURhdGE7CiAgaWYgKG9wdHMuZm9ybURhdGEpIHsKICAgIHNlYXJjaFBhcmFtcyA9IGNvbnZlcnRGb3JtRGF0YVRvU2VhcmNoUGFyYW1zKG9wdHMuZm9ybURhdGEpOwogICAgZm9ybURhdGEgPSBvcHRzLmZvcm1EYXRhOwogIH0gZWxzZSBpZiAob3B0cy5ib2R5IGluc3RhbmNlb2YgRm9ybURhdGEpIHsKICAgIHNlYXJjaFBhcmFtcyA9IGNvbnZlcnRGb3JtRGF0YVRvU2VhcmNoUGFyYW1zKG9wdHMuYm9keSk7CiAgICBmb3JtRGF0YSA9IG9wdHMuYm9keTsKICB9IGVsc2UgaWYgKG9wdHMuYm9keSBpbnN0YW5jZW9mIFVSTFNlYXJjaFBhcmFtcykgewogICAgc2VhcmNoUGFyYW1zID0gb3B0cy5ib2R5OwogICAgZm9ybURhdGEgPSBjb252ZXJ0U2VhcmNoUGFyYW1zVG9Gb3JtRGF0YShzZWFyY2hQYXJhbXMpOwogIH0gZWxzZSBpZiAob3B0cy5ib2R5ID09IG51bGwpIHsKICAgIHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsKICAgIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgfSBlbHNlIHsKICAgIHRyeSB7CiAgICAgIHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMob3B0cy5ib2R5KTsKICAgICAgZm9ybURhdGEgPSBjb252ZXJ0U2VhcmNoUGFyYW1zVG9Gb3JtRGF0YShzZWFyY2hQYXJhbXMpOwogICAgfSBjYXRjaCAoZSkgewogICAgICByZXR1cm4gZ2V0SW52YWxpZEJvZHlFcnJvcigpOwogICAgfQogIH0KICBsZXQgc3VibWlzc2lvbiA9IHsKICAgIGZvcm1NZXRob2QsCiAgICBmb3JtQWN0aW9uLAogICAgZm9ybUVuY1R5cGU6IG9wdHMgJiYgb3B0cy5mb3JtRW5jVHlwZSB8fCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiwKICAgIGZvcm1EYXRhLAogICAganNvbjogdm9pZCAwLAogICAgdGV4dDogdm9pZCAwCiAgfTsKICBpZiAoaXNNdXRhdGlvbk1ldGhvZChzdWJtaXNzaW9uLmZvcm1NZXRob2QpKSB7CiAgICByZXR1cm4geyBwYXRoLCBzdWJtaXNzaW9uIH07CiAgfQogIGxldCBwYXJzZWRQYXRoID0gcGFyc2VQYXRoKHBhdGgpOwogIGlmIChpc0ZldGNoZXIgJiYgcGFyc2VkUGF0aC5zZWFyY2ggJiYgaGFzTmFrZWRJbmRleFF1ZXJ5KHBhcnNlZFBhdGguc2VhcmNoKSkgewogICAgc2VhcmNoUGFyYW1zLmFwcGVuZCgiaW5kZXgiLCAiIik7CiAgfQogIHBhcnNlZFBhdGguc2VhcmNoID0gYD8ke3NlYXJjaFBhcmFtc31gOwogIHJldHVybiB7IHBhdGg6IGNyZWF0ZVBhdGgocGFyc2VkUGF0aCksIHN1Ym1pc3Npb24gfTsKfQpmdW5jdGlvbiBnZXRNYXRjaGVzVG9Mb2FkKHJlcXVlc3QsIHNjb3BlZENvbnRleHQsIG1hcFJvdXRlUHJvcGVydGllczIsIG1hbmlmZXN0LCBoaXN0b3J5LCBzdGF0ZSwgbWF0Y2hlcywgc3VibWlzc2lvbiwgbG9jYXRpb24yLCBsYXp5Um91dGVQcm9wZXJ0aWVzVG9Ta2lwLCBpbml0aWFsSHlkcmF0aW9uLCBpc1JldmFsaWRhdGlvblJlcXVpcmVkLCBjYW5jZWxsZWRGZXRjaGVyTG9hZHMsIGZldGNoZXJzUXVldWVkRm9yRGVsZXRpb24sIGZldGNoTG9hZE1hdGNoZXMsIGZldGNoUmVkaXJlY3RJZHMsIHJvdXRlc1RvVXNlLCBiYXNlbmFtZSwgaGFzUGF0Y2hSb3V0ZXNPbk5hdmlnYXRpb24sIHBlbmRpbmdBY3Rpb25SZXN1bHQpIHsKICB2YXIgX2E7CiAgbGV0IGFjdGlvblJlc3VsdCA9IHBlbmRpbmdBY3Rpb25SZXN1bHQgPyBpc0Vycm9yUmVzdWx0KHBlbmRpbmdBY3Rpb25SZXN1bHRbMV0pID8gcGVuZGluZ0FjdGlvblJlc3VsdFsxXS5lcnJvciA6IHBlbmRpbmdBY3Rpb25SZXN1bHRbMV0uZGF0YSA6IHZvaWQgMDsKICBsZXQgY3VycmVudFVybCA9IGhpc3RvcnkuY3JlYXRlVVJMKHN0YXRlLmxvY2F0aW9uKTsKICBsZXQgbmV4dFVybCA9IGhpc3RvcnkuY3JlYXRlVVJMKGxvY2F0aW9uMik7CiAgbGV0IG1heElkeDsKICBpZiAoaW5pdGlhbEh5ZHJhdGlvbiAmJiBzdGF0ZS5lcnJvcnMpIHsKICAgIGxldCBib3VuZGFyeUlkID0gT2JqZWN0LmtleXMoc3RhdGUuZXJyb3JzKVswXTsKICAgIG1heElkeCA9IG1hdGNoZXMuZmluZEluZGV4KChtKSA9PiBtLnJvdXRlLmlkID09PSBib3VuZGFyeUlkKTsKICB9IGVsc2UgaWYgKHBlbmRpbmdBY3Rpb25SZXN1bHQgJiYgaXNFcnJvclJlc3VsdChwZW5kaW5nQWN0aW9uUmVzdWx0WzFdKSkgewogICAgbGV0IGJvdW5kYXJ5SWQgPSBwZW5kaW5nQWN0aW9uUmVzdWx0WzBdOwogICAgbWF4SWR4ID0gbWF0Y2hlcy5maW5kSW5kZXgoKG0pID0+IG0ucm91dGUuaWQgPT09IGJvdW5kYXJ5SWQpIC0gMTsKICB9CiAgbGV0IGFjdGlvblN0YXR1cyA9IHBlbmRpbmdBY3Rpb25SZXN1bHQgPyBwZW5kaW5nQWN0aW9uUmVzdWx0WzFdLnN0YXR1c0NvZGUgOiB2b2lkIDA7CiAgbGV0IHNob3VsZFNraXBSZXZhbGlkYXRpb24gPSBhY3Rpb25TdGF0dXMgJiYgYWN0aW9uU3RhdHVzID49IDQwMDsKICBsZXQgYmFzZVNob3VsZFJldmFsaWRhdGVBcmdzID0gewogICAgY3VycmVudFVybCwKICAgIGN1cnJlbnRQYXJhbXM6ICgoX2EgPSBzdGF0ZS5tYXRjaGVzWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX2EucGFyYW1zKSB8fCB7fSwKICAgIG5leHRVcmwsCiAgICBuZXh0UGFyYW1zOiBtYXRjaGVzWzBdLnBhcmFtcywKICAgIC4uLnN1Ym1pc3Npb24sCiAgICBhY3Rpb25SZXN1bHQsCiAgICBhY3Rpb25TdGF0dXMKICB9OwogIGxldCBkc01hdGNoZXMgPSBtYXRjaGVzLm1hcCgobWF0Y2gsIGluZGV4KSA9PiB7CiAgICBsZXQgeyByb3V0ZSB9ID0gbWF0Y2g7CiAgICBsZXQgZm9yY2VTaG91bGRMb2FkID0gbnVsbDsKICAgIGlmIChtYXhJZHggIT0gbnVsbCAmJiBpbmRleCA+IG1heElkeCkgewogICAgICBmb3JjZVNob3VsZExvYWQgPSBmYWxzZTsKICAgIH0gZWxzZSBpZiAocm91dGUubGF6eSkgewogICAgICBmb3JjZVNob3VsZExvYWQgPSB0cnVlOwogICAgfSBlbHNlIGlmIChyb3V0ZS5sb2FkZXIgPT0gbnVsbCkgewogICAgICBmb3JjZVNob3VsZExvYWQgPSBmYWxzZTsKICAgIH0gZWxzZSBpZiAoaW5pdGlhbEh5ZHJhdGlvbikgewogICAgICBmb3JjZVNob3VsZExvYWQgPSBzaG91bGRMb2FkUm91dGVPbkh5ZHJhdGlvbigKICAgICAgICByb3V0ZSwKICAgICAgICBzdGF0ZS5sb2FkZXJEYXRhLAogICAgICAgIHN0YXRlLmVycm9ycwogICAgICApOwogICAgfSBlbHNlIGlmIChpc05ld0xvYWRlcihzdGF0ZS5sb2FkZXJEYXRhLCBzdGF0ZS5tYXRjaGVzW2luZGV4XSwgbWF0Y2gpKSB7CiAgICAgIGZvcmNlU2hvdWxkTG9hZCA9IHRydWU7CiAgICB9CiAgICBpZiAoZm9yY2VTaG91bGRMb2FkICE9PSBudWxsKSB7CiAgICAgIHJldHVybiBnZXREYXRhU3RyYXRlZ3lNYXRjaCgKICAgICAgICBtYXBSb3V0ZVByb3BlcnRpZXMyLAogICAgICAgIG1hbmlmZXN0LAogICAgICAgIHJlcXVlc3QsCiAgICAgICAgbWF0Y2gsCiAgICAgICAgbGF6eVJvdXRlUHJvcGVydGllc1RvU2tpcCwKICAgICAgICBzY29wZWRDb250ZXh0LAogICAgICAgIGZvcmNlU2hvdWxkTG9hZAogICAgICApOwogICAgfQogICAgbGV0IGRlZmF1bHRTaG91bGRSZXZhbGlkYXRlID0gc2hvdWxkU2tpcFJldmFsaWRhdGlvbiA/IGZhbHNlIDogKAogICAgICAvLyBGb3JjZWQgcmV2YWxpZGF0aW9uIGR1ZSB0byBzdWJtaXNzaW9uLCB1c2VSZXZhbGlkYXRvciwgb3IgWC1SZW1peC1SZXZhbGlkYXRlCiAgICAgIGlzUmV2YWxpZGF0aW9uUmVxdWlyZWQgfHwgY3VycmVudFVybC5wYXRobmFtZSArIGN1cnJlbnRVcmwuc2VhcmNoID09PSBuZXh0VXJsLnBhdGhuYW1lICsgbmV4dFVybC5zZWFyY2ggfHwgLy8gU2VhcmNoIHBhcmFtcyBhZmZlY3QgYWxsIGxvYWRlcnMKICAgICAgY3VycmVudFVybC5zZWFyY2ggIT09IG5leHRVcmwuc2VhcmNoIHx8IGlzTmV3Um91dGVJbnN0YW5jZShzdGF0ZS5tYXRjaGVzW2luZGV4XSwgbWF0Y2gpCiAgICApOwogICAgbGV0IHNob3VsZFJldmFsaWRhdGVBcmdzID0gewogICAgICAuLi5iYXNlU2hvdWxkUmV2YWxpZGF0ZUFyZ3MsCiAgICAgIGRlZmF1bHRTaG91bGRSZXZhbGlkYXRlCiAgICB9OwogICAgbGV0IHNob3VsZExvYWQgPSBzaG91bGRSZXZhbGlkYXRlTG9hZGVyKG1hdGNoLCBzaG91bGRSZXZhbGlkYXRlQXJncyk7CiAgICByZXR1cm4gZ2V0RGF0YVN0cmF0ZWd5TWF0Y2goCiAgICAgIG1hcFJvdXRlUHJvcGVydGllczIsCiAgICAgIG1hbmlmZXN0LAogICAgICByZXF1ZXN0LAogICAgICBtYXRjaCwKICAgICAgbGF6eVJvdXRlUHJvcGVydGllc1RvU2tpcCwKICAgICAgc2NvcGVkQ29udGV4dCwKICAgICAgc2hvdWxkTG9hZCwKICAgICAgc2hvdWxkUmV2YWxpZGF0ZUFyZ3MKICAgICk7CiAgfSk7CiAgbGV0IHJldmFsaWRhdGluZ0ZldGNoZXJzID0gW107CiAgZmV0Y2hMb2FkTWF0Y2hlcy5mb3JFYWNoKChmLCBrZXkpID0+IHsKICAgIGlmIChpbml0aWFsSHlkcmF0aW9uIHx8ICFtYXRjaGVzLnNvbWUoKG0pID0+IG0ucm91dGUuaWQgPT09IGYucm91dGVJZCkgfHwgZmV0Y2hlcnNRdWV1ZWRGb3JEZWxldGlvbi5oYXMoa2V5KSkgewogICAgICByZXR1cm47CiAgICB9CiAgICBsZXQgZmV0Y2hlciA9IHN0YXRlLmZldGNoZXJzLmdldChrZXkpOwogICAgbGV0IGlzTWlkSW5pdGlhbExvYWQgPSBmZXRjaGVyICYmIGZldGNoZXIuc3RhdGUgIT09ICJpZGxlIiAmJiBmZXRjaGVyLmRhdGEgPT09IHZvaWQgMDsKICAgIGxldCBmZXRjaGVyTWF0Y2hlcyA9IG1hdGNoUm91dGVzKHJvdXRlc1RvVXNlLCBmLnBhdGgsIGJhc2VuYW1lKTsKICAgIGlmICghZmV0Y2hlck1hdGNoZXMpIHsKICAgICAgaWYgKGhhc1BhdGNoUm91dGVzT25OYXZpZ2F0aW9uICYmIGlzTWlkSW5pdGlhbExvYWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV2YWxpZGF0aW5nRmV0Y2hlcnMucHVzaCh7CiAgICAgICAga2V5LAogICAgICAgIHJvdXRlSWQ6IGYucm91dGVJZCwKICAgICAgICBwYXRoOiBmLnBhdGgsCiAgICAgICAgbWF0Y2hlczogbnVsbCwKICAgICAgICBtYXRjaDogbnVsbCwKICAgICAgICByZXF1ZXN0OiBudWxsLAogICAgICAgIGNvbnRyb2xsZXI6IG51bGwKICAgICAgfSk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChmZXRjaFJlZGlyZWN0SWRzLmhhcyhrZXkpKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGxldCBmZXRjaGVyTWF0Y2ggPSBnZXRUYXJnZXRNYXRjaChmZXRjaGVyTWF0Y2hlcywgZi5wYXRoKTsKICAgIGxldCBmZXRjaENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7CiAgICBsZXQgZmV0Y2hSZXF1ZXN0ID0gY3JlYXRlQ2xpZW50U2lkZVJlcXVlc3QoCiAgICAgIGhpc3RvcnksCiAgICAgIGYucGF0aCwKICAgICAgZmV0Y2hDb250cm9sbGVyLnNpZ25hbAogICAgKTsKICAgIGxldCBmZXRjaGVyRHNNYXRjaGVzID0gbnVsbDsKICAgIGlmIChjYW5jZWxsZWRGZXRjaGVyTG9hZHMuaGFzKGtleSkpIHsKICAgICAgY2FuY2VsbGVkRmV0Y2hlckxvYWRzLmRlbGV0ZShrZXkpOwogICAgICBmZXRjaGVyRHNNYXRjaGVzID0gZ2V0VGFyZ2V0ZWREYXRhU3RyYXRlZ3lNYXRjaGVzKAogICAgICAgIG1hcFJvdXRlUHJvcGVydGllczIsCiAgICAgICAgbWFuaWZlc3QsCiAgICAgICAgZmV0Y2hSZXF1ZXN0LAogICAgICAgIGZldGNoZXJNYXRjaGVzLAogICAgICAgIGZldGNoZXJNYXRjaCwKICAgICAgICBsYXp5Um91dGVQcm9wZXJ0aWVzVG9Ta2lwLAogICAgICAgIHNjb3BlZENvbnRleHQKICAgICAgKTsKICAgIH0gZWxzZSBpZiAoaXNNaWRJbml0aWFsTG9hZCkgewogICAgICBpZiAoaXNSZXZhbGlkYXRpb25SZXF1aXJlZCkgewogICAgICAgIGZldGNoZXJEc01hdGNoZXMgPSBnZXRUYXJnZXRlZERhdGFTdHJhdGVneU1hdGNoZXMoCiAgICAgICAgICBtYXBSb3V0ZVByb3BlcnRpZXMyLAogICAgICAgICAgbWFuaWZlc3QsCiAgICAgICAgICBmZXRjaFJlcXVlc3QsCiAgICAgICAgICBmZXRjaGVyTWF0Y2hlcywKICAgICAgICAgIGZldGNoZXJNYXRjaCwKICAgICAgICAgIGxhenlSb3V0ZVByb3BlcnRpZXNUb1NraXAsCiAgICAgICAgICBzY29wZWRDb250ZXh0CiAgICAgICAgKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgbGV0IHNob3VsZFJldmFsaWRhdGVBcmdzID0gewogICAgICAgIC4uLmJhc2VTaG91bGRSZXZhbGlkYXRlQXJncywKICAgICAgICBkZWZhdWx0U2hvdWxkUmV2YWxpZGF0ZTogc2hvdWxkU2tpcFJldmFsaWRhdGlvbiA/IGZhbHNlIDogaXNSZXZhbGlkYXRpb25SZXF1aXJlZAogICAgICB9OwogICAgICBpZiAoc2hvdWxkUmV2YWxpZGF0ZUxvYWRlcihmZXRjaGVyTWF0Y2gsIHNob3VsZFJldmFsaWRhdGVBcmdzKSkgewogICAgICAgIGZldGNoZXJEc01hdGNoZXMgPSBnZXRUYXJnZXRlZERhdGFTdHJhdGVneU1hdGNoZXMoCiAgICAgICAgICBtYXBSb3V0ZVByb3BlcnRpZXMyLAogICAgICAgICAgbWFuaWZlc3QsCiAgICAgICAgICBmZXRjaFJlcXVlc3QsCiAgICAgICAgICBmZXRjaGVyTWF0Y2hlcywKICAgICAgICAgIGZldGNoZXJNYXRjaCwKICAgICAgICAgIGxhenlSb3V0ZVByb3BlcnRpZXNUb1NraXAsCiAgICAgICAgICBzY29wZWRDb250ZXh0LAogICAgICAgICAgc2hvdWxkUmV2YWxpZGF0ZUFyZ3MKICAgICAgICApOwogICAgICB9CiAgICB9CiAgICBpZiAoZmV0Y2hlckRzTWF0Y2hlcykgewogICAgICByZXZhbGlkYXRpbmdGZXRjaGVycy5wdXNoKHsKICAgICAgICBrZXksCiAgICAgICAgcm91dGVJZDogZi5yb3V0ZUlkLAogICAgICAgIHBhdGg6IGYucGF0aCwKICAgICAgICBtYXRjaGVzOiBmZXRjaGVyRHNNYXRjaGVzLAogICAgICAgIG1hdGNoOiBmZXRjaGVyTWF0Y2gsCiAgICAgICAgcmVxdWVzdDogZmV0Y2hSZXF1ZXN0LAogICAgICAgIGNvbnRyb2xsZXI6IGZldGNoQ29udHJvbGxlcgogICAgICB9KTsKICAgIH0KICB9KTsKICByZXR1cm4geyBkc01hdGNoZXMsIHJldmFsaWRhdGluZ0ZldGNoZXJzIH07Cn0KZnVuY3Rpb24gc2hvdWxkTG9hZFJvdXRlT25IeWRyYXRpb24ocm91dGUsIGxvYWRlckRhdGEsIGVycm9ycykgewogIGlmIChyb3V0ZS5sYXp5KSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgaWYgKCFyb3V0ZS5sb2FkZXIpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgbGV0IGhhc0RhdGEgPSBsb2FkZXJEYXRhICE9IG51bGwgJiYgcm91dGUuaWQgaW4gbG9hZGVyRGF0YTsKICBsZXQgaGFzRXJyb3IgPSBlcnJvcnMgIT0gbnVsbCAmJiBlcnJvcnNbcm91dGUuaWRdICE9PSB2b2lkIDA7CiAgaWYgKCFoYXNEYXRhICYmIGhhc0Vycm9yKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIGlmICh0eXBlb2Ygcm91dGUubG9hZGVyID09PSAiZnVuY3Rpb24iICYmIHJvdXRlLmxvYWRlci5oeWRyYXRlID09PSB0cnVlKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgcmV0dXJuICFoYXNEYXRhICYmICFoYXNFcnJvcjsKfQpmdW5jdGlvbiBpc05ld0xvYWRlcihjdXJyZW50TG9hZGVyRGF0YSwgY3VycmVudE1hdGNoLCBtYXRjaCkgewogIGxldCBpc05ldyA9ICgKICAgIC8vIFthXSAtPiBbYSwgYl0KICAgICFjdXJyZW50TWF0Y2ggfHwgLy8gW2EsIGJdIC0+IFthLCBjXQogICAgbWF0Y2gucm91dGUuaWQgIT09IGN1cnJlbnRNYXRjaC5yb3V0ZS5pZAogICk7CiAgbGV0IGlzTWlzc2luZ0RhdGEgPSAhY3VycmVudExvYWRlckRhdGEuaGFzT3duUHJvcGVydHkobWF0Y2gucm91dGUuaWQpOwogIHJldHVybiBpc05ldyB8fCBpc01pc3NpbmdEYXRhOwp9CmZ1bmN0aW9uIGlzTmV3Um91dGVJbnN0YW5jZShjdXJyZW50TWF0Y2gsIG1hdGNoKSB7CiAgbGV0IGN1cnJlbnRQYXRoID0gY3VycmVudE1hdGNoLnJvdXRlLnBhdGg7CiAgcmV0dXJuICgKICAgIC8vIHBhcmFtIGNoYW5nZSBmb3IgdGhpcyBtYXRjaCwgL3VzZXJzLzEyMyAtPiAvdXNlcnMvNDU2CiAgICBjdXJyZW50TWF0Y2gucGF0aG5hbWUgIT09IG1hdGNoLnBhdGhuYW1lIHx8IC8vIHNwbGF0IHBhcmFtIGNoYW5nZWQsIHdoaWNoIGlzIG5vdCBwcmVzZW50IGluIG1hdGNoLnBhdGgKICAgIC8vIGUuZy4gL2ZpbGVzL2ltYWdlcy9hdmF0YXIuanBnIC0+IGZpbGVzL2ZpbmFuY2VzLnhscwogICAgY3VycmVudFBhdGggIT0gbnVsbCAmJiBjdXJyZW50UGF0aC5lbmRzV2l0aCgiKiIpICYmIGN1cnJlbnRNYXRjaC5wYXJhbXNbIioiXSAhPT0gbWF0Y2gucGFyYW1zWyIqIl0KICApOwp9CmZ1bmN0aW9uIHNob3VsZFJldmFsaWRhdGVMb2FkZXIobG9hZGVyTWF0Y2gsIGFyZykgewogIGlmIChsb2FkZXJNYXRjaC5yb3V0ZS5zaG91bGRSZXZhbGlkYXRlKSB7CiAgICBsZXQgcm91dGVDaG9pY2UgPSBsb2FkZXJNYXRjaC5yb3V0ZS5zaG91bGRSZXZhbGlkYXRlKGFyZyk7CiAgICBpZiAodHlwZW9mIHJvdXRlQ2hvaWNlID09PSAiYm9vbGVhbiIpIHsKICAgICAgcmV0dXJuIHJvdXRlQ2hvaWNlOwogICAgfQogIH0KICByZXR1cm4gYXJnLmRlZmF1bHRTaG91bGRSZXZhbGlkYXRlOwp9CmZ1bmN0aW9uIHBhdGNoUm91dGVzSW1wbChyb3V0ZUlkLCBjaGlsZHJlbiwgcm91dGVzVG9Vc2UsIG1hbmlmZXN0LCBtYXBSb3V0ZVByb3BlcnRpZXMyLCBhbGxvd0VsZW1lbnRNdXRhdGlvbnMpIHsKICBsZXQgY2hpbGRyZW5Ub1BhdGNoOwogIGlmIChyb3V0ZUlkKSB7CiAgICBsZXQgcm91dGUgPSBtYW5pZmVzdFtyb3V0ZUlkXTsKICAgIGludmFyaWFudCgKICAgICAgcm91dGUsCiAgICAgIGBObyByb3V0ZSBmb3VuZCB0byBwYXRjaCBjaGlsZHJlbiBpbnRvOiByb3V0ZUlkID0gJHtyb3V0ZUlkfWAKICAgICk7CiAgICBpZiAoIXJvdXRlLmNoaWxkcmVuKSB7CiAgICAgIHJvdXRlLmNoaWxkcmVuID0gW107CiAgICB9CiAgICBjaGlsZHJlblRvUGF0Y2ggPSByb3V0ZS5jaGlsZHJlbjsKICB9IGVsc2UgewogICAgY2hpbGRyZW5Ub1BhdGNoID0gcm91dGVzVG9Vc2U7CiAgfQogIGxldCB1bmlxdWVDaGlsZHJlbiA9IFtdOwogIGxldCBleGlzdGluZ0NoaWxkcmVuID0gW107CiAgY2hpbGRyZW4uZm9yRWFjaCgobmV3Um91dGUpID0+IHsKICAgIGxldCBleGlzdGluZ1JvdXRlID0gY2hpbGRyZW5Ub1BhdGNoLmZpbmQoCiAgICAgIChleGlzdGluZ1JvdXRlMikgPT4gaXNTYW1lUm91dGUobmV3Um91dGUsIGV4aXN0aW5nUm91dGUyKQogICAgKTsKICAgIGlmIChleGlzdGluZ1JvdXRlKSB7CiAgICAgIGV4aXN0aW5nQ2hpbGRyZW4ucHVzaCh7IGV4aXN0aW5nUm91dGUsIG5ld1JvdXRlIH0pOwogICAgfSBlbHNlIHsKICAgICAgdW5pcXVlQ2hpbGRyZW4ucHVzaChuZXdSb3V0ZSk7CiAgICB9CiAgfSk7CiAgaWYgKHVuaXF1ZUNoaWxkcmVuLmxlbmd0aCA+IDApIHsKICAgIGxldCBuZXdSb3V0ZXMgPSBjb252ZXJ0Um91dGVzVG9EYXRhUm91dGVzKAogICAgICB1bmlxdWVDaGlsZHJlbiwKICAgICAgbWFwUm91dGVQcm9wZXJ0aWVzMiwKICAgICAgW3JvdXRlSWQgfHwgIl8iLCAicGF0Y2giLCBTdHJpbmcoKGNoaWxkcmVuVG9QYXRjaCA9PSBudWxsID8gdm9pZCAwIDogY2hpbGRyZW5Ub1BhdGNoLmxlbmd0aCkgfHwgIjAiKV0sCiAgICAgIG1hbmlmZXN0CiAgICApOwogICAgY2hpbGRyZW5Ub1BhdGNoLnB1c2goLi4ubmV3Um91dGVzKTsKICB9CiAgaWYgKGFsbG93RWxlbWVudE11dGF0aW9ucyAmJiBleGlzdGluZ0NoaWxkcmVuLmxlbmd0aCA+IDApIHsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXhpc3RpbmdDaGlsZHJlbi5sZW5ndGg7IGkrKykgewogICAgICBsZXQgeyBleGlzdGluZ1JvdXRlLCBuZXdSb3V0ZSB9ID0gZXhpc3RpbmdDaGlsZHJlbltpXTsKICAgICAgbGV0IGV4aXN0aW5nUm91dGVUeXBlZCA9IGV4aXN0aW5nUm91dGU7CiAgICAgIGxldCBbbmV3Um91dGVUeXBlZF0gPSBjb252ZXJ0Um91dGVzVG9EYXRhUm91dGVzKAogICAgICAgIFtuZXdSb3V0ZV0sCiAgICAgICAgbWFwUm91dGVQcm9wZXJ0aWVzMiwKICAgICAgICBbXSwKICAgICAgICAvLyBEb2Vzbid0IG1hdHRlciBmb3IgbXV0YXRlZCByb3V0ZXMgc2luY2UgdGhleSBhbHJlYWR5IGhhdmUgYW4gaWQKICAgICAgICB7fSwKICAgICAgICAvLyBEb24ndCB0b3VjaCB0aGUgbWFuaWZlc3QgaGVyZSBzaW5jZSB3ZSdyZSB1cGRhdGluZyBpbiBwbGFjZQogICAgICAgIHRydWUKICAgICAgKTsKICAgICAgT2JqZWN0LmFzc2lnbihleGlzdGluZ1JvdXRlVHlwZWQsIHsKICAgICAgICBlbGVtZW50OiBuZXdSb3V0ZVR5cGVkLmVsZW1lbnQgPyBuZXdSb3V0ZVR5cGVkLmVsZW1lbnQgOiBleGlzdGluZ1JvdXRlVHlwZWQuZWxlbWVudCwKICAgICAgICBlcnJvckVsZW1lbnQ6IG5ld1JvdXRlVHlwZWQuZXJyb3JFbGVtZW50ID8gbmV3Um91dGVUeXBlZC5lcnJvckVsZW1lbnQgOiBleGlzdGluZ1JvdXRlVHlwZWQuZXJyb3JFbGVtZW50LAogICAgICAgIGh5ZHJhdGVGYWxsYmFja0VsZW1lbnQ6IG5ld1JvdXRlVHlwZWQuaHlkcmF0ZUZhbGxiYWNrRWxlbWVudCA/IG5ld1JvdXRlVHlwZWQuaHlkcmF0ZUZhbGxiYWNrRWxlbWVudCA6IGV4aXN0aW5nUm91dGVUeXBlZC5oeWRyYXRlRmFsbGJhY2tFbGVtZW50CiAgICAgIH0pOwogICAgfQogIH0KfQpmdW5jdGlvbiBpc1NhbWVSb3V0ZShuZXdSb3V0ZSwgZXhpc3RpbmdSb3V0ZSkgewogIGlmICgiaWQiIGluIG5ld1JvdXRlICYmICJpZCIgaW4gZXhpc3RpbmdSb3V0ZSAmJiBuZXdSb3V0ZS5pZCA9PT0gZXhpc3RpbmdSb3V0ZS5pZCkgewogICAgcmV0dXJuIHRydWU7CiAgfQogIGlmICghKG5ld1JvdXRlLmluZGV4ID09PSBleGlzdGluZ1JvdXRlLmluZGV4ICYmIG5ld1JvdXRlLnBhdGggPT09IGV4aXN0aW5nUm91dGUucGF0aCAmJiBuZXdSb3V0ZS5jYXNlU2Vuc2l0aXZlID09PSBleGlzdGluZ1JvdXRlLmNhc2VTZW5zaXRpdmUpKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIGlmICgoIW5ld1JvdXRlLmNoaWxkcmVuIHx8IG5ld1JvdXRlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkgJiYgKCFleGlzdGluZ1JvdXRlLmNoaWxkcmVuIHx8IGV4aXN0aW5nUm91dGUuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSkgewogICAgcmV0dXJuIHRydWU7CiAgfQogIHJldHVybiBuZXdSb3V0ZS5jaGlsZHJlbi5ldmVyeSgKICAgIChhQ2hpbGQsIGkpID0+IHsKICAgICAgdmFyIF9hOwogICAgICByZXR1cm4gKF9hID0gZXhpc3RpbmdSb3V0ZS5jaGlsZHJlbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnNvbWUoKGJDaGlsZCkgPT4gaXNTYW1lUm91dGUoYUNoaWxkLCBiQ2hpbGQpKTsKICAgIH0KICApOwp9CnZhciBsYXp5Um91dGVQcm9wZXJ0eUNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7CnZhciBsb2FkTGF6eVJvdXRlUHJvcGVydHkgPSAoewogIGtleSwKICByb3V0ZSwKICBtYW5pZmVzdCwKICBtYXBSb3V0ZVByb3BlcnRpZXM6IG1hcFJvdXRlUHJvcGVydGllczIKfSkgPT4gewogIGxldCByb3V0ZVRvVXBkYXRlID0gbWFuaWZlc3Rbcm91dGUuaWRdOwogIGludmFyaWFudChyb3V0ZVRvVXBkYXRlLCAiTm8gcm91dGUgZm91bmQgaW4gbWFuaWZlc3QiKTsKICBpZiAoIXJvdXRlVG9VcGRhdGUubGF6eSB8fCB0eXBlb2Ygcm91dGVUb1VwZGF0ZS5sYXp5ICE9PSAib2JqZWN0IikgewogICAgcmV0dXJuOwogIH0KICBsZXQgbGF6eUZuID0gcm91dGVUb1VwZGF0ZS5sYXp5W2tleV07CiAgaWYgKCFsYXp5Rm4pIHsKICAgIHJldHVybjsKICB9CiAgbGV0IGNhY2hlID0gbGF6eVJvdXRlUHJvcGVydHlDYWNoZS5nZXQocm91dGVUb1VwZGF0ZSk7CiAgaWYgKCFjYWNoZSkgewogICAgY2FjaGUgPSB7fTsKICAgIGxhenlSb3V0ZVByb3BlcnR5Q2FjaGUuc2V0KHJvdXRlVG9VcGRhdGUsIGNhY2hlKTsKICB9CiAgbGV0IGNhY2hlZFByb21pc2UgPSBjYWNoZVtrZXldOwogIGlmIChjYWNoZWRQcm9taXNlKSB7CiAgICByZXR1cm4gY2FjaGVkUHJvbWlzZTsKICB9CiAgbGV0IHByb3BlcnR5UHJvbWlzZSA9IChhc3luYyAoKSA9PiB7CiAgICBsZXQgaXNVbnN1cHBvcnRlZCA9IGlzVW5zdXBwb3J0ZWRMYXp5Um91dGVPYmplY3RLZXkoa2V5KTsKICAgIGxldCBzdGF0aWNSb3V0ZVZhbHVlID0gcm91dGVUb1VwZGF0ZVtrZXldOwogICAgbGV0IGlzU3RhdGljYWxseURlZmluZWQgPSBzdGF0aWNSb3V0ZVZhbHVlICE9PSB2b2lkIDAgJiYga2V5ICE9PSAiaGFzRXJyb3JCb3VuZGFyeSI7CiAgICBpZiAoaXNVbnN1cHBvcnRlZCkgewogICAgICB3YXJuaW5nKAogICAgICAgICFpc1Vuc3VwcG9ydGVkLAogICAgICAgICJSb3V0ZSBwcm9wZXJ0eSAiICsga2V5ICsgIiBpcyBub3QgYSBzdXBwb3J0ZWQgbGF6eSByb3V0ZSBwcm9wZXJ0eS4gVGhpcyBwcm9wZXJ0eSB3aWxsIGJlIGlnbm9yZWQuIgogICAgICApOwogICAgICBjYWNoZVtrZXldID0gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICB9IGVsc2UgaWYgKGlzU3RhdGljYWxseURlZmluZWQpIHsKICAgICAgd2FybmluZygKICAgICAgICBmYWxzZSwKICAgICAgICBgUm91dGUgIiR7cm91dGVUb1VwZGF0ZS5pZH0iIGhhcyBhIHN0YXRpYyBwcm9wZXJ0eSAiJHtrZXl9IiBkZWZpbmVkLiBUaGUgbGF6eSBwcm9wZXJ0eSB3aWxsIGJlIGlnbm9yZWQuYAogICAgICApOwogICAgfSBlbHNlIHsKICAgICAgbGV0IHZhbHVlID0gYXdhaXQgbGF6eUZuKCk7CiAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7CiAgICAgICAgT2JqZWN0LmFzc2lnbihyb3V0ZVRvVXBkYXRlLCB7IFtrZXldOiB2YWx1ZSB9KTsKICAgICAgICBPYmplY3QuYXNzaWduKHJvdXRlVG9VcGRhdGUsIG1hcFJvdXRlUHJvcGVydGllczIocm91dGVUb1VwZGF0ZSkpOwogICAgICB9CiAgICB9CiAgICBpZiAodHlwZW9mIHJvdXRlVG9VcGRhdGUubGF6eSA9PT0gIm9iamVjdCIpIHsKICAgICAgcm91dGVUb1VwZGF0ZS5sYXp5W2tleV0gPSB2b2lkIDA7CiAgICAgIGlmIChPYmplY3QudmFsdWVzKHJvdXRlVG9VcGRhdGUubGF6eSkuZXZlcnkoKHZhbHVlKSA9PiB2YWx1ZSA9PT0gdm9pZCAwKSkgewogICAgICAgIHJvdXRlVG9VcGRhdGUubGF6eSA9IHZvaWQgMDsKICAgICAgfQogICAgfQogIH0pKCk7CiAgY2FjaGVba2V5XSA9IHByb3BlcnR5UHJvbWlzZTsKICByZXR1cm4gcHJvcGVydHlQcm9taXNlOwp9Owp2YXIgbGF6eVJvdXRlRnVuY3Rpb25DYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpOwpmdW5jdGlvbiBsb2FkTGF6eVJvdXRlKHJvdXRlLCB0eXBlLCBtYW5pZmVzdCwgbWFwUm91dGVQcm9wZXJ0aWVzMiwgbGF6eVJvdXRlUHJvcGVydGllc1RvU2tpcCkgewogIGxldCByb3V0ZVRvVXBkYXRlID0gbWFuaWZlc3Rbcm91dGUuaWRdOwogIGludmFyaWFudChyb3V0ZVRvVXBkYXRlLCAiTm8gcm91dGUgZm91bmQgaW4gbWFuaWZlc3QiKTsKICBpZiAoIXJvdXRlLmxhenkpIHsKICAgIHJldHVybiB7CiAgICAgIGxhenlSb3V0ZVByb21pc2U6IHZvaWQgMCwKICAgICAgbGF6eUhhbmRsZXJQcm9taXNlOiB2b2lkIDAKICAgIH07CiAgfQogIGlmICh0eXBlb2Ygcm91dGUubGF6eSA9PT0gImZ1bmN0aW9uIikgewogICAgbGV0IGNhY2hlZFByb21pc2UgPSBsYXp5Um91dGVGdW5jdGlvbkNhY2hlLmdldChyb3V0ZVRvVXBkYXRlKTsKICAgIGlmIChjYWNoZWRQcm9taXNlKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgbGF6eVJvdXRlUHJvbWlzZTogY2FjaGVkUHJvbWlzZSwKICAgICAgICBsYXp5SGFuZGxlclByb21pc2U6IGNhY2hlZFByb21pc2UKICAgICAgfTsKICAgIH0KICAgIGxldCBsYXp5Um91dGVQcm9taXNlMiA9IChhc3luYyAoKSA9PiB7CiAgICAgIGludmFyaWFudCgKICAgICAgICB0eXBlb2Ygcm91dGUubGF6eSA9PT0gImZ1bmN0aW9uIiwKICAgICAgICAiTm8gbGF6eSByb3V0ZSBmdW5jdGlvbiBmb3VuZCIKICAgICAgKTsKICAgICAgbGV0IGxhenlSb3V0ZSA9IGF3YWl0IHJvdXRlLmxhenkoKTsKICAgICAgbGV0IHJvdXRlVXBkYXRlcyA9IHt9OwogICAgICBmb3IgKGxldCBsYXp5Um91dGVQcm9wZXJ0eSBpbiBsYXp5Um91dGUpIHsKICAgICAgICBsZXQgbGF6eVZhbHVlID0gbGF6eVJvdXRlW2xhenlSb3V0ZVByb3BlcnR5XTsKICAgICAgICBpZiAobGF6eVZhbHVlID09PSB2b2lkIDApIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgICBsZXQgaXNVbnN1cHBvcnRlZCA9IGlzVW5zdXBwb3J0ZWRMYXp5Um91dGVGdW5jdGlvbktleShsYXp5Um91dGVQcm9wZXJ0eSk7CiAgICAgICAgbGV0IHN0YXRpY1JvdXRlVmFsdWUgPSByb3V0ZVRvVXBkYXRlW2xhenlSb3V0ZVByb3BlcnR5XTsKICAgICAgICBsZXQgaXNTdGF0aWNhbGx5RGVmaW5lZCA9IHN0YXRpY1JvdXRlVmFsdWUgIT09IHZvaWQgMCAmJiAvLyBUaGlzIHByb3BlcnR5IGlzbid0IHN0YXRpYyBzaW5jZSBpdCBzaG91bGQgYWx3YXlzIGJlIHVwZGF0ZWQgYmFzZWQKICAgICAgICAvLyBvbiB0aGUgcm91dGUgdXBkYXRlcwogICAgICAgIGxhenlSb3V0ZVByb3BlcnR5ICE9PSAiaGFzRXJyb3JCb3VuZGFyeSI7CiAgICAgICAgaWYgKGlzVW5zdXBwb3J0ZWQpIHsKICAgICAgICAgIHdhcm5pbmcoCiAgICAgICAgICAgICFpc1Vuc3VwcG9ydGVkLAogICAgICAgICAgICAiUm91dGUgcHJvcGVydHkgIiArIGxhenlSb3V0ZVByb3BlcnR5ICsgIiBpcyBub3QgYSBzdXBwb3J0ZWQgcHJvcGVydHkgdG8gYmUgcmV0dXJuZWQgZnJvbSBhIGxhenkgcm91dGUgZnVuY3Rpb24uIFRoaXMgcHJvcGVydHkgd2lsbCBiZSBpZ25vcmVkLiIKICAgICAgICAgICk7CiAgICAgICAgfSBlbHNlIGlmIChpc1N0YXRpY2FsbHlEZWZpbmVkKSB7CiAgICAgICAgICB3YXJuaW5nKAogICAgICAgICAgICAhaXNTdGF0aWNhbGx5RGVmaW5lZCwKICAgICAgICAgICAgYFJvdXRlICIke3JvdXRlVG9VcGRhdGUuaWR9IiBoYXMgYSBzdGF0aWMgcHJvcGVydHkgIiR7bGF6eVJvdXRlUHJvcGVydHl9IiBkZWZpbmVkIGJ1dCBpdHMgbGF6eSBmdW5jdGlvbiBpcyBhbHNvIHJldHVybmluZyBhIHZhbHVlIGZvciB0aGlzIHByb3BlcnR5LiBUaGUgbGF6eSByb3V0ZSBwcm9wZXJ0eSAiJHtsYXp5Um91dGVQcm9wZXJ0eX0iIHdpbGwgYmUgaWdub3JlZC5gCiAgICAgICAgICApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByb3V0ZVVwZGF0ZXNbbGF6eVJvdXRlUHJvcGVydHldID0gbGF6eVZhbHVlOwogICAgICAgIH0KICAgICAgfQogICAgICBPYmplY3QuYXNzaWduKHJvdXRlVG9VcGRhdGUsIHJvdXRlVXBkYXRlcyk7CiAgICAgIE9iamVjdC5hc3NpZ24ocm91dGVUb1VwZGF0ZSwgewogICAgICAgIC8vIFRvIGtlZXAgdGhpbmdzIGZyYW1ld29yayBhZ25vc3RpYywgd2UgdXNlIHRoZSBwcm92aWRlZCBgbWFwUm91dGVQcm9wZXJ0aWVzYAogICAgICAgIC8vIGZ1bmN0aW9uIHRvIHNldCB0aGUgZnJhbWV3b3JrLWF3YXJlIHByb3BlcnRpZXMgKGBlbGVtZW50YC9gaGFzRXJyb3JCb3VuZGFyeWApCiAgICAgICAgLy8gc2luY2UgdGhlIGxvZ2ljIHdpbGwgZGlmZmVyIGJldHdlZW4gZnJhbWV3b3Jrcy4KICAgICAgICAuLi5tYXBSb3V0ZVByb3BlcnRpZXMyKHJvdXRlVG9VcGRhdGUpLAogICAgICAgIGxhenk6IHZvaWQgMAogICAgICB9KTsKICAgIH0pKCk7CiAgICBsYXp5Um91dGVGdW5jdGlvbkNhY2hlLnNldChyb3V0ZVRvVXBkYXRlLCBsYXp5Um91dGVQcm9taXNlMik7CiAgICBsYXp5Um91dGVQcm9taXNlMi5jYXRjaCgoKSA9PiB7CiAgICB9KTsKICAgIHJldHVybiB7CiAgICAgIGxhenlSb3V0ZVByb21pc2U6IGxhenlSb3V0ZVByb21pc2UyLAogICAgICBsYXp5SGFuZGxlclByb21pc2U6IGxhenlSb3V0ZVByb21pc2UyCiAgICB9OwogIH0KICBsZXQgbGF6eUtleXMgPSBPYmplY3Qua2V5cyhyb3V0ZS5sYXp5KTsKICBsZXQgbGF6eVByb3BlcnR5UHJvbWlzZXMgPSBbXTsKICBsZXQgbGF6eUhhbmRsZXJQcm9taXNlID0gdm9pZCAwOwogIGZvciAobGV0IGtleSBvZiBsYXp5S2V5cykgewogICAgaWYgKGxhenlSb3V0ZVByb3BlcnRpZXNUb1NraXAgJiYgbGF6eVJvdXRlUHJvcGVydGllc1RvU2tpcC5pbmNsdWRlcyhrZXkpKSB7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgbGV0IHByb21pc2UgPSBsb2FkTGF6eVJvdXRlUHJvcGVydHkoewogICAgICBrZXksCiAgICAgIHJvdXRlLAogICAgICBtYW5pZmVzdCwKICAgICAgbWFwUm91dGVQcm9wZXJ0aWVzOiBtYXBSb3V0ZVByb3BlcnRpZXMyCiAgICB9KTsKICAgIGlmIChwcm9taXNlKSB7CiAgICAgIGxhenlQcm9wZXJ0eVByb21pc2VzLnB1c2gocHJvbWlzZSk7CiAgICAgIGlmIChrZXkgPT09IHR5cGUpIHsKICAgICAgICBsYXp5SGFuZGxlclByb21pc2UgPSBwcm9taXNlOwogICAgICB9CiAgICB9CiAgfQogIGxldCBsYXp5Um91dGVQcm9taXNlID0gbGF6eVByb3BlcnR5UHJvbWlzZXMubGVuZ3RoID4gMCA/IFByb21pc2UuYWxsKGxhenlQcm9wZXJ0eVByb21pc2VzKS50aGVuKCgpID0+IHsKICB9KSA6IHZvaWQgMDsKICBsYXp5Um91dGVQcm9taXNlID09IG51bGwgPyB2b2lkIDAgOiBsYXp5Um91dGVQcm9taXNlLmNhdGNoKCgpID0+IHsKICB9KTsKICBsYXp5SGFuZGxlclByb21pc2UgPT0gbnVsbCA/IHZvaWQgMCA6IGxhenlIYW5kbGVyUHJvbWlzZS5jYXRjaCgoKSA9PiB7CiAgfSk7CiAgcmV0dXJuIHsKICAgIGxhenlSb3V0ZVByb21pc2UsCiAgICBsYXp5SGFuZGxlclByb21pc2UKICB9Owp9CmZ1bmN0aW9uIGlzTm9uTnVsbGFibGUodmFsdWUpIHsKICByZXR1cm4gdmFsdWUgIT09IHZvaWQgMDsKfQpmdW5jdGlvbiBsb2FkTGF6eU1pZGRsZXdhcmVGb3JNYXRjaGVzKG1hdGNoZXMsIG1hbmlmZXN0LCBtYXBSb3V0ZVByb3BlcnRpZXMyKSB7CiAgbGV0IHByb21pc2VzID0gbWF0Y2hlcy5tYXAoKHsgcm91dGUgfSkgPT4gewogICAgaWYgKHR5cGVvZiByb3V0ZS5sYXp5ICE9PSAib2JqZWN0IiB8fCAhcm91dGUubGF6eS5taWRkbGV3YXJlKSB7CiAgICAgIHJldHVybiB2b2lkIDA7CiAgICB9CiAgICByZXR1cm4gbG9hZExhenlSb3V0ZVByb3BlcnR5KHsKICAgICAga2V5OiAibWlkZGxld2FyZSIsCiAgICAgIHJvdXRlLAogICAgICBtYW5pZmVzdCwKICAgICAgbWFwUm91dGVQcm9wZXJ0aWVzOiBtYXBSb3V0ZVByb3BlcnRpZXMyCiAgICB9KTsKICB9KS5maWx0ZXIoaXNOb25OdWxsYWJsZSk7CiAgcmV0dXJuIHByb21pc2VzLmxlbmd0aCA+IDAgPyBQcm9taXNlLmFsbChwcm9taXNlcykgOiB2b2lkIDA7Cn0KYXN5bmMgZnVuY3Rpb24gZGVmYXVsdERhdGFTdHJhdGVneShhcmdzKSB7CiAgbGV0IG1hdGNoZXNUb0xvYWQgPSBhcmdzLm1hdGNoZXMuZmlsdGVyKChtKSA9PiBtLnNob3VsZExvYWQpOwogIGxldCBrZXllZFJlc3VsdHMgPSB7fTsKICBsZXQgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKG1hdGNoZXNUb0xvYWQubWFwKChtKSA9PiBtLnJlc29sdmUoKSkpOwogIHJlc3VsdHMuZm9yRWFjaCgocmVzdWx0LCBpKSA9PiB7CiAgICBrZXllZFJlc3VsdHNbbWF0Y2hlc1RvTG9hZFtpXS5yb3V0ZS5pZF0gPSByZXN1bHQ7CiAgfSk7CiAgcmV0dXJuIGtleWVkUmVzdWx0czsKfQphc3luYyBmdW5jdGlvbiBkZWZhdWx0RGF0YVN0cmF0ZWd5V2l0aE1pZGRsZXdhcmUoYXJncykgewogIGlmICghYXJncy5tYXRjaGVzLnNvbWUoKG0pID0+IG0ucm91dGUubWlkZGxld2FyZSkpIHsKICAgIHJldHVybiBkZWZhdWx0RGF0YVN0cmF0ZWd5KGFyZ3MpOwogIH0KICByZXR1cm4gcnVuQ2xpZW50TWlkZGxld2FyZVBpcGVsaW5lKGFyZ3MsICgpID0+IGRlZmF1bHREYXRhU3RyYXRlZ3koYXJncykpOwp9CmZ1bmN0aW9uIHJ1blNlcnZlck1pZGRsZXdhcmVQaXBlbGluZShhcmdzLCBoYW5kbGVyLCBlcnJvckhhbmRsZXIpIHsKICByZXR1cm4gcnVuTWlkZGxld2FyZVBpcGVsaW5lKAogICAgYXJncywKICAgIGhhbmRsZXIsCiAgICBwcm9jZXNzUmVzdWx0LAogICAgaXNSZXNwb25zZSwKICAgIGVycm9ySGFuZGxlcgogICk7CiAgZnVuY3Rpb24gcHJvY2Vzc1Jlc3VsdChyZXN1bHQpIHsKICAgIHJldHVybiBpc0RhdGFXaXRoUmVzcG9uc2VJbml0KHJlc3VsdCkgPyBkYXRhV2l0aFJlc3BvbnNlSW5pdFRvUmVzcG9uc2UocmVzdWx0KSA6IHJlc3VsdDsKICB9Cn0KZnVuY3Rpb24gcnVuQ2xpZW50TWlkZGxld2FyZVBpcGVsaW5lKGFyZ3MsIGhhbmRsZXIpIHsKICByZXR1cm4gcnVuTWlkZGxld2FyZVBpcGVsaW5lKAogICAgYXJncywKICAgIGhhbmRsZXIsCiAgICAocikgPT4gciwKICAgIC8vIE5vIHBvc3QtcHJvY2Vzc2luZyBuZWVkZWQgb24gdGhlIGNsaWVudAogICAgaXNEYXRhU3RyYXRlZ3lSZXN1bHRzLAogICAgZXJyb3JIYW5kbGVyCiAgKTsKICBmdW5jdGlvbiBlcnJvckhhbmRsZXIoZXJyb3IsIHJvdXRlSWQsIG5leHRSZXN1bHQpIHsKICAgIGlmIChuZXh0UmVzdWx0KSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoCiAgICAgICAgT2JqZWN0LmFzc2lnbihuZXh0UmVzdWx0LnZhbHVlLCB7CiAgICAgICAgICBbcm91dGVJZF06IHsgdHlwZTogImVycm9yIiwgcmVzdWx0OiBlcnJvciB9CiAgICAgICAgfSkKICAgICAgKTsKICAgIH0gZWxzZSB7CiAgICAgIGxldCB7IG1hdGNoZXMgfSA9IGFyZ3M7CiAgICAgIGxldCBtYXhCb3VuZGFyeUlkeCA9IE1hdGgubWluKAogICAgICAgIC8vIFRocm93aW5nIHJvdXRlCiAgICAgICAgbWF0Y2hlcy5maW5kSW5kZXgoKG0pID0+IG0ucm91dGUuaWQgPT09IHJvdXRlSWQpIHx8IDAsCiAgICAgICAgLy8gb3IgdGhlIHNoYWxsb3dlc3Qgcm91dGUgdGhhdCBuZWVkcyB0byBsb2FkIGRhdGEKICAgICAgICBtYXRjaGVzLmZpbmRJbmRleCgobSkgPT4gbS51bnN0YWJsZV9zaG91bGRDYWxsSGFuZGxlcigpKSB8fCAwCiAgICAgICk7CiAgICAgIGxldCBib3VuZGFyeVJvdXRlSWQgPSBmaW5kTmVhcmVzdEJvdW5kYXJ5KAogICAgICAgIG1hdGNoZXMsCiAgICAgICAgbWF0Y2hlc1ttYXhCb3VuZGFyeUlkeF0ucm91dGUuaWQKICAgICAgKS5yb3V0ZS5pZDsKICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7CiAgICAgICAgW2JvdW5kYXJ5Um91dGVJZF06IHsgdHlwZTogImVycm9yIiwgcmVzdWx0OiBlcnJvciB9CiAgICAgIH0pOwogICAgfQogIH0KfQphc3luYyBmdW5jdGlvbiBydW5NaWRkbGV3YXJlUGlwZWxpbmUoYXJncywgaGFuZGxlciwgcHJvY2Vzc1Jlc3VsdCwgaXNSZXN1bHQsIGVycm9ySGFuZGxlcikgewogIGxldCB7IG1hdGNoZXMsIHJlcXVlc3QsIHBhcmFtcywgY29udGV4dCB9ID0gYXJnczsKICBsZXQgdHVwbGVzID0gbWF0Y2hlcy5mbGF0TWFwKAogICAgKG0pID0+IG0ucm91dGUubWlkZGxld2FyZSA/IG0ucm91dGUubWlkZGxld2FyZS5tYXAoKGZuKSA9PiBbbS5yb3V0ZS5pZCwgZm5dKSA6IFtdCiAgKTsKICBsZXQgcmVzdWx0ID0gYXdhaXQgY2FsbFJvdXRlTWlkZGxld2FyZSgKICAgIHsgcmVxdWVzdCwgcGFyYW1zLCBjb250ZXh0IH0sCiAgICB0dXBsZXMsCiAgICBoYW5kbGVyLAogICAgcHJvY2Vzc1Jlc3VsdCwKICAgIGlzUmVzdWx0LAogICAgZXJyb3JIYW5kbGVyCiAgKTsKICByZXR1cm4gcmVzdWx0Owp9CmFzeW5jIGZ1bmN0aW9uIGNhbGxSb3V0ZU1pZGRsZXdhcmUoYXJncywgbWlkZGxld2FyZXMsIGhhbmRsZXIsIHByb2Nlc3NSZXN1bHQsIGlzUmVzdWx0LCBlcnJvckhhbmRsZXIsIGlkeCA9IDApIHsKICBsZXQgeyByZXF1ZXN0IH0gPSBhcmdzOwogIGlmIChyZXF1ZXN0LnNpZ25hbC5hYm9ydGVkKSB7CiAgICB0aHJvdyByZXF1ZXN0LnNpZ25hbC5yZWFzb24gPz8gbmV3IEVycm9yKGBSZXF1ZXN0IGFib3J0ZWQ6ICR7cmVxdWVzdC5tZXRob2R9ICR7cmVxdWVzdC51cmx9YCk7CiAgfQogIGxldCB0dXBsZSA9IG1pZGRsZXdhcmVzW2lkeF07CiAgaWYgKCF0dXBsZSkgewogICAgbGV0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoKTsKICAgIHJldHVybiByZXN1bHQ7CiAgfQogIGxldCBbcm91dGVJZCwgbWlkZGxld2FyZV0gPSB0dXBsZTsKICBsZXQgbmV4dFJlc3VsdDsKICBsZXQgbmV4dCA9IGFzeW5jICgpID0+IHsKICAgIGlmIChuZXh0UmVzdWx0KSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiWW91IG1heSBvbmx5IGNhbGwgYG5leHQoKWAgb25jZSBwZXIgbWlkZGxld2FyZSIpOwogICAgfQogICAgdHJ5IHsKICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IGNhbGxSb3V0ZU1pZGRsZXdhcmUoCiAgICAgICAgYXJncywKICAgICAgICBtaWRkbGV3YXJlcywKICAgICAgICBoYW5kbGVyLAogICAgICAgIHByb2Nlc3NSZXN1bHQsCiAgICAgICAgaXNSZXN1bHQsCiAgICAgICAgZXJyb3JIYW5kbGVyLAogICAgICAgIGlkeCArIDEKICAgICAgKTsKICAgICAgbmV4dFJlc3VsdCA9IHsgdmFsdWU6IHJlc3VsdCB9OwogICAgICByZXR1cm4gbmV4dFJlc3VsdC52YWx1ZTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIG5leHRSZXN1bHQgPSB7IHZhbHVlOiBhd2FpdCBlcnJvckhhbmRsZXIoZXJyb3IsIHJvdXRlSWQsIG5leHRSZXN1bHQpIH07CiAgICAgIHJldHVybiBuZXh0UmVzdWx0LnZhbHVlOwogICAgfQogIH07CiAgdHJ5IHsKICAgIGxldCB2YWx1ZSA9IGF3YWl0IG1pZGRsZXdhcmUoYXJncywgbmV4dCk7CiAgICBsZXQgcmVzdWx0ID0gdmFsdWUgIT0gbnVsbCA/IHByb2Nlc3NSZXN1bHQodmFsdWUpIDogdm9pZCAwOwogICAgaWYgKGlzUmVzdWx0KHJlc3VsdCkpIHsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0gZWxzZSBpZiAobmV4dFJlc3VsdCkgewogICAgICByZXR1cm4gcmVzdWx0ID8/IG5leHRSZXN1bHQudmFsdWU7CiAgICB9IGVsc2UgewogICAgICBuZXh0UmVzdWx0ID0geyB2YWx1ZTogYXdhaXQgbmV4dCgpIH07CiAgICAgIHJldHVybiBuZXh0UmVzdWx0LnZhbHVlOwogICAgfQogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBlcnJvckhhbmRsZXIoZXJyb3IsIHJvdXRlSWQsIG5leHRSZXN1bHQpOwogICAgcmV0dXJuIHJlc3BvbnNlOwogIH0KfQpmdW5jdGlvbiBnZXREYXRhU3RyYXRlZ3lNYXRjaExhenlQcm9taXNlcyhtYXBSb3V0ZVByb3BlcnRpZXMyLCBtYW5pZmVzdCwgcmVxdWVzdCwgbWF0Y2gsIGxhenlSb3V0ZVByb3BlcnRpZXNUb1NraXApIHsKICBsZXQgbGF6eU1pZGRsZXdhcmVQcm9taXNlID0gbG9hZExhenlSb3V0ZVByb3BlcnR5KHsKICAgIGtleTogIm1pZGRsZXdhcmUiLAogICAgcm91dGU6IG1hdGNoLnJvdXRlLAogICAgbWFuaWZlc3QsCiAgICBtYXBSb3V0ZVByb3BlcnRpZXM6IG1hcFJvdXRlUHJvcGVydGllczIKICB9KTsKICBsZXQgbGF6eVJvdXRlUHJvbWlzZXMgPSBsb2FkTGF6eVJvdXRlKAogICAgbWF0Y2gucm91dGUsCiAgICBpc011dGF0aW9uTWV0aG9kKHJlcXVlc3QubWV0aG9kKSA/ICJhY3Rpb24iIDogImxvYWRlciIsCiAgICBtYW5pZmVzdCwKICAgIG1hcFJvdXRlUHJvcGVydGllczIsCiAgICBsYXp5Um91dGVQcm9wZXJ0aWVzVG9Ta2lwCiAgKTsKICByZXR1cm4gewogICAgbWlkZGxld2FyZTogbGF6eU1pZGRsZXdhcmVQcm9taXNlLAogICAgcm91dGU6IGxhenlSb3V0ZVByb21pc2VzLmxhenlSb3V0ZVByb21pc2UsCiAgICBoYW5kbGVyOiBsYXp5Um91dGVQcm9taXNlcy5sYXp5SGFuZGxlclByb21pc2UKICB9Owp9CmZ1bmN0aW9uIGdldERhdGFTdHJhdGVneU1hdGNoKG1hcFJvdXRlUHJvcGVydGllczIsIG1hbmlmZXN0LCByZXF1ZXN0LCBtYXRjaCwgbGF6eVJvdXRlUHJvcGVydGllc1RvU2tpcCwgc2NvcGVkQ29udGV4dCwgc2hvdWxkTG9hZCwgdW5zdGFibGVfc2hvdWxkUmV2YWxpZGF0ZUFyZ3MgPSBudWxsKSB7CiAgbGV0IGlzVXNpbmdOZXdBcGkgPSBmYWxzZTsKICBsZXQgX2xhenlQcm9taXNlcyA9IGdldERhdGFTdHJhdGVneU1hdGNoTGF6eVByb21pc2VzKAogICAgbWFwUm91dGVQcm9wZXJ0aWVzMiwKICAgIG1hbmlmZXN0LAogICAgcmVxdWVzdCwKICAgIG1hdGNoLAogICAgbGF6eVJvdXRlUHJvcGVydGllc1RvU2tpcAogICk7CiAgcmV0dXJuIHsKICAgIC4uLm1hdGNoLAogICAgX2xhenlQcm9taXNlcywKICAgIHNob3VsZExvYWQsCiAgICB1bnN0YWJsZV9zaG91bGRSZXZhbGlkYXRlQXJncywKICAgIHVuc3RhYmxlX3Nob3VsZENhbGxIYW5kbGVyKGRlZmF1bHRTaG91bGRSZXZhbGlkYXRlKSB7CiAgICAgIGlzVXNpbmdOZXdBcGkgPSB0cnVlOwogICAgICBpZiAoIXVuc3RhYmxlX3Nob3VsZFJldmFsaWRhdGVBcmdzKSB7CiAgICAgICAgcmV0dXJuIHNob3VsZExvYWQ7CiAgICAgIH0KICAgICAgaWYgKHR5cGVvZiBkZWZhdWx0U2hvdWxkUmV2YWxpZGF0ZSA9PT0gImJvb2xlYW4iKSB7CiAgICAgICAgcmV0dXJuIHNob3VsZFJldmFsaWRhdGVMb2FkZXIobWF0Y2gsIHsKICAgICAgICAgIC4uLnVuc3RhYmxlX3Nob3VsZFJldmFsaWRhdGVBcmdzLAogICAgICAgICAgZGVmYXVsdFNob3VsZFJldmFsaWRhdGUKICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gc2hvdWxkUmV2YWxpZGF0ZUxvYWRlcihtYXRjaCwgdW5zdGFibGVfc2hvdWxkUmV2YWxpZGF0ZUFyZ3MpOwogICAgfSwKICAgIHJlc29sdmUoaGFuZGxlck92ZXJyaWRlKSB7CiAgICAgIGlmIChpc1VzaW5nTmV3QXBpIHx8IHNob3VsZExvYWQgfHwgaGFuZGxlck92ZXJyaWRlICYmICFpc011dGF0aW9uTWV0aG9kKHJlcXVlc3QubWV0aG9kKSAmJiAobWF0Y2gucm91dGUubGF6eSB8fCBtYXRjaC5yb3V0ZS5sb2FkZXIpKSB7CiAgICAgICAgcmV0dXJuIGNhbGxMb2FkZXJPckFjdGlvbih7CiAgICAgICAgICByZXF1ZXN0LAogICAgICAgICAgbWF0Y2gsCiAgICAgICAgICBsYXp5SGFuZGxlclByb21pc2U6IF9sYXp5UHJvbWlzZXMgPT0gbnVsbCA/IHZvaWQgMCA6IF9sYXp5UHJvbWlzZXMuaGFuZGxlciwKICAgICAgICAgIGxhenlSb3V0ZVByb21pc2U6IF9sYXp5UHJvbWlzZXMgPT0gbnVsbCA/IHZvaWQgMCA6IF9sYXp5UHJvbWlzZXMucm91dGUsCiAgICAgICAgICBoYW5kbGVyT3ZlcnJpZGUsCiAgICAgICAgICBzY29wZWRDb250ZXh0CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7IHR5cGU6ICJkYXRhIiwgcmVzdWx0OiB2b2lkIDAgfSk7CiAgICB9CiAgfTsKfQpmdW5jdGlvbiBnZXRUYXJnZXRlZERhdGFTdHJhdGVneU1hdGNoZXMobWFwUm91dGVQcm9wZXJ0aWVzMiwgbWFuaWZlc3QsIHJlcXVlc3QsIG1hdGNoZXMsIHRhcmdldE1hdGNoLCBsYXp5Um91dGVQcm9wZXJ0aWVzVG9Ta2lwLCBzY29wZWRDb250ZXh0LCBzaG91bGRSZXZhbGlkYXRlQXJncyA9IG51bGwpIHsKICByZXR1cm4gbWF0Y2hlcy5tYXAoKG1hdGNoKSA9PiB7CiAgICBpZiAobWF0Y2gucm91dGUuaWQgIT09IHRhcmdldE1hdGNoLnJvdXRlLmlkKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgLi4ubWF0Y2gsCiAgICAgICAgc2hvdWxkTG9hZDogZmFsc2UsCiAgICAgICAgdW5zdGFibGVfc2hvdWxkUmV2YWxpZGF0ZUFyZ3M6IHNob3VsZFJldmFsaWRhdGVBcmdzLAogICAgICAgIHVuc3RhYmxlX3Nob3VsZENhbGxIYW5kbGVyOiAoKSA9PiBmYWxzZSwKICAgICAgICBfbGF6eVByb21pc2VzOiBnZXREYXRhU3RyYXRlZ3lNYXRjaExhenlQcm9taXNlcygKICAgICAgICAgIG1hcFJvdXRlUHJvcGVydGllczIsCiAgICAgICAgICBtYW5pZmVzdCwKICAgICAgICAgIHJlcXVlc3QsCiAgICAgICAgICBtYXRjaCwKICAgICAgICAgIGxhenlSb3V0ZVByb3BlcnRpZXNUb1NraXAKICAgICAgICApLAogICAgICAgIHJlc29sdmU6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHR5cGU6ICJkYXRhIiwgcmVzdWx0OiB2b2lkIDAgfSkKICAgICAgfTsKICAgIH0KICAgIHJldHVybiBnZXREYXRhU3RyYXRlZ3lNYXRjaCgKICAgICAgbWFwUm91dGVQcm9wZXJ0aWVzMiwKICAgICAgbWFuaWZlc3QsCiAgICAgIHJlcXVlc3QsCiAgICAgIG1hdGNoLAogICAgICBsYXp5Um91dGVQcm9wZXJ0aWVzVG9Ta2lwLAogICAgICBzY29wZWRDb250ZXh0LAogICAgICB0cnVlLAogICAgICBzaG91bGRSZXZhbGlkYXRlQXJncwogICAgKTsKICB9KTsKfQphc3luYyBmdW5jdGlvbiBjYWxsRGF0YVN0cmF0ZWd5SW1wbChkYXRhU3RyYXRlZ3lJbXBsLCByZXF1ZXN0LCBtYXRjaGVzLCBmZXRjaGVyS2V5LCBzY29wZWRDb250ZXh0LCBpc1N0YXRpY0hhbmRsZXIpIHsKICBpZiAobWF0Y2hlcy5zb21lKChtKSA9PiB7CiAgICB2YXIgX2E7CiAgICByZXR1cm4gKF9hID0gbS5fbGF6eVByb21pc2VzKSA9PSBudWxsID8gdm9pZCAwIDogX2EubWlkZGxld2FyZTsKICB9KSkgewogICAgYXdhaXQgUHJvbWlzZS5hbGwobWF0Y2hlcy5tYXAoKG0pID0+IHsKICAgICAgdmFyIF9hOwogICAgICByZXR1cm4gKF9hID0gbS5fbGF6eVByb21pc2VzKSA9PSBudWxsID8gdm9pZCAwIDogX2EubWlkZGxld2FyZTsKICAgIH0pKTsKICB9CiAgbGV0IGRhdGFTdHJhdGVneUFyZ3MgPSB7CiAgICByZXF1ZXN0LAogICAgcGFyYW1zOiBtYXRjaGVzWzBdLnBhcmFtcywKICAgIGNvbnRleHQ6IHNjb3BlZENvbnRleHQsCiAgICBtYXRjaGVzCiAgfTsKICBsZXQgcnVuQ2xpZW50TWlkZGxld2FyZSA9IGlzU3RhdGljSGFuZGxlciA/ICgpID0+IHsKICAgIHRocm93IG5ldyBFcnJvcigKICAgICAgIllvdSBjYW5ub3QgY2FsbCBgcnVuQ2xpZW50TWlkZGxld2FyZSgpYCBmcm9tIGEgc3RhdGljIGhhbmRsZXIgYGRhdGFTdHJhdGVneWAuIE1pZGRsZXdhcmUgaXMgcnVuIG91dHNpZGUgb2YgYGRhdGFTdHJhdGVneWAgZHVyaW5nIFNTUiBpbiBvcmRlciB0byBidWJibGUgdXAgdGhlIFJlc3BvbnNlLiAgWW91IGNhbiBlbmFibGUgbWlkZGxld2FyZSB2aWEgdGhlIGByZXNwb25kYCBBUEkgaW4gYHF1ZXJ5YC9gcXVlcnlSb3V0ZWAiCiAgICApOwogIH0gOiAoY2IpID0+IHsKICAgIGxldCB0eXBlZERhdGFTdHJhdGVneUFyZ3MgPSBkYXRhU3RyYXRlZ3lBcmdzOwogICAgcmV0dXJuIHJ1bkNsaWVudE1pZGRsZXdhcmVQaXBlbGluZSh0eXBlZERhdGFTdHJhdGVneUFyZ3MsICgpID0+IHsKICAgICAgcmV0dXJuIGNiKHsKICAgICAgICAuLi50eXBlZERhdGFTdHJhdGVneUFyZ3MsCiAgICAgICAgZmV0Y2hlcktleSwKICAgICAgICBydW5DbGllbnRNaWRkbGV3YXJlOiAoKSA9PiB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICAgICAgICJDYW5ub3QgY2FsbCBgcnVuQ2xpZW50TWlkZGxld2FyZSgpYCBmcm9tIHdpdGhpbiBhbiBgcnVuQ2xpZW50TWlkZGxld2FyZWAgaGFuZGxlciIKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogIH07CiAgbGV0IHJlc3VsdHMgPSBhd2FpdCBkYXRhU3RyYXRlZ3lJbXBsKHsKICAgIC4uLmRhdGFTdHJhdGVneUFyZ3MsCiAgICBmZXRjaGVyS2V5LAogICAgcnVuQ2xpZW50TWlkZGxld2FyZQogIH0pOwogIHRyeSB7CiAgICBhd2FpdCBQcm9taXNlLmFsbCgKICAgICAgbWF0Y2hlcy5mbGF0TWFwKChtKSA9PiB7CiAgICAgICAgdmFyIF9hLCBfYjsKICAgICAgICByZXR1cm4gWwogICAgICAgICAgKF9hID0gbS5fbGF6eVByb21pc2VzKSA9PSBudWxsID8gdm9pZCAwIDogX2EuaGFuZGxlciwKICAgICAgICAgIChfYiA9IG0uX2xhenlQcm9taXNlcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnJvdXRlCiAgICAgICAgXTsKICAgICAgfSkKICAgICk7CiAgfSBjYXRjaCAoZSkgewogIH0KICByZXR1cm4gcmVzdWx0czsKfQphc3luYyBmdW5jdGlvbiBjYWxsTG9hZGVyT3JBY3Rpb24oewogIHJlcXVlc3QsCiAgbWF0Y2gsCiAgbGF6eUhhbmRsZXJQcm9taXNlLAogIGxhenlSb3V0ZVByb21pc2UsCiAgaGFuZGxlck92ZXJyaWRlLAogIHNjb3BlZENvbnRleHQKfSkgewogIGxldCByZXN1bHQ7CiAgbGV0IG9uUmVqZWN0OwogIGxldCBpc0FjdGlvbiA9IGlzTXV0YXRpb25NZXRob2QocmVxdWVzdC5tZXRob2QpOwogIGxldCB0eXBlID0gaXNBY3Rpb24gPyAiYWN0aW9uIiA6ICJsb2FkZXIiOwogIGxldCBydW5IYW5kbGVyID0gKGhhbmRsZXIpID0+IHsKICAgIGxldCByZWplY3Q7CiAgICBsZXQgYWJvcnRQcm9taXNlID0gbmV3IFByb21pc2UoKF8sIHIpID0+IHJlamVjdCA9IHIpOwogICAgb25SZWplY3QgPSAoKSA9PiByZWplY3QoKTsKICAgIHJlcXVlc3Quc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoImFib3J0Iiwgb25SZWplY3QpOwogICAgbGV0IGFjdHVhbEhhbmRsZXIgPSAoY3R4KSA9PiB7CiAgICAgIGlmICh0eXBlb2YgaGFuZGxlciAhPT0gImZ1bmN0aW9uIikgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgKICAgICAgICAgIG5ldyBFcnJvcigKICAgICAgICAgICAgYFlvdSBjYW5ub3QgY2FsbCB0aGUgaGFuZGxlciBmb3IgYSByb3V0ZSB3aGljaCBkZWZpbmVzIGEgYm9vbGVhbiAiJHt0eXBlfSIgW3JvdXRlSWQ6ICR7bWF0Y2gucm91dGUuaWR9XWAKICAgICAgICAgICkKICAgICAgICApOwogICAgICB9CiAgICAgIHJldHVybiBoYW5kbGVyKAogICAgICAgIHsKICAgICAgICAgIHJlcXVlc3QsCiAgICAgICAgICBwYXJhbXM6IG1hdGNoLnBhcmFtcywKICAgICAgICAgIGNvbnRleHQ6IHNjb3BlZENvbnRleHQKICAgICAgICB9LAogICAgICAgIC4uLmN0eCAhPT0gdm9pZCAwID8gW2N0eF0gOiBbXQogICAgICApOwogICAgfTsKICAgIGxldCBoYW5kbGVyUHJvbWlzZSA9IChhc3luYyAoKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgbGV0IHZhbCA9IGF3YWl0IChoYW5kbGVyT3ZlcnJpZGUgPyBoYW5kbGVyT3ZlcnJpZGUoKGN0eCkgPT4gYWN0dWFsSGFuZGxlcihjdHgpKSA6IGFjdHVhbEhhbmRsZXIoKSk7CiAgICAgICAgcmV0dXJuIHsgdHlwZTogImRhdGEiLCByZXN1bHQ6IHZhbCB9OwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuIHsgdHlwZTogImVycm9yIiwgcmVzdWx0OiBlIH07CiAgICAgIH0KICAgIH0pKCk7CiAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFtoYW5kbGVyUHJvbWlzZSwgYWJvcnRQcm9taXNlXSk7CiAgfTsKICB0cnkgewogICAgbGV0IGhhbmRsZXIgPSBpc0FjdGlvbiA/IG1hdGNoLnJvdXRlLmFjdGlvbiA6IG1hdGNoLnJvdXRlLmxvYWRlcjsKICAgIGlmIChsYXp5SGFuZGxlclByb21pc2UgfHwgbGF6eVJvdXRlUHJvbWlzZSkgewogICAgICBpZiAoaGFuZGxlcikgewogICAgICAgIGxldCBoYW5kbGVyRXJyb3I7CiAgICAgICAgbGV0IFt2YWx1ZV0gPSBhd2FpdCBQcm9taXNlLmFsbChbCiAgICAgICAgICAvLyBJZiB0aGUgaGFuZGxlciB0aHJvd3MsIGRvbid0IGxldCBpdCBpbW1lZGlhdGVseSBidWJibGUgb3V0LAogICAgICAgICAgLy8gc2luY2Ugd2UgbmVlZCB0byBsZXQgdGhlIGxhenkoKSBleGVjdXRpb24gZmluaXNoIHNvIHdlIGtub3cgaWYgdGhpcwogICAgICAgICAgLy8gcm91dGUgaGFzIGEgYm91bmRhcnkgdGhhdCBjYW4gaGFuZGxlIHRoZSBlcnJvcgogICAgICAgICAgcnVuSGFuZGxlcihoYW5kbGVyKS5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICBoYW5kbGVyRXJyb3IgPSBlOwogICAgICAgICAgfSksCiAgICAgICAgICAvLyBFbnN1cmUgYWxsIGxhenkgcm91dGUgcHJvbWlzZXMgYXJlIHJlc29sdmVkIGJlZm9yZSBjb250aW51aW5nCiAgICAgICAgICBsYXp5SGFuZGxlclByb21pc2UsCiAgICAgICAgICBsYXp5Um91dGVQcm9taXNlCiAgICAgICAgXSk7CiAgICAgICAgaWYgKGhhbmRsZXJFcnJvciAhPT0gdm9pZCAwKSB7CiAgICAgICAgICB0aHJvdyBoYW5kbGVyRXJyb3I7CiAgICAgICAgfQogICAgICAgIHJlc3VsdCA9IHZhbHVlOwogICAgICB9IGVsc2UgewogICAgICAgIGF3YWl0IGxhenlIYW5kbGVyUHJvbWlzZTsKICAgICAgICBsZXQgaGFuZGxlcjIgPSBpc0FjdGlvbiA/IG1hdGNoLnJvdXRlLmFjdGlvbiA6IG1hdGNoLnJvdXRlLmxvYWRlcjsKICAgICAgICBpZiAoaGFuZGxlcjIpIHsKICAgICAgICAgIFtyZXN1bHRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW3J1bkhhbmRsZXIoaGFuZGxlcjIpLCBsYXp5Um91dGVQcm9taXNlXSk7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAiYWN0aW9uIikgewogICAgICAgICAgbGV0IHVybCA9IG5ldyBVUkwocmVxdWVzdC51cmwpOwogICAgICAgICAgbGV0IHBhdGhuYW1lID0gdXJsLnBhdGhuYW1lICsgdXJsLnNlYXJjaDsKICAgICAgICAgIHRocm93IGdldEludGVybmFsUm91dGVyRXJyb3IoNDA1LCB7CiAgICAgICAgICAgIG1ldGhvZDogcmVxdWVzdC5tZXRob2QsCiAgICAgICAgICAgIHBhdGhuYW1lLAogICAgICAgICAgICByb3V0ZUlkOiBtYXRjaC5yb3V0ZS5pZAogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiB7IHR5cGU6ICJkYXRhIiwgcmVzdWx0OiB2b2lkIDAgfTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoIWhhbmRsZXIpIHsKICAgICAgbGV0IHVybCA9IG5ldyBVUkwocmVxdWVzdC51cmwpOwogICAgICBsZXQgcGF0aG5hbWUgPSB1cmwucGF0aG5hbWUgKyB1cmwuc2VhcmNoOwogICAgICB0aHJvdyBnZXRJbnRlcm5hbFJvdXRlckVycm9yKDQwNCwgewogICAgICAgIHBhdGhuYW1lCiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgcmVzdWx0ID0gYXdhaXQgcnVuSGFuZGxlcihoYW5kbGVyKTsKICAgIH0KICB9IGNhdGNoIChlKSB7CiAgICByZXR1cm4geyB0eXBlOiAiZXJyb3IiLCByZXN1bHQ6IGUgfTsKICB9IGZpbmFsbHkgewogICAgaWYgKG9uUmVqZWN0KSB7CiAgICAgIHJlcXVlc3Quc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoImFib3J0Iiwgb25SZWplY3QpOwogICAgfQogIH0KICByZXR1cm4gcmVzdWx0Owp9CmFzeW5jIGZ1bmN0aW9uIHBhcnNlUmVzcG9uc2VCb2R5KHJlc3BvbnNlKSB7CiAgbGV0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoIkNvbnRlbnQtVHlwZSIpOwogIGlmIChjb250ZW50VHlwZSAmJiAvXGJhcHBsaWNhdGlvblwvanNvblxiLy50ZXN0KGNvbnRlbnRUeXBlKSkgewogICAgcmV0dXJuIHJlc3BvbnNlLmJvZHkgPT0gbnVsbCA/IG51bGwgOiByZXNwb25zZS5qc29uKCk7CiAgfQogIHJldHVybiByZXNwb25zZS50ZXh0KCk7Cn0KYXN5bmMgZnVuY3Rpb24gY29udmVydERhdGFTdHJhdGVneVJlc3VsdFRvRGF0YVJlc3VsdChkYXRhU3RyYXRlZ3lSZXN1bHQpIHsKICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjsKICBsZXQgeyByZXN1bHQsIHR5cGUgfSA9IGRhdGFTdHJhdGVneVJlc3VsdDsKICBpZiAoaXNSZXNwb25zZShyZXN1bHQpKSB7CiAgICBsZXQgZGF0YTI7CiAgICB0cnkgewogICAgICBkYXRhMiA9IGF3YWl0IHBhcnNlUmVzcG9uc2VCb2R5KHJlc3VsdCk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHJldHVybiB7IHR5cGU6ICJlcnJvciIsIGVycm9yOiBlIH07CiAgICB9CiAgICBpZiAodHlwZSA9PT0gImVycm9yIikgewogICAgICByZXR1cm4gewogICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgZXJyb3I6IG5ldyBFcnJvclJlc3BvbnNlSW1wbChyZXN1bHQuc3RhdHVzLCByZXN1bHQuc3RhdHVzVGV4dCwgZGF0YTIpLAogICAgICAgIHN0YXR1c0NvZGU6IHJlc3VsdC5zdGF0dXMsCiAgICAgICAgaGVhZGVyczogcmVzdWx0LmhlYWRlcnMKICAgICAgfTsKICAgIH0KICAgIHJldHVybiB7CiAgICAgIHR5cGU6ICJkYXRhIiwKICAgICAgZGF0YTogZGF0YTIsCiAgICAgIHN0YXR1c0NvZGU6IHJlc3VsdC5zdGF0dXMsCiAgICAgIGhlYWRlcnM6IHJlc3VsdC5oZWFkZXJzCiAgICB9OwogIH0KICBpZiAodHlwZSA9PT0gImVycm9yIikgewogICAgaWYgKGlzRGF0YVdpdGhSZXNwb25zZUluaXQocmVzdWx0KSkgewogICAgICBpZiAocmVzdWx0LmRhdGEgaW5zdGFuY2VvZiBFcnJvcikgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgZXJyb3I6IHJlc3VsdC5kYXRhLAogICAgICAgICAgc3RhdHVzQ29kZTogKF9hID0gcmVzdWx0LmluaXQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5zdGF0dXMsCiAgICAgICAgICBoZWFkZXJzOiAoKF9iID0gcmVzdWx0LmluaXQpID09IG51bGwgPyB2b2lkIDAgOiBfYi5oZWFkZXJzKSA/IG5ldyBIZWFkZXJzKHJlc3VsdC5pbml0LmhlYWRlcnMpIDogdm9pZCAwCiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4gewogICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgZXJyb3I6IG5ldyBFcnJvclJlc3BvbnNlSW1wbCgKICAgICAgICAgICgoX2MgPSByZXN1bHQuaW5pdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnN0YXR1cykgfHwgNTAwLAogICAgICAgICAgdm9pZCAwLAogICAgICAgICAgcmVzdWx0LmRhdGEKICAgICAgICApLAogICAgICAgIHN0YXR1c0NvZGU6IGlzUm91dGVFcnJvclJlc3BvbnNlKHJlc3VsdCkgPyByZXN1bHQuc3RhdHVzIDogdm9pZCAwLAogICAgICAgIGhlYWRlcnM6ICgoX2QgPSByZXN1bHQuaW5pdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLmhlYWRlcnMpID8gbmV3IEhlYWRlcnMocmVzdWx0LmluaXQuaGVhZGVycykgOiB2b2lkIDAKICAgICAgfTsKICAgIH0KICAgIHJldHVybiB7CiAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgIGVycm9yOiByZXN1bHQsCiAgICAgIHN0YXR1c0NvZGU6IGlzUm91dGVFcnJvclJlc3BvbnNlKHJlc3VsdCkgPyByZXN1bHQuc3RhdHVzIDogdm9pZCAwCiAgICB9OwogIH0KICBpZiAoaXNEYXRhV2l0aFJlc3BvbnNlSW5pdChyZXN1bHQpKSB7CiAgICByZXR1cm4gewogICAgICB0eXBlOiAiZGF0YSIsCiAgICAgIGRhdGE6IHJlc3VsdC5kYXRhLAogICAgICBzdGF0dXNDb2RlOiAoX2UgPSByZXN1bHQuaW5pdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLnN0YXR1cywKICAgICAgaGVhZGVyczogKChfZiA9IHJlc3VsdC5pbml0KSA9PSBudWxsID8gdm9pZCAwIDogX2YuaGVhZGVycykgPyBuZXcgSGVhZGVycyhyZXN1bHQuaW5pdC5oZWFkZXJzKSA6IHZvaWQgMAogICAgfTsKICB9CiAgcmV0dXJuIHsgdHlwZTogImRhdGEiLCBkYXRhOiByZXN1bHQgfTsKfQpmdW5jdGlvbiBub3JtYWxpemVSZWxhdGl2ZVJvdXRpbmdSZWRpcmVjdFJlc3BvbnNlKHJlc3BvbnNlLCByZXF1ZXN0LCByb3V0ZUlkLCBtYXRjaGVzLCBiYXNlbmFtZSkgewogIGxldCBsb2NhdGlvbjIgPSByZXNwb25zZS5oZWFkZXJzLmdldCgiTG9jYXRpb24iKTsKICBpbnZhcmlhbnQoCiAgICBsb2NhdGlvbjIsCiAgICAiUmVkaXJlY3RzIHJldHVybmVkL3Rocm93biBmcm9tIGxvYWRlcnMvYWN0aW9ucyBtdXN0IGhhdmUgYSBMb2NhdGlvbiBoZWFkZXIiCiAgKTsKICBpZiAoIWlzQWJzb2x1dGVVcmwobG9jYXRpb24yKSkgewogICAgbGV0IHRyaW1tZWRNYXRjaGVzID0gbWF0Y2hlcy5zbGljZSgKICAgICAgMCwKICAgICAgbWF0Y2hlcy5maW5kSW5kZXgoKG0pID0+IG0ucm91dGUuaWQgPT09IHJvdXRlSWQpICsgMQogICAgKTsKICAgIGxvY2F0aW9uMiA9IG5vcm1hbGl6ZVRvKAogICAgICBuZXcgVVJMKHJlcXVlc3QudXJsKSwKICAgICAgdHJpbW1lZE1hdGNoZXMsCiAgICAgIGJhc2VuYW1lLAogICAgICBsb2NhdGlvbjIKICAgICk7CiAgICByZXNwb25zZS5oZWFkZXJzLnNldCgiTG9jYXRpb24iLCBsb2NhdGlvbjIpOwogIH0KICByZXR1cm4gcmVzcG9uc2U7Cn0KZnVuY3Rpb24gbm9ybWFsaXplUmVkaXJlY3RMb2NhdGlvbihsb2NhdGlvbjIsIGN1cnJlbnRVcmwsIGJhc2VuYW1lKSB7CiAgaWYgKGlzQWJzb2x1dGVVcmwobG9jYXRpb24yKSkgewogICAgbGV0IG5vcm1hbGl6ZWRMb2NhdGlvbiA9IGxvY2F0aW9uMjsKICAgIGxldCB1cmwgPSBub3JtYWxpemVkTG9jYXRpb24uc3RhcnRzV2l0aCgiLy8iKSA/IG5ldyBVUkwoY3VycmVudFVybC5wcm90b2NvbCArIG5vcm1hbGl6ZWRMb2NhdGlvbikgOiBuZXcgVVJMKG5vcm1hbGl6ZWRMb2NhdGlvbik7CiAgICBsZXQgaXNTYW1lQmFzZW5hbWUgPSBzdHJpcEJhc2VuYW1lKHVybC5wYXRobmFtZSwgYmFzZW5hbWUpICE9IG51bGw7CiAgICBpZiAodXJsLm9yaWdpbiA9PT0gY3VycmVudFVybC5vcmlnaW4gJiYgaXNTYW1lQmFzZW5hbWUpIHsKICAgICAgcmV0dXJuIHVybC5wYXRobmFtZSArIHVybC5zZWFyY2ggKyB1cmwuaGFzaDsKICAgIH0KICB9CiAgcmV0dXJuIGxvY2F0aW9uMjsKfQpmdW5jdGlvbiBjcmVhdGVDbGllbnRTaWRlUmVxdWVzdChoaXN0b3J5LCBsb2NhdGlvbjIsIHNpZ25hbCwgc3VibWlzc2lvbikgewogIGxldCB1cmwgPSBoaXN0b3J5LmNyZWF0ZVVSTChzdHJpcEhhc2hGcm9tUGF0aChsb2NhdGlvbjIpKS50b1N0cmluZygpOwogIGxldCBpbml0ID0geyBzaWduYWwgfTsKICBpZiAoc3VibWlzc2lvbiAmJiBpc011dGF0aW9uTWV0aG9kKHN1Ym1pc3Npb24uZm9ybU1ldGhvZCkpIHsKICAgIGxldCB7IGZvcm1NZXRob2QsIGZvcm1FbmNUeXBlIH0gPSBzdWJtaXNzaW9uOwogICAgaW5pdC5tZXRob2QgPSBmb3JtTWV0aG9kLnRvVXBwZXJDYXNlKCk7CiAgICBpZiAoZm9ybUVuY1R5cGUgPT09ICJhcHBsaWNhdGlvbi9qc29uIikgewogICAgICBpbml0LmhlYWRlcnMgPSBuZXcgSGVhZGVycyh7ICJDb250ZW50LVR5cGUiOiBmb3JtRW5jVHlwZSB9KTsKICAgICAgaW5pdC5ib2R5ID0gSlNPTi5zdHJpbmdpZnkoc3VibWlzc2lvbi5qc29uKTsKICAgIH0gZWxzZSBpZiAoZm9ybUVuY1R5cGUgPT09ICJ0ZXh0L3BsYWluIikgewogICAgICBpbml0LmJvZHkgPSBzdWJtaXNzaW9uLnRleHQ7CiAgICB9IGVsc2UgaWYgKGZvcm1FbmNUeXBlID09PSAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiAmJiBzdWJtaXNzaW9uLmZvcm1EYXRhKSB7CiAgICAgIGluaXQuYm9keSA9IGNvbnZlcnRGb3JtRGF0YVRvU2VhcmNoUGFyYW1zKHN1Ym1pc3Npb24uZm9ybURhdGEpOwogICAgfSBlbHNlIHsKICAgICAgaW5pdC5ib2R5ID0gc3VibWlzc2lvbi5mb3JtRGF0YTsKICAgIH0KICB9CiAgcmV0dXJuIG5ldyBSZXF1ZXN0KHVybCwgaW5pdCk7Cn0KZnVuY3Rpb24gY29udmVydEZvcm1EYXRhVG9TZWFyY2hQYXJhbXMoZm9ybURhdGEpIHsKICBsZXQgc2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOwogIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiBmb3JtRGF0YS5lbnRyaWVzKCkpIHsKICAgIHNlYXJjaFBhcmFtcy5hcHBlbmQoa2V5LCB0eXBlb2YgdmFsdWUgPT09ICJzdHJpbmciID8gdmFsdWUgOiB2YWx1ZS5uYW1lKTsKICB9CiAgcmV0dXJuIHNlYXJjaFBhcmFtczsKfQpmdW5jdGlvbiBjb252ZXJ0U2VhcmNoUGFyYW1zVG9Gb3JtRGF0YShzZWFyY2hQYXJhbXMpIHsKICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2Ygc2VhcmNoUGFyYW1zLmVudHJpZXMoKSkgewogICAgZm9ybURhdGEuYXBwZW5kKGtleSwgdmFsdWUpOwogIH0KICByZXR1cm4gZm9ybURhdGE7Cn0KZnVuY3Rpb24gcHJvY2Vzc1JvdXRlTG9hZGVyRGF0YShtYXRjaGVzLCByZXN1bHRzLCBwZW5kaW5nQWN0aW9uUmVzdWx0LCBpc1N0YXRpY0hhbmRsZXIgPSBmYWxzZSwgc2tpcExvYWRlckVycm9yQnViYmxpbmcgPSBmYWxzZSkgewogIGxldCBsb2FkZXJEYXRhID0ge307CiAgbGV0IGVycm9ycyA9IG51bGw7CiAgbGV0IHN0YXR1c0NvZGU7CiAgbGV0IGZvdW5kRXJyb3IgPSBmYWxzZTsKICBsZXQgbG9hZGVySGVhZGVycyA9IHt9OwogIGxldCBwZW5kaW5nRXJyb3IgPSBwZW5kaW5nQWN0aW9uUmVzdWx0ICYmIGlzRXJyb3JSZXN1bHQocGVuZGluZ0FjdGlvblJlc3VsdFsxXSkgPyBwZW5kaW5nQWN0aW9uUmVzdWx0WzFdLmVycm9yIDogdm9pZCAwOwogIG1hdGNoZXMuZm9yRWFjaCgobWF0Y2gpID0+IHsKICAgIGlmICghKG1hdGNoLnJvdXRlLmlkIGluIHJlc3VsdHMpKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGxldCBpZCA9IG1hdGNoLnJvdXRlLmlkOwogICAgbGV0IHJlc3VsdCA9IHJlc3VsdHNbaWRdOwogICAgaW52YXJpYW50KAogICAgICAhaXNSZWRpcmVjdFJlc3VsdChyZXN1bHQpLAogICAgICAiQ2Fubm90IGhhbmRsZSByZWRpcmVjdCByZXN1bHRzIGluIHByb2Nlc3NMb2FkZXJEYXRhIgogICAgKTsKICAgIGlmIChpc0Vycm9yUmVzdWx0KHJlc3VsdCkpIHsKICAgICAgbGV0IGVycm9yID0gcmVzdWx0LmVycm9yOwogICAgICBpZiAocGVuZGluZ0Vycm9yICE9PSB2b2lkIDApIHsKICAgICAgICBlcnJvciA9IHBlbmRpbmdFcnJvcjsKICAgICAgICBwZW5kaW5nRXJyb3IgPSB2b2lkIDA7CiAgICAgIH0KICAgICAgZXJyb3JzID0gZXJyb3JzIHx8IHt9OwogICAgICBpZiAoc2tpcExvYWRlckVycm9yQnViYmxpbmcpIHsKICAgICAgICBlcnJvcnNbaWRdID0gZXJyb3I7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGV0IGJvdW5kYXJ5TWF0Y2ggPSBmaW5kTmVhcmVzdEJvdW5kYXJ5KG1hdGNoZXMsIGlkKTsKICAgICAgICBpZiAoZXJyb3JzW2JvdW5kYXJ5TWF0Y2gucm91dGUuaWRdID09IG51bGwpIHsKICAgICAgICAgIGVycm9yc1tib3VuZGFyeU1hdGNoLnJvdXRlLmlkXSA9IGVycm9yOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoIWlzU3RhdGljSGFuZGxlcikgewogICAgICAgIGxvYWRlckRhdGFbaWRdID0gUmVzZXRMb2FkZXJEYXRhU3ltYm9sOwogICAgICB9CiAgICAgIGlmICghZm91bmRFcnJvcikgewogICAgICAgIGZvdW5kRXJyb3IgPSB0cnVlOwogICAgICAgIHN0YXR1c0NvZGUgPSBpc1JvdXRlRXJyb3JSZXNwb25zZShyZXN1bHQuZXJyb3IpID8gcmVzdWx0LmVycm9yLnN0YXR1cyA6IDUwMDsKICAgICAgfQogICAgICBpZiAocmVzdWx0LmhlYWRlcnMpIHsKICAgICAgICBsb2FkZXJIZWFkZXJzW2lkXSA9IHJlc3VsdC5oZWFkZXJzOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBsb2FkZXJEYXRhW2lkXSA9IHJlc3VsdC5kYXRhOwogICAgICBpZiAocmVzdWx0LnN0YXR1c0NvZGUgJiYgcmVzdWx0LnN0YXR1c0NvZGUgIT09IDIwMCAmJiAhZm91bmRFcnJvcikgewogICAgICAgIHN0YXR1c0NvZGUgPSByZXN1bHQuc3RhdHVzQ29kZTsKICAgICAgfQogICAgICBpZiAocmVzdWx0LmhlYWRlcnMpIHsKICAgICAgICBsb2FkZXJIZWFkZXJzW2lkXSA9IHJlc3VsdC5oZWFkZXJzOwogICAgICB9CiAgICB9CiAgfSk7CiAgaWYgKHBlbmRpbmdFcnJvciAhPT0gdm9pZCAwICYmIHBlbmRpbmdBY3Rpb25SZXN1bHQpIHsKICAgIGVycm9ycyA9IHsgW3BlbmRpbmdBY3Rpb25SZXN1bHRbMF1dOiBwZW5kaW5nRXJyb3IgfTsKICAgIGlmIChwZW5kaW5nQWN0aW9uUmVzdWx0WzJdKSB7CiAgICAgIGxvYWRlckRhdGFbcGVuZGluZ0FjdGlvblJlc3VsdFsyXV0gPSB2b2lkIDA7CiAgICB9CiAgfQogIHJldHVybiB7CiAgICBsb2FkZXJEYXRhLAogICAgZXJyb3JzLAogICAgc3RhdHVzQ29kZTogc3RhdHVzQ29kZSB8fCAyMDAsCiAgICBsb2FkZXJIZWFkZXJzCiAgfTsKfQpmdW5jdGlvbiBwcm9jZXNzTG9hZGVyRGF0YShzdGF0ZSwgbWF0Y2hlcywgcmVzdWx0cywgcGVuZGluZ0FjdGlvblJlc3VsdCwgcmV2YWxpZGF0aW5nRmV0Y2hlcnMsIGZldGNoZXJSZXN1bHRzKSB7CiAgbGV0IHsgbG9hZGVyRGF0YSwgZXJyb3JzIH0gPSBwcm9jZXNzUm91dGVMb2FkZXJEYXRhKAogICAgbWF0Y2hlcywKICAgIHJlc3VsdHMsCiAgICBwZW5kaW5nQWN0aW9uUmVzdWx0CiAgKTsKICByZXZhbGlkYXRpbmdGZXRjaGVycy5maWx0ZXIoKGYpID0+ICFmLm1hdGNoZXMgfHwgZi5tYXRjaGVzLnNvbWUoKG0pID0+IG0uc2hvdWxkTG9hZCkpLmZvckVhY2goKHJmKSA9PiB7CiAgICBsZXQgeyBrZXksIG1hdGNoLCBjb250cm9sbGVyIH0gPSByZjsKICAgIGlmIChjb250cm9sbGVyICYmIGNvbnRyb2xsZXIuc2lnbmFsLmFib3J0ZWQpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgbGV0IHJlc3VsdCA9IGZldGNoZXJSZXN1bHRzW2tleV07CiAgICBpbnZhcmlhbnQocmVzdWx0LCAiRGlkIG5vdCBmaW5kIGNvcnJlc3BvbmRpbmcgZmV0Y2hlciByZXN1bHQiKTsKICAgIGlmIChpc0Vycm9yUmVzdWx0KHJlc3VsdCkpIHsKICAgICAgbGV0IGJvdW5kYXJ5TWF0Y2ggPSBmaW5kTmVhcmVzdEJvdW5kYXJ5KHN0YXRlLm1hdGNoZXMsIG1hdGNoID09IG51bGwgPyB2b2lkIDAgOiBtYXRjaC5yb3V0ZS5pZCk7CiAgICAgIGlmICghKGVycm9ycyAmJiBlcnJvcnNbYm91bmRhcnlNYXRjaC5yb3V0ZS5pZF0pKSB7CiAgICAgICAgZXJyb3JzID0gewogICAgICAgICAgLi4uZXJyb3JzLAogICAgICAgICAgW2JvdW5kYXJ5TWF0Y2gucm91dGUuaWRdOiByZXN1bHQuZXJyb3IKICAgICAgICB9OwogICAgICB9CiAgICAgIHN0YXRlLmZldGNoZXJzLmRlbGV0ZShrZXkpOwogICAgfSBlbHNlIGlmIChpc1JlZGlyZWN0UmVzdWx0KHJlc3VsdCkpIHsKICAgICAgaW52YXJpYW50KGZhbHNlLCAiVW5oYW5kbGVkIGZldGNoZXIgcmV2YWxpZGF0aW9uIHJlZGlyZWN0Iik7CiAgICB9IGVsc2UgewogICAgICBsZXQgZG9uZUZldGNoZXIgPSBnZXREb25lRmV0Y2hlcihyZXN1bHQuZGF0YSk7CiAgICAgIHN0YXRlLmZldGNoZXJzLnNldChrZXksIGRvbmVGZXRjaGVyKTsKICAgIH0KICB9KTsKICByZXR1cm4geyBsb2FkZXJEYXRhLCBlcnJvcnMgfTsKfQpmdW5jdGlvbiBtZXJnZUxvYWRlckRhdGEobG9hZGVyRGF0YSwgbmV3TG9hZGVyRGF0YSwgbWF0Y2hlcywgZXJyb3JzKSB7CiAgbGV0IG1lcmdlZExvYWRlckRhdGEgPSBPYmplY3QuZW50cmllcyhuZXdMb2FkZXJEYXRhKS5maWx0ZXIoKFssIHZdKSA9PiB2ICE9PSBSZXNldExvYWRlckRhdGFTeW1ib2wpLnJlZHVjZSgobWVyZ2VkLCBbaywgdl0pID0+IHsKICAgIG1lcmdlZFtrXSA9IHY7CiAgICByZXR1cm4gbWVyZ2VkOwogIH0sIHt9KTsKICBmb3IgKGxldCBtYXRjaCBvZiBtYXRjaGVzKSB7CiAgICBsZXQgaWQgPSBtYXRjaC5yb3V0ZS5pZDsKICAgIGlmICghbmV3TG9hZGVyRGF0YS5oYXNPd25Qcm9wZXJ0eShpZCkgJiYgbG9hZGVyRGF0YS5oYXNPd25Qcm9wZXJ0eShpZCkgJiYgbWF0Y2gucm91dGUubG9hZGVyKSB7CiAgICAgIG1lcmdlZExvYWRlckRhdGFbaWRdID0gbG9hZGVyRGF0YVtpZF07CiAgICB9CiAgICBpZiAoZXJyb3JzICYmIGVycm9ycy5oYXNPd25Qcm9wZXJ0eShpZCkpIHsKICAgICAgYnJlYWs7CiAgICB9CiAgfQogIHJldHVybiBtZXJnZWRMb2FkZXJEYXRhOwp9CmZ1bmN0aW9uIGdldEFjdGlvbkRhdGFGb3JDb21taXQocGVuZGluZ0FjdGlvblJlc3VsdCkgewogIGlmICghcGVuZGluZ0FjdGlvblJlc3VsdCkgewogICAgcmV0dXJuIHt9OwogIH0KICByZXR1cm4gaXNFcnJvclJlc3VsdChwZW5kaW5nQWN0aW9uUmVzdWx0WzFdKSA/IHsKICAgIC8vIENsZWFyIG91dCBwcmlvciBhY3Rpb25EYXRhIG9uIGVycm9ycwogICAgYWN0aW9uRGF0YToge30KICB9IDogewogICAgYWN0aW9uRGF0YTogewogICAgICBbcGVuZGluZ0FjdGlvblJlc3VsdFswXV06IHBlbmRpbmdBY3Rpb25SZXN1bHRbMV0uZGF0YQogICAgfQogIH07Cn0KZnVuY3Rpb24gZmluZE5lYXJlc3RCb3VuZGFyeShtYXRjaGVzLCByb3V0ZUlkKSB7CiAgbGV0IGVsaWdpYmxlTWF0Y2hlcyA9IHJvdXRlSWQgPyBtYXRjaGVzLnNsaWNlKDAsIG1hdGNoZXMuZmluZEluZGV4KChtKSA9PiBtLnJvdXRlLmlkID09PSByb3V0ZUlkKSArIDEpIDogWy4uLm1hdGNoZXNdOwogIHJldHVybiBlbGlnaWJsZU1hdGNoZXMucmV2ZXJzZSgpLmZpbmQoKG0pID0+IG0ucm91dGUuaGFzRXJyb3JCb3VuZGFyeSA9PT0gdHJ1ZSkgfHwgbWF0Y2hlc1swXTsKfQpmdW5jdGlvbiBnZXRTaG9ydENpcmN1aXRNYXRjaGVzKHJvdXRlcykgewogIGxldCByb3V0ZSA9IHJvdXRlcy5sZW5ndGggPT09IDEgPyByb3V0ZXNbMF0gOiByb3V0ZXMuZmluZCgocikgPT4gci5pbmRleCB8fCAhci5wYXRoIHx8IHIucGF0aCA9PT0gIi8iKSB8fCB7CiAgICBpZDogYF9fc2hpbS1lcnJvci1yb3V0ZV9fYAogIH07CiAgcmV0dXJuIHsKICAgIG1hdGNoZXM6IFsKICAgICAgewogICAgICAgIHBhcmFtczoge30sCiAgICAgICAgcGF0aG5hbWU6ICIiLAogICAgICAgIHBhdGhuYW1lQmFzZTogIiIsCiAgICAgICAgcm91dGUKICAgICAgfQogICAgXSwKICAgIHJvdXRlCiAgfTsKfQpmdW5jdGlvbiBnZXRJbnRlcm5hbFJvdXRlckVycm9yKHN0YXR1cywgewogIHBhdGhuYW1lLAogIHJvdXRlSWQsCiAgbWV0aG9kLAogIHR5cGUsCiAgbWVzc2FnZQp9ID0ge30pIHsKICBsZXQgc3RhdHVzVGV4dCA9ICJVbmtub3duIFNlcnZlciBFcnJvciI7CiAgbGV0IGVycm9yTWVzc2FnZSA9ICJVbmtub3duIEByZW1peC1ydW4vcm91dGVyIGVycm9yIjsKICBpZiAoc3RhdHVzID09PSA0MDApIHsKICAgIHN0YXR1c1RleHQgPSAiQmFkIFJlcXVlc3QiOwogICAgaWYgKG1ldGhvZCAmJiBwYXRobmFtZSAmJiByb3V0ZUlkKSB7CiAgICAgIGVycm9yTWVzc2FnZSA9IGBZb3UgbWFkZSBhICR7bWV0aG9kfSByZXF1ZXN0IHRvICIke3BhdGhuYW1lfSIgYnV0IGRpZCBub3QgcHJvdmlkZSBhIFxgbG9hZGVyXGAgZm9yIHJvdXRlICIke3JvdXRlSWR9Iiwgc28gdGhlcmUgaXMgbm8gd2F5IHRvIGhhbmRsZSB0aGUgcmVxdWVzdC5gOwogICAgfSBlbHNlIGlmICh0eXBlID09PSAiaW52YWxpZC1ib2R5IikgewogICAgICBlcnJvck1lc3NhZ2UgPSAiVW5hYmxlIHRvIGVuY29kZSBzdWJtaXNzaW9uIGJvZHkiOwogICAgfQogIH0gZWxzZSBpZiAoc3RhdHVzID09PSA0MDMpIHsKICAgIHN0YXR1c1RleHQgPSAiRm9yYmlkZGVuIjsKICAgIGVycm9yTWVzc2FnZSA9IGBSb3V0ZSAiJHtyb3V0ZUlkfSIgZG9lcyBub3QgbWF0Y2ggVVJMICIke3BhdGhuYW1lfSJgOwogIH0gZWxzZSBpZiAoc3RhdHVzID09PSA0MDQpIHsKICAgIHN0YXR1c1RleHQgPSAiTm90IEZvdW5kIjsKICAgIGVycm9yTWVzc2FnZSA9IGBObyByb3V0ZSBtYXRjaGVzIFVSTCAiJHtwYXRobmFtZX0iYDsKICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gNDA1KSB7CiAgICBzdGF0dXNUZXh0ID0gIk1ldGhvZCBOb3QgQWxsb3dlZCI7CiAgICBpZiAobWV0aG9kICYmIHBhdGhuYW1lICYmIHJvdXRlSWQpIHsKICAgICAgZXJyb3JNZXNzYWdlID0gYFlvdSBtYWRlIGEgJHttZXRob2QudG9VcHBlckNhc2UoKX0gcmVxdWVzdCB0byAiJHtwYXRobmFtZX0iIGJ1dCBkaWQgbm90IHByb3ZpZGUgYW4gXGBhY3Rpb25cYCBmb3Igcm91dGUgIiR7cm91dGVJZH0iLCBzbyB0aGVyZSBpcyBubyB3YXkgdG8gaGFuZGxlIHRoZSByZXF1ZXN0LmA7CiAgICB9IGVsc2UgaWYgKG1ldGhvZCkgewogICAgICBlcnJvck1lc3NhZ2UgPSBgSW52YWxpZCByZXF1ZXN0IG1ldGhvZCAiJHttZXRob2QudG9VcHBlckNhc2UoKX0iYDsKICAgIH0KICB9CiAgcmV0dXJuIG5ldyBFcnJvclJlc3BvbnNlSW1wbCgKICAgIHN0YXR1cyB8fCA1MDAsCiAgICBzdGF0dXNUZXh0LAogICAgbmV3IEVycm9yKGVycm9yTWVzc2FnZSksCiAgICB0cnVlCiAgKTsKfQpmdW5jdGlvbiBmaW5kUmVkaXJlY3QocmVzdWx0cykgewogIGxldCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMocmVzdWx0cyk7CiAgZm9yIChsZXQgaSA9IGVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgIGxldCBba2V5LCByZXN1bHRdID0gZW50cmllc1tpXTsKICAgIGlmIChpc1JlZGlyZWN0UmVzdWx0KHJlc3VsdCkpIHsKICAgICAgcmV0dXJuIHsga2V5LCByZXN1bHQgfTsKICAgIH0KICB9Cn0KZnVuY3Rpb24gc3RyaXBIYXNoRnJvbVBhdGgocGF0aCkgewogIGxldCBwYXJzZWRQYXRoID0gdHlwZW9mIHBhdGggPT09ICJzdHJpbmciID8gcGFyc2VQYXRoKHBhdGgpIDogcGF0aDsKICByZXR1cm4gY3JlYXRlUGF0aCh7IC4uLnBhcnNlZFBhdGgsIGhhc2g6ICIiIH0pOwp9CmZ1bmN0aW9uIGlzSGFzaENoYW5nZU9ubHkoYSwgYikgewogIGlmIChhLnBhdGhuYW1lICE9PSBiLnBhdGhuYW1lIHx8IGEuc2VhcmNoICE9PSBiLnNlYXJjaCkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICBpZiAoYS5oYXNoID09PSAiIikgewogICAgcmV0dXJuIGIuaGFzaCAhPT0gIiI7CiAgfSBlbHNlIGlmIChhLmhhc2ggPT09IGIuaGFzaCkgewogICAgcmV0dXJuIHRydWU7CiAgfSBlbHNlIGlmIChiLmhhc2ggIT09ICIiKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgcmV0dXJuIGZhbHNlOwp9CmZ1bmN0aW9uIGRhdGFXaXRoUmVzcG9uc2VJbml0VG9SZXNwb25zZShkYXRhMikgewogIHJldHVybiBSZXNwb25zZS5qc29uKGRhdGEyLmRhdGEsIGRhdGEyLmluaXQgPz8gdm9pZCAwKTsKfQpmdW5jdGlvbiBkYXRhV2l0aFJlc3BvbnNlSW5pdFRvRXJyb3JSZXNwb25zZShkYXRhMikgewogIHZhciBfYSwgX2I7CiAgcmV0dXJuIG5ldyBFcnJvclJlc3BvbnNlSW1wbCgKICAgICgoX2EgPSBkYXRhMi5pbml0KSA9PSBudWxsID8gdm9pZCAwIDogX2Euc3RhdHVzKSA/PyA1MDAsCiAgICAoKF9iID0gZGF0YTIuaW5pdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnN0YXR1c1RleHQpID8/ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiLAogICAgZGF0YTIuZGF0YQogICk7Cn0KZnVuY3Rpb24gaXNEYXRhU3RyYXRlZ3lSZXN1bHRzKHJlc3VsdCkgewogIHJldHVybiByZXN1bHQgIT0gbnVsbCAmJiB0eXBlb2YgcmVzdWx0ID09PSAib2JqZWN0IiAmJiBPYmplY3QuZW50cmllcyhyZXN1bHQpLmV2ZXJ5KAogICAgKFtrZXksIHZhbHVlXSkgPT4gdHlwZW9mIGtleSA9PT0gInN0cmluZyIgJiYgaXNEYXRhU3RyYXRlZ3lSZXN1bHQodmFsdWUpCiAgKTsKfQpmdW5jdGlvbiBpc0RhdGFTdHJhdGVneVJlc3VsdChyZXN1bHQpIHsKICByZXR1cm4gcmVzdWx0ICE9IG51bGwgJiYgdHlwZW9mIHJlc3VsdCA9PT0gIm9iamVjdCIgJiYgInR5cGUiIGluIHJlc3VsdCAmJiAicmVzdWx0IiBpbiByZXN1bHQgJiYgKHJlc3VsdC50eXBlID09PSAiZGF0YSIgfHwgcmVzdWx0LnR5cGUgPT09ICJlcnJvciIpOwp9CmZ1bmN0aW9uIGlzUmVkaXJlY3REYXRhU3RyYXRlZ3lSZXN1bHQocmVzdWx0KSB7CiAgcmV0dXJuIGlzUmVzcG9uc2UocmVzdWx0LnJlc3VsdCkgJiYgcmVkaXJlY3RTdGF0dXNDb2Rlcy5oYXMocmVzdWx0LnJlc3VsdC5zdGF0dXMpOwp9CmZ1bmN0aW9uIGlzRXJyb3JSZXN1bHQocmVzdWx0KSB7CiAgcmV0dXJuIHJlc3VsdC50eXBlID09PSAiZXJyb3IiOwp9CmZ1bmN0aW9uIGlzUmVkaXJlY3RSZXN1bHQocmVzdWx0KSB7CiAgcmV0dXJuIChyZXN1bHQgJiYgcmVzdWx0LnR5cGUpID09PSAicmVkaXJlY3QiOwp9CmZ1bmN0aW9uIGlzRGF0YVdpdGhSZXNwb25zZUluaXQodmFsdWUpIHsKICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAib2JqZWN0IiAmJiB2YWx1ZSAhPSBudWxsICYmICJ0eXBlIiBpbiB2YWx1ZSAmJiAiZGF0YSIgaW4gdmFsdWUgJiYgImluaXQiIGluIHZhbHVlICYmIHZhbHVlLnR5cGUgPT09ICJEYXRhV2l0aFJlc3BvbnNlSW5pdCI7Cn0KZnVuY3Rpb24gaXNSZXNwb25zZSh2YWx1ZSkgewogIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZS5zdGF0dXMgPT09ICJudW1iZXIiICYmIHR5cGVvZiB2YWx1ZS5zdGF0dXNUZXh0ID09PSAic3RyaW5nIiAmJiB0eXBlb2YgdmFsdWUuaGVhZGVycyA9PT0gIm9iamVjdCIgJiYgdHlwZW9mIHZhbHVlLmJvZHkgIT09ICJ1bmRlZmluZWQiOwp9CmZ1bmN0aW9uIGlzUmVkaXJlY3RTdGF0dXNDb2RlKHN0YXR1c0NvZGUpIHsKICByZXR1cm4gcmVkaXJlY3RTdGF0dXNDb2Rlcy5oYXMoc3RhdHVzQ29kZSk7Cn0KZnVuY3Rpb24gaXNSZWRpcmVjdFJlc3BvbnNlKHJlc3VsdCkgewogIHJldHVybiBpc1Jlc3BvbnNlKHJlc3VsdCkgJiYgaXNSZWRpcmVjdFN0YXR1c0NvZGUocmVzdWx0LnN0YXR1cykgJiYgcmVzdWx0LmhlYWRlcnMuaGFzKCJMb2NhdGlvbiIpOwp9CmZ1bmN0aW9uIGlzVmFsaWRNZXRob2QobWV0aG9kKSB7CiAgcmV0dXJuIHZhbGlkUmVxdWVzdE1ldGhvZHMuaGFzKG1ldGhvZC50b1VwcGVyQ2FzZSgpKTsKfQpmdW5jdGlvbiBpc011dGF0aW9uTWV0aG9kKG1ldGhvZCkgewogIHJldHVybiB2YWxpZE11dGF0aW9uTWV0aG9kcy5oYXMobWV0aG9kLnRvVXBwZXJDYXNlKCkpOwp9CmZ1bmN0aW9uIGhhc05ha2VkSW5kZXhRdWVyeShzZWFyY2gpIHsKICByZXR1cm4gbmV3IFVSTFNlYXJjaFBhcmFtcyhzZWFyY2gpLmdldEFsbCgiaW5kZXgiKS5zb21lKCh2KSA9PiB2ID09PSAiIik7Cn0KZnVuY3Rpb24gZ2V0VGFyZ2V0TWF0Y2gobWF0Y2hlcywgbG9jYXRpb24yKSB7CiAgbGV0IHNlYXJjaCA9IHR5cGVvZiBsb2NhdGlvbjIgPT09ICJzdHJpbmciID8gcGFyc2VQYXRoKGxvY2F0aW9uMikuc2VhcmNoIDogbG9jYXRpb24yLnNlYXJjaDsKICBpZiAobWF0Y2hlc1ttYXRjaGVzLmxlbmd0aCAtIDFdLnJvdXRlLmluZGV4ICYmIGhhc05ha2VkSW5kZXhRdWVyeShzZWFyY2ggfHwgIiIpKSB7CiAgICByZXR1cm4gbWF0Y2hlc1ttYXRjaGVzLmxlbmd0aCAtIDFdOwogIH0KICBsZXQgcGF0aE1hdGNoZXMgPSBnZXRQYXRoQ29udHJpYnV0aW5nTWF0Y2hlcyhtYXRjaGVzKTsKICByZXR1cm4gcGF0aE1hdGNoZXNbcGF0aE1hdGNoZXMubGVuZ3RoIC0gMV07Cn0KZnVuY3Rpb24gZ2V0U3VibWlzc2lvbkZyb21OYXZpZ2F0aW9uKG5hdmlnYXRpb24pIHsKICBsZXQgeyBmb3JtTWV0aG9kLCBmb3JtQWN0aW9uLCBmb3JtRW5jVHlwZSwgdGV4dCwgZm9ybURhdGEsIGpzb24gfSA9IG5hdmlnYXRpb247CiAgaWYgKCFmb3JtTWV0aG9kIHx8ICFmb3JtQWN0aW9uIHx8ICFmb3JtRW5jVHlwZSkgewogICAgcmV0dXJuOwogIH0KICBpZiAodGV4dCAhPSBudWxsKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtTWV0aG9kLAogICAgICBmb3JtQWN0aW9uLAogICAgICBmb3JtRW5jVHlwZSwKICAgICAgZm9ybURhdGE6IHZvaWQgMCwKICAgICAganNvbjogdm9pZCAwLAogICAgICB0ZXh0CiAgICB9OwogIH0gZWxzZSBpZiAoZm9ybURhdGEgIT0gbnVsbCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybU1ldGhvZCwKICAgICAgZm9ybUFjdGlvbiwKICAgICAgZm9ybUVuY1R5cGUsCiAgICAgIGZvcm1EYXRhLAogICAgICBqc29uOiB2b2lkIDAsCiAgICAgIHRleHQ6IHZvaWQgMAogICAgfTsKICB9IGVsc2UgaWYgKGpzb24gIT09IHZvaWQgMCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybU1ldGhvZCwKICAgICAgZm9ybUFjdGlvbiwKICAgICAgZm9ybUVuY1R5cGUsCiAgICAgIGZvcm1EYXRhOiB2b2lkIDAsCiAgICAgIGpzb24sCiAgICAgIHRleHQ6IHZvaWQgMAogICAgfTsKICB9Cn0KZnVuY3Rpb24gZ2V0TG9hZGluZ05hdmlnYXRpb24obG9jYXRpb24yLCBzdWJtaXNzaW9uKSB7CiAgaWYgKHN1Ym1pc3Npb24pIHsKICAgIGxldCBuYXZpZ2F0aW9uID0gewogICAgICBzdGF0ZTogImxvYWRpbmciLAogICAgICBsb2NhdGlvbjogbG9jYXRpb24yLAogICAgICBmb3JtTWV0aG9kOiBzdWJtaXNzaW9uLmZvcm1NZXRob2QsCiAgICAgIGZvcm1BY3Rpb246IHN1Ym1pc3Npb24uZm9ybUFjdGlvbiwKICAgICAgZm9ybUVuY1R5cGU6IHN1Ym1pc3Npb24uZm9ybUVuY1R5cGUsCiAgICAgIGZvcm1EYXRhOiBzdWJtaXNzaW9uLmZvcm1EYXRhLAogICAgICBqc29uOiBzdWJtaXNzaW9uLmpzb24sCiAgICAgIHRleHQ6IHN1Ym1pc3Npb24udGV4dAogICAgfTsKICAgIHJldHVybiBuYXZpZ2F0aW9uOwogIH0gZWxzZSB7CiAgICBsZXQgbmF2aWdhdGlvbiA9IHsKICAgICAgc3RhdGU6ICJsb2FkaW5nIiwKICAgICAgbG9jYXRpb246IGxvY2F0aW9uMiwKICAgICAgZm9ybU1ldGhvZDogdm9pZCAwLAogICAgICBmb3JtQWN0aW9uOiB2b2lkIDAsCiAgICAgIGZvcm1FbmNUeXBlOiB2b2lkIDAsCiAgICAgIGZvcm1EYXRhOiB2b2lkIDAsCiAgICAgIGpzb246IHZvaWQgMCwKICAgICAgdGV4dDogdm9pZCAwCiAgICB9OwogICAgcmV0dXJuIG5hdmlnYXRpb247CiAgfQp9CmZ1bmN0aW9uIGdldFN1Ym1pdHRpbmdOYXZpZ2F0aW9uKGxvY2F0aW9uMiwgc3VibWlzc2lvbikgewogIGxldCBuYXZpZ2F0aW9uID0gewogICAgc3RhdGU6ICJzdWJtaXR0aW5nIiwKICAgIGxvY2F0aW9uOiBsb2NhdGlvbjIsCiAgICBmb3JtTWV0aG9kOiBzdWJtaXNzaW9uLmZvcm1NZXRob2QsCiAgICBmb3JtQWN0aW9uOiBzdWJtaXNzaW9uLmZvcm1BY3Rpb24sCiAgICBmb3JtRW5jVHlwZTogc3VibWlzc2lvbi5mb3JtRW5jVHlwZSwKICAgIGZvcm1EYXRhOiBzdWJtaXNzaW9uLmZvcm1EYXRhLAogICAganNvbjogc3VibWlzc2lvbi5qc29uLAogICAgdGV4dDogc3VibWlzc2lvbi50ZXh0CiAgfTsKICByZXR1cm4gbmF2aWdhdGlvbjsKfQpmdW5jdGlvbiBnZXRMb2FkaW5nRmV0Y2hlcihzdWJtaXNzaW9uLCBkYXRhMikgewogIGlmIChzdWJtaXNzaW9uKSB7CiAgICBsZXQgZmV0Y2hlciA9IHsKICAgICAgc3RhdGU6ICJsb2FkaW5nIiwKICAgICAgZm9ybU1ldGhvZDogc3VibWlzc2lvbi5mb3JtTWV0aG9kLAogICAgICBmb3JtQWN0aW9uOiBzdWJtaXNzaW9uLmZvcm1BY3Rpb24sCiAgICAgIGZvcm1FbmNUeXBlOiBzdWJtaXNzaW9uLmZvcm1FbmNUeXBlLAogICAgICBmb3JtRGF0YTogc3VibWlzc2lvbi5mb3JtRGF0YSwKICAgICAganNvbjogc3VibWlzc2lvbi5qc29uLAogICAgICB0ZXh0OiBzdWJtaXNzaW9uLnRleHQsCiAgICAgIGRhdGE6IGRhdGEyCiAgICB9OwogICAgcmV0dXJuIGZldGNoZXI7CiAgfSBlbHNlIHsKICAgIGxldCBmZXRjaGVyID0gewogICAgICBzdGF0ZTogImxvYWRpbmciLAogICAgICBmb3JtTWV0aG9kOiB2b2lkIDAsCiAgICAgIGZvcm1BY3Rpb246IHZvaWQgMCwKICAgICAgZm9ybUVuY1R5cGU6IHZvaWQgMCwKICAgICAgZm9ybURhdGE6IHZvaWQgMCwKICAgICAganNvbjogdm9pZCAwLAogICAgICB0ZXh0OiB2b2lkIDAsCiAgICAgIGRhdGE6IGRhdGEyCiAgICB9OwogICAgcmV0dXJuIGZldGNoZXI7CiAgfQp9CmZ1bmN0aW9uIGdldFN1Ym1pdHRpbmdGZXRjaGVyKHN1Ym1pc3Npb24sIGV4aXN0aW5nRmV0Y2hlcikgewogIGxldCBmZXRjaGVyID0gewogICAgc3RhdGU6ICJzdWJtaXR0aW5nIiwKICAgIGZvcm1NZXRob2Q6IHN1Ym1pc3Npb24uZm9ybU1ldGhvZCwKICAgIGZvcm1BY3Rpb246IHN1Ym1pc3Npb24uZm9ybUFjdGlvbiwKICAgIGZvcm1FbmNUeXBlOiBzdWJtaXNzaW9uLmZvcm1FbmNUeXBlLAogICAgZm9ybURhdGE6IHN1Ym1pc3Npb24uZm9ybURhdGEsCiAgICBqc29uOiBzdWJtaXNzaW9uLmpzb24sCiAgICB0ZXh0OiBzdWJtaXNzaW9uLnRleHQsCiAgICBkYXRhOiBleGlzdGluZ0ZldGNoZXIgPyBleGlzdGluZ0ZldGNoZXIuZGF0YSA6IHZvaWQgMAogIH07CiAgcmV0dXJuIGZldGNoZXI7Cn0KZnVuY3Rpb24gZ2V0RG9uZUZldGNoZXIoZGF0YTIpIHsKICBsZXQgZmV0Y2hlciA9IHsKICAgIHN0YXRlOiAiaWRsZSIsCiAgICBmb3JtTWV0aG9kOiB2b2lkIDAsCiAgICBmb3JtQWN0aW9uOiB2b2lkIDAsCiAgICBmb3JtRW5jVHlwZTogdm9pZCAwLAogICAgZm9ybURhdGE6IHZvaWQgMCwKICAgIGpzb246IHZvaWQgMCwKICAgIHRleHQ6IHZvaWQgMCwKICAgIGRhdGE6IGRhdGEyCiAgfTsKICByZXR1cm4gZmV0Y2hlcjsKfQpmdW5jdGlvbiByZXN0b3JlQXBwbGllZFRyYW5zaXRpb25zKF93aW5kb3csIHRyYW5zaXRpb25zKSB7CiAgdHJ5IHsKICAgIGxldCBzZXNzaW9uUG9zaXRpb25zID0gX3dpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKAogICAgICBUUkFOU0lUSU9OU19TVE9SQUdFX0tFWQogICAgKTsKICAgIGlmIChzZXNzaW9uUG9zaXRpb25zKSB7CiAgICAgIGxldCBqc29uID0gSlNPTi5wYXJzZShzZXNzaW9uUG9zaXRpb25zKTsKICAgICAgZm9yIChsZXQgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGpzb24gfHwge30pKSB7CiAgICAgICAgaWYgKHYgJiYgQXJyYXkuaXNBcnJheSh2KSkgewogICAgICAgICAgdHJhbnNpdGlvbnMuc2V0KGssIG5ldyBTZXQodiB8fCBbXSkpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0gY2F0Y2ggKGUpIHsKICB9Cn0KZnVuY3Rpb24gcGVyc2lzdEFwcGxpZWRUcmFuc2l0aW9ucyhfd2luZG93LCB0cmFuc2l0aW9ucykgewogIGlmICh0cmFuc2l0aW9ucy5zaXplID4gMCkgewogICAgbGV0IGpzb24gPSB7fTsKICAgIGZvciAobGV0IFtrLCB2XSBvZiB0cmFuc2l0aW9ucykgewogICAgICBqc29uW2tdID0gWy4uLnZdOwogICAgfQogICAgdHJ5IHsKICAgICAgX3dpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKAogICAgICAgIFRSQU5TSVRJT05TX1NUT1JBR0VfS0VZLAogICAgICAgIEpTT04uc3RyaW5naWZ5KGpzb24pCiAgICAgICk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICB3YXJuaW5nKAogICAgICAgIGZhbHNlLAogICAgICAgIGBGYWlsZWQgdG8gc2F2ZSBhcHBsaWVkIHZpZXcgdHJhbnNpdGlvbnMgaW4gc2Vzc2lvblN0b3JhZ2UgKCR7ZXJyb3J9KS5gCiAgICAgICk7CiAgICB9CiAgfQp9CmZ1bmN0aW9uIGNyZWF0ZURlZmVycmVkKCkgewogIGxldCByZXNvbHZlOwogIGxldCByZWplY3Q7CiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHsKICAgIHJlc29sdmUgPSBhc3luYyAodmFsKSA9PiB7CiAgICAgIHJlcyh2YWwpOwogICAgICB0cnkgewogICAgICAgIGF3YWl0IHByb21pc2U7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgfQogICAgfTsKICAgIHJlamVjdCA9IGFzeW5jIChlcnJvcikgPT4gewogICAgICByZWooZXJyb3IpOwogICAgICB0cnkgewogICAgICAgIGF3YWl0IHByb21pc2U7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgfQogICAgfTsKICB9KTsKICByZXR1cm4gewogICAgcHJvbWlzZSwKICAgIC8vQHRzLWlnbm9yZQogICAgcmVzb2x2ZSwKICAgIC8vQHRzLWlnbm9yZQogICAgcmVqZWN0CiAgfTsKfQp2YXIgRGF0YVJvdXRlckNvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0KG51bGwpOwpEYXRhUm91dGVyQ29udGV4dC5kaXNwbGF5TmFtZSA9ICJEYXRhUm91dGVyIjsKdmFyIERhdGFSb3V0ZXJTdGF0ZUNvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0KG51bGwpOwpEYXRhUm91dGVyU3RhdGVDb250ZXh0LmRpc3BsYXlOYW1lID0gIkRhdGFSb3V0ZXJTdGF0ZSI7CnZhciBSU0NSb3V0ZXJDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dChmYWxzZSk7CmZ1bmN0aW9uIHVzZUlzUlNDUm91dGVyQ29udGV4dCgpIHsKICByZXR1cm4gUmVhY3QudXNlQ29udGV4dChSU0NSb3V0ZXJDb250ZXh0KTsKfQp2YXIgVmlld1RyYW5zaXRpb25Db250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dCh7CiAgaXNUcmFuc2l0aW9uaW5nOiBmYWxzZQp9KTsKVmlld1RyYW5zaXRpb25Db250ZXh0LmRpc3BsYXlOYW1lID0gIlZpZXdUcmFuc2l0aW9uIjsKdmFyIEZldGNoZXJzQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQoCiAgLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKQopOwpGZXRjaGVyc0NvbnRleHQuZGlzcGxheU5hbWUgPSAiRmV0Y2hlcnMiOwp2YXIgQXdhaXRDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dChudWxsKTsKQXdhaXRDb250ZXh0LmRpc3BsYXlOYW1lID0gIkF3YWl0IjsKdmFyIEF3YWl0Q29udGV4dFByb3ZpZGVyID0gKHByb3BzKSA9PiBSZWFjdC5jcmVhdGVFbGVtZW50KEF3YWl0Q29udGV4dC5Qcm92aWRlciwgcHJvcHMpOwp2YXIgTmF2aWdhdGlvbkNvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0KAogIG51bGwKKTsKTmF2aWdhdGlvbkNvbnRleHQuZGlzcGxheU5hbWUgPSAiTmF2aWdhdGlvbiI7CnZhciBMb2NhdGlvbkNvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0KAogIG51bGwKKTsKTG9jYXRpb25Db250ZXh0LmRpc3BsYXlOYW1lID0gIkxvY2F0aW9uIjsKdmFyIFJvdXRlQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQoewogIG91dGxldDogbnVsbCwKICBtYXRjaGVzOiBbXSwKICBpc0RhdGFSb3V0ZTogZmFsc2UKfSk7ClJvdXRlQ29udGV4dC5kaXNwbGF5TmFtZSA9ICJSb3V0ZSI7CnZhciBSb3V0ZUVycm9yQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQobnVsbCk7ClJvdXRlRXJyb3JDb250ZXh0LmRpc3BsYXlOYW1lID0gIlJvdXRlRXJyb3IiOwp2YXIgRU5BQkxFX0RFVl9XQVJOSU5HUyA9IHRydWU7CmZ1bmN0aW9uIHVzZUhyZWYodG8sIHsgcmVsYXRpdmUgfSA9IHt9KSB7CiAgaW52YXJpYW50KAogICAgdXNlSW5Sb3V0ZXJDb250ZXh0KCksCiAgICAvLyBUT0RPOiBUaGlzIGVycm9yIGlzIHByb2JhYmx5IGJlY2F1c2UgdGhleSBzb21laG93IGhhdmUgMiB2ZXJzaW9ucyBvZiB0aGUKICAgIC8vIHJvdXRlciBsb2FkZWQuIFdlIGNhbiBoZWxwIHRoZW0gdW5kZXJzdGFuZCBob3cgdG8gYXZvaWQgdGhhdC4KICAgIGB1c2VIcmVmKCkgbWF5IGJlIHVzZWQgb25seSBpbiB0aGUgY29udGV4dCBvZiBhIDxSb3V0ZXI+IGNvbXBvbmVudC5gCiAgKTsKICBsZXQgeyBiYXNlbmFtZSwgbmF2aWdhdG9yIH0gPSBSZWFjdDIudXNlQ29udGV4dChOYXZpZ2F0aW9uQ29udGV4dCk7CiAgbGV0IHsgaGFzaCwgcGF0aG5hbWUsIHNlYXJjaCB9ID0gdXNlUmVzb2x2ZWRQYXRoKHRvLCB7IHJlbGF0aXZlIH0pOwogIGxldCBqb2luZWRQYXRobmFtZSA9IHBhdGhuYW1lOwogIGlmIChiYXNlbmFtZSAhPT0gIi8iKSB7CiAgICBqb2luZWRQYXRobmFtZSA9IHBhdGhuYW1lID09PSAiLyIgPyBiYXNlbmFtZSA6IGpvaW5QYXRocyhbYmFzZW5hbWUsIHBhdGhuYW1lXSk7CiAgfQogIHJldHVybiBuYXZpZ2F0b3IuY3JlYXRlSHJlZih7IHBhdGhuYW1lOiBqb2luZWRQYXRobmFtZSwgc2VhcmNoLCBoYXNoIH0pOwp9CmZ1bmN0aW9uIHVzZUluUm91dGVyQ29udGV4dCgpIHsKICByZXR1cm4gUmVhY3QyLnVzZUNvbnRleHQoTG9jYXRpb25Db250ZXh0KSAhPSBudWxsOwp9CmZ1bmN0aW9uIHVzZUxvY2F0aW9uKCkgewogIGludmFyaWFudCgKICAgIHVzZUluUm91dGVyQ29udGV4dCgpLAogICAgLy8gVE9ETzogVGhpcyBlcnJvciBpcyBwcm9iYWJseSBiZWNhdXNlIHRoZXkgc29tZWhvdyBoYXZlIDIgdmVyc2lvbnMgb2YgdGhlCiAgICAvLyByb3V0ZXIgbG9hZGVkLiBXZSBjYW4gaGVscCB0aGVtIHVuZGVyc3RhbmQgaG93IHRvIGF2b2lkIHRoYXQuCiAgICBgdXNlTG9jYXRpb24oKSBtYXkgYmUgdXNlZCBvbmx5IGluIHRoZSBjb250ZXh0IG9mIGEgPFJvdXRlcj4gY29tcG9uZW50LmAKICApOwogIHJldHVybiBSZWFjdDIudXNlQ29udGV4dChMb2NhdGlvbkNvbnRleHQpLmxvY2F0aW9uOwp9CmZ1bmN0aW9uIHVzZU5hdmlnYXRpb25UeXBlKCkgewogIHJldHVybiBSZWFjdDIudXNlQ29udGV4dChMb2NhdGlvbkNvbnRleHQpLm5hdmlnYXRpb25UeXBlOwp9CmZ1bmN0aW9uIHVzZU1hdGNoKHBhdHRlcm4pIHsKICBpbnZhcmlhbnQoCiAgICB1c2VJblJvdXRlckNvbnRleHQoKSwKICAgIC8vIFRPRE86IFRoaXMgZXJyb3IgaXMgcHJvYmFibHkgYmVjYXVzZSB0aGV5IHNvbWVob3cgaGF2ZSAyIHZlcnNpb25zIG9mIHRoZQogICAgLy8gcm91dGVyIGxvYWRlZC4gV2UgY2FuIGhlbHAgdGhlbSB1bmRlcnN0YW5kIGhvdyB0byBhdm9pZCB0aGF0LgogICAgYHVzZU1hdGNoKCkgbWF5IGJlIHVzZWQgb25seSBpbiB0aGUgY29udGV4dCBvZiBhIDxSb3V0ZXI+IGNvbXBvbmVudC5gCiAgKTsKICBsZXQgeyBwYXRobmFtZSB9ID0gdXNlTG9jYXRpb24oKTsKICByZXR1cm4gUmVhY3QyLnVzZU1lbW8oCiAgICAoKSA9PiBtYXRjaFBhdGgocGF0dGVybiwgZGVjb2RlUGF0aChwYXRobmFtZSkpLAogICAgW3BhdGhuYW1lLCBwYXR0ZXJuXQogICk7Cn0KdmFyIG5hdmlnYXRlRWZmZWN0V2FybmluZyA9IGBZb3Ugc2hvdWxkIGNhbGwgbmF2aWdhdGUoKSBpbiBhIFJlYWN0LnVzZUVmZmVjdCgpLCBub3Qgd2hlbiB5b3VyIGNvbXBvbmVudCBpcyBmaXJzdCByZW5kZXJlZC5gOwpmdW5jdGlvbiB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0KGNiKSB7CiAgbGV0IGlzU3RhdGljID0gUmVhY3QyLnVzZUNvbnRleHQoTmF2aWdhdGlvbkNvbnRleHQpLnN0YXRpYzsKICBpZiAoIWlzU3RhdGljKSB7CiAgICBSZWFjdDIudXNlTGF5b3V0RWZmZWN0KGNiKTsKICB9Cn0KZnVuY3Rpb24gdXNlTmF2aWdhdGUoKSB7CiAgbGV0IHsgaXNEYXRhUm91dGUgfSA9IFJlYWN0Mi51c2VDb250ZXh0KFJvdXRlQ29udGV4dCk7CiAgcmV0dXJuIGlzRGF0YVJvdXRlID8gdXNlTmF2aWdhdGVTdGFibGUoKSA6IHVzZU5hdmlnYXRlVW5zdGFibGUoKTsKfQpmdW5jdGlvbiB1c2VOYXZpZ2F0ZVVuc3RhYmxlKCkgewogIGludmFyaWFudCgKICAgIHVzZUluUm91dGVyQ29udGV4dCgpLAogICAgLy8gVE9ETzogVGhpcyBlcnJvciBpcyBwcm9iYWJseSBiZWNhdXNlIHRoZXkgc29tZWhvdyBoYXZlIDIgdmVyc2lvbnMgb2YgdGhlCiAgICAvLyByb3V0ZXIgbG9hZGVkLiBXZSBjYW4gaGVscCB0aGVtIHVuZGVyc3RhbmQgaG93IHRvIGF2b2lkIHRoYXQuCiAgICBgdXNlTmF2aWdhdGUoKSBtYXkgYmUgdXNlZCBvbmx5IGluIHRoZSBjb250ZXh0IG9mIGEgPFJvdXRlcj4gY29tcG9uZW50LmAKICApOwogIGxldCBkYXRhUm91dGVyQ29udGV4dCA9IFJlYWN0Mi51c2VDb250ZXh0KERhdGFSb3V0ZXJDb250ZXh0KTsKICBsZXQgeyBiYXNlbmFtZSwgbmF2aWdhdG9yIH0gPSBSZWFjdDIudXNlQ29udGV4dChOYXZpZ2F0aW9uQ29udGV4dCk7CiAgbGV0IHsgbWF0Y2hlcyB9ID0gUmVhY3QyLnVzZUNvbnRleHQoUm91dGVDb250ZXh0KTsKICBsZXQgeyBwYXRobmFtZTogbG9jYXRpb25QYXRobmFtZSB9ID0gdXNlTG9jYXRpb24oKTsKICBsZXQgcm91dGVQYXRobmFtZXNKc29uID0gSlNPTi5zdHJpbmdpZnkoZ2V0UmVzb2x2ZVRvTWF0Y2hlcyhtYXRjaGVzKSk7CiAgbGV0IGFjdGl2ZVJlZiA9IFJlYWN0Mi51c2VSZWYoZmFsc2UpOwogIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoKCkgPT4gewogICAgYWN0aXZlUmVmLmN1cnJlbnQgPSB0cnVlOwogIH0pOwogIGxldCBuYXZpZ2F0ZSA9IFJlYWN0Mi51c2VDYWxsYmFjaygKICAgICh0bywgb3B0aW9ucyA9IHt9KSA9PiB7CiAgICAgIHdhcm5pbmcoYWN0aXZlUmVmLmN1cnJlbnQsIG5hdmlnYXRlRWZmZWN0V2FybmluZyk7CiAgICAgIGlmICghYWN0aXZlUmVmLmN1cnJlbnQpIHJldHVybjsKICAgICAgaWYgKHR5cGVvZiB0byA9PT0gIm51bWJlciIpIHsKICAgICAgICBuYXZpZ2F0b3IuZ28odG8pOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBsZXQgcGF0aCA9IHJlc29sdmVUbygKICAgICAgICB0bywKICAgICAgICBKU09OLnBhcnNlKHJvdXRlUGF0aG5hbWVzSnNvbiksCiAgICAgICAgbG9jYXRpb25QYXRobmFtZSwKICAgICAgICBvcHRpb25zLnJlbGF0aXZlID09PSAicGF0aCIKICAgICAgKTsKICAgICAgaWYgKGRhdGFSb3V0ZXJDb250ZXh0ID09IG51bGwgJiYgYmFzZW5hbWUgIT09ICIvIikgewogICAgICAgIHBhdGgucGF0aG5hbWUgPSBwYXRoLnBhdGhuYW1lID09PSAiLyIgPyBiYXNlbmFtZSA6IGpvaW5QYXRocyhbYmFzZW5hbWUsIHBhdGgucGF0aG5hbWVdKTsKICAgICAgfQogICAgICAoISFvcHRpb25zLnJlcGxhY2UgPyBuYXZpZ2F0b3IucmVwbGFjZSA6IG5hdmlnYXRvci5wdXNoKSgKICAgICAgICBwYXRoLAogICAgICAgIG9wdGlvbnMuc3RhdGUsCiAgICAgICAgb3B0aW9ucwogICAgICApOwogICAgfSwKICAgIFsKICAgICAgYmFzZW5hbWUsCiAgICAgIG5hdmlnYXRvciwKICAgICAgcm91dGVQYXRobmFtZXNKc29uLAogICAgICBsb2NhdGlvblBhdGhuYW1lLAogICAgICBkYXRhUm91dGVyQ29udGV4dAogICAgXQogICk7CiAgcmV0dXJuIG5hdmlnYXRlOwp9CnZhciBPdXRsZXRDb250ZXh0ID0gUmVhY3QyLmNyZWF0ZUNvbnRleHQobnVsbCk7CmZ1bmN0aW9uIHVzZU91dGxldENvbnRleHQoKSB7CiAgcmV0dXJuIFJlYWN0Mi51c2VDb250ZXh0KE91dGxldENvbnRleHQpOwp9CmZ1bmN0aW9uIHVzZU91dGxldChjb250ZXh0KSB7CiAgbGV0IG91dGxldCA9IFJlYWN0Mi51c2VDb250ZXh0KFJvdXRlQ29udGV4dCkub3V0bGV0OwogIGlmIChvdXRsZXQpIHsKICAgIHJldHVybiBSZWFjdDIuY3JlYXRlRWxlbWVudChPdXRsZXRDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBjb250ZXh0IH0sIG91dGxldCk7CiAgfQogIHJldHVybiBvdXRsZXQ7Cn0KZnVuY3Rpb24gdXNlUGFyYW1zKCkgewogIGxldCB7IG1hdGNoZXMgfSA9IFJlYWN0Mi51c2VDb250ZXh0KFJvdXRlQ29udGV4dCk7CiAgbGV0IHJvdXRlTWF0Y2ggPSBtYXRjaGVzW21hdGNoZXMubGVuZ3RoIC0gMV07CiAgcmV0dXJuIHJvdXRlTWF0Y2ggPyByb3V0ZU1hdGNoLnBhcmFtcyA6IHt9Owp9CmZ1bmN0aW9uIHVzZVJlc29sdmVkUGF0aCh0bywgeyByZWxhdGl2ZSB9ID0ge30pIHsKICBsZXQgeyBtYXRjaGVzIH0gPSBSZWFjdDIudXNlQ29udGV4dChSb3V0ZUNvbnRleHQpOwogIGxldCB7IHBhdGhuYW1lOiBsb2NhdGlvblBhdGhuYW1lIH0gPSB1c2VMb2NhdGlvbigpOwogIGxldCByb3V0ZVBhdGhuYW1lc0pzb24gPSBKU09OLnN0cmluZ2lmeShnZXRSZXNvbHZlVG9NYXRjaGVzKG1hdGNoZXMpKTsKICByZXR1cm4gUmVhY3QyLnVzZU1lbW8oCiAgICAoKSA9PiByZXNvbHZlVG8oCiAgICAgIHRvLAogICAgICBKU09OLnBhcnNlKHJvdXRlUGF0aG5hbWVzSnNvbiksCiAgICAgIGxvY2F0aW9uUGF0aG5hbWUsCiAgICAgIHJlbGF0aXZlID09PSAicGF0aCIKICAgICksCiAgICBbdG8sIHJvdXRlUGF0aG5hbWVzSnNvbiwgbG9jYXRpb25QYXRobmFtZSwgcmVsYXRpdmVdCiAgKTsKfQpmdW5jdGlvbiB1c2VSb3V0ZXMocm91dGVzLCBsb2NhdGlvbkFyZykgewogIHJldHVybiB1c2VSb3V0ZXNJbXBsKHJvdXRlcywgbG9jYXRpb25BcmcpOwp9CmZ1bmN0aW9uIHVzZVJvdXRlc0ltcGwocm91dGVzLCBsb2NhdGlvbkFyZywgZGF0YVJvdXRlclN0YXRlLCB1bnN0YWJsZV9vbkVycm9yLCBmdXR1cmUpIHsKICB2YXIgX2E7CiAgaW52YXJpYW50KAogICAgdXNlSW5Sb3V0ZXJDb250ZXh0KCksCiAgICAvLyBUT0RPOiBUaGlzIGVycm9yIGlzIHByb2JhYmx5IGJlY2F1c2UgdGhleSBzb21laG93IGhhdmUgMiB2ZXJzaW9ucyBvZiB0aGUKICAgIC8vIHJvdXRlciBsb2FkZWQuIFdlIGNhbiBoZWxwIHRoZW0gdW5kZXJzdGFuZCBob3cgdG8gYXZvaWQgdGhhdC4KICAgIGB1c2VSb3V0ZXMoKSBtYXkgYmUgdXNlZCBvbmx5IGluIHRoZSBjb250ZXh0IG9mIGEgPFJvdXRlcj4gY29tcG9uZW50LmAKICApOwogIGxldCB7IG5hdmlnYXRvciB9ID0gUmVhY3QyLnVzZUNvbnRleHQoTmF2aWdhdGlvbkNvbnRleHQpOwogIGxldCB7IG1hdGNoZXM6IHBhcmVudE1hdGNoZXMgfSA9IFJlYWN0Mi51c2VDb250ZXh0KFJvdXRlQ29udGV4dCk7CiAgbGV0IHJvdXRlTWF0Y2ggPSBwYXJlbnRNYXRjaGVzW3BhcmVudE1hdGNoZXMubGVuZ3RoIC0gMV07CiAgbGV0IHBhcmVudFBhcmFtcyA9IHJvdXRlTWF0Y2ggPyByb3V0ZU1hdGNoLnBhcmFtcyA6IHt9OwogIGxldCBwYXJlbnRQYXRobmFtZSA9IHJvdXRlTWF0Y2ggPyByb3V0ZU1hdGNoLnBhdGhuYW1lIDogIi8iOwogIGxldCBwYXJlbnRQYXRobmFtZUJhc2UgPSByb3V0ZU1hdGNoID8gcm91dGVNYXRjaC5wYXRobmFtZUJhc2UgOiAiLyI7CiAgbGV0IHBhcmVudFJvdXRlID0gcm91dGVNYXRjaCAmJiByb3V0ZU1hdGNoLnJvdXRlOwogIGlmIChFTkFCTEVfREVWX1dBUk5JTkdTKSB7CiAgICBsZXQgcGFyZW50UGF0aCA9IHBhcmVudFJvdXRlICYmIHBhcmVudFJvdXRlLnBhdGggfHwgIiI7CiAgICB3YXJuaW5nT25jZSgKICAgICAgcGFyZW50UGF0aG5hbWUsCiAgICAgICFwYXJlbnRSb3V0ZSB8fCBwYXJlbnRQYXRoLmVuZHNXaXRoKCIqIikgfHwgcGFyZW50UGF0aC5lbmRzV2l0aCgiKj8iKSwKICAgICAgYFlvdSByZW5kZXJlZCBkZXNjZW5kYW50IDxSb3V0ZXM+IChvciBjYWxsZWQgXGB1c2VSb3V0ZXMoKVxgKSBhdCAiJHtwYXJlbnRQYXRobmFtZX0iICh1bmRlciA8Um91dGUgcGF0aD0iJHtwYXJlbnRQYXRofSI+KSBidXQgdGhlIHBhcmVudCByb3V0ZSBwYXRoIGhhcyBubyB0cmFpbGluZyAiKiIuIFRoaXMgbWVhbnMgaWYgeW91IG5hdmlnYXRlIGRlZXBlciwgdGhlIHBhcmVudCB3b24ndCBtYXRjaCBhbnltb3JlIGFuZCB0aGVyZWZvcmUgdGhlIGNoaWxkIHJvdXRlcyB3aWxsIG5ldmVyIHJlbmRlci4KClBsZWFzZSBjaGFuZ2UgdGhlIHBhcmVudCA8Um91dGUgcGF0aD0iJHtwYXJlbnRQYXRofSI+IHRvIDxSb3V0ZSBwYXRoPSIke3BhcmVudFBhdGggPT09ICIvIiA/ICIqIiA6IGAke3BhcmVudFBhdGh9LypgfSI+LmAKICAgICk7CiAgfQogIGxldCBsb2NhdGlvbkZyb21Db250ZXh0ID0gdXNlTG9jYXRpb24oKTsKICBsZXQgbG9jYXRpb24yOwogIGlmIChsb2NhdGlvbkFyZykgewogICAgbGV0IHBhcnNlZExvY2F0aW9uQXJnID0gdHlwZW9mIGxvY2F0aW9uQXJnID09PSAic3RyaW5nIiA/IHBhcnNlUGF0aChsb2NhdGlvbkFyZykgOiBsb2NhdGlvbkFyZzsKICAgIGludmFyaWFudCgKICAgICAgcGFyZW50UGF0aG5hbWVCYXNlID09PSAiLyIgfHwgKChfYSA9IHBhcnNlZExvY2F0aW9uQXJnLnBhdGhuYW1lKSA9PSBudWxsID8gdm9pZCAwIDogX2Euc3RhcnRzV2l0aChwYXJlbnRQYXRobmFtZUJhc2UpKSwKICAgICAgYFdoZW4gb3ZlcnJpZGluZyB0aGUgbG9jYXRpb24gdXNpbmcgXGA8Um91dGVzIGxvY2F0aW9uPlxgIG9yIFxgdXNlUm91dGVzKHJvdXRlcywgbG9jYXRpb24pXGAsIHRoZSBsb2NhdGlvbiBwYXRobmFtZSBtdXN0IGJlZ2luIHdpdGggdGhlIHBvcnRpb24gb2YgdGhlIFVSTCBwYXRobmFtZSB0aGF0IHdhcyBtYXRjaGVkIGJ5IGFsbCBwYXJlbnQgcm91dGVzLiBUaGUgY3VycmVudCBwYXRobmFtZSBiYXNlIGlzICIke3BhcmVudFBhdGhuYW1lQmFzZX0iIGJ1dCBwYXRobmFtZSAiJHtwYXJzZWRMb2NhdGlvbkFyZy5wYXRobmFtZX0iIHdhcyBnaXZlbiBpbiB0aGUgXGBsb2NhdGlvblxgIHByb3AuYAogICAgKTsKICAgIGxvY2F0aW9uMiA9IHBhcnNlZExvY2F0aW9uQXJnOwogIH0gZWxzZSB7CiAgICBsb2NhdGlvbjIgPSBsb2NhdGlvbkZyb21Db250ZXh0OwogIH0KICBsZXQgcGF0aG5hbWUgPSBsb2NhdGlvbjIucGF0aG5hbWUgfHwgIi8iOwogIGxldCByZW1haW5pbmdQYXRobmFtZSA9IHBhdGhuYW1lOwogIGlmIChwYXJlbnRQYXRobmFtZUJhc2UgIT09ICIvIikgewogICAgbGV0IHBhcmVudFNlZ21lbnRzID0gcGFyZW50UGF0aG5hbWVCYXNlLnJlcGxhY2UoL15cLy8sICIiKS5zcGxpdCgiLyIpOwogICAgbGV0IHNlZ21lbnRzID0gcGF0aG5hbWUucmVwbGFjZSgvXlwvLywgIiIpLnNwbGl0KCIvIik7CiAgICByZW1haW5pbmdQYXRobmFtZSA9ICIvIiArIHNlZ21lbnRzLnNsaWNlKHBhcmVudFNlZ21lbnRzLmxlbmd0aCkuam9pbigiLyIpOwogIH0KICBsZXQgbWF0Y2hlcyA9IG1hdGNoUm91dGVzKHJvdXRlcywgeyBwYXRobmFtZTogcmVtYWluaW5nUGF0aG5hbWUgfSk7CiAgaWYgKEVOQUJMRV9ERVZfV0FSTklOR1MpIHsKICAgIHdhcm5pbmcoCiAgICAgIHBhcmVudFJvdXRlIHx8IG1hdGNoZXMgIT0gbnVsbCwKICAgICAgYE5vIHJvdXRlcyBtYXRjaGVkIGxvY2F0aW9uICIke2xvY2F0aW9uMi5wYXRobmFtZX0ke2xvY2F0aW9uMi5zZWFyY2h9JHtsb2NhdGlvbjIuaGFzaH0iIGAKICAgICk7CiAgICB3YXJuaW5nKAogICAgICBtYXRjaGVzID09IG51bGwgfHwgbWF0Y2hlc1ttYXRjaGVzLmxlbmd0aCAtIDFdLnJvdXRlLmVsZW1lbnQgIT09IHZvaWQgMCB8fCBtYXRjaGVzW21hdGNoZXMubGVuZ3RoIC0gMV0ucm91dGUuQ29tcG9uZW50ICE9PSB2b2lkIDAgfHwgbWF0Y2hlc1ttYXRjaGVzLmxlbmd0aCAtIDFdLnJvdXRlLmxhenkgIT09IHZvaWQgMCwKICAgICAgYE1hdGNoZWQgbGVhZiByb3V0ZSBhdCBsb2NhdGlvbiAiJHtsb2NhdGlvbjIucGF0aG5hbWV9JHtsb2NhdGlvbjIuc2VhcmNofSR7bG9jYXRpb24yLmhhc2h9IiBkb2VzIG5vdCBoYXZlIGFuIGVsZW1lbnQgb3IgQ29tcG9uZW50LiBUaGlzIG1lYW5zIGl0IHdpbGwgcmVuZGVyIGFuIDxPdXRsZXQgLz4gd2l0aCBhIG51bGwgdmFsdWUgYnkgZGVmYXVsdCByZXN1bHRpbmcgaW4gYW4gImVtcHR5IiBwYWdlLmAKICAgICk7CiAgfQogIGxldCByZW5kZXJlZE1hdGNoZXMgPSBfcmVuZGVyTWF0Y2hlcygKICAgIG1hdGNoZXMgJiYgbWF0Y2hlcy5tYXAoCiAgICAgIChtYXRjaCkgPT4gT2JqZWN0LmFzc2lnbih7fSwgbWF0Y2gsIHsKICAgICAgICBwYXJhbXM6IE9iamVjdC5hc3NpZ24oe30sIHBhcmVudFBhcmFtcywgbWF0Y2gucGFyYW1zKSwKICAgICAgICBwYXRobmFtZTogam9pblBhdGhzKFsKICAgICAgICAgIHBhcmVudFBhdGhuYW1lQmFzZSwKICAgICAgICAgIC8vIFJlLWVuY29kZSBwYXRobmFtZXMgdGhhdCB3ZXJlIGRlY29kZWQgaW5zaWRlIG1hdGNoUm91dGVzCiAgICAgICAgICBuYXZpZ2F0b3IuZW5jb2RlTG9jYXRpb24gPyBuYXZpZ2F0b3IuZW5jb2RlTG9jYXRpb24obWF0Y2gucGF0aG5hbWUpLnBhdGhuYW1lIDogbWF0Y2gucGF0aG5hbWUKICAgICAgICBdKSwKICAgICAgICBwYXRobmFtZUJhc2U6IG1hdGNoLnBhdGhuYW1lQmFzZSA9PT0gIi8iID8gcGFyZW50UGF0aG5hbWVCYXNlIDogam9pblBhdGhzKFsKICAgICAgICAgIHBhcmVudFBhdGhuYW1lQmFzZSwKICAgICAgICAgIC8vIFJlLWVuY29kZSBwYXRobmFtZXMgdGhhdCB3ZXJlIGRlY29kZWQgaW5zaWRlIG1hdGNoUm91dGVzCiAgICAgICAgICBuYXZpZ2F0b3IuZW5jb2RlTG9jYXRpb24gPyBuYXZpZ2F0b3IuZW5jb2RlTG9jYXRpb24obWF0Y2gucGF0aG5hbWVCYXNlKS5wYXRobmFtZSA6IG1hdGNoLnBhdGhuYW1lQmFzZQogICAgICAgIF0pCiAgICAgIH0pCiAgICApLAogICAgcGFyZW50TWF0Y2hlcywKICAgIGRhdGFSb3V0ZXJTdGF0ZSwKICAgIHVuc3RhYmxlX29uRXJyb3IsCiAgICBmdXR1cmUKICApOwogIGlmIChsb2NhdGlvbkFyZyAmJiByZW5kZXJlZE1hdGNoZXMpIHsKICAgIHJldHVybiBSZWFjdDIuY3JlYXRlRWxlbWVudCgKICAgICAgTG9jYXRpb25Db250ZXh0LlByb3ZpZGVyLAogICAgICB7CiAgICAgICAgdmFsdWU6IHsKICAgICAgICAgIGxvY2F0aW9uOiB7CiAgICAgICAgICAgIHBhdGhuYW1lOiAiLyIsCiAgICAgICAgICAgIHNlYXJjaDogIiIsCiAgICAgICAgICAgIGhhc2g6ICIiLAogICAgICAgICAgICBzdGF0ZTogbnVsbCwKICAgICAgICAgICAga2V5OiAiZGVmYXVsdCIsCiAgICAgICAgICAgIC4uLmxvY2F0aW9uMgogICAgICAgICAgfSwKICAgICAgICAgIG5hdmlnYXRpb25UeXBlOiAiUE9QIgogICAgICAgICAgLyogUG9wICovCiAgICAgICAgfQogICAgICB9LAogICAgICByZW5kZXJlZE1hdGNoZXMKICAgICk7CiAgfQogIHJldHVybiByZW5kZXJlZE1hdGNoZXM7Cn0KZnVuY3Rpb24gRGVmYXVsdEVycm9yQ29tcG9uZW50KCkgewogIGxldCBlcnJvciA9IHVzZVJvdXRlRXJyb3IoKTsKICBsZXQgbWVzc2FnZSA9IGlzUm91dGVFcnJvclJlc3BvbnNlKGVycm9yKSA/IGAke2Vycm9yLnN0YXR1c30gJHtlcnJvci5zdGF0dXNUZXh0fWAgOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IEpTT04uc3RyaW5naWZ5KGVycm9yKTsKICBsZXQgc3RhY2sgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiBudWxsOwogIGxldCBsaWdodGdyZXkgPSAicmdiYSgyMDAsMjAwLDIwMCwgMC41KSI7CiAgbGV0IHByZVN0eWxlcyA9IHsgcGFkZGluZzogIjAuNXJlbSIsIGJhY2tncm91bmRDb2xvcjogbGlnaHRncmV5IH07CiAgbGV0IGNvZGVTdHlsZXMgPSB7IHBhZGRpbmc6ICIycHggNHB4IiwgYmFja2dyb3VuZENvbG9yOiBsaWdodGdyZXkgfTsKICBsZXQgZGV2SW5mbyA9IG51bGw7CiAgaWYgKEVOQUJMRV9ERVZfV0FSTklOR1MpIHsKICAgIGNvbnNvbGUuZXJyb3IoCiAgICAgICJFcnJvciBoYW5kbGVkIGJ5IFJlYWN0IFJvdXRlciBkZWZhdWx0IEVycm9yQm91bmRhcnk6IiwKICAgICAgZXJyb3IKICAgICk7CiAgICBkZXZJbmZvID0gUmVhY3QyLmNyZWF0ZUVsZW1lbnQoUmVhY3QyLkZyYWdtZW50LCBudWxsLCBSZWFjdDIuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsICLwn5K/IEhleSBkZXZlbG9wZXIg8J+RiyIpLCBSZWFjdDIuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsICJZb3UgY2FuIHByb3ZpZGUgYSB3YXkgYmV0dGVyIFVYIHRoYW4gdGhpcyB3aGVuIHlvdXIgYXBwIHRocm93cyBlcnJvcnMgYnkgcHJvdmlkaW5nIHlvdXIgb3duICIsIFJlYWN0Mi5jcmVhdGVFbGVtZW50KCJjb2RlIiwgeyBzdHlsZTogY29kZVN0eWxlcyB9LCAiRXJyb3JCb3VuZGFyeSIpLCAiIG9yIiwgIiAiLCBSZWFjdDIuY3JlYXRlRWxlbWVudCgiY29kZSIsIHsgc3R5bGU6IGNvZGVTdHlsZXMgfSwgImVycm9yRWxlbWVudCIpLCAiIHByb3Agb24geW91ciByb3V0ZS4iKSk7CiAgfQogIHJldHVybiBSZWFjdDIuY3JlYXRlRWxlbWVudChSZWFjdDIuRnJhZ21lbnQsIG51bGwsIFJlYWN0Mi5jcmVhdGVFbGVtZW50KCJoMiIsIG51bGwsICJVbmV4cGVjdGVkIEFwcGxpY2F0aW9uIEVycm9yISIpLCBSZWFjdDIuY3JlYXRlRWxlbWVudCgiaDMiLCB7IHN0eWxlOiB7IGZvbnRTdHlsZTogIml0YWxpYyIgfSB9LCBtZXNzYWdlKSwgc3RhY2sgPyBSZWFjdDIuY3JlYXRlRWxlbWVudCgicHJlIiwgeyBzdHlsZTogcHJlU3R5bGVzIH0sIHN0YWNrKSA6IG51bGwsIGRldkluZm8pOwp9CnZhciBkZWZhdWx0RXJyb3JFbGVtZW50ID0gUmVhY3QyLmNyZWF0ZUVsZW1lbnQoRGVmYXVsdEVycm9yQ29tcG9uZW50LCBudWxsKTsKdmFyIFJlbmRlckVycm9yQm91bmRhcnkgPSBjbGFzcyBleHRlbmRzIFJlYWN0Mi5Db21wb25lbnQgewogIGNvbnN0cnVjdG9yKHByb3BzKSB7CiAgICBzdXBlcihwcm9wcyk7CiAgICB0aGlzLnN0YXRlID0gewogICAgICBsb2NhdGlvbjogcHJvcHMubG9jYXRpb24sCiAgICAgIHJldmFsaWRhdGlvbjogcHJvcHMucmV2YWxpZGF0aW9uLAogICAgICBlcnJvcjogcHJvcHMuZXJyb3IKICAgIH07CiAgfQogIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IoZXJyb3IpIHsKICAgIHJldHVybiB7IGVycm9yIH07CiAgfQogIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMocHJvcHMsIHN0YXRlKSB7CiAgICBpZiAoc3RhdGUubG9jYXRpb24gIT09IHByb3BzLmxvY2F0aW9uIHx8IHN0YXRlLnJldmFsaWRhdGlvbiAhPT0gImlkbGUiICYmIHByb3BzLnJldmFsaWRhdGlvbiA9PT0gImlkbGUiKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgZXJyb3I6IHByb3BzLmVycm9yLAogICAgICAgIGxvY2F0aW9uOiBwcm9wcy5sb2NhdGlvbiwKICAgICAgICByZXZhbGlkYXRpb246IHByb3BzLnJldmFsaWRhdGlvbgogICAgICB9OwogICAgfQogICAgcmV0dXJuIHsKICAgICAgZXJyb3I6IHByb3BzLmVycm9yICE9PSB2b2lkIDAgPyBwcm9wcy5lcnJvciA6IHN0YXRlLmVycm9yLAogICAgICBsb2NhdGlvbjogc3RhdGUubG9jYXRpb24sCiAgICAgIHJldmFsaWRhdGlvbjogcHJvcHMucmV2YWxpZGF0aW9uIHx8IHN0YXRlLnJldmFsaWRhdGlvbgogICAgfTsKICB9CiAgY29tcG9uZW50RGlkQ2F0Y2goZXJyb3IsIGVycm9ySW5mbykgewogICAgaWYgKHRoaXMucHJvcHMudW5zdGFibGVfb25FcnJvcikgewogICAgICB0aGlzLnByb3BzLnVuc3RhYmxlX29uRXJyb3IoZXJyb3IsIGVycm9ySW5mbyk7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLmVycm9yKAogICAgICAgICJSZWFjdCBSb3V0ZXIgY2F1Z2h0IHRoZSBmb2xsb3dpbmcgZXJyb3IgZHVyaW5nIHJlbmRlciIsCiAgICAgICAgZXJyb3IKICAgICAgKTsKICAgIH0KICB9CiAgcmVuZGVyKCkgewogICAgcmV0dXJuIHRoaXMuc3RhdGUuZXJyb3IgIT09IHZvaWQgMCA/IFJlYWN0Mi5jcmVhdGVFbGVtZW50KFJvdXRlQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogdGhpcy5wcm9wcy5yb3V0ZUNvbnRleHQgfSwgUmVhY3QyLmNyZWF0ZUVsZW1lbnQoCiAgICAgIFJvdXRlRXJyb3JDb250ZXh0LlByb3ZpZGVyLAogICAgICB7CiAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUuZXJyb3IsCiAgICAgICAgY2hpbGRyZW46IHRoaXMucHJvcHMuY29tcG9uZW50CiAgICAgIH0KICAgICkpIDogdGhpcy5wcm9wcy5jaGlsZHJlbjsKICB9Cn07CmZ1bmN0aW9uIFJlbmRlcmVkUm91dGUoeyByb3V0ZUNvbnRleHQsIG1hdGNoLCBjaGlsZHJlbiB9KSB7CiAgbGV0IGRhdGFSb3V0ZXJDb250ZXh0ID0gUmVhY3QyLnVzZUNvbnRleHQoRGF0YVJvdXRlckNvbnRleHQpOwogIGlmIChkYXRhUm91dGVyQ29udGV4dCAmJiBkYXRhUm91dGVyQ29udGV4dC5zdGF0aWMgJiYgZGF0YVJvdXRlckNvbnRleHQuc3RhdGljQ29udGV4dCAmJiAobWF0Y2gucm91dGUuZXJyb3JFbGVtZW50IHx8IG1hdGNoLnJvdXRlLkVycm9yQm91bmRhcnkpKSB7CiAgICBkYXRhUm91dGVyQ29udGV4dC5zdGF0aWNDb250ZXh0Ll9kZWVwZXN0UmVuZGVyZWRCb3VuZGFyeUlkID0gbWF0Y2gucm91dGUuaWQ7CiAgfQogIHJldHVybiBSZWFjdDIuY3JlYXRlRWxlbWVudChSb3V0ZUNvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IHJvdXRlQ29udGV4dCB9LCBjaGlsZHJlbik7Cn0KZnVuY3Rpb24gX3JlbmRlck1hdGNoZXMobWF0Y2hlcywgcGFyZW50TWF0Y2hlcyA9IFtdLCBkYXRhUm91dGVyU3RhdGUgPSBudWxsLCB1bnN0YWJsZV9vbkVycm9yID0gbnVsbCwgZnV0dXJlID0gbnVsbCkgewogIGlmIChtYXRjaGVzID09IG51bGwpIHsKICAgIGlmICghZGF0YVJvdXRlclN0YXRlKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgaWYgKGRhdGFSb3V0ZXJTdGF0ZS5lcnJvcnMpIHsKICAgICAgbWF0Y2hlcyA9IGRhdGFSb3V0ZXJTdGF0ZS5tYXRjaGVzOwogICAgfSBlbHNlIGlmIChwYXJlbnRNYXRjaGVzLmxlbmd0aCA9PT0gMCAmJiAhZGF0YVJvdXRlclN0YXRlLmluaXRpYWxpemVkICYmIGRhdGFSb3V0ZXJTdGF0ZS5tYXRjaGVzLmxlbmd0aCA+IDApIHsKICAgICAgbWF0Y2hlcyA9IGRhdGFSb3V0ZXJTdGF0ZS5tYXRjaGVzOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfQogIGxldCByZW5kZXJlZE1hdGNoZXMgPSBtYXRjaGVzOwogIGxldCBlcnJvcnMgPSBkYXRhUm91dGVyU3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IGRhdGFSb3V0ZXJTdGF0ZS5lcnJvcnM7CiAgaWYgKGVycm9ycyAhPSBudWxsKSB7CiAgICBsZXQgZXJyb3JJbmRleCA9IHJlbmRlcmVkTWF0Y2hlcy5maW5kSW5kZXgoCiAgICAgIChtKSA9PiBtLnJvdXRlLmlkICYmIChlcnJvcnMgPT0gbnVsbCA/IHZvaWQgMCA6IGVycm9yc1ttLnJvdXRlLmlkXSkgIT09IHZvaWQgMAogICAgKTsKICAgIGludmFyaWFudCgKICAgICAgZXJyb3JJbmRleCA+PSAwLAogICAgICBgQ291bGQgbm90IGZpbmQgYSBtYXRjaGluZyByb3V0ZSBmb3IgZXJyb3JzIG9uIHJvdXRlIElEczogJHtPYmplY3Qua2V5cygKICAgICAgICBlcnJvcnMKICAgICAgKS5qb2luKCIsIil9YAogICAgKTsKICAgIHJlbmRlcmVkTWF0Y2hlcyA9IHJlbmRlcmVkTWF0Y2hlcy5zbGljZSgKICAgICAgMCwKICAgICAgTWF0aC5taW4ocmVuZGVyZWRNYXRjaGVzLmxlbmd0aCwgZXJyb3JJbmRleCArIDEpCiAgICApOwogIH0KICBsZXQgcmVuZGVyRmFsbGJhY2sgPSBmYWxzZTsKICBsZXQgZmFsbGJhY2tJbmRleCA9IC0xOwogIGlmIChkYXRhUm91dGVyU3RhdGUpIHsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVuZGVyZWRNYXRjaGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGxldCBtYXRjaCA9IHJlbmRlcmVkTWF0Y2hlc1tpXTsKICAgICAgaWYgKG1hdGNoLnJvdXRlLkh5ZHJhdGVGYWxsYmFjayB8fCBtYXRjaC5yb3V0ZS5oeWRyYXRlRmFsbGJhY2tFbGVtZW50KSB7CiAgICAgICAgZmFsbGJhY2tJbmRleCA9IGk7CiAgICAgIH0KICAgICAgaWYgKG1hdGNoLnJvdXRlLmlkKSB7CiAgICAgICAgbGV0IHsgbG9hZGVyRGF0YSwgZXJyb3JzOiBlcnJvcnMyIH0gPSBkYXRhUm91dGVyU3RhdGU7CiAgICAgICAgbGV0IG5lZWRzVG9SdW5Mb2FkZXIgPSBtYXRjaC5yb3V0ZS5sb2FkZXIgJiYgIWxvYWRlckRhdGEuaGFzT3duUHJvcGVydHkobWF0Y2gucm91dGUuaWQpICYmICghZXJyb3JzMiB8fCBlcnJvcnMyW21hdGNoLnJvdXRlLmlkXSA9PT0gdm9pZCAwKTsKICAgICAgICBpZiAobWF0Y2gucm91dGUubGF6eSB8fCBuZWVkc1RvUnVuTG9hZGVyKSB7CiAgICAgICAgICByZW5kZXJGYWxsYmFjayA9IHRydWU7CiAgICAgICAgICBpZiAoZmFsbGJhY2tJbmRleCA+PSAwKSB7CiAgICAgICAgICAgIHJlbmRlcmVkTWF0Y2hlcyA9IHJlbmRlcmVkTWF0Y2hlcy5zbGljZSgwLCBmYWxsYmFja0luZGV4ICsgMSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZW5kZXJlZE1hdGNoZXMgPSBbcmVuZGVyZWRNYXRjaGVzWzBdXTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KICByZXR1cm4gcmVuZGVyZWRNYXRjaGVzLnJlZHVjZVJpZ2h0KAogICAgKG91dGxldCwgbWF0Y2gsIGluZGV4KSA9PiB7CiAgICAgIGxldCBlcnJvcjsKICAgICAgbGV0IHNob3VsZFJlbmRlckh5ZHJhdGVGYWxsYmFjayA9IGZhbHNlOwogICAgICBsZXQgZXJyb3JFbGVtZW50ID0gbnVsbDsKICAgICAgbGV0IGh5ZHJhdGVGYWxsYmFja0VsZW1lbnQgPSBudWxsOwogICAgICBpZiAoZGF0YVJvdXRlclN0YXRlKSB7CiAgICAgICAgZXJyb3IgPSBlcnJvcnMgJiYgbWF0Y2gucm91dGUuaWQgPyBlcnJvcnNbbWF0Y2gucm91dGUuaWRdIDogdm9pZCAwOwogICAgICAgIGVycm9yRWxlbWVudCA9IG1hdGNoLnJvdXRlLmVycm9yRWxlbWVudCB8fCBkZWZhdWx0RXJyb3JFbGVtZW50OwogICAgICAgIGlmIChyZW5kZXJGYWxsYmFjaykgewogICAgICAgICAgaWYgKGZhbGxiYWNrSW5kZXggPCAwICYmIGluZGV4ID09PSAwKSB7CiAgICAgICAgICAgIHdhcm5pbmdPbmNlKAogICAgICAgICAgICAgICJyb3V0ZS1mYWxsYmFjayIsCiAgICAgICAgICAgICAgZmFsc2UsCiAgICAgICAgICAgICAgIk5vIGBIeWRyYXRlRmFsbGJhY2tgIGVsZW1lbnQgcHJvdmlkZWQgdG8gcmVuZGVyIGR1cmluZyBpbml0aWFsIGh5ZHJhdGlvbiIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgc2hvdWxkUmVuZGVySHlkcmF0ZUZhbGxiYWNrID0gdHJ1ZTsKICAgICAgICAgICAgaHlkcmF0ZUZhbGxiYWNrRWxlbWVudCA9IG51bGw7CiAgICAgICAgICB9IGVsc2UgaWYgKGZhbGxiYWNrSW5kZXggPT09IGluZGV4KSB7CiAgICAgICAgICAgIHNob3VsZFJlbmRlckh5ZHJhdGVGYWxsYmFjayA9IHRydWU7CiAgICAgICAgICAgIGh5ZHJhdGVGYWxsYmFja0VsZW1lbnQgPSBtYXRjaC5yb3V0ZS5oeWRyYXRlRmFsbGJhY2tFbGVtZW50IHx8IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIGxldCBtYXRjaGVzMiA9IHBhcmVudE1hdGNoZXMuY29uY2F0KHJlbmRlcmVkTWF0Y2hlcy5zbGljZSgwLCBpbmRleCArIDEpKTsKICAgICAgbGV0IGdldENoaWxkcmVuID0gKCkgPT4gewogICAgICAgIGxldCBjaGlsZHJlbjsKICAgICAgICBpZiAoZXJyb3IpIHsKICAgICAgICAgIGNoaWxkcmVuID0gZXJyb3JFbGVtZW50OwogICAgICAgIH0gZWxzZSBpZiAoc2hvdWxkUmVuZGVySHlkcmF0ZUZhbGxiYWNrKSB7CiAgICAgICAgICBjaGlsZHJlbiA9IGh5ZHJhdGVGYWxsYmFja0VsZW1lbnQ7CiAgICAgICAgfSBlbHNlIGlmIChtYXRjaC5yb3V0ZS5Db21wb25lbnQpIHsKICAgICAgICAgIGNoaWxkcmVuID0gUmVhY3QyLmNyZWF0ZUVsZW1lbnQobWF0Y2gucm91dGUuQ29tcG9uZW50LCBudWxsKTsKICAgICAgICB9IGVsc2UgaWYgKG1hdGNoLnJvdXRlLmVsZW1lbnQpIHsKICAgICAgICAgIGNoaWxkcmVuID0gbWF0Y2gucm91dGUuZWxlbWVudDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2hpbGRyZW4gPSBvdXRsZXQ7CiAgICAgICAgfQogICAgICAgIHJldHVybiBSZWFjdDIuY3JlYXRlRWxlbWVudCgKICAgICAgICAgIFJlbmRlcmVkUm91dGUsCiAgICAgICAgICB7CiAgICAgICAgICAgIG1hdGNoLAogICAgICAgICAgICByb3V0ZUNvbnRleHQ6IHsKICAgICAgICAgICAgICBvdXRsZXQsCiAgICAgICAgICAgICAgbWF0Y2hlczogbWF0Y2hlczIsCiAgICAgICAgICAgICAgaXNEYXRhUm91dGU6IGRhdGFSb3V0ZXJTdGF0ZSAhPSBudWxsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNoaWxkcmVuCiAgICAgICAgICB9CiAgICAgICAgKTsKICAgICAgfTsKICAgICAgcmV0dXJuIGRhdGFSb3V0ZXJTdGF0ZSAmJiAobWF0Y2gucm91dGUuRXJyb3JCb3VuZGFyeSB8fCBtYXRjaC5yb3V0ZS5lcnJvckVsZW1lbnQgfHwgaW5kZXggPT09IDApID8gUmVhY3QyLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgUmVuZGVyRXJyb3JCb3VuZGFyeSwKICAgICAgICB7CiAgICAgICAgICBsb2NhdGlvbjogZGF0YVJvdXRlclN0YXRlLmxvY2F0aW9uLAogICAgICAgICAgcmV2YWxpZGF0aW9uOiBkYXRhUm91dGVyU3RhdGUucmV2YWxpZGF0aW9uLAogICAgICAgICAgY29tcG9uZW50OiBlcnJvckVsZW1lbnQsCiAgICAgICAgICBlcnJvciwKICAgICAgICAgIGNoaWxkcmVuOiBnZXRDaGlsZHJlbigpLAogICAgICAgICAgcm91dGVDb250ZXh0OiB7IG91dGxldDogbnVsbCwgbWF0Y2hlczogbWF0Y2hlczIsIGlzRGF0YVJvdXRlOiB0cnVlIH0sCiAgICAgICAgICB1bnN0YWJsZV9vbkVycm9yCiAgICAgICAgfQogICAgICApIDogZ2V0Q2hpbGRyZW4oKTsKICAgIH0sCiAgICBudWxsCiAgKTsKfQpmdW5jdGlvbiBnZXREYXRhUm91dGVyQ29uc29sZUVycm9yKGhvb2tOYW1lKSB7CiAgcmV0dXJuIGAke2hvb2tOYW1lfSBtdXN0IGJlIHVzZWQgd2l0aGluIGEgZGF0YSByb3V0ZXIuICBTZWUgaHR0cHM6Ly9yZWFjdHJvdXRlci5jb20vZW4vbWFpbi9yb3V0ZXJzL3BpY2tpbmctYS1yb3V0ZXIuYDsKfQpmdW5jdGlvbiB1c2VEYXRhUm91dGVyQ29udGV4dChob29rTmFtZSkgewogIGxldCBjdHggPSBSZWFjdDIudXNlQ29udGV4dChEYXRhUm91dGVyQ29udGV4dCk7CiAgaW52YXJpYW50KGN0eCwgZ2V0RGF0YVJvdXRlckNvbnNvbGVFcnJvcihob29rTmFtZSkpOwogIHJldHVybiBjdHg7Cn0KZnVuY3Rpb24gdXNlRGF0YVJvdXRlclN0YXRlKGhvb2tOYW1lKSB7CiAgbGV0IHN0YXRlID0gUmVhY3QyLnVzZUNvbnRleHQoRGF0YVJvdXRlclN0YXRlQ29udGV4dCk7CiAgaW52YXJpYW50KHN0YXRlLCBnZXREYXRhUm91dGVyQ29uc29sZUVycm9yKGhvb2tOYW1lKSk7CiAgcmV0dXJuIHN0YXRlOwp9CmZ1bmN0aW9uIHVzZVJvdXRlQ29udGV4dChob29rTmFtZSkgewogIGxldCByb3V0ZSA9IFJlYWN0Mi51c2VDb250ZXh0KFJvdXRlQ29udGV4dCk7CiAgaW52YXJpYW50KHJvdXRlLCBnZXREYXRhUm91dGVyQ29uc29sZUVycm9yKGhvb2tOYW1lKSk7CiAgcmV0dXJuIHJvdXRlOwp9CmZ1bmN0aW9uIHVzZUN1cnJlbnRSb3V0ZUlkKGhvb2tOYW1lKSB7CiAgbGV0IHJvdXRlID0gdXNlUm91dGVDb250ZXh0KGhvb2tOYW1lKTsKICBsZXQgdGhpc1JvdXRlID0gcm91dGUubWF0Y2hlc1tyb3V0ZS5tYXRjaGVzLmxlbmd0aCAtIDFdOwogIGludmFyaWFudCgKICAgIHRoaXNSb3V0ZS5yb3V0ZS5pZCwKICAgIGAke2hvb2tOYW1lfSBjYW4gb25seSBiZSB1c2VkIG9uIHJvdXRlcyB0aGF0IGNvbnRhaW4gYSB1bmlxdWUgImlkImAKICApOwogIHJldHVybiB0aGlzUm91dGUucm91dGUuaWQ7Cn0KZnVuY3Rpb24gdXNlUm91dGVJZCgpIHsKICByZXR1cm4gdXNlQ3VycmVudFJvdXRlSWQoCiAgICAidXNlUm91dGVJZCIKICAgIC8qIFVzZVJvdXRlSWQgKi8KICApOwp9CmZ1bmN0aW9uIHVzZU5hdmlnYXRpb24oKSB7CiAgbGV0IHN0YXRlID0gdXNlRGF0YVJvdXRlclN0YXRlKAogICAgInVzZU5hdmlnYXRpb24iCiAgICAvKiBVc2VOYXZpZ2F0aW9uICovCiAgKTsKICByZXR1cm4gc3RhdGUubmF2aWdhdGlvbjsKfQpmdW5jdGlvbiB1c2VSZXZhbGlkYXRvcigpIHsKICBsZXQgZGF0YVJvdXRlckNvbnRleHQgPSB1c2VEYXRhUm91dGVyQ29udGV4dCgKICAgICJ1c2VSZXZhbGlkYXRvciIKICAgIC8qIFVzZVJldmFsaWRhdG9yICovCiAgKTsKICBsZXQgc3RhdGUgPSB1c2VEYXRhUm91dGVyU3RhdGUoCiAgICAidXNlUmV2YWxpZGF0b3IiCiAgICAvKiBVc2VSZXZhbGlkYXRvciAqLwogICk7CiAgbGV0IHJldmFsaWRhdGUgPSBSZWFjdDIudXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4gewogICAgYXdhaXQgZGF0YVJvdXRlckNvbnRleHQucm91dGVyLnJldmFsaWRhdGUoKTsKICB9LCBbZGF0YVJvdXRlckNvbnRleHQucm91dGVyXSk7CiAgcmV0dXJuIFJlYWN0Mi51c2VNZW1vKAogICAgKCkgPT4gKHsgcmV2YWxpZGF0ZSwgc3RhdGU6IHN0YXRlLnJldmFsaWRhdGlvbiB9KSwKICAgIFtyZXZhbGlkYXRlLCBzdGF0ZS5yZXZhbGlkYXRpb25dCiAgKTsKfQpmdW5jdGlvbiB1c2VNYXRjaGVzKCkgewogIGxldCB7IG1hdGNoZXMsIGxvYWRlckRhdGEgfSA9IHVzZURhdGFSb3V0ZXJTdGF0ZSgKICAgICJ1c2VNYXRjaGVzIgogICAgLyogVXNlTWF0Y2hlcyAqLwogICk7CiAgcmV0dXJuIFJlYWN0Mi51c2VNZW1vKAogICAgKCkgPT4gbWF0Y2hlcy5tYXAoKG0pID0+IGNvbnZlcnRSb3V0ZU1hdGNoVG9VaU1hdGNoKG0sIGxvYWRlckRhdGEpKSwKICAgIFttYXRjaGVzLCBsb2FkZXJEYXRhXQogICk7Cn0KZnVuY3Rpb24gdXNlTG9hZGVyRGF0YSgpIHsKICBsZXQgc3RhdGUgPSB1c2VEYXRhUm91dGVyU3RhdGUoCiAgICAidXNlTG9hZGVyRGF0YSIKICAgIC8qIFVzZUxvYWRlckRhdGEgKi8KICApOwogIGxldCByb3V0ZUlkID0gdXNlQ3VycmVudFJvdXRlSWQoCiAgICAidXNlTG9hZGVyRGF0YSIKICAgIC8qIFVzZUxvYWRlckRhdGEgKi8KICApOwogIHJldHVybiBzdGF0ZS5sb2FkZXJEYXRhW3JvdXRlSWRdOwp9CmZ1bmN0aW9uIHVzZVJvdXRlTG9hZGVyRGF0YShyb3V0ZUlkKSB7CiAgbGV0IHN0YXRlID0gdXNlRGF0YVJvdXRlclN0YXRlKAogICAgInVzZVJvdXRlTG9hZGVyRGF0YSIKICAgIC8qIFVzZVJvdXRlTG9hZGVyRGF0YSAqLwogICk7CiAgcmV0dXJuIHN0YXRlLmxvYWRlckRhdGFbcm91dGVJZF07Cn0KZnVuY3Rpb24gdXNlQWN0aW9uRGF0YSgpIHsKICBsZXQgc3RhdGUgPSB1c2VEYXRhUm91dGVyU3RhdGUoCiAgICAidXNlQWN0aW9uRGF0YSIKICAgIC8qIFVzZUFjdGlvbkRhdGEgKi8KICApOwogIGxldCByb3V0ZUlkID0gdXNlQ3VycmVudFJvdXRlSWQoCiAgICAidXNlTG9hZGVyRGF0YSIKICAgIC8qIFVzZUxvYWRlckRhdGEgKi8KICApOwogIHJldHVybiBzdGF0ZS5hY3Rpb25EYXRhID8gc3RhdGUuYWN0aW9uRGF0YVtyb3V0ZUlkXSA6IHZvaWQgMDsKfQpmdW5jdGlvbiB1c2VSb3V0ZUVycm9yKCkgewogIHZhciBfYTsKICBsZXQgZXJyb3IgPSBSZWFjdDIudXNlQ29udGV4dChSb3V0ZUVycm9yQ29udGV4dCk7CiAgbGV0IHN0YXRlID0gdXNlRGF0YVJvdXRlclN0YXRlKAogICAgInVzZVJvdXRlRXJyb3IiCiAgICAvKiBVc2VSb3V0ZUVycm9yICovCiAgKTsKICBsZXQgcm91dGVJZCA9IHVzZUN1cnJlbnRSb3V0ZUlkKAogICAgInVzZVJvdXRlRXJyb3IiCiAgICAvKiBVc2VSb3V0ZUVycm9yICovCiAgKTsKICBpZiAoZXJyb3IgIT09IHZvaWQgMCkgewogICAgcmV0dXJuIGVycm9yOwogIH0KICByZXR1cm4gKF9hID0gc3RhdGUuZXJyb3JzKSA9PSBudWxsID8gdm9pZCAwIDogX2Fbcm91dGVJZF07Cn0KZnVuY3Rpb24gdXNlQXN5bmNWYWx1ZSgpIHsKICBsZXQgdmFsdWUgPSBSZWFjdDIudXNlQ29udGV4dChBd2FpdENvbnRleHQpOwogIHJldHVybiB2YWx1ZSA9PSBudWxsID8gdm9pZCAwIDogdmFsdWUuX2RhdGE7Cn0KZnVuY3Rpb24gdXNlQXN5bmNFcnJvcigpIHsKICBsZXQgdmFsdWUgPSBSZWFjdDIudXNlQ29udGV4dChBd2FpdENvbnRleHQpOwogIHJldHVybiB2YWx1ZSA9PSBudWxsID8gdm9pZCAwIDogdmFsdWUuX2Vycm9yOwp9CnZhciBibG9ja2VySWQgPSAwOwpmdW5jdGlvbiB1c2VCbG9ja2VyKHNob3VsZEJsb2NrKSB7CiAgbGV0IHsgcm91dGVyOiByb3V0ZXIyLCBiYXNlbmFtZSB9ID0gdXNlRGF0YVJvdXRlckNvbnRleHQoCiAgICAidXNlQmxvY2tlciIKICAgIC8qIFVzZUJsb2NrZXIgKi8KICApOwogIGxldCBzdGF0ZSA9IHVzZURhdGFSb3V0ZXJTdGF0ZSgKICAgICJ1c2VCbG9ja2VyIgogICAgLyogVXNlQmxvY2tlciAqLwogICk7CiAgbGV0IFtibG9ja2VyS2V5LCBzZXRCbG9ja2VyS2V5XSA9IFJlYWN0Mi51c2VTdGF0ZSgiIik7CiAgbGV0IGJsb2NrZXJGdW5jdGlvbiA9IFJlYWN0Mi51c2VDYWxsYmFjaygKICAgIChhcmcpID0+IHsKICAgICAgaWYgKHR5cGVvZiBzaG91bGRCbG9jayAhPT0gImZ1bmN0aW9uIikgewogICAgICAgIHJldHVybiAhIXNob3VsZEJsb2NrOwogICAgICB9CiAgICAgIGlmIChiYXNlbmFtZSA9PT0gIi8iKSB7CiAgICAgICAgcmV0dXJuIHNob3VsZEJsb2NrKGFyZyk7CiAgICAgIH0KICAgICAgbGV0IHsgY3VycmVudExvY2F0aW9uLCBuZXh0TG9jYXRpb24sIGhpc3RvcnlBY3Rpb24gfSA9IGFyZzsKICAgICAgcmV0dXJuIHNob3VsZEJsb2NrKHsKICAgICAgICBjdXJyZW50TG9jYXRpb246IHsKICAgICAgICAgIC4uLmN1cnJlbnRMb2NhdGlvbiwKICAgICAgICAgIHBhdGhuYW1lOiBzdHJpcEJhc2VuYW1lKGN1cnJlbnRMb2NhdGlvbi5wYXRobmFtZSwgYmFzZW5hbWUpIHx8IGN1cnJlbnRMb2NhdGlvbi5wYXRobmFtZQogICAgICAgIH0sCiAgICAgICAgbmV4dExvY2F0aW9uOiB7CiAgICAgICAgICAuLi5uZXh0TG9jYXRpb24sCiAgICAgICAgICBwYXRobmFtZTogc3RyaXBCYXNlbmFtZShuZXh0TG9jYXRpb24ucGF0aG5hbWUsIGJhc2VuYW1lKSB8fCBuZXh0TG9jYXRpb24ucGF0aG5hbWUKICAgICAgICB9LAogICAgICAgIGhpc3RvcnlBY3Rpb24KICAgICAgfSk7CiAgICB9LAogICAgW2Jhc2VuYW1lLCBzaG91bGRCbG9ja10KICApOwogIFJlYWN0Mi51c2VFZmZlY3QoKCkgPT4gewogICAgbGV0IGtleSA9IFN0cmluZygrK2Jsb2NrZXJJZCk7CiAgICBzZXRCbG9ja2VyS2V5KGtleSk7CiAgICByZXR1cm4gKCkgPT4gcm91dGVyMi5kZWxldGVCbG9ja2VyKGtleSk7CiAgfSwgW3JvdXRlcjJdKTsKICBSZWFjdDIudXNlRWZmZWN0KCgpID0+IHsKICAgIGlmIChibG9ja2VyS2V5ICE9PSAiIikgewogICAgICByb3V0ZXIyLmdldEJsb2NrZXIoYmxvY2tlcktleSwgYmxvY2tlckZ1bmN0aW9uKTsKICAgIH0KICB9LCBbcm91dGVyMiwgYmxvY2tlcktleSwgYmxvY2tlckZ1bmN0aW9uXSk7CiAgcmV0dXJuIGJsb2NrZXJLZXkgJiYgc3RhdGUuYmxvY2tlcnMuaGFzKGJsb2NrZXJLZXkpID8gc3RhdGUuYmxvY2tlcnMuZ2V0KGJsb2NrZXJLZXkpIDogSURMRV9CTE9DS0VSOwp9CmZ1bmN0aW9uIHVzZU5hdmlnYXRlU3RhYmxlKCkgewogIGxldCB7IHJvdXRlcjogcm91dGVyMiB9ID0gdXNlRGF0YVJvdXRlckNvbnRleHQoCiAgICAidXNlTmF2aWdhdGUiCiAgICAvKiBVc2VOYXZpZ2F0ZVN0YWJsZSAqLwogICk7CiAgbGV0IGlkID0gdXNlQ3VycmVudFJvdXRlSWQoCiAgICAidXNlTmF2aWdhdGUiCiAgICAvKiBVc2VOYXZpZ2F0ZVN0YWJsZSAqLwogICk7CiAgbGV0IGFjdGl2ZVJlZiA9IFJlYWN0Mi51c2VSZWYoZmFsc2UpOwogIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoKCkgPT4gewogICAgYWN0aXZlUmVmLmN1cnJlbnQgPSB0cnVlOwogIH0pOwogIGxldCBuYXZpZ2F0ZSA9IFJlYWN0Mi51c2VDYWxsYmFjaygKICAgIGFzeW5jICh0bywgb3B0aW9ucyA9IHt9KSA9PiB7CiAgICAgIHdhcm5pbmcoYWN0aXZlUmVmLmN1cnJlbnQsIG5hdmlnYXRlRWZmZWN0V2FybmluZyk7CiAgICAgIGlmICghYWN0aXZlUmVmLmN1cnJlbnQpIHJldHVybjsKICAgICAgaWYgKHR5cGVvZiB0byA9PT0gIm51bWJlciIpIHsKICAgICAgICByb3V0ZXIyLm5hdmlnYXRlKHRvKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhd2FpdCByb3V0ZXIyLm5hdmlnYXRlKHRvLCB7IGZyb21Sb3V0ZUlkOiBpZCwgLi4ub3B0aW9ucyB9KTsKICAgICAgfQogICAgfSwKICAgIFtyb3V0ZXIyLCBpZF0KICApOwogIHJldHVybiBuYXZpZ2F0ZTsKfQp2YXIgYWxyZWFkeVdhcm5lZCA9IHt9OwpmdW5jdGlvbiB3YXJuaW5nT25jZShrZXksIGNvbmQsIG1lc3NhZ2UpIHsKICBpZiAoIWNvbmQgJiYgIWFscmVhZHlXYXJuZWRba2V5XSkgewogICAgYWxyZWFkeVdhcm5lZFtrZXldID0gdHJ1ZTsKICAgIHdhcm5pbmcoZmFsc2UsIG1lc3NhZ2UpOwogIH0KfQp2YXIgYWxyZWFkeVdhcm5lZDIgPSB7fTsKZnVuY3Rpb24gd2Fybk9uY2UoY29uZGl0aW9uLCBtZXNzYWdlKSB7CiAgaWYgKCFjb25kaXRpb24gJiYgIWFscmVhZHlXYXJuZWQyW21lc3NhZ2VdKSB7CiAgICBhbHJlYWR5V2FybmVkMlttZXNzYWdlXSA9IHRydWU7CiAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7CiAgfQp9CmZ1bmN0aW9uIG1hcFJvdXRlUHJvcGVydGllcyhyb3V0ZSkgewogIGxldCB1cGRhdGVzID0gewogICAgLy8gTm90ZTogdGhpcyBjaGVjayBhbHNvIG9jY3VycyBpbiBjcmVhdGVSb3V0ZXNGcm9tQ2hpbGRyZW4gc28gdXBkYXRlCiAgICAvLyB0aGVyZSBpZiB5b3UgY2hhbmdlIHRoaXMgLS0gcGxlYXNlIGFuZCB0aGFuayB5b3UhCiAgICBoYXNFcnJvckJvdW5kYXJ5OiByb3V0ZS5oYXNFcnJvckJvdW5kYXJ5IHx8IHJvdXRlLkVycm9yQm91bmRhcnkgIT0gbnVsbCB8fCByb3V0ZS5lcnJvckVsZW1lbnQgIT0gbnVsbAogIH07CiAgaWYgKHJvdXRlLkNvbXBvbmVudCkgewogICAgaWYgKEVOQUJMRV9ERVZfV0FSTklOR1MpIHsKICAgICAgaWYgKHJvdXRlLmVsZW1lbnQpIHsKICAgICAgICB3YXJuaW5nKAogICAgICAgICAgZmFsc2UsCiAgICAgICAgICAiWW91IHNob3VsZCBub3QgaW5jbHVkZSBib3RoIGBDb21wb25lbnRgIGFuZCBgZWxlbWVudGAgb24geW91ciByb3V0ZSAtIGBDb21wb25lbnRgIHdpbGwgYmUgdXNlZC4iCiAgICAgICAgKTsKICAgICAgfQogICAgfQogICAgT2JqZWN0LmFzc2lnbih1cGRhdGVzLCB7CiAgICAgIGVsZW1lbnQ6IFJlYWN0My5jcmVhdGVFbGVtZW50KHJvdXRlLkNvbXBvbmVudCksCiAgICAgIENvbXBvbmVudDogdm9pZCAwCiAgICB9KTsKICB9CiAgaWYgKHJvdXRlLkh5ZHJhdGVGYWxsYmFjaykgewogICAgaWYgKEVOQUJMRV9ERVZfV0FSTklOR1MpIHsKICAgICAgaWYgKHJvdXRlLmh5ZHJhdGVGYWxsYmFja0VsZW1lbnQpIHsKICAgICAgICB3YXJuaW5nKAogICAgICAgICAgZmFsc2UsCiAgICAgICAgICAiWW91IHNob3VsZCBub3QgaW5jbHVkZSBib3RoIGBIeWRyYXRlRmFsbGJhY2tgIGFuZCBgaHlkcmF0ZUZhbGxiYWNrRWxlbWVudGAgb24geW91ciByb3V0ZSAtIGBIeWRyYXRlRmFsbGJhY2tgIHdpbGwgYmUgdXNlZC4iCiAgICAgICAgKTsKICAgICAgfQogICAgfQogICAgT2JqZWN0LmFzc2lnbih1cGRhdGVzLCB7CiAgICAgIGh5ZHJhdGVGYWxsYmFja0VsZW1lbnQ6IFJlYWN0My5jcmVhdGVFbGVtZW50KHJvdXRlLkh5ZHJhdGVGYWxsYmFjayksCiAgICAgIEh5ZHJhdGVGYWxsYmFjazogdm9pZCAwCiAgICB9KTsKICB9CiAgaWYgKHJvdXRlLkVycm9yQm91bmRhcnkpIHsKICAgIGlmIChFTkFCTEVfREVWX1dBUk5JTkdTKSB7CiAgICAgIGlmIChyb3V0ZS5lcnJvckVsZW1lbnQpIHsKICAgICAgICB3YXJuaW5nKAogICAgICAgICAgZmFsc2UsCiAgICAgICAgICAiWW91IHNob3VsZCBub3QgaW5jbHVkZSBib3RoIGBFcnJvckJvdW5kYXJ5YCBhbmQgYGVycm9yRWxlbWVudGAgb24geW91ciByb3V0ZSAtIGBFcnJvckJvdW5kYXJ5YCB3aWxsIGJlIHVzZWQuIgogICAgICAgICk7CiAgICAgIH0KICAgIH0KICAgIE9iamVjdC5hc3NpZ24odXBkYXRlcywgewogICAgICBlcnJvckVsZW1lbnQ6IFJlYWN0My5jcmVhdGVFbGVtZW50KHJvdXRlLkVycm9yQm91bmRhcnkpLAogICAgICBFcnJvckJvdW5kYXJ5OiB2b2lkIDAKICAgIH0pOwogIH0KICByZXR1cm4gdXBkYXRlczsKfQp2YXIgaHlkcmF0aW9uUm91dGVQcm9wZXJ0aWVzID0gWwogICJIeWRyYXRlRmFsbGJhY2siLAogICJoeWRyYXRlRmFsbGJhY2tFbGVtZW50IgpdOwpmdW5jdGlvbiBjcmVhdGVNZW1vcnlSb3V0ZXIocm91dGVzLCBvcHRzKSB7CiAgcmV0dXJuIGNyZWF0ZVJvdXRlcih7CiAgICBiYXNlbmFtZTogb3B0cyA9PSBudWxsID8gdm9pZCAwIDogb3B0cy5iYXNlbmFtZSwKICAgIGdldENvbnRleHQ6IG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMuZ2V0Q29udGV4dCwKICAgIGZ1dHVyZTogb3B0cyA9PSBudWxsID8gdm9pZCAwIDogb3B0cy5mdXR1cmUsCiAgICBoaXN0b3J5OiBjcmVhdGVNZW1vcnlIaXN0b3J5KHsKICAgICAgaW5pdGlhbEVudHJpZXM6IG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMuaW5pdGlhbEVudHJpZXMsCiAgICAgIGluaXRpYWxJbmRleDogb3B0cyA9PSBudWxsID8gdm9pZCAwIDogb3B0cy5pbml0aWFsSW5kZXgKICAgIH0pLAogICAgaHlkcmF0aW9uRGF0YTogb3B0cyA9PSBudWxsID8gdm9pZCAwIDogb3B0cy5oeWRyYXRpb25EYXRhLAogICAgcm91dGVzLAogICAgaHlkcmF0aW9uUm91dGVQcm9wZXJ0aWVzLAogICAgbWFwUm91dGVQcm9wZXJ0aWVzLAogICAgZGF0YVN0cmF0ZWd5OiBvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLmRhdGFTdHJhdGVneSwKICAgIHBhdGNoUm91dGVzT25OYXZpZ2F0aW9uOiBvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLnBhdGNoUm91dGVzT25OYXZpZ2F0aW9uCiAgfSkuaW5pdGlhbGl6ZSgpOwp9CnZhciBEZWZlcnJlZCA9IGNsYXNzIHsKICBjb25zdHJ1Y3RvcigpIHsKICAgIHRoaXMuc3RhdHVzID0gInBlbmRpbmciOwogICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICB0aGlzLnJlc29sdmUgPSAodmFsdWUpID0+IHsKICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09ICJwZW5kaW5nIikgewogICAgICAgICAgdGhpcy5zdGF0dXMgPSAicmVzb2x2ZWQiOwogICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7CiAgICAgICAgfQogICAgICB9OwogICAgICB0aGlzLnJlamVjdCA9IChyZWFzb24pID0+IHsKICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09ICJwZW5kaW5nIikgewogICAgICAgICAgdGhpcy5zdGF0dXMgPSAicmVqZWN0ZWQiOwogICAgICAgICAgcmVqZWN0KHJlYXNvbik7CiAgICAgICAgfQogICAgICB9OwogICAgfSk7CiAgfQp9OwpmdW5jdGlvbiBSb3V0ZXJQcm92aWRlcih7CiAgcm91dGVyOiByb3V0ZXIyLAogIGZsdXNoU3luYzogcmVhY3REb21GbHVzaFN5bmNJbXBsLAogIHVuc3RhYmxlX29uRXJyb3IKfSkgewogIGxldCBbc3RhdGUsIHNldFN0YXRlSW1wbF0gPSBSZWFjdDMudXNlU3RhdGUocm91dGVyMi5zdGF0ZSk7CiAgbGV0IFtwZW5kaW5nU3RhdGUsIHNldFBlbmRpbmdTdGF0ZV0gPSBSZWFjdDMudXNlU3RhdGUoKTsKICBsZXQgW3Z0Q29udGV4dCwgc2V0VnRDb250ZXh0XSA9IFJlYWN0My51c2VTdGF0ZSh7CiAgICBpc1RyYW5zaXRpb25pbmc6IGZhbHNlCiAgfSk7CiAgbGV0IFtyZW5kZXJEZmQsIHNldFJlbmRlckRmZF0gPSBSZWFjdDMudXNlU3RhdGUoKTsKICBsZXQgW3RyYW5zaXRpb24sIHNldFRyYW5zaXRpb25dID0gUmVhY3QzLnVzZVN0YXRlKCk7CiAgbGV0IFtpbnRlcnJ1cHRpb24sIHNldEludGVycnVwdGlvbl0gPSBSZWFjdDMudXNlU3RhdGUoKTsKICBsZXQgZmV0Y2hlckRhdGEgPSBSZWFjdDMudXNlUmVmKC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkpOwogIGxldCBsb2dFcnJvcnNBbmRTZXRTdGF0ZSA9IFJlYWN0My51c2VDYWxsYmFjaygKICAgIChuZXdTdGF0ZSkgPT4gewogICAgICBzZXRTdGF0ZUltcGwoKHByZXZTdGF0ZSkgPT4gewogICAgICAgIGlmIChuZXdTdGF0ZS5lcnJvcnMgJiYgdW5zdGFibGVfb25FcnJvcikgewogICAgICAgICAgT2JqZWN0LmVudHJpZXMobmV3U3RhdGUuZXJyb3JzKS5mb3JFYWNoKChbcm91dGVJZCwgZXJyb3JdKSA9PiB7CiAgICAgICAgICAgIHZhciBfYTsKICAgICAgICAgICAgaWYgKCgoX2EgPSBwcmV2U3RhdGUuZXJyb3JzKSA9PSBudWxsID8gdm9pZCAwIDogX2Fbcm91dGVJZF0pICE9PSBlcnJvcikgewogICAgICAgICAgICAgIHVuc3RhYmxlX29uRXJyb3IoZXJyb3IpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG5ld1N0YXRlOwogICAgICB9KTsKICAgIH0sCiAgICBbdW5zdGFibGVfb25FcnJvcl0KICApOwogIGxldCBzZXRTdGF0ZSA9IFJlYWN0My51c2VDYWxsYmFjaygKICAgIChuZXdTdGF0ZSwgeyBkZWxldGVkRmV0Y2hlcnMsIGZsdXNoU3luYzogZmx1c2hTeW5jMywgdmlld1RyYW5zaXRpb25PcHRzIH0pID0+IHsKICAgICAgbmV3U3RhdGUuZmV0Y2hlcnMuZm9yRWFjaCgoZmV0Y2hlciwga2V5KSA9PiB7CiAgICAgICAgaWYgKGZldGNoZXIuZGF0YSAhPT0gdm9pZCAwKSB7CiAgICAgICAgICBmZXRjaGVyRGF0YS5jdXJyZW50LnNldChrZXksIGZldGNoZXIuZGF0YSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgZGVsZXRlZEZldGNoZXJzLmZvckVhY2goKGtleSkgPT4gZmV0Y2hlckRhdGEuY3VycmVudC5kZWxldGUoa2V5KSk7CiAgICAgIHdhcm5PbmNlKAogICAgICAgIGZsdXNoU3luYzMgPT09IGZhbHNlIHx8IHJlYWN0RG9tRmx1c2hTeW5jSW1wbCAhPSBudWxsLAogICAgICAgICdZb3UgcHJvdmlkZWQgdGhlIGBmbHVzaFN5bmNgIG9wdGlvbiB0byBhIHJvdXRlciB1cGRhdGUsIGJ1dCB5b3UgYXJlIG5vdCB1c2luZyB0aGUgYDxSb3V0ZXJQcm92aWRlcj5gIGZyb20gYHJlYWN0LXJvdXRlci9kb21gIHNvIGBSZWFjdERPTS5mbHVzaFN5bmMoKWAgaXMgdW5hdmFpbGFibGUuICBQbGVhc2UgdXBkYXRlIHlvdXIgYXBwIHRvIGBpbXBvcnQgeyBSb3V0ZXJQcm92aWRlciB9IGZyb20gInJlYWN0LXJvdXRlci9kb20iYCBhbmQgZW5zdXJlIHlvdSBoYXZlIGByZWFjdC1kb21gIGluc3RhbGxlZCBhcyBhIGRlcGVuZGVuY3kgdG8gdXNlIHRoZSBgZmx1c2hTeW5jYCBvcHRpb24uJwogICAgICApOwogICAgICBsZXQgaXNWaWV3VHJhbnNpdGlvbkF2YWlsYWJsZSA9IHJvdXRlcjIud2luZG93ICE9IG51bGwgJiYgcm91dGVyMi53aW5kb3cuZG9jdW1lbnQgIT0gbnVsbCAmJiB0eXBlb2Ygcm91dGVyMi53aW5kb3cuZG9jdW1lbnQuc3RhcnRWaWV3VHJhbnNpdGlvbiA9PT0gImZ1bmN0aW9uIjsKICAgICAgd2Fybk9uY2UoCiAgICAgICAgdmlld1RyYW5zaXRpb25PcHRzID09IG51bGwgfHwgaXNWaWV3VHJhbnNpdGlvbkF2YWlsYWJsZSwKICAgICAgICAiWW91IHByb3ZpZGVkIHRoZSBgdmlld1RyYW5zaXRpb25gIG9wdGlvbiB0byBhIHJvdXRlciB1cGRhdGUsIGJ1dCB5b3UgZG8gbm90IGFwcGVhciB0byBiZSBydW5uaW5nIGluIGEgRE9NIGVudmlyb25tZW50IGFzIGB3aW5kb3cuc3RhcnRWaWV3VHJhbnNpdGlvbmAgaXMgbm90IGF2YWlsYWJsZS4iCiAgICAgICk7CiAgICAgIGlmICghdmlld1RyYW5zaXRpb25PcHRzIHx8ICFpc1ZpZXdUcmFuc2l0aW9uQXZhaWxhYmxlKSB7CiAgICAgICAgaWYgKHJlYWN0RG9tRmx1c2hTeW5jSW1wbCAmJiBmbHVzaFN5bmMzKSB7CiAgICAgICAgICByZWFjdERvbUZsdXNoU3luY0ltcGwoKCkgPT4gbG9nRXJyb3JzQW5kU2V0U3RhdGUobmV3U3RhdGUpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgUmVhY3QzLnN0YXJ0VHJhbnNpdGlvbigoKSA9PiBsb2dFcnJvcnNBbmRTZXRTdGF0ZShuZXdTdGF0ZSkpOwogICAgICAgIH0KICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHJlYWN0RG9tRmx1c2hTeW5jSW1wbCAmJiBmbHVzaFN5bmMzKSB7CiAgICAgICAgcmVhY3REb21GbHVzaFN5bmNJbXBsKCgpID0+IHsKICAgICAgICAgIGlmICh0cmFuc2l0aW9uKSB7CiAgICAgICAgICAgIHJlbmRlckRmZCAmJiByZW5kZXJEZmQucmVzb2x2ZSgpOwogICAgICAgICAgICB0cmFuc2l0aW9uLnNraXBUcmFuc2l0aW9uKCk7CiAgICAgICAgICB9CiAgICAgICAgICBzZXRWdENvbnRleHQoewogICAgICAgICAgICBpc1RyYW5zaXRpb25pbmc6IHRydWUsCiAgICAgICAgICAgIGZsdXNoU3luYzogdHJ1ZSwKICAgICAgICAgICAgY3VycmVudExvY2F0aW9uOiB2aWV3VHJhbnNpdGlvbk9wdHMuY3VycmVudExvY2F0aW9uLAogICAgICAgICAgICBuZXh0TG9jYXRpb246IHZpZXdUcmFuc2l0aW9uT3B0cy5uZXh0TG9jYXRpb24KICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIGxldCB0ID0gcm91dGVyMi53aW5kb3cuZG9jdW1lbnQuc3RhcnRWaWV3VHJhbnNpdGlvbigoKSA9PiB7CiAgICAgICAgICByZWFjdERvbUZsdXNoU3luY0ltcGwoKCkgPT4gbG9nRXJyb3JzQW5kU2V0U3RhdGUobmV3U3RhdGUpKTsKICAgICAgICB9KTsKICAgICAgICB0LmZpbmlzaGVkLmZpbmFsbHkoKCkgPT4gewogICAgICAgICAgcmVhY3REb21GbHVzaFN5bmNJbXBsKCgpID0+IHsKICAgICAgICAgICAgc2V0UmVuZGVyRGZkKHZvaWQgMCk7CiAgICAgICAgICAgIHNldFRyYW5zaXRpb24odm9pZCAwKTsKICAgICAgICAgICAgc2V0UGVuZGluZ1N0YXRlKHZvaWQgMCk7CiAgICAgICAgICAgIHNldFZ0Q29udGV4dCh7IGlzVHJhbnNpdGlvbmluZzogZmFsc2UgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICByZWFjdERvbUZsdXNoU3luY0ltcGwoKCkgPT4gc2V0VHJhbnNpdGlvbih0KSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0cmFuc2l0aW9uKSB7CiAgICAgICAgcmVuZGVyRGZkICYmIHJlbmRlckRmZC5yZXNvbHZlKCk7CiAgICAgICAgdHJhbnNpdGlvbi5za2lwVHJhbnNpdGlvbigpOwogICAgICAgIHNldEludGVycnVwdGlvbih7CiAgICAgICAgICBzdGF0ZTogbmV3U3RhdGUsCiAgICAgICAgICBjdXJyZW50TG9jYXRpb246IHZpZXdUcmFuc2l0aW9uT3B0cy5jdXJyZW50TG9jYXRpb24sCiAgICAgICAgICBuZXh0TG9jYXRpb246IHZpZXdUcmFuc2l0aW9uT3B0cy5uZXh0TG9jYXRpb24KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzZXRQZW5kaW5nU3RhdGUobmV3U3RhdGUpOwogICAgICAgIHNldFZ0Q29udGV4dCh7CiAgICAgICAgICBpc1RyYW5zaXRpb25pbmc6IHRydWUsCiAgICAgICAgICBmbHVzaFN5bmM6IGZhbHNlLAogICAgICAgICAgY3VycmVudExvY2F0aW9uOiB2aWV3VHJhbnNpdGlvbk9wdHMuY3VycmVudExvY2F0aW9uLAogICAgICAgICAgbmV4dExvY2F0aW9uOiB2aWV3VHJhbnNpdGlvbk9wdHMubmV4dExvY2F0aW9uCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBbCiAgICAgIHJvdXRlcjIud2luZG93LAogICAgICByZWFjdERvbUZsdXNoU3luY0ltcGwsCiAgICAgIHRyYW5zaXRpb24sCiAgICAgIHJlbmRlckRmZCwKICAgICAgbG9nRXJyb3JzQW5kU2V0U3RhdGUKICAgIF0KICApOwogIFJlYWN0My51c2VMYXlvdXRFZmZlY3QoKCkgPT4gcm91dGVyMi5zdWJzY3JpYmUoc2V0U3RhdGUpLCBbcm91dGVyMiwgc2V0U3RhdGVdKTsKICBSZWFjdDMudXNlRWZmZWN0KCgpID0+IHsKICAgIGlmICh2dENvbnRleHQuaXNUcmFuc2l0aW9uaW5nICYmICF2dENvbnRleHQuZmx1c2hTeW5jKSB7CiAgICAgIHNldFJlbmRlckRmZChuZXcgRGVmZXJyZWQoKSk7CiAgICB9CiAgfSwgW3Z0Q29udGV4dF0pOwogIFJlYWN0My51c2VFZmZlY3QoKCkgPT4gewogICAgaWYgKHJlbmRlckRmZCAmJiBwZW5kaW5nU3RhdGUgJiYgcm91dGVyMi53aW5kb3cpIHsKICAgICAgbGV0IG5ld1N0YXRlID0gcGVuZGluZ1N0YXRlOwogICAgICBsZXQgcmVuZGVyUHJvbWlzZSA9IHJlbmRlckRmZC5wcm9taXNlOwogICAgICBsZXQgdHJhbnNpdGlvbjIgPSByb3V0ZXIyLndpbmRvdy5kb2N1bWVudC5zdGFydFZpZXdUcmFuc2l0aW9uKGFzeW5jICgpID0+IHsKICAgICAgICBSZWFjdDMuc3RhcnRUcmFuc2l0aW9uKCgpID0+IGxvZ0Vycm9yc0FuZFNldFN0YXRlKG5ld1N0YXRlKSk7CiAgICAgICAgYXdhaXQgcmVuZGVyUHJvbWlzZTsKICAgICAgfSk7CiAgICAgIHRyYW5zaXRpb24yLmZpbmlzaGVkLmZpbmFsbHkoKCkgPT4gewogICAgICAgIHNldFJlbmRlckRmZCh2b2lkIDApOwogICAgICAgIHNldFRyYW5zaXRpb24odm9pZCAwKTsKICAgICAgICBzZXRQZW5kaW5nU3RhdGUodm9pZCAwKTsKICAgICAgICBzZXRWdENvbnRleHQoeyBpc1RyYW5zaXRpb25pbmc6IGZhbHNlIH0pOwogICAgICB9KTsKICAgICAgc2V0VHJhbnNpdGlvbih0cmFuc2l0aW9uMik7CiAgICB9CiAgfSwgW3BlbmRpbmdTdGF0ZSwgcmVuZGVyRGZkLCByb3V0ZXIyLndpbmRvdywgbG9nRXJyb3JzQW5kU2V0U3RhdGVdKTsKICBSZWFjdDMudXNlRWZmZWN0KCgpID0+IHsKICAgIGlmIChyZW5kZXJEZmQgJiYgcGVuZGluZ1N0YXRlICYmIHN0YXRlLmxvY2F0aW9uLmtleSA9PT0gcGVuZGluZ1N0YXRlLmxvY2F0aW9uLmtleSkgewogICAgICByZW5kZXJEZmQucmVzb2x2ZSgpOwogICAgfQogIH0sIFtyZW5kZXJEZmQsIHRyYW5zaXRpb24sIHN0YXRlLmxvY2F0aW9uLCBwZW5kaW5nU3RhdGVdKTsKICBSZWFjdDMudXNlRWZmZWN0KCgpID0+IHsKICAgIGlmICghdnRDb250ZXh0LmlzVHJhbnNpdGlvbmluZyAmJiBpbnRlcnJ1cHRpb24pIHsKICAgICAgc2V0UGVuZGluZ1N0YXRlKGludGVycnVwdGlvbi5zdGF0ZSk7CiAgICAgIHNldFZ0Q29udGV4dCh7CiAgICAgICAgaXNUcmFuc2l0aW9uaW5nOiB0cnVlLAogICAgICAgIGZsdXNoU3luYzogZmFsc2UsCiAgICAgICAgY3VycmVudExvY2F0aW9uOiBpbnRlcnJ1cHRpb24uY3VycmVudExvY2F0aW9uLAogICAgICAgIG5leHRMb2NhdGlvbjogaW50ZXJydXB0aW9uLm5leHRMb2NhdGlvbgogICAgICB9KTsKICAgICAgc2V0SW50ZXJydXB0aW9uKHZvaWQgMCk7CiAgICB9CiAgfSwgW3Z0Q29udGV4dC5pc1RyYW5zaXRpb25pbmcsIGludGVycnVwdGlvbl0pOwogIGxldCBuYXZpZ2F0b3IgPSBSZWFjdDMudXNlTWVtbygoKSA9PiB7CiAgICByZXR1cm4gewogICAgICBjcmVhdGVIcmVmOiByb3V0ZXIyLmNyZWF0ZUhyZWYsCiAgICAgIGVuY29kZUxvY2F0aW9uOiByb3V0ZXIyLmVuY29kZUxvY2F0aW9uLAogICAgICBnbzogKG4pID0+IHJvdXRlcjIubmF2aWdhdGUobiksCiAgICAgIHB1c2g6ICh0bywgc3RhdGUyLCBvcHRzKSA9PiByb3V0ZXIyLm5hdmlnYXRlKHRvLCB7CiAgICAgICAgc3RhdGU6IHN0YXRlMiwKICAgICAgICBwcmV2ZW50U2Nyb2xsUmVzZXQ6IG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMucHJldmVudFNjcm9sbFJlc2V0CiAgICAgIH0pLAogICAgICByZXBsYWNlOiAodG8sIHN0YXRlMiwgb3B0cykgPT4gcm91dGVyMi5uYXZpZ2F0ZSh0bywgewogICAgICAgIHJlcGxhY2U6IHRydWUsCiAgICAgICAgc3RhdGU6IHN0YXRlMiwKICAgICAgICBwcmV2ZW50U2Nyb2xsUmVzZXQ6IG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMucHJldmVudFNjcm9sbFJlc2V0CiAgICAgIH0pCiAgICB9OwogIH0sIFtyb3V0ZXIyXSk7CiAgbGV0IGJhc2VuYW1lID0gcm91dGVyMi5iYXNlbmFtZSB8fCAiLyI7CiAgbGV0IGRhdGFSb3V0ZXJDb250ZXh0ID0gUmVhY3QzLnVzZU1lbW8oCiAgICAoKSA9PiAoewogICAgICByb3V0ZXI6IHJvdXRlcjIsCiAgICAgIG5hdmlnYXRvciwKICAgICAgc3RhdGljOiBmYWxzZSwKICAgICAgYmFzZW5hbWUsCiAgICAgIHVuc3RhYmxlX29uRXJyb3IKICAgIH0pLAogICAgW3JvdXRlcjIsIG5hdmlnYXRvciwgYmFzZW5hbWUsIHVuc3RhYmxlX29uRXJyb3JdCiAgKTsKICByZXR1cm4gUmVhY3QzLmNyZWF0ZUVsZW1lbnQoUmVhY3QzLkZyYWdtZW50LCBudWxsLCBSZWFjdDMuY3JlYXRlRWxlbWVudChEYXRhUm91dGVyQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogZGF0YVJvdXRlckNvbnRleHQgfSwgUmVhY3QzLmNyZWF0ZUVsZW1lbnQoRGF0YVJvdXRlclN0YXRlQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogc3RhdGUgfSwgUmVhY3QzLmNyZWF0ZUVsZW1lbnQoRmV0Y2hlcnNDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBmZXRjaGVyRGF0YS5jdXJyZW50IH0sIFJlYWN0My5jcmVhdGVFbGVtZW50KFZpZXdUcmFuc2l0aW9uQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogdnRDb250ZXh0IH0sIFJlYWN0My5jcmVhdGVFbGVtZW50KAogICAgUm91dGVyLAogICAgewogICAgICBiYXNlbmFtZSwKICAgICAgbG9jYXRpb246IHN0YXRlLmxvY2F0aW9uLAogICAgICBuYXZpZ2F0aW9uVHlwZTogc3RhdGUuaGlzdG9yeUFjdGlvbiwKICAgICAgbmF2aWdhdG9yCiAgICB9LAogICAgUmVhY3QzLmNyZWF0ZUVsZW1lbnQoCiAgICAgIE1lbW9pemVkRGF0YVJvdXRlcywKICAgICAgewogICAgICAgIHJvdXRlczogcm91dGVyMi5yb3V0ZXMsCiAgICAgICAgZnV0dXJlOiByb3V0ZXIyLmZ1dHVyZSwKICAgICAgICBzdGF0ZSwKICAgICAgICB1bnN0YWJsZV9vbkVycm9yCiAgICAgIH0KICAgICkKICApKSkpKSwgbnVsbCk7Cn0KdmFyIE1lbW9pemVkRGF0YVJvdXRlcyA9IFJlYWN0My5tZW1vKERhdGFSb3V0ZXMpOwpmdW5jdGlvbiBEYXRhUm91dGVzKHsKICByb3V0ZXMsCiAgZnV0dXJlLAogIHN0YXRlLAogIHVuc3RhYmxlX29uRXJyb3IKfSkgewogIHJldHVybiB1c2VSb3V0ZXNJbXBsKHJvdXRlcywgdm9pZCAwLCBzdGF0ZSwgdW5zdGFibGVfb25FcnJvciwgZnV0dXJlKTsKfQpmdW5jdGlvbiBNZW1vcnlSb3V0ZXIoewogIGJhc2VuYW1lLAogIGNoaWxkcmVuLAogIGluaXRpYWxFbnRyaWVzLAogIGluaXRpYWxJbmRleAp9KSB7CiAgbGV0IGhpc3RvcnlSZWYgPSBSZWFjdDMudXNlUmVmKCk7CiAgaWYgKGhpc3RvcnlSZWYuY3VycmVudCA9PSBudWxsKSB7CiAgICBoaXN0b3J5UmVmLmN1cnJlbnQgPSBjcmVhdGVNZW1vcnlIaXN0b3J5KHsKICAgICAgaW5pdGlhbEVudHJpZXMsCiAgICAgIGluaXRpYWxJbmRleCwKICAgICAgdjVDb21wYXQ6IHRydWUKICAgIH0pOwogIH0KICBsZXQgaGlzdG9yeSA9IGhpc3RvcnlSZWYuY3VycmVudDsKICBsZXQgW3N0YXRlLCBzZXRTdGF0ZUltcGxdID0gUmVhY3QzLnVzZVN0YXRlKHsKICAgIGFjdGlvbjogaGlzdG9yeS5hY3Rpb24sCiAgICBsb2NhdGlvbjogaGlzdG9yeS5sb2NhdGlvbgogIH0pOwogIGxldCBzZXRTdGF0ZSA9IFJlYWN0My51c2VDYWxsYmFjaygKICAgIChuZXdTdGF0ZSkgPT4gewogICAgICBSZWFjdDMuc3RhcnRUcmFuc2l0aW9uKCgpID0+IHNldFN0YXRlSW1wbChuZXdTdGF0ZSkpOwogICAgfSwKICAgIFtzZXRTdGF0ZUltcGxdCiAgKTsKICBSZWFjdDMudXNlTGF5b3V0RWZmZWN0KCgpID0+IGhpc3RvcnkubGlzdGVuKHNldFN0YXRlKSwgW2hpc3RvcnksIHNldFN0YXRlXSk7CiAgcmV0dXJuIFJlYWN0My5jcmVhdGVFbGVtZW50KAogICAgUm91dGVyLAogICAgewogICAgICBiYXNlbmFtZSwKICAgICAgY2hpbGRyZW4sCiAgICAgIGxvY2F0aW9uOiBzdGF0ZS5sb2NhdGlvbiwKICAgICAgbmF2aWdhdGlvblR5cGU6IHN0YXRlLmFjdGlvbiwKICAgICAgbmF2aWdhdG9yOiBoaXN0b3J5CiAgICB9CiAgKTsKfQpmdW5jdGlvbiBOYXZpZ2F0ZSh7CiAgdG8sCiAgcmVwbGFjZTogcmVwbGFjZTIsCiAgc3RhdGUsCiAgcmVsYXRpdmUKfSkgewogIGludmFyaWFudCgKICAgIHVzZUluUm91dGVyQ29udGV4dCgpLAogICAgLy8gVE9ETzogVGhpcyBlcnJvciBpcyBwcm9iYWJseSBiZWNhdXNlIHRoZXkgc29tZWhvdyBoYXZlIDIgdmVyc2lvbnMgb2YKICAgIC8vIHRoZSByb3V0ZXIgbG9hZGVkLiBXZSBjYW4gaGVscCB0aGVtIHVuZGVyc3RhbmQgaG93IHRvIGF2b2lkIHRoYXQuCiAgICBgPE5hdmlnYXRlPiBtYXkgYmUgdXNlZCBvbmx5IGluIHRoZSBjb250ZXh0IG9mIGEgPFJvdXRlcj4gY29tcG9uZW50LmAKICApOwogIGxldCB7IHN0YXRpYzogaXNTdGF0aWMgfSA9IFJlYWN0My51c2VDb250ZXh0KE5hdmlnYXRpb25Db250ZXh0KTsKICB3YXJuaW5nKAogICAgIWlzU3RhdGljLAogICAgYDxOYXZpZ2F0ZT4gbXVzdCBub3QgYmUgdXNlZCBvbiB0aGUgaW5pdGlhbCByZW5kZXIgaW4gYSA8U3RhdGljUm91dGVyPi4gVGhpcyBpcyBhIG5vLW9wLCBidXQgeW91IHNob3VsZCBtb2RpZnkgeW91ciBjb2RlIHNvIHRoZSA8TmF2aWdhdGU+IGlzIG9ubHkgZXZlciByZW5kZXJlZCBpbiByZXNwb25zZSB0byBzb21lIHVzZXIgaW50ZXJhY3Rpb24gb3Igc3RhdGUgY2hhbmdlLmAKICApOwogIGxldCB7IG1hdGNoZXMgfSA9IFJlYWN0My51c2VDb250ZXh0KFJvdXRlQ29udGV4dCk7CiAgbGV0IHsgcGF0aG5hbWU6IGxvY2F0aW9uUGF0aG5hbWUgfSA9IHVzZUxvY2F0aW9uKCk7CiAgbGV0IG5hdmlnYXRlID0gdXNlTmF2aWdhdGUoKTsKICBsZXQgcGF0aCA9IHJlc29sdmVUbygKICAgIHRvLAogICAgZ2V0UmVzb2x2ZVRvTWF0Y2hlcyhtYXRjaGVzKSwKICAgIGxvY2F0aW9uUGF0aG5hbWUsCiAgICByZWxhdGl2ZSA9PT0gInBhdGgiCiAgKTsKICBsZXQganNvblBhdGggPSBKU09OLnN0cmluZ2lmeShwYXRoKTsKICBSZWFjdDMudXNlRWZmZWN0KCgpID0+IHsKICAgIG5hdmlnYXRlKEpTT04ucGFyc2UoanNvblBhdGgpLCB7IHJlcGxhY2U6IHJlcGxhY2UyLCBzdGF0ZSwgcmVsYXRpdmUgfSk7CiAgfSwgW25hdmlnYXRlLCBqc29uUGF0aCwgcmVsYXRpdmUsIHJlcGxhY2UyLCBzdGF0ZV0pOwogIHJldHVybiBudWxsOwp9CmZ1bmN0aW9uIE91dGxldChwcm9wcykgewogIHJldHVybiB1c2VPdXRsZXQocHJvcHMuY29udGV4dCk7Cn0KZnVuY3Rpb24gUm91dGUocHJvcHMpIHsKICBpbnZhcmlhbnQoCiAgICBmYWxzZSwKICAgIGBBIDxSb3V0ZT4gaXMgb25seSBldmVyIHRvIGJlIHVzZWQgYXMgdGhlIGNoaWxkIG9mIDxSb3V0ZXM+IGVsZW1lbnQsIG5ldmVyIHJlbmRlcmVkIGRpcmVjdGx5LiBQbGVhc2Ugd3JhcCB5b3VyIDxSb3V0ZT4gaW4gYSA8Um91dGVzPi5gCiAgKTsKfQpmdW5jdGlvbiBSb3V0ZXIoewogIGJhc2VuYW1lOiBiYXNlbmFtZVByb3AgPSAiLyIsCiAgY2hpbGRyZW4gPSBudWxsLAogIGxvY2F0aW9uOiBsb2NhdGlvblByb3AsCiAgbmF2aWdhdGlvblR5cGUgPSAiUE9QIiwKICBuYXZpZ2F0b3IsCiAgc3RhdGljOiBzdGF0aWNQcm9wID0gZmFsc2UKfSkgewogIGludmFyaWFudCgKICAgICF1c2VJblJvdXRlckNvbnRleHQoKSwKICAgIGBZb3UgY2Fubm90IHJlbmRlciBhIDxSb3V0ZXI+IGluc2lkZSBhbm90aGVyIDxSb3V0ZXI+LiBZb3Ugc2hvdWxkIG5ldmVyIGhhdmUgbW9yZSB0aGFuIG9uZSBpbiB5b3VyIGFwcC5gCiAgKTsKICBsZXQgYmFzZW5hbWUgPSBiYXNlbmFtZVByb3AucmVwbGFjZSgvXlwvKi8sICIvIik7CiAgbGV0IG5hdmlnYXRpb25Db250ZXh0ID0gUmVhY3QzLnVzZU1lbW8oCiAgICAoKSA9PiAoewogICAgICBiYXNlbmFtZSwKICAgICAgbmF2aWdhdG9yLAogICAgICBzdGF0aWM6IHN0YXRpY1Byb3AsCiAgICAgIGZ1dHVyZToge30KICAgIH0pLAogICAgW2Jhc2VuYW1lLCBuYXZpZ2F0b3IsIHN0YXRpY1Byb3BdCiAgKTsKICBpZiAodHlwZW9mIGxvY2F0aW9uUHJvcCA9PT0gInN0cmluZyIpIHsKICAgIGxvY2F0aW9uUHJvcCA9IHBhcnNlUGF0aChsb2NhdGlvblByb3ApOwogIH0KICBsZXQgewogICAgcGF0aG5hbWUgPSAiLyIsCiAgICBzZWFyY2ggPSAiIiwKICAgIGhhc2ggPSAiIiwKICAgIHN0YXRlID0gbnVsbCwKICAgIGtleSA9ICJkZWZhdWx0IgogIH0gPSBsb2NhdGlvblByb3A7CiAgbGV0IGxvY2F0aW9uQ29udGV4dCA9IFJlYWN0My51c2VNZW1vKCgpID0+IHsKICAgIGxldCB0cmFpbGluZ1BhdGhuYW1lID0gc3RyaXBCYXNlbmFtZShwYXRobmFtZSwgYmFzZW5hbWUpOwogICAgaWYgKHRyYWlsaW5nUGF0aG5hbWUgPT0gbnVsbCkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIHJldHVybiB7CiAgICAgIGxvY2F0aW9uOiB7CiAgICAgICAgcGF0aG5hbWU6IHRyYWlsaW5nUGF0aG5hbWUsCiAgICAgICAgc2VhcmNoLAogICAgICAgIGhhc2gsCiAgICAgICAgc3RhdGUsCiAgICAgICAga2V5CiAgICAgIH0sCiAgICAgIG5hdmlnYXRpb25UeXBlCiAgICB9OwogIH0sIFtiYXNlbmFtZSwgcGF0aG5hbWUsIHNlYXJjaCwgaGFzaCwgc3RhdGUsIGtleSwgbmF2aWdhdGlvblR5cGVdKTsKICB3YXJuaW5nKAogICAgbG9jYXRpb25Db250ZXh0ICE9IG51bGwsCiAgICBgPFJvdXRlciBiYXNlbmFtZT0iJHtiYXNlbmFtZX0iPiBpcyBub3QgYWJsZSB0byBtYXRjaCB0aGUgVVJMICIke3BhdGhuYW1lfSR7c2VhcmNofSR7aGFzaH0iIGJlY2F1c2UgaXQgZG9lcyBub3Qgc3RhcnQgd2l0aCB0aGUgYmFzZW5hbWUsIHNvIHRoZSA8Um91dGVyPiB3b24ndCByZW5kZXIgYW55dGhpbmcuYAogICk7CiAgaWYgKGxvY2F0aW9uQ29udGV4dCA9PSBudWxsKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CiAgcmV0dXJuIFJlYWN0My5jcmVhdGVFbGVtZW50KE5hdmlnYXRpb25Db250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBuYXZpZ2F0aW9uQ29udGV4dCB9LCBSZWFjdDMuY3JlYXRlRWxlbWVudChMb2NhdGlvbkNvbnRleHQuUHJvdmlkZXIsIHsgY2hpbGRyZW4sIHZhbHVlOiBsb2NhdGlvbkNvbnRleHQgfSkpOwp9CmZ1bmN0aW9uIFJvdXRlcyh7CiAgY2hpbGRyZW4sCiAgbG9jYXRpb246IGxvY2F0aW9uMgp9KSB7CiAgcmV0dXJuIHVzZVJvdXRlcyhjcmVhdGVSb3V0ZXNGcm9tQ2hpbGRyZW4oY2hpbGRyZW4pLCBsb2NhdGlvbjIpOwp9CmZ1bmN0aW9uIEF3YWl0KHsKICBjaGlsZHJlbiwKICBlcnJvckVsZW1lbnQsCiAgcmVzb2x2ZQp9KSB7CiAgbGV0IGRhdGFSb3V0ZXJDb250ZXh0ID0gUmVhY3QzLnVzZUNvbnRleHQoRGF0YVJvdXRlckNvbnRleHQpOwogIHJldHVybiBSZWFjdDMuY3JlYXRlRWxlbWVudCgKICAgIEF3YWl0RXJyb3JCb3VuZGFyeSwKICAgIHsKICAgICAgcmVzb2x2ZSwKICAgICAgZXJyb3JFbGVtZW50LAogICAgICB1bnN0YWJsZV9vbkVycm9yOiBkYXRhUm91dGVyQ29udGV4dCA9PSBudWxsID8gdm9pZCAwIDogZGF0YVJvdXRlckNvbnRleHQudW5zdGFibGVfb25FcnJvcgogICAgfSwKICAgIFJlYWN0My5jcmVhdGVFbGVtZW50KFJlc29sdmVBd2FpdCwgbnVsbCwgY2hpbGRyZW4pCiAgKTsKfQp2YXIgQXdhaXRFcnJvckJvdW5kYXJ5ID0gY2xhc3MgZXh0ZW5kcyBSZWFjdDMuQ29tcG9uZW50IHsKICBjb25zdHJ1Y3Rvcihwcm9wcykgewogICAgc3VwZXIocHJvcHMpOwogICAgdGhpcy5zdGF0ZSA9IHsgZXJyb3I6IG51bGwgfTsKICB9CiAgc3RhdGljIGdldERlcml2ZWRTdGF0ZUZyb21FcnJvcihlcnJvcikgewogICAgcmV0dXJuIHsgZXJyb3IgfTsKICB9CiAgY29tcG9uZW50RGlkQ2F0Y2goZXJyb3IsIGVycm9ySW5mbykgewogICAgaWYgKHRoaXMucHJvcHMudW5zdGFibGVfb25FcnJvcikgewogICAgICB0aGlzLnByb3BzLnVuc3RhYmxlX29uRXJyb3IoZXJyb3IsIGVycm9ySW5mbyk7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLmVycm9yKAogICAgICAgICI8QXdhaXQ+IGNhdWdodCB0aGUgZm9sbG93aW5nIGVycm9yIGR1cmluZyByZW5kZXIiLAogICAgICAgIGVycm9yLAogICAgICAgIGVycm9ySW5mbwogICAgICApOwogICAgfQogIH0KICByZW5kZXIoKSB7CiAgICBsZXQgeyBjaGlsZHJlbiwgZXJyb3JFbGVtZW50LCByZXNvbHZlIH0gPSB0aGlzLnByb3BzOwogICAgbGV0IHByb21pc2UgPSBudWxsOwogICAgbGV0IHN0YXR1cyA9IDA7CiAgICBpZiAoIShyZXNvbHZlIGluc3RhbmNlb2YgUHJvbWlzZSkpIHsKICAgICAgc3RhdHVzID0gMTsKICAgICAgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpOwogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvbWlzZSwgIl90cmFja2VkIiwgeyBnZXQ6ICgpID0+IHRydWUgfSk7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm9taXNlLCAiX2RhdGEiLCB7IGdldDogKCkgPT4gcmVzb2x2ZSB9KTsKICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5lcnJvcikgewogICAgICBzdGF0dXMgPSAyOwogICAgICBsZXQgcmVuZGVyRXJyb3IgPSB0aGlzLnN0YXRlLmVycm9yOwogICAgICBwcm9taXNlID0gUHJvbWlzZS5yZWplY3QoKS5jYXRjaCgoKSA9PiB7CiAgICAgIH0pOwogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvbWlzZSwgIl90cmFja2VkIiwgeyBnZXQ6ICgpID0+IHRydWUgfSk7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm9taXNlLCAiX2Vycm9yIiwgeyBnZXQ6ICgpID0+IHJlbmRlckVycm9yIH0pOwogICAgfSBlbHNlIGlmIChyZXNvbHZlLl90cmFja2VkKSB7CiAgICAgIHByb21pc2UgPSByZXNvbHZlOwogICAgICBzdGF0dXMgPSAiX2Vycm9yIiBpbiBwcm9taXNlID8gMiA6ICJfZGF0YSIgaW4gcHJvbWlzZSA/IDEgOiAwOwogICAgfSBlbHNlIHsKICAgICAgc3RhdHVzID0gMDsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlc29sdmUsICJfdHJhY2tlZCIsIHsgZ2V0OiAoKSA9PiB0cnVlIH0pOwogICAgICBwcm9taXNlID0gcmVzb2x2ZS50aGVuKAogICAgICAgIChkYXRhMikgPT4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlc29sdmUsICJfZGF0YSIsIHsgZ2V0OiAoKSA9PiBkYXRhMiB9KSwKICAgICAgICAoZXJyb3IpID0+IHsKICAgICAgICAgIHZhciBfYSwgX2I7CiAgICAgICAgICAoX2IgPSAoX2EgPSB0aGlzLnByb3BzKS51bnN0YWJsZV9vbkVycm9yKSA9PSBudWxsID8gdm9pZCAwIDogX2IuY2FsbChfYSwgZXJyb3IpOwogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlc29sdmUsICJfZXJyb3IiLCB7IGdldDogKCkgPT4gZXJyb3IgfSk7CiAgICAgICAgfQogICAgICApOwogICAgfQogICAgaWYgKHN0YXR1cyA9PT0gMiAmJiAhZXJyb3JFbGVtZW50KSB7CiAgICAgIHRocm93IHByb21pc2UuX2Vycm9yOwogICAgfQogICAgaWYgKHN0YXR1cyA9PT0gMikgewogICAgICByZXR1cm4gUmVhY3QzLmNyZWF0ZUVsZW1lbnQoQXdhaXRDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBwcm9taXNlLCBjaGlsZHJlbjogZXJyb3JFbGVtZW50IH0pOwogICAgfQogICAgaWYgKHN0YXR1cyA9PT0gMSkgewogICAgICByZXR1cm4gUmVhY3QzLmNyZWF0ZUVsZW1lbnQoQXdhaXRDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBwcm9taXNlLCBjaGlsZHJlbiB9KTsKICAgIH0KICAgIHRocm93IHByb21pc2U7CiAgfQp9OwpmdW5jdGlvbiBSZXNvbHZlQXdhaXQoewogIGNoaWxkcmVuCn0pIHsKICBsZXQgZGF0YTIgPSB1c2VBc3luY1ZhbHVlKCk7CiAgbGV0IHRvUmVuZGVyID0gdHlwZW9mIGNoaWxkcmVuID09PSAiZnVuY3Rpb24iID8gY2hpbGRyZW4oZGF0YTIpIDogY2hpbGRyZW47CiAgcmV0dXJuIFJlYWN0My5jcmVhdGVFbGVtZW50KFJlYWN0My5GcmFnbWVudCwgbnVsbCwgdG9SZW5kZXIpOwp9CmZ1bmN0aW9uIGNyZWF0ZVJvdXRlc0Zyb21DaGlsZHJlbihjaGlsZHJlbiwgcGFyZW50UGF0aCA9IFtdKSB7CiAgbGV0IHJvdXRlcyA9IFtdOwogIFJlYWN0My5DaGlsZHJlbi5mb3JFYWNoKGNoaWxkcmVuLCAoZWxlbWVudCwgaW5kZXgpID0+IHsKICAgIGlmICghUmVhY3QzLmlzVmFsaWRFbGVtZW50KGVsZW1lbnQpKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGxldCB0cmVlUGF0aCA9IFsuLi5wYXJlbnRQYXRoLCBpbmRleF07CiAgICBpZiAoZWxlbWVudC50eXBlID09PSBSZWFjdDMuRnJhZ21lbnQpIHsKICAgICAgcm91dGVzLnB1c2guYXBwbHkoCiAgICAgICAgcm91dGVzLAogICAgICAgIGNyZWF0ZVJvdXRlc0Zyb21DaGlsZHJlbihlbGVtZW50LnByb3BzLmNoaWxkcmVuLCB0cmVlUGF0aCkKICAgICAgKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgaW52YXJpYW50KAogICAgICBlbGVtZW50LnR5cGUgPT09IFJvdXRlLAogICAgICBgWyR7dHlwZW9mIGVsZW1lbnQudHlwZSA9PT0gInN0cmluZyIgPyBlbGVtZW50LnR5cGUgOiBlbGVtZW50LnR5cGUubmFtZX1dIGlzIG5vdCBhIDxSb3V0ZT4gY29tcG9uZW50LiBBbGwgY29tcG9uZW50IGNoaWxkcmVuIG9mIDxSb3V0ZXM+IG11c3QgYmUgYSA8Um91dGU+IG9yIDxSZWFjdC5GcmFnbWVudD5gCiAgICApOwogICAgaW52YXJpYW50KAogICAgICAhZWxlbWVudC5wcm9wcy5pbmRleCB8fCAhZWxlbWVudC5wcm9wcy5jaGlsZHJlbiwKICAgICAgIkFuIGluZGV4IHJvdXRlIGNhbm5vdCBoYXZlIGNoaWxkIHJvdXRlcy4iCiAgICApOwogICAgbGV0IHJvdXRlID0gewogICAgICBpZDogZWxlbWVudC5wcm9wcy5pZCB8fCB0cmVlUGF0aC5qb2luKCItIiksCiAgICAgIGNhc2VTZW5zaXRpdmU6IGVsZW1lbnQucHJvcHMuY2FzZVNlbnNpdGl2ZSwKICAgICAgZWxlbWVudDogZWxlbWVudC5wcm9wcy5lbGVtZW50LAogICAgICBDb21wb25lbnQ6IGVsZW1lbnQucHJvcHMuQ29tcG9uZW50LAogICAgICBpbmRleDogZWxlbWVudC5wcm9wcy5pbmRleCwKICAgICAgcGF0aDogZWxlbWVudC5wcm9wcy5wYXRoLAogICAgICBsb2FkZXI6IGVsZW1lbnQucHJvcHMubG9hZGVyLAogICAgICBhY3Rpb246IGVsZW1lbnQucHJvcHMuYWN0aW9uLAogICAgICBoeWRyYXRlRmFsbGJhY2tFbGVtZW50OiBlbGVtZW50LnByb3BzLmh5ZHJhdGVGYWxsYmFja0VsZW1lbnQsCiAgICAgIEh5ZHJhdGVGYWxsYmFjazogZWxlbWVudC5wcm9wcy5IeWRyYXRlRmFsbGJhY2ssCiAgICAgIGVycm9yRWxlbWVudDogZWxlbWVudC5wcm9wcy5lcnJvckVsZW1lbnQsCiAgICAgIEVycm9yQm91bmRhcnk6IGVsZW1lbnQucHJvcHMuRXJyb3JCb3VuZGFyeSwKICAgICAgaGFzRXJyb3JCb3VuZGFyeTogZWxlbWVudC5wcm9wcy5oYXNFcnJvckJvdW5kYXJ5ID09PSB0cnVlIHx8IGVsZW1lbnQucHJvcHMuRXJyb3JCb3VuZGFyeSAhPSBudWxsIHx8IGVsZW1lbnQucHJvcHMuZXJyb3JFbGVtZW50ICE9IG51bGwsCiAgICAgIHNob3VsZFJldmFsaWRhdGU6IGVsZW1lbnQucHJvcHMuc2hvdWxkUmV2YWxpZGF0ZSwKICAgICAgaGFuZGxlOiBlbGVtZW50LnByb3BzLmhhbmRsZSwKICAgICAgbGF6eTogZWxlbWVudC5wcm9wcy5sYXp5CiAgICB9OwogICAgaWYgKGVsZW1lbnQucHJvcHMuY2hpbGRyZW4pIHsKICAgICAgcm91dGUuY2hpbGRyZW4gPSBjcmVhdGVSb3V0ZXNGcm9tQ2hpbGRyZW4oCiAgICAgICAgZWxlbWVudC5wcm9wcy5jaGlsZHJlbiwKICAgICAgICB0cmVlUGF0aAogICAgICApOwogICAgfQogICAgcm91dGVzLnB1c2gocm91dGUpOwogIH0pOwogIHJldHVybiByb3V0ZXM7Cn0KdmFyIGNyZWF0ZVJvdXRlc0Zyb21FbGVtZW50cyA9IGNyZWF0ZVJvdXRlc0Zyb21DaGlsZHJlbjsKZnVuY3Rpb24gcmVuZGVyTWF0Y2hlcyhtYXRjaGVzKSB7CiAgcmV0dXJuIF9yZW5kZXJNYXRjaGVzKG1hdGNoZXMpOwp9CmZ1bmN0aW9uIHVzZVJvdXRlQ29tcG9uZW50UHJvcHMoKSB7CiAgcmV0dXJuIHsKICAgIHBhcmFtczogdXNlUGFyYW1zKCksCiAgICBsb2FkZXJEYXRhOiB1c2VMb2FkZXJEYXRhKCksCiAgICBhY3Rpb25EYXRhOiB1c2VBY3Rpb25EYXRhKCksCiAgICBtYXRjaGVzOiB1c2VNYXRjaGVzKCkKICB9Owp9CmZ1bmN0aW9uIFdpdGhDb21wb25lbnRQcm9wcyh7CiAgY2hpbGRyZW4KfSkgewogIGNvbnN0IHByb3BzID0gdXNlUm91dGVDb21wb25lbnRQcm9wcygpOwogIHJldHVybiBSZWFjdDMuY2xvbmVFbGVtZW50KGNoaWxkcmVuLCBwcm9wcyk7Cn0KZnVuY3Rpb24gd2l0aENvbXBvbmVudFByb3BzKENvbXBvbmVudDQpIHsKICByZXR1cm4gZnVuY3Rpb24gV2l0aENvbXBvbmVudFByb3BzMigpIHsKICAgIGNvbnN0IHByb3BzID0gdXNlUm91dGVDb21wb25lbnRQcm9wcygpOwogICAgcmV0dXJuIFJlYWN0My5jcmVhdGVFbGVtZW50KENvbXBvbmVudDQsIHByb3BzKTsKICB9Owp9CmZ1bmN0aW9uIHVzZUh5ZHJhdGVGYWxsYmFja1Byb3BzKCkgewogIHJldHVybiB7CiAgICBwYXJhbXM6IHVzZVBhcmFtcygpLAogICAgbG9hZGVyRGF0YTogdXNlTG9hZGVyRGF0YSgpLAogICAgYWN0aW9uRGF0YTogdXNlQWN0aW9uRGF0YSgpCiAgfTsKfQpmdW5jdGlvbiBXaXRoSHlkcmF0ZUZhbGxiYWNrUHJvcHMoewogIGNoaWxkcmVuCn0pIHsKICBjb25zdCBwcm9wcyA9IHVzZUh5ZHJhdGVGYWxsYmFja1Byb3BzKCk7CiAgcmV0dXJuIFJlYWN0My5jbG9uZUVsZW1lbnQoY2hpbGRyZW4sIHByb3BzKTsKfQpmdW5jdGlvbiB3aXRoSHlkcmF0ZUZhbGxiYWNrUHJvcHMoSHlkcmF0ZUZhbGxiYWNrKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIFdpdGhIeWRyYXRlRmFsbGJhY2tQcm9wczIoKSB7CiAgICBjb25zdCBwcm9wcyA9IHVzZUh5ZHJhdGVGYWxsYmFja1Byb3BzKCk7CiAgICByZXR1cm4gUmVhY3QzLmNyZWF0ZUVsZW1lbnQoSHlkcmF0ZUZhbGxiYWNrLCBwcm9wcyk7CiAgfTsKfQpmdW5jdGlvbiB1c2VFcnJvckJvdW5kYXJ5UHJvcHMoKSB7CiAgcmV0dXJuIHsKICAgIHBhcmFtczogdXNlUGFyYW1zKCksCiAgICBsb2FkZXJEYXRhOiB1c2VMb2FkZXJEYXRhKCksCiAgICBhY3Rpb25EYXRhOiB1c2VBY3Rpb25EYXRhKCksCiAgICBlcnJvcjogdXNlUm91dGVFcnJvcigpCiAgfTsKfQpmdW5jdGlvbiBXaXRoRXJyb3JCb3VuZGFyeVByb3BzKHsKICBjaGlsZHJlbgp9KSB7CiAgY29uc3QgcHJvcHMgPSB1c2VFcnJvckJvdW5kYXJ5UHJvcHMoKTsKICByZXR1cm4gUmVhY3QzLmNsb25lRWxlbWVudChjaGlsZHJlbiwgcHJvcHMpOwp9CmZ1bmN0aW9uIHdpdGhFcnJvckJvdW5kYXJ5UHJvcHMoRXJyb3JCb3VuZGFyeSkgewogIHJldHVybiBmdW5jdGlvbiBXaXRoRXJyb3JCb3VuZGFyeVByb3BzMigpIHsKICAgIGNvbnN0IHByb3BzID0gdXNlRXJyb3JCb3VuZGFyeVByb3BzKCk7CiAgICByZXR1cm4gUmVhY3QzLmNyZWF0ZUVsZW1lbnQoRXJyb3JCb3VuZGFyeSwgcHJvcHMpOwogIH07Cn0KdmFyIGRlZmF1bHRNZXRob2QgPSAiZ2V0IjsKdmFyIGRlZmF1bHRFbmNUeXBlID0gImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCI7CmZ1bmN0aW9uIGlzSHRtbEVsZW1lbnQob2JqZWN0KSB7CiAgcmV0dXJuIG9iamVjdCAhPSBudWxsICYmIHR5cGVvZiBvYmplY3QudGFnTmFtZSA9PT0gInN0cmluZyI7Cn0KZnVuY3Rpb24gaXNCdXR0b25FbGVtZW50KG9iamVjdCkgewogIHJldHVybiBpc0h0bWxFbGVtZW50KG9iamVjdCkgJiYgb2JqZWN0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gImJ1dHRvbiI7Cn0KZnVuY3Rpb24gaXNGb3JtRWxlbWVudChvYmplY3QpIHsKICByZXR1cm4gaXNIdG1sRWxlbWVudChvYmplY3QpICYmIG9iamVjdC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICJmb3JtIjsKfQpmdW5jdGlvbiBpc0lucHV0RWxlbWVudChvYmplY3QpIHsKICByZXR1cm4gaXNIdG1sRWxlbWVudChvYmplY3QpICYmIG9iamVjdC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICJpbnB1dCI7Cn0KZnVuY3Rpb24gaXNNb2RpZmllZEV2ZW50KGV2ZW50KSB7CiAgcmV0dXJuICEhKGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQuYWx0S2V5IHx8IGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQuc2hpZnRLZXkpOwp9CmZ1bmN0aW9uIHNob3VsZFByb2Nlc3NMaW5rQ2xpY2soZXZlbnQsIHRhcmdldCkgewogIHJldHVybiBldmVudC5idXR0b24gPT09IDAgJiYgLy8gSWdub3JlIGV2ZXJ5dGhpbmcgYnV0IGxlZnQgY2xpY2tzCiAgKCF0YXJnZXQgfHwgdGFyZ2V0ID09PSAiX3NlbGYiKSAmJiAvLyBMZXQgYnJvd3NlciBoYW5kbGUgInRhcmdldD1fYmxhbmsiIGV0Yy4KICAhaXNNb2RpZmllZEV2ZW50KGV2ZW50KTsKfQpmdW5jdGlvbiBjcmVhdGVTZWFyY2hQYXJhbXMoaW5pdCA9ICIiKSB7CiAgcmV0dXJuIG5ldyBVUkxTZWFyY2hQYXJhbXMoCiAgICB0eXBlb2YgaW5pdCA9PT0gInN0cmluZyIgfHwgQXJyYXkuaXNBcnJheShpbml0KSB8fCBpbml0IGluc3RhbmNlb2YgVVJMU2VhcmNoUGFyYW1zID8gaW5pdCA6IE9iamVjdC5rZXlzKGluaXQpLnJlZHVjZSgobWVtbzIsIGtleSkgPT4gewogICAgICBsZXQgdmFsdWUgPSBpbml0W2tleV07CiAgICAgIHJldHVybiBtZW1vMi5jb25jYXQoCiAgICAgICAgQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZS5tYXAoKHYpID0+IFtrZXksIHZdKSA6IFtba2V5LCB2YWx1ZV1dCiAgICAgICk7CiAgICB9LCBbXSkKICApOwp9CmZ1bmN0aW9uIGdldFNlYXJjaFBhcmFtc0ZvckxvY2F0aW9uKGxvY2F0aW9uU2VhcmNoLCBkZWZhdWx0U2VhcmNoUGFyYW1zKSB7CiAgbGV0IHNlYXJjaFBhcmFtcyA9IGNyZWF0ZVNlYXJjaFBhcmFtcyhsb2NhdGlvblNlYXJjaCk7CiAgaWYgKGRlZmF1bHRTZWFyY2hQYXJhbXMpIHsKICAgIGRlZmF1bHRTZWFyY2hQYXJhbXMuZm9yRWFjaCgoXywga2V5KSA9PiB7CiAgICAgIGlmICghc2VhcmNoUGFyYW1zLmhhcyhrZXkpKSB7CiAgICAgICAgZGVmYXVsdFNlYXJjaFBhcmFtcy5nZXRBbGwoa2V5KS5mb3JFYWNoKCh2YWx1ZSkgPT4gewogICAgICAgICAgc2VhcmNoUGFyYW1zLmFwcGVuZChrZXksIHZhbHVlKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfQogIHJldHVybiBzZWFyY2hQYXJhbXM7Cn0KdmFyIF9mb3JtRGF0YVN1cHBvcnRzU3VibWl0dGVyID0gbnVsbDsKZnVuY3Rpb24gaXNGb3JtRGF0YVN1Ym1pdHRlclN1cHBvcnRlZCgpIHsKICBpZiAoX2Zvcm1EYXRhU3VwcG9ydHNTdWJtaXR0ZXIgPT09IG51bGwpIHsKICAgIHRyeSB7CiAgICAgIG5ldyBGb3JtRGF0YSgKICAgICAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJmb3JtIiksCiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBpZiBGb3JtRGF0YSBzdXBwb3J0cyB0aGUgc3VibWl0dGVyIHBhcmFtZXRlciwgdGhpcyB3aWxsIHRocm93CiAgICAgICAgMAogICAgICApOwogICAgICBfZm9ybURhdGFTdXBwb3J0c1N1Ym1pdHRlciA9IGZhbHNlOwogICAgfSBjYXRjaCAoZSkgewogICAgICBfZm9ybURhdGFTdXBwb3J0c1N1Ym1pdHRlciA9IHRydWU7CiAgICB9CiAgfQogIHJldHVybiBfZm9ybURhdGFTdXBwb3J0c1N1Ym1pdHRlcjsKfQp2YXIgc3VwcG9ydGVkRm9ybUVuY1R5cGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoWwogICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLAogICJtdWx0aXBhcnQvZm9ybS1kYXRhIiwKICAidGV4dC9wbGFpbiIKXSk7CmZ1bmN0aW9uIGdldEZvcm1FbmNUeXBlKGVuY1R5cGUpIHsKICBpZiAoZW5jVHlwZSAhPSBudWxsICYmICFzdXBwb3J0ZWRGb3JtRW5jVHlwZXMuaGFzKGVuY1R5cGUpKSB7CiAgICB3YXJuaW5nKAogICAgICBmYWxzZSwKICAgICAgYCIke2VuY1R5cGV9IiBpcyBub3QgYSB2YWxpZCBcYGVuY1R5cGVcYCBmb3IgXGA8Rm9ybT5cYC9cYDxmZXRjaGVyLkZvcm0+XGAgYW5kIHdpbGwgZGVmYXVsdCB0byAiJHtkZWZhdWx0RW5jVHlwZX0iYAogICAgKTsKICAgIHJldHVybiBudWxsOwogIH0KICByZXR1cm4gZW5jVHlwZTsKfQpmdW5jdGlvbiBnZXRGb3JtU3VibWlzc2lvbkluZm8odGFyZ2V0LCBiYXNlbmFtZSkgewogIGxldCBtZXRob2Q7CiAgbGV0IGFjdGlvbjsKICBsZXQgZW5jVHlwZTsKICBsZXQgZm9ybURhdGE7CiAgbGV0IGJvZHk7CiAgaWYgKGlzRm9ybUVsZW1lbnQodGFyZ2V0KSkgewogICAgbGV0IGF0dHIgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCJhY3Rpb24iKTsKICAgIGFjdGlvbiA9IGF0dHIgPyBzdHJpcEJhc2VuYW1lKGF0dHIsIGJhc2VuYW1lKSA6IG51bGw7CiAgICBtZXRob2QgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCJtZXRob2QiKSB8fCBkZWZhdWx0TWV0aG9kOwogICAgZW5jVHlwZSA9IGdldEZvcm1FbmNUeXBlKHRhcmdldC5nZXRBdHRyaWJ1dGUoImVuY3R5cGUiKSkgfHwgZGVmYXVsdEVuY1R5cGU7CiAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSh0YXJnZXQpOwogIH0gZWxzZSBpZiAoaXNCdXR0b25FbGVtZW50KHRhcmdldCkgfHwgaXNJbnB1dEVsZW1lbnQodGFyZ2V0KSAmJiAodGFyZ2V0LnR5cGUgPT09ICJzdWJtaXQiIHx8IHRhcmdldC50eXBlID09PSAiaW1hZ2UiKSkgewogICAgbGV0IGZvcm0gPSB0YXJnZXQuZm9ybTsKICAgIGlmIChmb3JtID09IG51bGwpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgIGBDYW5ub3Qgc3VibWl0IGEgPGJ1dHRvbj4gb3IgPGlucHV0IHR5cGU9InN1Ym1pdCI+IHdpdGhvdXQgYSA8Zm9ybT5gCiAgICAgICk7CiAgICB9CiAgICBsZXQgYXR0ciA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoImZvcm1hY3Rpb24iKSB8fCBmb3JtLmdldEF0dHJpYnV0ZSgiYWN0aW9uIik7CiAgICBhY3Rpb24gPSBhdHRyID8gc3RyaXBCYXNlbmFtZShhdHRyLCBiYXNlbmFtZSkgOiBudWxsOwogICAgbWV0aG9kID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgiZm9ybW1ldGhvZCIpIHx8IGZvcm0uZ2V0QXR0cmlidXRlKCJtZXRob2QiKSB8fCBkZWZhdWx0TWV0aG9kOwogICAgZW5jVHlwZSA9IGdldEZvcm1FbmNUeXBlKHRhcmdldC5nZXRBdHRyaWJ1dGUoImZvcm1lbmN0eXBlIikpIHx8IGdldEZvcm1FbmNUeXBlKGZvcm0uZ2V0QXR0cmlidXRlKCJlbmN0eXBlIikpIHx8IGRlZmF1bHRFbmNUeXBlOwogICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSwgdGFyZ2V0KTsKICAgIGlmICghaXNGb3JtRGF0YVN1Ym1pdHRlclN1cHBvcnRlZCgpKSB7CiAgICAgIGxldCB7IG5hbWUsIHR5cGUsIHZhbHVlIH0gPSB0YXJnZXQ7CiAgICAgIGlmICh0eXBlID09PSAiaW1hZ2UiKSB7CiAgICAgICAgbGV0IHByZWZpeCA9IG5hbWUgPyBgJHtuYW1lfS5gIDogIiI7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKGAke3ByZWZpeH14YCwgIjAiKTsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoYCR7cHJlZml4fXlgLCAiMCIpOwogICAgICB9IGVsc2UgaWYgKG5hbWUpIHsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQobmFtZSwgdmFsdWUpOwogICAgICB9CiAgICB9CiAgfSBlbHNlIGlmIChpc0h0bWxFbGVtZW50KHRhcmdldCkpIHsKICAgIHRocm93IG5ldyBFcnJvcigKICAgICAgYENhbm5vdCBzdWJtaXQgZWxlbWVudCB0aGF0IGlzIG5vdCA8Zm9ybT4sIDxidXR0b24+LCBvciA8aW5wdXQgdHlwZT0ic3VibWl0fGltYWdlIj5gCiAgICApOwogIH0gZWxzZSB7CiAgICBtZXRob2QgPSBkZWZhdWx0TWV0aG9kOwogICAgYWN0aW9uID0gbnVsbDsKICAgIGVuY1R5cGUgPSBkZWZhdWx0RW5jVHlwZTsKICAgIGJvZHkgPSB0YXJnZXQ7CiAgfQogIGlmIChmb3JtRGF0YSAmJiBlbmNUeXBlID09PSAidGV4dC9wbGFpbiIpIHsKICAgIGJvZHkgPSBmb3JtRGF0YTsKICAgIGZvcm1EYXRhID0gdm9pZCAwOwogIH0KICByZXR1cm4geyBhY3Rpb24sIG1ldGhvZDogbWV0aG9kLnRvTG93ZXJDYXNlKCksIGVuY1R5cGUsIGZvcm1EYXRhLCBib2R5IH07Cn0KdmFyIEhPTEUgPSAtMTsKdmFyIE5BTiA9IC0yOwp2YXIgTkVHQVRJVkVfSU5GSU5JVFkgPSAtMzsKdmFyIE5FR0FUSVZFX1pFUk8gPSAtNDsKdmFyIE5VTEwgPSAtNTsKdmFyIFBPU0lUSVZFX0lORklOSVRZID0gLTY7CnZhciBVTkRFRklORUQgPSAtNzsKdmFyIFRZUEVfQklHSU5UID0gIkIiOwp2YXIgVFlQRV9EQVRFID0gIkQiOwp2YXIgVFlQRV9FUlJPUiA9ICJFIjsKdmFyIFRZUEVfTUFQID0gIk0iOwp2YXIgVFlQRV9OVUxMX09CSkVDVCA9ICJOIjsKdmFyIFRZUEVfUFJPTUlTRSA9ICJQIjsKdmFyIFRZUEVfUkVHRVhQID0gIlIiOwp2YXIgVFlQRV9TRVQgPSAiUyI7CnZhciBUWVBFX1NZTUJPTCA9ICJZIjsKdmFyIFRZUEVfVVJMID0gIlUiOwp2YXIgVFlQRV9QUkVWSU9VU19SRVNPTFZFRCA9ICJaIjsKdmFyIERlZmVycmVkMiA9IGNsYXNzIHsKICBjb25zdHJ1Y3RvcigpIHsKICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTsKICAgICAgdGhpcy5yZWplY3QgPSByZWplY3Q7CiAgICB9KTsKICB9Cn07CmZ1bmN0aW9uIGNyZWF0ZUxpbmVTcGxpdHRpbmdUcmFuc2Zvcm0oKSB7CiAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpOwogIGxldCBsZWZ0b3ZlciA9ICIiOwogIHJldHVybiBuZXcgVHJhbnNmb3JtU3RyZWFtKHsKICAgIHRyYW5zZm9ybShjaHVuaywgY29udHJvbGxlcikgewogICAgICBjb25zdCBzdHIgPSBkZWNvZGVyLmRlY29kZShjaHVuaywgeyBzdHJlYW06IHRydWUgfSk7CiAgICAgIGNvbnN0IHBhcnRzID0gKGxlZnRvdmVyICsgc3RyKS5zcGxpdCgiXG4iKTsKICAgICAgbGVmdG92ZXIgPSBwYXJ0cy5wb3AoKSB8fCAiIjsKICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKSB7CiAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHBhcnQpOwogICAgICB9CiAgICB9LAogICAgZmx1c2goY29udHJvbGxlcikgewogICAgICBpZiAobGVmdG92ZXIpIHsKICAgICAgICBjb250cm9sbGVyLmVucXVldWUobGVmdG92ZXIpOwogICAgICB9CiAgICB9CiAgfSk7Cn0KZnVuY3Rpb24gZmxhdHRlbihpbnB1dCkgewogIGNvbnN0IHsgaW5kaWNlcyB9ID0gdGhpczsKICBjb25zdCBleGlzdGluZyA9IGluZGljZXMuZ2V0KGlucHV0KTsKICBpZiAoZXhpc3RpbmcpIHJldHVybiBbZXhpc3RpbmddOwogIGlmIChpbnB1dCA9PT0gdm9pZCAwKSByZXR1cm4gVU5ERUZJTkVEOwogIGlmIChpbnB1dCA9PT0gbnVsbCkgcmV0dXJuIE5VTEw7CiAgaWYgKE51bWJlci5pc05hTihpbnB1dCkpIHJldHVybiBOQU47CiAgaWYgKGlucHV0ID09PSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpIHJldHVybiBQT1NJVElWRV9JTkZJTklUWTsKICBpZiAoaW5wdXQgPT09IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSkgcmV0dXJuIE5FR0FUSVZFX0lORklOSVRZOwogIGlmIChpbnB1dCA9PT0gMCAmJiAxIC8gaW5wdXQgPCAwKSByZXR1cm4gTkVHQVRJVkVfWkVSTzsKICBjb25zdCBpbmRleCA9IHRoaXMuaW5kZXgrKzsKICBpbmRpY2VzLnNldChpbnB1dCwgaW5kZXgpOwogIHN0cmluZ2lmeS5jYWxsKHRoaXMsIGlucHV0LCBpbmRleCk7CiAgcmV0dXJuIGluZGV4Owp9CmZ1bmN0aW9uIHN0cmluZ2lmeShpbnB1dCwgaW5kZXgpIHsKICBjb25zdCB7IGRlZmVycmVkLCBwbHVnaW5zLCBwb3N0UGx1Z2lucyB9ID0gdGhpczsKICBjb25zdCBzdHIgPSB0aGlzLnN0cmluZ2lmaWVkOwogIGNvbnN0IHN0YWNrID0gW1tpbnB1dCwgaW5kZXhdXTsKICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkgewogICAgY29uc3QgW2lucHV0MiwgaW5kZXgyXSA9IHN0YWNrLnBvcCgpOwogICAgY29uc3QgcGFydHNGb3JPYmogPSAob2JqKSA9PiBPYmplY3Qua2V5cyhvYmopLm1hcCgoaykgPT4gYCJfJHtmbGF0dGVuLmNhbGwodGhpcywgayl9Ijoke2ZsYXR0ZW4uY2FsbCh0aGlzLCBvYmpba10pfWApLmpvaW4oIiwiKTsKICAgIGxldCBlcnJvciA9IG51bGw7CiAgICBzd2l0Y2ggKHR5cGVvZiBpbnB1dDIpIHsKICAgICAgY2FzZSAiYm9vbGVhbiI6CiAgICAgIGNhc2UgIm51bWJlciI6CiAgICAgIGNhc2UgInN0cmluZyI6CiAgICAgICAgc3RyW2luZGV4Ml0gPSBKU09OLnN0cmluZ2lmeShpbnB1dDIpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJiaWdpbnQiOgogICAgICAgIHN0cltpbmRleDJdID0gYFsiJHtUWVBFX0JJR0lOVH0iLCIke2lucHV0Mn0iXWA7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgInN5bWJvbCI6IHsKICAgICAgICBjb25zdCBrZXlGb3IgPSBTeW1ib2wua2V5Rm9yKGlucHV0Mik7CiAgICAgICAgaWYgKCFrZXlGb3IpIHsKICAgICAgICAgIGVycm9yID0gbmV3IEVycm9yKAogICAgICAgICAgICAiQ2Fubm90IGVuY29kZSBzeW1ib2wgdW5sZXNzIGNyZWF0ZWQgd2l0aCBTeW1ib2wuZm9yKCkiCiAgICAgICAgICApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzdHJbaW5kZXgyXSA9IGBbIiR7VFlQRV9TWU1CT0x9Iiwke0pTT04uc3RyaW5naWZ5KGtleUZvcil9XWA7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGNhc2UgIm9iamVjdCI6IHsKICAgICAgICBpZiAoIWlucHV0MikgewogICAgICAgICAgc3RyW2luZGV4Ml0gPSBgJHtOVUxMfWA7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgY29uc3QgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkoaW5wdXQyKTsKICAgICAgICBsZXQgcGx1Z2luSGFuZGxlZCA9IGZhbHNlOwogICAgICAgIGlmICghaXNBcnJheSAmJiBwbHVnaW5zKSB7CiAgICAgICAgICBmb3IgKGNvbnN0IHBsdWdpbiBvZiBwbHVnaW5zKSB7CiAgICAgICAgICAgIGNvbnN0IHBsdWdpblJlc3VsdCA9IHBsdWdpbihpbnB1dDIpOwogICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwbHVnaW5SZXN1bHQpKSB7CiAgICAgICAgICAgICAgcGx1Z2luSGFuZGxlZCA9IHRydWU7CiAgICAgICAgICAgICAgY29uc3QgW3BsdWdpbklkZW50aWZpZXIsIC4uLnJlc3RdID0gcGx1Z2luUmVzdWx0OwogICAgICAgICAgICAgIHN0cltpbmRleDJdID0gYFske0pTT04uc3RyaW5naWZ5KHBsdWdpbklkZW50aWZpZXIpfWA7CiAgICAgICAgICAgICAgaWYgKHJlc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgc3RyW2luZGV4Ml0gKz0gYCwke3Jlc3QubWFwKCh2KSA9PiBmbGF0dGVuLmNhbGwodGhpcywgdikpLmpvaW4oIiwiKX1gOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBzdHJbaW5kZXgyXSArPSAiXSI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCFwbHVnaW5IYW5kbGVkKSB7CiAgICAgICAgICBsZXQgcmVzdWx0ID0gaXNBcnJheSA/ICJbIiA6ICJ7IjsKICAgICAgICAgIGlmIChpc0FycmF5KSB7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQyLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgIHJlc3VsdCArPSAoaSA/ICIsIiA6ICIiKSArIChpIGluIGlucHV0MiA/IGZsYXR0ZW4uY2FsbCh0aGlzLCBpbnB1dDJbaV0pIDogSE9MRSk7CiAgICAgICAgICAgIHN0cltpbmRleDJdID0gYCR7cmVzdWx0fV1gOwogICAgICAgICAgfSBlbHNlIGlmIChpbnB1dDIgaW5zdGFuY2VvZiBEYXRlKSB7CiAgICAgICAgICAgIGNvbnN0IGRhdGVUaW1lID0gaW5wdXQyLmdldFRpbWUoKTsKICAgICAgICAgICAgc3RyW2luZGV4Ml0gPSBgWyIke1RZUEVfREFURX0iLCR7TnVtYmVyLmlzTmFOKGRhdGVUaW1lKSA/IEpTT04uc3RyaW5naWZ5KCJpbnZhbGlkIikgOiBkYXRlVGltZX1dYDsKICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQyIGluc3RhbmNlb2YgVVJMKSB7CiAgICAgICAgICAgIHN0cltpbmRleDJdID0gYFsiJHtUWVBFX1VSTH0iLCR7SlNPTi5zdHJpbmdpZnkoaW5wdXQyLmhyZWYpfV1gOwogICAgICAgICAgfSBlbHNlIGlmIChpbnB1dDIgaW5zdGFuY2VvZiBSZWdFeHApIHsKICAgICAgICAgICAgc3RyW2luZGV4Ml0gPSBgWyIke1RZUEVfUkVHRVhQfSIsJHtKU09OLnN0cmluZ2lmeSgKICAgICAgICAgICAgICBpbnB1dDIuc291cmNlCiAgICAgICAgICAgICl9LCR7SlNPTi5zdHJpbmdpZnkoaW5wdXQyLmZsYWdzKX1dYDsKICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQyIGluc3RhbmNlb2YgU2V0KSB7CiAgICAgICAgICAgIGlmIChpbnB1dDIuc2l6ZSA+IDApIHsKICAgICAgICAgICAgICBzdHJbaW5kZXgyXSA9IGBbIiR7VFlQRV9TRVR9Iiwke1suLi5pbnB1dDJdLm1hcCgodmFsKSA9PiBmbGF0dGVuLmNhbGwodGhpcywgdmFsKSkuam9pbigiLCIpfV1gOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHN0cltpbmRleDJdID0gYFsiJHtUWVBFX1NFVH0iXWA7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQyIGluc3RhbmNlb2YgTWFwKSB7CiAgICAgICAgICAgIGlmIChpbnB1dDIuc2l6ZSA+IDApIHsKICAgICAgICAgICAgICBzdHJbaW5kZXgyXSA9IGBbIiR7VFlQRV9NQVB9Iiwke1suLi5pbnB1dDJdLmZsYXRNYXAoKFtrLCB2XSkgPT4gWwogICAgICAgICAgICAgICAgZmxhdHRlbi5jYWxsKHRoaXMsIGspLAogICAgICAgICAgICAgICAgZmxhdHRlbi5jYWxsKHRoaXMsIHYpCiAgICAgICAgICAgICAgXSkuam9pbigiLCIpfV1gOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHN0cltpbmRleDJdID0gYFsiJHtUWVBFX01BUH0iXWA7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQyIGluc3RhbmNlb2YgUHJvbWlzZSkgewogICAgICAgICAgICBzdHJbaW5kZXgyXSA9IGBbIiR7VFlQRV9QUk9NSVNFfSIsJHtpbmRleDJ9XWA7CiAgICAgICAgICAgIGRlZmVycmVkW2luZGV4Ml0gPSBpbnB1dDI7CiAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0MiBpbnN0YW5jZW9mIEVycm9yKSB7CiAgICAgICAgICAgIHN0cltpbmRleDJdID0gYFsiJHtUWVBFX0VSUk9SfSIsJHtKU09OLnN0cmluZ2lmeShpbnB1dDIubWVzc2FnZSl9YDsKICAgICAgICAgICAgaWYgKGlucHV0Mi5uYW1lICE9PSAiRXJyb3IiKSB7CiAgICAgICAgICAgICAgc3RyW2luZGV4Ml0gKz0gYCwke0pTT04uc3RyaW5naWZ5KGlucHV0Mi5uYW1lKX1gOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0cltpbmRleDJdICs9ICJdIjsKICAgICAgICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGlucHV0MikgPT09IG51bGwpIHsKICAgICAgICAgICAgc3RyW2luZGV4Ml0gPSBgWyIke1RZUEVfTlVMTF9PQkpFQ1R9Iix7JHtwYXJ0c0Zvck9iaihpbnB1dDIpfX1dYDsKICAgICAgICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChpbnB1dDIpKSB7CiAgICAgICAgICAgIHN0cltpbmRleDJdID0gYHske3BhcnRzRm9yT2JqKGlucHV0Mil9fWA7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBlcnJvciA9IG5ldyBFcnJvcigiQ2Fubm90IGVuY29kZSBvYmplY3Qgd2l0aCBwcm90b3R5cGUiKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgZGVmYXVsdDogewogICAgICAgIGNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5KGlucHV0Mik7CiAgICAgICAgbGV0IHBsdWdpbkhhbmRsZWQgPSBmYWxzZTsKICAgICAgICBpZiAoIWlzQXJyYXkgJiYgcGx1Z2lucykgewogICAgICAgICAgZm9yIChjb25zdCBwbHVnaW4gb2YgcGx1Z2lucykgewogICAgICAgICAgICBjb25zdCBwbHVnaW5SZXN1bHQgPSBwbHVnaW4oaW5wdXQyKTsKICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocGx1Z2luUmVzdWx0KSkgewogICAgICAgICAgICAgIHBsdWdpbkhhbmRsZWQgPSB0cnVlOwogICAgICAgICAgICAgIGNvbnN0IFtwbHVnaW5JZGVudGlmaWVyLCAuLi5yZXN0XSA9IHBsdWdpblJlc3VsdDsKICAgICAgICAgICAgICBzdHJbaW5kZXgyXSA9IGBbJHtKU09OLnN0cmluZ2lmeShwbHVnaW5JZGVudGlmaWVyKX1gOwogICAgICAgICAgICAgIGlmIChyZXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIHN0cltpbmRleDJdICs9IGAsJHtyZXN0Lm1hcCgodikgPT4gZmxhdHRlbi5jYWxsKHRoaXMsIHYpKS5qb2luKCIsIil9YDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc3RyW2luZGV4Ml0gKz0gIl0iOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghcGx1Z2luSGFuZGxlZCkgewogICAgICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoIkNhbm5vdCBlbmNvZGUgZnVuY3Rpb24gb3IgdW5leHBlY3RlZCB0eXBlIik7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZiAoZXJyb3IpIHsKICAgICAgbGV0IHBsdWdpbkhhbmRsZWQgPSBmYWxzZTsKICAgICAgaWYgKHBvc3RQbHVnaW5zKSB7CiAgICAgICAgZm9yIChjb25zdCBwbHVnaW4gb2YgcG9zdFBsdWdpbnMpIHsKICAgICAgICAgIGNvbnN0IHBsdWdpblJlc3VsdCA9IHBsdWdpbihpbnB1dDIpOwogICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocGx1Z2luUmVzdWx0KSkgewogICAgICAgICAgICBwbHVnaW5IYW5kbGVkID0gdHJ1ZTsKICAgICAgICAgICAgY29uc3QgW3BsdWdpbklkZW50aWZpZXIsIC4uLnJlc3RdID0gcGx1Z2luUmVzdWx0OwogICAgICAgICAgICBzdHJbaW5kZXgyXSA9IGBbJHtKU09OLnN0cmluZ2lmeShwbHVnaW5JZGVudGlmaWVyKX1gOwogICAgICAgICAgICBpZiAocmVzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgc3RyW2luZGV4Ml0gKz0gYCwke3Jlc3QubWFwKCh2KSA9PiBmbGF0dGVuLmNhbGwodGhpcywgdikpLmpvaW4oIiwiKX1gOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0cltpbmRleDJdICs9ICJdIjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICghcGx1Z2luSGFuZGxlZCkgewogICAgICAgIHRocm93IGVycm9yOwogICAgICB9CiAgICB9CiAgfQp9CnZhciBvYmplY3RQcm90b05hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoT2JqZWN0LnByb3RvdHlwZSkuc29ydCgpLmpvaW4oIlwwIik7CmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodGhpbmcpIHsKICBjb25zdCBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGluZyk7CiAgcmV0dXJuIHByb3RvID09PSBPYmplY3QucHJvdG90eXBlIHx8IHByb3RvID09PSBudWxsIHx8IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHByb3RvKS5zb3J0KCkuam9pbigiXDAiKSA9PT0gb2JqZWN0UHJvdG9OYW1lczsKfQp2YXIgZ2xvYmFsT2JqID0gdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWxUaGlzIDogdm9pZCAwOwpmdW5jdGlvbiB1bmZsYXR0ZW4ocGFyc2VkKSB7CiAgY29uc3QgeyBoeWRyYXRlZCwgdmFsdWVzIH0gPSB0aGlzOwogIGlmICh0eXBlb2YgcGFyc2VkID09PSAibnVtYmVyIikgcmV0dXJuIGh5ZHJhdGUuY2FsbCh0aGlzLCBwYXJzZWQpOwogIGlmICghQXJyYXkuaXNBcnJheShwYXJzZWQpIHx8ICFwYXJzZWQubGVuZ3RoKSB0aHJvdyBuZXcgU3ludGF4RXJyb3IoKTsKICBjb25zdCBzdGFydEluZGV4ID0gdmFsdWVzLmxlbmd0aDsKICBmb3IgKGNvbnN0IHZhbHVlIG9mIHBhcnNlZCkgewogICAgdmFsdWVzLnB1c2godmFsdWUpOwogIH0KICBoeWRyYXRlZC5sZW5ndGggPSB2YWx1ZXMubGVuZ3RoOwogIHJldHVybiBoeWRyYXRlLmNhbGwodGhpcywgc3RhcnRJbmRleCk7Cn0KZnVuY3Rpb24gaHlkcmF0ZShpbmRleCkgewogIGNvbnN0IHsgaHlkcmF0ZWQsIHZhbHVlcywgZGVmZXJyZWQsIHBsdWdpbnMgfSA9IHRoaXM7CiAgbGV0IHJlc3VsdDsKICBjb25zdCBzdGFjayA9IFsKICAgIFsKICAgICAgaW5kZXgsCiAgICAgICh2KSA9PiB7CiAgICAgICAgcmVzdWx0ID0gdjsKICAgICAgfQogICAgXQogIF07CiAgbGV0IHBvc3RSdW4gPSBbXTsKICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkgewogICAgY29uc3QgW2luZGV4Miwgc2V0XSA9IHN0YWNrLnBvcCgpOwogICAgc3dpdGNoIChpbmRleDIpIHsKICAgICAgY2FzZSBVTkRFRklORUQ6CiAgICAgICAgc2V0KHZvaWQgMCk7CiAgICAgICAgY29udGludWU7CiAgICAgIGNhc2UgTlVMTDoKICAgICAgICBzZXQobnVsbCk7CiAgICAgICAgY29udGludWU7CiAgICAgIGNhc2UgTkFOOgogICAgICAgIHNldChOYU4pOwogICAgICAgIGNvbnRpbnVlOwogICAgICBjYXNlIFBPU0lUSVZFX0lORklOSVRZOgogICAgICAgIHNldChJbmZpbml0eSk7CiAgICAgICAgY29udGludWU7CiAgICAgIGNhc2UgTkVHQVRJVkVfSU5GSU5JVFk6CiAgICAgICAgc2V0KC1JbmZpbml0eSk7CiAgICAgICAgY29udGludWU7CiAgICAgIGNhc2UgTkVHQVRJVkVfWkVSTzoKICAgICAgICBzZXQoLTApOwogICAgICAgIGNvbnRpbnVlOwogICAgfQogICAgaWYgKGh5ZHJhdGVkW2luZGV4Ml0pIHsKICAgICAgc2V0KGh5ZHJhdGVkW2luZGV4Ml0pOwogICAgICBjb250aW51ZTsKICAgIH0KICAgIGNvbnN0IHZhbHVlID0gdmFsdWVzW2luZGV4Ml07CiAgICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gIm9iamVjdCIpIHsKICAgICAgaHlkcmF0ZWRbaW5kZXgyXSA9IHZhbHVlOwogICAgICBzZXQodmFsdWUpOwogICAgICBjb250aW51ZTsKICAgIH0KICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgewogICAgICBpZiAodHlwZW9mIHZhbHVlWzBdID09PSAic3RyaW5nIikgewogICAgICAgIGNvbnN0IFt0eXBlLCBiLCBjXSA9IHZhbHVlOwogICAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgY2FzZSBUWVBFX0RBVEU6CiAgICAgICAgICAgIHNldChoeWRyYXRlZFtpbmRleDJdID0gbmV3IERhdGUoYikpOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIGNhc2UgVFlQRV9VUkw6CiAgICAgICAgICAgIHNldChoeWRyYXRlZFtpbmRleDJdID0gbmV3IFVSTChiKSk7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgY2FzZSBUWVBFX0JJR0lOVDoKICAgICAgICAgICAgc2V0KGh5ZHJhdGVkW2luZGV4Ml0gPSBCaWdJbnQoYikpOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIGNhc2UgVFlQRV9SRUdFWFA6CiAgICAgICAgICAgIHNldChoeWRyYXRlZFtpbmRleDJdID0gbmV3IFJlZ0V4cChiLCBjKSk7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgY2FzZSBUWVBFX1NZTUJPTDoKICAgICAgICAgICAgc2V0KGh5ZHJhdGVkW2luZGV4Ml0gPSBTeW1ib2wuZm9yKGIpKTsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICBjYXNlIFRZUEVfU0VUOgogICAgICAgICAgICBjb25zdCBuZXdTZXQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogICAgICAgICAgICBoeWRyYXRlZFtpbmRleDJdID0gbmV3U2V0OwogICAgICAgICAgICBmb3IgKGxldCBpID0gdmFsdWUubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkKICAgICAgICAgICAgICBzdGFjay5wdXNoKFsKICAgICAgICAgICAgICAgIHZhbHVlW2ldLAogICAgICAgICAgICAgICAgKHYpID0+IHsKICAgICAgICAgICAgICAgICAgbmV3U2V0LmFkZCh2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgc2V0KG5ld1NldCk7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgY2FzZSBUWVBFX01BUDoKICAgICAgICAgICAgY29uc3QgbWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICAgICAgICAgICAgaHlkcmF0ZWRbaW5kZXgyXSA9IG1hcDsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IHZhbHVlLmxlbmd0aCAtIDI7IGkgPiAwOyBpIC09IDIpIHsKICAgICAgICAgICAgICBjb25zdCByID0gW107CiAgICAgICAgICAgICAgc3RhY2sucHVzaChbCiAgICAgICAgICAgICAgICB2YWx1ZVtpICsgMV0sCiAgICAgICAgICAgICAgICAodikgPT4gewogICAgICAgICAgICAgICAgICByWzFdID0gdjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgICBzdGFjay5wdXNoKFsKICAgICAgICAgICAgICAgIHZhbHVlW2ldLAogICAgICAgICAgICAgICAgKGspID0+IHsKICAgICAgICAgICAgICAgICAgclswXSA9IGs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgICAgcG9zdFJ1bi5wdXNoKCgpID0+IHsKICAgICAgICAgICAgICAgIG1hcC5zZXQoclswXSwgclsxXSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2V0KG1hcCk7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgY2FzZSBUWVBFX05VTExfT0JKRUNUOgogICAgICAgICAgICBjb25zdCBvYmogPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgICAgICAgaHlkcmF0ZWRbaW5kZXgyXSA9IG9iajsKICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoYikucmV2ZXJzZSgpKSB7CiAgICAgICAgICAgICAgY29uc3QgciA9IFtdOwogICAgICAgICAgICAgIHN0YWNrLnB1c2goWwogICAgICAgICAgICAgICAgYltrZXldLAogICAgICAgICAgICAgICAgKHYpID0+IHsKICAgICAgICAgICAgICAgICAgclsxXSA9IHY7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgICAgc3RhY2sucHVzaChbCiAgICAgICAgICAgICAgICBOdW1iZXIoa2V5LnNsaWNlKDEpKSwKICAgICAgICAgICAgICAgIChrKSA9PiB7CiAgICAgICAgICAgICAgICAgIHJbMF0gPSBrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgIHBvc3RSdW4ucHVzaCgoKSA9PiB7CiAgICAgICAgICAgICAgICBvYmpbclswXV0gPSByWzFdOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNldChvYmopOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIGNhc2UgVFlQRV9QUk9NSVNFOgogICAgICAgICAgICBpZiAoaHlkcmF0ZWRbYl0pIHsKICAgICAgICAgICAgICBzZXQoaHlkcmF0ZWRbaW5kZXgyXSA9IGh5ZHJhdGVkW2JdKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjb25zdCBkID0gbmV3IERlZmVycmVkMigpOwogICAgICAgICAgICAgIGRlZmVycmVkW2JdID0gZDsKICAgICAgICAgICAgICBzZXQoaHlkcmF0ZWRbaW5kZXgyXSA9IGQucHJvbWlzZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICBjYXNlIFRZUEVfRVJST1I6CiAgICAgICAgICAgIGNvbnN0IFssIG1lc3NhZ2UsIGVycm9yVHlwZV0gPSB2YWx1ZTsKICAgICAgICAgICAgbGV0IGVycm9yID0gZXJyb3JUeXBlICYmIGdsb2JhbE9iaiAmJiBnbG9iYWxPYmpbZXJyb3JUeXBlXSA/IG5ldyBnbG9iYWxPYmpbZXJyb3JUeXBlXShtZXNzYWdlKSA6IG5ldyBFcnJvcihtZXNzYWdlKTsKICAgICAgICAgICAgaHlkcmF0ZWRbaW5kZXgyXSA9IGVycm9yOwogICAgICAgICAgICBzZXQoZXJyb3IpOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIGNhc2UgVFlQRV9QUkVWSU9VU19SRVNPTFZFRDoKICAgICAgICAgICAgc2V0KGh5ZHJhdGVkW2luZGV4Ml0gPSBoeWRyYXRlZFtiXSk7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocGx1Z2lucykpIHsKICAgICAgICAgICAgICBjb25zdCByID0gW107CiAgICAgICAgICAgICAgY29uc3QgdmFscyA9IHZhbHVlLnNsaWNlKDEpOwogICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFscy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgY29uc3QgdiA9IHZhbHNbaV07CiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKFsKICAgICAgICAgICAgICAgICAgdiwKICAgICAgICAgICAgICAgICAgKHYyKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgcltpXSA9IHYyOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcG9zdFJ1bi5wdXNoKCgpID0+IHsKICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGx1Z2luIG9mIHBsdWdpbnMpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0MiA9IHBsdWdpbih2YWx1ZVswXSwgLi4ucik7CiAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQyKSB7CiAgICAgICAgICAgICAgICAgICAgc2V0KGh5ZHJhdGVkW2luZGV4Ml0gPSByZXN1bHQyLnZhbHVlKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcigpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcigpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBhcnJheSA9IFtdOwogICAgICAgIGh5ZHJhdGVkW2luZGV4Ml0gPSBhcnJheTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBjb25zdCBuID0gdmFsdWVbaV07CiAgICAgICAgICBpZiAobiAhPT0gSE9MRSkgewogICAgICAgICAgICBzdGFjay5wdXNoKFsKICAgICAgICAgICAgICBuLAogICAgICAgICAgICAgICh2KSA9PiB7CiAgICAgICAgICAgICAgICBhcnJheVtpXSA9IHY7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBdKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2V0KGFycmF5KTsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgY29uc3Qgb2JqZWN0ID0ge307CiAgICAgIGh5ZHJhdGVkW2luZGV4Ml0gPSBvYmplY3Q7CiAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHZhbHVlKS5yZXZlcnNlKCkpIHsKICAgICAgICBjb25zdCByID0gW107CiAgICAgICAgc3RhY2sucHVzaChbCiAgICAgICAgICB2YWx1ZVtrZXldLAogICAgICAgICAgKHYpID0+IHsKICAgICAgICAgICAgclsxXSA9IHY7CiAgICAgICAgICB9CiAgICAgICAgXSk7CiAgICAgICAgc3RhY2sucHVzaChbCiAgICAgICAgICBOdW1iZXIoa2V5LnNsaWNlKDEpKSwKICAgICAgICAgIChrKSA9PiB7CiAgICAgICAgICAgIHJbMF0gPSBrOwogICAgICAgICAgfQogICAgICAgIF0pOwogICAgICAgIHBvc3RSdW4ucHVzaCgoKSA9PiB7CiAgICAgICAgICBvYmplY3RbclswXV0gPSByWzFdOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHNldChvYmplY3QpOwogICAgICBjb250aW51ZTsKICAgIH0KICB9CiAgd2hpbGUgKHBvc3RSdW4ubGVuZ3RoID4gMCkgewogICAgcG9zdFJ1bi5wb3AoKSgpOwogIH0KICByZXR1cm4gcmVzdWx0Owp9CmFzeW5jIGZ1bmN0aW9uIGRlY29kZShyZWFkYWJsZSwgb3B0aW9ucykgewogIGNvbnN0IHsgcGx1Z2lucyB9ID0gb3B0aW9ucyA/PyB7fTsKICBjb25zdCBkb25lID0gbmV3IERlZmVycmVkMigpOwogIGNvbnN0IHJlYWRlciA9IHJlYWRhYmxlLnBpcGVUaHJvdWdoKGNyZWF0ZUxpbmVTcGxpdHRpbmdUcmFuc2Zvcm0oKSkuZ2V0UmVhZGVyKCk7CiAgY29uc3QgZGVjb2RlciA9IHsKICAgIHZhbHVlczogW10sCiAgICBoeWRyYXRlZDogW10sCiAgICBkZWZlcnJlZDoge30sCiAgICBwbHVnaW5zCiAgfTsKICBjb25zdCBkZWNvZGVkID0gYXdhaXQgZGVjb2RlSW5pdGlhbC5jYWxsKGRlY29kZXIsIHJlYWRlcik7CiAgbGV0IGRvbmVQcm9taXNlID0gZG9uZS5wcm9taXNlOwogIGlmIChkZWNvZGVkLmRvbmUpIHsKICAgIGRvbmUucmVzb2x2ZSgpOwogIH0gZWxzZSB7CiAgICBkb25lUHJvbWlzZSA9IGRlY29kZURlZmVycmVkLmNhbGwoZGVjb2RlciwgcmVhZGVyKS50aGVuKGRvbmUucmVzb2x2ZSkuY2F0Y2goKHJlYXNvbikgPT4gewogICAgICBmb3IgKGNvbnN0IGRlZmVycmVkIG9mIE9iamVjdC52YWx1ZXMoZGVjb2Rlci5kZWZlcnJlZCkpIHsKICAgICAgICBkZWZlcnJlZC5yZWplY3QocmVhc29uKTsKICAgICAgfQogICAgICBkb25lLnJlamVjdChyZWFzb24pOwogICAgfSk7CiAgfQogIHJldHVybiB7CiAgICBkb25lOiBkb25lUHJvbWlzZS50aGVuKCgpID0+IHJlYWRlci5jbG9zZWQpLAogICAgdmFsdWU6IGRlY29kZWQudmFsdWUKICB9Owp9CmFzeW5jIGZ1bmN0aW9uIGRlY29kZUluaXRpYWwocmVhZGVyKSB7CiAgY29uc3QgcmVhZCA9IGF3YWl0IHJlYWRlci5yZWFkKCk7CiAgaWYgKCFyZWFkLnZhbHVlKSB7CiAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoKTsKICB9CiAgbGV0IGxpbmU7CiAgdHJ5IHsKICAgIGxpbmUgPSBKU09OLnBhcnNlKHJlYWQudmFsdWUpOwogIH0gY2F0Y2ggKHJlYXNvbikgewogICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKCk7CiAgfQogIHJldHVybiB7CiAgICBkb25lOiByZWFkLmRvbmUsCiAgICB2YWx1ZTogdW5mbGF0dGVuLmNhbGwodGhpcywgbGluZSkKICB9Owp9CmFzeW5jIGZ1bmN0aW9uIGRlY29kZURlZmVycmVkKHJlYWRlcikgewogIGxldCByZWFkID0gYXdhaXQgcmVhZGVyLnJlYWQoKTsKICB3aGlsZSAoIXJlYWQuZG9uZSkgewogICAgaWYgKCFyZWFkLnZhbHVlKSBjb250aW51ZTsKICAgIGNvbnN0IGxpbmUgPSByZWFkLnZhbHVlOwogICAgc3dpdGNoIChsaW5lWzBdKSB7CiAgICAgIGNhc2UgVFlQRV9QUk9NSVNFOiB7CiAgICAgICAgY29uc3QgY29sb25JbmRleCA9IGxpbmUuaW5kZXhPZigiOiIpOwogICAgICAgIGNvbnN0IGRlZmVycmVkSWQgPSBOdW1iZXIobGluZS5zbGljZSgxLCBjb2xvbkluZGV4KSk7CiAgICAgICAgY29uc3QgZGVmZXJyZWQgPSB0aGlzLmRlZmVycmVkW2RlZmVycmVkSWRdOwogICAgICAgIGlmICghZGVmZXJyZWQpIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRGVmZXJyZWQgSUQgJHtkZWZlcnJlZElkfSBub3QgZm91bmQgaW4gc3RyZWFtYCk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IGxpbmVEYXRhID0gbGluZS5zbGljZShjb2xvbkluZGV4ICsgMSk7CiAgICAgICAgbGV0IGpzb25MaW5lOwogICAgICAgIHRyeSB7CiAgICAgICAgICBqc29uTGluZSA9IEpTT04ucGFyc2UobGluZURhdGEpOwogICAgICAgIH0gY2F0Y2ggKHJlYXNvbikgewogICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKCk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IHZhbHVlID0gdW5mbGF0dGVuLmNhbGwodGhpcywganNvbkxpbmUpOwogICAgICAgIGRlZmVycmVkLnJlc29sdmUodmFsdWUpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGNhc2UgVFlQRV9FUlJPUjogewogICAgICAgIGNvbnN0IGNvbG9uSW5kZXggPSBsaW5lLmluZGV4T2YoIjoiKTsKICAgICAgICBjb25zdCBkZWZlcnJlZElkID0gTnVtYmVyKGxpbmUuc2xpY2UoMSwgY29sb25JbmRleCkpOwogICAgICAgIGNvbnN0IGRlZmVycmVkID0gdGhpcy5kZWZlcnJlZFtkZWZlcnJlZElkXTsKICAgICAgICBpZiAoIWRlZmVycmVkKSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERlZmVycmVkIElEICR7ZGVmZXJyZWRJZH0gbm90IGZvdW5kIGluIHN0cmVhbWApOwogICAgICAgIH0KICAgICAgICBjb25zdCBsaW5lRGF0YSA9IGxpbmUuc2xpY2UoY29sb25JbmRleCArIDEpOwogICAgICAgIGxldCBqc29uTGluZTsKICAgICAgICB0cnkgewogICAgICAgICAganNvbkxpbmUgPSBKU09OLnBhcnNlKGxpbmVEYXRhKTsKICAgICAgICB9IGNhdGNoIChyZWFzb24pIHsKICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcigpOwogICAgICAgIH0KICAgICAgICBjb25zdCB2YWx1ZSA9IHVuZmxhdHRlbi5jYWxsKHRoaXMsIGpzb25MaW5lKTsKICAgICAgICBkZWZlcnJlZC5yZWplY3QodmFsdWUpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKCk7CiAgICB9CiAgICByZWFkID0gYXdhaXQgcmVhZGVyLnJlYWQoKTsKICB9Cn0KZnVuY3Rpb24gZW5jb2RlKGlucHV0LCBvcHRpb25zKSB7CiAgY29uc3QgeyBwbHVnaW5zLCBwb3N0UGx1Z2lucywgc2lnbmFsIH0gPSBvcHRpb25zID8/IHt9OwogIGNvbnN0IGVuY29kZXIzID0gewogICAgZGVmZXJyZWQ6IHt9LAogICAgaW5kZXg6IDAsCiAgICBpbmRpY2VzOiAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpLAogICAgc3RyaW5naWZpZWQ6IFtdLAogICAgcGx1Z2lucywKICAgIHBvc3RQbHVnaW5zLAogICAgc2lnbmFsCiAgfTsKICBjb25zdCB0ZXh0RW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpOwogIGxldCBsYXN0U2VudEluZGV4ID0gMDsKICBjb25zdCByZWFkYWJsZSA9IG5ldyBSZWFkYWJsZVN0cmVhbSh7CiAgICBhc3luYyBzdGFydChjb250cm9sbGVyKSB7CiAgICAgIGNvbnN0IGlkID0gZmxhdHRlbi5jYWxsKGVuY29kZXIzLCBpbnB1dCk7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGlkKSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiVGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuIik7CiAgICAgIH0KICAgICAgaWYgKGlkIDwgMCkgewogICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh0ZXh0RW5jb2Rlci5lbmNvZGUoYCR7aWR9CmApKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb250cm9sbGVyLmVucXVldWUoCiAgICAgICAgICB0ZXh0RW5jb2Rlci5lbmNvZGUoYFske2VuY29kZXIzLnN0cmluZ2lmaWVkLmpvaW4oIiwiKX1dCmApCiAgICAgICAgKTsKICAgICAgICBsYXN0U2VudEluZGV4ID0gZW5jb2RlcjMuc3RyaW5naWZpZWQubGVuZ3RoIC0gMTsKICAgICAgfQogICAgICBjb25zdCBzZWVuUHJvbWlzZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtTZXQoKTsKICAgICAgaWYgKE9iamVjdC5rZXlzKGVuY29kZXIzLmRlZmVycmVkKS5sZW5ndGgpIHsKICAgICAgICBsZXQgcmFjZURvbmU7CiAgICAgICAgY29uc3QgcmFjZVByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgICByYWNlRG9uZSA9IHJlc29sdmU7CiAgICAgICAgICBpZiAoc2lnbmFsKSB7CiAgICAgICAgICAgIGNvbnN0IHJlamVjdFByb21pc2UgPSAoKSA9PiByZWplY3Qoc2lnbmFsLnJlYXNvbiB8fCBuZXcgRXJyb3IoIlNpZ25hbCB3YXMgYWJvcnRlZC4iKSk7CiAgICAgICAgICAgIGlmIChzaWduYWwuYWJvcnRlZCkgewogICAgICAgICAgICAgIHJlamVjdFByb21pc2UoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcigiYWJvcnQiLCAoZXZlbnQpID0+IHsKICAgICAgICAgICAgICAgIHJlamVjdFByb21pc2UoKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHdoaWxlIChPYmplY3Qua2V5cyhlbmNvZGVyMy5kZWZlcnJlZCkubGVuZ3RoID4gMCkgewogICAgICAgICAgZm9yIChjb25zdCBbZGVmZXJyZWRJZCwgZGVmZXJyZWRdIG9mIE9iamVjdC5lbnRyaWVzKAogICAgICAgICAgICBlbmNvZGVyMy5kZWZlcnJlZAogICAgICAgICAgKSkgewogICAgICAgICAgICBpZiAoc2VlblByb21pc2VzLmhhcyhkZWZlcnJlZCkpIGNvbnRpbnVlOwogICAgICAgICAgICBzZWVuUHJvbWlzZXMuYWRkKAogICAgICAgICAgICAgIC8vIGJpb21lLWlnbm9yZSBsaW50L3N1c3BpY2lvdXMvbm9Bc3NpZ25JbkV4cHJlc3Npb25zOiA8ZXhwbGFuYXRpb24+CiAgICAgICAgICAgICAgZW5jb2RlcjMuZGVmZXJyZWRbTnVtYmVyKGRlZmVycmVkSWQpXSA9IFByb21pc2UucmFjZShbCiAgICAgICAgICAgICAgICByYWNlUHJvbWlzZSwKICAgICAgICAgICAgICAgIGRlZmVycmVkCiAgICAgICAgICAgICAgXSkudGhlbigKICAgICAgICAgICAgICAgIChyZXNvbHZlZCkgPT4gewogICAgICAgICAgICAgICAgICBjb25zdCBpZDIgPSBmbGF0dGVuLmNhbGwoZW5jb2RlcjMsIHJlc29sdmVkKTsKICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaWQyKSkgewogICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSgKICAgICAgICAgICAgICAgICAgICAgIHRleHRFbmNvZGVyLmVuY29kZSgKICAgICAgICAgICAgICAgICAgICAgICAgYCR7VFlQRV9QUk9NSVNFfSR7ZGVmZXJyZWRJZH06W1siJHtUWVBFX1BSRVZJT1VTX1JFU09MVkVEfSIsJHtpZDJbMF19XV0KYAogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgZW5jb2RlcjMuaW5kZXgrKzsKICAgICAgICAgICAgICAgICAgICBsYXN0U2VudEluZGV4Kys7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaWQyIDwgMCkgewogICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSgKICAgICAgICAgICAgICAgICAgICAgIHRleHRFbmNvZGVyLmVuY29kZSgKICAgICAgICAgICAgICAgICAgICAgICAgYCR7VFlQRV9QUk9NSVNFfSR7ZGVmZXJyZWRJZH06JHtpZDJ9CmAKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IGVuY29kZXIzLnN0cmluZ2lmaWVkLnNsaWNlKGxhc3RTZW50SW5kZXggKyAxKS5qb2luKCIsIik7CiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKAogICAgICAgICAgICAgICAgICAgICAgdGV4dEVuY29kZXIuZW5jb2RlKAogICAgICAgICAgICAgICAgICAgICAgICBgJHtUWVBFX1BST01JU0V9JHtkZWZlcnJlZElkfTpbJHt2YWx1ZXN9XQpgCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICBsYXN0U2VudEluZGV4ID0gZW5jb2RlcjMuc3RyaW5naWZpZWQubGVuZ3RoIC0gMTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIChyZWFzb24pID0+IHsKICAgICAgICAgICAgICAgICAgaWYgKCFyZWFzb24gfHwgdHlwZW9mIHJlYXNvbiAhPT0gIm9iamVjdCIgfHwgIShyZWFzb24gaW5zdGFuY2VvZiBFcnJvcikpIHsKICAgICAgICAgICAgICAgICAgICByZWFzb24gPSBuZXcgRXJyb3IoIkFuIHVua25vd24gZXJyb3Igb2NjdXJyZWQiKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBjb25zdCBpZDIgPSBmbGF0dGVuLmNhbGwoZW5jb2RlcjMsIHJlYXNvbik7CiAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGlkMikpIHsKICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoCiAgICAgICAgICAgICAgICAgICAgICB0ZXh0RW5jb2Rlci5lbmNvZGUoCiAgICAgICAgICAgICAgICAgICAgICAgIGAke1RZUEVfRVJST1J9JHtkZWZlcnJlZElkfTpbWyIke1RZUEVfUFJFVklPVVNfUkVTT0xWRUR9Iiwke2lkMlswXX1dXQpgCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICBlbmNvZGVyMy5pbmRleCsrOwogICAgICAgICAgICAgICAgICAgIGxhc3RTZW50SW5kZXgrKzsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpZDIgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKAogICAgICAgICAgICAgICAgICAgICAgdGV4dEVuY29kZXIuZW5jb2RlKAogICAgICAgICAgICAgICAgICAgICAgICBgJHtUWVBFX0VSUk9SfSR7ZGVmZXJyZWRJZH06JHtpZDJ9CmAKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IGVuY29kZXIzLnN0cmluZ2lmaWVkLnNsaWNlKGxhc3RTZW50SW5kZXggKyAxKS5qb2luKCIsIik7CiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKAogICAgICAgICAgICAgICAgICAgICAgdGV4dEVuY29kZXIuZW5jb2RlKAogICAgICAgICAgICAgICAgICAgICAgICBgJHtUWVBFX0VSUk9SfSR7ZGVmZXJyZWRJZH06WyR7dmFsdWVzfV0KYAogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgbGFzdFNlbnRJbmRleCA9IGVuY29kZXIzLnN0cmluZ2lmaWVkLmxlbmd0aCAtIDE7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApLmZpbmFsbHkoKCkgPT4gewogICAgICAgICAgICAgICAgZGVsZXRlIGVuY29kZXIzLmRlZmVycmVkW051bWJlcihkZWZlcnJlZElkKV07CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGF3YWl0IFByb21pc2UucmFjZShPYmplY3QudmFsdWVzKGVuY29kZXIzLmRlZmVycmVkKSk7CiAgICAgICAgfQogICAgICAgIHJhY2VEb25lKCk7CiAgICAgIH0KICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoT2JqZWN0LnZhbHVlcyhlbmNvZGVyMy5kZWZlcnJlZCkpOwogICAgICBjb250cm9sbGVyLmNsb3NlKCk7CiAgICB9CiAgfSk7CiAgcmV0dXJuIHJlYWRhYmxlOwp9CmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVJlcXVlc3RJbml0KHJlcXVlc3QpIHsKICBsZXQgaW5pdCA9IHsgc2lnbmFsOiByZXF1ZXN0LnNpZ25hbCB9OwogIGlmIChyZXF1ZXN0Lm1ldGhvZCAhPT0gIkdFVCIpIHsKICAgIGluaXQubWV0aG9kID0gcmVxdWVzdC5tZXRob2Q7CiAgICBsZXQgY29udGVudFR5cGUgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCJDb250ZW50LVR5cGUiKTsKICAgIGlmIChjb250ZW50VHlwZSAmJiAvXGJhcHBsaWNhdGlvblwvanNvblxiLy50ZXN0KGNvbnRlbnRUeXBlKSkgewogICAgICBpbml0LmhlYWRlcnMgPSB7ICJDb250ZW50LVR5cGUiOiBjb250ZW50VHlwZSB9OwogICAgICBpbml0LmJvZHkgPSBKU09OLnN0cmluZ2lmeShhd2FpdCByZXF1ZXN0Lmpzb24oKSk7CiAgICB9IGVsc2UgaWYgKGNvbnRlbnRUeXBlICYmIC9cYnRleHRcL3BsYWluXGIvLnRlc3QoY29udGVudFR5cGUpKSB7CiAgICAgIGluaXQuaGVhZGVycyA9IHsgIkNvbnRlbnQtVHlwZSI6IGNvbnRlbnRUeXBlIH07CiAgICAgIGluaXQuYm9keSA9IGF3YWl0IHJlcXVlc3QudGV4dCgpOwogICAgfSBlbHNlIGlmIChjb250ZW50VHlwZSAmJiAvXGJhcHBsaWNhdGlvblwveC13d3ctZm9ybS11cmxlbmNvZGVkXGIvLnRlc3QoY29udGVudFR5cGUpKSB7CiAgICAgIGluaXQuYm9keSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoYXdhaXQgcmVxdWVzdC50ZXh0KCkpOwogICAgfSBlbHNlIHsKICAgICAgaW5pdC5ib2R5ID0gYXdhaXQgcmVxdWVzdC5mb3JtRGF0YSgpOwogICAgfQogIH0KICByZXR1cm4gaW5pdDsKfQp2YXIgRVNDQVBFX0xPT0tVUCA9IHsKICAiJiI6ICJcXHUwMDI2IiwKICAiPiI6ICJcXHUwMDNlIiwKICAiPCI6ICJcXHUwMDNjIiwKICAiXHUyMDI4IjogIlxcdTIwMjgiLAogICJcdTIwMjkiOiAiXFx1MjAyOSIKfTsKdmFyIEVTQ0FQRV9SRUdFWCA9IC9bJj48XHUyMDI4XHUyMDI5XS9nOwpmdW5jdGlvbiBlc2NhcGVIdG1sKGh0bWwpIHsKICByZXR1cm4gaHRtbC5yZXBsYWNlKEVTQ0FQRV9SRUdFWCwgKG1hdGNoKSA9PiBFU0NBUEVfTE9PS1VQW21hdGNoXSk7Cn0KZnVuY3Rpb24gaW52YXJpYW50Mih2YWx1ZSwgbWVzc2FnZSkgewogIGlmICh2YWx1ZSA9PT0gZmFsc2UgfHwgdmFsdWUgPT09IG51bGwgfHwgdHlwZW9mIHZhbHVlID09PSAidW5kZWZpbmVkIikgewogICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpOwogIH0KfQp2YXIgU2luZ2xlRmV0Y2hSZWRpcmVjdFN5bWJvbCA9IFN5bWJvbCgiU2luZ2xlRmV0Y2hSZWRpcmVjdCIpOwp2YXIgU2luZ2xlRmV0Y2hOb1Jlc3VsdEVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7Cn07CnZhciBTSU5HTEVfRkVUQ0hfUkVESVJFQ1RfU1RBVFVTID0gMjAyOwp2YXIgTk9fQk9EWV9TVEFUVVNfQ09ERVMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbMTAwLCAxMDEsIDIwNCwgMjA1XSk7CmZ1bmN0aW9uIFN0cmVhbVRyYW5zZmVyKHsKICBjb250ZXh0LAogIGlkZW50aWZpZXIsCiAgcmVhZGVyLAogIHRleHREZWNvZGVyLAogIG5vbmNlCn0pIHsKICBpZiAoIWNvbnRleHQucmVuZGVyTWV0YSB8fCAhY29udGV4dC5yZW5kZXJNZXRhLmRpZFJlbmRlclNjcmlwdHMpIHsKICAgIHJldHVybiBudWxsOwogIH0KICBpZiAoIWNvbnRleHQucmVuZGVyTWV0YS5zdHJlYW1DYWNoZSkgewogICAgY29udGV4dC5yZW5kZXJNZXRhLnN0cmVhbUNhY2hlID0ge307CiAgfQogIGxldCB7IHN0cmVhbUNhY2hlIH0gPSBjb250ZXh0LnJlbmRlck1ldGE7CiAgbGV0IHByb21pc2UgPSBzdHJlYW1DYWNoZVtpZGVudGlmaWVyXTsKICBpZiAoIXByb21pc2UpIHsKICAgIHByb21pc2UgPSBzdHJlYW1DYWNoZVtpZGVudGlmaWVyXSA9IHJlYWRlci5yZWFkKCkudGhlbigocmVzdWx0KSA9PiB7CiAgICAgIHN0cmVhbUNhY2hlW2lkZW50aWZpZXJdLnJlc3VsdCA9IHsKICAgICAgICBkb25lOiByZXN1bHQuZG9uZSwKICAgICAgICB2YWx1ZTogdGV4dERlY29kZXIuZGVjb2RlKHJlc3VsdC52YWx1ZSwgeyBzdHJlYW06IHRydWUgfSkKICAgICAgfTsKICAgIH0pLmNhdGNoKChlKSA9PiB7CiAgICAgIHN0cmVhbUNhY2hlW2lkZW50aWZpZXJdLmVycm9yID0gZTsKICAgIH0pOwogIH0KICBpZiAocHJvbWlzZS5lcnJvcikgewogICAgdGhyb3cgcHJvbWlzZS5lcnJvcjsKICB9CiAgaWYgKHByb21pc2UucmVzdWx0ID09PSB2b2lkIDApIHsKICAgIHRocm93IHByb21pc2U7CiAgfQogIGxldCB7IGRvbmUsIHZhbHVlIH0gPSBwcm9taXNlLnJlc3VsdDsKICBsZXQgc2NyaXB0VGFnID0gdmFsdWUgPyBSZWFjdDQuY3JlYXRlRWxlbWVudCgKICAgICJzY3JpcHQiLAogICAgewogICAgICBub25jZSwKICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHsKICAgICAgICBfX2h0bWw6IGB3aW5kb3cuX19yZWFjdFJvdXRlckNvbnRleHQuc3RyZWFtQ29udHJvbGxlci5lbnF1ZXVlKCR7ZXNjYXBlSHRtbCgKICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHZhbHVlKQogICAgICAgICl9KTtgCiAgICAgIH0KICAgIH0KICApIDogbnVsbDsKICBpZiAoZG9uZSkgewogICAgcmV0dXJuIFJlYWN0NC5jcmVhdGVFbGVtZW50KFJlYWN0NC5GcmFnbWVudCwgbnVsbCwgc2NyaXB0VGFnLCBSZWFjdDQuY3JlYXRlRWxlbWVudCgKICAgICAgInNjcmlwdCIsCiAgICAgIHsKICAgICAgICBub25jZSwKICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTDogewogICAgICAgICAgX19odG1sOiBgd2luZG93Ll9fcmVhY3RSb3V0ZXJDb250ZXh0LnN0cmVhbUNvbnRyb2xsZXIuY2xvc2UoKTtgCiAgICAgICAgfQogICAgICB9CiAgICApKTsKICB9IGVsc2UgewogICAgcmV0dXJuIFJlYWN0NC5jcmVhdGVFbGVtZW50KFJlYWN0NC5GcmFnbWVudCwgbnVsbCwgc2NyaXB0VGFnLCBSZWFjdDQuY3JlYXRlRWxlbWVudChSZWFjdDQuU3VzcGVuc2UsIG51bGwsIFJlYWN0NC5jcmVhdGVFbGVtZW50KAogICAgICBTdHJlYW1UcmFuc2ZlciwKICAgICAgewogICAgICAgIGNvbnRleHQsCiAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllciArIDEsCiAgICAgICAgcmVhZGVyLAogICAgICAgIHRleHREZWNvZGVyLAogICAgICAgIG5vbmNlCiAgICAgIH0KICAgICkpKTsKICB9Cn0KZnVuY3Rpb24gZ2V0VHVyYm9TdHJlYW1TaW5nbGVGZXRjaERhdGFTdHJhdGVneShnZXRSb3V0ZXIsIG1hbmlmZXN0LCByb3V0ZU1vZHVsZXMsIHNzciwgYmFzZW5hbWUpIHsKICBsZXQgZGF0YVN0cmF0ZWd5ID0gZ2V0U2luZ2xlRmV0Y2hEYXRhU3RyYXRlZ3lJbXBsKAogICAgZ2V0Um91dGVyLAogICAgKG1hdGNoKSA9PiB7CiAgICAgIGxldCBtYW5pZmVzdFJvdXRlID0gbWFuaWZlc3Qucm91dGVzW21hdGNoLnJvdXRlLmlkXTsKICAgICAgaW52YXJpYW50MihtYW5pZmVzdFJvdXRlLCAiUm91dGUgbm90IGZvdW5kIGluIG1hbmlmZXN0Iik7CiAgICAgIGxldCByb3V0ZU1vZHVsZSA9IHJvdXRlTW9kdWxlc1ttYXRjaC5yb3V0ZS5pZF07CiAgICAgIHJldHVybiB7CiAgICAgICAgaGFzTG9hZGVyOiBtYW5pZmVzdFJvdXRlLmhhc0xvYWRlciwKICAgICAgICBoYXNDbGllbnRMb2FkZXI6IG1hbmlmZXN0Um91dGUuaGFzQ2xpZW50TG9hZGVyLAogICAgICAgIGhhc1Nob3VsZFJldmFsaWRhdGU6IEJvb2xlYW4ocm91dGVNb2R1bGUgPT0gbnVsbCA/IHZvaWQgMCA6IHJvdXRlTW9kdWxlLnNob3VsZFJldmFsaWRhdGUpCiAgICAgIH07CiAgICB9LAogICAgZmV0Y2hBbmREZWNvZGVWaWFUdXJib1N0cmVhbSwKICAgIHNzciwKICAgIGJhc2VuYW1lCiAgKTsKICByZXR1cm4gYXN5bmMgKGFyZ3MpID0+IGFyZ3MucnVuQ2xpZW50TWlkZGxld2FyZShkYXRhU3RyYXRlZ3kpOwp9CmZ1bmN0aW9uIGdldFNpbmdsZUZldGNoRGF0YVN0cmF0ZWd5SW1wbChnZXRSb3V0ZXIsIGdldFJvdXRlSW5mbywgZmV0Y2hBbmREZWNvZGUsIHNzciwgYmFzZW5hbWUsIHNob3VsZEFsbG93T3B0T3V0ID0gKCkgPT4gdHJ1ZSkgewogIHJldHVybiBhc3luYyAoYXJncykgPT4gewogICAgbGV0IHsgcmVxdWVzdCwgbWF0Y2hlcywgZmV0Y2hlcktleSB9ID0gYXJnczsKICAgIGxldCByb3V0ZXIyID0gZ2V0Um91dGVyKCk7CiAgICBpZiAocmVxdWVzdC5tZXRob2QgIT09ICJHRVQiKSB7CiAgICAgIHJldHVybiBzaW5nbGVGZXRjaEFjdGlvblN0cmF0ZWd5KGFyZ3MsIGZldGNoQW5kRGVjb2RlLCBiYXNlbmFtZSk7CiAgICB9CiAgICBsZXQgZm91bmRSZXZhbGlkYXRpbmdTZXJ2ZXJMb2FkZXIgPSBtYXRjaGVzLnNvbWUoKG0pID0+IHsKICAgICAgbGV0IHsgaGFzTG9hZGVyLCBoYXNDbGllbnRMb2FkZXIgfSA9IGdldFJvdXRlSW5mbyhtKTsKICAgICAgcmV0dXJuIG0udW5zdGFibGVfc2hvdWxkQ2FsbEhhbmRsZXIoKSAmJiBoYXNMb2FkZXIgJiYgIWhhc0NsaWVudExvYWRlcjsKICAgIH0pOwogICAgaWYgKCFzc3IgJiYgIWZvdW5kUmV2YWxpZGF0aW5nU2VydmVyTG9hZGVyKSB7CiAgICAgIHJldHVybiBub25Tc3JTdHJhdGVneShhcmdzLCBnZXRSb3V0ZUluZm8sIGZldGNoQW5kRGVjb2RlLCBiYXNlbmFtZSk7CiAgICB9CiAgICBpZiAoZmV0Y2hlcktleSkgewogICAgICByZXR1cm4gc2luZ2xlRmV0Y2hMb2FkZXJGZXRjaGVyU3RyYXRlZ3koYXJncywgZmV0Y2hBbmREZWNvZGUsIGJhc2VuYW1lKTsKICAgIH0KICAgIHJldHVybiBzaW5nbGVGZXRjaExvYWRlck5hdmlnYXRpb25TdHJhdGVneSgKICAgICAgYXJncywKICAgICAgcm91dGVyMiwKICAgICAgZ2V0Um91dGVJbmZvLAogICAgICBmZXRjaEFuZERlY29kZSwKICAgICAgc3NyLAogICAgICBiYXNlbmFtZSwKICAgICAgc2hvdWxkQWxsb3dPcHRPdXQKICAgICk7CiAgfTsKfQphc3luYyBmdW5jdGlvbiBzaW5nbGVGZXRjaEFjdGlvblN0cmF0ZWd5KGFyZ3MsIGZldGNoQW5kRGVjb2RlLCBiYXNlbmFtZSkgewogIGxldCBhY3Rpb25NYXRjaCA9IGFyZ3MubWF0Y2hlcy5maW5kKChtKSA9PiBtLnVuc3RhYmxlX3Nob3VsZENhbGxIYW5kbGVyKCkpOwogIGludmFyaWFudDIoYWN0aW9uTWF0Y2gsICJObyBhY3Rpb24gbWF0Y2ggZm91bmQiKTsKICBsZXQgYWN0aW9uU3RhdHVzID0gdm9pZCAwOwogIGxldCByZXN1bHQgPSBhd2FpdCBhY3Rpb25NYXRjaC5yZXNvbHZlKGFzeW5jIChoYW5kbGVyKSA9PiB7CiAgICBsZXQgcmVzdWx0MiA9IGF3YWl0IGhhbmRsZXIoYXN5bmMgKCkgPT4gewogICAgICBsZXQgeyBkYXRhOiBkYXRhMiwgc3RhdHVzIH0gPSBhd2FpdCBmZXRjaEFuZERlY29kZShhcmdzLCBiYXNlbmFtZSwgWwogICAgICAgIGFjdGlvbk1hdGNoLnJvdXRlLmlkCiAgICAgIF0pOwogICAgICBhY3Rpb25TdGF0dXMgPSBzdGF0dXM7CiAgICAgIHJldHVybiB1bndyYXBTaW5nbGVGZXRjaFJlc3VsdChkYXRhMiwgYWN0aW9uTWF0Y2gucm91dGUuaWQpOwogICAgfSk7CiAgICByZXR1cm4gcmVzdWx0MjsKICB9KTsKICBpZiAoaXNSZXNwb25zZShyZXN1bHQucmVzdWx0KSB8fCBpc1JvdXRlRXJyb3JSZXNwb25zZShyZXN1bHQucmVzdWx0KSB8fCBpc0RhdGFXaXRoUmVzcG9uc2VJbml0KHJlc3VsdC5yZXN1bHQpKSB7CiAgICByZXR1cm4geyBbYWN0aW9uTWF0Y2gucm91dGUuaWRdOiByZXN1bHQgfTsKICB9CiAgcmV0dXJuIHsKICAgIFthY3Rpb25NYXRjaC5yb3V0ZS5pZF06IHsKICAgICAgdHlwZTogcmVzdWx0LnR5cGUsCiAgICAgIHJlc3VsdDogZGF0YShyZXN1bHQucmVzdWx0LCBhY3Rpb25TdGF0dXMpCiAgICB9CiAgfTsKfQphc3luYyBmdW5jdGlvbiBub25Tc3JTdHJhdGVneShhcmdzLCBnZXRSb3V0ZUluZm8sIGZldGNoQW5kRGVjb2RlLCBiYXNlbmFtZSkgewogIGxldCBtYXRjaGVzVG9Mb2FkID0gYXJncy5tYXRjaGVzLmZpbHRlcigKICAgIChtKSA9PiBtLnVuc3RhYmxlX3Nob3VsZENhbGxIYW5kbGVyKCkKICApOwogIGxldCByZXN1bHRzID0ge307CiAgYXdhaXQgUHJvbWlzZS5hbGwoCiAgICBtYXRjaGVzVG9Mb2FkLm1hcCgKICAgICAgKG0pID0+IG0ucmVzb2x2ZShhc3luYyAoaGFuZGxlcikgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICBsZXQgeyBoYXNDbGllbnRMb2FkZXIgfSA9IGdldFJvdXRlSW5mbyhtKTsKICAgICAgICAgIGxldCByb3V0ZUlkID0gbS5yb3V0ZS5pZDsKICAgICAgICAgIGxldCByZXN1bHQgPSBoYXNDbGllbnRMb2FkZXIgPyBhd2FpdCBoYW5kbGVyKGFzeW5jICgpID0+IHsKICAgICAgICAgICAgbGV0IHsgZGF0YTogZGF0YTIgfSA9IGF3YWl0IGZldGNoQW5kRGVjb2RlKGFyZ3MsIGJhc2VuYW1lLCBbcm91dGVJZF0pOwogICAgICAgICAgICByZXR1cm4gdW53cmFwU2luZ2xlRmV0Y2hSZXN1bHQoZGF0YTIsIHJvdXRlSWQpOwogICAgICAgICAgfSkgOiBhd2FpdCBoYW5kbGVyKCk7CiAgICAgICAgICByZXN1bHRzW20ucm91dGUuaWRdID0geyB0eXBlOiAiZGF0YSIsIHJlc3VsdCB9OwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHJlc3VsdHNbbS5yb3V0ZS5pZF0gPSB7IHR5cGU6ICJlcnJvciIsIHJlc3VsdDogZSB9OwogICAgICAgIH0KICAgICAgfSkKICAgICkKICApOwogIHJldHVybiByZXN1bHRzOwp9CmFzeW5jIGZ1bmN0aW9uIHNpbmdsZUZldGNoTG9hZGVyTmF2aWdhdGlvblN0cmF0ZWd5KGFyZ3MsIHJvdXRlcjIsIGdldFJvdXRlSW5mbywgZmV0Y2hBbmREZWNvZGUsIHNzciwgYmFzZW5hbWUsIHNob3VsZEFsbG93T3B0T3V0ID0gKCkgPT4gdHJ1ZSkgewogIGxldCByb3V0ZXNQYXJhbXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogIGxldCBmb3VuZE9wdE91dFJvdXRlID0gZmFsc2U7CiAgbGV0IHJvdXRlRGZkcyA9IGFyZ3MubWF0Y2hlcy5tYXAoKCkgPT4gY3JlYXRlRGVmZXJyZWQyKCkpOwogIGxldCBzaW5nbGVGZXRjaERmZCA9IGNyZWF0ZURlZmVycmVkMigpOwogIGxldCByZXN1bHRzID0ge307CiAgbGV0IHJlc29sdmVQcm9taXNlID0gUHJvbWlzZS5hbGwoCiAgICBhcmdzLm1hdGNoZXMubWFwKAogICAgICBhc3luYyAobSwgaSkgPT4gbS5yZXNvbHZlKGFzeW5jIChoYW5kbGVyKSA9PiB7CiAgICAgICAgcm91dGVEZmRzW2ldLnJlc29sdmUoKTsKICAgICAgICBsZXQgcm91dGVJZCA9IG0ucm91dGUuaWQ7CiAgICAgICAgbGV0IHsgaGFzTG9hZGVyLCBoYXNDbGllbnRMb2FkZXIsIGhhc1Nob3VsZFJldmFsaWRhdGUgfSA9IGdldFJvdXRlSW5mbyhtKTsKICAgICAgICBsZXQgZGVmYXVsdFNob3VsZFJldmFsaWRhdGUgPSAhbS51bnN0YWJsZV9zaG91bGRSZXZhbGlkYXRlQXJncyB8fCBtLnVuc3RhYmxlX3Nob3VsZFJldmFsaWRhdGVBcmdzLmFjdGlvblN0YXR1cyA9PSBudWxsIHx8IG0udW5zdGFibGVfc2hvdWxkUmV2YWxpZGF0ZUFyZ3MuYWN0aW9uU3RhdHVzIDwgNDAwOwogICAgICAgIGxldCBzaG91bGRDYWxsID0gbS51bnN0YWJsZV9zaG91bGRDYWxsSGFuZGxlcihkZWZhdWx0U2hvdWxkUmV2YWxpZGF0ZSk7CiAgICAgICAgaWYgKCFzaG91bGRDYWxsKSB7CiAgICAgICAgICBmb3VuZE9wdE91dFJvdXRlIHx8IChmb3VuZE9wdE91dFJvdXRlID0gbS51bnN0YWJsZV9zaG91bGRSZXZhbGlkYXRlQXJncyAhPSBudWxsICYmIC8vIFRoaXMgaXMgYSByZXZhbGlkYXRpb24sCiAgICAgICAgICBoYXNMb2FkZXIgJiYgLy8gZm9yIGEgcm91dGUgd2l0aCBhIHNlcnZlciBsb2FkZXIsCiAgICAgICAgICBoYXNTaG91bGRSZXZhbGlkYXRlID09PSB0cnVlKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKHNob3VsZEFsbG93T3B0T3V0KG0pICYmIGhhc0NsaWVudExvYWRlcikgewogICAgICAgICAgaWYgKGhhc0xvYWRlcikgewogICAgICAgICAgICBmb3VuZE9wdE91dFJvdXRlID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKGFzeW5jICgpID0+IHsKICAgICAgICAgICAgICBsZXQgeyBkYXRhOiBkYXRhMiB9ID0gYXdhaXQgZmV0Y2hBbmREZWNvZGUoYXJncywgYmFzZW5hbWUsIFtyb3V0ZUlkXSk7CiAgICAgICAgICAgICAgcmV0dXJuIHVud3JhcFNpbmdsZUZldGNoUmVzdWx0KGRhdGEyLCByb3V0ZUlkKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJlc3VsdHNbcm91dGVJZF0gPSB7IHR5cGU6ICJkYXRhIiwgcmVzdWx0IH07CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHJlc3VsdHNbcm91dGVJZF0gPSB7IHR5cGU6ICJlcnJvciIsIHJlc3VsdDogZSB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoaGFzTG9hZGVyKSB7CiAgICAgICAgICByb3V0ZXNQYXJhbXMuYWRkKHJvdXRlSWQpOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIoYXN5bmMgKCkgPT4gewogICAgICAgICAgICBsZXQgZGF0YTIgPSBhd2FpdCBzaW5nbGVGZXRjaERmZC5wcm9taXNlOwogICAgICAgICAgICByZXR1cm4gdW53cmFwU2luZ2xlRmV0Y2hSZXN1bHQoZGF0YTIsIHJvdXRlSWQpOwogICAgICAgICAgfSk7CiAgICAgICAgICByZXN1bHRzW3JvdXRlSWRdID0geyB0eXBlOiAiZGF0YSIsIHJlc3VsdCB9OwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHJlc3VsdHNbcm91dGVJZF0gPSB7IHR5cGU6ICJlcnJvciIsIHJlc3VsdDogZSB9OwogICAgICAgIH0KICAgICAgfSkKICAgICkKICApOwogIGF3YWl0IFByb21pc2UuYWxsKHJvdXRlRGZkcy5tYXAoKGQpID0+IGQucHJvbWlzZSkpOwogIGxldCBpc0luaXRpYWxMb2FkID0gIXJvdXRlcjIuc3RhdGUuaW5pdGlhbGl6ZWQgJiYgcm91dGVyMi5zdGF0ZS5uYXZpZ2F0aW9uLnN0YXRlID09PSAiaWRsZSI7CiAgaWYgKChpc0luaXRpYWxMb2FkIHx8IHJvdXRlc1BhcmFtcy5zaXplID09PSAwKSAmJiAhd2luZG93Ll9fcmVhY3RSb3V0ZXJIZHJBY3RpdmUpIHsKICAgIHNpbmdsZUZldGNoRGZkLnJlc29sdmUoeyByb3V0ZXM6IHt9IH0pOwogIH0gZWxzZSB7CiAgICBsZXQgdGFyZ2V0Um91dGVzID0gc3NyICYmIGZvdW5kT3B0T3V0Um91dGUgJiYgcm91dGVzUGFyYW1zLnNpemUgPiAwID8gWy4uLnJvdXRlc1BhcmFtcy5rZXlzKCldIDogdm9pZCAwOwogICAgdHJ5IHsKICAgICAgbGV0IGRhdGEyID0gYXdhaXQgZmV0Y2hBbmREZWNvZGUoYXJncywgYmFzZW5hbWUsIHRhcmdldFJvdXRlcyk7CiAgICAgIHNpbmdsZUZldGNoRGZkLnJlc29sdmUoZGF0YTIuZGF0YSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHNpbmdsZUZldGNoRGZkLnJlamVjdChlKTsKICAgIH0KICB9CiAgYXdhaXQgcmVzb2x2ZVByb21pc2U7CiAgYXdhaXQgYnViYmxlTWlkZGxld2FyZUVycm9ycygKICAgIHNpbmdsZUZldGNoRGZkLnByb21pc2UsCiAgICBhcmdzLm1hdGNoZXMsCiAgICByb3V0ZXNQYXJhbXMsCiAgICByZXN1bHRzCiAgKTsKICByZXR1cm4gcmVzdWx0czsKfQphc3luYyBmdW5jdGlvbiBidWJibGVNaWRkbGV3YXJlRXJyb3JzKHNpbmdsZUZldGNoUHJvbWlzZSwgbWF0Y2hlcywgcm91dGVzUGFyYW1zLCByZXN1bHRzKSB7CiAgdmFyIF9hOwogIHRyeSB7CiAgICBsZXQgbWlkZGxld2FyZUVycm9yOwogICAgbGV0IGZldGNoZWREYXRhID0gYXdhaXQgc2luZ2xlRmV0Y2hQcm9taXNlOwogICAgaWYgKCJyb3V0ZXMiIGluIGZldGNoZWREYXRhKSB7CiAgICAgIGZvciAobGV0IG1hdGNoIG9mIG1hdGNoZXMpIHsKICAgICAgICBpZiAobWF0Y2gucm91dGUuaWQgaW4gZmV0Y2hlZERhdGEucm91dGVzKSB7CiAgICAgICAgICBsZXQgcm91dGVSZXN1bHQgPSBmZXRjaGVkRGF0YS5yb3V0ZXNbbWF0Y2gucm91dGUuaWRdOwogICAgICAgICAgaWYgKCJlcnJvciIgaW4gcm91dGVSZXN1bHQpIHsKICAgICAgICAgICAgbWlkZGxld2FyZUVycm9yID0gcm91dGVSZXN1bHQuZXJyb3I7CiAgICAgICAgICAgIGlmICgoKF9hID0gcmVzdWx0c1ttYXRjaC5yb3V0ZS5pZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYS5yZXN1bHQpID09IG51bGwpIHsKICAgICAgICAgICAgICByZXN1bHRzW21hdGNoLnJvdXRlLmlkXSA9IHsKICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICByZXN1bHQ6IG1pZGRsZXdhcmVFcnJvcgogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZiAobWlkZGxld2FyZUVycm9yICE9PSB2b2lkIDApIHsKICAgICAgQXJyYXkuZnJvbShyb3V0ZXNQYXJhbXMudmFsdWVzKCkpLmZvckVhY2goKHJvdXRlSWQpID0+IHsKICAgICAgICBpZiAocmVzdWx0c1tyb3V0ZUlkXS5yZXN1bHQgaW5zdGFuY2VvZiBTaW5nbGVGZXRjaE5vUmVzdWx0RXJyb3IpIHsKICAgICAgICAgIHJlc3VsdHNbcm91dGVJZF0ucmVzdWx0ID0gbWlkZGxld2FyZUVycm9yOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSBjYXRjaCAoZSkgewogIH0KfQphc3luYyBmdW5jdGlvbiBzaW5nbGVGZXRjaExvYWRlckZldGNoZXJTdHJhdGVneShhcmdzLCBmZXRjaEFuZERlY29kZSwgYmFzZW5hbWUpIHsKICBsZXQgZmV0Y2hlck1hdGNoID0gYXJncy5tYXRjaGVzLmZpbmQoKG0pID0+IG0udW5zdGFibGVfc2hvdWxkQ2FsbEhhbmRsZXIoKSk7CiAgaW52YXJpYW50MihmZXRjaGVyTWF0Y2gsICJObyBmZXRjaGVyIG1hdGNoIGZvdW5kIik7CiAgbGV0IHJvdXRlSWQgPSBmZXRjaGVyTWF0Y2gucm91dGUuaWQ7CiAgbGV0IHJlc3VsdCA9IGF3YWl0IGZldGNoZXJNYXRjaC5yZXNvbHZlKAogICAgYXN5bmMgKGhhbmRsZXIpID0+IGhhbmRsZXIoYXN5bmMgKCkgPT4gewogICAgICBsZXQgeyBkYXRhOiBkYXRhMiB9ID0gYXdhaXQgZmV0Y2hBbmREZWNvZGUoYXJncywgYmFzZW5hbWUsIFtyb3V0ZUlkXSk7CiAgICAgIHJldHVybiB1bndyYXBTaW5nbGVGZXRjaFJlc3VsdChkYXRhMiwgcm91dGVJZCk7CiAgICB9KQogICk7CiAgcmV0dXJuIHsgW2ZldGNoZXJNYXRjaC5yb3V0ZS5pZF06IHJlc3VsdCB9Owp9CmZ1bmN0aW9uIHN0cmlwSW5kZXhQYXJhbSh1cmwpIHsKICBsZXQgaW5kZXhWYWx1ZXMgPSB1cmwuc2VhcmNoUGFyYW1zLmdldEFsbCgiaW5kZXgiKTsKICB1cmwuc2VhcmNoUGFyYW1zLmRlbGV0ZSgiaW5kZXgiKTsKICBsZXQgaW5kZXhWYWx1ZXNUb0tlZXAgPSBbXTsKICBmb3IgKGxldCBpbmRleFZhbHVlIG9mIGluZGV4VmFsdWVzKSB7CiAgICBpZiAoaW5kZXhWYWx1ZSkgewogICAgICBpbmRleFZhbHVlc1RvS2VlcC5wdXNoKGluZGV4VmFsdWUpOwogICAgfQogIH0KICBmb3IgKGxldCB0b0tlZXAgb2YgaW5kZXhWYWx1ZXNUb0tlZXApIHsKICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKCJpbmRleCIsIHRvS2VlcCk7CiAgfQogIHJldHVybiB1cmw7Cn0KZnVuY3Rpb24gc2luZ2xlRmV0Y2hVcmwocmVxVXJsLCBiYXNlbmFtZSwgZXh0ZW5zaW9uKSB7CiAgbGV0IHVybCA9IHR5cGVvZiByZXFVcmwgPT09ICJzdHJpbmciID8gbmV3IFVSTCgKICAgIHJlcVVybCwKICAgIC8vIFRoaXMgY2FuIGJlIGNhbGxlZCBkdXJpbmcgdGhlIFNTUiBmbG93IHZpYSBQcmVmZXRjaFBhZ2VMaW5rc0ltcGwgc28KICAgIC8vIGRvbid0IGFzc3VtZSB3aW5kb3cgaXMgYXZhaWxhYmxlCiAgICB0eXBlb2Ygd2luZG93ID09PSAidW5kZWZpbmVkIiA/ICJzZXJ2ZXI6Ly9zaW5nbGVmZXRjaC8iIDogd2luZG93LmxvY2F0aW9uLm9yaWdpbgogICkgOiByZXFVcmw7CiAgaWYgKHVybC5wYXRobmFtZSA9PT0gIi8iKSB7CiAgICB1cmwucGF0aG5hbWUgPSBgX3Jvb3QuJHtleHRlbnNpb259YDsKICB9IGVsc2UgaWYgKGJhc2VuYW1lICYmIHN0cmlwQmFzZW5hbWUodXJsLnBhdGhuYW1lLCBiYXNlbmFtZSkgPT09ICIvIikgewogICAgdXJsLnBhdGhuYW1lID0gYCR7YmFzZW5hbWUucmVwbGFjZSgvXC8kLywgIiIpfS9fcm9vdC4ke2V4dGVuc2lvbn1gOwogIH0gZWxzZSB7CiAgICB1cmwucGF0aG5hbWUgPSBgJHt1cmwucGF0aG5hbWUucmVwbGFjZSgvXC8kLywgIiIpfS4ke2V4dGVuc2lvbn1gOwogIH0KICByZXR1cm4gdXJsOwp9CmFzeW5jIGZ1bmN0aW9uIGZldGNoQW5kRGVjb2RlVmlhVHVyYm9TdHJlYW0oYXJncywgYmFzZW5hbWUsIHRhcmdldFJvdXRlcykgewogIGxldCB7IHJlcXVlc3QgfSA9IGFyZ3M7CiAgbGV0IHVybCA9IHNpbmdsZUZldGNoVXJsKHJlcXVlc3QudXJsLCBiYXNlbmFtZSwgImRhdGEiKTsKICBpZiAocmVxdWVzdC5tZXRob2QgPT09ICJHRVQiKSB7CiAgICB1cmwgPSBzdHJpcEluZGV4UGFyYW0odXJsKTsKICAgIGlmICh0YXJnZXRSb3V0ZXMpIHsKICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoIl9yb3V0ZXMiLCB0YXJnZXRSb3V0ZXMuam9pbigiLCIpKTsKICAgIH0KICB9CiAgbGV0IHJlcyA9IGF3YWl0IGZldGNoKHVybCwgYXdhaXQgY3JlYXRlUmVxdWVzdEluaXQocmVxdWVzdCkpOwogIGlmIChyZXMuc3RhdHVzID09PSA0MDQgJiYgIXJlcy5oZWFkZXJzLmhhcygiWC1SZW1peC1SZXNwb25zZSIpKSB7CiAgICB0aHJvdyBuZXcgRXJyb3JSZXNwb25zZUltcGwoNDA0LCAiTm90IEZvdW5kIiwgdHJ1ZSk7CiAgfQogIGlmIChyZXMuc3RhdHVzID09PSAyMDQgJiYgcmVzLmhlYWRlcnMuaGFzKCJYLVJlbWl4LVJlZGlyZWN0IikpIHsKICAgIHJldHVybiB7CiAgICAgIHN0YXR1czogU0lOR0xFX0ZFVENIX1JFRElSRUNUX1NUQVRVUywKICAgICAgZGF0YTogewogICAgICAgIHJlZGlyZWN0OiB7CiAgICAgICAgICByZWRpcmVjdDogcmVzLmhlYWRlcnMuZ2V0KCJYLVJlbWl4LVJlZGlyZWN0IiksCiAgICAgICAgICBzdGF0dXM6IE51bWJlcihyZXMuaGVhZGVycy5nZXQoIlgtUmVtaXgtU3RhdHVzIikgfHwgIjMwMiIpLAogICAgICAgICAgcmV2YWxpZGF0ZTogcmVzLmhlYWRlcnMuZ2V0KCJYLVJlbWl4LVJldmFsaWRhdGUiKSA9PT0gInRydWUiLAogICAgICAgICAgcmVsb2FkOiByZXMuaGVhZGVycy5nZXQoIlgtUmVtaXgtUmVsb2FkLURvY3VtZW50IikgPT09ICJ0cnVlIiwKICAgICAgICAgIHJlcGxhY2U6IHJlcy5oZWFkZXJzLmdldCgiWC1SZW1peC1SZXBsYWNlIikgPT09ICJ0cnVlIgogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9CiAgaWYgKE5PX0JPRFlfU1RBVFVTX0NPREVTLmhhcyhyZXMuc3RhdHVzKSkgewogICAgbGV0IHJvdXRlcyA9IHt9OwogICAgaWYgKHRhcmdldFJvdXRlcyAmJiByZXF1ZXN0Lm1ldGhvZCAhPT0gIkdFVCIpIHsKICAgICAgcm91dGVzW3RhcmdldFJvdXRlc1swXV0gPSB7IGRhdGE6IHZvaWQgMCB9OwogICAgfQogICAgcmV0dXJuIHsKICAgICAgc3RhdHVzOiByZXMuc3RhdHVzLAogICAgICBkYXRhOiB7IHJvdXRlcyB9CiAgICB9OwogIH0KICBpbnZhcmlhbnQyKHJlcy5ib2R5LCAiTm8gcmVzcG9uc2UgYm9keSB0byBkZWNvZGUiKTsKICB0cnkgewogICAgbGV0IGRlY29kZWQgPSBhd2FpdCBkZWNvZGVWaWFUdXJib1N0cmVhbShyZXMuYm9keSwgd2luZG93KTsKICAgIGxldCBkYXRhMjsKICAgIGlmIChyZXF1ZXN0Lm1ldGhvZCA9PT0gIkdFVCIpIHsKICAgICAgbGV0IHR5cGVkID0gZGVjb2RlZC52YWx1ZTsKICAgICAgaWYgKFNpbmdsZUZldGNoUmVkaXJlY3RTeW1ib2wgaW4gdHlwZWQpIHsKICAgICAgICBkYXRhMiA9IHsgcmVkaXJlY3Q6IHR5cGVkW1NpbmdsZUZldGNoUmVkaXJlY3RTeW1ib2xdIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGF0YTIgPSB7IHJvdXRlczogdHlwZWQgfTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgbGV0IHR5cGVkID0gZGVjb2RlZC52YWx1ZTsKICAgICAgbGV0IHJvdXRlSWQgPSB0YXJnZXRSb3V0ZXMgPT0gbnVsbCA/IHZvaWQgMCA6IHRhcmdldFJvdXRlc1swXTsKICAgICAgaW52YXJpYW50Mihyb3V0ZUlkLCAiTm8gcm91dGVJZCBmb3VuZCBmb3Igc2luZ2xlIGZldGNoIGNhbGwgZGVjb2RpbmciKTsKICAgICAgaWYgKCJyZWRpcmVjdCIgaW4gdHlwZWQpIHsKICAgICAgICBkYXRhMiA9IHsgcmVkaXJlY3Q6IHR5cGVkIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGF0YTIgPSB7IHJvdXRlczogeyBbcm91dGVJZF06IHR5cGVkIH0gfTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHsgc3RhdHVzOiByZXMuc3RhdHVzLCBkYXRhOiBkYXRhMiB9OwogIH0gY2F0Y2ggKGUpIHsKICAgIHRocm93IG5ldyBFcnJvcigiVW5hYmxlIHRvIGRlY29kZSB0dXJiby1zdHJlYW0gcmVzcG9uc2UiKTsKICB9Cn0KZnVuY3Rpb24gZGVjb2RlVmlhVHVyYm9TdHJlYW0oYm9keSwgZ2xvYmFsMikgewogIHJldHVybiBkZWNvZGUoYm9keSwgewogICAgcGx1Z2luczogWwogICAgICAodHlwZSwgLi4ucmVzdCkgPT4gewogICAgICAgIGlmICh0eXBlID09PSAiU2FuaXRpemVkRXJyb3IiKSB7CiAgICAgICAgICBsZXQgW25hbWUsIG1lc3NhZ2UsIHN0YWNrXSA9IHJlc3Q7CiAgICAgICAgICBsZXQgQ29uc3RydWN0b3IgPSBFcnJvcjsKICAgICAgICAgIGlmIChuYW1lICYmIG5hbWUgaW4gZ2xvYmFsMiAmJiB0eXBlb2YgZ2xvYmFsMltuYW1lXSA9PT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICBDb25zdHJ1Y3RvciA9IGdsb2JhbDJbbmFtZV07CiAgICAgICAgICB9CiAgICAgICAgICBsZXQgZXJyb3IgPSBuZXcgQ29uc3RydWN0b3IobWVzc2FnZSk7CiAgICAgICAgICBlcnJvci5zdGFjayA9IHN0YWNrOwogICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IGVycm9yIH07CiAgICAgICAgfQogICAgICAgIGlmICh0eXBlID09PSAiRXJyb3JSZXNwb25zZSIpIHsKICAgICAgICAgIGxldCBbZGF0YTIsIHN0YXR1cywgc3RhdHVzVGV4dF0gPSByZXN0OwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdmFsdWU6IG5ldyBFcnJvclJlc3BvbnNlSW1wbChzdGF0dXMsIHN0YXR1c1RleHQsIGRhdGEyKQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgaWYgKHR5cGUgPT09ICJTaW5nbGVGZXRjaFJlZGlyZWN0IikgewogICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHsgW1NpbmdsZUZldGNoUmVkaXJlY3RTeW1ib2xdOiByZXN0WzBdIH0gfTsKICAgICAgICB9CiAgICAgICAgaWYgKHR5cGUgPT09ICJTaW5nbGVGZXRjaENsYXNzSW5zdGFuY2UiKSB7CiAgICAgICAgICByZXR1cm4geyB2YWx1ZTogcmVzdFswXSB9OwogICAgICAgIH0KICAgICAgICBpZiAodHlwZSA9PT0gIlNpbmdsZUZldGNoRmFsbGJhY2siKSB7CiAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdm9pZCAwIH07CiAgICAgICAgfQogICAgICB9CiAgICBdCiAgfSk7Cn0KZnVuY3Rpb24gdW53cmFwU2luZ2xlRmV0Y2hSZXN1bHQocmVzdWx0LCByb3V0ZUlkKSB7CiAgaWYgKCJyZWRpcmVjdCIgaW4gcmVzdWx0KSB7CiAgICBsZXQgewogICAgICByZWRpcmVjdDogbG9jYXRpb24yLAogICAgICByZXZhbGlkYXRlLAogICAgICByZWxvYWQsCiAgICAgIHJlcGxhY2U6IHJlcGxhY2UyLAogICAgICBzdGF0dXMKICAgIH0gPSByZXN1bHQucmVkaXJlY3Q7CiAgICB0aHJvdyByZWRpcmVjdChsb2NhdGlvbjIsIHsKICAgICAgc3RhdHVzLAogICAgICBoZWFkZXJzOiB7CiAgICAgICAgLy8gVGhyZWUgUidzIG9mIHJlZGlyZWN0aW5nIChsb2wgVmVlcCkKICAgICAgICAuLi5yZXZhbGlkYXRlID8geyAiWC1SZW1peC1SZXZhbGlkYXRlIjogInllcyIgfSA6IG51bGwsCiAgICAgICAgLi4ucmVsb2FkID8geyAiWC1SZW1peC1SZWxvYWQtRG9jdW1lbnQiOiAieWVzIiB9IDogbnVsbCwKICAgICAgICAuLi5yZXBsYWNlMiA/IHsgIlgtUmVtaXgtUmVwbGFjZSI6ICJ5ZXMiIH0gOiBudWxsCiAgICAgIH0KICAgIH0pOwogIH0KICBsZXQgcm91dGVSZXN1bHQgPSByZXN1bHQucm91dGVzW3JvdXRlSWRdOwogIGlmIChyb3V0ZVJlc3VsdCA9PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgU2luZ2xlRmV0Y2hOb1Jlc3VsdEVycm9yKAogICAgICBgTm8gcmVzdWx0IGZvdW5kIGZvciByb3V0ZUlkICIke3JvdXRlSWR9ImAKICAgICk7CiAgfSBlbHNlIGlmICgiZXJyb3IiIGluIHJvdXRlUmVzdWx0KSB7CiAgICB0aHJvdyByb3V0ZVJlc3VsdC5lcnJvcjsKICB9IGVsc2UgaWYgKCJkYXRhIiBpbiByb3V0ZVJlc3VsdCkgewogICAgcmV0dXJuIHJvdXRlUmVzdWx0LmRhdGE7CiAgfSBlbHNlIHsKICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCByZXNwb25zZSBmb3VuZCBmb3Igcm91dGVJZCAiJHtyb3V0ZUlkfSJgKTsKICB9Cn0KZnVuY3Rpb24gY3JlYXRlRGVmZXJyZWQyKCkgewogIGxldCByZXNvbHZlOwogIGxldCByZWplY3Q7CiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHsKICAgIHJlc29sdmUgPSBhc3luYyAodmFsKSA9PiB7CiAgICAgIHJlcyh2YWwpOwogICAgICB0cnkgewogICAgICAgIGF3YWl0IHByb21pc2U7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgfQogICAgfTsKICAgIHJlamVjdCA9IGFzeW5jIChlcnJvcikgPT4gewogICAgICByZWooZXJyb3IpOwogICAgICB0cnkgewogICAgICAgIGF3YWl0IHByb21pc2U7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgfQogICAgfTsKICB9KTsKICByZXR1cm4gewogICAgcHJvbWlzZSwKICAgIC8vQHRzLWlnbm9yZQogICAgcmVzb2x2ZSwKICAgIC8vQHRzLWlnbm9yZQogICAgcmVqZWN0CiAgfTsKfQphc3luYyBmdW5jdGlvbiBsb2FkUm91dGVNb2R1bGUocm91dGUsIHJvdXRlTW9kdWxlc0NhY2hlKSB7CiAgaWYgKHJvdXRlLmlkIGluIHJvdXRlTW9kdWxlc0NhY2hlKSB7CiAgICByZXR1cm4gcm91dGVNb2R1bGVzQ2FjaGVbcm91dGUuaWRdOwogIH0KICB0cnkgewogICAgbGV0IHJvdXRlTW9kdWxlID0gYXdhaXQgaW1wb3J0KAogICAgICAvKiBAdml0ZS1pZ25vcmUgKi8KICAgICAgLyogd2VicGFja0lnbm9yZTogdHJ1ZSAqLwogICAgICBfX3ZpdGVfX2luamVjdFF1ZXJ5KHJvdXRlLm1vZHVsZSwgJ2ltcG9ydCcpCiAgICApOwogICAgcm91dGVNb2R1bGVzQ2FjaGVbcm91dGUuaWRdID0gcm91dGVNb2R1bGU7CiAgICByZXR1cm4gcm91dGVNb2R1bGU7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnNvbGUuZXJyb3IoCiAgICAgIGBFcnJvciBsb2FkaW5nIHJvdXRlIG1vZHVsZSBcYCR7cm91dGUubW9kdWxlfVxgLCByZWxvYWRpbmcgcGFnZS4uLmAKICAgICk7CiAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgIGlmICh3aW5kb3cuX19yZWFjdFJvdXRlckNvbnRleHQgJiYgd2luZG93Ll9fcmVhY3RSb3V0ZXJDb250ZXh0LmlzU3BhTW9kZSAmJiAvLyBAdHMtZXhwZWN0LWVycm9yCiAgICBpbXBvcnQubWV0YS5ob3QpIHsKICAgICAgdGhyb3cgZXJyb3I7CiAgICB9CiAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICByZXR1cm4gbmV3IFByb21pc2UoKCkgPT4gewogICAgfSk7CiAgfQp9CmZ1bmN0aW9uIGdldEtleWVkTGlua3NGb3JNYXRjaGVzKG1hdGNoZXMsIHJvdXRlTW9kdWxlcywgbWFuaWZlc3QpIHsKICBsZXQgZGVzY3JpcHRvcnMgPSBtYXRjaGVzLm1hcCgobWF0Y2gpID0+IHsKICAgIHZhciBfYTsKICAgIGxldCBtb2R1bGUgPSByb3V0ZU1vZHVsZXNbbWF0Y2gucm91dGUuaWRdOwogICAgbGV0IHJvdXRlID0gbWFuaWZlc3Qucm91dGVzW21hdGNoLnJvdXRlLmlkXTsKICAgIHJldHVybiBbCiAgICAgIHJvdXRlICYmIHJvdXRlLmNzcyA/IHJvdXRlLmNzcy5tYXAoKGhyZWYyKSA9PiAoeyByZWw6ICJzdHlsZXNoZWV0IiwgaHJlZjogaHJlZjIgfSkpIDogW10sCiAgICAgICgoX2EgPSBtb2R1bGUgPT0gbnVsbCA/IHZvaWQgMCA6IG1vZHVsZS5saW5rcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwobW9kdWxlKSkgfHwgW10KICAgIF07CiAgfSkuZmxhdCgyKTsKICBsZXQgcHJlbG9hZHMgPSBnZXRNb2R1bGVMaW5rSHJlZnMobWF0Y2hlcywgbWFuaWZlc3QpOwogIHJldHVybiBkZWR1cGVMaW5rRGVzY3JpcHRvcnMoZGVzY3JpcHRvcnMsIHByZWxvYWRzKTsKfQpmdW5jdGlvbiBnZXRSb3V0ZUNzc0Rlc2NyaXB0b3JzKHJvdXRlKSB7CiAgaWYgKCFyb3V0ZS5jc3MpIHJldHVybiBbXTsKICByZXR1cm4gcm91dGUuY3NzLm1hcCgoaHJlZjIpID0+ICh7IHJlbDogInN0eWxlc2hlZXQiLCBocmVmOiBocmVmMiB9KSk7Cn0KYXN5bmMgZnVuY3Rpb24gcHJlZmV0Y2hSb3V0ZUNzcyhyb3V0ZSkgewogIGlmICghcm91dGUuY3NzKSByZXR1cm47CiAgbGV0IGRlc2NyaXB0b3JzID0gZ2V0Um91dGVDc3NEZXNjcmlwdG9ycyhyb3V0ZSk7CiAgYXdhaXQgUHJvbWlzZS5hbGwoZGVzY3JpcHRvcnMubWFwKHByZWZldGNoU3R5bGVMaW5rKSk7Cn0KYXN5bmMgZnVuY3Rpb24gcHJlZmV0Y2hTdHlsZUxpbmtzKHJvdXRlLCByb3V0ZU1vZHVsZSkgewogIGlmICghcm91dGUuY3NzICYmICFyb3V0ZU1vZHVsZS5saW5rcyB8fCAhaXNQcmVsb2FkU3VwcG9ydGVkKCkpIHJldHVybjsKICBsZXQgZGVzY3JpcHRvcnMgPSBbXTsKICBpZiAocm91dGUuY3NzKSB7CiAgICBkZXNjcmlwdG9ycy5wdXNoKC4uLmdldFJvdXRlQ3NzRGVzY3JpcHRvcnMocm91dGUpKTsKICB9CiAgaWYgKHJvdXRlTW9kdWxlLmxpbmtzKSB7CiAgICBkZXNjcmlwdG9ycy5wdXNoKC4uLnJvdXRlTW9kdWxlLmxpbmtzKCkpOwogIH0KICBpZiAoZGVzY3JpcHRvcnMubGVuZ3RoID09PSAwKSByZXR1cm47CiAgbGV0IHN0eWxlTGlua3MgPSBbXTsKICBmb3IgKGxldCBkZXNjcmlwdG9yIG9mIGRlc2NyaXB0b3JzKSB7CiAgICBpZiAoIWlzUGFnZUxpbmtEZXNjcmlwdG9yKGRlc2NyaXB0b3IpICYmIGRlc2NyaXB0b3IucmVsID09PSAic3R5bGVzaGVldCIpIHsKICAgICAgc3R5bGVMaW5rcy5wdXNoKHsKICAgICAgICAuLi5kZXNjcmlwdG9yLAogICAgICAgIHJlbDogInByZWxvYWQiLAogICAgICAgIGFzOiAic3R5bGUiCiAgICAgIH0pOwogICAgfQogIH0KICBhd2FpdCBQcm9taXNlLmFsbChzdHlsZUxpbmtzLm1hcChwcmVmZXRjaFN0eWxlTGluaykpOwp9CmFzeW5jIGZ1bmN0aW9uIHByZWZldGNoU3R5bGVMaW5rKGRlc2NyaXB0b3IpIHsKICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgIGlmIChkZXNjcmlwdG9yLm1lZGlhICYmICF3aW5kb3cubWF0Y2hNZWRpYShkZXNjcmlwdG9yLm1lZGlhKS5tYXRjaGVzIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCiAgICAgIGBsaW5rW3JlbD0ic3R5bGVzaGVldCJdW2hyZWY9IiR7ZGVzY3JpcHRvci5ocmVmfSJdYAogICAgKSkgewogICAgICByZXR1cm4gcmVzb2x2ZSgpOwogICAgfQogICAgbGV0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIik7CiAgICBPYmplY3QuYXNzaWduKGxpbmssIGRlc2NyaXB0b3IpOwogICAgZnVuY3Rpb24gcmVtb3ZlTGluaygpIHsKICAgICAgaWYgKGRvY3VtZW50LmhlYWQuY29udGFpbnMobGluaykpIHsKICAgICAgICBkb2N1bWVudC5oZWFkLnJlbW92ZUNoaWxkKGxpbmspOwogICAgICB9CiAgICB9CiAgICBsaW5rLm9ubG9hZCA9ICgpID0+IHsKICAgICAgcmVtb3ZlTGluaygpOwogICAgICByZXNvbHZlKCk7CiAgICB9OwogICAgbGluay5vbmVycm9yID0gKCkgPT4gewogICAgICByZW1vdmVMaW5rKCk7CiAgICAgIHJlc29sdmUoKTsKICAgIH07CiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGxpbmspOwogIH0pOwp9CmZ1bmN0aW9uIGlzUGFnZUxpbmtEZXNjcmlwdG9yKG9iamVjdCkgewogIHJldHVybiBvYmplY3QgIT0gbnVsbCAmJiB0eXBlb2Ygb2JqZWN0LnBhZ2UgPT09ICJzdHJpbmciOwp9CmZ1bmN0aW9uIGlzSHRtbExpbmtEZXNjcmlwdG9yKG9iamVjdCkgewogIGlmIChvYmplY3QgPT0gbnVsbCkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICBpZiAob2JqZWN0LmhyZWYgPT0gbnVsbCkgewogICAgcmV0dXJuIG9iamVjdC5yZWwgPT09ICJwcmVsb2FkIiAmJiB0eXBlb2Ygb2JqZWN0LmltYWdlU3JjU2V0ID09PSAic3RyaW5nIiAmJiB0eXBlb2Ygb2JqZWN0LmltYWdlU2l6ZXMgPT09ICJzdHJpbmciOwogIH0KICByZXR1cm4gdHlwZW9mIG9iamVjdC5yZWwgPT09ICJzdHJpbmciICYmIHR5cGVvZiBvYmplY3QuaHJlZiA9PT0gInN0cmluZyI7Cn0KYXN5bmMgZnVuY3Rpb24gZ2V0S2V5ZWRQcmVmZXRjaExpbmtzKG1hdGNoZXMsIG1hbmlmZXN0LCByb3V0ZU1vZHVsZXMpIHsKICBsZXQgbGlua3MgPSBhd2FpdCBQcm9taXNlLmFsbCgKICAgIG1hdGNoZXMubWFwKGFzeW5jIChtYXRjaCkgPT4gewogICAgICBsZXQgcm91dGUgPSBtYW5pZmVzdC5yb3V0ZXNbbWF0Y2gucm91dGUuaWRdOwogICAgICBpZiAocm91dGUpIHsKICAgICAgICBsZXQgbW9kID0gYXdhaXQgbG9hZFJvdXRlTW9kdWxlKHJvdXRlLCByb3V0ZU1vZHVsZXMpOwogICAgICAgIHJldHVybiBtb2QubGlua3MgPyBtb2QubGlua3MoKSA6IFtdOwogICAgICB9CiAgICAgIHJldHVybiBbXTsKICAgIH0pCiAgKTsKICByZXR1cm4gZGVkdXBlTGlua0Rlc2NyaXB0b3JzKAogICAgbGlua3MuZmxhdCgxKS5maWx0ZXIoaXNIdG1sTGlua0Rlc2NyaXB0b3IpLmZpbHRlcigobGluaykgPT4gbGluay5yZWwgPT09ICJzdHlsZXNoZWV0IiB8fCBsaW5rLnJlbCA9PT0gInByZWxvYWQiKS5tYXAoCiAgICAgIChsaW5rKSA9PiBsaW5rLnJlbCA9PT0gInN0eWxlc2hlZXQiID8geyAuLi5saW5rLCByZWw6ICJwcmVmZXRjaCIsIGFzOiAic3R5bGUiIH0gOiB7IC4uLmxpbmssIHJlbDogInByZWZldGNoIiB9CiAgICApCiAgKTsKfQpmdW5jdGlvbiBnZXROZXdNYXRjaGVzRm9yTGlua3MocGFnZSwgbmV4dE1hdGNoZXMsIGN1cnJlbnRNYXRjaGVzLCBtYW5pZmVzdCwgbG9jYXRpb24yLCBtb2RlKSB7CiAgbGV0IGlzTmV3ID0gKG1hdGNoLCBpbmRleCkgPT4gewogICAgaWYgKCFjdXJyZW50TWF0Y2hlc1tpbmRleF0pIHJldHVybiB0cnVlOwogICAgcmV0dXJuIG1hdGNoLnJvdXRlLmlkICE9PSBjdXJyZW50TWF0Y2hlc1tpbmRleF0ucm91dGUuaWQ7CiAgfTsKICBsZXQgbWF0Y2hQYXRoQ2hhbmdlZCA9IChtYXRjaCwgaW5kZXgpID0+IHsKICAgIHZhciBfYTsKICAgIHJldHVybiAoCiAgICAgIC8vIHBhcmFtIGNoYW5nZSwgL3VzZXJzLzEyMyAtPiAvdXNlcnMvNDU2CiAgICAgIGN1cnJlbnRNYXRjaGVzW2luZGV4XS5wYXRobmFtZSAhPT0gbWF0Y2gucGF0aG5hbWUgfHwgLy8gc3BsYXQgcGFyYW0gY2hhbmdlZCwgd2hpY2ggaXMgbm90IHByZXNlbnQgaW4gbWF0Y2gucGF0aAogICAgICAvLyBlLmcuIC9maWxlcy9pbWFnZXMvYXZhdGFyLmpwZyAtPiBmaWxlcy9maW5hbmNlcy54bHMKICAgICAgKChfYSA9IGN1cnJlbnRNYXRjaGVzW2luZGV4XS5yb3V0ZS5wYXRoKSA9PSBudWxsID8gdm9pZCAwIDogX2EuZW5kc1dpdGgoIioiKSkgJiYgY3VycmVudE1hdGNoZXNbaW5kZXhdLnBhcmFtc1siKiJdICE9PSBtYXRjaC5wYXJhbXNbIioiXQogICAgKTsKICB9OwogIGlmIChtb2RlID09PSAiYXNzZXRzIikgewogICAgcmV0dXJuIG5leHRNYXRjaGVzLmZpbHRlcigKICAgICAgKG1hdGNoLCBpbmRleCkgPT4gaXNOZXcobWF0Y2gsIGluZGV4KSB8fCBtYXRjaFBhdGhDaGFuZ2VkKG1hdGNoLCBpbmRleCkKICAgICk7CiAgfQogIGlmIChtb2RlID09PSAiZGF0YSIpIHsKICAgIHJldHVybiBuZXh0TWF0Y2hlcy5maWx0ZXIoKG1hdGNoLCBpbmRleCkgPT4gewogICAgICB2YXIgX2E7CiAgICAgIGxldCBtYW5pZmVzdFJvdXRlID0gbWFuaWZlc3Qucm91dGVzW21hdGNoLnJvdXRlLmlkXTsKICAgICAgaWYgKCFtYW5pZmVzdFJvdXRlIHx8ICFtYW5pZmVzdFJvdXRlLmhhc0xvYWRlcikgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAoaXNOZXcobWF0Y2gsIGluZGV4KSB8fCBtYXRjaFBhdGhDaGFuZ2VkKG1hdGNoLCBpbmRleCkpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICBpZiAobWF0Y2gucm91dGUuc2hvdWxkUmV2YWxpZGF0ZSkgewogICAgICAgIGxldCByb3V0ZUNob2ljZSA9IG1hdGNoLnJvdXRlLnNob3VsZFJldmFsaWRhdGUoewogICAgICAgICAgY3VycmVudFVybDogbmV3IFVSTCgKICAgICAgICAgICAgbG9jYXRpb24yLnBhdGhuYW1lICsgbG9jYXRpb24yLnNlYXJjaCArIGxvY2F0aW9uMi5oYXNoLAogICAgICAgICAgICB3aW5kb3cub3JpZ2luCiAgICAgICAgICApLAogICAgICAgICAgY3VycmVudFBhcmFtczogKChfYSA9IGN1cnJlbnRNYXRjaGVzWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX2EucGFyYW1zKSB8fCB7fSwKICAgICAgICAgIG5leHRVcmw6IG5ldyBVUkwocGFnZSwgd2luZG93Lm9yaWdpbiksCiAgICAgICAgICBuZXh0UGFyYW1zOiBtYXRjaC5wYXJhbXMsCiAgICAgICAgICBkZWZhdWx0U2hvdWxkUmV2YWxpZGF0ZTogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIGlmICh0eXBlb2Ygcm91dGVDaG9pY2UgPT09ICJib29sZWFuIikgewogICAgICAgICAgcmV0dXJuIHJvdXRlQ2hvaWNlOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0pOwogIH0KICByZXR1cm4gW107Cn0KZnVuY3Rpb24gZ2V0TW9kdWxlTGlua0hyZWZzKG1hdGNoZXMsIG1hbmlmZXN0LCB7IGluY2x1ZGVIeWRyYXRlRmFsbGJhY2sgfSA9IHt9KSB7CiAgcmV0dXJuIGRlZHVwZUhyZWZzKAogICAgbWF0Y2hlcy5tYXAoKG1hdGNoKSA9PiB7CiAgICAgIGxldCByb3V0ZSA9IG1hbmlmZXN0LnJvdXRlc1ttYXRjaC5yb3V0ZS5pZF07CiAgICAgIGlmICghcm91dGUpIHJldHVybiBbXTsKICAgICAgbGV0IGhyZWZzID0gW3JvdXRlLm1vZHVsZV07CiAgICAgIGlmIChyb3V0ZS5jbGllbnRBY3Rpb25Nb2R1bGUpIHsKICAgICAgICBocmVmcyA9IGhyZWZzLmNvbmNhdChyb3V0ZS5jbGllbnRBY3Rpb25Nb2R1bGUpOwogICAgICB9CiAgICAgIGlmIChyb3V0ZS5jbGllbnRMb2FkZXJNb2R1bGUpIHsKICAgICAgICBocmVmcyA9IGhyZWZzLmNvbmNhdChyb3V0ZS5jbGllbnRMb2FkZXJNb2R1bGUpOwogICAgICB9CiAgICAgIGlmIChpbmNsdWRlSHlkcmF0ZUZhbGxiYWNrICYmIHJvdXRlLmh5ZHJhdGVGYWxsYmFja01vZHVsZSkgewogICAgICAgIGhyZWZzID0gaHJlZnMuY29uY2F0KHJvdXRlLmh5ZHJhdGVGYWxsYmFja01vZHVsZSk7CiAgICAgIH0KICAgICAgaWYgKHJvdXRlLmltcG9ydHMpIHsKICAgICAgICBocmVmcyA9IGhyZWZzLmNvbmNhdChyb3V0ZS5pbXBvcnRzKTsKICAgICAgfQogICAgICByZXR1cm4gaHJlZnM7CiAgICB9KS5mbGF0KDEpCiAgKTsKfQpmdW5jdGlvbiBkZWR1cGVIcmVmcyhocmVmcykgewogIHJldHVybiBbLi4ubmV3IFNldChocmVmcyldOwp9CmZ1bmN0aW9uIHNvcnRLZXlzKG9iaikgewogIGxldCBzb3J0ZWQgPSB7fTsKICBsZXQga2V5cyA9IE9iamVjdC5rZXlzKG9iaikuc29ydCgpOwogIGZvciAobGV0IGtleSBvZiBrZXlzKSB7CiAgICBzb3J0ZWRba2V5XSA9IG9ialtrZXldOwogIH0KICByZXR1cm4gc29ydGVkOwp9CmZ1bmN0aW9uIGRlZHVwZUxpbmtEZXNjcmlwdG9ycyhkZXNjcmlwdG9ycywgcHJlbG9hZHMpIHsKICBsZXQgc2V0ID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKICBsZXQgcHJlbG9hZHNTZXQgPSBuZXcgU2V0KHByZWxvYWRzKTsKICByZXR1cm4gZGVzY3JpcHRvcnMucmVkdWNlKChkZWR1cGVkLCBkZXNjcmlwdG9yKSA9PiB7CiAgICBsZXQgYWxyZWFkeU1vZHVsZVByZWxvYWQgPSBwcmVsb2FkcyAmJiAhaXNQYWdlTGlua0Rlc2NyaXB0b3IoZGVzY3JpcHRvcikgJiYgZGVzY3JpcHRvci5hcyA9PT0gInNjcmlwdCIgJiYgZGVzY3JpcHRvci5ocmVmICYmIHByZWxvYWRzU2V0LmhhcyhkZXNjcmlwdG9yLmhyZWYpOwogICAgaWYgKGFscmVhZHlNb2R1bGVQcmVsb2FkKSB7CiAgICAgIHJldHVybiBkZWR1cGVkOwogICAgfQogICAgbGV0IGtleSA9IEpTT04uc3RyaW5naWZ5KHNvcnRLZXlzKGRlc2NyaXB0b3IpKTsKICAgIGlmICghc2V0LmhhcyhrZXkpKSB7CiAgICAgIHNldC5hZGQoa2V5KTsKICAgICAgZGVkdXBlZC5wdXNoKHsga2V5LCBsaW5rOiBkZXNjcmlwdG9yIH0pOwogICAgfQogICAgcmV0dXJuIGRlZHVwZWQ7CiAgfSwgW10pOwp9CnZhciBfaXNQcmVsb2FkU3VwcG9ydGVkOwpmdW5jdGlvbiBpc1ByZWxvYWRTdXBwb3J0ZWQoKSB7CiAgaWYgKF9pc1ByZWxvYWRTdXBwb3J0ZWQgIT09IHZvaWQgMCkgewogICAgcmV0dXJuIF9pc1ByZWxvYWRTdXBwb3J0ZWQ7CiAgfQogIGxldCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpbmsiKTsKICBfaXNQcmVsb2FkU3VwcG9ydGVkID0gZWwucmVsTGlzdC5zdXBwb3J0cygicHJlbG9hZCIpOwogIGVsID0gbnVsbDsKICByZXR1cm4gX2lzUHJlbG9hZFN1cHBvcnRlZDsKfQpmdW5jdGlvbiBSZW1peFJvb3REZWZhdWx0SHlkcmF0ZUZhbGxiYWNrKCkgewogIHJldHVybiBSZWFjdDUuY3JlYXRlRWxlbWVudChCb3VuZGFyeVNoZWxsLCB7IHRpdGxlOiAiTG9hZGluZy4uLiIsIHJlbmRlclNjcmlwdHM6IHRydWUgfSwgRU5BQkxFX0RFVl9XQVJOSU5HUyA/IFJlYWN0NS5jcmVhdGVFbGVtZW50KAogICAgInNjcmlwdCIsCiAgICB7CiAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7CiAgICAgICAgX19odG1sOiBgCiAgICAgICAgICAgICAgY29uc29sZS5sb2coCiAgICAgICAgICAgICAgICAi8J+SvyBIZXkgZGV2ZWxvcGVyIPCfkYsuIFlvdSBjYW4gcHJvdmlkZSBhIHdheSBiZXR0ZXIgVVggdGhhbiB0aGlzICIgKwogICAgICAgICAgICAgICAgIndoZW4geW91ciBhcHAgaXMgbG9hZGluZyBKUyBtb2R1bGVzIGFuZC9vciBydW5uaW5nIFxgY2xpZW50TG9hZGVyXGAgIiArCiAgICAgICAgICAgICAgICAiZnVuY3Rpb25zLiBDaGVjayBvdXQgaHR0cHM6Ly9yZWFjdHJvdXRlci5jb20vc3RhcnQvZnJhbWV3b3JrL3JvdXRlLW1vZHVsZSNoeWRyYXRlZmFsbGJhY2sgIiArCiAgICAgICAgICAgICAgICAiZm9yIG1vcmUgaW5mb3JtYXRpb24uIgogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIGAKICAgICAgfQogICAgfQogICkgOiBudWxsKTsKfQpmdW5jdGlvbiBncm91cFJvdXRlc0J5UGFyZW50SWQobWFuaWZlc3QpIHsKICBsZXQgcm91dGVzID0ge307CiAgT2JqZWN0LnZhbHVlcyhtYW5pZmVzdCkuZm9yRWFjaCgocm91dGUpID0+IHsKICAgIGlmIChyb3V0ZSkgewogICAgICBsZXQgcGFyZW50SWQgPSByb3V0ZS5wYXJlbnRJZCB8fCAiIjsKICAgICAgaWYgKCFyb3V0ZXNbcGFyZW50SWRdKSB7CiAgICAgICAgcm91dGVzW3BhcmVudElkXSA9IFtdOwogICAgICB9CiAgICAgIHJvdXRlc1twYXJlbnRJZF0ucHVzaChyb3V0ZSk7CiAgICB9CiAgfSk7CiAgcmV0dXJuIHJvdXRlczsKfQpmdW5jdGlvbiBnZXRSb3V0ZUNvbXBvbmVudHMocm91dGUsIHJvdXRlTW9kdWxlLCBpc1NwYU1vZGUpIHsKICBsZXQgQ29tcG9uZW50NCA9IGdldFJvdXRlTW9kdWxlQ29tcG9uZW50KHJvdXRlTW9kdWxlKTsKICBsZXQgSHlkcmF0ZUZhbGxiYWNrID0gcm91dGVNb2R1bGUuSHlkcmF0ZUZhbGxiYWNrICYmICghaXNTcGFNb2RlIHx8IHJvdXRlLmlkID09PSAicm9vdCIpID8gcm91dGVNb2R1bGUuSHlkcmF0ZUZhbGxiYWNrIDogcm91dGUuaWQgPT09ICJyb290IiA/IFJlbWl4Um9vdERlZmF1bHRIeWRyYXRlRmFsbGJhY2sgOiB2b2lkIDA7CiAgbGV0IEVycm9yQm91bmRhcnkgPSByb3V0ZU1vZHVsZS5FcnJvckJvdW5kYXJ5ID8gcm91dGVNb2R1bGUuRXJyb3JCb3VuZGFyeSA6IHJvdXRlLmlkID09PSAicm9vdCIgPyAoKSA9PiBSZWFjdDYuY3JlYXRlRWxlbWVudChSZW1peFJvb3REZWZhdWx0RXJyb3JCb3VuZGFyeSwgeyBlcnJvcjogdXNlUm91dGVFcnJvcigpIH0pIDogdm9pZCAwOwogIGlmIChyb3V0ZS5pZCA9PT0gInJvb3QiICYmIHJvdXRlTW9kdWxlLkxheW91dCkgewogICAgcmV0dXJuIHsKICAgICAgLi4uQ29tcG9uZW50NCA/IHsKICAgICAgICBlbGVtZW50OiBSZWFjdDYuY3JlYXRlRWxlbWVudChyb3V0ZU1vZHVsZS5MYXlvdXQsIG51bGwsIFJlYWN0Ni5jcmVhdGVFbGVtZW50KENvbXBvbmVudDQsIG51bGwpKQogICAgICB9IDogeyBDb21wb25lbnQ6IENvbXBvbmVudDQgfSwKICAgICAgLi4uRXJyb3JCb3VuZGFyeSA/IHsKICAgICAgICBlcnJvckVsZW1lbnQ6IFJlYWN0Ni5jcmVhdGVFbGVtZW50KHJvdXRlTW9kdWxlLkxheW91dCwgbnVsbCwgUmVhY3Q2LmNyZWF0ZUVsZW1lbnQoRXJyb3JCb3VuZGFyeSwgbnVsbCkpCiAgICAgIH0gOiB7IEVycm9yQm91bmRhcnkgfSwKICAgICAgLi4uSHlkcmF0ZUZhbGxiYWNrID8gewogICAgICAgIGh5ZHJhdGVGYWxsYmFja0VsZW1lbnQ6IFJlYWN0Ni5jcmVhdGVFbGVtZW50KHJvdXRlTW9kdWxlLkxheW91dCwgbnVsbCwgUmVhY3Q2LmNyZWF0ZUVsZW1lbnQoSHlkcmF0ZUZhbGxiYWNrLCBudWxsKSkKICAgICAgfSA6IHsgSHlkcmF0ZUZhbGxiYWNrIH0KICAgIH07CiAgfQogIHJldHVybiB7IENvbXBvbmVudDogQ29tcG9uZW50NCwgRXJyb3JCb3VuZGFyeSwgSHlkcmF0ZUZhbGxiYWNrIH07Cn0KZnVuY3Rpb24gY3JlYXRlU2VydmVyUm91dGVzKG1hbmlmZXN0LCByb3V0ZU1vZHVsZXMsIGZ1dHVyZSwgaXNTcGFNb2RlLCBwYXJlbnRJZCA9ICIiLCByb3V0ZXNCeVBhcmVudElkID0gZ3JvdXBSb3V0ZXNCeVBhcmVudElkKG1hbmlmZXN0KSwgc3BhTW9kZUxhenlQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKHsgQ29tcG9uZW50OiAoKSA9PiBudWxsIH0pKSB7CiAgcmV0dXJuIChyb3V0ZXNCeVBhcmVudElkW3BhcmVudElkXSB8fCBbXSkubWFwKChyb3V0ZSkgPT4gewogICAgbGV0IHJvdXRlTW9kdWxlID0gcm91dGVNb2R1bGVzW3JvdXRlLmlkXTsKICAgIGludmFyaWFudDIoCiAgICAgIHJvdXRlTW9kdWxlLAogICAgICAiTm8gYHJvdXRlTW9kdWxlYCBhdmFpbGFibGUgdG8gY3JlYXRlIHNlcnZlciByb3V0ZXMiCiAgICApOwogICAgbGV0IGRhdGFSb3V0ZSA9IHsKICAgICAgLi4uZ2V0Um91dGVDb21wb25lbnRzKHJvdXRlLCByb3V0ZU1vZHVsZSwgaXNTcGFNb2RlKSwKICAgICAgY2FzZVNlbnNpdGl2ZTogcm91dGUuY2FzZVNlbnNpdGl2ZSwKICAgICAgaWQ6IHJvdXRlLmlkLAogICAgICBpbmRleDogcm91dGUuaW5kZXgsCiAgICAgIHBhdGg6IHJvdXRlLnBhdGgsCiAgICAgIGhhbmRsZTogcm91dGVNb2R1bGUuaGFuZGxlLAogICAgICAvLyBGb3IgU1BBIE1vZGUsIGFsbCByb3V0ZXMgYXJlIGxhenkgZXhjZXB0IHJvb3QuICBIb3dldmVyIHdlIHRlbGwgdGhlCiAgICAgIC8vIHJvdXRlciByb290IGlzIGFsc28gbGF6eSBoZXJlIHRvbyBzaW5jZSB3ZSBkb24ndCBuZWVkIGEgZnVsbAogICAgICAvLyBpbXBsZW1lbnRhdGlvbiAtIHdlIGp1c3QgbmVlZCBhIGBsYXp5YCBwcm9wIHRvIHRlbGwgdGhlIFJSIHJlbmRlcmluZwogICAgICAvLyB3aGVyZSB0byBzdG9wIHdoaWNoIGlzIGFsd2F5cyBhdCB0aGUgcm9vdCByb3V0ZSBpbiBTUEEgbW9kZQogICAgICBsYXp5OiBpc1NwYU1vZGUgPyAoKSA9PiBzcGFNb2RlTGF6eVByb21pc2UgOiB2b2lkIDAsCiAgICAgIC8vIEZvciBwYXJ0aWFsIGh5ZHJhdGlvbiByZW5kZXJpbmcsIHdlIG5lZWQgdG8gaW5kaWNhdGUgd2hlbiB0aGUgcm91dGUKICAgICAgLy8gaGFzIGEgbG9hZGVyL2NsaWVudExvYWRlciwgYnV0IGl0IHdvbid0IGV2ZXIgYmUgY2FsbGVkIGR1cmluZyB0aGUgc3RhdGljCiAgICAgIC8vIHJlbmRlciwgc28ganVzdCBnaXZlIGl0IGEgbm8tb3AgZnVuY3Rpb24gc28gd2UgY2FuIHJlbmRlciBkb3duIHRvIHRoZQogICAgICAvLyBwcm9wZXIgZmFsbGJhY2sKICAgICAgbG9hZGVyOiByb3V0ZS5oYXNMb2FkZXIgfHwgcm91dGUuaGFzQ2xpZW50TG9hZGVyID8gKCkgPT4gbnVsbCA6IHZvaWQgMAogICAgICAvLyBXZSBkb24ndCBuZWVkIG1pZGRsZXdhcmUvYWN0aW9uL3Nob3VsZFJldmFsaWRhdGUgb24gdGhlc2Ugcm91dGVzIHNpbmNlCiAgICAgIC8vIHRoZXkncmUgZm9yIGEgc3RhdGljIHJlbmRlcgogICAgfTsKICAgIGxldCBjaGlsZHJlbiA9IGNyZWF0ZVNlcnZlclJvdXRlcygKICAgICAgbWFuaWZlc3QsCiAgICAgIHJvdXRlTW9kdWxlcywKICAgICAgZnV0dXJlLAogICAgICBpc1NwYU1vZGUsCiAgICAgIHJvdXRlLmlkLAogICAgICByb3V0ZXNCeVBhcmVudElkLAogICAgICBzcGFNb2RlTGF6eVByb21pc2UKICAgICk7CiAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID4gMCkgZGF0YVJvdXRlLmNoaWxkcmVuID0gY2hpbGRyZW47CiAgICByZXR1cm4gZGF0YVJvdXRlOwogIH0pOwp9CmZ1bmN0aW9uIGNyZWF0ZUNsaWVudFJvdXRlc1dpdGhITVJSZXZhbGlkYXRpb25PcHRPdXQobmVlZHNSZXZhbGlkYXRpb24sIG1hbmlmZXN0LCByb3V0ZU1vZHVsZXNDYWNoZSwgaW5pdGlhbFN0YXRlLCBzc3IsIGlzU3BhTW9kZSkgewogIHJldHVybiBjcmVhdGVDbGllbnRSb3V0ZXMoCiAgICBtYW5pZmVzdCwKICAgIHJvdXRlTW9kdWxlc0NhY2hlLAogICAgaW5pdGlhbFN0YXRlLAogICAgc3NyLAogICAgaXNTcGFNb2RlLAogICAgIiIsCiAgICBncm91cFJvdXRlc0J5UGFyZW50SWQobWFuaWZlc3QpLAogICAgbmVlZHNSZXZhbGlkYXRpb24KICApOwp9CmZ1bmN0aW9uIHByZXZlbnRJbnZhbGlkU2VydmVySGFuZGxlckNhbGwodHlwZSwgcm91dGUpIHsKICBpZiAodHlwZSA9PT0gImxvYWRlciIgJiYgIXJvdXRlLmhhc0xvYWRlciB8fCB0eXBlID09PSAiYWN0aW9uIiAmJiAhcm91dGUuaGFzQWN0aW9uKSB7CiAgICBsZXQgZm4gPSB0eXBlID09PSAiYWN0aW9uIiA/ICJzZXJ2ZXJBY3Rpb24oKSIgOiAic2VydmVyTG9hZGVyKCkiOwogICAgbGV0IG1zZyA9IGBZb3UgYXJlIHRyeWluZyB0byBjYWxsICR7Zm59IG9uIGEgcm91dGUgdGhhdCBkb2VzIG5vdCBoYXZlIGEgc2VydmVyICR7dHlwZX0gKHJvdXRlSWQ6ICIke3JvdXRlLmlkfSIpYDsKICAgIGNvbnNvbGUuZXJyb3IobXNnKTsKICAgIHRocm93IG5ldyBFcnJvclJlc3BvbnNlSW1wbCg0MDAsICJCYWQgUmVxdWVzdCIsIG5ldyBFcnJvcihtc2cpLCB0cnVlKTsKICB9Cn0KZnVuY3Rpb24gbm9BY3Rpb25EZWZpbmVkRXJyb3IodHlwZSwgcm91dGVJZCkgewogIGxldCBhcnRpY2xlID0gdHlwZSA9PT0gImNsaWVudEFjdGlvbiIgPyAiYSIgOiAiYW4iOwogIGxldCBtc2cgPSBgUm91dGUgIiR7cm91dGVJZH0iIGRvZXMgbm90IGhhdmUgJHthcnRpY2xlfSAke3R5cGV9LCBidXQgeW91IGFyZSB0cnlpbmcgdG8gc3VibWl0IHRvIGl0LiBUbyBmaXggdGhpcywgcGxlYXNlIGFkZCAke2FydGljbGV9IFxgJHt0eXBlfVxgIGZ1bmN0aW9uIHRvIHRoZSByb3V0ZWA7CiAgY29uc29sZS5lcnJvcihtc2cpOwogIHRocm93IG5ldyBFcnJvclJlc3BvbnNlSW1wbCg0MDUsICJNZXRob2QgTm90IEFsbG93ZWQiLCBuZXcgRXJyb3IobXNnKSwgdHJ1ZSk7Cn0KZnVuY3Rpb24gY3JlYXRlQ2xpZW50Um91dGVzKG1hbmlmZXN0LCByb3V0ZU1vZHVsZXNDYWNoZSwgaW5pdGlhbFN0YXRlLCBzc3IsIGlzU3BhTW9kZSwgcGFyZW50SWQgPSAiIiwgcm91dGVzQnlQYXJlbnRJZCA9IGdyb3VwUm91dGVzQnlQYXJlbnRJZChtYW5pZmVzdCksIG5lZWRzUmV2YWxpZGF0aW9uKSB7CiAgcmV0dXJuIChyb3V0ZXNCeVBhcmVudElkW3BhcmVudElkXSB8fCBbXSkubWFwKChyb3V0ZSkgPT4gewogICAgdmFyIF9hLCBfYiwgX2M7CiAgICBsZXQgcm91dGVNb2R1bGUgPSByb3V0ZU1vZHVsZXNDYWNoZVtyb3V0ZS5pZF07CiAgICBmdW5jdGlvbiBmZXRjaFNlcnZlckhhbmRsZXIoc2luZ2xlRmV0Y2gpIHsKICAgICAgaW52YXJpYW50MigKICAgICAgICB0eXBlb2Ygc2luZ2xlRmV0Y2ggPT09ICJmdW5jdGlvbiIsCiAgICAgICAgIk5vIHNpbmdsZSBmZXRjaCBmdW5jdGlvbiBhdmFpbGFibGUgZm9yIHJvdXRlIGhhbmRsZXIiCiAgICAgICk7CiAgICAgIHJldHVybiBzaW5nbGVGZXRjaCgpOwogICAgfQogICAgZnVuY3Rpb24gZmV0Y2hTZXJ2ZXJMb2FkZXIoc2luZ2xlRmV0Y2gpIHsKICAgICAgaWYgKCFyb3V0ZS5oYXNMb2FkZXIpIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7CiAgICAgIHJldHVybiBmZXRjaFNlcnZlckhhbmRsZXIoc2luZ2xlRmV0Y2gpOwogICAgfQogICAgZnVuY3Rpb24gZmV0Y2hTZXJ2ZXJBY3Rpb24oc2luZ2xlRmV0Y2gpIHsKICAgICAgaWYgKCFyb3V0ZS5oYXNBY3Rpb24pIHsKICAgICAgICB0aHJvdyBub0FjdGlvbkRlZmluZWRFcnJvcigiYWN0aW9uIiwgcm91dGUuaWQpOwogICAgICB9CiAgICAgIHJldHVybiBmZXRjaFNlcnZlckhhbmRsZXIoc2luZ2xlRmV0Y2gpOwogICAgfQogICAgZnVuY3Rpb24gcHJlZmV0Y2hNb2R1bGUobW9kdWxlUGF0aCkgewogICAgICBpbXBvcnQoCiAgICAgICAgLyogQHZpdGUtaWdub3JlICovCiAgICAgICAgLyogd2VicGFja0lnbm9yZTogdHJ1ZSAqLwogICAgICAgIF9fdml0ZV9faW5qZWN0UXVlcnkobW9kdWxlUGF0aCwgJ2ltcG9ydCcpCiAgICAgICk7CiAgICB9CiAgICBmdW5jdGlvbiBwcmVmZXRjaFJvdXRlTW9kdWxlQ2h1bmtzKHJvdXRlMikgewogICAgICBpZiAocm91dGUyLmNsaWVudEFjdGlvbk1vZHVsZSkgewogICAgICAgIHByZWZldGNoTW9kdWxlKHJvdXRlMi5jbGllbnRBY3Rpb25Nb2R1bGUpOwogICAgICB9CiAgICAgIGlmIChyb3V0ZTIuY2xpZW50TG9hZGVyTW9kdWxlKSB7CiAgICAgICAgcHJlZmV0Y2hNb2R1bGUocm91dGUyLmNsaWVudExvYWRlck1vZHVsZSk7CiAgICAgIH0KICAgIH0KICAgIGFzeW5jIGZ1bmN0aW9uIHByZWZldGNoU3R5bGVzQW5kQ2FsbEhhbmRsZXIoaGFuZGxlcikgewogICAgICBsZXQgY2FjaGVkTW9kdWxlID0gcm91dGVNb2R1bGVzQ2FjaGVbcm91dGUuaWRdOwogICAgICBsZXQgbGlua1ByZWZldGNoUHJvbWlzZSA9IGNhY2hlZE1vZHVsZSA/IHByZWZldGNoU3R5bGVMaW5rcyhyb3V0ZSwgY2FjaGVkTW9kdWxlKSA6IFByb21pc2UucmVzb2x2ZSgpOwogICAgICB0cnkgewogICAgICAgIHJldHVybiBoYW5kbGVyKCk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgYXdhaXQgbGlua1ByZWZldGNoUHJvbWlzZTsKICAgICAgfQogICAgfQogICAgbGV0IGRhdGFSb3V0ZSA9IHsKICAgICAgaWQ6IHJvdXRlLmlkLAogICAgICBpbmRleDogcm91dGUuaW5kZXgsCiAgICAgIHBhdGg6IHJvdXRlLnBhdGgKICAgIH07CiAgICBpZiAocm91dGVNb2R1bGUpIHsKICAgICAgT2JqZWN0LmFzc2lnbihkYXRhUm91dGUsIHsKICAgICAgICAuLi5kYXRhUm91dGUsCiAgICAgICAgLi4uZ2V0Um91dGVDb21wb25lbnRzKHJvdXRlLCByb3V0ZU1vZHVsZSwgaXNTcGFNb2RlKSwKICAgICAgICBtaWRkbGV3YXJlOiByb3V0ZU1vZHVsZS5jbGllbnRNaWRkbGV3YXJlLAogICAgICAgIGhhbmRsZTogcm91dGVNb2R1bGUuaGFuZGxlLAogICAgICAgIHNob3VsZFJldmFsaWRhdGU6IGdldFNob3VsZFJldmFsaWRhdGVGdW5jdGlvbigKICAgICAgICAgIGRhdGFSb3V0ZS5wYXRoLAogICAgICAgICAgcm91dGVNb2R1bGUsCiAgICAgICAgICByb3V0ZSwKICAgICAgICAgIHNzciwKICAgICAgICAgIG5lZWRzUmV2YWxpZGF0aW9uCiAgICAgICAgKQogICAgICB9KTsKICAgICAgbGV0IGhhc0luaXRpYWxEYXRhID0gaW5pdGlhbFN0YXRlICYmIGluaXRpYWxTdGF0ZS5sb2FkZXJEYXRhICYmIHJvdXRlLmlkIGluIGluaXRpYWxTdGF0ZS5sb2FkZXJEYXRhOwogICAgICBsZXQgaW5pdGlhbERhdGEgPSBoYXNJbml0aWFsRGF0YSA/IChfYSA9IGluaXRpYWxTdGF0ZSA9PSBudWxsID8gdm9pZCAwIDogaW5pdGlhbFN0YXRlLmxvYWRlckRhdGEpID09IG51bGwgPyB2b2lkIDAgOiBfYVtyb3V0ZS5pZF0gOiB2b2lkIDA7CiAgICAgIGxldCBoYXNJbml0aWFsRXJyb3IgPSBpbml0aWFsU3RhdGUgJiYgaW5pdGlhbFN0YXRlLmVycm9ycyAmJiByb3V0ZS5pZCBpbiBpbml0aWFsU3RhdGUuZXJyb3JzOwogICAgICBsZXQgaW5pdGlhbEVycm9yID0gaGFzSW5pdGlhbEVycm9yID8gKF9iID0gaW5pdGlhbFN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBpbml0aWFsU3RhdGUuZXJyb3JzKSA9PSBudWxsID8gdm9pZCAwIDogX2Jbcm91dGUuaWRdIDogdm9pZCAwOwogICAgICBsZXQgaXNIeWRyYXRpb25SZXF1ZXN0ID0gbmVlZHNSZXZhbGlkYXRpb24gPT0gbnVsbCAmJiAoKChfYyA9IHJvdXRlTW9kdWxlLmNsaWVudExvYWRlcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmh5ZHJhdGUpID09PSB0cnVlIHx8ICFyb3V0ZS5oYXNMb2FkZXIpOwogICAgICBkYXRhUm91dGUubG9hZGVyID0gYXN5bmMgKHsgcmVxdWVzdCwgcGFyYW1zLCBjb250ZXh0IH0sIHNpbmdsZUZldGNoKSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCBwcmVmZXRjaFN0eWxlc0FuZENhbGxIYW5kbGVyKGFzeW5jICgpID0+IHsKICAgICAgICAgICAgaW52YXJpYW50MigKICAgICAgICAgICAgICByb3V0ZU1vZHVsZSwKICAgICAgICAgICAgICAiTm8gYHJvdXRlTW9kdWxlYCBhdmFpbGFibGUgZm9yIGNyaXRpY2FsLXJvdXRlIGxvYWRlciIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgaWYgKCFyb3V0ZU1vZHVsZS5jbGllbnRMb2FkZXIpIHsKICAgICAgICAgICAgICByZXR1cm4gZmV0Y2hTZXJ2ZXJMb2FkZXIoc2luZ2xlRmV0Y2gpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByb3V0ZU1vZHVsZS5jbGllbnRMb2FkZXIoewogICAgICAgICAgICAgIHJlcXVlc3QsCiAgICAgICAgICAgICAgcGFyYW1zLAogICAgICAgICAgICAgIGNvbnRleHQsCiAgICAgICAgICAgICAgYXN5bmMgc2VydmVyTG9hZGVyKCkgewogICAgICAgICAgICAgICAgcHJldmVudEludmFsaWRTZXJ2ZXJIYW5kbGVyQ2FsbCgibG9hZGVyIiwgcm91dGUpOwogICAgICAgICAgICAgICAgaWYgKGlzSHlkcmF0aW9uUmVxdWVzdCkgewogICAgICAgICAgICAgICAgICBpZiAoaGFzSW5pdGlhbERhdGEpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5pdGlhbERhdGE7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaWYgKGhhc0luaXRpYWxFcnJvcikgewogICAgICAgICAgICAgICAgICAgIHRocm93IGluaXRpYWxFcnJvcjsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoU2VydmVyTG9hZGVyKHNpbmdsZUZldGNoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBpc0h5ZHJhdGlvblJlcXVlc3QgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIGRhdGFSb3V0ZS5sb2FkZXIuaHlkcmF0ZSA9IHNob3VsZEh5ZHJhdGVSb3V0ZUxvYWRlcigKICAgICAgICByb3V0ZS5pZCwKICAgICAgICByb3V0ZU1vZHVsZS5jbGllbnRMb2FkZXIsCiAgICAgICAgcm91dGUuaGFzTG9hZGVyLAogICAgICAgIGlzU3BhTW9kZQogICAgICApOwogICAgICBkYXRhUm91dGUuYWN0aW9uID0gKHsgcmVxdWVzdCwgcGFyYW1zLCBjb250ZXh0IH0sIHNpbmdsZUZldGNoKSA9PiB7CiAgICAgICAgcmV0dXJuIHByZWZldGNoU3R5bGVzQW5kQ2FsbEhhbmRsZXIoYXN5bmMgKCkgPT4gewogICAgICAgICAgaW52YXJpYW50MigKICAgICAgICAgICAgcm91dGVNb2R1bGUsCiAgICAgICAgICAgICJObyBgcm91dGVNb2R1bGVgIGF2YWlsYWJsZSBmb3IgY3JpdGljYWwtcm91dGUgYWN0aW9uIgogICAgICAgICAgKTsKICAgICAgICAgIGlmICghcm91dGVNb2R1bGUuY2xpZW50QWN0aW9uKSB7CiAgICAgICAgICAgIGlmIChpc1NwYU1vZGUpIHsKICAgICAgICAgICAgICB0aHJvdyBub0FjdGlvbkRlZmluZWRFcnJvcigiY2xpZW50QWN0aW9uIiwgcm91dGUuaWQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBmZXRjaFNlcnZlckFjdGlvbihzaW5nbGVGZXRjaCk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcm91dGVNb2R1bGUuY2xpZW50QWN0aW9uKHsKICAgICAgICAgICAgcmVxdWVzdCwKICAgICAgICAgICAgcGFyYW1zLAogICAgICAgICAgICBjb250ZXh0LAogICAgICAgICAgICBhc3luYyBzZXJ2ZXJBY3Rpb24oKSB7CiAgICAgICAgICAgICAgcHJldmVudEludmFsaWRTZXJ2ZXJIYW5kbGVyQ2FsbCgiYWN0aW9uIiwgcm91dGUpOwogICAgICAgICAgICAgIHJldHVybiBmZXRjaFNlcnZlckFjdGlvbihzaW5nbGVGZXRjaCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgaWYgKCFyb3V0ZS5oYXNDbGllbnRMb2FkZXIpIHsKICAgICAgICBkYXRhUm91dGUubG9hZGVyID0gKF8sIHNpbmdsZUZldGNoKSA9PiBwcmVmZXRjaFN0eWxlc0FuZENhbGxIYW5kbGVyKCgpID0+IHsKICAgICAgICAgIHJldHVybiBmZXRjaFNlcnZlckxvYWRlcihzaW5nbGVGZXRjaCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYgKCFyb3V0ZS5oYXNDbGllbnRBY3Rpb24pIHsKICAgICAgICBkYXRhUm91dGUuYWN0aW9uID0gKF8sIHNpbmdsZUZldGNoKSA9PiBwcmVmZXRjaFN0eWxlc0FuZENhbGxIYW5kbGVyKCgpID0+IHsKICAgICAgICAgIGlmIChpc1NwYU1vZGUpIHsKICAgICAgICAgICAgdGhyb3cgbm9BY3Rpb25EZWZpbmVkRXJyb3IoImNsaWVudEFjdGlvbiIsIHJvdXRlLmlkKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmZXRjaFNlcnZlckFjdGlvbihzaW5nbGVGZXRjaCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgbGV0IGxhenlSb3V0ZVByb21pc2U7CiAgICAgIGFzeW5jIGZ1bmN0aW9uIGdldExhenlSb3V0ZSgpIHsKICAgICAgICBpZiAobGF6eVJvdXRlUHJvbWlzZSkgewogICAgICAgICAgcmV0dXJuIGF3YWl0IGxhenlSb3V0ZVByb21pc2U7CiAgICAgICAgfQogICAgICAgIGxhenlSb3V0ZVByb21pc2UgPSAoYXN5bmMgKCkgPT4gewogICAgICAgICAgaWYgKHJvdXRlLmNsaWVudExvYWRlck1vZHVsZSB8fCByb3V0ZS5jbGllbnRBY3Rpb25Nb2R1bGUpIHsKICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpOwogICAgICAgICAgfQogICAgICAgICAgbGV0IHJvdXRlTW9kdWxlUHJvbWlzZSA9IGxvYWRSb3V0ZU1vZHVsZVdpdGhCbG9ja2luZ0xpbmtzKAogICAgICAgICAgICByb3V0ZSwKICAgICAgICAgICAgcm91dGVNb2R1bGVzQ2FjaGUKICAgICAgICAgICk7CiAgICAgICAgICBwcmVmZXRjaFJvdXRlTW9kdWxlQ2h1bmtzKHJvdXRlKTsKICAgICAgICAgIHJldHVybiBhd2FpdCByb3V0ZU1vZHVsZVByb21pc2U7CiAgICAgICAgfSkoKTsKICAgICAgICByZXR1cm4gYXdhaXQgbGF6eVJvdXRlUHJvbWlzZTsKICAgICAgfQogICAgICBkYXRhUm91dGUubGF6eSA9IHsKICAgICAgICBsb2FkZXI6IHJvdXRlLmhhc0NsaWVudExvYWRlciA/IGFzeW5jICgpID0+IHsKICAgICAgICAgIGxldCB7IGNsaWVudExvYWRlciB9ID0gcm91dGUuY2xpZW50TG9hZGVyTW9kdWxlID8gYXdhaXQgaW1wb3J0KAogICAgICAgICAgICAvKiBAdml0ZS1pZ25vcmUgKi8KICAgICAgICAgICAgLyogd2VicGFja0lnbm9yZTogdHJ1ZSAqLwogICAgICAgICAgICBfX3ZpdGVfX2luamVjdFF1ZXJ5KHJvdXRlLmNsaWVudExvYWRlck1vZHVsZSwgJ2ltcG9ydCcpCiAgICAgICAgICApIDogYXdhaXQgZ2V0TGF6eVJvdXRlKCk7CiAgICAgICAgICBpbnZhcmlhbnQyKGNsaWVudExvYWRlciwgIk5vIGBjbGllbnRMb2FkZXJgIGV4cG9ydCBmb3VuZCIpOwogICAgICAgICAgcmV0dXJuIChhcmdzLCBzaW5nbGVGZXRjaCkgPT4gY2xpZW50TG9hZGVyKHsKICAgICAgICAgICAgLi4uYXJncywKICAgICAgICAgICAgYXN5bmMgc2VydmVyTG9hZGVyKCkgewogICAgICAgICAgICAgIHByZXZlbnRJbnZhbGlkU2VydmVySGFuZGxlckNhbGwoImxvYWRlciIsIHJvdXRlKTsKICAgICAgICAgICAgICByZXR1cm4gZmV0Y2hTZXJ2ZXJMb2FkZXIoc2luZ2xlRmV0Y2gpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IDogdm9pZCAwLAogICAgICAgIGFjdGlvbjogcm91dGUuaGFzQ2xpZW50QWN0aW9uID8gYXN5bmMgKCkgPT4gewogICAgICAgICAgbGV0IGNsaWVudEFjdGlvblByb21pc2UgPSByb3V0ZS5jbGllbnRBY3Rpb25Nb2R1bGUgPyBpbXBvcnQoCiAgICAgICAgICAgIC8qIEB2aXRlLWlnbm9yZSAqLwogICAgICAgICAgICAvKiB3ZWJwYWNrSWdub3JlOiB0cnVlICovCiAgICAgICAgICAgIF9fdml0ZV9faW5qZWN0UXVlcnkocm91dGUuY2xpZW50QWN0aW9uTW9kdWxlLCAnaW1wb3J0JykKICAgICAgICAgICkgOiBnZXRMYXp5Um91dGUoKTsKICAgICAgICAgIHByZWZldGNoUm91dGVNb2R1bGVDaHVua3Mocm91dGUpOwogICAgICAgICAgbGV0IHsgY2xpZW50QWN0aW9uIH0gPSBhd2FpdCBjbGllbnRBY3Rpb25Qcm9taXNlOwogICAgICAgICAgaW52YXJpYW50MihjbGllbnRBY3Rpb24sICJObyBgY2xpZW50QWN0aW9uYCBleHBvcnQgZm91bmQiKTsKICAgICAgICAgIHJldHVybiAoYXJncywgc2luZ2xlRmV0Y2gpID0+IGNsaWVudEFjdGlvbih7CiAgICAgICAgICAgIC4uLmFyZ3MsCiAgICAgICAgICAgIGFzeW5jIHNlcnZlckFjdGlvbigpIHsKICAgICAgICAgICAgICBwcmV2ZW50SW52YWxpZFNlcnZlckhhbmRsZXJDYWxsKCJhY3Rpb24iLCByb3V0ZSk7CiAgICAgICAgICAgICAgcmV0dXJuIGZldGNoU2VydmVyQWN0aW9uKHNpbmdsZUZldGNoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSA6IHZvaWQgMCwKICAgICAgICBtaWRkbGV3YXJlOiByb3V0ZS5oYXNDbGllbnRNaWRkbGV3YXJlID8gYXN5bmMgKCkgPT4gewogICAgICAgICAgbGV0IHsgY2xpZW50TWlkZGxld2FyZSB9ID0gcm91dGUuY2xpZW50TWlkZGxld2FyZU1vZHVsZSA/IGF3YWl0IGltcG9ydCgKICAgICAgICAgICAgLyogQHZpdGUtaWdub3JlICovCiAgICAgICAgICAgIC8qIHdlYnBhY2tJZ25vcmU6IHRydWUgKi8KICAgICAgICAgICAgX192aXRlX19pbmplY3RRdWVyeShyb3V0ZS5jbGllbnRNaWRkbGV3YXJlTW9kdWxlLCAnaW1wb3J0JykKICAgICAgICAgICkgOiBhd2FpdCBnZXRMYXp5Um91dGUoKTsKICAgICAgICAgIGludmFyaWFudDIoY2xpZW50TWlkZGxld2FyZSwgIk5vIGBjbGllbnRNaWRkbGV3YXJlYCBleHBvcnQgZm91bmQiKTsKICAgICAgICAgIHJldHVybiBjbGllbnRNaWRkbGV3YXJlOwogICAgICAgIH0gOiB2b2lkIDAsCiAgICAgICAgc2hvdWxkUmV2YWxpZGF0ZTogYXN5bmMgKCkgPT4gewogICAgICAgICAgbGV0IGxhenlSb3V0ZSA9IGF3YWl0IGdldExhenlSb3V0ZSgpOwogICAgICAgICAgcmV0dXJuIGdldFNob3VsZFJldmFsaWRhdGVGdW5jdGlvbigKICAgICAgICAgICAgZGF0YVJvdXRlLnBhdGgsCiAgICAgICAgICAgIGxhenlSb3V0ZSwKICAgICAgICAgICAgcm91dGUsCiAgICAgICAgICAgIHNzciwKICAgICAgICAgICAgbmVlZHNSZXZhbGlkYXRpb24KICAgICAgICAgICk7CiAgICAgICAgfSwKICAgICAgICBoYW5kbGU6IGFzeW5jICgpID0+IChhd2FpdCBnZXRMYXp5Um91dGUoKSkuaGFuZGxlLAogICAgICAgIC8vIE5vIG5lZWQgdG8gd3JhcCB0aGVzZSBpbiBsYXlvdXQgc2luY2UgdGhlIHJvb3Qgcm91dGUgaXMgbmV2ZXIKICAgICAgICAvLyBsb2FkZWQgdmlhIHJvdXRlLmxhenkoKQogICAgICAgIENvbXBvbmVudDogYXN5bmMgKCkgPT4gKGF3YWl0IGdldExhenlSb3V0ZSgpKS5Db21wb25lbnQsCiAgICAgICAgRXJyb3JCb3VuZGFyeTogcm91dGUuaGFzRXJyb3JCb3VuZGFyeSA/IGFzeW5jICgpID0+IChhd2FpdCBnZXRMYXp5Um91dGUoKSkuRXJyb3JCb3VuZGFyeSA6IHZvaWQgMAogICAgICB9OwogICAgfQogICAgbGV0IGNoaWxkcmVuID0gY3JlYXRlQ2xpZW50Um91dGVzKAogICAgICBtYW5pZmVzdCwKICAgICAgcm91dGVNb2R1bGVzQ2FjaGUsCiAgICAgIGluaXRpYWxTdGF0ZSwKICAgICAgc3NyLAogICAgICBpc1NwYU1vZGUsCiAgICAgIHJvdXRlLmlkLAogICAgICByb3V0ZXNCeVBhcmVudElkLAogICAgICBuZWVkc1JldmFsaWRhdGlvbgogICAgKTsKICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPiAwKSBkYXRhUm91dGUuY2hpbGRyZW4gPSBjaGlsZHJlbjsKICAgIHJldHVybiBkYXRhUm91dGU7CiAgfSk7Cn0KZnVuY3Rpb24gZ2V0U2hvdWxkUmV2YWxpZGF0ZUZ1bmN0aW9uKHBhdGgsIHJvdXRlLCBtYW5pZmVzdFJvdXRlLCBzc3IsIG5lZWRzUmV2YWxpZGF0aW9uKSB7CiAgaWYgKG5lZWRzUmV2YWxpZGF0aW9uKSB7CiAgICByZXR1cm4gd3JhcFNob3VsZFJldmFsaWRhdGVGb3JIZHIoCiAgICAgIG1hbmlmZXN0Um91dGUuaWQsCiAgICAgIHJvdXRlLnNob3VsZFJldmFsaWRhdGUsCiAgICAgIG5lZWRzUmV2YWxpZGF0aW9uCiAgICApOwogIH0KICBpZiAoIXNzciAmJiBtYW5pZmVzdFJvdXRlLmhhc0xvYWRlciAmJiAhbWFuaWZlc3RSb3V0ZS5oYXNDbGllbnRMb2FkZXIpIHsKICAgIGxldCBteVBhcmFtcyA9IHBhdGggPyBjb21waWxlUGF0aChwYXRoKVsxXS5tYXAoKHApID0+IHAucGFyYW1OYW1lKSA6IFtdOwogICAgY29uc3QgZGlkUGFyYW1zQ2hhbmdlID0gKG9wdHMpID0+IG15UGFyYW1zLnNvbWUoKHApID0+IG9wdHMuY3VycmVudFBhcmFtc1twXSAhPT0gb3B0cy5uZXh0UGFyYW1zW3BdKTsKICAgIGlmIChyb3V0ZS5zaG91bGRSZXZhbGlkYXRlKSB7CiAgICAgIGxldCBmbiA9IHJvdXRlLnNob3VsZFJldmFsaWRhdGU7CiAgICAgIHJldHVybiAob3B0cykgPT4gZm4oewogICAgICAgIC4uLm9wdHMsCiAgICAgICAgZGVmYXVsdFNob3VsZFJldmFsaWRhdGU6IGRpZFBhcmFtc0NoYW5nZShvcHRzKQogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiAob3B0cykgPT4gZGlkUGFyYW1zQ2hhbmdlKG9wdHMpOwogICAgfQogIH0KICBpZiAoc3NyICYmIHJvdXRlLnNob3VsZFJldmFsaWRhdGUpIHsKICAgIGxldCBmbiA9IHJvdXRlLnNob3VsZFJldmFsaWRhdGU7CiAgICByZXR1cm4gKG9wdHMpID0+IGZuKHsgLi4ub3B0cywgZGVmYXVsdFNob3VsZFJldmFsaWRhdGU6IHRydWUgfSk7CiAgfQogIHJldHVybiByb3V0ZS5zaG91bGRSZXZhbGlkYXRlOwp9CmZ1bmN0aW9uIHdyYXBTaG91bGRSZXZhbGlkYXRlRm9ySGRyKHJvdXRlSWQsIHJvdXRlU2hvdWxkUmV2YWxpZGF0ZSwgbmVlZHNSZXZhbGlkYXRpb24pIHsKICBsZXQgaGFuZGxlZFJldmFsaWRhdGlvbiA9IGZhbHNlOwogIHJldHVybiAoYXJnKSA9PiB7CiAgICBpZiAoIWhhbmRsZWRSZXZhbGlkYXRpb24pIHsKICAgICAgaGFuZGxlZFJldmFsaWRhdGlvbiA9IHRydWU7CiAgICAgIHJldHVybiBuZWVkc1JldmFsaWRhdGlvbi5oYXMocm91dGVJZCk7CiAgICB9CiAgICByZXR1cm4gcm91dGVTaG91bGRSZXZhbGlkYXRlID8gcm91dGVTaG91bGRSZXZhbGlkYXRlKGFyZykgOiBhcmcuZGVmYXVsdFNob3VsZFJldmFsaWRhdGU7CiAgfTsKfQphc3luYyBmdW5jdGlvbiBsb2FkUm91dGVNb2R1bGVXaXRoQmxvY2tpbmdMaW5rcyhyb3V0ZSwgcm91dGVNb2R1bGVzKSB7CiAgbGV0IHJvdXRlTW9kdWxlUHJvbWlzZSA9IGxvYWRSb3V0ZU1vZHVsZShyb3V0ZSwgcm91dGVNb2R1bGVzKTsKICBsZXQgcHJlZmV0Y2hSb3V0ZUNzc1Byb21pc2UgPSBwcmVmZXRjaFJvdXRlQ3NzKHJvdXRlKTsKICBsZXQgcm91dGVNb2R1bGUgPSBhd2FpdCByb3V0ZU1vZHVsZVByb21pc2U7CiAgYXdhaXQgUHJvbWlzZS5hbGwoWwogICAgcHJlZmV0Y2hSb3V0ZUNzc1Byb21pc2UsCiAgICBwcmVmZXRjaFN0eWxlTGlua3Mocm91dGUsIHJvdXRlTW9kdWxlKQogIF0pOwogIHJldHVybiB7CiAgICBDb21wb25lbnQ6IGdldFJvdXRlTW9kdWxlQ29tcG9uZW50KHJvdXRlTW9kdWxlKSwKICAgIEVycm9yQm91bmRhcnk6IHJvdXRlTW9kdWxlLkVycm9yQm91bmRhcnksCiAgICBjbGllbnRNaWRkbGV3YXJlOiByb3V0ZU1vZHVsZS5jbGllbnRNaWRkbGV3YXJlLAogICAgY2xpZW50QWN0aW9uOiByb3V0ZU1vZHVsZS5jbGllbnRBY3Rpb24sCiAgICBjbGllbnRMb2FkZXI6IHJvdXRlTW9kdWxlLmNsaWVudExvYWRlciwKICAgIGhhbmRsZTogcm91dGVNb2R1bGUuaGFuZGxlLAogICAgbGlua3M6IHJvdXRlTW9kdWxlLmxpbmtzLAogICAgbWV0YTogcm91dGVNb2R1bGUubWV0YSwKICAgIHNob3VsZFJldmFsaWRhdGU6IHJvdXRlTW9kdWxlLnNob3VsZFJldmFsaWRhdGUKICB9Owp9CmZ1bmN0aW9uIGdldFJvdXRlTW9kdWxlQ29tcG9uZW50KHJvdXRlTW9kdWxlKSB7CiAgaWYgKHJvdXRlTW9kdWxlLmRlZmF1bHQgPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDsKICBsZXQgaXNFbXB0eU9iamVjdCA9IHR5cGVvZiByb3V0ZU1vZHVsZS5kZWZhdWx0ID09PSAib2JqZWN0IiAmJiBPYmplY3Qua2V5cyhyb3V0ZU1vZHVsZS5kZWZhdWx0KS5sZW5ndGggPT09IDA7CiAgaWYgKCFpc0VtcHR5T2JqZWN0KSB7CiAgICByZXR1cm4gcm91dGVNb2R1bGUuZGVmYXVsdDsKICB9Cn0KZnVuY3Rpb24gc2hvdWxkSHlkcmF0ZVJvdXRlTG9hZGVyKHJvdXRlSWQsIGNsaWVudExvYWRlciwgaGFzTG9hZGVyLCBpc1NwYU1vZGUpIHsKICByZXR1cm4gaXNTcGFNb2RlICYmIHJvdXRlSWQgIT09ICJyb290IiB8fCBjbGllbnRMb2FkZXIgIT0gbnVsbCAmJiAoY2xpZW50TG9hZGVyLmh5ZHJhdGUgPT09IHRydWUgfHwgaGFzTG9hZGVyICE9PSB0cnVlKTsKfQp2YXIgbmV4dFBhdGhzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKdmFyIGRpc2NvdmVyZWRQYXRoc01heFNpemUgPSAxZTM7CnZhciBkaXNjb3ZlcmVkUGF0aHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwp2YXIgVVJMX0xJTUlUID0gNzY4MDsKZnVuY3Rpb24gaXNGb2dPZldhckVuYWJsZWQocm91dGVEaXNjb3ZlcnksIHNzcikgewogIHJldHVybiByb3V0ZURpc2NvdmVyeS5tb2RlID09PSAibGF6eSIgJiYgc3NyID09PSB0cnVlOwp9CmZ1bmN0aW9uIGdldFBhcnRpYWxNYW5pZmVzdCh7IHNyaSwgLi4ubWFuaWZlc3QgfSwgcm91dGVyMikgewogIGxldCByb3V0ZUlkcyA9IG5ldyBTZXQocm91dGVyMi5zdGF0ZS5tYXRjaGVzLm1hcCgobSkgPT4gbS5yb3V0ZS5pZCkpOwogIGxldCBzZWdtZW50cyA9IHJvdXRlcjIuc3RhdGUubG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoIi8iKS5maWx0ZXIoQm9vbGVhbik7CiAgbGV0IHBhdGhzID0gWyIvIl07CiAgc2VnbWVudHMucG9wKCk7CiAgd2hpbGUgKHNlZ21lbnRzLmxlbmd0aCA+IDApIHsKICAgIHBhdGhzLnB1c2goYC8ke3NlZ21lbnRzLmpvaW4oIi8iKX1gKTsKICAgIHNlZ21lbnRzLnBvcCgpOwogIH0KICBwYXRocy5mb3JFYWNoKChwYXRoKSA9PiB7CiAgICBsZXQgbWF0Y2hlcyA9IG1hdGNoUm91dGVzKHJvdXRlcjIucm91dGVzLCBwYXRoLCByb3V0ZXIyLmJhc2VuYW1lKTsKICAgIGlmIChtYXRjaGVzKSB7CiAgICAgIG1hdGNoZXMuZm9yRWFjaCgobSkgPT4gcm91dGVJZHMuYWRkKG0ucm91dGUuaWQpKTsKICAgIH0KICB9KTsKICBsZXQgaW5pdGlhbFJvdXRlcyA9IFsuLi5yb3V0ZUlkc10ucmVkdWNlKAogICAgKGFjYywgaWQpID0+IE9iamVjdC5hc3NpZ24oYWNjLCB7IFtpZF06IG1hbmlmZXN0LnJvdXRlc1tpZF0gfSksCiAgICB7fQogICk7CiAgcmV0dXJuIHsKICAgIC4uLm1hbmlmZXN0LAogICAgcm91dGVzOiBpbml0aWFsUm91dGVzLAogICAgc3JpOiBzcmkgPyB0cnVlIDogdm9pZCAwCiAgfTsKfQpmdW5jdGlvbiBnZXRQYXRjaFJvdXRlc09uTmF2aWdhdGlvbkZ1bmN0aW9uKG1hbmlmZXN0LCByb3V0ZU1vZHVsZXMsIHNzciwgcm91dGVEaXNjb3ZlcnksIGlzU3BhTW9kZSwgYmFzZW5hbWUpIHsKICBpZiAoIWlzRm9nT2ZXYXJFbmFibGVkKHJvdXRlRGlzY292ZXJ5LCBzc3IpKSB7CiAgICByZXR1cm4gdm9pZCAwOwogIH0KICByZXR1cm4gYXN5bmMgKHsgcGF0aCwgcGF0Y2gsIHNpZ25hbCwgZmV0Y2hlcktleSB9KSA9PiB7CiAgICBpZiAoZGlzY292ZXJlZFBhdGhzLmhhcyhwYXRoKSkgewogICAgICByZXR1cm47CiAgICB9CiAgICBhd2FpdCBmZXRjaEFuZEFwcGx5TWFuaWZlc3RQYXRjaGVzKAogICAgICBbcGF0aF0sCiAgICAgIGZldGNoZXJLZXkgPyB3aW5kb3cubG9jYXRpb24uaHJlZiA6IHBhdGgsCiAgICAgIG1hbmlmZXN0LAogICAgICByb3V0ZU1vZHVsZXMsCiAgICAgIHNzciwKICAgICAgaXNTcGFNb2RlLAogICAgICBiYXNlbmFtZSwKICAgICAgcm91dGVEaXNjb3ZlcnkubWFuaWZlc3RQYXRoLAogICAgICBwYXRjaCwKICAgICAgc2lnbmFsCiAgICApOwogIH07Cn0KZnVuY3Rpb24gdXNlRm9nT0ZXYXJEaXNjb3Zlcnkocm91dGVyMiwgbWFuaWZlc3QsIHJvdXRlTW9kdWxlcywgc3NyLCByb3V0ZURpc2NvdmVyeSwgaXNTcGFNb2RlKSB7CiAgUmVhY3Q3LnVzZUVmZmVjdCgoKSA9PiB7CiAgICB2YXIgX2EsIF9iOwogICAgaWYgKCFpc0ZvZ09mV2FyRW5hYmxlZChyb3V0ZURpc2NvdmVyeSwgc3NyKSB8fCAvLyBAdHMtZXhwZWN0LWVycm9yIC0gVFMgZG9lc24ndCBrbm93IGFib3V0IHRoaXMgeWV0CiAgICAoKF9iID0gKF9hID0gd2luZG93Lm5hdmlnYXRvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNvbm5lY3Rpb24pID09IG51bGwgPyB2b2lkIDAgOiBfYi5zYXZlRGF0YSkgPT09IHRydWUpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgZnVuY3Rpb24gcmVnaXN0ZXJFbGVtZW50KGVsKSB7CiAgICAgIGxldCBwYXRoID0gZWwudGFnTmFtZSA9PT0gIkZPUk0iID8gZWwuZ2V0QXR0cmlidXRlKCJhY3Rpb24iKSA6IGVsLmdldEF0dHJpYnV0ZSgiaHJlZiIpOwogICAgICBpZiAoIXBhdGgpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbGV0IHBhdGhuYW1lID0gZWwudGFnTmFtZSA9PT0gIkEiID8gZWwucGF0aG5hbWUgOiBuZXcgVVJMKHBhdGgsIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pLnBhdGhuYW1lOwogICAgICBpZiAoIWRpc2NvdmVyZWRQYXRocy5oYXMocGF0aG5hbWUpKSB7CiAgICAgICAgbmV4dFBhdGhzLmFkZChwYXRobmFtZSk7CiAgICAgIH0KICAgIH0KICAgIGFzeW5jIGZ1bmN0aW9uIGZldGNoUGF0Y2hlcygpIHsKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiYVtkYXRhLWRpc2NvdmVyXSwgZm9ybVtkYXRhLWRpc2NvdmVyXSIpLmZvckVhY2gocmVnaXN0ZXJFbGVtZW50KTsKICAgICAgbGV0IGxhenlQYXRocyA9IEFycmF5LmZyb20obmV4dFBhdGhzLmtleXMoKSkuZmlsdGVyKChwYXRoKSA9PiB7CiAgICAgICAgaWYgKGRpc2NvdmVyZWRQYXRocy5oYXMocGF0aCkpIHsKICAgICAgICAgIG5leHRQYXRocy5kZWxldGUocGF0aCk7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9KTsKICAgICAgaWYgKGxhenlQYXRocy5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICBhd2FpdCBmZXRjaEFuZEFwcGx5TWFuaWZlc3RQYXRjaGVzKAogICAgICAgICAgbGF6eVBhdGhzLAogICAgICAgICAgbnVsbCwKICAgICAgICAgIG1hbmlmZXN0LAogICAgICAgICAgcm91dGVNb2R1bGVzLAogICAgICAgICAgc3NyLAogICAgICAgICAgaXNTcGFNb2RlLAogICAgICAgICAgcm91dGVyMi5iYXNlbmFtZSwKICAgICAgICAgIHJvdXRlRGlzY292ZXJ5Lm1hbmlmZXN0UGF0aCwKICAgICAgICAgIHJvdXRlcjIucGF0Y2hSb3V0ZXMKICAgICAgICApOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5lcnJvcigiRmFpbGVkIHRvIGZldGNoIG1hbmlmZXN0IHBhdGNoZXMiLCBlKTsKICAgICAgfQogICAgfQogICAgbGV0IGRlYm91bmNlZEZldGNoUGF0Y2hlcyA9IGRlYm91bmNlKGZldGNoUGF0Y2hlcywgMTAwKTsKICAgIGZldGNoUGF0Y2hlcygpOwogICAgbGV0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4gZGVib3VuY2VkRmV0Y2hQYXRjaGVzKCkpOwogICAgb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHsKICAgICAgc3VidHJlZTogdHJ1ZSwKICAgICAgY2hpbGRMaXN0OiB0cnVlLAogICAgICBhdHRyaWJ1dGVzOiB0cnVlLAogICAgICBhdHRyaWJ1dGVGaWx0ZXI6IFsiZGF0YS1kaXNjb3ZlciIsICJocmVmIiwgImFjdGlvbiJdCiAgICB9KTsKICAgIHJldHVybiAoKSA9PiBvYnNlcnZlci5kaXNjb25uZWN0KCk7CiAgfSwgW3NzciwgaXNTcGFNb2RlLCBtYW5pZmVzdCwgcm91dGVNb2R1bGVzLCByb3V0ZXIyLCByb3V0ZURpc2NvdmVyeV0pOwp9CmZ1bmN0aW9uIGdldE1hbmlmZXN0UGF0aChfbWFuaWZlc3RQYXRoLCBiYXNlbmFtZSkgewogIGxldCBtYW5pZmVzdFBhdGggPSBfbWFuaWZlc3RQYXRoIHx8ICIvX19tYW5pZmVzdCI7CiAgaWYgKGJhc2VuYW1lID09IG51bGwpIHsKICAgIHJldHVybiBtYW5pZmVzdFBhdGg7CiAgfQogIHJldHVybiBgJHtiYXNlbmFtZX0ke21hbmlmZXN0UGF0aH1gLnJlcGxhY2UoL1wvKy9nLCAiLyIpOwp9CnZhciBNQU5JRkVTVF9WRVJTSU9OX1NUT1JBR0VfS0VZID0gInJlYWN0LXJvdXRlci1tYW5pZmVzdC12ZXJzaW9uIjsKYXN5bmMgZnVuY3Rpb24gZmV0Y2hBbmRBcHBseU1hbmlmZXN0UGF0Y2hlcyhwYXRocywgZXJyb3JSZWxvYWRQYXRoLCBtYW5pZmVzdCwgcm91dGVNb2R1bGVzLCBzc3IsIGlzU3BhTW9kZSwgYmFzZW5hbWUsIG1hbmlmZXN0UGF0aCwgcGF0Y2hSb3V0ZXMsIHNpZ25hbCkgewogIGNvbnN0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsKICBwYXRocy5zb3J0KCkuZm9yRWFjaCgocGF0aCkgPT4gc2VhcmNoUGFyYW1zLmFwcGVuZCgicCIsIHBhdGgpKTsKICBzZWFyY2hQYXJhbXMuc2V0KCJ2ZXJzaW9uIiwgbWFuaWZlc3QudmVyc2lvbik7CiAgbGV0IHVybCA9IG5ldyBVUkwoCiAgICBnZXRNYW5pZmVzdFBhdGgobWFuaWZlc3RQYXRoLCBiYXNlbmFtZSksCiAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luCiAgKTsKICB1cmwuc2VhcmNoID0gc2VhcmNoUGFyYW1zLnRvU3RyaW5nKCk7CiAgaWYgKHVybC50b1N0cmluZygpLmxlbmd0aCA+IFVSTF9MSU1JVCkgewogICAgbmV4dFBhdGhzLmNsZWFyKCk7CiAgICByZXR1cm47CiAgfQogIGxldCBzZXJ2ZXJQYXRjaGVzOwogIHRyeSB7CiAgICBsZXQgcmVzID0gYXdhaXQgZmV0Y2godXJsLCB7IHNpZ25hbCB9KTsKICAgIGlmICghcmVzLm9rKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcihgJHtyZXMuc3RhdHVzfSAke3Jlcy5zdGF0dXNUZXh0fWApOwogICAgfSBlbHNlIGlmIChyZXMuc3RhdHVzID09PSAyMDQgJiYgcmVzLmhlYWRlcnMuaGFzKCJYLVJlbWl4LVJlbG9hZC1Eb2N1bWVudCIpKSB7CiAgICAgIGlmICghZXJyb3JSZWxvYWRQYXRoKSB7CiAgICAgICAgY29uc29sZS53YXJuKAogICAgICAgICAgIkRldGVjdGVkIGEgbWFuaWZlc3QgdmVyc2lvbiBtaXNtYXRjaCBkdXJpbmcgZWFnZXIgcm91dGUgZGlzY292ZXJ5LiBUaGUgbmV4dCBuYXZpZ2F0aW9uL2ZldGNoIHRvIGFuIHVuZGlzY292ZXJlZCByb3V0ZSB3aWxsIHJlc3VsdCBpbiBhIG5ldyBkb2N1bWVudCBuYXZpZ2F0aW9uIHRvIHN5bmMgdXAgd2l0aCB0aGUgbGF0ZXN0IG1hbmlmZXN0LiIKICAgICAgICApOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShNQU5JRkVTVF9WRVJTSU9OX1NUT1JBR0VfS0VZKSA9PT0gbWFuaWZlc3QudmVyc2lvbikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAiVW5hYmxlIHRvIGRpc2NvdmVyIHJvdXRlcyBkdWUgdG8gbWFuaWZlc3QgdmVyc2lvbiBtaXNtYXRjaC4iCiAgICAgICAgKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShNQU5JRkVTVF9WRVJTSU9OX1NUT1JBR0VfS0VZLCBtYW5pZmVzdC52ZXJzaW9uKTsKICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBlcnJvclJlbG9hZFBhdGg7CiAgICAgIGNvbnNvbGUud2FybigiRGV0ZWN0ZWQgbWFuaWZlc3QgdmVyc2lvbiBtaXNtYXRjaCwgcmVsb2FkaW5nLi4uIik7CiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKCgpID0+IHsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHJlcy5zdGF0dXMgPj0gNDAwKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcihhd2FpdCByZXMudGV4dCgpKTsKICAgIH0KICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oTUFOSUZFU1RfVkVSU0lPTl9TVE9SQUdFX0tFWSk7CiAgICBzZXJ2ZXJQYXRjaGVzID0gYXdhaXQgcmVzLmpzb24oKTsKICB9IGNhdGNoIChlKSB7CiAgICBpZiAoc2lnbmFsID09IG51bGwgPyB2b2lkIDAgOiBzaWduYWwuYWJvcnRlZCkgcmV0dXJuOwogICAgdGhyb3cgZTsKICB9CiAgbGV0IGtub3duUm91dGVzID0gbmV3IFNldChPYmplY3Qua2V5cyhtYW5pZmVzdC5yb3V0ZXMpKTsKICBsZXQgcGF0Y2hlcyA9IE9iamVjdC52YWx1ZXMoc2VydmVyUGF0Y2hlcykucmVkdWNlKChhY2MsIHJvdXRlKSA9PiB7CiAgICBpZiAocm91dGUgJiYgIWtub3duUm91dGVzLmhhcyhyb3V0ZS5pZCkpIHsKICAgICAgYWNjW3JvdXRlLmlkXSA9IHJvdXRlOwogICAgfQogICAgcmV0dXJuIGFjYzsKICB9LCB7fSk7CiAgT2JqZWN0LmFzc2lnbihtYW5pZmVzdC5yb3V0ZXMsIHBhdGNoZXMpOwogIHBhdGhzLmZvckVhY2goKHApID0+IGFkZFRvRmlmb1F1ZXVlKHAsIGRpc2NvdmVyZWRQYXRocykpOwogIGxldCBwYXJlbnRJZHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogIE9iamVjdC52YWx1ZXMocGF0Y2hlcykuZm9yRWFjaCgocGF0Y2gpID0+IHsKICAgIGlmIChwYXRjaCAmJiAoIXBhdGNoLnBhcmVudElkIHx8ICFwYXRjaGVzW3BhdGNoLnBhcmVudElkXSkpIHsKICAgICAgcGFyZW50SWRzLmFkZChwYXRjaC5wYXJlbnRJZCk7CiAgICB9CiAgfSk7CiAgcGFyZW50SWRzLmZvckVhY2goCiAgICAocGFyZW50SWQpID0+IHBhdGNoUm91dGVzKAogICAgICBwYXJlbnRJZCB8fCBudWxsLAogICAgICBjcmVhdGVDbGllbnRSb3V0ZXMocGF0Y2hlcywgcm91dGVNb2R1bGVzLCBudWxsLCBzc3IsIGlzU3BhTW9kZSwgcGFyZW50SWQpCiAgICApCiAgKTsKfQpmdW5jdGlvbiBhZGRUb0ZpZm9RdWV1ZShwYXRoLCBxdWV1ZSkgewogIGlmIChxdWV1ZS5zaXplID49IGRpc2NvdmVyZWRQYXRoc01heFNpemUpIHsKICAgIGxldCBmaXJzdCA9IHF1ZXVlLnZhbHVlcygpLm5leHQoKS52YWx1ZTsKICAgIHF1ZXVlLmRlbGV0ZShmaXJzdCk7CiAgfQogIHF1ZXVlLmFkZChwYXRoKTsKfQpmdW5jdGlvbiBkZWJvdW5jZShjYWxsYmFjaywgd2FpdCkgewogIGxldCB0aW1lb3V0SWQ7CiAgcmV0dXJuICguLi5hcmdzKSA9PiB7CiAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7CiAgICB0aW1lb3V0SWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiBjYWxsYmFjayguLi5hcmdzKSwgd2FpdCk7CiAgfTsKfQpmdW5jdGlvbiB1c2VEYXRhUm91dGVyQ29udGV4dDIoKSB7CiAgbGV0IGNvbnRleHQgPSBSZWFjdDgudXNlQ29udGV4dChEYXRhUm91dGVyQ29udGV4dCk7CiAgaW52YXJpYW50MigKICAgIGNvbnRleHQsCiAgICAiWW91IG11c3QgcmVuZGVyIHRoaXMgZWxlbWVudCBpbnNpZGUgYSA8RGF0YVJvdXRlckNvbnRleHQuUHJvdmlkZXI+IGVsZW1lbnQiCiAgKTsKICByZXR1cm4gY29udGV4dDsKfQpmdW5jdGlvbiB1c2VEYXRhUm91dGVyU3RhdGVDb250ZXh0KCkgewogIGxldCBjb250ZXh0ID0gUmVhY3Q4LnVzZUNvbnRleHQoRGF0YVJvdXRlclN0YXRlQ29udGV4dCk7CiAgaW52YXJpYW50MigKICAgIGNvbnRleHQsCiAgICAiWW91IG11c3QgcmVuZGVyIHRoaXMgZWxlbWVudCBpbnNpZGUgYSA8RGF0YVJvdXRlclN0YXRlQ29udGV4dC5Qcm92aWRlcj4gZWxlbWVudCIKICApOwogIHJldHVybiBjb250ZXh0Owp9CnZhciBGcmFtZXdvcmtDb250ZXh0ID0gUmVhY3Q4LmNyZWF0ZUNvbnRleHQodm9pZCAwKTsKRnJhbWV3b3JrQ29udGV4dC5kaXNwbGF5TmFtZSA9ICJGcmFtZXdvcmtDb250ZXh0IjsKZnVuY3Rpb24gdXNlRnJhbWV3b3JrQ29udGV4dCgpIHsKICBsZXQgY29udGV4dCA9IFJlYWN0OC51c2VDb250ZXh0KEZyYW1ld29ya0NvbnRleHQpOwogIGludmFyaWFudDIoCiAgICBjb250ZXh0LAogICAgIllvdSBtdXN0IHJlbmRlciB0aGlzIGVsZW1lbnQgaW5zaWRlIGEgPEh5ZHJhdGVkUm91dGVyPiBlbGVtZW50IgogICk7CiAgcmV0dXJuIGNvbnRleHQ7Cn0KZnVuY3Rpb24gdXNlUHJlZmV0Y2hCZWhhdmlvcihwcmVmZXRjaCwgdGhlaXJFbGVtZW50UHJvcHMpIHsKICBsZXQgZnJhbWV3b3JrQ29udGV4dCA9IFJlYWN0OC51c2VDb250ZXh0KEZyYW1ld29ya0NvbnRleHQpOwogIGxldCBbbWF5YmVQcmVmZXRjaCwgc2V0TWF5YmVQcmVmZXRjaF0gPSBSZWFjdDgudXNlU3RhdGUoZmFsc2UpOwogIGxldCBbc2hvdWxkUHJlZmV0Y2gsIHNldFNob3VsZFByZWZldGNoXSA9IFJlYWN0OC51c2VTdGF0ZShmYWxzZSk7CiAgbGV0IHsgb25Gb2N1cywgb25CbHVyLCBvbk1vdXNlRW50ZXIsIG9uTW91c2VMZWF2ZSwgb25Ub3VjaFN0YXJ0IH0gPSB0aGVpckVsZW1lbnRQcm9wczsKICBsZXQgcmVmID0gUmVhY3Q4LnVzZVJlZihudWxsKTsKICBSZWFjdDgudXNlRWZmZWN0KCgpID0+IHsKICAgIGlmIChwcmVmZXRjaCA9PT0gInJlbmRlciIpIHsKICAgICAgc2V0U2hvdWxkUHJlZmV0Y2godHJ1ZSk7CiAgICB9CiAgICBpZiAocHJlZmV0Y2ggPT09ICJ2aWV3cG9ydCIpIHsKICAgICAgbGV0IGNhbGxiYWNrID0gKGVudHJpZXMpID0+IHsKICAgICAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5KSA9PiB7CiAgICAgICAgICBzZXRTaG91bGRQcmVmZXRjaChlbnRyeS5pc0ludGVyc2VjdGluZyk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIGxldCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihjYWxsYmFjaywgeyB0aHJlc2hvbGQ6IDAuNSB9KTsKICAgICAgaWYgKHJlZi5jdXJyZW50KSBvYnNlcnZlci5vYnNlcnZlKHJlZi5jdXJyZW50KTsKICAgICAgcmV0dXJuICgpID0+IHsKICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7CiAgICAgIH07CiAgICB9CiAgfSwgW3ByZWZldGNoXSk7CiAgUmVhY3Q4LnVzZUVmZmVjdCgoKSA9PiB7CiAgICBpZiAobWF5YmVQcmVmZXRjaCkgewogICAgICBsZXQgaWQgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBzZXRTaG91bGRQcmVmZXRjaCh0cnVlKTsKICAgICAgfSwgMTAwKTsKICAgICAgcmV0dXJuICgpID0+IHsKICAgICAgICBjbGVhclRpbWVvdXQoaWQpOwogICAgICB9OwogICAgfQogIH0sIFttYXliZVByZWZldGNoXSk7CiAgbGV0IHNldEludGVudCA9ICgpID0+IHsKICAgIHNldE1heWJlUHJlZmV0Y2godHJ1ZSk7CiAgfTsKICBsZXQgY2FuY2VsSW50ZW50ID0gKCkgPT4gewogICAgc2V0TWF5YmVQcmVmZXRjaChmYWxzZSk7CiAgICBzZXRTaG91bGRQcmVmZXRjaChmYWxzZSk7CiAgfTsKICBpZiAoIWZyYW1ld29ya0NvbnRleHQpIHsKICAgIHJldHVybiBbZmFsc2UsIHJlZiwge31dOwogIH0KICBpZiAocHJlZmV0Y2ggIT09ICJpbnRlbnQiKSB7CiAgICByZXR1cm4gW3Nob3VsZFByZWZldGNoLCByZWYsIHt9XTsKICB9CiAgcmV0dXJuIFsKICAgIHNob3VsZFByZWZldGNoLAogICAgcmVmLAogICAgewogICAgICBvbkZvY3VzOiBjb21wb3NlRXZlbnRIYW5kbGVycyhvbkZvY3VzLCBzZXRJbnRlbnQpLAogICAgICBvbkJsdXI6IGNvbXBvc2VFdmVudEhhbmRsZXJzKG9uQmx1ciwgY2FuY2VsSW50ZW50KSwKICAgICAgb25Nb3VzZUVudGVyOiBjb21wb3NlRXZlbnRIYW5kbGVycyhvbk1vdXNlRW50ZXIsIHNldEludGVudCksCiAgICAgIG9uTW91c2VMZWF2ZTogY29tcG9zZUV2ZW50SGFuZGxlcnMob25Nb3VzZUxlYXZlLCBjYW5jZWxJbnRlbnQpLAogICAgICBvblRvdWNoU3RhcnQ6IGNvbXBvc2VFdmVudEhhbmRsZXJzKG9uVG91Y2hTdGFydCwgc2V0SW50ZW50KQogICAgfQogIF07Cn0KZnVuY3Rpb24gY29tcG9zZUV2ZW50SGFuZGxlcnModGhlaXJIYW5kbGVyLCBvdXJIYW5kbGVyKSB7CiAgcmV0dXJuIChldmVudCkgPT4gewogICAgdGhlaXJIYW5kbGVyICYmIHRoZWlySGFuZGxlcihldmVudCk7CiAgICBpZiAoIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHsKICAgICAgb3VySGFuZGxlcihldmVudCk7CiAgICB9CiAgfTsKfQpmdW5jdGlvbiBnZXRBY3RpdmVNYXRjaGVzKG1hdGNoZXMsIGVycm9ycywgaXNTcGFNb2RlKSB7CiAgaWYgKGlzU3BhTW9kZSAmJiAhaXNIeWRyYXRlZCkgewogICAgcmV0dXJuIFttYXRjaGVzWzBdXTsKICB9CiAgaWYgKGVycm9ycykgewogICAgbGV0IGVycm9ySWR4ID0gbWF0Y2hlcy5maW5kSW5kZXgoKG0pID0+IGVycm9yc1ttLnJvdXRlLmlkXSAhPT0gdm9pZCAwKTsKICAgIHJldHVybiBtYXRjaGVzLnNsaWNlKDAsIGVycm9ySWR4ICsgMSk7CiAgfQogIHJldHVybiBtYXRjaGVzOwp9CnZhciBDUklUSUNBTF9DU1NfREFUQV9BVFRSSUJVVEUgPSAiZGF0YS1yZWFjdC1yb3V0ZXItY3JpdGljYWwtY3NzIjsKZnVuY3Rpb24gTGlua3MoeyBub25jZSB9KSB7CiAgbGV0IHsgaXNTcGFNb2RlLCBtYW5pZmVzdCwgcm91dGVNb2R1bGVzLCBjcml0aWNhbENzcyB9ID0gdXNlRnJhbWV3b3JrQ29udGV4dCgpOwogIGxldCB7IGVycm9ycywgbWF0Y2hlczogcm91dGVyTWF0Y2hlcyB9ID0gdXNlRGF0YVJvdXRlclN0YXRlQ29udGV4dCgpOwogIGxldCBtYXRjaGVzID0gZ2V0QWN0aXZlTWF0Y2hlcyhyb3V0ZXJNYXRjaGVzLCBlcnJvcnMsIGlzU3BhTW9kZSk7CiAgbGV0IGtleWVkTGlua3MgPSBSZWFjdDgudXNlTWVtbygKICAgICgpID0+IGdldEtleWVkTGlua3NGb3JNYXRjaGVzKG1hdGNoZXMsIHJvdXRlTW9kdWxlcywgbWFuaWZlc3QpLAogICAgW21hdGNoZXMsIHJvdXRlTW9kdWxlcywgbWFuaWZlc3RdCiAgKTsKICByZXR1cm4gUmVhY3Q4LmNyZWF0ZUVsZW1lbnQoUmVhY3Q4LkZyYWdtZW50LCBudWxsLCB0eXBlb2YgY3JpdGljYWxDc3MgPT09ICJzdHJpbmciID8gUmVhY3Q4LmNyZWF0ZUVsZW1lbnQoCiAgICAic3R5bGUiLAogICAgewogICAgICAuLi57IFtDUklUSUNBTF9DU1NfREFUQV9BVFRSSUJVVEVdOiAiIiB9LAogICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTDogeyBfX2h0bWw6IGNyaXRpY2FsQ3NzIH0KICAgIH0KICApIDogbnVsbCwgdHlwZW9mIGNyaXRpY2FsQ3NzID09PSAib2JqZWN0IiA/IFJlYWN0OC5jcmVhdGVFbGVtZW50KAogICAgImxpbmsiLAogICAgewogICAgICAuLi57IFtDUklUSUNBTF9DU1NfREFUQV9BVFRSSUJVVEVdOiAiIiB9LAogICAgICByZWw6ICJzdHlsZXNoZWV0IiwKICAgICAgaHJlZjogY3JpdGljYWxDc3MuaHJlZiwKICAgICAgbm9uY2UKICAgIH0KICApIDogbnVsbCwga2V5ZWRMaW5rcy5tYXAoCiAgICAoeyBrZXksIGxpbmsgfSkgPT4gaXNQYWdlTGlua0Rlc2NyaXB0b3IobGluaykgPyBSZWFjdDguY3JlYXRlRWxlbWVudChQcmVmZXRjaFBhZ2VMaW5rcywgeyBrZXksIG5vbmNlLCAuLi5saW5rIH0pIDogUmVhY3Q4LmNyZWF0ZUVsZW1lbnQoImxpbmsiLCB7IGtleSwgbm9uY2UsIC4uLmxpbmsgfSkKICApKTsKfQpmdW5jdGlvbiBQcmVmZXRjaFBhZ2VMaW5rcyh7IHBhZ2UsIC4uLmxpbmtQcm9wcyB9KSB7CiAgbGV0IHsgcm91dGVyOiByb3V0ZXIyIH0gPSB1c2VEYXRhUm91dGVyQ29udGV4dDIoKTsKICBsZXQgbWF0Y2hlcyA9IFJlYWN0OC51c2VNZW1vKAogICAgKCkgPT4gbWF0Y2hSb3V0ZXMocm91dGVyMi5yb3V0ZXMsIHBhZ2UsIHJvdXRlcjIuYmFzZW5hbWUpLAogICAgW3JvdXRlcjIucm91dGVzLCBwYWdlLCByb3V0ZXIyLmJhc2VuYW1lXQogICk7CiAgaWYgKCFtYXRjaGVzKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CiAgcmV0dXJuIFJlYWN0OC5jcmVhdGVFbGVtZW50KFByZWZldGNoUGFnZUxpbmtzSW1wbCwgeyBwYWdlLCBtYXRjaGVzLCAuLi5saW5rUHJvcHMgfSk7Cn0KZnVuY3Rpb24gdXNlS2V5ZWRQcmVmZXRjaExpbmtzKG1hdGNoZXMpIHsKICBsZXQgeyBtYW5pZmVzdCwgcm91dGVNb2R1bGVzIH0gPSB1c2VGcmFtZXdvcmtDb250ZXh0KCk7CiAgbGV0IFtrZXllZFByZWZldGNoTGlua3MsIHNldEtleWVkUHJlZmV0Y2hMaW5rc10gPSBSZWFjdDgudXNlU3RhdGUoW10pOwogIFJlYWN0OC51c2VFZmZlY3QoKCkgPT4gewogICAgbGV0IGludGVycnVwdGVkID0gZmFsc2U7CiAgICB2b2lkIGdldEtleWVkUHJlZmV0Y2hMaW5rcyhtYXRjaGVzLCBtYW5pZmVzdCwgcm91dGVNb2R1bGVzKS50aGVuKAogICAgICAobGlua3MpID0+IHsKICAgICAgICBpZiAoIWludGVycnVwdGVkKSB7CiAgICAgICAgICBzZXRLZXllZFByZWZldGNoTGlua3MobGlua3MpOwogICAgICAgIH0KICAgICAgfQogICAgKTsKICAgIHJldHVybiAoKSA9PiB7CiAgICAgIGludGVycnVwdGVkID0gdHJ1ZTsKICAgIH07CiAgfSwgW21hdGNoZXMsIG1hbmlmZXN0LCByb3V0ZU1vZHVsZXNdKTsKICByZXR1cm4ga2V5ZWRQcmVmZXRjaExpbmtzOwp9CmZ1bmN0aW9uIFByZWZldGNoUGFnZUxpbmtzSW1wbCh7CiAgcGFnZSwKICBtYXRjaGVzOiBuZXh0TWF0Y2hlcywKICAuLi5saW5rUHJvcHMKfSkgewogIGxldCBsb2NhdGlvbjIgPSB1c2VMb2NhdGlvbigpOwogIGxldCB7IG1hbmlmZXN0LCByb3V0ZU1vZHVsZXMgfSA9IHVzZUZyYW1ld29ya0NvbnRleHQoKTsKICBsZXQgeyBiYXNlbmFtZSB9ID0gdXNlRGF0YVJvdXRlckNvbnRleHQyKCk7CiAgbGV0IHsgbG9hZGVyRGF0YSwgbWF0Y2hlcyB9ID0gdXNlRGF0YVJvdXRlclN0YXRlQ29udGV4dCgpOwogIGxldCBuZXdNYXRjaGVzRm9yRGF0YSA9IFJlYWN0OC51c2VNZW1vKAogICAgKCkgPT4gZ2V0TmV3TWF0Y2hlc0ZvckxpbmtzKAogICAgICBwYWdlLAogICAgICBuZXh0TWF0Y2hlcywKICAgICAgbWF0Y2hlcywKICAgICAgbWFuaWZlc3QsCiAgICAgIGxvY2F0aW9uMiwKICAgICAgImRhdGEiCiAgICApLAogICAgW3BhZ2UsIG5leHRNYXRjaGVzLCBtYXRjaGVzLCBtYW5pZmVzdCwgbG9jYXRpb24yXQogICk7CiAgbGV0IG5ld01hdGNoZXNGb3JBc3NldHMgPSBSZWFjdDgudXNlTWVtbygKICAgICgpID0+IGdldE5ld01hdGNoZXNGb3JMaW5rcygKICAgICAgcGFnZSwKICAgICAgbmV4dE1hdGNoZXMsCiAgICAgIG1hdGNoZXMsCiAgICAgIG1hbmlmZXN0LAogICAgICBsb2NhdGlvbjIsCiAgICAgICJhc3NldHMiCiAgICApLAogICAgW3BhZ2UsIG5leHRNYXRjaGVzLCBtYXRjaGVzLCBtYW5pZmVzdCwgbG9jYXRpb24yXQogICk7CiAgbGV0IGRhdGFIcmVmcyA9IFJlYWN0OC51c2VNZW1vKCgpID0+IHsKICAgIGlmIChwYWdlID09PSBsb2NhdGlvbjIucGF0aG5hbWUgKyBsb2NhdGlvbjIuc2VhcmNoICsgbG9jYXRpb24yLmhhc2gpIHsKICAgICAgcmV0dXJuIFtdOwogICAgfQogICAgbGV0IHJvdXRlc1BhcmFtcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7CiAgICBsZXQgZm91bmRPcHRPdXRSb3V0ZSA9IGZhbHNlOwogICAgbmV4dE1hdGNoZXMuZm9yRWFjaCgobSkgPT4gewogICAgICB2YXIgX2E7CiAgICAgIGxldCBtYW5pZmVzdFJvdXRlID0gbWFuaWZlc3Qucm91dGVzW20ucm91dGUuaWRdOwogICAgICBpZiAoIW1hbmlmZXN0Um91dGUgfHwgIW1hbmlmZXN0Um91dGUuaGFzTG9hZGVyKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICghbmV3TWF0Y2hlc0ZvckRhdGEuc29tZSgobTIpID0+IG0yLnJvdXRlLmlkID09PSBtLnJvdXRlLmlkKSAmJiBtLnJvdXRlLmlkIGluIGxvYWRlckRhdGEgJiYgKChfYSA9IHJvdXRlTW9kdWxlc1ttLnJvdXRlLmlkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnNob3VsZFJldmFsaWRhdGUpKSB7CiAgICAgICAgZm91bmRPcHRPdXRSb3V0ZSA9IHRydWU7CiAgICAgIH0gZWxzZSBpZiAobWFuaWZlc3RSb3V0ZS5oYXNDbGllbnRMb2FkZXIpIHsKICAgICAgICBmb3VuZE9wdE91dFJvdXRlID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByb3V0ZXNQYXJhbXMuYWRkKG0ucm91dGUuaWQpOwogICAgICB9CiAgICB9KTsKICAgIGlmIChyb3V0ZXNQYXJhbXMuc2l6ZSA9PT0gMCkgewogICAgICByZXR1cm4gW107CiAgICB9CiAgICBsZXQgdXJsID0gc2luZ2xlRmV0Y2hVcmwocGFnZSwgYmFzZW5hbWUsICJkYXRhIik7CiAgICBpZiAoZm91bmRPcHRPdXRSb3V0ZSAmJiByb3V0ZXNQYXJhbXMuc2l6ZSA+IDApIHsKICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoCiAgICAgICAgIl9yb3V0ZXMiLAogICAgICAgIG5leHRNYXRjaGVzLmZpbHRlcigobSkgPT4gcm91dGVzUGFyYW1zLmhhcyhtLnJvdXRlLmlkKSkubWFwKChtKSA9PiBtLnJvdXRlLmlkKS5qb2luKCIsIikKICAgICAgKTsKICAgIH0KICAgIHJldHVybiBbdXJsLnBhdGhuYW1lICsgdXJsLnNlYXJjaF07CiAgfSwgWwogICAgYmFzZW5hbWUsCiAgICBsb2FkZXJEYXRhLAogICAgbG9jYXRpb24yLAogICAgbWFuaWZlc3QsCiAgICBuZXdNYXRjaGVzRm9yRGF0YSwKICAgIG5leHRNYXRjaGVzLAogICAgcGFnZSwKICAgIHJvdXRlTW9kdWxlcwogIF0pOwogIGxldCBtb2R1bGVIcmVmcyA9IFJlYWN0OC51c2VNZW1vKAogICAgKCkgPT4gZ2V0TW9kdWxlTGlua0hyZWZzKG5ld01hdGNoZXNGb3JBc3NldHMsIG1hbmlmZXN0KSwKICAgIFtuZXdNYXRjaGVzRm9yQXNzZXRzLCBtYW5pZmVzdF0KICApOwogIGxldCBrZXllZFByZWZldGNoTGlua3MgPSB1c2VLZXllZFByZWZldGNoTGlua3MobmV3TWF0Y2hlc0ZvckFzc2V0cyk7CiAgcmV0dXJuIFJlYWN0OC5jcmVhdGVFbGVtZW50KFJlYWN0OC5GcmFnbWVudCwgbnVsbCwgZGF0YUhyZWZzLm1hcCgoaHJlZjIpID0+IFJlYWN0OC5jcmVhdGVFbGVtZW50KCJsaW5rIiwgeyBrZXk6IGhyZWYyLCByZWw6ICJwcmVmZXRjaCIsIGFzOiAiZmV0Y2giLCBocmVmOiBocmVmMiwgLi4ubGlua1Byb3BzIH0pKSwgbW9kdWxlSHJlZnMubWFwKChocmVmMikgPT4gUmVhY3Q4LmNyZWF0ZUVsZW1lbnQoImxpbmsiLCB7IGtleTogaHJlZjIsIHJlbDogIm1vZHVsZXByZWxvYWQiLCBocmVmOiBocmVmMiwgLi4ubGlua1Byb3BzIH0pKSwga2V5ZWRQcmVmZXRjaExpbmtzLm1hcCgoeyBrZXksIGxpbmsgfSkgPT4gKAogICAgLy8gdGhlc2UgZG9uJ3Qgc3ByZWFkIGBsaW5rUHJvcHNgIGJlY2F1c2UgdGhleSBhcmUgZnVsbCBsaW5rIGRlc2NyaXB0b3JzCiAgICAvLyBhbHJlYWR5IHdpdGggdGhlaXIgb3duIHByb3BzCiAgICBSZWFjdDguY3JlYXRlRWxlbWVudCgibGluayIsIHsga2V5LCBub25jZTogbGlua1Byb3BzLm5vbmNlLCAuLi5saW5rIH0pCiAgKSkpOwp9CmZ1bmN0aW9uIE1ldGEoKSB7CiAgbGV0IHsgaXNTcGFNb2RlLCByb3V0ZU1vZHVsZXMgfSA9IHVzZUZyYW1ld29ya0NvbnRleHQoKTsKICBsZXQgewogICAgZXJyb3JzLAogICAgbWF0Y2hlczogcm91dGVyTWF0Y2hlcywKICAgIGxvYWRlckRhdGEKICB9ID0gdXNlRGF0YVJvdXRlclN0YXRlQ29udGV4dCgpOwogIGxldCBsb2NhdGlvbjIgPSB1c2VMb2NhdGlvbigpOwogIGxldCBfbWF0Y2hlcyA9IGdldEFjdGl2ZU1hdGNoZXMocm91dGVyTWF0Y2hlcywgZXJyb3JzLCBpc1NwYU1vZGUpOwogIGxldCBlcnJvciA9IG51bGw7CiAgaWYgKGVycm9ycykgewogICAgZXJyb3IgPSBlcnJvcnNbX21hdGNoZXNbX21hdGNoZXMubGVuZ3RoIC0gMV0ucm91dGUuaWRdOwogIH0KICBsZXQgbWV0YSA9IFtdOwogIGxldCBsZWFmTWV0YSA9IG51bGw7CiAgbGV0IG1hdGNoZXMgPSBbXTsKICBmb3IgKGxldCBpID0gMDsgaSA8IF9tYXRjaGVzLmxlbmd0aDsgaSsrKSB7CiAgICBsZXQgX21hdGNoID0gX21hdGNoZXNbaV07CiAgICBsZXQgcm91dGVJZCA9IF9tYXRjaC5yb3V0ZS5pZDsKICAgIGxldCBkYXRhMiA9IGxvYWRlckRhdGFbcm91dGVJZF07CiAgICBsZXQgcGFyYW1zID0gX21hdGNoLnBhcmFtczsKICAgIGxldCByb3V0ZU1vZHVsZSA9IHJvdXRlTW9kdWxlc1tyb3V0ZUlkXTsKICAgIGxldCByb3V0ZU1ldGEgPSBbXTsKICAgIGxldCBtYXRjaCA9IHsKICAgICAgaWQ6IHJvdXRlSWQsCiAgICAgIGRhdGE6IGRhdGEyLAogICAgICBsb2FkZXJEYXRhOiBkYXRhMiwKICAgICAgbWV0YTogW10sCiAgICAgIHBhcmFtczogX21hdGNoLnBhcmFtcywKICAgICAgcGF0aG5hbWU6IF9tYXRjaC5wYXRobmFtZSwKICAgICAgaGFuZGxlOiBfbWF0Y2gucm91dGUuaGFuZGxlLAogICAgICBlcnJvcgogICAgfTsKICAgIG1hdGNoZXNbaV0gPSBtYXRjaDsKICAgIGlmIChyb3V0ZU1vZHVsZSA9PSBudWxsID8gdm9pZCAwIDogcm91dGVNb2R1bGUubWV0YSkgewogICAgICByb3V0ZU1ldGEgPSB0eXBlb2Ygcm91dGVNb2R1bGUubWV0YSA9PT0gImZ1bmN0aW9uIiA/IHJvdXRlTW9kdWxlLm1ldGEoewogICAgICAgIGRhdGE6IGRhdGEyLAogICAgICAgIGxvYWRlckRhdGE6IGRhdGEyLAogICAgICAgIHBhcmFtcywKICAgICAgICBsb2NhdGlvbjogbG9jYXRpb24yLAogICAgICAgIG1hdGNoZXMsCiAgICAgICAgZXJyb3IKICAgICAgfSkgOiBBcnJheS5pc0FycmF5KHJvdXRlTW9kdWxlLm1ldGEpID8gWy4uLnJvdXRlTW9kdWxlLm1ldGFdIDogcm91dGVNb2R1bGUubWV0YTsKICAgIH0gZWxzZSBpZiAobGVhZk1ldGEpIHsKICAgICAgcm91dGVNZXRhID0gWy4uLmxlYWZNZXRhXTsKICAgIH0KICAgIHJvdXRlTWV0YSA9IHJvdXRlTWV0YSB8fCBbXTsKICAgIGlmICghQXJyYXkuaXNBcnJheShyb3V0ZU1ldGEpKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigKICAgICAgICAiVGhlIHJvdXRlIGF0ICIgKyBfbWF0Y2gucm91dGUucGF0aCArICIgcmV0dXJucyBhbiBpbnZhbGlkIHZhbHVlLiBBbGwgcm91dGUgbWV0YSBmdW5jdGlvbnMgbXVzdCByZXR1cm4gYW4gYXJyYXkgb2YgbWV0YSBvYmplY3RzLlxuXG5UbyByZWZlcmVuY2UgdGhlIG1ldGEgZnVuY3Rpb24gQVBJLCBzZWUgaHR0cHM6Ly9yZW1peC5ydW4vcm91dGUvbWV0YSIKICAgICAgKTsKICAgIH0KICAgIG1hdGNoLm1ldGEgPSByb3V0ZU1ldGE7CiAgICBtYXRjaGVzW2ldID0gbWF0Y2g7CiAgICBtZXRhID0gWy4uLnJvdXRlTWV0YV07CiAgICBsZWFmTWV0YSA9IG1ldGE7CiAgfQogIHJldHVybiBSZWFjdDguY3JlYXRlRWxlbWVudChSZWFjdDguRnJhZ21lbnQsIG51bGwsIG1ldGEuZmxhdCgpLm1hcCgobWV0YVByb3BzKSA9PiB7CiAgICBpZiAoIW1ldGFQcm9wcykgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIGlmICgidGFnTmFtZSIgaW4gbWV0YVByb3BzKSB7CiAgICAgIGxldCB7IHRhZ05hbWUsIC4uLnJlc3QgfSA9IG1ldGFQcm9wczsKICAgICAgaWYgKCFpc1ZhbGlkTWV0YVRhZyh0YWdOYW1lKSkgewogICAgICAgIGNvbnNvbGUud2FybigKICAgICAgICAgIGBBIG1ldGEgb2JqZWN0IHVzZXMgYW4gaW52YWxpZCB0YWdOYW1lOiAke3RhZ05hbWV9LiBFeHBlY3RlZCBlaXRoZXIgJ2xpbmsnIG9yICdtZXRhJ2AKICAgICAgICApOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGxldCBDb21wID0gdGFnTmFtZTsKICAgICAgcmV0dXJuIFJlYWN0OC5jcmVhdGVFbGVtZW50KENvbXAsIHsga2V5OiBKU09OLnN0cmluZ2lmeShyZXN0KSwgLi4ucmVzdCB9KTsKICAgIH0KICAgIGlmICgidGl0bGUiIGluIG1ldGFQcm9wcykgewogICAgICByZXR1cm4gUmVhY3Q4LmNyZWF0ZUVsZW1lbnQoInRpdGxlIiwgeyBrZXk6ICJ0aXRsZSIgfSwgU3RyaW5nKG1ldGFQcm9wcy50aXRsZSkpOwogICAgfQogICAgaWYgKCJjaGFyc2V0IiBpbiBtZXRhUHJvcHMpIHsKICAgICAgbWV0YVByb3BzLmNoYXJTZXQgPz8gKG1ldGFQcm9wcy5jaGFyU2V0ID0gbWV0YVByb3BzLmNoYXJzZXQpOwogICAgICBkZWxldGUgbWV0YVByb3BzLmNoYXJzZXQ7CiAgICB9CiAgICBpZiAoImNoYXJTZXQiIGluIG1ldGFQcm9wcyAmJiBtZXRhUHJvcHMuY2hhclNldCAhPSBudWxsKSB7CiAgICAgIHJldHVybiB0eXBlb2YgbWV0YVByb3BzLmNoYXJTZXQgPT09ICJzdHJpbmciID8gUmVhY3Q4LmNyZWF0ZUVsZW1lbnQoIm1ldGEiLCB7IGtleTogImNoYXJTZXQiLCBjaGFyU2V0OiBtZXRhUHJvcHMuY2hhclNldCB9KSA6IG51bGw7CiAgICB9CiAgICBpZiAoInNjcmlwdDpsZCtqc29uIiBpbiBtZXRhUHJvcHMpIHsKICAgICAgdHJ5IHsKICAgICAgICBsZXQganNvbiA9IEpTT04uc3RyaW5naWZ5KG1ldGFQcm9wc1sic2NyaXB0OmxkK2pzb24iXSk7CiAgICAgICAgcmV0dXJuIFJlYWN0OC5jcmVhdGVFbGVtZW50KAogICAgICAgICAgInNjcmlwdCIsCiAgICAgICAgICB7CiAgICAgICAgICAgIGtleTogYHNjcmlwdDpsZCtqc29uOiR7anNvbn1gLAogICAgICAgICAgICB0eXBlOiAiYXBwbGljYXRpb24vbGQranNvbiIsCiAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7IF9faHRtbDogZXNjYXBlSHRtbChqc29uKSB9CiAgICAgICAgICB9CiAgICAgICAgKTsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBSZWFjdDguY3JlYXRlRWxlbWVudCgibWV0YSIsIHsga2V5OiBKU09OLnN0cmluZ2lmeShtZXRhUHJvcHMpLCAuLi5tZXRhUHJvcHMgfSk7CiAgfSkpOwp9CmZ1bmN0aW9uIGlzVmFsaWRNZXRhVGFnKHRhZ05hbWUpIHsKICByZXR1cm4gdHlwZW9mIHRhZ05hbWUgPT09ICJzdHJpbmciICYmIC9eKG1ldGF8bGluaykkLy50ZXN0KHRhZ05hbWUpOwp9CnZhciBpc0h5ZHJhdGVkID0gZmFsc2U7CmZ1bmN0aW9uIHNldElzSHlkcmF0ZWQoKSB7CiAgaXNIeWRyYXRlZCA9IHRydWU7Cn0KZnVuY3Rpb24gU2NyaXB0cyhzY3JpcHRQcm9wcykgewogIGxldCB7CiAgICBtYW5pZmVzdCwKICAgIHNlcnZlckhhbmRvZmZTdHJpbmcsCiAgICBpc1NwYU1vZGUsCiAgICByZW5kZXJNZXRhLAogICAgcm91dGVEaXNjb3ZlcnksCiAgICBzc3IKICB9ID0gdXNlRnJhbWV3b3JrQ29udGV4dCgpOwogIGxldCB7IHJvdXRlcjogcm91dGVyMiwgc3RhdGljOiBpc1N0YXRpYywgc3RhdGljQ29udGV4dCB9ID0gdXNlRGF0YVJvdXRlckNvbnRleHQyKCk7CiAgbGV0IHsgbWF0Y2hlczogcm91dGVyTWF0Y2hlcyB9ID0gdXNlRGF0YVJvdXRlclN0YXRlQ29udGV4dCgpOwogIGxldCBpc1JTQ1JvdXRlckNvbnRleHQgPSB1c2VJc1JTQ1JvdXRlckNvbnRleHQoKTsKICBsZXQgZW5hYmxlRm9nT2ZXYXIgPSBpc0ZvZ09mV2FyRW5hYmxlZChyb3V0ZURpc2NvdmVyeSwgc3NyKTsKICBpZiAocmVuZGVyTWV0YSkgewogICAgcmVuZGVyTWV0YS5kaWRSZW5kZXJTY3JpcHRzID0gdHJ1ZTsKICB9CiAgbGV0IG1hdGNoZXMgPSBnZXRBY3RpdmVNYXRjaGVzKHJvdXRlck1hdGNoZXMsIG51bGwsIGlzU3BhTW9kZSk7CiAgUmVhY3Q4LnVzZUVmZmVjdCgoKSA9PiB7CiAgICBzZXRJc0h5ZHJhdGVkKCk7CiAgfSwgW10pOwogIGxldCBpbml0aWFsU2NyaXB0cyA9IFJlYWN0OC51c2VNZW1vKCgpID0+IHsKICAgIHZhciBfYTsKICAgIGlmIChpc1JTQ1JvdXRlckNvbnRleHQpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICBsZXQgc3RyZWFtU2NyaXB0ID0gIndpbmRvdy5fX3JlYWN0Um91dGVyQ29udGV4dC5zdHJlYW0gPSBuZXcgUmVhZGFibGVTdHJlYW0oe3N0YXJ0KGNvbnRyb2xsZXIpe3dpbmRvdy5fX3JlYWN0Um91dGVyQ29udGV4dC5zdHJlYW1Db250cm9sbGVyID0gY29udHJvbGxlcjt9fSkucGlwZVRocm91Z2gobmV3IFRleHRFbmNvZGVyU3RyZWFtKCkpOyI7CiAgICBsZXQgY29udGV4dFNjcmlwdCA9IHN0YXRpY0NvbnRleHQgPyBgd2luZG93Ll9fcmVhY3RSb3V0ZXJDb250ZXh0ID0gJHtzZXJ2ZXJIYW5kb2ZmU3RyaW5nfTske3N0cmVhbVNjcmlwdH1gIDogIiAiOwogICAgbGV0IHJvdXRlTW9kdWxlc1NjcmlwdCA9ICFpc1N0YXRpYyA/ICIgIiA6IGAkeygoX2EgPSBtYW5pZmVzdC5obXIpID09IG51bGwgPyB2b2lkIDAgOiBfYS5ydW50aW1lKSA/IGBpbXBvcnQgJHtKU09OLnN0cmluZ2lmeShtYW5pZmVzdC5obXIucnVudGltZSl9O2AgOiAiIn0keyFlbmFibGVGb2dPZldhciA/IGBpbXBvcnQgJHtKU09OLnN0cmluZ2lmeShtYW5pZmVzdC51cmwpfWAgOiAiIn07CiR7bWF0Y2hlcy5tYXAoKG1hdGNoLCByb3V0ZUluZGV4KSA9PiB7CiAgICAgIGxldCByb3V0ZVZhck5hbWUgPSBgcm91dGUke3JvdXRlSW5kZXh9YDsKICAgICAgbGV0IG1hbmlmZXN0RW50cnkgPSBtYW5pZmVzdC5yb3V0ZXNbbWF0Y2gucm91dGUuaWRdOwogICAgICBpbnZhcmlhbnQyKG1hbmlmZXN0RW50cnksIGBSb3V0ZSAke21hdGNoLnJvdXRlLmlkfSBub3QgZm91bmQgaW4gbWFuaWZlc3RgKTsKICAgICAgbGV0IHsKICAgICAgICBjbGllbnRBY3Rpb25Nb2R1bGUsCiAgICAgICAgY2xpZW50TG9hZGVyTW9kdWxlLAogICAgICAgIGNsaWVudE1pZGRsZXdhcmVNb2R1bGUsCiAgICAgICAgaHlkcmF0ZUZhbGxiYWNrTW9kdWxlLAogICAgICAgIG1vZHVsZQogICAgICB9ID0gbWFuaWZlc3RFbnRyeTsKICAgICAgbGV0IGNodW5rcyA9IFsKICAgICAgICAuLi5jbGllbnRBY3Rpb25Nb2R1bGUgPyBbCiAgICAgICAgICB7CiAgICAgICAgICAgIG1vZHVsZTogY2xpZW50QWN0aW9uTW9kdWxlLAogICAgICAgICAgICB2YXJOYW1lOiBgJHtyb3V0ZVZhck5hbWV9X2NsaWVudEFjdGlvbmAKICAgICAgICAgIH0KICAgICAgICBdIDogW10sCiAgICAgICAgLi4uY2xpZW50TG9hZGVyTW9kdWxlID8gWwogICAgICAgICAgewogICAgICAgICAgICBtb2R1bGU6IGNsaWVudExvYWRlck1vZHVsZSwKICAgICAgICAgICAgdmFyTmFtZTogYCR7cm91dGVWYXJOYW1lfV9jbGllbnRMb2FkZXJgCiAgICAgICAgICB9CiAgICAgICAgXSA6IFtdLAogICAgICAgIC4uLmNsaWVudE1pZGRsZXdhcmVNb2R1bGUgPyBbCiAgICAgICAgICB7CiAgICAgICAgICAgIG1vZHVsZTogY2xpZW50TWlkZGxld2FyZU1vZHVsZSwKICAgICAgICAgICAgdmFyTmFtZTogYCR7cm91dGVWYXJOYW1lfV9jbGllbnRNaWRkbGV3YXJlYAogICAgICAgICAgfQogICAgICAgIF0gOiBbXSwKICAgICAgICAuLi5oeWRyYXRlRmFsbGJhY2tNb2R1bGUgPyBbCiAgICAgICAgICB7CiAgICAgICAgICAgIG1vZHVsZTogaHlkcmF0ZUZhbGxiYWNrTW9kdWxlLAogICAgICAgICAgICB2YXJOYW1lOiBgJHtyb3V0ZVZhck5hbWV9X0h5ZHJhdGVGYWxsYmFja2AKICAgICAgICAgIH0KICAgICAgICBdIDogW10sCiAgICAgICAgeyBtb2R1bGUsIHZhck5hbWU6IGAke3JvdXRlVmFyTmFtZX1fbWFpbmAgfQogICAgICBdOwogICAgICBpZiAoY2h1bmtzLmxlbmd0aCA9PT0gMSkgewogICAgICAgIHJldHVybiBgaW1wb3J0ICogYXMgJHtyb3V0ZVZhck5hbWV9IGZyb20gJHtKU09OLnN0cmluZ2lmeShtb2R1bGUpfTtgOwogICAgICB9CiAgICAgIGxldCBjaHVua0ltcG9ydHNTbmlwcGV0ID0gY2h1bmtzLm1hcCgoY2h1bmspID0+IGBpbXBvcnQgKiBhcyAke2NodW5rLnZhck5hbWV9IGZyb20gIiR7Y2h1bmsubW9kdWxlfSI7YCkuam9pbigiXG4iKTsKICAgICAgbGV0IG1lcmdlZENodW5rc1NuaXBwZXQgPSBgY29uc3QgJHtyb3V0ZVZhck5hbWV9ID0geyR7Y2h1bmtzLm1hcCgoY2h1bmspID0+IGAuLi4ke2NodW5rLnZhck5hbWV9YCkuam9pbigiLCIpfX07YDsKICAgICAgcmV0dXJuIFtjaHVua0ltcG9ydHNTbmlwcGV0LCBtZXJnZWRDaHVua3NTbmlwcGV0XS5qb2luKCJcbiIpOwogICAgfSkuam9pbigiXG4iKX0KICAke2VuYWJsZUZvZ09mV2FyID8gKAogICAgICAvLyBJbmxpbmUgYSBtaW5pbWFsIG1hbmlmZXN0IHdpdGggdGhlIFNTUiBtYXRjaGVzCiAgICAgIGB3aW5kb3cuX19yZWFjdFJvdXRlck1hbmlmZXN0ID0gJHtKU09OLnN0cmluZ2lmeSgKICAgICAgICBnZXRQYXJ0aWFsTWFuaWZlc3QobWFuaWZlc3QsIHJvdXRlcjIpLAogICAgICAgIG51bGwsCiAgICAgICAgMgogICAgICApfTtgCiAgICApIDogIiJ9CiAgd2luZG93Ll9fcmVhY3RSb3V0ZXJSb3V0ZU1vZHVsZXMgPSB7JHttYXRjaGVzLm1hcCgobWF0Y2gsIGluZGV4KSA9PiBgJHtKU09OLnN0cmluZ2lmeShtYXRjaC5yb3V0ZS5pZCl9OnJvdXRlJHtpbmRleH1gKS5qb2luKCIsIil9fTsKCmltcG9ydCgke0pTT04uc3RyaW5naWZ5KG1hbmlmZXN0LmVudHJ5Lm1vZHVsZSl9KTtgOwogICAgcmV0dXJuIFJlYWN0OC5jcmVhdGVFbGVtZW50KFJlYWN0OC5GcmFnbWVudCwgbnVsbCwgUmVhY3Q4LmNyZWF0ZUVsZW1lbnQoCiAgICAgICJzY3JpcHQiLAogICAgICB7CiAgICAgICAgLi4uc2NyaXB0UHJvcHMsCiAgICAgICAgc3VwcHJlc3NIeWRyYXRpb25XYXJuaW5nOiB0cnVlLAogICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7IF9faHRtbDogY29udGV4dFNjcmlwdCB9LAogICAgICAgIHR5cGU6IHZvaWQgMAogICAgICB9CiAgICApLCBSZWFjdDguY3JlYXRlRWxlbWVudCgKICAgICAgInNjcmlwdCIsCiAgICAgIHsKICAgICAgICAuLi5zY3JpcHRQcm9wcywKICAgICAgICBzdXBwcmVzc0h5ZHJhdGlvbldhcm5pbmc6IHRydWUsCiAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHsgX19odG1sOiByb3V0ZU1vZHVsZXNTY3JpcHQgfSwKICAgICAgICB0eXBlOiAibW9kdWxlIiwKICAgICAgICBhc3luYzogdHJ1ZQogICAgICB9CiAgICApKTsKICB9LCBbXSk7CiAgbGV0IHByZWxvYWRzID0gaXNIeWRyYXRlZCB8fCBpc1JTQ1JvdXRlckNvbnRleHQgPyBbXSA6IGRlZHVwZSgKICAgIG1hbmlmZXN0LmVudHJ5LmltcG9ydHMuY29uY2F0KAogICAgICBnZXRNb2R1bGVMaW5rSHJlZnMobWF0Y2hlcywgbWFuaWZlc3QsIHsKICAgICAgICBpbmNsdWRlSHlkcmF0ZUZhbGxiYWNrOiB0cnVlCiAgICAgIH0pCiAgICApCiAgKTsKICBsZXQgc3JpID0gdHlwZW9mIG1hbmlmZXN0LnNyaSA9PT0gIm9iamVjdCIgPyBtYW5pZmVzdC5zcmkgOiB7fTsKICB3YXJuT25jZSgKICAgICFpc1JTQ1JvdXRlckNvbnRleHQsCiAgICAiVGhlIDxTY3JpcHRzIC8+IGVsZW1lbnQgaXMgYSBuby1vcCB3aGVuIHVzaW5nIFJTQyBhbmQgY2FuIGJlIHNhZmVseSByZW1vdmVkLiIKICApOwogIHJldHVybiBpc0h5ZHJhdGVkIHx8IGlzUlNDUm91dGVyQ29udGV4dCA/IG51bGwgOiBSZWFjdDguY3JlYXRlRWxlbWVudChSZWFjdDguRnJhZ21lbnQsIG51bGwsIHR5cGVvZiBtYW5pZmVzdC5zcmkgPT09ICJvYmplY3QiID8gUmVhY3Q4LmNyZWF0ZUVsZW1lbnQoCiAgICAic2NyaXB0IiwKICAgIHsKICAgICAgInJyLWltcG9ydG1hcCI6ICIiLAogICAgICB0eXBlOiAiaW1wb3J0bWFwIiwKICAgICAgc3VwcHJlc3NIeWRyYXRpb25XYXJuaW5nOiB0cnVlLAogICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTDogewogICAgICAgIF9faHRtbDogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgaW50ZWdyaXR5OiBzcmkKICAgICAgICB9KQogICAgICB9CiAgICB9CiAgKSA6IG51bGwsICFlbmFibGVGb2dPZldhciA/IFJlYWN0OC5jcmVhdGVFbGVtZW50KAogICAgImxpbmsiLAogICAgewogICAgICByZWw6ICJtb2R1bGVwcmVsb2FkIiwKICAgICAgaHJlZjogbWFuaWZlc3QudXJsLAogICAgICBjcm9zc09yaWdpbjogc2NyaXB0UHJvcHMuY3Jvc3NPcmlnaW4sCiAgICAgIGludGVncml0eTogc3JpW21hbmlmZXN0LnVybF0sCiAgICAgIHN1cHByZXNzSHlkcmF0aW9uV2FybmluZzogdHJ1ZQogICAgfQogICkgOiBudWxsLCBSZWFjdDguY3JlYXRlRWxlbWVudCgKICAgICJsaW5rIiwKICAgIHsKICAgICAgcmVsOiAibW9kdWxlcHJlbG9hZCIsCiAgICAgIGhyZWY6IG1hbmlmZXN0LmVudHJ5Lm1vZHVsZSwKICAgICAgY3Jvc3NPcmlnaW46IHNjcmlwdFByb3BzLmNyb3NzT3JpZ2luLAogICAgICBpbnRlZ3JpdHk6IHNyaVttYW5pZmVzdC5lbnRyeS5tb2R1bGVdLAogICAgICBzdXBwcmVzc0h5ZHJhdGlvbldhcm5pbmc6IHRydWUKICAgIH0KICApLCBwcmVsb2Fkcy5tYXAoKHBhdGgpID0+IFJlYWN0OC5jcmVhdGVFbGVtZW50KAogICAgImxpbmsiLAogICAgewogICAgICBrZXk6IHBhdGgsCiAgICAgIHJlbDogIm1vZHVsZXByZWxvYWQiLAogICAgICBocmVmOiBwYXRoLAogICAgICBjcm9zc09yaWdpbjogc2NyaXB0UHJvcHMuY3Jvc3NPcmlnaW4sCiAgICAgIGludGVncml0eTogc3JpW3BhdGhdLAogICAgICBzdXBwcmVzc0h5ZHJhdGlvbldhcm5pbmc6IHRydWUKICAgIH0KICApKSwgaW5pdGlhbFNjcmlwdHMpOwp9CmZ1bmN0aW9uIGRlZHVwZShhcnJheSkgewogIHJldHVybiBbLi4ubmV3IFNldChhcnJheSldOwp9CmZ1bmN0aW9uIG1lcmdlUmVmcyguLi5yZWZzKSB7CiAgcmV0dXJuICh2YWx1ZSkgPT4gewogICAgcmVmcy5mb3JFYWNoKChyZWYpID0+IHsKICAgICAgaWYgKHR5cGVvZiByZWYgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICByZWYodmFsdWUpOwogICAgICB9IGVsc2UgaWYgKHJlZiAhPSBudWxsKSB7CiAgICAgICAgcmVmLmN1cnJlbnQgPSB2YWx1ZTsKICAgICAgfQogICAgfSk7CiAgfTsKfQp2YXIgUmVtaXhFcnJvckJvdW5kYXJ5ID0gY2xhc3MgZXh0ZW5kcyBSZWFjdDkuQ29tcG9uZW50IHsKICBjb25zdHJ1Y3Rvcihwcm9wcykgewogICAgc3VwZXIocHJvcHMpOwogICAgdGhpcy5zdGF0ZSA9IHsgZXJyb3I6IHByb3BzLmVycm9yIHx8IG51bGwsIGxvY2F0aW9uOiBwcm9wcy5sb2NhdGlvbiB9OwogIH0KICBzdGF0aWMgZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yKGVycm9yKSB7CiAgICByZXR1cm4geyBlcnJvciB9OwogIH0KICBzdGF0aWMgZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKHByb3BzLCBzdGF0ZSkgewogICAgaWYgKHN0YXRlLmxvY2F0aW9uICE9PSBwcm9wcy5sb2NhdGlvbikgewogICAgICByZXR1cm4geyBlcnJvcjogcHJvcHMuZXJyb3IgfHwgbnVsbCwgbG9jYXRpb246IHByb3BzLmxvY2F0aW9uIH07CiAgICB9CiAgICByZXR1cm4geyBlcnJvcjogcHJvcHMuZXJyb3IgfHwgc3RhdGUuZXJyb3IsIGxvY2F0aW9uOiBzdGF0ZS5sb2NhdGlvbiB9OwogIH0KICByZW5kZXIoKSB7CiAgICBpZiAodGhpcy5zdGF0ZS5lcnJvcikgewogICAgICByZXR1cm4gUmVhY3Q5LmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgUmVtaXhSb290RGVmYXVsdEVycm9yQm91bmRhcnksCiAgICAgICAgewogICAgICAgICAgZXJyb3I6IHRoaXMuc3RhdGUuZXJyb3IsCiAgICAgICAgICBpc091dHNpZGVSZW1peEFwcDogdHJ1ZQogICAgICAgIH0KICAgICAgKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiB0aGlzLnByb3BzLmNoaWxkcmVuOwogICAgfQogIH0KfTsKZnVuY3Rpb24gUmVtaXhSb290RGVmYXVsdEVycm9yQm91bmRhcnkoewogIGVycm9yLAogIGlzT3V0c2lkZVJlbWl4QXBwCn0pIHsKICBjb25zb2xlLmVycm9yKGVycm9yKTsKICBsZXQgaGV5RGV2ZWxvcGVyID0gUmVhY3Q5LmNyZWF0ZUVsZW1lbnQoCiAgICAic2NyaXB0IiwKICAgIHsKICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHsKICAgICAgICBfX2h0bWw6IGAKICAgICAgICBjb25zb2xlLmxvZygKICAgICAgICAgICLwn5K/IEhleSBkZXZlbG9wZXIg8J+Riy4gWW91IGNhbiBwcm92aWRlIGEgd2F5IGJldHRlciBVWCB0aGFuIHRoaXMgd2hlbiB5b3VyIGFwcCB0aHJvd3MgZXJyb3JzLiBDaGVjayBvdXQgaHR0cHM6Ly9yZWFjdHJvdXRlci5jb20vaG93LXRvL2Vycm9yLWJvdW5kYXJ5IGZvciBtb3JlIGluZm9ybWF0aW9uLiIKICAgICAgICApOwogICAgICBgCiAgICAgIH0KICAgIH0KICApOwogIGlmIChpc1JvdXRlRXJyb3JSZXNwb25zZShlcnJvcikpIHsKICAgIHJldHVybiBSZWFjdDkuY3JlYXRlRWxlbWVudChCb3VuZGFyeVNoZWxsLCB7IHRpdGxlOiAiVW5oYW5kbGVkIFRocm93biBSZXNwb25zZSEiIH0sIFJlYWN0OS5jcmVhdGVFbGVtZW50KCJoMSIsIHsgc3R5bGU6IHsgZm9udFNpemU6ICIyNHB4IiB9IH0sIGVycm9yLnN0YXR1cywgIiAiLCBlcnJvci5zdGF0dXNUZXh0KSwgRU5BQkxFX0RFVl9XQVJOSU5HUyA/IGhleURldmVsb3BlciA6IG51bGwpOwogIH0KICBsZXQgZXJyb3JJbnN0YW5jZTsKICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikgewogICAgZXJyb3JJbnN0YW5jZSA9IGVycm9yOwogIH0gZWxzZSB7CiAgICBsZXQgZXJyb3JTdHJpbmcgPSBlcnJvciA9PSBudWxsID8gIlVua25vd24gRXJyb3IiIDogdHlwZW9mIGVycm9yID09PSAib2JqZWN0IiAmJiAidG9TdHJpbmciIGluIGVycm9yID8gZXJyb3IudG9TdHJpbmcoKSA6IEpTT04uc3RyaW5naWZ5KGVycm9yKTsKICAgIGVycm9ySW5zdGFuY2UgPSBuZXcgRXJyb3IoZXJyb3JTdHJpbmcpOwogIH0KICByZXR1cm4gUmVhY3Q5LmNyZWF0ZUVsZW1lbnQoCiAgICBCb3VuZGFyeVNoZWxsLAogICAgewogICAgICB0aXRsZTogIkFwcGxpY2F0aW9uIEVycm9yISIsCiAgICAgIGlzT3V0c2lkZVJlbWl4QXBwCiAgICB9LAogICAgUmVhY3Q5LmNyZWF0ZUVsZW1lbnQoImgxIiwgeyBzdHlsZTogeyBmb250U2l6ZTogIjI0cHgiIH0gfSwgIkFwcGxpY2F0aW9uIEVycm9yIiksCiAgICBSZWFjdDkuY3JlYXRlRWxlbWVudCgKICAgICAgInByZSIsCiAgICAgIHsKICAgICAgICBzdHlsZTogewogICAgICAgICAgcGFkZGluZzogIjJyZW0iLAogICAgICAgICAgYmFja2dyb3VuZDogImhzbGEoMTAsIDUwJSwgNTAlLCAwLjEpIiwKICAgICAgICAgIGNvbG9yOiAicmVkIiwKICAgICAgICAgIG92ZXJmbG93OiAiYXV0byIKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGVycm9ySW5zdGFuY2Uuc3RhY2sKICAgICksCiAgICBoZXlEZXZlbG9wZXIKICApOwp9CmZ1bmN0aW9uIEJvdW5kYXJ5U2hlbGwoewogIHRpdGxlLAogIHJlbmRlclNjcmlwdHMsCiAgaXNPdXRzaWRlUmVtaXhBcHAsCiAgY2hpbGRyZW4KfSkgewogIHZhciBfYTsKICBsZXQgeyByb3V0ZU1vZHVsZXMgfSA9IHVzZUZyYW1ld29ya0NvbnRleHQoKTsKICBpZiAoKChfYSA9IHJvdXRlTW9kdWxlcy5yb290KSA9PSBudWxsID8gdm9pZCAwIDogX2EuTGF5b3V0KSAmJiAhaXNPdXRzaWRlUmVtaXhBcHApIHsKICAgIHJldHVybiBjaGlsZHJlbjsKICB9CiAgcmV0dXJuIFJlYWN0OS5jcmVhdGVFbGVtZW50KCJodG1sIiwgeyBsYW5nOiAiZW4iIH0sIFJlYWN0OS5jcmVhdGVFbGVtZW50KCJoZWFkIiwgbnVsbCwgUmVhY3Q5LmNyZWF0ZUVsZW1lbnQoIm1ldGEiLCB7IGNoYXJTZXQ6ICJ1dGYtOCIgfSksIFJlYWN0OS5jcmVhdGVFbGVtZW50KAogICAgIm1ldGEiLAogICAgewogICAgICBuYW1lOiAidmlld3BvcnQiLAogICAgICBjb250ZW50OiAid2lkdGg9ZGV2aWNlLXdpZHRoLGluaXRpYWwtc2NhbGU9MSx2aWV3cG9ydC1maXQ9Y292ZXIiCiAgICB9CiAgKSwgUmVhY3Q5LmNyZWF0ZUVsZW1lbnQoInRpdGxlIiwgbnVsbCwgdGl0bGUpKSwgUmVhY3Q5LmNyZWF0ZUVsZW1lbnQoImJvZHkiLCBudWxsLCBSZWFjdDkuY3JlYXRlRWxlbWVudCgibWFpbiIsIHsgc3R5bGU6IHsgZm9udEZhbWlseTogInN5c3RlbS11aSwgc2Fucy1zZXJpZiIsIHBhZGRpbmc6ICIycmVtIiB9IH0sIGNoaWxkcmVuLCByZW5kZXJTY3JpcHRzID8gUmVhY3Q5LmNyZWF0ZUVsZW1lbnQoU2NyaXB0cywgbnVsbCkgOiBudWxsKSkpOwp9CnZhciBpc0Jyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiAmJiB0eXBlb2Ygd2luZG93LmRvY3VtZW50ICE9PSAidW5kZWZpbmVkIiAmJiB0eXBlb2Ygd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgIT09ICJ1bmRlZmluZWQiOwp0cnkgewogIGlmIChpc0Jyb3dzZXIpIHsKICAgIHdpbmRvdy5fX3JlYWN0Um91dGVyVmVyc2lvbiA9IC8vIEB0cy1leHBlY3QtZXJyb3IKICAgICI3LjkuMSI7CiAgfQp9IGNhdGNoIChlKSB7Cn0KZnVuY3Rpb24gY3JlYXRlQnJvd3NlclJvdXRlcihyb3V0ZXMsIG9wdHMpIHsKICByZXR1cm4gY3JlYXRlUm91dGVyKHsKICAgIGJhc2VuYW1lOiBvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLmJhc2VuYW1lLAogICAgZ2V0Q29udGV4dDogb3B0cyA9PSBudWxsID8gdm9pZCAwIDogb3B0cy5nZXRDb250ZXh0LAogICAgZnV0dXJlOiBvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLmZ1dHVyZSwKICAgIGhpc3Rvcnk6IGNyZWF0ZUJyb3dzZXJIaXN0b3J5KHsgd2luZG93OiBvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLndpbmRvdyB9KSwKICAgIGh5ZHJhdGlvbkRhdGE6IChvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLmh5ZHJhdGlvbkRhdGEpIHx8IHBhcnNlSHlkcmF0aW9uRGF0YSgpLAogICAgcm91dGVzLAogICAgbWFwUm91dGVQcm9wZXJ0aWVzLAogICAgaHlkcmF0aW9uUm91dGVQcm9wZXJ0aWVzLAogICAgZGF0YVN0cmF0ZWd5OiBvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLmRhdGFTdHJhdGVneSwKICAgIHBhdGNoUm91dGVzT25OYXZpZ2F0aW9uOiBvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLnBhdGNoUm91dGVzT25OYXZpZ2F0aW9uLAogICAgd2luZG93OiBvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLndpbmRvdwogIH0pLmluaXRpYWxpemUoKTsKfQpmdW5jdGlvbiBjcmVhdGVIYXNoUm91dGVyKHJvdXRlcywgb3B0cykgewogIHJldHVybiBjcmVhdGVSb3V0ZXIoewogICAgYmFzZW5hbWU6IG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMuYmFzZW5hbWUsCiAgICBnZXRDb250ZXh0OiBvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLmdldENvbnRleHQsCiAgICBmdXR1cmU6IG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMuZnV0dXJlLAogICAgaGlzdG9yeTogY3JlYXRlSGFzaEhpc3RvcnkoeyB3aW5kb3c6IG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMud2luZG93IH0pLAogICAgaHlkcmF0aW9uRGF0YTogKG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMuaHlkcmF0aW9uRGF0YSkgfHwgcGFyc2VIeWRyYXRpb25EYXRhKCksCiAgICByb3V0ZXMsCiAgICBtYXBSb3V0ZVByb3BlcnRpZXMsCiAgICBoeWRyYXRpb25Sb3V0ZVByb3BlcnRpZXMsCiAgICBkYXRhU3RyYXRlZ3k6IG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMuZGF0YVN0cmF0ZWd5LAogICAgcGF0Y2hSb3V0ZXNPbk5hdmlnYXRpb246IG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMucGF0Y2hSb3V0ZXNPbk5hdmlnYXRpb24sCiAgICB3aW5kb3c6IG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMud2luZG93CiAgfSkuaW5pdGlhbGl6ZSgpOwp9CmZ1bmN0aW9uIHBhcnNlSHlkcmF0aW9uRGF0YSgpIHsKICBsZXQgc3RhdGUgPSB3aW5kb3cgPT0gbnVsbCA/IHZvaWQgMCA6IHdpbmRvdy5fX3N0YXRpY1JvdXRlckh5ZHJhdGlvbkRhdGE7CiAgaWYgKHN0YXRlICYmIHN0YXRlLmVycm9ycykgewogICAgc3RhdGUgPSB7CiAgICAgIC4uLnN0YXRlLAogICAgICBlcnJvcnM6IGRlc2VyaWFsaXplRXJyb3JzKHN0YXRlLmVycm9ycykKICAgIH07CiAgfQogIHJldHVybiBzdGF0ZTsKfQpmdW5jdGlvbiBkZXNlcmlhbGl6ZUVycm9ycyhlcnJvcnMpIHsKICBpZiAoIWVycm9ycykgcmV0dXJuIG51bGw7CiAgbGV0IGVudHJpZXMgPSBPYmplY3QuZW50cmllcyhlcnJvcnMpOwogIGxldCBzZXJpYWxpemVkID0ge307CiAgZm9yIChsZXQgW2tleSwgdmFsXSBvZiBlbnRyaWVzKSB7CiAgICBpZiAodmFsICYmIHZhbC5fX3R5cGUgPT09ICJSb3V0ZUVycm9yUmVzcG9uc2UiKSB7CiAgICAgIHNlcmlhbGl6ZWRba2V5XSA9IG5ldyBFcnJvclJlc3BvbnNlSW1wbCgKICAgICAgICB2YWwuc3RhdHVzLAogICAgICAgIHZhbC5zdGF0dXNUZXh0LAogICAgICAgIHZhbC5kYXRhLAogICAgICAgIHZhbC5pbnRlcm5hbCA9PT0gdHJ1ZQogICAgICApOwogICAgfSBlbHNlIGlmICh2YWwgJiYgdmFsLl9fdHlwZSA9PT0gIkVycm9yIikgewogICAgICBpZiAodmFsLl9fc3ViVHlwZSkgewogICAgICAgIGxldCBFcnJvckNvbnN0cnVjdG9yID0gd2luZG93W3ZhbC5fX3N1YlR5cGVdOwogICAgICAgIGlmICh0eXBlb2YgRXJyb3JDb25zdHJ1Y3RvciA9PT0gImZ1bmN0aW9uIikgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IGVycm9yID0gbmV3IEVycm9yQ29uc3RydWN0b3IodmFsLm1lc3NhZ2UpOwogICAgICAgICAgICBlcnJvci5zdGFjayA9ICIiOwogICAgICAgICAgICBzZXJpYWxpemVkW2tleV0gPSBlcnJvcjsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHNlcmlhbGl6ZWRba2V5XSA9PSBudWxsKSB7CiAgICAgICAgbGV0IGVycm9yID0gbmV3IEVycm9yKHZhbC5tZXNzYWdlKTsKICAgICAgICBlcnJvci5zdGFjayA9ICIiOwogICAgICAgIHNlcmlhbGl6ZWRba2V5XSA9IGVycm9yOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBzZXJpYWxpemVkW2tleV0gPSB2YWw7CiAgICB9CiAgfQogIHJldHVybiBzZXJpYWxpemVkOwp9CmZ1bmN0aW9uIEJyb3dzZXJSb3V0ZXIoewogIGJhc2VuYW1lLAogIGNoaWxkcmVuLAogIHdpbmRvdzogd2luZG93Mgp9KSB7CiAgbGV0IGhpc3RvcnlSZWYgPSBSZWFjdDEwLnVzZVJlZigpOwogIGlmIChoaXN0b3J5UmVmLmN1cnJlbnQgPT0gbnVsbCkgewogICAgaGlzdG9yeVJlZi5jdXJyZW50ID0gY3JlYXRlQnJvd3Nlckhpc3RvcnkoeyB3aW5kb3c6IHdpbmRvdzIsIHY1Q29tcGF0OiB0cnVlIH0pOwogIH0KICBsZXQgaGlzdG9yeSA9IGhpc3RvcnlSZWYuY3VycmVudDsKICBsZXQgW3N0YXRlLCBzZXRTdGF0ZUltcGxdID0gUmVhY3QxMC51c2VTdGF0ZSh7CiAgICBhY3Rpb246IGhpc3RvcnkuYWN0aW9uLAogICAgbG9jYXRpb246IGhpc3RvcnkubG9jYXRpb24KICB9KTsKICBsZXQgc2V0U3RhdGUgPSBSZWFjdDEwLnVzZUNhbGxiYWNrKAogICAgKG5ld1N0YXRlKSA9PiB7CiAgICAgIFJlYWN0MTAuc3RhcnRUcmFuc2l0aW9uKCgpID0+IHNldFN0YXRlSW1wbChuZXdTdGF0ZSkpOwogICAgfSwKICAgIFtzZXRTdGF0ZUltcGxdCiAgKTsKICBSZWFjdDEwLnVzZUxheW91dEVmZmVjdCgoKSA9PiBoaXN0b3J5Lmxpc3RlbihzZXRTdGF0ZSksIFtoaXN0b3J5LCBzZXRTdGF0ZV0pOwogIHJldHVybiBSZWFjdDEwLmNyZWF0ZUVsZW1lbnQoCiAgICBSb3V0ZXIsCiAgICB7CiAgICAgIGJhc2VuYW1lLAogICAgICBjaGlsZHJlbiwKICAgICAgbG9jYXRpb246IHN0YXRlLmxvY2F0aW9uLAogICAgICBuYXZpZ2F0aW9uVHlwZTogc3RhdGUuYWN0aW9uLAogICAgICBuYXZpZ2F0b3I6IGhpc3RvcnkKICAgIH0KICApOwp9CmZ1bmN0aW9uIEhhc2hSb3V0ZXIoeyBiYXNlbmFtZSwgY2hpbGRyZW4sIHdpbmRvdzogd2luZG93MiB9KSB7CiAgbGV0IGhpc3RvcnlSZWYgPSBSZWFjdDEwLnVzZVJlZigpOwogIGlmIChoaXN0b3J5UmVmLmN1cnJlbnQgPT0gbnVsbCkgewogICAgaGlzdG9yeVJlZi5jdXJyZW50ID0gY3JlYXRlSGFzaEhpc3RvcnkoeyB3aW5kb3c6IHdpbmRvdzIsIHY1Q29tcGF0OiB0cnVlIH0pOwogIH0KICBsZXQgaGlzdG9yeSA9IGhpc3RvcnlSZWYuY3VycmVudDsKICBsZXQgW3N0YXRlLCBzZXRTdGF0ZUltcGxdID0gUmVhY3QxMC51c2VTdGF0ZSh7CiAgICBhY3Rpb246IGhpc3RvcnkuYWN0aW9uLAogICAgbG9jYXRpb246IGhpc3RvcnkubG9jYXRpb24KICB9KTsKICBsZXQgc2V0U3RhdGUgPSBSZWFjdDEwLnVzZUNhbGxiYWNrKAogICAgKG5ld1N0YXRlKSA9PiB7CiAgICAgIFJlYWN0MTAuc3RhcnRUcmFuc2l0aW9uKCgpID0+IHNldFN0YXRlSW1wbChuZXdTdGF0ZSkpOwogICAgfSwKICAgIFtzZXRTdGF0ZUltcGxdCiAgKTsKICBSZWFjdDEwLnVzZUxheW91dEVmZmVjdCgoKSA9PiBoaXN0b3J5Lmxpc3RlbihzZXRTdGF0ZSksIFtoaXN0b3J5LCBzZXRTdGF0ZV0pOwogIHJldHVybiBSZWFjdDEwLmNyZWF0ZUVsZW1lbnQoCiAgICBSb3V0ZXIsCiAgICB7CiAgICAgIGJhc2VuYW1lLAogICAgICBjaGlsZHJlbiwKICAgICAgbG9jYXRpb246IHN0YXRlLmxvY2F0aW9uLAogICAgICBuYXZpZ2F0aW9uVHlwZTogc3RhdGUuYWN0aW9uLAogICAgICBuYXZpZ2F0b3I6IGhpc3RvcnkKICAgIH0KICApOwp9CmZ1bmN0aW9uIEhpc3RvcnlSb3V0ZXIoewogIGJhc2VuYW1lLAogIGNoaWxkcmVuLAogIGhpc3RvcnkKfSkgewogIGxldCBbc3RhdGUsIHNldFN0YXRlSW1wbF0gPSBSZWFjdDEwLnVzZVN0YXRlKHsKICAgIGFjdGlvbjogaGlzdG9yeS5hY3Rpb24sCiAgICBsb2NhdGlvbjogaGlzdG9yeS5sb2NhdGlvbgogIH0pOwogIGxldCBzZXRTdGF0ZSA9IFJlYWN0MTAudXNlQ2FsbGJhY2soCiAgICAobmV3U3RhdGUpID0+IHsKICAgICAgUmVhY3QxMC5zdGFydFRyYW5zaXRpb24oKCkgPT4gc2V0U3RhdGVJbXBsKG5ld1N0YXRlKSk7CiAgICB9LAogICAgW3NldFN0YXRlSW1wbF0KICApOwogIFJlYWN0MTAudXNlTGF5b3V0RWZmZWN0KCgpID0+IGhpc3RvcnkubGlzdGVuKHNldFN0YXRlKSwgW2hpc3RvcnksIHNldFN0YXRlXSk7CiAgcmV0dXJuIFJlYWN0MTAuY3JlYXRlRWxlbWVudCgKICAgIFJvdXRlciwKICAgIHsKICAgICAgYmFzZW5hbWUsCiAgICAgIGNoaWxkcmVuLAogICAgICBsb2NhdGlvbjogc3RhdGUubG9jYXRpb24sCiAgICAgIG5hdmlnYXRpb25UeXBlOiBzdGF0ZS5hY3Rpb24sCiAgICAgIG5hdmlnYXRvcjogaGlzdG9yeQogICAgfQogICk7Cn0KSGlzdG9yeVJvdXRlci5kaXNwbGF5TmFtZSA9ICJ1bnN0YWJsZV9IaXN0b3J5Um91dGVyIjsKdmFyIEFCU09MVVRFX1VSTF9SRUdFWDIgPSAvXig/OlthLXpdW2EtejAtOSsuLV0qOnxcL1wvKS9pOwp2YXIgTGluayA9IFJlYWN0MTAuZm9yd2FyZFJlZigKICBmdW5jdGlvbiBMaW5rV2l0aFJlZih7CiAgICBvbkNsaWNrLAogICAgZGlzY292ZXIgPSAicmVuZGVyIiwKICAgIHByZWZldGNoID0gIm5vbmUiLAogICAgcmVsYXRpdmUsCiAgICByZWxvYWREb2N1bWVudCwKICAgIHJlcGxhY2U6IHJlcGxhY2UyLAogICAgc3RhdGUsCiAgICB0YXJnZXQsCiAgICB0bywKICAgIHByZXZlbnRTY3JvbGxSZXNldCwKICAgIHZpZXdUcmFuc2l0aW9uLAogICAgLi4ucmVzdAogIH0sIGZvcndhcmRlZFJlZikgewogICAgbGV0IHsgYmFzZW5hbWUgfSA9IFJlYWN0MTAudXNlQ29udGV4dChOYXZpZ2F0aW9uQ29udGV4dCk7CiAgICBsZXQgaXNBYnNvbHV0ZSA9IHR5cGVvZiB0byA9PT0gInN0cmluZyIgJiYgQUJTT0xVVEVfVVJMX1JFR0VYMi50ZXN0KHRvKTsKICAgIGxldCBhYnNvbHV0ZUhyZWY7CiAgICBsZXQgaXNFeHRlcm5hbCA9IGZhbHNlOwogICAgaWYgKHR5cGVvZiB0byA9PT0gInN0cmluZyIgJiYgaXNBYnNvbHV0ZSkgewogICAgICBhYnNvbHV0ZUhyZWYgPSB0bzsKICAgICAgaWYgKGlzQnJvd3NlcikgewogICAgICAgIHRyeSB7CiAgICAgICAgICBsZXQgY3VycmVudFVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpOwogICAgICAgICAgbGV0IHRhcmdldFVybCA9IHRvLnN0YXJ0c1dpdGgoIi8vIikgPyBuZXcgVVJMKGN1cnJlbnRVcmwucHJvdG9jb2wgKyB0bykgOiBuZXcgVVJMKHRvKTsKICAgICAgICAgIGxldCBwYXRoID0gc3RyaXBCYXNlbmFtZSh0YXJnZXRVcmwucGF0aG5hbWUsIGJhc2VuYW1lKTsKICAgICAgICAgIGlmICh0YXJnZXRVcmwub3JpZ2luID09PSBjdXJyZW50VXJsLm9yaWdpbiAmJiBwYXRoICE9IG51bGwpIHsKICAgICAgICAgICAgdG8gPSBwYXRoICsgdGFyZ2V0VXJsLnNlYXJjaCArIHRhcmdldFVybC5oYXNoOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaXNFeHRlcm5hbCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgd2FybmluZygKICAgICAgICAgICAgZmFsc2UsCiAgICAgICAgICAgIGA8TGluayB0bz0iJHt0b30iPiBjb250YWlucyBhbiBpbnZhbGlkIFVSTCB3aGljaCB3aWxsIHByb2JhYmx5IGJyZWFrIHdoZW4gY2xpY2tlZCAtIHBsZWFzZSB1cGRhdGUgdG8gYSB2YWxpZCBVUkwgcGF0aC5gCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgbGV0IGhyZWYyID0gdXNlSHJlZih0bywgeyByZWxhdGl2ZSB9KTsKICAgIGxldCBbc2hvdWxkUHJlZmV0Y2gsIHByZWZldGNoUmVmLCBwcmVmZXRjaEhhbmRsZXJzXSA9IHVzZVByZWZldGNoQmVoYXZpb3IoCiAgICAgIHByZWZldGNoLAogICAgICByZXN0CiAgICApOwogICAgbGV0IGludGVybmFsT25DbGljayA9IHVzZUxpbmtDbGlja0hhbmRsZXIodG8sIHsKICAgICAgcmVwbGFjZTogcmVwbGFjZTIsCiAgICAgIHN0YXRlLAogICAgICB0YXJnZXQsCiAgICAgIHByZXZlbnRTY3JvbGxSZXNldCwKICAgICAgcmVsYXRpdmUsCiAgICAgIHZpZXdUcmFuc2l0aW9uCiAgICB9KTsKICAgIGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50KSB7CiAgICAgIGlmIChvbkNsaWNrKSBvbkNsaWNrKGV2ZW50KTsKICAgICAgaWYgKCFldmVudC5kZWZhdWx0UHJldmVudGVkKSB7CiAgICAgICAgaW50ZXJuYWxPbkNsaWNrKGV2ZW50KTsKICAgICAgfQogICAgfQogICAgbGV0IGxpbmsgPSAoCiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBqc3gtYTExeS9hbmNob3ItaGFzLWNvbnRlbnQKICAgICAgUmVhY3QxMC5jcmVhdGVFbGVtZW50KAogICAgICAgICJhIiwKICAgICAgICB7CiAgICAgICAgICAuLi5yZXN0LAogICAgICAgICAgLi4ucHJlZmV0Y2hIYW5kbGVycywKICAgICAgICAgIGhyZWY6IGFic29sdXRlSHJlZiB8fCBocmVmMiwKICAgICAgICAgIG9uQ2xpY2s6IGlzRXh0ZXJuYWwgfHwgcmVsb2FkRG9jdW1lbnQgPyBvbkNsaWNrIDogaGFuZGxlQ2xpY2ssCiAgICAgICAgICByZWY6IG1lcmdlUmVmcyhmb3J3YXJkZWRSZWYsIHByZWZldGNoUmVmKSwKICAgICAgICAgIHRhcmdldCwKICAgICAgICAgICJkYXRhLWRpc2NvdmVyIjogIWlzQWJzb2x1dGUgJiYgZGlzY292ZXIgPT09ICJyZW5kZXIiID8gInRydWUiIDogdm9pZCAwCiAgICAgICAgfQogICAgICApCiAgICApOwogICAgcmV0dXJuIHNob3VsZFByZWZldGNoICYmICFpc0Fic29sdXRlID8gUmVhY3QxMC5jcmVhdGVFbGVtZW50KFJlYWN0MTAuRnJhZ21lbnQsIG51bGwsIGxpbmssIFJlYWN0MTAuY3JlYXRlRWxlbWVudChQcmVmZXRjaFBhZ2VMaW5rcywgeyBwYWdlOiBocmVmMiB9KSkgOiBsaW5rOwogIH0KKTsKTGluay5kaXNwbGF5TmFtZSA9ICJMaW5rIjsKdmFyIE5hdkxpbmsgPSBSZWFjdDEwLmZvcndhcmRSZWYoCiAgZnVuY3Rpb24gTmF2TGlua1dpdGhSZWYoewogICAgImFyaWEtY3VycmVudCI6IGFyaWFDdXJyZW50UHJvcCA9ICJwYWdlIiwKICAgIGNhc2VTZW5zaXRpdmUgPSBmYWxzZSwKICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lUHJvcCA9ICIiLAogICAgZW5kID0gZmFsc2UsCiAgICBzdHlsZTogc3R5bGVQcm9wLAogICAgdG8sCiAgICB2aWV3VHJhbnNpdGlvbiwKICAgIGNoaWxkcmVuLAogICAgLi4ucmVzdAogIH0sIHJlZikgewogICAgbGV0IHBhdGggPSB1c2VSZXNvbHZlZFBhdGgodG8sIHsgcmVsYXRpdmU6IHJlc3QucmVsYXRpdmUgfSk7CiAgICBsZXQgbG9jYXRpb24yID0gdXNlTG9jYXRpb24oKTsKICAgIGxldCByb3V0ZXJTdGF0ZSA9IFJlYWN0MTAudXNlQ29udGV4dChEYXRhUm91dGVyU3RhdGVDb250ZXh0KTsKICAgIGxldCB7IG5hdmlnYXRvciwgYmFzZW5hbWUgfSA9IFJlYWN0MTAudXNlQ29udGV4dChOYXZpZ2F0aW9uQ29udGV4dCk7CiAgICBsZXQgaXNUcmFuc2l0aW9uaW5nID0gcm91dGVyU3RhdGUgIT0gbnVsbCAmJiAvLyBDb25kaXRpb25hbCB1c2FnZSBpcyBPSyBoZXJlIGJlY2F1c2UgdGhlIHVzYWdlIG9mIGEgZGF0YSByb3V0ZXIgaXMgc3RhdGljCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvcnVsZXMtb2YtaG9va3MKICAgIHVzZVZpZXdUcmFuc2l0aW9uU3RhdGUocGF0aCkgJiYgdmlld1RyYW5zaXRpb24gPT09IHRydWU7CiAgICBsZXQgdG9QYXRobmFtZSA9IG5hdmlnYXRvci5lbmNvZGVMb2NhdGlvbiA/IG5hdmlnYXRvci5lbmNvZGVMb2NhdGlvbihwYXRoKS5wYXRobmFtZSA6IHBhdGgucGF0aG5hbWU7CiAgICBsZXQgbG9jYXRpb25QYXRobmFtZSA9IGxvY2F0aW9uMi5wYXRobmFtZTsKICAgIGxldCBuZXh0TG9jYXRpb25QYXRobmFtZSA9IHJvdXRlclN0YXRlICYmIHJvdXRlclN0YXRlLm5hdmlnYXRpb24gJiYgcm91dGVyU3RhdGUubmF2aWdhdGlvbi5sb2NhdGlvbiA/IHJvdXRlclN0YXRlLm5hdmlnYXRpb24ubG9jYXRpb24ucGF0aG5hbWUgOiBudWxsOwogICAgaWYgKCFjYXNlU2Vuc2l0aXZlKSB7CiAgICAgIGxvY2F0aW9uUGF0aG5hbWUgPSBsb2NhdGlvblBhdGhuYW1lLnRvTG93ZXJDYXNlKCk7CiAgICAgIG5leHRMb2NhdGlvblBhdGhuYW1lID0gbmV4dExvY2F0aW9uUGF0aG5hbWUgPyBuZXh0TG9jYXRpb25QYXRobmFtZS50b0xvd2VyQ2FzZSgpIDogbnVsbDsKICAgICAgdG9QYXRobmFtZSA9IHRvUGF0aG5hbWUudG9Mb3dlckNhc2UoKTsKICAgIH0KICAgIGlmIChuZXh0TG9jYXRpb25QYXRobmFtZSAmJiBiYXNlbmFtZSkgewogICAgICBuZXh0TG9jYXRpb25QYXRobmFtZSA9IHN0cmlwQmFzZW5hbWUobmV4dExvY2F0aW9uUGF0aG5hbWUsIGJhc2VuYW1lKSB8fCBuZXh0TG9jYXRpb25QYXRobmFtZTsKICAgIH0KICAgIGNvbnN0IGVuZFNsYXNoUG9zaXRpb24gPSB0b1BhdGhuYW1lICE9PSAiLyIgJiYgdG9QYXRobmFtZS5lbmRzV2l0aCgiLyIpID8gdG9QYXRobmFtZS5sZW5ndGggLSAxIDogdG9QYXRobmFtZS5sZW5ndGg7CiAgICBsZXQgaXNBY3RpdmUgPSBsb2NhdGlvblBhdGhuYW1lID09PSB0b1BhdGhuYW1lIHx8ICFlbmQgJiYgbG9jYXRpb25QYXRobmFtZS5zdGFydHNXaXRoKHRvUGF0aG5hbWUpICYmIGxvY2F0aW9uUGF0aG5hbWUuY2hhckF0KGVuZFNsYXNoUG9zaXRpb24pID09PSAiLyI7CiAgICBsZXQgaXNQZW5kaW5nID0gbmV4dExvY2F0aW9uUGF0aG5hbWUgIT0gbnVsbCAmJiAobmV4dExvY2F0aW9uUGF0aG5hbWUgPT09IHRvUGF0aG5hbWUgfHwgIWVuZCAmJiBuZXh0TG9jYXRpb25QYXRobmFtZS5zdGFydHNXaXRoKHRvUGF0aG5hbWUpICYmIG5leHRMb2NhdGlvblBhdGhuYW1lLmNoYXJBdCh0b1BhdGhuYW1lLmxlbmd0aCkgPT09ICIvIik7CiAgICBsZXQgcmVuZGVyUHJvcHMgPSB7CiAgICAgIGlzQWN0aXZlLAogICAgICBpc1BlbmRpbmcsCiAgICAgIGlzVHJhbnNpdGlvbmluZwogICAgfTsKICAgIGxldCBhcmlhQ3VycmVudCA9IGlzQWN0aXZlID8gYXJpYUN1cnJlbnRQcm9wIDogdm9pZCAwOwogICAgbGV0IGNsYXNzTmFtZTsKICAgIGlmICh0eXBlb2YgY2xhc3NOYW1lUHJvcCA9PT0gImZ1bmN0aW9uIikgewogICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWVQcm9wKHJlbmRlclByb3BzKTsKICAgIH0gZWxzZSB7CiAgICAgIGNsYXNzTmFtZSA9IFsKICAgICAgICBjbGFzc05hbWVQcm9wLAogICAgICAgIGlzQWN0aXZlID8gImFjdGl2ZSIgOiBudWxsLAogICAgICAgIGlzUGVuZGluZyA/ICJwZW5kaW5nIiA6IG51bGwsCiAgICAgICAgaXNUcmFuc2l0aW9uaW5nID8gInRyYW5zaXRpb25pbmciIDogbnVsbAogICAgICBdLmZpbHRlcihCb29sZWFuKS5qb2luKCIgIik7CiAgICB9CiAgICBsZXQgc3R5bGUgPSB0eXBlb2Ygc3R5bGVQcm9wID09PSAiZnVuY3Rpb24iID8gc3R5bGVQcm9wKHJlbmRlclByb3BzKSA6IHN0eWxlUHJvcDsKICAgIHJldHVybiBSZWFjdDEwLmNyZWF0ZUVsZW1lbnQoCiAgICAgIExpbmssCiAgICAgIHsKICAgICAgICAuLi5yZXN0LAogICAgICAgICJhcmlhLWN1cnJlbnQiOiBhcmlhQ3VycmVudCwKICAgICAgICBjbGFzc05hbWUsCiAgICAgICAgcmVmLAogICAgICAgIHN0eWxlLAogICAgICAgIHRvLAogICAgICAgIHZpZXdUcmFuc2l0aW9uCiAgICAgIH0sCiAgICAgIHR5cGVvZiBjaGlsZHJlbiA9PT0gImZ1bmN0aW9uIiA/IGNoaWxkcmVuKHJlbmRlclByb3BzKSA6IGNoaWxkcmVuCiAgICApOwogIH0KKTsKTmF2TGluay5kaXNwbGF5TmFtZSA9ICJOYXZMaW5rIjsKdmFyIEZvcm0gPSBSZWFjdDEwLmZvcndhcmRSZWYoCiAgKHsKICAgIGRpc2NvdmVyID0gInJlbmRlciIsCiAgICBmZXRjaGVyS2V5LAogICAgbmF2aWdhdGUsCiAgICByZWxvYWREb2N1bWVudCwKICAgIHJlcGxhY2U6IHJlcGxhY2UyLAogICAgc3RhdGUsCiAgICBtZXRob2QgPSBkZWZhdWx0TWV0aG9kLAogICAgYWN0aW9uLAogICAgb25TdWJtaXQsCiAgICByZWxhdGl2ZSwKICAgIHByZXZlbnRTY3JvbGxSZXNldCwKICAgIHZpZXdUcmFuc2l0aW9uLAogICAgLi4ucHJvcHMKICB9LCBmb3J3YXJkZWRSZWYpID0+IHsKICAgIGxldCBzdWJtaXQgPSB1c2VTdWJtaXQoKTsKICAgIGxldCBmb3JtQWN0aW9uID0gdXNlRm9ybUFjdGlvbihhY3Rpb24sIHsgcmVsYXRpdmUgfSk7CiAgICBsZXQgZm9ybU1ldGhvZCA9IG1ldGhvZC50b0xvd2VyQ2FzZSgpID09PSAiZ2V0IiA/ICJnZXQiIDogInBvc3QiOwogICAgbGV0IGlzQWJzb2x1dGUgPSB0eXBlb2YgYWN0aW9uID09PSAic3RyaW5nIiAmJiBBQlNPTFVURV9VUkxfUkVHRVgyLnRlc3QoYWN0aW9uKTsKICAgIGxldCBzdWJtaXRIYW5kbGVyID0gKGV2ZW50KSA9PiB7CiAgICAgIG9uU3VibWl0ICYmIG9uU3VibWl0KGV2ZW50KTsKICAgICAgaWYgKGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgbGV0IHN1Ym1pdHRlciA9IGV2ZW50Lm5hdGl2ZUV2ZW50LnN1Ym1pdHRlcjsKICAgICAgbGV0IHN1Ym1pdE1ldGhvZCA9IChzdWJtaXR0ZXIgPT0gbnVsbCA/IHZvaWQgMCA6IHN1Ym1pdHRlci5nZXRBdHRyaWJ1dGUoImZvcm1tZXRob2QiKSkgfHwgbWV0aG9kOwogICAgICBzdWJtaXQoc3VibWl0dGVyIHx8IGV2ZW50LmN1cnJlbnRUYXJnZXQsIHsKICAgICAgICBmZXRjaGVyS2V5LAogICAgICAgIG1ldGhvZDogc3VibWl0TWV0aG9kLAogICAgICAgIG5hdmlnYXRlLAogICAgICAgIHJlcGxhY2U6IHJlcGxhY2UyLAogICAgICAgIHN0YXRlLAogICAgICAgIHJlbGF0aXZlLAogICAgICAgIHByZXZlbnRTY3JvbGxSZXNldCwKICAgICAgICB2aWV3VHJhbnNpdGlvbgogICAgICB9KTsKICAgIH07CiAgICByZXR1cm4gUmVhY3QxMC5jcmVhdGVFbGVtZW50KAogICAgICAiZm9ybSIsCiAgICAgIHsKICAgICAgICByZWY6IGZvcndhcmRlZFJlZiwKICAgICAgICBtZXRob2Q6IGZvcm1NZXRob2QsCiAgICAgICAgYWN0aW9uOiBmb3JtQWN0aW9uLAogICAgICAgIG9uU3VibWl0OiByZWxvYWREb2N1bWVudCA/IG9uU3VibWl0IDogc3VibWl0SGFuZGxlciwKICAgICAgICAuLi5wcm9wcywKICAgICAgICAiZGF0YS1kaXNjb3ZlciI6ICFpc0Fic29sdXRlICYmIGRpc2NvdmVyID09PSAicmVuZGVyIiA/ICJ0cnVlIiA6IHZvaWQgMAogICAgICB9CiAgICApOwogIH0KKTsKRm9ybS5kaXNwbGF5TmFtZSA9ICJGb3JtIjsKZnVuY3Rpb24gU2Nyb2xsUmVzdG9yYXRpb24oewogIGdldEtleSwKICBzdG9yYWdlS2V5LAogIC4uLnByb3BzCn0pIHsKICBsZXQgcmVtaXhDb250ZXh0ID0gUmVhY3QxMC51c2VDb250ZXh0KEZyYW1ld29ya0NvbnRleHQpOwogIGxldCB7IGJhc2VuYW1lIH0gPSBSZWFjdDEwLnVzZUNvbnRleHQoTmF2aWdhdGlvbkNvbnRleHQpOwogIGxldCBsb2NhdGlvbjIgPSB1c2VMb2NhdGlvbigpOwogIGxldCBtYXRjaGVzID0gdXNlTWF0Y2hlcygpOwogIHVzZVNjcm9sbFJlc3RvcmF0aW9uKHsgZ2V0S2V5LCBzdG9yYWdlS2V5IH0pOwogIGxldCBzc3JLZXkgPSBSZWFjdDEwLnVzZU1lbW8oCiAgICAoKSA9PiB7CiAgICAgIGlmICghcmVtaXhDb250ZXh0IHx8ICFnZXRLZXkpIHJldHVybiBudWxsOwogICAgICBsZXQgdXNlcktleSA9IGdldFNjcm9sbFJlc3RvcmF0aW9uS2V5KAogICAgICAgIGxvY2F0aW9uMiwKICAgICAgICBtYXRjaGVzLAogICAgICAgIGJhc2VuYW1lLAogICAgICAgIGdldEtleQogICAgICApOwogICAgICByZXR1cm4gdXNlcktleSAhPT0gbG9jYXRpb24yLmtleSA/IHVzZXJLZXkgOiBudWxsOwogICAgfSwKICAgIC8vIE5haCwgd2Ugb25seSBuZWVkIHRoaXMgdGhlIGZpcnN0IHRpbWUgZm9yIHRoZSBTU1IgcmVuZGVyCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzCiAgICBbXQogICk7CiAgaWYgKCFyZW1peENvbnRleHQgfHwgcmVtaXhDb250ZXh0LmlzU3BhTW9kZSkgewogICAgcmV0dXJuIG51bGw7CiAgfQogIGxldCByZXN0b3JlU2Nyb2xsID0gKChzdG9yYWdlS2V5MiwgcmVzdG9yZUtleSkgPT4gewogICAgaWYgKCF3aW5kb3cuaGlzdG9yeS5zdGF0ZSB8fCAhd2luZG93Lmhpc3Rvcnkuc3RhdGUua2V5KSB7CiAgICAgIGxldCBrZXkgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDMyKS5zbGljZSgyKTsKICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHsga2V5IH0sICIiKTsKICAgIH0KICAgIHRyeSB7CiAgICAgIGxldCBwb3NpdGlvbnMgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oc3RvcmFnZUtleTIpIHx8ICJ7fSIpOwogICAgICBsZXQgc3RvcmVkWSA9IHBvc2l0aW9uc1tyZXN0b3JlS2V5IHx8IHdpbmRvdy5oaXN0b3J5LnN0YXRlLmtleV07CiAgICAgIGlmICh0eXBlb2Ygc3RvcmVkWSA9PT0gIm51bWJlciIpIHsKICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgc3RvcmVkWSk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKHN0b3JhZ2VLZXkyKTsKICAgIH0KICB9KS50b1N0cmluZygpOwogIHJldHVybiBSZWFjdDEwLmNyZWF0ZUVsZW1lbnQoCiAgICAic2NyaXB0IiwKICAgIHsKICAgICAgLi4ucHJvcHMsCiAgICAgIHN1cHByZXNzSHlkcmF0aW9uV2FybmluZzogdHJ1ZSwKICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHsKICAgICAgICBfX2h0bWw6IGAoJHtyZXN0b3JlU2Nyb2xsfSkoJHtKU09OLnN0cmluZ2lmeSgKICAgICAgICAgIHN0b3JhZ2VLZXkgfHwgU0NST0xMX1JFU1RPUkFUSU9OX1NUT1JBR0VfS0VZCiAgICAgICAgKX0sICR7SlNPTi5zdHJpbmdpZnkoc3NyS2V5KX0pYAogICAgICB9CiAgICB9CiAgKTsKfQpTY3JvbGxSZXN0b3JhdGlvbi5kaXNwbGF5TmFtZSA9ICJTY3JvbGxSZXN0b3JhdGlvbiI7CmZ1bmN0aW9uIGdldERhdGFSb3V0ZXJDb25zb2xlRXJyb3IyKGhvb2tOYW1lKSB7CiAgcmV0dXJuIGAke2hvb2tOYW1lfSBtdXN0IGJlIHVzZWQgd2l0aGluIGEgZGF0YSByb3V0ZXIuICBTZWUgaHR0cHM6Ly9yZWFjdHJvdXRlci5jb20vZW4vbWFpbi9yb3V0ZXJzL3BpY2tpbmctYS1yb3V0ZXIuYDsKfQpmdW5jdGlvbiB1c2VEYXRhUm91dGVyQ29udGV4dDMoaG9va05hbWUpIHsKICBsZXQgY3R4ID0gUmVhY3QxMC51c2VDb250ZXh0KERhdGFSb3V0ZXJDb250ZXh0KTsKICBpbnZhcmlhbnQoY3R4LCBnZXREYXRhUm91dGVyQ29uc29sZUVycm9yMihob29rTmFtZSkpOwogIHJldHVybiBjdHg7Cn0KZnVuY3Rpb24gdXNlRGF0YVJvdXRlclN0YXRlMihob29rTmFtZSkgewogIGxldCBzdGF0ZSA9IFJlYWN0MTAudXNlQ29udGV4dChEYXRhUm91dGVyU3RhdGVDb250ZXh0KTsKICBpbnZhcmlhbnQoc3RhdGUsIGdldERhdGFSb3V0ZXJDb25zb2xlRXJyb3IyKGhvb2tOYW1lKSk7CiAgcmV0dXJuIHN0YXRlOwp9CmZ1bmN0aW9uIHVzZUxpbmtDbGlja0hhbmRsZXIodG8sIHsKICB0YXJnZXQsCiAgcmVwbGFjZTogcmVwbGFjZVByb3AsCiAgc3RhdGUsCiAgcHJldmVudFNjcm9sbFJlc2V0LAogIHJlbGF0aXZlLAogIHZpZXdUcmFuc2l0aW9uCn0gPSB7fSkgewogIGxldCBuYXZpZ2F0ZSA9IHVzZU5hdmlnYXRlKCk7CiAgbGV0IGxvY2F0aW9uMiA9IHVzZUxvY2F0aW9uKCk7CiAgbGV0IHBhdGggPSB1c2VSZXNvbHZlZFBhdGgodG8sIHsgcmVsYXRpdmUgfSk7CiAgcmV0dXJuIFJlYWN0MTAudXNlQ2FsbGJhY2soCiAgICAoZXZlbnQpID0+IHsKICAgICAgaWYgKHNob3VsZFByb2Nlc3NMaW5rQ2xpY2soZXZlbnQsIHRhcmdldCkpIHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGxldCByZXBsYWNlMiA9IHJlcGxhY2VQcm9wICE9PSB2b2lkIDAgPyByZXBsYWNlUHJvcCA6IGNyZWF0ZVBhdGgobG9jYXRpb24yKSA9PT0gY3JlYXRlUGF0aChwYXRoKTsKICAgICAgICBuYXZpZ2F0ZSh0bywgewogICAgICAgICAgcmVwbGFjZTogcmVwbGFjZTIsCiAgICAgICAgICBzdGF0ZSwKICAgICAgICAgIHByZXZlbnRTY3JvbGxSZXNldCwKICAgICAgICAgIHJlbGF0aXZlLAogICAgICAgICAgdmlld1RyYW5zaXRpb24KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIFsKICAgICAgbG9jYXRpb24yLAogICAgICBuYXZpZ2F0ZSwKICAgICAgcGF0aCwKICAgICAgcmVwbGFjZVByb3AsCiAgICAgIHN0YXRlLAogICAgICB0YXJnZXQsCiAgICAgIHRvLAogICAgICBwcmV2ZW50U2Nyb2xsUmVzZXQsCiAgICAgIHJlbGF0aXZlLAogICAgICB2aWV3VHJhbnNpdGlvbgogICAgXQogICk7Cn0KZnVuY3Rpb24gdXNlU2VhcmNoUGFyYW1zKGRlZmF1bHRJbml0KSB7CiAgd2FybmluZygKICAgIHR5cGVvZiBVUkxTZWFyY2hQYXJhbXMgIT09ICJ1bmRlZmluZWQiLAogICAgYFlvdSBjYW5ub3QgdXNlIHRoZSBcYHVzZVNlYXJjaFBhcmFtc1xgIGhvb2sgaW4gYSBicm93c2VyIHRoYXQgZG9lcyBub3Qgc3VwcG9ydCB0aGUgVVJMU2VhcmNoUGFyYW1zIEFQSS4gSWYgeW91IG5lZWQgdG8gc3VwcG9ydCBJbnRlcm5ldCBFeHBsb3JlciAxMSwgd2UgcmVjb21tZW5kIHlvdSBsb2FkIGEgcG9seWZpbGwgc3VjaCBhcyBodHRwczovL2dpdGh1Yi5jb20vdW5nYXAvdXJsLXNlYXJjaC1wYXJhbXMuYAogICk7CiAgbGV0IGRlZmF1bHRTZWFyY2hQYXJhbXNSZWYgPSBSZWFjdDEwLnVzZVJlZihjcmVhdGVTZWFyY2hQYXJhbXMoZGVmYXVsdEluaXQpKTsKICBsZXQgaGFzU2V0U2VhcmNoUGFyYW1zUmVmID0gUmVhY3QxMC51c2VSZWYoZmFsc2UpOwogIGxldCBsb2NhdGlvbjIgPSB1c2VMb2NhdGlvbigpOwogIGxldCBzZWFyY2hQYXJhbXMgPSBSZWFjdDEwLnVzZU1lbW8oCiAgICAoKSA9PiAoCiAgICAgIC8vIE9ubHkgbWVyZ2UgaW4gdGhlIGRlZmF1bHRzIGlmIHdlIGhhdmVuJ3QgeWV0IGNhbGxlZCBzZXRTZWFyY2hQYXJhbXMuCiAgICAgIC8vIE9uY2Ugd2UgY2FsbCB0aGF0IHdlIHdhbnQgdGhvc2UgdG8gdGFrZSBwcmVjZWRlbmNlLCBvdGhlcndpc2UgeW91IGNhbid0CiAgICAgIC8vIHJlbW92ZSBhIHBhcmFtIHdpdGggc2V0U2VhcmNoUGFyYW1zKHt9KSBpZiBpdCBoYXMgYW4gaW5pdGlhbCB2YWx1ZQogICAgICBnZXRTZWFyY2hQYXJhbXNGb3JMb2NhdGlvbigKICAgICAgICBsb2NhdGlvbjIuc2VhcmNoLAogICAgICAgIGhhc1NldFNlYXJjaFBhcmFtc1JlZi5jdXJyZW50ID8gbnVsbCA6IGRlZmF1bHRTZWFyY2hQYXJhbXNSZWYuY3VycmVudAogICAgICApCiAgICApLAogICAgW2xvY2F0aW9uMi5zZWFyY2hdCiAgKTsKICBsZXQgbmF2aWdhdGUgPSB1c2VOYXZpZ2F0ZSgpOwogIGxldCBzZXRTZWFyY2hQYXJhbXMgPSBSZWFjdDEwLnVzZUNhbGxiYWNrKAogICAgKG5leHRJbml0LCBuYXZpZ2F0ZU9wdGlvbnMpID0+IHsKICAgICAgY29uc3QgbmV3U2VhcmNoUGFyYW1zID0gY3JlYXRlU2VhcmNoUGFyYW1zKAogICAgICAgIHR5cGVvZiBuZXh0SW5pdCA9PT0gImZ1bmN0aW9uIiA/IG5leHRJbml0KG5ldyBVUkxTZWFyY2hQYXJhbXMoc2VhcmNoUGFyYW1zKSkgOiBuZXh0SW5pdAogICAgICApOwogICAgICBoYXNTZXRTZWFyY2hQYXJhbXNSZWYuY3VycmVudCA9IHRydWU7CiAgICAgIG5hdmlnYXRlKCI/IiArIG5ld1NlYXJjaFBhcmFtcywgbmF2aWdhdGVPcHRpb25zKTsKICAgIH0sCiAgICBbbmF2aWdhdGUsIHNlYXJjaFBhcmFtc10KICApOwogIHJldHVybiBbc2VhcmNoUGFyYW1zLCBzZXRTZWFyY2hQYXJhbXNdOwp9CnZhciBmZXRjaGVySWQgPSAwOwp2YXIgZ2V0VW5pcXVlRmV0Y2hlcklkID0gKCkgPT4gYF9fJHtTdHJpbmcoKytmZXRjaGVySWQpfV9fYDsKZnVuY3Rpb24gdXNlU3VibWl0KCkgewogIGxldCB7IHJvdXRlcjogcm91dGVyMiB9ID0gdXNlRGF0YVJvdXRlckNvbnRleHQzKAogICAgInVzZVN1Ym1pdCIKICAgIC8qIFVzZVN1Ym1pdCAqLwogICk7CiAgbGV0IHsgYmFzZW5hbWUgfSA9IFJlYWN0MTAudXNlQ29udGV4dChOYXZpZ2F0aW9uQ29udGV4dCk7CiAgbGV0IGN1cnJlbnRSb3V0ZUlkID0gdXNlUm91dGVJZCgpOwogIHJldHVybiBSZWFjdDEwLnVzZUNhbGxiYWNrKAogICAgYXN5bmMgKHRhcmdldCwgb3B0aW9ucyA9IHt9KSA9PiB7CiAgICAgIGxldCB7IGFjdGlvbiwgbWV0aG9kLCBlbmNUeXBlLCBmb3JtRGF0YSwgYm9keSB9ID0gZ2V0Rm9ybVN1Ym1pc3Npb25JbmZvKAogICAgICAgIHRhcmdldCwKICAgICAgICBiYXNlbmFtZQogICAgICApOwogICAgICBpZiAob3B0aW9ucy5uYXZpZ2F0ZSA9PT0gZmFsc2UpIHsKICAgICAgICBsZXQga2V5ID0gb3B0aW9ucy5mZXRjaGVyS2V5IHx8IGdldFVuaXF1ZUZldGNoZXJJZCgpOwogICAgICAgIGF3YWl0IHJvdXRlcjIuZmV0Y2goa2V5LCBjdXJyZW50Um91dGVJZCwgb3B0aW9ucy5hY3Rpb24gfHwgYWN0aW9uLCB7CiAgICAgICAgICBwcmV2ZW50U2Nyb2xsUmVzZXQ6IG9wdGlvbnMucHJldmVudFNjcm9sbFJlc2V0LAogICAgICAgICAgZm9ybURhdGEsCiAgICAgICAgICBib2R5LAogICAgICAgICAgZm9ybU1ldGhvZDogb3B0aW9ucy5tZXRob2QgfHwgbWV0aG9kLAogICAgICAgICAgZm9ybUVuY1R5cGU6IG9wdGlvbnMuZW5jVHlwZSB8fCBlbmNUeXBlLAogICAgICAgICAgZmx1c2hTeW5jOiBvcHRpb25zLmZsdXNoU3luYwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGF3YWl0IHJvdXRlcjIubmF2aWdhdGUob3B0aW9ucy5hY3Rpb24gfHwgYWN0aW9uLCB7CiAgICAgICAgICBwcmV2ZW50U2Nyb2xsUmVzZXQ6IG9wdGlvbnMucHJldmVudFNjcm9sbFJlc2V0LAogICAgICAgICAgZm9ybURhdGEsCiAgICAgICAgICBib2R5LAogICAgICAgICAgZm9ybU1ldGhvZDogb3B0aW9ucy5tZXRob2QgfHwgbWV0aG9kLAogICAgICAgICAgZm9ybUVuY1R5cGU6IG9wdGlvbnMuZW5jVHlwZSB8fCBlbmNUeXBlLAogICAgICAgICAgcmVwbGFjZTogb3B0aW9ucy5yZXBsYWNlLAogICAgICAgICAgc3RhdGU6IG9wdGlvbnMuc3RhdGUsCiAgICAgICAgICBmcm9tUm91dGVJZDogY3VycmVudFJvdXRlSWQsCiAgICAgICAgICBmbHVzaFN5bmM6IG9wdGlvbnMuZmx1c2hTeW5jLAogICAgICAgICAgdmlld1RyYW5zaXRpb246IG9wdGlvbnMudmlld1RyYW5zaXRpb24KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIFtyb3V0ZXIyLCBiYXNlbmFtZSwgY3VycmVudFJvdXRlSWRdCiAgKTsKfQpmdW5jdGlvbiB1c2VGb3JtQWN0aW9uKGFjdGlvbiwgeyByZWxhdGl2ZSB9ID0ge30pIHsKICBsZXQgeyBiYXNlbmFtZSB9ID0gUmVhY3QxMC51c2VDb250ZXh0KE5hdmlnYXRpb25Db250ZXh0KTsKICBsZXQgcm91dGVDb250ZXh0ID0gUmVhY3QxMC51c2VDb250ZXh0KFJvdXRlQ29udGV4dCk7CiAgaW52YXJpYW50KHJvdXRlQ29udGV4dCwgInVzZUZvcm1BY3Rpb24gbXVzdCBiZSB1c2VkIGluc2lkZSBhIFJvdXRlQ29udGV4dCIpOwogIGxldCBbbWF0Y2hdID0gcm91dGVDb250ZXh0Lm1hdGNoZXMuc2xpY2UoLTEpOwogIGxldCBwYXRoID0geyAuLi51c2VSZXNvbHZlZFBhdGgoYWN0aW9uID8gYWN0aW9uIDogIi4iLCB7IHJlbGF0aXZlIH0pIH07CiAgbGV0IGxvY2F0aW9uMiA9IHVzZUxvY2F0aW9uKCk7CiAgaWYgKGFjdGlvbiA9PSBudWxsKSB7CiAgICBwYXRoLnNlYXJjaCA9IGxvY2F0aW9uMi5zZWFyY2g7CiAgICBsZXQgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhwYXRoLnNlYXJjaCk7CiAgICBsZXQgaW5kZXhWYWx1ZXMgPSBwYXJhbXMuZ2V0QWxsKCJpbmRleCIpOwogICAgbGV0IGhhc05ha2VkSW5kZXhQYXJhbSA9IGluZGV4VmFsdWVzLnNvbWUoKHYpID0+IHYgPT09ICIiKTsKICAgIGlmIChoYXNOYWtlZEluZGV4UGFyYW0pIHsKICAgICAgcGFyYW1zLmRlbGV0ZSgiaW5kZXgiKTsKICAgICAgaW5kZXhWYWx1ZXMuZmlsdGVyKCh2KSA9PiB2KS5mb3JFYWNoKCh2KSA9PiBwYXJhbXMuYXBwZW5kKCJpbmRleCIsIHYpKTsKICAgICAgbGV0IHFzID0gcGFyYW1zLnRvU3RyaW5nKCk7CiAgICAgIHBhdGguc2VhcmNoID0gcXMgPyBgPyR7cXN9YCA6ICIiOwogICAgfQogIH0KICBpZiAoKCFhY3Rpb24gfHwgYWN0aW9uID09PSAiLiIpICYmIG1hdGNoLnJvdXRlLmluZGV4KSB7CiAgICBwYXRoLnNlYXJjaCA9IHBhdGguc2VhcmNoID8gcGF0aC5zZWFyY2gucmVwbGFjZSgvXlw/LywgIj9pbmRleCYiKSA6ICI/aW5kZXgiOwogIH0KICBpZiAoYmFzZW5hbWUgIT09ICIvIikgewogICAgcGF0aC5wYXRobmFtZSA9IHBhdGgucGF0aG5hbWUgPT09ICIvIiA/IGJhc2VuYW1lIDogam9pblBhdGhzKFtiYXNlbmFtZSwgcGF0aC5wYXRobmFtZV0pOwogIH0KICByZXR1cm4gY3JlYXRlUGF0aChwYXRoKTsKfQpmdW5jdGlvbiB1c2VGZXRjaGVyKHsKICBrZXkKfSA9IHt9KSB7CiAgdmFyIF9hOwogIGxldCB7IHJvdXRlcjogcm91dGVyMiB9ID0gdXNlRGF0YVJvdXRlckNvbnRleHQzKAogICAgInVzZUZldGNoZXIiCiAgICAvKiBVc2VGZXRjaGVyICovCiAgKTsKICBsZXQgc3RhdGUgPSB1c2VEYXRhUm91dGVyU3RhdGUyKAogICAgInVzZUZldGNoZXIiCiAgICAvKiBVc2VGZXRjaGVyICovCiAgKTsKICBsZXQgZmV0Y2hlckRhdGEgPSBSZWFjdDEwLnVzZUNvbnRleHQoRmV0Y2hlcnNDb250ZXh0KTsKICBsZXQgcm91dGUgPSBSZWFjdDEwLnVzZUNvbnRleHQoUm91dGVDb250ZXh0KTsKICBsZXQgcm91dGVJZCA9IChfYSA9IHJvdXRlLm1hdGNoZXNbcm91dGUubWF0Y2hlcy5sZW5ndGggLSAxXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnJvdXRlLmlkOwogIGludmFyaWFudChmZXRjaGVyRGF0YSwgYHVzZUZldGNoZXIgbXVzdCBiZSB1c2VkIGluc2lkZSBhIEZldGNoZXJzQ29udGV4dGApOwogIGludmFyaWFudChyb3V0ZSwgYHVzZUZldGNoZXIgbXVzdCBiZSB1c2VkIGluc2lkZSBhIFJvdXRlQ29udGV4dGApOwogIGludmFyaWFudCgKICAgIHJvdXRlSWQgIT0gbnVsbCwKICAgIGB1c2VGZXRjaGVyIGNhbiBvbmx5IGJlIHVzZWQgb24gcm91dGVzIHRoYXQgY29udGFpbiBhIHVuaXF1ZSAiaWQiYAogICk7CiAgbGV0IGRlZmF1bHRLZXkgPSBSZWFjdDEwLnVzZUlkKCk7CiAgbGV0IFtmZXRjaGVyS2V5LCBzZXRGZXRjaGVyS2V5XSA9IFJlYWN0MTAudXNlU3RhdGUoa2V5IHx8IGRlZmF1bHRLZXkpOwogIGlmIChrZXkgJiYga2V5ICE9PSBmZXRjaGVyS2V5KSB7CiAgICBzZXRGZXRjaGVyS2V5KGtleSk7CiAgfQogIFJlYWN0MTAudXNlRWZmZWN0KCgpID0+IHsKICAgIHJvdXRlcjIuZ2V0RmV0Y2hlcihmZXRjaGVyS2V5KTsKICAgIHJldHVybiAoKSA9PiByb3V0ZXIyLmRlbGV0ZUZldGNoZXIoZmV0Y2hlcktleSk7CiAgfSwgW3JvdXRlcjIsIGZldGNoZXJLZXldKTsKICBsZXQgbG9hZCA9IFJlYWN0MTAudXNlQ2FsbGJhY2soCiAgICBhc3luYyAoaHJlZjIsIG9wdHMpID0+IHsKICAgICAgaW52YXJpYW50KHJvdXRlSWQsICJObyByb3V0ZUlkIGF2YWlsYWJsZSBmb3IgZmV0Y2hlci5sb2FkKCkiKTsKICAgICAgYXdhaXQgcm91dGVyMi5mZXRjaChmZXRjaGVyS2V5LCByb3V0ZUlkLCBocmVmMiwgb3B0cyk7CiAgICB9LAogICAgW2ZldGNoZXJLZXksIHJvdXRlSWQsIHJvdXRlcjJdCiAgKTsKICBsZXQgc3VibWl0SW1wbCA9IHVzZVN1Ym1pdCgpOwogIGxldCBzdWJtaXQgPSBSZWFjdDEwLnVzZUNhbGxiYWNrKAogICAgYXN5bmMgKHRhcmdldCwgb3B0cykgPT4gewogICAgICBhd2FpdCBzdWJtaXRJbXBsKHRhcmdldCwgewogICAgICAgIC4uLm9wdHMsCiAgICAgICAgbmF2aWdhdGU6IGZhbHNlLAogICAgICAgIGZldGNoZXJLZXkKICAgICAgfSk7CiAgICB9LAogICAgW2ZldGNoZXJLZXksIHN1Ym1pdEltcGxdCiAgKTsKICBsZXQgRmV0Y2hlckZvcm0gPSBSZWFjdDEwLnVzZU1lbW8oKCkgPT4gewogICAgbGV0IEZldGNoZXJGb3JtMiA9IFJlYWN0MTAuZm9yd2FyZFJlZigKICAgICAgKHByb3BzLCByZWYpID0+IHsKICAgICAgICByZXR1cm4gUmVhY3QxMC5jcmVhdGVFbGVtZW50KEZvcm0sIHsgLi4ucHJvcHMsIG5hdmlnYXRlOiBmYWxzZSwgZmV0Y2hlcktleSwgcmVmIH0pOwogICAgICB9CiAgICApOwogICAgRmV0Y2hlckZvcm0yLmRpc3BsYXlOYW1lID0gImZldGNoZXIuRm9ybSI7CiAgICByZXR1cm4gRmV0Y2hlckZvcm0yOwogIH0sIFtmZXRjaGVyS2V5XSk7CiAgbGV0IGZldGNoZXIgPSBzdGF0ZS5mZXRjaGVycy5nZXQoZmV0Y2hlcktleSkgfHwgSURMRV9GRVRDSEVSOwogIGxldCBkYXRhMiA9IGZldGNoZXJEYXRhLmdldChmZXRjaGVyS2V5KTsKICBsZXQgZmV0Y2hlcldpdGhDb21wb25lbnRzID0gUmVhY3QxMC51c2VNZW1vKAogICAgKCkgPT4gKHsKICAgICAgRm9ybTogRmV0Y2hlckZvcm0sCiAgICAgIHN1Ym1pdCwKICAgICAgbG9hZCwKICAgICAgLi4uZmV0Y2hlciwKICAgICAgZGF0YTogZGF0YTIKICAgIH0pLAogICAgW0ZldGNoZXJGb3JtLCBzdWJtaXQsIGxvYWQsIGZldGNoZXIsIGRhdGEyXQogICk7CiAgcmV0dXJuIGZldGNoZXJXaXRoQ29tcG9uZW50czsKfQpmdW5jdGlvbiB1c2VGZXRjaGVycygpIHsKICBsZXQgc3RhdGUgPSB1c2VEYXRhUm91dGVyU3RhdGUyKAogICAgInVzZUZldGNoZXJzIgogICAgLyogVXNlRmV0Y2hlcnMgKi8KICApOwogIHJldHVybiBBcnJheS5mcm9tKHN0YXRlLmZldGNoZXJzLmVudHJpZXMoKSkubWFwKChba2V5LCBmZXRjaGVyXSkgPT4gKHsKICAgIC4uLmZldGNoZXIsCiAgICBrZXkKICB9KSk7Cn0KdmFyIFNDUk9MTF9SRVNUT1JBVElPTl9TVE9SQUdFX0tFWSA9ICJyZWFjdC1yb3V0ZXItc2Nyb2xsLXBvc2l0aW9ucyI7CnZhciBzYXZlZFNjcm9sbFBvc2l0aW9ucyA9IHt9OwpmdW5jdGlvbiBnZXRTY3JvbGxSZXN0b3JhdGlvbktleShsb2NhdGlvbjIsIG1hdGNoZXMsIGJhc2VuYW1lLCBnZXRLZXkpIHsKICBsZXQga2V5ID0gbnVsbDsKICBpZiAoZ2V0S2V5KSB7CiAgICBpZiAoYmFzZW5hbWUgIT09ICIvIikgewogICAgICBrZXkgPSBnZXRLZXkoCiAgICAgICAgewogICAgICAgICAgLi4ubG9jYXRpb24yLAogICAgICAgICAgcGF0aG5hbWU6IHN0cmlwQmFzZW5hbWUobG9jYXRpb24yLnBhdGhuYW1lLCBiYXNlbmFtZSkgfHwgbG9jYXRpb24yLnBhdGhuYW1lCiAgICAgICAgfSwKICAgICAgICBtYXRjaGVzCiAgICAgICk7CiAgICB9IGVsc2UgewogICAgICBrZXkgPSBnZXRLZXkobG9jYXRpb24yLCBtYXRjaGVzKTsKICAgIH0KICB9CiAgaWYgKGtleSA9PSBudWxsKSB7CiAgICBrZXkgPSBsb2NhdGlvbjIua2V5OwogIH0KICByZXR1cm4ga2V5Owp9CmZ1bmN0aW9uIHVzZVNjcm9sbFJlc3RvcmF0aW9uKHsKICBnZXRLZXksCiAgc3RvcmFnZUtleQp9ID0ge30pIHsKICBsZXQgeyByb3V0ZXI6IHJvdXRlcjIgfSA9IHVzZURhdGFSb3V0ZXJDb250ZXh0MygKICAgICJ1c2VTY3JvbGxSZXN0b3JhdGlvbiIKICAgIC8qIFVzZVNjcm9sbFJlc3RvcmF0aW9uICovCiAgKTsKICBsZXQgeyByZXN0b3JlU2Nyb2xsUG9zaXRpb24sIHByZXZlbnRTY3JvbGxSZXNldCB9ID0gdXNlRGF0YVJvdXRlclN0YXRlMigKICAgICJ1c2VTY3JvbGxSZXN0b3JhdGlvbiIKICAgIC8qIFVzZVNjcm9sbFJlc3RvcmF0aW9uICovCiAgKTsKICBsZXQgeyBiYXNlbmFtZSB9ID0gUmVhY3QxMC51c2VDb250ZXh0KE5hdmlnYXRpb25Db250ZXh0KTsKICBsZXQgbG9jYXRpb24yID0gdXNlTG9jYXRpb24oKTsKICBsZXQgbWF0Y2hlcyA9IHVzZU1hdGNoZXMoKTsKICBsZXQgbmF2aWdhdGlvbiA9IHVzZU5hdmlnYXRpb24oKTsKICBSZWFjdDEwLnVzZUVmZmVjdCgoKSA9PiB7CiAgICB3aW5kb3cuaGlzdG9yeS5zY3JvbGxSZXN0b3JhdGlvbiA9ICJtYW51YWwiOwogICAgcmV0dXJuICgpID0+IHsKICAgICAgd2luZG93Lmhpc3Rvcnkuc2Nyb2xsUmVzdG9yYXRpb24gPSAiYXV0byI7CiAgICB9OwogIH0sIFtdKTsKICB1c2VQYWdlSGlkZSgKICAgIFJlYWN0MTAudXNlQ2FsbGJhY2soKCkgPT4gewogICAgICBpZiAobmF2aWdhdGlvbi5zdGF0ZSA9PT0gImlkbGUiKSB7CiAgICAgICAgbGV0IGtleSA9IGdldFNjcm9sbFJlc3RvcmF0aW9uS2V5KGxvY2F0aW9uMiwgbWF0Y2hlcywgYmFzZW5hbWUsIGdldEtleSk7CiAgICAgICAgc2F2ZWRTY3JvbGxQb3NpdGlvbnNba2V5XSA9IHdpbmRvdy5zY3JvbGxZOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgKICAgICAgICAgIHN0b3JhZ2VLZXkgfHwgU0NST0xMX1JFU1RPUkFUSU9OX1NUT1JBR0VfS0VZLAogICAgICAgICAgSlNPTi5zdHJpbmdpZnkoc2F2ZWRTY3JvbGxQb3NpdGlvbnMpCiAgICAgICAgKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB3YXJuaW5nKAogICAgICAgICAgZmFsc2UsCiAgICAgICAgICBgRmFpbGVkIHRvIHNhdmUgc2Nyb2xsIHBvc2l0aW9ucyBpbiBzZXNzaW9uU3RvcmFnZSwgPFNjcm9sbFJlc3RvcmF0aW9uIC8+IHdpbGwgbm90IHdvcmsgcHJvcGVybHkgKCR7ZXJyb3J9KS5gCiAgICAgICAgKTsKICAgICAgfQogICAgICB3aW5kb3cuaGlzdG9yeS5zY3JvbGxSZXN0b3JhdGlvbiA9ICJhdXRvIjsKICAgIH0sIFtuYXZpZ2F0aW9uLnN0YXRlLCBnZXRLZXksIGJhc2VuYW1lLCBsb2NhdGlvbjIsIG1hdGNoZXMsIHN0b3JhZ2VLZXldKQogICk7CiAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gInVuZGVmaW5lZCIpIHsKICAgIFJlYWN0MTAudXNlTGF5b3V0RWZmZWN0KCgpID0+IHsKICAgICAgdHJ5IHsKICAgICAgICBsZXQgc2Vzc2lvblBvc2l0aW9ucyA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oCiAgICAgICAgICBzdG9yYWdlS2V5IHx8IFNDUk9MTF9SRVNUT1JBVElPTl9TVE9SQUdFX0tFWQogICAgICAgICk7CiAgICAgICAgaWYgKHNlc3Npb25Qb3NpdGlvbnMpIHsKICAgICAgICAgIHNhdmVkU2Nyb2xsUG9zaXRpb25zID0gSlNPTi5wYXJzZShzZXNzaW9uUG9zaXRpb25zKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgfQogICAgfSwgW3N0b3JhZ2VLZXldKTsKICAgIFJlYWN0MTAudXNlTGF5b3V0RWZmZWN0KCgpID0+IHsKICAgICAgbGV0IGRpc2FibGVTY3JvbGxSZXN0b3JhdGlvbiA9IHJvdXRlcjIgPT0gbnVsbCA/IHZvaWQgMCA6IHJvdXRlcjIuZW5hYmxlU2Nyb2xsUmVzdG9yYXRpb24oCiAgICAgICAgc2F2ZWRTY3JvbGxQb3NpdGlvbnMsCiAgICAgICAgKCkgPT4gd2luZG93LnNjcm9sbFksCiAgICAgICAgZ2V0S2V5ID8gKGxvY2F0aW9uMjIsIG1hdGNoZXMyKSA9PiBnZXRTY3JvbGxSZXN0b3JhdGlvbktleShsb2NhdGlvbjIyLCBtYXRjaGVzMiwgYmFzZW5hbWUsIGdldEtleSkgOiB2b2lkIDAKICAgICAgKTsKICAgICAgcmV0dXJuICgpID0+IGRpc2FibGVTY3JvbGxSZXN0b3JhdGlvbiAmJiBkaXNhYmxlU2Nyb2xsUmVzdG9yYXRpb24oKTsKICAgIH0sIFtyb3V0ZXIyLCBiYXNlbmFtZSwgZ2V0S2V5XSk7CiAgICBSZWFjdDEwLnVzZUxheW91dEVmZmVjdCgoKSA9PiB7CiAgICAgIGlmIChyZXN0b3JlU2Nyb2xsUG9zaXRpb24gPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0eXBlb2YgcmVzdG9yZVNjcm9sbFBvc2l0aW9uID09PSAibnVtYmVyIikgewogICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCByZXN0b3JlU2Nyb2xsUG9zaXRpb24pOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0cnkgewogICAgICAgIGlmIChsb2NhdGlvbjIuaGFzaCkgewogICAgICAgICAgbGV0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoCiAgICAgICAgICAgIGRlY29kZVVSSUNvbXBvbmVudChsb2NhdGlvbjIuaGFzaC5zbGljZSgxKSkKICAgICAgICAgICk7CiAgICAgICAgICBpZiAoZWwpIHsKICAgICAgICAgICAgZWwuc2Nyb2xsSW50b1ZpZXcoKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCB7CiAgICAgICAgd2FybmluZygKICAgICAgICAgIGZhbHNlLAogICAgICAgICAgYCIke2xvY2F0aW9uMi5oYXNoLnNsaWNlKAogICAgICAgICAgICAxCiAgICAgICAgICApfSIgaXMgbm90IGEgZGVjb2RhYmxlIGVsZW1lbnQgSUQuIFRoZSB2aWV3IHdpbGwgbm90IHNjcm9sbCB0byBpdC5gCiAgICAgICAgKTsKICAgICAgfQogICAgICBpZiAocHJldmVudFNjcm9sbFJlc2V0ID09PSB0cnVlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTsKICAgIH0sIFtsb2NhdGlvbjIsIHJlc3RvcmVTY3JvbGxQb3NpdGlvbiwgcHJldmVudFNjcm9sbFJlc2V0XSk7CiAgfQp9CmZ1bmN0aW9uIHVzZUJlZm9yZVVubG9hZChjYWxsYmFjaywgb3B0aW9ucykgewogIGxldCB7IGNhcHR1cmUgfSA9IG9wdGlvbnMgfHwge307CiAgUmVhY3QxMC51c2VFZmZlY3QoKCkgPT4gewogICAgbGV0IG9wdHMgPSBjYXB0dXJlICE9IG51bGwgPyB7IGNhcHR1cmUgfSA6IHZvaWQgMDsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJiZWZvcmV1bmxvYWQiLCBjYWxsYmFjaywgb3B0cyk7CiAgICByZXR1cm4gKCkgPT4gewogICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigiYmVmb3JldW5sb2FkIiwgY2FsbGJhY2ssIG9wdHMpOwogICAgfTsKICB9LCBbY2FsbGJhY2ssIGNhcHR1cmVdKTsKfQpmdW5jdGlvbiB1c2VQYWdlSGlkZShjYWxsYmFjaywgb3B0aW9ucykgewogIGxldCB7IGNhcHR1cmUgfSA9IG9wdGlvbnMgfHwge307CiAgUmVhY3QxMC51c2VFZmZlY3QoKCkgPT4gewogICAgbGV0IG9wdHMgPSBjYXB0dXJlICE9IG51bGwgPyB7IGNhcHR1cmUgfSA6IHZvaWQgMDsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJwYWdlaGlkZSIsIGNhbGxiYWNrLCBvcHRzKTsKICAgIHJldHVybiAoKSA9PiB7CiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJwYWdlaGlkZSIsIGNhbGxiYWNrLCBvcHRzKTsKICAgIH07CiAgfSwgW2NhbGxiYWNrLCBjYXB0dXJlXSk7Cn0KZnVuY3Rpb24gdXNlUHJvbXB0KHsKICB3aGVuLAogIG1lc3NhZ2UKfSkgewogIGxldCBibG9ja2VyID0gdXNlQmxvY2tlcih3aGVuKTsKICBSZWFjdDEwLnVzZUVmZmVjdCgoKSA9PiB7CiAgICBpZiAoYmxvY2tlci5zdGF0ZSA9PT0gImJsb2NrZWQiKSB7CiAgICAgIGxldCBwcm9jZWVkID0gd2luZG93LmNvbmZpcm0obWVzc2FnZSk7CiAgICAgIGlmIChwcm9jZWVkKSB7CiAgICAgICAgc2V0VGltZW91dChibG9ja2VyLnByb2NlZWQsIDApOwogICAgICB9IGVsc2UgewogICAgICAgIGJsb2NrZXIucmVzZXQoKTsKICAgICAgfQogICAgfQogIH0sIFtibG9ja2VyLCBtZXNzYWdlXSk7CiAgUmVhY3QxMC51c2VFZmZlY3QoKCkgPT4gewogICAgaWYgKGJsb2NrZXIuc3RhdGUgPT09ICJibG9ja2VkIiAmJiAhd2hlbikgewogICAgICBibG9ja2VyLnJlc2V0KCk7CiAgICB9CiAgfSwgW2Jsb2NrZXIsIHdoZW5dKTsKfQpmdW5jdGlvbiB1c2VWaWV3VHJhbnNpdGlvblN0YXRlKHRvLCB7IHJlbGF0aXZlIH0gPSB7fSkgewogIGxldCB2dENvbnRleHQgPSBSZWFjdDEwLnVzZUNvbnRleHQoVmlld1RyYW5zaXRpb25Db250ZXh0KTsKICBpbnZhcmlhbnQoCiAgICB2dENvbnRleHQgIT0gbnVsbCwKICAgICJgdXNlVmlld1RyYW5zaXRpb25TdGF0ZWAgbXVzdCBiZSB1c2VkIHdpdGhpbiBgcmVhY3Qtcm91dGVyLWRvbWAncyBgUm91dGVyUHJvdmlkZXJgLiAgRGlkIHlvdSBhY2NpZGVudGFsbHkgaW1wb3J0IGBSb3V0ZXJQcm92aWRlcmAgZnJvbSBgcmVhY3Qtcm91dGVyYD8iCiAgKTsKICBsZXQgeyBiYXNlbmFtZSB9ID0gdXNlRGF0YVJvdXRlckNvbnRleHQzKAogICAgInVzZVZpZXdUcmFuc2l0aW9uU3RhdGUiCiAgICAvKiB1c2VWaWV3VHJhbnNpdGlvblN0YXRlICovCiAgKTsKICBsZXQgcGF0aCA9IHVzZVJlc29sdmVkUGF0aCh0bywgeyByZWxhdGl2ZSB9KTsKICBpZiAoIXZ0Q29udGV4dC5pc1RyYW5zaXRpb25pbmcpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgbGV0IGN1cnJlbnRQYXRoID0gc3RyaXBCYXNlbmFtZSh2dENvbnRleHQuY3VycmVudExvY2F0aW9uLnBhdGhuYW1lLCBiYXNlbmFtZSkgfHwgdnRDb250ZXh0LmN1cnJlbnRMb2NhdGlvbi5wYXRobmFtZTsKICBsZXQgbmV4dFBhdGggPSBzdHJpcEJhc2VuYW1lKHZ0Q29udGV4dC5uZXh0TG9jYXRpb24ucGF0aG5hbWUsIGJhc2VuYW1lKSB8fCB2dENvbnRleHQubmV4dExvY2F0aW9uLnBhdGhuYW1lOwogIHJldHVybiBtYXRjaFBhdGgocGF0aC5wYXRobmFtZSwgbmV4dFBhdGgpICE9IG51bGwgfHwgbWF0Y2hQYXRoKHBhdGgucGF0aG5hbWUsIGN1cnJlbnRQYXRoKSAhPSBudWxsOwp9CmZ1bmN0aW9uIFN0YXRpY1JvdXRlcih7CiAgYmFzZW5hbWUsCiAgY2hpbGRyZW4sCiAgbG9jYXRpb246IGxvY2F0aW9uUHJvcCA9ICIvIgp9KSB7CiAgaWYgKHR5cGVvZiBsb2NhdGlvblByb3AgPT09ICJzdHJpbmciKSB7CiAgICBsb2NhdGlvblByb3AgPSBwYXJzZVBhdGgobG9jYXRpb25Qcm9wKTsKICB9CiAgbGV0IGFjdGlvbiA9ICJQT1AiOwogIGxldCBsb2NhdGlvbjIgPSB7CiAgICBwYXRobmFtZTogbG9jYXRpb25Qcm9wLnBhdGhuYW1lIHx8ICIvIiwKICAgIHNlYXJjaDogbG9jYXRpb25Qcm9wLnNlYXJjaCB8fCAiIiwKICAgIGhhc2g6IGxvY2F0aW9uUHJvcC5oYXNoIHx8ICIiLAogICAgc3RhdGU6IGxvY2F0aW9uUHJvcC5zdGF0ZSAhPSBudWxsID8gbG9jYXRpb25Qcm9wLnN0YXRlIDogbnVsbCwKICAgIGtleTogbG9jYXRpb25Qcm9wLmtleSB8fCAiZGVmYXVsdCIKICB9OwogIGxldCBzdGF0aWNOYXZpZ2F0b3IgPSBnZXRTdGF0ZWxlc3NOYXZpZ2F0b3IoKTsKICByZXR1cm4gUmVhY3QxMS5jcmVhdGVFbGVtZW50KAogICAgUm91dGVyLAogICAgewogICAgICBiYXNlbmFtZSwKICAgICAgY2hpbGRyZW4sCiAgICAgIGxvY2F0aW9uOiBsb2NhdGlvbjIsCiAgICAgIG5hdmlnYXRpb25UeXBlOiBhY3Rpb24sCiAgICAgIG5hdmlnYXRvcjogc3RhdGljTmF2aWdhdG9yLAogICAgICBzdGF0aWM6IHRydWUKICAgIH0KICApOwp9CmZ1bmN0aW9uIFN0YXRpY1JvdXRlclByb3ZpZGVyKHsKICBjb250ZXh0LAogIHJvdXRlcjogcm91dGVyMiwKICBoeWRyYXRlOiBoeWRyYXRlMiA9IHRydWUsCiAgbm9uY2UKfSkgewogIGludmFyaWFudCgKICAgIHJvdXRlcjIgJiYgY29udGV4dCwKICAgICJZb3UgbXVzdCBwcm92aWRlIGByb3V0ZXJgIGFuZCBgY29udGV4dGAgdG8gPFN0YXRpY1JvdXRlclByb3ZpZGVyPiIKICApOwogIGxldCBkYXRhUm91dGVyQ29udGV4dCA9IHsKICAgIHJvdXRlcjogcm91dGVyMiwKICAgIG5hdmlnYXRvcjogZ2V0U3RhdGVsZXNzTmF2aWdhdG9yKCksCiAgICBzdGF0aWM6IHRydWUsCiAgICBzdGF0aWNDb250ZXh0OiBjb250ZXh0LAogICAgYmFzZW5hbWU6IGNvbnRleHQuYmFzZW5hbWUgfHwgIi8iCiAgfTsKICBsZXQgZmV0Y2hlcnNDb250ZXh0ID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBsZXQgaHlkcmF0ZVNjcmlwdCA9ICIiOwogIGlmIChoeWRyYXRlMiAhPT0gZmFsc2UpIHsKICAgIGxldCBkYXRhMiA9IHsKICAgICAgbG9hZGVyRGF0YTogY29udGV4dC5sb2FkZXJEYXRhLAogICAgICBhY3Rpb25EYXRhOiBjb250ZXh0LmFjdGlvbkRhdGEsCiAgICAgIGVycm9yczogc2VyaWFsaXplRXJyb3JzKGNvbnRleHQuZXJyb3JzKQogICAgfTsKICAgIGxldCBqc29uID0gaHRtbEVzY2FwZShKU09OLnN0cmluZ2lmeShKU09OLnN0cmluZ2lmeShkYXRhMikpKTsKICAgIGh5ZHJhdGVTY3JpcHQgPSBgd2luZG93Ll9fc3RhdGljUm91dGVySHlkcmF0aW9uRGF0YSA9IEpTT04ucGFyc2UoJHtqc29ufSk7YDsKICB9CiAgbGV0IHsgc3RhdGUgfSA9IGRhdGFSb3V0ZXJDb250ZXh0LnJvdXRlcjsKICByZXR1cm4gUmVhY3QxMS5jcmVhdGVFbGVtZW50KFJlYWN0MTEuRnJhZ21lbnQsIG51bGwsIFJlYWN0MTEuY3JlYXRlRWxlbWVudChEYXRhUm91dGVyQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogZGF0YVJvdXRlckNvbnRleHQgfSwgUmVhY3QxMS5jcmVhdGVFbGVtZW50KERhdGFSb3V0ZXJTdGF0ZUNvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IHN0YXRlIH0sIFJlYWN0MTEuY3JlYXRlRWxlbWVudChGZXRjaGVyc0NvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IGZldGNoZXJzQ29udGV4dCB9LCBSZWFjdDExLmNyZWF0ZUVsZW1lbnQoVmlld1RyYW5zaXRpb25Db250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiB7IGlzVHJhbnNpdGlvbmluZzogZmFsc2UgfSB9LCBSZWFjdDExLmNyZWF0ZUVsZW1lbnQoCiAgICBSb3V0ZXIsCiAgICB7CiAgICAgIGJhc2VuYW1lOiBkYXRhUm91dGVyQ29udGV4dC5iYXNlbmFtZSwKICAgICAgbG9jYXRpb246IHN0YXRlLmxvY2F0aW9uLAogICAgICBuYXZpZ2F0aW9uVHlwZTogc3RhdGUuaGlzdG9yeUFjdGlvbiwKICAgICAgbmF2aWdhdG9yOiBkYXRhUm91dGVyQ29udGV4dC5uYXZpZ2F0b3IsCiAgICAgIHN0YXRpYzogZGF0YVJvdXRlckNvbnRleHQuc3RhdGljCiAgICB9LAogICAgUmVhY3QxMS5jcmVhdGVFbGVtZW50KAogICAgICBEYXRhUm91dGVzMiwKICAgICAgewogICAgICAgIHJvdXRlczogcm91dGVyMi5yb3V0ZXMsCiAgICAgICAgZnV0dXJlOiByb3V0ZXIyLmZ1dHVyZSwKICAgICAgICBzdGF0ZQogICAgICB9CiAgICApCiAgKSkpKSksIGh5ZHJhdGVTY3JpcHQgPyBSZWFjdDExLmNyZWF0ZUVsZW1lbnQoCiAgICAic2NyaXB0IiwKICAgIHsKICAgICAgc3VwcHJlc3NIeWRyYXRpb25XYXJuaW5nOiB0cnVlLAogICAgICBub25jZSwKICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHsgX19odG1sOiBoeWRyYXRlU2NyaXB0IH0KICAgIH0KICApIDogbnVsbCk7Cn0KZnVuY3Rpb24gRGF0YVJvdXRlczIoewogIHJvdXRlcywKICBmdXR1cmUsCiAgc3RhdGUKfSkgewogIHJldHVybiB1c2VSb3V0ZXNJbXBsKHJvdXRlcywgdm9pZCAwLCBzdGF0ZSwgdm9pZCAwLCBmdXR1cmUpOwp9CmZ1bmN0aW9uIHNlcmlhbGl6ZUVycm9ycyhlcnJvcnMpIHsKICBpZiAoIWVycm9ycykgcmV0dXJuIG51bGw7CiAgbGV0IGVudHJpZXMgPSBPYmplY3QuZW50cmllcyhlcnJvcnMpOwogIGxldCBzZXJpYWxpemVkID0ge307CiAgZm9yIChsZXQgW2tleSwgdmFsXSBvZiBlbnRyaWVzKSB7CiAgICBpZiAoaXNSb3V0ZUVycm9yUmVzcG9uc2UodmFsKSkgewogICAgICBzZXJpYWxpemVkW2tleV0gPSB7IC4uLnZhbCwgX190eXBlOiAiUm91dGVFcnJvclJlc3BvbnNlIiB9OwogICAgfSBlbHNlIGlmICh2YWwgaW5zdGFuY2VvZiBFcnJvcikgewogICAgICBzZXJpYWxpemVkW2tleV0gPSB7CiAgICAgICAgbWVzc2FnZTogdmFsLm1lc3NhZ2UsCiAgICAgICAgX190eXBlOiAiRXJyb3IiLAogICAgICAgIC8vIElmIHRoaXMgaXMgYSBzdWJjbGFzcyAoaS5lLiwgUmVmZXJlbmNlRXJyb3IpLCBzZW5kIHVwIHRoZSB0eXBlIHNvIHdlCiAgICAgICAgLy8gY2FuIHJlLWNyZWF0ZSB0aGUgc2FtZSB0eXBlIGR1cmluZyBoeWRyYXRpb24uCiAgICAgICAgLi4udmFsLm5hbWUgIT09ICJFcnJvciIgPyB7CiAgICAgICAgICBfX3N1YlR5cGU6IHZhbC5uYW1lCiAgICAgICAgfSA6IHt9CiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICBzZXJpYWxpemVkW2tleV0gPSB2YWw7CiAgICB9CiAgfQogIHJldHVybiBzZXJpYWxpemVkOwp9CmZ1bmN0aW9uIGdldFN0YXRlbGVzc05hdmlnYXRvcigpIHsKICByZXR1cm4gewogICAgY3JlYXRlSHJlZiwKICAgIGVuY29kZUxvY2F0aW9uLAogICAgcHVzaCh0bykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICAgYFlvdSBjYW5ub3QgdXNlIG5hdmlnYXRvci5wdXNoKCkgb24gdGhlIHNlcnZlciBiZWNhdXNlIGl0IGlzIGEgc3RhdGVsZXNzIGVudmlyb25tZW50LiBUaGlzIGVycm9yIHdhcyBwcm9iYWJseSB0cmlnZ2VyZWQgd2hlbiB5b3UgZGlkIGEgXGBuYXZpZ2F0ZSgke0pTT04uc3RyaW5naWZ5KHRvKX0pXGAgc29tZXdoZXJlIGluIHlvdXIgYXBwLmAKICAgICAgKTsKICAgIH0sCiAgICByZXBsYWNlKHRvKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigKICAgICAgICBgWW91IGNhbm5vdCB1c2UgbmF2aWdhdG9yLnJlcGxhY2UoKSBvbiB0aGUgc2VydmVyIGJlY2F1c2UgaXQgaXMgYSBzdGF0ZWxlc3MgZW52aXJvbm1lbnQuIFRoaXMgZXJyb3Igd2FzIHByb2JhYmx5IHRyaWdnZXJlZCB3aGVuIHlvdSBkaWQgYSBcYG5hdmlnYXRlKCR7SlNPTi5zdHJpbmdpZnkodG8pfSwgeyByZXBsYWNlOiB0cnVlIH0pXGAgc29tZXdoZXJlIGluIHlvdXIgYXBwLmAKICAgICAgKTsKICAgIH0sCiAgICBnbyhkZWx0YSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICAgYFlvdSBjYW5ub3QgdXNlIG5hdmlnYXRvci5nbygpIG9uIHRoZSBzZXJ2ZXIgYmVjYXVzZSBpdCBpcyBhIHN0YXRlbGVzcyBlbnZpcm9ubWVudC4gVGhpcyBlcnJvciB3YXMgcHJvYmFibHkgdHJpZ2dlcmVkIHdoZW4geW91IGRpZCBhIFxgbmF2aWdhdGUoJHtkZWx0YX0pXGAgc29tZXdoZXJlIGluIHlvdXIgYXBwLmAKICAgICAgKTsKICAgIH0sCiAgICBiYWNrKCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICAgYFlvdSBjYW5ub3QgdXNlIG5hdmlnYXRvci5iYWNrKCkgb24gdGhlIHNlcnZlciBiZWNhdXNlIGl0IGlzIGEgc3RhdGVsZXNzIGVudmlyb25tZW50LmAKICAgICAgKTsKICAgIH0sCiAgICBmb3J3YXJkKCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICAgYFlvdSBjYW5ub3QgdXNlIG5hdmlnYXRvci5mb3J3YXJkKCkgb24gdGhlIHNlcnZlciBiZWNhdXNlIGl0IGlzIGEgc3RhdGVsZXNzIGVudmlyb25tZW50LmAKICAgICAgKTsKICAgIH0KICB9Owp9CmZ1bmN0aW9uIGNyZWF0ZVN0YXRpY0hhbmRsZXIyKHJvdXRlcywgb3B0cykgewogIHJldHVybiBjcmVhdGVTdGF0aWNIYW5kbGVyKHJvdXRlcywgewogICAgLi4ub3B0cywKICAgIG1hcFJvdXRlUHJvcGVydGllcwogIH0pOwp9CmZ1bmN0aW9uIGNyZWF0ZVN0YXRpY1JvdXRlcihyb3V0ZXMsIGNvbnRleHQsIG9wdHMgPSB7fSkgewogIGxldCBtYW5pZmVzdCA9IHt9OwogIGxldCBkYXRhUm91dGVzID0gY29udmVydFJvdXRlc1RvRGF0YVJvdXRlcygKICAgIHJvdXRlcywKICAgIG1hcFJvdXRlUHJvcGVydGllcywKICAgIHZvaWQgMCwKICAgIG1hbmlmZXN0CiAgKTsKICBsZXQgbWF0Y2hlcyA9IGNvbnRleHQubWF0Y2hlcy5tYXAoKG1hdGNoKSA9PiB7CiAgICBsZXQgcm91dGUgPSBtYW5pZmVzdFttYXRjaC5yb3V0ZS5pZF0gfHwgbWF0Y2gucm91dGU7CiAgICByZXR1cm4gewogICAgICAuLi5tYXRjaCwKICAgICAgcm91dGUKICAgIH07CiAgfSk7CiAgbGV0IG1zZyA9IChtZXRob2QpID0+IGBZb3UgY2Fubm90IHVzZSByb3V0ZXIuJHttZXRob2R9KCkgb24gdGhlIHNlcnZlciBiZWNhdXNlIGl0IGlzIGEgc3RhdGVsZXNzIGVudmlyb25tZW50YDsKICByZXR1cm4gewogICAgZ2V0IGJhc2VuYW1lKCkgewogICAgICByZXR1cm4gY29udGV4dC5iYXNlbmFtZTsKICAgIH0sCiAgICBnZXQgZnV0dXJlKCkgewogICAgICByZXR1cm4gewogICAgICAgIHY4X21pZGRsZXdhcmU6IGZhbHNlLAogICAgICAgIC4uLm9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMuZnV0dXJlCiAgICAgIH07CiAgICB9LAogICAgZ2V0IHN0YXRlKCkgewogICAgICByZXR1cm4gewogICAgICAgIGhpc3RvcnlBY3Rpb246ICJQT1AiLAogICAgICAgIGxvY2F0aW9uOiBjb250ZXh0LmxvY2F0aW9uLAogICAgICAgIG1hdGNoZXMsCiAgICAgICAgbG9hZGVyRGF0YTogY29udGV4dC5sb2FkZXJEYXRhLAogICAgICAgIGFjdGlvbkRhdGE6IGNvbnRleHQuYWN0aW9uRGF0YSwKICAgICAgICBlcnJvcnM6IGNvbnRleHQuZXJyb3JzLAogICAgICAgIGluaXRpYWxpemVkOiB0cnVlLAogICAgICAgIG5hdmlnYXRpb246IElETEVfTkFWSUdBVElPTiwKICAgICAgICByZXN0b3JlU2Nyb2xsUG9zaXRpb246IG51bGwsCiAgICAgICAgcHJldmVudFNjcm9sbFJlc2V0OiBmYWxzZSwKICAgICAgICByZXZhbGlkYXRpb246ICJpZGxlIiwKICAgICAgICBmZXRjaGVyczogLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSwKICAgICAgICBibG9ja2VyczogLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKQogICAgICB9OwogICAgfSwKICAgIGdldCByb3V0ZXMoKSB7CiAgICAgIHJldHVybiBkYXRhUm91dGVzOwogICAgfSwKICAgIGdldCB3aW5kb3coKSB7CiAgICAgIHJldHVybiB2b2lkIDA7CiAgICB9LAogICAgaW5pdGlhbGl6ZSgpIHsKICAgICAgdGhyb3cgbXNnKCJpbml0aWFsaXplIik7CiAgICB9LAogICAgc3Vic2NyaWJlKCkgewogICAgICB0aHJvdyBtc2coInN1YnNjcmliZSIpOwogICAgfSwKICAgIGVuYWJsZVNjcm9sbFJlc3RvcmF0aW9uKCkgewogICAgICB0aHJvdyBtc2coImVuYWJsZVNjcm9sbFJlc3RvcmF0aW9uIik7CiAgICB9LAogICAgbmF2aWdhdGUoKSB7CiAgICAgIHRocm93IG1zZygibmF2aWdhdGUiKTsKICAgIH0sCiAgICBmZXRjaCgpIHsKICAgICAgdGhyb3cgbXNnKCJmZXRjaCIpOwogICAgfSwKICAgIHJldmFsaWRhdGUoKSB7CiAgICAgIHRocm93IG1zZygicmV2YWxpZGF0ZSIpOwogICAgfSwKICAgIGNyZWF0ZUhyZWYsCiAgICBlbmNvZGVMb2NhdGlvbiwKICAgIGdldEZldGNoZXIoKSB7CiAgICAgIHJldHVybiBJRExFX0ZFVENIRVI7CiAgICB9LAogICAgZGVsZXRlRmV0Y2hlcigpIHsKICAgICAgdGhyb3cgbXNnKCJkZWxldGVGZXRjaGVyIik7CiAgICB9LAogICAgZGlzcG9zZSgpIHsKICAgICAgdGhyb3cgbXNnKCJkaXNwb3NlIik7CiAgICB9LAogICAgZ2V0QmxvY2tlcigpIHsKICAgICAgcmV0dXJuIElETEVfQkxPQ0tFUjsKICAgIH0sCiAgICBkZWxldGVCbG9ja2VyKCkgewogICAgICB0aHJvdyBtc2coImRlbGV0ZUJsb2NrZXIiKTsKICAgIH0sCiAgICBwYXRjaFJvdXRlcygpIHsKICAgICAgdGhyb3cgbXNnKCJwYXRjaFJvdXRlcyIpOwogICAgfSwKICAgIF9pbnRlcm5hbEZldGNoQ29udHJvbGxlcnM6IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCksCiAgICBfaW50ZXJuYWxTZXRSb3V0ZXMoKSB7CiAgICAgIHRocm93IG1zZygiX2ludGVybmFsU2V0Um91dGVzIik7CiAgICB9LAogICAgX2ludGVybmFsU2V0U3RhdGVEb05vdFVzZU9yWW91V2lsbEJyZWFrWW91ckFwcCgpIHsKICAgICAgdGhyb3cgbXNnKCJfaW50ZXJuYWxTZXRTdGF0ZURvTm90VXNlT3JZb3VXaWxsQnJlYWtZb3VyQXBwIik7CiAgICB9CiAgfTsKfQpmdW5jdGlvbiBjcmVhdGVIcmVmKHRvKSB7CiAgcmV0dXJuIHR5cGVvZiB0byA9PT0gInN0cmluZyIgPyB0byA6IGNyZWF0ZVBhdGgodG8pOwp9CmZ1bmN0aW9uIGVuY29kZUxvY2F0aW9uKHRvKSB7CiAgbGV0IGhyZWYyID0gdHlwZW9mIHRvID09PSAic3RyaW5nIiA/IHRvIDogY3JlYXRlUGF0aCh0byk7CiAgaHJlZjIgPSBocmVmMi5yZXBsYWNlKC8gJC8sICIlMjAiKTsKICBsZXQgZW5jb2RlZCA9IEFCU09MVVRFX1VSTF9SRUdFWDMudGVzdChocmVmMikgPyBuZXcgVVJMKGhyZWYyKSA6IG5ldyBVUkwoaHJlZjIsICJodHRwOi8vbG9jYWxob3N0Iik7CiAgcmV0dXJuIHsKICAgIHBhdGhuYW1lOiBlbmNvZGVkLnBhdGhuYW1lLAogICAgc2VhcmNoOiBlbmNvZGVkLnNlYXJjaCwKICAgIGhhc2g6IGVuY29kZWQuaGFzaAogIH07Cn0KdmFyIEFCU09MVVRFX1VSTF9SRUdFWDMgPSAvXig/OlthLXpdW2EtejAtOSsuLV0qOnxcL1wvKS9pOwp2YXIgRVNDQVBFX0xPT0tVUDIgPSB7CiAgIiYiOiAiXFx1MDAyNiIsCiAgIj4iOiAiXFx1MDAzZSIsCiAgIjwiOiAiXFx1MDAzYyIsCiAgIlx1MjAyOCI6ICJcXHUyMDI4IiwKICAiXHUyMDI5IjogIlxcdTIwMjkiCn07CnZhciBFU0NBUEVfUkVHRVgyID0gL1smPjxcdTIwMjhcdTIwMjldL2c7CmZ1bmN0aW9uIGh0bWxFc2NhcGUoc3RyKSB7CiAgcmV0dXJuIHN0ci5yZXBsYWNlKEVTQ0FQRV9SRUdFWDIsIChtYXRjaCkgPT4gRVNDQVBFX0xPT0tVUDJbbWF0Y2hdKTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXJvdXRlci9kaXN0L2RldmVsb3BtZW50L2NodW5rLVNLTktCNVZJLm1qcwp2YXIgUmVhY3QxMiA9IF9fdG9FU00ocmVxdWlyZV9yZWFjdCgpLCAxKTsKdmFyIFJlYWN0MjIgPSBfX3RvRVNNKHJlcXVpcmVfcmVhY3QoKSwgMSk7CnZhciBpbXBvcnRfY29va2llID0gX190b0VTTShyZXF1aXJlX2Rpc3QoKSwgMSk7CnZhciBpbXBvcnRfc2V0X2Nvb2tpZV9wYXJzZXIgPSBfX3RvRVNNKHJlcXVpcmVfc2V0X2Nvb2tpZSgpLCAxKTsKdmFyIFJlYWN0NDIgPSBfX3RvRVNNKHJlcXVpcmVfcmVhY3QoKSwgMSk7CnZhciBSZWFjdERPTSA9IF9fdG9FU00ocmVxdWlyZV9yZWFjdF9kb20oKSwgMSk7CnZhciBpbXBvcnRfcmVhY3QgPSBfX3RvRVNNKHJlcXVpcmVfcmVhY3QoKSwgMSk7CnZhciBSZWFjdDUyID0gX190b0VTTShyZXF1aXJlX3JlYWN0KCksIDEpOwpmdW5jdGlvbiBTZXJ2ZXJSb3V0ZXIoewogIGNvbnRleHQsCiAgdXJsLAogIG5vbmNlCn0pIHsKICBpZiAodHlwZW9mIHVybCA9PT0gInN0cmluZyIpIHsKICAgIHVybCA9IG5ldyBVUkwodXJsKTsKICB9CiAgbGV0IHsgbWFuaWZlc3QsIHJvdXRlTW9kdWxlcywgY3JpdGljYWxDc3MsIHNlcnZlckhhbmRvZmZTdHJpbmcgfSA9IGNvbnRleHQ7CiAgbGV0IHJvdXRlcyA9IGNyZWF0ZVNlcnZlclJvdXRlcygKICAgIG1hbmlmZXN0LnJvdXRlcywKICAgIHJvdXRlTW9kdWxlcywKICAgIGNvbnRleHQuZnV0dXJlLAogICAgY29udGV4dC5pc1NwYU1vZGUKICApOwogIGNvbnRleHQuc3RhdGljSGFuZGxlckNvbnRleHQubG9hZGVyRGF0YSA9IHsKICAgIC4uLmNvbnRleHQuc3RhdGljSGFuZGxlckNvbnRleHQubG9hZGVyRGF0YQogIH07CiAgZm9yIChsZXQgbWF0Y2ggb2YgY29udGV4dC5zdGF0aWNIYW5kbGVyQ29udGV4dC5tYXRjaGVzKSB7CiAgICBsZXQgcm91dGVJZCA9IG1hdGNoLnJvdXRlLmlkOwogICAgbGV0IHJvdXRlID0gcm91dGVNb2R1bGVzW3JvdXRlSWRdOwogICAgbGV0IG1hbmlmZXN0Um91dGUgPSBjb250ZXh0Lm1hbmlmZXN0LnJvdXRlc1tyb3V0ZUlkXTsKICAgIGlmIChyb3V0ZSAmJiBtYW5pZmVzdFJvdXRlICYmIHNob3VsZEh5ZHJhdGVSb3V0ZUxvYWRlcigKICAgICAgcm91dGVJZCwKICAgICAgcm91dGUuY2xpZW50TG9hZGVyLAogICAgICBtYW5pZmVzdFJvdXRlLmhhc0xvYWRlciwKICAgICAgY29udGV4dC5pc1NwYU1vZGUKICAgICkgJiYgKHJvdXRlLkh5ZHJhdGVGYWxsYmFjayB8fCAhbWFuaWZlc3RSb3V0ZS5oYXNMb2FkZXIpKSB7CiAgICAgIGRlbGV0ZSBjb250ZXh0LnN0YXRpY0hhbmRsZXJDb250ZXh0LmxvYWRlckRhdGFbcm91dGVJZF07CiAgICB9CiAgfQogIGxldCByb3V0ZXIyID0gY3JlYXRlU3RhdGljUm91dGVyKHJvdXRlcywgY29udGV4dC5zdGF0aWNIYW5kbGVyQ29udGV4dCk7CiAgcmV0dXJuIFJlYWN0MTIuY3JlYXRlRWxlbWVudChSZWFjdDEyLkZyYWdtZW50LCBudWxsLCBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoCiAgICBGcmFtZXdvcmtDb250ZXh0LlByb3ZpZGVyLAogICAgewogICAgICB2YWx1ZTogewogICAgICAgIG1hbmlmZXN0LAogICAgICAgIHJvdXRlTW9kdWxlcywKICAgICAgICBjcml0aWNhbENzcywKICAgICAgICBzZXJ2ZXJIYW5kb2ZmU3RyaW5nLAogICAgICAgIGZ1dHVyZTogY29udGV4dC5mdXR1cmUsCiAgICAgICAgc3NyOiBjb250ZXh0LnNzciwKICAgICAgICBpc1NwYU1vZGU6IGNvbnRleHQuaXNTcGFNb2RlLAogICAgICAgIHJvdXRlRGlzY292ZXJ5OiBjb250ZXh0LnJvdXRlRGlzY292ZXJ5LAogICAgICAgIHNlcmlhbGl6ZUVycm9yOiBjb250ZXh0LnNlcmlhbGl6ZUVycm9yLAogICAgICAgIHJlbmRlck1ldGE6IGNvbnRleHQucmVuZGVyTWV0YQogICAgICB9CiAgICB9LAogICAgUmVhY3QxMi5jcmVhdGVFbGVtZW50KFJlbWl4RXJyb3JCb3VuZGFyeSwgeyBsb2NhdGlvbjogcm91dGVyMi5zdGF0ZS5sb2NhdGlvbiB9LCBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoCiAgICAgIFN0YXRpY1JvdXRlclByb3ZpZGVyLAogICAgICB7CiAgICAgICAgcm91dGVyOiByb3V0ZXIyLAogICAgICAgIGNvbnRleHQ6IGNvbnRleHQuc3RhdGljSGFuZGxlckNvbnRleHQsCiAgICAgICAgaHlkcmF0ZTogZmFsc2UKICAgICAgfQogICAgKSkKICApLCBjb250ZXh0LnNlcnZlckhhbmRvZmZTdHJlYW0gPyBSZWFjdDEyLmNyZWF0ZUVsZW1lbnQoUmVhY3QxMi5TdXNwZW5zZSwgbnVsbCwgUmVhY3QxMi5jcmVhdGVFbGVtZW50KAogICAgU3RyZWFtVHJhbnNmZXIsCiAgICB7CiAgICAgIGNvbnRleHQsCiAgICAgIGlkZW50aWZpZXI6IDAsCiAgICAgIHJlYWRlcjogY29udGV4dC5zZXJ2ZXJIYW5kb2ZmU3RyZWFtLmdldFJlYWRlcigpLAogICAgICB0ZXh0RGVjb2RlcjogbmV3IFRleHREZWNvZGVyKCksCiAgICAgIG5vbmNlCiAgICB9CiAgKSkgOiBudWxsKTsKfQpmdW5jdGlvbiBjcmVhdGVSb3V0ZXNTdHViKHJvdXRlcywgX2NvbnRleHQpIHsKICByZXR1cm4gZnVuY3Rpb24gUm91dGVzVGVzdFN0dWIoewogICAgaW5pdGlhbEVudHJpZXMsCiAgICBpbml0aWFsSW5kZXgsCiAgICBoeWRyYXRpb25EYXRhLAogICAgZnV0dXJlCiAgfSkgewogICAgbGV0IHJvdXRlclJlZiA9IFJlYWN0MjIudXNlUmVmKCk7CiAgICBsZXQgZnJhbWV3b3JrQ29udGV4dFJlZiA9IFJlYWN0MjIudXNlUmVmKCk7CiAgICBpZiAocm91dGVyUmVmLmN1cnJlbnQgPT0gbnVsbCkgewogICAgICBmcmFtZXdvcmtDb250ZXh0UmVmLmN1cnJlbnQgPSB7CiAgICAgICAgZnV0dXJlOiB7CiAgICAgICAgICB1bnN0YWJsZV9zdWJSZXNvdXJjZUludGVncml0eTogKGZ1dHVyZSA9PSBudWxsID8gdm9pZCAwIDogZnV0dXJlLnVuc3RhYmxlX3N1YlJlc291cmNlSW50ZWdyaXR5KSA9PT0gdHJ1ZSwKICAgICAgICAgIHY4X21pZGRsZXdhcmU6IChmdXR1cmUgPT0gbnVsbCA/IHZvaWQgMCA6IGZ1dHVyZS52OF9taWRkbGV3YXJlKSA9PT0gdHJ1ZQogICAgICAgIH0sCiAgICAgICAgbWFuaWZlc3Q6IHsKICAgICAgICAgIHJvdXRlczoge30sCiAgICAgICAgICBlbnRyeTogeyBpbXBvcnRzOiBbXSwgbW9kdWxlOiAiIiB9LAogICAgICAgICAgdXJsOiAiIiwKICAgICAgICAgIHZlcnNpb246ICIiCiAgICAgICAgfSwKICAgICAgICByb3V0ZU1vZHVsZXM6IHt9LAogICAgICAgIHNzcjogZmFsc2UsCiAgICAgICAgaXNTcGFNb2RlOiBmYWxzZSwKICAgICAgICByb3V0ZURpc2NvdmVyeTogeyBtb2RlOiAibGF6eSIsIG1hbmlmZXN0UGF0aDogIi9fX21hbmlmZXN0IiB9CiAgICAgIH07CiAgICAgIGxldCBwYXRjaGVkID0gcHJvY2Vzc1JvdXRlcygKICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGBTdHViUm91dGVPYmplY3RgIGlzIHN0cmljdGVyIGFib3V0IGBsb2FkZXJgL2BhY3Rpb25gCiAgICAgICAgLy8gdHlwZXMgY29tcGFyZWQgdG8gYEFnbm9zdGljUm91dGVPYmplY3RgCiAgICAgICAgY29udmVydFJvdXRlc1RvRGF0YVJvdXRlcyhyb3V0ZXMsIChyKSA9PiByKSwKICAgICAgICBfY29udGV4dCAhPT0gdm9pZCAwID8gX2NvbnRleHQgOiAoZnV0dXJlID09IG51bGwgPyB2b2lkIDAgOiBmdXR1cmUudjhfbWlkZGxld2FyZSkgPyBuZXcgUm91dGVyQ29udGV4dFByb3ZpZGVyKCkgOiB7fSwKICAgICAgICBmcmFtZXdvcmtDb250ZXh0UmVmLmN1cnJlbnQubWFuaWZlc3QsCiAgICAgICAgZnJhbWV3b3JrQ29udGV4dFJlZi5jdXJyZW50LnJvdXRlTW9kdWxlcwogICAgICApOwogICAgICByb3V0ZXJSZWYuY3VycmVudCA9IGNyZWF0ZU1lbW9yeVJvdXRlcihwYXRjaGVkLCB7CiAgICAgICAgaW5pdGlhbEVudHJpZXMsCiAgICAgICAgaW5pdGlhbEluZGV4LAogICAgICAgIGh5ZHJhdGlvbkRhdGEKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gUmVhY3QyMi5jcmVhdGVFbGVtZW50KEZyYW1ld29ya0NvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IGZyYW1ld29ya0NvbnRleHRSZWYuY3VycmVudCB9LCBSZWFjdDIyLmNyZWF0ZUVsZW1lbnQoUm91dGVyUHJvdmlkZXIsIHsgcm91dGVyOiByb3V0ZXJSZWYuY3VycmVudCB9KSk7CiAgfTsKfQpmdW5jdGlvbiBwcm9jZXNzUm91dGVzKHJvdXRlcywgY29udGV4dCwgbWFuaWZlc3QsIHJvdXRlTW9kdWxlcywgcGFyZW50SWQpIHsKICByZXR1cm4gcm91dGVzLm1hcCgocm91dGUpID0+IHsKICAgIGlmICghcm91dGUuaWQpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgICJFeHBlY3RlZCBhIHJvdXRlLmlkIGluIHJlYWN0LXJvdXRlciBwcm9jZXNzUm91dGVzKCkgZnVuY3Rpb24iCiAgICAgICk7CiAgICB9CiAgICBsZXQgbmV3Um91dGUgPSB7CiAgICAgIGlkOiByb3V0ZS5pZCwKICAgICAgcGF0aDogcm91dGUucGF0aCwKICAgICAgaW5kZXg6IHJvdXRlLmluZGV4LAogICAgICBDb21wb25lbnQ6IHJvdXRlLkNvbXBvbmVudCA/IHdpdGhDb21wb25lbnRQcm9wcyhyb3V0ZS5Db21wb25lbnQpIDogdm9pZCAwLAogICAgICBIeWRyYXRlRmFsbGJhY2s6IHJvdXRlLkh5ZHJhdGVGYWxsYmFjayA/IHdpdGhIeWRyYXRlRmFsbGJhY2tQcm9wcyhyb3V0ZS5IeWRyYXRlRmFsbGJhY2spIDogdm9pZCAwLAogICAgICBFcnJvckJvdW5kYXJ5OiByb3V0ZS5FcnJvckJvdW5kYXJ5ID8gd2l0aEVycm9yQm91bmRhcnlQcm9wcyhyb3V0ZS5FcnJvckJvdW5kYXJ5KSA6IHZvaWQgMCwKICAgICAgYWN0aW9uOiByb3V0ZS5hY3Rpb24gPyAoYXJncykgPT4gcm91dGUuYWN0aW9uKHsgLi4uYXJncywgY29udGV4dCB9KSA6IHZvaWQgMCwKICAgICAgbG9hZGVyOiByb3V0ZS5sb2FkZXIgPyAoYXJncykgPT4gcm91dGUubG9hZGVyKHsgLi4uYXJncywgY29udGV4dCB9KSA6IHZvaWQgMCwKICAgICAgaGFuZGxlOiByb3V0ZS5oYW5kbGUsCiAgICAgIHNob3VsZFJldmFsaWRhdGU6IHJvdXRlLnNob3VsZFJldmFsaWRhdGUKICAgIH07CiAgICBsZXQgZW50cnlSb3V0ZSA9IHsKICAgICAgaWQ6IHJvdXRlLmlkLAogICAgICBwYXRoOiByb3V0ZS5wYXRoLAogICAgICBpbmRleDogcm91dGUuaW5kZXgsCiAgICAgIHBhcmVudElkLAogICAgICBoYXNBY3Rpb246IHJvdXRlLmFjdGlvbiAhPSBudWxsLAogICAgICBoYXNMb2FkZXI6IHJvdXRlLmxvYWRlciAhPSBudWxsLAogICAgICAvLyBXaGVuIHRlc3Rpbmcgcm91dGVzLCB5b3Ugc2hvdWxkIGJlIHN0dWJiaW5nIGxvYWRlci9hY3Rpb24vbWlkZGxld2FyZSwKICAgICAgLy8gbm90IHRyeWluZyB0byByZS1pbXBsZW1lbnQgdGhlIGZ1bGwgbG9hZGVyL2NsaWVudExvYWRlci9TU1IvaHlkcmF0aW9uCiAgICAgIC8vIGZsb3cuIFRoYXQgaXMgYmV0dGVyIHRlc3RlZCB2aWEgRTJFIHRlc3RzLgogICAgICBoYXNDbGllbnRBY3Rpb246IGZhbHNlLAogICAgICBoYXNDbGllbnRMb2FkZXI6IGZhbHNlLAogICAgICBoYXNDbGllbnRNaWRkbGV3YXJlOiBmYWxzZSwKICAgICAgaGFzRXJyb3JCb3VuZGFyeTogcm91dGUuRXJyb3JCb3VuZGFyeSAhPSBudWxsLAogICAgICAvLyBhbnkgbmVlZCBmb3IgdGhlc2U/CiAgICAgIG1vZHVsZTogImJ1aWxkL3N0dWItcGF0aC10by1tb2R1bGUuanMiLAogICAgICBjbGllbnRBY3Rpb25Nb2R1bGU6IHZvaWQgMCwKICAgICAgY2xpZW50TG9hZGVyTW9kdWxlOiB2b2lkIDAsCiAgICAgIGNsaWVudE1pZGRsZXdhcmVNb2R1bGU6IHZvaWQgMCwKICAgICAgaHlkcmF0ZUZhbGxiYWNrTW9kdWxlOiB2b2lkIDAKICAgIH07CiAgICBtYW5pZmVzdC5yb3V0ZXNbbmV3Um91dGUuaWRdID0gZW50cnlSb3V0ZTsKICAgIHJvdXRlTW9kdWxlc1tyb3V0ZS5pZF0gPSB7CiAgICAgIGRlZmF1bHQ6IG5ld1JvdXRlLkNvbXBvbmVudCB8fCBPdXRsZXQsCiAgICAgIEVycm9yQm91bmRhcnk6IG5ld1JvdXRlLkVycm9yQm91bmRhcnkgfHwgdm9pZCAwLAogICAgICBoYW5kbGU6IHJvdXRlLmhhbmRsZSwKICAgICAgbGlua3M6IHJvdXRlLmxpbmtzLAogICAgICBtZXRhOiByb3V0ZS5tZXRhLAogICAgICBzaG91bGRSZXZhbGlkYXRlOiByb3V0ZS5zaG91bGRSZXZhbGlkYXRlCiAgICB9OwogICAgaWYgKHJvdXRlLmNoaWxkcmVuKSB7CiAgICAgIG5ld1JvdXRlLmNoaWxkcmVuID0gcHJvY2Vzc1JvdXRlcygKICAgICAgICByb3V0ZS5jaGlsZHJlbiwKICAgICAgICBjb250ZXh0LAogICAgICAgIG1hbmlmZXN0LAogICAgICAgIHJvdXRlTW9kdWxlcywKICAgICAgICBuZXdSb3V0ZS5pZAogICAgICApOwogICAgfQogICAgcmV0dXJuIG5ld1JvdXRlOwogIH0pOwp9CnZhciBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7CnZhciBzaWduID0gYXN5bmMgKHZhbHVlLCBzZWNyZXQpID0+IHsKICBsZXQgZGF0YTIgPSBlbmNvZGVyLmVuY29kZSh2YWx1ZSk7CiAgbGV0IGtleSA9IGF3YWl0IGNyZWF0ZUtleTIoc2VjcmV0LCBbInNpZ24iXSk7CiAgbGV0IHNpZ25hdHVyZSA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuc2lnbigiSE1BQyIsIGtleSwgZGF0YTIpOwogIGxldCBoYXNoID0gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLm5ldyBVaW50OEFycmF5KHNpZ25hdHVyZSkpKS5yZXBsYWNlKAogICAgLz0rJC8sCiAgICAiIgogICk7CiAgcmV0dXJuIHZhbHVlICsgIi4iICsgaGFzaDsKfTsKdmFyIHVuc2lnbiA9IGFzeW5jIChjb29raWUsIHNlY3JldCkgPT4gewogIGxldCBpbmRleCA9IGNvb2tpZS5sYXN0SW5kZXhPZigiLiIpOwogIGxldCB2YWx1ZSA9IGNvb2tpZS5zbGljZSgwLCBpbmRleCk7CiAgbGV0IGhhc2ggPSBjb29raWUuc2xpY2UoaW5kZXggKyAxKTsKICBsZXQgZGF0YTIgPSBlbmNvZGVyLmVuY29kZSh2YWx1ZSk7CiAgbGV0IGtleSA9IGF3YWl0IGNyZWF0ZUtleTIoc2VjcmV0LCBbInZlcmlmeSJdKTsKICB0cnkgewogICAgbGV0IHNpZ25hdHVyZSA9IGJ5dGVTdHJpbmdUb1VpbnQ4QXJyYXkoYXRvYihoYXNoKSk7CiAgICBsZXQgdmFsaWQgPSBhd2FpdCBjcnlwdG8uc3VidGxlLnZlcmlmeSgiSE1BQyIsIGtleSwgc2lnbmF0dXJlLCBkYXRhMik7CiAgICByZXR1cm4gdmFsaWQgPyB2YWx1ZSA6IGZhbHNlOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQp9Owp2YXIgY3JlYXRlS2V5MiA9IGFzeW5jIChzZWNyZXQsIHVzYWdlcykgPT4gY3J5cHRvLnN1YnRsZS5pbXBvcnRLZXkoCiAgInJhdyIsCiAgZW5jb2Rlci5lbmNvZGUoc2VjcmV0KSwKICB7IG5hbWU6ICJITUFDIiwgaGFzaDogIlNIQS0yNTYiIH0sCiAgZmFsc2UsCiAgdXNhZ2VzCik7CmZ1bmN0aW9uIGJ5dGVTdHJpbmdUb1VpbnQ4QXJyYXkoYnl0ZVN0cmluZykgewogIGxldCBhcnJheSA9IG5ldyBVaW50OEFycmF5KGJ5dGVTdHJpbmcubGVuZ3RoKTsKICBmb3IgKGxldCBpID0gMDsgaSA8IGJ5dGVTdHJpbmcubGVuZ3RoOyBpKyspIHsKICAgIGFycmF5W2ldID0gYnl0ZVN0cmluZy5jaGFyQ29kZUF0KGkpOwogIH0KICByZXR1cm4gYXJyYXk7Cn0KdmFyIGNyZWF0ZUNvb2tpZSA9IChuYW1lLCBjb29raWVPcHRpb25zID0ge30pID0+IHsKICBsZXQgeyBzZWNyZXRzID0gW10sIC4uLm9wdGlvbnMgfSA9IHsKICAgIHBhdGg6ICIvIiwKICAgIHNhbWVTaXRlOiAibGF4IiwKICAgIC4uLmNvb2tpZU9wdGlvbnMKICB9OwogIHdhcm5PbmNlQWJvdXRFeHBpcmVzQ29va2llKG5hbWUsIG9wdGlvbnMuZXhwaXJlcyk7CiAgcmV0dXJuIHsKICAgIGdldCBuYW1lKCkgewogICAgICByZXR1cm4gbmFtZTsKICAgIH0sCiAgICBnZXQgaXNTaWduZWQoKSB7CiAgICAgIHJldHVybiBzZWNyZXRzLmxlbmd0aCA+IDA7CiAgICB9LAogICAgZ2V0IGV4cGlyZXMoKSB7CiAgICAgIHJldHVybiB0eXBlb2Ygb3B0aW9ucy5tYXhBZ2UgIT09ICJ1bmRlZmluZWQiID8gbmV3IERhdGUoRGF0ZS5ub3coKSArIG9wdGlvbnMubWF4QWdlICogMWUzKSA6IG9wdGlvbnMuZXhwaXJlczsKICAgIH0sCiAgICBhc3luYyBwYXJzZShjb29raWVIZWFkZXIsIHBhcnNlT3B0aW9ucykgewogICAgICBpZiAoIWNvb2tpZUhlYWRlcikgcmV0dXJuIG51bGw7CiAgICAgIGxldCBjb29raWVzID0gKDAsIGltcG9ydF9jb29raWUucGFyc2UpKGNvb2tpZUhlYWRlciwgeyAuLi5vcHRpb25zLCAuLi5wYXJzZU9wdGlvbnMgfSk7CiAgICAgIGlmIChuYW1lIGluIGNvb2tpZXMpIHsKICAgICAgICBsZXQgdmFsdWUgPSBjb29raWVzW25hbWVdOwogICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICJzdHJpbmciICYmIHZhbHVlICE9PSAiIikgewogICAgICAgICAgbGV0IGRlY29kZWQgPSBhd2FpdCBkZWNvZGVDb29raWVWYWx1ZSh2YWx1ZSwgc2VjcmV0cyk7CiAgICAgICAgICByZXR1cm4gZGVjb2RlZDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuICIiOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIHNlcmlhbGl6ZSh2YWx1ZSwgc2VyaWFsaXplT3B0aW9ucykgewogICAgICByZXR1cm4gKDAsIGltcG9ydF9jb29raWUuc2VyaWFsaXplKSgKICAgICAgICBuYW1lLAogICAgICAgIHZhbHVlID09PSAiIiA/ICIiIDogYXdhaXQgZW5jb2RlQ29va2llVmFsdWUodmFsdWUsIHNlY3JldHMpLAogICAgICAgIHsKICAgICAgICAgIC4uLm9wdGlvbnMsCiAgICAgICAgICAuLi5zZXJpYWxpemVPcHRpb25zCiAgICAgICAgfQogICAgICApOwogICAgfQogIH07Cn07CnZhciBpc0Nvb2tpZSA9IChvYmplY3QpID0+IHsKICByZXR1cm4gb2JqZWN0ICE9IG51bGwgJiYgdHlwZW9mIG9iamVjdC5uYW1lID09PSAic3RyaW5nIiAmJiB0eXBlb2Ygb2JqZWN0LmlzU2lnbmVkID09PSAiYm9vbGVhbiIgJiYgdHlwZW9mIG9iamVjdC5wYXJzZSA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2Ygb2JqZWN0LnNlcmlhbGl6ZSA9PT0gImZ1bmN0aW9uIjsKfTsKYXN5bmMgZnVuY3Rpb24gZW5jb2RlQ29va2llVmFsdWUodmFsdWUsIHNlY3JldHMpIHsKICBsZXQgZW5jb2RlZCA9IGVuY29kZURhdGEodmFsdWUpOwogIGlmIChzZWNyZXRzLmxlbmd0aCA+IDApIHsKICAgIGVuY29kZWQgPSBhd2FpdCBzaWduKGVuY29kZWQsIHNlY3JldHNbMF0pOwogIH0KICByZXR1cm4gZW5jb2RlZDsKfQphc3luYyBmdW5jdGlvbiBkZWNvZGVDb29raWVWYWx1ZSh2YWx1ZSwgc2VjcmV0cykgewogIGlmIChzZWNyZXRzLmxlbmd0aCA+IDApIHsKICAgIGZvciAobGV0IHNlY3JldCBvZiBzZWNyZXRzKSB7CiAgICAgIGxldCB1bnNpZ25lZFZhbHVlID0gYXdhaXQgdW5zaWduKHZhbHVlLCBzZWNyZXQpOwogICAgICBpZiAodW5zaWduZWRWYWx1ZSAhPT0gZmFsc2UpIHsKICAgICAgICByZXR1cm4gZGVjb2RlRGF0YSh1bnNpZ25lZFZhbHVlKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfQogIHJldHVybiBkZWNvZGVEYXRhKHZhbHVlKTsKfQpmdW5jdGlvbiBlbmNvZGVEYXRhKHZhbHVlKSB7CiAgcmV0dXJuIGJ0b2EobXlVbmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkodmFsdWUpKSkpOwp9CmZ1bmN0aW9uIGRlY29kZURhdGEodmFsdWUpIHsKICB0cnkgewogICAgcmV0dXJuIEpTT04ucGFyc2UoZGVjb2RlVVJJQ29tcG9uZW50KG15RXNjYXBlKGF0b2IodmFsdWUpKSkpOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICByZXR1cm4ge307CiAgfQp9CmZ1bmN0aW9uIG15RXNjYXBlKHZhbHVlKSB7CiAgbGV0IHN0ciA9IHZhbHVlLnRvU3RyaW5nKCk7CiAgbGV0IHJlc3VsdCA9ICIiOwogIGxldCBpbmRleCA9IDA7CiAgbGV0IGNociwgY29kZTsKICB3aGlsZSAoaW5kZXggPCBzdHIubGVuZ3RoKSB7CiAgICBjaHIgPSBzdHIuY2hhckF0KGluZGV4KyspOwogICAgaWYgKC9bXHcqK1wtLi9AXS8uZXhlYyhjaHIpKSB7CiAgICAgIHJlc3VsdCArPSBjaHI7CiAgICB9IGVsc2UgewogICAgICBjb2RlID0gY2hyLmNoYXJDb2RlQXQoMCk7CiAgICAgIGlmIChjb2RlIDwgMjU2KSB7CiAgICAgICAgcmVzdWx0ICs9ICIlIiArIGhleChjb2RlLCAyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXN1bHQgKz0gIiV1IiArIGhleChjb2RlLCA0KS50b1VwcGVyQ2FzZSgpOwogICAgICB9CiAgICB9CiAgfQogIHJldHVybiByZXN1bHQ7Cn0KZnVuY3Rpb24gaGV4KGNvZGUsIGxlbmd0aCkgewogIGxldCByZXN1bHQgPSBjb2RlLnRvU3RyaW5nKDE2KTsKICB3aGlsZSAocmVzdWx0Lmxlbmd0aCA8IGxlbmd0aCkgcmVzdWx0ID0gIjAiICsgcmVzdWx0OwogIHJldHVybiByZXN1bHQ7Cn0KZnVuY3Rpb24gbXlVbmVzY2FwZSh2YWx1ZSkgewogIGxldCBzdHIgPSB2YWx1ZS50b1N0cmluZygpOwogIGxldCByZXN1bHQgPSAiIjsKICBsZXQgaW5kZXggPSAwOwogIGxldCBjaHIsIHBhcnQ7CiAgd2hpbGUgKGluZGV4IDwgc3RyLmxlbmd0aCkgewogICAgY2hyID0gc3RyLmNoYXJBdChpbmRleCsrKTsKICAgIGlmIChjaHIgPT09ICIlIikgewogICAgICBpZiAoc3RyLmNoYXJBdChpbmRleCkgPT09ICJ1IikgewogICAgICAgIHBhcnQgPSBzdHIuc2xpY2UoaW5kZXggKyAxLCBpbmRleCArIDUpOwogICAgICAgIGlmICgvXltcZGEtZl17NH0kL2kuZXhlYyhwYXJ0KSkgewogICAgICAgICAgcmVzdWx0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQocGFydCwgMTYpKTsKICAgICAgICAgIGluZGV4ICs9IDU7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcGFydCA9IHN0ci5zbGljZShpbmRleCwgaW5kZXggKyAyKTsKICAgICAgICBpZiAoL15bXGRhLWZdezJ9JC9pLmV4ZWMocGFydCkpIHsKICAgICAgICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KHBhcnQsIDE2KSk7CiAgICAgICAgICBpbmRleCArPSAyOwogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXN1bHQgKz0gY2hyOwogIH0KICByZXR1cm4gcmVzdWx0Owp9CmZ1bmN0aW9uIHdhcm5PbmNlQWJvdXRFeHBpcmVzQ29va2llKG5hbWUsIGV4cGlyZXMpIHsKICB3YXJuT25jZSgKICAgICFleHBpcmVzLAogICAgYFRoZSAiJHtuYW1lfSIgY29va2llIGhhcyBhbiAiZXhwaXJlcyIgcHJvcGVydHkgc2V0LiBUaGlzIHdpbGwgY2F1c2UgdGhlIGV4cGlyZXMgdmFsdWUgdG8gbm90IGJlIHVwZGF0ZWQgd2hlbiB0aGUgc2Vzc2lvbiBpcyBjb21taXR0ZWQuIEluc3RlYWQsIHlvdSBzaG91bGQgc2V0IHRoZSBleHBpcmVzIHZhbHVlIHdoZW4gc2VyaWFsaXppbmcgdGhlIGNvb2tpZS4gWW91IGNhbiB1c2UgXGBjb21taXRTZXNzaW9uKHNlc3Npb24sIHsgZXhwaXJlcyB9KVxgIGlmIHVzaW5nIGEgc2Vzc2lvbiBzdG9yYWdlIG9iamVjdCwgb3IgXGBjb29raWUuc2VyaWFsaXplKCJ2YWx1ZSIsIHsgZXhwaXJlcyB9KVxgIGlmIHlvdSdyZSB1c2luZyB0aGUgY29va2llIGRpcmVjdGx5LmAKICApOwp9CmZ1bmN0aW9uIGNyZWF0ZUVudHJ5Um91dGVNb2R1bGVzKG1hbmlmZXN0KSB7CiAgcmV0dXJuIE9iamVjdC5rZXlzKG1hbmlmZXN0KS5yZWR1Y2UoKG1lbW8yLCByb3V0ZUlkKSA9PiB7CiAgICBsZXQgcm91dGUgPSBtYW5pZmVzdFtyb3V0ZUlkXTsKICAgIGlmIChyb3V0ZSkgewogICAgICBtZW1vMltyb3V0ZUlkXSA9IHJvdXRlLm1vZHVsZTsKICAgIH0KICAgIHJldHVybiBtZW1vMjsKICB9LCB7fSk7Cn0KdmFyIFNlcnZlck1vZGUgPSAoKFNlcnZlck1vZGUyKSA9PiB7CiAgU2VydmVyTW9kZTJbIkRldmVsb3BtZW50Il0gPSAiZGV2ZWxvcG1lbnQiOwogIFNlcnZlck1vZGUyWyJQcm9kdWN0aW9uIl0gPSAicHJvZHVjdGlvbiI7CiAgU2VydmVyTW9kZTJbIlRlc3QiXSA9ICJ0ZXN0IjsKICByZXR1cm4gU2VydmVyTW9kZTI7Cn0pKFNlcnZlck1vZGUgfHwge30pOwpmdW5jdGlvbiBpc1NlcnZlck1vZGUodmFsdWUpIHsKICByZXR1cm4gdmFsdWUgPT09ICJkZXZlbG9wbWVudCIgfHwgdmFsdWUgPT09ICJwcm9kdWN0aW9uIiB8fCB2YWx1ZSA9PT0gInRlc3QiOwp9CmZ1bmN0aW9uIHNhbml0aXplRXJyb3IoZXJyb3IsIHNlcnZlck1vZGUpIHsKICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBzZXJ2ZXJNb2RlICE9PSAiZGV2ZWxvcG1lbnQiKSB7CiAgICBsZXQgc2FuaXRpemVkID0gbmV3IEVycm9yKCJVbmV4cGVjdGVkIFNlcnZlciBFcnJvciIpOwogICAgc2FuaXRpemVkLnN0YWNrID0gdm9pZCAwOwogICAgcmV0dXJuIHNhbml0aXplZDsKICB9CiAgcmV0dXJuIGVycm9yOwp9CmZ1bmN0aW9uIHNhbml0aXplRXJyb3JzKGVycm9ycywgc2VydmVyTW9kZSkgewogIHJldHVybiBPYmplY3QuZW50cmllcyhlcnJvcnMpLnJlZHVjZSgoYWNjLCBbcm91dGVJZCwgZXJyb3JdKSA9PiB7CiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihhY2MsIHsgW3JvdXRlSWRdOiBzYW5pdGl6ZUVycm9yKGVycm9yLCBzZXJ2ZXJNb2RlKSB9KTsKICB9LCB7fSk7Cn0KZnVuY3Rpb24gc2VyaWFsaXplRXJyb3IoZXJyb3IsIHNlcnZlck1vZGUpIHsKICBsZXQgc2FuaXRpemVkID0gc2FuaXRpemVFcnJvcihlcnJvciwgc2VydmVyTW9kZSk7CiAgcmV0dXJuIHsKICAgIG1lc3NhZ2U6IHNhbml0aXplZC5tZXNzYWdlLAogICAgc3RhY2s6IHNhbml0aXplZC5zdGFjawogIH07Cn0KZnVuY3Rpb24gc2VyaWFsaXplRXJyb3JzMihlcnJvcnMsIHNlcnZlck1vZGUpIHsKICBpZiAoIWVycm9ycykgcmV0dXJuIG51bGw7CiAgbGV0IGVudHJpZXMgPSBPYmplY3QuZW50cmllcyhlcnJvcnMpOwogIGxldCBzZXJpYWxpemVkID0ge307CiAgZm9yIChsZXQgW2tleSwgdmFsXSBvZiBlbnRyaWVzKSB7CiAgICBpZiAoaXNSb3V0ZUVycm9yUmVzcG9uc2UodmFsKSkgewogICAgICBzZXJpYWxpemVkW2tleV0gPSB7IC4uLnZhbCwgX190eXBlOiAiUm91dGVFcnJvclJlc3BvbnNlIiB9OwogICAgfSBlbHNlIGlmICh2YWwgaW5zdGFuY2VvZiBFcnJvcikgewogICAgICBsZXQgc2FuaXRpemVkID0gc2FuaXRpemVFcnJvcih2YWwsIHNlcnZlck1vZGUpOwogICAgICBzZXJpYWxpemVkW2tleV0gPSB7CiAgICAgICAgbWVzc2FnZTogc2FuaXRpemVkLm1lc3NhZ2UsCiAgICAgICAgc3RhY2s6IHNhbml0aXplZC5zdGFjaywKICAgICAgICBfX3R5cGU6ICJFcnJvciIsCiAgICAgICAgLy8gSWYgdGhpcyBpcyBhIHN1YmNsYXNzIChpLmUuLCBSZWZlcmVuY2VFcnJvciksIHNlbmQgdXAgdGhlIHR5cGUgc28gd2UKICAgICAgICAvLyBjYW4gcmUtY3JlYXRlIHRoZSBzYW1lIHR5cGUgZHVyaW5nIGh5ZHJhdGlvbi4gIFRoaXMgd2lsbCBvbmx5IGFwcGx5CiAgICAgICAgLy8gaW4gZGV2IG1vZGUgc2luY2UgYWxsIHByb2R1Y3Rpb24gZXJyb3JzIGFyZSBzYW5pdGl6ZWQgdG8gbm9ybWFsCiAgICAgICAgLy8gRXJyb3IgaW5zdGFuY2VzCiAgICAgICAgLi4uc2FuaXRpemVkLm5hbWUgIT09ICJFcnJvciIgPyB7CiAgICAgICAgICBfX3N1YlR5cGU6IHNhbml0aXplZC5uYW1lCiAgICAgICAgfSA6IHt9CiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICBzZXJpYWxpemVkW2tleV0gPSB2YWw7CiAgICB9CiAgfQogIHJldHVybiBzZXJpYWxpemVkOwp9CmZ1bmN0aW9uIG1hdGNoU2VydmVyUm91dGVzKHJvdXRlcywgcGF0aG5hbWUsIGJhc2VuYW1lKSB7CiAgbGV0IG1hdGNoZXMgPSBtYXRjaFJvdXRlcygKICAgIHJvdXRlcywKICAgIHBhdGhuYW1lLAogICAgYmFzZW5hbWUKICApOwogIGlmICghbWF0Y2hlcykgcmV0dXJuIG51bGw7CiAgcmV0dXJuIG1hdGNoZXMubWFwKChtYXRjaCkgPT4gKHsKICAgIHBhcmFtczogbWF0Y2gucGFyYW1zLAogICAgcGF0aG5hbWU6IG1hdGNoLnBhdGhuYW1lLAogICAgcm91dGU6IG1hdGNoLnJvdXRlCiAgfSkpOwp9CmFzeW5jIGZ1bmN0aW9uIGNhbGxSb3V0ZUhhbmRsZXIoaGFuZGxlciwgYXJncykgewogIGxldCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKHsKICAgIHJlcXVlc3Q6IHN0cmlwUm91dGVzUGFyYW0oc3RyaXBJbmRleFBhcmFtMihhcmdzLnJlcXVlc3QpKSwKICAgIHBhcmFtczogYXJncy5wYXJhbXMsCiAgICBjb250ZXh0OiBhcmdzLmNvbnRleHQKICB9KTsKICBpZiAoaXNEYXRhV2l0aFJlc3BvbnNlSW5pdChyZXN1bHQpICYmIHJlc3VsdC5pbml0ICYmIHJlc3VsdC5pbml0LnN0YXR1cyAmJiBpc1JlZGlyZWN0U3RhdHVzQ29kZShyZXN1bHQuaW5pdC5zdGF0dXMpKSB7CiAgICB0aHJvdyBuZXcgUmVzcG9uc2UobnVsbCwgcmVzdWx0LmluaXQpOwogIH0KICByZXR1cm4gcmVzdWx0Owp9CmZ1bmN0aW9uIHN0cmlwSW5kZXhQYXJhbTIocmVxdWVzdCkgewogIGxldCB1cmwgPSBuZXcgVVJMKHJlcXVlc3QudXJsKTsKICBsZXQgaW5kZXhWYWx1ZXMgPSB1cmwuc2VhcmNoUGFyYW1zLmdldEFsbCgiaW5kZXgiKTsKICB1cmwuc2VhcmNoUGFyYW1zLmRlbGV0ZSgiaW5kZXgiKTsKICBsZXQgaW5kZXhWYWx1ZXNUb0tlZXAgPSBbXTsKICBmb3IgKGxldCBpbmRleFZhbHVlIG9mIGluZGV4VmFsdWVzKSB7CiAgICBpZiAoaW5kZXhWYWx1ZSkgewogICAgICBpbmRleFZhbHVlc1RvS2VlcC5wdXNoKGluZGV4VmFsdWUpOwogICAgfQogIH0KICBmb3IgKGxldCB0b0tlZXAgb2YgaW5kZXhWYWx1ZXNUb0tlZXApIHsKICAgIHVybC5zZWFyY2hQYXJhbXMuYXBwZW5kKCJpbmRleCIsIHRvS2VlcCk7CiAgfQogIGxldCBpbml0ID0gewogICAgbWV0aG9kOiByZXF1ZXN0Lm1ldGhvZCwKICAgIGJvZHk6IHJlcXVlc3QuYm9keSwKICAgIGhlYWRlcnM6IHJlcXVlc3QuaGVhZGVycywKICAgIHNpZ25hbDogcmVxdWVzdC5zaWduYWwKICB9OwogIGlmIChpbml0LmJvZHkpIHsKICAgIGluaXQuZHVwbGV4ID0gImhhbGYiOwogIH0KICByZXR1cm4gbmV3IFJlcXVlc3QodXJsLmhyZWYsIGluaXQpOwp9CmZ1bmN0aW9uIHN0cmlwUm91dGVzUGFyYW0ocmVxdWVzdCkgewogIGxldCB1cmwgPSBuZXcgVVJMKHJlcXVlc3QudXJsKTsKICB1cmwuc2VhcmNoUGFyYW1zLmRlbGV0ZSgiX3JvdXRlcyIpOwogIGxldCBpbml0ID0gewogICAgbWV0aG9kOiByZXF1ZXN0Lm1ldGhvZCwKICAgIGJvZHk6IHJlcXVlc3QuYm9keSwKICAgIGhlYWRlcnM6IHJlcXVlc3QuaGVhZGVycywKICAgIHNpZ25hbDogcmVxdWVzdC5zaWduYWwKICB9OwogIGlmIChpbml0LmJvZHkpIHsKICAgIGluaXQuZHVwbGV4ID0gImhhbGYiOwogIH0KICByZXR1cm4gbmV3IFJlcXVlc3QodXJsLmhyZWYsIGluaXQpOwp9CmZ1bmN0aW9uIGludmFyaWFudDIyKHZhbHVlLCBtZXNzYWdlKSB7CiAgaWYgKHZhbHVlID09PSBmYWxzZSB8fCB2YWx1ZSA9PT0gbnVsbCB8fCB0eXBlb2YgdmFsdWUgPT09ICJ1bmRlZmluZWQiKSB7CiAgICBjb25zb2xlLmVycm9yKAogICAgICAiVGhlIGZvbGxvd2luZyBlcnJvciBpcyBhIGJ1ZyBpbiBSZWFjdCBSb3V0ZXI7IHBsZWFzZSBvcGVuIGFuIGlzc3VlISBodHRwczovL2dpdGh1Yi5jb20vcmVtaXgtcnVuL3JlYWN0LXJvdXRlci9pc3N1ZXMvbmV3L2Nob29zZSIKICAgICk7CiAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7CiAgfQp9CnZhciBnbG9iYWxEZXZTZXJ2ZXJIb29rc0tleSA9ICJfX3JlYWN0Um91dGVyRGV2U2VydmVySG9va3MiOwpmdW5jdGlvbiBzZXREZXZTZXJ2ZXJIb29rcyhkZXZTZXJ2ZXJIb29rcykgewogIGdsb2JhbFRoaXNbZ2xvYmFsRGV2U2VydmVySG9va3NLZXldID0gZGV2U2VydmVySG9va3M7Cn0KZnVuY3Rpb24gZ2V0RGV2U2VydmVySG9va3MoKSB7CiAgcmV0dXJuIGdsb2JhbFRoaXNbZ2xvYmFsRGV2U2VydmVySG9va3NLZXldOwp9CmZ1bmN0aW9uIGdldEJ1aWxkVGltZUhlYWRlcihyZXF1ZXN0LCBoZWFkZXJOYW1lKSB7CiAgdmFyIF9hOwogIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gInVuZGVmaW5lZCIpIHsKICAgIHRyeSB7CiAgICAgIGlmICgoKF9hID0gcHJvY2Vzcy5lbnYpID09IG51bGwgPyB2b2lkIDAgOiBfYS5JU19SUl9CVUlMRF9SRVFVRVNUKSA9PT0gInllcyIpIHsKICAgICAgICByZXR1cm4gcmVxdWVzdC5oZWFkZXJzLmdldChoZWFkZXJOYW1lKTsKICAgICAgfQogICAgfSBjYXRjaCAoZSkgewogICAgfQogIH0KICByZXR1cm4gbnVsbDsKfQpmdW5jdGlvbiBncm91cFJvdXRlc0J5UGFyZW50SWQyKG1hbmlmZXN0KSB7CiAgbGV0IHJvdXRlcyA9IHt9OwogIE9iamVjdC52YWx1ZXMobWFuaWZlc3QpLmZvckVhY2goKHJvdXRlKSA9PiB7CiAgICBpZiAocm91dGUpIHsKICAgICAgbGV0IHBhcmVudElkID0gcm91dGUucGFyZW50SWQgfHwgIiI7CiAgICAgIGlmICghcm91dGVzW3BhcmVudElkXSkgewogICAgICAgIHJvdXRlc1twYXJlbnRJZF0gPSBbXTsKICAgICAgfQogICAgICByb3V0ZXNbcGFyZW50SWRdLnB1c2gocm91dGUpOwogICAgfQogIH0pOwogIHJldHVybiByb3V0ZXM7Cn0KZnVuY3Rpb24gY3JlYXRlUm91dGVzKG1hbmlmZXN0LCBwYXJlbnRJZCA9ICIiLCByb3V0ZXNCeVBhcmVudElkID0gZ3JvdXBSb3V0ZXNCeVBhcmVudElkMihtYW5pZmVzdCkpIHsKICByZXR1cm4gKHJvdXRlc0J5UGFyZW50SWRbcGFyZW50SWRdIHx8IFtdKS5tYXAoKHJvdXRlKSA9PiAoewogICAgLi4ucm91dGUsCiAgICBjaGlsZHJlbjogY3JlYXRlUm91dGVzKG1hbmlmZXN0LCByb3V0ZS5pZCwgcm91dGVzQnlQYXJlbnRJZCkKICB9KSk7Cn0KZnVuY3Rpb24gY3JlYXRlU3RhdGljSGFuZGxlckRhdGFSb3V0ZXMobWFuaWZlc3QsIGZ1dHVyZSwgcGFyZW50SWQgPSAiIiwgcm91dGVzQnlQYXJlbnRJZCA9IGdyb3VwUm91dGVzQnlQYXJlbnRJZDIobWFuaWZlc3QpKSB7CiAgcmV0dXJuIChyb3V0ZXNCeVBhcmVudElkW3BhcmVudElkXSB8fCBbXSkubWFwKChyb3V0ZSkgPT4gewogICAgbGV0IGNvbW1vblJvdXRlID0gewogICAgICAvLyBBbHdheXMgaW5jbHVkZSByb290IGR1ZSB0byBkZWZhdWx0IGJvdW5kYXJpZXMKICAgICAgaGFzRXJyb3JCb3VuZGFyeTogcm91dGUuaWQgPT09ICJyb290IiB8fCByb3V0ZS5tb2R1bGUuRXJyb3JCb3VuZGFyeSAhPSBudWxsLAogICAgICBpZDogcm91dGUuaWQsCiAgICAgIHBhdGg6IHJvdXRlLnBhdGgsCiAgICAgIG1pZGRsZXdhcmU6IHJvdXRlLm1vZHVsZS5taWRkbGV3YXJlLAogICAgICAvLyBOZWVkIHRvIHVzZSBSUidzIHZlcnNpb24gaW4gdGhlIHBhcmFtIHR5cGVkIGhlcmUgdG8gcGVybWl0IHRoZSBvcHRpb25hbAogICAgICAvLyBjb250ZXh0IGV2ZW4gdGhvdWdoIHdlIGtub3cgaXQnbGwgYWx3YXlzIGJlIHByb3ZpZGVkIGluIHJlbWl4CiAgICAgIGxvYWRlcjogcm91dGUubW9kdWxlLmxvYWRlciA/IGFzeW5jIChhcmdzKSA9PiB7CiAgICAgICAgbGV0IHByZVJlbmRlcmVkRGF0YSA9IGdldEJ1aWxkVGltZUhlYWRlcigKICAgICAgICAgIGFyZ3MucmVxdWVzdCwKICAgICAgICAgICJYLVJlYWN0LVJvdXRlci1QcmVyZW5kZXItRGF0YSIKICAgICAgICApOwogICAgICAgIGlmIChwcmVSZW5kZXJlZERhdGEgIT0gbnVsbCkgewogICAgICAgICAgbGV0IGVuY29kZWQgPSBwcmVSZW5kZXJlZERhdGEgPyBkZWNvZGVVUkkocHJlUmVuZGVyZWREYXRhKSA6IHByZVJlbmRlcmVkRGF0YTsKICAgICAgICAgIGludmFyaWFudDIyKGVuY29kZWQsICJNaXNzaW5nIHByZXJlbmRlcmVkIGRhdGEgZm9yIHJvdXRlIik7CiAgICAgICAgICBsZXQgdWludDhhcnJheSA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShlbmNvZGVkKTsKICAgICAgICAgIGxldCBzdHJlYW0gPSBuZXcgUmVhZGFibGVTdHJlYW0oewogICAgICAgICAgICBzdGFydChjb250cm9sbGVyKSB7CiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHVpbnQ4YXJyYXkpOwogICAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBsZXQgZGVjb2RlZCA9IGF3YWl0IGRlY29kZVZpYVR1cmJvU3RyZWFtKHN0cmVhbSwgZ2xvYmFsKTsKICAgICAgICAgIGxldCBkYXRhMiA9IGRlY29kZWQudmFsdWU7CiAgICAgICAgICBpZiAoZGF0YTIgJiYgU2luZ2xlRmV0Y2hSZWRpcmVjdFN5bWJvbCBpbiBkYXRhMikgewogICAgICAgICAgICBsZXQgcmVzdWx0ID0gZGF0YTJbU2luZ2xlRmV0Y2hSZWRpcmVjdFN5bWJvbF07CiAgICAgICAgICAgIGxldCBpbml0ID0geyBzdGF0dXM6IHJlc3VsdC5zdGF0dXMgfTsKICAgICAgICAgICAgaWYgKHJlc3VsdC5yZWxvYWQpIHsKICAgICAgICAgICAgICB0aHJvdyByZWRpcmVjdERvY3VtZW50KHJlc3VsdC5yZWRpcmVjdCwgaW5pdCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnJlcGxhY2UpIHsKICAgICAgICAgICAgICB0aHJvdyByZXBsYWNlKHJlc3VsdC5yZWRpcmVjdCwgaW5pdCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhyb3cgcmVkaXJlY3QocmVzdWx0LnJlZGlyZWN0LCBpbml0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaW52YXJpYW50MjIoCiAgICAgICAgICAgICAgZGF0YTIgJiYgcm91dGUuaWQgaW4gZGF0YTIsCiAgICAgICAgICAgICAgIlVuYWJsZSB0byBkZWNvZGUgcHJlcmVuZGVyZWQgZGF0YSIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGRhdGEyW3JvdXRlLmlkXTsKICAgICAgICAgICAgaW52YXJpYW50MjIoCiAgICAgICAgICAgICAgImRhdGEiIGluIHJlc3VsdCwKICAgICAgICAgICAgICAiVW5hYmxlIHRvIHByb2Nlc3MgcHJlcmVuZGVyZWQgZGF0YSIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBsZXQgdmFsID0gYXdhaXQgY2FsbFJvdXRlSGFuZGxlcihyb3V0ZS5tb2R1bGUubG9hZGVyLCBhcmdzKTsKICAgICAgICByZXR1cm4gdmFsOwogICAgICB9IDogdm9pZCAwLAogICAgICBhY3Rpb246IHJvdXRlLm1vZHVsZS5hY3Rpb24gPyAoYXJncykgPT4gY2FsbFJvdXRlSGFuZGxlcihyb3V0ZS5tb2R1bGUuYWN0aW9uLCBhcmdzKSA6IHZvaWQgMCwKICAgICAgaGFuZGxlOiByb3V0ZS5tb2R1bGUuaGFuZGxlCiAgICB9OwogICAgcmV0dXJuIHJvdXRlLmluZGV4ID8gewogICAgICBpbmRleDogdHJ1ZSwKICAgICAgLi4uY29tbW9uUm91dGUKICAgIH0gOiB7CiAgICAgIGNhc2VTZW5zaXRpdmU6IHJvdXRlLmNhc2VTZW5zaXRpdmUsCiAgICAgIGNoaWxkcmVuOiBjcmVhdGVTdGF0aWNIYW5kbGVyRGF0YVJvdXRlcygKICAgICAgICBtYW5pZmVzdCwKICAgICAgICBmdXR1cmUsCiAgICAgICAgcm91dGUuaWQsCiAgICAgICAgcm91dGVzQnlQYXJlbnRJZAogICAgICApLAogICAgICAuLi5jb21tb25Sb3V0ZQogICAgfTsKICB9KTsKfQpmdW5jdGlvbiBjcmVhdGVTZXJ2ZXJIYW5kb2ZmU3RyaW5nKHNlcnZlckhhbmRvZmYpIHsKICByZXR1cm4gZXNjYXBlSHRtbChKU09OLnN0cmluZ2lmeShzZXJ2ZXJIYW5kb2ZmKSk7Cn0KZnVuY3Rpb24gZ2V0RG9jdW1lbnRIZWFkZXJzKGNvbnRleHQsIGJ1aWxkKSB7CiAgcmV0dXJuIGdldERvY3VtZW50SGVhZGVyc0ltcGwoY29udGV4dCwgKG0pID0+IHsKICAgIGxldCByb3V0ZSA9IGJ1aWxkLnJvdXRlc1ttLnJvdXRlLmlkXTsKICAgIGludmFyaWFudDIyKHJvdXRlLCBgUm91dGUgd2l0aCBpZCAiJHttLnJvdXRlLmlkfSIgbm90IGZvdW5kIGluIGJ1aWxkYCk7CiAgICByZXR1cm4gcm91dGUubW9kdWxlLmhlYWRlcnM7CiAgfSk7Cn0KZnVuY3Rpb24gZ2V0RG9jdW1lbnRIZWFkZXJzSW1wbChjb250ZXh0LCBnZXRSb3V0ZUhlYWRlcnNGbiwgX2RlZmF1bHRIZWFkZXJzKSB7CiAgbGV0IGJvdW5kYXJ5SWR4ID0gY29udGV4dC5lcnJvcnMgPyBjb250ZXh0Lm1hdGNoZXMuZmluZEluZGV4KChtKSA9PiBjb250ZXh0LmVycm9yc1ttLnJvdXRlLmlkXSkgOiAtMTsKICBsZXQgbWF0Y2hlcyA9IGJvdW5kYXJ5SWR4ID49IDAgPyBjb250ZXh0Lm1hdGNoZXMuc2xpY2UoMCwgYm91bmRhcnlJZHggKyAxKSA6IGNvbnRleHQubWF0Y2hlczsKICBsZXQgZXJyb3JIZWFkZXJzOwogIGlmIChib3VuZGFyeUlkeCA+PSAwKSB7CiAgICBsZXQgeyBhY3Rpb25IZWFkZXJzLCBhY3Rpb25EYXRhLCBsb2FkZXJIZWFkZXJzLCBsb2FkZXJEYXRhIH0gPSBjb250ZXh0OwogICAgY29udGV4dC5tYXRjaGVzLnNsaWNlKGJvdW5kYXJ5SWR4KS5zb21lKChtYXRjaCkgPT4gewogICAgICBsZXQgaWQgPSBtYXRjaC5yb3V0ZS5pZDsKICAgICAgaWYgKGFjdGlvbkhlYWRlcnNbaWRdICYmICghYWN0aW9uRGF0YSB8fCAhYWN0aW9uRGF0YS5oYXNPd25Qcm9wZXJ0eShpZCkpKSB7CiAgICAgICAgZXJyb3JIZWFkZXJzID0gYWN0aW9uSGVhZGVyc1tpZF07CiAgICAgIH0gZWxzZSBpZiAobG9hZGVySGVhZGVyc1tpZF0gJiYgIWxvYWRlckRhdGEuaGFzT3duUHJvcGVydHkoaWQpKSB7CiAgICAgICAgZXJyb3JIZWFkZXJzID0gbG9hZGVySGVhZGVyc1tpZF07CiAgICAgIH0KICAgICAgcmV0dXJuIGVycm9ySGVhZGVycyAhPSBudWxsOwogICAgfSk7CiAgfQogIGNvbnN0IGRlZmF1bHRIZWFkZXJzID0gbmV3IEhlYWRlcnMoX2RlZmF1bHRIZWFkZXJzKTsKICByZXR1cm4gbWF0Y2hlcy5yZWR1Y2UoKHBhcmVudEhlYWRlcnMsIG1hdGNoLCBpZHgpID0+IHsKICAgIGxldCB7IGlkIH0gPSBtYXRjaC5yb3V0ZTsKICAgIGxldCBsb2FkZXJIZWFkZXJzID0gY29udGV4dC5sb2FkZXJIZWFkZXJzW2lkXSB8fCBuZXcgSGVhZGVycygpOwogICAgbGV0IGFjdGlvbkhlYWRlcnMgPSBjb250ZXh0LmFjdGlvbkhlYWRlcnNbaWRdIHx8IG5ldyBIZWFkZXJzKCk7CiAgICBsZXQgaW5jbHVkZUVycm9ySGVhZGVycyA9IGVycm9ySGVhZGVycyAhPSBudWxsICYmIGlkeCA9PT0gbWF0Y2hlcy5sZW5ndGggLSAxOwogICAgbGV0IGluY2x1ZGVFcnJvckNvb2tpZXMgPSBpbmNsdWRlRXJyb3JIZWFkZXJzICYmIGVycm9ySGVhZGVycyAhPT0gbG9hZGVySGVhZGVycyAmJiBlcnJvckhlYWRlcnMgIT09IGFjdGlvbkhlYWRlcnM7CiAgICBsZXQgaGVhZGVyc0ZuID0gZ2V0Um91dGVIZWFkZXJzRm4obWF0Y2gpOwogICAgaWYgKGhlYWRlcnNGbiA9PSBudWxsKSB7CiAgICAgIGxldCBoZWFkZXJzMiA9IG5ldyBIZWFkZXJzKHBhcmVudEhlYWRlcnMpOwogICAgICBpZiAoaW5jbHVkZUVycm9yQ29va2llcykgewogICAgICAgIHByZXBlbmRDb29raWVzKGVycm9ySGVhZGVycywgaGVhZGVyczIpOwogICAgICB9CiAgICAgIHByZXBlbmRDb29raWVzKGFjdGlvbkhlYWRlcnMsIGhlYWRlcnMyKTsKICAgICAgcHJlcGVuZENvb2tpZXMobG9hZGVySGVhZGVycywgaGVhZGVyczIpOwogICAgICByZXR1cm4gaGVhZGVyczI7CiAgICB9CiAgICBsZXQgaGVhZGVycyA9IG5ldyBIZWFkZXJzKAogICAgICB0eXBlb2YgaGVhZGVyc0ZuID09PSAiZnVuY3Rpb24iID8gaGVhZGVyc0ZuKHsKICAgICAgICBsb2FkZXJIZWFkZXJzLAogICAgICAgIHBhcmVudEhlYWRlcnMsCiAgICAgICAgYWN0aW9uSGVhZGVycywKICAgICAgICBlcnJvckhlYWRlcnM6IGluY2x1ZGVFcnJvckhlYWRlcnMgPyBlcnJvckhlYWRlcnMgOiB2b2lkIDAKICAgICAgfSkgOiBoZWFkZXJzRm4KICAgICk7CiAgICBpZiAoaW5jbHVkZUVycm9yQ29va2llcykgewogICAgICBwcmVwZW5kQ29va2llcyhlcnJvckhlYWRlcnMsIGhlYWRlcnMpOwogICAgfQogICAgcHJlcGVuZENvb2tpZXMoYWN0aW9uSGVhZGVycywgaGVhZGVycyk7CiAgICBwcmVwZW5kQ29va2llcyhsb2FkZXJIZWFkZXJzLCBoZWFkZXJzKTsKICAgIHByZXBlbmRDb29raWVzKHBhcmVudEhlYWRlcnMsIGhlYWRlcnMpOwogICAgcmV0dXJuIGhlYWRlcnM7CiAgfSwgbmV3IEhlYWRlcnMoZGVmYXVsdEhlYWRlcnMpKTsKfQpmdW5jdGlvbiBwcmVwZW5kQ29va2llcyhwYXJlbnRIZWFkZXJzLCBjaGlsZEhlYWRlcnMpIHsKICBsZXQgcGFyZW50U2V0Q29va2llU3RyaW5nID0gcGFyZW50SGVhZGVycy5nZXQoIlNldC1Db29raWUiKTsKICBpZiAocGFyZW50U2V0Q29va2llU3RyaW5nKSB7CiAgICBsZXQgY29va2llcyA9ICgwLCBpbXBvcnRfc2V0X2Nvb2tpZV9wYXJzZXIuc3BsaXRDb29raWVzU3RyaW5nKShwYXJlbnRTZXRDb29raWVTdHJpbmcpOwogICAgbGV0IGNoaWxkQ29va2llcyA9IG5ldyBTZXQoY2hpbGRIZWFkZXJzLmdldFNldENvb2tpZSgpKTsKICAgIGNvb2tpZXMuZm9yRWFjaCgoY29va2llKSA9PiB7CiAgICAgIGlmICghY2hpbGRDb29raWVzLmhhcyhjb29raWUpKSB7CiAgICAgICAgY2hpbGRIZWFkZXJzLmFwcGVuZCgiU2V0LUNvb2tpZSIsIGNvb2tpZSk7CiAgICAgIH0KICAgIH0pOwogIH0KfQp2YXIgU0VSVkVSX05PX0JPRFlfU1RBVFVTX0NPREVTID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoWwogIC4uLk5PX0JPRFlfU1RBVFVTX0NPREVTLAogIDMwNApdKTsKYXN5bmMgZnVuY3Rpb24gc2luZ2xlRmV0Y2hBY3Rpb24oYnVpbGQsIHNlcnZlck1vZGUsIHN0YXRpY0hhbmRsZXIsIHJlcXVlc3QsIGhhbmRsZXJVcmwsIGxvYWRDb250ZXh0LCBoYW5kbGVFcnJvcikgewogIHRyeSB7CiAgICBsZXQgaGFuZGxlclJlcXVlc3QgPSBuZXcgUmVxdWVzdChoYW5kbGVyVXJsLCB7CiAgICAgIG1ldGhvZDogcmVxdWVzdC5tZXRob2QsCiAgICAgIGJvZHk6IHJlcXVlc3QuYm9keSwKICAgICAgaGVhZGVyczogcmVxdWVzdC5oZWFkZXJzLAogICAgICBzaWduYWw6IHJlcXVlc3Quc2lnbmFsLAogICAgICAuLi5yZXF1ZXN0LmJvZHkgPyB7IGR1cGxleDogImhhbGYiIH0gOiB2b2lkIDAKICAgIH0pOwogICAgbGV0IHJlc3VsdCA9IGF3YWl0IHN0YXRpY0hhbmRsZXIucXVlcnkoaGFuZGxlclJlcXVlc3QsIHsKICAgICAgcmVxdWVzdENvbnRleHQ6IGxvYWRDb250ZXh0LAogICAgICBza2lwTG9hZGVyRXJyb3JCdWJibGluZzogdHJ1ZSwKICAgICAgc2tpcFJldmFsaWRhdGlvbjogdHJ1ZSwKICAgICAgZ2VuZXJhdGVNaWRkbGV3YXJlUmVzcG9uc2U6IGJ1aWxkLmZ1dHVyZS52OF9taWRkbGV3YXJlID8gYXN5bmMgKHF1ZXJ5KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGxldCBpbm5lclJlc3VsdCA9IGF3YWl0IHF1ZXJ5KGhhbmRsZXJSZXF1ZXN0KTsKICAgICAgICAgIHJldHVybiBoYW5kbGVRdWVyeVJlc3VsdChpbm5lclJlc3VsdCk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIHJldHVybiBoYW5kbGVRdWVyeUVycm9yKGVycm9yKTsKICAgICAgICB9CiAgICAgIH0gOiB2b2lkIDAKICAgIH0pOwogICAgcmV0dXJuIGhhbmRsZVF1ZXJ5UmVzdWx0KHJlc3VsdCk7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIHJldHVybiBoYW5kbGVRdWVyeUVycm9yKGVycm9yKTsKICB9CiAgZnVuY3Rpb24gaGFuZGxlUXVlcnlSZXN1bHQocmVzdWx0KSB7CiAgICByZXR1cm4gaXNSZXNwb25zZShyZXN1bHQpID8gcmVzdWx0IDogc3RhdGljQ29udGV4dFRvUmVzcG9uc2UocmVzdWx0KTsKICB9CiAgZnVuY3Rpb24gaGFuZGxlUXVlcnlFcnJvcihlcnJvcikgewogICAgaGFuZGxlRXJyb3IoZXJyb3IpOwogICAgcmV0dXJuIGdlbmVyYXRlU2luZ2xlRmV0Y2hSZXNwb25zZShyZXF1ZXN0LCBidWlsZCwgc2VydmVyTW9kZSwgewogICAgICByZXN1bHQ6IHsgZXJyb3IgfSwKICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnMoKSwKICAgICAgc3RhdHVzOiA1MDAKICAgIH0pOwogIH0KICBmdW5jdGlvbiBzdGF0aWNDb250ZXh0VG9SZXNwb25zZShjb250ZXh0KSB7CiAgICBsZXQgaGVhZGVycyA9IGdldERvY3VtZW50SGVhZGVycyhjb250ZXh0LCBidWlsZCk7CiAgICBpZiAoaXNSZWRpcmVjdFN0YXR1c0NvZGUoY29udGV4dC5zdGF0dXNDb2RlKSAmJiBoZWFkZXJzLmhhcygiTG9jYXRpb24iKSkgewogICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHsgc3RhdHVzOiBjb250ZXh0LnN0YXR1c0NvZGUsIGhlYWRlcnMgfSk7CiAgICB9CiAgICBpZiAoY29udGV4dC5lcnJvcnMpIHsKICAgICAgT2JqZWN0LnZhbHVlcyhjb250ZXh0LmVycm9ycykuZm9yRWFjaCgoZXJyKSA9PiB7CiAgICAgICAgaWYgKCFpc1JvdXRlRXJyb3JSZXNwb25zZShlcnIpIHx8IGVyci5lcnJvcikgewogICAgICAgICAgaGFuZGxlRXJyb3IoZXJyKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBjb250ZXh0LmVycm9ycyA9IHNhbml0aXplRXJyb3JzKGNvbnRleHQuZXJyb3JzLCBzZXJ2ZXJNb2RlKTsKICAgIH0KICAgIGxldCBzaW5nbGVGZXRjaFJlc3VsdDsKICAgIGlmIChjb250ZXh0LmVycm9ycykgewogICAgICBzaW5nbGVGZXRjaFJlc3VsdCA9IHsgZXJyb3I6IE9iamVjdC52YWx1ZXMoY29udGV4dC5lcnJvcnMpWzBdIH07CiAgICB9IGVsc2UgewogICAgICBzaW5nbGVGZXRjaFJlc3VsdCA9IHsKICAgICAgICBkYXRhOiBPYmplY3QudmFsdWVzKGNvbnRleHQuYWN0aW9uRGF0YSB8fCB7fSlbMF0KICAgICAgfTsKICAgIH0KICAgIHJldHVybiBnZW5lcmF0ZVNpbmdsZUZldGNoUmVzcG9uc2UocmVxdWVzdCwgYnVpbGQsIHNlcnZlck1vZGUsIHsKICAgICAgcmVzdWx0OiBzaW5nbGVGZXRjaFJlc3VsdCwKICAgICAgaGVhZGVycywKICAgICAgc3RhdHVzOiBjb250ZXh0LnN0YXR1c0NvZGUKICAgIH0pOwogIH0KfQphc3luYyBmdW5jdGlvbiBzaW5nbGVGZXRjaExvYWRlcnMoYnVpbGQsIHNlcnZlck1vZGUsIHN0YXRpY0hhbmRsZXIsIHJlcXVlc3QsIGhhbmRsZXJVcmwsIGxvYWRDb250ZXh0LCBoYW5kbGVFcnJvcikgewogIGxldCByb3V0ZXNQYXJhbSA9IG5ldyBVUkwocmVxdWVzdC51cmwpLnNlYXJjaFBhcmFtcy5nZXQoIl9yb3V0ZXMiKTsKICBsZXQgbG9hZFJvdXRlSWRzID0gcm91dGVzUGFyYW0gPyBuZXcgU2V0KHJvdXRlc1BhcmFtLnNwbGl0KCIsIikpIDogbnVsbDsKICB0cnkgewogICAgbGV0IGhhbmRsZXJSZXF1ZXN0ID0gbmV3IFJlcXVlc3QoaGFuZGxlclVybCwgewogICAgICBoZWFkZXJzOiByZXF1ZXN0LmhlYWRlcnMsCiAgICAgIHNpZ25hbDogcmVxdWVzdC5zaWduYWwKICAgIH0pOwogICAgbGV0IHJlc3VsdCA9IGF3YWl0IHN0YXRpY0hhbmRsZXIucXVlcnkoaGFuZGxlclJlcXVlc3QsIHsKICAgICAgcmVxdWVzdENvbnRleHQ6IGxvYWRDb250ZXh0LAogICAgICBmaWx0ZXJNYXRjaGVzVG9Mb2FkOiAobSkgPT4gIWxvYWRSb3V0ZUlkcyB8fCBsb2FkUm91dGVJZHMuaGFzKG0ucm91dGUuaWQpLAogICAgICBza2lwTG9hZGVyRXJyb3JCdWJibGluZzogdHJ1ZSwKICAgICAgZ2VuZXJhdGVNaWRkbGV3YXJlUmVzcG9uc2U6IGJ1aWxkLmZ1dHVyZS52OF9taWRkbGV3YXJlID8gYXN5bmMgKHF1ZXJ5KSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGxldCBpbm5lclJlc3VsdCA9IGF3YWl0IHF1ZXJ5KGhhbmRsZXJSZXF1ZXN0KTsKICAgICAgICAgIHJldHVybiBoYW5kbGVRdWVyeVJlc3VsdChpbm5lclJlc3VsdCk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIHJldHVybiBoYW5kbGVRdWVyeUVycm9yKGVycm9yKTsKICAgICAgICB9CiAgICAgIH0gOiB2b2lkIDAKICAgIH0pOwogICAgcmV0dXJuIGhhbmRsZVF1ZXJ5UmVzdWx0KHJlc3VsdCk7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIHJldHVybiBoYW5kbGVRdWVyeUVycm9yKGVycm9yKTsKICB9CiAgZnVuY3Rpb24gaGFuZGxlUXVlcnlSZXN1bHQocmVzdWx0KSB7CiAgICByZXR1cm4gaXNSZXNwb25zZShyZXN1bHQpID8gcmVzdWx0IDogc3RhdGljQ29udGV4dFRvUmVzcG9uc2UocmVzdWx0KTsKICB9CiAgZnVuY3Rpb24gaGFuZGxlUXVlcnlFcnJvcihlcnJvcikgewogICAgaGFuZGxlRXJyb3IoZXJyb3IpOwogICAgcmV0dXJuIGdlbmVyYXRlU2luZ2xlRmV0Y2hSZXNwb25zZShyZXF1ZXN0LCBidWlsZCwgc2VydmVyTW9kZSwgewogICAgICByZXN1bHQ6IHsgZXJyb3IgfSwKICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnMoKSwKICAgICAgc3RhdHVzOiA1MDAKICAgIH0pOwogIH0KICBmdW5jdGlvbiBzdGF0aWNDb250ZXh0VG9SZXNwb25zZShjb250ZXh0KSB7CiAgICBsZXQgaGVhZGVycyA9IGdldERvY3VtZW50SGVhZGVycyhjb250ZXh0LCBidWlsZCk7CiAgICBpZiAoaXNSZWRpcmVjdFN0YXR1c0NvZGUoY29udGV4dC5zdGF0dXNDb2RlKSAmJiBoZWFkZXJzLmhhcygiTG9jYXRpb24iKSkgewogICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHsgc3RhdHVzOiBjb250ZXh0LnN0YXR1c0NvZGUsIGhlYWRlcnMgfSk7CiAgICB9CiAgICBpZiAoY29udGV4dC5lcnJvcnMpIHsKICAgICAgT2JqZWN0LnZhbHVlcyhjb250ZXh0LmVycm9ycykuZm9yRWFjaCgoZXJyKSA9PiB7CiAgICAgICAgaWYgKCFpc1JvdXRlRXJyb3JSZXNwb25zZShlcnIpIHx8IGVyci5lcnJvcikgewogICAgICAgICAgaGFuZGxlRXJyb3IoZXJyKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBjb250ZXh0LmVycm9ycyA9IHNhbml0aXplRXJyb3JzKGNvbnRleHQuZXJyb3JzLCBzZXJ2ZXJNb2RlKTsKICAgIH0KICAgIGxldCByZXN1bHRzID0ge307CiAgICBsZXQgbG9hZGVkTWF0Y2hlcyA9IG5ldyBTZXQoCiAgICAgIGNvbnRleHQubWF0Y2hlcy5maWx0ZXIoCiAgICAgICAgKG0pID0+IGxvYWRSb3V0ZUlkcyA/IGxvYWRSb3V0ZUlkcy5oYXMobS5yb3V0ZS5pZCkgOiBtLnJvdXRlLmxvYWRlciAhPSBudWxsCiAgICAgICkubWFwKChtKSA9PiBtLnJvdXRlLmlkKQogICAgKTsKICAgIGlmIChjb250ZXh0LmVycm9ycykgewogICAgICBmb3IgKGxldCBbaWQsIGVycm9yXSBvZiBPYmplY3QuZW50cmllcyhjb250ZXh0LmVycm9ycykpIHsKICAgICAgICByZXN1bHRzW2lkXSA9IHsgZXJyb3IgfTsKICAgICAgfQogICAgfQogICAgZm9yIChsZXQgW2lkLCBkYXRhMl0gb2YgT2JqZWN0LmVudHJpZXMoY29udGV4dC5sb2FkZXJEYXRhKSkgewogICAgICBpZiAoIShpZCBpbiByZXN1bHRzKSAmJiBsb2FkZWRNYXRjaGVzLmhhcyhpZCkpIHsKICAgICAgICByZXN1bHRzW2lkXSA9IHsgZGF0YTogZGF0YTIgfTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGdlbmVyYXRlU2luZ2xlRmV0Y2hSZXNwb25zZShyZXF1ZXN0LCBidWlsZCwgc2VydmVyTW9kZSwgewogICAgICByZXN1bHQ6IHJlc3VsdHMsCiAgICAgIGhlYWRlcnMsCiAgICAgIHN0YXR1czogY29udGV4dC5zdGF0dXNDb2RlCiAgICB9KTsKICB9Cn0KZnVuY3Rpb24gZ2VuZXJhdGVTaW5nbGVGZXRjaFJlc3BvbnNlKHJlcXVlc3QsIGJ1aWxkLCBzZXJ2ZXJNb2RlLCB7CiAgcmVzdWx0LAogIGhlYWRlcnMsCiAgc3RhdHVzCn0pIHsKICBsZXQgcmVzdWx0SGVhZGVycyA9IG5ldyBIZWFkZXJzKGhlYWRlcnMpOwogIHJlc3VsdEhlYWRlcnMuc2V0KCJYLVJlbWl4LVJlc3BvbnNlIiwgInllcyIpOwogIGlmIChTRVJWRVJfTk9fQk9EWV9TVEFUVVNfQ09ERVMuaGFzKHN0YXR1cykpIHsKICAgIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwgeyBzdGF0dXMsIGhlYWRlcnM6IHJlc3VsdEhlYWRlcnMgfSk7CiAgfQogIHJlc3VsdEhlYWRlcnMuc2V0KCJDb250ZW50LVR5cGUiLCAidGV4dC94LXNjcmlwdCIpOwogIHJlc3VsdEhlYWRlcnMuZGVsZXRlKCJDb250ZW50LUxlbmd0aCIpOwogIHJldHVybiBuZXcgUmVzcG9uc2UoCiAgICBlbmNvZGVWaWFUdXJib1N0cmVhbSgKICAgICAgcmVzdWx0LAogICAgICByZXF1ZXN0LnNpZ25hbCwKICAgICAgYnVpbGQuZW50cnkubW9kdWxlLnN0cmVhbVRpbWVvdXQsCiAgICAgIHNlcnZlck1vZGUKICAgICksCiAgICB7CiAgICAgIHN0YXR1czogc3RhdHVzIHx8IDIwMCwKICAgICAgaGVhZGVyczogcmVzdWx0SGVhZGVycwogICAgfQogICk7Cn0KZnVuY3Rpb24gZ2VuZXJhdGVTaW5nbGVGZXRjaFJlZGlyZWN0UmVzcG9uc2UocmVkaXJlY3RSZXNwb25zZSwgcmVxdWVzdCwgYnVpbGQsIHNlcnZlck1vZGUpIHsKICBsZXQgcmVkaXJlY3QyID0gZ2V0U2luZ2xlRmV0Y2hSZWRpcmVjdCgKICAgIHJlZGlyZWN0UmVzcG9uc2Uuc3RhdHVzLAogICAgcmVkaXJlY3RSZXNwb25zZS5oZWFkZXJzLAogICAgYnVpbGQuYmFzZW5hbWUKICApOwogIGxldCBoZWFkZXJzID0gbmV3IEhlYWRlcnMocmVkaXJlY3RSZXNwb25zZS5oZWFkZXJzKTsKICBoZWFkZXJzLmRlbGV0ZSgiTG9jYXRpb24iKTsKICBoZWFkZXJzLnNldCgiQ29udGVudC1UeXBlIiwgInRleHQveC1zY3JpcHQiKTsKICByZXR1cm4gZ2VuZXJhdGVTaW5nbGVGZXRjaFJlc3BvbnNlKHJlcXVlc3QsIGJ1aWxkLCBzZXJ2ZXJNb2RlLCB7CiAgICByZXN1bHQ6IHJlcXVlc3QubWV0aG9kID09PSAiR0VUIiA/IHsgW1NpbmdsZUZldGNoUmVkaXJlY3RTeW1ib2xdOiByZWRpcmVjdDIgfSA6IHJlZGlyZWN0MiwKICAgIGhlYWRlcnMsCiAgICBzdGF0dXM6IFNJTkdMRV9GRVRDSF9SRURJUkVDVF9TVEFUVVMKICB9KTsKfQpmdW5jdGlvbiBnZXRTaW5nbGVGZXRjaFJlZGlyZWN0KHN0YXR1cywgaGVhZGVycywgYmFzZW5hbWUpIHsKICBsZXQgcmVkaXJlY3QyID0gaGVhZGVycy5nZXQoIkxvY2F0aW9uIik7CiAgaWYgKGJhc2VuYW1lKSB7CiAgICByZWRpcmVjdDIgPSBzdHJpcEJhc2VuYW1lKHJlZGlyZWN0MiwgYmFzZW5hbWUpIHx8IHJlZGlyZWN0MjsKICB9CiAgcmV0dXJuIHsKICAgIHJlZGlyZWN0OiByZWRpcmVjdDIsCiAgICBzdGF0dXMsCiAgICByZXZhbGlkYXRlOiAoCiAgICAgIC8vIFRlY2huaWNhbGx5IFgtUmVtaXgtUmV2YWxpZGF0ZSBpc24ndCBuZWVkZWQgaGVyZSAtIHRoYXQgd2FzIGFuIGltcGxlbWVudGF0aW9uCiAgICAgIC8vIGRldGFpbCBvZiA/X2RhdGEgcmVxdWVzdHMgYXMgb3VyIHdheSB0byB0ZWxsIHRoZSBmcm9udCBlbmQgdG8gcmV2YWxpZGF0ZSB3aGVuCiAgICAgIC8vIHdlIGRpZG4ndCBoYXZlIGEgcmVzcG9uc2UgYm9keSB0byBpbmNsdWRlIHRoYXQgaW5mb3JtYXRpb24gaW4uCiAgICAgIC8vIFdpdGggc2luZ2xlIGZldGNoLCB3ZSB0ZWxsIHRoZSBmcm9udCBlbmQgdmlhIHRoaXMgcmV2YWxpZGF0ZSBib29sZWFuIGZpZWxkLgogICAgICAvLyBIb3dldmVyLCB3ZSdyZSByZXNwZWN0aW5nIGl0IGZvciBub3cgYmVjYXVzZSBpdCBtYXkgYmUgc29tZXRoaW5nIGZvbGtzIGhhdmUKICAgICAgLy8gdXNlZCBpbiB0aGVpciBvd24gcmVzcG9uc2VzCiAgICAgIC8vIFRPRE8odjMpOiBDb25zaWRlciByZW1vdmluZyBvciBtYWtpbmcgdGhpcyBvZmZpY2lhbCBwdWJsaWMgQVBJCiAgICAgIGhlYWRlcnMuaGFzKCJYLVJlbWl4LVJldmFsaWRhdGUiKSB8fCBoZWFkZXJzLmhhcygiU2V0LUNvb2tpZSIpCiAgICApLAogICAgcmVsb2FkOiBoZWFkZXJzLmhhcygiWC1SZW1peC1SZWxvYWQtRG9jdW1lbnQiKSwKICAgIHJlcGxhY2U6IGhlYWRlcnMuaGFzKCJYLVJlbWl4LVJlcGxhY2UiKQogIH07Cn0KZnVuY3Rpb24gZW5jb2RlVmlhVHVyYm9TdHJlYW0oZGF0YTIsIHJlcXVlc3RTaWduYWwsIHN0cmVhbVRpbWVvdXQsIHNlcnZlck1vZGUpIHsKICBsZXQgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTsKICBsZXQgdGltZW91dElkID0gc2V0VGltZW91dCgKICAgICgpID0+IGNvbnRyb2xsZXIuYWJvcnQobmV3IEVycm9yKCJTZXJ2ZXIgVGltZW91dCIpKSwKICAgIHR5cGVvZiBzdHJlYW1UaW1lb3V0ID09PSAibnVtYmVyIiA/IHN0cmVhbVRpbWVvdXQgOiA0OTUwCiAgKTsKICByZXF1ZXN0U2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoImFib3J0IiwgKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCkpOwogIHJldHVybiBlbmNvZGUoZGF0YTIsIHsKICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWwsCiAgICBwbHVnaW5zOiBbCiAgICAgICh2YWx1ZSkgPT4gewogICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEVycm9yKSB7CiAgICAgICAgICBsZXQgeyBuYW1lLCBtZXNzYWdlLCBzdGFjayB9ID0gc2VydmVyTW9kZSA9PT0gInByb2R1Y3Rpb24iID8gc2FuaXRpemVFcnJvcih2YWx1ZSwgc2VydmVyTW9kZSkgOiB2YWx1ZTsKICAgICAgICAgIHJldHVybiBbIlNhbml0aXplZEVycm9yIiwgbmFtZSwgbWVzc2FnZSwgc3RhY2tdOwogICAgICAgIH0KICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBFcnJvclJlc3BvbnNlSW1wbCkgewogICAgICAgICAgbGV0IHsgZGF0YTogZGF0YTMsIHN0YXR1cywgc3RhdHVzVGV4dCB9ID0gdmFsdWU7CiAgICAgICAgICByZXR1cm4gWyJFcnJvclJlc3BvbnNlIiwgZGF0YTMsIHN0YXR1cywgc3RhdHVzVGV4dF07CiAgICAgICAgfQogICAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICJvYmplY3QiICYmIFNpbmdsZUZldGNoUmVkaXJlY3RTeW1ib2wgaW4gdmFsdWUpIHsKICAgICAgICAgIHJldHVybiBbIlNpbmdsZUZldGNoUmVkaXJlY3QiLCB2YWx1ZVtTaW5nbGVGZXRjaFJlZGlyZWN0U3ltYm9sXV07CiAgICAgICAgfQogICAgICB9CiAgICBdLAogICAgcG9zdFBsdWdpbnM6IFsKICAgICAgKHZhbHVlKSA9PiB7CiAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuOwogICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICJvYmplY3QiKSByZXR1cm47CiAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICJTaW5nbGVGZXRjaENsYXNzSW5zdGFuY2UiLAogICAgICAgICAgT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKHZhbHVlKSkKICAgICAgICBdOwogICAgICB9LAogICAgICAoKSA9PiBbIlNpbmdsZUZldGNoRmFsbGJhY2siXQogICAgXQogIH0pOwp9CmZ1bmN0aW9uIGRlcml2ZShidWlsZCwgbW9kZSkgewogIGxldCByb3V0ZXMgPSBjcmVhdGVSb3V0ZXMoYnVpbGQucm91dGVzKTsKICBsZXQgZGF0YVJvdXRlcyA9IGNyZWF0ZVN0YXRpY0hhbmRsZXJEYXRhUm91dGVzKGJ1aWxkLnJvdXRlcywgYnVpbGQuZnV0dXJlKTsKICBsZXQgc2VydmVyTW9kZSA9IGlzU2VydmVyTW9kZShtb2RlKSA/IG1vZGUgOiAicHJvZHVjdGlvbiI7CiAgbGV0IHN0YXRpY0hhbmRsZXIgPSBjcmVhdGVTdGF0aWNIYW5kbGVyKGRhdGFSb3V0ZXMsIHsKICAgIGJhc2VuYW1lOiBidWlsZC5iYXNlbmFtZQogIH0pOwogIGxldCBlcnJvckhhbmRsZXIgPSBidWlsZC5lbnRyeS5tb2R1bGUuaGFuZGxlRXJyb3IgfHwgKChlcnJvciwgeyByZXF1ZXN0IH0pID0+IHsKICAgIGlmIChzZXJ2ZXJNb2RlICE9PSAidGVzdCIgJiYgIXJlcXVlc3Quc2lnbmFsLmFib3J0ZWQpIHsKICAgICAgY29uc29sZS5lcnJvcigKICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRoaXMgaXMgInByaXZhdGUiIGZyb20gdXNlcnMgYnV0IGludGVuZGVkIGZvciBpbnRlcm5hbCB1c2UKICAgICAgICBpc1JvdXRlRXJyb3JSZXNwb25zZShlcnJvcikgJiYgZXJyb3IuZXJyb3IgPyBlcnJvci5lcnJvciA6IGVycm9yCiAgICAgICk7CiAgICB9CiAgfSk7CiAgcmV0dXJuIHsKICAgIHJvdXRlcywKICAgIGRhdGFSb3V0ZXMsCiAgICBzZXJ2ZXJNb2RlLAogICAgc3RhdGljSGFuZGxlciwKICAgIGVycm9ySGFuZGxlcgogIH07Cn0KdmFyIGNyZWF0ZVJlcXVlc3RIYW5kbGVyID0gKGJ1aWxkLCBtb2RlKSA9PiB7CiAgbGV0IF9idWlsZDsKICBsZXQgcm91dGVzOwogIGxldCBzZXJ2ZXJNb2RlOwogIGxldCBzdGF0aWNIYW5kbGVyOwogIGxldCBlcnJvckhhbmRsZXI7CiAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RIYW5kbGVyKHJlcXVlc3QsIGluaXRpYWxDb250ZXh0KSB7CiAgICB2YXIgX2EsIF9iLCBfYzsKICAgIF9idWlsZCA9IHR5cGVvZiBidWlsZCA9PT0gImZ1bmN0aW9uIiA/IGF3YWl0IGJ1aWxkKCkgOiBidWlsZDsKICAgIGlmICh0eXBlb2YgYnVpbGQgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgbGV0IGRlcml2ZWQgPSBkZXJpdmUoX2J1aWxkLCBtb2RlKTsKICAgICAgcm91dGVzID0gZGVyaXZlZC5yb3V0ZXM7CiAgICAgIHNlcnZlck1vZGUgPSBkZXJpdmVkLnNlcnZlck1vZGU7CiAgICAgIHN0YXRpY0hhbmRsZXIgPSBkZXJpdmVkLnN0YXRpY0hhbmRsZXI7CiAgICAgIGVycm9ySGFuZGxlciA9IGRlcml2ZWQuZXJyb3JIYW5kbGVyOwogICAgfSBlbHNlIGlmICghcm91dGVzIHx8ICFzZXJ2ZXJNb2RlIHx8ICFzdGF0aWNIYW5kbGVyIHx8ICFlcnJvckhhbmRsZXIpIHsKICAgICAgbGV0IGRlcml2ZWQgPSBkZXJpdmUoX2J1aWxkLCBtb2RlKTsKICAgICAgcm91dGVzID0gZGVyaXZlZC5yb3V0ZXM7CiAgICAgIHNlcnZlck1vZGUgPSBkZXJpdmVkLnNlcnZlck1vZGU7CiAgICAgIHN0YXRpY0hhbmRsZXIgPSBkZXJpdmVkLnN0YXRpY0hhbmRsZXI7CiAgICAgIGVycm9ySGFuZGxlciA9IGRlcml2ZWQuZXJyb3JIYW5kbGVyOwogICAgfQogICAgbGV0IHBhcmFtcyA9IHt9OwogICAgbGV0IGxvYWRDb250ZXh0OwogICAgbGV0IGhhbmRsZUVycm9yID0gKGVycm9yKSA9PiB7CiAgICAgIHZhciBfYTIsIF9iMjsKICAgICAgaWYgKG1vZGUgPT09ICJkZXZlbG9wbWVudCIpIHsKICAgICAgICAoX2IyID0gKF9hMiA9IGdldERldlNlcnZlckhvb2tzKCkpID09IG51bGwgPyB2b2lkIDAgOiBfYTIucHJvY2Vzc1JlcXVlc3RFcnJvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMi5jYWxsKF9hMiwgZXJyb3IpOwogICAgICB9CiAgICAgIGVycm9ySGFuZGxlcihlcnJvciwgewogICAgICAgIGNvbnRleHQ6IGxvYWRDb250ZXh0LAogICAgICAgIHBhcmFtcywKICAgICAgICByZXF1ZXN0CiAgICAgIH0pOwogICAgfTsKICAgIGlmIChfYnVpbGQuZnV0dXJlLnY4X21pZGRsZXdhcmUpIHsKICAgICAgaWYgKGluaXRpYWxDb250ZXh0ICYmICEoaW5pdGlhbENvbnRleHQgaW5zdGFuY2VvZiBSb3V0ZXJDb250ZXh0UHJvdmlkZXIpKSB7CiAgICAgICAgbGV0IGVycm9yID0gbmV3IEVycm9yKAogICAgICAgICAgIkludmFsaWQgYGNvbnRleHRgIHZhbHVlIHByb3ZpZGVkIHRvIGBoYW5kbGVSZXF1ZXN0YC4gV2hlbiBtaWRkbGV3YXJlIGlzIGVuYWJsZWQgeW91IG11c3QgcmV0dXJuIGFuIGluc3RhbmNlIG9mIGBSb3V0ZXJDb250ZXh0UHJvdmlkZXJgIGZyb20geW91ciBgZ2V0TG9hZENvbnRleHRgIGZ1bmN0aW9uLiIKICAgICAgICApOwogICAgICAgIGhhbmRsZUVycm9yKGVycm9yKTsKICAgICAgICByZXR1cm4gcmV0dXJuTGFzdFJlc29ydEVycm9yUmVzcG9uc2UoZXJyb3IsIHNlcnZlck1vZGUpOwogICAgICB9CiAgICAgIGxvYWRDb250ZXh0ID0gaW5pdGlhbENvbnRleHQgfHwgbmV3IFJvdXRlckNvbnRleHRQcm92aWRlcigpOwogICAgfSBlbHNlIHsKICAgICAgbG9hZENvbnRleHQgPSBpbml0aWFsQ29udGV4dCB8fCB7fTsKICAgIH0KICAgIGxldCB1cmwgPSBuZXcgVVJMKHJlcXVlc3QudXJsKTsKICAgIGxldCBub3JtYWxpemVkQmFzZW5hbWUgPSBfYnVpbGQuYmFzZW5hbWUgfHwgIi8iOwogICAgbGV0IG5vcm1hbGl6ZWRQYXRoID0gdXJsLnBhdGhuYW1lOwogICAgaWYgKHN0cmlwQmFzZW5hbWUobm9ybWFsaXplZFBhdGgsIG5vcm1hbGl6ZWRCYXNlbmFtZSkgPT09ICIvX3Jvb3QuZGF0YSIpIHsKICAgICAgbm9ybWFsaXplZFBhdGggPSBub3JtYWxpemVkQmFzZW5hbWU7CiAgICB9IGVsc2UgaWYgKG5vcm1hbGl6ZWRQYXRoLmVuZHNXaXRoKCIuZGF0YSIpKSB7CiAgICAgIG5vcm1hbGl6ZWRQYXRoID0gbm9ybWFsaXplZFBhdGgucmVwbGFjZSgvXC5kYXRhJC8sICIiKTsKICAgIH0KICAgIGlmIChzdHJpcEJhc2VuYW1lKG5vcm1hbGl6ZWRQYXRoLCBub3JtYWxpemVkQmFzZW5hbWUpICE9PSAiLyIgJiYgbm9ybWFsaXplZFBhdGguZW5kc1dpdGgoIi8iKSkgewogICAgICBub3JtYWxpemVkUGF0aCA9IG5vcm1hbGl6ZWRQYXRoLnNsaWNlKDAsIC0xKTsKICAgIH0KICAgIGxldCBpc1NwYU1vZGUgPSBnZXRCdWlsZFRpbWVIZWFkZXIocmVxdWVzdCwgIlgtUmVhY3QtUm91dGVyLVNQQS1Nb2RlIikgPT09ICJ5ZXMiOwogICAgaWYgKCFfYnVpbGQuc3NyKSB7CiAgICAgIGxldCBkZWNvZGVkUGF0aCA9IGRlY29kZVVSSShub3JtYWxpemVkUGF0aCk7CiAgICAgIGlmIChub3JtYWxpemVkQmFzZW5hbWUgIT09ICIvIikgewogICAgICAgIGxldCBzdHJpcHBlZFBhdGggPSBzdHJpcEJhc2VuYW1lKGRlY29kZWRQYXRoLCBub3JtYWxpemVkQmFzZW5hbWUpOwogICAgICAgIGlmIChzdHJpcHBlZFBhdGggPT0gbnVsbCkgewogICAgICAgICAgZXJyb3JIYW5kbGVyKAogICAgICAgICAgICBuZXcgRXJyb3JSZXNwb25zZUltcGwoCiAgICAgICAgICAgICAgNDA0LAogICAgICAgICAgICAgICJOb3QgRm91bmQiLAogICAgICAgICAgICAgIGBSZWZ1c2luZyB0byBwcmVyZW5kZXIgdGhlIFxgJHtkZWNvZGVkUGF0aH1cYCBwYXRoIGJlY2F1c2UgaXQgZG9lcyBub3Qgc3RhcnQgd2l0aCB0aGUgYmFzZW5hbWUgXGAke25vcm1hbGl6ZWRCYXNlbmFtZX1cYGAKICAgICAgICAgICAgKSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGNvbnRleHQ6IGxvYWRDb250ZXh0LAogICAgICAgICAgICAgIHBhcmFtcywKICAgICAgICAgICAgICByZXF1ZXN0CiAgICAgICAgICAgIH0KICAgICAgICAgICk7CiAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKCJOb3QgRm91bmQiLCB7CiAgICAgICAgICAgIHN0YXR1czogNDA0LAogICAgICAgICAgICBzdGF0dXNUZXh0OiAiTm90IEZvdW5kIgogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGRlY29kZWRQYXRoID0gc3RyaXBwZWRQYXRoOwogICAgICB9CiAgICAgIGlmIChfYnVpbGQucHJlcmVuZGVyLmxlbmd0aCA9PT0gMCkgewogICAgICAgIGlzU3BhTW9kZSA9IHRydWU7CiAgICAgIH0gZWxzZSBpZiAoIV9idWlsZC5wcmVyZW5kZXIuaW5jbHVkZXMoZGVjb2RlZFBhdGgpICYmICFfYnVpbGQucHJlcmVuZGVyLmluY2x1ZGVzKGRlY29kZWRQYXRoICsgIi8iKSkgewogICAgICAgIGlmICh1cmwucGF0aG5hbWUuZW5kc1dpdGgoIi5kYXRhIikpIHsKICAgICAgICAgIGVycm9ySGFuZGxlcigKICAgICAgICAgICAgbmV3IEVycm9yUmVzcG9uc2VJbXBsKAogICAgICAgICAgICAgIDQwNCwKICAgICAgICAgICAgICAiTm90IEZvdW5kIiwKICAgICAgICAgICAgICBgUmVmdXNpbmcgdG8gU1NSIHRoZSBwYXRoIFxgJHtkZWNvZGVkUGF0aH1cYCBiZWNhdXNlIFxgc3NyOmZhbHNlXGAgaXMgc2V0IGFuZCB0aGUgcGF0aCBpcyBub3QgaW5jbHVkZWQgaW4gdGhlIFxgcHJlcmVuZGVyXGAgY29uZmlnLCBzbyBpbiBwcm9kdWN0aW9uIHRoZSBwYXRoIHdpbGwgYmUgYSA0MDQuYAogICAgICAgICAgICApLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY29udGV4dDogbG9hZENvbnRleHQsCiAgICAgICAgICAgICAgcGFyYW1zLAogICAgICAgICAgICAgIHJlcXVlc3QKICAgICAgICAgICAgfQogICAgICAgICAgKTsKICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoIk5vdCBGb3VuZCIsIHsKICAgICAgICAgICAgc3RhdHVzOiA0MDQsCiAgICAgICAgICAgIHN0YXR1c1RleHQ6ICJOb3QgRm91bmQiCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaXNTcGFNb2RlID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGxldCBtYW5pZmVzdFVybCA9IGdldE1hbmlmZXN0UGF0aCgKICAgICAgX2J1aWxkLnJvdXRlRGlzY292ZXJ5Lm1hbmlmZXN0UGF0aCwKICAgICAgbm9ybWFsaXplZEJhc2VuYW1lCiAgICApOwogICAgaWYgKHVybC5wYXRobmFtZSA9PT0gbWFuaWZlc3RVcmwpIHsKICAgICAgdHJ5IHsKICAgICAgICBsZXQgcmVzID0gYXdhaXQgaGFuZGxlTWFuaWZlc3RSZXF1ZXN0KF9idWlsZCwgcm91dGVzLCB1cmwpOwogICAgICAgIHJldHVybiByZXM7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBoYW5kbGVFcnJvcihlKTsKICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKCJVbmtub3duIFNlcnZlciBFcnJvciIsIHsgc3RhdHVzOiA1MDAgfSk7CiAgICAgIH0KICAgIH0KICAgIGxldCBtYXRjaGVzID0gbWF0Y2hTZXJ2ZXJSb3V0ZXMocm91dGVzLCBub3JtYWxpemVkUGF0aCwgX2J1aWxkLmJhc2VuYW1lKTsKICAgIGlmIChtYXRjaGVzICYmIG1hdGNoZXMubGVuZ3RoID4gMCkgewogICAgICBPYmplY3QuYXNzaWduKHBhcmFtcywgbWF0Y2hlc1swXS5wYXJhbXMpOwogICAgfQogICAgbGV0IHJlc3BvbnNlOwogICAgaWYgKHVybC5wYXRobmFtZS5lbmRzV2l0aCgiLmRhdGEiKSkgewogICAgICBsZXQgaGFuZGxlclVybCA9IG5ldyBVUkwocmVxdWVzdC51cmwpOwogICAgICBoYW5kbGVyVXJsLnBhdGhuYW1lID0gbm9ybWFsaXplZFBhdGg7CiAgICAgIGxldCBzaW5nbGVGZXRjaE1hdGNoZXMgPSBtYXRjaFNlcnZlclJvdXRlcygKICAgICAgICByb3V0ZXMsCiAgICAgICAgaGFuZGxlclVybC5wYXRobmFtZSwKICAgICAgICBfYnVpbGQuYmFzZW5hbWUKICAgICAgKTsKICAgICAgcmVzcG9uc2UgPSBhd2FpdCBoYW5kbGVTaW5nbGVGZXRjaFJlcXVlc3QoCiAgICAgICAgc2VydmVyTW9kZSwKICAgICAgICBfYnVpbGQsCiAgICAgICAgc3RhdGljSGFuZGxlciwKICAgICAgICByZXF1ZXN0LAogICAgICAgIGhhbmRsZXJVcmwsCiAgICAgICAgbG9hZENvbnRleHQsCiAgICAgICAgaGFuZGxlRXJyb3IKICAgICAgKTsKICAgICAgaWYgKGlzUmVkaXJlY3RSZXNwb25zZShyZXNwb25zZSkpIHsKICAgICAgICByZXNwb25zZSA9IGdlbmVyYXRlU2luZ2xlRmV0Y2hSZWRpcmVjdFJlc3BvbnNlKAogICAgICAgICAgcmVzcG9uc2UsCiAgICAgICAgICByZXF1ZXN0LAogICAgICAgICAgX2J1aWxkLAogICAgICAgICAgc2VydmVyTW9kZQogICAgICAgICk7CiAgICAgIH0KICAgICAgaWYgKF9idWlsZC5lbnRyeS5tb2R1bGUuaGFuZGxlRGF0YVJlcXVlc3QpIHsKICAgICAgICByZXNwb25zZSA9IGF3YWl0IF9idWlsZC5lbnRyeS5tb2R1bGUuaGFuZGxlRGF0YVJlcXVlc3QocmVzcG9uc2UsIHsKICAgICAgICAgIGNvbnRleHQ6IGxvYWRDb250ZXh0LAogICAgICAgICAgcGFyYW1zOiBzaW5nbGVGZXRjaE1hdGNoZXMgPyBzaW5nbGVGZXRjaE1hdGNoZXNbMF0ucGFyYW1zIDoge30sCiAgICAgICAgICByZXF1ZXN0CiAgICAgICAgfSk7CiAgICAgICAgaWYgKGlzUmVkaXJlY3RSZXNwb25zZShyZXNwb25zZSkpIHsKICAgICAgICAgIHJlc3BvbnNlID0gZ2VuZXJhdGVTaW5nbGVGZXRjaFJlZGlyZWN0UmVzcG9uc2UoCiAgICAgICAgICAgIHJlc3BvbnNlLAogICAgICAgICAgICByZXF1ZXN0LAogICAgICAgICAgICBfYnVpbGQsCiAgICAgICAgICAgIHNlcnZlck1vZGUKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgaWYgKCFpc1NwYU1vZGUgJiYgbWF0Y2hlcyAmJiBtYXRjaGVzW21hdGNoZXMubGVuZ3RoIC0gMV0ucm91dGUubW9kdWxlLmRlZmF1bHQgPT0gbnVsbCAmJiBtYXRjaGVzW21hdGNoZXMubGVuZ3RoIC0gMV0ucm91dGUubW9kdWxlLkVycm9yQm91bmRhcnkgPT0gbnVsbCkgewogICAgICByZXNwb25zZSA9IGF3YWl0IGhhbmRsZVJlc291cmNlUmVxdWVzdCgKICAgICAgICBzZXJ2ZXJNb2RlLAogICAgICAgIF9idWlsZCwKICAgICAgICBzdGF0aWNIYW5kbGVyLAogICAgICAgIG1hdGNoZXMuc2xpY2UoLTEpWzBdLnJvdXRlLmlkLAogICAgICAgIHJlcXVlc3QsCiAgICAgICAgbG9hZENvbnRleHQsCiAgICAgICAgaGFuZGxlRXJyb3IKICAgICAgKTsKICAgIH0gZWxzZSB7CiAgICAgIGxldCB7IHBhdGhuYW1lIH0gPSB1cmw7CiAgICAgIGxldCBjcml0aWNhbENzcyA9IHZvaWQgMDsKICAgICAgaWYgKF9idWlsZC51bnN0YWJsZV9nZXRDcml0aWNhbENzcykgewogICAgICAgIGNyaXRpY2FsQ3NzID0gYXdhaXQgX2J1aWxkLnVuc3RhYmxlX2dldENyaXRpY2FsQ3NzKHsgcGF0aG5hbWUgfSk7CiAgICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gImRldmVsb3BtZW50IiAmJiAoKF9hID0gZ2V0RGV2U2VydmVySG9va3MoKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmdldENyaXRpY2FsQ3NzKSkgewogICAgICAgIGNyaXRpY2FsQ3NzID0gYXdhaXQgKChfYyA9IChfYiA9IGdldERldlNlcnZlckhvb2tzKCkpID09IG51bGwgPyB2b2lkIDAgOiBfYi5nZXRDcml0aWNhbENzcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmNhbGwoX2IsIHBhdGhuYW1lKSk7CiAgICAgIH0KICAgICAgcmVzcG9uc2UgPSBhd2FpdCBoYW5kbGVEb2N1bWVudFJlcXVlc3QoCiAgICAgICAgc2VydmVyTW9kZSwKICAgICAgICBfYnVpbGQsCiAgICAgICAgc3RhdGljSGFuZGxlciwKICAgICAgICByZXF1ZXN0LAogICAgICAgIGxvYWRDb250ZXh0LAogICAgICAgIGhhbmRsZUVycm9yLAogICAgICAgIGlzU3BhTW9kZSwKICAgICAgICBjcml0aWNhbENzcwogICAgICApOwogICAgfQogICAgaWYgKHJlcXVlc3QubWV0aG9kID09PSAiSEVBRCIpIHsKICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShudWxsLCB7CiAgICAgICAgaGVhZGVyczogcmVzcG9uc2UuaGVhZGVycywKICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cywKICAgICAgICBzdGF0dXNUZXh0OiByZXNwb25zZS5zdGF0dXNUZXh0CiAgICAgIH0pOwogICAgfQogICAgcmV0dXJuIHJlc3BvbnNlOwogIH07Cn07CmFzeW5jIGZ1bmN0aW9uIGhhbmRsZU1hbmlmZXN0UmVxdWVzdChidWlsZCwgcm91dGVzLCB1cmwpIHsKICBpZiAoYnVpbGQuYXNzZXRzLnZlcnNpb24gIT09IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCJ2ZXJzaW9uIikpIHsKICAgIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwgewogICAgICBzdGF0dXM6IDIwNCwKICAgICAgaGVhZGVyczogewogICAgICAgICJYLVJlbWl4LVJlbG9hZC1Eb2N1bWVudCI6ICJ0cnVlIgogICAgICB9CiAgICB9KTsKICB9CiAgbGV0IHBhdGNoZXMgPSB7fTsKICBpZiAodXJsLnNlYXJjaFBhcmFtcy5oYXMoInAiKSkgewogICAgbGV0IHBhdGhzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKICAgIHVybC5zZWFyY2hQYXJhbXMuZ2V0QWxsKCJwIikuZm9yRWFjaCgocGF0aCkgPT4gewogICAgICBpZiAoIXBhdGguc3RhcnRzV2l0aCgiLyIpKSB7CiAgICAgICAgcGF0aCA9IGAvJHtwYXRofWA7CiAgICAgIH0KICAgICAgbGV0IHNlZ21lbnRzID0gcGF0aC5zcGxpdCgiLyIpLnNsaWNlKDEpOwogICAgICBzZWdtZW50cy5mb3JFYWNoKChfLCBpKSA9PiB7CiAgICAgICAgbGV0IHBhcnRpYWxQYXRoID0gc2VnbWVudHMuc2xpY2UoMCwgaSArIDEpLmpvaW4oIi8iKTsKICAgICAgICBwYXRocy5hZGQoYC8ke3BhcnRpYWxQYXRofWApOwogICAgICB9KTsKICAgIH0pOwogICAgZm9yIChsZXQgcGF0aCBvZiBwYXRocykgewogICAgICBsZXQgbWF0Y2hlcyA9IG1hdGNoU2VydmVyUm91dGVzKHJvdXRlcywgcGF0aCwgYnVpbGQuYmFzZW5hbWUpOwogICAgICBpZiAobWF0Y2hlcykgewogICAgICAgIGZvciAobGV0IG1hdGNoIG9mIG1hdGNoZXMpIHsKICAgICAgICAgIGxldCByb3V0ZUlkID0gbWF0Y2gucm91dGUuaWQ7CiAgICAgICAgICBsZXQgcm91dGUgPSBidWlsZC5hc3NldHMucm91dGVzW3JvdXRlSWRdOwogICAgICAgICAgaWYgKHJvdXRlKSB7CiAgICAgICAgICAgIHBhdGNoZXNbcm91dGVJZF0gPSByb3V0ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBSZXNwb25zZS5qc29uKHBhdGNoZXMsIHsKICAgICAgaGVhZGVyczogewogICAgICAgICJDYWNoZS1Db250cm9sIjogInB1YmxpYywgbWF4LWFnZT0zMTUzNjAwMCwgaW1tdXRhYmxlIgogICAgICB9CiAgICB9KTsKICB9CiAgcmV0dXJuIG5ldyBSZXNwb25zZSgiSW52YWxpZCBSZXF1ZXN0IiwgeyBzdGF0dXM6IDQwMCB9KTsKfQphc3luYyBmdW5jdGlvbiBoYW5kbGVTaW5nbGVGZXRjaFJlcXVlc3Qoc2VydmVyTW9kZSwgYnVpbGQsIHN0YXRpY0hhbmRsZXIsIHJlcXVlc3QsIGhhbmRsZXJVcmwsIGxvYWRDb250ZXh0LCBoYW5kbGVFcnJvcikgewogIGxldCByZXNwb25zZSA9IHJlcXVlc3QubWV0aG9kICE9PSAiR0VUIiA/IGF3YWl0IHNpbmdsZUZldGNoQWN0aW9uKAogICAgYnVpbGQsCiAgICBzZXJ2ZXJNb2RlLAogICAgc3RhdGljSGFuZGxlciwKICAgIHJlcXVlc3QsCiAgICBoYW5kbGVyVXJsLAogICAgbG9hZENvbnRleHQsCiAgICBoYW5kbGVFcnJvcgogICkgOiBhd2FpdCBzaW5nbGVGZXRjaExvYWRlcnMoCiAgICBidWlsZCwKICAgIHNlcnZlck1vZGUsCiAgICBzdGF0aWNIYW5kbGVyLAogICAgcmVxdWVzdCwKICAgIGhhbmRsZXJVcmwsCiAgICBsb2FkQ29udGV4dCwKICAgIGhhbmRsZUVycm9yCiAgKTsKICByZXR1cm4gcmVzcG9uc2U7Cn0KYXN5bmMgZnVuY3Rpb24gaGFuZGxlRG9jdW1lbnRSZXF1ZXN0KHNlcnZlck1vZGUsIGJ1aWxkLCBzdGF0aWNIYW5kbGVyLCByZXF1ZXN0LCBsb2FkQ29udGV4dCwgaGFuZGxlRXJyb3IsIGlzU3BhTW9kZSwgY3JpdGljYWxDc3MpIHsKICB0cnkgewogICAgbGV0IHJlc3VsdCA9IGF3YWl0IHN0YXRpY0hhbmRsZXIucXVlcnkocmVxdWVzdCwgewogICAgICByZXF1ZXN0Q29udGV4dDogbG9hZENvbnRleHQsCiAgICAgIGdlbmVyYXRlTWlkZGxld2FyZVJlc3BvbnNlOiBidWlsZC5mdXR1cmUudjhfbWlkZGxld2FyZSA/IGFzeW5jIChxdWVyeSkgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICBsZXQgaW5uZXJSZXN1bHQgPSBhd2FpdCBxdWVyeShyZXF1ZXN0KTsKICAgICAgICAgIGlmICghaXNSZXNwb25zZShpbm5lclJlc3VsdCkpIHsKICAgICAgICAgICAgaW5uZXJSZXN1bHQgPSBhd2FpdCByZW5kZXJIdG1sKGlubmVyUmVzdWx0LCBpc1NwYU1vZGUpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGlubmVyUmVzdWx0OwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBoYW5kbGVFcnJvcihlcnJvcik7CiAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHsgc3RhdHVzOiA1MDAgfSk7CiAgICAgICAgfQogICAgICB9IDogdm9pZCAwCiAgICB9KTsKICAgIGlmICghaXNSZXNwb25zZShyZXN1bHQpKSB7CiAgICAgIHJlc3VsdCA9IGF3YWl0IHJlbmRlckh0bWwocmVzdWx0LCBpc1NwYU1vZGUpOwogICAgfQogICAgcmV0dXJuIHJlc3VsdDsKICB9IGNhdGNoIChlcnJvcikgewogICAgaGFuZGxlRXJyb3IoZXJyb3IpOwogICAgcmV0dXJuIG5ldyBSZXNwb25zZShudWxsLCB7IHN0YXR1czogNTAwIH0pOwogIH0KICBhc3luYyBmdW5jdGlvbiByZW5kZXJIdG1sKGNvbnRleHQsIGlzU3BhTW9kZTIpIHsKICAgIGxldCBoZWFkZXJzID0gZ2V0RG9jdW1lbnRIZWFkZXJzKGNvbnRleHQsIGJ1aWxkKTsKICAgIGlmIChTRVJWRVJfTk9fQk9EWV9TVEFUVVNfQ09ERVMuaGFzKGNvbnRleHQuc3RhdHVzQ29kZSkpIHsKICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShudWxsLCB7IHN0YXR1czogY29udGV4dC5zdGF0dXNDb2RlLCBoZWFkZXJzIH0pOwogICAgfQogICAgaWYgKGNvbnRleHQuZXJyb3JzKSB7CiAgICAgIE9iamVjdC52YWx1ZXMoY29udGV4dC5lcnJvcnMpLmZvckVhY2goKGVycikgPT4gewogICAgICAgIGlmICghaXNSb3V0ZUVycm9yUmVzcG9uc2UoZXJyKSB8fCBlcnIuZXJyb3IpIHsKICAgICAgICAgIGhhbmRsZUVycm9yKGVycik7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgY29udGV4dC5lcnJvcnMgPSBzYW5pdGl6ZUVycm9ycyhjb250ZXh0LmVycm9ycywgc2VydmVyTW9kZSk7CiAgICB9CiAgICBsZXQgc3RhdGUgPSB7CiAgICAgIGxvYWRlckRhdGE6IGNvbnRleHQubG9hZGVyRGF0YSwKICAgICAgYWN0aW9uRGF0YTogY29udGV4dC5hY3Rpb25EYXRhLAogICAgICBlcnJvcnM6IHNlcmlhbGl6ZUVycm9yczIoY29udGV4dC5lcnJvcnMsIHNlcnZlck1vZGUpCiAgICB9OwogICAgbGV0IGJhc2VTZXJ2ZXJIYW5kb2ZmID0gewogICAgICBiYXNlbmFtZTogYnVpbGQuYmFzZW5hbWUsCiAgICAgIGZ1dHVyZTogYnVpbGQuZnV0dXJlLAogICAgICByb3V0ZURpc2NvdmVyeTogYnVpbGQucm91dGVEaXNjb3ZlcnksCiAgICAgIHNzcjogYnVpbGQuc3NyLAogICAgICBpc1NwYU1vZGU6IGlzU3BhTW9kZTIKICAgIH07CiAgICBsZXQgZW50cnlDb250ZXh0ID0gewogICAgICBtYW5pZmVzdDogYnVpbGQuYXNzZXRzLAogICAgICByb3V0ZU1vZHVsZXM6IGNyZWF0ZUVudHJ5Um91dGVNb2R1bGVzKGJ1aWxkLnJvdXRlcyksCiAgICAgIHN0YXRpY0hhbmRsZXJDb250ZXh0OiBjb250ZXh0LAogICAgICBjcml0aWNhbENzcywKICAgICAgc2VydmVySGFuZG9mZlN0cmluZzogY3JlYXRlU2VydmVySGFuZG9mZlN0cmluZyh7CiAgICAgICAgLi4uYmFzZVNlcnZlckhhbmRvZmYsCiAgICAgICAgY3JpdGljYWxDc3MKICAgICAgfSksCiAgICAgIHNlcnZlckhhbmRvZmZTdHJlYW06IGVuY29kZVZpYVR1cmJvU3RyZWFtKAogICAgICAgIHN0YXRlLAogICAgICAgIHJlcXVlc3Quc2lnbmFsLAogICAgICAgIGJ1aWxkLmVudHJ5Lm1vZHVsZS5zdHJlYW1UaW1lb3V0LAogICAgICAgIHNlcnZlck1vZGUKICAgICAgKSwKICAgICAgcmVuZGVyTWV0YToge30sCiAgICAgIGZ1dHVyZTogYnVpbGQuZnV0dXJlLAogICAgICBzc3I6IGJ1aWxkLnNzciwKICAgICAgcm91dGVEaXNjb3Zlcnk6IGJ1aWxkLnJvdXRlRGlzY292ZXJ5LAogICAgICBpc1NwYU1vZGU6IGlzU3BhTW9kZTIsCiAgICAgIHNlcmlhbGl6ZUVycm9yOiAoZXJyKSA9PiBzZXJpYWxpemVFcnJvcihlcnIsIHNlcnZlck1vZGUpCiAgICB9OwogICAgbGV0IGhhbmRsZURvY3VtZW50UmVxdWVzdEZ1bmN0aW9uID0gYnVpbGQuZW50cnkubW9kdWxlLmRlZmF1bHQ7CiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgaGFuZGxlRG9jdW1lbnRSZXF1ZXN0RnVuY3Rpb24oCiAgICAgICAgcmVxdWVzdCwKICAgICAgICBjb250ZXh0LnN0YXR1c0NvZGUsCiAgICAgICAgaGVhZGVycywKICAgICAgICBlbnRyeUNvbnRleHQsCiAgICAgICAgbG9hZENvbnRleHQKICAgICAgKTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGhhbmRsZUVycm9yKGVycm9yKTsKICAgICAgbGV0IGVycm9yRm9yU2Vjb25kUmVuZGVyID0gZXJyb3I7CiAgICAgIGlmIChpc1Jlc3BvbnNlKGVycm9yKSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBsZXQgZGF0YTIgPSBhd2FpdCB1bndyYXBSZXNwb25zZShlcnJvcik7CiAgICAgICAgICBlcnJvckZvclNlY29uZFJlbmRlciA9IG5ldyBFcnJvclJlc3BvbnNlSW1wbCgKICAgICAgICAgICAgZXJyb3Iuc3RhdHVzLAogICAgICAgICAgICBlcnJvci5zdGF0dXNUZXh0LAogICAgICAgICAgICBkYXRhMgogICAgICAgICAgKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgfQogICAgICB9CiAgICAgIGNvbnRleHQgPSBnZXRTdGF0aWNDb250ZXh0RnJvbUVycm9yKAogICAgICAgIHN0YXRpY0hhbmRsZXIuZGF0YVJvdXRlcywKICAgICAgICBjb250ZXh0LAogICAgICAgIGVycm9yRm9yU2Vjb25kUmVuZGVyCiAgICAgICk7CiAgICAgIGlmIChjb250ZXh0LmVycm9ycykgewogICAgICAgIGNvbnRleHQuZXJyb3JzID0gc2FuaXRpemVFcnJvcnMoY29udGV4dC5lcnJvcnMsIHNlcnZlck1vZGUpOwogICAgICB9CiAgICAgIGxldCBzdGF0ZTIgPSB7CiAgICAgICAgbG9hZGVyRGF0YTogY29udGV4dC5sb2FkZXJEYXRhLAogICAgICAgIGFjdGlvbkRhdGE6IGNvbnRleHQuYWN0aW9uRGF0YSwKICAgICAgICBlcnJvcnM6IHNlcmlhbGl6ZUVycm9yczIoY29udGV4dC5lcnJvcnMsIHNlcnZlck1vZGUpCiAgICAgIH07CiAgICAgIGVudHJ5Q29udGV4dCA9IHsKICAgICAgICAuLi5lbnRyeUNvbnRleHQsCiAgICAgICAgc3RhdGljSGFuZGxlckNvbnRleHQ6IGNvbnRleHQsCiAgICAgICAgc2VydmVySGFuZG9mZlN0cmluZzogY3JlYXRlU2VydmVySGFuZG9mZlN0cmluZyhiYXNlU2VydmVySGFuZG9mZiksCiAgICAgICAgc2VydmVySGFuZG9mZlN0cmVhbTogZW5jb2RlVmlhVHVyYm9TdHJlYW0oCiAgICAgICAgICBzdGF0ZTIsCiAgICAgICAgICByZXF1ZXN0LnNpZ25hbCwKICAgICAgICAgIGJ1aWxkLmVudHJ5Lm1vZHVsZS5zdHJlYW1UaW1lb3V0LAogICAgICAgICAgc2VydmVyTW9kZQogICAgICAgICksCiAgICAgICAgcmVuZGVyTWV0YToge30KICAgICAgfTsKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gYXdhaXQgaGFuZGxlRG9jdW1lbnRSZXF1ZXN0RnVuY3Rpb24oCiAgICAgICAgICByZXF1ZXN0LAogICAgICAgICAgY29udGV4dC5zdGF0dXNDb2RlLAogICAgICAgICAgaGVhZGVycywKICAgICAgICAgIGVudHJ5Q29udGV4dCwKICAgICAgICAgIGxvYWRDb250ZXh0CiAgICAgICAgKTsKICAgICAgfSBjYXRjaCAoZXJyb3IyKSB7CiAgICAgICAgaGFuZGxlRXJyb3IoZXJyb3IyKTsKICAgICAgICByZXR1cm4gcmV0dXJuTGFzdFJlc29ydEVycm9yUmVzcG9uc2UoZXJyb3IyLCBzZXJ2ZXJNb2RlKTsKICAgICAgfQogICAgfQogIH0KfQphc3luYyBmdW5jdGlvbiBoYW5kbGVSZXNvdXJjZVJlcXVlc3Qoc2VydmVyTW9kZSwgYnVpbGQsIHN0YXRpY0hhbmRsZXIsIHJvdXRlSWQsIHJlcXVlc3QsIGxvYWRDb250ZXh0LCBoYW5kbGVFcnJvcikgewogIHRyeSB7CiAgICBsZXQgcmVzdWx0ID0gYXdhaXQgc3RhdGljSGFuZGxlci5xdWVyeVJvdXRlKHJlcXVlc3QsIHsKICAgICAgcm91dGVJZCwKICAgICAgcmVxdWVzdENvbnRleHQ6IGxvYWRDb250ZXh0LAogICAgICBnZW5lcmF0ZU1pZGRsZXdhcmVSZXNwb25zZTogYnVpbGQuZnV0dXJlLnY4X21pZGRsZXdhcmUgPyBhc3luYyAocXVlcnlSb3V0ZSkgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICBsZXQgaW5uZXJSZXN1bHQgPSBhd2FpdCBxdWVyeVJvdXRlKHJlcXVlc3QpOwogICAgICAgICAgcmV0dXJuIGhhbmRsZVF1ZXJ5Um91dGVSZXN1bHQoaW5uZXJSZXN1bHQpOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICByZXR1cm4gaGFuZGxlUXVlcnlSb3V0ZUVycm9yKGVycm9yKTsKICAgICAgICB9CiAgICAgIH0gOiB2b2lkIDAKICAgIH0pOwogICAgcmV0dXJuIGhhbmRsZVF1ZXJ5Um91dGVSZXN1bHQocmVzdWx0KTsKICB9IGNhdGNoIChlcnJvcikgewogICAgcmV0dXJuIGhhbmRsZVF1ZXJ5Um91dGVFcnJvcihlcnJvcik7CiAgfQogIGZ1bmN0aW9uIGhhbmRsZVF1ZXJ5Um91dGVSZXN1bHQocmVzdWx0KSB7CiAgICBpZiAoaXNSZXNwb25zZShyZXN1bHQpKSB7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gInN0cmluZyIpIHsKICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShyZXN1bHQpOwogICAgfQogICAgcmV0dXJuIFJlc3BvbnNlLmpzb24ocmVzdWx0KTsKICB9CiAgZnVuY3Rpb24gaGFuZGxlUXVlcnlSb3V0ZUVycm9yKGVycm9yKSB7CiAgICBpZiAoaXNSZXNwb25zZShlcnJvcikpIHsKICAgICAgZXJyb3IuaGVhZGVycy5zZXQoIlgtUmVtaXgtQ2F0Y2giLCAieWVzIik7CiAgICAgIHJldHVybiBlcnJvcjsKICAgIH0KICAgIGlmIChpc1JvdXRlRXJyb3JSZXNwb25zZShlcnJvcikpIHsKICAgICAgaGFuZGxlRXJyb3IoZXJyb3IpOwogICAgICByZXR1cm4gZXJyb3JSZXNwb25zZVRvSnNvbihlcnJvciwgc2VydmVyTW9kZSk7CiAgICB9CiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5tZXNzYWdlID09PSAiRXhwZWN0ZWQgYSByZXNwb25zZSBmcm9tIHF1ZXJ5Um91dGUiKSB7CiAgICAgIGxldCBuZXdFcnJvciA9IG5ldyBFcnJvcigKICAgICAgICAiRXhwZWN0ZWQgYSBSZXNwb25zZSB0byBiZSByZXR1cm5lZCBmcm9tIHJlc291cmNlIHJvdXRlIGhhbmRsZXIiCiAgICAgICk7CiAgICAgIGhhbmRsZUVycm9yKG5ld0Vycm9yKTsKICAgICAgcmV0dXJuIHJldHVybkxhc3RSZXNvcnRFcnJvclJlc3BvbnNlKG5ld0Vycm9yLCBzZXJ2ZXJNb2RlKTsKICAgIH0KICAgIGhhbmRsZUVycm9yKGVycm9yKTsKICAgIHJldHVybiByZXR1cm5MYXN0UmVzb3J0RXJyb3JSZXNwb25zZShlcnJvciwgc2VydmVyTW9kZSk7CiAgfQp9CmZ1bmN0aW9uIGVycm9yUmVzcG9uc2VUb0pzb24oZXJyb3JSZXNwb25zZSwgc2VydmVyTW9kZSkgewogIHJldHVybiBSZXNwb25zZS5qc29uKAogICAgc2VyaWFsaXplRXJyb3IoCiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVGhpcyBpcyAicHJpdmF0ZSIgZnJvbSB1c2VycyBidXQgaW50ZW5kZWQgZm9yIGludGVybmFsIHVzZQogICAgICBlcnJvclJlc3BvbnNlLmVycm9yIHx8IG5ldyBFcnJvcigiVW5leHBlY3RlZCBTZXJ2ZXIgRXJyb3IiKSwKICAgICAgc2VydmVyTW9kZQogICAgKSwKICAgIHsKICAgICAgc3RhdHVzOiBlcnJvclJlc3BvbnNlLnN0YXR1cywKICAgICAgc3RhdHVzVGV4dDogZXJyb3JSZXNwb25zZS5zdGF0dXNUZXh0LAogICAgICBoZWFkZXJzOiB7CiAgICAgICAgIlgtUmVtaXgtRXJyb3IiOiAieWVzIgogICAgICB9CiAgICB9CiAgKTsKfQpmdW5jdGlvbiByZXR1cm5MYXN0UmVzb3J0RXJyb3JSZXNwb25zZShlcnJvciwgc2VydmVyTW9kZSkgewogIGxldCBtZXNzYWdlID0gIlVuZXhwZWN0ZWQgU2VydmVyIEVycm9yIjsKICBpZiAoc2VydmVyTW9kZSAhPT0gInByb2R1Y3Rpb24iKSB7CiAgICBtZXNzYWdlICs9IGAKCiR7U3RyaW5nKGVycm9yKX1gOwogIH0KICByZXR1cm4gbmV3IFJlc3BvbnNlKG1lc3NhZ2UsIHsKICAgIHN0YXR1czogNTAwLAogICAgaGVhZGVyczogewogICAgICAiQ29udGVudC1UeXBlIjogInRleHQvcGxhaW4iCiAgICB9CiAgfSk7Cn0KZnVuY3Rpb24gdW53cmFwUmVzcG9uc2UocmVzcG9uc2UpIHsKICBsZXQgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldCgiQ29udGVudC1UeXBlIik7CiAgcmV0dXJuIGNvbnRlbnRUeXBlICYmIC9cYmFwcGxpY2F0aW9uXC9qc29uXGIvLnRlc3QoY29udGVudFR5cGUpID8gcmVzcG9uc2UuYm9keSA9PSBudWxsID8gbnVsbCA6IHJlc3BvbnNlLmpzb24oKSA6IHJlc3BvbnNlLnRleHQoKTsKfQpmdW5jdGlvbiBmbGFzaChuYW1lKSB7CiAgcmV0dXJuIGBfX2ZsYXNoXyR7bmFtZX1fX2A7Cn0KdmFyIGNyZWF0ZVNlc3Npb24gPSAoaW5pdGlhbERhdGEgPSB7fSwgaWQgPSAiIikgPT4gewogIGxldCBtYXAgPSBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKGluaXRpYWxEYXRhKSk7CiAgcmV0dXJuIHsKICAgIGdldCBpZCgpIHsKICAgICAgcmV0dXJuIGlkOwogICAgfSwKICAgIGdldCBkYXRhKCkgewogICAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKG1hcCk7CiAgICB9LAogICAgaGFzKG5hbWUpIHsKICAgICAgcmV0dXJuIG1hcC5oYXMobmFtZSkgfHwgbWFwLmhhcyhmbGFzaChuYW1lKSk7CiAgICB9LAogICAgZ2V0KG5hbWUpIHsKICAgICAgaWYgKG1hcC5oYXMobmFtZSkpIHJldHVybiBtYXAuZ2V0KG5hbWUpOwogICAgICBsZXQgZmxhc2hOYW1lID0gZmxhc2gobmFtZSk7CiAgICAgIGlmIChtYXAuaGFzKGZsYXNoTmFtZSkpIHsKICAgICAgICBsZXQgdmFsdWUgPSBtYXAuZ2V0KGZsYXNoTmFtZSk7CiAgICAgICAgbWFwLmRlbGV0ZShmbGFzaE5hbWUpOwogICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgfQogICAgICByZXR1cm4gdm9pZCAwOwogICAgfSwKICAgIHNldChuYW1lLCB2YWx1ZSkgewogICAgICBtYXAuc2V0KG5hbWUsIHZhbHVlKTsKICAgIH0sCiAgICBmbGFzaChuYW1lLCB2YWx1ZSkgewogICAgICBtYXAuc2V0KGZsYXNoKG5hbWUpLCB2YWx1ZSk7CiAgICB9LAogICAgdW5zZXQobmFtZSkgewogICAgICBtYXAuZGVsZXRlKG5hbWUpOwogICAgfQogIH07Cn07CnZhciBpc1Nlc3Npb24gPSAob2JqZWN0KSA9PiB7CiAgcmV0dXJuIG9iamVjdCAhPSBudWxsICYmIHR5cGVvZiBvYmplY3QuaWQgPT09ICJzdHJpbmciICYmIHR5cGVvZiBvYmplY3QuZGF0YSAhPT0gInVuZGVmaW5lZCIgJiYgdHlwZW9mIG9iamVjdC5oYXMgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIG9iamVjdC5nZXQgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIG9iamVjdC5zZXQgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIG9iamVjdC5mbGFzaCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2Ygb2JqZWN0LnVuc2V0ID09PSAiZnVuY3Rpb24iOwp9OwpmdW5jdGlvbiBjcmVhdGVTZXNzaW9uU3RvcmFnZSh7CiAgY29va2llOiBjb29raWVBcmcsCiAgY3JlYXRlRGF0YSwKICByZWFkRGF0YSwKICB1cGRhdGVEYXRhLAogIGRlbGV0ZURhdGEKfSkgewogIGxldCBjb29raWUgPSBpc0Nvb2tpZShjb29raWVBcmcpID8gY29va2llQXJnIDogY3JlYXRlQ29va2llKChjb29raWVBcmcgPT0gbnVsbCA/IHZvaWQgMCA6IGNvb2tpZUFyZy5uYW1lKSB8fCAiX19zZXNzaW9uIiwgY29va2llQXJnKTsKICB3YXJuT25jZUFib3V0U2lnbmluZ1Nlc3Npb25Db29raWUoY29va2llKTsKICByZXR1cm4gewogICAgYXN5bmMgZ2V0U2Vzc2lvbihjb29raWVIZWFkZXIsIG9wdGlvbnMpIHsKICAgICAgbGV0IGlkID0gY29va2llSGVhZGVyICYmIGF3YWl0IGNvb2tpZS5wYXJzZShjb29raWVIZWFkZXIsIG9wdGlvbnMpOwogICAgICBsZXQgZGF0YTIgPSBpZCAmJiBhd2FpdCByZWFkRGF0YShpZCk7CiAgICAgIHJldHVybiBjcmVhdGVTZXNzaW9uKGRhdGEyIHx8IHt9LCBpZCB8fCAiIik7CiAgICB9LAogICAgYXN5bmMgY29tbWl0U2Vzc2lvbihzZXNzaW9uLCBvcHRpb25zKSB7CiAgICAgIGxldCB7IGlkLCBkYXRhOiBkYXRhMiB9ID0gc2Vzc2lvbjsKICAgICAgbGV0IGV4cGlyZXMgPSAob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5tYXhBZ2UpICE9IG51bGwgPyBuZXcgRGF0ZShEYXRlLm5vdygpICsgb3B0aW9ucy5tYXhBZ2UgKiAxZTMpIDogKG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuZXhwaXJlcykgIT0gbnVsbCA/IG9wdGlvbnMuZXhwaXJlcyA6IGNvb2tpZS5leHBpcmVzOwogICAgICBpZiAoaWQpIHsKICAgICAgICBhd2FpdCB1cGRhdGVEYXRhKGlkLCBkYXRhMiwgZXhwaXJlcyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWQgPSBhd2FpdCBjcmVhdGVEYXRhKGRhdGEyLCBleHBpcmVzKTsKICAgICAgfQogICAgICByZXR1cm4gY29va2llLnNlcmlhbGl6ZShpZCwgb3B0aW9ucyk7CiAgICB9LAogICAgYXN5bmMgZGVzdHJveVNlc3Npb24oc2Vzc2lvbiwgb3B0aW9ucykgewogICAgICBhd2FpdCBkZWxldGVEYXRhKHNlc3Npb24uaWQpOwogICAgICByZXR1cm4gY29va2llLnNlcmlhbGl6ZSgiIiwgewogICAgICAgIC4uLm9wdGlvbnMsCiAgICAgICAgbWF4QWdlOiB2b2lkIDAsCiAgICAgICAgZXhwaXJlczogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKDApCiAgICAgIH0pOwogICAgfQogIH07Cn0KZnVuY3Rpb24gd2Fybk9uY2VBYm91dFNpZ25pbmdTZXNzaW9uQ29va2llKGNvb2tpZSkgewogIHdhcm5PbmNlKAogICAgY29va2llLmlzU2lnbmVkLAogICAgYFRoZSAiJHtjb29raWUubmFtZX0iIGNvb2tpZSBpcyBub3Qgc2lnbmVkLCBidXQgc2Vzc2lvbiBjb29raWVzIHNob3VsZCBiZSBzaWduZWQgdG8gcHJldmVudCB0YW1wZXJpbmcgb24gdGhlIGNsaWVudCBiZWZvcmUgdGhleSBhcmUgc2VudCBiYWNrIHRvIHRoZSBzZXJ2ZXIuIFNlZSBodHRwczovL3JlYWN0cm91dGVyLmNvbS9leHBsYW5hdGlvbi9zZXNzaW9ucy1hbmQtY29va2llcyNzaWduaW5nLWNvb2tpZXMgZm9yIG1vcmUgaW5mb3JtYXRpb24uYAogICk7Cn0KZnVuY3Rpb24gY3JlYXRlQ29va2llU2Vzc2lvblN0b3JhZ2UoeyBjb29raWU6IGNvb2tpZUFyZyB9ID0ge30pIHsKICBsZXQgY29va2llID0gaXNDb29raWUoY29va2llQXJnKSA/IGNvb2tpZUFyZyA6IGNyZWF0ZUNvb2tpZSgoY29va2llQXJnID09IG51bGwgPyB2b2lkIDAgOiBjb29raWVBcmcubmFtZSkgfHwgIl9fc2Vzc2lvbiIsIGNvb2tpZUFyZyk7CiAgd2Fybk9uY2VBYm91dFNpZ25pbmdTZXNzaW9uQ29va2llKGNvb2tpZSk7CiAgcmV0dXJuIHsKICAgIGFzeW5jIGdldFNlc3Npb24oY29va2llSGVhZGVyLCBvcHRpb25zKSB7CiAgICAgIHJldHVybiBjcmVhdGVTZXNzaW9uKAogICAgICAgIGNvb2tpZUhlYWRlciAmJiBhd2FpdCBjb29raWUucGFyc2UoY29va2llSGVhZGVyLCBvcHRpb25zKSB8fCB7fQogICAgICApOwogICAgfSwKICAgIGFzeW5jIGNvbW1pdFNlc3Npb24oc2Vzc2lvbiwgb3B0aW9ucykgewogICAgICBsZXQgc2VyaWFsaXplZENvb2tpZSA9IGF3YWl0IGNvb2tpZS5zZXJpYWxpemUoc2Vzc2lvbi5kYXRhLCBvcHRpb25zKTsKICAgICAgaWYgKHNlcmlhbGl6ZWRDb29raWUubGVuZ3RoID4gNDA5NikgewogICAgICAgIHRocm93IG5ldyBFcnJvcigKICAgICAgICAgICJDb29raWUgbGVuZ3RoIHdpbGwgZXhjZWVkIGJyb3dzZXIgbWF4aW11bS4gTGVuZ3RoOiAiICsgc2VyaWFsaXplZENvb2tpZS5sZW5ndGgKICAgICAgICApOwogICAgICB9CiAgICAgIHJldHVybiBzZXJpYWxpemVkQ29va2llOwogICAgfSwKICAgIGFzeW5jIGRlc3Ryb3lTZXNzaW9uKF9zZXNzaW9uLCBvcHRpb25zKSB7CiAgICAgIHJldHVybiBjb29raWUuc2VyaWFsaXplKCIiLCB7CiAgICAgICAgLi4ub3B0aW9ucywKICAgICAgICBtYXhBZ2U6IHZvaWQgMCwKICAgICAgICBleHBpcmVzOiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoMCkKICAgICAgfSk7CiAgICB9CiAgfTsKfQpmdW5jdGlvbiBjcmVhdGVNZW1vcnlTZXNzaW9uU3RvcmFnZSh7IGNvb2tpZSB9ID0ge30pIHsKICBsZXQgbWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICByZXR1cm4gY3JlYXRlU2Vzc2lvblN0b3JhZ2UoewogICAgY29va2llLAogICAgYXN5bmMgY3JlYXRlRGF0YShkYXRhMiwgZXhwaXJlcykgewogICAgICBsZXQgaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTApOwogICAgICBtYXAuc2V0KGlkLCB7IGRhdGE6IGRhdGEyLCBleHBpcmVzIH0pOwogICAgICByZXR1cm4gaWQ7CiAgICB9LAogICAgYXN5bmMgcmVhZERhdGEoaWQpIHsKICAgICAgaWYgKG1hcC5oYXMoaWQpKSB7CiAgICAgICAgbGV0IHsgZGF0YTogZGF0YTIsIGV4cGlyZXMgfSA9IG1hcC5nZXQoaWQpOwogICAgICAgIGlmICghZXhwaXJlcyB8fCBleHBpcmVzID4gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHsKICAgICAgICAgIHJldHVybiBkYXRhMjsKICAgICAgICB9CiAgICAgICAgaWYgKGV4cGlyZXMpIG1hcC5kZWxldGUoaWQpOwogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfSwKICAgIGFzeW5jIHVwZGF0ZURhdGEoaWQsIGRhdGEyLCBleHBpcmVzKSB7CiAgICAgIG1hcC5zZXQoaWQsIHsgZGF0YTogZGF0YTIsIGV4cGlyZXMgfSk7CiAgICB9LAogICAgYXN5bmMgZGVsZXRlRGF0YShpZCkgewogICAgICBtYXAuZGVsZXRlKGlkKTsKICAgIH0KICB9KTsKfQpmdW5jdGlvbiBocmVmKHBhdGgsIC4uLmFyZ3MpIHsKICBsZXQgcGFyYW1zID0gYXJnc1swXTsKICBsZXQgcmVzdWx0ID0gcGF0aC5yZXBsYWNlKC9cLypcKj8kLywgIiIpLnJlcGxhY2UoCiAgICAvXC86KFtcdy1dKykoXD8pPy9nLAogICAgLy8gc2FtZSByZWdleCBhcyBpbiAuXHJvdXRlclx1dGlscy50czogY29tcGlsZVBhdGgoKS4KICAgIChfLCBwYXJhbSwgcXVlc3Rpb25NYXJrKSA9PiB7CiAgICAgIGNvbnN0IGlzUmVxdWlyZWQgPSBxdWVzdGlvbk1hcmsgPT09IHZvaWQgMDsKICAgICAgY29uc3QgdmFsdWUgPSBwYXJhbXMgPyBwYXJhbXNbcGFyYW1dIDogdm9pZCAwOwogICAgICBpZiAoaXNSZXF1aXJlZCAmJiB2YWx1ZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgICAgYFBhdGggJyR7cGF0aH0nIHJlcXVpcmVzIHBhcmFtICcke3BhcmFtfScgYnV0IGl0IHdhcyBub3QgcHJvdmlkZWRgCiAgICAgICAgKTsKICAgICAgfQogICAgICByZXR1cm4gdmFsdWUgPT09IHZvaWQgMCA/ICIiIDogIi8iICsgdmFsdWU7CiAgICB9CiAgKTsKICBpZiAocGF0aC5lbmRzV2l0aCgiKiIpKSB7CiAgICBjb25zdCB2YWx1ZSA9IHBhcmFtcyA/IHBhcmFtc1siKiJdIDogdm9pZCAwOwogICAgaWYgKHZhbHVlICE9PSB2b2lkIDApIHsKICAgICAgcmVzdWx0ICs9ICIvIiArIHZhbHVlOwogICAgfQogIH0KICByZXR1cm4gcmVzdWx0IHx8ICIvIjsKfQpmdW5jdGlvbiBnZXRIeWRyYXRpb25EYXRhKHsKICBzdGF0ZSwKICByb3V0ZXMsCiAgZ2V0Um91dGVJbmZvLAogIGxvY2F0aW9uOiBsb2NhdGlvbjIsCiAgYmFzZW5hbWUsCiAgaXNTcGFNb2RlCn0pIHsKICBsZXQgaHlkcmF0aW9uRGF0YSA9IHsKICAgIC4uLnN0YXRlLAogICAgbG9hZGVyRGF0YTogeyAuLi5zdGF0ZS5sb2FkZXJEYXRhIH0KICB9OwogIGxldCBpbml0aWFsTWF0Y2hlcyA9IG1hdGNoUm91dGVzKHJvdXRlcywgbG9jYXRpb24yLCBiYXNlbmFtZSk7CiAgaWYgKGluaXRpYWxNYXRjaGVzKSB7CiAgICBmb3IgKGxldCBtYXRjaCBvZiBpbml0aWFsTWF0Y2hlcykgewogICAgICBsZXQgcm91dGVJZCA9IG1hdGNoLnJvdXRlLmlkOwogICAgICBsZXQgcm91dGVJbmZvID0gZ2V0Um91dGVJbmZvKHJvdXRlSWQpOwogICAgICBpZiAoc2hvdWxkSHlkcmF0ZVJvdXRlTG9hZGVyKAogICAgICAgIHJvdXRlSWQsCiAgICAgICAgcm91dGVJbmZvLmNsaWVudExvYWRlciwKICAgICAgICByb3V0ZUluZm8uaGFzTG9hZGVyLAogICAgICAgIGlzU3BhTW9kZQogICAgICApICYmIChyb3V0ZUluZm8uaGFzSHlkcmF0ZUZhbGxiYWNrIHx8ICFyb3V0ZUluZm8uaGFzTG9hZGVyKSkgewogICAgICAgIGRlbGV0ZSBoeWRyYXRpb25EYXRhLmxvYWRlckRhdGFbcm91dGVJZF07CiAgICAgIH0gZWxzZSBpZiAoIXJvdXRlSW5mby5oYXNMb2FkZXIpIHsKICAgICAgICBoeWRyYXRpb25EYXRhLmxvYWRlckRhdGFbcm91dGVJZF0gPSBudWxsOwogICAgICB9CiAgICB9CiAgfQogIHJldHVybiBoeWRyYXRpb25EYXRhOwp9CnZhciBSU0NSb3V0ZXJHbG9iYWxFcnJvckJvdW5kYXJ5ID0gY2xhc3MgZXh0ZW5kcyBpbXBvcnRfcmVhY3QuZGVmYXVsdC5Db21wb25lbnQgewogIGNvbnN0cnVjdG9yKHByb3BzKSB7CiAgICBzdXBlcihwcm9wcyk7CiAgICB0aGlzLnN0YXRlID0geyBlcnJvcjogbnVsbCwgbG9jYXRpb246IHByb3BzLmxvY2F0aW9uIH07CiAgfQogIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IoZXJyb3IpIHsKICAgIHJldHVybiB7IGVycm9yIH07CiAgfQogIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMocHJvcHMsIHN0YXRlKSB7CiAgICBpZiAoc3RhdGUubG9jYXRpb24gIT09IHByb3BzLmxvY2F0aW9uKSB7CiAgICAgIHJldHVybiB7IGVycm9yOiBudWxsLCBsb2NhdGlvbjogcHJvcHMubG9jYXRpb24gfTsKICAgIH0KICAgIHJldHVybiB7IGVycm9yOiBzdGF0ZS5lcnJvciwgbG9jYXRpb246IHN0YXRlLmxvY2F0aW9uIH07CiAgfQogIHJlbmRlcigpIHsKICAgIGlmICh0aGlzLnN0YXRlLmVycm9yKSB7CiAgICAgIHJldHVybiBpbXBvcnRfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KAogICAgICAgIFJTQ0RlZmF1bHRSb290RXJyb3JCb3VuZGFyeUltcGwsCiAgICAgICAgewogICAgICAgICAgZXJyb3I6IHRoaXMuc3RhdGUuZXJyb3IsCiAgICAgICAgICByZW5kZXJBcHBTaGVsbDogdHJ1ZQogICAgICAgIH0KICAgICAgKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiB0aGlzLnByb3BzLmNoaWxkcmVuOwogICAgfQogIH0KfTsKZnVuY3Rpb24gRXJyb3JXcmFwcGVyKHsKICByZW5kZXJBcHBTaGVsbCwKICB0aXRsZSwKICBjaGlsZHJlbgp9KSB7CiAgaWYgKCFyZW5kZXJBcHBTaGVsbCkgewogICAgcmV0dXJuIGNoaWxkcmVuOwogIH0KICByZXR1cm4gaW1wb3J0X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiaHRtbCIsIHsgbGFuZzogImVuIiB9LCBpbXBvcnRfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJoZWFkIiwgbnVsbCwgaW1wb3J0X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgibWV0YSIsIHsgY2hhclNldDogInV0Zi04IiB9KSwgaW1wb3J0X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgKICAgICJtZXRhIiwKICAgIHsKICAgICAgbmFtZTogInZpZXdwb3J0IiwKICAgICAgY29udGVudDogIndpZHRoPWRldmljZS13aWR0aCxpbml0aWFsLXNjYWxlPTEsdmlld3BvcnQtZml0PWNvdmVyIgogICAgfQogICksIGltcG9ydF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoInRpdGxlIiwgbnVsbCwgdGl0bGUpKSwgaW1wb3J0X3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudCgiYm9keSIsIG51bGwsIGltcG9ydF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoIm1haW4iLCB7IHN0eWxlOiB7IGZvbnRGYW1pbHk6ICJzeXN0ZW0tdWksIHNhbnMtc2VyaWYiLCBwYWRkaW5nOiAiMnJlbSIgfSB9LCBjaGlsZHJlbikpKTsKfQpmdW5jdGlvbiBSU0NEZWZhdWx0Um9vdEVycm9yQm91bmRhcnlJbXBsKHsKICBlcnJvciwKICByZW5kZXJBcHBTaGVsbAp9KSB7CiAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgbGV0IGhleURldmVsb3BlciA9IGltcG9ydF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoCiAgICAic2NyaXB0IiwKICAgIHsKICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHsKICAgICAgICBfX2h0bWw6IGAKICAgICAgICBjb25zb2xlLmxvZygKICAgICAgICAgICLwn5K/IEhleSBkZXZlbG9wZXIg8J+Riy4gWW91IGNhbiBwcm92aWRlIGEgd2F5IGJldHRlciBVWCB0aGFuIHRoaXMgd2hlbiB5b3VyIGFwcCB0aHJvd3MgZXJyb3JzLiBDaGVjayBvdXQgaHR0cHM6Ly9yZWFjdHJvdXRlci5jb20vaG93LXRvL2Vycm9yLWJvdW5kYXJ5IGZvciBtb3JlIGluZm9ybWF0aW9uLiIKICAgICAgICApOwogICAgICBgCiAgICAgIH0KICAgIH0KICApOwogIGlmIChpc1JvdXRlRXJyb3JSZXNwb25zZShlcnJvcikpIHsKICAgIHJldHVybiBpbXBvcnRfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KAogICAgICBFcnJvcldyYXBwZXIsCiAgICAgIHsKICAgICAgICByZW5kZXJBcHBTaGVsbCwKICAgICAgICB0aXRsZTogIlVuaGFuZGxlZCBUaHJvd24gUmVzcG9uc2UhIgogICAgICB9LAogICAgICBpbXBvcnRfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KCJoMSIsIHsgc3R5bGU6IHsgZm9udFNpemU6ICIyNHB4IiB9IH0sIGVycm9yLnN0YXR1cywgIiAiLCBlcnJvci5zdGF0dXNUZXh0KSwKICAgICAgRU5BQkxFX0RFVl9XQVJOSU5HUyA/IGhleURldmVsb3BlciA6IG51bGwKICAgICk7CiAgfQogIGxldCBlcnJvckluc3RhbmNlOwogIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7CiAgICBlcnJvckluc3RhbmNlID0gZXJyb3I7CiAgfSBlbHNlIHsKICAgIGxldCBlcnJvclN0cmluZyA9IGVycm9yID09IG51bGwgPyAiVW5rbm93biBFcnJvciIgOiB0eXBlb2YgZXJyb3IgPT09ICJvYmplY3QiICYmICJ0b1N0cmluZyIgaW4gZXJyb3IgPyBlcnJvci50b1N0cmluZygpIDogSlNPTi5zdHJpbmdpZnkoZXJyb3IpOwogICAgZXJyb3JJbnN0YW5jZSA9IG5ldyBFcnJvcihlcnJvclN0cmluZyk7CiAgfQogIHJldHVybiBpbXBvcnRfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KEVycm9yV3JhcHBlciwgeyByZW5kZXJBcHBTaGVsbCwgdGl0bGU6ICJBcHBsaWNhdGlvbiBFcnJvciEiIH0sIGltcG9ydF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoImgxIiwgeyBzdHlsZTogeyBmb250U2l6ZTogIjI0cHgiIH0gfSwgIkFwcGxpY2F0aW9uIEVycm9yIiksIGltcG9ydF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoCiAgICAicHJlIiwKICAgIHsKICAgICAgc3R5bGU6IHsKICAgICAgICBwYWRkaW5nOiAiMnJlbSIsCiAgICAgICAgYmFja2dyb3VuZDogImhzbGEoMTAsIDUwJSwgNTAlLCAwLjEpIiwKICAgICAgICBjb2xvcjogInJlZCIsCiAgICAgICAgb3ZlcmZsb3c6ICJhdXRvIgogICAgICB9CiAgICB9LAogICAgZXJyb3JJbnN0YW5jZS5zdGFjawogICksIGhleURldmVsb3Blcik7Cn0KZnVuY3Rpb24gUlNDRGVmYXVsdFJvb3RFcnJvckJvdW5kYXJ5KHsKICBoYXNSb290TGF5b3V0Cn0pIHsKICBsZXQgZXJyb3IgPSB1c2VSb3V0ZUVycm9yKCk7CiAgaWYgKGhhc1Jvb3RMYXlvdXQgPT09IHZvaWQgMCkgewogICAgdGhyb3cgbmV3IEVycm9yKCJNaXNzaW5nICdoYXNSb290TGF5b3V0JyBwcm9wIik7CiAgfQogIHJldHVybiBpbXBvcnRfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KAogICAgUlNDRGVmYXVsdFJvb3RFcnJvckJvdW5kYXJ5SW1wbCwKICAgIHsKICAgICAgcmVuZGVyQXBwU2hlbGw6ICFoYXNSb290TGF5b3V0LAogICAgICBlcnJvcgogICAgfQogICk7Cn0KZnVuY3Rpb24gY3JlYXRlUlNDUm91dGVNb2R1bGVzKHBheWxvYWQpIHsKICBjb25zdCByb3V0ZU1vZHVsZXMgPSB7fTsKICBmb3IgKGNvbnN0IG1hdGNoIG9mIHBheWxvYWQubWF0Y2hlcykgewogICAgcG9wdWxhdGVSU0NSb3V0ZU1vZHVsZXMocm91dGVNb2R1bGVzLCBtYXRjaCk7CiAgfQogIHJldHVybiByb3V0ZU1vZHVsZXM7Cn0KZnVuY3Rpb24gcG9wdWxhdGVSU0NSb3V0ZU1vZHVsZXMocm91dGVNb2R1bGVzLCBtYXRjaGVzKSB7CiAgbWF0Y2hlcyA9IEFycmF5LmlzQXJyYXkobWF0Y2hlcykgPyBtYXRjaGVzIDogW21hdGNoZXNdOwogIGZvciAoY29uc3QgbWF0Y2ggb2YgbWF0Y2hlcykgewogICAgcm91dGVNb2R1bGVzW21hdGNoLmlkXSA9IHsKICAgICAgbGlua3M6IG1hdGNoLmxpbmtzLAogICAgICBtZXRhOiBtYXRjaC5tZXRhLAogICAgICBkZWZhdWx0OiBub29wQ29tcG9uZW50CiAgICB9OwogIH0KfQp2YXIgbm9vcENvbXBvbmVudCA9ICgpID0+IG51bGw7CmZ1bmN0aW9uIGNyZWF0ZUNhbGxTZXJ2ZXIoewogIGNyZWF0ZUZyb21SZWFkYWJsZVN0cmVhbSwKICBjcmVhdGVUZW1wb3JhcnlSZWZlcmVuY2VTZXQsCiAgZW5jb2RlUmVwbHksCiAgZmV0Y2g6IGZldGNoSW1wbGVtZW50YXRpb24gPSBmZXRjaAp9KSB7CiAgY29uc3QgZ2xvYmFsVmFyID0gd2luZG93OwogIGxldCBsYW5kZWRBY3Rpb25JZCA9IDA7CiAgcmV0dXJuIGFzeW5jIChpZCwgYXJncykgPT4gewogICAgbGV0IGFjdGlvbklkID0gZ2xvYmFsVmFyLl9fcm91dGVyQWN0aW9uSUQgPSAoZ2xvYmFsVmFyLl9fcm91dGVyQWN0aW9uSUQgPz8gKGdsb2JhbFZhci5fX3JvdXRlckFjdGlvbklEID0gMCkpICsgMTsKICAgIGNvbnN0IHRlbXBvcmFyeVJlZmVyZW5jZXMgPSBjcmVhdGVUZW1wb3JhcnlSZWZlcmVuY2VTZXQoKTsKICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hJbXBsZW1lbnRhdGlvbigKICAgICAgbmV3IFJlcXVlc3QobG9jYXRpb24uaHJlZiwgewogICAgICAgIGJvZHk6IGF3YWl0IGVuY29kZVJlcGx5KGFyZ3MsIHsgdGVtcG9yYXJ5UmVmZXJlbmNlcyB9KSwKICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBY2NlcHQ6ICJ0ZXh0L3gtY29tcG9uZW50IiwKICAgICAgICAgICJyc2MtYWN0aW9uLWlkIjogaWQKICAgICAgICB9CiAgICAgIH0pCiAgICApOwogICAgaWYgKCFyZXNwb25zZS5ib2R5KSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiTm8gcmVzcG9uc2UgYm9keSIpOwogICAgfQogICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IGNyZWF0ZUZyb21SZWFkYWJsZVN0cmVhbShyZXNwb25zZS5ib2R5LCB7CiAgICAgIHRlbXBvcmFyeVJlZmVyZW5jZXMKICAgIH0pOwogICAgaWYgKHBheWxvYWQudHlwZSA9PT0gInJlZGlyZWN0IikgewogICAgICBpZiAocGF5bG9hZC5yZWxvYWQpIHsKICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHBheWxvYWQubG9jYXRpb247CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGdsb2JhbFZhci5fX3JlYWN0Um91dGVyRGF0YVJvdXRlci5uYXZpZ2F0ZShwYXlsb2FkLmxvY2F0aW9uLCB7CiAgICAgICAgcmVwbGFjZTogcGF5bG9hZC5yZXBsYWNlCiAgICAgIH0pOwogICAgICByZXR1cm4gcGF5bG9hZC5hY3Rpb25SZXN1bHQ7CiAgICB9CiAgICBpZiAocGF5bG9hZC50eXBlICE9PSAiYWN0aW9uIikgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIlVuZXhwZWN0ZWQgcGF5bG9hZCB0eXBlIik7CiAgICB9CiAgICBpZiAocGF5bG9hZC5yZXJlbmRlcikgewogICAgICBSZWFjdDQyLnN0YXJ0VHJhbnNpdGlvbigKICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gV2UgaGF2ZSBvbGQgcmVhY3QgdHlwZXMgdGhhdCBkb24ndCBrbm93IHRoaXMgY2FuIGJlIGFzeW5jCiAgICAgICAgYXN5bmMgKCkgPT4gewogICAgICAgICAgY29uc3QgcmVyZW5kZXIgPSBhd2FpdCBwYXlsb2FkLnJlcmVuZGVyOwogICAgICAgICAgaWYgKCFyZXJlbmRlcikgcmV0dXJuOwogICAgICAgICAgaWYgKGxhbmRlZEFjdGlvbklkIDwgYWN0aW9uSWQgJiYgZ2xvYmFsVmFyLl9fcm91dGVyQWN0aW9uSUQgPD0gYWN0aW9uSWQpIHsKICAgICAgICAgICAgbGFuZGVkQWN0aW9uSWQgPSBhY3Rpb25JZDsKICAgICAgICAgICAgaWYgKHJlcmVuZGVyLnR5cGUgPT09ICJyZWRpcmVjdCIpIHsKICAgICAgICAgICAgICBpZiAocmVyZW5kZXIucmVsb2FkKSB7CiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHJlcmVuZGVyLmxvY2F0aW9uOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBnbG9iYWxWYXIuX19yZWFjdFJvdXRlckRhdGFSb3V0ZXIubmF2aWdhdGUocmVyZW5kZXIubG9jYXRpb24sIHsKICAgICAgICAgICAgICAgIHJlcGxhY2U6IHJlcmVuZGVyLnJlcGxhY2UKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IGxhc3RNYXRjaDsKICAgICAgICAgICAgZm9yIChjb25zdCBtYXRjaCBvZiByZXJlbmRlci5tYXRjaGVzKSB7CiAgICAgICAgICAgICAgZ2xvYmFsVmFyLl9fcmVhY3RSb3V0ZXJEYXRhUm91dGVyLnBhdGNoUm91dGVzKAogICAgICAgICAgICAgICAgKGxhc3RNYXRjaCA9PSBudWxsID8gdm9pZCAwIDogbGFzdE1hdGNoLmlkKSA/PyBudWxsLAogICAgICAgICAgICAgICAgW2NyZWF0ZVJvdXRlRnJvbVNlcnZlck1hbmlmZXN0KG1hdGNoKV0sCiAgICAgICAgICAgICAgICB0cnVlCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICBsYXN0TWF0Y2ggPSBtYXRjaDsKICAgICAgICAgICAgfQogICAgICAgICAgICB3aW5kb3cuX19yZWFjdFJvdXRlckRhdGFSb3V0ZXIuX2ludGVybmFsU2V0U3RhdGVEb05vdFVzZU9yWW91V2lsbEJyZWFrWW91ckFwcCgKICAgICAgICAgICAgICB7fQogICAgICAgICAgICApOwogICAgICAgICAgICBSZWFjdDQyLnN0YXJ0VHJhbnNpdGlvbigoKSA9PiB7CiAgICAgICAgICAgICAgd2luZG93Ll9fcmVhY3RSb3V0ZXJEYXRhUm91dGVyLl9pbnRlcm5hbFNldFN0YXRlRG9Ob3RVc2VPcllvdVdpbGxCcmVha1lvdXJBcHAoCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGxvYWRlckRhdGE6IE9iamVjdC5hc3NpZ24oCiAgICAgICAgICAgICAgICAgICAge30sCiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsVmFyLl9fcmVhY3RSb3V0ZXJEYXRhUm91dGVyLnN0YXRlLmxvYWRlckRhdGEsCiAgICAgICAgICAgICAgICAgICAgcmVyZW5kZXIubG9hZGVyRGF0YQogICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICBlcnJvcnM6IHJlcmVuZGVyLmVycm9ycyA/IE9iamVjdC5hc3NpZ24oCiAgICAgICAgICAgICAgICAgICAge30sCiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsVmFyLl9fcmVhY3RSb3V0ZXJEYXRhUm91dGVyLnN0YXRlLmVycm9ycywKICAgICAgICAgICAgICAgICAgICByZXJlbmRlci5lcnJvcnMKICAgICAgICAgICAgICAgICAgKSA6IG51bGwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICk7CiAgICB9CiAgICByZXR1cm4gcGF5bG9hZC5hY3Rpb25SZXN1bHQ7CiAgfTsKfQpmdW5jdGlvbiBjcmVhdGVSb3V0ZXJGcm9tUGF5bG9hZCh7CiAgZmV0Y2hJbXBsZW1lbnRhdGlvbiwKICBjcmVhdGVGcm9tUmVhZGFibGVTdHJlYW0sCiAgZ2V0Q29udGV4dCwKICBwYXlsb2FkCn0pIHsKICB2YXIgX2E7CiAgY29uc3QgZ2xvYmFsVmFyID0gd2luZG93OwogIGlmIChnbG9iYWxWYXIuX19yZWFjdFJvdXRlckRhdGFSb3V0ZXIgJiYgZ2xvYmFsVmFyLl9fcmVhY3RSb3V0ZXJSb3V0ZU1vZHVsZXMpCiAgICByZXR1cm4gewogICAgICByb3V0ZXI6IGdsb2JhbFZhci5fX3JlYWN0Um91dGVyRGF0YVJvdXRlciwKICAgICAgcm91dGVNb2R1bGVzOiBnbG9iYWxWYXIuX19yZWFjdFJvdXRlclJvdXRlTW9kdWxlcwogICAgfTsKICBpZiAocGF5bG9hZC50eXBlICE9PSAicmVuZGVyIikgdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBheWxvYWQgdHlwZSIpOwogIGdsb2JhbFZhci5fX3JlYWN0Um91dGVyUm91dGVNb2R1bGVzID0gZ2xvYmFsVmFyLl9fcmVhY3RSb3V0ZXJSb3V0ZU1vZHVsZXMgPz8ge307CiAgcG9wdWxhdGVSU0NSb3V0ZU1vZHVsZXMoZ2xvYmFsVmFyLl9fcmVhY3RSb3V0ZXJSb3V0ZU1vZHVsZXMsIHBheWxvYWQubWF0Y2hlcyk7CiAgbGV0IHBhdGNoZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpOwogIChfYSA9IHBheWxvYWQucGF0Y2hlcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmZvckVhY2goKHBhdGNoKSA9PiB7CiAgICB2YXIgX2EyOwogICAgaW52YXJpYW50KHBhdGNoLnBhcmVudElkLCAiSW52YWxpZCBwYXRjaCBwYXJlbnRJZCIpOwogICAgaWYgKCFwYXRjaGVzLmhhcyhwYXRjaC5wYXJlbnRJZCkpIHsKICAgICAgcGF0Y2hlcy5zZXQocGF0Y2gucGFyZW50SWQsIFtdKTsKICAgIH0KICAgIChfYTIgPSBwYXRjaGVzLmdldChwYXRjaC5wYXJlbnRJZCkpID09IG51bGwgPyB2b2lkIDAgOiBfYTIucHVzaChwYXRjaCk7CiAgfSk7CiAgbGV0IHJvdXRlcyA9IHBheWxvYWQubWF0Y2hlcy5yZWR1Y2VSaWdodCgocHJldmlvdXMsIG1hdGNoKSA9PiB7CiAgICBjb25zdCByb3V0ZSA9IGNyZWF0ZVJvdXRlRnJvbVNlcnZlck1hbmlmZXN0KAogICAgICBtYXRjaCwKICAgICAgcGF5bG9hZAogICAgKTsKICAgIGlmIChwcmV2aW91cy5sZW5ndGggPiAwKSB7CiAgICAgIHJvdXRlLmNoaWxkcmVuID0gcHJldmlvdXM7CiAgICAgIGxldCBjaGlsZHJlblRvUGF0Y2ggPSBwYXRjaGVzLmdldChtYXRjaC5pZCk7CiAgICAgIGlmIChjaGlsZHJlblRvUGF0Y2gpIHsKICAgICAgICByb3V0ZS5jaGlsZHJlbi5wdXNoKAogICAgICAgICAgLi4uY2hpbGRyZW5Ub1BhdGNoLm1hcCgocikgPT4gY3JlYXRlUm91dGVGcm9tU2VydmVyTWFuaWZlc3QocikpCiAgICAgICAgKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIFtyb3V0ZV07CiAgfSwgW10pOwogIGdsb2JhbFZhci5fX3JlYWN0Um91dGVyRGF0YVJvdXRlciA9IGNyZWF0ZVJvdXRlcih7CiAgICByb3V0ZXMsCiAgICBnZXRDb250ZXh0LAogICAgYmFzZW5hbWU6IHBheWxvYWQuYmFzZW5hbWUsCiAgICBoaXN0b3J5OiBjcmVhdGVCcm93c2VySGlzdG9yeSgpLAogICAgaHlkcmF0aW9uRGF0YTogZ2V0SHlkcmF0aW9uRGF0YSh7CiAgICAgIHN0YXRlOiB7CiAgICAgICAgbG9hZGVyRGF0YTogcGF5bG9hZC5sb2FkZXJEYXRhLAogICAgICAgIGFjdGlvbkRhdGE6IHBheWxvYWQuYWN0aW9uRGF0YSwKICAgICAgICBlcnJvcnM6IHBheWxvYWQuZXJyb3JzCiAgICAgIH0sCiAgICAgIHJvdXRlcywKICAgICAgZ2V0Um91dGVJbmZvOiAocm91dGVJZCkgPT4gewogICAgICAgIGxldCBtYXRjaCA9IHBheWxvYWQubWF0Y2hlcy5maW5kKChtKSA9PiBtLmlkID09PSByb3V0ZUlkKTsKICAgICAgICBpbnZhcmlhbnQobWF0Y2gsICJSb3V0ZSBub3QgZm91bmQgaW4gcGF5bG9hZCIpOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICBjbGllbnRMb2FkZXI6IG1hdGNoLmNsaWVudExvYWRlciwKICAgICAgICAgIGhhc0xvYWRlcjogbWF0Y2guaGFzTG9hZGVyLAogICAgICAgICAgaGFzSHlkcmF0ZUZhbGxiYWNrOiBtYXRjaC5oeWRyYXRlRmFsbGJhY2tFbGVtZW50ICE9IG51bGwKICAgICAgICB9OwogICAgICB9LAogICAgICBsb2NhdGlvbjogcGF5bG9hZC5sb2NhdGlvbiwKICAgICAgYmFzZW5hbWU6IHBheWxvYWQuYmFzZW5hbWUsCiAgICAgIGlzU3BhTW9kZTogZmFsc2UKICAgIH0pLAogICAgYXN5bmMgcGF0Y2hSb3V0ZXNPbk5hdmlnYXRpb24oeyBwYXRoLCBzaWduYWwgfSkgewogICAgICBpZiAoZGlzY292ZXJlZFBhdGhzMi5oYXMocGF0aCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgYXdhaXQgZmV0Y2hBbmRBcHBseU1hbmlmZXN0UGF0Y2hlczIoCiAgICAgICAgW3BhdGhdLAogICAgICAgIGNyZWF0ZUZyb21SZWFkYWJsZVN0cmVhbSwKICAgICAgICBmZXRjaEltcGxlbWVudGF0aW9uLAogICAgICAgIHNpZ25hbAogICAgICApOwogICAgfSwKICAgIC8vIEZJWE1FOiBQYXNzIGBidWlsZC5zc3JgIGludG8gdGhpcyBmdW5jdGlvbgogICAgZGF0YVN0cmF0ZWd5OiBnZXRSU0NTaW5nbGVGZXRjaERhdGFTdHJhdGVneSgKICAgICAgKCkgPT4gZ2xvYmFsVmFyLl9fcmVhY3RSb3V0ZXJEYXRhUm91dGVyLAogICAgICB0cnVlLAogICAgICBwYXlsb2FkLmJhc2VuYW1lLAogICAgICBjcmVhdGVGcm9tUmVhZGFibGVTdHJlYW0sCiAgICAgIGZldGNoSW1wbGVtZW50YXRpb24KICAgICkKICB9KTsKICBpZiAoZ2xvYmFsVmFyLl9fcmVhY3RSb3V0ZXJEYXRhUm91dGVyLnN0YXRlLmluaXRpYWxpemVkKSB7CiAgICBnbG9iYWxWYXIuX19yb3V0ZXJJbml0aWFsaXplZCA9IHRydWU7CiAgICBnbG9iYWxWYXIuX19yZWFjdFJvdXRlckRhdGFSb3V0ZXIuaW5pdGlhbGl6ZSgpOwogIH0gZWxzZSB7CiAgICBnbG9iYWxWYXIuX19yb3V0ZXJJbml0aWFsaXplZCA9IGZhbHNlOwogIH0KICBsZXQgbGFzdExvYWRlckRhdGEgPSB2b2lkIDA7CiAgZ2xvYmFsVmFyLl9fcmVhY3RSb3V0ZXJEYXRhUm91dGVyLnN1YnNjcmliZSgoeyBsb2FkZXJEYXRhLCBhY3Rpb25EYXRhIH0pID0+IHsKICAgIGlmIChsYXN0TG9hZGVyRGF0YSAhPT0gbG9hZGVyRGF0YSkgewogICAgICBnbG9iYWxWYXIuX19yb3V0ZXJBY3Rpb25JRCA9IChnbG9iYWxWYXIuX19yb3V0ZXJBY3Rpb25JRCA/PyAoZ2xvYmFsVmFyLl9fcm91dGVyQWN0aW9uSUQgPSAwKSkgKyAxOwogICAgfQogIH0pOwogIGdsb2JhbFZhci5fX3JlYWN0Um91dGVyRGF0YVJvdXRlci5fdXBkYXRlUm91dGVzRm9ySE1SID0gKHJvdXRlVXBkYXRlQnlSb3V0ZUlkKSA9PiB7CiAgICBjb25zdCBvbGRSb3V0ZXMgPSB3aW5kb3cuX19yZWFjdFJvdXRlckRhdGFSb3V0ZXIucm91dGVzOwogICAgY29uc3QgbmV3Um91dGVzID0gW107CiAgICBmdW5jdGlvbiB3YWxrUm91dGVzKHJvdXRlczIsIHBhcmVudElkKSB7CiAgICAgIHJldHVybiByb3V0ZXMyLm1hcCgocm91dGUpID0+IHsKICAgICAgICBjb25zdCByb3V0ZVVwZGF0ZSA9IHJvdXRlVXBkYXRlQnlSb3V0ZUlkLmdldChyb3V0ZS5pZCk7CiAgICAgICAgaWYgKHJvdXRlVXBkYXRlKSB7CiAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgIHJvdXRlTW9kdWxlLAogICAgICAgICAgICBoYXNBY3Rpb24sCiAgICAgICAgICAgIGhhc0NvbXBvbmVudCwKICAgICAgICAgICAgaGFzRXJyb3JCb3VuZGFyeSwKICAgICAgICAgICAgaGFzTG9hZGVyCiAgICAgICAgICB9ID0gcm91dGVVcGRhdGU7CiAgICAgICAgICBjb25zdCBuZXdSb3V0ZSA9IGNyZWF0ZVJvdXRlRnJvbVNlcnZlck1hbmlmZXN0KHsKICAgICAgICAgICAgY2xpZW50QWN0aW9uOiByb3V0ZU1vZHVsZS5jbGllbnRBY3Rpb24sCiAgICAgICAgICAgIGNsaWVudExvYWRlcjogcm91dGVNb2R1bGUuY2xpZW50TG9hZGVyLAogICAgICAgICAgICBlbGVtZW50OiByb3V0ZS5lbGVtZW50LAogICAgICAgICAgICBlcnJvckVsZW1lbnQ6IHJvdXRlLmVycm9yRWxlbWVudCwKICAgICAgICAgICAgaGFuZGxlOiByb3V0ZS5oYW5kbGUsCiAgICAgICAgICAgIGhhc0FjdGlvbiwKICAgICAgICAgICAgaGFzQ29tcG9uZW50LAogICAgICAgICAgICBoYXNFcnJvckJvdW5kYXJ5LAogICAgICAgICAgICBoYXNMb2FkZXIsCiAgICAgICAgICAgIGh5ZHJhdGVGYWxsYmFja0VsZW1lbnQ6IHJvdXRlLmh5ZHJhdGVGYWxsYmFja0VsZW1lbnQsCiAgICAgICAgICAgIGlkOiByb3V0ZS5pZCwKICAgICAgICAgICAgaW5kZXg6IHJvdXRlLmluZGV4LAogICAgICAgICAgICBsaW5rczogcm91dGVNb2R1bGUubGlua3MsCiAgICAgICAgICAgIG1ldGE6IHJvdXRlTW9kdWxlLm1ldGEsCiAgICAgICAgICAgIHBhcmVudElkLAogICAgICAgICAgICBwYXRoOiByb3V0ZS5wYXRoLAogICAgICAgICAgICBzaG91bGRSZXZhbGlkYXRlOiByb3V0ZU1vZHVsZS5zaG91bGRSZXZhbGlkYXRlCiAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChyb3V0ZS5jaGlsZHJlbikgewogICAgICAgICAgICBuZXdSb3V0ZS5jaGlsZHJlbiA9IHdhbGtSb3V0ZXMocm91dGUuY2hpbGRyZW4sIHJvdXRlLmlkKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBuZXdSb3V0ZTsKICAgICAgICB9CiAgICAgICAgY29uc3QgdXBkYXRlZFJvdXRlID0geyAuLi5yb3V0ZSB9OwogICAgICAgIGlmIChyb3V0ZS5jaGlsZHJlbikgewogICAgICAgICAgdXBkYXRlZFJvdXRlLmNoaWxkcmVuID0gd2Fsa1JvdXRlcyhyb3V0ZS5jaGlsZHJlbiwgcm91dGUuaWQpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdXBkYXRlZFJvdXRlOwogICAgICB9KTsKICAgIH0KICAgIG5ld1JvdXRlcy5wdXNoKAogICAgICAuLi53YWxrUm91dGVzKG9sZFJvdXRlcywgdm9pZCAwKQogICAgKTsKICAgIHdpbmRvdy5fX3JlYWN0Um91dGVyRGF0YVJvdXRlci5faW50ZXJuYWxTZXRSb3V0ZXMobmV3Um91dGVzKTsKICB9OwogIHJldHVybiB7CiAgICByb3V0ZXI6IGdsb2JhbFZhci5fX3JlYWN0Um91dGVyRGF0YVJvdXRlciwKICAgIHJvdXRlTW9kdWxlczogZ2xvYmFsVmFyLl9fcmVhY3RSb3V0ZXJSb3V0ZU1vZHVsZXMKICB9Owp9CnZhciByZW5kZXJlZFJvdXRlc0NvbnRleHQgPSBjcmVhdGVDb250ZXh0NCgpOwpmdW5jdGlvbiBnZXRSU0NTaW5nbGVGZXRjaERhdGFTdHJhdGVneShnZXRSb3V0ZXIsIHNzciwgYmFzZW5hbWUsIGNyZWF0ZUZyb21SZWFkYWJsZVN0cmVhbSwgZmV0Y2hJbXBsZW1lbnRhdGlvbikgewogIGxldCBkYXRhU3RyYXRlZ3kgPSBnZXRTaW5nbGVGZXRjaERhdGFTdHJhdGVneUltcGwoCiAgICBnZXRSb3V0ZXIsCiAgICAobWF0Y2gpID0+IHsKICAgICAgbGV0IE0gPSBtYXRjaDsKICAgICAgcmV0dXJuIHsKICAgICAgICBoYXNMb2FkZXI6IE0ucm91dGUuaGFzTG9hZGVyLAogICAgICAgIGhhc0NsaWVudExvYWRlcjogTS5yb3V0ZS5oYXNDbGllbnRMb2FkZXIsCiAgICAgICAgaGFzQ29tcG9uZW50OiBNLnJvdXRlLmhhc0NvbXBvbmVudCwKICAgICAgICBoYXNBY3Rpb246IE0ucm91dGUuaGFzQWN0aW9uLAogICAgICAgIGhhc0NsaWVudEFjdGlvbjogTS5yb3V0ZS5oYXNDbGllbnRBY3Rpb24sCiAgICAgICAgaGFzU2hvdWxkUmV2YWxpZGF0ZTogTS5yb3V0ZS5oYXNTaG91bGRSZXZhbGlkYXRlCiAgICAgIH07CiAgICB9LAogICAgLy8gcGFzcyBtYXAgaW50byBmZXRjaEFuZERlY29kZSBzbyBpdCBjYW4gYWRkIHBheWxvYWRzCiAgICBnZXRGZXRjaEFuZERlY29kZVZpYVJTQyhjcmVhdGVGcm9tUmVhZGFibGVTdHJlYW0sIGZldGNoSW1wbGVtZW50YXRpb24pLAogICAgc3NyLAogICAgYmFzZW5hbWUsCiAgICAvLyBJZiB0aGUgcm91dGUgaGFzIGEgY29tcG9uZW50IGJ1dCB3ZSBkb24ndCBoYXZlIGFuIGVsZW1lbnQsIHdlIG5lZWQgdG8gaGl0CiAgICAvLyB0aGUgc2VydmVyIGxvYWRlciBmbG93IHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB0aGUgY2xpZW50IGxvYWRlciBjYWxscwogICAgLy8gYHNlcnZlckxvYWRlcmAgb3Igbm90LCBvdGhlcndpc2Ugd2UnbGwgaGF2ZSBub3RoaW5nIHRvIHJlbmRlci4KICAgIChtYXRjaCkgPT4gewogICAgICBsZXQgTSA9IG1hdGNoOwogICAgICByZXR1cm4gTS5yb3V0ZS5oYXNDb21wb25lbnQgJiYgIU0ucm91dGUuZWxlbWVudDsKICAgIH0KICApOwogIHJldHVybiBhc3luYyAoYXJncykgPT4gYXJncy5ydW5DbGllbnRNaWRkbGV3YXJlKGFzeW5jICgpID0+IHsKICAgIGxldCBjb250ZXh0ID0gYXJncy5jb250ZXh0OwogICAgY29udGV4dC5zZXQocmVuZGVyZWRSb3V0ZXNDb250ZXh0LCBbXSk7CiAgICBsZXQgcmVzdWx0cyA9IGF3YWl0IGRhdGFTdHJhdGVneShhcmdzKTsKICAgIGNvbnN0IHJlbmRlcmVkUm91dGVzQnlJZCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgICBmb3IgKGNvbnN0IHJvdXRlIG9mIGNvbnRleHQuZ2V0KHJlbmRlcmVkUm91dGVzQ29udGV4dCkpIHsKICAgICAgaWYgKCFyZW5kZXJlZFJvdXRlc0J5SWQuaGFzKHJvdXRlLmlkKSkgewogICAgICAgIHJlbmRlcmVkUm91dGVzQnlJZC5zZXQocm91dGUuaWQsIFtdKTsKICAgICAgfQogICAgICByZW5kZXJlZFJvdXRlc0J5SWQuZ2V0KHJvdXRlLmlkKS5wdXNoKHJvdXRlKTsKICAgIH0KICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgYXJncy5tYXRjaGVzKSB7CiAgICAgIGNvbnN0IHJlbmRlcmVkUm91dGVzID0gcmVuZGVyZWRSb3V0ZXNCeUlkLmdldChtYXRjaC5yb3V0ZS5pZCk7CiAgICAgIGlmIChyZW5kZXJlZFJvdXRlcykgewogICAgICAgIGZvciAoY29uc3QgcmVuZGVyZWQgb2YgcmVuZGVyZWRSb3V0ZXMpIHsKICAgICAgICAgIHdpbmRvdy5fX3JlYWN0Um91dGVyRGF0YVJvdXRlci5wYXRjaFJvdXRlcygKICAgICAgICAgICAgcmVuZGVyZWQucGFyZW50SWQgPz8gbnVsbCwKICAgICAgICAgICAgW2NyZWF0ZVJvdXRlRnJvbVNlcnZlck1hbmlmZXN0KHJlbmRlcmVkKV0sCiAgICAgICAgICAgIHRydWUKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gcmVzdWx0czsKICB9KTsKfQpmdW5jdGlvbiBnZXRGZXRjaEFuZERlY29kZVZpYVJTQyhjcmVhdGVGcm9tUmVhZGFibGVTdHJlYW0sIGZldGNoSW1wbGVtZW50YXRpb24pIHsKICByZXR1cm4gYXN5bmMgKGFyZ3MsIGJhc2VuYW1lLCB0YXJnZXRSb3V0ZXMpID0+IHsKICAgIGxldCB7IHJlcXVlc3QsIGNvbnRleHQgfSA9IGFyZ3M7CiAgICBsZXQgdXJsID0gc2luZ2xlRmV0Y2hVcmwocmVxdWVzdC51cmwsIGJhc2VuYW1lLCAicnNjIik7CiAgICBpZiAocmVxdWVzdC5tZXRob2QgPT09ICJHRVQiKSB7CiAgICAgIHVybCA9IHN0cmlwSW5kZXhQYXJhbSh1cmwpOwogICAgICBpZiAodGFyZ2V0Um91dGVzKSB7CiAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoIl9yb3V0ZXMiLCB0YXJnZXRSb3V0ZXMuam9pbigiLCIpKTsKICAgICAgfQogICAgfQogICAgbGV0IHJlcyA9IGF3YWl0IGZldGNoSW1wbGVtZW50YXRpb24oCiAgICAgIG5ldyBSZXF1ZXN0KHVybCwgYXdhaXQgY3JlYXRlUmVxdWVzdEluaXQocmVxdWVzdCkpCiAgICApOwogICAgaWYgKHJlcy5zdGF0dXMgPT09IDQwNCAmJiAhcmVzLmhlYWRlcnMuaGFzKCJYLVJlbWl4LVJlc3BvbnNlIikpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yUmVzcG9uc2VJbXBsKDQwNCwgIk5vdCBGb3VuZCIsIHRydWUpOwogICAgfQogICAgaW52YXJpYW50KHJlcy5ib2R5LCAiTm8gcmVzcG9uc2UgYm9keSB0byBkZWNvZGUiKTsKICAgIHRyeSB7CiAgICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCBjcmVhdGVGcm9tUmVhZGFibGVTdHJlYW0ocmVzLmJvZHksIHsKICAgICAgICB0ZW1wb3JhcnlSZWZlcmVuY2VzOiB2b2lkIDAKICAgICAgfSk7CiAgICAgIGlmIChwYXlsb2FkLnR5cGUgPT09ICJyZWRpcmVjdCIpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgc3RhdHVzOiByZXMuc3RhdHVzLAogICAgICAgICAgZGF0YTogewogICAgICAgICAgICByZWRpcmVjdDogewogICAgICAgICAgICAgIHJlZGlyZWN0OiBwYXlsb2FkLmxvY2F0aW9uLAogICAgICAgICAgICAgIHJlbG9hZDogcGF5bG9hZC5yZWxvYWQsCiAgICAgICAgICAgICAgcmVwbGFjZTogcGF5bG9hZC5yZXBsYWNlLAogICAgICAgICAgICAgIHJldmFsaWRhdGU6IGZhbHNlLAogICAgICAgICAgICAgIHN0YXR1czogcGF5bG9hZC5zdGF0dXMKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KICAgICAgaWYgKHBheWxvYWQudHlwZSAhPT0gInJlbmRlciIpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlVuZXhwZWN0ZWQgcGF5bG9hZCB0eXBlIik7CiAgICAgIH0KICAgICAgY29udGV4dC5nZXQocmVuZGVyZWRSb3V0ZXNDb250ZXh0KS5wdXNoKC4uLnBheWxvYWQubWF0Y2hlcyk7CiAgICAgIGxldCByZXN1bHRzID0geyByb3V0ZXM6IHt9IH07CiAgICAgIGNvbnN0IGRhdGFLZXkgPSBpc011dGF0aW9uTWV0aG9kKHJlcXVlc3QubWV0aG9kKSA/ICJhY3Rpb25EYXRhIiA6ICJsb2FkZXJEYXRhIjsKICAgICAgZm9yIChsZXQgW3JvdXRlSWQsIGRhdGEyXSBvZiBPYmplY3QuZW50cmllcyhwYXlsb2FkW2RhdGFLZXldIHx8IHt9KSkgewogICAgICAgIHJlc3VsdHMucm91dGVzW3JvdXRlSWRdID0geyBkYXRhOiBkYXRhMiB9OwogICAgICB9CiAgICAgIGlmIChwYXlsb2FkLmVycm9ycykgewogICAgICAgIGZvciAobGV0IFtyb3V0ZUlkLCBlcnJvcl0gb2YgT2JqZWN0LmVudHJpZXMocGF5bG9hZC5lcnJvcnMpKSB7CiAgICAgICAgICByZXN1bHRzLnJvdXRlc1tyb3V0ZUlkXSA9IHsgZXJyb3IgfTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHsgc3RhdHVzOiByZXMuc3RhdHVzLCBkYXRhOiByZXN1bHRzIH07CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiVW5hYmxlIHRvIGRlY29kZSBSU0MgcmVzcG9uc2UiKTsKICAgIH0KICB9Owp9CmZ1bmN0aW9uIFJTQ0h5ZHJhdGVkUm91dGVyKHsKICBjcmVhdGVGcm9tUmVhZGFibGVTdHJlYW0sCiAgZmV0Y2g6IGZldGNoSW1wbGVtZW50YXRpb24gPSBmZXRjaCwKICBwYXlsb2FkLAogIHJvdXRlRGlzY292ZXJ5ID0gImVhZ2VyIiwKICBnZXRDb250ZXh0Cn0pIHsKICBpZiAocGF5bG9hZC50eXBlICE9PSAicmVuZGVyIikgdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBheWxvYWQgdHlwZSIpOwogIGxldCB7IHJvdXRlcjogcm91dGVyMiwgcm91dGVNb2R1bGVzIH0gPSBSZWFjdDQyLnVzZU1lbW8oCiAgICAoKSA9PiBjcmVhdGVSb3V0ZXJGcm9tUGF5bG9hZCh7CiAgICAgIHBheWxvYWQsCiAgICAgIGZldGNoSW1wbGVtZW50YXRpb24sCiAgICAgIGdldENvbnRleHQsCiAgICAgIGNyZWF0ZUZyb21SZWFkYWJsZVN0cmVhbQogICAgfSksCiAgICBbY3JlYXRlRnJvbVJlYWRhYmxlU3RyZWFtLCBwYXlsb2FkLCBmZXRjaEltcGxlbWVudGF0aW9uLCBnZXRDb250ZXh0XQogICk7CiAgUmVhY3Q0Mi51c2VFZmZlY3QoKCkgPT4gewogICAgc2V0SXNIeWRyYXRlZCgpOwogIH0sIFtdKTsKICBSZWFjdDQyLnVzZUxheW91dEVmZmVjdCgoKSA9PiB7CiAgICBjb25zdCBnbG9iYWxWYXIgPSB3aW5kb3c7CiAgICBpZiAoIWdsb2JhbFZhci5fX3JvdXRlckluaXRpYWxpemVkKSB7CiAgICAgIGdsb2JhbFZhci5fX3JvdXRlckluaXRpYWxpemVkID0gdHJ1ZTsKICAgICAgZ2xvYmFsVmFyLl9fcmVhY3RSb3V0ZXJEYXRhUm91dGVyLmluaXRpYWxpemUoKTsKICAgIH0KICB9LCBbXSk7CiAgbGV0IFtsb2NhdGlvbjIsIHNldExvY2F0aW9uXSA9IFJlYWN0NDIudXNlU3RhdGUocm91dGVyMi5zdGF0ZS5sb2NhdGlvbik7CiAgUmVhY3Q0Mi51c2VMYXlvdXRFZmZlY3QoCiAgICAoKSA9PiByb3V0ZXIyLnN1YnNjcmliZSgobmV3U3RhdGUpID0+IHsKICAgICAgaWYgKG5ld1N0YXRlLmxvY2F0aW9uICE9PSBsb2NhdGlvbjIpIHsKICAgICAgICBzZXRMb2NhdGlvbihuZXdTdGF0ZS5sb2NhdGlvbik7CiAgICAgIH0KICAgIH0pLAogICAgW3JvdXRlcjIsIGxvY2F0aW9uMl0KICApOwogIFJlYWN0NDIudXNlRWZmZWN0KCgpID0+IHsKICAgIHZhciBfYSwgX2I7CiAgICBpZiAocm91dGVEaXNjb3ZlcnkgPT09ICJsYXp5IiB8fCAvLyBAdHMtZXhwZWN0LWVycm9yIC0gVFMgZG9lc24ndCBrbm93IGFib3V0IHRoaXMgeWV0CiAgICAoKF9iID0gKF9hID0gd2luZG93Lm5hdmlnYXRvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNvbm5lY3Rpb24pID09IG51bGwgPyB2b2lkIDAgOiBfYi5zYXZlRGF0YSkgPT09IHRydWUpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgZnVuY3Rpb24gcmVnaXN0ZXJFbGVtZW50KGVsKSB7CiAgICAgIGxldCBwYXRoID0gZWwudGFnTmFtZSA9PT0gIkZPUk0iID8gZWwuZ2V0QXR0cmlidXRlKCJhY3Rpb24iKSA6IGVsLmdldEF0dHJpYnV0ZSgiaHJlZiIpOwogICAgICBpZiAoIXBhdGgpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbGV0IHBhdGhuYW1lID0gZWwudGFnTmFtZSA9PT0gIkEiID8gZWwucGF0aG5hbWUgOiBuZXcgVVJMKHBhdGgsIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pLnBhdGhuYW1lOwogICAgICBpZiAoIWRpc2NvdmVyZWRQYXRoczIuaGFzKHBhdGhuYW1lKSkgewogICAgICAgIG5leHRQYXRoczIuYWRkKHBhdGhuYW1lKTsKICAgICAgfQogICAgfQogICAgYXN5bmMgZnVuY3Rpb24gZmV0Y2hQYXRjaGVzKCkgewogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJhW2RhdGEtZGlzY292ZXJdLCBmb3JtW2RhdGEtZGlzY292ZXJdIikuZm9yRWFjaChyZWdpc3RlckVsZW1lbnQpOwogICAgICBsZXQgcGF0aHMgPSBBcnJheS5mcm9tKG5leHRQYXRoczIua2V5cygpKS5maWx0ZXIoKHBhdGgpID0+IHsKICAgICAgICBpZiAoZGlzY292ZXJlZFBhdGhzMi5oYXMocGF0aCkpIHsKICAgICAgICAgIG5leHRQYXRoczIuZGVsZXRlKHBhdGgpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSk7CiAgICAgIGlmIChwYXRocy5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICBhd2FpdCBmZXRjaEFuZEFwcGx5TWFuaWZlc3RQYXRjaGVzMigKICAgICAgICAgIHBhdGhzLAogICAgICAgICAgY3JlYXRlRnJvbVJlYWRhYmxlU3RyZWFtLAogICAgICAgICAgZmV0Y2hJbXBsZW1lbnRhdGlvbgogICAgICAgICk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCJGYWlsZWQgdG8gZmV0Y2ggbWFuaWZlc3QgcGF0Y2hlcyIsIGUpOwogICAgICB9CiAgICB9CiAgICBsZXQgZGVib3VuY2VkRmV0Y2hQYXRjaGVzID0gZGVib3VuY2UyKGZldGNoUGF0Y2hlcywgMTAwKTsKICAgIGZldGNoUGF0Y2hlcygpOwogICAgbGV0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4gZGVib3VuY2VkRmV0Y2hQYXRjaGVzKCkpOwogICAgb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHsKICAgICAgc3VidHJlZTogdHJ1ZSwKICAgICAgY2hpbGRMaXN0OiB0cnVlLAogICAgICBhdHRyaWJ1dGVzOiB0cnVlLAogICAgICBhdHRyaWJ1dGVGaWx0ZXI6IFsiZGF0YS1kaXNjb3ZlciIsICJocmVmIiwgImFjdGlvbiJdCiAgICB9KTsKICB9LCBbcm91dGVEaXNjb3ZlcnksIGNyZWF0ZUZyb21SZWFkYWJsZVN0cmVhbSwgZmV0Y2hJbXBsZW1lbnRhdGlvbl0pOwogIGNvbnN0IGZyYW1ld29ya0NvbnRleHQgPSB7CiAgICBmdXR1cmU6IHsKICAgICAgLy8gVGhlc2UgZmxhZ3MgaGF2ZSBubyBydW50aW1lIGltcGFjdCBzbyBjYW4gYWx3YXlzIGJlIGZhbHNlLiAgSWYgd2UgYWRkCiAgICAgIC8vIGZsYWdzIHRoYXQgZHJpdmUgcnVudGltZSBiZWhhdmlvciB0aGV5J2xsIG5lZWQgdG8gYmUgcHJveGllZCB0aHJvdWdoLgogICAgICB2OF9taWRkbGV3YXJlOiBmYWxzZSwKICAgICAgdW5zdGFibGVfc3ViUmVzb3VyY2VJbnRlZ3JpdHk6IGZhbHNlCiAgICB9LAogICAgaXNTcGFNb2RlOiBmYWxzZSwKICAgIHNzcjogdHJ1ZSwKICAgIGNyaXRpY2FsQ3NzOiAiIiwKICAgIG1hbmlmZXN0OiB7CiAgICAgIHJvdXRlczoge30sCiAgICAgIHZlcnNpb246ICIxIiwKICAgICAgdXJsOiAiIiwKICAgICAgZW50cnk6IHsKICAgICAgICBtb2R1bGU6ICIiLAogICAgICAgIGltcG9ydHM6IFtdCiAgICAgIH0KICAgIH0sCiAgICByb3V0ZURpc2NvdmVyeTogeyBtb2RlOiAibGF6eSIsIG1hbmlmZXN0UGF0aDogIi9fX21hbmlmZXN0IiB9LAogICAgcm91dGVNb2R1bGVzCiAgfTsKICByZXR1cm4gUmVhY3Q0Mi5jcmVhdGVFbGVtZW50KFJTQ1JvdXRlckNvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IHRydWUgfSwgUmVhY3Q0Mi5jcmVhdGVFbGVtZW50KFJTQ1JvdXRlckdsb2JhbEVycm9yQm91bmRhcnksIHsgbG9jYXRpb246IGxvY2F0aW9uMiB9LCBSZWFjdDQyLmNyZWF0ZUVsZW1lbnQoRnJhbWV3b3JrQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogZnJhbWV3b3JrQ29udGV4dCB9LCBSZWFjdDQyLmNyZWF0ZUVsZW1lbnQoUm91dGVyUHJvdmlkZXIsIHsgcm91dGVyOiByb3V0ZXIyLCBmbHVzaFN5bmM6IFJlYWN0RE9NLmZsdXNoU3luYyB9KSkpKTsKfQpmdW5jdGlvbiBjcmVhdGVSb3V0ZUZyb21TZXJ2ZXJNYW5pZmVzdChtYXRjaCwgcGF5bG9hZCkgewogIHZhciBfYSwgX2I7CiAgbGV0IGhhc0luaXRpYWxEYXRhID0gcGF5bG9hZCAmJiBtYXRjaC5pZCBpbiBwYXlsb2FkLmxvYWRlckRhdGE7CiAgbGV0IGluaXRpYWxEYXRhID0gcGF5bG9hZCA9PSBudWxsID8gdm9pZCAwIDogcGF5bG9hZC5sb2FkZXJEYXRhW21hdGNoLmlkXTsKICBsZXQgaGFzSW5pdGlhbEVycm9yID0gKHBheWxvYWQgPT0gbnVsbCA/IHZvaWQgMCA6IHBheWxvYWQuZXJyb3JzKSAmJiBtYXRjaC5pZCBpbiBwYXlsb2FkLmVycm9yczsKICBsZXQgaW5pdGlhbEVycm9yID0gKF9hID0gcGF5bG9hZCA9PSBudWxsID8gdm9pZCAwIDogcGF5bG9hZC5lcnJvcnMpID09IG51bGwgPyB2b2lkIDAgOiBfYVttYXRjaC5pZF07CiAgbGV0IGlzSHlkcmF0aW9uUmVxdWVzdCA9ICgoX2IgPSBtYXRjaC5jbGllbnRMb2FkZXIpID09IG51bGwgPyB2b2lkIDAgOiBfYi5oeWRyYXRlKSA9PT0gdHJ1ZSB8fCAhbWF0Y2guaGFzTG9hZGVyIHx8IC8vIElmIHRoZSByb3V0ZSBoYXMgYSBjb21wb25lbnQgYnV0IHdlIGRvbid0IGhhdmUgYW4gZWxlbWVudCwgd2UgbmVlZCB0byBoaXQKICAvLyB0aGUgc2VydmVyIGxvYWRlciBmbG93IHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB0aGUgY2xpZW50IGxvYWRlciBjYWxscwogIC8vIGBzZXJ2ZXJMb2FkZXJgIG9yIG5vdCwgb3RoZXJ3aXNlIHdlJ2xsIGhhdmUgbm90aGluZyB0byByZW5kZXIuCiAgbWF0Y2guaGFzQ29tcG9uZW50ICYmICFtYXRjaC5lbGVtZW50OwogIGludmFyaWFudCh3aW5kb3cuX19yZWFjdFJvdXRlclJvdXRlTW9kdWxlcyk7CiAgcG9wdWxhdGVSU0NSb3V0ZU1vZHVsZXMod2luZG93Ll9fcmVhY3RSb3V0ZXJSb3V0ZU1vZHVsZXMsIG1hdGNoKTsKICBsZXQgZGF0YVJvdXRlID0gewogICAgaWQ6IG1hdGNoLmlkLAogICAgZWxlbWVudDogbWF0Y2guZWxlbWVudCwKICAgIGVycm9yRWxlbWVudDogbWF0Y2guZXJyb3JFbGVtZW50LAogICAgaGFuZGxlOiBtYXRjaC5oYW5kbGUsCiAgICBoYXNFcnJvckJvdW5kYXJ5OiBtYXRjaC5oYXNFcnJvckJvdW5kYXJ5LAogICAgaHlkcmF0ZUZhbGxiYWNrRWxlbWVudDogbWF0Y2guaHlkcmF0ZUZhbGxiYWNrRWxlbWVudCwKICAgIGluZGV4OiBtYXRjaC5pbmRleCwKICAgIGxvYWRlcjogbWF0Y2guY2xpZW50TG9hZGVyID8gYXN5bmMgKGFyZ3MsIHNpbmdsZUZldGNoKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IG1hdGNoLmNsaWVudExvYWRlcih7CiAgICAgICAgICAuLi5hcmdzLAogICAgICAgICAgc2VydmVyTG9hZGVyOiAoKSA9PiB7CiAgICAgICAgICAgIHByZXZlbnRJbnZhbGlkU2VydmVySGFuZGxlckNhbGwyKAogICAgICAgICAgICAgICJsb2FkZXIiLAogICAgICAgICAgICAgIG1hdGNoLmlkLAogICAgICAgICAgICAgIG1hdGNoLmhhc0xvYWRlcgogICAgICAgICAgICApOwogICAgICAgICAgICBpZiAoaXNIeWRyYXRpb25SZXF1ZXN0KSB7CiAgICAgICAgICAgICAgaWYgKGhhc0luaXRpYWxEYXRhKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaW5pdGlhbERhdGE7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChoYXNJbml0aWFsRXJyb3IpIHsKICAgICAgICAgICAgICAgIHRocm93IGluaXRpYWxFcnJvcjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGNhbGxTaW5nbGVGZXRjaChzaW5nbGVGZXRjaCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBpc0h5ZHJhdGlvblJlcXVlc3QgPSBmYWxzZTsKICAgICAgfQogICAgfSA6ICgKICAgICAgLy8gV2UgYWx3YXlzIG1ha2UgdGhlIGNhbGwgaW4gdGhpcyBSU0Mgd29ybGQgc2luY2UgZXZlbiBpZiB3ZSBkb24ndAogICAgICAvLyBoYXZlIGEgYGxvYWRlcmAgd2UgbWF5IG5lZWQgdG8gZ2V0IHRoZSBgZWxlbWVudGAgaW1wbGVtZW50YXRpb24KICAgICAgKChfLCBzaW5nbGVGZXRjaCkgPT4gY2FsbFNpbmdsZUZldGNoKHNpbmdsZUZldGNoKSkKICAgICksCiAgICBhY3Rpb246IG1hdGNoLmNsaWVudEFjdGlvbiA/IChhcmdzLCBzaW5nbGVGZXRjaCkgPT4gbWF0Y2guY2xpZW50QWN0aW9uKHsKICAgICAgLi4uYXJncywKICAgICAgc2VydmVyQWN0aW9uOiBhc3luYyAoKSA9PiB7CiAgICAgICAgcHJldmVudEludmFsaWRTZXJ2ZXJIYW5kbGVyQ2FsbDIoCiAgICAgICAgICAiYWN0aW9uIiwKICAgICAgICAgIG1hdGNoLmlkLAogICAgICAgICAgbWF0Y2guaGFzTG9hZGVyCiAgICAgICAgKTsKICAgICAgICByZXR1cm4gYXdhaXQgY2FsbFNpbmdsZUZldGNoKHNpbmdsZUZldGNoKTsKICAgICAgfQogICAgfSkgOiBtYXRjaC5oYXNBY3Rpb24gPyAoXywgc2luZ2xlRmV0Y2gpID0+IGNhbGxTaW5nbGVGZXRjaChzaW5nbGVGZXRjaCkgOiAoKSA9PiB7CiAgICAgIHRocm93IG5vQWN0aW9uRGVmaW5lZEVycm9yKCJhY3Rpb24iLCBtYXRjaC5pZCk7CiAgICB9LAogICAgcGF0aDogbWF0Y2gucGF0aCwKICAgIHNob3VsZFJldmFsaWRhdGU6IG1hdGNoLnNob3VsZFJldmFsaWRhdGUsCiAgICAvLyBXZSBhbHdheXMgaGF2ZSBhICJsb2FkZXIiIGluIHRoaXMgUlNDIHdvcmxkIHNpbmNlIGV2ZW4gaWYgd2UgZG9uJ3QKICAgIC8vIGhhdmUgYSBgbG9hZGVyYCB3ZSBtYXkgbmVlZCB0byBnZXQgdGhlIGBlbGVtZW50YCBpbXBsZW1lbnRhdGlvbgogICAgaGFzTG9hZGVyOiB0cnVlLAogICAgaGFzQ2xpZW50TG9hZGVyOiBtYXRjaC5jbGllbnRMb2FkZXIgIT0gbnVsbCwKICAgIGhhc0FjdGlvbjogbWF0Y2guaGFzQWN0aW9uLAogICAgaGFzQ2xpZW50QWN0aW9uOiBtYXRjaC5jbGllbnRBY3Rpb24gIT0gbnVsbCwKICAgIGhhc1Nob3VsZFJldmFsaWRhdGU6IG1hdGNoLnNob3VsZFJldmFsaWRhdGUgIT0gbnVsbAogIH07CiAgaWYgKHR5cGVvZiBkYXRhUm91dGUubG9hZGVyID09PSAiZnVuY3Rpb24iKSB7CiAgICBkYXRhUm91dGUubG9hZGVyLmh5ZHJhdGUgPSBzaG91bGRIeWRyYXRlUm91dGVMb2FkZXIoCiAgICAgIG1hdGNoLmlkLAogICAgICBtYXRjaC5jbGllbnRMb2FkZXIsCiAgICAgIG1hdGNoLmhhc0xvYWRlciwKICAgICAgZmFsc2UKICAgICk7CiAgfQogIHJldHVybiBkYXRhUm91dGU7Cn0KZnVuY3Rpb24gY2FsbFNpbmdsZUZldGNoKHNpbmdsZUZldGNoKSB7CiAgaW52YXJpYW50KHR5cGVvZiBzaW5nbGVGZXRjaCA9PT0gImZ1bmN0aW9uIiwgIkludmFsaWQgc2luZ2xlRmV0Y2ggcGFyYW1ldGVyIik7CiAgcmV0dXJuIHNpbmdsZUZldGNoKCk7Cn0KZnVuY3Rpb24gcHJldmVudEludmFsaWRTZXJ2ZXJIYW5kbGVyQ2FsbDIodHlwZSwgcm91dGVJZCwgaGFzSGFuZGxlcikgewogIGlmICghaGFzSGFuZGxlcikgewogICAgbGV0IGZuID0gdHlwZSA9PT0gImFjdGlvbiIgPyAic2VydmVyQWN0aW9uKCkiIDogInNlcnZlckxvYWRlcigpIjsKICAgIGxldCBtc2cgPSBgWW91IGFyZSB0cnlpbmcgdG8gY2FsbCAke2ZufSBvbiBhIHJvdXRlIHRoYXQgZG9lcyBub3QgaGF2ZSBhIHNlcnZlciAke3R5cGV9IChyb3V0ZUlkOiAiJHtyb3V0ZUlkfSIpYDsKICAgIGNvbnNvbGUuZXJyb3IobXNnKTsKICAgIHRocm93IG5ldyBFcnJvclJlc3BvbnNlSW1wbCg0MDAsICJCYWQgUmVxdWVzdCIsIG5ldyBFcnJvcihtc2cpLCB0cnVlKTsKICB9Cn0KdmFyIG5leHRQYXRoczIgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwp2YXIgZGlzY292ZXJlZFBhdGhzTWF4U2l6ZTIgPSAxZTM7CnZhciBkaXNjb3ZlcmVkUGF0aHMyID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKdmFyIFVSTF9MSU1JVDIgPSA3NjgwOwpmdW5jdGlvbiBnZXRNYW5pZmVzdFVybChwYXRocykgewogIGlmIChwYXRocy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiBudWxsOwogIH0KICBpZiAocGF0aHMubGVuZ3RoID09PSAxKSB7CiAgICByZXR1cm4gbmV3IFVSTChgJHtwYXRoc1swXX0ubWFuaWZlc3RgLCB3aW5kb3cubG9jYXRpb24ub3JpZ2luKTsKICB9CiAgY29uc3QgZ2xvYmFsVmFyID0gd2luZG93OwogIGxldCBiYXNlbmFtZSA9IChnbG9iYWxWYXIuX19yZWFjdFJvdXRlckRhdGFSb3V0ZXIuYmFzZW5hbWUgPz8gIiIpLnJlcGxhY2UoCiAgICAvXlwvfFwvJC9nLAogICAgIiIKICApOwogIGxldCB1cmwgPSBuZXcgVVJMKGAke2Jhc2VuYW1lfS8ubWFuaWZlc3RgLCB3aW5kb3cubG9jYXRpb24ub3JpZ2luKTsKICBwYXRocy5zb3J0KCkuZm9yRWFjaCgocGF0aCkgPT4gdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoInAiLCBwYXRoKSk7CiAgcmV0dXJuIHVybDsKfQphc3luYyBmdW5jdGlvbiBmZXRjaEFuZEFwcGx5TWFuaWZlc3RQYXRjaGVzMihwYXRocywgY3JlYXRlRnJvbVJlYWRhYmxlU3RyZWFtLCBmZXRjaEltcGxlbWVudGF0aW9uLCBzaWduYWwpIHsKICBsZXQgdXJsID0gZ2V0TWFuaWZlc3RVcmwocGF0aHMpOwogIGlmICh1cmwgPT0gbnVsbCkgewogICAgcmV0dXJuOwogIH0KICBpZiAodXJsLnRvU3RyaW5nKCkubGVuZ3RoID4gVVJMX0xJTUlUMikgewogICAgbmV4dFBhdGhzMi5jbGVhcigpOwogICAgcmV0dXJuOwogIH0KICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaEltcGxlbWVudGF0aW9uKG5ldyBSZXF1ZXN0KHVybCwgeyBzaWduYWwgfSkpOwogIGlmICghcmVzcG9uc2UuYm9keSB8fCByZXNwb25zZS5zdGF0dXMgPCAyMDAgfHwgcmVzcG9uc2Uuc3RhdHVzID49IDMwMCkgewogICAgdGhyb3cgbmV3IEVycm9yKCJVbmFibGUgdG8gZmV0Y2ggbmV3IHJvdXRlIG1hdGNoZXMgZnJvbSB0aGUgc2VydmVyIik7CiAgfQogIGxldCBwYXlsb2FkID0gYXdhaXQgY3JlYXRlRnJvbVJlYWRhYmxlU3RyZWFtKHJlc3BvbnNlLmJvZHksIHsKICAgIHRlbXBvcmFyeVJlZmVyZW5jZXM6IHZvaWQgMAogIH0pOwogIGlmIChwYXlsb2FkLnR5cGUgIT09ICJtYW5pZmVzdCIpIHsKICAgIHRocm93IG5ldyBFcnJvcigiRmFpbGVkIHRvIHBhdGNoIHJvdXRlcyIpOwogIH0KICBwYXRocy5mb3JFYWNoKChwKSA9PiBhZGRUb0ZpZm9RdWV1ZTIocCwgZGlzY292ZXJlZFBhdGhzMikpOwogIHBheWxvYWQucGF0Y2hlcy5mb3JFYWNoKChwKSA9PiB7CiAgICB3aW5kb3cuX19yZWFjdFJvdXRlckRhdGFSb3V0ZXIucGF0Y2hSb3V0ZXMoCiAgICAgIHAucGFyZW50SWQgPz8gbnVsbCwKICAgICAgW2NyZWF0ZVJvdXRlRnJvbVNlcnZlck1hbmlmZXN0KHApXQogICAgKTsKICB9KTsKfQpmdW5jdGlvbiBhZGRUb0ZpZm9RdWV1ZTIocGF0aCwgcXVldWUpIHsKICBpZiAocXVldWUuc2l6ZSA+PSBkaXNjb3ZlcmVkUGF0aHNNYXhTaXplMikgewogICAgbGV0IGZpcnN0ID0gcXVldWUudmFsdWVzKCkubmV4dCgpLnZhbHVlOwogICAgcXVldWUuZGVsZXRlKGZpcnN0KTsKICB9CiAgcXVldWUuYWRkKHBhdGgpOwp9CmZ1bmN0aW9uIGRlYm91bmNlMihjYWxsYmFjaywgd2FpdCkgewogIGxldCB0aW1lb3V0SWQ7CiAgcmV0dXJuICguLi5hcmdzKSA9PiB7CiAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7CiAgICB0aW1lb3V0SWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiBjYWxsYmFjayguLi5hcmdzKSwgd2FpdCk7CiAgfTsKfQp2YXIgZW5jb2RlcjIgPSBuZXcgVGV4dEVuY29kZXIoKTsKdmFyIHRyYWlsZXIgPSAiPC9ib2R5PjwvaHRtbD4iOwpmdW5jdGlvbiBpbmplY3RSU0NQYXlsb2FkKHJzY1N0cmVhbSkgewogIGxldCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7CiAgbGV0IHJlc29sdmVGbGlnaHREYXRhUHJvbWlzZTsKICBsZXQgZmxpZ2h0RGF0YVByb21pc2UgPSBuZXcgUHJvbWlzZSgKICAgIChyZXNvbHZlKSA9PiByZXNvbHZlRmxpZ2h0RGF0YVByb21pc2UgPSByZXNvbHZlCiAgKTsKICBsZXQgc3RhcnRlZFJTQyA9IGZhbHNlOwogIGxldCBidWZmZXJlZCA9IFtdOwogIGxldCB0aW1lb3V0ID0gbnVsbDsKICBmdW5jdGlvbiBmbHVzaEJ1ZmZlcmVkQ2h1bmtzKGNvbnRyb2xsZXIpIHsKICAgIGZvciAobGV0IGNodW5rIG9mIGJ1ZmZlcmVkKSB7CiAgICAgIGxldCBidWYgPSBkZWNvZGVyLmRlY29kZShjaHVuaywgeyBzdHJlYW06IHRydWUgfSk7CiAgICAgIGlmIChidWYuZW5kc1dpdGgodHJhaWxlcikpIHsKICAgICAgICBidWYgPSBidWYuc2xpY2UoMCwgLXRyYWlsZXIubGVuZ3RoKTsKICAgICAgfQogICAgICBjb250cm9sbGVyLmVucXVldWUoZW5jb2RlcjIuZW5jb2RlKGJ1ZikpOwogICAgfQogICAgYnVmZmVyZWQubGVuZ3RoID0gMDsKICAgIHRpbWVvdXQgPSBudWxsOwogIH0KICByZXR1cm4gbmV3IFRyYW5zZm9ybVN0cmVhbSh7CiAgICB0cmFuc2Zvcm0oY2h1bmssIGNvbnRyb2xsZXIpIHsKICAgICAgYnVmZmVyZWQucHVzaChjaHVuayk7CiAgICAgIGlmICh0aW1lb3V0KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsKICAgICAgICBmbHVzaEJ1ZmZlcmVkQ2h1bmtzKGNvbnRyb2xsZXIpOwogICAgICAgIGlmICghc3RhcnRlZFJTQykgewogICAgICAgICAgc3RhcnRlZFJTQyA9IHRydWU7CiAgICAgICAgICB3cml0ZVJTQ1N0cmVhbShyc2NTdHJlYW0sIGNvbnRyb2xsZXIpLmNhdGNoKChlcnIpID0+IGNvbnRyb2xsZXIuZXJyb3IoZXJyKSkudGhlbihyZXNvbHZlRmxpZ2h0RGF0YVByb21pc2UpOwogICAgICAgIH0KICAgICAgfSwgMCk7CiAgICB9LAogICAgYXN5bmMgZmx1c2goY29udHJvbGxlcikgewogICAgICBhd2FpdCBmbGlnaHREYXRhUHJvbWlzZTsKICAgICAgaWYgKHRpbWVvdXQpIHsKICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7CiAgICAgICAgZmx1c2hCdWZmZXJlZENodW5rcyhjb250cm9sbGVyKTsKICAgICAgfQogICAgICBjb250cm9sbGVyLmVucXVldWUoZW5jb2RlcjIuZW5jb2RlKCI8L2JvZHk+PC9odG1sPiIpKTsKICAgIH0KICB9KTsKfQphc3luYyBmdW5jdGlvbiB3cml0ZVJTQ1N0cmVhbShyc2NTdHJlYW0sIGNvbnRyb2xsZXIpIHsKICBsZXQgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigidXRmLTgiLCB7IGZhdGFsOiB0cnVlIH0pOwogIGNvbnN0IHJlYWRlciA9IHJzY1N0cmVhbS5nZXRSZWFkZXIoKTsKICB0cnkgewogICAgbGV0IHJlYWQ7CiAgICB3aGlsZSAoKHJlYWQgPSBhd2FpdCByZWFkZXIucmVhZCgpKSAmJiAhcmVhZC5kb25lKSB7CiAgICAgIGNvbnN0IGNodW5rID0gcmVhZC52YWx1ZTsKICAgICAgdHJ5IHsKICAgICAgICB3cml0ZUNodW5rKAogICAgICAgICAgSlNPTi5zdHJpbmdpZnkoZGVjb2Rlci5kZWNvZGUoY2h1bmssIHsgc3RyZWFtOiB0cnVlIH0pKSwKICAgICAgICAgIGNvbnRyb2xsZXIKICAgICAgICApOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBsZXQgYmFzZTY0ID0gSlNPTi5zdHJpbmdpZnkoYnRvYShTdHJpbmcuZnJvbUNvZGVQb2ludCguLi5jaHVuaykpKTsKICAgICAgICB3cml0ZUNodW5rKAogICAgICAgICAgYFVpbnQ4QXJyYXkuZnJvbShhdG9iKCR7YmFzZTY0fSksIG0gPT4gbS5jb2RlUG9pbnRBdCgwKSlgLAogICAgICAgICAgY29udHJvbGxlcgogICAgICAgICk7CiAgICAgIH0KICAgIH0KICB9IGZpbmFsbHkgewogICAgcmVhZGVyLnJlbGVhc2VMb2NrKCk7CiAgfQogIGxldCByZW1haW5pbmcgPSBkZWNvZGVyLmRlY29kZSgpOwogIGlmIChyZW1haW5pbmcubGVuZ3RoKSB7CiAgICB3cml0ZUNodW5rKEpTT04uc3RyaW5naWZ5KHJlbWFpbmluZyksIGNvbnRyb2xsZXIpOwogIH0KfQpmdW5jdGlvbiB3cml0ZUNodW5rKGNodW5rLCBjb250cm9sbGVyKSB7CiAgY29udHJvbGxlci5lbnF1ZXVlKAogICAgZW5jb2RlcjIuZW5jb2RlKAogICAgICBgPHNjcmlwdD4ke2VzY2FwZVNjcmlwdCgKICAgICAgICBgKHNlbGYuX19GTElHSFRfREFUQXx8PVtdKS5wdXNoKCR7Y2h1bmt9KWAKICAgICAgKX08XC9zY3JpcHQ+YAogICAgKQogICk7Cn0KZnVuY3Rpb24gZXNjYXBlU2NyaXB0KHNjcmlwdCkgewogIHJldHVybiBzY3JpcHQucmVwbGFjZSgvPCEtLS9nLCAiPFxcIS0tIikucmVwbGFjZSgvPFwvKHNjcmlwdCkvZ2ksICI8L1xcJDEiKTsKfQp2YXIgUkVBQ1RfVVNFID0gInVzZSI7CnZhciB1c2VJbXBsID0gUmVhY3Q1MltSRUFDVF9VU0VdOwpmdW5jdGlvbiB1c2VTYWZlKHByb21pc2UpIHsKICBpZiAodXNlSW1wbCkgewogICAgcmV0dXJuIHVzZUltcGwocHJvbWlzZSk7CiAgfQogIHRocm93IG5ldyBFcnJvcigiUmVhY3QgUm91dGVyIHY3IHJlcXVpcmVzIFJlYWN0IDE5KyBmb3IgUlNDIGZlYXR1cmVzLiIpOwp9CmFzeW5jIGZ1bmN0aW9uIHJvdXRlUlNDU2VydmVyUmVxdWVzdCh7CiAgcmVxdWVzdCwKICBmZXRjaFNlcnZlciwKICBjcmVhdGVGcm9tUmVhZGFibGVTdHJlYW0sCiAgcmVuZGVySFRNTCwKICBoeWRyYXRlOiBoeWRyYXRlMiA9IHRydWUKfSkgewogIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxdWVzdC51cmwpOwogIGNvbnN0IGlzRGF0YVJlcXVlc3QgPSBpc1JlYWN0U2VydmVyUmVxdWVzdCh1cmwpOwogIGNvbnN0IHJlc3BvbmRXaXRoUlNDUGF5bG9hZCA9IGlzRGF0YVJlcXVlc3QgfHwgaXNNYW5pZmVzdFJlcXVlc3QodXJsKSB8fCByZXF1ZXN0LmhlYWRlcnMuaGFzKCJyc2MtYWN0aW9uLWlkIik7CiAgY29uc3Qgc2VydmVyUmVzcG9uc2UgPSBhd2FpdCBmZXRjaFNlcnZlcihyZXF1ZXN0KTsKICBpZiAocmVzcG9uZFdpdGhSU0NQYXlsb2FkIHx8IHNlcnZlclJlc3BvbnNlLmhlYWRlcnMuZ2V0KCJSZWFjdC1Sb3V0ZXItUmVzb3VyY2UiKSA9PT0gInRydWUiKSB7CiAgICByZXR1cm4gc2VydmVyUmVzcG9uc2U7CiAgfQogIGlmICghc2VydmVyUmVzcG9uc2UuYm9keSkgewogICAgdGhyb3cgbmV3IEVycm9yKCJNaXNzaW5nIGJvZHkgaW4gc2VydmVyIHJlc3BvbnNlIik7CiAgfQogIGNvbnN0IGRldGVjdFJlZGlyZWN0UmVzcG9uc2UgPSBzZXJ2ZXJSZXNwb25zZS5jbG9uZSgpOwogIGxldCBzZXJ2ZXJSZXNwb25zZUIgPSBudWxsOwogIGlmIChoeWRyYXRlMikgewogICAgc2VydmVyUmVzcG9uc2VCID0gc2VydmVyUmVzcG9uc2UuY2xvbmUoKTsKICB9CiAgY29uc3QgYm9keSA9IHNlcnZlclJlc3BvbnNlLmJvZHk7CiAgbGV0IGJ1ZmZlcjsKICBsZXQgc3RyZWFtQ29udHJvbGxlcnMgPSBbXTsKICBjb25zdCBjcmVhdGVTdHJlYW0gPSAoKSA9PiB7CiAgICBpZiAoIWJ1ZmZlcikgewogICAgICBidWZmZXIgPSBbXTsKICAgICAgcmV0dXJuIGJvZHkucGlwZVRocm91Z2goCiAgICAgICAgbmV3IFRyYW5zZm9ybVN0cmVhbSh7CiAgICAgICAgICB0cmFuc2Zvcm0oY2h1bmssIGNvbnRyb2xsZXIpIHsKICAgICAgICAgICAgYnVmZmVyLnB1c2goY2h1bmspOwogICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoY2h1bmspOwogICAgICAgICAgICBzdHJlYW1Db250cm9sbGVycy5mb3JFYWNoKChjKSA9PiBjLmVucXVldWUoY2h1bmspKTsKICAgICAgICAgIH0sCiAgICAgICAgICBmbHVzaCgpIHsKICAgICAgICAgICAgc3RyZWFtQ29udHJvbGxlcnMuZm9yRWFjaCgoYykgPT4gYy5jbG9zZSgpKTsKICAgICAgICAgICAgc3RyZWFtQ29udHJvbGxlcnMgPSBbXTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICApOwogICAgfQogICAgcmV0dXJuIG5ldyBSZWFkYWJsZVN0cmVhbSh7CiAgICAgIHN0YXJ0KGNvbnRyb2xsZXIpIHsKICAgICAgICBidWZmZXIuZm9yRWFjaCgoY2h1bmspID0+IGNvbnRyb2xsZXIuZW5xdWV1ZShjaHVuaykpOwogICAgICAgIHN0cmVhbUNvbnRyb2xsZXJzLnB1c2goY29udHJvbGxlcik7CiAgICAgIH0KICAgIH0pOwogIH07CiAgY29uc3QgZ2V0UGF5bG9hZCA9IGFzeW5jICgpID0+IHsKICAgIHJldHVybiBjcmVhdGVGcm9tUmVhZGFibGVTdHJlYW0oY3JlYXRlU3RyZWFtKCkpOwogIH07CiAgdHJ5IHsKICAgIGlmICghZGV0ZWN0UmVkaXJlY3RSZXNwb25zZS5ib2R5KSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiRmFpbGVkIHRvIGNsb25lIHNlcnZlciByZXNwb25zZSIpOwogICAgfQogICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IGNyZWF0ZUZyb21SZWFkYWJsZVN0cmVhbSgKICAgICAgZGV0ZWN0UmVkaXJlY3RSZXNwb25zZS5ib2R5CiAgICApOwogICAgaWYgKHNlcnZlclJlc3BvbnNlLnN0YXR1cyA9PT0gU0lOR0xFX0ZFVENIX1JFRElSRUNUX1NUQVRVUyAmJiBwYXlsb2FkLnR5cGUgPT09ICJyZWRpcmVjdCIpIHsKICAgICAgY29uc3QgaGVhZGVyczIgPSBuZXcgSGVhZGVycyhzZXJ2ZXJSZXNwb25zZS5oZWFkZXJzKTsKICAgICAgaGVhZGVyczIuZGVsZXRlKCJDb250ZW50LUVuY29kaW5nIik7CiAgICAgIGhlYWRlcnMyLmRlbGV0ZSgiQ29udGVudC1MZW5ndGgiKTsKICAgICAgaGVhZGVyczIuZGVsZXRlKCJDb250ZW50LVR5cGUiKTsKICAgICAgaGVhZGVyczIuZGVsZXRlKCJ4LXJlbWl4LXJlc3BvbnNlIik7CiAgICAgIGhlYWRlcnMyLnNldCgiTG9jYXRpb24iLCBwYXlsb2FkLmxvY2F0aW9uKTsKICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZSgoc2VydmVyUmVzcG9uc2VCID09IG51bGwgPyB2b2lkIDAgOiBzZXJ2ZXJSZXNwb25zZUIuYm9keSkgfHwgIiIsIHsKICAgICAgICBoZWFkZXJzOiBoZWFkZXJzMiwKICAgICAgICBzdGF0dXM6IHBheWxvYWQuc3RhdHVzLAogICAgICAgIHN0YXR1c1RleHQ6IHNlcnZlclJlc3BvbnNlLnN0YXR1c1RleHQKICAgICAgfSk7CiAgICB9CiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVySFRNTChnZXRQYXlsb2FkKTsKICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyhzZXJ2ZXJSZXNwb25zZS5oZWFkZXJzKTsKICAgIGhlYWRlcnMuc2V0KCJDb250ZW50LVR5cGUiLCAidGV4dC9odG1sIik7CiAgICBpZiAoIWh5ZHJhdGUyKSB7CiAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoaHRtbCwgewogICAgICAgIHN0YXR1czogc2VydmVyUmVzcG9uc2Uuc3RhdHVzLAogICAgICAgIGhlYWRlcnMKICAgICAgfSk7CiAgICB9CiAgICBpZiAoIShzZXJ2ZXJSZXNwb25zZUIgPT0gbnVsbCA/IHZvaWQgMCA6IHNlcnZlclJlc3BvbnNlQi5ib2R5KSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIkZhaWxlZCB0byBjbG9uZSBzZXJ2ZXIgcmVzcG9uc2UiKTsKICAgIH0KICAgIGNvbnN0IGJvZHkyID0gaHRtbC5waXBlVGhyb3VnaChpbmplY3RSU0NQYXlsb2FkKHNlcnZlclJlc3BvbnNlQi5ib2R5KSk7CiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKGJvZHkyLCB7CiAgICAgIHN0YXR1czogc2VydmVyUmVzcG9uc2Uuc3RhdHVzLAogICAgICBoZWFkZXJzCiAgICB9KTsKICB9IGNhdGNoIChyZWFzb24pIHsKICAgIGlmIChyZWFzb24gaW5zdGFuY2VvZiBSZXNwb25zZSkgewogICAgICByZXR1cm4gcmVhc29uOwogICAgfQogICAgdGhyb3cgcmVhc29uOwogIH0KfQpmdW5jdGlvbiBSU0NTdGF0aWNSb3V0ZXIoeyBnZXRQYXlsb2FkIH0pIHsKICBjb25zdCBwYXlsb2FkID0gdXNlU2FmZShnZXRQYXlsb2FkKCkpOwogIGlmIChwYXlsb2FkLnR5cGUgPT09ICJyZWRpcmVjdCIpIHsKICAgIHRocm93IG5ldyBSZXNwb25zZShudWxsLCB7CiAgICAgIHN0YXR1czogcGF5bG9hZC5zdGF0dXMsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBMb2NhdGlvbjogcGF5bG9hZC5sb2NhdGlvbgogICAgICB9CiAgICB9KTsKICB9CiAgaWYgKHBheWxvYWQudHlwZSAhPT0gInJlbmRlciIpIHJldHVybiBudWxsOwogIGxldCBwYXRjaGVkTG9hZGVyRGF0YSA9IHsgLi4ucGF5bG9hZC5sb2FkZXJEYXRhIH07CiAgZm9yIChjb25zdCBtYXRjaCBvZiBwYXlsb2FkLm1hdGNoZXMpIHsKICAgIGlmIChzaG91bGRIeWRyYXRlUm91dGVMb2FkZXIoCiAgICAgIG1hdGNoLmlkLAogICAgICBtYXRjaC5jbGllbnRMb2FkZXIsCiAgICAgIG1hdGNoLmhhc0xvYWRlciwKICAgICAgZmFsc2UKICAgICkgJiYgKG1hdGNoLmh5ZHJhdGVGYWxsYmFja0VsZW1lbnQgfHwgIW1hdGNoLmhhc0xvYWRlcikpIHsKICAgICAgZGVsZXRlIHBhdGNoZWRMb2FkZXJEYXRhW21hdGNoLmlkXTsKICAgIH0KICB9CiAgY29uc3QgY29udGV4dCA9IHsKICAgIGFjdGlvbkRhdGE6IHBheWxvYWQuYWN0aW9uRGF0YSwKICAgIGFjdGlvbkhlYWRlcnM6IHt9LAogICAgYmFzZW5hbWU6IHBheWxvYWQuYmFzZW5hbWUsCiAgICBlcnJvcnM6IHBheWxvYWQuZXJyb3JzLAogICAgbG9hZGVyRGF0YTogcGF0Y2hlZExvYWRlckRhdGEsCiAgICBsb2FkZXJIZWFkZXJzOiB7fSwKICAgIGxvY2F0aW9uOiBwYXlsb2FkLmxvY2F0aW9uLAogICAgc3RhdHVzQ29kZTogMjAwLAogICAgbWF0Y2hlczogcGF5bG9hZC5tYXRjaGVzLm1hcCgobWF0Y2gpID0+ICh7CiAgICAgIHBhcmFtczogbWF0Y2gucGFyYW1zLAogICAgICBwYXRobmFtZTogbWF0Y2gucGF0aG5hbWUsCiAgICAgIHBhdGhuYW1lQmFzZTogbWF0Y2gucGF0aG5hbWVCYXNlLAogICAgICByb3V0ZTogewogICAgICAgIGlkOiBtYXRjaC5pZCwKICAgICAgICBhY3Rpb246IG1hdGNoLmhhc0FjdGlvbiB8fCAhIW1hdGNoLmNsaWVudEFjdGlvbiwKICAgICAgICBoYW5kbGU6IG1hdGNoLmhhbmRsZSwKICAgICAgICBoYXNFcnJvckJvdW5kYXJ5OiBtYXRjaC5oYXNFcnJvckJvdW5kYXJ5LAogICAgICAgIGxvYWRlcjogbWF0Y2guaGFzTG9hZGVyIHx8ICEhbWF0Y2guY2xpZW50TG9hZGVyLAogICAgICAgIGluZGV4OiBtYXRjaC5pbmRleCwKICAgICAgICBwYXRoOiBtYXRjaC5wYXRoLAogICAgICAgIHNob3VsZFJldmFsaWRhdGU6IG1hdGNoLnNob3VsZFJldmFsaWRhdGUKICAgICAgfQogICAgfSkpCiAgfTsKICBjb25zdCByb3V0ZXIyID0gY3JlYXRlU3RhdGljUm91dGVyKAogICAgcGF5bG9hZC5tYXRjaGVzLnJlZHVjZVJpZ2h0KChwcmV2aW91cywgbWF0Y2gpID0+IHsKICAgICAgY29uc3Qgcm91dGUgPSB7CiAgICAgICAgaWQ6IG1hdGNoLmlkLAogICAgICAgIGFjdGlvbjogbWF0Y2guaGFzQWN0aW9uIHx8ICEhbWF0Y2guY2xpZW50QWN0aW9uLAogICAgICAgIGVsZW1lbnQ6IG1hdGNoLmVsZW1lbnQsCiAgICAgICAgZXJyb3JFbGVtZW50OiBtYXRjaC5lcnJvckVsZW1lbnQsCiAgICAgICAgaGFuZGxlOiBtYXRjaC5oYW5kbGUsCiAgICAgICAgaGFzRXJyb3JCb3VuZGFyeTogISFtYXRjaC5lcnJvckVsZW1lbnQsCiAgICAgICAgaHlkcmF0ZUZhbGxiYWNrRWxlbWVudDogbWF0Y2guaHlkcmF0ZUZhbGxiYWNrRWxlbWVudCwKICAgICAgICBpbmRleDogbWF0Y2guaW5kZXgsCiAgICAgICAgbG9hZGVyOiBtYXRjaC5oYXNMb2FkZXIgfHwgISFtYXRjaC5jbGllbnRMb2FkZXIsCiAgICAgICAgcGF0aDogbWF0Y2gucGF0aCwKICAgICAgICBzaG91bGRSZXZhbGlkYXRlOiBtYXRjaC5zaG91bGRSZXZhbGlkYXRlCiAgICAgIH07CiAgICAgIGlmIChwcmV2aW91cy5sZW5ndGggPiAwKSB7CiAgICAgICAgcm91dGUuY2hpbGRyZW4gPSBwcmV2aW91czsKICAgICAgfQogICAgICByZXR1cm4gW3JvdXRlXTsKICAgIH0sIFtdKSwKICAgIGNvbnRleHQKICApOwogIGNvbnN0IGZyYW1ld29ya0NvbnRleHQgPSB7CiAgICBmdXR1cmU6IHsKICAgICAgLy8gVGhlc2UgZmxhZ3MgaGF2ZSBubyBydW50aW1lIGltcGFjdCBzbyBjYW4gYWx3YXlzIGJlIGZhbHNlLiAgSWYgd2UgYWRkCiAgICAgIC8vIGZsYWdzIHRoYXQgZHJpdmUgcnVudGltZSBiZWhhdmlvciB0aGV5J2xsIG5lZWQgdG8gYmUgcHJveGllZCB0aHJvdWdoLgogICAgICB2OF9taWRkbGV3YXJlOiBmYWxzZSwKICAgICAgdW5zdGFibGVfc3ViUmVzb3VyY2VJbnRlZ3JpdHk6IGZhbHNlCiAgICB9LAogICAgaXNTcGFNb2RlOiBmYWxzZSwKICAgIHNzcjogdHJ1ZSwKICAgIGNyaXRpY2FsQ3NzOiAiIiwKICAgIG1hbmlmZXN0OiB7CiAgICAgIHJvdXRlczoge30sCiAgICAgIHZlcnNpb246ICIxIiwKICAgICAgdXJsOiAiIiwKICAgICAgZW50cnk6IHsKICAgICAgICBtb2R1bGU6ICIiLAogICAgICAgIGltcG9ydHM6IFtdCiAgICAgIH0KICAgIH0sCiAgICByb3V0ZURpc2NvdmVyeTogeyBtb2RlOiAibGF6eSIsIG1hbmlmZXN0UGF0aDogIi9fX21hbmlmZXN0IiB9LAogICAgcm91dGVNb2R1bGVzOiBjcmVhdGVSU0NSb3V0ZU1vZHVsZXMocGF5bG9hZCkKICB9OwogIHJldHVybiBSZWFjdDUyLmNyZWF0ZUVsZW1lbnQoUlNDUm91dGVyQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogdHJ1ZSB9LCBSZWFjdDUyLmNyZWF0ZUVsZW1lbnQoUlNDUm91dGVyR2xvYmFsRXJyb3JCb3VuZGFyeSwgeyBsb2NhdGlvbjogcGF5bG9hZC5sb2NhdGlvbiB9LCBSZWFjdDUyLmNyZWF0ZUVsZW1lbnQoRnJhbWV3b3JrQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogZnJhbWV3b3JrQ29udGV4dCB9LCBSZWFjdDUyLmNyZWF0ZUVsZW1lbnQoCiAgICBTdGF0aWNSb3V0ZXJQcm92aWRlciwKICAgIHsKICAgICAgY29udGV4dCwKICAgICAgcm91dGVyOiByb3V0ZXIyLAogICAgICBoeWRyYXRlOiBmYWxzZSwKICAgICAgbm9uY2U6IHBheWxvYWQubm9uY2UKICAgIH0KICApKSkpOwp9CmZ1bmN0aW9uIGlzUmVhY3RTZXJ2ZXJSZXF1ZXN0KHVybCkgewogIHJldHVybiB1cmwucGF0aG5hbWUuZW5kc1dpdGgoIi5yc2MiKTsKfQpmdW5jdGlvbiBpc01hbmlmZXN0UmVxdWVzdCh1cmwpIHsKICByZXR1cm4gdXJsLnBhdGhuYW1lLmVuZHNXaXRoKCIubWFuaWZlc3QiKTsKfQpmdW5jdGlvbiBnZXRSU0NTdHJlYW0oKSB7CiAgbGV0IGVuY29kZXIzID0gbmV3IFRleHRFbmNvZGVyKCk7CiAgbGV0IHN0cmVhbUNvbnRyb2xsZXIgPSBudWxsOwogIGxldCByc2NTdHJlYW0gPSBuZXcgUmVhZGFibGVTdHJlYW0oewogICAgc3RhcnQoY29udHJvbGxlcikgewogICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gInVuZGVmaW5lZCIpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbGV0IGhhbmRsZUNodW5rID0gKGNodW5rKSA9PiB7CiAgICAgICAgaWYgKHR5cGVvZiBjaHVuayA9PT0gInN0cmluZyIpIHsKICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShlbmNvZGVyMy5lbmNvZGUoY2h1bmspKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGNodW5rKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHdpbmRvdy5fX0ZMSUdIVF9EQVRBIHx8ICh3aW5kb3cuX19GTElHSFRfREFUQSA9IFtdKTsKICAgICAgd2luZG93Ll9fRkxJR0hUX0RBVEEuZm9yRWFjaChoYW5kbGVDaHVuayk7CiAgICAgIHdpbmRvdy5fX0ZMSUdIVF9EQVRBLnB1c2ggPSAoY2h1bmspID0+IHsKICAgICAgICBoYW5kbGVDaHVuayhjaHVuayk7CiAgICAgICAgcmV0dXJuIDA7CiAgICAgIH07CiAgICAgIHN0cmVhbUNvbnRyb2xsZXIgPSBjb250cm9sbGVyOwogICAgfQogIH0pOwogIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICJ1bmRlZmluZWQiICYmIGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICJsb2FkaW5nIikgewogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsICgpID0+IHsKICAgICAgc3RyZWFtQ29udHJvbGxlciA9PSBudWxsID8gdm9pZCAwIDogc3RyZWFtQ29udHJvbGxlci5jbG9zZSgpOwogICAgfSk7CiAgfSBlbHNlIHsKICAgIHN0cmVhbUNvbnRyb2xsZXIgPT0gbnVsbCA/IHZvaWQgMCA6IHN0cmVhbUNvbnRyb2xsZXIuY2xvc2UoKTsKICB9CiAgcmV0dXJuIHJzY1N0cmVhbTsKfQpmdW5jdGlvbiBkZXNlcmlhbGl6ZUVycm9yczIoZXJyb3JzKSB7CiAgaWYgKCFlcnJvcnMpIHJldHVybiBudWxsOwogIGxldCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoZXJyb3JzKTsKICBsZXQgc2VyaWFsaXplZCA9IHt9OwogIGZvciAobGV0IFtrZXksIHZhbF0gb2YgZW50cmllcykgewogICAgaWYgKHZhbCAmJiB2YWwuX190eXBlID09PSAiUm91dGVFcnJvclJlc3BvbnNlIikgewogICAgICBzZXJpYWxpemVkW2tleV0gPSBuZXcgRXJyb3JSZXNwb25zZUltcGwoCiAgICAgICAgdmFsLnN0YXR1cywKICAgICAgICB2YWwuc3RhdHVzVGV4dCwKICAgICAgICB2YWwuZGF0YSwKICAgICAgICB2YWwuaW50ZXJuYWwgPT09IHRydWUKICAgICAgKTsKICAgIH0gZWxzZSBpZiAodmFsICYmIHZhbC5fX3R5cGUgPT09ICJFcnJvciIpIHsKICAgICAgaWYgKHZhbC5fX3N1YlR5cGUpIHsKICAgICAgICBsZXQgRXJyb3JDb25zdHJ1Y3RvciA9IHdpbmRvd1t2YWwuX19zdWJUeXBlXTsKICAgICAgICBpZiAodHlwZW9mIEVycm9yQ29uc3RydWN0b3IgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGxldCBlcnJvciA9IG5ldyBFcnJvckNvbnN0cnVjdG9yKHZhbC5tZXNzYWdlKTsKICAgICAgICAgICAgZXJyb3Iuc3RhY2sgPSB2YWwuc3RhY2s7CiAgICAgICAgICAgIHNlcmlhbGl6ZWRba2V5XSA9IGVycm9yOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoc2VyaWFsaXplZFtrZXldID09IG51bGwpIHsKICAgICAgICBsZXQgZXJyb3IgPSBuZXcgRXJyb3IodmFsLm1lc3NhZ2UpOwogICAgICAgIGVycm9yLnN0YWNrID0gdmFsLnN0YWNrOwogICAgICAgIHNlcmlhbGl6ZWRba2V5XSA9IGVycm9yOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBzZXJpYWxpemVkW2tleV0gPSB2YWw7CiAgICB9CiAgfQogIHJldHVybiBzZXJpYWxpemVkOwp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvcmVhY3Qtcm91dGVyL2Rpc3QvZGV2ZWxvcG1lbnQvZG9tLWV4cG9ydC5tanMKdmFyIFJlYWN0MTMgPSBfX3RvRVNNKHJlcXVpcmVfcmVhY3QoKSwgMSk7CnZhciBSZWFjdERPTTIgPSBfX3RvRVNNKHJlcXVpcmVfcmVhY3RfZG9tKCksIDEpOwp2YXIgUmVhY3QyMyA9IF9fdG9FU00ocmVxdWlyZV9yZWFjdCgpLCAxKTsKZnVuY3Rpb24gUm91dGVyUHJvdmlkZXIyKHByb3BzKSB7CiAgcmV0dXJuIFJlYWN0MTMuY3JlYXRlRWxlbWVudChSb3V0ZXJQcm92aWRlciwgeyBmbHVzaFN5bmM6IFJlYWN0RE9NMi5mbHVzaFN5bmMsIC4uLnByb3BzIH0pOwp9CnZhciBzc3JJbmZvID0gbnVsbDsKdmFyIHJvdXRlciA9IG51bGw7CmZ1bmN0aW9uIGluaXRTc3JJbmZvKCkgewogIGlmICghc3NySW5mbyAmJiB3aW5kb3cuX19yZWFjdFJvdXRlckNvbnRleHQgJiYgd2luZG93Ll9fcmVhY3RSb3V0ZXJNYW5pZmVzdCAmJiB3aW5kb3cuX19yZWFjdFJvdXRlclJvdXRlTW9kdWxlcykgewogICAgaWYgKHdpbmRvdy5fX3JlYWN0Um91dGVyTWFuaWZlc3Quc3JpID09PSB0cnVlKSB7CiAgICAgIGNvbnN0IGltcG9ydE1hcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoInNjcmlwdFtyci1pbXBvcnRtYXBdIik7CiAgICAgIGlmIChpbXBvcnRNYXAgPT0gbnVsbCA/IHZvaWQgMCA6IGltcG9ydE1hcC50ZXh0Q29udGVudCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICB3aW5kb3cuX19yZWFjdFJvdXRlck1hbmlmZXN0LnNyaSA9IEpTT04ucGFyc2UoCiAgICAgICAgICAgIGltcG9ydE1hcC50ZXh0Q29udGVudAogICAgICAgICAgKS5pbnRlZ3JpdHk7CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCJGYWlsZWQgdG8gcGFyc2UgaW1wb3J0IG1hcCIsIGVycik7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBzc3JJbmZvID0gewogICAgICBjb250ZXh0OiB3aW5kb3cuX19yZWFjdFJvdXRlckNvbnRleHQsCiAgICAgIG1hbmlmZXN0OiB3aW5kb3cuX19yZWFjdFJvdXRlck1hbmlmZXN0LAogICAgICByb3V0ZU1vZHVsZXM6IHdpbmRvdy5fX3JlYWN0Um91dGVyUm91dGVNb2R1bGVzLAogICAgICBzdGF0ZURlY29kaW5nUHJvbWlzZTogdm9pZCAwLAogICAgICByb3V0ZXI6IHZvaWQgMCwKICAgICAgcm91dGVySW5pdGlhbGl6ZWQ6IGZhbHNlCiAgICB9OwogIH0KfQpmdW5jdGlvbiBjcmVhdGVIeWRyYXRlZFJvdXRlcih7CiAgZ2V0Q29udGV4dAp9KSB7CiAgdmFyIF9hLCBfYjsKICBpbml0U3NySW5mbygpOwogIGlmICghc3NySW5mbykgewogICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAiWW91IG11c3QgYmUgdXNpbmcgdGhlIFNTUiBmZWF0dXJlcyBvZiBSZWFjdCBSb3V0ZXIgaW4gb3JkZXIgdG8gc2tpcCBwYXNzaW5nIGEgYHJvdXRlcmAgcHJvcCB0byBgPFJvdXRlclByb3ZpZGVyPmAiCiAgICApOwogIH0KICBsZXQgbG9jYWxTc3JJbmZvID0gc3NySW5mbzsKICBpZiAoIXNzckluZm8uc3RhdGVEZWNvZGluZ1Byb21pc2UpIHsKICAgIGxldCBzdHJlYW0gPSBzc3JJbmZvLmNvbnRleHQuc3RyZWFtOwogICAgaW52YXJpYW50KHN0cmVhbSwgIk5vIHN0cmVhbSBmb3VuZCBmb3Igc2luZ2xlIGZldGNoIGRlY29kaW5nIik7CiAgICBzc3JJbmZvLmNvbnRleHQuc3RyZWFtID0gdm9pZCAwOwogICAgc3NySW5mby5zdGF0ZURlY29kaW5nUHJvbWlzZSA9IGRlY29kZVZpYVR1cmJvU3RyZWFtKHN0cmVhbSwgd2luZG93KS50aGVuKCh2YWx1ZSkgPT4gewogICAgICBzc3JJbmZvLmNvbnRleHQuc3RhdGUgPSB2YWx1ZS52YWx1ZTsKICAgICAgbG9jYWxTc3JJbmZvLnN0YXRlRGVjb2RpbmdQcm9taXNlLnZhbHVlID0gdHJ1ZTsKICAgIH0pLmNhdGNoKChlKSA9PiB7CiAgICAgIGxvY2FsU3NySW5mby5zdGF0ZURlY29kaW5nUHJvbWlzZS5lcnJvciA9IGU7CiAgICB9KTsKICB9CiAgaWYgKHNzckluZm8uc3RhdGVEZWNvZGluZ1Byb21pc2UuZXJyb3IpIHsKICAgIHRocm93IHNzckluZm8uc3RhdGVEZWNvZGluZ1Byb21pc2UuZXJyb3I7CiAgfQogIGlmICghc3NySW5mby5zdGF0ZURlY29kaW5nUHJvbWlzZS52YWx1ZSkgewogICAgdGhyb3cgc3NySW5mby5zdGF0ZURlY29kaW5nUHJvbWlzZTsKICB9CiAgbGV0IHJvdXRlcyA9IGNyZWF0ZUNsaWVudFJvdXRlcygKICAgIHNzckluZm8ubWFuaWZlc3Qucm91dGVzLAogICAgc3NySW5mby5yb3V0ZU1vZHVsZXMsCiAgICBzc3JJbmZvLmNvbnRleHQuc3RhdGUsCiAgICBzc3JJbmZvLmNvbnRleHQuc3NyLAogICAgc3NySW5mby5jb250ZXh0LmlzU3BhTW9kZQogICk7CiAgbGV0IGh5ZHJhdGlvbkRhdGEgPSB2b2lkIDA7CiAgaWYgKHNzckluZm8uY29udGV4dC5pc1NwYU1vZGUpIHsKICAgIGxldCB7IGxvYWRlckRhdGEgfSA9IHNzckluZm8uY29udGV4dC5zdGF0ZTsKICAgIGlmICgoKF9hID0gc3NySW5mby5tYW5pZmVzdC5yb3V0ZXMucm9vdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmhhc0xvYWRlcikgJiYgbG9hZGVyRGF0YSAmJiAicm9vdCIgaW4gbG9hZGVyRGF0YSkgewogICAgICBoeWRyYXRpb25EYXRhID0gewogICAgICAgIGxvYWRlckRhdGE6IHsKICAgICAgICAgIHJvb3Q6IGxvYWRlckRhdGEucm9vdAogICAgICAgIH0KICAgICAgfTsKICAgIH0KICB9IGVsc2UgewogICAgaHlkcmF0aW9uRGF0YSA9IGdldEh5ZHJhdGlvbkRhdGEoewogICAgICBzdGF0ZTogc3NySW5mby5jb250ZXh0LnN0YXRlLAogICAgICByb3V0ZXMsCiAgICAgIGdldFJvdXRlSW5mbzogKHJvdXRlSWQpID0+IHsKICAgICAgICB2YXIgX2EyLCBfYjIsIF9jOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICBjbGllbnRMb2FkZXI6IChfYTIgPSBzc3JJbmZvLnJvdXRlTW9kdWxlc1tyb3V0ZUlkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5jbGllbnRMb2FkZXIsCiAgICAgICAgICBoYXNMb2FkZXI6ICgoX2IyID0gc3NySW5mby5tYW5pZmVzdC5yb3V0ZXNbcm91dGVJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYjIuaGFzTG9hZGVyKSA9PT0gdHJ1ZSwKICAgICAgICAgIGhhc0h5ZHJhdGVGYWxsYmFjazogKChfYyA9IHNzckluZm8ucm91dGVNb2R1bGVzW3JvdXRlSWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2MuSHlkcmF0ZUZhbGxiYWNrKSAhPSBudWxsCiAgICAgICAgfTsKICAgICAgfSwKICAgICAgbG9jYXRpb246IHdpbmRvdy5sb2NhdGlvbiwKICAgICAgYmFzZW5hbWU6IChfYiA9IHdpbmRvdy5fX3JlYWN0Um91dGVyQ29udGV4dCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmJhc2VuYW1lLAogICAgICBpc1NwYU1vZGU6IHNzckluZm8uY29udGV4dC5pc1NwYU1vZGUKICAgIH0pOwogICAgaWYgKGh5ZHJhdGlvbkRhdGEgJiYgaHlkcmF0aW9uRGF0YS5lcnJvcnMpIHsKICAgICAgaHlkcmF0aW9uRGF0YS5lcnJvcnMgPSBkZXNlcmlhbGl6ZUVycm9yczIoaHlkcmF0aW9uRGF0YS5lcnJvcnMpOwogICAgfQogIH0KICBsZXQgcm91dGVyMiA9IGNyZWF0ZVJvdXRlcih7CiAgICByb3V0ZXMsCiAgICBoaXN0b3J5OiBjcmVhdGVCcm93c2VySGlzdG9yeSgpLAogICAgYmFzZW5hbWU6IHNzckluZm8uY29udGV4dC5iYXNlbmFtZSwKICAgIGdldENvbnRleHQsCiAgICBoeWRyYXRpb25EYXRhLAogICAgaHlkcmF0aW9uUm91dGVQcm9wZXJ0aWVzLAogICAgbWFwUm91dGVQcm9wZXJ0aWVzLAogICAgZnV0dXJlOiB7CiAgICAgIG1pZGRsZXdhcmU6IHNzckluZm8uY29udGV4dC5mdXR1cmUudjhfbWlkZGxld2FyZQogICAgfSwKICAgIGRhdGFTdHJhdGVneTogZ2V0VHVyYm9TdHJlYW1TaW5nbGVGZXRjaERhdGFTdHJhdGVneSgKICAgICAgKCkgPT4gcm91dGVyMiwKICAgICAgc3NySW5mby5tYW5pZmVzdCwKICAgICAgc3NySW5mby5yb3V0ZU1vZHVsZXMsCiAgICAgIHNzckluZm8uY29udGV4dC5zc3IsCiAgICAgIHNzckluZm8uY29udGV4dC5iYXNlbmFtZQogICAgKSwKICAgIHBhdGNoUm91dGVzT25OYXZpZ2F0aW9uOiBnZXRQYXRjaFJvdXRlc09uTmF2aWdhdGlvbkZ1bmN0aW9uKAogICAgICBzc3JJbmZvLm1hbmlmZXN0LAogICAgICBzc3JJbmZvLnJvdXRlTW9kdWxlcywKICAgICAgc3NySW5mby5jb250ZXh0LnNzciwKICAgICAgc3NySW5mby5jb250ZXh0LnJvdXRlRGlzY292ZXJ5LAogICAgICBzc3JJbmZvLmNvbnRleHQuaXNTcGFNb2RlLAogICAgICBzc3JJbmZvLmNvbnRleHQuYmFzZW5hbWUKICAgICkKICB9KTsKICBzc3JJbmZvLnJvdXRlciA9IHJvdXRlcjI7CiAgaWYgKHJvdXRlcjIuc3RhdGUuaW5pdGlhbGl6ZWQpIHsKICAgIHNzckluZm8ucm91dGVySW5pdGlhbGl6ZWQgPSB0cnVlOwogICAgcm91dGVyMi5pbml0aWFsaXplKCk7CiAgfQogIHJvdXRlcjIuY3JlYXRlUm91dGVzRm9ySE1SID0gLyogc3BhY2VyIHNvIHRzLWlnbm9yZSBkb2VzIG5vdCBhZmZlY3QgdGhlIHJpZ2h0IGhhbmQgb2YgdGhlIGFzc2lnbm1lbnQgKi8KICBjcmVhdGVDbGllbnRSb3V0ZXNXaXRoSE1SUmV2YWxpZGF0aW9uT3B0T3V0OwogIHdpbmRvdy5fX3JlYWN0Um91dGVyRGF0YVJvdXRlciA9IHJvdXRlcjI7CiAgcmV0dXJuIHJvdXRlcjI7Cn0KZnVuY3Rpb24gSHlkcmF0ZWRSb3V0ZXIocHJvcHMpIHsKICBpZiAoIXJvdXRlcikgewogICAgcm91dGVyID0gY3JlYXRlSHlkcmF0ZWRSb3V0ZXIoewogICAgICBnZXRDb250ZXh0OiBwcm9wcy5nZXRDb250ZXh0CiAgICB9KTsKICB9CiAgbGV0IFtjcml0aWNhbENzcywgc2V0Q3JpdGljYWxDc3NdID0gUmVhY3QyMy51c2VTdGF0ZSgKICAgIHRydWUgPyBzc3JJbmZvID09IG51bGwgPyB2b2lkIDAgOiBzc3JJbmZvLmNvbnRleHQuY3JpdGljYWxDc3MgOiB2b2lkIDAKICApOwogIFJlYWN0MjMudXNlRWZmZWN0KCgpID0+IHsKICAgIGlmICh0cnVlKSB7CiAgICAgIHNldENyaXRpY2FsQ3NzKHZvaWQgMCk7CiAgICB9CiAgfSwgW10pOwogIFJlYWN0MjMudXNlRWZmZWN0KCgpID0+IHsKICAgIGlmIChjcml0aWNhbENzcyA9PT0gdm9pZCAwKSB7CiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYFske0NSSVRJQ0FMX0NTU19EQVRBX0FUVFJJQlVURX1dYCkuZm9yRWFjaCgoZWxlbWVudCkgPT4gZWxlbWVudC5yZW1vdmUoKSk7CiAgICB9CiAgfSwgW2NyaXRpY2FsQ3NzXSk7CiAgbGV0IFtsb2NhdGlvbjIsIHNldExvY2F0aW9uXSA9IFJlYWN0MjMudXNlU3RhdGUocm91dGVyLnN0YXRlLmxvY2F0aW9uKTsKICBSZWFjdDIzLnVzZUxheW91dEVmZmVjdCgoKSA9PiB7CiAgICBpZiAoc3NySW5mbyAmJiBzc3JJbmZvLnJvdXRlciAmJiAhc3NySW5mby5yb3V0ZXJJbml0aWFsaXplZCkgewogICAgICBzc3JJbmZvLnJvdXRlckluaXRpYWxpemVkID0gdHJ1ZTsKICAgICAgc3NySW5mby5yb3V0ZXIuaW5pdGlhbGl6ZSgpOwogICAgfQogIH0sIFtdKTsKICBSZWFjdDIzLnVzZUxheW91dEVmZmVjdCgoKSA9PiB7CiAgICBpZiAoc3NySW5mbyAmJiBzc3JJbmZvLnJvdXRlcikgewogICAgICByZXR1cm4gc3NySW5mby5yb3V0ZXIuc3Vic2NyaWJlKChuZXdTdGF0ZSkgPT4gewogICAgICAgIGlmIChuZXdTdGF0ZS5sb2NhdGlvbiAhPT0gbG9jYXRpb24yKSB7CiAgICAgICAgICBzZXRMb2NhdGlvbihuZXdTdGF0ZS5sb2NhdGlvbik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCBbbG9jYXRpb24yXSk7CiAgaW52YXJpYW50KHNzckluZm8sICJzc3JJbmZvIHVuYXZhaWxhYmxlIGZvciBIeWRyYXRlZFJvdXRlciIpOwogIHVzZUZvZ09GV2FyRGlzY292ZXJ5KAogICAgcm91dGVyLAogICAgc3NySW5mby5tYW5pZmVzdCwKICAgIHNzckluZm8ucm91dGVNb2R1bGVzLAogICAgc3NySW5mby5jb250ZXh0LnNzciwKICAgIHNzckluZm8uY29udGV4dC5yb3V0ZURpc2NvdmVyeSwKICAgIHNzckluZm8uY29udGV4dC5pc1NwYU1vZGUKICApOwogIHJldHVybiAoCiAgICAvLyBUaGlzIGZyYWdtZW50IGlzIGltcG9ydGFudCB0byBlbnN1cmUgd2UgbWF0Y2ggdGhlIDxTZXJ2ZXJSb3V0ZXI+IEpTWAogICAgLy8gc3RydWN0dXJlIHNvIHRoYXQgdXNlSWQgdmFsdWVzIGh5ZHJhdGUgY29ycmVjdGx5CiAgICBSZWFjdDIzLmNyZWF0ZUVsZW1lbnQoUmVhY3QyMy5GcmFnbWVudCwgbnVsbCwgUmVhY3QyMy5jcmVhdGVFbGVtZW50KAogICAgICBGcmFtZXdvcmtDb250ZXh0LlByb3ZpZGVyLAogICAgICB7CiAgICAgICAgdmFsdWU6IHsKICAgICAgICAgIG1hbmlmZXN0OiBzc3JJbmZvLm1hbmlmZXN0LAogICAgICAgICAgcm91dGVNb2R1bGVzOiBzc3JJbmZvLnJvdXRlTW9kdWxlcywKICAgICAgICAgIGZ1dHVyZTogc3NySW5mby5jb250ZXh0LmZ1dHVyZSwKICAgICAgICAgIGNyaXRpY2FsQ3NzLAogICAgICAgICAgc3NyOiBzc3JJbmZvLmNvbnRleHQuc3NyLAogICAgICAgICAgaXNTcGFNb2RlOiBzc3JJbmZvLmNvbnRleHQuaXNTcGFNb2RlLAogICAgICAgICAgcm91dGVEaXNjb3Zlcnk6IHNzckluZm8uY29udGV4dC5yb3V0ZURpc2NvdmVyeQogICAgICAgIH0KICAgICAgfSwKICAgICAgUmVhY3QyMy5jcmVhdGVFbGVtZW50KFJlbWl4RXJyb3JCb3VuZGFyeSwgeyBsb2NhdGlvbjogbG9jYXRpb24yIH0sIFJlYWN0MjMuY3JlYXRlRWxlbWVudCgKICAgICAgICBSb3V0ZXJQcm92aWRlcjIsCiAgICAgICAgewogICAgICAgICAgcm91dGVyLAogICAgICAgICAgdW5zdGFibGVfb25FcnJvcjogcHJvcHMudW5zdGFibGVfb25FcnJvcgogICAgICAgIH0KICAgICAgKSkKICAgICksIFJlYWN0MjMuY3JlYXRlRWxlbWVudChSZWFjdDIzLkZyYWdtZW50LCBudWxsKSkKICApOwp9CmV4cG9ydCB7CiAgQXdhaXQsCiAgQnJvd3NlclJvdXRlciwKICBGb3JtLAogIEhhc2hSb3V0ZXIsCiAgSHlkcmF0ZWRSb3V0ZXIsCiAgSURMRV9CTE9DS0VSLAogIElETEVfRkVUQ0hFUiwKICBJRExFX05BVklHQVRJT04sCiAgTGluaywKICBMaW5rcywKICBNZW1vcnlSb3V0ZXIsCiAgTWV0YSwKICBOYXZMaW5rLAogIE5hdmlnYXRlLAogIEFjdGlvbiBhcyBOYXZpZ2F0aW9uVHlwZSwKICBPdXRsZXQsCiAgUHJlZmV0Y2hQYWdlTGlua3MsCiAgUm91dGUsCiAgUm91dGVyLAogIFJvdXRlckNvbnRleHRQcm92aWRlciwKICBSb3V0ZXJQcm92aWRlcjIgYXMgUm91dGVyUHJvdmlkZXIsCiAgUm91dGVzLAogIFNjcmlwdHMsCiAgU2Nyb2xsUmVzdG9yYXRpb24sCiAgU2VydmVyUm91dGVyLAogIFN0YXRpY1JvdXRlciwKICBTdGF0aWNSb3V0ZXJQcm92aWRlciwKICBBd2FpdENvbnRleHRQcm92aWRlciBhcyBVTlNBRkVfQXdhaXRDb250ZXh0UHJvdmlkZXIsCiAgRGF0YVJvdXRlckNvbnRleHQgYXMgVU5TQUZFX0RhdGFSb3V0ZXJDb250ZXh0LAogIERhdGFSb3V0ZXJTdGF0ZUNvbnRleHQgYXMgVU5TQUZFX0RhdGFSb3V0ZXJTdGF0ZUNvbnRleHQsCiAgRXJyb3JSZXNwb25zZUltcGwgYXMgVU5TQUZFX0Vycm9yUmVzcG9uc2VJbXBsLAogIEZldGNoZXJzQ29udGV4dCBhcyBVTlNBRkVfRmV0Y2hlcnNDb250ZXh0LAogIEZyYW1ld29ya0NvbnRleHQgYXMgVU5TQUZFX0ZyYW1ld29ya0NvbnRleHQsCiAgTG9jYXRpb25Db250ZXh0IGFzIFVOU0FGRV9Mb2NhdGlvbkNvbnRleHQsCiAgTmF2aWdhdGlvbkNvbnRleHQgYXMgVU5TQUZFX05hdmlnYXRpb25Db250ZXh0LAogIFJTQ0RlZmF1bHRSb290RXJyb3JCb3VuZGFyeSBhcyBVTlNBRkVfUlNDRGVmYXVsdFJvb3RFcnJvckJvdW5kYXJ5LAogIFJlbWl4RXJyb3JCb3VuZGFyeSBhcyBVTlNBRkVfUmVtaXhFcnJvckJvdW5kYXJ5LAogIFJvdXRlQ29udGV4dCBhcyBVTlNBRkVfUm91dGVDb250ZXh0LAogIFNlcnZlck1vZGUgYXMgVU5TQUZFX1NlcnZlck1vZGUsCiAgU2luZ2xlRmV0Y2hSZWRpcmVjdFN5bWJvbCBhcyBVTlNBRkVfU2luZ2xlRmV0Y2hSZWRpcmVjdFN5bWJvbCwKICBWaWV3VHJhbnNpdGlvbkNvbnRleHQgYXMgVU5TQUZFX1ZpZXdUcmFuc2l0aW9uQ29udGV4dCwKICBXaXRoQ29tcG9uZW50UHJvcHMgYXMgVU5TQUZFX1dpdGhDb21wb25lbnRQcm9wcywKICBXaXRoRXJyb3JCb3VuZGFyeVByb3BzIGFzIFVOU0FGRV9XaXRoRXJyb3JCb3VuZGFyeVByb3BzLAogIFdpdGhIeWRyYXRlRmFsbGJhY2tQcm9wcyBhcyBVTlNBRkVfV2l0aEh5ZHJhdGVGYWxsYmFja1Byb3BzLAogIGNyZWF0ZUJyb3dzZXJIaXN0b3J5IGFzIFVOU0FGRV9jcmVhdGVCcm93c2VySGlzdG9yeSwKICBjcmVhdGVDbGllbnRSb3V0ZXMgYXMgVU5TQUZFX2NyZWF0ZUNsaWVudFJvdXRlcywKICBjcmVhdGVDbGllbnRSb3V0ZXNXaXRoSE1SUmV2YWxpZGF0aW9uT3B0T3V0IGFzIFVOU0FGRV9jcmVhdGVDbGllbnRSb3V0ZXNXaXRoSE1SUmV2YWxpZGF0aW9uT3B0T3V0LAogIGNyZWF0ZVJvdXRlciBhcyBVTlNBRkVfY3JlYXRlUm91dGVyLAogIGRlY29kZVZpYVR1cmJvU3RyZWFtIGFzIFVOU0FGRV9kZWNvZGVWaWFUdXJib1N0cmVhbSwKICBkZXNlcmlhbGl6ZUVycm9yczIgYXMgVU5TQUZFX2Rlc2VyaWFsaXplRXJyb3JzLAogIGdldEh5ZHJhdGlvbkRhdGEgYXMgVU5TQUZFX2dldEh5ZHJhdGlvbkRhdGEsCiAgZ2V0UGF0Y2hSb3V0ZXNPbk5hdmlnYXRpb25GdW5jdGlvbiBhcyBVTlNBRkVfZ2V0UGF0Y2hSb3V0ZXNPbk5hdmlnYXRpb25GdW5jdGlvbiwKICBnZXRUdXJib1N0cmVhbVNpbmdsZUZldGNoRGF0YVN0cmF0ZWd5IGFzIFVOU0FGRV9nZXRUdXJib1N0cmVhbVNpbmdsZUZldGNoRGF0YVN0cmF0ZWd5LAogIGh5ZHJhdGlvblJvdXRlUHJvcGVydGllcyBhcyBVTlNBRkVfaHlkcmF0aW9uUm91dGVQcm9wZXJ0aWVzLAogIGludmFyaWFudCBhcyBVTlNBRkVfaW52YXJpYW50LAogIG1hcFJvdXRlUHJvcGVydGllcyBhcyBVTlNBRkVfbWFwUm91dGVQcm9wZXJ0aWVzLAogIHNob3VsZEh5ZHJhdGVSb3V0ZUxvYWRlciBhcyBVTlNBRkVfc2hvdWxkSHlkcmF0ZVJvdXRlTG9hZGVyLAogIHVzZUZvZ09GV2FyRGlzY292ZXJ5IGFzIFVOU0FGRV91c2VGb2dPRldhckRpc2NvdmVyeSwKICB1c2VTY3JvbGxSZXN0b3JhdGlvbiBhcyBVTlNBRkVfdXNlU2Nyb2xsUmVzdG9yYXRpb24sCiAgd2l0aENvbXBvbmVudFByb3BzIGFzIFVOU0FGRV93aXRoQ29tcG9uZW50UHJvcHMsCiAgd2l0aEVycm9yQm91bmRhcnlQcm9wcyBhcyBVTlNBRkVfd2l0aEVycm9yQm91bmRhcnlQcm9wcywKICB3aXRoSHlkcmF0ZUZhbGxiYWNrUHJvcHMgYXMgVU5TQUZFX3dpdGhIeWRyYXRlRmFsbGJhY2tQcm9wcywKICBjcmVhdGVCcm93c2VyUm91dGVyLAogIGNyZWF0ZUNvbnRleHQ0IGFzIGNyZWF0ZUNvbnRleHQsCiAgY3JlYXRlQ29va2llLAogIGNyZWF0ZUNvb2tpZVNlc3Npb25TdG9yYWdlLAogIGNyZWF0ZUhhc2hSb3V0ZXIsCiAgY3JlYXRlTWVtb3J5Um91dGVyLAogIGNyZWF0ZU1lbW9yeVNlc3Npb25TdG9yYWdlLAogIGNyZWF0ZVBhdGgsCiAgY3JlYXRlUmVxdWVzdEhhbmRsZXIsCiAgY3JlYXRlUm91dGVzRnJvbUNoaWxkcmVuLAogIGNyZWF0ZVJvdXRlc0Zyb21FbGVtZW50cywKICBjcmVhdGVSb3V0ZXNTdHViLAogIGNyZWF0ZVNlYXJjaFBhcmFtcywKICBjcmVhdGVTZXNzaW9uLAogIGNyZWF0ZVNlc3Npb25TdG9yYWdlLAogIGNyZWF0ZVN0YXRpY0hhbmRsZXIyIGFzIGNyZWF0ZVN0YXRpY0hhbmRsZXIsCiAgY3JlYXRlU3RhdGljUm91dGVyLAogIGRhdGEsCiAgZ2VuZXJhdGVQYXRoLAogIGhyZWYsCiAgaXNDb29raWUsCiAgaXNSb3V0ZUVycm9yUmVzcG9uc2UsCiAgaXNTZXNzaW9uLAogIG1hdGNoUGF0aCwKICBtYXRjaFJvdXRlcywKICBwYXJzZVBhdGgsCiAgcmVkaXJlY3QsCiAgcmVkaXJlY3REb2N1bWVudCwKICByZW5kZXJNYXRjaGVzLAogIHJlcGxhY2UsCiAgcmVzb2x2ZVBhdGgsCiAgSGlzdG9yeVJvdXRlciBhcyB1bnN0YWJsZV9IaXN0b3J5Um91dGVyLAogIFJTQ0h5ZHJhdGVkUm91dGVyIGFzIHVuc3RhYmxlX1JTQ0h5ZHJhdGVkUm91dGVyLAogIFJTQ1N0YXRpY1JvdXRlciBhcyB1bnN0YWJsZV9SU0NTdGF0aWNSb3V0ZXIsCiAgY3JlYXRlQ2FsbFNlcnZlciBhcyB1bnN0YWJsZV9jcmVhdGVDYWxsU2VydmVyLAogIGdldFJTQ1N0cmVhbSBhcyB1bnN0YWJsZV9nZXRSU0NTdHJlYW0sCiAgcm91dGVSU0NTZXJ2ZXJSZXF1ZXN0IGFzIHVuc3RhYmxlX3JvdXRlUlNDU2VydmVyUmVxdWVzdCwKICBzZXREZXZTZXJ2ZXJIb29rcyBhcyB1bnN0YWJsZV9zZXREZXZTZXJ2ZXJIb29rcywKICB1c2VQcm9tcHQgYXMgdW5zdGFibGVfdXNlUHJvbXB0LAogIHVzZUFjdGlvbkRhdGEsCiAgdXNlQXN5bmNFcnJvciwKICB1c2VBc3luY1ZhbHVlLAogIHVzZUJlZm9yZVVubG9hZCwKICB1c2VCbG9ja2VyLAogIHVzZUZldGNoZXIsCiAgdXNlRmV0Y2hlcnMsCiAgdXNlRm9ybUFjdGlvbiwKICB1c2VIcmVmLAogIHVzZUluUm91dGVyQ29udGV4dCwKICB1c2VMaW5rQ2xpY2tIYW5kbGVyLAogIHVzZUxvYWRlckRhdGEsCiAgdXNlTG9jYXRpb24sCiAgdXNlTWF0Y2gsCiAgdXNlTWF0Y2hlcywKICB1c2VOYXZpZ2F0ZSwKICB1c2VOYXZpZ2F0aW9uLAogIHVzZU5hdmlnYXRpb25UeXBlLAogIHVzZU91dGxldCwKICB1c2VPdXRsZXRDb250ZXh0LAogIHVzZVBhcmFtcywKICB1c2VSZXNvbHZlZFBhdGgsCiAgdXNlUmV2YWxpZGF0b3IsCiAgdXNlUm91dGVFcnJvciwKICB1c2VSb3V0ZUxvYWRlckRhdGEsCiAgdXNlUm91dGVzLAogIHVzZVNlYXJjaFBhcmFtcywKICB1c2VTdWJtaXQsCiAgdXNlVmlld1RyYW5zaXRpb25TdGF0ZQp9OwovKiEgQnVuZGxlZCBsaWNlbnNlIGluZm9ybWF0aW9uOgoKcmVhY3Qtcm91dGVyL2Rpc3QvZGV2ZWxvcG1lbnQvY2h1bmstQjdSUVU1VEwubWpzOgpyZWFjdC1yb3V0ZXIvZGlzdC9kZXZlbG9wbWVudC9jaHVuay1TS05LQjVWSS5tanM6CnJlYWN0LXJvdXRlci9kaXN0L2RldmVsb3BtZW50L2RvbS1leHBvcnQubWpzOgpyZWFjdC1yb3V0ZXIvZGlzdC9kZXZlbG9wbWVudC9pbmRleC5tanM6CiAgKCoqCiAgICogcmVhY3Qtcm91dGVyIHY3LjkuMQogICAqCiAgICogQ29weXJpZ2h0IChjKSBSZW1peCBTb2Z0d2FyZSBJbmMuCiAgICoKICAgKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGUKICAgKiBMSUNFTlNFLm1kIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuCiAgICoKICAgKiBAbGljZW5zZSBNSVQKICAgKikKCnJlYWN0LXJvdXRlci1kb20vZGlzdC9pbmRleC5tanM6CiAgKCoqCiAgICogcmVhY3Qtcm91dGVyLWRvbSB2Ny45LjEKICAgKgogICAqIENvcHlyaWdodCAoYykgUmVtaXggU29mdHdhcmUgSW5jLgogICAqCiAgICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlCiAgICogTElDRU5TRS5tZCBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogICAqCiAgICogQGxpY2Vuc2UgTUlUCiAgICopCiovCi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWN0LXJvdXRlci1kb20uanMubWFwCg==",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 439786
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 14,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.557Z",
        "time": 13,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/services/token-service.ts",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/App-routes.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"4313-GHsoced0a/C2WmzpG9Mutk2U5uU\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "63646"
            }
          ],
          "content": {
            "size": 63646,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsgc2V0Q29va2llLCBnZXRDb29raWUgfSBmcm9tICIvc3JjL3NlcnZpY2VzL2Nvb2tpZS11dGlscy50cyI7CmltcG9ydCBheGlvcyBmcm9tICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvYXhpb3MuanM/dj0wYmI2OWQ3MyI7CmNvbnN0IEFQSV9VUkwgPSAiaHR0cDovL2xvY2FsaG9zdDozMDAxIjsKZXhwb3J0IGNsYXNzIFN0b3JhZ2VTdGF0ZVRva2VuU2VydmljZSB7CiAgY3VycmVudFRva2VuID0gbnVsbDsKICBjdXJyZW50VXNlciA9IG51bGw7CiAgc3RvcmFnZVN0YXRlID0gbnVsbDsKICBsYXN0U2V0VGltZSA9IG51bGw7CiAgLyoqCiAgICogRXhwbGljaXRseSBzZXQgdGhlIHRva2VuIHN0YXRlCiAgICogVGhpcyBpcyB1c2VmdWwgd2hlbiB3ZSByZWNlaXZlIHRva2VuIGluZm9ybWF0aW9uIGZyb20gYW4gQVBJIHJlc3BvbnNlCiAgICogd2hlbiB3b3JraW5nIHdpdGggaHR0cE9ubHkgY29va2llcyB0aGF0IEphdmFTY3JpcHQgY2FuJ3QgYWNjZXNzIGRpcmVjdGx5CiAgICovCiAgc2V0VG9rZW4oc3RhdGUpIHsKICAgIHRoaXMuc3RvcmFnZVN0YXRlID0gc3RhdGU7CiAgICB0aGlzLmxhc3RTZXRUaW1lID0gRGF0ZS5ub3coKTsKICAgIHRyeSB7CiAgICAgIGNvbnN0IGp3dENvb2tpZSA9IHN0YXRlLmNvb2tpZXMuZmluZCgoYykgPT4gYy5uYW1lID09PSAic2Vvbi1qd3QiKTsKICAgICAgaWYgKGp3dENvb2tpZSAmJiBqd3RDb29raWUudmFsdWUuaW5jbHVkZXMoIjoiKSkgewogICAgICAgIGNvbnN0IFssIGlkZW50aXR5UGFydF0gPSBqd3RDb29raWUudmFsdWUuc3BsaXQoIjoiKTsKICAgICAgICBpZiAoaWRlbnRpdHlQYXJ0KSB7CiAgICAgICAgICBjb25zdCBpZGVudGl0eSA9IEpTT04ucGFyc2UoaWRlbnRpdHlQYXJ0KTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJzZW9uLXVzZXItaWRlbnRpdHkiLCBKU09OLnN0cmluZ2lmeShpZGVudGl0eSkpOwogICAgICAgICAgY29uc29sZS5sb2coCiAgICAgICAgICAgICJJZGVudGl0eSBleHRyYWN0ZWQgZnJvbSB0b2tlbiBhbmQgc2F2ZWQgdG8gbG9jYWxTdG9yYWdlOiIsCiAgICAgICAgICAgIGlkZW50aXR5CiAgICAgICAgICApOwogICAgICAgICAgdGhpcy5zZXRDdXJyZW50VXNlcihpZGVudGl0eSk7CiAgICAgICAgfQogICAgICB9CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGNvbnNvbGUud2FybigiRmFpbGVkIHRvIGV4dHJhY3QgaWRlbnRpdHkgZnJvbSB0b2tlbjoiLCBlKTsKICAgIH0KICAgIHRoaXMuc3luY0Nvb2tpZXNUb0Jyb3dzZXIoKTsKICB9CiAgY29uc3RydWN0b3IoKSB7CiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgJiYgd2luZG93LmF1dGhUb2tlbikgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IGF1dGhUb2tlbiA9IHdpbmRvdy5hdXRoVG9rZW47CiAgICAgICAgdGhpcy5jdXJyZW50VG9rZW4gPSB0eXBlb2YgYXV0aFRva2VuID09PSAic3RyaW5nIiA/IEpTT04ucGFyc2UoYXV0aFRva2VuKSA6IGF1dGhUb2tlbjsKICAgICAgICBpZiAodGhpcy5jdXJyZW50VG9rZW4pIHsKICAgICAgICAgIHRoaXMuc3luY0Nvb2tpZXNUb0Jyb3dzZXIoKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCJGYWlsZWQgdG8gcGFyc2UgaW5qZWN0ZWQgYXV0aCB0b2tlbiIsIGUpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aGlzLnJlc3RvcmVGcm9tQnJvd3NlckNvb2tpZXMoKTsKICAgIH0KICB9CiAgLyoqCiAgICogR2V0IHRoZSBjdXJyZW50IHRva2VuLCByZWZyZXNoaW5nIGlmIG5lZWRlZAogICAqIElmIHRoZSBKV1QgaXMgZXhwaXJlZCBidXQgcmVmcmVzaCB0b2tlbiBpcyB2YWxpZCwgaXQgd2lsbCBhdXRvbWF0aWNhbGx5IHJlbmV3CiAgICovCiAgZ2V0VG9rZW4oKSB7CiAgICBpZiAoIXRoaXMuY3VycmVudFRva2VuKSB7CiAgICAgIGNvbnNvbGUud2FybigiTm8gdG9rZW4gYXZhaWxhYmxlIC0gd2lsbCBuZWVkIGF1dGhlbnRpY2F0aW9uIik7CiAgICAgIHJldHVybiB7IGNvb2tpZXM6IFtdLCBvcmlnaW5zOiBbXSB9OwogICAgfQogICAgdHJ5IHsKICAgICAgaWYgKHRoaXMuaXNKd3RWYWxpZCh0aGlzLmN1cnJlbnRUb2tlbikpIHsKICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50VG9rZW47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuaXNSZWZyZXNoVG9rZW5WYWxpZCh0aGlzLmN1cnJlbnRUb2tlbikpIHsKICAgICAgICBjb25zb2xlLmxvZygiSldUIGV4cGlyZWQgYnV0IHJlZnJlc2ggdG9rZW4gdmFsaWQgLSByZWZyZXNoaW5nLi4uIik7CiAgICAgICAgdm9pZCB0aGlzLnJlZnJlc2hUb2tlbigpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUud2FybigiQm90aCBKV1QgYW5kIHJlZnJlc2ggdG9rZW4gYXJlIGV4cGlyZWQgb3IgaW52YWxpZCIpOwogICAgICB9CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBpbiBnZXRUb2tlbjoiLCBlcnJvcik7CiAgICB9CiAgICByZXR1cm4gdGhpcy5jdXJyZW50VG9rZW47CiAgfQogIC8vIFRyYWNrIGluLWZsaWdodCByZWZyZXNoIG9wZXJhdGlvbnMgdG8gcHJldmVudCBkdXBsaWNhdGUgcmVmcmVzaGVzCiAgcmVmcmVzaEluUHJvZ3Jlc3MgPSBudWxsOwogIC8qKgogICAqIFJlZnJlc2ggdGhlIHRva2VuIGJ5IGNhbGxpbmcgdGhlIHJlbmV3YWwgZW5kcG9pbnQKICAgKiBVc2VzIHRoZSByZWZyZXNoIHRva2VuIHRvIGdldCBhIG5ldyBKV1QgdG9rZW4KICAgKiBQcmV2ZW50cyBtdWx0aXBsZSBzaW11bHRhbmVvdXMgcmVmcmVzaCByZXF1ZXN0cyBieSB0cmFja2luZyBpbi1mbGlnaHQgb3BlcmF0aW9ucwogICAqLwogIGFzeW5jIHJlZnJlc2hUb2tlbigpIHsKICAgIGlmICh0aGlzLnJlZnJlc2hJblByb2dyZXNzKSB7CiAgICAgIGNvbnNvbGUubG9nKCJSZXVzaW5nIGluLXByb2dyZXNzIHRva2VuIHJlZnJlc2ggcmVxdWVzdCIpOwogICAgICByZXR1cm4gdGhpcy5yZWZyZXNoSW5Qcm9ncmVzczsKICAgIH0KICAgIHRoaXMucmVmcmVzaEluUHJvZ3Jlc3MgPSB0aGlzLmV4ZWN1dGVSZWZyZXNoKCk7CiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgdGhpcy5yZWZyZXNoSW5Qcm9ncmVzczsKICAgIH0gZmluYWxseSB7CiAgICAgIHRoaXMucmVmcmVzaEluUHJvZ3Jlc3MgPSBudWxsOwogICAgfQogIH0KICAvKioKICAgKiBJbnRlcm5hbCBtZXRob2QgdGhhdCBwZXJmb3JtcyB0aGUgYWN0dWFsIHRva2VuIHJlZnJlc2ggb3BlcmF0aW9uCiAgICogRXh0cmFjdGVkIHRvIG1ha2UgdHJhY2tpbmcgdGhlIGluLWZsaWdodCBwcm9taXNlIGNsZWFuZXIKICAgKi8KICBhc3luYyBleGVjdXRlUmVmcmVzaCgpIHsKICAgIHRyeSB7CiAgICAgIGlmICghdGhpcy5jdXJyZW50VG9rZW4gfHwgIXRoaXMuaXNSZWZyZXNoVG9rZW5WYWxpZCh0aGlzLmN1cnJlbnRUb2tlbikpIHsKICAgICAgICBjb25zb2xlLndhcm4oIk5vIHZhbGlkIHJlZnJlc2ggdG9rZW4gYXZhaWxhYmxlIC0gY2Fubm90IHJlbmV3Iik7CiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFRva2VuIHx8IHsgY29va2llczogW10sIG9yaWdpbnM6IFtdIH07CiAgICAgIH0KICAgICAgY29uc29sZS5sb2coIkF0dGVtcHRpbmcgdG8gcmVmcmVzaCB0b2tlbiB3aXRoIC9hdXRoL3JlbmV3IGVuZHBvaW50Iik7CiAgICAgIGNvbnNvbGUubG9nKCJDdXJyZW50IGNvb2tpZXMgYmVmb3JlIHJlZnJlc2g6IiwgZG9jdW1lbnQuY29va2llKTsKICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KAogICAgICAgIGAke0FQSV9VUkx9L2F1dGgvcmVuZXdgLAogICAgICAgIHt9LAogICAgICAgIHsgd2l0aENyZWRlbnRpYWxzOiB0cnVlIH0KICAgICAgICAvLyBFbnN1cmVzIGNvb2tpZXMgYXJlIHNlbnQKICAgICAgKTsKICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUb2tlbiByZWZyZXNoIGZhaWxlZCB3aXRoIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YCk7CiAgICAgIH0KICAgICAgY29uc29sZS5sb2coIlRva2VuIHJlZnJlc2ggc3VjY2Vzc2Z1bCAtIHVwZGF0aW5nIHN0b3JhZ2Ugc3RhdGUiKTsKICAgICAgY29uc29sZS5sb2coIlJlc3BvbnNlIGhlYWRlcnM6IiwgcmVzcG9uc2UuaGVhZGVycyk7CiAgICAgIGNvbnNvbGUubG9nKCJDb29raWVzIGFmdGVyIHJlZnJlc2ggcmVzcG9uc2U6IiwgZG9jdW1lbnQuY29va2llKTsKICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMzAwKSk7CiAgICAgIGNvbnNvbGUubG9nKCJDb29raWVzIGFmdGVyIHdhaXRpbmcgcGVyaW9kOiIsIGRvY3VtZW50LmNvb2tpZSk7CiAgICAgIGNvbnN0IHJlc3RvcmVkID0gdGhpcy5yZXN0b3JlRnJvbUJyb3dzZXJDb29raWVzKCk7CiAgICAgIGlmICghcmVzdG9yZWQpIHsKICAgICAgICBjb25zb2xlLndhcm4oIkZhaWxlZCB0byByZXN0b3JlIGNvb2tpZXMgYWZ0ZXIgdG9rZW4gcmVmcmVzaCIpOwogICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpOwogICAgICAgIGNvbnN0IHNlY29uZEF0dGVtcHQgPSB0aGlzLnJlc3RvcmVGcm9tQnJvd3NlckNvb2tpZXMoKTsKICAgICAgICBpZiAoc2Vjb25kQXR0ZW1wdCkgewogICAgICAgICAgY29uc29sZS5sb2coIlN1Y2Nlc3NmdWxseSByZXN0b3JlZCBjb29raWVzIG9uIHNlY29uZCBhdHRlbXB0Iik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkFsbCBhdHRlbXB0cyB0byByZXN0b3JlIGNvb2tpZXMgZmFpbGVkIik7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKCJTdWNjZXNzZnVsbHkgcmVzdG9yZWQgY29va2llcyBhZnRlciByZWZyZXNoIik7CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLmN1cnJlbnRUb2tlbikgewogICAgICAgIHRoaXMuY3VycmVudFRva2VuID0geyBjb29raWVzOiBbXSwgb3JpZ2luczogW10gfTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5jdXJyZW50VG9rZW47CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICBjb25zb2xlLmVycm9yKCJGYWlsZWQgdG8gcmVmcmVzaCB0b2tlbjoiLCBlcnJvcik7CiAgICAgIHRoaXMuY3VycmVudFRva2VuID0gdGhpcy5jdXJyZW50VG9rZW4gfHwgeyBjb29raWVzOiBbXSwgb3JpZ2luczogW10gfTsKICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFRva2VuOwogICAgfQogIH0KICAvKioKICAgKiBDaGVjayBpZiB0aGUgdG9rZW4gaXMgc3RpbGwgdmFsaWQKICAgKiBBIHRva2VuIGlzIHZhbGlkIGlmIGVpdGhlcjoKICAgKiAxLiBUaGUgSldUIGlzIHZhbGlkLCBvcgogICAqIDIuIFRoZSBKV1QgaXMgZXhwaXJlZCBidXQgdGhlIHJlZnJlc2ggdG9rZW4gaXMgdmFsaWQKICAgKi8KICBpc1Rva2VuVmFsaWQodG9rZW4pIHsKICAgIHJldHVybiB0aGlzLmlzSnd0VmFsaWQodG9rZW4pIHx8IHRoaXMuaXNSZWZyZXNoVG9rZW5WYWxpZCh0b2tlbik7CiAgfQogIC8qKgogICAqIENoZWNrIGlmIHRoZSBKV1QgdG9rZW4gaXMgdmFsaWQKICAgKi8KICAvKioKICAgKiBDaGVjayBpZiB0aGUgSldUIHRva2VuIGlzIHN0aWxsIHZhbGlkLgogICAqIEFzc3VtZXMgY29va2llLnZhbHVlIGlzIFVSTC1lbmNvZGVkIGFuZCBmb2xsb3dzOgogICAqICAgIkJlYXJlciA8SVNPLTg2MDEtdGltZXN0YW1wPjo8SlNPTi1pZGVudGl0eT4iCiAgICovCiAgaXNKd3RWYWxpZCh0b2tlbikgewogICAgaWYgKCF0b2tlbj8uY29va2llcyB8fCAhQXJyYXkuaXNBcnJheSh0b2tlbi5jb29raWVzKSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBjb25zdCBjb29raWUgPSB0b2tlbi5jb29raWVzLmZpbmQoKGMpID0+IGMubmFtZSA9PT0gInNlb24tand0Iik7CiAgICBpZiAoIWNvb2tpZSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBjb25zdCBub3dTZWMgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxZTMpOwogICAgaWYgKGNvb2tpZS5leHBpcmVzIDwgbm93U2VjKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGxldCBkZWNvZGVkOwogICAgdHJ5IHsKICAgICAgZGVjb2RlZCA9IGRlY29kZVVSSUNvbXBvbmVudChjb29raWUudmFsdWUpOwogICAgfSBjYXRjaCB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGlmIChkZWNvZGVkLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCgiYmVhcmVyICIpKSB7CiAgICAgIGRlY29kZWQgPSBkZWNvZGVkLnNsaWNlKDcpOwogICAgfQogICAgY29uc3Qgc2VwSW5kZXggPSBkZWNvZGVkLmluZGV4T2YoIjp7Iik7CiAgICBjb25zdCB0aW1lc3RhbXBQYXJ0ID0gc2VwSW5kZXggPiAwID8gZGVjb2RlZC5zbGljZSgwLCBzZXBJbmRleCkgOiBkZWNvZGVkOwogICAgY29uc3QgdHMgPSBuZXcgRGF0ZSh0aW1lc3RhbXBQYXJ0KTsKICAgIGlmIChpc05hTih0cy5nZXRUaW1lKCkpKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGNvbnN0IGFnZVNlY29uZHMgPSAoRGF0ZS5ub3coKSAtIHRzLmdldFRpbWUoKSkgLyAxZTM7CiAgICBjb25zdCBWQUxJRF9XSU5ET1cgPSA4NjQwMDsKICAgIHJldHVybiBhZ2VTZWNvbmRzID49IDAgJiYgYWdlU2Vjb25kcyA8IFZBTElEX1dJTkRPVzsKICB9CiAgLyoqCiAgICogVmFsaWRhdGUgYSB0b2tlbiB0aW1lc3RhbXAKICAgKiBAcGFyYW0gdG9rZW5Db250ZW50IFRoZSB0b2tlbiBjb250ZW50IHRvIHZhbGlkYXRlCiAgICogQHJldHVybnMgYm9vbGVhbiBpbmRpY2F0aW5nIGlmIHRoZSB0b2tlbiB0aW1lc3RhbXAgaXMgdmFsaWQKICAgKi8KICB2YWxpZGF0ZVRva2VuVGltZXN0YW1wKHRva2VuQ29udGVudCkgewogICAgdHJ5IHsKICAgICAgbGV0IHRpbWVzdGFtcCA9IHRva2VuQ29udGVudDsKICAgICAgY29uc3QgY29sb25Qb3MgPSB0b2tlbkNvbnRlbnQuaW5kZXhPZigiOiIpOwogICAgICBpZiAoY29sb25Qb3MgPiAwKSB7CiAgICAgICAgdGltZXN0YW1wID0gdG9rZW5Db250ZW50LnN1YnN0cmluZygwLCBjb2xvblBvcyk7CiAgICAgICAgY29uc29sZS5kZWJ1ZygiRXh0cmFjdGVkIHRpbWVzdGFtcCBmcm9tIGNvbXBvdW5kIHRva2VuOiIsIHRpbWVzdGFtcCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5kZWJ1ZygiVXNpbmcgZW50aXJlIHRva2VuIGFzIHRpbWVzdGFtcDoiLCB0aW1lc3RhbXApOwogICAgICB9CiAgICAgIGlmICghdGltZXN0YW1wIHx8IHR5cGVvZiB0aW1lc3RhbXAgIT09ICJzdHJpbmciKSB7CiAgICAgICAgY29uc29sZS5kZWJ1ZygiSW52YWxpZCB0aW1lc3RhbXAgZm9ybWF0Iik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGNvbnN0IHRva2VuRGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcCk7CiAgICAgIGlmIChpc05hTih0b2tlbkRhdGUuZ2V0VGltZSgpKSkgewogICAgICAgIGNvbnNvbGUuZGVidWcoIkpXVCBjb250YWlucyBpbnZhbGlkIGRhdGUiKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgY29uc3QgY3VycmVudERhdGUgPSAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTsKICAgICAgY29uc3QgdG9rZW5UaW1lID0gdG9rZW5EYXRlLmdldFRpbWUoKTsKICAgICAgY29uc3QgZGlmZkluU2Vjb25kcyA9IChjdXJyZW50RGF0ZS5nZXRUaW1lKCkgLSB0b2tlblRpbWUpIC8gMWUzOwogICAgICBjb25zdCB2YWxpZGl0eVdpbmRvdyA9IDg2NDAwOwogICAgICBjb25zdCBpc1ZhbGlkID0gZGlmZkluU2Vjb25kcyA+PSAwICYmIGRpZmZJblNlY29uZHMgPCB2YWxpZGl0eVdpbmRvdzsKICAgICAgaWYgKCFpc1ZhbGlkKSB7CiAgICAgICAgY29uc29sZS5kZWJ1ZygKICAgICAgICAgIGBKV1QgYWdlICgke2RpZmZJblNlY29uZHN9cykgZXhjZWVkcyB2YWxpZGl0eSB3aW5kb3cgKCR7dmFsaWRpdHlXaW5kb3d9cylgCiAgICAgICAgKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmRlYnVnKAogICAgICAgICAgYEpXVCBpcyB2YWxpZCwgYWdlOiAke2RpZmZJblNlY29uZHN9cyB3aXRoaW4gd2luZG93OiAke3ZhbGlkaXR5V2luZG93fXNgCiAgICAgICAgKTsKICAgICAgfQogICAgICByZXR1cm4gaXNWYWxpZDsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIHZhbGlkYXRpbmcgdG9rZW4gdGltZXN0YW1wOiIsIGVycm9yKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KICAvKioKICAgKiBDaGVjayBpZiB0aGUgcmVmcmVzaCB0b2tlbiBpcyB2YWxpZAogICAqLwogIGlzUmVmcmVzaFRva2VuVmFsaWQodG9rZW4pIHsKICAgIGlmICghdG9rZW4gfHwgIXRva2VuLmNvb2tpZXMgfHwgIUFycmF5LmlzQXJyYXkodG9rZW4uY29va2llcykpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgdHJ5IHsKICAgICAgY29uc3QgY29va2llID0gdG9rZW4uY29va2llcy5maW5kKChjKSA9PiBjLm5hbWUgPT09ICJzZW9uLXJlZnJlc2giKTsKICAgICAgaWYgKCFjb29raWUpIHsKICAgICAgICBjb25zb2xlLmRlYnVnKCJObyByZWZyZXNoIHRva2VuIGNvb2tpZSBmb3VuZCIpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBjb25zdCBjdXJyZW50VGltZSA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDFlMyk7CiAgICAgIGNvbnN0IGlzVmFsaWQgPSBjb29raWUuZXhwaXJlcyA+IGN1cnJlbnRUaW1lOwogICAgICBpZiAoIWlzVmFsaWQpIHsKICAgICAgICBjb25zb2xlLmRlYnVnKCJSZWZyZXNoIHRva2VuIGlzIGV4cGlyZWQiKTsKICAgICAgfQogICAgICByZXR1cm4gaXNWYWxpZDsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIGNoZWNraW5nIHJlZnJlc2ggdG9rZW4gdmFsaWRpdHk6IiwgZXJyb3IpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQogIC8qKgogICAqIEdldCBhdXRob3JpemF0aW9uIGhlYWRlciBjb21wYXRpYmxlIHdpdGggZXhpc3RpbmcgQVBJCiAgICogVGhpcyBtYWludGFpbnMgYmFja3dhcmQgY29tcGF0aWJpbGl0eSB3aXRoIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uCiAgICovCiAgZ2V0QXV0aG9yaXphdGlvbkhlYWRlcigpIHsKICAgIGNvbnN0IHRva2VuID0gdGhpcy5nZXRUb2tlbigpOwogICAgaWYgKCF0b2tlbiB8fCAhdG9rZW4uY29va2llcyB8fCB0b2tlbi5jb29raWVzLmxlbmd0aCA9PT0gMCkgewogICAgICByZXR1cm4gIiI7CiAgICB9CiAgICBjb25zdCBjb29raWUgPSB0b2tlbi5jb29raWVzLmZpbmQoKGMpID0+IGMubmFtZSA9PT0gInNlb24tand0Iik7CiAgICBpZiAoIWNvb2tpZSkgcmV0dXJuICIiOwogICAgbGV0IHRva2VuVmFsdWUgPSBjb29raWUudmFsdWUucmVwbGFjZSgvXkJlYXJlclxzKy9pLCAiIik7CiAgICBpZiAoIXRva2VuVmFsdWUuaW5jbHVkZXMoIjoiKSkgewogICAgICBjb25zdCB1c2VySWRlbnRpdHkgPSB0aGlzLmdldEN1cnJlbnRVc2VyKCkgfHwgewogICAgICAgIGlkOiAidXNlcjEyMyIsCiAgICAgICAgdXNlcklkZW50aWZpZXI6ICJ1c2VyIgogICAgICB9OwogICAgICBjb25zdCBpZGVudGl0eUpzb24gPSBKU09OLnN0cmluZ2lmeSh1c2VySWRlbnRpdHkpOwogICAgICB0b2tlblZhbHVlID0gYCR7dG9rZW5WYWx1ZX06JHtpZGVudGl0eUpzb259YDsKICAgICAgY29uc29sZS5sb2coCiAgICAgICAgIkFkZGVkIG1pc3NpbmcgaWRlbnRpdHkgdG8gdG9rZW4gaW4gZ2V0QXV0aG9yaXphdGlvbkhlYWRlcjoiLAogICAgICAgIHVzZXJJZGVudGl0eQogICAgICApOwogICAgfQogICAgcmV0dXJuIGBCZWFyZXIgJHt0b2tlblZhbHVlfWA7CiAgfQogIC8qKgogICAqIFN5bmNocm9uaXplIFN0b3JhZ2VTdGF0ZSBjb29raWVzIHRvIGJyb3dzZXIgY29va2llcwogICAqIFRoaXMgaXMgdXNlZCBmb3IgdGVzdCBhdXRvbWF0aW9uIGFuZCB0byBwZXJzaXN0IGF1dGhlbnRpY2F0aW9uIHN0YXRlCiAgICovCiAgc3luY0Nvb2tpZXNUb0Jyb3dzZXIoKSB7CiAgICBpZiAoIXRoaXMuY3VycmVudFRva2VuKSByZXR1cm47CiAgICB0aGlzLmN1cnJlbnRUb2tlbi5jb29raWVzLmZvckVhY2goKGNvb2tpZSkgPT4gewogICAgICBzZXRDb29raWUoY29va2llLm5hbWUsIGNvb2tpZS52YWx1ZSwgewogICAgICAgIGRvbWFpbjogY29va2llLmRvbWFpbiwKICAgICAgICBwYXRoOiBjb29raWUucGF0aCwKICAgICAgICBleHBpcmVzOiBjb29raWUuZXhwaXJlcywKICAgICAgICBzZWN1cmU6IGNvb2tpZS5zZWN1cmUsCiAgICAgICAgc2FtZVNpdGU6IGNvb2tpZS5zYW1lU2l0ZQogICAgICB9KTsKICAgIH0pOwogIH0KICAvKioKICAgKiBVcGRhdGUgdG9rZW4gc3RhdGUgZnJvbSBicm93c2VyIGNvb2tpZXMKICAgKiBUaGlzIGlzIGEgcHVibGljIG1ldGhvZCB0aGF0IHdyYXBzIHRoZSBwcml2YXRlIHJlc3RvcmVGcm9tQnJvd3NlckNvb2tpZXMKICAgKiBtZXRob2QsIGFsbG93aW5nIGV4dGVybmFsIGNvZGUgdG8gdXBkYXRlIHRoZSB0b2tlbiBzdGF0ZSBhZnRlciBIVFRQIG9wZXJhdGlvbnMKICAgKi8KICB1cGRhdGVGcm9tQnJvd3NlckNvb2tpZXMoKSB7CiAgICByZXR1cm4gdGhpcy5yZXN0b3JlRnJvbUJyb3dzZXJDb29raWVzKCk7CiAgfQogIC8qKgogICAqIFNldCB0aGUgY3VycmVudCB1c2VyJ3MgaWRlbnRpdHkgaW4gbWVtb3J5IGFuZCBsb2NhbFN0b3JhZ2UKICAgKiBUaGlzIGlzIHRoZSBPTkxZIG1ldGhvZCB0aGF0IHNob3VsZCBiZSB1c2VkIHRvIHVwZGF0ZSB0aGUgdXNlciBpZGVudGl0eQogICAqIEBwYXJhbSBpZGVudGl0eSBUaGUgdXNlciBpZGVudGl0eSBvYmplY3QgdG8gc3RvcmUKICAgKi8KICBzZXRDdXJyZW50VXNlcihpZGVudGl0eSkgewogICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgIGlmIChpZGVudGl0eSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgic2Vvbi11c2VyLWlkZW50aXR5IiwgSlNPTi5zdHJpbmdpZnkoaWRlbnRpdHkpKTsKICAgICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBpZGVudGl0eTsKICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRUb2tlbikgewogICAgICAgICAgICBjb25zdCBqd3RDb29raWUgPSB0aGlzLmN1cnJlbnRUb2tlbi5jb29raWVzLmZpbmQoCiAgICAgICAgICAgICAgKGMpID0+IGMubmFtZSA9PT0gInNlb24tand0IgogICAgICAgICAgICApOwogICAgICAgICAgICBpZiAoand0Q29va2llKSB7CiAgICAgICAgICAgICAgbGV0IHRva2VuVmFsdWUgPSBqd3RDb29raWUudmFsdWUucmVwbGFjZSgvXkJlYXJlclxzKy9pLCAiIik7CiAgICAgICAgICAgICAgaWYgKCF0b2tlblZhbHVlLmluY2x1ZGVzKCI6IikpIHsKICAgICAgICAgICAgICAgIHRva2VuVmFsdWUgPSBgJHt0b2tlblZhbHVlfToke0pTT04uc3RyaW5naWZ5KGlkZW50aXR5KX1gOwogICAgICAgICAgICAgICAgand0Q29va2llLnZhbHVlID0gdG9rZW5WYWx1ZTsKICAgICAgICAgICAgICAgIHRoaXMuc3luY0Nvb2tpZXNUb0Jyb3dzZXIoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCJGYWlsZWQgdG8gc3RvcmUgdXNlciBpZGVudGl0eSBpbiBsb2NhbFN0b3JhZ2UiLCBlKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInNlb24tdXNlci1pZGVudGl0eSIpOwogICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBudWxsOwogICAgICB9CiAgICB9CiAgfQogIC8qKgogICAqIEdldCB0aGUgY3VycmVudCB1c2VyIGlkZW50aXR5IGluZm9ybWF0aW9uCiAgICogQHJldHVybnMgVGhlIGN1cnJlbnQgdXNlciBpZGVudGl0eSBvciBudWxsIGlmIG5vdCBhdXRoZW50aWNhdGVkCiAgICovCiAgZ2V0Q3VycmVudFVzZXIoKSB7CiAgICBpZiAodGhpcy5jdXJyZW50VXNlcikgewogICAgICByZXR1cm4gdGhpcy5jdXJyZW50VXNlcjsKICAgIH0KICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIikgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHN0b3JlZElkZW50aXR5ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInNlb24tdXNlci1pZGVudGl0eSIpOwogICAgICAgIGlmIChzdG9yZWRJZGVudGl0eSkgewogICAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IEpTT04ucGFyc2Uoc3RvcmVkSWRlbnRpdHkpOwogICAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFVzZXI7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5lcnJvcigiRmFpbGVkIHRvIHJldHJpZXZlIHVzZXIgaWRlbnRpdHkgZnJvbSBsb2NhbFN0b3JhZ2UiLCBlKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfQogIC8qKgogICAqIFZhbGlkYXRlIGF1dGhlbnRpY2F0aW9uIHdpdGggYmFja2VuZAogICAqIFRoaXMgbWFrZXMgYW4gQVBJIGNhbGwgdG8gY2hlY2sgaWYgdGhlIGN1cnJlbnQgY29va2llcyBhcmUgdmFsaWQKICAgKiBhbmQgdXBkYXRlcyB0aGUgY3VycmVudCB1c2VyIGlmIHRoZXkgYXJlCiAgICovCiAgYXN5bmMgdmFsaWRhdGVBdXRoV2l0aEJhY2tlbmQoKSB7CiAgICB0cnkgewogICAgICBjb25zb2xlLmxvZygiVmFsaWRhdGluZyBhdXRoZW50aWNhdGlvbiB3aXRoIGJhY2tlbmQuLi4iKTsKICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoYCR7QVBJX1VSTH0vYXV0aC92YWxpZGF0ZWAsIHsKICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUKICAgICAgICAvLyBJbXBvcnRhbnQ6IHNlbmQgY29va2llcyB3aXRoIHRoZSByZXF1ZXN0CiAgICAgIH0pOwogICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDAgJiYgcmVzcG9uc2UuZGF0YS5hdXRoZW50aWNhdGVkKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEudXNlcikgewogICAgICAgICAgdGhpcy5zZXRDdXJyZW50VXNlcih7CiAgICAgICAgICAgIHVzZXJJZDogcmVzcG9uc2UuZGF0YS51c2VyLmlkIHx8IHJlc3BvbnNlLmRhdGEudXNlci51c2VySWQsCiAgICAgICAgICAgIHVzZXJuYW1lOiByZXNwb25zZS5kYXRhLnVzZXIudXNlcm5hbWUsCiAgICAgICAgICAgIHVzZXJJZGVudGlmaWVyOiByZXNwb25zZS5kYXRhLnVzZXIudXNlcklkZW50aWZpZXIKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICB0aGlzLnVwZGF0ZUZyb21Ccm93c2VyQ29va2llcygpOwogICAgICAgIGNvbnNvbGUubG9nKCJBdXRoZW50aWNhdGlvbiB2YWxpZGF0ZWQgc3VjY2Vzc2Z1bGx5Iik7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgY29uc29sZS53YXJuKCJBdXRoZW50aWNhdGlvbiB2YWxpZGF0aW9uIGZhaWxlZCIsIHJlc3BvbnNlLmRhdGEpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICBjb25zb2xlLmVycm9yKCJFcnJvciB2YWxpZGF0aW5nIGF1dGhlbnRpY2F0aW9uOiIsIGVycm9yKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KICAvKioKICAgKiBDbGVhciBhbGwgdG9rZW5zIGFuZCB1c2VyIHN0YXRlCiAgICogVGhpcyBpbmNsdWRlcyBib3RoIHRoZSBpbnRlcm5hbCBzdGF0ZSBhbmQgYnJvd3NlciBjb29raWVzCiAgICovCiAgY2xlYXJUb2tlbnMoKSB7CiAgICB0aGlzLmN1cnJlbnRUb2tlbiA9IG51bGw7CiAgICB0aGlzLmN1cnJlbnRVc2VyID0gbnVsbDsKICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIikgewogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgic2Vvbi11c2VyLWlkZW50aXR5Iik7CiAgICAgIGNvbnN0IGNvb2tpZU9wdGlvbnMgPSB7CiAgICAgICAgcGF0aDogIi8iLAogICAgICAgIGRvbWFpbjogd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLAogICAgICAgIGV4cGlyZXM6IDAsCiAgICAgICAgLy8gU2V0IHRvIDAgZm9yIGltbWVkaWF0ZSBleHBpcmF0aW9uIChlcG9jaCB0aW1lIDAgPSAxOTcwLTAxLTAxKQogICAgICAgIHNlY3VyZTogd2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAiaHR0cHM6IiwKICAgICAgICBzYW1lU2l0ZTogInN0cmljdCIKICAgICAgfTsKICAgICAgc2V0Q29va2llKCJzZW9uLWp3dCIsICIiLCBjb29raWVPcHRpb25zKTsKICAgICAgc2V0Q29va2llKCJzZW9uLXJlZnJlc2giLCAiIiwgY29va2llT3B0aW9ucyk7CiAgICAgIGlmIChnZXRDb29raWUoInNlb24tand0IikgfHwgZ2V0Q29va2llKCJzZW9uLXJlZnJlc2giKSkgewogICAgICAgIGNvbnNvbGUud2FybigKICAgICAgICAgICJGYWlsZWQgdG8gY2xlYXIgYXV0aCBjb29raWVzIG9uIGZpcnN0IGF0dGVtcHQsIHRyeWluZyBhbHRlcm5hdGUgbWV0aG9kIgogICAgICAgICk7CiAgICAgICAgZG9jdW1lbnQuY29va2llID0gInNlb24tand0PTsgZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIFVUQzsgcGF0aD0vOyI7CiAgICAgICAgZG9jdW1lbnQuY29va2llID0gInNlb24tcmVmcmVzaD07IGV4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBVVEM7IHBhdGg9LzsiOwogICAgICB9CiAgICB9CiAgfQogIC8qKgogICAqIEF0dGVtcHQgdG8gcmVzdG9yZSB0b2tlbiBmcm9tIGJyb3dzZXIgY29va2llcwogICAqIEByZXR1cm5zIHRydWUgaWYgdG9rZW4gd2FzIHN1Y2Nlc3NmdWxseSByZXN0b3JlZAogICAqLwogIHJlc3RvcmVGcm9tQnJvd3NlckNvb2tpZXMoKSB7CiAgICB0cnkgewogICAgICBjb25zb2xlLmRlYnVnKCJBbGwgZG9jdW1lbnQgY29va2llczoiLCBkb2N1bWVudC5jb29raWUpOwogICAgICBjb25zdCBqd3RWYWx1ZSA9IGdldENvb2tpZSgic2Vvbi1qd3QiKTsKICAgICAgY29uc3QgcmVmcmVzaFZhbHVlID0gZ2V0Q29va2llKCJzZW9uLXJlZnJlc2giKTsKICAgICAgY29uc29sZS5kZWJ1ZygiUmVzdG9yaW5nIGNvb2tpZXMgZnJvbSBicm93c2VyOiIsIHsKICAgICAgICBqd3RWYWx1ZSwKICAgICAgICByZWZyZXNoVmFsdWUKICAgICAgfSk7CiAgICAgIGlmICghand0VmFsdWUgJiYgIXJlZnJlc2hWYWx1ZSkgewogICAgICAgIGNvbnNvbGUud2FybigiTm8gdG9rZW5zIGZvdW5kIGluIGJyb3dzZXIgY29va2llcyIpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBjb25zdCBqd3RFeHBpcmVzID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMWUzKSArIDMwMDsKICAgICAgY29uc3QgcmVmcmVzaEV4cGlyZXMgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxZTMpICsgODY0MDA7CiAgICAgIGNvbnN0IGNvb2tpZXMgPSBbXTsKICAgICAgaWYgKGp3dFZhbHVlKSB7CiAgICAgICAgY29uc29sZS5sb2coIkZvdW5kIEpXVCBjb29raWUsIGFkZGluZyB0byBzdG9yYWdlIHN0YXRlIiwgand0VmFsdWUpOwogICAgICAgIGxldCBub3JtYWxpemVkVmFsdWUgPSBqd3RWYWx1ZTsKICAgICAgICBpZiAoIW5vcm1hbGl6ZWRWYWx1ZS5pbmNsdWRlcygiOiIpKSB7CiAgICAgICAgICBjb25zdCB1c2VySWRlbnRpdHkgPSB0aGlzLmdldEN1cnJlbnRVc2VyKCkgfHwgewogICAgICAgICAgICBpZDogInVzZXIxMjMiLAogICAgICAgICAgICB1c2VySWRlbnRpZmllcjogInVzZXIiCiAgICAgICAgICB9OwogICAgICAgICAgY29uc3QgaWRlbnRpdHlKc29uID0gSlNPTi5zdHJpbmdpZnkodXNlcklkZW50aXR5KTsKICAgICAgICAgIG5vcm1hbGl6ZWRWYWx1ZSA9IGAke25vcm1hbGl6ZWRWYWx1ZX06JHtpZGVudGl0eUpzb259YDsKICAgICAgICAgIGNvbnNvbGUubG9nKCJBZGRlZCBtaXNzaW5nIGlkZW50aXR5IHRvIHRva2VuOiIsIHVzZXJJZGVudGl0eSk7CiAgICAgICAgfQogICAgICAgIGlmIChub3JtYWxpemVkVmFsdWUuc3RhcnRzV2l0aCgiQmVhcmVyICIpKSB7CiAgICAgICAgICBub3JtYWxpemVkVmFsdWUgPSBub3JtYWxpemVkVmFsdWUucmVwbGFjZSgvXkJlYXJlclxzKy9pLCAiIik7CiAgICAgICAgICBjb25zb2xlLmxvZygiUmVtb3ZlZCBpbmNvcnJlY3QgQmVhcmVyIHByZWZpeCBmcm9tIGNvb2tpZSB0b2tlbiIpOwogICAgICAgIH0KICAgICAgICBjb29raWVzLnB1c2goewogICAgICAgICAgbmFtZTogInNlb24tand0IiwKICAgICAgICAgIHZhbHVlOiBub3JtYWxpemVkVmFsdWUsCiAgICAgICAgICBkb21haW46IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSwKICAgICAgICAgIHBhdGg6ICIvIiwKICAgICAgICAgIGV4cGlyZXM6IGp3dEV4cGlyZXMsCiAgICAgICAgICBodHRwT25seTogZmFsc2UsCiAgICAgICAgICBzZWN1cmU6IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gImh0dHBzOiIsCiAgICAgICAgICBzYW1lU2l0ZTogIkxheCIKICAgICAgICAgIC8vIFR5cGUgYXNzZXJ0aW9uIHRvIG1hdGNoIENvb2tpZS5zYW1lU2l0ZQogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmIChyZWZyZXNoVmFsdWUpIHsKICAgICAgICBjb25zb2xlLmxvZygiRm91bmQgcmVmcmVzaCBjb29raWUsIGFkZGluZyB0byBzdG9yYWdlIHN0YXRlIik7CiAgICAgICAgY29va2llcy5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJzZW9uLXJlZnJlc2giLAogICAgICAgICAgdmFsdWU6IHJlZnJlc2hWYWx1ZSwKICAgICAgICAgIGRvbWFpbjogd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLAogICAgICAgICAgcGF0aDogIi8iLAogICAgICAgICAgZXhwaXJlczogcmVmcmVzaEV4cGlyZXMsCiAgICAgICAgICBodHRwT25seTogZmFsc2UsCiAgICAgICAgICBzZWN1cmU6IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gImh0dHBzOiIsCiAgICAgICAgICBzYW1lU2l0ZTogIkxheCIKICAgICAgICAgIC8vIFR5cGUgYXNzZXJ0aW9uIHRvIG1hdGNoIENvb2tpZS5zYW1lU2l0ZQogICAgICAgIH0pOwogICAgICB9CiAgICAgIHRoaXMuY3VycmVudFRva2VuID0gewogICAgICAgIGNvb2tpZXMsCiAgICAgICAgb3JpZ2luczogW10KICAgICAgfTsKICAgICAgdGhpcy5zeW5jQ29va2llc1RvQnJvd3NlcigpOwogICAgICBjb25zb2xlLmxvZygiU3luY2hyb25pemVkIHRva2VuIHN0YXRlIGJhY2sgdG8gYnJvd3NlciBjb29raWVzIik7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgY29uc29sZS5lcnJvcigiRXJyb3IgcmVzdG9yaW5nIHRva2VuIGZyb20gYnJvd3NlciBjb29raWVzOiIsIGVycm9yKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KfQpleHBvcnQgY29uc3QgdG9rZW5TZXJ2aWNlID0gbmV3IFN0b3JhZ2VTdGF0ZVRva2VuU2VydmljZSgpOwoKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYkluUnZhMlZ1TFhObGNuWnBZMlV1ZEhNaVhTd2ljMjkxY21ObGMwTnZiblJsYm5RaU9sc2lMeW9nWlhOc2FXNTBMV1JwYzJGaWJHVWdRSFI1Y0dWelkzSnBjSFF0WlhOc2FXNTBMMjV2TFdWNGNHeHBZMmwwTFdGdWVTQXFMMXh1THlvcVhHNGdLaUJVYjJ0bGJpQnpaWEoyYVdObElHbHRjR3hsYldWdWRHRjBhVzl1SUdadmNpQjBhR1VnYzJGdGNHeGxJR0Z3Y0Z4dUlDb2dWR2hwY3lCcGJYQnNaVzFsYm5SeklHRWdkRzlyWlc0Z2MyVnlkbWxqWlNCMGFHRjBJRzFoZEdOb1pYTWdkR2hsSUdGa2JXbHVJR0Z3Y0NkeklIUnZhMlZ1SUhOMGNuVmpkSFZ5WlZ4dUlDb2dhVzVqYkhWa2FXNW5JR052YjJ0cFpTMWlZWE5sWkNCaGRYUm9aVzUwYVdOaGRHbHZiaUJoYm1RZ2RHOXJaVzRnY21WbWNtVnphQ0JtWldGMGRYSmxjMXh1SUNvdlhHNXBiWEJ2Y25RZ2V5QnpaWFJEYjI5cmFXVXNJR2RsZEVOdmIydHBaU0I5SUdaeWIyMGdKeTR2WTI5dmEybGxMWFYwYVd4ekoxeHVhVzF3YjNKMElHRjRhVzl6SUdaeWIyMGdKMkY0YVc5ekoxeHVYRzVqYjI1emRDQkJVRWxmVlZKTUlEMGdKMmgwZEhBNkx5OXNiMk5oYkdodmMzUTZNekF3TVNkY2JseHVMeThnVlhOcGJtY2dkSGx3WlhNZ2FXNXpkR1ZoWkNCdlppQnBiblJsY21aaFkyVnpJSE5wYm1ObElIUm9aWGtuY21VZ2JtOTBJSFZ6WldRZ2IzVjBjMmxrWlNCMGFHbHpJR1pwYkdWY2JpOHZJR1Z6YkdsdWRDMWthWE5oWW14bExXNWxlSFF0YkdsdVpTQkFkSGx3WlhOamNtbHdkQzFsYzJ4cGJuUXZibTh0Wlhod2JHbGphWFF0WVc1NVhHNTBlWEJsSUZOMGIzSmhaMlZUZEdGMFpTQTlJSHRjYmlBZ1kyOXZhMmxsY3pvZ1EyOXZhMmxsVzExY2JpQWdiM0pwWjJsdWN6b2dUM0pwWjJsdVcxMWNibjFjYmx4dWRIbHdaU0JEYjI5cmFXVWdQU0I3WEc0Z0lHNWhiV1U2SUhOMGNtbHVaMXh1SUNCMllXeDFaVG9nYzNSeWFXNW5YRzRnSUdSdmJXRnBiam9nYzNSeWFXNW5YRzRnSUhCaGRHZzZJSE4wY21sdVoxeHVJQ0JsZUhCcGNtVnpPaUJ1ZFcxaVpYSmNiaUFnYUhSMGNFOXViSGs2SUdKdmIyeGxZVzVjYmlBZ2MyVmpkWEpsT2lCaWIyOXNaV0Z1WEc0Z0lITmhiV1ZUYVhSbFB6b2dKMU4wY21samRDY2dmQ0FuVEdGNEp5QjhJQ2RPYjI1bEoxeHVmVnh1WEc1MGVYQmxJRTl5YVdkcGJpQTlJSHRjYmlBZ2IzSnBaMmx1T2lCemRISnBibWRjYmlBZ2JHOWpZV3hUZEc5eVlXZGxPaUJNYjJOaGJGTjBiM0poWjJWSmRHVnRXMTFjYm4xY2JseHVkSGx3WlNCTWIyTmhiRk4wYjNKaFoyVkpkR1Z0SUQwZ2UxeHVJQ0J1WVcxbE9pQnpkSEpwYm1kY2JpQWdkbUZzZFdVNklITjBjbWx1WjF4dWZWeHVYRzR2S2lwY2JpQXFJRlJ2YTJWdUlITmxjblpwWTJVZ2FXNTBaWEptWVdObElHUmxabWx1YVc1bklIUm9aU0JqYjI1MGNtRmpkQ0JtYjNJZ2RHOXJaVzRnYjNCbGNtRjBhVzl1YzF4dUlDb3ZYRzR2THlCVmMyVnlJR2xrWlc1MGFYUjVJR2x1ZEdWeVptRmpaVnh1Wlhod2IzSjBJR2x1ZEdWeVptRmpaU0JWYzJWeVNXUmxiblJwZEhrZ2UxeHVJQ0IxYzJWeVNXUTZJSE4wY21sdVoxeHVJQ0IxYzJWeWJtRnRaVG9nYzNSeWFXNW5YRzRnSUhWelpYSkpaR1Z1ZEdsbWFXVnlPaUJ6ZEhKcGJtZGNibjFjYmx4dVpYaHdiM0owSUdsdWRHVnlabUZqWlNCVWIydGxibE5sY25acFkyVWdlMXh1SUNCblpYUlViMnRsYmlncE9pQlRkRzl5WVdkbFUzUmhkR1ZjYmlBZ2RtRnNhV1JoZEdWQmRYUm9WMmwwYUVKaFkydGxibVFvS1RvZ1VISnZiV2x6WlR4aWIyOXNaV0Z1UGx4dUlDQXZLaXBjYmlBZ0lDb2dSWGh3YkdsamFYUnNlU0J6WlhRZ2RHaGxJSFJ2YTJWdUlITjBZWFJsWEc0Z0lDQXFJRlJvYVhNZ2FYTWdkWE5sWm5Wc0lIZG9aVzRnZDJVZ2NtVmpaV2wyWlNCMGIydGxiaUJwYm1admNtMWhkR2x2YmlCbWNtOXRJR0Z1SUVGUVNTQnlaWE53YjI1elpWeHVJQ0FnS2k5Y2JpQWdjMlYwVkc5clpXNG9kRzlyWlc0NklGTjBiM0poWjJWVGRHRjBaU2s2SUhadmFXUmNiaUFnY21WbWNtVnphRlJ2YTJWdUtDazZJRkJ5YjIxcGMyVThVM1J2Y21GblpWTjBZWFJsUGx4dUlDQnBjMVJ2YTJWdVZtRnNhV1FvZEc5clpXNDZJRk4wYjNKaFoyVlRkR0YwWlNrNklHSnZiMnhsWVc1Y2JpQWdhWE5LZDNSV1lXeHBaQ2gwYjJ0bGJqb2dVM1J2Y21GblpWTjBZWFJsS1RvZ1ltOXZiR1ZoYmx4dUlDQnBjMUpsWm5KbGMyaFViMnRsYmxaaGJHbGtLSFJ2YTJWdU9pQlRkRzl5WVdkbFUzUmhkR1VwT2lCaWIyOXNaV0Z1WEc0Z0lHZGxkRUYxZEdodmNtbDZZWFJwYjI1SVpXRmtaWElvS1RvZ2MzUnlhVzVuWEc0Z0lDOHFLbHh1SUNBZ0tpQlRlVzVqYUhKdmJtbDZaU0JqYjI5cmFXVnpJR1p5YjIwZ1UzUnZjbUZuWlZOMFlYUmxJSFJ2SUdKeWIzZHpaWElnWTI5dmEybGxjMXh1SUNBZ0tpQlVhR2x6SUdseklIVnpaV1FnZDJobGJpQnlaWE4wYjNKcGJtY2djM1JoZEdVZ1pIVnlhVzVuSUhSbGMzUWdZWFYwYjIxaGRHbHZibHh1SUNBZ0tpOWNiaUFnYzNsdVkwTnZiMnRwWlhOVWIwSnliM2R6WlhJb0tUb2dkbTlwWkZ4dUlDQXZLaXBjYmlBZ0lDb2dWWEJrWVhSbElIUnZhMlZ1SUhOMFlYUmxJR1p5YjIwZ1luSnZkM05sY2lCamIyOXJhV1Z6WEc0Z0lDQXFJRlJvYVhNZ2FYTWdkWE5sWkNCaFpuUmxjaUJoSUhObGNuWmxjaUJ6WlhSeklHTnZiMnRwWlhNZ2RtbGhJRWhVVkZBZ2FHVmhaR1Z5YzF4dUlDQWdLaTljYmlBZ2RYQmtZWFJsUm5KdmJVSnliM2R6WlhKRGIyOXJhV1Z6S0NrNklHSnZiMnhsWVc1Y2JpQWdMeW9xWEc0Z0lDQXFJRk5sZENCMGFHVWdZM1Z5Y21WdWRDQjFjMlZ5SUdsa1pXNTBhWFI1SUdsdVptOXliV0YwYVc5dVhHNGdJQ0FxTDF4dUlDQnpaWFJEZFhKeVpXNTBWWE5sY2locFpHVnVkR2wwZVRvZ1ZYTmxja2xrWlc1MGFYUjVLVG9nZG05cFpGeHVJQ0F2S2lwY2JpQWdJQ29nUjJWMElIUm9aU0JqZFhKeVpXNTBJSFZ6WlhJZ2FXUmxiblJwZEhrZ2FXNW1iM0p0WVhScGIyNWNiaUFnSUNvdlhHNGdJR2RsZEVOMWNuSmxiblJWYzJWeUtDazZJRlZ6WlhKSlpHVnVkR2wwZVNCOElHNTFiR3hjYmlBZ0x5b3FYRzRnSUNBcUlFTnNaV0Z5SUhSdmEyVnVjeUJoYm1RZ2RYTmxjaUJwYm1admNtMWhkR2x2Ymx4dUlDQWdLaTljYmlBZ1kyeGxZWEpVYjJ0bGJuTW9LVG9nZG05cFpGeHVmVnh1WEc0dktpcGNiaUFxSUZOMGIzSmhaMlVnVTNSaGRHVWdWRzlyWlc0Z1UyVnlkbWxqWlNBdElFbHRjR3hsYldWdWRITWdkR2hsSUZSdmEyVnVVMlZ5ZG1salpTQnBiblJsY21aaFkyVmNiaUFxSUhkcGRHZ2djM1Z3Y0c5eWRDQm1iM0lnVUd4aGVYZHlhV2RvZENkeklITjBiM0poWjJVZ2MzUmhkR1VnWm05eWJXRjBYRzRnS2k5Y2JtVjRjRzl5ZENCamJHRnpjeUJUZEc5eVlXZGxVM1JoZEdWVWIydGxibE5sY25acFkyVWdhVzF3YkdWdFpXNTBjeUJVYjJ0bGJsTmxjblpwWTJVZ2UxeHVJQ0J3Y21sMllYUmxJR04xY25KbGJuUlViMnRsYmpvZ1UzUnZjbUZuWlZOMFlYUmxJSHdnYm5Wc2JDQTlJRzUxYkd4Y2JpQWdjSEpwZG1GMFpTQmpkWEp5Wlc1MFZYTmxjam9nVlhObGNrbGtaVzUwYVhSNUlId2diblZzYkNBOUlHNTFiR3hjYmlBZ2NISnBkbUYwWlNCemRHOXlZV2RsVTNSaGRHVTZJRk4wYjNKaFoyVlRkR0YwWlNCOElHNTFiR3dnUFNCdWRXeHNYRzRnSUhCeWFYWmhkR1VnYkdGemRGTmxkRlJwYldVNklHNTFiV0psY2lCOElHNTFiR3dnUFNCdWRXeHNYRzVjYmlBZ0x5b3FYRzRnSUNBcUlFVjRjR3hwWTJsMGJIa2djMlYwSUhSb1pTQjBiMnRsYmlCemRHRjBaVnh1SUNBZ0tpQlVhR2x6SUdseklIVnpaV1oxYkNCM2FHVnVJSGRsSUhKbFkyVnBkbVVnZEc5clpXNGdhVzVtYjNKdFlYUnBiMjRnWm5KdmJTQmhiaUJCVUVrZ2NtVnpjRzl1YzJWY2JpQWdJQ29nZDJobGJpQjNiM0pyYVc1bklIZHBkR2dnYUhSMGNFOXViSGtnWTI5dmEybGxjeUIwYUdGMElFcGhkbUZUWTNKcGNIUWdZMkZ1SjNRZ1lXTmpaWE56SUdScGNtVmpkR3g1WEc0Z0lDQXFMMXh1SUNCelpYUlViMnRsYmloemRHRjBaVG9nVTNSdmNtRm5aVk4wWVhSbEtUb2dkbTlwWkNCN1hHNGdJQ0FnZEdocGN5NXpkRzl5WVdkbFUzUmhkR1VnUFNCemRHRjBaVnh1SUNBZ0lIUm9hWE11YkdGemRGTmxkRlJwYldVZ1BTQkVZWFJsTG01dmR5Z3BYRzVjYmlBZ0lDQXZMeUJUZEc5eVpTQnBaR1Z1ZEdsMGVTQnBiaUJzYjJOaGJGTjBiM0poWjJVZ1puSnZiU0IwYUdVZ1NsZFVJR052YjJ0cFpTQnBaaUJoZG1GcGJHRmliR1ZjYmlBZ0lDQjBjbmtnZTF4dUlDQWdJQ0FnWTI5dWMzUWdhbmQwUTI5dmEybGxJRDBnYzNSaGRHVXVZMjl2YTJsbGN5NW1hVzVrS0NoaktTQTlQaUJqTG01aGJXVWdQVDA5SUNkelpXOXVMV3AzZENjcFhHNGdJQ0FnSUNCcFppQW9hbmQwUTI5dmEybGxJQ1ltSUdwM2RFTnZiMnRwWlM1MllXeDFaUzVwYm1Oc2RXUmxjeWduT2ljcEtTQjdYRzRnSUNBZ0lDQWdJR052Ym5OMElGc3NJR2xrWlc1MGFYUjVVR0Z5ZEYwZ1BTQnFkM1JEYjI5cmFXVXVkbUZzZFdVdWMzQnNhWFFvSnpvbktWeHVJQ0FnSUNBZ0lDQnBaaUFvYVdSbGJuUnBkSGxRWVhKMEtTQjdYRzRnSUNBZ0lDQWdJQ0FnWTI5dWMzUWdhV1JsYm5ScGRIa2dQU0JLVTA5T0xuQmhjbk5sS0dsa1pXNTBhWFI1VUdGeWRDbGNiaUFnSUNBZ0lDQWdJQ0JzYjJOaGJGTjBiM0poWjJVdWMyVjBTWFJsYlNnbmMyVnZiaTExYzJWeUxXbGtaVzUwYVhSNUp5d2dTbE5QVGk1emRISnBibWRwWm5rb2FXUmxiblJwZEhrcEtWeHVJQ0FnSUNBZ0lDQWdJR052Ym5OdmJHVXViRzluS0Z4dUlDQWdJQ0FnSUNBZ0lDQWdKMGxrWlc1MGFYUjVJR1Y0ZEhKaFkzUmxaQ0JtY205dElIUnZhMlZ1SUdGdVpDQnpZWFpsWkNCMGJ5QnNiMk5oYkZOMGIzSmhaMlU2Snl4Y2JpQWdJQ0FnSUNBZ0lDQWdJR2xrWlc1MGFYUjVYRzRnSUNBZ0lDQWdJQ0FnS1Z4dUlDQWdJQ0FnSUNBZ0lIUm9hWE11YzJWMFEzVnljbVZ1ZEZWelpYSW9hV1JsYm5ScGRIa3BYRzRnSUNBZ0lDQWdJSDFjYmlBZ0lDQWdJSDFjYmlBZ0lDQjlJR05oZEdOb0lDaGxLU0I3WEc0Z0lDQWdJQ0JqYjI1emIyeGxMbmRoY200b0owWmhhV3hsWkNCMGJ5QmxlSFJ5WVdOMElHbGtaVzUwYVhSNUlHWnliMjBnZEc5clpXNDZKeXdnWlNsY2JpQWdJQ0I5WEc1Y2JpQWdJQ0IwYUdsekxuTjVibU5EYjI5cmFXVnpWRzlDY205M2MyVnlLQ2xjYmlBZ2ZWeHVYRzRnSUdOdmJuTjBjblZqZEc5eUtDa2dlMXh1SUNBZ0lDOHZJRU5vWldOcklHbG1JSEoxYm01cGJtY2dhVzRnWVNCUWJHRjVkM0pwWjJoMElIUmxjM1FnWTI5dWRHVjRkQ0IzYVhSb0lHRnVJR2x1YW1WamRHVmtJSFJ2YTJWdVhHNGdJQ0FnYVdZZ0tIUjVjR1Z2WmlCM2FXNWtiM2NnSVQwOUlDZDFibVJsWm1sdVpXUW5JQ1ltSUNoM2FXNWtiM2NnWVhNZ1lXNTVLUzVoZFhSb1ZHOXJaVzRwSUh0Y2JpQWdJQ0FnSUhSeWVTQjdYRzRnSUNBZ0lDQWdJR052Ym5OMElHRjFkR2hVYjJ0bGJpQTlJQ2gzYVc1a2IzY2dZWE1nWVc1NUtTNWhkWFJvVkc5clpXNWNiaUFnSUNBZ0lDQWdkR2hwY3k1amRYSnlaVzUwVkc5clpXNGdQVnh1SUNBZ0lDQWdJQ0FnSUhSNWNHVnZaaUJoZFhSb1ZHOXJaVzRnUFQwOUlDZHpkSEpwYm1jbklEOGdTbE5QVGk1d1lYSnpaU2hoZFhSb1ZHOXJaVzRwSURvZ1lYVjBhRlJ2YTJWdVhHNWNiaUFnSUNBZ0lDQWdMeThnU1dZZ2QyVWdhR0YyWlNCaElIUnZhMlZ1SUdaeWIyMGdkR1Z6ZENCamIyNTBaWGgwTENCemVXNWpJR2wwSUhSdklHSnliM2R6WlhJZ1kyOXZhMmxsYzF4dUlDQWdJQ0FnSUNCcFppQW9kR2hwY3k1amRYSnlaVzUwVkc5clpXNHBJSHRjYmlBZ0lDQWdJQ0FnSUNCMGFHbHpMbk41Ym1ORGIyOXJhV1Z6Vkc5Q2NtOTNjMlZ5S0NsY2JpQWdJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ2ZTQmpZWFJqYUNBb1pTa2dlMXh1SUNBZ0lDQWdJQ0JqYjI1emIyeGxMbVZ5Y205eUtDZEdZV2xzWldRZ2RHOGdjR0Z5YzJVZ2FXNXFaV04wWldRZ1lYVjBhQ0IwYjJ0bGJpY3NJR1VwWEc0Z0lDQWdJQ0I5WEc0Z0lDQWdmU0JsYkhObElIdGNiaUFnSUNBZ0lDOHZJRlJ5ZVNCMGJ5QnlaWE4wYjNKbElIUnZhMlZ1SUdaeWIyMGdZbkp2ZDNObGNpQmpiMjlyYVdWelhHNGdJQ0FnSUNCMGFHbHpMbkpsYzNSdmNtVkdjbTl0UW5KdmQzTmxja052YjJ0cFpYTW9LVnh1SUNBZ0lIMWNiaUFnZlZ4dVhHNGdJQzhxS2x4dUlDQWdLaUJIWlhRZ2RHaGxJR04xY25KbGJuUWdkRzlyWlc0c0lISmxabkpsYzJocGJtY2dhV1lnYm1WbFpHVmtYRzRnSUNBcUlFbG1JSFJvWlNCS1YxUWdhWE1nWlhod2FYSmxaQ0JpZFhRZ2NtVm1jbVZ6YUNCMGIydGxiaUJwY3lCMllXeHBaQ3dnYVhRZ2QybHNiQ0JoZFhSdmJXRjBhV05oYkd4NUlISmxibVYzWEc0Z0lDQXFMMXh1SUNCblpYUlViMnRsYmlncE9pQlRkRzl5WVdkbFUzUmhkR1VnZTF4dUlDQWdJR2xtSUNnaGRHaHBjeTVqZFhKeVpXNTBWRzlyWlc0cElIdGNiaUFnSUNBZ0lHTnZibk52YkdVdWQyRnliaWduVG04Z2RHOXJaVzRnWVhaaGFXeGhZbXhsSUMwZ2QybHNiQ0J1WldWa0lHRjFkR2hsYm5ScFkyRjBhVzl1SnlsY2JpQWdJQ0FnSUM4dklFcDFjM1FnY21WMGRYSnVJR0Z1SUdWdGNIUjVJSFJ2YTJWdUlITjBjblZqZEhWeVpTQXRJSFJvWlNCQlVFa2dZMkZzYkNCM2FXeHNJR1poYVd3Z1luVjBJSFJvYVhNZ2FYTWdaWGh3WldOMFpXUmNiaUFnSUNBZ0lDOHZJR1p2Y2lCcGJtbDBhV0ZzSUdGMWRHaGxiblJwWTJGMGFXOXVJR1pzYjNkelhHNGdJQ0FnSUNCeVpYUjFjbTRnZXlCamIyOXJhV1Z6T2lCYlhTd2diM0pwWjJsdWN6b2dXMTBnZlZ4dUlDQWdJSDFjYmx4dUlDQWdJSFJ5ZVNCN1hHNGdJQ0FnSUNBdkx5QkRhR1ZqYXlCcFppQktWMVFnYVhNZ2RtRnNhV1FnTFNCcFppQnpieXdnY21WMGRYSnVJR04xY25KbGJuUWdkRzlyWlc1Y2JpQWdJQ0FnSUdsbUlDaDBhR2x6TG1selNuZDBWbUZzYVdRb2RHaHBjeTVqZFhKeVpXNTBWRzlyWlc0cEtTQjdYRzRnSUNBZ0lDQWdJSEpsZEhWeWJpQjBhR2x6TG1OMWNuSmxiblJVYjJ0bGJseHVJQ0FnSUNBZ2ZWeHVYRzRnSUNBZ0lDQXZMeUJLVjFRZ2FYTWdaWGh3YVhKbFpDd2dZMmhsWTJzZ2FXWWdjbVZtY21WemFDQjBiMnRsYmlCcGN5QjJZV3hwWkZ4dUlDQWdJQ0FnYVdZZ0tIUm9hWE11YVhOU1pXWnlaWE5vVkc5clpXNVdZV3hwWkNoMGFHbHpMbU4xY25KbGJuUlViMnRsYmlrcElIdGNiaUFnSUNBZ0lDQWdMeThnU2xkVUlHbHpJR1Y0Y0dseVpXUWdZblYwSUhKbFpuSmxjMmdnZEc5clpXNGdhWE1nZG1Gc2FXUWdMU0IwY21sbloyVnlJSEpsYm1WM1lXeGNiaUFnSUNBZ0lDQWdZMjl1YzI5c1pTNXNiMmNvSjBwWFZDQmxlSEJwY21Wa0lHSjFkQ0J5WldaeVpYTm9JSFJ2YTJWdUlIWmhiR2xrSUMwZ2NtVm1jbVZ6YUdsdVp5NHVMaWNwWEc0Z0lDQWdJQ0FnSUM4dklGTjBZWEowSUhSb1pTQnlaV1p5WlhOb0lIQnliMk5sYzNNZ1luVjBJR1J2YmlkMElIZGhhWFFnWm05eUlHbDBYRzRnSUNBZ0lDQWdJQzh2SUZSb2FYTWdiV0ZwYm5SaGFXNXpJSFJvWlNCemVXNWphSEp2Ym05MWN5QkJVRWtnZDJocGJHVWdjM1JwYkd3Z1lXeHNiM2RwYm1jZ2NtVm1jbVZ6YUZ4dUlDQWdJQ0FnSUNCMmIybGtJSFJvYVhNdWNtVm1jbVZ6YUZSdmEyVnVLQ2tnTHk4Z1ZYTnBibWNnZG05cFpDQjBieUJsZUhCc2FXTnBkR3g1SUdsbmJtOXlaU0IwYUdVZ1VISnZiV2x6WlZ4dUlDQWdJQ0FnZlNCbGJITmxJSHRjYmlBZ0lDQWdJQ0FnWTI5dWMyOXNaUzUzWVhKdUtDZENiM1JvSUVwWFZDQmhibVFnY21WbWNtVnphQ0IwYjJ0bGJpQmhjbVVnWlhod2FYSmxaQ0J2Y2lCcGJuWmhiR2xrSnlsY2JpQWdJQ0FnSUgxY2JpQWdJQ0I5SUdOaGRHTm9JQ2hsY25KdmNpa2dlMXh1SUNBZ0lDQWdZMjl1YzI5c1pTNWxjbkp2Y2lnblJYSnliM0lnYVc0Z1oyVjBWRzlyWlc0Nkp5d2daWEp5YjNJcFhHNGdJQ0FnZlZ4dVhHNGdJQ0FnTHk4Z1VtVjBkWEp1SUhSb1pTQmpkWEp5Wlc1MElIUnZhMlZ1SUhOMFlYUmxJQ2hsZG1WdUlHbG1JR2x1ZG1Gc2FXUXBYRzRnSUNBZ0x5OGdWR2hsSUVGUVNTQnlaWEYxWlhOMElIZHBiR3dnWm1GcGJDQjNhWFJvSURRd01TQjNhR2xqYUNCM2FXeHNJSFJ5YVdkblpYSWdjSEp2Y0dWeUlHRjFkR2hjYmlBZ0lDQnlaWFIxY200Z2RHaHBjeTVqZFhKeVpXNTBWRzlyWlc1Y2JpQWdmVnh1WEc0Z0lDOHZJRlJ5WVdOcklHbHVMV1pzYVdkb2RDQnlaV1p5WlhOb0lHOXdaWEpoZEdsdmJuTWdkRzhnY0hKbGRtVnVkQ0JrZFhCc2FXTmhkR1VnY21WbWNtVnphR1Z6WEc0Z0lIQnlhWFpoZEdVZ2NtVm1jbVZ6YUVsdVVISnZaM0psYzNNNklGQnliMjFwYzJVOFUzUnZjbUZuWlZOMFlYUmxQaUI4SUc1MWJHd2dQU0J1ZFd4c1hHNWNiaUFnTHlvcVhHNGdJQ0FxSUZKbFpuSmxjMmdnZEdobElIUnZhMlZ1SUdKNUlHTmhiR3hwYm1jZ2RHaGxJSEpsYm1WM1lXd2daVzVrY0c5cGJuUmNiaUFnSUNvZ1ZYTmxjeUIwYUdVZ2NtVm1jbVZ6YUNCMGIydGxiaUIwYnlCblpYUWdZU0J1WlhjZ1NsZFVJSFJ2YTJWdVhHNGdJQ0FxSUZCeVpYWmxiblJ6SUcxMWJIUnBjR3hsSUhOcGJYVnNkR0Z1Wlc5MWN5QnlaV1p5WlhOb0lISmxjWFZsYzNSeklHSjVJSFJ5WVdOcmFXNW5JR2x1TFdac2FXZG9kQ0J2Y0dWeVlYUnBiMjV6WEc0Z0lDQXFMMXh1SUNCaGMzbHVZeUJ5WldaeVpYTm9WRzlyWlc0b0tUb2dVSEp2YldselpUeFRkRzl5WVdkbFUzUmhkR1UrSUh0Y2JpQWdJQ0F2THlCSlppQmhJSEpsWm5KbGMyZ2dhWE1nWVd4eVpXRmtlU0JwYmlCd2NtOW5jbVZ6Y3l3Z2NtVjBkWEp1SUhSb1lYUWdjSEp2YldselpTQjBieUJoZG05cFpDQmtkWEJzYVdOaGRHVWdjbVZ4ZFdWemRITmNiaUFnSUNCcFppQW9kR2hwY3k1eVpXWnlaWE5vU1c1UWNtOW5jbVZ6Y3lrZ2UxeHVJQ0FnSUNBZ1kyOXVjMjlzWlM1c2IyY29KMUpsZFhOcGJtY2dhVzR0Y0hKdlozSmxjM01nZEc5clpXNGdjbVZtY21WemFDQnlaWEYxWlhOMEp5bGNiaUFnSUNBZ0lISmxkSFZ5YmlCMGFHbHpMbkpsWm5KbGMyaEpibEJ5YjJkeVpYTnpYRzRnSUNBZ2ZWeHVYRzRnSUNBZ0x5OGdVM1JoY25RZ1lTQnVaWGNnY21WbWNtVnphQ0J2Y0dWeVlYUnBiMjRnWVc1a0lIUnlZV05ySUdsMFhHNGdJQ0FnZEdocGN5NXlaV1p5WlhOb1NXNVFjbTluY21WemN5QTlJSFJvYVhNdVpYaGxZM1YwWlZKbFpuSmxjMmdvS1Z4dVhHNGdJQ0FnZEhKNUlIdGNiaUFnSUNBZ0lDOHZJRmRoYVhRZ1ptOXlJSFJvWlNCeVpXWnlaWE5vSUhSdklHTnZiWEJzWlhSbFhHNGdJQ0FnSUNCeVpYUjFjbTRnWVhkaGFYUWdkR2hwY3k1eVpXWnlaWE5vU1c1UWNtOW5jbVZ6YzF4dUlDQWdJSDBnWm1sdVlXeHNlU0I3WEc0Z0lDQWdJQ0F2THlCRGJHVmhjaUIwYUdVZ2RISmhZMnRwYm1jZ2NISnZiV2x6WlNCM2FHVnVJR1J2Ym1VZ0tISmxaMkZ5Wkd4bGMzTWdiMllnYzNWalkyVnpjeUJ2Y2lCbVlXbHNkWEpsS1Z4dUlDQWdJQ0FnZEdocGN5NXlaV1p5WlhOb1NXNVFjbTluY21WemN5QTlJRzUxYkd4Y2JpQWdJQ0I5WEc0Z0lIMWNibHh1SUNBdktpcGNiaUFnSUNvZ1NXNTBaWEp1WVd3Z2JXVjBhRzlrSUhSb1lYUWdjR1Z5Wm05eWJYTWdkR2hsSUdGamRIVmhiQ0IwYjJ0bGJpQnlaV1p5WlhOb0lHOXdaWEpoZEdsdmJseHVJQ0FnS2lCRmVIUnlZV04wWldRZ2RHOGdiV0ZyWlNCMGNtRmphMmx1WnlCMGFHVWdhVzR0Wm14cFoyaDBJSEJ5YjIxcGMyVWdZMnhsWVc1bGNseHVJQ0FnS2k5Y2JpQWdjSEpwZG1GMFpTQmhjM2x1WXlCbGVHVmpkWFJsVW1WbWNtVnphQ2dwT2lCUWNtOXRhWE5sUEZOMGIzSmhaMlZUZEdGMFpUNGdlMXh1SUNBZ0lIUnllU0I3WEc0Z0lDQWdJQ0F2THlCRGFHVmpheUJwWmlCM1pTQm9ZWFpsSUdFZ2NtVm1jbVZ6YUNCMGIydGxiaUJpWldadmNtVWdZWFIwWlcxd2RHbHVaeUJ5Wlc1bGQyRnNYRzRnSUNBZ0lDQnBaaUFvSVhSb2FYTXVZM1Z5Y21WdWRGUnZhMlZ1SUh4OElDRjBhR2x6TG1selVtVm1jbVZ6YUZSdmEyVnVWbUZzYVdRb2RHaHBjeTVqZFhKeVpXNTBWRzlyWlc0cEtTQjdYRzRnSUNBZ0lDQWdJR052Ym5OdmJHVXVkMkZ5YmlnblRtOGdkbUZzYVdRZ2NtVm1jbVZ6YUNCMGIydGxiaUJoZG1GcGJHRmliR1VnTFNCallXNXViM1FnY21WdVpYY25LVnh1SUNBZ0lDQWdJQ0J5WlhSMWNtNGdkR2hwY3k1amRYSnlaVzUwVkc5clpXNGdmSHdnZXlCamIyOXJhV1Z6T2lCYlhTd2diM0pwWjJsdWN6b2dXMTBnZlZ4dUlDQWdJQ0FnZlZ4dVhHNGdJQ0FnSUNCamIyNXpiMnhsTG14dlp5Z25RWFIwWlcxd2RHbHVaeUIwYnlCeVpXWnlaWE5vSUhSdmEyVnVJSGRwZEdnZ0wyRjFkR2d2Y21WdVpYY2daVzVrY0c5cGJuUW5LVnh1SUNBZ0lDQWdZMjl1YzI5c1pTNXNiMmNvSjBOMWNuSmxiblFnWTI5dmEybGxjeUJpWldadmNtVWdjbVZtY21WemFEb25MQ0JrYjJOMWJXVnVkQzVqYjI5cmFXVXBYRzVjYmlBZ0lDQWdJQzh2SUVOaGJHd2dkR2hsSUhKbGJtVjNZV3dnWlc1a2NHOXBiblJjYmlBZ0lDQWdJR052Ym5OMElISmxjM0J2Ym5ObElEMGdZWGRoYVhRZ1lYaHBiM011Y0c5emRDaGNiaUFnSUNBZ0lDQWdZQ1I3UVZCSlgxVlNUSDB2WVhWMGFDOXlaVzVsZDJBc1hHNGdJQ0FnSUNBZ0lIdDlMRnh1SUNBZ0lDQWdJQ0I3SUhkcGRHaERjbVZrWlc1MGFXRnNjem9nZEhKMVpTQjlJQzh2SUVWdWMzVnlaWE1nWTI5dmEybGxjeUJoY21VZ2MyVnVkRnh1SUNBZ0lDQWdLVnh1WEc0Z0lDQWdJQ0JwWmlBb2NtVnpjRzl1YzJVdWMzUmhkSFZ6SUNFOVBTQXlNREFwSUh0Y2JpQWdJQ0FnSUNBZ2RHaHliM2NnYm1WM0lFVnljbTl5S0dCVWIydGxiaUJ5WldaeVpYTm9JR1poYVd4bFpDQjNhWFJvSUhOMFlYUjFjem9nSkh0eVpYTndiMjV6WlM1emRHRjBkWE45WUNsY2JpQWdJQ0FnSUgxY2JseHVJQ0FnSUNBZ1kyOXVjMjlzWlM1c2IyY29KMVJ2YTJWdUlISmxabkpsYzJnZ2MzVmpZMlZ6YzJaMWJDQXRJSFZ3WkdGMGFXNW5JSE4wYjNKaFoyVWdjM1JoZEdVbktWeHVJQ0FnSUNBZ1kyOXVjMjlzWlM1c2IyY29KMUpsYzNCdmJuTmxJR2hsWVdSbGNuTTZKeXdnY21WemNHOXVjMlV1YUdWaFpHVnljeWxjYmlBZ0lDQWdJR052Ym5OdmJHVXViRzluS0NkRGIyOXJhV1Z6SUdGbWRHVnlJSEpsWm5KbGMyZ2djbVZ6Y0c5dWMyVTZKeXdnWkc5amRXMWxiblF1WTI5dmEybGxLVnh1WEc0Z0lDQWdJQ0F2THlCVWFHVWdjMlZ5ZG1WeUlITmxkSE1nZEdobElHTnZiMnRwWlhNZ2RtbGhJRk5sZEMxRGIyOXJhV1VnYUdWaFpHVnljMXh1SUNBZ0lDQWdMeThnVjJVZ2JtVmxaQ0IwYnlCdFlXNTFZV3hzZVNCMWNHUmhkR1VnYjNWeUlITjBiM0poWjJVZ2MzUmhkR1VnZEc4Z2NtVm1iR1ZqZENCMGFHVnpaU0JqYUdGdVoyVnpYRzVjYmlBZ0lDQWdJQzh2SUZkaGFYUWdZU0JpYVhRZ2JHOXVaMlZ5SUdadmNpQmpiMjlyYVdWeklIUnZJR0psSUhCeWIzQmxjbXg1SUhObGRDQmllU0JpY205M2MyVnlYRzRnSUNBZ0lDQmhkMkZwZENCdVpYY2dVSEp2YldselpTZ29jbVZ6YjJ4MlpTa2dQVDRnYzJWMFZHbHRaVzkxZENoeVpYTnZiSFpsTENBek1EQXBLVnh1WEc0Z0lDQWdJQ0F2THlCTWIyY2dZMjl2YTJsbGN5QmhaMkZwYmlCaFpuUmxjaUIzWVdsMFhHNGdJQ0FnSUNCamIyNXpiMnhsTG14dlp5Z25RMjl2YTJsbGN5QmhablJsY2lCM1lXbDBhVzVuSUhCbGNtbHZaRG9uTENCa2IyTjFiV1Z1ZEM1amIyOXJhV1VwWEc1Y2JpQWdJQ0FnSUM4dklFTmhjSFIxY21VZ2RHaGxJR04xY25KbGJuUWdZMjl2YTJsbGN5Qm1jbTl0SUhSb1pTQmljbTkzYzJWeVhHNGdJQ0FnSUNCamIyNXpkQ0J5WlhOMGIzSmxaQ0E5SUhSb2FYTXVjbVZ6ZEc5eVpVWnliMjFDY205M2MyVnlRMjl2YTJsbGN5Z3BYRzVjYmlBZ0lDQWdJR2xtSUNnaGNtVnpkRzl5WldRcElIdGNiaUFnSUNBZ0lDQWdZMjl1YzI5c1pTNTNZWEp1S0NkR1lXbHNaV1FnZEc4Z2NtVnpkRzl5WlNCamIyOXJhV1Z6SUdGbWRHVnlJSFJ2YTJWdUlISmxabkpsYzJnbktWeHVJQ0FnSUNBZ0lDQXZMeUJVY25rZ2IyNWxJRzF2Y21VZ2RHbHRaU0IzYVhSb0lHRWdaR1ZzWVhsY2JpQWdJQ0FnSUNBZ1lYZGhhWFFnYm1WM0lGQnliMjFwYzJVb0tISmxjMjlzZG1VcElEMCtJSE5sZEZScGJXVnZkWFFvY21WemIyeDJaU3dnTlRBd0tTbGNiaUFnSUNBZ0lDQWdZMjl1YzNRZ2MyVmpiMjVrUVhSMFpXMXdkQ0E5SUhSb2FYTXVjbVZ6ZEc5eVpVWnliMjFDY205M2MyVnlRMjl2YTJsbGN5Z3BYRzRnSUNBZ0lDQWdJR2xtSUNoelpXTnZibVJCZEhSbGJYQjBLU0I3WEc0Z0lDQWdJQ0FnSUNBZ1kyOXVjMjlzWlM1c2IyY29KMU4xWTJObGMzTm1kV3hzZVNCeVpYTjBiM0psWkNCamIyOXJhV1Z6SUc5dUlITmxZMjl1WkNCaGRIUmxiWEIwSnlsY2JpQWdJQ0FnSUNBZ2ZTQmxiSE5sSUh0Y2JpQWdJQ0FnSUNBZ0lDQmpiMjV6YjJ4bExtVnljbTl5S0NkQmJHd2dZWFIwWlcxd2RITWdkRzhnY21WemRHOXlaU0JqYjI5cmFXVnpJR1poYVd4bFpDY3BYRzRnSUNBZ0lDQWdJSDFjYmlBZ0lDQWdJSDBnWld4elpTQjdYRzRnSUNBZ0lDQWdJR052Ym5OdmJHVXViRzluS0NkVGRXTmpaWE56Wm5Wc2JIa2djbVZ6ZEc5eVpXUWdZMjl2YTJsbGN5QmhablJsY2lCeVpXWnlaWE5vSnlsY2JpQWdJQ0FnSUgxY2JseHVJQ0FnSUNBZ2FXWWdLQ0YwYUdsekxtTjFjbkpsYm5SVWIydGxiaWtnZTF4dUlDQWdJQ0FnSUNBdkx5QlRZV1psZEhrZ1kyaGxZMnNnYVc0Z1kyRnpaU0J5WlhOMGIzSmxSbkp2YlVKeWIzZHpaWEpEYjI5cmFXVnpJR1JwWkc0bmRDQnpaWFFnZEdobElIUnZhMlZ1WEc0Z0lDQWdJQ0FnSUhSb2FYTXVZM1Z5Y21WdWRGUnZhMlZ1SUQwZ2V5QmpiMjlyYVdWek9pQmJYU3dnYjNKcFoybHVjem9nVzEwZ2ZWeHVJQ0FnSUNBZ2ZWeHVYRzRnSUNBZ0lDQnlaWFIxY200Z2RHaHBjeTVqZFhKeVpXNTBWRzlyWlc1Y2JpQWdJQ0I5SUdOaGRHTm9JQ2hsY25KdmNpa2dlMXh1SUNBZ0lDQWdZMjl1YzI5c1pTNWxjbkp2Y2lnblJtRnBiR1ZrSUhSdklISmxabkpsYzJnZ2RHOXJaVzQ2Snl3Z1pYSnliM0lwWEc1Y2JpQWdJQ0FnSUM4dklFbG1JSEpsWm5KbGMyZ2dabUZwYkhNc0lHTnlaV0YwWlNCaElHMXBibWx0WVd3Z2RHOXJaVzRnYzNSeWRXTjBkWEpsWEc0Z0lDQWdJQ0F2THlCVWFHbHpJR1Z1YzNWeVpYTWdkR2hsSUdGd2NDQmtiMlZ6YmlkMElHTnlZWE5vTENCaWRYUWdZWFYwYUdWdWRHbGpZWFJwYjI0Z2QybHNiQ0JzYVd0bGJIa2dabUZwYkZ4dUlDQWdJQ0FnZEdocGN5NWpkWEp5Wlc1MFZHOXJaVzRnUFNCMGFHbHpMbU4xY25KbGJuUlViMnRsYmlCOGZDQjdJR052YjJ0cFpYTTZJRnRkTENCdmNtbG5hVzV6T2lCYlhTQjlYRzRnSUNBZ0lDQnlaWFIxY200Z2RHaHBjeTVqZFhKeVpXNTBWRzlyWlc1Y2JpQWdJQ0I5WEc0Z0lIMWNibHh1SUNBdktpcGNiaUFnSUNvZ1EyaGxZMnNnYVdZZ2RHaGxJSFJ2YTJWdUlHbHpJSE4wYVd4c0lIWmhiR2xrWEc0Z0lDQXFJRUVnZEc5clpXNGdhWE1nZG1Gc2FXUWdhV1lnWldsMGFHVnlPbHh1SUNBZ0tpQXhMaUJVYUdVZ1NsZFVJR2x6SUhaaGJHbGtMQ0J2Y2x4dUlDQWdLaUF5TGlCVWFHVWdTbGRVSUdseklHVjRjR2x5WldRZ1luVjBJSFJvWlNCeVpXWnlaWE5vSUhSdmEyVnVJR2x6SUhaaGJHbGtYRzRnSUNBcUwxeHVJQ0JwYzFSdmEyVnVWbUZzYVdRb2RHOXJaVzQ2SUZOMGIzSmhaMlZUZEdGMFpTazZJR0p2YjJ4bFlXNGdlMXh1SUNBZ0lISmxkSFZ5YmlCMGFHbHpMbWx6U25kMFZtRnNhV1FvZEc5clpXNHBJSHg4SUhSb2FYTXVhWE5TWldaeVpYTm9WRzlyWlc1V1lXeHBaQ2gwYjJ0bGJpbGNiaUFnZlZ4dVhHNGdJQzhxS2x4dUlDQWdLaUJEYUdWamF5QnBaaUIwYUdVZ1NsZFVJSFJ2YTJWdUlHbHpJSFpoYkdsa1hHNGdJQ0FxTDF4dUlDQXZLaXBjYmlBZ0lDb2dRMmhsWTJzZ2FXWWdkR2hsSUVwWFZDQjBiMnRsYmlCcGN5QnpkR2xzYkNCMllXeHBaQzVjYmlBZ0lDb2dRWE56ZFcxbGN5QmpiMjlyYVdVdWRtRnNkV1VnYVhNZ1ZWSk1MV1Z1WTI5a1pXUWdZVzVrSUdadmJHeHZkM002WEc0Z0lDQXFJQ0FnWENKQ1pXRnlaWElnUEVsVFR5MDROakF4TFhScGJXVnpkR0Z0Y0Q0NlBFcFRUMDR0YVdSbGJuUnBkSGsrWENKY2JpQWdJQ292WEc0Z0lHbHpTbmQwVm1Gc2FXUW9kRzlyWlc0NklGTjBiM0poWjJWVGRHRjBaU2s2SUdKdmIyeGxZVzRnZTF4dUlDQWdJQzh2SURFcElFSmhjMmxqSUhOaGJtbDBlU0JqYUdWamEzTmNiaUFnSUNCcFppQW9JWFJ2YTJWdVB5NWpiMjlyYVdWeklIeDhJQ0ZCY25KaGVTNXBjMEZ5Y21GNUtIUnZhMlZ1TG1OdmIydHBaWE1wS1NCN1hHNGdJQ0FnSUNCeVpYUjFjbTRnWm1Gc2MyVmNiaUFnSUNCOVhHNWNiaUFnSUNCamIyNXpkQ0JqYjI5cmFXVWdQU0IwYjJ0bGJpNWpiMjlyYVdWekxtWnBibVFvS0dNcElEMCtJR011Ym1GdFpTQTlQVDBnSjNObGIyNHRhbmQwSnlsY2JpQWdJQ0JwWmlBb0lXTnZiMnRwWlNrZ2UxeHVJQ0FnSUNBZ2NtVjBkWEp1SUdaaGJITmxYRzRnSUNBZ2ZWeHVYRzRnSUNBZ0x5OGdNaWtnUTJobFkyc2dkR2hsSUdOdmIydHBaU2R6SUdWNGNHbHllU0FvVlc1cGVDQnpaV052Ym1SektWeHVJQ0FnSUdOdmJuTjBJRzV2ZDFObFl5QTlJRTFoZEdndVpteHZiM0lvUkdGMFpTNXViM2NvS1NBdklERXdNREFwWEc0Z0lDQWdhV1lnS0dOdmIydHBaUzVsZUhCcGNtVnpJRHdnYm05M1UyVmpLU0I3WEc0Z0lDQWdJQ0J5WlhSMWNtNGdabUZzYzJWY2JpQWdJQ0I5WEc1Y2JpQWdJQ0F2THlBektTQkVaV052WkdVZ2RHaGxJRlZTVEMxbGJtTnZaR1ZrSUhaaGJIVmxYRzRnSUNBZ2JHVjBJR1JsWTI5a1pXUTZJSE4wY21sdVoxeHVJQ0FnSUhSeWVTQjdYRzRnSUNBZ0lDQmtaV052WkdWa0lEMGdaR1ZqYjJSbFZWSkpRMjl0Y0c5dVpXNTBLR052YjJ0cFpTNTJZV3gxWlNsY2JpQWdJQ0I5SUdOaGRHTm9JSHRjYmlBZ0lDQWdJSEpsZEhWeWJpQm1ZV3h6WlZ4dUlDQWdJSDFjYmx4dUlDQWdJQzh2SURRcElGTjBjbWx3SUdGdWVTQmNJa0psWVhKbGNpQmNJaUJ3Y21WbWFYaGNiaUFnSUNCcFppQW9aR1ZqYjJSbFpDNTBiMHh2ZDJWeVEyRnpaU2dwTG5OMFlYSjBjMWRwZEdnb0oySmxZWEpsY2lBbktTa2dlMXh1SUNBZ0lDQWdaR1ZqYjJSbFpDQTlJR1JsWTI5a1pXUXVjMnhwWTJVb055bGNiaUFnSUNCOVhHNWNiaUFnSUNBdkx5QTFLU0JUY0d4cGRDQnZabVlnZEdobElFcFRUMDRnYVdSbGJuUnBkSGtnWW5rZ2JHOXZhMmx1WnlCbWIzSWdkR2hsSUdacGNuTjBJQ2M2ZTF4dUlDQWdJQzh2SUNBZ0lDaDBhVzFsYzNSaGJYQWdhWFJ6Wld4bUlHTmhiaUJqYjI1MFlXbHVJR052Ykc5dWN5d2djMjhnYVc1a1pYaFBaaWduT2ljcElHbHpJSFJ2YnlCdVlXbDJaU2xjYmlBZ0lDQmpiMjV6ZENCelpYQkpibVJsZUNBOUlHUmxZMjlrWldRdWFXNWtaWGhQWmlnbk9uc25LVnh1SUNBZ0lHTnZibk4wSUhScGJXVnpkR0Z0Y0ZCaGNuUWdQU0J6WlhCSmJtUmxlQ0ErSURBZ1B5QmtaV052WkdWa0xuTnNhV05sS0RBc0lITmxjRWx1WkdWNEtTQTZJR1JsWTI5a1pXUmNibHh1SUNBZ0lDOHZJRFlwSUZCaGNuTmxJSFJvWlNCMGFXMWxjM1JoYlhBZ2NHOXlkR2x2Ymx4dUlDQWdJR052Ym5OMElIUnpJRDBnYm1WM0lFUmhkR1VvZEdsdFpYTjBZVzF3VUdGeWRDbGNiaUFnSUNCcFppQW9hWE5PWVU0b2RITXVaMlYwVkdsdFpTZ3BLU2tnZTF4dUlDQWdJQ0FnY21WMGRYSnVJR1poYkhObFhHNGdJQ0FnZlZ4dVhHNGdJQ0FnTHk4Z055a2dRMmhsWTJzZ1lXZGxJR0ZuWVdsdWMzUWdZU0IyWVd4cFpHbDBlU0IzYVc1a2IzY2dLREkwSUdodmRYSnpJR1p2Y2lCellXMXdiR1VnWVhCd0tWeHVJQ0FnSUdOdmJuTjBJR0ZuWlZObFkyOXVaSE1nUFNBb1JHRjBaUzV1YjNjb0tTQXRJSFJ6TG1kbGRGUnBiV1VvS1NrZ0x5QXhNREF3WEc0Z0lDQWdZMjl1YzNRZ1ZrRk1TVVJmVjBsT1JFOVhJRDBnT0RZME1EQWdMeThnTWpRZ2FHOTFjbk1nYVc0Z2MyVmpiMjVrYzF4dUlDQWdJSEpsZEhWeWJpQmhaMlZUWldOdmJtUnpJRDQ5SURBZ0ppWWdZV2RsVTJWamIyNWtjeUE4SUZaQlRFbEVYMWRKVGtSUFYxeHVJQ0I5WEc1Y2JpQWdMeW9xWEc0Z0lDQXFJRlpoYkdsa1lYUmxJR0VnZEc5clpXNGdkR2x0WlhOMFlXMXdYRzRnSUNBcUlFQndZWEpoYlNCMGIydGxia052Ym5SbGJuUWdWR2hsSUhSdmEyVnVJR052Ym5SbGJuUWdkRzhnZG1Gc2FXUmhkR1ZjYmlBZ0lDb2dRSEpsZEhWeWJuTWdZbTl2YkdWaGJpQnBibVJwWTJGMGFXNW5JR2xtSUhSb1pTQjBiMnRsYmlCMGFXMWxjM1JoYlhBZ2FYTWdkbUZzYVdSY2JpQWdJQ292WEc0Z0lIQnlhWFpoZEdVZ2RtRnNhV1JoZEdWVWIydGxibFJwYldWemRHRnRjQ2gwYjJ0bGJrTnZiblJsYm5RNklITjBjbWx1WnlrNklHSnZiMnhsWVc0Z2UxeHVJQ0FnSUhSeWVTQjdYRzRnSUNBZ0lDQXZMeUJGZUhSeVlXTjBJSFJwYldWemRHRnRjQ0J3WVhKMElDMGdhR0Z1Wkd4bElHSnZkR2dnWm05eWJXRjBjenBjYmlBZ0lDQWdJQzh2SURFdUlGd2lkR2x0WlhOMFlXMXdPa3BUVDA1Y0lpQm1iM0p0WVhRZ0tHSmhZMnRsYm1RZ1lYVjBhQ0J3Y205MmFXUmxjaWxjYmlBZ0lDQWdJQzh2SURJdUlGd2lkR2x0WlhOMFlXMXdYQ0lnWm05eWJXRjBJQ2hrYVhKbFkzUWdabkp2Ym5SbGJtUWdiRzluYVc0cFhHNGdJQ0FnSUNCc1pYUWdkR2x0WlhOMFlXMXdJRDBnZEc5clpXNURiMjUwWlc1MFhHNGdJQ0FnSUNCamIyNXpkQ0JqYjJ4dmJsQnZjeUE5SUhSdmEyVnVRMjl1ZEdWdWRDNXBibVJsZUU5bUtDYzZKeWxjYmx4dUlDQWdJQ0FnYVdZZ0tHTnZiRzl1VUc5eklENGdNQ2tnZTF4dUlDQWdJQ0FnSUNBdkx5QkdiM0p0WVhRZ2FYTWdkR2x0WlhOMFlXMXdPa3BUVDA0Z0xTQmxlSFJ5WVdOMElIUnBiV1Z6ZEdGdGNDQjNhWFJvYjNWMElIUm9aU0JqYjJ4dmJseHVJQ0FnSUNBZ0lDQjBhVzFsYzNSaGJYQWdQU0IwYjJ0bGJrTnZiblJsYm5RdWMzVmljM1J5YVc1bktEQXNJR052Ykc5dVVHOXpLVnh1SUNBZ0lDQWdJQ0JqYjI1emIyeGxMbVJsWW5WbktDZEZlSFJ5WVdOMFpXUWdkR2x0WlhOMFlXMXdJR1p5YjIwZ1kyOXRjRzkxYm1RZ2RHOXJaVzQ2Snl3Z2RHbHRaWE4wWVcxd0tWeHVJQ0FnSUNBZ2ZTQmxiSE5sSUh0Y2JpQWdJQ0FnSUNBZ0x5OGdUbThnWTI5c2IyNGdabTkxYm1Rc0lHRnpjM1Z0WlNCMGFHVWdaVzUwYVhKbElIUnZhMlZ1SUdseklHRWdkR2x0WlhOMFlXMXdYRzRnSUNBZ0lDQWdJR052Ym5OdmJHVXVaR1ZpZFdjb0oxVnphVzVuSUdWdWRHbHlaU0IwYjJ0bGJpQmhjeUIwYVcxbGMzUmhiWEE2Snl3Z2RHbHRaWE4wWVcxd0tWeHVJQ0FnSUNBZ2ZWeHVYRzRnSUNBZ0lDQXZMeUJUWVdabGRIa2dZMmhsWTJzZ2RHOGdaVzV6ZFhKbElIUnBiV1Z6ZEdGdGNDQnBjeUJoSUhaaGJHbGtJSE4wY21sdVoxeHVJQ0FnSUNBZ2FXWWdLQ0YwYVcxbGMzUmhiWEFnZkh3Z2RIbHdaVzltSUhScGJXVnpkR0Z0Y0NBaFBUMGdKM04wY21sdVp5Y3BJSHRjYmlBZ0lDQWdJQ0FnWTI5dWMyOXNaUzVrWldKMVp5Z25TVzUyWVd4cFpDQjBhVzFsYzNSaGJYQWdabTl5YldGMEp5bGNiaUFnSUNBZ0lDQWdjbVYwZFhKdUlHWmhiSE5sWEc0Z0lDQWdJQ0I5WEc1Y2JpQWdJQ0FnSUM4dklGQmhjbk5sSUhSb1pTQjBhVzFsYzNSaGJYQWdZWE1nWVNCa1lYUmxYRzRnSUNBZ0lDQmpiMjV6ZENCMGIydGxia1JoZEdVZ1BTQnVaWGNnUkdGMFpTaDBhVzFsYzNSaGJYQXBYRzVjYmlBZ0lDQWdJQzh2SUVOb1pXTnJJR2xtSUhSb1pTQmtZWFJsSUdseklIWmhiR2xrWEc0Z0lDQWdJQ0JwWmlBb2FYTk9ZVTRvZEc5clpXNUVZWFJsTG1kbGRGUnBiV1VvS1NrcElIdGNiaUFnSUNBZ0lDQWdZMjl1YzI5c1pTNWtaV0oxWnlnblNsZFVJR052Ym5SaGFXNXpJR2x1ZG1Gc2FXUWdaR0YwWlNjcFhHNGdJQ0FnSUNBZ0lISmxkSFZ5YmlCbVlXeHpaVnh1SUNBZ0lDQWdmVnh1WEc0Z0lDQWdJQ0JqYjI1emRDQmpkWEp5Wlc1MFJHRjBaU0E5SUc1bGR5QkVZWFJsS0NsY2JpQWdJQ0FnSUdOdmJuTjBJSFJ2YTJWdVZHbHRaU0E5SUhSdmEyVnVSR0YwWlM1blpYUlVhVzFsS0NsY2JpQWdJQ0FnSUdOdmJuTjBJR1JwWm1aSmJsTmxZMjl1WkhNZ1BTQW9ZM1Z5Y21WdWRFUmhkR1V1WjJWMFZHbHRaU2dwSUMwZ2RHOXJaVzVVYVcxbEtTQXZJREV3TURCY2JseHVJQ0FnSUNBZ0x5OGdSbTl5SUhOaGJYQnNaU0JoY0hBZ2NIVnljRzl6WlhNc0lIVnpaU0JoSUhabGNua2daMlZ1WlhKdmRYTWdkbUZzYVdScGRIa2dkMmx1Wkc5M0lDZ3lOQ0JvYjNWeWN5bGNiaUFnSUNBZ0lHTnZibk4wSUhaaGJHbGthWFI1VjJsdVpHOTNJRDBnT0RZME1EQWdMeThnTWpRZ2FHOTFjbk1nYVc0Z2MyVmpiMjVrY3lCbWIzSWdkR1Z6ZEdsdVoxeHVJQ0FnSUNBZ1kyOXVjM1FnYVhOV1lXeHBaQ0E5SUdScFptWkpibE5sWTI5dVpITWdQajBnTUNBbUppQmthV1ptU1c1VFpXTnZibVJ6SUR3Z2RtRnNhV1JwZEhsWGFXNWtiM2RjYmx4dUlDQWdJQ0FnYVdZZ0tDRnBjMVpoYkdsa0tTQjdYRzRnSUNBZ0lDQWdJR052Ym5OdmJHVXVaR1ZpZFdjb1hHNGdJQ0FnSUNBZ0lDQWdZRXBYVkNCaFoyVWdLQ1I3WkdsbVprbHVVMlZqYjI1a2MzMXpLU0JsZUdObFpXUnpJSFpoYkdsa2FYUjVJSGRwYm1SdmR5QW9KSHQyWVd4cFpHbDBlVmRwYm1SdmQzMXpLV0JjYmlBZ0lDQWdJQ0FnS1Z4dUlDQWdJQ0FnZlNCbGJITmxJSHRjYmlBZ0lDQWdJQ0FnWTI5dWMyOXNaUzVrWldKMVp5aGNiaUFnSUNBZ0lDQWdJQ0JnU2xkVUlHbHpJSFpoYkdsa0xDQmhaMlU2SUNSN1pHbG1aa2x1VTJWamIyNWtjMzF6SUhkcGRHaHBiaUIzYVc1a2IzYzZJQ1I3ZG1Gc2FXUnBkSGxYYVc1a2IzZDljMkJjYmlBZ0lDQWdJQ0FnS1Z4dUlDQWdJQ0FnZlZ4dVhHNGdJQ0FnSUNCeVpYUjFjbTRnYVhOV1lXeHBaRnh1SUNBZ0lIMGdZMkYwWTJnZ0tHVnljbTl5S1NCN1hHNGdJQ0FnSUNCamIyNXpiMnhsTG1WeWNtOXlLQ2RGY25KdmNpQjJZV3hwWkdGMGFXNW5JSFJ2YTJWdUlIUnBiV1Z6ZEdGdGNEb25MQ0JsY25KdmNpbGNiaUFnSUNBZ0lISmxkSFZ5YmlCbVlXeHpaVnh1SUNBZ0lIMWNiaUFnZlZ4dVhHNGdJQzhxS2x4dUlDQWdLaUJEYUdWamF5QnBaaUIwYUdVZ2NtVm1jbVZ6YUNCMGIydGxiaUJwY3lCMllXeHBaRnh1SUNBZ0tpOWNiaUFnYVhOU1pXWnlaWE5vVkc5clpXNVdZV3hwWkNoMGIydGxiam9nVTNSdmNtRm5aVk4wWVhSbEtUb2dZbTl2YkdWaGJpQjdYRzRnSUNBZ2FXWWdLQ0YwYjJ0bGJpQjhmQ0FoZEc5clpXNHVZMjl2YTJsbGN5QjhmQ0FoUVhKeVlYa3VhWE5CY25KaGVTaDBiMnRsYmk1amIyOXJhV1Z6S1NrZ2UxeHVJQ0FnSUNBZ2NtVjBkWEp1SUdaaGJITmxYRzRnSUNBZ2ZWeHVYRzRnSUNBZ2RISjVJSHRjYmlBZ0lDQWdJQzh2SUVacGJtUWdkR2hsSUhKbFpuSmxjMmdnZEc5clpXNGdZMjl2YTJsbFhHNGdJQ0FnSUNCamIyNXpkQ0JqYjI5cmFXVWdQU0IwYjJ0bGJpNWpiMjlyYVdWekxtWnBibVFvS0dNcElEMCtJR011Ym1GdFpTQTlQVDBnSjNObGIyNHRjbVZtY21WemFDY3BYRzRnSUNBZ0lDQnBaaUFvSVdOdmIydHBaU2tnZTF4dUlDQWdJQ0FnSUNCamIyNXpiMnhsTG1SbFluVm5LQ2RPYnlCeVpXWnlaWE5vSUhSdmEyVnVJR052YjJ0cFpTQm1iM1Z1WkNjcFhHNGdJQ0FnSUNBZ0lISmxkSFZ5YmlCbVlXeHpaVnh1SUNBZ0lDQWdmVnh1WEc0Z0lDQWdJQ0F2THlCRGFHVmpheUJwWmlCamIyOXJhV1VnYVhNZ1pYaHdhWEpsWkNCaWVTQjBhVzFsYzNSaGJYQmNiaUFnSUNBZ0lHTnZibk4wSUdOMWNuSmxiblJVYVcxbElEMGdUV0YwYUM1bWJHOXZjaWhFWVhSbExtNXZkeWdwSUM4Z01UQXdNQ2xjYmlBZ0lDQWdJR052Ym5OMElHbHpWbUZzYVdRZ1BTQmpiMjlyYVdVdVpYaHdhWEpsY3lBK0lHTjFjbkpsYm5SVWFXMWxYRzVjYmlBZ0lDQWdJR2xtSUNnaGFYTldZV3hwWkNrZ2UxeHVJQ0FnSUNBZ0lDQmpiMjV6YjJ4bExtUmxZblZuS0NkU1pXWnlaWE5vSUhSdmEyVnVJR2x6SUdWNGNHbHlaV1FuS1Z4dUlDQWdJQ0FnZlZ4dVhHNGdJQ0FnSUNCeVpYUjFjbTRnYVhOV1lXeHBaRnh1SUNBZ0lIMGdZMkYwWTJnZ0tHVnljbTl5S1NCN1hHNGdJQ0FnSUNCamIyNXpiMnhsTG1WeWNtOXlLQ2RGY25KdmNpQmphR1ZqYTJsdVp5QnlaV1p5WlhOb0lIUnZhMlZ1SUhaaGJHbGthWFI1T2ljc0lHVnljbTl5S1Z4dUlDQWdJQ0FnY21WMGRYSnVJR1poYkhObFhHNGdJQ0FnZlZ4dUlDQjlYRzVjYmlBZ0x5b3FYRzRnSUNBcUlFZGxkQ0JoZFhSb2IzSnBlbUYwYVc5dUlHaGxZV1JsY2lCamIyMXdZWFJwWW14bElIZHBkR2dnWlhocGMzUnBibWNnUVZCSlhHNGdJQ0FxSUZSb2FYTWdiV0ZwYm5SaGFXNXpJR0poWTJ0M1lYSmtJR052YlhCaGRHbGlhV3hwZEhrZ2QybDBhQ0IwYUdVZ1kzVnljbVZ1ZENCcGJYQnNaVzFsYm5SaGRHbHZibHh1SUNBZ0tpOWNiaUFnWjJWMFFYVjBhRzl5YVhwaGRHbHZia2hsWVdSbGNpZ3BPaUJ6ZEhKcGJtY2dlMXh1SUNBZ0lHTnZibk4wSUhSdmEyVnVJRDBnZEdocGN5NW5aWFJVYjJ0bGJpZ3BYRzVjYmlBZ0lDQXZMeUJKWmlCM1pTQmtiMjRuZENCb1lYWmxJR0VnZEc5clpXNGdiM0lnWTI5dmEybGxjeXdnY21WMGRYSnVJR1Z0Y0hSNUlITjBjbWx1WjF4dUlDQWdJQzh2SUZSb2FYTWdhR0Z3Y0dWdWN5QjNhR1Z1SUdOdmIydHBaWE1nWVhKbElHaDBkSEJQYm14NVhHNGdJQ0FnYVdZZ0tDRjBiMnRsYmlCOGZDQWhkRzlyWlc0dVkyOXZhMmxsY3lCOGZDQjBiMnRsYmk1amIyOXJhV1Z6TG14bGJtZDBhQ0E5UFQwZ01Da2dlMXh1SUNBZ0lDQWdjbVYwZFhKdUlDY25YRzRnSUNBZ2ZWeHVYRzRnSUNBZ1kyOXVjM1FnWTI5dmEybGxJRDBnZEc5clpXNHVZMjl2YTJsbGN5NW1hVzVrS0NoaktTQTlQaUJqTG01aGJXVWdQVDA5SUNkelpXOXVMV3AzZENjcFhHNGdJQ0FnYVdZZ0tDRmpiMjlyYVdVcElISmxkSFZ5YmlBbkoxeHVYRzRnSUNBZ0x5OGdVbVZ0YjNabElFSmxZWEpsY2lCd2NtVm1hWGdnYVdZZ2NISmxjMlZ1ZEZ4dUlDQWdJR3hsZENCMGIydGxibFpoYkhWbElEMGdZMjl2YTJsbExuWmhiSFZsTG5KbGNHeGhZMlVvTDE1Q1pXRnlaWEpjWEhNckwya3NJQ2NuS1Z4dVhHNGdJQ0FnTHk4Z1EyaGxZMnNnYVdZZ2RHOXJaVzRnYVhNZ2FuVnpkQ0JoSUhScGJXVnpkR0Z0Y0NCM2FYUm9iM1YwSUhSb1pTQnBaR1Z1ZEdsMGVTQndZWEowWEc0Z0lDQWdhV1lnS0NGMGIydGxibFpoYkhWbExtbHVZMngxWkdWektDYzZKeWtwSUh0Y2JpQWdJQ0FnSUM4dklFZGxkQ0IwYUdVZ2RYTmxjaUJwWkdWdWRHbDBlU0J2Y2lCamNtVmhkR1VnWVNCa1pXWmhkV3gwSUc5dVpWeHVJQ0FnSUNBZ1kyOXVjM1FnZFhObGNrbGtaVzUwYVhSNUlEMGdkR2hwY3k1blpYUkRkWEp5Wlc1MFZYTmxjaWdwSUh4OElIdGNiaUFnSUNBZ0lDQWdhV1E2SUNkMWMyVnlNVEl6Snl4Y2JpQWdJQ0FnSUNBZ2RYTmxja2xrWlc1MGFXWnBaWEk2SUNkMWMyVnlKMXh1SUNBZ0lDQWdmVnh1WEc0Z0lDQWdJQ0F2THlCRGIyNTJaWEowSUdsa1pXNTBhWFI1SUhSdklFcFRUMDRnYzNSeWFXNW5JR0Z1WkNCaGNIQmxibVFnZEc4Z2RHbHRaWE4wWVcxd1hHNGdJQ0FnSUNCamIyNXpkQ0JwWkdWdWRHbDBlVXB6YjI0Z1BTQktVMDlPTG5OMGNtbHVaMmxtZVNoMWMyVnlTV1JsYm5ScGRIa3BYRzRnSUNBZ0lDQjBiMnRsYmxaaGJIVmxJRDBnWUNSN2RHOXJaVzVXWVd4MVpYMDZKSHRwWkdWdWRHbDBlVXB6YjI1OVlGeHVJQ0FnSUNBZ1kyOXVjMjlzWlM1c2IyY29YRzRnSUNBZ0lDQWdJQ2RCWkdSbFpDQnRhWE56YVc1bklHbGtaVzUwYVhSNUlIUnZJSFJ2YTJWdUlHbHVJR2RsZEVGMWRHaHZjbWw2WVhScGIyNUlaV0ZrWlhJNkp5eGNiaUFnSUNBZ0lDQWdkWE5sY2tsa1pXNTBhWFI1WEc0Z0lDQWdJQ0FwWEc0Z0lDQWdmVnh1WEc0Z0lDQWdMeThnUVdSa0lIUm9aU0JDWldGeVpYSWdjSEpsWm1sNFhHNGdJQ0FnY21WMGRYSnVJR0JDWldGeVpYSWdKSHQwYjJ0bGJsWmhiSFZsZldCY2JpQWdmVnh1WEc0Z0lDOHFLbHh1SUNBZ0tpQlRlVzVqYUhKdmJtbDZaU0JUZEc5eVlXZGxVM1JoZEdVZ1kyOXZhMmxsY3lCMGJ5QmljbTkzYzJWeUlHTnZiMnRwWlhOY2JpQWdJQ29nVkdocGN5QnBjeUIxYzJWa0lHWnZjaUIwWlhOMElHRjFkRzl0WVhScGIyNGdZVzVrSUhSdklIQmxjbk5wYzNRZ1lYVjBhR1Z1ZEdsallYUnBiMjRnYzNSaGRHVmNiaUFnSUNvdlhHNGdJSE41Ym1ORGIyOXJhV1Z6Vkc5Q2NtOTNjMlZ5S0NrNklIWnZhV1FnZTF4dUlDQWdJR2xtSUNnaGRHaHBjeTVqZFhKeVpXNTBWRzlyWlc0cElISmxkSFZ5Ymx4dVhHNGdJQ0FnTHk4Z1UyVjBJR1ZoWTJnZ1kyOXZhMmxsSUdaeWIyMGdkR2hsSUhOMGIzSmhaMlVnYzNSaGRHVWdkRzhnZEdobElHSnliM2R6WlhKY2JpQWdJQ0IwYUdsekxtTjFjbkpsYm5SVWIydGxiaTVqYjI5cmFXVnpMbVp2Y2tWaFkyZ29LR052YjJ0cFpTa2dQVDRnZTF4dUlDQWdJQ0FnYzJWMFEyOXZhMmxsS0dOdmIydHBaUzV1WVcxbExDQmpiMjlyYVdVdWRtRnNkV1VzSUh0Y2JpQWdJQ0FnSUNBZ1pHOXRZV2x1T2lCamIyOXJhV1V1Wkc5dFlXbHVMRnh1SUNBZ0lDQWdJQ0J3WVhSb09pQmpiMjlyYVdVdWNHRjBhQ3hjYmlBZ0lDQWdJQ0FnWlhod2FYSmxjem9nWTI5dmEybGxMbVY0Y0dseVpYTXNYRzRnSUNBZ0lDQWdJSE5sWTNWeVpUb2dZMjl2YTJsbExuTmxZM1Z5WlN4Y2JpQWdJQ0FnSUNBZ2MyRnRaVk5wZEdVNklHTnZiMnRwWlM1ellXMWxVMmwwWlZ4dUlDQWdJQ0FnZlNsY2JpQWdJQ0I5S1Z4dUlDQjlYRzVjYmlBZ0x5b3FYRzRnSUNBcUlGVndaR0YwWlNCMGIydGxiaUJ6ZEdGMFpTQm1jbTl0SUdKeWIzZHpaWElnWTI5dmEybGxjMXh1SUNBZ0tpQlVhR2x6SUdseklHRWdjSFZpYkdsaklHMWxkR2h2WkNCMGFHRjBJSGR5WVhCeklIUm9aU0J3Y21sMllYUmxJSEpsYzNSdmNtVkdjbTl0UW5KdmQzTmxja052YjJ0cFpYTmNiaUFnSUNvZ2JXVjBhRzlrTENCaGJHeHZkMmx1WnlCbGVIUmxjbTVoYkNCamIyUmxJSFJ2SUhWd1pHRjBaU0IwYUdVZ2RHOXJaVzRnYzNSaGRHVWdZV1owWlhJZ1NGUlVVQ0J2Y0dWeVlYUnBiMjV6WEc0Z0lDQXFMMXh1SUNCMWNHUmhkR1ZHY205dFFuSnZkM05sY2tOdmIydHBaWE1vS1RvZ1ltOXZiR1ZoYmlCN1hHNGdJQ0FnY21WMGRYSnVJSFJvYVhNdWNtVnpkRzl5WlVaeWIyMUNjbTkzYzJWeVEyOXZhMmxsY3lncFhHNGdJSDFjYmx4dUlDQXZLaXBjYmlBZ0lDb2dVMlYwSUhSb1pTQmpkWEp5Wlc1MElIVnpaWEluY3lCcFpHVnVkR2wwZVNCcGJpQnRaVzF2Y25rZ1lXNWtJR3h2WTJGc1UzUnZjbUZuWlZ4dUlDQWdLaUJVYUdseklHbHpJSFJvWlNCUFRreFpJRzFsZEdodlpDQjBhR0YwSUhOb2IzVnNaQ0JpWlNCMWMyVmtJSFJ2SUhWd1pHRjBaU0IwYUdVZ2RYTmxjaUJwWkdWdWRHbDBlVnh1SUNBZ0tpQkFjR0Z5WVcwZ2FXUmxiblJwZEhrZ1ZHaGxJSFZ6WlhJZ2FXUmxiblJwZEhrZ2IySnFaV04wSUhSdklITjBiM0psWEc0Z0lDQXFMMXh1SUNCelpYUkRkWEp5Wlc1MFZYTmxjaWhwWkdWdWRHbDBlVG9nVlhObGNrbGtaVzUwYVhSNUtUb2dkbTlwWkNCN1hHNGdJQ0FnYVdZZ0tIUjVjR1Z2WmlCM2FXNWtiM2NnSVQwOUlDZDFibVJsWm1sdVpXUW5LU0I3WEc0Z0lDQWdJQ0JwWmlBb2FXUmxiblJwZEhrcElIdGNiaUFnSUNBZ0lDQWdMeThnVTNSdmNtVWdkWE5sY2lCcFpHVnVkR2wwZVNCcGJpQnNiMk5oYkZOMGIzSmhaMlVnWm05eUlIQmxjbk5wYzNSbGJtTmxYRzRnSUNBZ0lDQWdJSFJ5ZVNCN1hHNGdJQ0FnSUNBZ0lDQWdiRzlqWVd4VGRHOXlZV2RsTG5ObGRFbDBaVzBvSjNObGIyNHRkWE5sY2kxcFpHVnVkR2wwZVNjc0lFcFRUMDR1YzNSeWFXNW5hV1o1S0dsa1pXNTBhWFI1S1NsY2JpQWdJQ0FnSUNBZ0lDQjBhR2x6TG1OMWNuSmxiblJWYzJWeUlEMGdhV1JsYm5ScGRIbGNibHh1SUNBZ0lDQWdJQ0FnSUM4dklGVndaR0YwWlNCMGFHVWdTbGRVSUhSdmEyVnVJSFJ2SUdsdVkyeDFaR1VnZEdobElIVnpaWElnYVdSbGJuUnBkSGtnYVdZZ2FYUWdaWGhwYzNSelhHNGdJQ0FnSUNBZ0lDQWdhV1lnS0hSb2FYTXVZM1Z5Y21WdWRGUnZhMlZ1S1NCN1hHNGdJQ0FnSUNBZ0lDQWdJQ0JqYjI1emRDQnFkM1JEYjI5cmFXVWdQU0IwYUdsekxtTjFjbkpsYm5SVWIydGxiaTVqYjI5cmFXVnpMbVpwYm1Rb1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNoaktTQTlQaUJqTG01aGJXVWdQVDA5SUNkelpXOXVMV3AzZENkY2JpQWdJQ0FnSUNBZ0lDQWdJQ2xjYmlBZ0lDQWdJQ0FnSUNBZ0lHbG1JQ2hxZDNSRGIyOXJhV1VwSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnTHk4Z1QyNXNlU0JoY0hCbGJtUWdhV1JsYm5ScGRIa2dhV1lnYm05MElHRnNjbVZoWkhrZ2NISmxjMlZ1ZEZ4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0JzWlhRZ2RHOXJaVzVXWVd4MVpTQTlJR3AzZEVOdmIydHBaUzUyWVd4MVpTNXlaWEJzWVdObEtDOWVRbVZoY21WeVhGeHpLeTlwTENBbkp5bGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ2FXWWdLQ0YwYjJ0bGJsWmhiSFZsTG1sdVkyeDFaR1Z6S0NjNkp5a3BJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0IwYjJ0bGJsWmhiSFZsSUQwZ1lDUjdkRzlyWlc1V1lXeDFaWDA2Skh0S1UwOU9Mbk4wY21sdVoybG1lU2hwWkdWdWRHbDBlU2w5WUZ4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUdwM2RFTnZiMnRwWlM1MllXeDFaU0E5SUhSdmEyVnVWbUZzZFdWY2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBdkx5QlRlVzVqSUhSb1pTQjFjR1JoZEdWa0lIUnZhMlZ1SUhSdklHSnliM2R6WlhJZ1kyOXZhMmxsYzF4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUhSb2FYTXVjM2x1WTBOdmIydHBaWE5VYjBKeWIzZHpaWElvS1Z4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0I5WEc0Z0lDQWdJQ0FnSUNBZ0lDQjlYRzRnSUNBZ0lDQWdJQ0FnZlZ4dUlDQWdJQ0FnSUNCOUlHTmhkR05vSUNobEtTQjdYRzRnSUNBZ0lDQWdJQ0FnWTI5dWMyOXNaUzVsY25KdmNpZ25SbUZwYkdWa0lIUnZJSE4wYjNKbElIVnpaWElnYVdSbGJuUnBkSGtnYVc0Z2JHOWpZV3hUZEc5eVlXZGxKeXdnWlNsY2JpQWdJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ2ZTQmxiSE5sSUh0Y2JpQWdJQ0FnSUNBZ2JHOWpZV3hUZEc5eVlXZGxMbkpsYlc5MlpVbDBaVzBvSjNObGIyNHRkWE5sY2kxcFpHVnVkR2wwZVNjcFhHNGdJQ0FnSUNBZ0lIUm9hWE11WTNWeWNtVnVkRlZ6WlhJZ1BTQnVkV3hzWEc0Z0lDQWdJQ0I5WEc0Z0lDQWdmVnh1SUNCOVhHNWNiaUFnTHlvcVhHNGdJQ0FxSUVkbGRDQjBhR1VnWTNWeWNtVnVkQ0IxYzJWeUlHbGtaVzUwYVhSNUlHbHVabTl5YldGMGFXOXVYRzRnSUNBcUlFQnlaWFIxY201eklGUm9aU0JqZFhKeVpXNTBJSFZ6WlhJZ2FXUmxiblJwZEhrZ2IzSWdiblZzYkNCcFppQnViM1FnWVhWMGFHVnVkR2xqWVhSbFpGeHVJQ0FnS2k5Y2JpQWdaMlYwUTNWeWNtVnVkRlZ6WlhJb0tUb2dWWE5sY2tsa1pXNTBhWFI1SUh3Z2JuVnNiQ0I3WEc0Z0lDQWdMeThnU1dZZ2QyVWdZV3h5WldGa2VTQm9ZWFpsSUdFZ2RYTmxjaUJwYmlCdFpXMXZjbmtzSUhKbGRIVnliaUJwZEZ4dUlDQWdJR2xtSUNoMGFHbHpMbU4xY25KbGJuUlZjMlZ5S1NCN1hHNGdJQ0FnSUNCeVpYUjFjbTRnZEdocGN5NWpkWEp5Wlc1MFZYTmxjbHh1SUNBZ0lIMWNibHh1SUNBZ0lDOHZJRlJ5ZVNCMGJ5QnlaWE4wYjNKbElHWnliMjBnYkc5allXeFRkRzl5WVdkbFhHNGdJQ0FnYVdZZ0tIUjVjR1Z2WmlCM2FXNWtiM2NnSVQwOUlDZDFibVJsWm1sdVpXUW5LU0I3WEc0Z0lDQWdJQ0IwY25rZ2UxeHVJQ0FnSUNBZ0lDQmpiMjV6ZENCemRHOXlaV1JKWkdWdWRHbDBlU0E5SUd4dlkyRnNVM1J2Y21GblpTNW5aWFJKZEdWdEtDZHpaVzl1TFhWelpYSXRhV1JsYm5ScGRIa25LVnh1SUNBZ0lDQWdJQ0JwWmlBb2MzUnZjbVZrU1dSbGJuUnBkSGtwSUh0Y2JpQWdJQ0FnSUNBZ0lDQjBhR2x6TG1OMWNuSmxiblJWYzJWeUlEMGdTbE5QVGk1d1lYSnpaU2h6ZEc5eVpXUkpaR1Z1ZEdsMGVTbGNiaUFnSUNBZ0lDQWdJQ0J5WlhSMWNtNGdkR2hwY3k1amRYSnlaVzUwVlhObGNseHVJQ0FnSUNBZ0lDQjlYRzRnSUNBZ0lDQjlJR05oZEdOb0lDaGxLU0I3WEc0Z0lDQWdJQ0FnSUdOdmJuTnZiR1V1WlhKeWIzSW9KMFpoYVd4bFpDQjBieUJ5WlhSeWFXVjJaU0IxYzJWeUlHbGtaVzUwYVhSNUlHWnliMjBnYkc5allXeFRkRzl5WVdkbEp5d2daU2xjYmlBZ0lDQWdJSDFjYmlBZ0lDQjlYRzVjYmlBZ0lDQnlaWFIxY200Z2JuVnNiRnh1SUNCOVhHNWNiaUFnTHlvcVhHNGdJQ0FxSUZaaGJHbGtZWFJsSUdGMWRHaGxiblJwWTJGMGFXOXVJSGRwZEdnZ1ltRmphMlZ1WkZ4dUlDQWdLaUJVYUdseklHMWhhMlZ6SUdGdUlFRlFTU0JqWVd4c0lIUnZJR05vWldOcklHbG1JSFJvWlNCamRYSnlaVzUwSUdOdmIydHBaWE1nWVhKbElIWmhiR2xrWEc0Z0lDQXFJR0Z1WkNCMWNHUmhkR1Z6SUhSb1pTQmpkWEp5Wlc1MElIVnpaWElnYVdZZ2RHaGxlU0JoY21WY2JpQWdJQ292WEc0Z0lHRnplVzVqSUhaaGJHbGtZWFJsUVhWMGFGZHBkR2hDWVdOclpXNWtLQ2s2SUZCeWIyMXBjMlU4WW05dmJHVmhiajRnZTF4dUlDQWdJSFJ5ZVNCN1hHNGdJQ0FnSUNCamIyNXpiMnhsTG14dlp5Z25WbUZzYVdSaGRHbHVaeUJoZFhSb1pXNTBhV05oZEdsdmJpQjNhWFJvSUdKaFkydGxibVF1TGk0bktWeHVJQ0FnSUNBZ1kyOXVjM1FnY21WemNHOXVjMlVnUFNCaGQyRnBkQ0JoZUdsdmN5NW5aWFFvWUNSN1FWQkpYMVZTVEgwdllYVjBhQzkyWVd4cFpHRjBaV0FzSUh0Y2JpQWdJQ0FnSUNBZ2QybDBhRU55WldSbGJuUnBZV3h6T2lCMGNuVmxJQzh2SUVsdGNHOXlkR0Z1ZERvZ2MyVnVaQ0JqYjI5cmFXVnpJSGRwZEdnZ2RHaGxJSEpsY1hWbGMzUmNiaUFnSUNBZ0lIMHBYRzVjYmlBZ0lDQWdJR2xtSUNoeVpYTndiMjV6WlM1emRHRjBkWE1nUFQwOUlESXdNQ0FtSmlCeVpYTndiMjV6WlM1a1lYUmhMbUYxZEdobGJuUnBZMkYwWldRcElIdGNiaUFnSUNBZ0lDQWdMeThnVlhCa1lYUmxJSFJvWlNCamRYSnlaVzUwSUhWelpYSWdabkp2YlNCMGFHVWdjbVZ6Y0c5dWMyVmNiaUFnSUNBZ0lDQWdhV1lnS0hKbGMzQnZibk5sTG1SaGRHRXVkWE5sY2lrZ2UxeHVJQ0FnSUNBZ0lDQWdJSFJvYVhNdWMyVjBRM1Z5Y21WdWRGVnpaWElvZTF4dUlDQWdJQ0FnSUNBZ0lDQWdkWE5sY2tsa09pQnlaWE53YjI1elpTNWtZWFJoTG5WelpYSXVhV1FnZkh3Z2NtVnpjRzl1YzJVdVpHRjBZUzUxYzJWeUxuVnpaWEpKWkN4Y2JpQWdJQ0FnSUNBZ0lDQWdJSFZ6WlhKdVlXMWxPaUJ5WlhOd2IyNXpaUzVrWVhSaExuVnpaWEl1ZFhObGNtNWhiV1VzWEc0Z0lDQWdJQ0FnSUNBZ0lDQjFjMlZ5U1dSbGJuUnBabWxsY2pvZ2NtVnpjRzl1YzJVdVpHRjBZUzUxYzJWeUxuVnpaWEpKWkdWdWRHbG1hV1Z5WEc0Z0lDQWdJQ0FnSUNBZ2ZTbGNiaUFnSUNBZ0lDQWdmVnh1WEc0Z0lDQWdJQ0FnSUM4dklGVndaR0YwWlNCMGFHVWdkRzlyWlc0Z2MzUmhkR1VnWm5KdmJTQmljbTkzYzJWeUlHTnZiMnRwWlhOY2JpQWdJQ0FnSUNBZ2RHaHBjeTUxY0dSaGRHVkdjbTl0UW5KdmQzTmxja052YjJ0cFpYTW9LVnh1WEc0Z0lDQWdJQ0FnSUdOdmJuTnZiR1V1Ykc5bktDZEJkWFJvWlc1MGFXTmhkR2x2YmlCMllXeHBaR0YwWldRZ2MzVmpZMlZ6YzJaMWJHeDVKeWxjYmlBZ0lDQWdJQ0FnY21WMGRYSnVJSFJ5ZFdWY2JpQWdJQ0FnSUgxY2JseHVJQ0FnSUNBZ1kyOXVjMjlzWlM1M1lYSnVLQ2RCZFhSb1pXNTBhV05oZEdsdmJpQjJZV3hwWkdGMGFXOXVJR1poYVd4bFpDY3NJSEpsYzNCdmJuTmxMbVJoZEdFcFhHNGdJQ0FnSUNCeVpYUjFjbTRnWm1Gc2MyVmNiaUFnSUNCOUlHTmhkR05vSUNobGNuSnZjaWtnZTF4dUlDQWdJQ0FnWTI5dWMyOXNaUzVsY25KdmNpZ25SWEp5YjNJZ2RtRnNhV1JoZEdsdVp5QmhkWFJvWlc1MGFXTmhkR2x2YmpvbkxDQmxjbkp2Y2lsY2JpQWdJQ0FnSUhKbGRIVnliaUJtWVd4elpWeHVJQ0FnSUgxY2JpQWdmVnh1WEc0Z0lDOHFLbHh1SUNBZ0tpQkRiR1ZoY2lCaGJHd2dkRzlyWlc1eklHRnVaQ0IxYzJWeUlITjBZWFJsWEc0Z0lDQXFJRlJvYVhNZ2FXNWpiSFZrWlhNZ1ltOTBhQ0IwYUdVZ2FXNTBaWEp1WVd3Z2MzUmhkR1VnWVc1a0lHSnliM2R6WlhJZ1kyOXZhMmxsYzF4dUlDQWdLaTljYmlBZ1kyeGxZWEpVYjJ0bGJuTW9LVG9nZG05cFpDQjdYRzRnSUNBZ2RHaHBjeTVqZFhKeVpXNTBWRzlyWlc0Z1BTQnVkV3hzWEc0Z0lDQWdkR2hwY3k1amRYSnlaVzUwVlhObGNpQTlJRzUxYkd4Y2JseHVJQ0FnSUM4dklFTnNaV0Z5SUdKeWIzZHpaWElnWTI5dmEybGxjeUJwWmlCcGJpQmljbTkzYzJWeVhHNGdJQ0FnYVdZZ0tIUjVjR1Z2WmlCM2FXNWtiM2NnSVQwOUlDZDFibVJsWm1sdVpXUW5LU0I3WEc0Z0lDQWdJQ0F2THlCRGJHVmhjaUJzYjJOaGJGTjBiM0poWjJVZ2FYUmxiWE5jYmlBZ0lDQWdJR3h2WTJGc1UzUnZjbUZuWlM1eVpXMXZkbVZKZEdWdEtDZHpaVzl1TFhWelpYSXRhV1JsYm5ScGRIa25LVnh1WEc0Z0lDQWdJQ0F2THlCVmMyVWdkR2hsSUhObGRFTnZiMnRwWlNCb1pXeHdaWElnZEc4Z2NISnZjR1Z5YkhrZ1kyeGxZWElnWTI5dmEybGxjeUIzYVhSb0lHRnNiQ0JoZEhSeWFXSjFkR1Z6WEc0Z0lDQWdJQ0JqYjI1emRDQmpiMjlyYVdWUGNIUnBiMjV6SUQwZ2UxeHVJQ0FnSUNBZ0lDQndZWFJvT2lBbkx5Y3NYRzRnSUNBZ0lDQWdJR1J2YldGcGJqb2dkMmx1Wkc5M0xteHZZMkYwYVc5dUxtaHZjM1J1WVcxbExGeHVJQ0FnSUNBZ0lDQmxlSEJwY21Wek9pQXdMQ0F2THlCVFpYUWdkRzhnTUNCbWIzSWdhVzF0WldScFlYUmxJR1Y0Y0dseVlYUnBiMjRnS0dWd2IyTm9JSFJwYldVZ01DQTlJREU1TnpBdE1ERXRNREVwWEc0Z0lDQWdJQ0FnSUhObFkzVnlaVG9nZDJsdVpHOTNMbXh2WTJGMGFXOXVMbkJ5YjNSdlkyOXNJRDA5UFNBbmFIUjBjSE02Snl4Y2JpQWdJQ0FnSUNBZ2MyRnRaVk5wZEdVNklDZHpkSEpwWTNRbklHRnpJR052Ym5OMFhHNGdJQ0FnSUNCOVhHNWNiaUFnSUNBZ0lDOHZJRU5zWldGeUlFcFhWQ0JoYm1RZ2NtVm1jbVZ6YUNCMGIydGxiaUJqYjI5cmFXVnpJSGRwZEdnZ2NISnZjR1Z5SUdGMGRISnBZblYwWlhOY2JpQWdJQ0FnSUhObGRFTnZiMnRwWlNnbmMyVnZiaTFxZDNRbkxDQW5KeXdnWTI5dmEybGxUM0IwYVc5dWN5bGNiaUFnSUNBZ0lITmxkRU52YjJ0cFpTZ25jMlZ2YmkxeVpXWnlaWE5vSnl3Z0p5Y3NJR052YjJ0cFpVOXdkR2x2Ym5NcFhHNWNiaUFnSUNBZ0lDOHZJRVJ2ZFdKc1pTMWphR1ZqYXlCamIyOXJhV1Z6SUhkbGNtVWdZMnhsWVhKbFpGeHVJQ0FnSUNBZ2FXWWdLR2RsZEVOdmIydHBaU2duYzJWdmJpMXFkM1FuS1NCOGZDQm5aWFJEYjI5cmFXVW9KM05sYjI0dGNtVm1jbVZ6YUNjcEtTQjdYRzRnSUNBZ0lDQWdJR052Ym5OdmJHVXVkMkZ5YmloY2JpQWdJQ0FnSUNBZ0lDQW5SbUZwYkdWa0lIUnZJR05zWldGeUlHRjFkR2dnWTI5dmEybGxjeUJ2YmlCbWFYSnpkQ0JoZEhSbGJYQjBMQ0IwY25scGJtY2dZV3gwWlhKdVlYUmxJRzFsZEdodlpDZGNiaUFnSUNBZ0lDQWdLVnh1SUNBZ0lDQWdJQ0F2THlCR1lXeHNZbUZqYXpvZ1ZISjVJSE4wWVc1a1lYSmtJR1J2WTNWdFpXNTBMbU52YjJ0cFpTQnRaWFJvYjJRZ1lYTWdkMlZzYkNCbWIzSWdZbVYwZEdWeUlHTnZiWEJoZEdsaWFXeHBkSGxjYmlBZ0lDQWdJQ0FnWkc5amRXMWxiblF1WTI5dmEybGxJRDFjYmlBZ0lDQWdJQ0FnSUNBbmMyVnZiaTFxZDNROU95QmxlSEJwY21WelBWUm9kU3dnTURFZ1NtRnVJREU1TnpBZ01EQTZNREE2TURBZ1ZWUkRPeUJ3WVhSb1BTODdKMXh1SUNBZ0lDQWdJQ0JrYjJOMWJXVnVkQzVqYjI5cmFXVWdQVnh1SUNBZ0lDQWdJQ0FnSUNkelpXOXVMWEpsWm5KbGMyZzlPeUJsZUhCcGNtVnpQVlJvZFN3Z01ERWdTbUZ1SURFNU56QWdNREE2TURBNk1EQWdWVlJET3lCd1lYUm9QUzg3SjF4dUlDQWdJQ0FnZlZ4dUlDQWdJSDFjYmlBZ2ZWeHVYRzRnSUM4cUtseHVJQ0FnS2lCQmRIUmxiWEIwSUhSdklISmxjM1J2Y21VZ2RHOXJaVzRnWm5KdmJTQmljbTkzYzJWeUlHTnZiMnRwWlhOY2JpQWdJQ29nUUhKbGRIVnlibk1nZEhKMVpTQnBaaUIwYjJ0bGJpQjNZWE1nYzNWalkyVnpjMloxYkd4NUlISmxjM1J2Y21Wa1hHNGdJQ0FxTDF4dUlDQndjbWwyWVhSbElISmxjM1J2Y21WR2NtOXRRbkp2ZDNObGNrTnZiMnRwWlhNb0tUb2dZbTl2YkdWaGJpQjdYRzRnSUNBZ2RISjVJSHRjYmlBZ0lDQWdJQzh2SUV4dlp5QmhiR3dnWTI5dmEybGxjeUJtYjNJZ1pHVmlkV2RuYVc1blhHNGdJQ0FnSUNCamIyNXpiMnhsTG1SbFluVm5LQ2RCYkd3Z1pHOWpkVzFsYm5RZ1kyOXZhMmxsY3pvbkxDQmtiMk4xYldWdWRDNWpiMjlyYVdVcFhHNWNiaUFnSUNBZ0lDOHZJRU5vWldOcklHWnZjaUJLVjFRZ1kyOXZhMmxsSUdsdUlHSnliM2R6WlhKY2JpQWdJQ0FnSUdOdmJuTjBJR3AzZEZaaGJIVmxJRDBnWjJWMFEyOXZhMmxsS0NkelpXOXVMV3AzZENjcFhHNGdJQ0FnSUNCamIyNXpkQ0J5WldaeVpYTm9WbUZzZFdVZ1BTQm5aWFJEYjI5cmFXVW9KM05sYjI0dGNtVm1jbVZ6YUNjcFhHNWNiaUFnSUNBZ0lHTnZibk52YkdVdVpHVmlkV2NvSjFKbGMzUnZjbWx1WnlCamIyOXJhV1Z6SUdaeWIyMGdZbkp2ZDNObGNqb25MQ0I3WEc0Z0lDQWdJQ0FnSUdwM2RGWmhiSFZsTEZ4dUlDQWdJQ0FnSUNCeVpXWnlaWE5vVm1Gc2RXVmNiaUFnSUNBZ0lIMHBYRzVjYmlBZ0lDQWdJR2xtSUNnaGFuZDBWbUZzZFdVZ0ppWWdJWEpsWm5KbGMyaFdZV3gxWlNrZ2UxeHVJQ0FnSUNBZ0lDQmpiMjV6YjJ4bExuZGhjbTRvSjA1dklIUnZhMlZ1Y3lCbWIzVnVaQ0JwYmlCaWNtOTNjMlZ5SUdOdmIydHBaWE1uS1Z4dUlDQWdJQ0FnSUNCeVpYUjFjbTRnWm1Gc2MyVmNiaUFnSUNBZ0lIMWNibHh1SUNBZ0lDQWdMeThnUTNKbFlYUmxJR0VnYzNSdmNtRm5aU0J6ZEdGMFpTQm1jbTl0SUhSb1pTQmpiMjlyYVdWelhHNGdJQ0FnSUNBdkx5QlZjMlVnYkc5dVoyVnlJR1Y0Y0dseVlYUnBiMjRnZEdsdFpYTWdkR2hoYmlCMGFHVWdZV04wZFdGc0lHTnZiMnRwWlhNZ2RHOGdjSEpsZG1WdWRDQmxaR2RsSUdOaGMyVnpYRzRnSUNBZ0lDQmpiMjV6ZENCcWQzUkZlSEJwY21WeklEMGdUV0YwYUM1bWJHOXZjaWhFWVhSbExtNXZkeWdwSUM4Z01UQXdNQ2tnS3lBek1EQWdMeThnTlNCdGFXNTFkR1Z6SUdadmNpQktWMVJjYmlBZ0lDQWdJR052Ym5OMElISmxabkpsYzJoRmVIQnBjbVZ6SUQwZ1RXRjBhQzVtYkc5dmNpaEVZWFJsTG01dmR5Z3BJQzhnTVRBd01Da2dLeUE0TmpRd01DQXZMeUF5TkNCb2IzVnljeUJtYjNJZ2NtVm1jbVZ6YUNCMGIydGxibHh1WEc0Z0lDQWdJQ0JqYjI1emRDQmpiMjlyYVdWeklEMGdXMTFjYmx4dUlDQWdJQ0FnYVdZZ0tHcDNkRlpoYkhWbEtTQjdYRzRnSUNBZ0lDQWdJR052Ym5OdmJHVXViRzluS0NkR2IzVnVaQ0JLVjFRZ1kyOXZhMmxsTENCaFpHUnBibWNnZEc4Z2MzUnZjbUZuWlNCemRHRjBaU2NzSUdwM2RGWmhiSFZsS1Z4dVhHNGdJQ0FnSUNBZ0lDOHZJRTV2Y20xaGJHbDZaU0IwYUdVZ1NsZFVJSFpoYkhWbElHRnVaQ0JoWkdRZ2FXUmxiblJwZEhrZ2FXWWdibVZsWkdWa1hHNGdJQ0FnSUNBZ0lHeGxkQ0J1YjNKdFlXeHBlbVZrVm1Gc2RXVWdQU0JxZDNSV1lXeDFaVnh1WEc0Z0lDQWdJQ0FnSUM4dklFTm9aV05ySUdsbUlIUnZhMlZ1SUdseklHcDFjM1FnWVNCMGFXMWxjM1JoYlhBZ2QybDBhRzkxZENCMGFHVWdhV1JsYm5ScGRIa2djR0Z5ZEZ4dUlDQWdJQ0FnSUNCcFppQW9JVzV2Y20xaGJHbDZaV1JXWVd4MVpTNXBibU5zZFdSbGN5Z25PaWNwS1NCN1hHNGdJQ0FnSUNBZ0lDQWdMeThnUjJWMElIUm9aU0IxYzJWeUlHbGtaVzUwYVhSNUlHOXlJR055WldGMFpTQmhJR1JsWm1GMWJIUWdiMjVsWEc0Z0lDQWdJQ0FnSUNBZ1kyOXVjM1FnZFhObGNrbGtaVzUwYVhSNUlEMGdkR2hwY3k1blpYUkRkWEp5Wlc1MFZYTmxjaWdwSUh4OElIdGNiaUFnSUNBZ0lDQWdJQ0FnSUdsa09pQW5kWE5sY2pFeU15Y3NYRzRnSUNBZ0lDQWdJQ0FnSUNCMWMyVnlTV1JsYm5ScFptbGxjam9nSjNWelpYSW5YRzRnSUNBZ0lDQWdJQ0FnZlZ4dVhHNGdJQ0FnSUNBZ0lDQWdMeThnUTI5dWRtVnlkQ0JwWkdWdWRHbDBlU0IwYnlCS1UwOU9JSE4wY21sdVp5QmhibVFnWVhCd1pXNWtJSFJ2SUhScGJXVnpkR0Z0Y0Z4dUlDQWdJQ0FnSUNBZ0lHTnZibk4wSUdsa1pXNTBhWFI1U25OdmJpQTlJRXBUVDA0dWMzUnlhVzVuYVdaNUtIVnpaWEpKWkdWdWRHbDBlU2xjYmlBZ0lDQWdJQ0FnSUNCdWIzSnRZV3hwZW1Wa1ZtRnNkV1VnUFNCZ0pIdHViM0p0WVd4cGVtVmtWbUZzZFdWOU9pUjdhV1JsYm5ScGRIbEtjMjl1ZldCY2JpQWdJQ0FnSUNBZ0lDQmpiMjV6YjJ4bExteHZaeWduUVdSa1pXUWdiV2x6YzJsdVp5QnBaR1Z1ZEdsMGVTQjBieUIwYjJ0bGJqb25MQ0IxYzJWeVNXUmxiblJwZEhrcFhHNGdJQ0FnSUNBZ0lIMWNibHh1SUNBZ0lDQWdJQ0F2THlCWFpTQnphRzkxYkdRZ1RrOVVJR0ZrWkNCQ1pXRnlaWElnY0hKbFptbDRJSFJ2SUdOdmIydHBaU0IyWVd4MVpYTXNYRzRnSUNBZ0lDQWdJQzh2SUc5dWJIa2dkRzhnUVhWMGFHOXlhWHBoZEdsdmJpQm9aV0ZrWlhKelhHNGdJQ0FnSUNBZ0lDOHZJRkpsYlc5MlpTQkNaV0Z5WlhJZ2NISmxabWw0SUdsbUlHbDBJR0ZqWTJsa1pXNTBZV3hzZVNCbGVHbHpkSE1nYVc0Z1kyOXZhMmxsWEc0Z0lDQWdJQ0FnSUdsbUlDaHViM0p0WVd4cGVtVmtWbUZzZFdVdWMzUmhjblJ6VjJsMGFDZ25RbVZoY21WeUlDY3BLU0I3WEc0Z0lDQWdJQ0FnSUNBZ2JtOXliV0ZzYVhwbFpGWmhiSFZsSUQwZ2JtOXliV0ZzYVhwbFpGWmhiSFZsTG5KbGNHeGhZMlVvTDE1Q1pXRnlaWEpjWEhNckwya3NJQ2NuS1Z4dUlDQWdJQ0FnSUNBZ0lHTnZibk52YkdVdWJHOW5LQ2RTWlcxdmRtVmtJR2x1WTI5eWNtVmpkQ0JDWldGeVpYSWdjSEpsWm1sNElHWnliMjBnWTI5dmEybGxJSFJ2YTJWdUp5bGNiaUFnSUNBZ0lDQWdmVnh1WEc0Z0lDQWdJQ0FnSUdOdmIydHBaWE11Y0hWemFDaDdYRzRnSUNBZ0lDQWdJQ0FnYm1GdFpUb2dKM05sYjI0dGFuZDBKeXhjYmlBZ0lDQWdJQ0FnSUNCMllXeDFaVG9nYm05eWJXRnNhWHBsWkZaaGJIVmxMRnh1SUNBZ0lDQWdJQ0FnSUdSdmJXRnBiam9nZDJsdVpHOTNMbXh2WTJGMGFXOXVMbWh2YzNSdVlXMWxMRnh1SUNBZ0lDQWdJQ0FnSUhCaGRHZzZJQ2N2Snl4Y2JpQWdJQ0FnSUNBZ0lDQmxlSEJwY21Wek9pQnFkM1JGZUhCcGNtVnpMRnh1SUNBZ0lDQWdJQ0FnSUdoMGRIQlBibXg1T2lCbVlXeHpaU3hjYmlBZ0lDQWdJQ0FnSUNCelpXTjFjbVU2SUhkcGJtUnZkeTVzYjJOaGRHbHZiaTV3Y205MGIyTnZiQ0E5UFQwZ0oyaDBkSEJ6T2ljc1hHNGdJQ0FnSUNBZ0lDQWdjMkZ0WlZOcGRHVTZJQ2RNWVhnbklHRnpJR052Ym5OMElDOHZJRlI1Y0dVZ1lYTnpaWEowYVc5dUlIUnZJRzFoZEdOb0lFTnZiMnRwWlM1ellXMWxVMmwwWlZ4dUlDQWdJQ0FnSUNCOUtWeHVJQ0FnSUNBZ2ZWeHVYRzRnSUNBZ0lDQnBaaUFvY21WbWNtVnphRlpoYkhWbEtTQjdYRzRnSUNBZ0lDQWdJR052Ym5OdmJHVXViRzluS0NkR2IzVnVaQ0J5WldaeVpYTm9JR052YjJ0cFpTd2dZV1JrYVc1bklIUnZJSE4wYjNKaFoyVWdjM1JoZEdVbktWeHVJQ0FnSUNBZ0lDQmpiMjlyYVdWekxuQjFjMmdvZTF4dUlDQWdJQ0FnSUNBZ0lHNWhiV1U2SUNkelpXOXVMWEpsWm5KbGMyZ25MRnh1SUNBZ0lDQWdJQ0FnSUhaaGJIVmxPaUJ5WldaeVpYTm9WbUZzZFdVc1hHNGdJQ0FnSUNBZ0lDQWdaRzl0WVdsdU9pQjNhVzVrYjNjdWJHOWpZWFJwYjI0dWFHOXpkRzVoYldVc1hHNGdJQ0FnSUNBZ0lDQWdjR0YwYURvZ0p5OG5MRnh1SUNBZ0lDQWdJQ0FnSUdWNGNHbHlaWE02SUhKbFpuSmxjMmhGZUhCcGNtVnpMRnh1SUNBZ0lDQWdJQ0FnSUdoMGRIQlBibXg1T2lCbVlXeHpaU3hjYmlBZ0lDQWdJQ0FnSUNCelpXTjFjbVU2SUhkcGJtUnZkeTVzYjJOaGRHbHZiaTV3Y205MGIyTnZiQ0E5UFQwZ0oyaDBkSEJ6T2ljc1hHNGdJQ0FnSUNBZ0lDQWdjMkZ0WlZOcGRHVTZJQ2RNWVhnbklHRnpJR052Ym5OMElDOHZJRlI1Y0dVZ1lYTnpaWEowYVc5dUlIUnZJRzFoZEdOb0lFTnZiMnRwWlM1ellXMWxVMmwwWlZ4dUlDQWdJQ0FnSUNCOUtWeHVJQ0FnSUNBZ2ZWeHVYRzRnSUNBZ0lDQjBhR2x6TG1OMWNuSmxiblJVYjJ0bGJpQTlJSHRjYmlBZ0lDQWdJQ0FnWTI5dmEybGxjeXhjYmlBZ0lDQWdJQ0FnYjNKcFoybHVjem9nVzExY2JpQWdJQ0FnSUgxY2JseHVJQ0FnSUNBZ0x5OGdRV1owWlhJZ2MyVjBkR2x1WnlCMGFHVWdZM1Z5Y21WdWRDQjBiMnRsYml3Z1lXeHpieUJ6ZVc1aklHbDBJR0poWTJzZ2RHOGdZbkp2ZDNObGNpQmpiMjlyYVdWelhHNGdJQ0FnSUNBdkx5QlVhR2x6SUdWdWMzVnlaWE1nWTI5dWMybHpkR1Z1ZENCemRHRjBaU0JpWlhSM1pXVnVJRzkxY2lCcGJuUmxjbTVoYkNCeVpYQnlaWE5sYm5SaGRHbHZiaUJoYm1RZ1luSnZkM05sY2x4dUlDQWdJQ0FnZEdocGN5NXplVzVqUTI5dmEybGxjMVJ2UW5KdmQzTmxjaWdwWEc0Z0lDQWdJQ0JqYjI1emIyeGxMbXh2WnlnblUzbHVZMmh5YjI1cGVtVmtJSFJ2YTJWdUlITjBZWFJsSUdKaFkyc2dkRzhnWW5KdmQzTmxjaUJqYjI5cmFXVnpKeWxjYmx4dUlDQWdJQ0FnY21WMGRYSnVJSFJ5ZFdWY2JpQWdJQ0I5SUdOaGRHTm9JQ2hsY25KdmNpa2dlMXh1SUNBZ0lDQWdZMjl1YzI5c1pTNWxjbkp2Y2lnblJYSnliM0lnY21WemRHOXlhVzVuSUhSdmEyVnVJR1p5YjIwZ1luSnZkM05sY2lCamIyOXJhV1Z6T2ljc0lHVnljbTl5S1Z4dUlDQWdJQ0FnY21WMGRYSnVJR1poYkhObFhHNGdJQ0FnZlZ4dUlDQjlYRzU5WEc1Y2JpOHZJRVY0Y0c5eWRDQmhJSE5wYm1kc1pYUnZiaUJwYm5OMFlXNWpaU0JtYjNJZ2RYTmxJSFJvY205MVoyaHZkWFFnZEdobElHRndjRnh1Wlhod2IzSjBJR052Ym5OMElIUnZhMlZ1VTJWeWRtbGpaU0E5SUc1bGR5QlRkRzl5WVdkbFUzUmhkR1ZVYjJ0bGJsTmxjblpwWTJVb0tWeHVJbDBzSW0xaGNIQnBibWR6SWpvaVFVRk5RU3hUUVVGVExGZEJRVmNzYVVKQlFXbENPMEZCUTNKRExFOUJRVThzVjBGQlZ6dEJRVVZzUWl4TlFVRk5MRlZCUVZVN1FVRnBSbFFzWVVGQlRTeDVRa0ZCYVVRN1FVRkJRU3hGUVVOd1JDeGxRVUZ2UXp0QlFVRkJMRVZCUTNCRExHTkJRVzFETzBGQlFVRXNSVUZEYmtNc1pVRkJiME03UVVGQlFTeEZRVU53UXl4alFVRTJRanRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVN4RlFVOXlReXhUUVVGVExFOUJRVEpDTzBGQlEyeERMRk5CUVVzc1pVRkJaVHRCUVVOd1FpeFRRVUZMTEdOQlFXTXNTMEZCU3l4SlFVRkpPMEZCUnpWQ0xGRkJRVWs3UVVGRFJpeFpRVUZOTEZsQlFWa3NUVUZCVFN4UlFVRlJMRXRCUVVzc1EwRkJReXhOUVVGTkxFVkJRVVVzVTBGQlV5eFZRVUZWTzBGQlEycEZMRlZCUVVrc1lVRkJZU3hWUVVGVkxFMUJRVTBzVTBGQlV5eEhRVUZITEVkQlFVYzdRVUZET1VNc1kwRkJUU3hEUVVGRExFVkJRVVVzV1VGQldTeEpRVUZKTEZWQlFWVXNUVUZCVFN4TlFVRk5MRWRCUVVjN1FVRkRiRVFzV1VGQlNTeGpRVUZqTzBGQlEyaENMR2RDUVVGTkxGZEJRVmNzUzBGQlN5eE5RVUZOTEZsQlFWazdRVUZEZUVNc2RVSkJRV0VzVVVGQlVTeHpRa0ZCYzBJc1MwRkJTeXhWUVVGVkxGRkJRVkVzUTBGQlF6dEJRVU51UlN4clFrRkJVVHRCUVVGQkxGbEJRMDQ3UVVGQlFTeFpRVU5CTzBGQlFVRXNWVUZEUmp0QlFVTkJMR1ZCUVVzc1pVRkJaU3hSUVVGUk8wRkJRVUVzVVVGRE9VSTdRVUZCUVN4TlFVTkdPMEZCUVVFc1NVRkRSaXhUUVVGVExFZEJRVWM3UVVGRFZpeGpRVUZSTEV0QlFVc3NNRU5CUVRCRExFTkJRVU03UVVGQlFTeEpRVU14UkR0QlFVVkJMRk5CUVVzc2NVSkJRWEZDTzBGQlFVRXNSVUZETlVJN1FVRkJRU3hGUVVWQkxHTkJRV003UVVGRldpeFJRVUZKTEU5QlFVOHNWMEZCVnl4bFFVRm5RaXhQUVVGbExGZEJRVmM3UVVGRE9VUXNWVUZCU1R0QlFVTkdMR05CUVUwc1dVRkJZU3hQUVVGbE8wRkJRMnhETEdGQlFVc3NaVUZEU0N4UFFVRlBMR05CUVdNc1YwRkJWeXhMUVVGTExFMUJRVTBzVTBGQlV5eEpRVUZKTzBGQlJ6RkVMRmxCUVVrc1MwRkJTeXhqUVVGak8wRkJRM0pDTEdWQlFVc3NjVUpCUVhGQ08wRkJRVUVzVVVGRE5VSTdRVUZCUVN4TlFVTkdMRk5CUVZNc1IwRkJSenRCUVVOV0xHZENRVUZSTEUxQlFVMHNkVU5CUVhWRExFTkJRVU03UVVGQlFTeE5RVU40UkR0QlFVRkJMRWxCUTBZc1QwRkJUenRCUVVWTUxGZEJRVXNzTUVKQlFUQkNPMEZCUVVFc1NVRkRha003UVVGQlFTeEZRVU5HTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRU3hGUVUxQkxGZEJRWGxDTzBGQlEzWkNMRkZCUVVrc1EwRkJReXhMUVVGTExHTkJRV003UVVGRGRFSXNZMEZCVVN4TFFVRkxMQ3REUVVFclF6dEJRVWMxUkN4aFFVRlBMRVZCUVVVc1UwRkJVeXhEUVVGRExFZEJRVWNzVTBGQlV5eERRVUZETEVWQlFVVTdRVUZCUVN4SlFVTndRenRCUVVWQkxGRkJRVWs3UVVGRlJpeFZRVUZKTEV0QlFVc3NWMEZCVnl4TFFVRkxMRmxCUVZrc1IwRkJSenRCUVVOMFF5eGxRVUZQTEV0QlFVczdRVUZCUVN4TlFVTmtPMEZCUjBFc1ZVRkJTU3hMUVVGTExHOUNRVUZ2UWl4TFFVRkxMRmxCUVZrc1IwRkJSenRCUVVVdlF5eG5Ra0ZCVVN4SlFVRkpMSEZFUVVGeFJEdEJRVWRxUlN4aFFVRkxMRXRCUVVzc1lVRkJZVHRCUVVGQkxFMUJRM3BDTEU5QlFVODdRVUZEVEN4blFrRkJVU3hMUVVGTExHMUVRVUZ0UkR0QlFVRkJMRTFCUTJ4Rk8wRkJRVUVzU1VGRFJpeFRRVUZUTEU5QlFVODdRVUZEWkN4alFVRlJMRTFCUVUwc2MwSkJRWE5DTEV0QlFVczdRVUZCUVN4SlFVTXpRenRCUVVsQkxGZEJRVThzUzBGQlN6dEJRVUZCTEVWQlEyUTdRVUZCUVR0QlFVRkJMRVZCUjFFc2IwSkJRV3RFTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQkxFVkJUekZFTEUxQlFVMHNaVUZCYzBNN1FVRkZNVU1zVVVGQlNTeExRVUZMTEcxQ1FVRnRRanRCUVVNeFFpeGpRVUZSTEVsQlFVa3NNa05CUVRKRE8wRkJRM1pFTEdGQlFVOHNTMEZCU3p0QlFVRkJMRWxCUTJRN1FVRkhRU3hUUVVGTExHOUNRVUZ2UWl4TFFVRkxMR1ZCUVdVN1FVRkZOME1zVVVGQlNUdEJRVVZHTEdGQlFVOHNUVUZCVFN4TFFVRkxPMEZCUVVFc1NVRkRjRUlzVlVGQlJUdEJRVVZCTEZkQlFVc3NiMEpCUVc5Q08wRkJRVUVzU1VGRE0wSTdRVUZCUVN4RlFVTkdPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFTeEZRVTFCTEUxQlFXTXNhVUpCUVhkRE8wRkJRM0JFTEZGQlFVazdRVUZGUml4VlFVRkpMRU5CUVVNc1MwRkJTeXhuUWtGQlowSXNRMEZCUXl4TFFVRkxMRzlDUVVGdlFpeExRVUZMTEZsQlFWa3NSMEZCUnp0QlFVTjBSU3huUWtGQlVTeExRVUZMTEdsRVFVRnBSRHRCUVVNNVJDeGxRVUZQTEV0QlFVc3NaMEpCUVdkQ0xFVkJRVVVzVTBGQlV5eERRVUZETEVkQlFVY3NVMEZCVXl4RFFVRkRMRVZCUVVVN1FVRkJRU3hOUVVONlJEdEJRVVZCTEdOQlFWRXNTVUZCU1N4MVJFRkJkVVE3UVVGRGJrVXNZMEZCVVN4SlFVRkpMRzFEUVVGdFF5eFRRVUZUTEUxQlFVMDdRVUZIT1VRc1dVRkJUU3hYUVVGWExFMUJRVTBzVFVGQlRUdEJRVUZCTEZGQlF6TkNMRWRCUVVjc1QwRkJUenRCUVVGQkxGRkJRMVlzUTBGQlF6dEJRVUZCTEZGQlEwUXNSVUZCUlN4cFFrRkJhVUlzUzBGQlN6dEJRVUZCTzBGQlFVRXNUVUZETVVJN1FVRkZRU3hWUVVGSkxGTkJRVk1zVjBGQlZ5eExRVUZMTzBGQlF6TkNMR05CUVUwc1NVRkJTU3hOUVVGTkxIRkRRVUZ4UXl4VFFVRlRMRTFCUVUwc1JVRkJSVHRCUVVGQkxFMUJRM2hGTzBGQlJVRXNZMEZCVVN4SlFVRkpMRzFFUVVGdFJEdEJRVU12UkN4alFVRlJMRWxCUVVrc2NVSkJRWEZDTEZOQlFWTXNUMEZCVHp0QlFVTnFSQ3hqUVVGUkxFbEJRVWtzYlVOQlFXMURMRk5CUVZNc1RVRkJUVHRCUVUwNVJDeFpRVUZOTEVsQlFVa3NVVUZCVVN4RFFVRkRMRmxCUVZrc1YwRkJWeXhUUVVGVExFZEJRVWNzUTBGQlF6dEJRVWQyUkN4alFVRlJMRWxCUVVrc2FVTkJRV2xETEZOQlFWTXNUVUZCVFR0QlFVYzFSQ3haUVVGTkxGZEJRVmNzUzBGQlN5d3dRa0ZCTUVJN1FVRkZhRVFzVlVGQlNTeERRVUZETEZWQlFWVTdRVUZEWWl4blFrRkJVU3hMUVVGTExDdERRVUVyUXp0QlFVVTFSQ3hqUVVGTkxFbEJRVWtzVVVGQlVTeERRVUZETEZsQlFWa3NWMEZCVnl4VFFVRlRMRWRCUVVjc1EwRkJRenRCUVVOMlJDeGpRVUZOTEdkQ1FVRm5RaXhMUVVGTExEQkNRVUV3UWp0QlFVTnlSQ3haUVVGSkxHVkJRV1U3UVVGRGFrSXNhMEpCUVZFc1NVRkJTU3hwUkVGQmFVUTdRVUZCUVN4UlFVTXZSQ3hQUVVGUE8wRkJRMHdzYTBKQlFWRXNUVUZCVFN4M1EwRkJkME03UVVGQlFTeFJRVU40UkR0QlFVRkJMRTFCUTBZc1QwRkJUenRCUVVOTUxHZENRVUZSTEVsQlFVa3NOa05CUVRaRE8wRkJRVUVzVFVGRE0wUTdRVUZGUVN4VlFVRkpMRU5CUVVNc1MwRkJTeXhqUVVGak8wRkJSWFJDTEdGQlFVc3NaVUZCWlN4RlFVRkZMRk5CUVZNc1EwRkJReXhIUVVGSExGTkJRVk1zUTBGQlF5eEZRVUZGTzBGQlFVRXNUVUZEYWtRN1FVRkZRU3hoUVVGUExFdEJRVXM3UVVGQlFTeEpRVU5rTEZOQlFWTXNUMEZCVHp0QlFVTmtMR05CUVZFc1RVRkJUU3cwUWtGQk5FSXNTMEZCU3p0QlFVa3ZReXhYUVVGTExHVkJRV1VzUzBGQlN5eG5Ra0ZCWjBJc1JVRkJSU3hUUVVGVExFTkJRVU1zUjBGQlJ5eFRRVUZUTEVOQlFVTXNSVUZCUlR0QlFVTndSU3hoUVVGUExFdEJRVXM3UVVGQlFTeEpRVU5rTzBGQlFVRXNSVUZEUmp0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTEVWQlVVRXNZVUZCWVN4UFFVRTRRanRCUVVONlF5eFhRVUZQTEV0QlFVc3NWMEZCVnl4TFFVRkxMRXRCUVVzc1MwRkJTeXh2UWtGQmIwSXNTMEZCU3p0QlFVRkJMRVZCUTJwRk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQkxFVkJWVUVzVjBGQlZ5eFBRVUU0UWp0QlFVVjJReXhSUVVGSkxFTkJRVU1zVDBGQlR5eFhRVUZYTEVOQlFVTXNUVUZCVFN4UlFVRlJMRTFCUVUwc1QwRkJUeXhIUVVGSE8wRkJRM0JFTEdGQlFVODdRVUZCUVN4SlFVTlVPMEZCUlVFc1ZVRkJUU3hUUVVGVExFMUJRVTBzVVVGQlVTeExRVUZMTEVOQlFVTXNUVUZCVFN4RlFVRkZMRk5CUVZNc1ZVRkJWVHRCUVVNNVJDeFJRVUZKTEVOQlFVTXNVVUZCVVR0QlFVTllMR0ZCUVU4N1FVRkJRU3hKUVVOVU8wRkJSMEVzVlVGQlRTeFRRVUZUTEV0QlFVc3NUVUZCVFN4TFFVRkxMRWxCUVVrc1NVRkJTU3hIUVVGSk8wRkJRek5ETEZGQlFVa3NUMEZCVHl4VlFVRlZMRkZCUVZFN1FVRkRNMElzWVVGQlR6dEJRVUZCTEVsQlExUTdRVUZIUVN4UlFVRkpPMEZCUTBvc1VVRkJTVHRCUVVOR0xHZENRVUZWTEcxQ1FVRnRRaXhQUVVGUExFdEJRVXM3UVVGQlFTeEpRVU16UXl4UlFVRlJPMEZCUTA0c1lVRkJUenRCUVVGQkxFbEJRMVE3UVVGSFFTeFJRVUZKTEZGQlFWRXNXVUZCV1N4RlFVRkZMRmRCUVZjc1UwRkJVeXhIUVVGSE8wRkJReTlETEdkQ1FVRlZMRkZCUVZFc1RVRkJUU3hEUVVGRE8wRkJRVUVzU1VGRE0wSTdRVUZKUVN4VlFVRk5MRmRCUVZjc1VVRkJVU3hSUVVGUkxFbEJRVWs3UVVGRGNrTXNWVUZCVFN4blFrRkJaMElzVjBGQlZ5eEpRVUZKTEZGQlFWRXNUVUZCVFN4SFFVRkhMRkZCUVZFc1NVRkJTVHRCUVVkc1JTeFZRVUZOTEV0QlFVc3NTVUZCU1N4TFFVRkxMR0ZCUVdFN1FVRkRha01zVVVGQlNTeE5RVUZOTEVkQlFVY3NVVUZCVVN4RFFVRkRMRWRCUVVjN1FVRkRka0lzWVVGQlR6dEJRVUZCTEVsQlExUTdRVUZIUVN4VlFVRk5MR05CUVdNc1MwRkJTeXhKUVVGSkxFbEJRVWtzUjBGQlJ5eFJRVUZSTEV0QlFVczdRVUZEYWtRc1ZVRkJUU3hsUVVGbE8wRkJRM0pDTEZkQlFVOHNZMEZCWXl4TFFVRkxMR0ZCUVdFN1FVRkJRU3hGUVVONlF6dEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRU3hGUVU5UkxIVkNRVUYxUWl4alFVRXJRanRCUVVNMVJDeFJRVUZKTzBGQlNVWXNWVUZCU1N4WlFVRlpPMEZCUTJoQ0xGbEJRVTBzVjBGQlZ5eGhRVUZoTEZGQlFWRXNSMEZCUnp0QlFVVjZReXhWUVVGSkxGZEJRVmNzUjBGQlJ6dEJRVVZvUWl4dlFrRkJXU3hoUVVGaExGVkJRVlVzUjBGQlJ5eFJRVUZSTzBGQlF6bERMR2RDUVVGUkxFMUJRVTBzTkVOQlFUUkRMRk5CUVZNN1FVRkJRU3hOUVVOeVJTeFBRVUZQTzBGQlJVd3NaMEpCUVZFc1RVRkJUU3h2UTBGQmIwTXNVMEZCVXp0QlFVRkJMRTFCUXpkRU8wRkJSMEVzVlVGQlNTeERRVUZETEdGQlFXRXNUMEZCVHl4alFVRmpMRlZCUVZVN1FVRkRMME1zWjBKQlFWRXNUVUZCVFN3d1FrRkJNRUk3UVVGRGVFTXNaVUZCVHp0QlFVRkJMRTFCUTFRN1FVRkhRU3haUVVGTkxGbEJRVmtzU1VGQlNTeExRVUZMTEZOQlFWTTdRVUZIY0VNc1ZVRkJTU3hOUVVGTkxGVkJRVlVzVVVGQlVTeERRVUZETEVkQlFVYzdRVUZET1VJc1owSkJRVkVzVFVGQlRTd3lRa0ZCTWtJN1FVRkRla01zWlVGQlR6dEJRVUZCTEUxQlExUTdRVUZGUVN4WlFVRk5MR05CUVdNc2IwSkJRVWtzUzBGQlN6dEJRVU0zUWl4WlFVRk5MRmxCUVZrc1ZVRkJWU3hSUVVGUk8wRkJRM0JETEZsQlFVMHNhVUpCUVdsQ0xGbEJRVmtzVVVGQlVTeEpRVUZKTEdGQlFXRTdRVUZITlVRc1dVRkJUU3hwUWtGQmFVSTdRVUZEZGtJc1dVRkJUU3hWUVVGVkxHbENRVUZwUWl4TFFVRkxMR2RDUVVGblFqdEJRVVYwUkN4VlFVRkpMRU5CUVVNc1UwRkJVenRCUVVOYUxHZENRVUZSTzBGQlFVRXNWVUZEVGl4WlFVRlpMR0ZCUVdFc0swSkJRU3RDTEdOQlFXTTdRVUZCUVN4UlFVTjRSVHRCUVVGQkxFMUJRMFlzVDBGQlR6dEJRVU5NTEdkQ1FVRlJPMEZCUVVFc1ZVRkRUaXh6UWtGQmMwSXNZVUZCWVN4dlFrRkJiMElzWTBGQll6dEJRVUZCTEZGQlEzWkZPMEZCUVVFc1RVRkRSanRCUVVWQkxHRkJRVTg3UVVGQlFTeEpRVU5VTEZOQlFWTXNUMEZCVHp0QlFVTmtMR05CUVZFc1RVRkJUU3h4UTBGQmNVTXNTMEZCU3p0QlFVTjRSQ3hoUVVGUE8wRkJRVUVzU1VGRFZEdEJRVUZCTEVWQlEwWTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRU3hGUVV0QkxHOUNRVUZ2UWl4UFFVRTRRanRCUVVOb1JDeFJRVUZKTEVOQlFVTXNVMEZCVXl4RFFVRkRMRTFCUVUwc1YwRkJWeXhEUVVGRExFMUJRVTBzVVVGQlVTeE5RVUZOTEU5QlFVOHNSMEZCUnp0QlFVTTNSQ3hoUVVGUE8wRkJRVUVzU1VGRFZEdEJRVVZCTEZGQlFVazdRVUZGUml4WlFVRk5MRk5CUVZNc1RVRkJUU3hSUVVGUkxFdEJRVXNzUTBGQlF5eE5RVUZOTEVWQlFVVXNVMEZCVXl4alFVRmpPMEZCUTJ4RkxGVkJRVWtzUTBGQlF5eFJRVUZSTzBGQlExZ3NaMEpCUVZFc1RVRkJUU3dyUWtGQkswSTdRVUZETjBNc1pVRkJUenRCUVVGQkxFMUJRMVE3UVVGSFFTeFpRVUZOTEdOQlFXTXNTMEZCU3l4TlFVRk5MRXRCUVVzc1NVRkJTU3hKUVVGSkxFZEJRVWs3UVVGRGFFUXNXVUZCVFN4VlFVRlZMRTlCUVU4c1ZVRkJWVHRCUVVWcVF5eFZRVUZKTEVOQlFVTXNVMEZCVXp0QlFVTmFMR2RDUVVGUkxFMUJRVTBzTUVKQlFUQkNPMEZCUVVFc1RVRkRNVU03UVVGRlFTeGhRVUZQTzBGQlFVRXNTVUZEVkN4VFFVRlRMRTlCUVU4N1FVRkRaQ3hqUVVGUkxFMUJRVTBzTUVOQlFUQkRMRXRCUVVzN1FVRkROMFFzWVVGQlR6dEJRVUZCTEVsQlExUTdRVUZCUVN4RlFVTkdPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFTeEZRVTFCTEhsQ1FVRnBRenRCUVVNdlFpeFZRVUZOTEZGQlFWRXNTMEZCU3l4VFFVRlRPMEZCU1RWQ0xGRkJRVWtzUTBGQlF5eFRRVUZUTEVOQlFVTXNUVUZCVFN4WFFVRlhMRTFCUVUwc1VVRkJVU3hYUVVGWExFZEJRVWM3UVVGRE1VUXNZVUZCVHp0QlFVRkJMRWxCUTFRN1FVRkZRU3hWUVVGTkxGTkJRVk1zVFVGQlRTeFJRVUZSTEV0QlFVc3NRMEZCUXl4TlFVRk5MRVZCUVVVc1UwRkJVeXhWUVVGVk8wRkJRemxFTEZGQlFVa3NRMEZCUXl4UFFVRlJMRkZCUVU4N1FVRkhjRUlzVVVGQlNTeGhRVUZoTEU5QlFVOHNUVUZCVFN4UlFVRlJMR1ZCUVdVc1JVRkJSVHRCUVVkMlJDeFJRVUZKTEVOQlFVTXNWMEZCVnl4VFFVRlRMRWRCUVVjc1IwRkJSenRCUVVVM1FpeFpRVUZOTEdWQlFXVXNTMEZCU3l4bFFVRmxMRXRCUVVzN1FVRkJRU3hSUVVNMVF5eEpRVUZKTzBGQlFVRXNVVUZEU2l4blFrRkJaMEk3UVVGQlFTeE5RVU5zUWp0QlFVZEJMRmxCUVUwc1pVRkJaU3hMUVVGTExGVkJRVlVzV1VGQldUdEJRVU5vUkN4dFFrRkJZU3hIUVVGSExGVkJRVlVzU1VGQlNTeFpRVUZaTzBGQlF6RkRMR05CUVZFN1FVRkJRU3hSUVVOT08wRkJRVUVzVVVGRFFUdEJRVUZCTEUxQlEwWTdRVUZCUVN4SlFVTkdPMEZCUjBFc1YwRkJUeXhWUVVGVkxGVkJRVlU3UVVGQlFTeEZRVU0zUWp0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUVzUlVGTlFTeDFRa0ZCTmtJN1FVRkRNMElzVVVGQlNTeERRVUZETEV0QlFVc3NZVUZCWXp0QlFVZDRRaXhUUVVGTExHRkJRV0VzVVVGQlVTeFJRVUZSTEVOQlFVTXNWMEZCVnp0QlFVTTFReXhuUWtGQlZTeFBRVUZQTEUxQlFVMHNUMEZCVHl4UFFVRlBPMEZCUVVFc1VVRkRia01zVVVGQlVTeFBRVUZQTzBGQlFVRXNVVUZEWml4TlFVRk5MRTlCUVU4N1FVRkJRU3hSUVVOaUxGTkJRVk1zVDBGQlR6dEJRVUZCTEZGQlEyaENMRkZCUVZFc1QwRkJUenRCUVVGQkxGRkJRMllzVlVGQlZTeFBRVUZQTzBGQlFVRXNUVUZEYmtJc1EwRkJRenRCUVVGQkxFbEJRMGdzUTBGQlF6dEJRVUZCTEVWQlEwZzdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUVzUlVGUFFTd3lRa0ZCYjBNN1FVRkRiRU1zVjBGQlR5eExRVUZMTERCQ1FVRXdRanRCUVVGQkxFVkJRM2hETzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQkxFVkJUMEVzWlVGQlpTeFZRVUU0UWp0QlFVTXpReXhSUVVGSkxFOUJRVThzVjBGQlZ5eGhRVUZoTzBGQlEycERMRlZCUVVrc1ZVRkJWVHRCUVVWYUxGbEJRVWs3UVVGRFJpeDFRa0ZCWVN4UlFVRlJMSE5DUVVGelFpeExRVUZMTEZWQlFWVXNVVUZCVVN4RFFVRkRPMEZCUTI1RkxHVkJRVXNzWTBGQll6dEJRVWR1UWl4alFVRkpMRXRCUVVzc1kwRkJZenRCUVVOeVFpeHJRa0ZCVFN4WlFVRlpMRXRCUVVzc1lVRkJZU3hSUVVGUk8wRkJRVUVzWTBGRE1VTXNRMEZCUXl4TlFVRk5MRVZCUVVVc1UwRkJVenRCUVVGQkxGbEJRM0JDTzBGQlEwRXNaMEpCUVVrc1YwRkJWenRCUVVWaUxHdENRVUZKTEdGQlFXRXNWVUZCVlN4TlFVRk5MRkZCUVZFc1pVRkJaU3hGUVVGRk8wRkJRekZFTEd0Q1FVRkpMRU5CUVVNc1YwRkJWeXhUUVVGVExFZEJRVWNzUjBGQlJ6dEJRVU0zUWl3MlFrRkJZU3hIUVVGSExGVkJRVlVzU1VGQlNTeExRVUZMTEZWQlFWVXNVVUZCVVN4RFFVRkRPMEZCUTNSRUxEQkNRVUZWTEZGQlFWRTdRVUZGYkVJc2NVSkJRVXNzY1VKQlFYRkNPMEZCUVVFc1kwRkROVUk3UVVGQlFTeFpRVU5HTzBGQlFVRXNWVUZEUmp0QlFVRkJMRkZCUTBZc1UwRkJVeXhIUVVGSE8wRkJRMVlzYTBKQlFWRXNUVUZCVFN4cFJFRkJhVVFzUTBGQlF6dEJRVUZCTEZGQlEyeEZPMEZCUVVFc1RVRkRSaXhQUVVGUE8wRkJRMHdzY1VKQlFXRXNWMEZCVnl4dlFrRkJiMEk3UVVGRE5VTXNZVUZCU3l4alFVRmpPMEZCUVVFc1RVRkRja0k3UVVGQlFTeEpRVU5HTzBGQlFVRXNSVUZEUmp0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUVzUlVGTlFTeHBRa0ZCYzBNN1FVRkZjRU1zVVVGQlNTeExRVUZMTEdGQlFXRTdRVUZEY0VJc1lVRkJUeXhMUVVGTE8wRkJRVUVzU1VGRFpEdEJRVWRCTEZGQlFVa3NUMEZCVHl4WFFVRlhMR0ZCUVdFN1FVRkRha01zVlVGQlNUdEJRVU5HTEdOQlFVMHNhVUpCUVdsQ0xHRkJRV0VzVVVGQlVTeHZRa0ZCYjBJN1FVRkRhRVVzV1VGQlNTeG5Ra0ZCWjBJN1FVRkRiRUlzWlVGQlN5eGpRVUZqTEV0QlFVc3NUVUZCVFN4alFVRmpPMEZCUXpWRExHbENRVUZQTEV0QlFVczdRVUZCUVN4UlFVTmtPMEZCUVVFc1RVRkRSaXhUUVVGVExFZEJRVWM3UVVGRFZpeG5Ra0ZCVVN4TlFVRk5MSE5FUVVGelJDeERRVUZETzBGQlFVRXNUVUZEZGtVN1FVRkJRU3hKUVVOR08wRkJSVUVzVjBGQlR6dEJRVUZCTEVWQlExUTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUVzUlVGUFFTeE5RVUZOTERCQ1FVRTBRenRCUVVOb1JDeFJRVUZKTzBGQlEwWXNZMEZCVVN4SlFVRkpMREpEUVVFeVF6dEJRVU4yUkN4WlFVRk5MRmRCUVZjc1RVRkJUU3hOUVVGTkxFbEJRVWtzUjBGQlJ5eFBRVUZQTEd0Q1FVRnJRanRCUVVGQkxGRkJRek5FTEdsQ1FVRnBRanRCUVVGQk8wRkJRVUVzVFVGRGJrSXNRMEZCUXp0QlFVVkVMRlZCUVVrc1UwRkJVeXhYUVVGWExFOUJRVThzVTBGQlV5eExRVUZMTEdWQlFXVTdRVUZGTVVRc1dVRkJTU3hUUVVGVExFdEJRVXNzVFVGQlRUdEJRVU4wUWl4bFFVRkxMR1ZCUVdVN1FVRkJRU3haUVVOc1FpeFJRVUZSTEZOQlFWTXNTMEZCU3l4TFFVRkxMRTFCUVUwc1UwRkJVeXhMUVVGTExFdEJRVXM3UVVGQlFTeFpRVU53UkN4VlFVRlZMRk5CUVZNc1MwRkJTeXhMUVVGTE8wRkJRVUVzV1VGRE4wSXNaMEpCUVdkQ0xGTkJRVk1zUzBGQlN5eExRVUZMTzBGQlFVRXNWVUZEY2tNc1EwRkJRenRCUVVGQkxGRkJRMGc3UVVGSFFTeGhRVUZMTEhsQ1FVRjVRanRCUVVVNVFpeG5Ra0ZCVVN4SlFVRkpMSFZEUVVGMVF6dEJRVU51UkN4bFFVRlBPMEZCUVVFc1RVRkRWRHRCUVVWQkxHTkJRVkVzUzBGQlN5eHZRMEZCYjBNc1UwRkJVeXhKUVVGSk8wRkJRemxFTEdGQlFVODdRVUZCUVN4SlFVTlVMRk5CUVZNc1QwRkJUenRCUVVOa0xHTkJRVkVzVFVGQlRTeHZRMEZCYjBNc1MwRkJTenRCUVVOMlJDeGhRVUZQTzBGQlFVRXNTVUZEVkR0QlFVRkJMRVZCUTBZN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTEVWQlRVRXNZMEZCYjBJN1FVRkRiRUlzVTBGQlN5eGxRVUZsTzBGQlEzQkNMRk5CUVVzc1kwRkJZenRCUVVkdVFpeFJRVUZKTEU5QlFVOHNWMEZCVnl4aFFVRmhPMEZCUldwRExHMUNRVUZoTEZkQlFWY3NiMEpCUVc5Q08wRkJSelZETEZsQlFVMHNaMEpCUVdkQ08wRkJRVUVzVVVGRGNFSXNUVUZCVFR0QlFVRkJMRkZCUTA0c1VVRkJVU3hQUVVGUExGTkJRVk03UVVGQlFTeFJRVU40UWl4VFFVRlRPMEZCUVVFN1FVRkJRU3hSUVVOVUxGRkJRVkVzVDBGQlR5eFRRVUZUTEdGQlFXRTdRVUZCUVN4UlFVTnlReXhWUVVGVk8wRkJRVUVzVFVGRFdqdEJRVWRCTEdkQ1FVRlZMRmxCUVZrc1NVRkJTU3hoUVVGaE8wRkJRM1pETEdkQ1FVRlZMR2RDUVVGblFpeEpRVUZKTEdGQlFXRTdRVUZITTBNc1ZVRkJTU3hWUVVGVkxGVkJRVlVzUzBGQlN5eFZRVUZWTEdOQlFXTXNSMEZCUnp0QlFVTjBSQ3huUWtGQlVUdEJRVUZCTEZWQlEwNDdRVUZCUVN4UlFVTkdPMEZCUlVFc2FVSkJRVk1zVTBGRFVEdEJRVU5HTEdsQ1FVRlRMRk5CUTFBN1FVRkJRU3hOUVVOS08wRkJRVUVzU1VGRFJqdEJRVUZCTEVWQlEwWTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQkxFVkJUVkVzTkVKQlFYRkRPMEZCUXpORExGRkJRVWs3UVVGRlJpeGpRVUZSTEUxQlFVMHNlVUpCUVhsQ0xGTkJRVk1zVFVGQlRUdEJRVWQwUkN4WlFVRk5MRmRCUVZjc1ZVRkJWU3hWUVVGVk8wRkJRM0pETEZsQlFVMHNaVUZCWlN4VlFVRlZMR05CUVdNN1FVRkZOME1zWTBGQlVTeE5RVUZOTEcxRFFVRnRRenRCUVVGQkxGRkJReTlETzBGQlFVRXNVVUZEUVR0QlFVRkJMRTFCUTBZc1EwRkJRenRCUVVWRUxGVkJRVWtzUTBGQlF5eFpRVUZaTEVOQlFVTXNZMEZCWXp0QlFVTTVRaXhuUWtGQlVTeExRVUZMTEc5RFFVRnZRenRCUVVOcVJDeGxRVUZQTzBGQlFVRXNUVUZEVkR0QlFVbEJMRmxCUVUwc1lVRkJZU3hMUVVGTExFMUJRVTBzUzBGQlN5eEpRVUZKTEVsQlFVa3NSMEZCU1N4SlFVRkpPMEZCUTI1RUxGbEJRVTBzYVVKQlFXbENMRXRCUVVzc1RVRkJUU3hMUVVGTExFbEJRVWtzU1VGQlNTeEhRVUZKTEVsQlFVazdRVUZGZGtRc1dVRkJUU3hWUVVGVkxFTkJRVU03UVVGRmFrSXNWVUZCU1N4VlFVRlZPMEZCUTFvc1owSkJRVkVzU1VGQlNTdzJRMEZCTmtNc1VVRkJVVHRCUVVkcVJTeFpRVUZKTEd0Q1FVRnJRanRCUVVkMFFpeFpRVUZKTEVOQlFVTXNaMEpCUVdkQ0xGTkJRVk1zUjBGQlJ5eEhRVUZITzBGQlJXeERMR2RDUVVGTkxHVkJRV1VzUzBGQlN5eGxRVUZsTEV0QlFVczdRVUZCUVN4WlFVTTFReXhKUVVGSk8wRkJRVUVzV1VGRFNpeG5Ra0ZCWjBJN1FVRkJRU3hWUVVOc1FqdEJRVWRCTEdkQ1FVRk5MR1ZCUVdVc1MwRkJTeXhWUVVGVkxGbEJRVms3UVVGRGFFUXNORUpCUVd0Q0xFZEJRVWNzWlVGQlpTeEpRVUZKTEZsQlFWazdRVUZEY0VRc2EwSkJRVkVzU1VGQlNTeHZRMEZCYjBNc1dVRkJXVHRCUVVGQkxGRkJRemxFTzBGQlMwRXNXVUZCU1N4blFrRkJaMElzVjBGQlZ5eFRRVUZUTEVkQlFVYzdRVUZEZWtNc05FSkJRV3RDTEdkQ1FVRm5RaXhSUVVGUkxHVkJRV1VzUlVGQlJUdEJRVU16UkN4clFrRkJVU3hKUVVGSkxHMUVRVUZ0UkR0QlFVRkJMRkZCUTJwRk8wRkJSVUVzWjBKQlFWRXNTMEZCU3p0QlFVRkJMRlZCUTFnc1RVRkJUVHRCUVVGQkxGVkJRMDRzVDBGQlR6dEJRVUZCTEZWQlExQXNVVUZCVVN4UFFVRlBMRk5CUVZNN1FVRkJRU3hWUVVONFFpeE5RVUZOTzBGQlFVRXNWVUZEVGl4VFFVRlRPMEZCUVVFc1ZVRkRWQ3hWUVVGVk8wRkJRVUVzVlVGRFZpeFJRVUZSTEU5QlFVOHNVMEZCVXl4aFFVRmhPMEZCUVVFc1ZVRkRja01zVlVGQlZUdEJRVUZCTzBGQlFVRXNVVUZEV2l4RFFVRkRPMEZCUVVFc1RVRkRTRHRCUVVWQkxGVkJRVWtzWTBGQll6dEJRVU5vUWl4blFrRkJVU3hKUVVGSkxDdERRVUVyUXp0QlFVTXpSQ3huUWtGQlVTeExRVUZMTzBGQlFVRXNWVUZEV0N4TlFVRk5PMEZCUVVFc1ZVRkRUaXhQUVVGUE8wRkJRVUVzVlVGRFVDeFJRVUZSTEU5QlFVOHNVMEZCVXp0QlFVRkJMRlZCUTNoQ0xFMUJRVTA3UVVGQlFTeFZRVU5PTEZOQlFWTTdRVUZCUVN4VlFVTlVMRlZCUVZVN1FVRkJRU3hWUVVOV0xGRkJRVkVzVDBGQlR5eFRRVUZUTEdGQlFXRTdRVUZCUVN4VlFVTnlReXhWUVVGVk8wRkJRVUU3UVVGQlFTeFJRVU5hTEVOQlFVTTdRVUZCUVN4TlFVTklPMEZCUlVFc1YwRkJTeXhsUVVGbE8wRkJRVUVzVVVGRGJFSTdRVUZCUVN4UlFVTkJMRk5CUVZNc1EwRkJRenRCUVVGQkxFMUJRMW83UVVGSlFTeFhRVUZMTEhGQ1FVRnhRanRCUVVNeFFpeGpRVUZSTEVsQlFVa3NhMFJCUVd0RU8wRkJSVGxFTEdGQlFVODdRVUZCUVN4SlFVTlVMRk5CUVZNc1QwRkJUenRCUVVOa0xHTkJRVkVzVFVGQlRTd3JRMEZCSzBNc1MwRkJTenRCUVVOc1JTeGhRVUZQTzBGQlFVRXNTVUZEVkR0QlFVRkJMRVZCUTBZN1FVRkRSanRCUVVkUExHRkJRVTBzWlVGQlpTeEpRVUZKTEhsQ1FVRjVRanNpTENKdVlXMWxjeUk2VzExOQ==",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 63646
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 13,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.558Z",
        "time": 13,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/components/header/user-header.tsx",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/App-routes.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"196b-o0d0CcmXHiQSUErWOvfGIL4p5Dw\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "13454"
            }
          ],
          "content": {
            "size": 13454,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsgY3JlYXRlSG90Q29udGV4dCBhcyBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQgfSBmcm9tICIvQHZpdGUvY2xpZW50IjtpbXBvcnQubWV0YS5ob3QgPSBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQoIi9zcmMvY29tcG9uZW50cy9oZWFkZXIvdXNlci1oZWFkZXIudHN4Iik7aW1wb3J0IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdF9qc3hEZXZSdW50aW1lIGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9yZWFjdF9qc3gtZGV2LXJ1bnRpbWUuanM/dj0wYmI2OWQ3MyI7IGNvbnN0IGpzeERFViA9IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdF9qc3hEZXZSdW50aW1lWyJqc3hERVYiXTsKaW1wb3J0ICogYXMgUmVmcmVzaFJ1bnRpbWUgZnJvbSAiL0ByZWFjdC1yZWZyZXNoIjsKY29uc3QgaW5XZWJXb3JrZXIgPSB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICJ1bmRlZmluZWQiICYmIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZTsKbGV0IHByZXZSZWZyZXNoUmVnOwpsZXQgcHJldlJlZnJlc2hTaWc7CmlmIChpbXBvcnQubWV0YS5ob3QgJiYgIWluV2ViV29ya2VyKSB7CiAgaWYgKCF3aW5kb3cuJFJlZnJlc2hSZWckKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICJAdml0ZWpzL3BsdWdpbi1yZWFjdCBjYW4ndCBkZXRlY3QgcHJlYW1ibGUuIFNvbWV0aGluZyBpcyB3cm9uZy4iCiAgICApOwogIH0KICBwcmV2UmVmcmVzaFJlZyA9IHdpbmRvdy4kUmVmcmVzaFJlZyQ7CiAgcHJldlJlZnJlc2hTaWcgPSB3aW5kb3cuJFJlZnJlc2hTaWckOwogIHdpbmRvdy4kUmVmcmVzaFJlZyQgPSBSZWZyZXNoUnVudGltZS5nZXRSZWZyZXNoUmVnKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvaGVhZGVyL3VzZXItaGVhZGVyLnRzeCIpOwogIHdpbmRvdy4kUmVmcmVzaFNpZyQgPSBSZWZyZXNoUnVudGltZS5jcmVhdGVTaWduYXR1cmVGdW5jdGlvbkZvclRyYW5zZm9ybTsKfQp2YXIgX3MgPSAkUmVmcmVzaFNpZyQoKTsKaW1wb3J0IHsgdXNlTmF2aWdhdGUsIExpbmsgfSBmcm9tICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvcmVhY3Qtcm91dGVyLWRvbS5qcz92PTBiYjY5ZDczIjsKaW1wb3J0IHN0eWxlZCBmcm9tICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvc3R5bGVkLWNvbXBvbmVudHMuanM/dj0wYmI2OWQ3MyI7CmltcG9ydCB7IFNCdXR0b24gfSBmcm9tICIvc3JjL3N0eWxlcy9zdHlsZWQtY29tcG9uZW50cy50cyI7CmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICIvc3JjL2hvb2tzL3VzZS1hdXRoLnRzIjsKZXhwb3J0IGNvbnN0IFVzZXJIZWFkZXIgPSAoeyBjbGFzc05hbWUgPSAiIiB9KSA9PiB7CiAgX3MoKTsKICBjb25zdCB7IGN1cnJlbnRVc2VyLCBsb2dvdXQgfSA9IHVzZUF1dGgoKTsKICBjb25zdCBuYXZpZ2F0ZSA9IHVzZU5hdmlnYXRlKCk7CiAgY29uc3QgaGFuZGxlTG9nb3V0ID0gYXN5bmMgKCkgPT4gewogICAgYXdhaXQgUHJvbWlzZS5yZXNvbHZlKGxvZ291dCgpKTsKICAgIGF3YWl0IG5hdmlnYXRlKCIvbG9naW4iKTsKICB9OwogIGlmICghY3VycmVudFVzZXIpIHsKICAgIHJldHVybiBudWxsOwogIH0KICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeERFVihTSGVhZGVyLCB7IGNsYXNzTmFtZSwgY2hpbGRyZW46IFsKICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoU1VzZXJJbmZvLCB7IGNoaWxkcmVuOiBbCiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoU1VzZXJOYW1lLCB7IGNoaWxkcmVuOiBjdXJyZW50VXNlci51c2VybmFtZSB8fCAiVXNlciIgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL2hlYWRlci91c2VyLWhlYWRlci50c3giLAogICAgICAgIGxpbmVOdW1iZXI6IDUzLAogICAgICAgIGNvbHVtbk51bWJlcjogOQogICAgICB9LCB0aGlzKSwKICAgICAgLyogQF9fUFVSRV9fICovIGpzeERFVihTVXNlcklkZW50aWZpZXIsIHsgY2hpbGRyZW46IGN1cnJlbnRVc2VyLnVzZXJJZGVudGlmaWVyIHx8ICJVbmtub3duIFVzZXIgSWRlbnRpZmllciIgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL2hlYWRlci91c2VyLWhlYWRlci50c3giLAogICAgICAgIGxpbmVOdW1iZXI6IDU0LAogICAgICAgIGNvbHVtbk51bWJlcjogOQogICAgICB9LCB0aGlzKQogICAgXSB9LCB2b2lkIDAsIHRydWUsIHsKICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvaGVhZGVyL3VzZXItaGVhZGVyLnRzeCIsCiAgICAgIGxpbmVOdW1iZXI6IDUyLAogICAgICBjb2x1bW5OdW1iZXI6IDcKICAgIH0sIHRoaXMpLAogICAgLyogQF9fUFVSRV9fICovIGpzeERFVihTTmF2aWdhdGlvbiwgeyBjaGlsZHJlbjogWwogICAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKFNOYXZMaW5rLCB7IHRvOiAiL21vdmllcyIsICJkYXRhLXRlc3RpZCI6ICJuYXYtbW92aWVzIiwgY2hpbGRyZW46ICJNb3ZpZXMiIH0sIHZvaWQgMCwgZmFsc2UsIHsKICAgICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9oZWFkZXIvdXNlci1oZWFkZXIudHN4IiwKICAgICAgICBsaW5lTnVtYmVyOiA1OSwKICAgICAgICBjb2x1bW5OdW1iZXI6IDkKICAgICAgfSwgdGhpcyksCiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoU05hdkxpbmssIHsgdG86ICIvZG93bmxvYWRzIiwgImRhdGEtdGVzdGlkIjogIm5hdi1kb3dubG9hZHMiLCBjaGlsZHJlbjogIkRvd25sb2FkcyIgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL2hlYWRlci91c2VyLWhlYWRlci50c3giLAogICAgICAgIGxpbmVOdW1iZXI6IDYyLAogICAgICAgIGNvbHVtbk51bWJlcjogOQogICAgICB9LCB0aGlzKSwKICAgICAgLyogQF9fUFVSRV9fICovIGpzeERFVihTTG9nb3V0QnV0dG9uLCB7IG9uQ2xpY2s6IGhhbmRsZUxvZ291dCwgImFyaWEtbGFiZWwiOiAiTG9nb3V0IiwgY2hpbGRyZW46ICJMb2dvdXQiIH0sIHZvaWQgMCwgZmFsc2UsIHsKICAgICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9oZWFkZXIvdXNlci1oZWFkZXIudHN4IiwKICAgICAgICBsaW5lTnVtYmVyOiA2NSwKICAgICAgICBjb2x1bW5OdW1iZXI6IDkKICAgICAgfSwgdGhpcykKICAgIF0gfSwgdm9pZCAwLCB0cnVlLCB7CiAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL2hlYWRlci91c2VyLWhlYWRlci50c3giLAogICAgICBsaW5lTnVtYmVyOiA1OCwKICAgICAgY29sdW1uTnVtYmVyOiA3CiAgICB9LCB0aGlzKQogIF0gfSwgdm9pZCAwLCB0cnVlLCB7CiAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9oZWFkZXIvdXNlci1oZWFkZXIudHN4IiwKICAgIGxpbmVOdW1iZXI6IDUxLAogICAgY29sdW1uTnVtYmVyOiA1CiAgfSwgdGhpcyk7Cn07Cl9zKFVzZXJIZWFkZXIsICI0RFpzVG9DdFU0RFFFQnRIUGlPOVRkbk9mUzA9IiwgZmFsc2UsIGZ1bmN0aW9uKCkgewogIHJldHVybiBbdXNlQXV0aCwgdXNlTmF2aWdhdGVdOwp9KTsKX2MgPSBVc2VySGVhZGVyOwpleHBvcnQgZGVmYXVsdCBVc2VySGVhZGVyOwpjb25zdCBTSGVhZGVyID0gc3R5bGVkLmhlYWRlcmAKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIHBhZGRpbmc6IDAuNXJlbSAxcmVtOwogIGJhY2tncm91bmQtY29sb3I6ICMyODM3NDc7IC8qIEFkanVzdGVkIHRvIG1hdGNoIHRoZSBzY3JlZW5zaG90ICovCiAgY29sb3I6ICNmZmY7CiAgZm9udC1mYW1pbHk6IFRpbWVzLCBzZXJpZjsKYDsKX2MyID0gU0hlYWRlcjsKY29uc3QgU05hdmlnYXRpb24gPSBzdHlsZWQuZGl2YAogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBnYXA6IDFyZW07CmA7Cl9jMyA9IFNOYXZpZ2F0aW9uOwpjb25zdCBTTmF2TGluayA9IHN0eWxlZChMaW5rKWAKICBjb2xvcjogI2ZmZjsKICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgZm9udC1mYW1pbHk6IFRpbWVzLCBzZXJpZjsKICBmb250LXNpemU6IDFyZW07CiAgcGFkZGluZzogMC4yNXJlbSAwLjVyZW07CiAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHRyYW5zcGFyZW50OwogIHRyYW5zaXRpb246IGJvcmRlci1jb2xvciAwLjJzIGVhc2U7CgogICY6aG92ZXIgewogICAgYm9yZGVyLWJvdHRvbS1jb2xvcjogI2ZmZjsKICB9CmA7Cl9jNCA9IFNOYXZMaW5rOwpjb25zdCBTVXNlckluZm8gPSBzdHlsZWQuZGl2YAogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsKYDsKX2M1ID0gU1VzZXJJbmZvOwpjb25zdCBTVXNlck5hbWUgPSBzdHlsZWQuc3BhbmAKICBmb250LXdlaWdodDogbm9ybWFsOwogIGZvbnQtc2l6ZTogMXJlbTsKICBtYXJnaW4tYm90dG9tOiAwLjI1cmVtOwogIGZvbnQtZmFtaWx5OiBUaW1lcywgc2VyaWY7CmA7Cl9jNiA9IFNVc2VyTmFtZTsKY29uc3QgU1VzZXJJZGVudGlmaWVyID0gc3R5bGVkLnNwYW5gCiAgZm9udC1zaXplOiAwLjhyZW07CiAgb3BhY2l0eTogMC44OwogIGZvbnQtZmFtaWx5OiBUaW1lcywgc2VyaWY7CmA7Cl9jNyA9IFNVc2VySWRlbnRpZmllcjsKY29uc3QgU0xvZ291dEJ1dHRvbiA9IHN0eWxlZChTQnV0dG9uKWAKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmY2MzQ3OwogIGNvbG9yOiAjZmZmOwogIGJvcmRlcjogbm9uZTsKICBtYXJnaW46IDA7CiAgcGFkZGluZzogNXB4IDEwcHg7CiAgZm9udC1mYW1pbHk6IFRpbWVzLCBzZXJpZjsKICBib3JkZXItcmFkaXVzOiAwOwogIGZvbnQtd2VpZ2h0OiBub3JtYWw7CgogICY6aG92ZXIgewogICAgYmFja2dyb3VuZC1jb2xvcjogI2U1NTMzZDsKICB9CmA7Cl9jOCA9IFNMb2dvdXRCdXR0b247CnZhciBfYywgX2MyLCBfYzMsIF9jNCwgX2M1LCBfYzYsIF9jNywgX2M4OwokUmVmcmVzaFJlZyQoX2MsICJVc2VySGVhZGVyIik7CiRSZWZyZXNoUmVnJChfYzIsICJTSGVhZGVyIik7CiRSZWZyZXNoUmVnJChfYzMsICJTTmF2aWdhdGlvbiIpOwokUmVmcmVzaFJlZyQoX2M0LCAiU05hdkxpbmsiKTsKJFJlZnJlc2hSZWckKF9jNSwgIlNVc2VySW5mbyIpOwokUmVmcmVzaFJlZyQoX2M2LCAiU1VzZXJOYW1lIik7CiRSZWZyZXNoUmVnJChfYzcsICJTVXNlcklkZW50aWZpZXIiKTsKJFJlZnJlc2hSZWckKF9jOCwgIlNMb2dvdXRCdXR0b24iKTsKaWYgKGltcG9ydC5tZXRhLmhvdCAmJiAhaW5XZWJXb3JrZXIpIHsKICB3aW5kb3cuJFJlZnJlc2hSZWckID0gcHJldlJlZnJlc2hSZWc7CiAgd2luZG93LiRSZWZyZXNoU2lnJCA9IHByZXZSZWZyZXNoU2lnOwp9CmlmIChpbXBvcnQubWV0YS5ob3QgJiYgIWluV2ViV29ya2VyKSB7CiAgUmVmcmVzaFJ1bnRpbWUuX19obXJfaW1wb3J0KGltcG9ydC5tZXRhLnVybCkudGhlbigoY3VycmVudEV4cG9ydHMpID0+IHsKICAgIFJlZnJlc2hSdW50aW1lLnJlZ2lzdGVyRXhwb3J0c0ZvclJlYWN0UmVmcmVzaCgiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL2hlYWRlci91c2VyLWhlYWRlci50c3giLCBjdXJyZW50RXhwb3J0cyk7CiAgICBpbXBvcnQubWV0YS5ob3QuYWNjZXB0KChuZXh0RXhwb3J0cykgPT4gewogICAgICBpZiAoIW5leHRFeHBvcnRzKSByZXR1cm47CiAgICAgIGNvbnN0IGludmFsaWRhdGVNZXNzYWdlID0gUmVmcmVzaFJ1bnRpbWUudmFsaWRhdGVSZWZyZXNoQm91bmRhcnlBbmRFbnF1ZXVlVXBkYXRlKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvaGVhZGVyL3VzZXItaGVhZGVyLnRzeCIsIGN1cnJlbnRFeHBvcnRzLCBuZXh0RXhwb3J0cyk7CiAgICAgIGlmIChpbnZhbGlkYXRlTWVzc2FnZSkgaW1wb3J0Lm1ldGEuaG90LmludmFsaWRhdGUoaW52YWxpZGF0ZU1lc3NhZ2UpOwogICAgfSk7CiAgfSk7Cn0KCi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnRZWEJ3YVc1bmN5STZJa0ZCYVVOUk96czdPenM3T3pzN096czdPenM3T3p0QlFXcERVaXhUUVVGVFFTeGhRVUZoUXl4WlFVRlpPMEZCUTJ4RExFOUJRVTlETEZsQlFWazdRVUZEYmtJc1UwRkJVME1zWlVGQlpUdEJRVU40UWl4VFFVRlRReXhsUVVGbE8wRkJWV3BDTEdGQlFVMURMR0ZCUVdGQkxFTkJRVU1zUlVGQlJVTXNXVUZCV1N4SFFVRnZRaXhOUVVGTk8wRkJRVUZETEV0QlFVRTdRVUZEYWtVc1VVRkJUU3hGUVVGRlF5eGhRVUZoUXl4UFFVRlBMRWxCUVVsTUxGRkJRVkU3UVVGRGVFTXNVVUZCVFUwc1YwRkJWMVlzV1VGQldUdEJRVVUzUWl4UlFVRk5WeXhsUVVGbExGbEJRVms3UVVGRkwwSXNWVUZCVFVNc1VVRkJVVU1zVVVGQlVVb3NUMEZCVHl4RFFVRkRPMEZCUnpsQ0xGVkJRVTFETEZOQlFWTXNVVUZCVVR0QlFVRkJMRVZCUTNwQ08wRkJSMEVzVFVGQlNTeERRVUZEUml4aFFVRmhPMEZCUTJoQ0xGZEJRVTg3UVVGQlFTeEZRVU5VTzBGQlJVRXNVMEZEUlN4MVFrRkJReXhYUVVGUkxGZEJRMUE3UVVGQlFTd3lRa0ZCUXl4aFFVTkRPMEZCUVVFc05rSkJRVU1zWVVGQlYwRXNjMEpCUVZsTkxGbEJRVmtzVlVGQmNFTTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRU3hoUVVFeVF6dEJRVUZCTEUxQlF6TkRMSFZDUVVGRExHMUNRVU5GVGl4elFrRkJXVThzYTBKQlFXdENMRFpDUVVScVF6dEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJMR0ZCUlVFN1FVRkJRU3hUUVVwR08wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRXNWMEZMUVR0QlFVRkJMRWxCUTBFc2RVSkJRVU1zWlVGRFF6dEJRVUZCTERaQ1FVRkRMRmxCUVZNc1NVRkJSeXhYUVVGVkxHVkJRVmtzWTBGQldTeHpRa0ZCTDBNN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFTeGhRVVZCTzBGQlFVRXNUVUZEUVN4MVFrRkJReXhaUVVGVExFbEJRVWNzWTBGQllTeGxRVUZaTEdsQ1FVRmxMSGxDUVVGeVJEdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJMR0ZCUlVFN1FVRkJRU3hOUVVOQkxIVkNRVUZETEdsQ1FVRmpMRk5CUVZOS0xHTkJRV01zWTBGQlZ5eFZRVUZSTEhOQ1FVRjZSRHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTEdGQlJVRTdRVUZCUVN4VFFWUkdPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUVzVjBGVlFUdEJRVUZCTEU5QmFrSkdPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUVzVTBGclFrRTdRVUZGU2p0QlFVRkRTaXhIUVhSRFdVWXNXVUZCVlR0QlFVRkJMRlZCUTFkRUxGTkJRMlpLTEZkQlFWYzdRVUZCUVR0QlFVRkJaMElzUzBGR2FrSllPMEZCZDBOaUxHVkJRV1ZCTzBGQlIyWXNUVUZCVFZrc1ZVRkJWV1lzVDBGQlQyZENPMEZCUVVGQk8wRkJRVUZCTzBGQlFVRkJPMEZCUVVGQk8wRkJRVUZCTzBGQlFVRkJPMEZCUVVGQk8wRkJRVUZCTzBGQlVYUkNReXhOUVZKTFJqdEJRVlZPTEUxQlFVMUhMR05CUVdOc1FpeFBRVUZQYlVJN1FVRkJRVUU3UVVGQlFVRTdRVUZCUVVFN1FVRkJRVUU3UVVGSk1VSkRMRTFCU2t0R08wRkJUVTRzVFVGQlRVY3NWMEZCVjNKQ0xFOUJRVTlFTEVsQlFVazdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRlpNMEoxUWl4TlFWcExSRHRCUVdOT0xFMUJRVTFGTEZsQlFWbDJRaXhQUVVGUGJVSTdRVUZCUVVFN1FVRkJRVUU3UVVGQlFVRTdRVUZCUVVFN1FVRkplRUpMTEUxQlNrdEVPMEZCVFU0c1RVRkJUVVVzV1VGQldYcENMRTlCUVU4d1FqdEJRVUZCUVR0QlFVRkJRVHRCUVVGQlFUdEJRVUZCUVR0QlFVRkJRVHRCUVV0NFFrTXNUVUZNUzBZN1FVRlBUaXhOUVVGTlJ5eHJRa0ZCYTBJMVFpeFBRVUZQTUVJN1FVRkJRVUU3UVVGQlFVRTdRVUZCUVVFN1FVRkJRVUU3UVVGSk9VSkhMRTFCU2t0RU8wRkJUVTRzVFVGQlRVVXNaMEpCUVdkQ09VSXNUMEZCVDBNc1QwRkJUenRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQllXNURPRUlzVFVGaVMwUTdRVUZCWVN4SlFVRkJhRUlzU1VGQlFVY3NTMEZCUVVjc1MwRkJRVVVzUzBGQlFVVXNTMEZCUVVjc1MwRkJRVVVzUzBGQlFVVTdRVUZCUVVNc1lVRkJRV3hDTEVsQlFVRTdRVUZCUVd0Q0xHRkJRVUZtTEV0QlFVRTdRVUZCUVdVc1lVRkJRVm9zUzBGQlFUdEJRVUZCV1N4aFFVRkJWaXhMUVVGQk8wRkJRVUZWTEdGQlFVRlNMRXRCUVVFN1FVRkJRVkVzWVVGQlFVd3NTMEZCUVR0QlFVRkJTeXhoUVVGQlNDeExRVUZCTzBGQlFVRkhMR0ZCUVVGRUxFdEJRVUVpTENKdVlXMWxjeUk2V3lKMWMyVk9ZWFpwWjJGMFpTSXNJa3hwYm1zaUxDSnpkSGxzWldRaUxDSlRRblYwZEc5dUlpd2lkWE5sUVhWMGFDSXNJbFZ6WlhKSVpXRmtaWElpTENKamJHRnpjMDVoYldVaUxDSmZjeUlzSW1OMWNuSmxiblJWYzJWeUlpd2liRzluYjNWMElpd2libUYyYVdkaGRHVWlMQ0pvWVc1a2JHVk1iMmR2ZFhRaUxDSlFjbTl0YVhObElpd2ljbVZ6YjJ4MlpTSXNJblZ6WlhKdVlXMWxJaXdpZFhObGNrbGtaVzUwYVdacFpYSWlMQ0pmWXlJc0lsTklaV0ZrWlhJaUxDSm9aV0ZrWlhJaUxDSmZZeklpTENKVFRtRjJhV2RoZEdsdmJpSXNJbVJwZGlJc0lsOWpNeUlzSWxOT1lYWk1hVzVySWl3aVgyTTBJaXdpVTFWelpYSkpibVp2SWl3aVgyTTFJaXdpVTFWelpYSk9ZVzFsSWl3aWMzQmhiaUlzSWw5ak5pSXNJbE5WYzJWeVNXUmxiblJwWm1sbGNpSXNJbDlqTnlJc0lsTk1iMmR2ZFhSQ2RYUjBiMjRpTENKZll6Z2lMQ0lrVW1WbWNtVnphRkpsWnlRaVhTd2lhV2R1YjNKbFRHbHpkQ0k2VzEwc0luTnZkWEpqWlhNaU9sc2lkWE5sY2kxb1pXRmtaWEl1ZEhONElsMHNJbk52ZFhKalpYTkRiMjUwWlc1MElqcGJJbWx0Y0c5eWRDQjdJSFZ6WlU1aGRtbG5ZWFJsTENCTWFXNXJJSDBnWm5KdmJTQW5jbVZoWTNRdGNtOTFkR1Z5TFdSdmJTZGNibWx0Y0c5eWRDQnpkSGxzWldRZ1puSnZiU0FuYzNSNWJHVmtMV052YlhCdmJtVnVkSE1uWEc1cGJYQnZjblFnZXlCVFFuVjBkRzl1SUgwZ1puSnZiU0FuTGk0dkxpNHZjM1I1YkdWekwzTjBlV3hsWkMxamIyMXdiMjVsYm5SekoxeHVhVzF3YjNKMElIc2dkWE5sUVhWMGFDQjlJR1p5YjIwZ0p5NHVMeTR1TDJodmIydHpMM1Z6WlMxaGRYUm9KMXh1WEc1MGVYQmxJRlZ6WlhKSVpXRmtaWEpRY205d2N5QTlJSHRjYmlBZ1kyeGhjM05PWVcxbFB6b2djM1J5YVc1blhHNTlYRzVjYmk4cUtseHVJQ29nU0dWaFpHVnlJR052YlhCdmJtVnVkQ0IwYUdGMElHUnBjM0JzWVhseklIUm9aU0JqZFhKeVpXNTBJSFZ6WlhJZ2FXNW1iM0p0WVhScGIyNGdZVzVrSUd4dloyOTFkQ0JpZFhSMGIyNWNiaUFxSUZWelpYTWdkR2hsSUhWelpVRjFkR2dnYUc5dmF5QjBieUJoWTJObGMzTWdkWE5sY2lCcGJtWnZjbTFoZEdsdmJpQmhibVFnYkc5bmIzVjBJR1oxYm1OMGFXOXVZV3hwZEhsY2JpQXFMMXh1Wlhod2IzSjBJR052Ym5OMElGVnpaWEpJWldGa1pYSWdQU0FvZXlCamJHRnpjMDVoYldVZ1BTQW5KeUI5T2lCVmMyVnlTR1ZoWkdWeVVISnZjSE1wSUQwK0lIdGNiaUFnWTI5dWMzUWdleUJqZFhKeVpXNTBWWE5sY2l3Z2JHOW5iM1YwSUgwZ1BTQjFjMlZCZFhSb0tDbGNiaUFnWTI5dWMzUWdibUYyYVdkaGRHVWdQU0IxYzJWT1lYWnBaMkYwWlNncFhHNWNiaUFnWTI5dWMzUWdhR0Z1Wkd4bFRHOW5iM1YwSUQwZ1lYTjVibU1nS0NrZ1BUNGdlMXh1SUNBZ0lDOHZJRU5oYkd3Z2JHOW5iM1YwSUdGdVpDQjNZV2wwSUdadmNpQmhibmtnY0c5MFpXNTBhV0ZzSUdGemVXNWpJRzl3WlhKaGRHbHZibk1nZEc4Z1kyOXRjR3hsZEdWY2JpQWdJQ0JoZDJGcGRDQlFjbTl0YVhObExuSmxjMjlzZG1Vb2JHOW5iM1YwS0NrcFhHNWNiaUFnSUNBdkx5QkJablJsY2lCMGIydGxibk1nWVhKbElHTnNaV0Z5WldRc0lHNWhkbWxuWVhSbElIUnZJR3h2WjJsdUlIQmhaMlZjYmlBZ0lDQmhkMkZwZENCdVlYWnBaMkYwWlNnbkwyeHZaMmx1SnlsY2JpQWdmVnh1WEc0Z0lDOHZJRVJ2YmlkMElISmxibVJsY2lCaGJubDBhR2x1WnlCcFppQnViM1FnWVhWMGFHVnVkR2xqWVhSbFpGeHVJQ0JwWmlBb0lXTjFjbkpsYm5SVmMyVnlLU0I3WEc0Z0lDQWdjbVYwZFhKdUlHNTFiR3hjYmlBZ2ZWeHVYRzRnSUhKbGRIVnliaUFvWEc0Z0lDQWdQRk5JWldGa1pYSWdZMnhoYzNOT1lXMWxQWHRqYkdGemMwNWhiV1Y5UGx4dUlDQWdJQ0FnUEZOVmMyVnlTVzVtYno1Y2JpQWdJQ0FnSUNBZ1BGTlZjMlZ5VG1GdFpUNTdZM1Z5Y21WdWRGVnpaWEl1ZFhObGNtNWhiV1VnZkh3Z0oxVnpaWEluZlR3dlUxVnpaWEpPWVcxbFBseHVJQ0FnSUNBZ0lDQThVMVZ6WlhKSlpHVnVkR2xtYVdWeVBseHVJQ0FnSUNBZ0lDQWdJSHRqZFhKeVpXNTBWWE5sY2k1MWMyVnlTV1JsYm5ScFptbGxjaUI4ZkNBblZXNXJibTkzYmlCVmMyVnlJRWxrWlc1MGFXWnBaWEluZlZ4dUlDQWdJQ0FnSUNBOEwxTlZjMlZ5U1dSbGJuUnBabWxsY2o1Y2JpQWdJQ0FnSUR3dlUxVnpaWEpKYm1adlBseHVJQ0FnSUNBZ1BGTk9ZWFpwWjJGMGFXOXVQbHh1SUNBZ0lDQWdJQ0E4VTA1aGRreHBibXNnZEc4OVhDSXZiVzkyYVdWelhDSWdaR0YwWVMxMFpYTjBhV1E5WENKdVlYWXRiVzkyYVdWelhDSStYRzRnSUNBZ0lDQWdJQ0FnVFc5MmFXVnpYRzRnSUNBZ0lDQWdJRHd2VTA1aGRreHBibXMrWEc0Z0lDQWdJQ0FnSUR4VFRtRjJUR2x1YXlCMGJ6MWNJaTlrYjNkdWJHOWhaSE5jSWlCa1lYUmhMWFJsYzNScFpEMWNJbTVoZGkxa2IzZHViRzloWkhOY0lqNWNiaUFnSUNBZ0lDQWdJQ0JFYjNkdWJHOWhaSE5jYmlBZ0lDQWdJQ0FnUEM5VFRtRjJUR2x1YXo1Y2JpQWdJQ0FnSUNBZ1BGTk1iMmR2ZFhSQ2RYUjBiMjRnYjI1RGJHbGphejE3YUdGdVpHeGxURzluYjNWMGZTQmhjbWxoTFd4aFltVnNQVndpVEc5bmIzVjBYQ0krWEc0Z0lDQWdJQ0FnSUNBZ1RHOW5iM1YwWEc0Z0lDQWdJQ0FnSUR3dlUweHZaMjkxZEVKMWRIUnZiajVjYmlBZ0lDQWdJRHd2VTA1aGRtbG5ZWFJwYjI0K1hHNGdJQ0FnUEM5VFNHVmhaR1Z5UGx4dUlDQXBYRzU5WEc1Y2JtVjRjRzl5ZENCa1pXWmhkV3gwSUZWelpYSklaV0ZrWlhKY2JseHVMeThnVTNSNWJHVmtJR052YlhCdmJtVnVkSE1nWm05eUlIUm9aU0JvWldGa1pYSmNibU52Ym5OMElGTklaV0ZrWlhJZ1BTQnpkSGxzWldRdWFHVmhaR1Z5WUZ4dUlDQmthWE53YkdGNU9pQm1iR1Y0TzF4dUlDQnFkWE4wYVdaNUxXTnZiblJsYm5RNklITndZV05sTFdKbGRIZGxaVzQ3WEc0Z0lHRnNhV2R1TFdsMFpXMXpPaUJqWlc1MFpYSTdYRzRnSUhCaFpHUnBibWM2SURBdU5YSmxiU0F4Y21WdE8xeHVJQ0JpWVdOclozSnZkVzVrTFdOdmJHOXlPaUFqTWpnek56UTNPeUF2S2lCQlpHcDFjM1JsWkNCMGJ5QnRZWFJqYUNCMGFHVWdjMk55WldWdWMyaHZkQ0FxTDF4dUlDQmpiMnh2Y2pvZ0kyWm1aanRjYmlBZ1ptOXVkQzFtWVcxcGJIazZJRlJwYldWekxDQnpaWEpwWmp0Y2JtQmNibHh1WTI5dWMzUWdVMDVoZG1sbllYUnBiMjRnUFNCemRIbHNaV1F1WkdsMllGeHVJQ0JrYVhOd2JHRjVPaUJtYkdWNE8xeHVJQ0JoYkdsbmJpMXBkR1Z0Y3pvZ1kyVnVkR1Z5TzF4dUlDQm5ZWEE2SURGeVpXMDdYRzVnWEc1Y2JtTnZibk4wSUZOT1lYWk1hVzVySUQwZ2MzUjViR1ZrS0V4cGJtc3BZRnh1SUNCamIyeHZjam9nSTJabVpqdGNiaUFnZEdWNGRDMWtaV052Y21GMGFXOXVPaUJ1YjI1bE8xeHVJQ0JtYjI1MExXWmhiV2xzZVRvZ1ZHbHRaWE1zSUhObGNtbG1PMXh1SUNCbWIyNTBMWE5wZW1VNklERnlaVzA3WEc0Z0lIQmhaR1JwYm1jNklEQXVNalZ5WlcwZ01DNDFjbVZ0TzF4dUlDQmliM0prWlhJdFltOTBkRzl0T2lBeWNIZ2djMjlzYVdRZ2RISmhibk53WVhKbGJuUTdYRzRnSUhSeVlXNXphWFJwYjI0NklHSnZjbVJsY2kxamIyeHZjaUF3TGpKeklHVmhjMlU3WEc1Y2JpQWdKanBvYjNabGNpQjdYRzRnSUNBZ1ltOXlaR1Z5TFdKdmRIUnZiUzFqYjJ4dmNqb2dJMlptWmp0Y2JpQWdmVnh1WUZ4dVhHNWpiMjV6ZENCVFZYTmxja2x1Wm04Z1BTQnpkSGxzWldRdVpHbDJZRnh1SUNCa2FYTndiR0Y1T2lCbWJHVjRPMXh1SUNCbWJHVjRMV1JwY21WamRHbHZiam9nWTI5c2RXMXVPMXh1SUNCaGJHbG5iaTFwZEdWdGN6b2dabXhsZUMxemRHRnlkRHRjYm1CY2JseHVZMjl1YzNRZ1UxVnpaWEpPWVcxbElEMGdjM1I1YkdWa0xuTndZVzVnWEc0Z0lHWnZiblF0ZDJWcFoyaDBPaUJ1YjNKdFlXdzdYRzRnSUdadmJuUXRjMmw2WlRvZ01YSmxiVHRjYmlBZ2JXRnlaMmx1TFdKdmRIUnZiVG9nTUM0eU5YSmxiVHRjYmlBZ1ptOXVkQzFtWVcxcGJIazZJRlJwYldWekxDQnpaWEpwWmp0Y2JtQmNibHh1WTI5dWMzUWdVMVZ6WlhKSlpHVnVkR2xtYVdWeUlEMGdjM1I1YkdWa0xuTndZVzVnWEc0Z0lHWnZiblF0YzJsNlpUb2dNQzQ0Y21WdE8xeHVJQ0J2Y0dGamFYUjVPaUF3TGpnN1hHNGdJR1p2Ym5RdFptRnRhV3g1T2lCVWFXMWxjeXdnYzJWeWFXWTdYRzVnWEc1Y2JtTnZibk4wSUZOTWIyZHZkWFJDZFhSMGIyNGdQU0J6ZEhsc1pXUW9VMEoxZEhSdmJpbGdYRzRnSUdKaFkydG5jbTkxYm1RdFkyOXNiM0k2SUNObVpqWXpORGM3WEc0Z0lHTnZiRzl5T2lBalptWm1PMXh1SUNCaWIzSmtaWEk2SUc1dmJtVTdYRzRnSUcxaGNtZHBiam9nTUR0Y2JpQWdjR0ZrWkdsdVp6b2dOWEI0SURFd2NIZzdYRzRnSUdadmJuUXRabUZ0YVd4NU9pQlVhVzFsY3l3Z2MyVnlhV1k3WEc0Z0lHSnZjbVJsY2kxeVlXUnBkWE02SURBN1hHNGdJR1p2Ym5RdGQyVnBaMmgwT2lCdWIzSnRZV3c3WEc1Y2JpQWdKanBvYjNabGNpQjdYRzRnSUNBZ1ltRmphMmR5YjNWdVpDMWpiMnh2Y2pvZ0kyVTFOVE16WkR0Y2JpQWdmVnh1WUZ4dUlsMHNJbVpwYkdVaU9pSXZWWE5sY25NdmJYVnlZWFF1YjNwallXNHZjMlZ2Ymk5d2JHRjVkM0pwWjJoMExYVjBhV3h6TDNOaGJYQnNaUzFoY0hBdlpuSnZiblJsYm1RdmMzSmpMMk52YlhCdmJtVnVkSE12YUdWaFpHVnlMM1Z6WlhJdGFHVmhaR1Z5TG5SemVDSjk=",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 13454
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 13,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.603Z",
        "time": 9,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/node_modules/.vite/deps/axios.js?v=0bb69d73",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/consumer.ts"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [
            {
              "name": "v",
              "value": "0bb69d73"
            }
          ],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "max-age=31536000,immutable"
            },
            {
              "name": "etag",
              "value": "W/\"14728-gmsTTwGGy/Drd8TAw0/UK1QfIiE\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "83752"
            }
          ],
          "content": {
            "size": 83752,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsKICBfX2V4cG9ydAp9IGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9jaHVuay00TUJNUklMQS5qcz92PTBiYjY5ZDczIjsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9iaW5kLmpzCmZ1bmN0aW9uIGJpbmQoZm4sIHRoaXNBcmcpIHsKICByZXR1cm4gZnVuY3Rpb24gd3JhcCgpIHsKICAgIHJldHVybiBmbi5hcHBseSh0aGlzQXJnLCBhcmd1bWVudHMpOwogIH07Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvdXRpbHMuanMKdmFyIHsgdG9TdHJpbmcgfSA9IE9iamVjdC5wcm90b3R5cGU7CnZhciB7IGdldFByb3RvdHlwZU9mIH0gPSBPYmplY3Q7CnZhciB7IGl0ZXJhdG9yLCB0b1N0cmluZ1RhZyB9ID0gU3ltYm9sOwp2YXIga2luZE9mID0gLyogQF9fUFVSRV9fICovICgoY2FjaGUpID0+ICh0aGluZykgPT4gewogIGNvbnN0IHN0ciA9IHRvU3RyaW5nLmNhbGwodGhpbmcpOwogIHJldHVybiBjYWNoZVtzdHJdIHx8IChjYWNoZVtzdHJdID0gc3RyLnNsaWNlKDgsIC0xKS50b0xvd2VyQ2FzZSgpKTsKfSkoLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCkpOwp2YXIga2luZE9mVGVzdCA9ICh0eXBlKSA9PiB7CiAgdHlwZSA9IHR5cGUudG9Mb3dlckNhc2UoKTsKICByZXR1cm4gKHRoaW5nKSA9PiBraW5kT2YodGhpbmcpID09PSB0eXBlOwp9Owp2YXIgdHlwZU9mVGVzdCA9ICh0eXBlKSA9PiAodGhpbmcpID0+IHR5cGVvZiB0aGluZyA9PT0gdHlwZTsKdmFyIHsgaXNBcnJheSB9ID0gQXJyYXk7CnZhciBpc1VuZGVmaW5lZCA9IHR5cGVPZlRlc3QoInVuZGVmaW5lZCIpOwpmdW5jdGlvbiBpc0J1ZmZlcih2YWwpIHsKICByZXR1cm4gdmFsICE9PSBudWxsICYmICFpc1VuZGVmaW5lZCh2YWwpICYmIHZhbC5jb25zdHJ1Y3RvciAhPT0gbnVsbCAmJiAhaXNVbmRlZmluZWQodmFsLmNvbnN0cnVjdG9yKSAmJiBpc0Z1bmN0aW9uKHZhbC5jb25zdHJ1Y3Rvci5pc0J1ZmZlcikgJiYgdmFsLmNvbnN0cnVjdG9yLmlzQnVmZmVyKHZhbCk7Cn0KdmFyIGlzQXJyYXlCdWZmZXIgPSBraW5kT2ZUZXN0KCJBcnJheUJ1ZmZlciIpOwpmdW5jdGlvbiBpc0FycmF5QnVmZmVyVmlldyh2YWwpIHsKICBsZXQgcmVzdWx0OwogIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICJ1bmRlZmluZWQiICYmIEFycmF5QnVmZmVyLmlzVmlldykgewogICAgcmVzdWx0ID0gQXJyYXlCdWZmZXIuaXNWaWV3KHZhbCk7CiAgfSBlbHNlIHsKICAgIHJlc3VsdCA9IHZhbCAmJiB2YWwuYnVmZmVyICYmIGlzQXJyYXlCdWZmZXIodmFsLmJ1ZmZlcik7CiAgfQogIHJldHVybiByZXN1bHQ7Cn0KdmFyIGlzU3RyaW5nID0gdHlwZU9mVGVzdCgic3RyaW5nIik7CnZhciBpc0Z1bmN0aW9uID0gdHlwZU9mVGVzdCgiZnVuY3Rpb24iKTsKdmFyIGlzTnVtYmVyID0gdHlwZU9mVGVzdCgibnVtYmVyIik7CnZhciBpc09iamVjdCA9ICh0aGluZykgPT4gdGhpbmcgIT09IG51bGwgJiYgdHlwZW9mIHRoaW5nID09PSAib2JqZWN0IjsKdmFyIGlzQm9vbGVhbiA9ICh0aGluZykgPT4gdGhpbmcgPT09IHRydWUgfHwgdGhpbmcgPT09IGZhbHNlOwp2YXIgaXNQbGFpbk9iamVjdCA9ICh2YWwpID0+IHsKICBpZiAoa2luZE9mKHZhbCkgIT09ICJvYmplY3QiKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIGNvbnN0IHByb3RvdHlwZTMgPSBnZXRQcm90b3R5cGVPZih2YWwpOwogIHJldHVybiAocHJvdG90eXBlMyA9PT0gbnVsbCB8fCBwcm90b3R5cGUzID09PSBPYmplY3QucHJvdG90eXBlIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90b3R5cGUzKSA9PT0gbnVsbCkgJiYgISh0b1N0cmluZ1RhZyBpbiB2YWwpICYmICEoaXRlcmF0b3IgaW4gdmFsKTsKfTsKdmFyIGlzRW1wdHlPYmplY3QgPSAodmFsKSA9PiB7CiAgaWYgKCFpc09iamVjdCh2YWwpIHx8IGlzQnVmZmVyKHZhbCkpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgdHJ5IHsKICAgIHJldHVybiBPYmplY3Qua2V5cyh2YWwpLmxlbmd0aCA9PT0gMCAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsKSA9PT0gT2JqZWN0LnByb3RvdHlwZTsKICB9IGNhdGNoIChlKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQp9Owp2YXIgaXNEYXRlID0ga2luZE9mVGVzdCgiRGF0ZSIpOwp2YXIgaXNGaWxlID0ga2luZE9mVGVzdCgiRmlsZSIpOwp2YXIgaXNCbG9iID0ga2luZE9mVGVzdCgiQmxvYiIpOwp2YXIgaXNGaWxlTGlzdCA9IGtpbmRPZlRlc3QoIkZpbGVMaXN0Iik7CnZhciBpc1N0cmVhbSA9ICh2YWwpID0+IGlzT2JqZWN0KHZhbCkgJiYgaXNGdW5jdGlvbih2YWwucGlwZSk7CnZhciBpc0Zvcm1EYXRhID0gKHRoaW5nKSA9PiB7CiAgbGV0IGtpbmQ7CiAgcmV0dXJuIHRoaW5nICYmICh0eXBlb2YgRm9ybURhdGEgPT09ICJmdW5jdGlvbiIgJiYgdGhpbmcgaW5zdGFuY2VvZiBGb3JtRGF0YSB8fCBpc0Z1bmN0aW9uKHRoaW5nLmFwcGVuZCkgJiYgKChraW5kID0ga2luZE9mKHRoaW5nKSkgPT09ICJmb3JtZGF0YSIgfHwgLy8gZGV0ZWN0IGZvcm0tZGF0YSBpbnN0YW5jZQogIGtpbmQgPT09ICJvYmplY3QiICYmIGlzRnVuY3Rpb24odGhpbmcudG9TdHJpbmcpICYmIHRoaW5nLnRvU3RyaW5nKCkgPT09ICJbb2JqZWN0IEZvcm1EYXRhXSIpKTsKfTsKdmFyIGlzVVJMU2VhcmNoUGFyYW1zID0ga2luZE9mVGVzdCgiVVJMU2VhcmNoUGFyYW1zIik7CnZhciBbaXNSZWFkYWJsZVN0cmVhbSwgaXNSZXF1ZXN0LCBpc1Jlc3BvbnNlLCBpc0hlYWRlcnNdID0gWyJSZWFkYWJsZVN0cmVhbSIsICJSZXF1ZXN0IiwgIlJlc3BvbnNlIiwgIkhlYWRlcnMiXS5tYXAoa2luZE9mVGVzdCk7CnZhciB0cmltID0gKHN0cikgPT4gc3RyLnRyaW0gPyBzdHIudHJpbSgpIDogc3RyLnJlcGxhY2UoL15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nLCAiIik7CmZ1bmN0aW9uIGZvckVhY2gob2JqLCBmbiwgeyBhbGxPd25LZXlzID0gZmFsc2UgfSA9IHt9KSB7CiAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqID09PSAidW5kZWZpbmVkIikgewogICAgcmV0dXJuOwogIH0KICBsZXQgaTsKICBsZXQgbDsKICBpZiAodHlwZW9mIG9iaiAhPT0gIm9iamVjdCIpIHsKICAgIG9iaiA9IFtvYmpdOwogIH0KICBpZiAoaXNBcnJheShvYmopKSB7CiAgICBmb3IgKGkgPSAwLCBsID0gb2JqLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBmbi5jYWxsKG51bGwsIG9ialtpXSwgaSwgb2JqKTsKICAgIH0KICB9IGVsc2UgewogICAgaWYgKGlzQnVmZmVyKG9iaikpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgY29uc3Qga2V5cyA9IGFsbE93bktleXMgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvYmopIDogT2JqZWN0LmtleXMob2JqKTsKICAgIGNvbnN0IGxlbiA9IGtleXMubGVuZ3RoOwogICAgbGV0IGtleTsKICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICBrZXkgPSBrZXlzW2ldOwogICAgICBmbi5jYWxsKG51bGwsIG9ialtrZXldLCBrZXksIG9iaik7CiAgICB9CiAgfQp9CmZ1bmN0aW9uIGZpbmRLZXkob2JqLCBrZXkpIHsKICBpZiAoaXNCdWZmZXIob2JqKSkgewogICAgcmV0dXJuIG51bGw7CiAgfQogIGtleSA9IGtleS50b0xvd2VyQ2FzZSgpOwogIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhvYmopOwogIGxldCBpID0ga2V5cy5sZW5ndGg7CiAgbGV0IF9rZXk7CiAgd2hpbGUgKGktLSA+IDApIHsKICAgIF9rZXkgPSBrZXlzW2ldOwogICAgaWYgKGtleSA9PT0gX2tleS50b0xvd2VyQ2FzZSgpKSB7CiAgICAgIHJldHVybiBfa2V5OwogICAgfQogIH0KICByZXR1cm4gbnVsbDsKfQp2YXIgX2dsb2JhbCA9ICgoKSA9PiB7CiAgaWYgKHR5cGVvZiBnbG9iYWxUaGlzICE9PSAidW5kZWZpbmVkIikgcmV0dXJuIGdsb2JhbFRoaXM7CiAgcmV0dXJuIHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IGdsb2JhbDsKfSkoKTsKdmFyIGlzQ29udGV4dERlZmluZWQgPSAoY29udGV4dCkgPT4gIWlzVW5kZWZpbmVkKGNvbnRleHQpICYmIGNvbnRleHQgIT09IF9nbG9iYWw7CmZ1bmN0aW9uIG1lcmdlKCkgewogIGNvbnN0IHsgY2FzZWxlc3MsIHNraXBVbmRlZmluZWQgfSA9IGlzQ29udGV4dERlZmluZWQodGhpcykgJiYgdGhpcyB8fCB7fTsKICBjb25zdCByZXN1bHQgPSB7fTsKICBjb25zdCBhc3NpZ25WYWx1ZSA9ICh2YWwsIGtleSkgPT4gewogICAgY29uc3QgdGFyZ2V0S2V5ID0gY2FzZWxlc3MgJiYgZmluZEtleShyZXN1bHQsIGtleSkgfHwga2V5OwogICAgaWYgKGlzUGxhaW5PYmplY3QocmVzdWx0W3RhcmdldEtleV0pICYmIGlzUGxhaW5PYmplY3QodmFsKSkgewogICAgICByZXN1bHRbdGFyZ2V0S2V5XSA9IG1lcmdlKHJlc3VsdFt0YXJnZXRLZXldLCB2YWwpOwogICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbCkpIHsKICAgICAgcmVzdWx0W3RhcmdldEtleV0gPSBtZXJnZSh7fSwgdmFsKTsKICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWwpKSB7CiAgICAgIHJlc3VsdFt0YXJnZXRLZXldID0gdmFsLnNsaWNlKCk7CiAgICB9IGVsc2UgaWYgKCFza2lwVW5kZWZpbmVkIHx8ICFpc1VuZGVmaW5lZCh2YWwpKSB7CiAgICAgIHJlc3VsdFt0YXJnZXRLZXldID0gdmFsOwogICAgfQogIH07CiAgZm9yIChsZXQgaSA9IDAsIGwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICBhcmd1bWVudHNbaV0gJiYgZm9yRWFjaChhcmd1bWVudHNbaV0sIGFzc2lnblZhbHVlKTsKICB9CiAgcmV0dXJuIHJlc3VsdDsKfQp2YXIgZXh0ZW5kID0gKGEsIGIsIHRoaXNBcmcsIHsgYWxsT3duS2V5cyB9ID0ge30pID0+IHsKICBmb3JFYWNoKGIsICh2YWwsIGtleSkgPT4gewogICAgaWYgKHRoaXNBcmcgJiYgaXNGdW5jdGlvbih2YWwpKSB7CiAgICAgIGFba2V5XSA9IGJpbmQodmFsLCB0aGlzQXJnKTsKICAgIH0gZWxzZSB7CiAgICAgIGFba2V5XSA9IHZhbDsKICAgIH0KICB9LCB7IGFsbE93bktleXMgfSk7CiAgcmV0dXJuIGE7Cn07CnZhciBzdHJpcEJPTSA9IChjb250ZW50KSA9PiB7CiAgaWYgKGNvbnRlbnQuY2hhckNvZGVBdCgwKSA9PT0gNjUyNzkpIHsKICAgIGNvbnRlbnQgPSBjb250ZW50LnNsaWNlKDEpOwogIH0KICByZXR1cm4gY29udGVudDsKfTsKdmFyIGluaGVyaXRzID0gKGNvbnN0cnVjdG9yLCBzdXBlckNvbnN0cnVjdG9yLCBwcm9wcywgZGVzY3JpcHRvcnMyKSA9PiB7CiAgY29uc3RydWN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNvbnN0cnVjdG9yLnByb3RvdHlwZSwgZGVzY3JpcHRvcnMyKTsKICBjb25zdHJ1Y3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjb25zdHJ1Y3RvcjsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29uc3RydWN0b3IsICJzdXBlciIsIHsKICAgIHZhbHVlOiBzdXBlckNvbnN0cnVjdG9yLnByb3RvdHlwZQogIH0pOwogIHByb3BzICYmIE9iamVjdC5hc3NpZ24oY29uc3RydWN0b3IucHJvdG90eXBlLCBwcm9wcyk7Cn07CnZhciB0b0ZsYXRPYmplY3QgPSAoc291cmNlT2JqLCBkZXN0T2JqLCBmaWx0ZXIyLCBwcm9wRmlsdGVyKSA9PiB7CiAgbGV0IHByb3BzOwogIGxldCBpOwogIGxldCBwcm9wOwogIGNvbnN0IG1lcmdlZCA9IHt9OwogIGRlc3RPYmogPSBkZXN0T2JqIHx8IHt9OwogIGlmIChzb3VyY2VPYmogPT0gbnVsbCkgcmV0dXJuIGRlc3RPYmo7CiAgZG8gewogICAgcHJvcHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhzb3VyY2VPYmopOwogICAgaSA9IHByb3BzLmxlbmd0aDsKICAgIHdoaWxlIChpLS0gPiAwKSB7CiAgICAgIHByb3AgPSBwcm9wc1tpXTsKICAgICAgaWYgKCghcHJvcEZpbHRlciB8fCBwcm9wRmlsdGVyKHByb3AsIHNvdXJjZU9iaiwgZGVzdE9iaikpICYmICFtZXJnZWRbcHJvcF0pIHsKICAgICAgICBkZXN0T2JqW3Byb3BdID0gc291cmNlT2JqW3Byb3BdOwogICAgICAgIG1lcmdlZFtwcm9wXSA9IHRydWU7CiAgICAgIH0KICAgIH0KICAgIHNvdXJjZU9iaiA9IGZpbHRlcjIgIT09IGZhbHNlICYmIGdldFByb3RvdHlwZU9mKHNvdXJjZU9iaik7CiAgfSB3aGlsZSAoc291cmNlT2JqICYmICghZmlsdGVyMiB8fCBmaWx0ZXIyKHNvdXJjZU9iaiwgZGVzdE9iaikpICYmIHNvdXJjZU9iaiAhPT0gT2JqZWN0LnByb3RvdHlwZSk7CiAgcmV0dXJuIGRlc3RPYmo7Cn07CnZhciBlbmRzV2l0aCA9IChzdHIsIHNlYXJjaFN0cmluZywgcG9zaXRpb24pID0+IHsKICBzdHIgPSBTdHJpbmcoc3RyKTsKICBpZiAocG9zaXRpb24gPT09IHZvaWQgMCB8fCBwb3NpdGlvbiA+IHN0ci5sZW5ndGgpIHsKICAgIHBvc2l0aW9uID0gc3RyLmxlbmd0aDsKICB9CiAgcG9zaXRpb24gLT0gc2VhcmNoU3RyaW5nLmxlbmd0aDsKICBjb25zdCBsYXN0SW5kZXggPSBzdHIuaW5kZXhPZihzZWFyY2hTdHJpbmcsIHBvc2l0aW9uKTsKICByZXR1cm4gbGFzdEluZGV4ICE9PSAtMSAmJiBsYXN0SW5kZXggPT09IHBvc2l0aW9uOwp9Owp2YXIgdG9BcnJheSA9ICh0aGluZykgPT4gewogIGlmICghdGhpbmcpIHJldHVybiBudWxsOwogIGlmIChpc0FycmF5KHRoaW5nKSkgcmV0dXJuIHRoaW5nOwogIGxldCBpID0gdGhpbmcubGVuZ3RoOwogIGlmICghaXNOdW1iZXIoaSkpIHJldHVybiBudWxsOwogIGNvbnN0IGFyciA9IG5ldyBBcnJheShpKTsKICB3aGlsZSAoaS0tID4gMCkgewogICAgYXJyW2ldID0gdGhpbmdbaV07CiAgfQogIHJldHVybiBhcnI7Cn07CnZhciBpc1R5cGVkQXJyYXkgPSAvKiBAX19QVVJFX18gKi8gKChUeXBlZEFycmF5KSA9PiB7CiAgcmV0dXJuICh0aGluZykgPT4gewogICAgcmV0dXJuIFR5cGVkQXJyYXkgJiYgdGhpbmcgaW5zdGFuY2VvZiBUeXBlZEFycmF5OwogIH07Cn0pKHR5cGVvZiBVaW50OEFycmF5ICE9PSAidW5kZWZpbmVkIiAmJiBnZXRQcm90b3R5cGVPZihVaW50OEFycmF5KSk7CnZhciBmb3JFYWNoRW50cnkgPSAob2JqLCBmbikgPT4gewogIGNvbnN0IGdlbmVyYXRvciA9IG9iaiAmJiBvYmpbaXRlcmF0b3JdOwogIGNvbnN0IF9pdGVyYXRvciA9IGdlbmVyYXRvci5jYWxsKG9iaik7CiAgbGV0IHJlc3VsdDsKICB3aGlsZSAoKHJlc3VsdCA9IF9pdGVyYXRvci5uZXh0KCkpICYmICFyZXN1bHQuZG9uZSkgewogICAgY29uc3QgcGFpciA9IHJlc3VsdC52YWx1ZTsKICAgIGZuLmNhbGwob2JqLCBwYWlyWzBdLCBwYWlyWzFdKTsKICB9Cn07CnZhciBtYXRjaEFsbCA9IChyZWdFeHAsIHN0cikgPT4gewogIGxldCBtYXRjaGVzOwogIGNvbnN0IGFyciA9IFtdOwogIHdoaWxlICgobWF0Y2hlcyA9IHJlZ0V4cC5leGVjKHN0cikpICE9PSBudWxsKSB7CiAgICBhcnIucHVzaChtYXRjaGVzKTsKICB9CiAgcmV0dXJuIGFycjsKfTsKdmFyIGlzSFRNTEZvcm0gPSBraW5kT2ZUZXN0KCJIVE1MRm9ybUVsZW1lbnQiKTsKdmFyIHRvQ2FtZWxDYXNlID0gKHN0cikgPT4gewogIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKS5yZXBsYWNlKAogICAgL1stX1xzXShbYS16XGRdKShcdyopL2csCiAgICBmdW5jdGlvbiByZXBsYWNlcihtLCBwMSwgcDIpIHsKICAgICAgcmV0dXJuIHAxLnRvVXBwZXJDYXNlKCkgKyBwMjsKICAgIH0KICApOwp9Owp2YXIgaGFzT3duUHJvcGVydHkgPSAoKHsgaGFzT3duUHJvcGVydHk6IGhhc093blByb3BlcnR5MiB9KSA9PiAob2JqLCBwcm9wKSA9PiBoYXNPd25Qcm9wZXJ0eTIuY2FsbChvYmosIHByb3ApKShPYmplY3QucHJvdG90eXBlKTsKdmFyIGlzUmVnRXhwID0ga2luZE9mVGVzdCgiUmVnRXhwIik7CnZhciByZWR1Y2VEZXNjcmlwdG9ycyA9IChvYmosIHJlZHVjZXIpID0+IHsKICBjb25zdCBkZXNjcmlwdG9yczIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhvYmopOwogIGNvbnN0IHJlZHVjZWREZXNjcmlwdG9ycyA9IHt9OwogIGZvckVhY2goZGVzY3JpcHRvcnMyLCAoZGVzY3JpcHRvciwgbmFtZSkgPT4gewogICAgbGV0IHJldDsKICAgIGlmICgocmV0ID0gcmVkdWNlcihkZXNjcmlwdG9yLCBuYW1lLCBvYmopKSAhPT0gZmFsc2UpIHsKICAgICAgcmVkdWNlZERlc2NyaXB0b3JzW25hbWVdID0gcmV0IHx8IGRlc2NyaXB0b3I7CiAgICB9CiAgfSk7CiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCByZWR1Y2VkRGVzY3JpcHRvcnMpOwp9Owp2YXIgZnJlZXplTWV0aG9kcyA9IChvYmopID0+IHsKICByZWR1Y2VEZXNjcmlwdG9ycyhvYmosIChkZXNjcmlwdG9yLCBuYW1lKSA9PiB7CiAgICBpZiAoaXNGdW5jdGlvbihvYmopICYmIFsiYXJndW1lbnRzIiwgImNhbGxlciIsICJjYWxsZWUiXS5pbmRleE9mKG5hbWUpICE9PSAtMSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBjb25zdCB2YWx1ZSA9IG9ialtuYW1lXTsKICAgIGlmICghaXNGdW5jdGlvbih2YWx1ZSkpIHJldHVybjsKICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGZhbHNlOwogICAgaWYgKCJ3cml0YWJsZSIgaW4gZGVzY3JpcHRvcikgewogICAgICBkZXNjcmlwdG9yLndyaXRhYmxlID0gZmFsc2U7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICghZGVzY3JpcHRvci5zZXQpIHsKICAgICAgZGVzY3JpcHRvci5zZXQgPSAoKSA9PiB7CiAgICAgICAgdGhyb3cgRXJyb3IoIkNhbiBub3QgcmV3cml0ZSByZWFkLW9ubHkgbWV0aG9kICciICsgbmFtZSArICInIik7CiAgICAgIH07CiAgICB9CiAgfSk7Cn07CnZhciB0b09iamVjdFNldCA9IChhcnJheU9yU3RyaW5nLCBkZWxpbWl0ZXIpID0+IHsKICBjb25zdCBvYmogPSB7fTsKICBjb25zdCBkZWZpbmUgPSAoYXJyKSA9PiB7CiAgICBhcnIuZm9yRWFjaCgodmFsdWUpID0+IHsKICAgICAgb2JqW3ZhbHVlXSA9IHRydWU7CiAgICB9KTsKICB9OwogIGlzQXJyYXkoYXJyYXlPclN0cmluZykgPyBkZWZpbmUoYXJyYXlPclN0cmluZykgOiBkZWZpbmUoU3RyaW5nKGFycmF5T3JTdHJpbmcpLnNwbGl0KGRlbGltaXRlcikpOwogIHJldHVybiBvYmo7Cn07CnZhciBub29wID0gKCkgPT4gewp9Owp2YXIgdG9GaW5pdGVOdW1iZXIgPSAodmFsdWUsIGRlZmF1bHRWYWx1ZSkgPT4gewogIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIE51bWJlci5pc0Zpbml0ZSh2YWx1ZSA9ICt2YWx1ZSkgPyB2YWx1ZSA6IGRlZmF1bHRWYWx1ZTsKfTsKZnVuY3Rpb24gaXNTcGVjQ29tcGxpYW50Rm9ybSh0aGluZykgewogIHJldHVybiAhISh0aGluZyAmJiBpc0Z1bmN0aW9uKHRoaW5nLmFwcGVuZCkgJiYgdGhpbmdbdG9TdHJpbmdUYWddID09PSAiRm9ybURhdGEiICYmIHRoaW5nW2l0ZXJhdG9yXSk7Cn0KdmFyIHRvSlNPTk9iamVjdCA9IChvYmopID0+IHsKICBjb25zdCBzdGFjayA9IG5ldyBBcnJheSgxMCk7CiAgY29uc3QgdmlzaXQgPSAoc291cmNlLCBpKSA9PiB7CiAgICBpZiAoaXNPYmplY3Qoc291cmNlKSkgewogICAgICBpZiAoc3RhY2suaW5kZXhPZihzb3VyY2UpID49IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKGlzQnVmZmVyKHNvdXJjZSkpIHsKICAgICAgICByZXR1cm4gc291cmNlOwogICAgICB9CiAgICAgIGlmICghKCJ0b0pTT04iIGluIHNvdXJjZSkpIHsKICAgICAgICBzdGFja1tpXSA9IHNvdXJjZTsKICAgICAgICBjb25zdCB0YXJnZXQgPSBpc0FycmF5KHNvdXJjZSkgPyBbXSA6IHt9OwogICAgICAgIGZvckVhY2goc291cmNlLCAodmFsdWUsIGtleSkgPT4gewogICAgICAgICAgY29uc3QgcmVkdWNlZFZhbHVlID0gdmlzaXQodmFsdWUsIGkgKyAxKTsKICAgICAgICAgICFpc1VuZGVmaW5lZChyZWR1Y2VkVmFsdWUpICYmICh0YXJnZXRba2V5XSA9IHJlZHVjZWRWYWx1ZSk7CiAgICAgICAgfSk7CiAgICAgICAgc3RhY2tbaV0gPSB2b2lkIDA7CiAgICAgICAgcmV0dXJuIHRhcmdldDsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHNvdXJjZTsKICB9OwogIHJldHVybiB2aXNpdChvYmosIDApOwp9Owp2YXIgaXNBc3luY0ZuID0ga2luZE9mVGVzdCgiQXN5bmNGdW5jdGlvbiIpOwp2YXIgaXNUaGVuYWJsZSA9ICh0aGluZykgPT4gdGhpbmcgJiYgKGlzT2JqZWN0KHRoaW5nKSB8fCBpc0Z1bmN0aW9uKHRoaW5nKSkgJiYgaXNGdW5jdGlvbih0aGluZy50aGVuKSAmJiBpc0Z1bmN0aW9uKHRoaW5nLmNhdGNoKTsKdmFyIF9zZXRJbW1lZGlhdGUgPSAoKHNldEltbWVkaWF0ZVN1cHBvcnRlZCwgcG9zdE1lc3NhZ2VTdXBwb3J0ZWQpID0+IHsKICBpZiAoc2V0SW1tZWRpYXRlU3VwcG9ydGVkKSB7CiAgICByZXR1cm4gc2V0SW1tZWRpYXRlOwogIH0KICByZXR1cm4gcG9zdE1lc3NhZ2VTdXBwb3J0ZWQgPyAoKHRva2VuLCBjYWxsYmFja3MpID0+IHsKICAgIF9nbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsICh7IHNvdXJjZSwgZGF0YSB9KSA9PiB7CiAgICAgIGlmIChzb3VyY2UgPT09IF9nbG9iYWwgJiYgZGF0YSA9PT0gdG9rZW4pIHsKICAgICAgICBjYWxsYmFja3MubGVuZ3RoICYmIGNhbGxiYWNrcy5zaGlmdCgpKCk7CiAgICAgIH0KICAgIH0sIGZhbHNlKTsKICAgIHJldHVybiAoY2IpID0+IHsKICAgICAgY2FsbGJhY2tzLnB1c2goY2IpOwogICAgICBfZ2xvYmFsLnBvc3RNZXNzYWdlKHRva2VuLCAiKiIpOwogICAgfTsKICB9KShgYXhpb3NAJHtNYXRoLnJhbmRvbSgpfWAsIFtdKSA6IChjYikgPT4gc2V0VGltZW91dChjYik7Cn0pKAogIHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09ICJmdW5jdGlvbiIsCiAgaXNGdW5jdGlvbihfZ2xvYmFsLnBvc3RNZXNzYWdlKQopOwp2YXIgYXNhcCA9IHR5cGVvZiBxdWV1ZU1pY3JvdGFzayAhPT0gInVuZGVmaW5lZCIgPyBxdWV1ZU1pY3JvdGFzay5iaW5kKF9nbG9iYWwpIDogdHlwZW9mIHByb2Nlc3MgIT09ICJ1bmRlZmluZWQiICYmIHByb2Nlc3MubmV4dFRpY2sgfHwgX3NldEltbWVkaWF0ZTsKdmFyIGlzSXRlcmFibGUgPSAodGhpbmcpID0+IHRoaW5nICE9IG51bGwgJiYgaXNGdW5jdGlvbih0aGluZ1tpdGVyYXRvcl0pOwp2YXIgdXRpbHNfZGVmYXVsdCA9IHsKICBpc0FycmF5LAogIGlzQXJyYXlCdWZmZXIsCiAgaXNCdWZmZXIsCiAgaXNGb3JtRGF0YSwKICBpc0FycmF5QnVmZmVyVmlldywKICBpc1N0cmluZywKICBpc051bWJlciwKICBpc0Jvb2xlYW4sCiAgaXNPYmplY3QsCiAgaXNQbGFpbk9iamVjdCwKICBpc0VtcHR5T2JqZWN0LAogIGlzUmVhZGFibGVTdHJlYW0sCiAgaXNSZXF1ZXN0LAogIGlzUmVzcG9uc2UsCiAgaXNIZWFkZXJzLAogIGlzVW5kZWZpbmVkLAogIGlzRGF0ZSwKICBpc0ZpbGUsCiAgaXNCbG9iLAogIGlzUmVnRXhwLAogIGlzRnVuY3Rpb24sCiAgaXNTdHJlYW0sCiAgaXNVUkxTZWFyY2hQYXJhbXMsCiAgaXNUeXBlZEFycmF5LAogIGlzRmlsZUxpc3QsCiAgZm9yRWFjaCwKICBtZXJnZSwKICBleHRlbmQsCiAgdHJpbSwKICBzdHJpcEJPTSwKICBpbmhlcml0cywKICB0b0ZsYXRPYmplY3QsCiAga2luZE9mLAogIGtpbmRPZlRlc3QsCiAgZW5kc1dpdGgsCiAgdG9BcnJheSwKICBmb3JFYWNoRW50cnksCiAgbWF0Y2hBbGwsCiAgaXNIVE1MRm9ybSwKICBoYXNPd25Qcm9wZXJ0eSwKICBoYXNPd25Qcm9wOiBoYXNPd25Qcm9wZXJ0eSwKICAvLyBhbiBhbGlhcyB0byBhdm9pZCBFU0xpbnQgbm8tcHJvdG90eXBlLWJ1aWx0aW5zIGRldGVjdGlvbgogIHJlZHVjZURlc2NyaXB0b3JzLAogIGZyZWV6ZU1ldGhvZHMsCiAgdG9PYmplY3RTZXQsCiAgdG9DYW1lbENhc2UsCiAgbm9vcCwKICB0b0Zpbml0ZU51bWJlciwKICBmaW5kS2V5LAogIGdsb2JhbDogX2dsb2JhbCwKICBpc0NvbnRleHREZWZpbmVkLAogIGlzU3BlY0NvbXBsaWFudEZvcm0sCiAgdG9KU09OT2JqZWN0LAogIGlzQXN5bmNGbiwKICBpc1RoZW5hYmxlLAogIHNldEltbWVkaWF0ZTogX3NldEltbWVkaWF0ZSwKICBhc2FwLAogIGlzSXRlcmFibGUKfTsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9BeGlvc0Vycm9yLmpzCmZ1bmN0aW9uIEF4aW9zRXJyb3IobWVzc2FnZSwgY29kZSwgY29uZmlnLCByZXF1ZXN0LCByZXNwb25zZSkgewogIEVycm9yLmNhbGwodGhpcyk7CiAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7CiAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTsKICB9IGVsc2UgewogICAgdGhpcy5zdGFjayA9IG5ldyBFcnJvcigpLnN0YWNrOwogIH0KICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOwogIHRoaXMubmFtZSA9ICJBeGlvc0Vycm9yIjsKICBjb2RlICYmICh0aGlzLmNvZGUgPSBjb2RlKTsKICBjb25maWcgJiYgKHRoaXMuY29uZmlnID0gY29uZmlnKTsKICByZXF1ZXN0ICYmICh0aGlzLnJlcXVlc3QgPSByZXF1ZXN0KTsKICBpZiAocmVzcG9uc2UpIHsKICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTsKICAgIHRoaXMuc3RhdHVzID0gcmVzcG9uc2Uuc3RhdHVzID8gcmVzcG9uc2Uuc3RhdHVzIDogbnVsbDsKICB9Cn0KdXRpbHNfZGVmYXVsdC5pbmhlcml0cyhBeGlvc0Vycm9yLCBFcnJvciwgewogIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8gU3RhbmRhcmQKICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLAogICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgIC8vIE1pY3Jvc29mdAogICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbiwKICAgICAgbnVtYmVyOiB0aGlzLm51bWJlciwKICAgICAgLy8gTW96aWxsYQogICAgICBmaWxlTmFtZTogdGhpcy5maWxlTmFtZSwKICAgICAgbGluZU51bWJlcjogdGhpcy5saW5lTnVtYmVyLAogICAgICBjb2x1bW5OdW1iZXI6IHRoaXMuY29sdW1uTnVtYmVyLAogICAgICBzdGFjazogdGhpcy5zdGFjaywKICAgICAgLy8gQXhpb3MKICAgICAgY29uZmlnOiB1dGlsc19kZWZhdWx0LnRvSlNPTk9iamVjdCh0aGlzLmNvbmZpZyksCiAgICAgIGNvZGU6IHRoaXMuY29kZSwKICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cwogICAgfTsKICB9Cn0pOwp2YXIgcHJvdG90eXBlID0gQXhpb3NFcnJvci5wcm90b3R5cGU7CnZhciBkZXNjcmlwdG9ycyA9IHt9OwpbCiAgIkVSUl9CQURfT1BUSU9OX1ZBTFVFIiwKICAiRVJSX0JBRF9PUFRJT04iLAogICJFQ09OTkFCT1JURUQiLAogICJFVElNRURPVVQiLAogICJFUlJfTkVUV09SSyIsCiAgIkVSUl9GUl9UT09fTUFOWV9SRURJUkVDVFMiLAogICJFUlJfREVQUkVDQVRFRCIsCiAgIkVSUl9CQURfUkVTUE9OU0UiLAogICJFUlJfQkFEX1JFUVVFU1QiLAogICJFUlJfQ0FOQ0VMRUQiLAogICJFUlJfTk9UX1NVUFBPUlQiLAogICJFUlJfSU5WQUxJRF9VUkwiCiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXMKXS5mb3JFYWNoKChjb2RlKSA9PiB7CiAgZGVzY3JpcHRvcnNbY29kZV0gPSB7IHZhbHVlOiBjb2RlIH07Cn0pOwpPYmplY3QuZGVmaW5lUHJvcGVydGllcyhBeGlvc0Vycm9yLCBkZXNjcmlwdG9ycyk7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90b3R5cGUsICJpc0F4aW9zRXJyb3IiLCB7IHZhbHVlOiB0cnVlIH0pOwpBeGlvc0Vycm9yLmZyb20gPSAoZXJyb3IsIGNvZGUsIGNvbmZpZywgcmVxdWVzdCwgcmVzcG9uc2UsIGN1c3RvbVByb3BzKSA9PiB7CiAgY29uc3QgYXhpb3NFcnJvciA9IE9iamVjdC5jcmVhdGUocHJvdG90eXBlKTsKICB1dGlsc19kZWZhdWx0LnRvRmxhdE9iamVjdChlcnJvciwgYXhpb3NFcnJvciwgZnVuY3Rpb24gZmlsdGVyMihvYmopIHsKICAgIHJldHVybiBvYmogIT09IEVycm9yLnByb3RvdHlwZTsKICB9LCAocHJvcCkgPT4gewogICAgcmV0dXJuIHByb3AgIT09ICJpc0F4aW9zRXJyb3IiOwogIH0pOwogIGNvbnN0IG1zZyA9IGVycm9yICYmIGVycm9yLm1lc3NhZ2UgPyBlcnJvci5tZXNzYWdlIDogIkVycm9yIjsKICBjb25zdCBlcnJDb2RlID0gY29kZSA9PSBudWxsICYmIGVycm9yID8gZXJyb3IuY29kZSA6IGNvZGU7CiAgQXhpb3NFcnJvci5jYWxsKGF4aW9zRXJyb3IsIG1zZywgZXJyQ29kZSwgY29uZmlnLCByZXF1ZXN0LCByZXNwb25zZSk7CiAgaWYgKGVycm9yICYmIGF4aW9zRXJyb3IuY2F1c2UgPT0gbnVsbCkgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGF4aW9zRXJyb3IsICJjYXVzZSIsIHsgdmFsdWU6IGVycm9yLCBjb25maWd1cmFibGU6IHRydWUgfSk7CiAgfQogIGF4aW9zRXJyb3IubmFtZSA9IGVycm9yICYmIGVycm9yLm5hbWUgfHwgIkVycm9yIjsKICBjdXN0b21Qcm9wcyAmJiBPYmplY3QuYXNzaWduKGF4aW9zRXJyb3IsIGN1c3RvbVByb3BzKTsKICByZXR1cm4gYXhpb3NFcnJvcjsKfTsKdmFyIEF4aW9zRXJyb3JfZGVmYXVsdCA9IEF4aW9zRXJyb3I7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvbnVsbC5qcwp2YXIgbnVsbF9kZWZhdWx0ID0gbnVsbDsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy90b0Zvcm1EYXRhLmpzCmZ1bmN0aW9uIGlzVmlzaXRhYmxlKHRoaW5nKSB7CiAgcmV0dXJuIHV0aWxzX2RlZmF1bHQuaXNQbGFpbk9iamVjdCh0aGluZykgfHwgdXRpbHNfZGVmYXVsdC5pc0FycmF5KHRoaW5nKTsKfQpmdW5jdGlvbiByZW1vdmVCcmFja2V0cyhrZXkpIHsKICByZXR1cm4gdXRpbHNfZGVmYXVsdC5lbmRzV2l0aChrZXksICJbXSIpID8ga2V5LnNsaWNlKDAsIC0yKSA6IGtleTsKfQpmdW5jdGlvbiByZW5kZXJLZXkocGF0aCwga2V5LCBkb3RzKSB7CiAgaWYgKCFwYXRoKSByZXR1cm4ga2V5OwogIHJldHVybiBwYXRoLmNvbmNhdChrZXkpLm1hcChmdW5jdGlvbiBlYWNoKHRva2VuLCBpKSB7CiAgICB0b2tlbiA9IHJlbW92ZUJyYWNrZXRzKHRva2VuKTsKICAgIHJldHVybiAhZG90cyAmJiBpID8gIlsiICsgdG9rZW4gKyAiXSIgOiB0b2tlbjsKICB9KS5qb2luKGRvdHMgPyAiLiIgOiAiIik7Cn0KZnVuY3Rpb24gaXNGbGF0QXJyYXkoYXJyKSB7CiAgcmV0dXJuIHV0aWxzX2RlZmF1bHQuaXNBcnJheShhcnIpICYmICFhcnIuc29tZShpc1Zpc2l0YWJsZSk7Cn0KdmFyIHByZWRpY2F0ZXMgPSB1dGlsc19kZWZhdWx0LnRvRmxhdE9iamVjdCh1dGlsc19kZWZhdWx0LCB7fSwgbnVsbCwgZnVuY3Rpb24gZmlsdGVyKHByb3ApIHsKICByZXR1cm4gL15pc1tBLVpdLy50ZXN0KHByb3ApOwp9KTsKZnVuY3Rpb24gdG9Gb3JtRGF0YShvYmosIGZvcm1EYXRhLCBvcHRpb25zKSB7CiAgaWYgKCF1dGlsc19kZWZhdWx0LmlzT2JqZWN0KG9iaikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoInRhcmdldCBtdXN0IGJlIGFuIG9iamVjdCIpOwogIH0KICBmb3JtRGF0YSA9IGZvcm1EYXRhIHx8IG5ldyAobnVsbF9kZWZhdWx0IHx8IEZvcm1EYXRhKSgpOwogIG9wdGlvbnMgPSB1dGlsc19kZWZhdWx0LnRvRmxhdE9iamVjdChvcHRpb25zLCB7CiAgICBtZXRhVG9rZW5zOiB0cnVlLAogICAgZG90czogZmFsc2UsCiAgICBpbmRleGVzOiBmYWxzZQogIH0sIGZhbHNlLCBmdW5jdGlvbiBkZWZpbmVkKG9wdGlvbiwgc291cmNlKSB7CiAgICByZXR1cm4gIXV0aWxzX2RlZmF1bHQuaXNVbmRlZmluZWQoc291cmNlW29wdGlvbl0pOwogIH0pOwogIGNvbnN0IG1ldGFUb2tlbnMgPSBvcHRpb25zLm1ldGFUb2tlbnM7CiAgY29uc3QgdmlzaXRvciA9IG9wdGlvbnMudmlzaXRvciB8fCBkZWZhdWx0VmlzaXRvcjsKICBjb25zdCBkb3RzID0gb3B0aW9ucy5kb3RzOwogIGNvbnN0IGluZGV4ZXMgPSBvcHRpb25zLmluZGV4ZXM7CiAgY29uc3QgX0Jsb2IgPSBvcHRpb25zLkJsb2IgfHwgdHlwZW9mIEJsb2IgIT09ICJ1bmRlZmluZWQiICYmIEJsb2I7CiAgY29uc3QgdXNlQmxvYiA9IF9CbG9iICYmIHV0aWxzX2RlZmF1bHQuaXNTcGVjQ29tcGxpYW50Rm9ybShmb3JtRGF0YSk7CiAgaWYgKCF1dGlsc19kZWZhdWx0LmlzRnVuY3Rpb24odmlzaXRvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoInZpc2l0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uIik7CiAgfQogIGZ1bmN0aW9uIGNvbnZlcnRWYWx1ZSh2YWx1ZSkgewogICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gIiI7CiAgICBpZiAodXRpbHNfZGVmYXVsdC5pc0RhdGUodmFsdWUpKSB7CiAgICAgIHJldHVybiB2YWx1ZS50b0lTT1N0cmluZygpOwogICAgfQogICAgaWYgKHV0aWxzX2RlZmF1bHQuaXNCb29sZWFuKHZhbHVlKSkgewogICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTsKICAgIH0KICAgIGlmICghdXNlQmxvYiAmJiB1dGlsc19kZWZhdWx0LmlzQmxvYih2YWx1ZSkpIHsKICAgICAgdGhyb3cgbmV3IEF4aW9zRXJyb3JfZGVmYXVsdCgiQmxvYiBpcyBub3Qgc3VwcG9ydGVkLiBVc2UgYSBCdWZmZXIgaW5zdGVhZC4iKTsKICAgIH0KICAgIGlmICh1dGlsc19kZWZhdWx0LmlzQXJyYXlCdWZmZXIodmFsdWUpIHx8IHV0aWxzX2RlZmF1bHQuaXNUeXBlZEFycmF5KHZhbHVlKSkgewogICAgICByZXR1cm4gdXNlQmxvYiAmJiB0eXBlb2YgQmxvYiA9PT0gImZ1bmN0aW9uIiA/IG5ldyBCbG9iKFt2YWx1ZV0pIDogQnVmZmVyLmZyb20odmFsdWUpOwogICAgfQogICAgcmV0dXJuIHZhbHVlOwogIH0KICBmdW5jdGlvbiBkZWZhdWx0VmlzaXRvcih2YWx1ZSwga2V5LCBwYXRoKSB7CiAgICBsZXQgYXJyID0gdmFsdWU7CiAgICBpZiAodmFsdWUgJiYgIXBhdGggJiYgdHlwZW9mIHZhbHVlID09PSAib2JqZWN0IikgewogICAgICBpZiAodXRpbHNfZGVmYXVsdC5lbmRzV2l0aChrZXksICJ7fSIpKSB7CiAgICAgICAga2V5ID0gbWV0YVRva2VucyA/IGtleSA6IGtleS5zbGljZSgwLCAtMik7CiAgICAgICAgdmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7CiAgICAgIH0gZWxzZSBpZiAodXRpbHNfZGVmYXVsdC5pc0FycmF5KHZhbHVlKSAmJiBpc0ZsYXRBcnJheSh2YWx1ZSkgfHwgKHV0aWxzX2RlZmF1bHQuaXNGaWxlTGlzdCh2YWx1ZSkgfHwgdXRpbHNfZGVmYXVsdC5lbmRzV2l0aChrZXksICJbXSIpKSAmJiAoYXJyID0gdXRpbHNfZGVmYXVsdC50b0FycmF5KHZhbHVlKSkpIHsKICAgICAgICBrZXkgPSByZW1vdmVCcmFja2V0cyhrZXkpOwogICAgICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uIGVhY2goZWwsIGluZGV4KSB7CiAgICAgICAgICAhKHV0aWxzX2RlZmF1bHQuaXNVbmRlZmluZWQoZWwpIHx8IGVsID09PSBudWxsKSAmJiBmb3JtRGF0YS5hcHBlbmQoCiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXN0ZWQtdGVybmFyeQogICAgICAgICAgICBpbmRleGVzID09PSB0cnVlID8gcmVuZGVyS2V5KFtrZXldLCBpbmRleCwgZG90cykgOiBpbmRleGVzID09PSBudWxsID8ga2V5IDoga2V5ICsgIltdIiwKICAgICAgICAgICAgY29udmVydFZhbHVlKGVsKQogICAgICAgICAgKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KICAgIGlmIChpc1Zpc2l0YWJsZSh2YWx1ZSkpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICBmb3JtRGF0YS5hcHBlbmQocmVuZGVyS2V5KHBhdGgsIGtleSwgZG90cyksIGNvbnZlcnRWYWx1ZSh2YWx1ZSkpOwogICAgcmV0dXJuIGZhbHNlOwogIH0KICBjb25zdCBzdGFjayA9IFtdOwogIGNvbnN0IGV4cG9zZWRIZWxwZXJzID0gT2JqZWN0LmFzc2lnbihwcmVkaWNhdGVzLCB7CiAgICBkZWZhdWx0VmlzaXRvciwKICAgIGNvbnZlcnRWYWx1ZSwKICAgIGlzVmlzaXRhYmxlCiAgfSk7CiAgZnVuY3Rpb24gYnVpbGQodmFsdWUsIHBhdGgpIHsKICAgIGlmICh1dGlsc19kZWZhdWx0LmlzVW5kZWZpbmVkKHZhbHVlKSkgcmV0dXJuOwogICAgaWYgKHN0YWNrLmluZGV4T2YodmFsdWUpICE9PSAtMSkgewogICAgICB0aHJvdyBFcnJvcigiQ2lyY3VsYXIgcmVmZXJlbmNlIGRldGVjdGVkIGluICIgKyBwYXRoLmpvaW4oIi4iKSk7CiAgICB9CiAgICBzdGFjay5wdXNoKHZhbHVlKTsKICAgIHV0aWxzX2RlZmF1bHQuZm9yRWFjaCh2YWx1ZSwgZnVuY3Rpb24gZWFjaChlbCwga2V5KSB7CiAgICAgIGNvbnN0IHJlc3VsdCA9ICEodXRpbHNfZGVmYXVsdC5pc1VuZGVmaW5lZChlbCkgfHwgZWwgPT09IG51bGwpICYmIHZpc2l0b3IuY2FsbCgKICAgICAgICBmb3JtRGF0YSwKICAgICAgICBlbCwKICAgICAgICB1dGlsc19kZWZhdWx0LmlzU3RyaW5nKGtleSkgPyBrZXkudHJpbSgpIDoga2V5LAogICAgICAgIHBhdGgsCiAgICAgICAgZXhwb3NlZEhlbHBlcnMKICAgICAgKTsKICAgICAgaWYgKHJlc3VsdCA9PT0gdHJ1ZSkgewogICAgICAgIGJ1aWxkKGVsLCBwYXRoID8gcGF0aC5jb25jYXQoa2V5KSA6IFtrZXldKTsKICAgICAgfQogICAgfSk7CiAgICBzdGFjay5wb3AoKTsKICB9CiAgaWYgKCF1dGlsc19kZWZhdWx0LmlzT2JqZWN0KG9iaikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoImRhdGEgbXVzdCBiZSBhbiBvYmplY3QiKTsKICB9CiAgYnVpbGQob2JqKTsKICByZXR1cm4gZm9ybURhdGE7Cn0KdmFyIHRvRm9ybURhdGFfZGVmYXVsdCA9IHRvRm9ybURhdGE7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvQXhpb3NVUkxTZWFyY2hQYXJhbXMuanMKZnVuY3Rpb24gZW5jb2RlKHN0cikgewogIGNvbnN0IGNoYXJNYXAgPSB7CiAgICAiISI6ICIlMjEiLAogICAgIiciOiAiJTI3IiwKICAgICIoIjogIiUyOCIsCiAgICAiKSI6ICIlMjkiLAogICAgIn4iOiAiJTdFIiwKICAgICIlMjAiOiAiKyIsCiAgICAiJTAwIjogIlwwIgogIH07CiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzdHIpLnJlcGxhY2UoL1shJygpfl18JTIwfCUwMC9nLCBmdW5jdGlvbiByZXBsYWNlcihtYXRjaCkgewogICAgcmV0dXJuIGNoYXJNYXBbbWF0Y2hdOwogIH0pOwp9CmZ1bmN0aW9uIEF4aW9zVVJMU2VhcmNoUGFyYW1zKHBhcmFtcywgb3B0aW9ucykgewogIHRoaXMuX3BhaXJzID0gW107CiAgcGFyYW1zICYmIHRvRm9ybURhdGFfZGVmYXVsdChwYXJhbXMsIHRoaXMsIG9wdGlvbnMpOwp9CnZhciBwcm90b3R5cGUyID0gQXhpb3NVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlOwpwcm90b3R5cGUyLmFwcGVuZCA9IGZ1bmN0aW9uIGFwcGVuZChuYW1lLCB2YWx1ZSkgewogIHRoaXMuX3BhaXJzLnB1c2goW25hbWUsIHZhbHVlXSk7Cn07CnByb3RvdHlwZTIudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZzIoZW5jb2RlcikgewogIGNvbnN0IF9lbmNvZGUgPSBlbmNvZGVyID8gZnVuY3Rpb24odmFsdWUpIHsKICAgIHJldHVybiBlbmNvZGVyLmNhbGwodGhpcywgdmFsdWUsIGVuY29kZSk7CiAgfSA6IGVuY29kZTsKICByZXR1cm4gdGhpcy5fcGFpcnMubWFwKGZ1bmN0aW9uIGVhY2gocGFpcikgewogICAgcmV0dXJuIF9lbmNvZGUocGFpclswXSkgKyAiPSIgKyBfZW5jb2RlKHBhaXJbMV0pOwogIH0sICIiKS5qb2luKCImIik7Cn07CnZhciBBeGlvc1VSTFNlYXJjaFBhcmFtc19kZWZhdWx0ID0gQXhpb3NVUkxTZWFyY2hQYXJhbXM7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvYnVpbGRVUkwuanMKZnVuY3Rpb24gZW5jb2RlMih2YWwpIHsKICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbCkucmVwbGFjZSgvJTNBL2dpLCAiOiIpLnJlcGxhY2UoLyUyNC9nLCAiJCIpLnJlcGxhY2UoLyUyQy9naSwgIiwiKS5yZXBsYWNlKC8lMjAvZywgIisiKTsKfQpmdW5jdGlvbiBidWlsZFVSTCh1cmwsIHBhcmFtcywgb3B0aW9ucykgewogIGlmICghcGFyYW1zKSB7CiAgICByZXR1cm4gdXJsOwogIH0KICBjb25zdCBfZW5jb2RlID0gb3B0aW9ucyAmJiBvcHRpb25zLmVuY29kZSB8fCBlbmNvZGUyOwogIGlmICh1dGlsc19kZWZhdWx0LmlzRnVuY3Rpb24ob3B0aW9ucykpIHsKICAgIG9wdGlvbnMgPSB7CiAgICAgIHNlcmlhbGl6ZTogb3B0aW9ucwogICAgfTsKICB9CiAgY29uc3Qgc2VyaWFsaXplRm4gPSBvcHRpb25zICYmIG9wdGlvbnMuc2VyaWFsaXplOwogIGxldCBzZXJpYWxpemVkUGFyYW1zOwogIGlmIChzZXJpYWxpemVGbikgewogICAgc2VyaWFsaXplZFBhcmFtcyA9IHNlcmlhbGl6ZUZuKHBhcmFtcywgb3B0aW9ucyk7CiAgfSBlbHNlIHsKICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSB1dGlsc19kZWZhdWx0LmlzVVJMU2VhcmNoUGFyYW1zKHBhcmFtcykgPyBwYXJhbXMudG9TdHJpbmcoKSA6IG5ldyBBeGlvc1VSTFNlYXJjaFBhcmFtc19kZWZhdWx0KHBhcmFtcywgb3B0aW9ucykudG9TdHJpbmcoX2VuY29kZSk7CiAgfQogIGlmIChzZXJpYWxpemVkUGFyYW1zKSB7CiAgICBjb25zdCBoYXNobWFya0luZGV4ID0gdXJsLmluZGV4T2YoIiMiKTsKICAgIGlmIChoYXNobWFya0luZGV4ICE9PSAtMSkgewogICAgICB1cmwgPSB1cmwuc2xpY2UoMCwgaGFzaG1hcmtJbmRleCk7CiAgICB9CiAgICB1cmwgKz0gKHVybC5pbmRleE9mKCI/IikgPT09IC0xID8gIj8iIDogIiYiKSArIHNlcmlhbGl6ZWRQYXJhbXM7CiAgfQogIHJldHVybiB1cmw7Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9JbnRlcmNlcHRvck1hbmFnZXIuanMKdmFyIEludGVyY2VwdG9yTWFuYWdlciA9IGNsYXNzIHsKICBjb25zdHJ1Y3RvcigpIHsKICAgIHRoaXMuaGFuZGxlcnMgPSBbXTsKICB9CiAgLyoqCiAgICogQWRkIGEgbmV3IGludGVyY2VwdG9yIHRvIHRoZSBzdGFjawogICAqCiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVsZmlsbGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHRoZW5gIGZvciBhIGBQcm9taXNlYAogICAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHJlamVjdGAgZm9yIGEgYFByb21pc2VgCiAgICoKICAgKiBAcmV0dXJuIHtOdW1iZXJ9IEFuIElEIHVzZWQgdG8gcmVtb3ZlIGludGVyY2VwdG9yIGxhdGVyCiAgICovCiAgdXNlKGZ1bGZpbGxlZCwgcmVqZWN0ZWQsIG9wdGlvbnMpIHsKICAgIHRoaXMuaGFuZGxlcnMucHVzaCh7CiAgICAgIGZ1bGZpbGxlZCwKICAgICAgcmVqZWN0ZWQsCiAgICAgIHN5bmNocm9ub3VzOiBvcHRpb25zID8gb3B0aW9ucy5zeW5jaHJvbm91cyA6IGZhbHNlLAogICAgICBydW5XaGVuOiBvcHRpb25zID8gb3B0aW9ucy5ydW5XaGVuIDogbnVsbAogICAgfSk7CiAgICByZXR1cm4gdGhpcy5oYW5kbGVycy5sZW5ndGggLSAxOwogIH0KICAvKioKICAgKiBSZW1vdmUgYW4gaW50ZXJjZXB0b3IgZnJvbSB0aGUgc3RhY2sKICAgKgogICAqIEBwYXJhbSB7TnVtYmVyfSBpZCBUaGUgSUQgdGhhdCB3YXMgcmV0dXJuZWQgYnkgYHVzZWAKICAgKgogICAqIEByZXR1cm5zIHtCb29sZWFufSBgdHJ1ZWAgaWYgdGhlIGludGVyY2VwdG9yIHdhcyByZW1vdmVkLCBgZmFsc2VgIG90aGVyd2lzZQogICAqLwogIGVqZWN0KGlkKSB7CiAgICBpZiAodGhpcy5oYW5kbGVyc1tpZF0pIHsKICAgICAgdGhpcy5oYW5kbGVyc1tpZF0gPSBudWxsOwogICAgfQogIH0KICAvKioKICAgKiBDbGVhciBhbGwgaW50ZXJjZXB0b3JzIGZyb20gdGhlIHN0YWNrCiAgICoKICAgKiBAcmV0dXJucyB7dm9pZH0KICAgKi8KICBjbGVhcigpIHsKICAgIGlmICh0aGlzLmhhbmRsZXJzKSB7CiAgICAgIHRoaXMuaGFuZGxlcnMgPSBbXTsKICAgIH0KICB9CiAgLyoqCiAgICogSXRlcmF0ZSBvdmVyIGFsbCB0aGUgcmVnaXN0ZXJlZCBpbnRlcmNlcHRvcnMKICAgKgogICAqIFRoaXMgbWV0aG9kIGlzIHBhcnRpY3VsYXJseSB1c2VmdWwgZm9yIHNraXBwaW5nIG92ZXIgYW55CiAgICogaW50ZXJjZXB0b3JzIHRoYXQgbWF5IGhhdmUgYmVjb21lIGBudWxsYCBjYWxsaW5nIGBlamVjdGAuCiAgICoKICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCBpbnRlcmNlcHRvcgogICAqCiAgICogQHJldHVybnMge3ZvaWR9CiAgICovCiAgZm9yRWFjaChmbikgewogICAgdXRpbHNfZGVmYXVsdC5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsIGZ1bmN0aW9uIGZvckVhY2hIYW5kbGVyKGgpIHsKICAgICAgaWYgKGggIT09IG51bGwpIHsKICAgICAgICBmbihoKTsKICAgICAgfQogICAgfSk7CiAgfQp9Owp2YXIgSW50ZXJjZXB0b3JNYW5hZ2VyX2RlZmF1bHQgPSBJbnRlcmNlcHRvck1hbmFnZXI7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2RlZmF1bHRzL3RyYW5zaXRpb25hbC5qcwp2YXIgdHJhbnNpdGlvbmFsX2RlZmF1bHQgPSB7CiAgc2lsZW50SlNPTlBhcnNpbmc6IHRydWUsCiAgZm9yY2VkSlNPTlBhcnNpbmc6IHRydWUsCiAgY2xhcmlmeVRpbWVvdXRFcnJvcjogZmFsc2UKfTsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvcGxhdGZvcm0vYnJvd3Nlci9jbGFzc2VzL1VSTFNlYXJjaFBhcmFtcy5qcwp2YXIgVVJMU2VhcmNoUGFyYW1zX2RlZmF1bHQgPSB0eXBlb2YgVVJMU2VhcmNoUGFyYW1zICE9PSAidW5kZWZpbmVkIiA/IFVSTFNlYXJjaFBhcmFtcyA6IEF4aW9zVVJMU2VhcmNoUGFyYW1zX2RlZmF1bHQ7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL3BsYXRmb3JtL2Jyb3dzZXIvY2xhc3Nlcy9Gb3JtRGF0YS5qcwp2YXIgRm9ybURhdGFfZGVmYXVsdCA9IHR5cGVvZiBGb3JtRGF0YSAhPT0gInVuZGVmaW5lZCIgPyBGb3JtRGF0YSA6IG51bGw7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL3BsYXRmb3JtL2Jyb3dzZXIvY2xhc3Nlcy9CbG9iLmpzCnZhciBCbG9iX2RlZmF1bHQgPSB0eXBlb2YgQmxvYiAhPT0gInVuZGVmaW5lZCIgPyBCbG9iIDogbnVsbDsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvcGxhdGZvcm0vYnJvd3Nlci9pbmRleC5qcwp2YXIgYnJvd3Nlcl9kZWZhdWx0ID0gewogIGlzQnJvd3NlcjogdHJ1ZSwKICBjbGFzc2VzOiB7CiAgICBVUkxTZWFyY2hQYXJhbXM6IFVSTFNlYXJjaFBhcmFtc19kZWZhdWx0LAogICAgRm9ybURhdGE6IEZvcm1EYXRhX2RlZmF1bHQsCiAgICBCbG9iOiBCbG9iX2RlZmF1bHQKICB9LAogIHByb3RvY29sczogWyJodHRwIiwgImh0dHBzIiwgImZpbGUiLCAiYmxvYiIsICJ1cmwiLCAiZGF0YSJdCn07CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL3BsYXRmb3JtL2NvbW1vbi91dGlscy5qcwp2YXIgdXRpbHNfZXhwb3J0cyA9IHt9OwpfX2V4cG9ydCh1dGlsc19leHBvcnRzLCB7CiAgaGFzQnJvd3NlckVudjogKCkgPT4gaGFzQnJvd3NlckVudiwKICBoYXNTdGFuZGFyZEJyb3dzZXJFbnY6ICgpID0+IGhhc1N0YW5kYXJkQnJvd3NlckVudiwKICBoYXNTdGFuZGFyZEJyb3dzZXJXZWJXb3JrZXJFbnY6ICgpID0+IGhhc1N0YW5kYXJkQnJvd3NlcldlYldvcmtlckVudiwKICBuYXZpZ2F0b3I6ICgpID0+IF9uYXZpZ2F0b3IsCiAgb3JpZ2luOiAoKSA9PiBvcmlnaW4KfSk7CnZhciBoYXNCcm93c2VyRW52ID0gdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAidW5kZWZpbmVkIjsKdmFyIF9uYXZpZ2F0b3IgPSB0eXBlb2YgbmF2aWdhdG9yID09PSAib2JqZWN0IiAmJiBuYXZpZ2F0b3IgfHwgdm9pZCAwOwp2YXIgaGFzU3RhbmRhcmRCcm93c2VyRW52ID0gaGFzQnJvd3NlckVudiAmJiAoIV9uYXZpZ2F0b3IgfHwgWyJSZWFjdE5hdGl2ZSIsICJOYXRpdmVTY3JpcHQiLCAiTlMiXS5pbmRleE9mKF9uYXZpZ2F0b3IucHJvZHVjdCkgPCAwKTsKdmFyIGhhc1N0YW5kYXJkQnJvd3NlcldlYldvcmtlckVudiA9ICgoKSA9PiB7CiAgcmV0dXJuIHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSAhPT0gInVuZGVmaW5lZCIgJiYgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmCiAgc2VsZiBpbnN0YW5jZW9mIFdvcmtlckdsb2JhbFNjb3BlICYmIHR5cGVvZiBzZWxmLmltcG9ydFNjcmlwdHMgPT09ICJmdW5jdGlvbiI7Cn0pKCk7CnZhciBvcmlnaW4gPSBoYXNCcm93c2VyRW52ICYmIHdpbmRvdy5sb2NhdGlvbi5ocmVmIHx8ICJodHRwOi8vbG9jYWxob3N0IjsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvcGxhdGZvcm0vaW5kZXguanMKdmFyIHBsYXRmb3JtX2RlZmF1bHQgPSB7CiAgLi4udXRpbHNfZXhwb3J0cywKICAuLi5icm93c2VyX2RlZmF1bHQKfTsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy90b1VSTEVuY29kZWRGb3JtLmpzCmZ1bmN0aW9uIHRvVVJMRW5jb2RlZEZvcm0oZGF0YSwgb3B0aW9ucykgewogIHJldHVybiB0b0Zvcm1EYXRhX2RlZmF1bHQoZGF0YSwgbmV3IHBsYXRmb3JtX2RlZmF1bHQuY2xhc3Nlcy5VUkxTZWFyY2hQYXJhbXMoKSwgewogICAgdmlzaXRvcjogZnVuY3Rpb24odmFsdWUsIGtleSwgcGF0aCwgaGVscGVycykgewogICAgICBpZiAocGxhdGZvcm1fZGVmYXVsdC5pc05vZGUgJiYgdXRpbHNfZGVmYXVsdC5pc0J1ZmZlcih2YWx1ZSkpIHsKICAgICAgICB0aGlzLmFwcGVuZChrZXksIHZhbHVlLnRvU3RyaW5nKCJiYXNlNjQiKSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiBoZWxwZXJzLmRlZmF1bHRWaXNpdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9LAogICAgLi4ub3B0aW9ucwogIH0pOwp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvZm9ybURhdGFUb0pTT04uanMKZnVuY3Rpb24gcGFyc2VQcm9wUGF0aChuYW1lKSB7CiAgcmV0dXJuIHV0aWxzX2RlZmF1bHQubWF0Y2hBbGwoL1x3K3xcWyhcdyopXS9nLCBuYW1lKS5tYXAoKG1hdGNoKSA9PiB7CiAgICByZXR1cm4gbWF0Y2hbMF0gPT09ICJbXSIgPyAiIiA6IG1hdGNoWzFdIHx8IG1hdGNoWzBdOwogIH0pOwp9CmZ1bmN0aW9uIGFycmF5VG9PYmplY3QoYXJyKSB7CiAgY29uc3Qgb2JqID0ge307CiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGFycik7CiAgbGV0IGk7CiAgY29uc3QgbGVuID0ga2V5cy5sZW5ndGg7CiAgbGV0IGtleTsKICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgIGtleSA9IGtleXNbaV07CiAgICBvYmpba2V5XSA9IGFycltrZXldOwogIH0KICByZXR1cm4gb2JqOwp9CmZ1bmN0aW9uIGZvcm1EYXRhVG9KU09OKGZvcm1EYXRhKSB7CiAgZnVuY3Rpb24gYnVpbGRQYXRoKHBhdGgsIHZhbHVlLCB0YXJnZXQsIGluZGV4KSB7CiAgICBsZXQgbmFtZSA9IHBhdGhbaW5kZXgrK107CiAgICBpZiAobmFtZSA9PT0gIl9fcHJvdG9fXyIpIHJldHVybiB0cnVlOwogICAgY29uc3QgaXNOdW1lcmljS2V5ID0gTnVtYmVyLmlzRmluaXRlKCtuYW1lKTsKICAgIGNvbnN0IGlzTGFzdCA9IGluZGV4ID49IHBhdGgubGVuZ3RoOwogICAgbmFtZSA9ICFuYW1lICYmIHV0aWxzX2RlZmF1bHQuaXNBcnJheSh0YXJnZXQpID8gdGFyZ2V0Lmxlbmd0aCA6IG5hbWU7CiAgICBpZiAoaXNMYXN0KSB7CiAgICAgIGlmICh1dGlsc19kZWZhdWx0Lmhhc093blByb3AodGFyZ2V0LCBuYW1lKSkgewogICAgICAgIHRhcmdldFtuYW1lXSA9IFt0YXJnZXRbbmFtZV0sIHZhbHVlXTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0YXJnZXRbbmFtZV0gPSB2YWx1ZTsKICAgICAgfQogICAgICByZXR1cm4gIWlzTnVtZXJpY0tleTsKICAgIH0KICAgIGlmICghdGFyZ2V0W25hbWVdIHx8ICF1dGlsc19kZWZhdWx0LmlzT2JqZWN0KHRhcmdldFtuYW1lXSkpIHsKICAgICAgdGFyZ2V0W25hbWVdID0gW107CiAgICB9CiAgICBjb25zdCByZXN1bHQgPSBidWlsZFBhdGgocGF0aCwgdmFsdWUsIHRhcmdldFtuYW1lXSwgaW5kZXgpOwogICAgaWYgKHJlc3VsdCAmJiB1dGlsc19kZWZhdWx0LmlzQXJyYXkodGFyZ2V0W25hbWVdKSkgewogICAgICB0YXJnZXRbbmFtZV0gPSBhcnJheVRvT2JqZWN0KHRhcmdldFtuYW1lXSk7CiAgICB9CiAgICByZXR1cm4gIWlzTnVtZXJpY0tleTsKICB9CiAgaWYgKHV0aWxzX2RlZmF1bHQuaXNGb3JtRGF0YShmb3JtRGF0YSkgJiYgdXRpbHNfZGVmYXVsdC5pc0Z1bmN0aW9uKGZvcm1EYXRhLmVudHJpZXMpKSB7CiAgICBjb25zdCBvYmogPSB7fTsKICAgIHV0aWxzX2RlZmF1bHQuZm9yRWFjaEVudHJ5KGZvcm1EYXRhLCAobmFtZSwgdmFsdWUpID0+IHsKICAgICAgYnVpbGRQYXRoKHBhcnNlUHJvcFBhdGgobmFtZSksIHZhbHVlLCBvYmosIDApOwogICAgfSk7CiAgICByZXR1cm4gb2JqOwogIH0KICByZXR1cm4gbnVsbDsKfQp2YXIgZm9ybURhdGFUb0pTT05fZGVmYXVsdCA9IGZvcm1EYXRhVG9KU09OOwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9kZWZhdWx0cy9pbmRleC5qcwpmdW5jdGlvbiBzdHJpbmdpZnlTYWZlbHkocmF3VmFsdWUsIHBhcnNlciwgZW5jb2RlcikgewogIGlmICh1dGlsc19kZWZhdWx0LmlzU3RyaW5nKHJhd1ZhbHVlKSkgewogICAgdHJ5IHsKICAgICAgKHBhcnNlciB8fCBKU09OLnBhcnNlKShyYXdWYWx1ZSk7CiAgICAgIHJldHVybiB1dGlsc19kZWZhdWx0LnRyaW0ocmF3VmFsdWUpOwogICAgfSBjYXRjaCAoZSkgewogICAgICBpZiAoZS5uYW1lICE9PSAiU3ludGF4RXJyb3IiKSB7CiAgICAgICAgdGhyb3cgZTsKICAgICAgfQogICAgfQogIH0KICByZXR1cm4gKGVuY29kZXIgfHwgSlNPTi5zdHJpbmdpZnkpKHJhd1ZhbHVlKTsKfQp2YXIgZGVmYXVsdHMgPSB7CiAgdHJhbnNpdGlvbmFsOiB0cmFuc2l0aW9uYWxfZGVmYXVsdCwKICBhZGFwdGVyOiBbInhociIsICJodHRwIiwgImZldGNoIl0sCiAgdHJhbnNmb3JtUmVxdWVzdDogW2Z1bmN0aW9uIHRyYW5zZm9ybVJlcXVlc3QoZGF0YSwgaGVhZGVycykgewogICAgY29uc3QgY29udGVudFR5cGUgPSBoZWFkZXJzLmdldENvbnRlbnRUeXBlKCkgfHwgIiI7CiAgICBjb25zdCBoYXNKU09OQ29udGVudFR5cGUgPSBjb250ZW50VHlwZS5pbmRleE9mKCJhcHBsaWNhdGlvbi9qc29uIikgPiAtMTsKICAgIGNvbnN0IGlzT2JqZWN0UGF5bG9hZCA9IHV0aWxzX2RlZmF1bHQuaXNPYmplY3QoZGF0YSk7CiAgICBpZiAoaXNPYmplY3RQYXlsb2FkICYmIHV0aWxzX2RlZmF1bHQuaXNIVE1MRm9ybShkYXRhKSkgewogICAgICBkYXRhID0gbmV3IEZvcm1EYXRhKGRhdGEpOwogICAgfQogICAgY29uc3QgaXNGb3JtRGF0YTIgPSB1dGlsc19kZWZhdWx0LmlzRm9ybURhdGEoZGF0YSk7CiAgICBpZiAoaXNGb3JtRGF0YTIpIHsKICAgICAgcmV0dXJuIGhhc0pTT05Db250ZW50VHlwZSA/IEpTT04uc3RyaW5naWZ5KGZvcm1EYXRhVG9KU09OX2RlZmF1bHQoZGF0YSkpIDogZGF0YTsKICAgIH0KICAgIGlmICh1dGlsc19kZWZhdWx0LmlzQXJyYXlCdWZmZXIoZGF0YSkgfHwgdXRpbHNfZGVmYXVsdC5pc0J1ZmZlcihkYXRhKSB8fCB1dGlsc19kZWZhdWx0LmlzU3RyZWFtKGRhdGEpIHx8IHV0aWxzX2RlZmF1bHQuaXNGaWxlKGRhdGEpIHx8IHV0aWxzX2RlZmF1bHQuaXNCbG9iKGRhdGEpIHx8IHV0aWxzX2RlZmF1bHQuaXNSZWFkYWJsZVN0cmVhbShkYXRhKSkgewogICAgICByZXR1cm4gZGF0YTsKICAgIH0KICAgIGlmICh1dGlsc19kZWZhdWx0LmlzQXJyYXlCdWZmZXJWaWV3KGRhdGEpKSB7CiAgICAgIHJldHVybiBkYXRhLmJ1ZmZlcjsKICAgIH0KICAgIGlmICh1dGlsc19kZWZhdWx0LmlzVVJMU2VhcmNoUGFyYW1zKGRhdGEpKSB7CiAgICAgIGhlYWRlcnMuc2V0Q29udGVudFR5cGUoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04IiwgZmFsc2UpOwogICAgICByZXR1cm4gZGF0YS50b1N0cmluZygpOwogICAgfQogICAgbGV0IGlzRmlsZUxpc3QyOwogICAgaWYgKGlzT2JqZWN0UGF5bG9hZCkgewogICAgICBpZiAoY29udGVudFR5cGUuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikgPiAtMSkgewogICAgICAgIHJldHVybiB0b1VSTEVuY29kZWRGb3JtKGRhdGEsIHRoaXMuZm9ybVNlcmlhbGl6ZXIpLnRvU3RyaW5nKCk7CiAgICAgIH0KICAgICAgaWYgKChpc0ZpbGVMaXN0MiA9IHV0aWxzX2RlZmF1bHQuaXNGaWxlTGlzdChkYXRhKSkgfHwgY29udGVudFR5cGUuaW5kZXhPZigibXVsdGlwYXJ0L2Zvcm0tZGF0YSIpID4gLTEpIHsKICAgICAgICBjb25zdCBfRm9ybURhdGEgPSB0aGlzLmVudiAmJiB0aGlzLmVudi5Gb3JtRGF0YTsKICAgICAgICByZXR1cm4gdG9Gb3JtRGF0YV9kZWZhdWx0KAogICAgICAgICAgaXNGaWxlTGlzdDIgPyB7ICJmaWxlc1tdIjogZGF0YSB9IDogZGF0YSwKICAgICAgICAgIF9Gb3JtRGF0YSAmJiBuZXcgX0Zvcm1EYXRhKCksCiAgICAgICAgICB0aGlzLmZvcm1TZXJpYWxpemVyCiAgICAgICAgKTsKICAgICAgfQogICAgfQogICAgaWYgKGlzT2JqZWN0UGF5bG9hZCB8fCBoYXNKU09OQ29udGVudFR5cGUpIHsKICAgICAgaGVhZGVycy5zZXRDb250ZW50VHlwZSgiYXBwbGljYXRpb24vanNvbiIsIGZhbHNlKTsKICAgICAgcmV0dXJuIHN0cmluZ2lmeVNhZmVseShkYXRhKTsKICAgIH0KICAgIHJldHVybiBkYXRhOwogIH1dLAogIHRyYW5zZm9ybVJlc3BvbnNlOiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVzcG9uc2UoZGF0YSkgewogICAgY29uc3QgdHJhbnNpdGlvbmFsMiA9IHRoaXMudHJhbnNpdGlvbmFsIHx8IGRlZmF1bHRzLnRyYW5zaXRpb25hbDsKICAgIGNvbnN0IGZvcmNlZEpTT05QYXJzaW5nID0gdHJhbnNpdGlvbmFsMiAmJiB0cmFuc2l0aW9uYWwyLmZvcmNlZEpTT05QYXJzaW5nOwogICAgY29uc3QgSlNPTlJlcXVlc3RlZCA9IHRoaXMucmVzcG9uc2VUeXBlID09PSAianNvbiI7CiAgICBpZiAodXRpbHNfZGVmYXVsdC5pc1Jlc3BvbnNlKGRhdGEpIHx8IHV0aWxzX2RlZmF1bHQuaXNSZWFkYWJsZVN0cmVhbShkYXRhKSkgewogICAgICByZXR1cm4gZGF0YTsKICAgIH0KICAgIGlmIChkYXRhICYmIHV0aWxzX2RlZmF1bHQuaXNTdHJpbmcoZGF0YSkgJiYgKGZvcmNlZEpTT05QYXJzaW5nICYmICF0aGlzLnJlc3BvbnNlVHlwZSB8fCBKU09OUmVxdWVzdGVkKSkgewogICAgICBjb25zdCBzaWxlbnRKU09OUGFyc2luZyA9IHRyYW5zaXRpb25hbDIgJiYgdHJhbnNpdGlvbmFsMi5zaWxlbnRKU09OUGFyc2luZzsKICAgICAgY29uc3Qgc3RyaWN0SlNPTlBhcnNpbmcgPSAhc2lsZW50SlNPTlBhcnNpbmcgJiYgSlNPTlJlcXVlc3RlZDsKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhLCB0aGlzLnBhcnNlUmV2aXZlcik7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBpZiAoc3RyaWN0SlNPTlBhcnNpbmcpIHsKICAgICAgICAgIGlmIChlLm5hbWUgPT09ICJTeW50YXhFcnJvciIpIHsKICAgICAgICAgICAgdGhyb3cgQXhpb3NFcnJvcl9kZWZhdWx0LmZyb20oZSwgQXhpb3NFcnJvcl9kZWZhdWx0LkVSUl9CQURfUkVTUE9OU0UsIHRoaXMsIG51bGwsIHRoaXMucmVzcG9uc2UpOwogICAgICAgICAgfQogICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBkYXRhOwogIH1dLAogIC8qKgogICAqIEEgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgdG8gYWJvcnQgYSByZXF1ZXN0LiBJZiBzZXQgdG8gMCAoZGVmYXVsdCkgYQogICAqIHRpbWVvdXQgaXMgbm90IGNyZWF0ZWQuCiAgICovCiAgdGltZW91dDogMCwKICB4c3JmQ29va2llTmFtZTogIlhTUkYtVE9LRU4iLAogIHhzcmZIZWFkZXJOYW1lOiAiWC1YU1JGLVRPS0VOIiwKICBtYXhDb250ZW50TGVuZ3RoOiAtMSwKICBtYXhCb2R5TGVuZ3RoOiAtMSwKICBlbnY6IHsKICAgIEZvcm1EYXRhOiBwbGF0Zm9ybV9kZWZhdWx0LmNsYXNzZXMuRm9ybURhdGEsCiAgICBCbG9iOiBwbGF0Zm9ybV9kZWZhdWx0LmNsYXNzZXMuQmxvYgogIH0sCiAgdmFsaWRhdGVTdGF0dXM6IGZ1bmN0aW9uIHZhbGlkYXRlU3RhdHVzKHN0YXR1cykgewogICAgcmV0dXJuIHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwOwogIH0sCiAgaGVhZGVyczogewogICAgY29tbW9uOiB7CiAgICAgICJBY2NlcHQiOiAiYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qIiwKICAgICAgIkNvbnRlbnQtVHlwZSI6IHZvaWQgMAogICAgfQogIH0KfTsKdXRpbHNfZGVmYXVsdC5mb3JFYWNoKFsiZGVsZXRlIiwgImdldCIsICJoZWFkIiwgInBvc3QiLCAicHV0IiwgInBhdGNoIl0sIChtZXRob2QpID0+IHsKICBkZWZhdWx0cy5oZWFkZXJzW21ldGhvZF0gPSB7fTsKfSk7CnZhciBkZWZhdWx0c19kZWZhdWx0ID0gZGVmYXVsdHM7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvcGFyc2VIZWFkZXJzLmpzCnZhciBpZ25vcmVEdXBsaWNhdGVPZiA9IHV0aWxzX2RlZmF1bHQudG9PYmplY3RTZXQoWwogICJhZ2UiLAogICJhdXRob3JpemF0aW9uIiwKICAiY29udGVudC1sZW5ndGgiLAogICJjb250ZW50LXR5cGUiLAogICJldGFnIiwKICAiZXhwaXJlcyIsCiAgImZyb20iLAogICJob3N0IiwKICAiaWYtbW9kaWZpZWQtc2luY2UiLAogICJpZi11bm1vZGlmaWVkLXNpbmNlIiwKICAibGFzdC1tb2RpZmllZCIsCiAgImxvY2F0aW9uIiwKICAibWF4LWZvcndhcmRzIiwKICAicHJveHktYXV0aG9yaXphdGlvbiIsCiAgInJlZmVyZXIiLAogICJyZXRyeS1hZnRlciIsCiAgInVzZXItYWdlbnQiCl0pOwp2YXIgcGFyc2VIZWFkZXJzX2RlZmF1bHQgPSAocmF3SGVhZGVycykgPT4gewogIGNvbnN0IHBhcnNlZCA9IHt9OwogIGxldCBrZXk7CiAgbGV0IHZhbDsKICBsZXQgaTsKICByYXdIZWFkZXJzICYmIHJhd0hlYWRlcnMuc3BsaXQoIlxuIikuZm9yRWFjaChmdW5jdGlvbiBwYXJzZXIobGluZSkgewogICAgaSA9IGxpbmUuaW5kZXhPZigiOiIpOwogICAga2V5ID0gbGluZS5zdWJzdHJpbmcoMCwgaSkudHJpbSgpLnRvTG93ZXJDYXNlKCk7CiAgICB2YWwgPSBsaW5lLnN1YnN0cmluZyhpICsgMSkudHJpbSgpOwogICAgaWYgKCFrZXkgfHwgcGFyc2VkW2tleV0gJiYgaWdub3JlRHVwbGljYXRlT2Zba2V5XSkgewogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoa2V5ID09PSAic2V0LWNvb2tpZSIpIHsKICAgICAgaWYgKHBhcnNlZFtrZXldKSB7CiAgICAgICAgcGFyc2VkW2tleV0ucHVzaCh2YWwpOwogICAgICB9IGVsc2UgewogICAgICAgIHBhcnNlZFtrZXldID0gW3ZhbF07CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHBhcnNlZFtrZXldID0gcGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSArICIsICIgKyB2YWwgOiB2YWw7CiAgICB9CiAgfSk7CiAgcmV0dXJuIHBhcnNlZDsKfTsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9BeGlvc0hlYWRlcnMuanMKdmFyICRpbnRlcm5hbHMgPSBTeW1ib2woImludGVybmFscyIpOwpmdW5jdGlvbiBub3JtYWxpemVIZWFkZXIoaGVhZGVyKSB7CiAgcmV0dXJuIGhlYWRlciAmJiBTdHJpbmcoaGVhZGVyKS50cmltKCkudG9Mb3dlckNhc2UoKTsKfQpmdW5jdGlvbiBub3JtYWxpemVWYWx1ZSh2YWx1ZSkgewogIGlmICh2YWx1ZSA9PT0gZmFsc2UgfHwgdmFsdWUgPT0gbnVsbCkgewogICAgcmV0dXJuIHZhbHVlOwogIH0KICByZXR1cm4gdXRpbHNfZGVmYXVsdC5pc0FycmF5KHZhbHVlKSA/IHZhbHVlLm1hcChub3JtYWxpemVWYWx1ZSkgOiBTdHJpbmcodmFsdWUpOwp9CmZ1bmN0aW9uIHBhcnNlVG9rZW5zKHN0cikgewogIGNvbnN0IHRva2VucyA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpOwogIGNvbnN0IHRva2Vuc1JFID0gLyhbXlxzLDs9XSspXHMqKD86PVxzKihbXiw7XSspKT8vZzsKICBsZXQgbWF0Y2g7CiAgd2hpbGUgKG1hdGNoID0gdG9rZW5zUkUuZXhlYyhzdHIpKSB7CiAgICB0b2tlbnNbbWF0Y2hbMV1dID0gbWF0Y2hbMl07CiAgfQogIHJldHVybiB0b2tlbnM7Cn0KdmFyIGlzVmFsaWRIZWFkZXJOYW1lID0gKHN0cikgPT4gL15bLV9hLXpBLVowLTleYHx+LCEjJCUmJyorLl0rJC8udGVzdChzdHIudHJpbSgpKTsKZnVuY3Rpb24gbWF0Y2hIZWFkZXJWYWx1ZShjb250ZXh0LCB2YWx1ZSwgaGVhZGVyLCBmaWx0ZXIyLCBpc0hlYWRlck5hbWVGaWx0ZXIpIHsKICBpZiAodXRpbHNfZGVmYXVsdC5pc0Z1bmN0aW9uKGZpbHRlcjIpKSB7CiAgICByZXR1cm4gZmlsdGVyMi5jYWxsKHRoaXMsIHZhbHVlLCBoZWFkZXIpOwogIH0KICBpZiAoaXNIZWFkZXJOYW1lRmlsdGVyKSB7CiAgICB2YWx1ZSA9IGhlYWRlcjsKICB9CiAgaWYgKCF1dGlsc19kZWZhdWx0LmlzU3RyaW5nKHZhbHVlKSkgcmV0dXJuOwogIGlmICh1dGlsc19kZWZhdWx0LmlzU3RyaW5nKGZpbHRlcjIpKSB7CiAgICByZXR1cm4gdmFsdWUuaW5kZXhPZihmaWx0ZXIyKSAhPT0gLTE7CiAgfQogIGlmICh1dGlsc19kZWZhdWx0LmlzUmVnRXhwKGZpbHRlcjIpKSB7CiAgICByZXR1cm4gZmlsdGVyMi50ZXN0KHZhbHVlKTsKICB9Cn0KZnVuY3Rpb24gZm9ybWF0SGVhZGVyKGhlYWRlcikgewogIHJldHVybiBoZWFkZXIudHJpbSgpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvKFthLXpcZF0pKFx3KikvZywgKHcsIGNoYXIsIHN0cikgPT4gewogICAgcmV0dXJuIGNoYXIudG9VcHBlckNhc2UoKSArIHN0cjsKICB9KTsKfQpmdW5jdGlvbiBidWlsZEFjY2Vzc29ycyhvYmosIGhlYWRlcikgewogIGNvbnN0IGFjY2Vzc29yTmFtZSA9IHV0aWxzX2RlZmF1bHQudG9DYW1lbENhc2UoIiAiICsgaGVhZGVyKTsKICBbImdldCIsICJzZXQiLCAiaGFzIl0uZm9yRWFjaCgobWV0aG9kTmFtZSkgPT4gewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgbWV0aG9kTmFtZSArIGFjY2Vzc29yTmFtZSwgewogICAgICB2YWx1ZTogZnVuY3Rpb24oYXJnMSwgYXJnMiwgYXJnMykgewogICAgICAgIHJldHVybiB0aGlzW21ldGhvZE5hbWVdLmNhbGwodGhpcywgaGVhZGVyLCBhcmcxLCBhcmcyLCBhcmczKTsKICAgICAgfSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICB9KTsKICB9KTsKfQp2YXIgQXhpb3NIZWFkZXJzID0gY2xhc3MgewogIGNvbnN0cnVjdG9yKGhlYWRlcnMpIHsKICAgIGhlYWRlcnMgJiYgdGhpcy5zZXQoaGVhZGVycyk7CiAgfQogIHNldChoZWFkZXIsIHZhbHVlT3JSZXdyaXRlLCByZXdyaXRlKSB7CiAgICBjb25zdCBzZWxmMiA9IHRoaXM7CiAgICBmdW5jdGlvbiBzZXRIZWFkZXIoX3ZhbHVlLCBfaGVhZGVyLCBfcmV3cml0ZSkgewogICAgICBjb25zdCBsSGVhZGVyID0gbm9ybWFsaXplSGVhZGVyKF9oZWFkZXIpOwogICAgICBpZiAoIWxIZWFkZXIpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoImhlYWRlciBuYW1lIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nIik7CiAgICAgIH0KICAgICAgY29uc3Qga2V5ID0gdXRpbHNfZGVmYXVsdC5maW5kS2V5KHNlbGYyLCBsSGVhZGVyKTsKICAgICAgaWYgKCFrZXkgfHwgc2VsZjJba2V5XSA9PT0gdm9pZCAwIHx8IF9yZXdyaXRlID09PSB0cnVlIHx8IF9yZXdyaXRlID09PSB2b2lkIDAgJiYgc2VsZjJba2V5XSAhPT0gZmFsc2UpIHsKICAgICAgICBzZWxmMltrZXkgfHwgX2hlYWRlcl0gPSBub3JtYWxpemVWYWx1ZShfdmFsdWUpOwogICAgICB9CiAgICB9CiAgICBjb25zdCBzZXRIZWFkZXJzID0gKGhlYWRlcnMsIF9yZXdyaXRlKSA9PiB1dGlsc19kZWZhdWx0LmZvckVhY2goaGVhZGVycywgKF92YWx1ZSwgX2hlYWRlcikgPT4gc2V0SGVhZGVyKF92YWx1ZSwgX2hlYWRlciwgX3Jld3JpdGUpKTsKICAgIGlmICh1dGlsc19kZWZhdWx0LmlzUGxhaW5PYmplY3QoaGVhZGVyKSB8fCBoZWFkZXIgaW5zdGFuY2VvZiB0aGlzLmNvbnN0cnVjdG9yKSB7CiAgICAgIHNldEhlYWRlcnMoaGVhZGVyLCB2YWx1ZU9yUmV3cml0ZSk7CiAgICB9IGVsc2UgaWYgKHV0aWxzX2RlZmF1bHQuaXNTdHJpbmcoaGVhZGVyKSAmJiAoaGVhZGVyID0gaGVhZGVyLnRyaW0oKSkgJiYgIWlzVmFsaWRIZWFkZXJOYW1lKGhlYWRlcikpIHsKICAgICAgc2V0SGVhZGVycyhwYXJzZUhlYWRlcnNfZGVmYXVsdChoZWFkZXIpLCB2YWx1ZU9yUmV3cml0ZSk7CiAgICB9IGVsc2UgaWYgKHV0aWxzX2RlZmF1bHQuaXNPYmplY3QoaGVhZGVyKSAmJiB1dGlsc19kZWZhdWx0LmlzSXRlcmFibGUoaGVhZGVyKSkgewogICAgICBsZXQgb2JqID0ge30sIGRlc3QsIGtleTsKICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBoZWFkZXIpIHsKICAgICAgICBpZiAoIXV0aWxzX2RlZmF1bHQuaXNBcnJheShlbnRyeSkpIHsKICAgICAgICAgIHRocm93IFR5cGVFcnJvcigiT2JqZWN0IGl0ZXJhdG9yIG11c3QgcmV0dXJuIGEga2V5LXZhbHVlIHBhaXIiKTsKICAgICAgICB9CiAgICAgICAgb2JqW2tleSA9IGVudHJ5WzBdXSA9IChkZXN0ID0gb2JqW2tleV0pID8gdXRpbHNfZGVmYXVsdC5pc0FycmF5KGRlc3QpID8gWy4uLmRlc3QsIGVudHJ5WzFdXSA6IFtkZXN0LCBlbnRyeVsxXV0gOiBlbnRyeVsxXTsKICAgICAgfQogICAgICBzZXRIZWFkZXJzKG9iaiwgdmFsdWVPclJld3JpdGUpOwogICAgfSBlbHNlIHsKICAgICAgaGVhZGVyICE9IG51bGwgJiYgc2V0SGVhZGVyKHZhbHVlT3JSZXdyaXRlLCBoZWFkZXIsIHJld3JpdGUpOwogICAgfQogICAgcmV0dXJuIHRoaXM7CiAgfQogIGdldChoZWFkZXIsIHBhcnNlcikgewogICAgaGVhZGVyID0gbm9ybWFsaXplSGVhZGVyKGhlYWRlcik7CiAgICBpZiAoaGVhZGVyKSB7CiAgICAgIGNvbnN0IGtleSA9IHV0aWxzX2RlZmF1bHQuZmluZEtleSh0aGlzLCBoZWFkZXIpOwogICAgICBpZiAoa2V5KSB7CiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzW2tleV07CiAgICAgICAgaWYgKCFwYXJzZXIpIHsKICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICB9CiAgICAgICAgaWYgKHBhcnNlciA9PT0gdHJ1ZSkgewogICAgICAgICAgcmV0dXJuIHBhcnNlVG9rZW5zKHZhbHVlKTsKICAgICAgICB9CiAgICAgICAgaWYgKHV0aWxzX2RlZmF1bHQuaXNGdW5jdGlvbihwYXJzZXIpKSB7CiAgICAgICAgICByZXR1cm4gcGFyc2VyLmNhbGwodGhpcywgdmFsdWUsIGtleSk7CiAgICAgICAgfQogICAgICAgIGlmICh1dGlsc19kZWZhdWx0LmlzUmVnRXhwKHBhcnNlcikpIHsKICAgICAgICAgIHJldHVybiBwYXJzZXIuZXhlYyh2YWx1ZSk7CiAgICAgICAgfQogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoInBhcnNlciBtdXN0IGJlIGJvb2xlYW58cmVnZXhwfGZ1bmN0aW9uIik7CiAgICAgIH0KICAgIH0KICB9CiAgaGFzKGhlYWRlciwgbWF0Y2hlcikgewogICAgaGVhZGVyID0gbm9ybWFsaXplSGVhZGVyKGhlYWRlcik7CiAgICBpZiAoaGVhZGVyKSB7CiAgICAgIGNvbnN0IGtleSA9IHV0aWxzX2RlZmF1bHQuZmluZEtleSh0aGlzLCBoZWFkZXIpOwogICAgICByZXR1cm4gISEoa2V5ICYmIHRoaXNba2V5XSAhPT0gdm9pZCAwICYmICghbWF0Y2hlciB8fCBtYXRjaEhlYWRlclZhbHVlKHRoaXMsIHRoaXNba2V5XSwga2V5LCBtYXRjaGVyKSkpOwogICAgfQogICAgcmV0dXJuIGZhbHNlOwogIH0KICBkZWxldGUoaGVhZGVyLCBtYXRjaGVyKSB7CiAgICBjb25zdCBzZWxmMiA9IHRoaXM7CiAgICBsZXQgZGVsZXRlZCA9IGZhbHNlOwogICAgZnVuY3Rpb24gZGVsZXRlSGVhZGVyKF9oZWFkZXIpIHsKICAgICAgX2hlYWRlciA9IG5vcm1hbGl6ZUhlYWRlcihfaGVhZGVyKTsKICAgICAgaWYgKF9oZWFkZXIpIHsKICAgICAgICBjb25zdCBrZXkgPSB1dGlsc19kZWZhdWx0LmZpbmRLZXkoc2VsZjIsIF9oZWFkZXIpOwogICAgICAgIGlmIChrZXkgJiYgKCFtYXRjaGVyIHx8IG1hdGNoSGVhZGVyVmFsdWUoc2VsZjIsIHNlbGYyW2tleV0sIGtleSwgbWF0Y2hlcikpKSB7CiAgICAgICAgICBkZWxldGUgc2VsZjJba2V5XTsKICAgICAgICAgIGRlbGV0ZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgaWYgKHV0aWxzX2RlZmF1bHQuaXNBcnJheShoZWFkZXIpKSB7CiAgICAgIGhlYWRlci5mb3JFYWNoKGRlbGV0ZUhlYWRlcik7CiAgICB9IGVsc2UgewogICAgICBkZWxldGVIZWFkZXIoaGVhZGVyKTsKICAgIH0KICAgIHJldHVybiBkZWxldGVkOwogIH0KICBjbGVhcihtYXRjaGVyKSB7CiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcyk7CiAgICBsZXQgaSA9IGtleXMubGVuZ3RoOwogICAgbGV0IGRlbGV0ZWQgPSBmYWxzZTsKICAgIHdoaWxlIChpLS0pIHsKICAgICAgY29uc3Qga2V5ID0ga2V5c1tpXTsKICAgICAgaWYgKCFtYXRjaGVyIHx8IG1hdGNoSGVhZGVyVmFsdWUodGhpcywgdGhpc1trZXldLCBrZXksIG1hdGNoZXIsIHRydWUpKSB7CiAgICAgICAgZGVsZXRlIHRoaXNba2V5XTsKICAgICAgICBkZWxldGVkID0gdHJ1ZTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGRlbGV0ZWQ7CiAgfQogIG5vcm1hbGl6ZShmb3JtYXQpIHsKICAgIGNvbnN0IHNlbGYyID0gdGhpczsKICAgIGNvbnN0IGhlYWRlcnMgPSB7fTsKICAgIHV0aWxzX2RlZmF1bHQuZm9yRWFjaCh0aGlzLCAodmFsdWUsIGhlYWRlcikgPT4gewogICAgICBjb25zdCBrZXkgPSB1dGlsc19kZWZhdWx0LmZpbmRLZXkoaGVhZGVycywgaGVhZGVyKTsKICAgICAgaWYgKGtleSkgewogICAgICAgIHNlbGYyW2tleV0gPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSk7CiAgICAgICAgZGVsZXRlIHNlbGYyW2hlYWRlcl07CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBmb3JtYXQgPyBmb3JtYXRIZWFkZXIoaGVhZGVyKSA6IFN0cmluZyhoZWFkZXIpLnRyaW0oKTsKICAgICAgaWYgKG5vcm1hbGl6ZWQgIT09IGhlYWRlcikgewogICAgICAgIGRlbGV0ZSBzZWxmMltoZWFkZXJdOwogICAgICB9CiAgICAgIHNlbGYyW25vcm1hbGl6ZWRdID0gbm9ybWFsaXplVmFsdWUodmFsdWUpOwogICAgICBoZWFkZXJzW25vcm1hbGl6ZWRdID0gdHJ1ZTsKICAgIH0pOwogICAgcmV0dXJuIHRoaXM7CiAgfQogIGNvbmNhdCguLi50YXJnZXRzKSB7CiAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5jb25jYXQodGhpcywgLi4udGFyZ2V0cyk7CiAgfQogIHRvSlNPTihhc1N0cmluZ3MpIHsKICAgIGNvbnN0IG9iaiA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgdXRpbHNfZGVmYXVsdC5mb3JFYWNoKHRoaXMsICh2YWx1ZSwgaGVhZGVyKSA9PiB7CiAgICAgIHZhbHVlICE9IG51bGwgJiYgdmFsdWUgIT09IGZhbHNlICYmIChvYmpbaGVhZGVyXSA9IGFzU3RyaW5ncyAmJiB1dGlsc19kZWZhdWx0LmlzQXJyYXkodmFsdWUpID8gdmFsdWUuam9pbigiLCAiKSA6IHZhbHVlKTsKICAgIH0pOwogICAgcmV0dXJuIG9iajsKICB9CiAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7CiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXModGhpcy50b0pTT04oKSlbU3ltYm9sLml0ZXJhdG9yXSgpOwogIH0KICB0b1N0cmluZygpIHsKICAgIHJldHVybiBPYmplY3QuZW50cmllcyh0aGlzLnRvSlNPTigpKS5tYXAoKFtoZWFkZXIsIHZhbHVlXSkgPT4gaGVhZGVyICsgIjogIiArIHZhbHVlKS5qb2luKCJcbiIpOwogIH0KICBnZXRTZXRDb29raWUoKSB7CiAgICByZXR1cm4gdGhpcy5nZXQoInNldC1jb29raWUiKSB8fCBbXTsKICB9CiAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkgewogICAgcmV0dXJuICJBeGlvc0hlYWRlcnMiOwogIH0KICBzdGF0aWMgZnJvbSh0aGluZykgewogICAgcmV0dXJuIHRoaW5nIGluc3RhbmNlb2YgdGhpcyA/IHRoaW5nIDogbmV3IHRoaXModGhpbmcpOwogIH0KICBzdGF0aWMgY29uY2F0KGZpcnN0LCAuLi50YXJnZXRzKSB7CiAgICBjb25zdCBjb21wdXRlZCA9IG5ldyB0aGlzKGZpcnN0KTsKICAgIHRhcmdldHMuZm9yRWFjaCgodGFyZ2V0KSA9PiBjb21wdXRlZC5zZXQodGFyZ2V0KSk7CiAgICByZXR1cm4gY29tcHV0ZWQ7CiAgfQogIHN0YXRpYyBhY2Nlc3NvcihoZWFkZXIpIHsKICAgIGNvbnN0IGludGVybmFscyA9IHRoaXNbJGludGVybmFsc10gPSB0aGlzWyRpbnRlcm5hbHNdID0gewogICAgICBhY2Nlc3NvcnM6IHt9CiAgICB9OwogICAgY29uc3QgYWNjZXNzb3JzID0gaW50ZXJuYWxzLmFjY2Vzc29yczsKICAgIGNvbnN0IHByb3RvdHlwZTMgPSB0aGlzLnByb3RvdHlwZTsKICAgIGZ1bmN0aW9uIGRlZmluZUFjY2Vzc29yKF9oZWFkZXIpIHsKICAgICAgY29uc3QgbEhlYWRlciA9IG5vcm1hbGl6ZUhlYWRlcihfaGVhZGVyKTsKICAgICAgaWYgKCFhY2Nlc3NvcnNbbEhlYWRlcl0pIHsKICAgICAgICBidWlsZEFjY2Vzc29ycyhwcm90b3R5cGUzLCBfaGVhZGVyKTsKICAgICAgICBhY2Nlc3NvcnNbbEhlYWRlcl0gPSB0cnVlOwogICAgICB9CiAgICB9CiAgICB1dGlsc19kZWZhdWx0LmlzQXJyYXkoaGVhZGVyKSA/IGhlYWRlci5mb3JFYWNoKGRlZmluZUFjY2Vzc29yKSA6IGRlZmluZUFjY2Vzc29yKGhlYWRlcik7CiAgICByZXR1cm4gdGhpczsKICB9Cn07CkF4aW9zSGVhZGVycy5hY2Nlc3NvcihbIkNvbnRlbnQtVHlwZSIsICJDb250ZW50LUxlbmd0aCIsICJBY2NlcHQiLCAiQWNjZXB0LUVuY29kaW5nIiwgIlVzZXItQWdlbnQiLCAiQXV0aG9yaXphdGlvbiJdKTsKdXRpbHNfZGVmYXVsdC5yZWR1Y2VEZXNjcmlwdG9ycyhBeGlvc0hlYWRlcnMucHJvdG90eXBlLCAoeyB2YWx1ZSB9LCBrZXkpID0+IHsKICBsZXQgbWFwcGVkID0ga2V5WzBdLnRvVXBwZXJDYXNlKCkgKyBrZXkuc2xpY2UoMSk7CiAgcmV0dXJuIHsKICAgIGdldDogKCkgPT4gdmFsdWUsCiAgICBzZXQoaGVhZGVyVmFsdWUpIHsKICAgICAgdGhpc1ttYXBwZWRdID0gaGVhZGVyVmFsdWU7CiAgICB9CiAgfTsKfSk7CnV0aWxzX2RlZmF1bHQuZnJlZXplTWV0aG9kcyhBeGlvc0hlYWRlcnMpOwp2YXIgQXhpb3NIZWFkZXJzX2RlZmF1bHQgPSBBeGlvc0hlYWRlcnM7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvdHJhbnNmb3JtRGF0YS5qcwpmdW5jdGlvbiB0cmFuc2Zvcm1EYXRhKGZucywgcmVzcG9uc2UpIHsKICBjb25zdCBjb25maWcgPSB0aGlzIHx8IGRlZmF1bHRzX2RlZmF1bHQ7CiAgY29uc3QgY29udGV4dCA9IHJlc3BvbnNlIHx8IGNvbmZpZzsKICBjb25zdCBoZWFkZXJzID0gQXhpb3NIZWFkZXJzX2RlZmF1bHQuZnJvbShjb250ZXh0LmhlYWRlcnMpOwogIGxldCBkYXRhID0gY29udGV4dC5kYXRhOwogIHV0aWxzX2RlZmF1bHQuZm9yRWFjaChmbnMsIGZ1bmN0aW9uIHRyYW5zZm9ybShmbikgewogICAgZGF0YSA9IGZuLmNhbGwoY29uZmlnLCBkYXRhLCBoZWFkZXJzLm5vcm1hbGl6ZSgpLCByZXNwb25zZSA/IHJlc3BvbnNlLnN0YXR1cyA6IHZvaWQgMCk7CiAgfSk7CiAgaGVhZGVycy5ub3JtYWxpemUoKTsKICByZXR1cm4gZGF0YTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvaXNDYW5jZWwuanMKZnVuY3Rpb24gaXNDYW5jZWwodmFsdWUpIHsKICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWUuX19DQU5DRUxfXyk7Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY2FuY2VsL0NhbmNlbGVkRXJyb3IuanMKZnVuY3Rpb24gQ2FuY2VsZWRFcnJvcihtZXNzYWdlLCBjb25maWcsIHJlcXVlc3QpIHsKICBBeGlvc0Vycm9yX2RlZmF1bHQuY2FsbCh0aGlzLCBtZXNzYWdlID09IG51bGwgPyAiY2FuY2VsZWQiIDogbWVzc2FnZSwgQXhpb3NFcnJvcl9kZWZhdWx0LkVSUl9DQU5DRUxFRCwgY29uZmlnLCByZXF1ZXN0KTsKICB0aGlzLm5hbWUgPSAiQ2FuY2VsZWRFcnJvciI7Cn0KdXRpbHNfZGVmYXVsdC5pbmhlcml0cyhDYW5jZWxlZEVycm9yLCBBeGlvc0Vycm9yX2RlZmF1bHQsIHsKICBfX0NBTkNFTF9fOiB0cnVlCn0pOwp2YXIgQ2FuY2VsZWRFcnJvcl9kZWZhdWx0ID0gQ2FuY2VsZWRFcnJvcjsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9zZXR0bGUuanMKZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgcmVzcG9uc2UpIHsKICBjb25zdCB2YWxpZGF0ZVN0YXR1czIgPSByZXNwb25zZS5jb25maWcudmFsaWRhdGVTdGF0dXM7CiAgaWYgKCFyZXNwb25zZS5zdGF0dXMgfHwgIXZhbGlkYXRlU3RhdHVzMiB8fCB2YWxpZGF0ZVN0YXR1czIocmVzcG9uc2Uuc3RhdHVzKSkgewogICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgfSBlbHNlIHsKICAgIHJlamVjdChuZXcgQXhpb3NFcnJvcl9kZWZhdWx0KAogICAgICAiUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSAiICsgcmVzcG9uc2Uuc3RhdHVzLAogICAgICBbQXhpb3NFcnJvcl9kZWZhdWx0LkVSUl9CQURfUkVRVUVTVCwgQXhpb3NFcnJvcl9kZWZhdWx0LkVSUl9CQURfUkVTUE9OU0VdW01hdGguZmxvb3IocmVzcG9uc2Uuc3RhdHVzIC8gMTAwKSAtIDRdLAogICAgICByZXNwb25zZS5jb25maWcsCiAgICAgIHJlc3BvbnNlLnJlcXVlc3QsCiAgICAgIHJlc3BvbnNlCiAgICApKTsKICB9Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9wYXJzZVByb3RvY29sLmpzCmZ1bmN0aW9uIHBhcnNlUHJvdG9jb2wodXJsKSB7CiAgY29uc3QgbWF0Y2ggPSAvXihbLStcd117MSwyNX0pKDo/XC9cL3w6KS8uZXhlYyh1cmwpOwogIHJldHVybiBtYXRjaCAmJiBtYXRjaFsxXSB8fCAiIjsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3NwZWVkb21ldGVyLmpzCmZ1bmN0aW9uIHNwZWVkb21ldGVyKHNhbXBsZXNDb3VudCwgbWluKSB7CiAgc2FtcGxlc0NvdW50ID0gc2FtcGxlc0NvdW50IHx8IDEwOwogIGNvbnN0IGJ5dGVzID0gbmV3IEFycmF5KHNhbXBsZXNDb3VudCk7CiAgY29uc3QgdGltZXN0YW1wcyA9IG5ldyBBcnJheShzYW1wbGVzQ291bnQpOwogIGxldCBoZWFkID0gMDsKICBsZXQgdGFpbCA9IDA7CiAgbGV0IGZpcnN0U2FtcGxlVFM7CiAgbWluID0gbWluICE9PSB2b2lkIDAgPyBtaW4gOiAxZTM7CiAgcmV0dXJuIGZ1bmN0aW9uIHB1c2goY2h1bmtMZW5ndGgpIHsKICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7CiAgICBjb25zdCBzdGFydGVkQXQgPSB0aW1lc3RhbXBzW3RhaWxdOwogICAgaWYgKCFmaXJzdFNhbXBsZVRTKSB7CiAgICAgIGZpcnN0U2FtcGxlVFMgPSBub3c7CiAgICB9CiAgICBieXRlc1toZWFkXSA9IGNodW5rTGVuZ3RoOwogICAgdGltZXN0YW1wc1toZWFkXSA9IG5vdzsKICAgIGxldCBpID0gdGFpbDsKICAgIGxldCBieXRlc0NvdW50ID0gMDsKICAgIHdoaWxlIChpICE9PSBoZWFkKSB7CiAgICAgIGJ5dGVzQ291bnQgKz0gYnl0ZXNbaSsrXTsKICAgICAgaSA9IGkgJSBzYW1wbGVzQ291bnQ7CiAgICB9CiAgICBoZWFkID0gKGhlYWQgKyAxKSAlIHNhbXBsZXNDb3VudDsKICAgIGlmIChoZWFkID09PSB0YWlsKSB7CiAgICAgIHRhaWwgPSAodGFpbCArIDEpICUgc2FtcGxlc0NvdW50OwogICAgfQogICAgaWYgKG5vdyAtIGZpcnN0U2FtcGxlVFMgPCBtaW4pIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgY29uc3QgcGFzc2VkID0gc3RhcnRlZEF0ICYmIG5vdyAtIHN0YXJ0ZWRBdDsKICAgIHJldHVybiBwYXNzZWQgPyBNYXRoLnJvdW5kKGJ5dGVzQ291bnQgKiAxZTMgLyBwYXNzZWQpIDogdm9pZCAwOwogIH07Cn0KdmFyIHNwZWVkb21ldGVyX2RlZmF1bHQgPSBzcGVlZG9tZXRlcjsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy90aHJvdHRsZS5qcwpmdW5jdGlvbiB0aHJvdHRsZShmbiwgZnJlcSkgewogIGxldCB0aW1lc3RhbXAgPSAwOwogIGxldCB0aHJlc2hvbGQgPSAxZTMgLyBmcmVxOwogIGxldCBsYXN0QXJnczsKICBsZXQgdGltZXI7CiAgY29uc3QgaW52b2tlID0gKGFyZ3MsIG5vdyA9IERhdGUubm93KCkpID0+IHsKICAgIHRpbWVzdGFtcCA9IG5vdzsKICAgIGxhc3RBcmdzID0gbnVsbDsKICAgIGlmICh0aW1lcikgewogICAgICBjbGVhclRpbWVvdXQodGltZXIpOwogICAgICB0aW1lciA9IG51bGw7CiAgICB9CiAgICBmbiguLi5hcmdzKTsKICB9OwogIGNvbnN0IHRocm90dGxlZCA9ICguLi5hcmdzKSA9PiB7CiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpOwogICAgY29uc3QgcGFzc2VkID0gbm93IC0gdGltZXN0YW1wOwogICAgaWYgKHBhc3NlZCA+PSB0aHJlc2hvbGQpIHsKICAgICAgaW52b2tlKGFyZ3MsIG5vdyk7CiAgICB9IGVsc2UgewogICAgICBsYXN0QXJncyA9IGFyZ3M7CiAgICAgIGlmICghdGltZXIpIHsKICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGltZXIgPSBudWxsOwogICAgICAgICAgaW52b2tlKGxhc3RBcmdzKTsKICAgICAgICB9LCB0aHJlc2hvbGQgLSBwYXNzZWQpOwogICAgICB9CiAgICB9CiAgfTsKICBjb25zdCBmbHVzaCA9ICgpID0+IGxhc3RBcmdzICYmIGludm9rZShsYXN0QXJncyk7CiAgcmV0dXJuIFt0aHJvdHRsZWQsIGZsdXNoXTsKfQp2YXIgdGhyb3R0bGVfZGVmYXVsdCA9IHRocm90dGxlOwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3Byb2dyZXNzRXZlbnRSZWR1Y2VyLmpzCnZhciBwcm9ncmVzc0V2ZW50UmVkdWNlciA9IChsaXN0ZW5lciwgaXNEb3dubG9hZFN0cmVhbSwgZnJlcSA9IDMpID0+IHsKICBsZXQgYnl0ZXNOb3RpZmllZCA9IDA7CiAgY29uc3QgX3NwZWVkb21ldGVyID0gc3BlZWRvbWV0ZXJfZGVmYXVsdCg1MCwgMjUwKTsKICByZXR1cm4gdGhyb3R0bGVfZGVmYXVsdCgoZSkgPT4gewogICAgY29uc3QgbG9hZGVkID0gZS5sb2FkZWQ7CiAgICBjb25zdCB0b3RhbCA9IGUubGVuZ3RoQ29tcHV0YWJsZSA/IGUudG90YWwgOiB2b2lkIDA7CiAgICBjb25zdCBwcm9ncmVzc0J5dGVzID0gbG9hZGVkIC0gYnl0ZXNOb3RpZmllZDsKICAgIGNvbnN0IHJhdGUgPSBfc3BlZWRvbWV0ZXIocHJvZ3Jlc3NCeXRlcyk7CiAgICBjb25zdCBpblJhbmdlID0gbG9hZGVkIDw9IHRvdGFsOwogICAgYnl0ZXNOb3RpZmllZCA9IGxvYWRlZDsKICAgIGNvbnN0IGRhdGEgPSB7CiAgICAgIGxvYWRlZCwKICAgICAgdG90YWwsCiAgICAgIHByb2dyZXNzOiB0b3RhbCA/IGxvYWRlZCAvIHRvdGFsIDogdm9pZCAwLAogICAgICBieXRlczogcHJvZ3Jlc3NCeXRlcywKICAgICAgcmF0ZTogcmF0ZSA/IHJhdGUgOiB2b2lkIDAsCiAgICAgIGVzdGltYXRlZDogcmF0ZSAmJiB0b3RhbCAmJiBpblJhbmdlID8gKHRvdGFsIC0gbG9hZGVkKSAvIHJhdGUgOiB2b2lkIDAsCiAgICAgIGV2ZW50OiBlLAogICAgICBsZW5ndGhDb21wdXRhYmxlOiB0b3RhbCAhPSBudWxsLAogICAgICBbaXNEb3dubG9hZFN0cmVhbSA/ICJkb3dubG9hZCIgOiAidXBsb2FkIl06IHRydWUKICAgIH07CiAgICBsaXN0ZW5lcihkYXRhKTsKICB9LCBmcmVxKTsKfTsKdmFyIHByb2dyZXNzRXZlbnREZWNvcmF0b3IgPSAodG90YWwsIHRocm90dGxlZCkgPT4gewogIGNvbnN0IGxlbmd0aENvbXB1dGFibGUgPSB0b3RhbCAhPSBudWxsOwogIHJldHVybiBbKGxvYWRlZCkgPT4gdGhyb3R0bGVkWzBdKHsKICAgIGxlbmd0aENvbXB1dGFibGUsCiAgICB0b3RhbCwKICAgIGxvYWRlZAogIH0pLCB0aHJvdHRsZWRbMV1dOwp9Owp2YXIgYXN5bmNEZWNvcmF0b3IgPSAoZm4pID0+ICguLi5hcmdzKSA9PiB1dGlsc19kZWZhdWx0LmFzYXAoKCkgPT4gZm4oLi4uYXJncykpOwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2lzVVJMU2FtZU9yaWdpbi5qcwp2YXIgaXNVUkxTYW1lT3JpZ2luX2RlZmF1bHQgPSBwbGF0Zm9ybV9kZWZhdWx0Lmhhc1N0YW5kYXJkQnJvd3NlckVudiA/IC8qIEBfX1BVUkVfXyAqLyAoKG9yaWdpbjIsIGlzTVNJRSkgPT4gKHVybCkgPT4gewogIHVybCA9IG5ldyBVUkwodXJsLCBwbGF0Zm9ybV9kZWZhdWx0Lm9yaWdpbik7CiAgcmV0dXJuIG9yaWdpbjIucHJvdG9jb2wgPT09IHVybC5wcm90b2NvbCAmJiBvcmlnaW4yLmhvc3QgPT09IHVybC5ob3N0ICYmIChpc01TSUUgfHwgb3JpZ2luMi5wb3J0ID09PSB1cmwucG9ydCk7Cn0pKAogIG5ldyBVUkwocGxhdGZvcm1fZGVmYXVsdC5vcmlnaW4pLAogIHBsYXRmb3JtX2RlZmF1bHQubmF2aWdhdG9yICYmIC8obXNpZXx0cmlkZW50KS9pLnRlc3QocGxhdGZvcm1fZGVmYXVsdC5uYXZpZ2F0b3IudXNlckFnZW50KQopIDogKCkgPT4gdHJ1ZTsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9jb29raWVzLmpzCnZhciBjb29raWVzX2RlZmF1bHQgPSBwbGF0Zm9ybV9kZWZhdWx0Lmhhc1N0YW5kYXJkQnJvd3NlckVudiA/ICgKICAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgc3VwcG9ydCBkb2N1bWVudC5jb29raWUKICB7CiAgICB3cml0ZShuYW1lLCB2YWx1ZSwgZXhwaXJlcywgcGF0aCwgZG9tYWluLCBzZWN1cmUpIHsKICAgICAgY29uc3QgY29va2llID0gW25hbWUgKyAiPSIgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpXTsKICAgICAgdXRpbHNfZGVmYXVsdC5pc051bWJlcihleHBpcmVzKSAmJiBjb29raWUucHVzaCgiZXhwaXJlcz0iICsgbmV3IERhdGUoZXhwaXJlcykudG9HTVRTdHJpbmcoKSk7CiAgICAgIHV0aWxzX2RlZmF1bHQuaXNTdHJpbmcocGF0aCkgJiYgY29va2llLnB1c2goInBhdGg9IiArIHBhdGgpOwogICAgICB1dGlsc19kZWZhdWx0LmlzU3RyaW5nKGRvbWFpbikgJiYgY29va2llLnB1c2goImRvbWFpbj0iICsgZG9tYWluKTsKICAgICAgc2VjdXJlID09PSB0cnVlICYmIGNvb2tpZS5wdXNoKCJzZWN1cmUiKTsKICAgICAgZG9jdW1lbnQuY29va2llID0gY29va2llLmpvaW4oIjsgIik7CiAgICB9LAogICAgcmVhZChuYW1lKSB7CiAgICAgIGNvbnN0IG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoIihefDtcXHMqKSgiICsgbmFtZSArICIpPShbXjtdKikiKSk7CiAgICAgIHJldHVybiBtYXRjaCA/IGRlY29kZVVSSUNvbXBvbmVudChtYXRjaFszXSkgOiBudWxsOwogICAgfSwKICAgIHJlbW92ZShuYW1lKSB7CiAgICAgIHRoaXMud3JpdGUobmFtZSwgIiIsIERhdGUubm93KCkgLSA4NjRlNSk7CiAgICB9CiAgfQopIDogKAogIC8vIE5vbi1zdGFuZGFyZCBicm93c2VyIGVudiAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC4KICB7CiAgICB3cml0ZSgpIHsKICAgIH0sCiAgICByZWFkKCkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0sCiAgICByZW1vdmUoKSB7CiAgICB9CiAgfQopOwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2lzQWJzb2x1dGVVUkwuanMKZnVuY3Rpb24gaXNBYnNvbHV0ZVVSTCh1cmwpIHsKICByZXR1cm4gL14oW2Etel1bYS16XGQrXC0uXSo6KT9cL1wvL2kudGVzdCh1cmwpOwp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvY29tYmluZVVSTHMuanMKZnVuY3Rpb24gY29tYmluZVVSTHMoYmFzZVVSTCwgcmVsYXRpdmVVUkwpIHsKICByZXR1cm4gcmVsYXRpdmVVUkwgPyBiYXNlVVJMLnJlcGxhY2UoL1wvP1wvJC8sICIiKSArICIvIiArIHJlbGF0aXZlVVJMLnJlcGxhY2UoL15cLysvLCAiIikgOiBiYXNlVVJMOwp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvYnVpbGRGdWxsUGF0aC5qcwpmdW5jdGlvbiBidWlsZEZ1bGxQYXRoKGJhc2VVUkwsIHJlcXVlc3RlZFVSTCwgYWxsb3dBYnNvbHV0ZVVybHMpIHsKICBsZXQgaXNSZWxhdGl2ZVVybCA9ICFpc0Fic29sdXRlVVJMKHJlcXVlc3RlZFVSTCk7CiAgaWYgKGJhc2VVUkwgJiYgKGlzUmVsYXRpdmVVcmwgfHwgYWxsb3dBYnNvbHV0ZVVybHMgPT0gZmFsc2UpKSB7CiAgICByZXR1cm4gY29tYmluZVVSTHMoYmFzZVVSTCwgcmVxdWVzdGVkVVJMKTsKICB9CiAgcmV0dXJuIHJlcXVlc3RlZFVSTDsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL21lcmdlQ29uZmlnLmpzCnZhciBoZWFkZXJzVG9PYmplY3QgPSAodGhpbmcpID0+IHRoaW5nIGluc3RhbmNlb2YgQXhpb3NIZWFkZXJzX2RlZmF1bHQgPyB7IC4uLnRoaW5nIH0gOiB0aGluZzsKZnVuY3Rpb24gbWVyZ2VDb25maWcoY29uZmlnMSwgY29uZmlnMikgewogIGNvbmZpZzIgPSBjb25maWcyIHx8IHt9OwogIGNvbnN0IGNvbmZpZyA9IHt9OwogIGZ1bmN0aW9uIGdldE1lcmdlZFZhbHVlKHRhcmdldCwgc291cmNlLCBwcm9wLCBjYXNlbGVzcykgewogICAgaWYgKHV0aWxzX2RlZmF1bHQuaXNQbGFpbk9iamVjdCh0YXJnZXQpICYmIHV0aWxzX2RlZmF1bHQuaXNQbGFpbk9iamVjdChzb3VyY2UpKSB7CiAgICAgIHJldHVybiB1dGlsc19kZWZhdWx0Lm1lcmdlLmNhbGwoeyBjYXNlbGVzcyB9LCB0YXJnZXQsIHNvdXJjZSk7CiAgICB9IGVsc2UgaWYgKHV0aWxzX2RlZmF1bHQuaXNQbGFpbk9iamVjdChzb3VyY2UpKSB7CiAgICAgIHJldHVybiB1dGlsc19kZWZhdWx0Lm1lcmdlKHt9LCBzb3VyY2UpOwogICAgfSBlbHNlIGlmICh1dGlsc19kZWZhdWx0LmlzQXJyYXkoc291cmNlKSkgewogICAgICByZXR1cm4gc291cmNlLnNsaWNlKCk7CiAgICB9CiAgICByZXR1cm4gc291cmNlOwogIH0KICBmdW5jdGlvbiBtZXJnZURlZXBQcm9wZXJ0aWVzKGEsIGIsIHByb3AsIGNhc2VsZXNzKSB7CiAgICBpZiAoIXV0aWxzX2RlZmF1bHQuaXNVbmRlZmluZWQoYikpIHsKICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKGEsIGIsIHByb3AsIGNhc2VsZXNzKTsKICAgIH0gZWxzZSBpZiAoIXV0aWxzX2RlZmF1bHQuaXNVbmRlZmluZWQoYSkpIHsKICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHZvaWQgMCwgYSwgcHJvcCwgY2FzZWxlc3MpOwogICAgfQogIH0KICBmdW5jdGlvbiB2YWx1ZUZyb21Db25maWcyKGEsIGIpIHsKICAgIGlmICghdXRpbHNfZGVmYXVsdC5pc1VuZGVmaW5lZChiKSkgewogICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodm9pZCAwLCBiKTsKICAgIH0KICB9CiAgZnVuY3Rpb24gZGVmYXVsdFRvQ29uZmlnMihhLCBiKSB7CiAgICBpZiAoIXV0aWxzX2RlZmF1bHQuaXNVbmRlZmluZWQoYikpIHsKICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHZvaWQgMCwgYik7CiAgICB9IGVsc2UgaWYgKCF1dGlsc19kZWZhdWx0LmlzVW5kZWZpbmVkKGEpKSB7CiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZSh2b2lkIDAsIGEpOwogICAgfQogIH0KICBmdW5jdGlvbiBtZXJnZURpcmVjdEtleXMoYSwgYiwgcHJvcCkgewogICAgaWYgKHByb3AgaW4gY29uZmlnMikgewogICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUoYSwgYik7CiAgICB9IGVsc2UgaWYgKHByb3AgaW4gY29uZmlnMSkgewogICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodm9pZCAwLCBhKTsKICAgIH0KICB9CiAgY29uc3QgbWVyZ2VNYXAgPSB7CiAgICB1cmw6IHZhbHVlRnJvbUNvbmZpZzIsCiAgICBtZXRob2Q6IHZhbHVlRnJvbUNvbmZpZzIsCiAgICBkYXRhOiB2YWx1ZUZyb21Db25maWcyLAogICAgYmFzZVVSTDogZGVmYXVsdFRvQ29uZmlnMiwKICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGRlZmF1bHRUb0NvbmZpZzIsCiAgICB0cmFuc2Zvcm1SZXNwb25zZTogZGVmYXVsdFRvQ29uZmlnMiwKICAgIHBhcmFtc1NlcmlhbGl6ZXI6IGRlZmF1bHRUb0NvbmZpZzIsCiAgICB0aW1lb3V0OiBkZWZhdWx0VG9Db25maWcyLAogICAgdGltZW91dE1lc3NhZ2U6IGRlZmF1bHRUb0NvbmZpZzIsCiAgICB3aXRoQ3JlZGVudGlhbHM6IGRlZmF1bHRUb0NvbmZpZzIsCiAgICB3aXRoWFNSRlRva2VuOiBkZWZhdWx0VG9Db25maWcyLAogICAgYWRhcHRlcjogZGVmYXVsdFRvQ29uZmlnMiwKICAgIHJlc3BvbnNlVHlwZTogZGVmYXVsdFRvQ29uZmlnMiwKICAgIHhzcmZDb29raWVOYW1lOiBkZWZhdWx0VG9Db25maWcyLAogICAgeHNyZkhlYWRlck5hbWU6IGRlZmF1bHRUb0NvbmZpZzIsCiAgICBvblVwbG9hZFByb2dyZXNzOiBkZWZhdWx0VG9Db25maWcyLAogICAgb25Eb3dubG9hZFByb2dyZXNzOiBkZWZhdWx0VG9Db25maWcyLAogICAgZGVjb21wcmVzczogZGVmYXVsdFRvQ29uZmlnMiwKICAgIG1heENvbnRlbnRMZW5ndGg6IGRlZmF1bHRUb0NvbmZpZzIsCiAgICBtYXhCb2R5TGVuZ3RoOiBkZWZhdWx0VG9Db25maWcyLAogICAgYmVmb3JlUmVkaXJlY3Q6IGRlZmF1bHRUb0NvbmZpZzIsCiAgICB0cmFuc3BvcnQ6IGRlZmF1bHRUb0NvbmZpZzIsCiAgICBodHRwQWdlbnQ6IGRlZmF1bHRUb0NvbmZpZzIsCiAgICBodHRwc0FnZW50OiBkZWZhdWx0VG9Db25maWcyLAogICAgY2FuY2VsVG9rZW46IGRlZmF1bHRUb0NvbmZpZzIsCiAgICBzb2NrZXRQYXRoOiBkZWZhdWx0VG9Db25maWcyLAogICAgcmVzcG9uc2VFbmNvZGluZzogZGVmYXVsdFRvQ29uZmlnMiwKICAgIHZhbGlkYXRlU3RhdHVzOiBtZXJnZURpcmVjdEtleXMsCiAgICBoZWFkZXJzOiAoYSwgYiwgcHJvcCkgPT4gbWVyZ2VEZWVwUHJvcGVydGllcyhoZWFkZXJzVG9PYmplY3QoYSksIGhlYWRlcnNUb09iamVjdChiKSwgcHJvcCwgdHJ1ZSkKICB9OwogIHV0aWxzX2RlZmF1bHQuZm9yRWFjaChPYmplY3Qua2V5cyh7IC4uLmNvbmZpZzEsIC4uLmNvbmZpZzIgfSksIGZ1bmN0aW9uIGNvbXB1dGVDb25maWdWYWx1ZShwcm9wKSB7CiAgICBjb25zdCBtZXJnZTIgPSBtZXJnZU1hcFtwcm9wXSB8fCBtZXJnZURlZXBQcm9wZXJ0aWVzOwogICAgY29uc3QgY29uZmlnVmFsdWUgPSBtZXJnZTIoY29uZmlnMVtwcm9wXSwgY29uZmlnMltwcm9wXSwgcHJvcCk7CiAgICB1dGlsc19kZWZhdWx0LmlzVW5kZWZpbmVkKGNvbmZpZ1ZhbHVlKSAmJiBtZXJnZTIgIT09IG1lcmdlRGlyZWN0S2V5cyB8fCAoY29uZmlnW3Byb3BdID0gY29uZmlnVmFsdWUpOwogIH0pOwogIHJldHVybiBjb25maWc7Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9yZXNvbHZlQ29uZmlnLmpzCnZhciByZXNvbHZlQ29uZmlnX2RlZmF1bHQgPSAoY29uZmlnKSA9PiB7CiAgY29uc3QgbmV3Q29uZmlnID0gbWVyZ2VDb25maWcoe30sIGNvbmZpZyk7CiAgbGV0IHsgZGF0YSwgd2l0aFhTUkZUb2tlbiwgeHNyZkhlYWRlck5hbWUsIHhzcmZDb29raWVOYW1lLCBoZWFkZXJzLCBhdXRoIH0gPSBuZXdDb25maWc7CiAgbmV3Q29uZmlnLmhlYWRlcnMgPSBoZWFkZXJzID0gQXhpb3NIZWFkZXJzX2RlZmF1bHQuZnJvbShoZWFkZXJzKTsKICBuZXdDb25maWcudXJsID0gYnVpbGRVUkwoYnVpbGRGdWxsUGF0aChuZXdDb25maWcuYmFzZVVSTCwgbmV3Q29uZmlnLnVybCwgbmV3Q29uZmlnLmFsbG93QWJzb2x1dGVVcmxzKSwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpOwogIGlmIChhdXRoKSB7CiAgICBoZWFkZXJzLnNldCgKICAgICAgIkF1dGhvcml6YXRpb24iLAogICAgICAiQmFzaWMgIiArIGJ0b2EoKGF1dGgudXNlcm5hbWUgfHwgIiIpICsgIjoiICsgKGF1dGgucGFzc3dvcmQgPyB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoYXV0aC5wYXNzd29yZCkpIDogIiIpKQogICAgKTsKICB9CiAgaWYgKHV0aWxzX2RlZmF1bHQuaXNGb3JtRGF0YShkYXRhKSkgewogICAgaWYgKHBsYXRmb3JtX2RlZmF1bHQuaGFzU3RhbmRhcmRCcm93c2VyRW52IHx8IHBsYXRmb3JtX2RlZmF1bHQuaGFzU3RhbmRhcmRCcm93c2VyV2ViV29ya2VyRW52KSB7CiAgICAgIGhlYWRlcnMuc2V0Q29udGVudFR5cGUodm9pZCAwKTsKICAgIH0gZWxzZSBpZiAodXRpbHNfZGVmYXVsdC5pc0Z1bmN0aW9uKGRhdGEuZ2V0SGVhZGVycykpIHsKICAgICAgY29uc3QgZm9ybUhlYWRlcnMgPSBkYXRhLmdldEhlYWRlcnMoKTsKICAgICAgY29uc3QgYWxsb3dlZEhlYWRlcnMgPSBbImNvbnRlbnQtdHlwZSIsICJjb250ZW50LWxlbmd0aCJdOwogICAgICBPYmplY3QuZW50cmllcyhmb3JtSGVhZGVycykuZm9yRWFjaCgoW2tleSwgdmFsXSkgPT4gewogICAgICAgIGlmIChhbGxvd2VkSGVhZGVycy5pbmNsdWRlcyhrZXkudG9Mb3dlckNhc2UoKSkpIHsKICAgICAgICAgIGhlYWRlcnMuc2V0KGtleSwgdmFsKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KICBpZiAocGxhdGZvcm1fZGVmYXVsdC5oYXNTdGFuZGFyZEJyb3dzZXJFbnYpIHsKICAgIHdpdGhYU1JGVG9rZW4gJiYgdXRpbHNfZGVmYXVsdC5pc0Z1bmN0aW9uKHdpdGhYU1JGVG9rZW4pICYmICh3aXRoWFNSRlRva2VuID0gd2l0aFhTUkZUb2tlbihuZXdDb25maWcpKTsKICAgIGlmICh3aXRoWFNSRlRva2VuIHx8IHdpdGhYU1JGVG9rZW4gIT09IGZhbHNlICYmIGlzVVJMU2FtZU9yaWdpbl9kZWZhdWx0KG5ld0NvbmZpZy51cmwpKSB7CiAgICAgIGNvbnN0IHhzcmZWYWx1ZSA9IHhzcmZIZWFkZXJOYW1lICYmIHhzcmZDb29raWVOYW1lICYmIGNvb2tpZXNfZGVmYXVsdC5yZWFkKHhzcmZDb29raWVOYW1lKTsKICAgICAgaWYgKHhzcmZWYWx1ZSkgewogICAgICAgIGhlYWRlcnMuc2V0KHhzcmZIZWFkZXJOYW1lLCB4c3JmVmFsdWUpOwogICAgICB9CiAgICB9CiAgfQogIHJldHVybiBuZXdDb25maWc7Cn07CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2FkYXB0ZXJzL3hoci5qcwp2YXIgaXNYSFJBZGFwdGVyU3VwcG9ydGVkID0gdHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICE9PSAidW5kZWZpbmVkIjsKdmFyIHhocl9kZWZhdWx0ID0gaXNYSFJBZGFwdGVyU3VwcG9ydGVkICYmIGZ1bmN0aW9uKGNvbmZpZykgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBkaXNwYXRjaFhoclJlcXVlc3QocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICBjb25zdCBfY29uZmlnID0gcmVzb2x2ZUNvbmZpZ19kZWZhdWx0KGNvbmZpZyk7CiAgICBsZXQgcmVxdWVzdERhdGEgPSBfY29uZmlnLmRhdGE7CiAgICBjb25zdCByZXF1ZXN0SGVhZGVycyA9IEF4aW9zSGVhZGVyc19kZWZhdWx0LmZyb20oX2NvbmZpZy5oZWFkZXJzKS5ub3JtYWxpemUoKTsKICAgIGxldCB7IHJlc3BvbnNlVHlwZSwgb25VcGxvYWRQcm9ncmVzcywgb25Eb3dubG9hZFByb2dyZXNzIH0gPSBfY29uZmlnOwogICAgbGV0IG9uQ2FuY2VsZWQ7CiAgICBsZXQgdXBsb2FkVGhyb3R0bGVkLCBkb3dubG9hZFRocm90dGxlZDsKICAgIGxldCBmbHVzaFVwbG9hZCwgZmx1c2hEb3dubG9hZDsKICAgIGZ1bmN0aW9uIGRvbmUoKSB7CiAgICAgIGZsdXNoVXBsb2FkICYmIGZsdXNoVXBsb2FkKCk7CiAgICAgIGZsdXNoRG93bmxvYWQgJiYgZmx1c2hEb3dubG9hZCgpOwogICAgICBfY29uZmlnLmNhbmNlbFRva2VuICYmIF9jb25maWcuY2FuY2VsVG9rZW4udW5zdWJzY3JpYmUob25DYW5jZWxlZCk7CiAgICAgIF9jb25maWcuc2lnbmFsICYmIF9jb25maWcuc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoImFib3J0Iiwgb25DYW5jZWxlZCk7CiAgICB9CiAgICBsZXQgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgcmVxdWVzdC5vcGVuKF9jb25maWcubWV0aG9kLnRvVXBwZXJDYXNlKCksIF9jb25maWcudXJsLCB0cnVlKTsKICAgIHJlcXVlc3QudGltZW91dCA9IF9jb25maWcudGltZW91dDsKICAgIGZ1bmN0aW9uIG9ubG9hZGVuZCgpIHsKICAgICAgaWYgKCFyZXF1ZXN0KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IHJlc3BvbnNlSGVhZGVycyA9IEF4aW9zSGVhZGVyc19kZWZhdWx0LmZyb20oCiAgICAgICAgImdldEFsbFJlc3BvbnNlSGVhZGVycyIgaW4gcmVxdWVzdCAmJiByZXF1ZXN0LmdldEFsbFJlc3BvbnNlSGVhZGVycygpCiAgICAgICk7CiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9ICFyZXNwb25zZVR5cGUgfHwgcmVzcG9uc2VUeXBlID09PSAidGV4dCIgfHwgcmVzcG9uc2VUeXBlID09PSAianNvbiIgPyByZXF1ZXN0LnJlc3BvbnNlVGV4dCA6IHJlcXVlc3QucmVzcG9uc2U7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gewogICAgICAgIGRhdGE6IHJlc3BvbnNlRGF0YSwKICAgICAgICBzdGF0dXM6IHJlcXVlc3Quc3RhdHVzLAogICAgICAgIHN0YXR1c1RleHQ6IHJlcXVlc3Quc3RhdHVzVGV4dCwKICAgICAgICBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMsCiAgICAgICAgY29uZmlnLAogICAgICAgIHJlcXVlc3QKICAgICAgfTsKICAgICAgc2V0dGxlKGZ1bmN0aW9uIF9yZXNvbHZlKHZhbHVlKSB7CiAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7CiAgICAgICAgZG9uZSgpOwogICAgICB9LCBmdW5jdGlvbiBfcmVqZWN0KGVycikgewogICAgICAgIHJlamVjdChlcnIpOwogICAgICAgIGRvbmUoKTsKICAgICAgfSwgcmVzcG9uc2UpOwogICAgICByZXF1ZXN0ID0gbnVsbDsKICAgIH0KICAgIGlmICgib25sb2FkZW5kIiBpbiByZXF1ZXN0KSB7CiAgICAgIHJlcXVlc3Qub25sb2FkZW5kID0gb25sb2FkZW5kOwogICAgfSBlbHNlIHsKICAgICAgcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVMb2FkKCkgewogICAgICAgIGlmICghcmVxdWVzdCB8fCByZXF1ZXN0LnJlYWR5U3RhdGUgIT09IDQpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSAwICYmICEocmVxdWVzdC5yZXNwb25zZVVSTCAmJiByZXF1ZXN0LnJlc3BvbnNlVVJMLmluZGV4T2YoImZpbGU6IikgPT09IDApKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHNldFRpbWVvdXQob25sb2FkZW5kKTsKICAgICAgfTsKICAgIH0KICAgIHJlcXVlc3Qub25hYm9ydCA9IGZ1bmN0aW9uIGhhbmRsZUFib3J0KCkgewogICAgICBpZiAoIXJlcXVlc3QpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmVqZWN0KG5ldyBBeGlvc0Vycm9yX2RlZmF1bHQoIlJlcXVlc3QgYWJvcnRlZCIsIEF4aW9zRXJyb3JfZGVmYXVsdC5FQ09OTkFCT1JURUQsIGNvbmZpZywgcmVxdWVzdCkpOwogICAgICByZXF1ZXN0ID0gbnVsbDsKICAgIH07CiAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiBoYW5kbGVFcnJvcihldmVudCkgewogICAgICBjb25zdCBtc2cgPSBldmVudCAmJiBldmVudC5tZXNzYWdlID8gZXZlbnQubWVzc2FnZSA6ICJOZXR3b3JrIEVycm9yIjsKICAgICAgY29uc3QgZXJyID0gbmV3IEF4aW9zRXJyb3JfZGVmYXVsdChtc2csIEF4aW9zRXJyb3JfZGVmYXVsdC5FUlJfTkVUV09SSywgY29uZmlnLCByZXF1ZXN0KTsKICAgICAgZXJyLmV2ZW50ID0gZXZlbnQgfHwgbnVsbDsKICAgICAgcmVqZWN0KGVycik7CiAgICAgIHJlcXVlc3QgPSBudWxsOwogICAgfTsKICAgIHJlcXVlc3Qub250aW1lb3V0ID0gZnVuY3Rpb24gaGFuZGxlVGltZW91dCgpIHsKICAgICAgbGV0IHRpbWVvdXRFcnJvck1lc3NhZ2UgPSBfY29uZmlnLnRpbWVvdXQgPyAidGltZW91dCBvZiAiICsgX2NvbmZpZy50aW1lb3V0ICsgIm1zIGV4Y2VlZGVkIiA6ICJ0aW1lb3V0IGV4Y2VlZGVkIjsKICAgICAgY29uc3QgdHJhbnNpdGlvbmFsMiA9IF9jb25maWcudHJhbnNpdGlvbmFsIHx8IHRyYW5zaXRpb25hbF9kZWZhdWx0OwogICAgICBpZiAoX2NvbmZpZy50aW1lb3V0RXJyb3JNZXNzYWdlKSB7CiAgICAgICAgdGltZW91dEVycm9yTWVzc2FnZSA9IF9jb25maWcudGltZW91dEVycm9yTWVzc2FnZTsKICAgICAgfQogICAgICByZWplY3QobmV3IEF4aW9zRXJyb3JfZGVmYXVsdCgKICAgICAgICB0aW1lb3V0RXJyb3JNZXNzYWdlLAogICAgICAgIHRyYW5zaXRpb25hbDIuY2xhcmlmeVRpbWVvdXRFcnJvciA/IEF4aW9zRXJyb3JfZGVmYXVsdC5FVElNRURPVVQgOiBBeGlvc0Vycm9yX2RlZmF1bHQuRUNPTk5BQk9SVEVELAogICAgICAgIGNvbmZpZywKICAgICAgICByZXF1ZXN0CiAgICAgICkpOwogICAgICByZXF1ZXN0ID0gbnVsbDsKICAgIH07CiAgICByZXF1ZXN0RGF0YSA9PT0gdm9pZCAwICYmIHJlcXVlc3RIZWFkZXJzLnNldENvbnRlbnRUeXBlKG51bGwpOwogICAgaWYgKCJzZXRSZXF1ZXN0SGVhZGVyIiBpbiByZXF1ZXN0KSB7CiAgICAgIHV0aWxzX2RlZmF1bHQuZm9yRWFjaChyZXF1ZXN0SGVhZGVycy50b0pTT04oKSwgZnVuY3Rpb24gc2V0UmVxdWVzdEhlYWRlcih2YWwsIGtleSkgewogICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcihrZXksIHZhbCk7CiAgICAgIH0pOwogICAgfQogICAgaWYgKCF1dGlsc19kZWZhdWx0LmlzVW5kZWZpbmVkKF9jb25maWcud2l0aENyZWRlbnRpYWxzKSkgewogICAgICByZXF1ZXN0LndpdGhDcmVkZW50aWFscyA9ICEhX2NvbmZpZy53aXRoQ3JlZGVudGlhbHM7CiAgICB9CiAgICBpZiAocmVzcG9uc2VUeXBlICYmIHJlc3BvbnNlVHlwZSAhPT0gImpzb24iKSB7CiAgICAgIHJlcXVlc3QucmVzcG9uc2VUeXBlID0gX2NvbmZpZy5yZXNwb25zZVR5cGU7CiAgICB9CiAgICBpZiAob25Eb3dubG9hZFByb2dyZXNzKSB7CiAgICAgIFtkb3dubG9hZFRocm90dGxlZCwgZmx1c2hEb3dubG9hZF0gPSBwcm9ncmVzc0V2ZW50UmVkdWNlcihvbkRvd25sb2FkUHJvZ3Jlc3MsIHRydWUpOwogICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoInByb2dyZXNzIiwgZG93bmxvYWRUaHJvdHRsZWQpOwogICAgfQogICAgaWYgKG9uVXBsb2FkUHJvZ3Jlc3MgJiYgcmVxdWVzdC51cGxvYWQpIHsKICAgICAgW3VwbG9hZFRocm90dGxlZCwgZmx1c2hVcGxvYWRdID0gcHJvZ3Jlc3NFdmVudFJlZHVjZXIob25VcGxvYWRQcm9ncmVzcyk7CiAgICAgIHJlcXVlc3QudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoInByb2dyZXNzIiwgdXBsb2FkVGhyb3R0bGVkKTsKICAgICAgcmVxdWVzdC51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigibG9hZGVuZCIsIGZsdXNoVXBsb2FkKTsKICAgIH0KICAgIGlmIChfY29uZmlnLmNhbmNlbFRva2VuIHx8IF9jb25maWcuc2lnbmFsKSB7CiAgICAgIG9uQ2FuY2VsZWQgPSAoY2FuY2VsKSA9PiB7CiAgICAgICAgaWYgKCFyZXF1ZXN0KSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHJlamVjdCghY2FuY2VsIHx8IGNhbmNlbC50eXBlID8gbmV3IENhbmNlbGVkRXJyb3JfZGVmYXVsdChudWxsLCBjb25maWcsIHJlcXVlc3QpIDogY2FuY2VsKTsKICAgICAgICByZXF1ZXN0LmFib3J0KCk7CiAgICAgICAgcmVxdWVzdCA9IG51bGw7CiAgICAgIH07CiAgICAgIF9jb25maWcuY2FuY2VsVG9rZW4gJiYgX2NvbmZpZy5jYW5jZWxUb2tlbi5zdWJzY3JpYmUob25DYW5jZWxlZCk7CiAgICAgIGlmIChfY29uZmlnLnNpZ25hbCkgewogICAgICAgIF9jb25maWcuc2lnbmFsLmFib3J0ZWQgPyBvbkNhbmNlbGVkKCkgOiBfY29uZmlnLnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCJhYm9ydCIsIG9uQ2FuY2VsZWQpOwogICAgICB9CiAgICB9CiAgICBjb25zdCBwcm90b2NvbCA9IHBhcnNlUHJvdG9jb2woX2NvbmZpZy51cmwpOwogICAgaWYgKHByb3RvY29sICYmIHBsYXRmb3JtX2RlZmF1bHQucHJvdG9jb2xzLmluZGV4T2YocHJvdG9jb2wpID09PSAtMSkgewogICAgICByZWplY3QobmV3IEF4aW9zRXJyb3JfZGVmYXVsdCgiVW5zdXBwb3J0ZWQgcHJvdG9jb2wgIiArIHByb3RvY29sICsgIjoiLCBBeGlvc0Vycm9yX2RlZmF1bHQuRVJSX0JBRF9SRVFVRVNULCBjb25maWcpKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgcmVxdWVzdC5zZW5kKHJlcXVlc3REYXRhIHx8IG51bGwpOwogIH0pOwp9OwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2NvbXBvc2VTaWduYWxzLmpzCnZhciBjb21wb3NlU2lnbmFscyA9IChzaWduYWxzLCB0aW1lb3V0KSA9PiB7CiAgY29uc3QgeyBsZW5ndGggfSA9IHNpZ25hbHMgPSBzaWduYWxzID8gc2lnbmFscy5maWx0ZXIoQm9vbGVhbikgOiBbXTsKICBpZiAodGltZW91dCB8fCBsZW5ndGgpIHsKICAgIGxldCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpOwogICAgbGV0IGFib3J0ZWQ7CiAgICBjb25zdCBvbmFib3J0ID0gZnVuY3Rpb24ocmVhc29uKSB7CiAgICAgIGlmICghYWJvcnRlZCkgewogICAgICAgIGFib3J0ZWQgPSB0cnVlOwogICAgICAgIHVuc3Vic2NyaWJlKCk7CiAgICAgICAgY29uc3QgZXJyID0gcmVhc29uIGluc3RhbmNlb2YgRXJyb3IgPyByZWFzb24gOiB0aGlzLnJlYXNvbjsKICAgICAgICBjb250cm9sbGVyLmFib3J0KGVyciBpbnN0YW5jZW9mIEF4aW9zRXJyb3JfZGVmYXVsdCA/IGVyciA6IG5ldyBDYW5jZWxlZEVycm9yX2RlZmF1bHQoZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IGVycikpOwogICAgICB9CiAgICB9OwogICAgbGV0IHRpbWVyID0gdGltZW91dCAmJiBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgdGltZXIgPSBudWxsOwogICAgICBvbmFib3J0KG5ldyBBeGlvc0Vycm9yX2RlZmF1bHQoYHRpbWVvdXQgJHt0aW1lb3V0fSBvZiBtcyBleGNlZWRlZGAsIEF4aW9zRXJyb3JfZGVmYXVsdC5FVElNRURPVVQpKTsKICAgIH0sIHRpbWVvdXQpOwogICAgY29uc3QgdW5zdWJzY3JpYmUgPSAoKSA9PiB7CiAgICAgIGlmIChzaWduYWxzKSB7CiAgICAgICAgdGltZXIgJiYgY2xlYXJUaW1lb3V0KHRpbWVyKTsKICAgICAgICB0aW1lciA9IG51bGw7CiAgICAgICAgc2lnbmFscy5mb3JFYWNoKChzaWduYWwyKSA9PiB7CiAgICAgICAgICBzaWduYWwyLnVuc3Vic2NyaWJlID8gc2lnbmFsMi51bnN1YnNjcmliZShvbmFib3J0KSA6IHNpZ25hbDIucmVtb3ZlRXZlbnRMaXN0ZW5lcigiYWJvcnQiLCBvbmFib3J0KTsKICAgICAgICB9KTsKICAgICAgICBzaWduYWxzID0gbnVsbDsKICAgICAgfQogICAgfTsKICAgIHNpZ25hbHMuZm9yRWFjaCgoc2lnbmFsMikgPT4gc2lnbmFsMi5hZGRFdmVudExpc3RlbmVyKCJhYm9ydCIsIG9uYWJvcnQpKTsKICAgIGNvbnN0IHsgc2lnbmFsIH0gPSBjb250cm9sbGVyOwogICAgc2lnbmFsLnVuc3Vic2NyaWJlID0gKCkgPT4gdXRpbHNfZGVmYXVsdC5hc2FwKHVuc3Vic2NyaWJlKTsKICAgIHJldHVybiBzaWduYWw7CiAgfQp9Owp2YXIgY29tcG9zZVNpZ25hbHNfZGVmYXVsdCA9IGNvbXBvc2VTaWduYWxzOwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3RyYWNrU3RyZWFtLmpzCnZhciBzdHJlYW1DaHVuayA9IGZ1bmN0aW9uKiAoY2h1bmssIGNodW5rU2l6ZSkgewogIGxldCBsZW4gPSBjaHVuay5ieXRlTGVuZ3RoOwogIGlmICghY2h1bmtTaXplIHx8IGxlbiA8IGNodW5rU2l6ZSkgewogICAgeWllbGQgY2h1bms7CiAgICByZXR1cm47CiAgfQogIGxldCBwb3MgPSAwOwogIGxldCBlbmQ7CiAgd2hpbGUgKHBvcyA8IGxlbikgewogICAgZW5kID0gcG9zICsgY2h1bmtTaXplOwogICAgeWllbGQgY2h1bmsuc2xpY2UocG9zLCBlbmQpOwogICAgcG9zID0gZW5kOwogIH0KfTsKdmFyIHJlYWRCeXRlcyA9IGFzeW5jIGZ1bmN0aW9uKiAoaXRlcmFibGUsIGNodW5rU2l6ZSkgewogIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgcmVhZFN0cmVhbShpdGVyYWJsZSkpIHsKICAgIHlpZWxkKiBzdHJlYW1DaHVuayhjaHVuaywgY2h1bmtTaXplKTsKICB9Cn07CnZhciByZWFkU3RyZWFtID0gYXN5bmMgZnVuY3Rpb24qIChzdHJlYW0pIHsKICBpZiAoc3RyZWFtW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSkgewogICAgeWllbGQqIHN0cmVhbTsKICAgIHJldHVybjsKICB9CiAgY29uc3QgcmVhZGVyID0gc3RyZWFtLmdldFJlYWRlcigpOwogIHRyeSB7CiAgICBmb3IgKDsgOyApIHsKICAgICAgY29uc3QgeyBkb25lLCB2YWx1ZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTsKICAgICAgaWYgKGRvbmUpIHsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICB5aWVsZCB2YWx1ZTsKICAgIH0KICB9IGZpbmFsbHkgewogICAgYXdhaXQgcmVhZGVyLmNhbmNlbCgpOwogIH0KfTsKdmFyIHRyYWNrU3RyZWFtID0gKHN0cmVhbSwgY2h1bmtTaXplLCBvblByb2dyZXNzLCBvbkZpbmlzaCkgPT4gewogIGNvbnN0IGl0ZXJhdG9yMiA9IHJlYWRCeXRlcyhzdHJlYW0sIGNodW5rU2l6ZSk7CiAgbGV0IGJ5dGVzID0gMDsKICBsZXQgZG9uZTsKICBsZXQgX29uRmluaXNoID0gKGUpID0+IHsKICAgIGlmICghZG9uZSkgewogICAgICBkb25lID0gdHJ1ZTsKICAgICAgb25GaW5pc2ggJiYgb25GaW5pc2goZSk7CiAgICB9CiAgfTsKICByZXR1cm4gbmV3IFJlYWRhYmxlU3RyZWFtKHsKICAgIGFzeW5jIHB1bGwoY29udHJvbGxlcikgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHsgZG9uZTogZG9uZTIsIHZhbHVlIH0gPSBhd2FpdCBpdGVyYXRvcjIubmV4dCgpOwogICAgICAgIGlmIChkb25lMikgewogICAgICAgICAgX29uRmluaXNoKCk7CiAgICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGxldCBsZW4gPSB2YWx1ZS5ieXRlTGVuZ3RoOwogICAgICAgIGlmIChvblByb2dyZXNzKSB7CiAgICAgICAgICBsZXQgbG9hZGVkQnl0ZXMgPSBieXRlcyArPSBsZW47CiAgICAgICAgICBvblByb2dyZXNzKGxvYWRlZEJ5dGVzKTsKICAgICAgICB9CiAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKG5ldyBVaW50OEFycmF5KHZhbHVlKSk7CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9vbkZpbmlzaChlcnIpOwogICAgICAgIHRocm93IGVycjsKICAgICAgfQogICAgfSwKICAgIGNhbmNlbChyZWFzb24pIHsKICAgICAgX29uRmluaXNoKHJlYXNvbik7CiAgICAgIHJldHVybiBpdGVyYXRvcjIucmV0dXJuKCk7CiAgICB9CiAgfSwgewogICAgaGlnaFdhdGVyTWFyazogMgogIH0pOwp9OwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9hZGFwdGVycy9mZXRjaC5qcwp2YXIgREVGQVVMVF9DSFVOS19TSVpFID0gNjQgKiAxMDI0Owp2YXIgeyBpc0Z1bmN0aW9uOiBpc0Z1bmN0aW9uMiB9ID0gdXRpbHNfZGVmYXVsdDsKdmFyIGdsb2JhbEZldGNoQVBJID0gKCh7IFJlcXVlc3QsIFJlc3BvbnNlIH0pID0+ICh7CiAgUmVxdWVzdCwKICBSZXNwb25zZQp9KSkodXRpbHNfZGVmYXVsdC5nbG9iYWwpOwp2YXIgewogIFJlYWRhYmxlU3RyZWFtOiBSZWFkYWJsZVN0cmVhbTIsCiAgVGV4dEVuY29kZXIKfSA9IHV0aWxzX2RlZmF1bHQuZ2xvYmFsOwp2YXIgdGVzdCA9IChmbiwgLi4uYXJncykgPT4gewogIHRyeSB7CiAgICByZXR1cm4gISFmbiguLi5hcmdzKTsKICB9IGNhdGNoIChlKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQp9Owp2YXIgZmFjdG9yeSA9IChlbnYpID0+IHsKICBlbnYgPSB1dGlsc19kZWZhdWx0Lm1lcmdlLmNhbGwoewogICAgc2tpcFVuZGVmaW5lZDogdHJ1ZQogIH0sIGdsb2JhbEZldGNoQVBJLCBlbnYpOwogIGNvbnN0IHsgZmV0Y2g6IGVudkZldGNoLCBSZXF1ZXN0LCBSZXNwb25zZSB9ID0gZW52OwogIGNvbnN0IGlzRmV0Y2hTdXBwb3J0ZWQgPSBlbnZGZXRjaCA/IGlzRnVuY3Rpb24yKGVudkZldGNoKSA6IHR5cGVvZiBmZXRjaCA9PT0gImZ1bmN0aW9uIjsKICBjb25zdCBpc1JlcXVlc3RTdXBwb3J0ZWQgPSBpc0Z1bmN0aW9uMihSZXF1ZXN0KTsKICBjb25zdCBpc1Jlc3BvbnNlU3VwcG9ydGVkID0gaXNGdW5jdGlvbjIoUmVzcG9uc2UpOwogIGlmICghaXNGZXRjaFN1cHBvcnRlZCkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICBjb25zdCBpc1JlYWRhYmxlU3RyZWFtU3VwcG9ydGVkID0gaXNGZXRjaFN1cHBvcnRlZCAmJiBpc0Z1bmN0aW9uMihSZWFkYWJsZVN0cmVhbTIpOwogIGNvbnN0IGVuY29kZVRleHQgPSBpc0ZldGNoU3VwcG9ydGVkICYmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICJmdW5jdGlvbiIgPyAvKiBAX19QVVJFX18gKi8gKChlbmNvZGVyKSA9PiAoc3RyKSA9PiBlbmNvZGVyLmVuY29kZShzdHIpKShuZXcgVGV4dEVuY29kZXIoKSkgOiBhc3luYyAoc3RyKSA9PiBuZXcgVWludDhBcnJheShhd2FpdCBuZXcgUmVxdWVzdChzdHIpLmFycmF5QnVmZmVyKCkpKTsKICBjb25zdCBzdXBwb3J0c1JlcXVlc3RTdHJlYW0gPSBpc1JlcXVlc3RTdXBwb3J0ZWQgJiYgaXNSZWFkYWJsZVN0cmVhbVN1cHBvcnRlZCAmJiB0ZXN0KCgpID0+IHsKICAgIGxldCBkdXBsZXhBY2Nlc3NlZCA9IGZhbHNlOwogICAgY29uc3QgaGFzQ29udGVudFR5cGUgPSBuZXcgUmVxdWVzdChwbGF0Zm9ybV9kZWZhdWx0Lm9yaWdpbiwgewogICAgICBib2R5OiBuZXcgUmVhZGFibGVTdHJlYW0yKCksCiAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICBnZXQgZHVwbGV4KCkgewogICAgICAgIGR1cGxleEFjY2Vzc2VkID0gdHJ1ZTsKICAgICAgICByZXR1cm4gImhhbGYiOwogICAgICB9CiAgICB9KS5oZWFkZXJzLmhhcygiQ29udGVudC1UeXBlIik7CiAgICByZXR1cm4gZHVwbGV4QWNjZXNzZWQgJiYgIWhhc0NvbnRlbnRUeXBlOwogIH0pOwogIGNvbnN0IHN1cHBvcnRzUmVzcG9uc2VTdHJlYW0gPSBpc1Jlc3BvbnNlU3VwcG9ydGVkICYmIGlzUmVhZGFibGVTdHJlYW1TdXBwb3J0ZWQgJiYgdGVzdCgoKSA9PiB1dGlsc19kZWZhdWx0LmlzUmVhZGFibGVTdHJlYW0obmV3IFJlc3BvbnNlKCIiKS5ib2R5KSk7CiAgY29uc3QgcmVzb2x2ZXJzID0gewogICAgc3RyZWFtOiBzdXBwb3J0c1Jlc3BvbnNlU3RyZWFtICYmICgocmVzKSA9PiByZXMuYm9keSkKICB9OwogIGlzRmV0Y2hTdXBwb3J0ZWQgJiYgKCgpID0+IHsKICAgIFsidGV4dCIsICJhcnJheUJ1ZmZlciIsICJibG9iIiwgImZvcm1EYXRhIiwgInN0cmVhbSJdLmZvckVhY2goKHR5cGUpID0+IHsKICAgICAgIXJlc29sdmVyc1t0eXBlXSAmJiAocmVzb2x2ZXJzW3R5cGVdID0gKHJlcywgY29uZmlnKSA9PiB7CiAgICAgICAgbGV0IG1ldGhvZCA9IHJlcyAmJiByZXNbdHlwZV07CiAgICAgICAgaWYgKG1ldGhvZCkgewogICAgICAgICAgcmV0dXJuIG1ldGhvZC5jYWxsKHJlcyk7CiAgICAgICAgfQogICAgICAgIHRocm93IG5ldyBBeGlvc0Vycm9yX2RlZmF1bHQoYFJlc3BvbnNlIHR5cGUgJyR7dHlwZX0nIGlzIG5vdCBzdXBwb3J0ZWRgLCBBeGlvc0Vycm9yX2RlZmF1bHQuRVJSX05PVF9TVVBQT1JULCBjb25maWcpOwogICAgICB9KTsKICAgIH0pOwogIH0pKCk7CiAgY29uc3QgZ2V0Qm9keUxlbmd0aCA9IGFzeW5jIChib2R5KSA9PiB7CiAgICBpZiAoYm9keSA9PSBudWxsKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgaWYgKHV0aWxzX2RlZmF1bHQuaXNCbG9iKGJvZHkpKSB7CiAgICAgIHJldHVybiBib2R5LnNpemU7CiAgICB9CiAgICBpZiAodXRpbHNfZGVmYXVsdC5pc1NwZWNDb21wbGlhbnRGb3JtKGJvZHkpKSB7CiAgICAgIGNvbnN0IF9yZXF1ZXN0ID0gbmV3IFJlcXVlc3QocGxhdGZvcm1fZGVmYXVsdC5vcmlnaW4sIHsKICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICBib2R5CiAgICAgIH0pOwogICAgICByZXR1cm4gKGF3YWl0IF9yZXF1ZXN0LmFycmF5QnVmZmVyKCkpLmJ5dGVMZW5ndGg7CiAgICB9CiAgICBpZiAodXRpbHNfZGVmYXVsdC5pc0FycmF5QnVmZmVyVmlldyhib2R5KSB8fCB1dGlsc19kZWZhdWx0LmlzQXJyYXlCdWZmZXIoYm9keSkpIHsKICAgICAgcmV0dXJuIGJvZHkuYnl0ZUxlbmd0aDsKICAgIH0KICAgIGlmICh1dGlsc19kZWZhdWx0LmlzVVJMU2VhcmNoUGFyYW1zKGJvZHkpKSB7CiAgICAgIGJvZHkgPSBib2R5ICsgIiI7CiAgICB9CiAgICBpZiAodXRpbHNfZGVmYXVsdC5pc1N0cmluZyhib2R5KSkgewogICAgICByZXR1cm4gKGF3YWl0IGVuY29kZVRleHQoYm9keSkpLmJ5dGVMZW5ndGg7CiAgICB9CiAgfTsKICBjb25zdCByZXNvbHZlQm9keUxlbmd0aCA9IGFzeW5jIChoZWFkZXJzLCBib2R5KSA9PiB7CiAgICBjb25zdCBsZW5ndGggPSB1dGlsc19kZWZhdWx0LnRvRmluaXRlTnVtYmVyKGhlYWRlcnMuZ2V0Q29udGVudExlbmd0aCgpKTsKICAgIHJldHVybiBsZW5ndGggPT0gbnVsbCA/IGdldEJvZHlMZW5ndGgoYm9keSkgOiBsZW5ndGg7CiAgfTsKICByZXR1cm4gYXN5bmMgKGNvbmZpZykgPT4gewogICAgbGV0IHsKICAgICAgdXJsLAogICAgICBtZXRob2QsCiAgICAgIGRhdGEsCiAgICAgIHNpZ25hbCwKICAgICAgY2FuY2VsVG9rZW4sCiAgICAgIHRpbWVvdXQsCiAgICAgIG9uRG93bmxvYWRQcm9ncmVzcywKICAgICAgb25VcGxvYWRQcm9ncmVzcywKICAgICAgcmVzcG9uc2VUeXBlLAogICAgICBoZWFkZXJzLAogICAgICB3aXRoQ3JlZGVudGlhbHMgPSAic2FtZS1vcmlnaW4iLAogICAgICBmZXRjaE9wdGlvbnMKICAgIH0gPSByZXNvbHZlQ29uZmlnX2RlZmF1bHQoY29uZmlnKTsKICAgIGxldCBfZmV0Y2ggPSBlbnZGZXRjaCB8fCBmZXRjaDsKICAgIHJlc3BvbnNlVHlwZSA9IHJlc3BvbnNlVHlwZSA/IChyZXNwb25zZVR5cGUgKyAiIikudG9Mb3dlckNhc2UoKSA6ICJ0ZXh0IjsKICAgIGxldCBjb21wb3NlZFNpZ25hbCA9IGNvbXBvc2VTaWduYWxzX2RlZmF1bHQoW3NpZ25hbCwgY2FuY2VsVG9rZW4gJiYgY2FuY2VsVG9rZW4udG9BYm9ydFNpZ25hbCgpXSwgdGltZW91dCk7CiAgICBsZXQgcmVxdWVzdCA9IG51bGw7CiAgICBjb25zdCB1bnN1YnNjcmliZSA9IGNvbXBvc2VkU2lnbmFsICYmIGNvbXBvc2VkU2lnbmFsLnVuc3Vic2NyaWJlICYmICgoKSA9PiB7CiAgICAgIGNvbXBvc2VkU2lnbmFsLnVuc3Vic2NyaWJlKCk7CiAgICB9KTsKICAgIGxldCByZXF1ZXN0Q29udGVudExlbmd0aDsKICAgIHRyeSB7CiAgICAgIGlmIChvblVwbG9hZFByb2dyZXNzICYmIHN1cHBvcnRzUmVxdWVzdFN0cmVhbSAmJiBtZXRob2QgIT09ICJnZXQiICYmIG1ldGhvZCAhPT0gImhlYWQiICYmIChyZXF1ZXN0Q29udGVudExlbmd0aCA9IGF3YWl0IHJlc29sdmVCb2R5TGVuZ3RoKGhlYWRlcnMsIGRhdGEpKSAhPT0gMCkgewogICAgICAgIGxldCBfcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHVybCwgewogICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICBib2R5OiBkYXRhLAogICAgICAgICAgZHVwbGV4OiAiaGFsZiIKICAgICAgICB9KTsKICAgICAgICBsZXQgY29udGVudFR5cGVIZWFkZXI7CiAgICAgICAgaWYgKHV0aWxzX2RlZmF1bHQuaXNGb3JtRGF0YShkYXRhKSAmJiAoY29udGVudFR5cGVIZWFkZXIgPSBfcmVxdWVzdC5oZWFkZXJzLmdldCgiY29udGVudC10eXBlIikpKSB7CiAgICAgICAgICBoZWFkZXJzLnNldENvbnRlbnRUeXBlKGNvbnRlbnRUeXBlSGVhZGVyKTsKICAgICAgICB9CiAgICAgICAgaWYgKF9yZXF1ZXN0LmJvZHkpIHsKICAgICAgICAgIGNvbnN0IFtvblByb2dyZXNzLCBmbHVzaF0gPSBwcm9ncmVzc0V2ZW50RGVjb3JhdG9yKAogICAgICAgICAgICByZXF1ZXN0Q29udGVudExlbmd0aCwKICAgICAgICAgICAgcHJvZ3Jlc3NFdmVudFJlZHVjZXIoYXN5bmNEZWNvcmF0b3Iob25VcGxvYWRQcm9ncmVzcykpCiAgICAgICAgICApOwogICAgICAgICAgZGF0YSA9IHRyYWNrU3RyZWFtKF9yZXF1ZXN0LmJvZHksIERFRkFVTFRfQ0hVTktfU0laRSwgb25Qcm9ncmVzcywgZmx1c2gpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoIXV0aWxzX2RlZmF1bHQuaXNTdHJpbmcod2l0aENyZWRlbnRpYWxzKSkgewogICAgICAgIHdpdGhDcmVkZW50aWFscyA9IHdpdGhDcmVkZW50aWFscyA/ICJpbmNsdWRlIiA6ICJvbWl0IjsKICAgICAgfQogICAgICBjb25zdCBpc0NyZWRlbnRpYWxzU3VwcG9ydGVkID0gaXNSZXF1ZXN0U3VwcG9ydGVkICYmICJjcmVkZW50aWFscyIgaW4gUmVxdWVzdC5wcm90b3R5cGU7CiAgICAgIGNvbnN0IHJlc29sdmVkT3B0aW9ucyA9IHsKICAgICAgICAuLi5mZXRjaE9wdGlvbnMsCiAgICAgICAgc2lnbmFsOiBjb21wb3NlZFNpZ25hbCwKICAgICAgICBtZXRob2Q6IG1ldGhvZC50b1VwcGVyQ2FzZSgpLAogICAgICAgIGhlYWRlcnM6IGhlYWRlcnMubm9ybWFsaXplKCkudG9KU09OKCksCiAgICAgICAgYm9keTogZGF0YSwKICAgICAgICBkdXBsZXg6ICJoYWxmIiwKICAgICAgICBjcmVkZW50aWFsczogaXNDcmVkZW50aWFsc1N1cHBvcnRlZCA/IHdpdGhDcmVkZW50aWFscyA6IHZvaWQgMAogICAgICB9OwogICAgICByZXF1ZXN0ID0gaXNSZXF1ZXN0U3VwcG9ydGVkICYmIG5ldyBSZXF1ZXN0KHVybCwgcmVzb2x2ZWRPcHRpb25zKTsKICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgKGlzUmVxdWVzdFN1cHBvcnRlZCA/IF9mZXRjaChyZXF1ZXN0LCBmZXRjaE9wdGlvbnMpIDogX2ZldGNoKHVybCwgcmVzb2x2ZWRPcHRpb25zKSk7CiAgICAgIGNvbnN0IGlzU3RyZWFtUmVzcG9uc2UgPSBzdXBwb3J0c1Jlc3BvbnNlU3RyZWFtICYmIChyZXNwb25zZVR5cGUgPT09ICJzdHJlYW0iIHx8IHJlc3BvbnNlVHlwZSA9PT0gInJlc3BvbnNlIik7CiAgICAgIGlmIChzdXBwb3J0c1Jlc3BvbnNlU3RyZWFtICYmIChvbkRvd25sb2FkUHJvZ3Jlc3MgfHwgaXNTdHJlYW1SZXNwb25zZSAmJiB1bnN1YnNjcmliZSkpIHsKICAgICAgICBjb25zdCBvcHRpb25zID0ge307CiAgICAgICAgWyJzdGF0dXMiLCAic3RhdHVzVGV4dCIsICJoZWFkZXJzIl0uZm9yRWFjaCgocHJvcCkgPT4gewogICAgICAgICAgb3B0aW9uc1twcm9wXSA9IHJlc3BvbnNlW3Byb3BdOwogICAgICAgIH0pOwogICAgICAgIGNvbnN0IHJlc3BvbnNlQ29udGVudExlbmd0aCA9IHV0aWxzX2RlZmF1bHQudG9GaW5pdGVOdW1iZXIocmVzcG9uc2UuaGVhZGVycy5nZXQoImNvbnRlbnQtbGVuZ3RoIikpOwogICAgICAgIGNvbnN0IFtvblByb2dyZXNzLCBmbHVzaF0gPSBvbkRvd25sb2FkUHJvZ3Jlc3MgJiYgcHJvZ3Jlc3NFdmVudERlY29yYXRvcigKICAgICAgICAgIHJlc3BvbnNlQ29udGVudExlbmd0aCwKICAgICAgICAgIHByb2dyZXNzRXZlbnRSZWR1Y2VyKGFzeW5jRGVjb3JhdG9yKG9uRG93bmxvYWRQcm9ncmVzcyksIHRydWUpCiAgICAgICAgKSB8fCBbXTsKICAgICAgICByZXNwb25zZSA9IG5ldyBSZXNwb25zZSgKICAgICAgICAgIHRyYWNrU3RyZWFtKHJlc3BvbnNlLmJvZHksIERFRkFVTFRfQ0hVTktfU0laRSwgb25Qcm9ncmVzcywgKCkgPT4gewogICAgICAgICAgICBmbHVzaCAmJiBmbHVzaCgpOwogICAgICAgICAgICB1bnN1YnNjcmliZSAmJiB1bnN1YnNjcmliZSgpOwogICAgICAgICAgfSksCiAgICAgICAgICBvcHRpb25zCiAgICAgICAgKTsKICAgICAgfQogICAgICByZXNwb25zZVR5cGUgPSByZXNwb25zZVR5cGUgfHwgInRleHQiOwogICAgICBsZXQgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzb2x2ZXJzW3V0aWxzX2RlZmF1bHQuZmluZEtleShyZXNvbHZlcnMsIHJlc3BvbnNlVHlwZSkgfHwgInRleHQiXShyZXNwb25zZSwgY29uZmlnKTsKICAgICAgIWlzU3RyZWFtUmVzcG9uc2UgJiYgdW5zdWJzY3JpYmUgJiYgdW5zdWJzY3JpYmUoKTsKICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB7CiAgICAgICAgICBkYXRhOiByZXNwb25zZURhdGEsCiAgICAgICAgICBoZWFkZXJzOiBBeGlvc0hlYWRlcnNfZGVmYXVsdC5mcm9tKHJlc3BvbnNlLmhlYWRlcnMpLAogICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsCiAgICAgICAgICBzdGF0dXNUZXh0OiByZXNwb25zZS5zdGF0dXNUZXh0LAogICAgICAgICAgY29uZmlnLAogICAgICAgICAgcmVxdWVzdAogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICB1bnN1YnNjcmliZSAmJiB1bnN1YnNjcmliZSgpOwogICAgICBpZiAoZXJyICYmIGVyci5uYW1lID09PSAiVHlwZUVycm9yIiAmJiAvTG9hZCBmYWlsZWR8ZmV0Y2gvaS50ZXN0KGVyci5tZXNzYWdlKSkgewogICAgICAgIHRocm93IE9iamVjdC5hc3NpZ24oCiAgICAgICAgICBuZXcgQXhpb3NFcnJvcl9kZWZhdWx0KCJOZXR3b3JrIEVycm9yIiwgQXhpb3NFcnJvcl9kZWZhdWx0LkVSUl9ORVRXT1JLLCBjb25maWcsIHJlcXVlc3QpLAogICAgICAgICAgewogICAgICAgICAgICBjYXVzZTogZXJyLmNhdXNlIHx8IGVycgogICAgICAgICAgfQogICAgICAgICk7CiAgICAgIH0KICAgICAgdGhyb3cgQXhpb3NFcnJvcl9kZWZhdWx0LmZyb20oZXJyLCBlcnIgJiYgZXJyLmNvZGUsIGNvbmZpZywgcmVxdWVzdCk7CiAgICB9CiAgfTsKfTsKdmFyIHNlZWRDYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CnZhciBnZXRGZXRjaCA9IChjb25maWcpID0+IHsKICBsZXQgZW52ID0gY29uZmlnID8gY29uZmlnLmVudiA6IHt9OwogIGNvbnN0IHsgZmV0Y2g6IGZldGNoMiwgUmVxdWVzdCwgUmVzcG9uc2UgfSA9IGVudjsKICBjb25zdCBzZWVkcyA9IFsKICAgIFJlcXVlc3QsCiAgICBSZXNwb25zZSwKICAgIGZldGNoMgogIF07CiAgbGV0IGxlbiA9IHNlZWRzLmxlbmd0aCwgaSA9IGxlbiwgc2VlZCwgdGFyZ2V0LCBtYXAgPSBzZWVkQ2FjaGU7CiAgd2hpbGUgKGktLSkgewogICAgc2VlZCA9IHNlZWRzW2ldOwogICAgdGFyZ2V0ID0gbWFwLmdldChzZWVkKTsKICAgIHRhcmdldCA9PT0gdm9pZCAwICYmIG1hcC5zZXQoc2VlZCwgdGFyZ2V0ID0gaSA/IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCkgOiBmYWN0b3J5KGVudikpOwogICAgbWFwID0gdGFyZ2V0OwogIH0KICByZXR1cm4gdGFyZ2V0Owp9Owp2YXIgYWRhcHRlciA9IGdldEZldGNoKCk7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2FkYXB0ZXJzL2FkYXB0ZXJzLmpzCnZhciBrbm93bkFkYXB0ZXJzID0gewogIGh0dHA6IG51bGxfZGVmYXVsdCwKICB4aHI6IHhocl9kZWZhdWx0LAogIGZldGNoOiB7CiAgICBnZXQ6IGdldEZldGNoCiAgfQp9Owp1dGlsc19kZWZhdWx0LmZvckVhY2goa25vd25BZGFwdGVycywgKGZuLCB2YWx1ZSkgPT4gewogIGlmIChmbikgewogICAgdHJ5IHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZuLCAibmFtZSIsIHsgdmFsdWUgfSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICB9CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZm4sICJhZGFwdGVyTmFtZSIsIHsgdmFsdWUgfSk7CiAgfQp9KTsKdmFyIHJlbmRlclJlYXNvbiA9IChyZWFzb24pID0+IGAtICR7cmVhc29ufWA7CnZhciBpc1Jlc29sdmVkSGFuZGxlID0gKGFkYXB0ZXIyKSA9PiB1dGlsc19kZWZhdWx0LmlzRnVuY3Rpb24oYWRhcHRlcjIpIHx8IGFkYXB0ZXIyID09PSBudWxsIHx8IGFkYXB0ZXIyID09PSBmYWxzZTsKdmFyIGFkYXB0ZXJzX2RlZmF1bHQgPSB7CiAgZ2V0QWRhcHRlcjogKGFkYXB0ZXJzLCBjb25maWcpID0+IHsKICAgIGFkYXB0ZXJzID0gdXRpbHNfZGVmYXVsdC5pc0FycmF5KGFkYXB0ZXJzKSA/IGFkYXB0ZXJzIDogW2FkYXB0ZXJzXTsKICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSBhZGFwdGVyczsKICAgIGxldCBuYW1lT3JBZGFwdGVyOwogICAgbGV0IGFkYXB0ZXIyOwogICAgY29uc3QgcmVqZWN0ZWRSZWFzb25zID0ge307CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgIG5hbWVPckFkYXB0ZXIgPSBhZGFwdGVyc1tpXTsKICAgICAgbGV0IGlkOwogICAgICBhZGFwdGVyMiA9IG5hbWVPckFkYXB0ZXI7CiAgICAgIGlmICghaXNSZXNvbHZlZEhhbmRsZShuYW1lT3JBZGFwdGVyKSkgewogICAgICAgIGFkYXB0ZXIyID0ga25vd25BZGFwdGVyc1soaWQgPSBTdHJpbmcobmFtZU9yQWRhcHRlcikpLnRvTG93ZXJDYXNlKCldOwogICAgICAgIGlmIChhZGFwdGVyMiA9PT0gdm9pZCAwKSB7CiAgICAgICAgICB0aHJvdyBuZXcgQXhpb3NFcnJvcl9kZWZhdWx0KGBVbmtub3duIGFkYXB0ZXIgJyR7aWR9J2ApOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoYWRhcHRlcjIgJiYgKHV0aWxzX2RlZmF1bHQuaXNGdW5jdGlvbihhZGFwdGVyMikgfHwgKGFkYXB0ZXIyID0gYWRhcHRlcjIuZ2V0KGNvbmZpZykpKSkgewogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIHJlamVjdGVkUmVhc29uc1tpZCB8fCAiIyIgKyBpXSA9IGFkYXB0ZXIyOwogICAgfQogICAgaWYgKCFhZGFwdGVyMikgewogICAgICBjb25zdCByZWFzb25zID0gT2JqZWN0LmVudHJpZXMocmVqZWN0ZWRSZWFzb25zKS5tYXAoCiAgICAgICAgKFtpZCwgc3RhdGVdKSA9PiBgYWRhcHRlciAke2lkfSBgICsgKHN0YXRlID09PSBmYWxzZSA/ICJpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBlbnZpcm9ubWVudCIgOiAiaXMgbm90IGF2YWlsYWJsZSBpbiB0aGUgYnVpbGQiKQogICAgICApOwogICAgICBsZXQgcyA9IGxlbmd0aCA/IHJlYXNvbnMubGVuZ3RoID4gMSA/ICJzaW5jZSA6XG4iICsgcmVhc29ucy5tYXAocmVuZGVyUmVhc29uKS5qb2luKCJcbiIpIDogIiAiICsgcmVuZGVyUmVhc29uKHJlYXNvbnNbMF0pIDogImFzIG5vIGFkYXB0ZXIgc3BlY2lmaWVkIjsKICAgICAgdGhyb3cgbmV3IEF4aW9zRXJyb3JfZGVmYXVsdCgKICAgICAgICBgVGhlcmUgaXMgbm8gc3VpdGFibGUgYWRhcHRlciB0byBkaXNwYXRjaCB0aGUgcmVxdWVzdCBgICsgcywKICAgICAgICAiRVJSX05PVF9TVVBQT1JUIgogICAgICApOwogICAgfQogICAgcmV0dXJuIGFkYXB0ZXIyOwogIH0sCiAgYWRhcHRlcnM6IGtub3duQWRhcHRlcnMKfTsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9kaXNwYXRjaFJlcXVlc3QuanMKZnVuY3Rpb24gdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpIHsKICBpZiAoY29uZmlnLmNhbmNlbFRva2VuKSB7CiAgICBjb25maWcuY2FuY2VsVG9rZW4udGhyb3dJZlJlcXVlc3RlZCgpOwogIH0KICBpZiAoY29uZmlnLnNpZ25hbCAmJiBjb25maWcuc2lnbmFsLmFib3J0ZWQpIHsKICAgIHRocm93IG5ldyBDYW5jZWxlZEVycm9yX2RlZmF1bHQobnVsbCwgY29uZmlnKTsKICB9Cn0KZnVuY3Rpb24gZGlzcGF0Y2hSZXF1ZXN0KGNvbmZpZykgewogIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTsKICBjb25maWcuaGVhZGVycyA9IEF4aW9zSGVhZGVyc19kZWZhdWx0LmZyb20oY29uZmlnLmhlYWRlcnMpOwogIGNvbmZpZy5kYXRhID0gdHJhbnNmb3JtRGF0YS5jYWxsKAogICAgY29uZmlnLAogICAgY29uZmlnLnRyYW5zZm9ybVJlcXVlc3QKICApOwogIGlmIChbInBvc3QiLCAicHV0IiwgInBhdGNoIl0uaW5kZXhPZihjb25maWcubWV0aG9kKSAhPT0gLTEpIHsKICAgIGNvbmZpZy5oZWFkZXJzLnNldENvbnRlbnRUeXBlKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLCBmYWxzZSk7CiAgfQogIGNvbnN0IGFkYXB0ZXIyID0gYWRhcHRlcnNfZGVmYXVsdC5nZXRBZGFwdGVyKGNvbmZpZy5hZGFwdGVyIHx8IGRlZmF1bHRzX2RlZmF1bHQuYWRhcHRlciwgY29uZmlnKTsKICByZXR1cm4gYWRhcHRlcjIoY29uZmlnKS50aGVuKGZ1bmN0aW9uIG9uQWRhcHRlclJlc29sdXRpb24ocmVzcG9uc2UpIHsKICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTsKICAgIHJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhLmNhbGwoCiAgICAgIGNvbmZpZywKICAgICAgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlLAogICAgICByZXNwb25zZQogICAgKTsKICAgIHJlc3BvbnNlLmhlYWRlcnMgPSBBeGlvc0hlYWRlcnNfZGVmYXVsdC5mcm9tKHJlc3BvbnNlLmhlYWRlcnMpOwogICAgcmV0dXJuIHJlc3BvbnNlOwogIH0sIGZ1bmN0aW9uIG9uQWRhcHRlclJlamVjdGlvbihyZWFzb24pIHsKICAgIGlmICghaXNDYW5jZWwocmVhc29uKSkgewogICAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7CiAgICAgIGlmIChyZWFzb24gJiYgcmVhc29uLnJlc3BvbnNlKSB7CiAgICAgICAgcmVhc29uLnJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhLmNhbGwoCiAgICAgICAgICBjb25maWcsCiAgICAgICAgICBjb25maWcudHJhbnNmb3JtUmVzcG9uc2UsCiAgICAgICAgICByZWFzb24ucmVzcG9uc2UKICAgICAgICApOwogICAgICAgIHJlYXNvbi5yZXNwb25zZS5oZWFkZXJzID0gQXhpb3NIZWFkZXJzX2RlZmF1bHQuZnJvbShyZWFzb24ucmVzcG9uc2UuaGVhZGVycyk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZWFzb24pOwogIH0pOwp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2Vudi9kYXRhLmpzCnZhciBWRVJTSU9OID0gIjEuMTIuMiI7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvdmFsaWRhdG9yLmpzCnZhciB2YWxpZGF0b3JzID0ge307Clsib2JqZWN0IiwgImJvb2xlYW4iLCAibnVtYmVyIiwgImZ1bmN0aW9uIiwgInN0cmluZyIsICJzeW1ib2wiXS5mb3JFYWNoKCh0eXBlLCBpKSA9PiB7CiAgdmFsaWRhdG9yc1t0eXBlXSA9IGZ1bmN0aW9uIHZhbGlkYXRvcih0aGluZykgewogICAgcmV0dXJuIHR5cGVvZiB0aGluZyA9PT0gdHlwZSB8fCAiYSIgKyAoaSA8IDEgPyAibiAiIDogIiAiKSArIHR5cGU7CiAgfTsKfSk7CnZhciBkZXByZWNhdGVkV2FybmluZ3MgPSB7fTsKdmFsaWRhdG9ycy50cmFuc2l0aW9uYWwgPSBmdW5jdGlvbiB0cmFuc2l0aW9uYWwodmFsaWRhdG9yLCB2ZXJzaW9uLCBtZXNzYWdlKSB7CiAgZnVuY3Rpb24gZm9ybWF0TWVzc2FnZShvcHQsIGRlc2MpIHsKICAgIHJldHVybiAiW0F4aW9zIHYiICsgVkVSU0lPTiArICJdIFRyYW5zaXRpb25hbCBvcHRpb24gJyIgKyBvcHQgKyAiJyIgKyBkZXNjICsgKG1lc3NhZ2UgPyAiLiAiICsgbWVzc2FnZSA6ICIiKTsKICB9CiAgcmV0dXJuICh2YWx1ZSwgb3B0LCBvcHRzKSA9PiB7CiAgICBpZiAodmFsaWRhdG9yID09PSBmYWxzZSkgewogICAgICB0aHJvdyBuZXcgQXhpb3NFcnJvcl9kZWZhdWx0KAogICAgICAgIGZvcm1hdE1lc3NhZ2Uob3B0LCAiIGhhcyBiZWVuIHJlbW92ZWQiICsgKHZlcnNpb24gPyAiIGluICIgKyB2ZXJzaW9uIDogIiIpKSwKICAgICAgICBBeGlvc0Vycm9yX2RlZmF1bHQuRVJSX0RFUFJFQ0FURUQKICAgICAgKTsKICAgIH0KICAgIGlmICh2ZXJzaW9uICYmICFkZXByZWNhdGVkV2FybmluZ3Nbb3B0XSkgewogICAgICBkZXByZWNhdGVkV2FybmluZ3Nbb3B0XSA9IHRydWU7CiAgICAgIGNvbnNvbGUud2FybigKICAgICAgICBmb3JtYXRNZXNzYWdlKAogICAgICAgICAgb3B0LAogICAgICAgICAgIiBoYXMgYmVlbiBkZXByZWNhdGVkIHNpbmNlIHYiICsgdmVyc2lvbiArICIgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmVhciBmdXR1cmUiCiAgICAgICAgKQogICAgICApOwogICAgfQogICAgcmV0dXJuIHZhbGlkYXRvciA/IHZhbGlkYXRvcih2YWx1ZSwgb3B0LCBvcHRzKSA6IHRydWU7CiAgfTsKfTsKdmFsaWRhdG9ycy5zcGVsbGluZyA9IGZ1bmN0aW9uIHNwZWxsaW5nKGNvcnJlY3RTcGVsbGluZykgewogIHJldHVybiAodmFsdWUsIG9wdCkgPT4gewogICAgY29uc29sZS53YXJuKGAke29wdH0gaXMgbGlrZWx5IGEgbWlzc3BlbGxpbmcgb2YgJHtjb3JyZWN0U3BlbGxpbmd9YCk7CiAgICByZXR1cm4gdHJ1ZTsKICB9Owp9OwpmdW5jdGlvbiBhc3NlcnRPcHRpb25zKG9wdGlvbnMsIHNjaGVtYSwgYWxsb3dVbmtub3duKSB7CiAgaWYgKHR5cGVvZiBvcHRpb25zICE9PSAib2JqZWN0IikgewogICAgdGhyb3cgbmV3IEF4aW9zRXJyb3JfZGVmYXVsdCgib3B0aW9ucyBtdXN0IGJlIGFuIG9iamVjdCIsIEF4aW9zRXJyb3JfZGVmYXVsdC5FUlJfQkFEX09QVElPTl9WQUxVRSk7CiAgfQogIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhvcHRpb25zKTsKICBsZXQgaSA9IGtleXMubGVuZ3RoOwogIHdoaWxlIChpLS0gPiAwKSB7CiAgICBjb25zdCBvcHQgPSBrZXlzW2ldOwogICAgY29uc3QgdmFsaWRhdG9yID0gc2NoZW1hW29wdF07CiAgICBpZiAodmFsaWRhdG9yKSB7CiAgICAgIGNvbnN0IHZhbHVlID0gb3B0aW9uc1tvcHRdOwogICAgICBjb25zdCByZXN1bHQgPSB2YWx1ZSA9PT0gdm9pZCAwIHx8IHZhbGlkYXRvcih2YWx1ZSwgb3B0LCBvcHRpb25zKTsKICAgICAgaWYgKHJlc3VsdCAhPT0gdHJ1ZSkgewogICAgICAgIHRocm93IG5ldyBBeGlvc0Vycm9yX2RlZmF1bHQoIm9wdGlvbiAiICsgb3B0ICsgIiBtdXN0IGJlICIgKyByZXN1bHQsIEF4aW9zRXJyb3JfZGVmYXVsdC5FUlJfQkFEX09QVElPTl9WQUxVRSk7CiAgICAgIH0KICAgICAgY29udGludWU7CiAgICB9CiAgICBpZiAoYWxsb3dVbmtub3duICE9PSB0cnVlKSB7CiAgICAgIHRocm93IG5ldyBBeGlvc0Vycm9yX2RlZmF1bHQoIlVua25vd24gb3B0aW9uICIgKyBvcHQsIEF4aW9zRXJyb3JfZGVmYXVsdC5FUlJfQkFEX09QVElPTik7CiAgICB9CiAgfQp9CnZhciB2YWxpZGF0b3JfZGVmYXVsdCA9IHsKICBhc3NlcnRPcHRpb25zLAogIHZhbGlkYXRvcnMKfTsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9BeGlvcy5qcwp2YXIgdmFsaWRhdG9yczIgPSB2YWxpZGF0b3JfZGVmYXVsdC52YWxpZGF0b3JzOwp2YXIgQXhpb3MgPSBjbGFzcyB7CiAgY29uc3RydWN0b3IoaW5zdGFuY2VDb25maWcpIHsKICAgIHRoaXMuZGVmYXVsdHMgPSBpbnN0YW5jZUNvbmZpZyB8fCB7fTsKICAgIHRoaXMuaW50ZXJjZXB0b3JzID0gewogICAgICByZXF1ZXN0OiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyX2RlZmF1bHQoKSwKICAgICAgcmVzcG9uc2U6IG5ldyBJbnRlcmNlcHRvck1hbmFnZXJfZGVmYXVsdCgpCiAgICB9OwogIH0KICAvKioKICAgKiBEaXNwYXRjaCBhIHJlcXVlc3QKICAgKgogICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gY29uZmlnT3JVcmwgVGhlIGNvbmZpZyBzcGVjaWZpYyBmb3IgdGhpcyByZXF1ZXN0IChtZXJnZWQgd2l0aCB0aGlzLmRlZmF1bHRzKQogICAqIEBwYXJhbSB7P09iamVjdH0gY29uZmlnCiAgICoKICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gVGhlIFByb21pc2UgdG8gYmUgZnVsZmlsbGVkCiAgICovCiAgYXN5bmMgcmVxdWVzdChjb25maWdPclVybCwgY29uZmlnKSB7CiAgICB0cnkgewogICAgICByZXR1cm4gYXdhaXQgdGhpcy5fcmVxdWVzdChjb25maWdPclVybCwgY29uZmlnKTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHsKICAgICAgICBsZXQgZHVtbXkgPSB7fTsKICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSA/IEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKGR1bW15KSA6IGR1bW15ID0gbmV3IEVycm9yKCk7CiAgICAgICAgY29uc3Qgc3RhY2sgPSBkdW1teS5zdGFjayA/IGR1bW15LnN0YWNrLnJlcGxhY2UoL14uK1xuLywgIiIpIDogIiI7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmICghZXJyLnN0YWNrKSB7CiAgICAgICAgICAgIGVyci5zdGFjayA9IHN0YWNrOwogICAgICAgICAgfSBlbHNlIGlmIChzdGFjayAmJiAhU3RyaW5nKGVyci5zdGFjaykuZW5kc1dpdGgoc3RhY2sucmVwbGFjZSgvXi4rXG4uK1xuLywgIiIpKSkgewogICAgICAgICAgICBlcnIuc3RhY2sgKz0gIlxuIiArIHN0YWNrOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhyb3cgZXJyOwogICAgfQogIH0KICBfcmVxdWVzdChjb25maWdPclVybCwgY29uZmlnKSB7CiAgICBpZiAodHlwZW9mIGNvbmZpZ09yVXJsID09PSAic3RyaW5nIikgewogICAgICBjb25maWcgPSBjb25maWcgfHwge307CiAgICAgIGNvbmZpZy51cmwgPSBjb25maWdPclVybDsKICAgIH0gZWxzZSB7CiAgICAgIGNvbmZpZyA9IGNvbmZpZ09yVXJsIHx8IHt9OwogICAgfQogICAgY29uZmlnID0gbWVyZ2VDb25maWcodGhpcy5kZWZhdWx0cywgY29uZmlnKTsKICAgIGNvbnN0IHsgdHJhbnNpdGlvbmFsOiB0cmFuc2l0aW9uYWwyLCBwYXJhbXNTZXJpYWxpemVyLCBoZWFkZXJzIH0gPSBjb25maWc7CiAgICBpZiAodHJhbnNpdGlvbmFsMiAhPT0gdm9pZCAwKSB7CiAgICAgIHZhbGlkYXRvcl9kZWZhdWx0LmFzc2VydE9wdGlvbnModHJhbnNpdGlvbmFsMiwgewogICAgICAgIHNpbGVudEpTT05QYXJzaW5nOiB2YWxpZGF0b3JzMi50cmFuc2l0aW9uYWwodmFsaWRhdG9yczIuYm9vbGVhbiksCiAgICAgICAgZm9yY2VkSlNPTlBhcnNpbmc6IHZhbGlkYXRvcnMyLnRyYW5zaXRpb25hbCh2YWxpZGF0b3JzMi5ib29sZWFuKSwKICAgICAgICBjbGFyaWZ5VGltZW91dEVycm9yOiB2YWxpZGF0b3JzMi50cmFuc2l0aW9uYWwodmFsaWRhdG9yczIuYm9vbGVhbikKICAgICAgfSwgZmFsc2UpOwogICAgfQogICAgaWYgKHBhcmFtc1NlcmlhbGl6ZXIgIT0gbnVsbCkgewogICAgICBpZiAodXRpbHNfZGVmYXVsdC5pc0Z1bmN0aW9uKHBhcmFtc1NlcmlhbGl6ZXIpKSB7CiAgICAgICAgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIgPSB7CiAgICAgICAgICBzZXJpYWxpemU6IHBhcmFtc1NlcmlhbGl6ZXIKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIHZhbGlkYXRvcl9kZWZhdWx0LmFzc2VydE9wdGlvbnMocGFyYW1zU2VyaWFsaXplciwgewogICAgICAgICAgZW5jb2RlOiB2YWxpZGF0b3JzMi5mdW5jdGlvbiwKICAgICAgICAgIHNlcmlhbGl6ZTogdmFsaWRhdG9yczIuZnVuY3Rpb24KICAgICAgICB9LCB0cnVlKTsKICAgICAgfQogICAgfQogICAgaWYgKGNvbmZpZy5hbGxvd0Fic29sdXRlVXJscyAhPT0gdm9pZCAwKSB7CiAgICB9IGVsc2UgaWYgKHRoaXMuZGVmYXVsdHMuYWxsb3dBYnNvbHV0ZVVybHMgIT09IHZvaWQgMCkgewogICAgICBjb25maWcuYWxsb3dBYnNvbHV0ZVVybHMgPSB0aGlzLmRlZmF1bHRzLmFsbG93QWJzb2x1dGVVcmxzOwogICAgfSBlbHNlIHsKICAgICAgY29uZmlnLmFsbG93QWJzb2x1dGVVcmxzID0gdHJ1ZTsKICAgIH0KICAgIHZhbGlkYXRvcl9kZWZhdWx0LmFzc2VydE9wdGlvbnMoY29uZmlnLCB7CiAgICAgIGJhc2VVcmw6IHZhbGlkYXRvcnMyLnNwZWxsaW5nKCJiYXNlVVJMIiksCiAgICAgIHdpdGhYc3JmVG9rZW46IHZhbGlkYXRvcnMyLnNwZWxsaW5nKCJ3aXRoWFNSRlRva2VuIikKICAgIH0sIHRydWUpOwogICAgY29uZmlnLm1ldGhvZCA9IChjb25maWcubWV0aG9kIHx8IHRoaXMuZGVmYXVsdHMubWV0aG9kIHx8ICJnZXQiKS50b0xvd2VyQ2FzZSgpOwogICAgbGV0IGNvbnRleHRIZWFkZXJzID0gaGVhZGVycyAmJiB1dGlsc19kZWZhdWx0Lm1lcmdlKAogICAgICBoZWFkZXJzLmNvbW1vbiwKICAgICAgaGVhZGVyc1tjb25maWcubWV0aG9kXQogICAgKTsKICAgIGhlYWRlcnMgJiYgdXRpbHNfZGVmYXVsdC5mb3JFYWNoKAogICAgICBbImRlbGV0ZSIsICJnZXQiLCAiaGVhZCIsICJwb3N0IiwgInB1dCIsICJwYXRjaCIsICJjb21tb24iXSwKICAgICAgKG1ldGhvZCkgPT4gewogICAgICAgIGRlbGV0ZSBoZWFkZXJzW21ldGhvZF07CiAgICAgIH0KICAgICk7CiAgICBjb25maWcuaGVhZGVycyA9IEF4aW9zSGVhZGVyc19kZWZhdWx0LmNvbmNhdChjb250ZXh0SGVhZGVycywgaGVhZGVycyk7CiAgICBjb25zdCByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbiA9IFtdOwogICAgbGV0IHN5bmNocm9ub3VzUmVxdWVzdEludGVyY2VwdG9ycyA9IHRydWU7CiAgICB0aGlzLmludGVyY2VwdG9ycy5yZXF1ZXN0LmZvckVhY2goZnVuY3Rpb24gdW5zaGlmdFJlcXVlc3RJbnRlcmNlcHRvcnMoaW50ZXJjZXB0b3IpIHsKICAgICAgaWYgKHR5cGVvZiBpbnRlcmNlcHRvci5ydW5XaGVuID09PSAiZnVuY3Rpb24iICYmIGludGVyY2VwdG9yLnJ1bldoZW4oY29uZmlnKSA9PT0gZmFsc2UpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgc3luY2hyb25vdXNSZXF1ZXN0SW50ZXJjZXB0b3JzID0gc3luY2hyb25vdXNSZXF1ZXN0SW50ZXJjZXB0b3JzICYmIGludGVyY2VwdG9yLnN5bmNocm9ub3VzOwogICAgICByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbi51bnNoaWZ0KGludGVyY2VwdG9yLmZ1bGZpbGxlZCwgaW50ZXJjZXB0b3IucmVqZWN0ZWQpOwogICAgfSk7CiAgICBjb25zdCByZXNwb25zZUludGVyY2VwdG9yQ2hhaW4gPSBbXTsKICAgIHRoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24gcHVzaFJlc3BvbnNlSW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7CiAgICAgIHJlc3BvbnNlSW50ZXJjZXB0b3JDaGFpbi5wdXNoKGludGVyY2VwdG9yLmZ1bGZpbGxlZCwgaW50ZXJjZXB0b3IucmVqZWN0ZWQpOwogICAgfSk7CiAgICBsZXQgcHJvbWlzZTsKICAgIGxldCBpID0gMDsKICAgIGxldCBsZW47CiAgICBpZiAoIXN5bmNocm9ub3VzUmVxdWVzdEludGVyY2VwdG9ycykgewogICAgICBjb25zdCBjaGFpbiA9IFtkaXNwYXRjaFJlcXVlc3QuYmluZCh0aGlzKSwgdm9pZCAwXTsKICAgICAgY2hhaW4udW5zaGlmdCguLi5yZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbik7CiAgICAgIGNoYWluLnB1c2goLi4ucmVzcG9uc2VJbnRlcmNlcHRvckNoYWluKTsKICAgICAgbGVuID0gY2hhaW4ubGVuZ3RoOwogICAgICBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKGNvbmZpZyk7CiAgICAgIHdoaWxlIChpIDwgbGVuKSB7CiAgICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihjaGFpbltpKytdLCBjaGFpbltpKytdKTsKICAgICAgfQogICAgICByZXR1cm4gcHJvbWlzZTsKICAgIH0KICAgIGxlbiA9IHJlcXVlc3RJbnRlcmNlcHRvckNoYWluLmxlbmd0aDsKICAgIGxldCBuZXdDb25maWcgPSBjb25maWc7CiAgICB3aGlsZSAoaSA8IGxlbikgewogICAgICBjb25zdCBvbkZ1bGZpbGxlZCA9IHJlcXVlc3RJbnRlcmNlcHRvckNoYWluW2krK107CiAgICAgIGNvbnN0IG9uUmVqZWN0ZWQgPSByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbltpKytdOwogICAgICB0cnkgewogICAgICAgIG5ld0NvbmZpZyA9IG9uRnVsZmlsbGVkKG5ld0NvbmZpZyk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgb25SZWplY3RlZC5jYWxsKHRoaXMsIGVycm9yKTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogICAgdHJ5IHsKICAgICAgcHJvbWlzZSA9IGRpc3BhdGNoUmVxdWVzdC5jYWxsKHRoaXMsIG5ld0NvbmZpZyk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogICAgfQogICAgaSA9IDA7CiAgICBsZW4gPSByZXNwb25zZUludGVyY2VwdG9yQ2hhaW4ubGVuZ3RoOwogICAgd2hpbGUgKGkgPCBsZW4pIHsKICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihyZXNwb25zZUludGVyY2VwdG9yQ2hhaW5baSsrXSwgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluW2krK10pOwogICAgfQogICAgcmV0dXJuIHByb21pc2U7CiAgfQogIGdldFVyaShjb25maWcpIHsKICAgIGNvbmZpZyA9IG1lcmdlQ29uZmlnKHRoaXMuZGVmYXVsdHMsIGNvbmZpZyk7CiAgICBjb25zdCBmdWxsUGF0aCA9IGJ1aWxkRnVsbFBhdGgoY29uZmlnLmJhc2VVUkwsIGNvbmZpZy51cmwsIGNvbmZpZy5hbGxvd0Fic29sdXRlVXJscyk7CiAgICByZXR1cm4gYnVpbGRVUkwoZnVsbFBhdGgsIGNvbmZpZy5wYXJhbXMsIGNvbmZpZy5wYXJhbXNTZXJpYWxpemVyKTsKICB9Cn07CnV0aWxzX2RlZmF1bHQuZm9yRWFjaChbImRlbGV0ZSIsICJnZXQiLCAiaGVhZCIsICJvcHRpb25zIl0sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7CiAgQXhpb3MucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbih1cmwsIGNvbmZpZykgewogICAgcmV0dXJuIHRoaXMucmVxdWVzdChtZXJnZUNvbmZpZyhjb25maWcgfHwge30sIHsKICAgICAgbWV0aG9kLAogICAgICB1cmwsCiAgICAgIGRhdGE6IChjb25maWcgfHwge30pLmRhdGEKICAgIH0pKTsKICB9Owp9KTsKdXRpbHNfZGVmYXVsdC5mb3JFYWNoKFsicG9zdCIsICJwdXQiLCAicGF0Y2giXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKG1ldGhvZCkgewogIGZ1bmN0aW9uIGdlbmVyYXRlSFRUUE1ldGhvZChpc0Zvcm0pIHsKICAgIHJldHVybiBmdW5jdGlvbiBodHRwTWV0aG9kKHVybCwgZGF0YSwgY29uZmlnKSB7CiAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QobWVyZ2VDb25maWcoY29uZmlnIHx8IHt9LCB7CiAgICAgICAgbWV0aG9kLAogICAgICAgIGhlYWRlcnM6IGlzRm9ybSA/IHsKICAgICAgICAgICJDb250ZW50LVR5cGUiOiAibXVsdGlwYXJ0L2Zvcm0tZGF0YSIKICAgICAgICB9IDoge30sCiAgICAgICAgdXJsLAogICAgICAgIGRhdGEKICAgICAgfSkpOwogICAgfTsKICB9CiAgQXhpb3MucHJvdG90eXBlW21ldGhvZF0gPSBnZW5lcmF0ZUhUVFBNZXRob2QoKTsKICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kICsgIkZvcm0iXSA9IGdlbmVyYXRlSFRUUE1ldGhvZCh0cnVlKTsKfSk7CnZhciBBeGlvc19kZWZhdWx0ID0gQXhpb3M7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NhbmNlbC9DYW5jZWxUb2tlbi5qcwp2YXIgQ2FuY2VsVG9rZW4gPSBjbGFzcyBfQ2FuY2VsVG9rZW4gewogIGNvbnN0cnVjdG9yKGV4ZWN1dG9yKSB7CiAgICBpZiAodHlwZW9mIGV4ZWN1dG9yICE9PSAiZnVuY3Rpb24iKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoImV4ZWN1dG9yIG11c3QgYmUgYSBmdW5jdGlvbi4iKTsKICAgIH0KICAgIGxldCByZXNvbHZlUHJvbWlzZTsKICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIHByb21pc2VFeGVjdXRvcihyZXNvbHZlKSB7CiAgICAgIHJlc29sdmVQcm9taXNlID0gcmVzb2x2ZTsKICAgIH0pOwogICAgY29uc3QgdG9rZW4gPSB0aGlzOwogICAgdGhpcy5wcm9taXNlLnRoZW4oKGNhbmNlbCkgPT4gewogICAgICBpZiAoIXRva2VuLl9saXN0ZW5lcnMpIHJldHVybjsKICAgICAgbGV0IGkgPSB0b2tlbi5fbGlzdGVuZXJzLmxlbmd0aDsKICAgICAgd2hpbGUgKGktLSA+IDApIHsKICAgICAgICB0b2tlbi5fbGlzdGVuZXJzW2ldKGNhbmNlbCk7CiAgICAgIH0KICAgICAgdG9rZW4uX2xpc3RlbmVycyA9IG51bGw7CiAgICB9KTsKICAgIHRoaXMucHJvbWlzZS50aGVuID0gKG9uZnVsZmlsbGVkKSA9PiB7CiAgICAgIGxldCBfcmVzb2x2ZTsKICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICAgICAgdG9rZW4uc3Vic2NyaWJlKHJlc29sdmUpOwogICAgICAgIF9yZXNvbHZlID0gcmVzb2x2ZTsKICAgICAgfSkudGhlbihvbmZ1bGZpbGxlZCk7CiAgICAgIHByb21pc2UuY2FuY2VsID0gZnVuY3Rpb24gcmVqZWN0KCkgewogICAgICAgIHRva2VuLnVuc3Vic2NyaWJlKF9yZXNvbHZlKTsKICAgICAgfTsKICAgICAgcmV0dXJuIHByb21pc2U7CiAgICB9OwogICAgZXhlY3V0b3IoZnVuY3Rpb24gY2FuY2VsKG1lc3NhZ2UsIGNvbmZpZywgcmVxdWVzdCkgewogICAgICBpZiAodG9rZW4ucmVhc29uKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRva2VuLnJlYXNvbiA9IG5ldyBDYW5jZWxlZEVycm9yX2RlZmF1bHQobWVzc2FnZSwgY29uZmlnLCByZXF1ZXN0KTsKICAgICAgcmVzb2x2ZVByb21pc2UodG9rZW4ucmVhc29uKTsKICAgIH0pOwogIH0KICAvKioKICAgKiBUaHJvd3MgYSBgQ2FuY2VsZWRFcnJvcmAgaWYgY2FuY2VsbGF0aW9uIGhhcyBiZWVuIHJlcXVlc3RlZC4KICAgKi8KICB0aHJvd0lmUmVxdWVzdGVkKCkgewogICAgaWYgKHRoaXMucmVhc29uKSB7CiAgICAgIHRocm93IHRoaXMucmVhc29uOwogICAgfQogIH0KICAvKioKICAgKiBTdWJzY3JpYmUgdG8gdGhlIGNhbmNlbCBzaWduYWwKICAgKi8KICBzdWJzY3JpYmUobGlzdGVuZXIpIHsKICAgIGlmICh0aGlzLnJlYXNvbikgewogICAgICBsaXN0ZW5lcih0aGlzLnJlYXNvbik7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh0aGlzLl9saXN0ZW5lcnMpIHsKICAgICAgdGhpcy5fbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5fbGlzdGVuZXJzID0gW2xpc3RlbmVyXTsKICAgIH0KICB9CiAgLyoqCiAgICogVW5zdWJzY3JpYmUgZnJvbSB0aGUgY2FuY2VsIHNpZ25hbAogICAqLwogIHVuc3Vic2NyaWJlKGxpc3RlbmVyKSB7CiAgICBpZiAoIXRoaXMuX2xpc3RlbmVycykgewogICAgICByZXR1cm47CiAgICB9CiAgICBjb25zdCBpbmRleCA9IHRoaXMuX2xpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTsKICAgIGlmIChpbmRleCAhPT0gLTEpIHsKICAgICAgdGhpcy5fbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7CiAgICB9CiAgfQogIHRvQWJvcnRTaWduYWwoKSB7CiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpOwogICAgY29uc3QgYWJvcnQgPSAoZXJyKSA9PiB7CiAgICAgIGNvbnRyb2xsZXIuYWJvcnQoZXJyKTsKICAgIH07CiAgICB0aGlzLnN1YnNjcmliZShhYm9ydCk7CiAgICBjb250cm9sbGVyLnNpZ25hbC51bnN1YnNjcmliZSA9ICgpID0+IHRoaXMudW5zdWJzY3JpYmUoYWJvcnQpOwogICAgcmV0dXJuIGNvbnRyb2xsZXIuc2lnbmFsOwogIH0KICAvKioKICAgKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGEgbmV3IGBDYW5jZWxUb2tlbmAgYW5kIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsCiAgICogY2FuY2VscyB0aGUgYENhbmNlbFRva2VuYC4KICAgKi8KICBzdGF0aWMgc291cmNlKCkgewogICAgbGV0IGNhbmNlbDsKICAgIGNvbnN0IHRva2VuID0gbmV3IF9DYW5jZWxUb2tlbihmdW5jdGlvbiBleGVjdXRvcihjKSB7CiAgICAgIGNhbmNlbCA9IGM7CiAgICB9KTsKICAgIHJldHVybiB7CiAgICAgIHRva2VuLAogICAgICBjYW5jZWwKICAgIH07CiAgfQp9Owp2YXIgQ2FuY2VsVG9rZW5fZGVmYXVsdCA9IENhbmNlbFRva2VuOwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3NwcmVhZC5qcwpmdW5jdGlvbiBzcHJlYWQoY2FsbGJhY2spIHsKICByZXR1cm4gZnVuY3Rpb24gd3JhcChhcnIpIHsKICAgIHJldHVybiBjYWxsYmFjay5hcHBseShudWxsLCBhcnIpOwogIH07Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9pc0F4aW9zRXJyb3IuanMKZnVuY3Rpb24gaXNBeGlvc0Vycm9yKHBheWxvYWQpIHsKICByZXR1cm4gdXRpbHNfZGVmYXVsdC5pc09iamVjdChwYXlsb2FkKSAmJiBwYXlsb2FkLmlzQXhpb3NFcnJvciA9PT0gdHJ1ZTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL0h0dHBTdGF0dXNDb2RlLmpzCnZhciBIdHRwU3RhdHVzQ29kZSA9IHsKICBDb250aW51ZTogMTAwLAogIFN3aXRjaGluZ1Byb3RvY29sczogMTAxLAogIFByb2Nlc3Npbmc6IDEwMiwKICBFYXJseUhpbnRzOiAxMDMsCiAgT2s6IDIwMCwKICBDcmVhdGVkOiAyMDEsCiAgQWNjZXB0ZWQ6IDIwMiwKICBOb25BdXRob3JpdGF0aXZlSW5mb3JtYXRpb246IDIwMywKICBOb0NvbnRlbnQ6IDIwNCwKICBSZXNldENvbnRlbnQ6IDIwNSwKICBQYXJ0aWFsQ29udGVudDogMjA2LAogIE11bHRpU3RhdHVzOiAyMDcsCiAgQWxyZWFkeVJlcG9ydGVkOiAyMDgsCiAgSW1Vc2VkOiAyMjYsCiAgTXVsdGlwbGVDaG9pY2VzOiAzMDAsCiAgTW92ZWRQZXJtYW5lbnRseTogMzAxLAogIEZvdW5kOiAzMDIsCiAgU2VlT3RoZXI6IDMwMywKICBOb3RNb2RpZmllZDogMzA0LAogIFVzZVByb3h5OiAzMDUsCiAgVW51c2VkOiAzMDYsCiAgVGVtcG9yYXJ5UmVkaXJlY3Q6IDMwNywKICBQZXJtYW5lbnRSZWRpcmVjdDogMzA4LAogIEJhZFJlcXVlc3Q6IDQwMCwKICBVbmF1dGhvcml6ZWQ6IDQwMSwKICBQYXltZW50UmVxdWlyZWQ6IDQwMiwKICBGb3JiaWRkZW46IDQwMywKICBOb3RGb3VuZDogNDA0LAogIE1ldGhvZE5vdEFsbG93ZWQ6IDQwNSwKICBOb3RBY2NlcHRhYmxlOiA0MDYsCiAgUHJveHlBdXRoZW50aWNhdGlvblJlcXVpcmVkOiA0MDcsCiAgUmVxdWVzdFRpbWVvdXQ6IDQwOCwKICBDb25mbGljdDogNDA5LAogIEdvbmU6IDQxMCwKICBMZW5ndGhSZXF1aXJlZDogNDExLAogIFByZWNvbmRpdGlvbkZhaWxlZDogNDEyLAogIFBheWxvYWRUb29MYXJnZTogNDEzLAogIFVyaVRvb0xvbmc6IDQxNCwKICBVbnN1cHBvcnRlZE1lZGlhVHlwZTogNDE1LAogIFJhbmdlTm90U2F0aXNmaWFibGU6IDQxNiwKICBFeHBlY3RhdGlvbkZhaWxlZDogNDE3LAogIEltQVRlYXBvdDogNDE4LAogIE1pc2RpcmVjdGVkUmVxdWVzdDogNDIxLAogIFVucHJvY2Vzc2FibGVFbnRpdHk6IDQyMiwKICBMb2NrZWQ6IDQyMywKICBGYWlsZWREZXBlbmRlbmN5OiA0MjQsCiAgVG9vRWFybHk6IDQyNSwKICBVcGdyYWRlUmVxdWlyZWQ6IDQyNiwKICBQcmVjb25kaXRpb25SZXF1aXJlZDogNDI4LAogIFRvb01hbnlSZXF1ZXN0czogNDI5LAogIFJlcXVlc3RIZWFkZXJGaWVsZHNUb29MYXJnZTogNDMxLAogIFVuYXZhaWxhYmxlRm9yTGVnYWxSZWFzb25zOiA0NTEsCiAgSW50ZXJuYWxTZXJ2ZXJFcnJvcjogNTAwLAogIE5vdEltcGxlbWVudGVkOiA1MDEsCiAgQmFkR2F0ZXdheTogNTAyLAogIFNlcnZpY2VVbmF2YWlsYWJsZTogNTAzLAogIEdhdGV3YXlUaW1lb3V0OiA1MDQsCiAgSHR0cFZlcnNpb25Ob3RTdXBwb3J0ZWQ6IDUwNSwKICBWYXJpYW50QWxzb05lZ290aWF0ZXM6IDUwNiwKICBJbnN1ZmZpY2llbnRTdG9yYWdlOiA1MDcsCiAgTG9vcERldGVjdGVkOiA1MDgsCiAgTm90RXh0ZW5kZWQ6IDUxMCwKICBOZXR3b3JrQXV0aGVudGljYXRpb25SZXF1aXJlZDogNTExCn07Ck9iamVjdC5lbnRyaWVzKEh0dHBTdGF0dXNDb2RlKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHsKICBIdHRwU3RhdHVzQ29kZVt2YWx1ZV0gPSBrZXk7Cn0pOwp2YXIgSHR0cFN0YXR1c0NvZGVfZGVmYXVsdCA9IEh0dHBTdGF0dXNDb2RlOwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9heGlvcy5qcwpmdW5jdGlvbiBjcmVhdGVJbnN0YW5jZShkZWZhdWx0Q29uZmlnKSB7CiAgY29uc3QgY29udGV4dCA9IG5ldyBBeGlvc19kZWZhdWx0KGRlZmF1bHRDb25maWcpOwogIGNvbnN0IGluc3RhbmNlID0gYmluZChBeGlvc19kZWZhdWx0LnByb3RvdHlwZS5yZXF1ZXN0LCBjb250ZXh0KTsKICB1dGlsc19kZWZhdWx0LmV4dGVuZChpbnN0YW5jZSwgQXhpb3NfZGVmYXVsdC5wcm90b3R5cGUsIGNvbnRleHQsIHsgYWxsT3duS2V5czogdHJ1ZSB9KTsKICB1dGlsc19kZWZhdWx0LmV4dGVuZChpbnN0YW5jZSwgY29udGV4dCwgbnVsbCwgeyBhbGxPd25LZXlzOiB0cnVlIH0pOwogIGluc3RhbmNlLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShpbnN0YW5jZUNvbmZpZykgewogICAgcmV0dXJuIGNyZWF0ZUluc3RhbmNlKG1lcmdlQ29uZmlnKGRlZmF1bHRDb25maWcsIGluc3RhbmNlQ29uZmlnKSk7CiAgfTsKICByZXR1cm4gaW5zdGFuY2U7Cn0KdmFyIGF4aW9zID0gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdHNfZGVmYXVsdCk7CmF4aW9zLkF4aW9zID0gQXhpb3NfZGVmYXVsdDsKYXhpb3MuQ2FuY2VsZWRFcnJvciA9IENhbmNlbGVkRXJyb3JfZGVmYXVsdDsKYXhpb3MuQ2FuY2VsVG9rZW4gPSBDYW5jZWxUb2tlbl9kZWZhdWx0OwpheGlvcy5pc0NhbmNlbCA9IGlzQ2FuY2VsOwpheGlvcy5WRVJTSU9OID0gVkVSU0lPTjsKYXhpb3MudG9Gb3JtRGF0YSA9IHRvRm9ybURhdGFfZGVmYXVsdDsKYXhpb3MuQXhpb3NFcnJvciA9IEF4aW9zRXJyb3JfZGVmYXVsdDsKYXhpb3MuQ2FuY2VsID0gYXhpb3MuQ2FuY2VsZWRFcnJvcjsKYXhpb3MuYWxsID0gZnVuY3Rpb24gYWxsKHByb21pc2VzKSB7CiAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTsKfTsKYXhpb3Muc3ByZWFkID0gc3ByZWFkOwpheGlvcy5pc0F4aW9zRXJyb3IgPSBpc0F4aW9zRXJyb3I7CmF4aW9zLm1lcmdlQ29uZmlnID0gbWVyZ2VDb25maWc7CmF4aW9zLkF4aW9zSGVhZGVycyA9IEF4aW9zSGVhZGVyc19kZWZhdWx0OwpheGlvcy5mb3JtVG9KU09OID0gKHRoaW5nKSA9PiBmb3JtRGF0YVRvSlNPTl9kZWZhdWx0KHV0aWxzX2RlZmF1bHQuaXNIVE1MRm9ybSh0aGluZykgPyBuZXcgRm9ybURhdGEodGhpbmcpIDogdGhpbmcpOwpheGlvcy5nZXRBZGFwdGVyID0gYWRhcHRlcnNfZGVmYXVsdC5nZXRBZGFwdGVyOwpheGlvcy5IdHRwU3RhdHVzQ29kZSA9IEh0dHBTdGF0dXNDb2RlX2RlZmF1bHQ7CmF4aW9zLmRlZmF1bHQgPSBheGlvczsKdmFyIGF4aW9zX2RlZmF1bHQgPSBheGlvczsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy9heGlvcy9pbmRleC5qcwp2YXIgewogIEF4aW9zOiBBeGlvczIsCiAgQXhpb3NFcnJvcjogQXhpb3NFcnJvcjIsCiAgQ2FuY2VsZWRFcnJvcjogQ2FuY2VsZWRFcnJvcjIsCiAgaXNDYW5jZWw6IGlzQ2FuY2VsMiwKICBDYW5jZWxUb2tlbjogQ2FuY2VsVG9rZW4yLAogIFZFUlNJT046IFZFUlNJT04yLAogIGFsbDogYWxsMiwKICBDYW5jZWwsCiAgaXNBeGlvc0Vycm9yOiBpc0F4aW9zRXJyb3IyLAogIHNwcmVhZDogc3ByZWFkMiwKICB0b0Zvcm1EYXRhOiB0b0Zvcm1EYXRhMiwKICBBeGlvc0hlYWRlcnM6IEF4aW9zSGVhZGVyczIsCiAgSHR0cFN0YXR1c0NvZGU6IEh0dHBTdGF0dXNDb2RlMiwKICBmb3JtVG9KU09OLAogIGdldEFkYXB0ZXIsCiAgbWVyZ2VDb25maWc6IG1lcmdlQ29uZmlnMgp9ID0gYXhpb3NfZGVmYXVsdDsKZXhwb3J0IHsKICBBeGlvczIgYXMgQXhpb3MsCiAgQXhpb3NFcnJvcjIgYXMgQXhpb3NFcnJvciwKICBBeGlvc0hlYWRlcnMyIGFzIEF4aW9zSGVhZGVycywKICBDYW5jZWwsCiAgQ2FuY2VsVG9rZW4yIGFzIENhbmNlbFRva2VuLAogIENhbmNlbGVkRXJyb3IyIGFzIENhbmNlbGVkRXJyb3IsCiAgSHR0cFN0YXR1c0NvZGUyIGFzIEh0dHBTdGF0dXNDb2RlLAogIFZFUlNJT04yIGFzIFZFUlNJT04sCiAgYWxsMiBhcyBhbGwsCiAgYXhpb3NfZGVmYXVsdCBhcyBkZWZhdWx0LAogIGZvcm1Ub0pTT04sCiAgZ2V0QWRhcHRlciwKICBpc0F4aW9zRXJyb3IyIGFzIGlzQXhpb3NFcnJvciwKICBpc0NhbmNlbDIgYXMgaXNDYW5jZWwsCiAgbWVyZ2VDb25maWcyIGFzIG1lcmdlQ29uZmlnLAogIHNwcmVhZDIgYXMgc3ByZWFkLAogIHRvRm9ybURhdGEyIGFzIHRvRm9ybURhdGEKfTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXhpb3MuanMubWFwCg==",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 83752
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 9,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.613Z",
        "time": 10,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/components/movie-form/movie-form.tsx",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/components/movie-form/index.ts"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"16bc-iBp0GxlnzBT8x7TgzzafJycsN5M\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "11163"
            }
          ],
          "content": {
            "size": 11163,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsgY3JlYXRlSG90Q29udGV4dCBhcyBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQgfSBmcm9tICIvQHZpdGUvY2xpZW50IjtpbXBvcnQubWV0YS5ob3QgPSBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQoIi9zcmMvY29tcG9uZW50cy9tb3ZpZS1mb3JtL21vdmllLWZvcm0udHN4Iik7aW1wb3J0IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdF9qc3hEZXZSdW50aW1lIGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9yZWFjdF9qc3gtZGV2LXJ1bnRpbWUuanM/dj0wYmI2OWQ3MyI7IGNvbnN0IGpzeERFViA9IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdF9qc3hEZXZSdW50aW1lWyJqc3hERVYiXTsKaW1wb3J0ICogYXMgUmVmcmVzaFJ1bnRpbWUgZnJvbSAiL0ByZWFjdC1yZWZyZXNoIjsKY29uc3QgaW5XZWJXb3JrZXIgPSB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICJ1bmRlZmluZWQiICYmIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZTsKbGV0IHByZXZSZWZyZXNoUmVnOwpsZXQgcHJldlJlZnJlc2hTaWc7CmlmIChpbXBvcnQubWV0YS5ob3QgJiYgIWluV2ViV29ya2VyKSB7CiAgaWYgKCF3aW5kb3cuJFJlZnJlc2hSZWckKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICJAdml0ZWpzL3BsdWdpbi1yZWFjdCBjYW4ndCBkZXRlY3QgcHJlYW1ibGUuIFNvbWV0aGluZyBpcyB3cm9uZy4iCiAgICApOwogIH0KICBwcmV2UmVmcmVzaFJlZyA9IHdpbmRvdy4kUmVmcmVzaFJlZyQ7CiAgcHJldlJlZnJlc2hTaWcgPSB3aW5kb3cuJFJlZnJlc2hTaWckOwogIHdpbmRvdy4kUmVmcmVzaFJlZyQgPSBSZWZyZXNoUnVudGltZS5nZXRSZWZyZXNoUmVnKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtZm9ybS9tb3ZpZS1mb3JtLnRzeCIpOwogIHdpbmRvdy4kUmVmcmVzaFNpZyQgPSBSZWZyZXNoUnVudGltZS5jcmVhdGVTaWduYXR1cmVGdW5jdGlvbkZvclRyYW5zZm9ybTsKfQp2YXIgX3MgPSAkUmVmcmVzaFNpZyQoKTsKaW1wb3J0IHN0eWxlZCBmcm9tICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvc3R5bGVkLWNvbXBvbmVudHMuanM/dj0wYmI2OWQ3MyI7CmltcG9ydCBNb3ZpZUlucHV0IGZyb20gIi9zcmMvY29tcG9uZW50cy9tb3ZpZS1mb3JtL21vdmllLWlucHV0LnRzeCI7CmltcG9ydCBWYWxpZGF0aW9uRXJyb3JEaXNwbGF5IGZyb20gIi9zcmMvY29tcG9uZW50cy92YWxpZGF0aW9uLWVycm9yLWRpc3BsYXkudHN4IjsKaW1wb3J0IHsgdXNlTW92aWVGb3JtIH0gZnJvbSAiL3NyYy9ob29rcy91c2UtbW92aWUtZm9ybS50cyI7CmltcG9ydCB7IFNCdXR0b24gfSBmcm9tICIvc3JjL3N0eWxlcy9zdHlsZWQtY29tcG9uZW50cy50cyI7CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1vdmllRm9ybSgpIHsKICBfcygpOwogIGNvbnN0IHsKICAgIG1vdmllTmFtZSwKICAgIHNldE1vdmllTmFtZSwKICAgIG1vdmllWWVhciwKICAgIHNldE1vdmllWWVhciwKICAgIG1vdmllUmF0aW5nLAogICAgc2V0TW92aWVSYXRpbmcsCiAgICBoYW5kbGVBZGRNb3ZpZSwKICAgIG1vdmllTG9hZGluZywKICAgIHZhbGlkYXRpb25FcnJvciwKICAgIG1vdmllRGlyZWN0b3IsCiAgICBzZXRNb3ZpZURpcmVjdG9yCiAgfSA9IHVzZU1vdmllRm9ybSgpOwogIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4REVWKCJkaXYiLCB7ICJkYXRhLXRlc3RpZCI6ICJtb3ZpZS1mb3JtLWNvbXAiLCBjaGlsZHJlbjogWwogICAgLyogQF9fUFVSRV9fICovIGpzeERFVihTU3VidGl0bGUsIHsgY2hpbGRyZW46ICJBZGQgYSBOZXcgTW92aWUiIH0sIHZvaWQgMCwgZmFsc2UsIHsKICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtZm9ybS9tb3ZpZS1mb3JtLnRzeCIsCiAgICAgIGxpbmVOdW1iZXI6IDQzLAogICAgICBjb2x1bW5OdW1iZXI6IDcKICAgIH0sIHRoaXMpLAogICAgLyogQF9fUFVSRV9fICovIGpzeERFVihWYWxpZGF0aW9uRXJyb3JEaXNwbGF5LCB7IHZhbGlkYXRpb25FcnJvciB9LCB2b2lkIDAsIGZhbHNlLCB7CiAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWZvcm0vbW92aWUtZm9ybS50c3giLAogICAgICBsaW5lTnVtYmVyOiA0NiwKICAgICAgY29sdW1uTnVtYmVyOiA3CiAgICB9LCB0aGlzKSwKICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoCiAgICAgIE1vdmllSW5wdXQsCiAgICAgIHsKICAgICAgICB0eXBlOiAidGV4dCIsCiAgICAgICAgdmFsdWU6IG1vdmllTmFtZSwKICAgICAgICBwbGFjZWhvbGRlcjogIk1vdmllIG5hbWUiLAogICAgICAgIG9uQ2hhbmdlOiAoZSkgPT4gc2V0TW92aWVOYW1lKGUudGFyZ2V0LnZhbHVlKQogICAgICB9LAogICAgICB2b2lkIDAsCiAgICAgIGZhbHNlLAogICAgICB7CiAgICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtZm9ybS9tb3ZpZS1mb3JtLnRzeCIsCiAgICAgICAgbGluZU51bWJlcjogNDgsCiAgICAgICAgY29sdW1uTnVtYmVyOiA3CiAgICAgIH0sCiAgICAgIHRoaXMKICAgICksCiAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKAogICAgICBNb3ZpZUlucHV0LAogICAgICB7CiAgICAgICAgdHlwZTogIm51bWJlciIsCiAgICAgICAgdmFsdWU6IG1vdmllWWVhciwKICAgICAgICBwbGFjZWhvbGRlcjogIk1vdmllIHllYXIiLAogICAgICAgIG9uQ2hhbmdlOiAoZSkgPT4gc2V0TW92aWVZZWFyKE51bWJlcihlLnRhcmdldC52YWx1ZSkpCiAgICAgIH0sCiAgICAgIHZvaWQgMCwKICAgICAgZmFsc2UsCiAgICAgIHsKICAgICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9tb3ZpZS1mb3JtL21vdmllLWZvcm0udHN4IiwKICAgICAgICBsaW5lTnVtYmVyOiA1NCwKICAgICAgICBjb2x1bW5OdW1iZXI6IDcKICAgICAgfSwKICAgICAgdGhpcwogICAgKSwKICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoCiAgICAgIE1vdmllSW5wdXQsCiAgICAgIHsKICAgICAgICB0eXBlOiAibnVtYmVyIiwKICAgICAgICB2YWx1ZTogbW92aWVSYXRpbmcsCiAgICAgICAgcGxhY2Vob2xkZXI6ICJNb3ZpZSByYXRpbmciLAogICAgICAgIG9uQ2hhbmdlOiAoZSkgPT4gc2V0TW92aWVSYXRpbmcoTnVtYmVyKGUudGFyZ2V0LnZhbHVlKSkKICAgICAgfSwKICAgICAgdm9pZCAwLAogICAgICBmYWxzZSwKICAgICAgewogICAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWZvcm0vbW92aWUtZm9ybS50c3giLAogICAgICAgIGxpbmVOdW1iZXI6IDYwLAogICAgICAgIGNvbHVtbk51bWJlcjogNwogICAgICB9LAogICAgICB0aGlzCiAgICApLAogICAgLyogQF9fUFVSRV9fICovIGpzeERFVigKICAgICAgTW92aWVJbnB1dCwKICAgICAgewogICAgICAgIHR5cGU6ICJ0ZXh0IiwKICAgICAgICB2YWx1ZTogbW92aWVEaXJlY3RvciwKICAgICAgICBwbGFjZWhvbGRlcjogIk1vdmllIGRpcmVjdG9yIiwKICAgICAgICBvbkNoYW5nZTogKGUpID0+IHNldE1vdmllRGlyZWN0b3IoZS50YXJnZXQudmFsdWUpCiAgICAgIH0sCiAgICAgIHZvaWQgMCwKICAgICAgZmFsc2UsCiAgICAgIHsKICAgICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9tb3ZpZS1mb3JtL21vdmllLWZvcm0udHN4IiwKICAgICAgICBsaW5lTnVtYmVyOiA2NiwKICAgICAgICBjb2x1bW5OdW1iZXI6IDcKICAgICAgfSwKICAgICAgdGhpcwogICAgKSwKICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoCiAgICAgIFNCdXR0b24sCiAgICAgIHsKICAgICAgICAiZGF0YS10ZXN0aWQiOiAiYWRkLW1vdmllLWJ1dHRvbiIsCiAgICAgICAgb25DbGljazogaGFuZGxlQWRkTW92aWUsCiAgICAgICAgZGlzYWJsZWQ6IG1vdmllTG9hZGluZywKICAgICAgICBjaGlsZHJlbjogbW92aWVMb2FkaW5nID8gIkFkZGluZy4uLiIgOiAiQWRkIE1vdmllIgogICAgICB9LAogICAgICB2b2lkIDAsCiAgICAgIGZhbHNlLAogICAgICB7CiAgICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtZm9ybS9tb3ZpZS1mb3JtLnRzeCIsCiAgICAgICAgbGluZU51bWJlcjogNzIsCiAgICAgICAgY29sdW1uTnVtYmVyOiA3CiAgICAgIH0sCiAgICAgIHRoaXMKICAgICkKICBdIH0sIHZvaWQgMCwgdHJ1ZSwgewogICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtZm9ybS9tb3ZpZS1mb3JtLnRzeCIsCiAgICBsaW5lTnVtYmVyOiA0MiwKICAgIGNvbHVtbk51bWJlcjogNQogIH0sIHRoaXMpOwp9Cl9zKE1vdmllRm9ybSwgImRyOS94ZFZ2MEcrZUh6U016cklDZjdhWEdhOD0iLCBmYWxzZSwgZnVuY3Rpb24oKSB7CiAgcmV0dXJuIFt1c2VNb3ZpZUZvcm1dOwp9KTsKX2MgPSBNb3ZpZUZvcm07CmNvbnN0IFNTdWJ0aXRsZSA9IHN0eWxlZC5oMmAKICBjb2xvcjogIzMzMzsKICBmb250LXNpemU6IDJyZW07CiAgbWFyZ2luLWJvdHRvbTogMTBweDsKYDsKX2MyID0gU1N1YnRpdGxlOwp2YXIgX2MsIF9jMjsKJFJlZnJlc2hSZWckKF9jLCAiTW92aWVGb3JtIik7CiRSZWZyZXNoUmVnJChfYzIsICJTU3VidGl0bGUiKTsKaWYgKGltcG9ydC5tZXRhLmhvdCAmJiAhaW5XZWJXb3JrZXIpIHsKICB3aW5kb3cuJFJlZnJlc2hSZWckID0gcHJldlJlZnJlc2hSZWc7CiAgd2luZG93LiRSZWZyZXNoU2lnJCA9IHByZXZSZWZyZXNoU2lnOwp9CmlmIChpbXBvcnQubWV0YS5ob3QgJiYgIWluV2ViV29ya2VyKSB7CiAgUmVmcmVzaFJ1bnRpbWUuX19obXJfaW1wb3J0KGltcG9ydC5tZXRhLnVybCkudGhlbigoY3VycmVudEV4cG9ydHMpID0+IHsKICAgIFJlZnJlc2hSdW50aW1lLnJlZ2lzdGVyRXhwb3J0c0ZvclJlYWN0UmVmcmVzaCgiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWZvcm0vbW92aWUtZm9ybS50c3giLCBjdXJyZW50RXhwb3J0cyk7CiAgICBpbXBvcnQubWV0YS5ob3QuYWNjZXB0KChuZXh0RXhwb3J0cykgPT4gewogICAgICBpZiAoIW5leHRFeHBvcnRzKSByZXR1cm47CiAgICAgIGNvbnN0IGludmFsaWRhdGVNZXNzYWdlID0gUmVmcmVzaFJ1bnRpbWUudmFsaWRhdGVSZWZyZXNoQm91bmRhcnlBbmRFbnF1ZXVlVXBkYXRlKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtZm9ybS9tb3ZpZS1mb3JtLnRzeCIsIGN1cnJlbnRFeHBvcnRzLCBuZXh0RXhwb3J0cyk7CiAgICAgIGlmIChpbnZhbGlkYXRlTWVzc2FnZSkgaW1wb3J0Lm1ldGEuaG90LmludmFsaWRhdGUoaW52YWxpZGF0ZU1lc3NhZ2UpOwogICAgfSk7CiAgfSk7Cn0KCi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnRZWEJ3YVc1bmN5STZJa0ZCZFVKTk96czdPenM3T3pzN096czdPenM3T3p0QlFYWkNUaXhQUVVGUFFTeFpRVUZaTzBGQlEyNUNMRTlCUVU5RExHZENRVUZuUWp0QlFVTjJRaXhQUVVGUFF5dzBRa0ZCTkVJN1FVRkRia01zVTBGQlUwTXNiMEpCUVc5Q08wRkJRemRDTEZOQlFWTkRMR1ZCUVdVN1FVRkZlRUlzZDBKQlFYZENReXhaUVVGWk8wRkJRVUZETEV0QlFVRTdRVUZEYkVNc1VVRkJUVHRCUVVGQkxFbEJRMHBETzBGQlFVRkJMRWxCUTBGRE8wRkJRVUZCTEVsQlEwRkRPMEZCUVVGQkxFbEJRMEZETzBGQlFVRkJMRWxCUTBGRE8wRkJRVUZCTEVsQlEwRkRPMEZCUVVGQkxFbEJRMEZETzBGQlFVRkJMRWxCUTBGRE8wRkJRVUZCTEVsQlEwRkRPMEZCUVVGQkxFbEJRMEZETzBGQlFVRkJMRWxCUTBGRE8wRkJRVUZCTEVWQlEwWXNTVUZCU1dRc1lVRkJZVHRCUVVWcVFpeFRRVU5GTEhWQ1FVRkRMRk5CUVVrc1pVRkJXU3h0UWtGRFpqdEJRVUZCTERKQ1FVRkRMR0ZCUVZVc0swSkJRVmc3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVN4WFFVRXdRanRCUVVGQkxFbEJSekZDTEhWQ1FVRkRMREJDUVVGMVFpeHRRa0ZCZUVJN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFTeFhRVUY1UkR0QlFVRkJMRWxCUlhwRU8wRkJRVUVzVFVGQlF6dEJRVUZCTzBGQlFVRXNVVUZEUXl4TlFVRkxPMEZCUVVFc1VVRkRUQ3hQUVVGUFNUdEJRVUZCUVN4UlFVTlFMR0ZCUVZrN1FVRkJRU3hSUVVOYUxGVkJRVlVzUTBGQlExY3NUVUZCVFZZc1lVRkJZVlVzUlVGQlJVTXNUMEZCVDBNc1MwRkJTenRCUVVGQk8wRkJRVUVzVFVGS09VTTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTEVsQlNXZEVPMEZCUVVFc1NVRkZhRVE3UVVGQlFTeE5RVUZETzBGQlFVRTdRVUZCUVN4UlFVTkRMRTFCUVVzN1FVRkJRU3hSUVVOTUxFOUJRVTlZTzBGQlFVRkJMRkZCUTFBc1lVRkJXVHRCUVVGQkxGRkJRMW9zVlVGQlZTeERRVUZEVXl4TlFVRk5VaXhoUVVGaFZ5eFBRVUZQU0N4RlFVRkZReXhQUVVGUFF5eExRVUZMTEVOQlFVTTdRVUZCUVR0QlFVRkJMRTFCU25SRU8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRU3hKUVVsM1JEdEJRVUZCTEVsQlJYaEVPMEZCUVVFc1RVRkJRenRCUVVGQk8wRkJRVUVzVVVGRFF5eE5RVUZMTzBGQlFVRXNVVUZEVEN4UFFVRlBWRHRCUVVGQlFTeFJRVU5RTEdGQlFWazdRVUZCUVN4UlFVTmFMRlZCUVZVc1EwRkJRMDhzVFVGQlRVNHNaVUZCWlZNc1QwRkJUMGdzUlVGQlJVTXNUMEZCVDBNc1MwRkJTeXhEUVVGRE8wRkJRVUU3UVVGQlFTeE5RVXA0UkR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRXNTVUZKTUVRN1FVRkJRU3hKUVVVeFJEdEJRVUZCTEUxQlFVTTdRVUZCUVR0QlFVRkJMRkZCUTBNc1RVRkJTenRCUVVGQkxGRkJRMHdzVDBGQlQwbzdRVUZCUVVFc1VVRkRVQ3hoUVVGWk8wRkJRVUVzVVVGRFdpeFZRVUZWTEVOQlFVTkZMRTFCUVUxRUxHbENRVUZwUWtNc1JVRkJSVU1zVDBGQlQwTXNTMEZCU3p0QlFVRkJPMEZCUVVFc1RVRktiRVE3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQkxFbEJTVzlFTzBGQlFVRXNTVUZGY0VRN1FVRkJRU3hOUVVGRE8wRkJRVUU3UVVGQlFTeFJRVU5ETEdWQlFWazdRVUZCUVN4UlFVTmFMRk5CUVZOUU8wRkJRVUZCTEZGQlExUXNWVUZCVlVNN1FVRkJRVUVzVVVGRlZFRXNlVUpCUVdVc1kwRkJZenRCUVVGQk8wRkJRVUVzVFVGTWFFTTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTEVsQlRVRTdRVUZCUVN4UFFYQkRSanRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTEZOQmNVTkJPMEZCUlVvN1FVRkJRMUlzUjBGMlJIVkNSQ3hYUVVGVE8wRkJRVUVzVlVGaE0wSkdMRmxCUVZrN1FVRkJRVHRCUVVGQmJVSXNTMEZpVFdwQ08wRkJlVVI0UWl4TlFVRk5hMElzV1VGQldYWkNMRTlCUVU5M1FqdEJRVUZCUVR0QlFVRkJRVHRCUVVGQlFUdEJRVUZCUVR0QlFVbDRRa01zVFVGS1MwWTdRVUZCVXl4SlFVRkJSQ3hKUVVGQlJ6dEJRVUZCUXl4aFFVRkJTaXhKUVVGQk8wRkJRVUZKTEdGQlFVRkVMRXRCUVVFaUxDSnVZVzFsY3lJNld5SnpkSGxzWldRaUxDSk5iM1pwWlVsdWNIVjBJaXdpVm1Gc2FXUmhkR2x2YmtWeWNtOXlSR2x6Y0d4aGVTSXNJblZ6WlUxdmRtbGxSbTl5YlNJc0lsTkNkWFIwYjI0aUxDSk5iM1pwWlVadmNtMGlMQ0pmY3lJc0ltMXZkbWxsVG1GdFpTSXNJbk5sZEUxdmRtbGxUbUZ0WlNJc0ltMXZkbWxsV1dWaGNpSXNJbk5sZEUxdmRtbGxXV1ZoY2lJc0ltMXZkbWxsVW1GMGFXNW5JaXdpYzJWMFRXOTJhV1ZTWVhScGJtY2lMQ0pvWVc1a2JHVkJaR1JOYjNacFpTSXNJbTF2ZG1sbFRHOWhaR2x1WnlJc0luWmhiR2xrWVhScGIyNUZjbkp2Y2lJc0ltMXZkbWxsUkdseVpXTjBiM0lpTENKelpYUk5iM1pwWlVScGNtVmpkRzl5SWl3aVpTSXNJblJoY21kbGRDSXNJblpoYkhWbElpd2lUblZ0WW1WeUlpd2lYMk1pTENKVFUzVmlkR2wwYkdVaUxDSm9NaUlzSWw5ak1pSXNJaVJTWldaeVpYTm9VbVZuSkNKZExDSnBaMjV2Y21WTWFYTjBJanBiWFN3aWMyOTFjbU5sY3lJNld5SnRiM1pwWlMxbWIzSnRMblJ6ZUNKZExDSnpiM1Z5WTJWelEyOXVkR1Z1ZENJNld5SnBiWEJ2Y25RZ2MzUjViR1ZrSUdaeWIyMGdKM04wZVd4bFpDMWpiMjF3YjI1bGJuUnpKMXh1YVcxd2IzSjBJRTF2ZG1sbFNXNXdkWFFnWm5KdmJTQW5MaTl0YjNacFpTMXBibkIxZENkY2JtbHRjRzl5ZENCV1lXeHBaR0YwYVc5dVJYSnliM0pFYVhOd2JHRjVJR1p5YjIwZ0owQmpiMjF3YjI1bGJuUnpMM1poYkdsa1lYUnBiMjR0WlhKeWIzSXRaR2x6Y0d4aGVTZGNibWx0Y0c5eWRDQjdJSFZ6WlUxdmRtbGxSbTl5YlNCOUlHWnliMjBnSjBCb2IyOXJjeTkxYzJVdGJXOTJhV1V0Wm05eWJTZGNibWx0Y0c5eWRDQjdJRk5DZFhSMGIyNGdmU0JtY205dElDZEFjM1I1YkdWekwzTjBlV3hsWkMxamIyMXdiMjVsYm5SekoxeHVYRzVsZUhCdmNuUWdaR1ZtWVhWc2RDQm1kVzVqZEdsdmJpQk5iM1pwWlVadmNtMG9LU0I3WEc0Z0lHTnZibk4wSUh0Y2JpQWdJQ0J0YjNacFpVNWhiV1VzWEc0Z0lDQWdjMlYwVFc5MmFXVk9ZVzFsTEZ4dUlDQWdJRzF2ZG1sbFdXVmhjaXhjYmlBZ0lDQnpaWFJOYjNacFpWbGxZWElzWEc0Z0lDQWdiVzkyYVdWU1lYUnBibWNzWEc0Z0lDQWdjMlYwVFc5MmFXVlNZWFJwYm1jc1hHNGdJQ0FnYUdGdVpHeGxRV1JrVFc5MmFXVXNYRzRnSUNBZ2JXOTJhV1ZNYjJGa2FXNW5MRnh1SUNBZ0lIWmhiR2xrWVhScGIyNUZjbkp2Y2l4Y2JpQWdJQ0J0YjNacFpVUnBjbVZqZEc5eUxGeHVJQ0FnSUhObGRFMXZkbWxsUkdseVpXTjBiM0pjYmlBZ2ZTQTlJSFZ6WlUxdmRtbGxSbTl5YlNncFhHNWNiaUFnY21WMGRYSnVJQ2hjYmlBZ0lDQThaR2wySUdSaGRHRXRkR1Z6ZEdsa1BWd2liVzkyYVdVdFptOXliUzFqYjIxd1hDSStYRzRnSUNBZ0lDQThVMU4xWW5ScGRHeGxQa0ZrWkNCaElFNWxkeUJOYjNacFpUd3ZVMU4xWW5ScGRHeGxQbHh1WEc0Z0lDQWdJQ0I3THlvZ1dtOWtJR3RsZVNCbVpXRjBkWEpsSURRNklIVnpaU0IwYUdVZ2RtRnNhV1JoZEdsdmJpQnpkR0YwWlNCaGRDQjBhR1VnWTI5dGNHOXVaVzUwSUNBcUwzMWNiaUFnSUNBZ0lEeFdZV3hwWkdGMGFXOXVSWEp5YjNKRWFYTndiR0Y1SUhaaGJHbGtZWFJwYjI1RmNuSnZjajE3ZG1Gc2FXUmhkR2x2YmtWeWNtOXlmU0F2UGx4dVhHNGdJQ0FnSUNBOFRXOTJhV1ZKYm5CMWRGeHVJQ0FnSUNBZ0lDQjBlWEJsUFZ3aWRHVjRkRndpWEc0Z0lDQWdJQ0FnSUhaaGJIVmxQWHR0YjNacFpVNWhiV1Y5WEc0Z0lDQWdJQ0FnSUhCc1lXTmxhRzlzWkdWeVBWd2lUVzkyYVdVZ2JtRnRaVndpWEc0Z0lDQWdJQ0FnSUc5dVEyaGhibWRsUFhzb1pTa2dQVDRnYzJWMFRXOTJhV1ZPWVcxbEtHVXVkR0Z5WjJWMExuWmhiSFZsS1gxY2JpQWdJQ0FnSUM4K1hHNGdJQ0FnSUNBOFRXOTJhV1ZKYm5CMWRGeHVJQ0FnSUNBZ0lDQjBlWEJsUFZ3aWJuVnRZbVZ5WENKY2JpQWdJQ0FnSUNBZ2RtRnNkV1U5ZTIxdmRtbGxXV1ZoY24xY2JpQWdJQ0FnSUNBZ2NHeGhZMlZvYjJ4a1pYSTlYQ0pOYjNacFpTQjVaV0Z5WENKY2JpQWdJQ0FnSUNBZ2IyNURhR0Z1WjJVOWV5aGxLU0E5UGlCelpYUk5iM1pwWlZsbFlYSW9UblZ0WW1WeUtHVXVkR0Z5WjJWMExuWmhiSFZsS1NsOVhHNGdJQ0FnSUNBdlBseHVJQ0FnSUNBZ1BFMXZkbWxsU1c1d2RYUmNiaUFnSUNBZ0lDQWdkSGx3WlQxY0ltNTFiV0psY2x3aVhHNGdJQ0FnSUNBZ0lIWmhiSFZsUFh0dGIzWnBaVkpoZEdsdVozMWNiaUFnSUNBZ0lDQWdjR3hoWTJWb2IyeGtaWEk5WENKTmIzWnBaU0J5WVhScGJtZGNJbHh1SUNBZ0lDQWdJQ0J2YmtOb1lXNW5aVDE3S0dVcElEMCtJSE5sZEUxdmRtbGxVbUYwYVc1bktFNTFiV0psY2lobExuUmhjbWRsZEM1MllXeDFaU2twZlZ4dUlDQWdJQ0FnTHo1Y2JpQWdJQ0FnSUR4TmIzWnBaVWx1Y0hWMFhHNGdJQ0FnSUNBZ0lIUjVjR1U5WENKMFpYaDBYQ0pjYmlBZ0lDQWdJQ0FnZG1Gc2RXVTllMjF2ZG1sbFJHbHlaV04wYjNKOVhHNGdJQ0FnSUNBZ0lIQnNZV05sYUc5c1pHVnlQVndpVFc5MmFXVWdaR2x5WldOMGIzSmNJbHh1SUNBZ0lDQWdJQ0J2YmtOb1lXNW5aVDE3S0dVcElEMCtJSE5sZEUxdmRtbGxSR2x5WldOMGIzSW9aUzUwWVhKblpYUXVkbUZzZFdVcGZWeHVJQ0FnSUNBZ0x6NWNiaUFnSUNBZ0lEeFRRblYwZEc5dVhHNGdJQ0FnSUNBZ0lHUmhkR0V0ZEdWemRHbGtQVndpWVdSa0xXMXZkbWxsTFdKMWRIUnZibHdpWEc0Z0lDQWdJQ0FnSUc5dVEyeHBZMnM5ZTJoaGJtUnNaVUZrWkUxdmRtbGxmVnh1SUNBZ0lDQWdJQ0JrYVhOaFlteGxaRDE3Ylc5MmFXVk1iMkZrYVc1bmZWeHVJQ0FnSUNBZ1BseHVJQ0FnSUNBZ0lDQjdiVzkyYVdWTWIyRmthVzVuSUQ4Z0owRmtaR2x1Wnk0dUxpY2dPaUFuUVdSa0lFMXZkbWxsSjMxY2JpQWdJQ0FnSUR3dlUwSjFkSFJ2Ymo1Y2JpQWdJQ0E4TDJScGRqNWNiaUFnS1Z4dWZWeHVYRzVqYjI1emRDQlRVM1ZpZEdsMGJHVWdQU0J6ZEhsc1pXUXVhREpnWEc0Z0lHTnZiRzl5T2lBak16TXpPMXh1SUNCbWIyNTBMWE5wZW1VNklESnlaVzA3WEc0Z0lHMWhjbWRwYmkxaWIzUjBiMjA2SURFd2NIZzdYRzVnWEc0aVhTd2labWxzWlNJNklpOVZjMlZ5Y3k5dGRYSmhkQzV2ZW1OaGJpOXpaVzl1TDNCc1lYbDNjbWxuYUhRdGRYUnBiSE12YzJGdGNHeGxMV0Z3Y0M5bWNtOXVkR1Z1WkM5emNtTXZZMjl0Y0c5dVpXNTBjeTl0YjNacFpTMW1iM0p0TDIxdmRtbGxMV1p2Y20wdWRITjRJbjA9",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 11163
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 10,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.613Z",
        "time": 10,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/components/movie-form/movie-input.tsx",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/components/movie-form/index.ts"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"96c-KA39+QerzM03Vapr39KGCMLofDE\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "3999"
            }
          ],
          "content": {
            "size": 3999,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsgY3JlYXRlSG90Q29udGV4dCBhcyBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQgfSBmcm9tICIvQHZpdGUvY2xpZW50IjtpbXBvcnQubWV0YS5ob3QgPSBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQoIi9zcmMvY29tcG9uZW50cy9tb3ZpZS1mb3JtL21vdmllLWlucHV0LnRzeCIpO2ltcG9ydCBfX3ZpdGVfX2Nqc0ltcG9ydDBfcmVhY3RfanN4RGV2UnVudGltZSBmcm9tICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvcmVhY3RfanN4LWRldi1ydW50aW1lLmpzP3Y9MGJiNjlkNzMiOyBjb25zdCBqc3hERVYgPSBfX3ZpdGVfX2Nqc0ltcG9ydDBfcmVhY3RfanN4RGV2UnVudGltZVsianN4REVWIl07CmltcG9ydCAqIGFzIFJlZnJlc2hSdW50aW1lIGZyb20gIi9AcmVhY3QtcmVmcmVzaCI7CmNvbnN0IGluV2ViV29ya2VyID0gdHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlICE9PSAidW5kZWZpbmVkIiAmJiBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGU7CmxldCBwcmV2UmVmcmVzaFJlZzsKbGV0IHByZXZSZWZyZXNoU2lnOwppZiAoaW1wb3J0Lm1ldGEuaG90ICYmICFpbldlYldvcmtlcikgewogIGlmICghd2luZG93LiRSZWZyZXNoUmVnJCkgewogICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAiQHZpdGVqcy9wbHVnaW4tcmVhY3QgY2FuJ3QgZGV0ZWN0IHByZWFtYmxlLiBTb21ldGhpbmcgaXMgd3JvbmcuIgogICAgKTsKICB9CiAgcHJldlJlZnJlc2hSZWcgPSB3aW5kb3cuJFJlZnJlc2hSZWckOwogIHByZXZSZWZyZXNoU2lnID0gd2luZG93LiRSZWZyZXNoU2lnJDsKICB3aW5kb3cuJFJlZnJlc2hSZWckID0gUmVmcmVzaFJ1bnRpbWUuZ2V0UmVmcmVzaFJlZygiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWZvcm0vbW92aWUtaW5wdXQudHN4Iik7CiAgd2luZG93LiRSZWZyZXNoU2lnJCA9IFJlZnJlc2hSdW50aW1lLmNyZWF0ZVNpZ25hdHVyZUZ1bmN0aW9uRm9yVHJhbnNmb3JtOwp9CmltcG9ydCB7IFNJbnB1dCB9IGZyb20gIi9zcmMvc3R5bGVzL3N0eWxlZC1jb21wb25lbnRzLnRzIjsKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTW92aWVJbnB1dCh7CiAgdHlwZSwKICB2YWx1ZSwKICBvbkNoYW5nZSwKICBwbGFjZWhvbGRlcgp9KSB7CiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoCiAgICBTSW5wdXQsCiAgICB7CiAgICAgICJkYXRhLXRlc3RpZCI6IGBtb3ZpZS1pbnB1dC1jb21wLSR7dHlwZX1gLAogICAgICB0eXBlLAogICAgICB2YWx1ZSwKICAgICAgb25DaGFuZ2UsCiAgICAgIHBsYWNlaG9sZGVyCiAgICB9LAogICAgdm9pZCAwLAogICAgZmFsc2UsCiAgICB7CiAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWZvcm0vbW92aWUtaW5wdXQudHN4IiwKICAgICAgbGluZU51bWJlcjogMzYsCiAgICAgIGNvbHVtbk51bWJlcjogNQogICAgfSwKICAgIHRoaXMKICApOwp9Cl9jID0gTW92aWVJbnB1dDsKdmFyIF9jOwokUmVmcmVzaFJlZyQoX2MsICJNb3ZpZUlucHV0Iik7CmlmIChpbXBvcnQubWV0YS5ob3QgJiYgIWluV2ViV29ya2VyKSB7CiAgd2luZG93LiRSZWZyZXNoUmVnJCA9IHByZXZSZWZyZXNoUmVnOwogIHdpbmRvdy4kUmVmcmVzaFNpZyQgPSBwcmV2UmVmcmVzaFNpZzsKfQppZiAoaW1wb3J0Lm1ldGEuaG90ICYmICFpbldlYldvcmtlcikgewogIFJlZnJlc2hSdW50aW1lLl9faG1yX2ltcG9ydChpbXBvcnQubWV0YS51cmwpLnRoZW4oKGN1cnJlbnRFeHBvcnRzKSA9PiB7CiAgICBSZWZyZXNoUnVudGltZS5yZWdpc3RlckV4cG9ydHNGb3JSZWFjdFJlZnJlc2goIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9tb3ZpZS1mb3JtL21vdmllLWlucHV0LnRzeCIsIGN1cnJlbnRFeHBvcnRzKTsKICAgIGltcG9ydC5tZXRhLmhvdC5hY2NlcHQoKG5leHRFeHBvcnRzKSA9PiB7CiAgICAgIGlmICghbmV4dEV4cG9ydHMpIHJldHVybjsKICAgICAgY29uc3QgaW52YWxpZGF0ZU1lc3NhZ2UgPSBSZWZyZXNoUnVudGltZS52YWxpZGF0ZVJlZnJlc2hCb3VuZGFyeUFuZEVucXVldWVVcGRhdGUoIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9tb3ZpZS1mb3JtL21vdmllLWlucHV0LnRzeCIsIGN1cnJlbnRFeHBvcnRzLCBuZXh0RXhwb3J0cyk7CiAgICAgIGlmIChpbnZhbGlkYXRlTWVzc2FnZSkgaW1wb3J0Lm1ldGEuaG90LmludmFsaWRhdGUoaW52YWxpZGF0ZU1lc3NhZ2UpOwogICAgfSk7CiAgfSk7Cn0KCi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnRZWEJ3YVc1bmN5STZJa0ZCWjBKSk96czdPenM3T3pzN096czdPenM3TzBGQmFFSktMRk5CUVZOQkxHTkJRV003UVVGVGRrSXNkMEpCUVhkQ1F5eFhRVUZYTzBGQlFVRXNSVUZEYWtORE8wRkJRVUZCTEVWQlEwRkRPMEZCUVVGQkxFVkJRMEZETzBGQlFVRkJMRVZCUTBGRE8wRkJRMlVzUjBGQlJ6dEJRVU5zUWl4VFFVTkZPMEZCUVVFc1NVRkJRenRCUVVGQk8wRkJRVUVzVFVGRFF5eGxRVUZoTEc5Q1FVRnZRa2dzU1VGQlNUdEJRVUZCTEUxQlEzSkRPMEZCUVVFc1RVRkRRVHRCUVVGQkxFMUJRMEU3UVVGQlFTeE5RVU5CTzBGQlFVRTdRVUZCUVN4SlFVeEdPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVN4RlFVc3lRanRCUVVjdlFqdEJRVUZEU1N4TFFXWjFRa3c3UVVGQlZTeEpRVUZCU3p0QlFVRkJReXhoUVVGQlJDeEpRVUZCSWl3aWJtRnRaWE1pT2xzaVUwbHVjSFYwSWl3aVRXOTJhV1ZKYm5CMWRDSXNJblI1Y0dVaUxDSjJZV3gxWlNJc0ltOXVRMmhoYm1kbElpd2ljR3hoWTJWb2IyeGtaWElpTENKZll5SXNJaVJTWldaeVpYTm9VbVZuSkNKZExDSnBaMjV2Y21WTWFYTjBJanBiWFN3aWMyOTFjbU5sY3lJNld5SnRiM1pwWlMxcGJuQjFkQzUwYzNnaVhTd2ljMjkxY21ObGMwTnZiblJsYm5RaU9sc2lhVzF3YjNKMElIc2dVMGx1Y0hWMElIMGdabkp2YlNBblFITjBlV3hsY3k5emRIbHNaV1F0WTI5dGNHOXVaVzUwY3lkY2JseHVkSGx3WlNCTmIzWnBaVWx1Y0hWMFVISnZjSE1nUFNCU1pXRmtiMjVzZVR4N1hHNGdJSFI1Y0dVNklDZDBaWGgwSnlCOElDZHVkVzFpWlhJblhHNGdJSFpoYkhWbE9pQnpkSEpwYm1jZ2ZDQnVkVzFpWlhKY2JpQWdiMjVEYUdGdVoyVTZJQ2hsZG1WdWREb2dVbVZoWTNRdVEyaGhibWRsUlhabGJuUThTRlJOVEVsdWNIVjBSV3hsYldWdWRENHBJRDArSUhadmFXUmNiaUFnY0d4aFkyVm9iMnhrWlhJNklITjBjbWx1WjF4dWZUNWNibHh1Wlhod2IzSjBJR1JsWm1GMWJIUWdablZ1WTNScGIyNGdUVzkyYVdWSmJuQjFkQ2g3WEc0Z0lIUjVjR1VzWEc0Z0lIWmhiSFZsTEZ4dUlDQnZia05vWVc1blpTeGNiaUFnY0d4aFkyVm9iMnhrWlhKY2JuMDZJRTF2ZG1sbFNXNXdkWFJRY205d2N5a2dlMXh1SUNCeVpYUjFjbTRnS0Z4dUlDQWdJRHhUU1c1d2RYUmNiaUFnSUNBZ0lHUmhkR0V0ZEdWemRHbGtQWHRnYlc5MmFXVXRhVzV3ZFhRdFkyOXRjQzBrZTNSNWNHVjlZSDFjYmlBZ0lDQWdJSFI1Y0dVOWUzUjVjR1Y5WEc0Z0lDQWdJQ0IyWVd4MVpUMTdkbUZzZFdWOVhHNGdJQ0FnSUNCdmJrTm9ZVzVuWlQxN2IyNURhR0Z1WjJWOVhHNGdJQ0FnSUNCd2JHRmpaV2h2YkdSbGNqMTdjR3hoWTJWb2IyeGtaWEo5WEc0Z0lDQWdMejVjYmlBZ0tWeHVmVnh1SWwwc0ltWnBiR1VpT2lJdlZYTmxjbk12YlhWeVlYUXViM3BqWVc0dmMyVnZiaTl3YkdGNWQzSnBaMmgwTFhWMGFXeHpMM05oYlhCc1pTMWhjSEF2Wm5KdmJuUmxibVF2YzNKakwyTnZiWEJ2Ym1WdWRITXZiVzkyYVdVdFptOXliUzl0YjNacFpTMXBibkIxZEM1MGMzZ2lmUT09",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 3999
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 10,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.618Z",
        "time": 7,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/components/movie-item/index.ts",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/components/movie-list.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"b6-ZXq6TiKhoTIh5d5hPZQlacsVORk\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "581"
            }
          ],
          "content": {
            "size": 581,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IE1vdmllSXRlbSBmcm9tICIvc3JjL2NvbXBvbmVudHMvbW92aWUtaXRlbS9tb3ZpZS1pdGVtLnRzeCI7CmltcG9ydCBNb3ZpZUluZm8gZnJvbSAiL3NyYy9jb21wb25lbnRzL21vdmllLWl0ZW0vbW92aWUtaW5mby50c3giOwpleHBvcnQgeyBNb3ZpZUluZm8gfTsKZXhwb3J0IGRlZmF1bHQgTW92aWVJdGVtOwoKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYkltbHVaR1Y0TG5SeklsMHNJbk52ZFhKalpYTkRiMjUwWlc1MElqcGJJbWx0Y0c5eWRDQk5iM1pwWlVsMFpXMGdabkp2YlNBbkxpOXRiM1pwWlMxcGRHVnRKMXh1YVcxd2IzSjBJRTF2ZG1sbFNXNW1ieUJtY205dElDY3VMMjF2ZG1sbExXbHVabThuWEc1Y2JtVjRjRzl5ZENCN0lFMXZkbWxsU1c1bWJ5QjlYRzVsZUhCdmNuUWdaR1ZtWVhWc2RDQk5iM1pwWlVsMFpXMWNiaUpkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzVDBGQlR5eGxRVUZsTzBGQlEzUkNMRTlCUVU4c1pVRkJaVHRCUVVWMFFpeFRRVUZUTzBGQlExUXNaVUZCWlRzaUxDSnVZVzFsY3lJNlcxMTk=",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 581
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 7,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.617Z",
        "time": 8,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/components/movie-details/movie-details.tsx",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/components/movie-details/index.ts"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"14a9-irr6DHOmSgkjNxRJemY0gZeImek\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "9892"
            }
          ],
          "content": {
            "size": 9892,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsgY3JlYXRlSG90Q29udGV4dCBhcyBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQgfSBmcm9tICIvQHZpdGUvY2xpZW50IjtpbXBvcnQubWV0YS5ob3QgPSBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQoIi9zcmMvY29tcG9uZW50cy9tb3ZpZS1kZXRhaWxzL21vdmllLWRldGFpbHMudHN4Iik7aW1wb3J0IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdF9qc3hEZXZSdW50aW1lIGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9yZWFjdF9qc3gtZGV2LXJ1bnRpbWUuanM/dj0wYmI2OWQ3MyI7IGNvbnN0IGpzeERFViA9IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdF9qc3hEZXZSdW50aW1lWyJqc3hERVYiXTsKaW1wb3J0ICogYXMgUmVmcmVzaFJ1bnRpbWUgZnJvbSAiL0ByZWFjdC1yZWZyZXNoIjsKY29uc3QgaW5XZWJXb3JrZXIgPSB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICJ1bmRlZmluZWQiICYmIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZTsKbGV0IHByZXZSZWZyZXNoUmVnOwpsZXQgcHJldlJlZnJlc2hTaWc7CmlmIChpbXBvcnQubWV0YS5ob3QgJiYgIWluV2ViV29ya2VyKSB7CiAgaWYgKCF3aW5kb3cuJFJlZnJlc2hSZWckKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICJAdml0ZWpzL3BsdWdpbi1yZWFjdCBjYW4ndCBkZXRlY3QgcHJlYW1ibGUuIFNvbWV0aGluZyBpcyB3cm9uZy4iCiAgICApOwogIH0KICBwcmV2UmVmcmVzaFJlZyA9IHdpbmRvdy4kUmVmcmVzaFJlZyQ7CiAgcHJldlJlZnJlc2hTaWcgPSB3aW5kb3cuJFJlZnJlc2hTaWckOwogIHdpbmRvdy4kUmVmcmVzaFJlZyQgPSBSZWZyZXNoUnVudGltZS5nZXRSZWZyZXNoUmVnKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtZGV0YWlscy9tb3ZpZS1kZXRhaWxzLnRzeCIpOwogIHdpbmRvdy4kUmVmcmVzaFNpZyQgPSBSZWZyZXNoUnVudGltZS5jcmVhdGVTaWduYXR1cmVGdW5jdGlvbkZvclRyYW5zZm9ybTsKfQp2YXIgX3MgPSAkUmVmcmVzaFNpZyQoKTsKaW1wb3J0IExvYWRpbmdNZXNzYWdlIGZyb20gIi9zcmMvY29tcG9uZW50cy9sb2FkaW5nLW1lc3NhZ2UudHN4IjsKaW1wb3J0IHsgU0J1dHRvbiwgU1RpdGxlIH0gZnJvbSAiL3NyYy9zdHlsZXMvc3R5bGVkLWNvbXBvbmVudHMudHMiOwppbXBvcnQgc3R5bGVkIGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9zdHlsZWQtY29tcG9uZW50cy5qcz92PTBiYjY5ZDczIjsKaW1wb3J0IE1vdmllTWFuYWdlciBmcm9tICIvc3JjL2NvbXBvbmVudHMvbW92aWUtZGV0YWlscy9tb3ZpZS1tYW5hZ2VyLnRzeCI7CmltcG9ydCB7IHVzZU1vdmllRGV0YWlscyB9IGZyb20gIi9zcmMvaG9va3MvdXNlLW1vdmllLWRldGFpbC50cyI7CmltcG9ydCB7IHVzZURlbGV0ZU1vdmllIH0gZnJvbSAiL3NyYy9ob29rcy91c2UtbW92aWVzLnRzIjsKaW1wb3J0IHsgdXNlTmF2aWdhdGUgfSBmcm9tICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvcmVhY3Qtcm91dGVyLWRvbS5qcz92PTBiYjY5ZDczIjsKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTW92aWVEZXRhaWxzKCkgewogIF9zKCk7CiAgY29uc3QgeyBkYXRhLCBpc0xvYWRpbmcsIGhhc0lkZW50aWZpZXIgfSA9IHVzZU1vdmllRGV0YWlscygpOwogIGNvbnN0IGRlbGV0ZU1vdmllTXV0YXRpb24gPSB1c2VEZWxldGVNb3ZpZSgpOwogIGNvbnN0IG5hdmlnYXRlID0gdXNlTmF2aWdhdGUoKTsKICBjb25zdCBoYW5kbGVEZWxldGVNb3ZpZSA9IChpZCkgPT4gZGVsZXRlTW92aWVNdXRhdGlvbi5tdXRhdGUoaWQsIHsKICAgIG9uU3VjY2VzczogKCkgPT4gbmF2aWdhdGUoIi9tb3ZpZXMiKQogICAgLy8gUmVkaXJlY3QgdG8gL21vdmllcyBhZnRlciBkZWxldGUgc3VjY2VzcwogIH0pOwogIGlmICghaGFzSWRlbnRpZmllcikgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoInAiLCB7IGNoaWxkcmVuOiAiTm8gbW92aWUgc2VsZWN0ZWQiIH0sIHZvaWQgMCwgZmFsc2UsIHsKICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWRldGFpbHMvbW92aWUtZGV0YWlscy50c3giLAogICAgbGluZU51bWJlcjogNDAsCiAgICBjb2x1bW5OdW1iZXI6IDMwCiAgfSwgdGhpcyk7CiAgaWYgKGlzTG9hZGluZykgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoTG9hZGluZ01lc3NhZ2UsIHt9LCB2b2lkIDAsIGZhbHNlLCB7CiAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9tb3ZpZS1kZXRhaWxzL21vdmllLWRldGFpbHMudHN4IiwKICAgIGxpbmVOdW1iZXI6IDQxLAogICAgY29sdW1uTnVtYmVyOiAyNQogIH0sIHRoaXMpOwogIGNvbnN0IG1vdmllRGF0YSA9IGRhdGEuZGF0YTsKICBjb25zdCBtb3ZpZUVycm9yID0gZGF0YS5lcnJvcj8uZXJyb3I7CiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoU01vdmllRGV0YWlscywgeyAiZGF0YS10ZXN0aWQiOiAibW92aWUtZGV0YWlscy1jb21wIiwgY2hpbGRyZW46IFsKICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoU1RpdGxlLCB7IGNoaWxkcmVuOiAiTW92aWUgRGV0YWlscyIgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9tb3ZpZS1kZXRhaWxzL21vdmllLWRldGFpbHMudHN4IiwKICAgICAgbGluZU51bWJlcjogNDgsCiAgICAgIGNvbHVtbk51bWJlcjogNwogICAgfSwgdGhpcyksCiAgICBtb3ZpZURhdGEgJiYgIm5hbWUiIGluIG1vdmllRGF0YSA/IC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoTW92aWVNYW5hZ2VyLCB7IG1vdmllOiBtb3ZpZURhdGEsIG9uRGVsZXRlOiBoYW5kbGVEZWxldGVNb3ZpZSB9LCB2b2lkIDAsIGZhbHNlLCB7CiAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWRldGFpbHMvbW92aWUtZGV0YWlscy50c3giLAogICAgICBsaW5lTnVtYmVyOiA1MSwKICAgICAgY29sdW1uTnVtYmVyOiA3CiAgICB9LCB0aGlzKSA6IC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoInAiLCB7IGNoaWxkcmVuOiBtb3ZpZUVycm9yIHx8ICJVbmV4cGVjdGVkIGVycm9yIG9jY3VycmVkIiB9LCB2b2lkIDAsIGZhbHNlLCB7CiAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWRldGFpbHMvbW92aWUtZGV0YWlscy50c3giLAogICAgICBsaW5lTnVtYmVyOiA1MywKICAgICAgY29sdW1uTnVtYmVyOiA3CiAgICB9LCB0aGlzKSwKICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoU0J1dHRvbiwgeyBvbkNsaWNrOiAoKSA9PiBuYXZpZ2F0ZSgtMSksICJkYXRhLXRlc3RpZCI6ICJiYWNrIiwgY2hpbGRyZW46ICJCYWNrIiB9LCB2b2lkIDAsIGZhbHNlLCB7CiAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWRldGFpbHMvbW92aWUtZGV0YWlscy50c3giLAogICAgICBsaW5lTnVtYmVyOiA1NiwKICAgICAgY29sdW1uTnVtYmVyOiA3CiAgICB9LCB0aGlzKQogIF0gfSwgdm9pZCAwLCB0cnVlLCB7CiAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9tb3ZpZS1kZXRhaWxzL21vdmllLWRldGFpbHMudHN4IiwKICAgIGxpbmVOdW1iZXI6IDQ3LAogICAgY29sdW1uTnVtYmVyOiA1CiAgfSwgdGhpcyk7Cn0KX3MoTW92aWVEZXRhaWxzLCAibXcvdzJ0bUFsT0VIMWtTQWozc1I3aVp5SkhnPSIsIGZhbHNlLCBmdW5jdGlvbigpIHsKICByZXR1cm4gW3VzZU1vdmllRGV0YWlscywgdXNlRGVsZXRlTW92aWUsIHVzZU5hdmlnYXRlXTsKfSk7Cl9jID0gTW92aWVEZXRhaWxzOwpjb25zdCBTTW92aWVEZXRhaWxzID0gc3R5bGVkLmRpdmAKICBtYXgtd2lkdGg6IDYwMHB4OwogIG1hcmdpbjogMCBhdXRvOwogIHBhZGRpbmc6IDIwcHg7CiAgYmFja2dyb3VuZC1jb2xvcjogI2Y5ZjlmOTsKICBib3JkZXItcmFkaXVzOiA4cHg7CiAgYm94LXNoYWRvdzogMCA0cHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMSk7CmA7Cl9jMiA9IFNNb3ZpZURldGFpbHM7CnZhciBfYywgX2MyOwokUmVmcmVzaFJlZyQoX2MsICJNb3ZpZURldGFpbHMiKTsKJFJlZnJlc2hSZWckKF9jMiwgIlNNb3ZpZURldGFpbHMiKTsKaWYgKGltcG9ydC5tZXRhLmhvdCAmJiAhaW5XZWJXb3JrZXIpIHsKICB3aW5kb3cuJFJlZnJlc2hSZWckID0gcHJldlJlZnJlc2hSZWc7CiAgd2luZG93LiRSZWZyZXNoU2lnJCA9IHByZXZSZWZyZXNoU2lnOwp9CmlmIChpbXBvcnQubWV0YS5ob3QgJiYgIWluV2ViV29ya2VyKSB7CiAgUmVmcmVzaFJ1bnRpbWUuX19obXJfaW1wb3J0KGltcG9ydC5tZXRhLnVybCkudGhlbigoY3VycmVudEV4cG9ydHMpID0+IHsKICAgIFJlZnJlc2hSdW50aW1lLnJlZ2lzdGVyRXhwb3J0c0ZvclJlYWN0UmVmcmVzaCgiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWRldGFpbHMvbW92aWUtZGV0YWlscy50c3giLCBjdXJyZW50RXhwb3J0cyk7CiAgICBpbXBvcnQubWV0YS5ob3QuYWNjZXB0KChuZXh0RXhwb3J0cykgPT4gewogICAgICBpZiAoIW5leHRFeHBvcnRzKSByZXR1cm47CiAgICAgIGNvbnN0IGludmFsaWRhdGVNZXNzYWdlID0gUmVmcmVzaFJ1bnRpbWUudmFsaWRhdGVSZWZyZXNoQm91bmRhcnlBbmRFbnF1ZXVlVXBkYXRlKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtZGV0YWlscy9tb3ZpZS1kZXRhaWxzLnRzeCIsIGN1cnJlbnRFeHBvcnRzLCBuZXh0RXhwb3J0cyk7CiAgICAgIGlmIChpbnZhbGlkYXRlTWVzc2FnZSkgaW1wb3J0Lm1ldGEuaG90LmludmFsaWRhdGUoaW52YWxpZGF0ZU1lc3NhZ2UpOwogICAgfSk7CiAgfSk7Cn0KCi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnRZWEJ3YVc1bmN5STZJa0ZCYjBJMlFqczdPenM3T3pzN096czdPenM3T3pzN1FVRndRamRDTEU5QlFVOUJMRzlDUVVGdlFqdEJRVU16UWl4VFFVRlRReXhUUVVGVFF5eGpRVUZqTzBGQlEyaERMRTlCUVU5RExGbEJRVms3UVVGRGJrSXNUMEZCVDBNc2EwSkJRV3RDTzBGQlEzcENMRk5CUVZORExIVkNRVUYxUWp0QlFVTm9ReXhUUVVGVFF5eHpRa0ZCYzBJN1FVRkRMMElzVTBGQlUwTXNiVUpCUVcxQ08wRkJTVFZDTEhkQ1FVRjNRa01zWlVGQlpUdEJRVUZCUXl4TFFVRkJPMEZCUTNKRExGRkJRVTBzUlVGQlJVTXNUVUZCVFVNc1YwRkJWME1zWTBGQll5eEpRVUZKVUN4blFrRkJaMEk3UVVGRE0wUXNVVUZCVFZFc2MwSkJRWE5DVUN4bFFVRmxPMEZCUXpORExGRkJRVTFSTEZkQlFWZFFMRmxCUVZrN1FVRkZOMElzVVVGQlRWRXNiMEpCUVc5Q1FTeERRVUZEUXl4UFFVTjZRa2dzYjBKQlFXOUNTU3hQUVVGUFJDeEpRVUZKTzBGQlFVRXNTVUZETjBKRkxGZEJRVmRCTEUxQlFVMUtMRk5CUVZNc1UwRkJVenRCUVVGQk8wRkJRVUVzUlVGRGNrTXNRMEZCUXp0QlFVVklMRTFCUVVrc1EwRkJRMFlzWTBGQlpTeFJRVUZQTEhWQ1FVRkRMRTlCUVVVc2FVTkJRVWc3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVN4VFFVRnZRanRCUVVNdlF5eE5RVUZKUkN4VlFVRlhMRkZCUVU4c2RVSkJRVU1zYjBKQlFVUTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRU3hUUVVGbE8wRkJSWEpETEZGQlFVMVJMRmxCUVdGVUxFdEJRVzlEUVR0QlFVTjJSQ3hSUVVGTlZTeGhRVUZqVml4TFFVRTJRMWNzVDBGQlQwRTdRVUZGZUVVc1UwRkRSU3gxUWtGQlF5eHBRa0ZCWXl4bFFVRlpMSE5DUVVONlFqdEJRVUZCTERKQ1FVRkRMRlZCUVU4c05rSkJRVkk3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVN4WFFVRnhRanRCUVVGQkxFbEJSWEJDUml4aFFVRmhMRlZCUVZWQkxGbEJRM1JDTEhWQ1FVRkRMR2RDUVVGaExFOUJRVTlCTEZkQlFWY3NWVUZCVlVvc2NVSkJRVEZETzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFc1YwRkJORVFzU1VGRk5VUXNkVUpCUVVNc1QwRkJSMHNzZDBKQlFXTXNLMEpCUVd4Q08wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRXNWMEZCT0VNN1FVRkJRU3hKUVVkb1JDeDFRa0ZCUXl4WFFVRlJMRk5CUVZNc1RVRkJUVTRzVTBGQlV5eEZRVUZGTEVkQlFVY3NaVUZCV1N4UlFVRk5MRzlDUVVGNFJEdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJMRmRCUlVFN1FVRkJRU3hQUVZoR08wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRXNVMEZaUVR0QlFVVktPMEZCUVVOTUxFZEJMMEoxUWtRc1kwRkJXVHRCUVVGQkxGVkJRMU5JTEdsQ1FVTm1ReXhuUWtGRFdFTXNWMEZCVnp0QlFVRkJPMEZCUVVGbExFdEJTRTVrTzBGQmFVTjRRaXhOUVVGTlpTeG5Ra0ZCWjBKd1FpeFBRVUZQY1VJN1FVRkJRVUU3UVVGQlFVRTdRVUZCUVVFN1FVRkJRVUU3UVVGQlFVRTdRVUZCUVVFN1FVRkJRVUU3UVVGUE5VSkRMRTFCVUV0R08wRkJRV0VzU1VGQlFVUXNTVUZCUVVjN1FVRkJRVU1zWVVGQlFVb3NTVUZCUVR0QlFVRkJTU3hoUVVGQlJDeExRVUZCSWl3aWJtRnRaWE1pT2xzaVRHOWhaR2x1WjAxbGMzTmhaMlVpTENKVFFuVjBkRzl1SWl3aVUxUnBkR3hsSWl3aWMzUjViR1ZrSWl3aVRXOTJhV1ZOWVc1aFoyVnlJaXdpZFhObFRXOTJhV1ZFWlhSaGFXeHpJaXdpZFhObFJHVnNaWFJsVFc5MmFXVWlMQ0oxYzJWT1lYWnBaMkYwWlNJc0lrMXZkbWxsUkdWMFlXbHNjeUlzSWw5eklpd2laR0YwWVNJc0ltbHpURzloWkdsdVp5SXNJbWhoYzBsa1pXNTBhV1pwWlhJaUxDSmtaV3hsZEdWTmIzWnBaVTExZEdGMGFXOXVJaXdpYm1GMmFXZGhkR1VpTENKb1lXNWtiR1ZFWld4bGRHVk5iM1pwWlNJc0ltbGtJaXdpYlhWMFlYUmxJaXdpYjI1VGRXTmpaWE56SWl3aWJXOTJhV1ZFWVhSaElpd2liVzkyYVdWRmNuSnZjaUlzSW1WeWNtOXlJaXdpWDJNaUxDSlRUVzkyYVdWRVpYUmhhV3h6SWl3aVpHbDJJaXdpWDJNeUlpd2lKRkpsWm5KbGMyaFNaV2NrSWwwc0ltbG5ibTl5WlV4cGMzUWlPbHRkTENKemIzVnlZMlZ6SWpwYkltMXZkbWxsTFdSbGRHRnBiSE11ZEhONElsMHNJbk52ZFhKalpYTkRiMjUwWlc1MElqcGJJbWx0Y0c5eWRDQk1iMkZrYVc1blRXVnpjMkZuWlNCbWNtOXRJQ2RBWTI5dGNHOXVaVzUwY3k5c2IyRmthVzVuTFcxbGMzTmhaMlVuWEc1cGJYQnZjblFnZXlCVFFuVjBkRzl1TENCVFZHbDBiR1VnZlNCbWNtOXRJQ2RBYzNSNWJHVnpMM04wZVd4bFpDMWpiMjF3YjI1bGJuUnpKMXh1YVcxd2IzSjBJSE4wZVd4bFpDQm1jbTl0SUNkemRIbHNaV1F0WTI5dGNHOXVaVzUwY3lkY2JtbHRjRzl5ZENCTmIzWnBaVTFoYm1GblpYSWdabkp2YlNBbkxpOXRiM1pwWlMxdFlXNWhaMlZ5SjF4dWFXMXdiM0owSUhzZ2RYTmxUVzkyYVdWRVpYUmhhV3h6SUgwZ1puSnZiU0FuUUdodmIydHpMM1Z6WlMxdGIzWnBaUzFrWlhSaGFXd25YRzVwYlhCdmNuUWdleUIxYzJWRVpXeGxkR1ZOYjNacFpTQjlJR1p5YjIwZ0owQm9iMjlyY3k5MWMyVXRiVzkyYVdWekoxeHVhVzF3YjNKMElIc2dkWE5sVG1GMmFXZGhkR1VnZlNCbWNtOXRJQ2R5WldGamRDMXliM1YwWlhJdFpHOXRKMXh1YVcxd2IzSjBJSFI1Y0dVZ2V5Qk5iM1pwWlNCOUlHWnliMjBnSjBCemFHRnlaV1F2ZEhsd1pYTXZiVzkyYVdVdGRIbHdaWE1uWEc1cGJYQnZjblFnZEhsd1pTQjdJRVZ5Y205eVVtVnpjRzl1YzJVZ2ZTQm1jbTl0SUNjdUxpOHVMaTlqYjI1emRXMWxjaWRjYmx4dVpYaHdiM0owSUdSbFptRjFiSFFnWm5WdVkzUnBiMjRnVFc5MmFXVkVaWFJoYVd4ektDa2dlMXh1SUNCamIyNXpkQ0I3SUdSaGRHRXNJR2x6VEc5aFpHbHVaeXdnYUdGelNXUmxiblJwWm1sbGNpQjlJRDBnZFhObFRXOTJhV1ZFWlhSaGFXeHpLQ2xjYmlBZ1kyOXVjM1FnWkdWc1pYUmxUVzkyYVdWTmRYUmhkR2x2YmlBOUlIVnpaVVJsYkdWMFpVMXZkbWxsS0NsY2JpQWdZMjl1YzNRZ2JtRjJhV2RoZEdVZ1BTQjFjMlZPWVhacFoyRjBaU2dwWEc1Y2JpQWdZMjl1YzNRZ2FHRnVaR3hsUkdWc1pYUmxUVzkyYVdVZ1BTQW9hV1E2SUc1MWJXSmxjaWtnUFQ1Y2JpQWdJQ0JrWld4bGRHVk5iM1pwWlUxMWRHRjBhVzl1TG0xMWRHRjBaU2hwWkN3Z2UxeHVJQ0FnSUNBZ2IyNVRkV05qWlhOek9pQW9LU0E5UGlCdVlYWnBaMkYwWlNnbkwyMXZkbWxsY3ljcElDOHZJRkpsWkdseVpXTjBJSFJ2SUM5dGIzWnBaWE1nWVdaMFpYSWdaR1ZzWlhSbElITjFZMk5sYzNOY2JpQWdJQ0I5S1Z4dVhHNGdJR2xtSUNnaGFHRnpTV1JsYm5ScFptbGxjaWtnY21WMGRYSnVJRHh3UGs1dklHMXZkbWxsSUhObGJHVmpkR1ZrUEM5d1BseHVJQ0JwWmlBb2FYTk1iMkZrYVc1bktTQnlaWFIxY200Z1BFeHZZV1JwYm1kTlpYTnpZV2RsSUM4K1hHNWNiaUFnWTI5dWMzUWdiVzkyYVdWRVlYUmhJRDBnS0dSaGRHRWdZWE1nZFc1cmJtOTNiaUJoY3lCN0lHUmhkR0U2SUUxdmRtbGxJSDBwTG1SaGRHRmNiaUFnWTI5dWMzUWdiVzkyYVdWRmNuSnZjaUE5SUNoa1lYUmhJR0Z6SUhWdWEyNXZkMjRnWVhNZ2V5Qmxjbkp2Y2pvZ1JYSnliM0pTWlhOd2IyNXpaU0I5S1M1bGNuSnZjajh1WlhKeWIzSmNibHh1SUNCeVpYUjFjbTRnS0Z4dUlDQWdJRHhUVFc5MmFXVkVaWFJoYVd4eklHUmhkR0V0ZEdWemRHbGtQVndpYlc5MmFXVXRaR1YwWVdsc2N5MWpiMjF3WENJK1hHNGdJQ0FnSUNBOFUxUnBkR3hsUGsxdmRtbGxJRVJsZEdGcGJITThMMU5VYVhSc1pUNWNibHh1SUNBZ0lDQWdlMjF2ZG1sbFJHRjBZU0FtSmlBbmJtRnRaU2NnYVc0Z2JXOTJhV1ZFWVhSaElEOGdLRnh1SUNBZ0lDQWdJQ0E4VFc5MmFXVk5ZVzVoWjJWeUlHMXZkbWxsUFh0dGIzWnBaVVJoZEdGOUlHOXVSR1ZzWlhSbFBYdG9ZVzVrYkdWRVpXeGxkR1ZOYjNacFpYMGdMejVjYmlBZ0lDQWdJQ2tnT2lBb1hHNGdJQ0FnSUNBZ0lEeHdQbnR0YjNacFpVVnljbTl5SUh4OElDZFZibVY0Y0dWamRHVmtJR1Z5Y205eUlHOWpZM1Z5Y21Wa0ozMDhMM0ErWEc0Z0lDQWdJQ0FwZlZ4dVhHNGdJQ0FnSUNBOFUwSjFkSFJ2YmlCdmJrTnNhV05yUFhzb0tTQTlQaUJ1WVhacFoyRjBaU2d0TVNsOUlHUmhkR0V0ZEdWemRHbGtQVndpWW1GamExd2lQbHh1SUNBZ0lDQWdJQ0JDWVdOclhHNGdJQ0FnSUNBOEwxTkNkWFIwYjI0K1hHNGdJQ0FnUEM5VFRXOTJhV1ZFWlhSaGFXeHpQbHh1SUNBcFhHNTlYRzVjYm1OdmJuTjBJRk5OYjNacFpVUmxkR0ZwYkhNZ1BTQnpkSGxzWldRdVpHbDJZRnh1SUNCdFlYZ3RkMmxrZEdnNklEWXdNSEI0TzF4dUlDQnRZWEpuYVc0NklEQWdZWFYwYnp0Y2JpQWdjR0ZrWkdsdVp6b2dNakJ3ZUR0Y2JpQWdZbUZqYTJkeWIzVnVaQzFqYjJ4dmNqb2dJMlk1WmpsbU9UdGNiaUFnWW05eVpHVnlMWEpoWkdsMWN6b2dPSEI0TzF4dUlDQmliM2d0YzJoaFpHOTNPaUF3SURSd2VDQXhNSEI0SUhKblltRW9NQ3dnTUN3Z01Dd2dNQzR4S1R0Y2JtQmNiaUpkTENKbWFXeGxJam9pTDFWelpYSnpMMjExY21GMExtOTZZMkZ1TDNObGIyNHZjR3hoZVhkeWFXZG9kQzExZEdsc2N5OXpZVzF3YkdVdFlYQndMMlp5YjI1MFpXNWtMM055WXk5amIyMXdiMjVsYm5SekwyMXZkbWxsTFdSbGRHRnBiSE12Ylc5MmFXVXRaR1YwWVdsc2N5NTBjM2dpZlE9PQ==",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 9892
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 8,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.621Z",
        "time": 5,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/components/validation-error-display.tsx",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/components/login/login-form.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"afa-P+PKGm2OdxWPAGSEq1MNqjp9oa4\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "4637"
            }
          ],
          "content": {
            "size": 4637,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsgY3JlYXRlSG90Q29udGV4dCBhcyBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQgfSBmcm9tICIvQHZpdGUvY2xpZW50IjtpbXBvcnQubWV0YS5ob3QgPSBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQoIi9zcmMvY29tcG9uZW50cy92YWxpZGF0aW9uLWVycm9yLWRpc3BsYXkudHN4Iik7aW1wb3J0IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdF9qc3hEZXZSdW50aW1lIGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9yZWFjdF9qc3gtZGV2LXJ1bnRpbWUuanM/dj0wYmI2OWQ3MyI7IGNvbnN0IGpzeERFViA9IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdF9qc3hEZXZSdW50aW1lWyJqc3hERVYiXTsKaW1wb3J0ICogYXMgUmVmcmVzaFJ1bnRpbWUgZnJvbSAiL0ByZWFjdC1yZWZyZXNoIjsKY29uc3QgaW5XZWJXb3JrZXIgPSB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICJ1bmRlZmluZWQiICYmIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZTsKbGV0IHByZXZSZWZyZXNoUmVnOwpsZXQgcHJldlJlZnJlc2hTaWc7CmlmIChpbXBvcnQubWV0YS5ob3QgJiYgIWluV2ViV29ya2VyKSB7CiAgaWYgKCF3aW5kb3cuJFJlZnJlc2hSZWckKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICJAdml0ZWpzL3BsdWdpbi1yZWFjdCBjYW4ndCBkZXRlY3QgcHJlYW1ibGUuIFNvbWV0aGluZyBpcyB3cm9uZy4iCiAgICApOwogIH0KICBwcmV2UmVmcmVzaFJlZyA9IHdpbmRvdy4kUmVmcmVzaFJlZyQ7CiAgcHJldlJlZnJlc2hTaWcgPSB3aW5kb3cuJFJlZnJlc2hTaWckOwogIHdpbmRvdy4kUmVmcmVzaFJlZyQgPSBSZWZyZXNoUnVudGltZS5nZXRSZWZyZXNoUmVnKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvdmFsaWRhdGlvbi1lcnJvci1kaXNwbGF5LnRzeCIpOwogIHdpbmRvdy4kUmVmcmVzaFNpZyQgPSBSZWZyZXNoUnVudGltZS5jcmVhdGVTaWduYXR1cmVGdW5jdGlvbkZvclRyYW5zZm9ybTsKfQppbXBvcnQgc3R5bGVkIGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9zdHlsZWQtY29tcG9uZW50cy5qcz92PTBiYjY5ZDczIjsKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gVmFsaWRhdGlvbkVycm9yRGlzcGxheSh7IHZhbGlkYXRpb25FcnJvciB9KSB7CiAgaWYgKCF2YWxpZGF0aW9uRXJyb3IpIHJldHVybiBudWxsOwogIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4REVWKFNFcnJvciwgeyBjaGlsZHJlbjogdmFsaWRhdGlvbkVycm9yLmlzc3Vlcy5tYXAoCiAgICAoZXJyKSA9PiAvKiBAX19QVVJFX18gKi8ganN4REVWKCJwIiwgeyAiZGF0YS10ZXN0aWQiOiAidmFsaWRhdGlvbi1lcnJvciIsIGNoaWxkcmVuOiBlcnIubWVzc2FnZSB9LCBlcnIucGF0aC5qb2luKCIuIiksIGZhbHNlLCB7CiAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL3ZhbGlkYXRpb24tZXJyb3ItZGlzcGxheS50c3giLAogICAgICBsaW5lTnVtYmVyOiAzMywKICAgICAgY29sdW1uTnVtYmVyOiA3CiAgICB9LCB0aGlzKQogICkgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvdmFsaWRhdGlvbi1lcnJvci1kaXNwbGF5LnRzeCIsCiAgICBsaW5lTnVtYmVyOiAzMSwKICAgIGNvbHVtbk51bWJlcjogNQogIH0sIHRoaXMpOwp9Cl9jID0gVmFsaWRhdGlvbkVycm9yRGlzcGxheTsKY29uc3QgU0Vycm9yID0gc3R5bGVkLmRpdmAKICBjb2xvcjogcmVkOwogIG1hcmdpbi1ib3R0b206IDEwcHg7CmA7Cl9jMiA9IFNFcnJvcjsKdmFyIF9jLCBfYzI7CiRSZWZyZXNoUmVnJChfYywgIlZhbGlkYXRpb25FcnJvckRpc3BsYXkiKTsKJFJlZnJlc2hSZWckKF9jMiwgIlNFcnJvciIpOwppZiAoaW1wb3J0Lm1ldGEuaG90ICYmICFpbldlYldvcmtlcikgewogIHdpbmRvdy4kUmVmcmVzaFJlZyQgPSBwcmV2UmVmcmVzaFJlZzsKICB3aW5kb3cuJFJlZnJlc2hTaWckID0gcHJldlJlZnJlc2hTaWc7Cn0KaWYgKGltcG9ydC5tZXRhLmhvdCAmJiAhaW5XZWJXb3JrZXIpIHsKICBSZWZyZXNoUnVudGltZS5fX2htcl9pbXBvcnQoaW1wb3J0Lm1ldGEudXJsKS50aGVuKChjdXJyZW50RXhwb3J0cykgPT4gewogICAgUmVmcmVzaFJ1bnRpbWUucmVnaXN0ZXJFeHBvcnRzRm9yUmVhY3RSZWZyZXNoKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvdmFsaWRhdGlvbi1lcnJvci1kaXNwbGF5LnRzeCIsIGN1cnJlbnRFeHBvcnRzKTsKICAgIGltcG9ydC5tZXRhLmhvdC5hY2NlcHQoKG5leHRFeHBvcnRzKSA9PiB7CiAgICAgIGlmICghbmV4dEV4cG9ydHMpIHJldHVybjsKICAgICAgY29uc3QgaW52YWxpZGF0ZU1lc3NhZ2UgPSBSZWZyZXNoUnVudGltZS52YWxpZGF0ZVJlZnJlc2hCb3VuZGFyeUFuZEVucXVldWVVcGRhdGUoIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy92YWxpZGF0aW9uLWVycm9yLWRpc3BsYXkudHN4IiwgY3VycmVudEV4cG9ydHMsIG5leHRFeHBvcnRzKTsKICAgICAgaWYgKGludmFsaWRhdGVNZXNzYWdlKSBpbXBvcnQubWV0YS5ob3QuaW52YWxpZGF0ZShpbnZhbGlkYXRlTWVzc2FnZSk7CiAgICB9KTsKICB9KTsKfQoKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKdFlYQndhVzVuY3lJNklrRkJZVkU3T3pzN096czdPenM3T3pzN096czdRVUZpVWl4UFFVRlBRU3haUVVGWk8wRkJUMjVDTEhkQ1FVRjNRa01zZFVKQlFYVkNMRVZCUVVWRExHZENRVUYxUWl4SFFVRkhPMEZCUTNwRkxFMUJRVWtzUTBGQlEwRXNaMEpCUVdsQ0xGRkJRVTg3UVVGRk4wSXNVMEZEUlN4MVFrRkJReXhWUVVORlFTd3dRa0ZCWjBKRExFOUJRVTlETzBGQlFVRkJMRWxCUVVrc1EwRkJRME1zVVVGRE0wSXNkVUpCUVVNc1QwRkJNa0lzWlVGQldTeHZRa0ZEY2tOQkxHTkJRVWxETEZkQlJFTkVMRWxCUVVsRkxFdEJRVXRETEV0QlFVc3NSMEZCUnl4SFFVRjZRanRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTEZkQlJVRTdRVUZCUVN4RlFVTkVMRXRCVEVnN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFTeFRRVTFCTzBGQlJVbzdRVUZCUTBNc1MwRmFkVUpTTzBGQlkzaENMRTFCUVUxVExGTkJRVk5XTEU5QlFVOVhPMEZCUVVGQk8wRkJRVUZCTzBGQlFVRkJPMEZCUjNKQ1F5eE5RVWhMUmp0QlFVRk5MRWxCUVVGRUxFbEJRVUZITzBGQlFVRkRMR0ZCUVVGS0xFbEJRVUU3UVVGQlFVa3NZVUZCUVVRc1MwRkJRU0lzSW01aGJXVnpJanBiSW5OMGVXeGxaQ0lzSWxaaGJHbGtZWFJwYjI1RmNuSnZja1JwYzNCc1lYa2lMQ0oyWVd4cFpHRjBhVzl1UlhKeWIzSWlMQ0pwYzNOMVpYTWlMQ0p0WVhBaUxDSmxjbklpTENKdFpYTnpZV2RsSWl3aWNHRjBhQ0lzSW1wdmFXNGlMQ0pmWXlJc0lsTkZjbkp2Y2lJc0ltUnBkaUlzSWw5ak1pSXNJaVJTWldaeVpYTm9VbVZuSkNKZExDSnBaMjV2Y21WTWFYTjBJanBiWFN3aWMyOTFjbU5sY3lJNld5SjJZV3hwWkdGMGFXOXVMV1Z5Y205eUxXUnBjM0JzWVhrdWRITjRJbDBzSW5OdmRYSmpaWE5EYjI1MFpXNTBJanBiSW1sdGNHOXlkQ0J6ZEhsc1pXUWdabkp2YlNBbmMzUjViR1ZrTFdOdmJYQnZibVZ1ZEhNblhHNXBiWEJ2Y25RZ2RIbHdaU0I3SUhvZ2ZTQm1jbTl0SUNkNmIyUW5YRzVjYm5SNWNHVWdjSEp2Y0hNZ1BTQjdYRzRnSUhKbFlXUnZibXg1SUhaaGJHbGtZWFJwYjI1RmNuSnZjam9nZWk1YWIyUkZjbkp2Y2lCOElHNTFiR3hjYm4xY2JseHVaWGh3YjNKMElHUmxabUYxYkhRZ1puVnVZM1JwYjI0Z1ZtRnNhV1JoZEdsdmJrVnljbTl5UkdsemNHeGhlU2g3SUhaaGJHbGtZWFJwYjI1RmNuSnZjaUI5T2lCd2NtOXdjeWtnZTF4dUlDQnBaaUFvSVhaaGJHbGtZWFJwYjI1RmNuSnZjaWtnY21WMGRYSnVJRzUxYkd4Y2JseHVJQ0J5WlhSMWNtNGdLRnh1SUNBZ0lEeFRSWEp5YjNJK1hHNGdJQ0FnSUNCN2RtRnNhV1JoZEdsdmJrVnljbTl5TG1semMzVmxjeTV0WVhBb0tHVnljaWtnUFQ0Z0tGeHVJQ0FnSUNBZ0lDQThjQ0JyWlhrOWUyVnljaTV3WVhSb0xtcHZhVzRvSnk0bktYMGdaR0YwWVMxMFpYTjBhV1E5WENKMllXeHBaR0YwYVc5dUxXVnljbTl5WENJK1hHNGdJQ0FnSUNBZ0lDQWdlMlZ5Y2k1dFpYTnpZV2RsZlZ4dUlDQWdJQ0FnSUNBOEwzQStYRzRnSUNBZ0lDQXBLWDFjYmlBZ0lDQThMMU5GY25KdmNqNWNiaUFnS1Z4dWZWeHVYRzVqYjI1emRDQlRSWEp5YjNJZ1BTQnpkSGxzWldRdVpHbDJZRnh1SUNCamIyeHZjam9nY21Wa08xeHVJQ0J0WVhKbmFXNHRZbTkwZEc5dE9pQXhNSEI0TzF4dVlGeHVJbDBzSW1acGJHVWlPaUl2VlhObGNuTXZiWFZ5WVhRdWIzcGpZVzR2YzJWdmJpOXdiR0Y1ZDNKcFoyaDBMWFYwYVd4ekwzTmhiWEJzWlMxaGNIQXZabkp2Ym5SbGJtUXZjM0pqTDJOdmJYQnZibVZ1ZEhNdmRtRnNhV1JoZEdsdmJpMWxjbkp2Y2kxa2FYTndiR0Y1TG5SemVDSjk=",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 4637
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 5,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.622Z",
        "time": 7,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/node_modules/.vite/deps/zod.js?v=0bb69d73",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/components/login/login-form.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [
            {
              "name": "v",
              "value": "0bb69d73"
            }
          ],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "max-age=31536000,immutable"
            },
            {
              "name": "etag",
              "value": "W/\"649e5-m5rPoWQdBHpri6qOfDq2RHyFso4\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "412133"
            }
          ],
          "content": {
            "size": 412133,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsKICBfX2V4cG9ydAp9IGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9jaHVuay00TUJNUklMQS5qcz92PTBiYjY5ZDczIjsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvY2xhc3NpYy9leHRlcm5hbC5qcwp2YXIgZXh0ZXJuYWxfZXhwb3J0cyA9IHt9OwpfX2V4cG9ydChleHRlcm5hbF9leHBvcnRzLCB7CiAgJGJyYW5kOiAoKSA9PiAkYnJhbmQsCiAgJGlucHV0OiAoKSA9PiAkaW5wdXQsCiAgJG91dHB1dDogKCkgPT4gJG91dHB1dCwKICBORVZFUjogKCkgPT4gTkVWRVIsCiAgVGltZVByZWNpc2lvbjogKCkgPT4gVGltZVByZWNpc2lvbiwKICBab2RBbnk6ICgpID0+IFpvZEFueSwKICBab2RBcnJheTogKCkgPT4gWm9kQXJyYXksCiAgWm9kQmFzZTY0OiAoKSA9PiBab2RCYXNlNjQsCiAgWm9kQmFzZTY0VVJMOiAoKSA9PiBab2RCYXNlNjRVUkwsCiAgWm9kQmlnSW50OiAoKSA9PiBab2RCaWdJbnQsCiAgWm9kQmlnSW50Rm9ybWF0OiAoKSA9PiBab2RCaWdJbnRGb3JtYXQsCiAgWm9kQm9vbGVhbjogKCkgPT4gWm9kQm9vbGVhbiwKICBab2RDSURSdjQ6ICgpID0+IFpvZENJRFJ2NCwKICBab2RDSURSdjY6ICgpID0+IFpvZENJRFJ2NiwKICBab2RDVUlEOiAoKSA9PiBab2RDVUlELAogIFpvZENVSUQyOiAoKSA9PiBab2RDVUlEMiwKICBab2RDYXRjaDogKCkgPT4gWm9kQ2F0Y2gsCiAgWm9kQ29kZWM6ICgpID0+IFpvZENvZGVjLAogIFpvZEN1c3RvbTogKCkgPT4gWm9kQ3VzdG9tLAogIFpvZEN1c3RvbVN0cmluZ0Zvcm1hdDogKCkgPT4gWm9kQ3VzdG9tU3RyaW5nRm9ybWF0LAogIFpvZERhdGU6ICgpID0+IFpvZERhdGUsCiAgWm9kRGVmYXVsdDogKCkgPT4gWm9kRGVmYXVsdCwKICBab2REaXNjcmltaW5hdGVkVW5pb246ICgpID0+IFpvZERpc2NyaW1pbmF0ZWRVbmlvbiwKICBab2RFMTY0OiAoKSA9PiBab2RFMTY0LAogIFpvZEVtYWlsOiAoKSA9PiBab2RFbWFpbCwKICBab2RFbW9qaTogKCkgPT4gWm9kRW1vamksCiAgWm9kRW51bTogKCkgPT4gWm9kRW51bSwKICBab2RFcnJvcjogKCkgPT4gWm9kRXJyb3IsCiAgWm9kRmlsZTogKCkgPT4gWm9kRmlsZSwKICBab2RGaXJzdFBhcnR5VHlwZUtpbmQ6ICgpID0+IFpvZEZpcnN0UGFydHlUeXBlS2luZCwKICBab2RGdW5jdGlvbjogKCkgPT4gWm9kRnVuY3Rpb24sCiAgWm9kR1VJRDogKCkgPT4gWm9kR1VJRCwKICBab2RJUHY0OiAoKSA9PiBab2RJUHY0LAogIFpvZElQdjY6ICgpID0+IFpvZElQdjYsCiAgWm9kSVNPRGF0ZTogKCkgPT4gWm9kSVNPRGF0ZSwKICBab2RJU09EYXRlVGltZTogKCkgPT4gWm9kSVNPRGF0ZVRpbWUsCiAgWm9kSVNPRHVyYXRpb246ICgpID0+IFpvZElTT0R1cmF0aW9uLAogIFpvZElTT1RpbWU6ICgpID0+IFpvZElTT1RpbWUsCiAgWm9kSW50ZXJzZWN0aW9uOiAoKSA9PiBab2RJbnRlcnNlY3Rpb24sCiAgWm9kSXNzdWVDb2RlOiAoKSA9PiBab2RJc3N1ZUNvZGUsCiAgWm9kSldUOiAoKSA9PiBab2RKV1QsCiAgWm9kS1NVSUQ6ICgpID0+IFpvZEtTVUlELAogIFpvZExhenk6ICgpID0+IFpvZExhenksCiAgWm9kTGl0ZXJhbDogKCkgPT4gWm9kTGl0ZXJhbCwKICBab2RNYXA6ICgpID0+IFpvZE1hcCwKICBab2ROYU46ICgpID0+IFpvZE5hTiwKICBab2ROYW5vSUQ6ICgpID0+IFpvZE5hbm9JRCwKICBab2ROZXZlcjogKCkgPT4gWm9kTmV2ZXIsCiAgWm9kTm9uT3B0aW9uYWw6ICgpID0+IFpvZE5vbk9wdGlvbmFsLAogIFpvZE51bGw6ICgpID0+IFpvZE51bGwsCiAgWm9kTnVsbGFibGU6ICgpID0+IFpvZE51bGxhYmxlLAogIFpvZE51bWJlcjogKCkgPT4gWm9kTnVtYmVyLAogIFpvZE51bWJlckZvcm1hdDogKCkgPT4gWm9kTnVtYmVyRm9ybWF0LAogIFpvZE9iamVjdDogKCkgPT4gWm9kT2JqZWN0LAogIFpvZE9wdGlvbmFsOiAoKSA9PiBab2RPcHRpb25hbCwKICBab2RQaXBlOiAoKSA9PiBab2RQaXBlLAogIFpvZFByZWZhdWx0OiAoKSA9PiBab2RQcmVmYXVsdCwKICBab2RQcm9taXNlOiAoKSA9PiBab2RQcm9taXNlLAogIFpvZFJlYWRvbmx5OiAoKSA9PiBab2RSZWFkb25seSwKICBab2RSZWFsRXJyb3I6ICgpID0+IFpvZFJlYWxFcnJvciwKICBab2RSZWNvcmQ6ICgpID0+IFpvZFJlY29yZCwKICBab2RTZXQ6ICgpID0+IFpvZFNldCwKICBab2RTdHJpbmc6ICgpID0+IFpvZFN0cmluZywKICBab2RTdHJpbmdGb3JtYXQ6ICgpID0+IFpvZFN0cmluZ0Zvcm1hdCwKICBab2RTdWNjZXNzOiAoKSA9PiBab2RTdWNjZXNzLAogIFpvZFN5bWJvbDogKCkgPT4gWm9kU3ltYm9sLAogIFpvZFRlbXBsYXRlTGl0ZXJhbDogKCkgPT4gWm9kVGVtcGxhdGVMaXRlcmFsLAogIFpvZFRyYW5zZm9ybTogKCkgPT4gWm9kVHJhbnNmb3JtLAogIFpvZFR1cGxlOiAoKSA9PiBab2RUdXBsZSwKICBab2RUeXBlOiAoKSA9PiBab2RUeXBlLAogIFpvZFVMSUQ6ICgpID0+IFpvZFVMSUQsCiAgWm9kVVJMOiAoKSA9PiBab2RVUkwsCiAgWm9kVVVJRDogKCkgPT4gWm9kVVVJRCwKICBab2RVbmRlZmluZWQ6ICgpID0+IFpvZFVuZGVmaW5lZCwKICBab2RVbmlvbjogKCkgPT4gWm9kVW5pb24sCiAgWm9kVW5rbm93bjogKCkgPT4gWm9kVW5rbm93biwKICBab2RWb2lkOiAoKSA9PiBab2RWb2lkLAogIFpvZFhJRDogKCkgPT4gWm9kWElELAogIF9ab2RTdHJpbmc6ICgpID0+IF9ab2RTdHJpbmcsCiAgX2RlZmF1bHQ6ICgpID0+IF9kZWZhdWx0MiwKICBfZnVuY3Rpb246ICgpID0+IF9mdW5jdGlvbiwKICBhbnk6ICgpID0+IGFueSwKICBhcnJheTogKCkgPT4gYXJyYXksCiAgYmFzZTY0OiAoKSA9PiBiYXNlNjQyLAogIGJhc2U2NHVybDogKCkgPT4gYmFzZTY0dXJsMiwKICBiaWdpbnQ6ICgpID0+IGJpZ2ludDIsCiAgYm9vbGVhbjogKCkgPT4gYm9vbGVhbjIsCiAgY2F0Y2g6ICgpID0+IF9jYXRjaDIsCiAgY2hlY2s6ICgpID0+IGNoZWNrLAogIGNpZHJ2NDogKCkgPT4gY2lkcnY0MiwKICBjaWRydjY6ICgpID0+IGNpZHJ2NjIsCiAgY2xvbmU6ICgpID0+IGNsb25lLAogIGNvZGVjOiAoKSA9PiBjb2RlYywKICBjb2VyY2U6ICgpID0+IGNvZXJjZV9leHBvcnRzLAogIGNvbmZpZzogKCkgPT4gY29uZmlnLAogIGNvcmU6ICgpID0+IGNvcmVfZXhwb3J0czIsCiAgY3VpZDogKCkgPT4gY3VpZDMsCiAgY3VpZDI6ICgpID0+IGN1aWQyMiwKICBjdXN0b206ICgpID0+IGN1c3RvbSwKICBkYXRlOiAoKSA9PiBkYXRlMywKICBkZWNvZGU6ICgpID0+IGRlY29kZTIsCiAgZGVjb2RlQXN5bmM6ICgpID0+IGRlY29kZUFzeW5jMiwKICBkaXNjcmltaW5hdGVkVW5pb246ICgpID0+IGRpc2NyaW1pbmF0ZWRVbmlvbiwKICBlMTY0OiAoKSA9PiBlMTY0MiwKICBlbWFpbDogKCkgPT4gZW1haWwyLAogIGVtb2ppOiAoKSA9PiBlbW9qaTIsCiAgZW5jb2RlOiAoKSA9PiBlbmNvZGUyLAogIGVuY29kZUFzeW5jOiAoKSA9PiBlbmNvZGVBc3luYzIsCiAgZW5kc1dpdGg6ICgpID0+IF9lbmRzV2l0aCwKICBlbnVtOiAoKSA9PiBfZW51bTIsCiAgZmlsZTogKCkgPT4gZmlsZSwKICBmbGF0dGVuRXJyb3I6ICgpID0+IGZsYXR0ZW5FcnJvciwKICBmbG9hdDMyOiAoKSA9PiBmbG9hdDMyLAogIGZsb2F0NjQ6ICgpID0+IGZsb2F0NjQsCiAgZm9ybWF0RXJyb3I6ICgpID0+IGZvcm1hdEVycm9yLAogIGZ1bmN0aW9uOiAoKSA9PiBfZnVuY3Rpb24sCiAgZ2V0RXJyb3JNYXA6ICgpID0+IGdldEVycm9yTWFwLAogIGdsb2JhbFJlZ2lzdHJ5OiAoKSA9PiBnbG9iYWxSZWdpc3RyeSwKICBndDogKCkgPT4gX2d0LAogIGd0ZTogKCkgPT4gX2d0ZSwKICBndWlkOiAoKSA9PiBndWlkMiwKICBoYXNoOiAoKSA9PiBoYXNoLAogIGhleDogKCkgPT4gaGV4MiwKICBob3N0bmFtZTogKCkgPT4gaG9zdG5hbWUyLAogIGh0dHBVcmw6ICgpID0+IGh0dHBVcmwsCiAgaW5jbHVkZXM6ICgpID0+IF9pbmNsdWRlcywKICBpbnN0YW5jZW9mOiAoKSA9PiBfaW5zdGFuY2VvZiwKICBpbnQ6ICgpID0+IGludCwKICBpbnQzMjogKCkgPT4gaW50MzIsCiAgaW50NjQ6ICgpID0+IGludDY0LAogIGludGVyc2VjdGlvbjogKCkgPT4gaW50ZXJzZWN0aW9uLAogIGlwdjQ6ICgpID0+IGlwdjQyLAogIGlwdjY6ICgpID0+IGlwdjYyLAogIGlzbzogKCkgPT4gaXNvX2V4cG9ydHMsCiAganNvbjogKCkgPT4ganNvbiwKICBqd3Q6ICgpID0+IGp3dCwKICBrZXlvZjogKCkgPT4ga2V5b2YsCiAga3N1aWQ6ICgpID0+IGtzdWlkMiwKICBsYXp5OiAoKSA9PiBsYXp5LAogIGxlbmd0aDogKCkgPT4gX2xlbmd0aCwKICBsaXRlcmFsOiAoKSA9PiBsaXRlcmFsLAogIGxvY2FsZXM6ICgpID0+IGxvY2FsZXNfZXhwb3J0cywKICBsb29zZU9iamVjdDogKCkgPT4gbG9vc2VPYmplY3QsCiAgbG93ZXJjYXNlOiAoKSA9PiBfbG93ZXJjYXNlLAogIGx0OiAoKSA9PiBfbHQsCiAgbHRlOiAoKSA9PiBfbHRlLAogIG1hcDogKCkgPT4gbWFwLAogIG1heExlbmd0aDogKCkgPT4gX21heExlbmd0aCwKICBtYXhTaXplOiAoKSA9PiBfbWF4U2l6ZSwKICBtaW1lOiAoKSA9PiBfbWltZSwKICBtaW5MZW5ndGg6ICgpID0+IF9taW5MZW5ndGgsCiAgbWluU2l6ZTogKCkgPT4gX21pblNpemUsCiAgbXVsdGlwbGVPZjogKCkgPT4gX211bHRpcGxlT2YsCiAgbmFuOiAoKSA9PiBuYW4sCiAgbmFub2lkOiAoKSA9PiBuYW5vaWQyLAogIG5hdGl2ZUVudW06ICgpID0+IG5hdGl2ZUVudW0sCiAgbmVnYXRpdmU6ICgpID0+IF9uZWdhdGl2ZSwKICBuZXZlcjogKCkgPT4gbmV2ZXIsCiAgbm9ubmVnYXRpdmU6ICgpID0+IF9ub25uZWdhdGl2ZSwKICBub25vcHRpb25hbDogKCkgPT4gbm9ub3B0aW9uYWwsCiAgbm9ucG9zaXRpdmU6ICgpID0+IF9ub25wb3NpdGl2ZSwKICBub3JtYWxpemU6ICgpID0+IF9ub3JtYWxpemUsCiAgbnVsbDogKCkgPT4gX251bGwzLAogIG51bGxhYmxlOiAoKSA9PiBudWxsYWJsZSwKICBudWxsaXNoOiAoKSA9PiBudWxsaXNoMiwKICBudW1iZXI6ICgpID0+IG51bWJlcjIsCiAgb2JqZWN0OiAoKSA9PiBvYmplY3QsCiAgb3B0aW9uYWw6ICgpID0+IG9wdGlvbmFsLAogIG92ZXJ3cml0ZTogKCkgPT4gX292ZXJ3cml0ZSwKICBwYXJzZTogKCkgPT4gcGFyc2UyLAogIHBhcnNlQXN5bmM6ICgpID0+IHBhcnNlQXN5bmMyLAogIHBhcnRpYWxSZWNvcmQ6ICgpID0+IHBhcnRpYWxSZWNvcmQsCiAgcGlwZTogKCkgPT4gcGlwZSwKICBwb3NpdGl2ZTogKCkgPT4gX3Bvc2l0aXZlLAogIHByZWZhdWx0OiAoKSA9PiBwcmVmYXVsdCwKICBwcmVwcm9jZXNzOiAoKSA9PiBwcmVwcm9jZXNzLAogIHByZXR0aWZ5RXJyb3I6ICgpID0+IHByZXR0aWZ5RXJyb3IsCiAgcHJvbWlzZTogKCkgPT4gcHJvbWlzZSwKICBwcm9wZXJ0eTogKCkgPT4gX3Byb3BlcnR5LAogIHJlYWRvbmx5OiAoKSA9PiByZWFkb25seSwKICByZWNvcmQ6ICgpID0+IHJlY29yZCwKICByZWZpbmU6ICgpID0+IHJlZmluZSwKICByZWdleDogKCkgPT4gX3JlZ2V4LAogIHJlZ2V4ZXM6ICgpID0+IHJlZ2V4ZXNfZXhwb3J0cywKICByZWdpc3RyeTogKCkgPT4gcmVnaXN0cnksCiAgc2FmZURlY29kZTogKCkgPT4gc2FmZURlY29kZTIsCiAgc2FmZURlY29kZUFzeW5jOiAoKSA9PiBzYWZlRGVjb2RlQXN5bmMyLAogIHNhZmVFbmNvZGU6ICgpID0+IHNhZmVFbmNvZGUyLAogIHNhZmVFbmNvZGVBc3luYzogKCkgPT4gc2FmZUVuY29kZUFzeW5jMiwKICBzYWZlUGFyc2U6ICgpID0+IHNhZmVQYXJzZTIsCiAgc2FmZVBhcnNlQXN5bmM6ICgpID0+IHNhZmVQYXJzZUFzeW5jMiwKICBzZXQ6ICgpID0+IHNldCwKICBzZXRFcnJvck1hcDogKCkgPT4gc2V0RXJyb3JNYXAsCiAgc2l6ZTogKCkgPT4gX3NpemUsCiAgc3RhcnRzV2l0aDogKCkgPT4gX3N0YXJ0c1dpdGgsCiAgc3RyaWN0T2JqZWN0OiAoKSA9PiBzdHJpY3RPYmplY3QsCiAgc3RyaW5nOiAoKSA9PiBzdHJpbmcyLAogIHN0cmluZ0Zvcm1hdDogKCkgPT4gc3RyaW5nRm9ybWF0LAogIHN0cmluZ2Jvb2w6ICgpID0+IHN0cmluZ2Jvb2wsCiAgc3VjY2VzczogKCkgPT4gc3VjY2VzcywKICBzdXBlclJlZmluZTogKCkgPT4gc3VwZXJSZWZpbmUsCiAgc3ltYm9sOiAoKSA9PiBzeW1ib2wsCiAgdGVtcGxhdGVMaXRlcmFsOiAoKSA9PiB0ZW1wbGF0ZUxpdGVyYWwsCiAgdG9KU09OU2NoZW1hOiAoKSA9PiB0b0pTT05TY2hlbWEsCiAgdG9Mb3dlckNhc2U6ICgpID0+IF90b0xvd2VyQ2FzZSwKICB0b1VwcGVyQ2FzZTogKCkgPT4gX3RvVXBwZXJDYXNlLAogIHRyYW5zZm9ybTogKCkgPT4gdHJhbnNmb3JtLAogIHRyZWVpZnlFcnJvcjogKCkgPT4gdHJlZWlmeUVycm9yLAogIHRyaW06ICgpID0+IF90cmltLAogIHR1cGxlOiAoKSA9PiB0dXBsZSwKICB1aW50MzI6ICgpID0+IHVpbnQzMiwKICB1aW50NjQ6ICgpID0+IHVpbnQ2NCwKICB1bGlkOiAoKSA9PiB1bGlkMiwKICB1bmRlZmluZWQ6ICgpID0+IF91bmRlZmluZWQzLAogIHVuaW9uOiAoKSA9PiB1bmlvbiwKICB1bmtub3duOiAoKSA9PiB1bmtub3duLAogIHVwcGVyY2FzZTogKCkgPT4gX3VwcGVyY2FzZSwKICB1cmw6ICgpID0+IHVybCwKICB1dGlsOiAoKSA9PiB1dGlsX2V4cG9ydHMsCiAgdXVpZDogKCkgPT4gdXVpZDIsCiAgdXVpZHY0OiAoKSA9PiB1dWlkdjQsCiAgdXVpZHY2OiAoKSA9PiB1dWlkdjYsCiAgdXVpZHY3OiAoKSA9PiB1dWlkdjcsCiAgdm9pZDogKCkgPT4gX3ZvaWQyLAogIHhpZDogKCkgPT4geGlkMgp9KTsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvY29yZS9pbmRleC5qcwp2YXIgY29yZV9leHBvcnRzMiA9IHt9OwpfX2V4cG9ydChjb3JlX2V4cG9ydHMyLCB7CiAgJFpvZEFueTogKCkgPT4gJFpvZEFueSwKICAkWm9kQXJyYXk6ICgpID0+ICRab2RBcnJheSwKICAkWm9kQXN5bmNFcnJvcjogKCkgPT4gJFpvZEFzeW5jRXJyb3IsCiAgJFpvZEJhc2U2NDogKCkgPT4gJFpvZEJhc2U2NCwKICAkWm9kQmFzZTY0VVJMOiAoKSA9PiAkWm9kQmFzZTY0VVJMLAogICRab2RCaWdJbnQ6ICgpID0+ICRab2RCaWdJbnQsCiAgJFpvZEJpZ0ludEZvcm1hdDogKCkgPT4gJFpvZEJpZ0ludEZvcm1hdCwKICAkWm9kQm9vbGVhbjogKCkgPT4gJFpvZEJvb2xlYW4sCiAgJFpvZENJRFJ2NDogKCkgPT4gJFpvZENJRFJ2NCwKICAkWm9kQ0lEUnY2OiAoKSA9PiAkWm9kQ0lEUnY2LAogICRab2RDVUlEOiAoKSA9PiAkWm9kQ1VJRCwKICAkWm9kQ1VJRDI6ICgpID0+ICRab2RDVUlEMiwKICAkWm9kQ2F0Y2g6ICgpID0+ICRab2RDYXRjaCwKICAkWm9kQ2hlY2s6ICgpID0+ICRab2RDaGVjaywKICAkWm9kQ2hlY2tCaWdJbnRGb3JtYXQ6ICgpID0+ICRab2RDaGVja0JpZ0ludEZvcm1hdCwKICAkWm9kQ2hlY2tFbmRzV2l0aDogKCkgPT4gJFpvZENoZWNrRW5kc1dpdGgsCiAgJFpvZENoZWNrR3JlYXRlclRoYW46ICgpID0+ICRab2RDaGVja0dyZWF0ZXJUaGFuLAogICRab2RDaGVja0luY2x1ZGVzOiAoKSA9PiAkWm9kQ2hlY2tJbmNsdWRlcywKICAkWm9kQ2hlY2tMZW5ndGhFcXVhbHM6ICgpID0+ICRab2RDaGVja0xlbmd0aEVxdWFscywKICAkWm9kQ2hlY2tMZXNzVGhhbjogKCkgPT4gJFpvZENoZWNrTGVzc1RoYW4sCiAgJFpvZENoZWNrTG93ZXJDYXNlOiAoKSA9PiAkWm9kQ2hlY2tMb3dlckNhc2UsCiAgJFpvZENoZWNrTWF4TGVuZ3RoOiAoKSA9PiAkWm9kQ2hlY2tNYXhMZW5ndGgsCiAgJFpvZENoZWNrTWF4U2l6ZTogKCkgPT4gJFpvZENoZWNrTWF4U2l6ZSwKICAkWm9kQ2hlY2tNaW1lVHlwZTogKCkgPT4gJFpvZENoZWNrTWltZVR5cGUsCiAgJFpvZENoZWNrTWluTGVuZ3RoOiAoKSA9PiAkWm9kQ2hlY2tNaW5MZW5ndGgsCiAgJFpvZENoZWNrTWluU2l6ZTogKCkgPT4gJFpvZENoZWNrTWluU2l6ZSwKICAkWm9kQ2hlY2tNdWx0aXBsZU9mOiAoKSA9PiAkWm9kQ2hlY2tNdWx0aXBsZU9mLAogICRab2RDaGVja051bWJlckZvcm1hdDogKCkgPT4gJFpvZENoZWNrTnVtYmVyRm9ybWF0LAogICRab2RDaGVja092ZXJ3cml0ZTogKCkgPT4gJFpvZENoZWNrT3ZlcndyaXRlLAogICRab2RDaGVja1Byb3BlcnR5OiAoKSA9PiAkWm9kQ2hlY2tQcm9wZXJ0eSwKICAkWm9kQ2hlY2tSZWdleDogKCkgPT4gJFpvZENoZWNrUmVnZXgsCiAgJFpvZENoZWNrU2l6ZUVxdWFsczogKCkgPT4gJFpvZENoZWNrU2l6ZUVxdWFscywKICAkWm9kQ2hlY2tTdGFydHNXaXRoOiAoKSA9PiAkWm9kQ2hlY2tTdGFydHNXaXRoLAogICRab2RDaGVja1N0cmluZ0Zvcm1hdDogKCkgPT4gJFpvZENoZWNrU3RyaW5nRm9ybWF0LAogICRab2RDaGVja1VwcGVyQ2FzZTogKCkgPT4gJFpvZENoZWNrVXBwZXJDYXNlLAogICRab2RDb2RlYzogKCkgPT4gJFpvZENvZGVjLAogICRab2RDdXN0b206ICgpID0+ICRab2RDdXN0b20sCiAgJFpvZEN1c3RvbVN0cmluZ0Zvcm1hdDogKCkgPT4gJFpvZEN1c3RvbVN0cmluZ0Zvcm1hdCwKICAkWm9kRGF0ZTogKCkgPT4gJFpvZERhdGUsCiAgJFpvZERlZmF1bHQ6ICgpID0+ICRab2REZWZhdWx0LAogICRab2REaXNjcmltaW5hdGVkVW5pb246ICgpID0+ICRab2REaXNjcmltaW5hdGVkVW5pb24sCiAgJFpvZEUxNjQ6ICgpID0+ICRab2RFMTY0LAogICRab2RFbWFpbDogKCkgPT4gJFpvZEVtYWlsLAogICRab2RFbW9qaTogKCkgPT4gJFpvZEVtb2ppLAogICRab2RFbmNvZGVFcnJvcjogKCkgPT4gJFpvZEVuY29kZUVycm9yLAogICRab2RFbnVtOiAoKSA9PiAkWm9kRW51bSwKICAkWm9kRXJyb3I6ICgpID0+ICRab2RFcnJvciwKICAkWm9kRmlsZTogKCkgPT4gJFpvZEZpbGUsCiAgJFpvZEZ1bmN0aW9uOiAoKSA9PiAkWm9kRnVuY3Rpb24sCiAgJFpvZEdVSUQ6ICgpID0+ICRab2RHVUlELAogICRab2RJUHY0OiAoKSA9PiAkWm9kSVB2NCwKICAkWm9kSVB2NjogKCkgPT4gJFpvZElQdjYsCiAgJFpvZElTT0RhdGU6ICgpID0+ICRab2RJU09EYXRlLAogICRab2RJU09EYXRlVGltZTogKCkgPT4gJFpvZElTT0RhdGVUaW1lLAogICRab2RJU09EdXJhdGlvbjogKCkgPT4gJFpvZElTT0R1cmF0aW9uLAogICRab2RJU09UaW1lOiAoKSA9PiAkWm9kSVNPVGltZSwKICAkWm9kSW50ZXJzZWN0aW9uOiAoKSA9PiAkWm9kSW50ZXJzZWN0aW9uLAogICRab2RKV1Q6ICgpID0+ICRab2RKV1QsCiAgJFpvZEtTVUlEOiAoKSA9PiAkWm9kS1NVSUQsCiAgJFpvZExhenk6ICgpID0+ICRab2RMYXp5LAogICRab2RMaXRlcmFsOiAoKSA9PiAkWm9kTGl0ZXJhbCwKICAkWm9kTWFwOiAoKSA9PiAkWm9kTWFwLAogICRab2ROYU46ICgpID0+ICRab2ROYU4sCiAgJFpvZE5hbm9JRDogKCkgPT4gJFpvZE5hbm9JRCwKICAkWm9kTmV2ZXI6ICgpID0+ICRab2ROZXZlciwKICAkWm9kTm9uT3B0aW9uYWw6ICgpID0+ICRab2ROb25PcHRpb25hbCwKICAkWm9kTnVsbDogKCkgPT4gJFpvZE51bGwsCiAgJFpvZE51bGxhYmxlOiAoKSA9PiAkWm9kTnVsbGFibGUsCiAgJFpvZE51bWJlcjogKCkgPT4gJFpvZE51bWJlciwKICAkWm9kTnVtYmVyRm9ybWF0OiAoKSA9PiAkWm9kTnVtYmVyRm9ybWF0LAogICRab2RPYmplY3Q6ICgpID0+ICRab2RPYmplY3QsCiAgJFpvZE9iamVjdEpJVDogKCkgPT4gJFpvZE9iamVjdEpJVCwKICAkWm9kT3B0aW9uYWw6ICgpID0+ICRab2RPcHRpb25hbCwKICAkWm9kUGlwZTogKCkgPT4gJFpvZFBpcGUsCiAgJFpvZFByZWZhdWx0OiAoKSA9PiAkWm9kUHJlZmF1bHQsCiAgJFpvZFByb21pc2U6ICgpID0+ICRab2RQcm9taXNlLAogICRab2RSZWFkb25seTogKCkgPT4gJFpvZFJlYWRvbmx5LAogICRab2RSZWFsRXJyb3I6ICgpID0+ICRab2RSZWFsRXJyb3IsCiAgJFpvZFJlY29yZDogKCkgPT4gJFpvZFJlY29yZCwKICAkWm9kUmVnaXN0cnk6ICgpID0+ICRab2RSZWdpc3RyeSwKICAkWm9kU2V0OiAoKSA9PiAkWm9kU2V0LAogICRab2RTdHJpbmc6ICgpID0+ICRab2RTdHJpbmcsCiAgJFpvZFN0cmluZ0Zvcm1hdDogKCkgPT4gJFpvZFN0cmluZ0Zvcm1hdCwKICAkWm9kU3VjY2VzczogKCkgPT4gJFpvZFN1Y2Nlc3MsCiAgJFpvZFN5bWJvbDogKCkgPT4gJFpvZFN5bWJvbCwKICAkWm9kVGVtcGxhdGVMaXRlcmFsOiAoKSA9PiAkWm9kVGVtcGxhdGVMaXRlcmFsLAogICRab2RUcmFuc2Zvcm06ICgpID0+ICRab2RUcmFuc2Zvcm0sCiAgJFpvZFR1cGxlOiAoKSA9PiAkWm9kVHVwbGUsCiAgJFpvZFR5cGU6ICgpID0+ICRab2RUeXBlLAogICRab2RVTElEOiAoKSA9PiAkWm9kVUxJRCwKICAkWm9kVVJMOiAoKSA9PiAkWm9kVVJMLAogICRab2RVVUlEOiAoKSA9PiAkWm9kVVVJRCwKICAkWm9kVW5kZWZpbmVkOiAoKSA9PiAkWm9kVW5kZWZpbmVkLAogICRab2RVbmlvbjogKCkgPT4gJFpvZFVuaW9uLAogICRab2RVbmtub3duOiAoKSA9PiAkWm9kVW5rbm93biwKICAkWm9kVm9pZDogKCkgPT4gJFpvZFZvaWQsCiAgJFpvZFhJRDogKCkgPT4gJFpvZFhJRCwKICAkYnJhbmQ6ICgpID0+ICRicmFuZCwKICAkY29uc3RydWN0b3I6ICgpID0+ICRjb25zdHJ1Y3RvciwKICAkaW5wdXQ6ICgpID0+ICRpbnB1dCwKICAkb3V0cHV0OiAoKSA9PiAkb3V0cHV0LAogIERvYzogKCkgPT4gRG9jLAogIEpTT05TY2hlbWE6ICgpID0+IGpzb25fc2NoZW1hX2V4cG9ydHMsCiAgSlNPTlNjaGVtYUdlbmVyYXRvcjogKCkgPT4gSlNPTlNjaGVtYUdlbmVyYXRvciwKICBORVZFUjogKCkgPT4gTkVWRVIsCiAgVGltZVByZWNpc2lvbjogKCkgPT4gVGltZVByZWNpc2lvbiwKICBfYW55OiAoKSA9PiBfYW55LAogIF9hcnJheTogKCkgPT4gX2FycmF5LAogIF9iYXNlNjQ6ICgpID0+IF9iYXNlNjQsCiAgX2Jhc2U2NHVybDogKCkgPT4gX2Jhc2U2NHVybCwKICBfYmlnaW50OiAoKSA9PiBfYmlnaW50LAogIF9ib29sZWFuOiAoKSA9PiBfYm9vbGVhbiwKICBfY2F0Y2g6ICgpID0+IF9jYXRjaCwKICBfY2hlY2s6ICgpID0+IF9jaGVjaywKICBfY2lkcnY0OiAoKSA9PiBfY2lkcnY0LAogIF9jaWRydjY6ICgpID0+IF9jaWRydjYsCiAgX2NvZXJjZWRCaWdpbnQ6ICgpID0+IF9jb2VyY2VkQmlnaW50LAogIF9jb2VyY2VkQm9vbGVhbjogKCkgPT4gX2NvZXJjZWRCb29sZWFuLAogIF9jb2VyY2VkRGF0ZTogKCkgPT4gX2NvZXJjZWREYXRlLAogIF9jb2VyY2VkTnVtYmVyOiAoKSA9PiBfY29lcmNlZE51bWJlciwKICBfY29lcmNlZFN0cmluZzogKCkgPT4gX2NvZXJjZWRTdHJpbmcsCiAgX2N1aWQ6ICgpID0+IF9jdWlkLAogIF9jdWlkMjogKCkgPT4gX2N1aWQyLAogIF9jdXN0b206ICgpID0+IF9jdXN0b20sCiAgX2RhdGU6ICgpID0+IF9kYXRlLAogIF9kZWNvZGU6ICgpID0+IF9kZWNvZGUsCiAgX2RlY29kZUFzeW5jOiAoKSA9PiBfZGVjb2RlQXN5bmMsCiAgX2RlZmF1bHQ6ICgpID0+IF9kZWZhdWx0LAogIF9kaXNjcmltaW5hdGVkVW5pb246ICgpID0+IF9kaXNjcmltaW5hdGVkVW5pb24sCiAgX2UxNjQ6ICgpID0+IF9lMTY0LAogIF9lbWFpbDogKCkgPT4gX2VtYWlsLAogIF9lbW9qaTogKCkgPT4gX2Vtb2ppMiwKICBfZW5jb2RlOiAoKSA9PiBfZW5jb2RlLAogIF9lbmNvZGVBc3luYzogKCkgPT4gX2VuY29kZUFzeW5jLAogIF9lbmRzV2l0aDogKCkgPT4gX2VuZHNXaXRoLAogIF9lbnVtOiAoKSA9PiBfZW51bSwKICBfZmlsZTogKCkgPT4gX2ZpbGUsCiAgX2Zsb2F0MzI6ICgpID0+IF9mbG9hdDMyLAogIF9mbG9hdDY0OiAoKSA9PiBfZmxvYXQ2NCwKICBfZ3Q6ICgpID0+IF9ndCwKICBfZ3RlOiAoKSA9PiBfZ3RlLAogIF9ndWlkOiAoKSA9PiBfZ3VpZCwKICBfaW5jbHVkZXM6ICgpID0+IF9pbmNsdWRlcywKICBfaW50OiAoKSA9PiBfaW50LAogIF9pbnQzMjogKCkgPT4gX2ludDMyLAogIF9pbnQ2NDogKCkgPT4gX2ludDY0LAogIF9pbnRlcnNlY3Rpb246ICgpID0+IF9pbnRlcnNlY3Rpb24sCiAgX2lwdjQ6ICgpID0+IF9pcHY0LAogIF9pcHY2OiAoKSA9PiBfaXB2NiwKICBfaXNvRGF0ZTogKCkgPT4gX2lzb0RhdGUsCiAgX2lzb0RhdGVUaW1lOiAoKSA9PiBfaXNvRGF0ZVRpbWUsCiAgX2lzb0R1cmF0aW9uOiAoKSA9PiBfaXNvRHVyYXRpb24sCiAgX2lzb1RpbWU6ICgpID0+IF9pc29UaW1lLAogIF9qd3Q6ICgpID0+IF9qd3QsCiAgX2tzdWlkOiAoKSA9PiBfa3N1aWQsCiAgX2xhenk6ICgpID0+IF9sYXp5LAogIF9sZW5ndGg6ICgpID0+IF9sZW5ndGgsCiAgX2xpdGVyYWw6ICgpID0+IF9saXRlcmFsLAogIF9sb3dlcmNhc2U6ICgpID0+IF9sb3dlcmNhc2UsCiAgX2x0OiAoKSA9PiBfbHQsCiAgX2x0ZTogKCkgPT4gX2x0ZSwKICBfbWFwOiAoKSA9PiBfbWFwLAogIF9tYXg6ICgpID0+IF9sdGUsCiAgX21heExlbmd0aDogKCkgPT4gX21heExlbmd0aCwKICBfbWF4U2l6ZTogKCkgPT4gX21heFNpemUsCiAgX21pbWU6ICgpID0+IF9taW1lLAogIF9taW46ICgpID0+IF9ndGUsCiAgX21pbkxlbmd0aDogKCkgPT4gX21pbkxlbmd0aCwKICBfbWluU2l6ZTogKCkgPT4gX21pblNpemUsCiAgX211bHRpcGxlT2Y6ICgpID0+IF9tdWx0aXBsZU9mLAogIF9uYW46ICgpID0+IF9uYW4sCiAgX25hbm9pZDogKCkgPT4gX25hbm9pZCwKICBfbmF0aXZlRW51bTogKCkgPT4gX25hdGl2ZUVudW0sCiAgX25lZ2F0aXZlOiAoKSA9PiBfbmVnYXRpdmUsCiAgX25ldmVyOiAoKSA9PiBfbmV2ZXIsCiAgX25vbm5lZ2F0aXZlOiAoKSA9PiBfbm9ubmVnYXRpdmUsCiAgX25vbm9wdGlvbmFsOiAoKSA9PiBfbm9ub3B0aW9uYWwsCiAgX25vbnBvc2l0aXZlOiAoKSA9PiBfbm9ucG9zaXRpdmUsCiAgX25vcm1hbGl6ZTogKCkgPT4gX25vcm1hbGl6ZSwKICBfbnVsbDogKCkgPT4gX251bGwyLAogIF9udWxsYWJsZTogKCkgPT4gX251bGxhYmxlLAogIF9udW1iZXI6ICgpID0+IF9udW1iZXIsCiAgX29wdGlvbmFsOiAoKSA9PiBfb3B0aW9uYWwsCiAgX292ZXJ3cml0ZTogKCkgPT4gX292ZXJ3cml0ZSwKICBfcGFyc2U6ICgpID0+IF9wYXJzZSwKICBfcGFyc2VBc3luYzogKCkgPT4gX3BhcnNlQXN5bmMsCiAgX3BpcGU6ICgpID0+IF9waXBlLAogIF9wb3NpdGl2ZTogKCkgPT4gX3Bvc2l0aXZlLAogIF9wcm9taXNlOiAoKSA9PiBfcHJvbWlzZSwKICBfcHJvcGVydHk6ICgpID0+IF9wcm9wZXJ0eSwKICBfcmVhZG9ubHk6ICgpID0+IF9yZWFkb25seSwKICBfcmVjb3JkOiAoKSA9PiBfcmVjb3JkLAogIF9yZWZpbmU6ICgpID0+IF9yZWZpbmUsCiAgX3JlZ2V4OiAoKSA9PiBfcmVnZXgsCiAgX3NhZmVEZWNvZGU6ICgpID0+IF9zYWZlRGVjb2RlLAogIF9zYWZlRGVjb2RlQXN5bmM6ICgpID0+IF9zYWZlRGVjb2RlQXN5bmMsCiAgX3NhZmVFbmNvZGU6ICgpID0+IF9zYWZlRW5jb2RlLAogIF9zYWZlRW5jb2RlQXN5bmM6ICgpID0+IF9zYWZlRW5jb2RlQXN5bmMsCiAgX3NhZmVQYXJzZTogKCkgPT4gX3NhZmVQYXJzZSwKICBfc2FmZVBhcnNlQXN5bmM6ICgpID0+IF9zYWZlUGFyc2VBc3luYywKICBfc2V0OiAoKSA9PiBfc2V0LAogIF9zaXplOiAoKSA9PiBfc2l6ZSwKICBfc3RhcnRzV2l0aDogKCkgPT4gX3N0YXJ0c1dpdGgsCiAgX3N0cmluZzogKCkgPT4gX3N0cmluZywKICBfc3RyaW5nRm9ybWF0OiAoKSA9PiBfc3RyaW5nRm9ybWF0LAogIF9zdHJpbmdib29sOiAoKSA9PiBfc3RyaW5nYm9vbCwKICBfc3VjY2VzczogKCkgPT4gX3N1Y2Nlc3MsCiAgX3N1cGVyUmVmaW5lOiAoKSA9PiBfc3VwZXJSZWZpbmUsCiAgX3N5bWJvbDogKCkgPT4gX3N5bWJvbCwKICBfdGVtcGxhdGVMaXRlcmFsOiAoKSA9PiBfdGVtcGxhdGVMaXRlcmFsLAogIF90b0xvd2VyQ2FzZTogKCkgPT4gX3RvTG93ZXJDYXNlLAogIF90b1VwcGVyQ2FzZTogKCkgPT4gX3RvVXBwZXJDYXNlLAogIF90cmFuc2Zvcm06ICgpID0+IF90cmFuc2Zvcm0sCiAgX3RyaW06ICgpID0+IF90cmltLAogIF90dXBsZTogKCkgPT4gX3R1cGxlLAogIF91aW50MzI6ICgpID0+IF91aW50MzIsCiAgX3VpbnQ2NDogKCkgPT4gX3VpbnQ2NCwKICBfdWxpZDogKCkgPT4gX3VsaWQsCiAgX3VuZGVmaW5lZDogKCkgPT4gX3VuZGVmaW5lZDIsCiAgX3VuaW9uOiAoKSA9PiBfdW5pb24sCiAgX3Vua25vd246ICgpID0+IF91bmtub3duLAogIF91cHBlcmNhc2U6ICgpID0+IF91cHBlcmNhc2UsCiAgX3VybDogKCkgPT4gX3VybCwKICBfdXVpZDogKCkgPT4gX3V1aWQsCiAgX3V1aWR2NDogKCkgPT4gX3V1aWR2NCwKICBfdXVpZHY2OiAoKSA9PiBfdXVpZHY2LAogIF91dWlkdjc6ICgpID0+IF91dWlkdjcsCiAgX3ZvaWQ6ICgpID0+IF92b2lkLAogIF94aWQ6ICgpID0+IF94aWQsCiAgY2xvbmU6ICgpID0+IGNsb25lLAogIGNvbmZpZzogKCkgPT4gY29uZmlnLAogIGRlY29kZTogKCkgPT4gZGVjb2RlLAogIGRlY29kZUFzeW5jOiAoKSA9PiBkZWNvZGVBc3luYywKICBlbmNvZGU6ICgpID0+IGVuY29kZSwKICBlbmNvZGVBc3luYzogKCkgPT4gZW5jb2RlQXN5bmMsCiAgZmxhdHRlbkVycm9yOiAoKSA9PiBmbGF0dGVuRXJyb3IsCiAgZm9ybWF0RXJyb3I6ICgpID0+IGZvcm1hdEVycm9yLAogIGdsb2JhbENvbmZpZzogKCkgPT4gZ2xvYmFsQ29uZmlnLAogIGdsb2JhbFJlZ2lzdHJ5OiAoKSA9PiBnbG9iYWxSZWdpc3RyeSwKICBpc1ZhbGlkQmFzZTY0OiAoKSA9PiBpc1ZhbGlkQmFzZTY0LAogIGlzVmFsaWRCYXNlNjRVUkw6ICgpID0+IGlzVmFsaWRCYXNlNjRVUkwsCiAgaXNWYWxpZEpXVDogKCkgPT4gaXNWYWxpZEpXVCwKICBsb2NhbGVzOiAoKSA9PiBsb2NhbGVzX2V4cG9ydHMsCiAgcGFyc2U6ICgpID0+IHBhcnNlLAogIHBhcnNlQXN5bmM6ICgpID0+IHBhcnNlQXN5bmMsCiAgcHJldHRpZnlFcnJvcjogKCkgPT4gcHJldHRpZnlFcnJvciwKICByZWdleGVzOiAoKSA9PiByZWdleGVzX2V4cG9ydHMsCiAgcmVnaXN0cnk6ICgpID0+IHJlZ2lzdHJ5LAogIHNhZmVEZWNvZGU6ICgpID0+IHNhZmVEZWNvZGUsCiAgc2FmZURlY29kZUFzeW5jOiAoKSA9PiBzYWZlRGVjb2RlQXN5bmMsCiAgc2FmZUVuY29kZTogKCkgPT4gc2FmZUVuY29kZSwKICBzYWZlRW5jb2RlQXN5bmM6ICgpID0+IHNhZmVFbmNvZGVBc3luYywKICBzYWZlUGFyc2U6ICgpID0+IHNhZmVQYXJzZSwKICBzYWZlUGFyc2VBc3luYzogKCkgPT4gc2FmZVBhcnNlQXN5bmMsCiAgdG9Eb3RQYXRoOiAoKSA9PiB0b0RvdFBhdGgsCiAgdG9KU09OU2NoZW1hOiAoKSA9PiB0b0pTT05TY2hlbWEsCiAgdHJlZWlmeUVycm9yOiAoKSA9PiB0cmVlaWZ5RXJyb3IsCiAgdXRpbDogKCkgPT4gdXRpbF9leHBvcnRzLAogIHZlcnNpb246ICgpID0+IHZlcnNpb24KfSk7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2NvcmUvY29yZS5qcwp2YXIgTkVWRVIgPSBPYmplY3QuZnJlZXplKHsKICBzdGF0dXM6ICJhYm9ydGVkIgp9KTsKZnVuY3Rpb24gJGNvbnN0cnVjdG9yKG5hbWUsIGluaXRpYWxpemVyMywgcGFyYW1zKSB7CiAgZnVuY3Rpb24gaW5pdChpbnN0LCBkZWYpIHsKICAgIHZhciBfYTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbnN0LCAiX3pvZCIsIHsKICAgICAgdmFsdWU6IGluc3QuX3pvZCA/PyB7fSwKICAgICAgZW51bWVyYWJsZTogZmFsc2UKICAgIH0pOwogICAgKF9hID0gaW5zdC5fem9kKS50cmFpdHMgPz8gKF9hLnRyYWl0cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCkpOwogICAgaW5zdC5fem9kLnRyYWl0cy5hZGQobmFtZSk7CiAgICBpbml0aWFsaXplcjMoaW5zdCwgZGVmKTsKICAgIGZvciAoY29uc3QgayBpbiBfLnByb3RvdHlwZSkgewogICAgICBpZiAoIShrIGluIGluc3QpKQogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbnN0LCBrLCB7IHZhbHVlOiBfLnByb3RvdHlwZVtrXS5iaW5kKGluc3QpIH0pOwogICAgfQogICAgaW5zdC5fem9kLmNvbnN0ciA9IF87CiAgICBpbnN0Ll96b2QuZGVmID0gZGVmOwogIH0KICBjb25zdCBQYXJlbnQgPSAocGFyYW1zID09IG51bGwgPyB2b2lkIDAgOiBwYXJhbXMuUGFyZW50KSA/PyBPYmplY3Q7CiAgY2xhc3MgRGVmaW5pdGlvbiBleHRlbmRzIFBhcmVudCB7CiAgfQogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWZpbml0aW9uLCAibmFtZSIsIHsgdmFsdWU6IG5hbWUgfSk7CiAgZnVuY3Rpb24gXyhkZWYpIHsKICAgIHZhciBfYTsKICAgIGNvbnN0IGluc3QgPSAocGFyYW1zID09IG51bGwgPyB2b2lkIDAgOiBwYXJhbXMuUGFyZW50KSA/IG5ldyBEZWZpbml0aW9uKCkgOiB0aGlzOwogICAgaW5pdChpbnN0LCBkZWYpOwogICAgKF9hID0gaW5zdC5fem9kKS5kZWZlcnJlZCA/PyAoX2EuZGVmZXJyZWQgPSBbXSk7CiAgICBmb3IgKGNvbnN0IGZuIG9mIGluc3QuX3pvZC5kZWZlcnJlZCkgewogICAgICBmbigpOwogICAgfQogICAgcmV0dXJuIGluc3Q7CiAgfQogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfLCAiaW5pdCIsIHsgdmFsdWU6IGluaXQgfSk7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF8sIFN5bWJvbC5oYXNJbnN0YW5jZSwgewogICAgdmFsdWU6IChpbnN0KSA9PiB7CiAgICAgIHZhciBfYSwgX2I7CiAgICAgIGlmICgocGFyYW1zID09IG51bGwgPyB2b2lkIDAgOiBwYXJhbXMuUGFyZW50KSAmJiBpbnN0IGluc3RhbmNlb2YgcGFyYW1zLlBhcmVudCkKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgcmV0dXJuIChfYiA9IChfYSA9IGluc3QgPT0gbnVsbCA/IHZvaWQgMCA6IGluc3QuX3pvZCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnRyYWl0cykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmhhcyhuYW1lKTsKICAgIH0KICB9KTsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoXywgIm5hbWUiLCB7IHZhbHVlOiBuYW1lIH0pOwogIHJldHVybiBfOwp9CnZhciAkYnJhbmQgPSBTeW1ib2woInpvZF9icmFuZCIpOwp2YXIgJFpvZEFzeW5jRXJyb3IgPSBjbGFzcyBleHRlbmRzIEVycm9yIHsKICBjb25zdHJ1Y3RvcigpIHsKICAgIHN1cGVyKGBFbmNvdW50ZXJlZCBQcm9taXNlIGR1cmluZyBzeW5jaHJvbm91cyBwYXJzZS4gVXNlIC5wYXJzZUFzeW5jKCkgaW5zdGVhZC5gKTsKICB9Cn07CnZhciAkWm9kRW5jb2RlRXJyb3IgPSBjbGFzcyBleHRlbmRzIEVycm9yIHsKICBjb25zdHJ1Y3RvcihuYW1lKSB7CiAgICBzdXBlcihgRW5jb3VudGVyZWQgdW5pZGlyZWN0aW9uYWwgdHJhbnNmb3JtIGR1cmluZyBlbmNvZGU6ICR7bmFtZX1gKTsKICAgIHRoaXMubmFtZSA9ICJab2RFbmNvZGVFcnJvciI7CiAgfQp9Owp2YXIgZ2xvYmFsQ29uZmlnID0ge307CmZ1bmN0aW9uIGNvbmZpZyhuZXdDb25maWcpIHsKICBpZiAobmV3Q29uZmlnKQogICAgT2JqZWN0LmFzc2lnbihnbG9iYWxDb25maWcsIG5ld0NvbmZpZyk7CiAgcmV0dXJuIGdsb2JhbENvbmZpZzsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL3V0aWwuanMKdmFyIHV0aWxfZXhwb3J0cyA9IHt9OwpfX2V4cG9ydCh1dGlsX2V4cG9ydHMsIHsKICBCSUdJTlRfRk9STUFUX1JBTkdFUzogKCkgPT4gQklHSU5UX0ZPUk1BVF9SQU5HRVMsCiAgQ2xhc3M6ICgpID0+IENsYXNzLAogIE5VTUJFUl9GT1JNQVRfUkFOR0VTOiAoKSA9PiBOVU1CRVJfRk9STUFUX1JBTkdFUywKICBhYm9ydGVkOiAoKSA9PiBhYm9ydGVkLAogIGFsbG93c0V2YWw6ICgpID0+IGFsbG93c0V2YWwsCiAgYXNzZXJ0OiAoKSA9PiBhc3NlcnQsCiAgYXNzZXJ0RXF1YWw6ICgpID0+IGFzc2VydEVxdWFsLAogIGFzc2VydElzOiAoKSA9PiBhc3NlcnRJcywKICBhc3NlcnROZXZlcjogKCkgPT4gYXNzZXJ0TmV2ZXIsCiAgYXNzZXJ0Tm90RXF1YWw6ICgpID0+IGFzc2VydE5vdEVxdWFsLAogIGFzc2lnblByb3A6ICgpID0+IGFzc2lnblByb3AsCiAgYmFzZTY0VG9VaW50OEFycmF5OiAoKSA9PiBiYXNlNjRUb1VpbnQ4QXJyYXksCiAgYmFzZTY0dXJsVG9VaW50OEFycmF5OiAoKSA9PiBiYXNlNjR1cmxUb1VpbnQ4QXJyYXksCiAgY2FjaGVkOiAoKSA9PiBjYWNoZWQsCiAgY2FwdHVyZVN0YWNrVHJhY2U6ICgpID0+IGNhcHR1cmVTdGFja1RyYWNlLAogIGNsZWFuRW51bTogKCkgPT4gY2xlYW5FbnVtLAogIGNsZWFuUmVnZXg6ICgpID0+IGNsZWFuUmVnZXgsCiAgY2xvbmU6ICgpID0+IGNsb25lLAogIGNsb25lRGVmOiAoKSA9PiBjbG9uZURlZiwKICBjcmVhdGVUcmFuc3BhcmVudFByb3h5OiAoKSA9PiBjcmVhdGVUcmFuc3BhcmVudFByb3h5LAogIGRlZmluZUxhenk6ICgpID0+IGRlZmluZUxhenksCiAgZXNjOiAoKSA9PiBlc2MsCiAgZXNjYXBlUmVnZXg6ICgpID0+IGVzY2FwZVJlZ2V4LAogIGV4dGVuZDogKCkgPT4gZXh0ZW5kLAogIGZpbmFsaXplSXNzdWU6ICgpID0+IGZpbmFsaXplSXNzdWUsCiAgZmxvYXRTYWZlUmVtYWluZGVyOiAoKSA9PiBmbG9hdFNhZmVSZW1haW5kZXIsCiAgZ2V0RWxlbWVudEF0UGF0aDogKCkgPT4gZ2V0RWxlbWVudEF0UGF0aCwKICBnZXRFbnVtVmFsdWVzOiAoKSA9PiBnZXRFbnVtVmFsdWVzLAogIGdldExlbmd0aGFibGVPcmlnaW46ICgpID0+IGdldExlbmd0aGFibGVPcmlnaW4sCiAgZ2V0UGFyc2VkVHlwZTogKCkgPT4gZ2V0UGFyc2VkVHlwZSwKICBnZXRTaXphYmxlT3JpZ2luOiAoKSA9PiBnZXRTaXphYmxlT3JpZ2luLAogIGhleFRvVWludDhBcnJheTogKCkgPT4gaGV4VG9VaW50OEFycmF5LAogIGlzT2JqZWN0OiAoKSA9PiBpc09iamVjdCwKICBpc1BsYWluT2JqZWN0OiAoKSA9PiBpc1BsYWluT2JqZWN0LAogIGlzc3VlOiAoKSA9PiBpc3N1ZSwKICBqb2luVmFsdWVzOiAoKSA9PiBqb2luVmFsdWVzLAogIGpzb25TdHJpbmdpZnlSZXBsYWNlcjogKCkgPT4ganNvblN0cmluZ2lmeVJlcGxhY2VyLAogIG1lcmdlOiAoKSA9PiBtZXJnZSwKICBtZXJnZURlZnM6ICgpID0+IG1lcmdlRGVmcywKICBub3JtYWxpemVQYXJhbXM6ICgpID0+IG5vcm1hbGl6ZVBhcmFtcywKICBudWxsaXNoOiAoKSA9PiBudWxsaXNoLAogIG51bUtleXM6ICgpID0+IG51bUtleXMsCiAgb2JqZWN0Q2xvbmU6ICgpID0+IG9iamVjdENsb25lLAogIG9taXQ6ICgpID0+IG9taXQsCiAgb3B0aW9uYWxLZXlzOiAoKSA9PiBvcHRpb25hbEtleXMsCiAgcGFydGlhbDogKCkgPT4gcGFydGlhbCwKICBwaWNrOiAoKSA9PiBwaWNrLAogIHByZWZpeElzc3VlczogKCkgPT4gcHJlZml4SXNzdWVzLAogIHByaW1pdGl2ZVR5cGVzOiAoKSA9PiBwcmltaXRpdmVUeXBlcywKICBwcm9taXNlQWxsT2JqZWN0OiAoKSA9PiBwcm9taXNlQWxsT2JqZWN0LAogIHByb3BlcnR5S2V5VHlwZXM6ICgpID0+IHByb3BlcnR5S2V5VHlwZXMsCiAgcmFuZG9tU3RyaW5nOiAoKSA9PiByYW5kb21TdHJpbmcsCiAgcmVxdWlyZWQ6ICgpID0+IHJlcXVpcmVkLAogIHNhZmVFeHRlbmQ6ICgpID0+IHNhZmVFeHRlbmQsCiAgc2hhbGxvd0Nsb25lOiAoKSA9PiBzaGFsbG93Q2xvbmUsCiAgc3RyaW5naWZ5UHJpbWl0aXZlOiAoKSA9PiBzdHJpbmdpZnlQcmltaXRpdmUsCiAgdWludDhBcnJheVRvQmFzZTY0OiAoKSA9PiB1aW50OEFycmF5VG9CYXNlNjQsCiAgdWludDhBcnJheVRvQmFzZTY0dXJsOiAoKSA9PiB1aW50OEFycmF5VG9CYXNlNjR1cmwsCiAgdWludDhBcnJheVRvSGV4OiAoKSA9PiB1aW50OEFycmF5VG9IZXgsCiAgdW53cmFwTWVzc2FnZTogKCkgPT4gdW53cmFwTWVzc2FnZQp9KTsKZnVuY3Rpb24gYXNzZXJ0RXF1YWwodmFsKSB7CiAgcmV0dXJuIHZhbDsKfQpmdW5jdGlvbiBhc3NlcnROb3RFcXVhbCh2YWwpIHsKICByZXR1cm4gdmFsOwp9CmZ1bmN0aW9uIGFzc2VydElzKF9hcmcpIHsKfQpmdW5jdGlvbiBhc3NlcnROZXZlcihfeCkgewogIHRocm93IG5ldyBFcnJvcigpOwp9CmZ1bmN0aW9uIGFzc2VydChfKSB7Cn0KZnVuY3Rpb24gZ2V0RW51bVZhbHVlcyhlbnRyaWVzKSB7CiAgY29uc3QgbnVtZXJpY1ZhbHVlcyA9IE9iamVjdC52YWx1ZXMoZW50cmllcykuZmlsdGVyKCh2KSA9PiB0eXBlb2YgdiA9PT0gIm51bWJlciIpOwogIGNvbnN0IHZhbHVlcyA9IE9iamVjdC5lbnRyaWVzKGVudHJpZXMpLmZpbHRlcigoW2ssIF9dKSA9PiBudW1lcmljVmFsdWVzLmluZGV4T2YoK2spID09PSAtMSkubWFwKChbXywgdl0pID0+IHYpOwogIHJldHVybiB2YWx1ZXM7Cn0KZnVuY3Rpb24gam9pblZhbHVlcyhhcnJheTIsIHNlcGFyYXRvciA9ICJ8IikgewogIHJldHVybiBhcnJheTIubWFwKCh2YWwpID0+IHN0cmluZ2lmeVByaW1pdGl2ZSh2YWwpKS5qb2luKHNlcGFyYXRvcik7Cn0KZnVuY3Rpb24ganNvblN0cmluZ2lmeVJlcGxhY2VyKF8sIHZhbHVlKSB7CiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gImJpZ2ludCIpCiAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTsKICByZXR1cm4gdmFsdWU7Cn0KZnVuY3Rpb24gY2FjaGVkKGdldHRlcikgewogIGNvbnN0IHNldDIgPSBmYWxzZTsKICByZXR1cm4gewogICAgZ2V0IHZhbHVlKCkgewogICAgICBpZiAoIXNldDIpIHsKICAgICAgICBjb25zdCB2YWx1ZSA9IGdldHRlcigpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidmFsdWUiLCB7IHZhbHVlIH0pOwogICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgfQogICAgICB0aHJvdyBuZXcgRXJyb3IoImNhY2hlZCB2YWx1ZSBhbHJlYWR5IHNldCIpOwogICAgfQogIH07Cn0KZnVuY3Rpb24gbnVsbGlzaChpbnB1dCkgewogIHJldHVybiBpbnB1dCA9PT0gbnVsbCB8fCBpbnB1dCA9PT0gdm9pZCAwOwp9CmZ1bmN0aW9uIGNsZWFuUmVnZXgoc291cmNlKSB7CiAgY29uc3Qgc3RhcnQgPSBzb3VyY2Uuc3RhcnRzV2l0aCgiXiIpID8gMSA6IDA7CiAgY29uc3QgZW5kID0gc291cmNlLmVuZHNXaXRoKCIkIikgPyBzb3VyY2UubGVuZ3RoIC0gMSA6IHNvdXJjZS5sZW5ndGg7CiAgcmV0dXJuIHNvdXJjZS5zbGljZShzdGFydCwgZW5kKTsKfQpmdW5jdGlvbiBmbG9hdFNhZmVSZW1haW5kZXIodmFsLCBzdGVwKSB7CiAgY29uc3QgdmFsRGVjQ291bnQgPSAodmFsLnRvU3RyaW5nKCkuc3BsaXQoIi4iKVsxXSB8fCAiIikubGVuZ3RoOwogIGNvbnN0IHN0ZXBTdHJpbmcgPSBzdGVwLnRvU3RyaW5nKCk7CiAgbGV0IHN0ZXBEZWNDb3VudCA9IChzdGVwU3RyaW5nLnNwbGl0KCIuIilbMV0gfHwgIiIpLmxlbmd0aDsKICBpZiAoc3RlcERlY0NvdW50ID09PSAwICYmIC9cZD9lLVxkPy8udGVzdChzdGVwU3RyaW5nKSkgewogICAgY29uc3QgbWF0Y2ggPSBzdGVwU3RyaW5nLm1hdGNoKC9cZD9lLShcZD8pLyk7CiAgICBpZiAobWF0Y2ggPT0gbnVsbCA/IHZvaWQgMCA6IG1hdGNoWzFdKSB7CiAgICAgIHN0ZXBEZWNDb3VudCA9IE51bWJlci5wYXJzZUludChtYXRjaFsxXSk7CiAgICB9CiAgfQogIGNvbnN0IGRlY0NvdW50ID0gdmFsRGVjQ291bnQgPiBzdGVwRGVjQ291bnQgPyB2YWxEZWNDb3VudCA6IHN0ZXBEZWNDb3VudDsKICBjb25zdCB2YWxJbnQgPSBOdW1iZXIucGFyc2VJbnQodmFsLnRvRml4ZWQoZGVjQ291bnQpLnJlcGxhY2UoIi4iLCAiIikpOwogIGNvbnN0IHN0ZXBJbnQgPSBOdW1iZXIucGFyc2VJbnQoc3RlcC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKCIuIiwgIiIpKTsKICByZXR1cm4gdmFsSW50ICUgc3RlcEludCAvIDEwICoqIGRlY0NvdW50Owp9CnZhciBFVkFMVUFUSU5HID0gU3ltYm9sKCJldmFsdWF0aW5nIik7CmZ1bmN0aW9uIGRlZmluZUxhenkob2JqZWN0Miwga2V5LCBnZXR0ZXIpIHsKICBsZXQgdmFsdWUgPSB2b2lkIDA7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iamVjdDIsIGtleSwgewogICAgZ2V0KCkgewogICAgICBpZiAodmFsdWUgPT09IEVWQUxVQVRJTkcpIHsKICAgICAgICByZXR1cm4gdm9pZCAwOwogICAgICB9CiAgICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgdmFsdWUgPSBFVkFMVUFUSU5HOwogICAgICAgIHZhbHVlID0gZ2V0dGVyKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHZhbHVlOwogICAgfSwKICAgIHNldCh2KSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmplY3QyLCBrZXksIHsKICAgICAgICB2YWx1ZTogdgogICAgICAgIC8vIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgfSk7CiAgICB9LAogICAgY29uZmlndXJhYmxlOiB0cnVlCiAgfSk7Cn0KZnVuY3Rpb24gb2JqZWN0Q2xvbmUob2JqKSB7CiAgcmV0dXJuIE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaiksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG9iaikpOwp9CmZ1bmN0aW9uIGFzc2lnblByb3AodGFyZ2V0LCBwcm9wLCB2YWx1ZSkgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3AsIHsKICAgIHZhbHVlLAogICAgd3JpdGFibGU6IHRydWUsCiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlCiAgfSk7Cn0KZnVuY3Rpb24gbWVyZ2VEZWZzKC4uLmRlZnMpIHsKICBjb25zdCBtZXJnZWREZXNjcmlwdG9ycyA9IHt9OwogIGZvciAoY29uc3QgZGVmIG9mIGRlZnMpIHsKICAgIGNvbnN0IGRlc2NyaXB0b3JzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoZGVmKTsKICAgIE9iamVjdC5hc3NpZ24obWVyZ2VkRGVzY3JpcHRvcnMsIGRlc2NyaXB0b3JzKTsKICB9CiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHt9LCBtZXJnZWREZXNjcmlwdG9ycyk7Cn0KZnVuY3Rpb24gY2xvbmVEZWYoc2NoZW1hKSB7CiAgcmV0dXJuIG1lcmdlRGVmcyhzY2hlbWEuX3pvZC5kZWYpOwp9CmZ1bmN0aW9uIGdldEVsZW1lbnRBdFBhdGgob2JqLCBwYXRoKSB7CiAgaWYgKCFwYXRoKQogICAgcmV0dXJuIG9iajsKICByZXR1cm4gcGF0aC5yZWR1Y2UoKGFjYywga2V5KSA9PiBhY2MgPT0gbnVsbCA/IHZvaWQgMCA6IGFjY1trZXldLCBvYmopOwp9CmZ1bmN0aW9uIHByb21pc2VBbGxPYmplY3QocHJvbWlzZXNPYmopIHsKICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocHJvbWlzZXNPYmopOwogIGNvbnN0IHByb21pc2VzID0ga2V5cy5tYXAoKGtleSkgPT4gcHJvbWlzZXNPYmpba2V5XSk7CiAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKChyZXN1bHRzKSA9PiB7CiAgICBjb25zdCByZXNvbHZlZE9iaiA9IHt9OwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHJlc29sdmVkT2JqW2tleXNbaV1dID0gcmVzdWx0c1tpXTsKICAgIH0KICAgIHJldHVybiByZXNvbHZlZE9iajsKICB9KTsKfQpmdW5jdGlvbiByYW5kb21TdHJpbmcobGVuZ3RoID0gMTApIHsKICBjb25zdCBjaGFycyA9ICJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiI7CiAgbGV0IHN0ciA9ICIiOwogIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgIHN0ciArPSBjaGFyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFycy5sZW5ndGgpXTsKICB9CiAgcmV0dXJuIHN0cjsKfQpmdW5jdGlvbiBlc2Moc3RyKSB7CiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHN0cik7Cn0KdmFyIGNhcHR1cmVTdGFja1RyYWNlID0gImNhcHR1cmVTdGFja1RyYWNlIiBpbiBFcnJvciA/IEVycm9yLmNhcHR1cmVTdGFja1RyYWNlIDogKC4uLl9hcmdzKSA9PiB7Cn07CmZ1bmN0aW9uIGlzT2JqZWN0KGRhdGEpIHsKICByZXR1cm4gdHlwZW9mIGRhdGEgPT09ICJvYmplY3QiICYmIGRhdGEgIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkoZGF0YSk7Cn0KdmFyIGFsbG93c0V2YWwgPSBjYWNoZWQoKCkgPT4gewogIHZhciBfYTsKICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gInVuZGVmaW5lZCIgJiYgKChfYSA9IG5hdmlnYXRvciA9PSBudWxsID8gdm9pZCAwIDogbmF2aWdhdG9yLnVzZXJBZ2VudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmluY2x1ZGVzKCJDbG91ZGZsYXJlIikpKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIHRyeSB7CiAgICBjb25zdCBGID0gRnVuY3Rpb247CiAgICBuZXcgRigiIik7CiAgICByZXR1cm4gdHJ1ZTsKICB9IGNhdGNoIChfKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQp9KTsKZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvKSB7CiAgaWYgKGlzT2JqZWN0KG8pID09PSBmYWxzZSkKICAgIHJldHVybiBmYWxzZTsKICBjb25zdCBjdG9yID0gby5jb25zdHJ1Y3RvcjsKICBpZiAoY3RvciA9PT0gdm9pZCAwKQogICAgcmV0dXJuIHRydWU7CiAgY29uc3QgcHJvdCA9IGN0b3IucHJvdG90eXBlOwogIGlmIChpc09iamVjdChwcm90KSA9PT0gZmFsc2UpCiAgICByZXR1cm4gZmFsc2U7CiAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwcm90LCAiaXNQcm90b3R5cGVPZiIpID09PSBmYWxzZSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICByZXR1cm4gdHJ1ZTsKfQpmdW5jdGlvbiBzaGFsbG93Q2xvbmUobykgewogIGlmIChpc1BsYWluT2JqZWN0KG8pKQogICAgcmV0dXJuIHsgLi4ubyB9OwogIGlmIChBcnJheS5pc0FycmF5KG8pKQogICAgcmV0dXJuIFsuLi5vXTsKICByZXR1cm4gbzsKfQpmdW5jdGlvbiBudW1LZXlzKGRhdGEpIHsKICBsZXQga2V5Q291bnQgPSAwOwogIGZvciAoY29uc3Qga2V5IGluIGRhdGEpIHsKICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YSwga2V5KSkgewogICAgICBrZXlDb3VudCsrOwogICAgfQogIH0KICByZXR1cm4ga2V5Q291bnQ7Cn0KdmFyIGdldFBhcnNlZFR5cGUgPSAoZGF0YSkgPT4gewogIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTsKICBzd2l0Y2ggKHQpIHsKICAgIGNhc2UgInVuZGVmaW5lZCI6CiAgICAgIHJldHVybiAidW5kZWZpbmVkIjsKICAgIGNhc2UgInN0cmluZyI6CiAgICAgIHJldHVybiAic3RyaW5nIjsKICAgIGNhc2UgIm51bWJlciI6CiAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0YSkgPyAibmFuIiA6ICJudW1iZXIiOwogICAgY2FzZSAiYm9vbGVhbiI6CiAgICAgIHJldHVybiAiYm9vbGVhbiI7CiAgICBjYXNlICJmdW5jdGlvbiI6CiAgICAgIHJldHVybiAiZnVuY3Rpb24iOwogICAgY2FzZSAiYmlnaW50IjoKICAgICAgcmV0dXJuICJiaWdpbnQiOwogICAgY2FzZSAic3ltYm9sIjoKICAgICAgcmV0dXJuICJzeW1ib2wiOwogICAgY2FzZSAib2JqZWN0IjoKICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHsKICAgICAgICByZXR1cm4gImFycmF5IjsKICAgICAgfQogICAgICBpZiAoZGF0YSA9PT0gbnVsbCkgewogICAgICAgIHJldHVybiAibnVsbCI7CiAgICAgIH0KICAgICAgaWYgKGRhdGEudGhlbiAmJiB0eXBlb2YgZGF0YS50aGVuID09PSAiZnVuY3Rpb24iICYmIGRhdGEuY2F0Y2ggJiYgdHlwZW9mIGRhdGEuY2F0Y2ggPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICByZXR1cm4gInByb21pc2UiOwogICAgICB9CiAgICAgIGlmICh0eXBlb2YgTWFwICE9PSAidW5kZWZpbmVkIiAmJiBkYXRhIGluc3RhbmNlb2YgTWFwKSB7CiAgICAgICAgcmV0dXJuICJtYXAiOwogICAgICB9CiAgICAgIGlmICh0eXBlb2YgU2V0ICE9PSAidW5kZWZpbmVkIiAmJiBkYXRhIGluc3RhbmNlb2YgU2V0KSB7CiAgICAgICAgcmV0dXJuICJzZXQiOwogICAgICB9CiAgICAgIGlmICh0eXBlb2YgRGF0ZSAhPT0gInVuZGVmaW5lZCIgJiYgZGF0YSBpbnN0YW5jZW9mIERhdGUpIHsKICAgICAgICByZXR1cm4gImRhdGUiOwogICAgICB9CiAgICAgIGlmICh0eXBlb2YgRmlsZSAhPT0gInVuZGVmaW5lZCIgJiYgZGF0YSBpbnN0YW5jZW9mIEZpbGUpIHsKICAgICAgICByZXR1cm4gImZpbGUiOwogICAgICB9CiAgICAgIHJldHVybiAib2JqZWN0IjsKICAgIGRlZmF1bHQ6CiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBkYXRhIHR5cGU6ICR7dH1gKTsKICB9Cn07CnZhciBwcm9wZXJ0eUtleVR5cGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoWyJzdHJpbmciLCAibnVtYmVyIiwgInN5bWJvbCJdKTsKdmFyIHByaW1pdGl2ZVR5cGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoWyJzdHJpbmciLCAibnVtYmVyIiwgImJpZ2ludCIsICJib29sZWFuIiwgInN5bWJvbCIsICJ1bmRlZmluZWQiXSk7CmZ1bmN0aW9uIGVzY2FwZVJlZ2V4KHN0cikgewogIHJldHVybiBzdHIucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xdXFxdL2csICJcXCQmIik7Cn0KZnVuY3Rpb24gY2xvbmUoaW5zdCwgZGVmLCBwYXJhbXMpIHsKICBjb25zdCBjbCA9IG5ldyBpbnN0Ll96b2QuY29uc3RyKGRlZiA/PyBpbnN0Ll96b2QuZGVmKTsKICBpZiAoIWRlZiB8fCAocGFyYW1zID09IG51bGwgPyB2b2lkIDAgOiBwYXJhbXMucGFyZW50KSkKICAgIGNsLl96b2QucGFyZW50ID0gaW5zdDsKICByZXR1cm4gY2w7Cn0KZnVuY3Rpb24gbm9ybWFsaXplUGFyYW1zKF9wYXJhbXMpIHsKICBjb25zdCBwYXJhbXMgPSBfcGFyYW1zOwogIGlmICghcGFyYW1zKQogICAgcmV0dXJuIHt9OwogIGlmICh0eXBlb2YgcGFyYW1zID09PSAic3RyaW5nIikKICAgIHJldHVybiB7IGVycm9yOiAoKSA9PiBwYXJhbXMgfTsKICBpZiAoKHBhcmFtcyA9PSBudWxsID8gdm9pZCAwIDogcGFyYW1zLm1lc3NhZ2UpICE9PSB2b2lkIDApIHsKICAgIGlmICgocGFyYW1zID09IG51bGwgPyB2b2lkIDAgOiBwYXJhbXMuZXJyb3IpICE9PSB2b2lkIDApCiAgICAgIHRocm93IG5ldyBFcnJvcigiQ2Fubm90IHNwZWNpZnkgYm90aCBgbWVzc2FnZWAgYW5kIGBlcnJvcmAgcGFyYW1zIik7CiAgICBwYXJhbXMuZXJyb3IgPSBwYXJhbXMubWVzc2FnZTsKICB9CiAgZGVsZXRlIHBhcmFtcy5tZXNzYWdlOwogIGlmICh0eXBlb2YgcGFyYW1zLmVycm9yID09PSAic3RyaW5nIikKICAgIHJldHVybiB7IC4uLnBhcmFtcywgZXJyb3I6ICgpID0+IHBhcmFtcy5lcnJvciB9OwogIHJldHVybiBwYXJhbXM7Cn0KZnVuY3Rpb24gY3JlYXRlVHJhbnNwYXJlbnRQcm94eShnZXR0ZXIpIHsKICBsZXQgdGFyZ2V0OwogIHJldHVybiBuZXcgUHJveHkoe30sIHsKICAgIGdldChfLCBwcm9wLCByZWNlaXZlcikgewogICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTsKICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpOwogICAgfSwKICAgIHNldChfLCBwcm9wLCB2YWx1ZSwgcmVjZWl2ZXIpIHsKICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7CiAgICAgIHJldHVybiBSZWZsZWN0LnNldCh0YXJnZXQsIHByb3AsIHZhbHVlLCByZWNlaXZlcik7CiAgICB9LAogICAgaGFzKF8sIHByb3ApIHsKICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7CiAgICAgIHJldHVybiBSZWZsZWN0Lmhhcyh0YXJnZXQsIHByb3ApOwogICAgfSwKICAgIGRlbGV0ZVByb3BlcnR5KF8sIHByb3ApIHsKICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7CiAgICAgIHJldHVybiBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KHRhcmdldCwgcHJvcCk7CiAgICB9LAogICAgb3duS2V5cyhfKSB7CiAgICAgIHRhcmdldCA/PyAodGFyZ2V0ID0gZ2V0dGVyKCkpOwogICAgICByZXR1cm4gUmVmbGVjdC5vd25LZXlzKHRhcmdldCk7CiAgICB9LAogICAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKF8sIHByb3ApIHsKICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7CiAgICAgIHJldHVybiBSZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIHByb3ApOwogICAgfSwKICAgIGRlZmluZVByb3BlcnR5KF8sIHByb3AsIGRlc2NyaXB0b3IpIHsKICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7CiAgICAgIHJldHVybiBSZWZsZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcCwgZGVzY3JpcHRvcik7CiAgICB9CiAgfSk7Cn0KZnVuY3Rpb24gc3RyaW5naWZ5UHJpbWl0aXZlKHZhbHVlKSB7CiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gImJpZ2ludCIpCiAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKSArICJuIjsKICBpZiAodHlwZW9mIHZhbHVlID09PSAic3RyaW5nIikKICAgIHJldHVybiBgIiR7dmFsdWV9ImA7CiAgcmV0dXJuIGAke3ZhbHVlfWA7Cn0KZnVuY3Rpb24gb3B0aW9uYWxLZXlzKHNoYXBlKSB7CiAgcmV0dXJuIE9iamVjdC5rZXlzKHNoYXBlKS5maWx0ZXIoKGspID0+IHsKICAgIHJldHVybiBzaGFwZVtrXS5fem9kLm9wdGluID09PSAib3B0aW9uYWwiICYmIHNoYXBlW2tdLl96b2Qub3B0b3V0ID09PSAib3B0aW9uYWwiOwogIH0pOwp9CnZhciBOVU1CRVJfRk9STUFUX1JBTkdFUyA9IHsKICBzYWZlaW50OiBbTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIsIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSXSwKICBpbnQzMjogWy0yMTQ3NDgzNjQ4LCAyMTQ3NDgzNjQ3XSwKICB1aW50MzI6IFswLCA0Mjk0OTY3Mjk1XSwKICBmbG9hdDMyOiBbLTM0MDI4MjM0NjYzODUyODg2ZTIyLCAzNDAyODIzNDY2Mzg1Mjg4NmUyMl0sCiAgZmxvYXQ2NDogWy1OdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFXQp9Owp2YXIgQklHSU5UX0ZPUk1BVF9SQU5HRVMgPSB7CiAgaW50NjQ6IFtCaWdJbnQoIi05MjIzMzcyMDM2ODU0Nzc1ODA4IiksIEJpZ0ludCgiOTIyMzM3MjAzNjg1NDc3NTgwNyIpXSwKICB1aW50NjQ6IFtCaWdJbnQoMCksIEJpZ0ludCgiMTg0NDY3NDQwNzM3MDk1NTE2MTUiKV0KfTsKZnVuY3Rpb24gcGljayhzY2hlbWEsIG1hc2spIHsKICBjb25zdCBjdXJyRGVmID0gc2NoZW1hLl96b2QuZGVmOwogIGNvbnN0IGRlZiA9IG1lcmdlRGVmcyhzY2hlbWEuX3pvZC5kZWYsIHsKICAgIGdldCBzaGFwZSgpIHsKICAgICAgY29uc3QgbmV3U2hhcGUgPSB7fTsKICAgICAgZm9yIChjb25zdCBrZXkgaW4gbWFzaykgewogICAgICAgIGlmICghKGtleSBpbiBjdXJyRGVmLnNoYXBlKSkgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQga2V5OiAiJHtrZXl9ImApOwogICAgICAgIH0KICAgICAgICBpZiAoIW1hc2tba2V5XSkKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIG5ld1NoYXBlW2tleV0gPSBjdXJyRGVmLnNoYXBlW2tleV07CiAgICAgIH0KICAgICAgYXNzaWduUHJvcCh0aGlzLCAic2hhcGUiLCBuZXdTaGFwZSk7CiAgICAgIHJldHVybiBuZXdTaGFwZTsKICAgIH0sCiAgICBjaGVja3M6IFtdCiAgfSk7CiAgcmV0dXJuIGNsb25lKHNjaGVtYSwgZGVmKTsKfQpmdW5jdGlvbiBvbWl0KHNjaGVtYSwgbWFzaykgewogIGNvbnN0IGN1cnJEZWYgPSBzY2hlbWEuX3pvZC5kZWY7CiAgY29uc3QgZGVmID0gbWVyZ2VEZWZzKHNjaGVtYS5fem9kLmRlZiwgewogICAgZ2V0IHNoYXBlKCkgewogICAgICBjb25zdCBuZXdTaGFwZSA9IHsgLi4uc2NoZW1hLl96b2QuZGVmLnNoYXBlIH07CiAgICAgIGZvciAoY29uc3Qga2V5IGluIG1hc2spIHsKICAgICAgICBpZiAoIShrZXkgaW4gY3VyckRlZi5zaGFwZSkpIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIGtleTogIiR7a2V5fSJgKTsKICAgICAgICB9CiAgICAgICAgaWYgKCFtYXNrW2tleV0pCiAgICAgICAgICBjb250aW51ZTsKICAgICAgICBkZWxldGUgbmV3U2hhcGVba2V5XTsKICAgICAgfQogICAgICBhc3NpZ25Qcm9wKHRoaXMsICJzaGFwZSIsIG5ld1NoYXBlKTsKICAgICAgcmV0dXJuIG5ld1NoYXBlOwogICAgfSwKICAgIGNoZWNrczogW10KICB9KTsKICByZXR1cm4gY2xvbmUoc2NoZW1hLCBkZWYpOwp9CmZ1bmN0aW9uIGV4dGVuZChzY2hlbWEsIHNoYXBlKSB7CiAgaWYgKCFpc1BsYWluT2JqZWN0KHNoYXBlKSkgewogICAgdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGlucHV0IHRvIGV4dGVuZDogZXhwZWN0ZWQgYSBwbGFpbiBvYmplY3QiKTsKICB9CiAgY29uc3QgY2hlY2tzID0gc2NoZW1hLl96b2QuZGVmLmNoZWNrczsKICBjb25zdCBoYXNDaGVja3MgPSBjaGVja3MgJiYgY2hlY2tzLmxlbmd0aCA+IDA7CiAgaWYgKGhhc0NoZWNrcykgewogICAgdGhyb3cgbmV3IEVycm9yKCJPYmplY3Qgc2NoZW1hcyBjb250YWluaW5nIHJlZmluZW1lbnRzIGNhbm5vdCBiZSBleHRlbmRlZC4gVXNlIGAuc2FmZUV4dGVuZCgpYCBpbnN0ZWFkLiIpOwogIH0KICBjb25zdCBkZWYgPSBtZXJnZURlZnMoc2NoZW1hLl96b2QuZGVmLCB7CiAgICBnZXQgc2hhcGUoKSB7CiAgICAgIGNvbnN0IF9zaGFwZSA9IHsgLi4uc2NoZW1hLl96b2QuZGVmLnNoYXBlLCAuLi5zaGFwZSB9OwogICAgICBhc3NpZ25Qcm9wKHRoaXMsICJzaGFwZSIsIF9zaGFwZSk7CiAgICAgIHJldHVybiBfc2hhcGU7CiAgICB9LAogICAgY2hlY2tzOiBbXQogIH0pOwogIHJldHVybiBjbG9uZShzY2hlbWEsIGRlZik7Cn0KZnVuY3Rpb24gc2FmZUV4dGVuZChzY2hlbWEsIHNoYXBlKSB7CiAgaWYgKCFpc1BsYWluT2JqZWN0KHNoYXBlKSkgewogICAgdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGlucHV0IHRvIHNhZmVFeHRlbmQ6IGV4cGVjdGVkIGEgcGxhaW4gb2JqZWN0Iik7CiAgfQogIGNvbnN0IGRlZiA9IHsKICAgIC4uLnNjaGVtYS5fem9kLmRlZiwKICAgIGdldCBzaGFwZSgpIHsKICAgICAgY29uc3QgX3NoYXBlID0geyAuLi5zY2hlbWEuX3pvZC5kZWYuc2hhcGUsIC4uLnNoYXBlIH07CiAgICAgIGFzc2lnblByb3AodGhpcywgInNoYXBlIiwgX3NoYXBlKTsKICAgICAgcmV0dXJuIF9zaGFwZTsKICAgIH0sCiAgICBjaGVja3M6IHNjaGVtYS5fem9kLmRlZi5jaGVja3MKICB9OwogIHJldHVybiBjbG9uZShzY2hlbWEsIGRlZik7Cn0KZnVuY3Rpb24gbWVyZ2UoYSwgYikgewogIGNvbnN0IGRlZiA9IG1lcmdlRGVmcyhhLl96b2QuZGVmLCB7CiAgICBnZXQgc2hhcGUoKSB7CiAgICAgIGNvbnN0IF9zaGFwZSA9IHsgLi4uYS5fem9kLmRlZi5zaGFwZSwgLi4uYi5fem9kLmRlZi5zaGFwZSB9OwogICAgICBhc3NpZ25Qcm9wKHRoaXMsICJzaGFwZSIsIF9zaGFwZSk7CiAgICAgIHJldHVybiBfc2hhcGU7CiAgICB9LAogICAgZ2V0IGNhdGNoYWxsKCkgewogICAgICByZXR1cm4gYi5fem9kLmRlZi5jYXRjaGFsbDsKICAgIH0sCiAgICBjaGVja3M6IFtdCiAgICAvLyBkZWxldGUgZXhpc3RpbmcgY2hlY2tzCiAgfSk7CiAgcmV0dXJuIGNsb25lKGEsIGRlZik7Cn0KZnVuY3Rpb24gcGFydGlhbChDbGFzczIsIHNjaGVtYSwgbWFzaykgewogIGNvbnN0IGRlZiA9IG1lcmdlRGVmcyhzY2hlbWEuX3pvZC5kZWYsIHsKICAgIGdldCBzaGFwZSgpIHsKICAgICAgY29uc3Qgb2xkU2hhcGUgPSBzY2hlbWEuX3pvZC5kZWYuc2hhcGU7CiAgICAgIGNvbnN0IHNoYXBlID0geyAuLi5vbGRTaGFwZSB9OwogICAgICBpZiAobWFzaykgewogICAgICAgIGZvciAoY29uc3Qga2V5IGluIG1hc2spIHsKICAgICAgICAgIGlmICghKGtleSBpbiBvbGRTaGFwZSkpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQga2V5OiAiJHtrZXl9ImApOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCFtYXNrW2tleV0pCiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgc2hhcGVba2V5XSA9IENsYXNzMiA/IG5ldyBDbGFzczIoewogICAgICAgICAgICB0eXBlOiAib3B0aW9uYWwiLAogICAgICAgICAgICBpbm5lclR5cGU6IG9sZFNoYXBlW2tleV0KICAgICAgICAgIH0pIDogb2xkU2hhcGVba2V5XTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb2xkU2hhcGUpIHsKICAgICAgICAgIHNoYXBlW2tleV0gPSBDbGFzczIgPyBuZXcgQ2xhc3MyKHsKICAgICAgICAgICAgdHlwZTogIm9wdGlvbmFsIiwKICAgICAgICAgICAgaW5uZXJUeXBlOiBvbGRTaGFwZVtrZXldCiAgICAgICAgICB9KSA6IG9sZFNoYXBlW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICAgIGFzc2lnblByb3AodGhpcywgInNoYXBlIiwgc2hhcGUpOwogICAgICByZXR1cm4gc2hhcGU7CiAgICB9LAogICAgY2hlY2tzOiBbXQogIH0pOwogIHJldHVybiBjbG9uZShzY2hlbWEsIGRlZik7Cn0KZnVuY3Rpb24gcmVxdWlyZWQoQ2xhc3MyLCBzY2hlbWEsIG1hc2spIHsKICBjb25zdCBkZWYgPSBtZXJnZURlZnMoc2NoZW1hLl96b2QuZGVmLCB7CiAgICBnZXQgc2hhcGUoKSB7CiAgICAgIGNvbnN0IG9sZFNoYXBlID0gc2NoZW1hLl96b2QuZGVmLnNoYXBlOwogICAgICBjb25zdCBzaGFwZSA9IHsgLi4ub2xkU2hhcGUgfTsKICAgICAgaWYgKG1hc2spIHsKICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBtYXNrKSB7CiAgICAgICAgICBpZiAoIShrZXkgaW4gc2hhcGUpKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIGtleTogIiR7a2V5fSJgKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghbWFza1trZXldKQogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIHNoYXBlW2tleV0gPSBuZXcgQ2xhc3MyKHsKICAgICAgICAgICAgdHlwZTogIm5vbm9wdGlvbmFsIiwKICAgICAgICAgICAgaW5uZXJUeXBlOiBvbGRTaGFwZVtrZXldCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb2xkU2hhcGUpIHsKICAgICAgICAgIHNoYXBlW2tleV0gPSBuZXcgQ2xhc3MyKHsKICAgICAgICAgICAgdHlwZTogIm5vbm9wdGlvbmFsIiwKICAgICAgICAgICAgaW5uZXJUeXBlOiBvbGRTaGFwZVtrZXldCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgYXNzaWduUHJvcCh0aGlzLCAic2hhcGUiLCBzaGFwZSk7CiAgICAgIHJldHVybiBzaGFwZTsKICAgIH0sCiAgICBjaGVja3M6IFtdCiAgfSk7CiAgcmV0dXJuIGNsb25lKHNjaGVtYSwgZGVmKTsKfQpmdW5jdGlvbiBhYm9ydGVkKHgsIHN0YXJ0SW5kZXggPSAwKSB7CiAgdmFyIF9hOwogIGlmICh4LmFib3J0ZWQgPT09IHRydWUpCiAgICByZXR1cm4gdHJ1ZTsKICBmb3IgKGxldCBpID0gc3RhcnRJbmRleDsgaSA8IHguaXNzdWVzLmxlbmd0aDsgaSsrKSB7CiAgICBpZiAoKChfYSA9IHguaXNzdWVzW2ldKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY29udGludWUpICE9PSB0cnVlKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0KICByZXR1cm4gZmFsc2U7Cn0KZnVuY3Rpb24gcHJlZml4SXNzdWVzKHBhdGgsIGlzc3VlcykgewogIHJldHVybiBpc3N1ZXMubWFwKChpc3MpID0+IHsKICAgIHZhciBfYTsKICAgIChfYSA9IGlzcykucGF0aCA/PyAoX2EucGF0aCA9IFtdKTsKICAgIGlzcy5wYXRoLnVuc2hpZnQocGF0aCk7CiAgICByZXR1cm4gaXNzOwogIH0pOwp9CmZ1bmN0aW9uIHVud3JhcE1lc3NhZ2UobWVzc2FnZSkgewogIHJldHVybiB0eXBlb2YgbWVzc2FnZSA9PT0gInN0cmluZyIgPyBtZXNzYWdlIDogbWVzc2FnZSA9PSBudWxsID8gdm9pZCAwIDogbWVzc2FnZS5tZXNzYWdlOwp9CmZ1bmN0aW9uIGZpbmFsaXplSXNzdWUoaXNzLCBjdHgsIGNvbmZpZzIpIHsKICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjsKICBjb25zdCBmdWxsID0geyAuLi5pc3MsIHBhdGg6IGlzcy5wYXRoID8/IFtdIH07CiAgaWYgKCFpc3MubWVzc2FnZSkgewogICAgY29uc3QgbWVzc2FnZSA9IHVud3JhcE1lc3NhZ2UoKF9jID0gKF9iID0gKF9hID0gaXNzLmluc3QpID09IG51bGwgPyB2b2lkIDAgOiBfYS5fem9kLmRlZikgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmVycm9yKSA9PSBudWxsID8gdm9pZCAwIDogX2MuY2FsbChfYiwgaXNzKSkgPz8gdW53cmFwTWVzc2FnZSgoX2QgPSBjdHggPT0gbnVsbCA/IHZvaWQgMCA6IGN0eC5lcnJvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLmNhbGwoY3R4LCBpc3MpKSA/PyB1bndyYXBNZXNzYWdlKChfZSA9IGNvbmZpZzIuY3VzdG9tRXJyb3IpID09IG51bGwgPyB2b2lkIDAgOiBfZS5jYWxsKGNvbmZpZzIsIGlzcykpID8/IHVud3JhcE1lc3NhZ2UoKF9mID0gY29uZmlnMi5sb2NhbGVFcnJvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9mLmNhbGwoY29uZmlnMiwgaXNzKSkgPz8gIkludmFsaWQgaW5wdXQiOwogICAgZnVsbC5tZXNzYWdlID0gbWVzc2FnZTsKICB9CiAgZGVsZXRlIGZ1bGwuaW5zdDsKICBkZWxldGUgZnVsbC5jb250aW51ZTsKICBpZiAoIShjdHggPT0gbnVsbCA/IHZvaWQgMCA6IGN0eC5yZXBvcnRJbnB1dCkpIHsKICAgIGRlbGV0ZSBmdWxsLmlucHV0OwogIH0KICByZXR1cm4gZnVsbDsKfQpmdW5jdGlvbiBnZXRTaXphYmxlT3JpZ2luKGlucHV0KSB7CiAgaWYgKGlucHV0IGluc3RhbmNlb2YgU2V0KQogICAgcmV0dXJuICJzZXQiOwogIGlmIChpbnB1dCBpbnN0YW5jZW9mIE1hcCkKICAgIHJldHVybiAibWFwIjsKICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBGaWxlKQogICAgcmV0dXJuICJmaWxlIjsKICByZXR1cm4gInVua25vd24iOwp9CmZ1bmN0aW9uIGdldExlbmd0aGFibGVPcmlnaW4oaW5wdXQpIHsKICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpCiAgICByZXR1cm4gImFycmF5IjsKICBpZiAodHlwZW9mIGlucHV0ID09PSAic3RyaW5nIikKICAgIHJldHVybiAic3RyaW5nIjsKICByZXR1cm4gInVua25vd24iOwp9CmZ1bmN0aW9uIGlzc3VlKC4uLmFyZ3MpIHsKICBjb25zdCBbaXNzLCBpbnB1dCwgaW5zdF0gPSBhcmdzOwogIGlmICh0eXBlb2YgaXNzID09PSAic3RyaW5nIikgewogICAgcmV0dXJuIHsKICAgICAgbWVzc2FnZTogaXNzLAogICAgICBjb2RlOiAiY3VzdG9tIiwKICAgICAgaW5wdXQsCiAgICAgIGluc3QKICAgIH07CiAgfQogIHJldHVybiB7IC4uLmlzcyB9Owp9CmZ1bmN0aW9uIGNsZWFuRW51bShvYmopIHsKICByZXR1cm4gT2JqZWN0LmVudHJpZXMob2JqKS5maWx0ZXIoKFtrLCBfXSkgPT4gewogICAgcmV0dXJuIE51bWJlci5pc05hTihOdW1iZXIucGFyc2VJbnQoaywgMTApKTsKICB9KS5tYXAoKGVsKSA9PiBlbFsxXSk7Cn0KZnVuY3Rpb24gYmFzZTY0VG9VaW50OEFycmF5KGJhc2U2NDMpIHsKICBjb25zdCBiaW5hcnlTdHJpbmcgPSBhdG9iKGJhc2U2NDMpOwogIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYmluYXJ5U3RyaW5nLmxlbmd0aCk7CiAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaW5hcnlTdHJpbmcubGVuZ3RoOyBpKyspIHsKICAgIGJ5dGVzW2ldID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSk7CiAgfQogIHJldHVybiBieXRlczsKfQpmdW5jdGlvbiB1aW50OEFycmF5VG9CYXNlNjQoYnl0ZXMpIHsKICBsZXQgYmluYXJ5U3RyaW5nID0gIiI7CiAgZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkrKykgewogICAgYmluYXJ5U3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0pOwogIH0KICByZXR1cm4gYnRvYShiaW5hcnlTdHJpbmcpOwp9CmZ1bmN0aW9uIGJhc2U2NHVybFRvVWludDhBcnJheShiYXNlNjR1cmwzKSB7CiAgY29uc3QgYmFzZTY0MyA9IGJhc2U2NHVybDMucmVwbGFjZSgvLS9nLCAiKyIpLnJlcGxhY2UoL18vZywgIi8iKTsKICBjb25zdCBwYWRkaW5nID0gIj0iLnJlcGVhdCgoNCAtIGJhc2U2NDMubGVuZ3RoICUgNCkgJSA0KTsKICByZXR1cm4gYmFzZTY0VG9VaW50OEFycmF5KGJhc2U2NDMgKyBwYWRkaW5nKTsKfQpmdW5jdGlvbiB1aW50OEFycmF5VG9CYXNlNjR1cmwoYnl0ZXMpIHsKICByZXR1cm4gdWludDhBcnJheVRvQmFzZTY0KGJ5dGVzKS5yZXBsYWNlKC9cKy9nLCAiLSIpLnJlcGxhY2UoL1wvL2csICJfIikucmVwbGFjZSgvPS9nLCAiIik7Cn0KZnVuY3Rpb24gaGV4VG9VaW50OEFycmF5KGhleDMpIHsKICBjb25zdCBjbGVhbkhleCA9IGhleDMucmVwbGFjZSgvXjB4LywgIiIpOwogIGlmIChjbGVhbkhleC5sZW5ndGggJSAyICE9PSAwKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgaGV4IHN0cmluZyBsZW5ndGgiKTsKICB9CiAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShjbGVhbkhleC5sZW5ndGggLyAyKTsKICBmb3IgKGxldCBpID0gMDsgaSA8IGNsZWFuSGV4Lmxlbmd0aDsgaSArPSAyKSB7CiAgICBieXRlc1tpIC8gMl0gPSBOdW1iZXIucGFyc2VJbnQoY2xlYW5IZXguc2xpY2UoaSwgaSArIDIpLCAxNik7CiAgfQogIHJldHVybiBieXRlczsKfQpmdW5jdGlvbiB1aW50OEFycmF5VG9IZXgoYnl0ZXMpIHsKICByZXR1cm4gQXJyYXkuZnJvbShieXRlcykubWFwKChiKSA9PiBiLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAiMCIpKS5qb2luKCIiKTsKfQp2YXIgQ2xhc3MgPSBjbGFzcyB7CiAgY29uc3RydWN0b3IoLi4uX2FyZ3MpIHsKICB9Cn07CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2NvcmUvZXJyb3JzLmpzCnZhciBpbml0aWFsaXplciA9IChpbnN0LCBkZWYpID0+IHsKICBpbnN0Lm5hbWUgPSAiJFpvZEVycm9yIjsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaW5zdCwgIl96b2QiLCB7CiAgICB2YWx1ZTogaW5zdC5fem9kLAogICAgZW51bWVyYWJsZTogZmFsc2UKICB9KTsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaW5zdCwgImlzc3VlcyIsIHsKICAgIHZhbHVlOiBkZWYsCiAgICBlbnVtZXJhYmxlOiBmYWxzZQogIH0pOwogIGluc3QubWVzc2FnZSA9IEpTT04uc3RyaW5naWZ5KGRlZiwganNvblN0cmluZ2lmeVJlcGxhY2VyLCAyKTsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaW5zdCwgInRvU3RyaW5nIiwgewogICAgdmFsdWU6ICgpID0+IGluc3QubWVzc2FnZSwKICAgIGVudW1lcmFibGU6IGZhbHNlCiAgfSk7Cn07CnZhciAkWm9kRXJyb3IgPSAkY29uc3RydWN0b3IoIiRab2RFcnJvciIsIGluaXRpYWxpemVyKTsKdmFyICRab2RSZWFsRXJyb3IgPSAkY29uc3RydWN0b3IoIiRab2RFcnJvciIsIGluaXRpYWxpemVyLCB7IFBhcmVudDogRXJyb3IgfSk7CmZ1bmN0aW9uIGZsYXR0ZW5FcnJvcihlcnJvcjQ1LCBtYXBwZXIgPSAoaXNzdWUyKSA9PiBpc3N1ZTIubWVzc2FnZSkgewogIGNvbnN0IGZpZWxkRXJyb3JzID0ge307CiAgY29uc3QgZm9ybUVycm9ycyA9IFtdOwogIGZvciAoY29uc3Qgc3ViIG9mIGVycm9yNDUuaXNzdWVzKSB7CiAgICBpZiAoc3ViLnBhdGgubGVuZ3RoID4gMCkgewogICAgICBmaWVsZEVycm9yc1tzdWIucGF0aFswXV0gPSBmaWVsZEVycm9yc1tzdWIucGF0aFswXV0gfHwgW107CiAgICAgIGZpZWxkRXJyb3JzW3N1Yi5wYXRoWzBdXS5wdXNoKG1hcHBlcihzdWIpKTsKICAgIH0gZWxzZSB7CiAgICAgIGZvcm1FcnJvcnMucHVzaChtYXBwZXIoc3ViKSk7CiAgICB9CiAgfQogIHJldHVybiB7IGZvcm1FcnJvcnMsIGZpZWxkRXJyb3JzIH07Cn0KZnVuY3Rpb24gZm9ybWF0RXJyb3IoZXJyb3I0NSwgX21hcHBlcikgewogIGNvbnN0IG1hcHBlciA9IF9tYXBwZXIgfHwgZnVuY3Rpb24oaXNzdWUyKSB7CiAgICByZXR1cm4gaXNzdWUyLm1lc3NhZ2U7CiAgfTsKICBjb25zdCBmaWVsZEVycm9ycyA9IHsgX2Vycm9yczogW10gfTsKICBjb25zdCBwcm9jZXNzRXJyb3IgPSAoZXJyb3I0NikgPT4gewogICAgZm9yIChjb25zdCBpc3N1ZTIgb2YgZXJyb3I0Ni5pc3N1ZXMpIHsKICAgICAgaWYgKGlzc3VlMi5jb2RlID09PSAiaW52YWxpZF91bmlvbiIgJiYgaXNzdWUyLmVycm9ycy5sZW5ndGgpIHsKICAgICAgICBpc3N1ZTIuZXJyb3JzLm1hcCgoaXNzdWVzKSA9PiBwcm9jZXNzRXJyb3IoeyBpc3N1ZXMgfSkpOwogICAgICB9IGVsc2UgaWYgKGlzc3VlMi5jb2RlID09PSAiaW52YWxpZF9rZXkiKSB7CiAgICAgICAgcHJvY2Vzc0Vycm9yKHsgaXNzdWVzOiBpc3N1ZTIuaXNzdWVzIH0pOwogICAgICB9IGVsc2UgaWYgKGlzc3VlMi5jb2RlID09PSAiaW52YWxpZF9lbGVtZW50IikgewogICAgICAgIHByb2Nlc3NFcnJvcih7IGlzc3VlczogaXNzdWUyLmlzc3VlcyB9KTsKICAgICAgfSBlbHNlIGlmIChpc3N1ZTIucGF0aC5sZW5ndGggPT09IDApIHsKICAgICAgICBmaWVsZEVycm9ycy5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlMikpOwogICAgICB9IGVsc2UgewogICAgICAgIGxldCBjdXJyID0gZmllbGRFcnJvcnM7CiAgICAgICAgbGV0IGkgPSAwOwogICAgICAgIHdoaWxlIChpIDwgaXNzdWUyLnBhdGgubGVuZ3RoKSB7CiAgICAgICAgICBjb25zdCBlbCA9IGlzc3VlMi5wYXRoW2ldOwogICAgICAgICAgY29uc3QgdGVybWluYWwgPSBpID09PSBpc3N1ZTIucGF0aC5sZW5ndGggLSAxOwogICAgICAgICAgaWYgKCF0ZXJtaW5hbCkgewogICAgICAgICAgICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IHsgX2Vycm9yczogW10gfTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9OwogICAgICAgICAgICBjdXJyW2VsXS5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlMikpOwogICAgICAgICAgfQogICAgICAgICAgY3VyciA9IGN1cnJbZWxdOwogICAgICAgICAgaSsrOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CiAgcHJvY2Vzc0Vycm9yKGVycm9yNDUpOwogIHJldHVybiBmaWVsZEVycm9yczsKfQpmdW5jdGlvbiB0cmVlaWZ5RXJyb3IoZXJyb3I0NSwgX21hcHBlcikgewogIGNvbnN0IG1hcHBlciA9IF9tYXBwZXIgfHwgZnVuY3Rpb24oaXNzdWUyKSB7CiAgICByZXR1cm4gaXNzdWUyLm1lc3NhZ2U7CiAgfTsKICBjb25zdCByZXN1bHQgPSB7IGVycm9yczogW10gfTsKICBjb25zdCBwcm9jZXNzRXJyb3IgPSAoZXJyb3I0NiwgcGF0aCA9IFtdKSA9PiB7CiAgICB2YXIgX2EsIF9iOwogICAgZm9yIChjb25zdCBpc3N1ZTIgb2YgZXJyb3I0Ni5pc3N1ZXMpIHsKICAgICAgaWYgKGlzc3VlMi5jb2RlID09PSAiaW52YWxpZF91bmlvbiIgJiYgaXNzdWUyLmVycm9ycy5sZW5ndGgpIHsKICAgICAgICBpc3N1ZTIuZXJyb3JzLm1hcCgoaXNzdWVzKSA9PiBwcm9jZXNzRXJyb3IoeyBpc3N1ZXMgfSwgaXNzdWUyLnBhdGgpKTsKICAgICAgfSBlbHNlIGlmIChpc3N1ZTIuY29kZSA9PT0gImludmFsaWRfa2V5IikgewogICAgICAgIHByb2Nlc3NFcnJvcih7IGlzc3VlczogaXNzdWUyLmlzc3VlcyB9LCBpc3N1ZTIucGF0aCk7CiAgICAgIH0gZWxzZSBpZiAoaXNzdWUyLmNvZGUgPT09ICJpbnZhbGlkX2VsZW1lbnQiKSB7CiAgICAgICAgcHJvY2Vzc0Vycm9yKHsgaXNzdWVzOiBpc3N1ZTIuaXNzdWVzIH0sIGlzc3VlMi5wYXRoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBmdWxscGF0aCA9IFsuLi5wYXRoLCAuLi5pc3N1ZTIucGF0aF07CiAgICAgICAgaWYgKGZ1bGxwYXRoLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgcmVzdWx0LmVycm9ycy5wdXNoKG1hcHBlcihpc3N1ZTIpKTsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgICBsZXQgY3VyciA9IHJlc3VsdDsKICAgICAgICBsZXQgaSA9IDA7CiAgICAgICAgd2hpbGUgKGkgPCBmdWxscGF0aC5sZW5ndGgpIHsKICAgICAgICAgIGNvbnN0IGVsID0gZnVsbHBhdGhbaV07CiAgICAgICAgICBjb25zdCB0ZXJtaW5hbCA9IGkgPT09IGZ1bGxwYXRoLmxlbmd0aCAtIDE7CiAgICAgICAgICBpZiAodHlwZW9mIGVsID09PSAic3RyaW5nIikgewogICAgICAgICAgICBjdXJyLnByb3BlcnRpZXMgPz8gKGN1cnIucHJvcGVydGllcyA9IHt9KTsKICAgICAgICAgICAgKF9hID0gY3Vyci5wcm9wZXJ0aWVzKVtlbF0gPz8gKF9hW2VsXSA9IHsgZXJyb3JzOiBbXSB9KTsKICAgICAgICAgICAgY3VyciA9IGN1cnIucHJvcGVydGllc1tlbF07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjdXJyLml0ZW1zID8/IChjdXJyLml0ZW1zID0gW10pOwogICAgICAgICAgICAoX2IgPSBjdXJyLml0ZW1zKVtlbF0gPz8gKF9iW2VsXSA9IHsgZXJyb3JzOiBbXSB9KTsKICAgICAgICAgICAgY3VyciA9IGN1cnIuaXRlbXNbZWxdOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRlcm1pbmFsKSB7CiAgICAgICAgICAgIGN1cnIuZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlMikpOwogICAgICAgICAgfQogICAgICAgICAgaSsrOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CiAgcHJvY2Vzc0Vycm9yKGVycm9yNDUpOwogIHJldHVybiByZXN1bHQ7Cn0KZnVuY3Rpb24gdG9Eb3RQYXRoKF9wYXRoKSB7CiAgY29uc3Qgc2VncyA9IFtdOwogIGNvbnN0IHBhdGggPSBfcGF0aC5tYXAoKHNlZykgPT4gdHlwZW9mIHNlZyA9PT0gIm9iamVjdCIgPyBzZWcua2V5IDogc2VnKTsKICBmb3IgKGNvbnN0IHNlZyBvZiBwYXRoKSB7CiAgICBpZiAodHlwZW9mIHNlZyA9PT0gIm51bWJlciIpCiAgICAgIHNlZ3MucHVzaChgWyR7c2VnfV1gKTsKICAgIGVsc2UgaWYgKHR5cGVvZiBzZWcgPT09ICJzeW1ib2wiKQogICAgICBzZWdzLnB1c2goYFske0pTT04uc3RyaW5naWZ5KFN0cmluZyhzZWcpKX1dYCk7CiAgICBlbHNlIGlmICgvW15cdyRdLy50ZXN0KHNlZykpCiAgICAgIHNlZ3MucHVzaChgWyR7SlNPTi5zdHJpbmdpZnkoc2VnKX1dYCk7CiAgICBlbHNlIHsKICAgICAgaWYgKHNlZ3MubGVuZ3RoKQogICAgICAgIHNlZ3MucHVzaCgiLiIpOwogICAgICBzZWdzLnB1c2goc2VnKTsKICAgIH0KICB9CiAgcmV0dXJuIHNlZ3Muam9pbigiIik7Cn0KZnVuY3Rpb24gcHJldHRpZnlFcnJvcihlcnJvcjQ1KSB7CiAgdmFyIF9hOwogIGNvbnN0IGxpbmVzID0gW107CiAgY29uc3QgaXNzdWVzID0gWy4uLmVycm9yNDUuaXNzdWVzXS5zb3J0KChhLCBiKSA9PiAoYS5wYXRoID8/IFtdKS5sZW5ndGggLSAoYi5wYXRoID8/IFtdKS5sZW5ndGgpOwogIGZvciAoY29uc3QgaXNzdWUyIG9mIGlzc3VlcykgewogICAgbGluZXMucHVzaChg4pyWICR7aXNzdWUyLm1lc3NhZ2V9YCk7CiAgICBpZiAoKF9hID0gaXNzdWUyLnBhdGgpID09IG51bGwgPyB2b2lkIDAgOiBfYS5sZW5ndGgpCiAgICAgIGxpbmVzLnB1c2goYCAg4oaSIGF0ICR7dG9Eb3RQYXRoKGlzc3VlMi5wYXRoKX1gKTsKICB9CiAgcmV0dXJuIGxpbmVzLmpvaW4oIlxuIik7Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvY29yZS9wYXJzZS5qcwp2YXIgX3BhcnNlID0gKF9FcnIpID0+IChzY2hlbWEsIHZhbHVlLCBfY3R4LCBfcGFyYW1zKSA9PiB7CiAgY29uc3QgY3R4ID0gX2N0eCA/IE9iamVjdC5hc3NpZ24oX2N0eCwgeyBhc3luYzogZmFsc2UgfSkgOiB7IGFzeW5jOiBmYWxzZSB9OwogIGNvbnN0IHJlc3VsdCA9IHNjaGVtYS5fem9kLnJ1bih7IHZhbHVlLCBpc3N1ZXM6IFtdIH0sIGN0eCk7CiAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHsKICAgIHRocm93IG5ldyAkWm9kQXN5bmNFcnJvcigpOwogIH0KICBpZiAocmVzdWx0Lmlzc3Vlcy5sZW5ndGgpIHsKICAgIGNvbnN0IGUgPSBuZXcgKChfcGFyYW1zID09IG51bGwgPyB2b2lkIDAgOiBfcGFyYW1zLkVycikgPz8gX0VycikocmVzdWx0Lmlzc3Vlcy5tYXAoKGlzcykgPT4gZmluYWxpemVJc3N1ZShpc3MsIGN0eCwgY29uZmlnKCkpKSk7CiAgICBjYXB0dXJlU3RhY2tUcmFjZShlLCBfcGFyYW1zID09IG51bGwgPyB2b2lkIDAgOiBfcGFyYW1zLmNhbGxlZSk7CiAgICB0aHJvdyBlOwogIH0KICByZXR1cm4gcmVzdWx0LnZhbHVlOwp9Owp2YXIgcGFyc2UgPSBfcGFyc2UoJFpvZFJlYWxFcnJvcik7CnZhciBfcGFyc2VBc3luYyA9IChfRXJyKSA9PiBhc3luYyAoc2NoZW1hLCB2YWx1ZSwgX2N0eCwgcGFyYW1zKSA9PiB7CiAgY29uc3QgY3R4ID0gX2N0eCA/IE9iamVjdC5hc3NpZ24oX2N0eCwgeyBhc3luYzogdHJ1ZSB9KSA6IHsgYXN5bmM6IHRydWUgfTsKICBsZXQgcmVzdWx0ID0gc2NoZW1hLl96b2QucnVuKHsgdmFsdWUsIGlzc3VlczogW10gfSwgY3R4KTsKICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkKICAgIHJlc3VsdCA9IGF3YWl0IHJlc3VsdDsKICBpZiAocmVzdWx0Lmlzc3Vlcy5sZW5ndGgpIHsKICAgIGNvbnN0IGUgPSBuZXcgKChwYXJhbXMgPT0gbnVsbCA/IHZvaWQgMCA6IHBhcmFtcy5FcnIpID8/IF9FcnIpKHJlc3VsdC5pc3N1ZXMubWFwKChpc3MpID0+IGZpbmFsaXplSXNzdWUoaXNzLCBjdHgsIGNvbmZpZygpKSkpOwogICAgY2FwdHVyZVN0YWNrVHJhY2UoZSwgcGFyYW1zID09IG51bGwgPyB2b2lkIDAgOiBwYXJhbXMuY2FsbGVlKTsKICAgIHRocm93IGU7CiAgfQogIHJldHVybiByZXN1bHQudmFsdWU7Cn07CnZhciBwYXJzZUFzeW5jID0gX3BhcnNlQXN5bmMoJFpvZFJlYWxFcnJvcik7CnZhciBfc2FmZVBhcnNlID0gKF9FcnIpID0+IChzY2hlbWEsIHZhbHVlLCBfY3R4KSA9PiB7CiAgY29uc3QgY3R4ID0gX2N0eCA/IHsgLi4uX2N0eCwgYXN5bmM6IGZhbHNlIH0gOiB7IGFzeW5jOiBmYWxzZSB9OwogIGNvbnN0IHJlc3VsdCA9IHNjaGVtYS5fem9kLnJ1bih7IHZhbHVlLCBpc3N1ZXM6IFtdIH0sIGN0eCk7CiAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHsKICAgIHRocm93IG5ldyAkWm9kQXN5bmNFcnJvcigpOwogIH0KICByZXR1cm4gcmVzdWx0Lmlzc3Vlcy5sZW5ndGggPyB7CiAgICBzdWNjZXNzOiBmYWxzZSwKICAgIGVycm9yOiBuZXcgKF9FcnIgPz8gJFpvZEVycm9yKShyZXN1bHQuaXNzdWVzLm1hcCgoaXNzKSA9PiBmaW5hbGl6ZUlzc3VlKGlzcywgY3R4LCBjb25maWcoKSkpKQogIH0gOiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlc3VsdC52YWx1ZSB9Owp9Owp2YXIgc2FmZVBhcnNlID0gX3NhZmVQYXJzZSgkWm9kUmVhbEVycm9yKTsKdmFyIF9zYWZlUGFyc2VBc3luYyA9IChfRXJyKSA9PiBhc3luYyAoc2NoZW1hLCB2YWx1ZSwgX2N0eCkgPT4gewogIGNvbnN0IGN0eCA9IF9jdHggPyBPYmplY3QuYXNzaWduKF9jdHgsIHsgYXN5bmM6IHRydWUgfSkgOiB7IGFzeW5jOiB0cnVlIH07CiAgbGV0IHJlc3VsdCA9IHNjaGVtYS5fem9kLnJ1bih7IHZhbHVlLCBpc3N1ZXM6IFtdIH0sIGN0eCk7CiAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpCiAgICByZXN1bHQgPSBhd2FpdCByZXN1bHQ7CiAgcmV0dXJuIHJlc3VsdC5pc3N1ZXMubGVuZ3RoID8gewogICAgc3VjY2VzczogZmFsc2UsCiAgICBlcnJvcjogbmV3IF9FcnIocmVzdWx0Lmlzc3Vlcy5tYXAoKGlzcykgPT4gZmluYWxpemVJc3N1ZShpc3MsIGN0eCwgY29uZmlnKCkpKSkKICB9IDogeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQudmFsdWUgfTsKfTsKdmFyIHNhZmVQYXJzZUFzeW5jID0gX3NhZmVQYXJzZUFzeW5jKCRab2RSZWFsRXJyb3IpOwp2YXIgX2VuY29kZSA9IChfRXJyKSA9PiAoc2NoZW1hLCB2YWx1ZSwgX2N0eCkgPT4gewogIGNvbnN0IGN0eCA9IF9jdHggPyBPYmplY3QuYXNzaWduKF9jdHgsIHsgZGlyZWN0aW9uOiAiYmFja3dhcmQiIH0pIDogeyBkaXJlY3Rpb246ICJiYWNrd2FyZCIgfTsKICByZXR1cm4gX3BhcnNlKF9FcnIpKHNjaGVtYSwgdmFsdWUsIGN0eCk7Cn07CnZhciBlbmNvZGUgPSBfZW5jb2RlKCRab2RSZWFsRXJyb3IpOwp2YXIgX2RlY29kZSA9IChfRXJyKSA9PiAoc2NoZW1hLCB2YWx1ZSwgX2N0eCkgPT4gewogIHJldHVybiBfcGFyc2UoX0Vycikoc2NoZW1hLCB2YWx1ZSwgX2N0eCk7Cn07CnZhciBkZWNvZGUgPSBfZGVjb2RlKCRab2RSZWFsRXJyb3IpOwp2YXIgX2VuY29kZUFzeW5jID0gKF9FcnIpID0+IGFzeW5jIChzY2hlbWEsIHZhbHVlLCBfY3R4KSA9PiB7CiAgY29uc3QgY3R4ID0gX2N0eCA/IE9iamVjdC5hc3NpZ24oX2N0eCwgeyBkaXJlY3Rpb246ICJiYWNrd2FyZCIgfSkgOiB7IGRpcmVjdGlvbjogImJhY2t3YXJkIiB9OwogIHJldHVybiBfcGFyc2VBc3luYyhfRXJyKShzY2hlbWEsIHZhbHVlLCBjdHgpOwp9Owp2YXIgZW5jb2RlQXN5bmMgPSBfZW5jb2RlQXN5bmMoJFpvZFJlYWxFcnJvcik7CnZhciBfZGVjb2RlQXN5bmMgPSAoX0VycikgPT4gYXN5bmMgKHNjaGVtYSwgdmFsdWUsIF9jdHgpID0+IHsKICByZXR1cm4gX3BhcnNlQXN5bmMoX0Vycikoc2NoZW1hLCB2YWx1ZSwgX2N0eCk7Cn07CnZhciBkZWNvZGVBc3luYyA9IF9kZWNvZGVBc3luYygkWm9kUmVhbEVycm9yKTsKdmFyIF9zYWZlRW5jb2RlID0gKF9FcnIpID0+IChzY2hlbWEsIHZhbHVlLCBfY3R4KSA9PiB7CiAgY29uc3QgY3R4ID0gX2N0eCA/IE9iamVjdC5hc3NpZ24oX2N0eCwgeyBkaXJlY3Rpb246ICJiYWNrd2FyZCIgfSkgOiB7IGRpcmVjdGlvbjogImJhY2t3YXJkIiB9OwogIHJldHVybiBfc2FmZVBhcnNlKF9FcnIpKHNjaGVtYSwgdmFsdWUsIGN0eCk7Cn07CnZhciBzYWZlRW5jb2RlID0gX3NhZmVFbmNvZGUoJFpvZFJlYWxFcnJvcik7CnZhciBfc2FmZURlY29kZSA9IChfRXJyKSA9PiAoc2NoZW1hLCB2YWx1ZSwgX2N0eCkgPT4gewogIHJldHVybiBfc2FmZVBhcnNlKF9FcnIpKHNjaGVtYSwgdmFsdWUsIF9jdHgpOwp9Owp2YXIgc2FmZURlY29kZSA9IF9zYWZlRGVjb2RlKCRab2RSZWFsRXJyb3IpOwp2YXIgX3NhZmVFbmNvZGVBc3luYyA9IChfRXJyKSA9PiBhc3luYyAoc2NoZW1hLCB2YWx1ZSwgX2N0eCkgPT4gewogIGNvbnN0IGN0eCA9IF9jdHggPyBPYmplY3QuYXNzaWduKF9jdHgsIHsgZGlyZWN0aW9uOiAiYmFja3dhcmQiIH0pIDogeyBkaXJlY3Rpb246ICJiYWNrd2FyZCIgfTsKICByZXR1cm4gX3NhZmVQYXJzZUFzeW5jKF9FcnIpKHNjaGVtYSwgdmFsdWUsIGN0eCk7Cn07CnZhciBzYWZlRW5jb2RlQXN5bmMgPSBfc2FmZUVuY29kZUFzeW5jKCRab2RSZWFsRXJyb3IpOwp2YXIgX3NhZmVEZWNvZGVBc3luYyA9IChfRXJyKSA9PiBhc3luYyAoc2NoZW1hLCB2YWx1ZSwgX2N0eCkgPT4gewogIHJldHVybiBfc2FmZVBhcnNlQXN5bmMoX0Vycikoc2NoZW1hLCB2YWx1ZSwgX2N0eCk7Cn07CnZhciBzYWZlRGVjb2RlQXN5bmMgPSBfc2FmZURlY29kZUFzeW5jKCRab2RSZWFsRXJyb3IpOwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL3JlZ2V4ZXMuanMKdmFyIHJlZ2V4ZXNfZXhwb3J0cyA9IHt9OwpfX2V4cG9ydChyZWdleGVzX2V4cG9ydHMsIHsKICBiYXNlNjQ6ICgpID0+IGJhc2U2NCwKICBiYXNlNjR1cmw6ICgpID0+IGJhc2U2NHVybCwKICBiaWdpbnQ6ICgpID0+IGJpZ2ludCwKICBib29sZWFuOiAoKSA9PiBib29sZWFuLAogIGJyb3dzZXJFbWFpbDogKCkgPT4gYnJvd3NlckVtYWlsLAogIGNpZHJ2NDogKCkgPT4gY2lkcnY0LAogIGNpZHJ2NjogKCkgPT4gY2lkcnY2LAogIGN1aWQ6ICgpID0+IGN1aWQsCiAgY3VpZDI6ICgpID0+IGN1aWQyLAogIGRhdGU6ICgpID0+IGRhdGUsCiAgZGF0ZXRpbWU6ICgpID0+IGRhdGV0aW1lLAogIGRvbWFpbjogKCkgPT4gZG9tYWluLAogIGR1cmF0aW9uOiAoKSA9PiBkdXJhdGlvbiwKICBlMTY0OiAoKSA9PiBlMTY0LAogIGVtYWlsOiAoKSA9PiBlbWFpbCwKICBlbW9qaTogKCkgPT4gZW1vamksCiAgZXh0ZW5kZWREdXJhdGlvbjogKCkgPT4gZXh0ZW5kZWREdXJhdGlvbiwKICBndWlkOiAoKSA9PiBndWlkLAogIGhleDogKCkgPT4gaGV4LAogIGhvc3RuYW1lOiAoKSA9PiBob3N0bmFtZSwKICBodG1sNUVtYWlsOiAoKSA9PiBodG1sNUVtYWlsLAogIGlkbkVtYWlsOiAoKSA9PiBpZG5FbWFpbCwKICBpbnRlZ2VyOiAoKSA9PiBpbnRlZ2VyLAogIGlwdjQ6ICgpID0+IGlwdjQsCiAgaXB2NjogKCkgPT4gaXB2NiwKICBrc3VpZDogKCkgPT4ga3N1aWQsCiAgbG93ZXJjYXNlOiAoKSA9PiBsb3dlcmNhc2UsCiAgbWQ1X2Jhc2U2NDogKCkgPT4gbWQ1X2Jhc2U2NCwKICBtZDVfYmFzZTY0dXJsOiAoKSA9PiBtZDVfYmFzZTY0dXJsLAogIG1kNV9oZXg6ICgpID0+IG1kNV9oZXgsCiAgbmFub2lkOiAoKSA9PiBuYW5vaWQsCiAgbnVsbDogKCkgPT4gX251bGwsCiAgbnVtYmVyOiAoKSA9PiBudW1iZXIsCiAgcmZjNTMyMkVtYWlsOiAoKSA9PiByZmM1MzIyRW1haWwsCiAgc2hhMV9iYXNlNjQ6ICgpID0+IHNoYTFfYmFzZTY0LAogIHNoYTFfYmFzZTY0dXJsOiAoKSA9PiBzaGExX2Jhc2U2NHVybCwKICBzaGExX2hleDogKCkgPT4gc2hhMV9oZXgsCiAgc2hhMjU2X2Jhc2U2NDogKCkgPT4gc2hhMjU2X2Jhc2U2NCwKICBzaGEyNTZfYmFzZTY0dXJsOiAoKSA9PiBzaGEyNTZfYmFzZTY0dXJsLAogIHNoYTI1Nl9oZXg6ICgpID0+IHNoYTI1Nl9oZXgsCiAgc2hhMzg0X2Jhc2U2NDogKCkgPT4gc2hhMzg0X2Jhc2U2NCwKICBzaGEzODRfYmFzZTY0dXJsOiAoKSA9PiBzaGEzODRfYmFzZTY0dXJsLAogIHNoYTM4NF9oZXg6ICgpID0+IHNoYTM4NF9oZXgsCiAgc2hhNTEyX2Jhc2U2NDogKCkgPT4gc2hhNTEyX2Jhc2U2NCwKICBzaGE1MTJfYmFzZTY0dXJsOiAoKSA9PiBzaGE1MTJfYmFzZTY0dXJsLAogIHNoYTUxMl9oZXg6ICgpID0+IHNoYTUxMl9oZXgsCiAgc3RyaW5nOiAoKSA9PiBzdHJpbmcsCiAgdGltZTogKCkgPT4gdGltZSwKICB1bGlkOiAoKSA9PiB1bGlkLAogIHVuZGVmaW5lZDogKCkgPT4gX3VuZGVmaW5lZCwKICB1bmljb2RlRW1haWw6ICgpID0+IHVuaWNvZGVFbWFpbCwKICB1cHBlcmNhc2U6ICgpID0+IHVwcGVyY2FzZSwKICB1dWlkOiAoKSA9PiB1dWlkLAogIHV1aWQ0OiAoKSA9PiB1dWlkNCwKICB1dWlkNjogKCkgPT4gdXVpZDYsCiAgdXVpZDc6ICgpID0+IHV1aWQ3LAogIHhpZDogKCkgPT4geGlkCn0pOwp2YXIgY3VpZCA9IC9eW2NDXVteXHMtXXs4LH0kLzsKdmFyIGN1aWQyID0gL15bMC05YS16XSskLzsKdmFyIHVsaWQgPSAvXlswLTlBLUhKS01OUC1UVi1aYS1oamttbnAtdHYtel17MjZ9JC87CnZhciB4aWQgPSAvXlswLTlhLXZBLVZdezIwfSQvOwp2YXIga3N1aWQgPSAvXltBLVphLXowLTldezI3fSQvOwp2YXIgbmFub2lkID0gL15bYS16QS1aMC05Xy1dezIxfSQvOwp2YXIgZHVyYXRpb24gPSAvXlAoPzooXGQrVyl8KD8hLipXKSg/PVxkfFRcZCkoXGQrWSk/KFxkK00pPyhcZCtEKT8oVCg/PVxkKShcZCtIKT8oXGQrTSk/KFxkKyhbLixdXGQrKT9TKT8pPykkLzsKdmFyIGV4dGVuZGVkRHVyYXRpb24gPSAvXlstK10/UCg/ISQpKD86KD86Wy0rXT9cZCtZKXwoPzpbLStdP1xkK1suLF1cZCtZJCkpPyg/Oig/OlstK10/XGQrTSl8KD86Wy0rXT9cZCtbLixdXGQrTSQpKT8oPzooPzpbLStdP1xkK1cpfCg/OlstK10/XGQrWy4sXVxkK1ckKSk/KD86KD86Wy0rXT9cZCtEKXwoPzpbLStdP1xkK1suLF1cZCtEJCkpPyg/OlQoPz1bXGQrLV0pKD86KD86Wy0rXT9cZCtIKXwoPzpbLStdP1xkK1suLF1cZCtIJCkpPyg/Oig/OlstK10/XGQrTSl8KD86Wy0rXT9cZCtbLixdXGQrTSQpKT8oPzpbLStdP1xkKyg/OlsuLF1cZCspP1MpPyk/PyQvOwp2YXIgZ3VpZCA9IC9eKFswLTlhLWZBLUZdezh9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezEyfSkkLzsKdmFyIHV1aWQgPSAodmVyc2lvbjIpID0+IHsKICBpZiAoIXZlcnNpb24yKQogICAgcmV0dXJuIC9eKFswLTlhLWZBLUZdezh9LVswLTlhLWZBLUZdezR9LVsxLThdWzAtOWEtZkEtRl17M30tWzg5YWJBQl1bMC05YS1mQS1GXXszfS1bMC05YS1mQS1GXXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwfGZmZmZmZmZmLWZmZmYtZmZmZi1mZmZmLWZmZmZmZmZmZmZmZikkLzsKICByZXR1cm4gbmV3IFJlZ0V4cChgXihbMC05YS1mQS1GXXs4fS1bMC05YS1mQS1GXXs0fS0ke3ZlcnNpb24yfVswLTlhLWZBLUZdezN9LVs4OWFiQUJdWzAtOWEtZkEtRl17M30tWzAtOWEtZkEtRl17MTJ9KSRgKTsKfTsKdmFyIHV1aWQ0ID0gdXVpZCg0KTsKdmFyIHV1aWQ2ID0gdXVpZCg2KTsKdmFyIHV1aWQ3ID0gdXVpZCg3KTsKdmFyIGVtYWlsID0gL14oPyFcLikoPyEuKlwuXC4pKFtBLVphLXowLTlfJytcLVwuXSopW0EtWmEtejAtOV8rLV1AKFtBLVphLXowLTldW0EtWmEtejAtOVwtXSpcLikrW0EtWmEtel17Mix9JC87CnZhciBodG1sNUVtYWlsID0gL15bYS16QS1aMC05LiEjJCUmJyorLz0/Xl9ge3x9fi1dK0BbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcLlthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPykqJC87CnZhciByZmM1MzIyRW1haWwgPSAvXigoW148PigpXFtcXVxcLiw7OlxzQCJdKyhcLltePD4oKVxbXF1cXC4sOzpcc0AiXSspKil8KCIuKyIpKUAoKFxbWzAtOV17MSwzfVwuWzAtOV17MSwzfVwuWzAtOV17MSwzfVwuWzAtOV17MSwzfV0pfCgoW2EtekEtWlwtMC05XStcLikrW2EtekEtWl17Mix9KSkkLzsKdmFyIHVuaWNvZGVFbWFpbCA9IC9eW15cc0AiXXsxLDY0fUBbXlxzQF17MSwyNTV9JC91Owp2YXIgaWRuRW1haWwgPSB1bmljb2RlRW1haWw7CnZhciBicm93c2VyRW1haWwgPSAvXlthLXpBLVowLTkuISMkJSYnKisvPT9eX2B7fH1+LV0rQFthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPyg/OlwuW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KSokLzsKdmFyIF9lbW9qaSA9IGBeKFxccHtFeHRlbmRlZF9QaWN0b2dyYXBoaWN9fFxccHtFbW9qaV9Db21wb25lbnR9KSskYDsKZnVuY3Rpb24gZW1vamkoKSB7CiAgcmV0dXJuIG5ldyBSZWdFeHAoX2Vtb2ppLCAidSIpOwp9CnZhciBpcHY0ID0gL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKSQvOwp2YXIgaXB2NiA9IC9eKChbMC05YS1mQS1GXXsxLDR9Oil7N31bMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw3fTp8KFswLTlhLWZBLUZdezEsNH06KXsxLDZ9OlswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDV9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDJ9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwzfXwoWzAtOWEtZkEtRl17MSw0fTopezEsM30oOlswLTlhLWZBLUZdezEsNH0pezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDJ9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDV9fFswLTlhLWZBLUZdezEsNH06KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw2fSl8OigoOlswLTlhLWZBLUZdezEsNH0pezEsN318OikpJC87CnZhciBjaWRydjQgPSAvXigoMjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVwuKXszfSgyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXC8oWzAtOV18WzEtMl1bMC05XXwzWzAtMl0pJC87CnZhciBjaWRydjYgPSAvXigoWzAtOWEtZkEtRl17MSw0fTopezd9WzAtOWEtZkEtRl17MSw0fXw6OnwoWzAtOWEtZkEtRl17MSw0fSk/OjooWzAtOWEtZkEtRl17MSw0fTo/KXswLDZ9KVwvKDEyWzAtOF18MVswMV1bMC05XXxbMS05XT9bMC05XSkkLzsKdmFyIGJhc2U2NCA9IC9eJHxeKD86WzAtOWEtekEtWisvXXs0fSkqKD86KD86WzAtOWEtekEtWisvXXsyfT09KXwoPzpbMC05YS16QS1aKy9dezN9PSkpPyQvOwp2YXIgYmFzZTY0dXJsID0gL15bQS1aYS16MC05Xy1dKiQvOwp2YXIgaG9zdG5hbWUgPSAvXig/PS57MSwyNTN9XC4/JClbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcLlthLXpBLVowLTldKD86Wy0wLTlhLXpBLVpdezAsNjF9WzAtOWEtekEtWl0pPykqXC4/JC87CnZhciBkb21haW4gPSAvXihbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT9cLikrW2EtekEtWl17Mix9JC87CnZhciBlMTY0ID0gL15cKyg/OlswLTldKXs2LDE0fVswLTldJC87CnZhciBkYXRlU291cmNlID0gYCg/Oig/OlxcZFxcZFsyNDY4XVswNDhdfFxcZFxcZFsxMzU3OV1bMjZdfFxcZFxcZDBbNDhdfFswMjQ2OF1bMDQ4XTAwfFsxMzU3OV1bMjZdMDApLTAyLTI5fFxcZHs0fS0oPzooPzowWzEzNTc4XXwxWzAyXSktKD86MFsxLTldfFsxMl1cXGR8M1swMV0pfCg/OjBbNDY5XXwxMSktKD86MFsxLTldfFsxMl1cXGR8MzApfCg/OjAyKS0oPzowWzEtOV18MVxcZHwyWzAtOF0pKSlgOwp2YXIgZGF0ZSA9IG5ldyBSZWdFeHAoYF4ke2RhdGVTb3VyY2V9JGApOwpmdW5jdGlvbiB0aW1lU291cmNlKGFyZ3MpIHsKICBjb25zdCBoaG1tID0gYCg/OlswMV1cXGR8MlswLTNdKTpbMC01XVxcZGA7CiAgY29uc3QgcmVnZXggPSB0eXBlb2YgYXJncy5wcmVjaXNpb24gPT09ICJudW1iZXIiID8gYXJncy5wcmVjaXNpb24gPT09IC0xID8gYCR7aGhtbX1gIDogYXJncy5wcmVjaXNpb24gPT09IDAgPyBgJHtoaG1tfTpbMC01XVxcZGAgOiBgJHtoaG1tfTpbMC01XVxcZFxcLlxcZHske2FyZ3MucHJlY2lzaW9ufX1gIDogYCR7aGhtbX0oPzo6WzAtNV1cXGQoPzpcXC5cXGQrKT8pP2A7CiAgcmV0dXJuIHJlZ2V4Owp9CmZ1bmN0aW9uIHRpbWUoYXJncykgewogIHJldHVybiBuZXcgUmVnRXhwKGBeJHt0aW1lU291cmNlKGFyZ3MpfSRgKTsKfQpmdW5jdGlvbiBkYXRldGltZShhcmdzKSB7CiAgY29uc3QgdGltZTMgPSB0aW1lU291cmNlKHsgcHJlY2lzaW9uOiBhcmdzLnByZWNpc2lvbiB9KTsKICBjb25zdCBvcHRzID0gWyJaIl07CiAgaWYgKGFyZ3MubG9jYWwpCiAgICBvcHRzLnB1c2goIiIpOwogIGlmIChhcmdzLm9mZnNldCkKICAgIG9wdHMucHVzaChgKFsrLV0oPzpbMDFdXFxkfDJbMC0zXSk6WzAtNV1cXGQpYCk7CiAgY29uc3QgdGltZVJlZ2V4ID0gYCR7dGltZTN9KD86JHtvcHRzLmpvaW4oInwiKX0pYDsKICByZXR1cm4gbmV3IFJlZ0V4cChgXiR7ZGF0ZVNvdXJjZX1UKD86JHt0aW1lUmVnZXh9KSRgKTsKfQp2YXIgc3RyaW5nID0gKHBhcmFtcykgPT4gewogIGNvbnN0IHJlZ2V4ID0gcGFyYW1zID8gYFtcXHNcXFNdeyR7KHBhcmFtcyA9PSBudWxsID8gdm9pZCAwIDogcGFyYW1zLm1pbmltdW0pID8/IDB9LCR7KHBhcmFtcyA9PSBudWxsID8gdm9pZCAwIDogcGFyYW1zLm1heGltdW0pID8/ICIifX1gIDogYFtcXHNcXFNdKmA7CiAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke3JlZ2V4fSRgKTsKfTsKdmFyIGJpZ2ludCA9IC9eLT9cZCtuPyQvOwp2YXIgaW50ZWdlciA9IC9eLT9cZCskLzsKdmFyIG51bWJlciA9IC9eLT9cZCsoPzpcLlxkKyk/LzsKdmFyIGJvb2xlYW4gPSAvXig/OnRydWV8ZmFsc2UpJC9pOwp2YXIgX251bGwgPSAvXm51bGwkL2k7CnZhciBfdW5kZWZpbmVkID0gL151bmRlZmluZWQkL2k7CnZhciBsb3dlcmNhc2UgPSAvXlteQS1aXSokLzsKdmFyIHVwcGVyY2FzZSA9IC9eW15hLXpdKiQvOwp2YXIgaGV4ID0gL15bMC05YS1mQS1GXSokLzsKZnVuY3Rpb24gZml4ZWRCYXNlNjQoYm9keUxlbmd0aCwgcGFkZGluZykgewogIHJldHVybiBuZXcgUmVnRXhwKGBeW0EtWmEtejAtOSsvXXske2JvZHlMZW5ndGh9fSR7cGFkZGluZ30kYCk7Cn0KZnVuY3Rpb24gZml4ZWRCYXNlNjR1cmwobGVuZ3RoKSB7CiAgcmV0dXJuIG5ldyBSZWdFeHAoYF5bQS1aYS16MC05Xy1deyR7bGVuZ3RofX0kYCk7Cn0KdmFyIG1kNV9oZXggPSAvXlswLTlhLWZBLUZdezMyfSQvOwp2YXIgbWQ1X2Jhc2U2NCA9IGZpeGVkQmFzZTY0KDIyLCAiPT0iKTsKdmFyIG1kNV9iYXNlNjR1cmwgPSBmaXhlZEJhc2U2NHVybCgyMik7CnZhciBzaGExX2hleCA9IC9eWzAtOWEtZkEtRl17NDB9JC87CnZhciBzaGExX2Jhc2U2NCA9IGZpeGVkQmFzZTY0KDI3LCAiPSIpOwp2YXIgc2hhMV9iYXNlNjR1cmwgPSBmaXhlZEJhc2U2NHVybCgyNyk7CnZhciBzaGEyNTZfaGV4ID0gL15bMC05YS1mQS1GXXs2NH0kLzsKdmFyIHNoYTI1Nl9iYXNlNjQgPSBmaXhlZEJhc2U2NCg0MywgIj0iKTsKdmFyIHNoYTI1Nl9iYXNlNjR1cmwgPSBmaXhlZEJhc2U2NHVybCg0Myk7CnZhciBzaGEzODRfaGV4ID0gL15bMC05YS1mQS1GXXs5Nn0kLzsKdmFyIHNoYTM4NF9iYXNlNjQgPSBmaXhlZEJhc2U2NCg2NCwgIiIpOwp2YXIgc2hhMzg0X2Jhc2U2NHVybCA9IGZpeGVkQmFzZTY0dXJsKDY0KTsKdmFyIHNoYTUxMl9oZXggPSAvXlswLTlhLWZBLUZdezEyOH0kLzsKdmFyIHNoYTUxMl9iYXNlNjQgPSBmaXhlZEJhc2U2NCg4NiwgIj09Iik7CnZhciBzaGE1MTJfYmFzZTY0dXJsID0gZml4ZWRCYXNlNjR1cmwoODYpOwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL2NoZWNrcy5qcwp2YXIgJFpvZENoZWNrID0gJGNvbnN0cnVjdG9yKCIkWm9kQ2hlY2siLCAoaW5zdCwgZGVmKSA9PiB7CiAgdmFyIF9hOwogIGluc3QuX3pvZCA/PyAoaW5zdC5fem9kID0ge30pOwogIGluc3QuX3pvZC5kZWYgPSBkZWY7CiAgKF9hID0gaW5zdC5fem9kKS5vbmF0dGFjaCA/PyAoX2Eub25hdHRhY2ggPSBbXSk7Cn0pOwp2YXIgbnVtZXJpY09yaWdpbk1hcCA9IHsKICBudW1iZXI6ICJudW1iZXIiLAogIGJpZ2ludDogImJpZ2ludCIsCiAgb2JqZWN0OiAiZGF0ZSIKfTsKdmFyICRab2RDaGVja0xlc3NUaGFuID0gJGNvbnN0cnVjdG9yKCIkWm9kQ2hlY2tMZXNzVGhhbiIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kQ2hlY2suaW5pdChpbnN0LCBkZWYpOwogIGNvbnN0IG9yaWdpbiA9IG51bWVyaWNPcmlnaW5NYXBbdHlwZW9mIGRlZi52YWx1ZV07CiAgaW5zdC5fem9kLm9uYXR0YWNoLnB1c2goKGluc3QyKSA9PiB7CiAgICBjb25zdCBiYWcgPSBpbnN0Mi5fem9kLmJhZzsKICAgIGNvbnN0IGN1cnIgPSAoZGVmLmluY2x1c2l2ZSA/IGJhZy5tYXhpbXVtIDogYmFnLmV4Y2x1c2l2ZU1heGltdW0pID8/IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsKICAgIGlmIChkZWYudmFsdWUgPCBjdXJyKSB7CiAgICAgIGlmIChkZWYuaW5jbHVzaXZlKQogICAgICAgIGJhZy5tYXhpbXVtID0gZGVmLnZhbHVlOwogICAgICBlbHNlCiAgICAgICAgYmFnLmV4Y2x1c2l2ZU1heGltdW0gPSBkZWYudmFsdWU7CiAgICB9CiAgfSk7CiAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHsKICAgIGlmIChkZWYuaW5jbHVzaXZlID8gcGF5bG9hZC52YWx1ZSA8PSBkZWYudmFsdWUgOiBwYXlsb2FkLnZhbHVlIDwgZGVmLnZhbHVlKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICBvcmlnaW4sCiAgICAgIGNvZGU6ICJ0b29fYmlnIiwKICAgICAgbWF4aW11bTogZGVmLnZhbHVlLAogICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSwKICAgICAgaW5jbHVzaXZlOiBkZWYuaW5jbHVzaXZlLAogICAgICBpbnN0LAogICAgICBjb250aW51ZTogIWRlZi5hYm9ydAogICAgfSk7CiAgfTsKfSk7CnZhciAkWm9kQ2hlY2tHcmVhdGVyVGhhbiA9ICRjb25zdHJ1Y3RvcigiJFpvZENoZWNrR3JlYXRlclRoYW4iLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZENoZWNrLmluaXQoaW5zdCwgZGVmKTsKICBjb25zdCBvcmlnaW4gPSBudW1lcmljT3JpZ2luTWFwW3R5cGVvZiBkZWYudmFsdWVdOwogIGluc3QuX3pvZC5vbmF0dGFjaC5wdXNoKChpbnN0MikgPT4gewogICAgY29uc3QgYmFnID0gaW5zdDIuX3pvZC5iYWc7CiAgICBjb25zdCBjdXJyID0gKGRlZi5pbmNsdXNpdmUgPyBiYWcubWluaW11bSA6IGJhZy5leGNsdXNpdmVNaW5pbXVtKSA/PyBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7CiAgICBpZiAoZGVmLnZhbHVlID4gY3VycikgewogICAgICBpZiAoZGVmLmluY2x1c2l2ZSkKICAgICAgICBiYWcubWluaW11bSA9IGRlZi52YWx1ZTsKICAgICAgZWxzZQogICAgICAgIGJhZy5leGNsdXNpdmVNaW5pbXVtID0gZGVmLnZhbHVlOwogICAgfQogIH0pOwogIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7CiAgICBpZiAoZGVmLmluY2x1c2l2ZSA/IHBheWxvYWQudmFsdWUgPj0gZGVmLnZhbHVlIDogcGF5bG9hZC52YWx1ZSA+IGRlZi52YWx1ZSkgewogICAgICByZXR1cm47CiAgICB9CiAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHsKICAgICAgb3JpZ2luLAogICAgICBjb2RlOiAidG9vX3NtYWxsIiwKICAgICAgbWluaW11bTogZGVmLnZhbHVlLAogICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSwKICAgICAgaW5jbHVzaXZlOiBkZWYuaW5jbHVzaXZlLAogICAgICBpbnN0LAogICAgICBjb250aW51ZTogIWRlZi5hYm9ydAogICAgfSk7CiAgfTsKfSk7CnZhciAkWm9kQ2hlY2tNdWx0aXBsZU9mID0gJGNvbnN0cnVjdG9yKCIkWm9kQ2hlY2tNdWx0aXBsZU9mIiwgKGluc3QsIGRlZikgPT4gewogICRab2RDaGVjay5pbml0KGluc3QsIGRlZik7CiAgaW5zdC5fem9kLm9uYXR0YWNoLnB1c2goKGluc3QyKSA9PiB7CiAgICB2YXIgX2E7CiAgICAoX2EgPSBpbnN0Mi5fem9kLmJhZykubXVsdGlwbGVPZiA/PyAoX2EubXVsdGlwbGVPZiA9IGRlZi52YWx1ZSk7CiAgfSk7CiAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHsKICAgIGlmICh0eXBlb2YgcGF5bG9hZC52YWx1ZSAhPT0gdHlwZW9mIGRlZi52YWx1ZSkKICAgICAgdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgbWl4IG51bWJlciBhbmQgYmlnaW50IGluIG11bHRpcGxlX29mIGNoZWNrLiIpOwogICAgY29uc3QgaXNNdWx0aXBsZSA9IHR5cGVvZiBwYXlsb2FkLnZhbHVlID09PSAiYmlnaW50IiA/IHBheWxvYWQudmFsdWUgJSBkZWYudmFsdWUgPT09IEJpZ0ludCgwKSA6IGZsb2F0U2FmZVJlbWFpbmRlcihwYXlsb2FkLnZhbHVlLCBkZWYudmFsdWUpID09PSAwOwogICAgaWYgKGlzTXVsdGlwbGUpCiAgICAgIHJldHVybjsKICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICBvcmlnaW46IHR5cGVvZiBwYXlsb2FkLnZhbHVlLAogICAgICBjb2RlOiAibm90X211bHRpcGxlX29mIiwKICAgICAgZGl2aXNvcjogZGVmLnZhbHVlLAogICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSwKICAgICAgaW5zdCwKICAgICAgY29udGludWU6ICFkZWYuYWJvcnQKICAgIH0pOwogIH07Cn0pOwp2YXIgJFpvZENoZWNrTnVtYmVyRm9ybWF0ID0gJGNvbnN0cnVjdG9yKCIkWm9kQ2hlY2tOdW1iZXJGb3JtYXQiLCAoaW5zdCwgZGVmKSA9PiB7CiAgdmFyIF9hOwogICRab2RDaGVjay5pbml0KGluc3QsIGRlZik7CiAgZGVmLmZvcm1hdCA9IGRlZi5mb3JtYXQgfHwgImZsb2F0NjQiOwogIGNvbnN0IGlzSW50ID0gKF9hID0gZGVmLmZvcm1hdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmluY2x1ZGVzKCJpbnQiKTsKICBjb25zdCBvcmlnaW4gPSBpc0ludCA/ICJpbnQiIDogIm51bWJlciI7CiAgY29uc3QgW21pbmltdW0sIG1heGltdW1dID0gTlVNQkVSX0ZPUk1BVF9SQU5HRVNbZGVmLmZvcm1hdF07CiAgaW5zdC5fem9kLm9uYXR0YWNoLnB1c2goKGluc3QyKSA9PiB7CiAgICBjb25zdCBiYWcgPSBpbnN0Mi5fem9kLmJhZzsKICAgIGJhZy5mb3JtYXQgPSBkZWYuZm9ybWF0OwogICAgYmFnLm1pbmltdW0gPSBtaW5pbXVtOwogICAgYmFnLm1heGltdW0gPSBtYXhpbXVtOwogICAgaWYgKGlzSW50KQogICAgICBiYWcucGF0dGVybiA9IGludGVnZXI7CiAgfSk7CiAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHsKICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTsKICAgIGlmIChpc0ludCkgewogICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIoaW5wdXQpKSB7CiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7CiAgICAgICAgICBleHBlY3RlZDogb3JpZ2luLAogICAgICAgICAgZm9ybWF0OiBkZWYuZm9ybWF0LAogICAgICAgICAgY29kZTogImludmFsaWRfdHlwZSIsCiAgICAgICAgICBjb250aW51ZTogZmFsc2UsCiAgICAgICAgICBpbnB1dCwKICAgICAgICAgIGluc3QKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKCFOdW1iZXIuaXNTYWZlSW50ZWdlcihpbnB1dCkpIHsKICAgICAgICBpZiAoaW5wdXQgPiAwKSB7CiAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHsKICAgICAgICAgICAgaW5wdXQsCiAgICAgICAgICAgIGNvZGU6ICJ0b29fYmlnIiwKICAgICAgICAgICAgbWF4aW11bTogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsCiAgICAgICAgICAgIG5vdGU6ICJJbnRlZ2VycyBtdXN0IGJlIHdpdGhpbiB0aGUgc2FmZSBpbnRlZ2VyIHJhbmdlLiIsCiAgICAgICAgICAgIGluc3QsCiAgICAgICAgICAgIG9yaWdpbiwKICAgICAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHsKICAgICAgICAgICAgaW5wdXQsCiAgICAgICAgICAgIGNvZGU6ICJ0b29fc21hbGwiLAogICAgICAgICAgICBtaW5pbXVtOiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUiwKICAgICAgICAgICAgbm90ZTogIkludGVnZXJzIG11c3QgYmUgd2l0aGluIHRoZSBzYWZlIGludGVnZXIgcmFuZ2UuIiwKICAgICAgICAgICAgaW5zdCwKICAgICAgICAgICAgb3JpZ2luLAogICAgICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfQogICAgaWYgKGlucHV0IDwgbWluaW11bSkgewogICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHsKICAgICAgICBvcmlnaW46ICJudW1iZXIiLAogICAgICAgIGlucHV0LAogICAgICAgIGNvZGU6ICJ0b29fc21hbGwiLAogICAgICAgIG1pbmltdW0sCiAgICAgICAgaW5jbHVzaXZlOiB0cnVlLAogICAgICAgIGluc3QsCiAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQKICAgICAgfSk7CiAgICB9CiAgICBpZiAoaW5wdXQgPiBtYXhpbXVtKSB7CiAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICAgIG9yaWdpbjogIm51bWJlciIsCiAgICAgICAgaW5wdXQsCiAgICAgICAgY29kZTogInRvb19iaWciLAogICAgICAgIG1heGltdW0sCiAgICAgICAgaW5zdAogICAgICB9KTsKICAgIH0KICB9Owp9KTsKdmFyICRab2RDaGVja0JpZ0ludEZvcm1hdCA9ICRjb25zdHJ1Y3RvcigiJFpvZENoZWNrQmlnSW50Rm9ybWF0IiwgKGluc3QsIGRlZikgPT4gewogICRab2RDaGVjay5pbml0KGluc3QsIGRlZik7CiAgY29uc3QgW21pbmltdW0sIG1heGltdW1dID0gQklHSU5UX0ZPUk1BVF9SQU5HRVNbZGVmLmZvcm1hdF07CiAgaW5zdC5fem9kLm9uYXR0YWNoLnB1c2goKGluc3QyKSA9PiB7CiAgICBjb25zdCBiYWcgPSBpbnN0Mi5fem9kLmJhZzsKICAgIGJhZy5mb3JtYXQgPSBkZWYuZm9ybWF0OwogICAgYmFnLm1pbmltdW0gPSBtaW5pbXVtOwogICAgYmFnLm1heGltdW0gPSBtYXhpbXVtOwogIH0pOwogIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7CiAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7CiAgICBpZiAoaW5wdXQgPCBtaW5pbXVtKSB7CiAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICAgIG9yaWdpbjogImJpZ2ludCIsCiAgICAgICAgaW5wdXQsCiAgICAgICAgY29kZTogInRvb19zbWFsbCIsCiAgICAgICAgbWluaW11bSwKICAgICAgICBpbmNsdXNpdmU6IHRydWUsCiAgICAgICAgaW5zdCwKICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydAogICAgICB9KTsKICAgIH0KICAgIGlmIChpbnB1dCA+IG1heGltdW0pIHsKICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7CiAgICAgICAgb3JpZ2luOiAiYmlnaW50IiwKICAgICAgICBpbnB1dCwKICAgICAgICBjb2RlOiAidG9vX2JpZyIsCiAgICAgICAgbWF4aW11bSwKICAgICAgICBpbnN0CiAgICAgIH0pOwogICAgfQogIH07Cn0pOwp2YXIgJFpvZENoZWNrTWF4U2l6ZSA9ICRjb25zdHJ1Y3RvcigiJFpvZENoZWNrTWF4U2l6ZSIsIChpbnN0LCBkZWYpID0+IHsKICB2YXIgX2E7CiAgJFpvZENoZWNrLmluaXQoaW5zdCwgZGVmKTsKICAoX2EgPSBpbnN0Ll96b2QuZGVmKS53aGVuID8/IChfYS53aGVuID0gKHBheWxvYWQpID0+IHsKICAgIGNvbnN0IHZhbCA9IHBheWxvYWQudmFsdWU7CiAgICByZXR1cm4gIW51bGxpc2godmFsKSAmJiB2YWwuc2l6ZSAhPT0gdm9pZCAwOwogIH0pOwogIGluc3QuX3pvZC5vbmF0dGFjaC5wdXNoKChpbnN0MikgPT4gewogICAgY29uc3QgY3VyciA9IGluc3QyLl96b2QuYmFnLm1heGltdW0gPz8gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOwogICAgaWYgKGRlZi5tYXhpbXVtIDwgY3VycikKICAgICAgaW5zdDIuX3pvZC5iYWcubWF4aW11bSA9IGRlZi5tYXhpbXVtOwogIH0pOwogIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7CiAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7CiAgICBjb25zdCBzaXplID0gaW5wdXQuc2l6ZTsKICAgIGlmIChzaXplIDw9IGRlZi5tYXhpbXVtKQogICAgICByZXR1cm47CiAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHsKICAgICAgb3JpZ2luOiBnZXRTaXphYmxlT3JpZ2luKGlucHV0KSwKICAgICAgY29kZTogInRvb19iaWciLAogICAgICBtYXhpbXVtOiBkZWYubWF4aW11bSwKICAgICAgaW5jbHVzaXZlOiB0cnVlLAogICAgICBpbnB1dCwKICAgICAgaW5zdCwKICAgICAgY29udGludWU6ICFkZWYuYWJvcnQKICAgIH0pOwogIH07Cn0pOwp2YXIgJFpvZENoZWNrTWluU2l6ZSA9ICRjb25zdHJ1Y3RvcigiJFpvZENoZWNrTWluU2l6ZSIsIChpbnN0LCBkZWYpID0+IHsKICB2YXIgX2E7CiAgJFpvZENoZWNrLmluaXQoaW5zdCwgZGVmKTsKICAoX2EgPSBpbnN0Ll96b2QuZGVmKS53aGVuID8/IChfYS53aGVuID0gKHBheWxvYWQpID0+IHsKICAgIGNvbnN0IHZhbCA9IHBheWxvYWQudmFsdWU7CiAgICByZXR1cm4gIW51bGxpc2godmFsKSAmJiB2YWwuc2l6ZSAhPT0gdm9pZCAwOwogIH0pOwogIGluc3QuX3pvZC5vbmF0dGFjaC5wdXNoKChpbnN0MikgPT4gewogICAgY29uc3QgY3VyciA9IGluc3QyLl96b2QuYmFnLm1pbmltdW0gPz8gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZOwogICAgaWYgKGRlZi5taW5pbXVtID4gY3VycikKICAgICAgaW5zdDIuX3pvZC5iYWcubWluaW11bSA9IGRlZi5taW5pbXVtOwogIH0pOwogIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7CiAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7CiAgICBjb25zdCBzaXplID0gaW5wdXQuc2l6ZTsKICAgIGlmIChzaXplID49IGRlZi5taW5pbXVtKQogICAgICByZXR1cm47CiAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHsKICAgICAgb3JpZ2luOiBnZXRTaXphYmxlT3JpZ2luKGlucHV0KSwKICAgICAgY29kZTogInRvb19zbWFsbCIsCiAgICAgIG1pbmltdW06IGRlZi5taW5pbXVtLAogICAgICBpbmNsdXNpdmU6IHRydWUsCiAgICAgIGlucHV0LAogICAgICBpbnN0LAogICAgICBjb250aW51ZTogIWRlZi5hYm9ydAogICAgfSk7CiAgfTsKfSk7CnZhciAkWm9kQ2hlY2tTaXplRXF1YWxzID0gJGNvbnN0cnVjdG9yKCIkWm9kQ2hlY2tTaXplRXF1YWxzIiwgKGluc3QsIGRlZikgPT4gewogIHZhciBfYTsKICAkWm9kQ2hlY2suaW5pdChpbnN0LCBkZWYpOwogIChfYSA9IGluc3QuX3pvZC5kZWYpLndoZW4gPz8gKF9hLndoZW4gPSAocGF5bG9hZCkgPT4gewogICAgY29uc3QgdmFsID0gcGF5bG9hZC52YWx1ZTsKICAgIHJldHVybiAhbnVsbGlzaCh2YWwpICYmIHZhbC5zaXplICE9PSB2b2lkIDA7CiAgfSk7CiAgaW5zdC5fem9kLm9uYXR0YWNoLnB1c2goKGluc3QyKSA9PiB7CiAgICBjb25zdCBiYWcgPSBpbnN0Mi5fem9kLmJhZzsKICAgIGJhZy5taW5pbXVtID0gZGVmLnNpemU7CiAgICBiYWcubWF4aW11bSA9IGRlZi5zaXplOwogICAgYmFnLnNpemUgPSBkZWYuc2l6ZTsKICB9KTsKICBpbnN0Ll96b2QuY2hlY2sgPSAocGF5bG9hZCkgPT4gewogICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlOwogICAgY29uc3Qgc2l6ZSA9IGlucHV0LnNpemU7CiAgICBpZiAoc2l6ZSA9PT0gZGVmLnNpemUpCiAgICAgIHJldHVybjsKICAgIGNvbnN0IHRvb0JpZyA9IHNpemUgPiBkZWYuc2l6ZTsKICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICBvcmlnaW46IGdldFNpemFibGVPcmlnaW4oaW5wdXQpLAogICAgICAuLi50b29CaWcgPyB7IGNvZGU6ICJ0b29fYmlnIiwgbWF4aW11bTogZGVmLnNpemUgfSA6IHsgY29kZTogInRvb19zbWFsbCIsIG1pbmltdW06IGRlZi5zaXplIH0sCiAgICAgIGluY2x1c2l2ZTogdHJ1ZSwKICAgICAgZXhhY3Q6IHRydWUsCiAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLAogICAgICBpbnN0LAogICAgICBjb250aW51ZTogIWRlZi5hYm9ydAogICAgfSk7CiAgfTsKfSk7CnZhciAkWm9kQ2hlY2tNYXhMZW5ndGggPSAkY29uc3RydWN0b3IoIiRab2RDaGVja01heExlbmd0aCIsIChpbnN0LCBkZWYpID0+IHsKICB2YXIgX2E7CiAgJFpvZENoZWNrLmluaXQoaW5zdCwgZGVmKTsKICAoX2EgPSBpbnN0Ll96b2QuZGVmKS53aGVuID8/IChfYS53aGVuID0gKHBheWxvYWQpID0+IHsKICAgIGNvbnN0IHZhbCA9IHBheWxvYWQudmFsdWU7CiAgICByZXR1cm4gIW51bGxpc2godmFsKSAmJiB2YWwubGVuZ3RoICE9PSB2b2lkIDA7CiAgfSk7CiAgaW5zdC5fem9kLm9uYXR0YWNoLnB1c2goKGluc3QyKSA9PiB7CiAgICBjb25zdCBjdXJyID0gaW5zdDIuX3pvZC5iYWcubWF4aW11bSA/PyBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7CiAgICBpZiAoZGVmLm1heGltdW0gPCBjdXJyKQogICAgICBpbnN0Mi5fem9kLmJhZy5tYXhpbXVtID0gZGVmLm1heGltdW07CiAgfSk7CiAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHsKICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTsKICAgIGNvbnN0IGxlbmd0aCA9IGlucHV0Lmxlbmd0aDsKICAgIGlmIChsZW5ndGggPD0gZGVmLm1heGltdW0pCiAgICAgIHJldHVybjsKICAgIGNvbnN0IG9yaWdpbiA9IGdldExlbmd0aGFibGVPcmlnaW4oaW5wdXQpOwogICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7CiAgICAgIG9yaWdpbiwKICAgICAgY29kZTogInRvb19iaWciLAogICAgICBtYXhpbXVtOiBkZWYubWF4aW11bSwKICAgICAgaW5jbHVzaXZlOiB0cnVlLAogICAgICBpbnB1dCwKICAgICAgaW5zdCwKICAgICAgY29udGludWU6ICFkZWYuYWJvcnQKICAgIH0pOwogIH07Cn0pOwp2YXIgJFpvZENoZWNrTWluTGVuZ3RoID0gJGNvbnN0cnVjdG9yKCIkWm9kQ2hlY2tNaW5MZW5ndGgiLCAoaW5zdCwgZGVmKSA9PiB7CiAgdmFyIF9hOwogICRab2RDaGVjay5pbml0KGluc3QsIGRlZik7CiAgKF9hID0gaW5zdC5fem9kLmRlZikud2hlbiA/PyAoX2Eud2hlbiA9IChwYXlsb2FkKSA9PiB7CiAgICBjb25zdCB2YWwgPSBwYXlsb2FkLnZhbHVlOwogICAgcmV0dXJuICFudWxsaXNoKHZhbCkgJiYgdmFsLmxlbmd0aCAhPT0gdm9pZCAwOwogIH0pOwogIGluc3QuX3pvZC5vbmF0dGFjaC5wdXNoKChpbnN0MikgPT4gewogICAgY29uc3QgY3VyciA9IGluc3QyLl96b2QuYmFnLm1pbmltdW0gPz8gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZOwogICAgaWYgKGRlZi5taW5pbXVtID4gY3VycikKICAgICAgaW5zdDIuX3pvZC5iYWcubWluaW11bSA9IGRlZi5taW5pbXVtOwogIH0pOwogIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7CiAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7CiAgICBjb25zdCBsZW5ndGggPSBpbnB1dC5sZW5ndGg7CiAgICBpZiAobGVuZ3RoID49IGRlZi5taW5pbXVtKQogICAgICByZXR1cm47CiAgICBjb25zdCBvcmlnaW4gPSBnZXRMZW5ndGhhYmxlT3JpZ2luKGlucHV0KTsKICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICBvcmlnaW4sCiAgICAgIGNvZGU6ICJ0b29fc21hbGwiLAogICAgICBtaW5pbXVtOiBkZWYubWluaW11bSwKICAgICAgaW5jbHVzaXZlOiB0cnVlLAogICAgICBpbnB1dCwKICAgICAgaW5zdCwKICAgICAgY29udGludWU6ICFkZWYuYWJvcnQKICAgIH0pOwogIH07Cn0pOwp2YXIgJFpvZENoZWNrTGVuZ3RoRXF1YWxzID0gJGNvbnN0cnVjdG9yKCIkWm9kQ2hlY2tMZW5ndGhFcXVhbHMiLCAoaW5zdCwgZGVmKSA9PiB7CiAgdmFyIF9hOwogICRab2RDaGVjay5pbml0KGluc3QsIGRlZik7CiAgKF9hID0gaW5zdC5fem9kLmRlZikud2hlbiA/PyAoX2Eud2hlbiA9IChwYXlsb2FkKSA9PiB7CiAgICBjb25zdCB2YWwgPSBwYXlsb2FkLnZhbHVlOwogICAgcmV0dXJuICFudWxsaXNoKHZhbCkgJiYgdmFsLmxlbmd0aCAhPT0gdm9pZCAwOwogIH0pOwogIGluc3QuX3pvZC5vbmF0dGFjaC5wdXNoKChpbnN0MikgPT4gewogICAgY29uc3QgYmFnID0gaW5zdDIuX3pvZC5iYWc7CiAgICBiYWcubWluaW11bSA9IGRlZi5sZW5ndGg7CiAgICBiYWcubWF4aW11bSA9IGRlZi5sZW5ndGg7CiAgICBiYWcubGVuZ3RoID0gZGVmLmxlbmd0aDsKICB9KTsKICBpbnN0Ll96b2QuY2hlY2sgPSAocGF5bG9hZCkgPT4gewogICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlOwogICAgY29uc3QgbGVuZ3RoID0gaW5wdXQubGVuZ3RoOwogICAgaWYgKGxlbmd0aCA9PT0gZGVmLmxlbmd0aCkKICAgICAgcmV0dXJuOwogICAgY29uc3Qgb3JpZ2luID0gZ2V0TGVuZ3RoYWJsZU9yaWdpbihpbnB1dCk7CiAgICBjb25zdCB0b29CaWcgPSBsZW5ndGggPiBkZWYubGVuZ3RoOwogICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7CiAgICAgIG9yaWdpbiwKICAgICAgLi4udG9vQmlnID8geyBjb2RlOiAidG9vX2JpZyIsIG1heGltdW06IGRlZi5sZW5ndGggfSA6IHsgY29kZTogInRvb19zbWFsbCIsIG1pbmltdW06IGRlZi5sZW5ndGggfSwKICAgICAgaW5jbHVzaXZlOiB0cnVlLAogICAgICBleGFjdDogdHJ1ZSwKICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsCiAgICAgIGluc3QsCiAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0CiAgICB9KTsKICB9Owp9KTsKdmFyICRab2RDaGVja1N0cmluZ0Zvcm1hdCA9ICRjb25zdHJ1Y3RvcigiJFpvZENoZWNrU3RyaW5nRm9ybWF0IiwgKGluc3QsIGRlZikgPT4gewogIHZhciBfYSwgX2I7CiAgJFpvZENoZWNrLmluaXQoaW5zdCwgZGVmKTsKICBpbnN0Ll96b2Qub25hdHRhY2gucHVzaCgoaW5zdDIpID0+IHsKICAgIGNvbnN0IGJhZyA9IGluc3QyLl96b2QuYmFnOwogICAgYmFnLmZvcm1hdCA9IGRlZi5mb3JtYXQ7CiAgICBpZiAoZGVmLnBhdHRlcm4pIHsKICAgICAgYmFnLnBhdHRlcm5zID8/IChiYWcucGF0dGVybnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpKTsKICAgICAgYmFnLnBhdHRlcm5zLmFkZChkZWYucGF0dGVybik7CiAgICB9CiAgfSk7CiAgaWYgKGRlZi5wYXR0ZXJuKQogICAgKF9hID0gaW5zdC5fem9kKS5jaGVjayA/PyAoX2EuY2hlY2sgPSAocGF5bG9hZCkgPT4gewogICAgICBkZWYucGF0dGVybi5sYXN0SW5kZXggPSAwOwogICAgICBpZiAoZGVmLnBhdHRlcm4udGVzdChwYXlsb2FkLnZhbHVlKSkKICAgICAgICByZXR1cm47CiAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICAgIG9yaWdpbjogInN0cmluZyIsCiAgICAgICAgY29kZTogImludmFsaWRfZm9ybWF0IiwKICAgICAgICBmb3JtYXQ6IGRlZi5mb3JtYXQsCiAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsCiAgICAgICAgLi4uZGVmLnBhdHRlcm4gPyB7IHBhdHRlcm46IGRlZi5wYXR0ZXJuLnRvU3RyaW5nKCkgfSA6IHt9LAogICAgICAgIGluc3QsCiAgICAgICAgY29udGludWU6ICFkZWYuYWJvcnQKICAgICAgfSk7CiAgICB9KTsKICBlbHNlCiAgICAoX2IgPSBpbnN0Ll96b2QpLmNoZWNrID8/IChfYi5jaGVjayA9ICgpID0+IHsKICAgIH0pOwp9KTsKdmFyICRab2RDaGVja1JlZ2V4ID0gJGNvbnN0cnVjdG9yKCIkWm9kQ2hlY2tSZWdleCIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kQ2hlY2tTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpOwogIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7CiAgICBkZWYucGF0dGVybi5sYXN0SW5kZXggPSAwOwogICAgaWYgKGRlZi5wYXR0ZXJuLnRlc3QocGF5bG9hZC52YWx1ZSkpCiAgICAgIHJldHVybjsKICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICBvcmlnaW46ICJzdHJpbmciLAogICAgICBjb2RlOiAiaW52YWxpZF9mb3JtYXQiLAogICAgICBmb3JtYXQ6ICJyZWdleCIsCiAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLAogICAgICBwYXR0ZXJuOiBkZWYucGF0dGVybi50b1N0cmluZygpLAogICAgICBpbnN0LAogICAgICBjb250aW51ZTogIWRlZi5hYm9ydAogICAgfSk7CiAgfTsKfSk7CnZhciAkWm9kQ2hlY2tMb3dlckNhc2UgPSAkY29uc3RydWN0b3IoIiRab2RDaGVja0xvd2VyQ2FzZSIsIChpbnN0LCBkZWYpID0+IHsKICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSBsb3dlcmNhc2UpOwogICRab2RDaGVja1N0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7Cn0pOwp2YXIgJFpvZENoZWNrVXBwZXJDYXNlID0gJGNvbnN0cnVjdG9yKCIkWm9kQ2hlY2tVcHBlckNhc2UiLCAoaW5zdCwgZGVmKSA9PiB7CiAgZGVmLnBhdHRlcm4gPz8gKGRlZi5wYXR0ZXJuID0gdXBwZXJjYXNlKTsKICAkWm9kQ2hlY2tTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpOwp9KTsKdmFyICRab2RDaGVja0luY2x1ZGVzID0gJGNvbnN0cnVjdG9yKCIkWm9kQ2hlY2tJbmNsdWRlcyIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kQ2hlY2suaW5pdChpbnN0LCBkZWYpOwogIGNvbnN0IGVzY2FwZWRSZWdleCA9IGVzY2FwZVJlZ2V4KGRlZi5pbmNsdWRlcyk7CiAgY29uc3QgcGF0dGVybiA9IG5ldyBSZWdFeHAodHlwZW9mIGRlZi5wb3NpdGlvbiA9PT0gIm51bWJlciIgPyBgXi57JHtkZWYucG9zaXRpb259fSR7ZXNjYXBlZFJlZ2V4fWAgOiBlc2NhcGVkUmVnZXgpOwogIGRlZi5wYXR0ZXJuID0gcGF0dGVybjsKICBpbnN0Ll96b2Qub25hdHRhY2gucHVzaCgoaW5zdDIpID0+IHsKICAgIGNvbnN0IGJhZyA9IGluc3QyLl96b2QuYmFnOwogICAgYmFnLnBhdHRlcm5zID8/IChiYWcucGF0dGVybnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpKTsKICAgIGJhZy5wYXR0ZXJucy5hZGQocGF0dGVybik7CiAgfSk7CiAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHsKICAgIGlmIChwYXlsb2FkLnZhbHVlLmluY2x1ZGVzKGRlZi5pbmNsdWRlcywgZGVmLnBvc2l0aW9uKSkKICAgICAgcmV0dXJuOwogICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7CiAgICAgIG9yaWdpbjogInN0cmluZyIsCiAgICAgIGNvZGU6ICJpbnZhbGlkX2Zvcm1hdCIsCiAgICAgIGZvcm1hdDogImluY2x1ZGVzIiwKICAgICAgaW5jbHVkZXM6IGRlZi5pbmNsdWRlcywKICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsCiAgICAgIGluc3QsCiAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0CiAgICB9KTsKICB9Owp9KTsKdmFyICRab2RDaGVja1N0YXJ0c1dpdGggPSAkY29uc3RydWN0b3IoIiRab2RDaGVja1N0YXJ0c1dpdGgiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZENoZWNrLmluaXQoaW5zdCwgZGVmKTsKICBjb25zdCBwYXR0ZXJuID0gbmV3IFJlZ0V4cChgXiR7ZXNjYXBlUmVnZXgoZGVmLnByZWZpeCl9LipgKTsKICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSBwYXR0ZXJuKTsKICBpbnN0Ll96b2Qub25hdHRhY2gucHVzaCgoaW5zdDIpID0+IHsKICAgIGNvbnN0IGJhZyA9IGluc3QyLl96b2QuYmFnOwogICAgYmFnLnBhdHRlcm5zID8/IChiYWcucGF0dGVybnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpKTsKICAgIGJhZy5wYXR0ZXJucy5hZGQocGF0dGVybik7CiAgfSk7CiAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHsKICAgIGlmIChwYXlsb2FkLnZhbHVlLnN0YXJ0c1dpdGgoZGVmLnByZWZpeCkpCiAgICAgIHJldHVybjsKICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICBvcmlnaW46ICJzdHJpbmciLAogICAgICBjb2RlOiAiaW52YWxpZF9mb3JtYXQiLAogICAgICBmb3JtYXQ6ICJzdGFydHNfd2l0aCIsCiAgICAgIHByZWZpeDogZGVmLnByZWZpeCwKICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsCiAgICAgIGluc3QsCiAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0CiAgICB9KTsKICB9Owp9KTsKdmFyICRab2RDaGVja0VuZHNXaXRoID0gJGNvbnN0cnVjdG9yKCIkWm9kQ2hlY2tFbmRzV2l0aCIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kQ2hlY2suaW5pdChpbnN0LCBkZWYpOwogIGNvbnN0IHBhdHRlcm4gPSBuZXcgUmVnRXhwKGAuKiR7ZXNjYXBlUmVnZXgoZGVmLnN1ZmZpeCl9JGApOwogIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHBhdHRlcm4pOwogIGluc3QuX3pvZC5vbmF0dGFjaC5wdXNoKChpbnN0MikgPT4gewogICAgY29uc3QgYmFnID0gaW5zdDIuX3pvZC5iYWc7CiAgICBiYWcucGF0dGVybnMgPz8gKGJhZy5wYXR0ZXJucyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCkpOwogICAgYmFnLnBhdHRlcm5zLmFkZChwYXR0ZXJuKTsKICB9KTsKICBpbnN0Ll96b2QuY2hlY2sgPSAocGF5bG9hZCkgPT4gewogICAgaWYgKHBheWxvYWQudmFsdWUuZW5kc1dpdGgoZGVmLnN1ZmZpeCkpCiAgICAgIHJldHVybjsKICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICBvcmlnaW46ICJzdHJpbmciLAogICAgICBjb2RlOiAiaW52YWxpZF9mb3JtYXQiLAogICAgICBmb3JtYXQ6ICJlbmRzX3dpdGgiLAogICAgICBzdWZmaXg6IGRlZi5zdWZmaXgsCiAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLAogICAgICBpbnN0LAogICAgICBjb250aW51ZTogIWRlZi5hYm9ydAogICAgfSk7CiAgfTsKfSk7CmZ1bmN0aW9uIGhhbmRsZUNoZWNrUHJvcGVydHlSZXN1bHQocmVzdWx0LCBwYXlsb2FkLCBwcm9wZXJ0eSkgewogIGlmIChyZXN1bHQuaXNzdWVzLmxlbmd0aCkgewogICAgcGF5bG9hZC5pc3N1ZXMucHVzaCguLi5wcmVmaXhJc3N1ZXMocHJvcGVydHksIHJlc3VsdC5pc3N1ZXMpKTsKICB9Cn0KdmFyICRab2RDaGVja1Byb3BlcnR5ID0gJGNvbnN0cnVjdG9yKCIkWm9kQ2hlY2tQcm9wZXJ0eSIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kQ2hlY2suaW5pdChpbnN0LCBkZWYpOwogIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7CiAgICBjb25zdCByZXN1bHQgPSBkZWYuc2NoZW1hLl96b2QucnVuKHsKICAgICAgdmFsdWU6IHBheWxvYWQudmFsdWVbZGVmLnByb3BlcnR5XSwKICAgICAgaXNzdWVzOiBbXQogICAgfSwge30pOwogICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHsKICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQyKSA9PiBoYW5kbGVDaGVja1Byb3BlcnR5UmVzdWx0KHJlc3VsdDIsIHBheWxvYWQsIGRlZi5wcm9wZXJ0eSkpOwogICAgfQogICAgaGFuZGxlQ2hlY2tQcm9wZXJ0eVJlc3VsdChyZXN1bHQsIHBheWxvYWQsIGRlZi5wcm9wZXJ0eSk7CiAgICByZXR1cm47CiAgfTsKfSk7CnZhciAkWm9kQ2hlY2tNaW1lVHlwZSA9ICRjb25zdHJ1Y3RvcigiJFpvZENoZWNrTWltZVR5cGUiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZENoZWNrLmluaXQoaW5zdCwgZGVmKTsKICBjb25zdCBtaW1lU2V0ID0gbmV3IFNldChkZWYubWltZSk7CiAgaW5zdC5fem9kLm9uYXR0YWNoLnB1c2goKGluc3QyKSA9PiB7CiAgICBpbnN0Mi5fem9kLmJhZy5taW1lID0gZGVmLm1pbWU7CiAgfSk7CiAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHsKICAgIGlmIChtaW1lU2V0LmhhcyhwYXlsb2FkLnZhbHVlLnR5cGUpKQogICAgICByZXR1cm47CiAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHsKICAgICAgY29kZTogImludmFsaWRfdmFsdWUiLAogICAgICB2YWx1ZXM6IGRlZi5taW1lLAogICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZS50eXBlLAogICAgICBpbnN0LAogICAgICBjb250aW51ZTogIWRlZi5hYm9ydAogICAgfSk7CiAgfTsKfSk7CnZhciAkWm9kQ2hlY2tPdmVyd3JpdGUgPSAkY29uc3RydWN0b3IoIiRab2RDaGVja092ZXJ3cml0ZSIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kQ2hlY2suaW5pdChpbnN0LCBkZWYpOwogIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7CiAgICBwYXlsb2FkLnZhbHVlID0gZGVmLnR4KHBheWxvYWQudmFsdWUpOwogIH07Cn0pOwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL2RvYy5qcwp2YXIgRG9jID0gY2xhc3MgewogIGNvbnN0cnVjdG9yKGFyZ3MgPSBbXSkgewogICAgdGhpcy5jb250ZW50ID0gW107CiAgICB0aGlzLmluZGVudCA9IDA7CiAgICBpZiAodGhpcykKICAgICAgdGhpcy5hcmdzID0gYXJnczsKICB9CiAgaW5kZW50ZWQoZm4pIHsKICAgIHRoaXMuaW5kZW50ICs9IDE7CiAgICBmbih0aGlzKTsKICAgIHRoaXMuaW5kZW50IC09IDE7CiAgfQogIHdyaXRlKGFyZykgewogICAgaWYgKHR5cGVvZiBhcmcgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgYXJnKHRoaXMsIHsgZXhlY3V0aW9uOiAic3luYyIgfSk7CiAgICAgIGFyZyh0aGlzLCB7IGV4ZWN1dGlvbjogImFzeW5jIiB9KTsKICAgICAgcmV0dXJuOwogICAgfQogICAgY29uc3QgY29udGVudCA9IGFyZzsKICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgiXG4iKS5maWx0ZXIoKHgpID0+IHgpOwogICAgY29uc3QgbWluSW5kZW50ID0gTWF0aC5taW4oLi4ubGluZXMubWFwKCh4KSA9PiB4Lmxlbmd0aCAtIHgudHJpbVN0YXJ0KCkubGVuZ3RoKSk7CiAgICBjb25zdCBkZWRlbnRlZCA9IGxpbmVzLm1hcCgoeCkgPT4geC5zbGljZShtaW5JbmRlbnQpKS5tYXAoKHgpID0+ICIgIi5yZXBlYXQodGhpcy5pbmRlbnQgKiAyKSArIHgpOwogICAgZm9yIChjb25zdCBsaW5lIG9mIGRlZGVudGVkKSB7CiAgICAgIHRoaXMuY29udGVudC5wdXNoKGxpbmUpOwogICAgfQogIH0KICBjb21waWxlKCkgewogICAgY29uc3QgRiA9IEZ1bmN0aW9uOwogICAgY29uc3QgYXJncyA9IHRoaXMgPT0gbnVsbCA/IHZvaWQgMCA6IHRoaXMuYXJnczsKICAgIGNvbnN0IGNvbnRlbnQgPSAodGhpcyA9PSBudWxsID8gdm9pZCAwIDogdGhpcy5jb250ZW50KSA/PyBbYGBdOwogICAgY29uc3QgbGluZXMgPSBbLi4uY29udGVudC5tYXAoKHgpID0+IGAgICR7eH1gKV07CiAgICByZXR1cm4gbmV3IEYoLi4uYXJncywgbGluZXMuam9pbigiXG4iKSk7CiAgfQp9OwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL3ZlcnNpb25zLmpzCnZhciB2ZXJzaW9uID0gewogIG1ham9yOiA0LAogIG1pbm9yOiAxLAogIHBhdGNoOiA5Cn07CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2NvcmUvc2NoZW1hcy5qcwp2YXIgJFpvZFR5cGUgPSAkY29uc3RydWN0b3IoIiRab2RUeXBlIiwgKGluc3QsIGRlZikgPT4gewogIHZhciBfYTI7CiAgdmFyIF9hOwogIGluc3QgPz8gKGluc3QgPSB7fSk7CiAgaW5zdC5fem9kLmRlZiA9IGRlZjsKICBpbnN0Ll96b2QuYmFnID0gaW5zdC5fem9kLmJhZyB8fCB7fTsKICBpbnN0Ll96b2QudmVyc2lvbiA9IHZlcnNpb247CiAgY29uc3QgY2hlY2tzID0gWy4uLmluc3QuX3pvZC5kZWYuY2hlY2tzID8/IFtdXTsKICBpZiAoaW5zdC5fem9kLnRyYWl0cy5oYXMoIiRab2RDaGVjayIpKSB7CiAgICBjaGVja3MudW5zaGlmdChpbnN0KTsKICB9CiAgZm9yIChjb25zdCBjaCBvZiBjaGVja3MpIHsKICAgIGZvciAoY29uc3QgZm4gb2YgY2guX3pvZC5vbmF0dGFjaCkgewogICAgICBmbihpbnN0KTsKICAgIH0KICB9CiAgaWYgKGNoZWNrcy5sZW5ndGggPT09IDApIHsKICAgIChfYSA9IGluc3QuX3pvZCkuZGVmZXJyZWQgPz8gKF9hLmRlZmVycmVkID0gW10pOwogICAgKF9hMiA9IGluc3QuX3pvZC5kZWZlcnJlZCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5wdXNoKCgpID0+IHsKICAgICAgaW5zdC5fem9kLnJ1biA9IGluc3QuX3pvZC5wYXJzZTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICBjb25zdCBydW5DaGVja3MgPSAocGF5bG9hZCwgY2hlY2tzMiwgY3R4KSA9PiB7CiAgICAgIGxldCBpc0Fib3J0ZWQgPSBhYm9ydGVkKHBheWxvYWQpOwogICAgICBsZXQgYXN5bmNSZXN1bHQ7CiAgICAgIGZvciAoY29uc3QgY2ggb2YgY2hlY2tzMikgewogICAgICAgIGlmIChjaC5fem9kLmRlZi53aGVuKSB7CiAgICAgICAgICBjb25zdCBzaG91bGRSdW4gPSBjaC5fem9kLmRlZi53aGVuKHBheWxvYWQpOwogICAgICAgICAgaWYgKCFzaG91bGRSdW4pCiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gZWxzZSBpZiAoaXNBYm9ydGVkKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgY29uc3QgY3VyckxlbiA9IHBheWxvYWQuaXNzdWVzLmxlbmd0aDsKICAgICAgICBjb25zdCBfID0gY2guX3pvZC5jaGVjayhwYXlsb2FkKTsKICAgICAgICBpZiAoXyBpbnN0YW5jZW9mIFByb21pc2UgJiYgKGN0eCA9PSBudWxsID8gdm9pZCAwIDogY3R4LmFzeW5jKSA9PT0gZmFsc2UpIHsKICAgICAgICAgIHRocm93IG5ldyAkWm9kQXN5bmNFcnJvcigpOwogICAgICAgIH0KICAgICAgICBpZiAoYXN5bmNSZXN1bHQgfHwgXyBpbnN0YW5jZW9mIFByb21pc2UpIHsKICAgICAgICAgIGFzeW5jUmVzdWx0ID0gKGFzeW5jUmVzdWx0ID8/IFByb21pc2UucmVzb2x2ZSgpKS50aGVuKGFzeW5jICgpID0+IHsKICAgICAgICAgICAgYXdhaXQgXzsKICAgICAgICAgICAgY29uc3QgbmV4dExlbiA9IHBheWxvYWQuaXNzdWVzLmxlbmd0aDsKICAgICAgICAgICAgaWYgKG5leHRMZW4gPT09IGN1cnJMZW4pCiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICBpZiAoIWlzQWJvcnRlZCkKICAgICAgICAgICAgICBpc0Fib3J0ZWQgPSBhYm9ydGVkKHBheWxvYWQsIGN1cnJMZW4pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IG5leHRMZW4gPSBwYXlsb2FkLmlzc3Vlcy5sZW5ndGg7CiAgICAgICAgICBpZiAobmV4dExlbiA9PT0gY3VyckxlbikKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICBpZiAoIWlzQWJvcnRlZCkKICAgICAgICAgICAgaXNBYm9ydGVkID0gYWJvcnRlZChwYXlsb2FkLCBjdXJyTGVuKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGFzeW5jUmVzdWx0KSB7CiAgICAgICAgcmV0dXJuIGFzeW5jUmVzdWx0LnRoZW4oKCkgPT4gewogICAgICAgICAgcmV0dXJuIHBheWxvYWQ7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHBheWxvYWQ7CiAgICB9OwogICAgY29uc3QgaGFuZGxlQ2FuYXJ5UmVzdWx0ID0gKGNhbmFyeSwgcGF5bG9hZCwgY3R4KSA9PiB7CiAgICAgIGlmIChhYm9ydGVkKGNhbmFyeSkpIHsKICAgICAgICBjYW5hcnkuYWJvcnRlZCA9IHRydWU7CiAgICAgICAgcmV0dXJuIGNhbmFyeTsKICAgICAgfQogICAgICBjb25zdCBjaGVja1Jlc3VsdCA9IHJ1bkNoZWNrcyhwYXlsb2FkLCBjaGVja3MsIGN0eCk7CiAgICAgIGlmIChjaGVja1Jlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHsKICAgICAgICBpZiAoY3R4LmFzeW5jID09PSBmYWxzZSkKICAgICAgICAgIHRocm93IG5ldyAkWm9kQXN5bmNFcnJvcigpOwogICAgICAgIHJldHVybiBjaGVja1Jlc3VsdC50aGVuKChjaGVja1Jlc3VsdDIpID0+IGluc3QuX3pvZC5wYXJzZShjaGVja1Jlc3VsdDIsIGN0eCkpOwogICAgICB9CiAgICAgIHJldHVybiBpbnN0Ll96b2QucGFyc2UoY2hlY2tSZXN1bHQsIGN0eCk7CiAgICB9OwogICAgaW5zdC5fem9kLnJ1biA9IChwYXlsb2FkLCBjdHgpID0+IHsKICAgICAgaWYgKGN0eC5za2lwQ2hlY2tzKSB7CiAgICAgICAgcmV0dXJuIGluc3QuX3pvZC5wYXJzZShwYXlsb2FkLCBjdHgpOwogICAgICB9CiAgICAgIGlmIChjdHguZGlyZWN0aW9uID09PSAiYmFja3dhcmQiKSB7CiAgICAgICAgY29uc3QgY2FuYXJ5ID0gaW5zdC5fem9kLnBhcnNlKHsgdmFsdWU6IHBheWxvYWQudmFsdWUsIGlzc3VlczogW10gfSwgeyAuLi5jdHgsIHNraXBDaGVja3M6IHRydWUgfSk7CiAgICAgICAgaWYgKGNhbmFyeSBpbnN0YW5jZW9mIFByb21pc2UpIHsKICAgICAgICAgIHJldHVybiBjYW5hcnkudGhlbigoY2FuYXJ5MikgPT4gewogICAgICAgICAgICByZXR1cm4gaGFuZGxlQ2FuYXJ5UmVzdWx0KGNhbmFyeTIsIHBheWxvYWQsIGN0eCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGhhbmRsZUNhbmFyeVJlc3VsdChjYW5hcnksIHBheWxvYWQsIGN0eCk7CiAgICAgIH0KICAgICAgY29uc3QgcmVzdWx0ID0gaW5zdC5fem9kLnBhcnNlKHBheWxvYWQsIGN0eCk7CiAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7CiAgICAgICAgaWYgKGN0eC5hc3luYyA9PT0gZmFsc2UpCiAgICAgICAgICB0aHJvdyBuZXcgJFpvZEFzeW5jRXJyb3IoKTsKICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oKHJlc3VsdDIpID0+IHJ1bkNoZWNrcyhyZXN1bHQyLCBjaGVja3MsIGN0eCkpOwogICAgICB9CiAgICAgIHJldHVybiBydW5DaGVja3MocmVzdWx0LCBjaGVja3MsIGN0eCk7CiAgICB9OwogIH0KICBpbnN0WyJ+c3RhbmRhcmQiXSA9IHsKICAgIHZhbGlkYXRlOiAodmFsdWUpID0+IHsKICAgICAgdmFyIF9hMzsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByID0gc2FmZVBhcnNlKGluc3QsIHZhbHVlKTsKICAgICAgICByZXR1cm4gci5zdWNjZXNzID8geyB2YWx1ZTogci5kYXRhIH0gOiB7IGlzc3VlczogKF9hMyA9IHIuZXJyb3IpID09IG51bGwgPyB2b2lkIDAgOiBfYTMuaXNzdWVzIH07CiAgICAgIH0gY2F0Y2ggKF8pIHsKICAgICAgICByZXR1cm4gc2FmZVBhcnNlQXN5bmMoaW5zdCwgdmFsdWUpLnRoZW4oKHIpID0+IHsKICAgICAgICAgIHZhciBfYTQ7CiAgICAgICAgICByZXR1cm4gci5zdWNjZXNzID8geyB2YWx1ZTogci5kYXRhIH0gOiB7IGlzc3VlczogKF9hNCA9IHIuZXJyb3IpID09IG51bGwgPyB2b2lkIDAgOiBfYTQuaXNzdWVzIH07CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICB2ZW5kb3I6ICJ6b2QiLAogICAgdmVyc2lvbjogMQogIH07Cn0pOwp2YXIgJFpvZFN0cmluZyA9ICRjb25zdHJ1Y3RvcigiJFpvZFN0cmluZyIsIChpbnN0LCBkZWYpID0+IHsKICB2YXIgX2E7CiAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGluc3QuX3pvZC5wYXR0ZXJuID0gWy4uLigoX2EgPSBpbnN0ID09IG51bGwgPyB2b2lkIDAgOiBpbnN0Ll96b2QuYmFnKSA9PSBudWxsID8gdm9pZCAwIDogX2EucGF0dGVybnMpID8/IFtdXS5wb3AoKSA/PyBzdHJpbmcoaW5zdC5fem9kLmJhZyk7CiAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIF8pID0+IHsKICAgIGlmIChkZWYuY29lcmNlKQogICAgICB0cnkgewogICAgICAgIHBheWxvYWQudmFsdWUgPSBTdHJpbmcocGF5bG9hZC52YWx1ZSk7CiAgICAgIH0gY2F0Y2ggKF8yKSB7CiAgICAgIH0KICAgIGlmICh0eXBlb2YgcGF5bG9hZC52YWx1ZSA9PT0gInN0cmluZyIpCiAgICAgIHJldHVybiBwYXlsb2FkOwogICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7CiAgICAgIGV4cGVjdGVkOiAic3RyaW5nIiwKICAgICAgY29kZTogImludmFsaWRfdHlwZSIsCiAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLAogICAgICBpbnN0CiAgICB9KTsKICAgIHJldHVybiBwYXlsb2FkOwogIH07Cn0pOwp2YXIgJFpvZFN0cmluZ0Zvcm1hdCA9ICRjb25zdHJ1Y3RvcigiJFpvZFN0cmluZ0Zvcm1hdCIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kQ2hlY2tTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpOwogICRab2RTdHJpbmcuaW5pdChpbnN0LCBkZWYpOwp9KTsKdmFyICRab2RHVUlEID0gJGNvbnN0cnVjdG9yKCIkWm9kR1VJRCIsIChpbnN0LCBkZWYpID0+IHsKICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSBndWlkKTsKICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTsKfSk7CnZhciAkWm9kVVVJRCA9ICRjb25zdHJ1Y3RvcigiJFpvZFVVSUQiLCAoaW5zdCwgZGVmKSA9PiB7CiAgaWYgKGRlZi52ZXJzaW9uKSB7CiAgICBjb25zdCB2ZXJzaW9uTWFwID0gewogICAgICB2MTogMSwKICAgICAgdjI6IDIsCiAgICAgIHYzOiAzLAogICAgICB2NDogNCwKICAgICAgdjU6IDUsCiAgICAgIHY2OiA2LAogICAgICB2NzogNywKICAgICAgdjg6IDgKICAgIH07CiAgICBjb25zdCB2ID0gdmVyc2lvbk1hcFtkZWYudmVyc2lvbl07CiAgICBpZiAodiA9PT0gdm9pZCAwKQogICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgVVVJRCB2ZXJzaW9uOiAiJHtkZWYudmVyc2lvbn0iYCk7CiAgICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSB1dWlkKHYpKTsKICB9IGVsc2UKICAgIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHV1aWQoKSk7CiAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7Cn0pOwp2YXIgJFpvZEVtYWlsID0gJGNvbnN0cnVjdG9yKCIkWm9kRW1haWwiLCAoaW5zdCwgZGVmKSA9PiB7CiAgZGVmLnBhdHRlcm4gPz8gKGRlZi5wYXR0ZXJuID0gZW1haWwpOwogICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpOwp9KTsKdmFyICRab2RVUkwgPSAkY29uc3RydWN0b3IoIiRab2RVUkwiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7CiAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHsKICAgIHRyeSB7CiAgICAgIGNvbnN0IHRyaW1tZWQgPSBwYXlsb2FkLnZhbHVlLnRyaW0oKTsKICAgICAgY29uc3QgdXJsMiA9IG5ldyBVUkwodHJpbW1lZCk7CiAgICAgIGlmIChkZWYuaG9zdG5hbWUpIHsKICAgICAgICBkZWYuaG9zdG5hbWUubGFzdEluZGV4ID0gMDsKICAgICAgICBpZiAoIWRlZi5ob3N0bmFtZS50ZXN0KHVybDIuaG9zdG5hbWUpKSB7CiAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHsKICAgICAgICAgICAgY29kZTogImludmFsaWRfZm9ybWF0IiwKICAgICAgICAgICAgZm9ybWF0OiAidXJsIiwKICAgICAgICAgICAgbm90ZTogIkludmFsaWQgaG9zdG5hbWUiLAogICAgICAgICAgICBwYXR0ZXJuOiBob3N0bmFtZS5zb3VyY2UsCiAgICAgICAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLAogICAgICAgICAgICBpbnN0LAogICAgICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChkZWYucHJvdG9jb2wpIHsKICAgICAgICBkZWYucHJvdG9jb2wubGFzdEluZGV4ID0gMDsKICAgICAgICBpZiAoIWRlZi5wcm90b2NvbC50ZXN0KHVybDIucHJvdG9jb2wuZW5kc1dpdGgoIjoiKSA/IHVybDIucHJvdG9jb2wuc2xpY2UoMCwgLTEpIDogdXJsMi5wcm90b2NvbCkpIHsKICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICAgICAgICBjb2RlOiAiaW52YWxpZF9mb3JtYXQiLAogICAgICAgICAgICBmb3JtYXQ6ICJ1cmwiLAogICAgICAgICAgICBub3RlOiAiSW52YWxpZCBwcm90b2NvbCIsCiAgICAgICAgICAgIHBhdHRlcm46IGRlZi5wcm90b2NvbC5zb3VyY2UsCiAgICAgICAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLAogICAgICAgICAgICBpbnN0LAogICAgICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChkZWYubm9ybWFsaXplKSB7CiAgICAgICAgcGF5bG9hZC52YWx1ZSA9IHVybDIuaHJlZjsKICAgICAgfSBlbHNlIHsKICAgICAgICBwYXlsb2FkLnZhbHVlID0gdHJpbW1lZDsKICAgICAgfQogICAgICByZXR1cm47CiAgICB9IGNhdGNoIChfKSB7CiAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICAgIGNvZGU6ICJpbnZhbGlkX2Zvcm1hdCIsCiAgICAgICAgZm9ybWF0OiAidXJsIiwKICAgICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSwKICAgICAgICBpbnN0LAogICAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0CiAgICAgIH0pOwogICAgfQogIH07Cn0pOwp2YXIgJFpvZEVtb2ppID0gJGNvbnN0cnVjdG9yKCIkWm9kRW1vamkiLCAoaW5zdCwgZGVmKSA9PiB7CiAgZGVmLnBhdHRlcm4gPz8gKGRlZi5wYXR0ZXJuID0gZW1vamkoKSk7CiAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7Cn0pOwp2YXIgJFpvZE5hbm9JRCA9ICRjb25zdHJ1Y3RvcigiJFpvZE5hbm9JRCIsIChpbnN0LCBkZWYpID0+IHsKICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSBuYW5vaWQpOwogICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpOwp9KTsKdmFyICRab2RDVUlEID0gJGNvbnN0cnVjdG9yKCIkWm9kQ1VJRCIsIChpbnN0LCBkZWYpID0+IHsKICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSBjdWlkKTsKICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTsKfSk7CnZhciAkWm9kQ1VJRDIgPSAkY29uc3RydWN0b3IoIiRab2RDVUlEMiIsIChpbnN0LCBkZWYpID0+IHsKICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSBjdWlkMik7CiAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7Cn0pOwp2YXIgJFpvZFVMSUQgPSAkY29uc3RydWN0b3IoIiRab2RVTElEIiwgKGluc3QsIGRlZikgPT4gewogIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IHVsaWQpOwogICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpOwp9KTsKdmFyICRab2RYSUQgPSAkY29uc3RydWN0b3IoIiRab2RYSUQiLCAoaW5zdCwgZGVmKSA9PiB7CiAgZGVmLnBhdHRlcm4gPz8gKGRlZi5wYXR0ZXJuID0geGlkKTsKICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTsKfSk7CnZhciAkWm9kS1NVSUQgPSAkY29uc3RydWN0b3IoIiRab2RLU1VJRCIsIChpbnN0LCBkZWYpID0+IHsKICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSBrc3VpZCk7CiAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7Cn0pOwp2YXIgJFpvZElTT0RhdGVUaW1lID0gJGNvbnN0cnVjdG9yKCIkWm9kSVNPRGF0ZVRpbWUiLCAoaW5zdCwgZGVmKSA9PiB7CiAgZGVmLnBhdHRlcm4gPz8gKGRlZi5wYXR0ZXJuID0gZGF0ZXRpbWUoZGVmKSk7CiAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7Cn0pOwp2YXIgJFpvZElTT0RhdGUgPSAkY29uc3RydWN0b3IoIiRab2RJU09EYXRlIiwgKGluc3QsIGRlZikgPT4gewogIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IGRhdGUpOwogICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpOwp9KTsKdmFyICRab2RJU09UaW1lID0gJGNvbnN0cnVjdG9yKCIkWm9kSVNPVGltZSIsIChpbnN0LCBkZWYpID0+IHsKICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSB0aW1lKGRlZikpOwogICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpOwp9KTsKdmFyICRab2RJU09EdXJhdGlvbiA9ICRjb25zdHJ1Y3RvcigiJFpvZElTT0R1cmF0aW9uIiwgKGluc3QsIGRlZikgPT4gewogIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IGR1cmF0aW9uKTsKICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTsKfSk7CnZhciAkWm9kSVB2NCA9ICRjb25zdHJ1Y3RvcigiJFpvZElQdjQiLCAoaW5zdCwgZGVmKSA9PiB7CiAgZGVmLnBhdHRlcm4gPz8gKGRlZi5wYXR0ZXJuID0gaXB2NCk7CiAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7CiAgaW5zdC5fem9kLm9uYXR0YWNoLnB1c2goKGluc3QyKSA9PiB7CiAgICBjb25zdCBiYWcgPSBpbnN0Mi5fem9kLmJhZzsKICAgIGJhZy5mb3JtYXQgPSBgaXB2NGA7CiAgfSk7Cn0pOwp2YXIgJFpvZElQdjYgPSAkY29uc3RydWN0b3IoIiRab2RJUHY2IiwgKGluc3QsIGRlZikgPT4gewogIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IGlwdjYpOwogICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpOwogIGluc3QuX3pvZC5vbmF0dGFjaC5wdXNoKChpbnN0MikgPT4gewogICAgY29uc3QgYmFnID0gaW5zdDIuX3pvZC5iYWc7CiAgICBiYWcuZm9ybWF0ID0gYGlwdjZgOwogIH0pOwogIGluc3QuX3pvZC5jaGVjayA9IChwYXlsb2FkKSA9PiB7CiAgICB0cnkgewogICAgICBuZXcgVVJMKGBodHRwOi8vWyR7cGF5bG9hZC52YWx1ZX1dYCk7CiAgICB9IGNhdGNoIHsKICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7CiAgICAgICAgY29kZTogImludmFsaWRfZm9ybWF0IiwKICAgICAgICBmb3JtYXQ6ICJpcHY2IiwKICAgICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSwKICAgICAgICBpbnN0LAogICAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0CiAgICAgIH0pOwogICAgfQogIH07Cn0pOwp2YXIgJFpvZENJRFJ2NCA9ICRjb25zdHJ1Y3RvcigiJFpvZENJRFJ2NCIsIChpbnN0LCBkZWYpID0+IHsKICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSBjaWRydjQpOwogICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpOwp9KTsKdmFyICRab2RDSURSdjYgPSAkY29uc3RydWN0b3IoIiRab2RDSURSdjYiLCAoaW5zdCwgZGVmKSA9PiB7CiAgZGVmLnBhdHRlcm4gPz8gKGRlZi5wYXR0ZXJuID0gY2lkcnY2KTsKICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTsKICBpbnN0Ll96b2QuY2hlY2sgPSAocGF5bG9hZCkgPT4gewogICAgY29uc3QgcGFydHMgPSBwYXlsb2FkLnZhbHVlLnNwbGl0KCIvIik7CiAgICB0cnkgewogICAgICBpZiAocGFydHMubGVuZ3RoICE9PSAyKQogICAgICAgIHRocm93IG5ldyBFcnJvcigpOwogICAgICBjb25zdCBbYWRkcmVzcywgcHJlZml4XSA9IHBhcnRzOwogICAgICBpZiAoIXByZWZpeCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTsKICAgICAgY29uc3QgcHJlZml4TnVtID0gTnVtYmVyKHByZWZpeCk7CiAgICAgIGlmIChgJHtwcmVmaXhOdW19YCAhPT0gcHJlZml4KQogICAgICAgIHRocm93IG5ldyBFcnJvcigpOwogICAgICBpZiAocHJlZml4TnVtIDwgMCB8fCBwcmVmaXhOdW0gPiAxMjgpCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7CiAgICAgIG5ldyBVUkwoYGh0dHA6Ly9bJHthZGRyZXNzfV1gKTsKICAgIH0gY2F0Y2ggewogICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHsKICAgICAgICBjb2RlOiAiaW52YWxpZF9mb3JtYXQiLAogICAgICAgIGZvcm1hdDogImNpZHJ2NiIsCiAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsCiAgICAgICAgaW5zdCwKICAgICAgICBjb250aW51ZTogIWRlZi5hYm9ydAogICAgICB9KTsKICAgIH0KICB9Owp9KTsKZnVuY3Rpb24gaXNWYWxpZEJhc2U2NChkYXRhKSB7CiAgaWYgKGRhdGEgPT09ICIiKQogICAgcmV0dXJuIHRydWU7CiAgaWYgKGRhdGEubGVuZ3RoICUgNCAhPT0gMCkKICAgIHJldHVybiBmYWxzZTsKICB0cnkgewogICAgYXRvYihkYXRhKTsKICAgIHJldHVybiB0cnVlOwogIH0gY2F0Y2ggewogICAgcmV0dXJuIGZhbHNlOwogIH0KfQp2YXIgJFpvZEJhc2U2NCA9ICRjb25zdHJ1Y3RvcigiJFpvZEJhc2U2NCIsIChpbnN0LCBkZWYpID0+IHsKICBkZWYucGF0dGVybiA/PyAoZGVmLnBhdHRlcm4gPSBiYXNlNjQpOwogICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpOwogIGluc3QuX3pvZC5vbmF0dGFjaC5wdXNoKChpbnN0MikgPT4gewogICAgaW5zdDIuX3pvZC5iYWcuY29udGVudEVuY29kaW5nID0gImJhc2U2NCI7CiAgfSk7CiAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHsKICAgIGlmIChpc1ZhbGlkQmFzZTY0KHBheWxvYWQudmFsdWUpKQogICAgICByZXR1cm47CiAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHsKICAgICAgY29kZTogImludmFsaWRfZm9ybWF0IiwKICAgICAgZm9ybWF0OiAiYmFzZTY0IiwKICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsCiAgICAgIGluc3QsCiAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0CiAgICB9KTsKICB9Owp9KTsKZnVuY3Rpb24gaXNWYWxpZEJhc2U2NFVSTChkYXRhKSB7CiAgaWYgKCFiYXNlNjR1cmwudGVzdChkYXRhKSkKICAgIHJldHVybiBmYWxzZTsKICBjb25zdCBiYXNlNjQzID0gZGF0YS5yZXBsYWNlKC9bLV9dL2csIChjKSA9PiBjID09PSAiLSIgPyAiKyIgOiAiLyIpOwogIGNvbnN0IHBhZGRlZCA9IGJhc2U2NDMucGFkRW5kKE1hdGguY2VpbChiYXNlNjQzLmxlbmd0aCAvIDQpICogNCwgIj0iKTsKICByZXR1cm4gaXNWYWxpZEJhc2U2NChwYWRkZWQpOwp9CnZhciAkWm9kQmFzZTY0VVJMID0gJGNvbnN0cnVjdG9yKCIkWm9kQmFzZTY0VVJMIiwgKGluc3QsIGRlZikgPT4gewogIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IGJhc2U2NHVybCk7CiAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7CiAgaW5zdC5fem9kLm9uYXR0YWNoLnB1c2goKGluc3QyKSA9PiB7CiAgICBpbnN0Mi5fem9kLmJhZy5jb250ZW50RW5jb2RpbmcgPSAiYmFzZTY0dXJsIjsKICB9KTsKICBpbnN0Ll96b2QuY2hlY2sgPSAocGF5bG9hZCkgPT4gewogICAgaWYgKGlzVmFsaWRCYXNlNjRVUkwocGF5bG9hZC52YWx1ZSkpCiAgICAgIHJldHVybjsKICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICBjb2RlOiAiaW52YWxpZF9mb3JtYXQiLAogICAgICBmb3JtYXQ6ICJiYXNlNjR1cmwiLAogICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSwKICAgICAgaW5zdCwKICAgICAgY29udGludWU6ICFkZWYuYWJvcnQKICAgIH0pOwogIH07Cn0pOwp2YXIgJFpvZEUxNjQgPSAkY29uc3RydWN0b3IoIiRab2RFMTY0IiwgKGluc3QsIGRlZikgPT4gewogIGRlZi5wYXR0ZXJuID8/IChkZWYucGF0dGVybiA9IGUxNjQpOwogICRab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpOwp9KTsKZnVuY3Rpb24gaXNWYWxpZEpXVCh0b2tlbiwgYWxnb3JpdGhtID0gbnVsbCkgewogIHRyeSB7CiAgICBjb25zdCB0b2tlbnNQYXJ0cyA9IHRva2VuLnNwbGl0KCIuIik7CiAgICBpZiAodG9rZW5zUGFydHMubGVuZ3RoICE9PSAzKQogICAgICByZXR1cm4gZmFsc2U7CiAgICBjb25zdCBbaGVhZGVyXSA9IHRva2Vuc1BhcnRzOwogICAgaWYgKCFoZWFkZXIpCiAgICAgIHJldHVybiBmYWxzZTsKICAgIGNvbnN0IHBhcnNlZEhlYWRlciA9IEpTT04ucGFyc2UoYXRvYihoZWFkZXIpKTsKICAgIGlmICgidHlwIiBpbiBwYXJzZWRIZWFkZXIgJiYgKHBhcnNlZEhlYWRlciA9PSBudWxsID8gdm9pZCAwIDogcGFyc2VkSGVhZGVyLnR5cCkgIT09ICJKV1QiKQogICAgICByZXR1cm4gZmFsc2U7CiAgICBpZiAoIXBhcnNlZEhlYWRlci5hbGcpCiAgICAgIHJldHVybiBmYWxzZTsKICAgIGlmIChhbGdvcml0aG0gJiYgKCEoImFsZyIgaW4gcGFyc2VkSGVhZGVyKSB8fCBwYXJzZWRIZWFkZXIuYWxnICE9PSBhbGdvcml0aG0pKQogICAgICByZXR1cm4gZmFsc2U7CiAgICByZXR1cm4gdHJ1ZTsKICB9IGNhdGNoIHsKICAgIHJldHVybiBmYWxzZTsKICB9Cn0KdmFyICRab2RKV1QgPSAkY29uc3RydWN0b3IoIiRab2RKV1QiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7CiAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHsKICAgIGlmIChpc1ZhbGlkSldUKHBheWxvYWQudmFsdWUsIGRlZi5hbGcpKQogICAgICByZXR1cm47CiAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHsKICAgICAgY29kZTogImludmFsaWRfZm9ybWF0IiwKICAgICAgZm9ybWF0OiAiand0IiwKICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsCiAgICAgIGluc3QsCiAgICAgIGNvbnRpbnVlOiAhZGVmLmFib3J0CiAgICB9KTsKICB9Owp9KTsKdmFyICRab2RDdXN0b21TdHJpbmdGb3JtYXQgPSAkY29uc3RydWN0b3IoIiRab2RDdXN0b21TdHJpbmdGb3JtYXQiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7CiAgaW5zdC5fem9kLmNoZWNrID0gKHBheWxvYWQpID0+IHsKICAgIGlmIChkZWYuZm4ocGF5bG9hZC52YWx1ZSkpCiAgICAgIHJldHVybjsKICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICBjb2RlOiAiaW52YWxpZF9mb3JtYXQiLAogICAgICBmb3JtYXQ6IGRlZi5mb3JtYXQsCiAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLAogICAgICBpbnN0LAogICAgICBjb250aW51ZTogIWRlZi5hYm9ydAogICAgfSk7CiAgfTsKfSk7CnZhciAkWm9kTnVtYmVyID0gJGNvbnN0cnVjdG9yKCIkWm9kTnVtYmVyIiwgKGluc3QsIGRlZikgPT4gewogICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKICBpbnN0Ll96b2QucGF0dGVybiA9IGluc3QuX3pvZC5iYWcucGF0dGVybiA/PyBudW1iZXI7CiAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIF9jdHgpID0+IHsKICAgIGlmIChkZWYuY29lcmNlKQogICAgICB0cnkgewogICAgICAgIHBheWxvYWQudmFsdWUgPSBOdW1iZXIocGF5bG9hZC52YWx1ZSk7CiAgICAgIH0gY2F0Y2ggKF8pIHsKICAgICAgfQogICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlOwogICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gIm51bWJlciIgJiYgIU51bWJlci5pc05hTihpbnB1dCkgJiYgTnVtYmVyLmlzRmluaXRlKGlucHV0KSkgewogICAgICByZXR1cm4gcGF5bG9hZDsKICAgIH0KICAgIGNvbnN0IHJlY2VpdmVkID0gdHlwZW9mIGlucHV0ID09PSAibnVtYmVyIiA/IE51bWJlci5pc05hTihpbnB1dCkgPyAiTmFOIiA6ICFOdW1iZXIuaXNGaW5pdGUoaW5wdXQpID8gIkluZmluaXR5IiA6IHZvaWQgMCA6IHZvaWQgMDsKICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICBleHBlY3RlZDogIm51bWJlciIsCiAgICAgIGNvZGU6ICJpbnZhbGlkX3R5cGUiLAogICAgICBpbnB1dCwKICAgICAgaW5zdCwKICAgICAgLi4ucmVjZWl2ZWQgPyB7IHJlY2VpdmVkIH0gOiB7fQogICAgfSk7CiAgICByZXR1cm4gcGF5bG9hZDsKICB9Owp9KTsKdmFyICRab2ROdW1iZXJGb3JtYXQgPSAkY29uc3RydWN0b3IoIiRab2ROdW1iZXIiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZENoZWNrTnVtYmVyRm9ybWF0LmluaXQoaW5zdCwgZGVmKTsKICAkWm9kTnVtYmVyLmluaXQoaW5zdCwgZGVmKTsKfSk7CnZhciAkWm9kQm9vbGVhbiA9ICRjb25zdHJ1Y3RvcigiJFpvZEJvb2xlYW4iLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGluc3QuX3pvZC5wYXR0ZXJuID0gYm9vbGVhbjsKICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgX2N0eCkgPT4gewogICAgaWYgKGRlZi5jb2VyY2UpCiAgICAgIHRyeSB7CiAgICAgICAgcGF5bG9hZC52YWx1ZSA9IEJvb2xlYW4ocGF5bG9hZC52YWx1ZSk7CiAgICAgIH0gY2F0Y2ggKF8pIHsKICAgICAgfQogICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlOwogICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gImJvb2xlYW4iKQogICAgICByZXR1cm4gcGF5bG9hZDsKICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICBleHBlY3RlZDogImJvb2xlYW4iLAogICAgICBjb2RlOiAiaW52YWxpZF90eXBlIiwKICAgICAgaW5wdXQsCiAgICAgIGluc3QKICAgIH0pOwogICAgcmV0dXJuIHBheWxvYWQ7CiAgfTsKfSk7CnZhciAkWm9kQmlnSW50ID0gJGNvbnN0cnVjdG9yKCIkWm9kQmlnSW50IiwgKGluc3QsIGRlZikgPT4gewogICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKICBpbnN0Ll96b2QucGF0dGVybiA9IGJpZ2ludDsKICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgX2N0eCkgPT4gewogICAgaWYgKGRlZi5jb2VyY2UpCiAgICAgIHRyeSB7CiAgICAgICAgcGF5bG9hZC52YWx1ZSA9IEJpZ0ludChwYXlsb2FkLnZhbHVlKTsKICAgICAgfSBjYXRjaCAoXykgewogICAgICB9CiAgICBpZiAodHlwZW9mIHBheWxvYWQudmFsdWUgPT09ICJiaWdpbnQiKQogICAgICByZXR1cm4gcGF5bG9hZDsKICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICBleHBlY3RlZDogImJpZ2ludCIsCiAgICAgIGNvZGU6ICJpbnZhbGlkX3R5cGUiLAogICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSwKICAgICAgaW5zdAogICAgfSk7CiAgICByZXR1cm4gcGF5bG9hZDsKICB9Owp9KTsKdmFyICRab2RCaWdJbnRGb3JtYXQgPSAkY29uc3RydWN0b3IoIiRab2RCaWdJbnQiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZENoZWNrQmlnSW50Rm9ybWF0LmluaXQoaW5zdCwgZGVmKTsKICAkWm9kQmlnSW50LmluaXQoaW5zdCwgZGVmKTsKfSk7CnZhciAkWm9kU3ltYm9sID0gJGNvbnN0cnVjdG9yKCIkWm9kU3ltYm9sIiwgKGluc3QsIGRlZikgPT4gewogICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgX2N0eCkgPT4gewogICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlOwogICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gInN5bWJvbCIpCiAgICAgIHJldHVybiBwYXlsb2FkOwogICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7CiAgICAgIGV4cGVjdGVkOiAic3ltYm9sIiwKICAgICAgY29kZTogImludmFsaWRfdHlwZSIsCiAgICAgIGlucHV0LAogICAgICBpbnN0CiAgICB9KTsKICAgIHJldHVybiBwYXlsb2FkOwogIH07Cn0pOwp2YXIgJFpvZFVuZGVmaW5lZCA9ICRjb25zdHJ1Y3RvcigiJFpvZFVuZGVmaW5lZCIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7CiAgaW5zdC5fem9kLnBhdHRlcm4gPSBfdW5kZWZpbmVkOwogIGluc3QuX3pvZC52YWx1ZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbdm9pZCAwXSk7CiAgaW5zdC5fem9kLm9wdGluID0gIm9wdGlvbmFsIjsKICBpbnN0Ll96b2Qub3B0b3V0ID0gIm9wdGlvbmFsIjsKICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgX2N0eCkgPT4gewogICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlOwogICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gInVuZGVmaW5lZCIpCiAgICAgIHJldHVybiBwYXlsb2FkOwogICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7CiAgICAgIGV4cGVjdGVkOiAidW5kZWZpbmVkIiwKICAgICAgY29kZTogImludmFsaWRfdHlwZSIsCiAgICAgIGlucHV0LAogICAgICBpbnN0CiAgICB9KTsKICAgIHJldHVybiBwYXlsb2FkOwogIH07Cn0pOwp2YXIgJFpvZE51bGwgPSAkY29uc3RydWN0b3IoIiRab2ROdWxsIiwgKGluc3QsIGRlZikgPT4gewogICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKICBpbnN0Ll96b2QucGF0dGVybiA9IF9udWxsOwogIGluc3QuX3pvZC52YWx1ZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbbnVsbF0pOwogIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBfY3R4KSA9PiB7CiAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7CiAgICBpZiAoaW5wdXQgPT09IG51bGwpCiAgICAgIHJldHVybiBwYXlsb2FkOwogICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7CiAgICAgIGV4cGVjdGVkOiAibnVsbCIsCiAgICAgIGNvZGU6ICJpbnZhbGlkX3R5cGUiLAogICAgICBpbnB1dCwKICAgICAgaW5zdAogICAgfSk7CiAgICByZXR1cm4gcGF5bG9hZDsKICB9Owp9KTsKdmFyICRab2RBbnkgPSAkY29uc3RydWN0b3IoIiRab2RBbnkiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkKSA9PiBwYXlsb2FkOwp9KTsKdmFyICRab2RVbmtub3duID0gJGNvbnN0cnVjdG9yKCIkWm9kVW5rbm93biIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7CiAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQpID0+IHBheWxvYWQ7Cn0pOwp2YXIgJFpvZE5ldmVyID0gJGNvbnN0cnVjdG9yKCIkWm9kTmV2ZXIiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBfY3R4KSA9PiB7CiAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHsKICAgICAgZXhwZWN0ZWQ6ICJuZXZlciIsCiAgICAgIGNvZGU6ICJpbnZhbGlkX3R5cGUiLAogICAgICBpbnB1dDogcGF5bG9hZC52YWx1ZSwKICAgICAgaW5zdAogICAgfSk7CiAgICByZXR1cm4gcGF5bG9hZDsKICB9Owp9KTsKdmFyICRab2RWb2lkID0gJGNvbnN0cnVjdG9yKCIkWm9kVm9pZCIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7CiAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIF9jdHgpID0+IHsKICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTsKICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICJ1bmRlZmluZWQiKQogICAgICByZXR1cm4gcGF5bG9hZDsKICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICBleHBlY3RlZDogInZvaWQiLAogICAgICBjb2RlOiAiaW52YWxpZF90eXBlIiwKICAgICAgaW5wdXQsCiAgICAgIGluc3QKICAgIH0pOwogICAgcmV0dXJuIHBheWxvYWQ7CiAgfTsKfSk7CnZhciAkWm9kRGF0ZSA9ICRjb25zdHJ1Y3RvcigiJFpvZERhdGUiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBfY3R4KSA9PiB7CiAgICBpZiAoZGVmLmNvZXJjZSkgewogICAgICB0cnkgewogICAgICAgIHBheWxvYWQudmFsdWUgPSBuZXcgRGF0ZShwYXlsb2FkLnZhbHVlKTsKICAgICAgfSBjYXRjaCAoX2VycikgewogICAgICB9CiAgICB9CiAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7CiAgICBjb25zdCBpc0RhdGUgPSBpbnB1dCBpbnN0YW5jZW9mIERhdGU7CiAgICBjb25zdCBpc1ZhbGlkRGF0ZSA9IGlzRGF0ZSAmJiAhTnVtYmVyLmlzTmFOKGlucHV0LmdldFRpbWUoKSk7CiAgICBpZiAoaXNWYWxpZERhdGUpCiAgICAgIHJldHVybiBwYXlsb2FkOwogICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7CiAgICAgIGV4cGVjdGVkOiAiZGF0ZSIsCiAgICAgIGNvZGU6ICJpbnZhbGlkX3R5cGUiLAogICAgICBpbnB1dCwKICAgICAgLi4uaXNEYXRlID8geyByZWNlaXZlZDogIkludmFsaWQgRGF0ZSIgfSA6IHt9LAogICAgICBpbnN0CiAgICB9KTsKICAgIHJldHVybiBwYXlsb2FkOwogIH07Cn0pOwpmdW5jdGlvbiBoYW5kbGVBcnJheVJlc3VsdChyZXN1bHQsIGZpbmFsLCBpbmRleCkgewogIGlmIChyZXN1bHQuaXNzdWVzLmxlbmd0aCkgewogICAgZmluYWwuaXNzdWVzLnB1c2goLi4ucHJlZml4SXNzdWVzKGluZGV4LCByZXN1bHQuaXNzdWVzKSk7CiAgfQogIGZpbmFsLnZhbHVlW2luZGV4XSA9IHJlc3VsdC52YWx1ZTsKfQp2YXIgJFpvZEFycmF5ID0gJGNvbnN0cnVjdG9yKCIkWm9kQXJyYXkiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHsKICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTsKICAgIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHsKICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7CiAgICAgICAgZXhwZWN0ZWQ6ICJhcnJheSIsCiAgICAgICAgY29kZTogImludmFsaWRfdHlwZSIsCiAgICAgICAgaW5wdXQsCiAgICAgICAgaW5zdAogICAgICB9KTsKICAgICAgcmV0dXJuIHBheWxvYWQ7CiAgICB9CiAgICBwYXlsb2FkLnZhbHVlID0gQXJyYXkoaW5wdXQubGVuZ3RoKTsKICAgIGNvbnN0IHByb21zID0gW107CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKSB7CiAgICAgIGNvbnN0IGl0ZW0gPSBpbnB1dFtpXTsKICAgICAgY29uc3QgcmVzdWx0ID0gZGVmLmVsZW1lbnQuX3pvZC5ydW4oewogICAgICAgIHZhbHVlOiBpdGVtLAogICAgICAgIGlzc3VlczogW10KICAgICAgfSwgY3R4KTsKICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHsKICAgICAgICBwcm9tcy5wdXNoKHJlc3VsdC50aGVuKChyZXN1bHQyKSA9PiBoYW5kbGVBcnJheVJlc3VsdChyZXN1bHQyLCBwYXlsb2FkLCBpKSkpOwogICAgICB9IGVsc2UgewogICAgICAgIGhhbmRsZUFycmF5UmVzdWx0KHJlc3VsdCwgcGF5bG9hZCwgaSk7CiAgICAgIH0KICAgIH0KICAgIGlmIChwcm9tcy5sZW5ndGgpIHsKICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21zKS50aGVuKCgpID0+IHBheWxvYWQpOwogICAgfQogICAgcmV0dXJuIHBheWxvYWQ7CiAgfTsKfSk7CmZ1bmN0aW9uIGhhbmRsZVByb3BlcnR5UmVzdWx0KHJlc3VsdCwgZmluYWwsIGtleSwgaW5wdXQpIHsKICBpZiAocmVzdWx0Lmlzc3Vlcy5sZW5ndGgpIHsKICAgIGZpbmFsLmlzc3Vlcy5wdXNoKC4uLnByZWZpeElzc3VlcyhrZXksIHJlc3VsdC5pc3N1ZXMpKTsKICB9CiAgaWYgKHJlc3VsdC52YWx1ZSA9PT0gdm9pZCAwKSB7CiAgICBpZiAoa2V5IGluIGlucHV0KSB7CiAgICAgIGZpbmFsLnZhbHVlW2tleV0gPSB2b2lkIDA7CiAgICB9CiAgfSBlbHNlIHsKICAgIGZpbmFsLnZhbHVlW2tleV0gPSByZXN1bHQudmFsdWU7CiAgfQp9CmZ1bmN0aW9uIG5vcm1hbGl6ZURlZihkZWYpIHsKICB2YXIgX2EsIF9iLCBfYywgX2Q7CiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGRlZi5zaGFwZSk7CiAgZm9yIChjb25zdCBrIG9mIGtleXMpIHsKICAgIGlmICghKChfZCA9IChfYyA9IChfYiA9IChfYSA9IGRlZi5zaGFwZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hW2tdKSA9PSBudWxsID8gdm9pZCAwIDogX2IuX3pvZCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnRyYWl0cykgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLmhhcygiJFpvZFR5cGUiKSkpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGVsZW1lbnQgYXQga2V5ICIke2t9IjogZXhwZWN0ZWQgYSBab2Qgc2NoZW1hYCk7CiAgICB9CiAgfQogIGNvbnN0IG9rZXlzID0gb3B0aW9uYWxLZXlzKGRlZi5zaGFwZSk7CiAgcmV0dXJuIHsKICAgIC4uLmRlZiwKICAgIGtleXMsCiAgICBrZXlTZXQ6IG5ldyBTZXQoa2V5cyksCiAgICBudW1LZXlzOiBrZXlzLmxlbmd0aCwKICAgIG9wdGlvbmFsS2V5czogbmV3IFNldChva2V5cykKICB9Owp9CmZ1bmN0aW9uIGhhbmRsZUNhdGNoYWxsKHByb21zLCBpbnB1dCwgcGF5bG9hZCwgY3R4LCBkZWYsIGluc3QpIHsKICBjb25zdCB1bnJlY29nbml6ZWQgPSBbXTsKICBjb25zdCBrZXlTZXQgPSBkZWYua2V5U2V0OwogIGNvbnN0IF9jYXRjaGFsbCA9IGRlZi5jYXRjaGFsbC5fem9kOwogIGNvbnN0IHQgPSBfY2F0Y2hhbGwuZGVmLnR5cGU7CiAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoaW5wdXQpKSB7CiAgICBpZiAoa2V5U2V0LmhhcyhrZXkpKQogICAgICBjb250aW51ZTsKICAgIGlmICh0ID09PSAibmV2ZXIiKSB7CiAgICAgIHVucmVjb2duaXplZC5wdXNoKGtleSk7CiAgICAgIGNvbnRpbnVlOwogICAgfQogICAgY29uc3QgciA9IF9jYXRjaGFsbC5ydW4oeyB2YWx1ZTogaW5wdXRba2V5XSwgaXNzdWVzOiBbXSB9LCBjdHgpOwogICAgaWYgKHIgaW5zdGFuY2VvZiBQcm9taXNlKSB7CiAgICAgIHByb21zLnB1c2goci50aGVuKChyMikgPT4gaGFuZGxlUHJvcGVydHlSZXN1bHQocjIsIHBheWxvYWQsIGtleSwgaW5wdXQpKSk7CiAgICB9IGVsc2UgewogICAgICBoYW5kbGVQcm9wZXJ0eVJlc3VsdChyLCBwYXlsb2FkLCBrZXksIGlucHV0KTsKICAgIH0KICB9CiAgaWYgKHVucmVjb2duaXplZC5sZW5ndGgpIHsKICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICBjb2RlOiAidW5yZWNvZ25pemVkX2tleXMiLAogICAgICBrZXlzOiB1bnJlY29nbml6ZWQsCiAgICAgIGlucHV0LAogICAgICBpbnN0CiAgICB9KTsKICB9CiAgaWYgKCFwcm9tcy5sZW5ndGgpCiAgICByZXR1cm4gcGF5bG9hZDsKICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbXMpLnRoZW4oKCkgPT4gewogICAgcmV0dXJuIHBheWxvYWQ7CiAgfSk7Cn0KdmFyICRab2RPYmplY3QgPSAkY29uc3RydWN0b3IoIiRab2RPYmplY3QiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGNvbnN0IF9ub3JtYWxpemVkID0gY2FjaGVkKCgpID0+IG5vcm1hbGl6ZURlZihkZWYpKTsKICBkZWZpbmVMYXp5KGluc3QuX3pvZCwgInByb3BWYWx1ZXMiLCAoKSA9PiB7CiAgICBjb25zdCBzaGFwZSA9IGRlZi5zaGFwZTsKICAgIGNvbnN0IHByb3BWYWx1ZXMgPSB7fTsKICAgIGZvciAoY29uc3Qga2V5IGluIHNoYXBlKSB7CiAgICAgIGNvbnN0IGZpZWxkID0gc2hhcGVba2V5XS5fem9kOwogICAgICBpZiAoZmllbGQudmFsdWVzKSB7CiAgICAgICAgcHJvcFZhbHVlc1trZXldID8/IChwcm9wVmFsdWVzW2tleV0gPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpKTsKICAgICAgICBmb3IgKGNvbnN0IHYgb2YgZmllbGQudmFsdWVzKQogICAgICAgICAgcHJvcFZhbHVlc1trZXldLmFkZCh2KTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHByb3BWYWx1ZXM7CiAgfSk7CiAgY29uc3QgaXNPYmplY3QyID0gaXNPYmplY3Q7CiAgY29uc3QgY2F0Y2hhbGwgPSBkZWYuY2F0Y2hhbGw7CiAgbGV0IHZhbHVlOwogIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHsKICAgIHZhbHVlID8/ICh2YWx1ZSA9IF9ub3JtYWxpemVkLnZhbHVlKTsKICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTsKICAgIGlmICghaXNPYmplY3QyKGlucHV0KSkgewogICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHsKICAgICAgICBleHBlY3RlZDogIm9iamVjdCIsCiAgICAgICAgY29kZTogImludmFsaWRfdHlwZSIsCiAgICAgICAgaW5wdXQsCiAgICAgICAgaW5zdAogICAgICB9KTsKICAgICAgcmV0dXJuIHBheWxvYWQ7CiAgICB9CiAgICBwYXlsb2FkLnZhbHVlID0ge307CiAgICBjb25zdCBwcm9tcyA9IFtdOwogICAgY29uc3Qgc2hhcGUgPSB2YWx1ZS5zaGFwZTsKICAgIGZvciAoY29uc3Qga2V5IG9mIHZhbHVlLmtleXMpIHsKICAgICAgY29uc3QgZWwgPSBzaGFwZVtrZXldOwogICAgICBjb25zdCByID0gZWwuX3pvZC5ydW4oeyB2YWx1ZTogaW5wdXRba2V5XSwgaXNzdWVzOiBbXSB9LCBjdHgpOwogICAgICBpZiAociBpbnN0YW5jZW9mIFByb21pc2UpIHsKICAgICAgICBwcm9tcy5wdXNoKHIudGhlbigocjIpID0+IGhhbmRsZVByb3BlcnR5UmVzdWx0KHIyLCBwYXlsb2FkLCBrZXksIGlucHV0KSkpOwogICAgICB9IGVsc2UgewogICAgICAgIGhhbmRsZVByb3BlcnR5UmVzdWx0KHIsIHBheWxvYWQsIGtleSwgaW5wdXQpOwogICAgICB9CiAgICB9CiAgICBpZiAoIWNhdGNoYWxsKSB7CiAgICAgIHJldHVybiBwcm9tcy5sZW5ndGggPyBQcm9taXNlLmFsbChwcm9tcykudGhlbigoKSA9PiBwYXlsb2FkKSA6IHBheWxvYWQ7CiAgICB9CiAgICByZXR1cm4gaGFuZGxlQ2F0Y2hhbGwocHJvbXMsIGlucHV0LCBwYXlsb2FkLCBjdHgsIF9ub3JtYWxpemVkLnZhbHVlLCBpbnN0KTsKICB9Owp9KTsKdmFyICRab2RPYmplY3RKSVQgPSAkY29uc3RydWN0b3IoIiRab2RPYmplY3RKSVQiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZE9iamVjdC5pbml0KGluc3QsIGRlZik7CiAgY29uc3Qgc3VwZXJQYXJzZSA9IGluc3QuX3pvZC5wYXJzZTsKICBjb25zdCBfbm9ybWFsaXplZCA9IGNhY2hlZCgoKSA9PiBub3JtYWxpemVEZWYoZGVmKSk7CiAgY29uc3QgZ2VuZXJhdGVGYXN0cGFzcyA9IChzaGFwZSkgPT4gewogICAgY29uc3QgZG9jID0gbmV3IERvYyhbInNoYXBlIiwgInBheWxvYWQiLCAiY3R4Il0pOwogICAgY29uc3Qgbm9ybWFsaXplZCA9IF9ub3JtYWxpemVkLnZhbHVlOwogICAgY29uc3QgcGFyc2VTdHIgPSAoa2V5KSA9PiB7CiAgICAgIGNvbnN0IGsgPSBlc2Moa2V5KTsKICAgICAgcmV0dXJuIGBzaGFwZVske2t9XS5fem9kLnJ1bih7IHZhbHVlOiBpbnB1dFske2t9XSwgaXNzdWVzOiBbXSB9LCBjdHgpYDsKICAgIH07CiAgICBkb2Mud3JpdGUoYGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTtgKTsKICAgIGNvbnN0IGlkcyA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgbGV0IGNvdW50ZXIgPSAwOwogICAgZm9yIChjb25zdCBrZXkgb2Ygbm9ybWFsaXplZC5rZXlzKSB7CiAgICAgIGlkc1trZXldID0gYGtleV8ke2NvdW50ZXIrK31gOwogICAgfQogICAgZG9jLndyaXRlKGBjb25zdCBuZXdSZXN1bHQgPSB7fTtgKTsKICAgIGZvciAoY29uc3Qga2V5IG9mIG5vcm1hbGl6ZWQua2V5cykgewogICAgICBjb25zdCBpZCA9IGlkc1trZXldOwogICAgICBjb25zdCBrID0gZXNjKGtleSk7CiAgICAgIGRvYy53cml0ZShgY29uc3QgJHtpZH0gPSAke3BhcnNlU3RyKGtleSl9O2ApOwogICAgICBkb2Mud3JpdGUoYAogICAgICAgIGlmICgke2lkfS5pc3N1ZXMubGVuZ3RoKSB7CiAgICAgICAgICBwYXlsb2FkLmlzc3VlcyA9IHBheWxvYWQuaXNzdWVzLmNvbmNhdCgke2lkfS5pc3N1ZXMubWFwKGlzcyA9PiAoewogICAgICAgICAgICAuLi5pc3MsCiAgICAgICAgICAgIHBhdGg6IGlzcy5wYXRoID8gWyR7a30sIC4uLmlzcy5wYXRoXSA6IFske2t9XQogICAgICAgICAgfSkpKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgaWYgKCR7aWR9LnZhbHVlID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGlmICgke2t9IGluIGlucHV0KSB7CiAgICAgICAgICAgIG5ld1Jlc3VsdFske2t9XSA9IHVuZGVmaW5lZDsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgbmV3UmVzdWx0WyR7a31dID0gJHtpZH0udmFsdWU7CiAgICAgICAgfQogICAgICAgIAogICAgICBgKTsKICAgIH0KICAgIGRvYy53cml0ZShgcGF5bG9hZC52YWx1ZSA9IG5ld1Jlc3VsdDtgKTsKICAgIGRvYy53cml0ZShgcmV0dXJuIHBheWxvYWQ7YCk7CiAgICBjb25zdCBmbiA9IGRvYy5jb21waWxlKCk7CiAgICByZXR1cm4gKHBheWxvYWQsIGN0eCkgPT4gZm4oc2hhcGUsIHBheWxvYWQsIGN0eCk7CiAgfTsKICBsZXQgZmFzdHBhc3M7CiAgY29uc3QgaXNPYmplY3QyID0gaXNPYmplY3Q7CiAgY29uc3Qgaml0ID0gIWdsb2JhbENvbmZpZy5qaXRsZXNzOwogIGNvbnN0IGFsbG93c0V2YWwyID0gYWxsb3dzRXZhbDsKICBjb25zdCBmYXN0RW5hYmxlZCA9IGppdCAmJiBhbGxvd3NFdmFsMi52YWx1ZTsKICBjb25zdCBjYXRjaGFsbCA9IGRlZi5jYXRjaGFsbDsKICBsZXQgdmFsdWU7CiAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIGN0eCkgPT4gewogICAgdmFsdWUgPz8gKHZhbHVlID0gX25vcm1hbGl6ZWQudmFsdWUpOwogICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlOwogICAgaWYgKCFpc09iamVjdDIoaW5wdXQpKSB7CiAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICAgIGV4cGVjdGVkOiAib2JqZWN0IiwKICAgICAgICBjb2RlOiAiaW52YWxpZF90eXBlIiwKICAgICAgICBpbnB1dCwKICAgICAgICBpbnN0CiAgICAgIH0pOwogICAgICByZXR1cm4gcGF5bG9hZDsKICAgIH0KICAgIGlmIChqaXQgJiYgZmFzdEVuYWJsZWQgJiYgKGN0eCA9PSBudWxsID8gdm9pZCAwIDogY3R4LmFzeW5jKSA9PT0gZmFsc2UgJiYgY3R4LmppdGxlc3MgIT09IHRydWUpIHsKICAgICAgaWYgKCFmYXN0cGFzcykKICAgICAgICBmYXN0cGFzcyA9IGdlbmVyYXRlRmFzdHBhc3MoZGVmLnNoYXBlKTsKICAgICAgcGF5bG9hZCA9IGZhc3RwYXNzKHBheWxvYWQsIGN0eCk7CiAgICAgIGlmICghY2F0Y2hhbGwpCiAgICAgICAgcmV0dXJuIHBheWxvYWQ7CiAgICAgIHJldHVybiBoYW5kbGVDYXRjaGFsbChbXSwgaW5wdXQsIHBheWxvYWQsIGN0eCwgdmFsdWUsIGluc3QpOwogICAgfQogICAgcmV0dXJuIHN1cGVyUGFyc2UocGF5bG9hZCwgY3R4KTsKICB9Owp9KTsKZnVuY3Rpb24gaGFuZGxlVW5pb25SZXN1bHRzKHJlc3VsdHMsIGZpbmFsLCBpbnN0LCBjdHgpIHsKICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7CiAgICBpZiAocmVzdWx0Lmlzc3Vlcy5sZW5ndGggPT09IDApIHsKICAgICAgZmluYWwudmFsdWUgPSByZXN1bHQudmFsdWU7CiAgICAgIHJldHVybiBmaW5hbDsKICAgIH0KICB9CiAgY29uc3Qgbm9uYWJvcnRlZCA9IHJlc3VsdHMuZmlsdGVyKChyKSA9PiAhYWJvcnRlZChyKSk7CiAgaWYgKG5vbmFib3J0ZWQubGVuZ3RoID09PSAxKSB7CiAgICBmaW5hbC52YWx1ZSA9IG5vbmFib3J0ZWRbMF0udmFsdWU7CiAgICByZXR1cm4gbm9uYWJvcnRlZFswXTsKICB9CiAgZmluYWwuaXNzdWVzLnB1c2goewogICAgY29kZTogImludmFsaWRfdW5pb24iLAogICAgaW5wdXQ6IGZpbmFsLnZhbHVlLAogICAgaW5zdCwKICAgIGVycm9yczogcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gcmVzdWx0Lmlzc3Vlcy5tYXAoKGlzcykgPT4gZmluYWxpemVJc3N1ZShpc3MsIGN0eCwgY29uZmlnKCkpKSkKICB9KTsKICByZXR1cm4gZmluYWw7Cn0KdmFyICRab2RVbmlvbiA9ICRjb25zdHJ1Y3RvcigiJFpvZFVuaW9uIiwgKGluc3QsIGRlZikgPT4gewogICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKICBkZWZpbmVMYXp5KGluc3QuX3pvZCwgIm9wdGluIiwgKCkgPT4gZGVmLm9wdGlvbnMuc29tZSgobykgPT4gby5fem9kLm9wdGluID09PSAib3B0aW9uYWwiKSA/ICJvcHRpb25hbCIgOiB2b2lkIDApOwogIGRlZmluZUxhenkoaW5zdC5fem9kLCAib3B0b3V0IiwgKCkgPT4gZGVmLm9wdGlvbnMuc29tZSgobykgPT4gby5fem9kLm9wdG91dCA9PT0gIm9wdGlvbmFsIikgPyAib3B0aW9uYWwiIDogdm9pZCAwKTsKICBkZWZpbmVMYXp5KGluc3QuX3pvZCwgInZhbHVlcyIsICgpID0+IHsKICAgIGlmIChkZWYub3B0aW9ucy5ldmVyeSgobykgPT4gby5fem9kLnZhbHVlcykpIHsKICAgICAgcmV0dXJuIG5ldyBTZXQoZGVmLm9wdGlvbnMuZmxhdE1hcCgob3B0aW9uKSA9PiBBcnJheS5mcm9tKG9wdGlvbi5fem9kLnZhbHVlcykpKTsKICAgIH0KICAgIHJldHVybiB2b2lkIDA7CiAgfSk7CiAgZGVmaW5lTGF6eShpbnN0Ll96b2QsICJwYXR0ZXJuIiwgKCkgPT4gewogICAgaWYgKGRlZi5vcHRpb25zLmV2ZXJ5KChvKSA9PiBvLl96b2QucGF0dGVybikpIHsKICAgICAgY29uc3QgcGF0dGVybnMgPSBkZWYub3B0aW9ucy5tYXAoKG8pID0+IG8uX3pvZC5wYXR0ZXJuKTsKICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4oJHtwYXR0ZXJucy5tYXAoKHApID0+IGNsZWFuUmVnZXgocC5zb3VyY2UpKS5qb2luKCJ8Iil9KSRgKTsKICAgIH0KICAgIHJldHVybiB2b2lkIDA7CiAgfSk7CiAgY29uc3Qgc2luZ2xlID0gZGVmLm9wdGlvbnMubGVuZ3RoID09PSAxOwogIGNvbnN0IGZpcnN0ID0gZGVmLm9wdGlvbnNbMF0uX3pvZC5ydW47CiAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIGN0eCkgPT4gewogICAgaWYgKHNpbmdsZSkgewogICAgICByZXR1cm4gZmlyc3QocGF5bG9hZCwgY3R4KTsKICAgIH0KICAgIGxldCBhc3luYyA9IGZhbHNlOwogICAgY29uc3QgcmVzdWx0cyA9IFtdOwogICAgZm9yIChjb25zdCBvcHRpb24gb2YgZGVmLm9wdGlvbnMpIHsKICAgICAgY29uc3QgcmVzdWx0ID0gb3B0aW9uLl96b2QucnVuKHsKICAgICAgICB2YWx1ZTogcGF5bG9hZC52YWx1ZSwKICAgICAgICBpc3N1ZXM6IFtdCiAgICAgIH0sIGN0eCk7CiAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7CiAgICAgICAgcmVzdWx0cy5wdXNoKHJlc3VsdCk7CiAgICAgICAgYXN5bmMgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChyZXN1bHQuaXNzdWVzLmxlbmd0aCA9PT0gMCkKICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgcmVzdWx0cy5wdXNoKHJlc3VsdCk7CiAgICAgIH0KICAgIH0KICAgIGlmICghYXN5bmMpCiAgICAgIHJldHVybiBoYW5kbGVVbmlvblJlc3VsdHMocmVzdWx0cywgcGF5bG9hZCwgaW5zdCwgY3R4KTsKICAgIHJldHVybiBQcm9taXNlLmFsbChyZXN1bHRzKS50aGVuKChyZXN1bHRzMikgPT4gewogICAgICByZXR1cm4gaGFuZGxlVW5pb25SZXN1bHRzKHJlc3VsdHMyLCBwYXlsb2FkLCBpbnN0LCBjdHgpOwogICAgfSk7CiAgfTsKfSk7CnZhciAkWm9kRGlzY3JpbWluYXRlZFVuaW9uID0gJGNvbnN0cnVjdG9yKCIkWm9kRGlzY3JpbWluYXRlZFVuaW9uIiwgKGluc3QsIGRlZikgPT4gewogICRab2RVbmlvbi5pbml0KGluc3QsIGRlZik7CiAgY29uc3QgX3N1cGVyID0gaW5zdC5fem9kLnBhcnNlOwogIGRlZmluZUxhenkoaW5zdC5fem9kLCAicHJvcFZhbHVlcyIsICgpID0+IHsKICAgIGNvbnN0IHByb3BWYWx1ZXMgPSB7fTsKICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIGRlZi5vcHRpb25zKSB7CiAgICAgIGNvbnN0IHB2ID0gb3B0aW9uLl96b2QucHJvcFZhbHVlczsKICAgICAgaWYgKCFwdiB8fCBPYmplY3Qua2V5cyhwdikubGVuZ3RoID09PSAwKQogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBkaXNjcmltaW5hdGVkIHVuaW9uIG9wdGlvbiBhdCBpbmRleCAiJHtkZWYub3B0aW9ucy5pbmRleE9mKG9wdGlvbil9ImApOwogICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhwdikpIHsKICAgICAgICBpZiAoIXByb3BWYWx1ZXNba10pCiAgICAgICAgICBwcm9wVmFsdWVzW2tdID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKICAgICAgICBmb3IgKGNvbnN0IHZhbCBvZiB2KSB7CiAgICAgICAgICBwcm9wVmFsdWVzW2tdLmFkZCh2YWwpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHByb3BWYWx1ZXM7CiAgfSk7CiAgY29uc3QgZGlzYyA9IGNhY2hlZCgoKSA9PiB7CiAgICB2YXIgX2E7CiAgICBjb25zdCBvcHRzID0gZGVmLm9wdGlvbnM7CiAgICBjb25zdCBtYXAyID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICAgIGZvciAoY29uc3QgbyBvZiBvcHRzKSB7CiAgICAgIGNvbnN0IHZhbHVlcyA9IChfYSA9IG8uX3pvZC5wcm9wVmFsdWVzKSA9PSBudWxsID8gdm9pZCAwIDogX2FbZGVmLmRpc2NyaW1pbmF0b3JdOwogICAgICBpZiAoIXZhbHVlcyB8fCB2YWx1ZXMuc2l6ZSA9PT0gMCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZGlzY3JpbWluYXRlZCB1bmlvbiBvcHRpb24gYXQgaW5kZXggIiR7ZGVmLm9wdGlvbnMuaW5kZXhPZihvKX0iYCk7CiAgICAgIGZvciAoY29uc3QgdiBvZiB2YWx1ZXMpIHsKICAgICAgICBpZiAobWFwMi5oYXModikpIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRHVwbGljYXRlIGRpc2NyaW1pbmF0b3IgdmFsdWUgIiR7U3RyaW5nKHYpfSJgKTsKICAgICAgICB9CiAgICAgICAgbWFwMi5zZXQodiwgbyk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBtYXAyOwogIH0pOwogIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHsKICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTsKICAgIGlmICghaXNPYmplY3QoaW5wdXQpKSB7CiAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICAgIGNvZGU6ICJpbnZhbGlkX3R5cGUiLAogICAgICAgIGV4cGVjdGVkOiAib2JqZWN0IiwKICAgICAgICBpbnB1dCwKICAgICAgICBpbnN0CiAgICAgIH0pOwogICAgICByZXR1cm4gcGF5bG9hZDsKICAgIH0KICAgIGNvbnN0IG9wdCA9IGRpc2MudmFsdWUuZ2V0KGlucHV0ID09IG51bGwgPyB2b2lkIDAgOiBpbnB1dFtkZWYuZGlzY3JpbWluYXRvcl0pOwogICAgaWYgKG9wdCkgewogICAgICByZXR1cm4gb3B0Ll96b2QucnVuKHBheWxvYWQsIGN0eCk7CiAgICB9CiAgICBpZiAoZGVmLnVuaW9uRmFsbGJhY2spIHsKICAgICAgcmV0dXJuIF9zdXBlcihwYXlsb2FkLCBjdHgpOwogICAgfQogICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7CiAgICAgIGNvZGU6ICJpbnZhbGlkX3VuaW9uIiwKICAgICAgZXJyb3JzOiBbXSwKICAgICAgbm90ZTogIk5vIG1hdGNoaW5nIGRpc2NyaW1pbmF0b3IiLAogICAgICBkaXNjcmltaW5hdG9yOiBkZWYuZGlzY3JpbWluYXRvciwKICAgICAgaW5wdXQsCiAgICAgIHBhdGg6IFtkZWYuZGlzY3JpbWluYXRvcl0sCiAgICAgIGluc3QKICAgIH0pOwogICAgcmV0dXJuIHBheWxvYWQ7CiAgfTsKfSk7CnZhciAkWm9kSW50ZXJzZWN0aW9uID0gJGNvbnN0cnVjdG9yKCIkWm9kSW50ZXJzZWN0aW9uIiwgKGluc3QsIGRlZikgPT4gewogICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7CiAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7CiAgICBjb25zdCBsZWZ0ID0gZGVmLmxlZnQuX3pvZC5ydW4oeyB2YWx1ZTogaW5wdXQsIGlzc3VlczogW10gfSwgY3R4KTsKICAgIGNvbnN0IHJpZ2h0ID0gZGVmLnJpZ2h0Ll96b2QucnVuKHsgdmFsdWU6IGlucHV0LCBpc3N1ZXM6IFtdIH0sIGN0eCk7CiAgICBjb25zdCBhc3luYyA9IGxlZnQgaW5zdGFuY2VvZiBQcm9taXNlIHx8IHJpZ2h0IGluc3RhbmNlb2YgUHJvbWlzZTsKICAgIGlmIChhc3luYykgewogICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW2xlZnQsIHJpZ2h0XSkudGhlbigoW2xlZnQyLCByaWdodDJdKSA9PiB7CiAgICAgICAgcmV0dXJuIGhhbmRsZUludGVyc2VjdGlvblJlc3VsdHMocGF5bG9hZCwgbGVmdDIsIHJpZ2h0Mik7CiAgICAgIH0pOwogICAgfQogICAgcmV0dXJuIGhhbmRsZUludGVyc2VjdGlvblJlc3VsdHMocGF5bG9hZCwgbGVmdCwgcmlnaHQpOwogIH07Cn0pOwpmdW5jdGlvbiBtZXJnZVZhbHVlcyhhLCBiKSB7CiAgaWYgKGEgPT09IGIpIHsKICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBhIH07CiAgfQogIGlmIChhIGluc3RhbmNlb2YgRGF0ZSAmJiBiIGluc3RhbmNlb2YgRGF0ZSAmJiArYSA9PT0gK2IpIHsKICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBhIH07CiAgfQogIGlmIChpc1BsYWluT2JqZWN0KGEpICYmIGlzUGxhaW5PYmplY3QoYikpIHsKICAgIGNvbnN0IGJLZXlzID0gT2JqZWN0LmtleXMoYik7CiAgICBjb25zdCBzaGFyZWRLZXlzID0gT2JqZWN0LmtleXMoYSkuZmlsdGVyKChrZXkpID0+IGJLZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTEpOwogICAgY29uc3QgbmV3T2JqID0geyAuLi5hLCAuLi5iIH07CiAgICBmb3IgKGNvbnN0IGtleSBvZiBzaGFyZWRLZXlzKSB7CiAgICAgIGNvbnN0IHNoYXJlZFZhbHVlID0gbWVyZ2VWYWx1ZXMoYVtrZXldLCBiW2tleV0pOwogICAgICBpZiAoIXNoYXJlZFZhbHVlLnZhbGlkKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgICAgIG1lcmdlRXJyb3JQYXRoOiBba2V5LCAuLi5zaGFyZWRWYWx1ZS5tZXJnZUVycm9yUGF0aF0KICAgICAgICB9OwogICAgICB9CiAgICAgIG5ld09ialtrZXldID0gc2hhcmVkVmFsdWUuZGF0YTsKICAgIH0KICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBuZXdPYmogfTsKICB9CiAgaWYgKEFycmF5LmlzQXJyYXkoYSkgJiYgQXJyYXkuaXNBcnJheShiKSkgewogICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkgewogICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIG1lcmdlRXJyb3JQYXRoOiBbXSB9OwogICAgfQogICAgY29uc3QgbmV3QXJyYXkgPSBbXTsKICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBhLmxlbmd0aDsgaW5kZXgrKykgewogICAgICBjb25zdCBpdGVtQSA9IGFbaW5kZXhdOwogICAgICBjb25zdCBpdGVtQiA9IGJbaW5kZXhdOwogICAgICBjb25zdCBzaGFyZWRWYWx1ZSA9IG1lcmdlVmFsdWVzKGl0ZW1BLCBpdGVtQik7CiAgICAgIGlmICghc2hhcmVkVmFsdWUudmFsaWQpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICAgICAgbWVyZ2VFcnJvclBhdGg6IFtpbmRleCwgLi4uc2hhcmVkVmFsdWUubWVyZ2VFcnJvclBhdGhdCiAgICAgICAgfTsKICAgICAgfQogICAgICBuZXdBcnJheS5wdXNoKHNoYXJlZFZhbHVlLmRhdGEpOwogICAgfQogICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld0FycmF5IH07CiAgfQogIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgbWVyZ2VFcnJvclBhdGg6IFtdIH07Cn0KZnVuY3Rpb24gaGFuZGxlSW50ZXJzZWN0aW9uUmVzdWx0cyhyZXN1bHQsIGxlZnQsIHJpZ2h0KSB7CiAgaWYgKGxlZnQuaXNzdWVzLmxlbmd0aCkgewogICAgcmVzdWx0Lmlzc3Vlcy5wdXNoKC4uLmxlZnQuaXNzdWVzKTsKICB9CiAgaWYgKHJpZ2h0Lmlzc3Vlcy5sZW5ndGgpIHsKICAgIHJlc3VsdC5pc3N1ZXMucHVzaCguLi5yaWdodC5pc3N1ZXMpOwogIH0KICBpZiAoYWJvcnRlZChyZXN1bHQpKQogICAgcmV0dXJuIHJlc3VsdDsKICBjb25zdCBtZXJnZWQgPSBtZXJnZVZhbHVlcyhsZWZ0LnZhbHVlLCByaWdodC52YWx1ZSk7CiAgaWYgKCFtZXJnZWQudmFsaWQpIHsKICAgIHRocm93IG5ldyBFcnJvcihgVW5tZXJnYWJsZSBpbnRlcnNlY3Rpb24uIEVycm9yIHBhdGg6ICR7SlNPTi5zdHJpbmdpZnkobWVyZ2VkLm1lcmdlRXJyb3JQYXRoKX1gKTsKICB9CiAgcmVzdWx0LnZhbHVlID0gbWVyZ2VkLmRhdGE7CiAgcmV0dXJuIHJlc3VsdDsKfQp2YXIgJFpvZFR1cGxlID0gJGNvbnN0cnVjdG9yKCIkWm9kVHVwbGUiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGNvbnN0IGl0ZW1zID0gZGVmLml0ZW1zOwogIGNvbnN0IG9wdFN0YXJ0ID0gaXRlbXMubGVuZ3RoIC0gWy4uLml0ZW1zXS5yZXZlcnNlKCkuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtLl96b2Qub3B0aW4gIT09ICJvcHRpb25hbCIpOwogIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHsKICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTsKICAgIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHsKICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7CiAgICAgICAgaW5wdXQsCiAgICAgICAgaW5zdCwKICAgICAgICBleHBlY3RlZDogInR1cGxlIiwKICAgICAgICBjb2RlOiAiaW52YWxpZF90eXBlIgogICAgICB9KTsKICAgICAgcmV0dXJuIHBheWxvYWQ7CiAgICB9CiAgICBwYXlsb2FkLnZhbHVlID0gW107CiAgICBjb25zdCBwcm9tcyA9IFtdOwogICAgaWYgKCFkZWYucmVzdCkgewogICAgICBjb25zdCB0b29CaWcgPSBpbnB1dC5sZW5ndGggPiBpdGVtcy5sZW5ndGg7CiAgICAgIGNvbnN0IHRvb1NtYWxsID0gaW5wdXQubGVuZ3RoIDwgb3B0U3RhcnQgLSAxOwogICAgICBpZiAodG9vQmlnIHx8IHRvb1NtYWxsKSB7CiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7CiAgICAgICAgICAuLi50b29CaWcgPyB7IGNvZGU6ICJ0b29fYmlnIiwgbWF4aW11bTogaXRlbXMubGVuZ3RoIH0gOiB7IGNvZGU6ICJ0b29fc21hbGwiLCBtaW5pbXVtOiBpdGVtcy5sZW5ndGggfSwKICAgICAgICAgIGlucHV0LAogICAgICAgICAgaW5zdCwKICAgICAgICAgIG9yaWdpbjogImFycmF5IgogICAgICAgIH0pOwogICAgICAgIHJldHVybiBwYXlsb2FkOwogICAgICB9CiAgICB9CiAgICBsZXQgaSA9IC0xOwogICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7CiAgICAgIGkrKzsKICAgICAgaWYgKGkgPj0gaW5wdXQubGVuZ3RoKSB7CiAgICAgICAgaWYgKGkgPj0gb3B0U3RhcnQpCiAgICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBjb25zdCByZXN1bHQgPSBpdGVtLl96b2QucnVuKHsKICAgICAgICB2YWx1ZTogaW5wdXRbaV0sCiAgICAgICAgaXNzdWVzOiBbXQogICAgICB9LCBjdHgpOwogICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkgewogICAgICAgIHByb21zLnB1c2gocmVzdWx0LnRoZW4oKHJlc3VsdDIpID0+IGhhbmRsZVR1cGxlUmVzdWx0KHJlc3VsdDIsIHBheWxvYWQsIGkpKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaGFuZGxlVHVwbGVSZXN1bHQocmVzdWx0LCBwYXlsb2FkLCBpKTsKICAgICAgfQogICAgfQogICAgaWYgKGRlZi5yZXN0KSB7CiAgICAgIGNvbnN0IHJlc3QgPSBpbnB1dC5zbGljZShpdGVtcy5sZW5ndGgpOwogICAgICBmb3IgKGNvbnN0IGVsIG9mIHJlc3QpIHsKICAgICAgICBpKys7CiAgICAgICAgY29uc3QgcmVzdWx0ID0gZGVmLnJlc3QuX3pvZC5ydW4oewogICAgICAgICAgdmFsdWU6IGVsLAogICAgICAgICAgaXNzdWVzOiBbXQogICAgICAgIH0sIGN0eCk7CiAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHsKICAgICAgICAgIHByb21zLnB1c2gocmVzdWx0LnRoZW4oKHJlc3VsdDIpID0+IGhhbmRsZVR1cGxlUmVzdWx0KHJlc3VsdDIsIHBheWxvYWQsIGkpKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGhhbmRsZVR1cGxlUmVzdWx0KHJlc3VsdCwgcGF5bG9hZCwgaSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZiAocHJvbXMubGVuZ3RoKQogICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbXMpLnRoZW4oKCkgPT4gcGF5bG9hZCk7CiAgICByZXR1cm4gcGF5bG9hZDsKICB9Owp9KTsKZnVuY3Rpb24gaGFuZGxlVHVwbGVSZXN1bHQocmVzdWx0LCBmaW5hbCwgaW5kZXgpIHsKICBpZiAocmVzdWx0Lmlzc3Vlcy5sZW5ndGgpIHsKICAgIGZpbmFsLmlzc3Vlcy5wdXNoKC4uLnByZWZpeElzc3VlcyhpbmRleCwgcmVzdWx0Lmlzc3VlcykpOwogIH0KICBmaW5hbC52YWx1ZVtpbmRleF0gPSByZXN1bHQudmFsdWU7Cn0KdmFyICRab2RSZWNvcmQgPSAkY29uc3RydWN0b3IoIiRab2RSZWNvcmQiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHsKICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTsKICAgIGlmICghaXNQbGFpbk9iamVjdChpbnB1dCkpIHsKICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7CiAgICAgICAgZXhwZWN0ZWQ6ICJyZWNvcmQiLAogICAgICAgIGNvZGU6ICJpbnZhbGlkX3R5cGUiLAogICAgICAgIGlucHV0LAogICAgICAgIGluc3QKICAgICAgfSk7CiAgICAgIHJldHVybiBwYXlsb2FkOwogICAgfQogICAgY29uc3QgcHJvbXMgPSBbXTsKICAgIGlmIChkZWYua2V5VHlwZS5fem9kLnZhbHVlcykgewogICAgICBjb25zdCB2YWx1ZXMgPSBkZWYua2V5VHlwZS5fem9kLnZhbHVlczsKICAgICAgcGF5bG9hZC52YWx1ZSA9IHt9OwogICAgICBmb3IgKGNvbnN0IGtleSBvZiB2YWx1ZXMpIHsKICAgICAgICBpZiAodHlwZW9mIGtleSA9PT0gInN0cmluZyIgfHwgdHlwZW9mIGtleSA9PT0gIm51bWJlciIgfHwgdHlwZW9mIGtleSA9PT0gInN5bWJvbCIpIHsKICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGRlZi52YWx1ZVR5cGUuX3pvZC5ydW4oeyB2YWx1ZTogaW5wdXRba2V5XSwgaXNzdWVzOiBbXSB9LCBjdHgpOwogICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHsKICAgICAgICAgICAgcHJvbXMucHVzaChyZXN1bHQudGhlbigocmVzdWx0MikgPT4gewogICAgICAgICAgICAgIGlmIChyZXN1bHQyLmlzc3Vlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goLi4ucHJlZml4SXNzdWVzKGtleSwgcmVzdWx0Mi5pc3N1ZXMpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcGF5bG9hZC52YWx1ZVtrZXldID0gcmVzdWx0Mi52YWx1ZTsKICAgICAgICAgICAgfSkpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKHJlc3VsdC5pc3N1ZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCguLi5wcmVmaXhJc3N1ZXMoa2V5LCByZXN1bHQuaXNzdWVzKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcGF5bG9hZC52YWx1ZVtrZXldID0gcmVzdWx0LnZhbHVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBsZXQgdW5yZWNvZ25pemVkOwogICAgICBmb3IgKGNvbnN0IGtleSBpbiBpbnB1dCkgewogICAgICAgIGlmICghdmFsdWVzLmhhcyhrZXkpKSB7CiAgICAgICAgICB1bnJlY29nbml6ZWQgPSB1bnJlY29nbml6ZWQgPz8gW107CiAgICAgICAgICB1bnJlY29nbml6ZWQucHVzaChrZXkpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodW5yZWNvZ25pemVkICYmIHVucmVjb2duaXplZC5sZW5ndGggPiAwKSB7CiAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7CiAgICAgICAgICBjb2RlOiAidW5yZWNvZ25pemVkX2tleXMiLAogICAgICAgICAgaW5wdXQsCiAgICAgICAgICBpbnN0LAogICAgICAgICAga2V5czogdW5yZWNvZ25pemVkCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHBheWxvYWQudmFsdWUgPSB7fTsKICAgICAgZm9yIChjb25zdCBrZXkgb2YgUmVmbGVjdC5vd25LZXlzKGlucHV0KSkgewogICAgICAgIGlmIChrZXkgPT09ICJfX3Byb3RvX18iKQogICAgICAgICAgY29udGludWU7CiAgICAgICAgY29uc3Qga2V5UmVzdWx0ID0gZGVmLmtleVR5cGUuX3pvZC5ydW4oeyB2YWx1ZToga2V5LCBpc3N1ZXM6IFtdIH0sIGN0eCk7CiAgICAgICAgaWYgKGtleVJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiQXN5bmMgc2NoZW1hcyBub3Qgc3VwcG9ydGVkIGluIG9iamVjdCBrZXlzIGN1cnJlbnRseSIpOwogICAgICAgIH0KICAgICAgICBpZiAoa2V5UmVzdWx0Lmlzc3Vlcy5sZW5ndGgpIHsKICAgICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICAgICAgICBjb2RlOiAiaW52YWxpZF9rZXkiLAogICAgICAgICAgICBvcmlnaW46ICJyZWNvcmQiLAogICAgICAgICAgICBpc3N1ZXM6IGtleVJlc3VsdC5pc3N1ZXMubWFwKChpc3MpID0+IGZpbmFsaXplSXNzdWUoaXNzLCBjdHgsIGNvbmZpZygpKSksCiAgICAgICAgICAgIGlucHV0OiBrZXksCiAgICAgICAgICAgIHBhdGg6IFtrZXldLAogICAgICAgICAgICBpbnN0CiAgICAgICAgICB9KTsKICAgICAgICAgIHBheWxvYWQudmFsdWVba2V5UmVzdWx0LnZhbHVlXSA9IGtleVJlc3VsdC52YWx1ZTsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgICBjb25zdCByZXN1bHQgPSBkZWYudmFsdWVUeXBlLl96b2QucnVuKHsgdmFsdWU6IGlucHV0W2tleV0sIGlzc3VlczogW10gfSwgY3R4KTsKICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkgewogICAgICAgICAgcHJvbXMucHVzaChyZXN1bHQudGhlbigocmVzdWx0MikgPT4gewogICAgICAgICAgICBpZiAocmVzdWx0Mi5pc3N1ZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCguLi5wcmVmaXhJc3N1ZXMoa2V5LCByZXN1bHQyLmlzc3VlcykpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHBheWxvYWQudmFsdWVba2V5UmVzdWx0LnZhbHVlXSA9IHJlc3VsdDIudmFsdWU7CiAgICAgICAgICB9KSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChyZXN1bHQuaXNzdWVzLmxlbmd0aCkgewogICAgICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKC4uLnByZWZpeElzc3VlcyhrZXksIHJlc3VsdC5pc3N1ZXMpKTsKICAgICAgICAgIH0KICAgICAgICAgIHBheWxvYWQudmFsdWVba2V5UmVzdWx0LnZhbHVlXSA9IHJlc3VsdC52YWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGlmIChwcm9tcy5sZW5ndGgpIHsKICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21zKS50aGVuKCgpID0+IHBheWxvYWQpOwogICAgfQogICAgcmV0dXJuIHBheWxvYWQ7CiAgfTsKfSk7CnZhciAkWm9kTWFwID0gJGNvbnN0cnVjdG9yKCIkWm9kTWFwIiwgKGluc3QsIGRlZikgPT4gewogICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7CiAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7CiAgICBpZiAoIShpbnB1dCBpbnN0YW5jZW9mIE1hcCkpIHsKICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7CiAgICAgICAgZXhwZWN0ZWQ6ICJtYXAiLAogICAgICAgIGNvZGU6ICJpbnZhbGlkX3R5cGUiLAogICAgICAgIGlucHV0LAogICAgICAgIGluc3QKICAgICAgfSk7CiAgICAgIHJldHVybiBwYXlsb2FkOwogICAgfQogICAgY29uc3QgcHJvbXMgPSBbXTsKICAgIHBheWxvYWQudmFsdWUgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpOwogICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgaW5wdXQpIHsKICAgICAgY29uc3Qga2V5UmVzdWx0ID0gZGVmLmtleVR5cGUuX3pvZC5ydW4oeyB2YWx1ZToga2V5LCBpc3N1ZXM6IFtdIH0sIGN0eCk7CiAgICAgIGNvbnN0IHZhbHVlUmVzdWx0ID0gZGVmLnZhbHVlVHlwZS5fem9kLnJ1bih7IHZhbHVlLCBpc3N1ZXM6IFtdIH0sIGN0eCk7CiAgICAgIGlmIChrZXlSZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlIHx8IHZhbHVlUmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkgewogICAgICAgIHByb21zLnB1c2goUHJvbWlzZS5hbGwoW2tleVJlc3VsdCwgdmFsdWVSZXN1bHRdKS50aGVuKChba2V5UmVzdWx0MiwgdmFsdWVSZXN1bHQyXSkgPT4gewogICAgICAgICAgaGFuZGxlTWFwUmVzdWx0KGtleVJlc3VsdDIsIHZhbHVlUmVzdWx0MiwgcGF5bG9hZCwga2V5LCBpbnB1dCwgaW5zdCwgY3R4KTsKICAgICAgICB9KSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaGFuZGxlTWFwUmVzdWx0KGtleVJlc3VsdCwgdmFsdWVSZXN1bHQsIHBheWxvYWQsIGtleSwgaW5wdXQsIGluc3QsIGN0eCk7CiAgICAgIH0KICAgIH0KICAgIGlmIChwcm9tcy5sZW5ndGgpCiAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9tcykudGhlbigoKSA9PiBwYXlsb2FkKTsKICAgIHJldHVybiBwYXlsb2FkOwogIH07Cn0pOwpmdW5jdGlvbiBoYW5kbGVNYXBSZXN1bHQoa2V5UmVzdWx0LCB2YWx1ZVJlc3VsdCwgZmluYWwsIGtleSwgaW5wdXQsIGluc3QsIGN0eCkgewogIGlmIChrZXlSZXN1bHQuaXNzdWVzLmxlbmd0aCkgewogICAgaWYgKHByb3BlcnR5S2V5VHlwZXMuaGFzKHR5cGVvZiBrZXkpKSB7CiAgICAgIGZpbmFsLmlzc3Vlcy5wdXNoKC4uLnByZWZpeElzc3VlcyhrZXksIGtleVJlc3VsdC5pc3N1ZXMpKTsKICAgIH0gZWxzZSB7CiAgICAgIGZpbmFsLmlzc3Vlcy5wdXNoKHsKICAgICAgICBjb2RlOiAiaW52YWxpZF9rZXkiLAogICAgICAgIG9yaWdpbjogIm1hcCIsCiAgICAgICAgaW5wdXQsCiAgICAgICAgaW5zdCwKICAgICAgICBpc3N1ZXM6IGtleVJlc3VsdC5pc3N1ZXMubWFwKChpc3MpID0+IGZpbmFsaXplSXNzdWUoaXNzLCBjdHgsIGNvbmZpZygpKSkKICAgICAgfSk7CiAgICB9CiAgfQogIGlmICh2YWx1ZVJlc3VsdC5pc3N1ZXMubGVuZ3RoKSB7CiAgICBpZiAocHJvcGVydHlLZXlUeXBlcy5oYXModHlwZW9mIGtleSkpIHsKICAgICAgZmluYWwuaXNzdWVzLnB1c2goLi4ucHJlZml4SXNzdWVzKGtleSwgdmFsdWVSZXN1bHQuaXNzdWVzKSk7CiAgICB9IGVsc2UgewogICAgICBmaW5hbC5pc3N1ZXMucHVzaCh7CiAgICAgICAgb3JpZ2luOiAibWFwIiwKICAgICAgICBjb2RlOiAiaW52YWxpZF9lbGVtZW50IiwKICAgICAgICBpbnB1dCwKICAgICAgICBpbnN0LAogICAgICAgIGtleSwKICAgICAgICBpc3N1ZXM6IHZhbHVlUmVzdWx0Lmlzc3Vlcy5tYXAoKGlzcykgPT4gZmluYWxpemVJc3N1ZShpc3MsIGN0eCwgY29uZmlnKCkpKQogICAgICB9KTsKICAgIH0KICB9CiAgZmluYWwudmFsdWUuc2V0KGtleVJlc3VsdC52YWx1ZSwgdmFsdWVSZXN1bHQudmFsdWUpOwp9CnZhciAkWm9kU2V0ID0gJGNvbnN0cnVjdG9yKCIkWm9kU2V0IiwgKGluc3QsIGRlZikgPT4gewogICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7CiAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7CiAgICBpZiAoIShpbnB1dCBpbnN0YW5jZW9mIFNldCkpIHsKICAgICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7CiAgICAgICAgaW5wdXQsCiAgICAgICAgaW5zdCwKICAgICAgICBleHBlY3RlZDogInNldCIsCiAgICAgICAgY29kZTogImludmFsaWRfdHlwZSIKICAgICAgfSk7CiAgICAgIHJldHVybiBwYXlsb2FkOwogICAgfQogICAgY29uc3QgcHJvbXMgPSBbXTsKICAgIHBheWxvYWQudmFsdWUgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogICAgZm9yIChjb25zdCBpdGVtIG9mIGlucHV0KSB7CiAgICAgIGNvbnN0IHJlc3VsdCA9IGRlZi52YWx1ZVR5cGUuX3pvZC5ydW4oeyB2YWx1ZTogaXRlbSwgaXNzdWVzOiBbXSB9LCBjdHgpOwogICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkgewogICAgICAgIHByb21zLnB1c2gocmVzdWx0LnRoZW4oKHJlc3VsdDIpID0+IGhhbmRsZVNldFJlc3VsdChyZXN1bHQyLCBwYXlsb2FkKSkpOwogICAgICB9IGVsc2UKICAgICAgICBoYW5kbGVTZXRSZXN1bHQocmVzdWx0LCBwYXlsb2FkKTsKICAgIH0KICAgIGlmIChwcm9tcy5sZW5ndGgpCiAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9tcykudGhlbigoKSA9PiBwYXlsb2FkKTsKICAgIHJldHVybiBwYXlsb2FkOwogIH07Cn0pOwpmdW5jdGlvbiBoYW5kbGVTZXRSZXN1bHQocmVzdWx0LCBmaW5hbCkgewogIGlmIChyZXN1bHQuaXNzdWVzLmxlbmd0aCkgewogICAgZmluYWwuaXNzdWVzLnB1c2goLi4ucmVzdWx0Lmlzc3Vlcyk7CiAgfQogIGZpbmFsLnZhbHVlLmFkZChyZXN1bHQudmFsdWUpOwp9CnZhciAkWm9kRW51bSA9ICRjb25zdHJ1Y3RvcigiJFpvZEVudW0iLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGNvbnN0IHZhbHVlcyA9IGdldEVudW1WYWx1ZXMoZGVmLmVudHJpZXMpOwogIGNvbnN0IHZhbHVlc1NldCA9IG5ldyBTZXQodmFsdWVzKTsKICBpbnN0Ll96b2QudmFsdWVzID0gdmFsdWVzU2V0OwogIGluc3QuX3pvZC5wYXR0ZXJuID0gbmV3IFJlZ0V4cChgXigke3ZhbHVlcy5maWx0ZXIoKGspID0+IHByb3BlcnR5S2V5VHlwZXMuaGFzKHR5cGVvZiBrKSkubWFwKChvKSA9PiB0eXBlb2YgbyA9PT0gInN0cmluZyIgPyBlc2NhcGVSZWdleChvKSA6IG8udG9TdHJpbmcoKSkuam9pbigifCIpfSkkYCk7CiAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIF9jdHgpID0+IHsKICAgIGNvbnN0IGlucHV0ID0gcGF5bG9hZC52YWx1ZTsKICAgIGlmICh2YWx1ZXNTZXQuaGFzKGlucHV0KSkgewogICAgICByZXR1cm4gcGF5bG9hZDsKICAgIH0KICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICBjb2RlOiAiaW52YWxpZF92YWx1ZSIsCiAgICAgIHZhbHVlcywKICAgICAgaW5wdXQsCiAgICAgIGluc3QKICAgIH0pOwogICAgcmV0dXJuIHBheWxvYWQ7CiAgfTsKfSk7CnZhciAkWm9kTGl0ZXJhbCA9ICRjb25zdHJ1Y3RvcigiJFpvZExpdGVyYWwiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGlmIChkZWYudmFsdWVzLmxlbmd0aCA9PT0gMCkgewogICAgdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgY3JlYXRlIGxpdGVyYWwgc2NoZW1hIHdpdGggbm8gdmFsaWQgdmFsdWVzIik7CiAgfQogIGluc3QuX3pvZC52YWx1ZXMgPSBuZXcgU2V0KGRlZi52YWx1ZXMpOwogIGluc3QuX3pvZC5wYXR0ZXJuID0gbmV3IFJlZ0V4cChgXigke2RlZi52YWx1ZXMubWFwKChvKSA9PiB0eXBlb2YgbyA9PT0gInN0cmluZyIgPyBlc2NhcGVSZWdleChvKSA6IG8gPyBlc2NhcGVSZWdleChvLnRvU3RyaW5nKCkpIDogU3RyaW5nKG8pKS5qb2luKCJ8Iil9KSRgKTsKICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgX2N0eCkgPT4gewogICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlOwogICAgaWYgKGluc3QuX3pvZC52YWx1ZXMuaGFzKGlucHV0KSkgewogICAgICByZXR1cm4gcGF5bG9hZDsKICAgIH0KICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICBjb2RlOiAiaW52YWxpZF92YWx1ZSIsCiAgICAgIHZhbHVlczogZGVmLnZhbHVlcywKICAgICAgaW5wdXQsCiAgICAgIGluc3QKICAgIH0pOwogICAgcmV0dXJuIHBheWxvYWQ7CiAgfTsKfSk7CnZhciAkWm9kRmlsZSA9ICRjb25zdHJ1Y3RvcigiJFpvZEZpbGUiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBfY3R4KSA9PiB7CiAgICBjb25zdCBpbnB1dCA9IHBheWxvYWQudmFsdWU7CiAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBGaWxlKQogICAgICByZXR1cm4gcGF5bG9hZDsKICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICBleHBlY3RlZDogImZpbGUiLAogICAgICBjb2RlOiAiaW52YWxpZF90eXBlIiwKICAgICAgaW5wdXQsCiAgICAgIGluc3QKICAgIH0pOwogICAgcmV0dXJuIHBheWxvYWQ7CiAgfTsKfSk7CnZhciAkWm9kVHJhbnNmb3JtID0gJGNvbnN0cnVjdG9yKCIkWm9kVHJhbnNmb3JtIiwgKGluc3QsIGRlZikgPT4gewogICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7CiAgICBpZiAoY3R4LmRpcmVjdGlvbiA9PT0gImJhY2t3YXJkIikgewogICAgICB0aHJvdyBuZXcgJFpvZEVuY29kZUVycm9yKGluc3QuY29uc3RydWN0b3IubmFtZSk7CiAgICB9CiAgICBjb25zdCBfb3V0ID0gZGVmLnRyYW5zZm9ybShwYXlsb2FkLnZhbHVlLCBwYXlsb2FkKTsKICAgIGlmIChjdHguYXN5bmMpIHsKICAgICAgY29uc3Qgb3V0cHV0ID0gX291dCBpbnN0YW5jZW9mIFByb21pc2UgPyBfb3V0IDogUHJvbWlzZS5yZXNvbHZlKF9vdXQpOwogICAgICByZXR1cm4gb3V0cHV0LnRoZW4oKG91dHB1dDIpID0+IHsKICAgICAgICBwYXlsb2FkLnZhbHVlID0gb3V0cHV0MjsKICAgICAgICByZXR1cm4gcGF5bG9hZDsKICAgICAgfSk7CiAgICB9CiAgICBpZiAoX291dCBpbnN0YW5jZW9mIFByb21pc2UpIHsKICAgICAgdGhyb3cgbmV3ICRab2RBc3luY0Vycm9yKCk7CiAgICB9CiAgICBwYXlsb2FkLnZhbHVlID0gX291dDsKICAgIHJldHVybiBwYXlsb2FkOwogIH07Cn0pOwpmdW5jdGlvbiBoYW5kbGVPcHRpb25hbFJlc3VsdChyZXN1bHQsIGlucHV0KSB7CiAgaWYgKHJlc3VsdC5pc3N1ZXMubGVuZ3RoICYmIGlucHV0ID09PSB2b2lkIDApIHsKICAgIHJldHVybiB7IGlzc3VlczogW10sIHZhbHVlOiB2b2lkIDAgfTsKICB9CiAgcmV0dXJuIHJlc3VsdDsKfQp2YXIgJFpvZE9wdGlvbmFsID0gJGNvbnN0cnVjdG9yKCIkWm9kT3B0aW9uYWwiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGluc3QuX3pvZC5vcHRpbiA9ICJvcHRpb25hbCI7CiAgaW5zdC5fem9kLm9wdG91dCA9ICJvcHRpb25hbCI7CiAgZGVmaW5lTGF6eShpbnN0Ll96b2QsICJ2YWx1ZXMiLCAoKSA9PiB7CiAgICByZXR1cm4gZGVmLmlubmVyVHlwZS5fem9kLnZhbHVlcyA/IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFsuLi5kZWYuaW5uZXJUeXBlLl96b2QudmFsdWVzLCB2b2lkIDBdKSA6IHZvaWQgMDsKICB9KTsKICBkZWZpbmVMYXp5KGluc3QuX3pvZCwgInBhdHRlcm4iLCAoKSA9PiB7CiAgICBjb25zdCBwYXR0ZXJuID0gZGVmLmlubmVyVHlwZS5fem9kLnBhdHRlcm47CiAgICByZXR1cm4gcGF0dGVybiA/IG5ldyBSZWdFeHAoYF4oJHtjbGVhblJlZ2V4KHBhdHRlcm4uc291cmNlKX0pPyRgKSA6IHZvaWQgMDsKICB9KTsKICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7CiAgICBpZiAoZGVmLmlubmVyVHlwZS5fem9kLm9wdGluID09PSAib3B0aW9uYWwiKSB7CiAgICAgIGNvbnN0IHJlc3VsdCA9IGRlZi5pbm5lclR5cGUuX3pvZC5ydW4ocGF5bG9hZCwgY3R4KTsKICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpCiAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyKSA9PiBoYW5kbGVPcHRpb25hbFJlc3VsdChyLCBwYXlsb2FkLnZhbHVlKSk7CiAgICAgIHJldHVybiBoYW5kbGVPcHRpb25hbFJlc3VsdChyZXN1bHQsIHBheWxvYWQudmFsdWUpOwogICAgfQogICAgaWYgKHBheWxvYWQudmFsdWUgPT09IHZvaWQgMCkgewogICAgICByZXR1cm4gcGF5bG9hZDsKICAgIH0KICAgIHJldHVybiBkZWYuaW5uZXJUeXBlLl96b2QucnVuKHBheWxvYWQsIGN0eCk7CiAgfTsKfSk7CnZhciAkWm9kTnVsbGFibGUgPSAkY29uc3RydWN0b3IoIiRab2ROdWxsYWJsZSIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7CiAgZGVmaW5lTGF6eShpbnN0Ll96b2QsICJvcHRpbiIsICgpID0+IGRlZi5pbm5lclR5cGUuX3pvZC5vcHRpbik7CiAgZGVmaW5lTGF6eShpbnN0Ll96b2QsICJvcHRvdXQiLCAoKSA9PiBkZWYuaW5uZXJUeXBlLl96b2Qub3B0b3V0KTsKICBkZWZpbmVMYXp5KGluc3QuX3pvZCwgInBhdHRlcm4iLCAoKSA9PiB7CiAgICBjb25zdCBwYXR0ZXJuID0gZGVmLmlubmVyVHlwZS5fem9kLnBhdHRlcm47CiAgICByZXR1cm4gcGF0dGVybiA/IG5ldyBSZWdFeHAoYF4oJHtjbGVhblJlZ2V4KHBhdHRlcm4uc291cmNlKX18bnVsbCkkYCkgOiB2b2lkIDA7CiAgfSk7CiAgZGVmaW5lTGF6eShpbnN0Ll96b2QsICJ2YWx1ZXMiLCAoKSA9PiB7CiAgICByZXR1cm4gZGVmLmlubmVyVHlwZS5fem9kLnZhbHVlcyA/IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFsuLi5kZWYuaW5uZXJUeXBlLl96b2QudmFsdWVzLCBudWxsXSkgOiB2b2lkIDA7CiAgfSk7CiAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIGN0eCkgPT4gewogICAgaWYgKHBheWxvYWQudmFsdWUgPT09IG51bGwpCiAgICAgIHJldHVybiBwYXlsb2FkOwogICAgcmV0dXJuIGRlZi5pbm5lclR5cGUuX3pvZC5ydW4ocGF5bG9hZCwgY3R4KTsKICB9Owp9KTsKdmFyICRab2REZWZhdWx0ID0gJGNvbnN0cnVjdG9yKCIkWm9kRGVmYXVsdCIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7CiAgaW5zdC5fem9kLm9wdGluID0gIm9wdGlvbmFsIjsKICBkZWZpbmVMYXp5KGluc3QuX3pvZCwgInZhbHVlcyIsICgpID0+IGRlZi5pbm5lclR5cGUuX3pvZC52YWx1ZXMpOwogIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHsKICAgIGlmIChjdHguZGlyZWN0aW9uID09PSAiYmFja3dhcmQiKSB7CiAgICAgIHJldHVybiBkZWYuaW5uZXJUeXBlLl96b2QucnVuKHBheWxvYWQsIGN0eCk7CiAgICB9CiAgICBpZiAocGF5bG9hZC52YWx1ZSA9PT0gdm9pZCAwKSB7CiAgICAgIHBheWxvYWQudmFsdWUgPSBkZWYuZGVmYXVsdFZhbHVlOwogICAgICByZXR1cm4gcGF5bG9hZDsKICAgIH0KICAgIGNvbnN0IHJlc3VsdCA9IGRlZi5pbm5lclR5cGUuX3pvZC5ydW4ocGF5bG9hZCwgY3R4KTsKICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7CiAgICAgIHJldHVybiByZXN1bHQudGhlbigocmVzdWx0MikgPT4gaGFuZGxlRGVmYXVsdFJlc3VsdChyZXN1bHQyLCBkZWYpKTsKICAgIH0KICAgIHJldHVybiBoYW5kbGVEZWZhdWx0UmVzdWx0KHJlc3VsdCwgZGVmKTsKICB9Owp9KTsKZnVuY3Rpb24gaGFuZGxlRGVmYXVsdFJlc3VsdChwYXlsb2FkLCBkZWYpIHsKICBpZiAocGF5bG9hZC52YWx1ZSA9PT0gdm9pZCAwKSB7CiAgICBwYXlsb2FkLnZhbHVlID0gZGVmLmRlZmF1bHRWYWx1ZTsKICB9CiAgcmV0dXJuIHBheWxvYWQ7Cn0KdmFyICRab2RQcmVmYXVsdCA9ICRjb25zdHJ1Y3RvcigiJFpvZFByZWZhdWx0IiwgKGluc3QsIGRlZikgPT4gewogICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKICBpbnN0Ll96b2Qub3B0aW4gPSAib3B0aW9uYWwiOwogIGRlZmluZUxhenkoaW5zdC5fem9kLCAidmFsdWVzIiwgKCkgPT4gZGVmLmlubmVyVHlwZS5fem9kLnZhbHVlcyk7CiAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIGN0eCkgPT4gewogICAgaWYgKGN0eC5kaXJlY3Rpb24gPT09ICJiYWNrd2FyZCIpIHsKICAgICAgcmV0dXJuIGRlZi5pbm5lclR5cGUuX3pvZC5ydW4ocGF5bG9hZCwgY3R4KTsKICAgIH0KICAgIGlmIChwYXlsb2FkLnZhbHVlID09PSB2b2lkIDApIHsKICAgICAgcGF5bG9hZC52YWx1ZSA9IGRlZi5kZWZhdWx0VmFsdWU7CiAgICB9CiAgICByZXR1cm4gZGVmLmlubmVyVHlwZS5fem9kLnJ1bihwYXlsb2FkLCBjdHgpOwogIH07Cn0pOwp2YXIgJFpvZE5vbk9wdGlvbmFsID0gJGNvbnN0cnVjdG9yKCIkWm9kTm9uT3B0aW9uYWwiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGRlZmluZUxhenkoaW5zdC5fem9kLCAidmFsdWVzIiwgKCkgPT4gewogICAgY29uc3QgdiA9IGRlZi5pbm5lclR5cGUuX3pvZC52YWx1ZXM7CiAgICByZXR1cm4gdiA/IG5ldyBTZXQoWy4uLnZdLmZpbHRlcigoeCkgPT4geCAhPT0gdm9pZCAwKSkgOiB2b2lkIDA7CiAgfSk7CiAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIGN0eCkgPT4gewogICAgY29uc3QgcmVzdWx0ID0gZGVmLmlubmVyVHlwZS5fem9kLnJ1bihwYXlsb2FkLCBjdHgpOwogICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHsKICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQyKSA9PiBoYW5kbGVOb25PcHRpb25hbFJlc3VsdChyZXN1bHQyLCBpbnN0KSk7CiAgICB9CiAgICByZXR1cm4gaGFuZGxlTm9uT3B0aW9uYWxSZXN1bHQocmVzdWx0LCBpbnN0KTsKICB9Owp9KTsKZnVuY3Rpb24gaGFuZGxlTm9uT3B0aW9uYWxSZXN1bHQocGF5bG9hZCwgaW5zdCkgewogIGlmICghcGF5bG9hZC5pc3N1ZXMubGVuZ3RoICYmIHBheWxvYWQudmFsdWUgPT09IHZvaWQgMCkgewogICAgcGF5bG9hZC5pc3N1ZXMucHVzaCh7CiAgICAgIGNvZGU6ICJpbnZhbGlkX3R5cGUiLAogICAgICBleHBlY3RlZDogIm5vbm9wdGlvbmFsIiwKICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsCiAgICAgIGluc3QKICAgIH0pOwogIH0KICByZXR1cm4gcGF5bG9hZDsKfQp2YXIgJFpvZFN1Y2Nlc3MgPSAkY29uc3RydWN0b3IoIiRab2RTdWNjZXNzIiwgKGluc3QsIGRlZikgPT4gewogICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7CiAgICBpZiAoY3R4LmRpcmVjdGlvbiA9PT0gImJhY2t3YXJkIikgewogICAgICB0aHJvdyBuZXcgJFpvZEVuY29kZUVycm9yKCJab2RTdWNjZXNzIik7CiAgICB9CiAgICBjb25zdCByZXN1bHQgPSBkZWYuaW5uZXJUeXBlLl96b2QucnVuKHBheWxvYWQsIGN0eCk7CiAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkgewogICAgICByZXR1cm4gcmVzdWx0LnRoZW4oKHJlc3VsdDIpID0+IHsKICAgICAgICBwYXlsb2FkLnZhbHVlID0gcmVzdWx0Mi5pc3N1ZXMubGVuZ3RoID09PSAwOwogICAgICAgIHJldHVybiBwYXlsb2FkOwogICAgICB9KTsKICAgIH0KICAgIHBheWxvYWQudmFsdWUgPSByZXN1bHQuaXNzdWVzLmxlbmd0aCA9PT0gMDsKICAgIHJldHVybiBwYXlsb2FkOwogIH07Cn0pOwp2YXIgJFpvZENhdGNoID0gJGNvbnN0cnVjdG9yKCIkWm9kQ2F0Y2giLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGRlZmluZUxhenkoaW5zdC5fem9kLCAib3B0aW4iLCAoKSA9PiBkZWYuaW5uZXJUeXBlLl96b2Qub3B0aW4pOwogIGRlZmluZUxhenkoaW5zdC5fem9kLCAib3B0b3V0IiwgKCkgPT4gZGVmLmlubmVyVHlwZS5fem9kLm9wdG91dCk7CiAgZGVmaW5lTGF6eShpbnN0Ll96b2QsICJ2YWx1ZXMiLCAoKSA9PiBkZWYuaW5uZXJUeXBlLl96b2QudmFsdWVzKTsKICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7CiAgICBpZiAoY3R4LmRpcmVjdGlvbiA9PT0gImJhY2t3YXJkIikgewogICAgICByZXR1cm4gZGVmLmlubmVyVHlwZS5fem9kLnJ1bihwYXlsb2FkLCBjdHgpOwogICAgfQogICAgY29uc3QgcmVzdWx0ID0gZGVmLmlubmVyVHlwZS5fem9kLnJ1bihwYXlsb2FkLCBjdHgpOwogICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHsKICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQyKSA9PiB7CiAgICAgICAgcGF5bG9hZC52YWx1ZSA9IHJlc3VsdDIudmFsdWU7CiAgICAgICAgaWYgKHJlc3VsdDIuaXNzdWVzLmxlbmd0aCkgewogICAgICAgICAgcGF5bG9hZC52YWx1ZSA9IGRlZi5jYXRjaFZhbHVlKHsKICAgICAgICAgICAgLi4ucGF5bG9hZCwKICAgICAgICAgICAgZXJyb3I6IHsKICAgICAgICAgICAgICBpc3N1ZXM6IHJlc3VsdDIuaXNzdWVzLm1hcCgoaXNzKSA9PiBmaW5hbGl6ZUlzc3VlKGlzcywgY3R4LCBjb25maWcoKSkpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlCiAgICAgICAgICB9KTsKICAgICAgICAgIHBheWxvYWQuaXNzdWVzID0gW107CiAgICAgICAgfQogICAgICAgIHJldHVybiBwYXlsb2FkOwogICAgICB9KTsKICAgIH0KICAgIHBheWxvYWQudmFsdWUgPSByZXN1bHQudmFsdWU7CiAgICBpZiAocmVzdWx0Lmlzc3Vlcy5sZW5ndGgpIHsKICAgICAgcGF5bG9hZC52YWx1ZSA9IGRlZi5jYXRjaFZhbHVlKHsKICAgICAgICAuLi5wYXlsb2FkLAogICAgICAgIGVycm9yOiB7CiAgICAgICAgICBpc3N1ZXM6IHJlc3VsdC5pc3N1ZXMubWFwKChpc3MpID0+IGZpbmFsaXplSXNzdWUoaXNzLCBjdHgsIGNvbmZpZygpKSkKICAgICAgICB9LAogICAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlCiAgICAgIH0pOwogICAgICBwYXlsb2FkLmlzc3VlcyA9IFtdOwogICAgfQogICAgcmV0dXJuIHBheWxvYWQ7CiAgfTsKfSk7CnZhciAkWm9kTmFOID0gJGNvbnN0cnVjdG9yKCIkWm9kTmFOIiwgKGluc3QsIGRlZikgPT4gewogICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgX2N0eCkgPT4gewogICAgaWYgKHR5cGVvZiBwYXlsb2FkLnZhbHVlICE9PSAibnVtYmVyIiB8fCAhTnVtYmVyLmlzTmFOKHBheWxvYWQudmFsdWUpKSB7CiAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLAogICAgICAgIGluc3QsCiAgICAgICAgZXhwZWN0ZWQ6ICJuYW4iLAogICAgICAgIGNvZGU6ICJpbnZhbGlkX3R5cGUiCiAgICAgIH0pOwogICAgICByZXR1cm4gcGF5bG9hZDsKICAgIH0KICAgIHJldHVybiBwYXlsb2FkOwogIH07Cn0pOwp2YXIgJFpvZFBpcGUgPSAkY29uc3RydWN0b3IoIiRab2RQaXBlIiwgKGluc3QsIGRlZikgPT4gewogICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKICBkZWZpbmVMYXp5KGluc3QuX3pvZCwgInZhbHVlcyIsICgpID0+IGRlZi5pbi5fem9kLnZhbHVlcyk7CiAgZGVmaW5lTGF6eShpbnN0Ll96b2QsICJvcHRpbiIsICgpID0+IGRlZi5pbi5fem9kLm9wdGluKTsKICBkZWZpbmVMYXp5KGluc3QuX3pvZCwgIm9wdG91dCIsICgpID0+IGRlZi5vdXQuX3pvZC5vcHRvdXQpOwogIGRlZmluZUxhenkoaW5zdC5fem9kLCAicHJvcFZhbHVlcyIsICgpID0+IGRlZi5pbi5fem9kLnByb3BWYWx1ZXMpOwogIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHsKICAgIGlmIChjdHguZGlyZWN0aW9uID09PSAiYmFja3dhcmQiKSB7CiAgICAgIGNvbnN0IHJpZ2h0ID0gZGVmLm91dC5fem9kLnJ1bihwYXlsb2FkLCBjdHgpOwogICAgICBpZiAocmlnaHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7CiAgICAgICAgcmV0dXJuIHJpZ2h0LnRoZW4oKHJpZ2h0MikgPT4gaGFuZGxlUGlwZVJlc3VsdChyaWdodDIsIGRlZi5pbiwgY3R4KSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGhhbmRsZVBpcGVSZXN1bHQocmlnaHQsIGRlZi5pbiwgY3R4KTsKICAgIH0KICAgIGNvbnN0IGxlZnQgPSBkZWYuaW4uX3pvZC5ydW4ocGF5bG9hZCwgY3R4KTsKICAgIGlmIChsZWZ0IGluc3RhbmNlb2YgUHJvbWlzZSkgewogICAgICByZXR1cm4gbGVmdC50aGVuKChsZWZ0MikgPT4gaGFuZGxlUGlwZVJlc3VsdChsZWZ0MiwgZGVmLm91dCwgY3R4KSk7CiAgICB9CiAgICByZXR1cm4gaGFuZGxlUGlwZVJlc3VsdChsZWZ0LCBkZWYub3V0LCBjdHgpOwogIH07Cn0pOwpmdW5jdGlvbiBoYW5kbGVQaXBlUmVzdWx0KGxlZnQsIG5leHQsIGN0eCkgewogIGlmIChsZWZ0Lmlzc3Vlcy5sZW5ndGgpIHsKICAgIGxlZnQuYWJvcnRlZCA9IHRydWU7CiAgICByZXR1cm4gbGVmdDsKICB9CiAgcmV0dXJuIG5leHQuX3pvZC5ydW4oeyB2YWx1ZTogbGVmdC52YWx1ZSwgaXNzdWVzOiBsZWZ0Lmlzc3VlcyB9LCBjdHgpOwp9CnZhciAkWm9kQ29kZWMgPSAkY29uc3RydWN0b3IoIiRab2RDb2RlYyIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7CiAgZGVmaW5lTGF6eShpbnN0Ll96b2QsICJ2YWx1ZXMiLCAoKSA9PiBkZWYuaW4uX3pvZC52YWx1ZXMpOwogIGRlZmluZUxhenkoaW5zdC5fem9kLCAib3B0aW4iLCAoKSA9PiBkZWYuaW4uX3pvZC5vcHRpbik7CiAgZGVmaW5lTGF6eShpbnN0Ll96b2QsICJvcHRvdXQiLCAoKSA9PiBkZWYub3V0Ll96b2Qub3B0b3V0KTsKICBkZWZpbmVMYXp5KGluc3QuX3pvZCwgInByb3BWYWx1ZXMiLCAoKSA9PiBkZWYuaW4uX3pvZC5wcm9wVmFsdWVzKTsKICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7CiAgICBjb25zdCBkaXJlY3Rpb24gPSBjdHguZGlyZWN0aW9uIHx8ICJmb3J3YXJkIjsKICAgIGlmIChkaXJlY3Rpb24gPT09ICJmb3J3YXJkIikgewogICAgICBjb25zdCBsZWZ0ID0gZGVmLmluLl96b2QucnVuKHBheWxvYWQsIGN0eCk7CiAgICAgIGlmIChsZWZ0IGluc3RhbmNlb2YgUHJvbWlzZSkgewogICAgICAgIHJldHVybiBsZWZ0LnRoZW4oKGxlZnQyKSA9PiBoYW5kbGVDb2RlY0FSZXN1bHQobGVmdDIsIGRlZiwgY3R4KSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGhhbmRsZUNvZGVjQVJlc3VsdChsZWZ0LCBkZWYsIGN0eCk7CiAgICB9IGVsc2UgewogICAgICBjb25zdCByaWdodCA9IGRlZi5vdXQuX3pvZC5ydW4ocGF5bG9hZCwgY3R4KTsKICAgICAgaWYgKHJpZ2h0IGluc3RhbmNlb2YgUHJvbWlzZSkgewogICAgICAgIHJldHVybiByaWdodC50aGVuKChyaWdodDIpID0+IGhhbmRsZUNvZGVjQVJlc3VsdChyaWdodDIsIGRlZiwgY3R4KSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGhhbmRsZUNvZGVjQVJlc3VsdChyaWdodCwgZGVmLCBjdHgpOwogICAgfQogIH07Cn0pOwpmdW5jdGlvbiBoYW5kbGVDb2RlY0FSZXN1bHQocmVzdWx0LCBkZWYsIGN0eCkgewogIGlmIChyZXN1bHQuaXNzdWVzLmxlbmd0aCkgewogICAgcmVzdWx0LmFib3J0ZWQgPSB0cnVlOwogICAgcmV0dXJuIHJlc3VsdDsKICB9CiAgY29uc3QgZGlyZWN0aW9uID0gY3R4LmRpcmVjdGlvbiB8fCAiZm9yd2FyZCI7CiAgaWYgKGRpcmVjdGlvbiA9PT0gImZvcndhcmQiKSB7CiAgICBjb25zdCB0cmFuc2Zvcm1lZCA9IGRlZi50cmFuc2Zvcm0ocmVzdWx0LnZhbHVlLCByZXN1bHQpOwogICAgaWYgKHRyYW5zZm9ybWVkIGluc3RhbmNlb2YgUHJvbWlzZSkgewogICAgICByZXR1cm4gdHJhbnNmb3JtZWQudGhlbigodmFsdWUpID0+IGhhbmRsZUNvZGVjVHhSZXN1bHQocmVzdWx0LCB2YWx1ZSwgZGVmLm91dCwgY3R4KSk7CiAgICB9CiAgICByZXR1cm4gaGFuZGxlQ29kZWNUeFJlc3VsdChyZXN1bHQsIHRyYW5zZm9ybWVkLCBkZWYub3V0LCBjdHgpOwogIH0gZWxzZSB7CiAgICBjb25zdCB0cmFuc2Zvcm1lZCA9IGRlZi5yZXZlcnNlVHJhbnNmb3JtKHJlc3VsdC52YWx1ZSwgcmVzdWx0KTsKICAgIGlmICh0cmFuc2Zvcm1lZCBpbnN0YW5jZW9mIFByb21pc2UpIHsKICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkLnRoZW4oKHZhbHVlKSA9PiBoYW5kbGVDb2RlY1R4UmVzdWx0KHJlc3VsdCwgdmFsdWUsIGRlZi5pbiwgY3R4KSk7CiAgICB9CiAgICByZXR1cm4gaGFuZGxlQ29kZWNUeFJlc3VsdChyZXN1bHQsIHRyYW5zZm9ybWVkLCBkZWYuaW4sIGN0eCk7CiAgfQp9CmZ1bmN0aW9uIGhhbmRsZUNvZGVjVHhSZXN1bHQobGVmdCwgdmFsdWUsIG5leHRTY2hlbWEsIGN0eCkgewogIGlmIChsZWZ0Lmlzc3Vlcy5sZW5ndGgpIHsKICAgIGxlZnQuYWJvcnRlZCA9IHRydWU7CiAgICByZXR1cm4gbGVmdDsKICB9CiAgcmV0dXJuIG5leHRTY2hlbWEuX3pvZC5ydW4oeyB2YWx1ZSwgaXNzdWVzOiBsZWZ0Lmlzc3VlcyB9LCBjdHgpOwp9CnZhciAkWm9kUmVhZG9ubHkgPSAkY29uc3RydWN0b3IoIiRab2RSZWFkb25seSIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7CiAgZGVmaW5lTGF6eShpbnN0Ll96b2QsICJwcm9wVmFsdWVzIiwgKCkgPT4gZGVmLmlubmVyVHlwZS5fem9kLnByb3BWYWx1ZXMpOwogIGRlZmluZUxhenkoaW5zdC5fem9kLCAidmFsdWVzIiwgKCkgPT4gZGVmLmlubmVyVHlwZS5fem9kLnZhbHVlcyk7CiAgZGVmaW5lTGF6eShpbnN0Ll96b2QsICJvcHRpbiIsICgpID0+IGRlZi5pbm5lclR5cGUuX3pvZC5vcHRpbik7CiAgZGVmaW5lTGF6eShpbnN0Ll96b2QsICJvcHRvdXQiLCAoKSA9PiBkZWYuaW5uZXJUeXBlLl96b2Qub3B0b3V0KTsKICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgY3R4KSA9PiB7CiAgICBpZiAoY3R4LmRpcmVjdGlvbiA9PT0gImJhY2t3YXJkIikgewogICAgICByZXR1cm4gZGVmLmlubmVyVHlwZS5fem9kLnJ1bihwYXlsb2FkLCBjdHgpOwogICAgfQogICAgY29uc3QgcmVzdWx0ID0gZGVmLmlubmVyVHlwZS5fem9kLnJ1bihwYXlsb2FkLCBjdHgpOwogICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHsKICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKGhhbmRsZVJlYWRvbmx5UmVzdWx0KTsKICAgIH0KICAgIHJldHVybiBoYW5kbGVSZWFkb25seVJlc3VsdChyZXN1bHQpOwogIH07Cn0pOwpmdW5jdGlvbiBoYW5kbGVSZWFkb25seVJlc3VsdChwYXlsb2FkKSB7CiAgcGF5bG9hZC52YWx1ZSA9IE9iamVjdC5mcmVlemUocGF5bG9hZC52YWx1ZSk7CiAgcmV0dXJuIHBheWxvYWQ7Cn0KdmFyICRab2RUZW1wbGF0ZUxpdGVyYWwgPSAkY29uc3RydWN0b3IoIiRab2RUZW1wbGF0ZUxpdGVyYWwiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGNvbnN0IHJlZ2V4UGFydHMgPSBbXTsKICBmb3IgKGNvbnN0IHBhcnQgb2YgZGVmLnBhcnRzKSB7CiAgICBpZiAodHlwZW9mIHBhcnQgPT09ICJvYmplY3QiICYmIHBhcnQgIT09IG51bGwpIHsKICAgICAgaWYgKCFwYXJ0Ll96b2QucGF0dGVybikgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB0ZW1wbGF0ZSBsaXRlcmFsIHBhcnQsIG5vIHBhdHRlcm4gZm91bmQ6ICR7Wy4uLnBhcnQuX3pvZC50cmFpdHNdLnNoaWZ0KCl9YCk7CiAgICAgIH0KICAgICAgY29uc3Qgc291cmNlID0gcGFydC5fem9kLnBhdHRlcm4gaW5zdGFuY2VvZiBSZWdFeHAgPyBwYXJ0Ll96b2QucGF0dGVybi5zb3VyY2UgOiBwYXJ0Ll96b2QucGF0dGVybjsKICAgICAgaWYgKCFzb3VyY2UpCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHRlbXBsYXRlIGxpdGVyYWwgcGFydDogJHtwYXJ0Ll96b2QudHJhaXRzfWApOwogICAgICBjb25zdCBzdGFydCA9IHNvdXJjZS5zdGFydHNXaXRoKCJeIikgPyAxIDogMDsKICAgICAgY29uc3QgZW5kID0gc291cmNlLmVuZHNXaXRoKCIkIikgPyBzb3VyY2UubGVuZ3RoIC0gMSA6IHNvdXJjZS5sZW5ndGg7CiAgICAgIHJlZ2V4UGFydHMucHVzaChzb3VyY2Uuc2xpY2Uoc3RhcnQsIGVuZCkpOwogICAgfSBlbHNlIGlmIChwYXJ0ID09PSBudWxsIHx8IHByaW1pdGl2ZVR5cGVzLmhhcyh0eXBlb2YgcGFydCkpIHsKICAgICAgcmVnZXhQYXJ0cy5wdXNoKGVzY2FwZVJlZ2V4KGAke3BhcnR9YCkpOwogICAgfSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHRlbXBsYXRlIGxpdGVyYWwgcGFydDogJHtwYXJ0fWApOwogICAgfQogIH0KICBpbnN0Ll96b2QucGF0dGVybiA9IG5ldyBSZWdFeHAoYF4ke3JlZ2V4UGFydHMuam9pbigiIil9JGApOwogIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBfY3R4KSA9PiB7CiAgICBpZiAodHlwZW9mIHBheWxvYWQudmFsdWUgIT09ICJzdHJpbmciKSB7CiAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLAogICAgICAgIGluc3QsCiAgICAgICAgZXhwZWN0ZWQ6ICJ0ZW1wbGF0ZV9saXRlcmFsIiwKICAgICAgICBjb2RlOiAiaW52YWxpZF90eXBlIgogICAgICB9KTsKICAgICAgcmV0dXJuIHBheWxvYWQ7CiAgICB9CiAgICBpbnN0Ll96b2QucGF0dGVybi5sYXN0SW5kZXggPSAwOwogICAgaWYgKCFpbnN0Ll96b2QucGF0dGVybi50ZXN0KHBheWxvYWQudmFsdWUpKSB7CiAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLAogICAgICAgIGluc3QsCiAgICAgICAgY29kZTogImludmFsaWRfZm9ybWF0IiwKICAgICAgICBmb3JtYXQ6IGRlZi5mb3JtYXQgPz8gInRlbXBsYXRlX2xpdGVyYWwiLAogICAgICAgIHBhdHRlcm46IGluc3QuX3pvZC5wYXR0ZXJuLnNvdXJjZQogICAgICB9KTsKICAgICAgcmV0dXJuIHBheWxvYWQ7CiAgICB9CiAgICByZXR1cm4gcGF5bG9hZDsKICB9Owp9KTsKdmFyICRab2RGdW5jdGlvbiA9ICRjb25zdHJ1Y3RvcigiJFpvZEZ1bmN0aW9uIiwgKGluc3QsIGRlZikgPT4gewogICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKICBpbnN0Ll9kZWYgPSBkZWY7CiAgaW5zdC5fem9kLmRlZiA9IGRlZjsKICBpbnN0LmltcGxlbWVudCA9IChmdW5jKSA9PiB7CiAgICBpZiAodHlwZW9mIGZ1bmMgIT09ICJmdW5jdGlvbiIpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJpbXBsZW1lbnQoKSBtdXN0IGJlIGNhbGxlZCB3aXRoIGEgZnVuY3Rpb24iKTsKICAgIH0KICAgIHJldHVybiBmdW5jdGlvbiguLi5hcmdzKSB7CiAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBpbnN0Ll9kZWYuaW5wdXQgPyBwYXJzZShpbnN0Ll9kZWYuaW5wdXQsIGFyZ3MpIDogYXJnczsKICAgICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5hcHBseShmdW5jLCB0aGlzLCBwYXJzZWRBcmdzKTsKICAgICAgaWYgKGluc3QuX2RlZi5vdXRwdXQpIHsKICAgICAgICByZXR1cm4gcGFyc2UoaW5zdC5fZGVmLm91dHB1dCwgcmVzdWx0KTsKICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfTsKICB9OwogIGluc3QuaW1wbGVtZW50QXN5bmMgPSAoZnVuYykgPT4gewogICAgaWYgKHR5cGVvZiBmdW5jICE9PSAiZnVuY3Rpb24iKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiaW1wbGVtZW50QXN5bmMoKSBtdXN0IGJlIGNhbGxlZCB3aXRoIGEgZnVuY3Rpb24iKTsKICAgIH0KICAgIHJldHVybiBhc3luYyBmdW5jdGlvbiguLi5hcmdzKSB7CiAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBpbnN0Ll9kZWYuaW5wdXQgPyBhd2FpdCBwYXJzZUFzeW5jKGluc3QuX2RlZi5pbnB1dCwgYXJncykgOiBhcmdzOwogICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBSZWZsZWN0LmFwcGx5KGZ1bmMsIHRoaXMsIHBhcnNlZEFyZ3MpOwogICAgICBpZiAoaW5zdC5fZGVmLm91dHB1dCkgewogICAgICAgIHJldHVybiBhd2FpdCBwYXJzZUFzeW5jKGluc3QuX2RlZi5vdXRwdXQsIHJlc3VsdCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH07CiAgfTsKICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgX2N0eCkgPT4gewogICAgaWYgKHR5cGVvZiBwYXlsb2FkLnZhbHVlICE9PSAiZnVuY3Rpb24iKSB7CiAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICAgIGNvZGU6ICJpbnZhbGlkX3R5cGUiLAogICAgICAgIGV4cGVjdGVkOiAiZnVuY3Rpb24iLAogICAgICAgIGlucHV0OiBwYXlsb2FkLnZhbHVlLAogICAgICAgIGluc3QKICAgICAgfSk7CiAgICAgIHJldHVybiBwYXlsb2FkOwogICAgfQogICAgY29uc3QgaGFzUHJvbWlzZU91dHB1dCA9IGluc3QuX2RlZi5vdXRwdXQgJiYgaW5zdC5fZGVmLm91dHB1dC5fem9kLmRlZi50eXBlID09PSAicHJvbWlzZSI7CiAgICBpZiAoaGFzUHJvbWlzZU91dHB1dCkgewogICAgICBwYXlsb2FkLnZhbHVlID0gaW5zdC5pbXBsZW1lbnRBc3luYyhwYXlsb2FkLnZhbHVlKTsKICAgIH0gZWxzZSB7CiAgICAgIHBheWxvYWQudmFsdWUgPSBpbnN0LmltcGxlbWVudChwYXlsb2FkLnZhbHVlKTsKICAgIH0KICAgIHJldHVybiBwYXlsb2FkOwogIH07CiAgaW5zdC5pbnB1dCA9ICguLi5hcmdzKSA9PiB7CiAgICBjb25zdCBGID0gaW5zdC5jb25zdHJ1Y3RvcjsKICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3NbMF0pKSB7CiAgICAgIHJldHVybiBuZXcgRih7CiAgICAgICAgdHlwZTogImZ1bmN0aW9uIiwKICAgICAgICBpbnB1dDogbmV3ICRab2RUdXBsZSh7CiAgICAgICAgICB0eXBlOiAidHVwbGUiLAogICAgICAgICAgaXRlbXM6IGFyZ3NbMF0sCiAgICAgICAgICByZXN0OiBhcmdzWzFdCiAgICAgICAgfSksCiAgICAgICAgb3V0cHV0OiBpbnN0Ll9kZWYub3V0cHV0CiAgICAgIH0pOwogICAgfQogICAgcmV0dXJuIG5ldyBGKHsKICAgICAgdHlwZTogImZ1bmN0aW9uIiwKICAgICAgaW5wdXQ6IGFyZ3NbMF0sCiAgICAgIG91dHB1dDogaW5zdC5fZGVmLm91dHB1dAogICAgfSk7CiAgfTsKICBpbnN0Lm91dHB1dCA9IChvdXRwdXQpID0+IHsKICAgIGNvbnN0IEYgPSBpbnN0LmNvbnN0cnVjdG9yOwogICAgcmV0dXJuIG5ldyBGKHsKICAgICAgdHlwZTogImZ1bmN0aW9uIiwKICAgICAgaW5wdXQ6IGluc3QuX2RlZi5pbnB1dCwKICAgICAgb3V0cHV0CiAgICB9KTsKICB9OwogIHJldHVybiBpbnN0Owp9KTsKdmFyICRab2RQcm9taXNlID0gJGNvbnN0cnVjdG9yKCIkWm9kUHJvbWlzZSIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7CiAgaW5zdC5fem9kLnBhcnNlID0gKHBheWxvYWQsIGN0eCkgPT4gewogICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwYXlsb2FkLnZhbHVlKS50aGVuKChpbm5lcikgPT4gZGVmLmlubmVyVHlwZS5fem9kLnJ1bih7IHZhbHVlOiBpbm5lciwgaXNzdWVzOiBbXSB9LCBjdHgpKTsKICB9Owp9KTsKdmFyICRab2RMYXp5ID0gJGNvbnN0cnVjdG9yKCIkWm9kTGF6eSIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kVHlwZS5pbml0KGluc3QsIGRlZik7CiAgZGVmaW5lTGF6eShpbnN0Ll96b2QsICJpbm5lclR5cGUiLCAoKSA9PiBkZWYuZ2V0dGVyKCkpOwogIGRlZmluZUxhenkoaW5zdC5fem9kLCAicGF0dGVybiIsICgpID0+IGluc3QuX3pvZC5pbm5lclR5cGUuX3pvZC5wYXR0ZXJuKTsKICBkZWZpbmVMYXp5KGluc3QuX3pvZCwgInByb3BWYWx1ZXMiLCAoKSA9PiBpbnN0Ll96b2QuaW5uZXJUeXBlLl96b2QucHJvcFZhbHVlcyk7CiAgZGVmaW5lTGF6eShpbnN0Ll96b2QsICJvcHRpbiIsICgpID0+IGluc3QuX3pvZC5pbm5lclR5cGUuX3pvZC5vcHRpbiA/PyB2b2lkIDApOwogIGRlZmluZUxhenkoaW5zdC5fem9kLCAib3B0b3V0IiwgKCkgPT4gaW5zdC5fem9kLmlubmVyVHlwZS5fem9kLm9wdG91dCA/PyB2b2lkIDApOwogIGluc3QuX3pvZC5wYXJzZSA9IChwYXlsb2FkLCBjdHgpID0+IHsKICAgIGNvbnN0IGlubmVyID0gaW5zdC5fem9kLmlubmVyVHlwZTsKICAgIHJldHVybiBpbm5lci5fem9kLnJ1bihwYXlsb2FkLCBjdHgpOwogIH07Cn0pOwp2YXIgJFpvZEN1c3RvbSA9ICRjb25zdHJ1Y3RvcigiJFpvZEN1c3RvbSIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kQ2hlY2suaW5pdChpbnN0LCBkZWYpOwogICRab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgXykgPT4gewogICAgcmV0dXJuIHBheWxvYWQ7CiAgfTsKICBpbnN0Ll96b2QuY2hlY2sgPSAocGF5bG9hZCkgPT4gewogICAgY29uc3QgaW5wdXQgPSBwYXlsb2FkLnZhbHVlOwogICAgY29uc3QgciA9IGRlZi5mbihpbnB1dCk7CiAgICBpZiAociBpbnN0YW5jZW9mIFByb21pc2UpIHsKICAgICAgcmV0dXJuIHIudGhlbigocjIpID0+IGhhbmRsZVJlZmluZVJlc3VsdChyMiwgcGF5bG9hZCwgaW5wdXQsIGluc3QpKTsKICAgIH0KICAgIGhhbmRsZVJlZmluZVJlc3VsdChyLCBwYXlsb2FkLCBpbnB1dCwgaW5zdCk7CiAgICByZXR1cm47CiAgfTsKfSk7CmZ1bmN0aW9uIGhhbmRsZVJlZmluZVJlc3VsdChyZXN1bHQsIHBheWxvYWQsIGlucHV0LCBpbnN0KSB7CiAgaWYgKCFyZXN1bHQpIHsKICAgIGNvbnN0IF9pc3MgPSB7CiAgICAgIGNvZGU6ICJjdXN0b20iLAogICAgICBpbnB1dCwKICAgICAgaW5zdCwKICAgICAgLy8gaW5jb3Jwb3JhdGVzIHBhcmFtcy5lcnJvciBpbnRvIGlzc3VlIHJlcG9ydGluZwogICAgICBwYXRoOiBbLi4uaW5zdC5fem9kLmRlZi5wYXRoID8/IFtdXSwKICAgICAgLy8gaW5jb3Jwb3JhdGVzIHBhcmFtcy5lcnJvciBpbnRvIGlzc3VlIHJlcG9ydGluZwogICAgICBjb250aW51ZTogIWluc3QuX3pvZC5kZWYuYWJvcnQKICAgICAgLy8gcGFyYW1zOiBpbnN0Ll96b2QuZGVmLnBhcmFtcywKICAgIH07CiAgICBpZiAoaW5zdC5fem9kLmRlZi5wYXJhbXMpCiAgICAgIF9pc3MucGFyYW1zID0gaW5zdC5fem9kLmRlZi5wYXJhbXM7CiAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKGlzc3VlKF9pc3MpKTsKICB9Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvbG9jYWxlcy9pbmRleC5qcwp2YXIgbG9jYWxlc19leHBvcnRzID0ge307Cl9fZXhwb3J0KGxvY2FsZXNfZXhwb3J0cywgewogIGFyOiAoKSA9PiBhcl9kZWZhdWx0LAogIGF6OiAoKSA9PiBhel9kZWZhdWx0LAogIGJlOiAoKSA9PiBiZV9kZWZhdWx0LAogIGNhOiAoKSA9PiBjYV9kZWZhdWx0LAogIGNzOiAoKSA9PiBjc19kZWZhdWx0LAogIGRhOiAoKSA9PiBkYV9kZWZhdWx0LAogIGRlOiAoKSA9PiBkZV9kZWZhdWx0LAogIGVuOiAoKSA9PiBlbl9kZWZhdWx0LAogIGVvOiAoKSA9PiBlb19kZWZhdWx0LAogIGVzOiAoKSA9PiBlc19kZWZhdWx0LAogIGZhOiAoKSA9PiBmYV9kZWZhdWx0LAogIGZpOiAoKSA9PiBmaV9kZWZhdWx0LAogIGZyOiAoKSA9PiBmcl9kZWZhdWx0LAogIGZyQ0E6ICgpID0+IGZyX0NBX2RlZmF1bHQsCiAgaGU6ICgpID0+IGhlX2RlZmF1bHQsCiAgaHU6ICgpID0+IGh1X2RlZmF1bHQsCiAgaWQ6ICgpID0+IGlkX2RlZmF1bHQsCiAgaXM6ICgpID0+IGlzX2RlZmF1bHQsCiAgaXQ6ICgpID0+IGl0X2RlZmF1bHQsCiAgamE6ICgpID0+IGphX2RlZmF1bHQsCiAga2E6ICgpID0+IGthX2RlZmF1bHQsCiAga2g6ICgpID0+IGtoX2RlZmF1bHQsCiAga206ICgpID0+IGttX2RlZmF1bHQsCiAga286ICgpID0+IGtvX2RlZmF1bHQsCiAgbHQ6ICgpID0+IGx0X2RlZmF1bHQsCiAgbWs6ICgpID0+IG1rX2RlZmF1bHQsCiAgbXM6ICgpID0+IG1zX2RlZmF1bHQsCiAgbmw6ICgpID0+IG5sX2RlZmF1bHQsCiAgbm86ICgpID0+IG5vX2RlZmF1bHQsCiAgb3RhOiAoKSA9PiBvdGFfZGVmYXVsdCwKICBwbDogKCkgPT4gcGxfZGVmYXVsdCwKICBwczogKCkgPT4gcHNfZGVmYXVsdCwKICBwdDogKCkgPT4gcHRfZGVmYXVsdCwKICBydTogKCkgPT4gcnVfZGVmYXVsdCwKICBzbDogKCkgPT4gc2xfZGVmYXVsdCwKICBzdjogKCkgPT4gc3ZfZGVmYXVsdCwKICB0YTogKCkgPT4gdGFfZGVmYXVsdCwKICB0aDogKCkgPT4gdGhfZGVmYXVsdCwKICB0cjogKCkgPT4gdHJfZGVmYXVsdCwKICB1YTogKCkgPT4gdWFfZGVmYXVsdCwKICB1azogKCkgPT4gdWtfZGVmYXVsdCwKICB1cjogKCkgPT4gdXJfZGVmYXVsdCwKICB2aTogKCkgPT4gdmlfZGVmYXVsdCwKICB5bzogKCkgPT4geW9fZGVmYXVsdCwKICB6aENOOiAoKSA9PiB6aF9DTl9kZWZhdWx0LAogIHpoVFc6ICgpID0+IHpoX1RXX2RlZmF1bHQKfSk7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2xvY2FsZXMvYXIuanMKdmFyIGVycm9yID0gKCkgPT4gewogIGNvbnN0IFNpemFibGUgPSB7CiAgICBzdHJpbmc6IHsgdW5pdDogItit2LHZgSIsIHZlcmI6ICLYo9mGINmK2K3ZiNmKIiB9LAogICAgZmlsZTogeyB1bml0OiAi2KjYp9mK2KoiLCB2ZXJiOiAi2KPZhiDZitit2YjZiiIgfSwKICAgIGFycmF5OiB7IHVuaXQ6ICLYudmG2LXYsSIsIHZlcmI6ICLYo9mGINmK2K3ZiNmKIiB9LAogICAgc2V0OiB7IHVuaXQ6ICLYudmG2LXYsSIsIHZlcmI6ICLYo9mGINmK2K3ZiNmKIiB9CiAgfTsKICBmdW5jdGlvbiBnZXRTaXppbmcob3JpZ2luKSB7CiAgICByZXR1cm4gU2l6YWJsZVtvcmlnaW5dID8/IG51bGw7CiAgfQogIGNvbnN0IHBhcnNlZFR5cGU3ID0gKGRhdGEpID0+IHsKICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTsKICAgIHN3aXRjaCAodCkgewogICAgICBjYXNlICJudW1iZXIiOiB7CiAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/ICJOYU4iIDogIm51bWJlciI7CiAgICAgIH0KICAgICAgY2FzZSAib2JqZWN0IjogewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgICAgICByZXR1cm4gImFycmF5IjsKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHsKICAgICAgICAgIHJldHVybiAibnVsbCI7CiAgICAgICAgfQogICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZGF0YSkgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgZGF0YS5jb25zdHJ1Y3RvcikgewogICAgICAgICAgcmV0dXJuIGRhdGEuY29uc3RydWN0b3IubmFtZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0OwogIH07CiAgY29uc3QgTm91bnMgPSB7CiAgICByZWdleDogItmF2K/YrtmEIiwKICAgIGVtYWlsOiAi2KjYsdmK2K8g2KXZhNmD2KrYsdmI2YbZiiIsCiAgICB1cmw6ICLYsdin2KjYtyIsCiAgICBlbW9qaTogItil2YrZhdmI2KzZiiIsCiAgICB1dWlkOiAiVVVJRCIsCiAgICB1dWlkdjQ6ICJVVUlEdjQiLAogICAgdXVpZHY2OiAiVVVJRHY2IiwKICAgIG5hbm9pZDogIm5hbm9pZCIsCiAgICBndWlkOiAiR1VJRCIsCiAgICBjdWlkOiAiY3VpZCIsCiAgICBjdWlkMjogImN1aWQyIiwKICAgIHVsaWQ6ICJVTElEIiwKICAgIHhpZDogIlhJRCIsCiAgICBrc3VpZDogIktTVUlEIiwKICAgIGRhdGV0aW1lOiAi2KrYp9ix2YrYriDZiNmI2YLYqiDYqNmF2LnZitin2LEgSVNPIiwKICAgIGRhdGU6ICLYqtin2LHZitiuINio2YXYudmK2KfYsSBJU08iLAogICAgdGltZTogItmI2YLYqiDYqNmF2LnZitin2LEgSVNPIiwKICAgIGR1cmF0aW9uOiAi2YXYr9ipINio2YXYudmK2KfYsSBJU08iLAogICAgaXB2NDogIti52YbZiNin2YYgSVB2NCIsCiAgICBpcHY2OiAi2LnZhtmI2KfZhiBJUHY2IiwKICAgIGNpZHJ2NDogItmF2K/ZiSDYudmG2KfZiNmK2YYg2KjYtdmK2LrYqSBJUHY0IiwKICAgIGNpZHJ2NjogItmF2K/ZiSDYudmG2KfZiNmK2YYg2KjYtdmK2LrYqSBJUHY2IiwKICAgIGJhc2U2NDogItmG2Y7YtSDYqNiq2LHZhdmK2LIgYmFzZTY0LWVuY29kZWQiLAogICAgYmFzZTY0dXJsOiAi2YbZjti1INio2KrYsdmF2YrYsiBiYXNlNjR1cmwtZW5jb2RlZCIsCiAgICBqc29uX3N0cmluZzogItmG2Y7YtSDYudmE2Ykg2YfZitim2KkgSlNPTiIsCiAgICBlMTY0OiAi2LHZgtmFINmH2KfYqtmBINio2YXYudmK2KfYsSBFLjE2NCIsCiAgICBqd3Q6ICJKV1QiLAogICAgdGVtcGxhdGVfbGl0ZXJhbDogItmF2K/YrtmEIgogIH07CiAgcmV0dXJuIChpc3N1ZTIpID0+IHsKICAgIHN3aXRjaCAoaXNzdWUyLmNvZGUpIHsKICAgICAgY2FzZSAiaW52YWxpZF90eXBlIjoKICAgICAgICByZXR1cm4gYNmF2K/YrtmE2KfYqiDYutmK2LEg2YXZgtio2YjZhNipOiDZitmB2KrYsdi2INil2K/Yrtin2YQgJHtpc3N1ZTIuZXhwZWN0ZWR92Iwg2YjZhNmD2YYg2KrZhSDYpdiv2K7Yp9mEICR7cGFyc2VkVHlwZTcoaXNzdWUyLmlucHV0KX1gOwogICAgICBjYXNlICJpbnZhbGlkX3ZhbHVlIjoKICAgICAgICBpZiAoaXNzdWUyLnZhbHVlcy5sZW5ndGggPT09IDEpCiAgICAgICAgICByZXR1cm4gYNmF2K/YrtmE2KfYqiDYutmK2LEg2YXZgtio2YjZhNipOiDZitmB2KrYsdi2INil2K/Yrtin2YQgJHtzdHJpbmdpZnlQcmltaXRpdmUoaXNzdWUyLnZhbHVlc1swXSl9YDsKICAgICAgICByZXR1cm4gYNin2K7YqtmK2KfYsSDYutmK2LEg2YXZgtio2YjZhDog2YrYqtmI2YLYuSDYp9mG2KrZgtin2KEg2KPYrdivINmH2LDZhyDYp9mE2K7Zitin2LHYp9iqOiAke2pvaW5WYWx1ZXMoaXNzdWUyLnZhbHVlcywgInwiKX1gOwogICAgICBjYXNlICJ0b29fYmlnIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPD0iIDogIjwiOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKQogICAgICAgICAgcmV0dXJuIGAg2KPZg9io2LEg2YXZhiDYp9mE2YTYp9iy2YU6INmK2YHYqtix2LYg2KPZhiDYqtmD2YjZhiAke2lzc3VlMi5vcmlnaW4gPz8gItin2YTZgtmK2YXYqSJ9ICR7YWRqfSAke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9ICR7c2l6aW5nLnVuaXQgPz8gIti52YbYtdixIn1gOwogICAgICAgIHJldHVybiBg2KPZg9io2LEg2YXZhiDYp9mE2YTYp9iy2YU6INmK2YHYqtix2LYg2KPZhiDYqtmD2YjZhiAke2lzc3VlMi5vcmlnaW4gPz8gItin2YTZgtmK2YXYqSJ9ICR7YWRqfSAke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9YDsKICAgICAgfQogICAgICBjYXNlICJ0b29fc21hbGwiOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI+PSIgOiAiPiI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpIHsKICAgICAgICAgIHJldHVybiBg2KPYtdi62LEg2YXZhiDYp9mE2YTYp9iy2YU6INmK2YHYqtix2LYg2YTZgCAke2lzc3VlMi5vcmlnaW59INij2YYg2YrZg9mI2YYgJHthZGp9ICR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdH1gOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYNij2LXYutixINmF2YYg2KfZhNmE2KfYstmFOiDZitmB2KrYsdi2INmE2YAgJHtpc3N1ZTIub3JpZ2lufSDYo9mGINmK2YPZiNmGICR7YWRqfSAke2lzc3VlMi5taW5pbXVtLnRvU3RyaW5nKCl9YDsKICAgICAgfQogICAgICBjYXNlICJpbnZhbGlkX2Zvcm1hdCI6IHsKICAgICAgICBjb25zdCBfaXNzdWUgPSBpc3N1ZTI7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJzdGFydHNfd2l0aCIpCiAgICAgICAgICByZXR1cm4gYNmG2Y7YtSDYutmK2LEg2YXZgtio2YjZhDog2YrYrNioINij2YYg2YrYqNiv2KMg2KjZgCAiJHtpc3N1ZTIucHJlZml4fSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiZW5kc193aXRoIikKICAgICAgICAgIHJldHVybiBg2YbZjti1INi62YrYsSDZhdmC2KjZiNmEOiDZitis2Kgg2KPZhiDZitmG2KrZh9mKINio2YAgIiR7X2lzc3VlLnN1ZmZpeH0iYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImluY2x1ZGVzIikKICAgICAgICAgIHJldHVybiBg2YbZjti1INi62YrYsSDZhdmC2KjZiNmEOiDZitis2Kgg2KPZhiDZitiq2LbZhdmR2Y7ZhiAiJHtfaXNzdWUuaW5jbHVkZXN9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJyZWdleCIpCiAgICAgICAgICByZXR1cm4gYNmG2Y7YtSDYutmK2LEg2YXZgtio2YjZhDog2YrYrNioINij2YYg2YrYt9in2KjZgiDYp9mE2YbZhdi3ICR7X2lzc3VlLnBhdHRlcm59YDsKICAgICAgICByZXR1cm4gYCR7Tm91bnNbX2lzc3VlLmZvcm1hdF0gPz8gaXNzdWUyLmZvcm1hdH0g2LrZitixINmF2YLYqNmI2YRgOwogICAgICB9CiAgICAgIGNhc2UgIm5vdF9tdWx0aXBsZV9vZiI6CiAgICAgICAgcmV0dXJuIGDYsdmC2YUg2LrZitixINmF2YLYqNmI2YQ6INmK2KzYqCDYo9mGINmK2YPZiNmGINmF2YYg2YXYttin2LnZgdin2KogJHtpc3N1ZTIuZGl2aXNvcn1gOwogICAgICBjYXNlICJ1bnJlY29nbml6ZWRfa2V5cyI6CiAgICAgICAgcmV0dXJuIGDZhdi52LHZgSR7aXNzdWUyLmtleXMubGVuZ3RoID4gMSA/ICLYp9iqIiA6ICIifSDYutix2YrYqCR7aXNzdWUyLmtleXMubGVuZ3RoID4gMSA/ICLYqSIgOiAiIn06ICR7am9pblZhbHVlcyhpc3N1ZTIua2V5cywgItiMICIpfWA7CiAgICAgIGNhc2UgImludmFsaWRfa2V5IjoKICAgICAgICByZXR1cm4gYNmF2LnYsdmBINi62YrYsSDZhdmC2KjZiNmEINmB2YogJHtpc3N1ZTIub3JpZ2lufWA7CiAgICAgIGNhc2UgImludmFsaWRfdW5pb24iOgogICAgICAgIHJldHVybiAi2YXYr9iu2YQg2LrZitixINmF2YLYqNmI2YQiOwogICAgICBjYXNlICJpbnZhbGlkX2VsZW1lbnQiOgogICAgICAgIHJldHVybiBg2YXYr9iu2YQg2LrZitixINmF2YLYqNmI2YQg2YHZiiAke2lzc3VlMi5vcmlnaW59YDsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gItmF2K/YrtmEINi62YrYsSDZhdmC2KjZiNmEIjsKICAgIH0KICB9Owp9OwpmdW5jdGlvbiBhcl9kZWZhdWx0KCkgewogIHJldHVybiB7CiAgICBsb2NhbGVFcnJvcjogZXJyb3IoKQogIH07Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvbG9jYWxlcy9hei5qcwp2YXIgZXJyb3IyID0gKCkgPT4gewogIGNvbnN0IFNpemFibGUgPSB7CiAgICBzdHJpbmc6IHsgdW5pdDogInNpbXZvbCIsIHZlcmI6ICJvbG1hbMSxZMSxciIgfSwKICAgIGZpbGU6IHsgdW5pdDogImJheXQiLCB2ZXJiOiAib2xtYWzEsWTEsXIiIH0sCiAgICBhcnJheTogeyB1bml0OiAiZWxlbWVudCIsIHZlcmI6ICJvbG1hbMSxZMSxciIgfSwKICAgIHNldDogeyB1bml0OiAiZWxlbWVudCIsIHZlcmI6ICJvbG1hbMSxZMSxciIgfQogIH07CiAgZnVuY3Rpb24gZ2V0U2l6aW5nKG9yaWdpbikgewogICAgcmV0dXJuIFNpemFibGVbb3JpZ2luXSA/PyBudWxsOwogIH0KICBjb25zdCBwYXJzZWRUeXBlNyA9IChkYXRhKSA9PiB7CiAgICBjb25zdCB0ID0gdHlwZW9mIGRhdGE7CiAgICBzd2l0Y2ggKHQpIHsKICAgICAgY2FzZSAibnVtYmVyIjogewogICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0YSkgPyAiTmFOIiA6ICJudW1iZXIiOwogICAgICB9CiAgICAgIGNhc2UgIm9iamVjdCI6IHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkgewogICAgICAgICAgcmV0dXJuICJhcnJheSI7CiAgICAgICAgfQogICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gIm51bGwiOwogICAgICAgIH0KICAgICAgICBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGRhdGEpICE9PSBPYmplY3QucHJvdG90eXBlICYmIGRhdGEuY29uc3RydWN0b3IpIHsKICAgICAgICAgIHJldHVybiBkYXRhLmNvbnN0cnVjdG9yLm5hbWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdDsKICB9OwogIGNvbnN0IE5vdW5zID0gewogICAgcmVnZXg6ICJpbnB1dCIsCiAgICBlbWFpbDogImVtYWlsIGFkZHJlc3MiLAogICAgdXJsOiAiVVJMIiwKICAgIGVtb2ppOiAiZW1vamkiLAogICAgdXVpZDogIlVVSUQiLAogICAgdXVpZHY0OiAiVVVJRHY0IiwKICAgIHV1aWR2NjogIlVVSUR2NiIsCiAgICBuYW5vaWQ6ICJuYW5vaWQiLAogICAgZ3VpZDogIkdVSUQiLAogICAgY3VpZDogImN1aWQiLAogICAgY3VpZDI6ICJjdWlkMiIsCiAgICB1bGlkOiAiVUxJRCIsCiAgICB4aWQ6ICJYSUQiLAogICAga3N1aWQ6ICJLU1VJRCIsCiAgICBkYXRldGltZTogIklTTyBkYXRldGltZSIsCiAgICBkYXRlOiAiSVNPIGRhdGUiLAogICAgdGltZTogIklTTyB0aW1lIiwKICAgIGR1cmF0aW9uOiAiSVNPIGR1cmF0aW9uIiwKICAgIGlwdjQ6ICJJUHY0IGFkZHJlc3MiLAogICAgaXB2NjogIklQdjYgYWRkcmVzcyIsCiAgICBjaWRydjQ6ICJJUHY0IHJhbmdlIiwKICAgIGNpZHJ2NjogIklQdjYgcmFuZ2UiLAogICAgYmFzZTY0OiAiYmFzZTY0LWVuY29kZWQgc3RyaW5nIiwKICAgIGJhc2U2NHVybDogImJhc2U2NHVybC1lbmNvZGVkIHN0cmluZyIsCiAgICBqc29uX3N0cmluZzogIkpTT04gc3RyaW5nIiwKICAgIGUxNjQ6ICJFLjE2NCBudW1iZXIiLAogICAgand0OiAiSldUIiwKICAgIHRlbXBsYXRlX2xpdGVyYWw6ICJpbnB1dCIKICB9OwogIHJldHVybiAoaXNzdWUyKSA9PiB7CiAgICBzd2l0Y2ggKGlzc3VlMi5jb2RlKSB7CiAgICAgIGNhc2UgImludmFsaWRfdHlwZSI6CiAgICAgICAgcmV0dXJuIGBZYW5sxLHFnyBkyZl5yZlyOiBnw7Z6bMmZbmlsyZluICR7aXNzdWUyLmV4cGVjdGVkfSwgZGF4aWwgb2xhbiAke3BhcnNlZFR5cGU3KGlzc3VlMi5pbnB1dCl9YDsKICAgICAgY2FzZSAiaW52YWxpZF92YWx1ZSI6CiAgICAgICAgaWYgKGlzc3VlMi52YWx1ZXMubGVuZ3RoID09PSAxKQogICAgICAgICAgcmV0dXJuIGBZYW5sxLHFnyBkyZl5yZlyOiBnw7Z6bMmZbmlsyZluICR7c3RyaW5naWZ5UHJpbWl0aXZlKGlzc3VlMi52YWx1ZXNbMF0pfWA7CiAgICAgICAgcmV0dXJuIGBZYW5sxLHFnyBzZcOnaW06IGHFn2HEn8SxZGFrxLFsYXJkYW4gYmlyaSBvbG1hbMSxZMSxcjogJHtqb2luVmFsdWVzKGlzc3VlMi52YWx1ZXMsICJ8Iil9YDsKICAgICAgY2FzZSAidG9vX2JpZyI6IHsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIjw9IiA6ICI8IjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykKICAgICAgICAgIHJldHVybiBgw4dveCBiw7Z5w7xrOiBnw7Z6bMmZbmlsyZluICR7aXNzdWUyLm9yaWdpbiA/PyAiZMmZecmZciJ9ICR7YWRqfSR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdCA/PyAiZWxlbWVudCJ9YDsKICAgICAgICByZXR1cm4gYMOHb3ggYsO2ecO8azogZ8O2emzJmW5pbMmZbiAke2lzc3VlMi5vcmlnaW4gPz8gImTJmXnJmXIifSAke2Fkan0ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9YDsKICAgICAgfQogICAgICBjYXNlICJ0b29fc21hbGwiOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI+PSIgOiAiPiI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpCiAgICAgICAgICByZXR1cm4gYMOHb3gga2nDp2lrOiBnw7Z6bMmZbmlsyZluICR7aXNzdWUyLm9yaWdpbn0gJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0fWA7CiAgICAgICAgcmV0dXJuIGDDh294IGtpw6dpazogZ8O2emzJmW5pbMmZbiAke2lzc3VlMi5vcmlnaW59ICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgImludmFsaWRfZm9ybWF0IjogewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInN0YXJ0c193aXRoIikKICAgICAgICAgIHJldHVybiBgWWFubMSxxZ8gbcmZdG46ICIke19pc3N1ZS5wcmVmaXh9IiBpbMmZIGJhxZ9sYW1hbMSxZMSxcmA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJlbmRzX3dpdGgiKQogICAgICAgICAgcmV0dXJuIGBZYW5sxLHFnyBtyZl0bjogIiR7X2lzc3VlLnN1ZmZpeH0iIGlsyZkgYml0bcmZbGlkaXJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiaW5jbHVkZXMiKQogICAgICAgICAgcmV0dXJuIGBZYW5sxLHFnyBtyZl0bjogIiR7X2lzc3VlLmluY2x1ZGVzfSIgZGF4aWwgb2xtYWzEsWTEsXJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAicmVnZXgiKQogICAgICAgICAgcmV0dXJuIGBZYW5sxLHFnyBtyZl0bjogJHtfaXNzdWUucGF0dGVybn0gxZ9hYmxvbnVuYSB1ecSfdW4gb2xtYWzEsWTEsXJgOwogICAgICAgIHJldHVybiBgWWFubMSxxZ8gJHtOb3Vuc1tfaXNzdWUuZm9ybWF0XSA/PyBpc3N1ZTIuZm9ybWF0fWA7CiAgICAgIH0KICAgICAgY2FzZSAibm90X211bHRpcGxlX29mIjoKICAgICAgICByZXR1cm4gYFlhbmzEscWfIMmZZMmZZDogJHtpc3N1ZTIuZGl2aXNvcn0gaWzJmSBiw7Zsw7xuyZkgYmlsyZluIG9sbWFsxLFkxLFyYDsKICAgICAgY2FzZSAidW5yZWNvZ25pemVkX2tleXMiOgogICAgICAgIHJldHVybiBgVGFuxLFubWF5YW4gYcOnYXIke2lzc3VlMi5rZXlzLmxlbmd0aCA+IDEgPyAibGFyIiA6ICIifTogJHtqb2luVmFsdWVzKGlzc3VlMi5rZXlzLCAiLCAiKX1gOwogICAgICBjYXNlICJpbnZhbGlkX2tleSI6CiAgICAgICAgcmV0dXJuIGAke2lzc3VlMi5vcmlnaW59IGRheGlsaW5kyZkgeWFubMSxxZ8gYcOnYXJgOwogICAgICBjYXNlICJpbnZhbGlkX3VuaW9uIjoKICAgICAgICByZXR1cm4gIllhbmzEscWfIGTJmXnJmXIiOwogICAgICBjYXNlICJpbnZhbGlkX2VsZW1lbnQiOgogICAgICAgIHJldHVybiBgJHtpc3N1ZTIub3JpZ2lufSBkYXhpbGluZMmZIHlhbmzEscWfIGTJmXnJmXJgOwogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBgWWFubMSxxZ8gZMmZecmZcmA7CiAgICB9CiAgfTsKfTsKZnVuY3Rpb24gYXpfZGVmYXVsdCgpIHsKICByZXR1cm4gewogICAgbG9jYWxlRXJyb3I6IGVycm9yMigpCiAgfTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9sb2NhbGVzL2JlLmpzCmZ1bmN0aW9uIGdldEJlbGFydXNpYW5QbHVyYWwoY291bnQsIG9uZSwgZmV3LCBtYW55KSB7CiAgY29uc3QgYWJzQ291bnQgPSBNYXRoLmFicyhjb3VudCk7CiAgY29uc3QgbGFzdERpZ2l0ID0gYWJzQ291bnQgJSAxMDsKICBjb25zdCBsYXN0VHdvRGlnaXRzID0gYWJzQ291bnQgJSAxMDA7CiAgaWYgKGxhc3RUd29EaWdpdHMgPj0gMTEgJiYgbGFzdFR3b0RpZ2l0cyA8PSAxOSkgewogICAgcmV0dXJuIG1hbnk7CiAgfQogIGlmIChsYXN0RGlnaXQgPT09IDEpIHsKICAgIHJldHVybiBvbmU7CiAgfQogIGlmIChsYXN0RGlnaXQgPj0gMiAmJiBsYXN0RGlnaXQgPD0gNCkgewogICAgcmV0dXJuIGZldzsKICB9CiAgcmV0dXJuIG1hbnk7Cn0KdmFyIGVycm9yMyA9ICgpID0+IHsKICBjb25zdCBTaXphYmxlID0gewogICAgc3RyaW5nOiB7CiAgICAgIHVuaXQ6IHsKICAgICAgICBvbmU6ICLRgdGW0LzQstCw0LsiLAogICAgICAgIGZldzogItGB0ZbQvNCy0LDQu9GLIiwKICAgICAgICBtYW55OiAi0YHRltC80LLQsNC70LDRniIKICAgICAgfSwKICAgICAgdmVyYjogItC80LXRhtGMIgogICAgfSwKICAgIGFycmF5OiB7CiAgICAgIHVuaXQ6IHsKICAgICAgICBvbmU6ICLRjdC70LXQvNC10L3RgiIsCiAgICAgICAgZmV3OiAi0Y3Qu9C10LzQtdC90YLRiyIsCiAgICAgICAgbWFueTogItGN0LvQtdC80LXQvdGC0LDRniIKICAgICAgfSwKICAgICAgdmVyYjogItC80LXRhtGMIgogICAgfSwKICAgIHNldDogewogICAgICB1bml0OiB7CiAgICAgICAgb25lOiAi0Y3Qu9C10LzQtdC90YIiLAogICAgICAgIGZldzogItGN0LvQtdC80LXQvdGC0YsiLAogICAgICAgIG1hbnk6ICLRjdC70LXQvNC10L3RgtCw0Z4iCiAgICAgIH0sCiAgICAgIHZlcmI6ICLQvNC10YbRjCIKICAgIH0sCiAgICBmaWxlOiB7CiAgICAgIHVuaXQ6IHsKICAgICAgICBvbmU6ICLQsdCw0LnRgiIsCiAgICAgICAgZmV3OiAi0LHQsNC50YLRiyIsCiAgICAgICAgbWFueTogItCx0LDQudGC0LDRniIKICAgICAgfSwKICAgICAgdmVyYjogItC80LXRhtGMIgogICAgfQogIH07CiAgZnVuY3Rpb24gZ2V0U2l6aW5nKG9yaWdpbikgewogICAgcmV0dXJuIFNpemFibGVbb3JpZ2luXSA/PyBudWxsOwogIH0KICBjb25zdCBwYXJzZWRUeXBlNyA9IChkYXRhKSA9PiB7CiAgICBjb25zdCB0ID0gdHlwZW9mIGRhdGE7CiAgICBzd2l0Y2ggKHQpIHsKICAgICAgY2FzZSAibnVtYmVyIjogewogICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0YSkgPyAiTmFOIiA6ICLQu9GW0LoiOwogICAgICB9CiAgICAgIGNhc2UgIm9iamVjdCI6IHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkgewogICAgICAgICAgcmV0dXJuICLQvNCw0YHRltGeIjsKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHsKICAgICAgICAgIHJldHVybiAibnVsbCI7CiAgICAgICAgfQogICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZGF0YSkgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgZGF0YS5jb25zdHJ1Y3RvcikgewogICAgICAgICAgcmV0dXJuIGRhdGEuY29uc3RydWN0b3IubmFtZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0OwogIH07CiAgY29uc3QgTm91bnMgPSB7CiAgICByZWdleDogItGD0LLQvtC0IiwKICAgIGVtYWlsOiAiZW1haWwg0LDQtNGA0LDRgSIsCiAgICB1cmw6ICJVUkwiLAogICAgZW1vamk6ICLRjdC80L7QtNC30ZYiLAogICAgdXVpZDogIlVVSUQiLAogICAgdXVpZHY0OiAiVVVJRHY0IiwKICAgIHV1aWR2NjogIlVVSUR2NiIsCiAgICBuYW5vaWQ6ICJuYW5vaWQiLAogICAgZ3VpZDogIkdVSUQiLAogICAgY3VpZDogImN1aWQiLAogICAgY3VpZDI6ICJjdWlkMiIsCiAgICB1bGlkOiAiVUxJRCIsCiAgICB4aWQ6ICJYSUQiLAogICAga3N1aWQ6ICJLU1VJRCIsCiAgICBkYXRldGltZTogIklTTyDQtNCw0YLQsCDRliDRh9Cw0YEiLAogICAgZGF0ZTogIklTTyDQtNCw0YLQsCIsCiAgICB0aW1lOiAiSVNPINGH0LDRgSIsCiAgICBkdXJhdGlvbjogIklTTyDQv9GA0LDRhtGP0LPQu9Cw0YHRhtGMIiwKICAgIGlwdjQ6ICJJUHY0INCw0LTRgNCw0YEiLAogICAgaXB2NjogIklQdjYg0LDQtNGA0LDRgSIsCiAgICBjaWRydjQ6ICJJUHY0INC00YvRj9C/0LDQt9C+0L0iLAogICAgY2lkcnY2OiAiSVB2NiDQtNGL0Y/Qv9Cw0LfQvtC9IiwKICAgIGJhc2U2NDogItGA0LDQtNC+0Log0YMg0YTQsNGA0LzQsNGG0LUgYmFzZTY0IiwKICAgIGJhc2U2NHVybDogItGA0LDQtNC+0Log0YMg0YTQsNGA0LzQsNGG0LUgYmFzZTY0dXJsIiwKICAgIGpzb25fc3RyaW5nOiAiSlNPTiDRgNCw0LTQvtC6IiwKICAgIGUxNjQ6ICLQvdGD0LzQsNGAIEUuMTY0IiwKICAgIGp3dDogIkpXVCIsCiAgICB0ZW1wbGF0ZV9saXRlcmFsOiAi0YPQstC+0LQiCiAgfTsKICByZXR1cm4gKGlzc3VlMikgPT4gewogICAgc3dpdGNoIChpc3N1ZTIuY29kZSkgewogICAgICBjYXNlICJpbnZhbGlkX3R5cGUiOgogICAgICAgIHJldHVybiBg0J3Rj9C/0YDQsNCy0ZbQu9GM0L3RiyDRntCy0L7QtDog0YfQsNC60LDRntGB0Y8gJHtpc3N1ZTIuZXhwZWN0ZWR9LCDQsNGC0YDRi9C80LDQvdCwICR7cGFyc2VkVHlwZTcoaXNzdWUyLmlucHV0KX1gOwogICAgICBjYXNlICJpbnZhbGlkX3ZhbHVlIjoKICAgICAgICBpZiAoaXNzdWUyLnZhbHVlcy5sZW5ndGggPT09IDEpCiAgICAgICAgICByZXR1cm4gYNCd0Y/Qv9GA0LDQstGW0LvRjNC90Ysg0Z7QstC+0LQ6INGH0LDQutCw0LvQsNGB0Y8gJHtzdHJpbmdpZnlQcmltaXRpdmUoaXNzdWUyLnZhbHVlc1swXSl9YDsKICAgICAgICByZXR1cm4gYNCd0Y/Qv9GA0LDQstGW0LvRjNC90Ysg0LLQsNGA0YvRj9C90YI6INGH0LDQutCw0Z7RgdGPINCw0LTQt9GW0L0g0LcgJHtqb2luVmFsdWVzKGlzc3VlMi52YWx1ZXMsICJ8Iil9YDsKICAgICAgY2FzZSAidG9vX2JpZyI6IHsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIjw9IiA6ICI8IjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykgewogICAgICAgICAgY29uc3QgbWF4VmFsdWUgPSBOdW1iZXIoaXNzdWUyLm1heGltdW0pOwogICAgICAgICAgY29uc3QgdW5pdCA9IGdldEJlbGFydXNpYW5QbHVyYWwobWF4VmFsdWUsIHNpemluZy51bml0Lm9uZSwgc2l6aW5nLnVuaXQuZmV3LCBzaXppbmcudW5pdC5tYW55KTsKICAgICAgICAgIHJldHVybiBg0JfQsNC90LDQtNGC0LAg0LLRj9C70ZbQutGWOiDRh9Cw0LrQsNC70LDRgdGPLCDRiNGC0L4gJHtpc3N1ZTIub3JpZ2luID8/ICLQt9C90LDRh9GN0L3QvdC1In0g0L/QsNCy0ZbQvdC90LAgJHtzaXppbmcudmVyYn0gJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfSAke3VuaXR9YDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGDQl9Cw0L3QsNC00YLQsCDQstGP0LvRltC60ZY6INGH0LDQutCw0LvQsNGB0Y8sINGI0YLQviAke2lzc3VlMi5vcmlnaW4gPz8gItC30L3QsNGH0Y3QvdC90LUifSDQv9Cw0LLRltC90L3QsCDQsdGL0YbRjCAke2Fkan0ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9YDsKICAgICAgfQogICAgICBjYXNlICJ0b29fc21hbGwiOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI+PSIgOiAiPiI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpIHsKICAgICAgICAgIGNvbnN0IG1pblZhbHVlID0gTnVtYmVyKGlzc3VlMi5taW5pbXVtKTsKICAgICAgICAgIGNvbnN0IHVuaXQgPSBnZXRCZWxhcnVzaWFuUGx1cmFsKG1pblZhbHVlLCBzaXppbmcudW5pdC5vbmUsIHNpemluZy51bml0LmZldywgc2l6aW5nLnVuaXQubWFueSk7CiAgICAgICAgICByZXR1cm4gYNCX0LDQvdCw0LTRgtCwINC80LDQu9GLOiDRh9Cw0LrQsNC70LDRgdGPLCDRiNGC0L4gJHtpc3N1ZTIub3JpZ2lufSDQv9Cw0LLRltC90L3QsCAke3NpemluZy52ZXJifSAke2Fkan0ke2lzc3VlMi5taW5pbXVtLnRvU3RyaW5nKCl9ICR7dW5pdH1gOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYNCX0LDQvdCw0LTRgtCwINC80LDQu9GLOiDRh9Cw0LrQsNC70LDRgdGPLCDRiNGC0L4gJHtpc3N1ZTIub3JpZ2lufSDQv9Cw0LLRltC90L3QsCDQsdGL0YbRjCAke2Fkan0ke2lzc3VlMi5taW5pbXVtLnRvU3RyaW5nKCl9YDsKICAgICAgfQogICAgICBjYXNlICJpbnZhbGlkX2Zvcm1hdCI6IHsKICAgICAgICBjb25zdCBfaXNzdWUgPSBpc3N1ZTI7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJzdGFydHNfd2l0aCIpCiAgICAgICAgICByZXR1cm4gYNCd0Y/Qv9GA0LDQstGW0LvRjNC90Ysg0YDQsNC00L7Qujog0L/QsNCy0ZbQvdC10L0g0L/QsNGH0YvQvdCw0YbRhtCwINC3ICIke19pc3N1ZS5wcmVmaXh9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJlbmRzX3dpdGgiKQogICAgICAgICAgcmV0dXJuIGDQndGP0L/RgNCw0LLRltC70YzQvdGLINGA0LDQtNC+0Lo6INC/0LDQstGW0L3QtdC9INC30LDQutCw0L3Rh9Cy0LDRhtGG0LAg0L3QsCAiJHtfaXNzdWUuc3VmZml4fSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiaW5jbHVkZXMiKQogICAgICAgICAgcmV0dXJuIGDQndGP0L/RgNCw0LLRltC70YzQvdGLINGA0LDQtNC+0Lo6INC/0LDQstGW0L3QtdC9INC30LzRj9GI0YfQsNGG0YwgIiR7X2lzc3VlLmluY2x1ZGVzfSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAicmVnZXgiKQogICAgICAgICAgcmV0dXJuIGDQndGP0L/RgNCw0LLRltC70YzQvdGLINGA0LDQtNC+0Lo6INC/0LDQstGW0L3QtdC9INCw0LTQv9Cw0LLRj9C00LDRhtGMINGI0LDQsdC70L7QvdGDICR7X2lzc3VlLnBhdHRlcm59YDsKICAgICAgICByZXR1cm4gYNCd0Y/Qv9GA0LDQstGW0LvRjNC90YsgJHtOb3Vuc1tfaXNzdWUuZm9ybWF0XSA/PyBpc3N1ZTIuZm9ybWF0fWA7CiAgICAgIH0KICAgICAgY2FzZSAibm90X211bHRpcGxlX29mIjoKICAgICAgICByZXR1cm4gYNCd0Y/Qv9GA0LDQstGW0LvRjNC90Ysg0LvRltC6OiDQv9Cw0LLRltC90LXQvSDQsdGL0YbRjCDQutGA0LDRgtC90YvQvCAke2lzc3VlMi5kaXZpc29yfWA7CiAgICAgIGNhc2UgInVucmVjb2duaXplZF9rZXlzIjoKICAgICAgICByZXR1cm4gYNCd0LXRgNCw0YHQv9Cw0LfQvdCw0L3RiyAke2lzc3VlMi5rZXlzLmxlbmd0aCA+IDEgPyAi0LrQu9GO0YfRiyIgOiAi0LrQu9GO0YcifTogJHtqb2luVmFsdWVzKGlzc3VlMi5rZXlzLCAiLCAiKX1gOwogICAgICBjYXNlICJpbnZhbGlkX2tleSI6CiAgICAgICAgcmV0dXJuIGDQndGP0L/RgNCw0LLRltC70YzQvdGLINC60LvRjtGHINGDICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBjYXNlICJpbnZhbGlkX3VuaW9uIjoKICAgICAgICByZXR1cm4gItCd0Y/Qv9GA0LDQstGW0LvRjNC90Ysg0Z7QstC+0LQiOwogICAgICBjYXNlICJpbnZhbGlkX2VsZW1lbnQiOgogICAgICAgIHJldHVybiBg0J3Rj9C/0YDQsNCy0ZbQu9GM0L3QsNC1INC30L3QsNGH0Y3QvdC90LUg0Z4gJHtpc3N1ZTIub3JpZ2lufWA7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIGDQndGP0L/RgNCw0LLRltC70YzQvdGLINGe0LLQvtC0YDsKICAgIH0KICB9Owp9OwpmdW5jdGlvbiBiZV9kZWZhdWx0KCkgewogIHJldHVybiB7CiAgICBsb2NhbGVFcnJvcjogZXJyb3IzKCkKICB9Owp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2xvY2FsZXMvY2EuanMKdmFyIGVycm9yNCA9ICgpID0+IHsKICBjb25zdCBTaXphYmxlID0gewogICAgc3RyaW5nOiB7IHVuaXQ6ICJjYXLDoGN0ZXJzIiwgdmVyYjogImNvbnRlbmlyIiB9LAogICAgZmlsZTogeyB1bml0OiAiYnl0ZXMiLCB2ZXJiOiAiY29udGVuaXIiIH0sCiAgICBhcnJheTogeyB1bml0OiAiZWxlbWVudHMiLCB2ZXJiOiAiY29udGVuaXIiIH0sCiAgICBzZXQ6IHsgdW5pdDogImVsZW1lbnRzIiwgdmVyYjogImNvbnRlbmlyIiB9CiAgfTsKICBmdW5jdGlvbiBnZXRTaXppbmcob3JpZ2luKSB7CiAgICByZXR1cm4gU2l6YWJsZVtvcmlnaW5dID8/IG51bGw7CiAgfQogIGNvbnN0IHBhcnNlZFR5cGU3ID0gKGRhdGEpID0+IHsKICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTsKICAgIHN3aXRjaCAodCkgewogICAgICBjYXNlICJudW1iZXIiOiB7CiAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/ICJOYU4iIDogIm51bWJlciI7CiAgICAgIH0KICAgICAgY2FzZSAib2JqZWN0IjogewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgICAgICByZXR1cm4gImFycmF5IjsKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHsKICAgICAgICAgIHJldHVybiAibnVsbCI7CiAgICAgICAgfQogICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZGF0YSkgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgZGF0YS5jb25zdHJ1Y3RvcikgewogICAgICAgICAgcmV0dXJuIGRhdGEuY29uc3RydWN0b3IubmFtZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0OwogIH07CiAgY29uc3QgTm91bnMgPSB7CiAgICByZWdleDogImVudHJhZGEiLAogICAgZW1haWw6ICJhZHJlw6dhIGVsZWN0csOybmljYSIsCiAgICB1cmw6ICJVUkwiLAogICAgZW1vamk6ICJlbW9qaSIsCiAgICB1dWlkOiAiVVVJRCIsCiAgICB1dWlkdjQ6ICJVVUlEdjQiLAogICAgdXVpZHY2OiAiVVVJRHY2IiwKICAgIG5hbm9pZDogIm5hbm9pZCIsCiAgICBndWlkOiAiR1VJRCIsCiAgICBjdWlkOiAiY3VpZCIsCiAgICBjdWlkMjogImN1aWQyIiwKICAgIHVsaWQ6ICJVTElEIiwKICAgIHhpZDogIlhJRCIsCiAgICBrc3VpZDogIktTVUlEIiwKICAgIGRhdGV0aW1lOiAiZGF0YSBpIGhvcmEgSVNPIiwKICAgIGRhdGU6ICJkYXRhIElTTyIsCiAgICB0aW1lOiAiaG9yYSBJU08iLAogICAgZHVyYXRpb246ICJkdXJhZGEgSVNPIiwKICAgIGlwdjQ6ICJhZHJlw6dhIElQdjQiLAogICAgaXB2NjogImFkcmXDp2EgSVB2NiIsCiAgICBjaWRydjQ6ICJyYW5nIElQdjQiLAogICAgY2lkcnY2OiAicmFuZyBJUHY2IiwKICAgIGJhc2U2NDogImNhZGVuYSBjb2RpZmljYWRhIGVuIGJhc2U2NCIsCiAgICBiYXNlNjR1cmw6ICJjYWRlbmEgY29kaWZpY2FkYSBlbiBiYXNlNjR1cmwiLAogICAganNvbl9zdHJpbmc6ICJjYWRlbmEgSlNPTiIsCiAgICBlMTY0OiAibsO6bWVybyBFLjE2NCIsCiAgICBqd3Q6ICJKV1QiLAogICAgdGVtcGxhdGVfbGl0ZXJhbDogImVudHJhZGEiCiAgfTsKICByZXR1cm4gKGlzc3VlMikgPT4gewogICAgc3dpdGNoIChpc3N1ZTIuY29kZSkgewogICAgICBjYXNlICJpbnZhbGlkX3R5cGUiOgogICAgICAgIHJldHVybiBgVGlwdXMgaW52w6BsaWQ6IHMnZXNwZXJhdmEgJHtpc3N1ZTIuZXhwZWN0ZWR9LCBzJ2hhIHJlYnV0ICR7cGFyc2VkVHlwZTcoaXNzdWUyLmlucHV0KX1gOwogICAgICAvLyByZXR1cm4gYFRpcHVzIGludsOgbGlkOiBzJ2VzcGVyYXZhICR7aXNzdWUuZXhwZWN0ZWR9LCBzJ2hhIHJlYnV0ICR7dXRpbC5nZXRQYXJzZWRUeXBlKGlzc3VlLmlucHV0KX1gOwogICAgICBjYXNlICJpbnZhbGlkX3ZhbHVlIjoKICAgICAgICBpZiAoaXNzdWUyLnZhbHVlcy5sZW5ndGggPT09IDEpCiAgICAgICAgICByZXR1cm4gYFZhbG9yIGludsOgbGlkOiBzJ2VzcGVyYXZhICR7c3RyaW5naWZ5UHJpbWl0aXZlKGlzc3VlMi52YWx1ZXNbMF0pfWA7CiAgICAgICAgcmV0dXJuIGBPcGNpw7MgaW52w6BsaWRhOiBzJ2VzcGVyYXZhIHVuYSBkZSAke2pvaW5WYWx1ZXMoaXNzdWUyLnZhbHVlcywgIiBvICIpfWA7CiAgICAgIGNhc2UgInRvb19iaWciOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICJjb20gYSBtw6B4aW0iIDogIm1lbnlzIGRlIjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykKICAgICAgICAgIHJldHVybiBgTWFzc2EgZ3Jhbjogcydlc3BlcmF2YSBxdWUgJHtpc3N1ZTIub3JpZ2luID8/ICJlbCB2YWxvciJ9IGNvbnRpbmd1w6lzICR7YWRqfSAke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9ICR7c2l6aW5nLnVuaXQgPz8gImVsZW1lbnRzIn1gOwogICAgICAgIHJldHVybiBgTWFzc2EgZ3Jhbjogcydlc3BlcmF2YSBxdWUgJHtpc3N1ZTIub3JpZ2luID8/ICJlbCB2YWxvciJ9IGZvcyAke2Fkan0gJHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfWA7CiAgICAgIH0KICAgICAgY2FzZSAidG9vX3NtYWxsIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiY29tIGEgbcOtbmltIiA6ICJtw6lzIGRlIjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykgewogICAgICAgICAgcmV0dXJuIGBNYXNzYSBwZXRpdDogcydlc3BlcmF2YSBxdWUgJHtpc3N1ZTIub3JpZ2lufSBjb250aW5ndcOpcyAke2Fkan0gJHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0fWA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBgTWFzc2EgcGV0aXQ6IHMnZXNwZXJhdmEgcXVlICR7aXNzdWUyLm9yaWdpbn0gZm9zICR7YWRqfSAke2lzc3VlMi5taW5pbXVtLnRvU3RyaW5nKCl9YDsKICAgICAgfQogICAgICBjYXNlICJpbnZhbGlkX2Zvcm1hdCI6IHsKICAgICAgICBjb25zdCBfaXNzdWUgPSBpc3N1ZTI7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJzdGFydHNfd2l0aCIpIHsKICAgICAgICAgIHJldHVybiBgRm9ybWF0IGludsOgbGlkOiBoYSBkZSBjb21lbsOnYXIgYW1iICIke19pc3N1ZS5wcmVmaXh9ImA7CiAgICAgICAgfQogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiZW5kc193aXRoIikKICAgICAgICAgIHJldHVybiBgRm9ybWF0IGludsOgbGlkOiBoYSBkJ2FjYWJhciBhbWIgIiR7X2lzc3VlLnN1ZmZpeH0iYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImluY2x1ZGVzIikKICAgICAgICAgIHJldHVybiBgRm9ybWF0IGludsOgbGlkOiBoYSBkJ2luY2xvdXJlICIke19pc3N1ZS5pbmNsdWRlc30iYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInJlZ2V4IikKICAgICAgICAgIHJldHVybiBgRm9ybWF0IGludsOgbGlkOiBoYSBkZSBjb2luY2lkaXIgYW1iIGVsIHBhdHLDsyAke19pc3N1ZS5wYXR0ZXJufWA7CiAgICAgICAgcmV0dXJuIGBGb3JtYXQgaW52w6BsaWQgcGVyIGEgJHtOb3Vuc1tfaXNzdWUuZm9ybWF0XSA/PyBpc3N1ZTIuZm9ybWF0fWA7CiAgICAgIH0KICAgICAgY2FzZSAibm90X211bHRpcGxlX29mIjoKICAgICAgICByZXR1cm4gYE7Dum1lcm8gaW52w6BsaWQ6IGhhIGRlIHNlciBtw7psdGlwbGUgZGUgJHtpc3N1ZTIuZGl2aXNvcn1gOwogICAgICBjYXNlICJ1bnJlY29nbml6ZWRfa2V5cyI6CiAgICAgICAgcmV0dXJuIGBDbGF1JHtpc3N1ZTIua2V5cy5sZW5ndGggPiAxID8gInMiIDogIiJ9IG5vIHJlY29uZWd1ZGEke2lzc3VlMi5rZXlzLmxlbmd0aCA+IDEgPyAicyIgOiAiIn06ICR7am9pblZhbHVlcyhpc3N1ZTIua2V5cywgIiwgIil9YDsKICAgICAgY2FzZSAiaW52YWxpZF9rZXkiOgogICAgICAgIHJldHVybiBgQ2xhdSBpbnbDoGxpZGEgYSAke2lzc3VlMi5vcmlnaW59YDsKICAgICAgY2FzZSAiaW52YWxpZF91bmlvbiI6CiAgICAgICAgcmV0dXJuICJFbnRyYWRhIGludsOgbGlkYSI7CiAgICAgIC8vIENvdWxkIGFsc28gYmUgIlRpcHVzIGQndW5pw7MgaW52w6BsaWQiIGJ1dCAiRW50cmFkYSBpbnbDoGxpZGEiIGlzIG1vcmUgZ2VuZXJhbAogICAgICBjYXNlICJpbnZhbGlkX2VsZW1lbnQiOgogICAgICAgIHJldHVybiBgRWxlbWVudCBpbnbDoGxpZCBhICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBgRW50cmFkYSBpbnbDoGxpZGFgOwogICAgfQogIH07Cn07CmZ1bmN0aW9uIGNhX2RlZmF1bHQoKSB7CiAgcmV0dXJuIHsKICAgIGxvY2FsZUVycm9yOiBlcnJvcjQoKQogIH07Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvbG9jYWxlcy9jcy5qcwp2YXIgZXJyb3I1ID0gKCkgPT4gewogIGNvbnN0IFNpemFibGUgPSB7CiAgICBzdHJpbmc6IHsgdW5pdDogInpuYWvFryIsIHZlcmI6ICJtw610IiB9LAogICAgZmlsZTogeyB1bml0OiAiYmFqdMWvIiwgdmVyYjogIm3DrXQiIH0sCiAgICBhcnJheTogeyB1bml0OiAicHJ2a8WvIiwgdmVyYjogIm3DrXQiIH0sCiAgICBzZXQ6IHsgdW5pdDogInBydmvFryIsIHZlcmI6ICJtw610IiB9CiAgfTsKICBmdW5jdGlvbiBnZXRTaXppbmcob3JpZ2luKSB7CiAgICByZXR1cm4gU2l6YWJsZVtvcmlnaW5dID8/IG51bGw7CiAgfQogIGNvbnN0IHBhcnNlZFR5cGU3ID0gKGRhdGEpID0+IHsKICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTsKICAgIHN3aXRjaCAodCkgewogICAgICBjYXNlICJudW1iZXIiOiB7CiAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/ICJOYU4iIDogIsSNw61zbG8iOwogICAgICB9CiAgICAgIGNhc2UgInN0cmluZyI6IHsKICAgICAgICByZXR1cm4gIsWZZXTEm3plYyI7CiAgICAgIH0KICAgICAgY2FzZSAiYm9vbGVhbiI6IHsKICAgICAgICByZXR1cm4gImJvb2xlYW4iOwogICAgICB9CiAgICAgIGNhc2UgImJpZ2ludCI6IHsKICAgICAgICByZXR1cm4gImJpZ2ludCI7CiAgICAgIH0KICAgICAgY2FzZSAiZnVuY3Rpb24iOiB7CiAgICAgICAgcmV0dXJuICJmdW5rY2UiOwogICAgICB9CiAgICAgIGNhc2UgInN5bWJvbCI6IHsKICAgICAgICByZXR1cm4gInN5bWJvbCI7CiAgICAgIH0KICAgICAgY2FzZSAidW5kZWZpbmVkIjogewogICAgICAgIHJldHVybiAidW5kZWZpbmVkIjsKICAgICAgfQogICAgICBjYXNlICJvYmplY3QiOiB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHsKICAgICAgICAgIHJldHVybiAicG9sZSI7CiAgICAgICAgfQogICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gIm51bGwiOwogICAgICAgIH0KICAgICAgICBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGRhdGEpICE9PSBPYmplY3QucHJvdG90eXBlICYmIGRhdGEuY29uc3RydWN0b3IpIHsKICAgICAgICAgIHJldHVybiBkYXRhLmNvbnN0cnVjdG9yLm5hbWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdDsKICB9OwogIGNvbnN0IE5vdW5zID0gewogICAgcmVnZXg6ICJyZWd1bMOhcm7DrSB2w71yYXoiLAogICAgZW1haWw6ICJlLW1haWxvdsOhIGFkcmVzYSIsCiAgICB1cmw6ICJVUkwiLAogICAgZW1vamk6ICJlbW9qaSIsCiAgICB1dWlkOiAiVVVJRCIsCiAgICB1dWlkdjQ6ICJVVUlEdjQiLAogICAgdXVpZHY2OiAiVVVJRHY2IiwKICAgIG5hbm9pZDogIm5hbm9pZCIsCiAgICBndWlkOiAiR1VJRCIsCiAgICBjdWlkOiAiY3VpZCIsCiAgICBjdWlkMjogImN1aWQyIiwKICAgIHVsaWQ6ICJVTElEIiwKICAgIHhpZDogIlhJRCIsCiAgICBrc3VpZDogIktTVUlEIiwKICAgIGRhdGV0aW1lOiAiZGF0dW0gYSDEjWFzIHZlIGZvcm3DoXR1IElTTyIsCiAgICBkYXRlOiAiZGF0dW0gdmUgZm9ybcOhdHUgSVNPIiwKICAgIHRpbWU6ICLEjWFzIHZlIGZvcm3DoXR1IElTTyIsCiAgICBkdXJhdGlvbjogImRvYmEgdHJ2w6Fuw60gSVNPIiwKICAgIGlwdjQ6ICJJUHY0IGFkcmVzYSIsCiAgICBpcHY2OiAiSVB2NiBhZHJlc2EiLAogICAgY2lkcnY0OiAicm96c2FoIElQdjQiLAogICAgY2lkcnY2OiAicm96c2FoIElQdjYiLAogICAgYmFzZTY0OiAixZlldMSbemVjIHpha8OzZG92YW7DvSB2ZSBmb3Jtw6F0dSBiYXNlNjQiLAogICAgYmFzZTY0dXJsOiAixZlldMSbemVjIHpha8OzZG92YW7DvSB2ZSBmb3Jtw6F0dSBiYXNlNjR1cmwiLAogICAganNvbl9zdHJpbmc6ICLFmWV0xJt6ZWMgdmUgZm9ybcOhdHUgSlNPTiIsCiAgICBlMTY0OiAixI3DrXNsbyBFLjE2NCIsCiAgICBqd3Q6ICJKV1QiLAogICAgdGVtcGxhdGVfbGl0ZXJhbDogInZzdHVwIgogIH07CiAgcmV0dXJuIChpc3N1ZTIpID0+IHsKICAgIHN3aXRjaCAoaXNzdWUyLmNvZGUpIHsKICAgICAgY2FzZSAiaW52YWxpZF90eXBlIjoKICAgICAgICByZXR1cm4gYE5lcGxhdG7DvSB2c3R1cDogb8SNZWvDoXbDoW5vICR7aXNzdWUyLmV4cGVjdGVkfSwgb2JkcsW+ZW5vICR7cGFyc2VkVHlwZTcoaXNzdWUyLmlucHV0KX1gOwogICAgICBjYXNlICJpbnZhbGlkX3ZhbHVlIjoKICAgICAgICBpZiAoaXNzdWUyLnZhbHVlcy5sZW5ndGggPT09IDEpCiAgICAgICAgICByZXR1cm4gYE5lcGxhdG7DvSB2c3R1cDogb8SNZWvDoXbDoW5vICR7c3RyaW5naWZ5UHJpbWl0aXZlKGlzc3VlMi52YWx1ZXNbMF0pfWA7CiAgICAgICAgcmV0dXJuIGBOZXBsYXRuw6EgbW/Fvm5vc3Q6IG/EjWVrw6F2w6FuYSBqZWRuYSB6IGhvZG5vdCAke2pvaW5WYWx1ZXMoaXNzdWUyLnZhbHVlcywgInwiKX1gOwogICAgICBjYXNlICJ0b29fYmlnIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPD0iIDogIjwiOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKSB7CiAgICAgICAgICByZXR1cm4gYEhvZG5vdGEgamUgcMWZw61sacWhIHZlbGvDoTogJHtpc3N1ZTIub3JpZ2luID8/ICJob2Rub3RhIn0gbXVzw60gbcOtdCAke2Fkan0ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9ICR7c2l6aW5nLnVuaXQgPz8gInBydmvFryJ9YDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGBIb2Rub3RhIGplIHDFmcOtbGnFoSB2ZWxrw6E6ICR7aXNzdWUyLm9yaWdpbiA/PyAiaG9kbm90YSJ9IG11c8OtIGLDvXQgJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfWA7CiAgICAgIH0KICAgICAgY2FzZSAidG9vX3NtYWxsIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPj0iIDogIj4iOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKSB7CiAgICAgICAgICByZXR1cm4gYEhvZG5vdGEgamUgcMWZw61sacWhIG1hbMOhOiAke2lzc3VlMi5vcmlnaW4gPz8gImhvZG5vdGEifSBtdXPDrSBtw610ICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdCA/PyAicHJ2a8WvIn1gOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYEhvZG5vdGEgamUgcMWZw61sacWhIG1hbMOhOiAke2lzc3VlMi5vcmlnaW4gPz8gImhvZG5vdGEifSBtdXPDrSBiw710ICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgImludmFsaWRfZm9ybWF0IjogewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInN0YXJ0c193aXRoIikKICAgICAgICAgIHJldHVybiBgTmVwbGF0bsO9IMWZZXTEm3plYzogbXVzw60gemHEjcOtbmF0IG5hICIke19pc3N1ZS5wcmVmaXh9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJlbmRzX3dpdGgiKQogICAgICAgICAgcmV0dXJuIGBOZXBsYXRuw70gxZlldMSbemVjOiBtdXPDrSBrb27EjWl0IG5hICIke19pc3N1ZS5zdWZmaXh9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJpbmNsdWRlcyIpCiAgICAgICAgICByZXR1cm4gYE5lcGxhdG7DvSDFmWV0xJt6ZWM6IG11c8OtIG9ic2Fob3ZhdCAiJHtfaXNzdWUuaW5jbHVkZXN9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJyZWdleCIpCiAgICAgICAgICByZXR1cm4gYE5lcGxhdG7DvSDFmWV0xJt6ZWM6IG11c8OtIG9kcG92w61kYXQgdnpvcnUgJHtfaXNzdWUucGF0dGVybn1gOwogICAgICAgIHJldHVybiBgTmVwbGF0bsO9IGZvcm3DoXQgJHtOb3Vuc1tfaXNzdWUuZm9ybWF0XSA/PyBpc3N1ZTIuZm9ybWF0fWA7CiAgICAgIH0KICAgICAgY2FzZSAibm90X211bHRpcGxlX29mIjoKICAgICAgICByZXR1cm4gYE5lcGxhdG7DqSDEjcOtc2xvOiBtdXPDrSBiw710IG7DoXNvYmtlbSAke2lzc3VlMi5kaXZpc29yfWA7CiAgICAgIGNhc2UgInVucmVjb2duaXplZF9rZXlzIjoKICAgICAgICByZXR1cm4gYE5lem7DoW3DqSBrbMOtxI1lOiAke2pvaW5WYWx1ZXMoaXNzdWUyLmtleXMsICIsICIpfWA7CiAgICAgIGNhc2UgImludmFsaWRfa2V5IjoKICAgICAgICByZXR1cm4gYE5lcGxhdG7DvSBrbMOtxI0gdiAke2lzc3VlMi5vcmlnaW59YDsKICAgICAgY2FzZSAiaW52YWxpZF91bmlvbiI6CiAgICAgICAgcmV0dXJuICJOZXBsYXRuw70gdnN0dXAiOwogICAgICBjYXNlICJpbnZhbGlkX2VsZW1lbnQiOgogICAgICAgIHJldHVybiBgTmVwbGF0bsOhIGhvZG5vdGEgdiAke2lzc3VlMi5vcmlnaW59YDsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gYE5lcGxhdG7DvSB2c3R1cGA7CiAgICB9CiAgfTsKfTsKZnVuY3Rpb24gY3NfZGVmYXVsdCgpIHsKICByZXR1cm4gewogICAgbG9jYWxlRXJyb3I6IGVycm9yNSgpCiAgfTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9sb2NhbGVzL2RhLmpzCnZhciBlcnJvcjYgPSAoKSA9PiB7CiAgY29uc3QgU2l6YWJsZSA9IHsKICAgIHN0cmluZzogeyB1bml0OiAidGVnbiIsIHZlcmI6ICJoYXZkZSIgfSwKICAgIGZpbGU6IHsgdW5pdDogImJ5dGVzIiwgdmVyYjogImhhdmRlIiB9LAogICAgYXJyYXk6IHsgdW5pdDogImVsZW1lbnRlciIsIHZlcmI6ICJpbmRlaG9sZHQiIH0sCiAgICBzZXQ6IHsgdW5pdDogImVsZW1lbnRlciIsIHZlcmI6ICJpbmRlaG9sZHQiIH0KICB9OwogIGNvbnN0IFR5cGVOYW1lcyA9IHsKICAgIHN0cmluZzogInN0cmVuZyIsCiAgICBudW1iZXI6ICJ0YWwiLAogICAgYm9vbGVhbjogImJvb2xlYW4iLAogICAgYXJyYXk6ICJsaXN0ZSIsCiAgICBvYmplY3Q6ICJvYmpla3QiLAogICAgc2V0OiAic8OmdCIsCiAgICBmaWxlOiAiZmlsIgogIH07CiAgZnVuY3Rpb24gZ2V0U2l6aW5nKG9yaWdpbikgewogICAgcmV0dXJuIFNpemFibGVbb3JpZ2luXSA/PyBudWxsOwogIH0KICBmdW5jdGlvbiBnZXRUeXBlTmFtZSh0eXBlKSB7CiAgICByZXR1cm4gVHlwZU5hbWVzW3R5cGVdID8/IHR5cGU7CiAgfQogIGNvbnN0IHBhcnNlZFR5cGU3ID0gKGRhdGEpID0+IHsKICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTsKICAgIHN3aXRjaCAodCkgewogICAgICBjYXNlICJudW1iZXIiOiB7CiAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/ICJOYU4iIDogInRhbCI7CiAgICAgIH0KICAgICAgY2FzZSAib2JqZWN0IjogewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgICAgICByZXR1cm4gImxpc3RlIjsKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHsKICAgICAgICAgIHJldHVybiAibnVsbCI7CiAgICAgICAgfQogICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZGF0YSkgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgZGF0YS5jb25zdHJ1Y3RvcikgewogICAgICAgICAgcmV0dXJuIGRhdGEuY29uc3RydWN0b3IubmFtZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICJvYmpla3QiOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gdDsKICB9OwogIGNvbnN0IE5vdW5zID0gewogICAgcmVnZXg6ICJpbnB1dCIsCiAgICBlbWFpbDogImUtbWFpbGFkcmVzc2UiLAogICAgdXJsOiAiVVJMIiwKICAgIGVtb2ppOiAiZW1vamkiLAogICAgdXVpZDogIlVVSUQiLAogICAgdXVpZHY0OiAiVVVJRHY0IiwKICAgIHV1aWR2NjogIlVVSUR2NiIsCiAgICBuYW5vaWQ6ICJuYW5vaWQiLAogICAgZ3VpZDogIkdVSUQiLAogICAgY3VpZDogImN1aWQiLAogICAgY3VpZDI6ICJjdWlkMiIsCiAgICB1bGlkOiAiVUxJRCIsCiAgICB4aWQ6ICJYSUQiLAogICAga3N1aWQ6ICJLU1VJRCIsCiAgICBkYXRldGltZTogIklTTyBkYXRvLSBvZyBrbG9ra2VzbMOmdCIsCiAgICBkYXRlOiAiSVNPLWRhdG8iLAogICAgdGltZTogIklTTy1rbG9ra2VzbMOmdCIsCiAgICBkdXJhdGlvbjogIklTTy12YXJpZ2hlZCIsCiAgICBpcHY0OiAiSVB2NC1vbXLDpWRlIiwKICAgIGlwdjY6ICJJUHY2LW9tcsOlZGUiLAogICAgY2lkcnY0OiAiSVB2NC1zcGVrdHJ1bSIsCiAgICBjaWRydjY6ICJJUHY2LXNwZWt0cnVtIiwKICAgIGJhc2U2NDogImJhc2U2NC1rb2RldCBzdHJlbmciLAogICAgYmFzZTY0dXJsOiAiYmFzZTY0dXJsLWtvZGV0IHN0cmVuZyIsCiAgICBqc29uX3N0cmluZzogIkpTT04tc3RyZW5nIiwKICAgIGUxNjQ6ICJFLjE2NC1udW1tZXIiLAogICAgand0OiAiSldUIiwKICAgIHRlbXBsYXRlX2xpdGVyYWw6ICJpbnB1dCIKICB9OwogIHJldHVybiAoaXNzdWUyKSA9PiB7CiAgICBzd2l0Y2ggKGlzc3VlMi5jb2RlKSB7CiAgICAgIGNhc2UgImludmFsaWRfdHlwZSI6CiAgICAgICAgcmV0dXJuIGBVZ3lsZGlndCBpbnB1dDogZm9ydmVudGVkZSAke2dldFR5cGVOYW1lKGlzc3VlMi5leHBlY3RlZCl9LCBmaWsgJHtnZXRUeXBlTmFtZShwYXJzZWRUeXBlNyhpc3N1ZTIuaW5wdXQpKX1gOwogICAgICBjYXNlICJpbnZhbGlkX3ZhbHVlIjoKICAgICAgICBpZiAoaXNzdWUyLnZhbHVlcy5sZW5ndGggPT09IDEpCiAgICAgICAgICByZXR1cm4gYFVneWxkaWcgdsOmcmRpOiBmb3J2ZW50ZWRlICR7c3RyaW5naWZ5UHJpbWl0aXZlKGlzc3VlMi52YWx1ZXNbMF0pfWA7CiAgICAgICAgcmV0dXJuIGBVZ3lsZGlndCB2YWxnOiBmb3J2ZW50ZWRlIGVuIGFmIGbDuGxnZW5kZSAke2pvaW5WYWx1ZXMoaXNzdWUyLnZhbHVlcywgInwiKX1gOwogICAgICBjYXNlICJ0b29fYmlnIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPD0iIDogIjwiOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBjb25zdCBvcmlnaW4gPSBnZXRUeXBlTmFtZShpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKQogICAgICAgICAgcmV0dXJuIGBGb3Igc3RvcjogZm9ydmVudGVkZSAke29yaWdpbiA/PyAidmFsdWUifSAke3NpemluZy52ZXJifSAke2Fkan0gJHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0ID8/ICJlbGVtZW50ZXIifWA7CiAgICAgICAgcmV0dXJuIGBGb3Igc3RvcjogZm9ydmVudGVkZSAke29yaWdpbiA/PyAidmFsdWUifSBoYXZkZSAke2Fkan0gJHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfWA7CiAgICAgIH0KICAgICAgY2FzZSAidG9vX3NtYWxsIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPj0iIDogIj4iOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBjb25zdCBvcmlnaW4gPSBnZXRUeXBlTmFtZShpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKSB7CiAgICAgICAgICByZXR1cm4gYEZvciBsaWxsZTogZm9ydmVudGVkZSAke29yaWdpbn0gJHtzaXppbmcudmVyYn0gJHthZGp9ICR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdH1gOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYEZvciBsaWxsZTogZm9ydmVudGVkZSAke29yaWdpbn0gaGF2ZGUgJHthZGp9ICR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgImludmFsaWRfZm9ybWF0IjogewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInN0YXJ0c193aXRoIikKICAgICAgICAgIHJldHVybiBgVWd5bGRpZyBzdHJlbmc6IHNrYWwgc3RhcnRlIG1lZCAiJHtfaXNzdWUucHJlZml4fSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiZW5kc193aXRoIikKICAgICAgICAgIHJldHVybiBgVWd5bGRpZyBzdHJlbmc6IHNrYWwgZW5kZSBtZWQgIiR7X2lzc3VlLnN1ZmZpeH0iYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImluY2x1ZGVzIikKICAgICAgICAgIHJldHVybiBgVWd5bGRpZyBzdHJlbmc6IHNrYWwgaW5kZWhvbGRlICIke19pc3N1ZS5pbmNsdWRlc30iYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInJlZ2V4IikKICAgICAgICAgIHJldHVybiBgVWd5bGRpZyBzdHJlbmc6IHNrYWwgbWF0Y2hlIG3DuG5zdGVyZXQgJHtfaXNzdWUucGF0dGVybn1gOwogICAgICAgIHJldHVybiBgVWd5bGRpZyAke05vdW5zW19pc3N1ZS5mb3JtYXRdID8/IGlzc3VlMi5mb3JtYXR9YDsKICAgICAgfQogICAgICBjYXNlICJub3RfbXVsdGlwbGVfb2YiOgogICAgICAgIHJldHVybiBgVWd5bGRpZ3QgdGFsOiBza2FsIHbDpnJlIGRlbGVsaWd0IG1lZCAke2lzc3VlMi5kaXZpc29yfWA7CiAgICAgIGNhc2UgInVucmVjb2duaXplZF9rZXlzIjoKICAgICAgICByZXR1cm4gYCR7aXNzdWUyLmtleXMubGVuZ3RoID4gMSA/ICJVa2VuZHRlIG7DuGdsZXIiIDogIlVrZW5kdCBuw7hnbGUifTogJHtqb2luVmFsdWVzKGlzc3VlMi5rZXlzLCAiLCAiKX1gOwogICAgICBjYXNlICJpbnZhbGlkX2tleSI6CiAgICAgICAgcmV0dXJuIGBVZ3lsZGlnIG7DuGdsZSBpICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBjYXNlICJpbnZhbGlkX3VuaW9uIjoKICAgICAgICByZXR1cm4gIlVneWxkaWd0IGlucHV0OiBtYXRjaGVyIGluZ2VuIGFmIGRlIHRpbGxhZHRlIHR5cGVyIjsKICAgICAgY2FzZSAiaW52YWxpZF9lbGVtZW50IjoKICAgICAgICByZXR1cm4gYFVneWxkaWcgdsOmcmRpIGkgJHtpc3N1ZTIub3JpZ2lufWA7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIGBVZ3lsZGlndCBpbnB1dGA7CiAgICB9CiAgfTsKfTsKZnVuY3Rpb24gZGFfZGVmYXVsdCgpIHsKICByZXR1cm4gewogICAgbG9jYWxlRXJyb3I6IGVycm9yNigpCiAgfTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9sb2NhbGVzL2RlLmpzCnZhciBlcnJvcjcgPSAoKSA9PiB7CiAgY29uc3QgU2l6YWJsZSA9IHsKICAgIHN0cmluZzogeyB1bml0OiAiWmVpY2hlbiIsIHZlcmI6ICJ6dSBoYWJlbiIgfSwKICAgIGZpbGU6IHsgdW5pdDogIkJ5dGVzIiwgdmVyYjogInp1IGhhYmVuIiB9LAogICAgYXJyYXk6IHsgdW5pdDogIkVsZW1lbnRlIiwgdmVyYjogInp1IGhhYmVuIiB9LAogICAgc2V0OiB7IHVuaXQ6ICJFbGVtZW50ZSIsIHZlcmI6ICJ6dSBoYWJlbiIgfQogIH07CiAgZnVuY3Rpb24gZ2V0U2l6aW5nKG9yaWdpbikgewogICAgcmV0dXJuIFNpemFibGVbb3JpZ2luXSA/PyBudWxsOwogIH0KICBjb25zdCBwYXJzZWRUeXBlNyA9IChkYXRhKSA9PiB7CiAgICBjb25zdCB0ID0gdHlwZW9mIGRhdGE7CiAgICBzd2l0Y2ggKHQpIHsKICAgICAgY2FzZSAibnVtYmVyIjogewogICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0YSkgPyAiTmFOIiA6ICJaYWhsIjsKICAgICAgfQogICAgICBjYXNlICJvYmplY3QiOiB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHsKICAgICAgICAgIHJldHVybiAiQXJyYXkiOwogICAgICAgIH0KICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuICJudWxsIjsKICAgICAgICB9CiAgICAgICAgaWYgKE9iamVjdC5nZXRQcm90b3R5cGVPZihkYXRhKSAhPT0gT2JqZWN0LnByb3RvdHlwZSAmJiBkYXRhLmNvbnN0cnVjdG9yKSB7CiAgICAgICAgICByZXR1cm4gZGF0YS5jb25zdHJ1Y3Rvci5uYW1lOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHQ7CiAgfTsKICBjb25zdCBOb3VucyA9IHsKICAgIHJlZ2V4OiAiRWluZ2FiZSIsCiAgICBlbWFpbDogIkUtTWFpbC1BZHJlc3NlIiwKICAgIHVybDogIlVSTCIsCiAgICBlbW9qaTogIkVtb2ppIiwKICAgIHV1aWQ6ICJVVUlEIiwKICAgIHV1aWR2NDogIlVVSUR2NCIsCiAgICB1dWlkdjY6ICJVVUlEdjYiLAogICAgbmFub2lkOiAibmFub2lkIiwKICAgIGd1aWQ6ICJHVUlEIiwKICAgIGN1aWQ6ICJjdWlkIiwKICAgIGN1aWQyOiAiY3VpZDIiLAogICAgdWxpZDogIlVMSUQiLAogICAgeGlkOiAiWElEIiwKICAgIGtzdWlkOiAiS1NVSUQiLAogICAgZGF0ZXRpbWU6ICJJU08tRGF0dW0gdW5kIC1VaHJ6ZWl0IiwKICAgIGRhdGU6ICJJU08tRGF0dW0iLAogICAgdGltZTogIklTTy1VaHJ6ZWl0IiwKICAgIGR1cmF0aW9uOiAiSVNPLURhdWVyIiwKICAgIGlwdjQ6ICJJUHY0LUFkcmVzc2UiLAogICAgaXB2NjogIklQdjYtQWRyZXNzZSIsCiAgICBjaWRydjQ6ICJJUHY0LUJlcmVpY2giLAogICAgY2lkcnY2OiAiSVB2Ni1CZXJlaWNoIiwKICAgIGJhc2U2NDogIkJhc2U2NC1jb2RpZXJ0ZXIgU3RyaW5nIiwKICAgIGJhc2U2NHVybDogIkJhc2U2NC1VUkwtY29kaWVydGVyIFN0cmluZyIsCiAgICBqc29uX3N0cmluZzogIkpTT04tU3RyaW5nIiwKICAgIGUxNjQ6ICJFLjE2NC1OdW1tZXIiLAogICAgand0OiAiSldUIiwKICAgIHRlbXBsYXRlX2xpdGVyYWw6ICJFaW5nYWJlIgogIH07CiAgcmV0dXJuIChpc3N1ZTIpID0+IHsKICAgIHN3aXRjaCAoaXNzdWUyLmNvZGUpIHsKICAgICAgY2FzZSAiaW52YWxpZF90eXBlIjoKICAgICAgICByZXR1cm4gYFVuZ8O8bHRpZ2UgRWluZ2FiZTogZXJ3YXJ0ZXQgJHtpc3N1ZTIuZXhwZWN0ZWR9LCBlcmhhbHRlbiAke3BhcnNlZFR5cGU3KGlzc3VlMi5pbnB1dCl9YDsKICAgICAgY2FzZSAiaW52YWxpZF92YWx1ZSI6CiAgICAgICAgaWYgKGlzc3VlMi52YWx1ZXMubGVuZ3RoID09PSAxKQogICAgICAgICAgcmV0dXJuIGBVbmfDvGx0aWdlIEVpbmdhYmU6IGVyd2FydGV0ICR7c3RyaW5naWZ5UHJpbWl0aXZlKGlzc3VlMi52YWx1ZXNbMF0pfWA7CiAgICAgICAgcmV0dXJuIGBVbmfDvGx0aWdlIE9wdGlvbjogZXJ3YXJ0ZXQgZWluZSB2b24gJHtqb2luVmFsdWVzKGlzc3VlMi52YWx1ZXMsICJ8Iil9YDsKICAgICAgY2FzZSAidG9vX2JpZyI6IHsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIjw9IiA6ICI8IjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykKICAgICAgICAgIHJldHVybiBgWnUgZ3Jvw586IGVyd2FydGV0LCBkYXNzICR7aXNzdWUyLm9yaWdpbiA/PyAiV2VydCJ9ICR7YWRqfSR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdCA/PyAiRWxlbWVudGUifSBoYXRgOwogICAgICAgIHJldHVybiBgWnUgZ3Jvw586IGVyd2FydGV0LCBkYXNzICR7aXNzdWUyLm9yaWdpbiA/PyAiV2VydCJ9ICR7YWRqfSR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX0gaXN0YDsKICAgICAgfQogICAgICBjYXNlICJ0b29fc21hbGwiOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI+PSIgOiAiPiI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpIHsKICAgICAgICAgIHJldHVybiBgWnUga2xlaW46IGVyd2FydGV0LCBkYXNzICR7aXNzdWUyLm9yaWdpbn0gJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0fSBoYXRgOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYFp1IGtsZWluOiBlcndhcnRldCwgZGFzcyAke2lzc3VlMi5vcmlnaW59ICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX0gaXN0YDsKICAgICAgfQogICAgICBjYXNlICJpbnZhbGlkX2Zvcm1hdCI6IHsKICAgICAgICBjb25zdCBfaXNzdWUgPSBpc3N1ZTI7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJzdGFydHNfd2l0aCIpCiAgICAgICAgICByZXR1cm4gYFVuZ8O8bHRpZ2VyIFN0cmluZzogbXVzcyBtaXQgIiR7X2lzc3VlLnByZWZpeH0iIGJlZ2lubmVuYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImVuZHNfd2l0aCIpCiAgICAgICAgICByZXR1cm4gYFVuZ8O8bHRpZ2VyIFN0cmluZzogbXVzcyBtaXQgIiR7X2lzc3VlLnN1ZmZpeH0iIGVuZGVuYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImluY2x1ZGVzIikKICAgICAgICAgIHJldHVybiBgVW5nw7xsdGlnZXIgU3RyaW5nOiBtdXNzICIke19pc3N1ZS5pbmNsdWRlc30iIGVudGhhbHRlbmA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJyZWdleCIpCiAgICAgICAgICByZXR1cm4gYFVuZ8O8bHRpZ2VyIFN0cmluZzogbXVzcyBkZW0gTXVzdGVyICR7X2lzc3VlLnBhdHRlcm59IGVudHNwcmVjaGVuYDsKICAgICAgICByZXR1cm4gYFVuZ8O8bHRpZzogJHtOb3Vuc1tfaXNzdWUuZm9ybWF0XSA/PyBpc3N1ZTIuZm9ybWF0fWA7CiAgICAgIH0KICAgICAgY2FzZSAibm90X211bHRpcGxlX29mIjoKICAgICAgICByZXR1cm4gYFVuZ8O8bHRpZ2UgWmFobDogbXVzcyBlaW4gVmllbGZhY2hlcyB2b24gJHtpc3N1ZTIuZGl2aXNvcn0gc2VpbmA7CiAgICAgIGNhc2UgInVucmVjb2duaXplZF9rZXlzIjoKICAgICAgICByZXR1cm4gYCR7aXNzdWUyLmtleXMubGVuZ3RoID4gMSA/ICJVbmJla2FubnRlIFNjaGzDvHNzZWwiIDogIlVuYmVrYW5udGVyIFNjaGzDvHNzZWwifTogJHtqb2luVmFsdWVzKGlzc3VlMi5rZXlzLCAiLCAiKX1gOwogICAgICBjYXNlICJpbnZhbGlkX2tleSI6CiAgICAgICAgcmV0dXJuIGBVbmfDvGx0aWdlciBTY2hsw7xzc2VsIGluICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBjYXNlICJpbnZhbGlkX3VuaW9uIjoKICAgICAgICByZXR1cm4gIlVuZ8O8bHRpZ2UgRWluZ2FiZSI7CiAgICAgIGNhc2UgImludmFsaWRfZWxlbWVudCI6CiAgICAgICAgcmV0dXJuIGBVbmfDvGx0aWdlciBXZXJ0IGluICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBgVW5nw7xsdGlnZSBFaW5nYWJlYDsKICAgIH0KICB9Owp9OwpmdW5jdGlvbiBkZV9kZWZhdWx0KCkgewogIHJldHVybiB7CiAgICBsb2NhbGVFcnJvcjogZXJyb3I3KCkKICB9Owp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2xvY2FsZXMvZW4uanMKdmFyIHBhcnNlZFR5cGUgPSAoZGF0YSkgPT4gewogIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTsKICBzd2l0Y2ggKHQpIHsKICAgIGNhc2UgIm51bWJlciI6IHsKICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/ICJOYU4iIDogIm51bWJlciI7CiAgICB9CiAgICBjYXNlICJvYmplY3QiOiB7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgICAgcmV0dXJuICJhcnJheSI7CiAgICAgIH0KICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHsKICAgICAgICByZXR1cm4gIm51bGwiOwogICAgICB9CiAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZGF0YSkgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgZGF0YS5jb25zdHJ1Y3RvcikgewogICAgICAgIHJldHVybiBkYXRhLmNvbnN0cnVjdG9yLm5hbWU7CiAgICAgIH0KICAgIH0KICB9CiAgcmV0dXJuIHQ7Cn07CnZhciBlcnJvcjggPSAoKSA9PiB7CiAgY29uc3QgU2l6YWJsZSA9IHsKICAgIHN0cmluZzogeyB1bml0OiAiY2hhcmFjdGVycyIsIHZlcmI6ICJ0byBoYXZlIiB9LAogICAgZmlsZTogeyB1bml0OiAiYnl0ZXMiLCB2ZXJiOiAidG8gaGF2ZSIgfSwKICAgIGFycmF5OiB7IHVuaXQ6ICJpdGVtcyIsIHZlcmI6ICJ0byBoYXZlIiB9LAogICAgc2V0OiB7IHVuaXQ6ICJpdGVtcyIsIHZlcmI6ICJ0byBoYXZlIiB9CiAgfTsKICBmdW5jdGlvbiBnZXRTaXppbmcob3JpZ2luKSB7CiAgICByZXR1cm4gU2l6YWJsZVtvcmlnaW5dID8/IG51bGw7CiAgfQogIGNvbnN0IE5vdW5zID0gewogICAgcmVnZXg6ICJpbnB1dCIsCiAgICBlbWFpbDogImVtYWlsIGFkZHJlc3MiLAogICAgdXJsOiAiVVJMIiwKICAgIGVtb2ppOiAiZW1vamkiLAogICAgdXVpZDogIlVVSUQiLAogICAgdXVpZHY0OiAiVVVJRHY0IiwKICAgIHV1aWR2NjogIlVVSUR2NiIsCiAgICBuYW5vaWQ6ICJuYW5vaWQiLAogICAgZ3VpZDogIkdVSUQiLAogICAgY3VpZDogImN1aWQiLAogICAgY3VpZDI6ICJjdWlkMiIsCiAgICB1bGlkOiAiVUxJRCIsCiAgICB4aWQ6ICJYSUQiLAogICAga3N1aWQ6ICJLU1VJRCIsCiAgICBkYXRldGltZTogIklTTyBkYXRldGltZSIsCiAgICBkYXRlOiAiSVNPIGRhdGUiLAogICAgdGltZTogIklTTyB0aW1lIiwKICAgIGR1cmF0aW9uOiAiSVNPIGR1cmF0aW9uIiwKICAgIGlwdjQ6ICJJUHY0IGFkZHJlc3MiLAogICAgaXB2NjogIklQdjYgYWRkcmVzcyIsCiAgICBjaWRydjQ6ICJJUHY0IHJhbmdlIiwKICAgIGNpZHJ2NjogIklQdjYgcmFuZ2UiLAogICAgYmFzZTY0OiAiYmFzZTY0LWVuY29kZWQgc3RyaW5nIiwKICAgIGJhc2U2NHVybDogImJhc2U2NHVybC1lbmNvZGVkIHN0cmluZyIsCiAgICBqc29uX3N0cmluZzogIkpTT04gc3RyaW5nIiwKICAgIGUxNjQ6ICJFLjE2NCBudW1iZXIiLAogICAgand0OiAiSldUIiwKICAgIHRlbXBsYXRlX2xpdGVyYWw6ICJpbnB1dCIKICB9OwogIHJldHVybiAoaXNzdWUyKSA9PiB7CiAgICBzd2l0Y2ggKGlzc3VlMi5jb2RlKSB7CiAgICAgIGNhc2UgImludmFsaWRfdHlwZSI6CiAgICAgICAgcmV0dXJuIGBJbnZhbGlkIGlucHV0OiBleHBlY3RlZCAke2lzc3VlMi5leHBlY3RlZH0sIHJlY2VpdmVkICR7cGFyc2VkVHlwZShpc3N1ZTIuaW5wdXQpfWA7CiAgICAgIGNhc2UgImludmFsaWRfdmFsdWUiOgogICAgICAgIGlmIChpc3N1ZTIudmFsdWVzLmxlbmd0aCA9PT0gMSkKICAgICAgICAgIHJldHVybiBgSW52YWxpZCBpbnB1dDogZXhwZWN0ZWQgJHtzdHJpbmdpZnlQcmltaXRpdmUoaXNzdWUyLnZhbHVlc1swXSl9YDsKICAgICAgICByZXR1cm4gYEludmFsaWQgb3B0aW9uOiBleHBlY3RlZCBvbmUgb2YgJHtqb2luVmFsdWVzKGlzc3VlMi52YWx1ZXMsICJ8Iil9YDsKICAgICAgY2FzZSAidG9vX2JpZyI6IHsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIjw9IiA6ICI8IjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykKICAgICAgICAgIHJldHVybiBgVG9vIGJpZzogZXhwZWN0ZWQgJHtpc3N1ZTIub3JpZ2luID8/ICJ2YWx1ZSJ9IHRvIGhhdmUgJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0ID8/ICJlbGVtZW50cyJ9YDsKICAgICAgICByZXR1cm4gYFRvbyBiaWc6IGV4cGVjdGVkICR7aXNzdWUyLm9yaWdpbiA/PyAidmFsdWUifSB0byBiZSAke2Fkan0ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9YDsKICAgICAgfQogICAgICBjYXNlICJ0b29fc21hbGwiOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI+PSIgOiAiPiI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpIHsKICAgICAgICAgIHJldHVybiBgVG9vIHNtYWxsOiBleHBlY3RlZCAke2lzc3VlMi5vcmlnaW59IHRvIGhhdmUgJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0fWA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBgVG9vIHNtYWxsOiBleHBlY3RlZCAke2lzc3VlMi5vcmlnaW59IHRvIGJlICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgImludmFsaWRfZm9ybWF0IjogewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInN0YXJ0c193aXRoIikgewogICAgICAgICAgcmV0dXJuIGBJbnZhbGlkIHN0cmluZzogbXVzdCBzdGFydCB3aXRoICIke19pc3N1ZS5wcmVmaXh9ImA7CiAgICAgICAgfQogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiZW5kc193aXRoIikKICAgICAgICAgIHJldHVybiBgSW52YWxpZCBzdHJpbmc6IG11c3QgZW5kIHdpdGggIiR7X2lzc3VlLnN1ZmZpeH0iYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImluY2x1ZGVzIikKICAgICAgICAgIHJldHVybiBgSW52YWxpZCBzdHJpbmc6IG11c3QgaW5jbHVkZSAiJHtfaXNzdWUuaW5jbHVkZXN9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJyZWdleCIpCiAgICAgICAgICByZXR1cm4gYEludmFsaWQgc3RyaW5nOiBtdXN0IG1hdGNoIHBhdHRlcm4gJHtfaXNzdWUucGF0dGVybn1gOwogICAgICAgIHJldHVybiBgSW52YWxpZCAke05vdW5zW19pc3N1ZS5mb3JtYXRdID8/IGlzc3VlMi5mb3JtYXR9YDsKICAgICAgfQogICAgICBjYXNlICJub3RfbXVsdGlwbGVfb2YiOgogICAgICAgIHJldHVybiBgSW52YWxpZCBudW1iZXI6IG11c3QgYmUgYSBtdWx0aXBsZSBvZiAke2lzc3VlMi5kaXZpc29yfWA7CiAgICAgIGNhc2UgInVucmVjb2duaXplZF9rZXlzIjoKICAgICAgICByZXR1cm4gYFVucmVjb2duaXplZCBrZXkke2lzc3VlMi5rZXlzLmxlbmd0aCA+IDEgPyAicyIgOiAiIn06ICR7am9pblZhbHVlcyhpc3N1ZTIua2V5cywgIiwgIil9YDsKICAgICAgY2FzZSAiaW52YWxpZF9rZXkiOgogICAgICAgIHJldHVybiBgSW52YWxpZCBrZXkgaW4gJHtpc3N1ZTIub3JpZ2lufWA7CiAgICAgIGNhc2UgImludmFsaWRfdW5pb24iOgogICAgICAgIHJldHVybiAiSW52YWxpZCBpbnB1dCI7CiAgICAgIGNhc2UgImludmFsaWRfZWxlbWVudCI6CiAgICAgICAgcmV0dXJuIGBJbnZhbGlkIHZhbHVlIGluICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBgSW52YWxpZCBpbnB1dGA7CiAgICB9CiAgfTsKfTsKZnVuY3Rpb24gZW5fZGVmYXVsdCgpIHsKICByZXR1cm4gewogICAgbG9jYWxlRXJyb3I6IGVycm9yOCgpCiAgfTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9sb2NhbGVzL2VvLmpzCnZhciBwYXJzZWRUeXBlMiA9IChkYXRhKSA9PiB7CiAgY29uc3QgdCA9IHR5cGVvZiBkYXRhOwogIHN3aXRjaCAodCkgewogICAgY2FzZSAibnVtYmVyIjogewogICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gIk5hTiIgOiAibm9tYnJvIjsKICAgIH0KICAgIGNhc2UgIm9iamVjdCI6IHsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHsKICAgICAgICByZXR1cm4gInRhYmVsbyI7CiAgICAgIH0KICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHsKICAgICAgICByZXR1cm4gInNlbnZhbG9yYSI7CiAgICAgIH0KICAgICAgaWYgKE9iamVjdC5nZXRQcm90b3R5cGVPZihkYXRhKSAhPT0gT2JqZWN0LnByb3RvdHlwZSAmJiBkYXRhLmNvbnN0cnVjdG9yKSB7CiAgICAgICAgcmV0dXJuIGRhdGEuY29uc3RydWN0b3IubmFtZTsKICAgICAgfQogICAgfQogIH0KICByZXR1cm4gdDsKfTsKdmFyIGVycm9yOSA9ICgpID0+IHsKICBjb25zdCBTaXphYmxlID0gewogICAgc3RyaW5nOiB7IHVuaXQ6ICJrYXJha3Ryb2puIiwgdmVyYjogImhhdmkiIH0sCiAgICBmaWxlOiB7IHVuaXQ6ICJiYWp0b2puIiwgdmVyYjogImhhdmkiIH0sCiAgICBhcnJheTogeyB1bml0OiAiZWxlbWVudG9qbiIsIHZlcmI6ICJoYXZpIiB9LAogICAgc2V0OiB7IHVuaXQ6ICJlbGVtZW50b2puIiwgdmVyYjogImhhdmkiIH0KICB9OwogIGZ1bmN0aW9uIGdldFNpemluZyhvcmlnaW4pIHsKICAgIHJldHVybiBTaXphYmxlW29yaWdpbl0gPz8gbnVsbDsKICB9CiAgY29uc3QgTm91bnMgPSB7CiAgICByZWdleDogImVuaWdvIiwKICAgIGVtYWlsOiAicmV0YWRyZXNvIiwKICAgIHVybDogIlVSTCIsCiAgICBlbW9qaTogImVtb8SdaW8iLAogICAgdXVpZDogIlVVSUQiLAogICAgdXVpZHY0OiAiVVVJRHY0IiwKICAgIHV1aWR2NjogIlVVSUR2NiIsCiAgICBuYW5vaWQ6ICJuYW5vaWQiLAogICAgZ3VpZDogIkdVSUQiLAogICAgY3VpZDogImN1aWQiLAogICAgY3VpZDI6ICJjdWlkMiIsCiAgICB1bGlkOiAiVUxJRCIsCiAgICB4aWQ6ICJYSUQiLAogICAga3N1aWQ6ICJLU1VJRCIsCiAgICBkYXRldGltZTogIklTTy1kYXRvdGVtcG8iLAogICAgZGF0ZTogIklTTy1kYXRvIiwKICAgIHRpbWU6ICJJU08tdGVtcG8iLAogICAgZHVyYXRpb246ICJJU08tZGHFrXJvIiwKICAgIGlwdjQ6ICJJUHY0LWFkcmVzbyIsCiAgICBpcHY2OiAiSVB2Ni1hZHJlc28iLAogICAgY2lkcnY0OiAiSVB2NC1yYW5nbyIsCiAgICBjaWRydjY6ICJJUHY2LXJhbmdvIiwKICAgIGJhc2U2NDogIjY0LXVtZSBrb2RpdGEga2FyYWt0cmFybyIsCiAgICBiYXNlNjR1cmw6ICJVUkwtNjQtdW1lIGtvZGl0YSBrYXJha3RyYXJvIiwKICAgIGpzb25fc3RyaW5nOiAiSlNPTi1rYXJha3RyYXJvIiwKICAgIGUxNjQ6ICJFLjE2NC1ub21icm8iLAogICAgand0OiAiSldUIiwKICAgIHRlbXBsYXRlX2xpdGVyYWw6ICJlbmlnbyIKICB9OwogIHJldHVybiAoaXNzdWUyKSA9PiB7CiAgICBzd2l0Y2ggKGlzc3VlMi5jb2RlKSB7CiAgICAgIGNhc2UgImludmFsaWRfdHlwZSI6CiAgICAgICAgcmV0dXJuIGBOZXZhbGlkYSBlbmlnbzogYXRlbmRpxJ1pcyAke2lzc3VlMi5leHBlY3RlZH0sIHJpY2V2acSdaXMgJHtwYXJzZWRUeXBlMihpc3N1ZTIuaW5wdXQpfWA7CiAgICAgIGNhc2UgImludmFsaWRfdmFsdWUiOgogICAgICAgIGlmIChpc3N1ZTIudmFsdWVzLmxlbmd0aCA9PT0gMSkKICAgICAgICAgIHJldHVybiBgTmV2YWxpZGEgZW5pZ286IGF0ZW5kacSdaXMgJHtzdHJpbmdpZnlQcmltaXRpdmUoaXNzdWUyLnZhbHVlc1swXSl9YDsKICAgICAgICByZXR1cm4gYE5ldmFsaWRhIG9wY2lvOiBhdGVuZGnEnWlzIHVudSBlbCAke2pvaW5WYWx1ZXMoaXNzdWUyLnZhbHVlcywgInwiKX1gOwogICAgICBjYXNlICJ0b29fYmlnIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPD0iIDogIjwiOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKQogICAgICAgICAgcmV0dXJuIGBUcm8gZ3JhbmRhOiBhdGVuZGnEnWlzIGtlICR7aXNzdWUyLm9yaWdpbiA/PyAidmFsb3JvIn0gaGF2dSAke2Fkan0ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9ICR7c2l6aW5nLnVuaXQgPz8gImVsZW1lbnRvam4ifWA7CiAgICAgICAgcmV0dXJuIGBUcm8gZ3JhbmRhOiBhdGVuZGnEnWlzIGtlICR7aXNzdWUyLm9yaWdpbiA/PyAidmFsb3JvIn0gaGF2dSAke2Fkan0ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9YDsKICAgICAgfQogICAgICBjYXNlICJ0b29fc21hbGwiOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI+PSIgOiAiPiI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpIHsKICAgICAgICAgIHJldHVybiBgVHJvIG1hbGdyYW5kYTogYXRlbmRpxJ1pcyBrZSAke2lzc3VlMi5vcmlnaW59IGhhdnUgJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0fWA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBgVHJvIG1hbGdyYW5kYTogYXRlbmRpxJ1pcyBrZSAke2lzc3VlMi5vcmlnaW59IGVzdHUgJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfWA7CiAgICAgIH0KICAgICAgY2FzZSAiaW52YWxpZF9mb3JtYXQiOiB7CiAgICAgICAgY29uc3QgX2lzc3VlID0gaXNzdWUyOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAic3RhcnRzX3dpdGgiKQogICAgICAgICAgcmV0dXJuIGBOZXZhbGlkYSBrYXJha3RyYXJvOiBkZXZhcyBrb21lbmNpxJ1pIHBlciAiJHtfaXNzdWUucHJlZml4fSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiZW5kc193aXRoIikKICAgICAgICAgIHJldHVybiBgTmV2YWxpZGEga2FyYWt0cmFybzogZGV2YXMgZmluacSdaSBwZXIgIiR7X2lzc3VlLnN1ZmZpeH0iYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImluY2x1ZGVzIikKICAgICAgICAgIHJldHVybiBgTmV2YWxpZGEga2FyYWt0cmFybzogZGV2YXMgaW5rbHV6aXZpICIke19pc3N1ZS5pbmNsdWRlc30iYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInJlZ2V4IikKICAgICAgICAgIHJldHVybiBgTmV2YWxpZGEga2FyYWt0cmFybzogZGV2YXMga29uZ3J1aSBrdW4gbGEgbW9kZWxvICR7X2lzc3VlLnBhdHRlcm59YDsKICAgICAgICByZXR1cm4gYE5ldmFsaWRhICR7Tm91bnNbX2lzc3VlLmZvcm1hdF0gPz8gaXNzdWUyLmZvcm1hdH1gOwogICAgICB9CiAgICAgIGNhc2UgIm5vdF9tdWx0aXBsZV9vZiI6CiAgICAgICAgcmV0dXJuIGBOZXZhbGlkYSBub21icm86IGRldmFzIGVzdGkgb2JsbyBkZSAke2lzc3VlMi5kaXZpc29yfWA7CiAgICAgIGNhc2UgInVucmVjb2duaXplZF9rZXlzIjoKICAgICAgICByZXR1cm4gYE5la29uYXRhJHtpc3N1ZTIua2V5cy5sZW5ndGggPiAxID8gImoiIDogIiJ9IMWdbG9zaWxvJHtpc3N1ZTIua2V5cy5sZW5ndGggPiAxID8gImoiIDogIiJ9OiAke2pvaW5WYWx1ZXMoaXNzdWUyLmtleXMsICIsICIpfWA7CiAgICAgIGNhc2UgImludmFsaWRfa2V5IjoKICAgICAgICByZXR1cm4gYE5ldmFsaWRhIMWdbG9zaWxvIGVuICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBjYXNlICJpbnZhbGlkX3VuaW9uIjoKICAgICAgICByZXR1cm4gIk5ldmFsaWRhIGVuaWdvIjsKICAgICAgY2FzZSAiaW52YWxpZF9lbGVtZW50IjoKICAgICAgICByZXR1cm4gYE5ldmFsaWRhIHZhbG9ybyBlbiAke2lzc3VlMi5vcmlnaW59YDsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gYE5ldmFsaWRhIGVuaWdvYDsKICAgIH0KICB9Owp9OwpmdW5jdGlvbiBlb19kZWZhdWx0KCkgewogIHJldHVybiB7CiAgICBsb2NhbGVFcnJvcjogZXJyb3I5KCkKICB9Owp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2xvY2FsZXMvZXMuanMKdmFyIGVycm9yMTAgPSAoKSA9PiB7CiAgY29uc3QgU2l6YWJsZSA9IHsKICAgIHN0cmluZzogeyB1bml0OiAiY2FyYWN0ZXJlcyIsIHZlcmI6ICJ0ZW5lciIgfSwKICAgIGZpbGU6IHsgdW5pdDogImJ5dGVzIiwgdmVyYjogInRlbmVyIiB9LAogICAgYXJyYXk6IHsgdW5pdDogImVsZW1lbnRvcyIsIHZlcmI6ICJ0ZW5lciIgfSwKICAgIHNldDogeyB1bml0OiAiZWxlbWVudG9zIiwgdmVyYjogInRlbmVyIiB9CiAgfTsKICBjb25zdCBUeXBlTmFtZXMgPSB7CiAgICBzdHJpbmc6ICJ0ZXh0byIsCiAgICBudW1iZXI6ICJuw7ptZXJvIiwKICAgIGJvb2xlYW46ICJib29sZWFubyIsCiAgICBhcnJheTogImFycmVnbG8iLAogICAgb2JqZWN0OiAib2JqZXRvIiwKICAgIHNldDogImNvbmp1bnRvIiwKICAgIGZpbGU6ICJhcmNoaXZvIiwKICAgIGRhdGU6ICJmZWNoYSIsCiAgICBiaWdpbnQ6ICJuw7ptZXJvIGdyYW5kZSIsCiAgICBzeW1ib2w6ICJzw61tYm9sbyIsCiAgICB1bmRlZmluZWQ6ICJpbmRlZmluaWRvIiwKICAgIG51bGw6ICJudWxvIiwKICAgIGZ1bmN0aW9uOiAiZnVuY2nDs24iLAogICAgbWFwOiAibWFwYSIsCiAgICByZWNvcmQ6ICJyZWdpc3RybyIsCiAgICB0dXBsZTogInR1cGxhIiwKICAgIGVudW06ICJlbnVtZXJhY2nDs24iLAogICAgdW5pb246ICJ1bmnDs24iLAogICAgbGl0ZXJhbDogImxpdGVyYWwiLAogICAgcHJvbWlzZTogInByb21lc2EiLAogICAgdm9pZDogInZhY8OtbyIsCiAgICBuZXZlcjogIm51bmNhIiwKICAgIHVua25vd246ICJkZXNjb25vY2lkbyIsCiAgICBhbnk6ICJjdWFscXVpZXJhIgogIH07CiAgZnVuY3Rpb24gZ2V0U2l6aW5nKG9yaWdpbikgewogICAgcmV0dXJuIFNpemFibGVbb3JpZ2luXSA/PyBudWxsOwogIH0KICBmdW5jdGlvbiBnZXRUeXBlTmFtZSh0eXBlKSB7CiAgICByZXR1cm4gVHlwZU5hbWVzW3R5cGVdID8/IHR5cGU7CiAgfQogIGNvbnN0IHBhcnNlZFR5cGU3ID0gKGRhdGEpID0+IHsKICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTsKICAgIHN3aXRjaCAodCkgewogICAgICBjYXNlICJudW1iZXIiOiB7CiAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/ICJOYU4iIDogIm51bWJlciI7CiAgICAgIH0KICAgICAgY2FzZSAib2JqZWN0IjogewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgICAgICByZXR1cm4gImFycmF5IjsKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHsKICAgICAgICAgIHJldHVybiAibnVsbCI7CiAgICAgICAgfQogICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZGF0YSkgIT09IE9iamVjdC5wcm90b3R5cGUpIHsKICAgICAgICAgIHJldHVybiBkYXRhLmNvbnN0cnVjdG9yLm5hbWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiAib2JqZWN0IjsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHQ7CiAgfTsKICBjb25zdCBOb3VucyA9IHsKICAgIHJlZ2V4OiAiZW50cmFkYSIsCiAgICBlbWFpbDogImRpcmVjY2nDs24gZGUgY29ycmVvIGVsZWN0csOzbmljbyIsCiAgICB1cmw6ICJVUkwiLAogICAgZW1vamk6ICJlbW9qaSIsCiAgICB1dWlkOiAiVVVJRCIsCiAgICB1dWlkdjQ6ICJVVUlEdjQiLAogICAgdXVpZHY2OiAiVVVJRHY2IiwKICAgIG5hbm9pZDogIm5hbm9pZCIsCiAgICBndWlkOiAiR1VJRCIsCiAgICBjdWlkOiAiY3VpZCIsCiAgICBjdWlkMjogImN1aWQyIiwKICAgIHVsaWQ6ICJVTElEIiwKICAgIHhpZDogIlhJRCIsCiAgICBrc3VpZDogIktTVUlEIiwKICAgIGRhdGV0aW1lOiAiZmVjaGEgeSBob3JhIElTTyIsCiAgICBkYXRlOiAiZmVjaGEgSVNPIiwKICAgIHRpbWU6ICJob3JhIElTTyIsCiAgICBkdXJhdGlvbjogImR1cmFjacOzbiBJU08iLAogICAgaXB2NDogImRpcmVjY2nDs24gSVB2NCIsCiAgICBpcHY2OiAiZGlyZWNjacOzbiBJUHY2IiwKICAgIGNpZHJ2NDogInJhbmdvIElQdjQiLAogICAgY2lkcnY2OiAicmFuZ28gSVB2NiIsCiAgICBiYXNlNjQ6ICJjYWRlbmEgY29kaWZpY2FkYSBlbiBiYXNlNjQiLAogICAgYmFzZTY0dXJsOiAiVVJMIGNvZGlmaWNhZGEgZW4gYmFzZTY0IiwKICAgIGpzb25fc3RyaW5nOiAiY2FkZW5hIEpTT04iLAogICAgZTE2NDogIm7Dum1lcm8gRS4xNjQiLAogICAgand0OiAiSldUIiwKICAgIHRlbXBsYXRlX2xpdGVyYWw6ICJlbnRyYWRhIgogIH07CiAgcmV0dXJuIChpc3N1ZTIpID0+IHsKICAgIHN3aXRjaCAoaXNzdWUyLmNvZGUpIHsKICAgICAgY2FzZSAiaW52YWxpZF90eXBlIjoKICAgICAgICByZXR1cm4gYEVudHJhZGEgaW52w6FsaWRhOiBzZSBlc3BlcmFiYSAke2dldFR5cGVOYW1lKGlzc3VlMi5leHBlY3RlZCl9LCByZWNpYmlkbyAke2dldFR5cGVOYW1lKHBhcnNlZFR5cGU3KGlzc3VlMi5pbnB1dCkpfWA7CiAgICAgIC8vIHJldHVybiBgRW50cmFkYSBpbnbDoWxpZGE6IHNlIGVzcGVyYWJhICR7aXNzdWUuZXhwZWN0ZWR9LCByZWNpYmlkbyAke3V0aWwuZ2V0UGFyc2VkVHlwZShpc3N1ZS5pbnB1dCl9YDsKICAgICAgY2FzZSAiaW52YWxpZF92YWx1ZSI6CiAgICAgICAgaWYgKGlzc3VlMi52YWx1ZXMubGVuZ3RoID09PSAxKQogICAgICAgICAgcmV0dXJuIGBFbnRyYWRhIGludsOhbGlkYTogc2UgZXNwZXJhYmEgJHtzdHJpbmdpZnlQcmltaXRpdmUoaXNzdWUyLnZhbHVlc1swXSl9YDsKICAgICAgICByZXR1cm4gYE9wY2nDs24gaW52w6FsaWRhOiBzZSBlc3BlcmFiYSB1bmEgZGUgJHtqb2luVmFsdWVzKGlzc3VlMi52YWx1ZXMsICJ8Iil9YDsKICAgICAgY2FzZSAidG9vX2JpZyI6IHsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIjw9IiA6ICI8IjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgY29uc3Qgb3JpZ2luID0gZ2V0VHlwZU5hbWUoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykKICAgICAgICAgIHJldHVybiBgRGVtYXNpYWRvIGdyYW5kZTogc2UgZXNwZXJhYmEgcXVlICR7b3JpZ2luID8/ICJ2YWxvciJ9IHR1dmllcmEgJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0ID8/ICJlbGVtZW50b3MifWA7CiAgICAgICAgcmV0dXJuIGBEZW1hc2lhZG8gZ3JhbmRlOiBzZSBlc3BlcmFiYSBxdWUgJHtvcmlnaW4gPz8gInZhbG9yIn0gZnVlcmEgJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfWA7CiAgICAgIH0KICAgICAgY2FzZSAidG9vX3NtYWxsIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPj0iIDogIj4iOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBjb25zdCBvcmlnaW4gPSBnZXRUeXBlTmFtZShpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKSB7CiAgICAgICAgICByZXR1cm4gYERlbWFzaWFkbyBwZXF1ZcOxbzogc2UgZXNwZXJhYmEgcXVlICR7b3JpZ2lufSB0dXZpZXJhICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdH1gOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYERlbWFzaWFkbyBwZXF1ZcOxbzogc2UgZXNwZXJhYmEgcXVlICR7b3JpZ2lufSBmdWVyYSAke2Fkan0ke2lzc3VlMi5taW5pbXVtLnRvU3RyaW5nKCl9YDsKICAgICAgfQogICAgICBjYXNlICJpbnZhbGlkX2Zvcm1hdCI6IHsKICAgICAgICBjb25zdCBfaXNzdWUgPSBpc3N1ZTI7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJzdGFydHNfd2l0aCIpCiAgICAgICAgICByZXR1cm4gYENhZGVuYSBpbnbDoWxpZGE6IGRlYmUgY29tZW56YXIgY29uICIke19pc3N1ZS5wcmVmaXh9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJlbmRzX3dpdGgiKQogICAgICAgICAgcmV0dXJuIGBDYWRlbmEgaW52w6FsaWRhOiBkZWJlIHRlcm1pbmFyIGVuICIke19pc3N1ZS5zdWZmaXh9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJpbmNsdWRlcyIpCiAgICAgICAgICByZXR1cm4gYENhZGVuYSBpbnbDoWxpZGE6IGRlYmUgaW5jbHVpciAiJHtfaXNzdWUuaW5jbHVkZXN9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJyZWdleCIpCiAgICAgICAgICByZXR1cm4gYENhZGVuYSBpbnbDoWxpZGE6IGRlYmUgY29pbmNpZGlyIGNvbiBlbCBwYXRyw7NuICR7X2lzc3VlLnBhdHRlcm59YDsKICAgICAgICByZXR1cm4gYEludsOhbGlkbyAke05vdW5zW19pc3N1ZS5mb3JtYXRdID8/IGlzc3VlMi5mb3JtYXR9YDsKICAgICAgfQogICAgICBjYXNlICJub3RfbXVsdGlwbGVfb2YiOgogICAgICAgIHJldHVybiBgTsO6bWVybyBpbnbDoWxpZG86IGRlYmUgc2VyIG3Dumx0aXBsbyBkZSAke2lzc3VlMi5kaXZpc29yfWA7CiAgICAgIGNhc2UgInVucmVjb2duaXplZF9rZXlzIjoKICAgICAgICByZXR1cm4gYExsYXZlJHtpc3N1ZTIua2V5cy5sZW5ndGggPiAxID8gInMiIDogIiJ9IGRlc2Nvbm9jaWRhJHtpc3N1ZTIua2V5cy5sZW5ndGggPiAxID8gInMiIDogIiJ9OiAke2pvaW5WYWx1ZXMoaXNzdWUyLmtleXMsICIsICIpfWA7CiAgICAgIGNhc2UgImludmFsaWRfa2V5IjoKICAgICAgICByZXR1cm4gYExsYXZlIGludsOhbGlkYSBlbiAke2dldFR5cGVOYW1lKGlzc3VlMi5vcmlnaW4pfWA7CiAgICAgIGNhc2UgImludmFsaWRfdW5pb24iOgogICAgICAgIHJldHVybiAiRW50cmFkYSBpbnbDoWxpZGEiOwogICAgICBjYXNlICJpbnZhbGlkX2VsZW1lbnQiOgogICAgICAgIHJldHVybiBgVmFsb3IgaW52w6FsaWRvIGVuICR7Z2V0VHlwZU5hbWUoaXNzdWUyLm9yaWdpbil9YDsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gYEVudHJhZGEgaW52w6FsaWRhYDsKICAgIH0KICB9Owp9OwpmdW5jdGlvbiBlc19kZWZhdWx0KCkgewogIHJldHVybiB7CiAgICBsb2NhbGVFcnJvcjogZXJyb3IxMCgpCiAgfTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9sb2NhbGVzL2ZhLmpzCnZhciBlcnJvcjExID0gKCkgPT4gewogIGNvbnN0IFNpemFibGUgPSB7CiAgICBzdHJpbmc6IHsgdW5pdDogItqp2KfYsdin2qnYqtixIiwgdmVyYjogItiv2KfYtNiq2Ycg2KjYp9i02K8iIH0sCiAgICBmaWxlOiB7IHVuaXQ6ICLYqNin24zYqiIsIHZlcmI6ICLYr9in2LTYqtmHINio2KfYtNivIiB9LAogICAgYXJyYXk6IHsgdW5pdDogItii24zYqtmFIiwgdmVyYjogItiv2KfYtNiq2Ycg2KjYp9i02K8iIH0sCiAgICBzZXQ6IHsgdW5pdDogItii24zYqtmFIiwgdmVyYjogItiv2KfYtNiq2Ycg2KjYp9i02K8iIH0KICB9OwogIGZ1bmN0aW9uIGdldFNpemluZyhvcmlnaW4pIHsKICAgIHJldHVybiBTaXphYmxlW29yaWdpbl0gPz8gbnVsbDsKICB9CiAgY29uc3QgcGFyc2VkVHlwZTcgPSAoZGF0YSkgPT4gewogICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhOwogICAgc3dpdGNoICh0KSB7CiAgICAgIGNhc2UgIm51bWJlciI6IHsKICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gIk5hTiIgOiAi2LnYr9ivIjsKICAgICAgfQogICAgICBjYXNlICJvYmplY3QiOiB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHsKICAgICAgICAgIHJldHVybiAi2KLYsdin24zZhyI7CiAgICAgICAgfQogICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gIm51bGwiOwogICAgICAgIH0KICAgICAgICBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGRhdGEpICE9PSBPYmplY3QucHJvdG90eXBlICYmIGRhdGEuY29uc3RydWN0b3IpIHsKICAgICAgICAgIHJldHVybiBkYXRhLmNvbnN0cnVjdG9yLm5hbWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdDsKICB9OwogIGNvbnN0IE5vdW5zID0gewogICAgcmVnZXg6ICLZiNix2YjYr9uMIiwKICAgIGVtYWlsOiAi2KLYr9ix2LMg2KfbjNmF24zZhCIsCiAgICB1cmw6ICJVUkwiLAogICAgZW1vamk6ICLYp9uM2YXZiNis24wiLAogICAgdXVpZDogIlVVSUQiLAogICAgdXVpZHY0OiAiVVVJRHY0IiwKICAgIHV1aWR2NjogIlVVSUR2NiIsCiAgICBuYW5vaWQ6ICJuYW5vaWQiLAogICAgZ3VpZDogIkdVSUQiLAogICAgY3VpZDogImN1aWQiLAogICAgY3VpZDI6ICJjdWlkMiIsCiAgICB1bGlkOiAiVUxJRCIsCiAgICB4aWQ6ICJYSUQiLAogICAga3N1aWQ6ICJLU1VJRCIsCiAgICBkYXRldGltZTogItiq2KfYsduM2K4g2Ygg2LLZhdin2YYg2KfbjNiy2YgiLAogICAgZGF0ZTogItiq2KfYsduM2K4g2KfbjNiy2YgiLAogICAgdGltZTogItiy2YXYp9mGINin24zYstmIIiwKICAgIGR1cmF0aW9uOiAi2YXYr9iqINiy2YXYp9mGINin24zYstmIIiwKICAgIGlwdjQ6ICJJUHY0INii2K/YsdizIiwKICAgIGlwdjY6ICJJUHY2INii2K/YsdizIiwKICAgIGNpZHJ2NDogIklQdjQg2K/Yp9mF2YbZhyIsCiAgICBjaWRydjY6ICJJUHY2INiv2KfZhdmG2YciLAogICAgYmFzZTY0OiAiYmFzZTY0LWVuY29kZWQg2LHYtNiq2YciLAogICAgYmFzZTY0dXJsOiAiYmFzZTY0dXJsLWVuY29kZWQg2LHYtNiq2YciLAogICAganNvbl9zdHJpbmc6ICJKU09OINix2LTYqtmHIiwKICAgIGUxNjQ6ICJFLjE2NCDYudiv2K8iLAogICAgand0OiAiSldUIiwKICAgIHRlbXBsYXRlX2xpdGVyYWw6ICLZiNix2YjYr9uMIgogIH07CiAgcmV0dXJuIChpc3N1ZTIpID0+IHsKICAgIHN3aXRjaCAoaXNzdWUyLmNvZGUpIHsKICAgICAgY2FzZSAiaW52YWxpZF90eXBlIjoKICAgICAgICByZXR1cm4gYNmI2LHZiNiv24wg2YbYp9mF2LnYqtio2LE6INmF24zigIzYqNin24zYs9iqICR7aXNzdWUyLmV4cGVjdGVkfSDZhduM4oCM2KjZiNiv2IwgJHtwYXJzZWRUeXBlNyhpc3N1ZTIuaW5wdXQpfSDYr9ix24zYp9mB2Kog2LTYr2A7CiAgICAgIGNhc2UgImludmFsaWRfdmFsdWUiOgogICAgICAgIGlmIChpc3N1ZTIudmFsdWVzLmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgcmV0dXJuIGDZiNix2YjYr9uMINmG2KfZhdi52KrYqNixOiDZhduM4oCM2KjYp9uM2LPYqiAke3N0cmluZ2lmeVByaW1pdGl2ZShpc3N1ZTIudmFsdWVzWzBdKX0g2YXbjOKAjNio2YjYr2A7CiAgICAgICAgfQogICAgICAgIHJldHVybiBg2q/YstuM2YbZhyDZhtin2YXYudiq2KjYsTog2YXbjOKAjNio2KfbjNiz2Kog24zaqduMINin2LIgJHtqb2luVmFsdWVzKGlzc3VlMi52YWx1ZXMsICJ8Iil9INmF24zigIzYqNmI2K9gOwogICAgICBjYXNlICJ0b29fYmlnIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPD0iIDogIjwiOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKSB7CiAgICAgICAgICByZXR1cm4gYNiu24zZhNuMINio2LLYsdqvOiAke2lzc3VlMi5vcmlnaW4gPz8gItmF2YLYr9in2LEifSDYqNin24zYryAke2Fkan0ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9ICR7c2l6aW5nLnVuaXQgPz8gIti52YbYtdixIn0g2KjYp9i02K9gOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYNiu24zZhNuMINio2LLYsdqvOiAke2lzc3VlMi5vcmlnaW4gPz8gItmF2YLYr9in2LEifSDYqNin24zYryAke2Fkan0ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9INio2KfYtNivYDsKICAgICAgfQogICAgICBjYXNlICJ0b29fc21hbGwiOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI+PSIgOiAiPiI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpIHsKICAgICAgICAgIHJldHVybiBg2K7bjNmE24wg2qnZiNqG2qk6ICR7aXNzdWUyLm9yaWdpbn0g2KjYp9uM2K8gJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0fSDYqNin2LTYr2A7CiAgICAgICAgfQogICAgICAgIHJldHVybiBg2K7bjNmE24wg2qnZiNqG2qk6ICR7aXNzdWUyLm9yaWdpbn0g2KjYp9uM2K8gJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSDYqNin2LTYr2A7CiAgICAgIH0KICAgICAgY2FzZSAiaW52YWxpZF9mb3JtYXQiOiB7CiAgICAgICAgY29uc3QgX2lzc3VlID0gaXNzdWUyOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAic3RhcnRzX3dpdGgiKSB7CiAgICAgICAgICByZXR1cm4gYNix2LTYqtmHINmG2KfZhdi52KrYqNixOiDYqNin24zYryDYqNinICIke19pc3N1ZS5wcmVmaXh9IiDYtNix2YjYuSDYtNmI2K9gOwogICAgICAgIH0KICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImVuZHNfd2l0aCIpIHsKICAgICAgICAgIHJldHVybiBg2LHYtNiq2Ycg2YbYp9mF2LnYqtio2LE6INio2KfbjNivINio2KcgIiR7X2lzc3VlLnN1ZmZpeH0iINiq2YXYp9mFINi02YjYr2A7CiAgICAgICAgfQogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiaW5jbHVkZXMiKSB7CiAgICAgICAgICByZXR1cm4gYNix2LTYqtmHINmG2KfZhdi52KrYqNixOiDYqNin24zYryDYtNin2YXZhCAiJHtfaXNzdWUuaW5jbHVkZXN9IiDYqNin2LTYr2A7CiAgICAgICAgfQogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAicmVnZXgiKSB7CiAgICAgICAgICByZXR1cm4gYNix2LTYqtmHINmG2KfZhdi52KrYqNixOiDYqNin24zYryDYqNinINin2YTar9mI24wgJHtfaXNzdWUucGF0dGVybn0g2YXYt9in2KjZgtiqINiv2KfYtNiq2Ycg2KjYp9i02K9gOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYCR7Tm91bnNbX2lzc3VlLmZvcm1hdF0gPz8gaXNzdWUyLmZvcm1hdH0g2YbYp9mF2LnYqtio2LFgOwogICAgICB9CiAgICAgIGNhc2UgIm5vdF9tdWx0aXBsZV9vZiI6CiAgICAgICAgcmV0dXJuIGDYudiv2K8g2YbYp9mF2LnYqtio2LE6INio2KfbjNivINmF2LbYsdioICR7aXNzdWUyLmRpdmlzb3J9INio2KfYtNivYDsKICAgICAgY2FzZSAidW5yZWNvZ25pemVkX2tleXMiOgogICAgICAgIHJldHVybiBg2qnZhNuM2K8ke2lzc3VlMi5rZXlzLmxlbmd0aCA+IDEgPyAi2YfYp9uMIiA6ICIifSDZhtin2LTZhtin2LM6ICR7am9pblZhbHVlcyhpc3N1ZTIua2V5cywgIiwgIil9YDsKICAgICAgY2FzZSAiaW52YWxpZF9rZXkiOgogICAgICAgIHJldHVybiBg2qnZhNuM2K8g2YbYp9i02YbYp9izINiv2LEgJHtpc3N1ZTIub3JpZ2lufWA7CiAgICAgIGNhc2UgImludmFsaWRfdW5pb24iOgogICAgICAgIHJldHVybiBg2YjYsdmI2K/bjCDZhtin2YXYudiq2KjYsWA7CiAgICAgIGNhc2UgImludmFsaWRfZWxlbWVudCI6CiAgICAgICAgcmV0dXJuIGDZhdmC2K/Yp9ixINmG2KfZhdi52KrYqNixINiv2LEgJHtpc3N1ZTIub3JpZ2lufWA7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIGDZiNix2YjYr9uMINmG2KfZhdi52KrYqNixYDsKICAgIH0KICB9Owp9OwpmdW5jdGlvbiBmYV9kZWZhdWx0KCkgewogIHJldHVybiB7CiAgICBsb2NhbGVFcnJvcjogZXJyb3IxMSgpCiAgfTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9sb2NhbGVzL2ZpLmpzCnZhciBlcnJvcjEyID0gKCkgPT4gewogIGNvbnN0IFNpemFibGUgPSB7CiAgICBzdHJpbmc6IHsgdW5pdDogIm1lcmtracOkIiwgc3ViamVjdDogIm1lcmtraWpvbm9uIiB9LAogICAgZmlsZTogeyB1bml0OiAidGF2dWEiLCBzdWJqZWN0OiAidGllZG9zdG9uIiB9LAogICAgYXJyYXk6IHsgdW5pdDogImFsa2lvdGEiLCBzdWJqZWN0OiAibGlzdGFuIiB9LAogICAgc2V0OiB7IHVuaXQ6ICJhbGtpb3RhIiwgc3ViamVjdDogImpvdWtvbiIgfSwKICAgIG51bWJlcjogeyB1bml0OiAiIiwgc3ViamVjdDogImx1dnVuIiB9LAogICAgYmlnaW50OiB7IHVuaXQ6ICIiLCBzdWJqZWN0OiAic3V1cmVuIGtva29uYWlzbHV2dW4iIH0sCiAgICBpbnQ6IHsgdW5pdDogIiIsIHN1YmplY3Q6ICJrb2tvbmFpc2x1dnVuIiB9LAogICAgZGF0ZTogeyB1bml0OiAiIiwgc3ViamVjdDogInDDpGl2w6Rtw6TDpHLDpG4iIH0KICB9OwogIGZ1bmN0aW9uIGdldFNpemluZyhvcmlnaW4pIHsKICAgIHJldHVybiBTaXphYmxlW29yaWdpbl0gPz8gbnVsbDsKICB9CiAgY29uc3QgcGFyc2VkVHlwZTcgPSAoZGF0YSkgPT4gewogICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhOwogICAgc3dpdGNoICh0KSB7CiAgICAgIGNhc2UgIm51bWJlciI6IHsKICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gIk5hTiIgOiAibnVtYmVyIjsKICAgICAgfQogICAgICBjYXNlICJvYmplY3QiOiB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHsKICAgICAgICAgIHJldHVybiAiYXJyYXkiOwogICAgICAgIH0KICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuICJudWxsIjsKICAgICAgICB9CiAgICAgICAgaWYgKE9iamVjdC5nZXRQcm90b3R5cGVPZihkYXRhKSAhPT0gT2JqZWN0LnByb3RvdHlwZSAmJiBkYXRhLmNvbnN0cnVjdG9yKSB7CiAgICAgICAgICByZXR1cm4gZGF0YS5jb25zdHJ1Y3Rvci5uYW1lOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHQ7CiAgfTsKICBjb25zdCBOb3VucyA9IHsKICAgIHJlZ2V4OiAic8Okw6RubsO2bGxpbmVuIGxhdXNla2UiLAogICAgZW1haWw6ICJzw6Roa8O2cG9zdGlvc29pdGUiLAogICAgdXJsOiAiVVJMLW9zb2l0ZSIsCiAgICBlbW9qaTogImVtb2ppIiwKICAgIHV1aWQ6ICJVVUlEIiwKICAgIHV1aWR2NDogIlVVSUR2NCIsCiAgICB1dWlkdjY6ICJVVUlEdjYiLAogICAgbmFub2lkOiAibmFub2lkIiwKICAgIGd1aWQ6ICJHVUlEIiwKICAgIGN1aWQ6ICJjdWlkIiwKICAgIGN1aWQyOiAiY3VpZDIiLAogICAgdWxpZDogIlVMSUQiLAogICAgeGlkOiAiWElEIiwKICAgIGtzdWlkOiAiS1NVSUQiLAogICAgZGF0ZXRpbWU6ICJJU08tYWlrYWxlaW1hIiwKICAgIGRhdGU6ICJJU08tcMOkaXbDpG3DpMOkcsOkIiwKICAgIHRpbWU6ICJJU08tYWlrYSIsCiAgICBkdXJhdGlvbjogIklTTy1rZXN0byIsCiAgICBpcHY0OiAiSVB2NC1vc29pdGUiLAogICAgaXB2NjogIklQdjYtb3NvaXRlIiwKICAgIGNpZHJ2NDogIklQdjQtYWx1ZSIsCiAgICBjaWRydjY6ICJJUHY2LWFsdWUiLAogICAgYmFzZTY0OiAiYmFzZTY0LWtvb2RhdHR1IG1lcmtraWpvbm8iLAogICAgYmFzZTY0dXJsOiAiYmFzZTY0dXJsLWtvb2RhdHR1IG1lcmtraWpvbm8iLAogICAganNvbl9zdHJpbmc6ICJKU09OLW1lcmtraWpvbm8iLAogICAgZTE2NDogIkUuMTY0LWx1a3UiLAogICAgand0OiAiSldUIiwKICAgIHRlbXBsYXRlX2xpdGVyYWw6ICJ0ZW1wbGFhdHRpbWVya2tpam9ubyIKICB9OwogIHJldHVybiAoaXNzdWUyKSA9PiB7CiAgICBzd2l0Y2ggKGlzc3VlMi5jb2RlKSB7CiAgICAgIGNhc2UgImludmFsaWRfdHlwZSI6CiAgICAgICAgcmV0dXJuIGBWaXJoZWVsbGluZW4gdHl5cHBpOiBvZG90ZXR0aWluICR7aXNzdWUyLmV4cGVjdGVkfSwgb2xpICR7cGFyc2VkVHlwZTcoaXNzdWUyLmlucHV0KX1gOwogICAgICBjYXNlICJpbnZhbGlkX3ZhbHVlIjoKICAgICAgICBpZiAoaXNzdWUyLnZhbHVlcy5sZW5ndGggPT09IDEpCiAgICAgICAgICByZXR1cm4gYFZpcmhlZWxsaW5lbiBzecO2dGU6IHTDpHl0eXkgb2xsYSAke3N0cmluZ2lmeVByaW1pdGl2ZShpc3N1ZTIudmFsdWVzWzBdKX1gOwogICAgICAgIHJldHVybiBgVmlyaGVlbGxpbmVuIHZhbGludGE6IHTDpHl0eXkgb2xsYSB5a3NpIHNldXJhYXZpc3RhOiAke2pvaW5WYWx1ZXMoaXNzdWUyLnZhbHVlcywgInwiKX1gOwogICAgICBjYXNlICJ0b29fYmlnIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPD0iIDogIjwiOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKSB7CiAgICAgICAgICByZXR1cm4gYExpaWFuIHN1dXJpOiAke3NpemluZy5zdWJqZWN0fSB0w6R5dHl5IG9sbGEgJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0fWAudHJpbSgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYExpaWFuIHN1dXJpOiBhcnZvbiB0w6R5dHl5IG9sbGEgJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfWA7CiAgICAgIH0KICAgICAgY2FzZSAidG9vX3NtYWxsIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPj0iIDogIj4iOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKSB7CiAgICAgICAgICByZXR1cm4gYExpaWFuIHBpZW5pOiAke3NpemluZy5zdWJqZWN0fSB0w6R5dHl5IG9sbGEgJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0fWAudHJpbSgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYExpaWFuIHBpZW5pOiBhcnZvbiB0w6R5dHl5IG9sbGEgJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfWA7CiAgICAgIH0KICAgICAgY2FzZSAiaW52YWxpZF9mb3JtYXQiOiB7CiAgICAgICAgY29uc3QgX2lzc3VlID0gaXNzdWUyOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAic3RhcnRzX3dpdGgiKQogICAgICAgICAgcmV0dXJuIGBWaXJoZWVsbGluZW4gc3nDtnRlOiB0w6R5dHl5IGFsa2FhICIke19pc3N1ZS5wcmVmaXh9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJlbmRzX3dpdGgiKQogICAgICAgICAgcmV0dXJuIGBWaXJoZWVsbGluZW4gc3nDtnRlOiB0w6R5dHl5IGxvcHB1YSAiJHtfaXNzdWUuc3VmZml4fSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiaW5jbHVkZXMiKQogICAgICAgICAgcmV0dXJuIGBWaXJoZWVsbGluZW4gc3nDtnRlOiB0w6R5dHl5IHNpc8OkbHTDpMOkICIke19pc3N1ZS5pbmNsdWRlc30iYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInJlZ2V4IikgewogICAgICAgICAgcmV0dXJuIGBWaXJoZWVsbGluZW4gc3nDtnRlOiB0w6R5dHl5IHZhc3RhdGEgc8Okw6RubsO2bGxpc3TDpCBsYXVzZWtldHRhICR7X2lzc3VlLnBhdHRlcm59YDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGBWaXJoZWVsbGluZW4gJHtOb3Vuc1tfaXNzdWUuZm9ybWF0XSA/PyBpc3N1ZTIuZm9ybWF0fWA7CiAgICAgIH0KICAgICAgY2FzZSAibm90X211bHRpcGxlX29mIjoKICAgICAgICByZXR1cm4gYFZpcmhlZWxsaW5lbiBsdWt1OiB0w6R5dHl5IG9sbGEgbHV2dW4gJHtpc3N1ZTIuZGl2aXNvcn0gbW9uaWtlcnRhYDsKICAgICAgY2FzZSAidW5yZWNvZ25pemVkX2tleXMiOgogICAgICAgIHJldHVybiBgJHtpc3N1ZTIua2V5cy5sZW5ndGggPiAxID8gIlR1bnRlbWF0dG9tYXQgYXZhaW1ldCIgOiAiVHVudGVtYXRvbiBhdmFpbiJ9OiAke2pvaW5WYWx1ZXMoaXNzdWUyLmtleXMsICIsICIpfWA7CiAgICAgIGNhc2UgImludmFsaWRfa2V5IjoKICAgICAgICByZXR1cm4gIlZpcmhlZWxsaW5lbiBhdmFpbiB0aWV0dWVlc3NhIjsKICAgICAgY2FzZSAiaW52YWxpZF91bmlvbiI6CiAgICAgICAgcmV0dXJuICJWaXJoZWVsbGluZW4gdW5pb25pIjsKICAgICAgY2FzZSAiaW52YWxpZF9lbGVtZW50IjoKICAgICAgICByZXR1cm4gIlZpcmhlZWxsaW5lbiBhcnZvIGpvdWtvc3NhIjsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gYFZpcmhlZWxsaW5lbiBzecO2dGVgOwogICAgfQogIH07Cn07CmZ1bmN0aW9uIGZpX2RlZmF1bHQoKSB7CiAgcmV0dXJuIHsKICAgIGxvY2FsZUVycm9yOiBlcnJvcjEyKCkKICB9Owp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2xvY2FsZXMvZnIuanMKdmFyIGVycm9yMTMgPSAoKSA9PiB7CiAgY29uc3QgU2l6YWJsZSA9IHsKICAgIHN0cmluZzogeyB1bml0OiAiY2FyYWN0w6hyZXMiLCB2ZXJiOiAiYXZvaXIiIH0sCiAgICBmaWxlOiB7IHVuaXQ6ICJvY3RldHMiLCB2ZXJiOiAiYXZvaXIiIH0sCiAgICBhcnJheTogeyB1bml0OiAiw6lsw6ltZW50cyIsIHZlcmI6ICJhdm9pciIgfSwKICAgIHNldDogeyB1bml0OiAiw6lsw6ltZW50cyIsIHZlcmI6ICJhdm9pciIgfQogIH07CiAgZnVuY3Rpb24gZ2V0U2l6aW5nKG9yaWdpbikgewogICAgcmV0dXJuIFNpemFibGVbb3JpZ2luXSA/PyBudWxsOwogIH0KICBjb25zdCBwYXJzZWRUeXBlNyA9IChkYXRhKSA9PiB7CiAgICBjb25zdCB0ID0gdHlwZW9mIGRhdGE7CiAgICBzd2l0Y2ggKHQpIHsKICAgICAgY2FzZSAibnVtYmVyIjogewogICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0YSkgPyAiTmFOIiA6ICJub21icmUiOwogICAgICB9CiAgICAgIGNhc2UgIm9iamVjdCI6IHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkgewogICAgICAgICAgcmV0dXJuICJ0YWJsZWF1IjsKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHsKICAgICAgICAgIHJldHVybiAibnVsbCI7CiAgICAgICAgfQogICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZGF0YSkgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgZGF0YS5jb25zdHJ1Y3RvcikgewogICAgICAgICAgcmV0dXJuIGRhdGEuY29uc3RydWN0b3IubmFtZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0OwogIH07CiAgY29uc3QgTm91bnMgPSB7CiAgICByZWdleDogImVudHLDqWUiLAogICAgZW1haWw6ICJhZHJlc3NlIGUtbWFpbCIsCiAgICB1cmw6ICJVUkwiLAogICAgZW1vamk6ICJlbW9qaSIsCiAgICB1dWlkOiAiVVVJRCIsCiAgICB1dWlkdjQ6ICJVVUlEdjQiLAogICAgdXVpZHY2OiAiVVVJRHY2IiwKICAgIG5hbm9pZDogIm5hbm9pZCIsCiAgICBndWlkOiAiR1VJRCIsCiAgICBjdWlkOiAiY3VpZCIsCiAgICBjdWlkMjogImN1aWQyIiwKICAgIHVsaWQ6ICJVTElEIiwKICAgIHhpZDogIlhJRCIsCiAgICBrc3VpZDogIktTVUlEIiwKICAgIGRhdGV0aW1lOiAiZGF0ZSBldCBoZXVyZSBJU08iLAogICAgZGF0ZTogImRhdGUgSVNPIiwKICAgIHRpbWU6ICJoZXVyZSBJU08iLAogICAgZHVyYXRpb246ICJkdXLDqWUgSVNPIiwKICAgIGlwdjQ6ICJhZHJlc3NlIElQdjQiLAogICAgaXB2NjogImFkcmVzc2UgSVB2NiIsCiAgICBjaWRydjQ6ICJwbGFnZSBJUHY0IiwKICAgIGNpZHJ2NjogInBsYWdlIElQdjYiLAogICAgYmFzZTY0OiAiY2hhw65uZSBlbmNvZMOpZSBlbiBiYXNlNjQiLAogICAgYmFzZTY0dXJsOiAiY2hhw65uZSBlbmNvZMOpZSBlbiBiYXNlNjR1cmwiLAogICAganNvbl9zdHJpbmc6ICJjaGHDrm5lIEpTT04iLAogICAgZTE2NDogIm51bcOpcm8gRS4xNjQiLAogICAgand0OiAiSldUIiwKICAgIHRlbXBsYXRlX2xpdGVyYWw6ICJlbnRyw6llIgogIH07CiAgcmV0dXJuIChpc3N1ZTIpID0+IHsKICAgIHN3aXRjaCAoaXNzdWUyLmNvZGUpIHsKICAgICAgY2FzZSAiaW52YWxpZF90eXBlIjoKICAgICAgICByZXR1cm4gYEVudHLDqWUgaW52YWxpZGUgOiAke2lzc3VlMi5leHBlY3RlZH0gYXR0ZW5kdSwgJHtwYXJzZWRUeXBlNyhpc3N1ZTIuaW5wdXQpfSByZcOndWA7CiAgICAgIGNhc2UgImludmFsaWRfdmFsdWUiOgogICAgICAgIGlmIChpc3N1ZTIudmFsdWVzLmxlbmd0aCA9PT0gMSkKICAgICAgICAgIHJldHVybiBgRW50csOpZSBpbnZhbGlkZSA6ICR7c3RyaW5naWZ5UHJpbWl0aXZlKGlzc3VlMi52YWx1ZXNbMF0pfSBhdHRlbmR1YDsKICAgICAgICByZXR1cm4gYE9wdGlvbiBpbnZhbGlkZSA6IHVuZSB2YWxldXIgcGFybWkgJHtqb2luVmFsdWVzKGlzc3VlMi52YWx1ZXMsICJ8Iil9IGF0dGVuZHVlYDsKICAgICAgY2FzZSAidG9vX2JpZyI6IHsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIjw9IiA6ICI8IjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykKICAgICAgICAgIHJldHVybiBgVHJvcCBncmFuZCA6ICR7aXNzdWUyLm9yaWdpbiA/PyAidmFsZXVyIn0gZG9pdCAke3NpemluZy52ZXJifSAke2Fkan0ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9ICR7c2l6aW5nLnVuaXQgPz8gIsOpbMOpbWVudChzKSJ9YDsKICAgICAgICByZXR1cm4gYFRyb3AgZ3JhbmQgOiAke2lzc3VlMi5vcmlnaW4gPz8gInZhbGV1ciJ9IGRvaXQgw6p0cmUgJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfWA7CiAgICAgIH0KICAgICAgY2FzZSAidG9vX3NtYWxsIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPj0iIDogIj4iOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKSB7CiAgICAgICAgICByZXR1cm4gYFRyb3AgcGV0aXQgOiAke2lzc3VlMi5vcmlnaW59IGRvaXQgJHtzaXppbmcudmVyYn0gJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0fWA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBgVHJvcCBwZXRpdCA6ICR7aXNzdWUyLm9yaWdpbn0gZG9pdCDDqnRyZSAke2Fkan0ke2lzc3VlMi5taW5pbXVtLnRvU3RyaW5nKCl9YDsKICAgICAgfQogICAgICBjYXNlICJpbnZhbGlkX2Zvcm1hdCI6IHsKICAgICAgICBjb25zdCBfaXNzdWUgPSBpc3N1ZTI7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJzdGFydHNfd2l0aCIpCiAgICAgICAgICByZXR1cm4gYENoYcOubmUgaW52YWxpZGUgOiBkb2l0IGNvbW1lbmNlciBwYXIgIiR7X2lzc3VlLnByZWZpeH0iYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImVuZHNfd2l0aCIpCiAgICAgICAgICByZXR1cm4gYENoYcOubmUgaW52YWxpZGUgOiBkb2l0IHNlIHRlcm1pbmVyIHBhciAiJHtfaXNzdWUuc3VmZml4fSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiaW5jbHVkZXMiKQogICAgICAgICAgcmV0dXJuIGBDaGHDrm5lIGludmFsaWRlIDogZG9pdCBpbmNsdXJlICIke19pc3N1ZS5pbmNsdWRlc30iYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInJlZ2V4IikKICAgICAgICAgIHJldHVybiBgQ2hhw65uZSBpbnZhbGlkZSA6IGRvaXQgY29ycmVzcG9uZHJlIGF1IG1vZMOobGUgJHtfaXNzdWUucGF0dGVybn1gOwogICAgICAgIHJldHVybiBgJHtOb3Vuc1tfaXNzdWUuZm9ybWF0XSA/PyBpc3N1ZTIuZm9ybWF0fSBpbnZhbGlkZWA7CiAgICAgIH0KICAgICAgY2FzZSAibm90X211bHRpcGxlX29mIjoKICAgICAgICByZXR1cm4gYE5vbWJyZSBpbnZhbGlkZSA6IGRvaXQgw6p0cmUgdW4gbXVsdGlwbGUgZGUgJHtpc3N1ZTIuZGl2aXNvcn1gOwogICAgICBjYXNlICJ1bnJlY29nbml6ZWRfa2V5cyI6CiAgICAgICAgcmV0dXJuIGBDbMOpJHtpc3N1ZTIua2V5cy5sZW5ndGggPiAxID8gInMiIDogIiJ9IG5vbiByZWNvbm51ZSR7aXNzdWUyLmtleXMubGVuZ3RoID4gMSA/ICJzIiA6ICIifSA6ICR7am9pblZhbHVlcyhpc3N1ZTIua2V5cywgIiwgIil9YDsKICAgICAgY2FzZSAiaW52YWxpZF9rZXkiOgogICAgICAgIHJldHVybiBgQ2zDqSBpbnZhbGlkZSBkYW5zICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBjYXNlICJpbnZhbGlkX3VuaW9uIjoKICAgICAgICByZXR1cm4gIkVudHLDqWUgaW52YWxpZGUiOwogICAgICBjYXNlICJpbnZhbGlkX2VsZW1lbnQiOgogICAgICAgIHJldHVybiBgVmFsZXVyIGludmFsaWRlIGRhbnMgJHtpc3N1ZTIub3JpZ2lufWA7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIGBFbnRyw6llIGludmFsaWRlYDsKICAgIH0KICB9Owp9OwpmdW5jdGlvbiBmcl9kZWZhdWx0KCkgewogIHJldHVybiB7CiAgICBsb2NhbGVFcnJvcjogZXJyb3IxMygpCiAgfTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9sb2NhbGVzL2ZyLUNBLmpzCnZhciBlcnJvcjE0ID0gKCkgPT4gewogIGNvbnN0IFNpemFibGUgPSB7CiAgICBzdHJpbmc6IHsgdW5pdDogImNhcmFjdMOocmVzIiwgdmVyYjogImF2b2lyIiB9LAogICAgZmlsZTogeyB1bml0OiAib2N0ZXRzIiwgdmVyYjogImF2b2lyIiB9LAogICAgYXJyYXk6IHsgdW5pdDogIsOpbMOpbWVudHMiLCB2ZXJiOiAiYXZvaXIiIH0sCiAgICBzZXQ6IHsgdW5pdDogIsOpbMOpbWVudHMiLCB2ZXJiOiAiYXZvaXIiIH0KICB9OwogIGZ1bmN0aW9uIGdldFNpemluZyhvcmlnaW4pIHsKICAgIHJldHVybiBTaXphYmxlW29yaWdpbl0gPz8gbnVsbDsKICB9CiAgY29uc3QgcGFyc2VkVHlwZTcgPSAoZGF0YSkgPT4gewogICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhOwogICAgc3dpdGNoICh0KSB7CiAgICAgIGNhc2UgIm51bWJlciI6IHsKICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gIk5hTiIgOiAibnVtYmVyIjsKICAgICAgfQogICAgICBjYXNlICJvYmplY3QiOiB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHsKICAgICAgICAgIHJldHVybiAiYXJyYXkiOwogICAgICAgIH0KICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuICJudWxsIjsKICAgICAgICB9CiAgICAgICAgaWYgKE9iamVjdC5nZXRQcm90b3R5cGVPZihkYXRhKSAhPT0gT2JqZWN0LnByb3RvdHlwZSAmJiBkYXRhLmNvbnN0cnVjdG9yKSB7CiAgICAgICAgICByZXR1cm4gZGF0YS5jb25zdHJ1Y3Rvci5uYW1lOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHQ7CiAgfTsKICBjb25zdCBOb3VucyA9IHsKICAgIHJlZ2V4OiAiZW50csOpZSIsCiAgICBlbWFpbDogImFkcmVzc2UgY291cnJpZWwiLAogICAgdXJsOiAiVVJMIiwKICAgIGVtb2ppOiAiZW1vamkiLAogICAgdXVpZDogIlVVSUQiLAogICAgdXVpZHY0OiAiVVVJRHY0IiwKICAgIHV1aWR2NjogIlVVSUR2NiIsCiAgICBuYW5vaWQ6ICJuYW5vaWQiLAogICAgZ3VpZDogIkdVSUQiLAogICAgY3VpZDogImN1aWQiLAogICAgY3VpZDI6ICJjdWlkMiIsCiAgICB1bGlkOiAiVUxJRCIsCiAgICB4aWQ6ICJYSUQiLAogICAga3N1aWQ6ICJLU1VJRCIsCiAgICBkYXRldGltZTogImRhdGUtaGV1cmUgSVNPIiwKICAgIGRhdGU6ICJkYXRlIElTTyIsCiAgICB0aW1lOiAiaGV1cmUgSVNPIiwKICAgIGR1cmF0aW9uOiAiZHVyw6llIElTTyIsCiAgICBpcHY0OiAiYWRyZXNzZSBJUHY0IiwKICAgIGlwdjY6ICJhZHJlc3NlIElQdjYiLAogICAgY2lkcnY0OiAicGxhZ2UgSVB2NCIsCiAgICBjaWRydjY6ICJwbGFnZSBJUHY2IiwKICAgIGJhc2U2NDogImNoYcOubmUgZW5jb2TDqWUgZW4gYmFzZTY0IiwKICAgIGJhc2U2NHVybDogImNoYcOubmUgZW5jb2TDqWUgZW4gYmFzZTY0dXJsIiwKICAgIGpzb25fc3RyaW5nOiAiY2hhw65uZSBKU09OIiwKICAgIGUxNjQ6ICJudW3DqXJvIEUuMTY0IiwKICAgIGp3dDogIkpXVCIsCiAgICB0ZW1wbGF0ZV9saXRlcmFsOiAiZW50csOpZSIKICB9OwogIHJldHVybiAoaXNzdWUyKSA9PiB7CiAgICBzd2l0Y2ggKGlzc3VlMi5jb2RlKSB7CiAgICAgIGNhc2UgImludmFsaWRfdHlwZSI6CiAgICAgICAgcmV0dXJuIGBFbnRyw6llIGludmFsaWRlIDogYXR0ZW5kdSAke2lzc3VlMi5leHBlY3RlZH0sIHJlw6d1ICR7cGFyc2VkVHlwZTcoaXNzdWUyLmlucHV0KX1gOwogICAgICBjYXNlICJpbnZhbGlkX3ZhbHVlIjoKICAgICAgICBpZiAoaXNzdWUyLnZhbHVlcy5sZW5ndGggPT09IDEpCiAgICAgICAgICByZXR1cm4gYEVudHLDqWUgaW52YWxpZGUgOiBhdHRlbmR1ICR7c3RyaW5naWZ5UHJpbWl0aXZlKGlzc3VlMi52YWx1ZXNbMF0pfWA7CiAgICAgICAgcmV0dXJuIGBPcHRpb24gaW52YWxpZGUgOiBhdHRlbmR1IGwndW5lIGRlcyB2YWxldXJzIHN1aXZhbnRlcyAke2pvaW5WYWx1ZXMoaXNzdWUyLnZhbHVlcywgInwiKX1gOwogICAgICBjYXNlICJ0b29fYmlnIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAi4omkIiA6ICI8IjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykKICAgICAgICAgIHJldHVybiBgVHJvcCBncmFuZCA6IGF0dGVuZHUgcXVlICR7aXNzdWUyLm9yaWdpbiA/PyAibGEgdmFsZXVyIn0gYWl0ICR7YWRqfSR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdH1gOwogICAgICAgIHJldHVybiBgVHJvcCBncmFuZCA6IGF0dGVuZHUgcXVlICR7aXNzdWUyLm9yaWdpbiA/PyAibGEgdmFsZXVyIn0gc29pdCAke2Fkan0ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9YDsKICAgICAgfQogICAgICBjYXNlICJ0b29fc21hbGwiOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICLiiaUiIDogIj4iOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKSB7CiAgICAgICAgICByZXR1cm4gYFRyb3AgcGV0aXQgOiBhdHRlbmR1IHF1ZSAke2lzc3VlMi5vcmlnaW59IGFpdCAke2Fkan0ke2lzc3VlMi5taW5pbXVtLnRvU3RyaW5nKCl9ICR7c2l6aW5nLnVuaXR9YDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGBUcm9wIHBldGl0IDogYXR0ZW5kdSBxdWUgJHtpc3N1ZTIub3JpZ2lufSBzb2l0ICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgImludmFsaWRfZm9ybWF0IjogewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInN0YXJ0c193aXRoIikgewogICAgICAgICAgcmV0dXJuIGBDaGHDrm5lIGludmFsaWRlIDogZG9pdCBjb21tZW5jZXIgcGFyICIke19pc3N1ZS5wcmVmaXh9ImA7CiAgICAgICAgfQogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiZW5kc193aXRoIikKICAgICAgICAgIHJldHVybiBgQ2hhw65uZSBpbnZhbGlkZSA6IGRvaXQgc2UgdGVybWluZXIgcGFyICIke19pc3N1ZS5zdWZmaXh9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJpbmNsdWRlcyIpCiAgICAgICAgICByZXR1cm4gYENoYcOubmUgaW52YWxpZGUgOiBkb2l0IGluY2x1cmUgIiR7X2lzc3VlLmluY2x1ZGVzfSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAicmVnZXgiKQogICAgICAgICAgcmV0dXJuIGBDaGHDrm5lIGludmFsaWRlIDogZG9pdCBjb3JyZXNwb25kcmUgYXUgbW90aWYgJHtfaXNzdWUucGF0dGVybn1gOwogICAgICAgIHJldHVybiBgJHtOb3Vuc1tfaXNzdWUuZm9ybWF0XSA/PyBpc3N1ZTIuZm9ybWF0fSBpbnZhbGlkZWA7CiAgICAgIH0KICAgICAgY2FzZSAibm90X211bHRpcGxlX29mIjoKICAgICAgICByZXR1cm4gYE5vbWJyZSBpbnZhbGlkZSA6IGRvaXQgw6p0cmUgdW4gbXVsdGlwbGUgZGUgJHtpc3N1ZTIuZGl2aXNvcn1gOwogICAgICBjYXNlICJ1bnJlY29nbml6ZWRfa2V5cyI6CiAgICAgICAgcmV0dXJuIGBDbMOpJHtpc3N1ZTIua2V5cy5sZW5ndGggPiAxID8gInMiIDogIiJ9IG5vbiByZWNvbm51ZSR7aXNzdWUyLmtleXMubGVuZ3RoID4gMSA/ICJzIiA6ICIifSA6ICR7am9pblZhbHVlcyhpc3N1ZTIua2V5cywgIiwgIil9YDsKICAgICAgY2FzZSAiaW52YWxpZF9rZXkiOgogICAgICAgIHJldHVybiBgQ2zDqSBpbnZhbGlkZSBkYW5zICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBjYXNlICJpbnZhbGlkX3VuaW9uIjoKICAgICAgICByZXR1cm4gIkVudHLDqWUgaW52YWxpZGUiOwogICAgICBjYXNlICJpbnZhbGlkX2VsZW1lbnQiOgogICAgICAgIHJldHVybiBgVmFsZXVyIGludmFsaWRlIGRhbnMgJHtpc3N1ZTIub3JpZ2lufWA7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIGBFbnRyw6llIGludmFsaWRlYDsKICAgIH0KICB9Owp9OwpmdW5jdGlvbiBmcl9DQV9kZWZhdWx0KCkgewogIHJldHVybiB7CiAgICBsb2NhbGVFcnJvcjogZXJyb3IxNCgpCiAgfTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9sb2NhbGVzL2hlLmpzCnZhciBlcnJvcjE1ID0gKCkgPT4gewogIGNvbnN0IFNpemFibGUgPSB7CiAgICBzdHJpbmc6IHsgdW5pdDogIteQ15XXqteZ15XXqiIsIHZlcmI6ICLXnNeb15zXldecIiB9LAogICAgZmlsZTogeyB1bml0OiAi15HXmdeZ15jXmdedIiwgdmVyYjogItec15vXnNeV15wiIH0sCiAgICBhcnJheTogeyB1bml0OiAi16TXqNeZ15jXmdedIiwgdmVyYjogItec15vXnNeV15wiIH0sCiAgICBzZXQ6IHsgdW5pdDogItek16jXmdeY15nXnSIsIHZlcmI6ICLXnNeb15zXldecIiB9CiAgfTsKICBmdW5jdGlvbiBnZXRTaXppbmcob3JpZ2luKSB7CiAgICByZXR1cm4gU2l6YWJsZVtvcmlnaW5dID8/IG51bGw7CiAgfQogIGNvbnN0IHBhcnNlZFR5cGU3ID0gKGRhdGEpID0+IHsKICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTsKICAgIHN3aXRjaCAodCkgewogICAgICBjYXNlICJudW1iZXIiOiB7CiAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/ICJOYU4iIDogIm51bWJlciI7CiAgICAgIH0KICAgICAgY2FzZSAib2JqZWN0IjogewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgICAgICByZXR1cm4gImFycmF5IjsKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHsKICAgICAgICAgIHJldHVybiAibnVsbCI7CiAgICAgICAgfQogICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZGF0YSkgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgZGF0YS5jb25zdHJ1Y3RvcikgewogICAgICAgICAgcmV0dXJuIGRhdGEuY29uc3RydWN0b3IubmFtZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0OwogIH07CiAgY29uc3QgTm91bnMgPSB7CiAgICByZWdleDogIten15zXmCIsCiAgICBlbWFpbDogIteb16rXldeR16og15DXmdee15nXmdecIiwKICAgIHVybDogIteb16rXldeR16og16jXqdeqIiwKICAgIGVtb2ppOiAi15DXmdee15XXkifXmSIsCiAgICB1dWlkOiAiVVVJRCIsCiAgICB1dWlkdjQ6ICJVVUlEdjQiLAogICAgdXVpZHY2OiAiVVVJRHY2IiwKICAgIG5hbm9pZDogIm5hbm9pZCIsCiAgICBndWlkOiAiR1VJRCIsCiAgICBjdWlkOiAiY3VpZCIsCiAgICBjdWlkMjogImN1aWQyIiwKICAgIHVsaWQ6ICJVTElEIiwKICAgIHhpZDogIlhJRCIsCiAgICBrc3VpZDogIktTVUlEIiwKICAgIGRhdGV0aW1lOiAi16rXkNeo15nXmiDXldeW157XnyBJU08iLAogICAgZGF0ZTogIteq15DXqNeZ15ogSVNPIiwKICAgIHRpbWU6ICLXltee158gSVNPIiwKICAgIGR1cmF0aW9uOiAi157XqdeaINeW157XnyBJU08iLAogICAgaXB2NDogIteb16rXldeR16ogSVB2NCIsCiAgICBpcHY2OiAi15vXqteV15HXqiBJUHY2IiwKICAgIGNpZHJ2NDogIteY15XXldeXIElQdjQiLAogICAgY2lkcnY2OiAi15jXldeV15cgSVB2NiIsCiAgICBiYXNlNjQ6ICLXnteX16jXldeW16og15HXkdeh15nXoSA2NCIsCiAgICBiYXNlNjR1cmw6ICLXnteX16jXldeW16og15HXkdeh15nXoSA2NCDXnNeb16rXldeR15XXqiDXqNep16oiLAogICAganNvbl9zdHJpbmc6ICLXnteX16jXldeW16ogSlNPTiIsCiAgICBlMTY0OiAi157Xodek16ggRS4xNjQiLAogICAgand0OiAiSldUIiwKICAgIHRlbXBsYXRlX2xpdGVyYWw6ICLXp9ec15giCiAgfTsKICByZXR1cm4gKGlzc3VlMikgPT4gewogICAgc3dpdGNoIChpc3N1ZTIuY29kZSkgewogICAgICBjYXNlICJpbnZhbGlkX3R5cGUiOgogICAgICAgIHJldHVybiBg16fXnNeYINec15Ag16rXp9eZ1586INem16jXmdeaICR7aXNzdWUyLmV4cGVjdGVkfSwg15TXqten15HXnCAke3BhcnNlZFR5cGU3KGlzc3VlMi5pbnB1dCl9YDsKICAgICAgLy8gcmV0dXJuIGBJbnZhbGlkIGlucHV0OiBleHBlY3RlZCAke2lzc3VlLmV4cGVjdGVkfSwgcmVjZWl2ZWQgJHt1dGlsLmdldFBhcnNlZFR5cGUoaXNzdWUuaW5wdXQpfWA7CiAgICAgIGNhc2UgImludmFsaWRfdmFsdWUiOgogICAgICAgIGlmIChpc3N1ZTIudmFsdWVzLmxlbmd0aCA9PT0gMSkKICAgICAgICAgIHJldHVybiBg16fXnNeYINec15Ag16rXp9eZ1586INem16jXmdeaICR7c3RyaW5naWZ5UHJpbWl0aXZlKGlzc3VlMi52YWx1ZXNbMF0pfWA7CiAgICAgICAgcmV0dXJuIGDXp9ec15gg15zXkCDXqten15nXnzog16bXqNeZ15og15DXl9eqINee15TXkNek16nXqNeV15nXldeqICAke2pvaW5WYWx1ZXMoaXNzdWUyLnZhbHVlcywgInwiKX1gOwogICAgICBjYXNlICJ0b29fYmlnIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPD0iIDogIjwiOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKQogICAgICAgICAgcmV0dXJuIGDXkteT15XXnCDXnteT15k6ICR7aXNzdWUyLm9yaWdpbiA/PyAidmFsdWUifSDXpteo15nXmiDXnNeU15nXldeqICR7YWRqfSR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdCA/PyAiZWxlbWVudHMifWA7CiAgICAgICAgcmV0dXJuIGDXkteT15XXnCDXnteT15k6ICR7aXNzdWUyLm9yaWdpbiA/PyAidmFsdWUifSDXpteo15nXmiDXnNeU15nXldeqICR7YWRqfSR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgInRvb19zbWFsbCI6IHsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIj49IiA6ICI+IjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykgewogICAgICAgICAgcmV0dXJuIGDXp9eY158g157Xk9eZOiAke2lzc3VlMi5vcmlnaW59INem16jXmdeaINec15TXmdeV16ogJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0fWA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBg16fXmNefINee15PXmTogJHtpc3N1ZTIub3JpZ2lufSDXpteo15nXmiDXnNeU15nXldeqICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgImludmFsaWRfZm9ybWF0IjogewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInN0YXJ0c193aXRoIikKICAgICAgICAgIHJldHVybiBg157Xl9eo15XXlteqINec15Ag16rXp9eZ16DXlDog15fXmdeZ15HXqiDXnNeU16rXl9eZ15wg15EiJHtfaXNzdWUucHJlZml4fSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiZW5kc193aXRoIikKICAgICAgICAgIHJldHVybiBg157Xl9eo15XXlteqINec15Ag16rXp9eZ16DXlDog15fXmdeZ15HXqiDXnNeU16HXqteZ15nXnSDXkSAiJHtfaXNzdWUuc3VmZml4fSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiaW5jbHVkZXMiKQogICAgICAgICAgcmV0dXJuIGDXnteX16jXldeW16og15zXkCDXqten15nXoNeUOiDXl9eZ15nXkdeqINec15vXnNeV15wgIiR7X2lzc3VlLmluY2x1ZGVzfSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAicmVnZXgiKQogICAgICAgICAgcmV0dXJuIGDXnteX16jXldeW16og15zXkCDXqten15nXoNeUOiDXl9eZ15nXkdeqINec15TXqteQ15nXnSDXnNeq15HXoNeZ16ogJHtfaXNzdWUucGF0dGVybn1gOwogICAgICAgIHJldHVybiBgJHtOb3Vuc1tfaXNzdWUuZm9ybWF0XSA/PyBpc3N1ZTIuZm9ybWF0fSDXnNeQINeq16fXmdefYDsKICAgICAgfQogICAgICBjYXNlICJub3RfbXVsdGlwbGVfb2YiOgogICAgICAgIHJldHVybiBg157Xodek16gg15zXkCDXqten15nXnzog15fXmdeZ15Eg15zXlNeZ15XXqiDXnteb16TXnNeUINep15wgJHtpc3N1ZTIuZGl2aXNvcn1gOwogICAgICBjYXNlICJ1bnJlY29nbml6ZWRfa2V5cyI6CiAgICAgICAgcmV0dXJuIGDXntek16rXlyR7aXNzdWUyLmtleXMubGVuZ3RoID4gMSA/ICLXldeqIiA6ICIifSDXnNeQINee15bXldeUJHtpc3N1ZTIua2V5cy5sZW5ndGggPiAxID8gIteZ150iIDogIteUIn06ICR7am9pblZhbHVlcyhpc3N1ZTIua2V5cywgIiwgIil9YDsKICAgICAgY2FzZSAiaW52YWxpZF9rZXkiOgogICAgICAgIHJldHVybiBg157XpNeq15cg15zXkCDXqten15nXnyDXkSR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBjYXNlICJpbnZhbGlkX3VuaW9uIjoKICAgICAgICByZXR1cm4gIten15zXmCDXnNeQINeq16fXmdefIjsKICAgICAgY2FzZSAiaW52YWxpZF9lbGVtZW50IjoKICAgICAgICByZXR1cm4gYNei16jXmiDXnNeQINeq16fXmdefINeRJHtpc3N1ZTIub3JpZ2lufWA7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIGDXp9ec15gg15zXkCDXqten15nXn2A7CiAgICB9CiAgfTsKfTsKZnVuY3Rpb24gaGVfZGVmYXVsdCgpIHsKICByZXR1cm4gewogICAgbG9jYWxlRXJyb3I6IGVycm9yMTUoKQogIH07Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvbG9jYWxlcy9odS5qcwp2YXIgZXJyb3IxNiA9ICgpID0+IHsKICBjb25zdCBTaXphYmxlID0gewogICAgc3RyaW5nOiB7IHVuaXQ6ICJrYXJha3RlciIsIHZlcmI6ICJsZWd5ZW4iIH0sCiAgICBmaWxlOiB7IHVuaXQ6ICJieXRlIiwgdmVyYjogImxlZ3llbiIgfSwKICAgIGFycmF5OiB7IHVuaXQ6ICJlbGVtIiwgdmVyYjogImxlZ3llbiIgfSwKICAgIHNldDogeyB1bml0OiAiZWxlbSIsIHZlcmI6ICJsZWd5ZW4iIH0KICB9OwogIGZ1bmN0aW9uIGdldFNpemluZyhvcmlnaW4pIHsKICAgIHJldHVybiBTaXphYmxlW29yaWdpbl0gPz8gbnVsbDsKICB9CiAgY29uc3QgcGFyc2VkVHlwZTcgPSAoZGF0YSkgPT4gewogICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhOwogICAgc3dpdGNoICh0KSB7CiAgICAgIGNhc2UgIm51bWJlciI6IHsKICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gIk5hTiIgOiAic3rDoW0iOwogICAgICB9CiAgICAgIGNhc2UgIm9iamVjdCI6IHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkgewogICAgICAgICAgcmV0dXJuICJ0w7ZtYiI7CiAgICAgICAgfQogICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gIm51bGwiOwogICAgICAgIH0KICAgICAgICBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGRhdGEpICE9PSBPYmplY3QucHJvdG90eXBlICYmIGRhdGEuY29uc3RydWN0b3IpIHsKICAgICAgICAgIHJldHVybiBkYXRhLmNvbnN0cnVjdG9yLm5hbWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdDsKICB9OwogIGNvbnN0IE5vdW5zID0gewogICAgcmVnZXg6ICJiZW1lbmV0IiwKICAgIGVtYWlsOiAiZW1haWwgY8OtbSIsCiAgICB1cmw6ICJVUkwiLAogICAgZW1vamk6ICJlbW9qaSIsCiAgICB1dWlkOiAiVVVJRCIsCiAgICB1dWlkdjQ6ICJVVUlEdjQiLAogICAgdXVpZHY2OiAiVVVJRHY2IiwKICAgIG5hbm9pZDogIm5hbm9pZCIsCiAgICBndWlkOiAiR1VJRCIsCiAgICBjdWlkOiAiY3VpZCIsCiAgICBjdWlkMjogImN1aWQyIiwKICAgIHVsaWQ6ICJVTElEIiwKICAgIHhpZDogIlhJRCIsCiAgICBrc3VpZDogIktTVUlEIiwKICAgIGRhdGV0aW1lOiAiSVNPIGlkxZFiw6lseWVnIiwKICAgIGRhdGU6ICJJU08gZMOhdHVtIiwKICAgIHRpbWU6ICJJU08gaWTFkSIsCiAgICBkdXJhdGlvbjogIklTTyBpZMWRaW50ZXJ2YWxsdW0iLAogICAgaXB2NDogIklQdjQgY8OtbSIsCiAgICBpcHY2OiAiSVB2NiBjw61tIiwKICAgIGNpZHJ2NDogIklQdjQgdGFydG9tw6FueSIsCiAgICBjaWRydjY6ICJJUHY2IHRhcnRvbcOhbnkiLAogICAgYmFzZTY0OiAiYmFzZTY0LWvDs2RvbHQgc3RyaW5nIiwKICAgIGJhc2U2NHVybDogImJhc2U2NHVybC1rw7Nkb2x0IHN0cmluZyIsCiAgICBqc29uX3N0cmluZzogIkpTT04gc3RyaW5nIiwKICAgIGUxNjQ6ICJFLjE2NCBzesOhbSIsCiAgICBqd3Q6ICJKV1QiLAogICAgdGVtcGxhdGVfbGl0ZXJhbDogImJlbWVuZXQiCiAgfTsKICByZXR1cm4gKGlzc3VlMikgPT4gewogICAgc3dpdGNoIChpc3N1ZTIuY29kZSkgewogICAgICBjYXNlICJpbnZhbGlkX3R5cGUiOgogICAgICAgIHJldHVybiBgw4lydsOpbnl0ZWxlbiBiZW1lbmV0OiBhIHbDoXJ0IMOpcnTDqWsgJHtpc3N1ZTIuZXhwZWN0ZWR9LCBhIGthcG90dCDDqXJ0w6lrICR7cGFyc2VkVHlwZTcoaXNzdWUyLmlucHV0KX1gOwogICAgICAvLyByZXR1cm4gYEludmFsaWQgaW5wdXQ6IGV4cGVjdGVkICR7aXNzdWUuZXhwZWN0ZWR9LCByZWNlaXZlZCAke3V0aWwuZ2V0UGFyc2VkVHlwZShpc3N1ZS5pbnB1dCl9YDsKICAgICAgY2FzZSAiaW52YWxpZF92YWx1ZSI6CiAgICAgICAgaWYgKGlzc3VlMi52YWx1ZXMubGVuZ3RoID09PSAxKQogICAgICAgICAgcmV0dXJuIGDDiXJ2w6lueXRlbGVuIGJlbWVuZXQ6IGEgdsOhcnQgw6lydMOpayAke3N0cmluZ2lmeVByaW1pdGl2ZShpc3N1ZTIudmFsdWVzWzBdKX1gOwogICAgICAgIHJldHVybiBgw4lydsOpbnl0ZWxlbiBvcGNpw7M6IHZhbGFtZWx5aWsgw6lydMOpayB2w6FydCAke2pvaW5WYWx1ZXMoaXNzdWUyLnZhbHVlcywgInwiKX1gOwogICAgICBjYXNlICJ0b29fYmlnIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPD0iIDogIjwiOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKQogICAgICAgICAgcmV0dXJuIGBUw7psIG5hZ3k6ICR7aXNzdWUyLm9yaWdpbiA/PyAiw6lydMOpayJ9IG3DqXJldGUgdMO6bCBuYWd5ICR7YWRqfSR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdCA/PyAiZWxlbSJ9YDsKICAgICAgICByZXR1cm4gYFTDumwgbmFneTogYSBiZW1lbmV0aSDDqXJ0w6lrICR7aXNzdWUyLm9yaWdpbiA/PyAiw6lydMOpayJ9IHTDumwgbmFneTogJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfWA7CiAgICAgIH0KICAgICAgY2FzZSAidG9vX3NtYWxsIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPj0iIDogIj4iOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKSB7CiAgICAgICAgICByZXR1cm4gYFTDumwga2ljc2k6IGEgYmVtZW5ldGkgw6lydMOpayAke2lzc3VlMi5vcmlnaW59IG3DqXJldGUgdMO6bCBraWNzaSAke2Fkan0ke2lzc3VlMi5taW5pbXVtLnRvU3RyaW5nKCl9ICR7c2l6aW5nLnVuaXR9YDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGBUw7psIGtpY3NpOiBhIGJlbWVuZXRpIMOpcnTDqWsgJHtpc3N1ZTIub3JpZ2lufSB0w7psIGtpY3NpICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgImludmFsaWRfZm9ybWF0IjogewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInN0YXJ0c193aXRoIikKICAgICAgICAgIHJldHVybiBgw4lydsOpbnl0ZWxlbiBzdHJpbmc6ICIke19pc3N1ZS5wcmVmaXh9IiDDqXJ0w6lra2VsIGtlbGwga2V6ZMWRZG5pZWA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJlbmRzX3dpdGgiKQogICAgICAgICAgcmV0dXJuIGDDiXJ2w6lueXRlbGVuIHN0cmluZzogIiR7X2lzc3VlLnN1ZmZpeH0iIMOpcnTDqWtrZWwga2VsbCB2w6lnesWRZG5pZWA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJpbmNsdWRlcyIpCiAgICAgICAgICByZXR1cm4gYMOJcnbDqW55dGVsZW4gc3RyaW5nOiAiJHtfaXNzdWUuaW5jbHVkZXN9IiDDqXJ0w6lrZXQga2VsbCB0YXJ0YWxtYXpuaWFgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAicmVnZXgiKQogICAgICAgICAgcmV0dXJuIGDDiXJ2w6lueXRlbGVuIHN0cmluZzogJHtfaXNzdWUucGF0dGVybn0gbWludMOhbmFrIGtlbGwgbWVnZmVsZWxuaWVgOwogICAgICAgIHJldHVybiBgw4lydsOpbnl0ZWxlbiAke05vdW5zW19pc3N1ZS5mb3JtYXRdID8/IGlzc3VlMi5mb3JtYXR9YDsKICAgICAgfQogICAgICBjYXNlICJub3RfbXVsdGlwbGVfb2YiOgogICAgICAgIHJldHVybiBgw4lydsOpbnl0ZWxlbiBzesOhbTogJHtpc3N1ZTIuZGl2aXNvcn0gdMO2YmJzesO2csO2c8OpbmVrIGtlbGwgbGVubmllYDsKICAgICAgY2FzZSAidW5yZWNvZ25pemVkX2tleXMiOgogICAgICAgIHJldHVybiBgSXNtZXJldGxlbiBrdWxjcyR7aXNzdWUyLmtleXMubGVuZ3RoID4gMSA/ICJzIiA6ICIifTogJHtqb2luVmFsdWVzKGlzc3VlMi5rZXlzLCAiLCAiKX1gOwogICAgICBjYXNlICJpbnZhbGlkX2tleSI6CiAgICAgICAgcmV0dXJuIGDDiXJ2w6lueXRlbGVuIGt1bGNzICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBjYXNlICJpbnZhbGlkX3VuaW9uIjoKICAgICAgICByZXR1cm4gIsOJcnbDqW55dGVsZW4gYmVtZW5ldCI7CiAgICAgIGNhc2UgImludmFsaWRfZWxlbWVudCI6CiAgICAgICAgcmV0dXJuIGDDiXJ2w6lueXRlbGVuIMOpcnTDqWs6ICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBgw4lydsOpbnl0ZWxlbiBiZW1lbmV0YDsKICAgIH0KICB9Owp9OwpmdW5jdGlvbiBodV9kZWZhdWx0KCkgewogIHJldHVybiB7CiAgICBsb2NhbGVFcnJvcjogZXJyb3IxNigpCiAgfTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9sb2NhbGVzL2lkLmpzCnZhciBlcnJvcjE3ID0gKCkgPT4gewogIGNvbnN0IFNpemFibGUgPSB7CiAgICBzdHJpbmc6IHsgdW5pdDogImthcmFrdGVyIiwgdmVyYjogIm1lbWlsaWtpIiB9LAogICAgZmlsZTogeyB1bml0OiAiYnl0ZSIsIHZlcmI6ICJtZW1pbGlraSIgfSwKICAgIGFycmF5OiB7IHVuaXQ6ICJpdGVtIiwgdmVyYjogIm1lbWlsaWtpIiB9LAogICAgc2V0OiB7IHVuaXQ6ICJpdGVtIiwgdmVyYjogIm1lbWlsaWtpIiB9CiAgfTsKICBmdW5jdGlvbiBnZXRTaXppbmcob3JpZ2luKSB7CiAgICByZXR1cm4gU2l6YWJsZVtvcmlnaW5dID8/IG51bGw7CiAgfQogIGNvbnN0IHBhcnNlZFR5cGU3ID0gKGRhdGEpID0+IHsKICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTsKICAgIHN3aXRjaCAodCkgewogICAgICBjYXNlICJudW1iZXIiOiB7CiAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/ICJOYU4iIDogIm51bWJlciI7CiAgICAgIH0KICAgICAgY2FzZSAib2JqZWN0IjogewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgICAgICByZXR1cm4gImFycmF5IjsKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHsKICAgICAgICAgIHJldHVybiAibnVsbCI7CiAgICAgICAgfQogICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZGF0YSkgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgZGF0YS5jb25zdHJ1Y3RvcikgewogICAgICAgICAgcmV0dXJuIGRhdGEuY29uc3RydWN0b3IubmFtZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0OwogIH07CiAgY29uc3QgTm91bnMgPSB7CiAgICByZWdleDogImlucHV0IiwKICAgIGVtYWlsOiAiYWxhbWF0IGVtYWlsIiwKICAgIHVybDogIlVSTCIsCiAgICBlbW9qaTogImVtb2ppIiwKICAgIHV1aWQ6ICJVVUlEIiwKICAgIHV1aWR2NDogIlVVSUR2NCIsCiAgICB1dWlkdjY6ICJVVUlEdjYiLAogICAgbmFub2lkOiAibmFub2lkIiwKICAgIGd1aWQ6ICJHVUlEIiwKICAgIGN1aWQ6ICJjdWlkIiwKICAgIGN1aWQyOiAiY3VpZDIiLAogICAgdWxpZDogIlVMSUQiLAogICAgeGlkOiAiWElEIiwKICAgIGtzdWlkOiAiS1NVSUQiLAogICAgZGF0ZXRpbWU6ICJ0YW5nZ2FsIGRhbiB3YWt0dSBmb3JtYXQgSVNPIiwKICAgIGRhdGU6ICJ0YW5nZ2FsIGZvcm1hdCBJU08iLAogICAgdGltZTogImphbSBmb3JtYXQgSVNPIiwKICAgIGR1cmF0aW9uOiAiZHVyYXNpIGZvcm1hdCBJU08iLAogICAgaXB2NDogImFsYW1hdCBJUHY0IiwKICAgIGlwdjY6ICJhbGFtYXQgSVB2NiIsCiAgICBjaWRydjQ6ICJyZW50YW5nIGFsYW1hdCBJUHY0IiwKICAgIGNpZHJ2NjogInJlbnRhbmcgYWxhbWF0IElQdjYiLAogICAgYmFzZTY0OiAic3RyaW5nIGRlbmdhbiBlbmtvZGUgYmFzZTY0IiwKICAgIGJhc2U2NHVybDogInN0cmluZyBkZW5nYW4gZW5rb2RlIGJhc2U2NHVybCIsCiAgICBqc29uX3N0cmluZzogInN0cmluZyBKU09OIiwKICAgIGUxNjQ6ICJhbmdrYSBFLjE2NCIsCiAgICBqd3Q6ICJKV1QiLAogICAgdGVtcGxhdGVfbGl0ZXJhbDogImlucHV0IgogIH07CiAgcmV0dXJuIChpc3N1ZTIpID0+IHsKICAgIHN3aXRjaCAoaXNzdWUyLmNvZGUpIHsKICAgICAgY2FzZSAiaW52YWxpZF90eXBlIjoKICAgICAgICByZXR1cm4gYElucHV0IHRpZGFrIHZhbGlkOiBkaWhhcmFwa2FuICR7aXNzdWUyLmV4cGVjdGVkfSwgZGl0ZXJpbWEgJHtwYXJzZWRUeXBlNyhpc3N1ZTIuaW5wdXQpfWA7CiAgICAgIGNhc2UgImludmFsaWRfdmFsdWUiOgogICAgICAgIGlmIChpc3N1ZTIudmFsdWVzLmxlbmd0aCA9PT0gMSkKICAgICAgICAgIHJldHVybiBgSW5wdXQgdGlkYWsgdmFsaWQ6IGRpaGFyYXBrYW4gJHtzdHJpbmdpZnlQcmltaXRpdmUoaXNzdWUyLnZhbHVlc1swXSl9YDsKICAgICAgICByZXR1cm4gYFBpbGloYW4gdGlkYWsgdmFsaWQ6IGRpaGFyYXBrYW4gc2FsYWggc2F0dSBkYXJpICR7am9pblZhbHVlcyhpc3N1ZTIudmFsdWVzLCAifCIpfWA7CiAgICAgIGNhc2UgInRvb19iaWciOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI8PSIgOiAiPCI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpCiAgICAgICAgICByZXR1cm4gYFRlcmxhbHUgYmVzYXI6IGRpaGFyYXBrYW4gJHtpc3N1ZTIub3JpZ2luID8/ICJ2YWx1ZSJ9IG1lbWlsaWtpICR7YWRqfSR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdCA/PyAiZWxlbWVuIn1gOwogICAgICAgIHJldHVybiBgVGVybGFsdSBiZXNhcjogZGloYXJhcGthbiAke2lzc3VlMi5vcmlnaW4gPz8gInZhbHVlIn0gbWVuamFkaSAke2Fkan0ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9YDsKICAgICAgfQogICAgICBjYXNlICJ0b29fc21hbGwiOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI+PSIgOiAiPiI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpIHsKICAgICAgICAgIHJldHVybiBgVGVybGFsdSBrZWNpbDogZGloYXJhcGthbiAke2lzc3VlMi5vcmlnaW59IG1lbWlsaWtpICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdH1gOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYFRlcmxhbHUga2VjaWw6IGRpaGFyYXBrYW4gJHtpc3N1ZTIub3JpZ2lufSBtZW5qYWRpICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgImludmFsaWRfZm9ybWF0IjogewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInN0YXJ0c193aXRoIikKICAgICAgICAgIHJldHVybiBgU3RyaW5nIHRpZGFrIHZhbGlkOiBoYXJ1cyBkaW11bGFpIGRlbmdhbiAiJHtfaXNzdWUucHJlZml4fSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiZW5kc193aXRoIikKICAgICAgICAgIHJldHVybiBgU3RyaW5nIHRpZGFrIHZhbGlkOiBoYXJ1cyBiZXJha2hpciBkZW5nYW4gIiR7X2lzc3VlLnN1ZmZpeH0iYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImluY2x1ZGVzIikKICAgICAgICAgIHJldHVybiBgU3RyaW5nIHRpZGFrIHZhbGlkOiBoYXJ1cyBtZW55ZXJ0YWthbiAiJHtfaXNzdWUuaW5jbHVkZXN9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJyZWdleCIpCiAgICAgICAgICByZXR1cm4gYFN0cmluZyB0aWRhayB2YWxpZDogaGFydXMgc2VzdWFpIHBvbGEgJHtfaXNzdWUucGF0dGVybn1gOwogICAgICAgIHJldHVybiBgJHtOb3Vuc1tfaXNzdWUuZm9ybWF0XSA/PyBpc3N1ZTIuZm9ybWF0fSB0aWRhayB2YWxpZGA7CiAgICAgIH0KICAgICAgY2FzZSAibm90X211bHRpcGxlX29mIjoKICAgICAgICByZXR1cm4gYEFuZ2thIHRpZGFrIHZhbGlkOiBoYXJ1cyBrZWxpcGF0YW4gZGFyaSAke2lzc3VlMi5kaXZpc29yfWA7CiAgICAgIGNhc2UgInVucmVjb2duaXplZF9rZXlzIjoKICAgICAgICByZXR1cm4gYEt1bmNpIHRpZGFrIGRpa2VuYWxpICR7aXNzdWUyLmtleXMubGVuZ3RoID4gMSA/ICJzIiA6ICIifTogJHtqb2luVmFsdWVzKGlzc3VlMi5rZXlzLCAiLCAiKX1gOwogICAgICBjYXNlICJpbnZhbGlkX2tleSI6CiAgICAgICAgcmV0dXJuIGBLdW5jaSB0aWRhayB2YWxpZCBkaSAke2lzc3VlMi5vcmlnaW59YDsKICAgICAgY2FzZSAiaW52YWxpZF91bmlvbiI6CiAgICAgICAgcmV0dXJuICJJbnB1dCB0aWRhayB2YWxpZCI7CiAgICAgIGNhc2UgImludmFsaWRfZWxlbWVudCI6CiAgICAgICAgcmV0dXJuIGBOaWxhaSB0aWRhayB2YWxpZCBkaSAke2lzc3VlMi5vcmlnaW59YDsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gYElucHV0IHRpZGFrIHZhbGlkYDsKICAgIH0KICB9Owp9OwpmdW5jdGlvbiBpZF9kZWZhdWx0KCkgewogIHJldHVybiB7CiAgICBsb2NhbGVFcnJvcjogZXJyb3IxNygpCiAgfTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9sb2NhbGVzL2lzLmpzCnZhciBwYXJzZWRUeXBlMyA9IChkYXRhKSA9PiB7CiAgY29uc3QgdCA9IHR5cGVvZiBkYXRhOwogIHN3aXRjaCAodCkgewogICAgY2FzZSAibnVtYmVyIjogewogICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gIk5hTiIgOiAibsO6bWVyIjsKICAgIH0KICAgIGNhc2UgIm9iamVjdCI6IHsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHsKICAgICAgICByZXR1cm4gImZ5bGtpIjsKICAgICAgfQogICAgICBpZiAoZGF0YSA9PT0gbnVsbCkgewogICAgICAgIHJldHVybiAibnVsbCI7CiAgICAgIH0KICAgICAgaWYgKE9iamVjdC5nZXRQcm90b3R5cGVPZihkYXRhKSAhPT0gT2JqZWN0LnByb3RvdHlwZSAmJiBkYXRhLmNvbnN0cnVjdG9yKSB7CiAgICAgICAgcmV0dXJuIGRhdGEuY29uc3RydWN0b3IubmFtZTsKICAgICAgfQogICAgfQogIH0KICByZXR1cm4gdDsKfTsKdmFyIGVycm9yMTggPSAoKSA9PiB7CiAgY29uc3QgU2l6YWJsZSA9IHsKICAgIHN0cmluZzogeyB1bml0OiAic3RhZmkiLCB2ZXJiOiAiYcOwIGhhZmEiIH0sCiAgICBmaWxlOiB7IHVuaXQ6ICJiw6Z0aSIsIHZlcmI6ICJhw7AgaGFmYSIgfSwKICAgIGFycmF5OiB7IHVuaXQ6ICJobHV0aSIsIHZlcmI6ICJhw7AgaGFmYSIgfSwKICAgIHNldDogeyB1bml0OiAiaGx1dGkiLCB2ZXJiOiAiYcOwIGhhZmEiIH0KICB9OwogIGZ1bmN0aW9uIGdldFNpemluZyhvcmlnaW4pIHsKICAgIHJldHVybiBTaXphYmxlW29yaWdpbl0gPz8gbnVsbDsKICB9CiAgY29uc3QgTm91bnMgPSB7CiAgICByZWdleDogImdpbGRpIiwKICAgIGVtYWlsOiAibmV0ZmFuZyIsCiAgICB1cmw6ICJ2ZWZzbMOzw7AiLAogICAgZW1vamk6ICJlbW9qaSIsCiAgICB1dWlkOiAiVVVJRCIsCiAgICB1dWlkdjQ6ICJVVUlEdjQiLAogICAgdXVpZHY2OiAiVVVJRHY2IiwKICAgIG5hbm9pZDogIm5hbm9pZCIsCiAgICBndWlkOiAiR1VJRCIsCiAgICBjdWlkOiAiY3VpZCIsCiAgICBjdWlkMjogImN1aWQyIiwKICAgIHVsaWQ6ICJVTElEIiwKICAgIHhpZDogIlhJRCIsCiAgICBrc3VpZDogIktTVUlEIiwKICAgIGRhdGV0aW1lOiAiSVNPIGRhZ3NldG5pbmcgb2cgdMOtbWkiLAogICAgZGF0ZTogIklTTyBkYWdzZXRuaW5nIiwKICAgIHRpbWU6ICJJU08gdMOtbWkiLAogICAgZHVyYXRpb246ICJJU08gdMOtbWFsZW5nZCIsCiAgICBpcHY0OiAiSVB2NCBhZGRyZXNzIiwKICAgIGlwdjY6ICJJUHY2IGFkZHJlc3MiLAogICAgY2lkcnY0OiAiSVB2NCByYW5nZSIsCiAgICBjaWRydjY6ICJJUHY2IHJhbmdlIiwKICAgIGJhc2U2NDogImJhc2U2NC1lbmNvZGVkIHN0cmVuZ3VyIiwKICAgIGJhc2U2NHVybDogImJhc2U2NHVybC1lbmNvZGVkIHN0cmVuZ3VyIiwKICAgIGpzb25fc3RyaW5nOiAiSlNPTiBzdHJlbmd1ciIsCiAgICBlMTY0OiAiRS4xNjQgdMO2bHVnaWxkaSIsCiAgICBqd3Q6ICJKV1QiLAogICAgdGVtcGxhdGVfbGl0ZXJhbDogImdpbGRpIgogIH07CiAgcmV0dXJuIChpc3N1ZTIpID0+IHsKICAgIHN3aXRjaCAoaXNzdWUyLmNvZGUpIHsKICAgICAgY2FzZSAiaW52YWxpZF90eXBlIjoKICAgICAgICByZXR1cm4gYFJhbmd0IGdpbGRpOiDDnsO6IHNsw7NzdCBpbm4gJHtwYXJzZWRUeXBlMyhpc3N1ZTIuaW5wdXQpfSDDvmFyIHNlbSDDoSBhw7AgdmVyYSAke2lzc3VlMi5leHBlY3RlZH1gOwogICAgICBjYXNlICJpbnZhbGlkX3ZhbHVlIjoKICAgICAgICBpZiAoaXNzdWUyLnZhbHVlcy5sZW5ndGggPT09IDEpCiAgICAgICAgICByZXR1cm4gYFJhbmd0IGdpbGRpOiBnZXJ0IHLDocOwIGZ5cmlyICR7c3RyaW5naWZ5UHJpbWl0aXZlKGlzc3VlMi52YWx1ZXNbMF0pfWA7CiAgICAgICAgcmV0dXJuIGDDk2dpbHQgdmFsOiBtw6EgdmVyYSBlaXR0IGFmIGVmdGlyZmFyYW5kaSAke2pvaW5WYWx1ZXMoaXNzdWUyLnZhbHVlcywgInwiKX1gOwogICAgICBjYXNlICJ0b29fYmlnIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPD0iIDogIjwiOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKQogICAgICAgICAgcmV0dXJuIGBPZiBzdMOzcnQ6IGdlcnQgZXIgcsOhw7AgZnlyaXIgYcOwICR7aXNzdWUyLm9yaWdpbiA/PyAiZ2lsZGkifSBoYWZpICR7YWRqfSR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdCA/PyAiaGx1dGkifWA7CiAgICAgICAgcmV0dXJuIGBPZiBzdMOzcnQ6IGdlcnQgZXIgcsOhw7AgZnlyaXIgYcOwICR7aXNzdWUyLm9yaWdpbiA/PyAiZ2lsZGkifSBzw6kgJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfWA7CiAgICAgIH0KICAgICAgY2FzZSAidG9vX3NtYWxsIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPj0iIDogIj4iOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKSB7CiAgICAgICAgICByZXR1cm4gYE9mIGzDrXRpw7A6IGdlcnQgZXIgcsOhw7AgZnlyaXIgYcOwICR7aXNzdWUyLm9yaWdpbn0gaGFmaSAke2Fkan0ke2lzc3VlMi5taW5pbXVtLnRvU3RyaW5nKCl9ICR7c2l6aW5nLnVuaXR9YDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGBPZiBsw610acOwOiBnZXJ0IGVyIHLDocOwIGZ5cmlyIGHDsCAke2lzc3VlMi5vcmlnaW59IHPDqSAke2Fkan0ke2lzc3VlMi5taW5pbXVtLnRvU3RyaW5nKCl9YDsKICAgICAgfQogICAgICBjYXNlICJpbnZhbGlkX2Zvcm1hdCI6IHsKICAgICAgICBjb25zdCBfaXNzdWUgPSBpc3N1ZTI7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJzdGFydHNfd2l0aCIpIHsKICAgICAgICAgIHJldHVybiBgw5NnaWxkdXIgc3RyZW5ndXI6IHZlcsOwdXIgYcOwIGJ5cmphIMOhICIke19pc3N1ZS5wcmVmaXh9ImA7CiAgICAgICAgfQogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiZW5kc193aXRoIikKICAgICAgICAgIHJldHVybiBgw5NnaWxkdXIgc3RyZW5ndXI6IHZlcsOwdXIgYcOwIGVuZGEgw6EgIiR7X2lzc3VlLnN1ZmZpeH0iYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImluY2x1ZGVzIikKICAgICAgICAgIHJldHVybiBgw5NnaWxkdXIgc3RyZW5ndXI6IHZlcsOwdXIgYcOwIGlubmloYWxkYSAiJHtfaXNzdWUuaW5jbHVkZXN9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJyZWdleCIpCiAgICAgICAgICByZXR1cm4gYMOTZ2lsZHVyIHN0cmVuZ3VyOiB2ZXLDsHVyIGHDsCBmeWxnamEgbXluc3RyaSAke19pc3N1ZS5wYXR0ZXJufWA7CiAgICAgICAgcmV0dXJuIGBSYW5ndCAke05vdW5zW19pc3N1ZS5mb3JtYXRdID8/IGlzc3VlMi5mb3JtYXR9YDsKICAgICAgfQogICAgICBjYXNlICJub3RfbXVsdGlwbGVfb2YiOgogICAgICAgIHJldHVybiBgUsO2bmcgdGFsYTogdmVyw7B1ciBhw7AgdmVyYSBtYXJnZmVsZGkgYWYgJHtpc3N1ZTIuZGl2aXNvcn1gOwogICAgICBjYXNlICJ1bnJlY29nbml6ZWRfa2V5cyI6CiAgICAgICAgcmV0dXJuIGDDk8O+ZWtrdCAke2lzc3VlMi5rZXlzLmxlbmd0aCA+IDEgPyAiaXIgbHlrbGFyIiA6ICJ1ciBseWtpbGwifTogJHtqb2luVmFsdWVzKGlzc3VlMi5rZXlzLCAiLCAiKX1gOwogICAgICBjYXNlICJpbnZhbGlkX2tleSI6CiAgICAgICAgcmV0dXJuIGBSYW5ndXIgbHlraWxsIMOtICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBjYXNlICJpbnZhbGlkX3VuaW9uIjoKICAgICAgICByZXR1cm4gIlJhbmd0IGdpbGRpIjsKICAgICAgY2FzZSAiaW52YWxpZF9lbGVtZW50IjoKICAgICAgICByZXR1cm4gYFJhbmd0IGdpbGRpIMOtICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBgUmFuZ3QgZ2lsZGlgOwogICAgfQogIH07Cn07CmZ1bmN0aW9uIGlzX2RlZmF1bHQoKSB7CiAgcmV0dXJuIHsKICAgIGxvY2FsZUVycm9yOiBlcnJvcjE4KCkKICB9Owp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2xvY2FsZXMvaXQuanMKdmFyIGVycm9yMTkgPSAoKSA9PiB7CiAgY29uc3QgU2l6YWJsZSA9IHsKICAgIHN0cmluZzogeyB1bml0OiAiY2FyYXR0ZXJpIiwgdmVyYjogImF2ZXJlIiB9LAogICAgZmlsZTogeyB1bml0OiAiYnl0ZSIsIHZlcmI6ICJhdmVyZSIgfSwKICAgIGFycmF5OiB7IHVuaXQ6ICJlbGVtZW50aSIsIHZlcmI6ICJhdmVyZSIgfSwKICAgIHNldDogeyB1bml0OiAiZWxlbWVudGkiLCB2ZXJiOiAiYXZlcmUiIH0KICB9OwogIGZ1bmN0aW9uIGdldFNpemluZyhvcmlnaW4pIHsKICAgIHJldHVybiBTaXphYmxlW29yaWdpbl0gPz8gbnVsbDsKICB9CiAgY29uc3QgcGFyc2VkVHlwZTcgPSAoZGF0YSkgPT4gewogICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhOwogICAgc3dpdGNoICh0KSB7CiAgICAgIGNhc2UgIm51bWJlciI6IHsKICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gIk5hTiIgOiAibnVtZXJvIjsKICAgICAgfQogICAgICBjYXNlICJvYmplY3QiOiB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHsKICAgICAgICAgIHJldHVybiAidmV0dG9yZSI7CiAgICAgICAgfQogICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gIm51bGwiOwogICAgICAgIH0KICAgICAgICBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGRhdGEpICE9PSBPYmplY3QucHJvdG90eXBlICYmIGRhdGEuY29uc3RydWN0b3IpIHsKICAgICAgICAgIHJldHVybiBkYXRhLmNvbnN0cnVjdG9yLm5hbWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdDsKICB9OwogIGNvbnN0IE5vdW5zID0gewogICAgcmVnZXg6ICJpbnB1dCIsCiAgICBlbWFpbDogImluZGlyaXp6byBlbWFpbCIsCiAgICB1cmw6ICJVUkwiLAogICAgZW1vamk6ICJlbW9qaSIsCiAgICB1dWlkOiAiVVVJRCIsCiAgICB1dWlkdjQ6ICJVVUlEdjQiLAogICAgdXVpZHY2OiAiVVVJRHY2IiwKICAgIG5hbm9pZDogIm5hbm9pZCIsCiAgICBndWlkOiAiR1VJRCIsCiAgICBjdWlkOiAiY3VpZCIsCiAgICBjdWlkMjogImN1aWQyIiwKICAgIHVsaWQ6ICJVTElEIiwKICAgIHhpZDogIlhJRCIsCiAgICBrc3VpZDogIktTVUlEIiwKICAgIGRhdGV0aW1lOiAiZGF0YSBlIG9yYSBJU08iLAogICAgZGF0ZTogImRhdGEgSVNPIiwKICAgIHRpbWU6ICJvcmEgSVNPIiwKICAgIGR1cmF0aW9uOiAiZHVyYXRhIElTTyIsCiAgICBpcHY0OiAiaW5kaXJpenpvIElQdjQiLAogICAgaXB2NjogImluZGlyaXp6byBJUHY2IiwKICAgIGNpZHJ2NDogImludGVydmFsbG8gSVB2NCIsCiAgICBjaWRydjY6ICJpbnRlcnZhbGxvIElQdjYiLAogICAgYmFzZTY0OiAic3RyaW5nYSBjb2RpZmljYXRhIGluIGJhc2U2NCIsCiAgICBiYXNlNjR1cmw6ICJVUkwgY29kaWZpY2F0YSBpbiBiYXNlNjQiLAogICAganNvbl9zdHJpbmc6ICJzdHJpbmdhIEpTT04iLAogICAgZTE2NDogIm51bWVybyBFLjE2NCIsCiAgICBqd3Q6ICJKV1QiLAogICAgdGVtcGxhdGVfbGl0ZXJhbDogImlucHV0IgogIH07CiAgcmV0dXJuIChpc3N1ZTIpID0+IHsKICAgIHN3aXRjaCAoaXNzdWUyLmNvZGUpIHsKICAgICAgY2FzZSAiaW52YWxpZF90eXBlIjoKICAgICAgICByZXR1cm4gYElucHV0IG5vbiB2YWxpZG86IGF0dGVzbyAke2lzc3VlMi5leHBlY3RlZH0sIHJpY2V2dXRvICR7cGFyc2VkVHlwZTcoaXNzdWUyLmlucHV0KX1gOwogICAgICAvLyByZXR1cm4gYElucHV0IG5vbiB2YWxpZG86IGF0dGVzbyAke2lzc3VlLmV4cGVjdGVkfSwgcmljZXZ1dG8gJHt1dGlsLmdldFBhcnNlZFR5cGUoaXNzdWUuaW5wdXQpfWA7CiAgICAgIGNhc2UgImludmFsaWRfdmFsdWUiOgogICAgICAgIGlmIChpc3N1ZTIudmFsdWVzLmxlbmd0aCA9PT0gMSkKICAgICAgICAgIHJldHVybiBgSW5wdXQgbm9uIHZhbGlkbzogYXR0ZXNvICR7c3RyaW5naWZ5UHJpbWl0aXZlKGlzc3VlMi52YWx1ZXNbMF0pfWA7CiAgICAgICAgcmV0dXJuIGBPcHppb25lIG5vbiB2YWxpZGE6IGF0dGVzbyB1bm8gdHJhICR7am9pblZhbHVlcyhpc3N1ZTIudmFsdWVzLCAifCIpfWA7CiAgICAgIGNhc2UgInRvb19iaWciOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI8PSIgOiAiPCI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpCiAgICAgICAgICByZXR1cm4gYFRyb3BwbyBncmFuZGU6ICR7aXNzdWUyLm9yaWdpbiA/PyAidmFsb3JlIn0gZGV2ZSBhdmVyZSAke2Fkan0ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9ICR7c2l6aW5nLnVuaXQgPz8gImVsZW1lbnRpIn1gOwogICAgICAgIHJldHVybiBgVHJvcHBvIGdyYW5kZTogJHtpc3N1ZTIub3JpZ2luID8/ICJ2YWxvcmUifSBkZXZlIGVzc2VyZSAke2Fkan0ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9YDsKICAgICAgfQogICAgICBjYXNlICJ0b29fc21hbGwiOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI+PSIgOiAiPiI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpIHsKICAgICAgICAgIHJldHVybiBgVHJvcHBvIHBpY2NvbG86ICR7aXNzdWUyLm9yaWdpbn0gZGV2ZSBhdmVyZSAke2Fkan0ke2lzc3VlMi5taW5pbXVtLnRvU3RyaW5nKCl9ICR7c2l6aW5nLnVuaXR9YDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGBUcm9wcG8gcGljY29sbzogJHtpc3N1ZTIub3JpZ2lufSBkZXZlIGVzc2VyZSAke2Fkan0ke2lzc3VlMi5taW5pbXVtLnRvU3RyaW5nKCl9YDsKICAgICAgfQogICAgICBjYXNlICJpbnZhbGlkX2Zvcm1hdCI6IHsKICAgICAgICBjb25zdCBfaXNzdWUgPSBpc3N1ZTI7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJzdGFydHNfd2l0aCIpCiAgICAgICAgICByZXR1cm4gYFN0cmluZ2Egbm9uIHZhbGlkYTogZGV2ZSBpbml6aWFyZSBjb24gIiR7X2lzc3VlLnByZWZpeH0iYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImVuZHNfd2l0aCIpCiAgICAgICAgICByZXR1cm4gYFN0cmluZ2Egbm9uIHZhbGlkYTogZGV2ZSB0ZXJtaW5hcmUgY29uICIke19pc3N1ZS5zdWZmaXh9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJpbmNsdWRlcyIpCiAgICAgICAgICByZXR1cm4gYFN0cmluZ2Egbm9uIHZhbGlkYTogZGV2ZSBpbmNsdWRlcmUgIiR7X2lzc3VlLmluY2x1ZGVzfSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAicmVnZXgiKQogICAgICAgICAgcmV0dXJuIGBTdHJpbmdhIG5vbiB2YWxpZGE6IGRldmUgY29ycmlzcG9uZGVyZSBhbCBwYXR0ZXJuICR7X2lzc3VlLnBhdHRlcm59YDsKICAgICAgICByZXR1cm4gYEludmFsaWQgJHtOb3Vuc1tfaXNzdWUuZm9ybWF0XSA/PyBpc3N1ZTIuZm9ybWF0fWA7CiAgICAgIH0KICAgICAgY2FzZSAibm90X211bHRpcGxlX29mIjoKICAgICAgICByZXR1cm4gYE51bWVybyBub24gdmFsaWRvOiBkZXZlIGVzc2VyZSB1biBtdWx0aXBsbyBkaSAke2lzc3VlMi5kaXZpc29yfWA7CiAgICAgIGNhc2UgInVucmVjb2duaXplZF9rZXlzIjoKICAgICAgICByZXR1cm4gYENoaWF2JHtpc3N1ZTIua2V5cy5sZW5ndGggPiAxID8gImkiIDogImUifSBub24gcmljb25vc2NpdXQke2lzc3VlMi5rZXlzLmxlbmd0aCA+IDEgPyAiZSIgOiAiYSJ9OiAke2pvaW5WYWx1ZXMoaXNzdWUyLmtleXMsICIsICIpfWA7CiAgICAgIGNhc2UgImludmFsaWRfa2V5IjoKICAgICAgICByZXR1cm4gYENoaWF2ZSBub24gdmFsaWRhIGluICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBjYXNlICJpbnZhbGlkX3VuaW9uIjoKICAgICAgICByZXR1cm4gIklucHV0IG5vbiB2YWxpZG8iOwogICAgICBjYXNlICJpbnZhbGlkX2VsZW1lbnQiOgogICAgICAgIHJldHVybiBgVmFsb3JlIG5vbiB2YWxpZG8gaW4gJHtpc3N1ZTIub3JpZ2lufWA7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIGBJbnB1dCBub24gdmFsaWRvYDsKICAgIH0KICB9Owp9OwpmdW5jdGlvbiBpdF9kZWZhdWx0KCkgewogIHJldHVybiB7CiAgICBsb2NhbGVFcnJvcjogZXJyb3IxOSgpCiAgfTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9sb2NhbGVzL2phLmpzCnZhciBlcnJvcjIwID0gKCkgPT4gewogIGNvbnN0IFNpemFibGUgPSB7CiAgICBzdHJpbmc6IHsgdW5pdDogIuaWh+WtlyIsIHZlcmI6ICLjgafjgYLjgosiIH0sCiAgICBmaWxlOiB7IHVuaXQ6ICLjg5DjgqTjg4giLCB2ZXJiOiAi44Gn44GC44KLIiB9LAogICAgYXJyYXk6IHsgdW5pdDogIuimgee0oCIsIHZlcmI6ICLjgafjgYLjgosiIH0sCiAgICBzZXQ6IHsgdW5pdDogIuimgee0oCIsIHZlcmI6ICLjgafjgYLjgosiIH0KICB9OwogIGZ1bmN0aW9uIGdldFNpemluZyhvcmlnaW4pIHsKICAgIHJldHVybiBTaXphYmxlW29yaWdpbl0gPz8gbnVsbDsKICB9CiAgY29uc3QgcGFyc2VkVHlwZTcgPSAoZGF0YSkgPT4gewogICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhOwogICAgc3dpdGNoICh0KSB7CiAgICAgIGNhc2UgIm51bWJlciI6IHsKICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gIk5hTiIgOiAi5pWw5YCkIjsKICAgICAgfQogICAgICBjYXNlICJvYmplY3QiOiB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHsKICAgICAgICAgIHJldHVybiAi6YWN5YiXIjsKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHsKICAgICAgICAgIHJldHVybiAibnVsbCI7CiAgICAgICAgfQogICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZGF0YSkgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgZGF0YS5jb25zdHJ1Y3RvcikgewogICAgICAgICAgcmV0dXJuIGRhdGEuY29uc3RydWN0b3IubmFtZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0OwogIH07CiAgY29uc3QgTm91bnMgPSB7CiAgICByZWdleDogIuWFpeWKm+WApCIsCiAgICBlbWFpbDogIuODoeODvOODq+OCouODieODrOOCuSIsCiAgICB1cmw6ICJVUkwiLAogICAgZW1vamk6ICLntbXmloflrZciLAogICAgdXVpZDogIlVVSUQiLAogICAgdXVpZHY0OiAiVVVJRHY0IiwKICAgIHV1aWR2NjogIlVVSUR2NiIsCiAgICBuYW5vaWQ6ICJuYW5vaWQiLAogICAgZ3VpZDogIkdVSUQiLAogICAgY3VpZDogImN1aWQiLAogICAgY3VpZDI6ICJjdWlkMiIsCiAgICB1bGlkOiAiVUxJRCIsCiAgICB4aWQ6ICJYSUQiLAogICAga3N1aWQ6ICJLU1VJRCIsCiAgICBkYXRldGltZTogIklTT+aXpeaZgiIsCiAgICBkYXRlOiAiSVNP5pel5LuYIiwKICAgIHRpbWU6ICJJU0/mmYLliLsiLAogICAgZHVyYXRpb246ICJJU0/mnJ/plpMiLAogICAgaXB2NDogIklQdjTjgqLjg4njg6zjgrkiLAogICAgaXB2NjogIklQdjbjgqLjg4njg6zjgrkiLAogICAgY2lkcnY0OiAiSVB2NOevhOWbsiIsCiAgICBjaWRydjY6ICJJUHY256+E5ZuyIiwKICAgIGJhc2U2NDogImJhc2U2NOOCqOODs+OCs+ODvOODieaWh+Wtl+WIlyIsCiAgICBiYXNlNjR1cmw6ICJiYXNlNjR1cmzjgqjjg7PjgrPjg7zjg4nmloflrZfliJciLAogICAganNvbl9zdHJpbmc6ICJKU09O5paH5a2X5YiXIiwKICAgIGUxNjQ6ICJFLjE2NOeVquWPtyIsCiAgICBqd3Q6ICJKV1QiLAogICAgdGVtcGxhdGVfbGl0ZXJhbDogIuWFpeWKm+WApCIKICB9OwogIHJldHVybiAoaXNzdWUyKSA9PiB7CiAgICBzd2l0Y2ggKGlzc3VlMi5jb2RlKSB7CiAgICAgIGNhc2UgImludmFsaWRfdHlwZSI6CiAgICAgICAgcmV0dXJuIGDnhKHlirnjgarlhaXlips6ICR7aXNzdWUyLmV4cGVjdGVkfeOBjOacn+W+heOBleOCjOOBvuOBl+OBn+OBjOOAgSR7cGFyc2VkVHlwZTcoaXNzdWUyLmlucHV0KX3jgYzlhaXlipvjgZXjgozjgb7jgZfjgZ9gOwogICAgICBjYXNlICJpbnZhbGlkX3ZhbHVlIjoKICAgICAgICBpZiAoaXNzdWUyLnZhbHVlcy5sZW5ndGggPT09IDEpCiAgICAgICAgICByZXR1cm4gYOeEoeWKueOBquWFpeWKmzogJHtzdHJpbmdpZnlQcmltaXRpdmUoaXNzdWUyLnZhbHVlc1swXSl944GM5pyf5b6F44GV44KM44G+44GX44GfYDsKICAgICAgICByZXR1cm4gYOeEoeWKueOBqumBuOaKnjogJHtqb2luVmFsdWVzKGlzc3VlMi52YWx1ZXMsICLjgIEiKX3jga7jgYTjgZrjgozjgYvjgafjgYLjgovlv4XopoHjgYzjgYLjgorjgb7jgZlgOwogICAgICBjYXNlICJ0b29fYmlnIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAi5Lul5LiL44Gn44GC44KLIiA6ICLjgojjgorlsI/jgZXjgYQiOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKQogICAgICAgICAgcmV0dXJuIGDlpKfjgY3jgZnjgY7jgovlgKQ6ICR7aXNzdWUyLm9yaWdpbiA/PyAi5YCkIn3jga8ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9JHtzaXppbmcudW5pdCA/PyAi6KaB57SgIn0ke2Fkan3lv4XopoHjgYzjgYLjgorjgb7jgZlgOwogICAgICAgIHJldHVybiBg5aSn44GN44GZ44GO44KL5YCkOiAke2lzc3VlMi5vcmlnaW4gPz8gIuWApCJ944GvJHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfSR7YWRqfeW/heimgeOBjOOBguOCiuOBvuOBmWA7CiAgICAgIH0KICAgICAgY2FzZSAidG9vX3NtYWxsIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAi5Lul5LiK44Gn44GC44KLIiA6ICLjgojjgorlpKfjgY3jgYQiOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKQogICAgICAgICAgcmV0dXJuIGDlsI/jgZXjgZnjgY7jgovlgKQ6ICR7aXNzdWUyLm9yaWdpbn3jga8ke2lzc3VlMi5taW5pbXVtLnRvU3RyaW5nKCl9JHtzaXppbmcudW5pdH0ke2Fkan3lv4XopoHjgYzjgYLjgorjgb7jgZlgOwogICAgICAgIHJldHVybiBg5bCP44GV44GZ44GO44KL5YCkOiAke2lzc3VlMi5vcmlnaW5944GvJHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSR7YWRqfeW/heimgeOBjOOBguOCiuOBvuOBmWA7CiAgICAgIH0KICAgICAgY2FzZSAiaW52YWxpZF9mb3JtYXQiOiB7CiAgICAgICAgY29uc3QgX2lzc3VlID0gaXNzdWUyOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAic3RhcnRzX3dpdGgiKQogICAgICAgICAgcmV0dXJuIGDnhKHlirnjgarmloflrZfliJc6ICIke19pc3N1ZS5wcmVmaXh9IuOBp+Wni+OBvuOCi+W/heimgeOBjOOBguOCiuOBvuOBmWA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJlbmRzX3dpdGgiKQogICAgICAgICAgcmV0dXJuIGDnhKHlirnjgarmloflrZfliJc6ICIke19pc3N1ZS5zdWZmaXh9IuOBp+e1guOCj+OCi+W/heimgeOBjOOBguOCiuOBvuOBmWA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJpbmNsdWRlcyIpCiAgICAgICAgICByZXR1cm4gYOeEoeWKueOBquaWh+Wtl+WIlzogIiR7X2lzc3VlLmluY2x1ZGVzfSLjgpLlkKvjgoDlv4XopoHjgYzjgYLjgorjgb7jgZlgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAicmVnZXgiKQogICAgICAgICAgcmV0dXJuIGDnhKHlirnjgarmloflrZfliJc6IOODkeOCv+ODvOODsyR7X2lzc3VlLnBhdHRlcm5944Gr5LiA6Ie044GZ44KL5b+F6KaB44GM44GC44KK44G+44GZYDsKICAgICAgICByZXR1cm4gYOeEoeWKueOBqiR7Tm91bnNbX2lzc3VlLmZvcm1hdF0gPz8gaXNzdWUyLmZvcm1hdH1gOwogICAgICB9CiAgICAgIGNhc2UgIm5vdF9tdWx0aXBsZV9vZiI6CiAgICAgICAgcmV0dXJuIGDnhKHlirnjgarmlbDlgKQ6ICR7aXNzdWUyLmRpdmlzb3J944Gu5YCN5pWw44Gn44GC44KL5b+F6KaB44GM44GC44KK44G+44GZYDsKICAgICAgY2FzZSAidW5yZWNvZ25pemVkX2tleXMiOgogICAgICAgIHJldHVybiBg6KqN6K2Y44GV44KM44Gm44GE44Gq44GE44Kt44O8JHtpc3N1ZTIua2V5cy5sZW5ndGggPiAxID8gIue+pCIgOiAiIn06ICR7am9pblZhbHVlcyhpc3N1ZTIua2V5cywgIuOAgSIpfWA7CiAgICAgIGNhc2UgImludmFsaWRfa2V5IjoKICAgICAgICByZXR1cm4gYCR7aXNzdWUyLm9yaWdpbn3lhoXjga7nhKHlirnjgarjgq3jg7xgOwogICAgICBjYXNlICJpbnZhbGlkX3VuaW9uIjoKICAgICAgICByZXR1cm4gIueEoeWKueOBquWFpeWKmyI7CiAgICAgIGNhc2UgImludmFsaWRfZWxlbWVudCI6CiAgICAgICAgcmV0dXJuIGAke2lzc3VlMi5vcmlnaW595YaF44Gu54Sh5Yq544Gq5YCkYDsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gYOeEoeWKueOBquWFpeWKm2A7CiAgICB9CiAgfTsKfTsKZnVuY3Rpb24gamFfZGVmYXVsdCgpIHsKICByZXR1cm4gewogICAgbG9jYWxlRXJyb3I6IGVycm9yMjAoKQogIH07Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvbG9jYWxlcy9rYS5qcwp2YXIgcGFyc2VkVHlwZTQgPSAoZGF0YSkgPT4gewogIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTsKICBzd2l0Y2ggKHQpIHsKICAgIGNhc2UgIm51bWJlciI6IHsKICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/ICJOYU4iIDogIuGDoOGDmOGDquGDruGDleGDmCI7CiAgICB9CiAgICBjYXNlICJvYmplY3QiOiB7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgICAgcmV0dXJuICLhg5vhg5Dhg6Hhg5jhg5Xhg5giOwogICAgICB9CiAgICAgIGlmIChkYXRhID09PSBudWxsKSB7CiAgICAgICAgcmV0dXJuICJudWxsIjsKICAgICAgfQogICAgICBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGRhdGEpICE9PSBPYmplY3QucHJvdG90eXBlICYmIGRhdGEuY29uc3RydWN0b3IpIHsKICAgICAgICByZXR1cm4gZGF0YS5jb25zdHJ1Y3Rvci5uYW1lOwogICAgICB9CiAgICB9CiAgfQogIGNvbnN0IHR5cGVNYXAgPSB7CiAgICBzdHJpbmc6ICLhg6Hhg6Lhg6Dhg5jhg5zhg5Lhg5giLAogICAgYm9vbGVhbjogIuGDkeGDo+GDmuGDlOGDkOGDnOGDmCIsCiAgICB1bmRlZmluZWQ6ICJ1bmRlZmluZWQiLAogICAgYmlnaW50OiAiYmlnaW50IiwKICAgIHN5bWJvbDogInN5bWJvbCIsCiAgICBmdW5jdGlvbjogIuGDpOGDo+GDnOGDpeGDquGDmOGDkCIKICB9OwogIHJldHVybiB0eXBlTWFwW3RdID8/IHQ7Cn07CnZhciBlcnJvcjIxID0gKCkgPT4gewogIGNvbnN0IFNpemFibGUgPSB7CiAgICBzdHJpbmc6IHsgdW5pdDogIuGDoeGDmOGDm+GDkeGDneGDmuGDnSIsIHZlcmI6ICLhg6Phg5zhg5Phg5Ag4YOo4YOU4YOY4YOq4YOQ4YOV4YOT4YOU4YOhIiB9LAogICAgZmlsZTogeyB1bml0OiAi4YOR4YOQ4YOY4YOi4YOYIiwgdmVyYjogIuGDo+GDnOGDk+GDkCDhg6jhg5Thg5jhg6rhg5Dhg5Xhg5Phg5Thg6EiIH0sCiAgICBhcnJheTogeyB1bml0OiAi4YOU4YOa4YOU4YOb4YOU4YOc4YOi4YOYIiwgdmVyYjogIuGDo+GDnOGDk+GDkCDhg6jhg5Thg5jhg6rhg5Dhg5Xhg5Phg5Thg6EiIH0sCiAgICBzZXQ6IHsgdW5pdDogIuGDlOGDmuGDlOGDm+GDlOGDnOGDouGDmCIsIHZlcmI6ICLhg6Phg5zhg5Phg5Ag4YOo4YOU4YOY4YOq4YOQ4YOV4YOT4YOU4YOhIiB9CiAgfTsKICBmdW5jdGlvbiBnZXRTaXppbmcob3JpZ2luKSB7CiAgICByZXR1cm4gU2l6YWJsZVtvcmlnaW5dID8/IG51bGw7CiAgfQogIGNvbnN0IE5vdW5zID0gewogICAgcmVnZXg6ICLhg6jhg5Thg6fhg5Xhg5Dhg5zhg5AiLAogICAgZW1haWw6ICLhg5Thg5ot4YOk4YOd4YOh4YOi4YOY4YOhIOGDm+GDmOGDoeGDkOGDm+GDkOGDoOGDl+GDmCIsCiAgICB1cmw6ICJVUkwiLAogICAgZW1vamk6ICLhg5Thg5vhg53hg6/hg5giLAogICAgdXVpZDogIlVVSUQiLAogICAgdXVpZHY0OiAiVVVJRHY0IiwKICAgIHV1aWR2NjogIlVVSUR2NiIsCiAgICBuYW5vaWQ6ICJuYW5vaWQiLAogICAgZ3VpZDogIkdVSUQiLAogICAgY3VpZDogImN1aWQiLAogICAgY3VpZDI6ICJjdWlkMiIsCiAgICB1bGlkOiAiVUxJRCIsCiAgICB4aWQ6ICJYSUQiLAogICAga3N1aWQ6ICJLU1VJRCIsCiAgICBkYXRldGltZTogIuGDl+GDkOGDoOGDmOGDpuGDmC3hg5Phg6Dhg50iLAogICAgZGF0ZTogIuGDl+GDkOGDoOGDmOGDpuGDmCIsCiAgICB0aW1lOiAi4YOT4YOg4YOdIiwKICAgIGR1cmF0aW9uOiAi4YOu4YOQ4YOc4YOS4YOg4YOr4YOa4YOY4YOV4YOd4YOR4YOQIiwKICAgIGlwdjQ6ICJJUHY0IOGDm+GDmOGDoeGDkOGDm+GDkOGDoOGDl+GDmCIsCiAgICBpcHY2OiAiSVB2NiDhg5vhg5jhg6Hhg5Dhg5vhg5Dhg6Dhg5fhg5giLAogICAgY2lkcnY0OiAiSVB2NCDhg5Phg5jhg5Dhg57hg5Dhg5bhg53hg5zhg5giLAogICAgY2lkcnY2OiAiSVB2NiDhg5Phg5jhg5Dhg57hg5Dhg5bhg53hg5zhg5giLAogICAgYmFzZTY0OiAiYmFzZTY0LeGDmeGDneGDk+GDmOGDoOGDlOGDkeGDo+GDmuGDmCDhg6Hhg6Lhg6Dhg5jhg5zhg5Lhg5giLAogICAgYmFzZTY0dXJsOiAiYmFzZTY0dXJsLeGDmeGDneGDk+GDmOGDoOGDlOGDkeGDo+GDmuGDmCDhg6Hhg6Lhg6Dhg5jhg5zhg5Lhg5giLAogICAganNvbl9zdHJpbmc6ICJKU09OIOGDoeGDouGDoOGDmOGDnOGDkuGDmCIsCiAgICBlMTY0OiAiRS4xNjQg4YOc4YOd4YOb4YOU4YOg4YOYIiwKICAgIGp3dDogIkpXVCIsCiAgICB0ZW1wbGF0ZV9saXRlcmFsOiAi4YOo4YOU4YOn4YOV4YOQ4YOc4YOQIgogIH07CiAgcmV0dXJuIChpc3N1ZTIpID0+IHsKICAgIHN3aXRjaCAoaXNzdWUyLmNvZGUpIHsKICAgICAgY2FzZSAiaW52YWxpZF90eXBlIjoKICAgICAgICByZXR1cm4gYOGDkOGDoOGDkOGDoeGDrOGDneGDoOGDmCDhg6jhg5Thg6fhg5Xhg5Dhg5zhg5A6IOGDm+GDneGDoeGDkOGDmuGDneGDk+GDnOGDlOGDmuGDmCAke2lzc3VlMi5leHBlY3RlZH0sIOGDm+GDmOGDpuGDlOGDkeGDo+GDmuGDmCAke3BhcnNlZFR5cGU0KGlzc3VlMi5pbnB1dCl9YDsKICAgICAgY2FzZSAiaW52YWxpZF92YWx1ZSI6CiAgICAgICAgaWYgKGlzc3VlMi52YWx1ZXMubGVuZ3RoID09PSAxKQogICAgICAgICAgcmV0dXJuIGDhg5Dhg6Dhg5Dhg6Hhg6zhg53hg6Dhg5gg4YOo4YOU4YOn4YOV4YOQ4YOc4YOQOiDhg5vhg53hg6Hhg5Dhg5rhg53hg5Phg5zhg5Thg5rhg5ggJHtzdHJpbmdpZnlQcmltaXRpdmUoaXNzdWUyLnZhbHVlc1swXSl9YDsKICAgICAgICByZXR1cm4gYOGDkOGDoOGDkOGDoeGDrOGDneGDoOGDmCDhg5Xhg5Dhg6Dhg5jhg5Dhg5zhg6Lhg5g6IOGDm+GDneGDoeGDkOGDmuGDneGDk+GDnOGDlOGDmuGDmOGDkCDhg5Thg6Dhg5ct4YOU4YOg4YOX4YOYICR7am9pblZhbHVlcyhpc3N1ZTIudmFsdWVzLCAifCIpfS3hg5Phg5Dhg5xgOwogICAgICBjYXNlICJ0b29fYmlnIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPD0iIDogIjwiOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKQogICAgICAgICAgcmV0dXJuIGDhg5bhg5Thg5Phg5vhg5Thg6Lhg5Dhg5Mg4YOT4YOY4YOT4YOYOiDhg5vhg53hg6Hhg5Dhg5rhg53hg5Phg5zhg5Thg5rhg5ggJHtpc3N1ZTIub3JpZ2luID8/ICLhg5vhg5zhg5jhg6jhg5Xhg5zhg5Thg5rhg53hg5Hhg5AifSAke3NpemluZy52ZXJifSAke2Fkan0ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9ICR7c2l6aW5nLnVuaXR9YDsKICAgICAgICByZXR1cm4gYOGDluGDlOGDk+GDm+GDlOGDouGDkOGDkyDhg5Phg5jhg5Phg5g6IOGDm+GDneGDoeGDkOGDmuGDneGDk+GDnOGDlOGDmuGDmCAke2lzc3VlMi5vcmlnaW4gPz8gIuGDm+GDnOGDmOGDqOGDleGDnOGDlOGDmuGDneGDkeGDkCJ9IOGDmOGDp+GDneGDoSAke2Fkan0ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9YDsKICAgICAgfQogICAgICBjYXNlICJ0b29fc21hbGwiOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI+PSIgOiAiPiI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpIHsKICAgICAgICAgIHJldHVybiBg4YOW4YOU4YOT4YOb4YOU4YOi4YOQ4YOTIOGDnuGDkOGDouGDkOGDoOGDkDog4YOb4YOd4YOh4YOQ4YOa4YOd4YOT4YOc4YOU4YOa4YOYICR7aXNzdWUyLm9yaWdpbn0gJHtzaXppbmcudmVyYn0gJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0fWA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBg4YOW4YOU4YOT4YOb4YOU4YOi4YOQ4YOTIOGDnuGDkOGDouGDkOGDoOGDkDog4YOb4YOd4YOh4YOQ4YOa4YOd4YOT4YOc4YOU4YOa4YOYICR7aXNzdWUyLm9yaWdpbn0g4YOY4YOn4YOd4YOhICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgImludmFsaWRfZm9ybWF0IjogewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInN0YXJ0c193aXRoIikgewogICAgICAgICAgcmV0dXJuIGDhg5Dhg6Dhg5Dhg6Hhg6zhg53hg6Dhg5gg4YOh4YOi4YOg4YOY4YOc4YOS4YOYOiDhg6Phg5zhg5Phg5Ag4YOY4YOs4YOn4YOU4YOR4YOd4YOT4YOU4YOhICIke19pc3N1ZS5wcmVmaXh9Ii3hg5jhg5dgOwogICAgICAgIH0KICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImVuZHNfd2l0aCIpCiAgICAgICAgICByZXR1cm4gYOGDkOGDoOGDkOGDoeGDrOGDneGDoOGDmCDhg6Hhg6Lhg6Dhg5jhg5zhg5Lhg5g6IOGDo+GDnOGDk+GDkCDhg5vhg5fhg5Dhg5Xhg6Dhg5Phg5Thg5Hhg53hg5Phg5Thg6EgIiR7X2lzc3VlLnN1ZmZpeH0iLeGDmOGDl2A7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJpbmNsdWRlcyIpCiAgICAgICAgICByZXR1cm4gYOGDkOGDoOGDkOGDoeGDrOGDneGDoOGDmCDhg6Hhg6Lhg6Dhg5jhg5zhg5Lhg5g6IOGDo+GDnOGDk+GDkCDhg6jhg5Thg5jhg6rhg5Dhg5Xhg5Phg5Thg6EgIiR7X2lzc3VlLmluY2x1ZGVzfSIt4YOhYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInJlZ2V4IikKICAgICAgICAgIHJldHVybiBg4YOQ4YOg4YOQ4YOh4YOs4YOd4YOg4YOYIOGDoeGDouGDoOGDmOGDnOGDkuGDmDog4YOj4YOc4YOT4YOQIOGDqOGDlOGDlOGDoeGDkOGDkeGDkOGDm+GDlOGDkeGDneGDk+GDlOGDoSDhg6jhg5Dhg5Hhg5rhg53hg5zhg6EgJHtfaXNzdWUucGF0dGVybn1gOwogICAgICAgIHJldHVybiBg4YOQ4YOg4YOQ4YOh4YOs4YOd4YOg4YOYICR7Tm91bnNbX2lzc3VlLmZvcm1hdF0gPz8gaXNzdWUyLmZvcm1hdH1gOwogICAgICB9CiAgICAgIGNhc2UgIm5vdF9tdWx0aXBsZV9vZiI6CiAgICAgICAgcmV0dXJuIGDhg5Dhg6Dhg5Dhg6Hhg6zhg53hg6Dhg5gg4YOg4YOY4YOq4YOu4YOV4YOYOiDhg6Phg5zhg5Phg5Ag4YOY4YOn4YOd4YOhICR7aXNzdWUyLmRpdmlzb3J9LeGDmOGDoSDhg6/hg5Thg6Dhg5Dhg5Phg5hgOwogICAgICBjYXNlICJ1bnJlY29nbml6ZWRfa2V5cyI6CiAgICAgICAgcmV0dXJuIGDhg6Phg6rhg5zhg53hg5Hhg5gg4YOS4YOQ4YOh4YOQ4YOm4YOU4YORJHtpc3N1ZTIua2V5cy5sZW5ndGggPiAxID8gIuGDlOGDkeGDmCIgOiAi4YOYIn06ICR7am9pblZhbHVlcyhpc3N1ZTIua2V5cywgIiwgIil9YDsKICAgICAgY2FzZSAiaW52YWxpZF9rZXkiOgogICAgICAgIHJldHVybiBg4YOQ4YOg4YOQ4YOh4YOs4YOd4YOg4YOYIOGDkuGDkOGDoeGDkOGDpuGDlOGDkeGDmCAke2lzc3VlMi5vcmlnaW59LeGDqOGDmGA7CiAgICAgIGNhc2UgImludmFsaWRfdW5pb24iOgogICAgICAgIHJldHVybiAi4YOQ4YOg4YOQ4YOh4YOs4YOd4YOg4YOYIOGDqOGDlOGDp+GDleGDkOGDnOGDkCI7CiAgICAgIGNhc2UgImludmFsaWRfZWxlbWVudCI6CiAgICAgICAgcmV0dXJuIGDhg5Dhg6Dhg5Dhg6Hhg6zhg53hg6Dhg5gg4YOb4YOc4YOY4YOo4YOV4YOc4YOU4YOa4YOd4YOR4YOQICR7aXNzdWUyLm9yaWdpbn0t4YOo4YOYYDsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gYOGDkOGDoOGDkOGDoeGDrOGDneGDoOGDmCDhg6jhg5Thg6fhg5Xhg5Dhg5zhg5BgOwogICAgfQogIH07Cn07CmZ1bmN0aW9uIGthX2RlZmF1bHQoKSB7CiAgcmV0dXJuIHsKICAgIGxvY2FsZUVycm9yOiBlcnJvcjIxKCkKICB9Owp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2xvY2FsZXMva20uanMKdmFyIGVycm9yMjIgPSAoKSA9PiB7CiAgY29uc3QgU2l6YWJsZSA9IHsKICAgIHN0cmluZzogeyB1bml0OiAi4Z6P4Z694Z6i4Z6A4Z+S4Z6f4Z6aIiwgdmVyYjogIuGeguGeveGemuGemOGetuGekyIgfSwKICAgIGZpbGU6IHsgdW5pdDogIuGelOGfgyIsIHZlcmI6ICLhnoLhnr3hnprhnpjhnrbhnpMiIH0sCiAgICBhcnJheTogeyB1bml0OiAi4Z6S4Z624Z6P4Z67IiwgdmVyYjogIuGeguGeveGemuGemOGetuGekyIgfSwKICAgIHNldDogeyB1bml0OiAi4Z6S4Z624Z6P4Z67IiwgdmVyYjogIuGeguGeveGemuGemOGetuGekyIgfQogIH07CiAgZnVuY3Rpb24gZ2V0U2l6aW5nKG9yaWdpbikgewogICAgcmV0dXJuIFNpemFibGVbb3JpZ2luXSA/PyBudWxsOwogIH0KICBjb25zdCBwYXJzZWRUeXBlNyA9IChkYXRhKSA9PiB7CiAgICBjb25zdCB0ID0gdHlwZW9mIGRhdGE7CiAgICBzd2l0Y2ggKHQpIHsKICAgICAgY2FzZSAibnVtYmVyIjogewogICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0YSkgPyAi4Z6Y4Z634Z6T4Z6Y4Z+C4Z6T4Z6H4Z624Z6b4Z+B4Z6BIChOYU4pIiA6ICLhnpvhn4HhnoEiOwogICAgICB9CiAgICAgIGNhc2UgIm9iamVjdCI6IHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkgewogICAgICAgICAgcmV0dXJuICLhnqLhnrbhnprhn4EgKEFycmF5KSI7CiAgICAgICAgfQogICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gIuGeguGfkuGemOGetuGek+Gej+GemOGfkuGem+GfgyAobnVsbCkiOwogICAgICAgIH0KICAgICAgICBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGRhdGEpICE9PSBPYmplY3QucHJvdG90eXBlICYmIGRhdGEuY29uc3RydWN0b3IpIHsKICAgICAgICAgIHJldHVybiBkYXRhLmNvbnN0cnVjdG9yLm5hbWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdDsKICB9OwogIGNvbnN0IE5vdW5zID0gewogICAgcmVnZXg6ICLhnpHhnrfhnpPhn5LhnpPhnpPhn5DhnpnhnpThnonhn5LhnoXhnrzhnpsiLAogICAgZW1haWw6ICLhnqLhnrbhnp/hnpnhnorhn5LhnovhnrbhnpPhnqLhn4rhnrjhnpjhn4LhnpsiLAogICAgdXJsOiAiVVJMIiwKICAgIGVtb2ppOiAi4Z6f4Z6J4Z+S4Z6J4Z624Z6i4Z624Z6a4Z6Y4Z+S4Z6Y4Z6O4Z+NIiwKICAgIHV1aWQ6ICJVVUlEIiwKICAgIHV1aWR2NDogIlVVSUR2NCIsCiAgICB1dWlkdjY6ICJVVUlEdjYiLAogICAgbmFub2lkOiAibmFub2lkIiwKICAgIGd1aWQ6ICJHVUlEIiwKICAgIGN1aWQ6ICJjdWlkIiwKICAgIGN1aWQyOiAiY3VpZDIiLAogICAgdWxpZDogIlVMSUQiLAogICAgeGlkOiAiWElEIiwKICAgIGtzdWlkOiAiS1NVSUQiLAogICAgZGF0ZXRpbWU6ICLhnoDhnrbhnpvhnpThnprhnrfhnoXhn5Lhnobhn4HhnpEg4Z6T4Z634Z6E4Z6Y4Z+J4Z+E4Z6EIElTTyIsCiAgICBkYXRlOiAi4Z6A4Z624Z6b4Z6U4Z6a4Z634Z6F4Z+S4Z6G4Z+B4Z6RIElTTyIsCiAgICB0aW1lOiAi4Z6Y4Z+J4Z+E4Z6EIElTTyIsCiAgICBkdXJhdGlvbjogIuGemuGemeGfiOGeluGfgeGemyBJU08iLAogICAgaXB2NDogIuGeouGetuGen+GemeGeiuGfkuGei+GetuGekyBJUHY0IiwKICAgIGlwdjY6ICLhnqLhnrbhnp/hnpnhnorhn5LhnovhnrbhnpMgSVB2NiIsCiAgICBjaWRydjQ6ICLhnorhn4LhnpPhnqLhnrbhnp/hnpnhnorhn5LhnovhnrbhnpMgSVB2NCIsCiAgICBjaWRydjY6ICLhnorhn4LhnpPhnqLhnrbhnp/hnpnhnorhn5LhnovhnrbhnpMgSVB2NiIsCiAgICBiYXNlNjQ6ICLhnoHhn5Lhnp/hn4LhnqLhnoDhn5Lhnp/hnprhnqLhn4rhnrfhnoDhnrzhnoogYmFzZTY0IiwKICAgIGJhc2U2NHVybDogIuGegeGfkuGen+GfguGeouGegOGfkuGen+GemuGeouGfiuGet+GegOGevOGeiiBiYXNlNjR1cmwiLAogICAganNvbl9zdHJpbmc6ICLhnoHhn5Lhnp/hn4LhnqLhnoDhn5Lhnp/hnpogSlNPTiIsCiAgICBlMTY0OiAi4Z6b4Z+B4Z6BIEUuMTY0IiwKICAgIGp3dDogIkpXVCIsCiAgICB0ZW1wbGF0ZV9saXRlcmFsOiAi4Z6R4Z634Z6T4Z+S4Z6T4Z6T4Z+Q4Z6Z4Z6U4Z6J4Z+S4Z6F4Z684Z6bIgogIH07CiAgcmV0dXJuIChpc3N1ZTIpID0+IHsKICAgIHN3aXRjaCAoaXNzdWUyLmNvZGUpIHsKICAgICAgY2FzZSAiaW52YWxpZF90eXBlIjoKICAgICAgICByZXR1cm4gYOGekeGet+Gek+GfkuGek+Gek+GfkOGemeGelOGeieGfkuGeheGevOGem+GemOGet+Gek+Gej+GfkuGemuGeueGemOGej+GfkuGemuGevOGenOGfliDhno/hn5LhnprhnrzhnpzhnoDhnrbhnpogJHtpc3N1ZTIuZXhwZWN0ZWR9IOGelOGfieGeu+Gek+GfkuGej+GfguGekeGekeGeveGem+GelOGetuGekyAke3BhcnNlZFR5cGU3KGlzc3VlMi5pbnB1dCl9YDsKICAgICAgY2FzZSAiaW52YWxpZF92YWx1ZSI6CiAgICAgICAgaWYgKGlzc3VlMi52YWx1ZXMubGVuZ3RoID09PSAxKQogICAgICAgICAgcmV0dXJuIGDhnpHhnrfhnpPhn5LhnpPhnpPhn5DhnpnhnpThnonhn5LhnoXhnrzhnpvhnpjhnrfhnpPhno/hn5Lhnprhnrnhnpjhno/hn5Lhnprhnrzhnpzhn5Yg4Z6P4Z+S4Z6a4Z684Z6c4Z6A4Z624Z6aICR7c3RyaW5naWZ5UHJpbWl0aXZlKGlzc3VlMi52YWx1ZXNbMF0pfWA7CiAgICAgICAgcmV0dXJuIGDhnofhnpjhn5Lhnprhnr7hnp/hnpjhnrfhnpPhno/hn5Lhnprhnrnhnpjhno/hn5Lhnprhnrzhnpzhn5Yg4Z6P4Z+S4Z6a4Z684Z6c4Z6H4Z624Z6Y4Z694Z6Z4Z6A4Z+S4Z6T4Z674Z6E4Z6F4Z+G4Z6O4Z+E4Z6YICR7am9pblZhbHVlcyhpc3N1ZTIudmFsdWVzLCAifCIpfWA7CiAgICAgIGNhc2UgInRvb19iaWciOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI8PSIgOiAiPCI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpCiAgICAgICAgICByZXR1cm4gYOGekuGfhuGeluGfgeGegOGfliDhno/hn5LhnprhnrzhnpzhnoDhnrbhnpogJHtpc3N1ZTIub3JpZ2luID8/ICLhno/hnpjhn5Lhnpvhn4MifSAke2Fkan0gJHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0ID8/ICLhnpLhnrbhno/hnrsifWA7CiAgICAgICAgcmV0dXJuIGDhnpLhn4bhnpbhn4HhnoDhn5Yg4Z6P4Z+S4Z6a4Z684Z6c4Z6A4Z624Z6aICR7aXNzdWUyLm9yaWdpbiA/PyAi4Z6P4Z6Y4Z+S4Z6b4Z+DIn0gJHthZGp9ICR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgInRvb19zbWFsbCI6IHsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIj49IiA6ICI+IjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykgewogICAgICAgICAgcmV0dXJuIGDhno/hnrzhnoXhnpbhn4HhnoDhn5Yg4Z6P4Z+S4Z6a4Z684Z6c4Z6A4Z624Z6aICR7aXNzdWUyLm9yaWdpbn0gJHthZGp9ICR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdH1gOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYOGej+GevOGeheGeluGfgeGegOGfliDhno/hn5LhnprhnrzhnpzhnoDhnrbhnpogJHtpc3N1ZTIub3JpZ2lufSAke2Fkan0gJHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfWA7CiAgICAgIH0KICAgICAgY2FzZSAiaW52YWxpZF9mb3JtYXQiOiB7CiAgICAgICAgY29uc3QgX2lzc3VlID0gaXNzdWUyOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAic3RhcnRzX3dpdGgiKSB7CiAgICAgICAgICByZXR1cm4gYOGegeGfkuGen+GfguGeouGegOGfkuGen+GemuGemOGet+Gek+Gej+GfkuGemuGeueGemOGej+GfkuGemuGevOGenOGfliDhno/hn5LhnprhnrzhnpzhnoXhnrbhnpThn4vhnpXhn5Lhno/hnr7hnpjhnorhn4ThnpkgIiR7X2lzc3VlLnByZWZpeH0iYDsKICAgICAgICB9CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJlbmRzX3dpdGgiKQogICAgICAgICAgcmV0dXJuIGDhnoHhn5Lhnp/hn4LhnqLhnoDhn5Lhnp/hnprhnpjhnrfhnpPhno/hn5Lhnprhnrnhnpjhno/hn5Lhnprhnrzhnpzhn5Yg4Z6P4Z+S4Z6a4Z684Z6c4Z6U4Z6J4Z+S4Z6F4Z6U4Z+L4Z6K4Z+E4Z6ZICIke19pc3N1ZS5zdWZmaXh9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJpbmNsdWRlcyIpCiAgICAgICAgICByZXR1cm4gYOGegeGfkuGen+GfguGeouGegOGfkuGen+GemuGemOGet+Gek+Gej+GfkuGemuGeueGemOGej+GfkuGemuGevOGenOGfliDhno/hn5LhnprhnrzhnpzhnpjhnrbhnpMgIiR7X2lzc3VlLmluY2x1ZGVzfSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAicmVnZXgiKQogICAgICAgICAgcmV0dXJuIGDhnoHhn5Lhnp/hn4LhnqLhnoDhn5Lhnp/hnprhnpjhnrfhnpPhno/hn5Lhnprhnrnhnpjhno/hn5Lhnprhnrzhnpzhn5Yg4Z6P4Z+S4Z6a4Z684Z6c4Z6P4Z+C4Z6V4Z+S4Z6C4Z684Z6V4Z+S4Z6C4Z6E4Z6T4Z654Z6E4Z6R4Z6Y4Z+S4Z6a4Z6E4Z+L4Z6K4Z+C4Z6b4Z6U4Z624Z6T4Z6A4Z+G4Z6O4Z6P4Z+LICR7X2lzc3VlLnBhdHRlcm59YDsKICAgICAgICByZXR1cm4gYOGemOGet+Gek+Gej+GfkuGemuGeueGemOGej+GfkuGemuGevOGenOGfliAke05vdW5zW19pc3N1ZS5mb3JtYXRdID8/IGlzc3VlMi5mb3JtYXR9YDsKICAgICAgfQogICAgICBjYXNlICJub3RfbXVsdGlwbGVfb2YiOgogICAgICAgIHJldHVybiBg4Z6b4Z+B4Z6B4Z6Y4Z634Z6T4Z6P4Z+S4Z6a4Z654Z6Y4Z6P4Z+S4Z6a4Z684Z6c4Z+WIOGej+GfkuGemuGevOGenOGej+GfguGeh+GetuGeluGeoOGeu+GeguGeu+GejuGek+GfgyAke2lzc3VlMi5kaXZpc29yfWA7CiAgICAgIGNhc2UgInVucmVjb2duaXplZF9rZXlzIjoKICAgICAgICByZXR1cm4gYOGemuGegOGeg+GevuGeieGen+GfhOGemOGet+Gek+Gen+GfkuGeguGetuGem+Gfi+GfliAke2pvaW5WYWx1ZXMoaXNzdWUyLmtleXMsICIsICIpfWA7CiAgICAgIGNhc2UgImludmFsaWRfa2V5IjoKICAgICAgICByZXR1cm4gYOGen+GfhOGemOGet+Gek+Gej+GfkuGemuGeueGemOGej+GfkuGemuGevOGenOGek+GfheGegOGfkuGek+Geu+GehCAke2lzc3VlMi5vcmlnaW59YDsKICAgICAgY2FzZSAiaW52YWxpZF91bmlvbiI6CiAgICAgICAgcmV0dXJuIGDhnpHhnrfhnpPhn5LhnpPhnpPhn5DhnpnhnpjhnrfhnpPhno/hn5Lhnprhnrnhnpjhno/hn5LhnprhnrzhnpxgOwogICAgICBjYXNlICJpbnZhbGlkX2VsZW1lbnQiOgogICAgICAgIHJldHVybiBg4Z6R4Z634Z6T4Z+S4Z6T4Z6T4Z+Q4Z6Z4Z6Y4Z634Z6T4Z6P4Z+S4Z6a4Z654Z6Y4Z6P4Z+S4Z6a4Z684Z6c4Z6T4Z+F4Z6A4Z+S4Z6T4Z674Z6EICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBg4Z6R4Z634Z6T4Z+S4Z6T4Z6T4Z+Q4Z6Z4Z6Y4Z634Z6T4Z6P4Z+S4Z6a4Z654Z6Y4Z6P4Z+S4Z6a4Z684Z6cYDsKICAgIH0KICB9Owp9OwpmdW5jdGlvbiBrbV9kZWZhdWx0KCkgewogIHJldHVybiB7CiAgICBsb2NhbGVFcnJvcjogZXJyb3IyMigpCiAgfTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9sb2NhbGVzL2toLmpzCmZ1bmN0aW9uIGtoX2RlZmF1bHQoKSB7CiAgcmV0dXJuIGttX2RlZmF1bHQoKTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9sb2NhbGVzL2tvLmpzCnZhciBlcnJvcjIzID0gKCkgPT4gewogIGNvbnN0IFNpemFibGUgPSB7CiAgICBzdHJpbmc6IHsgdW5pdDogIuusuOyekCIsIHZlcmI6ICJ0byBoYXZlIiB9LAogICAgZmlsZTogeyB1bml0OiAi67CU7J207Yq4IiwgdmVyYjogInRvIGhhdmUiIH0sCiAgICBhcnJheTogeyB1bml0OiAi6rCcIiwgdmVyYjogInRvIGhhdmUiIH0sCiAgICBzZXQ6IHsgdW5pdDogIuqwnCIsIHZlcmI6ICJ0byBoYXZlIiB9CiAgfTsKICBmdW5jdGlvbiBnZXRTaXppbmcob3JpZ2luKSB7CiAgICByZXR1cm4gU2l6YWJsZVtvcmlnaW5dID8/IG51bGw7CiAgfQogIGNvbnN0IHBhcnNlZFR5cGU3ID0gKGRhdGEpID0+IHsKICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTsKICAgIHN3aXRjaCAodCkgewogICAgICBjYXNlICJudW1iZXIiOiB7CiAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/ICJOYU4iIDogIm51bWJlciI7CiAgICAgIH0KICAgICAgY2FzZSAib2JqZWN0IjogewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgICAgICByZXR1cm4gImFycmF5IjsKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHsKICAgICAgICAgIHJldHVybiAibnVsbCI7CiAgICAgICAgfQogICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZGF0YSkgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgZGF0YS5jb25zdHJ1Y3RvcikgewogICAgICAgICAgcmV0dXJuIGRhdGEuY29uc3RydWN0b3IubmFtZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0OwogIH07CiAgY29uc3QgTm91bnMgPSB7CiAgICByZWdleDogIuyeheugpSIsCiAgICBlbWFpbDogIuydtOuplOydvCDso7zshowiLAogICAgdXJsOiAiVVJMIiwKICAgIGVtb2ppOiAi7J2066qo7KeAIiwKICAgIHV1aWQ6ICJVVUlEIiwKICAgIHV1aWR2NDogIlVVSUR2NCIsCiAgICB1dWlkdjY6ICJVVUlEdjYiLAogICAgbmFub2lkOiAibmFub2lkIiwKICAgIGd1aWQ6ICJHVUlEIiwKICAgIGN1aWQ6ICJjdWlkIiwKICAgIGN1aWQyOiAiY3VpZDIiLAogICAgdWxpZDogIlVMSUQiLAogICAgeGlkOiAiWElEIiwKICAgIGtzdWlkOiAiS1NVSUQiLAogICAgZGF0ZXRpbWU6ICJJU08g64Kg7Kec7Iuc6rCEIiwKICAgIGRhdGU6ICJJU08g64Kg7KecIiwKICAgIHRpbWU6ICJJU08g7Iuc6rCEIiwKICAgIGR1cmF0aW9uOiAiSVNPIOq4sOqwhCIsCiAgICBpcHY0OiAiSVB2NCDso7zshowiLAogICAgaXB2NjogIklQdjYg7KO87IaMIiwKICAgIGNpZHJ2NDogIklQdjQg67KU7JyEIiwKICAgIGNpZHJ2NjogIklQdjYg67KU7JyEIiwKICAgIGJhc2U2NDogImJhc2U2NCDsnbjsvZTrlKkg66y47J6Q7Je0IiwKICAgIGJhc2U2NHVybDogImJhc2U2NHVybCDsnbjsvZTrlKkg66y47J6Q7Je0IiwKICAgIGpzb25fc3RyaW5nOiAiSlNPTiDrrLjsnpDsl7QiLAogICAgZTE2NDogIkUuMTY0IOuyiO2YuCIsCiAgICBqd3Q6ICJKV1QiLAogICAgdGVtcGxhdGVfbGl0ZXJhbDogIuyeheugpSIKICB9OwogIHJldHVybiAoaXNzdWUyKSA9PiB7CiAgICBzd2l0Y2ggKGlzc3VlMi5jb2RlKSB7CiAgICAgIGNhc2UgImludmFsaWRfdHlwZSI6CiAgICAgICAgcmV0dXJuIGDsnpjrqrvrkJwg7J6F66ClOiDsmIjsg4Eg7YOA7J6F7J2AICR7aXNzdWUyLmV4cGVjdGVkfSwg67Cb7J2AIO2DgOyeheydgCAke3BhcnNlZFR5cGU3KGlzc3VlMi5pbnB1dCl97J6F64uI64ukYDsKICAgICAgY2FzZSAiaW52YWxpZF92YWx1ZSI6CiAgICAgICAgaWYgKGlzc3VlMi52YWx1ZXMubGVuZ3RoID09PSAxKQogICAgICAgICAgcmV0dXJuIGDsnpjrqrvrkJwg7J6F66ClOiDqsJLsnYAgJHtzdHJpbmdpZnlQcmltaXRpdmUoaXNzdWUyLnZhbHVlc1swXSl9IOydtOyWtOyVvCDtlanri4jri6RgOwogICAgICAgIHJldHVybiBg7J6Y66q765CcIOyYteyFmDogJHtqb2luVmFsdWVzKGlzc3VlMi52YWx1ZXMsICLrmJDripQgIil9IOykkSDtlZjrgpjsl6zslbwg7ZWp64uI64ukYDsKICAgICAgY2FzZSAidG9vX2JpZyI6IHsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIuydtO2VmCIgOiAi66+466eMIjsKICAgICAgICBjb25zdCBzdWZmaXggPSBhZGogPT09ICLrr7jrp4wiID8gIuydtOyWtOyVvCDtlanri4jri6QiIDogIuyXrOyVvCDtlanri4jri6QiOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBjb25zdCB1bml0ID0gKHNpemluZyA9PSBudWxsID8gdm9pZCAwIDogc2l6aW5nLnVuaXQpID8/ICLsmpTshowiOwogICAgICAgIGlmIChzaXppbmcpCiAgICAgICAgICByZXR1cm4gYCR7aXNzdWUyLm9yaWdpbiA/PyAi6rCSIn3snbQg64SI66y0IO2BveuLiOuLpDogJHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfSR7dW5pdH0gJHthZGp9JHtzdWZmaXh9YDsKICAgICAgICByZXR1cm4gYCR7aXNzdWUyLm9yaWdpbiA/PyAi6rCSIn3snbQg64SI66y0IO2BveuLiOuLpDogJHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfSAke2Fkan0ke3N1ZmZpeH1gOwogICAgICB9CiAgICAgIGNhc2UgInRvb19zbWFsbCI6IHsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIuydtOyDgSIgOiAi7LSI6rO8IjsKICAgICAgICBjb25zdCBzdWZmaXggPSBhZGogPT09ICLsnbTsg4EiID8gIuydtOyWtOyVvCDtlanri4jri6QiIDogIuyXrOyVvCDtlanri4jri6QiOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBjb25zdCB1bml0ID0gKHNpemluZyA9PSBudWxsID8gdm9pZCAwIDogc2l6aW5nLnVuaXQpID8/ICLsmpTshowiOwogICAgICAgIGlmIChzaXppbmcpIHsKICAgICAgICAgIHJldHVybiBgJHtpc3N1ZTIub3JpZ2luID8/ICLqsJIifeydtCDrhIjrrLQg7J6R7Iq164uI64ukOiAke2lzc3VlMi5taW5pbXVtLnRvU3RyaW5nKCl9JHt1bml0fSAke2Fkan0ke3N1ZmZpeH1gOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYCR7aXNzdWUyLm9yaWdpbiA/PyAi6rCSIn3snbQg64SI66y0IOyekeyKteuLiOuLpDogJHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSAke2Fkan0ke3N1ZmZpeH1gOwogICAgICB9CiAgICAgIGNhc2UgImludmFsaWRfZm9ybWF0IjogewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInN0YXJ0c193aXRoIikgewogICAgICAgICAgcmV0dXJuIGDsnpjrqrvrkJwg66y47J6Q7Je0OiAiJHtfaXNzdWUucHJlZml4fSIo7Jy8KeuhnCDsi5zsnpHtlbTslbwg7ZWp64uI64ukYDsKICAgICAgICB9CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJlbmRzX3dpdGgiKQogICAgICAgICAgcmV0dXJuIGDsnpjrqrvrkJwg66y47J6Q7Je0OiAiJHtfaXNzdWUuc3VmZml4fSIo7Jy8KeuhnCDrgZ3rgpjslbwg7ZWp64uI64ukYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImluY2x1ZGVzIikKICAgICAgICAgIHJldHVybiBg7J6Y66q765CcIOusuOyekOyXtDogIiR7X2lzc3VlLmluY2x1ZGVzfSLsnYQo66W8KSDtj6ztlajtlbTslbwg7ZWp64uI64ukYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInJlZ2V4IikKICAgICAgICAgIHJldHVybiBg7J6Y66q765CcIOusuOyekOyXtDog7KCV6rec7IudICR7X2lzc3VlLnBhdHRlcm59IO2MqO2EtOqzvCDsnbzsuZjtlbTslbwg7ZWp64uI64ukYDsKICAgICAgICByZXR1cm4gYOyemOuqu+uQnCAke05vdW5zW19pc3N1ZS5mb3JtYXRdID8/IGlzc3VlMi5mb3JtYXR9YDsKICAgICAgfQogICAgICBjYXNlICJub3RfbXVsdGlwbGVfb2YiOgogICAgICAgIHJldHVybiBg7J6Y66q765CcIOyIq+yekDogJHtpc3N1ZTIuZGl2aXNvcn3snZgg67Cw7IiY7Jes7JW8IO2VqeuLiOuLpGA7CiAgICAgIGNhc2UgInVucmVjb2duaXplZF9rZXlzIjoKICAgICAgICByZXR1cm4gYOyduOyLne2VoCDsiJgg7JeG64qUIO2CpDogJHtqb2luVmFsdWVzKGlzc3VlMi5rZXlzLCAiLCAiKX1gOwogICAgICBjYXNlICJpbnZhbGlkX2tleSI6CiAgICAgICAgcmV0dXJuIGDsnpjrqrvrkJwg7YKkOiAke2lzc3VlMi5vcmlnaW59YDsKICAgICAgY2FzZSAiaW52YWxpZF91bmlvbiI6CiAgICAgICAgcmV0dXJuIGDsnpjrqrvrkJwg7J6F66ClYDsKICAgICAgY2FzZSAiaW52YWxpZF9lbGVtZW50IjoKICAgICAgICByZXR1cm4gYOyemOuqu+uQnCDqsJI6ICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBg7J6Y66q765CcIOyeheugpWA7CiAgICB9CiAgfTsKfTsKZnVuY3Rpb24ga29fZGVmYXVsdCgpIHsKICByZXR1cm4gewogICAgbG9jYWxlRXJyb3I6IGVycm9yMjMoKQogIH07Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvbG9jYWxlcy9sdC5qcwp2YXIgcGFyc2VkVHlwZTUgPSAoZGF0YSkgPT4gewogIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTsKICByZXR1cm4gcGFyc2VkVHlwZUZyb21UeXBlKHQsIGRhdGEpOwp9Owp2YXIgcGFyc2VkVHlwZUZyb21UeXBlID0gKHQsIGRhdGEgPSB2b2lkIDApID0+IHsKICBzd2l0Y2ggKHQpIHsKICAgIGNhc2UgIm51bWJlciI6IHsKICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/ICJOYU4iIDogInNrYWnEjWl1cyI7CiAgICB9CiAgICBjYXNlICJiaWdpbnQiOiB7CiAgICAgIHJldHVybiAic3ZlaWthc2lzIHNrYWnEjWl1cyI7CiAgICB9CiAgICBjYXNlICJzdHJpbmciOiB7CiAgICAgIHJldHVybiAiZWlsdXTElyI7CiAgICB9CiAgICBjYXNlICJib29sZWFuIjogewogICAgICByZXR1cm4gImxvZ2luxJcgcmVpa8WhbcSXIjsKICAgIH0KICAgIGNhc2UgInVuZGVmaW5lZCI6CiAgICBjYXNlICJ2b2lkIjogewogICAgICByZXR1cm4gIm5lYXBpYnLEl8W+dGEgcmVpa8WhbcSXIjsKICAgIH0KICAgIGNhc2UgImZ1bmN0aW9uIjogewogICAgICByZXR1cm4gImZ1bmtjaWphIjsKICAgIH0KICAgIGNhc2UgInN5bWJvbCI6IHsKICAgICAgcmV0dXJuICJzaW1ib2xpcyI7CiAgICB9CiAgICBjYXNlICJvYmplY3QiOiB7CiAgICAgIGlmIChkYXRhID09PSB2b2lkIDApCiAgICAgICAgcmV0dXJuICJuZcW+aW5vbWFzIG9iamVrdGFzIjsKICAgICAgaWYgKGRhdGEgPT09IG51bGwpCiAgICAgICAgcmV0dXJuICJudWxpbsSXIHJlaWvFoW3ElyI7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKQogICAgICAgIHJldHVybiAibWFzeXZhcyI7CiAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZGF0YSkgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgZGF0YS5jb25zdHJ1Y3RvcikgewogICAgICAgIHJldHVybiBkYXRhLmNvbnN0cnVjdG9yLm5hbWU7CiAgICAgIH0KICAgICAgcmV0dXJuICJvYmpla3RhcyI7CiAgICB9CiAgICAvL1pvZCB0eXBlcyBiZWxvdwogICAgY2FzZSAibnVsbCI6IHsKICAgICAgcmV0dXJuICJudWxpbsSXIHJlaWvFoW3ElyI7CiAgICB9CiAgfQogIHJldHVybiB0Owp9Owp2YXIgY2FwaXRhbGl6ZUZpcnN0Q2hhcmFjdGVyID0gKHRleHQpID0+IHsKICByZXR1cm4gdGV4dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHRleHQuc2xpY2UoMSk7Cn07CmZ1bmN0aW9uIGdldFVuaXRUeXBlRnJvbU51bWJlcihudW1iZXI0KSB7CiAgY29uc3QgYWJzID0gTWF0aC5hYnMobnVtYmVyNCk7CiAgY29uc3QgbGFzdCA9IGFicyAlIDEwOwogIGNvbnN0IGxhc3QyID0gYWJzICUgMTAwOwogIGlmIChsYXN0MiA+PSAxMSAmJiBsYXN0MiA8PSAxOSB8fCBsYXN0ID09PSAwKQogICAgcmV0dXJuICJtYW55IjsKICBpZiAobGFzdCA9PT0gMSkKICAgIHJldHVybiAib25lIjsKICByZXR1cm4gImZldyI7Cn0KdmFyIGVycm9yMjQgPSAoKSA9PiB7CiAgY29uc3QgU2l6YWJsZSA9IHsKICAgIHN0cmluZzogewogICAgICB1bml0OiB7CiAgICAgICAgb25lOiAic2ltYm9saXMiLAogICAgICAgIGZldzogInNpbWJvbGlhaSIsCiAgICAgICAgbWFueTogInNpbWJvbGnFsyIKICAgICAgfSwKICAgICAgdmVyYjogewogICAgICAgIHNtYWxsZXI6IHsKICAgICAgICAgIGluY2x1c2l2ZTogInR1cmkgYsWrdGkgbmUgaWxnZXNuxJcga2FpcCIsCiAgICAgICAgICBub3RJbmNsdXNpdmU6ICJ0dXJpIGLFq3RpIHRydW1wZXNuxJcga2FpcCIKICAgICAgICB9LAogICAgICAgIGJpZ2dlcjogewogICAgICAgICAgaW5jbHVzaXZlOiAidHVyaSBixat0aSBuZSB0cnVtcGVzbsSXIGthaXAiLAogICAgICAgICAgbm90SW5jbHVzaXZlOiAidHVyaSBixat0aSBpbGdlc27ElyBrYWlwIgogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGZpbGU6IHsKICAgICAgdW5pdDogewogICAgICAgIG9uZTogImJhaXRhcyIsCiAgICAgICAgZmV3OiAiYmFpdGFpIiwKICAgICAgICBtYW55OiAiYmFpdMWzIgogICAgICB9LAogICAgICB2ZXJiOiB7CiAgICAgICAgc21hbGxlcjogewogICAgICAgICAgaW5jbHVzaXZlOiAidHVyaSBixat0aSBuZSBkaWRlc25pcyBrYWlwIiwKICAgICAgICAgIG5vdEluY2x1c2l2ZTogInR1cmkgYsWrdGkgbWHFvmVzbmlzIGthaXAiCiAgICAgICAgfSwKICAgICAgICBiaWdnZXI6IHsKICAgICAgICAgIGluY2x1c2l2ZTogInR1cmkgYsWrdGkgbmUgbWHFvmVzbmlzIGthaXAiLAogICAgICAgICAgbm90SW5jbHVzaXZlOiAidHVyaSBixat0aSBkaWRlc25pcyBrYWlwIgogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGFycmF5OiB7CiAgICAgIHVuaXQ6IHsKICAgICAgICBvbmU6ICJlbGVtZW50xIUiLAogICAgICAgIGZldzogImVsZW1lbnR1cyIsCiAgICAgICAgbWFueTogImVsZW1lbnTFsyIKICAgICAgfSwKICAgICAgdmVyYjogewogICAgICAgIHNtYWxsZXI6IHsKICAgICAgICAgIGluY2x1c2l2ZTogInR1cmkgdHVyxJd0aSBuZSBkYXVnaWF1IGthaXAiLAogICAgICAgICAgbm90SW5jbHVzaXZlOiAidHVyaSB0dXLEl3RpIG1hxb5pYXUga2FpcCIKICAgICAgICB9LAogICAgICAgIGJpZ2dlcjogewogICAgICAgICAgaW5jbHVzaXZlOiAidHVyaSB0dXLEl3RpIG5lIG1hxb5pYXUga2FpcCIsCiAgICAgICAgICBub3RJbmNsdXNpdmU6ICJ0dXJpIHR1csSXdGkgZGF1Z2lhdSBrYWlwIgogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHNldDogewogICAgICB1bml0OiB7CiAgICAgICAgb25lOiAiZWxlbWVudMSFIiwKICAgICAgICBmZXc6ICJlbGVtZW50dXMiLAogICAgICAgIG1hbnk6ICJlbGVtZW50xbMiCiAgICAgIH0sCiAgICAgIHZlcmI6IHsKICAgICAgICBzbWFsbGVyOiB7CiAgICAgICAgICBpbmNsdXNpdmU6ICJ0dXJpIHR1csSXdGkgbmUgZGF1Z2lhdSBrYWlwIiwKICAgICAgICAgIG5vdEluY2x1c2l2ZTogInR1cmkgdHVyxJd0aSBtYcW+aWF1IGthaXAiCiAgICAgICAgfSwKICAgICAgICBiaWdnZXI6IHsKICAgICAgICAgIGluY2x1c2l2ZTogInR1cmkgdHVyxJd0aSBuZSBtYcW+aWF1IGthaXAiLAogICAgICAgICAgbm90SW5jbHVzaXZlOiAidHVyaSB0dXLEl3RpIGRhdWdpYXUga2FpcCIKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9OwogIGZ1bmN0aW9uIGdldFNpemluZyhvcmlnaW4sIHVuaXRUeXBlLCBpbmNsdXNpdmUsIHRhcmdldFNob3VsZEJlKSB7CiAgICBjb25zdCByZXN1bHQgPSBTaXphYmxlW29yaWdpbl0gPz8gbnVsbDsKICAgIGlmIChyZXN1bHQgPT09IG51bGwpCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICByZXR1cm4gewogICAgICB1bml0OiByZXN1bHQudW5pdFt1bml0VHlwZV0sCiAgICAgIHZlcmI6IHJlc3VsdC52ZXJiW3RhcmdldFNob3VsZEJlXVtpbmNsdXNpdmUgPyAiaW5jbHVzaXZlIiA6ICJub3RJbmNsdXNpdmUiXQogICAgfTsKICB9CiAgY29uc3QgTm91bnMgPSB7CiAgICByZWdleDogIsSvdmVzdGlzIiwKICAgIGVtYWlsOiAiZWwuIHBhxaF0byBhZHJlc2FzIiwKICAgIHVybDogIlVSTCIsCiAgICBlbW9qaTogImphdXN0dWthcyIsCiAgICB1dWlkOiAiVVVJRCIsCiAgICB1dWlkdjQ6ICJVVUlEdjQiLAogICAgdXVpZHY2OiAiVVVJRHY2IiwKICAgIG5hbm9pZDogIm5hbm9pZCIsCiAgICBndWlkOiAiR1VJRCIsCiAgICBjdWlkOiAiY3VpZCIsCiAgICBjdWlkMjogImN1aWQyIiwKICAgIHVsaWQ6ICJVTElEIiwKICAgIHhpZDogIlhJRCIsCiAgICBrc3VpZDogIktTVUlEIiwKICAgIGRhdGV0aW1lOiAiSVNPIGRhdGEgaXIgbGFpa2FzIiwKICAgIGRhdGU6ICJJU08gZGF0YSIsCiAgICB0aW1lOiAiSVNPIGxhaWthcyIsCiAgICBkdXJhdGlvbjogIklTTyB0cnVrbcSXIiwKICAgIGlwdjQ6ICJJUHY0IGFkcmVzYXMiLAogICAgaXB2NjogIklQdjYgYWRyZXNhcyIsCiAgICBjaWRydjQ6ICJJUHY0IHRpbmtsbyBwcmVmaWtzYXMgKENJRFIpIiwKICAgIGNpZHJ2NjogIklQdjYgdGlua2xvIHByZWZpa3NhcyAoQ0lEUikiLAogICAgYmFzZTY0OiAiYmFzZTY0IHXFvmtvZHVvdGEgZWlsdXTElyIsCiAgICBiYXNlNjR1cmw6ICJiYXNlNjR1cmwgdcW+a29kdW90YSBlaWx1dMSXIiwKICAgIGpzb25fc3RyaW5nOiAiSlNPTiBlaWx1dMSXIiwKICAgIGUxNjQ6ICJFLjE2NCBudW1lcmlzIiwKICAgIGp3dDogIkpXVCIsCiAgICB0ZW1wbGF0ZV9saXRlcmFsOiAixK92ZXN0aXMiCiAgfTsKICByZXR1cm4gKGlzc3VlMikgPT4gewogICAgc3dpdGNoIChpc3N1ZTIuY29kZSkgewogICAgICBjYXNlICJpbnZhbGlkX3R5cGUiOgogICAgICAgIHJldHVybiBgR2F1dGFzIHRpcGFzICR7cGFyc2VkVHlwZTUoaXNzdWUyLmlucHV0KX0sIG8gdGlrxJd0YXNpIC0gJHtwYXJzZWRUeXBlRnJvbVR5cGUoaXNzdWUyLmV4cGVjdGVkKX1gOwogICAgICBjYXNlICJpbnZhbGlkX3ZhbHVlIjoKICAgICAgICBpZiAoaXNzdWUyLnZhbHVlcy5sZW5ndGggPT09IDEpCiAgICAgICAgICByZXR1cm4gYFByaXZhbG8gYsWrdGkgJHtzdHJpbmdpZnlQcmltaXRpdmUoaXNzdWUyLnZhbHVlc1swXSl9YDsKICAgICAgICByZXR1cm4gYFByaXZhbG8gYsWrdGkgdmllbmFzIGnFoSAke2pvaW5WYWx1ZXMoaXNzdWUyLnZhbHVlcywgInwiKX0gcGFzaXJpbmtpbcWzYDsKICAgICAgY2FzZSAidG9vX2JpZyI6IHsKICAgICAgICBjb25zdCBvcmlnaW4gPSBwYXJzZWRUeXBlRnJvbVR5cGUoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4sIGdldFVuaXRUeXBlRnJvbU51bWJlcihOdW1iZXIoaXNzdWUyLm1heGltdW0pKSwgaXNzdWUyLmluY2x1c2l2ZSA/PyBmYWxzZSwgInNtYWxsZXIiKTsKICAgICAgICBpZiAoc2l6aW5nID09IG51bGwgPyB2b2lkIDAgOiBzaXppbmcudmVyYikKICAgICAgICAgIHJldHVybiBgJHtjYXBpdGFsaXplRmlyc3RDaGFyYWN0ZXIob3JpZ2luID8/IGlzc3VlMi5vcmlnaW4gPz8gInJlaWvFoW3ElyIpfSAke3NpemluZy52ZXJifSAke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9ICR7c2l6aW5nLnVuaXQgPz8gImVsZW1lbnTFsyJ9YDsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIm5lIGRpZGVzbmlzIGthaXAiIDogIm1hxb5lc25pcyBrYWlwIjsKICAgICAgICByZXR1cm4gYCR7Y2FwaXRhbGl6ZUZpcnN0Q2hhcmFjdGVyKG9yaWdpbiA/PyBpc3N1ZTIub3JpZ2luID8/ICJyZWlrxaFtxJciKX0gdHVyaSBixat0aSAke2Fkan0gJHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfSAke3NpemluZyA9PSBudWxsID8gdm9pZCAwIDogc2l6aW5nLnVuaXR9YDsKICAgICAgfQogICAgICBjYXNlICJ0b29fc21hbGwiOiB7CiAgICAgICAgY29uc3Qgb3JpZ2luID0gcGFyc2VkVHlwZUZyb21UeXBlKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luLCBnZXRVbml0VHlwZUZyb21OdW1iZXIoTnVtYmVyKGlzc3VlMi5taW5pbXVtKSksIGlzc3VlMi5pbmNsdXNpdmUgPz8gZmFsc2UsICJiaWdnZXIiKTsKICAgICAgICBpZiAoc2l6aW5nID09IG51bGwgPyB2b2lkIDAgOiBzaXppbmcudmVyYikKICAgICAgICAgIHJldHVybiBgJHtjYXBpdGFsaXplRmlyc3RDaGFyYWN0ZXIob3JpZ2luID8/IGlzc3VlMi5vcmlnaW4gPz8gInJlaWvFoW3ElyIpfSAke3NpemluZy52ZXJifSAke2lzc3VlMi5taW5pbXVtLnRvU3RyaW5nKCl9ICR7c2l6aW5nLnVuaXQgPz8gImVsZW1lbnTFsyJ9YDsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIm5lIG1hxb5lc25pcyBrYWlwIiA6ICJkaWRlc25pcyBrYWlwIjsKICAgICAgICByZXR1cm4gYCR7Y2FwaXRhbGl6ZUZpcnN0Q2hhcmFjdGVyKG9yaWdpbiA/PyBpc3N1ZTIub3JpZ2luID8/ICJyZWlrxaFtxJciKX0gdHVyaSBixat0aSAke2Fkan0gJHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSAke3NpemluZyA9PSBudWxsID8gdm9pZCAwIDogc2l6aW5nLnVuaXR9YDsKICAgICAgfQogICAgICBjYXNlICJpbnZhbGlkX2Zvcm1hdCI6IHsKICAgICAgICBjb25zdCBfaXNzdWUgPSBpc3N1ZTI7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJzdGFydHNfd2l0aCIpIHsKICAgICAgICAgIHJldHVybiBgRWlsdXTElyBwcml2YWxvIHByYXNpZMSXdGkgIiR7X2lzc3VlLnByZWZpeH0iYDsKICAgICAgICB9CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJlbmRzX3dpdGgiKQogICAgICAgICAgcmV0dXJuIGBFaWx1dMSXIHByaXZhbG8gcGFzaWJhaWd0aSAiJHtfaXNzdWUuc3VmZml4fSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiaW5jbHVkZXMiKQogICAgICAgICAgcmV0dXJuIGBFaWx1dMSXIHByaXZhbG8gxK90cmF1a3RpICIke19pc3N1ZS5pbmNsdWRlc30iYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInJlZ2V4IikKICAgICAgICAgIHJldHVybiBgRWlsdXTElyBwcml2YWxvIGF0aXRpa3RpICR7X2lzc3VlLnBhdHRlcm59YDsKICAgICAgICByZXR1cm4gYE5ldGVpc2luZ2FzICR7Tm91bnNbX2lzc3VlLmZvcm1hdF0gPz8gaXNzdWUyLmZvcm1hdH1gOwogICAgICB9CiAgICAgIGNhc2UgIm5vdF9tdWx0aXBsZV9vZiI6CiAgICAgICAgcmV0dXJuIGBTa2FpxI1pdXMgcHJpdmFsbyBixat0aSAke2lzc3VlMi5kaXZpc29yfSBrYXJ0b3RpbmlzLmA7CiAgICAgIGNhc2UgInVucmVjb2duaXplZF9rZXlzIjoKICAgICAgICByZXR1cm4gYE5lYXRwYcW+aW50JHtpc3N1ZTIua2V5cy5sZW5ndGggPiAxID8gImkiIDogImFzIn0gcmFrdCR7aXNzdWUyLmtleXMubGVuZ3RoID4gMSA/ICJhaSIgOiAiYXMifTogJHtqb2luVmFsdWVzKGlzc3VlMi5rZXlzLCAiLCAiKX1gOwogICAgICBjYXNlICJpbnZhbGlkX2tleSI6CiAgICAgICAgcmV0dXJuICJSYXN0YXMga2xhaWRpbmdhcyByYWt0YXMiOwogICAgICBjYXNlICJpbnZhbGlkX3VuaW9uIjoKICAgICAgICByZXR1cm4gIktsYWlkaW5nYSDEr3Zlc3RpcyI7CiAgICAgIGNhc2UgImludmFsaWRfZWxlbWVudCI6IHsKICAgICAgICBjb25zdCBvcmlnaW4gPSBwYXJzZWRUeXBlRnJvbVR5cGUoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgcmV0dXJuIGAke2NhcGl0YWxpemVGaXJzdENoYXJhY3RlcihvcmlnaW4gPz8gaXNzdWUyLm9yaWdpbiA/PyAicmVpa8WhbcSXIil9IHR1cmkga2xhaWRpbmfEhSDEr3Zlc3TEr2A7CiAgICAgIH0KICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gIktsYWlkaW5nYSDEr3Zlc3RpcyI7CiAgICB9CiAgfTsKfTsKZnVuY3Rpb24gbHRfZGVmYXVsdCgpIHsKICByZXR1cm4gewogICAgbG9jYWxlRXJyb3I6IGVycm9yMjQoKQogIH07Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvbG9jYWxlcy9tay5qcwp2YXIgZXJyb3IyNSA9ICgpID0+IHsKICBjb25zdCBTaXphYmxlID0gewogICAgc3RyaW5nOiB7IHVuaXQ6ICLQt9C90LDRhtC4IiwgdmVyYjogItC00LAg0LjQvNCw0LDRgiIgfSwKICAgIGZpbGU6IHsgdW5pdDogItCx0LDRmNGC0LgiLCB2ZXJiOiAi0LTQsCDQuNC80LDQsNGCIiB9LAogICAgYXJyYXk6IHsgdW5pdDogItGB0YLQsNCy0LrQuCIsIHZlcmI6ICLQtNCwINC40LzQsNCw0YIiIH0sCiAgICBzZXQ6IHsgdW5pdDogItGB0YLQsNCy0LrQuCIsIHZlcmI6ICLQtNCwINC40LzQsNCw0YIiIH0KICB9OwogIGZ1bmN0aW9uIGdldFNpemluZyhvcmlnaW4pIHsKICAgIHJldHVybiBTaXphYmxlW29yaWdpbl0gPz8gbnVsbDsKICB9CiAgY29uc3QgcGFyc2VkVHlwZTcgPSAoZGF0YSkgPT4gewogICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhOwogICAgc3dpdGNoICh0KSB7CiAgICAgIGNhc2UgIm51bWJlciI6IHsKICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gIk5hTiIgOiAi0LHRgNC+0ZgiOwogICAgICB9CiAgICAgIGNhc2UgIm9iamVjdCI6IHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkgewogICAgICAgICAgcmV0dXJuICLQvdC40LfQsCI7CiAgICAgICAgfQogICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gIm51bGwiOwogICAgICAgIH0KICAgICAgICBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGRhdGEpICE9PSBPYmplY3QucHJvdG90eXBlICYmIGRhdGEuY29uc3RydWN0b3IpIHsKICAgICAgICAgIHJldHVybiBkYXRhLmNvbnN0cnVjdG9yLm5hbWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdDsKICB9OwogIGNvbnN0IE5vdW5zID0gewogICAgcmVnZXg6ICLQstC90LXRgSIsCiAgICBlbWFpbDogItCw0LTRgNC10YHQsCDQvdCwINC1LdC/0L7RiNGC0LAiLAogICAgdXJsOiAiVVJMIiwKICAgIGVtb2ppOiAi0LXQvNC+0Z/QuCIsCiAgICB1dWlkOiAiVVVJRCIsCiAgICB1dWlkdjQ6ICJVVUlEdjQiLAogICAgdXVpZHY2OiAiVVVJRHY2IiwKICAgIG5hbm9pZDogIm5hbm9pZCIsCiAgICBndWlkOiAiR1VJRCIsCiAgICBjdWlkOiAiY3VpZCIsCiAgICBjdWlkMjogImN1aWQyIiwKICAgIHVsaWQ6ICJVTElEIiwKICAgIHhpZDogIlhJRCIsCiAgICBrc3VpZDogIktTVUlEIiwKICAgIGRhdGV0aW1lOiAiSVNPINC00LDRgtGD0Lwg0Lgg0LLRgNC10LzQtSIsCiAgICBkYXRlOiAiSVNPINC00LDRgtGD0LwiLAogICAgdGltZTogIklTTyDQstGA0LXQvNC1IiwKICAgIGR1cmF0aW9uOiAiSVNPINCy0YDQtdC80LXRgtGA0LDQtdGa0LUiLAogICAgaXB2NDogIklQdjQg0LDQtNGA0LXRgdCwIiwKICAgIGlwdjY6ICJJUHY2INCw0LTRgNC10YHQsCIsCiAgICBjaWRydjQ6ICJJUHY0INC+0L/RgdC10LMiLAogICAgY2lkcnY2OiAiSVB2NiDQvtC/0YHQtdCzIiwKICAgIGJhc2U2NDogImJhc2U2NC3QtdC90LrQvtC00LjRgNCw0L3QsCDQvdC40LfQsCIsCiAgICBiYXNlNjR1cmw6ICJiYXNlNjR1cmwt0LXQvdC60L7QtNC40YDQsNC90LAg0L3QuNC30LAiLAogICAganNvbl9zdHJpbmc6ICJKU09OINC90LjQt9CwIiwKICAgIGUxNjQ6ICJFLjE2NCDQsdGA0L7RmCIsCiAgICBqd3Q6ICJKV1QiLAogICAgdGVtcGxhdGVfbGl0ZXJhbDogItCy0L3QtdGBIgogIH07CiAgcmV0dXJuIChpc3N1ZTIpID0+IHsKICAgIHN3aXRjaCAoaXNzdWUyLmNvZGUpIHsKICAgICAgY2FzZSAiaW52YWxpZF90eXBlIjoKICAgICAgICByZXR1cm4gYNCT0YDQtdGI0LXQvSDQstC90LXRgTog0YHQtSDQvtGH0LXQutGD0LLQsCAke2lzc3VlMi5leHBlY3RlZH0sINC/0YDQuNC80LXQvdC+ICR7cGFyc2VkVHlwZTcoaXNzdWUyLmlucHV0KX1gOwogICAgICAvLyByZXR1cm4gYEludmFsaWQgaW5wdXQ6IGV4cGVjdGVkICR7aXNzdWUuZXhwZWN0ZWR9LCByZWNlaXZlZCAke3V0aWwuZ2V0UGFyc2VkVHlwZShpc3N1ZS5pbnB1dCl9YDsKICAgICAgY2FzZSAiaW52YWxpZF92YWx1ZSI6CiAgICAgICAgaWYgKGlzc3VlMi52YWx1ZXMubGVuZ3RoID09PSAxKQogICAgICAgICAgcmV0dXJuIGBJbnZhbGlkIGlucHV0OiBleHBlY3RlZCAke3N0cmluZ2lmeVByaW1pdGl2ZShpc3N1ZTIudmFsdWVzWzBdKX1gOwogICAgICAgIHJldHVybiBg0JPRgNC10YjQsNC90LAg0L7Qv9GG0LjRmNCwOiDRgdC1INC+0YfQtdC60YPQstCwINC10LTQvdCwICR7am9pblZhbHVlcyhpc3N1ZTIudmFsdWVzLCAifCIpfWA7CiAgICAgIGNhc2UgInRvb19iaWciOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI8PSIgOiAiPCI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpCiAgICAgICAgICByZXR1cm4gYNCf0YDQtdC80L3QvtCz0YMg0LPQvtC70LXQvDog0YHQtSDQvtGH0LXQutGD0LLQsCAke2lzc3VlMi5vcmlnaW4gPz8gItCy0YDQtdC00L3QvtGB0YLQsCJ9INC00LAg0LjQvNCwICR7YWRqfSR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdCA/PyAi0LXQu9C10LzQtdC90YLQuCJ9YDsKICAgICAgICByZXR1cm4gYNCf0YDQtdC80L3QvtCz0YMg0LPQvtC70LXQvDog0YHQtSDQvtGH0LXQutGD0LLQsCAke2lzc3VlMi5vcmlnaW4gPz8gItCy0YDQtdC00L3QvtGB0YLQsCJ9INC00LAg0LHQuNC00LUgJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfWA7CiAgICAgIH0KICAgICAgY2FzZSAidG9vX3NtYWxsIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPj0iIDogIj4iOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKSB7CiAgICAgICAgICByZXR1cm4gYNCf0YDQtdC80L3QvtCz0YMg0LzQsNC7OiDRgdC1INC+0YfQtdC60YPQstCwICR7aXNzdWUyLm9yaWdpbn0g0LTQsCDQuNC80LAgJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0fWA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBg0J/RgNC10LzQvdC+0LPRgyDQvNCw0Ls6INGB0LUg0L7Rh9C10LrRg9Cy0LAgJHtpc3N1ZTIub3JpZ2lufSDQtNCwINCx0LjQtNC1ICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgImludmFsaWRfZm9ybWF0IjogewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInN0YXJ0c193aXRoIikgewogICAgICAgICAgcmV0dXJuIGDQndC10LLQsNC20LXRh9C60LAg0L3QuNC30LA6INC80L7RgNCwINC00LAg0LfQsNC/0L7Rh9C90YPQstCwINGB0L4gIiR7X2lzc3VlLnByZWZpeH0iYDsKICAgICAgICB9CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJlbmRzX3dpdGgiKQogICAgICAgICAgcmV0dXJuIGDQndC10LLQsNC20LXRh9C60LAg0L3QuNC30LA6INC80L7RgNCwINC00LAg0LfQsNCy0YDRiNGD0LLQsCDRgdC+ICIke19pc3N1ZS5zdWZmaXh9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJpbmNsdWRlcyIpCiAgICAgICAgICByZXR1cm4gYNCd0LXQstCw0LbQtdGH0LrQsCDQvdC40LfQsDog0LzQvtGA0LAg0LTQsCDQstC60LvRg9GH0YPQstCwICIke19pc3N1ZS5pbmNsdWRlc30iYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInJlZ2V4IikKICAgICAgICAgIHJldHVybiBg0J3QtdCy0LDQttC10YfQutCwINC90LjQt9CwOiDQvNC+0YDQsCDQtNCwINC+0LTQs9C+0LDRgNCwINC90LAg0L/QsNGC0LXRgNC90L7RgiAke19pc3N1ZS5wYXR0ZXJufWA7CiAgICAgICAgcmV0dXJuIGBJbnZhbGlkICR7Tm91bnNbX2lzc3VlLmZvcm1hdF0gPz8gaXNzdWUyLmZvcm1hdH1gOwogICAgICB9CiAgICAgIGNhc2UgIm5vdF9tdWx0aXBsZV9vZiI6CiAgICAgICAgcmV0dXJuIGDQk9GA0LXRiNC10L0g0LHRgNC+0Zg6INC80L7RgNCwINC00LAg0LHQuNC00LUg0LTQtdC70LjQsiDRgdC+ICR7aXNzdWUyLmRpdmlzb3J9YDsKICAgICAgY2FzZSAidW5yZWNvZ25pemVkX2tleXMiOgogICAgICAgIHJldHVybiBgJHtpc3N1ZTIua2V5cy5sZW5ndGggPiAxID8gItCd0LXQv9GA0LXQv9C+0LfQvdCw0LXQvdC4INC60LvRg9GH0LXQstC4IiA6ICLQndC10L/RgNC10L/QvtC30L3QsNC10L0g0LrQu9GD0YcifTogJHtqb2luVmFsdWVzKGlzc3VlMi5rZXlzLCAiLCAiKX1gOwogICAgICBjYXNlICJpbnZhbGlkX2tleSI6CiAgICAgICAgcmV0dXJuIGDQk9GA0LXRiNC10L0g0LrQu9GD0Ycg0LLQviAke2lzc3VlMi5vcmlnaW59YDsKICAgICAgY2FzZSAiaW52YWxpZF91bmlvbiI6CiAgICAgICAgcmV0dXJuICLQk9GA0LXRiNC10L0g0LLQvdC10YEiOwogICAgICBjYXNlICJpbnZhbGlkX2VsZW1lbnQiOgogICAgICAgIHJldHVybiBg0JPRgNC10YjQvdCwINCy0YDQtdC00L3QvtGB0YIg0LLQviAke2lzc3VlMi5vcmlnaW59YDsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gYNCT0YDQtdGI0LXQvSDQstC90LXRgWA7CiAgICB9CiAgfTsKfTsKZnVuY3Rpb24gbWtfZGVmYXVsdCgpIHsKICByZXR1cm4gewogICAgbG9jYWxlRXJyb3I6IGVycm9yMjUoKQogIH07Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvbG9jYWxlcy9tcy5qcwp2YXIgZXJyb3IyNiA9ICgpID0+IHsKICBjb25zdCBTaXphYmxlID0gewogICAgc3RyaW5nOiB7IHVuaXQ6ICJha3NhcmEiLCB2ZXJiOiAibWVtcHVueWFpIiB9LAogICAgZmlsZTogeyB1bml0OiAiYmFpdCIsIHZlcmI6ICJtZW1wdW55YWkiIH0sCiAgICBhcnJheTogeyB1bml0OiAiZWxlbWVuIiwgdmVyYjogIm1lbXB1bnlhaSIgfSwKICAgIHNldDogeyB1bml0OiAiZWxlbWVuIiwgdmVyYjogIm1lbXB1bnlhaSIgfQogIH07CiAgZnVuY3Rpb24gZ2V0U2l6aW5nKG9yaWdpbikgewogICAgcmV0dXJuIFNpemFibGVbb3JpZ2luXSA/PyBudWxsOwogIH0KICBjb25zdCBwYXJzZWRUeXBlNyA9IChkYXRhKSA9PiB7CiAgICBjb25zdCB0ID0gdHlwZW9mIGRhdGE7CiAgICBzd2l0Y2ggKHQpIHsKICAgICAgY2FzZSAibnVtYmVyIjogewogICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0YSkgPyAiTmFOIiA6ICJub21ib3IiOwogICAgICB9CiAgICAgIGNhc2UgIm9iamVjdCI6IHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkgewogICAgICAgICAgcmV0dXJuICJhcnJheSI7CiAgICAgICAgfQogICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gIm51bGwiOwogICAgICAgIH0KICAgICAgICBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGRhdGEpICE9PSBPYmplY3QucHJvdG90eXBlICYmIGRhdGEuY29uc3RydWN0b3IpIHsKICAgICAgICAgIHJldHVybiBkYXRhLmNvbnN0cnVjdG9yLm5hbWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdDsKICB9OwogIGNvbnN0IE5vdW5zID0gewogICAgcmVnZXg6ICJpbnB1dCIsCiAgICBlbWFpbDogImFsYW1hdCBlLW1lbCIsCiAgICB1cmw6ICJVUkwiLAogICAgZW1vamk6ICJlbW9qaSIsCiAgICB1dWlkOiAiVVVJRCIsCiAgICB1dWlkdjQ6ICJVVUlEdjQiLAogICAgdXVpZHY2OiAiVVVJRHY2IiwKICAgIG5hbm9pZDogIm5hbm9pZCIsCiAgICBndWlkOiAiR1VJRCIsCiAgICBjdWlkOiAiY3VpZCIsCiAgICBjdWlkMjogImN1aWQyIiwKICAgIHVsaWQ6ICJVTElEIiwKICAgIHhpZDogIlhJRCIsCiAgICBrc3VpZDogIktTVUlEIiwKICAgIGRhdGV0aW1lOiAidGFyaWtoIG1hc2EgSVNPIiwKICAgIGRhdGU6ICJ0YXJpa2ggSVNPIiwKICAgIHRpbWU6ICJtYXNhIElTTyIsCiAgICBkdXJhdGlvbjogInRlbXBvaCBJU08iLAogICAgaXB2NDogImFsYW1hdCBJUHY0IiwKICAgIGlwdjY6ICJhbGFtYXQgSVB2NiIsCiAgICBjaWRydjQ6ICJqdWxhdCBJUHY0IiwKICAgIGNpZHJ2NjogImp1bGF0IElQdjYiLAogICAgYmFzZTY0OiAic3RyaW5nIGRpa29ka2FuIGJhc2U2NCIsCiAgICBiYXNlNjR1cmw6ICJzdHJpbmcgZGlrb2RrYW4gYmFzZTY0dXJsIiwKICAgIGpzb25fc3RyaW5nOiAic3RyaW5nIEpTT04iLAogICAgZTE2NDogIm5vbWJvciBFLjE2NCIsCiAgICBqd3Q6ICJKV1QiLAogICAgdGVtcGxhdGVfbGl0ZXJhbDogImlucHV0IgogIH07CiAgcmV0dXJuIChpc3N1ZTIpID0+IHsKICAgIHN3aXRjaCAoaXNzdWUyLmNvZGUpIHsKICAgICAgY2FzZSAiaW52YWxpZF90eXBlIjoKICAgICAgICByZXR1cm4gYElucHV0IHRpZGFrIHNhaDogZGlqYW5na2EgJHtpc3N1ZTIuZXhwZWN0ZWR9LCBkaXRlcmltYSAke3BhcnNlZFR5cGU3KGlzc3VlMi5pbnB1dCl9YDsKICAgICAgY2FzZSAiaW52YWxpZF92YWx1ZSI6CiAgICAgICAgaWYgKGlzc3VlMi52YWx1ZXMubGVuZ3RoID09PSAxKQogICAgICAgICAgcmV0dXJuIGBJbnB1dCB0aWRhayBzYWg6IGRpamFuZ2thICR7c3RyaW5naWZ5UHJpbWl0aXZlKGlzc3VlMi52YWx1ZXNbMF0pfWA7CiAgICAgICAgcmV0dXJuIGBQaWxpaGFuIHRpZGFrIHNhaDogZGlqYW5na2Egc2FsYWggc2F0dSBkYXJpcGFkYSAke2pvaW5WYWx1ZXMoaXNzdWUyLnZhbHVlcywgInwiKX1gOwogICAgICBjYXNlICJ0b29fYmlnIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPD0iIDogIjwiOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKQogICAgICAgICAgcmV0dXJuIGBUZXJsYWx1IGJlc2FyOiBkaWphbmdrYSAke2lzc3VlMi5vcmlnaW4gPz8gIm5pbGFpIn0gJHtzaXppbmcudmVyYn0gJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0ID8/ICJlbGVtZW4ifWA7CiAgICAgICAgcmV0dXJuIGBUZXJsYWx1IGJlc2FyOiBkaWphbmdrYSAke2lzc3VlMi5vcmlnaW4gPz8gIm5pbGFpIn0gYWRhbGFoICR7YWRqfSR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgInRvb19zbWFsbCI6IHsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIj49IiA6ICI+IjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykgewogICAgICAgICAgcmV0dXJuIGBUZXJsYWx1IGtlY2lsOiBkaWphbmdrYSAke2lzc3VlMi5vcmlnaW59ICR7c2l6aW5nLnZlcmJ9ICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdH1gOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYFRlcmxhbHUga2VjaWw6IGRpamFuZ2thICR7aXNzdWUyLm9yaWdpbn0gYWRhbGFoICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgImludmFsaWRfZm9ybWF0IjogewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInN0YXJ0c193aXRoIikKICAgICAgICAgIHJldHVybiBgU3RyaW5nIHRpZGFrIHNhaDogbWVzdGkgYmVybXVsYSBkZW5nYW4gIiR7X2lzc3VlLnByZWZpeH0iYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImVuZHNfd2l0aCIpCiAgICAgICAgICByZXR1cm4gYFN0cmluZyB0aWRhayBzYWg6IG1lc3RpIGJlcmFraGlyIGRlbmdhbiAiJHtfaXNzdWUuc3VmZml4fSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiaW5jbHVkZXMiKQogICAgICAgICAgcmV0dXJuIGBTdHJpbmcgdGlkYWsgc2FoOiBtZXN0aSBtZW5nYW5kdW5naSAiJHtfaXNzdWUuaW5jbHVkZXN9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJyZWdleCIpCiAgICAgICAgICByZXR1cm4gYFN0cmluZyB0aWRhayBzYWg6IG1lc3RpIHNlcGFkYW4gZGVuZ2FuIGNvcmFrICR7X2lzc3VlLnBhdHRlcm59YDsKICAgICAgICByZXR1cm4gYCR7Tm91bnNbX2lzc3VlLmZvcm1hdF0gPz8gaXNzdWUyLmZvcm1hdH0gdGlkYWsgc2FoYDsKICAgICAgfQogICAgICBjYXNlICJub3RfbXVsdGlwbGVfb2YiOgogICAgICAgIHJldHVybiBgTm9tYm9yIHRpZGFrIHNhaDogcGVybHUgZ2FuZGFhbiAke2lzc3VlMi5kaXZpc29yfWA7CiAgICAgIGNhc2UgInVucmVjb2duaXplZF9rZXlzIjoKICAgICAgICByZXR1cm4gYEt1bmNpIHRpZGFrIGRpa2VuYWxpOiAke2pvaW5WYWx1ZXMoaXNzdWUyLmtleXMsICIsICIpfWA7CiAgICAgIGNhc2UgImludmFsaWRfa2V5IjoKICAgICAgICByZXR1cm4gYEt1bmNpIHRpZGFrIHNhaCBkYWxhbSAke2lzc3VlMi5vcmlnaW59YDsKICAgICAgY2FzZSAiaW52YWxpZF91bmlvbiI6CiAgICAgICAgcmV0dXJuICJJbnB1dCB0aWRhayBzYWgiOwogICAgICBjYXNlICJpbnZhbGlkX2VsZW1lbnQiOgogICAgICAgIHJldHVybiBgTmlsYWkgdGlkYWsgc2FoIGRhbGFtICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBgSW5wdXQgdGlkYWsgc2FoYDsKICAgIH0KICB9Owp9OwpmdW5jdGlvbiBtc19kZWZhdWx0KCkgewogIHJldHVybiB7CiAgICBsb2NhbGVFcnJvcjogZXJyb3IyNigpCiAgfTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9sb2NhbGVzL25sLmpzCnZhciBlcnJvcjI3ID0gKCkgPT4gewogIGNvbnN0IFNpemFibGUgPSB7CiAgICBzdHJpbmc6IHsgdW5pdDogInRla2VucyIgfSwKICAgIGZpbGU6IHsgdW5pdDogImJ5dGVzIiB9LAogICAgYXJyYXk6IHsgdW5pdDogImVsZW1lbnRlbiIgfSwKICAgIHNldDogeyB1bml0OiAiZWxlbWVudGVuIiB9CiAgfTsKICBmdW5jdGlvbiBnZXRTaXppbmcob3JpZ2luKSB7CiAgICByZXR1cm4gU2l6YWJsZVtvcmlnaW5dID8/IG51bGw7CiAgfQogIGNvbnN0IHBhcnNlZFR5cGU3ID0gKGRhdGEpID0+IHsKICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTsKICAgIHN3aXRjaCAodCkgewogICAgICBjYXNlICJudW1iZXIiOiB7CiAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/ICJOYU4iIDogImdldGFsIjsKICAgICAgfQogICAgICBjYXNlICJvYmplY3QiOiB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHsKICAgICAgICAgIHJldHVybiAiYXJyYXkiOwogICAgICAgIH0KICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuICJudWxsIjsKICAgICAgICB9CiAgICAgICAgaWYgKE9iamVjdC5nZXRQcm90b3R5cGVPZihkYXRhKSAhPT0gT2JqZWN0LnByb3RvdHlwZSAmJiBkYXRhLmNvbnN0cnVjdG9yKSB7CiAgICAgICAgICByZXR1cm4gZGF0YS5jb25zdHJ1Y3Rvci5uYW1lOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHQ7CiAgfTsKICBjb25zdCBOb3VucyA9IHsKICAgIHJlZ2V4OiAiaW52b2VyIiwKICAgIGVtYWlsOiAiZW1haWxhZHJlcyIsCiAgICB1cmw6ICJVUkwiLAogICAgZW1vamk6ICJlbW9qaSIsCiAgICB1dWlkOiAiVVVJRCIsCiAgICB1dWlkdjQ6ICJVVUlEdjQiLAogICAgdXVpZHY2OiAiVVVJRHY2IiwKICAgIG5hbm9pZDogIm5hbm9pZCIsCiAgICBndWlkOiAiR1VJRCIsCiAgICBjdWlkOiAiY3VpZCIsCiAgICBjdWlkMjogImN1aWQyIiwKICAgIHVsaWQ6ICJVTElEIiwKICAgIHhpZDogIlhJRCIsCiAgICBrc3VpZDogIktTVUlEIiwKICAgIGRhdGV0aW1lOiAiSVNPIGRhdHVtIGVuIHRpamQiLAogICAgZGF0ZTogIklTTyBkYXR1bSIsCiAgICB0aW1lOiAiSVNPIHRpamQiLAogICAgZHVyYXRpb246ICJJU08gZHV1ciIsCiAgICBpcHY0OiAiSVB2NC1hZHJlcyIsCiAgICBpcHY2OiAiSVB2Ni1hZHJlcyIsCiAgICBjaWRydjQ6ICJJUHY0LWJlcmVpayIsCiAgICBjaWRydjY6ICJJUHY2LWJlcmVpayIsCiAgICBiYXNlNjQ6ICJiYXNlNjQtZ2Vjb2RlZXJkZSB0ZWtzdCIsCiAgICBiYXNlNjR1cmw6ICJiYXNlNjQgVVJMLWdlY29kZWVyZGUgdGVrc3QiLAogICAganNvbl9zdHJpbmc6ICJKU09OIHN0cmluZyIsCiAgICBlMTY0OiAiRS4xNjQtbnVtbWVyIiwKICAgIGp3dDogIkpXVCIsCiAgICB0ZW1wbGF0ZV9saXRlcmFsOiAiaW52b2VyIgogIH07CiAgcmV0dXJuIChpc3N1ZTIpID0+IHsKICAgIHN3aXRjaCAoaXNzdWUyLmNvZGUpIHsKICAgICAgY2FzZSAiaW52YWxpZF90eXBlIjoKICAgICAgICByZXR1cm4gYE9uZ2VsZGlnZSBpbnZvZXI6IHZlcndhY2h0ICR7aXNzdWUyLmV4cGVjdGVkfSwgb250dmluZyAke3BhcnNlZFR5cGU3KGlzc3VlMi5pbnB1dCl9YDsKICAgICAgY2FzZSAiaW52YWxpZF92YWx1ZSI6CiAgICAgICAgaWYgKGlzc3VlMi52YWx1ZXMubGVuZ3RoID09PSAxKQogICAgICAgICAgcmV0dXJuIGBPbmdlbGRpZ2UgaW52b2VyOiB2ZXJ3YWNodCAke3N0cmluZ2lmeVByaW1pdGl2ZShpc3N1ZTIudmFsdWVzWzBdKX1gOwogICAgICAgIHJldHVybiBgT25nZWxkaWdlIG9wdGllOiB2ZXJ3YWNodCDDqcOpbiB2YW4gJHtqb2luVmFsdWVzKGlzc3VlMi52YWx1ZXMsICJ8Iil9YDsKICAgICAgY2FzZSAidG9vX2JpZyI6IHsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIjw9IiA6ICI8IjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykKICAgICAgICAgIHJldHVybiBgVGUgbGFuZzogdmVyd2FjaHQgZGF0ICR7aXNzdWUyLm9yaWdpbiA/PyAid2FhcmRlIn0gJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0ID8/ICJlbGVtZW50ZW4ifSBiZXZhdGA7CiAgICAgICAgcmV0dXJuIGBUZSBsYW5nOiB2ZXJ3YWNodCBkYXQgJHtpc3N1ZTIub3JpZ2luID8/ICJ3YWFyZGUifSAke2Fkan0ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9IGlzYDsKICAgICAgfQogICAgICBjYXNlICJ0b29fc21hbGwiOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI+PSIgOiAiPiI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpIHsKICAgICAgICAgIHJldHVybiBgVGUga29ydDogdmVyd2FjaHQgZGF0ICR7aXNzdWUyLm9yaWdpbn0gJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0fSBiZXZhdGA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBgVGUga29ydDogdmVyd2FjaHQgZGF0ICR7aXNzdWUyLm9yaWdpbn0gJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSBpc2A7CiAgICAgIH0KICAgICAgY2FzZSAiaW52YWxpZF9mb3JtYXQiOiB7CiAgICAgICAgY29uc3QgX2lzc3VlID0gaXNzdWUyOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAic3RhcnRzX3dpdGgiKSB7CiAgICAgICAgICByZXR1cm4gYE9uZ2VsZGlnZSB0ZWtzdDogbW9ldCBtZXQgIiR7X2lzc3VlLnByZWZpeH0iIGJlZ2lubmVuYDsKICAgICAgICB9CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJlbmRzX3dpdGgiKQogICAgICAgICAgcmV0dXJuIGBPbmdlbGRpZ2UgdGVrc3Q6IG1vZXQgb3AgIiR7X2lzc3VlLnN1ZmZpeH0iIGVpbmRpZ2VuYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImluY2x1ZGVzIikKICAgICAgICAgIHJldHVybiBgT25nZWxkaWdlIHRla3N0OiBtb2V0ICIke19pc3N1ZS5pbmNsdWRlc30iIGJldmF0dGVuYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInJlZ2V4IikKICAgICAgICAgIHJldHVybiBgT25nZWxkaWdlIHRla3N0OiBtb2V0IG92ZXJlZW5rb21lbiBtZXQgcGF0cm9vbiAke19pc3N1ZS5wYXR0ZXJufWA7CiAgICAgICAgcmV0dXJuIGBPbmdlbGRpZzogJHtOb3Vuc1tfaXNzdWUuZm9ybWF0XSA/PyBpc3N1ZTIuZm9ybWF0fWA7CiAgICAgIH0KICAgICAgY2FzZSAibm90X211bHRpcGxlX29mIjoKICAgICAgICByZXR1cm4gYE9uZ2VsZGlnIGdldGFsOiBtb2V0IGVlbiB2ZWVsdm91ZCB2YW4gJHtpc3N1ZTIuZGl2aXNvcn0gemlqbmA7CiAgICAgIGNhc2UgInVucmVjb2duaXplZF9rZXlzIjoKICAgICAgICByZXR1cm4gYE9uYmVrZW5kZSBrZXkke2lzc3VlMi5rZXlzLmxlbmd0aCA+IDEgPyAicyIgOiAiIn06ICR7am9pblZhbHVlcyhpc3N1ZTIua2V5cywgIiwgIil9YDsKICAgICAgY2FzZSAiaW52YWxpZF9rZXkiOgogICAgICAgIHJldHVybiBgT25nZWxkaWdlIGtleSBpbiAke2lzc3VlMi5vcmlnaW59YDsKICAgICAgY2FzZSAiaW52YWxpZF91bmlvbiI6CiAgICAgICAgcmV0dXJuICJPbmdlbGRpZ2UgaW52b2VyIjsKICAgICAgY2FzZSAiaW52YWxpZF9lbGVtZW50IjoKICAgICAgICByZXR1cm4gYE9uZ2VsZGlnZSB3YWFyZGUgaW4gJHtpc3N1ZTIub3JpZ2lufWA7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIGBPbmdlbGRpZ2UgaW52b2VyYDsKICAgIH0KICB9Owp9OwpmdW5jdGlvbiBubF9kZWZhdWx0KCkgewogIHJldHVybiB7CiAgICBsb2NhbGVFcnJvcjogZXJyb3IyNygpCiAgfTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9sb2NhbGVzL25vLmpzCnZhciBlcnJvcjI4ID0gKCkgPT4gewogIGNvbnN0IFNpemFibGUgPSB7CiAgICBzdHJpbmc6IHsgdW5pdDogInRlZ24iLCB2ZXJiOiAiw6UgaGEiIH0sCiAgICBmaWxlOiB7IHVuaXQ6ICJieXRlcyIsIHZlcmI6ICLDpSBoYSIgfSwKICAgIGFycmF5OiB7IHVuaXQ6ICJlbGVtZW50ZXIiLCB2ZXJiOiAiw6UgaW5uZWhvbGRlIiB9LAogICAgc2V0OiB7IHVuaXQ6ICJlbGVtZW50ZXIiLCB2ZXJiOiAiw6UgaW5uZWhvbGRlIiB9CiAgfTsKICBmdW5jdGlvbiBnZXRTaXppbmcob3JpZ2luKSB7CiAgICByZXR1cm4gU2l6YWJsZVtvcmlnaW5dID8/IG51bGw7CiAgfQogIGNvbnN0IHBhcnNlZFR5cGU3ID0gKGRhdGEpID0+IHsKICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTsKICAgIHN3aXRjaCAodCkgewogICAgICBjYXNlICJudW1iZXIiOiB7CiAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/ICJOYU4iIDogInRhbGwiOwogICAgICB9CiAgICAgIGNhc2UgIm9iamVjdCI6IHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkgewogICAgICAgICAgcmV0dXJuICJsaXN0ZSI7CiAgICAgICAgfQogICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gIm51bGwiOwogICAgICAgIH0KICAgICAgICBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGRhdGEpICE9PSBPYmplY3QucHJvdG90eXBlICYmIGRhdGEuY29uc3RydWN0b3IpIHsKICAgICAgICAgIHJldHVybiBkYXRhLmNvbnN0cnVjdG9yLm5hbWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdDsKICB9OwogIGNvbnN0IE5vdW5zID0gewogICAgcmVnZXg6ICJpbnB1dCIsCiAgICBlbWFpbDogImUtcG9zdGFkcmVzc2UiLAogICAgdXJsOiAiVVJMIiwKICAgIGVtb2ppOiAiZW1vamkiLAogICAgdXVpZDogIlVVSUQiLAogICAgdXVpZHY0OiAiVVVJRHY0IiwKICAgIHV1aWR2NjogIlVVSUR2NiIsCiAgICBuYW5vaWQ6ICJuYW5vaWQiLAogICAgZ3VpZDogIkdVSUQiLAogICAgY3VpZDogImN1aWQiLAogICAgY3VpZDI6ICJjdWlkMiIsCiAgICB1bGlkOiAiVUxJRCIsCiAgICB4aWQ6ICJYSUQiLAogICAga3N1aWQ6ICJLU1VJRCIsCiAgICBkYXRldGltZTogIklTTyBkYXRvLSBvZyBrbG9ra2VzbGV0dCIsCiAgICBkYXRlOiAiSVNPLWRhdG8iLAogICAgdGltZTogIklTTy1rbG9ra2VzbGV0dCIsCiAgICBkdXJhdGlvbjogIklTTy12YXJpZ2hldCIsCiAgICBpcHY0OiAiSVB2NC1vbXLDpWRlIiwKICAgIGlwdjY6ICJJUHY2LW9tcsOlZGUiLAogICAgY2lkcnY0OiAiSVB2NC1zcGVrdGVyIiwKICAgIGNpZHJ2NjogIklQdjYtc3Bla3RlciIsCiAgICBiYXNlNjQ6ICJiYXNlNjQtZW5rb2RldCBzdHJlbmciLAogICAgYmFzZTY0dXJsOiAiYmFzZTY0dXJsLWVua29kZXQgc3RyZW5nIiwKICAgIGpzb25fc3RyaW5nOiAiSlNPTi1zdHJlbmciLAogICAgZTE2NDogIkUuMTY0LW51bW1lciIsCiAgICBqd3Q6ICJKV1QiLAogICAgdGVtcGxhdGVfbGl0ZXJhbDogImlucHV0IgogIH07CiAgcmV0dXJuIChpc3N1ZTIpID0+IHsKICAgIHN3aXRjaCAoaXNzdWUyLmNvZGUpIHsKICAgICAgY2FzZSAiaW52YWxpZF90eXBlIjoKICAgICAgICByZXR1cm4gYFVneWxkaWcgaW5wdXQ6IGZvcnZlbnRldCAke2lzc3VlMi5leHBlY3RlZH0sIGZpa2sgJHtwYXJzZWRUeXBlNyhpc3N1ZTIuaW5wdXQpfWA7CiAgICAgIGNhc2UgImludmFsaWRfdmFsdWUiOgogICAgICAgIGlmIChpc3N1ZTIudmFsdWVzLmxlbmd0aCA9PT0gMSkKICAgICAgICAgIHJldHVybiBgVWd5bGRpZyB2ZXJkaTogZm9ydmVudGV0ICR7c3RyaW5naWZ5UHJpbWl0aXZlKGlzc3VlMi52YWx1ZXNbMF0pfWA7CiAgICAgICAgcmV0dXJuIGBVZ3lsZGlnIHZhbGc6IGZvcnZlbnRldCBlbiBhdiAke2pvaW5WYWx1ZXMoaXNzdWUyLnZhbHVlcywgInwiKX1gOwogICAgICBjYXNlICJ0b29fYmlnIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPD0iIDogIjwiOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKQogICAgICAgICAgcmV0dXJuIGBGb3Igc3Rvcih0KTogZm9ydmVudGV0ICR7aXNzdWUyLm9yaWdpbiA/PyAidmFsdWUifSB0aWwgw6UgaGEgJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0ID8/ICJlbGVtZW50ZXIifWA7CiAgICAgICAgcmV0dXJuIGBGb3Igc3Rvcih0KTogZm9ydmVudGV0ICR7aXNzdWUyLm9yaWdpbiA/PyAidmFsdWUifSB0aWwgw6UgaGEgJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfWA7CiAgICAgIH0KICAgICAgY2FzZSAidG9vX3NtYWxsIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPj0iIDogIj4iOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKSB7CiAgICAgICAgICByZXR1cm4gYEZvciBsaXRlKG4pOiBmb3J2ZW50ZXQgJHtpc3N1ZTIub3JpZ2lufSB0aWwgw6UgaGEgJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0fWA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBgRm9yIGxpdGUobik6IGZvcnZlbnRldCAke2lzc3VlMi5vcmlnaW59IHRpbCDDpSBoYSAke2Fkan0ke2lzc3VlMi5taW5pbXVtLnRvU3RyaW5nKCl9YDsKICAgICAgfQogICAgICBjYXNlICJpbnZhbGlkX2Zvcm1hdCI6IHsKICAgICAgICBjb25zdCBfaXNzdWUgPSBpc3N1ZTI7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJzdGFydHNfd2l0aCIpCiAgICAgICAgICByZXR1cm4gYFVneWxkaWcgc3RyZW5nOiBtw6Ugc3RhcnRlIG1lZCAiJHtfaXNzdWUucHJlZml4fSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiZW5kc193aXRoIikKICAgICAgICAgIHJldHVybiBgVWd5bGRpZyBzdHJlbmc6IG3DpSBlbmRlIG1lZCAiJHtfaXNzdWUuc3VmZml4fSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiaW5jbHVkZXMiKQogICAgICAgICAgcmV0dXJuIGBVZ3lsZGlnIHN0cmVuZzogbcOlIGlubmVob2xkZSAiJHtfaXNzdWUuaW5jbHVkZXN9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJyZWdleCIpCiAgICAgICAgICByZXR1cm4gYFVneWxkaWcgc3RyZW5nOiBtw6UgbWF0Y2hlIG3DuG5zdGVyZXQgJHtfaXNzdWUucGF0dGVybn1gOwogICAgICAgIHJldHVybiBgVWd5bGRpZyAke05vdW5zW19pc3N1ZS5mb3JtYXRdID8/IGlzc3VlMi5mb3JtYXR9YDsKICAgICAgfQogICAgICBjYXNlICJub3RfbXVsdGlwbGVfb2YiOgogICAgICAgIHJldHVybiBgVWd5bGRpZyB0YWxsOiBtw6UgdsOmcmUgZXQgbXVsdGlwbHVtIGF2ICR7aXNzdWUyLmRpdmlzb3J9YDsKICAgICAgY2FzZSAidW5yZWNvZ25pemVkX2tleXMiOgogICAgICAgIHJldHVybiBgJHtpc3N1ZTIua2V5cy5sZW5ndGggPiAxID8gIlVramVudGUgbsO4a2xlciIgOiAiVWtqZW50IG7DuGtrZWwifTogJHtqb2luVmFsdWVzKGlzc3VlMi5rZXlzLCAiLCAiKX1gOwogICAgICBjYXNlICJpbnZhbGlkX2tleSI6CiAgICAgICAgcmV0dXJuIGBVZ3lsZGlnIG7DuGtrZWwgaSAke2lzc3VlMi5vcmlnaW59YDsKICAgICAgY2FzZSAiaW52YWxpZF91bmlvbiI6CiAgICAgICAgcmV0dXJuICJVZ3lsZGlnIGlucHV0IjsKICAgICAgY2FzZSAiaW52YWxpZF9lbGVtZW50IjoKICAgICAgICByZXR1cm4gYFVneWxkaWcgdmVyZGkgaSAke2lzc3VlMi5vcmlnaW59YDsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gYFVneWxkaWcgaW5wdXRgOwogICAgfQogIH07Cn07CmZ1bmN0aW9uIG5vX2RlZmF1bHQoKSB7CiAgcmV0dXJuIHsKICAgIGxvY2FsZUVycm9yOiBlcnJvcjI4KCkKICB9Owp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2xvY2FsZXMvb3RhLmpzCnZhciBlcnJvcjI5ID0gKCkgPT4gewogIGNvbnN0IFNpemFibGUgPSB7CiAgICBzdHJpbmc6IHsgdW5pdDogImhhcmYiLCB2ZXJiOiAib2xtYWzEsWTEsXIiIH0sCiAgICBmaWxlOiB7IHVuaXQ6ICJiYXl0IiwgdmVyYjogIm9sbWFsxLFkxLFyIiB9LAogICAgYXJyYXk6IHsgdW5pdDogInVuc3VyIiwgdmVyYjogIm9sbWFsxLFkxLFyIiB9LAogICAgc2V0OiB7IHVuaXQ6ICJ1bnN1ciIsIHZlcmI6ICJvbG1hbMSxZMSxciIgfQogIH07CiAgZnVuY3Rpb24gZ2V0U2l6aW5nKG9yaWdpbikgewogICAgcmV0dXJuIFNpemFibGVbb3JpZ2luXSA/PyBudWxsOwogIH0KICBjb25zdCBwYXJzZWRUeXBlNyA9IChkYXRhKSA9PiB7CiAgICBjb25zdCB0ID0gdHlwZW9mIGRhdGE7CiAgICBzd2l0Y2ggKHQpIHsKICAgICAgY2FzZSAibnVtYmVyIjogewogICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0YSkgPyAiTmFOIiA6ICJudW1hcmEiOwogICAgICB9CiAgICAgIGNhc2UgIm9iamVjdCI6IHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkgewogICAgICAgICAgcmV0dXJuICJzYWYiOwogICAgICAgIH0KICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuICJnYXliIjsKICAgICAgICB9CiAgICAgICAgaWYgKE9iamVjdC5nZXRQcm90b3R5cGVPZihkYXRhKSAhPT0gT2JqZWN0LnByb3RvdHlwZSAmJiBkYXRhLmNvbnN0cnVjdG9yKSB7CiAgICAgICAgICByZXR1cm4gZGF0YS5jb25zdHJ1Y3Rvci5uYW1lOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHQ7CiAgfTsKICBjb25zdCBOb3VucyA9IHsKICAgIHJlZ2V4OiAiZ2lyZW4iLAogICAgZW1haWw6ICJlcG9zdGFnw6JoIiwKICAgIHVybDogIlVSTCIsCiAgICBlbW9qaTogImVtb2ppIiwKICAgIHV1aWQ6ICJVVUlEIiwKICAgIHV1aWR2NDogIlVVSUR2NCIsCiAgICB1dWlkdjY6ICJVVUlEdjYiLAogICAgbmFub2lkOiAibmFub2lkIiwKICAgIGd1aWQ6ICJHVUlEIiwKICAgIGN1aWQ6ICJjdWlkIiwKICAgIGN1aWQyOiAiY3VpZDIiLAogICAgdWxpZDogIlVMSUQiLAogICAgeGlkOiAiWElEIiwKICAgIGtzdWlkOiAiS1NVSUQiLAogICAgZGF0ZXRpbWU6ICJJU08gaGVuZ8OibcSxIiwKICAgIGRhdGU6ICJJU08gdGFyaWhpIiwKICAgIHRpbWU6ICJJU08gemFtYW7EsSIsCiAgICBkdXJhdGlvbjogIklTTyBtw7xkZGV0aSIsCiAgICBpcHY0OiAiSVB2NCBuacWfw6JuxLEiLAogICAgaXB2NjogIklQdjYgbmnFn8OibsSxIiwKICAgIGNpZHJ2NDogIklQdjQgbWVuemlsaSIsCiAgICBjaWRydjY6ICJJUHY2IG1lbnppbGkiLAogICAgYmFzZTY0OiAiYmFzZTY0LcWfaWZyZWxpIG1ldGluIiwKICAgIGJhc2U2NHVybDogImJhc2U2NHVybC3Fn2lmcmVsaSBtZXRpbiIsCiAgICBqc29uX3N0cmluZzogIkpTT04gbWV0aW4iLAogICAgZTE2NDogIkUuMTY0IHNhecSxc8SxIiwKICAgIGp3dDogIkpXVCIsCiAgICB0ZW1wbGF0ZV9saXRlcmFsOiAiZ2lyZW4iCiAgfTsKICByZXR1cm4gKGlzc3VlMikgPT4gewogICAgc3dpdGNoIChpc3N1ZTIuY29kZSkgewogICAgICBjYXNlICJpbnZhbGlkX3R5cGUiOgogICAgICAgIHJldHVybiBgRsOic2l0IGdpcmVuOiB1bXVsYW4gJHtpc3N1ZTIuZXhwZWN0ZWR9LCBhbMSxbmFuICR7cGFyc2VkVHlwZTcoaXNzdWUyLmlucHV0KX1gOwogICAgICAvLyByZXR1cm4gYEbDonNpdCBnaXJlbjogdW11bGFuICR7aXNzdWUuZXhwZWN0ZWR9LCBhbMSxbmFuICR7dXRpbC5nZXRQYXJzZWRUeXBlKGlzc3VlLmlucHV0KX1gOwogICAgICBjYXNlICJpbnZhbGlkX3ZhbHVlIjoKICAgICAgICBpZiAoaXNzdWUyLnZhbHVlcy5sZW5ndGggPT09IDEpCiAgICAgICAgICByZXR1cm4gYEbDonNpdCBnaXJlbjogdW11bGFuICR7c3RyaW5naWZ5UHJpbWl0aXZlKGlzc3VlMi52YWx1ZXNbMF0pfWA7CiAgICAgICAgcmV0dXJuIGBGw6JzaXQgdGVyY2loOiBtw7t0ZWJlcmxlciAke2pvaW5WYWx1ZXMoaXNzdWUyLnZhbHVlcywgInwiKX1gOwogICAgICBjYXNlICJ0b29fYmlnIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPD0iIDogIjwiOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKQogICAgICAgICAgcmV0dXJuIGBGYXpsYSBiw7x5w7xrOiAke2lzc3VlMi5vcmlnaW4gPz8gInZhbHVlIn0sICR7YWRqfSR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdCA/PyAiZWxlbWVudHMifSBzYWhpcCBvbG1hbMSxeWTEsS5gOwogICAgICAgIHJldHVybiBgRmF6bGEgYsO8ecO8azogJHtpc3N1ZTIub3JpZ2luID8/ICJ2YWx1ZSJ9LCAke2Fkan0ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9IG9sbWFsxLF5ZMSxLmA7CiAgICAgIH0KICAgICAgY2FzZSAidG9vX3NtYWxsIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPj0iIDogIj4iOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKSB7CiAgICAgICAgICByZXR1cm4gYEZhemxhIGvDvMOnw7xrOiAke2lzc3VlMi5vcmlnaW59LCAke2Fkan0ke2lzc3VlMi5taW5pbXVtLnRvU3RyaW5nKCl9ICR7c2l6aW5nLnVuaXR9IHNhaGlwIG9sbWFsxLF5ZMSxLmA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBgRmF6bGEga8O8w6fDvGs6ICR7aXNzdWUyLm9yaWdpbn0sICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX0gb2xtYWzEsXlkxLEuYDsKICAgICAgfQogICAgICBjYXNlICJpbnZhbGlkX2Zvcm1hdCI6IHsKICAgICAgICBjb25zdCBfaXNzdWUgPSBpc3N1ZTI7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJzdGFydHNfd2l0aCIpCiAgICAgICAgICByZXR1cm4gYEbDonNpdCBtZXRpbjogIiR7X2lzc3VlLnByZWZpeH0iIGlsZSBiYcWfbGFtYWzEsS5gOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiZW5kc193aXRoIikKICAgICAgICAgIHJldHVybiBgRsOic2l0IG1ldGluOiAiJHtfaXNzdWUuc3VmZml4fSIgaWxlIGJpdG1lbGkuYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImluY2x1ZGVzIikKICAgICAgICAgIHJldHVybiBgRsOic2l0IG1ldGluOiAiJHtfaXNzdWUuaW5jbHVkZXN9IiBpaHRpdsOiIGV0bWVsaS5gOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAicmVnZXgiKQogICAgICAgICAgcmV0dXJuIGBGw6JzaXQgbWV0aW46ICR7X2lzc3VlLnBhdHRlcm59IG5ha8WfxLFuYSB1eW1hbMSxLmA7CiAgICAgICAgcmV0dXJuIGBGw6JzaXQgJHtOb3Vuc1tfaXNzdWUuZm9ybWF0XSA/PyBpc3N1ZTIuZm9ybWF0fWA7CiAgICAgIH0KICAgICAgY2FzZSAibm90X211bHRpcGxlX29mIjoKICAgICAgICByZXR1cm4gYEbDonNpdCBzYXnEsTogJHtpc3N1ZTIuZGl2aXNvcn0ga2F0xLEgb2xtYWzEsXlkxLEuYDsKICAgICAgY2FzZSAidW5yZWNvZ25pemVkX2tleXMiOgogICAgICAgIHJldHVybiBgVGFuxLFubWF5YW4gYW5haHRhciAke2lzc3VlMi5rZXlzLmxlbmd0aCA+IDEgPyAicyIgOiAiIn06ICR7am9pblZhbHVlcyhpc3N1ZTIua2V5cywgIiwgIil9YDsKICAgICAgY2FzZSAiaW52YWxpZF9rZXkiOgogICAgICAgIHJldHVybiBgJHtpc3N1ZTIub3JpZ2lufSBpw6dpbiB0YW7EsW5tYXlhbiBhbmFodGFyIHZhci5gOwogICAgICBjYXNlICJpbnZhbGlkX3VuaW9uIjoKICAgICAgICByZXR1cm4gIkdpcmVuIHRhbsSxbmFtYWTEsS4iOwogICAgICBjYXNlICJpbnZhbGlkX2VsZW1lbnQiOgogICAgICAgIHJldHVybiBgJHtpc3N1ZTIub3JpZ2lufSBpw6dpbiB0YW7EsW5tYXlhbiBrxLF5bWV0IHZhci5gOwogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBgS8SxeW1ldCB0YW7EsW5hbWFkxLEuYDsKICAgIH0KICB9Owp9OwpmdW5jdGlvbiBvdGFfZGVmYXVsdCgpIHsKICByZXR1cm4gewogICAgbG9jYWxlRXJyb3I6IGVycm9yMjkoKQogIH07Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvbG9jYWxlcy9wcy5qcwp2YXIgZXJyb3IzMCA9ICgpID0+IHsKICBjb25zdCBTaXphYmxlID0gewogICAgc3RyaW5nOiB7IHVuaXQ6ICLYqtmI2qnZiiIsIHZlcmI6ICLZiNmE2LHZiiIgfSwKICAgIGZpbGU6IHsgdW5pdDogItio2KfbjNm82LMiLCB2ZXJiOiAi2YjZhNix2YoiIH0sCiAgICBhcnJheTogeyB1bml0OiAi2KrZiNqp2YoiLCB2ZXJiOiAi2YjZhNix2YoiIH0sCiAgICBzZXQ6IHsgdW5pdDogItiq2YjaqdmKIiwgdmVyYjogItmI2YTYsdmKIiB9CiAgfTsKICBmdW5jdGlvbiBnZXRTaXppbmcob3JpZ2luKSB7CiAgICByZXR1cm4gU2l6YWJsZVtvcmlnaW5dID8/IG51bGw7CiAgfQogIGNvbnN0IHBhcnNlZFR5cGU3ID0gKGRhdGEpID0+IHsKICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTsKICAgIHN3aXRjaCAodCkgewogICAgICBjYXNlICJudW1iZXIiOiB7CiAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/ICJOYU4iIDogIti52K/YryI7CiAgICAgIH0KICAgICAgY2FzZSAib2JqZWN0IjogewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgICAgICByZXR1cm4gItin2LHbkCI7CiAgICAgICAgfQogICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gIm51bGwiOwogICAgICAgIH0KICAgICAgICBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGRhdGEpICE9PSBPYmplY3QucHJvdG90eXBlICYmIGRhdGEuY29uc3RydWN0b3IpIHsKICAgICAgICAgIHJldHVybiBkYXRhLmNvbnN0cnVjdG9yLm5hbWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdDsKICB9OwogIGNvbnN0IE5vdW5zID0gewogICAgcmVnZXg6ICLZiNix2YjYr9mKIiwKICAgIGVtYWlsOiAi2KjYsduM2prZhtin2YTbjNqpIiwKICAgIHVybDogItuM2Ygg2KLYsSDYp9mEIiwKICAgIGVtb2ppOiAi2KfbjNmF2YjYrNmKIiwKICAgIHV1aWQ6ICJVVUlEIiwKICAgIHV1aWR2NDogIlVVSUR2NCIsCiAgICB1dWlkdjY6ICJVVUlEdjYiLAogICAgbmFub2lkOiAibmFub2lkIiwKICAgIGd1aWQ6ICJHVUlEIiwKICAgIGN1aWQ6ICJjdWlkIiwKICAgIGN1aWQyOiAiY3VpZDIiLAogICAgdWxpZDogIlVMSUQiLAogICAgeGlkOiAiWElEIiwKICAgIGtzdWlkOiAiS1NVSUQiLAogICAgZGF0ZXRpbWU6ICLZhtuM2bzZhyDYp9mIINmI2K7YqiIsCiAgICBkYXRlOiAi2YbbkNm82YciLAogICAgdGltZTogItmI2K7YqiIsCiAgICBkdXJhdGlvbjogItmF2YjYr9mHIiwKICAgIGlwdjQ6ICLYryBJUHY0INm+2KrZhyIsCiAgICBpcHY2OiAi2K8gSVB2NiDZvtiq2YciLAogICAgY2lkcnY0OiAi2K8gSVB2NCDYs9in2K3ZhyIsCiAgICBjaWRydjY6ICLYryBJUHY2INiz2KfYrdmHIiwKICAgIGJhc2U2NDogImJhc2U2NC1lbmNvZGVkINmF2KrZhiIsCiAgICBiYXNlNjR1cmw6ICJiYXNlNjR1cmwtZW5jb2RlZCDZhdiq2YYiLAogICAganNvbl9zdHJpbmc6ICJKU09OINmF2KrZhiIsCiAgICBlMTY0OiAi2K8gRS4xNjQg2LTZhduQ2LHZhyIsCiAgICBqd3Q6ICJKV1QiLAogICAgdGVtcGxhdGVfbGl0ZXJhbDogItmI2LHZiNiv2YoiCiAgfTsKICByZXR1cm4gKGlzc3VlMikgPT4gewogICAgc3dpdGNoIChpc3N1ZTIuY29kZSkgewogICAgICBjYXNlICJpbnZhbGlkX3R5cGUiOgogICAgICAgIHJldHVybiBg2YbYp9iz2YUg2YjYsdmI2K/Zijog2KjYp9uM2K8gJHtpc3N1ZTIuZXhwZWN0ZWR9INmI2KfbjCwg2YXaq9ixICR7cGFyc2VkVHlwZTcoaXNzdWUyLmlucHV0KX0g2KrYsdmE2KfYs9mHINi02YhgOwogICAgICBjYXNlICJpbnZhbGlkX3ZhbHVlIjoKICAgICAgICBpZiAoaXNzdWUyLnZhbHVlcy5sZW5ndGggPT09IDEpIHsKICAgICAgICAgIHJldHVybiBg2YbYp9iz2YUg2YjYsdmI2K/Zijog2KjYp9uM2K8gJHtzdHJpbmdpZnlQcmltaXRpdmUoaXNzdWUyLnZhbHVlc1swXSl9INmI2KfbjGA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBg2YbYp9iz2YUg2KfZhtiq2K7Yp9ioOiDYqNin24zYryDbjNmIINmE2YcgJHtqb2luVmFsdWVzKGlzc3VlMi52YWx1ZXMsICJ8Iil9INqF2K7ZhyDZiNin24xgOwogICAgICBjYXNlICJ0b29fYmlnIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPD0iIDogIjwiOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKSB7CiAgICAgICAgICByZXR1cm4gYNqJ24zYsSDZhNmI24w6ICR7aXNzdWUyLm9yaWdpbiA/PyAi2KfYsdiy2prYqiJ9INio2KfbjNivICR7YWRqfSR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdCA/PyAi2LnZhti12LHZiNmG2YcifSDZiNmE2LHZimA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBg2onbjNixINmE2YjbjDogJHtpc3N1ZTIub3JpZ2luID8/ICLYp9ix2LLamtiqIn0g2KjYp9uM2K8gJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfSDZiNmKYDsKICAgICAgfQogICAgICBjYXNlICJ0b29fc21hbGwiOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI+PSIgOiAiPiI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpIHsKICAgICAgICAgIHJldHVybiBg2onbjNixINqp2YjahtmG24w6ICR7aXNzdWUyLm9yaWdpbn0g2KjYp9uM2K8gJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0fSDZiNmE2LHZimA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBg2onbjNixINqp2YjahtmG24w6ICR7aXNzdWUyLm9yaWdpbn0g2KjYp9uM2K8gJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSDZiNmKYDsKICAgICAgfQogICAgICBjYXNlICJpbnZhbGlkX2Zvcm1hdCI6IHsKICAgICAgICBjb25zdCBfaXNzdWUgPSBpc3N1ZTI7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJzdGFydHNfd2l0aCIpIHsKICAgICAgICAgIHJldHVybiBg2YbYp9iz2YUg2YXYqtmGOiDYqNin24zYryDYryAiJHtfaXNzdWUucHJlZml4fSIg2LPYsdmHINm+24zZhCDYtNmKYDsKICAgICAgICB9CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJlbmRzX3dpdGgiKSB7CiAgICAgICAgICByZXR1cm4gYNmG2KfYs9mFINmF2KrZhjog2KjYp9uM2K8g2K8gIiR7X2lzc3VlLnN1ZmZpeH0iINiz2LHZhyDZvtin24wg2KrZhyDZiNix2LPZitqW2YpgOwogICAgICAgIH0KICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImluY2x1ZGVzIikgewogICAgICAgICAgcmV0dXJuIGDZhtin2LPZhSDZhdiq2YY6INio2KfbjNivICIke19pc3N1ZS5pbmNsdWRlc30iINmI2YTYsdmKYDsKICAgICAgICB9CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJyZWdleCIpIHsKICAgICAgICAgIHJldHVybiBg2YbYp9iz2YUg2YXYqtmGOiDYqNin24zYryDYryAke19pc3N1ZS5wYXR0ZXJufSDYs9ix2Ycg2YXYt9in2KjZgtiqINmI2YTYsdmKYDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGAke05vdW5zW19pc3N1ZS5mb3JtYXRdID8/IGlzc3VlMi5mb3JtYXR9INmG2KfYs9mFINiv24xgOwogICAgICB9CiAgICAgIGNhc2UgIm5vdF9tdWx0aXBsZV9vZiI6CiAgICAgICAgcmV0dXJuIGDZhtin2LPZhSDYudiv2K86INio2KfbjNivINivICR7aXNzdWUyLmRpdmlzb3J9INmF2LbYsdioINmI2YpgOwogICAgICBjYXNlICJ1bnJlY29nbml6ZWRfa2V5cyI6CiAgICAgICAgcmV0dXJuIGDZhtin2LPZhSAke2lzc3VlMi5rZXlzLmxlbmd0aCA+IDEgPyAi2qnZhNuM2onZiNmG2YciIDogItqp2YTbjNqJIn06ICR7am9pblZhbHVlcyhpc3N1ZTIua2V5cywgIiwgIil9YDsKICAgICAgY2FzZSAiaW52YWxpZF9rZXkiOgogICAgICAgIHJldHVybiBg2YbYp9iz2YUg2qnZhNuM2okg2b7ZhyAke2lzc3VlMi5vcmlnaW59INqp25BgOwogICAgICBjYXNlICJpbnZhbGlkX3VuaW9uIjoKICAgICAgICByZXR1cm4gYNmG2KfYs9mF2Ycg2YjYsdmI2K/ZimA7CiAgICAgIGNhc2UgImludmFsaWRfZWxlbWVudCI6CiAgICAgICAgcmV0dXJuIGDZhtin2LPZhSDYudmG2LXYsSDZvtmHICR7aXNzdWUyLm9yaWdpbn0g2qnbkGA7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIGDZhtin2LPZhdmHINmI2LHZiNiv2YpgOwogICAgfQogIH07Cn07CmZ1bmN0aW9uIHBzX2RlZmF1bHQoKSB7CiAgcmV0dXJuIHsKICAgIGxvY2FsZUVycm9yOiBlcnJvcjMwKCkKICB9Owp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2xvY2FsZXMvcGwuanMKdmFyIGVycm9yMzEgPSAoKSA9PiB7CiAgY29uc3QgU2l6YWJsZSA9IHsKICAgIHN0cmluZzogeyB1bml0OiAiem5ha8OzdyIsIHZlcmI6ICJtaWXEhyIgfSwKICAgIGZpbGU6IHsgdW5pdDogImJhanTDs3ciLCB2ZXJiOiAibWllxIciIH0sCiAgICBhcnJheTogeyB1bml0OiAiZWxlbWVudMOzdyIsIHZlcmI6ICJtaWXEhyIgfSwKICAgIHNldDogeyB1bml0OiAiZWxlbWVudMOzdyIsIHZlcmI6ICJtaWXEhyIgfQogIH07CiAgZnVuY3Rpb24gZ2V0U2l6aW5nKG9yaWdpbikgewogICAgcmV0dXJuIFNpemFibGVbb3JpZ2luXSA/PyBudWxsOwogIH0KICBjb25zdCBwYXJzZWRUeXBlNyA9IChkYXRhKSA9PiB7CiAgICBjb25zdCB0ID0gdHlwZW9mIGRhdGE7CiAgICBzd2l0Y2ggKHQpIHsKICAgICAgY2FzZSAibnVtYmVyIjogewogICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0YSkgPyAiTmFOIiA6ICJsaWN6YmEiOwogICAgICB9CiAgICAgIGNhc2UgIm9iamVjdCI6IHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkgewogICAgICAgICAgcmV0dXJuICJ0YWJsaWNhIjsKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHsKICAgICAgICAgIHJldHVybiAibnVsbCI7CiAgICAgICAgfQogICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZGF0YSkgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgZGF0YS5jb25zdHJ1Y3RvcikgewogICAgICAgICAgcmV0dXJuIGRhdGEuY29uc3RydWN0b3IubmFtZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0OwogIH07CiAgY29uc3QgTm91bnMgPSB7CiAgICByZWdleDogInd5cmHFvGVuaWUiLAogICAgZW1haWw6ICJhZHJlcyBlbWFpbCIsCiAgICB1cmw6ICJVUkwiLAogICAgZW1vamk6ICJlbW9qaSIsCiAgICB1dWlkOiAiVVVJRCIsCiAgICB1dWlkdjQ6ICJVVUlEdjQiLAogICAgdXVpZHY2OiAiVVVJRHY2IiwKICAgIG5hbm9pZDogIm5hbm9pZCIsCiAgICBndWlkOiAiR1VJRCIsCiAgICBjdWlkOiAiY3VpZCIsCiAgICBjdWlkMjogImN1aWQyIiwKICAgIHVsaWQ6ICJVTElEIiwKICAgIHhpZDogIlhJRCIsCiAgICBrc3VpZDogIktTVUlEIiwKICAgIGRhdGV0aW1lOiAiZGF0YSBpIGdvZHppbmEgdyBmb3JtYWNpZSBJU08iLAogICAgZGF0ZTogImRhdGEgdyBmb3JtYWNpZSBJU08iLAogICAgdGltZTogImdvZHppbmEgdyBmb3JtYWNpZSBJU08iLAogICAgZHVyYXRpb246ICJjemFzIHRyd2FuaWEgSVNPIiwKICAgIGlwdjQ6ICJhZHJlcyBJUHY0IiwKICAgIGlwdjY6ICJhZHJlcyBJUHY2IiwKICAgIGNpZHJ2NDogInpha3JlcyBJUHY0IiwKICAgIGNpZHJ2NjogInpha3JlcyBJUHY2IiwKICAgIGJhc2U2NDogImNpxIVnIHpuYWvDs3cgemFrb2Rvd2FueSB3IGZvcm1hY2llIGJhc2U2NCIsCiAgICBiYXNlNjR1cmw6ICJjacSFZyB6bmFrw7N3IHpha29kb3dhbnkgdyBmb3JtYWNpZSBiYXNlNjR1cmwiLAogICAganNvbl9zdHJpbmc6ICJjacSFZyB6bmFrw7N3IHcgZm9ybWFjaWUgSlNPTiIsCiAgICBlMTY0OiAibGljemJhIEUuMTY0IiwKICAgIGp3dDogIkpXVCIsCiAgICB0ZW1wbGF0ZV9saXRlcmFsOiAid2VqxZtjaWUiCiAgfTsKICByZXR1cm4gKGlzc3VlMikgPT4gewogICAgc3dpdGNoIChpc3N1ZTIuY29kZSkgewogICAgICBjYXNlICJpbnZhbGlkX3R5cGUiOgogICAgICAgIHJldHVybiBgTmllcHJhd2lkxYJvd2UgZGFuZSB3ZWrFm2Npb3dlOiBvY3pla2l3YW5vICR7aXNzdWUyLmV4cGVjdGVkfSwgb3RyenltYW5vICR7cGFyc2VkVHlwZTcoaXNzdWUyLmlucHV0KX1gOwogICAgICBjYXNlICJpbnZhbGlkX3ZhbHVlIjoKICAgICAgICBpZiAoaXNzdWUyLnZhbHVlcy5sZW5ndGggPT09IDEpCiAgICAgICAgICByZXR1cm4gYE5pZXByYXdpZMWCb3dlIGRhbmUgd2VqxZtjaW93ZTogb2N6ZWtpd2FubyAke3N0cmluZ2lmeVByaW1pdGl2ZShpc3N1ZTIudmFsdWVzWzBdKX1gOwogICAgICAgIHJldHVybiBgTmllcHJhd2lkxYJvd2Egb3BjamE6IG9jemVraXdhbm8gamVkbmVqIHogd2FydG/Fm2NpICR7am9pblZhbHVlcyhpc3N1ZTIudmFsdWVzLCAifCIpfWA7CiAgICAgIGNhc2UgInRvb19iaWciOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI8PSIgOiAiPCI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpIHsKICAgICAgICAgIHJldHVybiBgWmEgZHXFvGEgd2FydG/Fm8SHOiBvY3pla2l3YW5vLCDFvGUgJHtpc3N1ZTIub3JpZ2luID8/ICJ3YXJ0b8WbxIcifSBixJlkemllIG1pZcSHICR7YWRqfSR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdCA/PyAiZWxlbWVudMOzdyJ9YDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGBaYnl0IGR1xbwoeS9hL2UpOiBvY3pla2l3YW5vLCDFvGUgJHtpc3N1ZTIub3JpZ2luID8/ICJ3YXJ0b8WbxIcifSBixJlkemllIHd5bm9zacSHICR7YWRqfSR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgInRvb19zbWFsbCI6IHsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIj49IiA6ICI+IjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykgewogICAgICAgICAgcmV0dXJuIGBaYSBtYcWCYSB3YXJ0b8WbxIc6IG9jemVraXdhbm8sIMW8ZSAke2lzc3VlMi5vcmlnaW4gPz8gIndhcnRvxZvEhyJ9IGLEmWR6aWUgbWllxIcgJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0ID8/ICJlbGVtZW50w7N3In1gOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYFpieXQgbWHFgih5L2EvZSk6IG9jemVraXdhbm8sIMW8ZSAke2lzc3VlMi5vcmlnaW4gPz8gIndhcnRvxZvEhyJ9IGLEmWR6aWUgd3lub3NpxIcgJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfWA7CiAgICAgIH0KICAgICAgY2FzZSAiaW52YWxpZF9mb3JtYXQiOiB7CiAgICAgICAgY29uc3QgX2lzc3VlID0gaXNzdWUyOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAic3RhcnRzX3dpdGgiKQogICAgICAgICAgcmV0dXJuIGBOaWVwcmF3aWTFgm93eSBjacSFZyB6bmFrw7N3OiBtdXNpIHphY3p5bmHEhyBzacSZIG9kICIke19pc3N1ZS5wcmVmaXh9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJlbmRzX3dpdGgiKQogICAgICAgICAgcmV0dXJuIGBOaWVwcmF3aWTFgm93eSBjacSFZyB6bmFrw7N3OiBtdXNpIGtvxYRjennEhyBzacSZIG5hICIke19pc3N1ZS5zdWZmaXh9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJpbmNsdWRlcyIpCiAgICAgICAgICByZXR1cm4gYE5pZXByYXdpZMWCb3d5IGNpxIVnIHpuYWvDs3c6IG11c2kgemF3aWVyYcSHICIke19pc3N1ZS5pbmNsdWRlc30iYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInJlZ2V4IikKICAgICAgICAgIHJldHVybiBgTmllcHJhd2lkxYJvd3kgY2nEhWcgem5ha8OzdzogbXVzaSBvZHBvd2lhZGHEhyB3em9yY293aSAke19pc3N1ZS5wYXR0ZXJufWA7CiAgICAgICAgcmV0dXJuIGBOaWVwcmF3aWTFgm93KHkvYS9lKSAke05vdW5zW19pc3N1ZS5mb3JtYXRdID8/IGlzc3VlMi5mb3JtYXR9YDsKICAgICAgfQogICAgICBjYXNlICJub3RfbXVsdGlwbGVfb2YiOgogICAgICAgIHJldHVybiBgTmllcHJhd2lkxYJvd2EgbGljemJhOiBtdXNpIGJ5xIcgd2llbG9rcm90bm/Fm2NpxIUgJHtpc3N1ZTIuZGl2aXNvcn1gOwogICAgICBjYXNlICJ1bnJlY29nbml6ZWRfa2V5cyI6CiAgICAgICAgcmV0dXJuIGBOaWVyb3pwb3puYW5lIGtsdWN6ZSR7aXNzdWUyLmtleXMubGVuZ3RoID4gMSA/ICJzIiA6ICIifTogJHtqb2luVmFsdWVzKGlzc3VlMi5rZXlzLCAiLCAiKX1gOwogICAgICBjYXNlICJpbnZhbGlkX2tleSI6CiAgICAgICAgcmV0dXJuIGBOaWVwcmF3aWTFgm93eSBrbHVjeiB3ICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBjYXNlICJpbnZhbGlkX3VuaW9uIjoKICAgICAgICByZXR1cm4gIk5pZXByYXdpZMWCb3dlIGRhbmUgd2VqxZtjaW93ZSI7CiAgICAgIGNhc2UgImludmFsaWRfZWxlbWVudCI6CiAgICAgICAgcmV0dXJuIGBOaWVwcmF3aWTFgm93YSB3YXJ0b8WbxIcgdyAke2lzc3VlMi5vcmlnaW59YDsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gYE5pZXByYXdpZMWCb3dlIGRhbmUgd2VqxZtjaW93ZWA7CiAgICB9CiAgfTsKfTsKZnVuY3Rpb24gcGxfZGVmYXVsdCgpIHsKICByZXR1cm4gewogICAgbG9jYWxlRXJyb3I6IGVycm9yMzEoKQogIH07Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvbG9jYWxlcy9wdC5qcwp2YXIgZXJyb3IzMiA9ICgpID0+IHsKICBjb25zdCBTaXphYmxlID0gewogICAgc3RyaW5nOiB7IHVuaXQ6ICJjYXJhY3RlcmVzIiwgdmVyYjogInRlciIgfSwKICAgIGZpbGU6IHsgdW5pdDogImJ5dGVzIiwgdmVyYjogInRlciIgfSwKICAgIGFycmF5OiB7IHVuaXQ6ICJpdGVucyIsIHZlcmI6ICJ0ZXIiIH0sCiAgICBzZXQ6IHsgdW5pdDogIml0ZW5zIiwgdmVyYjogInRlciIgfQogIH07CiAgZnVuY3Rpb24gZ2V0U2l6aW5nKG9yaWdpbikgewogICAgcmV0dXJuIFNpemFibGVbb3JpZ2luXSA/PyBudWxsOwogIH0KICBjb25zdCBwYXJzZWRUeXBlNyA9IChkYXRhKSA9PiB7CiAgICBjb25zdCB0ID0gdHlwZW9mIGRhdGE7CiAgICBzd2l0Y2ggKHQpIHsKICAgICAgY2FzZSAibnVtYmVyIjogewogICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0YSkgPyAiTmFOIiA6ICJuw7ptZXJvIjsKICAgICAgfQogICAgICBjYXNlICJvYmplY3QiOiB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHsKICAgICAgICAgIHJldHVybiAiYXJyYXkiOwogICAgICAgIH0KICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuICJudWxvIjsKICAgICAgICB9CiAgICAgICAgaWYgKE9iamVjdC5nZXRQcm90b3R5cGVPZihkYXRhKSAhPT0gT2JqZWN0LnByb3RvdHlwZSAmJiBkYXRhLmNvbnN0cnVjdG9yKSB7CiAgICAgICAgICByZXR1cm4gZGF0YS5jb25zdHJ1Y3Rvci5uYW1lOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHQ7CiAgfTsKICBjb25zdCBOb3VucyA9IHsKICAgIHJlZ2V4OiAicGFkcsOjbyIsCiAgICBlbWFpbDogImVuZGVyZcOnbyBkZSBlLW1haWwiLAogICAgdXJsOiAiVVJMIiwKICAgIGVtb2ppOiAiZW1vamkiLAogICAgdXVpZDogIlVVSUQiLAogICAgdXVpZHY0OiAiVVVJRHY0IiwKICAgIHV1aWR2NjogIlVVSUR2NiIsCiAgICBuYW5vaWQ6ICJuYW5vaWQiLAogICAgZ3VpZDogIkdVSUQiLAogICAgY3VpZDogImN1aWQiLAogICAgY3VpZDI6ICJjdWlkMiIsCiAgICB1bGlkOiAiVUxJRCIsCiAgICB4aWQ6ICJYSUQiLAogICAga3N1aWQ6ICJLU1VJRCIsCiAgICBkYXRldGltZTogImRhdGEgZSBob3JhIElTTyIsCiAgICBkYXRlOiAiZGF0YSBJU08iLAogICAgdGltZTogImhvcmEgSVNPIiwKICAgIGR1cmF0aW9uOiAiZHVyYcOnw6NvIElTTyIsCiAgICBpcHY0OiAiZW5kZXJlw6dvIElQdjQiLAogICAgaXB2NjogImVuZGVyZcOnbyBJUHY2IiwKICAgIGNpZHJ2NDogImZhaXhhIGRlIElQdjQiLAogICAgY2lkcnY2OiAiZmFpeGEgZGUgSVB2NiIsCiAgICBiYXNlNjQ6ICJ0ZXh0byBjb2RpZmljYWRvIGVtIGJhc2U2NCIsCiAgICBiYXNlNjR1cmw6ICJVUkwgY29kaWZpY2FkYSBlbSBiYXNlNjQiLAogICAganNvbl9zdHJpbmc6ICJ0ZXh0byBKU09OIiwKICAgIGUxNjQ6ICJuw7ptZXJvIEUuMTY0IiwKICAgIGp3dDogIkpXVCIsCiAgICB0ZW1wbGF0ZV9saXRlcmFsOiAiZW50cmFkYSIKICB9OwogIHJldHVybiAoaXNzdWUyKSA9PiB7CiAgICBzd2l0Y2ggKGlzc3VlMi5jb2RlKSB7CiAgICAgIGNhc2UgImludmFsaWRfdHlwZSI6CiAgICAgICAgcmV0dXJuIGBUaXBvIGludsOhbGlkbzogZXNwZXJhZG8gJHtpc3N1ZTIuZXhwZWN0ZWR9LCByZWNlYmlkbyAke3BhcnNlZFR5cGU3KGlzc3VlMi5pbnB1dCl9YDsKICAgICAgY2FzZSAiaW52YWxpZF92YWx1ZSI6CiAgICAgICAgaWYgKGlzc3VlMi52YWx1ZXMubGVuZ3RoID09PSAxKQogICAgICAgICAgcmV0dXJuIGBFbnRyYWRhIGludsOhbGlkYTogZXNwZXJhZG8gJHtzdHJpbmdpZnlQcmltaXRpdmUoaXNzdWUyLnZhbHVlc1swXSl9YDsKICAgICAgICByZXR1cm4gYE9ww6fDo28gaW52w6FsaWRhOiBlc3BlcmFkYSB1bWEgZGFzICR7am9pblZhbHVlcyhpc3N1ZTIudmFsdWVzLCAifCIpfWA7CiAgICAgIGNhc2UgInRvb19iaWciOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI8PSIgOiAiPCI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpCiAgICAgICAgICByZXR1cm4gYE11aXRvIGdyYW5kZTogZXNwZXJhZG8gcXVlICR7aXNzdWUyLm9yaWdpbiA/PyAidmFsb3IifSB0aXZlc3NlICR7YWRqfSR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdCA/PyAiZWxlbWVudG9zIn1gOwogICAgICAgIHJldHVybiBgTXVpdG8gZ3JhbmRlOiBlc3BlcmFkbyBxdWUgJHtpc3N1ZTIub3JpZ2luID8/ICJ2YWxvciJ9IGZvc3NlICR7YWRqfSR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgInRvb19zbWFsbCI6IHsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIj49IiA6ICI+IjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykgewogICAgICAgICAgcmV0dXJuIGBNdWl0byBwZXF1ZW5vOiBlc3BlcmFkbyBxdWUgJHtpc3N1ZTIub3JpZ2lufSB0aXZlc3NlICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdH1gOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYE11aXRvIHBlcXVlbm86IGVzcGVyYWRvIHF1ZSAke2lzc3VlMi5vcmlnaW59IGZvc3NlICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgImludmFsaWRfZm9ybWF0IjogewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInN0YXJ0c193aXRoIikKICAgICAgICAgIHJldHVybiBgVGV4dG8gaW52w6FsaWRvOiBkZXZlIGNvbWXDp2FyIGNvbSAiJHtfaXNzdWUucHJlZml4fSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiZW5kc193aXRoIikKICAgICAgICAgIHJldHVybiBgVGV4dG8gaW52w6FsaWRvOiBkZXZlIHRlcm1pbmFyIGNvbSAiJHtfaXNzdWUuc3VmZml4fSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiaW5jbHVkZXMiKQogICAgICAgICAgcmV0dXJuIGBUZXh0byBpbnbDoWxpZG86IGRldmUgaW5jbHVpciAiJHtfaXNzdWUuaW5jbHVkZXN9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJyZWdleCIpCiAgICAgICAgICByZXR1cm4gYFRleHRvIGludsOhbGlkbzogZGV2ZSBjb3JyZXNwb25kZXIgYW8gcGFkcsOjbyAke19pc3N1ZS5wYXR0ZXJufWA7CiAgICAgICAgcmV0dXJuIGAke05vdW5zW19pc3N1ZS5mb3JtYXRdID8/IGlzc3VlMi5mb3JtYXR9IGludsOhbGlkb2A7CiAgICAgIH0KICAgICAgY2FzZSAibm90X211bHRpcGxlX29mIjoKICAgICAgICByZXR1cm4gYE7Dum1lcm8gaW52w6FsaWRvOiBkZXZlIHNlciBtw7psdGlwbG8gZGUgJHtpc3N1ZTIuZGl2aXNvcn1gOwogICAgICBjYXNlICJ1bnJlY29nbml6ZWRfa2V5cyI6CiAgICAgICAgcmV0dXJuIGBDaGF2ZSR7aXNzdWUyLmtleXMubGVuZ3RoID4gMSA/ICJzIiA6ICIifSBkZXNjb25oZWNpZGEke2lzc3VlMi5rZXlzLmxlbmd0aCA+IDEgPyAicyIgOiAiIn06ICR7am9pblZhbHVlcyhpc3N1ZTIua2V5cywgIiwgIil9YDsKICAgICAgY2FzZSAiaW52YWxpZF9rZXkiOgogICAgICAgIHJldHVybiBgQ2hhdmUgaW52w6FsaWRhIGVtICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBjYXNlICJpbnZhbGlkX3VuaW9uIjoKICAgICAgICByZXR1cm4gIkVudHJhZGEgaW52w6FsaWRhIjsKICAgICAgY2FzZSAiaW52YWxpZF9lbGVtZW50IjoKICAgICAgICByZXR1cm4gYFZhbG9yIGludsOhbGlkbyBlbSAke2lzc3VlMi5vcmlnaW59YDsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gYENhbXBvIGludsOhbGlkb2A7CiAgICB9CiAgfTsKfTsKZnVuY3Rpb24gcHRfZGVmYXVsdCgpIHsKICByZXR1cm4gewogICAgbG9jYWxlRXJyb3I6IGVycm9yMzIoKQogIH07Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvbG9jYWxlcy9ydS5qcwpmdW5jdGlvbiBnZXRSdXNzaWFuUGx1cmFsKGNvdW50LCBvbmUsIGZldywgbWFueSkgewogIGNvbnN0IGFic0NvdW50ID0gTWF0aC5hYnMoY291bnQpOwogIGNvbnN0IGxhc3REaWdpdCA9IGFic0NvdW50ICUgMTA7CiAgY29uc3QgbGFzdFR3b0RpZ2l0cyA9IGFic0NvdW50ICUgMTAwOwogIGlmIChsYXN0VHdvRGlnaXRzID49IDExICYmIGxhc3RUd29EaWdpdHMgPD0gMTkpIHsKICAgIHJldHVybiBtYW55OwogIH0KICBpZiAobGFzdERpZ2l0ID09PSAxKSB7CiAgICByZXR1cm4gb25lOwogIH0KICBpZiAobGFzdERpZ2l0ID49IDIgJiYgbGFzdERpZ2l0IDw9IDQpIHsKICAgIHJldHVybiBmZXc7CiAgfQogIHJldHVybiBtYW55Owp9CnZhciBlcnJvcjMzID0gKCkgPT4gewogIGNvbnN0IFNpemFibGUgPSB7CiAgICBzdHJpbmc6IHsKICAgICAgdW5pdDogewogICAgICAgIG9uZTogItGB0LjQvNCy0L7QuyIsCiAgICAgICAgZmV3OiAi0YHQuNC80LLQvtC70LAiLAogICAgICAgIG1hbnk6ICLRgdC40LzQstC+0LvQvtCyIgogICAgICB9LAogICAgICB2ZXJiOiAi0LjQvNC10YLRjCIKICAgIH0sCiAgICBmaWxlOiB7CiAgICAgIHVuaXQ6IHsKICAgICAgICBvbmU6ICLQsdCw0LnRgiIsCiAgICAgICAgZmV3OiAi0LHQsNC50YLQsCIsCiAgICAgICAgbWFueTogItCx0LDQudGCIgogICAgICB9LAogICAgICB2ZXJiOiAi0LjQvNC10YLRjCIKICAgIH0sCiAgICBhcnJheTogewogICAgICB1bml0OiB7CiAgICAgICAgb25lOiAi0Y3Qu9C10LzQtdC90YIiLAogICAgICAgIGZldzogItGN0LvQtdC80LXQvdGC0LAiLAogICAgICAgIG1hbnk6ICLRjdC70LXQvNC10L3RgtC+0LIiCiAgICAgIH0sCiAgICAgIHZlcmI6ICLQuNC80LXRgtGMIgogICAgfSwKICAgIHNldDogewogICAgICB1bml0OiB7CiAgICAgICAgb25lOiAi0Y3Qu9C10LzQtdC90YIiLAogICAgICAgIGZldzogItGN0LvQtdC80LXQvdGC0LAiLAogICAgICAgIG1hbnk6ICLRjdC70LXQvNC10L3RgtC+0LIiCiAgICAgIH0sCiAgICAgIHZlcmI6ICLQuNC80LXRgtGMIgogICAgfQogIH07CiAgZnVuY3Rpb24gZ2V0U2l6aW5nKG9yaWdpbikgewogICAgcmV0dXJuIFNpemFibGVbb3JpZ2luXSA/PyBudWxsOwogIH0KICBjb25zdCBwYXJzZWRUeXBlNyA9IChkYXRhKSA9PiB7CiAgICBjb25zdCB0ID0gdHlwZW9mIGRhdGE7CiAgICBzd2l0Y2ggKHQpIHsKICAgICAgY2FzZSAibnVtYmVyIjogewogICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0YSkgPyAiTmFOIiA6ICLRh9C40YHQu9C+IjsKICAgICAgfQogICAgICBjYXNlICJvYmplY3QiOiB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHsKICAgICAgICAgIHJldHVybiAi0LzQsNGB0YHQuNCyIjsKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHsKICAgICAgICAgIHJldHVybiAibnVsbCI7CiAgICAgICAgfQogICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZGF0YSkgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgZGF0YS5jb25zdHJ1Y3RvcikgewogICAgICAgICAgcmV0dXJuIGRhdGEuY29uc3RydWN0b3IubmFtZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0OwogIH07CiAgY29uc3QgTm91bnMgPSB7CiAgICByZWdleDogItCy0LLQvtC0IiwKICAgIGVtYWlsOiAiZW1haWwg0LDQtNGA0LXRgSIsCiAgICB1cmw6ICJVUkwiLAogICAgZW1vamk6ICLRjdC80L7QtNC30LgiLAogICAgdXVpZDogIlVVSUQiLAogICAgdXVpZHY0OiAiVVVJRHY0IiwKICAgIHV1aWR2NjogIlVVSUR2NiIsCiAgICBuYW5vaWQ6ICJuYW5vaWQiLAogICAgZ3VpZDogIkdVSUQiLAogICAgY3VpZDogImN1aWQiLAogICAgY3VpZDI6ICJjdWlkMiIsCiAgICB1bGlkOiAiVUxJRCIsCiAgICB4aWQ6ICJYSUQiLAogICAga3N1aWQ6ICJLU1VJRCIsCiAgICBkYXRldGltZTogIklTTyDQtNCw0YLQsCDQuCDQstGA0LXQvNGPIiwKICAgIGRhdGU6ICJJU08g0LTQsNGC0LAiLAogICAgdGltZTogIklTTyDQstGA0LXQvNGPIiwKICAgIGR1cmF0aW9uOiAiSVNPINC00LvQuNGC0LXQu9GM0L3QvtGB0YLRjCIsCiAgICBpcHY0OiAiSVB2NCDQsNC00YDQtdGBIiwKICAgIGlwdjY6ICJJUHY2INCw0LTRgNC10YEiLAogICAgY2lkcnY0OiAiSVB2NCDQtNC40LDQv9Cw0LfQvtC9IiwKICAgIGNpZHJ2NjogIklQdjYg0LTQuNCw0L/QsNC30L7QvSIsCiAgICBiYXNlNjQ6ICLRgdGC0YDQvtC60LAg0LIg0YTQvtGA0LzQsNGC0LUgYmFzZTY0IiwKICAgIGJhc2U2NHVybDogItGB0YLRgNC+0LrQsCDQsiDRhNC+0YDQvNCw0YLQtSBiYXNlNjR1cmwiLAogICAganNvbl9zdHJpbmc6ICJKU09OINGB0YLRgNC+0LrQsCIsCiAgICBlMTY0OiAi0L3QvtC80LXRgCBFLjE2NCIsCiAgICBqd3Q6ICJKV1QiLAogICAgdGVtcGxhdGVfbGl0ZXJhbDogItCy0LLQvtC0IgogIH07CiAgcmV0dXJuIChpc3N1ZTIpID0+IHsKICAgIHN3aXRjaCAoaXNzdWUyLmNvZGUpIHsKICAgICAgY2FzZSAiaW52YWxpZF90eXBlIjoKICAgICAgICByZXR1cm4gYNCd0LXQstC10YDQvdGL0Lkg0LLQstC+0LQ6INC+0LbQuNC00LDQu9C+0YHRjCAke2lzc3VlMi5leHBlY3RlZH0sINC/0L7Qu9GD0YfQtdC90L4gJHtwYXJzZWRUeXBlNyhpc3N1ZTIuaW5wdXQpfWA7CiAgICAgIGNhc2UgImludmFsaWRfdmFsdWUiOgogICAgICAgIGlmIChpc3N1ZTIudmFsdWVzLmxlbmd0aCA9PT0gMSkKICAgICAgICAgIHJldHVybiBg0J3QtdCy0LXRgNC90YvQuSDQstCy0L7QtDog0L7QttC40LTQsNC70L7RgdGMICR7c3RyaW5naWZ5UHJpbWl0aXZlKGlzc3VlMi52YWx1ZXNbMF0pfWA7CiAgICAgICAgcmV0dXJuIGDQndC10LLQtdGA0L3Ri9C5INCy0LDRgNC40LDQvdGCOiDQvtC20LjQtNCw0LvQvtGB0Ywg0L7QtNC90L4g0LjQtyAke2pvaW5WYWx1ZXMoaXNzdWUyLnZhbHVlcywgInwiKX1gOwogICAgICBjYXNlICJ0b29fYmlnIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPD0iIDogIjwiOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKSB7CiAgICAgICAgICBjb25zdCBtYXhWYWx1ZSA9IE51bWJlcihpc3N1ZTIubWF4aW11bSk7CiAgICAgICAgICBjb25zdCB1bml0ID0gZ2V0UnVzc2lhblBsdXJhbChtYXhWYWx1ZSwgc2l6aW5nLnVuaXQub25lLCBzaXppbmcudW5pdC5mZXcsIHNpemluZy51bml0Lm1hbnkpOwogICAgICAgICAgcmV0dXJuIGDQodC70LjRiNC60L7QvCDQsdC+0LvRjNGI0L7QtSDQt9C90LDRh9C10L3QuNC1OiDQvtC20LjQtNCw0LvQvtGB0YwsINGH0YLQviAke2lzc3VlMi5vcmlnaW4gPz8gItC30L3QsNGH0LXQvdC40LUifSDQsdGD0LTQtdGCINC40LzQtdGC0YwgJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfSAke3VuaXR9YDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGDQodC70LjRiNC60L7QvCDQsdC+0LvRjNGI0L7QtSDQt9C90LDRh9C10L3QuNC1OiDQvtC20LjQtNCw0LvQvtGB0YwsINGH0YLQviAke2lzc3VlMi5vcmlnaW4gPz8gItC30L3QsNGH0LXQvdC40LUifSDQsdGD0LTQtdGCICR7YWRqfSR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgInRvb19zbWFsbCI6IHsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIj49IiA6ICI+IjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykgewogICAgICAgICAgY29uc3QgbWluVmFsdWUgPSBOdW1iZXIoaXNzdWUyLm1pbmltdW0pOwogICAgICAgICAgY29uc3QgdW5pdCA9IGdldFJ1c3NpYW5QbHVyYWwobWluVmFsdWUsIHNpemluZy51bml0Lm9uZSwgc2l6aW5nLnVuaXQuZmV3LCBzaXppbmcudW5pdC5tYW55KTsKICAgICAgICAgIHJldHVybiBg0KHQu9C40YjQutC+0Lwg0LzQsNC70LXQvdGM0LrQvtC1INC30L3QsNGH0LXQvdC40LU6INC+0LbQuNC00LDQu9C+0YHRjCwg0YfRgtC+ICR7aXNzdWUyLm9yaWdpbn0g0LHRg9C00LXRgiDQuNC80LXRgtGMICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX0gJHt1bml0fWA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBg0KHQu9C40YjQutC+0Lwg0LzQsNC70LXQvdGM0LrQvtC1INC30L3QsNGH0LXQvdC40LU6INC+0LbQuNC00LDQu9C+0YHRjCwg0YfRgtC+ICR7aXNzdWUyLm9yaWdpbn0g0LHRg9C00LXRgiAke2Fkan0ke2lzc3VlMi5taW5pbXVtLnRvU3RyaW5nKCl9YDsKICAgICAgfQogICAgICBjYXNlICJpbnZhbGlkX2Zvcm1hdCI6IHsKICAgICAgICBjb25zdCBfaXNzdWUgPSBpc3N1ZTI7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJzdGFydHNfd2l0aCIpCiAgICAgICAgICByZXR1cm4gYNCd0LXQstC10YDQvdCw0Y8g0YHRgtGA0L7QutCwOiDQtNC+0LvQttC90LAg0L3QsNGH0LjQvdCw0YLRjNGB0Y8g0YEgIiR7X2lzc3VlLnByZWZpeH0iYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImVuZHNfd2l0aCIpCiAgICAgICAgICByZXR1cm4gYNCd0LXQstC10YDQvdCw0Y8g0YHRgtGA0L7QutCwOiDQtNC+0LvQttC90LAg0LfQsNC60LDQvdGH0LjQstCw0YLRjNGB0Y8g0L3QsCAiJHtfaXNzdWUuc3VmZml4fSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiaW5jbHVkZXMiKQogICAgICAgICAgcmV0dXJuIGDQndC10LLQtdGA0L3QsNGPINGB0YLRgNC+0LrQsDog0LTQvtC70LbQvdCwINGB0L7QtNC10YDQttCw0YLRjCAiJHtfaXNzdWUuaW5jbHVkZXN9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJyZWdleCIpCiAgICAgICAgICByZXR1cm4gYNCd0LXQstC10YDQvdCw0Y8g0YHRgtGA0L7QutCwOiDQtNC+0LvQttC90LAg0YHQvtC+0YLQstC10YLRgdGC0LLQvtCy0LDRgtGMINGI0LDQsdC70L7QvdGDICR7X2lzc3VlLnBhdHRlcm59YDsKICAgICAgICByZXR1cm4gYNCd0LXQstC10YDQvdGL0LkgJHtOb3Vuc1tfaXNzdWUuZm9ybWF0XSA/PyBpc3N1ZTIuZm9ybWF0fWA7CiAgICAgIH0KICAgICAgY2FzZSAibm90X211bHRpcGxlX29mIjoKICAgICAgICByZXR1cm4gYNCd0LXQstC10YDQvdC+0LUg0YfQuNGB0LvQvjog0LTQvtC70LbQvdC+INCx0YvRgtGMINC60YDQsNGC0L3Ri9C8ICR7aXNzdWUyLmRpdmlzb3J9YDsKICAgICAgY2FzZSAidW5yZWNvZ25pemVkX2tleXMiOgogICAgICAgIHJldHVybiBg0J3QtdGA0LDRgdC/0L7Qt9C90LDQvdC9JHtpc3N1ZTIua2V5cy5sZW5ndGggPiAxID8gItGL0LUiIDogItGL0LkifSDQutC70Y7RhyR7aXNzdWUyLmtleXMubGVuZ3RoID4gMSA/ICLQuCIgOiAiIn06ICR7am9pblZhbHVlcyhpc3N1ZTIua2V5cywgIiwgIil9YDsKICAgICAgY2FzZSAiaW52YWxpZF9rZXkiOgogICAgICAgIHJldHVybiBg0J3QtdCy0LXRgNC90YvQuSDQutC70Y7RhyDQsiAke2lzc3VlMi5vcmlnaW59YDsKICAgICAgY2FzZSAiaW52YWxpZF91bmlvbiI6CiAgICAgICAgcmV0dXJuICLQndC10LLQtdGA0L3Ri9C1INCy0YXQvtC00L3Ri9C1INC00LDQvdC90YvQtSI7CiAgICAgIGNhc2UgImludmFsaWRfZWxlbWVudCI6CiAgICAgICAgcmV0dXJuIGDQndC10LLQtdGA0L3QvtC1INC30L3QsNGH0LXQvdC40LUg0LIgJHtpc3N1ZTIub3JpZ2lufWA7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIGDQndC10LLQtdGA0L3Ri9C1INCy0YXQvtC00L3Ri9C1INC00LDQvdC90YvQtWA7CiAgICB9CiAgfTsKfTsKZnVuY3Rpb24gcnVfZGVmYXVsdCgpIHsKICByZXR1cm4gewogICAgbG9jYWxlRXJyb3I6IGVycm9yMzMoKQogIH07Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvbG9jYWxlcy9zbC5qcwp2YXIgZXJyb3IzNCA9ICgpID0+IHsKICBjb25zdCBTaXphYmxlID0gewogICAgc3RyaW5nOiB7IHVuaXQ6ICJ6bmFrb3YiLCB2ZXJiOiAiaW1ldGkiIH0sCiAgICBmaWxlOiB7IHVuaXQ6ICJiYWp0b3YiLCB2ZXJiOiAiaW1ldGkiIH0sCiAgICBhcnJheTogeyB1bml0OiAiZWxlbWVudG92IiwgdmVyYjogImltZXRpIiB9LAogICAgc2V0OiB7IHVuaXQ6ICJlbGVtZW50b3YiLCB2ZXJiOiAiaW1ldGkiIH0KICB9OwogIGZ1bmN0aW9uIGdldFNpemluZyhvcmlnaW4pIHsKICAgIHJldHVybiBTaXphYmxlW29yaWdpbl0gPz8gbnVsbDsKICB9CiAgY29uc3QgcGFyc2VkVHlwZTcgPSAoZGF0YSkgPT4gewogICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhOwogICAgc3dpdGNoICh0KSB7CiAgICAgIGNhc2UgIm51bWJlciI6IHsKICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gIk5hTiIgOiAixaF0ZXZpbG8iOwogICAgICB9CiAgICAgIGNhc2UgIm9iamVjdCI6IHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkgewogICAgICAgICAgcmV0dXJuICJ0YWJlbGEiOwogICAgICAgIH0KICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuICJudWxsIjsKICAgICAgICB9CiAgICAgICAgaWYgKE9iamVjdC5nZXRQcm90b3R5cGVPZihkYXRhKSAhPT0gT2JqZWN0LnByb3RvdHlwZSAmJiBkYXRhLmNvbnN0cnVjdG9yKSB7CiAgICAgICAgICByZXR1cm4gZGF0YS5jb25zdHJ1Y3Rvci5uYW1lOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHQ7CiAgfTsKICBjb25zdCBOb3VucyA9IHsKICAgIHJlZ2V4OiAidm5vcyIsCiAgICBlbWFpbDogImUtcG/FoXRuaSBuYXNsb3YiLAogICAgdXJsOiAiVVJMIiwKICAgIGVtb2ppOiAiZW1vamkiLAogICAgdXVpZDogIlVVSUQiLAogICAgdXVpZHY0OiAiVVVJRHY0IiwKICAgIHV1aWR2NjogIlVVSUR2NiIsCiAgICBuYW5vaWQ6ICJuYW5vaWQiLAogICAgZ3VpZDogIkdVSUQiLAogICAgY3VpZDogImN1aWQiLAogICAgY3VpZDI6ICJjdWlkMiIsCiAgICB1bGlkOiAiVUxJRCIsCiAgICB4aWQ6ICJYSUQiLAogICAga3N1aWQ6ICJLU1VJRCIsCiAgICBkYXRldGltZTogIklTTyBkYXR1bSBpbiDEjWFzIiwKICAgIGRhdGU6ICJJU08gZGF0dW0iLAogICAgdGltZTogIklTTyDEjWFzIiwKICAgIGR1cmF0aW9uOiAiSVNPIHRyYWphbmplIiwKICAgIGlwdjQ6ICJJUHY0IG5hc2xvdiIsCiAgICBpcHY2OiAiSVB2NiBuYXNsb3YiLAogICAgY2lkcnY0OiAib2JzZWcgSVB2NCIsCiAgICBjaWRydjY6ICJvYnNlZyBJUHY2IiwKICAgIGJhc2U2NDogImJhc2U2NCBrb2RpcmFuIG5peiIsCiAgICBiYXNlNjR1cmw6ICJiYXNlNjR1cmwga29kaXJhbiBuaXoiLAogICAganNvbl9zdHJpbmc6ICJKU09OIG5peiIsCiAgICBlMTY0OiAiRS4xNjQgxaF0ZXZpbGthIiwKICAgIGp3dDogIkpXVCIsCiAgICB0ZW1wbGF0ZV9saXRlcmFsOiAidm5vcyIKICB9OwogIHJldHVybiAoaXNzdWUyKSA9PiB7CiAgICBzd2l0Y2ggKGlzc3VlMi5jb2RlKSB7CiAgICAgIGNhc2UgImludmFsaWRfdHlwZSI6CiAgICAgICAgcmV0dXJuIGBOZXZlbGphdmVuIHZub3M6IHByacSNYWtvdmFubyAke2lzc3VlMi5leHBlY3RlZH0sIHByZWpldG8gJHtwYXJzZWRUeXBlNyhpc3N1ZTIuaW5wdXQpfWA7CiAgICAgIGNhc2UgImludmFsaWRfdmFsdWUiOgogICAgICAgIGlmIChpc3N1ZTIudmFsdWVzLmxlbmd0aCA9PT0gMSkKICAgICAgICAgIHJldHVybiBgTmV2ZWxqYXZlbiB2bm9zOiBwcmnEjWFrb3Zhbm8gJHtzdHJpbmdpZnlQcmltaXRpdmUoaXNzdWUyLnZhbHVlc1swXSl9YDsKICAgICAgICByZXR1cm4gYE5ldmVsamF2bmEgbW/Fvm5vc3Q6IHByacSNYWtvdmFubyBlbm8gaXptZWQgJHtqb2luVmFsdWVzKGlzc3VlMi52YWx1ZXMsICJ8Iil9YDsKICAgICAgY2FzZSAidG9vX2JpZyI6IHsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIjw9IiA6ICI8IjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykKICAgICAgICAgIHJldHVybiBgUHJldmVsaWtvOiBwcmnEjWFrb3Zhbm8sIGRhIGJvICR7aXNzdWUyLm9yaWdpbiA/PyAidnJlZG5vc3QifSBpbWVsbyAke2Fkan0ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9ICR7c2l6aW5nLnVuaXQgPz8gImVsZW1lbnRvdiJ9YDsKICAgICAgICByZXR1cm4gYFByZXZlbGlrbzogcHJpxI1ha292YW5vLCBkYSBibyAke2lzc3VlMi5vcmlnaW4gPz8gInZyZWRub3N0In0gJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfWA7CiAgICAgIH0KICAgICAgY2FzZSAidG9vX3NtYWxsIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPj0iIDogIj4iOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKSB7CiAgICAgICAgICByZXR1cm4gYFByZW1hamhubzogcHJpxI1ha292YW5vLCBkYSBibyAke2lzc3VlMi5vcmlnaW59IGltZWxvICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdH1gOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYFByZW1hamhubzogcHJpxI1ha292YW5vLCBkYSBibyAke2lzc3VlMi5vcmlnaW59ICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgImludmFsaWRfZm9ybWF0IjogewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInN0YXJ0c193aXRoIikgewogICAgICAgICAgcmV0dXJuIGBOZXZlbGphdmVuIG5pejogbW9yYSBzZSB6YcSNZXRpIHogIiR7X2lzc3VlLnByZWZpeH0iYDsKICAgICAgICB9CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJlbmRzX3dpdGgiKQogICAgICAgICAgcmV0dXJuIGBOZXZlbGphdmVuIG5pejogbW9yYSBzZSBrb27EjWF0aSB6ICIke19pc3N1ZS5zdWZmaXh9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJpbmNsdWRlcyIpCiAgICAgICAgICByZXR1cm4gYE5ldmVsamF2ZW4gbml6OiBtb3JhIHZzZWJvdmF0aSAiJHtfaXNzdWUuaW5jbHVkZXN9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJyZWdleCIpCiAgICAgICAgICByZXR1cm4gYE5ldmVsamF2ZW4gbml6OiBtb3JhIHVzdHJlemF0aSB2em9yY3UgJHtfaXNzdWUucGF0dGVybn1gOwogICAgICAgIHJldHVybiBgTmV2ZWxqYXZlbiAke05vdW5zW19pc3N1ZS5mb3JtYXRdID8/IGlzc3VlMi5mb3JtYXR9YDsKICAgICAgfQogICAgICBjYXNlICJub3RfbXVsdGlwbGVfb2YiOgogICAgICAgIHJldHVybiBgTmV2ZWxqYXZubyDFoXRldmlsbzogbW9yYSBiaXRpIHZlxI1rcmF0bmlrICR7aXNzdWUyLmRpdmlzb3J9YDsKICAgICAgY2FzZSAidW5yZWNvZ25pemVkX2tleXMiOgogICAgICAgIHJldHVybiBgTmVwcmVwb3puYW4ke2lzc3VlMi5rZXlzLmxlbmd0aCA+IDEgPyAiaSBrbGp1xI1pIiA6ICIga2xqdcSNIn06ICR7am9pblZhbHVlcyhpc3N1ZTIua2V5cywgIiwgIil9YDsKICAgICAgY2FzZSAiaW52YWxpZF9rZXkiOgogICAgICAgIHJldHVybiBgTmV2ZWxqYXZlbiBrbGp1xI0gdiAke2lzc3VlMi5vcmlnaW59YDsKICAgICAgY2FzZSAiaW52YWxpZF91bmlvbiI6CiAgICAgICAgcmV0dXJuICJOZXZlbGphdmVuIHZub3MiOwogICAgICBjYXNlICJpbnZhbGlkX2VsZW1lbnQiOgogICAgICAgIHJldHVybiBgTmV2ZWxqYXZuYSB2cmVkbm9zdCB2ICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiAiTmV2ZWxqYXZlbiB2bm9zIjsKICAgIH0KICB9Owp9OwpmdW5jdGlvbiBzbF9kZWZhdWx0KCkgewogIHJldHVybiB7CiAgICBsb2NhbGVFcnJvcjogZXJyb3IzNCgpCiAgfTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9sb2NhbGVzL3N2LmpzCnZhciBlcnJvcjM1ID0gKCkgPT4gewogIGNvbnN0IFNpemFibGUgPSB7CiAgICBzdHJpbmc6IHsgdW5pdDogInRlY2tlbiIsIHZlcmI6ICJhdHQgaGEiIH0sCiAgICBmaWxlOiB7IHVuaXQ6ICJieXRlcyIsIHZlcmI6ICJhdHQgaGEiIH0sCiAgICBhcnJheTogeyB1bml0OiAib2JqZWt0IiwgdmVyYjogImF0dCBpbm5laMOlbGxhIiB9LAogICAgc2V0OiB7IHVuaXQ6ICJvYmpla3QiLCB2ZXJiOiAiYXR0IGlubmVow6VsbGEiIH0KICB9OwogIGZ1bmN0aW9uIGdldFNpemluZyhvcmlnaW4pIHsKICAgIHJldHVybiBTaXphYmxlW29yaWdpbl0gPz8gbnVsbDsKICB9CiAgY29uc3QgcGFyc2VkVHlwZTcgPSAoZGF0YSkgPT4gewogICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhOwogICAgc3dpdGNoICh0KSB7CiAgICAgIGNhc2UgIm51bWJlciI6IHsKICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gIk5hTiIgOiAiYW50YWwiOwogICAgICB9CiAgICAgIGNhc2UgIm9iamVjdCI6IHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkgewogICAgICAgICAgcmV0dXJuICJsaXN0YSI7CiAgICAgICAgfQogICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gIm51bGwiOwogICAgICAgIH0KICAgICAgICBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGRhdGEpICE9PSBPYmplY3QucHJvdG90eXBlICYmIGRhdGEuY29uc3RydWN0b3IpIHsKICAgICAgICAgIHJldHVybiBkYXRhLmNvbnN0cnVjdG9yLm5hbWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdDsKICB9OwogIGNvbnN0IE5vdW5zID0gewogICAgcmVnZXg6ICJyZWd1bGrDpHJ0IHV0dHJ5Y2siLAogICAgZW1haWw6ICJlLXBvc3RhZHJlc3MiLAogICAgdXJsOiAiVVJMIiwKICAgIGVtb2ppOiAiZW1vamkiLAogICAgdXVpZDogIlVVSUQiLAogICAgdXVpZHY0OiAiVVVJRHY0IiwKICAgIHV1aWR2NjogIlVVSUR2NiIsCiAgICBuYW5vaWQ6ICJuYW5vaWQiLAogICAgZ3VpZDogIkdVSUQiLAogICAgY3VpZDogImN1aWQiLAogICAgY3VpZDI6ICJjdWlkMiIsCiAgICB1bGlkOiAiVUxJRCIsCiAgICB4aWQ6ICJYSUQiLAogICAga3N1aWQ6ICJLU1VJRCIsCiAgICBkYXRldGltZTogIklTTy1kYXR1bSBvY2ggdGlkIiwKICAgIGRhdGU6ICJJU08tZGF0dW0iLAogICAgdGltZTogIklTTy10aWQiLAogICAgZHVyYXRpb246ICJJU08tdmFyYWt0aWdoZXQiLAogICAgaXB2NDogIklQdjQtaW50ZXJ2YWxsIiwKICAgIGlwdjY6ICJJUHY2LWludGVydmFsbCIsCiAgICBjaWRydjQ6ICJJUHY0LXNwZWt0cnVtIiwKICAgIGNpZHJ2NjogIklQdjYtc3Bla3RydW0iLAogICAgYmFzZTY0OiAiYmFzZTY0LWtvZGFkIHN0csOkbmciLAogICAgYmFzZTY0dXJsOiAiYmFzZTY0dXJsLWtvZGFkIHN0csOkbmciLAogICAganNvbl9zdHJpbmc6ICJKU09OLXN0csOkbmciLAogICAgZTE2NDogIkUuMTY0LW51bW1lciIsCiAgICBqd3Q6ICJKV1QiLAogICAgdGVtcGxhdGVfbGl0ZXJhbDogIm1hbGwtbGl0ZXJhbCIKICB9OwogIHJldHVybiAoaXNzdWUyKSA9PiB7CiAgICBzd2l0Y2ggKGlzc3VlMi5jb2RlKSB7CiAgICAgIGNhc2UgImludmFsaWRfdHlwZSI6CiAgICAgICAgcmV0dXJuIGBPZ2lsdGlnIGlubWF0bmluZzogZsO2cnbDpG50YXQgJHtpc3N1ZTIuZXhwZWN0ZWR9LCBmaWNrICR7cGFyc2VkVHlwZTcoaXNzdWUyLmlucHV0KX1gOwogICAgICBjYXNlICJpbnZhbGlkX3ZhbHVlIjoKICAgICAgICBpZiAoaXNzdWUyLnZhbHVlcy5sZW5ndGggPT09IDEpCiAgICAgICAgICByZXR1cm4gYE9naWx0aWcgaW5tYXRuaW5nOiBmw7ZydsOkbnRhdCAke3N0cmluZ2lmeVByaW1pdGl2ZShpc3N1ZTIudmFsdWVzWzBdKX1gOwogICAgICAgIHJldHVybiBgT2dpbHRpZ3QgdmFsOiBmw7ZydsOkbnRhZGUgZW4gYXYgJHtqb2luVmFsdWVzKGlzc3VlMi52YWx1ZXMsICJ8Iil9YDsKICAgICAgY2FzZSAidG9vX2JpZyI6IHsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIjw9IiA6ICI8IjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykgewogICAgICAgICAgcmV0dXJuIGBGw7ZyIHN0b3IodCk6IGbDtnJ2w6RudGFkZSAke2lzc3VlMi5vcmlnaW4gPz8gInbDpHJkZXQifSBhdHQgaGEgJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0ID8/ICJlbGVtZW50In1gOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYEbDtnIgc3Rvcih0KTogZsO2cnbDpG50YXQgJHtpc3N1ZTIub3JpZ2luID8/ICJ2w6RyZGV0In0gYXR0IGhhICR7YWRqfSR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgInRvb19zbWFsbCI6IHsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIj49IiA6ICI+IjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykgewogICAgICAgICAgcmV0dXJuIGBGw7ZyIGxpdGUodCk6IGbDtnJ2w6RudGFkZSAke2lzc3VlMi5vcmlnaW4gPz8gInbDpHJkZXQifSBhdHQgaGEgJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0fWA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBgRsO2ciBsaXRlKHQpOiBmw7ZydsOkbnRhZGUgJHtpc3N1ZTIub3JpZ2luID8/ICJ2w6RyZGV0In0gYXR0IGhhICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgImludmFsaWRfZm9ybWF0IjogewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInN0YXJ0c193aXRoIikgewogICAgICAgICAgcmV0dXJuIGBPZ2lsdGlnIHN0csOkbmc6IG3DpXN0ZSBiw7ZyamEgbWVkICIke19pc3N1ZS5wcmVmaXh9ImA7CiAgICAgICAgfQogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiZW5kc193aXRoIikKICAgICAgICAgIHJldHVybiBgT2dpbHRpZyBzdHLDpG5nOiBtw6VzdGUgc2x1dGEgbWVkICIke19pc3N1ZS5zdWZmaXh9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJpbmNsdWRlcyIpCiAgICAgICAgICByZXR1cm4gYE9naWx0aWcgc3Ryw6RuZzogbcOlc3RlIGlubmVow6VsbGEgIiR7X2lzc3VlLmluY2x1ZGVzfSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAicmVnZXgiKQogICAgICAgICAgcmV0dXJuIGBPZ2lsdGlnIHN0csOkbmc6IG3DpXN0ZSBtYXRjaGEgbcO2bnN0cmV0ICIke19pc3N1ZS5wYXR0ZXJufSJgOwogICAgICAgIHJldHVybiBgT2dpbHRpZyh0KSAke05vdW5zW19pc3N1ZS5mb3JtYXRdID8/IGlzc3VlMi5mb3JtYXR9YDsKICAgICAgfQogICAgICBjYXNlICJub3RfbXVsdGlwbGVfb2YiOgogICAgICAgIHJldHVybiBgT2dpbHRpZ3QgdGFsOiBtw6VzdGUgdmFyYSBlbiBtdWx0aXBlbCBhdiAke2lzc3VlMi5kaXZpc29yfWA7CiAgICAgIGNhc2UgInVucmVjb2duaXplZF9rZXlzIjoKICAgICAgICByZXR1cm4gYCR7aXNzdWUyLmtleXMubGVuZ3RoID4gMSA/ICJPa8OkbmRhIG55Y2tsYXIiIDogIk9rw6RuZCBueWNrZWwifTogJHtqb2luVmFsdWVzKGlzc3VlMi5rZXlzLCAiLCAiKX1gOwogICAgICBjYXNlICJpbnZhbGlkX2tleSI6CiAgICAgICAgcmV0dXJuIGBPZ2lsdGlnIG55Y2tlbCBpICR7aXNzdWUyLm9yaWdpbiA/PyAidsOkcmRldCJ9YDsKICAgICAgY2FzZSAiaW52YWxpZF91bmlvbiI6CiAgICAgICAgcmV0dXJuICJPZ2lsdGlnIGlucHV0IjsKICAgICAgY2FzZSAiaW52YWxpZF9lbGVtZW50IjoKICAgICAgICByZXR1cm4gYE9naWx0aWd0IHbDpHJkZSBpICR7aXNzdWUyLm9yaWdpbiA/PyAidsOkcmRldCJ9YDsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gYE9naWx0aWcgaW5wdXRgOwogICAgfQogIH07Cn07CmZ1bmN0aW9uIHN2X2RlZmF1bHQoKSB7CiAgcmV0dXJuIHsKICAgIGxvY2FsZUVycm9yOiBlcnJvcjM1KCkKICB9Owp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2xvY2FsZXMvdGEuanMKdmFyIGVycm9yMzYgPSAoKSA9PiB7CiAgY29uc3QgU2l6YWJsZSA9IHsKICAgIHN0cmluZzogeyB1bml0OiAi4K6O4K604K+B4K6k4K+N4K6k4K+B4K6V4K+N4K6V4K6z4K+NIiwgdmVyYjogIuCuleCviuCuo+CvjeCun+Cuv+CusOCvgeCuleCvjeCulSDgrrXgr4fgrqPgr43grp/gr4Hgrq7gr40iIH0sCiAgICBmaWxlOiB7IHVuaXQ6ICLgrqrgr4jgrp/gr43grp/gr4HgrpXgrrPgr40iLCB2ZXJiOiAi4K6V4K+K4K6j4K+N4K6f4K6/4K6w4K+B4K6V4K+N4K6VIOCuteCvh+Cuo+CvjeCun+CvgeCuruCvjSIgfSwKICAgIGFycmF5OiB7IHVuaXQ6ICLgrongrrHgr4Hgrqrgr43grqrgr4HgrpXgrrPgr40iLCB2ZXJiOiAi4K6V4K+K4K6j4K+N4K6f4K6/4K6w4K+B4K6V4K+N4K6VIOCuteCvh+Cuo+CvjeCun+CvgeCuruCvjSIgfSwKICAgIHNldDogeyB1bml0OiAi4K6J4K6x4K+B4K6q4K+N4K6q4K+B4K6V4K6z4K+NIiwgdmVyYjogIuCuleCviuCuo+CvjeCun+Cuv+CusOCvgeCuleCvjeCulSDgrrXgr4fgrqPgr43grp/gr4Hgrq7gr40iIH0KICB9OwogIGZ1bmN0aW9uIGdldFNpemluZyhvcmlnaW4pIHsKICAgIHJldHVybiBTaXphYmxlW29yaWdpbl0gPz8gbnVsbDsKICB9CiAgY29uc3QgcGFyc2VkVHlwZTcgPSAoZGF0YSkgPT4gewogICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhOwogICAgc3dpdGNoICh0KSB7CiAgICAgIGNhc2UgIm51bWJlciI6IHsKICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gIuCujuCuo+CvjSDgroXgrrLgr43grrLgrr7grqTgrqTgr4EiIDogIuCujuCuo+CvjSI7CiAgICAgIH0KICAgICAgY2FzZSAib2JqZWN0IjogewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgICAgICByZXR1cm4gIuCuheCuo+CuvyI7CiAgICAgICAgfQogICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gIuCuteCvhuCuseCvgeCuruCviCI7CiAgICAgICAgfQogICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZGF0YSkgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgZGF0YS5jb25zdHJ1Y3RvcikgewogICAgICAgICAgcmV0dXJuIGRhdGEuY29uc3RydWN0b3IubmFtZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0OwogIH07CiAgY29uc3QgTm91bnMgPSB7CiAgICByZWdleDogIuCuieCus+CvjeCus+CvgOCun+CvgSIsCiAgICBlbWFpbDogIuCuruCuv+CuqeCvjeCuqeCunuCvjeCumuCusuCvjSDgrq7gr4HgrpXgrrXgrrDgrr8iLAogICAgdXJsOiAiVVJMIiwKICAgIGVtb2ppOiAiZW1vamkiLAogICAgdXVpZDogIlVVSUQiLAogICAgdXVpZHY0OiAiVVVJRHY0IiwKICAgIHV1aWR2NjogIlVVSUR2NiIsCiAgICBuYW5vaWQ6ICJuYW5vaWQiLAogICAgZ3VpZDogIkdVSUQiLAogICAgY3VpZDogImN1aWQiLAogICAgY3VpZDI6ICJjdWlkMiIsCiAgICB1bGlkOiAiVUxJRCIsCiAgICB4aWQ6ICJYSUQiLAogICAga3N1aWQ6ICJLU1VJRCIsCiAgICBkYXRldGltZTogIklTTyDgrqTgr4fgrqTgrr8g4K6o4K+H4K6w4K6u4K+NIiwKICAgIGRhdGU6ICJJU08g4K6k4K+H4K6k4K6/IiwKICAgIHRpbWU6ICJJU08g4K6o4K+H4K6w4K6u4K+NIiwKICAgIGR1cmF0aW9uOiAiSVNPIOCuleCuvuCusiDgroXgrrPgrrXgr4EiLAogICAgaXB2NDogIklQdjQg4K6u4K+B4K6V4K614K6w4K6/IiwKICAgIGlwdjY6ICJJUHY2IOCuruCvgeCuleCuteCusOCuvyIsCiAgICBjaWRydjQ6ICJJUHY0IOCuteCusOCuruCvjeCuquCvgSIsCiAgICBjaWRydjY6ICJJUHY2IOCuteCusOCuruCvjeCuquCvgSIsCiAgICBiYXNlNjQ6ICJiYXNlNjQtZW5jb2RlZCDgrprgrrDgrq7gr40iLAogICAgYmFzZTY0dXJsOiAiYmFzZTY0dXJsLWVuY29kZWQg4K6a4K6w4K6u4K+NIiwKICAgIGpzb25fc3RyaW5nOiAiSlNPTiDgrprgrrDgrq7gr40iLAogICAgZTE2NDogIkUuMTY0IOCujuCuo+CvjSIsCiAgICBqd3Q6ICJKV1QiLAogICAgdGVtcGxhdGVfbGl0ZXJhbDogImlucHV0IgogIH07CiAgcmV0dXJuIChpc3N1ZTIpID0+IHsKICAgIHN3aXRjaCAoaXNzdWUyLmNvZGUpIHsKICAgICAgY2FzZSAiaW52YWxpZF90eXBlIjoKICAgICAgICByZXR1cm4gYOCupOCuteCuseCuvuCuqSDgrongrrPgr43grrPgr4Dgrp/gr4E6IOCujuCupOCuv+CusOCvjeCuquCuvuCusOCvjeCuleCvjeCuleCuquCvjeCuquCun+CvjeCun+CupOCvgSAke2lzc3VlMi5leHBlY3RlZH0sIOCuquCvhuCuseCuquCvjeCuquCun+CvjeCun+CupOCvgSAke3BhcnNlZFR5cGU3KGlzc3VlMi5pbnB1dCl9YDsKICAgICAgY2FzZSAiaW52YWxpZF92YWx1ZSI6CiAgICAgICAgaWYgKGlzc3VlMi52YWx1ZXMubGVuZ3RoID09PSAxKQogICAgICAgICAgcmV0dXJuIGDgrqTgrrXgrrHgrr7grqkg4K6J4K6z4K+N4K6z4K+A4K6f4K+BOiDgro7grqTgrr/grrDgr43grqrgrr7grrDgr43grpXgr43grpXgrqrgr43grqrgrp/gr43grp/grqTgr4EgJHtzdHJpbmdpZnlQcmltaXRpdmUoaXNzdWUyLnZhbHVlc1swXSl9YDsKICAgICAgICByZXR1cm4gYOCupOCuteCuseCuvuCuqSDgrrXgrr/grrDgr4Hgrqrgr43grqrgrq7gr406IOCujuCupOCuv+CusOCvjeCuquCuvuCusOCvjeCuleCvjeCuleCuquCvjeCuquCun+CvjeCun+CupOCvgSAke2pvaW5WYWx1ZXMoaXNzdWUyLnZhbHVlcywgInwiKX0g4K6H4K6y4K+NIOCukuCuqeCvjeCuseCvgWA7CiAgICAgIGNhc2UgInRvb19iaWciOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI8PSIgOiAiPCI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpIHsKICAgICAgICAgIHJldHVybiBg4K6u4K6/4K6VIOCuquCvhuCusOCuv+Cur+CupOCvgTog4K6O4K6k4K6/4K6w4K+N4K6q4K6+4K6w4K+N4K6V4K+N4K6V4K6q4K+N4K6q4K6f4K+N4K6f4K6k4K+BICR7aXNzdWUyLm9yaWdpbiA/PyAi4K6u4K6k4K6/4K6q4K+N4K6q4K+BIn0gJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0ID8/ICLgrongrrHgr4Hgrqrgr43grqrgr4HgrpXgrrPgr40ifSDgrobgrpUg4K6H4K6w4K+B4K6V4K+N4K6VIOCuteCvh+Cuo+CvjeCun+CvgeCuruCvjWA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBg4K6u4K6/4K6VIOCuquCvhuCusOCuv+Cur+CupOCvgTog4K6O4K6k4K6/4K6w4K+N4K6q4K6+4K6w4K+N4K6V4K+N4K6V4K6q4K+N4K6q4K6f4K+N4K6f4K6k4K+BICR7aXNzdWUyLm9yaWdpbiA/PyAi4K6u4K6k4K6/4K6q4K+N4K6q4K+BIn0gJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfSDgrobgrpUg4K6H4K6w4K+B4K6V4K+N4K6VIOCuteCvh+Cuo+CvjeCun+CvgeCuruCvjWA7CiAgICAgIH0KICAgICAgY2FzZSAidG9vX3NtYWxsIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPj0iIDogIj4iOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKSB7CiAgICAgICAgICByZXR1cm4gYOCuruCuv+CuleCumuCvjSDgrprgrr/grrHgrr/grq/grqTgr4E6IOCujuCupOCuv+CusOCvjeCuquCuvuCusOCvjeCuleCvjeCuleCuquCvjeCuquCun+CvjeCun+CupOCvgSAke2lzc3VlMi5vcmlnaW59ICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdH0g4K6G4K6VIOCuh+CusOCvgeCuleCvjeCulSDgrrXgr4fgrqPgr43grp/gr4Hgrq7gr41gOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYOCuruCuv+CuleCumuCvjSDgrprgrr/grrHgrr/grq/grqTgr4E6IOCujuCupOCuv+CusOCvjeCuquCuvuCusOCvjeCuleCvjeCuleCuquCvjeCuquCun+CvjeCun+CupOCvgSAke2lzc3VlMi5vcmlnaW59ICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX0g4K6G4K6VIOCuh+CusOCvgeCuleCvjeCulSDgrrXgr4fgrqPgr43grp/gr4Hgrq7gr41gOwogICAgICB9CiAgICAgIGNhc2UgImludmFsaWRfZm9ybWF0IjogewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInN0YXJ0c193aXRoIikKICAgICAgICAgIHJldHVybiBg4K6k4K614K6x4K6+4K6pIOCumuCusOCuruCvjTogIiR7X2lzc3VlLnByZWZpeH0iIOCuh+CusuCvjSDgrqTgr4rgrp/grpngr43grpUg4K614K+H4K6j4K+N4K6f4K+B4K6u4K+NYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImVuZHNfd2l0aCIpCiAgICAgICAgICByZXR1cm4gYOCupOCuteCuseCuvuCuqSDgrprgrrDgrq7gr406ICIke19pc3N1ZS5zdWZmaXh9IiDgrofgrrLgr40g4K6u4K+B4K6f4K6/4K614K6f4K+I4K6vIOCuteCvh+Cuo+CvjeCun+CvgeCuruCvjWA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJpbmNsdWRlcyIpCiAgICAgICAgICByZXR1cm4gYOCupOCuteCuseCuvuCuqSDgrprgrrDgrq7gr406ICIke19pc3N1ZS5pbmNsdWRlc30iIOCukCDgrongrrPgr43grrPgrp/grpXgr43grpUg4K614K+H4K6j4K+N4K6f4K+B4K6u4K+NYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInJlZ2V4IikKICAgICAgICAgIHJldHVybiBg4K6k4K614K6x4K6+4K6pIOCumuCusOCuruCvjTogJHtfaXNzdWUucGF0dGVybn0g4K6u4K+B4K6x4K+I4K6q4K6+4K6f4K+N4K6f4K+B4K6f4K6p4K+NIOCuquCviuCusOCvgeCuqOCvjeCupCDgrrXgr4fgrqPgr43grp/gr4Hgrq7gr41gOwogICAgICAgIHJldHVybiBg4K6k4K614K6x4K6+4K6pICR7Tm91bnNbX2lzc3VlLmZvcm1hdF0gPz8gaXNzdWUyLmZvcm1hdH1gOwogICAgICB9CiAgICAgIGNhc2UgIm5vdF9tdWx0aXBsZV9vZiI6CiAgICAgICAgcmV0dXJuIGDgrqTgrrXgrrHgrr7grqkg4K6O4K6j4K+NOiAke2lzc3VlMi5kaXZpc29yfSDgrofgrqngr40g4K6q4K6y4K6u4K6+4K6VIOCuh+CusOCvgeCuleCvjeCulSDgrrXgr4fgrqPgr43grp/gr4Hgrq7gr41gOwogICAgICBjYXNlICJ1bnJlY29nbml6ZWRfa2V5cyI6CiAgICAgICAgcmV0dXJuIGDgroXgrp/gr4jgrq/grr7grrPgrq7gr40g4K6k4K+G4K6w4K6/4K6v4K6+4K6kIOCuteCuv+CumuCviCR7aXNzdWUyLmtleXMubGVuZ3RoID4gMSA/ICLgrpXgrrPgr40iIDogIiJ9OiAke2pvaW5WYWx1ZXMoaXNzdWUyLmtleXMsICIsICIpfWA7CiAgICAgIGNhc2UgImludmFsaWRfa2V5IjoKICAgICAgICByZXR1cm4gYCR7aXNzdWUyLm9yaWdpbn0g4K6H4K6y4K+NIOCupOCuteCuseCuvuCuqSDgrrXgrr/grprgr4hgOwogICAgICBjYXNlICJpbnZhbGlkX3VuaW9uIjoKICAgICAgICByZXR1cm4gIuCupOCuteCuseCuvuCuqSDgrongrrPgr43grrPgr4Dgrp/gr4EiOwogICAgICBjYXNlICJpbnZhbGlkX2VsZW1lbnQiOgogICAgICAgIHJldHVybiBgJHtpc3N1ZTIub3JpZ2lufSDgrofgrrLgr40g4K6k4K614K6x4K6+4K6pIOCuruCupOCuv+CuquCvjeCuquCvgWA7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIGDgrqTgrrXgrrHgrr7grqkg4K6J4K6z4K+N4K6z4K+A4K6f4K+BYDsKICAgIH0KICB9Owp9OwpmdW5jdGlvbiB0YV9kZWZhdWx0KCkgewogIHJldHVybiB7CiAgICBsb2NhbGVFcnJvcjogZXJyb3IzNigpCiAgfTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9sb2NhbGVzL3RoLmpzCnZhciBlcnJvcjM3ID0gKCkgPT4gewogIGNvbnN0IFNpemFibGUgPSB7CiAgICBzdHJpbmc6IHsgdW5pdDogIuC4leC4seC4p+C4reC4seC4geC4qeC4oyIsIHZlcmI6ICLguITguKfguKPguKHguLUiIH0sCiAgICBmaWxlOiB7IHVuaXQ6ICLguYTguJrguJXguYwiLCB2ZXJiOiAi4LiE4Lin4Lij4Lih4Li1IiB9LAogICAgYXJyYXk6IHsgdW5pdDogIuC4o+C4suC4ouC4geC4suC4oyIsIHZlcmI6ICLguITguKfguKPguKHguLUiIH0sCiAgICBzZXQ6IHsgdW5pdDogIuC4o+C4suC4ouC4geC4suC4oyIsIHZlcmI6ICLguITguKfguKPguKHguLUiIH0KICB9OwogIGZ1bmN0aW9uIGdldFNpemluZyhvcmlnaW4pIHsKICAgIHJldHVybiBTaXphYmxlW29yaWdpbl0gPz8gbnVsbDsKICB9CiAgY29uc3QgcGFyc2VkVHlwZTcgPSAoZGF0YSkgPT4gewogICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhOwogICAgc3dpdGNoICh0KSB7CiAgICAgIGNhc2UgIm51bWJlciI6IHsKICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gIuC5hOC4oeC5iOC5g+C4iuC5iOC4leC4seC4p+C5gOC4peC4giAoTmFOKSIgOiAi4LiV4Lix4Lin4LmA4Lil4LiCIjsKICAgICAgfQogICAgICBjYXNlICJvYmplY3QiOiB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHsKICAgICAgICAgIHJldHVybiAi4Lit4Liy4Lij4LmM4LmA4Lij4Lii4LmMIChBcnJheSkiOwogICAgICAgIH0KICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuICLguYTguKHguYjguKHguLXguITguYjguLIgKG51bGwpIjsKICAgICAgICB9CiAgICAgICAgaWYgKE9iamVjdC5nZXRQcm90b3R5cGVPZihkYXRhKSAhPT0gT2JqZWN0LnByb3RvdHlwZSAmJiBkYXRhLmNvbnN0cnVjdG9yKSB7CiAgICAgICAgICByZXR1cm4gZGF0YS5jb25zdHJ1Y3Rvci5uYW1lOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHQ7CiAgfTsKICBjb25zdCBOb3VucyA9IHsKICAgIHJlZ2V4OiAi4LiC4LmJ4Lit4Lih4Li54Lil4LiX4Li14LmI4Lib4LmJ4Lit4LiZIiwKICAgIGVtYWlsOiAi4LiX4Li14LmI4Lit4Lii4Li54LmI4Lit4Li14LmA4Lih4LilIiwKICAgIHVybDogIlVSTCIsCiAgICBlbW9qaTogIuC4reC4tOC5guC4oeC4iOC4tCIsCiAgICB1dWlkOiAiVVVJRCIsCiAgICB1dWlkdjQ6ICJVVUlEdjQiLAogICAgdXVpZHY2OiAiVVVJRHY2IiwKICAgIG5hbm9pZDogIm5hbm9pZCIsCiAgICBndWlkOiAiR1VJRCIsCiAgICBjdWlkOiAiY3VpZCIsCiAgICBjdWlkMjogImN1aWQyIiwKICAgIHVsaWQ6ICJVTElEIiwKICAgIHhpZDogIlhJRCIsCiAgICBrc3VpZDogIktTVUlEIiwKICAgIGRhdGV0aW1lOiAi4Lin4Lix4LiZ4LiX4Li14LmI4LmA4Lin4Lil4Liy4LmB4Lia4LiaIElTTyIsCiAgICBkYXRlOiAi4Lin4Lix4LiZ4LiX4Li14LmI4LmB4Lia4LiaIElTTyIsCiAgICB0aW1lOiAi4LmA4Lin4Lil4Liy4LmB4Lia4LiaIElTTyIsCiAgICBkdXJhdGlvbjogIuC4iuC5iOC4p+C4h+C5gOC4p+C4peC4suC5geC4muC4miBJU08iLAogICAgaXB2NDogIuC4l+C4teC5iOC4reC4ouC4ueC5iCBJUHY0IiwKICAgIGlwdjY6ICLguJfguLXguYjguK3guKLguLnguYggSVB2NiIsCiAgICBjaWRydjQ6ICLguIrguYjguKfguIcgSVAg4LmB4Lia4LiaIElQdjQiLAogICAgY2lkcnY2OiAi4LiK4LmI4Lin4LiHIElQIOC5geC4muC4miBJUHY2IiwKICAgIGJhc2U2NDogIuC4guC5ieC4reC4hOC4p+C4suC4oeC5geC4muC4miBCYXNlNjQiLAogICAgYmFzZTY0dXJsOiAi4LiC4LmJ4Lit4LiE4Lin4Liy4Lih4LmB4Lia4LiaIEJhc2U2NCDguKrguLPguKvguKPguLHguJogVVJMIiwKICAgIGpzb25fc3RyaW5nOiAi4LiC4LmJ4Lit4LiE4Lin4Liy4Lih4LmB4Lia4LiaIEpTT04iLAogICAgZTE2NDogIuC5gOC4muC4reC4o+C5jOC5guC4l+C4o+C4qOC4seC4nuC4l+C5jOC4o+C4sOC4q+C4p+C5iOC4suC4h+C4m+C4o+C4sOC5gOC4l+C4qCAoRS4xNjQpIiwKICAgIGp3dDogIuC5guC4l+C5gOC4hOC4mSBKV1QiLAogICAgdGVtcGxhdGVfbGl0ZXJhbDogIuC4guC5ieC4reC4oeC4ueC4peC4l+C4teC5iOC4m+C5ieC4reC4mSIKICB9OwogIHJldHVybiAoaXNzdWUyKSA9PiB7CiAgICBzd2l0Y2ggKGlzc3VlMi5jb2RlKSB7CiAgICAgIGNhc2UgImludmFsaWRfdHlwZSI6CiAgICAgICAgcmV0dXJuIGDguJvguKPguLDguYDguKDguJfguILguYnguK3guKHguLnguKXguYTguKHguYjguJbguLnguIHguJXguYnguK3guIc6IOC4hOC4p+C4o+C5gOC4m+C5h+C4mSAke2lzc3VlMi5leHBlY3RlZH0g4LmB4LiV4LmI4LmE4LiU4LmJ4Lij4Lix4LiaICR7cGFyc2VkVHlwZTcoaXNzdWUyLmlucHV0KX1gOwogICAgICBjYXNlICJpbnZhbGlkX3ZhbHVlIjoKICAgICAgICBpZiAoaXNzdWUyLnZhbHVlcy5sZW5ndGggPT09IDEpCiAgICAgICAgICByZXR1cm4gYOC4hOC5iOC4suC5hOC4oeC5iOC4luC4ueC4geC4leC5ieC4reC4hzog4LiE4Lin4Lij4LmA4Lib4LmH4LiZICR7c3RyaW5naWZ5UHJpbWl0aXZlKGlzc3VlMi52YWx1ZXNbMF0pfWA7CiAgICAgICAgcmV0dXJuIGDguJXguLHguKfguYDguKXguLfguK3guIHguYTguKHguYjguJbguLnguIHguJXguYnguK3guIc6IOC4hOC4p+C4o+C5gOC4m+C5h+C4meC4q+C4meC4tuC5iOC4h+C5g+C4mSAke2pvaW5WYWx1ZXMoaXNzdWUyLnZhbHVlcywgInwiKX1gOwogICAgICBjYXNlICJ0b29fYmlnIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAi4LmE4Lih4LmI4LmA4LiB4Li04LiZIiA6ICLguJnguYnguK3guKLguIHguKfguYjguLIiOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKQogICAgICAgICAgcmV0dXJuIGDguYDguIHguLTguJnguIHguLPguKvguJnguJQ6ICR7aXNzdWUyLm9yaWdpbiA/PyAi4LiE4LmI4LiyIn0g4LiE4Lin4Lij4Lih4Li1JHthZGp9ICR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdCA/PyAi4Lij4Liy4Lii4LiB4Liy4LijIn1gOwogICAgICAgIHJldHVybiBg4LmA4LiB4Li04LiZ4LiB4Liz4Lir4LiZ4LiUOiAke2lzc3VlMi5vcmlnaW4gPz8gIuC4hOC5iOC4siJ9IOC4hOC4p+C4o+C4oeC4tSR7YWRqfSAke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9YDsKICAgICAgfQogICAgICBjYXNlICJ0b29fc21hbGwiOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICLguK3guKLguYjguLLguIfguJnguYnguK3guKIiIDogIuC4oeC4suC4geC4geC4p+C5iOC4siI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpIHsKICAgICAgICAgIHJldHVybiBg4LiZ4LmJ4Lit4Lii4LiB4Lin4LmI4Liy4LiB4Liz4Lir4LiZ4LiUOiAke2lzc3VlMi5vcmlnaW59IOC4hOC4p+C4o+C4oeC4tSR7YWRqfSAke2lzc3VlMi5taW5pbXVtLnRvU3RyaW5nKCl9ICR7c2l6aW5nLnVuaXR9YDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGDguJnguYnguK3guKLguIHguKfguYjguLLguIHguLPguKvguJnguJQ6ICR7aXNzdWUyLm9yaWdpbn0g4LiE4Lin4Lij4Lih4Li1JHthZGp9ICR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgImludmFsaWRfZm9ybWF0IjogewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInN0YXJ0c193aXRoIikgewogICAgICAgICAgcmV0dXJuIGDguKPguLnguJvguYHguJrguJrguYTguKHguYjguJbguLnguIHguJXguYnguK3guIc6IOC4guC5ieC4reC4hOC4p+C4suC4oeC4leC5ieC4reC4h+C4guC4tuC5ieC4meC4leC5ieC4meC4lOC5ieC4p+C4oiAiJHtfaXNzdWUucHJlZml4fSJgOwogICAgICAgIH0KICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImVuZHNfd2l0aCIpCiAgICAgICAgICByZXR1cm4gYOC4o+C4ueC4m+C5geC4muC4muC5hOC4oeC5iOC4luC4ueC4geC4leC5ieC4reC4hzog4LiC4LmJ4Lit4LiE4Lin4Liy4Lih4LiV4LmJ4Lit4LiH4Lil4LiH4LiX4LmJ4Liy4Lii4LiU4LmJ4Lin4LiiICIke19pc3N1ZS5zdWZmaXh9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJpbmNsdWRlcyIpCiAgICAgICAgICByZXR1cm4gYOC4o+C4ueC4m+C5geC4muC4muC5hOC4oeC5iOC4luC4ueC4geC4leC5ieC4reC4hzog4LiC4LmJ4Lit4LiE4Lin4Liy4Lih4LiV4LmJ4Lit4LiH4Lih4Li1ICIke19pc3N1ZS5pbmNsdWRlc30iIOC4reC4ouC4ueC5iOC5g+C4meC4guC5ieC4reC4hOC4p+C4suC4oWA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJyZWdleCIpCiAgICAgICAgICByZXR1cm4gYOC4o+C4ueC4m+C5geC4muC4muC5hOC4oeC5iOC4luC4ueC4geC4leC5ieC4reC4hzog4LiV4LmJ4Lit4LiH4LiV4Lij4LiH4LiB4Lix4Lia4Lij4Li54Lib4LmB4Lia4Lia4LiX4Li14LmI4LiB4Liz4Lir4LiZ4LiUICR7X2lzc3VlLnBhdHRlcm59YDsKICAgICAgICByZXR1cm4gYOC4o+C4ueC4m+C5geC4muC4muC5hOC4oeC5iOC4luC4ueC4geC4leC5ieC4reC4hzogJHtOb3Vuc1tfaXNzdWUuZm9ybWF0XSA/PyBpc3N1ZTIuZm9ybWF0fWA7CiAgICAgIH0KICAgICAgY2FzZSAibm90X211bHRpcGxlX29mIjoKICAgICAgICByZXR1cm4gYOC4leC4seC4p+C5gOC4peC4guC5hOC4oeC5iOC4luC4ueC4geC4leC5ieC4reC4hzog4LiV4LmJ4Lit4LiH4LmA4Lib4LmH4LiZ4LiI4Liz4LiZ4Lin4LiZ4LiX4Li14LmI4Lir4Liy4Lij4LiU4LmJ4Lin4LiiICR7aXNzdWUyLmRpdmlzb3J9IOC5hOC4lOC5ieC4peC4h+C4leC4seC4p2A7CiAgICAgIGNhc2UgInVucmVjb2duaXplZF9rZXlzIjoKICAgICAgICByZXR1cm4gYOC4nuC4muC4hOC4teC4ouC5jOC4l+C4teC5iOC5hOC4oeC5iOC4o+C4ueC5ieC4iOC4seC4gTogJHtqb2luVmFsdWVzKGlzc3VlMi5rZXlzLCAiLCAiKX1gOwogICAgICBjYXNlICJpbnZhbGlkX2tleSI6CiAgICAgICAgcmV0dXJuIGDguITguLXguKLguYzguYTguKHguYjguJbguLnguIHguJXguYnguK3guIfguYPguJkgJHtpc3N1ZTIub3JpZ2lufWA7CiAgICAgIGNhc2UgImludmFsaWRfdW5pb24iOgogICAgICAgIHJldHVybiAi4LiC4LmJ4Lit4Lih4Li54Lil4LmE4Lih4LmI4LiW4Li54LiB4LiV4LmJ4Lit4LiHOiDguYTguKHguYjguJXguKPguIfguIHguLHguJrguKPguLnguJvguYHguJrguJrguKLguLnguYDguJnguLXguKLguJnguJfguLXguYjguIHguLPguKvguJnguJTguYTguKfguYkiOwogICAgICBjYXNlICJpbnZhbGlkX2VsZW1lbnQiOgogICAgICAgIHJldHVybiBg4LiC4LmJ4Lit4Lih4Li54Lil4LmE4Lih4LmI4LiW4Li54LiB4LiV4LmJ4Lit4LiH4LmD4LiZICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBg4LiC4LmJ4Lit4Lih4Li54Lil4LmE4Lih4LmI4LiW4Li54LiB4LiV4LmJ4Lit4LiHYDsKICAgIH0KICB9Owp9OwpmdW5jdGlvbiB0aF9kZWZhdWx0KCkgewogIHJldHVybiB7CiAgICBsb2NhbGVFcnJvcjogZXJyb3IzNygpCiAgfTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9sb2NhbGVzL3RyLmpzCnZhciBwYXJzZWRUeXBlNiA9IChkYXRhKSA9PiB7CiAgY29uc3QgdCA9IHR5cGVvZiBkYXRhOwogIHN3aXRjaCAodCkgewogICAgY2FzZSAibnVtYmVyIjogewogICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gIk5hTiIgOiAibnVtYmVyIjsKICAgIH0KICAgIGNhc2UgIm9iamVjdCI6IHsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHsKICAgICAgICByZXR1cm4gImFycmF5IjsKICAgICAgfQogICAgICBpZiAoZGF0YSA9PT0gbnVsbCkgewogICAgICAgIHJldHVybiAibnVsbCI7CiAgICAgIH0KICAgICAgaWYgKE9iamVjdC5nZXRQcm90b3R5cGVPZihkYXRhKSAhPT0gT2JqZWN0LnByb3RvdHlwZSAmJiBkYXRhLmNvbnN0cnVjdG9yKSB7CiAgICAgICAgcmV0dXJuIGRhdGEuY29uc3RydWN0b3IubmFtZTsKICAgICAgfQogICAgfQogIH0KICByZXR1cm4gdDsKfTsKdmFyIGVycm9yMzggPSAoKSA9PiB7CiAgY29uc3QgU2l6YWJsZSA9IHsKICAgIHN0cmluZzogeyB1bml0OiAia2FyYWt0ZXIiLCB2ZXJiOiAib2xtYWzEsSIgfSwKICAgIGZpbGU6IHsgdW5pdDogImJheXQiLCB2ZXJiOiAib2xtYWzEsSIgfSwKICAgIGFycmF5OiB7IHVuaXQ6ICLDtsSfZSIsIHZlcmI6ICJvbG1hbMSxIiB9LAogICAgc2V0OiB7IHVuaXQ6ICLDtsSfZSIsIHZlcmI6ICJvbG1hbMSxIiB9CiAgfTsKICBmdW5jdGlvbiBnZXRTaXppbmcob3JpZ2luKSB7CiAgICByZXR1cm4gU2l6YWJsZVtvcmlnaW5dID8/IG51bGw7CiAgfQogIGNvbnN0IE5vdW5zID0gewogICAgcmVnZXg6ICJnaXJkaSIsCiAgICBlbWFpbDogImUtcG9zdGEgYWRyZXNpIiwKICAgIHVybDogIlVSTCIsCiAgICBlbW9qaTogImVtb2ppIiwKICAgIHV1aWQ6ICJVVUlEIiwKICAgIHV1aWR2NDogIlVVSUR2NCIsCiAgICB1dWlkdjY6ICJVVUlEdjYiLAogICAgbmFub2lkOiAibmFub2lkIiwKICAgIGd1aWQ6ICJHVUlEIiwKICAgIGN1aWQ6ICJjdWlkIiwKICAgIGN1aWQyOiAiY3VpZDIiLAogICAgdWxpZDogIlVMSUQiLAogICAgeGlkOiAiWElEIiwKICAgIGtzdWlkOiAiS1NVSUQiLAogICAgZGF0ZXRpbWU6ICJJU08gdGFyaWggdmUgc2FhdCIsCiAgICBkYXRlOiAiSVNPIHRhcmloIiwKICAgIHRpbWU6ICJJU08gc2FhdCIsCiAgICBkdXJhdGlvbjogIklTTyBzw7xyZSIsCiAgICBpcHY0OiAiSVB2NCBhZHJlc2kiLAogICAgaXB2NjogIklQdjYgYWRyZXNpIiwKICAgIGNpZHJ2NDogIklQdjQgYXJhbMSxxJ/EsSIsCiAgICBjaWRydjY6ICJJUHY2IGFyYWzEscSfxLEiLAogICAgYmFzZTY0OiAiYmFzZTY0IGlsZSDFn2lmcmVsZW5tacWfIG1ldGluIiwKICAgIGJhc2U2NHVybDogImJhc2U2NHVybCBpbGUgxZ9pZnJlbGVubWnFnyBtZXRpbiIsCiAgICBqc29uX3N0cmluZzogIkpTT04gZGl6ZXNpIiwKICAgIGUxNjQ6ICJFLjE2NCBzYXnEsXPEsSIsCiAgICBqd3Q6ICJKV1QiLAogICAgdGVtcGxhdGVfbGl0ZXJhbDogIsWeYWJsb24gZGl6ZXNpIgogIH07CiAgcmV0dXJuIChpc3N1ZTIpID0+IHsKICAgIHN3aXRjaCAoaXNzdWUyLmNvZGUpIHsKICAgICAgY2FzZSAiaW52YWxpZF90eXBlIjoKICAgICAgICByZXR1cm4gYEdlw6dlcnNpeiBkZcSfZXI6IGJla2xlbmVuICR7aXNzdWUyLmV4cGVjdGVkfSwgYWzEsW5hbiAke3BhcnNlZFR5cGU2KGlzc3VlMi5pbnB1dCl9YDsKICAgICAgY2FzZSAiaW52YWxpZF92YWx1ZSI6CiAgICAgICAgaWYgKGlzc3VlMi52YWx1ZXMubGVuZ3RoID09PSAxKQogICAgICAgICAgcmV0dXJuIGBHZcOnZXJzaXogZGXEn2VyOiBiZWtsZW5lbiAke3N0cmluZ2lmeVByaW1pdGl2ZShpc3N1ZTIudmFsdWVzWzBdKX1gOwogICAgICAgIHJldHVybiBgR2XDp2Vyc2l6IHNlw6dlbmVrOiBhxZ9hxJ/EsWRha2lsZXJkZW4gYmlyaSBvbG1hbMSxOiAke2pvaW5WYWx1ZXMoaXNzdWUyLnZhbHVlcywgInwiKX1gOwogICAgICBjYXNlICJ0b29fYmlnIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPD0iIDogIjwiOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKQogICAgICAgICAgcmV0dXJuIGDDh29rIGLDvHnDvGs6IGJla2xlbmVuICR7aXNzdWUyLm9yaWdpbiA/PyAiZGXEn2VyIn0gJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0ID8/ICLDtsSfZSJ9YDsKICAgICAgICByZXR1cm4gYMOHb2sgYsO8ecO8azogYmVrbGVuZW4gJHtpc3N1ZTIub3JpZ2luID8/ICJkZcSfZXIifSAke2Fkan0ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9YDsKICAgICAgfQogICAgICBjYXNlICJ0b29fc21hbGwiOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI+PSIgOiAiPiI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpCiAgICAgICAgICByZXR1cm4gYMOHb2sga8O8w6fDvGs6IGJla2xlbmVuICR7aXNzdWUyLm9yaWdpbn0gJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0fWA7CiAgICAgICAgcmV0dXJuIGDDh29rIGvDvMOnw7xrOiBiZWtsZW5lbiAke2lzc3VlMi5vcmlnaW59ICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgImludmFsaWRfZm9ybWF0IjogewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInN0YXJ0c193aXRoIikKICAgICAgICAgIHJldHVybiBgR2XDp2Vyc2l6IG1ldGluOiAiJHtfaXNzdWUucHJlZml4fSIgaWxlIGJhxZ9sYW1hbMSxYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImVuZHNfd2l0aCIpCiAgICAgICAgICByZXR1cm4gYEdlw6dlcnNpeiBtZXRpbjogIiR7X2lzc3VlLnN1ZmZpeH0iIGlsZSBiaXRtZWxpYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImluY2x1ZGVzIikKICAgICAgICAgIHJldHVybiBgR2XDp2Vyc2l6IG1ldGluOiAiJHtfaXNzdWUuaW5jbHVkZXN9IiBpw6dlcm1lbGlgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAicmVnZXgiKQogICAgICAgICAgcmV0dXJuIGBHZcOnZXJzaXogbWV0aW46ICR7X2lzc3VlLnBhdHRlcm59IGRlc2VuaW5lIHV5bWFsxLFgOwogICAgICAgIHJldHVybiBgR2XDp2Vyc2l6ICR7Tm91bnNbX2lzc3VlLmZvcm1hdF0gPz8gaXNzdWUyLmZvcm1hdH1gOwogICAgICB9CiAgICAgIGNhc2UgIm5vdF9tdWx0aXBsZV9vZiI6CiAgICAgICAgcmV0dXJuIGBHZcOnZXJzaXogc2F5xLE6ICR7aXNzdWUyLmRpdmlzb3J9IGlsZSB0YW0gYsO2bMO8bmViaWxtZWxpYDsKICAgICAgY2FzZSAidW5yZWNvZ25pemVkX2tleXMiOgogICAgICAgIHJldHVybiBgVGFuxLFubWF5YW4gYW5haHRhciR7aXNzdWUyLmtleXMubGVuZ3RoID4gMSA/ICJsYXIiIDogIiJ9OiAke2pvaW5WYWx1ZXMoaXNzdWUyLmtleXMsICIsICIpfWA7CiAgICAgIGNhc2UgImludmFsaWRfa2V5IjoKICAgICAgICByZXR1cm4gYCR7aXNzdWUyLm9yaWdpbn0gacOnaW5kZSBnZcOnZXJzaXogYW5haHRhcmA7CiAgICAgIGNhc2UgImludmFsaWRfdW5pb24iOgogICAgICAgIHJldHVybiAiR2XDp2Vyc2l6IGRlxJ9lciI7CiAgICAgIGNhc2UgImludmFsaWRfZWxlbWVudCI6CiAgICAgICAgcmV0dXJuIGAke2lzc3VlMi5vcmlnaW59IGnDp2luZGUgZ2XDp2Vyc2l6IGRlxJ9lcmA7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIGBHZcOnZXJzaXogZGXEn2VyYDsKICAgIH0KICB9Owp9OwpmdW5jdGlvbiB0cl9kZWZhdWx0KCkgewogIHJldHVybiB7CiAgICBsb2NhbGVFcnJvcjogZXJyb3IzOCgpCiAgfTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9sb2NhbGVzL3VrLmpzCnZhciBlcnJvcjM5ID0gKCkgPT4gewogIGNvbnN0IFNpemFibGUgPSB7CiAgICBzdHJpbmc6IHsgdW5pdDogItGB0LjQvNCy0L7Qu9GW0LIiLCB2ZXJiOiAi0LzQsNGC0LjQvNC1IiB9LAogICAgZmlsZTogeyB1bml0OiAi0LHQsNC50YLRltCyIiwgdmVyYjogItC80LDRgtC40LzQtSIgfSwKICAgIGFycmF5OiB7IHVuaXQ6ICLQtdC70LXQvNC10L3RgtGW0LIiLCB2ZXJiOiAi0LzQsNGC0LjQvNC1IiB9LAogICAgc2V0OiB7IHVuaXQ6ICLQtdC70LXQvNC10L3RgtGW0LIiLCB2ZXJiOiAi0LzQsNGC0LjQvNC1IiB9CiAgfTsKICBmdW5jdGlvbiBnZXRTaXppbmcob3JpZ2luKSB7CiAgICByZXR1cm4gU2l6YWJsZVtvcmlnaW5dID8/IG51bGw7CiAgfQogIGNvbnN0IHBhcnNlZFR5cGU3ID0gKGRhdGEpID0+IHsKICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTsKICAgIHN3aXRjaCAodCkgewogICAgICBjYXNlICJudW1iZXIiOiB7CiAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/ICJOYU4iIDogItGH0LjRgdC70L4iOwogICAgICB9CiAgICAgIGNhc2UgIm9iamVjdCI6IHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkgewogICAgICAgICAgcmV0dXJuICLQvNCw0YHQuNCyIjsKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHsKICAgICAgICAgIHJldHVybiAibnVsbCI7CiAgICAgICAgfQogICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZGF0YSkgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgZGF0YS5jb25zdHJ1Y3RvcikgewogICAgICAgICAgcmV0dXJuIGRhdGEuY29uc3RydWN0b3IubmFtZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0OwogIH07CiAgY29uc3QgTm91bnMgPSB7CiAgICByZWdleDogItCy0YXRltC00L3RliDQtNCw0L3RliIsCiAgICBlbWFpbDogItCw0LTRgNC10YHQsCDQtdC70LXQutGC0YDQvtC90L3QvtGXINC/0L7RiNGC0LgiLAogICAgdXJsOiAiVVJMIiwKICAgIGVtb2ppOiAi0LXQvNC+0LTQt9GWIiwKICAgIHV1aWQ6ICJVVUlEIiwKICAgIHV1aWR2NDogIlVVSUR2NCIsCiAgICB1dWlkdjY6ICJVVUlEdjYiLAogICAgbmFub2lkOiAibmFub2lkIiwKICAgIGd1aWQ6ICJHVUlEIiwKICAgIGN1aWQ6ICJjdWlkIiwKICAgIGN1aWQyOiAiY3VpZDIiLAogICAgdWxpZDogIlVMSUQiLAogICAgeGlkOiAiWElEIiwKICAgIGtzdWlkOiAiS1NVSUQiLAogICAgZGF0ZXRpbWU6ICLQtNCw0YLQsCDRgtCwINGH0LDRgSBJU08iLAogICAgZGF0ZTogItC00LDRgtCwIElTTyIsCiAgICB0aW1lOiAi0YfQsNGBIElTTyIsCiAgICBkdXJhdGlvbjogItGC0YDQuNCy0LDQu9GW0YHRgtGMIElTTyIsCiAgICBpcHY0OiAi0LDQtNGA0LXRgdCwIElQdjQiLAogICAgaXB2NjogItCw0LTRgNC10YHQsCBJUHY2IiwKICAgIGNpZHJ2NDogItC00ZbQsNC/0LDQt9C+0L0gSVB2NCIsCiAgICBjaWRydjY6ICLQtNGW0LDQv9Cw0LfQvtC9IElQdjYiLAogICAgYmFzZTY0OiAi0YDRj9C00L7QuiDRgyDQutC+0LTRg9Cy0LDQvdC90ZYgYmFzZTY0IiwKICAgIGJhc2U2NHVybDogItGA0Y/QtNC+0Log0YMg0LrQvtC00YPQstCw0L3QvdGWIGJhc2U2NHVybCIsCiAgICBqc29uX3N0cmluZzogItGA0Y/QtNC+0LogSlNPTiIsCiAgICBlMTY0OiAi0L3QvtC80LXRgCBFLjE2NCIsCiAgICBqd3Q6ICJKV1QiLAogICAgdGVtcGxhdGVfbGl0ZXJhbDogItCy0YXRltC00L3RliDQtNCw0L3RliIKICB9OwogIHJldHVybiAoaXNzdWUyKSA9PiB7CiAgICBzd2l0Y2ggKGlzc3VlMi5jb2RlKSB7CiAgICAgIGNhc2UgImludmFsaWRfdHlwZSI6CiAgICAgICAgcmV0dXJuIGDQndC10L/RgNCw0LLQuNC70YzQvdGWINCy0YXRltC00L3RliDQtNCw0L3Rljog0L7Rh9GW0LrRg9GU0YLRjNGB0Y8gJHtpc3N1ZTIuZXhwZWN0ZWR9LCDQvtGC0YDQuNC80LDQvdC+ICR7cGFyc2VkVHlwZTcoaXNzdWUyLmlucHV0KX1gOwogICAgICAvLyByZXR1cm4gYNCd0LXQv9GA0LDQstC40LvRjNC90ZYg0LLRhdGW0LTQvdGWINC00LDQvdGWOiDQvtGH0ZbQutGD0ZTRgtGM0YHRjyAke2lzc3VlLmV4cGVjdGVkfSwg0L7RgtGA0LjQvNCw0L3QviAke3V0aWwuZ2V0UGFyc2VkVHlwZShpc3N1ZS5pbnB1dCl9YDsKICAgICAgY2FzZSAiaW52YWxpZF92YWx1ZSI6CiAgICAgICAgaWYgKGlzc3VlMi52YWx1ZXMubGVuZ3RoID09PSAxKQogICAgICAgICAgcmV0dXJuIGDQndC10L/RgNCw0LLQuNC70YzQvdGWINCy0YXRltC00L3RliDQtNCw0L3Rljog0L7Rh9GW0LrRg9GU0YLRjNGB0Y8gJHtzdHJpbmdpZnlQcmltaXRpdmUoaXNzdWUyLnZhbHVlc1swXSl9YDsKICAgICAgICByZXR1cm4gYNCd0LXQv9GA0LDQstC40LvRjNC90LAg0L7Qv9GG0ZbRjzog0L7Rh9GW0LrRg9GU0YLRjNGB0Y8g0L7QtNC90LUg0LcgJHtqb2luVmFsdWVzKGlzc3VlMi52YWx1ZXMsICJ8Iil9YDsKICAgICAgY2FzZSAidG9vX2JpZyI6IHsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIjw9IiA6ICI8IjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykKICAgICAgICAgIHJldHVybiBg0JfQsNC90LDQtNGC0L4g0LLQtdC70LjQutC1OiDQvtGH0ZbQutGD0ZTRgtGM0YHRjywg0YnQviAke2lzc3VlMi5vcmlnaW4gPz8gItC30L3QsNGH0LXQvdC90Y8ifSAke3NpemluZy52ZXJifSAke2Fkan0ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9ICR7c2l6aW5nLnVuaXQgPz8gItC10LvQtdC80LXQvdGC0ZbQsiJ9YDsKICAgICAgICByZXR1cm4gYNCX0LDQvdCw0LTRgtC+INCy0LXQu9C40LrQtTog0L7Rh9GW0LrRg9GU0YLRjNGB0Y8sINGJ0L4gJHtpc3N1ZTIub3JpZ2luID8/ICLQt9C90LDRh9C10L3QvdGPIn0g0LHRg9C00LUgJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfWA7CiAgICAgIH0KICAgICAgY2FzZSAidG9vX3NtYWxsIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPj0iIDogIj4iOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKSB7CiAgICAgICAgICByZXR1cm4gYNCX0LDQvdCw0LTRgtC+INC80LDQu9C1OiDQvtGH0ZbQutGD0ZTRgtGM0YHRjywg0YnQviAke2lzc3VlMi5vcmlnaW59ICR7c2l6aW5nLnZlcmJ9ICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdH1gOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYNCX0LDQvdCw0LTRgtC+INC80LDQu9C1OiDQvtGH0ZbQutGD0ZTRgtGM0YHRjywg0YnQviAke2lzc3VlMi5vcmlnaW59INCx0YPQtNC1ICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgImludmFsaWRfZm9ybWF0IjogewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInN0YXJ0c193aXRoIikKICAgICAgICAgIHJldHVybiBg0J3QtdC/0YDQsNCy0LjQu9GM0L3QuNC5INGA0Y/QtNC+0Lo6INC/0L7QstC40L3QtdC9INC/0L7Rh9C40L3QsNGC0LjRgdGPINC3ICIke19pc3N1ZS5wcmVmaXh9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJlbmRzX3dpdGgiKQogICAgICAgICAgcmV0dXJuIGDQndC10L/RgNCw0LLQuNC70YzQvdC40Lkg0YDRj9C00L7Qujog0L/QvtCy0LjQvdC10L0g0LfQsNC60ZbQvdGH0YPQstCw0YLQuNGB0Y8g0L3QsCAiJHtfaXNzdWUuc3VmZml4fSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiaW5jbHVkZXMiKQogICAgICAgICAgcmV0dXJuIGDQndC10L/RgNCw0LLQuNC70YzQvdC40Lkg0YDRj9C00L7Qujog0L/QvtCy0LjQvdC10L0g0LzRltGB0YLQuNGC0LggIiR7X2lzc3VlLmluY2x1ZGVzfSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAicmVnZXgiKQogICAgICAgICAgcmV0dXJuIGDQndC10L/RgNCw0LLQuNC70YzQvdC40Lkg0YDRj9C00L7Qujog0L/QvtCy0LjQvdC10L0g0LLRltC00L/QvtCy0ZbQtNCw0YLQuCDRiNCw0LHQu9C+0L3RgyAke19pc3N1ZS5wYXR0ZXJufWA7CiAgICAgICAgcmV0dXJuIGDQndC10L/RgNCw0LLQuNC70YzQvdC40LkgJHtOb3Vuc1tfaXNzdWUuZm9ybWF0XSA/PyBpc3N1ZTIuZm9ybWF0fWA7CiAgICAgIH0KICAgICAgY2FzZSAibm90X211bHRpcGxlX29mIjoKICAgICAgICByZXR1cm4gYNCd0LXQv9GA0LDQstC40LvRjNC90LUg0YfQuNGB0LvQvjog0L/QvtCy0LjQvdC90L4g0LHRg9GC0Lgg0LrRgNCw0YLQvdC40LwgJHtpc3N1ZTIuZGl2aXNvcn1gOwogICAgICBjYXNlICJ1bnJlY29nbml6ZWRfa2V5cyI6CiAgICAgICAgcmV0dXJuIGDQndC10YDQvtC30L/RltC30L3QsNC90LjQuSDQutC70Y7RhyR7aXNzdWUyLmtleXMubGVuZ3RoID4gMSA/ICLRliIgOiAiIn06ICR7am9pblZhbHVlcyhpc3N1ZTIua2V5cywgIiwgIil9YDsKICAgICAgY2FzZSAiaW52YWxpZF9rZXkiOgogICAgICAgIHJldHVybiBg0J3QtdC/0YDQsNCy0LjQu9GM0L3QuNC5INC60LvRjtGHINGDICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBjYXNlICJpbnZhbGlkX3VuaW9uIjoKICAgICAgICByZXR1cm4gItCd0LXQv9GA0LDQstC40LvRjNC90ZYg0LLRhdGW0LTQvdGWINC00LDQvdGWIjsKICAgICAgY2FzZSAiaW52YWxpZF9lbGVtZW50IjoKICAgICAgICByZXR1cm4gYNCd0LXQv9GA0LDQstC40LvRjNC90LUg0LfQvdCw0YfQtdC90L3RjyDRgyAke2lzc3VlMi5vcmlnaW59YDsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gYNCd0LXQv9GA0LDQstC40LvRjNC90ZYg0LLRhdGW0LTQvdGWINC00LDQvdGWYDsKICAgIH0KICB9Owp9OwpmdW5jdGlvbiB1a19kZWZhdWx0KCkgewogIHJldHVybiB7CiAgICBsb2NhbGVFcnJvcjogZXJyb3IzOSgpCiAgfTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9sb2NhbGVzL3VhLmpzCmZ1bmN0aW9uIHVhX2RlZmF1bHQoKSB7CiAgcmV0dXJuIHVrX2RlZmF1bHQoKTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9sb2NhbGVzL3VyLmpzCnZhciBlcnJvcjQwID0gKCkgPT4gewogIGNvbnN0IFNpemFibGUgPSB7CiAgICBzdHJpbmc6IHsgdW5pdDogItit2LHZiNmBIiwgdmVyYjogItuB2YjZhtinIiB9LAogICAgZmlsZTogeyB1bml0OiAi2KjYp9im2bnYsyIsIHZlcmI6ICLbgdmI2YbYpyIgfSwKICAgIGFycmF5OiB7IHVuaXQ6ICLYotim2bnZhdiyIiwgdmVyYjogItuB2YjZhtinIiB9LAogICAgc2V0OiB7IHVuaXQ6ICLYotim2bnZhdiyIiwgdmVyYjogItuB2YjZhtinIiB9CiAgfTsKICBmdW5jdGlvbiBnZXRTaXppbmcob3JpZ2luKSB7CiAgICByZXR1cm4gU2l6YWJsZVtvcmlnaW5dID8/IG51bGw7CiAgfQogIGNvbnN0IHBhcnNlZFR5cGU3ID0gKGRhdGEpID0+IHsKICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTsKICAgIHN3aXRjaCAodCkgewogICAgICBjYXNlICJudW1iZXIiOiB7CiAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/ICJOYU4iIDogItmG2YXYqNixIjsKICAgICAgfQogICAgICBjYXNlICJvYmplY3QiOiB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHsKICAgICAgICAgIHJldHVybiAi2KLYsduSIjsKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHsKICAgICAgICAgIHJldHVybiAi2YbZhCI7CiAgICAgICAgfQogICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZGF0YSkgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgZGF0YS5jb25zdHJ1Y3RvcikgewogICAgICAgICAgcmV0dXJuIGRhdGEuY29uc3RydWN0b3IubmFtZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0OwogIH07CiAgY29uc3QgTm91bnMgPSB7CiAgICByZWdleDogItin2YYg2b7ZuSIsCiAgICBlbWFpbDogItin24wg2YXbjNmEINin24zaiNix24zYsyIsCiAgICB1cmw6ICLbjNmIINii2LEg2KfbjNmEIiwKICAgIGVtb2ppOiAi2KfbjNmF2YjYrNuMIiwKICAgIHV1aWQ6ICLbjNmIINuM2Ygg2KLYptuMINqI24wiLAogICAgdXVpZHY0OiAi24zZiCDbjNmIINii2KbbjCDaiNuMINmI24wgNCIsCiAgICB1dWlkdjY6ICLbjNmIINuM2Ygg2KLYptuMINqI24wg2YjbjCA2IiwKICAgIG5hbm9pZDogItmG24zZhtmIINii2KbbjCDaiNuMIiwKICAgIGd1aWQ6ICLYrNuMINuM2Ygg2KLYptuMINqI24wiLAogICAgY3VpZDogItiz24wg24zZiCDYotim24wg2ojbjCIsCiAgICBjdWlkMjogItiz24wg24zZiCDYotim24wg2ojbjCAyIiwKICAgIHVsaWQ6ICLbjNmIINin24zZhCDYotim24wg2ojbjCIsCiAgICB4aWQ6ICLYp9uM2qnYsyDYotim24wg2ojbjCIsCiAgICBrc3VpZDogItqp25Ig2KfbjNizINuM2Ygg2KLYptuMINqI24wiLAogICAgZGF0ZXRpbWU6ICLYotim24wg2KfbjNizINin2Ygg2ojbjNm5INm52KfYptmFIiwKICAgIGRhdGU6ICLYotim24wg2KfbjNizINin2Ygg2KrYp9ix24zYriIsCiAgICB0aW1lOiAi2KLYptuMINin24zYsyDYp9mIINmI2YLYqiIsCiAgICBkdXJhdGlvbjogItii2KbbjCDYp9uM2LMg2KfZiCDZhdiv2KoiLAogICAgaXB2NDogItii2KbbjCDZvtuMINmI24wgNCDYp9uM2ojYsduM2LMiLAogICAgaXB2NjogItii2KbbjCDZvtuMINmI24wgNiDYp9uM2ojYsduM2LMiLAogICAgY2lkcnY0OiAi2KLYptuMINm+24wg2YjbjCA0INix24zZhtisIiwKICAgIGNpZHJ2NjogItii2KbbjCDZvtuMINmI24wgNiDYsduM2YbYrCIsCiAgICBiYXNlNjQ6ICLYqNuM2LMgNjQg2KfZhiDaqdmI2ojaiCDYs9m52LHZhtqvIiwKICAgIGJhc2U2NHVybDogItio24zYsyA2NCDbjNmIINii2LEg2KfbjNmEINin2YYg2qnZiNqI2ogg2LPZudix2YbaryIsCiAgICBqc29uX3N0cmluZzogItis25Ig2KfbjNizINin2Ygg2KfbjNmGINiz2bnYsdmG2q8iLAogICAgZTE2NDogItin24wgMTY0INmG2YXYqNixIiwKICAgIGp3dDogItis25Ig2ojYqNmE24zZiCDZuduMIiwKICAgIHRlbXBsYXRlX2xpdGVyYWw6ICLYp9mGINm+2bkiCiAgfTsKICByZXR1cm4gKGlzc3VlMikgPT4gewogICAgc3dpdGNoIChpc3N1ZTIuY29kZSkgewogICAgICBjYXNlICJpbnZhbGlkX3R5cGUiOgogICAgICAgIHJldHVybiBg2LrZhNi3INin2YYg2b7ZuTogJHtpc3N1ZTIuZXhwZWN0ZWR9INmF2KrZiNmC2Lkg2Kravtin2IwgJHtwYXJzZWRUeXBlNyhpc3N1ZTIuaW5wdXQpfSDZhdmI2LXZiNmEINuB2YjYp2A7CiAgICAgIGNhc2UgImludmFsaWRfdmFsdWUiOgogICAgICAgIGlmIChpc3N1ZTIudmFsdWVzLmxlbmd0aCA9PT0gMSkKICAgICAgICAgIHJldHVybiBg2LrZhNi3INin2YYg2b7ZuTogJHtzdHJpbmdpZnlQcmltaXRpdmUoaXNzdWUyLnZhbHVlc1swXSl9INmF2KrZiNmC2Lkg2KravtinYDsKICAgICAgICByZXR1cm4gYNi62YTYtyDYotm+2LTZhjogJHtqb2luVmFsdWVzKGlzc3VlMi52YWx1ZXMsICJ8Iil9INmF24zauiDYs9uSINin24zaqSDZhdiq2YjZgti5INiq2r7Yp2A7CiAgICAgIGNhc2UgInRvb19iaWciOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI8PSIgOiAiPCI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpCiAgICAgICAgICByZXR1cm4gYNio24HYqiDYqNqR2Kc6ICR7aXNzdWUyLm9yaWdpbiA/PyAi2YjbjNmE24zZiCJ9INqp25IgJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0ID8/ICLYudmG2KfYtdixIn0g24HZiNmG25Ig2YXYqtmI2YLYuSDYqtq+25JgOwogICAgICAgIHJldHVybiBg2KjbgdiqINio2pHYpzogJHtpc3N1ZTIub3JpZ2luID8/ICLZiNuM2YTbjNmIIn0g2qnYpyAke2Fkan0ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9INuB2YjZhtinINmF2KrZiNmC2Lkg2KravtinYDsKICAgICAgfQogICAgICBjYXNlICJ0b29fc21hbGwiOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI+PSIgOiAiPiI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpIHsKICAgICAgICAgIHJldHVybiBg2KjbgdiqINqG2r7ZiNm52Kc6ICR7aXNzdWUyLm9yaWdpbn0g2qnbkiAke2Fkan0ke2lzc3VlMi5taW5pbXVtLnRvU3RyaW5nKCl9ICR7c2l6aW5nLnVuaXR9INuB2YjZhtuSINmF2KrZiNmC2Lkg2KravtuSYDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGDYqNuB2Kog2obavtmI2bnYpzogJHtpc3N1ZTIub3JpZ2lufSDaqdinICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX0g24HZiNmG2Kcg2YXYqtmI2YLYuSDYqtq+2KdgOwogICAgICB9CiAgICAgIGNhc2UgImludmFsaWRfZm9ybWF0IjogewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInN0YXJ0c193aXRoIikgewogICAgICAgICAgcmV0dXJuIGDYutmE2Lcg2LPZudix2YbarzogIiR7X2lzc3VlLnByZWZpeH0iINiz25Ig2LTYsdmI2Lkg24HZiNmG2Kcg2obYp9uB24zbkmA7CiAgICAgICAgfQogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiZW5kc193aXRoIikKICAgICAgICAgIHJldHVybiBg2LrZhNi3INiz2bnYsdmG2q86ICIke19pc3N1ZS5zdWZmaXh9IiDZvtixINiu2KrZhSDbgdmI2YbYpyDahtin24HbjNuSYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImluY2x1ZGVzIikKICAgICAgICAgIHJldHVybiBg2LrZhNi3INiz2bnYsdmG2q86ICIke19pc3N1ZS5pbmNsdWRlc30iINi02KfZhdmEINuB2YjZhtinINqG2KfbgduM25JgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAicmVnZXgiKQogICAgICAgICAgcmV0dXJuIGDYutmE2Lcg2LPZudix2Ybarzog2b7bjNm52LHZhiAke19pc3N1ZS5wYXR0ZXJufSDYs9uSINmF24zahiDbgdmI2YbYpyDahtin24HbjNuSYDsKICAgICAgICByZXR1cm4gYNi62YTYtyAke05vdW5zW19pc3N1ZS5mb3JtYXRdID8/IGlzc3VlMi5mb3JtYXR9YDsKICAgICAgfQogICAgICBjYXNlICJub3RfbXVsdGlwbGVfb2YiOgogICAgICAgIHJldHVybiBg2LrZhNi3INmG2YXYqNixOiAke2lzc3VlMi5kaXZpc29yfSDaqdinINmF2LbYp9i52YEg24HZiNmG2Kcg2obYp9uB24zbkmA7CiAgICAgIGNhc2UgInVucmVjb2duaXplZF9rZXlzIjoKICAgICAgICByZXR1cm4gYNi624zYsSDYqtiz2YTbjNmFINi02K/bgSDaqduMJHtpc3N1ZTIua2V5cy5sZW5ndGggPiAxID8gItiyIiA6ICIifTogJHtqb2luVmFsdWVzKGlzc3VlMi5rZXlzLCAi2IwgIil9YDsKICAgICAgY2FzZSAiaW52YWxpZF9rZXkiOgogICAgICAgIHJldHVybiBgJHtpc3N1ZTIub3JpZ2lufSDZhduM2rog2LrZhNi3INqp24xgOwogICAgICBjYXNlICJpbnZhbGlkX3VuaW9uIjoKICAgICAgICByZXR1cm4gIti62YTYtyDYp9mGINm+2bkiOwogICAgICBjYXNlICJpbnZhbGlkX2VsZW1lbnQiOgogICAgICAgIHJldHVybiBgJHtpc3N1ZTIub3JpZ2lufSDZhduM2rog2LrZhNi3INmI24zZhNuM2YhgOwogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBg2LrZhNi3INin2YYg2b7ZuWA7CiAgICB9CiAgfTsKfTsKZnVuY3Rpb24gdXJfZGVmYXVsdCgpIHsKICByZXR1cm4gewogICAgbG9jYWxlRXJyb3I6IGVycm9yNDAoKQogIH07Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvbG9jYWxlcy92aS5qcwp2YXIgZXJyb3I0MSA9ICgpID0+IHsKICBjb25zdCBTaXphYmxlID0gewogICAgc3RyaW5nOiB7IHVuaXQ6ICJrw70gdOG7sSIsIHZlcmI6ICJjw7MiIH0sCiAgICBmaWxlOiB7IHVuaXQ6ICJieXRlIiwgdmVyYjogImPDsyIgfSwKICAgIGFycmF5OiB7IHVuaXQ6ICJwaOG6p24gdOG7rSIsIHZlcmI6ICJjw7MiIH0sCiAgICBzZXQ6IHsgdW5pdDogInBo4bqnbiB04butIiwgdmVyYjogImPDsyIgfQogIH07CiAgZnVuY3Rpb24gZ2V0U2l6aW5nKG9yaWdpbikgewogICAgcmV0dXJuIFNpemFibGVbb3JpZ2luXSA/PyBudWxsOwogIH0KICBjb25zdCBwYXJzZWRUeXBlNyA9IChkYXRhKSA9PiB7CiAgICBjb25zdCB0ID0gdHlwZW9mIGRhdGE7CiAgICBzd2l0Y2ggKHQpIHsKICAgICAgY2FzZSAibnVtYmVyIjogewogICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0YSkgPyAiTmFOIiA6ICJz4buRIjsKICAgICAgfQogICAgICBjYXNlICJvYmplY3QiOiB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHsKICAgICAgICAgIHJldHVybiAibeG6o25nIjsKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHsKICAgICAgICAgIHJldHVybiAibnVsbCI7CiAgICAgICAgfQogICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZGF0YSkgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgZGF0YS5jb25zdHJ1Y3RvcikgewogICAgICAgICAgcmV0dXJuIGRhdGEuY29uc3RydWN0b3IubmFtZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0OwogIH07CiAgY29uc3QgTm91bnMgPSB7CiAgICByZWdleDogIsSR4bqndSB2w6BvIiwKICAgIGVtYWlsOiAixJHhu4thIGNo4buJIGVtYWlsIiwKICAgIHVybDogIlVSTCIsCiAgICBlbW9qaTogImVtb2ppIiwKICAgIHV1aWQ6ICJVVUlEIiwKICAgIHV1aWR2NDogIlVVSUR2NCIsCiAgICB1dWlkdjY6ICJVVUlEdjYiLAogICAgbmFub2lkOiAibmFub2lkIiwKICAgIGd1aWQ6ICJHVUlEIiwKICAgIGN1aWQ6ICJjdWlkIiwKICAgIGN1aWQyOiAiY3VpZDIiLAogICAgdWxpZDogIlVMSUQiLAogICAgeGlkOiAiWElEIiwKICAgIGtzdWlkOiAiS1NVSUQiLAogICAgZGF0ZXRpbWU6ICJuZ8OgeSBnaeG7nSBJU08iLAogICAgZGF0ZTogIm5nw6B5IElTTyIsCiAgICB0aW1lOiAiZ2nhu50gSVNPIiwKICAgIGR1cmF0aW9uOiAia2hv4bqjbmcgdGjhu51pIGdpYW4gSVNPIiwKICAgIGlwdjQ6ICLEkeG7i2EgY2jhu4kgSVB2NCIsCiAgICBpcHY2OiAixJHhu4thIGNo4buJIElQdjYiLAogICAgY2lkcnY0OiAiZOG6o2kgSVB2NCIsCiAgICBjaWRydjY6ICJk4bqjaSBJUHY2IiwKICAgIGJhc2U2NDogImNodeG7l2kgbcOjIGjDs2EgYmFzZTY0IiwKICAgIGJhc2U2NHVybDogImNodeG7l2kgbcOjIGjDs2EgYmFzZTY0dXJsIiwKICAgIGpzb25fc3RyaW5nOiAiY2h14buXaSBKU09OIiwKICAgIGUxNjQ6ICJz4buRIEUuMTY0IiwKICAgIGp3dDogIkpXVCIsCiAgICB0ZW1wbGF0ZV9saXRlcmFsOiAixJHhuqd1IHbDoG8iCiAgfTsKICByZXR1cm4gKGlzc3VlMikgPT4gewogICAgc3dpdGNoIChpc3N1ZTIuY29kZSkgewogICAgICBjYXNlICJpbnZhbGlkX3R5cGUiOgogICAgICAgIHJldHVybiBgxJDhuqd1IHbDoG8ga2jDtG5nIGjhu6NwIGzhu4c6IG1vbmcgxJHhu6NpICR7aXNzdWUyLmV4cGVjdGVkfSwgbmjhuq1uIMSRxrDhu6NjICR7cGFyc2VkVHlwZTcoaXNzdWUyLmlucHV0KX1gOwogICAgICBjYXNlICJpbnZhbGlkX3ZhbHVlIjoKICAgICAgICBpZiAoaXNzdWUyLnZhbHVlcy5sZW5ndGggPT09IDEpCiAgICAgICAgICByZXR1cm4gYMSQ4bqndSB2w6BvIGtow7RuZyBo4bujcCBs4buHOiBtb25nIMSR4bujaSAke3N0cmluZ2lmeVByaW1pdGl2ZShpc3N1ZTIudmFsdWVzWzBdKX1gOwogICAgICAgIHJldHVybiBgVMO5eSBjaOG7jW4ga2jDtG5nIGjhu6NwIGzhu4c6IG1vbmcgxJHhu6NpIG3hu5l0IHRyb25nIGPDoWMgZ2nDoSB0cuG7iyAke2pvaW5WYWx1ZXMoaXNzdWUyLnZhbHVlcywgInwiKX1gOwogICAgICBjYXNlICJ0b29fYmlnIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPD0iIDogIjwiOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKQogICAgICAgICAgcmV0dXJuIGBRdcOhIGzhu5tuOiBtb25nIMSR4bujaSAke2lzc3VlMi5vcmlnaW4gPz8gImdpw6EgdHLhu4sifSAke3NpemluZy52ZXJifSAke2Fkan0ke2lzc3VlMi5tYXhpbXVtLnRvU3RyaW5nKCl9ICR7c2l6aW5nLnVuaXQgPz8gInBo4bqnbiB04butIn1gOwogICAgICAgIHJldHVybiBgUXXDoSBs4bubbjogbW9uZyDEkeG7o2kgJHtpc3N1ZTIub3JpZ2luID8/ICJnacOhIHRy4buLIn0gJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfWA7CiAgICAgIH0KICAgICAgY2FzZSAidG9vX3NtYWxsIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPj0iIDogIj4iOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKSB7CiAgICAgICAgICByZXR1cm4gYFF1w6Egbmjhu486IG1vbmcgxJHhu6NpICR7aXNzdWUyLm9yaWdpbn0gJHtzaXppbmcudmVyYn0gJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0fWA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBgUXXDoSBuaOG7jzogbW9uZyDEkeG7o2kgJHtpc3N1ZTIub3JpZ2lufSAke2Fkan0ke2lzc3VlMi5taW5pbXVtLnRvU3RyaW5nKCl9YDsKICAgICAgfQogICAgICBjYXNlICJpbnZhbGlkX2Zvcm1hdCI6IHsKICAgICAgICBjb25zdCBfaXNzdWUgPSBpc3N1ZTI7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJzdGFydHNfd2l0aCIpCiAgICAgICAgICByZXR1cm4gYENodeG7l2kga2jDtG5nIGjhu6NwIGzhu4c6IHBo4bqjaSBi4bqvdCDEkeG6p3UgYuG6sW5nICIke19pc3N1ZS5wcmVmaXh9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJlbmRzX3dpdGgiKQogICAgICAgICAgcmV0dXJuIGBDaHXhu5dpIGtow7RuZyBo4bujcCBs4buHOiBwaOG6o2kga+G6v3QgdGjDumMgYuG6sW5nICIke19pc3N1ZS5zdWZmaXh9ImA7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJpbmNsdWRlcyIpCiAgICAgICAgICByZXR1cm4gYENodeG7l2kga2jDtG5nIGjhu6NwIGzhu4c6IHBo4bqjaSBiYW8gZ+G7k20gIiR7X2lzc3VlLmluY2x1ZGVzfSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAicmVnZXgiKQogICAgICAgICAgcmV0dXJuIGBDaHXhu5dpIGtow7RuZyBo4bujcCBs4buHOiBwaOG6o2kga2jhu5twIHbhu5tpIG3huqt1ICR7X2lzc3VlLnBhdHRlcm59YDsKICAgICAgICByZXR1cm4gYCR7Tm91bnNbX2lzc3VlLmZvcm1hdF0gPz8gaXNzdWUyLmZvcm1hdH0ga2jDtG5nIGjhu6NwIGzhu4dgOwogICAgICB9CiAgICAgIGNhc2UgIm5vdF9tdWx0aXBsZV9vZiI6CiAgICAgICAgcmV0dXJuIGBT4buRIGtow7RuZyBo4bujcCBs4buHOiBwaOG6o2kgbMOgIGLhu5lpIHPhu5EgY+G7p2EgJHtpc3N1ZTIuZGl2aXNvcn1gOwogICAgICBjYXNlICJ1bnJlY29nbml6ZWRfa2V5cyI6CiAgICAgICAgcmV0dXJuIGBLaMOzYSBraMO0bmcgxJHGsOG7o2Mgbmjhuq1uIGThuqFuZzogJHtqb2luVmFsdWVzKGlzc3VlMi5rZXlzLCAiLCAiKX1gOwogICAgICBjYXNlICJpbnZhbGlkX2tleSI6CiAgICAgICAgcmV0dXJuIGBLaMOzYSBraMO0bmcgaOG7o3AgbOG7hyB0cm9uZyAke2lzc3VlMi5vcmlnaW59YDsKICAgICAgY2FzZSAiaW52YWxpZF91bmlvbiI6CiAgICAgICAgcmV0dXJuICLEkOG6p3UgdsOgbyBraMO0bmcgaOG7o3AgbOG7hyI7CiAgICAgIGNhc2UgImludmFsaWRfZWxlbWVudCI6CiAgICAgICAgcmV0dXJuIGBHacOhIHRy4buLIGtow7RuZyBo4bujcCBs4buHIHRyb25nICR7aXNzdWUyLm9yaWdpbn1gOwogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBgxJDhuqd1IHbDoG8ga2jDtG5nIGjhu6NwIGzhu4dgOwogICAgfQogIH07Cn07CmZ1bmN0aW9uIHZpX2RlZmF1bHQoKSB7CiAgcmV0dXJuIHsKICAgIGxvY2FsZUVycm9yOiBlcnJvcjQxKCkKICB9Owp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2xvY2FsZXMvemgtQ04uanMKdmFyIGVycm9yNDIgPSAoKSA9PiB7CiAgY29uc3QgU2l6YWJsZSA9IHsKICAgIHN0cmluZzogeyB1bml0OiAi5a2X56ymIiwgdmVyYjogIuWMheWQqyIgfSwKICAgIGZpbGU6IHsgdW5pdDogIuWtl+iKgiIsIHZlcmI6ICLljIXlkKsiIH0sCiAgICBhcnJheTogeyB1bml0OiAi6aG5IiwgdmVyYjogIuWMheWQqyIgfSwKICAgIHNldDogeyB1bml0OiAi6aG5IiwgdmVyYjogIuWMheWQqyIgfQogIH07CiAgZnVuY3Rpb24gZ2V0U2l6aW5nKG9yaWdpbikgewogICAgcmV0dXJuIFNpemFibGVbb3JpZ2luXSA/PyBudWxsOwogIH0KICBjb25zdCBwYXJzZWRUeXBlNyA9IChkYXRhKSA9PiB7CiAgICBjb25zdCB0ID0gdHlwZW9mIGRhdGE7CiAgICBzd2l0Y2ggKHQpIHsKICAgICAgY2FzZSAibnVtYmVyIjogewogICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0YSkgPyAi6Z2e5pWw5a2XKE5hTikiIDogIuaVsOWtlyI7CiAgICAgIH0KICAgICAgY2FzZSAib2JqZWN0IjogewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgICAgICByZXR1cm4gIuaVsOe7hCI7CiAgICAgICAgfQogICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gIuepuuWAvChudWxsKSI7CiAgICAgICAgfQogICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZGF0YSkgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgZGF0YS5jb25zdHJ1Y3RvcikgewogICAgICAgICAgcmV0dXJuIGRhdGEuY29uc3RydWN0b3IubmFtZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0OwogIH07CiAgY29uc3QgTm91bnMgPSB7CiAgICByZWdleDogIui+k+WFpSIsCiAgICBlbWFpbDogIueUteWtkOmCruS7tiIsCiAgICB1cmw6ICJVUkwiLAogICAgZW1vamk6ICLooajmg4XnrKblj7ciLAogICAgdXVpZDogIlVVSUQiLAogICAgdXVpZHY0OiAiVVVJRHY0IiwKICAgIHV1aWR2NjogIlVVSUR2NiIsCiAgICBuYW5vaWQ6ICJuYW5vaWQiLAogICAgZ3VpZDogIkdVSUQiLAogICAgY3VpZDogImN1aWQiLAogICAgY3VpZDI6ICJjdWlkMiIsCiAgICB1bGlkOiAiVUxJRCIsCiAgICB4aWQ6ICJYSUQiLAogICAga3N1aWQ6ICJLU1VJRCIsCiAgICBkYXRldGltZTogIklTT+aXpeacn+aXtumXtCIsCiAgICBkYXRlOiAiSVNP5pel5pyfIiwKICAgIHRpbWU6ICJJU0/ml7bpl7QiLAogICAgZHVyYXRpb246ICJJU0/ml7bplb8iLAogICAgaXB2NDogIklQdjTlnLDlnYAiLAogICAgaXB2NjogIklQdjblnLDlnYAiLAogICAgY2lkcnY0OiAiSVB2NOe9keautSIsCiAgICBjaWRydjY6ICJJUHY2572R5q61IiwKICAgIGJhc2U2NDogImJhc2U2NOe8lueggeWtl+espuS4siIsCiAgICBiYXNlNjR1cmw6ICJiYXNlNjR1cmznvJbnoIHlrZfnrKbkuLIiLAogICAganNvbl9zdHJpbmc6ICJKU09O5a2X56ym5LiyIiwKICAgIGUxNjQ6ICJFLjE2NOWPt+eggSIsCiAgICBqd3Q6ICJKV1QiLAogICAgdGVtcGxhdGVfbGl0ZXJhbDogIui+k+WFpSIKICB9OwogIHJldHVybiAoaXNzdWUyKSA9PiB7CiAgICBzd2l0Y2ggKGlzc3VlMi5jb2RlKSB7CiAgICAgIGNhc2UgImludmFsaWRfdHlwZSI6CiAgICAgICAgcmV0dXJuIGDml6DmlYjovpPlhaXvvJrmnJ/mnJsgJHtpc3N1ZTIuZXhwZWN0ZWR977yM5a6e6ZmF5o6l5pS2ICR7cGFyc2VkVHlwZTcoaXNzdWUyLmlucHV0KX1gOwogICAgICBjYXNlICJpbnZhbGlkX3ZhbHVlIjoKICAgICAgICBpZiAoaXNzdWUyLnZhbHVlcy5sZW5ndGggPT09IDEpCiAgICAgICAgICByZXR1cm4gYOaXoOaViOi+k+WFpe+8muacn+acmyAke3N0cmluZ2lmeVByaW1pdGl2ZShpc3N1ZTIudmFsdWVzWzBdKX1gOwogICAgICAgIHJldHVybiBg5peg5pWI6YCJ6aG577ya5pyf5pyb5Lul5LiL5LmL5LiAICR7am9pblZhbHVlcyhpc3N1ZTIudmFsdWVzLCAifCIpfWA7CiAgICAgIGNhc2UgInRvb19iaWciOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI8PSIgOiAiPCI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpCiAgICAgICAgICByZXR1cm4gYOaVsOWAvOi/h+Wkp++8muacn+acmyAke2lzc3VlMi5vcmlnaW4gPz8gIuWAvCJ9ICR7YWRqfSR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdCA/PyAi5Liq5YWD57SgIn1gOwogICAgICAgIHJldHVybiBg5pWw5YC86L+H5aSn77ya5pyf5pybICR7aXNzdWUyLm9yaWdpbiA/PyAi5YC8In0gJHthZGp9JHtpc3N1ZTIubWF4aW11bS50b1N0cmluZygpfWA7CiAgICAgIH0KICAgICAgY2FzZSAidG9vX3NtYWxsIjogewogICAgICAgIGNvbnN0IGFkaiA9IGlzc3VlMi5pbmNsdXNpdmUgPyAiPj0iIDogIj4iOwogICAgICAgIGNvbnN0IHNpemluZyA9IGdldFNpemluZyhpc3N1ZTIub3JpZ2luKTsKICAgICAgICBpZiAoc2l6aW5nKSB7CiAgICAgICAgICByZXR1cm4gYOaVsOWAvOi/h+Wwj++8muacn+acmyAke2lzc3VlMi5vcmlnaW59ICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdH1gOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYOaVsOWAvOi/h+Wwj++8muacn+acmyAke2lzc3VlMi5vcmlnaW59ICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgImludmFsaWRfZm9ybWF0IjogewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInN0YXJ0c193aXRoIikKICAgICAgICAgIHJldHVybiBg5peg5pWI5a2X56ym5Liy77ya5b+F6aG75LulICIke19pc3N1ZS5wcmVmaXh9IiDlvIDlpLRgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiZW5kc193aXRoIikKICAgICAgICAgIHJldHVybiBg5peg5pWI5a2X56ym5Liy77ya5b+F6aG75LulICIke19pc3N1ZS5zdWZmaXh9IiDnu5PlsL5gOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiaW5jbHVkZXMiKQogICAgICAgICAgcmV0dXJuIGDml6DmlYjlrZfnrKbkuLLvvJrlv4XpobvljIXlkKsgIiR7X2lzc3VlLmluY2x1ZGVzfSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAicmVnZXgiKQogICAgICAgICAgcmV0dXJuIGDml6DmlYjlrZfnrKbkuLLvvJrlv4Xpobvmu6HotrPmraPliJnooajovr7lvI8gJHtfaXNzdWUucGF0dGVybn1gOwogICAgICAgIHJldHVybiBg5peg5pWIJHtOb3Vuc1tfaXNzdWUuZm9ybWF0XSA/PyBpc3N1ZTIuZm9ybWF0fWA7CiAgICAgIH0KICAgICAgY2FzZSAibm90X211bHRpcGxlX29mIjoKICAgICAgICByZXR1cm4gYOaXoOaViOaVsOWtl++8muW/hemhu+aYryAke2lzc3VlMi5kaXZpc29yfSDnmoTlgI3mlbBgOwogICAgICBjYXNlICJ1bnJlY29nbml6ZWRfa2V5cyI6CiAgICAgICAgcmV0dXJuIGDlh7rnjrDmnKrnn6XnmoTplK4oa2V5KTogJHtqb2luVmFsdWVzKGlzc3VlMi5rZXlzLCAiLCAiKX1gOwogICAgICBjYXNlICJpbnZhbGlkX2tleSI6CiAgICAgICAgcmV0dXJuIGAke2lzc3VlMi5vcmlnaW59IOS4reeahOmUrihrZXkp5peg5pWIYDsKICAgICAgY2FzZSAiaW52YWxpZF91bmlvbiI6CiAgICAgICAgcmV0dXJuICLml6DmlYjovpPlhaUiOwogICAgICBjYXNlICJpbnZhbGlkX2VsZW1lbnQiOgogICAgICAgIHJldHVybiBgJHtpc3N1ZTIub3JpZ2lufSDkuK3ljIXlkKvml6DmlYjlgLwodmFsdWUpYDsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gYOaXoOaViOi+k+WFpWA7CiAgICB9CiAgfTsKfTsKZnVuY3Rpb24gemhfQ05fZGVmYXVsdCgpIHsKICByZXR1cm4gewogICAgbG9jYWxlRXJyb3I6IGVycm9yNDIoKQogIH07Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvbG9jYWxlcy96aC1UVy5qcwp2YXIgZXJyb3I0MyA9ICgpID0+IHsKICBjb25zdCBTaXphYmxlID0gewogICAgc3RyaW5nOiB7IHVuaXQ6ICLlrZflhYMiLCB2ZXJiOiAi5pOB5pyJIiB9LAogICAgZmlsZTogeyB1bml0OiAi5L2N5YWD57WEIiwgdmVyYjogIuaTgeaciSIgfSwKICAgIGFycmF5OiB7IHVuaXQ6ICLpoIXnm64iLCB2ZXJiOiAi5pOB5pyJIiB9LAogICAgc2V0OiB7IHVuaXQ6ICLpoIXnm64iLCB2ZXJiOiAi5pOB5pyJIiB9CiAgfTsKICBmdW5jdGlvbiBnZXRTaXppbmcob3JpZ2luKSB7CiAgICByZXR1cm4gU2l6YWJsZVtvcmlnaW5dID8/IG51bGw7CiAgfQogIGNvbnN0IHBhcnNlZFR5cGU3ID0gKGRhdGEpID0+IHsKICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTsKICAgIHN3aXRjaCAodCkgewogICAgICBjYXNlICJudW1iZXIiOiB7CiAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/ICJOYU4iIDogIm51bWJlciI7CiAgICAgIH0KICAgICAgY2FzZSAib2JqZWN0IjogewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgICAgICByZXR1cm4gImFycmF5IjsKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHsKICAgICAgICAgIHJldHVybiAibnVsbCI7CiAgICAgICAgfQogICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZGF0YSkgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgZGF0YS5jb25zdHJ1Y3RvcikgewogICAgICAgICAgcmV0dXJuIGRhdGEuY29uc3RydWN0b3IubmFtZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0OwogIH07CiAgY29uc3QgTm91bnMgPSB7CiAgICByZWdleDogIui8uOWFpSIsCiAgICBlbWFpbDogIumDteS7tuWcsOWdgCIsCiAgICB1cmw6ICJVUkwiLAogICAgZW1vamk6ICJlbW9qaSIsCiAgICB1dWlkOiAiVVVJRCIsCiAgICB1dWlkdjQ6ICJVVUlEdjQiLAogICAgdXVpZHY2OiAiVVVJRHY2IiwKICAgIG5hbm9pZDogIm5hbm9pZCIsCiAgICBndWlkOiAiR1VJRCIsCiAgICBjdWlkOiAiY3VpZCIsCiAgICBjdWlkMjogImN1aWQyIiwKICAgIHVsaWQ6ICJVTElEIiwKICAgIHhpZDogIlhJRCIsCiAgICBrc3VpZDogIktTVUlEIiwKICAgIGRhdGV0aW1lOiAiSVNPIOaXpeacn+aZgumWkyIsCiAgICBkYXRlOiAiSVNPIOaXpeacnyIsCiAgICB0aW1lOiAiSVNPIOaZgumWkyIsCiAgICBkdXJhdGlvbjogIklTTyDmnJ/plpMiLAogICAgaXB2NDogIklQdjQg5L2N5Z2AIiwKICAgIGlwdjY6ICJJUHY2IOS9jeWdgCIsCiAgICBjaWRydjQ6ICJJUHY0IOevhOWcjSIsCiAgICBjaWRydjY6ICJJUHY2IOevhOWcjSIsCiAgICBiYXNlNjQ6ICJiYXNlNjQg57eo56K85a2X5LiyIiwKICAgIGJhc2U2NHVybDogImJhc2U2NHVybCDnt6jnorzlrZfkuLIiLAogICAganNvbl9zdHJpbmc6ICJKU09OIOWtl+S4siIsCiAgICBlMTY0OiAiRS4xNjQg5pW45YC8IiwKICAgIGp3dDogIkpXVCIsCiAgICB0ZW1wbGF0ZV9saXRlcmFsOiAi6Ly45YWlIgogIH07CiAgcmV0dXJuIChpc3N1ZTIpID0+IHsKICAgIHN3aXRjaCAoaXNzdWUyLmNvZGUpIHsKICAgICAgY2FzZSAiaW52YWxpZF90eXBlIjoKICAgICAgICByZXR1cm4gYOeEoeaViOeahOi8uOWFpeWAvO+8mumgkOacn+eCuiAke2lzc3VlMi5leHBlY3RlZH3vvIzkvYbmlLbliLAgJHtwYXJzZWRUeXBlNyhpc3N1ZTIuaW5wdXQpfWA7CiAgICAgIGNhc2UgImludmFsaWRfdmFsdWUiOgogICAgICAgIGlmIChpc3N1ZTIudmFsdWVzLmxlbmd0aCA9PT0gMSkKICAgICAgICAgIHJldHVybiBg54Sh5pWI55qE6Ly45YWl5YC877ya6aCQ5pyf54K6ICR7c3RyaW5naWZ5UHJpbWl0aXZlKGlzc3VlMi52YWx1ZXNbMF0pfWA7CiAgICAgICAgcmV0dXJuIGDnhKHmlYjnmoTpgbjpoIXvvJrpoJDmnJ/ngrrku6XkuIvlhbbkuK3kuYvkuIAgJHtqb2luVmFsdWVzKGlzc3VlMi52YWx1ZXMsICJ8Iil9YDsKICAgICAgY2FzZSAidG9vX2JpZyI6IHsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIjw9IiA6ICI8IjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykKICAgICAgICAgIHJldHVybiBg5pW45YC86YGO5aSn77ya6aCQ5pyfICR7aXNzdWUyLm9yaWdpbiA/PyAi5YC8In0g5oeJ54K6ICR7YWRqfSR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX0gJHtzaXppbmcudW5pdCA/PyAi5YCL5YWD57SgIn1gOwogICAgICAgIHJldHVybiBg5pW45YC86YGO5aSn77ya6aCQ5pyfICR7aXNzdWUyLm9yaWdpbiA/PyAi5YC8In0g5oeJ54K6ICR7YWRqfSR7aXNzdWUyLm1heGltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgInRvb19zbWFsbCI6IHsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIj49IiA6ICI+IjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykgewogICAgICAgICAgcmV0dXJuIGDmlbjlgLzpgY7lsI/vvJrpoJDmnJ8gJHtpc3N1ZTIub3JpZ2lufSDmh4nngrogJHthZGp9JHtpc3N1ZTIubWluaW11bS50b1N0cmluZygpfSAke3NpemluZy51bml0fWA7CiAgICAgICAgfQogICAgICAgIHJldHVybiBg5pW45YC86YGO5bCP77ya6aCQ5pyfICR7aXNzdWUyLm9yaWdpbn0g5oeJ54K6ICR7YWRqfSR7aXNzdWUyLm1pbmltdW0udG9TdHJpbmcoKX1gOwogICAgICB9CiAgICAgIGNhc2UgImludmFsaWRfZm9ybWF0IjogewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gInN0YXJ0c193aXRoIikgewogICAgICAgICAgcmV0dXJuIGDnhKHmlYjnmoTlrZfkuLLvvJrlv4XpoIjku6UgIiR7X2lzc3VlLnByZWZpeH0iIOmWi+mgrWA7CiAgICAgICAgfQogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiZW5kc193aXRoIikKICAgICAgICAgIHJldHVybiBg54Sh5pWI55qE5a2X5Liy77ya5b+F6aCI5LulICIke19pc3N1ZS5zdWZmaXh9IiDntZDlsL5gOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiaW5jbHVkZXMiKQogICAgICAgICAgcmV0dXJuIGDnhKHmlYjnmoTlrZfkuLLvvJrlv4XpoIjljIXlkKsgIiR7X2lzc3VlLmluY2x1ZGVzfSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAicmVnZXgiKQogICAgICAgICAgcmV0dXJuIGDnhKHmlYjnmoTlrZfkuLLvvJrlv4XpoIjnrKblkIjmoLzlvI8gJHtfaXNzdWUucGF0dGVybn1gOwogICAgICAgIHJldHVybiBg54Sh5pWI55qEICR7Tm91bnNbX2lzc3VlLmZvcm1hdF0gPz8gaXNzdWUyLmZvcm1hdH1gOwogICAgICB9CiAgICAgIGNhc2UgIm5vdF9tdWx0aXBsZV9vZiI6CiAgICAgICAgcmV0dXJuIGDnhKHmlYjnmoTmlbjlrZfvvJrlv4XpoIjngrogJHtpc3N1ZTIuZGl2aXNvcn0g55qE5YCN5pW4YDsKICAgICAgY2FzZSAidW5yZWNvZ25pemVkX2tleXMiOgogICAgICAgIHJldHVybiBg54Sh5rOV6K2Y5Yil55qE6Y215YC8JHtpc3N1ZTIua2V5cy5sZW5ndGggPiAxID8gIuWAkSIgOiAiIn3vvJoke2pvaW5WYWx1ZXMoaXNzdWUyLmtleXMsICLjgIEiKX1gOwogICAgICBjYXNlICJpbnZhbGlkX2tleSI6CiAgICAgICAgcmV0dXJuIGAke2lzc3VlMi5vcmlnaW59IOS4reacieeEoeaViOeahOmNteWAvGA7CiAgICAgIGNhc2UgImludmFsaWRfdW5pb24iOgogICAgICAgIHJldHVybiAi54Sh5pWI55qE6Ly45YWl5YC8IjsKICAgICAgY2FzZSAiaW52YWxpZF9lbGVtZW50IjoKICAgICAgICByZXR1cm4gYCR7aXNzdWUyLm9yaWdpbn0g5Lit5pyJ54Sh5pWI55qE5YC8YDsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gYOeEoeaViOeahOi8uOWFpeWAvGA7CiAgICB9CiAgfTsKfTsKZnVuY3Rpb24gemhfVFdfZGVmYXVsdCgpIHsKICByZXR1cm4gewogICAgbG9jYWxlRXJyb3I6IGVycm9yNDMoKQogIH07Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvbG9jYWxlcy95by5qcwp2YXIgZXJyb3I0NCA9ICgpID0+IHsKICBjb25zdCBTaXphYmxlID0gewogICAgc3RyaW5nOiB7IHVuaXQ6ICLDoG1pIiwgdmVyYjogIm7DrSIgfSwKICAgIGZpbGU6IHsgdW5pdDogImJ5dGVzIiwgdmVyYjogIm7DrSIgfSwKICAgIGFycmF5OiB7IHVuaXQ6ICJua2FuIiwgdmVyYjogIm7DrSIgfSwKICAgIHNldDogeyB1bml0OiAibmthbiIsIHZlcmI6ICJuw60iIH0KICB9OwogIGZ1bmN0aW9uIGdldFNpemluZyhvcmlnaW4pIHsKICAgIHJldHVybiBTaXphYmxlW29yaWdpbl0gPz8gbnVsbDsKICB9CiAgY29uc3QgcGFyc2VkVHlwZTcgPSAoZGF0YSkgPT4gewogICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhOwogICAgc3dpdGNoICh0KSB7CiAgICAgIGNhc2UgIm51bWJlciI6IHsKICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gIk5hTiIgOiAibuG7jcyBbWLDoCI7CiAgICAgIH0KICAgICAgY2FzZSAib2JqZWN0IjogewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7CiAgICAgICAgICByZXR1cm4gImFrb3Dhu40iOwogICAgICAgIH0KICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuICJudWxsIjsKICAgICAgICB9CiAgICAgICAgaWYgKE9iamVjdC5nZXRQcm90b3R5cGVPZihkYXRhKSAhPT0gT2JqZWN0LnByb3RvdHlwZSAmJiBkYXRhLmNvbnN0cnVjdG9yKSB7CiAgICAgICAgICByZXR1cm4gZGF0YS5jb25zdHJ1Y3Rvci5uYW1lOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHQ7CiAgfTsKICBjb25zdCBOb3VucyA9IHsKICAgIHJlZ2V4OiAi4bq5zIBy4buNIMOsYsOhd+G7jWzDqSIsCiAgICBlbWFpbDogIsOgZMOtcuG6ucyBc8OsIMOsbeG6ucyBbMOsIiwKICAgIHVybDogIlVSTCIsCiAgICBlbW9qaTogImVtb2ppIiwKICAgIHV1aWQ6ICJVVUlEIiwKICAgIHV1aWR2NDogIlVVSUR2NCIsCiAgICB1dWlkdjY6ICJVVUlEdjYiLAogICAgbmFub2lkOiAibmFub2lkIiwKICAgIGd1aWQ6ICJHVUlEIiwKICAgIGN1aWQ6ICJjdWlkIiwKICAgIGN1aWQyOiAiY3VpZDIiLAogICAgdWxpZDogIlVMSUQiLAogICAgeGlkOiAiWElEIiwKICAgIGtzdWlkOiAiS1NVSUQiLAogICAgZGF0ZXRpbWU6ICLDoGvDs2vDsiBJU08iLAogICAgZGF0ZTogIuG7jWrhu43MgSBJU08iLAogICAgdGltZTogIsOga8Oza8OyIElTTyIsCiAgICBkdXJhdGlvbjogIsOga8Oza8OyIHTDsyBww6kgSVNPIiwKICAgIGlwdjQ6ICLDoGTDrXLhurnMgXPDrCBJUHY0IiwKICAgIGlwdjY6ICLDoGTDrXLhurnMgXPDrCBJUHY2IiwKICAgIGNpZHJ2NDogIsOgZ2LDqGdiw6ggSVB2NCIsCiAgICBjaWRydjY6ICLDoGdiw6hnYsOoIElQdjYiLAogICAgYmFzZTY0OiAi4buNzIBy4buNzIAgdMOtIGEga+G7jcyBIG7DrSBiYXNlNjQiLAogICAgYmFzZTY0dXJsOiAi4buNzIBy4buNzIAgYmFzZTY0dXJsIiwKICAgIGpzb25fc3RyaW5nOiAi4buNzIBy4buNzIAgSlNPTiIsCiAgICBlMTY0OiAibuG7jcyBbWLDoCBFLjE2NCIsCiAgICBqd3Q6ICJKV1QiLAogICAgdGVtcGxhdGVfbGl0ZXJhbDogIuG6ucyAcuG7jSDDrGLDoXfhu41sw6kiCiAgfTsKICByZXR1cm4gKGlzc3VlMikgPT4gewogICAgc3dpdGNoIChpc3N1ZTIuY29kZSkgewogICAgICBjYXNlICJpbnZhbGlkX3R5cGUiOgogICAgICAgIHJldHVybiBgw4xiw6F34buNbMOpIGHhuaPDrOG5o2U6IGEgbsOtIGzDoXRpIGZpICR7aXNzdWUyLmV4cGVjdGVkfSwgw6Bt4buNzIAgYSByw60gJHtwYXJzZWRUeXBlNyhpc3N1ZTIuaW5wdXQpfWA7CiAgICAgIGNhc2UgImludmFsaWRfdmFsdWUiOgogICAgICAgIGlmIChpc3N1ZTIudmFsdWVzLmxlbmd0aCA9PT0gMSkKICAgICAgICAgIHJldHVybiBgw4xiw6F34buNbMOpIGHhuaPDrOG5o2U6IGEgbsOtIGzDoXRpIGZpICR7c3RyaW5naWZ5UHJpbWl0aXZlKGlzc3VlMi52YWx1ZXNbMF0pfWA7CiAgICAgICAgcmV0dXJuIGDDgOG5o8OgecOgbiBh4bmjw6zhuaNlOiB5YW4g4buNzIBrYW4gbMOhcmEgJHtqb2luVmFsdWVzKGlzc3VlMi52YWx1ZXMsICJ8Iil9YDsKICAgICAgY2FzZSAidG9vX2JpZyI6IHsKICAgICAgICBjb25zdCBhZGogPSBpc3N1ZTIuaW5jbHVzaXZlID8gIjw9IiA6ICI8IjsKICAgICAgICBjb25zdCBzaXppbmcgPSBnZXRTaXppbmcoaXNzdWUyLm9yaWdpbik7CiAgICAgICAgaWYgKHNpemluZykKICAgICAgICAgIHJldHVybiBgVMOzIHDhu43MgCBqw7k6IGEgbsOtIGzDoXRpIGrhurnMgSBww6kgJHtpc3N1ZTIub3JpZ2luID8/ICJpeWUifSAke3NpemluZy52ZXJifSAke2Fkan0ke2lzc3VlMi5tYXhpbXVtfSAke3NpemluZy51bml0fWA7CiAgICAgICAgcmV0dXJuIGBUw7MgcOG7jcyAIGrDuTogYSBuw60gbMOhdGkgauG6ucyBICR7YWRqfSR7aXNzdWUyLm1heGltdW19YDsKICAgICAgfQogICAgICBjYXNlICJ0b29fc21hbGwiOiB7CiAgICAgICAgY29uc3QgYWRqID0gaXNzdWUyLmluY2x1c2l2ZSA/ICI+PSIgOiAiPiI7CiAgICAgICAgY29uc3Qgc2l6aW5nID0gZ2V0U2l6aW5nKGlzc3VlMi5vcmlnaW4pOwogICAgICAgIGlmIChzaXppbmcpCiAgICAgICAgICByZXR1cm4gYEvDqXLDqSBqdTogYSBuw60gbMOhdGkgauG6ucyBIHDDqSAke2lzc3VlMi5vcmlnaW59ICR7c2l6aW5nLnZlcmJ9ICR7YWRqfSR7aXNzdWUyLm1pbmltdW19ICR7c2l6aW5nLnVuaXR9YDsKICAgICAgICByZXR1cm4gYEvDqXLDqSBqdTogYSBuw60gbMOhdGkgauG6ucyBICR7YWRqfSR7aXNzdWUyLm1pbmltdW19YDsKICAgICAgfQogICAgICBjYXNlICJpbnZhbGlkX2Zvcm1hdCI6IHsKICAgICAgICBjb25zdCBfaXNzdWUgPSBpc3N1ZTI7CiAgICAgICAgaWYgKF9pc3N1ZS5mb3JtYXQgPT09ICJzdGFydHNfd2l0aCIpCiAgICAgICAgICByZXR1cm4gYOG7jMyAcuG7jcyAIGHhuaPDrOG5o2U6IGdi4buNzIFk4buNzIAgYuG6ucyAcuG6ucyAIHDhurnMgGzDuiAiJHtfaXNzdWUucHJlZml4fSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAiZW5kc193aXRoIikKICAgICAgICAgIHJldHVybiBg4buMzIBy4buNzIAgYeG5o8Os4bmjZTogZ2Lhu43MgWThu43MgCBwYXLDrSBw4bq5zIBsw7ogIiR7X2lzc3VlLnN1ZmZpeH0iYDsKICAgICAgICBpZiAoX2lzc3VlLmZvcm1hdCA9PT0gImluY2x1ZGVzIikKICAgICAgICAgIHJldHVybiBg4buMzIBy4buNzIAgYeG5o8Os4bmjZTogZ2Lhu43MgWThu43MgCBuw60gIiR7X2lzc3VlLmluY2x1ZGVzfSJgOwogICAgICAgIGlmIChfaXNzdWUuZm9ybWF0ID09PSAicmVnZXgiKQogICAgICAgICAgcmV0dXJuIGDhu4zMgHLhu43MgCBh4bmjw6zhuaNlOiBnYuG7jcyBZOG7jcyAIGLDoSDDoHDhurnhurly4bq5IG11ICR7X2lzc3VlLnBhdHRlcm59YDsKICAgICAgICByZXR1cm4gYEHhuaPDrOG5o2U6ICR7Tm91bnNbX2lzc3VlLmZvcm1hdF0gPz8gaXNzdWUyLmZvcm1hdH1gOwogICAgICB9CiAgICAgIGNhc2UgIm5vdF9tdWx0aXBsZV9vZiI6CiAgICAgICAgcmV0dXJuIGBO4buNzIFtYsOgIGHhuaPDrOG5o2U6IGdi4buNzIFk4buNzIAgauG6ucyBIMOoecOgIHDDrXDDrW4gdGkgJHtpc3N1ZTIuZGl2aXNvcn1gOwogICAgICBjYXNlICJ1bnJlY29nbml6ZWRfa2V5cyI6CiAgICAgICAgcmV0dXJuIGBC4buNdMOsbsOsIMOgw6xt4buNzIA6ICR7am9pblZhbHVlcyhpc3N1ZTIua2V5cywgIiwgIil9YDsKICAgICAgY2FzZSAiaW52YWxpZF9rZXkiOgogICAgICAgIHJldHVybiBgQuG7jXTDrG7DrCBh4bmjw6zhuaNlIG7DrW7DuiAke2lzc3VlMi5vcmlnaW59YDsKICAgICAgY2FzZSAiaW52YWxpZF91bmlvbiI6CiAgICAgICAgcmV0dXJuICLDjGLDoXfhu41sw6kgYeG5o8Os4bmjZSI7CiAgICAgIGNhc2UgImludmFsaWRfZWxlbWVudCI6CiAgICAgICAgcmV0dXJuIGBJeWUgYeG5o8Os4bmjZSBuw61uw7ogJHtpc3N1ZTIub3JpZ2lufWA7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuICLDjGLDoXfhu41sw6kgYeG5o8Os4bmjZSI7CiAgICB9CiAgfTsKfTsKZnVuY3Rpb24geW9fZGVmYXVsdCgpIHsKICByZXR1cm4gewogICAgbG9jYWxlRXJyb3I6IGVycm9yNDQoKQogIH07Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvY29yZS9yZWdpc3RyaWVzLmpzCnZhciAkb3V0cHV0ID0gU3ltYm9sKCJab2RPdXRwdXQiKTsKdmFyICRpbnB1dCA9IFN5bWJvbCgiWm9kSW5wdXQiKTsKdmFyICRab2RSZWdpc3RyeSA9IGNsYXNzIHsKICBjb25zdHJ1Y3RvcigpIHsKICAgIHRoaXMuX21hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpOwogICAgdGhpcy5faWRtYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpOwogIH0KICBhZGQoc2NoZW1hLCAuLi5fbWV0YSkgewogICAgY29uc3QgbWV0YSA9IF9tZXRhWzBdOwogICAgdGhpcy5fbWFwLnNldChzY2hlbWEsIG1ldGEpOwogICAgaWYgKG1ldGEgJiYgdHlwZW9mIG1ldGEgPT09ICJvYmplY3QiICYmICJpZCIgaW4gbWV0YSkgewogICAgICBpZiAodGhpcy5faWRtYXAuaGFzKG1ldGEuaWQpKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJRCAke21ldGEuaWR9IGFscmVhZHkgZXhpc3RzIGluIHRoZSByZWdpc3RyeWApOwogICAgICB9CiAgICAgIHRoaXMuX2lkbWFwLnNldChtZXRhLmlkLCBzY2hlbWEpOwogICAgfQogICAgcmV0dXJuIHRoaXM7CiAgfQogIGNsZWFyKCkgewogICAgdGhpcy5fbWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7CiAgICB0aGlzLl9pZG1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgICByZXR1cm4gdGhpczsKICB9CiAgcmVtb3ZlKHNjaGVtYSkgewogICAgY29uc3QgbWV0YSA9IHRoaXMuX21hcC5nZXQoc2NoZW1hKTsKICAgIGlmIChtZXRhICYmIHR5cGVvZiBtZXRhID09PSAib2JqZWN0IiAmJiAiaWQiIGluIG1ldGEpIHsKICAgICAgdGhpcy5faWRtYXAuZGVsZXRlKG1ldGEuaWQpOwogICAgfQogICAgdGhpcy5fbWFwLmRlbGV0ZShzY2hlbWEpOwogICAgcmV0dXJuIHRoaXM7CiAgfQogIGdldChzY2hlbWEpIHsKICAgIGNvbnN0IHAgPSBzY2hlbWEuX3pvZC5wYXJlbnQ7CiAgICBpZiAocCkgewogICAgICBjb25zdCBwbSA9IHsgLi4udGhpcy5nZXQocCkgPz8ge30gfTsKICAgICAgZGVsZXRlIHBtLmlkOwogICAgICBjb25zdCBmID0geyAuLi5wbSwgLi4udGhpcy5fbWFwLmdldChzY2hlbWEpIH07CiAgICAgIHJldHVybiBPYmplY3Qua2V5cyhmKS5sZW5ndGggPyBmIDogdm9pZCAwOwogICAgfQogICAgcmV0dXJuIHRoaXMuX21hcC5nZXQoc2NoZW1hKTsKICB9CiAgaGFzKHNjaGVtYSkgewogICAgcmV0dXJuIHRoaXMuX21hcC5oYXMoc2NoZW1hKTsKICB9Cn07CmZ1bmN0aW9uIHJlZ2lzdHJ5KCkgewogIHJldHVybiBuZXcgJFpvZFJlZ2lzdHJ5KCk7Cn0KdmFyIGdsb2JhbFJlZ2lzdHJ5ID0gcmVnaXN0cnkoKTsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvY29yZS9hcGkuanMKZnVuY3Rpb24gX3N0cmluZyhDbGFzczIsIHBhcmFtcykgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJzdHJpbmciLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfY29lcmNlZFN0cmluZyhDbGFzczIsIHBhcmFtcykgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJzdHJpbmciLAogICAgY29lcmNlOiB0cnVlLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfZW1haWwoQ2xhc3MyLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAic3RyaW5nIiwKICAgIGZvcm1hdDogImVtYWlsIiwKICAgIGNoZWNrOiAic3RyaW5nX2Zvcm1hdCIsCiAgICBhYm9ydDogZmFsc2UsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CmZ1bmN0aW9uIF9ndWlkKENsYXNzMiwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogInN0cmluZyIsCiAgICBmb3JtYXQ6ICJndWlkIiwKICAgIGNoZWNrOiAic3RyaW5nX2Zvcm1hdCIsCiAgICBhYm9ydDogZmFsc2UsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CmZ1bmN0aW9uIF91dWlkKENsYXNzMiwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogInN0cmluZyIsCiAgICBmb3JtYXQ6ICJ1dWlkIiwKICAgIGNoZWNrOiAic3RyaW5nX2Zvcm1hdCIsCiAgICBhYm9ydDogZmFsc2UsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CmZ1bmN0aW9uIF91dWlkdjQoQ2xhc3MyLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAic3RyaW5nIiwKICAgIGZvcm1hdDogInV1aWQiLAogICAgY2hlY2s6ICJzdHJpbmdfZm9ybWF0IiwKICAgIGFib3J0OiBmYWxzZSwKICAgIHZlcnNpb246ICJ2NCIsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CmZ1bmN0aW9uIF91dWlkdjYoQ2xhc3MyLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAic3RyaW5nIiwKICAgIGZvcm1hdDogInV1aWQiLAogICAgY2hlY2s6ICJzdHJpbmdfZm9ybWF0IiwKICAgIGFib3J0OiBmYWxzZSwKICAgIHZlcnNpb246ICJ2NiIsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CmZ1bmN0aW9uIF91dWlkdjcoQ2xhc3MyLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAic3RyaW5nIiwKICAgIGZvcm1hdDogInV1aWQiLAogICAgY2hlY2s6ICJzdHJpbmdfZm9ybWF0IiwKICAgIGFib3J0OiBmYWxzZSwKICAgIHZlcnNpb246ICJ2NyIsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CmZ1bmN0aW9uIF91cmwoQ2xhc3MyLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAic3RyaW5nIiwKICAgIGZvcm1hdDogInVybCIsCiAgICBjaGVjazogInN0cmluZ19mb3JtYXQiLAogICAgYWJvcnQ6IGZhbHNlLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfZW1vamkyKENsYXNzMiwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogInN0cmluZyIsCiAgICBmb3JtYXQ6ICJlbW9qaSIsCiAgICBjaGVjazogInN0cmluZ19mb3JtYXQiLAogICAgYWJvcnQ6IGZhbHNlLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfbmFub2lkKENsYXNzMiwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogInN0cmluZyIsCiAgICBmb3JtYXQ6ICJuYW5vaWQiLAogICAgY2hlY2s6ICJzdHJpbmdfZm9ybWF0IiwKICAgIGFib3J0OiBmYWxzZSwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KZnVuY3Rpb24gX2N1aWQoQ2xhc3MyLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAic3RyaW5nIiwKICAgIGZvcm1hdDogImN1aWQiLAogICAgY2hlY2s6ICJzdHJpbmdfZm9ybWF0IiwKICAgIGFib3J0OiBmYWxzZSwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KZnVuY3Rpb24gX2N1aWQyKENsYXNzMiwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogInN0cmluZyIsCiAgICBmb3JtYXQ6ICJjdWlkMiIsCiAgICBjaGVjazogInN0cmluZ19mb3JtYXQiLAogICAgYWJvcnQ6IGZhbHNlLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfdWxpZChDbGFzczIsIHBhcmFtcykgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJzdHJpbmciLAogICAgZm9ybWF0OiAidWxpZCIsCiAgICBjaGVjazogInN0cmluZ19mb3JtYXQiLAogICAgYWJvcnQ6IGZhbHNlLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfeGlkKENsYXNzMiwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogInN0cmluZyIsCiAgICBmb3JtYXQ6ICJ4aWQiLAogICAgY2hlY2s6ICJzdHJpbmdfZm9ybWF0IiwKICAgIGFib3J0OiBmYWxzZSwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KZnVuY3Rpb24gX2tzdWlkKENsYXNzMiwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogInN0cmluZyIsCiAgICBmb3JtYXQ6ICJrc3VpZCIsCiAgICBjaGVjazogInN0cmluZ19mb3JtYXQiLAogICAgYWJvcnQ6IGZhbHNlLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfaXB2NChDbGFzczIsIHBhcmFtcykgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJzdHJpbmciLAogICAgZm9ybWF0OiAiaXB2NCIsCiAgICBjaGVjazogInN0cmluZ19mb3JtYXQiLAogICAgYWJvcnQ6IGZhbHNlLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfaXB2NihDbGFzczIsIHBhcmFtcykgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJzdHJpbmciLAogICAgZm9ybWF0OiAiaXB2NiIsCiAgICBjaGVjazogInN0cmluZ19mb3JtYXQiLAogICAgYWJvcnQ6IGZhbHNlLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfY2lkcnY0KENsYXNzMiwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogInN0cmluZyIsCiAgICBmb3JtYXQ6ICJjaWRydjQiLAogICAgY2hlY2s6ICJzdHJpbmdfZm9ybWF0IiwKICAgIGFib3J0OiBmYWxzZSwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KZnVuY3Rpb24gX2NpZHJ2NihDbGFzczIsIHBhcmFtcykgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJzdHJpbmciLAogICAgZm9ybWF0OiAiY2lkcnY2IiwKICAgIGNoZWNrOiAic3RyaW5nX2Zvcm1hdCIsCiAgICBhYm9ydDogZmFsc2UsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CmZ1bmN0aW9uIF9iYXNlNjQoQ2xhc3MyLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAic3RyaW5nIiwKICAgIGZvcm1hdDogImJhc2U2NCIsCiAgICBjaGVjazogInN0cmluZ19mb3JtYXQiLAogICAgYWJvcnQ6IGZhbHNlLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfYmFzZTY0dXJsKENsYXNzMiwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogInN0cmluZyIsCiAgICBmb3JtYXQ6ICJiYXNlNjR1cmwiLAogICAgY2hlY2s6ICJzdHJpbmdfZm9ybWF0IiwKICAgIGFib3J0OiBmYWxzZSwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KZnVuY3Rpb24gX2UxNjQoQ2xhc3MyLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAic3RyaW5nIiwKICAgIGZvcm1hdDogImUxNjQiLAogICAgY2hlY2s6ICJzdHJpbmdfZm9ybWF0IiwKICAgIGFib3J0OiBmYWxzZSwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KZnVuY3Rpb24gX2p3dChDbGFzczIsIHBhcmFtcykgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJzdHJpbmciLAogICAgZm9ybWF0OiAiand0IiwKICAgIGNoZWNrOiAic3RyaW5nX2Zvcm1hdCIsCiAgICBhYm9ydDogZmFsc2UsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CnZhciBUaW1lUHJlY2lzaW9uID0gewogIEFueTogbnVsbCwKICBNaW51dGU6IC0xLAogIFNlY29uZDogMCwKICBNaWxsaXNlY29uZDogMywKICBNaWNyb3NlY29uZDogNgp9OwpmdW5jdGlvbiBfaXNvRGF0ZVRpbWUoQ2xhc3MyLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAic3RyaW5nIiwKICAgIGZvcm1hdDogImRhdGV0aW1lIiwKICAgIGNoZWNrOiAic3RyaW5nX2Zvcm1hdCIsCiAgICBvZmZzZXQ6IGZhbHNlLAogICAgbG9jYWw6IGZhbHNlLAogICAgcHJlY2lzaW9uOiBudWxsLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfaXNvRGF0ZShDbGFzczIsIHBhcmFtcykgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJzdHJpbmciLAogICAgZm9ybWF0OiAiZGF0ZSIsCiAgICBjaGVjazogInN0cmluZ19mb3JtYXQiLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfaXNvVGltZShDbGFzczIsIHBhcmFtcykgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJzdHJpbmciLAogICAgZm9ybWF0OiAidGltZSIsCiAgICBjaGVjazogInN0cmluZ19mb3JtYXQiLAogICAgcHJlY2lzaW9uOiBudWxsLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfaXNvRHVyYXRpb24oQ2xhc3MyLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAic3RyaW5nIiwKICAgIGZvcm1hdDogImR1cmF0aW9uIiwKICAgIGNoZWNrOiAic3RyaW5nX2Zvcm1hdCIsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CmZ1bmN0aW9uIF9udW1iZXIoQ2xhc3MyLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAibnVtYmVyIiwKICAgIGNoZWNrczogW10sCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CmZ1bmN0aW9uIF9jb2VyY2VkTnVtYmVyKENsYXNzMiwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogIm51bWJlciIsCiAgICBjb2VyY2U6IHRydWUsCiAgICBjaGVja3M6IFtdLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfaW50KENsYXNzMiwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogIm51bWJlciIsCiAgICBjaGVjazogIm51bWJlcl9mb3JtYXQiLAogICAgYWJvcnQ6IGZhbHNlLAogICAgZm9ybWF0OiAic2FmZWludCIsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CmZ1bmN0aW9uIF9mbG9hdDMyKENsYXNzMiwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogIm51bWJlciIsCiAgICBjaGVjazogIm51bWJlcl9mb3JtYXQiLAogICAgYWJvcnQ6IGZhbHNlLAogICAgZm9ybWF0OiAiZmxvYXQzMiIsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CmZ1bmN0aW9uIF9mbG9hdDY0KENsYXNzMiwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogIm51bWJlciIsCiAgICBjaGVjazogIm51bWJlcl9mb3JtYXQiLAogICAgYWJvcnQ6IGZhbHNlLAogICAgZm9ybWF0OiAiZmxvYXQ2NCIsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CmZ1bmN0aW9uIF9pbnQzMihDbGFzczIsIHBhcmFtcykgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJudW1iZXIiLAogICAgY2hlY2s6ICJudW1iZXJfZm9ybWF0IiwKICAgIGFib3J0OiBmYWxzZSwKICAgIGZvcm1hdDogImludDMyIiwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KZnVuY3Rpb24gX3VpbnQzMihDbGFzczIsIHBhcmFtcykgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJudW1iZXIiLAogICAgY2hlY2s6ICJudW1iZXJfZm9ybWF0IiwKICAgIGFib3J0OiBmYWxzZSwKICAgIGZvcm1hdDogInVpbnQzMiIsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CmZ1bmN0aW9uIF9ib29sZWFuKENsYXNzMiwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogImJvb2xlYW4iLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfY29lcmNlZEJvb2xlYW4oQ2xhc3MyLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAiYm9vbGVhbiIsCiAgICBjb2VyY2U6IHRydWUsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CmZ1bmN0aW9uIF9iaWdpbnQoQ2xhc3MyLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAiYmlnaW50IiwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KZnVuY3Rpb24gX2NvZXJjZWRCaWdpbnQoQ2xhc3MyLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAiYmlnaW50IiwKICAgIGNvZXJjZTogdHJ1ZSwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KZnVuY3Rpb24gX2ludDY0KENsYXNzMiwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogImJpZ2ludCIsCiAgICBjaGVjazogImJpZ2ludF9mb3JtYXQiLAogICAgYWJvcnQ6IGZhbHNlLAogICAgZm9ybWF0OiAiaW50NjQiLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfdWludDY0KENsYXNzMiwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogImJpZ2ludCIsCiAgICBjaGVjazogImJpZ2ludF9mb3JtYXQiLAogICAgYWJvcnQ6IGZhbHNlLAogICAgZm9ybWF0OiAidWludDY0IiwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KZnVuY3Rpb24gX3N5bWJvbChDbGFzczIsIHBhcmFtcykgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJzeW1ib2wiLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfdW5kZWZpbmVkMihDbGFzczIsIHBhcmFtcykgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJ1bmRlZmluZWQiLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfbnVsbDIoQ2xhc3MyLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAibnVsbCIsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CmZ1bmN0aW9uIF9hbnkoQ2xhc3MyKSB7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogImFueSIKICB9KTsKfQpmdW5jdGlvbiBfdW5rbm93bihDbGFzczIpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAidW5rbm93biIKICB9KTsKfQpmdW5jdGlvbiBfbmV2ZXIoQ2xhc3MyLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAibmV2ZXIiLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfdm9pZChDbGFzczIsIHBhcmFtcykgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJ2b2lkIiwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KZnVuY3Rpb24gX2RhdGUoQ2xhc3MyLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAiZGF0ZSIsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CmZ1bmN0aW9uIF9jb2VyY2VkRGF0ZShDbGFzczIsIHBhcmFtcykgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJkYXRlIiwKICAgIGNvZXJjZTogdHJ1ZSwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KZnVuY3Rpb24gX25hbihDbGFzczIsIHBhcmFtcykgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJuYW4iLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfbHQodmFsdWUsIHBhcmFtcykgewogIHJldHVybiBuZXcgJFpvZENoZWNrTGVzc1RoYW4oewogICAgY2hlY2s6ICJsZXNzX3RoYW4iLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksCiAgICB2YWx1ZSwKICAgIGluY2x1c2l2ZTogZmFsc2UKICB9KTsKfQpmdW5jdGlvbiBfbHRlKHZhbHVlLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3ICRab2RDaGVja0xlc3NUaGFuKHsKICAgIGNoZWNrOiAibGVzc190aGFuIiwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLAogICAgdmFsdWUsCiAgICBpbmNsdXNpdmU6IHRydWUKICB9KTsKfQpmdW5jdGlvbiBfZ3QodmFsdWUsIHBhcmFtcykgewogIHJldHVybiBuZXcgJFpvZENoZWNrR3JlYXRlclRoYW4oewogICAgY2hlY2s6ICJncmVhdGVyX3RoYW4iLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksCiAgICB2YWx1ZSwKICAgIGluY2x1c2l2ZTogZmFsc2UKICB9KTsKfQpmdW5jdGlvbiBfZ3RlKHZhbHVlLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3ICRab2RDaGVja0dyZWF0ZXJUaGFuKHsKICAgIGNoZWNrOiAiZ3JlYXRlcl90aGFuIiwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLAogICAgdmFsdWUsCiAgICBpbmNsdXNpdmU6IHRydWUKICB9KTsKfQpmdW5jdGlvbiBfcG9zaXRpdmUocGFyYW1zKSB7CiAgcmV0dXJuIF9ndCgwLCBwYXJhbXMpOwp9CmZ1bmN0aW9uIF9uZWdhdGl2ZShwYXJhbXMpIHsKICByZXR1cm4gX2x0KDAsIHBhcmFtcyk7Cn0KZnVuY3Rpb24gX25vbnBvc2l0aXZlKHBhcmFtcykgewogIHJldHVybiBfbHRlKDAsIHBhcmFtcyk7Cn0KZnVuY3Rpb24gX25vbm5lZ2F0aXZlKHBhcmFtcykgewogIHJldHVybiBfZ3RlKDAsIHBhcmFtcyk7Cn0KZnVuY3Rpb24gX211bHRpcGxlT2YodmFsdWUsIHBhcmFtcykgewogIHJldHVybiBuZXcgJFpvZENoZWNrTXVsdGlwbGVPZih7CiAgICBjaGVjazogIm11bHRpcGxlX29mIiwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLAogICAgdmFsdWUKICB9KTsKfQpmdW5jdGlvbiBfbWF4U2l6ZShtYXhpbXVtLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3ICRab2RDaGVja01heFNpemUoewogICAgY2hlY2s6ICJtYXhfc2l6ZSIsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSwKICAgIG1heGltdW0KICB9KTsKfQpmdW5jdGlvbiBfbWluU2l6ZShtaW5pbXVtLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3ICRab2RDaGVja01pblNpemUoewogICAgY2hlY2s6ICJtaW5fc2l6ZSIsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSwKICAgIG1pbmltdW0KICB9KTsKfQpmdW5jdGlvbiBfc2l6ZShzaXplLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3ICRab2RDaGVja1NpemVFcXVhbHMoewogICAgY2hlY2s6ICJzaXplX2VxdWFscyIsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSwKICAgIHNpemUKICB9KTsKfQpmdW5jdGlvbiBfbWF4TGVuZ3RoKG1heGltdW0sIHBhcmFtcykgewogIGNvbnN0IGNoID0gbmV3ICRab2RDaGVja01heExlbmd0aCh7CiAgICBjaGVjazogIm1heF9sZW5ndGgiLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksCiAgICBtYXhpbXVtCiAgfSk7CiAgcmV0dXJuIGNoOwp9CmZ1bmN0aW9uIF9taW5MZW5ndGgobWluaW11bSwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyAkWm9kQ2hlY2tNaW5MZW5ndGgoewogICAgY2hlY2s6ICJtaW5fbGVuZ3RoIiwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLAogICAgbWluaW11bQogIH0pOwp9CmZ1bmN0aW9uIF9sZW5ndGgobGVuZ3RoLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3ICRab2RDaGVja0xlbmd0aEVxdWFscyh7CiAgICBjaGVjazogImxlbmd0aF9lcXVhbHMiLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksCiAgICBsZW5ndGgKICB9KTsKfQpmdW5jdGlvbiBfcmVnZXgocGF0dGVybiwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyAkWm9kQ2hlY2tSZWdleCh7CiAgICBjaGVjazogInN0cmluZ19mb3JtYXQiLAogICAgZm9ybWF0OiAicmVnZXgiLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcyksCiAgICBwYXR0ZXJuCiAgfSk7Cn0KZnVuY3Rpb24gX2xvd2VyY2FzZShwYXJhbXMpIHsKICByZXR1cm4gbmV3ICRab2RDaGVja0xvd2VyQ2FzZSh7CiAgICBjaGVjazogInN0cmluZ19mb3JtYXQiLAogICAgZm9ybWF0OiAibG93ZXJjYXNlIiwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KZnVuY3Rpb24gX3VwcGVyY2FzZShwYXJhbXMpIHsKICByZXR1cm4gbmV3ICRab2RDaGVja1VwcGVyQ2FzZSh7CiAgICBjaGVjazogInN0cmluZ19mb3JtYXQiLAogICAgZm9ybWF0OiAidXBwZXJjYXNlIiwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KZnVuY3Rpb24gX2luY2x1ZGVzKGluY2x1ZGVzLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3ICRab2RDaGVja0luY2x1ZGVzKHsKICAgIGNoZWNrOiAic3RyaW5nX2Zvcm1hdCIsCiAgICBmb3JtYXQ6ICJpbmNsdWRlcyIsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSwKICAgIGluY2x1ZGVzCiAgfSk7Cn0KZnVuY3Rpb24gX3N0YXJ0c1dpdGgocHJlZml4LCBwYXJhbXMpIHsKICByZXR1cm4gbmV3ICRab2RDaGVja1N0YXJ0c1dpdGgoewogICAgY2hlY2s6ICJzdHJpbmdfZm9ybWF0IiwKICAgIGZvcm1hdDogInN0YXJ0c193aXRoIiwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLAogICAgcHJlZml4CiAgfSk7Cn0KZnVuY3Rpb24gX2VuZHNXaXRoKHN1ZmZpeCwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyAkWm9kQ2hlY2tFbmRzV2l0aCh7CiAgICBjaGVjazogInN0cmluZ19mb3JtYXQiLAogICAgZm9ybWF0OiAiZW5kc193aXRoIiwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLAogICAgc3VmZml4CiAgfSk7Cn0KZnVuY3Rpb24gX3Byb3BlcnR5KHByb3BlcnR5LCBzY2hlbWEsIHBhcmFtcykgewogIHJldHVybiBuZXcgJFpvZENoZWNrUHJvcGVydHkoewogICAgY2hlY2s6ICJwcm9wZXJ0eSIsCiAgICBwcm9wZXJ0eSwKICAgIHNjaGVtYSwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KZnVuY3Rpb24gX21pbWUodHlwZXMsIHBhcmFtcykgewogIHJldHVybiBuZXcgJFpvZENoZWNrTWltZVR5cGUoewogICAgY2hlY2s6ICJtaW1lX3R5cGUiLAogICAgbWltZTogdHlwZXMsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CmZ1bmN0aW9uIF9vdmVyd3JpdGUodHgpIHsKICByZXR1cm4gbmV3ICRab2RDaGVja092ZXJ3cml0ZSh7CiAgICBjaGVjazogIm92ZXJ3cml0ZSIsCiAgICB0eAogIH0pOwp9CmZ1bmN0aW9uIF9ub3JtYWxpemUoZm9ybSkgewogIHJldHVybiBfb3ZlcndyaXRlKChpbnB1dCkgPT4gaW5wdXQubm9ybWFsaXplKGZvcm0pKTsKfQpmdW5jdGlvbiBfdHJpbSgpIHsKICByZXR1cm4gX292ZXJ3cml0ZSgoaW5wdXQpID0+IGlucHV0LnRyaW0oKSk7Cn0KZnVuY3Rpb24gX3RvTG93ZXJDYXNlKCkgewogIHJldHVybiBfb3ZlcndyaXRlKChpbnB1dCkgPT4gaW5wdXQudG9Mb3dlckNhc2UoKSk7Cn0KZnVuY3Rpb24gX3RvVXBwZXJDYXNlKCkgewogIHJldHVybiBfb3ZlcndyaXRlKChpbnB1dCkgPT4gaW5wdXQudG9VcHBlckNhc2UoKSk7Cn0KZnVuY3Rpb24gX2FycmF5KENsYXNzMiwgZWxlbWVudCwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogImFycmF5IiwKICAgIGVsZW1lbnQsCiAgICAvLyBnZXQgZWxlbWVudCgpIHsKICAgIC8vICAgcmV0dXJuIGVsZW1lbnQ7CiAgICAvLyB9LAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfdW5pb24oQ2xhc3MyLCBvcHRpb25zLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAidW5pb24iLAogICAgb3B0aW9ucywKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KZnVuY3Rpb24gX2Rpc2NyaW1pbmF0ZWRVbmlvbihDbGFzczIsIGRpc2NyaW1pbmF0b3IsIG9wdGlvbnMsIHBhcmFtcykgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJ1bmlvbiIsCiAgICBvcHRpb25zLAogICAgZGlzY3JpbWluYXRvciwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KZnVuY3Rpb24gX2ludGVyc2VjdGlvbihDbGFzczIsIGxlZnQsIHJpZ2h0KSB7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogImludGVyc2VjdGlvbiIsCiAgICBsZWZ0LAogICAgcmlnaHQKICB9KTsKfQpmdW5jdGlvbiBfdHVwbGUoQ2xhc3MyLCBpdGVtcywgX3BhcmFtc09yUmVzdCwgX3BhcmFtcykgewogIGNvbnN0IGhhc1Jlc3QgPSBfcGFyYW1zT3JSZXN0IGluc3RhbmNlb2YgJFpvZFR5cGU7CiAgY29uc3QgcGFyYW1zID0gaGFzUmVzdCA/IF9wYXJhbXMgOiBfcGFyYW1zT3JSZXN0OwogIGNvbnN0IHJlc3QgPSBoYXNSZXN0ID8gX3BhcmFtc09yUmVzdCA6IG51bGw7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogInR1cGxlIiwKICAgIGl0ZW1zLAogICAgcmVzdCwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KZnVuY3Rpb24gX3JlY29yZChDbGFzczIsIGtleVR5cGUsIHZhbHVlVHlwZSwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogInJlY29yZCIsCiAgICBrZXlUeXBlLAogICAgdmFsdWVUeXBlLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfbWFwKENsYXNzMiwga2V5VHlwZSwgdmFsdWVUeXBlLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAibWFwIiwKICAgIGtleVR5cGUsCiAgICB2YWx1ZVR5cGUsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CmZ1bmN0aW9uIF9zZXQoQ2xhc3MyLCB2YWx1ZVR5cGUsIHBhcmFtcykgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJzZXQiLAogICAgdmFsdWVUeXBlLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfZW51bShDbGFzczIsIHZhbHVlcywgcGFyYW1zKSB7CiAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkodmFsdWVzKSA/IE9iamVjdC5mcm9tRW50cmllcyh2YWx1ZXMubWFwKCh2KSA9PiBbdiwgdl0pKSA6IHZhbHVlczsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAiZW51bSIsCiAgICBlbnRyaWVzLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfbmF0aXZlRW51bShDbGFzczIsIGVudHJpZXMsIHBhcmFtcykgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJlbnVtIiwKICAgIGVudHJpZXMsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CmZ1bmN0aW9uIF9saXRlcmFsKENsYXNzMiwgdmFsdWUsIHBhcmFtcykgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJsaXRlcmFsIiwKICAgIHZhbHVlczogQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFt2YWx1ZV0sCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CmZ1bmN0aW9uIF9maWxlKENsYXNzMiwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogImZpbGUiLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfdHJhbnNmb3JtKENsYXNzMiwgZm4pIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAidHJhbnNmb3JtIiwKICAgIHRyYW5zZm9ybTogZm4KICB9KTsKfQpmdW5jdGlvbiBfb3B0aW9uYWwoQ2xhc3MyLCBpbm5lclR5cGUpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAib3B0aW9uYWwiLAogICAgaW5uZXJUeXBlCiAgfSk7Cn0KZnVuY3Rpb24gX251bGxhYmxlKENsYXNzMiwgaW5uZXJUeXBlKSB7CiAgcmV0dXJuIG5ldyBDbGFzczIoewogICAgdHlwZTogIm51bGxhYmxlIiwKICAgIGlubmVyVHlwZQogIH0pOwp9CmZ1bmN0aW9uIF9kZWZhdWx0KENsYXNzMiwgaW5uZXJUeXBlLCBkZWZhdWx0VmFsdWUpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAiZGVmYXVsdCIsCiAgICBpbm5lclR5cGUsCiAgICBnZXQgZGVmYXVsdFZhbHVlKCkgewogICAgICByZXR1cm4gdHlwZW9mIGRlZmF1bHRWYWx1ZSA9PT0gImZ1bmN0aW9uIiA/IGRlZmF1bHRWYWx1ZSgpIDogc2hhbGxvd0Nsb25lKGRlZmF1bHRWYWx1ZSk7CiAgICB9CiAgfSk7Cn0KZnVuY3Rpb24gX25vbm9wdGlvbmFsKENsYXNzMiwgaW5uZXJUeXBlLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAibm9ub3B0aW9uYWwiLAogICAgaW5uZXJUeXBlLAogICAgLi4ubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBfc3VjY2VzcyhDbGFzczIsIGlubmVyVHlwZSkgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgIGlubmVyVHlwZQogIH0pOwp9CmZ1bmN0aW9uIF9jYXRjaChDbGFzczIsIGlubmVyVHlwZSwgY2F0Y2hWYWx1ZSkgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJjYXRjaCIsCiAgICBpbm5lclR5cGUsCiAgICBjYXRjaFZhbHVlOiB0eXBlb2YgY2F0Y2hWYWx1ZSA9PT0gImZ1bmN0aW9uIiA/IGNhdGNoVmFsdWUgOiAoKSA9PiBjYXRjaFZhbHVlCiAgfSk7Cn0KZnVuY3Rpb24gX3BpcGUoQ2xhc3MyLCBpbl8sIG91dCkgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJwaXBlIiwKICAgIGluOiBpbl8sCiAgICBvdXQKICB9KTsKfQpmdW5jdGlvbiBfcmVhZG9ubHkoQ2xhc3MyLCBpbm5lclR5cGUpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAicmVhZG9ubHkiLAogICAgaW5uZXJUeXBlCiAgfSk7Cn0KZnVuY3Rpb24gX3RlbXBsYXRlTGl0ZXJhbChDbGFzczIsIHBhcnRzLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAidGVtcGxhdGVfbGl0ZXJhbCIsCiAgICBwYXJ0cywKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KZnVuY3Rpb24gX2xhenkoQ2xhc3MyLCBnZXR0ZXIpIHsKICByZXR1cm4gbmV3IENsYXNzMih7CiAgICB0eXBlOiAibGF6eSIsCiAgICBnZXR0ZXIKICB9KTsKfQpmdW5jdGlvbiBfcHJvbWlzZShDbGFzczIsIGlubmVyVHlwZSkgewogIHJldHVybiBuZXcgQ2xhc3MyKHsKICAgIHR5cGU6ICJwcm9taXNlIiwKICAgIGlubmVyVHlwZQogIH0pOwp9CmZ1bmN0aW9uIF9jdXN0b20oQ2xhc3MyLCBmbiwgX3BhcmFtcykgewogIGNvbnN0IG5vcm0gPSBub3JtYWxpemVQYXJhbXMoX3BhcmFtcyk7CiAgbm9ybS5hYm9ydCA/PyAobm9ybS5hYm9ydCA9IHRydWUpOwogIGNvbnN0IHNjaGVtYSA9IG5ldyBDbGFzczIoewogICAgdHlwZTogImN1c3RvbSIsCiAgICBjaGVjazogImN1c3RvbSIsCiAgICBmbiwKICAgIC4uLm5vcm0KICB9KTsKICByZXR1cm4gc2NoZW1hOwp9CmZ1bmN0aW9uIF9yZWZpbmUoQ2xhc3MyLCBmbiwgX3BhcmFtcykgewogIGNvbnN0IHNjaGVtYSA9IG5ldyBDbGFzczIoewogICAgdHlwZTogImN1c3RvbSIsCiAgICBjaGVjazogImN1c3RvbSIsCiAgICBmbiwKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhfcGFyYW1zKQogIH0pOwogIHJldHVybiBzY2hlbWE7Cn0KZnVuY3Rpb24gX3N1cGVyUmVmaW5lKGZuKSB7CiAgY29uc3QgY2ggPSBfY2hlY2soKHBheWxvYWQpID0+IHsKICAgIHBheWxvYWQuYWRkSXNzdWUgPSAoaXNzdWUyKSA9PiB7CiAgICAgIGlmICh0eXBlb2YgaXNzdWUyID09PSAic3RyaW5nIikgewogICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goaXNzdWUoaXNzdWUyLCBwYXlsb2FkLnZhbHVlLCBjaC5fem9kLmRlZikpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IF9pc3N1ZSA9IGlzc3VlMjsKICAgICAgICBpZiAoX2lzc3VlLmZhdGFsKQogICAgICAgICAgX2lzc3VlLmNvbnRpbnVlID0gZmFsc2U7CiAgICAgICAgX2lzc3VlLmNvZGUgPz8gKF9pc3N1ZS5jb2RlID0gImN1c3RvbSIpOwogICAgICAgIF9pc3N1ZS5pbnB1dCA/PyAoX2lzc3VlLmlucHV0ID0gcGF5bG9hZC52YWx1ZSk7CiAgICAgICAgX2lzc3VlLmluc3QgPz8gKF9pc3N1ZS5pbnN0ID0gY2gpOwogICAgICAgIF9pc3N1ZS5jb250aW51ZSA/PyAoX2lzc3VlLmNvbnRpbnVlID0gIWNoLl96b2QuZGVmLmFib3J0KTsKICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKGlzc3VlKF9pc3N1ZSkpOwogICAgICB9CiAgICB9OwogICAgcmV0dXJuIGZuKHBheWxvYWQudmFsdWUsIHBheWxvYWQpOwogIH0pOwogIHJldHVybiBjaDsKfQpmdW5jdGlvbiBfY2hlY2soZm4sIHBhcmFtcykgewogIGNvbnN0IGNoID0gbmV3ICRab2RDaGVjayh7CiAgICBjaGVjazogImN1c3RvbSIsCiAgICAuLi5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwogIGNoLl96b2QuY2hlY2sgPSBmbjsKICByZXR1cm4gY2g7Cn0KZnVuY3Rpb24gX3N0cmluZ2Jvb2woQ2xhc3NlcywgX3BhcmFtcykgewogIGNvbnN0IHBhcmFtcyA9IG5vcm1hbGl6ZVBhcmFtcyhfcGFyYW1zKTsKICBsZXQgdHJ1dGh5QXJyYXkgPSBwYXJhbXMudHJ1dGh5ID8/IFsidHJ1ZSIsICIxIiwgInllcyIsICJvbiIsICJ5IiwgImVuYWJsZWQiXTsKICBsZXQgZmFsc3lBcnJheSA9IHBhcmFtcy5mYWxzeSA/PyBbImZhbHNlIiwgIjAiLCAibm8iLCAib2ZmIiwgIm4iLCAiZGlzYWJsZWQiXTsKICBpZiAocGFyYW1zLmNhc2UgIT09ICJzZW5zaXRpdmUiKSB7CiAgICB0cnV0aHlBcnJheSA9IHRydXRoeUFycmF5Lm1hcCgodikgPT4gdHlwZW9mIHYgPT09ICJzdHJpbmciID8gdi50b0xvd2VyQ2FzZSgpIDogdik7CiAgICBmYWxzeUFycmF5ID0gZmFsc3lBcnJheS5tYXAoKHYpID0+IHR5cGVvZiB2ID09PSAic3RyaW5nIiA/IHYudG9Mb3dlckNhc2UoKSA6IHYpOwogIH0KICBjb25zdCB0cnV0aHlTZXQgPSBuZXcgU2V0KHRydXRoeUFycmF5KTsKICBjb25zdCBmYWxzeVNldCA9IG5ldyBTZXQoZmFsc3lBcnJheSk7CiAgY29uc3QgX0NvZGVjID0gQ2xhc3Nlcy5Db2RlYyA/PyAkWm9kQ29kZWM7CiAgY29uc3QgX0Jvb2xlYW4gPSBDbGFzc2VzLkJvb2xlYW4gPz8gJFpvZEJvb2xlYW47CiAgY29uc3QgX1N0cmluZyA9IENsYXNzZXMuU3RyaW5nID8/ICRab2RTdHJpbmc7CiAgY29uc3Qgc3RyaW5nU2NoZW1hID0gbmV3IF9TdHJpbmcoeyB0eXBlOiAic3RyaW5nIiwgZXJyb3I6IHBhcmFtcy5lcnJvciB9KTsKICBjb25zdCBib29sZWFuU2NoZW1hID0gbmV3IF9Cb29sZWFuKHsgdHlwZTogImJvb2xlYW4iLCBlcnJvcjogcGFyYW1zLmVycm9yIH0pOwogIGNvbnN0IGNvZGVjMiA9IG5ldyBfQ29kZWMoewogICAgdHlwZTogInBpcGUiLAogICAgaW46IHN0cmluZ1NjaGVtYSwKICAgIG91dDogYm9vbGVhblNjaGVtYSwKICAgIHRyYW5zZm9ybTogKChpbnB1dCwgcGF5bG9hZCkgPT4gewogICAgICBsZXQgZGF0YSA9IGlucHV0OwogICAgICBpZiAocGFyYW1zLmNhc2UgIT09ICJzZW5zaXRpdmUiKQogICAgICAgIGRhdGEgPSBkYXRhLnRvTG93ZXJDYXNlKCk7CiAgICAgIGlmICh0cnV0aHlTZXQuaGFzKGRhdGEpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSBpZiAoZmFsc3lTZXQuaGFzKGRhdGEpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2goewogICAgICAgICAgY29kZTogImludmFsaWRfdmFsdWUiLAogICAgICAgICAgZXhwZWN0ZWQ6ICJzdHJpbmdib29sIiwKICAgICAgICAgIHZhbHVlczogWy4uLnRydXRoeVNldCwgLi4uZmFsc3lTZXRdLAogICAgICAgICAgaW5wdXQ6IHBheWxvYWQudmFsdWUsCiAgICAgICAgICBpbnN0OiBjb2RlYzIsCiAgICAgICAgICBjb250aW51ZTogZmFsc2UKICAgICAgICB9KTsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0KICAgIH0pLAogICAgcmV2ZXJzZVRyYW5zZm9ybTogKChpbnB1dCwgX3BheWxvYWQpID0+IHsKICAgICAgaWYgKGlucHV0ID09PSB0cnVlKSB7CiAgICAgICAgcmV0dXJuIHRydXRoeUFycmF5WzBdIHx8ICJ0cnVlIjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc3lBcnJheVswXSB8fCAiZmFsc2UiOwogICAgICB9CiAgICB9KSwKICAgIGVycm9yOiBwYXJhbXMuZXJyb3IKICB9KTsKICByZXR1cm4gY29kZWMyOwp9CmZ1bmN0aW9uIF9zdHJpbmdGb3JtYXQoQ2xhc3MyLCBmb3JtYXQsIGZuT3JSZWdleCwgX3BhcmFtcyA9IHt9KSB7CiAgY29uc3QgcGFyYW1zID0gbm9ybWFsaXplUGFyYW1zKF9wYXJhbXMpOwogIGNvbnN0IGRlZiA9IHsKICAgIC4uLm5vcm1hbGl6ZVBhcmFtcyhfcGFyYW1zKSwKICAgIGNoZWNrOiAic3RyaW5nX2Zvcm1hdCIsCiAgICB0eXBlOiAic3RyaW5nIiwKICAgIGZvcm1hdCwKICAgIGZuOiB0eXBlb2YgZm5PclJlZ2V4ID09PSAiZnVuY3Rpb24iID8gZm5PclJlZ2V4IDogKHZhbCkgPT4gZm5PclJlZ2V4LnRlc3QodmFsKSwKICAgIC4uLnBhcmFtcwogIH07CiAgaWYgKGZuT3JSZWdleCBpbnN0YW5jZW9mIFJlZ0V4cCkgewogICAgZGVmLnBhdHRlcm4gPSBmbk9yUmVnZXg7CiAgfQogIGNvbnN0IGluc3QgPSBuZXcgQ2xhc3MyKGRlZik7CiAgcmV0dXJuIGluc3Q7Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvY29yZS90by1qc29uLXNjaGVtYS5qcwp2YXIgSlNPTlNjaGVtYUdlbmVyYXRvciA9IGNsYXNzIHsKICBjb25zdHJ1Y3RvcihwYXJhbXMpIHsKICAgIHRoaXMuY291bnRlciA9IDA7CiAgICB0aGlzLm1ldGFkYXRhUmVnaXN0cnkgPSAocGFyYW1zID09IG51bGwgPyB2b2lkIDAgOiBwYXJhbXMubWV0YWRhdGEpID8/IGdsb2JhbFJlZ2lzdHJ5OwogICAgdGhpcy50YXJnZXQgPSAocGFyYW1zID09IG51bGwgPyB2b2lkIDAgOiBwYXJhbXMudGFyZ2V0KSA/PyAiZHJhZnQtMjAyMC0xMiI7CiAgICB0aGlzLnVucmVwcmVzZW50YWJsZSA9IChwYXJhbXMgPT0gbnVsbCA/IHZvaWQgMCA6IHBhcmFtcy51bnJlcHJlc2VudGFibGUpID8/ICJ0aHJvdyI7CiAgICB0aGlzLm92ZXJyaWRlID0gKHBhcmFtcyA9PSBudWxsID8gdm9pZCAwIDogcGFyYW1zLm92ZXJyaWRlKSA/PyAoKCkgPT4gewogICAgfSk7CiAgICB0aGlzLmlvID0gKHBhcmFtcyA9PSBudWxsID8gdm9pZCAwIDogcGFyYW1zLmlvKSA/PyAib3V0cHV0IjsKICAgIHRoaXMuc2VlbiA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgfQogIHByb2Nlc3Moc2NoZW1hLCBfcGFyYW1zID0geyBwYXRoOiBbXSwgc2NoZW1hUGF0aDogW10gfSkgewogICAgdmFyIF9hMiwgX2IsIF9jOwogICAgdmFyIF9hOwogICAgY29uc3QgZGVmID0gc2NoZW1hLl96b2QuZGVmOwogICAgY29uc3QgZm9ybWF0TWFwID0gewogICAgICBndWlkOiAidXVpZCIsCiAgICAgIHVybDogInVyaSIsCiAgICAgIGRhdGV0aW1lOiAiZGF0ZS10aW1lIiwKICAgICAganNvbl9zdHJpbmc6ICJqc29uLXN0cmluZyIsCiAgICAgIHJlZ2V4OiAiIgogICAgICAvLyBkbyBub3Qgc2V0CiAgICB9OwogICAgY29uc3Qgc2VlbiA9IHRoaXMuc2Vlbi5nZXQoc2NoZW1hKTsKICAgIGlmIChzZWVuKSB7CiAgICAgIHNlZW4uY291bnQrKzsKICAgICAgY29uc3QgaXNDeWNsZSA9IF9wYXJhbXMuc2NoZW1hUGF0aC5pbmNsdWRlcyhzY2hlbWEpOwogICAgICBpZiAoaXNDeWNsZSkgewogICAgICAgIHNlZW4uY3ljbGUgPSBfcGFyYW1zLnBhdGg7CiAgICAgIH0KICAgICAgcmV0dXJuIHNlZW4uc2NoZW1hOwogICAgfQogICAgY29uc3QgcmVzdWx0ID0geyBzY2hlbWE6IHt9LCBjb3VudDogMSwgY3ljbGU6IHZvaWQgMCwgcGF0aDogX3BhcmFtcy5wYXRoIH07CiAgICB0aGlzLnNlZW4uc2V0KHNjaGVtYSwgcmVzdWx0KTsKICAgIGNvbnN0IG92ZXJyaWRlU2NoZW1hID0gKF9iID0gKF9hMiA9IHNjaGVtYS5fem9kKS50b0pTT05TY2hlbWEpID09IG51bGwgPyB2b2lkIDAgOiBfYi5jYWxsKF9hMik7CiAgICBpZiAob3ZlcnJpZGVTY2hlbWEpIHsKICAgICAgcmVzdWx0LnNjaGVtYSA9IG92ZXJyaWRlU2NoZW1hOwogICAgfSBlbHNlIHsKICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgIC4uLl9wYXJhbXMsCiAgICAgICAgc2NoZW1hUGF0aDogWy4uLl9wYXJhbXMuc2NoZW1hUGF0aCwgc2NoZW1hXSwKICAgICAgICBwYXRoOiBfcGFyYW1zLnBhdGgKICAgICAgfTsKICAgICAgY29uc3QgcGFyZW50ID0gc2NoZW1hLl96b2QucGFyZW50OwogICAgICBpZiAocGFyZW50KSB7CiAgICAgICAgcmVzdWx0LnJlZiA9IHBhcmVudDsKICAgICAgICB0aGlzLnByb2Nlc3MocGFyZW50LCBwYXJhbXMpOwogICAgICAgIHRoaXMuc2Vlbi5nZXQocGFyZW50KS5pc1BhcmVudCA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgX2pzb24gPSByZXN1bHQuc2NoZW1hOwogICAgICAgIHN3aXRjaCAoZGVmLnR5cGUpIHsKICAgICAgICAgIGNhc2UgInN0cmluZyI6IHsKICAgICAgICAgICAgY29uc3QganNvbjIgPSBfanNvbjsKICAgICAgICAgICAganNvbjIudHlwZSA9ICJzdHJpbmciOwogICAgICAgICAgICBjb25zdCB7IG1pbmltdW0sIG1heGltdW0sIGZvcm1hdCwgcGF0dGVybnMsIGNvbnRlbnRFbmNvZGluZyB9ID0gc2NoZW1hLl96b2QuYmFnOwogICAgICAgICAgICBpZiAodHlwZW9mIG1pbmltdW0gPT09ICJudW1iZXIiKQogICAgICAgICAgICAgIGpzb24yLm1pbkxlbmd0aCA9IG1pbmltdW07CiAgICAgICAgICAgIGlmICh0eXBlb2YgbWF4aW11bSA9PT0gIm51bWJlciIpCiAgICAgICAgICAgICAganNvbjIubWF4TGVuZ3RoID0gbWF4aW11bTsKICAgICAgICAgICAgaWYgKGZvcm1hdCkgewogICAgICAgICAgICAgIGpzb24yLmZvcm1hdCA9IGZvcm1hdE1hcFtmb3JtYXRdID8/IGZvcm1hdDsKICAgICAgICAgICAgICBpZiAoanNvbjIuZm9ybWF0ID09PSAiIikKICAgICAgICAgICAgICAgIGRlbGV0ZSBqc29uMi5mb3JtYXQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGNvbnRlbnRFbmNvZGluZykKICAgICAgICAgICAgICBqc29uMi5jb250ZW50RW5jb2RpbmcgPSBjb250ZW50RW5jb2Rpbmc7CiAgICAgICAgICAgIGlmIChwYXR0ZXJucyAmJiBwYXR0ZXJucy5zaXplID4gMCkgewogICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ZXMgPSBbLi4ucGF0dGVybnNdOwogICAgICAgICAgICAgIGlmIChyZWdleGVzLmxlbmd0aCA9PT0gMSkKICAgICAgICAgICAgICAgIGpzb24yLnBhdHRlcm4gPSByZWdleGVzWzBdLnNvdXJjZTsKICAgICAgICAgICAgICBlbHNlIGlmIChyZWdleGVzLmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAgIHJlc3VsdC5zY2hlbWEuYWxsT2YgPSBbCiAgICAgICAgICAgICAgICAgIC4uLnJlZ2V4ZXMubWFwKChyZWdleCkgPT4gKHsKICAgICAgICAgICAgICAgICAgICAuLi50aGlzLnRhcmdldCA9PT0gImRyYWZ0LTciIHx8IHRoaXMudGFyZ2V0ID09PSAiZHJhZnQtNCIgfHwgdGhpcy50YXJnZXQgPT09ICJvcGVuYXBpLTMuMCIgPyB7IHR5cGU6ICJzdHJpbmciIH0gOiB7fSwKICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuOiByZWdleC5zb3VyY2UKICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICBdOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgIm51bWJlciI6IHsKICAgICAgICAgICAgY29uc3QganNvbjIgPSBfanNvbjsKICAgICAgICAgICAgY29uc3QgeyBtaW5pbXVtLCBtYXhpbXVtLCBmb3JtYXQsIG11bHRpcGxlT2YsIGV4Y2x1c2l2ZU1heGltdW0sIGV4Y2x1c2l2ZU1pbmltdW0gfSA9IHNjaGVtYS5fem9kLmJhZzsKICAgICAgICAgICAgaWYgKHR5cGVvZiBmb3JtYXQgPT09ICJzdHJpbmciICYmIGZvcm1hdC5pbmNsdWRlcygiaW50IikpCiAgICAgICAgICAgICAganNvbjIudHlwZSA9ICJpbnRlZ2VyIjsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgIGpzb24yLnR5cGUgPSAibnVtYmVyIjsKICAgICAgICAgICAgaWYgKHR5cGVvZiBleGNsdXNpdmVNaW5pbXVtID09PSAibnVtYmVyIikgewogICAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gImRyYWZ0LTQiIHx8IHRoaXMudGFyZ2V0ID09PSAib3BlbmFwaS0zLjAiKSB7CiAgICAgICAgICAgICAgICBqc29uMi5taW5pbXVtID0gZXhjbHVzaXZlTWluaW11bTsKICAgICAgICAgICAgICAgIGpzb24yLmV4Y2x1c2l2ZU1pbmltdW0gPSB0cnVlOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBqc29uMi5leGNsdXNpdmVNaW5pbXVtID0gZXhjbHVzaXZlTWluaW11bTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHR5cGVvZiBtaW5pbXVtID09PSAibnVtYmVyIikgewogICAgICAgICAgICAgIGpzb24yLm1pbmltdW0gPSBtaW5pbXVtOwogICAgICAgICAgICAgIGlmICh0eXBlb2YgZXhjbHVzaXZlTWluaW11bSA9PT0gIm51bWJlciIgJiYgdGhpcy50YXJnZXQgIT09ICJkcmFmdC00IikgewogICAgICAgICAgICAgICAgaWYgKGV4Y2x1c2l2ZU1pbmltdW0gPj0gbWluaW11bSkKICAgICAgICAgICAgICAgICAgZGVsZXRlIGpzb24yLm1pbmltdW07CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBqc29uMi5leGNsdXNpdmVNaW5pbXVtOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodHlwZW9mIGV4Y2x1c2l2ZU1heGltdW0gPT09ICJudW1iZXIiKSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0ID09PSAiZHJhZnQtNCIgfHwgdGhpcy50YXJnZXQgPT09ICJvcGVuYXBpLTMuMCIpIHsKICAgICAgICAgICAgICAgIGpzb24yLm1heGltdW0gPSBleGNsdXNpdmVNYXhpbXVtOwogICAgICAgICAgICAgICAganNvbjIuZXhjbHVzaXZlTWF4aW11bSA9IHRydWU7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGpzb24yLmV4Y2x1c2l2ZU1heGltdW0gPSBleGNsdXNpdmVNYXhpbXVtOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodHlwZW9mIG1heGltdW0gPT09ICJudW1iZXIiKSB7CiAgICAgICAgICAgICAganNvbjIubWF4aW11bSA9IG1heGltdW07CiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBleGNsdXNpdmVNYXhpbXVtID09PSAibnVtYmVyIiAmJiB0aGlzLnRhcmdldCAhPT0gImRyYWZ0LTQiKSB7CiAgICAgICAgICAgICAgICBpZiAoZXhjbHVzaXZlTWF4aW11bSA8PSBtYXhpbXVtKQogICAgICAgICAgICAgICAgICBkZWxldGUganNvbjIubWF4aW11bTsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgZGVsZXRlIGpzb24yLmV4Y2x1c2l2ZU1heGltdW07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0eXBlb2YgbXVsdGlwbGVPZiA9PT0gIm51bWJlciIpCiAgICAgICAgICAgICAganNvbjIubXVsdGlwbGVPZiA9IG11bHRpcGxlT2Y7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgY2FzZSAiYm9vbGVhbiI6IHsKICAgICAgICAgICAgY29uc3QganNvbjIgPSBfanNvbjsKICAgICAgICAgICAganNvbjIudHlwZSA9ICJib29sZWFuIjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBjYXNlICJiaWdpbnQiOiB7CiAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gInRocm93IikgewogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiQmlnSW50IGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYSIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgY2FzZSAic3ltYm9sIjogewogICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09ICJ0aHJvdyIpIHsKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlN5bWJvbHMgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBjYXNlICJudWxsIjogewogICAgICAgICAgICBpZiAodGhpcy50YXJnZXQgPT09ICJvcGVuYXBpLTMuMCIpIHsKICAgICAgICAgICAgICBfanNvbi50eXBlID0gInN0cmluZyI7CiAgICAgICAgICAgICAgX2pzb24ubnVsbGFibGUgPSB0cnVlOwogICAgICAgICAgICAgIF9qc29uLmVudW0gPSBbbnVsbF07CiAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgIF9qc29uLnR5cGUgPSAibnVsbCI7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgY2FzZSAiYW55IjogewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgInVua25vd24iOiB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgY2FzZSAidW5kZWZpbmVkIjogewogICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09ICJ0aHJvdyIpIHsKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlVuZGVmaW5lZCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWEiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgInZvaWQiOiB7CiAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gInRocm93IikgewogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiVm9pZCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWEiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgIm5ldmVyIjogewogICAgICAgICAgICBfanNvbi5ub3QgPSB7fTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBjYXNlICJkYXRlIjogewogICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09ICJ0aHJvdyIpIHsKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkRhdGUgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBjYXNlICJhcnJheSI6IHsKICAgICAgICAgICAgY29uc3QganNvbjIgPSBfanNvbjsKICAgICAgICAgICAgY29uc3QgeyBtaW5pbXVtLCBtYXhpbXVtIH0gPSBzY2hlbWEuX3pvZC5iYWc7CiAgICAgICAgICAgIGlmICh0eXBlb2YgbWluaW11bSA9PT0gIm51bWJlciIpCiAgICAgICAgICAgICAganNvbjIubWluSXRlbXMgPSBtaW5pbXVtOwogICAgICAgICAgICBpZiAodHlwZW9mIG1heGltdW0gPT09ICJudW1iZXIiKQogICAgICAgICAgICAgIGpzb24yLm1heEl0ZW1zID0gbWF4aW11bTsKICAgICAgICAgICAganNvbjIudHlwZSA9ICJhcnJheSI7CiAgICAgICAgICAgIGpzb24yLml0ZW1zID0gdGhpcy5wcm9jZXNzKGRlZi5lbGVtZW50LCB7IC4uLnBhcmFtcywgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCAiaXRlbXMiXSB9KTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBjYXNlICJvYmplY3QiOiB7CiAgICAgICAgICAgIGNvbnN0IGpzb24yID0gX2pzb247CiAgICAgICAgICAgIGpzb24yLnR5cGUgPSAib2JqZWN0IjsKICAgICAgICAgICAganNvbjIucHJvcGVydGllcyA9IHt9OwogICAgICAgICAgICBjb25zdCBzaGFwZSA9IGRlZi5zaGFwZTsKICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2hhcGUpIHsKICAgICAgICAgICAgICBqc29uMi5wcm9wZXJ0aWVzW2tleV0gPSB0aGlzLnByb2Nlc3Moc2hhcGVba2V5XSwgewogICAgICAgICAgICAgICAgLi4ucGFyYW1zLAogICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCAicHJvcGVydGllcyIsIGtleV0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBhbGxLZXlzID0gbmV3IFNldChPYmplY3Qua2V5cyhzaGFwZSkpOwogICAgICAgICAgICBjb25zdCByZXF1aXJlZEtleXMgPSBuZXcgU2V0KFsuLi5hbGxLZXlzXS5maWx0ZXIoKGtleSkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHYgPSBkZWYuc2hhcGVba2V5XS5fem9kOwogICAgICAgICAgICAgIGlmICh0aGlzLmlvID09PSAiaW5wdXQiKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdi5vcHRpbiA9PT0gdm9pZCAwOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdi5vcHRvdXQgPT09IHZvaWQgMDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgaWYgKHJlcXVpcmVkS2V5cy5zaXplID4gMCkgewogICAgICAgICAgICAgIGpzb24yLnJlcXVpcmVkID0gQXJyYXkuZnJvbShyZXF1aXJlZEtleXMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgoKF9jID0gZGVmLmNhdGNoYWxsKSA9PSBudWxsID8gdm9pZCAwIDogX2MuX3pvZC5kZWYudHlwZSkgPT09ICJuZXZlciIpIHsKICAgICAgICAgICAgICBqc29uMi5hZGRpdGlvbmFsUHJvcGVydGllcyA9IGZhbHNlOwogICAgICAgICAgICB9IGVsc2UgaWYgKCFkZWYuY2F0Y2hhbGwpIHsKICAgICAgICAgICAgICBpZiAodGhpcy5pbyA9PT0gIm91dHB1dCIpCiAgICAgICAgICAgICAgICBqc29uMi5hZGRpdGlvbmFsUHJvcGVydGllcyA9IGZhbHNlOwogICAgICAgICAgICB9IGVsc2UgaWYgKGRlZi5jYXRjaGFsbCkgewogICAgICAgICAgICAgIGpzb24yLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID0gdGhpcy5wcm9jZXNzKGRlZi5jYXRjaGFsbCwgewogICAgICAgICAgICAgICAgLi4ucGFyYW1zLAogICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCAiYWRkaXRpb25hbFByb3BlcnRpZXMiXQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgY2FzZSAidW5pb24iOiB7CiAgICAgICAgICAgIGNvbnN0IGpzb24yID0gX2pzb247CiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBkZWYub3B0aW9ucy5tYXAoKHgsIGkpID0+IHRoaXMucHJvY2Vzcyh4LCB7CiAgICAgICAgICAgICAgLi4ucGFyYW1zLAogICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgImFueU9mIiwgaV0KICAgICAgICAgICAgfSkpOwogICAgICAgICAgICBqc29uMi5hbnlPZiA9IG9wdGlvbnM7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgY2FzZSAiaW50ZXJzZWN0aW9uIjogewogICAgICAgICAgICBjb25zdCBqc29uMiA9IF9qc29uOwogICAgICAgICAgICBjb25zdCBhID0gdGhpcy5wcm9jZXNzKGRlZi5sZWZ0LCB7CiAgICAgICAgICAgICAgLi4ucGFyYW1zLAogICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgImFsbE9mIiwgMF0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnN0IGIgPSB0aGlzLnByb2Nlc3MoZGVmLnJpZ2h0LCB7CiAgICAgICAgICAgICAgLi4ucGFyYW1zLAogICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgImFsbE9mIiwgMV0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnN0IGlzU2ltcGxlSW50ZXJzZWN0aW9uID0gKHZhbCkgPT4gImFsbE9mIiBpbiB2YWwgJiYgT2JqZWN0LmtleXModmFsKS5sZW5ndGggPT09IDE7CiAgICAgICAgICAgIGNvbnN0IGFsbE9mID0gWwogICAgICAgICAgICAgIC4uLmlzU2ltcGxlSW50ZXJzZWN0aW9uKGEpID8gYS5hbGxPZiA6IFthXSwKICAgICAgICAgICAgICAuLi5pc1NpbXBsZUludGVyc2VjdGlvbihiKSA/IGIuYWxsT2YgOiBbYl0KICAgICAgICAgICAgXTsKICAgICAgICAgICAganNvbjIuYWxsT2YgPSBhbGxPZjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBjYXNlICJ0dXBsZSI6IHsKICAgICAgICAgICAgY29uc3QganNvbjIgPSBfanNvbjsKICAgICAgICAgICAganNvbjIudHlwZSA9ICJhcnJheSI7CiAgICAgICAgICAgIGNvbnN0IHByZWZpeFBhdGggPSB0aGlzLnRhcmdldCA9PT0gImRyYWZ0LTIwMjAtMTIiID8gInByZWZpeEl0ZW1zIiA6ICJpdGVtcyI7CiAgICAgICAgICAgIGNvbnN0IHJlc3RQYXRoID0gdGhpcy50YXJnZXQgPT09ICJkcmFmdC0yMDIwLTEyIiA/ICJpdGVtcyIgOiB0aGlzLnRhcmdldCA9PT0gIm9wZW5hcGktMy4wIiA/ICJpdGVtcyIgOiAiYWRkaXRpb25hbEl0ZW1zIjsKICAgICAgICAgICAgY29uc3QgcHJlZml4SXRlbXMgPSBkZWYuaXRlbXMubWFwKCh4LCBpKSA9PiB0aGlzLnByb2Nlc3MoeCwgewogICAgICAgICAgICAgIC4uLnBhcmFtcywKICAgICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIHByZWZpeFBhdGgsIGldCiAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgY29uc3QgcmVzdCA9IGRlZi5yZXN0ID8gdGhpcy5wcm9jZXNzKGRlZi5yZXN0LCB7CiAgICAgICAgICAgICAgLi4ucGFyYW1zLAogICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgcmVzdFBhdGgsIC4uLnRoaXMudGFyZ2V0ID09PSAib3BlbmFwaS0zLjAiID8gW2RlZi5pdGVtcy5sZW5ndGhdIDogW11dCiAgICAgICAgICAgIH0pIDogbnVsbDsKICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0ID09PSAiZHJhZnQtMjAyMC0xMiIpIHsKICAgICAgICAgICAgICBqc29uMi5wcmVmaXhJdGVtcyA9IHByZWZpeEl0ZW1zOwogICAgICAgICAgICAgIGlmIChyZXN0KSB7CiAgICAgICAgICAgICAgICBqc29uMi5pdGVtcyA9IHJlc3Q7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGFyZ2V0ID09PSAib3BlbmFwaS0zLjAiKSB7CiAgICAgICAgICAgICAganNvbjIuaXRlbXMgPSB7CiAgICAgICAgICAgICAgICBhbnlPZjogcHJlZml4SXRlbXMKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGlmIChyZXN0KSB7CiAgICAgICAgICAgICAgICBqc29uMi5pdGVtcy5hbnlPZi5wdXNoKHJlc3QpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBqc29uMi5taW5JdGVtcyA9IHByZWZpeEl0ZW1zLmxlbmd0aDsKICAgICAgICAgICAgICBpZiAoIXJlc3QpIHsKICAgICAgICAgICAgICAgIGpzb24yLm1heEl0ZW1zID0gcHJlZml4SXRlbXMubGVuZ3RoOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBqc29uMi5pdGVtcyA9IHByZWZpeEl0ZW1zOwogICAgICAgICAgICAgIGlmIChyZXN0KSB7CiAgICAgICAgICAgICAgICBqc29uMi5hZGRpdGlvbmFsSXRlbXMgPSByZXN0OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCB7IG1pbmltdW0sIG1heGltdW0gfSA9IHNjaGVtYS5fem9kLmJhZzsKICAgICAgICAgICAgaWYgKHR5cGVvZiBtaW5pbXVtID09PSAibnVtYmVyIikKICAgICAgICAgICAgICBqc29uMi5taW5JdGVtcyA9IG1pbmltdW07CiAgICAgICAgICAgIGlmICh0eXBlb2YgbWF4aW11bSA9PT0gIm51bWJlciIpCiAgICAgICAgICAgICAganNvbjIubWF4SXRlbXMgPSBtYXhpbXVtOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgInJlY29yZCI6IHsKICAgICAgICAgICAgY29uc3QganNvbjIgPSBfanNvbjsKICAgICAgICAgICAganNvbjIudHlwZSA9ICJvYmplY3QiOwogICAgICAgICAgICBpZiAodGhpcy50YXJnZXQgPT09ICJkcmFmdC03IiB8fCB0aGlzLnRhcmdldCA9PT0gImRyYWZ0LTIwMjAtMTIiKSB7CiAgICAgICAgICAgICAganNvbjIucHJvcGVydHlOYW1lcyA9IHRoaXMucHJvY2VzcyhkZWYua2V5VHlwZSwgewogICAgICAgICAgICAgICAgLi4ucGFyYW1zLAogICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCAicHJvcGVydHlOYW1lcyJdCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAganNvbjIuYWRkaXRpb25hbFByb3BlcnRpZXMgPSB0aGlzLnByb2Nlc3MoZGVmLnZhbHVlVHlwZSwgewogICAgICAgICAgICAgIC4uLnBhcmFtcywKICAgICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsICJhZGRpdGlvbmFsUHJvcGVydGllcyJdCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgIm1hcCI6IHsKICAgICAgICAgICAgaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSAidGhyb3ciKSB7CiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJNYXAgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBjYXNlICJzZXQiOiB7CiAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gInRocm93IikgewogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiU2V0IGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYSIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgY2FzZSAiZW51bSI6IHsKICAgICAgICAgICAgY29uc3QganNvbjIgPSBfanNvbjsKICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gZ2V0RW51bVZhbHVlcyhkZWYuZW50cmllcyk7CiAgICAgICAgICAgIGlmICh2YWx1ZXMuZXZlcnkoKHYpID0+IHR5cGVvZiB2ID09PSAibnVtYmVyIikpCiAgICAgICAgICAgICAganNvbjIudHlwZSA9ICJudW1iZXIiOwogICAgICAgICAgICBpZiAodmFsdWVzLmV2ZXJ5KCh2KSA9PiB0eXBlb2YgdiA9PT0gInN0cmluZyIpKQogICAgICAgICAgICAgIGpzb24yLnR5cGUgPSAic3RyaW5nIjsKICAgICAgICAgICAganNvbjIuZW51bSA9IHZhbHVlczsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBjYXNlICJsaXRlcmFsIjogewogICAgICAgICAgICBjb25zdCBqc29uMiA9IF9qc29uOwogICAgICAgICAgICBjb25zdCB2YWxzID0gW107CiAgICAgICAgICAgIGZvciAoY29uc3QgdmFsIG9mIGRlZi52YWx1ZXMpIHsKICAgICAgICAgICAgICBpZiAodmFsID09PSB2b2lkIDApIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gInRocm93IikgewogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkxpdGVyYWwgYHVuZGVmaW5lZGAgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hIik7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gImJpZ2ludCIpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gInRocm93IikgewogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkJpZ0ludCBsaXRlcmFscyBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWEiKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHZhbHMucHVzaChOdW1iZXIodmFsKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHZhbHMucHVzaCh2YWwpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodmFscy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgfSBlbHNlIGlmICh2YWxzLmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHZhbHNbMF07CiAgICAgICAgICAgICAganNvbjIudHlwZSA9IHZhbCA9PT0gbnVsbCA/ICJudWxsIiA6IHR5cGVvZiB2YWw7CiAgICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0ID09PSAiZHJhZnQtNCIgfHwgdGhpcy50YXJnZXQgPT09ICJvcGVuYXBpLTMuMCIpIHsKICAgICAgICAgICAgICAgIGpzb24yLmVudW0gPSBbdmFsXTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAganNvbjIuY29uc3QgPSB2YWw7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmICh2YWxzLmV2ZXJ5KCh2KSA9PiB0eXBlb2YgdiA9PT0gIm51bWJlciIpKQogICAgICAgICAgICAgICAganNvbjIudHlwZSA9ICJudW1iZXIiOwogICAgICAgICAgICAgIGlmICh2YWxzLmV2ZXJ5KCh2KSA9PiB0eXBlb2YgdiA9PT0gInN0cmluZyIpKQogICAgICAgICAgICAgICAganNvbjIudHlwZSA9ICJzdHJpbmciOwogICAgICAgICAgICAgIGlmICh2YWxzLmV2ZXJ5KCh2KSA9PiB0eXBlb2YgdiA9PT0gImJvb2xlYW4iKSkKICAgICAgICAgICAgICAgIGpzb24yLnR5cGUgPSAic3RyaW5nIjsKICAgICAgICAgICAgICBpZiAodmFscy5ldmVyeSgodikgPT4gdiA9PT0gbnVsbCkpCiAgICAgICAgICAgICAgICBqc29uMi50eXBlID0gIm51bGwiOwogICAgICAgICAgICAgIGpzb24yLmVudW0gPSB2YWxzOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgY2FzZSAiZmlsZSI6IHsKICAgICAgICAgICAgY29uc3QganNvbjIgPSBfanNvbjsKICAgICAgICAgICAgY29uc3QgZmlsZTIgPSB7CiAgICAgICAgICAgICAgdHlwZTogInN0cmluZyIsCiAgICAgICAgICAgICAgZm9ybWF0OiAiYmluYXJ5IiwKICAgICAgICAgICAgICBjb250ZW50RW5jb2Rpbmc6ICJiaW5hcnkiCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNvbnN0IHsgbWluaW11bSwgbWF4aW11bSwgbWltZSB9ID0gc2NoZW1hLl96b2QuYmFnOwogICAgICAgICAgICBpZiAobWluaW11bSAhPT0gdm9pZCAwKQogICAgICAgICAgICAgIGZpbGUyLm1pbkxlbmd0aCA9IG1pbmltdW07CiAgICAgICAgICAgIGlmIChtYXhpbXVtICE9PSB2b2lkIDApCiAgICAgICAgICAgICAgZmlsZTIubWF4TGVuZ3RoID0gbWF4aW11bTsKICAgICAgICAgICAgaWYgKG1pbWUpIHsKICAgICAgICAgICAgICBpZiAobWltZS5sZW5ndGggPT09IDEpIHsKICAgICAgICAgICAgICAgIGZpbGUyLmNvbnRlbnRNZWRpYVR5cGUgPSBtaW1lWzBdOwogICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihqc29uMiwgZmlsZTIpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBqc29uMi5hbnlPZiA9IG1pbWUubWFwKChtKSA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IG1GaWxlID0geyAuLi5maWxlMiwgY29udGVudE1lZGlhVHlwZTogbSB9OwogICAgICAgICAgICAgICAgICByZXR1cm4gbUZpbGU7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihqc29uMiwgZmlsZTIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgY2FzZSAidHJhbnNmb3JtIjogewogICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09ICJ0aHJvdyIpIHsKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlRyYW5zZm9ybXMgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBjYXNlICJudWxsYWJsZSI6IHsKICAgICAgICAgICAgY29uc3QgaW5uZXIgPSB0aGlzLnByb2Nlc3MoZGVmLmlubmVyVHlwZSwgcGFyYW1zKTsKICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0ID09PSAib3BlbmFwaS0zLjAiKSB7CiAgICAgICAgICAgICAgcmVzdWx0LnJlZiA9IGRlZi5pbm5lclR5cGU7CiAgICAgICAgICAgICAgX2pzb24ubnVsbGFibGUgPSB0cnVlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIF9qc29uLmFueU9mID0gW2lubmVyLCB7IHR5cGU6ICJudWxsIiB9XTsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgIm5vbm9wdGlvbmFsIjogewogICAgICAgICAgICB0aGlzLnByb2Nlc3MoZGVmLmlubmVyVHlwZSwgcGFyYW1zKTsKICAgICAgICAgICAgcmVzdWx0LnJlZiA9IGRlZi5pbm5lclR5cGU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgY2FzZSAic3VjY2VzcyI6IHsKICAgICAgICAgICAgY29uc3QganNvbjIgPSBfanNvbjsKICAgICAgICAgICAganNvbjIudHlwZSA9ICJib29sZWFuIjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBjYXNlICJkZWZhdWx0IjogewogICAgICAgICAgICB0aGlzLnByb2Nlc3MoZGVmLmlubmVyVHlwZSwgcGFyYW1zKTsKICAgICAgICAgICAgcmVzdWx0LnJlZiA9IGRlZi5pbm5lclR5cGU7CiAgICAgICAgICAgIF9qc29uLmRlZmF1bHQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRlZi5kZWZhdWx0VmFsdWUpKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBjYXNlICJwcmVmYXVsdCI6IHsKICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGRlZi5pbm5lclR5cGUsIHBhcmFtcyk7CiAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBkZWYuaW5uZXJUeXBlOwogICAgICAgICAgICBpZiAodGhpcy5pbyA9PT0gImlucHV0IikKICAgICAgICAgICAgICBfanNvbi5fcHJlZmF1bHQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRlZi5kZWZhdWx0VmFsdWUpKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBjYXNlICJjYXRjaCI6IHsKICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGRlZi5pbm5lclR5cGUsIHBhcmFtcyk7CiAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBkZWYuaW5uZXJUeXBlOwogICAgICAgICAgICBsZXQgY2F0Y2hWYWx1ZTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBjYXRjaFZhbHVlID0gZGVmLmNhdGNoVmFsdWUodm9pZCAwKTsKICAgICAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJEeW5hbWljIGNhdGNoIHZhbHVlcyBhcmUgbm90IHN1cHBvcnRlZCBpbiBKU09OIFNjaGVtYSIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF9qc29uLmRlZmF1bHQgPSBjYXRjaFZhbHVlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgIm5hbiI6IHsKICAgICAgICAgICAgaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSAidGhyb3ciKSB7CiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJOYU4gY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBjYXNlICJ0ZW1wbGF0ZV9saXRlcmFsIjogewogICAgICAgICAgICBjb25zdCBqc29uMiA9IF9qc29uOwogICAgICAgICAgICBjb25zdCBwYXR0ZXJuID0gc2NoZW1hLl96b2QucGF0dGVybjsKICAgICAgICAgICAgaWYgKCFwYXR0ZXJuKQogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiUGF0dGVybiBub3QgZm91bmQgaW4gdGVtcGxhdGUgbGl0ZXJhbCIpOwogICAgICAgICAgICBqc29uMi50eXBlID0gInN0cmluZyI7CiAgICAgICAgICAgIGpzb24yLnBhdHRlcm4gPSBwYXR0ZXJuLnNvdXJjZTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBjYXNlICJwaXBlIjogewogICAgICAgICAgICBjb25zdCBpbm5lclR5cGUgPSB0aGlzLmlvID09PSAiaW5wdXQiID8gZGVmLmluLl96b2QuZGVmLnR5cGUgPT09ICJ0cmFuc2Zvcm0iID8gZGVmLm91dCA6IGRlZi5pbiA6IGRlZi5vdXQ7CiAgICAgICAgICAgIHRoaXMucHJvY2Vzcyhpbm5lclR5cGUsIHBhcmFtcyk7CiAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBpbm5lclR5cGU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgY2FzZSAicmVhZG9ubHkiOiB7CiAgICAgICAgICAgIHRoaXMucHJvY2VzcyhkZWYuaW5uZXJUeXBlLCBwYXJhbXMpOwogICAgICAgICAgICByZXN1bHQucmVmID0gZGVmLmlubmVyVHlwZTsKICAgICAgICAgICAgX2pzb24ucmVhZE9ubHkgPSB0cnVlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIC8vIHBhc3N0aHJvdWdoIHR5cGVzCiAgICAgICAgICBjYXNlICJwcm9taXNlIjogewogICAgICAgICAgICB0aGlzLnByb2Nlc3MoZGVmLmlubmVyVHlwZSwgcGFyYW1zKTsKICAgICAgICAgICAgcmVzdWx0LnJlZiA9IGRlZi5pbm5lclR5cGU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgY2FzZSAib3B0aW9uYWwiOiB7CiAgICAgICAgICAgIHRoaXMucHJvY2VzcyhkZWYuaW5uZXJUeXBlLCBwYXJhbXMpOwogICAgICAgICAgICByZXN1bHQucmVmID0gZGVmLmlubmVyVHlwZTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBjYXNlICJsYXp5IjogewogICAgICAgICAgICBjb25zdCBpbm5lclR5cGUgPSBzY2hlbWEuX3pvZC5pbm5lclR5cGU7CiAgICAgICAgICAgIHRoaXMucHJvY2Vzcyhpbm5lclR5cGUsIHBhcmFtcyk7CiAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBpbm5lclR5cGU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgY2FzZSAiY3VzdG9tIjogewogICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09ICJ0aHJvdyIpIHsKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkN1c3RvbSB0eXBlcyBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWEiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgImZ1bmN0aW9uIjogewogICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09ICJ0aHJvdyIpIHsKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkZ1bmN0aW9uIHR5cGVzIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYSIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgZGVmYXVsdDogewogICAgICAgICAgICBkZWY7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBjb25zdCBtZXRhID0gdGhpcy5tZXRhZGF0YVJlZ2lzdHJ5LmdldChzY2hlbWEpOwogICAgaWYgKG1ldGEpCiAgICAgIE9iamVjdC5hc3NpZ24ocmVzdWx0LnNjaGVtYSwgbWV0YSk7CiAgICBpZiAodGhpcy5pbyA9PT0gImlucHV0IiAmJiBpc1RyYW5zZm9ybWluZyhzY2hlbWEpKSB7CiAgICAgIGRlbGV0ZSByZXN1bHQuc2NoZW1hLmV4YW1wbGVzOwogICAgICBkZWxldGUgcmVzdWx0LnNjaGVtYS5kZWZhdWx0OwogICAgfQogICAgaWYgKHRoaXMuaW8gPT09ICJpbnB1dCIgJiYgcmVzdWx0LnNjaGVtYS5fcHJlZmF1bHQpCiAgICAgIChfYSA9IHJlc3VsdC5zY2hlbWEpLmRlZmF1bHQgPz8gKF9hLmRlZmF1bHQgPSByZXN1bHQuc2NoZW1hLl9wcmVmYXVsdCk7CiAgICBkZWxldGUgcmVzdWx0LnNjaGVtYS5fcHJlZmF1bHQ7CiAgICBjb25zdCBfcmVzdWx0ID0gdGhpcy5zZWVuLmdldChzY2hlbWEpOwogICAgcmV0dXJuIF9yZXN1bHQuc2NoZW1hOwogIH0KICBlbWl0KHNjaGVtYSwgX3BhcmFtcykgewogICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7CiAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgIGN5Y2xlczogKF9wYXJhbXMgPT0gbnVsbCA/IHZvaWQgMCA6IF9wYXJhbXMuY3ljbGVzKSA/PyAicmVmIiwKICAgICAgcmV1c2VkOiAoX3BhcmFtcyA9PSBudWxsID8gdm9pZCAwIDogX3BhcmFtcy5yZXVzZWQpID8/ICJpbmxpbmUiLAogICAgICAvLyB1bnJlcHJlc2VudGFibGU6IF9wYXJhbXM/LnVucmVwcmVzZW50YWJsZSA/PyAidGhyb3ciLAogICAgICAvLyB1cmk6IF9wYXJhbXM/LnVyaSA/PyAoKGlkKSA9PiBgJHtpZH1gKSwKICAgICAgZXh0ZXJuYWw6IChfcGFyYW1zID09IG51bGwgPyB2b2lkIDAgOiBfcGFyYW1zLmV4dGVybmFsKSA/PyB2b2lkIDAKICAgIH07CiAgICBjb25zdCByb290ID0gdGhpcy5zZWVuLmdldChzY2hlbWEpOwogICAgaWYgKCFyb290KQogICAgICB0aHJvdyBuZXcgRXJyb3IoIlVucHJvY2Vzc2VkIHNjaGVtYS4gVGhpcyBpcyBhIGJ1ZyBpbiBab2QuIik7CiAgICBjb25zdCBtYWtlVVJJID0gKGVudHJ5KSA9PiB7CiAgICAgIHZhciBfYTI7CiAgICAgIGNvbnN0IGRlZnNTZWdtZW50ID0gdGhpcy50YXJnZXQgPT09ICJkcmFmdC0yMDIwLTEyIiA/ICIkZGVmcyIgOiAiZGVmaW5pdGlvbnMiOwogICAgICBpZiAocGFyYW1zLmV4dGVybmFsKSB7CiAgICAgICAgY29uc3QgZXh0ZXJuYWxJZCA9IChfYTIgPSBwYXJhbXMuZXh0ZXJuYWwucmVnaXN0cnkuZ2V0KGVudHJ5WzBdKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5pZDsKICAgICAgICBjb25zdCB1cmlHZW5lcmF0b3IgPSBwYXJhbXMuZXh0ZXJuYWwudXJpID8/ICgoaWQyKSA9PiBpZDIpOwogICAgICAgIGlmIChleHRlcm5hbElkKSB7CiAgICAgICAgICByZXR1cm4geyByZWY6IHVyaUdlbmVyYXRvcihleHRlcm5hbElkKSB9OwogICAgICAgIH0KICAgICAgICBjb25zdCBpZCA9IGVudHJ5WzFdLmRlZklkID8/IGVudHJ5WzFdLnNjaGVtYS5pZCA/PyBgc2NoZW1hJHt0aGlzLmNvdW50ZXIrK31gOwogICAgICAgIGVudHJ5WzFdLmRlZklkID0gaWQ7CiAgICAgICAgcmV0dXJuIHsgZGVmSWQ6IGlkLCByZWY6IGAke3VyaUdlbmVyYXRvcigiX19zaGFyZWQiKX0jLyR7ZGVmc1NlZ21lbnR9LyR7aWR9YCB9OwogICAgICB9CiAgICAgIGlmIChlbnRyeVsxXSA9PT0gcm9vdCkgewogICAgICAgIHJldHVybiB7IHJlZjogIiMiIH07CiAgICAgIH0KICAgICAgY29uc3QgdXJpUHJlZml4ID0gYCNgOwogICAgICBjb25zdCBkZWZVcmlQcmVmaXggPSBgJHt1cmlQcmVmaXh9LyR7ZGVmc1NlZ21lbnR9L2A7CiAgICAgIGNvbnN0IGRlZklkID0gZW50cnlbMV0uc2NoZW1hLmlkID8/IGBfX3NjaGVtYSR7dGhpcy5jb3VudGVyKyt9YDsKICAgICAgcmV0dXJuIHsgZGVmSWQsIHJlZjogZGVmVXJpUHJlZml4ICsgZGVmSWQgfTsKICAgIH07CiAgICBjb25zdCBleHRyYWN0VG9EZWYgPSAoZW50cnkpID0+IHsKICAgICAgaWYgKGVudHJ5WzFdLnNjaGVtYS4kcmVmKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IHNlZW4gPSBlbnRyeVsxXTsKICAgICAgY29uc3QgeyByZWYsIGRlZklkIH0gPSBtYWtlVVJJKGVudHJ5KTsKICAgICAgc2Vlbi5kZWYgPSB7IC4uLnNlZW4uc2NoZW1hIH07CiAgICAgIGlmIChkZWZJZCkKICAgICAgICBzZWVuLmRlZklkID0gZGVmSWQ7CiAgICAgIGNvbnN0IHNjaGVtYTIgPSBzZWVuLnNjaGVtYTsKICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hMikgewogICAgICAgIGRlbGV0ZSBzY2hlbWEyW2tleV07CiAgICAgIH0KICAgICAgc2NoZW1hMi4kcmVmID0gcmVmOwogICAgfTsKICAgIGlmIChwYXJhbXMuY3ljbGVzID09PSAidGhyb3ciKSB7CiAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5zZWVuLmVudHJpZXMoKSkgewogICAgICAgIGNvbnN0IHNlZW4gPSBlbnRyeVsxXTsKICAgICAgICBpZiAoc2Vlbi5jeWNsZSkgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDeWNsZSBkZXRlY3RlZDogIy8keyhfYSA9IHNlZW4uY3ljbGUpID09IG51bGwgPyB2b2lkIDAgOiBfYS5qb2luKCIvIil9Lzxyb290PgoKU2V0IHRoZSBcYGN5Y2xlc1xgIHBhcmFtZXRlciB0byBcYCJyZWYiXGAgdG8gcmVzb2x2ZSBjeWNsaWNhbCBzY2hlbWFzIHdpdGggZGVmcy5gKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5zZWVuLmVudHJpZXMoKSkgewogICAgICBjb25zdCBzZWVuID0gZW50cnlbMV07CiAgICAgIGlmIChzY2hlbWEgPT09IGVudHJ5WzBdKSB7CiAgICAgICAgZXh0cmFjdFRvRGVmKGVudHJ5KTsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBpZiAocGFyYW1zLmV4dGVybmFsKSB7CiAgICAgICAgY29uc3QgZXh0ID0gKF9iID0gcGFyYW1zLmV4dGVybmFsLnJlZ2lzdHJ5LmdldChlbnRyeVswXSkpID09IG51bGwgPyB2b2lkIDAgOiBfYi5pZDsKICAgICAgICBpZiAoc2NoZW1hICE9PSBlbnRyeVswXSAmJiBleHQpIHsKICAgICAgICAgIGV4dHJhY3RUb0RlZihlbnRyeSk7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgY29uc3QgaWQgPSAoX2MgPSB0aGlzLm1ldGFkYXRhUmVnaXN0cnkuZ2V0KGVudHJ5WzBdKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmlkOwogICAgICBpZiAoaWQpIHsKICAgICAgICBleHRyYWN0VG9EZWYoZW50cnkpOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGlmIChzZWVuLmN5Y2xlKSB7CiAgICAgICAgZXh0cmFjdFRvRGVmKGVudHJ5KTsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBpZiAoc2Vlbi5jb3VudCA+IDEpIHsKICAgICAgICBpZiAocGFyYW1zLnJldXNlZCA9PT0gInJlZiIpIHsKICAgICAgICAgIGV4dHJhY3RUb0RlZihlbnRyeSk7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGNvbnN0IGZsYXR0ZW5SZWYgPSAoem9kU2NoZW1hLCBwYXJhbXMyKSA9PiB7CiAgICAgIGNvbnN0IHNlZW4gPSB0aGlzLnNlZW4uZ2V0KHpvZFNjaGVtYSk7CiAgICAgIGNvbnN0IHNjaGVtYTIgPSBzZWVuLmRlZiA/PyBzZWVuLnNjaGVtYTsKICAgICAgY29uc3QgX2NhY2hlZCA9IHsgLi4uc2NoZW1hMiB9OwogICAgICBpZiAoc2Vlbi5yZWYgPT09IG51bGwpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3QgcmVmID0gc2Vlbi5yZWY7CiAgICAgIHNlZW4ucmVmID0gbnVsbDsKICAgICAgaWYgKHJlZikgewogICAgICAgIGZsYXR0ZW5SZWYocmVmLCBwYXJhbXMyKTsKICAgICAgICBjb25zdCByZWZTY2hlbWEgPSB0aGlzLnNlZW4uZ2V0KHJlZikuc2NoZW1hOwogICAgICAgIGlmIChyZWZTY2hlbWEuJHJlZiAmJiAocGFyYW1zMi50YXJnZXQgPT09ICJkcmFmdC03IiB8fCBwYXJhbXMyLnRhcmdldCA9PT0gImRyYWZ0LTQiIHx8IHBhcmFtczIudGFyZ2V0ID09PSAib3BlbmFwaS0zLjAiKSkgewogICAgICAgICAgc2NoZW1hMi5hbGxPZiA9IHNjaGVtYTIuYWxsT2YgPz8gW107CiAgICAgICAgICBzY2hlbWEyLmFsbE9mLnB1c2gocmVmU2NoZW1hKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgT2JqZWN0LmFzc2lnbihzY2hlbWEyLCByZWZTY2hlbWEpOwogICAgICAgICAgT2JqZWN0LmFzc2lnbihzY2hlbWEyLCBfY2FjaGVkKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKCFzZWVuLmlzUGFyZW50KQogICAgICAgIHRoaXMub3ZlcnJpZGUoewogICAgICAgICAgem9kU2NoZW1hLAogICAgICAgICAganNvblNjaGVtYTogc2NoZW1hMiwKICAgICAgICAgIHBhdGg6IHNlZW4ucGF0aCA/PyBbXQogICAgICAgIH0pOwogICAgfTsKICAgIGZvciAoY29uc3QgZW50cnkgb2YgWy4uLnRoaXMuc2Vlbi5lbnRyaWVzKCldLnJldmVyc2UoKSkgewogICAgICBmbGF0dGVuUmVmKGVudHJ5WzBdLCB7IHRhcmdldDogdGhpcy50YXJnZXQgfSk7CiAgICB9CiAgICBjb25zdCByZXN1bHQgPSB7fTsKICAgIGlmICh0aGlzLnRhcmdldCA9PT0gImRyYWZ0LTIwMjAtMTIiKSB7CiAgICAgIHJlc3VsdC4kc2NoZW1hID0gImh0dHBzOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LzIwMjAtMTIvc2NoZW1hIjsKICAgIH0gZWxzZSBpZiAodGhpcy50YXJnZXQgPT09ICJkcmFmdC03IikgewogICAgICByZXN1bHQuJHNjaGVtYSA9ICJodHRwOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LTA3L3NjaGVtYSMiOwogICAgfSBlbHNlIGlmICh0aGlzLnRhcmdldCA9PT0gImRyYWZ0LTQiKSB7CiAgICAgIHJlc3VsdC4kc2NoZW1hID0gImh0dHA6Ly9qc29uLXNjaGVtYS5vcmcvZHJhZnQtMDQvc2NoZW1hIyI7CiAgICB9IGVsc2UgaWYgKHRoaXMudGFyZ2V0ID09PSAib3BlbmFwaS0zLjAiKSB7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLndhcm4oYEludmFsaWQgdGFyZ2V0OiAke3RoaXMudGFyZ2V0fWApOwogICAgfQogICAgaWYgKChfZCA9IHBhcmFtcy5leHRlcm5hbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLnVyaSkgewogICAgICBjb25zdCBpZCA9IChfZSA9IHBhcmFtcy5leHRlcm5hbC5yZWdpc3RyeS5nZXQoc2NoZW1hKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLmlkOwogICAgICBpZiAoIWlkKQogICAgICAgIHRocm93IG5ldyBFcnJvcigiU2NoZW1hIGlzIG1pc3NpbmcgYW4gYGlkYCBwcm9wZXJ0eSIpOwogICAgICByZXN1bHQuJGlkID0gcGFyYW1zLmV4dGVybmFsLnVyaShpZCk7CiAgICB9CiAgICBPYmplY3QuYXNzaWduKHJlc3VsdCwgcm9vdC5kZWYpOwogICAgY29uc3QgZGVmcyA9ICgoX2YgPSBwYXJhbXMuZXh0ZXJuYWwpID09IG51bGwgPyB2b2lkIDAgOiBfZi5kZWZzKSA/PyB7fTsKICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5zZWVuLmVudHJpZXMoKSkgewogICAgICBjb25zdCBzZWVuID0gZW50cnlbMV07CiAgICAgIGlmIChzZWVuLmRlZiAmJiBzZWVuLmRlZklkKSB7CiAgICAgICAgZGVmc1tzZWVuLmRlZklkXSA9IHNlZW4uZGVmOwogICAgICB9CiAgICB9CiAgICBpZiAocGFyYW1zLmV4dGVybmFsKSB7CiAgICB9IGVsc2UgewogICAgICBpZiAoT2JqZWN0LmtleXMoZGVmcykubGVuZ3RoID4gMCkgewogICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gImRyYWZ0LTIwMjAtMTIiKSB7CiAgICAgICAgICByZXN1bHQuJGRlZnMgPSBkZWZzOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQuZGVmaW5pdGlvbnMgPSBkZWZzOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgdHJ5IHsKICAgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzdWx0KSk7CiAgICB9IGNhdGNoIChfZXJyKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiRXJyb3IgY29udmVydGluZyBzY2hlbWEgdG8gSlNPTi4iKTsKICAgIH0KICB9Cn07CmZ1bmN0aW9uIHRvSlNPTlNjaGVtYShpbnB1dCwgX3BhcmFtcykgewogIGlmIChpbnB1dCBpbnN0YW5jZW9mICRab2RSZWdpc3RyeSkgewogICAgY29uc3QgZ2VuMiA9IG5ldyBKU09OU2NoZW1hR2VuZXJhdG9yKF9wYXJhbXMpOwogICAgY29uc3QgZGVmcyA9IHt9OwogICAgZm9yIChjb25zdCBlbnRyeSBvZiBpbnB1dC5faWRtYXAuZW50cmllcygpKSB7CiAgICAgIGNvbnN0IFtfLCBzY2hlbWFdID0gZW50cnk7CiAgICAgIGdlbjIucHJvY2VzcyhzY2hlbWEpOwogICAgfQogICAgY29uc3Qgc2NoZW1hcyA9IHt9OwogICAgY29uc3QgZXh0ZXJuYWwgPSB7CiAgICAgIHJlZ2lzdHJ5OiBpbnB1dCwKICAgICAgdXJpOiBfcGFyYW1zID09IG51bGwgPyB2b2lkIDAgOiBfcGFyYW1zLnVyaSwKICAgICAgZGVmcwogICAgfTsKICAgIGZvciAoY29uc3QgZW50cnkgb2YgaW5wdXQuX2lkbWFwLmVudHJpZXMoKSkgewogICAgICBjb25zdCBba2V5LCBzY2hlbWFdID0gZW50cnk7CiAgICAgIHNjaGVtYXNba2V5XSA9IGdlbjIuZW1pdChzY2hlbWEsIHsKICAgICAgICAuLi5fcGFyYW1zLAogICAgICAgIGV4dGVybmFsCiAgICAgIH0pOwogICAgfQogICAgaWYgKE9iamVjdC5rZXlzKGRlZnMpLmxlbmd0aCA+IDApIHsKICAgICAgY29uc3QgZGVmc1NlZ21lbnQgPSBnZW4yLnRhcmdldCA9PT0gImRyYWZ0LTIwMjAtMTIiID8gIiRkZWZzIiA6ICJkZWZpbml0aW9ucyI7CiAgICAgIHNjaGVtYXMuX19zaGFyZWQgPSB7CiAgICAgICAgW2RlZnNTZWdtZW50XTogZGVmcwogICAgICB9OwogICAgfQogICAgcmV0dXJuIHsgc2NoZW1hcyB9OwogIH0KICBjb25zdCBnZW4gPSBuZXcgSlNPTlNjaGVtYUdlbmVyYXRvcihfcGFyYW1zKTsKICBnZW4ucHJvY2VzcyhpbnB1dCk7CiAgcmV0dXJuIGdlbi5lbWl0KGlucHV0LCBfcGFyYW1zKTsKfQpmdW5jdGlvbiBpc1RyYW5zZm9ybWluZyhfc2NoZW1hLCBfY3R4KSB7CiAgY29uc3QgY3R4ID0gX2N0eCA/PyB7IHNlZW46IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCkgfTsKICBpZiAoY3R4LnNlZW4uaGFzKF9zY2hlbWEpKQogICAgcmV0dXJuIGZhbHNlOwogIGN0eC5zZWVuLmFkZChfc2NoZW1hKTsKICBjb25zdCBzY2hlbWEgPSBfc2NoZW1hOwogIGNvbnN0IGRlZiA9IHNjaGVtYS5fem9kLmRlZjsKICBzd2l0Y2ggKGRlZi50eXBlKSB7CiAgICBjYXNlICJzdHJpbmciOgogICAgY2FzZSAibnVtYmVyIjoKICAgIGNhc2UgImJpZ2ludCI6CiAgICBjYXNlICJib29sZWFuIjoKICAgIGNhc2UgImRhdGUiOgogICAgY2FzZSAic3ltYm9sIjoKICAgIGNhc2UgInVuZGVmaW5lZCI6CiAgICBjYXNlICJudWxsIjoKICAgIGNhc2UgImFueSI6CiAgICBjYXNlICJ1bmtub3duIjoKICAgIGNhc2UgIm5ldmVyIjoKICAgIGNhc2UgInZvaWQiOgogICAgY2FzZSAibGl0ZXJhbCI6CiAgICBjYXNlICJlbnVtIjoKICAgIGNhc2UgIm5hbiI6CiAgICBjYXNlICJmaWxlIjoKICAgIGNhc2UgInRlbXBsYXRlX2xpdGVyYWwiOgogICAgICByZXR1cm4gZmFsc2U7CiAgICBjYXNlICJhcnJheSI6IHsKICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5lbGVtZW50LCBjdHgpOwogICAgfQogICAgY2FzZSAib2JqZWN0IjogewogICAgICBmb3IgKGNvbnN0IGtleSBpbiBkZWYuc2hhcGUpIHsKICAgICAgICBpZiAoaXNUcmFuc2Zvcm1pbmcoZGVmLnNoYXBlW2tleV0sIGN0eCkpCiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBjYXNlICJ1bmlvbiI6IHsKICAgICAgZm9yIChjb25zdCBvcHRpb24gb2YgZGVmLm9wdGlvbnMpIHsKICAgICAgICBpZiAoaXNUcmFuc2Zvcm1pbmcob3B0aW9uLCBjdHgpKQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgY2FzZSAiaW50ZXJzZWN0aW9uIjogewogICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmxlZnQsIGN0eCkgfHwgaXNUcmFuc2Zvcm1pbmcoZGVmLnJpZ2h0LCBjdHgpOwogICAgfQogICAgY2FzZSAidHVwbGUiOiB7CiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBkZWYuaXRlbXMpIHsKICAgICAgICBpZiAoaXNUcmFuc2Zvcm1pbmcoaXRlbSwgY3R4KSkKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIGlmIChkZWYucmVzdCAmJiBpc1RyYW5zZm9ybWluZyhkZWYucmVzdCwgY3R4KSkKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgY2FzZSAicmVjb3JkIjogewogICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmtleVR5cGUsIGN0eCkgfHwgaXNUcmFuc2Zvcm1pbmcoZGVmLnZhbHVlVHlwZSwgY3R4KTsKICAgIH0KICAgIGNhc2UgIm1hcCI6IHsKICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5rZXlUeXBlLCBjdHgpIHx8IGlzVHJhbnNmb3JtaW5nKGRlZi52YWx1ZVR5cGUsIGN0eCk7CiAgICB9CiAgICBjYXNlICJzZXQiOiB7CiAgICAgIHJldHVybiBpc1RyYW5zZm9ybWluZyhkZWYudmFsdWVUeXBlLCBjdHgpOwogICAgfQogICAgLy8gaW5uZXIgdHlwZXMKICAgIGNhc2UgInByb21pc2UiOgogICAgY2FzZSAib3B0aW9uYWwiOgogICAgY2FzZSAibm9ub3B0aW9uYWwiOgogICAgY2FzZSAibnVsbGFibGUiOgogICAgY2FzZSAicmVhZG9ubHkiOgogICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmlubmVyVHlwZSwgY3R4KTsKICAgIGNhc2UgImxhenkiOgogICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmdldHRlcigpLCBjdHgpOwogICAgY2FzZSAiZGVmYXVsdCI6IHsKICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5pbm5lclR5cGUsIGN0eCk7CiAgICB9CiAgICBjYXNlICJwcmVmYXVsdCI6IHsKICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5pbm5lclR5cGUsIGN0eCk7CiAgICB9CiAgICBjYXNlICJjdXN0b20iOiB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGNhc2UgInRyYW5zZm9ybSI6IHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICBjYXNlICJwaXBlIjogewogICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmluLCBjdHgpIHx8IGlzVHJhbnNmb3JtaW5nKGRlZi5vdXQsIGN0eCk7CiAgICB9CiAgICBjYXNlICJzdWNjZXNzIjogewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBjYXNlICJjYXRjaCI6IHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgY2FzZSAiZnVuY3Rpb24iOiB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGRlZmF1bHQ6CiAgICAgIGRlZjsKICB9CiAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHNjaGVtYSB0eXBlOiAke2RlZi50eXBlfWApOwp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2NvcmUvanNvbi1zY2hlbWEuanMKdmFyIGpzb25fc2NoZW1hX2V4cG9ydHMgPSB7fTsKCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvY2xhc3NpYy9pc28uanMKdmFyIGlzb19leHBvcnRzID0ge307Cl9fZXhwb3J0KGlzb19leHBvcnRzLCB7CiAgWm9kSVNPRGF0ZTogKCkgPT4gWm9kSVNPRGF0ZSwKICBab2RJU09EYXRlVGltZTogKCkgPT4gWm9kSVNPRGF0ZVRpbWUsCiAgWm9kSVNPRHVyYXRpb246ICgpID0+IFpvZElTT0R1cmF0aW9uLAogIFpvZElTT1RpbWU6ICgpID0+IFpvZElTT1RpbWUsCiAgZGF0ZTogKCkgPT4gZGF0ZTIsCiAgZGF0ZXRpbWU6ICgpID0+IGRhdGV0aW1lMiwKICBkdXJhdGlvbjogKCkgPT4gZHVyYXRpb24yLAogIHRpbWU6ICgpID0+IHRpbWUyCn0pOwp2YXIgWm9kSVNPRGF0ZVRpbWUgPSAkY29uc3RydWN0b3IoIlpvZElTT0RhdGVUaW1lIiwgKGluc3QsIGRlZikgPT4gewogICRab2RJU09EYXRlVGltZS5pbml0KGluc3QsIGRlZik7CiAgWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTsKfSk7CmZ1bmN0aW9uIGRhdGV0aW1lMihwYXJhbXMpIHsKICByZXR1cm4gX2lzb0RhdGVUaW1lKFpvZElTT0RhdGVUaW1lLCBwYXJhbXMpOwp9CnZhciBab2RJU09EYXRlID0gJGNvbnN0cnVjdG9yKCJab2RJU09EYXRlIiwgKGluc3QsIGRlZikgPT4gewogICRab2RJU09EYXRlLmluaXQoaW5zdCwgZGVmKTsKICBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpOwp9KTsKZnVuY3Rpb24gZGF0ZTIocGFyYW1zKSB7CiAgcmV0dXJuIF9pc29EYXRlKFpvZElTT0RhdGUsIHBhcmFtcyk7Cn0KdmFyIFpvZElTT1RpbWUgPSAkY29uc3RydWN0b3IoIlpvZElTT1RpbWUiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZElTT1RpbWUuaW5pdChpbnN0LCBkZWYpOwogIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7Cn0pOwpmdW5jdGlvbiB0aW1lMihwYXJhbXMpIHsKICByZXR1cm4gX2lzb1RpbWUoWm9kSVNPVGltZSwgcGFyYW1zKTsKfQp2YXIgWm9kSVNPRHVyYXRpb24gPSAkY29uc3RydWN0b3IoIlpvZElTT0R1cmF0aW9uIiwgKGluc3QsIGRlZikgPT4gewogICRab2RJU09EdXJhdGlvbi5pbml0KGluc3QsIGRlZik7CiAgWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTsKfSk7CmZ1bmN0aW9uIGR1cmF0aW9uMihwYXJhbXMpIHsKICByZXR1cm4gX2lzb0R1cmF0aW9uKFpvZElTT0R1cmF0aW9uLCBwYXJhbXMpOwp9CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2NsYXNzaWMvZXJyb3JzLmpzCnZhciBpbml0aWFsaXplcjIgPSAoaW5zdCwgaXNzdWVzKSA9PiB7CiAgJFpvZEVycm9yLmluaXQoaW5zdCwgaXNzdWVzKTsKICBpbnN0Lm5hbWUgPSAiWm9kRXJyb3IiOwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGluc3QsIHsKICAgIGZvcm1hdDogewogICAgICB2YWx1ZTogKG1hcHBlcikgPT4gZm9ybWF0RXJyb3IoaW5zdCwgbWFwcGVyKQogICAgICAvLyBlbnVtZXJhYmxlOiBmYWxzZSwKICAgIH0sCiAgICBmbGF0dGVuOiB7CiAgICAgIHZhbHVlOiAobWFwcGVyKSA9PiBmbGF0dGVuRXJyb3IoaW5zdCwgbWFwcGVyKQogICAgICAvLyBlbnVtZXJhYmxlOiBmYWxzZSwKICAgIH0sCiAgICBhZGRJc3N1ZTogewogICAgICB2YWx1ZTogKGlzc3VlMikgPT4gewogICAgICAgIGluc3QuaXNzdWVzLnB1c2goaXNzdWUyKTsKICAgICAgICBpbnN0Lm1lc3NhZ2UgPSBKU09OLnN0cmluZ2lmeShpbnN0Lmlzc3VlcywganNvblN0cmluZ2lmeVJlcGxhY2VyLCAyKTsKICAgICAgfQogICAgICAvLyBlbnVtZXJhYmxlOiBmYWxzZSwKICAgIH0sCiAgICBhZGRJc3N1ZXM6IHsKICAgICAgdmFsdWU6IChpc3N1ZXMyKSA9PiB7CiAgICAgICAgaW5zdC5pc3N1ZXMucHVzaCguLi5pc3N1ZXMyKTsKICAgICAgICBpbnN0Lm1lc3NhZ2UgPSBKU09OLnN0cmluZ2lmeShpbnN0Lmlzc3VlcywganNvblN0cmluZ2lmeVJlcGxhY2VyLCAyKTsKICAgICAgfQogICAgICAvLyBlbnVtZXJhYmxlOiBmYWxzZSwKICAgIH0sCiAgICBpc0VtcHR5OiB7CiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gaW5zdC5pc3N1ZXMubGVuZ3RoID09PSAwOwogICAgICB9CiAgICAgIC8vIGVudW1lcmFibGU6IGZhbHNlLAogICAgfQogIH0pOwp9Owp2YXIgWm9kRXJyb3IgPSAkY29uc3RydWN0b3IoIlpvZEVycm9yIiwgaW5pdGlhbGl6ZXIyKTsKdmFyIFpvZFJlYWxFcnJvciA9ICRjb25zdHJ1Y3RvcigiWm9kRXJyb3IiLCBpbml0aWFsaXplcjIsIHsKICBQYXJlbnQ6IEVycm9yCn0pOwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9jbGFzc2ljL3BhcnNlLmpzCnZhciBwYXJzZTIgPSBfcGFyc2UoWm9kUmVhbEVycm9yKTsKdmFyIHBhcnNlQXN5bmMyID0gX3BhcnNlQXN5bmMoWm9kUmVhbEVycm9yKTsKdmFyIHNhZmVQYXJzZTIgPSBfc2FmZVBhcnNlKFpvZFJlYWxFcnJvcik7CnZhciBzYWZlUGFyc2VBc3luYzIgPSBfc2FmZVBhcnNlQXN5bmMoWm9kUmVhbEVycm9yKTsKdmFyIGVuY29kZTIgPSBfZW5jb2RlKFpvZFJlYWxFcnJvcik7CnZhciBkZWNvZGUyID0gX2RlY29kZShab2RSZWFsRXJyb3IpOwp2YXIgZW5jb2RlQXN5bmMyID0gX2VuY29kZUFzeW5jKFpvZFJlYWxFcnJvcik7CnZhciBkZWNvZGVBc3luYzIgPSBfZGVjb2RlQXN5bmMoWm9kUmVhbEVycm9yKTsKdmFyIHNhZmVFbmNvZGUyID0gX3NhZmVFbmNvZGUoWm9kUmVhbEVycm9yKTsKdmFyIHNhZmVEZWNvZGUyID0gX3NhZmVEZWNvZGUoWm9kUmVhbEVycm9yKTsKdmFyIHNhZmVFbmNvZGVBc3luYzIgPSBfc2FmZUVuY29kZUFzeW5jKFpvZFJlYWxFcnJvcik7CnZhciBzYWZlRGVjb2RlQXN5bmMyID0gX3NhZmVEZWNvZGVBc3luYyhab2RSZWFsRXJyb3IpOwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9jbGFzc2ljL3NjaGVtYXMuanMKdmFyIFpvZFR5cGUgPSAkY29uc3RydWN0b3IoIlpvZFR5cGUiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGluc3QuZGVmID0gZGVmOwogIGluc3QudHlwZSA9IGRlZi50eXBlOwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbnN0LCAiX2RlZiIsIHsgdmFsdWU6IGRlZiB9KTsKICBpbnN0LmNoZWNrID0gKC4uLmNoZWNrcykgPT4gewogICAgcmV0dXJuIGluc3QuY2xvbmUoCiAgICAgIHsKICAgICAgICAuLi5kZWYsCiAgICAgICAgY2hlY2tzOiBbCiAgICAgICAgICAuLi5kZWYuY2hlY2tzID8/IFtdLAogICAgICAgICAgLi4uY2hlY2tzLm1hcCgoY2gpID0+IHR5cGVvZiBjaCA9PT0gImZ1bmN0aW9uIiA/IHsgX3pvZDogeyBjaGVjazogY2gsIGRlZjogeyBjaGVjazogImN1c3RvbSIgfSwgb25hdHRhY2g6IFtdIH0gfSA6IGNoKQogICAgICAgIF0KICAgICAgfQogICAgICAvLyB7IHBhcmVudDogdHJ1ZSB9CiAgICApOwogIH07CiAgaW5zdC5jbG9uZSA9IChkZWYyLCBwYXJhbXMpID0+IGNsb25lKGluc3QsIGRlZjIsIHBhcmFtcyk7CiAgaW5zdC5icmFuZCA9ICgpID0+IGluc3Q7CiAgaW5zdC5yZWdpc3RlciA9ICgocmVnLCBtZXRhKSA9PiB7CiAgICByZWcuYWRkKGluc3QsIG1ldGEpOwogICAgcmV0dXJuIGluc3Q7CiAgfSk7CiAgaW5zdC5wYXJzZSA9IChkYXRhLCBwYXJhbXMpID0+IHBhcnNlMihpbnN0LCBkYXRhLCBwYXJhbXMsIHsgY2FsbGVlOiBpbnN0LnBhcnNlIH0pOwogIGluc3Quc2FmZVBhcnNlID0gKGRhdGEsIHBhcmFtcykgPT4gc2FmZVBhcnNlMihpbnN0LCBkYXRhLCBwYXJhbXMpOwogIGluc3QucGFyc2VBc3luYyA9IGFzeW5jIChkYXRhLCBwYXJhbXMpID0+IHBhcnNlQXN5bmMyKGluc3QsIGRhdGEsIHBhcmFtcywgeyBjYWxsZWU6IGluc3QucGFyc2VBc3luYyB9KTsKICBpbnN0LnNhZmVQYXJzZUFzeW5jID0gYXN5bmMgKGRhdGEsIHBhcmFtcykgPT4gc2FmZVBhcnNlQXN5bmMyKGluc3QsIGRhdGEsIHBhcmFtcyk7CiAgaW5zdC5zcGEgPSBpbnN0LnNhZmVQYXJzZUFzeW5jOwogIGluc3QuZW5jb2RlID0gKGRhdGEsIHBhcmFtcykgPT4gZW5jb2RlMihpbnN0LCBkYXRhLCBwYXJhbXMpOwogIGluc3QuZGVjb2RlID0gKGRhdGEsIHBhcmFtcykgPT4gZGVjb2RlMihpbnN0LCBkYXRhLCBwYXJhbXMpOwogIGluc3QuZW5jb2RlQXN5bmMgPSBhc3luYyAoZGF0YSwgcGFyYW1zKSA9PiBlbmNvZGVBc3luYzIoaW5zdCwgZGF0YSwgcGFyYW1zKTsKICBpbnN0LmRlY29kZUFzeW5jID0gYXN5bmMgKGRhdGEsIHBhcmFtcykgPT4gZGVjb2RlQXN5bmMyKGluc3QsIGRhdGEsIHBhcmFtcyk7CiAgaW5zdC5zYWZlRW5jb2RlID0gKGRhdGEsIHBhcmFtcykgPT4gc2FmZUVuY29kZTIoaW5zdCwgZGF0YSwgcGFyYW1zKTsKICBpbnN0LnNhZmVEZWNvZGUgPSAoZGF0YSwgcGFyYW1zKSA9PiBzYWZlRGVjb2RlMihpbnN0LCBkYXRhLCBwYXJhbXMpOwogIGluc3Quc2FmZUVuY29kZUFzeW5jID0gYXN5bmMgKGRhdGEsIHBhcmFtcykgPT4gc2FmZUVuY29kZUFzeW5jMihpbnN0LCBkYXRhLCBwYXJhbXMpOwogIGluc3Quc2FmZURlY29kZUFzeW5jID0gYXN5bmMgKGRhdGEsIHBhcmFtcykgPT4gc2FmZURlY29kZUFzeW5jMihpbnN0LCBkYXRhLCBwYXJhbXMpOwogIGluc3QucmVmaW5lID0gKGNoZWNrMiwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKHJlZmluZShjaGVjazIsIHBhcmFtcykpOwogIGluc3Quc3VwZXJSZWZpbmUgPSAocmVmaW5lbWVudCkgPT4gaW5zdC5jaGVjayhzdXBlclJlZmluZShyZWZpbmVtZW50KSk7CiAgaW5zdC5vdmVyd3JpdGUgPSAoZm4pID0+IGluc3QuY2hlY2soX292ZXJ3cml0ZShmbikpOwogIGluc3Qub3B0aW9uYWwgPSAoKSA9PiBvcHRpb25hbChpbnN0KTsKICBpbnN0Lm51bGxhYmxlID0gKCkgPT4gbnVsbGFibGUoaW5zdCk7CiAgaW5zdC5udWxsaXNoID0gKCkgPT4gb3B0aW9uYWwobnVsbGFibGUoaW5zdCkpOwogIGluc3Qubm9ub3B0aW9uYWwgPSAocGFyYW1zKSA9PiBub25vcHRpb25hbChpbnN0LCBwYXJhbXMpOwogIGluc3QuYXJyYXkgPSAoKSA9PiBhcnJheShpbnN0KTsKICBpbnN0Lm9yID0gKGFyZykgPT4gdW5pb24oW2luc3QsIGFyZ10pOwogIGluc3QuYW5kID0gKGFyZykgPT4gaW50ZXJzZWN0aW9uKGluc3QsIGFyZyk7CiAgaW5zdC50cmFuc2Zvcm0gPSAodHgpID0+IHBpcGUoaW5zdCwgdHJhbnNmb3JtKHR4KSk7CiAgaW5zdC5kZWZhdWx0ID0gKGRlZjIpID0+IF9kZWZhdWx0MihpbnN0LCBkZWYyKTsKICBpbnN0LnByZWZhdWx0ID0gKGRlZjIpID0+IHByZWZhdWx0KGluc3QsIGRlZjIpOwogIGluc3QuY2F0Y2ggPSAocGFyYW1zKSA9PiBfY2F0Y2gyKGluc3QsIHBhcmFtcyk7CiAgaW5zdC5waXBlID0gKHRhcmdldCkgPT4gcGlwZShpbnN0LCB0YXJnZXQpOwogIGluc3QucmVhZG9ubHkgPSAoKSA9PiByZWFkb25seShpbnN0KTsKICBpbnN0LmRlc2NyaWJlID0gKGRlc2NyaXB0aW9uKSA9PiB7CiAgICBjb25zdCBjbCA9IGluc3QuY2xvbmUoKTsKICAgIGdsb2JhbFJlZ2lzdHJ5LmFkZChjbCwgeyBkZXNjcmlwdGlvbiB9KTsKICAgIHJldHVybiBjbDsKICB9OwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbnN0LCAiZGVzY3JpcHRpb24iLCB7CiAgICBnZXQoKSB7CiAgICAgIHZhciBfYTsKICAgICAgcmV0dXJuIChfYSA9IGdsb2JhbFJlZ2lzdHJ5LmdldChpbnN0KSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmRlc2NyaXB0aW9uOwogICAgfSwKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogIH0pOwogIGluc3QubWV0YSA9ICguLi5hcmdzKSA9PiB7CiAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHsKICAgICAgcmV0dXJuIGdsb2JhbFJlZ2lzdHJ5LmdldChpbnN0KTsKICAgIH0KICAgIGNvbnN0IGNsID0gaW5zdC5jbG9uZSgpOwogICAgZ2xvYmFsUmVnaXN0cnkuYWRkKGNsLCBhcmdzWzBdKTsKICAgIHJldHVybiBjbDsKICB9OwogIGluc3QuaXNPcHRpb25hbCA9ICgpID0+IGluc3Quc2FmZVBhcnNlKHZvaWQgMCkuc3VjY2VzczsKICBpbnN0LmlzTnVsbGFibGUgPSAoKSA9PiBpbnN0LnNhZmVQYXJzZShudWxsKS5zdWNjZXNzOwogIHJldHVybiBpbnN0Owp9KTsKdmFyIF9ab2RTdHJpbmcgPSAkY29uc3RydWN0b3IoIl9ab2RTdHJpbmciLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFN0cmluZy5pbml0KGluc3QsIGRlZik7CiAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7CiAgY29uc3QgYmFnID0gaW5zdC5fem9kLmJhZzsKICBpbnN0LmZvcm1hdCA9IGJhZy5mb3JtYXQgPz8gbnVsbDsKICBpbnN0Lm1pbkxlbmd0aCA9IGJhZy5taW5pbXVtID8/IG51bGw7CiAgaW5zdC5tYXhMZW5ndGggPSBiYWcubWF4aW11bSA/PyBudWxsOwogIGluc3QucmVnZXggPSAoLi4uYXJncykgPT4gaW5zdC5jaGVjayhfcmVnZXgoLi4uYXJncykpOwogIGluc3QuaW5jbHVkZXMgPSAoLi4uYXJncykgPT4gaW5zdC5jaGVjayhfaW5jbHVkZXMoLi4uYXJncykpOwogIGluc3Quc3RhcnRzV2l0aCA9ICguLi5hcmdzKSA9PiBpbnN0LmNoZWNrKF9zdGFydHNXaXRoKC4uLmFyZ3MpKTsKICBpbnN0LmVuZHNXaXRoID0gKC4uLmFyZ3MpID0+IGluc3QuY2hlY2soX2VuZHNXaXRoKC4uLmFyZ3MpKTsKICBpbnN0Lm1pbiA9ICguLi5hcmdzKSA9PiBpbnN0LmNoZWNrKF9taW5MZW5ndGgoLi4uYXJncykpOwogIGluc3QubWF4ID0gKC4uLmFyZ3MpID0+IGluc3QuY2hlY2soX21heExlbmd0aCguLi5hcmdzKSk7CiAgaW5zdC5sZW5ndGggPSAoLi4uYXJncykgPT4gaW5zdC5jaGVjayhfbGVuZ3RoKC4uLmFyZ3MpKTsKICBpbnN0Lm5vbmVtcHR5ID0gKC4uLmFyZ3MpID0+IGluc3QuY2hlY2soX21pbkxlbmd0aCgxLCAuLi5hcmdzKSk7CiAgaW5zdC5sb3dlcmNhc2UgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKF9sb3dlcmNhc2UocGFyYW1zKSk7CiAgaW5zdC51cHBlcmNhc2UgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKF91cHBlcmNhc2UocGFyYW1zKSk7CiAgaW5zdC50cmltID0gKCkgPT4gaW5zdC5jaGVjayhfdHJpbSgpKTsKICBpbnN0Lm5vcm1hbGl6ZSA9ICguLi5hcmdzKSA9PiBpbnN0LmNoZWNrKF9ub3JtYWxpemUoLi4uYXJncykpOwogIGluc3QudG9Mb3dlckNhc2UgPSAoKSA9PiBpbnN0LmNoZWNrKF90b0xvd2VyQ2FzZSgpKTsKICBpbnN0LnRvVXBwZXJDYXNlID0gKCkgPT4gaW5zdC5jaGVjayhfdG9VcHBlckNhc2UoKSk7Cn0pOwp2YXIgWm9kU3RyaW5nID0gJGNvbnN0cnVjdG9yKCJab2RTdHJpbmciLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFN0cmluZy5pbml0KGluc3QsIGRlZik7CiAgX1pvZFN0cmluZy5pbml0KGluc3QsIGRlZik7CiAgaW5zdC5lbWFpbCA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soX2VtYWlsKFpvZEVtYWlsLCBwYXJhbXMpKTsKICBpbnN0LnVybCA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soX3VybChab2RVUkwsIHBhcmFtcykpOwogIGluc3Quand0ID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhfand0KFpvZEpXVCwgcGFyYW1zKSk7CiAgaW5zdC5lbW9qaSA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soX2Vtb2ppMihab2RFbW9qaSwgcGFyYW1zKSk7CiAgaW5zdC5ndWlkID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhfZ3VpZChab2RHVUlELCBwYXJhbXMpKTsKICBpbnN0LnV1aWQgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKF91dWlkKFpvZFVVSUQsIHBhcmFtcykpOwogIGluc3QudXVpZHY0ID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhfdXVpZHY0KFpvZFVVSUQsIHBhcmFtcykpOwogIGluc3QudXVpZHY2ID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhfdXVpZHY2KFpvZFVVSUQsIHBhcmFtcykpOwogIGluc3QudXVpZHY3ID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhfdXVpZHY3KFpvZFVVSUQsIHBhcmFtcykpOwogIGluc3QubmFub2lkID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhfbmFub2lkKFpvZE5hbm9JRCwgcGFyYW1zKSk7CiAgaW5zdC5ndWlkID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhfZ3VpZChab2RHVUlELCBwYXJhbXMpKTsKICBpbnN0LmN1aWQgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKF9jdWlkKFpvZENVSUQsIHBhcmFtcykpOwogIGluc3QuY3VpZDIgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKF9jdWlkMihab2RDVUlEMiwgcGFyYW1zKSk7CiAgaW5zdC51bGlkID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhfdWxpZChab2RVTElELCBwYXJhbXMpKTsKICBpbnN0LmJhc2U2NCA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soX2Jhc2U2NChab2RCYXNlNjQsIHBhcmFtcykpOwogIGluc3QuYmFzZTY0dXJsID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhfYmFzZTY0dXJsKFpvZEJhc2U2NFVSTCwgcGFyYW1zKSk7CiAgaW5zdC54aWQgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKF94aWQoWm9kWElELCBwYXJhbXMpKTsKICBpbnN0LmtzdWlkID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhfa3N1aWQoWm9kS1NVSUQsIHBhcmFtcykpOwogIGluc3QuaXB2NCA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soX2lwdjQoWm9kSVB2NCwgcGFyYW1zKSk7CiAgaW5zdC5pcHY2ID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhfaXB2Nihab2RJUHY2LCBwYXJhbXMpKTsKICBpbnN0LmNpZHJ2NCA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soX2NpZHJ2NChab2RDSURSdjQsIHBhcmFtcykpOwogIGluc3QuY2lkcnY2ID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhfY2lkcnY2KFpvZENJRFJ2NiwgcGFyYW1zKSk7CiAgaW5zdC5lMTY0ID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhfZTE2NChab2RFMTY0LCBwYXJhbXMpKTsKICBpbnN0LmRhdGV0aW1lID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhkYXRldGltZTIocGFyYW1zKSk7CiAgaW5zdC5kYXRlID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhkYXRlMihwYXJhbXMpKTsKICBpbnN0LnRpbWUgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKHRpbWUyKHBhcmFtcykpOwogIGluc3QuZHVyYXRpb24gPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGR1cmF0aW9uMihwYXJhbXMpKTsKfSk7CmZ1bmN0aW9uIHN0cmluZzIocGFyYW1zKSB7CiAgcmV0dXJuIF9zdHJpbmcoWm9kU3RyaW5nLCBwYXJhbXMpOwp9CnZhciBab2RTdHJpbmdGb3JtYXQgPSAkY29uc3RydWN0b3IoIlpvZFN0cmluZ0Zvcm1hdCIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTsKICBfWm9kU3RyaW5nLmluaXQoaW5zdCwgZGVmKTsKfSk7CnZhciBab2RFbWFpbCA9ICRjb25zdHJ1Y3RvcigiWm9kRW1haWwiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZEVtYWlsLmluaXQoaW5zdCwgZGVmKTsKICBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpOwp9KTsKZnVuY3Rpb24gZW1haWwyKHBhcmFtcykgewogIHJldHVybiBfZW1haWwoWm9kRW1haWwsIHBhcmFtcyk7Cn0KdmFyIFpvZEdVSUQgPSAkY29uc3RydWN0b3IoIlpvZEdVSUQiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZEdVSUQuaW5pdChpbnN0LCBkZWYpOwogIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7Cn0pOwpmdW5jdGlvbiBndWlkMihwYXJhbXMpIHsKICByZXR1cm4gX2d1aWQoWm9kR1VJRCwgcGFyYW1zKTsKfQp2YXIgWm9kVVVJRCA9ICRjb25zdHJ1Y3RvcigiWm9kVVVJRCIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kVVVJRC5pbml0KGluc3QsIGRlZik7CiAgWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTsKfSk7CmZ1bmN0aW9uIHV1aWQyKHBhcmFtcykgewogIHJldHVybiBfdXVpZChab2RVVUlELCBwYXJhbXMpOwp9CmZ1bmN0aW9uIHV1aWR2NChwYXJhbXMpIHsKICByZXR1cm4gX3V1aWR2NChab2RVVUlELCBwYXJhbXMpOwp9CmZ1bmN0aW9uIHV1aWR2NihwYXJhbXMpIHsKICByZXR1cm4gX3V1aWR2Nihab2RVVUlELCBwYXJhbXMpOwp9CmZ1bmN0aW9uIHV1aWR2NyhwYXJhbXMpIHsKICByZXR1cm4gX3V1aWR2Nyhab2RVVUlELCBwYXJhbXMpOwp9CnZhciBab2RVUkwgPSAkY29uc3RydWN0b3IoIlpvZFVSTCIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kVVJMLmluaXQoaW5zdCwgZGVmKTsKICBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpOwp9KTsKZnVuY3Rpb24gdXJsKHBhcmFtcykgewogIHJldHVybiBfdXJsKFpvZFVSTCwgcGFyYW1zKTsKfQpmdW5jdGlvbiBodHRwVXJsKHBhcmFtcykgewogIHJldHVybiBfdXJsKFpvZFVSTCwgewogICAgcHJvdG9jb2w6IC9eaHR0cHM/JC8sCiAgICBob3N0bmFtZTogcmVnZXhlc19leHBvcnRzLmRvbWFpbiwKICAgIC4uLnV0aWxfZXhwb3J0cy5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CnZhciBab2RFbW9qaSA9ICRjb25zdHJ1Y3RvcigiWm9kRW1vamkiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZEVtb2ppLmluaXQoaW5zdCwgZGVmKTsKICBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpOwp9KTsKZnVuY3Rpb24gZW1vamkyKHBhcmFtcykgewogIHJldHVybiBfZW1vamkyKFpvZEVtb2ppLCBwYXJhbXMpOwp9CnZhciBab2ROYW5vSUQgPSAkY29uc3RydWN0b3IoIlpvZE5hbm9JRCIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kTmFub0lELmluaXQoaW5zdCwgZGVmKTsKICBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpOwp9KTsKZnVuY3Rpb24gbmFub2lkMihwYXJhbXMpIHsKICByZXR1cm4gX25hbm9pZChab2ROYW5vSUQsIHBhcmFtcyk7Cn0KdmFyIFpvZENVSUQgPSAkY29uc3RydWN0b3IoIlpvZENVSUQiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZENVSUQuaW5pdChpbnN0LCBkZWYpOwogIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7Cn0pOwpmdW5jdGlvbiBjdWlkMyhwYXJhbXMpIHsKICByZXR1cm4gX2N1aWQoWm9kQ1VJRCwgcGFyYW1zKTsKfQp2YXIgWm9kQ1VJRDIgPSAkY29uc3RydWN0b3IoIlpvZENVSUQyIiwgKGluc3QsIGRlZikgPT4gewogICRab2RDVUlEMi5pbml0KGluc3QsIGRlZik7CiAgWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTsKfSk7CmZ1bmN0aW9uIGN1aWQyMihwYXJhbXMpIHsKICByZXR1cm4gX2N1aWQyKFpvZENVSUQyLCBwYXJhbXMpOwp9CnZhciBab2RVTElEID0gJGNvbnN0cnVjdG9yKCJab2RVTElEIiwgKGluc3QsIGRlZikgPT4gewogICRab2RVTElELmluaXQoaW5zdCwgZGVmKTsKICBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpOwp9KTsKZnVuY3Rpb24gdWxpZDIocGFyYW1zKSB7CiAgcmV0dXJuIF91bGlkKFpvZFVMSUQsIHBhcmFtcyk7Cn0KdmFyIFpvZFhJRCA9ICRjb25zdHJ1Y3RvcigiWm9kWElEIiwgKGluc3QsIGRlZikgPT4gewogICRab2RYSUQuaW5pdChpbnN0LCBkZWYpOwogIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7Cn0pOwpmdW5jdGlvbiB4aWQyKHBhcmFtcykgewogIHJldHVybiBfeGlkKFpvZFhJRCwgcGFyYW1zKTsKfQp2YXIgWm9kS1NVSUQgPSAkY29uc3RydWN0b3IoIlpvZEtTVUlEIiwgKGluc3QsIGRlZikgPT4gewogICRab2RLU1VJRC5pbml0KGluc3QsIGRlZik7CiAgWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTsKfSk7CmZ1bmN0aW9uIGtzdWlkMihwYXJhbXMpIHsKICByZXR1cm4gX2tzdWlkKFpvZEtTVUlELCBwYXJhbXMpOwp9CnZhciBab2RJUHY0ID0gJGNvbnN0cnVjdG9yKCJab2RJUHY0IiwgKGluc3QsIGRlZikgPT4gewogICRab2RJUHY0LmluaXQoaW5zdCwgZGVmKTsKICBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpOwp9KTsKZnVuY3Rpb24gaXB2NDIocGFyYW1zKSB7CiAgcmV0dXJuIF9pcHY0KFpvZElQdjQsIHBhcmFtcyk7Cn0KdmFyIFpvZElQdjYgPSAkY29uc3RydWN0b3IoIlpvZElQdjYiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZElQdjYuaW5pdChpbnN0LCBkZWYpOwogIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7Cn0pOwpmdW5jdGlvbiBpcHY2MihwYXJhbXMpIHsKICByZXR1cm4gX2lwdjYoWm9kSVB2NiwgcGFyYW1zKTsKfQp2YXIgWm9kQ0lEUnY0ID0gJGNvbnN0cnVjdG9yKCJab2RDSURSdjQiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZENJRFJ2NC5pbml0KGluc3QsIGRlZik7CiAgWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTsKfSk7CmZ1bmN0aW9uIGNpZHJ2NDIocGFyYW1zKSB7CiAgcmV0dXJuIF9jaWRydjQoWm9kQ0lEUnY0LCBwYXJhbXMpOwp9CnZhciBab2RDSURSdjYgPSAkY29uc3RydWN0b3IoIlpvZENJRFJ2NiIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kQ0lEUnY2LmluaXQoaW5zdCwgZGVmKTsKICBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpOwp9KTsKZnVuY3Rpb24gY2lkcnY2MihwYXJhbXMpIHsKICByZXR1cm4gX2NpZHJ2Nihab2RDSURSdjYsIHBhcmFtcyk7Cn0KdmFyIFpvZEJhc2U2NCA9ICRjb25zdHJ1Y3RvcigiWm9kQmFzZTY0IiwgKGluc3QsIGRlZikgPT4gewogICRab2RCYXNlNjQuaW5pdChpbnN0LCBkZWYpOwogIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7Cn0pOwpmdW5jdGlvbiBiYXNlNjQyKHBhcmFtcykgewogIHJldHVybiBfYmFzZTY0KFpvZEJhc2U2NCwgcGFyYW1zKTsKfQp2YXIgWm9kQmFzZTY0VVJMID0gJGNvbnN0cnVjdG9yKCJab2RCYXNlNjRVUkwiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZEJhc2U2NFVSTC5pbml0KGluc3QsIGRlZik7CiAgWm9kU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTsKfSk7CmZ1bmN0aW9uIGJhc2U2NHVybDIocGFyYW1zKSB7CiAgcmV0dXJuIF9iYXNlNjR1cmwoWm9kQmFzZTY0VVJMLCBwYXJhbXMpOwp9CnZhciBab2RFMTY0ID0gJGNvbnN0cnVjdG9yKCJab2RFMTY0IiwgKGluc3QsIGRlZikgPT4gewogICRab2RFMTY0LmluaXQoaW5zdCwgZGVmKTsKICBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpOwp9KTsKZnVuY3Rpb24gZTE2NDIocGFyYW1zKSB7CiAgcmV0dXJuIF9lMTY0KFpvZEUxNjQsIHBhcmFtcyk7Cn0KdmFyIFpvZEpXVCA9ICRjb25zdHJ1Y3RvcigiWm9kSldUIiwgKGluc3QsIGRlZikgPT4gewogICRab2RKV1QuaW5pdChpbnN0LCBkZWYpOwogIFpvZFN0cmluZ0Zvcm1hdC5pbml0KGluc3QsIGRlZik7Cn0pOwpmdW5jdGlvbiBqd3QocGFyYW1zKSB7CiAgcmV0dXJuIF9qd3QoWm9kSldULCBwYXJhbXMpOwp9CnZhciBab2RDdXN0b21TdHJpbmdGb3JtYXQgPSAkY29uc3RydWN0b3IoIlpvZEN1c3RvbVN0cmluZ0Zvcm1hdCIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kQ3VzdG9tU3RyaW5nRm9ybWF0LmluaXQoaW5zdCwgZGVmKTsKICBab2RTdHJpbmdGb3JtYXQuaW5pdChpbnN0LCBkZWYpOwp9KTsKZnVuY3Rpb24gc3RyaW5nRm9ybWF0KGZvcm1hdCwgZm5PclJlZ2V4LCBfcGFyYW1zID0ge30pIHsKICByZXR1cm4gX3N0cmluZ0Zvcm1hdChab2RDdXN0b21TdHJpbmdGb3JtYXQsIGZvcm1hdCwgZm5PclJlZ2V4LCBfcGFyYW1zKTsKfQpmdW5jdGlvbiBob3N0bmFtZTIoX3BhcmFtcykgewogIHJldHVybiBfc3RyaW5nRm9ybWF0KFpvZEN1c3RvbVN0cmluZ0Zvcm1hdCwgImhvc3RuYW1lIiwgcmVnZXhlc19leHBvcnRzLmhvc3RuYW1lLCBfcGFyYW1zKTsKfQpmdW5jdGlvbiBoZXgyKF9wYXJhbXMpIHsKICByZXR1cm4gX3N0cmluZ0Zvcm1hdChab2RDdXN0b21TdHJpbmdGb3JtYXQsICJoZXgiLCByZWdleGVzX2V4cG9ydHMuaGV4LCBfcGFyYW1zKTsKfQpmdW5jdGlvbiBoYXNoKGFsZywgcGFyYW1zKSB7CiAgY29uc3QgZW5jID0gKHBhcmFtcyA9PSBudWxsID8gdm9pZCAwIDogcGFyYW1zLmVuYykgPz8gImhleCI7CiAgY29uc3QgZm9ybWF0ID0gYCR7YWxnfV8ke2VuY31gOwogIGNvbnN0IHJlZ2V4ID0gcmVnZXhlc19leHBvcnRzW2Zvcm1hdF07CiAgaWYgKCFyZWdleCkKICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIGhhc2ggZm9ybWF0OiAke2Zvcm1hdH1gKTsKICByZXR1cm4gX3N0cmluZ0Zvcm1hdChab2RDdXN0b21TdHJpbmdGb3JtYXQsIGZvcm1hdCwgcmVnZXgsIHBhcmFtcyk7Cn0KdmFyIFpvZE51bWJlciA9ICRjb25zdHJ1Y3RvcigiWm9kTnVtYmVyIiwgKGluc3QsIGRlZikgPT4gewogICRab2ROdW1iZXIuaW5pdChpbnN0LCBkZWYpOwogIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGluc3QuZ3QgPSAodmFsdWUsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhfZ3QodmFsdWUsIHBhcmFtcykpOwogIGluc3QuZ3RlID0gKHZhbHVlLCBwYXJhbXMpID0+IGluc3QuY2hlY2soX2d0ZSh2YWx1ZSwgcGFyYW1zKSk7CiAgaW5zdC5taW4gPSAodmFsdWUsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhfZ3RlKHZhbHVlLCBwYXJhbXMpKTsKICBpbnN0Lmx0ID0gKHZhbHVlLCBwYXJhbXMpID0+IGluc3QuY2hlY2soX2x0KHZhbHVlLCBwYXJhbXMpKTsKICBpbnN0Lmx0ZSA9ICh2YWx1ZSwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKF9sdGUodmFsdWUsIHBhcmFtcykpOwogIGluc3QubWF4ID0gKHZhbHVlLCBwYXJhbXMpID0+IGluc3QuY2hlY2soX2x0ZSh2YWx1ZSwgcGFyYW1zKSk7CiAgaW5zdC5pbnQgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGludChwYXJhbXMpKTsKICBpbnN0LnNhZmUgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKGludChwYXJhbXMpKTsKICBpbnN0LnBvc2l0aXZlID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhfZ3QoMCwgcGFyYW1zKSk7CiAgaW5zdC5ub25uZWdhdGl2ZSA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soX2d0ZSgwLCBwYXJhbXMpKTsKICBpbnN0Lm5lZ2F0aXZlID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhfbHQoMCwgcGFyYW1zKSk7CiAgaW5zdC5ub25wb3NpdGl2ZSA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soX2x0ZSgwLCBwYXJhbXMpKTsKICBpbnN0Lm11bHRpcGxlT2YgPSAodmFsdWUsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhfbXVsdGlwbGVPZih2YWx1ZSwgcGFyYW1zKSk7CiAgaW5zdC5zdGVwID0gKHZhbHVlLCBwYXJhbXMpID0+IGluc3QuY2hlY2soX211bHRpcGxlT2YodmFsdWUsIHBhcmFtcykpOwogIGluc3QuZmluaXRlID0gKCkgPT4gaW5zdDsKICBjb25zdCBiYWcgPSBpbnN0Ll96b2QuYmFnOwogIGluc3QubWluVmFsdWUgPSBNYXRoLm1heChiYWcubWluaW11bSA/PyBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksIGJhZy5leGNsdXNpdmVNaW5pbXVtID8/IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSkgPz8gbnVsbDsKICBpbnN0Lm1heFZhbHVlID0gTWF0aC5taW4oYmFnLm1heGltdW0gPz8gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLCBiYWcuZXhjbHVzaXZlTWF4aW11bSA/PyBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpID8/IG51bGw7CiAgaW5zdC5pc0ludCA9IChiYWcuZm9ybWF0ID8/ICIiKS5pbmNsdWRlcygiaW50IikgfHwgTnVtYmVyLmlzU2FmZUludGVnZXIoYmFnLm11bHRpcGxlT2YgPz8gMC41KTsKICBpbnN0LmlzRmluaXRlID0gdHJ1ZTsKICBpbnN0LmZvcm1hdCA9IGJhZy5mb3JtYXQgPz8gbnVsbDsKfSk7CmZ1bmN0aW9uIG51bWJlcjIocGFyYW1zKSB7CiAgcmV0dXJuIF9udW1iZXIoWm9kTnVtYmVyLCBwYXJhbXMpOwp9CnZhciBab2ROdW1iZXJGb3JtYXQgPSAkY29uc3RydWN0b3IoIlpvZE51bWJlckZvcm1hdCIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kTnVtYmVyRm9ybWF0LmluaXQoaW5zdCwgZGVmKTsKICBab2ROdW1iZXIuaW5pdChpbnN0LCBkZWYpOwp9KTsKZnVuY3Rpb24gaW50KHBhcmFtcykgewogIHJldHVybiBfaW50KFpvZE51bWJlckZvcm1hdCwgcGFyYW1zKTsKfQpmdW5jdGlvbiBmbG9hdDMyKHBhcmFtcykgewogIHJldHVybiBfZmxvYXQzMihab2ROdW1iZXJGb3JtYXQsIHBhcmFtcyk7Cn0KZnVuY3Rpb24gZmxvYXQ2NChwYXJhbXMpIHsKICByZXR1cm4gX2Zsb2F0NjQoWm9kTnVtYmVyRm9ybWF0LCBwYXJhbXMpOwp9CmZ1bmN0aW9uIGludDMyKHBhcmFtcykgewogIHJldHVybiBfaW50MzIoWm9kTnVtYmVyRm9ybWF0LCBwYXJhbXMpOwp9CmZ1bmN0aW9uIHVpbnQzMihwYXJhbXMpIHsKICByZXR1cm4gX3VpbnQzMihab2ROdW1iZXJGb3JtYXQsIHBhcmFtcyk7Cn0KdmFyIFpvZEJvb2xlYW4gPSAkY29uc3RydWN0b3IoIlpvZEJvb2xlYW4iLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZEJvb2xlYW4uaW5pdChpbnN0LCBkZWYpOwogIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwp9KTsKZnVuY3Rpb24gYm9vbGVhbjIocGFyYW1zKSB7CiAgcmV0dXJuIF9ib29sZWFuKFpvZEJvb2xlYW4sIHBhcmFtcyk7Cn0KdmFyIFpvZEJpZ0ludCA9ICRjb25zdHJ1Y3RvcigiWm9kQmlnSW50IiwgKGluc3QsIGRlZikgPT4gewogICRab2RCaWdJbnQuaW5pdChpbnN0LCBkZWYpOwogIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGluc3QuZ3RlID0gKHZhbHVlLCBwYXJhbXMpID0+IGluc3QuY2hlY2soX2d0ZSh2YWx1ZSwgcGFyYW1zKSk7CiAgaW5zdC5taW4gPSAodmFsdWUsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhfZ3RlKHZhbHVlLCBwYXJhbXMpKTsKICBpbnN0Lmd0ID0gKHZhbHVlLCBwYXJhbXMpID0+IGluc3QuY2hlY2soX2d0KHZhbHVlLCBwYXJhbXMpKTsKICBpbnN0Lmd0ZSA9ICh2YWx1ZSwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKF9ndGUodmFsdWUsIHBhcmFtcykpOwogIGluc3QubWluID0gKHZhbHVlLCBwYXJhbXMpID0+IGluc3QuY2hlY2soX2d0ZSh2YWx1ZSwgcGFyYW1zKSk7CiAgaW5zdC5sdCA9ICh2YWx1ZSwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKF9sdCh2YWx1ZSwgcGFyYW1zKSk7CiAgaW5zdC5sdGUgPSAodmFsdWUsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhfbHRlKHZhbHVlLCBwYXJhbXMpKTsKICBpbnN0Lm1heCA9ICh2YWx1ZSwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKF9sdGUodmFsdWUsIHBhcmFtcykpOwogIGluc3QucG9zaXRpdmUgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKF9ndChCaWdJbnQoMCksIHBhcmFtcykpOwogIGluc3QubmVnYXRpdmUgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKF9sdChCaWdJbnQoMCksIHBhcmFtcykpOwogIGluc3Qubm9ucG9zaXRpdmUgPSAocGFyYW1zKSA9PiBpbnN0LmNoZWNrKF9sdGUoQmlnSW50KDApLCBwYXJhbXMpKTsKICBpbnN0Lm5vbm5lZ2F0aXZlID0gKHBhcmFtcykgPT4gaW5zdC5jaGVjayhfZ3RlKEJpZ0ludCgwKSwgcGFyYW1zKSk7CiAgaW5zdC5tdWx0aXBsZU9mID0gKHZhbHVlLCBwYXJhbXMpID0+IGluc3QuY2hlY2soX211bHRpcGxlT2YodmFsdWUsIHBhcmFtcykpOwogIGNvbnN0IGJhZyA9IGluc3QuX3pvZC5iYWc7CiAgaW5zdC5taW5WYWx1ZSA9IGJhZy5taW5pbXVtID8/IG51bGw7CiAgaW5zdC5tYXhWYWx1ZSA9IGJhZy5tYXhpbXVtID8/IG51bGw7CiAgaW5zdC5mb3JtYXQgPSBiYWcuZm9ybWF0ID8/IG51bGw7Cn0pOwpmdW5jdGlvbiBiaWdpbnQyKHBhcmFtcykgewogIHJldHVybiBfYmlnaW50KFpvZEJpZ0ludCwgcGFyYW1zKTsKfQp2YXIgWm9kQmlnSW50Rm9ybWF0ID0gJGNvbnN0cnVjdG9yKCJab2RCaWdJbnRGb3JtYXQiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZEJpZ0ludEZvcm1hdC5pbml0KGluc3QsIGRlZik7CiAgWm9kQmlnSW50LmluaXQoaW5zdCwgZGVmKTsKfSk7CmZ1bmN0aW9uIGludDY0KHBhcmFtcykgewogIHJldHVybiBfaW50NjQoWm9kQmlnSW50Rm9ybWF0LCBwYXJhbXMpOwp9CmZ1bmN0aW9uIHVpbnQ2NChwYXJhbXMpIHsKICByZXR1cm4gX3VpbnQ2NChab2RCaWdJbnRGb3JtYXQsIHBhcmFtcyk7Cn0KdmFyIFpvZFN5bWJvbCA9ICRjb25zdHJ1Y3RvcigiWm9kU3ltYm9sIiwgKGluc3QsIGRlZikgPT4gewogICRab2RTeW1ib2wuaW5pdChpbnN0LCBkZWYpOwogIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwp9KTsKZnVuY3Rpb24gc3ltYm9sKHBhcmFtcykgewogIHJldHVybiBfc3ltYm9sKFpvZFN5bWJvbCwgcGFyYW1zKTsKfQp2YXIgWm9kVW5kZWZpbmVkID0gJGNvbnN0cnVjdG9yKCJab2RVbmRlZmluZWQiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFVuZGVmaW5lZC5pbml0KGluc3QsIGRlZik7CiAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7Cn0pOwpmdW5jdGlvbiBfdW5kZWZpbmVkMyhwYXJhbXMpIHsKICByZXR1cm4gX3VuZGVmaW5lZDIoWm9kVW5kZWZpbmVkLCBwYXJhbXMpOwp9CnZhciBab2ROdWxsID0gJGNvbnN0cnVjdG9yKCJab2ROdWxsIiwgKGluc3QsIGRlZikgPT4gewogICRab2ROdWxsLmluaXQoaW5zdCwgZGVmKTsKICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKfSk7CmZ1bmN0aW9uIF9udWxsMyhwYXJhbXMpIHsKICByZXR1cm4gX251bGwyKFpvZE51bGwsIHBhcmFtcyk7Cn0KdmFyIFpvZEFueSA9ICRjb25zdHJ1Y3RvcigiWm9kQW55IiwgKGluc3QsIGRlZikgPT4gewogICRab2RBbnkuaW5pdChpbnN0LCBkZWYpOwogIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwp9KTsKZnVuY3Rpb24gYW55KCkgewogIHJldHVybiBfYW55KFpvZEFueSk7Cn0KdmFyIFpvZFVua25vd24gPSAkY29uc3RydWN0b3IoIlpvZFVua25vd24iLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFVua25vd24uaW5pdChpbnN0LCBkZWYpOwogIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwp9KTsKZnVuY3Rpb24gdW5rbm93bigpIHsKICByZXR1cm4gX3Vua25vd24oWm9kVW5rbm93bik7Cn0KdmFyIFpvZE5ldmVyID0gJGNvbnN0cnVjdG9yKCJab2ROZXZlciIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kTmV2ZXIuaW5pdChpbnN0LCBkZWYpOwogIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwp9KTsKZnVuY3Rpb24gbmV2ZXIocGFyYW1zKSB7CiAgcmV0dXJuIF9uZXZlcihab2ROZXZlciwgcGFyYW1zKTsKfQp2YXIgWm9kVm9pZCA9ICRjb25zdHJ1Y3RvcigiWm9kVm9pZCIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kVm9pZC5pbml0KGluc3QsIGRlZik7CiAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7Cn0pOwpmdW5jdGlvbiBfdm9pZDIocGFyYW1zKSB7CiAgcmV0dXJuIF92b2lkKFpvZFZvaWQsIHBhcmFtcyk7Cn0KdmFyIFpvZERhdGUgPSAkY29uc3RydWN0b3IoIlpvZERhdGUiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZERhdGUuaW5pdChpbnN0LCBkZWYpOwogIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGluc3QubWluID0gKHZhbHVlLCBwYXJhbXMpID0+IGluc3QuY2hlY2soX2d0ZSh2YWx1ZSwgcGFyYW1zKSk7CiAgaW5zdC5tYXggPSAodmFsdWUsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhfbHRlKHZhbHVlLCBwYXJhbXMpKTsKICBjb25zdCBjID0gaW5zdC5fem9kLmJhZzsKICBpbnN0Lm1pbkRhdGUgPSBjLm1pbmltdW0gPyBuZXcgRGF0ZShjLm1pbmltdW0pIDogbnVsbDsKICBpbnN0Lm1heERhdGUgPSBjLm1heGltdW0gPyBuZXcgRGF0ZShjLm1heGltdW0pIDogbnVsbDsKfSk7CmZ1bmN0aW9uIGRhdGUzKHBhcmFtcykgewogIHJldHVybiBfZGF0ZShab2REYXRlLCBwYXJhbXMpOwp9CnZhciBab2RBcnJheSA9ICRjb25zdHJ1Y3RvcigiWm9kQXJyYXkiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZEFycmF5LmluaXQoaW5zdCwgZGVmKTsKICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKICBpbnN0LmVsZW1lbnQgPSBkZWYuZWxlbWVudDsKICBpbnN0Lm1pbiA9IChtaW5MZW5ndGgsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhfbWluTGVuZ3RoKG1pbkxlbmd0aCwgcGFyYW1zKSk7CiAgaW5zdC5ub25lbXB0eSA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soX21pbkxlbmd0aCgxLCBwYXJhbXMpKTsKICBpbnN0Lm1heCA9IChtYXhMZW5ndGgsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhfbWF4TGVuZ3RoKG1heExlbmd0aCwgcGFyYW1zKSk7CiAgaW5zdC5sZW5ndGggPSAobGVuLCBwYXJhbXMpID0+IGluc3QuY2hlY2soX2xlbmd0aChsZW4sIHBhcmFtcykpOwogIGluc3QudW53cmFwID0gKCkgPT4gaW5zdC5lbGVtZW50Owp9KTsKZnVuY3Rpb24gYXJyYXkoZWxlbWVudCwgcGFyYW1zKSB7CiAgcmV0dXJuIF9hcnJheShab2RBcnJheSwgZWxlbWVudCwgcGFyYW1zKTsKfQpmdW5jdGlvbiBrZXlvZihzY2hlbWEpIHsKICBjb25zdCBzaGFwZSA9IHNjaGVtYS5fem9kLmRlZi5zaGFwZTsKICByZXR1cm4gX2VudW0yKE9iamVjdC5rZXlzKHNoYXBlKSk7Cn0KdmFyIFpvZE9iamVjdCA9ICRjb25zdHJ1Y3RvcigiWm9kT2JqZWN0IiwgKGluc3QsIGRlZikgPT4gewogICRab2RPYmplY3RKSVQuaW5pdChpbnN0LCBkZWYpOwogIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIHV0aWxfZXhwb3J0cy5kZWZpbmVMYXp5KGluc3QsICJzaGFwZSIsICgpID0+IGRlZi5zaGFwZSk7CiAgaW5zdC5rZXlvZiA9ICgpID0+IF9lbnVtMihPYmplY3Qua2V5cyhpbnN0Ll96b2QuZGVmLnNoYXBlKSk7CiAgaW5zdC5jYXRjaGFsbCA9IChjYXRjaGFsbCkgPT4gaW5zdC5jbG9uZSh7IC4uLmluc3QuX3pvZC5kZWYsIGNhdGNoYWxsIH0pOwogIGluc3QucGFzc3Rocm91Z2ggPSAoKSA9PiBpbnN0LmNsb25lKHsgLi4uaW5zdC5fem9kLmRlZiwgY2F0Y2hhbGw6IHVua25vd24oKSB9KTsKICBpbnN0Lmxvb3NlID0gKCkgPT4gaW5zdC5jbG9uZSh7IC4uLmluc3QuX3pvZC5kZWYsIGNhdGNoYWxsOiB1bmtub3duKCkgfSk7CiAgaW5zdC5zdHJpY3QgPSAoKSA9PiBpbnN0LmNsb25lKHsgLi4uaW5zdC5fem9kLmRlZiwgY2F0Y2hhbGw6IG5ldmVyKCkgfSk7CiAgaW5zdC5zdHJpcCA9ICgpID0+IGluc3QuY2xvbmUoeyAuLi5pbnN0Ll96b2QuZGVmLCBjYXRjaGFsbDogdm9pZCAwIH0pOwogIGluc3QuZXh0ZW5kID0gKGluY29taW5nKSA9PiB7CiAgICByZXR1cm4gdXRpbF9leHBvcnRzLmV4dGVuZChpbnN0LCBpbmNvbWluZyk7CiAgfTsKICBpbnN0LnNhZmVFeHRlbmQgPSAoaW5jb21pbmcpID0+IHsKICAgIHJldHVybiB1dGlsX2V4cG9ydHMuc2FmZUV4dGVuZChpbnN0LCBpbmNvbWluZyk7CiAgfTsKICBpbnN0Lm1lcmdlID0gKG90aGVyKSA9PiB1dGlsX2V4cG9ydHMubWVyZ2UoaW5zdCwgb3RoZXIpOwogIGluc3QucGljayA9IChtYXNrKSA9PiB1dGlsX2V4cG9ydHMucGljayhpbnN0LCBtYXNrKTsKICBpbnN0Lm9taXQgPSAobWFzaykgPT4gdXRpbF9leHBvcnRzLm9taXQoaW5zdCwgbWFzayk7CiAgaW5zdC5wYXJ0aWFsID0gKC4uLmFyZ3MpID0+IHV0aWxfZXhwb3J0cy5wYXJ0aWFsKFpvZE9wdGlvbmFsLCBpbnN0LCBhcmdzWzBdKTsKICBpbnN0LnJlcXVpcmVkID0gKC4uLmFyZ3MpID0+IHV0aWxfZXhwb3J0cy5yZXF1aXJlZChab2ROb25PcHRpb25hbCwgaW5zdCwgYXJnc1swXSk7Cn0pOwpmdW5jdGlvbiBvYmplY3Qoc2hhcGUsIHBhcmFtcykgewogIGNvbnN0IGRlZiA9IHsKICAgIHR5cGU6ICJvYmplY3QiLAogICAgZ2V0IHNoYXBlKCkgewogICAgICB1dGlsX2V4cG9ydHMuYXNzaWduUHJvcCh0aGlzLCAic2hhcGUiLCBzaGFwZSA/IHV0aWxfZXhwb3J0cy5vYmplY3RDbG9uZShzaGFwZSkgOiB7fSk7CiAgICAgIHJldHVybiB0aGlzLnNoYXBlOwogICAgfSwKICAgIC4uLnV0aWxfZXhwb3J0cy5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH07CiAgcmV0dXJuIG5ldyBab2RPYmplY3QoZGVmKTsKfQpmdW5jdGlvbiBzdHJpY3RPYmplY3Qoc2hhcGUsIHBhcmFtcykgewogIHJldHVybiBuZXcgWm9kT2JqZWN0KHsKICAgIHR5cGU6ICJvYmplY3QiLAogICAgZ2V0IHNoYXBlKCkgewogICAgICB1dGlsX2V4cG9ydHMuYXNzaWduUHJvcCh0aGlzLCAic2hhcGUiLCB1dGlsX2V4cG9ydHMub2JqZWN0Q2xvbmUoc2hhcGUpKTsKICAgICAgcmV0dXJuIHRoaXMuc2hhcGU7CiAgICB9LAogICAgY2F0Y2hhbGw6IG5ldmVyKCksCiAgICAuLi51dGlsX2V4cG9ydHMubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBsb29zZU9iamVjdChzaGFwZSwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBab2RPYmplY3QoewogICAgdHlwZTogIm9iamVjdCIsCiAgICBnZXQgc2hhcGUoKSB7CiAgICAgIHV0aWxfZXhwb3J0cy5hc3NpZ25Qcm9wKHRoaXMsICJzaGFwZSIsIHV0aWxfZXhwb3J0cy5vYmplY3RDbG9uZShzaGFwZSkpOwogICAgICByZXR1cm4gdGhpcy5zaGFwZTsKICAgIH0sCiAgICBjYXRjaGFsbDogdW5rbm93bigpLAogICAgLi4udXRpbF9leHBvcnRzLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KdmFyIFpvZFVuaW9uID0gJGNvbnN0cnVjdG9yKCJab2RVbmlvbiIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kVW5pb24uaW5pdChpbnN0LCBkZWYpOwogIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGluc3Qub3B0aW9ucyA9IGRlZi5vcHRpb25zOwp9KTsKZnVuY3Rpb24gdW5pb24ob3B0aW9ucywgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBab2RVbmlvbih7CiAgICB0eXBlOiAidW5pb24iLAogICAgb3B0aW9ucywKICAgIC4uLnV0aWxfZXhwb3J0cy5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CnZhciBab2REaXNjcmltaW5hdGVkVW5pb24gPSAkY29uc3RydWN0b3IoIlpvZERpc2NyaW1pbmF0ZWRVbmlvbiIsIChpbnN0LCBkZWYpID0+IHsKICBab2RVbmlvbi5pbml0KGluc3QsIGRlZik7CiAgJFpvZERpc2NyaW1pbmF0ZWRVbmlvbi5pbml0KGluc3QsIGRlZik7Cn0pOwpmdW5jdGlvbiBkaXNjcmltaW5hdGVkVW5pb24oZGlzY3JpbWluYXRvciwgb3B0aW9ucywgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBab2REaXNjcmltaW5hdGVkVW5pb24oewogICAgdHlwZTogInVuaW9uIiwKICAgIG9wdGlvbnMsCiAgICBkaXNjcmltaW5hdG9yLAogICAgLi4udXRpbF9leHBvcnRzLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KdmFyIFpvZEludGVyc2VjdGlvbiA9ICRjb25zdHJ1Y3RvcigiWm9kSW50ZXJzZWN0aW9uIiwgKGluc3QsIGRlZikgPT4gewogICRab2RJbnRlcnNlY3Rpb24uaW5pdChpbnN0LCBkZWYpOwogIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwp9KTsKZnVuY3Rpb24gaW50ZXJzZWN0aW9uKGxlZnQsIHJpZ2h0KSB7CiAgcmV0dXJuIG5ldyBab2RJbnRlcnNlY3Rpb24oewogICAgdHlwZTogImludGVyc2VjdGlvbiIsCiAgICBsZWZ0LAogICAgcmlnaHQKICB9KTsKfQp2YXIgWm9kVHVwbGUgPSAkY29uc3RydWN0b3IoIlpvZFR1cGxlIiwgKGluc3QsIGRlZikgPT4gewogICRab2RUdXBsZS5pbml0KGluc3QsIGRlZik7CiAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7CiAgaW5zdC5yZXN0ID0gKHJlc3QpID0+IGluc3QuY2xvbmUoewogICAgLi4uaW5zdC5fem9kLmRlZiwKICAgIHJlc3QKICB9KTsKfSk7CmZ1bmN0aW9uIHR1cGxlKGl0ZW1zLCBfcGFyYW1zT3JSZXN0LCBfcGFyYW1zKSB7CiAgY29uc3QgaGFzUmVzdCA9IF9wYXJhbXNPclJlc3QgaW5zdGFuY2VvZiAkWm9kVHlwZTsKICBjb25zdCBwYXJhbXMgPSBoYXNSZXN0ID8gX3BhcmFtcyA6IF9wYXJhbXNPclJlc3Q7CiAgY29uc3QgcmVzdCA9IGhhc1Jlc3QgPyBfcGFyYW1zT3JSZXN0IDogbnVsbDsKICByZXR1cm4gbmV3IFpvZFR1cGxlKHsKICAgIHR5cGU6ICJ0dXBsZSIsCiAgICBpdGVtcywKICAgIHJlc3QsCiAgICAuLi51dGlsX2V4cG9ydHMubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQp2YXIgWm9kUmVjb3JkID0gJGNvbnN0cnVjdG9yKCJab2RSZWNvcmQiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFJlY29yZC5pbml0KGluc3QsIGRlZik7CiAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7CiAgaW5zdC5rZXlUeXBlID0gZGVmLmtleVR5cGU7CiAgaW5zdC52YWx1ZVR5cGUgPSBkZWYudmFsdWVUeXBlOwp9KTsKZnVuY3Rpb24gcmVjb3JkKGtleVR5cGUsIHZhbHVlVHlwZSwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBab2RSZWNvcmQoewogICAgdHlwZTogInJlY29yZCIsCiAgICBrZXlUeXBlLAogICAgdmFsdWVUeXBlLAogICAgLi4udXRpbF9leHBvcnRzLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KZnVuY3Rpb24gcGFydGlhbFJlY29yZChrZXlUeXBlLCB2YWx1ZVR5cGUsIHBhcmFtcykgewogIGNvbnN0IGsgPSBjbG9uZShrZXlUeXBlKTsKICBrLl96b2QudmFsdWVzID0gdm9pZCAwOwogIHJldHVybiBuZXcgWm9kUmVjb3JkKHsKICAgIHR5cGU6ICJyZWNvcmQiLAogICAga2V5VHlwZTogaywKICAgIHZhbHVlVHlwZSwKICAgIC4uLnV0aWxfZXhwb3J0cy5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CnZhciBab2RNYXAgPSAkY29uc3RydWN0b3IoIlpvZE1hcCIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kTWFwLmluaXQoaW5zdCwgZGVmKTsKICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKICBpbnN0LmtleVR5cGUgPSBkZWYua2V5VHlwZTsKICBpbnN0LnZhbHVlVHlwZSA9IGRlZi52YWx1ZVR5cGU7Cn0pOwpmdW5jdGlvbiBtYXAoa2V5VHlwZSwgdmFsdWVUeXBlLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IFpvZE1hcCh7CiAgICB0eXBlOiAibWFwIiwKICAgIGtleVR5cGUsCiAgICB2YWx1ZVR5cGUsCiAgICAuLi51dGlsX2V4cG9ydHMubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQp2YXIgWm9kU2V0ID0gJGNvbnN0cnVjdG9yKCJab2RTZXQiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFNldC5pbml0KGluc3QsIGRlZik7CiAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7CiAgaW5zdC5taW4gPSAoLi4uYXJncykgPT4gaW5zdC5jaGVjayhfbWluU2l6ZSguLi5hcmdzKSk7CiAgaW5zdC5ub25lbXB0eSA9IChwYXJhbXMpID0+IGluc3QuY2hlY2soX21pblNpemUoMSwgcGFyYW1zKSk7CiAgaW5zdC5tYXggPSAoLi4uYXJncykgPT4gaW5zdC5jaGVjayhfbWF4U2l6ZSguLi5hcmdzKSk7CiAgaW5zdC5zaXplID0gKC4uLmFyZ3MpID0+IGluc3QuY2hlY2soX3NpemUoLi4uYXJncykpOwp9KTsKZnVuY3Rpb24gc2V0KHZhbHVlVHlwZSwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBab2RTZXQoewogICAgdHlwZTogInNldCIsCiAgICB2YWx1ZVR5cGUsCiAgICAuLi51dGlsX2V4cG9ydHMubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQp2YXIgWm9kRW51bSA9ICRjb25zdHJ1Y3RvcigiWm9kRW51bSIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kRW51bS5pbml0KGluc3QsIGRlZik7CiAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7CiAgaW5zdC5lbnVtID0gZGVmLmVudHJpZXM7CiAgaW5zdC5vcHRpb25zID0gT2JqZWN0LnZhbHVlcyhkZWYuZW50cmllcyk7CiAgY29uc3Qga2V5cyA9IG5ldyBTZXQoT2JqZWN0LmtleXMoZGVmLmVudHJpZXMpKTsKICBpbnN0LmV4dHJhY3QgPSAodmFsdWVzLCBwYXJhbXMpID0+IHsKICAgIGNvbnN0IG5ld0VudHJpZXMgPSB7fTsKICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7CiAgICAgIGlmIChrZXlzLmhhcyh2YWx1ZSkpIHsKICAgICAgICBuZXdFbnRyaWVzW3ZhbHVlXSA9IGRlZi5lbnRyaWVzW3ZhbHVlXTsKICAgICAgfSBlbHNlCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBLZXkgJHt2YWx1ZX0gbm90IGZvdW5kIGluIGVudW1gKTsKICAgIH0KICAgIHJldHVybiBuZXcgWm9kRW51bSh7CiAgICAgIC4uLmRlZiwKICAgICAgY2hlY2tzOiBbXSwKICAgICAgLi4udXRpbF9leHBvcnRzLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpLAogICAgICBlbnRyaWVzOiBuZXdFbnRyaWVzCiAgICB9KTsKICB9OwogIGluc3QuZXhjbHVkZSA9ICh2YWx1ZXMsIHBhcmFtcykgPT4gewogICAgY29uc3QgbmV3RW50cmllcyA9IHsgLi4uZGVmLmVudHJpZXMgfTsKICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7CiAgICAgIGlmIChrZXlzLmhhcyh2YWx1ZSkpIHsKICAgICAgICBkZWxldGUgbmV3RW50cmllc1t2YWx1ZV07CiAgICAgIH0gZWxzZQogICAgICAgIHRocm93IG5ldyBFcnJvcihgS2V5ICR7dmFsdWV9IG5vdCBmb3VuZCBpbiBlbnVtYCk7CiAgICB9CiAgICByZXR1cm4gbmV3IFpvZEVudW0oewogICAgICAuLi5kZWYsCiAgICAgIGNoZWNrczogW10sCiAgICAgIC4uLnV0aWxfZXhwb3J0cy5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSwKICAgICAgZW50cmllczogbmV3RW50cmllcwogICAgfSk7CiAgfTsKfSk7CmZ1bmN0aW9uIF9lbnVtMih2YWx1ZXMsIHBhcmFtcykgewogIGNvbnN0IGVudHJpZXMgPSBBcnJheS5pc0FycmF5KHZhbHVlcykgPyBPYmplY3QuZnJvbUVudHJpZXModmFsdWVzLm1hcCgodikgPT4gW3YsIHZdKSkgOiB2YWx1ZXM7CiAgcmV0dXJuIG5ldyBab2RFbnVtKHsKICAgIHR5cGU6ICJlbnVtIiwKICAgIGVudHJpZXMsCiAgICAuLi51dGlsX2V4cG9ydHMubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQpmdW5jdGlvbiBuYXRpdmVFbnVtKGVudHJpZXMsIHBhcmFtcykgewogIHJldHVybiBuZXcgWm9kRW51bSh7CiAgICB0eXBlOiAiZW51bSIsCiAgICBlbnRyaWVzLAogICAgLi4udXRpbF9leHBvcnRzLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KdmFyIFpvZExpdGVyYWwgPSAkY29uc3RydWN0b3IoIlpvZExpdGVyYWwiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZExpdGVyYWwuaW5pdChpbnN0LCBkZWYpOwogIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGluc3QudmFsdWVzID0gbmV3IFNldChkZWYudmFsdWVzKTsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaW5zdCwgInZhbHVlIiwgewogICAgZ2V0KCkgewogICAgICBpZiAoZGVmLnZhbHVlcy5sZW5ndGggPiAxKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJUaGlzIHNjaGVtYSBjb250YWlucyBtdWx0aXBsZSB2YWxpZCBsaXRlcmFsIHZhbHVlcy4gVXNlIGAudmFsdWVzYCBpbnN0ZWFkLiIpOwogICAgICB9CiAgICAgIHJldHVybiBkZWYudmFsdWVzWzBdOwogICAgfQogIH0pOwp9KTsKZnVuY3Rpb24gbGl0ZXJhbCh2YWx1ZSwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBab2RMaXRlcmFsKHsKICAgIHR5cGU6ICJsaXRlcmFsIiwKICAgIHZhbHVlczogQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFt2YWx1ZV0sCiAgICAuLi51dGlsX2V4cG9ydHMubm9ybWFsaXplUGFyYW1zKHBhcmFtcykKICB9KTsKfQp2YXIgWm9kRmlsZSA9ICRjb25zdHJ1Y3RvcigiWm9kRmlsZSIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kRmlsZS5pbml0KGluc3QsIGRlZik7CiAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7CiAgaW5zdC5taW4gPSAoc2l6ZSwgcGFyYW1zKSA9PiBpbnN0LmNoZWNrKF9taW5TaXplKHNpemUsIHBhcmFtcykpOwogIGluc3QubWF4ID0gKHNpemUsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhfbWF4U2l6ZShzaXplLCBwYXJhbXMpKTsKICBpbnN0Lm1pbWUgPSAodHlwZXMsIHBhcmFtcykgPT4gaW5zdC5jaGVjayhfbWltZShBcnJheS5pc0FycmF5KHR5cGVzKSA/IHR5cGVzIDogW3R5cGVzXSwgcGFyYW1zKSk7Cn0pOwpmdW5jdGlvbiBmaWxlKHBhcmFtcykgewogIHJldHVybiBfZmlsZShab2RGaWxlLCBwYXJhbXMpOwp9CnZhciBab2RUcmFuc2Zvcm0gPSAkY29uc3RydWN0b3IoIlpvZFRyYW5zZm9ybSIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kVHJhbnNmb3JtLmluaXQoaW5zdCwgZGVmKTsKICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKICBpbnN0Ll96b2QucGFyc2UgPSAocGF5bG9hZCwgX2N0eCkgPT4gewogICAgaWYgKF9jdHguZGlyZWN0aW9uID09PSAiYmFja3dhcmQiKSB7CiAgICAgIHRocm93IG5ldyAkWm9kRW5jb2RlRXJyb3IoaW5zdC5jb25zdHJ1Y3Rvci5uYW1lKTsKICAgIH0KICAgIHBheWxvYWQuYWRkSXNzdWUgPSAoaXNzdWUyKSA9PiB7CiAgICAgIGlmICh0eXBlb2YgaXNzdWUyID09PSAic3RyaW5nIikgewogICAgICAgIHBheWxvYWQuaXNzdWVzLnB1c2godXRpbF9leHBvcnRzLmlzc3VlKGlzc3VlMiwgcGF5bG9hZC52YWx1ZSwgZGVmKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgX2lzc3VlID0gaXNzdWUyOwogICAgICAgIGlmIChfaXNzdWUuZmF0YWwpCiAgICAgICAgICBfaXNzdWUuY29udGludWUgPSBmYWxzZTsKICAgICAgICBfaXNzdWUuY29kZSA/PyAoX2lzc3VlLmNvZGUgPSAiY3VzdG9tIik7CiAgICAgICAgX2lzc3VlLmlucHV0ID8/IChfaXNzdWUuaW5wdXQgPSBwYXlsb2FkLnZhbHVlKTsKICAgICAgICBfaXNzdWUuaW5zdCA/PyAoX2lzc3VlLmluc3QgPSBpbnN0KTsKICAgICAgICBwYXlsb2FkLmlzc3Vlcy5wdXNoKHV0aWxfZXhwb3J0cy5pc3N1ZShfaXNzdWUpKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IG91dHB1dCA9IGRlZi50cmFuc2Zvcm0ocGF5bG9hZC52YWx1ZSwgcGF5bG9hZCk7CiAgICBpZiAob3V0cHV0IGluc3RhbmNlb2YgUHJvbWlzZSkgewogICAgICByZXR1cm4gb3V0cHV0LnRoZW4oKG91dHB1dDIpID0+IHsKICAgICAgICBwYXlsb2FkLnZhbHVlID0gb3V0cHV0MjsKICAgICAgICByZXR1cm4gcGF5bG9hZDsKICAgICAgfSk7CiAgICB9CiAgICBwYXlsb2FkLnZhbHVlID0gb3V0cHV0OwogICAgcmV0dXJuIHBheWxvYWQ7CiAgfTsKfSk7CmZ1bmN0aW9uIHRyYW5zZm9ybShmbikgewogIHJldHVybiBuZXcgWm9kVHJhbnNmb3JtKHsKICAgIHR5cGU6ICJ0cmFuc2Zvcm0iLAogICAgdHJhbnNmb3JtOiBmbgogIH0pOwp9CnZhciBab2RPcHRpb25hbCA9ICRjb25zdHJ1Y3RvcigiWm9kT3B0aW9uYWwiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZE9wdGlvbmFsLmluaXQoaW5zdCwgZGVmKTsKICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKICBpbnN0LnVud3JhcCA9ICgpID0+IGluc3QuX3pvZC5kZWYuaW5uZXJUeXBlOwp9KTsKZnVuY3Rpb24gb3B0aW9uYWwoaW5uZXJUeXBlKSB7CiAgcmV0dXJuIG5ldyBab2RPcHRpb25hbCh7CiAgICB0eXBlOiAib3B0aW9uYWwiLAogICAgaW5uZXJUeXBlCiAgfSk7Cn0KdmFyIFpvZE51bGxhYmxlID0gJGNvbnN0cnVjdG9yKCJab2ROdWxsYWJsZSIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kTnVsbGFibGUuaW5pdChpbnN0LCBkZWYpOwogIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGluc3QudW53cmFwID0gKCkgPT4gaW5zdC5fem9kLmRlZi5pbm5lclR5cGU7Cn0pOwpmdW5jdGlvbiBudWxsYWJsZShpbm5lclR5cGUpIHsKICByZXR1cm4gbmV3IFpvZE51bGxhYmxlKHsKICAgIHR5cGU6ICJudWxsYWJsZSIsCiAgICBpbm5lclR5cGUKICB9KTsKfQpmdW5jdGlvbiBudWxsaXNoMihpbm5lclR5cGUpIHsKICByZXR1cm4gb3B0aW9uYWwobnVsbGFibGUoaW5uZXJUeXBlKSk7Cn0KdmFyIFpvZERlZmF1bHQgPSAkY29uc3RydWN0b3IoIlpvZERlZmF1bHQiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZERlZmF1bHQuaW5pdChpbnN0LCBkZWYpOwogIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGluc3QudW53cmFwID0gKCkgPT4gaW5zdC5fem9kLmRlZi5pbm5lclR5cGU7CiAgaW5zdC5yZW1vdmVEZWZhdWx0ID0gaW5zdC51bndyYXA7Cn0pOwpmdW5jdGlvbiBfZGVmYXVsdDIoaW5uZXJUeXBlLCBkZWZhdWx0VmFsdWUpIHsKICByZXR1cm4gbmV3IFpvZERlZmF1bHQoewogICAgdHlwZTogImRlZmF1bHQiLAogICAgaW5uZXJUeXBlLAogICAgZ2V0IGRlZmF1bHRWYWx1ZSgpIHsKICAgICAgcmV0dXJuIHR5cGVvZiBkZWZhdWx0VmFsdWUgPT09ICJmdW5jdGlvbiIgPyBkZWZhdWx0VmFsdWUoKSA6IHV0aWxfZXhwb3J0cy5zaGFsbG93Q2xvbmUoZGVmYXVsdFZhbHVlKTsKICAgIH0KICB9KTsKfQp2YXIgWm9kUHJlZmF1bHQgPSAkY29uc3RydWN0b3IoIlpvZFByZWZhdWx0IiwgKGluc3QsIGRlZikgPT4gewogICRab2RQcmVmYXVsdC5pbml0KGluc3QsIGRlZik7CiAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7CiAgaW5zdC51bndyYXAgPSAoKSA9PiBpbnN0Ll96b2QuZGVmLmlubmVyVHlwZTsKfSk7CmZ1bmN0aW9uIHByZWZhdWx0KGlubmVyVHlwZSwgZGVmYXVsdFZhbHVlKSB7CiAgcmV0dXJuIG5ldyBab2RQcmVmYXVsdCh7CiAgICB0eXBlOiAicHJlZmF1bHQiLAogICAgaW5uZXJUeXBlLAogICAgZ2V0IGRlZmF1bHRWYWx1ZSgpIHsKICAgICAgcmV0dXJuIHR5cGVvZiBkZWZhdWx0VmFsdWUgPT09ICJmdW5jdGlvbiIgPyBkZWZhdWx0VmFsdWUoKSA6IHV0aWxfZXhwb3J0cy5zaGFsbG93Q2xvbmUoZGVmYXVsdFZhbHVlKTsKICAgIH0KICB9KTsKfQp2YXIgWm9kTm9uT3B0aW9uYWwgPSAkY29uc3RydWN0b3IoIlpvZE5vbk9wdGlvbmFsIiwgKGluc3QsIGRlZikgPT4gewogICRab2ROb25PcHRpb25hbC5pbml0KGluc3QsIGRlZik7CiAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7CiAgaW5zdC51bndyYXAgPSAoKSA9PiBpbnN0Ll96b2QuZGVmLmlubmVyVHlwZTsKfSk7CmZ1bmN0aW9uIG5vbm9wdGlvbmFsKGlubmVyVHlwZSwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBab2ROb25PcHRpb25hbCh7CiAgICB0eXBlOiAibm9ub3B0aW9uYWwiLAogICAgaW5uZXJUeXBlLAogICAgLi4udXRpbF9leHBvcnRzLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7Cn0KdmFyIFpvZFN1Y2Nlc3MgPSAkY29uc3RydWN0b3IoIlpvZFN1Y2Nlc3MiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFN1Y2Nlc3MuaW5pdChpbnN0LCBkZWYpOwogIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwogIGluc3QudW53cmFwID0gKCkgPT4gaW5zdC5fem9kLmRlZi5pbm5lclR5cGU7Cn0pOwpmdW5jdGlvbiBzdWNjZXNzKGlubmVyVHlwZSkgewogIHJldHVybiBuZXcgWm9kU3VjY2Vzcyh7CiAgICB0eXBlOiAic3VjY2VzcyIsCiAgICBpbm5lclR5cGUKICB9KTsKfQp2YXIgWm9kQ2F0Y2ggPSAkY29uc3RydWN0b3IoIlpvZENhdGNoIiwgKGluc3QsIGRlZikgPT4gewogICRab2RDYXRjaC5pbml0KGluc3QsIGRlZik7CiAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7CiAgaW5zdC51bndyYXAgPSAoKSA9PiBpbnN0Ll96b2QuZGVmLmlubmVyVHlwZTsKICBpbnN0LnJlbW92ZUNhdGNoID0gaW5zdC51bndyYXA7Cn0pOwpmdW5jdGlvbiBfY2F0Y2gyKGlubmVyVHlwZSwgY2F0Y2hWYWx1ZSkgewogIHJldHVybiBuZXcgWm9kQ2F0Y2goewogICAgdHlwZTogImNhdGNoIiwKICAgIGlubmVyVHlwZSwKICAgIGNhdGNoVmFsdWU6IHR5cGVvZiBjYXRjaFZhbHVlID09PSAiZnVuY3Rpb24iID8gY2F0Y2hWYWx1ZSA6ICgpID0+IGNhdGNoVmFsdWUKICB9KTsKfQp2YXIgWm9kTmFOID0gJGNvbnN0cnVjdG9yKCJab2ROYU4iLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZE5hTi5pbml0KGluc3QsIGRlZik7CiAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7Cn0pOwpmdW5jdGlvbiBuYW4ocGFyYW1zKSB7CiAgcmV0dXJuIF9uYW4oWm9kTmFOLCBwYXJhbXMpOwp9CnZhciBab2RQaXBlID0gJGNvbnN0cnVjdG9yKCJab2RQaXBlIiwgKGluc3QsIGRlZikgPT4gewogICRab2RQaXBlLmluaXQoaW5zdCwgZGVmKTsKICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKICBpbnN0LmluID0gZGVmLmluOwogIGluc3Qub3V0ID0gZGVmLm91dDsKfSk7CmZ1bmN0aW9uIHBpcGUoaW5fLCBvdXQpIHsKICByZXR1cm4gbmV3IFpvZFBpcGUoewogICAgdHlwZTogInBpcGUiLAogICAgaW46IGluXywKICAgIG91dAogICAgLy8gLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSwKICB9KTsKfQp2YXIgWm9kQ29kZWMgPSAkY29uc3RydWN0b3IoIlpvZENvZGVjIiwgKGluc3QsIGRlZikgPT4gewogIFpvZFBpcGUuaW5pdChpbnN0LCBkZWYpOwogICRab2RDb2RlYy5pbml0KGluc3QsIGRlZik7Cn0pOwpmdW5jdGlvbiBjb2RlYyhpbl8sIG91dCwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBab2RDb2RlYyh7CiAgICB0eXBlOiAicGlwZSIsCiAgICBpbjogaW5fLAogICAgb3V0LAogICAgdHJhbnNmb3JtOiBwYXJhbXMuZGVjb2RlLAogICAgcmV2ZXJzZVRyYW5zZm9ybTogcGFyYW1zLmVuY29kZQogIH0pOwp9CnZhciBab2RSZWFkb25seSA9ICRjb25zdHJ1Y3RvcigiWm9kUmVhZG9ubHkiLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZFJlYWRvbmx5LmluaXQoaW5zdCwgZGVmKTsKICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKICBpbnN0LnVud3JhcCA9ICgpID0+IGluc3QuX3pvZC5kZWYuaW5uZXJUeXBlOwp9KTsKZnVuY3Rpb24gcmVhZG9ubHkoaW5uZXJUeXBlKSB7CiAgcmV0dXJuIG5ldyBab2RSZWFkb25seSh7CiAgICB0eXBlOiAicmVhZG9ubHkiLAogICAgaW5uZXJUeXBlCiAgfSk7Cn0KdmFyIFpvZFRlbXBsYXRlTGl0ZXJhbCA9ICRjb25zdHJ1Y3RvcigiWm9kVGVtcGxhdGVMaXRlcmFsIiwgKGluc3QsIGRlZikgPT4gewogICRab2RUZW1wbGF0ZUxpdGVyYWwuaW5pdChpbnN0LCBkZWYpOwogIFpvZFR5cGUuaW5pdChpbnN0LCBkZWYpOwp9KTsKZnVuY3Rpb24gdGVtcGxhdGVMaXRlcmFsKHBhcnRzLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IFpvZFRlbXBsYXRlTGl0ZXJhbCh7CiAgICB0eXBlOiAidGVtcGxhdGVfbGl0ZXJhbCIsCiAgICBwYXJ0cywKICAgIC4uLnV0aWxfZXhwb3J0cy5ub3JtYWxpemVQYXJhbXMocGFyYW1zKQogIH0pOwp9CnZhciBab2RMYXp5ID0gJGNvbnN0cnVjdG9yKCJab2RMYXp5IiwgKGluc3QsIGRlZikgPT4gewogICRab2RMYXp5LmluaXQoaW5zdCwgZGVmKTsKICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKICBpbnN0LnVud3JhcCA9ICgpID0+IGluc3QuX3pvZC5kZWYuZ2V0dGVyKCk7Cn0pOwpmdW5jdGlvbiBsYXp5KGdldHRlcikgewogIHJldHVybiBuZXcgWm9kTGF6eSh7CiAgICB0eXBlOiAibGF6eSIsCiAgICBnZXR0ZXIKICB9KTsKfQp2YXIgWm9kUHJvbWlzZSA9ICRjb25zdHJ1Y3RvcigiWm9kUHJvbWlzZSIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kUHJvbWlzZS5pbml0KGluc3QsIGRlZik7CiAgWm9kVHlwZS5pbml0KGluc3QsIGRlZik7CiAgaW5zdC51bndyYXAgPSAoKSA9PiBpbnN0Ll96b2QuZGVmLmlubmVyVHlwZTsKfSk7CmZ1bmN0aW9uIHByb21pc2UoaW5uZXJUeXBlKSB7CiAgcmV0dXJuIG5ldyBab2RQcm9taXNlKHsKICAgIHR5cGU6ICJwcm9taXNlIiwKICAgIGlubmVyVHlwZQogIH0pOwp9CnZhciBab2RGdW5jdGlvbiA9ICRjb25zdHJ1Y3RvcigiWm9kRnVuY3Rpb24iLCAoaW5zdCwgZGVmKSA9PiB7CiAgJFpvZEZ1bmN0aW9uLmluaXQoaW5zdCwgZGVmKTsKICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKfSk7CmZ1bmN0aW9uIF9mdW5jdGlvbihwYXJhbXMpIHsKICByZXR1cm4gbmV3IFpvZEZ1bmN0aW9uKHsKICAgIHR5cGU6ICJmdW5jdGlvbiIsCiAgICBpbnB1dDogQXJyYXkuaXNBcnJheShwYXJhbXMgPT0gbnVsbCA/IHZvaWQgMCA6IHBhcmFtcy5pbnB1dCkgPyB0dXBsZShwYXJhbXMgPT0gbnVsbCA/IHZvaWQgMCA6IHBhcmFtcy5pbnB1dCkgOiAocGFyYW1zID09IG51bGwgPyB2b2lkIDAgOiBwYXJhbXMuaW5wdXQpID8/IGFycmF5KHVua25vd24oKSksCiAgICBvdXRwdXQ6IChwYXJhbXMgPT0gbnVsbCA/IHZvaWQgMCA6IHBhcmFtcy5vdXRwdXQpID8/IHVua25vd24oKQogIH0pOwp9CnZhciBab2RDdXN0b20gPSAkY29uc3RydWN0b3IoIlpvZEN1c3RvbSIsIChpbnN0LCBkZWYpID0+IHsKICAkWm9kQ3VzdG9tLmluaXQoaW5zdCwgZGVmKTsKICBab2RUeXBlLmluaXQoaW5zdCwgZGVmKTsKfSk7CmZ1bmN0aW9uIGNoZWNrKGZuKSB7CiAgY29uc3QgY2ggPSBuZXcgJFpvZENoZWNrKHsKICAgIGNoZWNrOiAiY3VzdG9tIgogICAgLy8gLi4udXRpbC5ub3JtYWxpemVQYXJhbXMocGFyYW1zKSwKICB9KTsKICBjaC5fem9kLmNoZWNrID0gZm47CiAgcmV0dXJuIGNoOwp9CmZ1bmN0aW9uIGN1c3RvbShmbiwgX3BhcmFtcykgewogIHJldHVybiBfY3VzdG9tKFpvZEN1c3RvbSwgZm4gPz8gKCgpID0+IHRydWUpLCBfcGFyYW1zKTsKfQpmdW5jdGlvbiByZWZpbmUoZm4sIF9wYXJhbXMgPSB7fSkgewogIHJldHVybiBfcmVmaW5lKFpvZEN1c3RvbSwgZm4sIF9wYXJhbXMpOwp9CmZ1bmN0aW9uIHN1cGVyUmVmaW5lKGZuKSB7CiAgcmV0dXJuIF9zdXBlclJlZmluZShmbik7Cn0KZnVuY3Rpb24gX2luc3RhbmNlb2YoY2xzLCBwYXJhbXMgPSB7CiAgZXJyb3I6IGBJbnB1dCBub3QgaW5zdGFuY2Ugb2YgJHtjbHMubmFtZX1gCn0pIHsKICBjb25zdCBpbnN0ID0gbmV3IFpvZEN1c3RvbSh7CiAgICB0eXBlOiAiY3VzdG9tIiwKICAgIGNoZWNrOiAiY3VzdG9tIiwKICAgIGZuOiAoZGF0YSkgPT4gZGF0YSBpbnN0YW5jZW9mIGNscywKICAgIGFib3J0OiB0cnVlLAogICAgLi4udXRpbF9leHBvcnRzLm5vcm1hbGl6ZVBhcmFtcyhwYXJhbXMpCiAgfSk7CiAgaW5zdC5fem9kLmJhZy5DbGFzcyA9IGNsczsKICByZXR1cm4gaW5zdDsKfQp2YXIgc3RyaW5nYm9vbCA9ICguLi5hcmdzKSA9PiBfc3RyaW5nYm9vbCh7CiAgQ29kZWM6IFpvZENvZGVjLAogIEJvb2xlYW46IFpvZEJvb2xlYW4sCiAgU3RyaW5nOiBab2RTdHJpbmcKfSwgLi4uYXJncyk7CmZ1bmN0aW9uIGpzb24ocGFyYW1zKSB7CiAgY29uc3QganNvblNjaGVtYSA9IGxhenkoKCkgPT4gewogICAgcmV0dXJuIHVuaW9uKFtzdHJpbmcyKHBhcmFtcyksIG51bWJlcjIoKSwgYm9vbGVhbjIoKSwgX251bGwzKCksIGFycmF5KGpzb25TY2hlbWEpLCByZWNvcmQoc3RyaW5nMigpLCBqc29uU2NoZW1hKV0pOwogIH0pOwogIHJldHVybiBqc29uU2NoZW1hOwp9CmZ1bmN0aW9uIHByZXByb2Nlc3MoZm4sIHNjaGVtYSkgewogIHJldHVybiBwaXBlKHRyYW5zZm9ybShmbiksIHNjaGVtYSk7Cn0KCi8vIC4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvY2xhc3NpYy9jb21wYXQuanMKdmFyIFpvZElzc3VlQ29kZSA9IHsKICBpbnZhbGlkX3R5cGU6ICJpbnZhbGlkX3R5cGUiLAogIHRvb19iaWc6ICJ0b29fYmlnIiwKICB0b29fc21hbGw6ICJ0b29fc21hbGwiLAogIGludmFsaWRfZm9ybWF0OiAiaW52YWxpZF9mb3JtYXQiLAogIG5vdF9tdWx0aXBsZV9vZjogIm5vdF9tdWx0aXBsZV9vZiIsCiAgdW5yZWNvZ25pemVkX2tleXM6ICJ1bnJlY29nbml6ZWRfa2V5cyIsCiAgaW52YWxpZF91bmlvbjogImludmFsaWRfdW5pb24iLAogIGludmFsaWRfa2V5OiAiaW52YWxpZF9rZXkiLAogIGludmFsaWRfZWxlbWVudDogImludmFsaWRfZWxlbWVudCIsCiAgaW52YWxpZF92YWx1ZTogImludmFsaWRfdmFsdWUiLAogIGN1c3RvbTogImN1c3RvbSIKfTsKZnVuY3Rpb24gc2V0RXJyb3JNYXAobWFwMikgewogIGNvbmZpZyh7CiAgICBjdXN0b21FcnJvcjogbWFwMgogIH0pOwp9CmZ1bmN0aW9uIGdldEVycm9yTWFwKCkgewogIHJldHVybiBjb25maWcoKS5jdXN0b21FcnJvcjsKfQp2YXIgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kOwovKiBAX19QVVJFX18gKi8gKGZ1bmN0aW9uKFpvZEZpcnN0UGFydHlUeXBlS2luZDIpIHsKfSkoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIHx8IChab2RGaXJzdFBhcnR5VHlwZUtpbmQgPSB7fSkpOwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9jbGFzc2ljL2NvZXJjZS5qcwp2YXIgY29lcmNlX2V4cG9ydHMgPSB7fTsKX19leHBvcnQoY29lcmNlX2V4cG9ydHMsIHsKICBiaWdpbnQ6ICgpID0+IGJpZ2ludDMsCiAgYm9vbGVhbjogKCkgPT4gYm9vbGVhbjMsCiAgZGF0ZTogKCkgPT4gZGF0ZTQsCiAgbnVtYmVyOiAoKSA9PiBudW1iZXIzLAogIHN0cmluZzogKCkgPT4gc3RyaW5nMwp9KTsKZnVuY3Rpb24gc3RyaW5nMyhwYXJhbXMpIHsKICByZXR1cm4gX2NvZXJjZWRTdHJpbmcoWm9kU3RyaW5nLCBwYXJhbXMpOwp9CmZ1bmN0aW9uIG51bWJlcjMocGFyYW1zKSB7CiAgcmV0dXJuIF9jb2VyY2VkTnVtYmVyKFpvZE51bWJlciwgcGFyYW1zKTsKfQpmdW5jdGlvbiBib29sZWFuMyhwYXJhbXMpIHsKICByZXR1cm4gX2NvZXJjZWRCb29sZWFuKFpvZEJvb2xlYW4sIHBhcmFtcyk7Cn0KZnVuY3Rpb24gYmlnaW50MyhwYXJhbXMpIHsKICByZXR1cm4gX2NvZXJjZWRCaWdpbnQoWm9kQmlnSW50LCBwYXJhbXMpOwp9CmZ1bmN0aW9uIGRhdGU0KHBhcmFtcykgewogIHJldHVybiBfY29lcmNlZERhdGUoWm9kRGF0ZSwgcGFyYW1zKTsKfQoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9jbGFzc2ljL2V4dGVybmFsLmpzCmNvbmZpZyhlbl9kZWZhdWx0KCkpOwoKLy8gLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC9pbmRleC5qcwp2YXIgem9kX2RlZmF1bHQgPSBleHRlcm5hbF9leHBvcnRzOwpleHBvcnQgewogICRicmFuZCwKICAkaW5wdXQsCiAgJG91dHB1dCwKICBORVZFUiwKICBUaW1lUHJlY2lzaW9uLAogIFpvZEFueSwKICBab2RBcnJheSwKICBab2RCYXNlNjQsCiAgWm9kQmFzZTY0VVJMLAogIFpvZEJpZ0ludCwKICBab2RCaWdJbnRGb3JtYXQsCiAgWm9kQm9vbGVhbiwKICBab2RDSURSdjQsCiAgWm9kQ0lEUnY2LAogIFpvZENVSUQsCiAgWm9kQ1VJRDIsCiAgWm9kQ2F0Y2gsCiAgWm9kQ29kZWMsCiAgWm9kQ3VzdG9tLAogIFpvZEN1c3RvbVN0cmluZ0Zvcm1hdCwKICBab2REYXRlLAogIFpvZERlZmF1bHQsCiAgWm9kRGlzY3JpbWluYXRlZFVuaW9uLAogIFpvZEUxNjQsCiAgWm9kRW1haWwsCiAgWm9kRW1vamksCiAgWm9kRW51bSwKICBab2RFcnJvciwKICBab2RGaWxlLAogIFpvZEZpcnN0UGFydHlUeXBlS2luZCwKICBab2RGdW5jdGlvbiwKICBab2RHVUlELAogIFpvZElQdjQsCiAgWm9kSVB2NiwKICBab2RJU09EYXRlLAogIFpvZElTT0RhdGVUaW1lLAogIFpvZElTT0R1cmF0aW9uLAogIFpvZElTT1RpbWUsCiAgWm9kSW50ZXJzZWN0aW9uLAogIFpvZElzc3VlQ29kZSwKICBab2RKV1QsCiAgWm9kS1NVSUQsCiAgWm9kTGF6eSwKICBab2RMaXRlcmFsLAogIFpvZE1hcCwKICBab2ROYU4sCiAgWm9kTmFub0lELAogIFpvZE5ldmVyLAogIFpvZE5vbk9wdGlvbmFsLAogIFpvZE51bGwsCiAgWm9kTnVsbGFibGUsCiAgWm9kTnVtYmVyLAogIFpvZE51bWJlckZvcm1hdCwKICBab2RPYmplY3QsCiAgWm9kT3B0aW9uYWwsCiAgWm9kUGlwZSwKICBab2RQcmVmYXVsdCwKICBab2RQcm9taXNlLAogIFpvZFJlYWRvbmx5LAogIFpvZFJlYWxFcnJvciwKICBab2RSZWNvcmQsCiAgWm9kU2V0LAogIFpvZFN0cmluZywKICBab2RTdHJpbmdGb3JtYXQsCiAgWm9kU3VjY2VzcywKICBab2RTeW1ib2wsCiAgWm9kVGVtcGxhdGVMaXRlcmFsLAogIFpvZFRyYW5zZm9ybSwKICBab2RUdXBsZSwKICBab2RUeXBlLAogIFpvZFVMSUQsCiAgWm9kVVJMLAogIFpvZFVVSUQsCiAgWm9kVW5kZWZpbmVkLAogIFpvZFVuaW9uLAogIFpvZFVua25vd24sCiAgWm9kVm9pZCwKICBab2RYSUQsCiAgX1pvZFN0cmluZywKICBfZGVmYXVsdDIgYXMgX2RlZmF1bHQsCiAgX2Z1bmN0aW9uLAogIGFueSwKICBhcnJheSwKICBiYXNlNjQyIGFzIGJhc2U2NCwKICBiYXNlNjR1cmwyIGFzIGJhc2U2NHVybCwKICBiaWdpbnQyIGFzIGJpZ2ludCwKICBib29sZWFuMiBhcyBib29sZWFuLAogIF9jYXRjaDIgYXMgY2F0Y2gsCiAgY2hlY2ssCiAgY2lkcnY0MiBhcyBjaWRydjQsCiAgY2lkcnY2MiBhcyBjaWRydjYsCiAgY2xvbmUsCiAgY29kZWMsCiAgY29lcmNlX2V4cG9ydHMgYXMgY29lcmNlLAogIGNvbmZpZywKICBjb3JlX2V4cG9ydHMyIGFzIGNvcmUsCiAgY3VpZDMgYXMgY3VpZCwKICBjdWlkMjIgYXMgY3VpZDIsCiAgY3VzdG9tLAogIGRhdGUzIGFzIGRhdGUsCiAgZGVjb2RlMiBhcyBkZWNvZGUsCiAgZGVjb2RlQXN5bmMyIGFzIGRlY29kZUFzeW5jLAogIHpvZF9kZWZhdWx0IGFzIGRlZmF1bHQsCiAgZGlzY3JpbWluYXRlZFVuaW9uLAogIGUxNjQyIGFzIGUxNjQsCiAgZW1haWwyIGFzIGVtYWlsLAogIGVtb2ppMiBhcyBlbW9qaSwKICBlbmNvZGUyIGFzIGVuY29kZSwKICBlbmNvZGVBc3luYzIgYXMgZW5jb2RlQXN5bmMsCiAgX2VuZHNXaXRoIGFzIGVuZHNXaXRoLAogIF9lbnVtMiBhcyBlbnVtLAogIGZpbGUsCiAgZmxhdHRlbkVycm9yLAogIGZsb2F0MzIsCiAgZmxvYXQ2NCwKICBmb3JtYXRFcnJvciwKICBfZnVuY3Rpb24gYXMgZnVuY3Rpb24sCiAgZ2V0RXJyb3JNYXAsCiAgZ2xvYmFsUmVnaXN0cnksCiAgX2d0IGFzIGd0LAogIF9ndGUgYXMgZ3RlLAogIGd1aWQyIGFzIGd1aWQsCiAgaGFzaCwKICBoZXgyIGFzIGhleCwKICBob3N0bmFtZTIgYXMgaG9zdG5hbWUsCiAgaHR0cFVybCwKICBfaW5jbHVkZXMgYXMgaW5jbHVkZXMsCiAgX2luc3RhbmNlb2YgYXMgaW5zdGFuY2VvZiwKICBpbnQsCiAgaW50MzIsCiAgaW50NjQsCiAgaW50ZXJzZWN0aW9uLAogIGlwdjQyIGFzIGlwdjQsCiAgaXB2NjIgYXMgaXB2NiwKICBpc29fZXhwb3J0cyBhcyBpc28sCiAganNvbiwKICBqd3QsCiAga2V5b2YsCiAga3N1aWQyIGFzIGtzdWlkLAogIGxhenksCiAgX2xlbmd0aCBhcyBsZW5ndGgsCiAgbGl0ZXJhbCwKICBsb2NhbGVzX2V4cG9ydHMgYXMgbG9jYWxlcywKICBsb29zZU9iamVjdCwKICBfbG93ZXJjYXNlIGFzIGxvd2VyY2FzZSwKICBfbHQgYXMgbHQsCiAgX2x0ZSBhcyBsdGUsCiAgbWFwLAogIF9tYXhMZW5ndGggYXMgbWF4TGVuZ3RoLAogIF9tYXhTaXplIGFzIG1heFNpemUsCiAgX21pbWUgYXMgbWltZSwKICBfbWluTGVuZ3RoIGFzIG1pbkxlbmd0aCwKICBfbWluU2l6ZSBhcyBtaW5TaXplLAogIF9tdWx0aXBsZU9mIGFzIG11bHRpcGxlT2YsCiAgbmFuLAogIG5hbm9pZDIgYXMgbmFub2lkLAogIG5hdGl2ZUVudW0sCiAgX25lZ2F0aXZlIGFzIG5lZ2F0aXZlLAogIG5ldmVyLAogIF9ub25uZWdhdGl2ZSBhcyBub25uZWdhdGl2ZSwKICBub25vcHRpb25hbCwKICBfbm9ucG9zaXRpdmUgYXMgbm9ucG9zaXRpdmUsCiAgX25vcm1hbGl6ZSBhcyBub3JtYWxpemUsCiAgX251bGwzIGFzIG51bGwsCiAgbnVsbGFibGUsCiAgbnVsbGlzaDIgYXMgbnVsbGlzaCwKICBudW1iZXIyIGFzIG51bWJlciwKICBvYmplY3QsCiAgb3B0aW9uYWwsCiAgX292ZXJ3cml0ZSBhcyBvdmVyd3JpdGUsCiAgcGFyc2UyIGFzIHBhcnNlLAogIHBhcnNlQXN5bmMyIGFzIHBhcnNlQXN5bmMsCiAgcGFydGlhbFJlY29yZCwKICBwaXBlLAogIF9wb3NpdGl2ZSBhcyBwb3NpdGl2ZSwKICBwcmVmYXVsdCwKICBwcmVwcm9jZXNzLAogIHByZXR0aWZ5RXJyb3IsCiAgcHJvbWlzZSwKICBfcHJvcGVydHkgYXMgcHJvcGVydHksCiAgcmVhZG9ubHksCiAgcmVjb3JkLAogIHJlZmluZSwKICBfcmVnZXggYXMgcmVnZXgsCiAgcmVnZXhlc19leHBvcnRzIGFzIHJlZ2V4ZXMsCiAgcmVnaXN0cnksCiAgc2FmZURlY29kZTIgYXMgc2FmZURlY29kZSwKICBzYWZlRGVjb2RlQXN5bmMyIGFzIHNhZmVEZWNvZGVBc3luYywKICBzYWZlRW5jb2RlMiBhcyBzYWZlRW5jb2RlLAogIHNhZmVFbmNvZGVBc3luYzIgYXMgc2FmZUVuY29kZUFzeW5jLAogIHNhZmVQYXJzZTIgYXMgc2FmZVBhcnNlLAogIHNhZmVQYXJzZUFzeW5jMiBhcyBzYWZlUGFyc2VBc3luYywKICBzZXQsCiAgc2V0RXJyb3JNYXAsCiAgX3NpemUgYXMgc2l6ZSwKICBfc3RhcnRzV2l0aCBhcyBzdGFydHNXaXRoLAogIHN0cmljdE9iamVjdCwKICBzdHJpbmcyIGFzIHN0cmluZywKICBzdHJpbmdGb3JtYXQsCiAgc3RyaW5nYm9vbCwKICBzdWNjZXNzLAogIHN1cGVyUmVmaW5lLAogIHN5bWJvbCwKICB0ZW1wbGF0ZUxpdGVyYWwsCiAgdG9KU09OU2NoZW1hLAogIF90b0xvd2VyQ2FzZSBhcyB0b0xvd2VyQ2FzZSwKICBfdG9VcHBlckNhc2UgYXMgdG9VcHBlckNhc2UsCiAgdHJhbnNmb3JtLAogIHRyZWVpZnlFcnJvciwKICBfdHJpbSBhcyB0cmltLAogIHR1cGxlLAogIHVpbnQzMiwKICB1aW50NjQsCiAgdWxpZDIgYXMgdWxpZCwKICBfdW5kZWZpbmVkMyBhcyB1bmRlZmluZWQsCiAgdW5pb24sCiAgdW5rbm93biwKICBfdXBwZXJjYXNlIGFzIHVwcGVyY2FzZSwKICB1cmwsCiAgdXRpbF9leHBvcnRzIGFzIHV0aWwsCiAgdXVpZDIgYXMgdXVpZCwKICB1dWlkdjQsCiAgdXVpZHY2LAogIHV1aWR2NywKICBfdm9pZDIgYXMgdm9pZCwKICB4aWQyIGFzIHhpZCwKICBleHRlcm5hbF9leHBvcnRzIGFzIHoKfTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9em9kLmpzLm1hcAo=",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 412133
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 7,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.623Z",
        "time": 6,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/hooks/use-auth.ts",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/components/login/login-form.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"80c-lYRoPt+6Hcg+3O3WKJBy9tvnB7I\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "8439"
            }
          ],
          "content": {
            "size": 8439,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdCBmcm9tICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvcmVhY3QuanM/dj0wYmI2OWQ3MyI7IGNvbnN0IHVzZVN0YXRlID0gX192aXRlX19janNJbXBvcnQwX3JlYWN0WyJ1c2VTdGF0ZSJdOyBjb25zdCB1c2VFZmZlY3QgPSBfX3ZpdGVfX2Nqc0ltcG9ydDBfcmVhY3RbInVzZUVmZmVjdCJdOwppbXBvcnQgeyBsb2dpbiB9IGZyb20gIi9zcmMvY29uc3VtZXIudHMiOwppbXBvcnQgeyB0b2tlblNlcnZpY2UgfSBmcm9tICIvc3JjL3NlcnZpY2VzL3Rva2VuLXNlcnZpY2UudHMiOwpleHBvcnQgY29uc3QgdXNlQXV0aCA9ICgpID0+IHsKICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpOwogIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUobnVsbCk7CiAgY29uc3QgW2N1cnJlbnRVc2VyLCBzZXRDdXJyZW50VXNlcl0gPSB1c2VTdGF0ZSh0b2tlblNlcnZpY2UuZ2V0Q3VycmVudFVzZXIoKSk7CiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGNvbnN0IHVwZGF0ZVVzZXIgPSAoKSA9PiB7CiAgICAgIGNvbnN0IHVzZXIgPSB0b2tlblNlcnZpY2UuZ2V0Q3VycmVudFVzZXIoKTsKICAgICAgc2V0Q3VycmVudFVzZXIodXNlcik7CiAgICB9OwogICAgdXBkYXRlVXNlcigpOwogICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh1cGRhdGVVc2VyLCAxZTMpOwogICAgcmV0dXJuICgpID0+IGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpOwogIH0sIFtdKTsKICBjb25zdCBoYW5kbGVMb2dpbiA9IGFzeW5jIChjcmVkZW50aWFscykgPT4gewogICAgdHJ5IHsKICAgICAgc2V0SXNMb2FkaW5nKHRydWUpOwogICAgICBzZXRFcnJvcihudWxsKTsKICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBsb2dpbihjcmVkZW50aWFscyk7CiAgICAgIGlmICgiZXJyb3IiIGluIHJlc3BvbnNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLmVycm9yKTsKICAgICAgfQogICAgICBzdG9yZUF1dGhEYXRhKHJlc3BvbnNlKTsKICAgICAgc2V0Q3VycmVudFVzZXIocmVzcG9uc2UuaWRlbnRpdHkpOwogICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICJBdXRoZW50aWNhdGlvbiBmYWlsZWQiOwogICAgICBzZXRFcnJvcihlcnJvck1lc3NhZ2UpOwogICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSB9OwogICAgfSBmaW5hbGx5IHsKICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTsKICAgIH0KICB9OwogIGNvbnN0IHN0b3JlQXV0aERhdGEgPSAoYXV0aERhdGEpID0+IHsKICAgIGNvbnNvbGUubG9nKCJTdG9yaW5nIGF1dGggZGF0YSBpbiB0b2tlbiBzZXJ2aWNlIiwgYXV0aERhdGEuaWRlbnRpdHkpOwogICAgdG9rZW5TZXJ2aWNlLnNldEN1cnJlbnRVc2VyKGF1dGhEYXRhLmlkZW50aXR5KTsKICAgIGlmIChhdXRoRGF0YS5zdGF0dXMgIT09IDIwMCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIkZhaWxlZCB0byBzZXQgYXV0aGVudGljYXRpb24gY29va2llcyIpOwogICAgfQogIH07CiAgY29uc3QgbG9nb3V0ID0gYXN5bmMgKCkgPT4gewogICAgdHJ5IHsKICAgICAgYXdhaXQgZmV0Y2goImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMS9hdXRoL2xvZ291dCIsIHsKICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICBjcmVkZW50aWFsczogImluY2x1ZGUiCiAgICAgICAgLy8gSW1wb3J0YW50OiBpbmNsdWRlIGNvb2tpZXMgaW4gdGhlIHJlcXVlc3QKICAgICAgfSk7CiAgICB9IGNhdGNoIChlcnJvcjIpIHsKICAgICAgY29uc29sZS5lcnJvcigiRXJyb3IgZHVyaW5nIGxvZ291dDoiLCBlcnJvcjIpOwogICAgfQogICAgdG9rZW5TZXJ2aWNlLmNsZWFyVG9rZW5zKCk7CiAgICBzZXRDdXJyZW50VXNlcihudWxsKTsKICB9OwogIHJldHVybiB7CiAgICBpc0xvYWRpbmcsCiAgICBlcnJvciwKICAgIGN1cnJlbnRVc2VyLAogICAgaGFuZGxlTG9naW4sCiAgICBsb2dvdXQKICB9Owp9OwoKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYkluVnpaUzFoZFhSb0xuUnpJbDBzSW5OdmRYSmpaWE5EYjI1MFpXNTBJanBiSW1sdGNHOXlkQ0I3SUhWelpWTjBZWFJsTENCMWMyVkZabVpsWTNRZ2ZTQm1jbTl0SUNkeVpXRmpkQ2RjYm1sdGNHOXlkQ0IwZVhCbElIc2dRWFYwYUZKbGNYVmxjM1FzSUVGMWRHaFNaWE53YjI1elpTQjlJR1p5YjIwZ0p5NHVMMk52Ym5OMWJXVnlKMXh1YVcxd2IzSjBJSHNnYkc5bmFXNGdmU0JtY205dElDY3VMaTlqYjI1emRXMWxjaWRjYm1sdGNHOXlkQ0I3SUhSdmEyVnVVMlZ5ZG1salpTQjlJR1p5YjIwZ0p5NHVMM05sY25acFkyVnpMM1J2YTJWdUxYTmxjblpwWTJVblhHNWNiaThxS2x4dUlDb2dRM1Z6ZEc5dElHaHZiMnNnWm05eUlHaGhibVJzYVc1bklHRjFkR2hsYm5ScFkyRjBhVzl1WEc0Z0tpQkdiMnhzYjNkeklGTkZUMDRuY3lCbWRXNWpkR2x2Ym1Gc0lIQnliMmR5WVcxdGFXNW5JSEJ5YVc1amFYQnNaWE1nZDJsMGFEcGNiaUFxSUMwZ1VIVnlaU0JtZFc1amRHbHZibk5jYmlBcUlDMGdTVzF0ZFhSaFlteGxJSE4wWVhSbFhHNGdLaUF0SUZObGNHRnlZWFJwYjI0Z2IyWWdZMjl1WTJWeWJuTmNiaUFxTDF4dVpYaHdiM0owSUdOdmJuTjBJSFZ6WlVGMWRHZ2dQU0FvS1NBOVBpQjdYRzRnSUdOdmJuTjBJRnRwYzB4dllXUnBibWNzSUhObGRFbHpURzloWkdsdVoxMGdQU0IxYzJWVGRHRjBaU2htWVd4elpTbGNiaUFnWTI5dWMzUWdXMlZ5Y205eUxDQnpaWFJGY25KdmNsMGdQU0IxYzJWVGRHRjBaVHh6ZEhKcGJtY2dmQ0J1ZFd4c1BpaHVkV3hzS1Z4dUlDQmpiMjV6ZENCYlkzVnljbVZ1ZEZWelpYSXNJSE5sZEVOMWNuSmxiblJWYzJWeVhTQTlJSFZ6WlZOMFlYUmxLSFJ2YTJWdVUyVnlkbWxqWlM1blpYUkRkWEp5Wlc1MFZYTmxjaWdwS1Z4dVhHNGdJQzh2SUV0bFpYQWdZM1Z5Y21WdWRGVnpaWElnYVc0Z2MzbHVZeUIzYVhSb0lIUnZhMlZ1SUhObGNuWnBZMlZjYmlBZ2RYTmxSV1ptWldOMEtDZ3BJRDArSUh0Y2JpQWdJQ0F2THlCVmNHUmhkR1VnWTNWeWNtVnVkQ0IxYzJWeUlIZG9aVzVsZG1WeUlIUm9aU0JqYjIxd2IyNWxiblFnYlc5MWJuUnpJRzl5SUhSdmEyVnVJSE5sY25acFkyVWdZMmhoYm1kbGMxeHVJQ0FnSUdOdmJuTjBJSFZ3WkdGMFpWVnpaWElnUFNBb0tTQTlQaUI3WEc0Z0lDQWdJQ0JqYjI1emRDQjFjMlZ5SUQwZ2RHOXJaVzVUWlhKMmFXTmxMbWRsZEVOMWNuSmxiblJWYzJWeUtDbGNiaUFnSUNBZ0lITmxkRU4xY25KbGJuUlZjMlZ5S0hWelpYSXBYRzRnSUNBZ2ZWeHVYRzRnSUNBZ0x5OGdTVzVwZEdsaGJDQjFjR1JoZEdWY2JpQWdJQ0IxY0dSaGRHVlZjMlZ5S0NsY2JseHVJQ0FnSUM4dklGTmxkQ0IxY0NCaGJpQnBiblJsY25aaGJDQjBieUJqYUdWamF5Qm1iM0lnZFhCa1lYUmxjMXh1SUNBZ0lDOHZJRlJvYVhNZ2FYTWdZU0J6YVcxd2JHVWdjMjlzZFhScGIyNDdJR2x1SUhCeWIyUjFZM1JwYjI0c0lIbHZkU2RrSUhWelpTQmhiaUJsZG1WdWRDQnplWE4wWlcxY2JpQWdJQ0JqYjI1emRDQnBiblJsY25aaGJDQTlJSE5sZEVsdWRHVnlkbUZzS0hWd1pHRjBaVlZ6WlhJc0lERXdNREFwWEc1Y2JpQWdJQ0J5WlhSMWNtNGdLQ2tnUFQ0Z1kyeGxZWEpKYm5SbGNuWmhiQ2hwYm5SbGNuWmhiQ2xjYmlBZ2ZTd2dXMTBwWEc1Y2JpQWdMeW9xWEc0Z0lDQXFJRWhoYm1Sc1pTQjFjMlZ5SUd4dloybHVYRzRnSUNBcUlFQndZWEpoYlNCamNtVmtaVzUwYVdGc2N5QlZjMlZ5SUdOeVpXUmxiblJwWVd4eklIZHBkR2dnZFhObGNtNWhiV1VzSUhCaGMzTjNiM0prSUdGdVpDQnZjSFJwYjI1aGJDQjFjMlZ5U1dSbGJuUnBabWxsY2x4dUlDQWdLaUJBY21WMGRYSnVjeUJUZFdOalpYTnpJSE4wWVhSMWN5QmhibVFnWVc1NUlHVnljbTl5SUcxbGMzTmhaMlZjYmlBZ0lDb3ZYRzRnSUdOdmJuTjBJR2hoYm1Sc1pVeHZaMmx1SUQwZ1lYTjVibU1nS0Z4dUlDQWdJR055WldSbGJuUnBZV3h6T2lCQmRYUm9VbVZ4ZFdWemRGeHVJQ0FwT2lCUWNtOXRhWE5sUEhzZ2MzVmpZMlZ6Y3pvZ1ltOXZiR1ZoYmlCOVBpQTlQaUI3WEc0Z0lDQWdkSEo1SUh0Y2JpQWdJQ0FnSUhObGRFbHpURzloWkdsdVp5aDBjblZsS1Z4dUlDQWdJQ0FnYzJWMFJYSnliM0lvYm5Wc2JDbGNibHh1SUNBZ0lDQWdZMjl1YzNRZ2NtVnpjRzl1YzJVZ1BTQmhkMkZwZENCc2IyZHBiaWhqY21Wa1pXNTBhV0ZzY3lsY2JseHVJQ0FnSUNBZ0x5OGdRMmhsWTJzZ2FXWWdkR2hsSUhKbGMzQnZibk5sSUdseklHRnVJR1Z5Y205eVhHNGdJQ0FnSUNCcFppQW9KMlZ5Y205eUp5QnBiaUJ5WlhOd2IyNXpaU2tnZTF4dUlDQWdJQ0FnSUNCMGFISnZkeUJ1WlhjZ1JYSnliM0lvY21WemNHOXVjMlV1WlhKeWIzSXBYRzRnSUNBZ0lDQjlYRzVjYmlBZ0lDQWdJQzh2SUZOMGIzSmxJSFJvWlNCMGIydGxiaUJwYm1adklHbHVJSFJvWlNCMGIydGxiaUJ6WlhKMmFXTmxYRzRnSUNBZ0lDQXZMeUJKYmlCaElISmxZV3dnWVhCd0xDQjBhR2x6SUhkdmRXeGtJSEJ5YjNCbGNteDVJSE4wYjNKbElIUm9aU0JLVjFSY2JpQWdJQ0FnSUhOMGIzSmxRWFYwYUVSaGRHRW9jbVZ6Y0c5dWMyVXBYRzVjYmlBZ0lDQWdJQzh2SUZWd1pHRjBaU0JqZFhKeVpXNTBJSFZ6WlhJZ2MzUmhkR1ZjYmlBZ0lDQWdJSE5sZEVOMWNuSmxiblJWYzJWeUtISmxjM0J2Ym5ObExtbGtaVzUwYVhSNUtWeHVYRzRnSUNBZ0lDQnlaWFIxY200Z2V5QnpkV05qWlhOek9pQjBjblZsSUgxY2JpQWdJQ0I5SUdOaGRHTm9JQ2hsY25JcElIdGNiaUFnSUNBZ0lHTnZibk4wSUdWeWNtOXlUV1Z6YzJGblpTQTlYRzRnSUNBZ0lDQWdJR1Z5Y2lCcGJuTjBZVzVqWlc5bUlFVnljbTl5SUQ4Z1pYSnlMbTFsYzNOaFoyVWdPaUFuUVhWMGFHVnVkR2xqWVhScGIyNGdabUZwYkdWa0oxeHVJQ0FnSUNBZ2MyVjBSWEp5YjNJb1pYSnliM0pOWlhOellXZGxLVnh1SUNBZ0lDQWdjbVYwZFhKdUlIc2djM1ZqWTJWemN6b2dabUZzYzJVZ2ZWeHVJQ0FnSUgwZ1ptbHVZV3hzZVNCN1hHNGdJQ0FnSUNCelpYUkpjMHh2WVdScGJtY29abUZzYzJVcFhHNGdJQ0FnZlZ4dUlDQjlYRzVjYmlBZ0x5b3FYRzRnSUNBcUlGTjBiM0psSUdGMWRHaGxiblJwWTJGMGFXOXVJR1JoZEdFZ2FXNGdkR2hsSUhSdmEyVnVJSE5sY25acFkyVmNiaUFnSUNvZ1FIQmhjbUZ0SUdGMWRHaEVZWFJoSUVGMWRHaGxiblJwWTJGMGFXOXVJSEpsYzNCdmJuTmxJR1JoZEdGY2JpQWdJQ292WEc0Z0lHTnZibk4wSUhOMGIzSmxRWFYwYUVSaGRHRWdQU0FvWVhWMGFFUmhkR0U2SUVGMWRHaFNaWE53YjI1elpTazZJSFp2YVdRZ1BUNGdlMXh1SUNBZ0lDOHZJRWx1SUdFZ2NtVmhiQ0JoY0hBc0lIUm9hWE1nZDI5MWJHUWdjSEp2Y0dWeWJIa2djM1J2Y21VZ2RHOXJaVzV6SUdsdUlIUm9aU0IwYjJ0bGJpQnpaWEoyYVdObFhHNGdJQ0FnWTI5dWMyOXNaUzVzYjJjb0oxTjBiM0pwYm1jZ1lYVjBhQ0JrWVhSaElHbHVJSFJ2YTJWdUlITmxjblpwWTJVbkxDQmhkWFJvUkdGMFlTNXBaR1Z1ZEdsMGVTbGNibHh1SUNBZ0lDOHZJRlJvWlNCMGIydGxiaUJ6WlhKMmFXTmxJR2hoYm1Sc1pYTWdjM1J2Y21sdVp5QjBhR1VnZFhObGNpQnBaR1Z1ZEdsMGVWeHVJQ0FnSUhSdmEyVnVVMlZ5ZG1salpTNXpaWFJEZFhKeVpXNTBWWE5sY2loaGRYUm9SR0YwWVM1cFpHVnVkR2wwZVNsY2JseHVJQ0FnSUM4dklGWmxjbWxtZVNCMGFHRjBJR052YjJ0cFpYTWdkMlZ5WlNCelpYUWdZbmtnWTJobFkydHBibWNnZEdobElISmxjM0J2Ym5ObElITjBZWFIxYzF4dUlDQWdJR2xtSUNoaGRYUm9SR0YwWVM1emRHRjBkWE1nSVQwOUlESXdNQ2tnZTF4dUlDQWdJQ0FnZEdoeWIzY2dibVYzSUVWeWNtOXlLQ2RHWVdsc1pXUWdkRzhnYzJWMElHRjFkR2hsYm5ScFkyRjBhVzl1SUdOdmIydHBaWE1uS1Z4dUlDQWdJSDFjYmlBZ2ZWeHVYRzRnSUM4cUtseHVJQ0FnS2lCTWIyY2dkR2hsSUhWelpYSWdiM1YwWEc0Z0lDQXFMMXh1SUNCamIyNXpkQ0JzYjJkdmRYUWdQU0JoYzNsdVl5QW9LVG9nVUhKdmJXbHpaVHgyYjJsa1BpQTlQaUI3WEc0Z0lDQWdkSEo1SUh0Y2JpQWdJQ0FnSUM4dklFTmhiR3dnZEdobElHSmhZMnRsYm1RZ2JHOW5iM1YwSUdWdVpIQnZhVzUwSUhSdklHTnNaV0Z5SUdoMGRIQlBibXg1SUdOdmIydHBaWE5jYmlBZ0lDQWdJR0YzWVdsMElHWmxkR05vS0Nkb2RIUndPaTh2Ykc5allXeG9iM04wT2pNd01ERXZZWFYwYUM5c2IyZHZkWFFuTENCN1hHNGdJQ0FnSUNBZ0lHMWxkR2h2WkRvZ0oxQlBVMVFuTEZ4dUlDQWdJQ0FnSUNCamNtVmtaVzUwYVdGc2N6b2dKMmx1WTJ4MVpHVW5JQzh2SUVsdGNHOXlkR0Z1ZERvZ2FXNWpiSFZrWlNCamIyOXJhV1Z6SUdsdUlIUm9aU0J5WlhGMVpYTjBYRzRnSUNBZ0lDQjlLVnh1SUNBZ0lIMGdZMkYwWTJnZ0tHVnljbTl5S1NCN1hHNGdJQ0FnSUNCamIyNXpiMnhsTG1WeWNtOXlLQ2RGY25KdmNpQmtkWEpwYm1jZ2JHOW5iM1YwT2ljc0lHVnljbTl5S1Z4dUlDQWdJSDFjYmx4dUlDQWdJQzh2SUVOc1pXRnlJR3h2WTJGc0lITjBiM0poWjJVZ1lXNWtJSFJ2YTJWdWMxeHVJQ0FnSUhSdmEyVnVVMlZ5ZG1salpTNWpiR1ZoY2xSdmEyVnVjeWdwWEc0Z0lDQWdjMlYwUTNWeWNtVnVkRlZ6WlhJb2JuVnNiQ2xjYmlBZ2ZWeHVYRzRnSUhKbGRIVnliaUI3WEc0Z0lDQWdhWE5NYjJGa2FXNW5MRnh1SUNBZ0lHVnljbTl5TEZ4dUlDQWdJR04xY25KbGJuUlZjMlZ5TEZ4dUlDQWdJR2hoYm1Sc1pVeHZaMmx1TEZ4dUlDQWdJR3h2WjI5MWRGeHVJQ0I5WEc1OVhHNGlYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMRk5CUVZNc1ZVRkJWU3hwUWtGQmFVSTdRVUZGY0VNc1UwRkJVeXhoUVVGaE8wRkJRM1JDTEZOQlFWTXNiMEpCUVc5Q08wRkJVM1JDTEdGQlFVMHNWVUZCVlN4TlFVRk5PMEZCUXpOQ0xGRkJRVTBzUTBGQlF5eFhRVUZYTEZsQlFWa3NTVUZCU1N4VFFVRlRMRXRCUVVzN1FVRkRhRVFzVVVGQlRTeERRVUZETEU5QlFVOHNVVUZCVVN4SlFVRkpMRk5CUVhkQ0xFbEJRVWs3UVVGRGRFUXNVVUZCVFN4RFFVRkRMR0ZCUVdFc1kwRkJZeXhKUVVGSkxGTkJRVk1zWVVGQllTeGxRVUZsTEVOQlFVTTdRVUZITlVVc1dVRkJWU3hOUVVGTk8wRkJSV1FzVlVGQlRTeGhRVUZoTEUxQlFVMDdRVUZEZGtJc1dVRkJUU3hQUVVGUExHRkJRV0VzWlVGQlpUdEJRVU42UXl4eFFrRkJaU3hKUVVGSk8wRkJRVUVzU1VGRGNrSTdRVUZIUVN4bFFVRlhPMEZCU1Znc1ZVRkJUU3hYUVVGWExGbEJRVmtzV1VGQldTeEhRVUZKTzBGQlJUZERMRmRCUVU4c1RVRkJUU3hqUVVGakxGRkJRVkU3UVVGQlFTeEZRVU55UXl4SFFVRkhMRU5CUVVNc1EwRkJRenRCUVU5TUxGRkJRVTBzWTBGQll5eFBRVU5zUWl4blFrRkRhME03UVVGRGJFTXNVVUZCU1R0QlFVTkdMRzFDUVVGaExFbEJRVWs3UVVGRGFrSXNaVUZCVXl4SlFVRkpPMEZCUldJc1dVRkJUU3hYUVVGWExFMUJRVTBzVFVGQlRTeFhRVUZYTzBGQlIzaERMRlZCUVVrc1YwRkJWeXhWUVVGVk8wRkJRM1pDTEdOQlFVMHNTVUZCU1N4TlFVRk5MRk5CUVZNc1MwRkJTenRCUVVGQkxFMUJRMmhETzBGQlNVRXNiMEpCUVdNc1VVRkJVVHRCUVVkMFFpeHhRa0ZCWlN4VFFVRlRMRkZCUVZFN1FVRkZhRU1zWVVGQlR5eEZRVUZGTEZOQlFWTXNTMEZCU3p0QlFVRkJMRWxCUTNwQ0xGTkJRVk1zUzBGQlN6dEJRVU5hTEZsQlFVMHNaVUZEU2l4bFFVRmxMRkZCUVZFc1NVRkJTU3hWUVVGVk8wRkJRM1pETEdWQlFWTXNXVUZCV1R0QlFVTnlRaXhoUVVGUExFVkJRVVVzVTBGQlV5eE5RVUZOTzBGQlFVRXNTVUZETVVJc1ZVRkJSVHRCUVVOQkxHMUNRVUZoTEV0QlFVczdRVUZCUVN4SlFVTndRanRCUVVGQkxFVkJRMFk3UVVGTlFTeFJRVUZOTEdkQ1FVRm5RaXhEUVVGRExHRkJRV2xETzBGQlJYUkVMRmxCUVZFc1NVRkJTU3h6UTBGQmMwTXNVMEZCVXl4UlFVRlJPMEZCUjI1RkxHbENRVUZoTEdWQlFXVXNVMEZCVXl4UlFVRlJPMEZCUnpkRExGRkJRVWtzVTBGQlV5eFhRVUZYTEV0QlFVczdRVUZETTBJc1dVRkJUU3hKUVVGSkxFMUJRVTBzYzBOQlFYTkRPMEZCUVVFc1NVRkRlRVE3UVVGQlFTeEZRVU5HTzBGQlMwRXNVVUZCVFN4VFFVRlRMRmxCUVRKQ08wRkJRM2hETEZGQlFVazdRVUZGUml4WlFVRk5MRTFCUVUwc2NVTkJRWEZETzBGQlFVRXNVVUZETDBNc1VVRkJVVHRCUVVGQkxGRkJRMUlzWVVGQllUdEJRVUZCTzBGQlFVRXNUVUZEWml4RFFVRkRPMEZCUVVFc1NVRkRTQ3hUUVVGVFFTeFJRVUZQTzBGQlEyUXNZMEZCVVN4TlFVRk5MSGRDUVVGM1FrRXNUVUZCU3p0QlFVRkJMRWxCUXpkRE8wRkJSMEVzYVVKQlFXRXNXVUZCV1R0QlFVTjZRaXh0UWtGQlpTeEpRVUZKTzBGQlFVRXNSVUZEY2tJN1FVRkZRU3hUUVVGUE8wRkJRVUVzU1VGRFREdEJRVUZCTEVsQlEwRTdRVUZCUVN4SlFVTkJPMEZCUVVFc1NVRkRRVHRCUVVGQkxFbEJRMEU3UVVGQlFTeEZRVU5HTzBGQlEwWTdJaXdpYm1GdFpYTWlPbHNpWlhKeWIzSWlYWDA9",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 8439
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 6,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.660Z",
        "time": 12,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/services/cookie-utils.ts",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/services/token-service.ts"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"7fb-fv56IstnB4gyBl+Uk1IeJcRK768\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "9322"
            }
          ],
          "content": {
            "size": 9322,
            "mimeType": "text/javascript",
            "text": "Y29uc3QgdmFsaWRhdGVTYW1lU2l0ZSA9ICh2YWx1ZSkgPT4gewogIGlmICghdmFsdWUpIHJldHVybiAiTGF4IjsKICBjb25zdCBub3JtYWxpemVkID0gdmFsdWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB2YWx1ZS5zbGljZSgxKS50b0xvd2VyQ2FzZSgpOwogIGlmIChbIlN0cmljdCIsICJMYXgiLCAiTm9uZSJdLmluY2x1ZGVzKG5vcm1hbGl6ZWQpKSB7CiAgICByZXR1cm4gbm9ybWFsaXplZDsKICB9CiAgY29uc29sZS53YXJuKGBJbnZhbGlkIFNhbWVTaXRlIHZhbHVlOiAke3ZhbHVlfS4gRGVmYXVsdGluZyB0byAnTGF4Jy5gKTsKICByZXR1cm4gIkxheCI7Cn07CmV4cG9ydCBjb25zdCBzZXRDb29raWUgPSAobmFtZSwgdmFsdWUsIG9wdGlvbnMgPSB7fSkgPT4gewogIGNvbnN0IGRlZmF1bHRPcHRpb25zID0gewogICAgZG9tYWluOiB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUsCiAgICBwYXRoOiAiLyIsCiAgICBleHBpcmVzOiAwLAogICAgLy8gU2Vzc2lvbiBjb29raWUgYnkgZGVmYXVsdAogICAgaHR0cE9ubHk6IGZhbHNlLAogICAgLy8gQ2FuJ3Qgc2V0IHRydWUgZnJvbSBjbGllbnQtc2lkZSBKYXZhU2NyaXB0CiAgICBzZWN1cmU6IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gImh0dHBzOiIsCiAgICBzYW1lU2l0ZTogIkxheCIKICB9OwogIGNvbnN0IGNvb2tpZU9wdGlvbnMgPSB7IC4uLmRlZmF1bHRPcHRpb25zLCAuLi5vcHRpb25zIH07CiAgbGV0IGNvb2tpZVN0cmluZyA9IGAke2VuY29kZVVSSUNvbXBvbmVudChuYW1lKX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsdWUpfWA7CiAgaWYgKGNvb2tpZU9wdGlvbnMuZXhwaXJlcyA+IDApIHsKICAgIGNvb2tpZVN0cmluZyArPSBgOyBleHBpcmVzPSR7bmV3IERhdGUoCiAgICAgIGNvb2tpZU9wdGlvbnMuZXhwaXJlcyAqIDFlMwogICAgKS50b1VUQ1N0cmluZygpfWA7CiAgfQogIGNvb2tpZVN0cmluZyArPSBgOyBwYXRoPSR7Y29va2llT3B0aW9ucy5wYXRofWA7CiAgaWYgKGNvb2tpZU9wdGlvbnMuZG9tYWluKSB7CiAgICBjb29raWVTdHJpbmcgKz0gYDsgZG9tYWluPSR7Y29va2llT3B0aW9ucy5kb21haW59YDsKICB9CiAgaWYgKGNvb2tpZU9wdGlvbnMuc2VjdXJlKSB7CiAgICBjb29raWVTdHJpbmcgKz0gIjsgc2VjdXJlIjsKICB9CiAgY29uc3QgdmFsaWRTYW1lU2l0ZSA9IHZhbGlkYXRlU2FtZVNpdGUoY29va2llT3B0aW9ucy5zYW1lU2l0ZSk7CiAgY29va2llU3RyaW5nICs9IGA7IHNhbWVzaXRlPSR7dmFsaWRTYW1lU2l0ZX1gOwogIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZVN0cmluZzsKfTsKZXhwb3J0IGNvbnN0IGdldENvb2tpZSA9IChuYW1lKSA9PiB7CiAgY29uc3QgY29va2llU3RyaW5nID0gZG9jdW1lbnQuY29va2llOwogIGlmICghY29va2llU3RyaW5nKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CiAgY29uc3QgY29va2llcyA9IGNvb2tpZVN0cmluZy5zcGxpdCgiOyAiKTsKICBmb3IgKGNvbnN0IGNvb2tpZSBvZiBjb29raWVzKSB7CiAgICBjb25zdCBwYXJ0cyA9IGNvb2tpZS5zcGxpdCgiPSIpOwogICAgY29uc3QgY29va2llTmFtZSA9IHBhcnRzWzBdIHx8ICIiOwogICAgY29uc3QgY29va2llVmFsdWUgPSBwYXJ0cy5zbGljZSgxKS5qb2luKCI9IikgfHwgIiI7CiAgICBpZiAoZGVjb2RlVVJJQ29tcG9uZW50KGNvb2tpZU5hbWUpID09PSBuYW1lKSB7CiAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoY29va2llVmFsdWUpOwogICAgfQogIH0KICByZXR1cm4gbnVsbDsKfTsKZXhwb3J0IGNvbnN0IGRlbGV0ZUNvb2tpZSA9IChuYW1lLCBvcHRpb25zID0ge30pID0+IHsKICBzZXRDb29raWUobmFtZSwgIiIsIHsKICAgIGRvbWFpbjogb3B0aW9ucy5kb21haW4gfHwgdm9pZCAwLAogICAgcGF0aDogb3B0aW9ucy5wYXRoIHx8ICIvIiwKICAgIGV4cGlyZXM6IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDFlMykgLSA4NjQwMCwKICAgIC8vIFNldCB0byB5ZXN0ZXJkYXkKICAgIGh0dHBPbmx5OiBmYWxzZSwKICAgIHNlY3VyZTogZmFsc2UsCiAgICBzYW1lU2l0ZTogIkxheCIKICB9KTsKfTsKCi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnpiM1Z5WTJWeklqcGJJbU52YjJ0cFpTMTFkR2xzY3k1MGN5SmRMQ0p6YjNWeVkyVnpRMjl1ZEdWdWRDSTZXeUl2S2lvZ1EyOXZhMmxsSUhWMGFXeHBkR2xsY3lCbWIzSWdiV0Z1WVdkcGJtY2dZbkp2ZDNObGNpQmpiMjlyYVdWeklHbHVJR0VnZEhsd1pTMXpZV1psSUhkaGVTQXFMMXh1WEc0dktpcGNiaUFxSUU5d2RHbHZibk1nWm05eUlITmxkSFJwYm1jZ1lTQmpiMjlyYVdWY2JpQXFMMXh1ZEhsd1pTQlRZVzFsVTJsMFpWWmhiSFZsSUQwZ0oxTjBjbWxqZENjZ2ZDQW5UR0Y0SnlCOElDZE9iMjVsSjF4dVhHNHZLaXBjYmlBcUlGWmhiR2xrWVhSbElHRWdVMkZ0WlZOcGRHVWdkbUZzZFdVc0lHUmxabUYxYkhScGJtY2dkRzhnSjB4aGVDY2dhV1lnYVc1MllXeHBaRnh1SUNvdlhHNWpiMjV6ZENCMllXeHBaR0YwWlZOaGJXVlRhWFJsSUQwZ0tIWmhiSFZsT2lCemRISnBibWNnZkNCMWJtUmxabWx1WldRcE9pQlRZVzFsVTJsMFpWWmhiSFZsSUQwK0lIdGNiaUFnYVdZZ0tDRjJZV3gxWlNrZ2NtVjBkWEp1SUNkTVlYZ25YRzVjYmlBZ0x5OGdUbTl5YldGc2FYcGxJSFJ2SUZScGRHeGxJRU5oYzJWY2JpQWdZMjl1YzNRZ2JtOXliV0ZzYVhwbFpDQTlYRzRnSUNBZ2RtRnNkV1V1WTJoaGNrRjBLREFwTG5SdlZYQndaWEpEWVhObEtDa2dLeUIyWVd4MVpTNXpiR2xqWlNneEtTNTBiMHh2ZDJWeVEyRnpaU2dwWEc1Y2JpQWdhV1lnS0ZzblUzUnlhV04wSnl3Z0oweGhlQ2NzSUNkT2IyNWxKMTB1YVc1amJIVmtaWE1vYm05eWJXRnNhWHBsWkNrcElIdGNiaUFnSUNCeVpYUjFjbTRnYm05eWJXRnNhWHBsWkNCaGN5QlRZVzFsVTJsMFpWWmhiSFZsWEc0Z0lIMWNibHh1SUNBdkx5QkVaV1poZFd4MElIUnZJR0VnYzJGbVpTQjJZV3gxWlZ4dUlDQmpiMjV6YjJ4bExuZGhjbTRvWUVsdWRtRnNhV1FnVTJGdFpWTnBkR1VnZG1Gc2RXVTZJQ1I3ZG1Gc2RXVjlMaUJFWldaaGRXeDBhVzVuSUhSdklDZE1ZWGduTG1BcFhHNGdJSEpsZEhWeWJpQW5UR0Y0SjF4dWZWeHVYRzR2S2lwY2JpQXFJRTl3ZEdsdmJuTWdabTl5SUhObGRIUnBibWNnWVNCamIyOXJhV1ZjYmlBcUwxeHVaWGh3YjNKMElIUjVjR1VnUTI5dmEybGxUM0IwYVc5dWN5QTlJSHRjYmlBZ0x5b3FJRVJ2YldGcGJpQm1iM0lnZEdobElHTnZiMnRwWlNBb1pHVm1ZWFZzZERvZ1kzVnljbVZ1ZENCa2IyMWhhVzRwSUNvdlhHNGdJR1J2YldGcGJqODZJSE4wY21sdVoxeHVJQ0F2S2lvZ1VHRjBhQ0JtYjNJZ2RHaGxJR052YjJ0cFpTQW9aR1ZtWVhWc2REb2dKeThuS1NBcUwxeHVJQ0J3WVhSb1B6b2djM1J5YVc1blhHNGdJQzhxS2lCRmVIQnBjbUYwYVc5dUlHUmhkR1VnYVc0Z2MyVmpiMjVrY3lCemFXNWpaU0JsY0c5amFDQXFMMXh1SUNCbGVIQnBjbVZ6UHpvZ2JuVnRZbVZ5WEc0Z0lDOHFLaUJYYUdWMGFHVnlJSFJvWlNCamIyOXJhV1VnYVhNZ1NGUlVVQ0J2Ym14NUlDaGtaV1poZFd4ME9pQm1ZV3h6WlNrZ0tpOWNiaUFnYUhSMGNFOXViSGsvT2lCaWIyOXNaV0Z1WEc0Z0lDOHFLaUJYYUdWMGFHVnlJSFJvWlNCamIyOXJhV1VnY21WeGRXbHlaWE1nU0ZSVVVGTWdLR1JsWm1GMWJIUTZJR1poYkhObEtTQXFMMXh1SUNCelpXTjFjbVUvT2lCaWIyOXNaV0Z1WEc0Z0lDOHFLaUJUWVcxbFUybDBaU0JqYjI5cmFXVWdjRzlzYVdONUlDaGtaV1poZFd4ME9pQW5UR0Y0SnlrZ0tpOWNiaUFnYzJGdFpWTnBkR1UvT2lCemRISnBibWRjYm4xY2JseHVMeW9xWEc0Z0tpQlRaWFFnWVNCamIyOXJhV1VnYVc0Z2RHaGxJR0p5YjNkelpYSmNiaUFxSUVCd1lYSmhiU0J1WVcxbElDMGdRMjl2YTJsbElHNWhiV1ZjYmlBcUlFQndZWEpoYlNCMllXeDFaU0F0SUVOdmIydHBaU0IyWVd4MVpWeHVJQ29nUUhCaGNtRnRJRzl3ZEdsdmJuTWdMU0JEYjI5cmFXVWdiM0IwYVc5dWMxeHVJQ292WEc1bGVIQnZjblFnWTI5dWMzUWdjMlYwUTI5dmEybGxJRDBnS0Z4dUlDQnVZVzFsT2lCemRISnBibWNzWEc0Z0lIWmhiSFZsT2lCemRISnBibWNzWEc0Z0lHOXdkR2x2Ym5NNklFTnZiMnRwWlU5d2RHbHZibk1nUFNCN2ZWeHVLVG9nZG05cFpDQTlQaUI3WEc0Z0lDOHZJRVJsWm1GMWJIUWdiM0IwYVc5dWMxeHVJQ0JqYjI1emRDQmtaV1poZFd4MFQzQjBhVzl1Y3pvZ1VtVnhkV2x5WldROFEyOXZhMmxsVDNCMGFXOXVjejRnUFNCN1hHNGdJQ0FnWkc5dFlXbHVPaUIzYVc1a2IzY3ViRzlqWVhScGIyNHVhRzl6ZEc1aGJXVXNYRzRnSUNBZ2NHRjBhRG9nSnk4bkxGeHVJQ0FnSUdWNGNHbHlaWE02SURBc0lDOHZJRk5sYzNOcGIyNGdZMjl2YTJsbElHSjVJR1JsWm1GMWJIUmNiaUFnSUNCb2RIUndUMjVzZVRvZ1ptRnNjMlVzSUM4dklFTmhiaWQwSUhObGRDQjBjblZsSUdaeWIyMGdZMnhwWlc1MExYTnBaR1VnU21GMllWTmpjbWx3ZEZ4dUlDQWdJSE5sWTNWeVpUb2dkMmx1Wkc5M0xteHZZMkYwYVc5dUxuQnliM1J2WTI5c0lEMDlQU0FuYUhSMGNITTZKeXhjYmlBZ0lDQnpZVzFsVTJsMFpUb2dKMHhoZUNkY2JpQWdmVnh1WEc0Z0lDOHZJRTFsY21kbElIZHBkR2dnY0hKdmRtbGtaV1FnYjNCMGFXOXVjMXh1SUNCamIyNXpkQ0JqYjI5cmFXVlBjSFJwYjI1eklEMGdleUF1TGk1a1pXWmhkV3gwVDNCMGFXOXVjeXdnTGk0dWIzQjBhVzl1Y3lCOVhHNWNiaUFnTHk4Z1FuVnBiR1FnWTI5dmEybGxJSE4wY21sdVoxeHVJQ0JzWlhRZ1kyOXZhMmxsVTNSeWFXNW5JRDBnWUNSN1pXNWpiMlJsVlZKSlEyOXRjRzl1Wlc1MEtHNWhiV1VwZlQwa2UyVnVZMjlrWlZWU1NVTnZiWEJ2Ym1WdWRDaDJZV3gxWlNsOVlGeHVYRzRnSUM4dklFRmtaQ0J2Y0hScGIyNXpYRzRnSUdsbUlDaGpiMjlyYVdWUGNIUnBiMjV6TG1WNGNHbHlaWE1nUGlBd0tTQjdYRzRnSUNBZ1kyOXZhMmxsVTNSeWFXNW5JQ3M5SUdBN0lHVjRjR2x5WlhNOUpIdHVaWGNnUkdGMFpTaGNiaUFnSUNBZ0lHTnZiMnRwWlU5d2RHbHZibk11Wlhod2FYSmxjeUFxSURFd01EQmNiaUFnSUNBcExuUnZWVlJEVTNSeWFXNW5LQ2w5WUZ4dUlDQjlYRzVjYmlBZ1kyOXZhMmxsVTNSeWFXNW5JQ3M5SUdBN0lIQmhkR2c5Skh0amIyOXJhV1ZQY0hScGIyNXpMbkJoZEdoOVlGeHVYRzRnSUdsbUlDaGpiMjlyYVdWUGNIUnBiMjV6TG1SdmJXRnBiaWtnZTF4dUlDQWdJR052YjJ0cFpWTjBjbWx1WnlBclBTQmdPeUJrYjIxaGFXNDlKSHRqYjI5cmFXVlBjSFJwYjI1ekxtUnZiV0ZwYm4xZ1hHNGdJSDFjYmx4dUlDQnBaaUFvWTI5dmEybGxUM0IwYVc5dWN5NXpaV04xY21VcElIdGNiaUFnSUNCamIyOXJhV1ZUZEhKcGJtY2dLejBnSnpzZ2MyVmpkWEpsSjF4dUlDQjlYRzVjYmlBZ0x5OGdWbUZzYVdSaGRHVWdZVzVrSUdGd2NHeDVJRk5oYldWVGFYUmxJR0YwZEhKcFluVjBaVnh1SUNCamIyNXpkQ0IyWVd4cFpGTmhiV1ZUYVhSbElEMGdkbUZzYVdSaGRHVlRZVzFsVTJsMFpTaGpiMjlyYVdWUGNIUnBiMjV6TG5OaGJXVlRhWFJsS1Z4dUlDQmpiMjlyYVdWVGRISnBibWNnS3owZ1lEc2djMkZ0WlhOcGRHVTlKSHQyWVd4cFpGTmhiV1ZUYVhSbGZXQmNibHh1SUNBdkx5QlRaWFFnZEdobElHTnZiMnRwWlZ4dUlDQmtiMk4xYldWdWRDNWpiMjlyYVdVZ1BTQmpiMjlyYVdWVGRISnBibWRjYm4xY2JseHVMeW9xWEc0Z0tpQkhaWFFnWVNCamIyOXJhV1VnZG1Gc2RXVWdZbmtnYm1GdFpWeHVJQ29nUUhCaGNtRnRJRzVoYldVZ0xTQkRiMjlyYVdVZ2JtRnRaVnh1SUNvZ1FISmxkSFZ5Ym5NZ1EyOXZhMmxsSUhaaGJIVmxJRzl5SUc1MWJHd2dhV1lnYm05MElHWnZkVzVrWEc0Z0tpOWNibVY0Y0c5eWRDQmpiMjV6ZENCblpYUkRiMjlyYVdVZ1BTQW9ibUZ0WlRvZ2MzUnlhVzVuS1RvZ2MzUnlhVzVuSUh3Z2JuVnNiQ0E5UGlCN1hHNGdJR052Ym5OMElHTnZiMnRwWlZOMGNtbHVaeUE5SUdSdlkzVnRaVzUwTG1OdmIydHBaVnh1WEc0Z0lDOHZJRVZoY214NUlISmxkSFZ5YmlCcFppQnVieUJqYjI5cmFXVnpJR1Y0YVhOMFhHNGdJR2xtSUNnaFkyOXZhMmxsVTNSeWFXNW5LU0I3WEc0Z0lDQWdjbVYwZFhKdUlHNTFiR3hjYmlBZ2ZWeHVYRzRnSUdOdmJuTjBJR052YjJ0cFpYTWdQU0JqYjI5cmFXVlRkSEpwYm1jdWMzQnNhWFFvSnpzZ0p5bGNibHh1SUNCbWIzSWdLR052Ym5OMElHTnZiMnRwWlNCdlppQmpiMjlyYVdWektTQjdYRzRnSUNBZ1kyOXVjM1FnY0dGeWRITWdQU0JqYjI5cmFXVXVjM0JzYVhRb0p6MG5LVnh1SUNBZ0lDOHZJSEJoY25Seld6QmRJSGRwYkd3Z1lXeDNZWGx6SUdWNGFYTjBJR1YyWlc0Z2FXWWdhWFFuY3lCaGJpQmxiWEIwZVNCemRISnBibWRjYmlBZ0lDQmpiMjV6ZENCamIyOXJhV1ZPWVcxbElEMGdjR0Z5ZEhOYk1GMGdmSHdnSnlkY2JpQWdJQ0JqYjI1emRDQmpiMjlyYVdWV1lXeDFaU0E5SUhCaGNuUnpMbk5zYVdObEtERXBMbXB2YVc0b0p6MG5LU0I4ZkNBbkoxeHVJQ0FnSUdsbUlDaGtaV052WkdWVlVrbERiMjF3YjI1bGJuUW9ZMjl2YTJsbFRtRnRaU2tnUFQwOUlHNWhiV1VwSUh0Y2JpQWdJQ0FnSUhKbGRIVnliaUJrWldOdlpHVlZVa2xEYjIxd2IyNWxiblFvWTI5dmEybGxWbUZzZFdVcFhHNGdJQ0FnZlZ4dUlDQjlYRzVjYmlBZ2NtVjBkWEp1SUc1MWJHeGNibjFjYmx4dUx5b3FYRzRnS2lCRVpXeGxkR1VnWVNCamIyOXJhV1VnWW5rZ2JtRnRaVnh1SUNvZ1FIQmhjbUZ0SUc1aGJXVWdMU0JEYjI5cmFXVWdibUZ0WlZ4dUlDb2dRSEJoY21GdElHOXdkR2x2Ym5NZ0xTQkRiMjlyYVdVZ2IzQjBhVzl1Y3lBb1pHOXRZV2x1SUdGdVpDQndZWFJvSUcxMWMzUWdiV0YwWTJnZ2RHaGxJR052YjJ0cFpTQjBieUJrWld4bGRHVXBYRzRnS2k5Y2JtVjRjRzl5ZENCamIyNXpkQ0JrWld4bGRHVkRiMjlyYVdVZ1BTQW9YRzRnSUc1aGJXVTZJSE4wY21sdVp5eGNiaUFnYjNCMGFXOXVjem9nVUdsamF6eERiMjlyYVdWUGNIUnBiMjV6TENBblpHOXRZV2x1SnlCOElDZHdZWFJvSno0Z1BTQjdmVnh1S1RvZ2RtOXBaQ0E5UGlCN1hHNGdJQzh2SUZObGRDQmxlSEJwY21GMGFXOXVJSFJ2SUhSb1pTQndZWE4wSUhSdklHUmxiR1YwWlNCMGFHVWdZMjl2YTJsbFhHNGdJSE5sZEVOdmIydHBaU2h1WVcxbExDQW5KeXdnZTF4dUlDQWdJR1J2YldGcGJqb2diM0IwYVc5dWN5NWtiMjFoYVc0Z2ZId2dkVzVrWldacGJtVmtMRnh1SUNBZ0lIQmhkR2c2SUc5d2RHbHZibk11Y0dGMGFDQjhmQ0FuTHljc1hHNGdJQ0FnWlhod2FYSmxjem9nVFdGMGFDNW1iRzl2Y2loRVlYUmxMbTV2ZHlncElDOGdNVEF3TUNrZ0xTQTROalF3TUN3Z0x5OGdVMlYwSUhSdklIbGxjM1JsY21SaGVWeHVJQ0FnSUdoMGRIQlBibXg1T2lCbVlXeHpaU3hjYmlBZ0lDQnpaV04xY21VNklHWmhiSE5sTEZ4dUlDQWdJSE5oYldWVGFYUmxPaUFuVEdGNEoxeHVJQ0I5S1Z4dWZWeHVJbDBzSW0xaGNIQnBibWR6SWpvaVFVRlZRU3hOUVVGTkxHMUNRVUZ0UWl4RFFVRkRMRlZCUVRaRE8wRkJRM0pGTEUxQlFVa3NRMEZCUXl4TlFVRlBMRkZCUVU4N1FVRkhia0lzVVVGQlRTeGhRVU5LTEUxQlFVMHNUMEZCVHl4RFFVRkRMRVZCUVVVc1dVRkJXU3hKUVVGSkxFMUJRVTBzVFVGQlRTeERRVUZETEVWQlFVVXNXVUZCV1R0QlFVVTNSQ3hOUVVGSkxFTkJRVU1zVlVGQlZTeFBRVUZQTEUxQlFVMHNSVUZCUlN4VFFVRlRMRlZCUVZVc1IwRkJSenRCUVVOc1JDeFhRVUZQTzBGQlFVRXNSVUZEVkR0QlFVZEJMRlZCUVZFc1MwRkJTeXd5UWtGQk1rSXNTMEZCU3l4M1FrRkJkMEk3UVVGRGNrVXNVMEZCVHp0QlFVTlVPMEZCTUVKUExHRkJRVTBzV1VGQldTeERRVU4yUWl4TlFVTkJMRTlCUTBFc1ZVRkJlVUlzUTBGQlF5eE5RVU5xUWp0QlFVVlVMRkZCUVUwc2FVSkJRVEJETzBGQlFVRXNTVUZET1VNc1VVRkJVU3hQUVVGUExGTkJRVk03UVVGQlFTeEpRVU40UWl4TlFVRk5PMEZCUVVFc1NVRkRUaXhUUVVGVE8wRkJRVUU3UVVGQlFTeEpRVU5VTEZWQlFWVTdRVUZCUVR0QlFVRkJMRWxCUTFZc1VVRkJVU3hQUVVGUExGTkJRVk1zWVVGQllUdEJRVUZCTEVsQlEzSkRMRlZCUVZVN1FVRkJRU3hGUVVOYU8wRkJSMEVzVVVGQlRTeG5Ra0ZCWjBJc1JVRkJSU3hIUVVGSExHZENRVUZuUWl4SFFVRkhMRkZCUVZFN1FVRkhkRVFzVFVGQlNTeGxRVUZsTEVkQlFVY3NiVUpCUVcxQ0xFbEJRVWtzUTBGQlF5eEpRVUZKTEcxQ1FVRnRRaXhMUVVGTExFTkJRVU03UVVGSE0wVXNUVUZCU1N4alFVRmpMRlZCUVZVc1IwRkJSenRCUVVNM1FpeHZRa0ZCWjBJc1lVRkJZU3hKUVVGSk8wRkJRVUVzVFVGREwwSXNZMEZCWXl4VlFVRlZPMEZCUVVFc1NVRkRNVUlzUlVGQlJTeFpRVUZaTEVOQlFVTTdRVUZCUVN4RlFVTnFRanRCUVVWQkxHdENRVUZuUWl4VlFVRlZMR05CUVdNc1NVRkJTVHRCUVVVMVF5eE5RVUZKTEdOQlFXTXNVVUZCVVR0QlFVTjRRaXh2UWtGQlowSXNXVUZCV1N4alFVRmpMRTFCUVUwN1FVRkJRU3hGUVVOc1JEdEJRVVZCTEUxQlFVa3NZMEZCWXl4UlFVRlJPMEZCUTNoQ0xHOUNRVUZuUWp0QlFVRkJMRVZCUTJ4Q08wRkJSMEVzVVVGQlRTeG5Ra0ZCWjBJc2FVSkJRV2xDTEdOQlFXTXNVVUZCVVR0QlFVTTNSQ3hyUWtGQlowSXNZMEZCWXl4aFFVRmhPMEZCUnpORExGZEJRVk1zVTBGQlV6dEJRVU53UWp0QlFVOVBMR0ZCUVUwc1dVRkJXU3hEUVVGRExGTkJRV2RETzBGQlEzaEVMRkZCUVUwc1pVRkJaU3hUUVVGVE8wRkJSemxDTEUxQlFVa3NRMEZCUXl4alFVRmpPMEZCUTJwQ0xGZEJRVTg3UVVGQlFTeEZRVU5VTzBGQlJVRXNVVUZCVFN4VlFVRlZMR0ZCUVdFc1RVRkJUU3hKUVVGSk8wRkJSWFpETEdGQlFWY3NWVUZCVlN4VFFVRlRPMEZCUXpWQ0xGVkJRVTBzVVVGQlVTeFBRVUZQTEUxQlFVMHNSMEZCUnp0QlFVVTVRaXhWUVVGTkxHRkJRV0VzVFVGQlRTeERRVUZETEV0QlFVczdRVUZETDBJc1ZVRkJUU3hqUVVGakxFMUJRVTBzVFVGQlRTeERRVUZETEVWQlFVVXNTMEZCU3l4SFFVRkhMRXRCUVVzN1FVRkRhRVFzVVVGQlNTeHRRa0ZCYlVJc1ZVRkJWU3hOUVVGTkxFMUJRVTA3UVVGRE0wTXNZVUZCVHl4dFFrRkJiVUlzVjBGQlZ6dEJRVUZCTEVsQlEzWkRPMEZCUVVFc1JVRkRSanRCUVVWQkxGTkJRVTg3UVVGRFZEdEJRVTlQTEdGQlFVMHNaVUZCWlN4RFFVTXhRaXhOUVVOQkxGVkJRV3RFTEVOQlFVTXNUVUZETVVNN1FVRkZWQ3haUVVGVkxFMUJRVTBzU1VGQlNUdEJRVUZCTEVsQlEyeENMRkZCUVZFc1VVRkJVU3hWUVVGVk8wRkJRVUVzU1VGRE1VSXNUVUZCVFN4UlFVRlJMRkZCUVZFN1FVRkJRU3hKUVVOMFFpeFRRVUZUTEV0QlFVc3NUVUZCVFN4TFFVRkxMRWxCUVVrc1NVRkJTU3hIUVVGSkxFbEJRVWs3UVVGQlFUdEJRVUZCTEVsQlEzcERMRlZCUVZVN1FVRkJRU3hKUVVOV0xGRkJRVkU3UVVGQlFTeEpRVU5TTEZWQlFWVTdRVUZCUVN4RlFVTmFMRU5CUVVNN1FVRkRTRHNpTENKdVlXMWxjeUk2VzExOQ==",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 9322
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 12,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.661Z",
        "time": 11,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/hooks/use-movie-form.ts",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/components/movie-form/movie-form.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"5a9-z8xvCadsyMIH1BUx15vvnEGmSqU\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "4972"
            }
          ],
          "content": {
            "size": 4972,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsgdXNlQWRkTW92aWUgfSBmcm9tICIvc3JjL2hvb2tzL3VzZS1tb3ZpZXMudHMiOwppbXBvcnQgX192aXRlX19janNJbXBvcnQxX3JlYWN0IGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9yZWFjdC5qcz92PTBiYjY5ZDczIjsgY29uc3QgdXNlU3RhdGUgPSBfX3ZpdGVfX2Nqc0ltcG9ydDFfcmVhY3RbInVzZVN0YXRlIl07CmltcG9ydCB7IENyZWF0ZU1vdmllU2NoZW1hIH0gZnJvbSAiL0Bmcy9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9zaGFyZWQvdHlwZXMvc2NoZW1hLnRzIjsKZXhwb3J0IGZ1bmN0aW9uIHVzZU1vdmllRm9ybSgpIHsKICBjb25zdCBbbW92aWVOYW1lLCBzZXRNb3ZpZU5hbWVdID0gdXNlU3RhdGUoIiIpOwogIGNvbnN0IFttb3ZpZVllYXIsIHNldE1vdmllWWVhcl0gPSB1c2VTdGF0ZSgyMDIzKTsKICBjb25zdCBbbW92aWVSYXRpbmcsIHNldE1vdmllUmF0aW5nXSA9IHVzZVN0YXRlKDApOwogIGNvbnN0IFttb3ZpZURpcmVjdG9yLCBzZXRNb3ZpZURpcmVjdG9yXSA9IHVzZVN0YXRlKCIiKTsKICBjb25zdCBbdmFsaWRhdGlvbkVycm9yLCBzZXRWYWxpZGF0aW9uRXJyb3JdID0gdXNlU3RhdGUobnVsbCk7CiAgY29uc3QgeyBzdGF0dXMsIG11dGF0ZSB9ID0gdXNlQWRkTW92aWUoKTsKICBjb25zdCBtb3ZpZUxvYWRpbmcgPSBzdGF0dXMgPT09ICJwZW5kaW5nIjsKICBjb25zdCBoYW5kbGVBZGRNb3ZpZSA9ICgpID0+IHsKICAgIGNvbnN0IHBheWxvYWQgPSB7CiAgICAgIG5hbWU6IG1vdmllTmFtZSwKICAgICAgeWVhcjogbW92aWVZZWFyLAogICAgICByYXRpbmc6IG1vdmllUmF0aW5nLAogICAgICBkaXJlY3RvcjogbW92aWVEaXJlY3RvcgogICAgfTsKICAgIGNvbnN0IHJlc3VsdCA9IENyZWF0ZU1vdmllU2NoZW1hLnNhZmVQYXJzZShwYXlsb2FkKTsKICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHsKICAgICAgc2V0VmFsaWRhdGlvbkVycm9yKHJlc3VsdC5lcnJvcik7CiAgICAgIHJldHVybjsKICAgIH0KICAgIG11dGF0ZShwYXlsb2FkKTsKICAgIHNldE1vdmllTmFtZSgiIik7CiAgICBzZXRNb3ZpZVllYXIoMjAyMyk7CiAgICBzZXRNb3ZpZVJhdGluZygwKTsKICAgIHNldE1vdmllRGlyZWN0b3IoIiIpOwogICAgc2V0VmFsaWRhdGlvbkVycm9yKG51bGwpOwogIH07CiAgcmV0dXJuIHsKICAgIG1vdmllTmFtZSwKICAgIG1vdmllWWVhciwKICAgIG1vdmllUmF0aW5nLAogICAgc2V0TW92aWVOYW1lLAogICAgc2V0TW92aWVZZWFyLAogICAgc2V0TW92aWVSYXRpbmcsCiAgICBoYW5kbGVBZGRNb3ZpZSwKICAgIG1vdmllTG9hZGluZywKICAgIHZhbGlkYXRpb25FcnJvciwKICAgIC8vIGZvciBab2Qga2V5IGZlYXR1cmUgNDogZXhwb3NlIHRoZSB2YWxpZGF0aW9uIHN0YXRlCiAgICBtb3ZpZURpcmVjdG9yLAogICAgc2V0TW92aWVEaXJlY3RvcgogIH07Cn0KCi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnpiM1Z5WTJWeklqcGJJblZ6WlMxdGIzWnBaUzFtYjNKdExuUnpJbDBzSW5OdmRYSmpaWE5EYjI1MFpXNTBJanBiSW1sdGNHOXlkQ0I3SUhWelpVRmtaRTF2ZG1sbElIMGdabkp2YlNBblFHaHZiMnR6TDNWelpTMXRiM1pwWlhNblhHNXBiWEJ2Y25RZ2V5QjFjMlZUZEdGMFpTQjlJR1p5YjIwZ0ozSmxZV04wSjF4dWFXMXdiM0owSUhzZ1EzSmxZWFJsVFc5MmFXVlRZMmhsYldFZ2ZTQm1jbTl0SUNkQWMyaGhjbVZrTDNSNWNHVnpMM05qYUdWdFlTZGNibWx0Y0c5eWRDQjBlWEJsSUhzZ1dtOWtSWEp5YjNJZ2ZTQm1jbTl0SUNkNmIyUW5YRzVjYm1WNGNHOXlkQ0JtZFc1amRHbHZiaUIxYzJWTmIzWnBaVVp2Y20wb0tTQjdYRzRnSUdOdmJuTjBJRnR0YjNacFpVNWhiV1VzSUhObGRFMXZkbWxsVG1GdFpWMGdQU0IxYzJWVGRHRjBaU2duSnlsY2JpQWdZMjl1YzNRZ1cyMXZkbWxsV1dWaGNpd2djMlYwVFc5MmFXVlpaV0Z5WFNBOUlIVnpaVk4wWVhSbEtESXdNak1wWEc0Z0lHTnZibk4wSUZ0dGIzWnBaVkpoZEdsdVp5d2djMlYwVFc5MmFXVlNZWFJwYm1kZElEMGdkWE5sVTNSaGRHVW9NQ2xjYmlBZ1kyOXVjM1FnVzIxdmRtbGxSR2x5WldOMGIzSXNJSE5sZEUxdmRtbGxSR2x5WldOMGIzSmRJRDBnZFhObFUzUmhkR1VvSnljcFhHNGdJR052Ym5OMElGdDJZV3hwWkdGMGFXOXVSWEp5YjNJc0lITmxkRlpoYkdsa1lYUnBiMjVGY25KdmNsMGdQU0IxYzJWVGRHRjBaVHhhYjJSRmNuSnZjaUI4SUc1MWJHdytLRzUxYkd3cFhHNWNiaUFnWTI5dWMzUWdleUJ6ZEdGMGRYTXNJRzExZEdGMFpTQjlJRDBnZFhObFFXUmtUVzkyYVdVb0tWeHVJQ0JqYjI1emRDQnRiM1pwWlV4dllXUnBibWNnUFNCemRHRjBkWE1nUFQwOUlDZHdaVzVrYVc1bkoxeHVYRzRnSUM4dklGcHZaQ0JMWlhrZ1ptVmhkSFZ5WlNBek9pQnpZV1psVUdGeWMyVmNiaUFnTHk4Z1dtOWtJRzV2ZEdVNklHbG1JSGx2ZFNCb1lYWmxJR0VnWm5KdmJuUmxibVFzSUhsdmRTQmpZVzRnZFhObElIUm9aU0J6WTJobGJXRWdLeUJ6WVdabFVHRnljMlVnZEdobGNtVmNiaUFnTHk4Z2FXNGdiM0prWlhJZ2RHOGdjR1Z5Wm05eWJTQm1iM0p0SUhaaGJHbGtZWFJwYjI0Z1ltVm1iM0psSUhObGJtUnBibWNnZEdobElHUmhkR0VnZEc4Z2RHaGxJSE5sY25abGNseHVJQ0JqYjI1emRDQm9ZVzVrYkdWQlpHUk5iM1pwWlNBOUlDZ3BJRDArSUh0Y2JpQWdJQ0JqYjI1emRDQndZWGxzYjJGa0lEMGdlMXh1SUNBZ0lDQWdibUZ0WlRvZ2JXOTJhV1ZPWVcxbExGeHVJQ0FnSUNBZ2VXVmhjam9nYlc5MmFXVlpaV0Z5TEZ4dUlDQWdJQ0FnY21GMGFXNW5PaUJ0YjNacFpWSmhkR2x1Wnl4Y2JpQWdJQ0FnSUdScGNtVmpkRzl5T2lCdGIzWnBaVVJwY21WamRHOXlYRzRnSUNBZ2ZWeHVJQ0FnSUdOdmJuTjBJSEpsYzNWc2RDQTlJRU55WldGMFpVMXZkbWxsVTJOb1pXMWhMbk5oWm1WUVlYSnpaU2h3WVhsc2IyRmtLVnh1WEc0Z0lDQWdMeThnV205a0lHdGxlU0JtWldGMGRYSmxJRFE2SUhsdmRTQmpZVzRnZFhScGJHbDZaVnh1SUNBZ0lDOHZJR0Z1WkNCbGVIQnZjMlVnZEdobElIWmhiR2xrWVhScGIyNGdjM1JoZEdVZ2RHOGdZbVVnZFhObFpDQmhkQ0JoSUdOdmJYQnZibVZ1ZEZ4dUlDQWdJR2xtSUNnaGNtVnpkV3gwTG5OMVkyTmxjM01wSUh0Y2JpQWdJQ0FnSUhObGRGWmhiR2xrWVhScGIyNUZjbkp2Y2loeVpYTjFiSFF1WlhKeWIzSXBYRzRnSUNBZ0lDQnlaWFIxY201Y2JpQWdJQ0I5WEc1Y2JpQWdJQ0J0ZFhSaGRHVW9jR0Y1Ykc5aFpDbGNiaUFnSUNBdkx5QnlaWE5sZENCbWIzSnRJR0ZtZEdWeUlITjFZMk5sYzNObWRXd2djM1ZpYldsemMybHZibHh1SUNBZ0lITmxkRTF2ZG1sbFRtRnRaU2duSnlsY2JpQWdJQ0J6WlhSTmIzWnBaVmxsWVhJb01qQXlNeWxjYmlBZ0lDQnpaWFJOYjNacFpWSmhkR2x1Wnlnd0tWeHVJQ0FnSUhObGRFMXZkbWxsUkdseVpXTjBiM0lvSnljcFhHNWNiaUFnSUNCelpYUldZV3hwWkdGMGFXOXVSWEp5YjNJb2JuVnNiQ2xjYmlBZ2ZWeHVYRzRnSUhKbGRIVnliaUI3WEc0Z0lDQWdiVzkyYVdWT1lXMWxMRnh1SUNBZ0lHMXZkbWxsV1dWaGNpeGNiaUFnSUNCdGIzWnBaVkpoZEdsdVp5eGNiaUFnSUNCelpYUk5iM1pwWlU1aGJXVXNYRzRnSUNBZ2MyVjBUVzkyYVdWWlpXRnlMRnh1SUNBZ0lITmxkRTF2ZG1sbFVtRjBhVzVuTEZ4dUlDQWdJR2hoYm1Sc1pVRmtaRTF2ZG1sbExGeHVJQ0FnSUcxdmRtbGxURzloWkdsdVp5eGNiaUFnSUNCMllXeHBaR0YwYVc5dVJYSnliM0lzSUM4dklHWnZjaUJhYjJRZ2EyVjVJR1psWVhSMWNtVWdORG9nWlhod2IzTmxJSFJvWlNCMllXeHBaR0YwYVc5dUlITjBZWFJsWEc0Z0lDQWdiVzkyYVdWRWFYSmxZM1J2Y2l4Y2JpQWdJQ0J6WlhSTmIzWnBaVVJwY21WamRHOXlYRzRnSUgxY2JuMWNiaUpkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzVTBGQlV5eHRRa0ZCYlVJN1FVRkROVUlzVTBGQlV5eG5Ra0ZCWjBJN1FVRkRla0lzVTBGQlV5eDVRa0ZCZVVJN1FVRkhNMElzWjBKQlFWTXNaVUZCWlR0QlFVTTNRaXhSUVVGTkxFTkJRVU1zVjBGQlZ5eFpRVUZaTEVsQlFVa3NVMEZCVXl4RlFVRkZPMEZCUXpkRExGRkJRVTBzUTBGQlF5eFhRVUZYTEZsQlFWa3NTVUZCU1N4VFFVRlRMRWxCUVVrN1FVRkRMME1zVVVGQlRTeERRVUZETEdGQlFXRXNZMEZCWXl4SlFVRkpMRk5CUVZNc1EwRkJRenRCUVVOb1JDeFJRVUZOTEVOQlFVTXNaVUZCWlN4blFrRkJaMElzU1VGQlNTeFRRVUZUTEVWQlFVVTdRVUZEY2tRc1VVRkJUU3hEUVVGRExHbENRVUZwUWl4clFrRkJhMElzU1VGQlNTeFRRVUV3UWl4SlFVRkpPMEZCUlRWRkxGRkJRVTBzUlVGQlJTeFJRVUZSTEU5QlFVOHNTVUZCU1N4WlFVRlpPMEZCUTNaRExGRkJRVTBzWlVGQlpTeFhRVUZYTzBGQlMyaERMRkZCUVUwc2FVSkJRV2xDTEUxQlFVMDdRVUZETTBJc1ZVRkJUU3hWUVVGVk8wRkJRVUVzVFVGRFpDeE5RVUZOTzBGQlFVRXNUVUZEVGl4TlFVRk5PMEZCUVVFc1RVRkRUaXhSUVVGUk8wRkJRVUVzVFVGRFVpeFZRVUZWTzBGQlFVRXNTVUZEV2p0QlFVTkJMRlZCUVUwc1UwRkJVeXhyUWtGQmEwSXNWVUZCVlN4UFFVRlBPMEZCU1d4RUxGRkJRVWtzUTBGQlF5eFBRVUZQTEZOQlFWTTdRVUZEYmtJc2VVSkJRVzFDTEU5QlFVOHNTMEZCU3p0QlFVTXZRanRCUVVGQkxFbEJRMFk3UVVGRlFTeFhRVUZQTEU5QlFVODdRVUZGWkN4cFFrRkJZU3hGUVVGRk8wRkJRMllzYVVKQlFXRXNTVUZCU1R0QlFVTnFRaXh0UWtGQlpTeERRVUZETzBGQlEyaENMSEZDUVVGcFFpeEZRVUZGTzBGQlJXNUNMSFZDUVVGdFFpeEpRVUZKTzBGQlFVRXNSVUZEZWtJN1FVRkZRU3hUUVVGUE8wRkJRVUVzU1VGRFREdEJRVUZCTEVsQlEwRTdRVUZCUVN4SlFVTkJPMEZCUVVFc1NVRkRRVHRCUVVGQkxFbEJRMEU3UVVGQlFTeEpRVU5CTzBGQlFVRXNTVUZEUVR0QlFVRkJMRWxCUTBFN1FVRkJRU3hKUVVOQk8wRkJRVUU3UVVGQlFTeEpRVU5CTzBGQlFVRXNTVUZEUVR0QlFVRkJMRVZCUTBZN1FVRkRSanNpTENKdVlXMWxjeUk2VzExOQ==",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 4972
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 11,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.661Z",
        "time": 11,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/components/movie-item/movie-item.tsx",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/components/movie-item/index.ts"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"de3-Q93bWVOj21giMv/ahEkBm3slD48\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "6338"
            }
          ],
          "content": {
            "size": 6338,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsgY3JlYXRlSG90Q29udGV4dCBhcyBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQgfSBmcm9tICIvQHZpdGUvY2xpZW50IjtpbXBvcnQubWV0YS5ob3QgPSBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQoIi9zcmMvY29tcG9uZW50cy9tb3ZpZS1pdGVtL21vdmllLWl0ZW0udHN4Iik7aW1wb3J0IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdF9qc3hEZXZSdW50aW1lIGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9yZWFjdF9qc3gtZGV2LXJ1bnRpbWUuanM/dj0wYmI2OWQ3MyI7IGNvbnN0IGpzeERFViA9IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdF9qc3hEZXZSdW50aW1lWyJqc3hERVYiXTsKaW1wb3J0ICogYXMgUmVmcmVzaFJ1bnRpbWUgZnJvbSAiL0ByZWFjdC1yZWZyZXNoIjsKY29uc3QgaW5XZWJXb3JrZXIgPSB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICJ1bmRlZmluZWQiICYmIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZTsKbGV0IHByZXZSZWZyZXNoUmVnOwpsZXQgcHJldlJlZnJlc2hTaWc7CmlmIChpbXBvcnQubWV0YS5ob3QgJiYgIWluV2ViV29ya2VyKSB7CiAgaWYgKCF3aW5kb3cuJFJlZnJlc2hSZWckKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICJAdml0ZWpzL3BsdWdpbi1yZWFjdCBjYW4ndCBkZXRlY3QgcHJlYW1ibGUuIFNvbWV0aGluZyBpcyB3cm9uZy4iCiAgICApOwogIH0KICBwcmV2UmVmcmVzaFJlZyA9IHdpbmRvdy4kUmVmcmVzaFJlZyQ7CiAgcHJldlJlZnJlc2hTaWcgPSB3aW5kb3cuJFJlZnJlc2hTaWckOwogIHdpbmRvdy4kUmVmcmVzaFJlZyQgPSBSZWZyZXNoUnVudGltZS5nZXRSZWZyZXNoUmVnKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtaXRlbS9tb3ZpZS1pdGVtLnRzeCIpOwogIHdpbmRvdy4kUmVmcmVzaFNpZyQgPSBSZWZyZXNoUnVudGltZS5jcmVhdGVTaWduYXR1cmVGdW5jdGlvbkZvclRyYW5zZm9ybTsKfQppbXBvcnQgeyBMaW5rIH0gZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL3JlYWN0LXJvdXRlci1kb20uanM/dj0wYmI2OWQ3MyI7CmltcG9ydCB7IFNCdXR0b24gfSBmcm9tICIvc3JjL3N0eWxlcy9zdHlsZWQtY29tcG9uZW50cy50cyI7CmltcG9ydCBzdHlsZWQgZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL3N0eWxlZC1jb21wb25lbnRzLmpzP3Y9MGJiNjlkNzMiOwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNb3ZpZUl0ZW0oewogIGlkLAogIG5hbWUsCiAgeWVhciwKICByYXRpbmcsCiAgZGlyZWN0b3IsCiAgb25EZWxldGUKfSkgewogIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4REVWKFNNb3ZpZUl0ZW0sIHsgImRhdGEtdGVzdGlkIjogIm1vdmllLWl0ZW0tY29tcCIsIGNoaWxkcmVuOiBbCiAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKExpbmssIHsgdG86IGAvbW92aWVzLyR7aWR9YCwgImRhdGEtdGVzdGlkIjogYGxpbmstJHtpZH1gLCBjaGlsZHJlbjogWwogICAgICBuYW1lLAogICAgICAiICgiLAogICAgICB5ZWFyLAogICAgICAiKSAiLAogICAgICByYXRpbmcsCiAgICAgICIgIiwKICAgICAgZGlyZWN0b3IKICAgIF0gfSwgdm9pZCAwLCB0cnVlLCB7CiAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWl0ZW0vbW92aWUtaXRlbS50c3giLAogICAgICBsaW5lTnVtYmVyOiAzNywKICAgICAgY29sdW1uTnVtYmVyOiA3CiAgICB9LCB0aGlzKSwKICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoCiAgICAgIFNCdXR0b24sCiAgICAgIHsKICAgICAgICAiZGF0YS10ZXN0aWQiOiBgZGVsZXRlLW1vdmllLSR7bmFtZX1gLAogICAgICAgIG9uQ2xpY2s6ICgpID0+IG9uRGVsZXRlKGlkKSwKICAgICAgICBjaGlsZHJlbjogIkRlbGV0ZSIKICAgICAgfSwKICAgICAgdm9pZCAwLAogICAgICBmYWxzZSwKICAgICAgewogICAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWl0ZW0vbW92aWUtaXRlbS50c3giLAogICAgICAgIGxpbmVOdW1iZXI6IDQwLAogICAgICAgIGNvbHVtbk51bWJlcjogNwogICAgICB9LAogICAgICB0aGlzCiAgICApCiAgXSB9LCB2b2lkIDAsIHRydWUsIHsKICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWl0ZW0vbW92aWUtaXRlbS50c3giLAogICAgbGluZU51bWJlcjogMzYsCiAgICBjb2x1bW5OdW1iZXI6IDUKICB9LCB0aGlzKTsKfQpfYyA9IE1vdmllSXRlbTsKY29uc3QgU01vdmllSXRlbSA9IHN0eWxlZC5saWAKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7CiAgYm9yZGVyLXJhZGl1czogNXB4OwogIHBhZGRpbmc6IDEwcHggMjBweDsKICBtYXJnaW4tYm90dG9tOiAxMHB4OwogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CmA7Cl9jMiA9IFNNb3ZpZUl0ZW07CnZhciBfYywgX2MyOwokUmVmcmVzaFJlZyQoX2MsICJNb3ZpZUl0ZW0iKTsKJFJlZnJlc2hSZWckKF9jMiwgIlNNb3ZpZUl0ZW0iKTsKaWYgKGltcG9ydC5tZXRhLmhvdCAmJiAhaW5XZWJXb3JrZXIpIHsKICB3aW5kb3cuJFJlZnJlc2hSZWckID0gcHJldlJlZnJlc2hSZWc7CiAgd2luZG93LiRSZWZyZXNoU2lnJCA9IHByZXZSZWZyZXNoU2lnOwp9CmlmIChpbXBvcnQubWV0YS5ob3QgJiYgIWluV2ViV29ya2VyKSB7CiAgUmVmcmVzaFJ1bnRpbWUuX19obXJfaW1wb3J0KGltcG9ydC5tZXRhLnVybCkudGhlbigoY3VycmVudEV4cG9ydHMpID0+IHsKICAgIFJlZnJlc2hSdW50aW1lLnJlZ2lzdGVyRXhwb3J0c0ZvclJlYWN0UmVmcmVzaCgiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWl0ZW0vbW92aWUtaXRlbS50c3giLCBjdXJyZW50RXhwb3J0cyk7CiAgICBpbXBvcnQubWV0YS5ob3QuYWNjZXB0KChuZXh0RXhwb3J0cykgPT4gewogICAgICBpZiAoIW5leHRFeHBvcnRzKSByZXR1cm47CiAgICAgIGNvbnN0IGludmFsaWRhdGVNZXNzYWdlID0gUmVmcmVzaFJ1bnRpbWUudmFsaWRhdGVSZWZyZXNoQm91bmRhcnlBbmRFbnF1ZXVlVXBkYXRlKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtaXRlbS9tb3ZpZS1pdGVtLnRzeCIsIGN1cnJlbnRFeHBvcnRzLCBuZXh0RXhwb3J0cyk7CiAgICAgIGlmIChpbnZhbGlkYXRlTWVzc2FnZSkgaW1wb3J0Lm1ldGEuaG90LmludmFsaWRhdGUoaW52YWxpZGF0ZU1lc3NhZ2UpOwogICAgfSk7CiAgfSk7Cn0KCi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnRZWEJ3YVc1bmN5STZJa0ZCYVVKTk96czdPenM3T3pzN096czdPenM3TzBGQmFrSk9MRk5CUVZOQkxGbEJRVms3UVVGRGNrSXNVMEZCVTBNc1pVRkJaVHRCUVVONFFpeFBRVUZQUXl4WlFVRlpPMEZCUzI1Q0xIZENRVUYzUWtNc1ZVRkJWVHRCUVVGQkxFVkJRMmhEUXp0QlFVRkJRU3hGUVVOQlF6dEJRVUZCUVN4RlFVTkJRenRCUVVGQlFTeEZRVU5CUXp0QlFVRkJRU3hGUVVOQlF6dEJRVUZCUVN4RlFVTkJRenRCUVVOakxFZEJRVWM3UVVGRGFrSXNVMEZEUlN4MVFrRkJReXhqUVVGWExHVkJRVmtzYlVKQlEzUkNPMEZCUVVFc01rSkJRVU1zVVVGQlN5eEpRVUZKTEZkQlFWZE1MRVZCUVVVc1NVRkJTU3hsUVVGaExGRkJRVkZCTEVWQlFVVXNTVUZETDBORE8wRkJRVUZCTzBGQlFVRkJMRTFCUVVzN1FVRkJRU3hOUVVGSFF6dEJRVUZCUVN4TlFVRkxPMEZCUVVFc1RVRkJSME03UVVGQlFVRXNUVUZCVHp0QlFVRkJMRTFCUVVWRE8wRkJRVUZCTEZOQlJEVkNPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUVzVjBGRlFUdEJRVUZCTEVsQlEwRTdRVUZCUVN4TlFVRkRPMEZCUVVFN1FVRkJRU3hSUVVORExHVkJRV0VzWjBKQlFXZENTQ3hKUVVGSk8wRkJRVUVzVVVGRGFrTXNVMEZCVXl4TlFVRk5TU3hUUVVGVFRDeEZRVUZGTzBGQlFVRXNVVUZCUlR0QlFVRkJPMEZCUVVFc1RVRkdPVUk3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQkxFbEJTMEU3UVVGQlFTeFBRVlJHTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFc1UwRlZRVHRCUVVWS08wRkJRVU5OTEV0QmNrSjFRbEE3UVVGMVFuaENMRTFCUVUxUkxHRkJRV0ZVTEU5QlFVOVZPMEZCUVVGQk8wRkJRVUZCTzBGQlFVRkJPMEZCUVVGQk8wRkJRVUZCTzBGQlFVRkJPMEZCUVVGQk8wRkJRVUZCTzBGQlFVRkJPMEZCVTNwQ1F5eE5RVlJMUmp0QlFVRlZMRWxCUVVGRUxFbEJRVUZITzBGQlFVRkRMR0ZCUVVGS0xFbEJRVUU3UVVGQlFVa3NZVUZCUVVRc1MwRkJRU0lzSW01aGJXVnpJanBiSWt4cGJtc2lMQ0pUUW5WMGRHOXVJaXdpYzNSNWJHVmtJaXdpVFc5MmFXVkpkR1Z0SWl3aWFXUWlMQ0p1WVcxbElpd2llV1ZoY2lJc0luSmhkR2x1WnlJc0ltUnBjbVZqZEc5eUlpd2liMjVFWld4bGRHVWlMQ0pmWXlJc0lsTk5iM1pwWlVsMFpXMGlMQ0pzYVNJc0lsOWpNaUlzSWlSU1pXWnlaWE5vVW1WbkpDSmRMQ0pwWjI1dmNtVk1hWE4wSWpwYlhTd2ljMjkxY21ObGN5STZXeUp0YjNacFpTMXBkR1Z0TG5SemVDSmRMQ0p6YjNWeVkyVnpRMjl1ZEdWdWRDSTZXeUpwYlhCdmNuUWdleUJNYVc1cklIMGdabkp2YlNBbmNtVmhZM1F0Y205MWRHVnlMV1J2YlNkY2JtbHRjRzl5ZENCN0lGTkNkWFIwYjI0Z2ZTQm1jbTl0SUNkQWMzUjViR1Z6TDNOMGVXeGxaQzFqYjIxd2IyNWxiblJ6SjF4dWFXMXdiM0owSUhOMGVXeGxaQ0JtY205dElDZHpkSGxzWldRdFkyOXRjRzl1Wlc1MGN5ZGNibWx0Y0c5eWRDQjBlWEJsSUhzZ1RXOTJhV1VnZlNCbWNtOXRJQ2RBYzJoaGNtVmtMM1I1Y0dWekwyMXZkbWxsTFhSNWNHVnpKMXh1WEc1MGVYQmxJRTF2ZG1sbFNYUmxiVkJ5YjNCeklEMGdUVzkyYVdVZ0ppQjdJRzl1UkdWc1pYUmxPaUFvYVdRNklHNTFiV0psY2lrZ1BUNGdkbTlwWkNCOVhHNWNibVY0Y0c5eWRDQmtaV1poZFd4MElHWjFibU4wYVc5dUlFMXZkbWxsU1hSbGJTaDdYRzRnSUdsa0xGeHVJQ0J1WVcxbExGeHVJQ0I1WldGeUxGeHVJQ0J5WVhScGJtY3NYRzRnSUdScGNtVmpkRzl5TEZ4dUlDQnZia1JsYkdWMFpWeHVmVG9nVFc5MmFXVkpkR1Z0VUhKdmNITXBJSHRjYmlBZ2NtVjBkWEp1SUNoY2JpQWdJQ0E4VTAxdmRtbGxTWFJsYlNCa1lYUmhMWFJsYzNScFpEMWNJbTF2ZG1sbExXbDBaVzB0WTI5dGNGd2lQbHh1SUNBZ0lDQWdQRXhwYm1zZ2RHODllMkF2Ylc5MmFXVnpMeVI3YVdSOVlIMGdaR0YwWVMxMFpYTjBhV1E5ZTJCc2FXNXJMU1I3YVdSOVlIMCtYRzRnSUNBZ0lDQWdJSHR1WVcxbGZTQW9lM2xsWVhKOUtTQjdjbUYwYVc1bmZTQjdaR2x5WldOMGIzSjlYRzRnSUNBZ0lDQThMMHhwYm1zK1hHNGdJQ0FnSUNBOFUwSjFkSFJ2Ymx4dUlDQWdJQ0FnSUNCa1lYUmhMWFJsYzNScFpEMTdZR1JsYkdWMFpTMXRiM1pwWlMwa2UyNWhiV1Y5WUgxY2JpQWdJQ0FnSUNBZ2IyNURiR2xqYXoxN0tDa2dQVDRnYjI1RVpXeGxkR1VvYVdRcGZWeHVJQ0FnSUNBZ1BseHVJQ0FnSUNBZ0lDQkVaV3hsZEdWY2JpQWdJQ0FnSUR3dlUwSjFkSFJ2Ymo1Y2JpQWdJQ0E4TDFOTmIzWnBaVWwwWlcwK1hHNGdJQ2xjYm4xY2JseHVZMjl1YzNRZ1UwMXZkbWxsU1hSbGJTQTlJSE4wZVd4bFpDNXNhV0JjYmlBZ1ltRmphMmR5YjNWdVpDMWpiMnh2Y2pvZ0kyWm1aanRjYmlBZ1ltOXlaR1Z5T2lBeGNIZ2djMjlzYVdRZ0kyUmtaRHRjYmlBZ1ltOXlaR1Z5TFhKaFpHbDFjem9nTlhCNE8xeHVJQ0J3WVdSa2FXNW5PaUF4TUhCNElESXdjSGc3WEc0Z0lHMWhjbWRwYmkxaWIzUjBiMjA2SURFd2NIZzdYRzRnSUdScGMzQnNZWGs2SUdac1pYZzdYRzRnSUdwMWMzUnBabmt0WTI5dWRHVnVkRG9nYzNCaFkyVXRZbVYwZDJWbGJqdGNiaUFnWVd4cFoyNHRhWFJsYlhNNklHTmxiblJsY2p0Y2JtQmNiaUpkTENKbWFXeGxJam9pTDFWelpYSnpMMjExY21GMExtOTZZMkZ1TDNObGIyNHZjR3hoZVhkeWFXZG9kQzExZEdsc2N5OXpZVzF3YkdVdFlYQndMMlp5YjI1MFpXNWtMM055WXk5amIyMXdiMjVsYm5SekwyMXZkbWxsTFdsMFpXMHZiVzkyYVdVdGFYUmxiUzUwYzNnaWZRPT0=",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 6338
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 11,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.668Z",
        "time": 5,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/hooks/use-movie-detail.ts",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/components/movie-details/movie-details.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"24f-ifm7r0hEKSpw6cHAmkVZUkgEg5w\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "2202"
            }
          ],
          "content": {
            "size": 2202,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsgdXNlTW92aWUgfSBmcm9tICIvc3JjL2hvb2tzL3VzZS1tb3ZpZXMudHMiOwppbXBvcnQgeyB1c2VQYXJhbXMsIHVzZVNlYXJjaFBhcmFtcyB9IGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9yZWFjdC1yb3V0ZXItZG9tLmpzP3Y9MGJiNjlkNzMiOwpleHBvcnQgZnVuY3Rpb24gdXNlTW92aWVEZXRhaWxzKCkgewogIGNvbnN0IHsgaWQgfSA9IHVzZVBhcmFtcygpOwogIGNvbnN0IFtzZWFyY2hQYXJhbXNdID0gdXNlU2VhcmNoUGFyYW1zKCk7CiAgY29uc3QgbW92aWVOYW1lID0gc2VhcmNoUGFyYW1zLmdldCgibmFtZSIpOwogIGNvbnN0IGlkZW50aWZpZXIgPSBtb3ZpZU5hbWUgPz8gKGlkICYmICFpc05hTihOdW1iZXIoaWQpKSA/IHBhcnNlSW50KGlkLCAxMCkgOiBudWxsKTsKICBpZiAoIWlkZW50aWZpZXIpCiAgICByZXR1cm4geyBtb3ZpZTogbnVsbCwgaXNMb2FkaW5nOiBmYWxzZSwgaGFzSWRlbnRpZmllcjogZmFsc2UgfTsKICBjb25zdCB7IGRhdGEsIGlzTG9hZGluZyB9ID0gdXNlTW92aWUoaWRlbnRpZmllcik7CiAgcmV0dXJuIHsgZGF0YSwgaXNMb2FkaW5nLCBoYXNJZGVudGlmaWVyOiB0cnVlIH07Cn0KCi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnpiM1Z5WTJWeklqcGJJblZ6WlMxdGIzWnBaUzFrWlhSaGFXd3VkSE1pWFN3aWMyOTFjbU5sYzBOdmJuUmxiblFpT2xzaWFXMXdiM0owSUhzZ2RYTmxUVzkyYVdVZ2ZTQm1jbTl0SUNkQWFHOXZhM012ZFhObExXMXZkbWxsY3lkY2JtbHRjRzl5ZENCN0lIVnpaVkJoY21GdGN5d2dkWE5sVTJWaGNtTm9VR0Z5WVcxeklIMGdabkp2YlNBbmNtVmhZM1F0Y205MWRHVnlMV1J2YlNkY2JseHVaWGh3YjNKMElHWjFibU4wYVc5dUlIVnpaVTF2ZG1sbFJHVjBZV2xzY3lncElIdGNiaUFnTHk4Z1IyVjBJSFJvWlNCcFpDQm1jbTl0SUhSb1pTQnliM1YwWlNCd1lYSmhiWE1nYjNJZ2NYVmxjbmtnY0dGeVlXMWxkR1Z5YzF4dUlDQXZMeUF1TGk0dmJXOTJhV1Z6TDN0N2JXOTJhV1ZKWkgxOVhHNGdJR052Ym5OMElIc2dhV1FnZlNBOUlIVnpaVkJoY21GdGN6eDdJR2xrT2lCemRISnBibWNnZlQ0b0tWeHVJQ0F2THlBdUxpNHZiVzkyYVdWelAyNWhiV1U5ZTN0dGIzWnBaVTVoYldWOWZWeHVJQ0JqYjI1emRDQmJjMlZoY21Ob1VHRnlZVzF6WFNBOUlIVnpaVk5sWVhKamFGQmhjbUZ0Y3lncFhHNGdJR052Ym5OMElHMXZkbWxsVG1GdFpTQTlJSE5sWVhKamFGQmhjbUZ0Y3k1blpYUW9KMjVoYldVbktWeHVYRzRnSUdOdmJuTjBJR2xrWlc1MGFXWnBaWElnUFZ4dUlDQWdJRzF2ZG1sbFRtRnRaU0EvUHlBb2FXUWdKaVlnSVdselRtRk9LRTUxYldKbGNpaHBaQ2twSUQ4Z2NHRnljMlZKYm5Rb2FXUXNJREV3S1NBNklHNTFiR3dwWEc0Z0lHbG1JQ2doYVdSbGJuUnBabWxsY2lsY2JpQWdJQ0J5WlhSMWNtNGdleUJ0YjNacFpUb2diblZzYkN3Z2FYTk1iMkZrYVc1bk9pQm1ZV3h6WlN3Z2FHRnpTV1JsYm5ScFptbGxjam9nWm1Gc2MyVWdmVnh1WEc0Z0lHTnZibk4wSUhzZ1pHRjBZU3dnYVhOTWIyRmthVzVuSUgwZ1BTQjFjMlZOYjNacFpTaHBaR1Z1ZEdsbWFXVnlLVnh1WEc0Z0lISmxkSFZ5YmlCN0lHUmhkR0VzSUdselRHOWhaR2x1Wnl3Z2FHRnpTV1JsYm5ScFptbGxjam9nZEhKMVpTQjlYRzU5WEc0aVhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQkxGTkJRVk1zWjBKQlFXZENPMEZCUTNwQ0xGTkJRVk1zVjBGQlZ5eDFRa0ZCZFVJN1FVRkZjRU1zWjBKQlFWTXNhMEpCUVd0Q08wRkJSMmhETEZGQlFVMHNSVUZCUlN4SFFVRkhMRWxCUVVrc1ZVRkJNRUk3UVVGRmVrTXNVVUZCVFN4RFFVRkRMRmxCUVZrc1NVRkJTU3huUWtGQlowSTdRVUZEZGtNc1VVRkJUU3haUVVGWkxHRkJRV0VzU1VGQlNTeE5RVUZOTzBGQlJYcERMRkZCUVUwc1lVRkRTaXhqUVVGakxFMUJRVTBzUTBGQlF5eE5RVUZOTEU5QlFVOHNSVUZCUlN4RFFVRkRMRWxCUVVrc1UwRkJVeXhKUVVGSkxFVkJRVVVzU1VGQlNUdEJRVU01UkN4TlFVRkpMRU5CUVVNN1FVRkRTQ3hYUVVGUExFVkJRVVVzVDBGQlR5eE5RVUZOTEZkQlFWY3NUMEZCVHl4bFFVRmxMRTFCUVUwN1FVRkZMMFFzVVVGQlRTeEZRVUZGTEUxQlFVMHNWVUZCVlN4SlFVRkpMRk5CUVZNc1ZVRkJWVHRCUVVVdlF5eFRRVUZQTEVWQlFVVXNUVUZCVFN4WFFVRlhMR1ZCUVdVc1MwRkJTenRCUVVOb1JEc2lMQ0p1WVcxbGN5STZXMTE5",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 2202
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 5,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.667Z",
        "time": 7,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/components/movie-details/movie-manager.tsx",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/components/movie-details/movie-details.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"11f4-471HEQ/YSnRvhPztbwtI/OaLFNE\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "7987"
            }
          ],
          "content": {
            "size": 7987,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsgY3JlYXRlSG90Q29udGV4dCBhcyBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQgfSBmcm9tICIvQHZpdGUvY2xpZW50IjtpbXBvcnQubWV0YS5ob3QgPSBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQoIi9zcmMvY29tcG9uZW50cy9tb3ZpZS1kZXRhaWxzL21vdmllLW1hbmFnZXIudHN4Iik7aW1wb3J0IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdF9qc3hEZXZSdW50aW1lIGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9yZWFjdF9qc3gtZGV2LXJ1bnRpbWUuanM/dj0wYmI2OWQ3MyI7IGNvbnN0IEZyYWdtZW50ID0gX192aXRlX19janNJbXBvcnQwX3JlYWN0X2pzeERldlJ1bnRpbWVbIkZyYWdtZW50Il07IGNvbnN0IGpzeERFViA9IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdF9qc3hEZXZSdW50aW1lWyJqc3hERVYiXTsKaW1wb3J0ICogYXMgUmVmcmVzaFJ1bnRpbWUgZnJvbSAiL0ByZWFjdC1yZWZyZXNoIjsKY29uc3QgaW5XZWJXb3JrZXIgPSB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICJ1bmRlZmluZWQiICYmIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZTsKbGV0IHByZXZSZWZyZXNoUmVnOwpsZXQgcHJldlJlZnJlc2hTaWc7CmlmIChpbXBvcnQubWV0YS5ob3QgJiYgIWluV2ViV29ya2VyKSB7CiAgaWYgKCF3aW5kb3cuJFJlZnJlc2hSZWckKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICJAdml0ZWpzL3BsdWdpbi1yZWFjdCBjYW4ndCBkZXRlY3QgcHJlYW1ibGUuIFNvbWV0aGluZyBpcyB3cm9uZy4iCiAgICApOwogIH0KICBwcmV2UmVmcmVzaFJlZyA9IHdpbmRvdy4kUmVmcmVzaFJlZyQ7CiAgcHJldlJlZnJlc2hTaWcgPSB3aW5kb3cuJFJlZnJlc2hTaWckOwogIHdpbmRvdy4kUmVmcmVzaFJlZyQgPSBSZWZyZXNoUnVudGltZS5nZXRSZWZyZXNoUmVnKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtZGV0YWlscy9tb3ZpZS1tYW5hZ2VyLnRzeCIpOwogIHdpbmRvdy4kUmVmcmVzaFNpZyQgPSBSZWZyZXNoUnVudGltZS5jcmVhdGVTaWduYXR1cmVGdW5jdGlvbkZvclRyYW5zZm9ybTsKfQp2YXIgX3MgPSAkUmVmcmVzaFNpZyQoKTsKaW1wb3J0IHN0eWxlZCBmcm9tICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvc3R5bGVkLWNvbXBvbmVudHMuanM/dj0wYmI2OWQ3MyI7CmltcG9ydCBfX3ZpdGVfX2Nqc0ltcG9ydDRfcmVhY3QgZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL3JlYWN0LmpzP3Y9MGJiNjlkNzMiOyBjb25zdCB1c2VTdGF0ZSA9IF9fdml0ZV9fY2pzSW1wb3J0NF9yZWFjdFsidXNlU3RhdGUiXTsKaW1wb3J0IE1vdmllRWRpdEZvcm0gZnJvbSAiL3NyYy9jb21wb25lbnRzL21vdmllLWRldGFpbHMvbW92aWUtZWRpdC1mb3JtLnRzeCI7CmltcG9ydCB7IFNCdXR0b24gfSBmcm9tICIvc3JjL3N0eWxlcy9zdHlsZWQtY29tcG9uZW50cy50cyI7CmltcG9ydCB7IE1vdmllSW5mbyB9IGZyb20gIi9zcmMvY29tcG9uZW50cy9tb3ZpZS1pdGVtL2luZGV4LnRzIjsKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTW92aWVNYW5hZ2VyKHsgbW92aWUsIG9uRGVsZXRlIH0pIHsKICBfcygpOwogIGNvbnN0IFtpc0VkaXRpbmcsIHNldElzRWRpdGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7CiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoU01vdmllTWFuYWdlciwgeyBjaGlsZHJlbjogaXNFZGl0aW5nID8gLyogQF9fUFVSRV9fICovIGpzeERFVihNb3ZpZUVkaXRGb3JtLCB7IG1vdmllLCBvbkNhbmNlbDogKCkgPT4gc2V0SXNFZGl0aW5nKGZhbHNlKSB9LCB2b2lkIDAsIGZhbHNlLCB7CiAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9tb3ZpZS1kZXRhaWxzL21vdmllLW1hbmFnZXIudHN4IiwKICAgIGxpbmVOdW1iZXI6IDM4LAogICAgY29sdW1uTnVtYmVyOiA3CiAgfSwgdGhpcykgOiAvKiBAX19QVVJFX18gKi8ganN4REVWKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbCiAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKE1vdmllSW5mbywgeyBtb3ZpZSB9LCB2b2lkIDAsIGZhbHNlLCB7CiAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWRldGFpbHMvbW92aWUtbWFuYWdlci50c3giLAogICAgICBsaW5lTnVtYmVyOiA0MSwKICAgICAgY29sdW1uTnVtYmVyOiAxMQogICAgfSwgdGhpcyksCiAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKFNCdXR0b24sIHsgImRhdGEtdGVzdGlkIjogImVkaXQtbW92aWUiLCBvbkNsaWNrOiAoKSA9PiBzZXRJc0VkaXRpbmcodHJ1ZSksIGNoaWxkcmVuOiAiRWRpdCIgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9tb3ZpZS1kZXRhaWxzL21vdmllLW1hbmFnZXIudHN4IiwKICAgICAgbGluZU51bWJlcjogNDIsCiAgICAgIGNvbHVtbk51bWJlcjogMTEKICAgIH0sIHRoaXMpLAogICAgLyogQF9fUFVSRV9fICovIGpzeERFVigKICAgICAgU0J1dHRvbiwKICAgICAgewogICAgICAgICJkYXRhLXRlc3RpZCI6ICJkZWxldGUtbW92aWUiLAogICAgICAgIG9uQ2xpY2s6ICgpID0+IG9uRGVsZXRlKG1vdmllLmlkKSwKICAgICAgICBjaGlsZHJlbjogIkRlbGV0ZSIKICAgICAgfSwKICAgICAgdm9pZCAwLAogICAgICBmYWxzZSwKICAgICAgewogICAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWRldGFpbHMvbW92aWUtbWFuYWdlci50c3giLAogICAgICAgIGxpbmVOdW1iZXI6IDQ1LAogICAgICAgIGNvbHVtbk51bWJlcjogMTEKICAgICAgfSwKICAgICAgdGhpcwogICAgKQogIF0gfSwgdm9pZCAwLCB0cnVlLCB7CiAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9tb3ZpZS1kZXRhaWxzL21vdmllLW1hbmFnZXIudHN4IiwKICAgIGxpbmVOdW1iZXI6IDQwLAogICAgY29sdW1uTnVtYmVyOiA3CiAgfSwgdGhpcykgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtZGV0YWlscy9tb3ZpZS1tYW5hZ2VyLnRzeCIsCiAgICBsaW5lTnVtYmVyOiAzNiwKICAgIGNvbHVtbk51bWJlcjogNQogIH0sIHRoaXMpOwp9Cl9zKE1vdmllTWFuYWdlciwgIk40cVVWcGFlbi9yUk9MOGpQdS80aHVGRDhsQT0iKTsKX2MgPSBNb3ZpZU1hbmFnZXI7CmNvbnN0IFNNb3ZpZU1hbmFnZXIgPSBzdHlsZWQuZGl2YAogIGgyIHsKICAgIG1hcmdpbi10b3A6IDIwcHg7CiAgICBjb2xvcjogIzMzMzsKICAgIGZvbnQtc2l6ZTogMjRweDsKICB9CiAgcCB7CiAgICBmb250LXNpemU6IDE4cHg7CiAgICBjb2xvcjogIzU1NTsKICB9CmA7Cl9jMiA9IFNNb3ZpZU1hbmFnZXI7CnZhciBfYywgX2MyOwokUmVmcmVzaFJlZyQoX2MsICJNb3ZpZU1hbmFnZXIiKTsKJFJlZnJlc2hSZWckKF9jMiwgIlNNb3ZpZU1hbmFnZXIiKTsKaWYgKGltcG9ydC5tZXRhLmhvdCAmJiAhaW5XZWJXb3JrZXIpIHsKICB3aW5kb3cuJFJlZnJlc2hSZWckID0gcHJldlJlZnJlc2hSZWc7CiAgd2luZG93LiRSZWZyZXNoU2lnJCA9IHByZXZSZWZyZXNoU2lnOwp9CmlmIChpbXBvcnQubWV0YS5ob3QgJiYgIWluV2ViV29ya2VyKSB7CiAgUmVmcmVzaFJ1bnRpbWUuX19obXJfaW1wb3J0KGltcG9ydC5tZXRhLnVybCkudGhlbigoY3VycmVudEV4cG9ydHMpID0+IHsKICAgIFJlZnJlc2hSdW50aW1lLnJlZ2lzdGVyRXhwb3J0c0ZvclJlYWN0UmVmcmVzaCgiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWRldGFpbHMvbW92aWUtbWFuYWdlci50c3giLCBjdXJyZW50RXhwb3J0cyk7CiAgICBpbXBvcnQubWV0YS5ob3QuYWNjZXB0KChuZXh0RXhwb3J0cykgPT4gewogICAgICBpZiAoIW5leHRFeHBvcnRzKSByZXR1cm47CiAgICAgIGNvbnN0IGludmFsaWRhdGVNZXNzYWdlID0gUmVmcmVzaFJ1bnRpbWUudmFsaWRhdGVSZWZyZXNoQm91bmRhcnlBbmRFbnF1ZXVlVXBkYXRlKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtZGV0YWlscy9tb3ZpZS1tYW5hZ2VyLnRzeCIsIGN1cnJlbnRFeHBvcnRzLCBuZXh0RXhwb3J0cyk7CiAgICAgIGlmIChpbnZhbGlkYXRlTWVzc2FnZSkgaW1wb3J0Lm1ldGEuaG90LmludmFsaWRhdGUoaW52YWxpZGF0ZU1lc3NhZ2UpOwogICAgfSk7CiAgfSk7Cn0KCi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnRZWEJ3YVc1bmN5STZJa0ZCYTBKUkxGTkJSVUVzVlVGR1FUczdPenM3T3pzN096czdPenM3T3pzN1FVRnNRbElzVDBGQlQwRXNXVUZCV1R0QlFVTnVRaXhUUVVGVFF5eG5Ra0ZCWjBJN1FVRkRla0lzVDBGQlQwTXNiVUpCUVcxQ08wRkJRekZDTEZOQlFWTkRMR1ZCUVdVN1FVRkRlRUlzVTBGQlUwTXNhVUpCUVdsQ08wRkJVVEZDTEhkQ1FVRjNRa01zWVVGQllTeEZRVUZGUXl4UFFVRlBReXhUUVVFMFFpeEhRVUZITzBGQlFVRkRMRXRCUVVFN1FVRkRNMFVzVVVGQlRTeERRVUZEUXl4WFFVRlhReXhaUVVGWkxFbEJRVWxVTEZOQlFWTXNTMEZCU3p0QlFVVm9SQ3hUUVVORkxIVkNRVUZETEdsQ1FVTkZVU3h6UWtGRFF5eDFRa0ZCUXl4cFFrRkJZeXhQUVVGakxGVkJRVlVzVFVGQlRVTXNZVUZCWVN4TFFVRkxMRXRCUVM5RU8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRXNVMEZCYVVVc1NVRkZha1VzYlVOQlEwVTdRVUZCUVN3eVFrRkJReXhoUVVGVkxGTkJRVmc3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVN4WFFVRjNRanRCUVVGQkxFbEJRM2hDTEhWQ1FVRkRMRmRCUVZFc1pVRkJXU3hqUVVGaExGTkJRVk1zVFVGQlRVRXNZVUZCWVN4SlFVRkpMRWRCUVVVc2IwSkJRWEJGTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFc1YwRkZRVHRCUVVGQkxFbEJRMEU3UVVGQlFTeE5RVUZETzBGQlFVRTdRVUZCUVN4UlFVTkRMR1ZCUVZrN1FVRkJRU3hSUVVOYUxGTkJRVk1zVFVGQlRVZ3NVMEZCVTBRc1RVRkJUVXNzUlVGQlJUdEJRVUZCTEZGQlFVVTdRVUZCUVR0QlFVRkJMRTFCUm5CRE8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRU3hKUVV0Qk8wRkJRVUVzVDBGV1JqdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJMRk5CVjBFc1MwRm1TanRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTEZOQmFVSkJPMEZCUlVvN1FVRkJRMGdzUjBGMlFuVkNTQ3hqUVVGWk8wRkJRVUZQTEV0QlFWcFFPMEZCZVVKNFFpeE5RVUZOVVN4blFrRkJaMEppTEU5QlFVOWpPMEZCUVVGQk8wRkJRVUZCTzBGQlFVRkJPMEZCUVVGQk8wRkJRVUZCTzBGQlFVRkJPMEZCUVVGQk8wRkJRVUZCTzBGQlFVRkJPMEZCUVVGQk8wRkJWVFZDUXl4TlFWWkxSanRCUVVGaExFbEJRVUZFTEVsQlFVRkhPMEZCUVVGRExHRkJRVUZLTEVsQlFVRTdRVUZCUVVrc1lVRkJRVVFzUzBGQlFTSXNJbTVoYldWeklqcGJJbk4wZVd4bFpDSXNJblZ6WlZOMFlYUmxJaXdpVFc5MmFXVkZaR2wwUm05eWJTSXNJbE5DZFhSMGIyNGlMQ0pOYjNacFpVbHVabThpTENKTmIzWnBaVTFoYm1GblpYSWlMQ0p0YjNacFpTSXNJbTl1UkdWc1pYUmxJaXdpWDNNaUxDSnBjMFZrYVhScGJtY2lMQ0p6WlhSSmMwVmthWFJwYm1jaUxDSnBaQ0lzSWw5aklpd2lVMDF2ZG1sbFRXRnVZV2RsY2lJc0ltUnBkaUlzSWw5ak1pSXNJaVJTWldaeVpYTm9VbVZuSkNKZExDSnBaMjV2Y21WTWFYTjBJanBiWFN3aWMyOTFjbU5sY3lJNld5SnRiM1pwWlMxdFlXNWhaMlZ5TG5SemVDSmRMQ0p6YjNWeVkyVnpRMjl1ZEdWdWRDSTZXeUpwYlhCdmNuUWdjM1I1YkdWa0lHWnliMjBnSjNOMGVXeGxaQzFqYjIxd2IyNWxiblJ6SjF4dWFXMXdiM0owSUhzZ2RYTmxVM1JoZEdVZ2ZTQm1jbTl0SUNkeVpXRmpkQ2RjYm1sdGNHOXlkQ0JOYjNacFpVVmthWFJHYjNKdElHWnliMjBnSnk0dmJXOTJhV1V0WldScGRDMW1iM0p0SjF4dWFXMXdiM0owSUhzZ1UwSjFkSFJ2YmlCOUlHWnliMjBnSjBCemRIbHNaWE12YzNSNWJHVmtMV052YlhCdmJtVnVkSE1uWEc1cGJYQnZjblFnZXlCTmIzWnBaVWx1Wm04Z2ZTQm1jbTl0SUNkQVkyOXRjRzl1Wlc1MGN5OXRiM1pwWlMxcGRHVnRKMXh1YVcxd2IzSjBJSFI1Y0dVZ2V5Qk5iM1pwWlNCOUlHWnliMjBnSjBCemFHRnlaV1F2ZEhsd1pYTXZiVzkyYVdVdGRIbHdaWE1uWEc1Y2JtVjRjRzl5ZENCMGVYQmxJRTF2ZG1sbFRXRnVZV2RsY2xCeWIzQnpJRDBnZTF4dUlDQnlaV0ZrYjI1c2VTQnRiM1pwWlRvZ1RXOTJhV1ZjYmlBZ2NtVmhaRzl1YkhrZ2IyNUVaV3hsZEdVNklDaHBaRG9nYm5WdFltVnlLU0E5UGlCMmIybGtYRzU5WEc1Y2JtVjRjRzl5ZENCa1pXWmhkV3gwSUdaMWJtTjBhVzl1SUUxdmRtbGxUV0Z1WVdkbGNpaDdJRzF2ZG1sbExDQnZia1JsYkdWMFpTQjlPaUJOYjNacFpVMWhibUZuWlhKUWNtOXdjeWtnZTF4dUlDQmpiMjV6ZENCYmFYTkZaR2wwYVc1bkxDQnpaWFJKYzBWa2FYUnBibWRkSUQwZ2RYTmxVM1JoZEdVb1ptRnNjMlVwWEc1Y2JpQWdjbVYwZFhKdUlDaGNiaUFnSUNBOFUwMXZkbWxsVFdGdVlXZGxjajVjYmlBZ0lDQWdJSHRwYzBWa2FYUnBibWNnUHlBb1hHNGdJQ0FnSUNBZ0lEeE5iM1pwWlVWa2FYUkdiM0p0SUcxdmRtbGxQWHR0YjNacFpYMGdiMjVEWVc1alpXdzlleWdwSUQwK0lITmxkRWx6UldScGRHbHVaeWhtWVd4elpTbDlJQzgrWEc0Z0lDQWdJQ0FwSURvZ0tGeHVJQ0FnSUNBZ0lDQThQbHh1SUNBZ0lDQWdJQ0FnSUR4TmIzWnBaVWx1Wm04Z2JXOTJhV1U5ZTIxdmRtbGxmU0F2UGx4dUlDQWdJQ0FnSUNBZ0lEeFRRblYwZEc5dUlHUmhkR0V0ZEdWemRHbGtQVndpWldScGRDMXRiM1pwWlZ3aUlHOXVRMnhwWTJzOWV5Z3BJRDArSUhObGRFbHpSV1JwZEdsdVp5aDBjblZsS1gwK1hHNGdJQ0FnSUNBZ0lDQWdJQ0JGWkdsMFhHNGdJQ0FnSUNBZ0lDQWdQQzlUUW5WMGRHOXVQbHh1SUNBZ0lDQWdJQ0FnSUR4VFFuVjBkRzl1WEc0Z0lDQWdJQ0FnSUNBZ0lDQmtZWFJoTFhSbGMzUnBaRDFjSW1SbGJHVjBaUzF0YjNacFpWd2lYRzRnSUNBZ0lDQWdJQ0FnSUNCdmJrTnNhV05yUFhzb0tTQTlQaUJ2YmtSbGJHVjBaU2h0YjNacFpTNXBaQ2w5WEc0Z0lDQWdJQ0FnSUNBZ1BseHVJQ0FnSUNBZ0lDQWdJQ0FnUkdWc1pYUmxYRzRnSUNBZ0lDQWdJQ0FnUEM5VFFuVjBkRzl1UGx4dUlDQWdJQ0FnSUNBOEx6NWNiaUFnSUNBZ0lDbDlYRzRnSUNBZ1BDOVRUVzkyYVdWTllXNWhaMlZ5UGx4dUlDQXBYRzU5WEc1Y2JtTnZibk4wSUZOTmIzWnBaVTFoYm1GblpYSWdQU0J6ZEhsc1pXUXVaR2wyWUZ4dUlDQm9NaUI3WEc0Z0lDQWdiV0Z5WjJsdUxYUnZjRG9nTWpCd2VEdGNiaUFnSUNCamIyeHZjam9nSXpNek16dGNiaUFnSUNCbWIyNTBMWE5wZW1VNklESTBjSGc3WEc0Z0lIMWNiaUFnY0NCN1hHNGdJQ0FnWm05dWRDMXphWHBsT2lBeE9IQjRPMXh1SUNBZ0lHTnZiRzl5T2lBak5UVTFPMXh1SUNCOVhHNWdYRzRpWFN3aVptbHNaU0k2SWk5VmMyVnljeTl0ZFhKaGRDNXZlbU5oYmk5elpXOXVMM0JzWVhsM2NtbG5hSFF0ZFhScGJITXZjMkZ0Y0d4bExXRndjQzltY205dWRHVnVaQzl6Y21NdlkyOXRjRzl1Wlc1MGN5OXRiM1pwWlMxa1pYUmhhV3h6TDIxdmRtbGxMVzFoYm1GblpYSXVkSE40SW4wPQ==",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 7987
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 7,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.665Z",
        "time": 9,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/components/movie-item/movie-info.tsx",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/components/movie-item/index.ts"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"cef-YPfAOzyNe9IKrSgTte0ZBx6FRag\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "4874"
            }
          ],
          "content": {
            "size": 4874,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsgY3JlYXRlSG90Q29udGV4dCBhcyBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQgfSBmcm9tICIvQHZpdGUvY2xpZW50IjtpbXBvcnQubWV0YS5ob3QgPSBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQoIi9zcmMvY29tcG9uZW50cy9tb3ZpZS1pdGVtL21vdmllLWluZm8udHN4Iik7aW1wb3J0IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdF9qc3hEZXZSdW50aW1lIGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9yZWFjdF9qc3gtZGV2LXJ1bnRpbWUuanM/dj0wYmI2OWQ3MyI7IGNvbnN0IGpzeERFViA9IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdF9qc3hEZXZSdW50aW1lWyJqc3hERVYiXTsKaW1wb3J0ICogYXMgUmVmcmVzaFJ1bnRpbWUgZnJvbSAiL0ByZWFjdC1yZWZyZXNoIjsKY29uc3QgaW5XZWJXb3JrZXIgPSB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICJ1bmRlZmluZWQiICYmIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZTsKbGV0IHByZXZSZWZyZXNoUmVnOwpsZXQgcHJldlJlZnJlc2hTaWc7CmlmIChpbXBvcnQubWV0YS5ob3QgJiYgIWluV2ViV29ya2VyKSB7CiAgaWYgKCF3aW5kb3cuJFJlZnJlc2hSZWckKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICJAdml0ZWpzL3BsdWdpbi1yZWFjdCBjYW4ndCBkZXRlY3QgcHJlYW1ibGUuIFNvbWV0aGluZyBpcyB3cm9uZy4iCiAgICApOwogIH0KICBwcmV2UmVmcmVzaFJlZyA9IHdpbmRvdy4kUmVmcmVzaFJlZyQ7CiAgcHJldlJlZnJlc2hTaWcgPSB3aW5kb3cuJFJlZnJlc2hTaWckOwogIHdpbmRvdy4kUmVmcmVzaFJlZyQgPSBSZWZyZXNoUnVudGltZS5nZXRSZWZyZXNoUmVnKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtaXRlbS9tb3ZpZS1pbmZvLnRzeCIpOwogIHdpbmRvdy4kUmVmcmVzaFNpZyQgPSBSZWZyZXNoUnVudGltZS5jcmVhdGVTaWduYXR1cmVGdW5jdGlvbkZvclRyYW5zZm9ybTsKfQpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNb3ZpZUluZm8oeyBtb3ZpZSB9KSB7CiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoImRpdiIsIHsgImRhdGEtdGVzdGlkIjogIm1vdmllLWluZm8tY29tcCIsIGNoaWxkcmVuOiBbCiAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKCJoMiIsIHsgY2hpbGRyZW46IG1vdmllLm5hbWUgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9tb3ZpZS1pdGVtL21vdmllLWluZm8udHN4IiwKICAgICAgbGluZU51bWJlcjogMjksCiAgICAgIGNvbHVtbk51bWJlcjogNwogICAgfSwgdGhpcyksCiAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKCJwIiwgeyBjaGlsZHJlbjogWwogICAgICAiSUQ6ICIsCiAgICAgIG1vdmllLmlkCiAgICBdIH0sIHZvaWQgMCwgdHJ1ZSwgewogICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9tb3ZpZS1pdGVtL21vdmllLWluZm8udHN4IiwKICAgICAgbGluZU51bWJlcjogMzAsCiAgICAgIGNvbHVtbk51bWJlcjogNwogICAgfSwgdGhpcyksCiAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKCJwIiwgeyBjaGlsZHJlbjogWwogICAgICAiWWVhcjogIiwKICAgICAgbW92aWUueWVhcgogICAgXSB9LCB2b2lkIDAsIHRydWUsIHsKICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtaXRlbS9tb3ZpZS1pbmZvLnRzeCIsCiAgICAgIGxpbmVOdW1iZXI6IDMxLAogICAgICBjb2x1bW5OdW1iZXI6IDcKICAgIH0sIHRoaXMpLAogICAgLyogQF9fUFVSRV9fICovIGpzeERFVigicCIsIHsgY2hpbGRyZW46IFsKICAgICAgIlJhdGluZzogIiwKICAgICAgbW92aWUucmF0aW5nCiAgICBdIH0sIHZvaWQgMCwgdHJ1ZSwgewogICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9tb3ZpZS1pdGVtL21vdmllLWluZm8udHN4IiwKICAgICAgbGluZU51bWJlcjogMzIsCiAgICAgIGNvbHVtbk51bWJlcjogNwogICAgfSwgdGhpcykKICBdIH0sIHZvaWQgMCwgdHJ1ZSwgewogICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtaXRlbS9tb3ZpZS1pbmZvLnRzeCIsCiAgICBsaW5lTnVtYmVyOiAyOCwKICAgIGNvbHVtbk51bWJlcjogNQogIH0sIHRoaXMpOwp9Cl9jID0gTW92aWVJbmZvOwp2YXIgX2M7CiRSZWZyZXNoUmVnJChfYywgIk1vdmllSW5mbyIpOwppZiAoaW1wb3J0Lm1ldGEuaG90ICYmICFpbldlYldvcmtlcikgewogIHdpbmRvdy4kUmVmcmVzaFJlZyQgPSBwcmV2UmVmcmVzaFJlZzsKICB3aW5kb3cuJFJlZnJlc2hTaWckID0gcHJldlJlZnJlc2hTaWc7Cn0KaWYgKGltcG9ydC5tZXRhLmhvdCAmJiAhaW5XZWJXb3JrZXIpIHsKICBSZWZyZXNoUnVudGltZS5fX2htcl9pbXBvcnQoaW1wb3J0Lm1ldGEudXJsKS50aGVuKChjdXJyZW50RXhwb3J0cykgPT4gewogICAgUmVmcmVzaFJ1bnRpbWUucmVnaXN0ZXJFeHBvcnRzRm9yUmVhY3RSZWZyZXNoKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtaXRlbS9tb3ZpZS1pbmZvLnRzeCIsIGN1cnJlbnRFeHBvcnRzKTsKICAgIGltcG9ydC5tZXRhLmhvdC5hY2NlcHQoKG5leHRFeHBvcnRzKSA9PiB7CiAgICAgIGlmICghbmV4dEV4cG9ydHMpIHJldHVybjsKICAgICAgY29uc3QgaW52YWxpZGF0ZU1lc3NhZ2UgPSBSZWZyZXNoUnVudGltZS52YWxpZGF0ZVJlZnJlc2hCb3VuZGFyeUFuZEVucXVldWVVcGRhdGUoIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9tb3ZpZS1pdGVtL21vdmllLWluZm8udHN4IiwgY3VycmVudEV4cG9ydHMsIG5leHRFeHBvcnRzKTsKICAgICAgaWYgKGludmFsaWRhdGVNZXNzYWdlKSBpbXBvcnQubWV0YS5ob3QuaW52YWxpZGF0ZShpbnZhbGlkYXRlTWVzc2FnZSk7CiAgICB9KTsKICB9KTsKfQoKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKdFlYQndhVzVuY3lJNklrRkJVMDA3T3pzN096czdPenM3T3pzN096czdRVUZJVGl4M1FrRkJkMEpCTEZWQlFWVXNSVUZCUlVNc1RVRkJjMElzUjBGQlJ6dEJRVU16UkN4VFFVTkZMSFZDUVVGRExGTkJRVWtzWlVGQldTeHRRa0ZEWmp0QlFVRkJMREpDUVVGRExGRkJRVWxCTEdkQ1FVRk5ReXhSUVVGWU8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRXNWMEZCWjBJN1FVRkJRU3hKUVVOb1FpeDFRa0ZCUXl4UFFVRkZPMEZCUVVFN1FVRkJRU3hOUVVGTFJDeE5RVUZOUlR0QlFVRkJRU3hUUVVGa08wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRXNWMEZCYVVJN1FVRkJRU3hKUVVOcVFpeDFRa0ZCUXl4UFFVRkZPMEZCUVVFN1FVRkJRU3hOUVVGUFJpeE5RVUZOUnp0QlFVRkJRU3hUUVVGb1FqdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJMRmRCUVhGQ08wRkJRVUVzU1VGRGNrSXNkVUpCUVVNc1QwRkJSVHRCUVVGQk8wRkJRVUVzVFVGQlUwZ3NUVUZCVFVrN1FVRkJRVUVzVTBGQmJFSTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRU3hYUVVGNVFqdEJRVUZCTEU5QlNqTkNPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUVzVTBGTFFUdEJRVVZLTzBGQlFVTkRMRXRCVkhWQ1RqdEJRVUZUTEVsQlFVRk5PMEZCUVVGRExHRkJRVUZFTEVsQlFVRWlMQ0p1WVcxbGN5STZXeUpOYjNacFpVbHVabThpTENKdGIzWnBaU0lzSW01aGJXVWlMQ0pwWkNJc0lubGxZWElpTENKeVlYUnBibWNpTENKZll5SXNJaVJTWldaeVpYTm9VbVZuSkNKZExDSnBaMjV2Y21WTWFYTjBJanBiWFN3aWMyOTFjbU5sY3lJNld5SnRiM1pwWlMxcGJtWnZMblJ6ZUNKZExDSnpiM1Z5WTJWelEyOXVkR1Z1ZENJNld5SnBiWEJ2Y25RZ2RIbHdaU0I3SUUxdmRtbGxJSDBnWm5KdmJTQW5RSE5vWVhKbFpDOTBlWEJsY3k5dGIzWnBaUzEwZVhCbGN5ZGNibHh1ZEhsd1pTQk5iM1pwWlVsdVptOVFjbTl3Y3lBOUlIdGNiaUFnY21WaFpHOXViSGtnYlc5MmFXVTZJRTF2ZG1sbFhHNTlYRzVjYm1WNGNHOXlkQ0JrWldaaGRXeDBJR1oxYm1OMGFXOXVJRTF2ZG1sbFNXNW1ieWg3SUcxdmRtbGxJSDA2SUUxdmRtbGxTVzVtYjFCeWIzQnpLU0I3WEc0Z0lISmxkSFZ5YmlBb1hHNGdJQ0FnUEdScGRpQmtZWFJoTFhSbGMzUnBaRDFjSW0xdmRtbGxMV2x1Wm04dFkyOXRjRndpUGx4dUlDQWdJQ0FnUEdneVBudHRiM1pwWlM1dVlXMWxmVHd2YURJK1hHNGdJQ0FnSUNBOGNENUpSRG9nZTIxdmRtbGxMbWxrZlR3dmNENWNiaUFnSUNBZ0lEeHdQbGxsWVhJNklIdHRiM1pwWlM1NVpXRnlmVHd2Y0Q1Y2JpQWdJQ0FnSUR4d1BsSmhkR2x1WnpvZ2UyMXZkbWxsTG5KaGRHbHVaMzA4TDNBK1hHNGdJQ0FnUEM5a2FYWStYRzRnSUNsY2JuMWNiaUpkTENKbWFXeGxJam9pTDFWelpYSnpMMjExY21GMExtOTZZMkZ1TDNObGIyNHZjR3hoZVhkeWFXZG9kQzExZEdsc2N5OXpZVzF3YkdVdFlYQndMMlp5YjI1MFpXNWtMM055WXk5amIyMXdiMjVsYm5SekwyMXZkbWxsTFdsMFpXMHZiVzkyYVdVdGFXNW1ieTUwYzNnaWZRPT0=",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 4874
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 9,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.757Z",
        "time": 8,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/@fs/Users/murat.ozcan/seon/playwright-utils/sample-app/shared/types/schema.ts",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/hooks/use-movie-form.ts"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"12c2-HSLWNhNQUSaq7KUuTdl9TJCvQMo\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "18053"
            }
          ],
          "content": {
            "size": 18053,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsgeiB9IGZyb20gIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy96b2QuanM/dj0wYmI2OWQ3MyI7CmltcG9ydCB7IGV4dGVuZFpvZFdpdGhPcGVuQXBpIH0gZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL0Bhc3RlYXNvbHV0aW9uc196b2QtdG8tb3BlbmFwaS5qcz92PTBiYjY5ZDczIjsKZXh0ZW5kWm9kV2l0aE9wZW5BcGkoeik7CmNvbnN0IENVUlJFTlRfWUVBUiA9ICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkuZ2V0RnVsbFllYXIoKTsKY29uc3QgTUFYX01PVklFX1lFQVIgPSBDVVJSRU5UX1lFQVIgKyAxOwpleHBvcnQgY29uc3QgQ3JlYXRlTW92aWVTY2hlbWEgPSB6Lm9iamVjdCh7CiAgaWQ6IHoubnVtYmVyKCkuaW50KCkub3B0aW9uYWwoKS5vcGVuYXBpKHsgZXhhbXBsZTogMSwgZGVzY3JpcHRpb246ICJNb3ZpZSBJRCAiIH0pLAogIG5hbWU6IHouc3RyaW5nKCkubWluKDEpLm9wZW5hcGkoeyBleGFtcGxlOiAiSW5jZXB0aW9uIiwgZGVzY3JpcHRpb246ICJNb3ZpZSBuYW1lIiB9KSwKICB5ZWFyOiB6Lm51bWJlcigpLmludCgpLm1pbigxOTAwKS5tYXgoTUFYX01PVklFX1lFQVIpLm9wZW5hcGkoeyBleGFtcGxlOiAyMDEwLCBkZXNjcmlwdGlvbjogIlJlbGVhc2UgeWVhciIgfSksCiAgcmF0aW5nOiB6Lm51bWJlcigpLm9wZW5hcGkoeyBleGFtcGxlOiA3LjUsIGRlc2NyaXB0aW9uOiAiUmF0aW5nIiB9KSwKICBkaXJlY3Rvcjogei5zdHJpbmcoKS5taW4oMSkub3BlbmFwaSh7CiAgICBleGFtcGxlOiAiQ2hyaXN0b3BoZXIgTm9sYW4iLAogICAgZGVzY3JpcHRpb246ICJEaXJlY3RvciIKICB9KQp9KS5vcGVuYXBpKCJDcmVhdGVNb3ZpZVJlcXVlc3QiKTsKZXhwb3J0IGNvbnN0IENyZWF0ZU1vdmllUmVzcG9uc2VTY2hlbWEgPSB6Lm9iamVjdCh7CiAgc3RhdHVzOiB6Lm51bWJlcigpLmludCgpLm9wZW5hcGkoeyBleGFtcGxlOiAyMDAsIGRlc2NyaXB0aW9uOiAiUmVzcG9uc2Ugc3RhdHVzIGNvZGUiIH0pLAogIGRhdGE6IHoub2JqZWN0KHsKICAgIGlkOiB6Lm51bWJlcigpLmludCgpLm9wZW5hcGkoeyBleGFtcGxlOiAxLCBkZXNjcmlwdGlvbjogIk1vdmllIElEIiB9KSwKICAgIG5hbWU6IHouc3RyaW5nKCkub3BlbmFwaSh7IGV4YW1wbGU6ICJJbmNlcHRpb24iLCBkZXNjcmlwdGlvbjogIk1vdmllIG5hbWUiIH0pLAogICAgeWVhcjogei5udW1iZXIoKS5pbnQoKS5vcGVuYXBpKHsgZXhhbXBsZTogMjAxMCwgZGVzY3JpcHRpb246ICJSZWxlYXNlIHllYXIiIH0pLAogICAgcmF0aW5nOiB6Lm51bWJlcigpLm9wZW5hcGkoeyBleGFtcGxlOiA3LjUsIGRlc2NyaXB0aW9uOiAiUmF0aW5nIiB9KSwKICAgIGRpcmVjdG9yOiB6LnN0cmluZygpLm9wZW5hcGkoewogICAgICBleGFtcGxlOiAiQ2hyaXN0b3BoZXIgTm9sYW4iLAogICAgICBkZXNjcmlwdGlvbjogIkRpcmVjdG9yIgogICAgfSkKICB9KSwKICBlcnJvcjogei5zdHJpbmcoKS5vcHRpb25hbCgpLm9wZW5hcGkoeyBkZXNjcmlwdGlvbjogIkVycm9yIG1lc3NhZ2UsIGlmIGFueSIgfSkKfSkub3BlbmFwaSgiQ3JlYXRlTW92aWVSZXNwb25zZSIpOwpleHBvcnQgY29uc3QgQ29uZmxpY3RNb3ZpZVJlc3BvbnNlU2NoZW1hID0gei5vYmplY3QoewogIHN0YXR1czogei5udW1iZXIoKS5pbnQoKS5vcGVuYXBpKHsgZXhhbXBsZTogNDA5LCBkZXNjcmlwdGlvbjogIkNvbmZsaWN0IHN0YXR1cyBjb2RlIiB9KSwKICBlcnJvcjogei5zdHJpbmcoKS5vcGVuYXBpKHsgZXhhbXBsZTogIk1vdmllIGFscmVhZHkgZXhpc3RzIiwgZGVzY3JpcHRpb246ICJFcnJvciBtZXNzYWdlIiB9KQp9KTsKY29uc3QgbW92aWVPYmogPSB7CiAgaWQ6IHoubnVtYmVyKCkub3BlbmFwaSh7IGV4YW1wbGU6IDEsIGRlc2NyaXB0aW9uOiAiTW92aWUgSUQiIH0pLAogIG5hbWU6IHouc3RyaW5nKCkub3BlbmFwaSh7IGV4YW1wbGU6ICJJbmNlcHRpb24iLCBkZXNjcmlwdGlvbjogIk1vdmllIG5hbWUiIH0pLAogIHllYXI6IHoubnVtYmVyKCkub3BlbmFwaSh7IGV4YW1wbGU6IDIwMTAsIGRlc2NyaXB0aW9uOiAiUmVsZWFzZSB5ZWFyIiB9KSwKICByYXRpbmc6IHoubnVtYmVyKCkub3BlbmFwaSh7IGV4YW1wbGU6IDcuNSwgZGVzY3JpcHRpb246ICJSYXRpbmciIH0pLAogIGRpcmVjdG9yOiB6LnN0cmluZygpLm9wZW5hcGkoewogICAgZXhhbXBsZTogIkNocmlzdG9waGVyIE5vbGFuIiwKICAgIGRlc2NyaXB0aW9uOiAiRGlyZWN0b3IiCiAgfSkKfTsKZXhwb3J0IGNvbnN0IEdldE1vdmllUmVzcG9uc2VVbmlvblNjaGVtYSA9IHoub2JqZWN0KHsKICBzdGF0dXM6IHoubnVtYmVyKCkuaW50KCkub3BlbmFwaSh7IGV4YW1wbGU6IDIwMCwgZGVzY3JpcHRpb246ICJSZXNwb25zZSBzdGF0dXMgY29kZSIgfSksCiAgZGF0YTogei51bmlvbihbCiAgICB6Lm9iamVjdChtb3ZpZU9iaikubnVsbGFibGUoKS5vcGVuYXBpKHsKICAgICAgZGVzY3JpcHRpb246ICJNb3ZpZSBkZXRhaWxzIG9yIG51bGwgaWYgbm90IGZvdW5kIiwKICAgICAgZXhhbXBsZTogewogICAgICAgIGlkOiAxLAogICAgICAgIG5hbWU6ICJJbmNlcHRpb24iLAogICAgICAgIHllYXI6IDIwMTAsCiAgICAgICAgcmF0aW5nOiA3LjUsCiAgICAgICAgZGlyZWN0b3I6ICJDaHJpc3RvcGhlciBOb2xhbiIKICAgICAgfQogICAgfSksCiAgICB6LmFycmF5KHoub2JqZWN0KG1vdmllT2JqKSkub3BlbmFwaSh7CiAgICAgIGRlc2NyaXB0aW9uOiAiTGlzdCBvZiBtb3ZpZXMgb3IgYW4gZW1wdHkgYXJyYXkgaWYgbm8gbW92aWVzIGV4aXN0IiwKICAgICAgZXhhbXBsZTogW10KICAgIH0pCiAgXSksCiAgZXJyb3I6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLm9wZW5hcGkoewogICAgZGVzY3JpcHRpb246ICJFcnJvciBtZXNzYWdlIGlmIGFuIGVycm9yIG9jY3VycmVkLCBvdGhlcndpc2UgbnVsbCIsCiAgICBleGFtcGxlOiBudWxsCiAgfSkKfSkub3BlbmFwaSgiR2V0TW92aWVSZXNwb25zZSIpOwpleHBvcnQgY29uc3QgTW92aWVOb3RGb3VuZFJlc3BvbnNlU2NoZW1hID0gei5vYmplY3QoewogIHN0YXR1czogei5udW1iZXIoKS5pbnQoKS5vcGVuYXBpKHsgZXhhbXBsZTogNDA0LCBkZXNjcmlwdGlvbjogIlJlc3BvbnNlIHN0YXR1cyBjb2RlIiB9KSwKICBlcnJvcjogei5zdHJpbmcoKS5vcGVuYXBpKHsgZXhhbXBsZTogIk1vdmllIG5vdCBmb3VuZCIsIGRlc2NyaXB0aW9uOiAiRXJyb3IgbWVzc2FnZSIgfSkKfSk7CmV4cG9ydCBjb25zdCBEZWxldGVNb3ZpZVJlc3BvbnNlU2NoZW1hID0gei5vYmplY3QoewogIHN0YXR1czogei5udW1iZXIoKS5pbnQoKS5vcGVuYXBpKHsgZXhhbXBsZTogMjAwLCBkZXNjcmlwdGlvbjogIlJlc3BvbnNlIHN0YXR1cyBjb2RlIiB9KSwKICBtZXNzYWdlOiB6LnN0cmluZygpLm9wZW5hcGkoewogICAgZXhhbXBsZTogIk1vdmllIHtpZH0gaGFzIGJlZW4gZGVsZXRlZCIsCiAgICBkZXNjcmlwdGlvbjogIlN1Y2Nlc3MgbWVzc2FnZSBmb3IgdGhlIGRlbGV0ZWQgbW92aWUiCiAgfSkKfSk7CmV4cG9ydCBjb25zdCBVcGRhdGVNb3ZpZVNjaGVtYSA9IHoub2JqZWN0KHsKICBpZDogei5udW1iZXIoKS5vcHRpb25hbCgpLm9wZW5hcGkoeyBleGFtcGxlOiAxLCBkZXNjcmlwdGlvbjogIk1vdmllIElEIiB9KSwKICBuYW1lOiB6LnN0cmluZygpLm1pbigxKS5vcHRpb25hbCgpLm9wZW5hcGkoeyBleGFtcGxlOiAiSW5jZXB0aW9uIiwgZGVzY3JpcHRpb246ICJNb3ZpZSBuYW1lIiB9KSwKICB5ZWFyOiB6Lm51bWJlcigpLmludCgpLm1pbigxOTAwKS5tYXgoTUFYX01PVklFX1lFQVIpLm9wdGlvbmFsKCkub3BlbmFwaSh7IGV4YW1wbGU6IDIwMTAsIGRlc2NyaXB0aW9uOiAiUmVsZWFzZSB5ZWFyIiB9KSwKICByYXRpbmc6IHoubnVtYmVyKCkub3B0aW9uYWwoKS5vcGVuYXBpKHsgZXhhbXBsZTogNy41LCBkZXNjcmlwdGlvbjogIlJhdGluZyIgfSksCiAgZGlyZWN0b3I6IHouc3RyaW5nKCkubWluKDEpLm9wdGlvbmFsKCkub3BlbmFwaSh7CiAgICBleGFtcGxlOiAiQ2hyaXN0b3BoZXIgTm9sYW4iLAogICAgZGVzY3JpcHRpb246ICJEaXJlY3RvciIKICB9KQp9KS5vcGVuYXBpKCJVcGRhdGVNb3ZpZVJlcXVlc3QiKTsKZXhwb3J0IGNvbnN0IFVwZGF0ZU1vdmllUmVzcG9uc2VTY2hlbWEgPSB6Lm9iamVjdCh7CiAgc3RhdHVzOiB6Lm51bWJlcigpLmludCgpLm9wZW5hcGkoeyBleGFtcGxlOiAyMDAsIGRlc2NyaXB0aW9uOiAiUmVzcG9uc2Ugc3RhdHVzIGNvZGUiIH0pLAogIGRhdGE6IHoub2JqZWN0KHsKICAgIGlkOiB6Lm51bWJlcigpLm9wZW5hcGkoeyBleGFtcGxlOiAxLCBkZXNjcmlwdGlvbjogIk1vdmllIElEIiB9KSwKICAgIG5hbWU6IHouc3RyaW5nKCkub3BlbmFwaSh7IGV4YW1wbGU6ICJJbmNlcHRpb24iLCBkZXNjcmlwdGlvbjogIk1vdmllIG5hbWUiIH0pLAogICAgeWVhcjogei5udW1iZXIoKS5vcGVuYXBpKHsgZXhhbXBsZTogMjAxMCwgZGVzY3JpcHRpb246ICJSZWxlYXNlIHllYXIiIH0pLAogICAgcmF0aW5nOiB6Lm51bWJlcigpLm9wZW5hcGkoeyBleGFtcGxlOiA3LjUsIGRlc2NyaXB0aW9uOiAiUmF0aW5nIiB9KSwKICAgIGRpcmVjdG9yOiB6LnN0cmluZygpLm9wZW5hcGkoewogICAgICBleGFtcGxlOiAiQ2hyaXN0b3BoZXIgTm9sYW4iLAogICAgICBkZXNjcmlwdGlvbjogIkRpcmVjdG9yIgogICAgfSkKICB9KS5vcGVuYXBpKHsgZGVzY3JpcHRpb246ICJVcGRhdGVkIG1vdmllIGRhdGEiIH0pLAogIGVycm9yOiB6LnN0cmluZygpLm9wdGlvbmFsKCkub3BlbmFwaSh7IGRlc2NyaXB0aW9uOiAiRXJyb3IgbWVzc2FnZSwgaWYgYW55IiB9KQp9KS5vcGVuYXBpKCJVcGRhdGVkTW92aWVSZXNwb25zZSIpOwoKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYkluTmphR1Z0WVM1MGN5SmRMQ0p6YjNWeVkyVnpRMjl1ZEdWdWRDSTZXeUpwYlhCdmNuUWdleUI2SUgwZ1puSnZiU0FuZW05a0oxeHVhVzF3YjNKMElIc2daWGgwWlc1a1dtOWtWMmwwYUU5d1pXNUJjR2tnZlNCbWNtOXRJQ2RBWVhOMFpXRnpiMngxZEdsdmJuTXZlbTlrTFhSdkxXOXdaVzVoY0drblhHNWNiaTh2SUZwdlpDQkxaWGtnWm1WaGRIVnlaU0F4T2lCa1pXWnBibVVnZEdobElITmphR1Z0WVNCM2FYUm9JRnB2WkNBb1lXNWtJR1Y0Y0dGdVpDQnBkQ0IzYVhSb0lIcHZaQzEwYnkxdmNHVnVZWEJwS1Z4dVhHNHZMeUJIWlc1bGNtRjBaU0JQY0dWdVFWQkpJRVJ2WTNNZ2QybDBhQ0JhYjJRZ2MzUmxjQ0F4S1NCRVpXWnBibVVnVTJOb1pXMWhjeUFvZDJsMGFDQjZiMlFwWEc0dkx5QkZZV05vSUdacFpXeGtJR2x6SUdGdWJtOTBZWFJsWkNCM2FYUm9JRTl3Wlc1QlVFa3RjM0JsWTJsbWFXTWdiV1YwWVdSaGRHRWdjM1ZqYUNCaGN5QmxlR0Z0Y0d4bElHRnVaQ0JrWlhOamNtbHdkR2x2Ymk1Y2JseHVMeThnWlhoMFpXNWtjeUJhYjJRZ2QybDBhQ0JQY0dWdVFWQkpJSE4xY0hCdmNuUmNibVY0ZEdWdVpGcHZaRmRwZEdoUGNHVnVRWEJwS0hvcFhHNWNiaTh2SUVSNWJtRnRhV01nZVdWaGNpQjJZV3hwWkdGMGFXOXVJSFJ2SUdGMmIybGtJR0Z1Ym5WaGJDQjFjR1JoZEdWelhHNHZMeUJCYkd4dmQzTWdiVzkyYVdWeklHWnliMjBnTVRrd01DQjBieUJqZFhKeVpXNTBJSGxsWVhJZ0t5QXhJQ2htYjNJZ2RYQmpiMjFwYm1jZ2NtVnNaV0Z6WlhNcFhHNWpiMjV6ZENCRFZWSlNSVTVVWDFsRlFWSWdQU0J1WlhjZ1JHRjBaU2dwTG1kbGRFWjFiR3haWldGeUtDbGNibU52Ym5OMElFMUJXRjlOVDFaSlJWOVpSVUZTSUQwZ1ExVlNVa1ZPVkY5WlJVRlNJQ3NnTVZ4dVhHNWxlSEJ2Y25RZ1kyOXVjM1FnUTNKbFlYUmxUVzkyYVdWVFkyaGxiV0VnUFNCNlhHNGdJQzV2WW1wbFkzUW9lMXh1SUNBZ0lHbGtPaUI2WEc0Z0lDQWdJQ0F1Ym5WdFltVnlLQ2xjYmlBZ0lDQWdJQzVwYm5Rb0tWeHVJQ0FnSUNBZ0xtOXdkR2x2Ym1Gc0tDbGNiaUFnSUNBZ0lDNXZjR1Z1WVhCcEtIc2daWGhoYlhCc1pUb2dNU3dnWkdWelkzSnBjSFJwYjI0NklDZE5iM1pwWlNCSlJDQW5JSDBwTEZ4dUlDQWdJRzVoYldVNklIcGNiaUFnSUNBZ0lDNXpkSEpwYm1jb0tWeHVJQ0FnSUNBZ0xtMXBiaWd4S1Z4dUlDQWdJQ0FnTG05d1pXNWhjR2tvZXlCbGVHRnRjR3hsT2lBblNXNWpaWEIwYVc5dUp5d2daR1Z6WTNKcGNIUnBiMjQ2SUNkTmIzWnBaU0J1WVcxbEp5QjlLU3hjYmlBZ0lDQjVaV0Z5T2lCNlhHNGdJQ0FnSUNBdWJuVnRZbVZ5S0NsY2JpQWdJQ0FnSUM1cGJuUW9LVnh1SUNBZ0lDQWdMbTFwYmlneE9UQXdLVnh1SUNBZ0lDQWdMbTFoZUNoTlFWaGZUVTlXU1VWZldVVkJVaWxjYmlBZ0lDQWdJQzV2Y0dWdVlYQnBLSHNnWlhoaGJYQnNaVG9nTWpBeE1Dd2daR1Z6WTNKcGNIUnBiMjQ2SUNkU1pXeGxZWE5sSUhsbFlYSW5JSDBwTEZ4dUlDQWdJSEpoZEdsdVp6b2dlaTV1ZFcxaVpYSW9LUzV2Y0dWdVlYQnBLSHNnWlhoaGJYQnNaVG9nTnk0MUxDQmtaWE5qY21sd2RHbHZiam9nSjFKaGRHbHVaeWNnZlNrc1hHNGdJQ0FnWkdseVpXTjBiM0k2SUhvdWMzUnlhVzVuS0NrdWJXbHVLREVwTG05d1pXNWhjR2tvZTF4dUlDQWdJQ0FnWlhoaGJYQnNaVG9nSjBOb2NtbHpkRzl3YUdWeUlFNXZiR0Z1Snl4Y2JpQWdJQ0FnSUdSbGMyTnlhWEIwYVc5dU9pQW5SR2x5WldOMGIzSW5YRzRnSUNBZ2ZTbGNiaUFnZlNsY2JpQWdMbTl3Wlc1aGNHa29KME55WldGMFpVMXZkbWxsVW1WeGRXVnpkQ2NwWEc1Y2JtVjRjRzl5ZENCamIyNXpkQ0JEY21WaGRHVk5iM1pwWlZKbGMzQnZibk5sVTJOb1pXMWhJRDBnZWx4dUlDQXViMkpxWldOMEtIdGNiaUFnSUNCemRHRjBkWE02SUhwY2JpQWdJQ0FnSUM1dWRXMWlaWElvS1Z4dUlDQWdJQ0FnTG1sdWRDZ3BYRzRnSUNBZ0lDQXViM0JsYm1Gd2FTaDdJR1Y0WVcxd2JHVTZJREl3TUN3Z1pHVnpZM0pwY0hScGIyNDZJQ2RTWlhOd2IyNXpaU0J6ZEdGMGRYTWdZMjlrWlNjZ2ZTa3NYRzRnSUNBZ1pHRjBZVG9nZWk1dlltcGxZM1FvZTF4dUlDQWdJQ0FnYVdRNklIb3ViblZ0WW1WeUtDa3VhVzUwS0NrdWIzQmxibUZ3YVNoN0lHVjRZVzF3YkdVNklERXNJR1JsYzJOeWFYQjBhVzl1T2lBblRXOTJhV1VnU1VRbklIMHBMRnh1SUNBZ0lDQWdibUZ0WlRvZ2VseHVJQ0FnSUNBZ0lDQXVjM1J5YVc1bktDbGNiaUFnSUNBZ0lDQWdMbTl3Wlc1aGNHa29leUJsZUdGdGNHeGxPaUFuU1c1alpYQjBhVzl1Snl3Z1pHVnpZM0pwY0hScGIyNDZJQ2ROYjNacFpTQnVZVzFsSnlCOUtTeGNiaUFnSUNBZ0lIbGxZWEk2SUhwY2JpQWdJQ0FnSUNBZ0xtNTFiV0psY2lncFhHNGdJQ0FnSUNBZ0lDNXBiblFvS1Z4dUlDQWdJQ0FnSUNBdWIzQmxibUZ3YVNoN0lHVjRZVzF3YkdVNklESXdNVEFzSUdSbGMyTnlhWEIwYVc5dU9pQW5VbVZzWldGelpTQjVaV0Z5SnlCOUtTeGNiaUFnSUNBZ0lISmhkR2x1WnpvZ2VpNXVkVzFpWlhJb0tTNXZjR1Z1WVhCcEtIc2daWGhoYlhCc1pUb2dOeTQxTENCa1pYTmpjbWx3ZEdsdmJqb2dKMUpoZEdsdVp5Y2dmU2tzWEc0Z0lDQWdJQ0JrYVhKbFkzUnZjam9nZWk1emRISnBibWNvS1M1dmNHVnVZWEJwS0h0Y2JpQWdJQ0FnSUNBZ1pYaGhiWEJzWlRvZ0owTm9jbWx6ZEc5d2FHVnlJRTV2YkdGdUp5eGNiaUFnSUNBZ0lDQWdaR1Z6WTNKcGNIUnBiMjQ2SUNkRWFYSmxZM1J2Y2lkY2JpQWdJQ0FnSUgwcFhHNGdJQ0FnZlNrc1hHNGdJQ0FnWlhKeWIzSTZJSHBjYmlBZ0lDQWdJQzV6ZEhKcGJtY29LVnh1SUNBZ0lDQWdMbTl3ZEdsdmJtRnNLQ2xjYmlBZ0lDQWdJQzV2Y0dWdVlYQnBLSHNnWkdWelkzSnBjSFJwYjI0NklDZEZjbkp2Y2lCdFpYTnpZV2RsTENCcFppQmhibmtuSUgwcFhHNGdJSDBwWEc0Z0lDNXZjR1Z1WVhCcEtDZERjbVZoZEdWTmIzWnBaVkpsYzNCdmJuTmxKeWxjYmx4dVpYaHdiM0owSUdOdmJuTjBJRU52Ym1ac2FXTjBUVzkyYVdWU1pYTndiMjV6WlZOamFHVnRZU0E5SUhvdWIySnFaV04wS0h0Y2JpQWdjM1JoZEhWek9pQjZYRzRnSUNBZ0xtNTFiV0psY2lncFhHNGdJQ0FnTG1sdWRDZ3BYRzRnSUNBZ0xtOXdaVzVoY0drb2V5QmxlR0Z0Y0d4bE9pQTBNRGtzSUdSbGMyTnlhWEIwYVc5dU9pQW5RMjl1Wm14cFkzUWdjM1JoZEhWeklHTnZaR1VuSUgwcExGeHVJQ0JsY25KdmNqb2dlbHh1SUNBZ0lDNXpkSEpwYm1jb0tWeHVJQ0FnSUM1dmNHVnVZWEJwS0hzZ1pYaGhiWEJzWlRvZ0owMXZkbWxsSUdGc2NtVmhaSGtnWlhocGMzUnpKeXdnWkdWelkzSnBjSFJwYjI0NklDZEZjbkp2Y2lCdFpYTnpZV2RsSnlCOUtWeHVmU2xjYmx4dVkyOXVjM1FnYlc5MmFXVlBZbW9nUFNCN1hHNGdJR2xrT2lCNkxtNTFiV0psY2lncExtOXdaVzVoY0drb2V5QmxlR0Z0Y0d4bE9pQXhMQ0JrWlhOamNtbHdkR2x2YmpvZ0owMXZkbWxsSUVsRUp5QjlLU3hjYmlBZ2JtRnRaVG9nZWk1emRISnBibWNvS1M1dmNHVnVZWEJwS0hzZ1pYaGhiWEJzWlRvZ0owbHVZMlZ3ZEdsdmJpY3NJR1JsYzJOeWFYQjBhVzl1T2lBblRXOTJhV1VnYm1GdFpTY2dmU2tzWEc0Z0lIbGxZWEk2SUhvdWJuVnRZbVZ5S0NrdWIzQmxibUZ3YVNoN0lHVjRZVzF3YkdVNklESXdNVEFzSUdSbGMyTnlhWEIwYVc5dU9pQW5VbVZzWldGelpTQjVaV0Z5SnlCOUtTeGNiaUFnY21GMGFXNW5PaUI2TG01MWJXSmxjaWdwTG05d1pXNWhjR2tvZXlCbGVHRnRjR3hsT2lBM0xqVXNJR1JsYzJOeWFYQjBhVzl1T2lBblVtRjBhVzVuSnlCOUtTeGNiaUFnWkdseVpXTjBiM0k2SUhvdWMzUnlhVzVuS0NrdWIzQmxibUZ3YVNoN1hHNGdJQ0FnWlhoaGJYQnNaVG9nSjBOb2NtbHpkRzl3YUdWeUlFNXZiR0Z1Snl4Y2JpQWdJQ0JrWlhOamNtbHdkR2x2YmpvZ0owUnBjbVZqZEc5eUoxeHVJQ0I5S1Z4dWZWeHVYRzVsZUhCdmNuUWdZMjl1YzNRZ1IyVjBUVzkyYVdWU1pYTndiMjV6WlZWdWFXOXVVMk5vWlcxaElEMGdlbHh1SUNBdWIySnFaV04wS0h0Y2JpQWdJQ0J6ZEdGMGRYTTZJSHBjYmlBZ0lDQWdJQzV1ZFcxaVpYSW9LVnh1SUNBZ0lDQWdMbWx1ZENncFhHNGdJQ0FnSUNBdWIzQmxibUZ3YVNoN0lHVjRZVzF3YkdVNklESXdNQ3dnWkdWelkzSnBjSFJwYjI0NklDZFNaWE53YjI1elpTQnpkR0YwZFhNZ1kyOWtaU2NnZlNrc1hHNGdJQ0FnWkdGMFlUb2dlaTUxYm1sdmJpaGJYRzRnSUNBZ0lDQjZYRzRnSUNBZ0lDQWdJQzV2WW1wbFkzUW9iVzkyYVdWUFltb3BYRzRnSUNBZ0lDQWdJQzV1ZFd4c1lXSnNaU2dwWEc0Z0lDQWdJQ0FnSUM1dmNHVnVZWEJwS0h0Y2JpQWdJQ0FnSUNBZ0lDQmtaWE5qY21sd2RHbHZiam9nSjAxdmRtbGxJR1JsZEdGcGJITWdiM0lnYm5Wc2JDQnBaaUJ1YjNRZ1ptOTFibVFuTEZ4dUlDQWdJQ0FnSUNBZ0lHVjRZVzF3YkdVNklIdGNiaUFnSUNBZ0lDQWdJQ0FnSUdsa09pQXhMRnh1SUNBZ0lDQWdJQ0FnSUNBZ2JtRnRaVG9nSjBsdVkyVndkR2x2Ymljc1hHNGdJQ0FnSUNBZ0lDQWdJQ0I1WldGeU9pQXlNREV3TEZ4dUlDQWdJQ0FnSUNBZ0lDQWdjbUYwYVc1bk9pQTNMalVzWEc0Z0lDQWdJQ0FnSUNBZ0lDQmthWEpsWTNSdmNqb2dKME5vY21semRHOXdhR1Z5SUU1dmJHRnVKMXh1SUNBZ0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUNBZ2ZTa3NYRzRnSUNBZ0lDQjZMbUZ5Y21GNUtIb3ViMkpxWldOMEtHMXZkbWxsVDJKcUtTa3ViM0JsYm1Gd2FTaDdYRzRnSUNBZ0lDQWdJR1JsYzJOeWFYQjBhVzl1T2lBblRHbHpkQ0J2WmlCdGIzWnBaWE1nYjNJZ1lXNGdaVzF3ZEhrZ1lYSnlZWGtnYVdZZ2JtOGdiVzkyYVdWeklHVjRhWE4wSnl4Y2JpQWdJQ0FnSUNBZ1pYaGhiWEJzWlRvZ1cxMWNiaUFnSUNBZ0lIMHBYRzRnSUNBZ1hTa3NYRzRnSUNBZ1pYSnliM0k2SUhvdWMzUnlhVzVuS0NrdWJuVnNiR0ZpYkdVb0tTNXZjSFJwYjI1aGJDZ3BMbTl3Wlc1aGNHa29lMXh1SUNBZ0lDQWdaR1Z6WTNKcGNIUnBiMjQ2SUNkRmNuSnZjaUJ0WlhOellXZGxJR2xtSUdGdUlHVnljbTl5SUc5alkzVnljbVZrTENCdmRHaGxjbmRwYzJVZ2JuVnNiQ2NzWEc0Z0lDQWdJQ0JsZUdGdGNHeGxPaUJ1ZFd4c1hHNGdJQ0FnZlNsY2JpQWdmU2xjYmlBZ0xtOXdaVzVoY0drb0owZGxkRTF2ZG1sbFVtVnpjRzl1YzJVbktWeHVYRzVsZUhCdmNuUWdZMjl1YzNRZ1RXOTJhV1ZPYjNSR2IzVnVaRkpsYzNCdmJuTmxVMk5vWlcxaElEMGdlaTV2WW1wbFkzUW9lMXh1SUNCemRHRjBkWE02SUhwY2JpQWdJQ0F1Ym5WdFltVnlLQ2xjYmlBZ0lDQXVhVzUwS0NsY2JpQWdJQ0F1YjNCbGJtRndhU2g3SUdWNFlXMXdiR1U2SURRd05Dd2daR1Z6WTNKcGNIUnBiMjQ2SUNkU1pYTndiMjV6WlNCemRHRjBkWE1nWTI5a1pTY2dmU2tzWEc0Z0lHVnljbTl5T2lCNlhHNGdJQ0FnTG5OMGNtbHVaeWdwWEc0Z0lDQWdMbTl3Wlc1aGNHa29leUJsZUdGdGNHeGxPaUFuVFc5MmFXVWdibTkwSUdadmRXNWtKeXdnWkdWelkzSnBjSFJwYjI0NklDZEZjbkp2Y2lCdFpYTnpZV2RsSnlCOUtWeHVmU2xjYmx4dVpYaHdiM0owSUdOdmJuTjBJRVJsYkdWMFpVMXZkbWxsVW1WemNHOXVjMlZUWTJobGJXRWdQU0I2TG05aWFtVmpkQ2g3WEc0Z0lITjBZWFIxY3pvZ2VseHVJQ0FnSUM1dWRXMWlaWElvS1Z4dUlDQWdJQzVwYm5Rb0tWeHVJQ0FnSUM1dmNHVnVZWEJwS0hzZ1pYaGhiWEJzWlRvZ01qQXdMQ0JrWlhOamNtbHdkR2x2YmpvZ0oxSmxjM0J2Ym5ObElITjBZWFIxY3lCamIyUmxKeUI5S1N4Y2JpQWdiV1Z6YzJGblpUb2dlaTV6ZEhKcGJtY29LUzV2Y0dWdVlYQnBLSHRjYmlBZ0lDQmxlR0Z0Y0d4bE9pQW5UVzkyYVdVZ2UybGtmU0JvWVhNZ1ltVmxiaUJrWld4bGRHVmtKeXhjYmlBZ0lDQmtaWE5qY21sd2RHbHZiam9nSjFOMVkyTmxjM01nYldWemMyRm5aU0JtYjNJZ2RHaGxJR1JsYkdWMFpXUWdiVzkyYVdVblhHNGdJSDBwWEc1OUtWeHVYRzVsZUhCdmNuUWdZMjl1YzNRZ1ZYQmtZWFJsVFc5MmFXVlRZMmhsYldFZ1BTQjZYRzRnSUM1dlltcGxZM1FvZTF4dUlDQWdJR2xrT2lCNkxtNTFiV0psY2lncExtOXdkR2x2Ym1Gc0tDa3ViM0JsYm1Gd2FTaDdJR1Y0WVcxd2JHVTZJREVzSUdSbGMyTnlhWEIwYVc5dU9pQW5UVzkyYVdVZ1NVUW5JSDBwTEZ4dUlDQWdJRzVoYldVNklIcGNiaUFnSUNBZ0lDNXpkSEpwYm1jb0tWeHVJQ0FnSUNBZ0xtMXBiaWd4S1Z4dUlDQWdJQ0FnTG05d2RHbHZibUZzS0NsY2JpQWdJQ0FnSUM1dmNHVnVZWEJwS0hzZ1pYaGhiWEJzWlRvZ0owbHVZMlZ3ZEdsdmJpY3NJR1JsYzJOeWFYQjBhVzl1T2lBblRXOTJhV1VnYm1GdFpTY2dmU2tzWEc0Z0lDQWdlV1ZoY2pvZ2VseHVJQ0FnSUNBZ0xtNTFiV0psY2lncFhHNGdJQ0FnSUNBdWFXNTBLQ2xjYmlBZ0lDQWdJQzV0YVc0b01Ua3dNQ2xjYmlBZ0lDQWdJQzV0WVhnb1RVRllYMDFQVmtsRlgxbEZRVklwWEc0Z0lDQWdJQ0F1YjNCMGFXOXVZV3dvS1Z4dUlDQWdJQ0FnTG05d1pXNWhjR2tvZXlCbGVHRnRjR3hsT2lBeU1ERXdMQ0JrWlhOamNtbHdkR2x2YmpvZ0oxSmxiR1ZoYzJVZ2VXVmhjaWNnZlNrc1hHNGdJQ0FnY21GMGFXNW5PaUI2WEc0Z0lDQWdJQ0F1Ym5WdFltVnlLQ2xjYmlBZ0lDQWdJQzV2Y0hScGIyNWhiQ2dwWEc0Z0lDQWdJQ0F1YjNCbGJtRndhU2g3SUdWNFlXMXdiR1U2SURjdU5Td2daR1Z6WTNKcGNIUnBiMjQ2SUNkU1lYUnBibWNuSUgwcExGeHVJQ0FnSUdScGNtVmpkRzl5T2lCNkxuTjBjbWx1WnlncExtMXBiaWd4S1M1dmNIUnBiMjVoYkNncExtOXdaVzVoY0drb2UxeHVJQ0FnSUNBZ1pYaGhiWEJzWlRvZ0owTm9jbWx6ZEc5d2FHVnlJRTV2YkdGdUp5eGNiaUFnSUNBZ0lHUmxjMk55YVhCMGFXOXVPaUFuUkdseVpXTjBiM0luWEc0Z0lDQWdmU2xjYmlBZ2ZTbGNiaUFnTG05d1pXNWhjR2tvSjFWd1pHRjBaVTF2ZG1sbFVtVnhkV1Z6ZENjcFhHNWNibVY0Y0c5eWRDQmpiMjV6ZENCVmNHUmhkR1ZOYjNacFpWSmxjM0J2Ym5ObFUyTm9aVzFoSUQwZ2VseHVJQ0F1YjJKcVpXTjBLSHRjYmlBZ0lDQnpkR0YwZFhNNklIcGNiaUFnSUNBZ0lDNXVkVzFpWlhJb0tWeHVJQ0FnSUNBZ0xtbHVkQ2dwWEc0Z0lDQWdJQ0F1YjNCbGJtRndhU2g3SUdWNFlXMXdiR1U2SURJd01Dd2daR1Z6WTNKcGNIUnBiMjQ2SUNkU1pYTndiMjV6WlNCemRHRjBkWE1nWTI5a1pTY2dmU2tzWEc0Z0lDQWdaR0YwWVRvZ2VseHVJQ0FnSUNBZ0xtOWlhbVZqZENoN1hHNGdJQ0FnSUNBZ0lHbGtPaUI2TG01MWJXSmxjaWdwTG05d1pXNWhjR2tvZXlCbGVHRnRjR3hsT2lBeExDQmtaWE5qY21sd2RHbHZiam9nSjAxdmRtbGxJRWxFSnlCOUtTeGNiaUFnSUNBZ0lDQWdibUZ0WlRvZ2VseHVJQ0FnSUNBZ0lDQWdJQzV6ZEhKcGJtY29LVnh1SUNBZ0lDQWdJQ0FnSUM1dmNHVnVZWEJwS0hzZ1pYaGhiWEJzWlRvZ0owbHVZMlZ3ZEdsdmJpY3NJR1JsYzJOeWFYQjBhVzl1T2lBblRXOTJhV1VnYm1GdFpTY2dmU2tzWEc0Z0lDQWdJQ0FnSUhsbFlYSTZJSHBjYmlBZ0lDQWdJQ0FnSUNBdWJuVnRZbVZ5S0NsY2JpQWdJQ0FnSUNBZ0lDQXViM0JsYm1Gd2FTaDdJR1Y0WVcxd2JHVTZJREl3TVRBc0lHUmxjMk55YVhCMGFXOXVPaUFuVW1Wc1pXRnpaU0I1WldGeUp5QjlLU3hjYmlBZ0lDQWdJQ0FnY21GMGFXNW5PaUI2TG01MWJXSmxjaWdwTG05d1pXNWhjR2tvZXlCbGVHRnRjR3hsT2lBM0xqVXNJR1JsYzJOeWFYQjBhVzl1T2lBblVtRjBhVzVuSnlCOUtTeGNiaUFnSUNBZ0lDQWdaR2x5WldOMGIzSTZJSG91YzNSeWFXNW5LQ2t1YjNCbGJtRndhU2g3WEc0Z0lDQWdJQ0FnSUNBZ1pYaGhiWEJzWlRvZ0owTm9jbWx6ZEc5d2FHVnlJRTV2YkdGdUp5eGNiaUFnSUNBZ0lDQWdJQ0JrWlhOamNtbHdkR2x2YmpvZ0owUnBjbVZqZEc5eUoxeHVJQ0FnSUNBZ0lDQjlLVnh1SUNBZ0lDQWdmU2xjYmlBZ0lDQWdJQzV2Y0dWdVlYQnBLSHNnWkdWelkzSnBjSFJwYjI0NklDZFZjR1JoZEdWa0lHMXZkbWxsSUdSaGRHRW5JSDBwTEZ4dUlDQWdJR1Z5Y205eU9pQjZYRzRnSUNBZ0lDQXVjM1J5YVc1bktDbGNiaUFnSUNBZ0lDNXZjSFJwYjI1aGJDZ3BYRzRnSUNBZ0lDQXViM0JsYm1Gd2FTaDdJR1JsYzJOeWFYQjBhVzl1T2lBblJYSnliM0lnYldWemMyRm5aU3dnYVdZZ1lXNTVKeUI5S1Z4dUlDQjlLVnh1SUNBdWIzQmxibUZ3YVNnblZYQmtZWFJsWkUxdmRtbGxVbVZ6Y0c5dWMyVW5LVnh1SWwwc0ltMWhjSEJwYm1keklqb2lRVUZCUVN4VFFVRlRMRk5CUVZNN1FVRkRiRUlzVTBGQlV5dzBRa0ZCTkVJN1FVRlJja01zY1VKQlFYRkNMRU5CUVVNN1FVRkpkRUlzVFVGQlRTeG5Ra0ZCWlN4dlFrRkJTU3hMUVVGTExFZEJRVVVzV1VGQldUdEJRVU0xUXl4TlFVRk5MR2xDUVVGcFFpeGxRVUZsTzBGQlJTOUNMR0ZCUVUwc2IwSkJRVzlDTEVWQlF6bENMRTlCUVU4N1FVRkJRU3hGUVVOT0xFbEJRVWtzUlVGRFJDeFBRVUZQTEVWQlExQXNTVUZCU1N4RlFVTktMRk5CUVZNc1JVRkRWQ3hSUVVGUkxFVkJRVVVzVTBGQlV5eEhRVUZITEdGQlFXRXNXVUZCV1N4RFFVRkRPMEZCUVVFc1JVRkRia1FzVFVGQlRTeEZRVU5JTEU5QlFVOHNSVUZEVUN4SlFVRkpMRU5CUVVNc1JVRkRUQ3hSUVVGUkxFVkJRVVVzVTBGQlV5eGhRVUZoTEdGQlFXRXNZVUZCWVN4RFFVRkRPMEZCUVVFc1JVRkRPVVFzVFVGQlRTeEZRVU5JTEU5QlFVOHNSVUZEVUN4SlFVRkpMRVZCUTBvc1NVRkJTU3hKUVVGSkxFVkJRMUlzU1VGQlNTeGpRVUZqTEVWQlEyeENMRkZCUVZFc1JVRkJSU3hUUVVGVExFMUJRVTBzWVVGQllTeGxRVUZsTEVOQlFVTTdRVUZCUVN4RlFVTjZSQ3hSUVVGUkxFVkJRVVVzVDBGQlR5eEZRVUZGTEZGQlFWRXNSVUZCUlN4VFFVRlRMRXRCUVVzc1lVRkJZU3hUUVVGVExFTkJRVU03UVVGQlFTeEZRVU5zUlN4VlFVRlZMRVZCUVVVc1QwRkJUeXhGUVVGRkxFbEJRVWtzUTBGQlF5eEZRVUZGTEZGQlFWRTdRVUZCUVN4SlFVTnNReXhUUVVGVE8wRkJRVUVzU1VGRFZDeGhRVUZoTzBGQlFVRXNSVUZEWml4RFFVRkRPMEZCUTBnc1EwRkJReXhGUVVOQkxGRkJRVkVzYjBKQlFXOUNPMEZCUlhoQ0xHRkJRVTBzTkVKQlFUUkNMRVZCUTNSRExFOUJRVTg3UVVGQlFTeEZRVU5PTEZGQlFWRXNSVUZEVEN4UFFVRlBMRVZCUTFBc1NVRkJTU3hGUVVOS0xGRkJRVkVzUlVGQlJTeFRRVUZUTEV0QlFVc3NZVUZCWVN4MVFrRkJkVUlzUTBGQlF6dEJRVUZCTEVWQlEyaEZMRTFCUVUwc1JVRkJSU3hQUVVGUE8wRkJRVUVzU1VGRFlpeEpRVUZKTEVWQlFVVXNUMEZCVHl4RlFVRkZMRWxCUVVrc1JVRkJSU3hSUVVGUkxFVkJRVVVzVTBGQlV5eEhRVUZITEdGQlFXRXNWMEZCVnl4RFFVRkRPMEZCUVVFc1NVRkRjRVVzVFVGQlRTeEZRVU5JTEU5QlFVOHNSVUZEVUN4UlFVRlJMRVZCUVVVc1UwRkJVeXhoUVVGaExHRkJRV0VzWVVGQllTeERRVUZETzBGQlFVRXNTVUZET1VRc1RVRkJUU3hGUVVOSUxFOUJRVThzUlVGRFVDeEpRVUZKTEVWQlEwb3NVVUZCVVN4RlFVRkZMRk5CUVZNc1RVRkJUU3hoUVVGaExHVkJRV1VzUTBGQlF6dEJRVUZCTEVsQlEzcEVMRkZCUVZFc1JVRkJSU3hQUVVGUExFVkJRVVVzVVVGQlVTeEZRVUZGTEZOQlFWTXNTMEZCU3l4aFFVRmhMRk5CUVZNc1EwRkJRenRCUVVGQkxFbEJRMnhGTEZWQlFWVXNSVUZCUlN4UFFVRlBMRVZCUVVVc1VVRkJVVHRCUVVGQkxFMUJRek5DTEZOQlFWTTdRVUZCUVN4TlFVTlVMR0ZCUVdFN1FVRkJRU3hKUVVObUxFTkJRVU03UVVGQlFTeEZRVU5JTEVOQlFVTTdRVUZCUVN4RlFVTkVMRTlCUVU4c1JVRkRTaXhQUVVGUExFVkJRMUFzVTBGQlV5eEZRVU5VTEZGQlFWRXNSVUZCUlN4aFFVRmhMSGRDUVVGM1FpeERRVUZETzBGQlEzSkVMRU5CUVVNc1JVRkRRU3hSUVVGUkxIRkNRVUZ4UWp0QlFVVjZRaXhoUVVGTkxEaENRVUU0UWl4RlFVRkZMRTlCUVU4N1FVRkJRU3hGUVVOc1JDeFJRVUZSTEVWQlEwd3NUMEZCVHl4RlFVTlFMRWxCUVVrc1JVRkRTaXhSUVVGUkxFVkJRVVVzVTBGQlV5eExRVUZMTEdGQlFXRXNkVUpCUVhWQ0xFTkJRVU03UVVGQlFTeEZRVU5vUlN4UFFVRlBMRVZCUTBvc1QwRkJUeXhGUVVOUUxGRkJRVkVzUlVGQlJTeFRRVUZUTEhkQ1FVRjNRaXhoUVVGaExHZENRVUZuUWl4RFFVRkRPMEZCUXpsRkxFTkJRVU03UVVGRlJDeE5RVUZOTEZkQlFWYzdRVUZCUVN4RlFVTm1MRWxCUVVrc1JVRkJSU3hQUVVGUExFVkJRVVVzVVVGQlVTeEZRVUZGTEZOQlFWTXNSMEZCUnl4aFFVRmhMRmRCUVZjc1EwRkJRenRCUVVGQkxFVkJRemxFTEUxQlFVMHNSVUZCUlN4UFFVRlBMRVZCUVVVc1VVRkJVU3hGUVVGRkxGTkJRVk1zWVVGQllTeGhRVUZoTEdGQlFXRXNRMEZCUXp0QlFVRkJMRVZCUXpWRkxFMUJRVTBzUlVGQlJTeFBRVUZQTEVWQlFVVXNVVUZCVVN4RlFVRkZMRk5CUVZNc1RVRkJUU3hoUVVGaExHVkJRV1VzUTBGQlF6dEJRVUZCTEVWQlEzWkZMRkZCUVZFc1JVRkJSU3hQUVVGUExFVkJRVVVzVVVGQlVTeEZRVUZGTEZOQlFWTXNTMEZCU3l4aFFVRmhMRk5CUVZNc1EwRkJRenRCUVVGQkxFVkJRMnhGTEZWQlFWVXNSVUZCUlN4UFFVRlBMRVZCUVVVc1VVRkJVVHRCUVVGQkxFbEJRek5DTEZOQlFWTTdRVUZCUVN4SlFVTlVMR0ZCUVdFN1FVRkJRU3hGUVVObUxFTkJRVU03UVVGRFNEdEJRVVZQTEdGQlFVMHNPRUpCUVRoQ0xFVkJRM2hETEU5QlFVODdRVUZCUVN4RlFVTk9MRkZCUVZFc1JVRkRUQ3hQUVVGUExFVkJRMUFzU1VGQlNTeEZRVU5LTEZGQlFWRXNSVUZCUlN4VFFVRlRMRXRCUVVzc1lVRkJZU3gxUWtGQmRVSXNRMEZCUXp0QlFVRkJMRVZCUTJoRkxFMUJRVTBzUlVGQlJTeE5RVUZOTzBGQlFVRXNTVUZEV2l4RlFVTkhMRTlCUVU4c1VVRkJVU3hGUVVObUxGTkJRVk1zUlVGRFZDeFJRVUZSTzBGQlFVRXNUVUZEVUN4aFFVRmhPMEZCUVVFc1RVRkRZaXhUUVVGVE8wRkJRVUVzVVVGRFVDeEpRVUZKTzBGQlFVRXNVVUZEU2l4TlFVRk5PMEZCUVVFc1VVRkRUaXhOUVVGTk8wRkJRVUVzVVVGRFRpeFJRVUZSTzBGQlFVRXNVVUZEVWl4VlFVRlZPMEZCUVVFc1RVRkRXanRCUVVGQkxFbEJRMFlzUTBGQlF6dEJRVUZCTEVsQlEwZ3NSVUZCUlN4TlFVRk5MRVZCUVVVc1QwRkJUeXhSUVVGUkxFTkJRVU1zUlVGQlJTeFJRVUZSTzBGQlFVRXNUVUZEYkVNc1lVRkJZVHRCUVVGQkxFMUJRMklzVTBGQlV5eERRVUZETzBGQlFVRXNTVUZEV2l4RFFVRkRPMEZCUVVFc1JVRkRTQ3hEUVVGRE8wRkJRVUVzUlVGRFJDeFBRVUZQTEVWQlFVVXNUMEZCVHl4RlFVRkZMRk5CUVZNc1JVRkJSU3hUUVVGVExFVkJRVVVzVVVGQlVUdEJRVUZCTEVsQlF6bERMR0ZCUVdFN1FVRkJRU3hKUVVOaUxGTkJRVk03UVVGQlFTeEZRVU5ZTEVOQlFVTTdRVUZEU0N4RFFVRkRMRVZCUTBFc1VVRkJVU3hyUWtGQmEwSTdRVUZGZEVJc1lVRkJUU3c0UWtGQk9FSXNSVUZCUlN4UFFVRlBPMEZCUVVFc1JVRkRiRVFzVVVGQlVTeEZRVU5NTEU5QlFVOHNSVUZEVUN4SlFVRkpMRVZCUTBvc1VVRkJVU3hGUVVGRkxGTkJRVk1zUzBGQlN5eGhRVUZoTEhWQ1FVRjFRaXhEUVVGRE8wRkJRVUVzUlVGRGFFVXNUMEZCVHl4RlFVTktMRTlCUVU4c1JVRkRVQ3hSUVVGUkxFVkJRVVVzVTBGQlV5eHRRa0ZCYlVJc1lVRkJZU3huUWtGQlowSXNRMEZCUXp0QlFVTjZSU3hEUVVGRE8wRkJSVTBzWVVGQlRTdzBRa0ZCTkVJc1JVRkJSU3hQUVVGUE8wRkJRVUVzUlVGRGFFUXNVVUZCVVN4RlFVTk1MRTlCUVU4c1JVRkRVQ3hKUVVGSkxFVkJRMG9zVVVGQlVTeEZRVUZGTEZOQlFWTXNTMEZCU3l4aFFVRmhMSFZDUVVGMVFpeERRVUZETzBGQlFVRXNSVUZEYUVVc1UwRkJVeXhGUVVGRkxFOUJRVThzUlVGQlJTeFJRVUZSTzBGQlFVRXNTVUZETVVJc1UwRkJVenRCUVVGQkxFbEJRMVFzWVVGQllUdEJRVUZCTEVWQlEyWXNRMEZCUXp0QlFVTklMRU5CUVVNN1FVRkZUU3hoUVVGTkxHOUNRVUZ2UWl4RlFVTTVRaXhQUVVGUE8wRkJRVUVzUlVGRFRpeEpRVUZKTEVWQlFVVXNUMEZCVHl4RlFVRkZMRk5CUVZNc1JVRkJSU3hSUVVGUkxFVkJRVVVzVTBGQlV5eEhRVUZITEdGQlFXRXNWMEZCVnl4RFFVRkRPMEZCUVVFc1JVRkRla1VzVFVGQlRTeEZRVU5JTEU5QlFVOHNSVUZEVUN4SlFVRkpMRU5CUVVNc1JVRkRUQ3hUUVVGVExFVkJRMVFzVVVGQlVTeEZRVUZGTEZOQlFWTXNZVUZCWVN4aFFVRmhMR0ZCUVdFc1EwRkJRenRCUVVGQkxFVkJRemxFTEUxQlFVMHNSVUZEU0N4UFFVRlBMRVZCUTFBc1NVRkJTU3hGUVVOS0xFbEJRVWtzU1VGQlNTeEZRVU5TTEVsQlFVa3NZMEZCWXl4RlFVTnNRaXhUUVVGVExFVkJRMVFzVVVGQlVTeEZRVUZGTEZOQlFWTXNUVUZCVFN4aFFVRmhMR1ZCUVdVc1EwRkJRenRCUVVGQkxFVkJRM3BFTEZGQlFWRXNSVUZEVEN4UFFVRlBMRVZCUTFBc1UwRkJVeXhGUVVOVUxGRkJRVkVzUlVGQlJTeFRRVUZUTEV0QlFVc3NZVUZCWVN4VFFVRlRMRU5CUVVNN1FVRkJRU3hGUVVOc1JDeFZRVUZWTEVWQlFVVXNUMEZCVHl4RlFVRkZMRWxCUVVrc1EwRkJReXhGUVVGRkxGTkJRVk1zUlVGQlJTeFJRVUZSTzBGQlFVRXNTVUZETjBNc1UwRkJVenRCUVVGQkxFbEJRMVFzWVVGQllUdEJRVUZCTEVWQlEyWXNRMEZCUXp0QlFVTklMRU5CUVVNc1JVRkRRU3hSUVVGUkxHOUNRVUZ2UWp0QlFVVjRRaXhoUVVGTkxEUkNRVUUwUWl4RlFVTjBReXhQUVVGUE8wRkJRVUVzUlVGRFRpeFJRVUZSTEVWQlEwd3NUMEZCVHl4RlFVTlFMRWxCUVVrc1JVRkRTaXhSUVVGUkxFVkJRVVVzVTBGQlV5eExRVUZMTEdGQlFXRXNkVUpCUVhWQ0xFTkJRVU03UVVGQlFTeEZRVU5vUlN4TlFVRk5MRVZCUTBnc1QwRkJUenRCUVVGQkxFbEJRMDRzU1VGQlNTeEZRVUZGTEU5QlFVOHNSVUZCUlN4UlFVRlJMRVZCUVVVc1UwRkJVeXhIUVVGSExHRkJRV0VzVjBGQlZ5eERRVUZETzBGQlFVRXNTVUZET1VRc1RVRkJUU3hGUVVOSUxFOUJRVThzUlVGRFVDeFJRVUZSTEVWQlFVVXNVMEZCVXl4aFFVRmhMR0ZCUVdFc1lVRkJZU3hEUVVGRE8wRkJRVUVzU1VGRE9VUXNUVUZCVFN4RlFVTklMRTlCUVU4c1JVRkRVQ3hSUVVGUkxFVkJRVVVzVTBGQlV5eE5RVUZOTEdGQlFXRXNaVUZCWlN4RFFVRkRPMEZCUVVFc1NVRkRla1FzVVVGQlVTeEZRVUZGTEU5QlFVOHNSVUZCUlN4UlFVRlJMRVZCUVVVc1UwRkJVeXhMUVVGTExHRkJRV0VzVTBGQlV5eERRVUZETzBGQlFVRXNTVUZEYkVVc1ZVRkJWU3hGUVVGRkxFOUJRVThzUlVGQlJTeFJRVUZSTzBGQlFVRXNUVUZETTBJc1UwRkJVenRCUVVGQkxFMUJRMVFzWVVGQllUdEJRVUZCTEVsQlEyWXNRMEZCUXp0QlFVRkJMRVZCUTBnc1EwRkJReXhGUVVOQkxGRkJRVkVzUlVGQlJTeGhRVUZoTEhGQ1FVRnhRaXhEUVVGRE8wRkJRVUVzUlVGRGFFUXNUMEZCVHl4RlFVTktMRTlCUVU4c1JVRkRVQ3hUUVVGVExFVkJRMVFzVVVGQlVTeEZRVUZGTEdGQlFXRXNkMEpCUVhkQ0xFTkJRVU03UVVGRGNrUXNRMEZCUXl4RlFVTkJMRkZCUVZFc2MwSkJRWE5DT3lJc0ltNWhiV1Z6SWpwYlhYMD0=",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 18053
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 8,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.760Z",
        "time": 21,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/components/movie-details/movie-edit-form.tsx",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/components/movie-details/movie-manager.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"188d-i7CkKmo1chvc2q6teV3gZgIHJ+0\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "12148"
            }
          ],
          "content": {
            "size": 12148,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IHsgY3JlYXRlSG90Q29udGV4dCBhcyBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQgfSBmcm9tICIvQHZpdGUvY2xpZW50IjtpbXBvcnQubWV0YS5ob3QgPSBfX3ZpdGVfX2NyZWF0ZUhvdENvbnRleHQoIi9zcmMvY29tcG9uZW50cy9tb3ZpZS1kZXRhaWxzL21vdmllLWVkaXQtZm9ybS50c3giKTtpbXBvcnQgX192aXRlX19janNJbXBvcnQwX3JlYWN0X2pzeERldlJ1bnRpbWUgZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL3JlYWN0X2pzeC1kZXYtcnVudGltZS5qcz92PTBiYjY5ZDczIjsgY29uc3QganN4REVWID0gX192aXRlX19janNJbXBvcnQwX3JlYWN0X2pzeERldlJ1bnRpbWVbImpzeERFViJdOwppbXBvcnQgKiBhcyBSZWZyZXNoUnVudGltZSBmcm9tICIvQHJlYWN0LXJlZnJlc2giOwpjb25zdCBpbldlYldvcmtlciA9IHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSAhPT0gInVuZGVmaW5lZCIgJiYgc2VsZiBpbnN0YW5jZW9mIFdvcmtlckdsb2JhbFNjb3BlOwpsZXQgcHJldlJlZnJlc2hSZWc7CmxldCBwcmV2UmVmcmVzaFNpZzsKaWYgKGltcG9ydC5tZXRhLmhvdCAmJiAhaW5XZWJXb3JrZXIpIHsKICBpZiAoIXdpbmRvdy4kUmVmcmVzaFJlZyQpIHsKICAgIHRocm93IG5ldyBFcnJvcigKICAgICAgIkB2aXRlanMvcGx1Z2luLXJlYWN0IGNhbid0IGRldGVjdCBwcmVhbWJsZS4gU29tZXRoaW5nIGlzIHdyb25nLiIKICAgICk7CiAgfQogIHByZXZSZWZyZXNoUmVnID0gd2luZG93LiRSZWZyZXNoUmVnJDsKICBwcmV2UmVmcmVzaFNpZyA9IHdpbmRvdy4kUmVmcmVzaFNpZyQ7CiAgd2luZG93LiRSZWZyZXNoUmVnJCA9IFJlZnJlc2hSdW50aW1lLmdldFJlZnJlc2hSZWcoIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9tb3ZpZS1kZXRhaWxzL21vdmllLWVkaXQtZm9ybS50c3giKTsKICB3aW5kb3cuJFJlZnJlc2hTaWckID0gUmVmcmVzaFJ1bnRpbWUuY3JlYXRlU2lnbmF0dXJlRnVuY3Rpb25Gb3JUcmFuc2Zvcm07Cn0KdmFyIF9zID0gJFJlZnJlc2hTaWckKCk7CmltcG9ydCBzdHlsZWQgZnJvbSAiL25vZGVfbW9kdWxlcy8udml0ZS9kZXBzL3N0eWxlZC1jb21wb25lbnRzLmpzP3Y9MGJiNjlkNzMiOwppbXBvcnQgeyB1c2VNb3ZpZUVkaXRGb3JtIH0gZnJvbSAiL3NyYy9ob29rcy91c2UtbW92aWUtZWRpdC1mb3JtLnRzIjsKaW1wb3J0IHsgU0J1dHRvbiB9IGZyb20gIi9zcmMvc3R5bGVzL3N0eWxlZC1jb21wb25lbnRzLnRzIjsKaW1wb3J0IFZhbGlkYXRpb25FcnJvckRpc3BsYXkgZnJvbSAiL3NyYy9jb21wb25lbnRzL3ZhbGlkYXRpb24tZXJyb3ItZGlzcGxheS50c3giOwppbXBvcnQgeyBNb3ZpZUlucHV0IH0gZnJvbSAiL3NyYy9jb21wb25lbnRzL21vdmllLWZvcm0vaW5kZXgudHMiOwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNb3ZpZUVkaXRGb3JtKHsgbW92aWUsIG9uQ2FuY2VsIH0pIHsKICBfcygpOwogIGNvbnN0IHsKICAgIG1vdmllTmFtZSwKICAgIHNldE1vdmllTmFtZSwKICAgIG1vdmllWWVhciwKICAgIHNldE1vdmllWWVhciwKICAgIG1vdmllUmF0aW5nLAogICAgc2V0TW92aWVSYXRpbmcsCiAgICBoYW5kbGVVcGRhdGVNb3ZpZSwKICAgIG1vdmllTG9hZGluZywKICAgIHZhbGlkYXRpb25FcnJvciwKICAgIG1vdmllRGlyZWN0b3IsCiAgICBzZXRNb3ZpZURpcmVjdG9yCiAgfSA9IHVzZU1vdmllRWRpdEZvcm0obW92aWUpOwogIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4REVWKCJkaXYiLCB7ICJkYXRhLXRlc3RpZCI6ICJtb3ZpZS1lZGl0LWZvcm0tY29tcCIsIGNoaWxkcmVuOiBbCiAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKFNTdWJ0aXRsZSwgeyBjaGlsZHJlbjogIkVkaXQgTW92aWUiIH0sIHZvaWQgMCwgZmFsc2UsIHsKICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtZGV0YWlscy9tb3ZpZS1lZGl0LWZvcm0udHN4IiwKICAgICAgbGluZU51bWJlcjogNDksCiAgICAgIGNvbHVtbk51bWJlcjogNwogICAgfSwgdGhpcyksCiAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKFZhbGlkYXRpb25FcnJvckRpc3BsYXksIHsgdmFsaWRhdGlvbkVycm9yIH0sIHZvaWQgMCwgZmFsc2UsIHsKICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtZGV0YWlscy9tb3ZpZS1lZGl0LWZvcm0udHN4IiwKICAgICAgbGluZU51bWJlcjogNTEsCiAgICAgIGNvbHVtbk51bWJlcjogNwogICAgfSwgdGhpcyksCiAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKAogICAgICBNb3ZpZUlucHV0LAogICAgICB7CiAgICAgICAgdHlwZTogInRleHQiLAogICAgICAgIHZhbHVlOiBtb3ZpZU5hbWUsCiAgICAgICAgcGxhY2Vob2xkZXI6ICJNb3ZpZSBuYW1lIiwKICAgICAgICBvbkNoYW5nZTogKGUpID0+IHNldE1vdmllTmFtZShlLnRhcmdldC52YWx1ZSkKICAgICAgfSwKICAgICAgdm9pZCAwLAogICAgICBmYWxzZSwKICAgICAgewogICAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWRldGFpbHMvbW92aWUtZWRpdC1mb3JtLnRzeCIsCiAgICAgICAgbGluZU51bWJlcjogNTMsCiAgICAgICAgY29sdW1uTnVtYmVyOiA3CiAgICAgIH0sCiAgICAgIHRoaXMKICAgICksCiAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKAogICAgICBNb3ZpZUlucHV0LAogICAgICB7CiAgICAgICAgdHlwZTogIm51bWJlciIsCiAgICAgICAgdmFsdWU6IG1vdmllWWVhciwKICAgICAgICBwbGFjZWhvbGRlcjogIk1vdmllIHllYXIiLAogICAgICAgIG9uQ2hhbmdlOiAoZSkgPT4gc2V0TW92aWVZZWFyKE51bWJlcihlLnRhcmdldC52YWx1ZSkpCiAgICAgIH0sCiAgICAgIHZvaWQgMCwKICAgICAgZmFsc2UsCiAgICAgIHsKICAgICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9tb3ZpZS1kZXRhaWxzL21vdmllLWVkaXQtZm9ybS50c3giLAogICAgICAgIGxpbmVOdW1iZXI6IDU5LAogICAgICAgIGNvbHVtbk51bWJlcjogNwogICAgICB9LAogICAgICB0aGlzCiAgICApLAogICAgLyogQF9fUFVSRV9fICovIGpzeERFVigKICAgICAgTW92aWVJbnB1dCwKICAgICAgewogICAgICAgIHR5cGU6ICJudW1iZXIiLAogICAgICAgIHZhbHVlOiBtb3ZpZVJhdGluZywKICAgICAgICBwbGFjZWhvbGRlcjogIk1vdmllIHJhdGluZyIsCiAgICAgICAgb25DaGFuZ2U6IChlKSA9PiBzZXRNb3ZpZVJhdGluZyhOdW1iZXIoZS50YXJnZXQudmFsdWUpKQogICAgICB9LAogICAgICB2b2lkIDAsCiAgICAgIGZhbHNlLAogICAgICB7CiAgICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtZGV0YWlscy9tb3ZpZS1lZGl0LWZvcm0udHN4IiwKICAgICAgICBsaW5lTnVtYmVyOiA2NSwKICAgICAgICBjb2x1bW5OdW1iZXI6IDcKICAgICAgfSwKICAgICAgdGhpcwogICAgKSwKICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoCiAgICAgIE1vdmllSW5wdXQsCiAgICAgIHsKICAgICAgICB0eXBlOiAidGV4dCIsCiAgICAgICAgdmFsdWU6IG1vdmllRGlyZWN0b3IsCiAgICAgICAgcGxhY2Vob2xkZXI6ICJNb3ZpZSBkaXJlY3RvciIsCiAgICAgICAgb25DaGFuZ2U6IChlKSA9PiBzZXRNb3ZpZURpcmVjdG9yKGUudGFyZ2V0LnZhbHVlKQogICAgICB9LAogICAgICB2b2lkIDAsCiAgICAgIGZhbHNlLAogICAgICB7CiAgICAgICAgZmlsZU5hbWU6ICIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtZGV0YWlscy9tb3ZpZS1lZGl0LWZvcm0udHN4IiwKICAgICAgICBsaW5lTnVtYmVyOiA3MSwKICAgICAgICBjb2x1bW5OdW1iZXI6IDcKICAgICAgfSwKICAgICAgdGhpcwogICAgKSwKICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hERVYoCiAgICAgIFNCdXR0b24sCiAgICAgIHsKICAgICAgICAiZGF0YS10ZXN0aWQiOiAidXBkYXRlLW1vdmllIiwKICAgICAgICBvbkNsaWNrOiBoYW5kbGVVcGRhdGVNb3ZpZSwKICAgICAgICBkaXNhYmxlZDogbW92aWVMb2FkaW5nLAogICAgICAgIGNoaWxkcmVuOiBtb3ZpZUxvYWRpbmcgPyAiVXBkYXRpbmcuLi4iIDogIlVwZGF0ZSBNb3ZpZSIKICAgICAgfSwKICAgICAgdm9pZCAwLAogICAgICBmYWxzZSwKICAgICAgewogICAgICAgIGZpbGVOYW1lOiAiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWRldGFpbHMvbW92aWUtZWRpdC1mb3JtLnRzeCIsCiAgICAgICAgbGluZU51bWJlcjogNzcsCiAgICAgICAgY29sdW1uTnVtYmVyOiA3CiAgICAgIH0sCiAgICAgIHRoaXMKICAgICksCiAgICAvKiBAX19QVVJFX18gKi8ganN4REVWKFNCdXR0b24sIHsgImRhdGEtdGVzdGlkIjogImNhbmNlbCIsIG9uQ2xpY2s6IG9uQ2FuY2VsLCBjaGlsZHJlbjogIkNhbmNlbCIgfSwgdm9pZCAwLCBmYWxzZSwgewogICAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9tb3ZpZS1kZXRhaWxzL21vdmllLWVkaXQtZm9ybS50c3giLAogICAgICBsaW5lTnVtYmVyOiA4NCwKICAgICAgY29sdW1uTnVtYmVyOiA3CiAgICB9LCB0aGlzKQogIF0gfSwgdm9pZCAwLCB0cnVlLCB7CiAgICBmaWxlTmFtZTogIi9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9tb3ZpZS1kZXRhaWxzL21vdmllLWVkaXQtZm9ybS50c3giLAogICAgbGluZU51bWJlcjogNDgsCiAgICBjb2x1bW5OdW1iZXI6IDUKICB9LCB0aGlzKTsKfQpfcyhNb3ZpZUVkaXRGb3JtLCAiUHBZZ2JWa2xpMks4QW5xbVBYNkx2bVBLM05zPSIsIGZhbHNlLCBmdW5jdGlvbigpIHsKICByZXR1cm4gW3VzZU1vdmllRWRpdEZvcm1dOwp9KTsKX2MgPSBNb3ZpZUVkaXRGb3JtOwpjb25zdCBTU3VidGl0bGUgPSBzdHlsZWQuaDJgCiAgY29sb3I6ICMzMzM7CiAgZm9udC1zaXplOiAycmVtOwogIG1hcmdpbi1ib3R0b206IDEwcHg7CmA7Cl9jMiA9IFNTdWJ0aXRsZTsKdmFyIF9jLCBfYzI7CiRSZWZyZXNoUmVnJChfYywgIk1vdmllRWRpdEZvcm0iKTsKJFJlZnJlc2hSZWckKF9jMiwgIlNTdWJ0aXRsZSIpOwppZiAoaW1wb3J0Lm1ldGEuaG90ICYmICFpbldlYldvcmtlcikgewogIHdpbmRvdy4kUmVmcmVzaFJlZyQgPSBwcmV2UmVmcmVzaFJlZzsKICB3aW5kb3cuJFJlZnJlc2hTaWckID0gcHJldlJlZnJlc2hTaWc7Cn0KaWYgKGltcG9ydC5tZXRhLmhvdCAmJiAhaW5XZWJXb3JrZXIpIHsKICBSZWZyZXNoUnVudGltZS5fX2htcl9pbXBvcnQoaW1wb3J0Lm1ldGEudXJsKS50aGVuKChjdXJyZW50RXhwb3J0cykgPT4gewogICAgUmVmcmVzaFJ1bnRpbWUucmVnaXN0ZXJFeHBvcnRzRm9yUmVhY3RSZWZyZXNoKCIvVXNlcnMvbXVyYXQub3pjYW4vc2Vvbi9wbGF5d3JpZ2h0LXV0aWxzL3NhbXBsZS1hcHAvZnJvbnRlbmQvc3JjL2NvbXBvbmVudHMvbW92aWUtZGV0YWlscy9tb3ZpZS1lZGl0LWZvcm0udHN4IiwgY3VycmVudEV4cG9ydHMpOwogICAgaW1wb3J0Lm1ldGEuaG90LmFjY2VwdCgobmV4dEV4cG9ydHMpID0+IHsKICAgICAgaWYgKCFuZXh0RXhwb3J0cykgcmV0dXJuOwogICAgICBjb25zdCBpbnZhbGlkYXRlTWVzc2FnZSA9IFJlZnJlc2hSdW50aW1lLnZhbGlkYXRlUmVmcmVzaEJvdW5kYXJ5QW5kRW5xdWV1ZVVwZGF0ZSgiL1VzZXJzL211cmF0Lm96Y2FuL3Nlb24vcGxheXdyaWdodC11dGlscy9zYW1wbGUtYXBwL2Zyb250ZW5kL3NyYy9jb21wb25lbnRzL21vdmllLWRldGFpbHMvbW92aWUtZWRpdC1mb3JtLnRzeCIsIGN1cnJlbnRFeHBvcnRzLCBuZXh0RXhwb3J0cyk7CiAgICAgIGlmIChpbnZhbGlkYXRlTWVzc2FnZSkgaW1wb3J0Lm1ldGEuaG90LmludmFsaWRhdGUoaW52YWxpZGF0ZU1lc3NhZ2UpOwogICAgfSk7CiAgfSk7Cn0KCi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnRZWEJ3YVc1bmN5STZJa0ZCTmtKTk96czdPenM3T3pzN096czdPenM3T3p0QlFUZENUaXhQUVVGUFFTeFpRVUZaTzBGQlEyNUNMRk5CUVZORExIZENRVUYzUWp0QlFVTnFReXhUUVVGVFF5eGxRVUZsTzBGQlJYaENMRTlCUVU5RExEUkNRVUUwUWp0QlFVTnVReXhUUVVGVFF5eHJRa0ZCYTBJN1FVRlBNMElzZDBKQlFYZENReXhqUVVGakxFVkJRVVZETEU5QlFVOURMRk5CUVRaQ0xFZEJRVWM3UVVGQlFVTXNTMEZCUVR0QlFVTTNSU3hSUVVGTk8wRkJRVUVzU1VGRFNrTTdRVUZCUVVFc1NVRkRRVU03UVVGQlFVRXNTVUZEUVVNN1FVRkJRVUVzU1VGRFFVTTdRVUZCUVVFc1NVRkRRVU03UVVGQlFVRXNTVUZEUVVNN1FVRkJRVUVzU1VGRFFVTTdRVUZCUVVFc1NVRkRRVU03UVVGQlFVRXNTVUZEUVVNN1FVRkJRVUVzU1VGRFFVTTdRVUZCUVVFc1NVRkRRVU03UVVGQlFVRXNSVUZEUml4SlFVRkpiRUlzYVVKQlFXbENTeXhMUVVGTE8wRkJSVEZDTEZOQlEwVXNkVUpCUVVNc1UwRkJTU3hsUVVGWkxIZENRVU5tTzBGQlFVRXNNa0pCUVVNc1lVRkJWU3d3UWtGQldEdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJMRmRCUVhGQ08wRkJRVUVzU1VGRmNrSXNkVUpCUVVNc01FSkJRWFZDTEcxQ1FVRjRRanRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTEZkQlFYbEVPMEZCUVVFc1NVRkZla1E3UVVGQlFTeE5RVUZETzBGQlFVRTdRVUZCUVN4UlFVTkRMRTFCUVVzN1FVRkJRU3hSUVVOTUxFOUJRVTlITzBGQlFVRkJMRkZCUTFBc1lVRkJXVHRCUVVGQkxGRkJRMW9zVlVGQlZTeERRVUZEVnl4TlFVRk5WaXhoUVVGaFZTeEZRVUZGUXl4UFFVRlBReXhMUVVGTE8wRkJRVUU3UVVGQlFTeE5RVW81UXp0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRXNTVUZKWjBRN1FVRkJRU3hKUVVWb1JEdEJRVUZCTEUxQlFVTTdRVUZCUVR0QlFVRkJMRkZCUTBNc1RVRkJTenRCUVVGQkxGRkJRMHdzVDBGQlQxZzdRVUZCUVVFc1VVRkRVQ3hoUVVGWk8wRkJRVUVzVVVGRFdpeFZRVUZWTEVOQlFVTlRMRTFCUVUxU0xHRkJRV0ZYTEU5QlFVOUlMRVZCUVVWRExFOUJRVTlETEV0QlFVc3NRMEZCUXp0QlFVRkJPMEZCUVVFc1RVRktkRVE3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQkxFbEJTWGRFTzBGQlFVRXNTVUZGZUVRN1FVRkJRU3hOUVVGRE8wRkJRVUU3UVVGQlFTeFJRVU5ETEUxQlFVczdRVUZCUVN4UlFVTk1MRTlCUVU5VU8wRkJRVUZCTEZGQlExQXNZVUZCV1R0QlFVRkJMRkZCUTFvc1ZVRkJWU3hEUVVGRFR5eE5RVUZOVGl4bFFVRmxVeXhQUVVGUFNDeEZRVUZGUXl4UFFVRlBReXhMUVVGTExFTkJRVU03UVVGQlFUdEJRVUZCTEUxQlNuaEVPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVN4SlFVa3dSRHRCUVVGQkxFbEJSVEZFTzBGQlFVRXNUVUZCUXp0QlFVRkJPMEZCUVVFc1VVRkRReXhOUVVGTE8wRkJRVUVzVVVGRFRDeFBRVUZQU2p0QlFVRkJRU3hSUVVOUUxHRkJRVms3UVVGQlFTeFJRVU5hTEZWQlFWVXNRMEZCUTBVc1RVRkJUVVFzYVVKQlFXbENReXhGUVVGRlF5eFBRVUZQUXl4TFFVRkxPMEZCUVVFN1FVRkJRU3hOUVVwc1JEdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRVHRCUVVGQk8wRkJRVUVzU1VGSmIwUTdRVUZCUVN4SlFVVndSRHRCUVVGQkxFMUJRVU03UVVGQlFUdEJRVUZCTEZGQlEwTXNaVUZCV1R0QlFVRkJMRkZCUTFvc1UwRkJVMUE3UVVGQlFVRXNVVUZEVkN4VlFVRlZRenRCUVVGQlFTeFJRVVZVUVN4NVFrRkJaU3huUWtGQlowSTdRVUZCUVR0QlFVRkJMRTFCVEd4RE8wRkJRVUU3UVVGQlFUdEJRVUZCTzBGQlFVRTdRVUZCUVR0QlFVRkJPMEZCUVVFN1FVRkJRU3hKUVUxQk8wRkJRVUVzU1VGRFFTeDFRa0ZCUXl4WFFVRlJMR1ZCUVZrc1ZVRkJVeXhUUVVGVFZDeFZRVUZUTEhOQ1FVRm9SRHRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTEZkQlJVRTdRVUZCUVN4UFFYUkRSanRCUVVGQk8wRkJRVUU3UVVGQlFUdEJRVUZCTEZOQmRVTkJPMEZCUlVvN1FVRkJRME1zUjBGNlJIVkNTQ3hsUVVGaE8wRkJRVUVzVlVGaEwwSktMR2RDUVVGblFqdEJRVUZCTzBGQlFVRjFRaXhMUVdKRmJrSTdRVUV5UkhoQ0xFMUJRVTF2UWl4WlFVRlpla0lzVDBGQlR6QkNPMEZCUVVGQk8wRkJRVUZCTzBGQlFVRkJPMEZCUVVGQk8wRkJTWGhDUXl4TlFVcExSanRCUVVGVExFbEJRVUZFTEVsQlFVRkhPMEZCUVVGRExHRkJRVUZLTEVsQlFVRTdRVUZCUVVrc1lVRkJRVVFzUzBGQlFTSXNJbTVoYldWeklqcGJJbk4wZVd4bFpDSXNJblZ6WlUxdmRtbGxSV1JwZEVadmNtMGlMQ0pUUW5WMGRHOXVJaXdpVm1Gc2FXUmhkR2x2YmtWeWNtOXlSR2x6Y0d4aGVTSXNJazF2ZG1sbFNXNXdkWFFpTENKTmIzWnBaVVZrYVhSR2IzSnRJaXdpYlc5MmFXVWlMQ0p2YmtOaGJtTmxiQ0lzSWw5eklpd2liVzkyYVdWT1lXMWxJaXdpYzJWMFRXOTJhV1ZPWVcxbElpd2liVzkyYVdWWlpXRnlJaXdpYzJWMFRXOTJhV1ZaWldGeUlpd2liVzkyYVdWU1lYUnBibWNpTENKelpYUk5iM1pwWlZKaGRHbHVaeUlzSW1oaGJtUnNaVlZ3WkdGMFpVMXZkbWxsSWl3aWJXOTJhV1ZNYjJGa2FXNW5JaXdpZG1Gc2FXUmhkR2x2YmtWeWNtOXlJaXdpYlc5MmFXVkVhWEpsWTNSdmNpSXNJbk5sZEUxdmRtbGxSR2x5WldOMGIzSWlMQ0psSWl3aWRHRnlaMlYwSWl3aWRtRnNkV1VpTENKT2RXMWlaWElpTENKZll5SXNJbE5UZFdKMGFYUnNaU0lzSW1neUlpd2lYMk15SWl3aUpGSmxabkpsYzJoU1pXY2tJbDBzSW1sbmJtOXlaVXhwYzNRaU9sdGRMQ0p6YjNWeVkyVnpJanBiSW0xdmRtbGxMV1ZrYVhRdFptOXliUzUwYzNnaVhTd2ljMjkxY21ObGMwTnZiblJsYm5RaU9sc2lhVzF3YjNKMElITjBlV3hsWkNCbWNtOXRJQ2R6ZEhsc1pXUXRZMjl0Y0c5dVpXNTBjeWRjYm1sdGNHOXlkQ0I3SUhWelpVMXZkbWxsUldScGRFWnZjbTBnZlNCbWNtOXRJQ2RBYUc5dmEzTXZkWE5sTFcxdmRtbGxMV1ZrYVhRdFptOXliU2RjYm1sdGNHOXlkQ0I3SUZOQ2RYUjBiMjRnZlNCbWNtOXRJQ2RBYzNSNWJHVnpMM04wZVd4bFpDMWpiMjF3YjI1bGJuUnpKMXh1YVcxd2IzSjBJSFI1Y0dVZ2V5Qk5iM1pwWlNCOUlHWnliMjBnSjBCemFHRnlaV1F2ZEhsd1pYTXZiVzkyYVdVdGRIbHdaWE1uWEc1cGJYQnZjblFnVm1Gc2FXUmhkR2x2YmtWeWNtOXlSR2x6Y0d4aGVTQm1jbTl0SUNkQVkyOXRjRzl1Wlc1MGN5OTJZV3hwWkdGMGFXOXVMV1Z5Y205eUxXUnBjM0JzWVhrblhHNXBiWEJ2Y25RZ2V5Qk5iM1pwWlVsdWNIVjBJSDBnWm5KdmJTQW5RR052YlhCdmJtVnVkSE12Ylc5MmFXVXRabTl5YlNkY2JseHVkSGx3WlNCTmIzWnBaVVZrYVhSR2IzSnRVSEp2Y0hNZ1BTQlNaV0ZrYjI1c2VUeDdYRzRnSUcxdmRtbGxPaUJOYjNacFpWeHVJQ0J2YmtOaGJtTmxiRG9nS0NrZ1BUNGdkbTlwWkZ4dWZUNWNibHh1Wlhod2IzSjBJR1JsWm1GMWJIUWdablZ1WTNScGIyNGdUVzkyYVdWRlpHbDBSbTl5YlNoN0lHMXZkbWxsTENCdmJrTmhibU5sYkNCOU9pQk5iM1pwWlVWa2FYUkdiM0p0VUhKdmNITXBJSHRjYmlBZ1kyOXVjM1FnZTF4dUlDQWdJRzF2ZG1sbFRtRnRaU3hjYmlBZ0lDQnpaWFJOYjNacFpVNWhiV1VzWEc0Z0lDQWdiVzkyYVdWWlpXRnlMRnh1SUNBZ0lITmxkRTF2ZG1sbFdXVmhjaXhjYmlBZ0lDQnRiM1pwWlZKaGRHbHVaeXhjYmlBZ0lDQnpaWFJOYjNacFpWSmhkR2x1Wnl4Y2JpQWdJQ0JvWVc1a2JHVlZjR1JoZEdWTmIzWnBaU3hjYmlBZ0lDQnRiM1pwWlV4dllXUnBibWNzWEc0Z0lDQWdkbUZzYVdSaGRHbHZia1Z5Y205eUxGeHVJQ0FnSUcxdmRtbGxSR2x5WldOMGIzSXNYRzRnSUNBZ2MyVjBUVzkyYVdWRWFYSmxZM1J2Y2x4dUlDQjlJRDBnZFhObFRXOTJhV1ZGWkdsMFJtOXliU2h0YjNacFpTbGNibHh1SUNCeVpYUjFjbTRnS0Z4dUlDQWdJRHhrYVhZZ1pHRjBZUzEwWlhOMGFXUTlYQ0p0YjNacFpTMWxaR2wwTFdadmNtMHRZMjl0Y0Z3aVBseHVJQ0FnSUNBZ1BGTlRkV0owYVhSc1pUNUZaR2wwSUUxdmRtbGxQQzlUVTNWaWRHbDBiR1UrWEc1Y2JpQWdJQ0FnSUR4V1lXeHBaR0YwYVc5dVJYSnliM0pFYVhOd2JHRjVJSFpoYkdsa1lYUnBiMjVGY25KdmNqMTdkbUZzYVdSaGRHbHZia1Z5Y205eWZTQXZQbHh1WEc0Z0lDQWdJQ0E4VFc5MmFXVkpibkIxZEZ4dUlDQWdJQ0FnSUNCMGVYQmxQVndpZEdWNGRGd2lYRzRnSUNBZ0lDQWdJSFpoYkhWbFBYdHRiM1pwWlU1aGJXVjlYRzRnSUNBZ0lDQWdJSEJzWVdObGFHOXNaR1Z5UFZ3aVRXOTJhV1VnYm1GdFpWd2lYRzRnSUNBZ0lDQWdJRzl1UTJoaGJtZGxQWHNvWlNrZ1BUNGdjMlYwVFc5MmFXVk9ZVzFsS0dVdWRHRnlaMlYwTG5aaGJIVmxLWDFjYmlBZ0lDQWdJQzgrWEc0Z0lDQWdJQ0E4VFc5MmFXVkpibkIxZEZ4dUlDQWdJQ0FnSUNCMGVYQmxQVndpYm5WdFltVnlYQ0pjYmlBZ0lDQWdJQ0FnZG1Gc2RXVTllMjF2ZG1sbFdXVmhjbjFjYmlBZ0lDQWdJQ0FnY0d4aFkyVm9iMnhrWlhJOVhDSk5iM1pwWlNCNVpXRnlYQ0pjYmlBZ0lDQWdJQ0FnYjI1RGFHRnVaMlU5ZXlobEtTQTlQaUJ6WlhSTmIzWnBaVmxsWVhJb1RuVnRZbVZ5S0dVdWRHRnlaMlYwTG5aaGJIVmxLU2w5WEc0Z0lDQWdJQ0F2UGx4dUlDQWdJQ0FnUEUxdmRtbGxTVzV3ZFhSY2JpQWdJQ0FnSUNBZ2RIbHdaVDFjSW01MWJXSmxjbHdpWEc0Z0lDQWdJQ0FnSUhaaGJIVmxQWHR0YjNacFpWSmhkR2x1WjMxY2JpQWdJQ0FnSUNBZ2NHeGhZMlZvYjJ4a1pYSTlYQ0pOYjNacFpTQnlZWFJwYm1kY0lseHVJQ0FnSUNBZ0lDQnZia05vWVc1blpUMTdLR1VwSUQwK0lITmxkRTF2ZG1sbFVtRjBhVzVuS0U1MWJXSmxjaWhsTG5SaGNtZGxkQzUyWVd4MVpTa3BmVnh1SUNBZ0lDQWdMejVjYmlBZ0lDQWdJRHhOYjNacFpVbHVjSFYwWEc0Z0lDQWdJQ0FnSUhSNWNHVTlYQ0owWlhoMFhDSmNiaUFnSUNBZ0lDQWdkbUZzZFdVOWUyMXZkbWxsUkdseVpXTjBiM0o5WEc0Z0lDQWdJQ0FnSUhCc1lXTmxhRzlzWkdWeVBWd2lUVzkyYVdVZ1pHbHlaV04wYjNKY0lseHVJQ0FnSUNBZ0lDQnZia05vWVc1blpUMTdLR1VwSUQwK0lITmxkRTF2ZG1sbFJHbHlaV04wYjNJb1pTNTBZWEpuWlhRdWRtRnNkV1VwZlZ4dUlDQWdJQ0FnTHo1Y2JpQWdJQ0FnSUR4VFFuVjBkRzl1WEc0Z0lDQWdJQ0FnSUdSaGRHRXRkR1Z6ZEdsa1BWd2lkWEJrWVhSbExXMXZkbWxsWENKY2JpQWdJQ0FnSUNBZ2IyNURiR2xqYXoxN2FHRnVaR3hsVlhCa1lYUmxUVzkyYVdWOVhHNGdJQ0FnSUNBZ0lHUnBjMkZpYkdWa1BYdHRiM1pwWlV4dllXUnBibWQ5WEc0Z0lDQWdJQ0ErWEc0Z0lDQWdJQ0FnSUh0dGIzWnBaVXh2WVdScGJtY2dQeUFuVlhCa1lYUnBibWN1TGk0bklEb2dKMVZ3WkdGMFpTQk5iM1pwWlNkOVhHNGdJQ0FnSUNBOEwxTkNkWFIwYjI0K1hHNGdJQ0FnSUNBOFUwSjFkSFJ2YmlCa1lYUmhMWFJsYzNScFpEMWNJbU5oYm1ObGJGd2lJRzl1UTJ4cFkyczllMjl1UTJGdVkyVnNmVDVjYmlBZ0lDQWdJQ0FnUTJGdVkyVnNYRzRnSUNBZ0lDQThMMU5DZFhSMGIyNCtYRzRnSUNBZ1BDOWthWFkrWEc0Z0lDbGNibjFjYmx4dVkyOXVjM1FnVTFOMVluUnBkR3hsSUQwZ2MzUjViR1ZrTG1neVlGeHVJQ0JqYjJ4dmNqb2dJek16TXp0Y2JpQWdabTl1ZEMxemFYcGxPaUF5Y21WdE8xeHVJQ0J0WVhKbmFXNHRZbTkwZEc5dE9pQXhNSEI0TzF4dVlGeHVJbDBzSW1acGJHVWlPaUl2VlhObGNuTXZiWFZ5WVhRdWIzcGpZVzR2YzJWdmJpOXdiR0Y1ZDNKcFoyaDBMWFYwYVd4ekwzTmhiWEJzWlMxaGNIQXZabkp2Ym5SbGJtUXZjM0pqTDJOdmJYQnZibVZ1ZEhNdmJXOTJhV1V0WkdWMFlXbHNjeTl0YjNacFpTMWxaR2wwTFdadmNtMHVkSE40SW4wPQ==",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 12148
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 21,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.837Z",
        "time": 12,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/node_modules/.vite/deps/@asteasolutions_zod-to-openapi.js?v=0bb69d73",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/@fs/Users/murat.ozcan/seon/playwright-utils/sample-app/shared/types/schema.ts"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [
            {
              "name": "v",
              "value": "0bb69d73"
            }
          ],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "max-age=31536000,immutable"
            },
            {
              "name": "etag",
              "value": "W/\"dc4d-6QNdawwKN74Q2Xm1JON1Aia2NmQ\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "56397"
            }
          ],
          "content": {
            "size": 56397,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0ICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvY2h1bmstNE1CTVJJTEEuanM/dj0wYmI2OWQ3MyI7CgovLyAuLi8uLi9ub2RlX21vZHVsZXMvQGFzdGVhc29sdXRpb25zL3pvZC10by1vcGVuYXBpL2Rpc3QvaW5kZXgubWpzCmZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7CiAgdmFyIHQgPSB7fTsKICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMCkKICAgIHRbcF0gPSBzW3BdOwogIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09ICJmdW5jdGlvbiIpCiAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSkKICAgICAgICB0W3BbaV1dID0gc1twW2ldXTsKICAgIH0KICByZXR1cm4gdDsKfQp2YXIgWm9kVHlwZUtleXMgPSB7CiAgWm9kQW55OiAiYW55IiwKICBab2RBcnJheTogImFycmF5IiwKICBab2RCaWdJbnQ6ICJiaWdpbnQiLAogIFpvZEJvb2xlYW46ICJib29sZWFuIiwKICBab2REZWZhdWx0OiAiZGVmYXVsdCIsCiAgWm9kVHJhbnNmb3JtOiAidHJhbnNmb3JtIiwKICBab2RFbnVtOiAiZW51bSIsCiAgWm9kSW50ZXJzZWN0aW9uOiAiaW50ZXJzZWN0aW9uIiwKICBab2RMaXRlcmFsOiAibGl0ZXJhbCIsCiAgWm9kTmV2ZXI6ICJuZXZlciIsCiAgWm9kTnVsbDogIm51bGwiLAogIFpvZE51bGxhYmxlOiAibnVsbGFibGUiLAogIFpvZE51bWJlcjogIm51bWJlciIsCiAgWm9kTm9uT3B0aW9uYWw6ICJub25vcHRpb25hbCIsCiAgWm9kT2JqZWN0OiAib2JqZWN0IiwKICBab2RPcHRpb25hbDogIm9wdGlvbmFsIiwKICBab2RQaXBlOiAicGlwZSIsCiAgWm9kUmVhZG9ubHk6ICJyZWFkb25seSIsCiAgWm9kUmVjb3JkOiAicmVjb3JkIiwKICBab2RTdHJpbmc6ICJzdHJpbmciLAogIFpvZFR1cGxlOiAidHVwbGUiLAogIFpvZFR5cGU6ICJ0eXBlIiwKICBab2RVbmlvbjogInVuaW9uIiwKICBab2REaXNjcmltaW5hdGVkVW5pb246ICJ1bmlvbiIsCiAgWm9kVW5rbm93bjogInVua25vd24iLAogIFpvZFZvaWQ6ICJ2b2lkIiwKICBab2REYXRlOiAiZGF0ZSIKfTsKZnVuY3Rpb24gaXNab2RUeXBlKHNjaGVtYSwgdHlwZU5hbWVzKSB7CiAgY29uc3QgdHlwZU5hbWVzQXJyYXkgPSBBcnJheS5pc0FycmF5KHR5cGVOYW1lcykgPyB0eXBlTmFtZXMgOiBbdHlwZU5hbWVzXTsKICByZXR1cm4gdHlwZU5hbWVzQXJyYXkuc29tZSgodHlwZU5hbWUpID0+IHsKICAgIHZhciBfYTsKICAgIGNvbnN0IHR5cGVOYW1lTWF0Y2ggPSAoKF9hID0gc2NoZW1hID09PSBudWxsIHx8IHNjaGVtYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2NoZW1hLmRlZikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnR5cGUpID09PSBab2RUeXBlS2V5c1t0eXBlTmFtZV07CiAgICBpZiAodHlwZU5hbWUgPT09ICJab2REaXNjcmltaW5hdGVkVW5pb24iKSB7CiAgICAgIHJldHVybiB0eXBlTmFtZU1hdGNoICYmICJkaXNjcmltaW5hdG9yIiBpbiBzY2hlbWEuZGVmOwogICAgfQogICAgcmV0dXJuIHR5cGVOYW1lTWF0Y2g7CiAgfSk7Cn0KZnVuY3Rpb24gaXNBbnlab2RUeXBlKHNjaGVtYSkgewogIHJldHVybiAiZGVmIiBpbiBzY2hlbWE7Cn0KZnVuY3Rpb24gaXNOdWxsYWJsZVNjaGVtYShzY2hlbWEpIHsKICByZXR1cm4gc2NoZW1hLnNhZmVQYXJzZShudWxsKS5zdWNjZXNzOwp9CmZ1bmN0aW9uIGlzT3B0aW9uYWxTY2hlbWEoc2NoZW1hKSB7CiAgcmV0dXJuIHNjaGVtYS5zYWZlUGFyc2Uodm9pZCAwKS5zdWNjZXNzOwp9CnZhciAkWm9kUmVnaXN0cnkgPSBjbGFzcyB7CiAgY29uc3RydWN0b3IoKSB7CiAgICB0aGlzLl9tYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpOwogICAgdGhpcy5faWRtYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpOwogIH0KICBhZGQoc2NoZW1hLCAuLi5fbWV0YSkgewogICAgY29uc3QgbWV0YSA9IF9tZXRhWzBdOwogICAgdGhpcy5fbWFwLnNldChzY2hlbWEsIG1ldGEpOwogICAgaWYgKG1ldGEgJiYgdHlwZW9mIG1ldGEgPT09ICJvYmplY3QiICYmICJpZCIgaW4gbWV0YSkgewogICAgICBpZiAodGhpcy5faWRtYXAuaGFzKG1ldGEuaWQpKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJRCAke21ldGEuaWR9IGFscmVhZHkgZXhpc3RzIGluIHRoZSByZWdpc3RyeWApOwogICAgICB9CiAgICAgIHRoaXMuX2lkbWFwLnNldChtZXRhLmlkLCBzY2hlbWEpOwogICAgfQogICAgcmV0dXJuIHRoaXM7CiAgfQogIGNsZWFyKCkgewogICAgdGhpcy5fbWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICAgIHRoaXMuX2lkbWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICAgIHJldHVybiB0aGlzOwogIH0KICByZW1vdmUoc2NoZW1hKSB7CiAgICBjb25zdCBtZXRhID0gdGhpcy5fbWFwLmdldChzY2hlbWEpOwogICAgaWYgKG1ldGEgJiYgdHlwZW9mIG1ldGEgPT09ICJvYmplY3QiICYmICJpZCIgaW4gbWV0YSkgewogICAgICB0aGlzLl9pZG1hcC5kZWxldGUobWV0YS5pZCk7CiAgICB9CiAgICB0aGlzLl9tYXAuZGVsZXRlKHNjaGVtYSk7CiAgICByZXR1cm4gdGhpczsKICB9CiAgZ2V0KHNjaGVtYSkgewogICAgY29uc3QgcCA9IHNjaGVtYS5fem9kLnBhcmVudDsKICAgIGlmIChwKSB7CiAgICAgIGNvbnN0IHBtID0geyAuLi50aGlzLmdldChwKSA/PyB7fSB9OwogICAgICBkZWxldGUgcG0uaWQ7CiAgICAgIHJldHVybiB7IC4uLnBtLCAuLi50aGlzLl9tYXAuZ2V0KHNjaGVtYSkgfTsKICAgIH0KICAgIHJldHVybiB0aGlzLl9tYXAuZ2V0KHNjaGVtYSk7CiAgfQogIGhhcyhzY2hlbWEpIHsKICAgIHJldHVybiB0aGlzLl9tYXAuaGFzKHNjaGVtYSk7CiAgfQp9OwpmdW5jdGlvbiByZWdpc3RyeSgpIHsKICByZXR1cm4gbmV3ICRab2RSZWdpc3RyeSgpOwp9CmZ1bmN0aW9uIGlzRXF1YWwoeCwgeSkgewogIGlmICh4ID09PSBudWxsIHx8IHggPT09IHZvaWQgMCB8fCB5ID09PSBudWxsIHx8IHkgPT09IHZvaWQgMCkgewogICAgcmV0dXJuIHggPT09IHk7CiAgfQogIGlmICh4ID09PSB5IHx8IHgudmFsdWVPZigpID09PSB5LnZhbHVlT2YoKSkgewogICAgcmV0dXJuIHRydWU7CiAgfQogIGlmIChBcnJheS5pc0FycmF5KHgpKSB7CiAgICBpZiAoIUFycmF5LmlzQXJyYXkoeSkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgaWYgKHgubGVuZ3RoICE9PSB5Lmxlbmd0aCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQogIGlmICghKHggaW5zdGFuY2VvZiBPYmplY3QpIHx8ICEoeSBpbnN0YW5jZW9mIE9iamVjdCkpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgY29uc3Qga2V5c1ggPSBPYmplY3Qua2V5cyh4KTsKICByZXR1cm4gT2JqZWN0LmtleXMoeSkuZXZlcnkoKGtleVkpID0+IGtleXNYLmluZGV4T2Yoa2V5WSkgIT09IC0xKSAmJiBrZXlzWC5ldmVyeSgoa2V5KSA9PiBpc0VxdWFsKHhba2V5XSwgeVtrZXldKSk7Cn0KdmFyIE9iamVjdFNldCA9IGNsYXNzIHsKICBjb25zdHJ1Y3RvcigpIHsKICAgIHRoaXMuYnVja2V0cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgfQogIHB1dCh2YWx1ZSkgewogICAgY29uc3QgaGFzaENvZGUgPSB0aGlzLmhhc2hDb2RlT2YodmFsdWUpOwogICAgY29uc3QgaXRlbXNCeUNvZGUgPSB0aGlzLmJ1Y2tldHMuZ2V0KGhhc2hDb2RlKTsKICAgIGlmICghaXRlbXNCeUNvZGUpIHsKICAgICAgdGhpcy5idWNrZXRzLnNldChoYXNoQ29kZSwgW3ZhbHVlXSk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGNvbnN0IGFscmVhZHlIYXNJdGVtID0gaXRlbXNCeUNvZGUuc29tZSgoXykgPT4gaXNFcXVhbChfLCB2YWx1ZSkpOwogICAgaWYgKCFhbHJlYWR5SGFzSXRlbSkgewogICAgICBpdGVtc0J5Q29kZS5wdXNoKHZhbHVlKTsKICAgIH0KICB9CiAgY29udGFpbnModmFsdWUpIHsKICAgIGNvbnN0IGhhc2hDb2RlID0gdGhpcy5oYXNoQ29kZU9mKHZhbHVlKTsKICAgIGNvbnN0IGl0ZW1zQnlDb2RlID0gdGhpcy5idWNrZXRzLmdldChoYXNoQ29kZSk7CiAgICBpZiAoIWl0ZW1zQnlDb2RlKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHJldHVybiBpdGVtc0J5Q29kZS5zb21lKChfKSA9PiBpc0VxdWFsKF8sIHZhbHVlKSk7CiAgfQogIHZhbHVlcygpIHsKICAgIHJldHVybiBbLi4udGhpcy5idWNrZXRzLnZhbHVlcygpXS5mbGF0KCk7CiAgfQogIHN0YXRzKCkgewogICAgbGV0IHRvdGFsQnVja2V0cyA9IDA7CiAgICBsZXQgdG90YWxWYWx1ZXMgPSAwOwogICAgbGV0IGNvbGxpc2lvbnMgPSAwOwogICAgZm9yIChjb25zdCBidWNrZXQgb2YgdGhpcy5idWNrZXRzLnZhbHVlcygpKSB7CiAgICAgIHRvdGFsQnVja2V0cyArPSAxOwogICAgICB0b3RhbFZhbHVlcyArPSBidWNrZXQubGVuZ3RoOwogICAgICBpZiAoYnVja2V0Lmxlbmd0aCA+IDEpIHsKICAgICAgICBjb2xsaXNpb25zICs9IDE7CiAgICAgIH0KICAgIH0KICAgIGNvbnN0IGhhc2hFZmZlY3RpdmVuZXNzID0gdG90YWxCdWNrZXRzIC8gdG90YWxWYWx1ZXM7CiAgICByZXR1cm4geyB0b3RhbEJ1Y2tldHMsIGNvbGxpc2lvbnMsIHRvdGFsVmFsdWVzLCBoYXNoRWZmZWN0aXZlbmVzcyB9OwogIH0KICBoYXNoQ29kZU9mKG9iamVjdCkgewogICAgbGV0IGhhc2hDb2RlID0gMDsKICAgIGlmIChBcnJheS5pc0FycmF5KG9iamVjdCkpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvYmplY3QubGVuZ3RoOyBpKyspIHsKICAgICAgICBoYXNoQ29kZSBePSB0aGlzLmhhc2hDb2RlT2Yob2JqZWN0W2ldKSAqIGk7CiAgICAgIH0KICAgICAgcmV0dXJuIGhhc2hDb2RlOwogICAgfQogICAgaWYgKHR5cGVvZiBvYmplY3QgPT09ICJzdHJpbmciKSB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JqZWN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaGFzaENvZGUgXj0gb2JqZWN0LmNoYXJDb2RlQXQoaSkgKiBpOwogICAgICB9CiAgICAgIHJldHVybiBoYXNoQ29kZTsKICAgIH0KICAgIGlmICh0eXBlb2Ygb2JqZWN0ID09PSAibnVtYmVyIikgewogICAgICByZXR1cm4gb2JqZWN0OwogICAgfQogICAgaWYgKHR5cGVvZiBvYmplY3QgPT09ICJvYmplY3QiKSB7CiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKG9iamVjdCkpIHsKICAgICAgICBoYXNoQ29kZSBePSB0aGlzLmhhc2hDb2RlT2Yoa2V5KSArIHRoaXMuaGFzaENvZGVPZih2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdm9pZCAwID8gdmFsdWUgOiAiIik7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBoYXNoQ29kZTsKICB9Cn07CmZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbHVlKSB7CiAgcmV0dXJuIHZhbHVlID09PSB2b2lkIDA7Cn0KZnVuY3Rpb24gbWFwVmFsdWVzKG9iamVjdCwgbWFwcGVyKSB7CiAgY29uc3QgcmVzdWx0ID0ge307CiAgT2JqZWN0LmVudHJpZXMob2JqZWN0KS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHsKICAgIHJlc3VsdFtrZXldID0gbWFwcGVyKHZhbHVlKTsKICB9KTsKICByZXR1cm4gcmVzdWx0Owp9CmZ1bmN0aW9uIG9taXQob2JqZWN0LCBrZXlzKSB7CiAgY29uc3QgcmVzdWx0ID0ge307CiAgT2JqZWN0LmVudHJpZXMob2JqZWN0KS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHsKICAgIGlmICgha2V5cy5zb21lKChrZXlUb09taXQpID0+IGtleVRvT21pdCA9PT0ga2V5KSkgewogICAgICByZXN1bHRba2V5XSA9IHZhbHVlOwogICAgfQogIH0pOwogIHJldHVybiByZXN1bHQ7Cn0KZnVuY3Rpb24gb21pdEJ5KG9iamVjdCwgcHJlZGljYXRlKSB7CiAgY29uc3QgcmVzdWx0ID0ge307CiAgT2JqZWN0LmVudHJpZXMob2JqZWN0KS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHsKICAgIGlmICghcHJlZGljYXRlKHZhbHVlLCBrZXkpKSB7CiAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7CiAgICB9CiAgfSk7CiAgcmV0dXJuIHJlc3VsdDsKfQpmdW5jdGlvbiBjb21wYWN0KGFycikgewogIHJldHVybiBhcnIuZmlsdGVyKChlbGVtKSA9PiAhaXNVbmRlZmluZWQoZWxlbSkpOwp9CnZhciBvYmplY3RFcXVhbHMgPSBpc0VxdWFsOwpmdW5jdGlvbiB1bmlxKHZhbHVlcykgewogIGNvbnN0IHNldCA9IG5ldyBPYmplY3RTZXQoKTsKICB2YWx1ZXMuZm9yRWFjaCgodmFsdWUpID0+IHNldC5wdXQodmFsdWUpKTsKICByZXR1cm4gWy4uLnNldC52YWx1ZXMoKV07Cn0KZnVuY3Rpb24gaXNTdHJpbmcodmFsKSB7CiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICJzdHJpbmciOwp9CmZ1bmN0aW9uIHNvcnRPYmplY3RCeUtleXMob2JqKSB7CiAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhvYmopLnNvcnQoKFtsZWZ0S2V5XSwgW3JpZ2h0S2V5XSkgPT4gbGVmdEtleS5sb2NhbGVDb21wYXJlKHJpZ2h0S2V5KSkpOwp9CnZhciB6b2RUb09wZW5BUElSZWdpc3RyeSA9IHJlZ2lzdHJ5KCk7CnZhciBNZXRhZGF0YSA9IGNsYXNzIHsKICBzdGF0aWMgY29sbGVjdE1ldGFkYXRhKHNjaGVtYSwgbWV0YWRhdGEpIHsKICAgIGNvbnN0IGN1cnJlbnRNZXRhZGF0YSA9IHRoaXMuZ2V0TWV0YWRhdGFGcm9tUmVnaXN0cnkoc2NoZW1hKTsKICAgIGNvbnN0IF9pbnRlcm5hbCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgY3VycmVudE1ldGFkYXRhID09PSBudWxsIHx8IGN1cnJlbnRNZXRhZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VycmVudE1ldGFkYXRhLl9pbnRlcm5hbCksIG1ldGFkYXRhID09PSBudWxsIHx8IG1ldGFkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtZXRhZGF0YS5faW50ZXJuYWwpOwogICAgY29uc3QgcGFyYW0gPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGN1cnJlbnRNZXRhZGF0YSA9PT0gbnVsbCB8fCBjdXJyZW50TWV0YWRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGN1cnJlbnRNZXRhZGF0YS5wYXJhbSksIG1ldGFkYXRhID09PSBudWxsIHx8IG1ldGFkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtZXRhZGF0YS5wYXJhbSk7CiAgICBjb25zdCB0b3RhbE1ldGFkYXRhID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgT2JqZWN0LmtleXMoX2ludGVybmFsKS5sZW5ndGggPiAwID8geyBfaW50ZXJuYWwgfSA6IHt9KSwgY3VycmVudE1ldGFkYXRhKSwgbWV0YWRhdGEpLCBPYmplY3Qua2V5cyhwYXJhbSkubGVuZ3RoID4gMCA/IHsgcGFyYW0gfSA6IHt9KTsKICAgIGlmIChpc1pvZFR5cGUoc2NoZW1hLCBbCiAgICAgICJab2RPcHRpb25hbCIsCiAgICAgICJab2ROdWxsYWJsZSIsCiAgICAgICJab2REZWZhdWx0IiwKICAgICAgIlpvZFJlYWRvbmx5IiwKICAgICAgIlpvZE5vbk9wdGlvbmFsIgogICAgXSkgJiYgaXNBbnlab2RUeXBlKHNjaGVtYS5fem9kLmRlZi5pbm5lclR5cGUpKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbGxlY3RNZXRhZGF0YShzY2hlbWEuX3pvZC5kZWYuaW5uZXJUeXBlLCB0b3RhbE1ldGFkYXRhKTsKICAgIH0KICAgIGlmIChpc1pvZFR5cGUoc2NoZW1hLCAiWm9kUGlwZSIpKSB7CiAgICAgIGNvbnN0IGluU2NoZW1hID0gc2NoZW1hLl96b2QuZGVmLmluOwogICAgICBjb25zdCBvdXRTY2hlbWEgPSBzY2hlbWEuX3pvZC5kZWYub3V0OwogICAgICBpZiAoaXNab2RUeXBlKGluU2NoZW1hLCAiWm9kVHJhbnNmb3JtIikgJiYgaXNBbnlab2RUeXBlKG91dFNjaGVtYSkpIHsKICAgICAgICByZXR1cm4gdGhpcy5jb2xsZWN0TWV0YWRhdGEob3V0U2NoZW1hLCB0b3RhbE1ldGFkYXRhKTsKICAgICAgfQogICAgICBpZiAoaXNBbnlab2RUeXBlKGluU2NoZW1hKSkgewogICAgICAgIHJldHVybiB0aGlzLmNvbGxlY3RNZXRhZGF0YShpblNjaGVtYSwgdG90YWxNZXRhZGF0YSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0b3RhbE1ldGFkYXRhOwogIH0KICAvKioKICAgKiBAZGVwcmVjYXRlZCBVc2Ugb25lIG9mIGBnZXRPcGVuQXBpTWV0YWRhdGFgIG9yIGBnZXRJbnRlcm5hbE1ldGFkYXRhYCBpbnN0ZWFkCiAgICovCiAgc3RhdGljIGdldE1ldGFkYXRhKHpvZFNjaGVtYSkgewogICAgcmV0dXJuIHRoaXMuY29sbGVjdE1ldGFkYXRhKHpvZFNjaGVtYSk7CiAgfQogIHN0YXRpYyBnZXRPcGVuQXBpTWV0YWRhdGEoem9kU2NoZW1hKSB7CiAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMuY29sbGVjdE1ldGFkYXRhKHpvZFNjaGVtYSk7CiAgICBjb25zdCBfYSA9IG1ldGFkYXRhICE9PSBudWxsICYmIG1ldGFkYXRhICE9PSB2b2lkIDAgPyBtZXRhZGF0YSA6IHt9LCByZXN0ID0gX19yZXN0KF9hLCBbIl9pbnRlcm5hbCJdKTsKICAgIHJldHVybiByZXN0OwogIH0KICBzdGF0aWMgZ2V0SW50ZXJuYWxNZXRhZGF0YSh6b2RTY2hlbWEpIHsKICAgIHZhciBfYTsKICAgIHJldHVybiAoX2EgPSB0aGlzLmNvbGxlY3RNZXRhZGF0YSh6b2RTY2hlbWEpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX2ludGVybmFsOwogIH0KICBzdGF0aWMgZ2V0UGFyYW1NZXRhZGF0YSh6b2RTY2hlbWEpIHsKICAgIGNvbnN0IG1ldGFkYXRhID0gdGhpcy5jb2xsZWN0TWV0YWRhdGEoem9kU2NoZW1hKTsKICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG1ldGFkYXRhKSwgewogICAgICAvLyBBIGRlc2NyaXB0aW9uIHByb3ZpZGVkIGZyb20gLm9wZW5hcGkoKSBzaG91bGQgYmUgdGFrZW4gd2l0aCBoaWdoZXIgcHJlY2VkZW5jZQogICAgICBwYXJhbTogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCAobWV0YWRhdGEgPT09IG51bGwgfHwgbWV0YWRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1ldGFkYXRhLmRlc2NyaXB0aW9uKSA/IHsgZGVzY3JpcHRpb246IG1ldGFkYXRhLmRlc2NyaXB0aW9uIH0gOiB7fSksIG1ldGFkYXRhID09PSBudWxsIHx8IG1ldGFkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtZXRhZGF0YS5wYXJhbSkKICAgIH0pOwogIH0KICAvKioKICAgKiBBIG1ldGhvZCB0aGF0IG9taXRzIGFsbCBjdXN0b20ga2V5cyBhZGRlZCB0byB0aGUgcmVndWxhciBPcGVuQVBJCiAgICogbWV0YWRhdGEgcHJvcGVydGllcwogICAqLwogIHN0YXRpYyBidWlsZFNjaGVtYU1ldGFkYXRhKG1ldGFkYXRhKSB7CiAgICByZXR1cm4gb21pdEJ5KG9taXQobWV0YWRhdGEsIFsicGFyYW0iLCAiX2ludGVybmFsIl0pLCBpc1VuZGVmaW5lZCk7CiAgfQogIHN0YXRpYyBidWlsZFBhcmFtZXRlck1ldGFkYXRhKG1ldGFkYXRhKSB7CiAgICByZXR1cm4gb21pdEJ5KG1ldGFkYXRhLCBpc1VuZGVmaW5lZCk7CiAgfQogIHN0YXRpYyBhcHBseVNjaGVtYU1ldGFkYXRhKGluaXRpYWxEYXRhLCBtZXRhZGF0YSkgewogICAgcmV0dXJuIG9taXRCeShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGluaXRpYWxEYXRhKSwgdGhpcy5idWlsZFNjaGVtYU1ldGFkYXRhKG1ldGFkYXRhKSksIGlzVW5kZWZpbmVkKTsKICB9CiAgc3RhdGljIGdldFJlZklkKHpvZFNjaGVtYSkgewogICAgdmFyIF9hOwogICAgcmV0dXJuIChfYSA9IHRoaXMuZ2V0SW50ZXJuYWxNZXRhZGF0YSh6b2RTY2hlbWEpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucmVmSWQ7CiAgfQogIHN0YXRpYyB1bndyYXBDaGFpbmVkKHNjaGVtYSkgewogICAgcmV0dXJuIHRoaXMudW53cmFwVW50aWwoc2NoZW1hKTsKICB9CiAgc3RhdGljIGdldERlZmF1bHRWYWx1ZSh6b2RTY2hlbWEpIHsKICAgIGNvbnN0IHVud3JhcHBlZCA9IHRoaXMudW53cmFwVW50aWwoem9kU2NoZW1hLCAiWm9kRGVmYXVsdCIpOwogICAgcmV0dXJuIHVud3JhcHBlZCA9PT0gbnVsbCB8fCB1bndyYXBwZWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHVud3JhcHBlZC5fem9kLmRlZi5kZWZhdWx0VmFsdWU7CiAgfQogIHN0YXRpYyB1bndyYXBVbnRpbChzY2hlbWEsIHR5cGVOYW1lKSB7CiAgICBpZiAodHlwZU5hbWUgJiYgaXNab2RUeXBlKHNjaGVtYSwgdHlwZU5hbWUpKSB7CiAgICAgIHJldHVybiBzY2hlbWE7CiAgICB9CiAgICBpZiAoaXNab2RUeXBlKHNjaGVtYSwgWwogICAgICAiWm9kT3B0aW9uYWwiLAogICAgICAiWm9kTnVsbGFibGUiLAogICAgICAiWm9kRGVmYXVsdCIsCiAgICAgICJab2RSZWFkb25seSIsCiAgICAgICJab2ROb25PcHRpb25hbCIKICAgIF0pICYmIGlzQW55Wm9kVHlwZShzY2hlbWEuX3pvZC5kZWYuaW5uZXJUeXBlKSkgewogICAgICByZXR1cm4gdGhpcy51bndyYXBVbnRpbChzY2hlbWEuX3pvZC5kZWYuaW5uZXJUeXBlLCB0eXBlTmFtZSk7CiAgICB9CiAgICBpZiAoaXNab2RUeXBlKHNjaGVtYSwgIlpvZFBpcGUiKSkgewogICAgICBjb25zdCBpblNjaGVtYSA9IHNjaGVtYS5fem9kLmRlZi5pbjsKICAgICAgY29uc3Qgb3V0U2NoZW1hID0gc2NoZW1hLl96b2QuZGVmLm91dDsKICAgICAgaWYgKGlzWm9kVHlwZShpblNjaGVtYSwgIlpvZFRyYW5zZm9ybSIpICYmIGlzQW55Wm9kVHlwZShvdXRTY2hlbWEpKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudW53cmFwVW50aWwob3V0U2NoZW1hLCB0eXBlTmFtZSk7CiAgICAgIH0KICAgICAgaWYgKGlzQW55Wm9kVHlwZShpblNjaGVtYSkpIHsKICAgICAgICByZXR1cm4gdGhpcy51bndyYXBVbnRpbChpblNjaGVtYSwgdHlwZU5hbWUpOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gdHlwZU5hbWUgPyB2b2lkIDAgOiBzY2hlbWE7CiAgfQogIHN0YXRpYyBnZXRNZXRhZGF0YUZyb21JbnRlcm5hbFJlZ2lzdHJ5KHpvZFNjaGVtYSkgewogICAgcmV0dXJuIHpvZFRvT3BlbkFQSVJlZ2lzdHJ5LmdldCh6b2RTY2hlbWEpOwogIH0KICBzdGF0aWMgZ2V0TWV0YWRhdGFGcm9tUmVnaXN0cnkoem9kU2NoZW1hKSB7CiAgICBjb25zdCBpbnRlcm5hbCA9IHRoaXMuZ2V0TWV0YWRhdGFGcm9tSW50ZXJuYWxSZWdpc3RyeSh6b2RTY2hlbWEpOwogICAgY29uc3QgZ2VuZXJhbCA9IHpvZFNjaGVtYS5tZXRhKCk7CiAgICBpZiAoIWludGVybmFsKSB7CiAgICAgIHJldHVybiBnZW5lcmFsOwogICAgfQogICAgY29uc3QgeyBfaW50ZXJuYWwgfSA9IGludGVybmFsLCByZXN0ID0gX19yZXN0KGludGVybmFsLCBbIl9pbnRlcm5hbCJdKTsKICAgIGNvbnN0IF9hID0gZ2VuZXJhbCAhPT0gbnVsbCAmJiBnZW5lcmFsICE9PSB2b2lkIDAgPyBnZW5lcmFsIDoge30sIHsgaWQsIHRpdGxlIH0gPSBfYSwgcmVzdEdlbmVyYWwgPSBfX3Jlc3QoX2EsIFsiaWQiLCAidGl0bGUiXSk7CiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyBfaW50ZXJuYWw6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgaWQgPyB7IHJlZklkOiBpZCB9IDoge30pLCBfaW50ZXJuYWwpIH0sIHJlc3QpLCB0aXRsZSA/IHsgZGVzY3JpcHRpb246IHRpdGxlIH0gOiB7fSksIHJlc3RHZW5lcmFsKTsKICB9CiAgc3RhdGljIHNldE1ldGFkYXRhSW5SZWdpc3RyeSh6b2RTY2hlbWEsIG1ldGFkYXRhKSB7CiAgICB6b2RUb09wZW5BUElSZWdpc3RyeS5hZGQoem9kU2NoZW1hLCBtZXRhZGF0YSk7CiAgfQp9OwpmdW5jdGlvbiBwcmVzZXJ2ZU1ldGFkYXRhRnJvbU1vZGlmaWVyKHpvZFNjaGVtYSwgbW9kaWZpZXIpIHsKICBjb25zdCB6b2RNb2RpZmllciA9IHpvZFNjaGVtYVttb2RpZmllcl07CiAgaWYgKHR5cGVvZiB6b2RNb2RpZmllciAhPT0gImZ1bmN0aW9uIikgewogICAgcmV0dXJuOwogIH0KICB6b2RTY2hlbWFbbW9kaWZpZXJdID0gZnVuY3Rpb24oLi4uYXJncykgewogICAgY29uc3QgcmVzdWx0ID0gem9kTW9kaWZpZXIuYXBwbHkodGhpcywgYXJncyk7CiAgICBjb25zdCBtZXRhID0gTWV0YWRhdGEuZ2V0TWV0YWRhdGFGcm9tUmVnaXN0cnkodGhpcyk7CiAgICBpZiAobWV0YSkgewogICAgICBNZXRhZGF0YS5zZXRNZXRhZGF0YUluUmVnaXN0cnkocmVzdWx0LCBtZXRhKTsKICAgIH0KICAgIHJldHVybiByZXN1bHQ7CiAgfTsKfQpmdW5jdGlvbiBleHRlbmRab2RXaXRoT3BlbkFwaSh6b2QpIHsKICBpZiAodHlwZW9mIHpvZC5ab2RUeXBlLnByb3RvdHlwZS5vcGVuYXBpICE9PSAidW5kZWZpbmVkIikgewogICAgcmV0dXJuOwogIH0KICB6b2QuWm9kVHlwZS5wcm90b3R5cGUub3BlbmFwaSA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHsKICAgIGNvbnN0IHsgcmVmSWQsIG1ldGFkYXRhLCBvcHRpb25zIH0gPSBnZXRPcGVuQXBpQ29uZmlndXJhdGlvbiguLi5hcmdzKTsKICAgIGNvbnN0IF9hID0gbWV0YWRhdGEgIT09IG51bGwgJiYgbWV0YWRhdGEgIT09IHZvaWQgMCA/IG1ldGFkYXRhIDoge30sIHsgcGFyYW0gfSA9IF9hLCByZXN0T2ZPcGVuQXBpID0gX19yZXN0KF9hLCBbInBhcmFtIl0pOwogICAgY29uc3QgYWxsTWV0YWRhdGEgPSBNZXRhZGF0YS5nZXRNZXRhZGF0YUZyb21SZWdpc3RyeSh0aGlzKTsKICAgIGNvbnN0IF9iID0gYWxsTWV0YWRhdGEgIT09IG51bGwgJiYgYWxsTWV0YWRhdGEgIT09IHZvaWQgMCA/IGFsbE1ldGFkYXRhIDoge30sIHsgX2ludGVybmFsOiBpbnRlcm5hbE1ldGFkYXRhIH0gPSBfYiwgY3VycmVudE1ldGFkYXRhID0gX19yZXN0KF9iLCBbIl9pbnRlcm5hbCJdKTsKICAgIGNvbnN0IF9pbnRlcm5hbCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBpbnRlcm5hbE1ldGFkYXRhKSwgb3B0aW9ucyksIHJlZklkID8geyByZWZJZCB9IDogdm9pZCAwKTsKICAgIGNvbnN0IHJlc3VsdE1ldGFkYXRhID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGN1cnJlbnRNZXRhZGF0YSksIHJlc3RPZk9wZW5BcGkpLCAoY3VycmVudE1ldGFkYXRhID09PSBudWxsIHx8IGN1cnJlbnRNZXRhZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VycmVudE1ldGFkYXRhLnBhcmFtKSB8fCBwYXJhbSA/IHsKICAgICAgcGFyYW06IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgY3VycmVudE1ldGFkYXRhID09PSBudWxsIHx8IGN1cnJlbnRNZXRhZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VycmVudE1ldGFkYXRhLnBhcmFtKSwgcGFyYW0pCiAgICB9IDogdm9pZCAwKTsKICAgIGNvbnN0IHJlc3VsdCA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuX2RlZik7CiAgICBNZXRhZGF0YS5zZXRNZXRhZGF0YUluUmVnaXN0cnkocmVzdWx0LCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIE9iamVjdC5rZXlzKF9pbnRlcm5hbCkubGVuZ3RoID4gMCA/IHsgX2ludGVybmFsIH0gOiB2b2lkIDApLCByZXN1bHRNZXRhZGF0YSkpOwogICAgaWYgKGlzWm9kVHlwZShyZXN1bHQsICJab2RPYmplY3QiKSkgewogICAgICBjb25zdCBjdXJyZW50TWV0YWRhdGEyID0gTWV0YWRhdGEuZ2V0TWV0YWRhdGFGcm9tUmVnaXN0cnkocmVzdWx0KTsKICAgICAgY29uc3Qgb3JpZ2luYWxFeHRlbmQgPSByZXN1bHQuZXh0ZW5kOwogICAgICByZXN1bHQuZXh0ZW5kID0gZnVuY3Rpb24oLi4uYXJnczIpIHsKICAgICAgICBjb25zdCBleHRlbmRlZFJlc3VsdCA9IG9yaWdpbmFsRXh0ZW5kLmFwcGx5KHJlc3VsdCwgYXJnczIpOwogICAgICAgIGNvbnN0IF9hMiA9IGN1cnJlbnRNZXRhZGF0YTIgIT09IG51bGwgJiYgY3VycmVudE1ldGFkYXRhMiAhPT0gdm9pZCAwID8gY3VycmVudE1ldGFkYXRhMiA6IHt9LCB7IF9pbnRlcm5hbDogX2ludGVybmFsMiB9ID0gX2EyLCByZXN0ID0gX19yZXN0KF9hMiwgWyJfaW50ZXJuYWwiXSk7CiAgICAgICAgTWV0YWRhdGEuc2V0TWV0YWRhdGFJblJlZ2lzdHJ5KGV4dGVuZGVkUmVzdWx0LCB7CiAgICAgICAgICBfaW50ZXJuYWw6IHsKICAgICAgICAgICAgZXh0ZW5kZWRGcm9tOiAoX2ludGVybmFsMiA9PT0gbnVsbCB8fCBfaW50ZXJuYWwyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaW50ZXJuYWwyLnJlZklkKSA/IHsgcmVmSWQ6IF9pbnRlcm5hbDIucmVmSWQsIHNjaGVtYTogcmVzdWx0IH0gOiBfaW50ZXJuYWwyID09PSBudWxsIHx8IF9pbnRlcm5hbDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pbnRlcm5hbDIuZXh0ZW5kZWRGcm9tCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGV4dGVuZGVkUmVzdWx0Lm9wZW5hcGkocmVzdCk7CiAgICAgIH07CiAgICAgIHByZXNlcnZlTWV0YWRhdGFGcm9tTW9kaWZpZXIocmVzdWx0LCAiY2F0Y2hhbGwiKTsKICAgIH0KICAgIHByZXNlcnZlTWV0YWRhdGFGcm9tTW9kaWZpZXIocmVzdWx0LCAib3B0aW9uYWwiKTsKICAgIHByZXNlcnZlTWV0YWRhdGFGcm9tTW9kaWZpZXIocmVzdWx0LCAibnVsbGFibGUiKTsKICAgIHByZXNlcnZlTWV0YWRhdGFGcm9tTW9kaWZpZXIocmVzdWx0LCAiZGVmYXVsdCIpOwogICAgcHJlc2VydmVNZXRhZGF0YUZyb21Nb2RpZmllcihyZXN1bHQsICJ0cmFuc2Zvcm0iKTsKICAgIHByZXNlcnZlTWV0YWRhdGFGcm9tTW9kaWZpZXIocmVzdWx0LCAicmVmaW5lIik7CiAgICBwcmVzZXJ2ZU1ldGFkYXRhRnJvbU1vZGlmaWVyKHJlc3VsdCwgImxlbmd0aCIpOwogICAgcHJlc2VydmVNZXRhZGF0YUZyb21Nb2RpZmllcihyZXN1bHQsICJtaW4iKTsKICAgIHByZXNlcnZlTWV0YWRhdGFGcm9tTW9kaWZpZXIocmVzdWx0LCAibWF4Iik7CiAgICBjb25zdCBvcmlnaW5hbE1ldGEgPSByZXN1bHQubWV0YTsKICAgIHJlc3VsdC5tZXRhID0gZnVuY3Rpb24oLi4uYXJnczIpIHsKICAgICAgY29uc3QgcmVzdWx0MiA9IG9yaWdpbmFsTWV0YS5hcHBseSh0aGlzLCBhcmdzMik7CiAgICAgIGlmIChhcmdzMlswXSkgewogICAgICAgIGNvbnN0IG1ldGEgPSBNZXRhZGF0YS5nZXRNZXRhZGF0YUZyb21JbnRlcm5hbFJlZ2lzdHJ5KHRoaXMpOwogICAgICAgIGlmIChtZXRhKSB7CiAgICAgICAgICBNZXRhZGF0YS5zZXRNZXRhZGF0YUluUmVnaXN0cnkocmVzdWx0MiwgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBtZXRhKSwgYXJnczJbMF0pKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdDI7CiAgICB9OwogICAgcmV0dXJuIHJlc3VsdDsKICB9Owp9CmZ1bmN0aW9uIGdldE9wZW5BcGlDb25maWd1cmF0aW9uKHJlZk9yT3BlbmFwaSwgbWV0YWRhdGFPck9wdGlvbnMsIG9wdGlvbnMpIHsKICBpZiAodHlwZW9mIHJlZk9yT3BlbmFwaSA9PT0gInN0cmluZyIpIHsKICAgIHJldHVybiB7CiAgICAgIHJlZklkOiByZWZPck9wZW5hcGksCiAgICAgIG1ldGFkYXRhOiBtZXRhZGF0YU9yT3B0aW9ucywKICAgICAgb3B0aW9ucwogICAgfTsKICB9CiAgcmV0dXJuIHsKICAgIHJlZklkOiB2b2lkIDAsCiAgICBtZXRhZGF0YTogcmVmT3JPcGVuYXBpLAogICAgb3B0aW9uczogbWV0YWRhdGFPck9wdGlvbnMKICB9Owp9CmZ1bmN0aW9uIGdldE9wZW5BcGlNZXRhZGF0YSh6b2RTY2hlbWEpIHsKICB2YXIgX2E7CiAgcmV0dXJuIG9taXRCeSgoX2EgPSBNZXRhZGF0YS5nZXRPcGVuQXBpTWV0YWRhdGEoem9kU2NoZW1hKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge30sIGlzVW5kZWZpbmVkKTsKfQpmdW5jdGlvbiBnZXRSZWZJZCh6b2RTY2hlbWEpIHsKICByZXR1cm4gTWV0YWRhdGEuZ2V0UmVmSWQoem9kU2NoZW1hKTsKfQp2YXIgT3BlbkFQSVJlZ2lzdHJ5ID0gY2xhc3MgewogIGNvbnN0cnVjdG9yKHBhcmVudHMpIHsKICAgIHRoaXMucGFyZW50cyA9IHBhcmVudHM7CiAgICB0aGlzLl9kZWZpbml0aW9ucyA9IFtdOwogIH0KICBnZXQgZGVmaW5pdGlvbnMoKSB7CiAgICB2YXIgX2EsIF9iOwogICAgY29uc3QgcGFyZW50RGVmaW5pdGlvbnMgPSAoX2IgPSAoX2EgPSB0aGlzLnBhcmVudHMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mbGF0TWFwKChwYXIpID0+IHBhci5fZGVmaW5pdGlvbnMpKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBbXTsKICAgIHJldHVybiBbLi4ucGFyZW50RGVmaW5pdGlvbnMsIC4uLnRoaXMuX2RlZmluaXRpb25zXTsKICB9CiAgLyoqCiAgICogUmVnaXN0ZXJzIGEgbmV3IGNvbXBvbmVudCBzY2hlbWEgdW5kZXIgL2NvbXBvbmVudHMvc2NoZW1hcy8ke25hbWV9CiAgICovCiAgcmVnaXN0ZXIocmVmSWQsIHpvZFNjaGVtYSkgewogICAgY29uc3Qgc2NoZW1hV2l0aFJlZklkID0gdGhpcy5zY2hlbWFXaXRoUmVmSWQocmVmSWQsIHpvZFNjaGVtYSk7CiAgICB0aGlzLl9kZWZpbml0aW9ucy5wdXNoKHsgdHlwZTogInNjaGVtYSIsIHNjaGVtYTogc2NoZW1hV2l0aFJlZklkIH0pOwogICAgcmV0dXJuIHNjaGVtYVdpdGhSZWZJZDsKICB9CiAgLyoqCiAgICogUmVnaXN0ZXJzIGEgbmV3IHBhcmFtZXRlciBzY2hlbWEgdW5kZXIgL2NvbXBvbmVudHMvcGFyYW1ldGVycy8ke25hbWV9CiAgICovCiAgcmVnaXN0ZXJQYXJhbWV0ZXIocmVmSWQsIHpvZFNjaGVtYSkgewogICAgdmFyIF9hLCBfYiwgX2M7CiAgICBjb25zdCBzY2hlbWFXaXRoUmVmSWQgPSB0aGlzLnNjaGVtYVdpdGhSZWZJZChyZWZJZCwgem9kU2NoZW1hKTsKICAgIGNvbnN0IGN1cnJlbnRNZXRhZGF0YSA9IChfYSA9IE1ldGFkYXRhLmdldE9wZW5BcGlNZXRhZGF0YShzY2hlbWFXaXRoUmVmSWQpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fTsKICAgIGNvbnN0IHNjaGVtYVdpdGhNZXRhZGF0YSA9IHNjaGVtYVdpdGhSZWZJZC5vcGVuYXBpKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgY3VycmVudE1ldGFkYXRhKSwgeyBwYXJhbTogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjdXJyZW50TWV0YWRhdGEgPT09IG51bGwgfHwgY3VycmVudE1ldGFkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXJyZW50TWV0YWRhdGEucGFyYW0pLCB7IG5hbWU6IChfYyA9IChfYiA9IGN1cnJlbnRNZXRhZGF0YSA9PT0gbnVsbCB8fCBjdXJyZW50TWV0YWRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGN1cnJlbnRNZXRhZGF0YS5wYXJhbSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLm5hbWUpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IHJlZklkIH0pIH0pKTsKICAgIHRoaXMuX2RlZmluaXRpb25zLnB1c2goewogICAgICB0eXBlOiAicGFyYW1ldGVyIiwKICAgICAgc2NoZW1hOiBzY2hlbWFXaXRoTWV0YWRhdGEKICAgIH0pOwogICAgcmV0dXJuIHNjaGVtYVdpdGhNZXRhZGF0YTsKICB9CiAgLyoqCiAgICogUmVnaXN0ZXJzIGEgbmV3IHBhdGggdGhhdCB3b3VsZCBiZSBnZW5lcmF0ZWQgdW5kZXIgcGF0aHM6CiAgICovCiAgcmVnaXN0ZXJQYXRoKHJvdXRlKSB7CiAgICB0aGlzLl9kZWZpbml0aW9ucy5wdXNoKHsKICAgICAgdHlwZTogInJvdXRlIiwKICAgICAgcm91dGUKICAgIH0pOwogIH0KICAvKioKICAgKiBSZWdpc3RlcnMgYSBuZXcgd2ViaG9vayB0aGF0IHdvdWxkIGJlIGdlbmVyYXRlZCB1bmRlciB3ZWJob29rczoKICAgKi8KICByZWdpc3RlcldlYmhvb2sod2ViaG9vaykgewogICAgdGhpcy5fZGVmaW5pdGlvbnMucHVzaCh7CiAgICAgIHR5cGU6ICJ3ZWJob29rIiwKICAgICAgd2ViaG9vawogICAgfSk7CiAgfQogIC8qKgogICAqIFJlZ2lzdGVycyBhIHJhdyBPcGVuQVBJIGNvbXBvbmVudC4gVXNlIHRoaXMgaWYgeW91IGhhdmUgYSBzaW1wbGUgb2JqZWN0IGluc3RlYWQgb2YgYSBab2Qgc2NoZW1hLgogICAqCiAgICogQHBhcmFtIHR5cGUgVGhlIGNvbXBvbmVudCB0eXBlLCBlLmcuIGBzY2hlbWFzYCwgYHJlc3BvbnNlc2AsIGBzZWN1cml0eVNjaGVtZXNgLCBldGMuCiAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIG9iamVjdCwgaXQgaXMgdGhlIGtleSB1bmRlciB0aGUgY29tcG9uZW50CiAgICogICAgICAgICAgICAgdHlwZSBpbiB0aGUgcmVzdWx0aW5nIE9wZW5BUEkgZG9jdW1lbnQKICAgKiBAcGFyYW0gY29tcG9uZW50IFRoZSBhY3R1YWwgb2JqZWN0IHRvIHB1dCB0aGVyZQogICAqLwogIHJlZ2lzdGVyQ29tcG9uZW50KHR5cGUsIG5hbWUsIGNvbXBvbmVudCkgewogICAgdGhpcy5fZGVmaW5pdGlvbnMucHVzaCh7CiAgICAgIHR5cGU6ICJjb21wb25lbnQiLAogICAgICBjb21wb25lbnRUeXBlOiB0eXBlLAogICAgICBuYW1lLAogICAgICBjb21wb25lbnQKICAgIH0pOwogICAgcmV0dXJuIHsKICAgICAgbmFtZSwKICAgICAgcmVmOiB7ICRyZWY6IGAjL2NvbXBvbmVudHMvJHt0eXBlfS8ke25hbWV9YCB9CiAgICB9OwogIH0KICBzY2hlbWFXaXRoUmVmSWQocmVmSWQsIHpvZFNjaGVtYSkgewogICAgcmV0dXJuIHpvZFNjaGVtYS5vcGVuYXBpKHJlZklkKTsKICB9Cn07CnZhciBab2RUb09wZW5BUElFcnJvciA9IGNsYXNzIHsKICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7CiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOwogIH0KfTsKdmFyIENvbmZsaWN0RXJyb3IgPSBjbGFzcyBleHRlbmRzIFpvZFRvT3BlbkFQSUVycm9yIHsKICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBkYXRhKSB7CiAgICBzdXBlcihtZXNzYWdlKTsKICAgIHRoaXMuZGF0YSA9IGRhdGE7CiAgfQp9Owp2YXIgTWlzc2luZ1BhcmFtZXRlckRhdGFFcnJvciA9IGNsYXNzIGV4dGVuZHMgWm9kVG9PcGVuQVBJRXJyb3IgewogIGNvbnN0cnVjdG9yKGRhdGEpIHsKICAgIHN1cGVyKGBNaXNzaW5nIHBhcmFtZXRlciBkYXRhLCBwbGVhc2Ugc3BlY2lmeSBcYCR7ZGF0YS5taXNzaW5nRmllbGR9XGAgYW5kIG90aGVyIE9wZW5BUEkgcGFyYW1ldGVyIHByb3BzIHVzaW5nIHRoZSBcYHBhcmFtXGAgZmllbGQgb2YgXGBzY2hlbWEub3BlbmFwaVxgYCk7CiAgICB0aGlzLmRhdGEgPSBkYXRhOwogIH0KfTsKZnVuY3Rpb24gZW5oYW5jZU1pc3NpbmdQYXJhbWV0ZXJzRXJyb3IoYWN0aW9uLCBwYXJhbXNUb0FkZCkgewogIHRyeSB7CiAgICByZXR1cm4gYWN0aW9uKCk7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIE1pc3NpbmdQYXJhbWV0ZXJEYXRhRXJyb3IpIHsKICAgICAgdGhyb3cgbmV3IE1pc3NpbmdQYXJhbWV0ZXJEYXRhRXJyb3IoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBlcnJvci5kYXRhKSwgcGFyYW1zVG9BZGQpKTsKICAgIH0KICAgIHRocm93IGVycm9yOwogIH0KfQp2YXIgVW5rbm93blpvZFR5cGVFcnJvciA9IGNsYXNzIGV4dGVuZHMgWm9kVG9PcGVuQVBJRXJyb3IgewogIGNvbnN0cnVjdG9yKGRhdGEpIHsKICAgIHN1cGVyKGBVbmtub3duIHpvZCBvYmplY3QgdHlwZSwgcGxlYXNlIHNwZWNpZnkgXGB0eXBlXGAgYW5kIG90aGVyIE9wZW5BUEkgcHJvcHMgdXNpbmcgXGBzY2hlbWEub3BlbmFwaVxgLmApOwogICAgdGhpcy5kYXRhID0gZGF0YTsKICB9Cn07CnZhciBBcnJheVRyYW5zZm9ybWVyID0gY2xhc3MgewogIHRyYW5zZm9ybSh6b2RTY2hlbWEsIG1hcE51bGxhYmxlVHlwZSwgbWFwSXRlbXMpIHsKICAgIHZhciBfYSwgX2IsIF9jLCBfZDsKICAgIGNvbnN0IGl0ZW1UeXBlID0gem9kU2NoZW1hLmRlZi5lbGVtZW50OwogICAgY29uc3QgbWluSXRlbXMgPSAoX2IgPSAoX2EgPSB6b2RTY2hlbWEuZGVmLmNoZWNrcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZpbmQoKGNoZWNrKSA9PiBjaGVjay5fem9kLmRlZi5jaGVjayA9PT0gIm1pbl9sZW5ndGgiKSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLl96b2QuZGVmLm1pbmltdW07CiAgICBjb25zdCBtYXhJdGVtcyA9IChfZCA9IChfYyA9IHpvZFNjaGVtYS5kZWYuY2hlY2tzKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuZmluZCgoY2hlY2spID0+IGNoZWNrLl96b2QuZGVmLmNoZWNrID09PSAibWF4X2xlbmd0aCIpKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QuX3pvZC5kZWYubWF4aW11bTsKICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG1hcE51bGxhYmxlVHlwZSgiYXJyYXkiKSksIHsKICAgICAgaXRlbXM6IGlzQW55Wm9kVHlwZShpdGVtVHlwZSkgPyBtYXBJdGVtcyhpdGVtVHlwZSkgOiB7fSwKICAgICAgbWluSXRlbXMsCiAgICAgIG1heEl0ZW1zCiAgICB9KTsKICB9Cn07CnZhciBCaWdJbnRUcmFuc2Zvcm1lciA9IGNsYXNzIHsKICB0cmFuc2Zvcm0obWFwTnVsbGFibGVUeXBlKSB7CiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBtYXBOdWxsYWJsZVR5cGUoInN0cmluZyIpKSwgeyBwYXR0ZXJuOiBgXmQrJGAgfSk7CiAgfQp9Owp2YXIgRGlzY3JpbWluYXRlZFVuaW9uVHJhbnNmb3JtZXIgPSBjbGFzcyB7CiAgdHJhbnNmb3JtKHpvZFNjaGVtYSwgaXNOdWxsYWJsZSwgbWFwTnVsbGFibGVPZkFycmF5LCBtYXBJdGVtLCBnZW5lcmF0ZVNjaGVtYVJlZikgewogICAgY29uc3Qgb3B0aW9ucyA9IFsuLi56b2RTY2hlbWEuZGVmLm9wdGlvbnNdOwogICAgY29uc3Qgb3B0aW9uU2NoZW1hID0gb3B0aW9ucy5tYXAobWFwSXRlbSk7CiAgICBpZiAoaXNOdWxsYWJsZSkgewogICAgICByZXR1cm4gewogICAgICAgIG9uZU9mOiBtYXBOdWxsYWJsZU9mQXJyYXkob3B0aW9uU2NoZW1hLCBpc051bGxhYmxlKQogICAgICB9OwogICAgfQogICAgY29uc3QgZGlzY3JpbWluYXRvciA9IHpvZFNjaGVtYS5fem9kLmRlZi5kaXNjcmltaW5hdG9yOwogICAgaWYgKCFkaXNjcmltaW5hdG9yKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoIk5vIGRpc2NyaW1pbmF0b3IgZm91bmQgZm9yIGRpc2NyaW1pbmF0ZWQgdW5pb24iLCB6b2RTY2hlbWEpOwogICAgICByZXR1cm4gewogICAgICAgIG9uZU9mOiBvcHRpb25TY2hlbWEKICAgICAgfTsKICAgIH0KICAgIHJldHVybiB7CiAgICAgIG9uZU9mOiBvcHRpb25TY2hlbWEsCiAgICAgIGRpc2NyaW1pbmF0b3I6IHRoaXMubWFwRGlzY3JpbWluYXRvcihvcHRpb25zLCBkaXNjcmltaW5hdG9yLCBnZW5lcmF0ZVNjaGVtYVJlZikKICAgIH07CiAgfQogIG1hcERpc2NyaW1pbmF0b3Ioem9kT2JqZWN0cywgZGlzY3JpbWluYXRvciwgZ2VuZXJhdGVTY2hlbWFSZWYpIHsKICAgIGlmICh6b2RPYmplY3RzLnNvbWUoKG9iaikgPT4gTWV0YWRhdGEuZ2V0UmVmSWQob2JqKSA9PT0gdm9pZCAwKSkgewogICAgICByZXR1cm4gdm9pZCAwOwogICAgfQogICAgY29uc3QgbWFwcGluZyA9IHt9OwogICAgem9kT2JqZWN0cy5mb3JFYWNoKChvYmopID0+IHsKICAgICAgdmFyIF9hOwogICAgICBjb25zdCByZWZJZCA9IE1ldGFkYXRhLmdldFJlZklkKG9iaik7CiAgICAgIGNvbnN0IHZhbHVlID0gKF9hID0gb2JqLmRlZi5zaGFwZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW2Rpc2NyaW1pbmF0b3JdOwogICAgICBpZiAoaXNab2RUeXBlKHZhbHVlLCAiWm9kRW51bSIpKSB7CiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC52YWx1ZXModmFsdWUuX3pvZC5kZWYuZW50cmllcykuZmlsdGVyKGlzU3RyaW5nKTsKICAgICAgICBrZXlzLmZvckVhY2goKGVudW1WYWx1ZSkgPT4gewogICAgICAgICAgbWFwcGluZ1tlbnVtVmFsdWVdID0gZ2VuZXJhdGVTY2hlbWFSZWYocmVmSWQpOwogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBsaXRlcmFsVmFsdWUgPSB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsdWUuZGVmLnZhbHVlc1swXTsKICAgICAgaWYgKHR5cGVvZiBsaXRlcmFsVmFsdWUgIT09ICJzdHJpbmciKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEaXNjcmltaW5hdG9yICR7ZGlzY3JpbWluYXRvcn0gY291bGQgbm90IGJlIGZvdW5kIGluIG9uZSBvZiB0aGUgdmFsdWVzIG9mIGEgZGlzY3JpbWluYXRlZCB1bmlvbmApOwogICAgICB9CiAgICAgIG1hcHBpbmdbbGl0ZXJhbFZhbHVlXSA9IGdlbmVyYXRlU2NoZW1hUmVmKHJlZklkKTsKICAgIH0pOwogICAgcmV0dXJuIHsKICAgICAgcHJvcGVydHlOYW1lOiBkaXNjcmltaW5hdG9yLAogICAgICBtYXBwaW5nCiAgICB9OwogIH0KfTsKZnVuY3Rpb24gZW51bUluZm8oZW51bU9iamVjdCkgewogIGNvbnN0IGtleXNFeGNlcHRSZXZlcnNlTWFwcGluZ3MgPSBPYmplY3Qua2V5cyhlbnVtT2JqZWN0KS5maWx0ZXIoKGtleSkgPT4gdHlwZW9mIGVudW1PYmplY3RbZW51bU9iamVjdFtrZXldXSAhPT0gIm51bWJlciIpOwogIGNvbnN0IHZhbHVlcyA9IGtleXNFeGNlcHRSZXZlcnNlTWFwcGluZ3MubWFwKChrZXkpID0+IGVudW1PYmplY3Rba2V5XSk7CiAgY29uc3QgbnVtZXJpY0NvdW50ID0gdmFsdWVzLmZpbHRlcigoXykgPT4gdHlwZW9mIF8gPT09ICJudW1iZXIiKS5sZW5ndGg7CiAgY29uc3QgdHlwZSA9IG51bWVyaWNDb3VudCA9PT0gMCA/ICJzdHJpbmciIDogbnVtZXJpY0NvdW50ID09PSB2YWx1ZXMubGVuZ3RoID8gIm51bWVyaWMiIDogIm1peGVkIjsKICByZXR1cm4geyB2YWx1ZXMsIHR5cGUgfTsKfQp2YXIgRW51bVRyYW5zZm9ybWVyID0gY2xhc3MgewogIHRyYW5zZm9ybSh6b2RTY2hlbWEsIG1hcE51bGxhYmxlVHlwZSkgewogICAgY29uc3QgeyB0eXBlLCB2YWx1ZXMgfSA9IGVudW1JbmZvKHpvZFNjaGVtYS5fem9kLmRlZi5lbnRyaWVzKTsKICAgIGlmICh0eXBlID09PSAibWl4ZWQiKSB7CiAgICAgIHRocm93IG5ldyBab2RUb09wZW5BUElFcnJvcigiRW51bSBoYXMgbWl4ZWQgc3RyaW5nIGFuZCBudW1iZXIgdmFsdWVzLCBwbGVhc2Ugc3BlY2lmeSB0aGUgT3BlbkFQSSB0eXBlIG1hbnVhbGx5Iik7CiAgICB9CiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBtYXBOdWxsYWJsZVR5cGUodHlwZSA9PT0gIm51bWVyaWMiID8gImludGVnZXIiIDogInN0cmluZyIpKSwgeyBlbnVtOiB2YWx1ZXMgfSk7CiAgfQp9Owp2YXIgSW50ZXJzZWN0aW9uVHJhbnNmb3JtZXIgPSBjbGFzcyB7CiAgdHJhbnNmb3JtKHpvZFNjaGVtYSwgaXNOdWxsYWJsZSwgbWFwTnVsbGFibGVPZkFycmF5LCBtYXBJdGVtKSB7CiAgICBjb25zdCBzdWJ0eXBlcyA9IHRoaXMuZmxhdHRlbkludGVyc2VjdGlvblR5cGVzKHpvZFNjaGVtYSk7CiAgICBjb25zdCBhbGxPZlNjaGVtYSA9IHsKICAgICAgYWxsT2Y6IHN1YnR5cGVzLm1hcChtYXBJdGVtKQogICAgfTsKICAgIGlmIChpc051bGxhYmxlKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgYW55T2Y6IG1hcE51bGxhYmxlT2ZBcnJheShbYWxsT2ZTY2hlbWFdLCBpc051bGxhYmxlKQogICAgICB9OwogICAgfQogICAgcmV0dXJuIGFsbE9mU2NoZW1hOwogIH0KICBmbGF0dGVuSW50ZXJzZWN0aW9uVHlwZXMoc2NoZW1hKSB7CiAgICBpZiAoIWlzWm9kVHlwZShzY2hlbWEsICJab2RJbnRlcnNlY3Rpb24iKSkgewogICAgICByZXR1cm4gW3NjaGVtYV07CiAgICB9CiAgICBjb25zdCBsZWZ0U3ViVHlwZXMgPSBpc0FueVpvZFR5cGUoc2NoZW1hLl96b2QuZGVmLmxlZnQpID8gdGhpcy5mbGF0dGVuSW50ZXJzZWN0aW9uVHlwZXMoc2NoZW1hLl96b2QuZGVmLmxlZnQpIDogW107CiAgICBjb25zdCByaWdodFN1YlR5cGVzID0gaXNBbnlab2RUeXBlKHNjaGVtYS5fem9kLmRlZi5yaWdodCkgPyB0aGlzLmZsYXR0ZW5JbnRlcnNlY3Rpb25UeXBlcyhzY2hlbWEuX3pvZC5kZWYucmlnaHQpIDogW107CiAgICByZXR1cm4gWy4uLmxlZnRTdWJUeXBlcywgLi4ucmlnaHRTdWJUeXBlc107CiAgfQp9Owp2YXIgTGl0ZXJhbFRyYW5zZm9ybWVyID0gY2xhc3MgewogIGNvbnN0cnVjdG9yKCkgewogICAgdGhpcy5iaWdJbnRUcmFuc2Zvcm1lciA9IG5ldyBCaWdJbnRUcmFuc2Zvcm1lcigpOwogIH0KICB0cmFuc2Zvcm0oem9kU2NoZW1hLCBtYXBOdWxsYWJsZVR5cGUpIHsKICAgIGNvbnN0IHR5cGUgPSB0eXBlb2Ygem9kU2NoZW1hLmRlZi52YWx1ZXNbMF07CiAgICBpZiAodHlwZSA9PT0gImJvb2xlYW4iIHx8IHR5cGUgPT09ICJudW1iZXIiIHx8IHR5cGUgPT09ICJzdHJpbmciIHx8IHR5cGUgPT09ICJvYmplY3QiKSB7CiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG1hcE51bGxhYmxlVHlwZSh0eXBlKSksIHsgZW51bTogW3pvZFNjaGVtYS5kZWYudmFsdWVzWzBdXSB9KTsKICAgIH0KICAgIGlmICh0eXBlID09PSAiYmlnaW50IikgewogICAgICByZXR1cm4gdGhpcy5iaWdJbnRUcmFuc2Zvcm1lci50cmFuc2Zvcm0obWFwTnVsbGFibGVUeXBlKTsKICAgIH0KICAgIHJldHVybiBtYXBOdWxsYWJsZVR5cGUoIm51bGwiKTsKICB9Cn07CnZhciBOdW1iZXJUcmFuc2Zvcm1lciA9IGNsYXNzIHsKICB0cmFuc2Zvcm0oem9kU2NoZW1hLCBtYXBOdWxsYWJsZVR5cGUsIGdldE51bWJlckNoZWNrcykgewogICAgdmFyIF9hOwogICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBtYXBOdWxsYWJsZVR5cGUoIm51bWJlciIpKSwgbWFwTnVsbGFibGVUeXBlKHpvZFNjaGVtYS5mb3JtYXQgPT09ICJzYWZlaW50IiA/ICJpbnRlZ2VyIiA6ICJudW1iZXIiKSksIGdldE51bWJlckNoZWNrcygoX2EgPSB6b2RTY2hlbWEuZGVmLmNoZWNrcykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogW10pKTsKICB9Cn07CnZhciBPYmplY3RUcmFuc2Zvcm1lciA9IGNsYXNzIHsKICB0cmFuc2Zvcm0oem9kU2NoZW1hLCBkZWZhdWx0VmFsdWUsIG1hcE51bGxhYmxlVHlwZSwgbWFwSXRlbSkgewogICAgdmFyIF9hOwogICAgY29uc3QgZXh0ZW5kZWRGcm9tID0gKF9hID0gTWV0YWRhdGEuZ2V0SW50ZXJuYWxNZXRhZGF0YSh6b2RTY2hlbWEpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZXh0ZW5kZWRGcm9tOwogICAgY29uc3QgcmVxdWlyZWQgPSB0aGlzLnJlcXVpcmVkS2V5c09mKHpvZFNjaGVtYSk7CiAgICBjb25zdCBwcm9wZXJ0aWVzID0gbWFwVmFsdWVzKHpvZFNjaGVtYS5kZWYuc2hhcGUsIG1hcEl0ZW0pOwogICAgaWYgKCFleHRlbmRlZEZyb20pIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG1hcE51bGxhYmxlVHlwZSgib2JqZWN0IikpLCB7IHByb3BlcnRpZXMsIGRlZmF1bHQ6IGRlZmF1bHRWYWx1ZSB9KSwgcmVxdWlyZWQubGVuZ3RoID4gMCA/IHsgcmVxdWlyZWQgfSA6IHt9KSwgdGhpcy5nZW5lcmF0ZUFkZGl0aW9uYWxQcm9wZXJ0aWVzKHpvZFNjaGVtYSwgbWFwSXRlbSkpOwogICAgfQogICAgY29uc3QgcGFyZW50ID0gZXh0ZW5kZWRGcm9tLnNjaGVtYTsKICAgIG1hcEl0ZW0ocGFyZW50KTsKICAgIGNvbnN0IGtleXNSZXF1aXJlZEJ5UGFyZW50ID0gdGhpcy5yZXF1aXJlZEtleXNPZihwYXJlbnQpOwogICAgY29uc3QgcHJvcHNPZlBhcmVudCA9IG1hcFZhbHVlcyhwYXJlbnQgPT09IG51bGwgfHwgcGFyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnQuZGVmLnNoYXBlLCBtYXBJdGVtKTsKICAgIGNvbnN0IHByb3BlcnRpZXNUb0FkZCA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhwcm9wZXJ0aWVzKS5maWx0ZXIoKFtrZXksIHR5cGVdKSA9PiB7CiAgICAgIHJldHVybiAhb2JqZWN0RXF1YWxzKHByb3BzT2ZQYXJlbnRba2V5XSwgdHlwZSk7CiAgICB9KSk7CiAgICBjb25zdCBhZGRpdGlvbmFsbHlSZXF1aXJlZCA9IHJlcXVpcmVkLmZpbHRlcigocHJvcCkgPT4gIWtleXNSZXF1aXJlZEJ5UGFyZW50LmluY2x1ZGVzKHByb3ApKTsKICAgIGNvbnN0IG9iamVjdERhdGEgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBtYXBOdWxsYWJsZVR5cGUoIm9iamVjdCIpKSwgeyBkZWZhdWx0OiBkZWZhdWx0VmFsdWUsIHByb3BlcnRpZXM6IHByb3BlcnRpZXNUb0FkZCB9KSwgYWRkaXRpb25hbGx5UmVxdWlyZWQubGVuZ3RoID4gMCA/IHsgcmVxdWlyZWQ6IGFkZGl0aW9uYWxseVJlcXVpcmVkIH0gOiB7fSksIHRoaXMuZ2VuZXJhdGVBZGRpdGlvbmFsUHJvcGVydGllcyh6b2RTY2hlbWEsIG1hcEl0ZW0pKTsKICAgIHJldHVybiB7CiAgICAgIGFsbE9mOiBbCiAgICAgICAgeyAkcmVmOiBgIy9jb21wb25lbnRzL3NjaGVtYXMvJHtleHRlbmRlZEZyb20ucmVmSWR9YCB9LAogICAgICAgIG9iamVjdERhdGEKICAgICAgXQogICAgfTsKICB9CiAgZ2VuZXJhdGVBZGRpdGlvbmFsUHJvcGVydGllcyh6b2RTY2hlbWEsIG1hcEl0ZW0pIHsKICAgIGNvbnN0IGNhdGNoYWxsU2NoZW1hID0gem9kU2NoZW1hLmRlZi5jYXRjaGFsbDsKICAgIGlmICghY2F0Y2hhbGxTY2hlbWEpIHsKICAgICAgcmV0dXJuIHt9OwogICAgfQogICAgaWYgKGlzWm9kVHlwZShjYXRjaGFsbFNjaGVtYSwgIlpvZE5ldmVyIikpIHsKICAgICAgcmV0dXJuIHsgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlIH07CiAgICB9CiAgICBpZiAoaXNBbnlab2RUeXBlKGNhdGNoYWxsU2NoZW1hKSkgewogICAgICByZXR1cm4geyBhZGRpdGlvbmFsUHJvcGVydGllczogbWFwSXRlbShjYXRjaGFsbFNjaGVtYSkgfTsKICAgIH0KICAgIHJldHVybiB7fTsKICB9CiAgcmVxdWlyZWRLZXlzT2Yob2JqZWN0U2NoZW1hKSB7CiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMob2JqZWN0U2NoZW1hLmRlZi5zaGFwZSkuZmlsdGVyKChbX2tleSwgdHlwZV0pID0+ICFpc09wdGlvbmFsU2NoZW1hKHR5cGUpKS5tYXAoKFtrZXksIF90eXBlXSkgPT4ga2V5KTsKICB9Cn07CnZhciBSZWNvcmRUcmFuc2Zvcm1lciA9IGNsYXNzIHsKICB0cmFuc2Zvcm0oem9kU2NoZW1hLCBtYXBOdWxsYWJsZVR5cGUsIG1hcEl0ZW0pIHsKICAgIGNvbnN0IHByb3BlcnRpZXNUeXBlID0gem9kU2NoZW1hLnZhbHVlVHlwZTsKICAgIGNvbnN0IGtleVR5cGUgPSB6b2RTY2hlbWEua2V5VHlwZTsKICAgIGNvbnN0IHByb3BlcnRpZXNTY2hlbWEgPSBpc0FueVpvZFR5cGUocHJvcGVydGllc1R5cGUpID8gbWFwSXRlbShwcm9wZXJ0aWVzVHlwZSkgOiB7fTsKICAgIGlmIChpc1pvZFR5cGUoa2V5VHlwZSwgIlpvZEVudW0iKSkgewogICAgICBjb25zdCBrZXlzID0gT2JqZWN0LnZhbHVlcyhrZXlUeXBlLl96b2QuZGVmLmVudHJpZXMpLmZpbHRlcihpc1N0cmluZyk7CiAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSBrZXlzLnJlZHVjZSgoYWNjLCBjdXJyKSA9PiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGFjYyksIHsgW2N1cnJdOiBwcm9wZXJ0aWVzU2NoZW1hIH0pLCB7fSk7CiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG1hcE51bGxhYmxlVHlwZSgib2JqZWN0IikpLCB7IHByb3BlcnRpZXMgfSk7CiAgICB9CiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBtYXBOdWxsYWJsZVR5cGUoIm9iamVjdCIpKSwgeyBhZGRpdGlvbmFsUHJvcGVydGllczogcHJvcGVydGllc1NjaGVtYSB9KTsKICB9Cn07CmZ1bmN0aW9uIGlzWm9kQ2hlY2tMZW5ndGhFcXVhbHMoY2hlY2spIHsKICByZXR1cm4gY2hlY2suX3pvZC5kZWYuY2hlY2sgPT09ICJsZW5ndGhfZXF1YWxzIjsKfQpmdW5jdGlvbiBpc1pvZENoZWNrUmVnZXgoY2hlY2spIHsKICByZXR1cm4gY2hlY2suX3pvZC5kZWYuY2hlY2sgPT09ICJzdHJpbmdfZm9ybWF0IiAmJiBjaGVjay5fem9kLmRlZi5mb3JtYXQgPT09ICJyZWdleCI7Cn0KdmFyIFN0cmluZ1RyYW5zZm9ybWVyID0gY2xhc3MgewogIHRyYW5zZm9ybSh6b2RTY2hlbWEsIG1hcE51bGxhYmxlVHlwZSkgewogICAgdmFyIF9hLCBfYiwgX2MsIF9kOwogICAgY29uc3QgcmVnZXhDaGVjayA9IChfYSA9IHpvZFNjaGVtYS5kZWYuY2hlY2tzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZmluZChpc1pvZENoZWNrUmVnZXgpOwogICAgY29uc3QgcGF0dGVybiA9IHJlZ2V4Q2hlY2sgPT09IG51bGwgfHwgcmVnZXhDaGVjayA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVnZXhDaGVjay5fem9kLmRlZi5wYXR0ZXJuLnRvU3RyaW5nKCkucmVwbGFjZSgvXlwvfFwvJC9nLCAiIik7CiAgICBjb25zdCBjaGVjayA9IChfYiA9IHpvZFNjaGVtYS5kZWYuY2hlY2tzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZmluZChpc1pvZENoZWNrTGVuZ3RoRXF1YWxzKTsKICAgIGNvbnN0IGxlbmd0aCA9IGNoZWNrID09PSBudWxsIHx8IGNoZWNrID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjaGVjay5fem9kLmRlZi5sZW5ndGg7CiAgICBjb25zdCBtYXhMZW5ndGggPSBOdW1iZXIuaXNGaW5pdGUoem9kU2NoZW1hLm1pbkxlbmd0aCkgPyAoX2MgPSB6b2RTY2hlbWEubWluTGVuZ3RoKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiB2b2lkIDAgOiB2b2lkIDA7CiAgICBjb25zdCBtaW5MZW5ndGggPSBOdW1iZXIuaXNGaW5pdGUoem9kU2NoZW1hLm1heExlbmd0aCkgPyAoX2QgPSB6b2RTY2hlbWEubWF4TGVuZ3RoKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiB2b2lkIDAgOiB2b2lkIDA7CiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBtYXBOdWxsYWJsZVR5cGUoInN0cmluZyIpKSwgewogICAgICAvLyBGSVhNRTogaHR0cHM6Ly9naXRodWIuY29tL2NvbGluaGFja3Mvem9kL2NvbW1pdC9kNzgwNDdlOWY0NDU5NmE5NmQ2MzdhYmIwY2UyMDljZDI3MzJkODhjCiAgICAgIG1pbkxlbmd0aDogbGVuZ3RoICE9PSBudWxsICYmIGxlbmd0aCAhPT0gdm9pZCAwID8gbGVuZ3RoIDogbWF4TGVuZ3RoLAogICAgICBtYXhMZW5ndGg6IGxlbmd0aCAhPT0gbnVsbCAmJiBsZW5ndGggIT09IHZvaWQgMCA/IGxlbmd0aCA6IG1pbkxlbmd0aCwKICAgICAgZm9ybWF0OiB0aGlzLm1hcFN0cmluZ0Zvcm1hdCh6b2RTY2hlbWEpLAogICAgICBwYXR0ZXJuCiAgICB9KTsKICB9CiAgLyoqCiAgICogQXR0ZW1wdHMgdG8gbWFwIFpvZCBzdHJpbmdzIHRvIGtub3duIGZvcm1hdHMKICAgKiBodHRwczovL2pzb24tc2NoZW1hLm9yZy91bmRlcnN0YW5kaW5nLWpzb24tc2NoZW1hL3JlZmVyZW5jZS9zdHJpbmcuaHRtbCNidWlsdC1pbi1mb3JtYXRzCiAgICovCiAgbWFwU3RyaW5nRm9ybWF0KHpvZFN0cmluZykgewogICAgaWYgKHpvZFN0cmluZy5mb3JtYXQgPT09ICJ1dWlkIikKICAgICAgcmV0dXJuICJ1dWlkIjsKICAgIGlmICh6b2RTdHJpbmcuZm9ybWF0ID09PSAiZW1haWwiKQogICAgICByZXR1cm4gImVtYWlsIjsKICAgIGlmICh6b2RTdHJpbmcuZm9ybWF0ID09PSAidXJsIikKICAgICAgcmV0dXJuICJ1cmkiOwogICAgaWYgKHpvZFN0cmluZy5mb3JtYXQgPT09ICJkYXRlIikKICAgICAgcmV0dXJuICJkYXRlIjsKICAgIGlmICh6b2RTdHJpbmcuZm9ybWF0ID09PSAiZGF0ZXRpbWUiKQogICAgICByZXR1cm4gImRhdGUtdGltZSI7CiAgICBpZiAoem9kU3RyaW5nLmZvcm1hdCA9PT0gImN1aWQiKQogICAgICByZXR1cm4gImN1aWQiOwogICAgaWYgKHpvZFN0cmluZy5mb3JtYXQgPT09ICJjdWlkMiIpCiAgICAgIHJldHVybiAiY3VpZDIiOwogICAgaWYgKHpvZFN0cmluZy5mb3JtYXQgPT09ICJ1bGlkIikKICAgICAgcmV0dXJuICJ1bGlkIjsKICAgIGlmICh6b2RTdHJpbmcuZm9ybWF0ID09PSAiaXB2NCIpCiAgICAgIHJldHVybiAiaXAiOwogICAgaWYgKHpvZFN0cmluZy5mb3JtYXQgPT09ICJpcHY2IikKICAgICAgcmV0dXJuICJpcCI7CiAgICBpZiAoem9kU3RyaW5nLmZvcm1hdCA9PT0gImVtb2ppIikKICAgICAgcmV0dXJuICJlbW9qaSI7CiAgICByZXR1cm4gdm9pZCAwOwogIH0KfTsKdmFyIFR1cGxlVHJhbnNmb3JtZXIgPSBjbGFzcyB7CiAgY29uc3RydWN0b3IodmVyc2lvblNwZWNpZmljcykgewogICAgdGhpcy52ZXJzaW9uU3BlY2lmaWNzID0gdmVyc2lvblNwZWNpZmljczsKICB9CiAgdHJhbnNmb3JtKHpvZFNjaGVtYSwgbWFwTnVsbGFibGVUeXBlLCBtYXBJdGVtKSB7CiAgICBjb25zdCBpdGVtcyA9IHpvZFNjaGVtYS5fem9kLmRlZi5pdGVtczsKICAgIGNvbnN0IHNjaGVtYXMgPSBpdGVtcy5tYXAoKGl0ZW0pID0+IGlzQW55Wm9kVHlwZShpdGVtKSA/IG1hcEl0ZW0oaXRlbSkgOiB7fSk7CiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBtYXBOdWxsYWJsZVR5cGUoImFycmF5IikpLCB0aGlzLnZlcnNpb25TcGVjaWZpY3MubWFwVHVwbGVJdGVtcyhzY2hlbWFzKSk7CiAgfQp9Owp2YXIgVW5pb25UcmFuc2Zvcm1lciA9IGNsYXNzIHsKICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwogIH0KICB0cmFuc2Zvcm0oem9kU2NoZW1hLCBtYXBOdWxsYWJsZU9mQXJyYXksIG1hcEl0ZW0pIHsKICAgIHZhciBfYSwgX2IsIF9jOwogICAgY29uc3QgaW50ZXJuYWxNZXRhZGF0YSA9IE1ldGFkYXRhLmdldEludGVybmFsTWV0YWRhdGEoem9kU2NoZW1hKTsKICAgIGNvbnN0IHByZWZlcnJlZFR5cGUgPSAoX2MgPSAoX2EgPSBpbnRlcm5hbE1ldGFkYXRhID09PSBudWxsIHx8IGludGVybmFsTWV0YWRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGludGVybmFsTWV0YWRhdGEudW5pb25QcmVmZXJyZWRUeXBlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAoX2IgPSB0aGlzLm9wdGlvbnMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi51bmlvblByZWZlcnJlZFR5cGUpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6ICJhbnlPZiI7CiAgICBjb25zdCBvcHRpb25zID0gdGhpcy5mbGF0dGVuVW5pb25UeXBlcyh6b2RTY2hlbWEpOwogICAgY29uc3Qgc2NoZW1hcyA9IG9wdGlvbnMubWFwKChzY2hlbWEpID0+IHsKICAgICAgY29uc3Qgb3B0aW9uVG9HZW5lcmF0ZSA9IHRoaXMudW53cmFwTnVsbGFibGUoc2NoZW1hKTsKICAgICAgcmV0dXJuIG1hcEl0ZW0ob3B0aW9uVG9HZW5lcmF0ZSk7CiAgICB9KTsKICAgIHJldHVybiB7CiAgICAgIFtwcmVmZXJyZWRUeXBlXTogbWFwTnVsbGFibGVPZkFycmF5KHNjaGVtYXMpCiAgICB9OwogIH0KICBmbGF0dGVuVW5pb25UeXBlcyhzY2hlbWEpIHsKICAgIGlmICghaXNab2RUeXBlKHNjaGVtYSwgIlpvZFVuaW9uIikpIHsKICAgICAgcmV0dXJuIFtzY2hlbWFdOwogICAgfQogICAgY29uc3Qgb3B0aW9ucyA9IHNjaGVtYS5kZWYub3B0aW9uczsKICAgIHJldHVybiBvcHRpb25zLmZsYXRNYXAoKG9wdGlvbikgPT4gaXNBbnlab2RUeXBlKG9wdGlvbikgPyB0aGlzLmZsYXR0ZW5VbmlvblR5cGVzKG9wdGlvbikgOiBbXSk7CiAgfQogIHVud3JhcE51bGxhYmxlKHNjaGVtYSkgewogICAgaWYgKGlzWm9kVHlwZShzY2hlbWEsICJab2ROdWxsYWJsZSIpKSB7CiAgICAgIGNvbnN0IHVud3JhcHBlZCA9IHNjaGVtYS51bndyYXAoKTsKICAgICAgaWYgKGlzQW55Wm9kVHlwZSh1bndyYXBwZWQpKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudW53cmFwTnVsbGFibGUodW53cmFwcGVkKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHNjaGVtYTsKICB9Cn07CnZhciBEYXRlVHJhbnNmb3JtZXIgPSBjbGFzcyB7CiAgdHJhbnNmb3JtKG1hcE51bGxhYmxlVHlwZSkgewogICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbWFwTnVsbGFibGVUeXBlKCJzdHJpbmciKSksIHsgZm9ybWF0OiAiZGF0ZSIgfSk7CiAgfQp9Owp2YXIgT3BlbkFwaVRyYW5zZm9ybWVyID0gY2xhc3MgewogIGNvbnN0cnVjdG9yKHZlcnNpb25TcGVjaWZpY3MsIG9wdGlvbnMpIHsKICAgIHRoaXMudmVyc2lvblNwZWNpZmljcyA9IHZlcnNpb25TcGVjaWZpY3M7CiAgICB0aGlzLm9iamVjdFRyYW5zZm9ybWVyID0gbmV3IE9iamVjdFRyYW5zZm9ybWVyKCk7CiAgICB0aGlzLnN0cmluZ1RyYW5zZm9ybWVyID0gbmV3IFN0cmluZ1RyYW5zZm9ybWVyKCk7CiAgICB0aGlzLm51bWJlclRyYW5zZm9ybWVyID0gbmV3IE51bWJlclRyYW5zZm9ybWVyKCk7CiAgICB0aGlzLmJpZ0ludFRyYW5zZm9ybWVyID0gbmV3IEJpZ0ludFRyYW5zZm9ybWVyKCk7CiAgICB0aGlzLmRhdGVUcmFuc2Zvcm1lciA9IG5ldyBEYXRlVHJhbnNmb3JtZXIoKTsKICAgIHRoaXMubGl0ZXJhbFRyYW5zZm9ybWVyID0gbmV3IExpdGVyYWxUcmFuc2Zvcm1lcigpOwogICAgdGhpcy5lbnVtVHJhbnNmb3JtZXIgPSBuZXcgRW51bVRyYW5zZm9ybWVyKCk7CiAgICB0aGlzLmFycmF5VHJhbnNmb3JtZXIgPSBuZXcgQXJyYXlUcmFuc2Zvcm1lcigpOwogICAgdGhpcy5kaXNjcmltaW5hdGVkVW5pb25UcmFuc2Zvcm1lciA9IG5ldyBEaXNjcmltaW5hdGVkVW5pb25UcmFuc2Zvcm1lcigpOwogICAgdGhpcy5pbnRlcnNlY3Rpb25UcmFuc2Zvcm1lciA9IG5ldyBJbnRlcnNlY3Rpb25UcmFuc2Zvcm1lcigpOwogICAgdGhpcy5yZWNvcmRUcmFuc2Zvcm1lciA9IG5ldyBSZWNvcmRUcmFuc2Zvcm1lcigpOwogICAgdGhpcy50dXBsZVRyYW5zZm9ybWVyID0gbmV3IFR1cGxlVHJhbnNmb3JtZXIodmVyc2lvblNwZWNpZmljcyk7CiAgICB0aGlzLnVuaW9uVHJhbnNmb3JtZXIgPSBuZXcgVW5pb25UcmFuc2Zvcm1lcihvcHRpb25zKTsKICB9CiAgdHJhbnNmb3JtKHpvZFNjaGVtYSwgaXNOdWxsYWJsZSwgbWFwSXRlbSwgZ2VuZXJhdGVTY2hlbWFSZWYsIGRlZmF1bHRWYWx1ZSkgewogICAgaWYgKGlzWm9kVHlwZSh6b2RTY2hlbWEsICJab2ROdWxsIikpIHsKICAgICAgcmV0dXJuIHRoaXMudmVyc2lvblNwZWNpZmljcy5udWxsVHlwZTsKICAgIH0KICAgIGlmIChpc1pvZFR5cGUoem9kU2NoZW1hLCAiWm9kVW5rbm93biIpIHx8IGlzWm9kVHlwZSh6b2RTY2hlbWEsICJab2RBbnkiKSkgewogICAgICByZXR1cm4gdGhpcy52ZXJzaW9uU3BlY2lmaWNzLm1hcE51bGxhYmxlVHlwZSh2b2lkIDAsIGlzTnVsbGFibGUpOwogICAgfQogICAgaWYgKGlzWm9kVHlwZSh6b2RTY2hlbWEsICJab2RPYmplY3QiKSkgewogICAgICByZXR1cm4gdGhpcy5vYmplY3RUcmFuc2Zvcm1lci50cmFuc2Zvcm0oCiAgICAgICAgem9kU2NoZW1hLAogICAgICAgIGRlZmF1bHRWYWx1ZSwKICAgICAgICAvLyB2ZXJpZmllZCBvbiBUUyBsZXZlbCBmcm9tIGlucHV0CiAgICAgICAgLy8gdmVyaWZpZWQgb24gVFMgbGV2ZWwgZnJvbSBpbnB1dAogICAgICAgIChfKSA9PiB0aGlzLnZlcnNpb25TcGVjaWZpY3MubWFwTnVsbGFibGVUeXBlKF8sIGlzTnVsbGFibGUpLAogICAgICAgIG1hcEl0ZW0KICAgICAgKTsKICAgIH0KICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMudHJhbnNmb3JtU2NoZW1hV2l0aG91dERlZmF1bHQoem9kU2NoZW1hLCBpc051bGxhYmxlLCBtYXBJdGVtLCBnZW5lcmF0ZVNjaGVtYVJlZik7CiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBzY2hlbWEpLCB7IGRlZmF1bHQ6IGRlZmF1bHRWYWx1ZSB9KTsKICB9CiAgdHJhbnNmb3JtU2NoZW1hV2l0aG91dERlZmF1bHQoem9kU2NoZW1hLCBpc051bGxhYmxlLCBtYXBJdGVtLCBnZW5lcmF0ZVNjaGVtYVJlZikgewogICAgaWYgKGlzWm9kVHlwZSh6b2RTY2hlbWEsICJab2RVbmtub3duIikgfHwgaXNab2RUeXBlKHpvZFNjaGVtYSwgIlpvZEFueSIpKSB7CiAgICAgIHJldHVybiB0aGlzLnZlcnNpb25TcGVjaWZpY3MubWFwTnVsbGFibGVUeXBlKHZvaWQgMCwgaXNOdWxsYWJsZSk7CiAgICB9CiAgICBpZiAoaXNab2RUeXBlKHpvZFNjaGVtYSwgIlpvZFN0cmluZyIpKSB7CiAgICAgIHJldHVybiB0aGlzLnN0cmluZ1RyYW5zZm9ybWVyLnRyYW5zZm9ybSh6b2RTY2hlbWEsIChzY2hlbWEpID0+IHRoaXMudmVyc2lvblNwZWNpZmljcy5tYXBOdWxsYWJsZVR5cGUoc2NoZW1hLCBpc051bGxhYmxlKSk7CiAgICB9CiAgICBpZiAoaXNab2RUeXBlKHpvZFNjaGVtYSwgIlpvZE51bWJlciIpKSB7CiAgICAgIHJldHVybiB0aGlzLm51bWJlclRyYW5zZm9ybWVyLnRyYW5zZm9ybSh6b2RTY2hlbWEsIChzY2hlbWEpID0+IHRoaXMudmVyc2lvblNwZWNpZmljcy5tYXBOdWxsYWJsZVR5cGUoc2NoZW1hLCBpc051bGxhYmxlKSwgKF8pID0+IHRoaXMudmVyc2lvblNwZWNpZmljcy5nZXROdW1iZXJDaGVja3MoXykpOwogICAgfQogICAgaWYgKGlzWm9kVHlwZSh6b2RTY2hlbWEsICJab2RCaWdJbnQiKSkgewogICAgICByZXR1cm4gdGhpcy5iaWdJbnRUcmFuc2Zvcm1lci50cmFuc2Zvcm0oKHNjaGVtYSkgPT4gdGhpcy52ZXJzaW9uU3BlY2lmaWNzLm1hcE51bGxhYmxlVHlwZShzY2hlbWEsIGlzTnVsbGFibGUpKTsKICAgIH0KICAgIGlmIChpc1pvZFR5cGUoem9kU2NoZW1hLCAiWm9kQm9vbGVhbiIpKSB7CiAgICAgIHJldHVybiB0aGlzLnZlcnNpb25TcGVjaWZpY3MubWFwTnVsbGFibGVUeXBlKCJib29sZWFuIiwgaXNOdWxsYWJsZSk7CiAgICB9CiAgICBpZiAoaXNab2RUeXBlKHpvZFNjaGVtYSwgIlpvZExpdGVyYWwiKSkgewogICAgICByZXR1cm4gdGhpcy5saXRlcmFsVHJhbnNmb3JtZXIudHJhbnNmb3JtKHpvZFNjaGVtYSwgKHNjaGVtYSkgPT4gdGhpcy52ZXJzaW9uU3BlY2lmaWNzLm1hcE51bGxhYmxlVHlwZShzY2hlbWEsIGlzTnVsbGFibGUpKTsKICAgIH0KICAgIGlmIChpc1pvZFR5cGUoem9kU2NoZW1hLCAiWm9kRW51bSIpKSB7CiAgICAgIHJldHVybiB0aGlzLmVudW1UcmFuc2Zvcm1lci50cmFuc2Zvcm0oem9kU2NoZW1hLCAoc2NoZW1hKSA9PiB0aGlzLnZlcnNpb25TcGVjaWZpY3MubWFwTnVsbGFibGVUeXBlKHNjaGVtYSwgaXNOdWxsYWJsZSkpOwogICAgfQogICAgaWYgKGlzWm9kVHlwZSh6b2RTY2hlbWEsICJab2RBcnJheSIpKSB7CiAgICAgIHJldHVybiB0aGlzLmFycmF5VHJhbnNmb3JtZXIudHJhbnNmb3JtKHpvZFNjaGVtYSwgKF8pID0+IHRoaXMudmVyc2lvblNwZWNpZmljcy5tYXBOdWxsYWJsZVR5cGUoXywgaXNOdWxsYWJsZSksIG1hcEl0ZW0pOwogICAgfQogICAgaWYgKGlzWm9kVHlwZSh6b2RTY2hlbWEsICJab2RUdXBsZSIpKSB7CiAgICAgIHJldHVybiB0aGlzLnR1cGxlVHJhbnNmb3JtZXIudHJhbnNmb3JtKHpvZFNjaGVtYSwgKF8pID0+IHRoaXMudmVyc2lvblNwZWNpZmljcy5tYXBOdWxsYWJsZVR5cGUoXywgaXNOdWxsYWJsZSksIG1hcEl0ZW0pOwogICAgfQogICAgaWYgKGlzWm9kVHlwZSh6b2RTY2hlbWEsICJab2REaXNjcmltaW5hdGVkVW5pb24iKSkgewogICAgICByZXR1cm4gdGhpcy5kaXNjcmltaW5hdGVkVW5pb25UcmFuc2Zvcm1lci50cmFuc2Zvcm0oem9kU2NoZW1hLCBpc051bGxhYmxlLCAoXykgPT4gdGhpcy52ZXJzaW9uU3BlY2lmaWNzLm1hcE51bGxhYmxlT2ZBcnJheShfLCBpc051bGxhYmxlKSwgbWFwSXRlbSwgZ2VuZXJhdGVTY2hlbWFSZWYpOwogICAgfQogICAgaWYgKGlzWm9kVHlwZSh6b2RTY2hlbWEsICJab2RVbmlvbiIpKSB7CiAgICAgIHJldHVybiB0aGlzLnVuaW9uVHJhbnNmb3JtZXIudHJhbnNmb3JtKHpvZFNjaGVtYSwgKF8pID0+IHRoaXMudmVyc2lvblNwZWNpZmljcy5tYXBOdWxsYWJsZU9mQXJyYXkoXywgaXNOdWxsYWJsZSksIG1hcEl0ZW0pOwogICAgfQogICAgaWYgKGlzWm9kVHlwZSh6b2RTY2hlbWEsICJab2RJbnRlcnNlY3Rpb24iKSkgewogICAgICByZXR1cm4gdGhpcy5pbnRlcnNlY3Rpb25UcmFuc2Zvcm1lci50cmFuc2Zvcm0oem9kU2NoZW1hLCBpc051bGxhYmxlLCAoXykgPT4gdGhpcy52ZXJzaW9uU3BlY2lmaWNzLm1hcE51bGxhYmxlT2ZBcnJheShfLCBpc051bGxhYmxlKSwgbWFwSXRlbSk7CiAgICB9CiAgICBpZiAoaXNab2RUeXBlKHpvZFNjaGVtYSwgIlpvZFJlY29yZCIpKSB7CiAgICAgIHJldHVybiB0aGlzLnJlY29yZFRyYW5zZm9ybWVyLnRyYW5zZm9ybSh6b2RTY2hlbWEsIChfKSA9PiB0aGlzLnZlcnNpb25TcGVjaWZpY3MubWFwTnVsbGFibGVUeXBlKF8sIGlzTnVsbGFibGUpLCBtYXBJdGVtKTsKICAgIH0KICAgIGlmIChpc1pvZFR5cGUoem9kU2NoZW1hLCAiWm9kRGF0ZSIpKSB7CiAgICAgIHJldHVybiB0aGlzLmRhdGVUcmFuc2Zvcm1lci50cmFuc2Zvcm0oKF8pID0+IHRoaXMudmVyc2lvblNwZWNpZmljcy5tYXBOdWxsYWJsZVR5cGUoXywgaXNOdWxsYWJsZSkpOwogICAgfQogICAgY29uc3QgcmVmSWQgPSBNZXRhZGF0YS5nZXRSZWZJZCh6b2RTY2hlbWEpOwogICAgdGhyb3cgbmV3IFVua25vd25ab2RUeXBlRXJyb3IoewogICAgICBjdXJyZW50U2NoZW1hOiB6b2RTY2hlbWEuZGVmLAogICAgICBzY2hlbWFOYW1lOiByZWZJZAogICAgfSk7CiAgfQp9Owp2YXIgT3BlbkFQSUdlbmVyYXRvciA9IGNsYXNzIHsKICBjb25zdHJ1Y3RvcihkZWZpbml0aW9ucywgdmVyc2lvblNwZWNpZmljcywgb3B0aW9ucykgewogICAgdGhpcy5kZWZpbml0aW9ucyA9IGRlZmluaXRpb25zOwogICAgdGhpcy52ZXJzaW9uU3BlY2lmaWNzID0gdmVyc2lvblNwZWNpZmljczsKICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7CiAgICB0aGlzLnNjaGVtYVJlZnMgPSB7fTsKICAgIHRoaXMucGFyYW1SZWZzID0ge307CiAgICB0aGlzLnBhdGhSZWZzID0ge307CiAgICB0aGlzLnJhd0NvbXBvbmVudHMgPSBbXTsKICAgIHRoaXMub3BlbkFwaVRyYW5zZm9ybWVyID0gbmV3IE9wZW5BcGlUcmFuc2Zvcm1lcih2ZXJzaW9uU3BlY2lmaWNzLCBvcHRpb25zKTsKICAgIHRoaXMuc29ydERlZmluaXRpb25zKCk7CiAgfQogIGdlbmVyYXRlRG9jdW1lbnREYXRhKCkgewogICAgdGhpcy5kZWZpbml0aW9ucy5mb3JFYWNoKChkZWZpbml0aW9uKSA9PiB0aGlzLmdlbmVyYXRlU2luZ2xlKGRlZmluaXRpb24pKTsKICAgIHJldHVybiB7CiAgICAgIGNvbXBvbmVudHM6IHRoaXMuYnVpbGRDb21wb25lbnRzKCksCiAgICAgIHBhdGhzOiB0aGlzLnBhdGhSZWZzCiAgICB9OwogIH0KICBnZW5lcmF0ZUNvbXBvbmVudHMoKSB7CiAgICB0aGlzLmRlZmluaXRpb25zLmZvckVhY2goKGRlZmluaXRpb24pID0+IHRoaXMuZ2VuZXJhdGVTaW5nbGUoZGVmaW5pdGlvbikpOwogICAgcmV0dXJuIHsKICAgICAgY29tcG9uZW50czogdGhpcy5idWlsZENvbXBvbmVudHMoKQogICAgfTsKICB9CiAgYnVpbGRDb21wb25lbnRzKCkgewogICAgdmFyIF9hLCBfYiwgX2MsIF9kOwogICAgY29uc3QgcmF3Q29tcG9uZW50cyA9IHt9OwogICAgdGhpcy5yYXdDb21wb25lbnRzLmZvckVhY2goKHsgY29tcG9uZW50VHlwZSwgbmFtZSwgY29tcG9uZW50IH0pID0+IHsKICAgICAgdmFyIF9hMjsKICAgICAgKF9hMiA9IHJhd0NvbXBvbmVudHNbY29tcG9uZW50VHlwZV0pICE9PSBudWxsICYmIF9hMiAhPT0gdm9pZCAwID8gX2EyIDogcmF3Q29tcG9uZW50c1tjb21wb25lbnRUeXBlXSA9IHt9OwogICAgICByYXdDb21wb25lbnRzW2NvbXBvbmVudFR5cGVdW25hbWVdID0gY29tcG9uZW50OwogICAgfSk7CiAgICBjb25zdCBhbGxTY2hlbWFzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCAoX2EgPSByYXdDb21wb25lbnRzLnNjaGVtYXMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9KSwgdGhpcy5zY2hlbWFSZWZzKTsKICAgIGNvbnN0IHNjaGVtYXMgPSAoKF9iID0gdGhpcy5vcHRpb25zKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Iuc29ydENvbXBvbmVudHMpID09PSAiYWxwaGFiZXRpY2FsbHkiID8gc29ydE9iamVjdEJ5S2V5cyhhbGxTY2hlbWFzKSA6IGFsbFNjaGVtYXM7CiAgICBjb25zdCBhbGxQYXJhbWV0ZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCAoX2MgPSByYXdDb21wb25lbnRzLnBhcmFtZXRlcnMpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IHt9KSwgdGhpcy5wYXJhbVJlZnMpOwogICAgY29uc3QgcGFyYW1ldGVycyA9ICgoX2QgPSB0aGlzLm9wdGlvbnMpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5zb3J0Q29tcG9uZW50cykgPT09ICJhbHBoYWJldGljYWxseSIgPyBzb3J0T2JqZWN0QnlLZXlzKGFsbFBhcmFtZXRlcnMpIDogYWxsUGFyYW1ldGVyczsKICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJhd0NvbXBvbmVudHMpLCB7IHNjaGVtYXMsIHBhcmFtZXRlcnMgfSk7CiAgfQogIHNvcnRPYmplY3RLZXlzKG9iamVjdCkgewogIH0KICBzb3J0RGVmaW5pdGlvbnMoKSB7CiAgICBjb25zdCBnZW5lcmF0aW9uT3JkZXIgPSBbCiAgICAgICJzY2hlbWEiLAogICAgICAicGFyYW1ldGVyIiwKICAgICAgImNvbXBvbmVudCIsCiAgICAgICJyb3V0ZSIKICAgIF07CiAgICB0aGlzLmRlZmluaXRpb25zLnNvcnQoKGxlZnQsIHJpZ2h0KSA9PiB7CiAgICAgIGlmICghKCJ0eXBlIiBpbiBsZWZ0KSkgewogICAgICAgIGlmICghKCJ0eXBlIiBpbiByaWdodCkpIHsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0KICAgICAgaWYgKCEoInR5cGUiIGluIHJpZ2h0KSkgewogICAgICAgIHJldHVybiAxOwogICAgICB9CiAgICAgIGNvbnN0IGxlZnRJbmRleCA9IGdlbmVyYXRpb25PcmRlci5maW5kSW5kZXgoKHR5cGUpID0+IHR5cGUgPT09IGxlZnQudHlwZSk7CiAgICAgIGNvbnN0IHJpZ2h0SW5kZXggPSBnZW5lcmF0aW9uT3JkZXIuZmluZEluZGV4KCh0eXBlKSA9PiB0eXBlID09PSByaWdodC50eXBlKTsKICAgICAgcmV0dXJuIGxlZnRJbmRleCAtIHJpZ2h0SW5kZXg7CiAgICB9KTsKICB9CiAgZ2VuZXJhdGVTaW5nbGUoZGVmaW5pdGlvbikgewogICAgaWYgKCEoInR5cGUiIGluIGRlZmluaXRpb24pKSB7CiAgICAgIHRoaXMuZ2VuZXJhdGVTY2hlbWFXaXRoUmVmKGRlZmluaXRpb24pOwogICAgICByZXR1cm47CiAgICB9CiAgICBzd2l0Y2ggKGRlZmluaXRpb24udHlwZSkgewogICAgICBjYXNlICJwYXJhbWV0ZXIiOgogICAgICAgIHRoaXMuZ2VuZXJhdGVQYXJhbWV0ZXJEZWZpbml0aW9uKGRlZmluaXRpb24uc2NoZW1hKTsKICAgICAgICByZXR1cm47CiAgICAgIGNhc2UgInNjaGVtYSI6CiAgICAgICAgdGhpcy5nZW5lcmF0ZVNjaGVtYVdpdGhSZWYoZGVmaW5pdGlvbi5zY2hlbWEpOwogICAgICAgIHJldHVybjsKICAgICAgY2FzZSAicm91dGUiOgogICAgICAgIHRoaXMuZ2VuZXJhdGVTaW5nbGVSb3V0ZShkZWZpbml0aW9uLnJvdXRlKTsKICAgICAgICByZXR1cm47CiAgICAgIGNhc2UgImNvbXBvbmVudCI6CiAgICAgICAgdGhpcy5yYXdDb21wb25lbnRzLnB1c2goZGVmaW5pdGlvbik7CiAgICAgICAgcmV0dXJuOwogICAgfQogIH0KICBnZW5lcmF0ZVBhcmFtZXRlckRlZmluaXRpb24oem9kU2NoZW1hKSB7CiAgICBjb25zdCByZWZJZCA9IE1ldGFkYXRhLmdldFJlZklkKHpvZFNjaGVtYSk7CiAgICBjb25zdCByZXN1bHQgPSB0aGlzLmdlbmVyYXRlUGFyYW1ldGVyKHpvZFNjaGVtYSk7CiAgICBpZiAocmVmSWQpIHsKICAgICAgdGhpcy5wYXJhbVJlZnNbcmVmSWRdID0gcmVzdWx0OwogICAgfQogICAgcmV0dXJuIHJlc3VsdDsKICB9CiAgZ2V0UGFyYW1ldGVyUmVmKHNjaGVtYSwgZXh0ZXJuYWwpIHsKICAgIGNvbnN0IG1ldGFkYXRhID0gTWV0YWRhdGEuZ2V0T3BlbkFwaU1ldGFkYXRhKHNjaGVtYSk7CiAgICBjb25zdCBpbnRlcm5hbE1ldGFkYXRhID0gTWV0YWRhdGEuZ2V0SW50ZXJuYWxNZXRhZGF0YShzY2hlbWEpOwogICAgY29uc3QgcGFyYW1ldGVyTWV0YWRhdGEgPSBtZXRhZGF0YSA9PT0gbnVsbCB8fCBtZXRhZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWV0YWRhdGEucGFyYW07CiAgICBjb25zdCBleGlzdGluZ1JlZiA9IChpbnRlcm5hbE1ldGFkYXRhID09PSBudWxsIHx8IGludGVybmFsTWV0YWRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGludGVybmFsTWV0YWRhdGEucmVmSWQpID8gdGhpcy5wYXJhbVJlZnNbaW50ZXJuYWxNZXRhZGF0YS5yZWZJZF0gOiB2b2lkIDA7CiAgICBpZiAoIShpbnRlcm5hbE1ldGFkYXRhID09PSBudWxsIHx8IGludGVybmFsTWV0YWRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGludGVybmFsTWV0YWRhdGEucmVmSWQpIHx8ICFleGlzdGluZ1JlZikgewogICAgICByZXR1cm4gdm9pZCAwOwogICAgfQogICAgaWYgKHBhcmFtZXRlck1ldGFkYXRhICYmIGV4aXN0aW5nUmVmLmluICE9PSBwYXJhbWV0ZXJNZXRhZGF0YS5pbiB8fCAoZXh0ZXJuYWwgPT09IG51bGwgfHwgZXh0ZXJuYWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGV4dGVybmFsLmluKSAmJiBleGlzdGluZ1JlZi5pbiAhPT0gZXh0ZXJuYWwuaW4pIHsKICAgICAgdGhyb3cgbmV3IENvbmZsaWN0RXJyb3IoYENvbmZsaWN0aW5nIGxvY2F0aW9uIGZvciBwYXJhbWV0ZXIgJHtleGlzdGluZ1JlZi5uYW1lfWAsIHsKICAgICAgICBrZXk6ICJpbiIsCiAgICAgICAgdmFsdWVzOiBjb21wYWN0KFsKICAgICAgICAgIGV4aXN0aW5nUmVmLmluLAogICAgICAgICAgZXh0ZXJuYWwgPT09IG51bGwgfHwgZXh0ZXJuYWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGV4dGVybmFsLmluLAogICAgICAgICAgcGFyYW1ldGVyTWV0YWRhdGEgPT09IG51bGwgfHwgcGFyYW1ldGVyTWV0YWRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmFtZXRlck1ldGFkYXRhLmluCiAgICAgICAgXSkKICAgICAgfSk7CiAgICB9CiAgICBpZiAocGFyYW1ldGVyTWV0YWRhdGEgJiYgZXhpc3RpbmdSZWYubmFtZSAhPT0gcGFyYW1ldGVyTWV0YWRhdGEubmFtZSB8fCAoZXh0ZXJuYWwgPT09IG51bGwgfHwgZXh0ZXJuYWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGV4dGVybmFsLm5hbWUpICYmIGV4aXN0aW5nUmVmLm5hbWUgIT09IChleHRlcm5hbCA9PT0gbnVsbCB8fCBleHRlcm5hbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXh0ZXJuYWwubmFtZSkpIHsKICAgICAgdGhyb3cgbmV3IENvbmZsaWN0RXJyb3IoYENvbmZsaWN0aW5nIG5hbWVzIGZvciBwYXJhbWV0ZXJgLCB7CiAgICAgICAga2V5OiAibmFtZSIsCiAgICAgICAgdmFsdWVzOiBjb21wYWN0KFsKICAgICAgICAgIGV4aXN0aW5nUmVmLm5hbWUsCiAgICAgICAgICBleHRlcm5hbCA9PT0gbnVsbCB8fCBleHRlcm5hbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXh0ZXJuYWwubmFtZSwKICAgICAgICAgIHBhcmFtZXRlck1ldGFkYXRhID09PSBudWxsIHx8IHBhcmFtZXRlck1ldGFkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbWV0ZXJNZXRhZGF0YS5uYW1lCiAgICAgICAgXSkKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gewogICAgICAkcmVmOiBgIy9jb21wb25lbnRzL3BhcmFtZXRlcnMvJHtpbnRlcm5hbE1ldGFkYXRhLnJlZklkfWAKICAgIH07CiAgfQogIGdlbmVyYXRlSW5saW5lUGFyYW1ldGVycyh6b2RTY2hlbWEsIGxvY2F0aW9uKSB7CiAgICBjb25zdCBtZXRhZGF0YSA9IE1ldGFkYXRhLmdldE9wZW5BcGlNZXRhZGF0YSh6b2RTY2hlbWEpOwogICAgY29uc3QgcGFyYW1ldGVyTWV0YWRhdGEgPSBtZXRhZGF0YSA9PT0gbnVsbCB8fCBtZXRhZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWV0YWRhdGEucGFyYW07CiAgICBjb25zdCByZWZlcmVuY2VkU2NoZW1hID0gdGhpcy5nZXRQYXJhbWV0ZXJSZWYoem9kU2NoZW1hLCB7IGluOiBsb2NhdGlvbiB9KTsKICAgIGlmIChyZWZlcmVuY2VkU2NoZW1hKSB7CiAgICAgIHJldHVybiBbcmVmZXJlbmNlZFNjaGVtYV07CiAgICB9CiAgICBpZiAoaXNab2RUeXBlKHpvZFNjaGVtYSwgIlpvZE9iamVjdCIpKSB7CiAgICAgIGNvbnN0IHByb3BUeXBlcyA9IHpvZFNjaGVtYS5kZWYuc2hhcGU7CiAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSBPYmplY3QuZW50cmllcyhwcm9wVHlwZXMpLm1hcCgoW2tleSwgc2NoZW1hXSkgPT4gewogICAgICAgIHZhciBfYTsKICAgICAgICBjb25zdCBpbm5lck1ldGFkYXRhID0gTWV0YWRhdGEuZ2V0T3BlbkFwaU1ldGFkYXRhKHNjaGVtYSk7CiAgICAgICAgY29uc3QgcmVmZXJlbmNlZFNjaGVtYTIgPSB0aGlzLmdldFBhcmFtZXRlclJlZihzY2hlbWEsIHsKICAgICAgICAgIGluOiBsb2NhdGlvbiwKICAgICAgICAgIG5hbWU6IGtleQogICAgICAgIH0pOwogICAgICAgIGlmIChyZWZlcmVuY2VkU2NoZW1hMikgewogICAgICAgICAgcmV0dXJuIHJlZmVyZW5jZWRTY2hlbWEyOwogICAgICAgIH0KICAgICAgICBjb25zdCBpbm5lclBhcmFtZXRlck1ldGFkYXRhID0gaW5uZXJNZXRhZGF0YSA9PT0gbnVsbCB8fCBpbm5lck1ldGFkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbm5lck1ldGFkYXRhLnBhcmFtOwogICAgICAgIGlmICgoaW5uZXJQYXJhbWV0ZXJNZXRhZGF0YSA9PT0gbnVsbCB8fCBpbm5lclBhcmFtZXRlck1ldGFkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbm5lclBhcmFtZXRlck1ldGFkYXRhLm5hbWUpICYmIGlubmVyUGFyYW1ldGVyTWV0YWRhdGEubmFtZSAhPT0ga2V5KSB7CiAgICAgICAgICB0aHJvdyBuZXcgQ29uZmxpY3RFcnJvcihgQ29uZmxpY3RpbmcgbmFtZXMgZm9yIHBhcmFtZXRlcmAsIHsKICAgICAgICAgICAga2V5OiAibmFtZSIsCiAgICAgICAgICAgIHZhbHVlczogW2tleSwgaW5uZXJQYXJhbWV0ZXJNZXRhZGF0YS5uYW1lXQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGlmICgoaW5uZXJQYXJhbWV0ZXJNZXRhZGF0YSA9PT0gbnVsbCB8fCBpbm5lclBhcmFtZXRlck1ldGFkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbm5lclBhcmFtZXRlck1ldGFkYXRhLmluKSAmJiBpbm5lclBhcmFtZXRlck1ldGFkYXRhLmluICE9PSBsb2NhdGlvbikgewogICAgICAgICAgdGhyb3cgbmV3IENvbmZsaWN0RXJyb3IoYENvbmZsaWN0aW5nIGxvY2F0aW9uIGZvciBwYXJhbWV0ZXIgJHsoX2EgPSBpbm5lclBhcmFtZXRlck1ldGFkYXRhLm5hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGtleX1gLCB7CiAgICAgICAgICAgIGtleTogImluIiwKICAgICAgICAgICAgdmFsdWVzOiBbbG9jYXRpb24sIGlubmVyUGFyYW1ldGVyTWV0YWRhdGEuaW5dCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVQYXJhbWV0ZXIoc2NoZW1hLm9wZW5hcGkoeyBwYXJhbTogeyBuYW1lOiBrZXksIGluOiBsb2NhdGlvbiB9IH0pKTsKICAgICAgfSk7CiAgICAgIHJldHVybiBwYXJhbWV0ZXJzOwogICAgfQogICAgaWYgKChwYXJhbWV0ZXJNZXRhZGF0YSA9PT0gbnVsbCB8fCBwYXJhbWV0ZXJNZXRhZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1ldGVyTWV0YWRhdGEuaW4pICYmIHBhcmFtZXRlck1ldGFkYXRhLmluICE9PSBsb2NhdGlvbikgewogICAgICB0aHJvdyBuZXcgQ29uZmxpY3RFcnJvcihgQ29uZmxpY3RpbmcgbG9jYXRpb24gZm9yIHBhcmFtZXRlciAke3BhcmFtZXRlck1ldGFkYXRhLm5hbWV9YCwgewogICAgICAgIGtleTogImluIiwKICAgICAgICB2YWx1ZXM6IFtsb2NhdGlvbiwgcGFyYW1ldGVyTWV0YWRhdGEuaW5dCiAgICAgIH0pOwogICAgfQogICAgcmV0dXJuIFsKICAgICAgdGhpcy5nZW5lcmF0ZVBhcmFtZXRlcih6b2RTY2hlbWEub3BlbmFwaSh7IHBhcmFtOiB7IGluOiBsb2NhdGlvbiB9IH0pKQogICAgXTsKICB9CiAgZ2VuZXJhdGVTaW1wbGVQYXJhbWV0ZXIoem9kU2NoZW1hKSB7CiAgICBjb25zdCBtZXRhZGF0YSA9IE1ldGFkYXRhLmdldFBhcmFtTWV0YWRhdGEoem9kU2NoZW1hKTsKICAgIGNvbnN0IHBhcmFtTWV0YWRhdGEgPSBtZXRhZGF0YSA9PT0gbnVsbCB8fCBtZXRhZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWV0YWRhdGEucGFyYW07CiAgICBjb25zdCByZXF1aXJlZCA9ICFpc09wdGlvbmFsU2NoZW1hKHpvZFNjaGVtYSkgJiYgIWlzTnVsbGFibGVTY2hlbWEoem9kU2NoZW1hKTsKICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuZ2VuZXJhdGVTY2hlbWFXaXRoUmVmKHpvZFNjaGVtYSk7CiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7CiAgICAgIHNjaGVtYSwKICAgICAgcmVxdWlyZWQKICAgIH0sIHBhcmFtTWV0YWRhdGEgPyBNZXRhZGF0YS5idWlsZFBhcmFtZXRlck1ldGFkYXRhKHBhcmFtTWV0YWRhdGEpIDoge30pOwogIH0KICBnZW5lcmF0ZVBhcmFtZXRlcih6b2RTY2hlbWEpIHsKICAgIGNvbnN0IG1ldGFkYXRhID0gTWV0YWRhdGEuZ2V0T3BlbkFwaU1ldGFkYXRhKHpvZFNjaGVtYSk7CiAgICBjb25zdCBwYXJhbU1ldGFkYXRhID0gbWV0YWRhdGEgPT09IG51bGwgfHwgbWV0YWRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1ldGFkYXRhLnBhcmFtOwogICAgY29uc3QgcGFyYW1OYW1lID0gcGFyYW1NZXRhZGF0YSA9PT0gbnVsbCB8fCBwYXJhbU1ldGFkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbU1ldGFkYXRhLm5hbWU7CiAgICBjb25zdCBwYXJhbUxvY2F0aW9uID0gcGFyYW1NZXRhZGF0YSA9PT0gbnVsbCB8fCBwYXJhbU1ldGFkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbU1ldGFkYXRhLmluOwogICAgaWYgKCFwYXJhbU5hbWUpIHsKICAgICAgdGhyb3cgbmV3IE1pc3NpbmdQYXJhbWV0ZXJEYXRhRXJyb3IoeyBtaXNzaW5nRmllbGQ6ICJuYW1lIiB9KTsKICAgIH0KICAgIGlmICghcGFyYW1Mb2NhdGlvbikgewogICAgICB0aHJvdyBuZXcgTWlzc2luZ1BhcmFtZXRlckRhdGFFcnJvcih7CiAgICAgICAgbWlzc2luZ0ZpZWxkOiAiaW4iLAogICAgICAgIHBhcmFtTmFtZQogICAgICB9KTsKICAgIH0KICAgIGNvbnN0IGJhc2VQYXJhbWV0ZXIgPSB0aGlzLmdlbmVyYXRlU2ltcGxlUGFyYW1ldGVyKHpvZFNjaGVtYSk7CiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBiYXNlUGFyYW1ldGVyKSwgeyBpbjogcGFyYW1Mb2NhdGlvbiwgbmFtZTogcGFyYW1OYW1lIH0pOwogIH0KICBnZW5lcmF0ZVNjaGVtYVdpdGhNZXRhZGF0YSh6b2RTY2hlbWEpIHsKICAgIGNvbnN0IGlubmVyU2NoZW1hID0gTWV0YWRhdGEudW53cmFwQ2hhaW5lZCh6b2RTY2hlbWEpOwogICAgY29uc3QgbWV0YWRhdGEgPSBNZXRhZGF0YS5nZXRPcGVuQXBpTWV0YWRhdGEoem9kU2NoZW1hKTsKICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IE1ldGFkYXRhLmdldERlZmF1bHRWYWx1ZSh6b2RTY2hlbWEpOwogICAgY29uc3QgcmVzdWx0ID0gKG1ldGFkYXRhID09PSBudWxsIHx8IG1ldGFkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtZXRhZGF0YS50eXBlKSA/IHsgdHlwZTogbWV0YWRhdGEudHlwZSB9IDogdGhpcy50b09wZW5BUElTY2hlbWEoaW5uZXJTY2hlbWEsIGlzTnVsbGFibGVTY2hlbWEoem9kU2NoZW1hKSwgZGVmYXVsdFZhbHVlKTsKICAgIHJldHVybiBtZXRhZGF0YSA/IE1ldGFkYXRhLmFwcGx5U2NoZW1hTWV0YWRhdGEocmVzdWx0LCBtZXRhZGF0YSkgOiBvbWl0QnkocmVzdWx0LCBpc1VuZGVmaW5lZCk7CiAgfQogIC8qKgogICAqIFNhbWUgYXMgYWJvdmUgYnV0IGFwcGxpZXMgbnVsbGFibGUKICAgKi8KICBjb25zdHJ1Y3RSZWZlcmVuY2VkT3BlbkFQSVNjaGVtYSh6b2RTY2hlbWEpIHsKICAgIGNvbnN0IG1ldGFkYXRhID0gTWV0YWRhdGEuZ2V0T3BlbkFwaU1ldGFkYXRhKHpvZFNjaGVtYSk7CiAgICBjb25zdCBpbm5lclNjaGVtYSA9IE1ldGFkYXRhLnVud3JhcENoYWluZWQoem9kU2NoZW1hKTsKICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IE1ldGFkYXRhLmdldERlZmF1bHRWYWx1ZSh6b2RTY2hlbWEpOwogICAgY29uc3QgaXNOdWxsYWJsZSA9IGlzTnVsbGFibGVTY2hlbWEoem9kU2NoZW1hKTsKICAgIGlmIChtZXRhZGF0YSA9PT0gbnVsbCB8fCBtZXRhZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWV0YWRhdGEudHlwZSkgewogICAgICByZXR1cm4gdGhpcy52ZXJzaW9uU3BlY2lmaWNzLm1hcE51bGxhYmxlVHlwZShtZXRhZGF0YS50eXBlLCBpc051bGxhYmxlKTsKICAgIH0KICAgIHJldHVybiB0aGlzLnRvT3BlbkFQSVNjaGVtYShpbm5lclNjaGVtYSwgaXNOdWxsYWJsZSwgZGVmYXVsdFZhbHVlKTsKICB9CiAgLyoqCiAgICogR2VuZXJhdGVzIGFuIE9wZW5BUEkgU2NoZW1hT2JqZWN0IG9yIGEgUmVmZXJlbmNlT2JqZWN0IHdpdGggYWxsIHRoZSBwcm92aWRlZCBtZXRhZGF0YSBhcHBsaWVkCiAgICovCiAgZ2VuZXJhdGVTaW1wbGVTY2hlbWEoem9kU2NoZW1hKSB7CiAgICBjb25zdCBtZXRhZGF0YSA9IE1ldGFkYXRhLmdldE9wZW5BcGlNZXRhZGF0YSh6b2RTY2hlbWEpOwogICAgY29uc3QgcmVmSWQgPSBNZXRhZGF0YS5nZXRSZWZJZCh6b2RTY2hlbWEpOwogICAgaWYgKCFyZWZJZCB8fCAhdGhpcy5zY2hlbWFSZWZzW3JlZklkXSkgewogICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZVNjaGVtYVdpdGhNZXRhZGF0YSh6b2RTY2hlbWEpOwogICAgfQogICAgY29uc3Qgc2NoZW1hUmVmID0gdGhpcy5zY2hlbWFSZWZzW3JlZklkXTsKICAgIGNvbnN0IHJlZmVyZW5jZU9iamVjdCA9IHsKICAgICAgJHJlZjogdGhpcy5nZW5lcmF0ZVNjaGVtYVJlZihyZWZJZCkKICAgIH07CiAgICBjb25zdCBuZXdNZXRhZGF0YSA9IG9taXRCeShNZXRhZGF0YS5idWlsZFNjaGVtYU1ldGFkYXRhKG1ldGFkYXRhICE9PSBudWxsICYmIG1ldGFkYXRhICE9PSB2b2lkIDAgPyBtZXRhZGF0YSA6IHt9KSwgKHZhbHVlLCBrZXkpID0+IHZhbHVlID09PSB2b2lkIDAgfHwgb2JqZWN0RXF1YWxzKHZhbHVlLCBzY2hlbWFSZWZba2V5XSkpOwogICAgaWYgKG5ld01ldGFkYXRhLnR5cGUpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBhbGxPZjogW3JlZmVyZW5jZU9iamVjdCwgbmV3TWV0YWRhdGFdCiAgICAgIH07CiAgICB9CiAgICBjb25zdCBuZXdTY2hlbWFNZXRhZGF0YSA9IG9taXRCeSh0aGlzLmNvbnN0cnVjdFJlZmVyZW5jZWRPcGVuQVBJU2NoZW1hKHpvZFNjaGVtYSksICh2YWx1ZSwga2V5KSA9PiB2YWx1ZSA9PT0gdm9pZCAwIHx8IG9iamVjdEVxdWFscyh2YWx1ZSwgc2NoZW1hUmVmW2tleV0pKTsKICAgIGNvbnN0IGFwcGxpZWRNZXRhZGF0YSA9IE1ldGFkYXRhLmFwcGx5U2NoZW1hTWV0YWRhdGEobmV3U2NoZW1hTWV0YWRhdGEsIG5ld01ldGFkYXRhKTsKICAgIGlmIChPYmplY3Qua2V5cyhhcHBsaWVkTWV0YWRhdGEpLmxlbmd0aCA+IDApIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBhbGxPZjogW3JlZmVyZW5jZU9iamVjdCwgYXBwbGllZE1ldGFkYXRhXQogICAgICB9OwogICAgfQogICAgcmV0dXJuIHJlZmVyZW5jZU9iamVjdDsKICB9CiAgLyoqCiAgICogU2FtZSBhcyBgZ2VuZXJhdGVTY2hlbWFgIGJ1dCBpZiB0aGUgbmV3IHNjaGVtYSBpcyBhZGRlZCBpbnRvIHRoZQogICAqIHJlZmVyZW5jZWQgc2NoZW1hcywgaXQgd291bGQgcmV0dXJuIGEgUmVmZXJlbmNlT2JqZWN0IGFuZCBub3QgdGhlCiAgICogd2hvbGUgcmVzdWx0LgogICAqCiAgICogU2hvdWxkIGJlIHVzZWQgZm9yIG5lc3RlZCBvYmplY3RzLCBhcnJheXMsIGV0Yy4KICAgKi8KICBnZW5lcmF0ZVNjaGVtYVdpdGhSZWYoem9kU2NoZW1hKSB7CiAgICBjb25zdCByZWZJZCA9IE1ldGFkYXRhLmdldFJlZklkKHpvZFNjaGVtYSk7CiAgICBjb25zdCByZXN1bHQgPSB0aGlzLmdlbmVyYXRlU2ltcGxlU2NoZW1hKHpvZFNjaGVtYSk7CiAgICBpZiAocmVmSWQgJiYgdGhpcy5zY2hlbWFSZWZzW3JlZklkXSA9PT0gdm9pZCAwKSB7CiAgICAgIHRoaXMuc2NoZW1hUmVmc1tyZWZJZF0gPSByZXN1bHQ7CiAgICAgIHJldHVybiB7ICRyZWY6IHRoaXMuZ2VuZXJhdGVTY2hlbWFSZWYocmVmSWQpIH07CiAgICB9CiAgICByZXR1cm4gcmVzdWx0OwogIH0KICBnZW5lcmF0ZVNjaGVtYVJlZihyZWZJZCkgewogICAgcmV0dXJuIGAjL2NvbXBvbmVudHMvc2NoZW1hcy8ke3JlZklkfWA7CiAgfQogIGdldFJlcXVlc3RCb2R5KHJlcXVlc3RCb2R5KSB7CiAgICBpZiAoIXJlcXVlc3RCb2R5KSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGNvbnN0IHsgY29udGVudCB9ID0gcmVxdWVzdEJvZHksIHJlc3QgPSBfX3Jlc3QocmVxdWVzdEJvZHksIFsiY29udGVudCJdKTsKICAgIGNvbnN0IHJlcXVlc3RCb2R5Q29udGVudCA9IHRoaXMuZ2V0Qm9keUNvbnRlbnQoY29udGVudCk7CiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXN0KSwgeyBjb250ZW50OiByZXF1ZXN0Qm9keUNvbnRlbnQgfSk7CiAgfQogIGdldFBhcmFtZXRlcnMocmVxdWVzdCkgewogICAgaWYgKCFyZXF1ZXN0KSB7CiAgICAgIHJldHVybiBbXTsKICAgIH0KICAgIGNvbnN0IHsgaGVhZGVycyB9ID0gcmVxdWVzdDsKICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5jbGVhblBhcmFtZXRlcihyZXF1ZXN0LnF1ZXJ5KTsKICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMuY2xlYW5QYXJhbWV0ZXIocmVxdWVzdC5wYXJhbXMpOwogICAgY29uc3QgY29va2llcyA9IHRoaXMuY2xlYW5QYXJhbWV0ZXIocmVxdWVzdC5jb29raWVzKTsKICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IGVuaGFuY2VNaXNzaW5nUGFyYW1ldGVyc0Vycm9yKCgpID0+IHF1ZXJ5ID8gdGhpcy5nZW5lcmF0ZUlubGluZVBhcmFtZXRlcnMocXVlcnksICJxdWVyeSIpIDogW10sIHsgbG9jYXRpb246ICJxdWVyeSIgfSk7CiAgICBjb25zdCBwYXRoUGFyYW1ldGVycyA9IGVuaGFuY2VNaXNzaW5nUGFyYW1ldGVyc0Vycm9yKCgpID0+IHBhcmFtcyA/IHRoaXMuZ2VuZXJhdGVJbmxpbmVQYXJhbWV0ZXJzKHBhcmFtcywgInBhdGgiKSA6IFtdLCB7IGxvY2F0aW9uOiAicGF0aCIgfSk7CiAgICBjb25zdCBjb29raWVQYXJhbWV0ZXJzID0gZW5oYW5jZU1pc3NpbmdQYXJhbWV0ZXJzRXJyb3IoKCkgPT4gY29va2llcyA/IHRoaXMuZ2VuZXJhdGVJbmxpbmVQYXJhbWV0ZXJzKGNvb2tpZXMsICJjb29raWUiKSA6IFtdLCB7IGxvY2F0aW9uOiAiY29va2llIiB9KTsKICAgIGNvbnN0IGhlYWRlclBhcmFtZXRlcnMgPSBlbmhhbmNlTWlzc2luZ1BhcmFtZXRlcnNFcnJvcigoKSA9PiB7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGhlYWRlcnMpKSB7CiAgICAgICAgcmV0dXJuIGhlYWRlcnMuZmxhdE1hcCgoaGVhZGVyKSA9PiB0aGlzLmdlbmVyYXRlSW5saW5lUGFyYW1ldGVycyhoZWFkZXIsICJoZWFkZXIiKSk7CiAgICAgIH0KICAgICAgY29uc3QgY2xlYW5IZWFkZXJzID0gdGhpcy5jbGVhblBhcmFtZXRlcihoZWFkZXJzKTsKICAgICAgcmV0dXJuIGNsZWFuSGVhZGVycyA/IHRoaXMuZ2VuZXJhdGVJbmxpbmVQYXJhbWV0ZXJzKGNsZWFuSGVhZGVycywgImhlYWRlciIpIDogW107CiAgICB9LCB7IGxvY2F0aW9uOiAiaGVhZGVyIiB9KTsKICAgIHJldHVybiBbCiAgICAgIC4uLnBhdGhQYXJhbWV0ZXJzLAogICAgICAuLi5xdWVyeVBhcmFtZXRlcnMsCiAgICAgIC4uLmhlYWRlclBhcmFtZXRlcnMsCiAgICAgIC4uLmNvb2tpZVBhcmFtZXRlcnMKICAgIF07CiAgfQogIGNsZWFuUGFyYW1ldGVyKHNjaGVtYSkgewogICAgaWYgKCFzY2hlbWEpIHsKICAgICAgcmV0dXJuIHZvaWQgMDsKICAgIH0KICAgIGlmIChpc1pvZFR5cGUoc2NoZW1hLCAiWm9kUGlwZSIpKSB7CiAgICAgIGNvbnN0IGluU2NoZW1hID0gc2NoZW1hLl96b2QuZGVmLmluOwogICAgICBjb25zdCBvdXRTY2hlbWEgPSBzY2hlbWEuX3pvZC5kZWYub3V0OwogICAgICBpZiAoaXNab2RUeXBlKGluU2NoZW1hLCAiWm9kT2JqZWN0IikpIHsKICAgICAgICByZXR1cm4gdGhpcy5jbGVhblBhcmFtZXRlcihpblNjaGVtYSk7CiAgICAgIH0KICAgICAgaWYgKGlzWm9kVHlwZShvdXRTY2hlbWEsICJab2RPYmplY3QiKSkgewogICAgICAgIHJldHVybiB0aGlzLmNsZWFuUGFyYW1ldGVyKG91dFNjaGVtYSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHZvaWQgMDsKICAgIH0KICAgIHJldHVybiBzY2hlbWE7CiAgfQogIGdlbmVyYXRlUGF0aChyb3V0ZSkgewogICAgY29uc3QgeyBtZXRob2QsIHBhdGgsIHJlcXVlc3QsIHJlc3BvbnNlcyB9ID0gcm91dGUsIHBhdGhJdGVtQ29uZmlnID0gX19yZXN0KHJvdXRlLCBbIm1ldGhvZCIsICJwYXRoIiwgInJlcXVlc3QiLCAicmVzcG9uc2VzIl0pOwogICAgY29uc3QgZ2VuZXJhdGVkUmVzcG9uc2VzID0gbWFwVmFsdWVzKHJlc3BvbnNlcywgKHJlc3BvbnNlKSA9PiB7CiAgICAgIHJldHVybiB0aGlzLmdldFJlc3BvbnNlKHJlc3BvbnNlKTsKICAgIH0pOwogICAgY29uc3QgcGFyYW1ldGVycyA9IGVuaGFuY2VNaXNzaW5nUGFyYW1ldGVyc0Vycm9yKCgpID0+IHRoaXMuZ2V0UGFyYW1ldGVycyhyZXF1ZXN0KSwgeyByb3V0ZTogYCR7bWV0aG9kfSAke3BhdGh9YCB9KTsKICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0gdGhpcy5nZXRSZXF1ZXN0Qm9keShyZXF1ZXN0ID09PSBudWxsIHx8IHJlcXVlc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3QuYm9keSk7CiAgICBjb25zdCByb3V0ZURvYyA9IHsKICAgICAgW21ldGhvZF06IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHBhdGhJdGVtQ29uZmlnKSwgcGFyYW1ldGVycy5sZW5ndGggPiAwID8gewogICAgICAgIHBhcmFtZXRlcnM6IFsuLi5wYXRoSXRlbUNvbmZpZy5wYXJhbWV0ZXJzIHx8IFtdLCAuLi5wYXJhbWV0ZXJzXQogICAgICB9IDoge30pLCByZXF1ZXN0Qm9keSA/IHsgcmVxdWVzdEJvZHkgfSA6IHt9KSwgeyByZXNwb25zZXM6IGdlbmVyYXRlZFJlc3BvbnNlcyB9KQogICAgfTsKICAgIHJldHVybiByb3V0ZURvYzsKICB9CiAgZ2VuZXJhdGVTaW5nbGVSb3V0ZShyb3V0ZSkgewogICAgY29uc3Qgcm91dGVEb2MgPSB0aGlzLmdlbmVyYXRlUGF0aChyb3V0ZSk7CiAgICB0aGlzLnBhdGhSZWZzW3JvdXRlLnBhdGhdID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLnBhdGhSZWZzW3JvdXRlLnBhdGhdKSwgcm91dGVEb2MpOwogICAgcmV0dXJuIHJvdXRlRG9jOwogIH0KICBnZXRSZXNwb25zZShyZXNwb25zZSkgewogICAgaWYgKHRoaXMuaXNSZWZlcmVuY2VPYmplY3QocmVzcG9uc2UpKSB7CiAgICAgIHJldHVybiByZXNwb25zZTsKICAgIH0KICAgIGNvbnN0IHsgY29udGVudCwgaGVhZGVycyB9ID0gcmVzcG9uc2UsIHJlc3QgPSBfX3Jlc3QocmVzcG9uc2UsIFsiY29udGVudCIsICJoZWFkZXJzIl0pOwogICAgY29uc3QgcmVzcG9uc2VDb250ZW50ID0gY29udGVudCA/IHsgY29udGVudDogdGhpcy5nZXRCb2R5Q29udGVudChjb250ZW50KSB9IDoge307CiAgICBpZiAoIWhlYWRlcnMpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzdCksIHJlc3BvbnNlQ29udGVudCk7CiAgICB9CiAgICBjb25zdCByZXNwb25zZUhlYWRlcnMgPSBpc1pvZFR5cGUoaGVhZGVycywgIlpvZE9iamVjdCIpID8gdGhpcy5nZXRSZXNwb25zZUhlYWRlcnMoaGVhZGVycykgOiAoCiAgICAgIC8vIFRoaXMgaXMgaW5wdXQgZGF0YSBzbyBpdCBpcyBva2F5IHRvIGNhc3QgaW4gdGhlIGNvbW1vbiBnZW5lcmF0b3IKICAgICAgLy8gc2luY2UgdGhpcyBpcyB0aGUgdXNlcidzIHJlc3BvbnNpYmlsaXR5IHRvIGtlZXAgaXQgY29ycmVjdAogICAgICBoZWFkZXJzCiAgICApOwogICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXN0KSwgeyBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMgfSksIHJlc3BvbnNlQ29udGVudCk7CiAgfQogIGlzUmVmZXJlbmNlT2JqZWN0KHNjaGVtYSkgewogICAgcmV0dXJuICIkcmVmIiBpbiBzY2hlbWE7CiAgfQogIGdldFJlc3BvbnNlSGVhZGVycyhoZWFkZXJzKSB7CiAgICBjb25zdCBzY2hlbWFTaGFwZSA9IGhlYWRlcnMuZGVmLnNoYXBlOwogICAgY29uc3QgcmVzcG9uc2VIZWFkZXJzID0gbWFwVmFsdWVzKHNjaGVtYVNoYXBlLCAoXykgPT4gdGhpcy5nZW5lcmF0ZVNpbXBsZVBhcmFtZXRlcihfKSk7CiAgICByZXR1cm4gcmVzcG9uc2VIZWFkZXJzOwogIH0KICBnZXRCb2R5Q29udGVudChjb250ZW50KSB7CiAgICByZXR1cm4gbWFwVmFsdWVzKGNvbnRlbnQsIChjb25maWcpID0+IHsKICAgICAgaWYgKCFjb25maWcgfHwgIWlzQW55Wm9kVHlwZShjb25maWcuc2NoZW1hKSkgewogICAgICAgIHJldHVybiBjb25maWc7CiAgICAgIH0KICAgICAgY29uc3QgeyBzY2hlbWE6IGNvbmZpZ1NjaGVtYSB9ID0gY29uZmlnLCByZXN0ID0gX19yZXN0KGNvbmZpZywgWyJzY2hlbWEiXSk7CiAgICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuZ2VuZXJhdGVTY2hlbWFXaXRoUmVmKGNvbmZpZ1NjaGVtYSk7CiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHsgc2NoZW1hIH0sIHJlc3QpOwogICAgfSk7CiAgfQogIHRvT3BlbkFQSVNjaGVtYSh6b2RTY2hlbWEsIGlzTnVsbGFibGUsIGRlZmF1bHRWYWx1ZSkgewogICAgY29uc3QgcmVzdWx0ID0gdGhpcy5vcGVuQXBpVHJhbnNmb3JtZXIudHJhbnNmb3JtKHpvZFNjaGVtYSwgaXNOdWxsYWJsZSwgKF8pID0+IHRoaXMuZ2VuZXJhdGVTY2hlbWFXaXRoUmVmKF8pLCAoXykgPT4gdGhpcy5nZW5lcmF0ZVNjaGVtYVJlZihfKSwgZGVmYXVsdFZhbHVlKTsKICAgIHJldHVybiByZXN1bHQ7CiAgfQp9Owp2YXIgT3BlbkFwaUdlbmVyYXRvclYzMFNwZWNpZmljcyA9IGNsYXNzIHsKICBnZXQgbnVsbFR5cGUoKSB7CiAgICByZXR1cm4geyBudWxsYWJsZTogdHJ1ZSB9OwogIH0KICBtYXBOdWxsYWJsZU9mQXJyYXkob2JqZWN0cywgaXNOdWxsYWJsZSkgewogICAgaWYgKGlzTnVsbGFibGUpIHsKICAgICAgcmV0dXJuIFsuLi5vYmplY3RzLCB0aGlzLm51bGxUeXBlXTsKICAgIH0KICAgIHJldHVybiBvYmplY3RzOwogIH0KICBtYXBOdWxsYWJsZVR5cGUodHlwZSwgaXNOdWxsYWJsZSkgewogICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdHlwZSA/IHsgdHlwZSB9IDogdm9pZCAwKSwgaXNOdWxsYWJsZSA/IHRoaXMubnVsbFR5cGUgOiB2b2lkIDApOwogIH0KICBtYXBUdXBsZUl0ZW1zKHNjaGVtYXMpIHsKICAgIGNvbnN0IHVuaXF1ZVNjaGVtYXMgPSB1bmlxKHNjaGVtYXMpOwogICAgcmV0dXJuIHsKICAgICAgaXRlbXM6IHVuaXF1ZVNjaGVtYXMubGVuZ3RoID09PSAxID8gdW5pcXVlU2NoZW1hc1swXSA6IHsgYW55T2Y6IHVuaXF1ZVNjaGVtYXMgfSwKICAgICAgbWluSXRlbXM6IHNjaGVtYXMubGVuZ3RoLAogICAgICBtYXhJdGVtczogc2NoZW1hcy5sZW5ndGgKICAgIH07CiAgfQogIGdldE51bWJlckNoZWNrcyhjaGVja3MpIHsKICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCAuLi5jaGVja3MubWFwKChjaGVjaykgPT4gewogICAgICBzd2l0Y2ggKGNoZWNrLl96b2QuZGVmLmNoZWNrKSB7CiAgICAgICAgY2FzZSAiZ3JlYXRlcl90aGFuIjogewogICAgICAgICAgY29uc3QgZ3JlYXRlclRoYW5DaGVjayA9IGNoZWNrOwogICAgICAgICAgcmV0dXJuIGdyZWF0ZXJUaGFuQ2hlY2suX3pvZC5kZWYuaW5jbHVzaXZlID8geyBtaW5pbXVtOiBOdW1iZXIoZ3JlYXRlclRoYW5DaGVjay5fem9kLmRlZi52YWx1ZSkgfSA6IHsKICAgICAgICAgICAgbWluaW11bTogTnVtYmVyKGdyZWF0ZXJUaGFuQ2hlY2suX3pvZC5kZWYudmFsdWUpLAogICAgICAgICAgICBleGNsdXNpdmVNaW5pbXVtOiB0cnVlCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICBjYXNlICJsZXNzX3RoYW4iOiB7CiAgICAgICAgICBjb25zdCBsZXNzVGhhbkNoZWNrID0gY2hlY2s7CiAgICAgICAgICByZXR1cm4gbGVzc1RoYW5DaGVjay5fem9kLmRlZi5pbmNsdXNpdmUgPyB7IG1heGltdW06IE51bWJlcihsZXNzVGhhbkNoZWNrLl96b2QuZGVmLnZhbHVlKSB9IDogewogICAgICAgICAgICBtYXhpbXVtOiBOdW1iZXIobGVzc1RoYW5DaGVjay5fem9kLmRlZi52YWx1ZSksCiAgICAgICAgICAgIGV4Y2x1c2l2ZU1heGltdW06ICFsZXNzVGhhbkNoZWNrLl96b2QuZGVmLmluY2x1c2l2ZQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiB7fTsKICAgICAgfQogICAgfSkpOwogIH0KfTsKdmFyIE9wZW5BcGlHZW5lcmF0b3JWMyA9IGNsYXNzIHsKICBjb25zdHJ1Y3RvcihkZWZpbml0aW9ucywgb3B0aW9ucykgewogICAgY29uc3Qgc3BlY2lmaWNzID0gbmV3IE9wZW5BcGlHZW5lcmF0b3JWMzBTcGVjaWZpY3MoKTsKICAgIHRoaXMuZ2VuZXJhdG9yID0gbmV3IE9wZW5BUElHZW5lcmF0b3IoZGVmaW5pdGlvbnMsIHNwZWNpZmljcywgb3B0aW9ucyk7CiAgfQogIGdlbmVyYXRlRG9jdW1lbnQoY29uZmlnKSB7CiAgICBjb25zdCBiYXNlRGF0YSA9IHRoaXMuZ2VuZXJhdG9yLmdlbmVyYXRlRG9jdW1lbnREYXRhKCk7CiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb25maWcpLCBiYXNlRGF0YSk7CiAgfQogIGdlbmVyYXRlQ29tcG9uZW50cygpIHsKICAgIHJldHVybiB0aGlzLmdlbmVyYXRvci5nZW5lcmF0ZUNvbXBvbmVudHMoKTsKICB9Cn07CnZhciBPcGVuQXBpR2VuZXJhdG9yVjMxU3BlY2lmaWNzID0gY2xhc3MgewogIGdldCBudWxsVHlwZSgpIHsKICAgIHJldHVybiB7IHR5cGU6ICJudWxsIiB9OwogIH0KICBtYXBOdWxsYWJsZU9mQXJyYXkob2JqZWN0cywgaXNOdWxsYWJsZSkgewogICAgaWYgKGlzTnVsbGFibGUpIHsKICAgICAgcmV0dXJuIFsuLi5vYmplY3RzLCB0aGlzLm51bGxUeXBlXTsKICAgIH0KICAgIHJldHVybiBvYmplY3RzOwogIH0KICBtYXBOdWxsYWJsZVR5cGUodHlwZSwgaXNOdWxsYWJsZSkgewogICAgaWYgKCF0eXBlKSB7CiAgICAgIHJldHVybiB7fTsKICAgIH0KICAgIGlmIChpc051bGxhYmxlKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdHlwZTogQXJyYXkuaXNBcnJheSh0eXBlKSA/IFsuLi50eXBlLCAibnVsbCJdIDogW3R5cGUsICJudWxsIl0KICAgICAgfTsKICAgIH0KICAgIHJldHVybiB7CiAgICAgIHR5cGUKICAgIH07CiAgfQogIG1hcFR1cGxlSXRlbXMoc2NoZW1hcykgewogICAgcmV0dXJuIHsKICAgICAgcHJlZml4SXRlbXM6IHNjaGVtYXMKICAgIH07CiAgfQogIGdldE51bWJlckNoZWNrcyhjaGVja3MpIHsKICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCAuLi5jaGVja3MubWFwKChjaGVjaykgPT4gewogICAgICBzd2l0Y2ggKGNoZWNrLl96b2QuZGVmLmNoZWNrKSB7CiAgICAgICAgY2FzZSAiZ3JlYXRlcl90aGFuIjogewogICAgICAgICAgY29uc3QgZ3JlYXRlclRoYW5DaGVjayA9IGNoZWNrOwogICAgICAgICAgcmV0dXJuIGdyZWF0ZXJUaGFuQ2hlY2suX3pvZC5kZWYuaW5jbHVzaXZlID8geyBtaW5pbXVtOiBOdW1iZXIoZ3JlYXRlclRoYW5DaGVjay5fem9kLmRlZi52YWx1ZSkgfSA6IHsgZXhjbHVzaXZlTWluaW11bTogTnVtYmVyKGdyZWF0ZXJUaGFuQ2hlY2suX3pvZC5kZWYudmFsdWUpIH07CiAgICAgICAgfQogICAgICAgIGNhc2UgImxlc3NfdGhhbiI6IHsKICAgICAgICAgIGNvbnN0IGxlc3NUaGFuQ2hlY2sgPSBjaGVjazsKICAgICAgICAgIHJldHVybiBsZXNzVGhhbkNoZWNrLl96b2QuZGVmLmluY2x1c2l2ZSA/IHsgbWF4aW11bTogTnVtYmVyKGxlc3NUaGFuQ2hlY2suX3pvZC5kZWYudmFsdWUpIH0gOiB7IGV4Y2x1c2l2ZU1heGltdW06IE51bWJlcihsZXNzVGhhbkNoZWNrLl96b2QuZGVmLnZhbHVlKSB9OwogICAgICAgIH0KICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9KSk7CiAgfQp9OwpmdW5jdGlvbiBpc1dlYmhvb2tEZWZpbml0aW9uKGRlZmluaXRpb24pIHsKICByZXR1cm4gInR5cGUiIGluIGRlZmluaXRpb24gJiYgZGVmaW5pdGlvbi50eXBlID09PSAid2ViaG9vayI7Cn0KdmFyIE9wZW5BcGlHZW5lcmF0b3JWMzEgPSBjbGFzcyB7CiAgY29uc3RydWN0b3IoZGVmaW5pdGlvbnMsIG9wdGlvbnMpIHsKICAgIHRoaXMuZGVmaW5pdGlvbnMgPSBkZWZpbml0aW9uczsKICAgIHRoaXMud2ViaG9va1JlZnMgPSB7fTsKICAgIGNvbnN0IHNwZWNpZmljcyA9IG5ldyBPcGVuQXBpR2VuZXJhdG9yVjMxU3BlY2lmaWNzKCk7CiAgICB0aGlzLmdlbmVyYXRvciA9IG5ldyBPcGVuQVBJR2VuZXJhdG9yKHRoaXMuZGVmaW5pdGlvbnMsIHNwZWNpZmljcywgb3B0aW9ucyk7CiAgfQogIGdlbmVyYXRlRG9jdW1lbnQoY29uZmlnKSB7CiAgICBjb25zdCBiYXNlRG9jdW1lbnQgPSB0aGlzLmdlbmVyYXRvci5nZW5lcmF0ZURvY3VtZW50RGF0YSgpOwogICAgdGhpcy5kZWZpbml0aW9ucy5maWx0ZXIoaXNXZWJob29rRGVmaW5pdGlvbikuZm9yRWFjaCgoZGVmaW5pdGlvbikgPT4gdGhpcy5nZW5lcmF0ZVNpbmdsZVdlYmhvb2soZGVmaW5pdGlvbi53ZWJob29rKSk7CiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZyksIGJhc2VEb2N1bWVudCksIHsgd2ViaG9va3M6IHRoaXMud2ViaG9va1JlZnMgfSk7CiAgfQogIGdlbmVyYXRlQ29tcG9uZW50cygpIHsKICAgIHJldHVybiB0aGlzLmdlbmVyYXRvci5nZW5lcmF0ZUNvbXBvbmVudHMoKTsKICB9CiAgZ2VuZXJhdGVTaW5nbGVXZWJob29rKHJvdXRlKSB7CiAgICBjb25zdCByb3V0ZURvYyA9IHRoaXMuZ2VuZXJhdG9yLmdlbmVyYXRlUGF0aChyb3V0ZSk7CiAgICB0aGlzLndlYmhvb2tSZWZzW3JvdXRlLnBhdGhdID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLndlYmhvb2tSZWZzW3JvdXRlLnBhdGhdKSwgcm91dGVEb2MpOwogICAgcmV0dXJuIHJvdXRlRG9jOwogIH0KfTsKZXhwb3J0IHsKICBPcGVuQVBJUmVnaXN0cnksCiAgT3BlbkFwaUdlbmVyYXRvclYzLAogIE9wZW5BcGlHZW5lcmF0b3JWMzEsCiAgZXh0ZW5kWm9kV2l0aE9wZW5BcGksCiAgZ2V0T3BlbkFwaU1ldGFkYXRhLAogIGdldFJlZklkLAogIHpvZFRvT3BlbkFQSVJlZ2lzdHJ5Cn07Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPUBhc3RlYXNvbHV0aW9uc196b2QtdG8tb3BlbmFwaS5qcy5tYXAK",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 56397
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 12,
          "receive": -1,
          "ssl": -1
        }
      },
      {
        "startedDateTime": "2025-09-19T13:56:55.839Z",
        "time": 11,
        "request": {
          "method": "GET",
          "url": "http://localhost:3000/src/hooks/use-movie-edit-form.ts",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "accept",
              "value": "*/*"
            },
            {
              "name": "accept-language",
              "value": "en-US"
            },
            {
              "name": "cookie",
              "value": "seon-jwt=Bearer%202025-09-19T13%3A56%3A54.658Z%3A%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D; seon-refresh=Refresh-2025-09-19T13%3A56%3A54.658Z-%7B%22userId%22%3A%22user_test-user%22%2C%22username%22%3A%22test-user%22%2C%22userIdentifier%22%3A%22admin%22%7D-j9cmdx7o9zl"
            },
            {
              "name": "origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "referer",
              "value": "http://localhost:3000/src/components/movie-details/movie-edit-form.tsx"
            },
            {
              "name": "user-agent",
              "value": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.7339.16 Safari/537.36"
            },
            {
              "name": "sec-ch-ua",
              "value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"HeadlessChrome\";v=\"140\""
            },
            {
              "name": "sec-ch-ua-mobile",
              "value": "?0"
            },
            {
              "name": "sec-ch-ua-platform",
              "value": "\"Windows\""
            }
          ],
          "queryString": [],
          "headersSize": -1,
          "bodySize": 0
        },
        "response": {
          "status": 200,
          "statusText": "OK",
          "httpVersion": "HTTP/1.1",
          "cookies": [],
          "headers": [
            {
              "name": "access-control-allow-origin",
              "value": "http://localhost:3000"
            },
            {
              "name": "vary",
              "value": "Origin"
            },
            {
              "name": "content-type",
              "value": "text/javascript"
            },
            {
              "name": "cache-control",
              "value": "no-cache"
            },
            {
              "name": "etag",
              "value": "W/\"59d-3A4D/i+nn7wxKUlVdq3/i+9hfQ8\""
            },
            {
              "name": "date",
              "value": "Fri, 19 Sep 2025 13:56:55 GMT"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "keep-alive",
              "value": "timeout=5"
            },
            {
              "name": "content-length",
              "value": "4988"
            }
          ],
          "content": {
            "size": 4988,
            "mimeType": "text/javascript",
            "text": "aW1wb3J0IF9fdml0ZV9fY2pzSW1wb3J0MF9yZWFjdCBmcm9tICIvbm9kZV9tb2R1bGVzLy52aXRlL2RlcHMvcmVhY3QuanM/dj0wYmI2OWQ3MyI7IGNvbnN0IHVzZVN0YXRlID0gX192aXRlX19janNJbXBvcnQwX3JlYWN0WyJ1c2VTdGF0ZSJdOwppbXBvcnQgeyB1c2VVcGRhdGVNb3ZpZSB9IGZyb20gIi9zcmMvaG9va3MvdXNlLW1vdmllcy50cyI7CmltcG9ydCB7IFVwZGF0ZU1vdmllU2NoZW1hIH0gZnJvbSAiL0Bmcy9Vc2Vycy9tdXJhdC5vemNhbi9zZW9uL3BsYXl3cmlnaHQtdXRpbHMvc2FtcGxlLWFwcC9zaGFyZWQvdHlwZXMvc2NoZW1hLnRzIjsKZXhwb3J0IGZ1bmN0aW9uIHVzZU1vdmllRWRpdEZvcm0oaW5pdGlhbE1vdmllKSB7CiAgY29uc3QgW21vdmllTmFtZSwgc2V0TW92aWVOYW1lXSA9IHVzZVN0YXRlKGluaXRpYWxNb3ZpZS5uYW1lKTsKICBjb25zdCBbbW92aWVZZWFyLCBzZXRNb3ZpZVllYXJdID0gdXNlU3RhdGUoaW5pdGlhbE1vdmllLnllYXIpOwogIGNvbnN0IFttb3ZpZVJhdGluZywgc2V0TW92aWVSYXRpbmddID0gdXNlU3RhdGUoaW5pdGlhbE1vdmllLnJhdGluZyk7CiAgY29uc3QgW21vdmllRGlyZWN0b3IsIHNldE1vdmllRGlyZWN0b3JdID0gdXNlU3RhdGUoaW5pdGlhbE1vdmllLmRpcmVjdG9yKTsKICBjb25zdCBbdmFsaWRhdGlvbkVycm9yLCBzZXRWYWxpZGF0aW9uRXJyb3JdID0gdXNlU3RhdGUobnVsbCk7CiAgY29uc3QgeyBzdGF0dXMsIG11dGF0ZSB9ID0gdXNlVXBkYXRlTW92aWUoKTsKICBjb25zdCBtb3ZpZUxvYWRpbmcgPSBzdGF0dXMgPT09ICJwZW5kaW5nIjsKICBjb25zdCBoYW5kbGVVcGRhdGVNb3ZpZSA9ICgpID0+IHsKICAgIGNvbnN0IHBheWxvYWQgPSB7CiAgICAgIG5hbWU6IG1vdmllTmFtZSwKICAgICAgeWVhcjogbW92aWVZZWFyLAogICAgICByYXRpbmc6IG1vdmllUmF0aW5nLAogICAgICBkaXJlY3RvcjogbW92aWVEaXJlY3RvcgogICAgfTsKICAgIGNvbnN0IHJlc3VsdCA9IFVwZGF0ZU1vdmllU2NoZW1hLnNhZmVQYXJzZShwYXlsb2FkKTsKICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHsKICAgICAgc2V0VmFsaWRhdGlvbkVycm9yKHJlc3VsdC5lcnJvcik7CiAgICAgIHJldHVybjsKICAgIH0KICAgIG11dGF0ZSh7CiAgICAgIGlkOiBpbml0aWFsTW92aWUuaWQsCiAgICAgIG1vdmllOiBwYXlsb2FkCiAgICB9KTsKICAgIHNldFZhbGlkYXRpb25FcnJvcihudWxsKTsKICB9OwogIHJldHVybiB7CiAgICBtb3ZpZU5hbWUsCiAgICBtb3ZpZVllYXIsCiAgICBtb3ZpZVJhdGluZywKICAgIHNldE1vdmllTmFtZSwKICAgIHNldE1vdmllWWVhciwKICAgIHNldE1vdmllUmF0aW5nLAogICAgaGFuZGxlVXBkYXRlTW92aWUsCiAgICBtb3ZpZUxvYWRpbmcsCiAgICB2YWxpZGF0aW9uRXJyb3IsCiAgICBtb3ZpZURpcmVjdG9yLAogICAgc2V0TW92aWVEaXJlY3RvcgogIH07Cn0KCi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnpiM1Z5WTJWeklqcGJJblZ6WlMxdGIzWnBaUzFsWkdsMExXWnZjbTB1ZEhNaVhTd2ljMjkxY21ObGMwTnZiblJsYm5RaU9sc2lhVzF3YjNKMElIc2dkWE5sVTNSaGRHVWdmU0JtY205dElDZHlaV0ZqZENkY2JtbHRjRzl5ZENCN0lIVnpaVlZ3WkdGMFpVMXZkbWxsSUgwZ1puSnZiU0FuUUdodmIydHpMM1Z6WlMxdGIzWnBaWE1uWEc1cGJYQnZjblFnZEhsd1pTQjdJRnB2WkVWeWNtOXlJSDBnWm5KdmJTQW5lbTlrSjF4dWFXMXdiM0owSUhSNWNHVWdleUJOYjNacFpTQjlJR1p5YjIwZ0owQnphR0Z5WldRdmRIbHdaWE12Ylc5MmFXVXRkSGx3WlhNblhHNXBiWEJ2Y25RZ2V5QlZjR1JoZEdWTmIzWnBaVk5qYUdWdFlTQjlJR1p5YjIwZ0owQnphR0Z5WldRdmRIbHdaWE12YzJOb1pXMWhKMXh1WEc1bGVIQnZjblFnWm5WdVkzUnBiMjRnZFhObFRXOTJhV1ZGWkdsMFJtOXliU2hwYm1sMGFXRnNUVzkyYVdVNklFMXZkbWxsS1NCN1hHNGdJR052Ym5OMElGdHRiM1pwWlU1aGJXVXNJSE5sZEUxdmRtbGxUbUZ0WlYwZ1BTQjFjMlZUZEdGMFpTaHBibWwwYVdGc1RXOTJhV1V1Ym1GdFpTbGNiaUFnWTI5dWMzUWdXMjF2ZG1sbFdXVmhjaXdnYzJWMFRXOTJhV1ZaWldGeVhTQTlJSFZ6WlZOMFlYUmxLR2x1YVhScFlXeE5iM1pwWlM1NVpXRnlLVnh1SUNCamIyNXpkQ0JiYlc5MmFXVlNZWFJwYm1jc0lITmxkRTF2ZG1sbFVtRjBhVzVuWFNBOUlIVnpaVk4wWVhSbEtHbHVhWFJwWVd4TmIzWnBaUzV5WVhScGJtY3BYRzRnSUdOdmJuTjBJRnR0YjNacFpVUnBjbVZqZEc5eUxDQnpaWFJOYjNacFpVUnBjbVZqZEc5eVhTQTlJSFZ6WlZOMFlYUmxLR2x1YVhScFlXeE5iM1pwWlM1a2FYSmxZM1J2Y2lsY2JpQWdZMjl1YzNRZ1czWmhiR2xrWVhScGIyNUZjbkp2Y2l3Z2MyVjBWbUZzYVdSaGRHbHZia1Z5Y205eVhTQTlJSFZ6WlZOMFlYUmxQRnB2WkVWeWNtOXlJSHdnYm5Wc2JENG9iblZzYkNsY2JseHVJQ0JqYjI1emRDQjdJSE4wWVhSMWN5d2diWFYwWVhSbElIMGdQU0IxYzJWVmNHUmhkR1ZOYjNacFpTZ3BYRzRnSUdOdmJuTjBJRzF2ZG1sbFRHOWhaR2x1WnlBOUlITjBZWFIxY3lBOVBUMGdKM0JsYm1ScGJtY25YRzVjYmlBZ0x5OGdXbTlrSUV0bGVTQm1aV0YwZFhKbElETTZJSE5oWm1WUVlYSnpaVnh1SUNBdkx5QmFiMlFnYm05MFpUb2dhV1lnZVc5MUlHaGhkbVVnWVNCbWNtOXVkR1Z1WkN3Z2VXOTFJR05oYmlCMWMyVWdkR2hsSUhOamFHVnRZU0FySUhOaFptVlFZWEp6WlNCMGFHVnlaVnh1SUNBdkx5QnBiaUJ2Y21SbGNpQjBieUJ3WlhKbWIzSnRJR1p2Y20wZ2RtRnNhV1JoZEdsdmJpQmlaV1p2Y21VZ2MyVnVaR2x1WnlCMGFHVWdaR0YwWVNCMGJ5QjBhR1VnYzJWeWRtVnlYRzVjYmlBZ1kyOXVjM1FnYUdGdVpHeGxWWEJrWVhSbFRXOTJhV1VnUFNBb0tTQTlQaUI3WEc0Z0lDQWdZMjl1YzNRZ2NHRjViRzloWkNBOUlIdGNiaUFnSUNBZ0lHNWhiV1U2SUcxdmRtbGxUbUZ0WlN4Y2JpQWdJQ0FnSUhsbFlYSTZJRzF2ZG1sbFdXVmhjaXhjYmlBZ0lDQWdJSEpoZEdsdVp6b2diVzkyYVdWU1lYUnBibWNzWEc0Z0lDQWdJQ0JrYVhKbFkzUnZjam9nYlc5MmFXVkVhWEpsWTNSdmNseHVJQ0FnSUgxY2JpQWdJQ0JqYjI1emRDQnlaWE4xYkhRZ1BTQlZjR1JoZEdWTmIzWnBaVk5qYUdWdFlTNXpZV1psVUdGeWMyVW9jR0Y1Ykc5aFpDbGNibHh1SUNBZ0lDOHZJRnB2WkNCclpYa2dabVZoZEhWeVpTQTBPaUI1YjNVZ1kyRnVJSFYwYVd4cGVtVmNiaUFnSUNBdkx5QmhibVFnWlhod2IzTmxJSFJvWlNCMllXeHBaR0YwYVc5dUlITjBZWFJsSUhSdklHSmxJSFZ6WldRZ1lYUWdZU0JqYjIxd2IyNWxiblJjYmlBZ0lDQnBaaUFvSVhKbGMzVnNkQzV6ZFdOalpYTnpLU0I3WEc0Z0lDQWdJQ0J6WlhSV1lXeHBaR0YwYVc5dVJYSnliM0lvY21WemRXeDBMbVZ5Y205eUtWeHVJQ0FnSUNBZ2NtVjBkWEp1WEc0Z0lDQWdmVnh1WEc0Z0lDQWdiWFYwWVhSbEtIdGNiaUFnSUNBZ0lHbGtPaUJwYm1sMGFXRnNUVzkyYVdVdWFXUXNYRzRnSUNBZ0lDQnRiM1pwWlRvZ2NHRjViRzloWkZ4dUlDQWdJSDBwWEc1Y2JpQWdJQ0J6WlhSV1lXeHBaR0YwYVc5dVJYSnliM0lvYm5Wc2JDbGNiaUFnZlZ4dVhHNGdJSEpsZEhWeWJpQjdYRzRnSUNBZ2JXOTJhV1ZPWVcxbExGeHVJQ0FnSUcxdmRtbGxXV1ZoY2l4Y2JpQWdJQ0J0YjNacFpWSmhkR2x1Wnl4Y2JpQWdJQ0J6WlhSTmIzWnBaVTVoYldVc1hHNGdJQ0FnYzJWMFRXOTJhV1ZaWldGeUxGeHVJQ0FnSUhObGRFMXZkbWxsVW1GMGFXNW5MRnh1SUNBZ0lHaGhibVJzWlZWd1pHRjBaVTF2ZG1sbExGeHVJQ0FnSUcxdmRtbGxURzloWkdsdVp5eGNiaUFnSUNCMllXeHBaR0YwYVc5dVJYSnliM0lzWEc0Z0lDQWdiVzkyYVdWRWFYSmxZM1J2Y2l4Y2JpQWdJQ0J6WlhSTmIzWnBaVVJwY21WamRHOXlYRzRnSUgxY2JuMWNiaUpkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzVTBGQlV5eG5Ra0ZCWjBJN1FVRkRla0lzVTBGQlV5eHpRa0ZCYzBJN1FVRkhMMElzVTBGQlV5eDVRa0ZCZVVJN1FVRkZNMElzWjBKQlFWTXNhVUpCUVdsQ0xHTkJRWEZDTzBGQlEzQkVMRkZCUVUwc1EwRkJReXhYUVVGWExGbEJRVmtzU1VGQlNTeFRRVUZUTEdGQlFXRXNTVUZCU1R0QlFVTTFSQ3hSUVVGTkxFTkJRVU1zVjBGQlZ5eFpRVUZaTEVsQlFVa3NVMEZCVXl4aFFVRmhMRWxCUVVrN1FVRkROVVFzVVVGQlRTeERRVUZETEdGQlFXRXNZMEZCWXl4SlFVRkpMRk5CUVZNc1lVRkJZU3hOUVVGTk8wRkJRMnhGTEZGQlFVMHNRMEZCUXl4bFFVRmxMR2RDUVVGblFpeEpRVUZKTEZOQlFWTXNZVUZCWVN4UlFVRlJPMEZCUTNoRkxGRkJRVTBzUTBGQlF5eHBRa0ZCYVVJc2EwSkJRV3RDTEVsQlFVa3NVMEZCTUVJc1NVRkJTVHRCUVVVMVJTeFJRVUZOTEVWQlFVVXNVVUZCVVN4UFFVRlBMRWxCUVVrc1pVRkJaVHRCUVVNeFF5eFJRVUZOTEdWQlFXVXNWMEZCVnp0QlFVMW9ReXhSUVVGTkxHOUNRVUZ2UWl4TlFVRk5PMEZCUXpsQ0xGVkJRVTBzVlVGQlZUdEJRVUZCTEUxQlEyUXNUVUZCVFR0QlFVRkJMRTFCUTA0c1RVRkJUVHRCUVVGQkxFMUJRMDRzVVVGQlVUdEJRVUZCTEUxQlExSXNWVUZCVlR0QlFVRkJMRWxCUTFvN1FVRkRRU3hWUVVGTkxGTkJRVk1zYTBKQlFXdENMRlZCUVZVc1QwRkJUenRCUVVsc1JDeFJRVUZKTEVOQlFVTXNUMEZCVHl4VFFVRlRPMEZCUTI1Q0xIbENRVUZ0UWl4UFFVRlBMRXRCUVVzN1FVRkRMMEk3UVVGQlFTeEpRVU5HTzBGQlJVRXNWMEZCVHp0QlFVRkJMRTFCUTB3c1NVRkJTU3hoUVVGaE8wRkJRVUVzVFVGRGFrSXNUMEZCVHp0QlFVRkJMRWxCUTFRc1EwRkJRenRCUVVWRUxIVkNRVUZ0UWl4SlFVRkpPMEZCUVVFc1JVRkRla0k3UVVGRlFTeFRRVUZQTzBGQlFVRXNTVUZEVER0QlFVRkJMRWxCUTBFN1FVRkJRU3hKUVVOQk8wRkJRVUVzU1VGRFFUdEJRVUZCTEVsQlEwRTdRVUZCUVN4SlFVTkJPMEZCUVVFc1NVRkRRVHRCUVVGQkxFbEJRMEU3UVVGQlFTeEpRVU5CTzBGQlFVRXNTVUZEUVR0QlFVRkJMRWxCUTBFN1FVRkJRU3hGUVVOR08wRkJRMFk3SWl3aWJtRnRaWE1pT2x0ZGZRPT0=",
            "encoding": "base64"
          },
          "redirectURL": "",
          "headersSize": -1,
          "bodySize": 4988
        },
        "cache": {},
        "timings": {
          "blocked": -1,
          "dns": -1,
          "connect": -1,
          "send": -1,
          "wait": 11,
          "receive": -1,
          "ssl": -1
        }
      }
    ]
  }
}